const __vite__fileDeps=["assets/browserAll-BBSON43q.js","assets/webworkerAll-DM1gbbGH.js","assets/colorToUniform-KTpA7KSL.js","assets/WebGPURenderer-CKF2vikp.js","assets/SharedSystems-D4E0u1LV.js","assets/WebGLRenderer-53iyQi_6.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Bae=Object.defineProperty;var Uae=(r,e,n)=>e in r?Bae(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var k1=(r,e,n)=>(Uae(r,typeof e!="symbol"?e+"":e,n),n);function Fae(r,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in r)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function pw(r,e){const n=new Set(r.split(","));return i=>n.has(i)}const nn={},Qf=[],Ys=()=>{},zae=()=>!1,Jy=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),ME=r=>r.startsWith("onUpdate:"),Cn=Object.assign,EE=(r,e)=>{const n=r.indexOf(e);n>-1&&r.splice(n,1)},Xae=Object.prototype.hasOwnProperty,Ui=(r,e)=>Xae.call(r,e),It=Array.isArray,Hf=r=>Hp(r)==="[object Map]",Sd=r=>Hp(r)==="[object Set]",bI=r=>Hp(r)==="[object Date]",Wae=r=>Hp(r)==="[object RegExp]",ti=r=>typeof r=="function",An=r=>typeof r=="string",rc=r=>typeof r=="symbol",cn=r=>r!==null&&typeof r=="object",PE=r=>(cn(r)||ti(r))&&ti(r.then)&&ti(r.catch),FB=Object.prototype.toString,Hp=r=>FB.call(r),Qae=r=>Hp(r).slice(8,-1),zB=r=>Hp(r)==="[object Object]",AE=r=>An(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Gf=pw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mw=r=>{const e=Object.create(null);return n=>e[n]||(e[n]=r(n))},Hae=/-(\w)/g,Cs=mw(r=>r.replace(Hae,(e,n)=>n?n.toUpperCase():"")),Gae=/\B([A-Z])/g,_o=mw(r=>r.replace(Gae,"-$1").toLowerCase()),ev=mw(r=>r.charAt(0).toUpperCase()+r.slice(1)),R0=mw(r=>r?`on${ev(r)}`:""),Ma=(r,e)=>!Object.is(r,e),Yf=(r,e)=>{for(let n=0;n<r.length;n++)r[n](e)},XB=(r,e,n,i=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:i,value:n})},sO=r=>{const e=parseFloat(r);return isNaN(e)?r:e},oO=r=>{const e=An(r)?Number(r):NaN;return isNaN(e)?r:e};let xI;const WB=()=>xI||(xI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Yae="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",jae=pw(Yae);function Bh(r){if(It(r)){const e={};for(let n=0;n<r.length;n++){const i=r[n],s=An(i)?Jae(i):Bh(i);if(s)for(const o in s)e[o]=s[o]}return e}else if(An(r)||cn(r))return r}const qae=/;(?![^(]*\))/g,Zae=/:([^]+)/,Kae=/\/\*[^]*?\*\//g;function Jae(r){const e={};return r.replace(Kae,"").split(qae).forEach(n=>{if(n){const i=n.split(Zae);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Gp(r){let e="";if(An(r))e=r;else if(It(r))for(let n=0;n<r.length;n++){const i=Gp(r[n]);i&&(e+=i+" ")}else if(cn(r))for(const n in r)r[n]&&(e+=n+" ");return e.trim()}function ele(r){if(!r)return null;let{class:e,style:n}=r;return e&&!An(e)&&(r.class=Gp(e)),n&&(r.style=Bh(n)),r}const tle="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ile=pw(tle);function QB(r){return!!r||r===""}function nle(r,e){if(r.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<r.length;i++)n=Ch(r[i],e[i]);return n}function Ch(r,e){if(r===e)return!0;let n=bI(r),i=bI(e);if(n||i)return n&&i?r.getTime()===e.getTime():!1;if(n=rc(r),i=rc(e),n||i)return r===e;if(n=It(r),i=It(e),n||i)return n&&i?nle(r,e):!1;if(n=cn(r),i=cn(e),n||i){if(!n||!i)return!1;const s=Object.keys(r).length,o=Object.keys(e).length;if(s!==o)return!1;for(const a in r){const c=r.hasOwnProperty(a),h=e.hasOwnProperty(a);if(c&&!h||!c&&h||!Ch(r[a],e[a]))return!1}}return String(r)===String(e)}function gw(r,e){return r.findIndex(n=>Ch(n,e))}const mp=r=>An(r)?r:r==null?"":It(r)||cn(r)&&(r.toString===FB||!ti(r.toString))?JSON.stringify(r,HB,2):String(r),HB=(r,e)=>e&&e.__v_isRef?HB(r,e.value):Hf(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],o)=>(n[sC(i,o)+" =>"]=s,n),{})}:Sd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>sC(n))}:rc(e)?sC(e):cn(e)&&!It(e)&&!zB(e)?String(e):e,sC=(r,e="")=>{var n;return rc(r)?`Symbol(${(n=r.description)!=null?n:e})`:r};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vo;class RE{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=vo,!e&&vo&&(this.index=(vo.scopes||(vo.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=vo;try{return vo=this,e()}finally{vo=n}}}on(){vo=this}off(){vo=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function rle(r){return new RE(r)}function GB(r,e=vo){e&&e.active&&e.effects.push(r)}function yw(){return vo}function IE(r){vo&&vo.cleanups.push(r)}let Zu;class gp{constructor(e,n,i,s){this.fn=e,this.trigger=n,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,GB(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Uh();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(sle(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Fh()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=bh,n=Zu;try{return bh=!0,Zu=this,this._runnings++,OI(this),this.fn()}finally{wI(this),this._runnings--,Zu=n,bh=e}}stop(){this.active&&(OI(this),wI(this),this.onStop&&this.onStop(),this.active=!1)}}function sle(r){return r.value}function OI(r){r._trackId++,r._depsLength=0}function wI(r){if(r.deps.length>r._depsLength){for(let e=r._depsLength;e<r.deps.length;e++)YB(r.deps[e],r);r.deps.length=r._depsLength}}function YB(r,e){const n=r.get(e);n!==void 0&&e._trackId!==n&&(r.delete(e),r.size===0&&r.cleanup())}function ole(r,e){r.effect instanceof gp&&(r=r.effect.fn);const n=new gp(r,Ys,()=>{n.dirty&&n.run()});e&&(Cn(n,e),e.scope&&GB(n,e.scope)),(!e||!e.lazy)&&n.run();const i=n.run.bind(n);return i.effect=n,i}function ale(r){r.effect.stop()}let bh=!0,Fk=0;const jB=[];function Uh(){jB.push(bh),bh=!1}function Fh(){const r=jB.pop();bh=r===void 0?!0:r}function DE(){Fk++}function NE(){for(Fk--;!Fk&&zk.length;)zk.shift()()}function qB(r,e,n){if(e.get(r)!==r._trackId){e.set(r,r._trackId);const i=r.deps[r._depsLength];i!==e?(i&&YB(i,r),r.deps[r._depsLength++]=e):r._depsLength++}}const zk=[];function ZB(r,e,n){DE();for(const i of r.keys()){let s;i._dirtyLevel<e&&(s??(s=r.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(s??(s=r.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&zk.push(i.scheduler)))}NE()}const KB=(r,e)=>{const n=new Map;return n.cleanup=r,n.computed=e,n},aO=new WeakMap,Ku=Symbol(""),Xk=Symbol("");function eo(r,e,n){if(bh&&Zu){let i=aO.get(r);i||aO.set(r,i=new Map);let s=i.get(n);s||i.set(n,s=KB(()=>i.delete(n))),qB(Zu,s)}}function ql(r,e,n,i,s,o){const a=aO.get(r);if(!a)return;let c=[];if(e==="clear")c=[...a.values()];else if(n==="length"&&It(r)){const h=Number(i);a.forEach((d,f)=>{(f==="length"||!rc(f)&&f>=h)&&c.push(d)})}else switch(n!==void 0&&c.push(a.get(n)),e){case"add":It(r)?AE(n)&&c.push(a.get("length")):(c.push(a.get(Ku)),Hf(r)&&c.push(a.get(Xk)));break;case"delete":It(r)||(c.push(a.get(Ku)),Hf(r)&&c.push(a.get(Xk)));break;case"set":Hf(r)&&c.push(a.get(Ku));break}DE();for(const h of c)h&&ZB(h,4);NE()}function lle(r,e){const n=aO.get(r);return n&&n.get(e)}const cle=pw("__proto__,__v_isRef,__isVue"),JB=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(rc)),_I=hle();function hle(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...n){const i=Bi(this);for(let o=0,a=this.length;o<a;o++)eo(i,"get",o+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(Bi)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...n){Uh(),DE();const i=Bi(this)[e].apply(this,n);return NE(),Fh(),i}}),r}function ule(r){rc(r)||(r=String(r));const e=Bi(this);return eo(e,"has",r),e.hasOwnProperty(r)}class e8{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){const s=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return o;if(n==="__v_raw")return i===(s?o?o8:s8:o?r8:n8).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=It(e);if(!s){if(a&&Ui(_I,n))return Reflect.get(_I,n,i);if(n==="hasOwnProperty")return ule}const c=Reflect.get(e,n,i);return(rc(n)?JB.has(n):cle(n))||(s||eo(e,"get",n),o)?c:ur(c)?a&&AE(n)?c:c.value:cn(c)?s?cd(c):Cd(c):c}}class t8 extends e8{constructor(e=!1){super(!1,e)}set(e,n,i,s){let o=e[n];if(!this._isShallow){const h=yp(o);if(!ey(i)&&!yp(i)&&(o=Bi(o),i=Bi(i)),!It(e)&&ur(o)&&!ur(i))return h?!1:(o.value=i,!0)}const a=It(e)&&AE(n)?Number(n)<e.length:Ui(e,n),c=Reflect.set(e,n,i,s);return e===Bi(s)&&(a?Ma(i,o)&&ql(e,"set",n,i):ql(e,"add",n,i)),c}deleteProperty(e,n){const i=Ui(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&ql(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!rc(n)||!JB.has(n))&&eo(e,"has",n),i}ownKeys(e){return eo(e,"iterate",It(e)?"length":Ku),Reflect.ownKeys(e)}}class i8 extends e8{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const dle=new t8,fle=new i8,ple=new t8(!0),mle=new i8(!0),$E=r=>r,vw=r=>Reflect.getPrototypeOf(r);function T1(r,e,n=!1,i=!1){r=r.__v_raw;const s=Bi(r),o=Bi(e);n||(Ma(e,o)&&eo(s,"get",e),eo(s,"get",o));const{has:a}=vw(s),c=i?$E:n?LE:ty;if(a.call(s,e))return c(r.get(e));if(a.call(s,o))return c(r.get(o));r!==s&&r.get(e)}function M1(r,e=!1){const n=this.__v_raw,i=Bi(n),s=Bi(r);return e||(Ma(r,s)&&eo(i,"has",r),eo(i,"has",s)),r===s?n.has(r):n.has(r)||n.has(s)}function E1(r,e=!1){return r=r.__v_raw,!e&&eo(Bi(r),"iterate",Ku),Reflect.get(r,"size",r)}function SI(r){r=Bi(r);const e=Bi(this);return vw(e).has.call(e,r)||(e.add(r),ql(e,"add",r,r)),this}function CI(r,e){e=Bi(e);const n=Bi(this),{has:i,get:s}=vw(n);let o=i.call(n,r);o||(r=Bi(r),o=i.call(n,r));const a=s.call(n,r);return n.set(r,e),o?Ma(e,a)&&ql(n,"set",r,e):ql(n,"add",r,e),this}function kI(r){const e=Bi(this),{has:n,get:i}=vw(e);let s=n.call(e,r);s||(r=Bi(r),s=n.call(e,r)),i&&i.call(e,r);const o=e.delete(r);return s&&ql(e,"delete",r,void 0),o}function TI(){const r=Bi(this),e=r.size!==0,n=r.clear();return e&&ql(r,"clear",void 0,void 0),n}function P1(r,e){return function(i,s){const o=this,a=o.__v_raw,c=Bi(a),h=e?$E:r?LE:ty;return!r&&eo(c,"iterate",Ku),a.forEach((d,f)=>i.call(s,h(d),h(f),o))}}function A1(r,e,n){return function(...i){const s=this.__v_raw,o=Bi(s),a=Hf(o),c=r==="entries"||r===Symbol.iterator&&a,h=r==="keys"&&a,d=s[r](...i),f=n?$E:e?LE:ty;return!e&&eo(o,"iterate",h?Xk:Ku),{next(){const{value:p,done:g}=d.next();return g?{value:p,done:g}:{value:c?[f(p[0]),f(p[1])]:f(p),done:g}},[Symbol.iterator](){return this}}}}function Lc(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function gle(){const r={get(o){return T1(this,o)},get size(){return E1(this)},has:M1,add:SI,set:CI,delete:kI,clear:TI,forEach:P1(!1,!1)},e={get(o){return T1(this,o,!1,!0)},get size(){return E1(this)},has:M1,add:SI,set:CI,delete:kI,clear:TI,forEach:P1(!1,!0)},n={get(o){return T1(this,o,!0)},get size(){return E1(this,!0)},has(o){return M1.call(this,o,!0)},add:Lc("add"),set:Lc("set"),delete:Lc("delete"),clear:Lc("clear"),forEach:P1(!0,!1)},i={get(o){return T1(this,o,!0,!0)},get size(){return E1(this,!0)},has(o){return M1.call(this,o,!0)},add:Lc("add"),set:Lc("set"),delete:Lc("delete"),clear:Lc("clear"),forEach:P1(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=A1(o,!1,!1),n[o]=A1(o,!0,!1),e[o]=A1(o,!1,!0),i[o]=A1(o,!0,!0)}),[r,n,e,i]}const[yle,vle,ble,xle]=gle();function bw(r,e){const n=e?r?xle:ble:r?vle:yle;return(i,s,o)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?i:Reflect.get(Ui(n,s)&&s in i?n:i,s,o)}const Ole={get:bw(!1,!1)},wle={get:bw(!1,!0)},_le={get:bw(!0,!1)},Sle={get:bw(!0,!0)},n8=new WeakMap,r8=new WeakMap,s8=new WeakMap,o8=new WeakMap;function Cle(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kle(r){return r.__v_skip||!Object.isExtensible(r)?0:Cle(Qae(r))}function Cd(r){return yp(r)?r:xw(r,!1,dle,Ole,n8)}function a8(r){return xw(r,!1,ple,wle,r8)}function cd(r){return xw(r,!0,fle,_le,s8)}function Tle(r){return xw(r,!0,mle,Sle,o8)}function xw(r,e,n,i,s){if(!cn(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=s.get(r);if(o)return o;const a=kle(r);if(a===0)return r;const c=new Proxy(r,a===2?i:n);return s.set(r,c),c}function jf(r){return yp(r)?jf(r.__v_raw):!!(r&&r.__v_isReactive)}function yp(r){return!!(r&&r.__v_isReadonly)}function ey(r){return!!(r&&r.__v_isShallow)}function VE(r){return r?!!r.__v_raw:!1}function Bi(r){const e=r&&r.__v_raw;return e?Bi(e):r}function l8(r){return Object.isExtensible(r)&&XB(r,"__v_skip",!0),r}const ty=r=>cn(r)?Cd(r):r,LE=r=>cn(r)?cd(r):r;class c8{constructor(e,n,i,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new gp(()=>e(this._value),()=>qf(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=Bi(this);return(!e._cacheable||e.effect.dirty)&&Ma(e._value,e._value=e.effect.run())&&qf(e,4),BE(e),e.effect._dirtyLevel>=2&&qf(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Mle(r,e,n=!1){let i,s;const o=ti(r);return o?(i=r,s=Ys):(i=r.get,s=r.set),new c8(i,s,o||!s,n)}function BE(r){var e;bh&&Zu&&(r=Bi(r),qB(Zu,(e=r.dep)!=null?e:r.dep=KB(()=>r.dep=void 0,r instanceof c8?r:void 0)))}function qf(r,e=4,n){r=Bi(r);const i=r.dep;i&&ZB(i,e)}function ur(r){return!!(r&&r.__v_isRef===!0)}function lt(r){return h8(r,!1)}function Wn(r){return h8(r,!0)}function h8(r,e){return ur(r)?r:new Ele(r,e)}class Ele{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Bi(e),this._value=n?e:ty(e)}get value(){return BE(this),this._value}set value(e){const n=this.__v_isShallow||ey(e)||yp(e);e=n?e:Bi(e),Ma(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ty(e),qf(this,4))}}function Ple(r){qf(r,4)}function li(r){return ur(r)?r.value:r}function Ale(r){return ti(r)?r():li(r)}const Rle={get:(r,e,n)=>li(Reflect.get(r,e,n)),set:(r,e,n,i)=>{const s=r[e];return ur(s)&&!ur(n)?(s.value=n,!0):Reflect.set(r,e,n,i)}};function UE(r){return jf(r)?r:new Proxy(r,Rle)}class Ile{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:i}=e(()=>BE(this),()=>qf(this));this._get=n,this._set=i}get value(){return this._get()}set value(e){this._set(e)}}function FE(r){return new Ile(r)}function tv(r){const e=It(r)?new Array(r.length):{};for(const n in r)e[n]=u8(r,n);return e}class Dle{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return lle(Bi(this._object),this._key)}}class Nle{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function $le(r,e,n){return ur(r)?r:ti(r)?new Nle(r):cn(r)&&arguments.length>1?u8(r,e,n):lt(r)}function u8(r,e,n){const i=r[e];return ur(i)?i:new Dle(r,e,n)}const Vle={GET:"get",HAS:"has",ITERATE:"iterate"},Lle={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ble(r,e){}const Ule={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},Fle={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function Zl(r,e,n,i){try{return i?r(...i):r()}catch(s){kd(s,e,n)}}function Mo(r,e,n,i){if(ti(r)){const s=Zl(r,e,n,i);return s&&PE(s)&&s.catch(o=>{kd(o,e,n)}),s}if(It(r)){const s=[];for(let o=0;o<r.length;o++)s.push(Mo(r[o],e,n,i));return s}}function kd(r,e,n,i=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const d=o.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](r,a,c)===!1)return}o=o.parent}const h=e.appContext.config.errorHandler;if(h){Uh(),Zl(h,null,10,[r,a,c]),Fh();return}}zle(r,n,s,i)}function zle(r,e,n,i=!0){console.error(r)}let iy=!1,Wk=!1;const is=[];let Ja=0;const Zf=[];let nh=null,Vu=0;const d8=Promise.resolve();let zE=null;function Yp(r){const e=zE||d8;return r?e.then(this?r.bind(this):r):e}function Xle(r){let e=Ja+1,n=is.length;for(;e<n;){const i=e+n>>>1,s=is[i],o=ny(s);o<r||o===r&&s.pre?e=i+1:n=i}return e}function Ow(r){(!is.length||!is.includes(r,iy&&r.allowRecurse?Ja+1:Ja))&&(r.id==null?is.push(r):is.splice(Xle(r.id),0,r),f8())}function f8(){!iy&&!Wk&&(Wk=!0,zE=d8.then(p8))}function Wle(r){const e=is.indexOf(r);e>Ja&&is.splice(e,1)}function lO(r){It(r)?Zf.push(...r):(!nh||!nh.includes(r,r.allowRecurse?Vu+1:Vu))&&Zf.push(r),f8()}function MI(r,e,n=iy?Ja+1:0){for(;n<is.length;n++){const i=is[n];if(i&&i.pre){if(r&&i.id!==r.uid)continue;is.splice(n,1),n--,i()}}}function cO(r){if(Zf.length){const e=[...new Set(Zf)].sort((n,i)=>ny(n)-ny(i));if(Zf.length=0,nh){nh.push(...e);return}for(nh=e,Vu=0;Vu<nh.length;Vu++)nh[Vu]();nh=null,Vu=0}}const ny=r=>r.id==null?1/0:r.id,Qle=(r,e)=>{const n=ny(r)-ny(e);if(n===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return n};function p8(r){Wk=!1,iy=!0,is.sort(Qle);try{for(Ja=0;Ja<is.length;Ja++){const e=is[Ja];e&&e.active!==!1&&Zl(e,null,14)}}finally{Ja=0,is.length=0,cO(),iy=!1,zE=null,(is.length||Zf.length)&&p8()}}let Rf,R1=[];function m8(r,e){var n,i;Rf=r,Rf?(Rf.enabled=!0,R1.forEach(({event:s,args:o})=>Rf.emit(s,...o)),R1=[]):typeof window<"u"&&window.HTMLElement&&!((i=(n=window.navigator)==null?void 0:n.userAgent)!=null&&i.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{m8(o,e)}),setTimeout(()=>{Rf||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,R1=[])},3e3)):R1=[]}function Hle(r,e,...n){if(r.isUnmounted)return;const i=r.vnode.props||nn;let s=n;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in i){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:p,trim:g}=i[f]||nn;g&&(s=n.map(y=>An(y)?y.trim():y)),p&&(s=n.map(sO))}let c,h=i[c=R0(e)]||i[c=R0(Cs(e))];!h&&o&&(h=i[c=R0(_o(e))]),h&&Mo(h,r,6,s);const d=i[c+"Once"];if(d){if(!r.emitted)r.emitted={};else if(r.emitted[c])return;r.emitted[c]=!0,Mo(d,r,6,s)}}function g8(r,e,n=!1){const i=e.emitsCache,s=i.get(r);if(s!==void 0)return s;const o=r.emits;let a={},c=!1;if(!ti(r)){const h=d=>{const f=g8(d,e,!0);f&&(c=!0,Cn(a,f))};!n&&e.mixins.length&&e.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}return!o&&!c?(cn(r)&&i.set(r,null),null):(It(o)?o.forEach(h=>a[h]=null):Cn(a,o),cn(r)&&i.set(r,a),a)}function ww(r,e){return!r||!Jy(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ui(r,e[0].toLowerCase()+e.slice(1))||Ui(r,_o(e))||Ui(r,e))}let or=null,_w=null;function ry(r){const e=or;return or=r,_w=r&&r.type.__scopeId||null,e}function y8(r){_w=r}function v8(){_w=null}const Gle=r=>et;function et(r,e=or,n){if(!e||r._n)return r;const i=(...s)=>{i._d&&Jk(-1);const o=ry(e);let a;try{a=r(...s)}finally{ry(o),i._d&&Jk(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function Tx(r){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[o],slots:a,attrs:c,emit:h,render:d,renderCache:f,props:p,data:g,setupState:y,ctx:b,inheritAttrs:w}=r,x=ry(r);let S,_;try{if(n.shapeFlag&4){const T=s||i,E=T;S=wo(d.call(E,T,f,p,y,g,b)),_=c}else{const T=e;S=wo(T.length>1?T(p,{attrs:c,slots:a,emit:h}):T(p,null)),_=e.props?c:jle(c)}}catch(T){N0.length=0,kd(T,r,1),S=Ie(zr)}let O=S;if(_&&w!==!1){const T=Object.keys(_),{shapeFlag:E}=O;T.length&&E&7&&(o&&T.some(ME)&&(_=qle(_,o)),O=ll(O,_,!1,!0))}return n.dirs&&(O=ll(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&(O.transition=n.transition),S=O,ry(x),S}function Yle(r,e=!0){let n;for(let i=0;i<r.length;i++){const s=r[i];if(Th(s)){if(s.type!==zr||s.children==="v-if"){if(n)return;n=s}}else return}return n}const jle=r=>{let e;for(const n in r)(n==="class"||n==="style"||Jy(n))&&((e||(e={}))[n]=r[n]);return e},qle=(r,e)=>{const n={};for(const i in r)(!ME(i)||!(i.slice(9)in e))&&(n[i]=r[i]);return n};function Zle(r,e,n){const{props:i,children:s,component:o}=r,{props:a,children:c,patchFlag:h}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return i?EI(i,a,d):!!a;if(h&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const g=f[p];if(a[g]!==i[g]&&!ww(d,g))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:i===a?!1:i?a?EI(i,a,d):!0:!!a;return!1}function EI(r,e,n){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let s=0;s<i.length;s++){const o=i[s];if(e[o]!==r[o]&&!ww(n,o))return!0}return!1}function XE({vnode:r,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===r&&(i.el=r.el),i===r)(r=e.vnode).el=n,e=e.parent;else break}}const WE="components",Kle="directives";function Rt(r,e){return QE(WE,r,!0,e)||r}const b8=Symbol.for("v-ndc");function Qk(r){return An(r)?QE(WE,r,!1)||r:r||b8}function Jle(r){return QE(Kle,r)}function QE(r,e,n=!0,i=!1){const s=or||yr;if(s){const o=s.type;if(r===WE){const c=rT(o,!1);if(c&&(c===e||c===Cs(e)||c===ev(Cs(e))))return o}const a=PI(s[r]||o[r],e)||PI(s.appContext[r],e);return!a&&i?o:a}}function PI(r,e){return r&&(r[e]||r[Cs(e)]||r[ev(Cs(e))])}const x8=r=>r.__isSuspense;let Hk=0;const ece={name:"Suspense",__isSuspense:!0,process(r,e,n,i,s,o,a,c,h,d){if(r==null)tce(e,n,i,s,o,a,c,h,d);else{if(o&&o.deps>0&&!r.suspense.isInFallback){e.suspense=r.suspense,e.suspense.vnode=e,e.el=r.el;return}ice(r,e,n,i,s,a,c,h,d)}},hydrate:nce,create:HE,normalize:rce},O8=ece;function sy(r,e){const n=r.props&&r.props[e];ti(n)&&n()}function tce(r,e,n,i,s,o,a,c,h){const{p:d,o:{createElement:f}}=h,p=f("div"),g=r.suspense=HE(r,s,i,e,p,n,o,a,c,h);d(null,g.pendingBranch=r.ssContent,p,null,i,g,o,a),g.deps>0?(sy(r,"onPending"),sy(r,"onFallback"),d(null,r.ssFallback,e,n,i,null,o,a),Kf(g,r.ssFallback)):g.resolve(!1,!0)}function ice(r,e,n,i,s,o,a,c,{p:h,um:d,o:{createElement:f}}){const p=e.suspense=r.suspense;p.vnode=e,e.el=r.el;const g=e.ssContent,y=e.ssFallback,{activeBranch:b,pendingBranch:w,isInFallback:x,isHydrating:S}=p;if(w)p.pendingBranch=g,_a(g,w)?(h(w,g,p.hiddenContainer,null,s,p,o,a,c),p.deps<=0?p.resolve():x&&(S||(h(b,y,n,i,s,null,o,a,c),Kf(p,y)))):(p.pendingId=Hk++,S?(p.isHydrating=!1,p.activeBranch=w):d(w,s,p),p.deps=0,p.effects.length=0,p.hiddenContainer=f("div"),x?(h(null,g,p.hiddenContainer,null,s,p,o,a,c),p.deps<=0?p.resolve():(h(b,y,n,i,s,null,o,a,c),Kf(p,y))):b&&_a(g,b)?(h(b,g,n,i,s,p,o,a,c),p.resolve(!0)):(h(null,g,p.hiddenContainer,null,s,p,o,a,c),p.deps<=0&&p.resolve()));else if(b&&_a(g,b))h(b,g,n,i,s,p,o,a,c),Kf(p,g);else if(sy(e,"onPending"),p.pendingBranch=g,g.shapeFlag&512?p.pendingId=g.component.suspenseId:p.pendingId=Hk++,h(null,g,p.hiddenContainer,null,s,p,o,a,c),p.deps<=0)p.resolve();else{const{timeout:_,pendingId:O}=p;_>0?setTimeout(()=>{p.pendingId===O&&p.fallback(y)},_):_===0&&p.fallback(y)}}function HE(r,e,n,i,s,o,a,c,h,d,f=!1){const{p,m:g,um:y,n:b,o:{parentNode:w,remove:x}}=d;let S;const _=sce(r);_&&e&&e.pendingBranch&&(S=e.pendingId,e.deps++);const O=r.props?oO(r.props.timeout):void 0,T=o,E={vnode:r,parent:e,parentComponent:n,namespace:a,container:i,hiddenContainer:s,deps:0,pendingId:Hk++,timeout:typeof O=="number"?O:-1,activeBranch:null,pendingBranch:null,isInFallback:!f,isHydrating:f,isUnmounted:!1,effects:[],resolve(P=!1,I=!1){const{vnode:A,activeBranch:D,pendingBranch:M,pendingId:$,effects:L,parentComponent:N,container:V}=E;let U=!1;E.isHydrating?E.isHydrating=!1:P||(U=D&&M.transition&&M.transition.mode==="out-in",U&&(D.transition.afterLeave=()=>{$===E.pendingId&&(g(M,V,o===T?b(D):o,0),lO(L))}),D&&(w(D.el)!==E.hiddenContainer&&(o=b(D)),y(D,N,E,!0)),U||g(M,V,o,0)),Kf(E,M),E.pendingBranch=null,E.isInFallback=!1;let F=E.parent,H=!1;for(;F;){if(F.pendingBranch){F.effects.push(...L),H=!0;break}F=F.parent}!H&&!U&&lO(L),E.effects=[],_&&e&&e.pendingBranch&&S===e.pendingId&&(e.deps--,e.deps===0&&!I&&e.resolve()),sy(A,"onResolve")},fallback(P){if(!E.pendingBranch)return;const{vnode:I,activeBranch:A,parentComponent:D,container:M,namespace:$}=E;sy(I,"onFallback");const L=b(A),N=()=>{E.isInFallback&&(p(null,P,M,L,D,null,$,c,h),Kf(E,P))},V=P.transition&&P.transition.mode==="out-in";V&&(A.transition.afterLeave=N),E.isInFallback=!0,y(A,D,null,!0),V||N()},move(P,I,A){E.activeBranch&&g(E.activeBranch,P,I,A),E.container=P},next(){return E.activeBranch&&b(E.activeBranch)},registerDep(P,I){const A=!!E.pendingBranch;A&&E.deps++;const D=P.vnode.el;P.asyncDep.catch(M=>{kd(M,P,0)}).then(M=>{if(P.isUnmounted||E.isUnmounted||E.pendingId!==P.suspenseId)return;P.asyncResolved=!0;const{vnode:$}=P;iT(P,M,!1),D&&($.el=D);const L=!D&&P.subTree.el;I(P,$,w(D||P.subTree.el),D?null:b(P.subTree),E,a,h),L&&x(L),XE(P,$.el),A&&--E.deps===0&&E.resolve()})},unmount(P,I){E.isUnmounted=!0,E.activeBranch&&y(E.activeBranch,n,P,I),E.pendingBranch&&y(E.pendingBranch,n,P,I)}};return E}function nce(r,e,n,i,s,o,a,c,h){const d=e.suspense=HE(e,i,n,r.parentNode,document.createElement("div"),null,s,o,a,c,!0),f=h(r,d.pendingBranch=e.ssContent,n,d,o,a);return d.deps===0&&d.resolve(!1,!0),f}function rce(r){const{shapeFlag:e,children:n}=r,i=e&32;r.ssContent=AI(i?n.default:n),r.ssFallback=i?AI(n.fallback):Ie(zr)}function AI(r){let e;if(ti(r)){const n=dd&&r._c;n&&(r._d=!1,ci()),r=r(),n&&(r._d=!0,e=js,rU())}return It(r)&&(r=Yle(r)),r=wo(r),e&&!r.dynamicChildren&&(r.dynamicChildren=e.filter(n=>n!==r)),r}function w8(r,e){e&&e.pendingBranch?It(r)?e.effects.push(...r):e.effects.push(r):lO(r)}function Kf(r,e){r.activeBranch=e;const{vnode:n,parentComponent:i}=r;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,i&&i.subTree===n&&(i.vnode.el=s,XE(i,s))}function sce(r){const e=r.props&&r.props.suspensible;return e!=null&&e!==!1}const _8=Symbol.for("v-scx"),S8=()=>ep(_8);function Kl(r,e){return iv(r,null,e)}function C8(r,e){return iv(r,null,{flush:"post"})}function k8(r,e){return iv(r,null,{flush:"sync"})}const I1={};function Qi(r,e,n){return iv(r,e,n)}function iv(r,e,{immediate:n,deep:i,flush:s,once:o,onTrack:a,onTrigger:c}=nn){if(e&&o){const P=e;e=(...I)=>{P(...I),E()}}const h=yr,d=P=>i===!0?P:Fu(P,i===!1?1:void 0);let f,p=!1,g=!1;if(ur(r)?(f=()=>r.value,p=ey(r)):jf(r)?(f=()=>d(r),p=!0):It(r)?(g=!0,p=r.some(P=>jf(P)||ey(P)),f=()=>r.map(P=>{if(ur(P))return P.value;if(jf(P))return d(P);if(ti(P))return Zl(P,h,2)})):ti(r)?e?f=()=>Zl(r,h,2):f=()=>(y&&y(),Mo(r,h,3,[b])):f=Ys,e&&i){const P=f;f=()=>Fu(P())}let y,b=P=>{y=O.onStop=()=>{Zl(P,h,4),y=O.onStop=void 0}},w;if(rv)if(b=Ys,e?n&&Mo(e,h,3,[f(),g?[]:void 0,b]):f(),s==="sync"){const P=S8();w=P.__watcherHandles||(P.__watcherHandles=[])}else return Ys;let x=g?new Array(r.length).fill(I1):I1;const S=()=>{if(!(!O.active||!O.dirty))if(e){const P=O.run();(i||p||(g?P.some((I,A)=>Ma(I,x[A])):Ma(P,x)))&&(y&&y(),Mo(e,h,3,[P,x===I1?void 0:g&&x[0]===I1?[]:x,b]),x=P)}else O.run()};S.allowRecurse=!!e;let _;s==="sync"?_=S:s==="post"?_=()=>Vr(S,h&&h.suspense):(S.pre=!0,h&&(S.id=h.uid),_=()=>Ow(S));const O=new gp(f,Ys,_),T=yw(),E=()=>{O.stop(),T&&EE(T.effects,O)};return e?n?S():x=O.run():s==="post"?Vr(O.run.bind(O),h&&h.suspense):O.run(),w&&w.push(E),E}function oce(r,e,n){const i=this.proxy,s=An(r)?r.includes(".")?T8(i,r):()=>i[r]:r.bind(i,i);let o;ti(e)?o=e:(o=e.handler,n=e);const a=fd(this),c=iv(s,o.bind(i),n);return a(),c}function T8(r,e){const n=e.split(".");return()=>{let i=r;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function Fu(r,e=1/0,n){if(e<=0||!cn(r)||r.__v_skip||(n=n||new Set,n.has(r)))return r;if(n.add(r),e--,ur(r))Fu(r.value,e,n);else if(It(r))for(let i=0;i<r.length;i++)Fu(r[i],e,n);else if(Sd(r)||Hf(r))r.forEach(i=>{Fu(i,e,n)});else if(zB(r))for(const i in r)Fu(r[i],e,n);return r}function ace(r,e){if(or===null)return r;const n=Mw(or)||or.proxy,i=r.dirs||(r.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,c,h=nn]=e[s];o&&(ti(o)&&(o={mounted:o,updated:o}),o.deep&&Fu(a),i.push({dir:o,instance:n,value:a,oldValue:void 0,arg:c,modifiers:h}))}return r}function Ka(r,e,n,i){const s=r.dirs,o=e&&e.dirs;for(let a=0;a<s.length;a++){const c=s[a];o&&(c.oldValue=o[a].value);let h=c.dir[i];h&&(Uh(),Mo(h,n,8,[r.el,c,r,e]),Fh())}}const rh=Symbol("_leaveCb"),D1=Symbol("_enterCb");function GE(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jn(()=>{r.isMounted=!0}),Tw(()=>{r.isUnmounting=!0}),r}const Lo=[Function,Array],YE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Lo,onEnter:Lo,onAfterEnter:Lo,onEnterCancelled:Lo,onBeforeLeave:Lo,onLeave:Lo,onAfterLeave:Lo,onLeaveCancelled:Lo,onBeforeAppear:Lo,onAppear:Lo,onAfterAppear:Lo,onAppearCancelled:Lo},lce={name:"BaseTransition",props:YE,setup(r,{slots:e}){const n=Ao(),i=GE();return()=>{const s=e.default&&Sw(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const g of s)if(g.type!==zr){o=g;break}}const a=Bi(r),{mode:c}=a;if(i.isLeaving)return oC(o);const h=RI(o);if(!h)return oC(o);const d=vp(h,a,i,n);hd(h,d);const f=n.subTree,p=f&&RI(f);if(p&&p.type!==zr&&!_a(h,p)){const g=vp(p,a,i,n);if(hd(p,g),c==="out-in"&&h.type!==zr)return i.isLeaving=!0,g.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},oC(o);c==="in-out"&&h.type!==zr&&(g.delayLeave=(y,b,w)=>{const x=E8(i,p);x[String(p.key)]=p,y[rh]=()=>{b(),y[rh]=void 0,delete d.delayedLeave},d.delayedLeave=w})}return o}}},M8=lce;function E8(r,e){const{leavingVNodes:n}=r;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function vp(r,e,n,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:y,onLeaveCancelled:b,onBeforeAppear:w,onAppear:x,onAfterAppear:S,onAppearCancelled:_}=e,O=String(r.key),T=E8(n,r),E=(A,D)=>{A&&Mo(A,i,9,D)},P=(A,D)=>{const M=D[1];E(A,D),It(A)?A.every($=>$.length<=1)&&M():A.length<=1&&M()},I={mode:o,persisted:a,beforeEnter(A){let D=c;if(!n.isMounted)if(s)D=w||c;else return;A[rh]&&A[rh](!0);const M=T[O];M&&_a(r,M)&&M.el[rh]&&M.el[rh](),E(D,[A])},enter(A){let D=h,M=d,$=f;if(!n.isMounted)if(s)D=x||h,M=S||d,$=_||f;else return;let L=!1;const N=A[D1]=V=>{L||(L=!0,V?E($,[A]):E(M,[A]),I.delayedLeave&&I.delayedLeave(),A[D1]=void 0)};D?P(D,[A,N]):N()},leave(A,D){const M=String(r.key);if(A[D1]&&A[D1](!0),n.isUnmounting)return D();E(p,[A]);let $=!1;const L=A[rh]=N=>{$||($=!0,D(),N?E(b,[A]):E(y,[A]),A[rh]=void 0,T[M]===r&&delete T[M])};T[M]=r,g?P(g,[A,L]):L()},clone(A){return vp(A,e,n,i)}};return I}function oC(r){if(nv(r))return r=ll(r),r.children=null,r}function RI(r){if(!nv(r))return r;const{shapeFlag:e,children:n}=r;if(n){if(e&16)return n[0];if(e&32&&ti(n.default))return n.default()}}function hd(r,e){r.shapeFlag&6&&r.component?hd(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function Sw(r,e=!1,n){let i=[],s=0;for(let o=0;o<r.length;o++){let a=r[o];const c=n==null?a.key:String(n)+String(a.key!=null?a.key:o);a.type===dn?(a.patchFlag&128&&s++,i=i.concat(Sw(a.children,e,c))):(e||a.type!==zr)&&i.push(c!=null?ll(a,{key:c}):a)}if(s>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function sc(r,e){return ti(r)?Cn({name:r.name},e,{setup:r}):r}const Ju=r=>!!r.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function cce(r){ti(r)&&(r={loader:r});const{loader:e,loadingComponent:n,errorComponent:i,delay:s=200,timeout:o,suspensible:a=!0,onError:c}=r;let h=null,d,f=0;const p=()=>(f++,h=null,g()),g=()=>{let y;return h||(y=h=e().catch(b=>{if(b=b instanceof Error?b:new Error(String(b)),c)return new Promise((w,x)=>{c(b,()=>w(p()),()=>x(b),f+1)});throw b}).then(b=>y!==h&&h?h:(b&&(b.__esModule||b[Symbol.toStringTag]==="Module")&&(b=b.default),d=b,b)))};return sc({name:"AsyncComponentWrapper",__asyncLoader:g,get __asyncResolved(){return d},setup(){const y=yr;if(d)return()=>aC(d,y);const b=_=>{h=null,kd(_,y,13,!i)};if(a&&y.suspense||rv)return g().then(_=>()=>aC(_,y)).catch(_=>(b(_),()=>i?Ie(i,{error:_}):null));const w=lt(!1),x=lt(),S=lt(!!s);return s&&setTimeout(()=>{S.value=!1},s),o!=null&&setTimeout(()=>{if(!w.value&&!x.value){const _=new Error(`Async component timed out after ${o}ms.`);b(_),x.value=_}},o),g().then(()=>{w.value=!0,y.parent&&nv(y.parent.vnode)&&(y.parent.effect.dirty=!0,Ow(y.parent.update))}).catch(_=>{b(_),x.value=_}),()=>{if(w.value&&d)return aC(d,y);if(x.value&&i)return Ie(i,{error:x.value});if(n&&!S.value)return Ie(n)}}})}function aC(r,e){const{ref:n,props:i,children:s,ce:o}=e.vnode,a=Ie(r,i,s);return a.ref=n,a.ce=o,delete e.vnode.ce,a}const nv=r=>r.type.__isKeepAlive,hce={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(r,{slots:e}){const n=Ao(),i=n.ctx;if(!i.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const s=new Map,o=new Set;let a=null;const c=n.suspense,{renderer:{p:h,m:d,um:f,o:{createElement:p}}}=i,g=p("div");i.activate=(_,O,T,E,P)=>{const I=_.component;d(_,O,T,0,c),h(I.vnode,_,O,T,I,c,E,_.slotScopeIds,P),Vr(()=>{I.isDeactivated=!1,I.a&&Yf(I.a);const A=_.props&&_.props.onVnodeMounted;A&&Xs(A,I.parent,_)},c)},i.deactivate=_=>{const O=_.component;d(_,g,null,1,c),Vr(()=>{O.da&&Yf(O.da);const T=_.props&&_.props.onVnodeUnmounted;T&&Xs(T,O.parent,_),O.isDeactivated=!0},c)};function y(_){lC(_),f(_,n,c,!0)}function b(_){s.forEach((O,T)=>{const E=rT(O.type);E&&(!_||!_(E))&&w(T)})}function w(_){const O=s.get(_);!a||!_a(O,a)?y(O):a&&lC(a),s.delete(_),o.delete(_)}Qi(()=>[r.include,r.exclude],([_,O])=>{_&&b(T=>v0(_,T)),O&&b(T=>!v0(O,T))},{flush:"post",deep:!0});let x=null;const S=()=>{x!=null&&s.set(x,cC(n.subTree))};return Jn(S),kw(S),Tw(()=>{s.forEach(_=>{const{subTree:O,suspense:T}=n,E=cC(O);if(_.type===E.type&&_.key===E.key){lC(E);const P=E.component.da;P&&Vr(P,T);return}y(_)})}),()=>{if(x=null,!e.default)return null;const _=e.default(),O=_[0];if(_.length>1)return a=null,_;if(!Th(O)||!(O.shapeFlag&4)&&!(O.shapeFlag&128))return a=null,O;let T=cC(O);const E=T.type,P=rT(Ju(T)?T.type.__asyncResolved||{}:E),{include:I,exclude:A,max:D}=r;if(I&&(!P||!v0(I,P))||A&&P&&v0(A,P))return a=T,O;const M=T.key==null?E:T.key,$=s.get(M);return T.el&&(T=ll(T),O.shapeFlag&128&&(O.ssContent=T)),x=M,$?(T.el=$.el,T.component=$.component,T.transition&&hd(T,T.transition),T.shapeFlag|=512,o.delete(M),o.add(M)):(o.add(M),D&&o.size>parseInt(D,10)&&w(o.values().next().value)),T.shapeFlag|=256,a=T,x8(O.type)?O:T}}},uce=hce;function v0(r,e){return It(r)?r.some(n=>v0(n,e)):An(r)?r.split(",").includes(e):Wae(r)?r.test(e):!1}function P8(r,e){R8(r,"a",e)}function A8(r,e){R8(r,"da",e)}function R8(r,e,n=yr){const i=r.__wdc||(r.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return r()});if(Cw(e,i,n),n){let s=n.parent;for(;s&&s.parent;)nv(s.parent.vnode)&&dce(i,e,n,s),s=s.parent}}function dce(r,e,n,i){const s=Cw(e,r,i,!0);na(()=>{EE(i[e],s)},n)}function lC(r){r.shapeFlag&=-257,r.shapeFlag&=-513}function cC(r){return r.shapeFlag&128?r.ssContent:r}function Cw(r,e,n=yr,i=!1){if(n){const s=n[r]||(n[r]=[]),o=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;Uh();const c=fd(n),h=Mo(e,n,r,a);return c(),Fh(),h});return i?s.unshift(o):s.push(o),o}}const mc=r=>(e,n=yr)=>(!rv||r==="sp")&&Cw(r,(...i)=>e(...i),n),I8=mc("bm"),Jn=mc("m"),D8=mc("bu"),kw=mc("u"),Tw=mc("bum"),na=mc("um"),N8=mc("sp"),$8=mc("rtg"),V8=mc("rtc");function L8(r,e=yr){Cw("ec",r,e)}function kh(r,e,n,i){let s;const o=n&&n[i];if(It(r)||An(r)){s=new Array(r.length);for(let a=0,c=r.length;a<c;a++)s[a]=e(r[a],a,void 0,o&&o[a])}else if(typeof r=="number"){s=new Array(r);for(let a=0;a<r;a++)s[a]=e(a+1,a,void 0,o&&o[a])}else if(cn(r))if(r[Symbol.iterator])s=Array.from(r,(a,c)=>e(a,c,void 0,o&&o[c]));else{const a=Object.keys(r);s=new Array(a.length);for(let c=0,h=a.length;c<h;c++){const d=a[c];s[c]=e(r[d],d,c,o&&o[c])}}else s=[];return n&&(n[i]=s),s}function fce(r,e){for(let n=0;n<e.length;n++){const i=e[n];if(It(i))for(let s=0;s<i.length;s++)r[i[s].name]=i[s].fn;else i&&(r[i.name]=i.key?(...s)=>{const o=i.fn(...s);return o&&(o.key=i.key),o}:i.fn)}return r}function B8(r,e,n={},i,s){if(or.isCE||or.parent&&Ju(or.parent)&&or.parent.isCE)return e!=="default"&&(n.name=e),Ie("slot",n,i&&i());let o=r[e];o&&o._c&&(o._d=!1),ci();const a=o&&U8(o(n)),c=Wr(dn,{key:n.key||a&&a.key||`_${e}`},a||(i?i():[]),a&&r._===1?64:-2);return!s&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),o&&o._c&&(o._d=!0),c}function U8(r){return r.some(e=>Th(e)?!(e.type===zr||e.type===dn&&!U8(e.children)):!0)?r:null}function pce(r,e){const n={};for(const i in r)n[e&&/[A-Z]/.test(i)?`on:${i}`:R0(i)]=r[i];return n}const Gk=r=>r?hU(r)?Mw(r)||r.proxy:Gk(r.parent):null,I0=Cn(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Gk(r.parent),$root:r=>Gk(r.root),$emit:r=>r.emit,$options:r=>qE(r),$forceUpdate:r=>r.f||(r.f=()=>{r.effect.dirty=!0,Ow(r.update)}),$nextTick:r=>r.n||(r.n=Yp.bind(r.proxy)),$watch:r=>oce.bind(r)}),hC=(r,e)=>r!==nn&&!r.__isScriptSetup&&Ui(r,e),Yk={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:o,accessCache:a,type:c,appContext:h}=r;let d;if(e[0]!=="$"){const y=a[e];if(y!==void 0)switch(y){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(hC(i,e))return a[e]=1,i[e];if(s!==nn&&Ui(s,e))return a[e]=2,s[e];if((d=r.propsOptions[0])&&Ui(d,e))return a[e]=3,o[e];if(n!==nn&&Ui(n,e))return a[e]=4,n[e];jk&&(a[e]=0)}}const f=I0[e];let p,g;if(f)return e==="$attrs"&&eo(r.attrs,"get",""),f(r);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==nn&&Ui(n,e))return a[e]=4,n[e];if(g=h.config.globalProperties,Ui(g,e))return g[e]},set({_:r},e,n){const{data:i,setupState:s,ctx:o}=r;return hC(s,e)?(s[e]=n,!0):i!==nn&&Ui(i,e)?(i[e]=n,!0):Ui(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=n,!0)},has({_:{data:r,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:o}},a){let c;return!!n[a]||r!==nn&&Ui(r,a)||hC(e,a)||(c=o[0])&&Ui(c,a)||Ui(i,a)||Ui(I0,a)||Ui(s.config.globalProperties,a)},defineProperty(r,e,n){return n.get!=null?r._.accessCache[e]=0:Ui(n,"value")&&this.set(r,e,n.value,null),Reflect.defineProperty(r,e,n)}},mce=Cn({},Yk,{get(r,e){if(e!==Symbol.unscopables)return Yk.get(r,e,r)},has(r,e){return e[0]!=="_"&&!jae(e)}});function gce(){return null}function yce(){return null}function vce(r){}function bce(r){}function xce(){return null}function Oce(){}function wce(r,e){return null}function jE(){return z8().slots}function F8(){return z8().attrs}function z8(){const r=Ao();return r.setupContext||(r.setupContext=fU(r))}function oy(r){return It(r)?r.reduce((e,n)=>(e[n]=null,e),{}):r}function _ce(r,e){const n=oy(r);for(const i in e){if(i.startsWith("__skip"))continue;let s=n[i];s?It(s)||ti(s)?s=n[i]={type:s,default:e[i]}:s.default=e[i]:s===null&&(s=n[i]={default:e[i]}),s&&e[`__skip_${i}`]&&(s.skipFactory=!0)}return n}function Sce(r,e){return!r||!e?r||e:It(r)&&It(e)?r.concat(e):Cn({},oy(r),oy(e))}function Cce(r,e){const n={};for(const i in r)e.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>r[i]});return n}function Mx(r){const e=Ao();let n=r();return tT(),PE(n)&&(n=n.catch(i=>{throw fd(e),i})),[n,()=>fd(e)]}let jk=!0;function kce(r){const e=qE(r),n=r.proxy,i=r.ctx;jk=!1,e.beforeCreate&&II(e.beforeCreate,r,"bc");const{data:s,computed:o,methods:a,watch:c,provide:h,inject:d,created:f,beforeMount:p,mounted:g,beforeUpdate:y,updated:b,activated:w,deactivated:x,beforeDestroy:S,beforeUnmount:_,destroyed:O,unmounted:T,render:E,renderTracked:P,renderTriggered:I,errorCaptured:A,serverPrefetch:D,expose:M,inheritAttrs:$,components:L,directives:N,filters:V}=e;if(d&&Tce(d,i,null),a)for(const H in a){const K=a[H];ti(K)&&(i[H]=K.bind(n))}if(s){const H=s.call(n,n);cn(H)&&(r.data=Cd(H))}if(jk=!0,o)for(const H in o){const K=o[H],ie=ti(K)?K.bind(n,n):ti(K.get)?K.get.bind(n,n):Ys,he=!ti(K)&&ti(K.set)?K.set.bind(n):Ys,me=vn({get:ie,set:he});Object.defineProperty(i,H,{enumerable:!0,configurable:!0,get:()=>me.value,set:Pe=>me.value=Pe})}if(c)for(const H in c)X8(c[H],i,n,H);if(h){const H=ti(h)?h.call(n):h;Reflect.ownKeys(H).forEach(K=>{ay(K,H[K])})}f&&II(f,r,"c");function F(H,K){It(K)?K.forEach(ie=>H(ie.bind(n))):K&&H(K.bind(n))}if(F(I8,p),F(Jn,g),F(D8,y),F(kw,b),F(P8,w),F(A8,x),F(L8,A),F(V8,P),F($8,I),F(Tw,_),F(na,T),F(N8,D),It(M))if(M.length){const H=r.exposed||(r.exposed={});M.forEach(K=>{Object.defineProperty(H,K,{get:()=>n[K],set:ie=>n[K]=ie})})}else r.exposed||(r.exposed={});E&&r.render===Ys&&(r.render=E),$!=null&&(r.inheritAttrs=$),L&&(r.components=L),N&&(r.directives=N)}function Tce(r,e,n=Ys){It(r)&&(r=qk(r));for(const i in r){const s=r[i];let o;cn(s)?"default"in s?o=ep(s.from||i,s.default,!0):o=ep(s.from||i):o=ep(s),ur(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[i]=o}}function II(r,e,n){Mo(It(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,n)}function X8(r,e,n,i){const s=i.includes(".")?T8(n,i):()=>n[i];if(An(r)){const o=e[r];ti(o)&&Qi(s,o)}else if(ti(r))Qi(s,r.bind(n));else if(cn(r))if(It(r))r.forEach(o=>X8(o,e,n,i));else{const o=ti(r.handler)?r.handler.bind(n):e[r.handler];ti(o)&&Qi(s,o,r)}}function qE(r){const e=r.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=r.appContext,c=o.get(e);let h;return c?h=c:!s.length&&!n&&!i?h=e:(h={},s.length&&s.forEach(d=>hO(h,d,a,!0)),hO(h,e,a)),cn(e)&&o.set(e,h),h}function hO(r,e,n,i=!1){const{mixins:s,extends:o}=e;o&&hO(r,o,n,!0),s&&s.forEach(a=>hO(r,a,n,!0));for(const a in e)if(!(i&&a==="expose")){const c=Mce[a]||n&&n[a];r[a]=c?c(r[a],e[a]):e[a]}return r}const Mce={data:DI,props:NI,emits:NI,methods:b0,computed:b0,beforeCreate:bs,created:bs,beforeMount:bs,mounted:bs,beforeUpdate:bs,updated:bs,beforeDestroy:bs,beforeUnmount:bs,destroyed:bs,unmounted:bs,activated:bs,deactivated:bs,errorCaptured:bs,serverPrefetch:bs,components:b0,directives:b0,watch:Pce,provide:DI,inject:Ece};function DI(r,e){return e?r?function(){return Cn(ti(r)?r.call(this,this):r,ti(e)?e.call(this,this):e)}:e:r}function Ece(r,e){return b0(qk(r),qk(e))}function qk(r){if(It(r)){const e={};for(let n=0;n<r.length;n++)e[r[n]]=r[n];return e}return r}function bs(r,e){return r?[...new Set([].concat(r,e))]:e}function b0(r,e){return r?Cn(Object.create(null),r,e):e}function NI(r,e){return r?It(r)&&It(e)?[...new Set([...r,...e])]:Cn(Object.create(null),oy(r),oy(e??{})):e}function Pce(r,e){if(!r)return e;if(!e)return r;const n=Cn(Object.create(null),r);for(const i in e)n[i]=bs(r[i],e[i]);return n}function W8(){return{app:null,config:{isNativeTag:zae,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ace=0;function Rce(r,e){return function(i,s=null){ti(i)||(i=Cn({},i)),s!=null&&!cn(s)&&(s=null);const o=W8(),a=new WeakSet;let c=!1;const h=o.app={_uid:Ace++,_component:i,_props:s,_container:null,_context:o,_instance:null,version:gU,get config(){return o.config},set config(d){},use(d,...f){return a.has(d)||(d&&ti(d.install)?(a.add(d),d.install(h,...f)):ti(d)&&(a.add(d),d(h,...f))),h},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),h},component(d,f){return f?(o.components[d]=f,h):o.components[d]},directive(d,f){return f?(o.directives[d]=f,h):o.directives[d]},mount(d,f,p){if(!c){const g=Ie(i,s);return g.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,d):r(g,d,p),c=!0,h._container=d,d.__vue_app__=h,Mw(g.component)||g.component.proxy}},unmount(){c&&(r(null,h._container),delete h._container.__vue_app__)},provide(d,f){return o.provides[d]=f,h},runWithContext(d){const f=Jf;Jf=h;try{return d()}finally{Jf=f}}};return h}}let Jf=null;function ay(r,e){if(yr){let n=yr.provides;const i=yr.parent&&yr.parent.provides;i===n&&(n=yr.provides=Object.create(i)),n[r]=e}}function ep(r,e,n=!1){const i=yr||or;if(i||Jf){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Jf._context.provides;if(s&&r in s)return s[r];if(arguments.length>1)return n&&ti(e)?e.call(i&&i.proxy):e}}function Ice(){return!!(yr||or||Jf)}const Q8={},H8=()=>Object.create(Q8),G8=r=>Object.getPrototypeOf(r)===Q8;function Dce(r,e,n,i=!1){const s={},o=H8();r.propsDefaults=Object.create(null),Y8(r,e,s,o);for(const a in r.propsOptions[0])a in s||(s[a]=void 0);n?r.props=i?s:a8(s):r.type.props?r.props=s:r.props=o,r.attrs=o}function Nce(r,e,n,i){const{props:s,attrs:o,vnode:{patchFlag:a}}=r,c=Bi(s),[h]=r.propsOptions;let d=!1;if((i||a>0)&&!(a&16)){if(a&8){const f=r.vnode.dynamicProps;for(let p=0;p<f.length;p++){let g=f[p];if(ww(r.emitsOptions,g))continue;const y=e[g];if(h)if(Ui(o,g))y!==o[g]&&(o[g]=y,d=!0);else{const b=Cs(g);s[b]=Zk(h,c,b,y,r,!1)}else y!==o[g]&&(o[g]=y,d=!0)}}}else{Y8(r,e,s,o)&&(d=!0);let f;for(const p in c)(!e||!Ui(e,p)&&((f=_o(p))===p||!Ui(e,f)))&&(h?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=Zk(h,c,p,void 0,r,!0)):delete s[p]);if(o!==c)for(const p in o)(!e||!Ui(e,p))&&(delete o[p],d=!0)}d&&ql(r.attrs,"set","")}function Y8(r,e,n,i){const[s,o]=r.propsOptions;let a=!1,c;if(e)for(let h in e){if(Gf(h))continue;const d=e[h];let f;s&&Ui(s,f=Cs(h))?!o||!o.includes(f)?n[f]=d:(c||(c={}))[f]=d:ww(r.emitsOptions,h)||(!(h in i)||d!==i[h])&&(i[h]=d,a=!0)}if(o){const h=Bi(n),d=c||nn;for(let f=0;f<o.length;f++){const p=o[f];n[p]=Zk(s,h,p,d[p],r,!Ui(d,p))}}return a}function Zk(r,e,n,i,s,o){const a=r[n];if(a!=null){const c=Ui(a,"default");if(c&&i===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&ti(h)){const{propsDefaults:d}=s;if(n in d)i=d[n];else{const f=fd(s);i=d[n]=h.call(null,e),f()}}else i=h}a[0]&&(o&&!c?i=!1:a[1]&&(i===""||i===_o(n))&&(i=!0))}return i}function j8(r,e,n=!1){const i=e.propsCache,s=i.get(r);if(s)return s;const o=r.props,a={},c=[];let h=!1;if(!ti(r)){const f=p=>{h=!0;const[g,y]=j8(p,e,!0);Cn(a,g),y&&c.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(f),r.extends&&f(r.extends),r.mixins&&r.mixins.forEach(f)}if(!o&&!h)return cn(r)&&i.set(r,Qf),Qf;if(It(o))for(let f=0;f<o.length;f++){const p=Cs(o[f]);$I(p)&&(a[p]=nn)}else if(o)for(const f in o){const p=Cs(f);if($I(p)){const g=o[f],y=a[p]=It(g)||ti(g)?{type:g}:Cn({},g);if(y){const b=BI(Boolean,y.type),w=BI(String,y.type);y[0]=b>-1,y[1]=w<0||b<w,(b>-1||Ui(y,"default"))&&c.push(p)}}}const d=[a,c];return cn(r)&&i.set(r,d),d}function $I(r){return r[0]!=="$"&&!Gf(r)}function VI(r){return r===null?"null":typeof r=="function"?r.name||"":typeof r=="object"&&r.constructor&&r.constructor.name||""}function LI(r,e){return VI(r)===VI(e)}function BI(r,e){return It(e)?e.findIndex(n=>LI(n,r)):ti(e)&&LI(e,r)?0:-1}const q8=r=>r[0]==="_"||r==="$stable",ZE=r=>It(r)?r.map(wo):[wo(r)],$ce=(r,e,n)=>{if(e._n)return e;const i=et((...s)=>ZE(e(...s)),n);return i._c=!1,i},Z8=(r,e,n)=>{const i=r._ctx;for(const s in r){if(q8(s))continue;const o=r[s];if(ti(o))e[s]=$ce(s,o,i);else if(o!=null){const a=ZE(o);e[s]=()=>a}}},K8=(r,e)=>{const n=ZE(e);r.slots.default=()=>n},Vce=(r,e)=>{const n=r.slots=H8();if(r.vnode.shapeFlag&32){const i=e._;i?(Cn(n,e),XB(n,"_",i,!0)):Z8(e,n)}else e&&K8(r,e)},Lce=(r,e,n)=>{const{vnode:i,slots:s}=r;let o=!0,a=nn;if(i.shapeFlag&32){const c=e._;c?n&&c===1?o=!1:(Cn(s,e),!n&&c===1&&delete s._):(o=!e.$stable,Z8(e,s)),a=e}else e&&(K8(r,e),a={default:1});if(o)for(const c in s)!q8(c)&&a[c]==null&&delete s[c]};function uO(r,e,n,i,s=!1){if(It(r)){r.forEach((g,y)=>uO(g,e&&(It(e)?e[y]:e),n,i,s));return}if(Ju(i)&&!s)return;const o=i.shapeFlag&4?Mw(i.component)||i.component.proxy:i.el,a=s?null:o,{i:c,r:h}=r,d=e&&e.r,f=c.refs===nn?c.refs={}:c.refs,p=c.setupState;if(d!=null&&d!==h&&(An(d)?(f[d]=null,Ui(p,d)&&(p[d]=null)):ur(d)&&(d.value=null)),ti(h))Zl(h,c,12,[a,f]);else{const g=An(h),y=ur(h);if(g||y){const b=()=>{if(r.f){const w=g?Ui(p,h)?p[h]:f[h]:h.value;s?It(w)&&EE(w,o):It(w)?w.includes(o)||w.push(o):g?(f[h]=[o],Ui(p,h)&&(p[h]=f[h])):(h.value=[o],r.k&&(f[r.k]=h.value))}else g?(f[h]=a,Ui(p,h)&&(p[h]=a)):y&&(h.value=a,r.k&&(f[r.k]=a))};a?(b.id=-1,Vr(b,n)):b()}}}let Bc=!1;const Bce=r=>r.namespaceURI.includes("svg")&&r.tagName!=="foreignObject",Uce=r=>r.namespaceURI.includes("MathML"),N1=r=>{if(Bce(r))return"svg";if(Uce(r))return"mathml"},$1=r=>r.nodeType===8;function Fce(r){const{mt:e,p:n,o:{patchProp:i,createText:s,nextSibling:o,parentNode:a,remove:c,insert:h,createComment:d}}=r,f=(O,T)=>{if(!T.hasChildNodes()){n(null,O,T),cO(),T._vnode=O;return}Bc=!1,p(T.firstChild,O,null,null,null),cO(),T._vnode=O,Bc&&console.error("Hydration completed but contains mismatches.")},p=(O,T,E,P,I,A=!1)=>{A=A||!!T.dynamicChildren;const D=$1(O)&&O.data==="[",M=()=>w(O,T,E,P,I,D),{type:$,ref:L,shapeFlag:N,patchFlag:V}=T;let U=O.nodeType;T.el=O,V===-2&&(A=!1,T.dynamicChildren=null);let F=null;switch($){case ud:U!==3?T.children===""?(h(T.el=s(""),a(O),O),F=O):F=M():(O.data!==T.children&&(Bc=!0,O.data=T.children),F=o(O));break;case zr:_(O)?(F=o(O),S(T.el=O.content.firstChild,O,E)):U!==8||D?F=M():F=o(O);break;case ed:if(D&&(O=o(O),U=O.nodeType),U===1||U===3){F=O;const H=!T.children.length;for(let K=0;K<T.staticCount;K++)H&&(T.children+=F.nodeType===1?F.outerHTML:F.data),K===T.staticCount-1&&(T.anchor=F),F=o(F);return D?o(F):F}else M();break;case dn:D?F=b(O,T,E,P,I,A):F=M();break;default:if(N&1)(U!==1||T.type.toLowerCase()!==O.tagName.toLowerCase())&&!_(O)?F=M():F=g(O,T,E,P,I,A);else if(N&6){T.slotScopeIds=I;const H=a(O);if(D?F=x(O):$1(O)&&O.data==="teleport start"?F=x(O,O.data,"teleport end"):F=o(O),e(T,H,null,E,P,N1(H),A),Ju(T)){let K;D?(K=Ie(dn),K.anchor=F?F.previousSibling:H.lastChild):K=O.nodeType===3?yn(""):Ie("div"),K.el=O,T.component.subTree=K}}else N&64?U!==8?F=M():F=T.type.hydrate(O,T,E,P,I,A,r,y):N&128&&(F=T.type.hydrate(O,T,E,P,N1(a(O)),I,A,r,p))}return L!=null&&uO(L,null,P,T),F},g=(O,T,E,P,I,A)=>{A=A||!!T.dynamicChildren;const{type:D,props:M,patchFlag:$,shapeFlag:L,dirs:N,transition:V}=T,U=D==="input"||D==="option";if(U||$!==-1){N&&Ka(T,null,E,"created");let F=!1;if(_(O)){F=tU(P,V)&&E&&E.vnode.props&&E.vnode.props.appear;const K=O.content.firstChild;F&&V.beforeEnter(K),S(K,O,E),T.el=O=K}if(L&16&&!(M&&(M.innerHTML||M.textContent))){let K=y(O.firstChild,T,O,E,P,I,A);for(;K;){Bc=!0;const ie=K;K=K.nextSibling,c(ie)}}else L&8&&O.textContent!==T.children&&(Bc=!0,O.textContent=T.children);if(M)if(U||!A||$&48)for(const K in M)(U&&(K.endsWith("value")||K==="indeterminate")||Jy(K)&&!Gf(K)||K[0]===".")&&i(O,K,null,M[K],void 0,void 0,E);else M.onClick&&i(O,"onClick",null,M.onClick,void 0,void 0,E);let H;(H=M&&M.onVnodeBeforeMount)&&Xs(H,E,T),N&&Ka(T,null,E,"beforeMount"),((H=M&&M.onVnodeMounted)||N||F)&&w8(()=>{H&&Xs(H,E,T),F&&V.enter(O),N&&Ka(T,null,E,"mounted")},P)}return O.nextSibling},y=(O,T,E,P,I,A,D)=>{D=D||!!T.dynamicChildren;const M=T.children,$=M.length;for(let L=0;L<$;L++){const N=D?M[L]:M[L]=wo(M[L]);if(O)O=p(O,N,P,I,A,D);else{if(N.type===ud&&!N.children)continue;Bc=!0,n(null,N,E,null,P,I,N1(E),A)}}return O},b=(O,T,E,P,I,A)=>{const{slotScopeIds:D}=T;D&&(I=I?I.concat(D):D);const M=a(O),$=y(o(O),T,M,E,P,I,A);return $&&$1($)&&$.data==="]"?o(T.anchor=$):(Bc=!0,h(T.anchor=d("]"),M,$),$)},w=(O,T,E,P,I,A)=>{if(Bc=!0,T.el=null,A){const $=x(O);for(;;){const L=o(O);if(L&&L!==$)c(L);else break}}const D=o(O),M=a(O);return c(O),n(null,T,M,D,E,P,N1(M),I),D},x=(O,T="[",E="]")=>{let P=0;for(;O;)if(O=o(O),O&&$1(O)&&(O.data===T&&P++,O.data===E)){if(P===0)return o(O);P--}return O},S=(O,T,E)=>{const P=T.parentNode;P&&P.replaceChild(O,T);let I=E;for(;I;)I.vnode.el===T&&(I.vnode.el=I.subTree.el=O),I=I.parent},_=O=>O.nodeType===1&&O.tagName.toLowerCase()==="template";return[f,p]}const Vr=w8;function KE(r){return eU(r)}function J8(r){return eU(r,Fce)}function eU(r,e){const n=WB();n.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:a,createText:c,createComment:h,setText:d,setElementText:f,parentNode:p,nextSibling:g,setScopeId:y=Ys,insertStaticContent:b}=r,w=(Q,Z,le,pe=null,be=null,Ee=null,ee=void 0,Y=null,de=!!Z.dynamicChildren)=>{if(Q===Z)return;Q&&!_a(Q,Z)&&(pe=J(Q),Pe(Q,be,Ee,!0),Q=null),Z.patchFlag===-2&&(de=!1,Z.dynamicChildren=null);const{type:fe,ref:we,shapeFlag:Me}=Z;switch(fe){case ud:x(Q,Z,le,pe);break;case zr:S(Q,Z,le,pe);break;case ed:Q==null&&_(Z,le,pe,ee);break;case dn:L(Q,Z,le,pe,be,Ee,ee,Y,de);break;default:Me&1?E(Q,Z,le,pe,be,Ee,ee,Y,de):Me&6?N(Q,Z,le,pe,be,Ee,ee,Y,de):(Me&64||Me&128)&&fe.process(Q,Z,le,pe,be,Ee,ee,Y,de,X)}we!=null&&be&&uO(we,Q&&Q.ref,Ee,Z||Q,!Z)},x=(Q,Z,le,pe)=>{if(Q==null)i(Z.el=c(Z.children),le,pe);else{const be=Z.el=Q.el;Z.children!==Q.children&&d(be,Z.children)}},S=(Q,Z,le,pe)=>{Q==null?i(Z.el=h(Z.children||""),le,pe):Z.el=Q.el},_=(Q,Z,le,pe)=>{[Q.el,Q.anchor]=b(Q.children,Z,le,pe,Q.el,Q.anchor)},O=({el:Q,anchor:Z},le,pe)=>{let be;for(;Q&&Q!==Z;)be=g(Q),i(Q,le,pe),Q=be;i(Z,le,pe)},T=({el:Q,anchor:Z})=>{let le;for(;Q&&Q!==Z;)le=g(Q),s(Q),Q=le;s(Z)},E=(Q,Z,le,pe,be,Ee,ee,Y,de)=>{Z.type==="svg"?ee="svg":Z.type==="math"&&(ee="mathml"),Q==null?P(Z,le,pe,be,Ee,ee,Y,de):D(Q,Z,be,Ee,ee,Y,de)},P=(Q,Z,le,pe,be,Ee,ee,Y)=>{let de,fe;const{props:we,shapeFlag:Me,transition:Qe,dirs:Le}=Q;if(de=Q.el=a(Q.type,Ee,we&&we.is,we),Me&8?f(de,Q.children):Me&16&&A(Q.children,de,null,pe,be,uC(Q,Ee),ee,Y),Le&&Ka(Q,null,pe,"created"),I(de,Q,Q.scopeId,ee,pe),we){for(const ot in we)ot!=="value"&&!Gf(ot)&&o(de,ot,null,we[ot],Ee,Q.children,pe,be,ke);"value"in we&&o(de,"value",null,we.value,Ee),(fe=we.onVnodeBeforeMount)&&Xs(fe,pe,Q)}Le&&Ka(Q,null,pe,"beforeMount");const ze=tU(be,Qe);ze&&Qe.beforeEnter(de),i(de,Z,le),((fe=we&&we.onVnodeMounted)||ze||Le)&&Vr(()=>{fe&&Xs(fe,pe,Q),ze&&Qe.enter(de),Le&&Ka(Q,null,pe,"mounted")},be)},I=(Q,Z,le,pe,be)=>{if(le&&y(Q,le),pe)for(let Ee=0;Ee<pe.length;Ee++)y(Q,pe[Ee]);if(be){let Ee=be.subTree;if(Z===Ee){const ee=be.vnode;I(Q,ee,ee.scopeId,ee.slotScopeIds,be.parent)}}},A=(Q,Z,le,pe,be,Ee,ee,Y,de=0)=>{for(let fe=de;fe<Q.length;fe++){const we=Q[fe]=Y?sh(Q[fe]):wo(Q[fe]);w(null,we,Z,le,pe,be,Ee,ee,Y)}},D=(Q,Z,le,pe,be,Ee,ee)=>{const Y=Z.el=Q.el;let{patchFlag:de,dynamicChildren:fe,dirs:we}=Z;de|=Q.patchFlag&16;const Me=Q.props||nn,Qe=Z.props||nn;let Le;if(le&&uu(le,!1),(Le=Qe.onVnodeBeforeUpdate)&&Xs(Le,le,Z,Q),we&&Ka(Z,Q,le,"beforeUpdate"),le&&uu(le,!0),fe?M(Q.dynamicChildren,fe,Y,le,pe,uC(Z,be),Ee):ee||K(Q,Z,Y,null,le,pe,uC(Z,be),Ee,!1),de>0){if(de&16)$(Y,Z,Me,Qe,le,pe,be);else if(de&2&&Me.class!==Qe.class&&o(Y,"class",null,Qe.class,be),de&4&&o(Y,"style",Me.style,Qe.style,be),de&8){const ze=Z.dynamicProps;for(let ot=0;ot<ze.length;ot++){const Ye=ze[ot],st=Me[Ye],Mt=Qe[Ye];(Mt!==st||Ye==="value")&&o(Y,Ye,st,Mt,be,Q.children,le,pe,ke)}}de&1&&Q.children!==Z.children&&f(Y,Z.children)}else!ee&&fe==null&&$(Y,Z,Me,Qe,le,pe,be);((Le=Qe.onVnodeUpdated)||we)&&Vr(()=>{Le&&Xs(Le,le,Z,Q),we&&Ka(Z,Q,le,"updated")},pe)},M=(Q,Z,le,pe,be,Ee,ee)=>{for(let Y=0;Y<Z.length;Y++){const de=Q[Y],fe=Z[Y],we=de.el&&(de.type===dn||!_a(de,fe)||de.shapeFlag&70)?p(de.el):le;w(de,fe,we,null,pe,be,Ee,ee,!0)}},$=(Q,Z,le,pe,be,Ee,ee)=>{if(le!==pe){if(le!==nn)for(const Y in le)!Gf(Y)&&!(Y in pe)&&o(Q,Y,le[Y],null,ee,Z.children,be,Ee,ke);for(const Y in pe){if(Gf(Y))continue;const de=pe[Y],fe=le[Y];de!==fe&&Y!=="value"&&o(Q,Y,fe,de,ee,Z.children,be,Ee,ke)}"value"in pe&&o(Q,"value",le.value,pe.value,ee)}},L=(Q,Z,le,pe,be,Ee,ee,Y,de)=>{const fe=Z.el=Q?Q.el:c(""),we=Z.anchor=Q?Q.anchor:c("");let{patchFlag:Me,dynamicChildren:Qe,slotScopeIds:Le}=Z;Le&&(Y=Y?Y.concat(Le):Le),Q==null?(i(fe,le,pe),i(we,le,pe),A(Z.children||[],le,we,be,Ee,ee,Y,de)):Me>0&&Me&64&&Qe&&Q.dynamicChildren?(M(Q.dynamicChildren,Qe,le,be,Ee,ee,Y),(Z.key!=null||be&&Z===be.subTree)&&JE(Q,Z,!0)):K(Q,Z,le,we,be,Ee,ee,Y,de)},N=(Q,Z,le,pe,be,Ee,ee,Y,de)=>{Z.slotScopeIds=Y,Q==null?Z.shapeFlag&512?be.ctx.activate(Z,le,pe,ee,de):V(Z,le,pe,be,Ee,ee,de):U(Q,Z,de)},V=(Q,Z,le,pe,be,Ee,ee)=>{const Y=Q.component=cU(Q,pe,be);if(nv(Q)&&(Y.ctx.renderer=X),uU(Y),Y.asyncDep){if(be&&be.registerDep(Y,F),!Q.el){const de=Y.subTree=Ie(zr);S(null,de,Z,le)}}else F(Y,Q,Z,le,be,Ee,ee)},U=(Q,Z,le)=>{const pe=Z.component=Q.component;if(Zle(Q,Z,le))if(pe.asyncDep&&!pe.asyncResolved){H(pe,Z,le);return}else pe.next=Z,Wle(pe.update),pe.effect.dirty=!0,pe.update();else Z.el=Q.el,pe.vnode=Z},F=(Q,Z,le,pe,be,Ee,ee)=>{const Y=()=>{if(Q.isMounted){let{next:we,bu:Me,u:Qe,parent:Le,vnode:ze}=Q;{const Et=iU(Q);if(Et){we&&(we.el=ze.el,H(Q,we,ee)),Et.asyncDep.then(()=>{Q.isUnmounted||Y()});return}}let ot=we,Ye;uu(Q,!1),we?(we.el=ze.el,H(Q,we,ee)):we=ze,Me&&Yf(Me),(Ye=we.props&&we.props.onVnodeBeforeUpdate)&&Xs(Ye,Le,we,ze),uu(Q,!0);const st=Tx(Q),Mt=Q.subTree;Q.subTree=st,w(Mt,st,p(Mt.el),J(Mt),Q,be,Ee),we.el=st.el,ot===null&&XE(Q,st.el),Qe&&Vr(Qe,be),(Ye=we.props&&we.props.onVnodeUpdated)&&Vr(()=>Xs(Ye,Le,we,ze),be)}else{let we;const{el:Me,props:Qe}=Z,{bm:Le,m:ze,parent:ot}=Q,Ye=Ju(Z);if(uu(Q,!1),Le&&Yf(Le),!Ye&&(we=Qe&&Qe.onVnodeBeforeMount)&&Xs(we,ot,Z),uu(Q,!0),Me&&se){const st=()=>{Q.subTree=Tx(Q),se(Me,Q.subTree,Q,be,null)};Ye?Z.type.__asyncLoader().then(()=>!Q.isUnmounted&&st()):st()}else{const st=Q.subTree=Tx(Q);w(null,st,le,pe,Q,be,Ee),Z.el=st.el}if(ze&&Vr(ze,be),!Ye&&(we=Qe&&Qe.onVnodeMounted)){const st=Z;Vr(()=>Xs(we,ot,st),be)}(Z.shapeFlag&256||ot&&Ju(ot.vnode)&&ot.vnode.shapeFlag&256)&&Q.a&&Vr(Q.a,be),Q.isMounted=!0,Z=le=pe=null}},de=Q.effect=new gp(Y,Ys,()=>Ow(fe),Q.scope),fe=Q.update=()=>{de.dirty&&de.run()};fe.id=Q.uid,uu(Q,!0),fe()},H=(Q,Z,le)=>{Z.component=Q;const pe=Q.vnode.props;Q.vnode=Z,Q.next=null,Nce(Q,Z.props,pe,le),Lce(Q,Z.children,le),Uh(),MI(Q),Fh()},K=(Q,Z,le,pe,be,Ee,ee,Y,de=!1)=>{const fe=Q&&Q.children,we=Q?Q.shapeFlag:0,Me=Z.children,{patchFlag:Qe,shapeFlag:Le}=Z;if(Qe>0){if(Qe&128){he(fe,Me,le,pe,be,Ee,ee,Y,de);return}else if(Qe&256){ie(fe,Me,le,pe,be,Ee,ee,Y,de);return}}Le&8?(we&16&&ke(fe,be,Ee),Me!==fe&&f(le,Me)):we&16?Le&16?he(fe,Me,le,pe,be,Ee,ee,Y,de):ke(fe,be,Ee,!0):(we&8&&f(le,""),Le&16&&A(Me,le,pe,be,Ee,ee,Y,de))},ie=(Q,Z,le,pe,be,Ee,ee,Y,de)=>{Q=Q||Qf,Z=Z||Qf;const fe=Q.length,we=Z.length,Me=Math.min(fe,we);let Qe;for(Qe=0;Qe<Me;Qe++){const Le=Z[Qe]=de?sh(Z[Qe]):wo(Z[Qe]);w(Q[Qe],Le,le,null,be,Ee,ee,Y,de)}fe>we?ke(Q,be,Ee,!0,!1,Me):A(Z,le,pe,be,Ee,ee,Y,de,Me)},he=(Q,Z,le,pe,be,Ee,ee,Y,de)=>{let fe=0;const we=Z.length;let Me=Q.length-1,Qe=we-1;for(;fe<=Me&&fe<=Qe;){const Le=Q[fe],ze=Z[fe]=de?sh(Z[fe]):wo(Z[fe]);if(_a(Le,ze))w(Le,ze,le,null,be,Ee,ee,Y,de);else break;fe++}for(;fe<=Me&&fe<=Qe;){const Le=Q[Me],ze=Z[Qe]=de?sh(Z[Qe]):wo(Z[Qe]);if(_a(Le,ze))w(Le,ze,le,null,be,Ee,ee,Y,de);else break;Me--,Qe--}if(fe>Me){if(fe<=Qe){const Le=Qe+1,ze=Le<we?Z[Le].el:pe;for(;fe<=Qe;)w(null,Z[fe]=de?sh(Z[fe]):wo(Z[fe]),le,ze,be,Ee,ee,Y,de),fe++}}else if(fe>Qe)for(;fe<=Me;)Pe(Q[fe],be,Ee,!0),fe++;else{const Le=fe,ze=fe,ot=new Map;for(fe=ze;fe<=Qe;fe++){const Ce=Z[fe]=de?sh(Z[fe]):wo(Z[fe]);Ce.key!=null&&ot.set(Ce.key,fe)}let Ye,st=0;const Mt=Qe-ze+1;let Et=!1,ft=0;const Wt=new Array(Mt);for(fe=0;fe<Mt;fe++)Wt[fe]=0;for(fe=Le;fe<=Me;fe++){const Ce=Q[fe];if(st>=Mt){Pe(Ce,be,Ee,!0);continue}let Be;if(Ce.key!=null)Be=ot.get(Ce.key);else for(Ye=ze;Ye<=Qe;Ye++)if(Wt[Ye-ze]===0&&_a(Ce,Z[Ye])){Be=Ye;break}Be===void 0?Pe(Ce,be,Ee,!0):(Wt[Be-ze]=fe+1,Be>=ft?ft=Be:Et=!0,w(Ce,Z[Be],le,null,be,Ee,ee,Y,de),st++)}const hi=Et?zce(Wt):Qf;for(Ye=hi.length-1,fe=Mt-1;fe>=0;fe--){const Ce=ze+fe,Be=Z[Ce],ge=Ce+1<we?Z[Ce+1].el:pe;Wt[fe]===0?w(null,Be,le,ge,be,Ee,ee,Y,de):Et&&(Ye<0||fe!==hi[Ye]?me(Be,le,ge,2):Ye--)}}},me=(Q,Z,le,pe,be=null)=>{const{el:Ee,type:ee,transition:Y,children:de,shapeFlag:fe}=Q;if(fe&6){me(Q.component.subTree,Z,le,pe);return}if(fe&128){Q.suspense.move(Z,le,pe);return}if(fe&64){ee.move(Q,Z,le,X);return}if(ee===dn){i(Ee,Z,le);for(let Me=0;Me<de.length;Me++)me(de[Me],Z,le,pe);i(Q.anchor,Z,le);return}if(ee===ed){O(Q,Z,le);return}if(pe!==2&&fe&1&&Y)if(pe===0)Y.beforeEnter(Ee),i(Ee,Z,le),Vr(()=>Y.enter(Ee),be);else{const{leave:Me,delayLeave:Qe,afterLeave:Le}=Y,ze=()=>i(Ee,Z,le),ot=()=>{Me(Ee,()=>{ze(),Le&&Le()})};Qe?Qe(Ee,ze,ot):ot()}else i(Ee,Z,le)},Pe=(Q,Z,le,pe=!1,be=!1)=>{const{type:Ee,props:ee,ref:Y,children:de,dynamicChildren:fe,shapeFlag:we,patchFlag:Me,dirs:Qe}=Q;if(Y!=null&&uO(Y,null,le,Q,!0),we&256){Z.ctx.deactivate(Q);return}const Le=we&1&&Qe,ze=!Ju(Q);let ot;if(ze&&(ot=ee&&ee.onVnodeBeforeUnmount)&&Xs(ot,Z,Q),we&6)Se(Q.component,le,pe);else{if(we&128){Q.suspense.unmount(le,pe);return}Le&&Ka(Q,null,Z,"beforeUnmount"),we&64?Q.type.remove(Q,Z,le,be,X,pe):fe&&(Ee!==dn||Me>0&&Me&64)?ke(fe,Z,le,!1,!0):(Ee===dn&&Me&384||!be&&we&16)&&ke(de,Z,le),pe&&_e(Q)}(ze&&(ot=ee&&ee.onVnodeUnmounted)||Le)&&Vr(()=>{ot&&Xs(ot,Z,Q),Le&&Ka(Q,null,Z,"unmounted")},le)},_e=Q=>{const{type:Z,el:le,anchor:pe,transition:be}=Q;if(Z===dn){ue(le,pe);return}if(Z===ed){T(Q);return}const Ee=()=>{s(le),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(Q.shapeFlag&1&&be&&!be.persisted){const{leave:ee,delayLeave:Y}=be,de=()=>ee(le,Ee);Y?Y(Q.el,Ee,de):de()}else Ee()},ue=(Q,Z)=>{let le;for(;Q!==Z;)le=g(Q),s(Q),Q=le;s(Z)},Se=(Q,Z,le)=>{const{bum:pe,scope:be,update:Ee,subTree:ee,um:Y}=Q;pe&&Yf(pe),be.stop(),Ee&&(Ee.active=!1,Pe(ee,Q,Z,le)),Y&&Vr(Y,Z),Vr(()=>{Q.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},ke=(Q,Z,le,pe=!1,be=!1,Ee=0)=>{for(let ee=Ee;ee<Q.length;ee++)Pe(Q[ee],Z,le,pe,be)},J=Q=>Q.shapeFlag&6?J(Q.component.subTree):Q.shapeFlag&128?Q.suspense.next():g(Q.anchor||Q.el);let q=!1;const z=(Q,Z,le)=>{Q==null?Z._vnode&&Pe(Z._vnode,null,null,!0):w(Z._vnode||null,Q,Z,null,null,null,le),q||(q=!0,MI(),cO(),q=!1),Z._vnode=Q},X={p:w,um:Pe,m:me,r:_e,mt:V,mc:A,pc:K,pbc:M,n:J,o:r};let te,se;return e&&([te,se]=e(X)),{render:z,hydrate:te,createApp:Rce(z,te)}}function uC({type:r,props:e},n){return n==="svg"&&r==="foreignObject"||n==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function uu({effect:r,update:e},n){r.allowRecurse=e.allowRecurse=n}function tU(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function JE(r,e,n=!1){const i=r.children,s=e.children;if(It(i)&&It(s))for(let o=0;o<i.length;o++){const a=i[o];let c=s[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[o]=sh(s[o]),c.el=a.el),n||JE(a,c)),c.type===ud&&(c.el=a.el)}}function zce(r){const e=r.slice(),n=[0];let i,s,o,a,c;const h=r.length;for(i=0;i<h;i++){const d=r[i];if(d!==0){if(s=n[n.length-1],r[s]<d){e[i]=s,n.push(i);continue}for(o=0,a=n.length-1;o<a;)c=o+a>>1,r[n[c]]<d?o=c+1:a=c;d<r[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=e[a];return n}function iU(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:iU(e)}const Xce=r=>r.__isTeleport,D0=r=>r&&(r.disabled||r.disabled===""),UI=r=>typeof SVGElement<"u"&&r instanceof SVGElement,FI=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,Kk=(r,e)=>{const n=r&&r.to;return An(n)?e?e(n):null:n},Wce={name:"Teleport",__isTeleport:!0,process(r,e,n,i,s,o,a,c,h,d){const{mc:f,pc:p,pbc:g,o:{insert:y,querySelector:b,createText:w,createComment:x}}=d,S=D0(e.props);let{shapeFlag:_,children:O,dynamicChildren:T}=e;if(r==null){const E=e.el=w(""),P=e.anchor=w("");y(E,n,i),y(P,n,i);const I=e.target=Kk(e.props,b),A=e.targetAnchor=w("");I&&(y(A,I),a==="svg"||UI(I)?a="svg":(a==="mathml"||FI(I))&&(a="mathml"));const D=(M,$)=>{_&16&&f(O,M,$,s,o,a,c,h)};S?D(n,P):I&&D(I,A)}else{e.el=r.el;const E=e.anchor=r.anchor,P=e.target=r.target,I=e.targetAnchor=r.targetAnchor,A=D0(r.props),D=A?n:P,M=A?E:I;if(a==="svg"||UI(P)?a="svg":(a==="mathml"||FI(P))&&(a="mathml"),T?(g(r.dynamicChildren,T,D,s,o,a,c),JE(r,e,!0)):h||p(r,e,D,M,s,o,a,c,!1),S)A?e.props&&r.props&&e.props.to!==r.props.to&&(e.props.to=r.props.to):V1(e,n,E,d,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const $=e.target=Kk(e.props,b);$&&V1(e,$,null,d,0)}else A&&V1(e,P,I,d,1)}nU(e)},remove(r,e,n,i,{um:s,o:{remove:o}},a){const{shapeFlag:c,children:h,anchor:d,targetAnchor:f,target:p,props:g}=r;if(p&&o(f),a&&o(d),c&16){const y=a||!D0(g);for(let b=0;b<h.length;b++){const w=h[b];s(w,e,n,y,!!w.dynamicChildren)}}},move:V1,hydrate:Qce};function V1(r,e,n,{o:{insert:i},m:s},o=2){o===0&&i(r.targetAnchor,e,n);const{el:a,anchor:c,shapeFlag:h,children:d,props:f}=r,p=o===2;if(p&&i(a,e,n),(!p||D0(f))&&h&16)for(let g=0;g<d.length;g++)s(d[g],e,n,2);p&&i(c,e,n)}function Qce(r,e,n,i,s,o,{o:{nextSibling:a,parentNode:c,querySelector:h}},d){const f=e.target=Kk(e.props,h);if(f){const p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(D0(e.props))e.anchor=d(a(r),e,c(r),n,i,s,o),e.targetAnchor=p;else{e.anchor=a(r);let g=p;for(;g;)if(g=a(g),g&&g.nodeType===8&&g.data==="teleport anchor"){e.targetAnchor=g,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}d(p,e,f,n,i,s,o)}nU(e)}return e.anchor&&a(e.anchor)}const Hce=Wce;function nU(r){const e=r.ctx;if(e&&e.ut){let n=r.children[0].el;for(;n&&n!==r.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const dn=Symbol.for("v-fgt"),ud=Symbol.for("v-txt"),zr=Symbol.for("v-cmt"),ed=Symbol.for("v-stc"),N0=[];let js=null;function ci(r=!1){N0.push(js=r?null:[])}function rU(){N0.pop(),js=N0[N0.length-1]||null}let dd=1;function Jk(r){dd+=r}function sU(r){return r.dynamicChildren=dd>0?js||Qf:null,rU(),dd>0&&js&&js.push(r),r}function ln(r,e,n,i,s,o){return sU(Xt(r,e,n,i,s,o,!0))}function Wr(r,e,n,i,s){return sU(Ie(r,e,n,i,s,!0))}function Th(r){return r?r.__v_isVNode===!0:!1}function _a(r,e){return r.type===e.type&&r.key===e.key}function Gce(r){}const oU=({key:r})=>r??null,Ex=({ref:r,ref_key:e,ref_for:n})=>(typeof r=="number"&&(r=""+r),r!=null?An(r)||ur(r)||ti(r)?{i:or,r,k:e,f:!!n}:r:null);function Xt(r,e=null,n=null,i=0,s=null,o=r===dn?0:1,a=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&oU(e),ref:e&&Ex(e),scopeId:_w,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:or};return c?(tP(h,n),o&128&&r.normalize(h)):n&&(h.shapeFlag|=An(n)?8:16),dd>0&&!a&&js&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&js.push(h),h}const Ie=Yce;function Yce(r,e=null,n=null,i=0,s=null,o=!1){if((!r||r===b8)&&(r=zr),Th(r)){const c=ll(r,e,!0);return n&&tP(c,n),dd>0&&!o&&js&&(c.shapeFlag&6?js[js.indexOf(r)]=c:js.push(c)),c.patchFlag|=-2,c}if(ihe(r)&&(r=r.__vccOpts),e){e=aU(e);let{class:c,style:h}=e;c&&!An(c)&&(e.class=Gp(c)),cn(h)&&(VE(h)&&!It(h)&&(h=Cn({},h)),e.style=Bh(h))}const a=An(r)?1:x8(r)?128:Xce(r)?64:cn(r)?4:ti(r)?2:0;return Xt(r,e,n,i,s,a,o,!0)}function aU(r){return r?VE(r)||G8(r)?Cn({},r):r:null}function ll(r,e,n=!1,i=!1){const{props:s,ref:o,patchFlag:a,children:c,transition:h}=r,d=e?lU(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:r.type,props:d,key:d&&oU(d),ref:e&&e.ref?n&&o?It(o)?o.concat(Ex(e)):[o,Ex(e)]:Ex(e):o,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:c,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==dn?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:h,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&ll(r.ssContent),ssFallback:r.ssFallback&&ll(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return h&&i&&(f.transition=h.clone(f)),f}function yn(r=" ",e=0){return Ie(ud,null,r,e)}function jce(r,e){const n=Ie(ed,null,r);return n.staticCount=e,n}function eP(r="",e=!1){return e?(ci(),Wr(zr,null,r)):Ie(zr,null,r)}function wo(r){return r==null||typeof r=="boolean"?Ie(zr):It(r)?Ie(dn,null,r.slice()):typeof r=="object"?sh(r):Ie(ud,null,String(r))}function sh(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:ll(r)}function tP(r,e){let n=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(It(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),tP(r,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!G8(e)?e._ctx=or:s===3&&or&&(or.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else ti(e)?(e={default:e,_ctx:or},n=32):(e=String(e),i&64?(n=16,e=[yn(e)]):n=8);r.children=e,r.shapeFlag|=n}function lU(...r){const e={};for(let n=0;n<r.length;n++){const i=r[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Gp([e.class,i.class]));else if(s==="style")e.style=Bh([e.style,i.style]);else if(Jy(s)){const o=e[s],a=i[s];a&&o!==a&&!(It(o)&&o.includes(a))&&(e[s]=o?[].concat(o,a):a)}else s!==""&&(e[s]=i[s])}return e}function Xs(r,e,n,i=null){Mo(r,e,7,[n,i])}const qce=W8();let Zce=0;function cU(r,e,n){const i=r.type,s=(e?e.appContext:r.appContext)||qce,o={uid:Zce++,vnode:r,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new RE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:j8(i,s),emitsOptions:g8(i,s),emit:null,emitted:null,propsDefaults:nn,inheritAttrs:i.inheritAttrs,ctx:nn,data:nn,props:nn,attrs:nn,slots:nn,refs:nn,setupState:nn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Hle.bind(null,o),r.ce&&r.ce(o),o}let yr=null;const Ao=()=>yr||or;let dO,eT;{const r=WB(),e=(n,i)=>{let s;return(s=r[n])||(s=r[n]=[]),s.push(i),o=>{s.length>1?s.forEach(a=>a(o)):s[0](o)}};dO=e("__VUE_INSTANCE_SETTERS__",n=>yr=n),eT=e("__VUE_SSR_SETTERS__",n=>rv=n)}const fd=r=>{const e=yr;return dO(r),r.scope.on(),()=>{r.scope.off(),dO(e)}},tT=()=>{yr&&yr.scope.off(),dO(null)};function hU(r){return r.vnode.shapeFlag&4}let rv=!1;function uU(r,e=!1){e&&eT(e);const{props:n,children:i}=r.vnode,s=hU(r);Dce(r,n,s,e),Vce(r,i);const o=s?Kce(r,e):void 0;return e&&eT(!1),o}function Kce(r,e){const n=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,Yk);const{setup:i}=n;if(i){const s=r.setupContext=i.length>1?fU(r):null,o=fd(r);Uh();const a=Zl(i,r,0,[r.props,s]);if(Fh(),o(),PE(a)){if(a.then(tT,tT),e)return a.then(c=>{iT(r,c,e)}).catch(c=>{kd(c,r,0)});r.asyncDep=a}else iT(r,a,e)}else dU(r,e)}function iT(r,e,n){ti(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:cn(e)&&(r.setupState=UE(e)),dU(r,n)}let fO,nT;function Jce(r){fO=r,nT=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,mce))}}const ehe=()=>!fO;function dU(r,e,n){const i=r.type;if(!r.render){if(!e&&fO&&!i.render){const s=i.template||qE(r).template;if(s){const{isCustomElement:o,compilerOptions:a}=r.appContext.config,{delimiters:c,compilerOptions:h}=i,d=Cn(Cn({isCustomElement:o,delimiters:c},a),h);i.render=fO(s,d)}}r.render=i.render||Ys,nT&&nT(r)}{const s=fd(r);Uh();try{kce(r)}finally{Fh(),s()}}}const the={get(r,e){return eo(r,"get",""),r[e]}};function fU(r){const e=n=>{r.exposed=n||{}};return{attrs:new Proxy(r.attrs,the),slots:r.slots,emit:r.emit,expose:e}}function Mw(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(UE(l8(r.exposed)),{get(e,n){if(n in e)return e[n];if(n in I0)return I0[n](r)},has(e,n){return n in e||n in I0}}))}function rT(r,e=!0){return ti(r)?r.displayName||r.name:r.name||e&&r.__name}function ihe(r){return ti(r)&&"__vccOpts"in r}const vn=(r,e)=>Mle(r,e,rv);function pU(r,e,n=nn){const i=Ao(),s=Cs(e),o=_o(e),a=FE((h,d)=>{let f;return k8(()=>{const p=r[e];Ma(f,p)&&(f=p,d())}),{get(){return h(),n.get?n.get(f):f},set(p){const g=i.vnode.props;!(g&&(e in g||s in g||o in g)&&(`onUpdate:${e}`in g||`onUpdate:${s}`in g||`onUpdate:${o}`in g))&&Ma(p,f)&&(f=p,d()),i.emit(`update:${e}`,n.set?n.set(p):p)}}}),c=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return a[Symbol.iterator]=()=>{let h=0;return{next(){return h<2?{value:h++?r[c]||{}:a,done:!1}:{done:!0}}}},a}function pO(r,e,n){const i=arguments.length;return i===2?cn(e)&&!It(e)?Th(e)?Ie(r,null,[e]):Ie(r,e):Ie(r,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Th(n)&&(n=[n]),Ie(r,e,n))}function nhe(){}function rhe(r,e,n,i){const s=n[i];if(s&&mU(s,r))return s;const o=e();return o.memo=r.slice(),n[i]=o}function mU(r,e){const n=r.memo;if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(Ma(n[i],e[i]))return!1;return dd>0&&js&&js.push(r),!0}const gU="3.4.27",she=Ys,ohe=Fle,ahe=Rf,lhe=m8,che={createComponentInstance:cU,setupComponent:uU,renderComponentRoot:Tx,setCurrentRenderingInstance:ry,isVNode:Th,normalizeVNode:wo},hhe=che,uhe=null,dhe=null,fhe=null;/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const phe="http://www.w3.org/2000/svg",mhe="http://www.w3.org/1998/Math/MathML",oh=typeof document<"u"?document:null,zI=oh&&oh.createElement("template"),ghe={insert:(r,e,n)=>{e.insertBefore(r,n||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,n,i)=>{const s=e==="svg"?oh.createElementNS(phe,r):e==="mathml"?oh.createElementNS(mhe,r):oh.createElement(r,n?{is:n}:void 0);return r==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:r=>oh.createTextNode(r),createComment:r=>oh.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>oh.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,n,i,s,o){const a=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{zI.innerHTML=i==="svg"?`<svg>${r}</svg>`:i==="mathml"?`<math>${r}</math>`:r;const c=zI.content;if(i==="svg"||i==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Uc="transition",jm="animation",bp=Symbol("_vtc"),iP=(r,{slots:e})=>pO(M8,vU(r),e);iP.displayName="Transition";const yU={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yhe=iP.props=Cn({},YE,yU),du=(r,e=[])=>{It(r)?r.forEach(n=>n(...e)):r&&r(...e)},XI=r=>r?It(r)?r.some(e=>e.length>1):r.length>1:!1;function vU(r){const e={};for(const L in r)L in yU||(e[L]=r[L]);if(r.css===!1)return e;const{name:n="v",type:i,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:h=o,appearActiveClass:d=a,appearToClass:f=c,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=r,b=vhe(s),w=b&&b[0],x=b&&b[1],{onBeforeEnter:S,onEnter:_,onEnterCancelled:O,onLeave:T,onLeaveCancelled:E,onBeforeAppear:P=S,onAppear:I=_,onAppearCancelled:A=O}=e,D=(L,N,V)=>{ih(L,N?f:c),ih(L,N?d:a),V&&V()},M=(L,N)=>{L._isLeaving=!1,ih(L,p),ih(L,y),ih(L,g),N&&N()},$=L=>(N,V)=>{const U=L?I:_,F=()=>D(N,L,V);du(U,[N,F]),WI(()=>{ih(N,L?h:o),Fl(N,L?f:c),XI(U)||QI(N,i,w,F)})};return Cn(e,{onBeforeEnter(L){du(S,[L]),Fl(L,o),Fl(L,a)},onBeforeAppear(L){du(P,[L]),Fl(L,h),Fl(L,d)},onEnter:$(!1),onAppear:$(!0),onLeave(L,N){L._isLeaving=!0;const V=()=>M(L,N);Fl(L,p),Fl(L,g),xU(),WI(()=>{L._isLeaving&&(ih(L,p),Fl(L,y),XI(T)||QI(L,i,x,V))}),du(T,[L,V])},onEnterCancelled(L){D(L,!1),du(O,[L])},onAppearCancelled(L){D(L,!0),du(A,[L])},onLeaveCancelled(L){M(L),du(E,[L])}})}function vhe(r){if(r==null)return null;if(cn(r))return[dC(r.enter),dC(r.leave)];{const e=dC(r);return[e,e]}}function dC(r){return oO(r)}function Fl(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.add(n)),(r[bp]||(r[bp]=new Set)).add(e)}function ih(r,e){e.split(/\s+/).forEach(i=>i&&r.classList.remove(i));const n=r[bp];n&&(n.delete(e),n.size||(r[bp]=void 0))}function WI(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let bhe=0;function QI(r,e,n,i){const s=r._endId=++bhe,o=()=>{s===r._endId&&i()};if(n)return setTimeout(o,n);const{type:a,timeout:c,propCount:h}=bU(r,e);if(!a)return i();const d=a+"end";let f=0;const p=()=>{r.removeEventListener(d,g),o()},g=y=>{y.target===r&&++f>=h&&p()};setTimeout(()=>{f<h&&p()},c+1),r.addEventListener(d,g)}function bU(r,e){const n=window.getComputedStyle(r),i=b=>(n[b]||"").split(", "),s=i(`${Uc}Delay`),o=i(`${Uc}Duration`),a=HI(s,o),c=i(`${jm}Delay`),h=i(`${jm}Duration`),d=HI(c,h);let f=null,p=0,g=0;e===Uc?a>0&&(f=Uc,p=a,g=o.length):e===jm?d>0&&(f=jm,p=d,g=h.length):(p=Math.max(a,d),f=p>0?a>d?Uc:jm:null,g=f?f===Uc?o.length:h.length:0);const y=f===Uc&&/\b(transform|all)(,|$)/.test(i(`${Uc}Property`).toString());return{type:f,timeout:p,propCount:g,hasTransform:y}}function HI(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((n,i)=>GI(n)+GI(r[i])))}function GI(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function xU(){return document.body.offsetHeight}function xhe(r,e,n){const i=r[bp];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):n?r.setAttribute("class",e):r.className=e}const mO=Symbol("_vod"),OU=Symbol("_vsh"),wU={beforeMount(r,{value:e},{transition:n}){r[mO]=r.style.display==="none"?"":r.style.display,n&&e?n.beforeEnter(r):qm(r,e)},mounted(r,{value:e},{transition:n}){n&&e&&n.enter(r)},updated(r,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(r),qm(r,!0),i.enter(r)):i.leave(r,()=>{qm(r,!1)}):qm(r,e))},beforeUnmount(r,{value:e}){qm(r,e)}};function qm(r,e){r.style.display=e?r[mO]:"none",r[OU]=!e}function Ohe(){wU.getSSRProps=({value:r})=>{if(!r)return{style:{display:"none"}}}}const _U=Symbol("");function whe(r){const e=Ao();if(!e)return;const n=e.ut=(s=r(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(o=>oT(o,s))},i=()=>{const s=r(e.proxy);sT(e.subTree,s),n(s)};Jn(()=>{C8(i);const s=new MutationObserver(i);s.observe(e.subTree.el.parentNode,{childList:!0}),na(()=>s.disconnect())})}function sT(r,e){if(r.shapeFlag&128){const n=r.suspense;r=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{sT(n.activeBranch,e)})}for(;r.component;)r=r.component.subTree;if(r.shapeFlag&1&&r.el)oT(r.el,e);else if(r.type===dn)r.children.forEach(n=>sT(n,e));else if(r.type===ed){let{el:n,anchor:i}=r;for(;n&&(oT(n,e),n!==i);)n=n.nextSibling}}function oT(r,e){if(r.nodeType===1){const n=r.style;let i="";for(const s in e)n.setProperty(`--${s}`,e[s]),i+=`--${s}: ${e[s]};`;n[_U]=i}}const _he=/(^|;)\s*display\s*:/;function She(r,e,n){const i=r.style,s=An(n);let o=!1;if(n&&!s){if(e)if(An(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();n[c]==null&&Px(i,c,"")}else for(const a in e)n[a]==null&&Px(i,a,"");for(const a in n)a==="display"&&(o=!0),Px(i,a,n[a])}else if(s){if(e!==n){const a=i[_U];a&&(n+=";"+a),i.cssText=n,o=_he.test(n)}}else e&&r.removeAttribute("style");mO in r&&(r[mO]=o?i.display:"",r[OU]&&(i.display="none"))}const YI=/\s*!important$/;function Px(r,e,n){if(It(n))n.forEach(i=>Px(r,e,i));else if(n==null&&(n=""),e.startsWith("--"))r.setProperty(e,n);else{const i=Che(r,e);YI.test(n)?r.setProperty(_o(i),n.replace(YI,""),"important"):r[i]=n}}const jI=["Webkit","Moz","ms"],fC={};function Che(r,e){const n=fC[e];if(n)return n;let i=Cs(e);if(i!=="filter"&&i in r)return fC[e]=i;i=ev(i);for(let s=0;s<jI.length;s++){const o=jI[s]+i;if(o in r)return fC[e]=o}return e}const qI="http://www.w3.org/1999/xlink";function khe(r,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?r.removeAttributeNS(qI,e.slice(6,e.length)):r.setAttributeNS(qI,e,n);else{const o=ile(e);n==null||o&&!QB(n)?r.removeAttribute(e):r.setAttribute(e,o?"":n)}}function The(r,e,n,i,s,o,a){if(e==="innerHTML"||e==="textContent"){i&&a(i,s,o),r[e]=n??"";return}const c=r.tagName;if(e==="value"&&c!=="PROGRESS"&&!c.includes("-")){const d=c==="OPTION"?r.getAttribute("value")||"":r.value,f=n??"";(d!==f||!("_value"in r))&&(r.value=f),n==null&&r.removeAttribute(e),r._value=n;return}let h=!1;if(n===""||n==null){const d=typeof r[e];d==="boolean"?n=QB(n):n==null&&d==="string"?(n="",h=!0):d==="number"&&(n=0,h=!0)}try{r[e]=n}catch{}h&&r.removeAttribute(e)}function Wl(r,e,n,i){r.addEventListener(e,n,i)}function Mhe(r,e,n,i){r.removeEventListener(e,n,i)}const ZI=Symbol("_vei");function Ehe(r,e,n,i,s=null){const o=r[ZI]||(r[ZI]={}),a=o[e];if(i&&a)a.value=i;else{const[c,h]=Phe(e);if(i){const d=o[e]=Ihe(i,s);Wl(r,c,d,h)}else a&&(Mhe(r,c,a,h),o[e]=void 0)}}const KI=/(?:Once|Passive|Capture)$/;function Phe(r){let e;if(KI.test(r)){e={};let i;for(;i=r.match(KI);)r=r.slice(0,r.length-i[0].length),e[i[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):_o(r.slice(2)),e]}let pC=0;const Ahe=Promise.resolve(),Rhe=()=>pC||(Ahe.then(()=>pC=0),pC=Date.now());function Ihe(r,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Mo(Dhe(i,n.value),e,5,[i])};return n.value=r,n.attached=Rhe(),n}function Dhe(r,e){if(It(e)){const n=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{n.call(r),r._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const JI=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,Nhe=(r,e,n,i,s,o,a,c,h)=>{const d=s==="svg";e==="class"?xhe(r,i,d):e==="style"?She(r,n,i):Jy(e)?ME(e)||Ehe(r,e,n,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$he(r,e,i,d))?The(r,e,i,o,a,c,h):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),khe(r,e,i,d))};function $he(r,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in r&&JI(e)&&ti(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=r.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return JI(e)&&An(n)?!1:e in r}/*! #__NO_SIDE_EFFECTS__ */function SU(r,e){const n=sc(r);class i extends Ew{constructor(o){super(n,o,e)}}return i.def=n,i}/*! #__NO_SIDE_EFFECTS__ */const Vhe=r=>SU(r,NU),Lhe=typeof HTMLElement<"u"?HTMLElement:class{};class Ew extends Lhe{constructor(e,n={},i){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),Yp(()=>{this._connected||(vO(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(i=>{for(const s of i)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(i,s=!1)=>{const{props:o,styles:a}=i;let c;if(o&&!It(o))for(const h in o){const d=o[h];(d===Number||d&&d.type===Number)&&(h in this._props&&(this._props[h]=oO(this._props[h])),(c||(c=Object.create(null)))[Cs(h)]=!0)}this._numberProps=c,s&&this._resolveProps(i),this._applyStyles(a),this._update()},n=this._def.__asyncLoader;n?n().then(i=>e(i,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,i=It(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&i.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of i.map(Cs))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(o){this._setProp(s,o)}})}_setAttr(e){let n=this.hasAttribute(e)?this.getAttribute(e):void 0;const i=Cs(e);this._numberProps&&this._numberProps[i]&&(n=oO(n)),this._setProp(i,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,i=!0,s=!0){n!==this._props[e]&&(this._props[e]=n,s&&this._instance&&this._update(),i&&(n===!0?this.setAttribute(_o(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(_o(e),n+""):n||this.removeAttribute(_o(e))))}_update(){vO(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Ie(this._def,Cn({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const i=(o,a)=>{this.dispatchEvent(new CustomEvent(o,{detail:a}))};n.emit=(o,...a)=>{i(o,a),_o(o)!==o&&i(_o(o),a)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof Ew){n.parent=s._instance,n.provides=s._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const i=document.createElement("style");i.textContent=n,this.shadowRoot.appendChild(i)})}}function Bhe(r="$style"){{const e=Ao();if(!e)return nn;const n=e.type.__cssModules;if(!n)return nn;const i=n[r];return i||nn}}const CU=new WeakMap,kU=new WeakMap,gO=Symbol("_moveCb"),e6=Symbol("_enterCb"),TU={name:"TransitionGroup",props:Cn({},yhe,{tag:String,moveClass:String}),setup(r,{slots:e}){const n=Ao(),i=GE();let s,o;return kw(()=>{if(!s.length)return;const a=r.moveClass||`${r.name||"v"}-move`;if(!Qhe(s[0].el,n.vnode.el,a))return;s.forEach(zhe),s.forEach(Xhe);const c=s.filter(Whe);xU(),c.forEach(h=>{const d=h.el,f=d.style;Fl(d,a),f.transform=f.webkitTransform=f.transitionDuration="";const p=d[gO]=g=>{g&&g.target!==d||(!g||/transform$/.test(g.propertyName))&&(d.removeEventListener("transitionend",p),d[gO]=null,ih(d,a))};d.addEventListener("transitionend",p)})}),()=>{const a=Bi(r),c=vU(a);let h=a.tag||dn;if(s=[],o)for(let d=0;d<o.length;d++){const f=o[d];f.el&&f.el instanceof Element&&(s.push(f),hd(f,vp(f,c,i,n)),CU.set(f,f.el.getBoundingClientRect()))}o=e.default?Sw(e.default()):[];for(let d=0;d<o.length;d++){const f=o[d];f.key!=null&&hd(f,vp(f,c,i,n))}return Ie(h,null,o)}}},Uhe=r=>delete r.mode;TU.props;const Fhe=TU;function zhe(r){const e=r.el;e[gO]&&e[gO](),e[e6]&&e[e6]()}function Xhe(r){kU.set(r,r.el.getBoundingClientRect())}function Whe(r){const e=CU.get(r),n=kU.get(r),i=e.left-n.left,s=e.top-n.top;if(i||s){const o=r.el.style;return o.transform=o.webkitTransform=`translate(${i}px,${s}px)`,o.transitionDuration="0s",r}}function Qhe(r,e,n){const i=r.cloneNode(),s=r[bp];s&&s.forEach(c=>{c.split(/\s+/).forEach(h=>h&&i.classList.remove(h))}),n.split(/\s+/).forEach(c=>c&&i.classList.add(c)),i.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(i);const{hasTransform:a}=bU(i);return o.removeChild(i),a}const Mh=r=>{const e=r.props["onUpdate:modelValue"]||!1;return It(e)?n=>Yf(e,n):e};function Hhe(r){r.target.composing=!0}function t6(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ko=Symbol("_assign"),yO={created(r,{modifiers:{lazy:e,trim:n,number:i}},s){r[Ko]=Mh(s);const o=i||s.props&&s.props.type==="number";Wl(r,e?"change":"input",a=>{if(a.target.composing)return;let c=r.value;n&&(c=c.trim()),o&&(c=sO(c)),r[Ko](c)}),n&&Wl(r,"change",()=>{r.value=r.value.trim()}),e||(Wl(r,"compositionstart",Hhe),Wl(r,"compositionend",t6),Wl(r,"change",t6))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,modifiers:{lazy:n,trim:i,number:s}},o){if(r[Ko]=Mh(o),r.composing)return;const a=(s||r.type==="number")&&!/^0\d/.test(r.value)?sO(r.value):r.value,c=e??"";a!==c&&(document.activeElement===r&&r.type!=="range"&&(n||i&&r.value.trim()===c)||(r.value=c))}},nP={deep:!0,created(r,e,n){r[Ko]=Mh(n),Wl(r,"change",()=>{const i=r._modelValue,s=xp(r),o=r.checked,a=r[Ko];if(It(i)){const c=gw(i,s),h=c!==-1;if(o&&!h)a(i.concat(s));else if(!o&&h){const d=[...i];d.splice(c,1),a(d)}}else if(Sd(i)){const c=new Set(i);o?c.add(s):c.delete(s),a(c)}else a(EU(r,o))})},mounted:i6,beforeUpdate(r,e,n){r[Ko]=Mh(n),i6(r,e,n)}};function i6(r,{value:e,oldValue:n},i){r._modelValue=e,It(e)?r.checked=gw(e,i.props.value)>-1:Sd(e)?r.checked=e.has(i.props.value):e!==n&&(r.checked=Ch(e,EU(r,!0)))}const rP={created(r,{value:e},n){r.checked=Ch(e,n.props.value),r[Ko]=Mh(n),Wl(r,"change",()=>{r[Ko](xp(r))})},beforeUpdate(r,{value:e,oldValue:n},i){r[Ko]=Mh(i),e!==n&&(r.checked=Ch(e,i.props.value))}},MU={deep:!0,created(r,{value:e,modifiers:{number:n}},i){const s=Sd(e);Wl(r,"change",()=>{const o=Array.prototype.filter.call(r.options,a=>a.selected).map(a=>n?sO(xp(a)):xp(a));r[Ko](r.multiple?s?new Set(o):o:o[0]),r._assigning=!0,Yp(()=>{r._assigning=!1})}),r[Ko]=Mh(i)},mounted(r,{value:e,modifiers:{number:n}}){n6(r,e)},beforeUpdate(r,e,n){r[Ko]=Mh(n)},updated(r,{value:e,modifiers:{number:n}}){r._assigning||n6(r,e)}};function n6(r,e,n){const i=r.multiple,s=It(e);if(!(i&&!s&&!Sd(e))){for(let o=0,a=r.options.length;o<a;o++){const c=r.options[o],h=xp(c);if(i)if(s){const d=typeof h;d==="string"||d==="number"?c.selected=e.some(f=>String(f)===String(h)):c.selected=gw(e,h)>-1}else c.selected=e.has(h);else if(Ch(xp(c),e)){r.selectedIndex!==o&&(r.selectedIndex=o);return}}!i&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function xp(r){return"_value"in r?r._value:r.value}function EU(r,e){const n=e?"_trueValue":"_falseValue";return n in r?r[n]:e}const PU={created(r,e,n){L1(r,e,n,null,"created")},mounted(r,e,n){L1(r,e,n,null,"mounted")},beforeUpdate(r,e,n,i){L1(r,e,n,i,"beforeUpdate")},updated(r,e,n,i){L1(r,e,n,i,"updated")}};function AU(r,e){switch(r){case"SELECT":return MU;case"TEXTAREA":return yO;default:switch(e){case"checkbox":return nP;case"radio":return rP;default:return yO}}}function L1(r,e,n,i,s){const a=AU(r.tagName,n.props&&n.props.type)[s];a&&a(r,e,n,i)}function Ghe(){yO.getSSRProps=({value:r})=>({value:r}),rP.getSSRProps=({value:r},e)=>{if(e.props&&Ch(e.props.value,r))return{checked:!0}},nP.getSSRProps=({value:r},e)=>{if(It(r)){if(e.props&&gw(r,e.props.value)>-1)return{checked:!0}}else if(Sd(r)){if(e.props&&r.has(e.props.value))return{checked:!0}}else if(r)return{checked:!0}},PU.getSSRProps=(r,e)=>{if(typeof e.type!="string")return;const n=AU(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(r,e)}}const Yhe=["ctrl","shift","alt","meta"],jhe={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>Yhe.some(n=>r[`${n}Key`]&&!e.includes(n))},qhe=(r,e)=>{const n=r._withMods||(r._withMods={}),i=e.join(".");return n[i]||(n[i]=(s,...o)=>{for(let a=0;a<e.length;a++){const c=jhe[e[a]];if(c&&c(s,e))return}return r(s,...o)})},Zhe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Khe=(r,e)=>{const n=r._withKeys||(r._withKeys={}),i=e.join(".");return n[i]||(n[i]=s=>{if(!("key"in s))return;const o=_o(s.key);if(e.some(a=>a===o||Zhe[a]===o))return r(s)})},RU=Cn({patchProp:Nhe},ghe);let $0,r6=!1;function IU(){return $0||($0=KE(RU))}function DU(){return $0=r6?$0:J8(RU),r6=!0,$0}const vO=(...r)=>{IU().render(...r)},NU=(...r)=>{DU().hydrate(...r)},$U=(...r)=>{const e=IU().createApp(...r),{mount:n}=e;return e.mount=i=>{const s=LU(i);if(!s)return;const o=e._component;!ti(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const a=n(s,!1,VU(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},Jhe=(...r)=>{const e=DU().createApp(...r),{mount:n}=e;return e.mount=i=>{const s=LU(i);if(s)return n(s,!0,VU(s))},e};function VU(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function LU(r){return An(r)?document.querySelector(r):r}let s6=!1;const eue=()=>{s6||(s6=!0,Ghe(),Ohe())};/**
* vue v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tue=()=>{},iue=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:M8,BaseTransitionPropsValidators:YE,Comment:zr,DeprecationTypes:fhe,EffectScope:RE,ErrorCodes:Ule,ErrorTypeStrings:ohe,Fragment:dn,KeepAlive:uce,ReactiveEffect:gp,Static:ed,Suspense:O8,Teleport:Hce,Text:ud,TrackOpTypes:Vle,Transition:iP,TransitionGroup:Fhe,TriggerOpTypes:Lle,VueElement:Ew,assertNumber:Ble,callWithAsyncErrorHandling:Mo,callWithErrorHandling:Zl,camelize:Cs,capitalize:ev,cloneVNode:ll,compatUtils:dhe,compile:tue,computed:vn,createApp:$U,createBlock:Wr,createCommentVNode:eP,createElementBlock:ln,createElementVNode:Xt,createHydrationRenderer:J8,createPropsRestProxy:Cce,createRenderer:KE,createSSRApp:Jhe,createSlots:fce,createStaticVNode:jce,createTextVNode:yn,createVNode:Ie,customRef:FE,defineAsyncComponent:cce,defineComponent:sc,defineCustomElement:SU,defineEmits:yce,defineExpose:vce,defineModel:Oce,defineOptions:bce,defineProps:gce,defineSSRCustomElement:Vhe,defineSlots:xce,devtools:ahe,effect:ole,effectScope:rle,getCurrentInstance:Ao,getCurrentScope:yw,getTransitionRawChildren:Sw,guardReactiveProps:aU,h:pO,handleError:kd,hasInjectionContext:Ice,hydrate:NU,initCustomFormatter:nhe,initDirectivesForSSR:eue,inject:ep,isMemoSame:mU,isProxy:VE,isReactive:jf,isReadonly:yp,isRef:ur,isRuntimeOnly:ehe,isShallow:ey,isVNode:Th,markRaw:l8,mergeDefaults:_ce,mergeModels:Sce,mergeProps:lU,nextTick:Yp,normalizeClass:Gp,normalizeProps:ele,normalizeStyle:Bh,onActivated:P8,onBeforeMount:I8,onBeforeUnmount:Tw,onBeforeUpdate:D8,onDeactivated:A8,onErrorCaptured:L8,onMounted:Jn,onRenderTracked:V8,onRenderTriggered:$8,onScopeDispose:IE,onServerPrefetch:N8,onUnmounted:na,onUpdated:kw,openBlock:ci,popScopeId:v8,provide:ay,proxyRefs:UE,pushScopeId:y8,queuePostFlushCb:lO,reactive:Cd,readonly:cd,ref:lt,registerRuntimeCompiler:Jce,render:vO,renderList:kh,renderSlot:B8,resolveComponent:Rt,resolveDirective:Jle,resolveDynamicComponent:Qk,resolveFilter:uhe,resolveTransitionHooks:vp,setBlockTracking:Jk,setDevtoolsHook:lhe,setTransitionHooks:hd,shallowReactive:a8,shallowReadonly:Tle,shallowRef:Wn,ssrContextKey:_8,ssrUtils:hhe,stop:ale,toDisplayString:mp,toHandlerKey:R0,toHandlers:pce,toRaw:Bi,toRef:$le,toRefs:tv,toValue:Ale,transformVNodeArgs:Gce,triggerRef:Ple,unref:li,useAttrs:F8,useCssModule:Bhe,useCssVars:whe,useModel:pU,useSSRContext:S8,useSlots:jE,useTransitionState:GE,vModelCheckbox:nP,vModelDynamic:PU,vModelRadio:rP,vModelSelect:MU,vModelText:yO,vShow:wU,version:gU,warn:she,watch:Qi,watchEffect:Kl,watchPostEffect:C8,watchSyncEffect:k8,withAsyncContext:Mx,withCtx:et,withDefaults:wce,withDirectives:ace,withKeys:Khe,withMemo:rhe,withModifiers:qhe,withScopeId:Gle},Symbol.toStringTag,{value:"Module"})),nue={style:{width:"100%","text-align":"center"}},rue={__name:"AppItem",props:{routeData:{id:"",title:"",comp:null,desc:""}},setup(r){const e=r;function n(){location.hash=e.routeData.id}return(i,s)=>{const o=Rt("Icon"),a=Rt("Button");return ci(),ln("div",nue,[Ie(a,{type:"success",size:"large",onClick:n},{default:et(()=>[Ie(o,{type:"md-eye"}),yn(" "+mp(r.routeData.title),1)]),_:1})])}}};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const jp="164",Pu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},zl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},BU=0,aT=1,UU=2,sue=3,oue=0,sP=1,oP=2,Za=3,oc=0,ss=1,Hs=2,Jl=0,td=1,bO=2,lT=3,cT=4,FU=5,ch=100,zU=101,XU=102,WU=103,QU=104,HU=200,GU=201,YU=202,jU=203,xO=204,OO=205,qU=206,ZU=207,KU=208,JU=209,eF=210,tF=211,iF=212,nF=213,rF=214,sF=0,oF=1,aF=2,ly=3,lF=4,cF=5,hF=6,uF=7,sv=0,dF=1,fF=2,ec=0,pF=1,mF=2,gF=3,aP=4,yF=5,vF=6,bF=7,hT="attached",xF="detached",Pw=300,ac=301,Eh=302,Op=303,cy=304,qp=306,Ph=1e3,_s=1001,wp=1002,vr=1003,Aw=1004,aue=1004,zu=1005,lue=1005,Zn=1006,tp=1007,cue=1007,Ca=1008,hue=1008,Ea=1009,OF=1010,wF=1011,lP=1012,cP=1013,pd=1014,Go=1015,Zp=1016,hP=1017,uP=1018,Kp=1020,_F=35902,SF=1021,CF=1022,qs=1023,kF=1024,TF=1025,id=1026,_p=1027,dP=1028,fP=1029,MF=1030,pP=1031,mP=1033,Ax=33776,Rx=33777,Ix=33778,Dx=33779,uT=35840,dT=35841,fT=35842,pT=35843,mT=36196,gT=37492,yT=37496,vT=37808,bT=37809,xT=37810,OT=37811,wT=37812,_T=37813,ST=37814,CT=37815,kT=37816,TT=37817,MT=37818,ET=37819,PT=37820,AT=37821,Nx=36492,RT=36494,IT=36495,EF=36283,DT=36284,NT=36285,$T=36286,PF=2200,AF=2201,RF=2202,Sp=2300,Cp=2301,$x=2302,Xu=2400,Wu=2401,hy=2402,Rw=2500,gP=2501,uue=0,due=1,fue=2,IF=3200,DF=3201,zh=0,NF=1,Ql="",xo="srgb",gc="srgb-linear",Iw="display-p3",ov="display-p3-linear",uy="linear",mn="srgb",dy="rec709",fy="p3",pue=0,Au=7680,mue=7681,gue=7682,yue=7683,vue=34055,bue=34056,xue=5386,Oue=512,wue=513,_ue=514,Sue=515,Cue=516,kue=517,Tue=518,VT=519,$F=512,VF=513,LF=514,yP=515,BF=516,UF=517,FF=518,zF=519,py=35044,Mue=35048,Eue=35040,Pue=35045,Aue=35049,Rue=35041,Iue=35046,Due=35050,Nue=35042,$ue="100",LT="300 es",il=2e3,my=2001;class pl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let o=0,a=s.length;o<a;o++)s[o].call(this,e);e.target=null}}}const Kr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let o6=1234567;const nd=Math.PI/180,kp=180/Math.PI;function Eo(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Kr[r&255]+Kr[r>>8&255]+Kr[r>>16&255]+Kr[r>>24&255]+"-"+Kr[e&255]+Kr[e>>8&255]+"-"+Kr[e>>16&15|64]+Kr[e>>24&255]+"-"+Kr[n&63|128]+Kr[n>>8&255]+"-"+Kr[n>>16&255]+Kr[n>>24&255]+Kr[i&255]+Kr[i>>8&255]+Kr[i>>16&255]+Kr[i>>24&255]).toLowerCase()}function Xn(r,e,n){return Math.max(e,Math.min(n,r))}function vP(r,e){return(r%e+e)%e}function Vue(r,e,n,i,s){return i+(r-e)*(s-i)/(n-e)}function Lue(r,e,n){return r!==e?(n-r)/(e-r):0}function V0(r,e,n){return(1-n)*r+n*e}function Bue(r,e,n,i){return V0(r,e,1-Math.exp(-n*i))}function Uue(r,e=1){return e-Math.abs(vP(r,e*2)-e)}function Fue(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*(3-2*r))}function zue(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*r*(r*(r*6-15)+10))}function Xue(r,e){return r+Math.floor(Math.random()*(e-r+1))}function Wue(r,e){return r+Math.random()*(e-r)}function Que(r){return r*(.5-Math.random())}function Hue(r){r!==void 0&&(o6=r);let e=o6+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Gue(r){return r*nd}function Yue(r){return r*kp}function jue(r){return(r&r-1)===0&&r!==0}function que(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Zue(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Kue(r,e,n,i,s){const o=Math.cos,a=Math.sin,c=o(n/2),h=a(n/2),d=o((e+i)/2),f=a((e+i)/2),p=o((e-i)/2),g=a((e-i)/2),y=o((i-e)/2),b=a((i-e)/2);switch(s){case"XYX":r.set(c*f,h*p,h*g,c*d);break;case"YZY":r.set(h*g,c*f,h*p,c*d);break;case"ZXZ":r.set(h*p,h*g,c*f,c*d);break;case"XZX":r.set(c*f,h*b,h*y,c*d);break;case"YXY":r.set(h*y,c*f,h*b,c*d);break;case"ZYZ":r.set(h*b,h*y,c*f,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Os(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function gi(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const ns={DEG2RAD:nd,RAD2DEG:kp,generateUUID:Eo,clamp:Xn,euclideanModulo:vP,mapLinear:Vue,inverseLerp:Lue,lerp:V0,damp:Bue,pingpong:Uue,smoothstep:Fue,smootherstep:zue,randInt:Xue,randFloat:Wue,randFloatSpread:Que,seededRandom:Hue,degToRad:Gue,radToDeg:Yue,isPowerOfTwo:jue,ceilPowerOfTwo:que,floorPowerOfTwo:Zue,setQuaternionFromProperEuler:Kue,normalize:gi,denormalize:Os};class Xe{constructor(e=0,n=0){Xe.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),o=this.x-e.x,a=this.y-e.y;return this.x=o*i-a*s+e.x,this.y=o*s+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fi{constructor(e,n,i,s,o,a,c,h,d){fi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,s,o,a,c,h,d)}set(e,n,i,s,o,a,c,h,d){const f=this.elements;return f[0]=e,f[1]=s,f[2]=c,f[3]=n,f[4]=o,f[5]=h,f[6]=i,f[7]=a,f[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,o=this.elements,a=i[0],c=i[3],h=i[6],d=i[1],f=i[4],p=i[7],g=i[2],y=i[5],b=i[8],w=s[0],x=s[3],S=s[6],_=s[1],O=s[4],T=s[7],E=s[2],P=s[5],I=s[8];return o[0]=a*w+c*_+h*E,o[3]=a*x+c*O+h*P,o[6]=a*S+c*T+h*I,o[1]=d*w+f*_+p*E,o[4]=d*x+f*O+p*P,o[7]=d*S+f*T+p*I,o[2]=g*w+y*_+b*E,o[5]=g*x+y*O+b*P,o[8]=g*S+y*T+b*I,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],h=e[6],d=e[7],f=e[8];return n*a*f-n*c*d-i*o*f+i*c*h+s*o*d-s*a*h}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],h=e[6],d=e[7],f=e[8],p=f*a-c*d,g=c*h-f*o,y=d*o-a*h,b=n*p+i*g+s*y;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=p*w,e[1]=(s*d-f*i)*w,e[2]=(c*i-s*a)*w,e[3]=g*w,e[4]=(f*n-s*h)*w,e[5]=(s*o-c*n)*w,e[6]=y*w,e[7]=(i*h-d*n)*w,e[8]=(a*n-i*o)*w,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,o,a,c){const h=Math.cos(o),d=Math.sin(o);return this.set(i*h,i*d,-i*(h*a+d*c)+a+e,-s*d,s*h,-s*(-d*a+h*c)+c+n,0,0,1),this}scale(e,n){return this.premultiply(mC.makeScale(e,n)),this}rotate(e){return this.premultiply(mC.makeRotation(-e)),this}translate(e,n){return this.premultiply(mC.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const mC=new fi;function XF(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const Jue={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Vf(r,e){return new Jue[r](e)}function gy(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function WF(){const r=gy("canvas");return r.style.display="block",r}const a6={};function QF(r){r in a6||(a6[r]=!0,console.warn(r))}const l6=new fi().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),c6=new fi().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),B1={[gc]:{transfer:uy,primaries:dy,toReference:r=>r,fromReference:r=>r},[xo]:{transfer:mn,primaries:dy,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[ov]:{transfer:uy,primaries:fy,toReference:r=>r.applyMatrix3(c6),fromReference:r=>r.applyMatrix3(l6)},[Iw]:{transfer:mn,primaries:fy,toReference:r=>r.convertSRGBToLinear().applyMatrix3(c6),fromReference:r=>r.applyMatrix3(l6).convertLinearToSRGB()}},ede=new Set([gc,ov]),tn={enabled:!0,_workingColorSpace:gc,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!ede.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,n){if(this.enabled===!1||e===n||!e||!n)return r;const i=B1[e].toReference,s=B1[n].fromReference;return s(i(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return B1[r].primaries},getTransfer:function(r){return r===Ql?uy:B1[r].transfer}};function ip(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function gC(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let ef;class HF{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ef===void 0&&(ef=gy("canvas")),ef.width=e.width,ef.height=e.height;const i=ef.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=ef}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=gy("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let a=0;a<o.length;a++)o[a]=ip(o[a]/255)*255;return i.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(ip(n[i]/255)*255):n[i]=ip(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let tde=0;class Qu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:tde++}),this.uuid=Eo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let a=0,c=s.length;a<c;a++)s[a].isDataTexture?o.push(yC(s[a].image)):o.push(yC(s[a]))}else o=yC(s);i.url=o}return n||(e.images[this.uuid]=i),i}}function yC(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?HF.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ide=0,Hn=class Vx extends pl{constructor(e=Vx.DEFAULT_IMAGE,n=Vx.DEFAULT_MAPPING,i=_s,s=_s,o=Zn,a=Ca,c=qs,h=Ea,d=Vx.DEFAULT_ANISOTROPY,f=Ql){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ide++}),this.uuid=Eo(),this.name="",this.source=new Qu(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=h,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Pw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ph:e.x=e.x-Math.floor(e.x);break;case _s:e.x=e.x<0?0:1;break;case wp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ph:e.y=e.y-Math.floor(e.y);break;case _s:e.y=e.y<0?0:1;break;case wp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Hn.DEFAULT_IMAGE=null;Hn.DEFAULT_MAPPING=Pw;Hn.DEFAULT_ANISOTROPY=1;class Oi{constructor(e=0,n=0,i=0,s=1){Oi.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,o=this.w,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*s+a[12]*o,this.y=a[1]*n+a[5]*i+a[9]*s+a[13]*o,this.z=a[2]*n+a[6]*i+a[10]*s+a[14]*o,this.w=a[3]*n+a[7]*i+a[11]*s+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,o;const h=e.elements,d=h[0],f=h[4],p=h[8],g=h[1],y=h[5],b=h[9],w=h[2],x=h[6],S=h[10];if(Math.abs(f-g)<.01&&Math.abs(p-w)<.01&&Math.abs(b-x)<.01){if(Math.abs(f+g)<.1&&Math.abs(p+w)<.1&&Math.abs(b+x)<.1&&Math.abs(d+y+S-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const O=(d+1)/2,T=(y+1)/2,E=(S+1)/2,P=(f+g)/4,I=(p+w)/4,A=(b+x)/4;return O>T&&O>E?O<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(O),s=P/i,o=I/i):T>E?T<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(T),i=P/s,o=A/s):E<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(E),i=I/o,s=A/o),this.set(i,s,o,n),this}let _=Math.sqrt((x-b)*(x-b)+(p-w)*(p-w)+(g-f)*(g-f));return Math.abs(_)<.001&&(_=1),this.x=(x-b)/_,this.y=(p-w)/_,this.z=(g-f)/_,this.w=Math.acos((d+y+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class GF extends pl{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Oi(0,0,e,n),this.scissorTest=!1,this.viewport=new Oi(0,0,e,n);const s={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const o=new Hn(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let c=0;c<a;c++)this.textures[c]=o.clone(),this.textures[c].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let s=0,o=this.textures.length;s<o;s++)this.textures[s].image.width=e,this.textures[s].image.height=n,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Qu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ta extends GF{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class Dw extends Hn{constructor(e=null,n=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=vr,this.minFilter=vr,this.wrapR=_s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nde extends ta{constructor(e=1,n=1,i=1,s={}){super(e,n,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Dw(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class bP extends Hn{constructor(e=null,n=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=vr,this.minFilter=vr,this.wrapR=_s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rde extends ta{constructor(e=1,n=1,i=1,s={}){super(e,n,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new bP(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class ar{constructor(e=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=s}static slerpFlat(e,n,i,s,o,a,c){let h=i[s+0],d=i[s+1],f=i[s+2],p=i[s+3];const g=o[a+0],y=o[a+1],b=o[a+2],w=o[a+3];if(c===0){e[n+0]=h,e[n+1]=d,e[n+2]=f,e[n+3]=p;return}if(c===1){e[n+0]=g,e[n+1]=y,e[n+2]=b,e[n+3]=w;return}if(p!==w||h!==g||d!==y||f!==b){let x=1-c;const S=h*g+d*y+f*b+p*w,_=S>=0?1:-1,O=1-S*S;if(O>Number.EPSILON){const E=Math.sqrt(O),P=Math.atan2(E,S*_);x=Math.sin(x*P)/E,c=Math.sin(c*P)/E}const T=c*_;if(h=h*x+g*T,d=d*x+y*T,f=f*x+b*T,p=p*x+w*T,x===1-c){const E=1/Math.sqrt(h*h+d*d+f*f+p*p);h*=E,d*=E,f*=E,p*=E}}e[n]=h,e[n+1]=d,e[n+2]=f,e[n+3]=p}static multiplyQuaternionsFlat(e,n,i,s,o,a){const c=i[s],h=i[s+1],d=i[s+2],f=i[s+3],p=o[a],g=o[a+1],y=o[a+2],b=o[a+3];return e[n]=c*b+f*p+h*y-d*g,e[n+1]=h*b+f*g+d*p-c*y,e[n+2]=d*b+f*y+c*g-h*p,e[n+3]=f*b-c*p-h*g-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,s=e._y,o=e._z,a=e._order,c=Math.cos,h=Math.sin,d=c(i/2),f=c(s/2),p=c(o/2),g=h(i/2),y=h(s/2),b=h(o/2);switch(a){case"XYZ":this._x=g*f*p+d*y*b,this._y=d*y*p-g*f*b,this._z=d*f*b+g*y*p,this._w=d*f*p-g*y*b;break;case"YXZ":this._x=g*f*p+d*y*b,this._y=d*y*p-g*f*b,this._z=d*f*b-g*y*p,this._w=d*f*p+g*y*b;break;case"ZXY":this._x=g*f*p-d*y*b,this._y=d*y*p+g*f*b,this._z=d*f*b+g*y*p,this._w=d*f*p-g*y*b;break;case"ZYX":this._x=g*f*p-d*y*b,this._y=d*y*p+g*f*b,this._z=d*f*b-g*y*p,this._w=d*f*p+g*y*b;break;case"YZX":this._x=g*f*p+d*y*b,this._y=d*y*p+g*f*b,this._z=d*f*b-g*y*p,this._w=d*f*p-g*y*b;break;case"XZY":this._x=g*f*p-d*y*b,this._y=d*y*p-g*f*b,this._z=d*f*b+g*y*p,this._w=d*f*p+g*y*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],o=n[8],a=n[1],c=n[5],h=n[9],d=n[2],f=n[6],p=n[10],g=i+c+p;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(f-h)*y,this._y=(o-d)*y,this._z=(a-s)*y}else if(i>c&&i>p){const y=2*Math.sqrt(1+i-c-p);this._w=(f-h)/y,this._x=.25*y,this._y=(s+a)/y,this._z=(o+d)/y}else if(c>p){const y=2*Math.sqrt(1+c-i-p);this._w=(o-d)/y,this._x=(s+a)/y,this._y=.25*y,this._z=(h+f)/y}else{const y=2*Math.sqrt(1+p-i-c);this._w=(a-s)/y,this._x=(o+d)/y,this._y=(h+f)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,o=e._z,a=e._w,c=n._x,h=n._y,d=n._z,f=n._w;return this._x=i*f+a*c+s*d-o*h,this._y=s*f+a*h+o*c-i*d,this._z=o*f+a*d+i*h-s*c,this._w=a*f-i*c-s*h-o*d,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,a=this._w;let c=a*e._w+i*e._x+s*e._y+o*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=a,this._x=i,this._y=s,this._z=o,this;const h=1-c*c;if(h<=Number.EPSILON){const y=1-n;return this._w=y*a+n*this._w,this._x=y*i+n*this._x,this._y=y*s+n*this._y,this._z=y*o+n*this._z,this.normalize(),this}const d=Math.sqrt(h),f=Math.atan2(d,c),p=Math.sin((1-n)*f)/d,g=Math.sin(n*f)/d;return this._w=a*p+this._w*g,this._x=i*p+this._x*g,this._y=s*p+this._y*g,this._z=o*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,n=0,i=0){re.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(h6.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(h6.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*n+o[3]*i+o[6]*s,this.y=o[1]*n+o[4]*i+o[7]*s,this.z=o[2]*n+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,o=e.elements,a=1/(o[3]*n+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*n+o[4]*i+o[8]*s+o[12])*a,this.y=(o[1]*n+o[5]*i+o[9]*s+o[13])*a,this.z=(o[2]*n+o[6]*i+o[10]*s+o[14])*a,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,o=e.x,a=e.y,c=e.z,h=e.w,d=2*(a*s-c*i),f=2*(c*n-o*s),p=2*(o*i-a*n);return this.x=n+h*d+a*p-c*f,this.y=i+h*f+c*d-o*p,this.z=s+h*p+o*f-a*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*s,this.y=o[1]*n+o[5]*i+o[9]*s,this.z=o[2]*n+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,o=e.z,a=n.x,c=n.y,h=n.z;return this.x=s*h-o*c,this.y=o*a-i*h,this.z=i*c-s*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return vC.copy(this).projectOnVector(e),this.sub(vC)}reflect(e){return this.sub(vC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vC=new re,h6=new ar;class Qr{constructor(e=new re(1/0,1/0,1/0),n=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(ya.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(ya.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=ya.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let a=0,c=o.count;a<c;a++)e.isMesh===!0?e.getVertexPosition(a,ya):ya.fromBufferAttribute(o,a),ya.applyMatrix4(e.matrixWorld),this.expandByPoint(ya);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),U1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),U1.copy(i.boundingBox)),U1.applyMatrix4(e.matrixWorld),this.union(U1)}const s=e.children;for(let o=0,a=s.length;o<a;o++)this.expandByObject(s[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ya),ya.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zm),F1.subVectors(this.max,Zm),tf.subVectors(e.a,Zm),nf.subVectors(e.b,Zm),rf.subVectors(e.c,Zm),Fc.subVectors(nf,tf),zc.subVectors(rf,nf),fu.subVectors(tf,rf);let n=[0,-Fc.z,Fc.y,0,-zc.z,zc.y,0,-fu.z,fu.y,Fc.z,0,-Fc.x,zc.z,0,-zc.x,fu.z,0,-fu.x,-Fc.y,Fc.x,0,-zc.y,zc.x,0,-fu.y,fu.x,0];return!bC(n,tf,nf,rf,F1)||(n=[1,0,0,0,1,0,0,0,1],!bC(n,tf,nf,rf,F1))?!1:(z1.crossVectors(Fc,zc),n=[z1.x,z1.y,z1.z],bC(n,tf,nf,rf,F1))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ya).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ya).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Pl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Pl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Pl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Pl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Pl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Pl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Pl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Pl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Pl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Pl=[new re,new re,new re,new re,new re,new re,new re,new re],ya=new re,U1=new Qr,tf=new re,nf=new re,rf=new re,Fc=new re,zc=new re,fu=new re,Zm=new re,F1=new re,z1=new re,pu=new re;function bC(r,e,n,i,s){for(let o=0,a=r.length-3;o<=a;o+=3){pu.fromArray(r,o);const c=s.x*Math.abs(pu.x)+s.y*Math.abs(pu.y)+s.z*Math.abs(pu.z),h=e.dot(pu),d=n.dot(pu),f=i.dot(pu);if(Math.max(-Math.max(h,d,f),Math.min(h,d,f))>c)return!1}return!0}const sde=new Qr,Km=new re,xC=new re;class Hr{constructor(e=new re,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):sde.setFromPoints(e).getCenter(i);let s=0;for(let o=0,a=e.length;o<a;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Km.subVectors(e,this.center);const n=Km.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),s=(i-this.radius)*.5;this.center.addScaledVector(Km,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Km.copy(e.center).add(xC)),this.expandByPoint(Km.copy(e.center).sub(xC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Al=new re,OC=new re,X1=new re,Xc=new re,wC=new re,W1=new re,_C=new re;class Td{constructor(e=new re,n=new re(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Al)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Al.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Al.copy(this.origin).addScaledVector(this.direction,n),Al.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){OC.copy(e).add(n).multiplyScalar(.5),X1.copy(n).sub(e).normalize(),Xc.copy(this.origin).sub(OC);const o=e.distanceTo(n)*.5,a=-this.direction.dot(X1),c=Xc.dot(this.direction),h=-Xc.dot(X1),d=Xc.lengthSq(),f=Math.abs(1-a*a);let p,g,y,b;if(f>0)if(p=a*h-c,g=a*c-h,b=o*f,p>=0)if(g>=-b)if(g<=b){const w=1/f;p*=w,g*=w,y=p*(p+a*g+2*c)+g*(a*p+g+2*h)+d}else g=o,p=Math.max(0,-(a*g+c)),y=-p*p+g*(g+2*h)+d;else g=-o,p=Math.max(0,-(a*g+c)),y=-p*p+g*(g+2*h)+d;else g<=-b?(p=Math.max(0,-(-a*o+c)),g=p>0?-o:Math.min(Math.max(-o,-h),o),y=-p*p+g*(g+2*h)+d):g<=b?(p=0,g=Math.min(Math.max(-o,-h),o),y=g*(g+2*h)+d):(p=Math.max(0,-(a*o+c)),g=p>0?o:Math.min(Math.max(-o,-h),o),y=-p*p+g*(g+2*h)+d);else g=a>0?-o:o,p=Math.max(0,-(a*g+c)),y=-p*p+g*(g+2*h)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,p),s&&s.copy(OC).addScaledVector(X1,g),y}intersectSphere(e,n){Al.subVectors(e.center,this.origin);const i=Al.dot(this.direction),s=Al.dot(Al)-i*i,o=e.radius*e.radius;if(s>o)return null;const a=Math.sqrt(o-s),c=i-a,h=i+a;return h<0?null:c<0?this.at(h,n):this.at(c,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,o,a,c,h;const d=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,g=this.origin;return d>=0?(i=(e.min.x-g.x)*d,s=(e.max.x-g.x)*d):(i=(e.max.x-g.x)*d,s=(e.min.x-g.x)*d),f>=0?(o=(e.min.y-g.y)*f,a=(e.max.y-g.y)*f):(o=(e.max.y-g.y)*f,a=(e.min.y-g.y)*f),i>a||o>s||((o>i||isNaN(i))&&(i=o),(a<s||isNaN(s))&&(s=a),p>=0?(c=(e.min.z-g.z)*p,h=(e.max.z-g.z)*p):(c=(e.max.z-g.z)*p,h=(e.min.z-g.z)*p),i>h||c>s)||((c>i||i!==i)&&(i=c),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,Al)!==null}intersectTriangle(e,n,i,s,o){wC.subVectors(n,e),W1.subVectors(i,e),_C.crossVectors(wC,W1);let a=this.direction.dot(_C),c;if(a>0){if(s)return null;c=1}else if(a<0)c=-1,a=-a;else return null;Xc.subVectors(this.origin,e);const h=c*this.direction.dot(W1.crossVectors(Xc,W1));if(h<0)return null;const d=c*this.direction.dot(wC.cross(Xc));if(d<0||h+d>a)return null;const f=-c*Xc.dot(_C);return f<0?null:this.at(f/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gt{constructor(e,n,i,s,o,a,c,h,d,f,p,g,y,b,w,x){gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,s,o,a,c,h,d,f,p,g,y,b,w,x)}set(e,n,i,s,o,a,c,h,d,f,p,g,y,b,w,x){const S=this.elements;return S[0]=e,S[4]=n,S[8]=i,S[12]=s,S[1]=o,S[5]=a,S[9]=c,S[13]=h,S[2]=d,S[6]=f,S[10]=p,S[14]=g,S[3]=y,S[7]=b,S[11]=w,S[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/sf.setFromMatrixColumn(e,0).length(),o=1/sf.setFromMatrixColumn(e,1).length(),a=1/sf.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,s=e.y,o=e.z,a=Math.cos(i),c=Math.sin(i),h=Math.cos(s),d=Math.sin(s),f=Math.cos(o),p=Math.sin(o);if(e.order==="XYZ"){const g=a*f,y=a*p,b=c*f,w=c*p;n[0]=h*f,n[4]=-h*p,n[8]=d,n[1]=y+b*d,n[5]=g-w*d,n[9]=-c*h,n[2]=w-g*d,n[6]=b+y*d,n[10]=a*h}else if(e.order==="YXZ"){const g=h*f,y=h*p,b=d*f,w=d*p;n[0]=g+w*c,n[4]=b*c-y,n[8]=a*d,n[1]=a*p,n[5]=a*f,n[9]=-c,n[2]=y*c-b,n[6]=w+g*c,n[10]=a*h}else if(e.order==="ZXY"){const g=h*f,y=h*p,b=d*f,w=d*p;n[0]=g-w*c,n[4]=-a*p,n[8]=b+y*c,n[1]=y+b*c,n[5]=a*f,n[9]=w-g*c,n[2]=-a*d,n[6]=c,n[10]=a*h}else if(e.order==="ZYX"){const g=a*f,y=a*p,b=c*f,w=c*p;n[0]=h*f,n[4]=b*d-y,n[8]=g*d+w,n[1]=h*p,n[5]=w*d+g,n[9]=y*d-b,n[2]=-d,n[6]=c*h,n[10]=a*h}else if(e.order==="YZX"){const g=a*h,y=a*d,b=c*h,w=c*d;n[0]=h*f,n[4]=w-g*p,n[8]=b*p+y,n[1]=p,n[5]=a*f,n[9]=-c*f,n[2]=-d*f,n[6]=y*p+b,n[10]=g-w*p}else if(e.order==="XZY"){const g=a*h,y=a*d,b=c*h,w=c*d;n[0]=h*f,n[4]=-p,n[8]=d*f,n[1]=g*p+w,n[5]=a*f,n[9]=y*p-b,n[2]=b*p-y,n[6]=c*f,n[10]=w*p+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ode,e,ade)}lookAt(e,n,i){const s=this.elements;return uo.subVectors(e,n),uo.lengthSq()===0&&(uo.z=1),uo.normalize(),Wc.crossVectors(i,uo),Wc.lengthSq()===0&&(Math.abs(i.z)===1?uo.x+=1e-4:uo.z+=1e-4,uo.normalize(),Wc.crossVectors(i,uo)),Wc.normalize(),Q1.crossVectors(uo,Wc),s[0]=Wc.x,s[4]=Q1.x,s[8]=uo.x,s[1]=Wc.y,s[5]=Q1.y,s[9]=uo.y,s[2]=Wc.z,s[6]=Q1.z,s[10]=uo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,o=this.elements,a=i[0],c=i[4],h=i[8],d=i[12],f=i[1],p=i[5],g=i[9],y=i[13],b=i[2],w=i[6],x=i[10],S=i[14],_=i[3],O=i[7],T=i[11],E=i[15],P=s[0],I=s[4],A=s[8],D=s[12],M=s[1],$=s[5],L=s[9],N=s[13],V=s[2],U=s[6],F=s[10],H=s[14],K=s[3],ie=s[7],he=s[11],me=s[15];return o[0]=a*P+c*M+h*V+d*K,o[4]=a*I+c*$+h*U+d*ie,o[8]=a*A+c*L+h*F+d*he,o[12]=a*D+c*N+h*H+d*me,o[1]=f*P+p*M+g*V+y*K,o[5]=f*I+p*$+g*U+y*ie,o[9]=f*A+p*L+g*F+y*he,o[13]=f*D+p*N+g*H+y*me,o[2]=b*P+w*M+x*V+S*K,o[6]=b*I+w*$+x*U+S*ie,o[10]=b*A+w*L+x*F+S*he,o[14]=b*D+w*N+x*H+S*me,o[3]=_*P+O*M+T*V+E*K,o[7]=_*I+O*$+T*U+E*ie,o[11]=_*A+O*L+T*F+E*he,o[15]=_*D+O*N+T*H+E*me,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],o=e[12],a=e[1],c=e[5],h=e[9],d=e[13],f=e[2],p=e[6],g=e[10],y=e[14],b=e[3],w=e[7],x=e[11],S=e[15];return b*(+o*h*p-s*d*p-o*c*g+i*d*g+s*c*y-i*h*y)+w*(+n*h*y-n*d*g+o*a*g-s*a*y+s*d*f-o*h*f)+x*(+n*d*p-n*c*y-o*a*p+i*a*y+o*c*f-i*d*f)+S*(-s*c*f-n*h*p+n*c*g+s*a*p-i*a*g+i*h*f)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],h=e[6],d=e[7],f=e[8],p=e[9],g=e[10],y=e[11],b=e[12],w=e[13],x=e[14],S=e[15],_=p*x*d-w*g*d+w*h*y-c*x*y-p*h*S+c*g*S,O=b*g*d-f*x*d-b*h*y+a*x*y+f*h*S-a*g*S,T=f*w*d-b*p*d+b*c*y-a*w*y-f*c*S+a*p*S,E=b*p*h-f*w*h-b*c*g+a*w*g+f*c*x-a*p*x,P=n*_+i*O+s*T+o*E;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/P;return e[0]=_*I,e[1]=(w*g*o-p*x*o-w*s*y+i*x*y+p*s*S-i*g*S)*I,e[2]=(c*x*o-w*h*o+w*s*d-i*x*d-c*s*S+i*h*S)*I,e[3]=(p*h*o-c*g*o-p*s*d+i*g*d+c*s*y-i*h*y)*I,e[4]=O*I,e[5]=(f*x*o-b*g*o+b*s*y-n*x*y-f*s*S+n*g*S)*I,e[6]=(b*h*o-a*x*o-b*s*d+n*x*d+a*s*S-n*h*S)*I,e[7]=(a*g*o-f*h*o+f*s*d-n*g*d-a*s*y+n*h*y)*I,e[8]=T*I,e[9]=(b*p*o-f*w*o-b*i*y+n*w*y+f*i*S-n*p*S)*I,e[10]=(a*w*o-b*c*o+b*i*d-n*w*d-a*i*S+n*c*S)*I,e[11]=(f*c*o-a*p*o-f*i*d+n*p*d+a*i*y-n*c*y)*I,e[12]=E*I,e[13]=(f*w*s-b*p*s+b*i*g-n*w*g-f*i*x+n*p*x)*I,e[14]=(b*c*s-a*w*s-b*i*h+n*w*h+a*i*x-n*c*x)*I,e[15]=(a*p*s-f*c*s+f*i*h-n*p*h-a*i*g+n*c*g)*I,this}scale(e){const n=this.elements,i=e.x,s=e.y,o=e.z;return n[0]*=i,n[4]*=s,n[8]*=o,n[1]*=i,n[5]*=s,n[9]*=o,n[2]*=i,n[6]*=s,n[10]*=o,n[3]*=i,n[7]*=s,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),o=1-i,a=e.x,c=e.y,h=e.z,d=o*a,f=o*c;return this.set(d*a+i,d*c-s*h,d*h+s*c,0,d*c+s*h,f*c+i,f*h-s*a,0,d*h-s*c,f*h+s*a,o*h*h+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,s,o,a){return this.set(1,i,o,0,e,1,a,0,n,s,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,o=n._x,a=n._y,c=n._z,h=n._w,d=o+o,f=a+a,p=c+c,g=o*d,y=o*f,b=o*p,w=a*f,x=a*p,S=c*p,_=h*d,O=h*f,T=h*p,E=i.x,P=i.y,I=i.z;return s[0]=(1-(w+S))*E,s[1]=(y+T)*E,s[2]=(b-O)*E,s[3]=0,s[4]=(y-T)*P,s[5]=(1-(g+S))*P,s[6]=(x+_)*P,s[7]=0,s[8]=(b+O)*I,s[9]=(x-_)*I,s[10]=(1-(g+w))*I,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let o=sf.set(s[0],s[1],s[2]).length();const a=sf.set(s[4],s[5],s[6]).length(),c=sf.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],va.copy(this);const d=1/o,f=1/a,p=1/c;return va.elements[0]*=d,va.elements[1]*=d,va.elements[2]*=d,va.elements[4]*=f,va.elements[5]*=f,va.elements[6]*=f,va.elements[8]*=p,va.elements[9]*=p,va.elements[10]*=p,n.setFromRotationMatrix(va),i.x=o,i.y=a,i.z=c,this}makePerspective(e,n,i,s,o,a,c=il){const h=this.elements,d=2*o/(n-e),f=2*o/(i-s),p=(n+e)/(n-e),g=(i+s)/(i-s);let y,b;if(c===il)y=-(a+o)/(a-o),b=-2*a*o/(a-o);else if(c===my)y=-a/(a-o),b=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return h[0]=d,h[4]=0,h[8]=p,h[12]=0,h[1]=0,h[5]=f,h[9]=g,h[13]=0,h[2]=0,h[6]=0,h[10]=y,h[14]=b,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,n,i,s,o,a,c=il){const h=this.elements,d=1/(n-e),f=1/(i-s),p=1/(a-o),g=(n+e)*d,y=(i+s)*f;let b,w;if(c===il)b=(a+o)*p,w=-2*p;else if(c===my)b=o*p,w=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return h[0]=2*d,h[4]=0,h[8]=0,h[12]=-g,h[1]=0,h[5]=2*f,h[9]=0,h[13]=-y,h[2]=0,h[6]=0,h[10]=w,h[14]=-b,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const sf=new re,va=new gt,ode=new re(0,0,0),ade=new re(1,1,1),Wc=new re,Q1=new re,uo=new re,u6=new gt,d6=new ar;class br{constructor(e=0,n=0,i=0,s=br.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s=this._order){return this._x=e,this._y=n,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const s=e.elements,o=s[0],a=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],g=s[6],y=s[10];switch(n){case"XYZ":this._y=Math.asin(Xn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,y),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(g,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Xn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,y),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Xn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Xn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Xn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(c,y));break;case"XZY":this._z=Math.asin(-Xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,d),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return u6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(u6,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return d6.setFromEuler(this),this.setFromQuaternion(d6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}br.DEFAULT_ORDER="XYZ";class Nw{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let lde=0;const f6=new re,of=new ar,Rl=new gt,H1=new re,Jm=new re,cde=new re,hde=new ar,p6=new re(1,0,0),m6=new re(0,1,0),g6=new re(0,0,1),y6={type:"added"},ude={type:"removed"},af={type:"childadded",child:null},SC={type:"childremoved",child:null};class Ni extends pl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lde++}),this.uuid=Eo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ni.DEFAULT_UP.clone();const e=new re,n=new br,i=new ar,s=new re(1,1,1);function o(){i.setFromEuler(n,!1)}function a(){n.setFromQuaternion(i,void 0,!1)}n._onChange(o),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new gt},normalMatrix:{value:new fi}}),this.matrix=new gt,this.matrixWorld=new gt,this.matrixAutoUpdate=Ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Nw,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return of.setFromAxisAngle(e,n),this.quaternion.multiply(of),this}rotateOnWorldAxis(e,n){return of.setFromAxisAngle(e,n),this.quaternion.premultiply(of),this}rotateX(e){return this.rotateOnAxis(p6,e)}rotateY(e){return this.rotateOnAxis(m6,e)}rotateZ(e){return this.rotateOnAxis(g6,e)}translateOnAxis(e,n){return f6.copy(e).applyQuaternion(this.quaternion),this.position.add(f6.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(p6,e)}translateY(e){return this.translateOnAxis(m6,e)}translateZ(e){return this.translateOnAxis(g6,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Rl.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?H1.copy(e):H1.set(e,n,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Jm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rl.lookAt(Jm,H1,this.up):Rl.lookAt(H1,Jm,this.up),this.quaternion.setFromRotationMatrix(Rl),s&&(Rl.extractRotation(s.matrixWorld),of.setFromRotationMatrix(Rl),this.quaternion.premultiply(of.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(y6),af.child=e,this.dispatchEvent(af),af.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(ude),SC.child=e,this.dispatchEvent(SC),SC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Rl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Rl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Rl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(y6),af.child=e,this.dispatchEvent(af),af.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,s=this.children.length;i<s;i++){const a=this.children[i].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jm,e,cde),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jm,hde,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,s=n.length;i<s;i++){const o=n[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(c,h){return c[h.uuid]===void 0&&(c[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const h=c.shapes;if(Array.isArray(h))for(let d=0,f=h.length;d<f;d++){const p=h[d];o(e.shapes,p)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let h=0,d=this.material.length;h<d;h++)c.push(o(e.materials,this.material[h]));s.material=c}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){const h=this.animations[c];s.animations.push(o(e.animations,h))}}if(n){const c=a(e.geometries),h=a(e.materials),d=a(e.textures),f=a(e.images),p=a(e.shapes),g=a(e.skeletons),y=a(e.animations),b=a(e.nodes);c.length>0&&(i.geometries=c),h.length>0&&(i.materials=h),d.length>0&&(i.textures=d),f.length>0&&(i.images=f),p.length>0&&(i.shapes=p),g.length>0&&(i.skeletons=g),y.length>0&&(i.animations=y),b.length>0&&(i.nodes=b)}return i.object=s,i;function a(c){const h=[];for(const d in c){const f=c[d];delete f.metadata,h.push(f)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Ni.DEFAULT_UP=new re(0,1,0);Ni.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ba=new re,Il=new re,CC=new re,Dl=new re,lf=new re,cf=new re,v6=new re,kC=new re,TC=new re,MC=new re;class Gs{constructor(e=new re,n=new re,i=new re){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,s){s.subVectors(i,n),ba.subVectors(e,n),s.cross(ba);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,n,i,s,o){ba.subVectors(s,n),Il.subVectors(i,n),CC.subVectors(e,n);const a=ba.dot(ba),c=ba.dot(Il),h=ba.dot(CC),d=Il.dot(Il),f=Il.dot(CC),p=a*d-c*c;if(p===0)return o.set(0,0,0),null;const g=1/p,y=(d*h-c*f)*g,b=(a*f-c*h)*g;return o.set(1-y-b,b,y)}static containsPoint(e,n,i,s){return this.getBarycoord(e,n,i,s,Dl)===null?!1:Dl.x>=0&&Dl.y>=0&&Dl.x+Dl.y<=1}static getInterpolation(e,n,i,s,o,a,c,h){return this.getBarycoord(e,n,i,s,Dl)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,Dl.x),h.addScaledVector(a,Dl.y),h.addScaledVector(c,Dl.z),h)}static isFrontFacing(e,n,i,s){return ba.subVectors(i,n),Il.subVectors(e,n),ba.cross(Il).dot(s)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,s){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,i,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ba.subVectors(this.c,this.b),Il.subVectors(this.a,this.b),ba.cross(Il).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Gs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Gs.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,s,o){return Gs.getInterpolation(e,this.a,this.b,this.c,n,i,s,o)}containsPoint(e){return Gs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Gs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,s=this.b,o=this.c;let a,c;lf.subVectors(s,i),cf.subVectors(o,i),kC.subVectors(e,i);const h=lf.dot(kC),d=cf.dot(kC);if(h<=0&&d<=0)return n.copy(i);TC.subVectors(e,s);const f=lf.dot(TC),p=cf.dot(TC);if(f>=0&&p<=f)return n.copy(s);const g=h*p-f*d;if(g<=0&&h>=0&&f<=0)return a=h/(h-f),n.copy(i).addScaledVector(lf,a);MC.subVectors(e,o);const y=lf.dot(MC),b=cf.dot(MC);if(b>=0&&y<=b)return n.copy(o);const w=y*d-h*b;if(w<=0&&d>=0&&b<=0)return c=d/(d-b),n.copy(i).addScaledVector(cf,c);const x=f*b-y*p;if(x<=0&&p-f>=0&&y-b>=0)return v6.subVectors(o,s),c=(p-f)/(p-f+(y-b)),n.copy(s).addScaledVector(v6,c);const S=1/(x+w+g);return a=w*S,c=g*S,n.copy(i).addScaledVector(lf,a).addScaledVector(cf,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const YF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qc={h:0,s:0,l:0},G1={h:0,s:0,l:0};function EC(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*6*(2/3-n):r}let rt=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=xo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,tn.toWorkingColorSpace(this,n),this}setRGB(e,n,i,s=tn.workingColorSpace){return this.r=e,this.g=n,this.b=i,tn.toWorkingColorSpace(this,s),this}setHSL(e,n,i,s=tn.workingColorSpace){if(e=vP(e,1),n=Xn(n,0,1),i=Xn(i,0,1),n===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+n):i+n-i*n,a=2*i-o;this.r=EC(a,o,e+1/3),this.g=EC(a,o,e),this.b=EC(a,o,e-1/3)}return tn.toWorkingColorSpace(this,s),this}setStyle(e,n=xo){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=s[1],c=s[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=xo){const i=YF[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ip(e.r),this.g=ip(e.g),this.b=ip(e.b),this}copyLinearToSRGB(e){return this.r=gC(e.r),this.g=gC(e.g),this.b=gC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=xo){return tn.fromWorkingColorSpace(Jr.copy(this),e),Math.round(Xn(Jr.r*255,0,255))*65536+Math.round(Xn(Jr.g*255,0,255))*256+Math.round(Xn(Jr.b*255,0,255))}getHexString(e=xo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=tn.workingColorSpace){tn.fromWorkingColorSpace(Jr.copy(this),n);const i=Jr.r,s=Jr.g,o=Jr.b,a=Math.max(i,s,o),c=Math.min(i,s,o);let h,d;const f=(c+a)/2;if(c===a)h=0,d=0;else{const p=a-c;switch(d=f<=.5?p/(a+c):p/(2-a-c),a){case i:h=(s-o)/p+(s<o?6:0);break;case s:h=(o-i)/p+2;break;case o:h=(i-s)/p+4;break}h/=6}return e.h=h,e.s=d,e.l=f,e}getRGB(e,n=tn.workingColorSpace){return tn.fromWorkingColorSpace(Jr.copy(this),n),e.r=Jr.r,e.g=Jr.g,e.b=Jr.b,e}getStyle(e=xo){tn.fromWorkingColorSpace(Jr.copy(this),e);const n=Jr.r,i=Jr.g,s=Jr.b;return e!==xo?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,n,i){return this.getHSL(Qc),this.setHSL(Qc.h+e,Qc.s+n,Qc.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Qc),e.getHSL(G1);const i=V0(Qc.h,G1.h,n),s=V0(Qc.s,G1.s,n),o=V0(Qc.l,G1.l,n);return this.setHSL(i,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,s=this.b,o=e.elements;return this.r=o[0]*n+o[3]*i+o[6]*s,this.g=o[1]*n+o[4]*i+o[7]*s,this.b=o[2]*n+o[5]*i+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Jr=new rt;rt.NAMES=YF;let dde=0;class as extends pl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dde++}),this.uuid=Eo(),this.name="",this.type="Material",this.blending=td,this.side=oc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=xO,this.blendDst=OO,this.blendEquation=ch,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rt(0,0,0),this.blendAlpha=0,this.depthFunc=ly,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Au,this.stencilZFail=Au,this.stencilZPass=Au,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==td&&(i.blending=this.blending),this.side!==oc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==xO&&(i.blendSrc=this.blendSrc),this.blendDst!==OO&&(i.blendDst=this.blendDst),this.blendEquation!==ch&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ly&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==VT&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Au&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Au&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Au&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const a=[];for(const c in o){const h=o[c];delete h.metadata,a.push(h)}return a}if(n){const o=s(e.textures),a=s(e.images);o.length>0&&(i.textures=o),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const s=n.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=n[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ra extends as{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.combine=sv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hl=fde();function fde(){const r=new ArrayBuffer(4),e=new Float32Array(r),n=new Uint32Array(r),i=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const d=h-127;d<-27?(i[h]=0,i[h|256]=32768,s[h]=24,s[h|256]=24):d<-14?(i[h]=1024>>-d-14,i[h|256]=1024>>-d-14|32768,s[h]=-d-1,s[h|256]=-d-1):d<=15?(i[h]=d+15<<10,i[h|256]=d+15<<10|32768,s[h]=13,s[h|256]=13):d<128?(i[h]=31744,i[h|256]=64512,s[h]=24,s[h|256]=24):(i[h]=31744,i[h|256]=64512,s[h]=13,s[h|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),c=new Uint32Array(64);for(let h=1;h<1024;++h){let d=h<<13,f=0;for(;!(d&8388608);)d<<=1,f-=8388608;d&=-8388609,f+=947912704,o[h]=d|f}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)a[h]=h<<23;a[31]=1199570944,a[32]=2147483648;for(let h=33;h<63;++h)a[h]=2147483648+(h-32<<23);a[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(c[h]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:s,mantissaTable:o,exponentTable:a,offsetTable:c}}function Bs(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Xn(r,-65504,65504),Hl.floatView[0]=r;const e=Hl.uint32View[0],n=e>>23&511;return Hl.baseTable[n]+((e&8388607)>>Hl.shiftTable[n])}function x0(r){const e=r>>10;return Hl.uint32View[0]=Hl.mantissaTable[Hl.offsetTable[e]+(r&1023)]+Hl.exponentTable[e],Hl.floatView[0]}const pde={toHalfFloat:Bs,fromHalfFloat:x0},nr=new re,Y1=new Xe;class Di{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=py,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Go,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return QF("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=n.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)Y1.fromBufferAttribute(this,n),Y1.applyMatrix3(e),this.setXY(n,Y1.x,Y1.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)nr.fromBufferAttribute(this,n),nr.applyMatrix3(e),this.setXYZ(n,nr.x,nr.y,nr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)nr.fromBufferAttribute(this,n),nr.applyMatrix4(e),this.setXYZ(n,nr.x,nr.y,nr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)nr.fromBufferAttribute(this,n),nr.applyNormalMatrix(e),this.setXYZ(n,nr.x,nr.y,nr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)nr.fromBufferAttribute(this,n),nr.transformDirection(e),this.setXYZ(n,nr.x,nr.y,nr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Os(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=gi(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Os(n,this.array)),n}setX(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Os(n,this.array)),n}setY(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Os(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Os(n,this.array)),n}setW(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,s){return e*=this.itemSize,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array),s=gi(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,n,i,s,o){return e*=this.itemSize,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array),s=gi(s,this.array),o=gi(o,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==py&&(e.usage=this.usage),e}}class mde extends Di{constructor(e,n,i){super(new Int8Array(e),n,i)}}class gde extends Di{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class yde extends Di{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class vde extends Di{constructor(e,n,i){super(new Int16Array(e),n,i)}}class $w extends Di{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class bde extends Di{constructor(e,n,i){super(new Int32Array(e),n,i)}}class xP extends Di{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class xde extends Di{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=x0(this.array[e*this.itemSize]);return this.normalized&&(n=Os(n,this.array)),n}setX(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize]=Bs(n),this}getY(e){let n=x0(this.array[e*this.itemSize+1]);return this.normalized&&(n=Os(n,this.array)),n}setY(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize+1]=Bs(n),this}getZ(e){let n=x0(this.array[e*this.itemSize+2]);return this.normalized&&(n=Os(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize+2]=Bs(n),this}getW(e){let n=x0(this.array[e*this.itemSize+3]);return this.normalized&&(n=Os(n,this.array)),n}setW(e,n){return this.normalized&&(n=gi(n,this.array)),this.array[e*this.itemSize+3]=Bs(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array)),this.array[e+0]=Bs(n),this.array[e+1]=Bs(i),this}setXYZ(e,n,i,s){return e*=this.itemSize,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array),s=gi(s,this.array)),this.array[e+0]=Bs(n),this.array[e+1]=Bs(i),this.array[e+2]=Bs(s),this}setXYZW(e,n,i,s,o){return e*=this.itemSize,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array),s=gi(s,this.array),o=gi(o,this.array)),this.array[e+0]=Bs(n),this.array[e+1]=Bs(i),this.array[e+2]=Bs(s),this.array[e+3]=Bs(o),this}}class Tt extends Di{constructor(e,n,i){super(new Float32Array(e),n,i)}}let Ode=0;const Bo=new gt,PC=new Ni,hf=new re,fo=new Qr,eg=new Qr,Pr=new re;class si extends pl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ode++}),this.uuid=Eo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(XF(e)?xP:$w)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new fi().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bo.makeRotationFromQuaternion(e),this.applyMatrix4(Bo),this}rotateX(e){return Bo.makeRotationX(e),this.applyMatrix4(Bo),this}rotateY(e){return Bo.makeRotationY(e),this.applyMatrix4(Bo),this}rotateZ(e){return Bo.makeRotationZ(e),this.applyMatrix4(Bo),this}translate(e,n,i){return Bo.makeTranslation(e,n,i),this.applyMatrix4(Bo),this}scale(e,n,i){return Bo.makeScale(e,n,i),this.applyMatrix4(Bo),this}lookAt(e){return PC.lookAt(e),PC.updateMatrix(),this.applyMatrix4(PC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(hf).negate(),this.translate(hf.x,hf.y,hf.z),this}setFromPoints(e){const n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Tt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,s=n.length;i<s;i++){const o=n[i];fo.setFromBufferAttribute(o),this.morphTargetsRelative?(Pr.addVectors(this.boundingBox.min,fo.min),this.boundingBox.expandByPoint(Pr),Pr.addVectors(this.boundingBox.max,fo.max),this.boundingBox.expandByPoint(Pr)):(this.boundingBox.expandByPoint(fo.min),this.boundingBox.expandByPoint(fo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new re,1/0);return}if(e){const i=this.boundingSphere.center;if(fo.setFromBufferAttribute(e),n)for(let o=0,a=n.length;o<a;o++){const c=n[o];eg.setFromBufferAttribute(c),this.morphTargetsRelative?(Pr.addVectors(fo.min,eg.min),fo.expandByPoint(Pr),Pr.addVectors(fo.max,eg.max),fo.expandByPoint(Pr)):(fo.expandByPoint(eg.min),fo.expandByPoint(eg.max))}fo.getCenter(i);let s=0;for(let o=0,a=e.count;o<a;o++)Pr.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(Pr));if(n)for(let o=0,a=n.length;o<a;o++){const c=n[o],h=this.morphTargetsRelative;for(let d=0,f=c.count;d<f;d++)Pr.fromBufferAttribute(c,d),h&&(hf.fromBufferAttribute(e,d),Pr.add(hf)),s=Math.max(s,i.distanceToSquared(Pr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,s=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Di(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),c=[],h=[];for(let A=0;A<i.count;A++)c[A]=new re,h[A]=new re;const d=new re,f=new re,p=new re,g=new Xe,y=new Xe,b=new Xe,w=new re,x=new re;function S(A,D,M){d.fromBufferAttribute(i,A),f.fromBufferAttribute(i,D),p.fromBufferAttribute(i,M),g.fromBufferAttribute(o,A),y.fromBufferAttribute(o,D),b.fromBufferAttribute(o,M),f.sub(d),p.sub(d),y.sub(g),b.sub(g);const $=1/(y.x*b.y-b.x*y.y);isFinite($)&&(w.copy(f).multiplyScalar(b.y).addScaledVector(p,-y.y).multiplyScalar($),x.copy(p).multiplyScalar(y.x).addScaledVector(f,-b.x).multiplyScalar($),c[A].add(w),c[D].add(w),c[M].add(w),h[A].add(x),h[D].add(x),h[M].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let A=0,D=_.length;A<D;++A){const M=_[A],$=M.start,L=M.count;for(let N=$,V=$+L;N<V;N+=3)S(e.getX(N+0),e.getX(N+1),e.getX(N+2))}const O=new re,T=new re,E=new re,P=new re;function I(A){E.fromBufferAttribute(s,A),P.copy(E);const D=c[A];O.copy(D),O.sub(E.multiplyScalar(E.dot(D))).normalize(),T.crossVectors(P,D);const $=T.dot(h[A])<0?-1:1;a.setXYZW(A,O.x,O.y,O.z,$)}for(let A=0,D=_.length;A<D;++A){const M=_[A],$=M.start,L=M.count;for(let N=$,V=$+L;N<V;N+=3)I(e.getX(N+0)),I(e.getX(N+1)),I(e.getX(N+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Di(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let g=0,y=i.count;g<y;g++)i.setXYZ(g,0,0,0);const s=new re,o=new re,a=new re,c=new re,h=new re,d=new re,f=new re,p=new re;if(e)for(let g=0,y=e.count;g<y;g+=3){const b=e.getX(g+0),w=e.getX(g+1),x=e.getX(g+2);s.fromBufferAttribute(n,b),o.fromBufferAttribute(n,w),a.fromBufferAttribute(n,x),f.subVectors(a,o),p.subVectors(s,o),f.cross(p),c.fromBufferAttribute(i,b),h.fromBufferAttribute(i,w),d.fromBufferAttribute(i,x),c.add(f),h.add(f),d.add(f),i.setXYZ(b,c.x,c.y,c.z),i.setXYZ(w,h.x,h.y,h.z),i.setXYZ(x,d.x,d.y,d.z)}else for(let g=0,y=n.count;g<y;g+=3)s.fromBufferAttribute(n,g+0),o.fromBufferAttribute(n,g+1),a.fromBufferAttribute(n,g+2),f.subVectors(a,o),p.subVectors(s,o),f.cross(p),i.setXYZ(g+0,f.x,f.y,f.z),i.setXYZ(g+1,f.x,f.y,f.z),i.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Pr.fromBufferAttribute(e,n),Pr.normalize(),e.setXYZ(n,Pr.x,Pr.y,Pr.z)}toNonIndexed(){function e(c,h){const d=c.array,f=c.itemSize,p=c.normalized,g=new d.constructor(h.length*f);let y=0,b=0;for(let w=0,x=h.length;w<x;w++){c.isInterleavedBufferAttribute?y=h[w]*c.data.stride+c.offset:y=h[w]*f;for(let S=0;S<f;S++)g[b++]=d[y++]}return new Di(g,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new si,i=this.index.array,s=this.attributes;for(const c in s){const h=s[c],d=e(h,i);n.setAttribute(c,d)}const o=this.morphAttributes;for(const c in o){const h=[],d=o[c];for(let f=0,p=d.length;f<p;f++){const g=d[f],y=e(g,i);h.push(y)}n.morphAttributes[c]=h}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let c=0,h=a.length;c<h;c++){const d=a[c];n.addGroup(d.start,d.count,d.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const h in i){const d=i[h];e.data.attributes[h]=d.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],f=[];for(let p=0,g=d.length;p<g;p++){const y=d[p];f.push(y.toJSON(e.data))}f.length>0&&(s[h]=f,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const s=e.attributes;for(const d in s){const f=s[d];this.setAttribute(d,f.clone(n))}const o=e.morphAttributes;for(const d in o){const f=[],p=o[d];for(let g=0,y=p.length;g<y;g++)f.push(p[g].clone(n));this.morphAttributes[d]=f}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let d=0,f=a.length;d<f;d++){const p=a[d];this.addGroup(p.start,p.count,p.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const b6=new gt,mu=new Td,j1=new Hr,x6=new re,uf=new re,df=new re,ff=new re,AC=new re,q1=new re,Z1=new Xe,K1=new Xe,J1=new Xe,O6=new re,w6=new re,_6=new re,eb=new re,tb=new re;let sn=class extends Ni{constructor(e=new si,n=new Ra){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const c=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}getVertexPosition(e,n){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,a=i.morphTargetsRelative;n.fromBufferAttribute(s,e);const c=this.morphTargetInfluences;if(o&&c){q1.set(0,0,0);for(let h=0,d=o.length;h<d;h++){const f=c[h],p=o[h];f!==0&&(AC.fromBufferAttribute(p,e),a?q1.addScaledVector(AC,f):q1.addScaledVector(AC.sub(n),f))}n.add(q1)}return n}raycast(e,n){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),j1.copy(i.boundingSphere),j1.applyMatrix4(o),mu.copy(e.ray).recast(e.near),!(j1.containsPoint(mu.origin)===!1&&(mu.intersectSphere(j1,x6)===null||mu.origin.distanceToSquared(x6)>(e.far-e.near)**2))&&(b6.copy(o).invert(),mu.copy(e.ray).applyMatrix4(b6),!(i.boundingBox!==null&&mu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,mu)))}_computeIntersections(e,n,i){let s;const o=this.geometry,a=this.material,c=o.index,h=o.attributes.position,d=o.attributes.uv,f=o.attributes.uv1,p=o.attributes.normal,g=o.groups,y=o.drawRange;if(c!==null)if(Array.isArray(a))for(let b=0,w=g.length;b<w;b++){const x=g[b],S=a[x.materialIndex],_=Math.max(x.start,y.start),O=Math.min(c.count,Math.min(x.start+x.count,y.start+y.count));for(let T=_,E=O;T<E;T+=3){const P=c.getX(T),I=c.getX(T+1),A=c.getX(T+2);s=ib(this,S,e,i,d,f,p,P,I,A),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const b=Math.max(0,y.start),w=Math.min(c.count,y.start+y.count);for(let x=b,S=w;x<S;x+=3){const _=c.getX(x),O=c.getX(x+1),T=c.getX(x+2);s=ib(this,a,e,i,d,f,p,_,O,T),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}else if(h!==void 0)if(Array.isArray(a))for(let b=0,w=g.length;b<w;b++){const x=g[b],S=a[x.materialIndex],_=Math.max(x.start,y.start),O=Math.min(h.count,Math.min(x.start+x.count,y.start+y.count));for(let T=_,E=O;T<E;T+=3){const P=T,I=T+1,A=T+2;s=ib(this,S,e,i,d,f,p,P,I,A),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const b=Math.max(0,y.start),w=Math.min(h.count,y.start+y.count);for(let x=b,S=w;x<S;x+=3){const _=x,O=x+1,T=x+2;s=ib(this,a,e,i,d,f,p,_,O,T),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}}};function wde(r,e,n,i,s,o,a,c){let h;if(e.side===ss?h=i.intersectTriangle(a,o,s,!0,c):h=i.intersectTriangle(s,o,a,e.side===oc,c),h===null)return null;tb.copy(c),tb.applyMatrix4(r.matrixWorld);const d=n.ray.origin.distanceTo(tb);return d<n.near||d>n.far?null:{distance:d,point:tb.clone(),object:r}}function ib(r,e,n,i,s,o,a,c,h,d){r.getVertexPosition(c,uf),r.getVertexPosition(h,df),r.getVertexPosition(d,ff);const f=wde(r,e,n,i,uf,df,ff,eb);if(f){s&&(Z1.fromBufferAttribute(s,c),K1.fromBufferAttribute(s,h),J1.fromBufferAttribute(s,d),f.uv=Gs.getInterpolation(eb,uf,df,ff,Z1,K1,J1,new Xe)),o&&(Z1.fromBufferAttribute(o,c),K1.fromBufferAttribute(o,h),J1.fromBufferAttribute(o,d),f.uv1=Gs.getInterpolation(eb,uf,df,ff,Z1,K1,J1,new Xe)),a&&(O6.fromBufferAttribute(a,c),w6.fromBufferAttribute(a,h),_6.fromBufferAttribute(a,d),f.normal=Gs.getInterpolation(eb,uf,df,ff,O6,w6,_6,new re),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const p={a:c,b:h,c:d,normal:new re,materialIndex:0};Gs.getNormal(uf,df,ff,p.normal),f.face=p}return f}class Xh extends si{constructor(e=1,n=1,i=1,s=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:o,depthSegments:a};const c=this;s=Math.floor(s),o=Math.floor(o),a=Math.floor(a);const h=[],d=[],f=[],p=[];let g=0,y=0;b("z","y","x",-1,-1,i,n,e,a,o,0),b("z","y","x",1,-1,i,n,-e,a,o,1),b("x","z","y",1,1,e,i,n,s,a,2),b("x","z","y",1,-1,e,i,-n,s,a,3),b("x","y","z",1,-1,e,n,i,s,o,4),b("x","y","z",-1,-1,e,n,-i,s,o,5),this.setIndex(h),this.setAttribute("position",new Tt(d,3)),this.setAttribute("normal",new Tt(f,3)),this.setAttribute("uv",new Tt(p,2));function b(w,x,S,_,O,T,E,P,I,A,D){const M=T/I,$=E/A,L=T/2,N=E/2,V=P/2,U=I+1,F=A+1;let H=0,K=0;const ie=new re;for(let he=0;he<F;he++){const me=he*$-N;for(let Pe=0;Pe<U;Pe++){const _e=Pe*M-L;ie[w]=_e*_,ie[x]=me*O,ie[S]=V,d.push(ie.x,ie.y,ie.z),ie[w]=0,ie[x]=0,ie[S]=P>0?1:-1,f.push(ie.x,ie.y,ie.z),p.push(Pe/I),p.push(1-he/A),H+=1}}for(let he=0;he<A;he++)for(let me=0;me<I;me++){const Pe=g+me+U*he,_e=g+me+U*(he+1),ue=g+(me+1)+U*(he+1),Se=g+(me+1)+U*he;h.push(Pe,_e,Se),h.push(_e,ue,Se),K+=6}c.addGroup(y,K,D),y+=K,g+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Tp(r){const e={};for(const n in r){e[n]={};for(const i in r[n]){const s=r[n][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=s.clone():Array.isArray(s)?e[n][i]=s.slice():e[n][i]=s}}return e}function xs(r){const e={};for(let n=0;n<r.length;n++){const i=Tp(r[n]);for(const s in i)e[s]=i[s]}return e}function _de(r){const e=[];for(let n=0;n<r.length;n++)e.push(r[n].clone());return e}function jF(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:tn.workingColorSpace}const av={clone:Tp,merge:xs};var Sde=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Cde=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ps extends as{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Sde,this.fragmentShader=Cde,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Tp(e.uniforms),this.uniformsGroups=_de(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?n.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[s]={type:"m4",value:a.toArray()}:n.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class lv extends Ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gt,this.projectionMatrix=new gt,this.projectionMatrixInverse=new gt,this.coordinateSystem=il}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Hc=new re,S6=new Xe,C6=new Xe;class rn extends lv{constructor(e=50,n=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=kp*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(nd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return kp*2*Math.atan(Math.tan(nd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){Hc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Hc.x,Hc.y).multiplyScalar(-e/Hc.z),Hc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Hc.x,Hc.y).multiplyScalar(-e/Hc.z)}getViewSize(e,n){return this.getViewBounds(e,S6,C6),n.subVectors(C6,S6)}setViewOffset(e,n,i,s,o,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(nd*.5*this.fov)/this.zoom,i=2*n,s=this.aspect*i,o=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const h=a.fullWidth,d=a.fullHeight;o+=a.offsetX*s/h,n-=a.offsetY*i/d,s*=a.width/h,i*=a.height/d}const c=this.filmOffset;c!==0&&(o+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const pf=-90,mf=1;class qF extends Ni{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new rn(pf,mf,e,n);s.layers=this.layers,this.add(s);const o=new rn(pf,mf,e,n);o.layers=this.layers,this.add(o);const a=new rn(pf,mf,e,n);a.layers=this.layers,this.add(a);const c=new rn(pf,mf,e,n);c.layers=this.layers,this.add(c);const h=new rn(pf,mf,e,n);h.layers=this.layers,this.add(h);const d=new rn(pf,mf,e,n);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,s,o,a,c,h]=n;for(const d of n)this.remove(d);if(e===il)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===my)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of n)this.add(d),d.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,a,c,h,d,f]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(n,o),e.setRenderTarget(i,1,s),e.render(n,a),e.setRenderTarget(i,2,s),e.render(n,c),e.setRenderTarget(i,3,s),e.render(n,h),e.setRenderTarget(i,4,s),e.render(n,d),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,s),e.render(n,f),e.setRenderTarget(p,g,y),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class cv extends Hn{constructor(e,n,i,s,o,a,c,h,d,f){e=e!==void 0?e:[],n=n!==void 0?n:ac,super(e,n,i,s,o,a,c,h,d,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ZF extends ta{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new cv(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Zn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Xh(5,5,5),o=new Ps({name:"CubemapFromEquirect",uniforms:Tp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ss,blending:Jl});o.uniforms.tEquirect.value=n;const a=new sn(s,o),c=n.minFilter;return n.minFilter===Ca&&(n.minFilter=Zn),new qF(1,10,this).update(e,a),n.minFilter=c,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,i,s){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,i,s);e.setRenderTarget(o)}}const RC=new re,kde=new re,Tde=new fi;class wa{constructor(e=new re(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=RC.subVectors(i,n).cross(kde.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(RC),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:n.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||Tde.getNormalMatrix(e),s=this.coplanarPoint(RC).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const gu=new Hr,nb=new re;class hv{constructor(e=new wa,n=new wa,i=new wa,s=new wa,o=new wa,a=new wa){this.planes=[e,n,i,s,o,a]}set(e,n,i,s,o,a){const c=this.planes;return c[0].copy(e),c[1].copy(n),c[2].copy(i),c[3].copy(s),c[4].copy(o),c[5].copy(a),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=il){const i=this.planes,s=e.elements,o=s[0],a=s[1],c=s[2],h=s[3],d=s[4],f=s[5],p=s[6],g=s[7],y=s[8],b=s[9],w=s[10],x=s[11],S=s[12],_=s[13],O=s[14],T=s[15];if(i[0].setComponents(h-o,g-d,x-y,T-S).normalize(),i[1].setComponents(h+o,g+d,x+y,T+S).normalize(),i[2].setComponents(h+a,g+f,x+b,T+_).normalize(),i[3].setComponents(h-a,g-f,x-b,T-_).normalize(),i[4].setComponents(h-c,g-p,x-w,T-O).normalize(),n===il)i[5].setComponents(h+c,g+p,x+w,T+O).normalize();else if(n===my)i[5].setComponents(c,p,w,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),gu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),gu.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(gu)}intersectsSprite(e){return gu.center.set(0,0,0),gu.radius=.7071067811865476,gu.applyMatrix4(e.matrixWorld),this.intersectsSphere(gu)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(nb.x=s.normal.x>0?e.max.x:e.min.x,nb.y=s.normal.y>0?e.max.y:e.min.y,nb.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(nb)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function KF(){let r=null,e=!1,n=null,i=null;function s(o,a){n(o,a),i=r.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(i=r.requestAnimationFrame(s),e=!0)},stop:function(){r.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){r=o}}}function Mde(r){const e=new WeakMap;function n(c,h){const d=c.array,f=c.usage,p=d.byteLength,g=r.createBuffer();r.bindBuffer(h,g),r.bufferData(h,d,f),c.onUploadCallback();let y;if(d instanceof Float32Array)y=r.FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?y=r.HALF_FLOAT:y=r.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=r.SHORT;else if(d instanceof Uint32Array)y=r.UNSIGNED_INT;else if(d instanceof Int32Array)y=r.INT;else if(d instanceof Int8Array)y=r.BYTE;else if(d instanceof Uint8Array)y=r.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:g,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:p}}function i(c,h,d){const f=h.array,p=h._updateRange,g=h.updateRanges;if(r.bindBuffer(d,c),p.count===-1&&g.length===0&&r.bufferSubData(d,0,f),g.length!==0){for(let y=0,b=g.length;y<b;y++){const w=g[y];r.bufferSubData(d,w.start*f.BYTES_PER_ELEMENT,f,w.start,w.count)}h.clearUpdateRanges()}p.count!==-1&&(r.bufferSubData(d,p.offset*f.BYTES_PER_ELEMENT,f,p.offset,p.count),p.count=-1),h.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=e.get(c);h&&(r.deleteBuffer(h.buffer),e.delete(c))}function a(c,h){if(c.isGLBufferAttribute){const f=e.get(c);(!f||f.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=e.get(c);if(d===void 0)e.set(c,n(c,h));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(d.buffer,c,h),d.version=c.version}}return{get:s,remove:o,update:a}}class Wh extends si{constructor(e=1,n=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s};const o=e/2,a=n/2,c=Math.floor(i),h=Math.floor(s),d=c+1,f=h+1,p=e/c,g=n/h,y=[],b=[],w=[],x=[];for(let S=0;S<f;S++){const _=S*g-a;for(let O=0;O<d;O++){const T=O*p-o;b.push(T,-_,0),w.push(0,0,1),x.push(O/c),x.push(1-S/h)}}for(let S=0;S<h;S++)for(let _=0;_<c;_++){const O=_+d*S,T=_+d*(S+1),E=_+1+d*(S+1),P=_+1+d*S;y.push(O,T,P),y.push(T,E,P)}this.setIndex(y),this.setAttribute("position",new Tt(b,3)),this.setAttribute("normal",new Tt(w,3)),this.setAttribute("uv",new Tt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wh(e.width,e.height,e.widthSegments,e.heightSegments)}}var Ede=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Pde=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Ade=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Rde=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ide=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Dde=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Nde=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$de=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Vde=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Lde=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Bde=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ude=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Fde=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,zde=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Xde=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Wde=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Qde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Hde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Gde=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Yde=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,jde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Zde=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Kde=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Jde=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,efe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,tfe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ife=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,nfe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rfe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,sfe="gl_FragColor = linearToOutputTexel( gl_FragColor );",ofe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,afe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,lfe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,cfe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,hfe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ufe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,dfe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ffe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,pfe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,mfe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gfe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,yfe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,vfe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,bfe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xfe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Ofe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,wfe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,_fe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Sfe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Cfe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,kfe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Tfe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Mfe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Efe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Pfe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Afe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Rfe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ife=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dfe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Nfe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$fe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Vfe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Lfe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bfe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ufe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ffe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,zfe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Xfe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Wfe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Qfe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Hfe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Gfe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Yfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qfe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zfe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Kfe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Jfe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,epe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,tpe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ipe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,npe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rpe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,spe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ope=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ape=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,lpe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,cpe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,hpe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,upe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,dpe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,fpe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ppe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,mpe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,gpe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ype=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,vpe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,bpe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,xpe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ope=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,wpe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,_pe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Spe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Cpe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kpe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Tpe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Mpe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Epe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ppe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ape=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Rpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ipe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Dpe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Npe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,$pe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Vpe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Lpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Bpe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Upe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Fpe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zpe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Xpe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wpe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qpe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hpe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Gpe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ype=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,jpe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,qpe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zpe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kpe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Jpe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eme=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tme=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ime=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nme=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rme=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sme=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ome=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ame=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,yi={alphahash_fragment:Ede,alphahash_pars_fragment:Pde,alphamap_fragment:Ade,alphamap_pars_fragment:Rde,alphatest_fragment:Ide,alphatest_pars_fragment:Dde,aomap_fragment:Nde,aomap_pars_fragment:$de,batching_pars_vertex:Vde,batching_vertex:Lde,begin_vertex:Bde,beginnormal_vertex:Ude,bsdfs:Fde,iridescence_fragment:zde,bumpmap_pars_fragment:Xde,clipping_planes_fragment:Wde,clipping_planes_pars_fragment:Qde,clipping_planes_pars_vertex:Hde,clipping_planes_vertex:Gde,color_fragment:Yde,color_pars_fragment:jde,color_pars_vertex:qde,color_vertex:Zde,common:Kde,cube_uv_reflection_fragment:Jde,defaultnormal_vertex:efe,displacementmap_pars_vertex:tfe,displacementmap_vertex:ife,emissivemap_fragment:nfe,emissivemap_pars_fragment:rfe,colorspace_fragment:sfe,colorspace_pars_fragment:ofe,envmap_fragment:afe,envmap_common_pars_fragment:lfe,envmap_pars_fragment:cfe,envmap_pars_vertex:hfe,envmap_physical_pars_fragment:Ofe,envmap_vertex:ufe,fog_vertex:dfe,fog_pars_vertex:ffe,fog_fragment:pfe,fog_pars_fragment:mfe,gradientmap_pars_fragment:gfe,lightmap_pars_fragment:yfe,lights_lambert_fragment:vfe,lights_lambert_pars_fragment:bfe,lights_pars_begin:xfe,lights_toon_fragment:wfe,lights_toon_pars_fragment:_fe,lights_phong_fragment:Sfe,lights_phong_pars_fragment:Cfe,lights_physical_fragment:kfe,lights_physical_pars_fragment:Tfe,lights_fragment_begin:Mfe,lights_fragment_maps:Efe,lights_fragment_end:Pfe,logdepthbuf_fragment:Afe,logdepthbuf_pars_fragment:Rfe,logdepthbuf_pars_vertex:Ife,logdepthbuf_vertex:Dfe,map_fragment:Nfe,map_pars_fragment:$fe,map_particle_fragment:Vfe,map_particle_pars_fragment:Lfe,metalnessmap_fragment:Bfe,metalnessmap_pars_fragment:Ufe,morphinstance_vertex:Ffe,morphcolor_vertex:zfe,morphnormal_vertex:Xfe,morphtarget_pars_vertex:Wfe,morphtarget_vertex:Qfe,normal_fragment_begin:Hfe,normal_fragment_maps:Gfe,normal_pars_fragment:Yfe,normal_pars_vertex:jfe,normal_vertex:qfe,normalmap_pars_fragment:Zfe,clearcoat_normal_fragment_begin:Kfe,clearcoat_normal_fragment_maps:Jfe,clearcoat_pars_fragment:epe,iridescence_pars_fragment:tpe,opaque_fragment:ipe,packing:npe,premultiplied_alpha_fragment:rpe,project_vertex:spe,dithering_fragment:ope,dithering_pars_fragment:ape,roughnessmap_fragment:lpe,roughnessmap_pars_fragment:cpe,shadowmap_pars_fragment:hpe,shadowmap_pars_vertex:upe,shadowmap_vertex:dpe,shadowmask_pars_fragment:fpe,skinbase_vertex:ppe,skinning_pars_vertex:mpe,skinning_vertex:gpe,skinnormal_vertex:ype,specularmap_fragment:vpe,specularmap_pars_fragment:bpe,tonemapping_fragment:xpe,tonemapping_pars_fragment:Ope,transmission_fragment:wpe,transmission_pars_fragment:_pe,uv_pars_fragment:Spe,uv_pars_vertex:Cpe,uv_vertex:kpe,worldpos_vertex:Tpe,background_vert:Mpe,background_frag:Epe,backgroundCube_vert:Ppe,backgroundCube_frag:Ape,cube_vert:Rpe,cube_frag:Ipe,depth_vert:Dpe,depth_frag:Npe,distanceRGBA_vert:$pe,distanceRGBA_frag:Vpe,equirect_vert:Lpe,equirect_frag:Bpe,linedashed_vert:Upe,linedashed_frag:Fpe,meshbasic_vert:zpe,meshbasic_frag:Xpe,meshlambert_vert:Wpe,meshlambert_frag:Qpe,meshmatcap_vert:Hpe,meshmatcap_frag:Gpe,meshnormal_vert:Ype,meshnormal_frag:jpe,meshphong_vert:qpe,meshphong_frag:Zpe,meshphysical_vert:Kpe,meshphysical_frag:Jpe,meshtoon_vert:eme,meshtoon_frag:tme,points_vert:ime,points_frag:nme,shadow_vert:rme,shadow_frag:sme,sprite_vert:ome,sprite_frag:ame},ct={common:{diffuse:{value:new rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new fi},alphaMap:{value:null},alphaMapTransform:{value:new fi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new fi}},envmap:{envMap:{value:null},envMapRotation:{value:new fi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new fi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new fi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new fi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new fi},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new fi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new fi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new fi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new fi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new fi},alphaTest:{value:0},uvTransform:{value:new fi}},sprite:{diffuse:{value:new rt(16777215)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new fi},alphaMap:{value:null},alphaMapTransform:{value:new fi},alphaTest:{value:0}}},zo={basic:{uniforms:xs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:yi.meshbasic_vert,fragmentShader:yi.meshbasic_frag},lambert:{uniforms:xs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new rt(0)}}]),vertexShader:yi.meshlambert_vert,fragmentShader:yi.meshlambert_frag},phong:{uniforms:xs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new rt(0)},specular:{value:new rt(1118481)},shininess:{value:30}}]),vertexShader:yi.meshphong_vert,fragmentShader:yi.meshphong_frag},standard:{uniforms:xs([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yi.meshphysical_vert,fragmentShader:yi.meshphysical_frag},toon:{uniforms:xs([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new rt(0)}}]),vertexShader:yi.meshtoon_vert,fragmentShader:yi.meshtoon_frag},matcap:{uniforms:xs([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:yi.meshmatcap_vert,fragmentShader:yi.meshmatcap_frag},points:{uniforms:xs([ct.points,ct.fog]),vertexShader:yi.points_vert,fragmentShader:yi.points_frag},dashed:{uniforms:xs([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yi.linedashed_vert,fragmentShader:yi.linedashed_frag},depth:{uniforms:xs([ct.common,ct.displacementmap]),vertexShader:yi.depth_vert,fragmentShader:yi.depth_frag},normal:{uniforms:xs([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:yi.meshnormal_vert,fragmentShader:yi.meshnormal_frag},sprite:{uniforms:xs([ct.sprite,ct.fog]),vertexShader:yi.sprite_vert,fragmentShader:yi.sprite_frag},background:{uniforms:{uvTransform:{value:new fi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yi.background_vert,fragmentShader:yi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new fi}},vertexShader:yi.backgroundCube_vert,fragmentShader:yi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yi.cube_vert,fragmentShader:yi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yi.equirect_vert,fragmentShader:yi.equirect_frag},distanceRGBA:{uniforms:xs([ct.common,ct.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yi.distanceRGBA_vert,fragmentShader:yi.distanceRGBA_frag},shadow:{uniforms:xs([ct.lights,ct.fog,{color:{value:new rt(0)},opacity:{value:1}}]),vertexShader:yi.shadow_vert,fragmentShader:yi.shadow_frag}};zo.physical={uniforms:xs([zo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new fi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new fi},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new fi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new fi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new fi},sheen:{value:0},sheenColor:{value:new rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new fi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new fi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new fi},transmissionSamplerSize:{value:new Xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new fi},attenuationDistance:{value:0},attenuationColor:{value:new rt(0)},specularColor:{value:new rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new fi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new fi},anisotropyVector:{value:new Xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new fi}}]),vertexShader:yi.meshphysical_vert,fragmentShader:yi.meshphysical_frag};const rb={r:0,b:0,g:0},yu=new br,lme=new gt;function cme(r,e,n,i,s,o,a){const c=new rt(0);let h=o===!0?0:1,d,f,p=null,g=0,y=null;function b(_){let O=_.isScene===!0?_.background:null;return O&&O.isTexture&&(O=(_.backgroundBlurriness>0?n:e).get(O)),O}function w(_){let O=!1;const T=b(_);T===null?S(c,h):T&&T.isColor&&(S(T,1),O=!0);const E=r.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,a):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(r.autoClear||O)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil)}function x(_,O){const T=b(O);T&&(T.isCubeTexture||T.mapping===qp)?(f===void 0&&(f=new sn(new Xh(1,1,1),new Ps({name:"BackgroundCubeMaterial",uniforms:Tp(zo.backgroundCube.uniforms),vertexShader:zo.backgroundCube.vertexShader,fragmentShader:zo.backgroundCube.fragmentShader,side:ss,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(E,P,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(f)),yu.copy(O.backgroundRotation),yu.x*=-1,yu.y*=-1,yu.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(yu.y*=-1,yu.z*=-1),f.material.uniforms.envMap.value=T,f.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(lme.makeRotationFromEuler(yu)),f.material.toneMapped=tn.getTransfer(T.colorSpace)!==mn,(p!==T||g!==T.version||y!==r.toneMapping)&&(f.material.needsUpdate=!0,p=T,g=T.version,y=r.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null)):T&&T.isTexture&&(d===void 0&&(d=new sn(new Wh(2,2),new Ps({name:"BackgroundMaterial",uniforms:Tp(zo.background.uniforms),vertexShader:zo.background.vertexShader,fragmentShader:zo.background.fragmentShader,side:oc,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(d)),d.material.uniforms.t2D.value=T,d.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,d.material.toneMapped=tn.getTransfer(T.colorSpace)!==mn,T.matrixAutoUpdate===!0&&T.updateMatrix(),d.material.uniforms.uvTransform.value.copy(T.matrix),(p!==T||g!==T.version||y!==r.toneMapping)&&(d.material.needsUpdate=!0,p=T,g=T.version,y=r.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null))}function S(_,O){_.getRGB(rb,jF(r)),i.buffers.color.setClear(rb.r,rb.g,rb.b,O,a)}return{getClearColor:function(){return c},setClearColor:function(_,O=1){c.set(_),h=O,S(c,h)},getClearAlpha:function(){return h},setClearAlpha:function(_){h=_,S(c,h)},render:w,addToRenderList:x}}function hme(r,e){const n=r.getParameter(r.MAX_VERTEX_ATTRIBS),i={},s=g(null);let o=s,a=!1;function c(M,$,L,N,V){let U=!1;const F=p(N,L,$);o!==F&&(o=F,d(o.object)),U=y(M,N,L,V),U&&b(M,N,L,V),V!==null&&e.update(V,r.ELEMENT_ARRAY_BUFFER),(U||a)&&(a=!1,T(M,$,L,N),V!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(V).buffer))}function h(){return r.createVertexArray()}function d(M){return r.bindVertexArray(M)}function f(M){return r.deleteVertexArray(M)}function p(M,$,L){const N=L.wireframe===!0;let V=i[M.id];V===void 0&&(V={},i[M.id]=V);let U=V[$.id];U===void 0&&(U={},V[$.id]=U);let F=U[N];return F===void 0&&(F=g(h()),U[N]=F),F}function g(M){const $=[],L=[],N=[];for(let V=0;V<n;V++)$[V]=0,L[V]=0,N[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:L,attributeDivisors:N,object:M,attributes:{},index:null}}function y(M,$,L,N){const V=o.attributes,U=$.attributes;let F=0;const H=L.getAttributes();for(const K in H)if(H[K].location>=0){const he=V[K];let me=U[K];if(me===void 0&&(K==="instanceMatrix"&&M.instanceMatrix&&(me=M.instanceMatrix),K==="instanceColor"&&M.instanceColor&&(me=M.instanceColor)),he===void 0||he.attribute!==me||me&&he.data!==me.data)return!0;F++}return o.attributesNum!==F||o.index!==N}function b(M,$,L,N){const V={},U=$.attributes;let F=0;const H=L.getAttributes();for(const K in H)if(H[K].location>=0){let he=U[K];he===void 0&&(K==="instanceMatrix"&&M.instanceMatrix&&(he=M.instanceMatrix),K==="instanceColor"&&M.instanceColor&&(he=M.instanceColor));const me={};me.attribute=he,he&&he.data&&(me.data=he.data),V[K]=me,F++}o.attributes=V,o.attributesNum=F,o.index=N}function w(){const M=o.newAttributes;for(let $=0,L=M.length;$<L;$++)M[$]=0}function x(M){S(M,0)}function S(M,$){const L=o.newAttributes,N=o.enabledAttributes,V=o.attributeDivisors;L[M]=1,N[M]===0&&(r.enableVertexAttribArray(M),N[M]=1),V[M]!==$&&(r.vertexAttribDivisor(M,$),V[M]=$)}function _(){const M=o.newAttributes,$=o.enabledAttributes;for(let L=0,N=$.length;L<N;L++)$[L]!==M[L]&&(r.disableVertexAttribArray(L),$[L]=0)}function O(M,$,L,N,V,U,F){F===!0?r.vertexAttribIPointer(M,$,L,V,U):r.vertexAttribPointer(M,$,L,N,V,U)}function T(M,$,L,N){w();const V=N.attributes,U=L.getAttributes(),F=$.defaultAttributeValues;for(const H in U){const K=U[H];if(K.location>=0){let ie=V[H];if(ie===void 0&&(H==="instanceMatrix"&&M.instanceMatrix&&(ie=M.instanceMatrix),H==="instanceColor"&&M.instanceColor&&(ie=M.instanceColor)),ie!==void 0){const he=ie.normalized,me=ie.itemSize,Pe=e.get(ie);if(Pe===void 0)continue;const _e=Pe.buffer,ue=Pe.type,Se=Pe.bytesPerElement,ke=ue===r.INT||ue===r.UNSIGNED_INT||ie.gpuType===cP;if(ie.isInterleavedBufferAttribute){const J=ie.data,q=J.stride,z=ie.offset;if(J.isInstancedInterleavedBuffer){for(let X=0;X<K.locationSize;X++)S(K.location+X,J.meshPerAttribute);M.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let X=0;X<K.locationSize;X++)x(K.location+X);r.bindBuffer(r.ARRAY_BUFFER,_e);for(let X=0;X<K.locationSize;X++)O(K.location+X,me/K.locationSize,ue,he,q*Se,(z+me/K.locationSize*X)*Se,ke)}else{if(ie.isInstancedBufferAttribute){for(let J=0;J<K.locationSize;J++)S(K.location+J,ie.meshPerAttribute);M.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let J=0;J<K.locationSize;J++)x(K.location+J);r.bindBuffer(r.ARRAY_BUFFER,_e);for(let J=0;J<K.locationSize;J++)O(K.location+J,me/K.locationSize,ue,he,me*Se,me/K.locationSize*J*Se,ke)}}else if(F!==void 0){const he=F[H];if(he!==void 0)switch(he.length){case 2:r.vertexAttrib2fv(K.location,he);break;case 3:r.vertexAttrib3fv(K.location,he);break;case 4:r.vertexAttrib4fv(K.location,he);break;default:r.vertexAttrib1fv(K.location,he)}}}}_()}function E(){A();for(const M in i){const $=i[M];for(const L in $){const N=$[L];for(const V in N)f(N[V].object),delete N[V];delete $[L]}delete i[M]}}function P(M){if(i[M.id]===void 0)return;const $=i[M.id];for(const L in $){const N=$[L];for(const V in N)f(N[V].object),delete N[V];delete $[L]}delete i[M.id]}function I(M){for(const $ in i){const L=i[$];if(L[M.id]===void 0)continue;const N=L[M.id];for(const V in N)f(N[V].object),delete N[V];delete L[M.id]}}function A(){D(),a=!0,o!==s&&(o=s,d(o.object))}function D(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:c,reset:A,resetDefaultState:D,dispose:E,releaseStatesOfGeometry:P,releaseStatesOfProgram:I,initAttributes:w,enableAttribute:x,disableUnusedAttributes:_}}function ume(r,e,n){let i;function s(d){i=d}function o(d,f){r.drawArrays(i,d,f),n.update(f,i,1)}function a(d,f,p){p!==0&&(r.drawArraysInstanced(i,d,f,p),n.update(f,i,p))}function c(d,f,p){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<p;y++)this.render(d[y],f[y]);else{g.multiDrawArraysWEBGL(i,d,0,f,0,p);let y=0;for(let b=0;b<p;b++)y+=f[b];n.update(y,i,1)}}function h(d,f,p,g){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let b=0;b<d.length;b++)a(d[b],f[b],g[b]);else{y.multiDrawArraysInstancedWEBGL(i,d,0,f,0,g,0,p);let b=0;for(let w=0;w<p;w++)b+=f[w];for(let w=0;w<g.length;w++)n.update(b,i,g[w])}}this.setMode=s,this.render=o,this.renderInstances=a,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function dme(r,e,n,i){let s;function o(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");s=r.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(P){return!(P!==qs&&i.convert(P)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(P){const I=P===Zp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Ea&&i.convert(P)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Go&&!I)}function h(P){if(P==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=n.precision!==void 0?n.precision:"highp";const f=h(d);f!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",f,"instead."),d=f);const p=n.logarithmicDepthBuffer===!0,g=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),y=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=r.getParameter(r.MAX_TEXTURE_SIZE),w=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),x=r.getParameter(r.MAX_VERTEX_ATTRIBS),S=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),_=r.getParameter(r.MAX_VARYING_VECTORS),O=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),T=y>0,E=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:h,textureFormatReadable:a,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:p,maxTextures:g,maxVertexTextures:y,maxTextureSize:b,maxCubemapSize:w,maxAttributes:x,maxVertexUniforms:S,maxVaryings:_,maxFragmentUniforms:O,vertexTextures:T,maxSamples:E}}function fme(r){const e=this;let n=null,i=0,s=!1,o=!1;const a=new wa,c=new fi,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const y=p.length!==0||g||i!==0||s;return s=g,i=p.length,y},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,g){n=f(p,g,0)},this.setState=function(p,g,y){const b=p.clippingPlanes,w=p.clipIntersection,x=p.clipShadows,S=r.get(p);if(!s||b===null||b.length===0||o&&!x)o?f(null):d();else{const _=o?0:i,O=_*4;let T=S.clippingState||null;h.value=T,T=f(b,g,O,y);for(let E=0;E!==O;++E)T[E]=n[E];S.clippingState=T,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=_}};function d(){h.value!==n&&(h.value=n,h.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(p,g,y,b){const w=p!==null?p.length:0;let x=null;if(w!==0){if(x=h.value,b!==!0||x===null){const S=y+w*4,_=g.matrixWorldInverse;c.getNormalMatrix(_),(x===null||x.length<S)&&(x=new Float32Array(S));for(let O=0,T=y;O!==w;++O,T+=4)a.copy(p[O]).applyMatrix4(_,c),a.normal.toArray(x,T),x[T+3]=a.constant}h.value=x,h.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,x}}function pme(r){let e=new WeakMap;function n(a,c){return c===Op?a.mapping=ac:c===cy&&(a.mapping=Eh),a}function i(a){if(a&&a.isTexture){const c=a.mapping;if(c===Op||c===cy)if(e.has(a)){const h=e.get(a).texture;return n(h,a.mapping)}else{const h=a.image;if(h&&h.height>0){const d=new ZF(h.height);return d.fromEquirectangularTexture(r,a),e.set(a,d),a.addEventListener("dispose",s),n(d.texture,a.mapping)}else return null}}return a}function s(a){const c=a.target;c.removeEventListener("dispose",s);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class Yo extends lv{constructor(e=-1,n=1,i=1,s=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=s,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,s,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,a=i+e,c=s+n,h=s-n;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,a=o+d*this.view.width,c-=f*this.view.offsetY,h=c-f*this.view.height}this.projectionMatrix.makeOrthographic(o,a,c,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Lf=4,k6=[.125,.215,.35,.446,.526,.582],Lu=20,IC=new Yo,T6=new rt;let DC=null,NC=0,$C=0,VC=!1;const Ru=(1+Math.sqrt(5))/2,gf=1/Ru,M6=[new re(-Ru,gf,0),new re(Ru,gf,0),new re(-gf,0,Ru),new re(gf,0,Ru),new re(0,Ru,-gf),new re(0,Ru,gf),new re(-1,1,-1),new re(1,1,-1),new re(-1,1,1),new re(1,1,1)];class BT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,s=100){DC=this._renderer.getRenderTarget(),NC=this._renderer.getActiveCubeFace(),$C=this._renderer.getActiveMipmapLevel(),VC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,s,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=A6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=P6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(DC,NC,$C),this._renderer.xr.enabled=VC,e.scissorTest=!1,sb(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ac||e.mapping===Eh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),DC=this._renderer.getRenderTarget(),NC=this._renderer.getActiveCubeFace(),$C=this._renderer.getActiveMipmapLevel(),VC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Zn,minFilter:Zn,generateMipmaps:!1,type:Zp,format:qs,colorSpace:gc,depthBuffer:!1},s=E6(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=E6(e,n,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=mme(o)),this._blurMaterial=gme(o,e,n)}return s}_compileMaterial(e){const n=new sn(this._lodPlanes[0],e);this._renderer.compile(n,IC)}_sceneToCubeUV(e,n,i,s){const c=new rn(90,1,n,i),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,g=f.toneMapping;f.getClearColor(T6),f.toneMapping=ec,f.autoClear=!1;const y=new Ra({name:"PMREM.Background",side:ss,depthWrite:!1,depthTest:!1}),b=new sn(new Xh,y);let w=!1;const x=e.background;x?x.isColor&&(y.color.copy(x),e.background=null,w=!0):(y.color.copy(T6),w=!0);for(let S=0;S<6;S++){const _=S%3;_===0?(c.up.set(0,h[S],0),c.lookAt(d[S],0,0)):_===1?(c.up.set(0,0,h[S]),c.lookAt(0,d[S],0)):(c.up.set(0,h[S],0),c.lookAt(0,0,d[S]));const O=this._cubeSize;sb(s,_*O,S>2?O:0,O,O),f.setRenderTarget(s),w&&f.render(b,c),f.render(e,c)}b.geometry.dispose(),b.material.dispose(),f.toneMapping=g,f.autoClear=p,e.background=x}_textureToCubeUV(e,n){const i=this._renderer,s=e.mapping===ac||e.mapping===Eh;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=A6()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=P6());const o=s?this._cubemapMaterial:this._equirectMaterial,a=new sn(this._lodPlanes[0],o),c=o.uniforms;c.envMap.value=e;const h=this._cubeSize;sb(n,0,0,3*h,2*h),i.setRenderTarget(n),i.render(a,IC)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let o=1;o<s;o++){const a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),c=M6[(s-o-1)%M6.length];this._blur(e,o-1,o,a,c)}n.autoClear=i}_blur(e,n,i,s,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,i,s,"latitudinal",o),this._halfBlur(a,e,i,i,s,"longitudinal",o)}_halfBlur(e,n,i,s,o,a,c){const h=this._renderer,d=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new sn(this._lodPlanes[s],d),g=d.uniforms,y=this._sizeLods[i]-1,b=isFinite(o)?Math.PI/(2*y):2*Math.PI/(2*Lu-1),w=o/b,x=isFinite(o)?1+Math.floor(f*w):Lu;x>Lu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Lu}`);const S=[];let _=0;for(let I=0;I<Lu;++I){const A=I/w,D=Math.exp(-A*A/2);S.push(D),I===0?_+=D:I<x&&(_+=2*D)}for(let I=0;I<S.length;I++)S[I]=S[I]/_;g.envMap.value=e.texture,g.samples.value=x,g.weights.value=S,g.latitudinal.value=a==="latitudinal",c&&(g.poleAxis.value=c);const{_lodMax:O}=this;g.dTheta.value=b,g.mipInt.value=O-i;const T=this._sizeLods[s],E=3*T*(s>O-Lf?s-O+Lf:0),P=4*(this._cubeSize-T);sb(n,E,P,3*T,2*T),h.setRenderTarget(n),h.render(p,IC)}}function mme(r){const e=[],n=[],i=[];let s=r;const o=r-Lf+1+k6.length;for(let a=0;a<o;a++){const c=Math.pow(2,s);n.push(c);let h=1/c;a>r-Lf?h=k6[a-r+Lf-1]:a===0&&(h=0),i.push(h);const d=1/(c-2),f=-d,p=1+d,g=[f,f,p,f,p,p,f,f,p,p,f,p],y=6,b=6,w=3,x=2,S=1,_=new Float32Array(w*b*y),O=new Float32Array(x*b*y),T=new Float32Array(S*b*y);for(let P=0;P<y;P++){const I=P%3*2/3-1,A=P>2?0:-1,D=[I,A,0,I+2/3,A,0,I+2/3,A+1,0,I,A,0,I+2/3,A+1,0,I,A+1,0];_.set(D,w*b*P),O.set(g,x*b*P);const M=[P,P,P,P,P,P];T.set(M,S*b*P)}const E=new si;E.setAttribute("position",new Di(_,w)),E.setAttribute("uv",new Di(O,x)),E.setAttribute("faceIndex",new Di(T,S)),e.push(E),s>Lf&&s--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function E6(r,e,n){const i=new ta(r,e,n);return i.texture.mapping=qp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function sb(r,e,n,i,s){r.viewport.set(e,n,i,s),r.scissor.set(e,n,i,s)}function gme(r,e,n){const i=new Float32Array(Lu),s=new re(0,1,0);return new Ps({name:"SphericalGaussianBlur",defines:{n:Lu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:OP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Jl,depthTest:!1,depthWrite:!1})}function P6(){return new Ps({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:OP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Jl,depthTest:!1,depthWrite:!1})}function A6(){return new Ps({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:OP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Jl,depthTest:!1,depthWrite:!1})}function OP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function yme(r){let e=new WeakMap,n=null;function i(c){if(c&&c.isTexture){const h=c.mapping,d=h===Op||h===cy,f=h===ac||h===Eh;if(d||f){let p=e.get(c);const g=p!==void 0?p.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==g)return n===null&&(n=new BT(r)),p=d?n.fromEquirectangular(c,p):n.fromCubemap(c,p),p.texture.pmremVersion=c.pmremVersion,e.set(c,p),p.texture;if(p!==void 0)return p.texture;{const y=c.image;return d&&y&&y.height>0||f&&y&&s(y)?(n===null&&(n=new BT(r)),p=d?n.fromEquirectangular(c):n.fromCubemap(c),p.texture.pmremVersion=c.pmremVersion,e.set(c,p),c.addEventListener("dispose",o),p.texture):null}}}return c}function s(c){let h=0;const d=6;for(let f=0;f<d;f++)c[f]!==void 0&&h++;return h===d}function o(c){const h=c.target;h.removeEventListener("dispose",o);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:a}}function vme(r){const e={};function n(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(i)}return e[i]=s,s}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const s=n(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function bme(r,e,n,i){const s={},o=new WeakMap;function a(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const b in g.attributes)e.remove(g.attributes[b]);for(const b in g.morphAttributes){const w=g.morphAttributes[b];for(let x=0,S=w.length;x<S;x++)e.remove(w[x])}g.removeEventListener("dispose",a),delete s[g.id];const y=o.get(g);y&&(e.remove(y),o.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function c(p,g){return s[g.id]===!0||(g.addEventListener("dispose",a),s[g.id]=!0,n.memory.geometries++),g}function h(p){const g=p.attributes;for(const b in g)e.update(g[b],r.ARRAY_BUFFER);const y=p.morphAttributes;for(const b in y){const w=y[b];for(let x=0,S=w.length;x<S;x++)e.update(w[x],r.ARRAY_BUFFER)}}function d(p){const g=[],y=p.index,b=p.attributes.position;let w=0;if(y!==null){const _=y.array;w=y.version;for(let O=0,T=_.length;O<T;O+=3){const E=_[O+0],P=_[O+1],I=_[O+2];g.push(E,P,P,I,I,E)}}else if(b!==void 0){const _=b.array;w=b.version;for(let O=0,T=_.length/3-1;O<T;O+=3){const E=O+0,P=O+1,I=O+2;g.push(E,P,P,I,I,E)}}else return;const x=new(XF(g)?xP:$w)(g,1);x.version=w;const S=o.get(p);S&&e.remove(S),o.set(p,x)}function f(p){const g=o.get(p);if(g){const y=p.index;y!==null&&g.version<y.version&&d(p)}else d(p);return o.get(p)}return{get:c,update:h,getWireframeAttribute:f}}function xme(r,e,n){let i;function s(g){i=g}let o,a;function c(g){o=g.type,a=g.bytesPerElement}function h(g,y){r.drawElements(i,y,o,g*a),n.update(y,i,1)}function d(g,y,b){b!==0&&(r.drawElementsInstanced(i,y,o,g*a,b),n.update(y,i,b))}function f(g,y,b){if(b===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let x=0;x<b;x++)this.render(g[x]/a,y[x]);else{w.multiDrawElementsWEBGL(i,y,0,o,g,0,b);let x=0;for(let S=0;S<b;S++)x+=y[S];n.update(x,i,1)}}function p(g,y,b,w){if(b===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let S=0;S<g.length;S++)d(g[S]/a,y[S],w[S]);else{x.multiDrawElementsInstancedWEBGL(i,y,0,o,g,0,w,0,b);let S=0;for(let _=0;_<b;_++)S+=y[_];for(let _=0;_<w.length;_++)n.update(S,i,w[_])}}this.setMode=s,this.setIndex=c,this.render=h,this.renderInstances=d,this.renderMultiDraw=f,this.renderMultiDrawInstances=p}function Ome(r){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,a,c){switch(n.calls++,a){case r.TRIANGLES:n.triangles+=c*(o/3);break;case r.LINES:n.lines+=c*(o/2);break;case r.LINE_STRIP:n.lines+=c*(o-1);break;case r.LINE_LOOP:n.lines+=c*o;break;case r.POINTS:n.points+=c*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:i}}function wme(r,e,n){const i=new WeakMap,s=new Oi;function o(a,c,h){const d=a.morphTargetInfluences,f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=f!==void 0?f.length:0;let g=i.get(c);if(g===void 0||g.count!==p){let D=function(){I.dispose(),i.delete(c),c.removeEventListener("dispose",D)};g!==void 0&&g.texture.dispose();const y=c.morphAttributes.position!==void 0,b=c.morphAttributes.normal!==void 0,w=c.morphAttributes.color!==void 0,x=c.morphAttributes.position||[],S=c.morphAttributes.normal||[],_=c.morphAttributes.color||[];let O=0;y===!0&&(O=1),b===!0&&(O=2),w===!0&&(O=3);let T=c.attributes.position.count*O,E=1;T>e.maxTextureSize&&(E=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const P=new Float32Array(T*E*4*p),I=new Dw(P,T,E,p);I.type=Go,I.needsUpdate=!0;const A=O*4;for(let M=0;M<p;M++){const $=x[M],L=S[M],N=_[M],V=T*E*4*M;for(let U=0;U<$.count;U++){const F=U*A;y===!0&&(s.fromBufferAttribute($,U),P[V+F+0]=s.x,P[V+F+1]=s.y,P[V+F+2]=s.z,P[V+F+3]=0),b===!0&&(s.fromBufferAttribute(L,U),P[V+F+4]=s.x,P[V+F+5]=s.y,P[V+F+6]=s.z,P[V+F+7]=0),w===!0&&(s.fromBufferAttribute(N,U),P[V+F+8]=s.x,P[V+F+9]=s.y,P[V+F+10]=s.z,P[V+F+11]=N.itemSize===4?s.w:1)}}g={count:p,texture:I,size:new Xe(T,E)},i.set(c,g),c.addEventListener("dispose",D)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)h.getUniforms().setValue(r,"morphTexture",a.morphTexture,n);else{let y=0;for(let w=0;w<d.length;w++)y+=d[w];const b=c.morphTargetsRelative?1:1-y;h.getUniforms().setValue(r,"morphTargetBaseInfluence",b),h.getUniforms().setValue(r,"morphTargetInfluences",d)}h.getUniforms().setValue(r,"morphTargetsTexture",g.texture,n),h.getUniforms().setValue(r,"morphTargetsTextureSize",g.size)}return{update:o}}function _me(r,e,n,i){let s=new WeakMap;function o(h){const d=i.render.frame,f=h.geometry,p=e.get(h,f);if(s.get(p)!==d&&(e.update(p),s.set(p,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",c)===!1&&h.addEventListener("dispose",c),s.get(h)!==d&&(n.update(h.instanceMatrix,r.ARRAY_BUFFER),h.instanceColor!==null&&n.update(h.instanceColor,r.ARRAY_BUFFER),s.set(h,d))),h.isSkinnedMesh){const g=h.skeleton;s.get(g)!==d&&(g.update(),s.set(g,d))}return p}function a(){s=new WeakMap}function c(h){const d=h.target;d.removeEventListener("dispose",c),n.remove(d.instanceMatrix),d.instanceColor!==null&&n.remove(d.instanceColor)}return{update:o,dispose:a}}class wP extends Hn{constructor(e,n,i,s,o,a,c,h,d,f){if(f=f!==void 0?f:id,f!==id&&f!==_p)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===id&&(i=pd),i===void 0&&f===_p&&(i=Kp),super(null,s,o,a,c,h,f,i,d),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=c!==void 0?c:vr,this.minFilter=h!==void 0?h:vr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const JF=new Hn,e9=new wP(1,1);e9.compareFunction=yP;const t9=new Dw,i9=new bP,n9=new cv,R6=[],I6=[],D6=new Float32Array(16),N6=new Float32Array(9),$6=new Float32Array(4);function Jp(r,e,n){const i=r[0];if(i<=0||i>0)return r;const s=e*n;let o=R6[s];if(o===void 0&&(o=new Float32Array(s),R6[s]=o),e!==0){i.toArray(o,0);for(let a=1,c=0;a!==e;++a)c+=n,r[a].toArray(o,c)}return o}function Sr(r,e){if(r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(r[n]!==e[n])return!1;return!0}function Cr(r,e){for(let n=0,i=e.length;n<i;n++)r[n]=e[n]}function Vw(r,e){let n=I6[e];n===void 0&&(n=new Int32Array(e),I6[e]=n);for(let i=0;i!==e;++i)n[i]=r.allocateTextureUnit();return n}function Sme(r,e){const n=this.cache;n[0]!==e&&(r.uniform1f(this.addr,e),n[0]=e)}function Cme(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Sr(n,e))return;r.uniform2fv(this.addr,e),Cr(n,e)}}function kme(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Sr(n,e))return;r.uniform3fv(this.addr,e),Cr(n,e)}}function Tme(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Sr(n,e))return;r.uniform4fv(this.addr,e),Cr(n,e)}}function Mme(r,e){const n=this.cache,i=e.elements;if(i===void 0){if(Sr(n,e))return;r.uniformMatrix2fv(this.addr,!1,e),Cr(n,e)}else{if(Sr(n,i))return;$6.set(i),r.uniformMatrix2fv(this.addr,!1,$6),Cr(n,i)}}function Eme(r,e){const n=this.cache,i=e.elements;if(i===void 0){if(Sr(n,e))return;r.uniformMatrix3fv(this.addr,!1,e),Cr(n,e)}else{if(Sr(n,i))return;N6.set(i),r.uniformMatrix3fv(this.addr,!1,N6),Cr(n,i)}}function Pme(r,e){const n=this.cache,i=e.elements;if(i===void 0){if(Sr(n,e))return;r.uniformMatrix4fv(this.addr,!1,e),Cr(n,e)}else{if(Sr(n,i))return;D6.set(i),r.uniformMatrix4fv(this.addr,!1,D6),Cr(n,i)}}function Ame(r,e){const n=this.cache;n[0]!==e&&(r.uniform1i(this.addr,e),n[0]=e)}function Rme(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Sr(n,e))return;r.uniform2iv(this.addr,e),Cr(n,e)}}function Ime(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Sr(n,e))return;r.uniform3iv(this.addr,e),Cr(n,e)}}function Dme(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Sr(n,e))return;r.uniform4iv(this.addr,e),Cr(n,e)}}function Nme(r,e){const n=this.cache;n[0]!==e&&(r.uniform1ui(this.addr,e),n[0]=e)}function $me(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Sr(n,e))return;r.uniform2uiv(this.addr,e),Cr(n,e)}}function Vme(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Sr(n,e))return;r.uniform3uiv(this.addr,e),Cr(n,e)}}function Lme(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Sr(n,e))return;r.uniform4uiv(this.addr,e),Cr(n,e)}}function Bme(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s);const o=this.type===r.SAMPLER_2D_SHADOW?e9:JF;n.setTexture2D(e||o,s)}function Ume(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTexture3D(e||i9,s)}function Fme(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTextureCube(e||n9,s)}function zme(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTexture2DArray(e||t9,s)}function Xme(r){switch(r){case 5126:return Sme;case 35664:return Cme;case 35665:return kme;case 35666:return Tme;case 35674:return Mme;case 35675:return Eme;case 35676:return Pme;case 5124:case 35670:return Ame;case 35667:case 35671:return Rme;case 35668:case 35672:return Ime;case 35669:case 35673:return Dme;case 5125:return Nme;case 36294:return $me;case 36295:return Vme;case 36296:return Lme;case 35678:case 36198:case 36298:case 36306:case 35682:return Bme;case 35679:case 36299:case 36307:return Ume;case 35680:case 36300:case 36308:case 36293:return Fme;case 36289:case 36303:case 36311:case 36292:return zme}}function Wme(r,e){r.uniform1fv(this.addr,e)}function Qme(r,e){const n=Jp(e,this.size,2);r.uniform2fv(this.addr,n)}function Hme(r,e){const n=Jp(e,this.size,3);r.uniform3fv(this.addr,n)}function Gme(r,e){const n=Jp(e,this.size,4);r.uniform4fv(this.addr,n)}function Yme(r,e){const n=Jp(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,n)}function jme(r,e){const n=Jp(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,n)}function qme(r,e){const n=Jp(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,n)}function Zme(r,e){r.uniform1iv(this.addr,e)}function Kme(r,e){r.uniform2iv(this.addr,e)}function Jme(r,e){r.uniform3iv(this.addr,e)}function ege(r,e){r.uniform4iv(this.addr,e)}function tge(r,e){r.uniform1uiv(this.addr,e)}function ige(r,e){r.uniform2uiv(this.addr,e)}function nge(r,e){r.uniform3uiv(this.addr,e)}function rge(r,e){r.uniform4uiv(this.addr,e)}function sge(r,e,n){const i=this.cache,s=e.length,o=Vw(n,s);Sr(i,o)||(r.uniform1iv(this.addr,o),Cr(i,o));for(let a=0;a!==s;++a)n.setTexture2D(e[a]||JF,o[a])}function oge(r,e,n){const i=this.cache,s=e.length,o=Vw(n,s);Sr(i,o)||(r.uniform1iv(this.addr,o),Cr(i,o));for(let a=0;a!==s;++a)n.setTexture3D(e[a]||i9,o[a])}function age(r,e,n){const i=this.cache,s=e.length,o=Vw(n,s);Sr(i,o)||(r.uniform1iv(this.addr,o),Cr(i,o));for(let a=0;a!==s;++a)n.setTextureCube(e[a]||n9,o[a])}function lge(r,e,n){const i=this.cache,s=e.length,o=Vw(n,s);Sr(i,o)||(r.uniform1iv(this.addr,o),Cr(i,o));for(let a=0;a!==s;++a)n.setTexture2DArray(e[a]||t9,o[a])}function cge(r){switch(r){case 5126:return Wme;case 35664:return Qme;case 35665:return Hme;case 35666:return Gme;case 35674:return Yme;case 35675:return jme;case 35676:return qme;case 5124:case 35670:return Zme;case 35667:case 35671:return Kme;case 35668:case 35672:return Jme;case 35669:case 35673:return ege;case 5125:return tge;case 36294:return ige;case 36295:return nge;case 36296:return rge;case 35678:case 36198:case 36298:case 36306:case 35682:return sge;case 35679:case 36299:case 36307:return oge;case 35680:case 36300:case 36308:case 36293:return age;case 36289:case 36303:case 36311:case 36292:return lge}}class hge{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=Xme(n.type)}}class uge{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=cge(n.type)}}class dge{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const s=this.seq;for(let o=0,a=s.length;o!==a;++o){const c=s[o];c.setValue(e,n[c.id],i)}}}const LC=/(\w+)(\])?(\[|\.)?/g;function V6(r,e){r.seq.push(e),r.map[e.id]=e}function fge(r,e,n){const i=r.name,s=i.length;for(LC.lastIndex=0;;){const o=LC.exec(i),a=LC.lastIndex;let c=o[1];const h=o[2]==="]",d=o[3];if(h&&(c=c|0),d===void 0||d==="["&&a+2===s){V6(n,d===void 0?new hge(c,r,e):new uge(c,r,e));break}else{let p=n.map[c];p===void 0&&(p=new dge(c),V6(n,p)),n=p}}}class Lx{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const o=e.getActiveUniform(n,s),a=e.getUniformLocation(n,o.name);fge(o,a,this)}}setValue(e,n,i,s){const o=this.map[n];o!==void 0&&o.setValue(e,i,s)}setOptional(e,n,i){const s=n[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,n,i,s){for(let o=0,a=n.length;o!==a;++o){const c=n[o],h=i[c.id];h.needsUpdate!==!1&&c.setValue(e,h.value,s)}}static seqWithValue(e,n){const i=[];for(let s=0,o=e.length;s!==o;++s){const a=e[s];a.id in n&&i.push(a)}return i}}function L6(r,e,n){const i=r.createShader(e);return r.shaderSource(i,n),r.compileShader(i),i}const pge=37297;let mge=0;function gge(r,e){const n=r.split(`
`),i=[],s=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=s;a<o;a++){const c=a+1;i.push(`${c===e?">":" "} ${c}: ${n[a]}`)}return i.join(`
`)}function yge(r){const e=tn.getPrimaries(tn.workingColorSpace),n=tn.getPrimaries(r);let i;switch(e===n?i="":e===fy&&n===dy?i="LinearDisplayP3ToLinearSRGB":e===dy&&n===fy&&(i="LinearSRGBToLinearDisplayP3"),r){case gc:case ov:return[i,"LinearTransferOETF"];case xo:case Iw:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[i,"LinearTransferOETF"]}}function B6(r,e,n){const i=r.getShaderParameter(e,r.COMPILE_STATUS),s=r.getShaderInfoLog(e).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+s+`

`+gge(r.getShaderSource(e),a)}else return s}function vge(r,e){const n=yge(e);return`vec4 ${r}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function bge(r,e){let n;switch(e){case pF:n="Linear";break;case mF:n="Reinhard";break;case gF:n="OptimizedCineon";break;case aP:n="ACESFilmic";break;case vF:n="AgX";break;case bF:n="Neutral";break;case yF:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+r+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function xge(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(O0).join(`
`)}function Oge(r){const e=[];for(const n in r){const i=r[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function wge(r,e){const n={},i=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const o=r.getActiveAttrib(e,s),a=o.name;let c=1;o.type===r.FLOAT_MAT2&&(c=2),o.type===r.FLOAT_MAT3&&(c=3),o.type===r.FLOAT_MAT4&&(c=4),n[a]={type:o.type,location:r.getAttribLocation(e,a),locationSize:c}}return n}function O0(r){return r!==""}function U6(r,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function F6(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _ge=/^[ \t]*#include +<([\w\d./]+)>/gm;function UT(r){return r.replace(_ge,Cge)}const Sge=new Map;function Cge(r,e){let n=yi[e];if(n===void 0){const i=Sge.get(e);if(i!==void 0)n=yi[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return UT(n)}const kge=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function z6(r){return r.replace(kge,Tge)}function Tge(r,e,n,i){let s="";for(let o=parseInt(e);o<parseInt(n);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function X6(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Mge(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===sP?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===oP?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Za&&(e="SHADOWMAP_TYPE_VSM"),e}function Ege(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case ac:case Eh:e="ENVMAP_TYPE_CUBE";break;case qp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Pge(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Eh:e="ENVMAP_MODE_REFRACTION";break}return e}function Age(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case sv:e="ENVMAP_BLENDING_MULTIPLY";break;case dF:e="ENVMAP_BLENDING_MIX";break;case fF:e="ENVMAP_BLENDING_ADD";break}return e}function Rge(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Ige(r,e,n,i){const s=r.getContext(),o=n.defines;let a=n.vertexShader,c=n.fragmentShader;const h=Mge(n),d=Ege(n),f=Pge(n),p=Age(n),g=Rge(n),y=xge(n),b=Oge(o),w=s.createProgram();let x,S,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(O0).join(`
`),x.length>0&&(x+=`
`),S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(O0).join(`
`),S.length>0&&(S+=`
`)):(x=[X6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(O0).join(`
`),S=[X6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ec?"#define TONE_MAPPING":"",n.toneMapping!==ec?yi.tonemapping_pars_fragment:"",n.toneMapping!==ec?bge("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",yi.colorspace_pars_fragment,vge("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(O0).join(`
`)),a=UT(a),a=U6(a,n),a=F6(a,n),c=UT(c),c=U6(c,n),c=F6(c,n),a=z6(a),c=z6(c),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,S=["#define varying in",n.glslVersion===LT?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===LT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const O=_+x+a,T=_+S+c,E=L6(s,s.VERTEX_SHADER,O),P=L6(s,s.FRAGMENT_SHADER,T);s.attachShader(w,E),s.attachShader(w,P),n.index0AttributeName!==void 0?s.bindAttribLocation(w,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(w,0,"position"),s.linkProgram(w);function I($){if(r.debug.checkShaderErrors){const L=s.getProgramInfoLog(w).trim(),N=s.getShaderInfoLog(E).trim(),V=s.getShaderInfoLog(P).trim();let U=!0,F=!0;if(s.getProgramParameter(w,s.LINK_STATUS)===!1)if(U=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(s,w,E,P);else{const H=B6(s,E,"vertex"),K=B6(s,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(w,s.VALIDATE_STATUS)+`

Material Name: `+$.name+`
Material Type: `+$.type+`

Program Info Log: `+L+`
`+H+`
`+K)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(N===""||V==="")&&(F=!1);F&&($.diagnostics={runnable:U,programLog:L,vertexShader:{log:N,prefix:x},fragmentShader:{log:V,prefix:S}})}s.deleteShader(E),s.deleteShader(P),A=new Lx(s,w),D=wge(s,w)}let A;this.getUniforms=function(){return A===void 0&&I(this),A};let D;this.getAttributes=function(){return D===void 0&&I(this),D};let M=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=s.getProgramParameter(w,pge)),M},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(w),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=mge++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=E,this.fragmentShader=P,this}let Dge=0;class Nge{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(n),o=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new $ge(e),n.set(e,i)),i}}class $ge{constructor(e){this.id=Dge++,this.code=e,this.usedTimes=0}}function Vge(r,e,n,i,s,o,a){const c=new Nw,h=new Nge,d=new Set,f=[],p=s.logarithmicDepthBuffer,g=s.vertexTextures;let y=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(D){return d.add(D),D===0?"uv":`uv${D}`}function x(D,M,$,L,N){const V=L.fog,U=N.geometry,F=D.isMeshStandardMaterial?L.environment:null,H=(D.isMeshStandardMaterial?n:e).get(D.envMap||F),K=H&&H.mapping===qp?H.image.height:null,ie=b[D.type];D.precision!==null&&(y=s.getMaxPrecision(D.precision),y!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",y,"instead."));const he=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,me=he!==void 0?he.length:0;let Pe=0;U.morphAttributes.position!==void 0&&(Pe=1),U.morphAttributes.normal!==void 0&&(Pe=2),U.morphAttributes.color!==void 0&&(Pe=3);let _e,ue,Se,ke;if(ie){const xi=zo[ie];_e=xi.vertexShader,ue=xi.fragmentShader}else _e=D.vertexShader,ue=D.fragmentShader,h.update(D),Se=h.getVertexShaderID(D),ke=h.getFragmentShaderID(D);const J=r.getRenderTarget(),q=N.isInstancedMesh===!0,z=N.isBatchedMesh===!0,X=!!D.map,te=!!D.matcap,se=!!H,Q=!!D.aoMap,Z=!!D.lightMap,le=!!D.bumpMap,pe=!!D.normalMap,be=!!D.displacementMap,Ee=!!D.emissiveMap,ee=!!D.metalnessMap,Y=!!D.roughnessMap,de=D.anisotropy>0,fe=D.clearcoat>0,we=D.dispersion>0,Me=D.iridescence>0,Qe=D.sheen>0,Le=D.transmission>0,ze=de&&!!D.anisotropyMap,ot=fe&&!!D.clearcoatMap,Ye=fe&&!!D.clearcoatNormalMap,st=fe&&!!D.clearcoatRoughnessMap,Mt=Me&&!!D.iridescenceMap,Et=Me&&!!D.iridescenceThicknessMap,ft=Qe&&!!D.sheenColorMap,Wt=Qe&&!!D.sheenRoughnessMap,hi=!!D.specularMap,Ce=!!D.specularColorMap,Be=!!D.specularIntensityMap,ge=Le&&!!D.transmissionMap,Ue=Le&&!!D.thicknessMap,We=!!D.gradientMap,nt=!!D.alphaMap,pt=D.alphaTest>0,Ci=!!D.alphaHash,ki=!!D.extensions;let Li=ec;D.toneMapped&&(J===null||J.isXRRenderTarget===!0)&&(Li=r.toneMapping);const kn={shaderID:ie,shaderType:D.type,shaderName:D.name,vertexShader:_e,fragmentShader:ue,defines:D.defines,customVertexShaderID:Se,customFragmentShaderID:ke,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:y,batching:z,instancing:q,instancingColor:q&&N.instanceColor!==null,instancingMorph:q&&N.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:J===null?r.outputColorSpace:J.isXRRenderTarget===!0?J.texture.colorSpace:gc,alphaToCoverage:!!D.alphaToCoverage,map:X,matcap:te,envMap:se,envMapMode:se&&H.mapping,envMapCubeUVHeight:K,aoMap:Q,lightMap:Z,bumpMap:le,normalMap:pe,displacementMap:g&&be,emissiveMap:Ee,normalMapObjectSpace:pe&&D.normalMapType===NF,normalMapTangentSpace:pe&&D.normalMapType===zh,metalnessMap:ee,roughnessMap:Y,anisotropy:de,anisotropyMap:ze,clearcoat:fe,clearcoatMap:ot,clearcoatNormalMap:Ye,clearcoatRoughnessMap:st,dispersion:we,iridescence:Me,iridescenceMap:Mt,iridescenceThicknessMap:Et,sheen:Qe,sheenColorMap:ft,sheenRoughnessMap:Wt,specularMap:hi,specularColorMap:Ce,specularIntensityMap:Be,transmission:Le,transmissionMap:ge,thicknessMap:Ue,gradientMap:We,opaque:D.transparent===!1&&D.blending===td&&D.alphaToCoverage===!1,alphaMap:nt,alphaTest:pt,alphaHash:Ci,combine:D.combine,mapUv:X&&w(D.map.channel),aoMapUv:Q&&w(D.aoMap.channel),lightMapUv:Z&&w(D.lightMap.channel),bumpMapUv:le&&w(D.bumpMap.channel),normalMapUv:pe&&w(D.normalMap.channel),displacementMapUv:be&&w(D.displacementMap.channel),emissiveMapUv:Ee&&w(D.emissiveMap.channel),metalnessMapUv:ee&&w(D.metalnessMap.channel),roughnessMapUv:Y&&w(D.roughnessMap.channel),anisotropyMapUv:ze&&w(D.anisotropyMap.channel),clearcoatMapUv:ot&&w(D.clearcoatMap.channel),clearcoatNormalMapUv:Ye&&w(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:st&&w(D.clearcoatRoughnessMap.channel),iridescenceMapUv:Mt&&w(D.iridescenceMap.channel),iridescenceThicknessMapUv:Et&&w(D.iridescenceThicknessMap.channel),sheenColorMapUv:ft&&w(D.sheenColorMap.channel),sheenRoughnessMapUv:Wt&&w(D.sheenRoughnessMap.channel),specularMapUv:hi&&w(D.specularMap.channel),specularColorMapUv:Ce&&w(D.specularColorMap.channel),specularIntensityMapUv:Be&&w(D.specularIntensityMap.channel),transmissionMapUv:ge&&w(D.transmissionMap.channel),thicknessMapUv:Ue&&w(D.thicknessMap.channel),alphaMapUv:nt&&w(D.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(pe||de),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,pointsUvs:N.isPoints===!0&&!!U.attributes.uv&&(X||nt),fog:!!V,useFog:D.fog===!0,fogExp2:!!V&&V.isFogExp2,flatShading:D.flatShading===!0,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:N.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:me,morphTextureStride:Pe,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:D.dithering,shadowMapEnabled:r.shadowMap.enabled&&$.length>0,shadowMapType:r.shadowMap.type,toneMapping:Li,useLegacyLights:r._useLegacyLights,decodeVideoTexture:X&&D.map.isVideoTexture===!0&&tn.getTransfer(D.map.colorSpace)===mn,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===Hs,flipSided:D.side===ss,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:ki&&D.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ki&&D.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return kn.vertexUv1s=d.has(1),kn.vertexUv2s=d.has(2),kn.vertexUv3s=d.has(3),d.clear(),kn}function S(D){const M=[];if(D.shaderID?M.push(D.shaderID):(M.push(D.customVertexShaderID),M.push(D.customFragmentShaderID)),D.defines!==void 0)for(const $ in D.defines)M.push($),M.push(D.defines[$]);return D.isRawShaderMaterial===!1&&(_(M,D),O(M,D),M.push(r.outputColorSpace)),M.push(D.customProgramCacheKey),M.join()}function _(D,M){D.push(M.precision),D.push(M.outputColorSpace),D.push(M.envMapMode),D.push(M.envMapCubeUVHeight),D.push(M.mapUv),D.push(M.alphaMapUv),D.push(M.lightMapUv),D.push(M.aoMapUv),D.push(M.bumpMapUv),D.push(M.normalMapUv),D.push(M.displacementMapUv),D.push(M.emissiveMapUv),D.push(M.metalnessMapUv),D.push(M.roughnessMapUv),D.push(M.anisotropyMapUv),D.push(M.clearcoatMapUv),D.push(M.clearcoatNormalMapUv),D.push(M.clearcoatRoughnessMapUv),D.push(M.iridescenceMapUv),D.push(M.iridescenceThicknessMapUv),D.push(M.sheenColorMapUv),D.push(M.sheenRoughnessMapUv),D.push(M.specularMapUv),D.push(M.specularColorMapUv),D.push(M.specularIntensityMapUv),D.push(M.transmissionMapUv),D.push(M.thicknessMapUv),D.push(M.combine),D.push(M.fogExp2),D.push(M.sizeAttenuation),D.push(M.morphTargetsCount),D.push(M.morphAttributeCount),D.push(M.numDirLights),D.push(M.numPointLights),D.push(M.numSpotLights),D.push(M.numSpotLightMaps),D.push(M.numHemiLights),D.push(M.numRectAreaLights),D.push(M.numDirLightShadows),D.push(M.numPointLightShadows),D.push(M.numSpotLightShadows),D.push(M.numSpotLightShadowsWithMaps),D.push(M.numLightProbes),D.push(M.shadowMapType),D.push(M.toneMapping),D.push(M.numClippingPlanes),D.push(M.numClipIntersection),D.push(M.depthPacking)}function O(D,M){c.disableAll(),M.supportsVertexTextures&&c.enable(0),M.instancing&&c.enable(1),M.instancingColor&&c.enable(2),M.instancingMorph&&c.enable(3),M.matcap&&c.enable(4),M.envMap&&c.enable(5),M.normalMapObjectSpace&&c.enable(6),M.normalMapTangentSpace&&c.enable(7),M.clearcoat&&c.enable(8),M.iridescence&&c.enable(9),M.alphaTest&&c.enable(10),M.vertexColors&&c.enable(11),M.vertexAlphas&&c.enable(12),M.vertexUv1s&&c.enable(13),M.vertexUv2s&&c.enable(14),M.vertexUv3s&&c.enable(15),M.vertexTangents&&c.enable(16),M.anisotropy&&c.enable(17),M.alphaHash&&c.enable(18),M.batching&&c.enable(19),M.dispersion&&c.enable(20),D.push(c.mask),c.disableAll(),M.fog&&c.enable(0),M.useFog&&c.enable(1),M.flatShading&&c.enable(2),M.logarithmicDepthBuffer&&c.enable(3),M.skinning&&c.enable(4),M.morphTargets&&c.enable(5),M.morphNormals&&c.enable(6),M.morphColors&&c.enable(7),M.premultipliedAlpha&&c.enable(8),M.shadowMapEnabled&&c.enable(9),M.useLegacyLights&&c.enable(10),M.doubleSided&&c.enable(11),M.flipSided&&c.enable(12),M.useDepthPacking&&c.enable(13),M.dithering&&c.enable(14),M.transmission&&c.enable(15),M.sheen&&c.enable(16),M.opaque&&c.enable(17),M.pointsUvs&&c.enable(18),M.decodeVideoTexture&&c.enable(19),M.alphaToCoverage&&c.enable(20),D.push(c.mask)}function T(D){const M=b[D.type];let $;if(M){const L=zo[M];$=av.clone(L.uniforms)}else $=D.uniforms;return $}function E(D,M){let $;for(let L=0,N=f.length;L<N;L++){const V=f[L];if(V.cacheKey===M){$=V,++$.usedTimes;break}}return $===void 0&&($=new Ige(r,M,D,o),f.push($)),$}function P(D){if(--D.usedTimes===0){const M=f.indexOf(D);f[M]=f[f.length-1],f.pop(),D.destroy()}}function I(D){h.remove(D)}function A(){h.dispose()}return{getParameters:x,getProgramCacheKey:S,getUniforms:T,acquireProgram:E,releaseProgram:P,releaseShaderCache:I,programs:f,dispose:A}}function Lge(){let r=new WeakMap;function e(o){let a=r.get(o);return a===void 0&&(a={},r.set(o,a)),a}function n(o){r.delete(o)}function i(o,a,c){r.get(o)[a]=c}function s(){r=new WeakMap}return{get:e,remove:n,update:i,dispose:s}}function Bge(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function W6(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Q6(){const r=[];let e=0;const n=[],i=[],s=[];function o(){e=0,n.length=0,i.length=0,s.length=0}function a(p,g,y,b,w,x){let S=r[e];return S===void 0?(S={id:p.id,object:p,geometry:g,material:y,groupOrder:b,renderOrder:p.renderOrder,z:w,group:x},r[e]=S):(S.id=p.id,S.object=p,S.geometry=g,S.material=y,S.groupOrder=b,S.renderOrder=p.renderOrder,S.z=w,S.group=x),e++,S}function c(p,g,y,b,w,x){const S=a(p,g,y,b,w,x);y.transmission>0?i.push(S):y.transparent===!0?s.push(S):n.push(S)}function h(p,g,y,b,w,x){const S=a(p,g,y,b,w,x);y.transmission>0?i.unshift(S):y.transparent===!0?s.unshift(S):n.unshift(S)}function d(p,g){n.length>1&&n.sort(p||Bge),i.length>1&&i.sort(g||W6),s.length>1&&s.sort(g||W6)}function f(){for(let p=e,g=r.length;p<g;p++){const y=r[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:n,transmissive:i,transparent:s,init:o,push:c,unshift:h,finish:f,sort:d}}function Uge(){let r=new WeakMap;function e(i,s){const o=r.get(i);let a;return o===void 0?(a=new Q6,r.set(i,[a])):s>=o.length?(a=new Q6,o.push(a)):a=o[s],a}function n(){r=new WeakMap}return{get:e,dispose:n}}function Fge(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new re,color:new rt};break;case"SpotLight":n={position:new re,direction:new re,color:new rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new re,color:new rt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new re,skyColor:new rt,groundColor:new rt};break;case"RectAreaLight":n={color:new rt,position:new re,halfWidth:new re,halfHeight:new re};break}return r[e.id]=n,n}}}function zge(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=n,n}}}let Xge=0;function Wge(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Qge(r){const e=new Fge,n=zge(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new re);const s=new re,o=new gt,a=new gt;function c(d,f){let p=0,g=0,y=0;for(let $=0;$<9;$++)i.probe[$].set(0,0,0);let b=0,w=0,x=0,S=0,_=0,O=0,T=0,E=0,P=0,I=0,A=0;d.sort(Wge);const D=f===!0?Math.PI:1;for(let $=0,L=d.length;$<L;$++){const N=d[$],V=N.color,U=N.intensity,F=N.distance,H=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)p+=V.r*U*D,g+=V.g*U*D,y+=V.b*U*D;else if(N.isLightProbe){for(let K=0;K<9;K++)i.probe[K].addScaledVector(N.sh.coefficients[K],U);A++}else if(N.isDirectionalLight){const K=e.get(N);if(K.color.copy(N.color).multiplyScalar(N.intensity*D),N.castShadow){const ie=N.shadow,he=n.get(N);he.shadowBias=ie.bias,he.shadowNormalBias=ie.normalBias,he.shadowRadius=ie.radius,he.shadowMapSize=ie.mapSize,i.directionalShadow[b]=he,i.directionalShadowMap[b]=H,i.directionalShadowMatrix[b]=N.shadow.matrix,O++}i.directional[b]=K,b++}else if(N.isSpotLight){const K=e.get(N);K.position.setFromMatrixPosition(N.matrixWorld),K.color.copy(V).multiplyScalar(U*D),K.distance=F,K.coneCos=Math.cos(N.angle),K.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),K.decay=N.decay,i.spot[x]=K;const ie=N.shadow;if(N.map&&(i.spotLightMap[P]=N.map,P++,ie.updateMatrices(N),N.castShadow&&I++),i.spotLightMatrix[x]=ie.matrix,N.castShadow){const he=n.get(N);he.shadowBias=ie.bias,he.shadowNormalBias=ie.normalBias,he.shadowRadius=ie.radius,he.shadowMapSize=ie.mapSize,i.spotShadow[x]=he,i.spotShadowMap[x]=H,E++}x++}else if(N.isRectAreaLight){const K=e.get(N);K.color.copy(V).multiplyScalar(U),K.halfWidth.set(N.width*.5,0,0),K.halfHeight.set(0,N.height*.5,0),i.rectArea[S]=K,S++}else if(N.isPointLight){const K=e.get(N);if(K.color.copy(N.color).multiplyScalar(N.intensity*D),K.distance=N.distance,K.decay=N.decay,N.castShadow){const ie=N.shadow,he=n.get(N);he.shadowBias=ie.bias,he.shadowNormalBias=ie.normalBias,he.shadowRadius=ie.radius,he.shadowMapSize=ie.mapSize,he.shadowCameraNear=ie.camera.near,he.shadowCameraFar=ie.camera.far,i.pointShadow[w]=he,i.pointShadowMap[w]=H,i.pointShadowMatrix[w]=N.shadow.matrix,T++}i.point[w]=K,w++}else if(N.isHemisphereLight){const K=e.get(N);K.skyColor.copy(N.color).multiplyScalar(U*D),K.groundColor.copy(N.groundColor).multiplyScalar(U*D),i.hemi[_]=K,_++}}S>0&&(r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ct.LTC_FLOAT_1,i.rectAreaLTC2=ct.LTC_FLOAT_2):(i.rectAreaLTC1=ct.LTC_HALF_1,i.rectAreaLTC2=ct.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=y;const M=i.hash;(M.directionalLength!==b||M.pointLength!==w||M.spotLength!==x||M.rectAreaLength!==S||M.hemiLength!==_||M.numDirectionalShadows!==O||M.numPointShadows!==T||M.numSpotShadows!==E||M.numSpotMaps!==P||M.numLightProbes!==A)&&(i.directional.length=b,i.spot.length=x,i.rectArea.length=S,i.point.length=w,i.hemi.length=_,i.directionalShadow.length=O,i.directionalShadowMap.length=O,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=O,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=E+P-I,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=I,i.numLightProbes=A,M.directionalLength=b,M.pointLength=w,M.spotLength=x,M.rectAreaLength=S,M.hemiLength=_,M.numDirectionalShadows=O,M.numPointShadows=T,M.numSpotShadows=E,M.numSpotMaps=P,M.numLightProbes=A,i.version=Xge++)}function h(d,f){let p=0,g=0,y=0,b=0,w=0;const x=f.matrixWorldInverse;for(let S=0,_=d.length;S<_;S++){const O=d[S];if(O.isDirectionalLight){const T=i.directional[p];T.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),p++}else if(O.isSpotLight){const T=i.spot[y];T.position.setFromMatrixPosition(O.matrixWorld),T.position.applyMatrix4(x),T.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),y++}else if(O.isRectAreaLight){const T=i.rectArea[b];T.position.setFromMatrixPosition(O.matrixWorld),T.position.applyMatrix4(x),a.identity(),o.copy(O.matrixWorld),o.premultiply(x),a.extractRotation(o),T.halfWidth.set(O.width*.5,0,0),T.halfHeight.set(0,O.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),b++}else if(O.isPointLight){const T=i.point[g];T.position.setFromMatrixPosition(O.matrixWorld),T.position.applyMatrix4(x),g++}else if(O.isHemisphereLight){const T=i.hemi[w];T.direction.setFromMatrixPosition(O.matrixWorld),T.direction.transformDirection(x),w++}}}return{setup:c,setupView:h,state:i}}function H6(r){const e=new Qge(r),n=[],i=[];function s(f){d.camera=f,n.length=0,i.length=0}function o(f){n.push(f)}function a(f){i.push(f)}function c(f){e.setup(n,f)}function h(f){e.setupView(n,f)}const d={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:d,setupLights:c,setupLightsView:h,pushLight:o,pushShadow:a}}function Hge(r){let e=new WeakMap;function n(s,o=0){const a=e.get(s);let c;return a===void 0?(c=new H6(r),e.set(s,[c])):o>=a.length?(c=new H6(r),a.push(c)):c=a[o],c}function i(){e=new WeakMap}return{get:n,dispose:i}}class _P extends as{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=IF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class SP extends as{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Gge=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Yge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jge(r,e,n){let i=new hv;const s=new Xe,o=new Xe,a=new Oi,c=new _P({depthPacking:DF}),h=new SP,d={},f=n.maxTextureSize,p={[oc]:ss,[ss]:oc,[Hs]:Hs},g=new Ps({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:Gge,fragmentShader:Yge}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const b=new si;b.setAttribute("position",new Di(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new sn(b,g),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sP;let S=this.type;this.render=function(P,I,A){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||P.length===0)return;const D=r.getRenderTarget(),M=r.getActiveCubeFace(),$=r.getActiveMipmapLevel(),L=r.state;L.setBlending(Jl),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const N=S!==Za&&this.type===Za,V=S===Za&&this.type!==Za;for(let U=0,F=P.length;U<F;U++){const H=P[U],K=H.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;s.copy(K.mapSize);const ie=K.getFrameExtents();if(s.multiply(ie),o.copy(K.mapSize),(s.x>f||s.y>f)&&(s.x>f&&(o.x=Math.floor(f/ie.x),s.x=o.x*ie.x,K.mapSize.x=o.x),s.y>f&&(o.y=Math.floor(f/ie.y),s.y=o.y*ie.y,K.mapSize.y=o.y)),K.map===null||N===!0||V===!0){const me=this.type!==Za?{minFilter:vr,magFilter:vr}:{};K.map!==null&&K.map.dispose(),K.map=new ta(s.x,s.y,me),K.map.texture.name=H.name+".shadowMap",K.camera.updateProjectionMatrix()}r.setRenderTarget(K.map),r.clear();const he=K.getViewportCount();for(let me=0;me<he;me++){const Pe=K.getViewport(me);a.set(o.x*Pe.x,o.y*Pe.y,o.x*Pe.z,o.y*Pe.w),L.viewport(a),K.updateMatrices(H,me),i=K.getFrustum(),T(I,A,K.camera,H,this.type)}K.isPointLightShadow!==!0&&this.type===Za&&_(K,A),K.needsUpdate=!1}S=this.type,x.needsUpdate=!1,r.setRenderTarget(D,M,$)};function _(P,I){const A=e.update(w);g.defines.VSM_SAMPLES!==P.blurSamples&&(g.defines.VSM_SAMPLES=P.blurSamples,y.defines.VSM_SAMPLES=P.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new ta(s.x,s.y)),g.uniforms.shadow_pass.value=P.map.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,r.setRenderTarget(P.mapPass),r.clear(),r.renderBufferDirect(I,null,A,g,w,null),y.uniforms.shadow_pass.value=P.mapPass.texture,y.uniforms.resolution.value=P.mapSize,y.uniforms.radius.value=P.radius,r.setRenderTarget(P.map),r.clear(),r.renderBufferDirect(I,null,A,y,w,null)}function O(P,I,A,D){let M=null;const $=A.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if($!==void 0)M=$;else if(M=A.isPointLight===!0?h:c,r.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const L=M.uuid,N=I.uuid;let V=d[L];V===void 0&&(V={},d[L]=V);let U=V[N];U===void 0&&(U=M.clone(),V[N]=U,I.addEventListener("dispose",E)),M=U}if(M.visible=I.visible,M.wireframe=I.wireframe,D===Za?M.side=I.shadowSide!==null?I.shadowSide:I.side:M.side=I.shadowSide!==null?I.shadowSide:p[I.side],M.alphaMap=I.alphaMap,M.alphaTest=I.alphaTest,M.map=I.map,M.clipShadows=I.clipShadows,M.clippingPlanes=I.clippingPlanes,M.clipIntersection=I.clipIntersection,M.displacementMap=I.displacementMap,M.displacementScale=I.displacementScale,M.displacementBias=I.displacementBias,M.wireframeLinewidth=I.wireframeLinewidth,M.linewidth=I.linewidth,A.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const L=r.properties.get(M);L.light=A}return M}function T(P,I,A,D,M){if(P.visible===!1)return;if(P.layers.test(I.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&M===Za)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,P.matrixWorld);const N=e.update(P),V=P.material;if(Array.isArray(V)){const U=N.groups;for(let F=0,H=U.length;F<H;F++){const K=U[F],ie=V[K.materialIndex];if(ie&&ie.visible){const he=O(P,ie,D,M);P.onBeforeShadow(r,P,I,A,N,he,K),r.renderBufferDirect(A,null,N,he,P,K),P.onAfterShadow(r,P,I,A,N,he,K)}}}else if(V.visible){const U=O(P,V,D,M);P.onBeforeShadow(r,P,I,A,N,U,null),r.renderBufferDirect(A,null,N,U,P,null),P.onAfterShadow(r,P,I,A,N,U,null)}}const L=P.children;for(let N=0,V=L.length;N<V;N++)T(L[N],I,A,D,M)}function E(P){P.target.removeEventListener("dispose",E);for(const A in d){const D=d[A],M=P.target.uuid;M in D&&(D[M].dispose(),delete D[M])}}}function qge(r){function e(){let ge=!1;const Ue=new Oi;let We=null;const nt=new Oi(0,0,0,0);return{setMask:function(pt){We!==pt&&!ge&&(r.colorMask(pt,pt,pt,pt),We=pt)},setLocked:function(pt){ge=pt},setClear:function(pt,Ci,ki,Li,kn){kn===!0&&(pt*=Li,Ci*=Li,ki*=Li),Ue.set(pt,Ci,ki,Li),nt.equals(Ue)===!1&&(r.clearColor(pt,Ci,ki,Li),nt.copy(Ue))},reset:function(){ge=!1,We=null,nt.set(-1,0,0,0)}}}function n(){let ge=!1,Ue=null,We=null,nt=null;return{setTest:function(pt){pt?ke(r.DEPTH_TEST):J(r.DEPTH_TEST)},setMask:function(pt){Ue!==pt&&!ge&&(r.depthMask(pt),Ue=pt)},setFunc:function(pt){if(We!==pt){switch(pt){case sF:r.depthFunc(r.NEVER);break;case oF:r.depthFunc(r.ALWAYS);break;case aF:r.depthFunc(r.LESS);break;case ly:r.depthFunc(r.LEQUAL);break;case lF:r.depthFunc(r.EQUAL);break;case cF:r.depthFunc(r.GEQUAL);break;case hF:r.depthFunc(r.GREATER);break;case uF:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}We=pt}},setLocked:function(pt){ge=pt},setClear:function(pt){nt!==pt&&(r.clearDepth(pt),nt=pt)},reset:function(){ge=!1,Ue=null,We=null,nt=null}}}function i(){let ge=!1,Ue=null,We=null,nt=null,pt=null,Ci=null,ki=null,Li=null,kn=null;return{setTest:function(xi){ge||(xi?ke(r.STENCIL_TEST):J(r.STENCIL_TEST))},setMask:function(xi){Ue!==xi&&!ge&&(r.stencilMask(xi),Ue=xi)},setFunc:function(xi,kr,Rn){(We!==xi||nt!==kr||pt!==Rn)&&(r.stencilFunc(xi,kr,Rn),We=xi,nt=kr,pt=Rn)},setOp:function(xi,kr,Rn){(Ci!==xi||ki!==kr||Li!==Rn)&&(r.stencilOp(xi,kr,Rn),Ci=xi,ki=kr,Li=Rn)},setLocked:function(xi){ge=xi},setClear:function(xi){kn!==xi&&(r.clearStencil(xi),kn=xi)},reset:function(){ge=!1,Ue=null,We=null,nt=null,pt=null,Ci=null,ki=null,Li=null,kn=null}}}const s=new e,o=new n,a=new i,c=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,g=[],y=null,b=!1,w=null,x=null,S=null,_=null,O=null,T=null,E=null,P=new rt(0,0,0),I=0,A=!1,D=null,M=null,$=null,L=null,N=null;const V=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,F=0;const H=r.getParameter(r.VERSION);H.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(H)[1]),U=F>=1):H.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),U=F>=2);let K=null,ie={};const he=r.getParameter(r.SCISSOR_BOX),me=r.getParameter(r.VIEWPORT),Pe=new Oi().fromArray(he),_e=new Oi().fromArray(me);function ue(ge,Ue,We,nt){const pt=new Uint8Array(4),Ci=r.createTexture();r.bindTexture(ge,Ci),r.texParameteri(ge,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(ge,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let ki=0;ki<We;ki++)ge===r.TEXTURE_3D||ge===r.TEXTURE_2D_ARRAY?r.texImage3D(Ue,0,r.RGBA,1,1,nt,0,r.RGBA,r.UNSIGNED_BYTE,pt):r.texImage2D(Ue+ki,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,pt);return Ci}const Se={};Se[r.TEXTURE_2D]=ue(r.TEXTURE_2D,r.TEXTURE_2D,1),Se[r.TEXTURE_CUBE_MAP]=ue(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),Se[r.TEXTURE_2D_ARRAY]=ue(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),Se[r.TEXTURE_3D]=ue(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ke(r.DEPTH_TEST),o.setFunc(ly),le(!1),pe(aT),ke(r.CULL_FACE),Q(Jl);function ke(ge){d[ge]!==!0&&(r.enable(ge),d[ge]=!0)}function J(ge){d[ge]!==!1&&(r.disable(ge),d[ge]=!1)}function q(ge,Ue){return f[ge]!==Ue?(r.bindFramebuffer(ge,Ue),f[ge]=Ue,ge===r.DRAW_FRAMEBUFFER&&(f[r.FRAMEBUFFER]=Ue),ge===r.FRAMEBUFFER&&(f[r.DRAW_FRAMEBUFFER]=Ue),!0):!1}function z(ge,Ue){let We=g,nt=!1;if(ge){We=p.get(Ue),We===void 0&&(We=[],p.set(Ue,We));const pt=ge.textures;if(We.length!==pt.length||We[0]!==r.COLOR_ATTACHMENT0){for(let Ci=0,ki=pt.length;Ci<ki;Ci++)We[Ci]=r.COLOR_ATTACHMENT0+Ci;We.length=pt.length,nt=!0}}else We[0]!==r.BACK&&(We[0]=r.BACK,nt=!0);nt&&r.drawBuffers(We)}function X(ge){return y!==ge?(r.useProgram(ge),y=ge,!0):!1}const te={[ch]:r.FUNC_ADD,[zU]:r.FUNC_SUBTRACT,[XU]:r.FUNC_REVERSE_SUBTRACT};te[WU]=r.MIN,te[QU]=r.MAX;const se={[HU]:r.ZERO,[GU]:r.ONE,[YU]:r.SRC_COLOR,[xO]:r.SRC_ALPHA,[eF]:r.SRC_ALPHA_SATURATE,[KU]:r.DST_COLOR,[qU]:r.DST_ALPHA,[jU]:r.ONE_MINUS_SRC_COLOR,[OO]:r.ONE_MINUS_SRC_ALPHA,[JU]:r.ONE_MINUS_DST_COLOR,[ZU]:r.ONE_MINUS_DST_ALPHA,[tF]:r.CONSTANT_COLOR,[iF]:r.ONE_MINUS_CONSTANT_COLOR,[nF]:r.CONSTANT_ALPHA,[rF]:r.ONE_MINUS_CONSTANT_ALPHA};function Q(ge,Ue,We,nt,pt,Ci,ki,Li,kn,xi){if(ge===Jl){b===!0&&(J(r.BLEND),b=!1);return}if(b===!1&&(ke(r.BLEND),b=!0),ge!==FU){if(ge!==w||xi!==A){if((x!==ch||O!==ch)&&(r.blendEquation(r.FUNC_ADD),x=ch,O=ch),xi)switch(ge){case td:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case bO:r.blendFunc(r.ONE,r.ONE);break;case lT:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case cT:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}else switch(ge){case td:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case bO:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case lT:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case cT:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}S=null,_=null,T=null,E=null,P.set(0,0,0),I=0,w=ge,A=xi}return}pt=pt||Ue,Ci=Ci||We,ki=ki||nt,(Ue!==x||pt!==O)&&(r.blendEquationSeparate(te[Ue],te[pt]),x=Ue,O=pt),(We!==S||nt!==_||Ci!==T||ki!==E)&&(r.blendFuncSeparate(se[We],se[nt],se[Ci],se[ki]),S=We,_=nt,T=Ci,E=ki),(Li.equals(P)===!1||kn!==I)&&(r.blendColor(Li.r,Li.g,Li.b,kn),P.copy(Li),I=kn),w=ge,A=!1}function Z(ge,Ue){ge.side===Hs?J(r.CULL_FACE):ke(r.CULL_FACE);let We=ge.side===ss;Ue&&(We=!We),le(We),ge.blending===td&&ge.transparent===!1?Q(Jl):Q(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),o.setFunc(ge.depthFunc),o.setTest(ge.depthTest),o.setMask(ge.depthWrite),s.setMask(ge.colorWrite);const nt=ge.stencilWrite;a.setTest(nt),nt&&(a.setMask(ge.stencilWriteMask),a.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),a.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),Ee(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?ke(r.SAMPLE_ALPHA_TO_COVERAGE):J(r.SAMPLE_ALPHA_TO_COVERAGE)}function le(ge){D!==ge&&(ge?r.frontFace(r.CW):r.frontFace(r.CCW),D=ge)}function pe(ge){ge!==BU?(ke(r.CULL_FACE),ge!==M&&(ge===aT?r.cullFace(r.BACK):ge===UU?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):J(r.CULL_FACE),M=ge}function be(ge){ge!==$&&(U&&r.lineWidth(ge),$=ge)}function Ee(ge,Ue,We){ge?(ke(r.POLYGON_OFFSET_FILL),(L!==Ue||N!==We)&&(r.polygonOffset(Ue,We),L=Ue,N=We)):J(r.POLYGON_OFFSET_FILL)}function ee(ge){ge?ke(r.SCISSOR_TEST):J(r.SCISSOR_TEST)}function Y(ge){ge===void 0&&(ge=r.TEXTURE0+V-1),K!==ge&&(r.activeTexture(ge),K=ge)}function de(ge,Ue,We){We===void 0&&(K===null?We=r.TEXTURE0+V-1:We=K);let nt=ie[We];nt===void 0&&(nt={type:void 0,texture:void 0},ie[We]=nt),(nt.type!==ge||nt.texture!==Ue)&&(K!==We&&(r.activeTexture(We),K=We),r.bindTexture(ge,Ue||Se[ge]),nt.type=ge,nt.texture=Ue)}function fe(){const ge=ie[K];ge!==void 0&&ge.type!==void 0&&(r.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function we(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Me(){try{r.compressedTexImage3D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Qe(){try{r.texSubImage2D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Le(){try{r.texSubImage3D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ze(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ot(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ye(){try{r.texStorage2D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function st(){try{r.texStorage3D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Mt(){try{r.texImage2D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Et(){try{r.texImage3D.apply(r,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ft(ge){Pe.equals(ge)===!1&&(r.scissor(ge.x,ge.y,ge.z,ge.w),Pe.copy(ge))}function Wt(ge){_e.equals(ge)===!1&&(r.viewport(ge.x,ge.y,ge.z,ge.w),_e.copy(ge))}function hi(ge,Ue){let We=h.get(Ue);We===void 0&&(We=new WeakMap,h.set(Ue,We));let nt=We.get(ge);nt===void 0&&(nt=r.getUniformBlockIndex(Ue,ge.name),We.set(ge,nt))}function Ce(ge,Ue){const nt=h.get(Ue).get(ge);c.get(Ue)!==nt&&(r.uniformBlockBinding(Ue,nt,ge.__bindingPointIndex),c.set(Ue,nt))}function Be(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),d={},K=null,ie={},f={},p=new WeakMap,g=[],y=null,b=!1,w=null,x=null,S=null,_=null,O=null,T=null,E=null,P=new rt(0,0,0),I=0,A=!1,D=null,M=null,$=null,L=null,N=null,Pe.set(0,0,r.canvas.width,r.canvas.height),_e.set(0,0,r.canvas.width,r.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ke,disable:J,bindFramebuffer:q,drawBuffers:z,useProgram:X,setBlending:Q,setMaterial:Z,setFlipSided:le,setCullFace:pe,setLineWidth:be,setPolygonOffset:Ee,setScissorTest:ee,activeTexture:Y,bindTexture:de,unbindTexture:fe,compressedTexImage2D:we,compressedTexImage3D:Me,texImage2D:Mt,texImage3D:Et,updateUBOMapping:hi,uniformBlockBinding:Ce,texStorage2D:Ye,texStorage3D:st,texSubImage2D:Qe,texSubImage3D:Le,compressedTexSubImage2D:ze,compressedTexSubImage3D:ot,scissor:ft,viewport:Wt,reset:Be}}function Zge(r,e,n,i,s,o,a){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Xe,f=new WeakMap;let p;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(ee,Y){return y?new OffscreenCanvas(ee,Y):gy("canvas")}function w(ee,Y,de){let fe=1;const we=Ee(ee);if((we.width>de||we.height>de)&&(fe=de/Math.max(we.width,we.height)),fe<1)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap||typeof VideoFrame<"u"&&ee instanceof VideoFrame){const Me=Math.floor(fe*we.width),Qe=Math.floor(fe*we.height);p===void 0&&(p=b(Me,Qe));const Le=Y?b(Me,Qe):p;return Le.width=Me,Le.height=Qe,Le.getContext("2d").drawImage(ee,0,0,Me,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+we.width+"x"+we.height+") to ("+Me+"x"+Qe+")."),Le}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+we.width+"x"+we.height+")."),ee;return ee}function x(ee){return ee.generateMipmaps&&ee.minFilter!==vr&&ee.minFilter!==Zn}function S(ee){r.generateMipmap(ee)}function _(ee,Y,de,fe,we=!1){if(ee!==null){if(r[ee]!==void 0)return r[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let Me=Y;if(Y===r.RED&&(de===r.FLOAT&&(Me=r.R32F),de===r.HALF_FLOAT&&(Me=r.R16F),de===r.UNSIGNED_BYTE&&(Me=r.R8)),Y===r.RED_INTEGER&&(de===r.UNSIGNED_BYTE&&(Me=r.R8UI),de===r.UNSIGNED_SHORT&&(Me=r.R16UI),de===r.UNSIGNED_INT&&(Me=r.R32UI),de===r.BYTE&&(Me=r.R8I),de===r.SHORT&&(Me=r.R16I),de===r.INT&&(Me=r.R32I)),Y===r.RG&&(de===r.FLOAT&&(Me=r.RG32F),de===r.HALF_FLOAT&&(Me=r.RG16F),de===r.UNSIGNED_BYTE&&(Me=r.RG8)),Y===r.RG_INTEGER&&(de===r.UNSIGNED_BYTE&&(Me=r.RG8UI),de===r.UNSIGNED_SHORT&&(Me=r.RG16UI),de===r.UNSIGNED_INT&&(Me=r.RG32UI),de===r.BYTE&&(Me=r.RG8I),de===r.SHORT&&(Me=r.RG16I),de===r.INT&&(Me=r.RG32I)),Y===r.RGB&&de===r.UNSIGNED_INT_5_9_9_9_REV&&(Me=r.RGB9_E5),Y===r.RGBA){const Qe=we?uy:tn.getTransfer(fe);de===r.FLOAT&&(Me=r.RGBA32F),de===r.HALF_FLOAT&&(Me=r.RGBA16F),de===r.UNSIGNED_BYTE&&(Me=Qe===mn?r.SRGB8_ALPHA8:r.RGBA8),de===r.UNSIGNED_SHORT_4_4_4_4&&(Me=r.RGBA4),de===r.UNSIGNED_SHORT_5_5_5_1&&(Me=r.RGB5_A1)}return(Me===r.R16F||Me===r.R32F||Me===r.RG16F||Me===r.RG32F||Me===r.RGBA16F||Me===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Me}function O(ee,Y){return x(ee)===!0||ee.isFramebufferTexture&&ee.minFilter!==vr&&ee.minFilter!==Zn?Math.log2(Math.max(Y.width,Y.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?Y.mipmaps.length:1}function T(ee){const Y=ee.target;Y.removeEventListener("dispose",T),P(Y),Y.isVideoTexture&&f.delete(Y)}function E(ee){const Y=ee.target;Y.removeEventListener("dispose",E),A(Y)}function P(ee){const Y=i.get(ee);if(Y.__webglInit===void 0)return;const de=ee.source,fe=g.get(de);if(fe){const we=fe[Y.__cacheKey];we.usedTimes--,we.usedTimes===0&&I(ee),Object.keys(fe).length===0&&g.delete(de)}i.remove(ee)}function I(ee){const Y=i.get(ee);r.deleteTexture(Y.__webglTexture);const de=ee.source,fe=g.get(de);delete fe[Y.__cacheKey],a.memory.textures--}function A(ee){const Y=i.get(ee);if(ee.depthTexture&&ee.depthTexture.dispose(),ee.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++){if(Array.isArray(Y.__webglFramebuffer[fe]))for(let we=0;we<Y.__webglFramebuffer[fe].length;we++)r.deleteFramebuffer(Y.__webglFramebuffer[fe][we]);else r.deleteFramebuffer(Y.__webglFramebuffer[fe]);Y.__webglDepthbuffer&&r.deleteRenderbuffer(Y.__webglDepthbuffer[fe])}else{if(Array.isArray(Y.__webglFramebuffer))for(let fe=0;fe<Y.__webglFramebuffer.length;fe++)r.deleteFramebuffer(Y.__webglFramebuffer[fe]);else r.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&r.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let fe=0;fe<Y.__webglColorRenderbuffer.length;fe++)Y.__webglColorRenderbuffer[fe]&&r.deleteRenderbuffer(Y.__webglColorRenderbuffer[fe]);Y.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const de=ee.textures;for(let fe=0,we=de.length;fe<we;fe++){const Me=i.get(de[fe]);Me.__webglTexture&&(r.deleteTexture(Me.__webglTexture),a.memory.textures--),i.remove(de[fe])}i.remove(ee)}let D=0;function M(){D=0}function $(){const ee=D;return ee>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+s.maxTextures),D+=1,ee}function L(ee){const Y=[];return Y.push(ee.wrapS),Y.push(ee.wrapT),Y.push(ee.wrapR||0),Y.push(ee.magFilter),Y.push(ee.minFilter),Y.push(ee.anisotropy),Y.push(ee.internalFormat),Y.push(ee.format),Y.push(ee.type),Y.push(ee.generateMipmaps),Y.push(ee.premultiplyAlpha),Y.push(ee.flipY),Y.push(ee.unpackAlignment),Y.push(ee.colorSpace),Y.join()}function N(ee,Y){const de=i.get(ee);if(ee.isVideoTexture&&pe(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&de.__version!==ee.version){const fe=ee.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Pe(de,ee,Y);return}}n.bindTexture(r.TEXTURE_2D,de.__webglTexture,r.TEXTURE0+Y)}function V(ee,Y){const de=i.get(ee);if(ee.version>0&&de.__version!==ee.version){Pe(de,ee,Y);return}n.bindTexture(r.TEXTURE_2D_ARRAY,de.__webglTexture,r.TEXTURE0+Y)}function U(ee,Y){const de=i.get(ee);if(ee.version>0&&de.__version!==ee.version){Pe(de,ee,Y);return}n.bindTexture(r.TEXTURE_3D,de.__webglTexture,r.TEXTURE0+Y)}function F(ee,Y){const de=i.get(ee);if(ee.version>0&&de.__version!==ee.version){_e(de,ee,Y);return}n.bindTexture(r.TEXTURE_CUBE_MAP,de.__webglTexture,r.TEXTURE0+Y)}const H={[Ph]:r.REPEAT,[_s]:r.CLAMP_TO_EDGE,[wp]:r.MIRRORED_REPEAT},K={[vr]:r.NEAREST,[Aw]:r.NEAREST_MIPMAP_NEAREST,[zu]:r.NEAREST_MIPMAP_LINEAR,[Zn]:r.LINEAR,[tp]:r.LINEAR_MIPMAP_NEAREST,[Ca]:r.LINEAR_MIPMAP_LINEAR},ie={[$F]:r.NEVER,[zF]:r.ALWAYS,[VF]:r.LESS,[yP]:r.LEQUAL,[LF]:r.EQUAL,[FF]:r.GEQUAL,[BF]:r.GREATER,[UF]:r.NOTEQUAL};function he(ee,Y){if(Y.type===Go&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===Zn||Y.magFilter===tp||Y.magFilter===zu||Y.magFilter===Ca||Y.minFilter===Zn||Y.minFilter===tp||Y.minFilter===zu||Y.minFilter===Ca)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(ee,r.TEXTURE_WRAP_S,H[Y.wrapS]),r.texParameteri(ee,r.TEXTURE_WRAP_T,H[Y.wrapT]),(ee===r.TEXTURE_3D||ee===r.TEXTURE_2D_ARRAY)&&r.texParameteri(ee,r.TEXTURE_WRAP_R,H[Y.wrapR]),r.texParameteri(ee,r.TEXTURE_MAG_FILTER,K[Y.magFilter]),r.texParameteri(ee,r.TEXTURE_MIN_FILTER,K[Y.minFilter]),Y.compareFunction&&(r.texParameteri(ee,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(ee,r.TEXTURE_COMPARE_FUNC,ie[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===vr||Y.minFilter!==zu&&Y.minFilter!==Ca||Y.type===Go&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||i.get(Y).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");r.texParameterf(ee,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,s.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy}}}function me(ee,Y){let de=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,Y.addEventListener("dispose",T));const fe=Y.source;let we=g.get(fe);we===void 0&&(we={},g.set(fe,we));const Me=L(Y);if(Me!==ee.__cacheKey){we[Me]===void 0&&(we[Me]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,de=!0),we[Me].usedTimes++;const Qe=we[ee.__cacheKey];Qe!==void 0&&(we[ee.__cacheKey].usedTimes--,Qe.usedTimes===0&&I(Y)),ee.__cacheKey=Me,ee.__webglTexture=we[Me].texture}return de}function Pe(ee,Y,de){let fe=r.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(fe=r.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(fe=r.TEXTURE_3D);const we=me(ee,Y),Me=Y.source;n.bindTexture(fe,ee.__webglTexture,r.TEXTURE0+de);const Qe=i.get(Me);if(Me.version!==Qe.__version||we===!0){n.activeTexture(r.TEXTURE0+de);const Le=tn.getPrimaries(tn.workingColorSpace),ze=Y.colorSpace===Ql?null:tn.getPrimaries(Y.colorSpace),ot=Y.colorSpace===Ql||Le===ze?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Y.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Y.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ot);let Ye=w(Y.image,!1,s.maxTextureSize);Ye=be(Y,Ye);const st=o.convert(Y.format,Y.colorSpace),Mt=o.convert(Y.type);let Et=_(Y.internalFormat,st,Mt,Y.colorSpace,Y.isVideoTexture);he(fe,Y);let ft;const Wt=Y.mipmaps,hi=Y.isVideoTexture!==!0,Ce=Qe.__version===void 0||we===!0,Be=Me.dataReady,ge=O(Y,Ye);if(Y.isDepthTexture)Et=r.DEPTH_COMPONENT16,Y.type===Go?Et=r.DEPTH_COMPONENT32F:Y.type===pd?Et=r.DEPTH_COMPONENT24:Y.type===Kp&&(Et=r.DEPTH24_STENCIL8),Ce&&(hi?n.texStorage2D(r.TEXTURE_2D,1,Et,Ye.width,Ye.height):n.texImage2D(r.TEXTURE_2D,0,Et,Ye.width,Ye.height,0,st,Mt,null));else if(Y.isDataTexture)if(Wt.length>0){hi&&Ce&&n.texStorage2D(r.TEXTURE_2D,ge,Et,Wt[0].width,Wt[0].height);for(let Ue=0,We=Wt.length;Ue<We;Ue++)ft=Wt[Ue],hi?Be&&n.texSubImage2D(r.TEXTURE_2D,Ue,0,0,ft.width,ft.height,st,Mt,ft.data):n.texImage2D(r.TEXTURE_2D,Ue,Et,ft.width,ft.height,0,st,Mt,ft.data);Y.generateMipmaps=!1}else hi?(Ce&&n.texStorage2D(r.TEXTURE_2D,ge,Et,Ye.width,Ye.height),Be&&n.texSubImage2D(r.TEXTURE_2D,0,0,0,Ye.width,Ye.height,st,Mt,Ye.data)):n.texImage2D(r.TEXTURE_2D,0,Et,Ye.width,Ye.height,0,st,Mt,Ye.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){hi&&Ce&&n.texStorage3D(r.TEXTURE_2D_ARRAY,ge,Et,Wt[0].width,Wt[0].height,Ye.depth);for(let Ue=0,We=Wt.length;Ue<We;Ue++)ft=Wt[Ue],Y.format!==qs?st!==null?hi?Be&&n.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,ft.width,ft.height,Ye.depth,st,ft.data,0,0):n.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ue,Et,ft.width,ft.height,Ye.depth,0,ft.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):hi?Be&&n.texSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,ft.width,ft.height,Ye.depth,st,Mt,ft.data):n.texImage3D(r.TEXTURE_2D_ARRAY,Ue,Et,ft.width,ft.height,Ye.depth,0,st,Mt,ft.data)}else{hi&&Ce&&n.texStorage2D(r.TEXTURE_2D,ge,Et,Wt[0].width,Wt[0].height);for(let Ue=0,We=Wt.length;Ue<We;Ue++)ft=Wt[Ue],Y.format!==qs?st!==null?hi?Be&&n.compressedTexSubImage2D(r.TEXTURE_2D,Ue,0,0,ft.width,ft.height,st,ft.data):n.compressedTexImage2D(r.TEXTURE_2D,Ue,Et,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):hi?Be&&n.texSubImage2D(r.TEXTURE_2D,Ue,0,0,ft.width,ft.height,st,Mt,ft.data):n.texImage2D(r.TEXTURE_2D,Ue,Et,ft.width,ft.height,0,st,Mt,ft.data)}else if(Y.isDataArrayTexture)hi?(Ce&&n.texStorage3D(r.TEXTURE_2D_ARRAY,ge,Et,Ye.width,Ye.height,Ye.depth),Be&&n.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Ye.width,Ye.height,Ye.depth,st,Mt,Ye.data)):n.texImage3D(r.TEXTURE_2D_ARRAY,0,Et,Ye.width,Ye.height,Ye.depth,0,st,Mt,Ye.data);else if(Y.isData3DTexture)hi?(Ce&&n.texStorage3D(r.TEXTURE_3D,ge,Et,Ye.width,Ye.height,Ye.depth),Be&&n.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Ye.width,Ye.height,Ye.depth,st,Mt,Ye.data)):n.texImage3D(r.TEXTURE_3D,0,Et,Ye.width,Ye.height,Ye.depth,0,st,Mt,Ye.data);else if(Y.isFramebufferTexture){if(Ce)if(hi)n.texStorage2D(r.TEXTURE_2D,ge,Et,Ye.width,Ye.height);else{let Ue=Ye.width,We=Ye.height;for(let nt=0;nt<ge;nt++)n.texImage2D(r.TEXTURE_2D,nt,Et,Ue,We,0,st,Mt,null),Ue>>=1,We>>=1}}else if(Wt.length>0){if(hi&&Ce){const Ue=Ee(Wt[0]);n.texStorage2D(r.TEXTURE_2D,ge,Et,Ue.width,Ue.height)}for(let Ue=0,We=Wt.length;Ue<We;Ue++)ft=Wt[Ue],hi?Be&&n.texSubImage2D(r.TEXTURE_2D,Ue,0,0,st,Mt,ft):n.texImage2D(r.TEXTURE_2D,Ue,Et,st,Mt,ft);Y.generateMipmaps=!1}else if(hi){if(Ce){const Ue=Ee(Ye);n.texStorage2D(r.TEXTURE_2D,ge,Et,Ue.width,Ue.height)}Be&&n.texSubImage2D(r.TEXTURE_2D,0,0,0,st,Mt,Ye)}else n.texImage2D(r.TEXTURE_2D,0,Et,st,Mt,Ye);x(Y)&&S(fe),Qe.__version=Me.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function _e(ee,Y,de){if(Y.image.length!==6)return;const fe=me(ee,Y),we=Y.source;n.bindTexture(r.TEXTURE_CUBE_MAP,ee.__webglTexture,r.TEXTURE0+de);const Me=i.get(we);if(we.version!==Me.__version||fe===!0){n.activeTexture(r.TEXTURE0+de);const Qe=tn.getPrimaries(tn.workingColorSpace),Le=Y.colorSpace===Ql?null:tn.getPrimaries(Y.colorSpace),ze=Y.colorSpace===Ql||Qe===Le?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Y.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Y.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const ot=Y.isCompressedTexture||Y.image[0].isCompressedTexture,Ye=Y.image[0]&&Y.image[0].isDataTexture,st=[];for(let We=0;We<6;We++)!ot&&!Ye?st[We]=w(Y.image[We],!0,s.maxCubemapSize):st[We]=Ye?Y.image[We].image:Y.image[We],st[We]=be(Y,st[We]);const Mt=st[0],Et=o.convert(Y.format,Y.colorSpace),ft=o.convert(Y.type),Wt=_(Y.internalFormat,Et,ft,Y.colorSpace),hi=Y.isVideoTexture!==!0,Ce=Me.__version===void 0||fe===!0,Be=we.dataReady;let ge=O(Y,Mt);he(r.TEXTURE_CUBE_MAP,Y);let Ue;if(ot){hi&&Ce&&n.texStorage2D(r.TEXTURE_CUBE_MAP,ge,Wt,Mt.width,Mt.height);for(let We=0;We<6;We++){Ue=st[We].mipmaps;for(let nt=0;nt<Ue.length;nt++){const pt=Ue[nt];Y.format!==qs?Et!==null?hi?Be&&n.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt,0,0,pt.width,pt.height,Et,pt.data):n.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt,Wt,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):hi?Be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt,0,0,pt.width,pt.height,Et,ft,pt.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt,Wt,pt.width,pt.height,0,Et,ft,pt.data)}}}else{if(Ue=Y.mipmaps,hi&&Ce){Ue.length>0&&ge++;const We=Ee(st[0]);n.texStorage2D(r.TEXTURE_CUBE_MAP,ge,Wt,We.width,We.height)}for(let We=0;We<6;We++)if(Ye){hi?Be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,st[We].width,st[We].height,Et,ft,st[We].data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,Wt,st[We].width,st[We].height,0,Et,ft,st[We].data);for(let nt=0;nt<Ue.length;nt++){const Ci=Ue[nt].image[We].image;hi?Be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt+1,0,0,Ci.width,Ci.height,Et,ft,Ci.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt+1,Wt,Ci.width,Ci.height,0,Et,ft,Ci.data)}}else{hi?Be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,Et,ft,st[We]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,Wt,Et,ft,st[We]);for(let nt=0;nt<Ue.length;nt++){const pt=Ue[nt];hi?Be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt+1,0,0,Et,ft,pt.image[We]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+We,nt+1,Wt,Et,ft,pt.image[We])}}}x(Y)&&S(r.TEXTURE_CUBE_MAP),Me.__version=we.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function ue(ee,Y,de,fe,we,Me){const Qe=o.convert(de.format,de.colorSpace),Le=o.convert(de.type),ze=_(de.internalFormat,Qe,Le,de.colorSpace);if(!i.get(Y).__hasExternalTextures){const Ye=Math.max(1,Y.width>>Me),st=Math.max(1,Y.height>>Me);we===r.TEXTURE_3D||we===r.TEXTURE_2D_ARRAY?n.texImage3D(we,Me,ze,Ye,st,Y.depth,0,Qe,Le,null):n.texImage2D(we,Me,ze,Ye,st,0,Qe,Le,null)}n.bindFramebuffer(r.FRAMEBUFFER,ee),le(Y)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,fe,we,i.get(de).__webglTexture,0,Z(Y)):(we===r.TEXTURE_2D||we>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&we<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,fe,we,i.get(de).__webglTexture,Me),n.bindFramebuffer(r.FRAMEBUFFER,null)}function Se(ee,Y,de){if(r.bindRenderbuffer(r.RENDERBUFFER,ee),Y.depthBuffer&&!Y.stencilBuffer){let fe=r.DEPTH_COMPONENT24;if(de||le(Y)){const we=Y.depthTexture;we&&we.isDepthTexture&&(we.type===Go?fe=r.DEPTH_COMPONENT32F:we.type===pd&&(fe=r.DEPTH_COMPONENT24));const Me=Z(Y);le(Y)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Me,fe,Y.width,Y.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Me,fe,Y.width,Y.height)}else r.renderbufferStorage(r.RENDERBUFFER,fe,Y.width,Y.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,ee)}else if(Y.depthBuffer&&Y.stencilBuffer){const fe=Z(Y);de&&le(Y)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,fe,r.DEPTH24_STENCIL8,Y.width,Y.height):le(Y)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,fe,r.DEPTH24_STENCIL8,Y.width,Y.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,Y.width,Y.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,ee)}else{const fe=Y.textures;for(let we=0;we<fe.length;we++){const Me=fe[we],Qe=o.convert(Me.format,Me.colorSpace),Le=o.convert(Me.type),ze=_(Me.internalFormat,Qe,Le,Me.colorSpace),ot=Z(Y);de&&le(Y)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,ot,ze,Y.width,Y.height):le(Y)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ot,ze,Y.width,Y.height):r.renderbufferStorage(r.RENDERBUFFER,ze,Y.width,Y.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ke(ee,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(r.FRAMEBUFFER,ee),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),N(Y.depthTexture,0);const fe=i.get(Y.depthTexture).__webglTexture,we=Z(Y);if(Y.depthTexture.format===id)le(Y)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,fe,0,we):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,fe,0);else if(Y.depthTexture.format===_p)le(Y)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,fe,0,we):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,fe,0);else throw new Error("Unknown depthTexture format")}function J(ee){const Y=i.get(ee),de=ee.isWebGLCubeRenderTarget===!0;if(ee.depthTexture&&!Y.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");ke(Y.__webglFramebuffer,ee)}else if(de){Y.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)n.bindFramebuffer(r.FRAMEBUFFER,Y.__webglFramebuffer[fe]),Y.__webglDepthbuffer[fe]=r.createRenderbuffer(),Se(Y.__webglDepthbuffer[fe],ee,!1)}else n.bindFramebuffer(r.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer=r.createRenderbuffer(),Se(Y.__webglDepthbuffer,ee,!1);n.bindFramebuffer(r.FRAMEBUFFER,null)}function q(ee,Y,de){const fe=i.get(ee);Y!==void 0&&ue(fe.__webglFramebuffer,ee,ee.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),de!==void 0&&J(ee)}function z(ee){const Y=ee.texture,de=i.get(ee),fe=i.get(Y);ee.addEventListener("dispose",E);const we=ee.textures,Me=ee.isWebGLCubeRenderTarget===!0,Qe=we.length>1;if(Qe||(fe.__webglTexture===void 0&&(fe.__webglTexture=r.createTexture()),fe.__version=Y.version,a.memory.textures++),Me){de.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)if(Y.mipmaps&&Y.mipmaps.length>0){de.__webglFramebuffer[Le]=[];for(let ze=0;ze<Y.mipmaps.length;ze++)de.__webglFramebuffer[Le][ze]=r.createFramebuffer()}else de.__webglFramebuffer[Le]=r.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){de.__webglFramebuffer=[];for(let Le=0;Le<Y.mipmaps.length;Le++)de.__webglFramebuffer[Le]=r.createFramebuffer()}else de.__webglFramebuffer=r.createFramebuffer();if(Qe)for(let Le=0,ze=we.length;Le<ze;Le++){const ot=i.get(we[Le]);ot.__webglTexture===void 0&&(ot.__webglTexture=r.createTexture(),a.memory.textures++)}if(ee.samples>0&&le(ee)===!1){de.__webglMultisampledFramebuffer=r.createFramebuffer(),de.__webglColorRenderbuffer=[],n.bindFramebuffer(r.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let Le=0;Le<we.length;Le++){const ze=we[Le];de.__webglColorRenderbuffer[Le]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,de.__webglColorRenderbuffer[Le]);const ot=o.convert(ze.format,ze.colorSpace),Ye=o.convert(ze.type),st=_(ze.internalFormat,ot,Ye,ze.colorSpace,ee.isXRRenderTarget===!0),Mt=Z(ee);r.renderbufferStorageMultisample(r.RENDERBUFFER,Mt,st,ee.width,ee.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Le,r.RENDERBUFFER,de.__webglColorRenderbuffer[Le])}r.bindRenderbuffer(r.RENDERBUFFER,null),ee.depthBuffer&&(de.__webglDepthRenderbuffer=r.createRenderbuffer(),Se(de.__webglDepthRenderbuffer,ee,!0)),n.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Me){n.bindTexture(r.TEXTURE_CUBE_MAP,fe.__webglTexture),he(r.TEXTURE_CUBE_MAP,Y);for(let Le=0;Le<6;Le++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let ze=0;ze<Y.mipmaps.length;ze++)ue(de.__webglFramebuffer[Le][ze],ee,Y,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze);else ue(de.__webglFramebuffer[Le],ee,Y,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0);x(Y)&&S(r.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Qe){for(let Le=0,ze=we.length;Le<ze;Le++){const ot=we[Le],Ye=i.get(ot);n.bindTexture(r.TEXTURE_2D,Ye.__webglTexture),he(r.TEXTURE_2D,ot),ue(de.__webglFramebuffer,ee,ot,r.COLOR_ATTACHMENT0+Le,r.TEXTURE_2D,0),x(ot)&&S(r.TEXTURE_2D)}n.unbindTexture()}else{let Le=r.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(Le=ee.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),n.bindTexture(Le,fe.__webglTexture),he(Le,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let ze=0;ze<Y.mipmaps.length;ze++)ue(de.__webglFramebuffer[ze],ee,Y,r.COLOR_ATTACHMENT0,Le,ze);else ue(de.__webglFramebuffer,ee,Y,r.COLOR_ATTACHMENT0,Le,0);x(Y)&&S(Le),n.unbindTexture()}ee.depthBuffer&&J(ee)}function X(ee){const Y=ee.textures;for(let de=0,fe=Y.length;de<fe;de++){const we=Y[de];if(x(we)){const Me=ee.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Qe=i.get(we).__webglTexture;n.bindTexture(Me,Qe),S(Me),n.unbindTexture()}}}const te=[],se=[];function Q(ee){if(ee.samples>0){if(le(ee)===!1){const Y=ee.textures,de=ee.width,fe=ee.height;let we=r.COLOR_BUFFER_BIT;const Me=ee.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Qe=i.get(ee),Le=Y.length>1;if(Le)for(let ze=0;ze<Y.length;ze++)n.bindFramebuffer(r.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ze,r.RENDERBUFFER,null),n.bindFramebuffer(r.FRAMEBUFFER,Qe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+ze,r.TEXTURE_2D,null,0);n.bindFramebuffer(r.READ_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer);for(let ze=0;ze<Y.length;ze++){if(ee.resolveDepthBuffer&&(ee.depthBuffer&&(we|=r.DEPTH_BUFFER_BIT),ee.stencilBuffer&&ee.resolveStencilBuffer&&(we|=r.STENCIL_BUFFER_BIT)),Le){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Qe.__webglColorRenderbuffer[ze]);const ot=i.get(Y[ze]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ot,0)}r.blitFramebuffer(0,0,de,fe,0,0,de,fe,we,r.NEAREST),h===!0&&(te.length=0,se.length=0,te.push(r.COLOR_ATTACHMENT0+ze),ee.depthBuffer&&ee.resolveDepthBuffer===!1&&(te.push(Me),se.push(Me),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,se)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,te))}if(n.bindFramebuffer(r.READ_FRAMEBUFFER,null),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Le)for(let ze=0;ze<Y.length;ze++){n.bindFramebuffer(r.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ze,r.RENDERBUFFER,Qe.__webglColorRenderbuffer[ze]);const ot=i.get(Y[ze]).__webglTexture;n.bindFramebuffer(r.FRAMEBUFFER,Qe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+ze,r.TEXTURE_2D,ot,0)}n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer)}else if(ee.depthBuffer&&ee.resolveDepthBuffer===!1&&h){const Y=ee.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Y])}}}function Z(ee){return Math.min(s.maxSamples,ee.samples)}function le(ee){const Y=i.get(ee);return ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function pe(ee){const Y=a.render.frame;f.get(ee)!==Y&&(f.set(ee,Y),ee.update())}function be(ee,Y){const de=ee.colorSpace,fe=ee.format,we=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||de!==gc&&de!==Ql&&(tn.getTransfer(de)===mn?(fe!==qs||we!==Ea)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),Y}function Ee(ee){return typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?(d.width=ee.naturalWidth||ee.width,d.height=ee.naturalHeight||ee.height):typeof VideoFrame<"u"&&ee instanceof VideoFrame?(d.width=ee.displayWidth,d.height=ee.displayHeight):(d.width=ee.width,d.height=ee.height),d}this.allocateTextureUnit=$,this.resetTextureUnits=M,this.setTexture2D=N,this.setTexture2DArray=V,this.setTexture3D=U,this.setTextureCube=F,this.rebindTextures=q,this.setupRenderTarget=z,this.updateRenderTargetMipmap=X,this.updateMultisampleRenderTarget=Q,this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=le}function r9(r,e){function n(i,s=Ql){let o;const a=tn.getTransfer(s);if(i===Ea)return r.UNSIGNED_BYTE;if(i===hP)return r.UNSIGNED_SHORT_4_4_4_4;if(i===uP)return r.UNSIGNED_SHORT_5_5_5_1;if(i===_F)return r.UNSIGNED_INT_5_9_9_9_REV;if(i===OF)return r.BYTE;if(i===wF)return r.SHORT;if(i===lP)return r.UNSIGNED_SHORT;if(i===cP)return r.INT;if(i===pd)return r.UNSIGNED_INT;if(i===Go)return r.FLOAT;if(i===Zp)return r.HALF_FLOAT;if(i===SF)return r.ALPHA;if(i===CF)return r.RGB;if(i===qs)return r.RGBA;if(i===kF)return r.LUMINANCE;if(i===TF)return r.LUMINANCE_ALPHA;if(i===id)return r.DEPTH_COMPONENT;if(i===_p)return r.DEPTH_STENCIL;if(i===dP)return r.RED;if(i===fP)return r.RED_INTEGER;if(i===MF)return r.RG;if(i===pP)return r.RG_INTEGER;if(i===mP)return r.RGBA_INTEGER;if(i===Ax||i===Rx||i===Ix||i===Dx)if(a===mn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===Ax)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Rx)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ix)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Dx)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Ax)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Rx)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ix)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Dx)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===uT||i===dT||i===fT||i===pT)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===uT)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===dT)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===fT)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===pT)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===mT||i===gT||i===yT)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===mT||i===gT)return a===mn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===yT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===vT||i===bT||i===xT||i===OT||i===wT||i===_T||i===ST||i===CT||i===kT||i===TT||i===MT||i===ET||i===PT||i===AT)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===vT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===bT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===xT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===OT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===wT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===_T)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ST)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===CT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===kT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===TT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===MT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===ET)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===PT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===AT)return a===mn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Nx||i===RT||i===IT)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===Nx)return a===mn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===RT)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===IT)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===EF||i===DT||i===NT||i===$T)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===Nx)return o.COMPRESSED_RED_RGTC1_EXT;if(i===DT)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===NT)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===$T)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Kp?r.UNSIGNED_INT_24_8:r[i]!==void 0?r[i]:null}return{convert:n}}class s9 extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Gl=class extends Ni{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Kge={type:"move"};class BC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Gl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Gl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Gl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let s=null,o=null,a=null;const c=this._targetRay,h=this._grip,d=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(d&&e.hand){a=!0;for(const w of e.hand.values()){const x=n.getJointPose(w,i),S=this._getHandJoint(d,w);x!==null&&(S.matrix.fromArray(x.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=x.radius),S.visible=x!==null}const f=d.joints["index-finger-tip"],p=d.joints["thumb-tip"],g=f.position.distanceTo(p.position),y=.02,b=.005;d.inputState.pinching&&g>y+b?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&g<=y-b&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,i),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));c!==null&&(s=n.getPose(e.targetRaySpace,i),s===null&&o!==null&&(s=o),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(Kge)))}return c!==null&&(c.visible=s!==null),h!==null&&(h.visible=o!==null),d!==null&&(d.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Gl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}const Jge=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,e0e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class t0e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const s=new Hn,o=e.properties.get(s);o.__webglTexture=n.texture,(n.depthNear!=i.depthNear||n.depthFar!=i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=s}}render(e,n){if(this.texture!==null){if(this.mesh===null){const i=n.cameras[0].viewport,s=new Ps({vertexShader:Jge,fragmentShader:e0e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new sn(new Wh(20,20),s)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class i0e extends pl{constructor(e,n){super();const i=this;let s=null,o=1,a=null,c="local-floor",h=1,d=null,f=null,p=null,g=null,y=null,b=null;const w=new t0e,x=n.getContextAttributes();let S=null,_=null;const O=[],T=[],E=new Xe;let P=null;const I=new rn;I.layers.enable(1),I.viewport=new Oi;const A=new rn;A.layers.enable(2),A.viewport=new Oi;const D=[I,A],M=new s9;M.layers.enable(1),M.layers.enable(2);let $=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let Se=O[ue];return Se===void 0&&(Se=new BC,O[ue]=Se),Se.getTargetRaySpace()},this.getControllerGrip=function(ue){let Se=O[ue];return Se===void 0&&(Se=new BC,O[ue]=Se),Se.getGripSpace()},this.getHand=function(ue){let Se=O[ue];return Se===void 0&&(Se=new BC,O[ue]=Se),Se.getHandSpace()};function N(ue){const Se=T.indexOf(ue.inputSource);if(Se===-1)return;const ke=O[Se];ke!==void 0&&(ke.update(ue.inputSource,ue.frame,d||a),ke.dispatchEvent({type:ue.type,data:ue.inputSource}))}function V(){s.removeEventListener("select",N),s.removeEventListener("selectstart",N),s.removeEventListener("selectend",N),s.removeEventListener("squeeze",N),s.removeEventListener("squeezestart",N),s.removeEventListener("squeezeend",N),s.removeEventListener("end",V),s.removeEventListener("inputsourceschange",U);for(let ue=0;ue<O.length;ue++){const Se=T[ue];Se!==null&&(T[ue]=null,O[ue].disconnect(Se))}$=null,L=null,w.reset(),e.setRenderTarget(S),y=null,g=null,p=null,s=null,_=null,_e.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(E.width,E.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){o=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){c=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(ue){d=ue},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return p},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(ue){if(s=ue,s!==null){if(S=e.getRenderTarget(),s.addEventListener("select",N),s.addEventListener("selectstart",N),s.addEventListener("selectend",N),s.addEventListener("squeeze",N),s.addEventListener("squeezestart",N),s.addEventListener("squeezeend",N),s.addEventListener("end",V),s.addEventListener("inputsourceschange",U),x.xrCompatible!==!0&&await n.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(E),s.renderState.layers===void 0){const Se={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};y=new XRWebGLLayer(s,n,Se),s.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),_=new ta(y.framebufferWidth,y.framebufferHeight,{format:qs,type:Ea,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let Se=null,ke=null,J=null;x.depth&&(J=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Se=x.stencil?_p:id,ke=x.stencil?Kp:pd);const q={colorFormat:n.RGBA8,depthFormat:J,scaleFactor:o};p=new XRWebGLBinding(s,n),g=p.createProjectionLayer(q),s.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),_=new ta(g.textureWidth,g.textureHeight,{format:qs,type:Ea,depthTexture:new wP(g.textureWidth,g.textureHeight,ke,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(h),d=null,a=await s.requestReferenceSpace(c),_e.setContext(s),_e.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function U(ue){for(let Se=0;Se<ue.removed.length;Se++){const ke=ue.removed[Se],J=T.indexOf(ke);J>=0&&(T[J]=null,O[J].disconnect(ke))}for(let Se=0;Se<ue.added.length;Se++){const ke=ue.added[Se];let J=T.indexOf(ke);if(J===-1){for(let z=0;z<O.length;z++)if(z>=T.length){T.push(ke),J=z;break}else if(T[z]===null){T[z]=ke,J=z;break}if(J===-1)break}const q=O[J];q&&q.connect(ke)}}const F=new re,H=new re;function K(ue,Se,ke){F.setFromMatrixPosition(Se.matrixWorld),H.setFromMatrixPosition(ke.matrixWorld);const J=F.distanceTo(H),q=Se.projectionMatrix.elements,z=ke.projectionMatrix.elements,X=q[14]/(q[10]-1),te=q[14]/(q[10]+1),se=(q[9]+1)/q[5],Q=(q[9]-1)/q[5],Z=(q[8]-1)/q[0],le=(z[8]+1)/z[0],pe=X*Z,be=X*le,Ee=J/(-Z+le),ee=Ee*-Z;Se.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(ee),ue.translateZ(Ee),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert();const Y=X+Ee,de=te+Ee,fe=pe-ee,we=be+(J-ee),Me=se*te/de*Y,Qe=Q*te/de*Y;ue.projectionMatrix.makePerspective(fe,we,Me,Qe,Y,de),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}function ie(ue,Se){Se===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(Se.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(s===null)return;w.texture!==null&&(ue.near=w.depthNear,ue.far=w.depthFar),M.near=A.near=I.near=ue.near,M.far=A.far=I.far=ue.far,($!==M.near||L!==M.far)&&(s.updateRenderState({depthNear:M.near,depthFar:M.far}),$=M.near,L=M.far,I.near=$,I.far=L,A.near=$,A.far=L,I.updateProjectionMatrix(),A.updateProjectionMatrix(),ue.updateProjectionMatrix());const Se=ue.parent,ke=M.cameras;ie(M,Se);for(let J=0;J<ke.length;J++)ie(ke[J],Se);ke.length===2?K(M,I,A):M.projectionMatrix.copy(I.projectionMatrix),he(ue,M,Se)};function he(ue,Se,ke){ke===null?ue.matrix.copy(Se.matrixWorld):(ue.matrix.copy(ke.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(Se.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(Se.projectionMatrix),ue.projectionMatrixInverse.copy(Se.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=kp*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(g===null&&y===null))return h},this.setFoveation=function(ue){h=ue,g!==null&&(g.fixedFoveation=ue),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ue)},this.hasDepthSensing=function(){return w.texture!==null};let me=null;function Pe(ue,Se){if(f=Se.getViewerPose(d||a),b=Se,f!==null){const ke=f.views;y!==null&&(e.setRenderTargetFramebuffer(_,y.framebuffer),e.setRenderTarget(_));let J=!1;ke.length!==M.cameras.length&&(M.cameras.length=0,J=!0);for(let z=0;z<ke.length;z++){const X=ke[z];let te=null;if(y!==null)te=y.getViewport(X);else{const Q=p.getViewSubImage(g,X);te=Q.viewport,z===0&&(e.setRenderTargetTextures(_,Q.colorTexture,g.ignoreDepthValues?void 0:Q.depthStencilTexture),e.setRenderTarget(_))}let se=D[z];se===void 0&&(se=new rn,se.layers.enable(z),se.viewport=new Oi,D[z]=se),se.matrix.fromArray(X.transform.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale),se.projectionMatrix.fromArray(X.projectionMatrix),se.projectionMatrixInverse.copy(se.projectionMatrix).invert(),se.viewport.set(te.x,te.y,te.width,te.height),z===0&&(M.matrix.copy(se.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),J===!0&&M.cameras.push(se)}const q=s.enabledFeatures;if(q&&q.includes("depth-sensing")){const z=p.getDepthInformation(ke[0]);z&&z.isValid&&z.texture&&w.init(e,z,s.renderState)}}for(let ke=0;ke<O.length;ke++){const J=T[ke],q=O[ke];J!==null&&q!==void 0&&q.update(J,Se,d||a)}w.render(e,M),me&&me(ue,Se),Se.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Se}),b=null}const _e=new KF;_e.setAnimationLoop(Pe),this.setAnimationLoop=function(ue){me=ue},this.dispose=function(){}}}const vu=new br,n0e=new gt;function r0e(r,e){function n(x,S){x.matrixAutoUpdate===!0&&x.updateMatrix(),S.value.copy(x.matrix)}function i(x,S){S.color.getRGB(x.fogColor.value,jF(r)),S.isFog?(x.fogNear.value=S.near,x.fogFar.value=S.far):S.isFogExp2&&(x.fogDensity.value=S.density)}function s(x,S,_,O,T){S.isMeshBasicMaterial||S.isMeshLambertMaterial?o(x,S):S.isMeshToonMaterial?(o(x,S),p(x,S)):S.isMeshPhongMaterial?(o(x,S),f(x,S)):S.isMeshStandardMaterial?(o(x,S),g(x,S),S.isMeshPhysicalMaterial&&y(x,S,T)):S.isMeshMatcapMaterial?(o(x,S),b(x,S)):S.isMeshDepthMaterial?o(x,S):S.isMeshDistanceMaterial?(o(x,S),w(x,S)):S.isMeshNormalMaterial?o(x,S):S.isLineBasicMaterial?(a(x,S),S.isLineDashedMaterial&&c(x,S)):S.isPointsMaterial?h(x,S,_,O):S.isSpriteMaterial?d(x,S):S.isShadowMaterial?(x.color.value.copy(S.color),x.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function o(x,S){x.opacity.value=S.opacity,S.color&&x.diffuse.value.copy(S.color),S.emissive&&x.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(x.map.value=S.map,n(S.map,x.mapTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,n(S.alphaMap,x.alphaMapTransform)),S.bumpMap&&(x.bumpMap.value=S.bumpMap,n(S.bumpMap,x.bumpMapTransform),x.bumpScale.value=S.bumpScale,S.side===ss&&(x.bumpScale.value*=-1)),S.normalMap&&(x.normalMap.value=S.normalMap,n(S.normalMap,x.normalMapTransform),x.normalScale.value.copy(S.normalScale),S.side===ss&&x.normalScale.value.negate()),S.displacementMap&&(x.displacementMap.value=S.displacementMap,n(S.displacementMap,x.displacementMapTransform),x.displacementScale.value=S.displacementScale,x.displacementBias.value=S.displacementBias),S.emissiveMap&&(x.emissiveMap.value=S.emissiveMap,n(S.emissiveMap,x.emissiveMapTransform)),S.specularMap&&(x.specularMap.value=S.specularMap,n(S.specularMap,x.specularMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest);const _=e.get(S),O=_.envMap,T=_.envMapRotation;if(O&&(x.envMap.value=O,vu.copy(T),vu.x*=-1,vu.y*=-1,vu.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(vu.y*=-1,vu.z*=-1),x.envMapRotation.value.setFromMatrix4(n0e.makeRotationFromEuler(vu)),x.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=S.reflectivity,x.ior.value=S.ior,x.refractionRatio.value=S.refractionRatio),S.lightMap){x.lightMap.value=S.lightMap;const E=r._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=S.lightMapIntensity*E,n(S.lightMap,x.lightMapTransform)}S.aoMap&&(x.aoMap.value=S.aoMap,x.aoMapIntensity.value=S.aoMapIntensity,n(S.aoMap,x.aoMapTransform))}function a(x,S){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,S.map&&(x.map.value=S.map,n(S.map,x.mapTransform))}function c(x,S){x.dashSize.value=S.dashSize,x.totalSize.value=S.dashSize+S.gapSize,x.scale.value=S.scale}function h(x,S,_,O){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,x.size.value=S.size*_,x.scale.value=O*.5,S.map&&(x.map.value=S.map,n(S.map,x.uvTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,n(S.alphaMap,x.alphaMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest)}function d(x,S){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,x.rotation.value=S.rotation,S.map&&(x.map.value=S.map,n(S.map,x.mapTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,n(S.alphaMap,x.alphaMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest)}function f(x,S){x.specular.value.copy(S.specular),x.shininess.value=Math.max(S.shininess,1e-4)}function p(x,S){S.gradientMap&&(x.gradientMap.value=S.gradientMap)}function g(x,S){x.metalness.value=S.metalness,S.metalnessMap&&(x.metalnessMap.value=S.metalnessMap,n(S.metalnessMap,x.metalnessMapTransform)),x.roughness.value=S.roughness,S.roughnessMap&&(x.roughnessMap.value=S.roughnessMap,n(S.roughnessMap,x.roughnessMapTransform)),S.envMap&&(x.envMapIntensity.value=S.envMapIntensity)}function y(x,S,_){x.ior.value=S.ior,S.sheen>0&&(x.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),x.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(x.sheenColorMap.value=S.sheenColorMap,n(S.sheenColorMap,x.sheenColorMapTransform)),S.sheenRoughnessMap&&(x.sheenRoughnessMap.value=S.sheenRoughnessMap,n(S.sheenRoughnessMap,x.sheenRoughnessMapTransform))),S.clearcoat>0&&(x.clearcoat.value=S.clearcoat,x.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(x.clearcoatMap.value=S.clearcoatMap,n(S.clearcoatMap,x.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,n(S.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(x.clearcoatNormalMap.value=S.clearcoatNormalMap,n(S.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===ss&&x.clearcoatNormalScale.value.negate())),S.dispersion>0&&(x.dispersion.value=S.dispersion),S.iridescence>0&&(x.iridescence.value=S.iridescence,x.iridescenceIOR.value=S.iridescenceIOR,x.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(x.iridescenceMap.value=S.iridescenceMap,n(S.iridescenceMap,x.iridescenceMapTransform)),S.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=S.iridescenceThicknessMap,n(S.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),S.transmission>0&&(x.transmission.value=S.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),S.transmissionMap&&(x.transmissionMap.value=S.transmissionMap,n(S.transmissionMap,x.transmissionMapTransform)),x.thickness.value=S.thickness,S.thicknessMap&&(x.thicknessMap.value=S.thicknessMap,n(S.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=S.attenuationDistance,x.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(x.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(x.anisotropyMap.value=S.anisotropyMap,n(S.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=S.specularIntensity,x.specularColor.value.copy(S.specularColor),S.specularColorMap&&(x.specularColorMap.value=S.specularColorMap,n(S.specularColorMap,x.specularColorMapTransform)),S.specularIntensityMap&&(x.specularIntensityMap.value=S.specularIntensityMap,n(S.specularIntensityMap,x.specularIntensityMapTransform))}function b(x,S){S.matcap&&(x.matcap.value=S.matcap)}function w(x,S){const _=e.get(S).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function s0e(r,e,n,i){let s={},o={},a=[];const c=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function h(_,O){const T=O.program;i.uniformBlockBinding(_,T)}function d(_,O){let T=s[_.id];T===void 0&&(b(_),T=f(_),s[_.id]=T,_.addEventListener("dispose",x));const E=O.program;i.updateUBOMapping(_,E);const P=e.render.frame;o[_.id]!==P&&(g(_),o[_.id]=P)}function f(_){const O=p();_.__bindingPointIndex=O;const T=r.createBuffer(),E=_.__size,P=_.usage;return r.bindBuffer(r.UNIFORM_BUFFER,T),r.bufferData(r.UNIFORM_BUFFER,E,P),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,O,T),T}function p(){for(let _=0;_<c;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(_){const O=s[_.id],T=_.uniforms,E=_.__cache;r.bindBuffer(r.UNIFORM_BUFFER,O);for(let P=0,I=T.length;P<I;P++){const A=Array.isArray(T[P])?T[P]:[T[P]];for(let D=0,M=A.length;D<M;D++){const $=A[D];if(y($,P,D,E)===!0){const L=$.__offset,N=Array.isArray($.value)?$.value:[$.value];let V=0;for(let U=0;U<N.length;U++){const F=N[U],H=w(F);typeof F=="number"||typeof F=="boolean"?($.__data[0]=F,r.bufferSubData(r.UNIFORM_BUFFER,L+V,$.__data)):F.isMatrix3?($.__data[0]=F.elements[0],$.__data[1]=F.elements[1],$.__data[2]=F.elements[2],$.__data[3]=0,$.__data[4]=F.elements[3],$.__data[5]=F.elements[4],$.__data[6]=F.elements[5],$.__data[7]=0,$.__data[8]=F.elements[6],$.__data[9]=F.elements[7],$.__data[10]=F.elements[8],$.__data[11]=0):(F.toArray($.__data,V),V+=H.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,L,$.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function y(_,O,T,E){const P=_.value,I=O+"_"+T;if(E[I]===void 0)return typeof P=="number"||typeof P=="boolean"?E[I]=P:E[I]=P.clone(),!0;{const A=E[I];if(typeof P=="number"||typeof P=="boolean"){if(A!==P)return E[I]=P,!0}else if(A.equals(P)===!1)return A.copy(P),!0}return!1}function b(_){const O=_.uniforms;let T=0;const E=16;for(let I=0,A=O.length;I<A;I++){const D=Array.isArray(O[I])?O[I]:[O[I]];for(let M=0,$=D.length;M<$;M++){const L=D[M],N=Array.isArray(L.value)?L.value:[L.value];for(let V=0,U=N.length;V<U;V++){const F=N[V],H=w(F),K=T%E;K!==0&&E-K<H.boundary&&(T+=E-K),L.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=T,T+=H.storage}}}const P=T%E;return P>0&&(T+=E-P),_.__size=T,_.__cache={},this}function w(_){const O={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(O.boundary=4,O.storage=4):_.isVector2?(O.boundary=8,O.storage=8):_.isVector3||_.isColor?(O.boundary=16,O.storage=12):_.isVector4?(O.boundary=16,O.storage=16):_.isMatrix3?(O.boundary=48,O.storage=48):_.isMatrix4?(O.boundary=64,O.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),O}function x(_){const O=_.target;O.removeEventListener("dispose",x);const T=a.indexOf(O.__bindingPointIndex);a.splice(T,1),r.deleteBuffer(s[O.id]),delete s[O.id],delete o[O.id]}function S(){for(const _ in s)r.deleteBuffer(s[_]);a=[],s={},o={}}return{bind:h,update:d,dispose:S}}class L0{constructor(e={}){const{canvas:n=WF(),context:i=null,depth:s=!0,stencil:o=!1,alpha:a=!1,antialias:c=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:d=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=a;const y=new Uint32Array(4),b=new Int32Array(4);let w=null,x=null;const S=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=xo,this._useLegacyLights=!1,this.toneMapping=ec,this.toneMappingExposure=1;const O=this;let T=!1,E=0,P=0,I=null,A=-1,D=null;const M=new Oi,$=new Oi;let L=null;const N=new rt(0);let V=0,U=n.width,F=n.height,H=1,K=null,ie=null;const he=new Oi(0,0,U,F),me=new Oi(0,0,U,F);let Pe=!1;const _e=new hv;let ue=!1,Se=!1;const ke=new gt,J=new re,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function z(){return I===null?H:1}let X=i;function te(ae,Ae){return n.getContext(ae,Ae)}try{const ae={alpha:!0,depth:s,stencil:o,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${jp}`),n.addEventListener("webglcontextlost",ge,!1),n.addEventListener("webglcontextrestored",Ue,!1),n.addEventListener("webglcontextcreationerror",We,!1),X===null){const Ae="webgl2";if(X=te(Ae,ae),X===null)throw te(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let se,Q,Z,le,pe,be,Ee,ee,Y,de,fe,we,Me,Qe,Le,ze,ot,Ye,st,Mt,Et,ft,Wt,hi;function Ce(){se=new vme(X),se.init(),ft=new r9(X,se),Q=new dme(X,se,e,ft),Z=new qge(X),le=new Ome(X),pe=new Lge,be=new Zge(X,se,Z,pe,Q,ft,le),Ee=new pme(O),ee=new yme(O),Y=new Mde(X),Wt=new hme(X,Y),de=new bme(X,Y,le,Wt),fe=new _me(X,de,Y,le),st=new wme(X,Q,be),ze=new fme(pe),we=new Vge(O,Ee,ee,se,Q,Wt,ze),Me=new r0e(O,pe),Qe=new Uge,Le=new Hge(se),Ye=new cme(O,Ee,ee,Z,fe,g,h),ot=new jge(O,fe,Q),hi=new s0e(X,le,Q,Z),Mt=new ume(X,se,le),Et=new xme(X,se,le),le.programs=we.programs,O.capabilities=Q,O.extensions=se,O.properties=pe,O.renderLists=Qe,O.shadowMap=ot,O.state=Z,O.info=le}Ce();const Be=new i0e(O,X);this.xr=Be,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const ae=se.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=se.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(ae){ae!==void 0&&(H=ae,this.setSize(U,F,!1))},this.getSize=function(ae){return ae.set(U,F)},this.setSize=function(ae,Ae,Fe=!0){if(Be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=ae,F=Ae,n.width=Math.floor(ae*H),n.height=Math.floor(Ae*H),Fe===!0&&(n.style.width=ae+"px",n.style.height=Ae+"px"),this.setViewport(0,0,ae,Ae)},this.getDrawingBufferSize=function(ae){return ae.set(U*H,F*H).floor()},this.setDrawingBufferSize=function(ae,Ae,Fe){U=ae,F=Ae,H=Fe,n.width=Math.floor(ae*Fe),n.height=Math.floor(Ae*Fe),this.setViewport(0,0,ae,Ae)},this.getCurrentViewport=function(ae){return ae.copy(M)},this.getViewport=function(ae){return ae.copy(he)},this.setViewport=function(ae,Ae,Fe,Ve){ae.isVector4?he.set(ae.x,ae.y,ae.z,ae.w):he.set(ae,Ae,Fe,Ve),Z.viewport(M.copy(he).multiplyScalar(H).round())},this.getScissor=function(ae){return ae.copy(me)},this.setScissor=function(ae,Ae,Fe,Ve){ae.isVector4?me.set(ae.x,ae.y,ae.z,ae.w):me.set(ae,Ae,Fe,Ve),Z.scissor($.copy(me).multiplyScalar(H).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(ae){Z.setScissorTest(Pe=ae)},this.setOpaqueSort=function(ae){K=ae},this.setTransparentSort=function(ae){ie=ae},this.getClearColor=function(ae){return ae.copy(Ye.getClearColor())},this.setClearColor=function(){Ye.setClearColor.apply(Ye,arguments)},this.getClearAlpha=function(){return Ye.getClearAlpha()},this.setClearAlpha=function(){Ye.setClearAlpha.apply(Ye,arguments)},this.clear=function(ae=!0,Ae=!0,Fe=!0){let Ve=0;if(ae){let $e=!1;if(I!==null){const mt=I.texture.format;$e=mt===mP||mt===pP||mt===fP}if($e){const mt=I.texture.type,$t=mt===Ea||mt===pd||mt===lP||mt===Kp||mt===hP||mt===uP,Bt=Ye.getClearColor(),qt=Ye.getClearAlpha(),oi=Bt.r,di=Bt.g,pi=Bt.b;$t?(y[0]=oi,y[1]=di,y[2]=pi,y[3]=qt,X.clearBufferuiv(X.COLOR,0,y)):(b[0]=oi,b[1]=di,b[2]=pi,b[3]=qt,X.clearBufferiv(X.COLOR,0,b))}else Ve|=X.COLOR_BUFFER_BIT}Ae&&(Ve|=X.DEPTH_BUFFER_BIT),Fe&&(Ve|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ge,!1),n.removeEventListener("webglcontextrestored",Ue,!1),n.removeEventListener("webglcontextcreationerror",We,!1),Qe.dispose(),Le.dispose(),pe.dispose(),Ee.dispose(),ee.dispose(),fe.dispose(),Wt.dispose(),hi.dispose(),we.dispose(),Be.dispose(),Be.removeEventListener("sessionstart",xi),Be.removeEventListener("sessionend",kr),Rn.stop()};function ge(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Ue(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const ae=le.autoReset,Ae=ot.enabled,Fe=ot.autoUpdate,Ve=ot.needsUpdate,$e=ot.type;Ce(),le.autoReset=ae,ot.enabled=Ae,ot.autoUpdate=Fe,ot.needsUpdate=Ve,ot.type=$e}function We(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function nt(ae){const Ae=ae.target;Ae.removeEventListener("dispose",nt),pt(Ae)}function pt(ae){Ci(ae),pe.remove(ae)}function Ci(ae){const Ae=pe.get(ae).programs;Ae!==void 0&&(Ae.forEach(function(Fe){we.releaseProgram(Fe)}),ae.isShaderMaterial&&we.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,Ae,Fe,Ve,$e,mt){Ae===null&&(Ae=q);const $t=$e.isMesh&&$e.matrixWorld.determinant()<0,Bt=X_(ae,Ae,Fe,Ve,$e);Z.setMaterial(Ve,$t);let qt=Fe.index,oi=1;if(Ve.wireframe===!0){if(qt=de.getWireframeAttribute(Fe),qt===void 0)return;oi=2}const di=Fe.drawRange,pi=Fe.attributes.position;let mi=di.start*oi,on=(di.start+di.count)*oi;mt!==null&&(mi=Math.max(mi,mt.start*oi),on=Math.min(on,(mt.start+mt.count)*oi)),qt!==null?(mi=Math.max(mi,0),on=Math.min(on,qt.count)):pi!=null&&(mi=Math.max(mi,0),on=Math.min(on,pi.count));const us=on-mi;if(us<0||us===1/0)return;Wt.setup($e,Ve,Bt,Fe,qt);let Io,zi=Mt;if(qt!==null&&(Io=Y.get(qt),zi=Et,zi.setIndex(Io)),$e.isMesh)Ve.wireframe===!0?(Z.setLineWidth(Ve.wireframeLinewidth*z()),zi.setMode(X.LINES)):zi.setMode(X.TRIANGLES);else if($e.isLine){let ui=Ve.linewidth;ui===void 0&&(ui=1),Z.setLineWidth(ui*z()),$e.isLineSegments?zi.setMode(X.LINES):$e.isLineLoop?zi.setMode(X.LINE_LOOP):zi.setMode(X.LINE_STRIP)}else $e.isPoints?zi.setMode(X.POINTS):$e.isSprite&&zi.setMode(X.TRIANGLES);if($e.isBatchedMesh)$e._multiDrawInstances!==null?zi.renderMultiDrawInstances($e._multiDrawStarts,$e._multiDrawCounts,$e._multiDrawCount,$e._multiDrawInstances):zi.renderMultiDraw($e._multiDrawStarts,$e._multiDrawCounts,$e._multiDrawCount);else if($e.isInstancedMesh)zi.renderInstances(mi,us,$e.count);else if(Fe.isInstancedBufferGeometry){const ui=Fe._maxInstanceCount!==void 0?Fe._maxInstanceCount:1/0,Zh=Math.min(Fe.instanceCount,ui);zi.renderInstances(mi,us,Zh)}else zi.render(mi,us)};function ki(ae,Ae,Fe){ae.transparent===!0&&ae.side===Hs&&ae.forceSinglePass===!1?(ae.side=ss,ae.needsUpdate=!0,Ki(ae,Ae,Fe),ae.side=oc,ae.needsUpdate=!0,Ki(ae,Ae,Fe),ae.side=Hs):Ki(ae,Ae,Fe)}this.compile=function(ae,Ae,Fe=null){Fe===null&&(Fe=ae),x=Le.get(Fe),x.init(Ae),_.push(x),Fe.traverseVisible(function($e){$e.isLight&&$e.layers.test(Ae.layers)&&(x.pushLight($e),$e.castShadow&&x.pushShadow($e))}),ae!==Fe&&ae.traverseVisible(function($e){$e.isLight&&$e.layers.test(Ae.layers)&&(x.pushLight($e),$e.castShadow&&x.pushShadow($e))}),x.setupLights(O._useLegacyLights);const Ve=new Set;return ae.traverse(function($e){const mt=$e.material;if(mt)if(Array.isArray(mt))for(let $t=0;$t<mt.length;$t++){const Bt=mt[$t];ki(Bt,Fe,$e),Ve.add(Bt)}else ki(mt,Fe,$e),Ve.add(mt)}),_.pop(),x=null,Ve},this.compileAsync=function(ae,Ae,Fe=null){const Ve=this.compile(ae,Ae,Fe);return new Promise($e=>{function mt(){if(Ve.forEach(function($t){pe.get($t).currentProgram.isReady()&&Ve.delete($t)}),Ve.size===0){$e(ae);return}setTimeout(mt,10)}se.get("KHR_parallel_shader_compile")!==null?mt():setTimeout(mt,10)})};let Li=null;function kn(ae){Li&&Li(ae)}function xi(){Rn.stop()}function kr(){Rn.start()}const Rn=new KF;Rn.setAnimationLoop(kn),typeof self<"u"&&Rn.setContext(self),this.setAnimationLoop=function(ae){Li=ae,Be.setAnimationLoop(ae),ae===null?Rn.stop():Rn.start()},Be.addEventListener("sessionstart",xi),Be.addEventListener("sessionend",kr),this.render=function(ae,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Ae.parent===null&&Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),Be.enabled===!0&&Be.isPresenting===!0&&(Be.cameraAutoUpdate===!0&&Be.updateCamera(Ae),Ae=Be.getCamera()),ae.isScene===!0&&ae.onBeforeRender(O,ae,Ae,I),x=Le.get(ae,_.length),x.init(Ae),_.push(x),ke.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),_e.setFromProjectionMatrix(ke),Se=this.localClippingEnabled,ue=ze.init(this.clippingPlanes,Se),w=Qe.get(ae,S.length),w.init(),S.push(w),um(ae,Ae,0,O.sortObjects),w.finish(),O.sortObjects===!0&&w.sort(K,ie);const Fe=Be.enabled===!1||Be.isPresenting===!1||Be.hasDepthSensing()===!1;Fe&&Ye.addToRenderList(w,ae),this.info.render.frame++,ue===!0&&ze.beginShadows();const Ve=x.state.shadowsArray;ot.render(Ve,ae,Ae),ue===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const $e=w.opaque,mt=w.transmissive;if(x.setupLights(O._useLegacyLights),Ae.isArrayCamera){const $t=Ae.cameras;if(mt.length>0)for(let Bt=0,qt=$t.length;Bt<qt;Bt++){const oi=$t[Bt];Iv($e,mt,ae,oi)}Fe&&Ye.render(ae);for(let Bt=0,qt=$t.length;Bt<qt;Bt++){const oi=$t[Bt];fr(w,ae,oi,oi.viewport)}}else mt.length>0&&Iv($e,mt,ae,Ae),Fe&&Ye.render(ae),fr(w,ae,Ae);I!==null&&(be.updateMultisampleRenderTarget(I),be.updateRenderTargetMipmap(I)),ae.isScene===!0&&ae.onAfterRender(O,ae,Ae),Wt.resetDefaultState(),A=-1,D=null,_.pop(),_.length>0?(x=_[_.length-1],ue===!0&&ze.setGlobalState(O.clippingPlanes,x.state.camera)):x=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function um(ae,Ae,Fe,Ve){if(ae.visible===!1)return;if(ae.layers.test(Ae.layers)){if(ae.isGroup)Fe=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(Ae);else if(ae.isLight)x.pushLight(ae),ae.castShadow&&x.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||_e.intersectsSprite(ae)){Ve&&J.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(ke);const $t=fe.update(ae),Bt=ae.material;Bt.visible&&w.push(ae,$t,Bt,Fe,J.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||_e.intersectsObject(ae))){const $t=fe.update(ae),Bt=ae.material;if(Ve&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),J.copy(ae.boundingSphere.center)):($t.boundingSphere===null&&$t.computeBoundingSphere(),J.copy($t.boundingSphere.center)),J.applyMatrix4(ae.matrixWorld).applyMatrix4(ke)),Array.isArray(Bt)){const qt=$t.groups;for(let oi=0,di=qt.length;oi<di;oi++){const pi=qt[oi],mi=Bt[pi.materialIndex];mi&&mi.visible&&w.push(ae,$t,mi,Fe,J.z,pi)}}else Bt.visible&&w.push(ae,$t,Bt,Fe,J.z,null)}}const mt=ae.children;for(let $t=0,Bt=mt.length;$t<Bt;$t++)um(mt[$t],Ae,Fe,Ve)}function fr(ae,Ae,Fe,Ve){const $e=ae.opaque,mt=ae.transmissive,$t=ae.transparent;x.setupLightsView(Fe),ue===!0&&ze.setGlobalState(O.clippingPlanes,Fe),Ve&&Z.viewport(M.copy(Ve)),$e.length>0&&qh($e,Ae,Fe),mt.length>0&&qh(mt,Ae,Fe),$t.length>0&&qh($t,Ae,Fe),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Iv(ae,Ae,Fe,Ve){if((Fe.isScene===!0?Fe.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[Ve.id]===void 0&&(x.state.transmissionRenderTarget[Ve.id]=new ta(1,1,{generateMipmaps:!0,type:se.has("EXT_color_buffer_half_float")||se.has("EXT_color_buffer_float")?Zp:Ea,minFilter:Ca,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const mt=x.state.transmissionRenderTarget[Ve.id],$t=Ve.viewport||M;mt.setSize($t.z,$t.w);const Bt=O.getRenderTarget();O.setRenderTarget(mt),O.getClearColor(N),V=O.getClearAlpha(),V<1&&O.setClearColor(16777215,.5),O.clear();const qt=O.toneMapping;O.toneMapping=ec;const oi=Ve.viewport;if(Ve.viewport!==void 0&&(Ve.viewport=void 0),x.setupLightsView(Ve),ue===!0&&ze.setGlobalState(O.clippingPlanes,Ve),qh(ae,Fe,Ve),be.updateMultisampleRenderTarget(mt),be.updateRenderTargetMipmap(mt),se.has("WEBGL_multisampled_render_to_texture")===!1){let di=!1;for(let pi=0,mi=Ae.length;pi<mi;pi++){const on=Ae[pi],us=on.object,Io=on.geometry,zi=on.material,ui=on.group;if(zi.side===Hs&&us.layers.test(Ve.layers)){const Zh=zi.side;zi.side=ss,zi.needsUpdate=!0,bc(us,Fe,Ve,Io,zi,ui),zi.side=Zh,zi.needsUpdate=!0,di=!0}}di===!0&&(be.updateMultisampleRenderTarget(mt),be.updateRenderTargetMipmap(mt))}O.setRenderTarget(Bt),O.setClearColor(N,V),oi!==void 0&&(Ve.viewport=oi),O.toneMapping=qt}function qh(ae,Ae,Fe){const Ve=Ae.isScene===!0?Ae.overrideMaterial:null;for(let $e=0,mt=ae.length;$e<mt;$e++){const $t=ae[$e],Bt=$t.object,qt=$t.geometry,oi=Ve===null?$t.material:Ve,di=$t.group;Bt.layers.test(Fe.layers)&&bc(Bt,Ae,Fe,qt,oi,di)}}function bc(ae,Ae,Fe,Ve,$e,mt){ae.onBeforeRender(O,Ae,Fe,Ve,$e,mt),ae.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),$e.onBeforeRender(O,Ae,Fe,Ve,ae,mt),$e.transparent===!0&&$e.side===Hs&&$e.forceSinglePass===!1?($e.side=ss,$e.needsUpdate=!0,O.renderBufferDirect(Fe,Ae,Ve,$e,ae,mt),$e.side=oc,$e.needsUpdate=!0,O.renderBufferDirect(Fe,Ae,Ve,$e,ae,mt),$e.side=Hs):O.renderBufferDirect(Fe,Ae,Ve,$e,ae,mt),ae.onAfterRender(O,Ae,Fe,Ve,$e,mt)}function Ki(ae,Ae,Fe){Ae.isScene!==!0&&(Ae=q);const Ve=pe.get(ae),$e=x.state.lights,mt=x.state.shadowsArray,$t=$e.state.version,Bt=we.getParameters(ae,$e.state,mt,Ae,Fe),qt=we.getProgramCacheKey(Bt);let oi=Ve.programs;Ve.environment=ae.isMeshStandardMaterial?Ae.environment:null,Ve.fog=Ae.fog,Ve.envMap=(ae.isMeshStandardMaterial?ee:Ee).get(ae.envMap||Ve.environment),Ve.envMapRotation=Ve.environment!==null&&ae.envMap===null?Ae.environmentRotation:ae.envMapRotation,oi===void 0&&(ae.addEventListener("dispose",nt),oi=new Map,Ve.programs=oi);let di=oi.get(qt);if(di!==void 0){if(Ve.currentProgram===di&&Ve.lightsStateVersion===$t)return xc(ae,Bt),di}else Bt.uniforms=we.getUniforms(ae),ae.onBuild(Fe,Bt,O),ae.onBeforeCompile(Bt,O),di=we.acquireProgram(Bt,qt),oi.set(qt,di),Ve.uniforms=Bt.uniforms;const pi=Ve.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(pi.clippingPlanes=ze.uniform),xc(ae,Bt),Ve.needsLights=Q_(ae),Ve.lightsStateVersion=$t,Ve.needsLights&&(pi.ambientLightColor.value=$e.state.ambient,pi.lightProbe.value=$e.state.probe,pi.directionalLights.value=$e.state.directional,pi.directionalLightShadows.value=$e.state.directionalShadow,pi.spotLights.value=$e.state.spot,pi.spotLightShadows.value=$e.state.spotShadow,pi.rectAreaLights.value=$e.state.rectArea,pi.ltc_1.value=$e.state.rectAreaLTC1,pi.ltc_2.value=$e.state.rectAreaLTC2,pi.pointLights.value=$e.state.point,pi.pointLightShadows.value=$e.state.pointShadow,pi.hemisphereLights.value=$e.state.hemi,pi.directionalShadowMap.value=$e.state.directionalShadowMap,pi.directionalShadowMatrix.value=$e.state.directionalShadowMatrix,pi.spotShadowMap.value=$e.state.spotShadowMap,pi.spotLightMatrix.value=$e.state.spotLightMatrix,pi.spotLightMap.value=$e.state.spotLightMap,pi.pointShadowMap.value=$e.state.pointShadowMap,pi.pointShadowMatrix.value=$e.state.pointShadowMatrix),Ve.currentProgram=di,Ve.uniformsList=null,di}function oa(ae){if(ae.uniformsList===null){const Ae=ae.currentProgram.getUniforms();ae.uniformsList=Lx.seqWithValue(Ae.seq,ae.uniforms)}return ae.uniformsList}function xc(ae,Ae){const Fe=pe.get(ae);Fe.outputColorSpace=Ae.outputColorSpace,Fe.batching=Ae.batching,Fe.instancing=Ae.instancing,Fe.instancingColor=Ae.instancingColor,Fe.instancingMorph=Ae.instancingMorph,Fe.skinning=Ae.skinning,Fe.morphTargets=Ae.morphTargets,Fe.morphNormals=Ae.morphNormals,Fe.morphColors=Ae.morphColors,Fe.morphTargetsCount=Ae.morphTargetsCount,Fe.numClippingPlanes=Ae.numClippingPlanes,Fe.numIntersection=Ae.numClipIntersection,Fe.vertexAlphas=Ae.vertexAlphas,Fe.vertexTangents=Ae.vertexTangents,Fe.toneMapping=Ae.toneMapping}function X_(ae,Ae,Fe,Ve,$e){Ae.isScene!==!0&&(Ae=q),be.resetTextureUnits();const mt=Ae.fog,$t=Ve.isMeshStandardMaterial?Ae.environment:null,Bt=I===null?O.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:gc,qt=(Ve.isMeshStandardMaterial?ee:Ee).get(Ve.envMap||$t),oi=Ve.vertexColors===!0&&!!Fe.attributes.color&&Fe.attributes.color.itemSize===4,di=!!Fe.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),pi=!!Fe.morphAttributes.position,mi=!!Fe.morphAttributes.normal,on=!!Fe.morphAttributes.color;let us=ec;Ve.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(us=O.toneMapping);const Io=Fe.morphAttributes.position||Fe.morphAttributes.normal||Fe.morphAttributes.color,zi=Io!==void 0?Io.length:0,ui=pe.get(Ve),Zh=x.state.lights;if(ue===!0&&(Se===!0||ae!==D)){const jr=ae===D&&Ve.id===A;ze.setState(Ve,ae,jr)}let pn=!1;Ve.version===ui.__version?(ui.needsLights&&ui.lightsStateVersion!==Zh.state.version||ui.outputColorSpace!==Bt||$e.isBatchedMesh&&ui.batching===!1||!$e.isBatchedMesh&&ui.batching===!0||$e.isInstancedMesh&&ui.instancing===!1||!$e.isInstancedMesh&&ui.instancing===!0||$e.isSkinnedMesh&&ui.skinning===!1||!$e.isSkinnedMesh&&ui.skinning===!0||$e.isInstancedMesh&&ui.instancingColor===!0&&$e.instanceColor===null||$e.isInstancedMesh&&ui.instancingColor===!1&&$e.instanceColor!==null||$e.isInstancedMesh&&ui.instancingMorph===!0&&$e.morphTexture===null||$e.isInstancedMesh&&ui.instancingMorph===!1&&$e.morphTexture!==null||ui.envMap!==qt||Ve.fog===!0&&ui.fog!==mt||ui.numClippingPlanes!==void 0&&(ui.numClippingPlanes!==ze.numPlanes||ui.numIntersection!==ze.numIntersection)||ui.vertexAlphas!==oi||ui.vertexTangents!==di||ui.morphTargets!==pi||ui.morphNormals!==mi||ui.morphColors!==on||ui.toneMapping!==us||ui.morphTargetsCount!==zi)&&(pn=!0):(pn=!0,ui.__version=Ve.version);let ds=ui.currentProgram;pn===!0&&(ds=Ki(Ve,Ae,$e));let Kh=!1,Jh=!1,dm=!1;const In=ds.getUniforms(),Va=ui.uniforms;if(Z.useProgram(ds.program)&&(Kh=!0,Jh=!0,dm=!0),Ve.id!==A&&(A=Ve.id,Jh=!0),Kh||D!==ae){In.setValue(X,"projectionMatrix",ae.projectionMatrix),In.setValue(X,"viewMatrix",ae.matrixWorldInverse);const jr=In.map.cameraPosition;jr!==void 0&&jr.setValue(X,J.setFromMatrixPosition(ae.matrixWorld)),Q.logarithmicDepthBuffer&&In.setValue(X,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&In.setValue(X,"isOrthographic",ae.isOrthographicCamera===!0),D!==ae&&(D=ae,Jh=!0,dm=!0)}if($e.isSkinnedMesh){In.setOptional(X,$e,"bindMatrix"),In.setOptional(X,$e,"bindMatrixInverse");const jr=$e.skeleton;jr&&(jr.boneTexture===null&&jr.computeBoneTexture(),In.setValue(X,"boneTexture",jr.boneTexture,be))}$e.isBatchedMesh&&(In.setOptional(X,$e,"batchingTexture"),In.setValue(X,"batchingTexture",$e._matricesTexture,be));const fm=Fe.morphAttributes;if((fm.position!==void 0||fm.normal!==void 0||fm.color!==void 0)&&st.update($e,Fe,ds),(Jh||ui.receiveShadow!==$e.receiveShadow)&&(ui.receiveShadow=$e.receiveShadow,In.setValue(X,"receiveShadow",$e.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&(Va.envMap.value=qt,Va.flipEnvMap.value=qt.isCubeTexture&&qt.isRenderTargetTexture===!1?-1:1),Ve.isMeshStandardMaterial&&Ve.envMap===null&&Ae.environment!==null&&(Va.envMapIntensity.value=Ae.environmentIntensity),Jh&&(In.setValue(X,"toneMappingExposure",O.toneMappingExposure),ui.needsLights&&W_(Va,dm),mt&&Ve.fog===!0&&Me.refreshFogUniforms(Va,mt),Me.refreshMaterialUniforms(Va,Ve,H,F,x.state.transmissionRenderTarget[ae.id]),Lx.upload(X,oa(ui),Va,be)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&(Lx.upload(X,oa(ui),Va,be),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&In.setValue(X,"center",$e.center),In.setValue(X,"modelViewMatrix",$e.modelViewMatrix),In.setValue(X,"normalMatrix",$e.normalMatrix),In.setValue(X,"modelMatrix",$e.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const jr=Ve.uniformsGroups;for(let Is=0,H_=jr.length;Is<H_;Is++){const Dv=jr[Is];hi.update(Dv,ds),hi.bind(Dv,ds)}}return ds}function W_(ae,Ae){ae.ambientLightColor.needsUpdate=Ae,ae.lightProbe.needsUpdate=Ae,ae.directionalLights.needsUpdate=Ae,ae.directionalLightShadows.needsUpdate=Ae,ae.pointLights.needsUpdate=Ae,ae.pointLightShadows.needsUpdate=Ae,ae.spotLights.needsUpdate=Ae,ae.spotLightShadows.needsUpdate=Ae,ae.rectAreaLights.needsUpdate=Ae,ae.hemisphereLights.needsUpdate=Ae}function Q_(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(ae,Ae,Fe){pe.get(ae.texture).__webglTexture=Ae,pe.get(ae.depthTexture).__webglTexture=Fe;const Ve=pe.get(ae);Ve.__hasExternalTextures=!0,Ve.__autoAllocateDepthBuffer=Fe===void 0,Ve.__autoAllocateDepthBuffer||se.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ve.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ae,Ae){const Fe=pe.get(ae);Fe.__webglFramebuffer=Ae,Fe.__useDefaultFramebuffer=Ae===void 0},this.setRenderTarget=function(ae,Ae=0,Fe=0){I=ae,E=Ae,P=Fe;let Ve=!0,$e=null,mt=!1,$t=!1;if(ae){const qt=pe.get(ae);qt.__useDefaultFramebuffer!==void 0?(Z.bindFramebuffer(X.FRAMEBUFFER,null),Ve=!1):qt.__webglFramebuffer===void 0?be.setupRenderTarget(ae):qt.__hasExternalTextures&&be.rebindTextures(ae,pe.get(ae.texture).__webglTexture,pe.get(ae.depthTexture).__webglTexture);const oi=ae.texture;(oi.isData3DTexture||oi.isDataArrayTexture||oi.isCompressedArrayTexture)&&($t=!0);const di=pe.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(di[Ae])?$e=di[Ae][Fe]:$e=di[Ae],mt=!0):ae.samples>0&&be.useMultisampledRTT(ae)===!1?$e=pe.get(ae).__webglMultisampledFramebuffer:Array.isArray(di)?$e=di[Fe]:$e=di,M.copy(ae.viewport),$.copy(ae.scissor),L=ae.scissorTest}else M.copy(he).multiplyScalar(H).floor(),$.copy(me).multiplyScalar(H).floor(),L=Pe;if(Z.bindFramebuffer(X.FRAMEBUFFER,$e)&&Ve&&Z.drawBuffers(ae,$e),Z.viewport(M),Z.scissor($),Z.setScissorTest(L),mt){const qt=pe.get(ae.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,qt.__webglTexture,Fe)}else if($t){const qt=pe.get(ae.texture),oi=Ae||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,qt.__webglTexture,Fe||0,oi)}A=-1},this.readRenderTargetPixels=function(ae,Ae,Fe,Ve,$e,mt,$t){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Bt=pe.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&$t!==void 0&&(Bt=Bt[$t]),Bt){Z.bindFramebuffer(X.FRAMEBUFFER,Bt);try{const qt=ae.texture,oi=qt.format,di=qt.type;if(!Q.textureFormatReadable(oi)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Q.textureTypeReadable(di)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ae>=0&&Ae<=ae.width-Ve&&Fe>=0&&Fe<=ae.height-$e&&X.readPixels(Ae,Fe,Ve,$e,ft.convert(oi),ft.convert(di),mt)}finally{const qt=I!==null?pe.get(I).__webglFramebuffer:null;Z.bindFramebuffer(X.FRAMEBUFFER,qt)}}},this.copyFramebufferToTexture=function(ae,Ae,Fe=0){const Ve=Math.pow(2,-Fe),$e=Math.floor(Ae.image.width*Ve),mt=Math.floor(Ae.image.height*Ve);be.setTexture2D(Ae,0),X.copyTexSubImage2D(X.TEXTURE_2D,Fe,0,0,ae.x,ae.y,$e,mt),Z.unbindTexture()},this.copyTextureToTexture=function(ae,Ae,Fe,Ve=0){const $e=Ae.image.width,mt=Ae.image.height,$t=ft.convert(Fe.format),Bt=ft.convert(Fe.type);be.setTexture2D(Fe,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,Fe.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fe.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,Fe.unpackAlignment),Ae.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,Ve,ae.x,ae.y,$e,mt,$t,Bt,Ae.image.data):Ae.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,Ve,ae.x,ae.y,Ae.mipmaps[0].width,Ae.mipmaps[0].height,$t,Ae.mipmaps[0].data):X.texSubImage2D(X.TEXTURE_2D,Ve,ae.x,ae.y,$t,Bt,Ae.image),Ve===0&&Fe.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),Z.unbindTexture()},this.copyTextureToTexture3D=function(ae,Ae,Fe,Ve,$e=0){const mt=ae.max.x-ae.min.x,$t=ae.max.y-ae.min.y,Bt=ae.max.z-ae.min.z,qt=ft.convert(Ve.format),oi=ft.convert(Ve.type);let di;if(Ve.isData3DTexture)be.setTexture3D(Ve,0),di=X.TEXTURE_3D;else if(Ve.isDataArrayTexture||Ve.isCompressedArrayTexture)be.setTexture2DArray(Ve,0),di=X.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,Ve.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,Ve.unpackAlignment);const pi=X.getParameter(X.UNPACK_ROW_LENGTH),mi=X.getParameter(X.UNPACK_IMAGE_HEIGHT),on=X.getParameter(X.UNPACK_SKIP_PIXELS),us=X.getParameter(X.UNPACK_SKIP_ROWS),Io=X.getParameter(X.UNPACK_SKIP_IMAGES),zi=Fe.isCompressedTexture?Fe.mipmaps[$e]:Fe.image;X.pixelStorei(X.UNPACK_ROW_LENGTH,zi.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,zi.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,ae.min.x),X.pixelStorei(X.UNPACK_SKIP_ROWS,ae.min.y),X.pixelStorei(X.UNPACK_SKIP_IMAGES,ae.min.z),Fe.isDataTexture||Fe.isData3DTexture?X.texSubImage3D(di,$e,Ae.x,Ae.y,Ae.z,mt,$t,Bt,qt,oi,zi.data):Ve.isCompressedArrayTexture?X.compressedTexSubImage3D(di,$e,Ae.x,Ae.y,Ae.z,mt,$t,Bt,qt,zi.data):X.texSubImage3D(di,$e,Ae.x,Ae.y,Ae.z,mt,$t,Bt,qt,oi,zi),X.pixelStorei(X.UNPACK_ROW_LENGTH,pi),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,mi),X.pixelStorei(X.UNPACK_SKIP_PIXELS,on),X.pixelStorei(X.UNPACK_SKIP_ROWS,us),X.pixelStorei(X.UNPACK_SKIP_IMAGES,Io),$e===0&&Ve.generateMipmaps&&X.generateMipmap(di),Z.unbindTexture()},this.initTexture=function(ae){ae.isCubeTexture?be.setTextureCube(ae,0):ae.isData3DTexture?be.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?be.setTexture2DArray(ae,0):be.setTexture2D(ae,0),Z.unbindTexture()},this.resetState=function(){E=0,P=0,I=null,Z.reset(),Wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return il}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===Iw?"display-p3":"srgb",n.unpackColorSpace=tn.workingColorSpace===ov?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Lw{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new rt(e),this.density=n}clone(){return new Lw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Bw{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new rt(e),this.near=n,this.far=i}clone(){return new Bw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Mp extends Ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new br,this.environmentIntensity=1,this.environmentRotation=new br,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class uv{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=py,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Eo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return QF("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=n.array[i+s];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const vs=new re;class lc{constructor(e,n,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)vs.fromBufferAttribute(this,n),vs.applyMatrix4(e),this.setXYZ(n,vs.x,vs.y,vs.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)vs.fromBufferAttribute(this,n),vs.applyNormalMatrix(e),this.setXYZ(n,vs.x,vs.y,vs.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)vs.fromBufferAttribute(this,n),vs.transformDirection(e),this.setXYZ(n,vs.x,vs.y,vs.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=Os(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=gi(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=gi(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=gi(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=gi(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=gi(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Os(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Os(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Os(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Os(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array),s=gi(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,n,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=gi(n,this.array),i=gi(i,this.array),s=gi(s,this.array),o=gi(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[s+o])}return new Di(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class CP extends as{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let yf;const tg=new re,vf=new re,bf=new re,xf=new Xe,ig=new Xe,o9=new gt,ob=new re,ng=new re,ab=new re,G6=new Xe,UC=new Xe,Y6=new Xe;let a9=class extends Ni{constructor(e=new CP){if(super(),this.isSprite=!0,this.type="Sprite",yf===void 0){yf=new si;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new uv(n,5);yf.setIndex([0,1,2,0,2,3]),yf.setAttribute("position",new lc(i,3,0,!1)),yf.setAttribute("uv",new lc(i,2,3,!1))}this.geometry=yf,this.material=e,this.center=new Xe(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vf.setFromMatrixScale(this.matrixWorld),o9.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&vf.multiplyScalar(-bf.z);const i=this.material.rotation;let s,o;i!==0&&(o=Math.cos(i),s=Math.sin(i));const a=this.center;lb(ob.set(-.5,-.5,0),bf,a,vf,s,o),lb(ng.set(.5,-.5,0),bf,a,vf,s,o),lb(ab.set(.5,.5,0),bf,a,vf,s,o),G6.set(0,0),UC.set(1,0),Y6.set(1,1);let c=e.ray.intersectTriangle(ob,ng,ab,!1,tg);if(c===null&&(lb(ng.set(-.5,.5,0),bf,a,vf,s,o),UC.set(0,1),c=e.ray.intersectTriangle(ob,ab,ng,!1,tg),c===null))return;const h=e.ray.origin.distanceTo(tg);h<e.near||h>e.far||n.push({distance:h,point:tg.clone(),uv:Gs.getInterpolation(tg,ob,ng,ab,G6,UC,Y6,new Xe),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function lb(r,e,n,i,s,o){xf.subVectors(r,n).addScalar(.5).multiply(i),s!==void 0?(ig.x=o*xf.x-s*xf.y,ig.y=s*xf.x+o*xf.y):ig.copy(xf),r.copy(e),r.x+=ig.x,r.y+=ig.y,r.applyMatrix4(o9)}const cb=new re,j6=new re;class l9 extends Ni{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,s=n.length;i<s;i++){const o=n[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const s=this.levels;let o;for(o=0;o<s.length&&!(n<s[o].distance);o++);return s.splice(o,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),e<o)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){cb.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(cb);this.getObjectForDistance(s).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){cb.setFromMatrixPosition(e.matrixWorld),j6.setFromMatrixPosition(this.matrixWorld);const i=cb.distanceTo(j6)/e.zoom;n[0].object.visible=!0;let s,o;for(s=1,o=n.length;s<o;s++){let a=n[s].distance;if(n[s].object.visible&&(a-=a*n[s].hysteresis),i>=a)n[s-1].object.visible=!1,n[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<o;s++)n[s].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let s=0,o=i.length;s<o;s++){const a=i[s];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const q6=new re,Z6=new Oi,K6=new Oi,o0e=new re,J6=new gt,hb=new re,FC=new Hr,eD=new gt,zC=new Td;class kP extends sn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=hT,this.bindMatrix=new gt,this.bindMatrixInverse=new gt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qr),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,hb),this.boundingBox.expandByPoint(hb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Hr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,hb),this.boundingSphere.expandByPoint(hb)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),FC.copy(this.boundingSphere),FC.applyMatrix4(s),e.ray.intersectsSphere(FC)!==!1&&(eD.copy(s).invert(),zC.copy(e.ray).applyMatrix4(eD),!(this.boundingBox!==null&&zC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,zC)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Oi,n=this.geometry.attributes.skinWeight;for(let i=0,s=n.count;i<s;i++){e.fromBufferAttribute(n,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===hT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===xF?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,s=this.geometry;Z6.fromBufferAttribute(s.attributes.skinIndex,e),K6.fromBufferAttribute(s.attributes.skinWeight,e),q6.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const a=K6.getComponent(o);if(a!==0){const c=Z6.getComponent(o);J6.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),n.addScaledVector(o0e.copy(q6).applyMatrix4(J6),a)}}return n.applyMatrix4(this.bindMatrixInverse)}}class yy extends Ni{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xh extends Hn{constructor(e=null,n=1,i=1,s,o,a,c,h,d=vr,f=vr,p,g){super(null,a,c,h,d,f,s,o,p,g),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const tD=new gt,a0e=new gt;class dv{constructor(e=[],n=[]){this.uuid=Eo(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new gt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new gt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,a=e.length;o<a;o++){const c=e[o]?e[o].matrixWorld:a0e;tD.multiplyMatrices(c,n[o]),tD.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new dv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new xh(n,e,e,qs,Go);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const s=this.bones[n];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let a=n[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new yy),this.bones.push(a),this.boneInverses.push(new gt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let s=0,o=n.length;s<o;s++){const a=n[s];e.bones.push(a.uuid);const c=i[s];e.boneInverses.push(c.toArray())}return e}}class Ep extends Di{constructor(e,n,i,s=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Of=new gt,iD=new gt,ub=[],nD=new Qr,l0e=new gt,rg=new sn,sg=new Hr;class c9 extends sn{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Ep(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,l0e)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Qr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Of),nD.copy(e.boundingBox).applyMatrix4(Of),this.boundingBox.union(nD)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Hr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Of),sg.copy(e.boundingSphere).applyMatrix4(Of),this.boundingSphere.union(sg)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,s=this.morphTexture.source.data.data,o=i.length+1,a=e*o+1;for(let c=0;c<i.length;c++)i[c]=s[a+c]}raycast(e,n){const i=this.matrixWorld,s=this.count;if(rg.geometry=this.geometry,rg.material=this.material,rg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sg.copy(this.boundingSphere),sg.applyMatrix4(i),e.ray.intersectsSphere(sg)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,Of),iD.multiplyMatrices(i,Of),rg.matrixWorld=iD,rg.raycast(e,ub);for(let a=0,c=ub.length;a<c;a++){const h=ub[a];h.instanceId=o,h.object=this,n.push(h)}ub.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Ep(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new xh(new Float32Array(s*this.count),s,this.count,dP,Go));const o=this.morphTexture.source.data.data;let a=0;for(let d=0;d<i.length;d++)a+=i[d];const c=this.geometry.morphTargetsRelative?1:1-a,h=s*e;o[h]=c,o.set(i,h+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function c0e(r,e){return r.z-e.z}function h0e(r,e){return e.z-r.z}class u0e{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const o=i[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=n}reset(){this.list.length=0,this.index=0}}const wf="batchId",Gc=new gt,rD=new gt,d0e=new gt,sD=new gt,XC=new hv,db=new Qr,bu=new Hr,og=new re,WC=new u0e,es=new sn,fb=[];function f0e(r,e,n=0){const i=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const s=r.count;for(let o=0;o<s;o++)for(let a=0;a<i;a++)e.setComponent(o+n,a,r.getComponent(o,a))}else e.array.set(r.array,n*i);e.needsUpdate=!0}class h9 extends sn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,i=n*2,s){super(new si,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new xh(n,e,e,qs,Go);this._matricesTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,s=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const c in e.attributes){const h=e.getAttribute(c),{array:d,itemSize:f,normalized:p}=h,g=new d.constructor(i*f),y=new Di(g,f,p);n.setAttribute(c,y)}if(e.getIndex()!==null){const c=i>65536?new Uint32Array(o):new Uint16Array(o);n.setIndex(new Di(c,1))}const a=s>65536?new Uint32Array(i):new Uint16Array(i);n.setAttribute(wf,new Di(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(wf))throw new Error(`BatchedMesh: Geometry cannot use attribute "${wf}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(i===wf)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),o=n.getAttribute(i);if(s.itemSize!==o.itemSize||s.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qr);const e=this._geometryCount,n=this.boundingBox,i=this._active;n.makeEmpty();for(let s=0;s<e;s++)i[s]!==!1&&(this.getMatrixAt(s,Gc),this.getBoundingBoxAt(s,db).applyMatrix4(Gc),n.union(db))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hr);const e=this._geometryCount,n=this.boundingSphere,i=this._active;n.makeEmpty();for(let s=0;s<e;s++)i[s]!==!1&&(this.getMatrixAt(s,Gc),this.getBoundingSphereAt(s,bu).applyMatrix4(Gc),n.union(bu))}addGeometry(e,n=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const a=this._reservedRanges,c=this._drawRanges,h=this._bounds;this._geometryCount!==0&&(o=a[a.length-1]),n===-1?s.vertexCount=e.getAttribute("position").count:s.vertexCount=n,o===null?s.vertexStart=0:s.vertexStart=o.vertexStart+o.vertexCount;const d=e.getIndex(),f=d!==null;if(f&&(i===-1?s.indexCount=d.count:s.indexCount=i,o===null?s.indexStart=0:s.indexStart=o.indexStart+o.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,g=this._active,y=this._matricesTexture,b=this._matricesTexture.image.data;p.push(!0),g.push(!0);const w=this._geometryCount;this._geometryCount++,d0e.toArray(b,w*16),y.needsUpdate=!0,a.push(s),c.push({start:f?s.indexStart:s.vertexStart,count:-1}),h.push({boxInitialized:!1,box:new Qr,sphereInitialized:!1,sphere:new Hr});const x=this.geometry.getAttribute(wf);for(let S=0;S<s.vertexCount;S++)x.setX(s.vertexStart+S,w);return x.needsUpdate=!0,this.setGeometryAt(w,e),w}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,s=i.getIndex()!==null,o=i.getIndex(),a=n.getIndex(),c=this._reservedRanges[e];if(s&&a.count>c.indexCount||n.attributes.position.count>c.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const h=c.vertexStart,d=c.vertexCount;for(const y in i.attributes){if(y===wf)continue;const b=n.getAttribute(y),w=i.getAttribute(y);f0e(b,w,h);const x=b.itemSize;for(let S=b.count,_=d;S<_;S++){const O=h+S;for(let T=0;T<x;T++)w.setComponent(O,T,0)}w.needsUpdate=!0,w.addUpdateRange(h*x,d*x)}if(s){const y=c.indexStart;for(let b=0;b<a.count;b++)o.setX(y+b,h+a.getX(b));for(let b=a.count,w=c.indexCount;b<w;b++)o.setX(y+b,h);o.needsUpdate=!0,o.addUpdateRange(y,c.indexCount)}const f=this._bounds[e];n.boundingBox!==null?(f.box.copy(n.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,n.boundingSphere!==null?(f.sphere.copy(n.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const p=this._drawRanges[e],g=n.getAttribute("position");return p.count=s?a.count:g.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,n){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=n,e}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const s=this._bounds[e],o=s.box,a=this.geometry;if(s.boxInitialized===!1){o.makeEmpty();const c=a.index,h=a.attributes.position,d=this._drawRanges[e];for(let f=d.start,p=d.start+d.count;f<p;f++){let g=f;c&&(g=c.getX(g)),o.expandByPoint(og.fromBufferAttribute(h,g))}s.boxInitialized=!0}return n.copy(o),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const s=this._bounds[e],o=s.sphere,a=this.geometry;if(s.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,db),db.getCenter(o.center);const c=a.index,h=a.attributes.position,d=this._drawRanges[e];let f=0;for(let p=d.start,g=d.start+d.count;p<g;p++){let y=p;c&&(y=c.getX(y)),og.fromBufferAttribute(h,y),f=Math.max(f,o.center.distanceToSquared(og))}o.radius=Math.sqrt(f),s.sphereInitialized=!0}return n.copy(o),n}setMatrixAt(e,n){const i=this._active,s=this._matricesTexture,o=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||i[e]===!1?this:(n.toArray(o,e*16),s.needsUpdate=!0,this)}getMatrixAt(e,n){const i=this._active,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?null:n.fromArray(s,e*16)}setVisibleAt(e,n){const i=this._visibility,s=this._active,o=this._geometryCount;return e>=o||s[e]===!1||i[e]===n?this:(i[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1?!1:n[e]}raycast(e,n){const i=this._visibility,s=this._active,o=this._drawRanges,a=this._geometryCount,c=this.matrixWorld,h=this.geometry;es.material=this.material,es.geometry.index=h.index,es.geometry.attributes=h.attributes,es.geometry.boundingBox===null&&(es.geometry.boundingBox=new Qr),es.geometry.boundingSphere===null&&(es.geometry.boundingSphere=new Hr);for(let d=0;d<a;d++){if(!i[d]||!s[d])continue;const f=o[d];es.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(d,es.matrixWorld).premultiply(c),this.getBoundingBoxAt(d,es.geometry.boundingBox),this.getBoundingSphereAt(d,es.geometry.boundingSphere),es.raycast(e,fb);for(let p=0,g=fb.length;p<g;p++){const y=fb[p];y.object=this,y.batchId=d,n.push(y)}fb.length=0}es.material=null,es.geometry.index=null,es.geometry.attributes={},es.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,i,s,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),c=a===null?1:a.array.BYTES_PER_ELEMENT,h=this._active,d=this._visibility,f=this._multiDrawStarts,p=this._multiDrawCounts,g=this._drawRanges,y=this.perObjectFrustumCulled;y&&(sD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),XC.setFromProjectionMatrix(sD,e.coordinateSystem));let b=0;if(this.sortObjects){rD.copy(this.matrixWorld).invert(),og.setFromMatrixPosition(i.matrixWorld).applyMatrix4(rD);for(let S=0,_=d.length;S<_;S++)if(d[S]&&h[S]){this.getMatrixAt(S,Gc),this.getBoundingSphereAt(S,bu).applyMatrix4(Gc);let O=!1;if(y&&(O=!XC.intersectsSphere(bu)),!O){const T=og.distanceTo(bu.center);WC.push(g[S],T)}}const w=WC.list,x=this.customSort;x===null?w.sort(o.transparent?h0e:c0e):x.call(this,w,i);for(let S=0,_=w.length;S<_;S++){const O=w[S];f[b]=O.start*c,p[b]=O.count,b++}WC.reset()}else for(let w=0,x=d.length;w<x;w++)if(d[w]&&h[w]){let S=!1;if(y&&(this.getMatrixAt(w,Gc),this.getBoundingSphereAt(w,bu).applyMatrix4(Gc),S=!XC.intersectsSphere(bu)),!S){const _=g[w];f[b]=_.start*c,p[b]=_.count,b++}}this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,n,i,s,o,a){this.onBeforeRender(e,null,s,o,a)}}class ls extends as{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const wO=new re,_O=new re,oD=new gt,ag=new Td,pb=new Hr,QC=new re,aD=new re;let cc=class extends Ni{constructor(e=new si,n=new ls){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let s=1,o=n.count;s<o;s++)wO.fromBufferAttribute(n,s-1),_O.fromBufferAttribute(n,s),i[s]=i[s-1],i[s]+=wO.distanceTo(_O);e.setAttribute("lineDistance",new Tt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),pb.copy(i.boundingSphere),pb.applyMatrix4(s),pb.radius+=o,e.ray.intersectsSphere(pb)===!1)return;oD.copy(s).invert(),ag.copy(e.ray).applyMatrix4(oD);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=this.isLineSegments?2:1,f=i.index,g=i.attributes.position;if(f!==null){const y=Math.max(0,a.start),b=Math.min(f.count,a.start+a.count);for(let w=y,x=b-1;w<x;w+=d){const S=f.getX(w),_=f.getX(w+1),O=mb(this,e,ag,h,S,_);O&&n.push(O)}if(this.isLineLoop){const w=f.getX(b-1),x=f.getX(y),S=mb(this,e,ag,h,w,x);S&&n.push(S)}}else{const y=Math.max(0,a.start),b=Math.min(g.count,a.start+a.count);for(let w=y,x=b-1;w<x;w+=d){const S=mb(this,e,ag,h,w,w+1);S&&n.push(S)}if(this.isLineLoop){const w=mb(this,e,ag,h,b-1,y);w&&n.push(w)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const c=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}};function mb(r,e,n,i,s,o){const a=r.geometry.attributes.position;if(wO.fromBufferAttribute(a,s),_O.fromBufferAttribute(a,o),n.distanceSqToSegment(wO,_O,QC,aD)>i)return;QC.applyMatrix4(r.matrixWorld);const h=e.ray.origin.distanceTo(QC);if(!(h<e.near||h>e.far))return{distance:h,point:aD.clone().applyMatrix4(r.matrixWorld),index:s,face:null,faceIndex:null,object:r}}const lD=new re,cD=new re;class ml extends cc{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let s=0,o=n.count;s<o;s+=2)lD.fromBufferAttribute(n,s),cD.fromBufferAttribute(n,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+lD.distanceTo(cD);e.setAttribute("lineDistance",new Tt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class u9 extends cc{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class TP extends as{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const hD=new gt,FT=new Td,gb=new Hr,yb=new re;class d9 extends Ni{constructor(e=new si,n=new TP){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),gb.copy(i.boundingSphere),gb.applyMatrix4(s),gb.radius+=o,e.ray.intersectsSphere(gb)===!1)return;hD.copy(s).invert(),FT.copy(e.ray).applyMatrix4(hD);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=i.index,p=i.attributes.position;if(d!==null){const g=Math.max(0,a.start),y=Math.min(d.count,a.start+a.count);for(let b=g,w=y;b<w;b++){const x=d.getX(b);yb.fromBufferAttribute(p,x),uD(yb,x,h,s,e,n,this)}}else{const g=Math.max(0,a.start),y=Math.min(p.count,a.start+a.count);for(let b=g,w=y;b<w;b++)yb.fromBufferAttribute(p,b),uD(yb,b,h,s,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const c=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}}function uD(r,e,n,i,s,o,a){const c=FT.distanceSqToPoint(r);if(c<n){const h=new re;FT.closestPointToPoint(r,h),h.applyMatrix4(i);const d=s.ray.origin.distanceTo(h);if(d<s.near||d>s.far)return;o.push({distance:d,distanceToRay:Math.sqrt(c),point:h,index:e,face:null,object:a})}}class p0e extends Hn{constructor(e,n,i,s,o,a,c,h,d){super(e,n,i,s,o,a,c,h,d),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Zn,this.magFilter=o!==void 0?o:Zn,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class zT extends Hn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=vr,this.minFilter=vr,this.generateMipmaps=!1,this.needsUpdate=!0}}class rd extends Hn{constructor(e,n,i,s,o,a,c,h,d,f,p,g){super(null,a,c,h,d,f,s,o,p,g),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class m0e extends rd{constructor(e,n,i,s,o,a){super(e,n,i,o,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=_s}}class g0e extends rd{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,ac),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class y0e extends Hn{constructor(e,n,i,s,o,a,c,h,d){super(e,n,i,s,o,a,c,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ra{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,s=this.getPoint(0),o=0;n.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),o+=i.distanceTo(s),n.push(o),s=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let s=0;const o=i.length;let a;n?a=n:a=e*i[o-1];let c=0,h=o-1,d;for(;c<=h;)if(s=Math.floor(c+(h-c)/2),d=i[s]-a,d<0)c=s+1;else if(d>0)h=s-1;else{h=s;break}if(s=h,i[s]===a)return s/(o-1);const f=i[s],g=i[s+1]-f,y=(a-f)/g;return(s+y)/(o-1)}getTangent(e,n){let s=e-1e-4,o=e+1e-4;s<0&&(s=0),o>1&&(o=1);const a=this.getPoint(s),c=this.getPoint(o),h=n||(a.isVector2?new Xe:new re);return h.copy(c).sub(a).normalize(),h}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new re,s=[],o=[],a=[],c=new re,h=new gt;for(let y=0;y<=e;y++){const b=y/e;s[y]=this.getTangentAt(b,new re)}o[0]=new re,a[0]=new re;let d=Number.MAX_VALUE;const f=Math.abs(s[0].x),p=Math.abs(s[0].y),g=Math.abs(s[0].z);f<=d&&(d=f,i.set(1,0,0)),p<=d&&(d=p,i.set(0,1,0)),g<=d&&i.set(0,0,1),c.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],c),a[0].crossVectors(s[0],o[0]);for(let y=1;y<=e;y++){if(o[y]=o[y-1].clone(),a[y]=a[y-1].clone(),c.crossVectors(s[y-1],s[y]),c.length()>Number.EPSILON){c.normalize();const b=Math.acos(Xn(s[y-1].dot(s[y]),-1,1));o[y].applyMatrix4(h.makeRotationAxis(c,b))}a[y].crossVectors(s[y],o[y])}if(n===!0){let y=Math.acos(Xn(o[0].dot(o[e]),-1,1));y/=e,s[0].dot(c.crossVectors(o[0],o[e]))>0&&(y=-y);for(let b=1;b<=e;b++)o[b].applyMatrix4(h.makeRotationAxis(s[b],y*b)),a[b].crossVectors(s[b],o[b])}return{tangents:s,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Uw extends ra{constructor(e=0,n=0,i=1,s=1,o=0,a=Math.PI*2,c=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=c,this.aRotation=h}getPoint(e,n=new Xe){const i=n,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(a?o=0:o=s),this.aClockwise===!0&&!a&&(o===s?o=-s:o=o-s);const c=this.aStartAngle+e*o;let h=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=h-this.aX,y=d-this.aY;h=g*f-y*p+this.aX,d=g*p+y*f+this.aY}return i.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class f9 extends Uw{constructor(e,n,i,s,o,a){super(e,n,i,i,s,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function MP(){let r=0,e=0,n=0,i=0;function s(o,a,c,h){r=o,e=c,n=-3*o+3*a-2*c-h,i=2*o-2*a+c+h}return{initCatmullRom:function(o,a,c,h,d){s(a,c,d*(c-o),d*(h-a))},initNonuniformCatmullRom:function(o,a,c,h,d,f,p){let g=(a-o)/d-(c-o)/(d+f)+(c-a)/f,y=(c-a)/f-(h-a)/(f+p)+(h-c)/p;g*=f,y*=f,s(a,c,g,y)},calc:function(o){const a=o*o,c=a*o;return r+e*o+n*a+i*c}}}const vb=new re,HC=new MP,GC=new MP,YC=new MP;class p9 extends ra{constructor(e=[],n=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=s}getPoint(e,n=new re){const i=n,s=this.points,o=s.length,a=(o-(this.closed?0:1))*e;let c=Math.floor(a),h=a-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/o)+1)*o:h===0&&c===o-1&&(c=o-2,h=1);let d,f;this.closed||c>0?d=s[(c-1)%o]:(vb.subVectors(s[0],s[1]).add(s[0]),d=vb);const p=s[c%o],g=s[(c+1)%o];if(this.closed||c+2<o?f=s[(c+2)%o]:(vb.subVectors(s[o-1],s[o-2]).add(s[o-1]),f=vb),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let b=Math.pow(d.distanceToSquared(p),y),w=Math.pow(p.distanceToSquared(g),y),x=Math.pow(g.distanceToSquared(f),y);w<1e-4&&(w=1),b<1e-4&&(b=w),x<1e-4&&(x=w),HC.initNonuniformCatmullRom(d.x,p.x,g.x,f.x,b,w,x),GC.initNonuniformCatmullRom(d.y,p.y,g.y,f.y,b,w,x),YC.initNonuniformCatmullRom(d.z,p.z,g.z,f.z,b,w,x)}else this.curveType==="catmullrom"&&(HC.initCatmullRom(d.x,p.x,g.x,f.x,this.tension),GC.initCatmullRom(d.y,p.y,g.y,f.y,this.tension),YC.initCatmullRom(d.z,p.z,g.z,f.z,this.tension));return i.set(HC.calc(h),GC.calc(h),YC.calc(h)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const s=this.points[n];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(new re().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function dD(r,e,n,i,s){const o=(i-e)*.5,a=(s-n)*.5,c=r*r,h=r*c;return(2*n-2*i+o+a)*h+(-3*n+3*i-2*o-a)*c+o*r+n}function v0e(r,e){const n=1-r;return n*n*e}function b0e(r,e){return 2*(1-r)*r*e}function x0e(r,e){return r*r*e}function B0(r,e,n,i){return v0e(r,e)+b0e(r,n)+x0e(r,i)}function O0e(r,e){const n=1-r;return n*n*n*e}function w0e(r,e){const n=1-r;return 3*n*n*r*e}function _0e(r,e){return 3*(1-r)*r*r*e}function S0e(r,e){return r*r*r*e}function U0(r,e,n,i,s){return O0e(r,e)+w0e(r,n)+_0e(r,i)+S0e(r,s)}class EP extends ra{constructor(e=new Xe,n=new Xe,i=new Xe,s=new Xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=s}getPoint(e,n=new Xe){const i=n,s=this.v0,o=this.v1,a=this.v2,c=this.v3;return i.set(U0(e,s.x,o.x,a.x,c.x),U0(e,s.y,o.y,a.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class m9 extends ra{constructor(e=new re,n=new re,i=new re,s=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=s}getPoint(e,n=new re){const i=n,s=this.v0,o=this.v1,a=this.v2,c=this.v3;return i.set(U0(e,s.x,o.x,a.x,c.x),U0(e,s.y,o.y,a.y,c.y),U0(e,s.z,o.z,a.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class PP extends ra{constructor(e=new Xe,n=new Xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Xe){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Xe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g9 extends ra{constructor(e=new re,n=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new re){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new re){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Fw extends ra{constructor(e=new Xe,n=new Xe,i=new Xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Xe){const i=n,s=this.v0,o=this.v1,a=this.v2;return i.set(B0(e,s.x,o.x,a.x),B0(e,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AP extends ra{constructor(e=new re,n=new re,i=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new re){const i=n,s=this.v0,o=this.v1,a=this.v2;return i.set(B0(e,s.x,o.x,a.x),B0(e,s.y,o.y,a.y),B0(e,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RP extends ra{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Xe){const i=n,s=this.points,o=(s.length-1)*e,a=Math.floor(o),c=o-a,h=s[a===0?a:a-1],d=s[a],f=s[a>s.length-2?s.length-1:a+1],p=s[a>s.length-3?s.length-1:a+2];return i.set(dD(c,h.x,d.x,f.x,p.x),dD(c,h.y,d.y,f.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const s=this.points[n];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(new Xe().fromArray(s))}return this}}var SO=Object.freeze({__proto__:null,ArcCurve:f9,CatmullRomCurve3:p9,CubicBezierCurve:EP,CubicBezierCurve3:m9,EllipseCurve:Uw,LineCurve:PP,LineCurve3:g9,QuadraticBezierCurve:Fw,QuadraticBezierCurve3:AP,SplineCurve:RP});class y9 extends ra{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new SO[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=i){const a=s[o]-i,c=this.curves[o],h=c.getLength(),d=h===0?0:1-a/h;return c.getPointAt(d,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,s=this.curves.length;i<s;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let s=0,o=this.curves;s<o.length;s++){const a=o[s],c=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,h=a.getPoints(c);for(let d=0;d<h.length;d++){const f=h[d];i&&i.equals(f)||(n.push(f),i=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const s=e.curves[n];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const s=this.curves[n];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const s=e.curves[n];this.curves.push(new SO[s.type]().fromJSON(s))}return this}}let vy=class extends y9{constructor(e){super(),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new PP(this.currentPoint.clone(),new Xe(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,s){const o=new Fw(this.currentPoint.clone(),new Xe(e,n),new Xe(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}bezierCurveTo(e,n,i,s,o,a){const c=new EP(this.currentPoint.clone(),new Xe(e,n),new Xe(i,s),new Xe(o,a));return this.curves.push(c),this.currentPoint.set(o,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new RP(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,s,o,a){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+c,n+h,i,s,o,a),this}absarc(e,n,i,s,o,a){return this.absellipse(e,n,i,i,s,o,a),this}ellipse(e,n,i,s,o,a,c,h){const d=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+d,n+f,i,s,o,a,c,h),this}absellipse(e,n,i,s,o,a,c,h){const d=new Uw(e,n,i,s,o,a,c,h);if(this.curves.length>0){const p=d.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(d);const f=d.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class fv extends si{constructor(e=[new Xe(0,-.5),new Xe(.5,0),new Xe(0,.5)],n=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:s},n=Math.floor(n),s=Xn(s,0,Math.PI*2);const o=[],a=[],c=[],h=[],d=[],f=1/n,p=new re,g=new Xe,y=new re,b=new re,w=new re;let x=0,S=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,y.x=S*1,y.y=-x,y.z=S*0,w.copy(y),y.normalize(),h.push(y.x,y.y,y.z);break;case e.length-1:h.push(w.x,w.y,w.z);break;default:x=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,y.x=S*1,y.y=-x,y.z=S*0,b.copy(y),y.x+=w.x,y.y+=w.y,y.z+=w.z,y.normalize(),h.push(y.x,y.y,y.z),w.copy(b)}for(let _=0;_<=n;_++){const O=i+_*f*s,T=Math.sin(O),E=Math.cos(O);for(let P=0;P<=e.length-1;P++){p.x=e[P].x*T,p.y=e[P].y,p.z=e[P].x*E,a.push(p.x,p.y,p.z),g.x=_/n,g.y=P/(e.length-1),c.push(g.x,g.y);const I=h[3*P+0]*T,A=h[3*P+1],D=h[3*P+0]*E;d.push(I,A,D)}}for(let _=0;_<n;_++)for(let O=0;O<e.length-1;O++){const T=O+_*e.length,E=T,P=T+e.length,I=T+e.length+1,A=T+1;o.push(E,P,A),o.push(I,A,P)}this.setIndex(o),this.setAttribute("position",new Tt(a,3)),this.setAttribute("uv",new Tt(c,2)),this.setAttribute("normal",new Tt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fv(e.points,e.segments,e.phiStart,e.phiLength)}}class zw extends fv{constructor(e=1,n=1,i=4,s=8){const o=new vy;o.absarc(0,-n/2,e,Math.PI*1.5,0),o.absarc(0,n/2,e,0,Math.PI*.5),super(o.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:i,radialSegments:s}}static fromJSON(e){return new zw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Xw extends si{constructor(e=1,n=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:s},n=Math.max(3,n);const o=[],a=[],c=[],h=[],d=new re,f=new Xe;a.push(0,0,0),c.push(0,0,1),h.push(.5,.5);for(let p=0,g=3;p<=n;p++,g+=3){const y=i+p/n*s;d.x=e*Math.cos(y),d.y=e*Math.sin(y),a.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(a[g]/e+1)/2,f.y=(a[g+1]/e+1)/2,h.push(f.x,f.y)}for(let p=1;p<=n;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new Tt(a,3)),this.setAttribute("normal",new Tt(c,3)),this.setAttribute("uv",new Tt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class em extends si{constructor(e=1,n=1,i=1,s=32,o=1,a=!1,c=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:c,thetaLength:h};const d=this;s=Math.floor(s),o=Math.floor(o);const f=[],p=[],g=[],y=[];let b=0;const w=[],x=i/2;let S=0;_(),a===!1&&(e>0&&O(!0),n>0&&O(!1)),this.setIndex(f),this.setAttribute("position",new Tt(p,3)),this.setAttribute("normal",new Tt(g,3)),this.setAttribute("uv",new Tt(y,2));function _(){const T=new re,E=new re;let P=0;const I=(n-e)/i;for(let A=0;A<=o;A++){const D=[],M=A/o,$=M*(n-e)+e;for(let L=0;L<=s;L++){const N=L/s,V=N*h+c,U=Math.sin(V),F=Math.cos(V);E.x=$*U,E.y=-M*i+x,E.z=$*F,p.push(E.x,E.y,E.z),T.set(U,I,F).normalize(),g.push(T.x,T.y,T.z),y.push(N,1-M),D.push(b++)}w.push(D)}for(let A=0;A<s;A++)for(let D=0;D<o;D++){const M=w[D][A],$=w[D+1][A],L=w[D+1][A+1],N=w[D][A+1];f.push(M,$,N),f.push($,L,N),P+=6}d.addGroup(S,P,0),S+=P}function O(T){const E=b,P=new Xe,I=new re;let A=0;const D=T===!0?e:n,M=T===!0?1:-1;for(let L=1;L<=s;L++)p.push(0,x*M,0),g.push(0,M,0),y.push(.5,.5),b++;const $=b;for(let L=0;L<=s;L++){const V=L/s*h+c,U=Math.cos(V),F=Math.sin(V);I.x=D*F,I.y=x*M,I.z=D*U,p.push(I.x,I.y,I.z),g.push(0,M,0),P.x=U*.5+.5,P.y=F*.5*M+.5,y.push(P.x,P.y),b++}for(let L=0;L<s;L++){const N=E+L,V=$+L;T===!0?f.push(V,V+1,N):f.push(V+1,V,N),A+=3}d.addGroup(S,A,T===!0?1:2),S+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new em(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ww extends em{constructor(e=1,n=1,i=32,s=1,o=!1,a=0,c=Math.PI*2){super(0,e,n,i,s,o,a,c),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c}}static fromJSON(e){return new Ww(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qh extends si{constructor(e=[],n=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:s};const o=[],a=[];c(s),d(i),f(),this.setAttribute("position",new Tt(o,3)),this.setAttribute("normal",new Tt(o.slice(),3)),this.setAttribute("uv",new Tt(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function c(_){const O=new re,T=new re,E=new re;for(let P=0;P<n.length;P+=3)y(n[P+0],O),y(n[P+1],T),y(n[P+2],E),h(O,T,E,_)}function h(_,O,T,E){const P=E+1,I=[];for(let A=0;A<=P;A++){I[A]=[];const D=_.clone().lerp(T,A/P),M=O.clone().lerp(T,A/P),$=P-A;for(let L=0;L<=$;L++)L===0&&A===P?I[A][L]=D:I[A][L]=D.clone().lerp(M,L/$)}for(let A=0;A<P;A++)for(let D=0;D<2*(P-A)-1;D++){const M=Math.floor(D/2);D%2===0?(g(I[A][M+1]),g(I[A+1][M]),g(I[A][M])):(g(I[A][M+1]),g(I[A+1][M+1]),g(I[A+1][M]))}}function d(_){const O=new re;for(let T=0;T<o.length;T+=3)O.x=o[T+0],O.y=o[T+1],O.z=o[T+2],O.normalize().multiplyScalar(_),o[T+0]=O.x,o[T+1]=O.y,o[T+2]=O.z}function f(){const _=new re;for(let O=0;O<o.length;O+=3){_.x=o[O+0],_.y=o[O+1],_.z=o[O+2];const T=x(_)/2/Math.PI+.5,E=S(_)/Math.PI+.5;a.push(T,1-E)}b(),p()}function p(){for(let _=0;_<a.length;_+=6){const O=a[_+0],T=a[_+2],E=a[_+4],P=Math.max(O,T,E),I=Math.min(O,T,E);P>.9&&I<.1&&(O<.2&&(a[_+0]+=1),T<.2&&(a[_+2]+=1),E<.2&&(a[_+4]+=1))}}function g(_){o.push(_.x,_.y,_.z)}function y(_,O){const T=_*3;O.x=e[T+0],O.y=e[T+1],O.z=e[T+2]}function b(){const _=new re,O=new re,T=new re,E=new re,P=new Xe,I=new Xe,A=new Xe;for(let D=0,M=0;D<o.length;D+=9,M+=6){_.set(o[D+0],o[D+1],o[D+2]),O.set(o[D+3],o[D+4],o[D+5]),T.set(o[D+6],o[D+7],o[D+8]),P.set(a[M+0],a[M+1]),I.set(a[M+2],a[M+3]),A.set(a[M+4],a[M+5]),E.copy(_).add(O).add(T).divideScalar(3);const $=x(E);w(P,M+0,_,$),w(I,M+2,O,$),w(A,M+4,T,$)}}function w(_,O,T,E){E<0&&_.x===1&&(a[O]=_.x-1),T.x===0&&T.z===0&&(a[O]=E/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function S(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qh(e.vertices,e.indices,e.radius,e.details)}}class Qw extends Qh{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,s=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Qw(e.radius,e.detail)}}const bb=new re,xb=new re,jC=new re,Ob=new Gs;class v9 extends si{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const s=Math.pow(10,4),o=Math.cos(nd*n),a=e.getIndex(),c=e.getAttribute("position"),h=a?a.count:c.count,d=[0,0,0],f=["a","b","c"],p=new Array(3),g={},y=[];for(let b=0;b<h;b+=3){a?(d[0]=a.getX(b),d[1]=a.getX(b+1),d[2]=a.getX(b+2)):(d[0]=b,d[1]=b+1,d[2]=b+2);const{a:w,b:x,c:S}=Ob;if(w.fromBufferAttribute(c,d[0]),x.fromBufferAttribute(c,d[1]),S.fromBufferAttribute(c,d[2]),Ob.getNormal(jC),p[0]=`${Math.round(w.x*s)},${Math.round(w.y*s)},${Math.round(w.z*s)}`,p[1]=`${Math.round(x.x*s)},${Math.round(x.y*s)},${Math.round(x.z*s)}`,p[2]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let _=0;_<3;_++){const O=(_+1)%3,T=p[_],E=p[O],P=Ob[f[_]],I=Ob[f[O]],A=`${T}_${E}`,D=`${E}_${T}`;D in g&&g[D]?(jC.dot(g[D].normal)<=o&&(y.push(P.x,P.y,P.z),y.push(I.x,I.y,I.z)),g[D]=null):A in g||(g[A]={index0:d[_],index1:d[O],normal:jC.clone()})}}for(const b in g)if(g[b]){const{index0:w,index1:x}=g[b];bb.fromBufferAttribute(c,w),xb.fromBufferAttribute(c,x),y.push(bb.x,bb.y,bb.z),y.push(xb.x,xb.y,xb.z)}this.setAttribute("position",new Tt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let sd=class extends vy{constructor(e){super(e),this.uuid=Eo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,s=this.holes.length;i<s;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const s=e.holes[n];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const s=this.holes[n];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const s=e.holes[n];this.holes.push(new vy().fromJSON(s))}return this}};const C0e={triangulate:function(r,e,n=2){const i=e&&e.length,s=i?e[0]*n:r.length;let o=b9(r,0,s,n,!0);const a=[];if(!o||o.next===o.prev)return a;let c,h,d,f,p,g,y;if(i&&(o=P0e(r,e,o,n)),r.length>80*n){c=d=r[0],h=f=r[1];for(let b=n;b<s;b+=n)p=r[b],g=r[b+1],p<c&&(c=p),g<h&&(h=g),p>d&&(d=p),g>f&&(f=g);y=Math.max(d-c,f-h),y=y!==0?32767/y:0}return by(o,a,n,c,h,y,0),a}};function b9(r,e,n,i,s){let o,a;if(s===F0e(r,e,n,i)>0)for(o=e;o<n;o+=i)a=fD(o,r[o],r[o+1],a);else for(o=n-i;o>=e;o-=i)a=fD(o,r[o],r[o+1],a);return a&&Hw(a,a.next)&&(Oy(a),a=a.next),a}function md(r,e){if(!r)return r;e||(e=r);let n=r,i;do if(i=!1,!n.steiner&&(Hw(n,n.next)||$n(n.prev,n,n.next)===0)){if(Oy(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function by(r,e,n,i,s,o,a){if(!r)return;!a&&o&&N0e(r,i,s,o);let c=r,h,d;for(;r.prev!==r.next;){if(h=r.prev,d=r.next,o?T0e(r,i,s,o):k0e(r)){e.push(h.i/n|0),e.push(r.i/n|0),e.push(d.i/n|0),Oy(r),r=d.next,c=d.next;continue}if(r=d,r===c){a?a===1?(r=M0e(md(r),e,n),by(r,e,n,i,s,o,2)):a===2&&E0e(r,e,n,i,s,o):by(md(r),e,n,i,s,o,1);break}}}function k0e(r){const e=r.prev,n=r,i=r.next;if($n(e,n,i)>=0)return!1;const s=e.x,o=n.x,a=i.x,c=e.y,h=n.y,d=i.y,f=s<o?s<a?s:a:o<a?o:a,p=c<h?c<d?c:d:h<d?h:d,g=s>o?s>a?s:a:o>a?o:a,y=c>h?c>d?c:d:h>d?h:d;let b=i.next;for(;b!==e;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=y&&Bf(s,c,o,h,a,d,b.x,b.y)&&$n(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function T0e(r,e,n,i){const s=r.prev,o=r,a=r.next;if($n(s,o,a)>=0)return!1;const c=s.x,h=o.x,d=a.x,f=s.y,p=o.y,g=a.y,y=c<h?c<d?c:d:h<d?h:d,b=f<p?f<g?f:g:p<g?p:g,w=c>h?c>d?c:d:h>d?h:d,x=f>p?f>g?f:g:p>g?p:g,S=XT(y,b,e,n,i),_=XT(w,x,e,n,i);let O=r.prevZ,T=r.nextZ;for(;O&&O.z>=S&&T&&T.z<=_;){if(O.x>=y&&O.x<=w&&O.y>=b&&O.y<=x&&O!==s&&O!==a&&Bf(c,f,h,p,d,g,O.x,O.y)&&$n(O.prev,O,O.next)>=0||(O=O.prevZ,T.x>=y&&T.x<=w&&T.y>=b&&T.y<=x&&T!==s&&T!==a&&Bf(c,f,h,p,d,g,T.x,T.y)&&$n(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;O&&O.z>=S;){if(O.x>=y&&O.x<=w&&O.y>=b&&O.y<=x&&O!==s&&O!==a&&Bf(c,f,h,p,d,g,O.x,O.y)&&$n(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;T&&T.z<=_;){if(T.x>=y&&T.x<=w&&T.y>=b&&T.y<=x&&T!==s&&T!==a&&Bf(c,f,h,p,d,g,T.x,T.y)&&$n(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function M0e(r,e,n){let i=r;do{const s=i.prev,o=i.next.next;!Hw(s,o)&&x9(s,i,i.next,o)&&xy(s,o)&&xy(o,s)&&(e.push(s.i/n|0),e.push(i.i/n|0),e.push(o.i/n|0),Oy(i),Oy(i.next),i=r=o),i=i.next}while(i!==r);return md(i)}function E0e(r,e,n,i,s,o){let a=r;do{let c=a.next.next;for(;c!==a.prev;){if(a.i!==c.i&&L0e(a,c)){let h=O9(a,c);a=md(a,a.next),h=md(h,h.next),by(a,e,n,i,s,o,0),by(h,e,n,i,s,o,0);return}c=c.next}a=a.next}while(a!==r)}function P0e(r,e,n,i){const s=[];let o,a,c,h,d;for(o=0,a=e.length;o<a;o++)c=e[o]*i,h=o<a-1?e[o+1]*i:r.length,d=b9(r,c,h,i,!1),d===d.next&&(d.steiner=!0),s.push(V0e(d));for(s.sort(A0e),o=0;o<s.length;o++)n=R0e(s[o],n);return n}function A0e(r,e){return r.x-e.x}function R0e(r,e){const n=I0e(r,e);if(!n)return e;const i=O9(n,r);return md(i,i.next),md(n,n.next)}function I0e(r,e){let n=e,i=-1/0,s;const o=r.x,a=r.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const g=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(g<=o&&g>i&&(i=g,s=n.x<n.next.x?n:n.next,g===o))return s}n=n.next}while(n!==e);if(!s)return null;const c=s,h=s.x,d=s.y;let f=1/0,p;n=s;do o>=n.x&&n.x>=h&&o!==n.x&&Bf(a<d?o:i,a,h,d,a<d?i:o,a,n.x,n.y)&&(p=Math.abs(a-n.y)/(o-n.x),xy(n,r)&&(p<f||p===f&&(n.x>s.x||n.x===s.x&&D0e(s,n)))&&(s=n,f=p)),n=n.next;while(n!==c);return s}function D0e(r,e){return $n(r.prev,r,e.prev)<0&&$n(e.next,r,r.next)<0}function N0e(r,e,n,i){let s=r;do s.z===0&&(s.z=XT(s.x,s.y,e,n,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,$0e(s)}function $0e(r){let e,n,i,s,o,a,c,h,d=1;do{for(n=r,r=null,o=null,a=0;n;){for(a++,i=n,c=0,e=0;e<d&&(c++,i=i.nextZ,!!i);e++);for(h=d;c>0||h>0&&i;)c!==0&&(h===0||!i||n.z<=i.z)?(s=n,n=n.nextZ,c--):(s=i,i=i.nextZ,h--),o?o.nextZ=s:r=s,s.prevZ=o,o=s;n=i}o.nextZ=null,d*=2}while(a>1);return r}function XT(r,e,n,i,s){return r=(r-n)*s|0,e=(e-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function V0e(r){let e=r,n=r;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==r);return n}function Bf(r,e,n,i,s,o,a,c){return(s-a)*(e-c)>=(r-a)*(o-c)&&(r-a)*(i-c)>=(n-a)*(e-c)&&(n-a)*(o-c)>=(s-a)*(i-c)}function L0e(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!B0e(r,e)&&(xy(r,e)&&xy(e,r)&&U0e(r,e)&&($n(r.prev,r,e.prev)||$n(r,e.prev,e))||Hw(r,e)&&$n(r.prev,r,r.next)>0&&$n(e.prev,e,e.next)>0)}function $n(r,e,n){return(e.y-r.y)*(n.x-e.x)-(e.x-r.x)*(n.y-e.y)}function Hw(r,e){return r.x===e.x&&r.y===e.y}function x9(r,e,n,i){const s=_b($n(r,e,n)),o=_b($n(r,e,i)),a=_b($n(n,i,r)),c=_b($n(n,i,e));return!!(s!==o&&a!==c||s===0&&wb(r,n,e)||o===0&&wb(r,i,e)||a===0&&wb(n,r,i)||c===0&&wb(n,e,i))}function wb(r,e,n){return e.x<=Math.max(r.x,n.x)&&e.x>=Math.min(r.x,n.x)&&e.y<=Math.max(r.y,n.y)&&e.y>=Math.min(r.y,n.y)}function _b(r){return r>0?1:r<0?-1:0}function B0e(r,e){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==e.i&&n.next.i!==e.i&&x9(n,n.next,r,e))return!0;n=n.next}while(n!==r);return!1}function xy(r,e){return $n(r.prev,r,r.next)<0?$n(r,e,r.next)>=0&&$n(r,r.prev,e)>=0:$n(r,e,r.prev)<0||$n(r,r.next,e)<0}function U0e(r,e){let n=r,i=!1;const s=(r.x+e.x)/2,o=(r.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&s<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==r);return i}function O9(r,e){const n=new WT(r.i,r.x,r.y),i=new WT(e.i,e.x,e.y),s=r.next,o=e.prev;return r.next=e,e.prev=r,n.next=s,s.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function fD(r,e,n,i){const s=new WT(r,e,n);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Oy(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function WT(r,e,n){this.i=r,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F0e(r,e,n,i){let s=0;for(let o=e,a=n-i;o<n;o+=i)s+=(r[a]-r[o])*(r[o+1]+r[a+1]),a=o;return s}class ol{static area(e){const n=e.length;let i=0;for(let s=n-1,o=0;o<n;s=o++)i+=e[s].x*e[o].y-e[o].x*e[s].y;return i*.5}static isClockWise(e){return ol.area(e)<0}static triangulateShape(e,n){const i=[],s=[],o=[];pD(e),mD(i,e);let a=e.length;n.forEach(pD);for(let h=0;h<n.length;h++)s.push(a),a+=n[h].length,mD(i,n[h]);const c=C0e.triangulate(i,s);for(let h=0;h<c.length;h+=3)o.push(c.slice(h,h+3));return o}}function pD(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function mD(r,e){for(let n=0;n<e.length;n++)r.push(e[n].x),r.push(e[n].y)}class Gw extends si{constructor(e=new sd([new Xe(.5,.5),new Xe(-.5,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,s=[],o=[];for(let c=0,h=e.length;c<h;c++){const d=e[c];a(d)}this.setAttribute("position",new Tt(s,3)),this.setAttribute("uv",new Tt(o,2)),this.computeVertexNormals();function a(c){const h=[],d=n.curveSegments!==void 0?n.curveSegments:12,f=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,y=n.bevelThickness!==void 0?n.bevelThickness:.2,b=n.bevelSize!==void 0?n.bevelSize:y-.1,w=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const S=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:z0e;let O,T=!1,E,P,I,A;S&&(O=S.getSpacedPoints(f),T=!0,g=!1,E=S.computeFrenetFrames(f,!1),P=new re,I=new re,A=new re),g||(x=0,y=0,b=0,w=0);const D=c.extractPoints(d);let M=D.shape;const $=D.holes;if(!ol.isClockWise(M)){M=M.reverse();for(let se=0,Q=$.length;se<Q;se++){const Z=$[se];ol.isClockWise(Z)&&($[se]=Z.reverse())}}const N=ol.triangulateShape(M,$),V=M;for(let se=0,Q=$.length;se<Q;se++){const Z=$[se];M=M.concat(Z)}function U(se,Q,Z){return Q||console.error("THREE.ExtrudeGeometry: vec does not exist"),se.clone().addScaledVector(Q,Z)}const F=M.length,H=N.length;function K(se,Q,Z){let le,pe,be;const Ee=se.x-Q.x,ee=se.y-Q.y,Y=Z.x-se.x,de=Z.y-se.y,fe=Ee*Ee+ee*ee,we=Ee*de-ee*Y;if(Math.abs(we)>Number.EPSILON){const Me=Math.sqrt(fe),Qe=Math.sqrt(Y*Y+de*de),Le=Q.x-ee/Me,ze=Q.y+Ee/Me,ot=Z.x-de/Qe,Ye=Z.y+Y/Qe,st=((ot-Le)*de-(Ye-ze)*Y)/(Ee*de-ee*Y);le=Le+Ee*st-se.x,pe=ze+ee*st-se.y;const Mt=le*le+pe*pe;if(Mt<=2)return new Xe(le,pe);be=Math.sqrt(Mt/2)}else{let Me=!1;Ee>Number.EPSILON?Y>Number.EPSILON&&(Me=!0):Ee<-Number.EPSILON?Y<-Number.EPSILON&&(Me=!0):Math.sign(ee)===Math.sign(de)&&(Me=!0),Me?(le=-ee,pe=Ee,be=Math.sqrt(fe)):(le=Ee,pe=ee,be=Math.sqrt(fe/2))}return new Xe(le/be,pe/be)}const ie=[];for(let se=0,Q=V.length,Z=Q-1,le=se+1;se<Q;se++,Z++,le++)Z===Q&&(Z=0),le===Q&&(le=0),ie[se]=K(V[se],V[Z],V[le]);const he=[];let me,Pe=ie.concat();for(let se=0,Q=$.length;se<Q;se++){const Z=$[se];me=[];for(let le=0,pe=Z.length,be=pe-1,Ee=le+1;le<pe;le++,be++,Ee++)be===pe&&(be=0),Ee===pe&&(Ee=0),me[le]=K(Z[le],Z[be],Z[Ee]);he.push(me),Pe=Pe.concat(me)}for(let se=0;se<x;se++){const Q=se/x,Z=y*Math.cos(Q*Math.PI/2),le=b*Math.sin(Q*Math.PI/2)+w;for(let pe=0,be=V.length;pe<be;pe++){const Ee=U(V[pe],ie[pe],le);J(Ee.x,Ee.y,-Z)}for(let pe=0,be=$.length;pe<be;pe++){const Ee=$[pe];me=he[pe];for(let ee=0,Y=Ee.length;ee<Y;ee++){const de=U(Ee[ee],me[ee],le);J(de.x,de.y,-Z)}}}const _e=b+w;for(let se=0;se<F;se++){const Q=g?U(M[se],Pe[se],_e):M[se];T?(I.copy(E.normals[0]).multiplyScalar(Q.x),P.copy(E.binormals[0]).multiplyScalar(Q.y),A.copy(O[0]).add(I).add(P),J(A.x,A.y,A.z)):J(Q.x,Q.y,0)}for(let se=1;se<=f;se++)for(let Q=0;Q<F;Q++){const Z=g?U(M[Q],Pe[Q],_e):M[Q];T?(I.copy(E.normals[se]).multiplyScalar(Z.x),P.copy(E.binormals[se]).multiplyScalar(Z.y),A.copy(O[se]).add(I).add(P),J(A.x,A.y,A.z)):J(Z.x,Z.y,p/f*se)}for(let se=x-1;se>=0;se--){const Q=se/x,Z=y*Math.cos(Q*Math.PI/2),le=b*Math.sin(Q*Math.PI/2)+w;for(let pe=0,be=V.length;pe<be;pe++){const Ee=U(V[pe],ie[pe],le);J(Ee.x,Ee.y,p+Z)}for(let pe=0,be=$.length;pe<be;pe++){const Ee=$[pe];me=he[pe];for(let ee=0,Y=Ee.length;ee<Y;ee++){const de=U(Ee[ee],me[ee],le);T?J(de.x,de.y+O[f-1].y,O[f-1].x+Z):J(de.x,de.y,p+Z)}}}ue(),Se();function ue(){const se=s.length/3;if(g){let Q=0,Z=F*Q;for(let le=0;le<H;le++){const pe=N[le];q(pe[2]+Z,pe[1]+Z,pe[0]+Z)}Q=f+x*2,Z=F*Q;for(let le=0;le<H;le++){const pe=N[le];q(pe[0]+Z,pe[1]+Z,pe[2]+Z)}}else{for(let Q=0;Q<H;Q++){const Z=N[Q];q(Z[2],Z[1],Z[0])}for(let Q=0;Q<H;Q++){const Z=N[Q];q(Z[0]+F*f,Z[1]+F*f,Z[2]+F*f)}}i.addGroup(se,s.length/3-se,0)}function Se(){const se=s.length/3;let Q=0;ke(V,Q),Q+=V.length;for(let Z=0,le=$.length;Z<le;Z++){const pe=$[Z];ke(pe,Q),Q+=pe.length}i.addGroup(se,s.length/3-se,1)}function ke(se,Q){let Z=se.length;for(;--Z>=0;){const le=Z;let pe=Z-1;pe<0&&(pe=se.length-1);for(let be=0,Ee=f+x*2;be<Ee;be++){const ee=F*be,Y=F*(be+1),de=Q+le+ee,fe=Q+pe+ee,we=Q+pe+Y,Me=Q+le+Y;z(de,fe,we,Me)}}}function J(se,Q,Z){h.push(se),h.push(Q),h.push(Z)}function q(se,Q,Z){X(se),X(Q),X(Z);const le=s.length/3,pe=_.generateTopUV(i,s,le-3,le-2,le-1);te(pe[0]),te(pe[1]),te(pe[2])}function z(se,Q,Z,le){X(se),X(Q),X(le),X(Q),X(Z),X(le);const pe=s.length/3,be=_.generateSideWallUV(i,s,pe-6,pe-3,pe-2,pe-1);te(be[0]),te(be[1]),te(be[3]),te(be[1]),te(be[2]),te(be[3])}function X(se){s.push(h[se*3+0]),s.push(h[se*3+1]),s.push(h[se*3+2])}function te(se){o.push(se.x),o.push(se.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return X0e(n,i,e)}static fromJSON(e,n){const i=[];for(let o=0,a=e.shapes.length;o<a;o++){const c=n[e.shapes[o]];i.push(c)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new SO[s.type]().fromJSON(s)),new Gw(i,e.options)}}const z0e={generateTopUV:function(r,e,n,i,s){const o=e[n*3],a=e[n*3+1],c=e[i*3],h=e[i*3+1],d=e[s*3],f=e[s*3+1];return[new Xe(o,a),new Xe(c,h),new Xe(d,f)]},generateSideWallUV:function(r,e,n,i,s,o){const a=e[n*3],c=e[n*3+1],h=e[n*3+2],d=e[i*3],f=e[i*3+1],p=e[i*3+2],g=e[s*3],y=e[s*3+1],b=e[s*3+2],w=e[o*3],x=e[o*3+1],S=e[o*3+2];return Math.abs(c-f)<Math.abs(a-d)?[new Xe(a,1-h),new Xe(d,1-p),new Xe(g,1-b),new Xe(w,1-S)]:[new Xe(c,1-h),new Xe(f,1-p),new Xe(y,1-b),new Xe(x,1-S)]}};function X0e(r,e,n){if(n.shapes=[],Array.isArray(r))for(let i=0,s=r.length;i<s;i++){const o=r[i];n.shapes.push(o.uuid)}else n.shapes.push(r.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Yw extends Qh{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Yw(e.radius,e.detail)}}class pv extends Qh{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new pv(e.radius,e.detail)}}class jw extends si{constructor(e=.5,n=1,i=32,s=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:s,thetaStart:o,thetaLength:a},i=Math.max(3,i),s=Math.max(1,s);const c=[],h=[],d=[],f=[];let p=e;const g=(n-e)/s,y=new re,b=new Xe;for(let w=0;w<=s;w++){for(let x=0;x<=i;x++){const S=o+x/i*a;y.x=p*Math.cos(S),y.y=p*Math.sin(S),h.push(y.x,y.y,y.z),d.push(0,0,1),b.x=(y.x/n+1)/2,b.y=(y.y/n+1)/2,f.push(b.x,b.y)}p+=g}for(let w=0;w<s;w++){const x=w*(i+1);for(let S=0;S<i;S++){const _=S+x,O=_,T=_+i+1,E=_+i+2,P=_+1;c.push(O,T,P),c.push(T,E,P)}}this.setIndex(c),this.setAttribute("position",new Tt(h,3)),this.setAttribute("normal",new Tt(d,3)),this.setAttribute("uv",new Tt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class qw extends si{constructor(e=new sd([new Xe(0,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],s=[],o=[],a=[];let c=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let f=0;f<e.length;f++)d(e[f]),this.addGroup(c,h,f),c+=h,h=0;this.setIndex(i),this.setAttribute("position",new Tt(s,3)),this.setAttribute("normal",new Tt(o,3)),this.setAttribute("uv",new Tt(a,2));function d(f){const p=s.length/3,g=f.extractPoints(n);let y=g.shape;const b=g.holes;ol.isClockWise(y)===!1&&(y=y.reverse());for(let x=0,S=b.length;x<S;x++){const _=b[x];ol.isClockWise(_)===!0&&(b[x]=_.reverse())}const w=ol.triangulateShape(y,b);for(let x=0,S=b.length;x<S;x++){const _=b[x];y=y.concat(_)}for(let x=0,S=y.length;x<S;x++){const _=y[x];s.push(_.x,_.y,0),o.push(0,0,1),a.push(_.x,_.y)}for(let x=0,S=w.length;x<S;x++){const _=w[x],O=_[0]+p,T=_[1]+p,E=_[2]+p;i.push(O,T,E),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return W0e(n,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}return new qw(i,e.curveSegments)}}function W0e(r,e){if(e.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];e.shapes.push(s.uuid)}else e.shapes.push(r.uuid);return e}class mv extends si{constructor(e=1,n=32,i=16,s=0,o=Math.PI*2,a=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:o,thetaStart:a,thetaLength:c},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const h=Math.min(a+c,Math.PI);let d=0;const f=[],p=new re,g=new re,y=[],b=[],w=[],x=[];for(let S=0;S<=i;S++){const _=[],O=S/i;let T=0;S===0&&a===0?T=.5/n:S===i&&h===Math.PI&&(T=-.5/n);for(let E=0;E<=n;E++){const P=E/n;p.x=-e*Math.cos(s+P*o)*Math.sin(a+O*c),p.y=e*Math.cos(a+O*c),p.z=e*Math.sin(s+P*o)*Math.sin(a+O*c),b.push(p.x,p.y,p.z),g.copy(p).normalize(),w.push(g.x,g.y,g.z),x.push(P+T,1-O),_.push(d++)}f.push(_)}for(let S=0;S<i;S++)for(let _=0;_<n;_++){const O=f[S][_+1],T=f[S][_],E=f[S+1][_],P=f[S+1][_+1];(S!==0||a>0)&&y.push(O,T,P),(S!==i-1||h<Math.PI)&&y.push(T,E,P)}this.setIndex(y),this.setAttribute("position",new Tt(b,3)),this.setAttribute("normal",new Tt(w,3)),this.setAttribute("uv",new Tt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Zw extends Qh{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Zw(e.radius,e.detail)}}class Kw extends si{constructor(e=1,n=.4,i=12,s=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:s,arc:o},i=Math.floor(i),s=Math.floor(s);const a=[],c=[],h=[],d=[],f=new re,p=new re,g=new re;for(let y=0;y<=i;y++)for(let b=0;b<=s;b++){const w=b/s*o,x=y/i*Math.PI*2;p.x=(e+n*Math.cos(x))*Math.cos(w),p.y=(e+n*Math.cos(x))*Math.sin(w),p.z=n*Math.sin(x),c.push(p.x,p.y,p.z),f.x=e*Math.cos(w),f.y=e*Math.sin(w),g.subVectors(p,f).normalize(),h.push(g.x,g.y,g.z),d.push(b/s),d.push(y/i)}for(let y=1;y<=i;y++)for(let b=1;b<=s;b++){const w=(s+1)*y+b-1,x=(s+1)*(y-1)+b-1,S=(s+1)*(y-1)+b,_=(s+1)*y+b;a.push(w,x,_),a.push(x,S,_)}this.setIndex(a),this.setAttribute("position",new Tt(c,3)),this.setAttribute("normal",new Tt(h,3)),this.setAttribute("uv",new Tt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Jw extends si{constructor(e=1,n=.4,i=64,s=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:s,p:o,q:a},i=Math.floor(i),s=Math.floor(s);const c=[],h=[],d=[],f=[],p=new re,g=new re,y=new re,b=new re,w=new re,x=new re,S=new re;for(let O=0;O<=i;++O){const T=O/i*o*Math.PI*2;_(T,o,a,e,y),_(T+.01,o,a,e,b),x.subVectors(b,y),S.addVectors(b,y),w.crossVectors(x,S),S.crossVectors(w,x),w.normalize(),S.normalize();for(let E=0;E<=s;++E){const P=E/s*Math.PI*2,I=-n*Math.cos(P),A=n*Math.sin(P);p.x=y.x+(I*S.x+A*w.x),p.y=y.y+(I*S.y+A*w.y),p.z=y.z+(I*S.z+A*w.z),h.push(p.x,p.y,p.z),g.subVectors(p,y).normalize(),d.push(g.x,g.y,g.z),f.push(O/i),f.push(E/s)}}for(let O=1;O<=i;O++)for(let T=1;T<=s;T++){const E=(s+1)*(O-1)+(T-1),P=(s+1)*O+(T-1),I=(s+1)*O+T,A=(s+1)*(O-1)+T;c.push(E,P,A),c.push(P,I,A)}this.setIndex(c),this.setAttribute("position",new Tt(h,3)),this.setAttribute("normal",new Tt(d,3)),this.setAttribute("uv",new Tt(f,2));function _(O,T,E,P,I){const A=Math.cos(O),D=Math.sin(O),M=E/T*O,$=Math.cos(M);I.x=P*(2+$)*.5*A,I.y=P*(2+$)*D*.5,I.z=P*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class e_ extends si{constructor(e=new AP(new re(-1,-1,0),new re(-1,1,0),new re(1,1,0)),n=64,i=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:s,closed:o};const a=e.computeFrenetFrames(n,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const c=new re,h=new re,d=new Xe;let f=new re;const p=[],g=[],y=[],b=[];w(),this.setIndex(b),this.setAttribute("position",new Tt(p,3)),this.setAttribute("normal",new Tt(g,3)),this.setAttribute("uv",new Tt(y,2));function w(){for(let O=0;O<n;O++)x(O);x(o===!1?n:0),_(),S()}function x(O){f=e.getPointAt(O/n,f);const T=a.normals[O],E=a.binormals[O];for(let P=0;P<=s;P++){const I=P/s*Math.PI*2,A=Math.sin(I),D=-Math.cos(I);h.x=D*T.x+A*E.x,h.y=D*T.y+A*E.y,h.z=D*T.z+A*E.z,h.normalize(),g.push(h.x,h.y,h.z),c.x=f.x+i*h.x,c.y=f.y+i*h.y,c.z=f.z+i*h.z,p.push(c.x,c.y,c.z)}}function S(){for(let O=1;O<=n;O++)for(let T=1;T<=s;T++){const E=(s+1)*(O-1)+(T-1),P=(s+1)*O+(T-1),I=(s+1)*O+T,A=(s+1)*(O-1)+T;b.push(E,P,A),b.push(P,I,A)}}function _(){for(let O=0;O<=n;O++)for(let T=0;T<=s;T++)d.x=O/n,d.y=T/s,y.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new e_(new SO[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class w9 extends si{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,s=new re,o=new re;if(e.index!==null){const a=e.attributes.position,c=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,f=h.length;d<f;++d){const p=h[d],g=p.start,y=p.count;for(let b=g,w=g+y;b<w;b+=3)for(let x=0;x<3;x++){const S=c.getX(b+x),_=c.getX(b+(x+1)%3);s.fromBufferAttribute(a,S),o.fromBufferAttribute(a,_),gD(s,o,i)===!0&&(n.push(s.x,s.y,s.z),n.push(o.x,o.y,o.z))}}}else{const a=e.attributes.position;for(let c=0,h=a.count/3;c<h;c++)for(let d=0;d<3;d++){const f=3*c+d,p=3*c+(d+1)%3;s.fromBufferAttribute(a,f),o.fromBufferAttribute(a,p),gD(s,o,i)===!0&&(n.push(s.x,s.y,s.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new Tt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function gD(r,e,n){const i=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return n.has(i)===!0||n.has(s)===!0?!1:(n.add(i),n.add(s),!0)}var yD=Object.freeze({__proto__:null,BoxGeometry:Xh,CapsuleGeometry:zw,CircleGeometry:Xw,ConeGeometry:Ww,CylinderGeometry:em,DodecahedronGeometry:Qw,EdgesGeometry:v9,ExtrudeGeometry:Gw,IcosahedronGeometry:Yw,LatheGeometry:fv,OctahedronGeometry:pv,PlaneGeometry:Wh,PolyhedronGeometry:Qh,RingGeometry:jw,ShapeGeometry:qw,SphereGeometry:mv,TetrahedronGeometry:Zw,TorusGeometry:Kw,TorusKnotGeometry:Jw,TubeGeometry:e_,WireframeGeometry:w9});class _9 extends as{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class F0 extends Ps{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class IP extends as{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zh,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class S9 extends IP{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class z0 extends as{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rt(16777215),this.specular=new rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zh,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.combine=sv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class C9 extends as{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zh,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class k9 extends as{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zh,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class DP extends as{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zh,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.combine=sv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class T9 extends as{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zh,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class M9 extends ls{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Hu(r,e,n){return!r||!n&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function E9(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function P9(r){function e(s,o){return r[s]-r[o]}const n=r.length,i=new Array(n);for(let s=0;s!==n;++s)i[s]=s;return i.sort(e),i}function QT(r,e,n){const i=r.length,s=new r.constructor(i);for(let o=0,a=0;a!==i;++o){const c=n[o]*e;for(let h=0;h!==e;++h)s[a++]=r[c+h]}return s}function NP(r,e,n,i){let s=1,o=r[0];for(;o!==void 0&&o[i]===void 0;)o=r[s++];if(o===void 0)return;let a=o[i];if(a!==void 0)if(Array.isArray(a))do a=o[i],a!==void 0&&(e.push(o.time),n.push.apply(n,a)),o=r[s++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[i],a!==void 0&&(e.push(o.time),a.toArray(n,n.length)),o=r[s++];while(o!==void 0);else do a=o[i],a!==void 0&&(e.push(o.time),n.push(a)),o=r[s++];while(o!==void 0)}function Q0e(r,e,n,i,s=30){const o=r.clone();o.name=e;const a=[];for(let h=0;h<o.tracks.length;++h){const d=o.tracks[h],f=d.getValueSize(),p=[],g=[];for(let y=0;y<d.times.length;++y){const b=d.times[y]*s;if(!(b<n||b>=i)){p.push(d.times[y]);for(let w=0;w<f;++w)g.push(d.values[y*f+w])}}p.length!==0&&(d.times=Hu(p,d.times.constructor),d.values=Hu(g,d.values.constructor),a.push(d))}o.tracks=a;let c=1/0;for(let h=0;h<o.tracks.length;++h)c>o.tracks[h].times[0]&&(c=o.tracks[h].times[0]);for(let h=0;h<o.tracks.length;++h)o.tracks[h].shift(-1*c);return o.resetDuration(),o}function H0e(r,e=0,n=r,i=30){i<=0&&(i=30);const s=n.tracks.length,o=e/i;for(let a=0;a<s;++a){const c=n.tracks[a],h=c.ValueTypeName;if(h==="bool"||h==="string")continue;const d=r.tracks.find(function(S){return S.name===c.name&&S.ValueTypeName===h});if(d===void 0)continue;let f=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);let g=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const b=c.times.length-1;let w;if(o<=c.times[0]){const S=f,_=p-f;w=c.values.slice(S,_)}else if(o>=c.times[b]){const S=b*p+f,_=S+p-f;w=c.values.slice(S,_)}else{const S=c.createInterpolant(),_=f,O=p-f;S.evaluate(o),w=S.resultBuffer.slice(_,O)}h==="quaternion"&&new ar().fromArray(w).normalize().conjugate().toArray(w);const x=d.times.length;for(let S=0;S<x;++S){const _=S*y+g;if(h==="quaternion")ar.multiplyQuaternionsFlat(d.values,_,w,0,d.values,_);else{const O=y-g*2;for(let T=0;T<O;++T)d.values[_+T]-=w[T]}}}return r.blendMode=gP,r}const G0e={convertArray:Hu,isTypedArray:E9,getKeyframeOrder:P9,sortedArray:QT,flattenJSON:NP,subclip:Q0e,makeClipAdditive:H0e};class gv{constructor(e,n,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,s=n[i],o=n[i-1];e:{t:{let a;i:{n:if(!(e<s)){for(let c=i+2;;){if(s===void 0){if(e<o)break n;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(o=s,s=n[++i],e<s)break t}a=n.length;break i}if(!(e>=o)){const c=n[1];e<c&&(i=2,o=c);for(let h=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(s=o,o=n[--i-1],e>=o)break t}a=i,i=0;break i}break e}for(;i<a;){const c=i+a>>>1;e<n[c]?a=c:i=c+1}if(s=n[i],o=n[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let a=0;a!==s;++a)n[a]=i[o+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class A9 extends gv{constructor(e,n,i,s){super(e,n,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Xu,endingEnd:Xu}}intervalChanged_(e,n,i){const s=this.parameterPositions;let o=e-2,a=e+1,c=s[o],h=s[a];if(c===void 0)switch(this.getSettings_().endingStart){case Wu:o=e,c=2*n-i;break;case hy:o=s.length-2,c=n+s[o]-s[o+1];break;default:o=e,c=i}if(h===void 0)switch(this.getSettings_().endingEnd){case Wu:a=e,h=2*i-n;break;case hy:a=1,h=i+s[1]-s[0];break;default:a=e-1,h=n}const d=(i-n)*.5,f=this.valueSize;this._weightPrev=d/(n-c),this._weightNext=d/(h-i),this._offsetPrev=o*f,this._offsetNext=a*f}interpolate_(e,n,i,s){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,h=e*c,d=h-c,f=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,y=this._weightNext,b=(i-n)/(s-n),w=b*b,x=w*b,S=-g*x+2*g*w-g*b,_=(1+g)*x+(-1.5-2*g)*w+(-.5+g)*b+1,O=(-1-y)*x+(1.5+y)*w+.5*b,T=y*x-y*w;for(let E=0;E!==c;++E)o[E]=S*a[f+E]+_*a[d+E]+O*a[h+E]+T*a[p+E];return o}}class $P extends gv{constructor(e,n,i,s){super(e,n,i,s)}interpolate_(e,n,i,s){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,h=e*c,d=h-c,f=(i-n)/(s-n),p=1-f;for(let g=0;g!==c;++g)o[g]=a[d+g]*p+a[h+g]*f;return o}}class R9 extends gv{constructor(e,n,i,s){super(e,n,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ia{constructor(e,n,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hu(n,this.TimeBufferType),this.values=Hu(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Hu(e.times,Array),values:Hu(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new R9(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $P(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new A9(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Sp:n=this.InterpolantFactoryMethodDiscrete;break;case Cp:n=this.InterpolantFactoryMethodLinear;break;case $x:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sp;case this.InterpolantFactoryMethodLinear:return Cp;case this.InterpolantFactoryMethodSmooth:return $x}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,s=n.length;i!==s;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,s=n.length;i!==s;++i)n[i]*=e}return this}trim(e,n){const i=this.times,s=i.length;let o=0,a=s-1;for(;o!==s&&i[o]<e;)++o;for(;a!==-1&&i[a]>n;)--a;if(++a,o!==0||a!==s){o>=a&&(a=Math.max(a,1),o=a-1);const c=this.getValueSize();this.times=i.slice(o,a),this.values=this.values.slice(o*c,a*c)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let c=0;c!==o;c++){const h=i[c];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,h),e=!1;break}if(a!==null&&a>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,h,a),e=!1;break}a=h}if(s!==void 0&&E9(s))for(let c=0,h=s.length;c!==h;++c){const d=s[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===$x,o=e.length-1;let a=1;for(let c=1;c<o;++c){let h=!1;const d=e[c],f=e[c+1];if(d!==f&&(c!==1||d!==e[0]))if(s)h=!0;else{const p=c*i,g=p-i,y=p+i;for(let b=0;b!==i;++b){const w=n[p+b];if(w!==n[g+b]||w!==n[y+b]){h=!0;break}}}if(h){if(c!==a){e[a]=e[c];const p=c*i,g=a*i;for(let y=0;y!==i;++y)n[g+y]=n[p+y]}++a}}if(o>0){e[a]=e[o];for(let c=o*i,h=a*i,d=0;d!==i;++d)n[h+d]=n[c+d];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=n.slice(0,a*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,s=new i(this.name,e,n);return s.createInterpolant=this.createInterpolant,s}}Ia.prototype.TimeBufferType=Float32Array;Ia.prototype.ValueBufferType=Float32Array;Ia.prototype.DefaultInterpolation=Cp;class Md extends Ia{}Md.prototype.ValueTypeName="bool";Md.prototype.ValueBufferType=Array;Md.prototype.DefaultInterpolation=Sp;Md.prototype.InterpolantFactoryMethodLinear=void 0;Md.prototype.InterpolantFactoryMethodSmooth=void 0;class VP extends Ia{}VP.prototype.ValueTypeName="color";class Pp extends Ia{}Pp.prototype.ValueTypeName="number";class I9 extends gv{constructor(e,n,i,s){super(e,n,i,s)}interpolate_(e,n,i,s){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,h=(i-n)/(s-n);let d=e*c;for(let f=d+c;d!==f;d+=4)ar.slerpFlat(o,0,a,d-c,a,d,h);return o}}class Ed extends Ia{InterpolantFactoryMethodLinear(e){return new I9(this.times,this.values,this.getValueSize(),e)}}Ed.prototype.ValueTypeName="quaternion";Ed.prototype.DefaultInterpolation=Cp;Ed.prototype.InterpolantFactoryMethodSmooth=void 0;class Pd extends Ia{}Pd.prototype.ValueTypeName="string";Pd.prototype.ValueBufferType=Array;Pd.prototype.DefaultInterpolation=Sp;Pd.prototype.InterpolantFactoryMethodLinear=void 0;Pd.prototype.InterpolantFactoryMethodSmooth=void 0;class Ap extends Ia{}Ap.prototype.ValueTypeName="vector";class Rp{constructor(e="",n=-1,i=[],s=Rw){this.name=e,this.tracks=i,this.duration=n,this.blendMode=s,this.uuid=Eo(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,s=1/(e.fps||1);for(let a=0,c=i.length;a!==c;++a)n.push(j0e(i[a]).scale(s));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,a=i.length;o!==a;++o)n.push(Ia.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,n,i,s){const o=n.length,a=[];for(let c=0;c<o;c++){let h=[],d=[];h.push((c+o-1)%o,c,(c+1)%o),d.push(0,1,0);const f=P9(h);h=QT(h,1,f),d=QT(d,1,f),!s&&h[0]===0&&(h.push(o),d.push(d[0])),a.push(new Pp(".morphTargetInfluences["+n[c].name+"]",h,d).scale(1/i))}return new this(e,-1,a)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===n)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let c=0,h=e.length;c<h;c++){const d=e[c],f=d.name.match(o);if(f&&f.length>1){const p=f[1];let g=s[p];g||(s[p]=g=[]),g.push(d)}}const a=[];for(const c in s)a.push(this.CreateFromMorphTargetSequence(c,s[c],n,i));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,g,y,b,w){if(y.length!==0){const x=[],S=[];NP(y,x,S,b),x.length!==0&&w.push(new p(g,x,S))}},s=[],o=e.name||"default",a=e.fps||30,c=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let p=0;p<d.length;p++){const g=d[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let b;for(b=0;b<g.length;b++)if(g[b].morphTargets)for(let w=0;w<g[b].morphTargets.length;w++)y[g[b].morphTargets[w]]=-1;for(const w in y){const x=[],S=[];for(let _=0;_!==g[b].morphTargets.length;++_){const O=g[b];x.push(O.time),S.push(O.morphTarget===w?1:0)}s.push(new Pp(".morphTargetInfluence["+w+"]",x,S))}h=y.length*a}else{const y=".bones["+n[p].name+"]";i(Ap,y+".position",g,"pos",s),i(Ed,y+".quaternion",g,"rot",s),i(Ap,y+".scale",g,"scl",s)}}return s.length===0?null:new this(o,h,s,c)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Y0e(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pp;case"vector":case"vector2":case"vector3":case"vector4":return Ap;case"color":return VP;case"quaternion":return Ed;case"bool":case"boolean":return Md;case"string":return Pd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function j0e(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Y0e(r.type);if(r.times===void 0){const n=[],i=[];NP(r.keys,n,i,"value"),r.times=n,r.values=i}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Yl={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class LP{constructor(e,n,i){const s=this;let o=!1,a=0,c=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(f){c++,o===!1&&s.onStart!==void 0&&s.onStart(f,a,c),o=!0},this.itemEnd=function(f){a++,s.onProgress!==void 0&&s.onProgress(f,a,c),a===c&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(f){s.onError!==void 0&&s.onError(f)},this.resolveURL=function(f){return h?h(f):f},this.setURLModifier=function(f){return h=f,this},this.addHandler=function(f,p){return d.push(f,p),this},this.removeHandler=function(f){const p=d.indexOf(f);return p!==-1&&d.splice(p,2),this},this.getHandler=function(f){for(let p=0,g=d.length;p<g;p+=2){const y=d[p],b=d[p+1];if(y.global&&(y.lastIndex=0),y.test(f))return b}return null}}}const D9=new LP;let As=class{constructor(e){this.manager=e!==void 0?e:D9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(s,o){i.load(e,s,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};As.DEFAULT_MATERIAL_NAME="__DEFAULT";const Nl={};class q0e extends Error{constructor(e,n){super(e),this.response=n}}class cl extends As{constructor(e){super(e)}load(e,n,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Yl.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Nl[e]!==void 0){Nl[e].push({onLoad:n,onProgress:i,onError:s});return}Nl[e]=[],Nl[e].push({onLoad:n,onProgress:i,onError:s});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,h=this.responseType;fetch(a).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const f=Nl[e],p=d.body.getReader(),g=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),y=g?parseInt(g):0,b=y!==0;let w=0;const x=new ReadableStream({start(S){_();function _(){p.read().then(({done:O,value:T})=>{if(O)S.close();else{w+=T.byteLength;const E=new ProgressEvent("progress",{lengthComputable:b,loaded:w,total:y});for(let P=0,I=f.length;P<I;P++){const A=f[P];A.onProgress&&A.onProgress(E)}S.enqueue(T),_()}})}}});return new Response(x)}else throw new q0e(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(f=>new DOMParser().parseFromString(f,c));case"json":return d.json();default:if(c===void 0)return d.text();{const p=/charset="?([^;"\s]*)"?/i.exec(c),g=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(g);return d.arrayBuffer().then(b=>y.decode(b))}}}).then(d=>{Yl.add(e,d);const f=Nl[e];delete Nl[e];for(let p=0,g=f.length;p<g;p++){const y=f[p];y.onLoad&&y.onLoad(d)}}).catch(d=>{const f=Nl[e];if(f===void 0)throw this.manager.itemError(e),d;delete Nl[e];for(let p=0,g=f.length;p<g;p++){const y=f[p];y.onError&&y.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Z0e extends As{constructor(e){super(e)}load(e,n,i,s){const o=this,a=new cl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{n(o.parse(JSON.parse(c)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const n=[];for(let i=0;i<e.length;i++){const s=Rp.parse(e[i]);n.push(s)}return n}}class K0e extends As{constructor(e){super(e)}load(e,n,i,s){const o=this,a=[],c=new rd,h=new cl(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(o.withCredentials);let d=0;function f(p){h.load(e[p],function(g){const y=o.parse(g,!0);a[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},d+=1,d===6&&(y.mipmapCount===1&&(c.minFilter=Zn),c.image=a,c.format=y.format,c.needsUpdate=!0,n&&n(c))},i,s)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)f(p);else h.load(e,function(p){const g=o.parse(p,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let b=0;b<y;b++){a[b]={mipmaps:[]};for(let w=0;w<g.mipmapCount;w++)a[b].mipmaps.push(g.mipmaps[b*g.mipmapCount+w]),a[b].format=g.format,a[b].width=g.width,a[b].height=g.height}c.image=a}else c.image.width=g.width,c.image.height=g.height,c.mipmaps=g.mipmaps;g.mipmapCount===1&&(c.minFilter=Zn),c.format=g.format,c.needsUpdate=!0,n&&n(c)},i,s);return c}}class wy extends As{constructor(e){super(e)}load(e,n,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=Yl.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;const c=gy("img");function h(){f(),Yl.add(e,this),n&&n(this),o.manager.itemEnd(e)}function d(p){f(),s&&s(p),o.manager.itemError(e),o.manager.itemEnd(e)}function f(){c.removeEventListener("load",h,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",h,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),o.manager.itemStart(e),c.src=e,c}}class J0e extends As{constructor(e){super(e)}load(e,n,i,s){const o=new cv;o.colorSpace=xo;const a=new wy(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let c=0;function h(d){a.load(e[d],function(f){o.images[d]=f,c++,c===6&&(o.needsUpdate=!0,n&&n(o))},void 0,s)}for(let d=0;d<e.length;++d)h(d);return o}}class eye extends As{constructor(e){super(e)}load(e,n,i,s){const o=this,a=new xh,c=new cl(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(o.withCredentials),c.load(e,function(h){let d;try{d=o.parse(h)}catch(f){if(s!==void 0)s(f);else{console.error(f);return}}d.image!==void 0?a.image=d.image:d.data!==void 0&&(a.image.width=d.width,a.image.height=d.height,a.image.data=d.data),a.wrapS=d.wrapS!==void 0?d.wrapS:_s,a.wrapT=d.wrapT!==void 0?d.wrapT:_s,a.magFilter=d.magFilter!==void 0?d.magFilter:Zn,a.minFilter=d.minFilter!==void 0?d.minFilter:Zn,a.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(a.colorSpace=d.colorSpace),d.flipY!==void 0&&(a.flipY=d.flipY),d.format!==void 0&&(a.format=d.format),d.type!==void 0&&(a.type=d.type),d.mipmaps!==void 0&&(a.mipmaps=d.mipmaps,a.minFilter=Ca),d.mipmapCount===1&&(a.minFilter=Zn),d.generateMipmaps!==void 0&&(a.generateMipmaps=d.generateMipmaps),a.needsUpdate=!0,n&&n(a,d)},i,s),a}}class t_ extends As{constructor(e){super(e)}load(e,n,i,s){const o=new Hn,a=new wy(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(c){o.image=c,o.needsUpdate=!0,n!==void 0&&n(o)},i,s),o}}class Hh extends Ni{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new rt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class N9 extends Hh{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const qC=new gt,vD=new re,bD=new re;class BP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xe(512,512),this.map=null,this.mapPass=null,this.matrix=new gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hv,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new Oi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;vD.setFromMatrixPosition(e.matrixWorld),n.position.copy(vD),bD.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(bD),n.updateMatrixWorld(),qC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qC),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(qC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class tye extends BP{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=kp*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(i!==n.fov||s!==n.aspect||o!==n.far)&&(n.fov=i,n.aspect=s,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class i_ extends Hh{constructor(e,n,i=0,s=Math.PI/3,o=0,a=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.target=new Ni,this.distance=i,this.angle=s,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new tye}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const xD=new gt,lg=new re,ZC=new re;class iye extends BP{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Xe(4,2),this._viewportCount=6,this._viewports=[new Oi(2,1,1,1),new Oi(0,1,1,1),new Oi(3,1,1,1),new Oi(1,1,1,1),new Oi(3,0,1,1),new Oi(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),lg.setFromMatrixPosition(e.matrixWorld),i.position.copy(lg),ZC.copy(i.position),ZC.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(ZC),i.updateMatrixWorld(),s.makeTranslation(-lg.x,-lg.y,-lg.z),xD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xD)}}class CO extends Hh{constructor(e,n,i=0,s=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new iye}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class nye extends BP{constructor(){super(new Yo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class UP extends Hh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.target=new Ni,this.shadow=new nye}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class FP extends Hh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class $9 extends Hh{constructor(e,n,i=10,s=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class V9{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,s=e.y,o=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*s),n.addScaledVector(a[2],.488603*o),n.addScaledVector(a[3],.488603*i),n.addScaledVector(a[4],1.092548*(i*s)),n.addScaledVector(a[5],1.092548*(s*o)),n.addScaledVector(a[6],.315392*(3*o*o-1)),n.addScaledVector(a[7],1.092548*(i*o)),n.addScaledVector(a[8],.546274*(i*i-s*s)),n}getIrradianceAt(e,n){const i=e.x,s=e.y,o=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*s),n.addScaledVector(a[2],2*.511664*o),n.addScaledVector(a[3],2*.511664*i),n.addScaledVector(a[4],2*.429043*i*s),n.addScaledVector(a[5],2*.429043*s*o),n.addScaledVector(a[6],.743125*o*o-.247708),n.addScaledVector(a[7],2*.429043*i*o),n.addScaledVector(a[8],.429043*(i*i-s*s)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,n+s*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,n+s*3);return e}static getBasisAt(e,n){const i=e.x,s=e.y,o=e.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*o,n[3]=.488603*i,n[4]=1.092548*i*s,n[5]=1.092548*s*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*i*o,n[8]=.546274*(i*i-s*s)}}class L9 extends Hh{constructor(e=new V9,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class n_ extends As{constructor(e){super(e),this.textures={}}load(e,n,i,s){const o=this,a=new cl(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(c){try{n(o.parse(JSON.parse(c)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const n=this.textures;function i(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const s=n_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new rt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const a=e.uniforms[o];switch(s.uniforms[o]={},a.type){case"t":s.uniforms[o].value=i(a.value);break;case"c":s.uniforms[o].value=new rt().setHex(a.value);break;case"v2":s.uniforms[o].value=new Xe().fromArray(a.value);break;case"v3":s.uniforms[o].value=new re().fromArray(a.value);break;case"v4":s.uniforms[o].value=new Oi().fromArray(a.value);break;case"m3":s.uniforms[o].value=new fi().fromArray(a.value);break;case"m4":s.uniforms[o].value=new gt().fromArray(a.value);break;default:s.uniforms[o].value=a.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Xe().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Xe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:_9,SpriteMaterial:CP,RawShaderMaterial:F0,ShaderMaterial:Ps,PointsMaterial:TP,MeshPhysicalMaterial:S9,MeshStandardMaterial:IP,MeshPhongMaterial:z0,MeshToonMaterial:C9,MeshNormalMaterial:k9,MeshLambertMaterial:DP,MeshDepthMaterial:_P,MeshDistanceMaterial:SP,MeshBasicMaterial:Ra,MeshMatcapMaterial:T9,LineDashedMaterial:M9,LineBasicMaterial:ls,Material:as};return new n[e]}}class Ip{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,s=e.length;i<s;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class B9 extends si{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class U9 extends As{constructor(e){super(e)}load(e,n,i,s){const o=this,a=new cl(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(c){try{n(o.parse(JSON.parse(c)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const n={},i={};function s(y,b){if(n[b]!==void 0)return n[b];const x=y.interleavedBuffers[b],S=o(y,x.buffer),_=Vf(x.type,S),O=new uv(_,x.stride);return O.uuid=x.uuid,n[b]=O,O}function o(y,b){if(i[b]!==void 0)return i[b];const x=y.arrayBuffers[b],S=new Uint32Array(x).buffer;return i[b]=S,S}const a=e.isInstancedBufferGeometry?new B9:new si,c=e.data.index;if(c!==void 0){const y=Vf(c.type,c.array);a.setIndex(new Di(y,1))}const h=e.data.attributes;for(const y in h){const b=h[y];let w;if(b.isInterleavedBufferAttribute){const x=s(e.data,b.data);w=new lc(x,b.itemSize,b.offset,b.normalized)}else{const x=Vf(b.type,b.array),S=b.isInstancedBufferAttribute?Ep:Di;w=new S(x,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),b.usage!==void 0&&w.setUsage(b.usage),a.setAttribute(y,w)}const d=e.data.morphAttributes;if(d)for(const y in d){const b=d[y],w=[];for(let x=0,S=b.length;x<S;x++){const _=b[x];let O;if(_.isInterleavedBufferAttribute){const T=s(e.data,_.data);O=new lc(T,_.itemSize,_.offset,_.normalized)}else{const T=Vf(_.type,_.array);O=new Di(T,_.itemSize,_.normalized)}_.name!==void 0&&(O.name=_.name),w.push(O)}a.morphAttributes[y]=w}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,b=p.length;y!==b;++y){const w=p[y];a.addGroup(w.start,w.count,w.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const y=new re;g.center!==void 0&&y.fromArray(g.center),a.boundingSphere=new Hr(y,g.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class rye extends As{constructor(e){super(e)}load(e,n,i,s){const o=this,a=this.path===""?Ip.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const c=new cl(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){let d=null;try{d=JSON.parse(h)}catch(p){s!==void 0&&s(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const f=d.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(d,n)},i,s)}async loadAsync(e,n){const i=this,s=this.path===""?Ip.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new cl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(e,n),c=JSON.parse(a),h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(c)}parse(e,n){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),a=this.parseImages(e.images,function(){n!==void 0&&n(d)}),c=this.parseTextures(e.textures,a),h=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,o,h,c,i),f=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,f),n!==void 0){let p=!1;for(const g in a)if(a[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(d)}return d}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,a),h=this.parseObject(e.object,s,c,a,n),d=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,d),h}parseShapes(e){const n={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new sd().fromJSON(e[i]);n[o.uuid]=o}return n}parseSkeletons(e,n){const i={},s={};if(n.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,a=e.length;o<a;o++){const c=new dv().fromJSON(e[o],s);i[c.uuid]=c}return i}parseGeometries(e,n){const i={};if(e!==void 0){const s=new U9;for(let o=0,a=e.length;o<a;o++){let c;const h=e[o];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(h);break;default:h.type in yD?c=yD[h.type].fromJSON(h,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}c.uuid=h.uuid,h.name!==void 0&&(c.name=h.name),h.userData!==void 0&&(c.userData=h.userData),i[h.uuid]=c}}return i}parseMaterials(e,n){const i={},s={};if(e!==void 0){const o=new n_;o.setTextures(n);for(let a=0,c=e.length;a<c;a++){const h=e[a];i[h.uuid]===void 0&&(i[h.uuid]=o.parse(h)),s[h.uuid]=i[h.uuid]}}return s}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],o=Rp.parse(s);n[o.uuid]=o}return n}parseImages(e,n){const i=this,s={};let o;function a(h){return i.manager.itemStart(h),o.load(h,function(){i.manager.itemEnd(h)},void 0,function(){i.manager.itemError(h),i.manager.itemEnd(h)})}function c(h){if(typeof h=="string"){const d=h,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return a(f)}else return h.data?{data:Vf(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new LP(n);o=new wy(h),o.setCrossOrigin(this.crossOrigin);for(let d=0,f=e.length;d<f;d++){const p=e[d],g=p.url;if(Array.isArray(g)){const y=[];for(let b=0,w=g.length;b<w;b++){const x=g[b],S=c(x);S!==null&&(S instanceof HTMLImageElement?y.push(S):y.push(new xh(S.data,S.width,S.height)))}s[p.uuid]=new Qu(y)}else{const y=c(p.url);s[p.uuid]=new Qu(y)}}}return s}async parseImagesAsync(e){const n=this,i={};let s;async function o(a){if(typeof a=="string"){const c=a,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return await s.loadAsync(h)}else return a.data?{data:Vf(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){s=new wy(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,c=e.length;a<c;a++){const h=e[a],d=h.url;if(Array.isArray(d)){const f=[];for(let p=0,g=d.length;p<g;p++){const y=d[p],b=await o(y);b!==null&&(b instanceof HTMLImageElement?f.push(b):f.push(new xh(b.data,b.width,b.height)))}i[h.uuid]=new Qu(f)}else{const f=await o(h.url);i[h.uuid]=new Qu(f)}}}return i}parseTextures(e,n){function i(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const s={};if(e!==void 0)for(let o=0,a=e.length;o<a;o++){const c=e[o];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),n[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const h=n[c.image],d=h.data;let f;Array.isArray(d)?(f=new cv,d.length===6&&(f.needsUpdate=!0)):(d&&d.data?f=new xh:f=new Hn,d&&(f.needsUpdate=!0)),f.source=h,f.uuid=c.uuid,c.name!==void 0&&(f.name=c.name),c.mapping!==void 0&&(f.mapping=i(c.mapping,sye)),c.channel!==void 0&&(f.channel=c.channel),c.offset!==void 0&&f.offset.fromArray(c.offset),c.repeat!==void 0&&f.repeat.fromArray(c.repeat),c.center!==void 0&&f.center.fromArray(c.center),c.rotation!==void 0&&(f.rotation=c.rotation),c.wrap!==void 0&&(f.wrapS=i(c.wrap[0],OD),f.wrapT=i(c.wrap[1],OD)),c.format!==void 0&&(f.format=c.format),c.internalFormat!==void 0&&(f.internalFormat=c.internalFormat),c.type!==void 0&&(f.type=c.type),c.colorSpace!==void 0&&(f.colorSpace=c.colorSpace),c.minFilter!==void 0&&(f.minFilter=i(c.minFilter,wD)),c.magFilter!==void 0&&(f.magFilter=i(c.magFilter,wD)),c.anisotropy!==void 0&&(f.anisotropy=c.anisotropy),c.flipY!==void 0&&(f.flipY=c.flipY),c.generateMipmaps!==void 0&&(f.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(f.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(f.compareFunction=c.compareFunction),c.userData!==void 0&&(f.userData=c.userData),s[c.uuid]=f}return s}parseObject(e,n,i,s,o){let a;function c(g){return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),n[g]}function h(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let b=0,w=g.length;b<w;b++){const x=g[b];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),y.push(i[x])}return y}return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),i[g]}}function d(g){return s[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),s[g]}let f,p;switch(e.type){case"Scene":a=new Mp,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new rt(e.background):a.background=d(e.background)),e.environment!==void 0&&(a.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Bw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Lw(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Yo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new FP(e.color,e.intensity);break;case"DirectionalLight":a=new UP(e.color,e.intensity);break;case"PointLight":a=new CO(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new $9(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new i_(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new N9(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new L9().fromJSON(e);break;case"SkinnedMesh":f=c(e.geometry),p=h(e.material),a=new kP(f,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":f=c(e.geometry),p=h(e.material),a=new sn(f,p);break;case"InstancedMesh":f=c(e.geometry),p=h(e.material);const g=e.count,y=e.instanceMatrix,b=e.instanceColor;a=new c9(f,p,g),a.instanceMatrix=new Ep(new Float32Array(y.array),16),b!==void 0&&(a.instanceColor=new Ep(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":f=c(e.geometry),p=h(e.material),a=new h9(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=f,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(w=>{const x=new Qr;x.min.fromArray(w.boxMin),x.max.fromArray(w.boxMax);const S=new Hr;return S.radius=w.sphereRadius,S.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:x,sphereInitialized:w.sphereInitialized,sphere:S}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=d(e.matricesTexture.uuid);break;case"LOD":a=new l9;break;case"Line":a=new cc(c(e.geometry),h(e.material));break;case"LineLoop":a=new u9(c(e.geometry),h(e.material));break;case"LineSegments":a=new ml(c(e.geometry),h(e.material));break;case"PointCloud":case"Points":a=new d9(c(e.geometry),h(e.material));break;case"Sprite":a=new a9(h(e.material));break;case"Group":a=new Gl;break;case"Bone":a=new yy;break;default:a=new Ni}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)a.add(this.parseObject(g[y],n,i,s,o))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const b=g[y];a.animations.push(o[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const b=g[y],w=a.getObjectByProperty("uuid",b.object);w!==void 0&&a.addLevel(w,b.distance,b.hysteresis)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=n[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}}const sye={UVMapping:Pw,CubeReflectionMapping:ac,CubeRefractionMapping:Eh,EquirectangularReflectionMapping:Op,EquirectangularRefractionMapping:cy,CubeUVReflectionMapping:qp},OD={RepeatWrapping:Ph,ClampToEdgeWrapping:_s,MirroredRepeatWrapping:wp},wD={NearestFilter:vr,NearestMipmapNearestFilter:Aw,NearestMipmapLinearFilter:zu,LinearFilter:Zn,LinearMipmapNearestFilter:tp,LinearMipmapLinearFilter:Ca};class oye extends As{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=Yl.get(e);if(a!==void 0){if(o.manager.itemStart(e),a.then){a.then(d=>{n&&n(d),o.manager.itemEnd(e)}).catch(d=>{s&&s(d)});return}return setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const h=fetch(e,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){return Yl.add(e,d),n&&n(d),o.manager.itemEnd(e),d}).catch(function(d){s&&s(d),Yl.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Yl.add(e,h),o.manager.itemStart(e)}}let Sb;class zP{static getContext(){return Sb===void 0&&(Sb=new(window.AudioContext||window.webkitAudioContext)),Sb}static setContext(e){Sb=e}}class aye extends As{constructor(e){super(e)}load(e,n,i,s){const o=this,a=new cl(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(h){try{const d=h.slice(0);zP.getContext().decodeAudioData(d,function(p){n(p)}).catch(c)}catch(d){c(d)}},i,s);function c(h){s?s(h):console.error(h),o.manager.itemError(e)}}}const _D=new gt,SD=new gt,xu=new gt;class lye{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,xu.copy(e.projectionMatrix);const s=n.eyeSep/2,o=s*n.near/n.focus,a=n.near*Math.tan(nd*n.fov*.5)/n.zoom;let c,h;SD.elements[12]=-s,_D.elements[12]=s,c=-a*n.aspect+o,h=a*n.aspect+o,xu.elements[0]=2*n.near/(h-c),xu.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(xu),c=-a*n.aspect-o,h=a*n.aspect-o,xu.elements[0]=2*n.near/(h-c),xu.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(xu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(SD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_D)}}class XP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=CD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=CD();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function CD(){return(typeof performance>"u"?Date:performance).now()}const Ou=new re,kD=new ar,cye=new re,wu=new re;class hye extends Ni{constructor(){super(),this.type="AudioListener",this.context=zP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new XP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ou,kD,cye),wu.set(0,0,-1).applyQuaternion(kD),n.positionX){const s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ou.x,s),n.positionY.linearRampToValueAtTime(Ou.y,s),n.positionZ.linearRampToValueAtTime(Ou.z,s),n.forwardX.linearRampToValueAtTime(wu.x,s),n.forwardY.linearRampToValueAtTime(wu.y,s),n.forwardZ.linearRampToValueAtTime(wu.z,s),n.upX.linearRampToValueAtTime(i.x,s),n.upY.linearRampToValueAtTime(i.y,s),n.upZ.linearRampToValueAtTime(i.z,s)}else n.setPosition(Ou.x,Ou.y,Ou.z),n.setOrientation(wu.x,wu.y,wu.z,i.x,i.y,i.z)}}class F9 extends Ni{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const _u=new re,TD=new ar,uye=new re,Su=new re;class dye extends F9{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_u,TD,uye),Su.set(0,0,1).applyQuaternion(TD);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(_u.x,i),n.positionY.linearRampToValueAtTime(_u.y,i),n.positionZ.linearRampToValueAtTime(_u.z,i),n.orientationX.linearRampToValueAtTime(Su.x,i),n.orientationY.linearRampToValueAtTime(Su.y,i),n.orientationZ.linearRampToValueAtTime(Su.z,i)}else n.setPosition(_u.x,_u.y,_u.z),n.setOrientation(Su.x,Su.y,Su.z)}}class fye{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class z9{constructor(e,n,i){this.binding=e,this.valueSize=i;let s,o,a;switch(n){case"quaternion":s=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,s=this.valueSize,o=e*s+s;let a=this.cumulativeWeight;if(a===0){for(let c=0;c!==s;++c)i[o+c]=i[c];a=n}else{a+=n;const c=n/a;this._mixBufferRegion(i,o,0,c,s)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,s=e*n+n,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const h=n*this._origIndex;this._mixBufferRegion(i,s,h,1-o,n)}a>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*n,1,n);for(let h=n,d=n+n;h!==d;++h)if(i[h]!==i[h+n]){c.setValue(i,s);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(n,s);for(let o=i,a=s;o!==a;++o)n[o]=n[s+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,s,o){if(s>=.5)for(let a=0;a!==o;++a)e[n+a]=e[i+a]}_slerp(e,n,i,s){ar.slerpFlat(e,n,e,n,e,i,s)}_slerpAdditive(e,n,i,s,o){const a=this._workIndex*o;ar.multiplyQuaternionsFlat(e,a,e,n,e,i),ar.slerpFlat(e,n,e,n,e,a,s)}_lerp(e,n,i,s,o){const a=1-s;for(let c=0;c!==o;++c){const h=n+c;e[h]=e[h]*a+e[i+c]*s}}_lerpAdditive(e,n,i,s,o){for(let a=0;a!==o;++a){const c=n+a;e[c]=e[c]+e[i+a]*s}}}const WP="\\[\\]\\.:\\/",pye=new RegExp("["+WP+"]","g"),QP="[^"+WP+"]",mye="[^"+WP.replace("\\.","")+"]",gye=/((?:WC+[\/:])*)/.source.replace("WC",QP),yye=/(WCOD+)?/.source.replace("WCOD",mye),vye=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",QP),bye=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",QP),xye=new RegExp("^"+gye+yye+vye+bye+"$"),Oye=["material","materials","bones","map"];class wye{constructor(e,n,i){const s=i||vi.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,s)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class vi{constructor(e,n,i){this.path=n,this.parsedPath=i||vi.parseTrackName(n),this.node=vi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new vi.Composite(e,n,i):new vi(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(pye,"")}static parseTrackName(e){const n=xye.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);Oye.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===n||c.uuid===n)return c;const h=i(c.children);if(h)return h}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[n++]=i[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=vi.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let d=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===d){d=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const a=e[s];if(a===void 0){const d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+s+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(h=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vi.Composite=wye;vi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vi.prototype.GetterByBindingType=[vi.prototype._getValue_direct,vi.prototype._getValue_array,vi.prototype._getValue_arrayElement,vi.prototype._getValue_toArray];vi.prototype.SetterByBindingTypeAndVersioning=[[vi.prototype._setValue_direct,vi.prototype._setValue_direct_setNeedsUpdate,vi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_array,vi.prototype._setValue_array_setNeedsUpdate,vi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_arrayElement,vi.prototype._setValue_arrayElement_setNeedsUpdate,vi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_fromArray,vi.prototype._setValue_fromArray_setNeedsUpdate,vi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _ye{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Eo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length;let c,h=e.length,d=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const g=arguments[f],y=g.uuid;let b=n[y];if(b===void 0){b=h++,n[y]=b,e.push(g);for(let w=0,x=a;w!==x;++w)o[w].push(new vi(g,i[w],s[w]))}else if(b<d){c=e[b];const w=--d,x=e[w];n[x.uuid]=b,e[b]=x,n[y]=w,e[w]=g;for(let S=0,_=a;S!==_;++S){const O=o[S],T=O[w];let E=O[b];O[b]=T,E===void 0&&(E=new vi(g,i[S],s[S])),O[w]=E}}else e[b]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_;for(let a=0,c=arguments.length;a!==c;++a){const h=arguments[a],d=h.uuid,f=n[d];if(f!==void 0&&f>=o){const p=o++,g=e[p];n[g.uuid]=f,e[f]=g,n[d]=p,e[p]=h;for(let y=0,b=s;y!==b;++y){const w=i[y],x=w[p],S=w[f];w[f]=x,w[p]=S}}}this.nCachedObjects_=o}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_,a=e.length;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],f=d.uuid,p=n[f];if(p!==void 0)if(delete n[f],p<o){const g=--o,y=e[g],b=--a,w=e[b];n[y.uuid]=p,e[p]=y,n[w.uuid]=g,e[g]=w,e.pop();for(let x=0,S=s;x!==S;++x){const _=i[x],O=_[g],T=_[b];_[p]=O,_[g]=T,_.pop()}}else{const g=--a,y=e[g];g>0&&(n[y.uuid]=p),e[p]=y,e.pop();for(let b=0,w=s;b!==w;++b){const x=i[b];x[p]=x[g],x.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){const i=this._bindingsIndicesByPath;let s=i[e];const o=this._bindings;if(s!==void 0)return o[s];const a=this._paths,c=this._parsedPaths,h=this._objects,d=h.length,f=this.nCachedObjects_,p=new Array(d);s=o.length,i[e]=s,a.push(e),c.push(n),o.push(p);for(let g=f,y=h.length;g!==y;++g){const b=h[g];p[g]=new vi(b,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const s=this._paths,o=this._parsedPaths,a=this._bindings,c=a.length-1,h=a[c],d=e[c];n[d]=i,a[i]=h,a.pop(),o[i]=o[c],o.pop(),s[i]=s[c],s.pop()}}}class X9{constructor(e,n,i=null,s=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=s;const o=n.tracks,a=o.length,c=new Array(a),h={endingStart:Xu,endingEnd:Xu};for(let d=0;d!==a;++d){const f=o[d].createInterpolant(null);c[d]=f,f.settings=h}this._interpolantSettings=h,this._interpolants=c,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AF,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const s=this._clip.duration,o=e._clip.duration,a=o/s,c=s/o;e.warp(1,a,n),this.warp(c,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const s=this._mixer,o=s.time,a=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=s._lendControlInterpolant(),this._timeScaleInterpolant=c);const h=c.parameterPositions,d=c.sampleValues;return h[0]=o,h[1]=o+i,d[0]=e/a,d[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const h=(e-o)*i;h<0||i===0?n=0:(this._startTime=null,n=i*h)}n*=this._updateTimeScale(e);const a=this._updateTime(n),c=this._updateWeight(e);if(c>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case gP:for(let f=0,p=h.length;f!==p;++f)h[f].evaluate(a),d[f].accumulateAdditive(c);break;case Rw:default:for(let f=0,p=h.length;f!==p;++f)h[f].evaluate(a),d[f].accumulate(s,c)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];n*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];n*=s,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let s=this.time+e,o=this._loopCount;const a=i===RF;if(e===0)return o===-1?s:a&&(o&1)===1?n-s:s;if(i===PF){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=n||s<0){const c=Math.floor(s/n);s-=n*c,o+=Math.abs(c);const h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=s;if(a&&(o&1)===1)return n-s}return s}_setEndings(e,n,i){const s=this._interpolantSettings;i?(s.endingStart=Wu,s.endingEnd=Wu):(e?s.endingStart=this.zeroSlopeAtStart?Wu:Xu:s.endingStart=hy,n?s.endingEnd=this.zeroSlopeAtEnd?Wu:Xu:s.endingEnd=hy)}_scheduleFading(e,n,i){const s=this._mixer,o=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const c=a.parameterPositions,h=a.sampleValues;return c[0]=o,h[0]=n,c[1]=o+e,h[1]=i,this}}const Sye=new Float32Array(1);class Cye extends pl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,s=e._clip.tracks,o=s.length,a=e._propertyBindings,c=e._interpolants,h=i.uuid,d=this._bindingsByRootAndName;let f=d[h];f===void 0&&(f={},d[h]=f);for(let p=0;p!==o;++p){const g=s[p],y=g.name;let b=f[y];if(b!==void 0)++b.referenceCount,a[p]=b;else{if(b=a[p],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,h,y));continue}const w=n&&n._propertyBindings[p].binding.parsedPath;b=new z9(vi.create(i,y,w),g.ValueTypeName,g.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,h,y),a[p]=b}c[p].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,i)}const n=e._propertyBindings;for(let i=0,s=n.length;i!==s;++i){const o=n[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,s=n.length;i!==s;++i){const o=n[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const s=this._actions,o=this._actionsByClip;let a=o[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=a;else{const c=a.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=s.length,s.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],s=e._cacheIndex;i._cacheIndex=s,n[s]=i,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,a=this._actionsByClip,c=a[o],h=c.knownActions,d=h[h.length-1],f=e._byClipCacheIndex;d._byClipCacheIndex=f,h[f]=d,h.pop(),e._byClipCacheIndex=null;const p=c.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],h.length===0&&delete a[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,s=n.length;i!==s;++i){const o=n[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,s=this._nActiveActions++,o=n[s];e._cacheIndex=s,n[s]=e,o._cacheIndex=i,n[i]=o}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,s=--this._nActiveActions,o=n[s];e._cacheIndex=s,n[s]=e,o._cacheIndex=i,n[i]=o}_addInactiveBinding(e,n,i){const s=this._bindingsByRootAndName,o=this._bindings;let a=s[n];a===void 0&&(a={},s[n]=a),a[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,s=i.rootNode.uuid,o=i.path,a=this._bindingsByRootAndName,c=a[s],h=n[n.length-1],d=e._cacheIndex;h._cacheIndex=d,n[d]=h,n.pop(),delete c[o],Object.keys(c).length===0&&delete a[s]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,o=n[s];e._cacheIndex=s,n[s]=e,o._cacheIndex=i,n[i]=o}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,o=n[s];e._cacheIndex=s,n[s]=e,o._cacheIndex=i,n[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new $P(new Float32Array(2),new Float32Array(2),1,Sye),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=n[s];e.__cacheIndex=s,n[s]=e,o.__cacheIndex=i,n[i]=o}clipAction(e,n,i){const s=n||this._root,o=s.uuid;let a=typeof e=="string"?Rp.findByName(s,e):e;const c=a!==null?a.uuid:e,h=this._actionsByClip[c];let d=null;if(i===void 0&&(a!==null?i=a.blendMode:i=Rw),h!==void 0){const p=h.actionByRoot[o];if(p!==void 0&&p.blendMode===i)return p;d=h.knownActions[0],a===null&&(a=d._clip)}if(a===null)return null;const f=new X9(this,a,n,i);return this._bindAction(f,d),this._addInactiveAction(f,c,o),f}existingAction(e,n){const i=n||this._root,s=i.uuid,o=typeof e=="string"?Rp.findByName(i,e):e,a=o?o.uuid:e,c=this._actionsByClip[a];return c!==void 0&&c.actionByRoot[s]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,s=this.time+=e,o=Math.sign(e),a=this._accuIndex^=1;for(let d=0;d!==i;++d)n[d]._update(s,e,o,a);const c=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)c[d].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,s=this._actionsByClip,o=s[i];if(o!==void 0){const a=o.knownActions;for(let c=0,h=a.length;c!==h;++c){const d=a[c];this._deactivateAction(d);const f=d._cacheIndex,p=n[n.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,p._cacheIndex=f,n[f]=p,n.pop(),this._removeInactiveBindingsForAction(d)}delete s[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const a in i){const c=i[a].actionByRoot,h=c[n];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,o=s[n];if(o!==void 0)for(const a in o){const c=o[a];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class r_{constructor(e){this.value=e}clone(){return new r_(this.value.clone===void 0?this.value:this.value.clone())}}let kye=0;class Tye extends pl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:kye++}),this.name="",this.usage=py,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,s=n.length;i<s;i++){const o=Array.isArray(n[i])?n[i]:[n[i]];for(let a=0;a<o.length;a++)this.uniforms.push(o[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Mye extends uv{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Eye{constructor(e,n,i,s,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const MD=new gt;class HP{constructor(e,n,i=0,s=1/0){this.ray=new Td(e,n),this.near=i,this.far=s,this.camera=null,this.layers=new Nw,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return MD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(MD),this}intersectObject(e,n=!0,i=[]){return HT(e,this,i,n),i.sort(ED),i}intersectObjects(e,n=!0,i=[]){for(let s=0,o=e.length;s<o;s++)HT(e[s],this,i,n);return i.sort(ED),i}}function ED(r,e){return r.distance-e.distance}function HT(r,e,n,i){if(r.layers.test(e.layers)&&r.raycast(e,n),i===!0){const s=r.children;for(let o=0,a=s.length;o<a;o++)HT(s[o],e,n,!0)}}class GT{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Xn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Pye{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const PD=new Xe;class W9{constructor(e=new Xe(1/0,1/0),n=new Xe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=PD.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,PD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const AD=new re,Cb=new re;class Q9{constructor(e=new re,n=new re){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){AD.subVectors(e,this.start),Cb.subVectors(this.end,this.start);const i=Cb.dot(Cb);let o=Cb.dot(AD)/i;return n&&(o=Xn(o,0,1)),o}closestPointToPoint(e,n,i){const s=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const RD=new re;class Aye extends Ni{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new si,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,c=1,h=32;a<h;a++,c++){const d=a/h*Math.PI*2,f=c/h*Math.PI*2;s.push(Math.cos(d),Math.sin(d),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new Tt(s,3));const o=new ls({fog:!1,toneMapped:!1});this.cone=new ml(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),RD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(RD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Yc=new re,kb=new gt,KC=new gt;class Rye extends ml{constructor(e){const n=H9(e),i=new si,s=[],o=[],a=new rt(0,0,1),c=new rt(0,1,0);for(let d=0;d<n.length;d++){const f=n[d];f.parent&&f.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(a.r,a.g,a.b),o.push(c.r,c.g,c.b))}i.setAttribute("position",new Tt(s,3)),i.setAttribute("color",new Tt(o,3));const h=new ls({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,s=i.getAttribute("position");KC.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<n.length;o++){const c=n[o];c.parent&&c.parent.isBone&&(kb.multiplyMatrices(KC,c.matrixWorld),Yc.setFromMatrixPosition(kb),s.setXYZ(a,Yc.x,Yc.y,Yc.z),kb.multiplyMatrices(KC,c.parent.matrixWorld),Yc.setFromMatrixPosition(kb),s.setXYZ(a+1,Yc.x,Yc.y,Yc.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function H9(r){const e=[];r.isBone===!0&&e.push(r);for(let n=0;n<r.children.length;n++)e.push.apply(e,H9(r.children[n]));return e}class Iye extends sn{constructor(e,n,i){const s=new mv(n,4,2),o=new Ra({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Dye=new re,ID=new rt,DD=new rt;class Nye extends Ni{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new pv(n);s.rotateY(Math.PI*.5),this.material=new Ra({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),a=new Float32Array(o.count*3);s.setAttribute("color",new Di(a,3)),this.add(new sn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");ID.copy(this.light.color),DD.copy(this.light.groundColor);for(let i=0,s=n.count;i<s;i++){const o=i<s/2?ID:DD;n.setXYZ(i,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Dye.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $ye extends ml{constructor(e=10,n=10,i=4473924,s=8947848){i=new rt(i),s=new rt(s);const o=n/2,a=e/n,c=e/2,h=[],d=[];for(let g=0,y=0,b=-c;g<=n;g++,b+=a){h.push(-c,0,b,c,0,b),h.push(b,0,-c,b,0,c);const w=g===o?i:s;w.toArray(d,y),y+=3,w.toArray(d,y),y+=3,w.toArray(d,y),y+=3,w.toArray(d,y),y+=3}const f=new si;f.setAttribute("position",new Tt(h,3)),f.setAttribute("color",new Tt(d,3));const p=new ls({vertexColors:!0,toneMapped:!1});super(f,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Vye extends ml{constructor(e=10,n=16,i=8,s=64,o=4473924,a=8947848){o=new rt(o),a=new rt(a);const c=[],h=[];if(n>1)for(let p=0;p<n;p++){const g=p/n*(Math.PI*2),y=Math.sin(g)*e,b=Math.cos(g)*e;c.push(0,0,0),c.push(y,0,b);const w=p&1?o:a;h.push(w.r,w.g,w.b),h.push(w.r,w.g,w.b)}for(let p=0;p<i;p++){const g=p&1?o:a,y=e-e/i*p;for(let b=0;b<s;b++){let w=b/s*(Math.PI*2),x=Math.sin(w)*y,S=Math.cos(w)*y;c.push(x,0,S),h.push(g.r,g.g,g.b),w=(b+1)/s*(Math.PI*2),x=Math.sin(w)*y,S=Math.cos(w)*y,c.push(x,0,S),h.push(g.r,g.g,g.b)}}const d=new si;d.setAttribute("position",new Tt(c,3)),d.setAttribute("color",new Tt(h,3));const f=new ls({vertexColors:!0,toneMapped:!1});super(d,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const ND=new re,Tb=new re,$D=new re;class Lye extends Ni{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let s=new si;s.setAttribute("position",new Tt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new ls({fog:!1,toneMapped:!1});this.lightPlane=new cc(s,o),this.add(this.lightPlane),s=new si,s.setAttribute("position",new Tt([0,0,0,0,0,1],3)),this.targetLine=new cc(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ND.setFromMatrixPosition(this.light.matrixWorld),Tb.setFromMatrixPosition(this.light.target.matrixWorld),$D.subVectors(Tb,ND),this.lightPlane.lookAt(Tb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Tb),this.targetLine.scale.z=$D.length()}}const Mb=new re,Un=new lv;class Bye extends ml{constructor(e){const n=new si,i=new ls({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],a={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(b,w){h(b),h(w)}function h(b){s.push(0,0,0),o.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(s.length/3-1)}n.setAttribute("position",new Tt(s,3)),n.setAttribute("color",new Tt(o,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const d=new rt(16755200),f=new rt(16711680),p=new rt(43775),g=new rt(16777215),y=new rt(3355443);this.setColors(d,f,p,g,y)}setColors(e,n,i,s,o){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,n.r,n.g,n.b),c.setXYZ(25,n.r,n.g,n.b),c.setXYZ(26,n.r,n.g,n.b),c.setXYZ(27,n.r,n.g,n.b),c.setXYZ(28,n.r,n.g,n.b),c.setXYZ(29,n.r,n.g,n.b),c.setXYZ(30,n.r,n.g,n.b),c.setXYZ(31,n.r,n.g,n.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,s.r,s.g,s.b),c.setXYZ(39,s.r,s.g,s.b),c.setXYZ(40,o.r,o.g,o.b),c.setXYZ(41,o.r,o.g,o.b),c.setXYZ(42,o.r,o.g,o.b),c.setXYZ(43,o.r,o.g,o.b),c.setXYZ(44,o.r,o.g,o.b),c.setXYZ(45,o.r,o.g,o.b),c.setXYZ(46,o.r,o.g,o.b),c.setXYZ(47,o.r,o.g,o.b),c.setXYZ(48,o.r,o.g,o.b),c.setXYZ(49,o.r,o.g,o.b),c.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,s=1;Un.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Yn("c",n,e,Un,0,0,-1),Yn("t",n,e,Un,0,0,1),Yn("n1",n,e,Un,-i,-s,-1),Yn("n2",n,e,Un,i,-s,-1),Yn("n3",n,e,Un,-i,s,-1),Yn("n4",n,e,Un,i,s,-1),Yn("f1",n,e,Un,-i,-s,1),Yn("f2",n,e,Un,i,-s,1),Yn("f3",n,e,Un,-i,s,1),Yn("f4",n,e,Un,i,s,1),Yn("u1",n,e,Un,i*.7,s*1.1,-1),Yn("u2",n,e,Un,-i*.7,s*1.1,-1),Yn("u3",n,e,Un,0,s*2,-1),Yn("cf1",n,e,Un,-i,0,1),Yn("cf2",n,e,Un,i,0,1),Yn("cf3",n,e,Un,0,-s,1),Yn("cf4",n,e,Un,0,s,1),Yn("cn1",n,e,Un,-i,0,-1),Yn("cn2",n,e,Un,i,0,-1),Yn("cn3",n,e,Un,0,-s,-1),Yn("cn4",n,e,Un,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yn(r,e,n,i,s,o,a){Mb.set(s,o,a).unproject(i);const c=e[r];if(c!==void 0){const h=n.getAttribute("position");for(let d=0,f=c.length;d<f;d++)h.setXYZ(c[d],Mb.x,Mb.y,Mb.z)}}const Eb=new Qr;class Uye extends ml{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new si;o.setIndex(new Di(i,1)),o.setAttribute("position",new Di(s,3)),super(o,new ls({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Eb.setFromObject(this.object),Eb.isEmpty())return;const n=Eb.min,i=Eb.max,s=this.geometry.attributes.position,o=s.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fye extends ml{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new si;o.setIndex(new Di(i,1)),o.setAttribute("position",new Tt(s,3)),super(o,new ls({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class zye extends cc{constructor(e,n=1,i=16776960){const s=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new si;a.setAttribute("position",new Tt(o,3)),a.computeBoundingSphere(),super(a,new ls({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new si;h.setAttribute("position",new Tt(c,3)),h.computeBoundingSphere(),this.add(new sn(h,new Ra({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const VD=new re;let Pb,JC;class Xye extends Ni{constructor(e=new re(0,0,1),n=new re(0,0,0),i=1,s=16776960,o=i*.2,a=o*.2){super(),this.type="ArrowHelper",Pb===void 0&&(Pb=new si,Pb.setAttribute("position",new Tt([0,0,0,0,1,0],3)),JC=new em(0,.5,1,5,1),JC.translate(0,-.5,0)),this.position.copy(n),this.line=new cc(Pb,new ls({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new sn(JC,new Ra({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{VD.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(VD,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Wye extends ml{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new si;s.setAttribute("position",new Tt(n,3)),s.setAttribute("color",new Tt(i,3));const o=new ls({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,n,i){const s=new rt,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(n),s.toArray(o,6),s.toArray(o,9),s.set(i),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}let G9=class{constructor(){this.type="ShapePath",this.color=new rt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new vy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,s){return this.currentPath.quadraticCurveTo(e,n,i,s),this}bezierCurveTo(e,n,i,s,o,a){return this.currentPath.bezierCurveTo(e,n,i,s,o,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(S){const _=[];for(let O=0,T=S.length;O<T;O++){const E=S[O],P=new sd;P.curves=E.curves,_.push(P)}return _}function i(S,_){const O=_.length;let T=!1;for(let E=O-1,P=0;P<O;E=P++){let I=_[E],A=_[P],D=A.x-I.x,M=A.y-I.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(I=_[P],D=-D,A=_[E],M=-M),S.y<I.y||S.y>A.y)continue;if(S.y===I.y){if(S.x===I.x)return!0}else{const $=M*(S.x-I.x)-D*(S.y-I.y);if($===0)return!0;if($<0)continue;T=!T}}else{if(S.y!==I.y)continue;if(A.x<=S.x&&S.x<=I.x||I.x<=S.x&&S.x<=A.x)return!0}}return T}const s=ol.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,c,h;const d=[];if(o.length===1)return c=o[0],h=new sd,h.curves=c.curves,d.push(h),d;let f=!s(o[0].getPoints());f=e?!f:f;const p=[],g=[];let y=[],b=0,w;g[b]=void 0,y[b]=[];for(let S=0,_=o.length;S<_;S++)c=o[S],w=c.getPoints(),a=s(w),a=e?!a:a,a?(!f&&g[b]&&b++,g[b]={s:new sd,p:w},g[b].s.curves=c.curves,f&&b++,y[b]=[]):y[b].push({h:c,p:w[0]});if(!g[0])return n(o);if(g.length>1){let S=!1,_=0;for(let O=0,T=g.length;O<T;O++)p[O]=[];for(let O=0,T=g.length;O<T;O++){const E=y[O];for(let P=0;P<E.length;P++){const I=E[P];let A=!0;for(let D=0;D<g.length;D++)i(I.p,g[D].p)&&(O!==D&&_++,A?(A=!1,p[D].push(I)):S=!0);A&&p[O].push(I)}}_>0&&S===!1&&(y=p)}let x;for(let S=0,_=g.length;S<_;S++){h=g[S].s,d.push(h),x=y[S];for(let O=0,T=x.length;O<T;O++)h.holes.push(x[O].h)}return d}};class Qye extends ta{constructor(e=1,n=1,i=1,s={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...s,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jp);const Hye=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:aP,AddEquation:ch,AddOperation:fF,AdditiveAnimationBlendMode:gP,AdditiveBlending:bO,AgXToneMapping:vF,AlphaFormat:SF,AlwaysCompare:zF,AlwaysDepth:oF,AlwaysStencilFunc:VT,AmbientLight:FP,AnimationAction:X9,AnimationClip:Rp,AnimationLoader:Z0e,AnimationMixer:Cye,AnimationObjectGroup:_ye,AnimationUtils:G0e,ArcCurve:f9,ArrayCamera:s9,ArrowHelper:Xye,AttachedBindMode:hT,Audio:F9,AudioAnalyser:fye,AudioContext:zP,AudioListener:hye,AudioLoader:aye,AxesHelper:Wye,BackSide:ss,BasicDepthPacking:IF,BasicShadowMap:oue,BatchedMesh:h9,Bone:yy,BooleanKeyframeTrack:Md,Box2:W9,Box3:Qr,Box3Helper:Fye,BoxGeometry:Xh,BoxHelper:Uye,BufferAttribute:Di,BufferGeometry:si,BufferGeometryLoader:U9,ByteType:OF,Cache:Yl,Camera:lv,CameraHelper:Bye,CanvasTexture:y0e,CapsuleGeometry:zw,CatmullRomCurve3:p9,CineonToneMapping:gF,CircleGeometry:Xw,ClampToEdgeWrapping:_s,Clock:XP,Color:rt,ColorKeyframeTrack:VP,ColorManagement:tn,CompressedArrayTexture:m0e,CompressedCubeTexture:g0e,CompressedTexture:rd,CompressedTextureLoader:K0e,ConeGeometry:Ww,ConstantAlphaFactor:nF,ConstantColorFactor:tF,CubeCamera:qF,CubeReflectionMapping:ac,CubeRefractionMapping:Eh,CubeTexture:cv,CubeTextureLoader:J0e,CubeUVReflectionMapping:qp,CubicBezierCurve:EP,CubicBezierCurve3:m9,CubicInterpolant:A9,CullFaceBack:aT,CullFaceFront:UU,CullFaceFrontBack:sue,CullFaceNone:BU,Curve:ra,CurvePath:y9,CustomBlending:FU,CustomToneMapping:yF,CylinderGeometry:em,Cylindrical:Pye,Data3DTexture:bP,DataArrayTexture:Dw,DataTexture:xh,DataTextureLoader:eye,DataUtils:pde,DecrementStencilOp:yue,DecrementWrapStencilOp:bue,DefaultLoadingManager:D9,DepthFormat:id,DepthStencilFormat:_p,DepthTexture:wP,DetachedBindMode:xF,DirectionalLight:UP,DirectionalLightHelper:Lye,DiscreteInterpolant:R9,DisplayP3ColorSpace:Iw,DodecahedronGeometry:Qw,DoubleSide:Hs,DstAlphaFactor:qU,DstColorFactor:KU,DynamicCopyUsage:Due,DynamicDrawUsage:Mue,DynamicReadUsage:Aue,EdgesGeometry:v9,EllipseCurve:Uw,EqualCompare:LF,EqualDepth:lF,EqualStencilFunc:_ue,EquirectangularReflectionMapping:Op,EquirectangularRefractionMapping:cy,Euler:br,EventDispatcher:pl,ExtrudeGeometry:Gw,FileLoader:cl,Float16BufferAttribute:xde,Float32BufferAttribute:Tt,FloatType:Go,Fog:Bw,FogExp2:Lw,FramebufferTexture:zT,FrontSide:oc,Frustum:hv,GLBufferAttribute:Eye,GLSL1:$ue,GLSL3:LT,GreaterCompare:BF,GreaterDepth:hF,GreaterEqualCompare:FF,GreaterEqualDepth:cF,GreaterEqualStencilFunc:Tue,GreaterStencilFunc:Cue,GridHelper:$ye,Group:Gl,HalfFloatType:Zp,HemisphereLight:N9,HemisphereLightHelper:Nye,IcosahedronGeometry:Yw,ImageBitmapLoader:oye,ImageLoader:wy,ImageUtils:HF,IncrementStencilOp:gue,IncrementWrapStencilOp:vue,InstancedBufferAttribute:Ep,InstancedBufferGeometry:B9,InstancedInterleavedBuffer:Mye,InstancedMesh:c9,Int16BufferAttribute:vde,Int32BufferAttribute:bde,Int8BufferAttribute:mde,IntType:cP,InterleavedBuffer:uv,InterleavedBufferAttribute:lc,Interpolant:gv,InterpolateDiscrete:Sp,InterpolateLinear:Cp,InterpolateSmooth:$x,InvertStencilOp:xue,KeepStencilOp:Au,KeyframeTrack:Ia,LOD:l9,LatheGeometry:fv,Layers:Nw,LessCompare:VF,LessDepth:aF,LessEqualCompare:yP,LessEqualDepth:ly,LessEqualStencilFunc:Sue,LessStencilFunc:wue,Light:Hh,LightProbe:L9,Line:cc,Line3:Q9,LineBasicMaterial:ls,LineCurve:PP,LineCurve3:g9,LineDashedMaterial:M9,LineLoop:u9,LineSegments:ml,LinearDisplayP3ColorSpace:ov,LinearFilter:Zn,LinearInterpolant:$P,LinearMipMapLinearFilter:hue,LinearMipMapNearestFilter:cue,LinearMipmapLinearFilter:Ca,LinearMipmapNearestFilter:tp,LinearSRGBColorSpace:gc,LinearToneMapping:pF,LinearTransfer:uy,Loader:As,LoaderUtils:Ip,LoadingManager:LP,LoopOnce:PF,LoopPingPong:RF,LoopRepeat:AF,LuminanceAlphaFormat:TF,LuminanceFormat:kF,MOUSE:Pu,Material:as,MaterialLoader:n_,MathUtils:ns,Matrix3:fi,Matrix4:gt,MaxEquation:QU,Mesh:sn,MeshBasicMaterial:Ra,MeshDepthMaterial:_P,MeshDistanceMaterial:SP,MeshLambertMaterial:DP,MeshMatcapMaterial:T9,MeshNormalMaterial:k9,MeshPhongMaterial:z0,MeshPhysicalMaterial:S9,MeshStandardMaterial:IP,MeshToonMaterial:C9,MinEquation:WU,MirroredRepeatWrapping:wp,MixOperation:dF,MultiplyBlending:cT,MultiplyOperation:sv,NearestFilter:vr,NearestMipMapLinearFilter:lue,NearestMipMapNearestFilter:aue,NearestMipmapLinearFilter:zu,NearestMipmapNearestFilter:Aw,NeutralToneMapping:bF,NeverCompare:$F,NeverDepth:sF,NeverStencilFunc:Oue,NoBlending:Jl,NoColorSpace:Ql,NoToneMapping:ec,NormalAnimationBlendMode:Rw,NormalBlending:td,NotEqualCompare:UF,NotEqualDepth:uF,NotEqualStencilFunc:kue,NumberKeyframeTrack:Pp,Object3D:Ni,ObjectLoader:rye,ObjectSpaceNormalMap:NF,OctahedronGeometry:pv,OneFactor:GU,OneMinusConstantAlphaFactor:rF,OneMinusConstantColorFactor:iF,OneMinusDstAlphaFactor:ZU,OneMinusDstColorFactor:JU,OneMinusSrcAlphaFactor:OO,OneMinusSrcColorFactor:jU,OrthographicCamera:Yo,P3Primaries:fy,PCFShadowMap:sP,PCFSoftShadowMap:oP,PMREMGenerator:BT,Path:vy,PerspectiveCamera:rn,Plane:wa,PlaneGeometry:Wh,PlaneHelper:zye,PointLight:CO,PointLightHelper:Iye,Points:d9,PointsMaterial:TP,PolarGridHelper:Vye,PolyhedronGeometry:Qh,PositionalAudio:dye,PropertyBinding:vi,PropertyMixer:z9,QuadraticBezierCurve:Fw,QuadraticBezierCurve3:AP,Quaternion:ar,QuaternionKeyframeTrack:Ed,QuaternionLinearInterpolant:I9,RED_GREEN_RGTC2_Format:NT,RED_RGTC1_Format:EF,REVISION:jp,RGBADepthPacking:DF,RGBAFormat:qs,RGBAIntegerFormat:mP,RGBA_ASTC_10x10_Format:ET,RGBA_ASTC_10x5_Format:kT,RGBA_ASTC_10x6_Format:TT,RGBA_ASTC_10x8_Format:MT,RGBA_ASTC_12x10_Format:PT,RGBA_ASTC_12x12_Format:AT,RGBA_ASTC_4x4_Format:vT,RGBA_ASTC_5x4_Format:bT,RGBA_ASTC_5x5_Format:xT,RGBA_ASTC_6x5_Format:OT,RGBA_ASTC_6x6_Format:wT,RGBA_ASTC_8x5_Format:_T,RGBA_ASTC_8x6_Format:ST,RGBA_ASTC_8x8_Format:CT,RGBA_BPTC_Format:Nx,RGBA_ETC2_EAC_Format:yT,RGBA_PVRTC_2BPPV1_Format:pT,RGBA_PVRTC_4BPPV1_Format:fT,RGBA_S3TC_DXT1_Format:Rx,RGBA_S3TC_DXT3_Format:Ix,RGBA_S3TC_DXT5_Format:Dx,RGBFormat:CF,RGB_BPTC_SIGNED_Format:RT,RGB_BPTC_UNSIGNED_Format:IT,RGB_ETC1_Format:mT,RGB_ETC2_Format:gT,RGB_PVRTC_2BPPV1_Format:dT,RGB_PVRTC_4BPPV1_Format:uT,RGB_S3TC_DXT1_Format:Ax,RGFormat:MF,RGIntegerFormat:pP,RawShaderMaterial:F0,Ray:Td,Raycaster:HP,Rec709Primaries:dy,RectAreaLight:$9,RedFormat:dP,RedIntegerFormat:fP,ReinhardToneMapping:mF,RenderTarget:GF,RepeatWrapping:Ph,ReplaceStencilOp:mue,ReverseSubtractEquation:XU,RingGeometry:jw,SIGNED_RED_GREEN_RGTC2_Format:$T,SIGNED_RED_RGTC1_Format:DT,SRGBColorSpace:xo,SRGBTransfer:mn,Scene:Mp,ShaderChunk:yi,ShaderLib:zo,ShaderMaterial:Ps,ShadowMaterial:_9,Shape:sd,ShapeGeometry:qw,ShapePath:G9,ShapeUtils:ol,ShortType:wF,Skeleton:dv,SkeletonHelper:Rye,SkinnedMesh:kP,Source:Qu,Sphere:Hr,SphereGeometry:mv,Spherical:GT,SphericalHarmonics3:V9,SplineCurve:RP,SpotLight:i_,SpotLightHelper:Aye,Sprite:a9,SpriteMaterial:CP,SrcAlphaFactor:xO,SrcAlphaSaturateFactor:eF,SrcColorFactor:YU,StaticCopyUsage:Iue,StaticDrawUsage:py,StaticReadUsage:Pue,StereoCamera:lye,StreamCopyUsage:Nue,StreamDrawUsage:Eue,StreamReadUsage:Rue,StringKeyframeTrack:Pd,SubtractEquation:zU,SubtractiveBlending:lT,TOUCH:zl,TangentSpaceNormalMap:zh,TetrahedronGeometry:Zw,Texture:Hn,TextureLoader:t_,TorusGeometry:Kw,TorusKnotGeometry:Jw,Triangle:Gs,TriangleFanDrawMode:fue,TriangleStripDrawMode:due,TrianglesDrawMode:uue,TubeGeometry:e_,UVMapping:Pw,Uint16BufferAttribute:$w,Uint32BufferAttribute:xP,Uint8BufferAttribute:gde,Uint8ClampedBufferAttribute:yde,Uniform:r_,UniformsGroup:Tye,UniformsLib:ct,UniformsUtils:av,UnsignedByteType:Ea,UnsignedInt248Type:Kp,UnsignedInt5999Type:_F,UnsignedIntType:pd,UnsignedShort4444Type:hP,UnsignedShort5551Type:uP,UnsignedShortType:lP,VSMShadowMap:Za,Vector2:Xe,Vector3:re,Vector4:Oi,VectorKeyframeTrack:Ap,VideoTexture:p0e,WebGL3DRenderTarget:rde,WebGLArrayRenderTarget:nde,WebGLCoordinateSystem:il,WebGLCubeRenderTarget:ZF,WebGLMultipleRenderTargets:Qye,WebGLRenderTarget:ta,WebGLRenderer:L0,WebGLUtils:r9,WebGPUCoordinateSystem:my,WireframeGeometry:w9,WrapAroundEnding:hy,ZeroCurvatureEnding:Xu,ZeroFactor:HU,ZeroSlopeEnding:Wu,ZeroStencilOp:pue,createCanvasElement:WF},Symbol.toStringTag,{value:"Module"}));function hc(r){return yw()?(IE(r),!0):!1}function _y(){const r=new Set,e=s=>{r.delete(s)};return{on:s=>{r.add(s);const o=()=>e(s);return hc(o),{off:o}},off:e,trigger:(...s)=>Promise.all(Array.from(r).map(o=>o(...s)))}}function On(r){return typeof r=="function"?r():li(r)}const YT=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Gye=r=>r!=null,Yye=Object.prototype.toString,jye=r=>Yye.call(r)==="[object Object]",jT=()=>{};function qye(r,e){function n(...i){return new Promise((s,o)=>{Promise.resolve(r(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(o)})}return n}function Zye(r,e={}){let n,i,s=jT;const o=c=>{clearTimeout(c),s(),s=jT};return c=>{const h=On(r),d=On(e.maxWait);return n&&o(n),h<=0||d!==void 0&&d<=0?(i&&(o(i),i=null),Promise.resolve(c())):new Promise((f,p)=>{s=e.rejectOnCancel?p:f,d&&!i&&(i=setTimeout(()=>{n&&o(n),i=null,f(c())},d)),n=setTimeout(()=>{i&&o(i),i=null,f(c())},h)})}}function Kye(r,e,n=!1){return e.reduce((i,s)=>(s in r&&(!n||r[s]!==void 0)&&(i[s]=r[s]),i),{})}function Jye(r){return Ao()}function eve(r,e=200,n={}){return qye(Zye(e,n),r)}function LD(r,e=200,n={}){const i=lt(r.value),s=eve(()=>{i.value=r.value},e,n);return Qi(r,()=>s()),i}function tve(r,e={}){if(!ur(r))return tv(r);const n=Array.isArray(r.value)?Array.from({length:r.value.length}):{};for(const i in r.value)n[i]=FE(()=>({get(){return r.value[i]},set(s){var o;if((o=On(e.replaceRef))!=null?o:!0)if(Array.isArray(r.value)){const c=[...r.value];c[i]=s,r.value=c}else{const c={...r.value,[i]:s};Object.setPrototypeOf(c,Object.getPrototypeOf(r.value)),r.value=c}else r.value[i]=s}}));return n}function GP(r,e=!0,n){Jye()?Jn(r,n):e?r():Yp(r)}function ive(r,e=1e3,n={}){const{immediate:i=!0,immediateCallback:s=!1}=n;let o=null;const a=lt(!1);function c(){o&&(clearInterval(o),o=null)}function h(){a.value=!1,c()}function d(){const f=On(e);f<=0||(a.value=!0,s&&r(),c(),o=setInterval(r,f))}if(i&&YT&&d(),ur(e)||typeof e=="function"){const f=Qi(e,()=>{a.value&&YT&&d()});hc(f)}return hc(h),{isActive:a,pause:h,resume:d}}function ka(r){var e;const n=On(r);return(e=n==null?void 0:n.$el)!=null?e:n}const yc=YT?window:void 0;function Sy(...r){let e,n,i,s;if(typeof r[0]=="string"||Array.isArray(r[0])?([n,i,s]=r,e=yc):[e,n,i,s]=r,!e)return jT;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],a=()=>{o.forEach(f=>f()),o.length=0},c=(f,p,g,y)=>(f.addEventListener(p,g,y),()=>f.removeEventListener(p,g,y)),h=Qi(()=>[ka(e),On(s)],([f,p])=>{if(a(),!f)return;const g=jye(p)?{...p}:p;o.push(...n.flatMap(y=>i.map(b=>c(f,y,b,g))))},{immediate:!0,flush:"post"}),d=()=>{h(),a()};return hc(d),d}function nve(){const r=lt(!1),e=Ao();return e&&Jn(()=>{r.value=!0},e),r}function s_(r){const e=nve();return vn(()=>(e.value,!!r()))}function rve(r,e,n={}){const{window:i=yc,...s}=n;let o;const a=s_(()=>i&&"MutationObserver"in i),c=()=>{o&&(o.disconnect(),o=void 0)},h=vn(()=>{const g=On(r),y=(Array.isArray(g)?g:[g]).map(ka).filter(Gye);return new Set(y)}),d=Qi(()=>h.value,g=>{c(),a.value&&g.size&&(o=new MutationObserver(e),g.forEach(y=>o.observe(y,s)))},{immediate:!0,flush:"post"}),f=()=>o==null?void 0:o.takeRecords(),p=()=>{c(),d()};return hc(p),{isSupported:a,stop:p,takeRecords:f}}function YP(r,e={}){const{immediate:n=!0,fpsLimit:i=void 0,window:s=yc}=e,o=lt(!1),a=i?1e3/i:null;let c=0,h=null;function d(g){if(!o.value||!s)return;c||(c=g);const y=g-c;if(a&&y<a){h=s.requestAnimationFrame(d);return}c=g,r({delta:y,timestamp:g}),h=s.requestAnimationFrame(d)}function f(){!o.value&&s&&(o.value=!0,c=0,h=s.requestAnimationFrame(d))}function p(){o.value=!1,h!=null&&s&&(s.cancelAnimationFrame(h),h=null)}return n&&f(),hc(p),{isActive:cd(o),pause:p,resume:f}}function sve(r,e={}){const{window:n=yc}=e,i=s_(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const o=lt(!1),a=d=>{o.value=d.matches},c=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",a):s.removeListener(a))},h=Kl(()=>{i.value&&(c(),s=n.matchMedia(On(r)),"addEventListener"in s?s.addEventListener("change",a):s.addListener(a),o.value=s.matches)});return hc(()=>{h(),c(),s=void 0}),o}function ove(r={}){const{window:e=yc}=r,n=lt(1);if(e){let i=function(){n.value=e.devicePixelRatio,s(),o=e.matchMedia(`(resolution: ${n.value}dppx)`),o.addEventListener("change",i,{once:!0})},s=function(){o==null||o.removeEventListener("change",i)},o;i(),hc(s)}return{pixelRatio:n}}function Y9(r,e,n={}){const{window:i=yc,...s}=n;let o;const a=s_(()=>i&&"ResizeObserver"in i),c=()=>{o&&(o.disconnect(),o=void 0)},h=vn(()=>Array.isArray(r)?r.map(p=>ka(p)):[ka(r)]),d=Qi(h,p=>{if(c(),a.value&&i){o=new ResizeObserver(e);for(const g of p)g&&o.observe(g,s)}},{immediate:!0,flush:"post"}),f=()=>{c(),d()};return hc(f),{isSupported:a,stop:f}}function ave(r,e={}){const{reset:n=!0,windowResize:i=!0,windowScroll:s=!0,immediate:o=!0}=e,a=lt(0),c=lt(0),h=lt(0),d=lt(0),f=lt(0),p=lt(0),g=lt(0),y=lt(0);function b(){const w=ka(r);if(!w){n&&(a.value=0,c.value=0,h.value=0,d.value=0,f.value=0,p.value=0,g.value=0,y.value=0);return}const x=w.getBoundingClientRect();a.value=x.height,c.value=x.bottom,h.value=x.left,d.value=x.right,f.value=x.top,p.value=x.width,g.value=x.x,y.value=x.y}return Y9(r,b),Qi(()=>ka(r),w=>!w&&b()),rve(r,b,{attributeFilter:["style","class"]}),s&&Sy("scroll",b,{capture:!0,passive:!0}),i&&Sy("resize",b,{passive:!0}),GP(()=>{o&&b()}),{height:a,bottom:c,left:h,right:d,top:f,width:p,x:g,y,update:b}}function lve(r,e={width:0,height:0},n={}){const{window:i=yc,box:s="content-box"}=n,o=vn(()=>{var p,g;return(g=(p=ka(r))==null?void 0:p.namespaceURI)==null?void 0:g.includes("svg")}),a=lt(e.width),c=lt(e.height),{stop:h}=Y9(r,([p])=>{const g=s==="border-box"?p.borderBoxSize:s==="content-box"?p.contentBoxSize:p.devicePixelContentBoxSize;if(i&&o.value){const y=ka(r);if(y){const b=y.getBoundingClientRect();a.value=b.width,c.value=b.height}}else if(g){const y=Array.isArray(g)?g:[g];a.value=y.reduce((b,{inlineSize:w})=>b+w,0),c.value=y.reduce((b,{blockSize:w})=>b+w,0)}else a.value=p.contentRect.width,c.value=p.contentRect.height},n);GP(()=>{const p=ka(r);p&&(a.value="offsetWidth"in p?p.offsetWidth:e.width,c.value="offsetHeight"in p?p.offsetHeight:e.height)});const d=Qi(()=>ka(r),p=>{a.value=p?e.width:0,c.value=p?e.height:0});function f(){h(),d()}return{width:a,height:c,stop:f}}function cve(r){var e;const n=lt(0);if(typeof performance>"u")return n;const i=(e=r==null?void 0:r.every)!=null?e:10;let s=performance.now(),o=0;return YP(()=>{if(o+=1,o>=i){const a=performance.now(),c=a-s;n.value=Math.round(1e3/(c/o)),s=a,o=0}}),n}function hve(r={}){const e=lt(),n=s_(()=>typeof performance<"u"&&"memory"in performance);if(n.value){const{interval:i=1e3}=r;ive(()=>{e.value=performance.memory},i,{immediate:r.immediate,immediateCallback:r.immediateCallback})}return{isSupported:n,memory:e}}const j9={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},uve=Object.keys(j9);function dve(r={}){const{target:e=yc}=r,n=lt(!1),i=lt(r.initialValue||{});Object.assign(i.value,j9,i.value);const s=o=>{n.value=!0,!(r.pointerTypes&&!r.pointerTypes.includes(o.pointerType))&&(i.value=Kye(o,uve,!1))};if(e){const o={passive:!0};Sy(e,["pointerdown","pointermove","pointerup"],s,o),Sy(e,"pointerleave",()=>n.value=!1,o)}return{...tve(i),isInside:n}}function fve(r={}){const{window:e=yc,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:i=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:o=!0}=r,a=lt(n),c=lt(i),h=()=>{e&&(o?(a.value=e.innerWidth,c.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,c.value=e.document.documentElement.clientHeight))};if(h(),GP(h),Sy("resize",h,{passive:!0}),s){const d=sve("(orientation: portrait)");Qi(d,()=>h())}return{width:a,height:c}}var pve=Object.defineProperty,mve=(r,e,n)=>e in r?pve(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,BD=(r,e,n)=>(mve(r,typeof e!="symbol"?e+"":e,n),n);const gve="@tresjs/core",yve="module",vve="3.9.0",bve="pnpm@8.15.6",xve="Declarative ThreeJS using Vue Components",Ove="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",wve="MIT",_ve=["vue","3d","threejs","three","threejs-vue"],Sve=!1,Cve={".":{types:"./dist/index.d.ts",import:"./dist/tres.js",require:"./dist/tres.umd.cjs"},"./components":{types:"./dist/src/components/index.d.ts"},"./composables":{types:"./dist/src/composables/index.d.ts"},"./types":{types:"./dist/src/types/index.d.ts"},"./utils":{types:"./dist/src/utils/index.d.ts"},"./*":"./*"},kve="./dist/tres.js",Tve="./dist/tres.js",Mve="./dist/index.d.ts",Eve=["*.d.ts","dist"],Pve={access:"public"},Ave={dev:"cd playground && npm run dev",build:"vite build",playground:"cd playground && npm run dev",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui",release:"release-it",coverage:"vitest run --coverage",lint:"eslint .","lint:fix":"eslint . --fix","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts",prepare:"node .husky/install.mjs"},Rve={three:">=0.133",vue:">=3.3"},Ive={"@alvarosabu/utils":"^3.1.1","@vue/devtools-api":"^6.6.1","@vueuse/core":"^10.7.0"},Dve={"@release-it/conventional-changelog":"^8.0.1","@stackblitz/sdk":"^1.9.0","@tresjs/cientos":"3.8.0","@tresjs/eslint-config":"^1.0.0","@tresjs/eslint-config-vue":"^0.2.1","@types/three":"^0.163.0","@typescript-eslint/eslint-plugin":"^7.7.1","@typescript-eslint/parser":"^7.7.1","@vitejs/plugin-vue":"^5.0.4","@vitest/coverage-c8":"^0.33.0","@vitest/ui":"^1.5.0","@vue/test-utils":"^2.4.3",eslint:"^9.1.1","eslint-plugin-vue":"^9.25.0",esno:"^4.0.0",gsap:"^3.12.3",husky:"^9.0.11",jsdom:"^24.0.0",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^1.1.1","release-it":"^17.2.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.11.0",three:"^0.163.0",unocss:"^0.59.4",unplugin:"^1.10.1","unplugin-vue-components":"^0.26.0",vite:"^5.2.10","vite-plugin-banner":"^0.7.1","vite-plugin-dts":"3.9.0","vite-plugin-inspect":"^0.8.4","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.1.3",vitest:"^1.5.0",vue:"^3.4.24","vue-demi":"^0.14.6"},Nve={name:gve,type:yve,version:vve,packageManager:bve,description:xve,author:Ove,license:wve,keywords:_ve,sideEffects:Sve,exports:Cve,main:kve,module:Tve,types:Mve,files:Eve,publishConfig:Pve,scripts:Ave,peerDependencies:Rve,dependencies:Ive,devDependencies:Dve},$ve=({sizes:r,scene:e})=>{const n=lt([]),i=vn(()=>n.value[0]),s=c=>{const h=c instanceof lv?c:n.value.find(f=>f.uuid===c);if(!h)return;const d=n.value.filter(({uuid:f})=>f!==h.uuid);n.value=[h,...d]},o=(c,h=!1)=>{n.value.some(({uuid:d})=>d===c.uuid)||(h?s(c):n.value.push(c))},a=c=>{n.value=n.value.filter(({uuid:h})=>h!==c.uuid)};return Kl(()=>{r.aspectRatio.value&&n.value.forEach(c=>{c instanceof rn&&(c.aspect=r.aspectRatio.value),(c instanceof rn||c instanceof Yo)&&c.updateProjectionMatrix()})}),e.userData.tres__registerCamera=o,e.userData.tres__deregisterCamera=a,na(()=>{n.value=[]}),{camera:i,cameras:n,registerCamera:o,deregisterCamera:a,setCameraActive:s}},q9=_y(),Z9=_y(),jP=_y(),X0=new XP;let Bx=0,Ux=0;const{pause:Vve,resume:Lve,isActive:Bve}=YP(()=>{q9.trigger({delta:Bx,elapsed:Ux,clock:X0}),Z9.trigger({delta:Bx,elapsed:Ux,clock:X0}),jP.trigger({delta:Bx,elapsed:Ux,clock:X0})},{immediate:!1});jP.on(()=>{Bx=X0.getDelta(),Ux=X0.getElapsedTime()});const Ad=()=>({onBeforeLoop:q9.on,onLoop:Z9.on,onAfterLoop:jP.on,pause:Vve,resume:Lve,isActive:Bve}),Ab="[TresJS ▲ ■ ●] ";function o_(){function r(...i){typeof i[0]=="string"?i[0]=Ab+i[0]:i.unshift(Ab),console.error(...i)}function e(...i){typeof i[0]=="string"?i[0]=Ab+i[0]:i.unshift(Ab),console.warn(...i)}function n(i,s){}return{logError:r,logWarning:e,logMessage:n}}function Uve(r){return r instanceof rt?r:Array.isArray(r)?new rt(...r):new rt(r)}class Fve extends sn{constructor(...e){super(...e),BD(this,"type","HightlightMesh"),BD(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const e=(Date.now()-this.createTime)/1e3,n=1+.07*Math.sin(2.5*e);this.scale.set(n,n,n)}}const K9=(r,e)=>{for(const n of Object.keys(e))e[n]instanceof Object&&Object.assign(e[n],K9(r[n],e[n]));return Object.assign(r||{},e),r},zve="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Xve=Wve(zve);function UD(r){return r&&r.nodeType===1}function Rb(r){return r.replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Wve(r,e){const n=Object.create(null),i=r.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return s=>!!n[s]}const Qve=(r,e)=>{const n=new Set,i=[];for(const s of r){const o=e(s);n.has(o)||(n.add(o),i.push(s))}return i},FD=(r,e)=>{if(!e)return;const n=Array.isArray(e)?e:e.match(/([^[.\]])+/g);return n==null?void 0:n.reduce((i,s)=>i&&i[s],r)},Hve=(r,e,n)=>{const i=Array.isArray(e)?e:e.match(/([^[.\]])+/g);i&&i.reduce((s,o,a)=>(s[o]===void 0&&(s[o]={}),a===i.length-1&&(s[o]=n),s[o]),r)};function J9(r,e){if(UD(r)&&UD(e)){const s=r.attributes,o=e.attributes;return s.length!==o.length?!1:Array.from(s).every(({name:a,value:c})=>e.getAttribute(a)===c)}if(r===e)return!0;if(r===null||typeof r!="object"||e===null||typeof e!="object")return!1;const n=Object.keys(r),i=Object.keys(e);if(n.length!==i.length)return!1;for(const s of n)if(!i.includes(s)||!J9(r[s],e[s]))return!1;return!0}function Gve(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let n=0;n<r.length;n++)if(!J9(r[n],e[n]))return!1;return!0}const Yve=Array.isArray;function jve(r,e,n,i){const s=h=>{if(h.uuid===e)return h;for(const d of h.children){const f=s(d);if(f)return f}},o=s(r);if(!o){console.warn("Object with UUID not found in the scene.");return}let a=o;for(let h=0;h<n.length-1;h++)if(a[n[h]]!==void 0)a=a[n[h]];else{console.warn(`Property path is not valid: ${n.join(".")}`);return}const c=n[n.length-1];a[c]!==void 0?a[c]=i:console.warn(`Property path is not valid: ${n.join(".")}`)}function qve(r){const e=new Ra({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:Hs});return new Fve(r.geometry.clone(),e)}const Zve=Number.parseInt(jp.replace("dev","")),Ib={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:xo,toneMapping:aP,toneMappingExposure:3,shadowMap:{enabled:!0,type:oP}}};function Kve({scene:r,canvas:e,options:n,disableRender:i,contextParts:{sizes:s,camera:o}}){const a=vn(()=>({alpha:On(n.alpha),depth:On(n.depth),canvas:ka(e),context:On(n.context),stencil:On(n.stencil),antialias:On(n.antialias)===void 0?!0:On(n.antialias),precision:On(n.precision),powerPreference:On(n.powerPreference),premultipliedAlpha:On(n.premultipliedAlpha),preserveDrawingBuffer:On(n.preserveDrawingBuffer),logarithmicDepthBuffer:On(n.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:On(n.failIfMajorPerformanceCaveat)})),c=Wn(new L0(a.value));Qi(a,()=>{c.value.dispose(),c.value=new L0(a.value)}),Kl(()=>{c.value.setSize(s.width.value,s.height.value)});const{pixelRatio:h}=ove();Kl(()=>{c.value.setPixelRatio(h.value)});const{logError:d}=o_(),f=(()=>{const b=new L0,w={shadowMap:{enabled:b.shadowMap.enabled,type:b.shadowMap.type},toneMapping:b.toneMapping,toneMappingExposure:b.toneMappingExposure,outputColorSpace:b.outputColorSpace};return b.dispose(),w})();Kl(()=>{const b=On(n.preset);b&&(b in Ib||d(`Renderer Preset must be one of these: ${Object.keys(Ib).join(", ")}`),K9(c.value,Ib[b]));const w=(_,O)=>{const T=On(_),E=()=>{if(b)return FD(Ib[b],O)};if(T!==void 0)return T;const P=E();return P!==void 0?P:FD(f,O)},x=(_,O)=>Hve(c.value,O,w(_,O));x(n.shadows,"shadowMap.enabled"),x(n.toneMapping,"toneMapping"),x(n.shadowMapType,"shadowMap.type"),Zve<150&&x(!n.useLegacyLights,"physicallyCorrectLights"),x(n.outputColorSpace,"outputColorSpace"),x(n.toneMappingExposure,"toneMappingExposure");const S=w(n.clearColor,"clearColor");S&&c.value.setClearColor(S?Uve(S):new rt(0))});const{pause:p,resume:g,onLoop:y}=Ad();return y(()=>{o.value&&!On(i)&&c.value.render(r,o.value)}),g(),na(()=>{p(),c.value.dispose(),c.value.forceContextLoss()}),{renderer:c}}const zD=r=>typeof r=="function",Jve=r=>!!r&&r.constructor===Array;function e1e(r){const e={nodes:{},materials:{}};return r&&r.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}async function t1e(r,e,n,i,s){const{logError:o}=o_(),a=new r,c=(Array.isArray(e)?e:[e]).map(h=>new Promise((d,f)=>{a.load(h,p=>{p.scene&&Object.assign(p,e1e(p.scene)),d(p)},i,p=>f(o("[useLoader] - Failed to load resource",p)))}));return Jve(e)?await Promise.all(c):await c[0]}async function i1e(r,e){const n=new t_(e),i=s=>new Promise((o,a)=>{n.load(s,c=>o(c),()=>null,()=>{a(new Error("[useTextures] - Failed to load texture"))})});if(Yve(r)){const s=await Promise.all(r.map(o=>i(o)));return r.length>1?s:s[0]}else{const{map:s,displacementMap:o,normalMap:a,roughnessMap:c,metalnessMap:h,aoMap:d,alphaMap:f,matcap:p}=r;return{map:s?await i(s):null,displacementMap:o?await i(o):null,normalMap:a?await i(a):null,roughnessMap:c?await i(c):null,metalnessMap:h?await i(h):null,aoMap:d?await i(d):null,alphaMap:f?await i(f):null,matcap:p?await i(p):null}}}const n1e=(r,{renderer:e,camera:n,raycaster:i})=>{const s=vn(()=>e.value.domElement),{x:o,y:a}=dve({target:s}),{width:c,height:h,top:d,left:f}=ave(s),p=({x:I,y:A})=>{if(s.value)return{x:(I-f.value)/c.value*2-1,y:-((A-d.value)/h.value)*2+1}},g=({x:I,y:A})=>{if(n.value)return i.value.setFromCamera(new Xe(I,A),n.value),i.value.intersectObjects(r.value,!1)},y=I=>{const A=p({x:(I==null?void 0:I.clientX)??o.value,y:(I==null?void 0:I.clientY)??a.value});return A?g(A)||[]:[]},b=vn(()=>y()),w=_y(),x=_y(),S=(I,A)=>{I.trigger({event:A,intersects:y(A)})},_=I=>{S(x,I)};let O;const T=I=>{var A;O=(A=y(I)[0])==null?void 0:A.object},E=I=>{var A;I instanceof PointerEvent&&O===((A=y(I)[0])==null?void 0:A.object)&&S(w,I)},P=I=>x.trigger({event:I,intersects:[]});return s.value.addEventListener("pointerup",E),s.value.addEventListener("pointerdown",T),s.value.addEventListener("pointermove",_),s.value.addEventListener("pointerleave",P),na(()=>{s!=null&&s.value&&(s.value.removeEventListener("pointerup",E),s.value.removeEventListener("pointerdown",T),s.value.removeEventListener("pointermove",_),s.value.removeEventListener("pointerleave",P))}),{intersects:b,onClick:I=>w.on(I).off,onPointerMove:I=>x.on(I).off}},r1e=({scene:r,contextParts:e})=>{const n=Cd({click:new Map,pointerMove:new Map,pointerEnter:new Map,pointerLeave:new Map}),i=lt(new Set),s=g=>{i.value.add(g)},o=g=>{i.value.delete(g)},a=g=>{Object.values(n).forEach(y=>y.delete(g)),o(g)},c=g=>{const{onClick:y,onPointerMove:b,onPointerEnter:w,onPointerLeave:x}=g;y&&n.click.set(g,y),b&&n.pointerMove.set(g,b),w&&n.pointerEnter.set(g,w),x&&n.pointerLeave.set(g,x)};r.userData.tres__registerAtPointerEventHandler=c,r.userData.tres__deregisterAtPointerEventHandler=a,r.userData.tres__registerBlockingObjectAtPointerEventHandler=s,r.userData.tres__deregisterBlockingObjectAtPointerEventHandler=o;const h=vn(()=>Qve([...Array.from(i.value),...Object.values(n).map(g=>Array.from(g.keys())).flat()],({uuid:g})=>g)),{onClick:d,onPointerMove:f}=n1e(h,e);d(({intersects:g,event:y})=>{var b;g.length&&((b=n.click.get(g[0].object))==null||b(g[0],y))});let p;return f(({intersects:g,event:y})=>{var b,w,x,S;const _=(b=g==null?void 0:g[0])==null?void 0:b.object,{pointerLeave:O,pointerEnter:T,pointerMove:E}=n;p&&p!==_&&((w=O.get(p))==null||w(p,y)),_&&(p!==_&&((x=T.get(_))==null||x(g[0],y)),(S=E.get(_))==null||S(g[0],y)),p=_||null}),{registerObject:c,deregisterObject:a}};function ez(r){let e=0;return r.traverse(n=>{if(n.isMesh&&n.geometry){const i=n.geometry,s=i.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,o=i.index?i.index.count*Uint32Array.BYTES_PER_ELEMENT:0,a=i.attributes.normal?i.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,c=i.attributes.uv?i.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,h=s+o+a+c;e+=h}}),e}function s1e(r){return(r/1024).toFixed(2)}const qT=lt({}),qP=r=>Object.assign(qT.value,r);function o1e(r,e,n=10){const i=On(r)?fve():lve(vn(()=>On(e).parentElement)),s=cd(LD(i.width,n)),o=cd(LD(i.height,n)),a=vn(()=>s.value/o.value);return{height:o,width:s,aspectRatio:a}}function a1e({scene:r,canvas:e,windowSize:n,disableRender:i,rendererOptions:s}){const o=o1e(n,e),a=Wn(r),{camera:c,cameras:h,registerCamera:d,deregisterCamera:f,setCameraActive:p}=$ve({sizes:o,scene:r}),{renderer:g}=Kve({scene:r,canvas:e,options:s,contextParts:{sizes:o,camera:c},disableRender:i}),y={sizes:o,scene:a,camera:c,cameras:cd(h),renderer:g,raycaster:Wn(new HP),controls:lt(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},extend:qP,registerCamera:d,setCameraActive:p,deregisterCamera:f};ay("useTres",y);const b=100,w=cve({every:b}),{isSupported:x,memory:S}=hve({interval:b}),_=160;let O=performance.now();const T=({timestamp:A})=>{y.scene.value&&(y.perf.memory.allocatedMem=ez(y.scene.value)),A-O>=b&&(O=A,y.perf.fps.accumulator.push(w.value),y.perf.fps.accumulator.length>_&&y.perf.fps.accumulator.shift(),y.perf.fps.value=w.value,x.value&&S.value&&(y.perf.memory.accumulator.push(S.value.usedJSHeapSize/1024/1024),y.perf.memory.accumulator.length>_&&y.perf.memory.accumulator.shift(),y.perf.memory.currentMem=y.perf.memory.accumulator.reduce((D,M)=>D+M,0)/y.perf.memory.accumulator.length))};let E=0;const P=1,{pause:I}=YP(({delta:A})=>{window.__TRES__DEVTOOLS__&&(T({timestamp:performance.now()}),E+=A,E>=P&&(window.__TRES__DEVTOOLS__.cb(y),E=0))},{immediate:!0});return na(()=>{I()}),y}function ZP(){const r=ep("useTres");if(!r)throw new Error("useTresContext must be used together with useTresContextProvider");return r}let Fn=null;const{logError:XD}=o_(),e2=["onClick","onPointerMove","onPointerEnter","onPointerLeave"],l1e={createElement(r,e,n,i){var s,o;if(i||(i={}),i.args||(i.args=[]),r==="template"||Xve(r))return null;let a=r.replace("Tres",""),c;if(r==="primitive"){(i==null?void 0:i.object)===void 0&&XD("Tres primitives need a prop 'object'");const h=i.object;a=h.type,c=Object.assign(h,{type:a,attach:i.attach,primitive:!0})}else{const h=qT.value[a];h||XD(`${a} is not defined on the THREE namespace. Use extend to add it to the catalog.`),c=new h(...i.args)}return c.isCamera&&(i!=null&&i.position||c.position.set(3,3,3),i!=null&&i.lookAt||c.lookAt(0,0,0)),(i==null?void 0:i.attach)===void 0&&(c.isMaterial?c.attach="material":c.isBufferGeometry&&(c.attach="geometry")),c.isObject3D&&((s=i==null?void 0:i.material)!=null&&s.isMaterial&&(c.userData.tres__materialViaProp=!0),(o=i==null?void 0:i.geometry)!=null&&o.isBufferGeometry&&(c.userData.tres__geometryViaProp=!0)),c.userData={...c.userData,tres__name:a},c},insert(r,e){var n,i,s,o;e&&e.isScene&&(Fn=e);const a=e||Fn;if(r!=null&&r.isObject3D){if(r!=null&&r.isCamera){if(!(Fn!=null&&Fn.userData.tres__registerCamera))throw new Error("could not find tres__registerCamera on scene's userData");(i=Fn==null?void 0:(n=Fn.userData).tres__registerCamera)==null||i.call(n,r)}if(r&&e2.some(c=>r[c])){if(!(Fn!=null&&Fn.userData.tres__registerAtPointerEventHandler))throw new Error("could not find tres__registerAtPointerEventHandler on scene's userData");(o=Fn==null?void 0:(s=Fn.userData).tres__registerAtPointerEventHandler)==null||o.call(s,r)}}r!=null&&r.isObject3D&&a!=null&&a.isObject3D?(a.add(r),r.dispatchEvent({type:"added"})):r!=null&&r.isFog?a.fog=r:typeof(r==null?void 0:r.attach)=="string"&&(r.__previousAttach=r[a==null?void 0:a.attach],a&&(a[r.attach]=r))},remove(r){var e,n;if(r){if(r.isObject3D){const i=r,s=d=>{var f,p;const g=d;d.userData.tres__materialViaProp||((f=g.material)==null||f.dispose(),g.material=void 0),d.userData.tres__geometryViaProp||((p=g.geometry)==null||p.dispose(),g.geometry=void 0)},o=Fn==null?void 0:Fn.userData.tres__deregisterAtPointerEventHandler,a=Fn==null?void 0:Fn.userData.tres__deregisterBlockingObjectAtPointerEventHandler,c=d=>{var f,p;if(!a)throw new Error("could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData");if((p=Fn==null?void 0:(f=Fn.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||p.call(f,d),!o)throw new Error("could not find tres__deregisterAtPointerEventHandler on scene's userData");d&&e2.some(g=>d[g])&&(o==null||o(d))},h=d=>{const f=Fn==null?void 0:Fn.userData.tres__deregisterCamera;if(!f)throw new Error("could not find tres__deregisterCamera on scene's userData");d.isCamera&&(f==null||f(d))};(e=r.removeFromParent)==null||e.call(r),i.traverse(d=>{s(d),h(d),c==null||c(d)}),s(i),h(i),c==null||c(i)}(n=r.dispose)==null||n.call(r)}},patchProp(r,e,n,i){var s,o,a,c;if(r){let h=r,d=e;if(r.isObject3D&&d==="blocks-pointer-events"){i||i===""?(o=Fn==null?void 0:(s=Fn.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||o.call(s,r):(c=Fn==null?void 0:(a=Fn.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||c.call(a,r);return}let f=Rb(d),p=h==null?void 0:h[f];if(d==="args"){const y=r,b=n??[],w=i??[],x=r.userData.tres__name||r.type;x&&b.length&&!Gve(b,w)&&(h=Object.assign(y,new qT.value[x](...i)));return}if(h.type==="BufferGeometry"){if(d==="args")return;h.setAttribute(Rb(d),new Di(...i));return}if(d.includes("-")&&p===void 0){const y=d.split("-");p=y.reduce((b,w)=>b[Rb(w)],h),d=y.pop(),f=d.toLowerCase(),p!=null&&p.set||(h=y.reduce((b,w)=>b[Rb(w)],h))}let g=i;if(g===""&&(g=!0),zD(p)){e2.includes(e)||(Array.isArray(g)?r[f](...g):r[f](g));return}!(p!=null&&p.set)&&!zD(p)?h[f]=g:p.constructor===g.constructor&&p!=null&&p.copy?p==null||p.copy(g):Array.isArray(g)?p.set(...g):!p.isColor&&p.setScalar?p.setScalar(g):p.set(g)}},parentNode(r){return(r==null?void 0:r.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}},{render:c1e}=KE(l1e);qP(Hye);function h1e(){return tz().__VUE_DEVTOOLS_GLOBAL_HOOK__}function tz(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const u1e=typeof Proxy=="function",d1e="devtools-plugin:setup",f1e="plugin:settings:set";let cg,ZT;function p1e(){var r;return cg!==void 0||(typeof window<"u"&&window.performance?(cg=!0,ZT=window.performance):typeof globalThis<"u"&&!((r=globalThis.perf_hooks)===null||r===void 0)&&r.performance?(cg=!0,ZT=globalThis.perf_hooks.performance):cg=!1),cg}function m1e(){return p1e()?ZT.now():Date.now()}class g1e{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const i={};if(e.settings)for(const a in e.settings){const c=e.settings[a];i[a]=c.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let o=Object.assign({},i);try{const a=localStorage.getItem(s),c=JSON.parse(a);Object.assign(o,c)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(s,JSON.stringify(a))}catch{}o=a},now(){return m1e()}},n&&n.on(f1e,(a,c)=>{a===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(a,c)=>this.target?this.target.on[c]:(...h)=>{this.onQueue.push({method:c,args:h})}}),this.proxiedTarget=new Proxy({},{get:(a,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...h)=>(this.targetQueue.push({method:c,args:h,resolve:()=>{}}),this.fallbacks[c](...h)):(...h)=>new Promise(d=>{this.targetQueue.push({method:c,args:h,resolve:d})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function y1e(r,e){const n=r,i=tz(),s=h1e(),o=u1e&&n.enableEarlyProxy;if(s&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))s.emit(d1e,r,e);else{const a=o?new g1e(n,s):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}function v1e(r,e){const n=`▲ ■ ●${r}`;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):console.log(n)}const iz=r=>{const e={id:r.uuid,label:r.type,children:[],tags:[]};r.name!==""&&e.tags.push({label:r.name,textColor:5750629,backgroundColor:15793395});const n=ez(r);return n>0&&e.tags.push({label:`${s1e(n)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),r.type.includes("Light")&&(e.tags.push({label:`${r.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),e.tags.push({label:`#${r.color.getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),r.type.includes("Camera")&&(e.tags.push({label:`${r.fov}°`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),e.tags.push({label:`x: ${Math.round(r.position.x)} y: ${Math.round(r.position.y)} z: ${Math.round(r.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),e};function nz(r,e){r.children.forEach(n=>{if(n.type==="HightlightMesh")return;const i=iz(n);e.children.push(i),nz(n,i)})}const b1e=[],hg="tres:inspector",x1e=Cd({sceneGraph:null});function O1e(r,e){y1e({id:"dev.esm.tres",label:"TresJS 🪐",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:b1e,app:r},n=>{typeof n.now!="function"&&v1e("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addInspector({id:hg,label:"TresJS 🪐",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{n.sendInspectorTree(hg)},1e3),setInterval(()=>{n.notifyComponentUpdate()},5e3),n.on.getInspectorTree(o=>{if(o.inspectorId===hg){const a=iz(e.scene.value);nz(e.scene.value,a),x1e.sceneGraph=a,o.rootNodes=[a]}});let i=null,s=null;n.on.getInspectorState(o=>{if(o.inspectorId===hg){const[a]=e.scene.value.getObjectsByProperty("uuid",o.nodeId);if(!a)return;if(s&&i&&i.parent&&s.remove(i),a.isMesh){const c=qve(a);a.add(c),i=c,s=a}o.state={object:[{key:"uuid",editable:!0,value:a.uuid},{key:"name",editable:!0,value:a.name},{key:"type",editable:!0,value:a.type},{key:"position",editable:!0,value:a.position},{key:"rotation",editable:!0,value:a.rotation},{key:"scale",editable:!0,value:a.scale},{key:"geometry",value:a.geometry},{key:"material",value:a.material},{key:"color",editable:!0,value:a.color},{key:"intensity",editable:!0,value:a.intensity},{key:"castShadow",editable:!0,value:a.castShadow},{key:"receiveShadow",editable:!0,value:a.receiveShadow},{key:"frustumCulled",editable:!0,value:a.frustumCulled},{key:"matrixAutoUpdate",editable:!0,value:a.matrixAutoUpdate},{key:"matrixWorldNeedsUpdate",editable:!0,value:a.matrixWorldNeedsUpdate},{key:"matrixWorld",value:a.matrixWorld},{key:"visible",editable:!0,value:a.visible}]}}}),n.on.editInspectorState(o=>{o.inspectorId===hg&&jve(e.scene.value,o.nodeId,o.path,o.state.value)})})}const w1e=["data-scene","data-tres"],KP=sc({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},disableRender:{type:Boolean,default:void 0},context:{},precision:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},logarithmicDepthBuffer:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0}},setup(r,{expose:e}){var n;const i=r,s=jE(),{logWarning:o}=o_(),a=lt(),c=Wn(new Mp),{resume:h}=Ad(),d=(n=Ao())==null?void 0:n.appContext.app,f=w=>sc({setup(){var x;const S=(x=Ao())==null?void 0:x.appContext;return S&&(S.app=d),ay("useTres",w),ay("extend",qP),typeof window<"u"&&O1e(S.app,w),()=>pO(dn,null,s!=null&&s.default?s.default():[])}}),p=w=>{const x=f(w);c1e(pO(x),c.value)},g=(w,x=!1)=>{c.value.children=[],x&&(w.renderer.value.dispose(),w.renderer.value.renderLists.dispose(),w.renderer.value.forceContextLoss()),p(w),h()},y=vn(()=>i.disableRender),b=Wn(null);return e({context:b,dispose:()=>g(b.value,!0)}),Jn(()=>{const w=a;b.value=a1e({scene:c.value,canvas:w,windowSize:i.windowSize,disableRender:y,rendererOptions:i}),r1e({scene:c.value,contextParts:b.value});const{registerCamera:x,camera:S,cameras:_,deregisterCamera:O}=b.value;p(b.value);const T=()=>{const E=new rn(45,window.innerWidth/window.innerHeight,.1,1e3);E.position.set(3,3,3),E.lookAt(0,0,0),x(E);const P=Kl(()=>{_.value.length>=2&&(E.removeFromParent(),O(E),P==null||P())})};Qi(()=>i.camera,(E,P)=>{E&&x(E),P&&(P.removeFromParent(),O(P))},{immediate:!0}),S.value||(o("No camera found. Creating a default perspective camera. To have full control over a camera, please add one to the scene."),T())}),(w,x)=>(ci(),ln("canvas",{ref_key:"canvas",ref:a,"data-scene":c.value.uuid,class:Gp(w.$attrs.class),"data-tres":`tresjs ${li(Nve).version}`,style:Bh({display:"block",width:"100%",height:"100%",position:w.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...w.$attrs.style})},null,14,w1e))}}),_1e={install(r){r.component("TresCanvas",KP)}};/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function Ln(r){return r==null}function JP(r){return r!==null&&typeof r=="object"}function KT(r){return r!==null&&typeof r=="object"}function S1e(r,e){if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==e[n])return!1;return!0}function gd(r,e){return Array.from(new Set([...Object.keys(r),...Object.keys(e)])).reduce((i,s)=>{const o=r[s],a=e[s];return KT(o)&&KT(a)?Object.assign(Object.assign({},i),{[s]:gd(o,a)}):Object.assign(Object.assign({},i),{[s]:s in e?a:o})},{})}function C1e(r){return JP(r)?"target"in r:!1}const k1e={alreadydisposed:()=>"View has been already disposed",invalidparams:r=>`Invalid parameters for '${r.name}'`,nomatchingcontroller:r=>`No matching controller for '${r.key}'`,nomatchingview:r=>`No matching view for '${JSON.stringify(r.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:r=>`Not compatible with  plugin '${r.id}'`,propertynotfound:r=>`Property '${r.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class So{static alreadyDisposed(){return new So({type:"alreadydisposed"})}static notBindable(){return new So({type:"notbindable"})}static notCompatible(e,n){return new So({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new So({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new So({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=k1e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class kO{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const i=this.read();if(!kO.isBindable(i))throw So.notBindable();if(!(e in i))throw So.propertyNotFound(e);i[e]=n}}class Ro{constructor(){this.observers_={}}on(e,n,i){var s;let o=this.observers_[e];return o||(o=this.observers_[e]=[]),o.push({handler:n,key:(s=i==null?void 0:i.key)!==null&&s!==void 0?s:n}),this}off(e,n){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(s=>s.key!==n)),this}emit(e,n){const i=this.observers_[e];i&&i.forEach(s=>{s.handler(n)})}}class T1e{constructor(e,n){var i;this.constraint_=n==null?void 0:n.constraint,this.equals_=(i=n==null?void 0:n.equals)!==null&&i!==void 0?i:(s,o)=>s===o,this.emitter=new Ro,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const i=n??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,s)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:i,previousRawValue:o,rawValue:s,sender:this}))}}class M1e{constructor(e){this.emitter=new Ro,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const i=n??{forceEmit:!1,last:!0},s=this.value_;s===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:this.value_,sender:this}))}}class E1e{constructor(e){this.emitter=new Ro,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Dr(r,e){const n=e==null?void 0:e.constraint,i=e==null?void 0:e.equals;return!n&&!i?new M1e(r):new T1e(r,e)}function P1e(r){return[new E1e(r),(e,n)=>{r.setRawValue(e,n)}]}class qi{constructor(e){this.emitter=new Ro,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,s)=>Object.assign(i,{[s]:Dr(e[s])}),{})}static fromObject(e){const n=this.createCore(e);return new qi(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class a_{constructor(e){this.values=qi.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),n)}}class A1e{constructor(e){this.values=qi.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),i=this.values.get("min");let s=e;return Ln(i)||(s=Math.max(s,i)),Ln(n)||(s=Math.min(s,n)),s}}class R1e{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,i=Math.round((e-n)/this.step);return n+i*this.step}}class I1e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const D1e={"**":(r,e)=>Math.pow(r,e),"*":(r,e)=>r*e,"/":(r,e)=>r/e,"%":(r,e)=>r%e,"+":(r,e)=>r+e,"-":(r,e)=>r-e,"<<":(r,e)=>r<<e,">>":(r,e)=>r>>e,">>>":(r,e)=>r>>>e,"&":(r,e)=>r&e,"^":(r,e)=>r^e,"|":(r,e)=>r|e};class N1e{constructor(e,n,i){this.left=n,this.operator=e,this.right=i}evaluate(){const e=D1e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const $1e={"+":r=>r,"-":r=>-r,"~":r=>~r};class V1e{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=$1e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function e3(r){return(e,n)=>{for(let i=0;i<r.length;i++){const s=r[i](e,n);if(s!=="")return s}return""}}function Cy(r,e){var n;const i=r.substr(e).match(/^\s+/);return(n=i&&i[0])!==null&&n!==void 0?n:""}function L1e(r,e){const n=r.substr(e,1);return n.match(/^[1-9]$/)?n:""}function ky(r,e){var n;const i=r.substr(e).match(/^[0-9]+/);return(n=i&&i[0])!==null&&n!==void 0?n:""}function B1e(r,e){const n=ky(r,e);if(n!=="")return n;const i=r.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const s=ky(r,e);return s===""?"":i+s}function t3(r,e){const n=r.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const i=B1e(r,e);return i===""?"":n+i}function rz(r,e){const n=r.substr(e,1);if(n==="0")return n;const i=L1e(r,e);return e+=i.length,i===""?"":i+ky(r,e)}function U1e(r,e){const n=rz(r,e);if(e+=n.length,n==="")return"";const i=r.substr(e,1);if(e+=i.length,i!==".")return"";const s=ky(r,e);return e+=s.length,n+i+s+t3(r,e)}function F1e(r,e){const n=r.substr(e,1);if(e+=n.length,n!==".")return"";const i=ky(r,e);return e+=i.length,i===""?"":n+i+t3(r,e)}function z1e(r,e){const n=rz(r,e);return e+=n.length,n===""?"":n+t3(r,e)}const X1e=e3([U1e,F1e,z1e]);function W1e(r,e){var n;const i=r.substr(e).match(/^[01]+/);return(n=i&&i[0])!==null&&n!==void 0?n:""}function Q1e(r,e){const n=r.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const i=W1e(r,e);return i===""?"":n+i}function H1e(r,e){var n;const i=r.substr(e).match(/^[0-7]+/);return(n=i&&i[0])!==null&&n!==void 0?n:""}function G1e(r,e){const n=r.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const i=H1e(r,e);return i===""?"":n+i}function Y1e(r,e){var n;const i=r.substr(e).match(/^[0-9a-f]+/i);return(n=i&&i[0])!==null&&n!==void 0?n:""}function j1e(r,e){const n=r.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const i=Y1e(r,e);return i===""?"":n+i}const q1e=e3([Q1e,G1e,j1e]),Z1e=e3([q1e,X1e]);function K1e(r,e){const n=Z1e(r,e);return e+=n.length,n===""?null:{evaluable:new I1e(n),cursor:e}}function J1e(r,e){const n=r.substr(e,1);if(e+=n.length,n!=="(")return null;const i=oz(r,e);if(!i)return null;e=i.cursor,e+=Cy(r,e).length;const s=r.substr(e,1);return e+=s.length,s!==")"?null:{evaluable:i.evaluable,cursor:e}}function ebe(r,e){var n;return(n=K1e(r,e))!==null&&n!==void 0?n:J1e(r,e)}function sz(r,e){const n=ebe(r,e);if(n)return n;const i=r.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const s=sz(r,e);return s?(e=s.cursor,{cursor:e,evaluable:new V1e(i,s.evaluable)}):null}function tbe(r,e,n){n+=Cy(e,n).length;const i=r.filter(s=>e.startsWith(s,n))[0];return i?(n+=i.length,n+=Cy(e,n).length,{cursor:n,operator:i}):null}function ibe(r,e){return(n,i)=>{const s=r(n,i);if(!s)return null;i=s.cursor;let o=s.evaluable;for(;;){const a=tbe(e,n,i);if(!a)break;i=a.cursor;const c=r(n,i);if(!c)return null;i=c.cursor,o=new N1e(a.operator,o,c.evaluable)}return o?{cursor:i,evaluable:o}:null}}const nbe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((r,e)=>ibe(r,e),sz);function oz(r,e){return e+=Cy(r,e).length,nbe(r,e)}function rbe(r){const e=oz(r,0);return!e||e.cursor+Cy(r,e.cursor).length!==r.length?null:e.evaluable}function Ah(r){var e;const n=rbe(r);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function az(r){if(typeof r=="number")return r;if(typeof r=="string"){const e=Ah(r);if(!Ln(e))return e}return 0}function to(r){return e=>e.toFixed(Math.max(Math.min(r,20),0))}function en(r,e,n,i,s){const o=(r-e)/(n-e);return i+o*(s-i)}function WD(r){return String(r.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function xr(r,e,n){return Math.min(Math.max(r,e),n)}function lz(r,e){return(r%e+e)%e}function sbe(r,e){return Ln(r.step)?Math.max(WD(e),2):WD(r.step)}function cz(r){var e;return(e=r.step)!==null&&e!==void 0?e:1}function obe(r,e){var n;const i=Math.abs((n=r.step)!==null&&n!==void 0?n:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function hz(r,e){return Ln(r.step)?null:new R1e(r.step,e)}function uz(r){return!Ln(r.max)&&!Ln(r.min)?new a_({max:r.max,min:r.min}):!Ln(r.max)||!Ln(r.min)?new A1e({max:r.max,min:r.min}):null}function dz(r,e){var n,i,s;return{formatter:(n=r.format)!==null&&n!==void 0?n:to(sbe(r,e)),keyScale:(i=r.keyScale)!==null&&i!==void 0?i:cz(r),pointerScale:(s=r.pointerScale)!==null&&s!==void 0?s:obe(r,e)}}function fz(r){return{format:r.optional.function,keyScale:r.optional.number,max:r.optional.number,min:r.optional.number,pointerScale:r.optional.number,step:r.optional.number}}function i3(r){return{constraint:r.constraint,textProps:qi.fromObject(dz(r.params,r.initialValue))}}class n3{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class l_{constructor(e){this.target=e}}class pz extends l_{constructor(e,n,i){super(e),this.value=n,this.last=i??!0}}class abe extends l_{constructor(e,n){super(e),this.expanded=n}}class lbe extends l_{constructor(e,n){super(e),this.index=n}}class cbe extends l_{constructor(e,n){super(e),this.native=n}}class r3 extends n3{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ro,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const i=n.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new pz(this,n.binding.target.read(),e.options.last))}}function hbe(r,e){const i=Object.keys(e).reduce((s,o)=>{if(s===void 0)return;const a=e[o],c=a(r[o]);return c.succeeded?Object.assign(Object.assign({},s),{[o]:c.value}):void 0},{});return i}function ube(r,e){return r.reduce((n,i)=>{if(n===void 0)return;const s=e(i);if(!(!s.succeeded||s.value===void 0))return[...n,s.value]},[])}function dbe(r){return r===null?!1:typeof r=="object"}function $l(r){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const i=r(n);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function QD(r){return{custom:e=>$l(e)(r),boolean:$l(e=>typeof e=="boolean"?e:void 0)(r),number:$l(e=>typeof e=="number"?e:void 0)(r),string:$l(e=>typeof e=="string"?e:void 0)(r),function:$l(e=>typeof e=="function"?e:void 0)(r),constant:e=>$l(n=>n===e?e:void 0)(r),raw:$l(e=>e)(r),object:e=>$l(n=>{if(dbe(n))return hbe(n,e)})(r),array:e=>$l(n=>{if(Array.isArray(n))return ube(n,e)})(r)}}const JT={optional:QD(!0),required:QD(!1)};function cs(r,e){const n=e(JT),i=JT.required.object(n)(r);return i.succeeded?i.value:void 0}function gl(r,e,n,i){if(e&&!e(r))return!1;const s=cs(r,n);return s?i(s):!1}function yl(r,e){var n;return gd((n=r==null?void 0:r())!==null&&n!==void 0?n:{},e)}function Fx(r){return"value"in r}function fbe(r){if(!JP(r)||!("binding"in r))return!1;const e=r.binding;return C1e(e)}const nl="http://www.w3.org/2000/svg";function TO(r){r.offsetHeight}function pbe(r,e){const n=r.style.transition;r.style.transition="none",e(),r.style.transition=n}function s3(r){return r.ontouchstart!==void 0}function mbe(r){const e=r.ownerDocument.defaultView;return e&&"document"in e?r.getContext("2d",{willReadFrequently:!0}):null}const gbe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function c_(r,e){const n=r.createElementNS(nl,"svg");return n.innerHTML=gbe[e],n}function mz(r,e,n){r.insertBefore(e,r.children[n])}function o3(r){r.parentElement&&r.parentElement.removeChild(r)}function gz(r){for(;r.children.length>0;)r.removeChild(r.children[0])}function ybe(r){for(;r.childNodes.length>0;)r.removeChild(r.childNodes[0])}function yz(r){return r.relatedTarget?r.relatedTarget:"explicitOriginalTarget"in r?r.explicitOriginalTarget:null}function tc(r,e){r.emitter.on("change",n=>{e(n.rawValue)}),e(r.rawValue)}function hl(r,e,n){tc(r.value(e),n)}const vbe="tp";function Zi(r){return(n,i)=>[vbe,"-",r,"v",n?`_${n}`:"",i?`-${i}`:""].join("")}const ug=Zi("lbl");function bbe(r,e){const n=r.createDocumentFragment();return e.split(`
`).map(s=>r.createTextNode(s)).forEach((s,o)=>{o>0&&n.appendChild(r.createElement("br")),n.appendChild(s)}),n}class xbe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ug()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(ug("l")),hl(n.props,"label",o=>{Ln(o)?this.element.classList.add(ug(void 0,"nol")):(this.element.classList.remove(ug(void 0,"nol")),ybe(i),i.appendChild(bbe(e,o)))}),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("div");s.classList.add(ug("v")),this.element.appendChild(s),this.valueElement=s}}class Obe{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new xbe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return gl(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return yl(null,{label:this.props.get("label")})}}function wbe(){return["veryfirst","first","last","verylast"]}const HD=Zi(""),GD={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class vz{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{wbe().forEach(i=>{n.classList.remove(HD(void 0,GD[i]))}),this.blade.get("positions").forEach(i=>{n.classList.add(HD(void 0,GD[i]))})}),this.viewProps.handleDispose(()=>{o3(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return gl(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return yl(null,Object.assign({},this.viewProps.exportState()))}}class _be extends n3{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const i=n.bind(this);return this.controller.buttonController.emitter.on(e,o=>{i(new cbe(this,o.nativeEvent))}),this}off(e,n){return this.controller.buttonController.emitter.off(e,n),this}}function Sbe(r,e,n){n?r.classList.add(e):r.classList.remove(e)}function tm(r,e){return n=>{Sbe(r,e,n)}}function a3(r,e){tc(r,n=>{e.textContent=n??""})}const t2=Zi("btn");class Cbe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(t2()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(t2("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(t2("t")),a3(n.props.value("title"),s),this.buttonElement.appendChild(s)}}class kbe{constructor(e,n){this.emitter=new Ro,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Cbe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return gl(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return yl(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class YD extends vz{constructor(e,n){const i=new kbe(e,{props:n.buttonProps,viewProps:n.viewProps}),s=new Obe(e,{blade:n.blade,props:n.labelProps,valueController:i});super({blade:n.blade,view:s.view,viewProps:n.viewProps}),this.buttonController=i,this.labelController=s}importState(e){return gl(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return yl(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class bz{constructor(e){const[n,i]=e.split("-"),s=n.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const Tbe=new bz("2.0.3");function Rs(r){return Object.assign({core:Tbe},r)}Rs({id:"button",type:"blade",accept(r){const e=cs(r,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(r){return new YD(r.document,{blade:r.blade,buttonProps:qi.fromObject({title:r.params.title}),labelProps:qi.fromObject({label:r.params.label}),viewProps:r.viewProps})},api(r){return r.controller instanceof YD?new _be(r.controller):null}});function Mbe(r,e){return r.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Ebe(r,e){return r.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Pbe(r,e){return r.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Abe(r){return JP(r)?"refresh"in r&&typeof r.refresh=="function":!1}function Rbe(r,e){if(!kO.isBindable(r))throw So.notBindable();return new kO(r,e)}class Ibe{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Ro,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,i){const s=i??{},o=this.controller_.element.ownerDocument,a=this.pool_.createBinding(o,Rbe(e,n),s),c=this.pool_.createBindingApi(a);return this.add(c,s.index)}addFolder(e){return Ebe(this,e)}addButton(e){return Mbe(this,e)}addTab(e){return Pbe(this,e)}add(e,n){const i=e.controller;return this.controller_.rack.add(i,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,i=this.pool_.createBlade(n,e),s=this.pool_.createApi(i);return this.add(s,e.index)}on(e,n){const i=n.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.children.forEach(e=>{Abe(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,i=this.pool_.createApi(n),s=fbe(n.value)?n.value.binding:null;this.emitter_.emit("change",new pz(i,s?s.target.read():n.value.rawValue,e.options.last))}}class l3 extends n3{constructor(e,n){super(e),this.rackApi_=new Ibe(e.rackController,n)}refresh(){this.rackApi_.refresh()}}class c3 extends vz{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return gl(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((i,s)=>i.importState(n.children[s])))}exportState(){return yl(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function eM(r){return"rackController"in r}class Dbe{constructor(e){this.emitter=new Ro,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw So.shouldNeverHappen();const i=n!==void 0?n:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(s=>{this.cache_.delete(s)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function Nbe(r,e){for(let n=0;n<r.length;n++){const i=r[n];if(Fx(i)&&i.value===e)return i}return null}function $be(r){return eM(r)?r.rackController.rack.bcSet_:null}class Vbe{constructor(e){var n,i;this.emitter=new Ro,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Dbe($be),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),Fx(i))i.value.emitter.on("change",this.onChildValueChange_);else if(eM(i)){const s=i.rackController.rack;if(s){const o=s.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const i=e.item;if(Fx(i))i.value.emitter.off("change",this.onChildValueChange_);else if(eM(i)){const s=i.rackController.rack;if(s){const o=s.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),n=e[0],i=e[e.length-1];this.bcSet_.items.forEach(s=>{const o=[];s===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),s===i&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),s.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=Nbe(this.find(Fx),e.sender);if(!n)throw So.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class h3{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new Vbe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&mz(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&o3(e.bladeController.view.element)}}function xz(){return new qi({positions:Dr([],{equals:S1e})})}class yv extends qi{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=qi.createCore(n);return new yv(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ln(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const i=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};hl(this,"expanded",i),hl(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Lbe(r,e){let n=0;return pbe(e,()=>{r.set("expandedHeight",null),r.set("temporaryExpanded",!0),TO(e),n=e.clientHeight,r.set("temporaryExpanded",null),TO(e)}),n}function jD(r,e){e.style.height=r.styleHeight}function u3(r,e){r.value("expanded").emitter.on("beforechange",()=>{if(r.set("completed",!1),Ln(r.get("expandedHeight"))){const n=Lbe(r,e);n>0&&r.set("expandedHeight",n)}r.set("shouldFixHeight",!0),TO(e)}),r.emitter.on("change",()=>{jD(r,e)}),jD(r,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&r.cleanUpTransition()})}class Bbe extends l3{constructor(e,n){super(e,n),this.emitter_=new Ro,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new abe(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,i){return this.rackApi_.addBinding(e,n,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const i=n.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}const Oz=Zi("cnt");class Ube{constructor(e,n){var i;this.className_=Zi((i=n.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Oz()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),hl(this.foldable_,"completed",tm(this.element,this.className_(void 0,"cpl")));const s=e.createElement("button");s.classList.add(this.className_("b")),hl(n.props,"title",d=>{Ln(d)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const a=e.createElement("div");a.classList.add(this.className_("t")),a3(n.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a;const c=e.createElement("div");c.classList.add(this.className_("m")),this.buttonElement.appendChild(c);const h=e.createElement("div");h.classList.add(this.className_("c")),this.element.appendChild(h),this.containerElement=h}}class qD extends c3{constructor(e,n){var i;const s=yv.create((i=n.expanded)!==null&&i!==void 0?i:!0),o=new Ube(e,{foldable:s,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new h3({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=s,u3(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return gl(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return yl(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Rs({id:"folder",type:"blade",accept(r){const e=cs(r,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(r){return new qD(r.document,{blade:r.blade,expanded:r.params.expanded,props:qi.fromObject({title:r.params.title}),viewProps:r.viewProps})},api(r){return r.controller instanceof qD?new Bbe(r.controller,r.pool):null}});const Fbe=Zi("");function ZD(r,e){return tm(r,Fbe(void 0,e))}class vv extends qi{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=P1e(Dr(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,i,s;const o=e??{};return new vv(qi.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(i=o.hidden)!==null&&i!==void 0?i:!1,parent:(s=o.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){tc(this.globalDisabled_,ZD(e,"disabled")),hl(this,"hidden",ZD(e,"hidden"))}bindDisabled(e){tc(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){tc(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const i=e.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const KD=Zi("tbp");class zbe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(KD()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(KD("c")),this.element.appendChild(i),this.containerElement=i}}const dg=Zi("tbi");class Xbe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(dg()),n.viewProps.bindClassModifiers(this.element),hl(n.props,"selected",o=>{o?this.element.classList.add(dg(void 0,"sel")):this.element.classList.remove(dg(void 0,"sel"))});const i=e.createElement("button");i.classList.add(dg("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(dg("t")),a3(n.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class Wbe{constructor(e,n){this.emitter=new Ro,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Xbe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class tM extends c3{constructor(e,n){const i=new zbe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new h3({blade:n.blade,element:i.containerElement,viewProps:n.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Wbe(e,{props:n.itemProps,viewProps:vv.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,hl(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(e){return gl(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return yl(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Qbe extends l3{constructor(e,n){super(e,n),this.emitter_=new Ro,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,i=new tM(n,{blade:xz(),itemProps:qi.fromObject({selected:!1,title:e.title}),props:qi.fromObject({selected:!1}),viewProps:vv.create()}),s=this.pool_.createApi(i);return this.rackApi_.add(s,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const i=n.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}onSelect_(e){this.emitter_.emit("select",new lbe(this,e.rawValue))}}class Hbe extends l3{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,i){return this.rackApi_.addBinding(e,n,i)}addBlade(e){return this.rackApi_.addBlade(e)}}const JD=-1;class Gbe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Dr(!0),this.selectedIndex=Dr(JD),this.items_=[]}add(e,n){const i=n??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=JD,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,i)=>{n.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,i)=>{n.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,s)=>{i.rawValue=s===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const fg=Zi("tab");class Ybe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(fg(),Oz()),n.viewProps.bindClassModifiers(this.element),tc(n.empty,tm(this.element,fg(void 0,"nop")));const i=e.createElement("div");i.classList.add(fg("t")),this.element.appendChild(i),this.itemsElement=i;const s=e.createElement("div");s.classList.add(fg("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(fg("c")),this.element.appendChild(o),this.contentsElement=o}}class eN extends c3{constructor(e,n){const i=new Gbe,s=new Ybe(e,{empty:i.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new h3({blade:n.blade,element:s.contentsElement,viewProps:n.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;mz(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;o3(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Rs({id:"tab",type:"blade",accept(r){const e=cs(r,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(r){const e=new eN(r.document,{blade:r.blade,viewProps:r.viewProps});return r.params.pages.forEach(n=>{const i=new tM(r.document,{blade:xz(),itemProps:qi.fromObject({selected:!1,title:n.title}),props:qi.fromObject({selected:!1}),viewProps:vv.create()});e.add(i)}),e},api(r){return r.controller instanceof eN?new Qbe(r.controller,r.pool):r.controller instanceof tM?new Hbe(r.controller,r.pool):null}});class d3 extends r3{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class bv{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,i)=>i.constrain(n),e)}}function MO(r,e){if(r instanceof e)return r;if(r instanceof bv){const n=r.constraints.reduce((i,s)=>i||(s instanceof e?s:null),null);if(n)return n}return null}class h_{constructor(e){this.values=qi.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(s=>s.value===e).length>0?e:n[0].value}}function u_(r){var e;const n=JT;if(Array.isArray(r))return(e=cs({items:r},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof r=="object")return n.required.raw(r).value}function wz(r){if(Array.isArray(r))return r;const e=[];return Object.keys(r).forEach(n=>{e.push({text:n,value:r[n]})}),e}function f3(r){return Ln(r)?null:new h_(wz(r))}const i2=Zi("lst");class jbe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(i2()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(i2("s")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const s=e.createElement("div");s.classList.add(i2("m")),s.appendChild(c_(e,"dropdown")),this.element.appendChild(s),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,hl(this.props_,"options",o=>{gz(this.selectElement),o.forEach(a=>{const c=e.createElement("option");c.textContent=a.text,this.selectElement.appendChild(c)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Dp{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new jbe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return gl(e,null,n=>({options:n.required.custom(u_)}),n=>(this.props.set("options",wz(n.options)),!0))}exportProps(){return yl(null,{options:this.props.get("options")})}}const tN=Zi("pop");class qbe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(tN()),n.viewProps.bindClassModifiers(this.element),tc(n.shows,tm(this.element,tN(void 0,"v")))}}class _z{constructor(e,n){this.shows=Dr(!1),this.viewProps=n.viewProps,this.view=new qbe(e,{shows:this.shows,viewProps:this.viewProps})}}const iN=Zi("txt");let Zbe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(iN()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(iN("i")),i.type="text",n.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}};class p3{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Zbe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);Ln(s)||(this.value.rawValue=s),this.view.refresh()}}function Kbe(r){return String(r)}function Sz(r){return r==="false"?!1:!!r}function nN(r){return Kbe(r)}function Jbe(r){return e=>r.reduce((n,i)=>n!==null?n:i(e),null)}const exe=to(0);function EO(r){return exe(r)+"%"}function Cz(r){return String(r)}function iM(r){return r}function im({primary:r,secondary:e,forward:n,backward:i}){let s=!1;function o(a){s||(s=!0,a(),s=!1)}r.emitter.on("change",a=>{o(()=>{e.setRawValue(n(r.rawValue,e.rawValue),a.options)})}),e.emitter.on("change",a=>{o(()=>{r.setRawValue(i(r.rawValue,e.rawValue),a.options)}),o(()=>{e.setRawValue(n(r.rawValue,e.rawValue),a.options)})}),o(()=>{e.setRawValue(n(r.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Zs(r,e){const n=r*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Ty(r){return{altKey:r.altKey,downKey:r.key==="ArrowDown",shiftKey:r.shiftKey,upKey:r.key==="ArrowUp"}}function uc(r){return{altKey:r.altKey,downKey:r.key==="ArrowLeft",shiftKey:r.shiftKey,upKey:r.key==="ArrowRight"}}function txe(r){return r==="ArrowUp"||r==="ArrowDown"}function kz(r){return txe(r)||r==="ArrowLeft"||r==="ArrowRight"}function n2(r,e){var n,i;const s=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:r.pageX-(((n=s&&s.scrollX)!==null&&n!==void 0?n:0)+o.left),y:r.pageY-(((i=s&&s.scrollY)!==null&&i!==void 0?i:0)+o.top)}}class Rd{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ro,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n2(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n2(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n2(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const i=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-s.left,y:i.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Uo=Zi("txt");class ixe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Uo(),Uo(void 0,"num")),n.arrayPosition&&this.element.classList.add(Uo(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Uo("i")),i.type="text",n.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Uo()),this.inputElement.classList.add(Uo("i"));const s=e.createElement("div");s.classList.add(Uo("k")),this.element.appendChild(s),this.knobElement=s;const o=e.createElementNS(nl,"svg");o.classList.add(Uo("g")),this.knobElement.appendChild(o);const a=e.createElementNS(nl,"path");a.classList.add(Uo("gb")),o.appendChild(a),this.guideBodyElem_=a;const c=e.createElementNS(nl,"path");c.classList.add(Uo("gh")),o.appendChild(c),this.guideHeadElem_=c;const h=e.createElement("div");h.classList.add(Zi("tt")()),this.knobElement.appendChild(h),this.tooltipElem_=h,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Uo(void 0,"drg"));return}this.element.classList.add(Uo(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),i=n+(n>0?-1:n<0?1:0),s=xr(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+s},0 L${i},4 L${i+s},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class xv{constructor(e,n){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(i=n.sliderProps)!==null&&i!==void 0?i:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Dr(null),this.view=new ixe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new Rd(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,i;const s=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let a=e;return s!==void 0&&(a=Math.max(a,s)),o!==void 0&&(a=Math.min(a,o)),a}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);Ln(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(e){const n=Zs(this.props.get("keyScale"),Ty(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Zs(this.props.get("keyScale"),Ty(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const r2=Zi("sld");class nxe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(r2()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(r2("t")),n.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const s=e.createElement("div");s.classList.add(r2("k")),this.trackElement.appendChild(s),this.knobElement=s,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=xr(en(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class rxe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new nxe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Rd(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(en(xr(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Zs(this.props.get("keyScale"),uc(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Zs(this.props.get("keyScale"),uc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const s2=Zi("sldtxt");class sxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(s2());const i=e.createElement("div");i.classList.add(s2("s")),this.sliderView_=n.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(s2("t")),this.textView_=n.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class rN{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new rxe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new xv(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new sxe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return gl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const i=this.sliderC_.props;return i.set("max",n.max),i.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return yl(null,{max:e.get("max"),min:e.get("min")})}}function oxe(r){return{sliderProps:new qi({keyScale:r.keyScale,max:r.max,min:r.min}),textProps:new qi({formatter:Dr(r.formatter),keyScale:r.keyScale,pointerScale:Dr(r.pointerScale)})}}const axe={containerUnitSize:"cnt-usz"};function Tz(r){return`--${axe[r]}`}function My(r){return fz(r)}function fh(r){if(KT(r))return cs(r,My)}function jl(r,e){if(!r)return;const n=[],i=hz(r,e);i&&n.push(i);const s=uz(r);return s&&n.push(s),new bv(n)}function Mz(r){if(r==="inline"||r==="popup")return r}function Ov(r,e){r.write(e)}const Db=Zi("ckb");class lxe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Db()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(Db("l")),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("input");s.classList.add(Db("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(Db("w")),this.labelElement.appendChild(o);const a=c_(e,"check");o.appendChild(a),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class cxe{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new lxe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function hxe(r){const e=[],n=f3(r.options);return n&&e.push(n),new bv(e)}Rs({id:"input-bool",type:"input",accept:(r,e)=>{if(typeof r!="boolean")return null;const n=cs(e,i=>({options:i.optional.custom(u_),readonly:i.optional.constant(!1)}));return n?{initialValue:r,params:n}:null},binding:{reader:r=>Sz,constraint:r=>hxe(r.params),writer:r=>Ov},controller:r=>{const e=r.document,n=r.value,i=r.constraint,s=i&&MO(i,h_);return s?new Dp(e,{props:new qi({options:s.values.value("options")}),value:n,viewProps:r.viewProps}):new cxe(e,{value:n,viewProps:r.viewProps})},api(r){return typeof r.controller.value.rawValue!="boolean"?null:r.controller.valueController instanceof Dp?new d3(r.controller):null}});const Cu=Zi("col");class uxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Cu()),n.foldable.bindExpandedClass(this.element,Cu(void 0,"expanded")),hl(n.foldable,"completed",tm(this.element,Cu(void 0,"cpl")));const i=e.createElement("div");i.classList.add(Cu("h")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Cu("s")),i.appendChild(s),this.swatchElement=s;const o=e.createElement("div");if(o.classList.add(Cu("t")),i.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const a=e.createElement("div");a.classList.add(Cu("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}function dxe(r,e,n){const i=xr(r/255,0,1),s=xr(e/255,0,1),o=xr(n/255,0,1),a=Math.max(i,s,o),c=Math.min(i,s,o),h=a-c;let d=0,f=0;const p=(c+a)/2;return h!==0&&(f=h/(1-Math.abs(a+c-1)),i===a?d=(s-o)/h:s===a?d=2+(o-i)/h:d=4+(i-s)/h,d=d/6+(d<0?1:0)),[d*360,f*100,p*100]}function fxe(r,e,n){const i=(r%360+360)%360,s=xr(e/100,0,1),o=xr(n/100,0,1),a=(1-Math.abs(2*o-1))*s,c=a*(1-Math.abs(i/60%2-1)),h=o-a/2;let d,f,p;return i>=0&&i<60?[d,f,p]=[a,c,0]:i>=60&&i<120?[d,f,p]=[c,a,0]:i>=120&&i<180?[d,f,p]=[0,a,c]:i>=180&&i<240?[d,f,p]=[0,c,a]:i>=240&&i<300?[d,f,p]=[c,0,a]:[d,f,p]=[a,0,c],[(d+h)*255,(f+h)*255,(p+h)*255]}function pxe(r,e,n){const i=xr(r/255,0,1),s=xr(e/255,0,1),o=xr(n/255,0,1),a=Math.max(i,s,o),c=Math.min(i,s,o),h=a-c;let d;h===0?d=0:a===i?d=60*(((s-o)/h%6+6)%6):a===s?d=60*((o-i)/h+2):d=60*((i-s)/h+4);const f=a===0?0:h/a,p=a;return[d,f*100,p*100]}function Ez(r,e,n){const i=lz(r,360),s=xr(e/100,0,1),o=xr(n/100,0,1),a=o*s,c=a*(1-Math.abs(i/60%2-1)),h=o-a;let d,f,p;return i>=0&&i<60?[d,f,p]=[a,c,0]:i>=60&&i<120?[d,f,p]=[c,a,0]:i>=120&&i<180?[d,f,p]=[0,a,c]:i>=180&&i<240?[d,f,p]=[0,c,a]:i>=240&&i<300?[d,f,p]=[c,0,a]:[d,f,p]=[a,0,c],[(d+h)*255,(f+h)*255,(p+h)*255]}function mxe(r,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[r,i!==0?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function gxe(r,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[r,i!==0?e*n/i:0,n*(200-e)/(2*100)]}function ul(r){return[r[0],r[1],r[2]]}function d_(r,e){return[r[0],r[1],r[2],e]}const yxe={hsl:{hsl:(r,e,n)=>[r,e,n],hsv:mxe,rgb:fxe},hsv:{hsl:gxe,hsv:(r,e,n)=>[r,e,n],rgb:Ez},rgb:{hsl:dxe,hsv:pxe,rgb:(r,e,n)=>[r,e,n]}};function Np(r,e){return[e==="float"?1:r==="rgb"?255:360,e==="float"?1:r==="rgb"?255:100,e==="float"?1:r==="rgb"?255:100]}function vxe(r,e){return r===e?e:lz(r,e)}function Pz(r,e,n){var i;const s=Np(e,n);return[e==="rgb"?xr(r[0],0,s[0]):vxe(r[0],s[0]),xr(r[1],0,s[1]),xr(r[2],0,s[2]),xr((i=r[3])!==null&&i!==void 0?i:1,0,1)]}function sN(r,e,n,i){const s=Np(e,n),o=Np(e,i);return r.map((a,c)=>a/s[c]*o[c])}function Az(r,e,n){const i=sN(r,e.mode,e.type,"int"),s=yxe[e.mode][n.mode](...i);return sN(s,n.mode,"int",n.type)}class Yi{static black(){return new Yi([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=Pz(e,n,this.type)}getComponents(e){return d_(Az(ul(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const jc=Zi("colp");class bxe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(jc()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(jc("hsv"));const s=e.createElement("div");s.classList.add(jc("sv")),this.svPaletteView_=n.svPaletteView,s.appendChild(this.svPaletteView_.element),i.appendChild(s);const o=e.createElement("div");o.classList.add(jc("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),i.appendChild(o),this.element.appendChild(i);const a=e.createElement("div");if(a.classList.add(jc("rgb")),this.textsView_=n.textsView,a.appendChild(this.textsView_.element),this.element.appendChild(a),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const c=e.createElement("div");c.classList.add(jc("a"));const h=e.createElement("div");h.classList.add(jc("ap")),h.appendChild(this.alphaViews_.palette.element),c.appendChild(h);const d=e.createElement("div");d.classList.add(jc("at")),d.appendChild(this.alphaViews_.text.element),c.appendChild(d),this.element.appendChild(c)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function xxe(r){return r==="int"?"int":r==="float"?"float":void 0}function m3(r){return cs(r,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(xxe)}),expanded:e.optional.boolean,picker:e.optional.custom(Mz),readonly:e.optional.constant(!1)}))}function yd(r){return r?.1:1}function Rz(r){var e;return(e=r.color)===null||e===void 0?void 0:e.type}class g3{constructor(e,n){this.type="float",this.mode=n,this.comps_=Pz(e,n,this.type)}getComponents(e){return d_(Az(ul(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Oxe={int:(r,e)=>new Yi(r,e),float:(r,e)=>new g3(r,e)};function y3(r,e,n){return Oxe[n](r,e)}function wxe(r){return r.type==="float"}function _xe(r){return r.type==="int"}function Sxe(r){const e=r.getComponents(),n=Np(r.mode,"int");return new Yi([Math.round(en(e[0],0,1,0,n[0])),Math.round(en(e[1],0,1,0,n[1])),Math.round(en(e[2],0,1,0,n[2])),e[3]],r.mode)}function Cxe(r){const e=r.getComponents(),n=Np(r.mode,"int");return new g3([en(e[0],0,n[0],0,1),en(e[1],0,n[1],0,1),en(e[2],0,n[2],0,1),e[3]],r.mode)}function ks(r,e){if(r.type===e)return r;if(_xe(r)&&e==="float")return Cxe(r);if(wxe(r)&&e==="int")return Sxe(r);throw So.shouldNeverHappen()}function kxe(r,e){return r.alpha===e.alpha&&r.mode===e.mode&&r.notation===e.notation&&r.type===e.type}function jo(r,e){const n=r.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(r),e)}const Txe={deg:r=>r,grad:r=>r*360/400,rad:r=>r*360/(2*Math.PI),turn:r=>r*360};function Iz(r){const e=r.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(r);const n=parseFloat(e[1]),i=e[2];return Txe[i](n)}function Dz(r){const e=r.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[jo(e[1],255),jo(e[2],255),jo(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Mxe(r){const e=Dz(r);return e?new Yi(e,"rgb"):null}function Nz(r){const e=r.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[jo(e[1],255),jo(e[2],255),jo(e[3],255),jo(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Exe(r){const e=Nz(r);return e?new Yi(e,"rgb"):null}function $z(r){const e=r.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Iz(e[1]),jo(e[2],100),jo(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Pxe(r){const e=$z(r);return e?new Yi(e,"hsl"):null}function Vz(r){const e=r.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Iz(e[1]),jo(e[2],100),jo(e[3],100),jo(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Axe(r){const e=Vz(r);return e?new Yi(e,"hsl"):null}function Lz(r){const e=r.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=r.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Rxe(r){const e=Lz(r);return e?new Yi(e,"rgb"):null}function Bz(r){const e=r.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),en(parseInt(e[4]+e[4],16),0,255,0,1)];const n=r.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),en(parseInt(n[4],16),0,255,0,1)]:null}function Ixe(r){const e=Bz(r);return e?new Yi(e,"rgb"):null}function Uz(r){const e=r.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Dxe(r){return e=>{const n=Uz(e);return n?y3(n,"rgb",r):null}}function Fz(r){const e=r.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Nxe(r){return e=>{const n=Fz(e);return n?y3(n,"rgb",r):null}}const $xe=[{parser:Lz,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Bz,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Dz,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Nz,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:$z,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Vz,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Uz,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Fz,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Vxe(r){return $xe.reduce((e,{parser:n,result:i})=>e||(n(r)?i:null),null)}function Lxe(r,e="int"){const n=Vxe(r);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function wv(r){const e=[Rxe,Ixe,Mxe,Exe,Pxe,Axe];e.push(Dxe("int"),Nxe("int"));const n=Jbe(e);return i=>{const s=n(i);return s?ks(s,r):null}}function Bxe(r){const e=wv("int");if(typeof r!="string")return Yi.black();const n=e(r);return n??Yi.black()}function zz(r){const e=xr(Math.floor(r),0,255).toString(16);return e.length===1?`0${e}`:e}function v3(r,e="#"){const n=ul(r.getComponents("rgb")).map(zz).join("");return`${e}${n}`}function b3(r,e="#"){const n=r.getComponents("rgb"),i=[n[0],n[1],n[2],n[3]*255].map(zz).join("");return`${e}${i}`}function Xz(r){const e=to(0),n=ks(r,"int");return`rgb(${ul(n.getComponents("rgb")).map(s=>e(s)).join(", ")})`}function zx(r){const e=to(2),n=to(0);return`rgba(${ks(r,"int").getComponents("rgb").map((o,a)=>(a===3?e:n)(o)).join(", ")})`}function Uxe(r){const e=[to(0),EO,EO],n=ks(r,"int");return`hsl(${ul(n.getComponents("hsl")).map((s,o)=>e[o](s)).join(", ")})`}function Fxe(r){const e=[to(0),EO,EO,to(2)];return`hsla(${ks(r,"int").getComponents("hsl").map((s,o)=>e[o](s)).join(", ")})`}function Wz(r,e){const n=to(e==="float"?2:0),i=["r","g","b"],s=ks(r,e);return`{${ul(s.getComponents("rgb")).map((a,c)=>`${i[c]}: ${n(a)}`).join(", ")}}`}function zxe(r){return e=>Wz(e,r)}function Qz(r,e){const n=to(2),i=to(e==="float"?2:0),s=["r","g","b","a"];return`{${ks(r,e).getComponents("rgb").map((c,h)=>{const d=h===3?n:i;return`${s[h]}: ${d(c)}`}).join(", ")}}`}function Xxe(r){return e=>Qz(e,r)}const Wxe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:v3},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:b3},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Xz},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:zx},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Uxe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Fxe},...["int","float"].reduce((r,e)=>[...r,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:zxe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Xxe(e)}],[])];function Hz(r){return Wxe.reduce((e,n)=>e||(kxe(n.format,r)?n.stringifier:null),null)}const pg=Zi("apl");class Qxe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(pg()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(pg("b")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(pg("c")),i.appendChild(s),this.colorElem_=s;const o=e.createElement("div");o.classList.add(pg("m")),this.element.appendChild(o),this.markerElem_=o;const a=e.createElement("div");a.classList.add(pg("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),i=new Yi([n[0],n[1],n[2],0],"rgb"),s=new Yi([n[0],n[1],n[2],255],"rgb"),o=["to right",zx(i),zx(s)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=zx(e);const a=en(n[3],0,1,0,100);this.markerElem_.style.left=`${a}%`}onValueChange_(){this.update_()}}class Hxe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Qxe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Rd(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const i=e.point.x/e.bounds.width,s=this.value.rawValue,[o,a,c]=s.getComponents("hsv");this.value.setRawValue(new Yi([o,a,c,i],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Zs(yd(!0),uc(e));if(n===0)return;const i=this.value.rawValue,[s,o,a,c]=i.getComponents("hsv");this.value.setRawValue(new Yi([s,o,a,c+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Zs(yd(!0),uc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const _f=Zi("coltxt");function Gxe(r){const e=r.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((i,s)=>{const o=r.createElement("option");return o.textContent=s.text,o.value=s.value,i.appendChild(o),i},r.createDocumentFragment())),e}class Yxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(_f()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(_f("m")),this.modeElem_=Gxe(e),this.modeElem_.classList.add(_f("ms")),i.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const s=e.createElement("div");s.classList.add(_f("mm")),s.appendChild(c_(e,"dropdown")),i.appendChild(s),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(_f("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),tc(n.mode,a=>{this.modeElem_.value=a})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){gz(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const i=e.createElement("div");i.classList.add(_f("c")),i.appendChild(n.element),this.inputsElem_.appendChild(i)})}}function jxe(r){return to(r==="float"?2:0)}function qxe(r,e,n){const i=Np(r,e)[n];return new a_({min:0,max:i})}function Zxe(r,e,n){return new xv(r,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:qi.fromObject({formatter:jxe(e.colorType),keyScale:yd(!1),pointerScale:e.colorType==="float"?.01:1}),value:Dr(0,{constraint:qxe(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function Kxe(r,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Ah,viewProps:e.viewProps};return[0,1,2].map(i=>{const s=Zxe(r,n,i);return im({primary:e.value,secondary:s.value,forward(o){return ks(o,e.colorType).getComponents(e.colorMode)[i]},backward(o,a){const c=e.colorMode,d=ks(o,e.colorType).getComponents(c);d[i]=a;const f=y3(d_(ul(d),d[3]),c,e.colorType);return ks(f,"int")}}),s})}function Jxe(r,e){const n=new p3(r,{parser:wv("int"),props:qi.fromObject({formatter:v3}),value:Dr(Yi.black()),viewProps:e.viewProps});return im({primary:e.value,secondary:n.value,forward:i=>new Yi(ul(i.getComponents()),i.mode),backward:(i,s)=>new Yi(d_(ul(s.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[n]}function eOe(r){return r!=="hex"}class tOe{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Dr(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Yxe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return eOe(n)?Kxe(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Jxe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const o2=Zi("hpl");class iOe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(o2()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(o2("c")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(o2("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Xz(new Yi([n,100,100],"hsv"));const i=en(n,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class nOe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new iOe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Rd(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const i=en(xr(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),s=this.value.rawValue,[,o,a,c]=s.getComponents("hsv");this.value.setRawValue(new Yi([i,o,a,c],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Zs(yd(!1),uc(e));if(n===0)return;const i=this.value.rawValue,[s,o,a,c]=i.getComponents("hsv");this.value.setRawValue(new Yi([s+n,o,a,c],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Zs(yd(!1),uc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const a2=Zi("svp"),oN=64;class rOe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(a2()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=oN,i.width=oN,i.classList.add(a2("c")),this.element.appendChild(i),this.canvasElement=i;const s=e.createElement("div");s.classList.add(a2("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=mbe(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,o=this.canvasElement.height,a=e.getImageData(0,0,s,o),c=a.data;for(let f=0;f<o;f++)for(let p=0;p<s;p++){const g=en(p,0,s,0,100),y=en(f,0,o,100,0),b=Ez(i[0],g,y),w=(f*s+p)*4;c[w]=b[0],c[w+1]=b[1],c[w+2]=b[2],c[w+3]=255}e.putImageData(a,0,0);const h=en(i[1],0,100,0,100);this.markerElem_.style.left=`${h}%`;const d=en(i[2],0,100,100,0);this.markerElem_.style.top=`${d}%`}onValueChange_(){this.update_()}}class sOe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new rOe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Rd(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const i=en(e.point.x,0,e.bounds.width,0,100),s=en(e.point.y,0,e.bounds.height,100,0),[o,,,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Yi([o,i,s,a],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){kz(e.key)&&e.preventDefault();const[n,i,s,o]=this.value.rawValue.getComponents("hsv"),a=yd(!1),c=Zs(a,uc(e)),h=Zs(a,Ty(e));c===0&&h===0||this.value.setRawValue(new Yi([n,i+c,s+h,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=yd(!1),i=Zs(n,uc(e)),s=Zs(n,Ty(e));i===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class oOe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new nOe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new sOe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Hxe(e,{value:this.value,viewProps:this.viewProps}),text:new xv(e,{parser:Ah,props:qi.fromObject({pointerScale:.01,keyScale:.1,formatter:to(2)}),value:Dr(0,{constraint:new a_({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&im({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,s)=>{const o=i.getComponents();return o[3]=s,new Yi(o,i.mode)}}),this.textsC_=new tOe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new bxe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const l2=Zi("colsw");class aOe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(l2()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(l2("sw")),this.element.appendChild(i),this.swatchElem_=i;const s=e.createElement("button");s.classList.add(l2("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=b3(e)}onValueChange_(){this.update_()}}class lOe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new aOe(e,{value:this.value,viewProps:this.viewProps})}}class x3{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=yv.create(n.expanded),this.swatchC_=new lOe(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new p3(e,{parser:n.parser,props:qi.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new uxe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new _z(e,{viewProps:this.viewProps}):null;const s=new oOe(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),im({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),u3(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,i=e.relatedTarget;(!i||!n.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,i=yz(e);i&&n.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!s3(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function cOe(r){return ul(r.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function hOe(r){return r.getComponents("rgb").reduce((e,n,i)=>{const s=Math.floor(i===3?n*255:n)&255;return e<<8|s},0)>>>0}function uOe(r){return new Yi([r>>16&255,r>>8&255,r&255],"rgb")}function dOe(r){return new Yi([r>>24&255,r>>16&255,r>>8&255,en(r&255,0,255,0,1)],"rgb")}function fOe(r){return typeof r!="number"?Yi.black():uOe(r)}function pOe(r){return typeof r!="number"?Yi.black():dOe(r)}function Xx(r,e){return typeof r!="object"||Ln(r)?!1:e in r&&typeof r[e]=="number"}function Gz(r){return Xx(r,"r")&&Xx(r,"g")&&Xx(r,"b")}function Yz(r){return Gz(r)&&Xx(r,"a")}function jz(r){return Gz(r)}function O3(r,e){if(r.mode!==e.mode||r.type!==e.type)return!1;const n=r.getComponents(),i=e.getComponents();for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}function aN(r){return"a"in r?[r.r,r.g,r.b,r.a]:[r.r,r.g,r.b]}function mOe(r){const e=Hz(r);return e?(n,i)=>{Ov(n,e(i))}:null}function gOe(r){const e=r?hOe:cOe;return(n,i)=>{Ov(n,e(i))}}function yOe(r,e,n){const s=ks(e,n).toRgbaObject();r.writeProperty("r",s.r),r.writeProperty("g",s.g),r.writeProperty("b",s.b),r.writeProperty("a",s.a)}function vOe(r,e,n){const s=ks(e,n).toRgbaObject();r.writeProperty("r",s.r),r.writeProperty("g",s.g),r.writeProperty("b",s.b)}function bOe(r,e){return(n,i)=>{r?yOe(n,i,e):vOe(n,i,e)}}function xOe(r){var e;return!!(!((e=r==null?void 0:r.color)===null||e===void 0)&&e.alpha)}function OOe(r){return r?e=>b3(e,"0x"):e=>v3(e,"0x")}function wOe(r){return"color"in r||r.view==="color"}Rs({id:"input-color-number",type:"input",accept:(r,e)=>{if(typeof r!="number"||!wOe(e))return null;const n=m3(e);return n?{initialValue:r,params:Object.assign(Object.assign({},n),{supportsAlpha:xOe(e)})}:null},binding:{reader:r=>r.params.supportsAlpha?pOe:fOe,equals:O3,writer:r=>gOe(r.params.supportsAlpha)},controller:r=>{var e,n;return new x3(r.document,{colorType:"int",expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,formatter:OOe(r.params.supportsAlpha),parser:wv("int"),pickerLayout:(n=r.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r.params.supportsAlpha,value:r.value,viewProps:r.viewProps})}});function _Oe(r,e){if(!jz(r))return ks(Yi.black(),e);if(e==="int"){const n=aN(r);return new Yi(n,"rgb")}if(e==="float"){const n=aN(r);return new g3(n,"rgb")}return ks(Yi.black(),"int")}function SOe(r){return Yz(r)}function COe(r){return e=>{const n=_Oe(e,r);return ks(n,"int")}}function kOe(r,e){return n=>r?Qz(n,e):Wz(n,e)}Rs({id:"input-color-object",type:"input",accept:(r,e)=>{var n;if(!jz(r))return null;const i=m3(e);return i?{initialValue:r,params:Object.assign(Object.assign({},i),{colorType:(n=Rz(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:r=>COe(r.params.colorType),equals:O3,writer:r=>bOe(SOe(r.initialValue),r.params.colorType)},controller:r=>{var e,n;const i=Yz(r.initialValue);return new x3(r.document,{colorType:r.params.colorType,expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,formatter:kOe(i,r.params.colorType),parser:wv("int"),pickerLayout:(n=r.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:i,value:r.value,viewProps:r.viewProps})}});Rs({id:"input-color-string",type:"input",accept:(r,e)=>{if(typeof r!="string"||e.view==="text")return null;const n=Lxe(r,Rz(e));if(!n)return null;const i=Hz(n);if(!i)return null;const s=m3(e);return s?{initialValue:r,params:Object.assign(Object.assign({},s),{format:n,stringifier:i})}:null},binding:{reader:()=>Bxe,equals:O3,writer:r=>{const e=mOe(r.params.format);if(!e)throw So.notBindable();return e}},controller:r=>{var e,n;return new x3(r.document,{colorType:r.params.format.type,expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,formatter:r.params.stringifier,parser:wv("int"),pickerLayout:(n=r.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r.params.format.alpha,value:r.value,viewProps:r.viewProps})}});class w3{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((i,s)=>{var o,a;return(a=(o=this.components[s])===null||o===void 0?void 0:o.constrain(i))!==null&&a!==void 0?a:i});return this.asm_.fromComponents(n)}}const lN=Zi("pndtxt");class TOe{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(lN()),this.textViews.forEach(i=>{const s=e.createElement("div");s.classList.add(lN("a")),s.appendChild(i.element),this.element.appendChild(s)})}}function MOe(r,e,n){return new xv(r,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Dr(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class _3{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((i,s)=>MOe(e,n,s)),this.acs_.forEach((i,s)=>{im({primary:this.value,secondary:i.value,forward:o=>n.assembly.toComponents(o)[s],backward:(o,a)=>{const c=n.assembly.toComponents(o);return c[s]=a,n.assembly.fromComponents(c)}})}),this.view=new TOe(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class EOe extends r3{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function POe(r,e){const n=[],i=hz(r,e);i&&n.push(i);const s=uz(r);s&&n.push(s);const o=f3(r.options);return o&&n.push(o),new bv(n)}Rs({id:"input-number",type:"input",accept:(r,e)=>{if(typeof r!="number")return null;const n=cs(e,i=>Object.assign(Object.assign({},fz(i)),{options:i.optional.custom(u_),readonly:i.optional.constant(!1)}));return n?{initialValue:r,params:n}:null},binding:{reader:r=>az,constraint:r=>POe(r.params,r.initialValue),writer:r=>Ov},controller:r=>{const e=r.value,n=r.constraint,i=n&&MO(n,h_);if(i)return new Dp(r.document,{props:new qi({options:i.values.value("options")}),value:e,viewProps:r.viewProps});const s=dz(r.params,e.rawValue),o=n&&MO(n,a_);return o?new rN(r.document,Object.assign(Object.assign({},oxe(Object.assign(Object.assign({},s),{keyScale:Dr(s.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:Ah,value:e,viewProps:r.viewProps})):new xv(r.document,{parser:Ah,props:qi.fromObject(s),value:e,viewProps:r.viewProps})},api(r){return typeof r.controller.value.rawValue!="number"?null:r.controller.valueController instanceof rN?new EOe(r.controller):r.controller.valueController instanceof Dp?new d3(r.controller):null}});class Oh{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Ln(e))return!1;const n=e.x,i=e.y;return!(typeof n!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const qz={toComponents:r=>r.getComponents(),fromComponents:r=>new Oh(...r)},Sf=Zi("p2d");class AOe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Sf()),n.viewProps.bindClassModifiers(this.element),tc(n.expanded,tm(this.element,Sf(void 0,"expanded")));const i=e.createElement("div");i.classList.add(Sf("h")),this.element.appendChild(i);const s=e.createElement("button");s.classList.add(Sf("b")),s.appendChild(c_(e,"p2dpad")),n.viewProps.bindDisabled(s),i.appendChild(s),this.buttonElement=s;const o=e.createElement("div");if(o.classList.add(Sf("t")),i.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const a=e.createElement("div");a.classList.add(Sf("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}const qc=Zi("p2dp");class ROe{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(qc()),n.layout==="popup"&&this.element.classList.add(qc(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(qc("p")),n.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const s=e.createElementNS(nl,"svg");s.classList.add(qc("g")),this.padElement.appendChild(s),this.svgElem_=s;const o=e.createElementNS(nl,"line");o.classList.add(qc("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const a=e.createElementNS(nl,"line");a.classList.add(qc("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);const c=e.createElementNS(nl,"line");c.classList.add(qc("l")),c.setAttributeNS(null,"x1","50%"),c.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(c),this.lineElem_=c;const h=e.createElement("div");h.classList.add(qc("m")),this.padElement.appendChild(h),this.markerElem_=h,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),i=this.props_.get("max"),s=en(e,-i,+i,0,100),o=en(n,-i,+i,0,100),a=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${a}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function cN(r,e,n){return[Zs(e[0],uc(r)),Zs(e[1],Ty(r))*(n?1:-1)]}class IOe{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new ROe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Rd(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const i=this.props.get("max"),s=en(e.point.x,0,e.bounds.width,-i,+i),o=en(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new Oh(s,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){kz(e.key)&&e.preventDefault();const[n,i]=cN(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&i===0||this.value.setRawValue(new Oh(this.value.rawValue.x+n,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,i]=cN(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class DOe{constructor(e,n){var i,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=yv.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new _z(e,{viewProps:this.viewProps}):null;const o=new IOe(e,{layout:n.pickerLayout,props:new qi({invertsY:Dr(n.invertsY),max:Dr(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(a=>{a.addEventListener("blur",this.onPopupChildBlur_),a.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new _3(e,{assembly:qz,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new AOe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),im({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:a=>a,backward:(a,c)=>c})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),u3(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,i=e.relatedTarget;(!i||!n.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,i=yz(e);i&&n.contains(i)||i&&i===this.view.buttonElement&&!s3(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function NOe(r){return Oh.isObject(r)?new Oh(r.x,r.y):new Oh}function $Oe(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y)}function VOe(r,e){return new w3({assembly:qz,components:[jl(Object.assign(Object.assign({},r),r.x),e.x),jl(Object.assign(Object.assign({},r),r.y),e.y)]})}function hN(r,e){var n,i;if(!Ln(r.min)||!Ln(r.max))return Math.max(Math.abs((n=r.min)!==null&&n!==void 0?n:0),Math.abs((i=r.max)!==null&&i!==void 0?i:0));const s=cz(r);return Math.max(Math.abs(s)*10,Math.abs(e)*10)}function LOe(r,e){var n,i;const s=hN(gd(r,(n=r.x)!==null&&n!==void 0?n:{}),e.x),o=hN(gd(r,(i=r.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(s,o)}function BOe(r){if(!("y"in r))return!1;const e=r.y;return e&&"inverted"in e?!!e.inverted:!1}Rs({id:"input-point2d",type:"input",accept:(r,e)=>{if(!Oh.isObject(r))return null;const n=cs(e,i=>Object.assign(Object.assign({},My(i)),{expanded:i.optional.boolean,picker:i.optional.custom(Mz),readonly:i.optional.constant(!1),x:i.optional.custom(fh),y:i.optional.object(Object.assign(Object.assign({},My(i)),{inverted:i.optional.boolean}))}));return n?{initialValue:r,params:n}:null},binding:{reader:()=>NOe,constraint:r=>VOe(r.params,r.initialValue),equals:Oh.equals,writer:()=>$Oe},controller:r=>{var e,n;const i=r.document,s=r.value,o=r.constraint,a=[r.params.x,r.params.y];return new DOe(i,{axes:s.rawValue.getComponents().map((c,h)=>{var d;return i3({constraint:o.components[h],initialValue:c,params:gd(r.params,(d=a[h])!==null&&d!==void 0?d:{})})}),expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,invertsY:BOe(r.params),max:LOe(r.params,s.rawValue),parser:Ah,pickerLayout:(n=r.params.picker)!==null&&n!==void 0?n:"popup",value:s,viewProps:r.viewProps})}});class np{constructor(e=0,n=0,i=0){this.x=e,this.y=n,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Ln(e))return!1;const n=e.x,i=e.y,s=e.z;return!(typeof n!="number"||typeof i!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Zz={toComponents:r=>r.getComponents(),fromComponents:r=>new np(...r)};function UOe(r){return np.isObject(r)?new np(r.x,r.y,r.z):new np}function FOe(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z)}function zOe(r,e){return new w3({assembly:Zz,components:[jl(Object.assign(Object.assign({},r),r.x),e.x),jl(Object.assign(Object.assign({},r),r.y),e.y),jl(Object.assign(Object.assign({},r),r.z),e.z)]})}Rs({id:"input-point3d",type:"input",accept:(r,e)=>{if(!np.isObject(r))return null;const n=cs(e,i=>Object.assign(Object.assign({},My(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(fh),y:i.optional.custom(fh),z:i.optional.custom(fh)}));return n?{initialValue:r,params:n}:null},binding:{reader:r=>UOe,constraint:r=>zOe(r.params,r.initialValue),equals:np.equals,writer:r=>FOe},controller:r=>{const e=r.value,n=r.constraint,i=[r.params.x,r.params.y,r.params.z];return new _3(r.document,{assembly:Zz,axes:e.rawValue.getComponents().map((s,o)=>{var a;return i3({constraint:n.components[o],initialValue:s,params:gd(r.params,(a=i[o])!==null&&a!==void 0?a:{})})}),parser:Ah,value:e,viewProps:r.viewProps})}});class rp{constructor(e=0,n=0,i=0,s=0){this.x=e,this.y=n,this.z=i,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Ln(e))return!1;const n=e.x,i=e.y,s=e.z,o=e.w;return!(typeof n!="number"||typeof i!="number"||typeof s!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Kz={toComponents:r=>r.getComponents(),fromComponents:r=>new rp(...r)};function XOe(r){return rp.isObject(r)?new rp(r.x,r.y,r.z,r.w):new rp}function WOe(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z),r.writeProperty("w",e.w)}function QOe(r,e){return new w3({assembly:Kz,components:[jl(Object.assign(Object.assign({},r),r.x),e.x),jl(Object.assign(Object.assign({},r),r.y),e.y),jl(Object.assign(Object.assign({},r),r.z),e.z),jl(Object.assign(Object.assign({},r),r.w),e.w)]})}Rs({id:"input-point4d",type:"input",accept:(r,e)=>{if(!rp.isObject(r))return null;const n=cs(e,i=>Object.assign(Object.assign({},My(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(fh),x:i.optional.custom(fh),y:i.optional.custom(fh),z:i.optional.custom(fh)}));return n?{initialValue:r,params:n}:null},binding:{reader:r=>XOe,constraint:r=>QOe(r.params,r.initialValue),equals:rp.equals,writer:r=>WOe},controller:r=>{const e=r.value,n=r.constraint,i=[r.params.x,r.params.y,r.params.z,r.params.w];return new _3(r.document,{assembly:Kz,axes:e.rawValue.getComponents().map((s,o)=>{var a;return i3({constraint:n.components[o],initialValue:s,params:gd(r.params,(a=i[o])!==null&&a!==void 0?a:{})})}),parser:Ah,value:e,viewProps:r.viewProps})}});function HOe(r){const e=[],n=f3(r.options);return n&&e.push(n),new bv(e)}Rs({id:"input-string",type:"input",accept:(r,e)=>{if(typeof r!="string")return null;const n=cs(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(u_)}));return n?{initialValue:r,params:n}:null},binding:{reader:r=>Cz,constraint:r=>HOe(r.params),writer:r=>Ov},controller:r=>{const e=r.document,n=r.value,i=r.constraint,s=i&&MO(i,h_);return s?new Dp(e,{props:new qi({options:s.values.value("options")}),value:n,viewProps:r.viewProps}):new p3(e,{parser:o=>o,props:qi.fromObject({formatter:iM}),value:n,viewProps:r.viewProps})},api(r){return typeof r.controller.value.rawValue!="string"?null:r.controller.valueController instanceof Dp?new d3(r.controller):null}});const f_={monitor:{defaultInterval:200,defaultRows:3}},uN=Zi("mll");class GOe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(uN()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(uN("i")),i.style.height=`calc(var(${Tz("containerUnitSize")}) * ${n.rows})`,i.readOnly=!0,n.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(s=>{s!==void 0&&i.push(this.formatter_(s))}),e.textContent=i.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class S3{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new GOe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const dN=Zi("sgl");class YOe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(dN()),n.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(dN("i")),i.readOnly=!0,i.type="text",n.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class C3{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new YOe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Rs({id:"monitor-bool",type:"monitor",accept:(r,e)=>{if(typeof r!="boolean")return null;const n=cs(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return n?{initialValue:r,params:n}:null},binding:{reader:r=>Sz},controller:r=>{var e;return r.value.rawValue.length===1?new C3(r.document,{formatter:nN,value:r.value,viewProps:r.viewProps}):new S3(r.document,{formatter:nN,rows:(e=r.params.rows)!==null&&e!==void 0?e:f_.monitor.defaultRows,value:r.value,viewProps:r.viewProps})}});class jOe extends r3{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Zc=Zi("grl");class qOe{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Zc()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(nl,"svg");i.classList.add(Zc("g")),i.style.height=`calc(var(${Tz("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(i),this.svgElem_=i;const s=e.createElementNS(nl,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const o=e.createElement("div");o.classList.add(Zc("t"),Zi("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:n}=this.element,i=this.value.rawValue.length-1,s=this.props_.get("min"),o=this.props_.get("max"),a=[];this.value.rawValue.forEach((p,g)=>{if(p===void 0)return;const y=en(g,0,i,0,e),b=en(p,s,o,n,0);a.push([y,b].join(","))}),this.lineElem_.setAttributeNS(null,"points",a.join(" "));const c=this.tooltipElem_,h=this.value.rawValue[this.cursor_.rawValue];if(h===void 0){c.classList.remove(Zc("t","a"));return}const d=en(this.cursor_.rawValue,0,i,0,e),f=en(h,s,o,n,0);c.style.left=`${d}px`,c.style.top=`${f}px`,c.textContent=`${this.formatter_(h)}`,c.classList.contains(Zc("t","a"))||(c.classList.add(Zc("t","a"),Zc("t","in")),TO(c),c.classList.remove(Zc("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Jz{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Dr(-1),this.view=new qOe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!s3(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new Rd(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return gl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return yl(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(en(e.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(en(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function nM(r){return Ln(r.format)?to(2):r.format}function ZOe(r){var e;return r.value.rawValue.length===1?new C3(r.document,{formatter:nM(r.params),value:r.value,viewProps:r.viewProps}):new S3(r.document,{formatter:nM(r.params),rows:(e=r.params.rows)!==null&&e!==void 0?e:f_.monitor.defaultRows,value:r.value,viewProps:r.viewProps})}function KOe(r){var e,n,i;return new Jz(r.document,{formatter:nM(r.params),rows:(e=r.params.rows)!==null&&e!==void 0?e:f_.monitor.defaultRows,props:qi.fromObject({max:(n=r.params.max)!==null&&n!==void 0?n:100,min:(i=r.params.min)!==null&&i!==void 0?i:0}),value:r.value,viewProps:r.viewProps})}function fN(r){return r.view==="graph"}Rs({id:"monitor-number",type:"monitor",accept:(r,e)=>{if(typeof r!="number")return null;const n=cs(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return n?{initialValue:r,params:n}:null},binding:{defaultBufferSize:r=>fN(r)?64:1,reader:r=>az},controller:r=>fN(r.params)?KOe(r):ZOe(r),api:r=>r.controller.valueController instanceof Jz?new jOe(r.controller):null});Rs({id:"monitor-string",type:"monitor",accept:(r,e)=>{if(typeof r!="string")return null;const n=cs(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return n?{initialValue:r,params:n}:null},binding:{reader:r=>Cz},controller:r=>{var e;const n=r.value;return n.rawValue.length>1||r.params.multiline?new S3(r.document,{formatter:iM,rows:(e=r.params.rows)!==null&&e!==void 0?e:f_.monitor.defaultRows,value:n,viewProps:r.viewProps}):new C3(r.document,{formatter:iM,value:n,viewProps:r.viewProps})}});new bz("4.0.3");const JOe=parseInt(jp.replace(/\D+/g,""));var ewe=Object.defineProperty,twe=(r,e,n)=>e in r?ewe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,iwe=(r,e,n)=>(twe(r,e+"",n),n);async function pN(r){const e=await r.arrayBuffer(),n=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${r.type||""};base64,${n}`}let Nb,c2,Cf,$b;function h2(r,e=1/0,n=null){c2||(c2=new Wh(2,2,1,1)),Cf||(Cf=new Ps({uniforms:{blitTexture:new r_(r)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),Cf.uniforms.blitTexture.value=r,Cf.defines.IS_SRGB="colorSpace"in r?r.colorSpace==="srgb":r.encoding===3001,Cf.needsUpdate=!0,$b||($b=new sn(c2,Cf),$b.frustrumCulled=!1);const i=new rn,s=new Mp;s.add($b),n||(n=Nb=new L0({antialias:!1})),n.setSize(Math.min(r.image.width,e),Math.min(r.image.height,e)),n.clear(),n.render(s,i);const o=new Hn(n.domElement);return o.minFilter=r.minFilter,o.magFilter=r.magFilter,o.wrapS=r.wrapS,o.wrapT=r.wrapT,o.name=r.name,Nb&&(Nb.dispose(),Nb=null),o}const mN={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class e7{constructor(){this.pluginCallbacks=[],this.register(function(e){return new dwe(e)}),this.register(function(e){return new fwe(e)}),this.register(function(e){return new gwe(e)}),this.register(function(e){return new ywe(e)}),this.register(function(e){return new vwe(e)}),this.register(function(e){return new bwe(e)}),this.register(function(e){return new pwe(e)}),this.register(function(e){return new mwe(e)}),this.register(function(e){return new xwe(e)}),this.register(function(e){return new Owe(e)}),this.register(function(e){return new wwe(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,s){const o=new uwe,a=[];for(let c=0,h=this.pluginCallbacks.length;c<h;c++)a.push(this.pluginCallbacks[c](o));o.setPlugins(a),o.write(e,n,s).catch(i)}parseAsync(e,n){const i=this;return new Promise(function(s,o){i.parse(e,s,o,n)})}}iwe(e7,"Utils",{insertKeyframe:function(r,e){const n=r.getValueSize(),i=new r.TimeBufferType(r.times.length+1),s=new r.ValueBufferType(r.values.length+n),o=r.createInterpolant(new r.ValueBufferType(n));let a;if(r.times.length===0){i[0]=e;for(let c=0;c<n;c++)s[c]=0;a=0}else if(e<r.times[0]){if(Math.abs(r.times[0]-e)<.001)return 0;i[0]=e,i.set(r.times,1),s.set(o.evaluate(e),0),s.set(r.values,n),a=0}else if(e>r.times[r.times.length-1]){if(Math.abs(r.times[r.times.length-1]-e)<.001)return r.times.length-1;i[i.length-1]=e,i.set(r.times,0),s.set(r.values,0),s.set(o.evaluate(e),r.values.length),a=i.length-1}else for(let c=0;c<r.times.length;c++){if(Math.abs(r.times[c]-e)<.001)return c;if(r.times[c]<e&&r.times[c+1]>e){i.set(r.times.slice(0,c+1),0),i[c+1]=e,i.set(r.times.slice(c+1),c+2),s.set(r.values.slice(0,(c+1)*n),0),s.set(o.evaluate(e),(c+1)*n),s.set(r.values.slice((c+1)*n),(c+2)*n),a=c+1;break}}return r.times=i,r.values=s,a},mergeMorphTargetTracks:function(r,e){const n=[],i={},s=r.tracks;for(let o=0;o<s.length;++o){let a=s[o];const c=vi.parseTrackName(a.name),h=vi.findNode(e,c.nodeName);if(c.propertyName!=="morphTargetInfluences"||c.propertyIndex===void 0){n.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(Cp)}const d=h.morphTargetInfluences.length,f=h.morphTargetDictionary[c.propertyIndex];if(f===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+c.propertyIndex);let p;if(i[h.uuid]===void 0){p=a.clone();const y=new p.ValueBufferType(d*p.times.length);for(let b=0;b<p.times.length;b++)y[b*d+f]=p.values[b];p.name=(c.nodeName||"")+".morphTargetInfluences",p.values=y,i[h.uuid]=p,n.push(p);continue}const g=a.createInterpolant(new a.ValueBufferType(1));p=i[h.uuid];for(let y=0;y<p.times.length;y++)p.values[y*d+f]=g.evaluate(p.times[y]);for(let y=0;y<a.times.length;y++){const b=this.insertKeyframe(p,a.times[y]);p.values[b*d+f]=a.values[y]}}return r.tracks=n,r}});const Ii={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},u2="KHR_mesh_quantization",ko={};ko[vr]=Ii.NEAREST;ko[Aw]=Ii.NEAREST_MIPMAP_NEAREST;ko[zu]=Ii.NEAREST_MIPMAP_LINEAR;ko[Zn]=Ii.LINEAR;ko[tp]=Ii.LINEAR_MIPMAP_NEAREST;ko[Ca]=Ii.LINEAR_MIPMAP_LINEAR;ko[_s]=Ii.CLAMP_TO_EDGE;ko[Ph]=Ii.REPEAT;ko[wp]=Ii.MIRRORED_REPEAT;const gN={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},nwe=new rt,yN=12,rwe=1179937895,swe=2,vN=8,owe=1313821514,awe=5130562;function w0(r,e){return r.length===e.length&&r.every(function(n,i){return n===e[i]})}function lwe(r){return new TextEncoder().encode(r).buffer}function cwe(r){return w0(r.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function hwe(r,e,n){const i={min:new Array(r.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(r.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+n;s++)for(let o=0;o<r.itemSize;o++){let a;r.itemSize>4?a=r.array[s*r.itemSize+o]:(o===0?a=r.getX(s):o===1?a=r.getY(s):o===2?a=r.getZ(s):o===3&&(a=r.getW(s)),r.normalized===!0&&(a=ns.normalize(a,r.array))),i.min[o]=Math.min(i.min[o],a),i.max[o]=Math.max(i.max[o],a)}return i}function t7(r){return Math.ceil(r/4)*4}function d2(r,e=0){const n=t7(r.byteLength);if(n!==r.byteLength){const i=new Uint8Array(n);if(i.set(new Uint8Array(r)),e!==0)for(let s=r.byteLength;s<n;s++)i[s]=e;return i.buffer}return r}function bN(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function xN(r,e){if(r.toBlob!==void 0)return new Promise(i=>r.toBlob(i,e));let n;return e==="image/jpeg"?n=.92:e==="image/webp"&&(n=.8),r.convertToBlob({type:e,quality:n})}class uwe{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,n,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const s=this,o=s.buffers,a=s.json;i=s.options;const c=s.extensionsUsed,h=s.extensionsRequired,d=new Blob(o,{type:"application/octet-stream"}),f=Object.keys(c),p=Object.keys(h);f.length>0&&(a.extensionsUsed=f),p.length>0&&(a.extensionsRequired=p),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=d.size),i.binary===!0?d.arrayBuffer().then(g=>{const y=d2(g),b=new DataView(new ArrayBuffer(vN));b.setUint32(0,y.byteLength,!0),b.setUint32(4,awe,!0);const w=d2(lwe(JSON.stringify(a)),32),x=new DataView(new ArrayBuffer(vN));x.setUint32(0,w.byteLength,!0),x.setUint32(4,owe,!0);const S=new ArrayBuffer(yN),_=new DataView(S);_.setUint32(0,rwe,!0),_.setUint32(4,swe,!0);const O=yN+x.byteLength+w.byteLength+b.byteLength+y.byteLength;_.setUint32(8,O,!0),new Blob([S,x,w,b,y],{type:"application/octet-stream"}).arrayBuffer().then(n)}):a.buffers&&a.buffers.length>0?pN(d).then(g=>{a.buffers[0].uri=g,n(a)}):n(a)}serializeUserData(e,n){if(Object.keys(e.userData).length===0)return;const i=this.options,s=this.extensionsUsed;try{const o=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&o.gltfExtensions){n.extensions===void 0&&(n.extensions={});for(const a in o.gltfExtensions)n.extensions[a]=o.gltfExtensions[a],s[a]=!0;delete o.gltfExtensions}Object.keys(o).length>0&&(n.extras=o)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}getUID(e,n=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(n)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new re;for(let i=0,s=e.count;i<s;i++)if(Math.abs(n.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const n=this.cache;if(n.attributesNormalized.has(e))return n.attributesNormalized.get(e);const i=e.clone(),s=new re;for(let o=0,a=i.count;o<a;o++)s.fromBufferAttribute(i,o),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),i.setXYZ(o,s.x,s.y,s.z);return n.attributesNormalized.set(e,i),i}applyTextureTransform(e,n){let i=!1;const s={};(n.offset.x!==0||n.offset.y!==0)&&(s.offset=n.offset.toArray(),i=!0),n.rotation!==0&&(s.rotation=n.rotation,i=!0),(n.repeat.x!==1||n.repeat.y!==1)&&(s.scale=n.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,n){if(e===n)return e;function i(g){return("colorSpace"in g?g.colorSpace==="srgb":g.encoding===3001)?function(y){return y<.04045?y*.0773993808:Math.pow(y*.9478672986+.0521327014,2.4)}:function(y){return y}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof rd&&(e=h2(e)),n instanceof rd&&(n=h2(n));const s=e?e.image:null,o=n?n.image:null,a=Math.max(s?s.width:0,o?o.width:0),c=Math.max(s?s.height:0,o?o.height:0),h=bN();h.width=a,h.height=c;const d=h.getContext("2d");d.fillStyle="#00ffff",d.fillRect(0,0,a,c);const f=d.getImageData(0,0,a,c);if(s){d.drawImage(s,0,0,a,c);const g=i(e),y=d.getImageData(0,0,a,c).data;for(let b=2;b<y.length;b+=4)f.data[b]=g(y[b]/256)*256}if(o){d.drawImage(o,0,0,a,c);const g=i(n),y=d.getImageData(0,0,a,c).data;for(let b=1;b<y.length;b+=4)f.data[b]=g(y[b]/256)*256}d.putImageData(f,0,0);const p=(e||n).clone();return p.source=new Hn(h).source,"colorSpace"in p?p.colorSpace="":p.encoding=3e3,p.channel=(e||n).channel,e&&n&&e.channel!==n.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),p}processBuffer(e){const n=this.json,i=this.buffers;return n.buffers||(n.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,n,i,s,o){const a=this.json;a.bufferViews||(a.bufferViews=[]);let c;switch(n){case Ii.BYTE:case Ii.UNSIGNED_BYTE:c=1;break;case Ii.SHORT:case Ii.UNSIGNED_SHORT:c=2;break;default:c=4}const h=t7(s*e.itemSize*c),d=new DataView(new ArrayBuffer(h));let f=0;for(let g=i;g<i+s;g++)for(let y=0;y<e.itemSize;y++){let b;e.itemSize>4?b=e.array[g*e.itemSize+y]:(y===0?b=e.getX(g):y===1?b=e.getY(g):y===2?b=e.getZ(g):y===3&&(b=e.getW(g)),e.normalized===!0&&(b=ns.normalize(b,e.array))),n===Ii.FLOAT?d.setFloat32(f,b,!0):n===Ii.INT?d.setInt32(f,b,!0):n===Ii.UNSIGNED_INT?d.setUint32(f,b,!0):n===Ii.SHORT?d.setInt16(f,b,!0):n===Ii.UNSIGNED_SHORT?d.setUint16(f,b,!0):n===Ii.BYTE?d.setInt8(f,b):n===Ii.UNSIGNED_BYTE&&d.setUint8(f,b),f+=c}const p={buffer:this.processBuffer(d.buffer),byteOffset:this.byteOffset,byteLength:h};return o!==void 0&&(p.target=o),o===Ii.ARRAY_BUFFER&&(p.byteStride=e.itemSize*c),this.byteOffset+=h,a.bufferViews.push(p),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const n=this,i=n.json;return i.bufferViews||(i.bufferViews=[]),e.arrayBuffer().then(s=>{const o=d2(s),a={buffer:n.processBuffer(o),byteOffset:n.byteOffset,byteLength:o.byteLength};return n.byteOffset+=o.byteLength,i.bufferViews.push(a)-1})}processAccessor(e,n,i,s){const o=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let c;if(e.array.constructor===Float32Array)c=Ii.FLOAT;else if(e.array.constructor===Int32Array)c=Ii.INT;else if(e.array.constructor===Uint32Array)c=Ii.UNSIGNED_INT;else if(e.array.constructor===Int16Array)c=Ii.SHORT;else if(e.array.constructor===Uint16Array)c=Ii.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)c=Ii.BYTE;else if(e.array.constructor===Uint8Array)c=Ii.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(i===void 0&&(i=0),s===void 0&&(s=e.count),s===0)return null;const h=hwe(e,i,s);let d;n!==void 0&&(d=e===n.index?Ii.ELEMENT_ARRAY_BUFFER:Ii.ARRAY_BUFFER);const f=this.processBufferView(e,c,i,s,d),p={bufferView:f.id,byteOffset:f.byteOffset,componentType:c,count:s,max:h.max,min:h.min,type:a[e.itemSize]};return e.normalized===!0&&(p.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(p)-1}processImage(e,n,i,s="image/png"){if(e!==null){const o=this,a=o.cache,c=o.json,h=o.options,d=o.pending;a.images.has(e)||a.images.set(e,{});const f=a.images.get(e),p=s+":flipY/"+i.toString();if(f[p]!==void 0)return f[p];c.images||(c.images=[]);const g={mimeType:s},y=bN();y.width=Math.min(e.width,h.maxTextureSize),y.height=Math.min(e.height,h.maxTextureSize);const b=y.getContext("2d");if(i===!0&&(b.translate(0,y.height),b.scale(1,-1)),e.data!==void 0){n!==qs&&console.error("GLTFExporter: Only RGBAFormat is supported.",n),(e.width>h.maxTextureSize||e.height>h.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const x=new Uint8ClampedArray(e.height*e.width*4);for(let S=0;S<x.length;S+=4)x[S+0]=e.data[S+0],x[S+1]=e.data[S+1],x[S+2]=e.data[S+2],x[S+3]=e.data[S+3];b.putImageData(new ImageData(x,e.width,e.height),0,0)}else b.drawImage(e,0,0,y.width,y.height);h.binary===!0?d.push(xN(y,s).then(x=>o.processBufferViewImage(x)).then(x=>{g.bufferView=x})):y.toDataURL!==void 0?g.uri=y.toDataURL(s):d.push(xN(y,s).then(pN).then(x=>{g.uri=x}));const w=c.images.push(g)-1;return f[p]=w,w}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const n=this.json;n.samplers||(n.samplers=[]);const i={magFilter:ko[e.magFilter],minFilter:ko[e.minFilter],wrapS:ko[e.wrapS],wrapT:ko[e.wrapT]};return n.samplers.push(i)-1}processTexture(e){const n=this.options,i=this.cache,s=this.json;if(i.textures.has(e))return i.textures.get(e);s.textures||(s.textures=[]),e instanceof rd&&(e=h2(e,n.maxTextureSize));let o=e.userData.mimeType;o==="image/webp"&&(o="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,o)};e.name&&(a.name=e.name),this._invokeAll(function(h){h.writeTexture&&h.writeTexture(e,a)});const c=s.textures.push(a)-1;return i.textures.set(e,c),c}processMaterial(e){const n=this.cache,i=this.json;if(n.materials.has(e))return n.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const s={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const o=e.color.toArray().concat([e.opacity]);if(w0(o,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=o),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=.5,s.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const c=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),h={index:this.processTexture(c),channel:c.channel};this.applyTextureTransform(h,c),s.pbrMetallicRoughness.metallicRoughnessTexture=h}if(e.map){const c={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(c,e.map),s.pbrMetallicRoughness.baseColorTexture=c}if(e.emissive){const c=e.emissive;if(Math.max(c.r,c.g,c.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const h={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(h,e.emissiveMap),s.emissiveTexture=h}}if(e.normalMap){const c={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),s.normalTexture=c}if(e.aoMap){const c={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(c.strength=e.aoMapIntensity),this.applyTextureTransform(c,e.aoMap),s.occlusionTexture=c}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===Hs&&(s.doubleSided=!0),e.name!==""&&(s.name=e.name),this.serializeUserData(e,s),this._invokeAll(function(c){c.writeMaterial&&c.writeMaterial(e,s)});const a=i.materials.push(s)-1;return n.materials.set(e,a),a}processMesh(e){const n=this.cache,i=this.json,s=[e.geometry.uuid];if(Array.isArray(e.material))for(let O=0,T=e.material.length;O<T;O++)s.push(e.material[O].uuid);else s.push(e.material.uuid);const o=s.join(":");if(n.meshes.has(o))return n.meshes.get(o);const a=e.geometry;let c;e.isLineSegments?c=Ii.LINES:e.isLineLoop?c=Ii.LINE_LOOP:e.isLine?c=Ii.LINE_STRIP:e.isPoints?c=Ii.POINTS:c=e.material.wireframe?Ii.LINES:Ii.TRIANGLES;const h={},d={},f=[],p=[],g={...JOe>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},y=a.getAttribute("normal");y!==void 0&&!this.isNormalizedNormalAttribute(y)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(y)));let b=null;for(let O in a.attributes){if(O.slice(0,5)==="morph")continue;const T=a.attributes[O];if(O=g[O]||O.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(O)||(O="_"+O),n.attributes.has(this.getUID(T))){d[O]=n.attributes.get(this.getUID(T));continue}b=null;const E=T.array;O==="JOINTS_0"&&!(E instanceof Uint16Array)&&!(E instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),b=new Di(new Uint16Array(E),T.itemSize,T.normalized));const P=this.processAccessor(b||T,a);P!==null&&(O.startsWith("_")||this.detectMeshQuantization(O,T),d[O]=P,n.attributes.set(this.getUID(T),P))}if(y!==void 0&&a.setAttribute("normal",y),Object.keys(d).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const O=[],T=[],E={};if(e.morphTargetDictionary!==void 0)for(const P in e.morphTargetDictionary)E[e.morphTargetDictionary[P]]=P;for(let P=0;P<e.morphTargetInfluences.length;++P){const I={};let A=!1;for(const D in a.morphAttributes){if(D!=="position"&&D!=="normal"){A||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),A=!0);continue}const M=a.morphAttributes[D][P],$=D.toUpperCase(),L=a.attributes[D];if(n.attributes.has(this.getUID(M,!0))){I[$]=n.attributes.get(this.getUID(M,!0));continue}const N=M.clone();if(!a.morphTargetsRelative)for(let V=0,U=M.count;V<U;V++)for(let F=0;F<M.itemSize;F++)F===0&&N.setX(V,M.getX(V)-L.getX(V)),F===1&&N.setY(V,M.getY(V)-L.getY(V)),F===2&&N.setZ(V,M.getZ(V)-L.getZ(V)),F===3&&N.setW(V,M.getW(V)-L.getW(V));I[$]=this.processAccessor(N,a),n.attributes.set(this.getUID(L,!0),I[$])}p.push(I),O.push(e.morphTargetInfluences[P]),e.morphTargetDictionary!==void 0&&T.push(E[P])}h.weights=O,T.length>0&&(h.extras={},h.extras.targetNames=T)}const w=Array.isArray(e.material);if(w&&a.groups.length===0)return null;const x=w?e.material:[e.material],S=w?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let O=0,T=S.length;O<T;O++){const E={mode:c,attributes:d};if(this.serializeUserData(a,E),p.length>0&&(E.targets=p),a.index!==null){let I=this.getUID(a.index);(S[O].start!==void 0||S[O].count!==void 0)&&(I+=":"+S[O].start+":"+S[O].count),n.attributes.has(I)?E.indices=n.attributes.get(I):(E.indices=this.processAccessor(a.index,a,S[O].start,S[O].count),n.attributes.set(I,E.indices)),E.indices===null&&delete E.indices}const P=this.processMaterial(x[S[O].materialIndex]);P!==null&&(E.material=P),f.push(E)}h.primitives=f,i.meshes||(i.meshes=[]),this._invokeAll(function(O){O.writeMesh&&O.writeMesh(e,h)});const _=i.meshes.push(h)-1;return n.meshes.set(o,_),_}detectMeshQuantization(e,n){if(this.extensionsUsed[u2])return;let i;switch(n.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}n.normalized&&(i+=" normalized");const s=e.split("_",1)[0];mN[s]&&mN[s].includes(i)&&(this.extensionsUsed[u2]=!0,this.extensionsRequired[u2]=!0)}processCamera(e){const n=this.json;n.cameras||(n.cameras=[]);const i=e.isOrthographicCamera,s={type:i?"orthographic":"perspective"};return i?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:ns.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),n.cameras.push(s)-1}processAnimation(e,n){const i=this.json,s=this.nodeMap;i.animations||(i.animations=[]),e=e7.Utils.mergeMorphTargetTracks(e.clone(),n);const o=e.tracks,a=[],c=[];for(let h=0;h<o.length;++h){const d=o[h],f=vi.parseTrackName(d.name);let p=vi.findNode(n,f.nodeName);const g=gN[f.propertyName];if(f.objectName==="bones"&&(p.isSkinnedMesh===!0?p=p.skeleton.getBoneByName(f.objectIndex):p=void 0),!p||!g)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',d.name),null;const y=1;let b=d.values.length/d.times.length;g===gN.morphTargetInfluences&&(b/=p.morphTargetInfluences.length);let w;d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(w="CUBICSPLINE",b/=3):d.getInterpolation()===Sp?w="STEP":w="LINEAR",c.push({input:this.processAccessor(new Di(d.times,y)),output:this.processAccessor(new Di(d.values,b)),interpolation:w}),a.push({sampler:c.length-1,target:{node:s.get(p),path:g}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:c,channels:a}),i.animations.length-1}processSkin(e){const n=this.json,i=this.nodeMap,s=n.nodes[i.get(e)],o=e.skeleton;if(o===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const c=[],h=new Float32Array(o.bones.length*16),d=new gt;for(let f=0;f<o.bones.length;++f)c.push(i.get(o.bones[f])),d.copy(o.boneInverses[f]),d.multiply(e.bindMatrix).toArray(h,f*16);return n.skins===void 0&&(n.skins=[]),n.skins.push({inverseBindMatrices:this.processAccessor(new Di(h,16)),joints:c,skeleton:i.get(a)}),s.skin=n.skins.length-1}processNode(e){const n=this.json,i=this.options,s=this.nodeMap;n.nodes||(n.nodes=[]);const o={};if(i.trs){const c=e.quaternion.toArray(),h=e.position.toArray(),d=e.scale.toArray();w0(c,[0,0,0,1])||(o.rotation=c),w0(h,[0,0,0])||(o.translation=h),w0(d,[1,1,1])||(o.scale=d)}else e.matrixAutoUpdate&&e.updateMatrix(),cwe(e.matrix)===!1&&(o.matrix=e.matrix.elements);if(e.name!==""&&(o.name=String(e.name)),this.serializeUserData(e,o),e.isMesh||e.isLine||e.isPoints){const c=this.processMesh(e);c!==null&&(o.mesh=c)}else e.isCamera&&(o.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const c=[];for(let h=0,d=e.children.length;h<d;h++){const f=e.children[h];if(f.visible||i.onlyVisible===!1){const p=this.processNode(f);p!==null&&c.push(p)}}c.length>0&&(o.children=c)}this._invokeAll(function(c){c.writeNode&&c.writeNode(e,o)});const a=n.nodes.push(o)-1;return s.set(e,a),a}processScene(e){const n=this.json,i=this.options;n.scenes||(n.scenes=[],n.scene=0);const s={};e.name!==""&&(s.name=e.name),n.scenes.push(s);const o=[];for(let a=0,c=e.children.length;a<c;a++){const h=e.children[a];if(h.visible||i.onlyVisible===!1){const d=this.processNode(h);d!==null&&o.push(d)}}o.length>0&&(s.nodes=o),this.serializeUserData(e,s)}processObjects(e){const n=new Mp;n.name="AuxScene";for(let i=0;i<e.length;i++)n.children.push(e[i]);this.processScene(n)}processInput(e){const n=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(s){s.beforeParse&&s.beforeParse(e)});const i=[];for(let s=0;s<e.length;s++)e[s]instanceof Mp?this.processScene(e[s]):i.push(e[s]);i.length>0&&this.processObjects(i);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<n.animations.length;++s)this.processAnimation(n.animations[s],e[0]);this._invokeAll(function(s){s.afterParse&&s.afterParse(e)})}_invokeAll(e){for(let n=0,i=this.plugins.length;n<i;n++)e(this.plugins[n])}}class dwe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,n){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const i=this.writer,s=i.json,o=i.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),o[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},o[this.name]=!0);const c=s.extensions[this.name].lights;c.push(a),n.extensions=n.extensions||{},n.extensions[this.name]={light:c.length-1}}}let fwe=class{constructor(r){this.writer=r,this.name="KHR_materials_unlit"}writeMaterial(r,e){if(!r.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}},pwe=class{constructor(r){this.writer=r,this.name="KHR_materials_clearcoat"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.clearcoat===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.clearcoatFactor=r.clearcoat,r.clearcoatMap){const o={index:n.processTexture(r.clearcoatMap),texCoord:r.clearcoatMap.channel};n.applyTextureTransform(o,r.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=r.clearcoatRoughness,r.clearcoatRoughnessMap){const o={index:n.processTexture(r.clearcoatRoughnessMap),texCoord:r.clearcoatRoughnessMap.channel};n.applyTextureTransform(o,r.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(r.clearcoatNormalMap){const o={index:n.processTexture(r.clearcoatNormalMap),texCoord:r.clearcoatNormalMap.channel};n.applyTextureTransform(o,r.clearcoatNormalMap),s.clearcoatNormalTexture=o}e.extensions=e.extensions||{},e.extensions[this.name]=s,i[this.name]=!0}},mwe=class{constructor(r){this.writer=r,this.name="KHR_materials_iridescence"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.iridescence===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.iridescenceFactor=r.iridescence,r.iridescenceMap){const o={index:n.processTexture(r.iridescenceMap),texCoord:r.iridescenceMap.channel};n.applyTextureTransform(o,r.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=r.iridescenceIOR,s.iridescenceThicknessMinimum=r.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=r.iridescenceThicknessRange[1],r.iridescenceThicknessMap){const o={index:n.processTexture(r.iridescenceThicknessMap),texCoord:r.iridescenceThicknessMap.channel};n.applyTextureTransform(o,r.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}e.extensions=e.extensions||{},e.extensions[this.name]=s,i[this.name]=!0}},gwe=class{constructor(r){this.writer=r,this.name="KHR_materials_transmission"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.transmissionFactor=r.transmission,r.transmissionMap){const o={index:n.processTexture(r.transmissionMap),texCoord:r.transmissionMap.channel};n.applyTextureTransform(o,r.transmissionMap),s.transmissionTexture=o}e.extensions=e.extensions||{},e.extensions[this.name]=s,i[this.name]=!0}},ywe=class{constructor(r){this.writer=r,this.name="KHR_materials_volume"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.thicknessFactor=r.thickness,r.thicknessMap){const o={index:n.processTexture(r.thicknessMap),texCoord:r.thicknessMap.channel};n.applyTextureTransform(o,r.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=r.attenuationDistance,s.attenuationColor=r.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,i[this.name]=!0}},vwe=class{constructor(r){this.writer=r,this.name="KHR_materials_ior"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.ior===1.5)return;const n=this.writer.extensionsUsed,i={};i.ior=r.ior,e.extensions=e.extensions||{},e.extensions[this.name]=i,n[this.name]=!0}},bwe=class{constructor(r){this.writer=r,this.name="KHR_materials_specular"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.specularIntensity===1&&r.specularColor.equals(nwe)&&!r.specularIntensityMap&&!r.specularColorTexture)return;const n=this.writer,i=n.extensionsUsed,s={};if(r.specularIntensityMap){const o={index:n.processTexture(r.specularIntensityMap),texCoord:r.specularIntensityMap.channel};n.applyTextureTransform(o,r.specularIntensityMap),s.specularTexture=o}if(r.specularColorMap){const o={index:n.processTexture(r.specularColorMap),texCoord:r.specularColorMap.channel};n.applyTextureTransform(o,r.specularColorMap),s.specularColorTexture=o}s.specularFactor=r.specularIntensity,s.specularColorFactor=r.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,i[this.name]=!0}},xwe=class{constructor(r){this.writer=r,this.name="KHR_materials_sheen"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.sheen==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(r.sheenRoughnessMap){const o={index:n.processTexture(r.sheenRoughnessMap),texCoord:r.sheenRoughnessMap.channel};n.applyTextureTransform(o,r.sheenRoughnessMap),s.sheenRoughnessTexture=o}if(r.sheenColorMap){const o={index:n.processTexture(r.sheenColorMap),texCoord:r.sheenColorMap.channel};n.applyTextureTransform(o,r.sheenColorMap),s.sheenColorTexture=o}s.sheenRoughnessFactor=r.sheenRoughness,s.sheenColorFactor=r.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,i[this.name]=!0}},Owe=class{constructor(r){this.writer=r,this.name="KHR_materials_anisotropy"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.anisotropy==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(r.anisotropyMap){const o={index:n.processTexture(r.anisotropyMap)};n.applyTextureTransform(o,r.anisotropyMap),s.anisotropyTexture=o}s.anisotropyStrength=r.anisotropy,s.anisotropyRotation=r.anisotropyRotation,e.extensions=e.extensions||{},e.extensions[this.name]=s,i[this.name]=!0}},wwe=class{constructor(r){this.writer=r,this.name="KHR_materials_emissive_strength"}writeMaterial(r,e){if(!r.isMeshStandardMaterial||r.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,i={};i.emissiveStrength=r.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=i,n[this.name]=!0}};var Qo=Uint8Array,od=Uint16Array,rM=Uint32Array,i7=new Qo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n7=new Qo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_we=new Qo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r7=function(r,e){for(var n=new od(31),i=0;i<31;++i)n[i]=e+=1<<r[i-1];for(var s=new rM(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)s[o]=o-n[i]<<5|i;return[n,s]},s7=r7(i7,2),o7=s7[0],Swe=s7[1];o7[28]=258,Swe[258]=28;var Cwe=r7(n7,0),kwe=Cwe[0],a7=new od(32768);for(var _n=0;_n<32768;++_n){var Kc=(_n&43690)>>>1|(_n&21845)<<1;Kc=(Kc&52428)>>>2|(Kc&13107)<<2,Kc=(Kc&61680)>>>4|(Kc&3855)<<4,a7[_n]=((Kc&65280)>>>8|(Kc&255)<<8)>>>1}var W0=function(r,e,n){for(var i=r.length,s=0,o=new od(e);s<i;++s)++o[r[s]-1];var a=new od(e);for(s=0;s<e;++s)a[s]=a[s-1]+o[s-1]<<1;var c;{c=new od(1<<e);var h=15-e;for(s=0;s<i;++s)if(r[s])for(var d=s<<4|r[s],f=e-r[s],p=a[r[s]-1]++<<f,g=p|(1<<f)-1;p<=g;++p)c[a7[p]>>>h]=d}return c},_v=new Qo(288);for(var _n=0;_n<144;++_n)_v[_n]=8;for(var _n=144;_n<256;++_n)_v[_n]=9;for(var _n=256;_n<280;++_n)_v[_n]=7;for(var _n=280;_n<288;++_n)_v[_n]=8;var l7=new Qo(32);for(var _n=0;_n<32;++_n)l7[_n]=5;var Twe=W0(_v,9),Mwe=W0(l7,5),f2=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},xa=function(r,e,n){var i=e/8|0;return(r[i]|r[i+1]<<8)>>(e&7)&n},p2=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Ewe=function(r){return(r/8|0)+(r&7&&1)},Pwe=function(r,e,n){(n==null||n>r.length)&&(n=r.length);var i=new(r instanceof od?od:r instanceof rM?rM:Qo)(n-e);return i.set(r.subarray(e,n)),i},Awe=function(r,e,n){var i=r.length;if(!i||n&&!n.l&&i<5)return e||new Qo(0);var s=!e||n,o=!n||n.i;n||(n={}),e||(e=new Qo(i*3));var a=function(ke){var J=e.length;if(ke>J){var q=new Qo(Math.max(J*2,ke));q.set(e),e=q}},c=n.f||0,h=n.p||0,d=n.b||0,f=n.l,p=n.d,g=n.m,y=n.n,b=i*8;do{if(!f){n.f=c=xa(r,h,1);var w=xa(r,h+1,3);if(h+=3,w)if(w==1)f=Twe,p=Mwe,g=9,y=5;else if(w==2){var x=xa(r,h,31)+257,S=xa(r,h+10,15)+4,_=x+xa(r,h+5,31)+1;h+=14;for(var O=new Qo(_),T=new Qo(19),E=0;E<S;++E)T[_we[E]]=xa(r,h+E*3,7);h+=S*3;for(var P=f2(T),I=(1<<P)-1,A=W0(T,P),E=0;E<_;){var D=A[xa(r,h,I)];h+=D&15;var M=D>>>4;if(M<16)O[E++]=M;else{var $=0,L=0;for(M==16?(L=3+xa(r,h,3),h+=2,$=O[E-1]):M==17?(L=3+xa(r,h,7),h+=3):M==18&&(L=11+xa(r,h,127),h+=7);L--;)O[E++]=$}}var N=O.subarray(0,x),V=O.subarray(x);g=f2(N),y=f2(V),f=W0(N,g),p=W0(V,y)}else throw"invalid block type";else{var M=Ewe(h)+4,U=r[M-4]|r[M-3]<<8,F=M+U;if(F>i){if(o)throw"unexpected EOF";break}s&&a(d+U),e.set(r.subarray(M,F),d),n.b=d+=U,n.p=h=F*8;continue}if(h>b){if(o)throw"unexpected EOF";break}}s&&a(d+131072);for(var H=(1<<g)-1,K=(1<<y)-1,ie=h;;ie=h){var $=f[p2(r,h)&H],he=$>>>4;if(h+=$&15,h>b){if(o)throw"unexpected EOF";break}if(!$)throw"invalid length/literal";if(he<256)e[d++]=he;else if(he==256){ie=h,f=null;break}else{var me=he-254;if(he>264){var E=he-257,Pe=i7[E];me=xa(r,h,(1<<Pe)-1)+o7[E],h+=Pe}var _e=p[p2(r,h)&K],ue=_e>>>4;if(!_e)throw"invalid distance";h+=_e&15;var V=kwe[ue];if(ue>3){var Pe=n7[ue];V+=p2(r,h)&(1<<Pe)-1,h+=Pe}if(h>b){if(o)throw"unexpected EOF";break}s&&a(d+131072);for(var Se=d+me;d<Se;d+=4)e[d]=e[d-V],e[d+1]=e[d+1-V],e[d+2]=e[d+2-V],e[d+3]=e[d+3-V];d=Se}}n.l=f,n.p=ie,n.b=d,f&&(c=1,n.m=g,n.d=p,n.n=y)}while(!c);return d==e.length?e:Pwe(e,0,d)},Rwe=new Qo(0),Iwe=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Dwe(r,e){return Awe((Iwe(r),r.subarray(2,-4)),e)}var Nwe=typeof TextDecoder<"u"&&new TextDecoder,$we=0;try{Nwe.decode(Rwe,{stream:!0}),$we=1}catch{}new Gs;new re;new br(0,0,0,"YXZ");new re;var Vwe=Object.defineProperty,Lwe=(r,e,n)=>e in r?Vwe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,ni=(r,e,n)=>(Lwe(r,typeof e!="symbol"?e+"":e,n),n);const Vb=new Td,ON=new wa,Bwe=Math.cos(70*(Math.PI/180)),wN=(r,e)=>(r%e+e)%e;class Uwe extends pl{constructor(e,n){super(),ni(this,"object"),ni(this,"domElement"),ni(this,"enabled",!0),ni(this,"target",new re),ni(this,"minDistance",0),ni(this,"maxDistance",1/0),ni(this,"minZoom",0),ni(this,"maxZoom",1/0),ni(this,"minPolarAngle",0),ni(this,"maxPolarAngle",Math.PI),ni(this,"minAzimuthAngle",-1/0),ni(this,"maxAzimuthAngle",1/0),ni(this,"enableDamping",!1),ni(this,"dampingFactor",.05),ni(this,"enableZoom",!0),ni(this,"zoomSpeed",1),ni(this,"enableRotate",!0),ni(this,"rotateSpeed",1),ni(this,"enablePan",!0),ni(this,"panSpeed",1),ni(this,"screenSpacePanning",!0),ni(this,"keyPanSpeed",7),ni(this,"zoomToCursor",!1),ni(this,"autoRotate",!1),ni(this,"autoRotateSpeed",2),ni(this,"reverseOrbit",!1),ni(this,"reverseHorizontalOrbit",!1),ni(this,"reverseVerticalOrbit",!1),ni(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ni(this,"mouseButtons",{LEFT:Pu.ROTATE,MIDDLE:Pu.DOLLY,RIGHT:Pu.PAN}),ni(this,"touches",{ONE:zl.ROTATE,TWO:zl.DOLLY_PAN}),ni(this,"target0"),ni(this,"position0"),ni(this,"zoom0"),ni(this,"_domElementKeyEvents",null),ni(this,"getPolarAngle"),ni(this,"getAzimuthalAngle"),ni(this,"setPolarAngle"),ni(this,"setAzimuthalAngle"),ni(this,"getDistance"),ni(this,"listenToKeyEvents"),ni(this,"stopListenToKeyEvents"),ni(this,"saveState"),ni(this,"reset"),ni(this,"update"),ni(this,"connect"),ni(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=Ce=>{let Be=wN(Ce,2*Math.PI),ge=f.phi;ge<0&&(ge+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let Ue=Math.abs(Be-ge);2*Math.PI-Ue<Ue&&(Be<ge?Be+=2*Math.PI:ge+=2*Math.PI),p.phi=Be-ge,i.update()},this.setAzimuthalAngle=Ce=>{let Be=wN(Ce,2*Math.PI),ge=f.theta;ge<0&&(ge+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let Ue=Math.abs(Be-ge);2*Math.PI-Ue<Ue&&(Be<ge?Be+=2*Math.PI:ge+=2*Math.PI),p.theta=Be-ge,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Ce=>{Ce.addEventListener("keydown",ot),this._domElementKeyEvents=Ce},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ot),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(s),i.update(),h=c.NONE},this.update=(()=>{const Ce=new re,Be=new re(0,1,0),ge=new ar().setFromUnitVectors(e.up,Be),Ue=ge.clone().invert(),We=new re,nt=new ar,pt=2*Math.PI;return function(){const Ci=i.object.position;ge.setFromUnitVectors(e.up,Be),Ue.copy(ge).invert(),Ce.copy(Ci).sub(i.target),Ce.applyQuaternion(ge),f.setFromVector3(Ce),i.autoRotate&&h===c.NONE&&V(L()),i.enableDamping?(f.theta+=p.theta*i.dampingFactor,f.phi+=p.phi*i.dampingFactor):(f.theta+=p.theta,f.phi+=p.phi);let ki=i.minAzimuthAngle,Li=i.maxAzimuthAngle;isFinite(ki)&&isFinite(Li)&&(ki<-Math.PI?ki+=pt:ki>Math.PI&&(ki-=pt),Li<-Math.PI?Li+=pt:Li>Math.PI&&(Li-=pt),ki<=Li?f.theta=Math.max(ki,Math.min(Li,f.theta)):f.theta=f.theta>(ki+Li)/2?Math.max(ki,f.theta):Math.min(Li,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(y,i.dampingFactor):i.target.add(y),i.zoomToCursor&&D||i.object.isOrthographicCamera?f.radius=Pe(f.radius):f.radius=Pe(f.radius*g),Ce.setFromSpherical(f),Ce.applyQuaternion(Ue),Ci.copy(i.target).add(Ce),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,y.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),y.set(0,0,0));let kn=!1;if(i.zoomToCursor&&D){let xi=null;if(i.object instanceof rn&&i.object.isPerspectiveCamera){const kr=Ce.length();xi=Pe(kr*g);const Rn=kr-xi;i.object.position.addScaledVector(I,Rn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const kr=new re(A.x,A.y,0);kr.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix(),kn=!0;const Rn=new re(A.x,A.y,0);Rn.unproject(i.object),i.object.position.sub(Rn).add(kr),i.object.updateMatrixWorld(),xi=Ce.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;xi!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(xi).add(i.object.position):(Vb.origin.copy(i.object.position),Vb.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Vb.direction))<Bwe?e.lookAt(i.target):(ON.setFromNormalAndCoplanarPoint(i.object.up,i.target),Vb.intersectPlane(ON,i.target))))}else i.object instanceof Yo&&i.object.isOrthographicCamera&&(kn=g!==1,kn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix()));return g=1,D=!1,kn||We.distanceToSquared(i.object.position)>d||8*(1-nt.dot(i.object.quaternion))>d?(i.dispatchEvent(s),We.copy(i.object.position),nt.copy(i.object.quaternion),kn=!1,!0):!1}})(),this.connect=Ce=>{Ce===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=Ce,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Mt),i.domElement.addEventListener("pointerdown",de),i.domElement.addEventListener("pointercancel",Me),i.domElement.addEventListener("wheel",ze,{passive:!0})},this.dispose=()=>{var Ce,Be,ge,Ue,We,nt;i.domElement&&(i.domElement.style.touchAction="auto"),(Ce=i.domElement)==null||Ce.removeEventListener("contextmenu",Mt),(Be=i.domElement)==null||Be.removeEventListener("pointerdown",de),(ge=i.domElement)==null||ge.removeEventListener("pointercancel",Me),(Ue=i.domElement)==null||Ue.removeEventListener("wheel",ze),(We=i.domElement)==null||We.ownerDocument.removeEventListener("pointermove",fe),(nt=i.domElement)==null||nt.ownerDocument.removeEventListener("pointerup",we),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ot)};const i=this,s={type:"change"},o={type:"start"},a={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=c.NONE;const d=1e-6,f=new GT,p=new GT;let g=1;const y=new re,b=new Xe,w=new Xe,x=new Xe,S=new Xe,_=new Xe,O=new Xe,T=new Xe,E=new Xe,P=new Xe,I=new re,A=new Xe;let D=!1;const M=[],$={};function L(){return 2*Math.PI/60/60*i.autoRotateSpeed}function N(){return Math.pow(.95,i.zoomSpeed)}function V(Ce){i.reverseOrbit||i.reverseHorizontalOrbit?p.theta+=Ce:p.theta-=Ce}function U(Ce){i.reverseOrbit||i.reverseVerticalOrbit?p.phi+=Ce:p.phi-=Ce}const F=(()=>{const Ce=new re;return function(Be,ge){Ce.setFromMatrixColumn(ge,0),Ce.multiplyScalar(-Be),y.add(Ce)}})(),H=(()=>{const Ce=new re;return function(Be,ge){i.screenSpacePanning===!0?Ce.setFromMatrixColumn(ge,1):(Ce.setFromMatrixColumn(ge,0),Ce.crossVectors(i.object.up,Ce)),Ce.multiplyScalar(Be),y.add(Ce)}})(),K=(()=>{const Ce=new re;return function(Be,ge){const Ue=i.domElement;if(Ue&&i.object instanceof rn&&i.object.isPerspectiveCamera){const We=i.object.position;Ce.copy(We).sub(i.target);let nt=Ce.length();nt*=Math.tan(i.object.fov/2*Math.PI/180),F(2*Be*nt/Ue.clientHeight,i.object.matrix),H(2*ge*nt/Ue.clientHeight,i.object.matrix)}else Ue&&i.object instanceof Yo&&i.object.isOrthographicCamera?(F(Be*(i.object.right-i.object.left)/i.object.zoom/Ue.clientWidth,i.object.matrix),H(ge*(i.object.top-i.object.bottom)/i.object.zoom/Ue.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function ie(Ce){i.object instanceof rn&&i.object.isPerspectiveCamera||i.object instanceof Yo&&i.object.isOrthographicCamera?g/=Ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function he(Ce){i.object instanceof rn&&i.object.isPerspectiveCamera||i.object instanceof Yo&&i.object.isOrthographicCamera?g*=Ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function me(Ce){if(!i.zoomToCursor||!i.domElement)return;D=!0;const Be=i.domElement.getBoundingClientRect(),ge=Ce.clientX-Be.left,Ue=Ce.clientY-Be.top,We=Be.width,nt=Be.height;A.x=ge/We*2-1,A.y=-(Ue/nt)*2+1,I.set(A.x,A.y,1).unproject(i.object).sub(i.object.position).normalize()}function Pe(Ce){return Math.max(i.minDistance,Math.min(i.maxDistance,Ce))}function _e(Ce){b.set(Ce.clientX,Ce.clientY)}function ue(Ce){me(Ce),T.set(Ce.clientX,Ce.clientY)}function Se(Ce){S.set(Ce.clientX,Ce.clientY)}function ke(Ce){w.set(Ce.clientX,Ce.clientY),x.subVectors(w,b).multiplyScalar(i.rotateSpeed);const Be=i.domElement;Be&&(V(2*Math.PI*x.x/Be.clientHeight),U(2*Math.PI*x.y/Be.clientHeight)),b.copy(w),i.update()}function J(Ce){E.set(Ce.clientX,Ce.clientY),P.subVectors(E,T),P.y>0?ie(N()):P.y<0&&he(N()),T.copy(E),i.update()}function q(Ce){_.set(Ce.clientX,Ce.clientY),O.subVectors(_,S).multiplyScalar(i.panSpeed),K(O.x,O.y),S.copy(_),i.update()}function z(Ce){me(Ce),Ce.deltaY<0?he(N()):Ce.deltaY>0&&ie(N()),i.update()}function X(Ce){let Be=!1;switch(Ce.code){case i.keys.UP:K(0,i.keyPanSpeed),Be=!0;break;case i.keys.BOTTOM:K(0,-i.keyPanSpeed),Be=!0;break;case i.keys.LEFT:K(i.keyPanSpeed,0),Be=!0;break;case i.keys.RIGHT:K(-i.keyPanSpeed,0),Be=!0;break}Be&&(Ce.preventDefault(),i.update())}function te(){if(M.length==1)b.set(M[0].pageX,M[0].pageY);else{const Ce=.5*(M[0].pageX+M[1].pageX),Be=.5*(M[0].pageY+M[1].pageY);b.set(Ce,Be)}}function se(){if(M.length==1)S.set(M[0].pageX,M[0].pageY);else{const Ce=.5*(M[0].pageX+M[1].pageX),Be=.5*(M[0].pageY+M[1].pageY);S.set(Ce,Be)}}function Q(){const Ce=M[0].pageX-M[1].pageX,Be=M[0].pageY-M[1].pageY,ge=Math.sqrt(Ce*Ce+Be*Be);T.set(0,ge)}function Z(){i.enableZoom&&Q(),i.enablePan&&se()}function le(){i.enableZoom&&Q(),i.enableRotate&&te()}function pe(Ce){if(M.length==1)w.set(Ce.pageX,Ce.pageY);else{const ge=hi(Ce),Ue=.5*(Ce.pageX+ge.x),We=.5*(Ce.pageY+ge.y);w.set(Ue,We)}x.subVectors(w,b).multiplyScalar(i.rotateSpeed);const Be=i.domElement;Be&&(V(2*Math.PI*x.x/Be.clientHeight),U(2*Math.PI*x.y/Be.clientHeight)),b.copy(w)}function be(Ce){if(M.length==1)_.set(Ce.pageX,Ce.pageY);else{const Be=hi(Ce),ge=.5*(Ce.pageX+Be.x),Ue=.5*(Ce.pageY+Be.y);_.set(ge,Ue)}O.subVectors(_,S).multiplyScalar(i.panSpeed),K(O.x,O.y),S.copy(_)}function Ee(Ce){const Be=hi(Ce),ge=Ce.pageX-Be.x,Ue=Ce.pageY-Be.y,We=Math.sqrt(ge*ge+Ue*Ue);E.set(0,We),P.set(0,Math.pow(E.y/T.y,i.zoomSpeed)),ie(P.y),T.copy(E)}function ee(Ce){i.enableZoom&&Ee(Ce),i.enablePan&&be(Ce)}function Y(Ce){i.enableZoom&&Ee(Ce),i.enableRotate&&pe(Ce)}function de(Ce){var Be,ge;i.enabled!==!1&&(M.length===0&&((Be=i.domElement)==null||Be.ownerDocument.addEventListener("pointermove",fe),(ge=i.domElement)==null||ge.ownerDocument.addEventListener("pointerup",we)),Et(Ce),Ce.pointerType==="touch"?Ye(Ce):Qe(Ce))}function fe(Ce){i.enabled!==!1&&(Ce.pointerType==="touch"?st(Ce):Le(Ce))}function we(Ce){var Be,ge,Ue;ft(Ce),M.length===0&&((Be=i.domElement)==null||Be.releasePointerCapture(Ce.pointerId),(ge=i.domElement)==null||ge.ownerDocument.removeEventListener("pointermove",fe),(Ue=i.domElement)==null||Ue.ownerDocument.removeEventListener("pointerup",we)),i.dispatchEvent(a),h=c.NONE}function Me(Ce){ft(Ce)}function Qe(Ce){let Be;switch(Ce.button){case 0:Be=i.mouseButtons.LEFT;break;case 1:Be=i.mouseButtons.MIDDLE;break;case 2:Be=i.mouseButtons.RIGHT;break;default:Be=-1}switch(Be){case Pu.DOLLY:if(i.enableZoom===!1)return;ue(Ce),h=c.DOLLY;break;case Pu.ROTATE:if(Ce.ctrlKey||Ce.metaKey||Ce.shiftKey){if(i.enablePan===!1)return;Se(Ce),h=c.PAN}else{if(i.enableRotate===!1)return;_e(Ce),h=c.ROTATE}break;case Pu.PAN:if(Ce.ctrlKey||Ce.metaKey||Ce.shiftKey){if(i.enableRotate===!1)return;_e(Ce),h=c.ROTATE}else{if(i.enablePan===!1)return;Se(Ce),h=c.PAN}break;default:h=c.NONE}h!==c.NONE&&i.dispatchEvent(o)}function Le(Ce){if(i.enabled!==!1)switch(h){case c.ROTATE:if(i.enableRotate===!1)return;ke(Ce);break;case c.DOLLY:if(i.enableZoom===!1)return;J(Ce);break;case c.PAN:if(i.enablePan===!1)return;q(Ce);break}}function ze(Ce){i.enabled===!1||i.enableZoom===!1||h!==c.NONE&&h!==c.ROTATE||(i.dispatchEvent(o),z(Ce),i.dispatchEvent(a))}function ot(Ce){i.enabled===!1||i.enablePan===!1||X(Ce)}function Ye(Ce){switch(Wt(Ce),M.length){case 1:switch(i.touches.ONE){case zl.ROTATE:if(i.enableRotate===!1)return;te(),h=c.TOUCH_ROTATE;break;case zl.PAN:if(i.enablePan===!1)return;se(),h=c.TOUCH_PAN;break;default:h=c.NONE}break;case 2:switch(i.touches.TWO){case zl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Z(),h=c.TOUCH_DOLLY_PAN;break;case zl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;le(),h=c.TOUCH_DOLLY_ROTATE;break;default:h=c.NONE}break;default:h=c.NONE}h!==c.NONE&&i.dispatchEvent(o)}function st(Ce){switch(Wt(Ce),h){case c.TOUCH_ROTATE:if(i.enableRotate===!1)return;pe(Ce),i.update();break;case c.TOUCH_PAN:if(i.enablePan===!1)return;be(Ce),i.update();break;case c.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ee(Ce),i.update();break;case c.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Y(Ce),i.update();break;default:h=c.NONE}}function Mt(Ce){i.enabled!==!1&&Ce.preventDefault()}function Et(Ce){M.push(Ce)}function ft(Ce){delete $[Ce.pointerId];for(let Be=0;Be<M.length;Be++)if(M[Be].pointerId==Ce.pointerId){M.splice(Be,1);return}}function Wt(Ce){let Be=$[Ce.pointerId];Be===void 0&&(Be=new Xe,$[Ce.pointerId]=Be),Be.set(Ce.pageX,Ce.pageY)}function hi(Ce){const Be=Ce.pointerId===M[0].pointerId?M[1]:M[0];return $[Be.pointerId]}n!==void 0&&this.connect(n),this.update()}}new gt;new re;function c7(r,e,n){const i=n.length-r-1;if(e>=n[i])return i-1;if(e<=n[r])return r;let s=r,o=i,a=Math.floor((s+o)/2);for(;e<n[a]||e>=n[a+1];)e<n[a]?o=a:s=a,a=Math.floor((s+o)/2);return a}function Fwe(r,e,n,i){const s=[],o=[],a=[];s[0]=1;for(let c=1;c<=n;++c){o[c]=e-i[r+1-c],a[c]=i[r+c]-e;let h=0;for(let d=0;d<c;++d){const f=a[d+1],p=o[c-d],g=s[d]/(f+p);s[d]=h+f*g,h=p*g}s[c]=h}return s}function zwe(r,e,n,i){const s=c7(r,i,e),o=Fwe(s,i,r,e),a=new Oi(0,0,0,0);for(let c=0;c<=r;++c){const h=n[s-r+c],d=o[c],f=h.w*d;a.x+=h.x*f,a.y+=h.y*f,a.z+=h.z*f,a.w+=h.w*d}return a}function Xwe(r,e,n,i,s){const o=[];for(let p=0;p<=n;++p)o[p]=0;const a=[];for(let p=0;p<=i;++p)a[p]=o.slice(0);const c=[];for(let p=0;p<=n;++p)c[p]=o.slice(0);c[0][0]=1;const h=o.slice(0),d=o.slice(0);for(let p=1;p<=n;++p){h[p]=e-s[r+1-p],d[p]=s[r+p]-e;let g=0;for(let y=0;y<p;++y){const b=d[y+1],w=h[p-y];c[p][y]=b+w;const x=c[y][p-1]/c[p][y];c[y][p]=g+b*x,g=w*x}c[p][p]=g}for(let p=0;p<=n;++p)a[0][p]=c[p][n];for(let p=0;p<=n;++p){let g=0,y=1;const b=[];for(let w=0;w<=n;++w)b[w]=o.slice(0);b[0][0]=1;for(let w=1;w<=i;++w){let x=0;const S=p-w,_=n-w;p>=w&&(b[y][0]=b[g][0]/c[_+1][S],x=b[y][0]*c[S][_]);const O=S>=-1?1:-S,T=p-1<=_?w-1:n-p;for(let P=O;P<=T;++P)b[y][P]=(b[g][P]-b[g][P-1])/c[_+1][S+P],x+=b[y][P]*c[S+P][_];p<=_&&(b[y][w]=-b[g][w-1]/c[_+1][p],x+=b[y][w]*c[p][_]),a[w][p]=x;const E=g;g=y,y=E}}let f=n;for(let p=1;p<=i;++p){for(let g=0;g<=n;++g)a[p][g]*=f;f*=n-p}return a}function Wwe(r,e,n,i,s){const o=s<r?s:r,a=[],c=c7(r,i,e),h=Xwe(c,i,r,o,e),d=[];for(let f=0;f<n.length;++f){const p=n[f].clone(),g=p.w;p.x*=g,p.y*=g,p.z*=g,d[f]=p}for(let f=0;f<=o;++f){const p=d[c-r].clone().multiplyScalar(h[f][0]);for(let g=1;g<=r;++g)p.add(d[c-r+g].clone().multiplyScalar(h[f][g]));a[f]=p}for(let f=o+1;f<=s+1;++f)a[f]=new Oi(0,0,0);return a}function Qwe(r,e){let n=1;for(let s=2;s<=r;++s)n*=s;let i=1;for(let s=2;s<=e;++s)i*=s;for(let s=2;s<=r-e;++s)i*=s;return n/i}function Hwe(r){const e=r.length,n=[],i=[];for(let o=0;o<e;++o){const a=r[o];n[o]=new re(a.x,a.y,a.z),i[o]=a.w}const s=[];for(let o=0;o<e;++o){const a=n[o].clone();for(let c=1;c<=o;++c)a.sub(s[o-c].clone().multiplyScalar(Qwe(o,c)*i[c]));s[o]=a.divideScalar(i[0])}return s}function Gwe(r,e,n,i,s){const o=Wwe(r,e,n,i,s);return Hwe(o)}class _N extends ra{constructor(e,n,i,s,o){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=o||this.knots.length-1;for(let a=0;a<i.length;++a){const c=i[a];this.controlPoints[a]=new Oi(c.x,c.y,c.z,c.w)}}getPoint(e,n){const i=n||new re,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=zwe(this.degree,this.knots,this.controlPoints,s);return o.w!=1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(e,n){const i=n||new re,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=Gwe(this.degree,this.knots,this.controlPoints,s,1);return i.copy(o[1]).normalize(),i}}let Ti,jn,Fs;class Ywe extends As{constructor(e){super(e)}load(e,n,i,s){const o=this,a=o.path===""?Ip.extractUrlBase(e):o.path,c=new cl(this.manager);c.setPath(o.path),c.setResponseType("arraybuffer"),c.setRequestHeader(o.requestHeader),c.setWithCredentials(o.withCredentials),c.load(e,function(h){try{n(o.parse(h,a))}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}parse(e,n){if(e_e(e))Ti=new Jwe().parse(e);else{const s=f7(e);if(!t_e(s))throw new Error("THREE.FBXLoader: Unknown format.");if(CN(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+CN(s));Ti=new Kwe().parse(s)}const i=new t_(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new jwe(i,this.manager).parse(Ti)}}class jwe{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){jn=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),i=this.parseMaterials(n),s=this.parseDeformers(),o=new qwe().parse(s);return this.parseScene(s,o,i),Fs}parseConnections(){const e=new Map;return"Connections"in Ti&&Ti.Connections.connections.forEach(function(n){const i=n[0],s=n[1],o=n[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const c={ID:i,relationship:o};e.get(s).children.push(c)}),e}parseImages(){const e={},n={};if("Video"in Ti.Objects){const i=Ti.Objects.Video;for(const s in i){const o=i[s],a=parseInt(s);if(e[a]=o.RelativeFilename||o.Filename,"Content"in o){const c=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,h=typeof o.Content=="string"&&o.Content!=="";if(c||h){const d=this.parseImage(i[s]);n[o.RelativeFilename||o.Filename]=d}}}}for(const i in e){const s=e[i];n[s]!==void 0?e[i]=n[s]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const n=e.Content,i=e.RelativeFilename||e.Filename,s=i.slice(i.lastIndexOf(".")+1).toLowerCase();let o;switch(s){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const a=new Uint8Array(n);return window.URL.createObjectURL(new Blob([a],{type:o}))}}parseTextures(e){const n=new Map;if("Texture"in Ti.Objects){const i=Ti.Objects.Texture;for(const s in i){const o=this.parseTexture(i[s],e);n.set(parseInt(s),o)}}return n}parseTexture(e,n){const i=this.loadTexture(e,n);i.ID=e.id,i.name=e.attrName;const s=e.WrapModeU,o=e.WrapModeV,a=s!==void 0?s.value:0,c=o!==void 0?o.value:0;if(i.wrapS=a===0?Ph:_s,i.wrapT=c===0?Ph:_s,"Scaling"in e){const h=e.Scaling.value;i.repeat.x=h[0],i.repeat.y=h[1]}return i}loadTexture(e,n){let i;const s=this.textureLoader.path,o=jn.get(e.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(i=n[o[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const c=e.FileName.slice(-3).toLowerCase();if(c==="tga"){const h=this.manager.getHandler(".tga");h===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new Hn):(h.setPath(this.textureLoader.path),a=h.load(i))}else c==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new Hn):a=this.textureLoader.load(i);return this.textureLoader.setPath(s),a}parseMaterials(e){const n=new Map;if("Material"in Ti.Objects){const i=Ti.Objects.Material;for(const s in i){const o=this.parseMaterial(i[s],e);o!==null&&n.set(parseInt(s),o)}}return n}parseMaterial(e,n){const i=e.id,s=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!jn.has(i))return null;const a=this.parseParameters(e,n,i);let c;switch(o.toLowerCase()){case"phong":c=new z0;break;case"lambert":c=new DP;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),c=new z0;break}return c.setValues(a),c.name=s,c}parseParameters(e,n,i){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new rt().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=new rt().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new rt().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=new rt().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new rt().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new rt().fromArray(e.SpecularColor.value));const o=this;return jn.get(i).children.forEach(function(a){const c=a.relationship;switch(c){case"Bump":s.bumpMap=o.getTexture(n,a.ID);break;case"Maya|TEX_ao_map":s.aoMap=o.getTexture(n,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=o.getTexture(n,a.ID),s.map!==void 0&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=o.getTexture(n,a.ID);break;case"EmissiveColor":s.emissiveMap=o.getTexture(n,a.ID),s.emissiveMap!==void 0&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=o.getTexture(n,a.ID);break;case"ReflectionColor":s.envMap=o.getTexture(n,a.ID),s.envMap!==void 0&&(s.envMap.mapping=Op,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=o.getTexture(n,a.ID),s.specularMap!==void 0&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=o.getTexture(n,a.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",c);break}}),s}getTexture(e,n){return"LayeredTexture"in Ti.Objects&&n in Ti.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=jn.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in Ti.Objects){const i=Ti.Objects.Deformer;for(const s in i){const o=i[s],a=jn.get(parseInt(s));if(o.attrType==="Skin"){const c=this.parseSkeleton(a,i);c.ID=s,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=a.parents[0].ID,e[s]=c}else if(o.attrType==="BlendShape"){const c={id:s};c.rawTargets=this.parseMorphTargets(a,i),c.id=s,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=c}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const i=[];return e.children.forEach(function(s){const o=n[s.ID];if(o.attrType!=="Cluster")return;const a={ID:s.ID,indices:[],weights:[],transformLink:new gt().fromArray(o.TransformLink.a)};"Indexes"in o&&(a.indices=o.Indexes.a,a.weights=o.Weights.a),i.push(a)}),{rawBones:i,bones:[]}}parseMorphTargets(e,n){const i=[];for(let s=0;s<e.children.length;s++){const o=e.children[s],a=n[o.ID],c={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;c.geoID=jn.get(parseInt(o.ID)).children.filter(function(h){return h.relationship===void 0})[0].ID,i.push(c)}return i}parseScene(e,n,i){Fs=new Gl;const s=this.parseModels(e.skeletons,n,i),o=Ti.Objects.Model,a=this;s.forEach(function(h){const d=o[h.ID];a.setLookAtProperties(h,d),jn.get(h.ID).parents.forEach(function(f){const p=s.get(f.ID);p!==void 0&&p.add(h)}),h.parent===null&&Fs.add(h)}),this.bindSkeleton(e.skeletons,n,s),this.createAmbientLight(),Fs.traverse(function(h){if(h.userData.transformData){h.parent&&(h.userData.transformData.parentMatrix=h.parent.matrix,h.userData.transformData.parentMatrixWorld=h.parent.matrixWorld);const d=u7(h.userData.transformData);h.applyMatrix4(d),h.updateWorldMatrix()}});const c=new Zwe().parse();Fs.children.length===1&&Fs.children[0].isGroup&&(Fs.children[0].animations=c,Fs=Fs.children[0]),Fs.animations=c}parseModels(e,n,i){const s=new Map,o=Ti.Objects.Model;for(const a in o){const c=parseInt(a),h=o[a],d=jn.get(c);let f=this.buildSkeleton(d,e,c,h.attrName);if(!f){switch(h.attrType){case"Camera":f=this.createCamera(d);break;case"Light":f=this.createLight(d);break;case"Mesh":f=this.createMesh(d,n,i);break;case"NurbsCurve":f=this.createCurve(d,n);break;case"LimbNode":case"Root":f=new yy;break;case"Null":default:f=new Gl;break}f.name=h.attrName?vi.sanitizeNodeName(h.attrName):"",f.ID=c}this.getTransformData(f,h),s.set(c,f)}return s}buildSkeleton(e,n,i,s){let o=null;return e.parents.forEach(function(a){for(const c in n){const h=n[c];h.rawBones.forEach(function(d,f){if(d.ID===a.ID){const p=o;o=new yy,o.matrixWorld.copy(d.transformLink),o.name=s?vi.sanitizeNodeName(s):"",o.ID=i,h.bones[f]=o,p!==null&&o.add(p)}})}}),o}createCamera(e){let n,i;if(e.children.forEach(function(s){const o=Ti.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)n=new Ni;else{let s=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(s=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let a=1e3;i.FarPlane!==void 0&&(a=i.FarPlane.value/1e3);let c=window.innerWidth,h=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(c=i.AspectWidth.value,h=i.AspectHeight.value);const d=c/h;let f=45;i.FieldOfView!==void 0&&(f=i.FieldOfView.value);const p=i.FocalLength?i.FocalLength.value:null;switch(s){case 0:n=new rn(f,d,o,a),p!==null&&n.setFocalLength(p);break;case 1:n=new Yo(-c/2,c/2,h/2,-h/2,o,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new Ni;break}}return n}createLight(e){let n,i;if(e.children.forEach(function(s){const o=Ti.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)n=new Ni;else{let s;i.LightType===void 0?s=0:s=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=new rt().fromArray(i.Color.value));let a=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(a=0);let c=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?c=0:c=i.FarAttenuationEnd.value);const h=1;switch(s){case 0:n=new CO(o,a,c,h);break;case 1:n=new UP(o,a);break;case 2:let d=Math.PI/3;i.InnerAngle!==void 0&&(d=ns.degToRad(i.InnerAngle.value));let f=0;i.OuterAngle!==void 0&&(f=ns.degToRad(i.OuterAngle.value),f=Math.max(f,1)),n=new i_(o,a,c,d,f,h);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new CO(o,a);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,i){let s,o=null,a=null;const c=[];return e.children.forEach(function(h){n.has(h.ID)&&(o=n.get(h.ID)),i.has(h.ID)&&c.push(i.get(h.ID))}),c.length>1?a=c:c.length>0?a=c[0]:(a=new z0({color:13421772}),c.push(a)),"color"in o.attributes&&c.forEach(function(h){h.vertexColors=!0}),o.FBX_Deformer?(s=new kP(o,a),s.normalizeSkinWeights()):s=new sn(o,a),s}createCurve(e,n){const i=e.children.reduce(function(o,a){return n.has(a.ID)&&(o=n.get(a.ID)),o},null),s=new ls({color:3342591,linewidth:1});return new cc(i,s)}getTransformData(e,n){const i={};"InheritType"in n&&(i.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?i.eulerOrder=d7(n.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in n&&(i.translation=n.Lcl_Translation.value),"PreRotation"in n&&(i.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(i.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(i.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(i.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(i.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(i.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(i.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(i.rotationPivot=n.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,n){"LookAtProperty"in n&&jn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=Ti.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Fs.add(e.target)):e.lookAt(new re().fromArray(o))}}})}bindSkeleton(e,n,i){const s=this.parsePoseNodes();for(const o in e){const a=e[o];jn.get(parseInt(a.ID)).parents.forEach(function(c){if(n.has(c.ID)){const h=c.ID;jn.get(h).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new dv(a.bones),s[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Ti.Objects){const n=Ti.Objects.Pose;for(const i in n)if(n[i].attrType==="BindPose"&&n[i].NbPoseNodes>0){const s=n[i].PoseNode;Array.isArray(s)?s.forEach(function(o){e[o.Node]=new gt().fromArray(o.Matrix.a)}):e[s.Node]=new gt().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Ti&&"AmbientColor"in Ti.GlobalSettings){const e=Ti.GlobalSettings.AmbientColor.value,n=e[0],i=e[1],s=e[2];if(n!==0||i!==0||s!==0){const o=new rt(n,i,s);Fs.add(new FP(o,1))}}}}class qwe{parse(e){const n=new Map;if("Geometry"in Ti.Objects){const i=Ti.Objects.Geometry;for(const s in i){const o=jn.get(parseInt(s)),a=this.parseGeometry(o,i[s],e);n.set(parseInt(s),a)}}return n}parseGeometry(e,n,i){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,i);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,i){const s=i.skeletons,o=[],a=e.parents.map(function(p){return Ti.Objects.Model[p.ID]});if(a.length===0)return;const c=e.children.reduce(function(p,g){return s[g.ID]!==void 0&&(p=s[g.ID]),p},null);e.children.forEach(function(p){i.morphTargets[p.ID]!==void 0&&o.push(i.morphTargets[p.ID])});const h=a[0],d={};"RotationOrder"in h&&(d.eulerOrder=d7(h.RotationOrder.value)),"InheritType"in h&&(d.inheritType=parseInt(h.InheritType.value)),"GeometricTranslation"in h&&(d.translation=h.GeometricTranslation.value),"GeometricRotation"in h&&(d.rotation=h.GeometricRotation.value),"GeometricScaling"in h&&(d.scale=h.GeometricScaling.value);const f=u7(d);return this.genGeometry(n,c,o,f)}genGeometry(e,n,i,s){const o=new si;e.attrName&&(o.name=e.attrName);const a=this.parseGeoNode(e,n),c=this.genBuffers(a),h=new Tt(c.vertex,3);if(h.applyMatrix4(s),o.setAttribute("position",h),c.colors.length>0&&o.setAttribute("color",new Tt(c.colors,3)),n&&(o.setAttribute("skinIndex",new $w(c.weightsIndices,4)),o.setAttribute("skinWeight",new Tt(c.vertexWeights,4)),o.FBX_Deformer=n),c.normal.length>0){const d=new fi().getNormalMatrix(s),f=new Tt(c.normal,3);f.applyNormalMatrix(d),o.setAttribute("normal",f)}if(c.uvs.forEach(function(d,f){let p="uv"+(f+1).toString();f===0&&(p="uv"),o.setAttribute(p,new Tt(c.uvs[f],2))}),a.material&&a.material.mappingType!=="AllSame"){let d=c.materialIndex[0],f=0;if(c.materialIndex.forEach(function(p,g){p!==d&&(o.addGroup(f,g-f,d),d=p,f=g)}),o.groups.length>0){const p=o.groups[o.groups.length-1],g=p.start+p.count;g!==c.materialIndex.length&&o.addGroup(g,c.materialIndex.length-g,d)}o.groups.length===0&&o.addGroup(0,c.materialIndex.length,c.materialIndex[0])}return this.addMorphTargets(o,e,i,s),o}parseGeoNode(e,n){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return i.weightTable={},n!==null&&(i.skeleton=n,n.rawBones.forEach(function(s,o){s.indices.forEach(function(a,c){i.weightTable[a]===void 0&&(i.weightTable[a]=[]),i.weightTable[a].push({id:o,weight:s.weights[c]})})})),i}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,s=0,o=!1,a=[],c=[],h=[],d=[],f=[],p=[];const g=this;return e.vertexIndices.forEach(function(y,b){let w,x=!1;y<0&&(y=y^-1,x=!0);let S=[],_=[];if(a.push(y*3,y*3+1,y*3+2),e.color){const O=Lb(b,i,y,e.color);h.push(O[0],O[1],O[2])}if(e.skeleton){if(e.weightTable[y]!==void 0&&e.weightTable[y].forEach(function(O){_.push(O.weight),S.push(O.id)}),_.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const O=[0,0,0,0],T=[0,0,0,0];_.forEach(function(E,P){let I=E,A=S[P];T.forEach(function(D,M,$){if(I>D){$[M]=I,I=D;const L=O[M];O[M]=A,A=L}})}),S=O,_=T}for(;_.length<4;)_.push(0),S.push(0);for(let O=0;O<4;++O)f.push(_[O]),p.push(S[O])}if(e.normal){const O=Lb(b,i,y,e.normal);c.push(O[0],O[1],O[2])}e.material&&e.material.mappingType!=="AllSame"&&(w=Lb(b,i,y,e.material)[0]),e.uv&&e.uv.forEach(function(O,T){const E=Lb(b,i,y,O);d[T]===void 0&&(d[T]=[]),d[T].push(E[0]),d[T].push(E[1])}),s++,x&&(g.genFace(n,e,a,w,c,h,d,f,p,s),i++,s=0,a=[],c=[],h=[],d=[],f=[],p=[])}),n}genFace(e,n,i,s,o,a,c,h,d,f){for(let p=2;p<f;p++)e.vertex.push(n.vertexPositions[i[0]]),e.vertex.push(n.vertexPositions[i[1]]),e.vertex.push(n.vertexPositions[i[2]]),e.vertex.push(n.vertexPositions[i[(p-1)*3]]),e.vertex.push(n.vertexPositions[i[(p-1)*3+1]]),e.vertex.push(n.vertexPositions[i[(p-1)*3+2]]),e.vertex.push(n.vertexPositions[i[p*3]]),e.vertex.push(n.vertexPositions[i[p*3+1]]),e.vertex.push(n.vertexPositions[i[p*3+2]]),n.skeleton&&(e.vertexWeights.push(h[0]),e.vertexWeights.push(h[1]),e.vertexWeights.push(h[2]),e.vertexWeights.push(h[3]),e.vertexWeights.push(h[(p-1)*4]),e.vertexWeights.push(h[(p-1)*4+1]),e.vertexWeights.push(h[(p-1)*4+2]),e.vertexWeights.push(h[(p-1)*4+3]),e.vertexWeights.push(h[p*4]),e.vertexWeights.push(h[p*4+1]),e.vertexWeights.push(h[p*4+2]),e.vertexWeights.push(h[p*4+3]),e.weightsIndices.push(d[0]),e.weightsIndices.push(d[1]),e.weightsIndices.push(d[2]),e.weightsIndices.push(d[3]),e.weightsIndices.push(d[(p-1)*4]),e.weightsIndices.push(d[(p-1)*4+1]),e.weightsIndices.push(d[(p-1)*4+2]),e.weightsIndices.push(d[(p-1)*4+3]),e.weightsIndices.push(d[p*4]),e.weightsIndices.push(d[p*4+1]),e.weightsIndices.push(d[p*4+2]),e.weightsIndices.push(d[p*4+3])),n.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(p-1)*3]),e.colors.push(a[(p-1)*3+1]),e.colors.push(a[(p-1)*3+2]),e.colors.push(a[p*3]),e.colors.push(a[p*3+1]),e.colors.push(a[p*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),n.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[(p-1)*3]),e.normal.push(o[(p-1)*3+1]),e.normal.push(o[(p-1)*3+2]),e.normal.push(o[p*3]),e.normal.push(o[p*3+1]),e.normal.push(o[p*3+2])),n.uv&&n.uv.forEach(function(g,y){e.uvs[y]===void 0&&(e.uvs[y]=[]),e.uvs[y].push(c[y][0]),e.uvs[y].push(c[y][1]),e.uvs[y].push(c[y][(p-1)*2]),e.uvs[y].push(c[y][(p-1)*2+1]),e.uvs[y].push(c[y][p*2]),e.uvs[y].push(c[y][p*2+1])})}addMorphTargets(e,n,i,s){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;i.forEach(function(a){a.rawTargets.forEach(function(c){const h=Ti.Objects.Geometry[c.geoID];h!==void 0&&o.genMorphGeometry(e,n,h,s,c.name)})})}genMorphGeometry(e,n,i,s,o){const a=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],c=i.Vertices!==void 0?i.Vertices.a:[],h=i.Indexes!==void 0?i.Indexes.a:[],d=e.attributes.position.count*3,f=new Float32Array(d);for(let b=0;b<h.length;b++){const w=h[b]*3;f[w]=c[b*3],f[w+1]=c[b*3+1],f[w+2]=c[b*3+2]}const p={vertexIndices:a,vertexPositions:f},g=this.genBuffers(p),y=new Tt(g.vertex,3);y.name=o||i.attrName,y.applyMatrix4(s),e.morphAttributes.position.push(y)}parseNormals(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,s=e.Normals.a;let o=[];return i==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:o,mappingType:n,referenceType:i}}parseUVs(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,s=e.UV.a;let o=[];return i==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:s,indices:o,mappingType:n,referenceType:i}}parseVertexColors(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,s=e.Colors.a;let o=[];return i==="IndexToDirect"&&(o=e.ColorIndex.a),{dataSize:4,buffer:s,indices:o,mappingType:n,referenceType:i}}parseMaterialIndices(e){const n=e.MappingInformationType,i=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const s=e.Materials.a,o=[];for(let a=0;a<s.length;++a)o.push(a);return{dataSize:1,buffer:s,indices:o,mappingType:n,referenceType:i}}parseNurbsGeometry(e){if(_N===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new si;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new si;const i=n-1,s=e.KnotVector.a,o=[],a=e.Points.a;for(let f=0,p=a.length;f<p;f+=4)o.push(new Oi().fromArray(a,f));let c,h;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){c=i,h=s.length-1-c;for(let f=0;f<i;++f)o.push(o[f])}const d=new _N(i,s,o,c,h).getPoints(o.length*12);return new si().setFromPoints(d)}}class Zwe{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const i in n){const s=n[i],o=this.addClip(s);e.push(o)}return e}parseClips(){if(Ti.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=Ti.Objects.AnimationCurveNode,n=new Map;for(const i in e){const s=e[i];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:s.id,attr:s.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(e){const n=Ti.Objects.AnimationCurve;for(const i in n){const s={id:n[i].id,times:n[i].KeyTime.a.map(i_e),values:n[i].KeyValueFloat.a},o=jn.get(s.id);if(o!==void 0){const a=o.parents[0].ID,c=o.parents[0].relationship;c.match(/X/)?e.get(a).curves.x=s:c.match(/Y/)?e.get(a).curves.y=s:c.match(/Z/)?e.get(a).curves.z=s:c.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=s)}}}parseAnimationLayers(e){const n=Ti.Objects.AnimationLayer,i=new Map;for(const s in n){const o=[],a=jn.get(parseInt(s));a!==void 0&&(a.children.forEach(function(c,h){if(e.has(c.ID)){const d=e.get(c.ID);if(d.curves.x!==void 0||d.curves.y!==void 0||d.curves.z!==void 0){if(o[h]===void 0){const f=jn.get(c.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(f!==void 0){const p=Ti.Objects.Model[f.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",c);return}const g={modelName:p.attrName?vi.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Fs.traverse(function(y){y.ID===p.id&&(g.transform=y.matrix,y.userData.transformData&&(g.eulerOrder=y.userData.transformData.eulerOrder))}),g.transform||(g.transform=new gt),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),o[h]=g}}o[h]&&(o[h][d.attr]=d)}else if(d.curves.morph!==void 0){if(o[h]===void 0){const f=jn.get(c.ID).parents.filter(function(x){return x.relationship!==void 0})[0].ID,p=jn.get(f).parents[0].ID,g=jn.get(p).parents[0].ID,y=jn.get(g).parents[0].ID,b=Ti.Objects.Model[y],w={modelName:b.attrName?vi.sanitizeNodeName(b.attrName):"",morphName:Ti.Objects.Deformer[f].attrName};o[h]=w}o[h][d.attr]=d}}}),i.set(parseInt(s),o))}return i}parseAnimStacks(e){const n=Ti.Objects.AnimationStack,i={};for(const s in n){const o=jn.get(parseInt(s)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(o[0].ID);i[s]={name:n[s].attrName,layer:a}}return i}addClip(e){let n=[];const i=this;return e.layer.forEach(function(s){n=n.concat(i.generateTracks(s))}),new Rp(e.name,-1,n)}generateTracks(e){const n=[];let i=new re,s=new ar,o=new re;if(e.transform&&e.transform.decompose(i,s,o),i=i.toArray(),s=new br().setFromQuaternion(s,e.eulerOrder).toArray(),o=o.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");a!==void 0&&n.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&n.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");a!==void 0&&n.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&n.push(a)}return n}generateVectorTrack(e,n,i,s){const o=this.getTimesForAllAxes(n),a=this.getKeyframeTrackValues(o,n,i);return new Ap(e+"."+s,o,a)}generateRotationTrack(e,n,i,s,o,a){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(ns.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(ns.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(ns.degToRad));const c=this.getTimesForAllAxes(n),h=this.getKeyframeTrackValues(c,n,i);s!==void 0&&(s=s.map(ns.degToRad),s.push(a),s=new br().fromArray(s),s=new ar().setFromEuler(s)),o!==void 0&&(o=o.map(ns.degToRad),o.push(a),o=new br().fromArray(o),o=new ar().setFromEuler(o).invert());const d=new ar,f=new br,p=[];for(let g=0;g<h.length;g+=3)f.set(h[g],h[g+1],h[g+2],a),d.setFromEuler(f),s!==void 0&&d.premultiply(s),o!==void 0&&d.multiply(o),d.toArray(p,g/3*4);return new Ed(e+".quaternion",c,p)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,i=n.values.map(function(o){return o/100}),s=Fs.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Pp(e.modelName+".morphTargetInfluences["+s+"]",n.times,i)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(i,s){return i-s}),n.length>1){let i=1,s=n[0];for(let o=1;o<n.length;o++){const a=n[o];a!==s&&(n[i]=a,s=a,i++)}n=n.slice(0,i)}return n}getKeyframeTrackValues(e,n,i){const s=i,o=[];let a=-1,c=-1,h=-1;return e.forEach(function(d){if(n.x&&(a=n.x.times.indexOf(d)),n.y&&(c=n.y.times.indexOf(d)),n.z&&(h=n.z.times.indexOf(d)),a!==-1){const f=n.x.values[a];o.push(f),s[0]=f}else o.push(s[0]);if(c!==-1){const f=n.y.values[c];o.push(f),s[1]=f}else o.push(s[1]);if(h!==-1){const f=n.z.values[h];o.push(f),s[2]=f}else o.push(s[2])}),o}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const i=e.values[n-1],s=e.values[n]-i,o=Math.abs(s);if(o>=180){const a=o/180,c=s/a;let h=i+c;const d=e.times[n-1],f=(e.times[n]-d)/a;let p=d+f;const g=[],y=[];for(;p<e.times[n];)g.push(p),p+=f,y.push(h),h+=c;e.times=kN(e.times,n,g),e.values=kN(e.values,n,y)}}}}class Kwe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new h7,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,i=e.split(/[\r\n]+/);return i.forEach(function(s,o){const a=s.match(/^[\s\t]*;/),c=s.match(/^[\s\t]*$/);if(a||c)return;const h=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),d=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=s.match("^\\t{"+(n.currentIndent-1)+"}}");h?n.parseNodeBegin(s,h):d?n.parseNodeProperty(s,d,i[++o]):f?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,n){const i=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(h){return h.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},a=this.parseNodeAttr(s),c=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in c?(i==="PoseNode"?c.PoseNode.push(o):c[i].id!==void 0&&(c[i]={},c[i][c[i].id]=c[i]),a.id!==""&&(c[i][a.id]=o)):typeof a.id=="number"?(c[i]={},c[i][a.id]=o):i!=="Properties70"&&(i==="PoseNode"?c[i]=[o]:c[i]=o),typeof a.id=="number"&&(o.id=a.id),a.name!==""&&(o.attrName=a.name),a.type!==""&&(o.attrType=a.type),this.pushStack(o)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let i="",s="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:n,name:i,type:s}}parseNodeProperty(e,n,i){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,s,o);return}if(s==="C"){const c=o.split(",").slice(1),h=parseInt(c[0]),d=parseInt(c[1]);let f=o.split(",").slice(3);f=f.map(function(p){return p.trim().replace(/^"/,"")}),s="connections",o=[h,d],r_e(o,f),a[s]===void 0&&(a[s]=[])}s==="Node"&&(a.id=o),s in a&&Array.isArray(a[s])?a[s].push(o):s!=="a"?a[s]=o:a.a=o,this.setCurrentProp(a,s),s==="a"&&o.slice(-1)!==","&&(a.a=g2(o))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=g2(n.a))}parseNodeSpecialProperty(e,n,i){const s=i.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=s[0],a=s[1],c=s[2],h=s[3];let d=s[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":d=parseFloat(d);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":d=g2(d);break}this.getPrevNode()[o]={type:a,type2:c,flag:h,value:d},this.setCurrentProp(this.getPrevNode(),o)}}class Jwe{parse(e){const n=new SN(e);n.skip(23);const i=n.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const s=new h7;for(;!this.endOfContent(n);){const o=this.parseNode(n,i);o!==null&&s.add(o.name,o)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const i={},s=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),c=e.getString(a);if(s===0)return null;const h=[];for(let g=0;g<o;g++)h.push(this.parseProperty(e));const d=h.length>0?h[0]:"",f=h.length>1?h[1]:"",p=h.length>2?h[2]:"";for(i.singleProperty=o===1&&e.getOffset()===s;s>e.getOffset();){const g=this.parseNode(e,n);g!==null&&this.parseSubNode(c,i,g)}return i.propertyList=h,typeof d=="number"&&(i.id=d),f!==""&&(i.attrName=f),p!==""&&(i.attrType=p),c!==""&&(i.name=c),i}parseSubNode(e,n,i){if(i.singleProperty===!0){const s=i.propertyList[0];Array.isArray(s)?(n[i.name]=i,i.a=s):n[i.name]=s}else if(e==="Connections"&&i.name==="C"){const s=[];i.propertyList.forEach(function(o,a){a!==0&&s.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){n[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let s=i.propertyList[0],o=i.propertyList[1];const a=i.propertyList[2],c=i.propertyList[3];let h;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?h=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:h=i.propertyList[4],n[s]={type:o,type2:a,flag:c,value:h}}else n[i.name]===void 0?typeof i.id=="number"?(n[i.name]={},n[i.name][i.id]=i):n[i.name]=i:i.name==="PoseNode"?(Array.isArray(n[i.name])||(n[i.name]=[n[i.name]]),n[i.name].push(i)):n[i.name][i.id]===void 0&&(n[i.name][i.id]=i)}parseProperty(e){const n=e.getString(1);let i;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(o===0)switch(n){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const c=Dwe(new Uint8Array(e.getArrayBuffer(a))),h=new SN(c.buffer);switch(n){case"b":case"c":return h.getBooleanArray(s);case"d":return h.getFloat64Array(s);case"f":return h.getFloat32Array(s);case"i":return h.getInt32Array(s);case"l":return h.getInt64Array(s)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class SN{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let i=0;i<e;i++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let s=0;s<e;s++)n[s]=this.getUint8();const i=n.indexOf(0);return i>=0&&(n=n.slice(0,i)),Ip.decodeText(new Uint8Array(n))}}class h7{add(e,n){this[e]=n}}function e_e(r){const e="Kaydara FBX Binary  \0";return r.byteLength>=e.length&&e===f7(r,0,e.length)}function t_e(r){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(s){const o=r[s-1];return r=r.slice(n+s),n++,o}for(let s=0;s<e.length;++s)if(i(1)===e[s])return!1;return!0}function CN(r){const e=/FBXVersion: (\d+)/,n=r.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function i_e(r){return r/46186158e3}const n_e=[];function Lb(r,e,n,i){let s;switch(i.mappingType){case"ByPolygonVertex":s=r;break;case"ByPolygon":s=e;break;case"ByVertice":s=n;break;case"AllSame":s=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(s=i.indices[s]);const o=s*i.dataSize,a=o+i.dataSize;return s_e(n_e,i.buffer,o,a)}const m2=new br,kf=new re;function u7(r){const e=new gt,n=new gt,i=new gt,s=new gt,o=new gt,a=new gt,c=new gt,h=new gt,d=new gt,f=new gt,p=new gt,g=new gt,y=r.inheritType?r.inheritType:0;if(r.translation&&e.setPosition(kf.fromArray(r.translation)),r.preRotation){const M=r.preRotation.map(ns.degToRad);M.push(r.eulerOrder),n.makeRotationFromEuler(m2.fromArray(M))}if(r.rotation){const M=r.rotation.map(ns.degToRad);M.push(r.eulerOrder),i.makeRotationFromEuler(m2.fromArray(M))}if(r.postRotation){const M=r.postRotation.map(ns.degToRad);M.push(r.eulerOrder),s.makeRotationFromEuler(m2.fromArray(M)),s.invert()}r.scale&&o.scale(kf.fromArray(r.scale)),r.scalingOffset&&c.setPosition(kf.fromArray(r.scalingOffset)),r.scalingPivot&&a.setPosition(kf.fromArray(r.scalingPivot)),r.rotationOffset&&h.setPosition(kf.fromArray(r.rotationOffset)),r.rotationPivot&&d.setPosition(kf.fromArray(r.rotationPivot)),r.parentMatrixWorld&&(p.copy(r.parentMatrix),f.copy(r.parentMatrixWorld));const b=n.clone().multiply(i).multiply(s),w=new gt;w.extractRotation(f);const x=new gt;x.copyPosition(f);const S=x.clone().invert().multiply(f),_=w.clone().invert().multiply(S),O=o,T=new gt;if(y===0)T.copy(w).multiply(b).multiply(_).multiply(O);else if(y===1)T.copy(w).multiply(_).multiply(b).multiply(O);else{const M=new gt().scale(new re().setFromMatrixScale(p)).clone().invert(),$=_.clone().multiply(M);T.copy(w).multiply(b).multiply($).multiply(O)}const E=d.clone().invert(),P=a.clone().invert();let I=e.clone().multiply(h).multiply(d).multiply(n).multiply(i).multiply(s).multiply(E).multiply(c).multiply(a).multiply(o).multiply(P);const A=new gt().copyPosition(I),D=f.clone().multiply(A);return g.copyPosition(D),I=g.clone().multiply(T),I.premultiply(f.invert()),I}function d7(r){r=r||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return r===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[r]}function g2(r){return r.split(",").map(function(e){return parseFloat(e)})}function f7(r,e,n){return e===void 0&&(e=0),n===void 0&&(n=r.byteLength),Ip.decodeText(new Uint8Array(r,e,n))}function r_e(r,e){for(let n=0,i=r.length,s=e.length;n<s;n++,i++)r[i]=e[n]}function s_e(r,e,n,i){for(let s=n,o=0;s<i;s++,o++)r[o]=e[s];return r}function kN(r,e,n){return r.slice(0,e).concat(n).concat(r.slice(e))}var o_e=Object.defineProperty,a_e=(r,e,n)=>e in r?o_e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,k3=(r,e,n)=>(a_e(r,typeof e!="symbol"?e+"":e,n),n);class p7{constructor(e){k3(this,"data"),this.data=e}generateShapes(e,n=100,i){const s=[],o={letterSpacing:0,lineHeight:1,...i},a=l_e(e,n,this.data,o);for(let c=0,h=a.length;c<h;c++)Array.prototype.push.apply(s,a[c].toShapes(!1));return s}}k3(p7,"isFont");k3(p7,"type");function l_e(r,e,n,i){const s=Array.from(r),o=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,c=[];let h=0,d=0;for(let f=0;f<s.length;f++){const p=s[f];if(p===`
`)h=0,d-=a*i.lineHeight;else{const g=c_e(p,o,h,d,n);g&&(h+=g.offsetX+i.letterSpacing,c.push(g.path))}}return c}function c_e(r,e,n,i,s){const o=s.glyphs[r]||s.glyphs["?"];if(!o){console.error('THREE.Font: character "'+r+'" does not exists in font family '+s.familyName+".");return}const a=new G9;let c,h,d,f,p,g,y,b;if(o.o){const w=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let x=0,S=w.length;x<S;)switch(w[x++]){case"m":c=parseInt(w[x++])*e+n,h=parseInt(w[x++])*e+i,a.moveTo(c,h);break;case"l":c=parseInt(w[x++])*e+n,h=parseInt(w[x++])*e+i,a.lineTo(c,h);break;case"q":d=parseInt(w[x++])*e+n,f=parseInt(w[x++])*e+i,p=parseInt(w[x++])*e+n,g=parseInt(w[x++])*e+i,a.quadraticCurveTo(p,g,d,f);break;case"b":d=parseInt(w[x++])*e+n,f=parseInt(w[x++])*e+i,p=parseInt(w[x++])*e+n,g=parseInt(w[x++])*e+i,y=parseInt(w[x++])*e+n,b=parseInt(w[x++])*e+i,a.bezierCurveTo(p,g,y,b,d,f);break}}return{offsetX:o.ha*e,path:a}}class Ey extends sn{constructor(e,n={}){super(e),this.isReflector=!0,this.type="Reflector",this.camera=new rn;const i=this,s=n.color!==void 0?new rt(n.color):new rt(8355711),o=n.textureWidth||512,a=n.textureHeight||512,c=n.clipBias||0,h=n.shader||Ey.ReflectorShader,d=n.multisample!==void 0?n.multisample:4,f=new wa,p=new re,g=new re,y=new re,b=new gt,w=new re(0,0,-1),x=new Oi,S=new re,_=new re,O=new Oi,T=new gt,E=this.camera,P=new ta(o,a,{samples:d,type:Zp}),I=new Ps({name:h.name!==void 0?h.name:"unspecified",uniforms:av.clone(h.uniforms),fragmentShader:h.fragmentShader,vertexShader:h.vertexShader});I.uniforms.tDiffuse.value=P.texture,I.uniforms.color.value=s,I.uniforms.textureMatrix.value=T,this.material=I,this.onBeforeRender=function(A,D,M){if(g.setFromMatrixPosition(i.matrixWorld),y.setFromMatrixPosition(M.matrixWorld),b.extractRotation(i.matrixWorld),p.set(0,0,1),p.applyMatrix4(b),S.subVectors(g,y),S.dot(p)>0)return;S.reflect(p).negate(),S.add(g),b.extractRotation(M.matrixWorld),w.set(0,0,-1),w.applyMatrix4(b),w.add(y),_.subVectors(g,w),_.reflect(p).negate(),_.add(g),E.position.copy(S),E.up.set(0,1,0),E.up.applyMatrix4(b),E.up.reflect(p),E.lookAt(_),E.far=M.far,E.updateMatrixWorld(),E.projectionMatrix.copy(M.projectionMatrix),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(E.projectionMatrix),T.multiply(E.matrixWorldInverse),T.multiply(i.matrixWorld),f.setFromNormalAndCoplanarPoint(p,g),f.applyMatrix4(E.matrixWorldInverse),x.set(f.normal.x,f.normal.y,f.normal.z,f.constant);const $=E.projectionMatrix;O.x=(Math.sign(x.x)+$.elements[8])/$.elements[0],O.y=(Math.sign(x.y)+$.elements[9])/$.elements[5],O.z=-1,O.w=(1+$.elements[10])/$.elements[14],x.multiplyScalar(2/x.dot(O)),$.elements[2]=x.x,$.elements[6]=x.y,$.elements[10]=x.z+1-c,$.elements[14]=x.w,i.visible=!1;const L=A.getRenderTarget(),N=A.xr.enabled,V=A.shadowMap.autoUpdate;A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(P),A.state.buffers.depth.setMask(!0),A.autoClear===!1&&A.clear(),A.render(D,E),A.xr.enabled=N,A.shadowMap.autoUpdate=V,A.setRenderTarget(L);const U=M.viewport;U!==void 0&&A.state.viewport(U),i.visible=!0},this.getRenderTarget=function(){return P},this.dispose=function(){P.dispose(),i.material.dispose()}}}Ey.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const h_e=["args","material-uniforms-color-value"],u_e=Xt("TresPlaneGeometry",{args:[5,5]},null,-1);Ey.ReflectorShader;function d_e(r){return yw()?(IE(r),!0):!1}function m7(r){return typeof r=="function"?r():li(r)}const f_e=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const p_e=Object.prototype.toString,m_e=r=>p_e.call(r)==="[object Object]",g_e=()=>{};function y_e(r){var e;const n=m7(r);return(e=n==null?void 0:n.$el)!=null?e:n}const v_e=f_e?window:void 0;function y2(...r){let e,n,i,s;if(typeof r[0]=="string"||Array.isArray(r[0])?([n,i,s]=r,e=v_e):[e,n,i,s]=r,!e)return g_e;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],a=()=>{o.forEach(f=>f()),o.length=0},c=(f,p,g,y)=>(f.addEventListener(p,g,y),()=>f.removeEventListener(p,g,y)),h=Qi(()=>[y_e(e),m7(s)],([f,p])=>{if(a(),!f)return;const g=m_e(p)?{...p}:p;o.push(...n.flatMap(y=>i.map(b=>c(f,y,b,g))))},{immediate:!0,flush:"post"}),d=()=>{h(),a()};return d_e(d),d}class PO extends sn{constructor(){super(PO.Geometry,new Ra({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new re,n=new re,i=new zT(16,16),s=new zT(16,16);let o=Ea;const a=PO.Geometry,c=new F0({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),h=new F0({uniforms:{map:{value:i},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),d=new sn(a,c),f=[],p=g7.Shader,g=new F0({name:p.name,uniforms:{map:{value:null},occlusionMap:{value:s},color:{value:new rt(16777215)},scale:{value:new Xe},screenPosition:{value:new re}},vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:bO,transparent:!0,depthWrite:!1}),y=new sn(a,g);this.addElement=function(_){f.push(_)};const b=new Xe,w=new Xe,x=new W9,S=new Oi;this.onBeforeRender=function(_,O,T){_.getCurrentViewport(S);const E=_.getRenderTarget(),P=E!==null?E.texture.type:Ea;o!==P&&(i.dispose(),s.dispose(),i.type=s.type=P,o=P);const I=S.w/S.z,A=S.z/2,D=S.w/2;let M=16/S.w;if(b.set(M*I,M),x.min.set(S.x,S.y),x.max.set(S.x+(S.z-16),S.y+(S.w-16)),n.setFromMatrixPosition(this.matrixWorld),n.applyMatrix4(T.matrixWorldInverse),!(n.z>0)&&(e.copy(n).applyMatrix4(T.projectionMatrix),w.x=S.x+e.x*A+A-8,w.y=S.y+e.y*D+D-8,x.containsPoint(w))){_.copyFramebufferToTexture(w,i);let $=c.uniforms;$.scale.value=b,$.screenPosition.value=e,_.renderBufferDirect(T,null,a,c,d,null),_.copyFramebufferToTexture(w,s),$=h.uniforms,$.scale.value=b,$.screenPosition.value=e,_.renderBufferDirect(T,null,a,h,d,null);const L=-e.x*2,N=-e.y*2;for(let V=0,U=f.length;V<U;V++){const F=f[V],H=g.uniforms;H.color.value.copy(F.color),H.map.value=F.texture,H.screenPosition.value.x=e.x+L*F.distance,H.screenPosition.value.y=e.y+N*F.distance,M=F.size/S.w;const K=S.w/S.z;H.scale.value.set(M*K,M),g.uniformsNeedUpdate=!0,_.renderBufferDirect(T,null,a,g,y,null)}}},this.dispose=function(){c.dispose(),h.dispose(),g.dispose(),i.dispose(),s.dispose();for(let _=0,O=f.length;_<O;_++)f[_].texture.dispose()}}}class g7{constructor(e,n=1,i=0,s=new rt(16777215)){this.texture=e,this.size=n,this.distance=i,this.color=s}}g7.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};PO.Geometry=function(){const r=new si,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),n=new uv(e,5);return r.setIndex([0,1,2,0,2,3]),r.setAttribute("position",new lc(n,3,0,!1)),r.setAttribute("uv",new lc(n,2,3,!1)),r}();ns.clamp;ns.lerp;async function b_e(r){return await t1e(Ywe,r)}const x_e=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","args"],T3=sc({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number.NEGATIVE_INFINITY},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number.POSITIVE_INFINITY},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{default:()=>({ONE:zl.ROTATE,TWO:zl.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start","end"],setup(r,{expose:e,emit:n}){const i=r,s=n,{makeDefault:o,autoRotate:a,autoRotateSpeed:c,enableDamping:h,dampingFactor:d,enablePan:f,keyPanSpeed:p,maxAzimuthAngle:g,minAzimuthAngle:y,maxPolarAngle:b,minPolarAngle:w,minDistance:x,maxDistance:S,minZoom:_,maxZoom:O,enableZoom:T,zoomSpeed:E,enableRotate:P,touches:I,rotateSpeed:A,target:D}=tv(i),{camera:M,renderer:$,extend:L,controls:N}=ZP(),V=lt(null);L({OrbitControls:Uwe}),Qi(V,H=>{U(),H&&o.value?N.value=H:N.value=null});function U(){y2(V.value,"change",()=>s("change",V.value)),y2(V.value,"start",()=>s("start",V.value)),y2(V.value,"end",()=>s("end",V.value))}const{onLoop:F}=Ad();return F(()=>{V.value&&(h.value||a.value)&&V.value.update()}),na(()=>{V.value&&V.value.dispose()}),e({value:V}),(H,K)=>(H.camera||li(M))&&(H.domElement||li($))?(ci(),ln("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:V,target:li(D),"auto-rotate":li(a),"auto-rotate-speed":li(c),"enable-damping":li(h),"damping-factor":li(d),"enable-pan":li(f),"key-pan-speed":li(p),keys:H.keys,"max-azimuth-angle":li(g),"min-azimuth-angle":li(y),"max-polar-angle":li(b),"min-polar-angle":li(w),"min-distance":li(x),"max-distance":li(S),"min-zoom":li(_),"max-zoom":li(O),touches:li(I),"enable-zoom":li(T),"zoom-speed":li(E),"enable-rotate":li(P),"rotate-speed":li(A),args:[H.camera||li(M),H.domElement||li($).domElement]},null,8,x_e)):eP("",!0)}});var v2;/Mac/.test((v2=globalThis==null?void 0:globalThis.navigator)===null||v2===void 0?void 0:v2.platform);var O_e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bb(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var w_e={exports:{}};(function(r,e){(function(n){r.exports=n()})(function(){return function n(i,s,o){function a(d,f){if(!s[d]){if(!i[d]){var p=typeof Bb=="function"&&Bb;if(!f&&p)return p(d,!0);if(c)return c(d,!0);throw new Error("Cannot find module '"+d+"'")}f=s[d]={exports:{}},i[d][0].call(f.exports,function(g){var y=i[d][1][g];return a(y||g)},f,f.exports,n,i,s,o)}return s[d].exports}for(var c=typeof Bb=="function"&&Bb,h=0;h<o.length;h++)a(o[h]);return a}({1:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){var b=n("crypto");function w(P,I){I=_(P,I);var A;return(A=I.algorithm!=="passthrough"?b.createHash(I.algorithm):new E).write===void 0&&(A.write=A.update,A.end=A.update),T(I,A).dispatch(P),A.update||A.end(""),A.digest?A.digest(I.encoding==="buffer"?void 0:I.encoding):(P=A.read(),I.encoding!=="buffer"?P.toString(I.encoding):P)}(s=i.exports=w).sha1=function(P){return w(P)},s.keys=function(P){return w(P,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(P){return w(P,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(P){return w(P,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=b.getHashes?b.getHashes().slice():["sha1","md5"],S=(x.push("passthrough"),["buffer","hex","binary","base64"]);function _(P,I){var A={};if(A.algorithm=(I=I||{}).algorithm||"sha1",A.encoding=I.encoding||"hex",A.excludeValues=!!I.excludeValues,A.algorithm=A.algorithm.toLowerCase(),A.encoding=A.encoding.toLowerCase(),A.ignoreUnknown=I.ignoreUnknown===!0,A.respectType=I.respectType!==!1,A.respectFunctionNames=I.respectFunctionNames!==!1,A.respectFunctionProperties=I.respectFunctionProperties!==!1,A.unorderedArrays=I.unorderedArrays===!0,A.unorderedSets=I.unorderedSets!==!1,A.unorderedObjects=I.unorderedObjects!==!1,A.replacer=I.replacer||void 0,A.excludeKeys=I.excludeKeys||void 0,P===void 0)throw new Error("Object argument required.");for(var D=0;D<x.length;++D)x[D].toLowerCase()===A.algorithm.toLowerCase()&&(A.algorithm=x[D]);if(x.indexOf(A.algorithm)===-1)throw new Error('Algorithm "'+A.algorithm+'"  not supported. supported values: '+x.join(", "));if(S.indexOf(A.encoding)===-1&&A.algorithm!=="passthrough")throw new Error('Encoding "'+A.encoding+'"  not supported. supported values: '+S.join(", "));return A}function O(P){if(typeof P=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(P))!=null}function T(P,I,A){A=A||[];function D(M){return I.update?I.update(M,"utf8"):I.write(M,"utf8")}return{dispatch:function(M){return this["_"+((M=P.replacer?P.replacer(M):M)===null?"null":typeof M)](M)},_object:function(M){var $,L=Object.prototype.toString.call(M),N=/\[object (.*)\]/i.exec(L);if(N=(N=N?N[1]:"unknown:["+L+"]").toLowerCase(),0<=(L=A.indexOf(M)))return this.dispatch("[CIRCULAR:"+L+"]");if(A.push(M),c!==void 0&&c.isBuffer&&c.isBuffer(M))return D("buffer:"),D(M);if(N==="object"||N==="function"||N==="asyncfunction")return L=Object.keys(M),P.unorderedObjects&&(L=L.sort()),P.respectType===!1||O(M)||L.splice(0,0,"prototype","__proto__","constructor"),P.excludeKeys&&(L=L.filter(function(V){return!P.excludeKeys(V)})),D("object:"+L.length+":"),$=this,L.forEach(function(V){$.dispatch(V),D(":"),P.excludeValues||$.dispatch(M[V]),D(",")});if(!this["_"+N]){if(P.ignoreUnknown)return D("["+N+"]");throw new Error('Unknown object type "'+N+'"')}this["_"+N](M)},_array:function(M,V){V=V!==void 0?V:P.unorderedArrays!==!1;var L=this;if(D("array:"+M.length+":"),!V||M.length<=1)return M.forEach(function(U){return L.dispatch(U)});var N=[],V=M.map(function(U){var F=new E,H=A.slice();return T(P,F,H).dispatch(U),N=N.concat(H.slice(A.length)),F.read().toString()});return A=A.concat(N),V.sort(),this._array(V,!1)},_date:function(M){return D("date:"+M.toJSON())},_symbol:function(M){return D("symbol:"+M.toString())},_error:function(M){return D("error:"+M.toString())},_boolean:function(M){return D("bool:"+M.toString())},_string:function(M){D("string:"+M.length+":"),D(M.toString())},_function:function(M){D("fn:"),O(M)?this.dispatch("[native]"):this.dispatch(M.toString()),P.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(M.name)),P.respectFunctionProperties&&this._object(M)},_number:function(M){return D("number:"+M.toString())},_xml:function(M){return D("xml:"+M.toString())},_null:function(){return D("Null")},_undefined:function(){return D("Undefined")},_regexp:function(M){return D("regex:"+M.toString())},_uint8array:function(M){return D("uint8array:"),this.dispatch(Array.prototype.slice.call(M))},_uint8clampedarray:function(M){return D("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(M))},_int8array:function(M){return D("int8array:"),this.dispatch(Array.prototype.slice.call(M))},_uint16array:function(M){return D("uint16array:"),this.dispatch(Array.prototype.slice.call(M))},_int16array:function(M){return D("int16array:"),this.dispatch(Array.prototype.slice.call(M))},_uint32array:function(M){return D("uint32array:"),this.dispatch(Array.prototype.slice.call(M))},_int32array:function(M){return D("int32array:"),this.dispatch(Array.prototype.slice.call(M))},_float32array:function(M){return D("float32array:"),this.dispatch(Array.prototype.slice.call(M))},_float64array:function(M){return D("float64array:"),this.dispatch(Array.prototype.slice.call(M))},_arraybuffer:function(M){return D("arraybuffer:"),this.dispatch(new Uint8Array(M))},_url:function(M){return D("url:"+M.toString())},_map:function(M){return D("map:"),M=Array.from(M),this._array(M,P.unorderedSets!==!1)},_set:function(M){return D("set:"),M=Array.from(M),this._array(M,P.unorderedSets!==!1)},_file:function(M){return D("file:"),this.dispatch([M.name,M.size,M.type,M.lastModfied])},_blob:function(){if(P.ignoreUnknown)return D("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return D("domwindow")},_bigint:function(M){return D("bigint:"+M.toString())},_process:function(){return D("process")},_timer:function(){return D("timer")},_pipe:function(){return D("pipe")},_tcp:function(){return D("tcp")},_udp:function(){return D("udp")},_tty:function(){return D("tty")},_statwatcher:function(){return D("statwatcher")},_securecontext:function(){return D("securecontext")},_connection:function(){return D("connection")},_zlib:function(){return D("zlib")},_context:function(){return D("context")},_nodescript:function(){return D("nodescript")},_httpparser:function(){return D("httpparser")},_dataview:function(){return D("dataview")},_signal:function(){return D("signal")},_fsevent:function(){return D("fsevent")},_tlswrap:function(){return D("tlswrap")}}}function E(){return{buf:"",write:function(P){this.buf+=P},end:function(P){this.buf+=P},read:function(){return this.buf}}}s.writeToStream=function(P,I,A){return A===void 0&&(A=I,I={}),T(I=_(P,I),A).dispatch(P)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){(function(b){var w=typeof Uint8Array<"u"?Uint8Array:Array,x=43,S=47,_=48,O=97,T=65,E=45,P=95;function I(A){return A=A.charCodeAt(0),A===x||A===E?62:A===S||A===P?63:A<_?-1:A<_+10?A-_+26+26:A<T+26?A-T:A<O+26?A-O+26:void 0}b.toByteArray=function(A){var D,M;if(0<A.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var $=A.length,$=A.charAt($-2)==="="?2:A.charAt($-1)==="="?1:0,L=new w(3*A.length/4-$),N=0<$?A.length-4:A.length,V=0;function U(F){L[V++]=F}for(D=0;D<N;D+=4,0)U((16711680&(M=I(A.charAt(D))<<18|I(A.charAt(D+1))<<12|I(A.charAt(D+2))<<6|I(A.charAt(D+3))))>>16),U((65280&M)>>8),U(255&M);return $==2?U(255&(M=I(A.charAt(D))<<2|I(A.charAt(D+1))>>4)):$==1&&(U((M=I(A.charAt(D))<<10|I(A.charAt(D+1))<<4|I(A.charAt(D+2))>>2)>>8&255),U(255&M)),L},b.fromByteArray=function(A){var D,M,$,L,N=A.length%3,V="";function U(F){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(F)}for(D=0,$=A.length-N;D<$;D+=3)M=(A[D]<<16)+(A[D+1]<<8)+A[D+2],V+=U((L=M)>>18&63)+U(L>>12&63)+U(L>>6&63)+U(63&L);switch(N){case 1:V=(V+=U((M=A[A.length-1])>>2))+U(M<<4&63)+"==";break;case 2:V=(V=(V+=U((M=(A[A.length-2]<<8)+A[A.length-1])>>10))+U(M>>4&63))+U(M<<2&63)+"="}return V}})(s===void 0?this.base64js={}:s)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,i,s){(function(o,a,x,h,d,f,p,g,y){var b=n("base64-js"),w=n("ieee754");function x(z,X,te){if(!(this instanceof x))return new x(z,X,te);var se,Q,Z,le,pe=typeof z;if(X==="base64"&&pe=="string")for(z=(le=z).trim?le.trim():le.replace(/^\s+|\s+$/g,"");z.length%4!=0;)z+="=";if(pe=="number")se=K(z);else if(pe=="string")se=x.byteLength(z,X);else{if(pe!="object")throw new Error("First argument needs to be a number, array or string.");se=K(z.length)}if(x._useTypedArrays?Q=x._augment(new Uint8Array(se)):((Q=this).length=se,Q._isBuffer=!0),x._useTypedArrays&&typeof z.byteLength=="number")Q._set(z);else if(ie(le=z)||x.isBuffer(le)||le&&typeof le=="object"&&typeof le.length=="number")for(Z=0;Z<se;Z++)x.isBuffer(z)?Q[Z]=z.readUInt8(Z):Q[Z]=z[Z];else if(pe=="string")Q.write(z,0,X);else if(pe=="number"&&!x._useTypedArrays&&!te)for(Z=0;Z<se;Z++)Q[Z]=0;return Q}function S(z,X,te,se){return x._charsWritten=_e(function(Q){for(var Z=[],le=0;le<Q.length;le++)Z.push(255&Q.charCodeAt(le));return Z}(X),z,te,se)}function _(z,X,te,se){return x._charsWritten=_e(function(Q){for(var Z,le,pe=[],be=0;be<Q.length;be++)le=Q.charCodeAt(be),Z=le>>8,le=le%256,pe.push(le),pe.push(Z);return pe}(X),z,te,se)}function O(z,X,te){var se="";te=Math.min(z.length,te);for(var Q=X;Q<te;Q++)se+=String.fromCharCode(z[Q]);return se}function T(z,X,te,Z){Z||(q(typeof te=="boolean","missing or invalid endian"),q(X!=null,"missing offset"),q(X+1<z.length,"Trying to read beyond buffer length"));var Q,Z=z.length;if(!(Z<=X))return te?(Q=z[X],X+1<Z&&(Q|=z[X+1]<<8)):(Q=z[X]<<8,X+1<Z&&(Q|=z[X+1])),Q}function E(z,X,te,Z){Z||(q(typeof te=="boolean","missing or invalid endian"),q(X!=null,"missing offset"),q(X+3<z.length,"Trying to read beyond buffer length"));var Q,Z=z.length;if(!(Z<=X))return te?(X+2<Z&&(Q=z[X+2]<<16),X+1<Z&&(Q|=z[X+1]<<8),Q|=z[X],X+3<Z&&(Q+=z[X+3]<<24>>>0)):(X+1<Z&&(Q=z[X+1]<<16),X+2<Z&&(Q|=z[X+2]<<8),X+3<Z&&(Q|=z[X+3]),Q+=z[X]<<24>>>0),Q}function P(z,X,te,se){if(se||(q(typeof te=="boolean","missing or invalid endian"),q(X!=null,"missing offset"),q(X+1<z.length,"Trying to read beyond buffer length")),!(z.length<=X))return se=T(z,X,te,!0),32768&se?-1*(65535-se+1):se}function I(z,X,te,se){if(se||(q(typeof te=="boolean","missing or invalid endian"),q(X!=null,"missing offset"),q(X+3<z.length,"Trying to read beyond buffer length")),!(z.length<=X))return se=E(z,X,te,!0),2147483648&se?-1*(4294967295-se+1):se}function A(z,X,te,se){return se||(q(typeof te=="boolean","missing or invalid endian"),q(X+3<z.length,"Trying to read beyond buffer length")),w.read(z,X,te,23,4)}function D(z,X,te,se){return se||(q(typeof te=="boolean","missing or invalid endian"),q(X+7<z.length,"Trying to read beyond buffer length")),w.read(z,X,te,52,8)}function M(z,X,te,se,Q){if(Q||(q(X!=null,"missing value"),q(typeof se=="boolean","missing or invalid endian"),q(te!=null,"missing offset"),q(te+1<z.length,"trying to write beyond buffer length"),Se(X,65535)),Q=z.length,!(Q<=te))for(var Z=0,le=Math.min(Q-te,2);Z<le;Z++)z[te+Z]=(X&255<<8*(se?Z:1-Z))>>>8*(se?Z:1-Z)}function $(z,X,te,se,Q){if(Q||(q(X!=null,"missing value"),q(typeof se=="boolean","missing or invalid endian"),q(te!=null,"missing offset"),q(te+3<z.length,"trying to write beyond buffer length"),Se(X,4294967295)),Q=z.length,!(Q<=te))for(var Z=0,le=Math.min(Q-te,4);Z<le;Z++)z[te+Z]=X>>>8*(se?Z:3-Z)&255}function L(z,X,te,se,Q){Q||(q(X!=null,"missing value"),q(typeof se=="boolean","missing or invalid endian"),q(te!=null,"missing offset"),q(te+1<z.length,"Trying to write beyond buffer length"),ke(X,32767,-32768)),z.length<=te||M(z,0<=X?X:65535+X+1,te,se,Q)}function N(z,X,te,se,Q){Q||(q(X!=null,"missing value"),q(typeof se=="boolean","missing or invalid endian"),q(te!=null,"missing offset"),q(te+3<z.length,"Trying to write beyond buffer length"),ke(X,2147483647,-2147483648)),z.length<=te||$(z,0<=X?X:4294967295+X+1,te,se,Q)}function V(z,X,te,se,Q){Q||(q(X!=null,"missing value"),q(typeof se=="boolean","missing or invalid endian"),q(te!=null,"missing offset"),q(te+3<z.length,"Trying to write beyond buffer length"),J(X,34028234663852886e22,-34028234663852886e22)),z.length<=te||w.write(z,X,te,se,23,4)}function U(z,X,te,se,Q){Q||(q(X!=null,"missing value"),q(typeof se=="boolean","missing or invalid endian"),q(te!=null,"missing offset"),q(te+7<z.length,"Trying to write beyond buffer length"),J(X,17976931348623157e292,-17976931348623157e292)),z.length<=te||w.write(z,X,te,se,52,8)}s.Buffer=x,s.SlowBuffer=x,s.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var z=new ArrayBuffer(0),X=new Uint8Array(z);return X.foo=function(){return 42},X.foo()===42&&typeof X.subarray=="function"}catch{return!1}}(),x.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(z){return!(z==null||!z._isBuffer)},x.byteLength=function(z,X){var te;switch(z+="",X||"utf8"){case"hex":te=z.length/2;break;case"utf8":case"utf-8":te=me(z).length;break;case"ascii":case"binary":case"raw":te=z.length;break;case"base64":te=Pe(z).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":te=2*z.length;break;default:throw new Error("Unknown encoding")}return te},x.concat=function(z,X){if(q(ie(z),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),z.length===0)return new x(0);if(z.length===1)return z[0];if(typeof X!="number")for(Q=X=0;Q<z.length;Q++)X+=z[Q].length;for(var te=new x(X),se=0,Q=0;Q<z.length;Q++){var Z=z[Q];Z.copy(te,se),se+=Z.length}return te},x.prototype.write=function(z,X,te,se){isFinite(X)?isFinite(te)||(se=te,te=void 0):(be=se,se=X,X=te,te=be),X=Number(X)||0;var Q,Z,le,pe,be=this.length-X;switch((!te||be<(te=Number(te)))&&(te=be),se=String(se||"utf8").toLowerCase()){case"hex":Q=function(Ee,ee,Y,de){Y=Number(Y)||0;var fe=Ee.length-Y;(!de||fe<(de=Number(de)))&&(de=fe),q((fe=ee.length)%2==0,"Invalid hex string"),fe/2<de&&(de=fe/2);for(var we=0;we<de;we++){var Me=parseInt(ee.substr(2*we,2),16);q(!isNaN(Me),"Invalid hex string"),Ee[Y+we]=Me}return x._charsWritten=2*we,we}(this,z,X,te);break;case"utf8":case"utf-8":Z=this,le=X,pe=te,Q=x._charsWritten=_e(me(z),Z,le,pe);break;case"ascii":case"binary":Q=S(this,z,X,te);break;case"base64":Z=this,le=X,pe=te,Q=x._charsWritten=_e(Pe(z),Z,le,pe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Q=_(this,z,X,te);break;default:throw new Error("Unknown encoding")}return Q},x.prototype.toString=function(z,X,te){var se,Q,Z,le,pe=this;if(z=String(z||"utf8").toLowerCase(),X=Number(X)||0,(te=te!==void 0?Number(te):pe.length)===X)return"";switch(z){case"hex":se=function(be,Ee,ee){var Y=be.length;(!Ee||Ee<0)&&(Ee=0),(!ee||ee<0||Y<ee)&&(ee=Y);for(var de="",fe=Ee;fe<ee;fe++)de+=he(be[fe]);return de}(pe,X,te);break;case"utf8":case"utf-8":se=function(be,Ee,ee){var Y="",de="";ee=Math.min(be.length,ee);for(var fe=Ee;fe<ee;fe++)be[fe]<=127?(Y+=ue(de)+String.fromCharCode(be[fe]),de=""):de+="%"+be[fe].toString(16);return Y+ue(de)}(pe,X,te);break;case"ascii":case"binary":se=O(pe,X,te);break;case"base64":Q=pe,le=te,se=(Z=X)===0&&le===Q.length?b.fromByteArray(Q):b.fromByteArray(Q.slice(Z,le));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":se=function(be,Ee,ee){for(var Y=be.slice(Ee,ee),de="",fe=0;fe<Y.length;fe+=2)de+=String.fromCharCode(Y[fe]+256*Y[fe+1]);return de}(pe,X,te);break;default:throw new Error("Unknown encoding")}return se},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(z,X,te,se){if(X=X||0,(se=se||se===0?se:this.length)!==(te=te||0)&&z.length!==0&&this.length!==0){q(te<=se,"sourceEnd < sourceStart"),q(0<=X&&X<z.length,"targetStart out of bounds"),q(0<=te&&te<this.length,"sourceStart out of bounds"),q(0<=se&&se<=this.length,"sourceEnd out of bounds"),se>this.length&&(se=this.length);var Q=(se=z.length-X<se-te?z.length-X+te:se)-te;if(Q<100||!x._useTypedArrays)for(var Z=0;Z<Q;Z++)z[Z+X]=this[Z+te];else z._set(this.subarray(te,te+Q),X)}},x.prototype.slice=function(z,X){var te=this.length;if(z=H(z,te,0),X=H(X,te,te),x._useTypedArrays)return x._augment(this.subarray(z,X));for(var se=X-z,Q=new x(se,void 0,!0),Z=0;Z<se;Z++)Q[Z]=this[Z+z];return Q},x.prototype.get=function(z){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(z)},x.prototype.set=function(z,X){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(z,X)},x.prototype.readUInt8=function(z,X){if(X||(q(z!=null,"missing offset"),q(z<this.length,"Trying to read beyond buffer length")),!(z>=this.length))return this[z]},x.prototype.readUInt16LE=function(z,X){return T(this,z,!0,X)},x.prototype.readUInt16BE=function(z,X){return T(this,z,!1,X)},x.prototype.readUInt32LE=function(z,X){return E(this,z,!0,X)},x.prototype.readUInt32BE=function(z,X){return E(this,z,!1,X)},x.prototype.readInt8=function(z,X){if(X||(q(z!=null,"missing offset"),q(z<this.length,"Trying to read beyond buffer length")),!(z>=this.length))return 128&this[z]?-1*(255-this[z]+1):this[z]},x.prototype.readInt16LE=function(z,X){return P(this,z,!0,X)},x.prototype.readInt16BE=function(z,X){return P(this,z,!1,X)},x.prototype.readInt32LE=function(z,X){return I(this,z,!0,X)},x.prototype.readInt32BE=function(z,X){return I(this,z,!1,X)},x.prototype.readFloatLE=function(z,X){return A(this,z,!0,X)},x.prototype.readFloatBE=function(z,X){return A(this,z,!1,X)},x.prototype.readDoubleLE=function(z,X){return D(this,z,!0,X)},x.prototype.readDoubleBE=function(z,X){return D(this,z,!1,X)},x.prototype.writeUInt8=function(z,X,te){te||(q(z!=null,"missing value"),q(X!=null,"missing offset"),q(X<this.length,"trying to write beyond buffer length"),Se(z,255)),X>=this.length||(this[X]=z)},x.prototype.writeUInt16LE=function(z,X,te){M(this,z,X,!0,te)},x.prototype.writeUInt16BE=function(z,X,te){M(this,z,X,!1,te)},x.prototype.writeUInt32LE=function(z,X,te){$(this,z,X,!0,te)},x.prototype.writeUInt32BE=function(z,X,te){$(this,z,X,!1,te)},x.prototype.writeInt8=function(z,X,te){te||(q(z!=null,"missing value"),q(X!=null,"missing offset"),q(X<this.length,"Trying to write beyond buffer length"),ke(z,127,-128)),X>=this.length||(0<=z?this.writeUInt8(z,X,te):this.writeUInt8(255+z+1,X,te))},x.prototype.writeInt16LE=function(z,X,te){L(this,z,X,!0,te)},x.prototype.writeInt16BE=function(z,X,te){L(this,z,X,!1,te)},x.prototype.writeInt32LE=function(z,X,te){N(this,z,X,!0,te)},x.prototype.writeInt32BE=function(z,X,te){N(this,z,X,!1,te)},x.prototype.writeFloatLE=function(z,X,te){V(this,z,X,!0,te)},x.prototype.writeFloatBE=function(z,X,te){V(this,z,X,!1,te)},x.prototype.writeDoubleLE=function(z,X,te){U(this,z,X,!0,te)},x.prototype.writeDoubleBE=function(z,X,te){U(this,z,X,!1,te)},x.prototype.fill=function(z,X,te){if(X=X||0,te=te||this.length,q(typeof(z=typeof(z=z||0)=="string"?z.charCodeAt(0):z)=="number"&&!isNaN(z),"value is not a number"),q(X<=te,"end < start"),te!==X&&this.length!==0){q(0<=X&&X<this.length,"start out of bounds"),q(0<=te&&te<=this.length,"end out of bounds");for(var se=X;se<te;se++)this[se]=z}},x.prototype.inspect=function(){for(var z=[],X=this.length,te=0;te<X;te++)if(z[te]=he(this[te]),te===s.INSPECT_MAX_BYTES){z[te+1]="...";break}return"<Buffer "+z.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var z=new Uint8Array(this.length),X=0,te=z.length;X<te;X+=1)z[X]=this[X];return z.buffer};var F=x.prototype;function H(z,X,te){return typeof z!="number"?te:X<=(z=~~z)?X:0<=z||0<=(z+=X)?z:0}function K(z){return(z=~~Math.ceil(+z))<0?0:z}function ie(z){return(Array.isArray||function(X){return Object.prototype.toString.call(X)==="[object Array]"})(z)}function he(z){return z<16?"0"+z.toString(16):z.toString(16)}function me(z){for(var X=[],te=0;te<z.length;te++){var se=z.charCodeAt(te);if(se<=127)X.push(z.charCodeAt(te));else for(var Q=te,Z=(55296<=se&&se<=57343&&te++,encodeURIComponent(z.slice(Q,te+1)).substr(1).split("%")),le=0;le<Z.length;le++)X.push(parseInt(Z[le],16))}return X}function Pe(z){return b.toByteArray(z)}function _e(z,X,te,se){for(var Q=0;Q<se&&!(Q+te>=X.length||Q>=z.length);Q++)X[Q+te]=z[Q];return Q}function ue(z){try{return decodeURIComponent(z)}catch{return"�"}}function Se(z,X){q(typeof z=="number","cannot write a non-number as a number"),q(0<=z,"specified a negative value for writing an unsigned value"),q(z<=X,"value is larger than maximum value for type"),q(Math.floor(z)===z,"value has a fractional component")}function ke(z,X,te){q(typeof z=="number","cannot write a non-number as a number"),q(z<=X,"value larger than maximum allowed value"),q(te<=z,"value smaller than minimum allowed value"),q(Math.floor(z)===z,"value has a fractional component")}function J(z,X,te){q(typeof z=="number","cannot write a non-number as a number"),q(z<=X,"value larger than maximum allowed value"),q(te<=z,"value smaller than minimum allowed value")}function q(z,X){if(!z)throw new Error(X||"Failed assertion")}x._augment=function(z){return z._isBuffer=!0,z._get=z.get,z._set=z.set,z.get=F.get,z.set=F.set,z.write=F.write,z.toString=F.toString,z.toLocaleString=F.toString,z.toJSON=F.toJSON,z.copy=F.copy,z.slice=F.slice,z.readUInt8=F.readUInt8,z.readUInt16LE=F.readUInt16LE,z.readUInt16BE=F.readUInt16BE,z.readUInt32LE=F.readUInt32LE,z.readUInt32BE=F.readUInt32BE,z.readInt8=F.readInt8,z.readInt16LE=F.readInt16LE,z.readInt16BE=F.readInt16BE,z.readInt32LE=F.readInt32LE,z.readInt32BE=F.readInt32BE,z.readFloatLE=F.readFloatLE,z.readFloatBE=F.readFloatBE,z.readDoubleLE=F.readDoubleLE,z.readDoubleBE=F.readDoubleBE,z.writeUInt8=F.writeUInt8,z.writeUInt16LE=F.writeUInt16LE,z.writeUInt16BE=F.writeUInt16BE,z.writeUInt32LE=F.writeUInt32LE,z.writeUInt32BE=F.writeUInt32BE,z.writeInt8=F.writeInt8,z.writeInt16LE=F.writeInt16LE,z.writeInt16BE=F.writeInt16BE,z.writeInt32LE=F.writeInt32LE,z.writeInt32BE=F.writeInt32BE,z.writeFloatLE=F.writeFloatLE,z.writeFloatBE=F.writeFloatBE,z.writeDoubleLE=F.writeDoubleLE,z.writeDoubleBE=F.writeDoubleBE,z.fill=F.fill,z.inspect=F.inspect,z.toArrayBuffer=F.toArrayBuffer,z}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,i,s){(function(o,a,b,h,d,f,p,g,y){var b=n("buffer").Buffer,w=4,x=new b(w);x.fill(0),i.exports={hash:function(S,_,O,T){for(var E=_(function(M,$){M.length%w!=0&&(L=M.length+(w-M.length%w),M=b.concat([M,x],L));for(var L,N=[],V=$?M.readInt32BE:M.readInt32LE,U=0;U<M.length;U+=w)N.push(V.call(M,U));return N}(S=b.isBuffer(S)?S:new b(S),T),8*S.length),_=T,P=new b(O),I=_?P.writeInt32BE:P.writeInt32LE,A=0;A<E.length;A++)I.call(P,E[A],4*A,!0);return P}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,i,s){(function(o,a,b,h,d,f,p,g,y){var b=n("buffer").Buffer,w=n("./sha"),x=n("./sha256"),S=n("./rng"),_={sha1:w,sha256:x,md5:n("./md5")},O=64,T=new b(O);function E(M,$){var L=_[M=M||"sha1"],N=[];return L||P("algorithm:",M,"is not yet supported"),{update:function(V){return b.isBuffer(V)||(V=new b(V)),N.push(V),V.length,this},digest:function(V){var U=b.concat(N),U=$?function(F,H,K){b.isBuffer(H)||(H=new b(H)),b.isBuffer(K)||(K=new b(K)),H.length>O?H=F(H):H.length<O&&(H=b.concat([H,T],O));for(var ie=new b(O),he=new b(O),me=0;me<O;me++)ie[me]=54^H[me],he[me]=92^H[me];return K=F(b.concat([ie,K])),F(b.concat([he,K]))}(L,$,U):L(U);return N=null,V?U.toString(V):U}}}function P(){var M=[].slice.call(arguments).join(" ");throw new Error([M,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}T.fill(0),s.createHash=function(M){return E(M)},s.createHmac=E,s.randomBytes=function(M,$){if(!$||!$.call)return new b(S(M));try{$.call(this,void 0,new b(S(M)))}catch(L){$(L)}};var I,A=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],D=function(M){s[M]=function(){P("sorry,",M,"is not implemented yet")}};for(I in A)D(A[I])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){var b=n("./helpers");function w(P,I){P[I>>5]|=128<<I%32,P[14+(I+64>>>9<<4)]=I;for(var A=1732584193,D=-271733879,M=-1732584194,$=271733878,L=0;L<P.length;L+=16){var N=A,V=D,U=M,F=$,A=S(A,D,M,$,P[L+0],7,-680876936),$=S($,A,D,M,P[L+1],12,-389564586),M=S(M,$,A,D,P[L+2],17,606105819),D=S(D,M,$,A,P[L+3],22,-1044525330);A=S(A,D,M,$,P[L+4],7,-176418897),$=S($,A,D,M,P[L+5],12,1200080426),M=S(M,$,A,D,P[L+6],17,-1473231341),D=S(D,M,$,A,P[L+7],22,-45705983),A=S(A,D,M,$,P[L+8],7,1770035416),$=S($,A,D,M,P[L+9],12,-1958414417),M=S(M,$,A,D,P[L+10],17,-42063),D=S(D,M,$,A,P[L+11],22,-1990404162),A=S(A,D,M,$,P[L+12],7,1804603682),$=S($,A,D,M,P[L+13],12,-40341101),M=S(M,$,A,D,P[L+14],17,-1502002290),A=_(A,D=S(D,M,$,A,P[L+15],22,1236535329),M,$,P[L+1],5,-165796510),$=_($,A,D,M,P[L+6],9,-1069501632),M=_(M,$,A,D,P[L+11],14,643717713),D=_(D,M,$,A,P[L+0],20,-373897302),A=_(A,D,M,$,P[L+5],5,-701558691),$=_($,A,D,M,P[L+10],9,38016083),M=_(M,$,A,D,P[L+15],14,-660478335),D=_(D,M,$,A,P[L+4],20,-405537848),A=_(A,D,M,$,P[L+9],5,568446438),$=_($,A,D,M,P[L+14],9,-1019803690),M=_(M,$,A,D,P[L+3],14,-187363961),D=_(D,M,$,A,P[L+8],20,1163531501),A=_(A,D,M,$,P[L+13],5,-1444681467),$=_($,A,D,M,P[L+2],9,-51403784),M=_(M,$,A,D,P[L+7],14,1735328473),A=O(A,D=_(D,M,$,A,P[L+12],20,-1926607734),M,$,P[L+5],4,-378558),$=O($,A,D,M,P[L+8],11,-2022574463),M=O(M,$,A,D,P[L+11],16,1839030562),D=O(D,M,$,A,P[L+14],23,-35309556),A=O(A,D,M,$,P[L+1],4,-1530992060),$=O($,A,D,M,P[L+4],11,1272893353),M=O(M,$,A,D,P[L+7],16,-155497632),D=O(D,M,$,A,P[L+10],23,-1094730640),A=O(A,D,M,$,P[L+13],4,681279174),$=O($,A,D,M,P[L+0],11,-358537222),M=O(M,$,A,D,P[L+3],16,-722521979),D=O(D,M,$,A,P[L+6],23,76029189),A=O(A,D,M,$,P[L+9],4,-640364487),$=O($,A,D,M,P[L+12],11,-421815835),M=O(M,$,A,D,P[L+15],16,530742520),A=T(A,D=O(D,M,$,A,P[L+2],23,-995338651),M,$,P[L+0],6,-198630844),$=T($,A,D,M,P[L+7],10,1126891415),M=T(M,$,A,D,P[L+14],15,-1416354905),D=T(D,M,$,A,P[L+5],21,-57434055),A=T(A,D,M,$,P[L+12],6,1700485571),$=T($,A,D,M,P[L+3],10,-1894986606),M=T(M,$,A,D,P[L+10],15,-1051523),D=T(D,M,$,A,P[L+1],21,-2054922799),A=T(A,D,M,$,P[L+8],6,1873313359),$=T($,A,D,M,P[L+15],10,-30611744),M=T(M,$,A,D,P[L+6],15,-1560198380),D=T(D,M,$,A,P[L+13],21,1309151649),A=T(A,D,M,$,P[L+4],6,-145523070),$=T($,A,D,M,P[L+11],10,-1120210379),M=T(M,$,A,D,P[L+2],15,718787259),D=T(D,M,$,A,P[L+9],21,-343485551),A=E(A,N),D=E(D,V),M=E(M,U),$=E($,F)}return Array(A,D,M,$)}function x(P,I,A,D,M,$){return E((I=E(E(I,P),E(D,$)))<<M|I>>>32-M,A)}function S(P,I,A,D,M,$,L){return x(I&A|~I&D,P,I,M,$,L)}function _(P,I,A,D,M,$,L){return x(I&D|A&~D,P,I,M,$,L)}function O(P,I,A,D,M,$,L){return x(I^A^D,P,I,M,$,L)}function T(P,I,A,D,M,$,L){return x(A^(I|~D),P,I,M,$,L)}function E(P,I){var A=(65535&P)+(65535&I);return(P>>16)+(I>>16)+(A>>16)<<16|65535&A}i.exports=function(P){return b.hash(P,w,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){i.exports=function(b){for(var w,x=new Array(b),S=0;S<b;S++)!(3&S)&&(w=4294967296*Math.random()),x[S]=w>>>((3&S)<<3)&255;return x}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){var b=n("./helpers");function w(_,O){_[O>>5]|=128<<24-O%32,_[15+(O+64>>9<<4)]=O;for(var T,E,P,I=Array(80),A=1732584193,D=-271733879,M=-1732584194,$=271733878,L=-1009589776,N=0;N<_.length;N+=16){for(var V=A,U=D,F=M,H=$,K=L,ie=0;ie<80;ie++){I[ie]=ie<16?_[N+ie]:S(I[ie-3]^I[ie-8]^I[ie-14]^I[ie-16],1);var he=x(x(S(A,5),(he=D,E=M,P=$,(T=ie)<20?he&E|~he&P:!(T<40)&&T<60?he&E|he&P|E&P:he^E^P)),x(x(L,I[ie]),(T=ie)<20?1518500249:T<40?1859775393:T<60?-1894007588:-899497514)),L=$,$=M,M=S(D,30),D=A,A=he}A=x(A,V),D=x(D,U),M=x(M,F),$=x($,H),L=x(L,K)}return Array(A,D,M,$,L)}function x(_,O){var T=(65535&_)+(65535&O);return(_>>16)+(O>>16)+(T>>16)<<16|65535&T}function S(_,O){return _<<O|_>>>32-O}i.exports=function(_){return b.hash(_,w,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){function b(O,T){var E=(65535&O)+(65535&T);return(O>>16)+(T>>16)+(E>>16)<<16|65535&E}function w(O,T){var E,P=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),I=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),A=new Array(64);O[T>>5]|=128<<24-T%32,O[15+(T+64>>9<<4)]=T;for(var D,M,$=0;$<O.length;$+=16){for(var L=I[0],N=I[1],V=I[2],U=I[3],F=I[4],H=I[5],K=I[6],ie=I[7],he=0;he<64;he++)A[he]=he<16?O[he+$]:b(b(b((M=A[he-2],S(M,17)^S(M,19)^_(M,10)),A[he-7]),(M=A[he-15],S(M,7)^S(M,18)^_(M,3))),A[he-16]),E=b(b(b(b(ie,S(M=F,6)^S(M,11)^S(M,25)),F&H^~F&K),P[he]),A[he]),D=b(S(D=L,2)^S(D,13)^S(D,22),L&N^L&V^N&V),ie=K,K=H,H=F,F=b(U,E),U=V,V=N,N=L,L=b(E,D);I[0]=b(L,I[0]),I[1]=b(N,I[1]),I[2]=b(V,I[2]),I[3]=b(U,I[3]),I[4]=b(F,I[4]),I[5]=b(H,I[5]),I[6]=b(K,I[6]),I[7]=b(ie,I[7])}return I}var x=n("./helpers"),S=function(O,T){return O>>>T|O<<32-T},_=function(O,T){return O>>>T};i.exports=function(O){return x.hash(O,w,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){s.read=function(b,w,x,S,$){var O,T,E=8*$-S-1,P=(1<<E)-1,I=P>>1,A=-7,D=x?$-1:0,M=x?-1:1,$=b[w+D];for(D+=M,O=$&(1<<-A)-1,$>>=-A,A+=E;0<A;O=256*O+b[w+D],D+=M,A-=8);for(T=O&(1<<-A)-1,O>>=-A,A+=S;0<A;T=256*T+b[w+D],D+=M,A-=8);if(O===0)O=1-I;else{if(O===P)return T?NaN:1/0*($?-1:1);T+=Math.pow(2,S),O-=I}return($?-1:1)*T*Math.pow(2,O-S)},s.write=function(b,w,x,S,_,L){var T,E,P=8*L-_-1,I=(1<<P)-1,A=I>>1,D=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=S?0:L-1,$=S?1:-1,L=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(E=isNaN(w)?1:0,T=I):(T=Math.floor(Math.log(w)/Math.LN2),w*(S=Math.pow(2,-T))<1&&(T--,S*=2),2<=(w+=1<=T+A?D/S:D*Math.pow(2,1-A))*S&&(T++,S/=2),I<=T+A?(E=0,T=I):1<=T+A?(E=(w*S-1)*Math.pow(2,_),T+=A):(E=w*Math.pow(2,A-1)*Math.pow(2,_),T=0));8<=_;b[x+M]=255&E,M+=$,E/=256,_-=8);for(T=T<<_|E,P+=_;0<P;b[x+M]=255&T,M+=$,T/=256,P-=8);b[x+M-$]|=128*L}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,i,s){(function(o,a,c,h,d,f,p,g,y){var b,w,x;function S(){}(o=i.exports={}).nextTick=(w=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,w?function(_){return window.setImmediate(_)}:x?(b=[],window.addEventListener("message",function(_){var O=_.source;O!==window&&O!==null||_.data!=="process-tick"||(_.stopPropagation(),0<b.length&&b.shift()())},!0),function(_){b.push(_),window.postMessage("process-tick","*")}):function(_){setTimeout(_,0)}),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=S,o.addListener=S,o.once=S,o.off=S,o.removeListener=S,o.removeAllListeners=S,o.emit=S,o.binding=function(_){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(_){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(w_e);var __e=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],sM=__e;sM=sM.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)});sM.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function S_e(r,e){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function C_e(r){var e=S_e(r,"string");return typeof e=="symbol"?e:String(e)}function an(r,e,n){return e=C_e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var ri={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},Vs,Tf;Vs={},an(Vs,"".concat(ri.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(ri.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),an(Vs,"".concat(ri.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(ri.position,`;
  `)}),an(Vs,"".concat(ri.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(ri.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),an(Vs,"".concat(ri.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(ri.pointSize,`;
    `)}),an(Vs,"".concat(ri.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(ri.diffuseColor,`;
  `)}),an(Vs,"".concat(ri.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(ri.fragColor,`;
  `)}),an(Vs,"".concat(ri.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(ri.emissive,`;
    `)}),an(Vs,"".concat(ri.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(ri.roughness,`;
    `)}),an(Vs,"".concat(ri.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(ri.metalness,`;
    `)}),an(Vs,"".concat(ri.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(ri.ao,`;
    `)}),an(Vs,"".concat(ri.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(ri.bump," - (dot(").concat(ri.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),an(Vs,"".concat(ri.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(ri.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(ri.depthAlpha,`;
    `)});Tf={},an(Tf,"".concat(ri.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(ri.position,`, 1.0 );
  `)}),an(Tf,"".concat(ri.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(ri.position,`;
  `)}),an(Tf,"".concat(ri.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(ri.diffuseColor,`;
  `)}),an(Tf,"".concat(ri.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(ri.fragColor,`;
  `)});var Ls;Ls={},an(Ls,"".concat(ri.position),"*"),an(Ls,"".concat(ri.positionRaw),"*"),an(Ls,"".concat(ri.normal),"*"),an(Ls,"".concat(ri.pointSize),["PointsMaterial"]),an(Ls,"".concat(ri.diffuseColor),"*"),an(Ls,"".concat(ri.fragColor),"*"),an(Ls,"".concat(ri.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),an(Ls,"".concat(ri.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),an(Ls,"".concat(ri.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),an(Ls,"".concat(ri.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),an(Ls,"".concat(ri.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),an(Ls,"".concat(ri.depthAlpha),"*");new Qr;new re;ct.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Xe(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};zo.line={uniforms:av.merge([ct.common,ct.fog,ct.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new re;new re;new Oi;new Oi;new Oi;new re;new gt;new Q9;new re;new Qr;new Hr;new Oi;const k_e={key:0,args:[0,1,64]},T_e={key:1,args:[.5,1,64]},M_e={key:2},E_e=["tone-mapped","map","side","color"];new rt(16777215);class M3 extends sn{constructor(){const e=M3.SkyShader,n=new Ps({name:e.name,uniforms:av.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:ss,depthWrite:!1});super(new Xh(1,1,1),n),this.isSky=!0}}M3.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new re},up:{value:new re(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var P_e={exports:{}};(function(r,e){(function(n,i){r.exports=i()})(O_e,function(){var n=function(){function i(y){return a.appendChild(y.dom),y}function s(y){for(var b=0;b<a.children.length;b++)a.children[b].style.display=b===y?"block":"none";o=y}var o=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(y){y.preventDefault(),s(++o%a.children.length)},!1);var c=(performance||Date).now(),h=c,d=0,f=i(new n.Panel("FPS","#0ff","#002")),p=i(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var g=i(new n.Panel("MB","#f08","#201"));return s(0),{REVISION:16,dom:a,addPanel:i,showPanel:s,begin:function(){c=(performance||Date).now()},end:function(){d++;var y=(performance||Date).now();if(p.update(y-c,200),y>h+1e3&&(f.update(1e3*d/(y-h),100),h=y,d=0,g)){var b=performance.memory;g.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return y},update:function(){c=this.end()},domElement:a,setMode:s}};return n.Panel=function(i,s,o){var a=1/0,c=0,h=Math.round,d=h(window.devicePixelRatio||1),f=80*d,p=48*d,g=3*d,y=2*d,b=3*d,w=15*d,x=74*d,S=30*d,_=document.createElement("canvas");_.width=f,_.height=p,_.style.cssText="width:80px;height:48px";var O=_.getContext("2d");return O.font="bold "+9*d+"px Helvetica,Arial,sans-serif",O.textBaseline="top",O.fillStyle=o,O.fillRect(0,0,f,p),O.fillStyle=s,O.fillText(i,g,y),O.fillRect(b,w,x,S),O.fillStyle=o,O.globalAlpha=.9,O.fillRect(b,w,x,S),{dom:_,update:function(T,E){a=Math.min(a,T),c=Math.max(c,T),O.fillStyle=o,O.globalAlpha=1,O.fillRect(0,0,f,w),O.fillStyle=s,O.fillText(h(T)+" "+i+" ("+h(a)+"-"+h(c)+")",g,y),O.drawImage(_,b+d,w,x-d,S,b,w,x-d,S),O.fillRect(b+x-d,w,d,S),O.fillStyle=o,O.globalAlpha=.9,O.fillRect(b+x-d,w,d,h((1-T/E)*S))}}},n})})(P_e);var A_e=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,R_e=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const Sv=new re(0,0,0),E3=new re(0,0,0),I_e=new re(0,0,0);function TN(r,e,n){const i=Sv.setFromMatrixPosition(r.matrixWorld);i.project(e);const s=n.width/2,o=n.height/2;return[(Number.isNaN(i.x)?0:i.x)*s+s,-(i.y*o)+o]}function D_e(r,e){const n=Sv.setFromMatrixPosition(r.matrixWorld),i=E3.setFromMatrixPosition(e.matrixWorld),s=n.sub(i),o=e.getWorldDirection(I_e);return s.angleTo(o)>Math.PI/2}function N_e(r,e,n,i){const s=Sv.setFromMatrixPosition(r.matrixWorld),o=s.clone();o.project(e),n.setFromCamera(new Xe(o.x,o.y),e);const a=n.intersectObjects(i,!0);if(a.length>0){const c=a[0].distance;return s.distanceTo(n.ray.origin)<c}return!0}function $_e(r,e){if(e instanceof Yo)return e.zoom;if(e instanceof rn){const n=Sv.setFromMatrixPosition(r.matrixWorld),i=E3.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=n.distanceTo(i);return 1/(2*Math.tan(s/2)*o)}else return 1}function V_e(r,e,n){if(e instanceof rn||e instanceof Yo){const i=Sv.setFromMatrixPosition(r.matrixWorld),s=E3.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(s),a=(n[1]-n[0])/(e.far-e.near),c=n[1]-a*e.far;return Math.round(a*o+c)}}const oM=r=>Math.abs(r)<1e-10?0:r;function y7(r,e,n=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=oM(e[s]*r.elements[s])+(s!==15?",":")");return n+i}const L_e=(r=>e=>y7(e,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),B_e=(r=>(e,n)=>y7(e,r(n),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]),U_e=["geometry","material"];new Wh;var ad=Object.freeze({Linear:Object.freeze({None:function(r){return r},In:function(r){return r},Out:function(r){return r},InOut:function(r){return r}}),Quadratic:Object.freeze({In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}}),Cubic:Object.freeze({In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}}),Quartic:Object.freeze({In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}}),Quintic:Object.freeze({In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}}),Sinusoidal:Object.freeze({In:function(r){return 1-Math.sin((1-r)*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.sin(Math.PI*(.5-r)))}}),Exponential:Object.freeze({In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}}),Circular:Object.freeze({In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}}),Elastic:Object.freeze({In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(r){var e=1.70158;return r===1?1:r*r*((e+1)*r-e)},Out:function(r){var e=1.70158;return r===0?0:--r*r*((e+1)*r+e)+1},InOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)}}),Bounce:Object.freeze({In:function(r){return 1-ad.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?ad.Bounce.In(r*2)*.5:ad.Bounce.Out(r*2-1)*.5+.5}}),generatePow:function(r){return r===void 0&&(r=4),r=r<Number.EPSILON?Number.EPSILON:r,r=r>1e4?1e4:r,{In:function(e){return Math.pow(e,r)},Out:function(e){return 1-Math.pow(1-e,r)},InOut:function(e){return e<.5?Math.pow(e*2,r)/2:(1-Math.pow(2-e*2,r))/2+.5}}}}),_0=function(){return performance.now()},F_e=function(){function r(){this._tweens={},this._tweensAddedDuringUpdate={}}return r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},r.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},r.prototype.update=function(e,n){e===void 0&&(e=_0()),n===void 0&&(n=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!n;o&&o.update(e,a)===!1&&!n&&delete this._tweens[i[s]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},r}(),Uf={Linear:function(r,e){var n=r.length-1,i=n*e,s=Math.floor(i),o=Uf.Utils.Linear;return e<0?o(r[0],r[1],i):e>1?o(r[n],r[n-1],n-i):o(r[s],r[s+1>n?n:s+1],i-s)},Bezier:function(r,e){for(var n=0,i=r.length-1,s=Math.pow,o=Uf.Utils.Bernstein,a=0;a<=i;a++)n+=s(1-e,i-a)*s(e,a)*r[a]*o(i,a);return n},CatmullRom:function(r,e){var n=r.length-1,i=n*e,s=Math.floor(i),o=Uf.Utils.CatmullRom;return r[0]===r[n]?(e<0&&(s=Math.floor(i=n*(1+e))),o(r[(s-1+n)%n],r[s],r[(s+1)%n],r[(s+2)%n],i-s)):e<0?r[0]-(o(r[0],r[0],r[1],r[1],-i)-r[0]):e>1?r[n]-(o(r[n],r[n],r[n-1],r[n-1],i-n)-r[n]):o(r[s?s-1:0],r[s],r[n<s+1?n:s+1],r[n<s+2?n:s+2],i-s)},Utils:{Linear:function(r,e,n){return(e-r)*n+r},Bernstein:function(r,e){var n=Uf.Utils.Factorial;return n(r)/n(e)/n(r-e)},Factorial:function(){var r=[1];return function(e){var n=1;if(r[e])return r[e];for(var i=e;i>1;i--)n*=i;return r[e]=n,n}}(),CatmullRom:function(r,e,n,i,s){var o=(n-r)*.5,a=(i-e)*.5,c=s*s,h=s*c;return(2*e-2*n+o+a)*h+(-3*e+3*n-2*o-a)*c+o*s+e}}},z_e=function(){function r(){}return r.nextId=function(){return r._nextId++},r._nextId=0,r}(),aM=new F_e,X_e=function(){function r(e,n){n===void 0&&(n=aM),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ad.Linear.None,this._interpolationFunction=Uf.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=z_e.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return r.prototype.getId=function(){return this._id},r.prototype.isPlaying=function(){return this._isPlaying},r.prototype.isPaused=function(){return this._isPaused},r.prototype.getDuration=function(){return this._duration},r.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},r.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},r.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},r.prototype.start=function(e,n){if(e===void 0&&(e=_0()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},r.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},r.prototype._setupProperties=function(e,n,i,s,o){for(var a in i){var c=e[a],h=Array.isArray(c),d=h?"array":typeof c,f=!h&&Array.isArray(i[a]);if(!(d==="undefined"||d==="function")){if(f){var p=i[a];if(p.length===0)continue;for(var g=[c],y=0,b=p.length;y<b;y+=1){var w=this._handleRelativeValue(c,p[y]);if(isNaN(w)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}g.push(w)}f&&(i[a]=g)}if((d==="object"||h)&&c&&!f){n[a]=h?[]:{};var x=c;for(var S in x)n[a][S]=x[S];s[a]=h?[]:{};var p=i[a];if(!this._isDynamic){var _={};for(var S in p)_[S]=p[S];i[a]=p=_}this._setupProperties(x,n[a],p,s[a],o)}else(typeof n[a]>"u"||o)&&(n[a]=c),h||(n[a]*=1),f?s[a]=i[a].slice().reverse():s[a]=n[a]||0}}},r.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},r.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},r.prototype.pause=function(e){return e===void 0&&(e=_0()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},r.prototype.resume=function(e){return e===void 0&&(e=_0()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},r.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},r.prototype.group=function(e){return e===void 0&&(e=aM),this._group=e,this},r.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},r.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},r.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},r.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},r.prototype.easing=function(e){return e===void 0&&(e=ad.Linear.None),this._easingFunction=e,this},r.prototype.interpolation=function(e){return e===void 0&&(e=Uf.Linear),this._interpolationFunction=e,this},r.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},r.prototype.onStart=function(e){return this._onStartCallback=e,this},r.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},r.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},r.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},r.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},r.prototype.onStop=function(e){return this._onStopCallback=e,this},r.prototype.update=function(e,n){var i;if(e===void 0&&(e=_0()),n===void 0&&(n=!0),this._isPaused)return!0;var s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;n&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,a=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),c=this._duration+this._repeat*a,h=this._calculateElapsedPortion(o,a,c),d=this._easingFunction(h),f=this._calculateCompletionStatus(o,a);if(f==="repeat"&&this._processRepetition(o,a),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),f==="about-to-repeat"&&this._processRepetition(o,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),f==="repeat"||f==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(f==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1)}return f!=="completed"},r.prototype._calculateElapsedPortion=function(e,n,i){if(this._duration===0||e>i)return 1;var s=e%n,o=Math.min(s/this._duration,1);return o===0&&e!==0&&e%this._duration===0?1:o},r.prototype._calculateCompletionStatus=function(e,n){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},r.prototype._processRepetition=function(e,n){var i=Math.min(Math.trunc((e-this._duration)/n)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=i);for(var s in this._valuesStartRepeat){var o=this._valuesEnd[s];!this._yoyo&&typeof o=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(o)),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=n*i},r.prototype._updateProperties=function(e,n,i,s){for(var o in i)if(n[o]!==void 0){var a=n[o]||0,c=i[o],h=Array.isArray(e[o]),d=Array.isArray(c),f=!h&&d;f?e[o]=this._interpolationFunction(c,s):typeof c=="object"&&c?this._updateProperties(e[o],a,c,s):(c=this._handleRelativeValue(a,c),typeof c=="number"&&(e[o]=a+(c-a)*s))}},r.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},r.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},r}(),dl=aM;dl.getAll.bind(dl);dl.removeAll.bind(dl);dl.add.bind(dl);dl.remove.bind(dl);var W_e=dl.update.bind(dl);class Q_e{constructor(){this.TileType={Brick:1,Iron:2,Grass:3,Water:4,Home:9},this.Direction={None:0,Up:1,Right:2,Down:3,Left:4},this.CampType={Player:"Player",Enermy:"Enermy"},this.ObjectType={Tank:"Tank",Bullet:"Bullet"},this.GameState={Prepare:"Prepare",Gaming:"Gaming",Finish:"Finish"},this.maps=this.getMapDatas()}makeTween(e){var n=new X_e(e);return n}makeTweenTankAppear(e,n){e.position.y=-1,this.makeTween(e.position).to({y:0},1e3).easing(ad.Back.Out).onComplete(n).start()}randInt(e,n){if(n<e)return e;var i=n+1-e;return Math.floor(Math.random()*i)+e}randSplice(e){var n=this.randInt(0,e.length-1);return e.splice(n,1)[0]}formatNum(e,n){if(typeof e=="number")return this.formatNumImpl(e,n);if(e instanceof re)return e.x=this.formatNumImpl(e.x,n),e.y=this.formatNumImpl(e.y,n),e.z=this.formatNumImpl(e.z,n),e}formatNumImpl(e,n){if(n==0)return Math.abs(e)<1e-4?0:e;var i=Math.round(e/n);return n*i}getDirectionRotation(e){return[0,0,-Math.PI/2,Math.PI,Math.PI/2][e]}isEqual(e,n){return Math.abs(e-n)<=1e-4}removeArrayValue(e,n){for(var i=e.indexOf(n);i>=0;)e.splice(i,1),i=e.indexOf(n)}removeArrayValueIf(e,n){for(var i=e.findIndex(n);i>=0;)e.splice(i,1),i=e.indexOf(n)}getMapDatas(){const e=this.getSrcMaps(),n=[];for(let i=0;i<e.length;++i){const s=e[i],o=this.getMapData(s);n.push(o)}return n}getMapData(e){var n=e.split(`
`);n.shift(),n.pop();var i=[];for(let o=0;o<n.length;o++){var s=n[o].trim().split("	").map(c=>parseInt(c)||0);i[o]=s}return i}getDirectionVector(e){var i=[null,new re(0,0,-1),new re(1,0,0),new re(0,0,1),new re(-1,0,0)][e];return i?i.clone():null}getSrcMaps(){return[`第1关
            0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
            0																									0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0										1	1			1	1										0
            0										1	1			1	1										0
            1	1			1	1	1	1											1	1	1	1			1	1
            2	2			1	1	1	1											1	1	1	1			2	2
            0										1	1			1	1										0
            0										1	1	1	1	1	1										0
            0		1	1			1	1			1	1	1	1	1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1				1	1	1	1			1	1			1	1			0
            0											1	9		1											0
            0	0	0	0	0	0	0	0	0	0	0	1			1	0	0	0	0	0	0	0	0	0	0	0
`]}}const ht=new Q_e;class H_e{constructor(){this.Rows=24,this.Cols=26,this.Width=this.Cols*.5,this.Height=this.Rows*.5,this.HalfWidth=this.Width/2,this.HalfHeight=this.Height/2}getRCByIndex(e){let n={};return n.r=Math.floor(e/this.Cols),n.c=e%this.Cols,n}getIndexByRC(e,n){if(typeof e=="object")var{r:e,c:n}=e;return e*this.Cols+n}getIndexByPosition(e){return this.getIndexByRC(getRCByPosition(e))}getPositionByRC(e,n){if(typeof e=="object")var{r:e,c:n}=e;return new re(n*.5-6.25,0,e*.5-5.75)}getRCByPosition(e){let n={};return n.r=Math.floor((e.z+6)/.5),n.c=Math.floor((e.x+6.5)/.5),n}isIndexInBound(e){return e>=0&&e<this.Rows*this.Cols}isRCInBound(e,n){if(typeof e=="object")var{r:e,c:n}=e;return e>=0&&e<this.Rows&&n>=0&&n<this.Cols}isGridInBound(e){return!(e.minR<0||e.minC<0||e.maxR>=this.Rows||e.maxC>=this.Cols)}getStandGrid(e,n){let i={};const s=new re(e.x-n/2,0,e.z-n/2),o=new re(e.x+n/2,0,e.z+n/2),a=this.getRCByPosition(s),c=this.getRCByPosition(o);return i.minR=Math.min(a.r,c.r),i.minC=Math.min(a.c,c.c),i.maxR=Math.max(a.r,c.r),i.maxC=Math.max(a.c,c.c),Number.isInteger(o.x/.5)&&(i.maxC-=1),Number.isInteger(o.z/.5)&&(i.maxR-=1),i}}var sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function G_e(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),n}var Cv=function(e,n,i,s,o){var a=s-e,c=o-n;return a*a+c*c<=i*i},Y_e=function(e,n,i,s,o,a){var c=e-s,h=o-n,d=i+a;return c*c+h*h<=d*d},p_=function(e,n,i,s,o,a,c){var h=[o-e,a-n],d=[i-e,s-n],f=b2(d,d),p=b2(h,d),g=p/f;g=g<0?0:g,g=g>1?1:g;var y=[d[0]*g+e-o,d[1]*g+n-a],b=b2(y,y);return b<=c*c};function b2(r,e){return r[0]*e[0]+r[1]*e[1]}var j_e=p_,q_e=function(e,n,i,s,o,a,c){return j_e(s,o,a,c,e,n,i)},P3=function(e,n,i,s,o,a,c){var h=i/2,d=s/2,f=Math.abs(o-(e+i/2)),p=Math.abs(a-(n+s/2));if(f>h+c||p>d+c)return!1;if(f<=h||p<=d)return!0;var g=f-h,y=p-d;return g*g+y*y<=c*c},Z_e=P3,K_e=function(e,n,i,s,o,a,c){return Z_e(s,o,a,c,e,n,i)};function x2(r,e,n,i){return Math.sqrt(Math.pow(r-n,2)+Math.pow(e-i,2))}var A3=function(e,n,i,s,o,a,c){return c=c||1,Math.abs(x2(e,n,i,s)-(x2(e,n,o,a)+x2(i,s,o,a)))<=c};const J_e=A3;var kv=function(e,n,i,s){var o=e.length,a=!1,c,h;for(c=0,h=o-2;c<o;c+=2)e[c+1]>i!=e[h+1]>i&&n<(e[h]-e[c])*(i-e[c+1])/(e[h+1]-e[c+1])+e[c]&&(a=!a),h=c;if(a)return!0;for(c=0;c<o;c+=2){var d=e[c],f=e[c+1],p,g;if(c===o-2?(p=e[0],g=e[1]):(p=e[c+2],g=e[c+3]),J_e(d,f,p,g,n,i,s))return!0}return!1},eSe=kv,MN=p_,v7=function(e,n,i,s,o){if(eSe(e,n,i,o))return!0;for(var a=e.length,c=0;c<a-2;c+=2)if(MN(e[c],e[c+1],e[c+2],e[c+3],n,i,s))return!0;return MN(e[0],e[1],e[a-2],e[a-1],n,i,s)},tSe=v7,iSe=function(e,n,i,s,o){return tSe(s,e,n,i,o)},b7=10,AO,RO,R3;function x7(){AO=[],RO=[];for(var r=0;r<=b7;r++){var e=4<<r;AO[r]=.5/Math.cos(4*Math.acos(0)/e),RO[r]=.5/(Math.cos(2*Math.acos(0)/e)*Math.cos(2*Math.acos(0)/e))}R3=!0}function O7(r,e,n,i,s,o,a){for(var c=1;c<=b7;c++){var h=(n+s)*AO[c],d=(i+o)*AO[c],f=r-h,p=e-d;if(f*f+p*p<=a)return!0;var g=s-h,y=o-d;if(f*g+p*y>=0&&f*g+p*y<=g*g+y*y&&(p*g-f*y>=0||a*(g*g+y*y)>=(p*g-f*y)*(p*g-f*y)))return!0;var b=n-h,w=i-d;if(f*b+p*w>=0&&f*b+p*w<=b*b+w*w&&(p*b-f*w<=0||a*(b*b+w*w)>=(p*b-f*w)*(p*b-f*w)))return!0;var x=(n+h)*RO[c],S=(i+d)*RO[c];if((x-r)*(x-r)+(S-e)*(S-e)<a){s=h,o=d;continue}var _=h-x+h,O=d-S+d;if((_-r)*(_-r)+(O-e)*(O-e)<a){n=h,i=d;continue}var T=x-h,E=S-d;if(p*T-f*E<=0||a*(T*T+E*E)>(p*T-f*E)*(p*T-f*E)){if(f*T+p*E>0){if(Math.abs(f*T+p*E)<=T*T+E*E||(r-x)*(n-x)+(e-S)*(i-S)>=0){s=h,o=d;continue}}else if(-(f*T+p*E)<=T*T+E*E||(r-_)*(s-_)+(e-O)*(o-O)>=0){n=h,i=d;continue}}return!1}return!1}function nSe(r,e,n,i,s,o,a,c){R3||x7();var h=Math.abs(s-r)*c,d=Math.abs(o-e)*a;n*=c,i*=a;var f=a*c;return h*h+(i-d)*(i-d)<=f*f||(n-h)*(n-h)+d*d<=f*f||h*i+d*n<=n*i||(h*i+d*n-n*i)*(h*i+d*n-n*i)<=f*f*(n*n+i*i)&&h*n-d*i>=-i*i&&h*n-d*i<=n*n?!0:(h-n)*(h-n)+(d-i)*(d-i)<=f*f||h<=n&&d-f<=i||d<=i&&h-f<=n?O7(h,d,n,0,0,i,f*f):!1}function rSe(r,e,n,i,s,o,a){R3||x7();var c=Math.abs(s-r),h=Math.abs(o-e);return c*c+(i-h)*(i-h)<=a*a||(n-c)*(n-c)+h*h<=a*a||c*i+h*n<=n*i||(c*i+h*n-n*i)*(c*i+h*n-n*i)<=a*a*(n*n+i*i)&&c*n-h*i>=-i*i&&c*n-h*i<=n*n?!0:(c-n)*(c-n)+(h-i)*(h-i)<=a*a||c<=n&&h-a<=i||h<=i&&c-a<=n?O7(c,h,n,0,0,i,a*a):!1}var w7={ellipseCircle:rSe,ellipseEllipse:nSe},sSe=w7,_7=function(e,n,i,s,o,a,c){return sSe.ellipseCircle(e,n,i,s,o,a,c)},oSe=_7,aSe=function(e,n,i,s,o,a,c){return oSe(s,o,a,c,e,n,i)},Jc=Cv,lSe=P3,S7=function(e,n,i,s,o,a,c,h){h=h||1;var d=0;if(d+=Jc(e,n,i,s,o)?1:0,d+=Jc(e,n,i,s+a,o)?1:0,d+=Jc(e,n,i,s,o+c)?1:0,d+=Jc(e,n,i,s+a,o+c)?1:0,d===0)return lSe(s,o,a,c,e,n,i);if(d>=1&&d<=3)return!0;if(d===4)return!Jc(e,n,i-h,s,o)||!Jc(e,n,i-h,s+a,o)||!Jc(e,n,i-h,s,o+c)||!Jc(e,n,i-h,s+a,o+c)},cSe=p_,EN=Cv,C7=function(e,n,i,s,o,a,c,h){return h=h||1,cSe(s,o,a,c,e,n,i)&&!(EN(e,n,i-h,s,o)&&EN(e,n,i-h,a,c))},PN=Cv,k7=function(e,n,i,s,o,a){return a=a||1,PN(e,n,i,s,o)&&!PN(e,n,i-a,s,o)},T7=function(e,n,i,s,o,a,c,h){var d=i-e,f=s-n,p=c-o,g=h-a,y=(-f*(e-o)+d*(n-a))/(-p*f+d*g),b=(p*(n-a)-g*(e-o))/(-p*f+d*g);return y>=0&&y<=1&&b>=0&&b<=1},hSe=kv,uSe=T7,I3=function(e,n,i,s,o,a){var c=o.length;if(hSe(o,e,n,a))return!0;for(var h=0;h<c;h+=2){var d=(h+2)%c;if(uSe(e,n,i,s,o[h],o[h+1],o[d],o[d+1]))return!0}return!1},dSe=I3,fSe=function(e,n,i,s,o,a){return dSe(n,i,s,o,e,a)},D3=function(e,n){for(var i=e,s=n,o=[i,s],a,c,h,d,f,p,g=0;g<o.length;g++)for(var y=o[g],b=0;b<y.length;b+=2){var w=(b+2)%y.length,x={x:y[w+1]-y[b+1],y:y[b]-y[w]};for(a=c=null,p=0;p<i.length;p+=2)h=x.x*i[p]+x.y*i[p+1],(a===null||h<a)&&(a=h),(c===null||h>c)&&(c=h);for(d=f=null,p=0;p<s.length;p+=2)h=x.x*s[p]+x.y*s[p+1],(d===null||h<d)&&(d=h),(f===null||h>f)&&(f=h);if(c<d||f<a)return!1}return!0},pSe=D3,M7=function(e,n,i,s,o){var a=[n,i,n+s,i,n+s,i+o,n,i+o];return pSe(e,a)},N3=function(e,n,i,s,o,a,c,h){o-=e,c-=e,a-=n,h-=n;var d=Math.pow(c-o,2)/i/i+Math.pow(h-a,2)/s/s,f=2*o*(c-o)/i/i+2*a*(h-a)/s/s,p=o*o/i/i+a*a/s/s-1,g=f*f-4*d*p;if(g===0){var y=-f/2/d;return y>=0&&y<=1}else if(g>0){var b=Math.sqrt(g),w=(-f+b)/2/d,x=(-f-b)/2/d;return w>=0&&w<=1||x>=0&&x<=1}else return!1},mSe=N3,E7=function(e,n,i,s,o,a,c,h){return mSe(o,a,c,h,e,n,i,s)},gSe=kv,AN=E7,P7=function(e,n,i,s,o){if(gSe(e,n,i))return!0;for(var a=e.length,c=0;c<a-2;c+=2)if(AN(e[c],e[c+1],e[c+2],e[c+3],n,i,s,o))return!0;return AN(e[0],e[1],e[a-2],e[a-1],n,i,s,o)},m_=function(e,n,i,s,o,a){return o>=e&&o<=e+i&&a>=n&&a<=n+s},ySe=function(e,n,i,s,o,a,c,h){return e<o+c&&e+i>o&&n<a+h&&n+s>a},vSe=function(e,n,i,s,o){const a=Math.atan2(s-n,i-e)-Math.PI/2,c=o/2,h=Math.cos(a)*c,d=Math.sin(a)*c;return[e-h,n-d,i-h,s-d,i+h,s+d,e+h,n+d]};const Ub=vSe,bSe=D3,RN=I3,xSe=T7;var A7=function(e,n,i,s,o,a,c,h,d,f){return d||f?OSe(e,n,i,s,o,a,c,h,d,f):xSe(e,n,i,s,o,a,c,h)};function OSe(r,e,n,i,s,o,a,c,h,d){if(h&&d)return bSe(Ub(r,e,n,i,h),Ub(s,o,a,c,d));if(h)return RN(s,o,a,c,Ub(r,e,n,i,h));if(d)return RN(r,e,n,i,Ub(s,o,a,c,h))}var IN=m_,Fb=A7,R7=function(e,n,i,s,o,a,c,h){return IN(o,a,c,h,e,n)||IN(o,a,c,h,i,s)?!0:Fb(e,n,i,s,o,a,o+c,a)||Fb(e,n,i,s,o+c,a,o+c,a+h)||Fb(e,n,i,s,o,a+h,o+c,a+h)||Fb(e,n,i,s,o,a,o,a+h)},wSe=R7,_Se=function(e,n,i,s,o,a,c,h){return wSe(o,a,c,h,e,n,i,s)},SSe=M7,CSe=function(e,n,i,s,o){return SSe(o,e,n,i,s)},zb=N3,kSe=m_,I7=function(e,n,i,s,o,a,c,h){return kSe(o,a,c,h,e,n)||zb(e,n,i,s,o,a,o+c,a)||zb(e,n,i,s,o,a+h,o+c,a+h)||zb(e,n,i,s,o,a,o,a+h)||zb(e,n,i,s,o+c,a,o+c,a+h)},TSe=I7,MSe=function(e,n,i,s,o,a,c,h){return TSe(o,a,c,h,e,n,i,s)},ESe=S7,PSe=function(e,n,i,s,o,a,c,h){return ESe(o,a,c,e,n,i,s,h)},ASe=m_,RSe=function(e,n,i,s,o,a){return ASe(i,s,o,a,e,n)},ISe=kv,DSe=function(e,n,i,s){return ISe(i,e,n,s)},NSe=Cv,$Se=function(e,n,i,s,o){return NSe(i,s,o,e,n)},VSe=A3,LSe=function(e,n,i,s,o,a){return VSe(i,s,o,a,e,n)},D7=function(e,n,i,s,o,a){var c=Math.pow(o-e,2)/(i*i),h=Math.pow(a-n,2)/(s*s);return c+h<=1},BSe=D7,USe=function(e,n,i,s,o,a){return BSe(i,s,o,a,e,n)},FSe=k7,zSe=function(e,n,i,s,o,a){return FSe(e,n,i,s,o,a)},XSe=C7,WSe=function(e,n,i,s,o,a,c,h){return XSe(o,a,c,e,n,i,s,h)},QSe=w7,HSe=function(e,n,i,s,o,a,c,h){return QSe.ellipseEllipse(e,n,i,s,o,a,c,h)},GSe=P7,YSe=function(e,n,i,s,o){return GSe(o,e,n,i,s)},Xb={circlePoint:Cv,circleCircle:Y_e,circleLine:q_e,circleBox:K_e,circlePolygon:iSe,circleEllipse:aSe,circleOutlineBox:S7,circleOutlineLine:C7,circleOutlinePoint:k7,polygonPoint:kv,polygonLine:fSe,polygonPolygon:D3,polygonBox:M7,polygonCircle:v7,polygonEllipse:P7,boxPoint:m_,boxBox:ySe,boxLine:_Se,boxPolygon:CSe,boxCircle:P3,boxEllipse:MSe,boxCircleOutline:PSe,pointBox:RSe,pointPolygon:DSe,pointCircle:$Se,pointLine:LSe,pointEllipse:USe,pointCircleOutline:zSe,lineLine:A7,lineBox:R7,linePolygon:I3,lineCircle:p_,linePoint:A3,lineEllipse:E7,lineCircleOutline:WSe,ellipsePoint:D7,ellipseLine:N3,ellipseBox:I7,ellipseCircle:_7,ellipseEllipse:HSe,ellipsePolygon:YSe};const zs=class zs{constructor(e,n){this.shapeType=e,e==zs.Box?this.size=n:e==zs.Circle&&(this.radius=n)}get center(){return this._center}set center(e){this._center=e}intersect(e){if(this.shapeType==zs.Box&&e.shapeType==zs.Box){var n=this.center.x-this.size/2,i=this.center.z-this.size/2,s=this.size,o=this.size,a=e.center.x-e.size/2,c=e.center.z-e.size/2,h=e.size,d=e.size,f=Xb.boxBox(n,i,s,o,a,c,h,d);return f}else if(this.shapeType==zs.Box&&e.shapeType==zs.Circle){var n=this.center.x-this.size/2,i=this.center.z-this.size/2,s=this.size,o=this.size,p=e.center.x,g=e.center.z,y=e.radius,f=Xb.boxCircle(n,i,s,o,p,g,y);return f}else if(this.shapeType==zs.Circle&&e.shapeType==zs.Box){var p=this.center.x,g=this.center.z,y=this.radius,a=e.center.x-e.size/2,c=e.center.z-e.size/2,h=e.size,d=e.size,f=Xb.circleBox(p,g,y,n,i,s,o);return f}else if(this.shapeType==zs.Circle&&e.shapeType==zs.Circle){var n=this.center.x,i=this.center.z,b=this.radius,a=this.center.x,c=this.center.z,w=this.radius,f=Xb.circleCircle(n,i,b,a,c,w);return f}}};k1(zs,"Box","Box"),k1(zs,"Circle","Circle");let Rh=zs;class jSe{constructor(){this.obj=this.createObject(),this.speed=4,this.power=1,game.timer.tick(this.update.bind(this)),this.shape=new Rh(Rh.Circle,.15)}createObject(){var e=game.ResStore.bullet_player.clone();return e}get CampType(){return ht.CampType.Player}get ObjectType(){return ht.ObjectType.Bullet}get Shape(){return this.shape.center=this.obj.position,this.shape}init(e){this.tank=e;var n=e.position.clone().add(new re(0,.5,0));this.obj.position.copy(n),this.direction=e.getDirection(),this.speed=this.initBulletSpeed(),this.canHitTileTypes=this.initCanHitTileTypes(),this.power=this.initPower()}initBulletSpeed(){return this.tank.starCount<=0?4:8}initPower(){return this.tank.starCount<=2?1:2}initCanHitTileTypes(){var e=[];return e.push(ht.TileType.Home),e.push(ht.TileType.Brick),this.tank.getStarCount()>=3&&e.push(ht.TileType.Iron),e}onRemove(){}update({delta:e,elapsed:n}){var i=this.speed*e,s=ht.getDirectionVector(this.direction).multiplyScalar(i);this.obj.position.add(s)}}class qSe{constructor(){this.obj=this.createObject(),this.moveSpeed=2,this.shootDiff=.1,this.shootAcc=0,this.starCount=1,this.bullets=[],this.shape=new Rh(Rh.Box,1)}getMaxBulletCount(){return this.starCount<=1?1:2}getStarCount(){return this.starCount}createObject(){var e=game.ResStore.tank_player_1.clone();this.lightTarget=new Ni,e.add(this.lightTarget),this.lightTarget.position.set(0,.5,-10);var n=new i_(16777215);return n.position.set(0,.5,-.3),n.castShadow=!0,n.target=this.lightTarget,n.angle=Math.PI/4,n.intensity=10,n.penumbra=.2,e.add(n),this.spotLight=n,e}init(){game.onAddController.push(this.onAddController.bind(this)),game.onRemoveController.push(this.onRemoveController.bind(this))}onRemove(){ht.removeArrayValue(game.onAddController,this.onAddController.bind(this)),ht.removeArrayValue(game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e.CampType==ht.CampType.Player&&e.ObjectType==ht.ObjectType.Bullet&&this.bullets.push(e)}onRemoveController(e){e.CampType==ht.CampType.Player&&e.ObjectType==ht.ObjectType.Bullet&&ht.removeArrayValue(this.bullets,e)}get CampType(){return ht.CampType.Player}get ObjectType(){return ht.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}ITank_update({delta:e,elapsed:n}){window.game.gameState==ht.GameState.Gaming&&(this.checkMove({delta:e,elapsed:n}),this.checkShoot({delta:e,elapsed:n}))}checkMove({delta:e,elapsed:n}){var i=game.getMoveDirection();if(i){var s=ht.getDirectionRotation(i);s!=this.rotation.y&&(this.rotation.y=s,ht.formatNum(this.position,.25));var o=game.getCanMoveLength(this,i);if(o>0){var a=this.moveSpeed*e;a>o&&(a=o);var c=ht.getDirectionVector(i).multiplyScalar(a);this.position.add(c)}}}getDirection(){return this.rotation.y==0?ht.Direction.Up:this.rotation.y==Math.PI?ht.Direction.Down:this.rotation.y==-Math.PI/2?ht.Direction.Right:this.rotation.y==Math.PI/2?ht.Direction.Left:ht.Direction.Up}shootPressed(){return game.inputs.c||game.inputs.j||game.inputs.f}checkShoot({delta:e,elapsed:n}){this.bullets.length>=this.getMaxBulletCount()||(this.shootAcc+=e,this.shootPressed()&&this.shootAcc>=this.shootDiff&&(this.shootAcc=0,this.doShoot()))}doShoot(){var e=new jSe;game.addController(e),e.init(this)}get position(){return this.obj.position}get rotation(){return this.obj.rotation}}class ZSe{constructor(){this.delta=0,this.elapsed=0,this.records=[],this.shouldRemoves=[],this.shouldAdds=[]}update({delta:e,elapsed:n}){this.delta=e,this.elapsed=n;for(let s=0;s<this.records.length;++s){var i=this.records[s];i.acc+=e,i.acc>=i.second&&(i.callback({delta:i.acc,elapsed:n}),i.acc=0,i.times&&(i.times-=1,i.times<=0&&this.shouldRemoves.push(i.callback)))}this.checkRemove(),this.checkAdd()}checkAdd(){for(let e=0;e<this.shouldAdds.length;++e)this.records.push(this.shouldAdds[e]);this.shouldAdds.length=0}checkRemove(){for(let n=0;n<this.shouldRemoves.length;++n){var e=i=>i.callback==this.shouldRemoves[n];ht.removeArrayValueIf(this.records,e),ht.removeArrayValueIf(this.shouldAdds,e)}this.shouldRemoves.length=0}tick(e,n){n=n||0;var i={second:n,callback:e,acc:0};this.shouldAdds.push(i)}tickOnce(e,n){n=n||0;var i={second:n,callback:e,acc:0,times:1};this.shouldAdds.push(i)}untick(e){this.shouldRemoves.push(e)}}class O2{constructor(e,n,i){this.enermyMan=e,this.bornIndex=n,this.tankType=i,this.obj=this.createObject(),this.obj.position.copy(this.getBornPos(this.bornIndex)),this.obj.rotation.y=ht.getDirectionRotation(ht.Direction.Down),this.state=0,this.shape=new Rh(Rh.Box,1),this.moveSpeed=this.getSpeedTemplate(),this.blood=this.getBloodTemplate(),this.direction=this.getRandDirection(),this.moveDirectAcc=0,this.moveDirectMax=3}get position(){return this.obj.position}get rotation(){return this.obj.rotation}createObject(){var e=window.game.ResStore[`enermy${this.tankType+1}`],n=e.clone();return n}getSpeedTemplate(){var e=[2,3,4,2];return e[this.tankType]}getBloodTemplate(){var e=[1,2,1,4];return e[this.tankType]}getRandDirection(){for(var e=[ht.Direction.Up,ht.Direction.Right,ht.Direction.Down,ht.Direction.Left],n=[window.game.getCanMoveLength(this,ht.Direction.Up),window.game.getCanMoveLength(this,ht.Direction.Right),window.game.getCanMoveLength(this,ht.Direction.Down),window.game.getCanMoveLength(this,ht.Direction.Left)],i=n.findIndex(s=>s<=0);i>=0;)e.splice(i,1),n.splice(i,1),i=n.findIndex(s=>s<=0);return e.length>0?ht.randSplice(e):ht.Direction.Down}onAppearFinish(){this.state=1}get CampType(){return ht.CampType.Enermy}get ObjectType(){return ht.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new re(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new re(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new re(.25,0,.25))}ITank_update({delta:e}){this.state!=0&&(this.wantChangeDirection&&(this.direction=this.getRandDirection(),this.wantChangeDirection=!1,this.moveDirectAcc=0,this.moveDirectMax=1e3,ht.randInt(1,5)),this.checkMove({delta:e}),this.moveDirectAcc>=this.moveDirectMax&&(this.wantChangeDirection=!0))}checkMove({delta:e}){var n=ht.getDirectionRotation(this.direction);n!=this.rotation.y&&(this.rotation.y=n,ht.formatNum(this.position,.25));var i=game.getCanMoveLength(this,this.direction);if(i>0){var s=this.moveSpeed*e;s>i&&(s=i);var o=ht.getDirectionVector(this.direction).multiplyScalar(s);this.position.add(o),this.moveDirectAcc+=e}else this.wantChangeDirection=!0}}class KSe{constructor(){this.tanks=[],this.bornIndex=0,this.bornTime={},this.totalCount=20,this.destroyCount=0,console.log("EnermyMan")}start(){window.game.timer.tick(this.update.bind(this),1),window.game.onAddController.push(this.onAddController.bind(this)),window.game.onRemoveController.push(this.onRemoveController.bind(this))}dispose(){window.game.timer.untick(this.update.bind(this)),ht.removeArrayValue(window.game.onAddController,this.onAddController.bind(this)),ht.removeArrayValue(window.game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e instanceof O2&&this.tanks.push(e)}onRemoveController(e){e instanceof O2&&(ht.removeArrayValue(this.tanks,e),this.destroyCount+=1)}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new re(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new re(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new re(.25,0,.25))}isEmptyBorn(){var e=this.bornTime[this.bornIndex]||0;return Date.now()-e>2e3}update({delta:e,elapsed:n}){for(;this.tanks.length<1&&this.isEmptyBorn();)this.makeEnermy()}makeEnermy(){var e=ht.randInt(0,3),n=new O2(this,this.bornIndex,e);window.game.addController(n),ht.makeTweenTankAppear(n.obj,n.onAppearFinish.bind(n)),this.bornTime[this.bornIndex]=Date.now(),this.bornIndex+=1,this.bornIndex=this.bornIndex%3}}const{onLoop:JSe}=Ad();class eCe{constructor(e){k1(this,"tick",0);this.scene=e.value.context.scene.value,this.camera=e.value.context.camera.value}startGame(){this.rc=new H_e,this.inputs={},this.tiles=[],this.player_1=null,this.controllers=[],this.playerBullets=[],this.controllerShouldAdd=[],this.controllerShouldRemove=[],this.ITank_updates=[],this.onAddController=[],this.onRemoveController=[],this.timer=new ZSe,JSe(this.update.bind(this));var e=this.ResStore.platform.clone();this.scene.add(e),this.tileRoot=new Gl,this.scene.add(this.tileRoot),this.startLevel(0),this.initInput(),e.visible=this.visible,this.tileRoot.visible=this.visible}startLevel(e){for(this.gameState=ht.GameState.Prepare;this.tileRoot.children.length>0;)this.tileRoot.remove(this.tileRoot.children[0]);this.initMap(e),this.initPlayer(),this.enermyMan&&this.enermyMan.dispose(),this.enermyMan=new KSe,this.timer.tickOnce(()=>{this.showPlayerAppear()},1)}initPlayer(){this.player_1&&this.removeController(this.player_1),this.player_1=new qSe,this.addController(this.player_1),this.player_1.position.copy(this.rc.getPositionByRC(22,9).add(new re(-.25,-1,.25))),this.player_1.init()}showPlayerAppear(){ht.makeTween(this.player_1.obj.position).to({y:0},1e3).easing(ad.Back.Out).onComplete(()=>{this.gameState=ht.GameState.Gaming,this.enermyMan.start()}).start()}run(){this.loadResource()}loadResource(){this.ResStore={};const e=["tank/platform.fbx","tank/tile1.fbx","tank/tile2.fbx","tank/tile9.fbx","tank/enermy1.fbx","tank/enermy2.fbx","tank/enermy3.fbx","tank/enermy4.fbx","tank/bullet_player.fbx","tank/tank_player_1.fbx"];b_e(e).then(n=>{for(let s=0;s<n.length;++s){const o=n[s],a=e[s];this.ResStore[a]=o;var i=a.split("/");i=i[i.length-1],i=i.split("."),i=i[0],this.ResStore[i]=o}this.brickHitMaterial=this.ResStore.tile1.children[0].material.clone(),this.brickHitMaterial.color.setHex(8912896),this.startGame()})}initInput(){document.addEventListener("keydown",e=>{this.inputs[e.key]=1}),document.addEventListener("keyup",e=>{this.inputs[e.key]=0})}initMap(e){var n=ht.maps[e];for(let a=0;a<n.length;a++){const c=n[a];for(let h=0;h<c.length;h++){const d=c[h],f=this.rc.getIndexByRC(a,h);var i=null,s=0;if(d==ht.TileType.Brick){var i=this.ResStore.tile1.clone();this.tileRoot.add(i),i.position.copy(this.rc.getPositionByRC(a,h)),s=1}else if(d==ht.TileType.Iron){var i=this.ResStore.tile2.clone();this.tileRoot.add(i),i.position.copy(this.rc.getPositionByRC(a,h)),s=1}else if(d==ht.TileType.Home){var i=this.ResStore.tile9.clone();this.tileRoot.add(i),i.position.x=h*.5-6,i.position.z=a*.5-5.5,s=2}if(s==1){var o={tileType:d,obj:i,blood:2};this.tiles[f]=o}else if(s==2){var o={tileType:d,obj:i,blood:1};this.tiles[f]=o,this.tiles[this.rc.getIndexByRC(a,h+1)]=o,this.tiles[this.rc.getIndexByRC(a+1,h)]=o,this.tiles[this.rc.getIndexByRC(a+1,h+1)]=o}if(!this.tiles[f]){var o={tileType:d,obj:i};this.tiles[f]=o}}}}getTile(e,n){var i=this.rc.getIndexByRC(e,n);return this.tiles[i]}getTilesByGrid(e){var n=[];for(let s=e.minR;s<=e.maxR;++s)for(let o=e.minC;o<=e.maxC;++o){var i=this.getTile(s,o);i.tileType&&n.push(i)}return n}getMoveDirection(){return this.inputs.w?ht.Direction.Up:this.inputs.s?ht.Direction.Down:this.inputs.a?ht.Direction.Left:this.inputs.d?ht.Direction.Right:ht.Direction.None}getBlockTileRCs(e,n){let i=[];if(n==ht.Direction.Up)for(let o=e.minR;o>=0;--o)for(let a=e.minC;a<=e.maxC;++a){var s=this.getTile(o,a);s.tileType&&i.push({r:o,c:a})}else if(n==ht.Direction.Down)for(let o=e.maxR;o<=this.rc.Rows-1;++o)for(let a=e.minC;a<=e.maxC;++a){var s=this.getTile(o,a);s.tileType&&i.push({r:o,c:a})}else if(n==ht.Direction.Left)for(let o=e.minC;o>=0;--o)for(let a=e.minR;a<=e.maxR;++a){var s=this.getTile(a,o);s.tileType&&i.push({r:a,c:o})}else if(n==ht.Direction.Right)for(let o=e.maxC;o<=this.rc.Cols-1;++o)for(let a=e.minR;a<=e.maxR;++a){var s=this.getTile(a,o);s.tileType&&i.push({r:a,c:o})}return i}getCanMoveLength(e,n){var i=e.position.clone(),s=this.rc.getStandGrid(e.position,1),o=this.getBlockTileRCs(s,n),a=o[0],c=0;if(!a)n==ht.Direction.Up?c=i.z- -5.5:n==ht.Direction.Down?c=5.5-i.z:n==ht.Direction.Left?c=i.x- -6:n==ht.Direction.Right&&(c=6-i.x);else{var h=this.rc.getPositionByRC(a);n==ht.Direction.Up?c=i.z-.5-(h.z+.25):n==ht.Direction.Down?c=h.z-.25-(i.z+.5):n==ht.Direction.Left?c=i.x-.5-(h.x+.25):n==ht.Direction.Right&&(c=h.x-.25-(i.x+.5))}return c}update({delta:e,elapsed:n}){W_e(),this.checkRemoveController(),this.checkAddController();for(let i=0;i<this.ITank_updates.length;i++)this.ITank_updates[i].ITank_update({delta:e,elapsed:n});this.timer.update({delta:e,elapsed:n}),this.checkCollision({delta:e,elapsed:n}),this.checkRemoveController(),this.checkAddController(),this.makeCameraFollow({delta:e,elapsed:n})}makeCameraFollow({delta:e,elapsed:n}){}addController(e){e.obj&&this.tileRoot.add(e.obj),this.controllerShouldAdd.push(e),e.ITank_update&&this.ITank_updates.push(e);for(let i=0;i<this.onAddController.length;++i){var n=this.onAddController[i];n(e)}}checkAddController(){for(let e=0;e<this.controllerShouldAdd.length;e++){const n=this.controllerShouldAdd[e];this.controllers.push(n),n.CampType==ht.CampType.Player&&n.ObjectType==ht.ObjectType.Bullet&&this.playerBullets.push(n)}this.controllerShouldAdd.length=0}removeController(e){this.controllerShouldRemove.push(e),e.ITank_update&&ht.removeArrayValue(this.ITank_updates,e),e.onRemove&&e.onRemove();for(let i=0;i<this.onRemoveController.length;++i){var n=this.onRemoveController[i];n(e)}}checkRemoveController(){for(let e=0;e<this.controllerShouldRemove.length;e++){const n=this.controllerShouldRemove[e];ht.removeArrayValue(this.controllers,n),ht.removeArrayValue(this.playerBullets,n),this.tileRoot.remove(n.obj)}this.controllerShouldRemove.length=0}checkCollision({delta:e,elapsed:n}){for(let i=0;i<this.playerBullets.length;i++){const s=this.playerBullets[i];let o=this.rc.getStandGrid(s.obj.position,.5);if(this.rc.isGridInBound(o)){let a=this.getTilesByGrid(o);a.length>0&&this.onCollisionTiles(a,s)}else this.removeController(s)}for(let i=0;i<this.playerBullets.length;i++){const s=this.playerBullets[i];for(let o=0;o<this.enermyMan.tanks.length;o++){const a=this.enermyMan.tanks[o];if(a.Shape.intersect(s.Shape)){this.onCollisionBulletVsTank(s,a);break}}}}removeTile(e,n){}onCollisionTiles(e,n){this.removeController(n);for(let s=0;s<e.length;++s){var i=e[s];n.canHitTileTypes.indexOf(i.tileType)<0||(i.blood-=n.power,i.tileType==ht.TileType.Brick&&i.blood==1&&(i.obj.children[0].material=this.brickHitMaterial),i.blood<=0&&(i.tileType=0,this.tileRoot.remove(i.obj),i.obj=null))}}onCollisionBulletVsTank(e,n){this.removeController(e),this.removeController(n)}}const tCe=(r,e)=>{const n=r.__vccOpts||r;for(const[i,s]of e)n[i]=s;return n},iCe=Xt("TresPerspectiveCamera",{position:[0,20,0],rotation:[0,0,0]},null,-1),nCe=Xt("TresAmbientLight",{intensity:1},null,-1),rCe=Xt("TresAxesHelper",null,null,-1),sCe={__name:"TankMain",setup(r){const e=Wn(null);return Qi(e,()=>{window.game=new eCe(e),window.game.run()}),(n,i)=>{const s=Rt("TresCanvas");return ci(),ln("div",null,[Ie(s,{ref_key:"canvasRef",ref:e,"clear-color":"#FDF5E6","window-size":""},{default:et(()=>[iCe,nCe,rCe,Ie(li(T3))]),_:1},512)])}}};var Wx={exports:{}},mg={},w2={},_2={},DN;function _i(){return DN||(DN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r._registerNode=r.Konva=r.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}r.glob=typeof sp<"u"?sp:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},r.Konva={_global:r.glob,version:"9.3.12",isBrowser:n(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return r.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return r.Konva.DD.isDragging},isTransforming(){var s;return(s=r.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!r.Konva.DD.node},releaseCanvasOnDestroy:!0,document:r.glob.document,_injectGlobal(s){r.glob.Konva=s}};const i=s=>{r.Konva[s.prototype.getClassName()]=s};r._registerNode=i,r.Konva._injectGlobal(r.Konva)}(_2)),_2}var S2={},NN;function Gn(){return NN||(NN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Util=r.Transform=void 0;const e=_i();class n{constructor(T=[1,0,0,1,0,0]){this.dirty=!1,this.m=T&&T.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(T){T.m[0]=this.m[0],T.m[1]=this.m[1],T.m[2]=this.m[2],T.m[3]=this.m[3],T.m[4]=this.m[4],T.m[5]=this.m[5]}point(T){var E=this.m;return{x:E[0]*T.x+E[2]*T.y+E[4],y:E[1]*T.x+E[3]*T.y+E[5]}}translate(T,E){return this.m[4]+=this.m[0]*T+this.m[2]*E,this.m[5]+=this.m[1]*T+this.m[3]*E,this}scale(T,E){return this.m[0]*=T,this.m[1]*=T,this.m[2]*=E,this.m[3]*=E,this}rotate(T){var E=Math.cos(T),P=Math.sin(T),I=this.m[0]*E+this.m[2]*P,A=this.m[1]*E+this.m[3]*P,D=this.m[0]*-P+this.m[2]*E,M=this.m[1]*-P+this.m[3]*E;return this.m[0]=I,this.m[1]=A,this.m[2]=D,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(T,E){var P=this.m[0]+this.m[2]*E,I=this.m[1]+this.m[3]*E,A=this.m[2]+this.m[0]*T,D=this.m[3]+this.m[1]*T;return this.m[0]=P,this.m[1]=I,this.m[2]=A,this.m[3]=D,this}multiply(T){var E=this.m[0]*T.m[0]+this.m[2]*T.m[1],P=this.m[1]*T.m[0]+this.m[3]*T.m[1],I=this.m[0]*T.m[2]+this.m[2]*T.m[3],A=this.m[1]*T.m[2]+this.m[3]*T.m[3],D=this.m[0]*T.m[4]+this.m[2]*T.m[5]+this.m[4],M=this.m[1]*T.m[4]+this.m[3]*T.m[5]+this.m[5];return this.m[0]=E,this.m[1]=P,this.m[2]=I,this.m[3]=A,this.m[4]=D,this.m[5]=M,this}invert(){var T=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*T,P=-this.m[1]*T,I=-this.m[2]*T,A=this.m[0]*T,D=T*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=T*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=P,this.m[2]=I,this.m[3]=A,this.m[4]=D,this.m[5]=M,this}getMatrix(){return this.m}decompose(){var T=this.m[0],E=this.m[1],P=this.m[2],I=this.m[3],A=this.m[4],D=this.m[5],M=T*I-E*P;let $={x:A,y:D,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(T!=0||E!=0){var L=Math.sqrt(T*T+E*E);$.rotation=E>0?Math.acos(T/L):-Math.acos(T/L),$.scaleX=L,$.scaleY=M/L,$.skewX=(T*P+E*I)/M,$.skewY=0}else if(P!=0||I!=0){var N=Math.sqrt(P*P+I*I);$.rotation=Math.PI/2-(I>0?Math.acos(-P/N):-Math.acos(P/N)),$.scaleX=M/N,$.scaleY=N,$.skewX=0,$.skewY=(T*P+E*I)/M}return $.rotation=r.Util._getRotation($.rotation),$}}r.Transform=n;var i="[object Array]",s="[object Number]",o="[object String]",a="[object Boolean]",c=Math.PI/180,h=180/Math.PI,d="#",f="",p="0",g="Konva warning: ",y="Konva error: ",b="rgb(",w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},x=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,S=[];const _=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(O){setTimeout(O,60)};r.Util={_isElement(O){return!!(O&&O.nodeType==1)},_isFunction(O){return!!(O&&O.constructor&&O.call&&O.apply)},_isPlainObject(O){return!!O&&O.constructor===Object},_isArray(O){return Object.prototype.toString.call(O)===i},_isNumber(O){return Object.prototype.toString.call(O)===s&&!isNaN(O)&&isFinite(O)},_isString(O){return Object.prototype.toString.call(O)===o},_isBoolean(O){return Object.prototype.toString.call(O)===a},isObject(O){return O instanceof Object},isValidSelector(O){if(typeof O!="string")return!1;var T=O[0];return T==="#"||T==="."||T===T.toUpperCase()},_sign(O){return O===0||O>0?1:-1},requestAnimFrame(O){S.push(O),S.length===1&&_(function(){const T=S;S=[],T.forEach(function(E){E()})})},createCanvasElement(){var O=document.createElement("canvas");try{O.style=O.style||{}}catch{}return O},createImageElement(){return document.createElement("img")},_isInDocument(O){for(;O=O.parentNode;)if(O==document)return!0;return!1},_urlToImage(O,T){var E=r.Util.createImageElement();E.onload=function(){T(E)},E.src=O},_rgbToHex(O,T,E){return((1<<24)+(O<<16)+(T<<8)+E).toString(16).slice(1)},_hexToRgb(O){O=O.replace(d,f);var T=parseInt(O,16);return{r:T>>16&255,g:T>>8&255,b:T&255}},getRandomColor(){for(var O=(Math.random()*16777215<<0).toString(16);O.length<6;)O=p+O;return d+O},getRGB(O){var T;return O in w?(T=w[O],{r:T[0],g:T[1],b:T[2]}):O[0]===d?this._hexToRgb(O.substring(1)):O.substr(0,4)===b?(T=x.exec(O.replace(/ /g,"")),{r:parseInt(T[1],10),g:parseInt(T[2],10),b:parseInt(T[3],10)}):{r:0,g:0,b:0}},colorToRGBA(O){return O=O||"black",r.Util._namedColorToRBA(O)||r.Util._hex3ColorToRGBA(O)||r.Util._hex4ColorToRGBA(O)||r.Util._hex6ColorToRGBA(O)||r.Util._hex8ColorToRGBA(O)||r.Util._rgbColorToRGBA(O)||r.Util._rgbaColorToRGBA(O)||r.Util._hslColorToRGBA(O)},_namedColorToRBA(O){var T=w[O.toLowerCase()];return T?{r:T[0],g:T[1],b:T[2],a:1}:null},_rgbColorToRGBA(O){if(O.indexOf("rgb(")===0){O=O.match(/rgb\(([^)]+)\)/)[1];var T=O.split(/ *, */).map(Number);return{r:T[0],g:T[1],b:T[2],a:1}}},_rgbaColorToRGBA(O){if(O.indexOf("rgba(")===0){O=O.match(/rgba\(([^)]+)\)/)[1];var T=O.split(/ *, */).map((E,P)=>E.slice(-1)==="%"?P===3?parseInt(E)/100:parseInt(E)/100*255:Number(E));return{r:T[0],g:T[1],b:T[2],a:T[3]}}},_hex8ColorToRGBA(O){if(O[0]==="#"&&O.length===9)return{r:parseInt(O.slice(1,3),16),g:parseInt(O.slice(3,5),16),b:parseInt(O.slice(5,7),16),a:parseInt(O.slice(7,9),16)/255}},_hex6ColorToRGBA(O){if(O[0]==="#"&&O.length===7)return{r:parseInt(O.slice(1,3),16),g:parseInt(O.slice(3,5),16),b:parseInt(O.slice(5,7),16),a:1}},_hex4ColorToRGBA(O){if(O[0]==="#"&&O.length===5)return{r:parseInt(O[1]+O[1],16),g:parseInt(O[2]+O[2],16),b:parseInt(O[3]+O[3],16),a:parseInt(O[4]+O[4],16)/255}},_hex3ColorToRGBA(O){if(O[0]==="#"&&O.length===4)return{r:parseInt(O[1]+O[1],16),g:parseInt(O[2]+O[2],16),b:parseInt(O[3]+O[3],16),a:1}},_hslColorToRGBA(O){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(O)){const[T,...E]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(O),P=Number(E[0])/360,I=Number(E[1])/100,A=Number(E[2])/100;let D,M,$;if(I===0)return $=A*255,{r:Math.round($),g:Math.round($),b:Math.round($),a:1};A<.5?D=A*(1+I):D=A+I-A*I;const L=2*A-D,N=[0,0,0];for(let V=0;V<3;V++)M=P+1/3*-(V-1),M<0&&M++,M>1&&M--,6*M<1?$=L+(D-L)*6*M:2*M<1?$=D:3*M<2?$=L+(D-L)*(2/3-M)*6:$=L,N[V]=$*255;return{r:Math.round(N[0]),g:Math.round(N[1]),b:Math.round(N[2]),a:1}}},haveIntersection(O,T){return!(T.x>O.x+O.width||T.x+T.width<O.x||T.y>O.y+O.height||T.y+T.height<O.y)},cloneObject(O){var T={};for(var E in O)this._isPlainObject(O[E])?T[E]=this.cloneObject(O[E]):this._isArray(O[E])?T[E]=this.cloneArray(O[E]):T[E]=O[E];return T},cloneArray(O){return O.slice(0)},degToRad(O){return O*c},radToDeg(O){return O*h},_degToRad(O){return r.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),r.Util.degToRad(O)},_radToDeg(O){return r.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),r.Util.radToDeg(O)},_getRotation(O){return e.Konva.angleDeg?r.Util.radToDeg(O):O},_capitalize(O){return O.charAt(0).toUpperCase()+O.slice(1)},throw(O){throw new Error(y+O)},error(O){console.error(y+O)},warn(O){e.Konva.showWarnings&&console.warn(g+O)},each(O,T){for(var E in O)T(E,O[E])},_inRange(O,T,E){return T<=O&&O<E},_getProjectionToSegment(O,T,E,P,I,A){var D,M,$,L=(O-E)*(O-E)+(T-P)*(T-P);if(L==0)D=O,M=T,$=(I-E)*(I-E)+(A-P)*(A-P);else{var N=((I-O)*(E-O)+(A-T)*(P-T))/L;N<0?(D=O,M=T,$=(O-I)*(O-I)+(T-A)*(T-A)):N>1?(D=E,M=P,$=(E-I)*(E-I)+(P-A)*(P-A)):(D=O+N*(E-O),M=T+N*(P-T),$=(D-I)*(D-I)+(M-A)*(M-A))}return[D,M,$]},_getProjectionToLine(O,T,E){var P=r.Util.cloneObject(O),I=Number.MAX_VALUE;return T.forEach(function(A,D){if(!(!E&&D===T.length-1)){var M=T[(D+1)%T.length],$=r.Util._getProjectionToSegment(A.x,A.y,M.x,M.y,O.x,O.y),L=$[0],N=$[1],V=$[2];V<I&&(P.x=L,P.y=N,I=V)}}),P},_prepareArrayForTween(O,T,E){var P,I=[],A=[];if(O.length>T.length){var D=T;T=O,O=D}for(P=0;P<O.length;P+=2)I.push({x:O[P],y:O[P+1]});for(P=0;P<T.length;P+=2)A.push({x:T[P],y:T[P+1]});var M=[];return A.forEach(function($){var L=r.Util._getProjectionToLine($,I,E);M.push(L.x),M.push(L.y)}),M},_prepareToStringify(O){var T;O.visitedByCircularReferenceRemoval=!0;for(var E in O)if(O.hasOwnProperty(E)&&O[E]&&typeof O[E]=="object"){if(T=Object.getOwnPropertyDescriptor(O,E),O[E].visitedByCircularReferenceRemoval||r.Util._isElement(O[E]))if(T.configurable)delete O[E];else return null;else if(r.Util._prepareToStringify(O[E])===null)if(T.configurable)delete O[E];else return null}return delete O.visitedByCircularReferenceRemoval,O},_assign(O,T){for(var E in T)O[E]=T[E];return O},_getFirstPointerId(O){return O.touches?O.changedTouches[0].identifier:O.pointerId||999},releaseCanvas(...O){e.Konva.releaseCanvasOnDestroy&&O.forEach(T=>{T.width=0,T.height=0})},drawRoundedRectPath(O,T,E,P){let I=0,A=0,D=0,M=0;typeof P=="number"?I=A=D=M=Math.min(P,T/2,E/2):(I=Math.min(P[0]||0,T/2,E/2),A=Math.min(P[1]||0,T/2,E/2),M=Math.min(P[2]||0,T/2,E/2),D=Math.min(P[3]||0,T/2,E/2)),O.moveTo(I,0),O.lineTo(T-A,0),O.arc(T-A,A,A,Math.PI*3/2,0,!1),O.lineTo(T,E-M),O.arc(T-M,E-M,M,0,Math.PI/2,!1),O.lineTo(D,E),O.arc(D,E-D,D,Math.PI/2,Math.PI,!1),O.lineTo(0,I),O.arc(I,I,I,Math.PI,Math.PI*3/2,!1)}}}(S2)),S2}var gg={},C2={},xn={},$N;function Mi(){if($N)return xn;$N=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.getComponentValidator=xn.getBooleanValidator=xn.getNumberArrayValidator=xn.getFunctionValidator=xn.getStringOrGradientValidator=xn.getStringValidator=xn.getNumberOrAutoValidator=xn.getNumberOrArrayOfNumbersValidator=xn.getNumberValidator=xn.alphaComponent=xn.RGBComponent=void 0;const r=_i(),e=Gn();function n(b){return e.Util._isString(b)?'"'+b+'"':Object.prototype.toString.call(b)==="[object Number]"||e.Util._isBoolean(b)?b:Object.prototype.toString.call(b)}function i(b){return b>255?255:b<0?0:Math.round(b)}xn.RGBComponent=i;function s(b){return b>1?1:b<1e-4?1e-4:b}xn.alphaComponent=s;function o(){if(r.Konva.isUnminified)return function(b,w){return e.Util._isNumber(b)||e.Util.warn(n(b)+' is a not valid value for "'+w+'" attribute. The value should be a number.'),b}}xn.getNumberValidator=o;function a(b){if(r.Konva.isUnminified)return function(w,x){let S=e.Util._isNumber(w),_=e.Util._isArray(w)&&w.length==b;return!S&&!_&&e.Util.warn(n(w)+' is a not valid value for "'+x+'" attribute. The value should be a number or Array<number>('+b+")"),w}}xn.getNumberOrArrayOfNumbersValidator=a;function c(){if(r.Konva.isUnminified)return function(b,w){var x=e.Util._isNumber(b),S=b==="auto";return x||S||e.Util.warn(n(b)+' is a not valid value for "'+w+'" attribute. The value should be a number or "auto".'),b}}xn.getNumberOrAutoValidator=c;function h(){if(r.Konva.isUnminified)return function(b,w){return e.Util._isString(b)||e.Util.warn(n(b)+' is a not valid value for "'+w+'" attribute. The value should be a string.'),b}}xn.getStringValidator=h;function d(){if(r.Konva.isUnminified)return function(b,w){const x=e.Util._isString(b),S=Object.prototype.toString.call(b)==="[object CanvasGradient]"||b&&b.addColorStop;return x||S||e.Util.warn(n(b)+' is a not valid value for "'+w+'" attribute. The value should be a string or a native gradient.'),b}}xn.getStringOrGradientValidator=d;function f(){if(r.Konva.isUnminified)return function(b,w){return e.Util._isFunction(b)||e.Util.warn(n(b)+' is a not valid value for "'+w+'" attribute. The value should be a function.'),b}}xn.getFunctionValidator=f;function p(){if(r.Konva.isUnminified)return function(b,w){const x=Int8Array?Object.getPrototypeOf(Int8Array):null;return x&&b instanceof x||(e.Util._isArray(b)?b.forEach(function(S){e.Util._isNumber(S)||e.Util.warn('"'+w+'" attribute has non numeric element '+S+". Make sure that all elements are numbers.")}):e.Util.warn(n(b)+' is a not valid value for "'+w+'" attribute. The value should be a array of numbers.')),b}}xn.getNumberArrayValidator=p;function g(){if(r.Konva.isUnminified)return function(b,w){var x=b===!0||b===!1;return x||e.Util.warn(n(b)+' is a not valid value for "'+w+'" attribute. The value should be a boolean.'),b}}xn.getBooleanValidator=g;function y(b){if(r.Konva.isUnminified)return function(w,x){return w==null||e.Util.isObject(w)||e.Util.warn(n(w)+' is a not valid value for "'+x+'" attribute. The value should be an object with properties '+b),w}}return xn.getComponentValidator=y,xn}var VN;function Si(){return VN||(VN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Factory=void 0;const e=Gn(),n=Mi();var i="get",s="set";r.Factory={addGetterSetter(o,a,c,h,d){r.Factory.addGetter(o,a,c),r.Factory.addSetter(o,a,h,d),r.Factory.addOverloadedGetterSetter(o,a)},addGetter(o,a,c){var h=i+e.Util._capitalize(a);o.prototype[h]=o.prototype[h]||function(){var d=this.attrs[a];return d===void 0?c:d}},addSetter(o,a,c,h){var d=s+e.Util._capitalize(a);o.prototype[d]||r.Factory.overWriteSetter(o,a,c,h)},overWriteSetter(o,a,c,h){var d=s+e.Util._capitalize(a);o.prototype[d]=function(f){return c&&f!==void 0&&f!==null&&(f=c.call(this,f,a)),this._setAttr(a,f),h&&h.call(this),this}},addComponentsGetterSetter(o,a,c,h,d){var f=c.length,p=e.Util._capitalize,g=i+p(a),y=s+p(a),b,w;o.prototype[g]=function(){var S={};for(b=0;b<f;b++)w=c[b],S[w]=this.getAttr(a+p(w));return S};var x=(0,n.getComponentValidator)(c);o.prototype[y]=function(S){var _=this.attrs[a],O;h&&(S=h.call(this,S)),x&&x.call(this,S,a);for(O in S)S.hasOwnProperty(O)&&this._setAttr(a+p(O),S[O]);return S||c.forEach(T=>{this._setAttr(a+p(T),void 0)}),this._fireChangeEvent(a,_,S),d&&d.call(this),this},r.Factory.addOverloadedGetterSetter(o,a)},addOverloadedGetterSetter(o,a){var c=e.Util._capitalize(a),h=s+c,d=i+c;o.prototype[a]=function(){return arguments.length?(this[h](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(o,a,c,h){e.Util.error("Adding deprecated "+a);var d=i+e.Util._capitalize(a),f=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";o.prototype[d]=function(){e.Util.error(f);var p=this.attrs[a];return p===void 0?c:p},r.Factory.addSetter(o,a,h,function(){e.Util.error(f)}),r.Factory.addOverloadedGetterSetter(o,a)},backCompat(o,a){e.Util.each(a,function(c,h){var d=o.prototype[h],f=i+e.Util._capitalize(c),p=s+e.Util._capitalize(c);function g(){d.apply(this,arguments),e.Util.error('"'+c+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}o.prototype[c]=g,o.prototype[f]=g,o.prototype[p]=g})},afterSetFilter(){this._filterUpToDate=!1}}}(C2)),C2}var Vl={},Ll={},LN;function N7(){if(LN)return Ll;LN=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.HitContext=Ll.SceneContext=Ll.Context=void 0;const r=Gn(),e=_i();function n(S){var _=[],O=S.length,T=r.Util,E,P;for(E=0;E<O;E++)P=S[E],T._isNumber(P)?P=Math.round(P*1e3)/1e3:T._isString(P)||(P=P+""),_.push(P);return _}var i=",",s="(",o=")",a="([",c="])",h=";",d="()",f="=",p=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],g=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const y=100;let b=class{constructor(_){this.canvas=_,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(_){_.fillEnabled()&&this._fill(_)}_fill(_){}strokeShape(_){_.hasStroke()&&this._stroke(_)}_stroke(_){}fillStrokeShape(_){_.attrs.fillAfterStrokeEnabled?(this.strokeShape(_),this.fillShape(_)):(this.fillShape(_),this.strokeShape(_))}getTrace(_,O){var T=this.traceArr,E=T.length,P="",I,A,D,M;for(I=0;I<E;I++)A=T[I],D=A.method,D?(M=A.args,P+=D,_?P+=d:r.Util._isArray(M[0])?P+=a+M.join(i)+c:(O&&(M=M.map($=>typeof $=="number"?Math.floor($):$)),P+=s+M.join(i)+o)):(P+=A.property,_||(P+=f+A.val)),P+=h;return P}clearTrace(){this.traceArr=[]}_trace(_){var O=this.traceArr,T;O.push(_),T=O.length,T>=y&&O.shift()}reset(){var _=this.getCanvas().getPixelRatio();this.setTransform(1*_,0,0,1*_,0,0)}getCanvas(){return this.canvas}clear(_){var O=this.getCanvas();_?this.clearRect(_.x||0,_.y||0,_.width||0,_.height||0):this.clearRect(0,0,O.getWidth()/O.pixelRatio,O.getHeight()/O.pixelRatio)}_applyLineCap(_){const O=_.attrs.lineCap;O&&this.setAttr("lineCap",O)}_applyOpacity(_){var O=_.getAbsoluteOpacity();O!==1&&this.setAttr("globalAlpha",O)}_applyLineJoin(_){const O=_.attrs.lineJoin;O&&this.setAttr("lineJoin",O)}setAttr(_,O){this._context[_]=O}arc(_,O,T,E,P,I){this._context.arc(_,O,T,E,P,I)}arcTo(_,O,T,E,P){this._context.arcTo(_,O,T,E,P)}beginPath(){this._context.beginPath()}bezierCurveTo(_,O,T,E,P,I){this._context.bezierCurveTo(_,O,T,E,P,I)}clearRect(_,O,T,E){this._context.clearRect(_,O,T,E)}clip(..._){this._context.clip.apply(this._context,_)}closePath(){this._context.closePath()}createImageData(_,O){var T=arguments;if(T.length===2)return this._context.createImageData(_,O);if(T.length===1)return this._context.createImageData(_)}createLinearGradient(_,O,T,E){return this._context.createLinearGradient(_,O,T,E)}createPattern(_,O){return this._context.createPattern(_,O)}createRadialGradient(_,O,T,E,P,I){return this._context.createRadialGradient(_,O,T,E,P,I)}drawImage(_,O,T,E,P,I,A,D,M){var $=arguments,L=this._context;$.length===3?L.drawImage(_,O,T):$.length===5?L.drawImage(_,O,T,E,P):$.length===9&&L.drawImage(_,O,T,E,P,I,A,D,M)}ellipse(_,O,T,E,P,I,A,D){this._context.ellipse(_,O,T,E,P,I,A,D)}isPointInPath(_,O,T,E){return T?this._context.isPointInPath(T,_,O,E):this._context.isPointInPath(_,O,E)}fill(..._){this._context.fill.apply(this._context,_)}fillRect(_,O,T,E){this._context.fillRect(_,O,T,E)}strokeRect(_,O,T,E){this._context.strokeRect(_,O,T,E)}fillText(_,O,T,E){E?this._context.fillText(_,O,T,E):this._context.fillText(_,O,T)}measureText(_){return this._context.measureText(_)}getImageData(_,O,T,E){return this._context.getImageData(_,O,T,E)}lineTo(_,O){this._context.lineTo(_,O)}moveTo(_,O){this._context.moveTo(_,O)}rect(_,O,T,E){this._context.rect(_,O,T,E)}roundRect(_,O,T,E,P){this._context.roundRect(_,O,T,E,P)}putImageData(_,O,T){this._context.putImageData(_,O,T)}quadraticCurveTo(_,O,T,E){this._context.quadraticCurveTo(_,O,T,E)}restore(){this._context.restore()}rotate(_){this._context.rotate(_)}save(){this._context.save()}scale(_,O){this._context.scale(_,O)}setLineDash(_){this._context.setLineDash?this._context.setLineDash(_):"mozDash"in this._context?this._context.mozDash=_:"webkitLineDash"in this._context&&(this._context.webkitLineDash=_)}getLineDash(){return this._context.getLineDash()}setTransform(_,O,T,E,P,I){this._context.setTransform(_,O,T,E,P,I)}stroke(_){_?this._context.stroke(_):this._context.stroke()}strokeText(_,O,T,E){this._context.strokeText(_,O,T,E)}transform(_,O,T,E,P,I){this._context.transform(_,O,T,E,P,I)}translate(_,O){this._context.translate(_,O)}_enableTrace(){var _=this,O=p.length,T=this.setAttr,E,P,I=function(A){var D=_[A],M;_[A]=function(){return P=n(Array.prototype.slice.call(arguments,0)),M=D.apply(_,arguments),_._trace({method:A,args:P}),M}};for(E=0;E<O;E++)I(p[E]);_.setAttr=function(){T.apply(_,arguments);var A=arguments[0],D=arguments[1];(A==="shadowOffsetX"||A==="shadowOffsetY"||A==="shadowBlur")&&(D=D/this.canvas.getPixelRatio()),_._trace({property:A,val:D})}}_applyGlobalCompositeOperation(_){const O=_.attrs.globalCompositeOperation;var T=!O||O==="source-over";T||this.setAttr("globalCompositeOperation",O)}};Ll.Context=b,g.forEach(function(S){Object.defineProperty(b.prototype,S,{get(){return this._context[S]},set(_){this._context[S]=_}})});class w extends b{constructor(_,{willReadFrequently:O=!1}={}){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:O})}_fillColor(_){var O=_.fill();this.setAttr("fillStyle",O),_._fillFunc(this)}_fillPattern(_){this.setAttr("fillStyle",_._getFillPattern()),_._fillFunc(this)}_fillLinearGradient(_){var O=_._getLinearGradient();O&&(this.setAttr("fillStyle",O),_._fillFunc(this))}_fillRadialGradient(_){const O=_._getRadialGradient();O&&(this.setAttr("fillStyle",O),_._fillFunc(this))}_fill(_){const O=_.fill(),T=_.getFillPriority();if(O&&T==="color"){this._fillColor(_);return}const E=_.getFillPatternImage();if(E&&T==="pattern"){this._fillPattern(_);return}const P=_.getFillLinearGradientColorStops();if(P&&T==="linear-gradient"){this._fillLinearGradient(_);return}const I=_.getFillRadialGradientColorStops();if(I&&T==="radial-gradient"){this._fillRadialGradient(_);return}O?this._fillColor(_):E?this._fillPattern(_):P?this._fillLinearGradient(_):I&&this._fillRadialGradient(_)}_strokeLinearGradient(_){const O=_.getStrokeLinearGradientStartPoint(),T=_.getStrokeLinearGradientEndPoint(),E=_.getStrokeLinearGradientColorStops(),P=this.createLinearGradient(O.x,O.y,T.x,T.y);if(E){for(var I=0;I<E.length;I+=2)P.addColorStop(E[I],E[I+1]);this.setAttr("strokeStyle",P)}}_stroke(_){var O=_.dash(),T=_.getStrokeScaleEnabled();if(_.hasStroke()){if(!T){this.save();var E=this.getCanvas().getPixelRatio();this.setTransform(E,0,0,E,0,0)}this._applyLineCap(_),O&&_.dashEnabled()&&(this.setLineDash(O),this.setAttr("lineDashOffset",_.dashOffset())),this.setAttr("lineWidth",_.strokeWidth()),_.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var P=_.getStrokeLinearGradientColorStops();P?this._strokeLinearGradient(_):this.setAttr("strokeStyle",_.stroke()),_._strokeFunc(this),T||this.restore()}}_applyShadow(_){var O,T,E,P=(O=_.getShadowRGBA())!==null&&O!==void 0?O:"black",I=(T=_.getShadowBlur())!==null&&T!==void 0?T:5,A=(E=_.getShadowOffset())!==null&&E!==void 0?E:{x:0,y:0},D=_.getAbsoluteScale(),M=this.canvas.getPixelRatio(),$=D.x*M,L=D.y*M;this.setAttr("shadowColor",P),this.setAttr("shadowBlur",I*Math.min(Math.abs($),Math.abs(L))),this.setAttr("shadowOffsetX",A.x*$),this.setAttr("shadowOffsetY",A.y*L)}}Ll.SceneContext=w;class x extends b{constructor(_){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:!0})}_fill(_){this.save(),this.setAttr("fillStyle",_.colorKey),_._fillFuncHit(this),this.restore()}strokeShape(_){_.hasHitStroke()&&this._stroke(_)}_stroke(_){if(_.hasHitStroke()){const P=_.getStrokeScaleEnabled();if(!P){this.save();var O=this.getCanvas().getPixelRatio();this.setTransform(O,0,0,O,0,0)}this._applyLineCap(_);var T=_.hitStrokeWidth(),E=T==="auto"?_.strokeWidth():T;this.setAttr("lineWidth",E),this.setAttr("strokeStyle",_.colorKey),_._strokeFuncHit(this),P||this.restore()}}}return Ll.HitContext=x,Ll}var BN;function g_(){if(BN)return Vl;BN=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.HitCanvas=Vl.SceneCanvas=Vl.Canvas=void 0;const r=Gn(),e=N7(),n=_i(),i=Si(),s=Mi();var o;function a(){if(o)return o;var f=r.Util.createCanvasElement(),p=f.getContext("2d");return o=function(){var g=n.Konva._global.devicePixelRatio||1,y=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return g/y}(),r.Util.releaseCanvas(f),o}let c=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var g=p||{},y=g.pixelRatio||n.Konva.pixelRatio||a();this.pixelRatio=y,this._canvas=r.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){var g=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/g,this.getHeight()/g)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";var g=this.pixelRatio,y=this.getContext()._context;y.scale(g,g)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";var g=this.pixelRatio,y=this.getContext()._context;y.scale(g,g)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,g){this.setWidth(p||0),this.setHeight(g||0)}toDataURL(p,g){try{return this._canvas.toDataURL(p,g)}catch{try{return this._canvas.toDataURL()}catch(b){return r.Util.error("Unable to get data URL. "+b.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Vl.Canvas=c,i.Factory.addGetterSetter(c,"pixelRatio",void 0,(0,s.getNumberValidator)());class h extends c{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new e.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}Vl.SceneCanvas=h;class d extends c{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(p.width,p.height)}}return Vl.HitCanvas=d,Vl}var k2={},UN;function $3(){return UN||(UN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DD=void 0;const e=_i(),n=Gn();r.DD={get isDragging(){var i=!1;return r.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){var i;return r.DD._dragElements.forEach(s=>{i=s.node}),i},_dragElements:new Map,_drag(i){const s=[];r.DD._dragElements.forEach((o,a)=>{const{node:c}=o,h=c.getStage();h.setPointersPositions(i),o.pointerId===void 0&&(o.pointerId=n.Util._getFirstPointerId(i));const d=h._changedPointerPositions.find(g=>g.id===o.pointerId);if(d){if(o.dragStatus!=="dragging"){var f=c.dragDistance(),p=Math.max(Math.abs(d.x-o.startPointerPos.x),Math.abs(d.y-o.startPointerPos.y));if(p<f||(c.startDrag({evt:i}),!c.isDragging()))return}c._setDragPosition(i,o),s.push(c)}}),s.forEach(o=>{o.fire("dragmove",{type:"dragmove",target:o,evt:i},!0)})},_endDragBefore(i){const s=[];r.DD._dragElements.forEach(o=>{const{node:a}=o,c=a.getStage();if(i&&c.setPointersPositions(i),!c._changedPointerPositions.find(f=>f.id===o.pointerId))return;(o.dragStatus==="dragging"||o.dragStatus==="stopped")&&(r.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,o.dragStatus="stopped");const d=o.node.getLayer()||o.node instanceof e.Konva.Stage&&o.node;d&&s.indexOf(d)===-1&&s.push(d)}),s.forEach(o=>{o.draw()})},_endDragAfter(i){r.DD._dragElements.forEach((s,o)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:i},!0),s.dragStatus!=="dragging"&&r.DD._dragElements.delete(o)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",r.DD._endDragBefore,!0),window.addEventListener("touchend",r.DD._endDragBefore,!0),window.addEventListener("mousemove",r.DD._drag),window.addEventListener("touchmove",r.DD._drag),window.addEventListener("mouseup",r.DD._endDragAfter,!1),window.addEventListener("touchend",r.DD._endDragAfter,!1))}(k2)),k2}var FN;function er(){if(FN)return gg;FN=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.Node=void 0;const r=Gn(),e=Si(),n=g_(),i=_i(),s=$3(),o=Mi();var a="absoluteOpacity",c="allEventListeners",h="absoluteTransform",d="absoluteScale",f="canvas",p="Change",g="children",y="konva",b="listening",w="mouseenter",x="mouseleave",S="set",_="Shape",O=" ",T="stage",E="transform",P="Stage",I="visible",A=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(O);let D=1;class M{constructor(N){this._id=D++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(N),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(N){(N===E||N===h)&&this._cache.get(N)?this._cache.get(N).dirty=!0:N?this._cache.delete(N):this._cache.clear()}_getCache(N,V){var U=this._cache.get(N),F=N===E||N===h,H=U===void 0||F&&U.dirty===!0;return H&&(U=V.call(this),this._cache.set(N,U)),U}_calculate(N,V,U){if(!this._attachedDepsListeners.get(N)){const F=V.map(H=>H+"Change.konva").join(O);this.on(F,()=>{this._clearCache(N)}),this._attachedDepsListeners.set(N,!0)}return this._getCache(N,U)}_getCanvasCache(){return this._cache.get(f)}_clearSelfAndDescendantCache(N){this._clearCache(N),N===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(f)){const{scene:N,filter:V,hit:U}=this._cache.get(f);r.Util.releaseCanvas(N,V,U),this._cache.delete(f)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(N){var V=N||{},U={};(V.x===void 0||V.y===void 0||V.width===void 0||V.height===void 0)&&(U=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var F=Math.ceil(V.width||U.width),H=Math.ceil(V.height||U.height),K=V.pixelRatio,ie=V.x===void 0?Math.floor(U.x):V.x,he=V.y===void 0?Math.floor(U.y):V.y,me=V.offset||0,Pe=V.drawBorder||!1,_e=V.hitCanvasPixelRatio||1;if(!F||!H){r.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ue=Math.abs(Math.round(U.x)-ie)>.5?1:0,Se=Math.abs(Math.round(U.y)-he)>.5?1:0;F+=me*2+ue,H+=me*2+Se,ie-=me,he-=me;var ke=new n.SceneCanvas({pixelRatio:K,width:F,height:H}),J=new n.SceneCanvas({pixelRatio:K,width:0,height:0,willReadFrequently:!0}),q=new n.HitCanvas({pixelRatio:_e,width:F,height:H}),z=ke.getContext(),X=q.getContext();return q.isCache=!0,ke.isCache=!0,this._cache.delete(f),this._filterUpToDate=!1,V.imageSmoothingEnabled===!1&&(ke.getContext()._context.imageSmoothingEnabled=!1,J.getContext()._context.imageSmoothingEnabled=!1),z.save(),X.save(),z.translate(-ie,-he),X.translate(-ie,-he),this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(d),this.drawScene(ke,this),this.drawHit(q,this),this._isUnderCache=!1,z.restore(),X.restore(),Pe&&(z.save(),z.beginPath(),z.rect(0,0,F,H),z.closePath(),z.setAttr("strokeStyle","red"),z.setAttr("lineWidth",5),z.stroke(),z.restore()),this._cache.set(f,{scene:ke,filter:J,hit:q,x:ie,y:he}),this._requestDraw(),this}isCached(){return this._cache.has(f)}getClientRect(N){throw new Error('abstract "getClientRect" method call')}_transformedRect(N,V){var U=[{x:N.x,y:N.y},{x:N.x+N.width,y:N.y},{x:N.x+N.width,y:N.y+N.height},{x:N.x,y:N.y+N.height}],F=1/0,H=1/0,K=-1/0,ie=-1/0,he=this.getAbsoluteTransform(V);return U.forEach(function(me){var Pe=he.point(me);F===void 0&&(F=K=Pe.x,H=ie=Pe.y),F=Math.min(F,Pe.x),H=Math.min(H,Pe.y),K=Math.max(K,Pe.x),ie=Math.max(ie,Pe.y)}),{x:F,y:H,width:K-F,height:ie-H}}_drawCachedSceneCanvas(N){N.save(),N._applyOpacity(this),N._applyGlobalCompositeOperation(this);const V=this._getCanvasCache();N.translate(V.x,V.y);var U=this._getCachedSceneCanvas(),F=U.pixelRatio;N.drawImage(U._canvas,0,0,U.width/F,U.height/F),N.restore()}_drawCachedHitCanvas(N){var V=this._getCanvasCache(),U=V.hit;N.save(),N.translate(V.x,V.y),N.drawImage(U._canvas,0,0,U.width/U.pixelRatio,U.height/U.pixelRatio),N.restore()}_getCachedSceneCanvas(){var N=this.filters(),V=this._getCanvasCache(),U=V.scene,F=V.filter,H=F.getContext(),K,ie,he,me;if(N){if(!this._filterUpToDate){var Pe=U.pixelRatio;F.setSize(U.width/U.pixelRatio,U.height/U.pixelRatio);try{for(K=N.length,H.clear(),H.drawImage(U._canvas,0,0,U.getWidth()/Pe,U.getHeight()/Pe),ie=H.getImageData(0,0,F.getWidth(),F.getHeight()),he=0;he<K;he++){if(me=N[he],typeof me!="function"){r.Util.error("Filter should be type of function, but got "+typeof me+" instead. Please check correct filters");continue}me.call(this,ie),H.putImageData(ie,0,0)}}catch(_e){r.Util.error("Unable to apply filter. "+_e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return F}return U}on(N,V){if(this._cache&&this._cache.delete(c),arguments.length===3)return this._delegate.apply(this,arguments);var U=N.split(O),F=U.length,H,K,ie,he,me;for(H=0;H<F;H++)K=U[H],ie=K.split("."),he=ie[0],me=ie[1]||"",this.eventListeners[he]||(this.eventListeners[he]=[]),this.eventListeners[he].push({name:me,handler:V});return this}off(N,V){var U=(N||"").split(O),F=U.length,H,K,ie,he,me,Pe;if(this._cache&&this._cache.delete(c),!N)for(K in this.eventListeners)this._off(K);for(H=0;H<F;H++)if(ie=U[H],he=ie.split("."),me=he[0],Pe=he[1],me)this.eventListeners[me]&&this._off(me,Pe,V);else for(K in this.eventListeners)this._off(K,Pe,V);return this}dispatchEvent(N){var V={target:this,type:N.type,evt:N};return this.fire(N.type,V),this}addEventListener(N,V){return this.on(N,function(U){V.call(this,U.evt)}),this}removeEventListener(N){return this.off(N),this}_delegate(N,V,U){var F=this;this.on(N,function(H){for(var K=H.target.findAncestors(V,!0,F),ie=0;ie<K.length;ie++)H=r.Util.cloneObject(H),H.currentTarget=K[ie],U.call(K[ie],H)})}remove(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(T),this._clearSelfAndDescendantCache(I),this._clearSelfAndDescendantCache(b)}_remove(){this._clearCaches();var N=this.getParent();N&&N.children&&(N.children.splice(this.index,1),N._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(N){var V="get"+r.Util._capitalize(N);return r.Util._isFunction(this[V])?this[V]():this.attrs[N]}getAncestors(){for(var N=this.getParent(),V=[];N;)V.push(N),N=N.getParent();return V}getAttrs(){return this.attrs||{}}setAttrs(N){return this._batchTransformChanges(()=>{var V,U;if(!N)return this;for(V in N)V!==g&&(U=S+r.Util._capitalize(V),r.Util._isFunction(this[U])?this[U](N[V]):this._setAttr(V,N[V]))}),this}isListening(){return this._getCache(b,this._isListening)}_isListening(N){if(!this.listening())return!1;const U=this.getParent();return U&&U!==N&&this!==N?U._isListening(N):!0}isVisible(){return this._getCache(I,this._isVisible)}_isVisible(N){if(!this.visible())return!1;const U=this.getParent();return U&&U!==N&&this!==N?U._isVisible(N):!0}shouldDrawHit(N,V=!1){if(N)return this._isVisible(N)&&this._isListening(N);var U=this.getLayer(),F=!1;s.DD._dragElements.forEach(K=>{K.dragStatus==="dragging"&&(K.node.nodeType==="Stage"||K.node.getLayer()===U)&&(F=!0)});var H=!V&&!i.Konva.hitOnDragEnabled&&(F||i.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!H}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var N=this.getDepth(),V=this,U=0,F,H,K,ie;function he(Pe){for(F=[],H=Pe.length,K=0;K<H;K++)ie=Pe[K],U++,ie.nodeType!==_&&(F=F.concat(ie.getChildren().slice())),ie._id===V._id&&(K=H);F.length>0&&F[0].getDepth()<=N&&he(F)}const me=this.getStage();return V.nodeType!==P&&me&&he(me.getChildren()),U}getDepth(){for(var N=0,V=this.parent;V;)N++,V=V.parent;return N}_batchTransformChanges(N){this._batchingTransformChange=!0,N(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(E),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(N){return this._batchTransformChanges(()=>{this.x(N.x),this.y(N.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const N=this.getStage();if(!N)return null;var V=N.getPointerPosition();if(!V)return null;var U=this.getAbsoluteTransform().copy();return U.invert(),U.point(V)}getAbsolutePosition(N){let V=!1,U=this.parent;for(;U;){if(U.isCached()){V=!0;break}U=U.parent}V&&!N&&(N=!0);var F=this.getAbsoluteTransform(N).getMatrix(),H=new r.Transform,K=this.offset();return H.m=F.slice(),H.translate(K.x,K.y),H.getTranslation()}setAbsolutePosition(N){const{x:V,y:U,...F}=this._clearTransform();this.attrs.x=V,this.attrs.y=U,this._clearCache(E);var H=this._getAbsoluteTransform().copy();return H.invert(),H.translate(N.x,N.y),N={x:this.attrs.x+H.getTranslation().x,y:this.attrs.y+H.getTranslation().y},this._setTransform(F),this.setPosition({x:N.x,y:N.y}),this._clearCache(E),this._clearSelfAndDescendantCache(h),this}_setTransform(N){var V;for(V in N)this.attrs[V]=N[V]}_clearTransform(){var N={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,N}move(N){var V=N.x,U=N.y,F=this.x(),H=this.y();return V!==void 0&&(F+=V),U!==void 0&&(H+=U),this.setPosition({x:F,y:H}),this}_eachAncestorReverse(N,V){var U=[],F=this.getParent(),H,K;if(!(V&&V._id===this._id)){for(U.unshift(this);F&&(!V||F._id!==V._id);)U.unshift(F),F=F.parent;for(H=U.length,K=0;K<H;K++)N(U[K])}}rotate(N){return this.rotation(this.rotation()+N),this}moveToTop(){if(!this.parent)return r.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var N=this.index,V=this.parent.getChildren().length;return N<V-1?(this.parent.children.splice(N,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return r.Util.warn("Node has no parent. moveUp function is ignored."),!1;var N=this.index,V=this.parent.getChildren().length;return N<V-1?(this.parent.children.splice(N,1),this.parent.children.splice(N+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return r.Util.warn("Node has no parent. moveDown function is ignored."),!1;var N=this.index;return N>0?(this.parent.children.splice(N,1),this.parent.children.splice(N-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return r.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var N=this.index;return N>0?(this.parent.children.splice(N,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(N){if(!this.parent)return r.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(N<0||N>=this.parent.children.length)&&r.Util.warn("Unexpected value "+N+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var V=this.index;return this.parent.children.splice(V,1),this.parent.children.splice(N,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var N=this.opacity(),V=this.getParent();return V&&!V._isUnderCache&&(N*=V.getAbsoluteOpacity()),N}moveTo(N){return this.getParent()!==N&&(this._remove(),N.add(this)),this}toObject(){var N=this.getAttrs(),V,U,F,H,K;const ie={attrs:{},className:this.getClassName()};for(V in N)U=N[V],K=r.Util.isObject(U)&&!r.Util._isPlainObject(U)&&!r.Util._isArray(U),!K&&(F=typeof this[V]=="function"&&this[V],delete N[V],H=F?F.call(this):null,N[V]=U,H!==U&&(ie.attrs[V]=U));return r.Util._prepareToStringify(ie)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(N,V,U){var F=[];V&&this._isMatch(N)&&F.push(this);for(var H=this.parent;H;){if(H===U)return F;H._isMatch(N)&&F.push(H),H=H.parent}return F}isAncestorOf(N){return!1}findAncestor(N,V,U){return this.findAncestors(N,V,U)[0]}_isMatch(N){if(!N)return!1;if(typeof N=="function")return N(this);var V=N.replace(/ /g,"").split(","),U=V.length,F,H;for(F=0;F<U;F++)if(H=V[F],r.Util.isValidSelector(H)||(r.Util.warn('Selector "'+H+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),r.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),r.Util.warn("Konva is awesome, right?")),H.charAt(0)==="#"){if(this.id()===H.slice(1))return!0}else if(H.charAt(0)==="."){if(this.hasName(H.slice(1)))return!0}else if(this.className===H||this.nodeType===H)return!0;return!1}getLayer(){var N=this.getParent();return N?N.getLayer():null}getStage(){return this._getCache(T,this._getStage)}_getStage(){var N=this.getParent();return N?N.getStage():null}fire(N,V={},U){return V.target=V.target||this,U?this._fireAndBubble(N,V):this._fire(N,V),this}getAbsoluteTransform(N){return N?this._getAbsoluteTransform(N):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(N){var V;if(N)return V=new r.Transform,this._eachAncestorReverse(function(F){var H=F.transformsEnabled();H==="all"?V.multiply(F.getTransform()):H==="position"&&V.translate(F.x()-F.offsetX(),F.y()-F.offsetY())},N),V;V=this._cache.get(h)||new r.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(V):V.reset();var U=this.transformsEnabled();if(U==="all")V.multiply(this.getTransform());else if(U==="position"){const F=this.attrs.x||0,H=this.attrs.y||0,K=this.attrs.offsetX||0,ie=this.attrs.offsetY||0;V.translate(F-K,H-ie)}return V.dirty=!1,V}getAbsoluteScale(N){for(var V=this;V;)V._isUnderCache&&(N=V),V=V.getParent();const F=this.getAbsoluteTransform(N).decompose();return{x:F.scaleX,y:F.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(E,this._getTransform)}_getTransform(){var N,V,U=this._cache.get(E)||new r.Transform;U.reset();var F=this.x(),H=this.y(),K=i.Konva.getAngle(this.rotation()),ie=(N=this.attrs.scaleX)!==null&&N!==void 0?N:1,he=(V=this.attrs.scaleY)!==null&&V!==void 0?V:1,me=this.attrs.skewX||0,Pe=this.attrs.skewY||0,_e=this.attrs.offsetX||0,ue=this.attrs.offsetY||0;return(F!==0||H!==0)&&U.translate(F,H),K!==0&&U.rotate(K),(me!==0||Pe!==0)&&U.skew(me,Pe),(ie!==1||he!==1)&&U.scale(ie,he),(_e!==0||ue!==0)&&U.translate(-1*_e,-1*ue),U.dirty=!1,U}clone(N){var V=r.Util.cloneObject(this.attrs),U,F,H,K,ie;for(U in N)V[U]=N[U];var he=new this.constructor(V);for(U in this.eventListeners)for(F=this.eventListeners[U],H=F.length,K=0;K<H;K++)ie=F[K],ie.name.indexOf(y)<0&&(he.eventListeners[U]||(he.eventListeners[U]=[]),he.eventListeners[U].push(ie));return he}_toKonvaCanvas(N){N=N||{};var V=this.getClientRect(),U=this.getStage(),F=N.x!==void 0?N.x:Math.floor(V.x),H=N.y!==void 0?N.y:Math.floor(V.y),K=N.pixelRatio||1,ie=new n.SceneCanvas({width:N.width||Math.ceil(V.width)||(U?U.width():0),height:N.height||Math.ceil(V.height)||(U?U.height():0),pixelRatio:K}),he=ie.getContext();const me=new n.SceneCanvas({width:ie.width/ie.pixelRatio+Math.abs(F),height:ie.height/ie.pixelRatio+Math.abs(H),pixelRatio:ie.pixelRatio});return N.imageSmoothingEnabled===!1&&(he._context.imageSmoothingEnabled=!1),he.save(),(F||H)&&he.translate(-1*F,-1*H),this.drawScene(ie,void 0,me),he.restore(),ie}toCanvas(N){return this._toKonvaCanvas(N)._canvas}toDataURL(N){N=N||{};var V=N.mimeType||null,U=N.quality||null,F=this._toKonvaCanvas(N).toDataURL(V,U);return N.callback&&N.callback(F),F}toImage(N){return new Promise((V,U)=>{try{const F=N==null?void 0:N.callback;F&&delete N.callback,r.Util._urlToImage(this.toDataURL(N),function(H){V(H),F==null||F(H)})}catch(F){U(F)}})}toBlob(N){return new Promise((V,U)=>{try{const F=N==null?void 0:N.callback;F&&delete N.callback,this.toCanvas(N).toBlob(H=>{V(H),F==null||F(H)},N==null?void 0:N.mimeType,N==null?void 0:N.quality)}catch(F){U(F)}})}setSize(N){return this.width(N.width),this.height(N.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance}_off(N,V,U){var F=this.eventListeners[N],H,K,ie;for(H=0;H<F.length;H++)if(K=F[H].name,ie=F[H].handler,(K!=="konva"||V==="konva")&&(!V||K===V)&&(!U||U===ie)){if(F.splice(H,1),F.length===0){delete this.eventListeners[N];break}H--}}_fireChangeEvent(N,V,U){this._fire(N+p,{oldVal:V,newVal:U})}addName(N){if(!this.hasName(N)){var V=this.name(),U=V?V+" "+N:N;this.name(U)}return this}hasName(N){if(!N)return!1;const V=this.name();if(!V)return!1;var U=(V||"").split(/\s/g);return U.indexOf(N)!==-1}removeName(N){var V=(this.name()||"").split(/\s/g),U=V.indexOf(N);return U!==-1&&(V.splice(U,1),this.name(V.join(" "))),this}setAttr(N,V){var U=this[S+r.Util._capitalize(N)];return r.Util._isFunction(U)?U.call(this,V):this._setAttr(N,V),this}_requestDraw(){if(i.Konva.autoDrawEnabled){const N=this.getLayer()||this.getStage();N==null||N.batchDraw()}}_setAttr(N,V){var U=this.attrs[N];U===V&&!r.Util.isObject(V)||(V==null?delete this.attrs[N]:this.attrs[N]=V,this._shouldFireChangeEvents&&this._fireChangeEvent(N,U,V),this._requestDraw())}_setComponentAttr(N,V,U){var F;U!==void 0&&(F=this.attrs[N],F||(this.attrs[N]=this.getAttr(N)),this.attrs[N][V]=U,this._fireChangeEvent(N,F,U))}_fireAndBubble(N,V,U){V&&this.nodeType===_&&(V.target=this);var F=(N===w||N===x)&&(U&&(this===U||this.isAncestorOf&&this.isAncestorOf(U))||this.nodeType==="Stage"&&!U);if(!F){this._fire(N,V);var H=(N===w||N===x)&&U&&U.isAncestorOf&&U.isAncestorOf(this)&&!U.isAncestorOf(this.parent);(V&&!V.cancelBubble||!V)&&this.parent&&this.parent.isListening()&&!H&&(U&&U.parent?this._fireAndBubble.call(this.parent,N,V,U):this._fireAndBubble.call(this.parent,N,V))}}_getProtoListeners(N){var V,U,F;const H=(V=this._cache.get(c))!==null&&V!==void 0?V:{};let K=H==null?void 0:H[N];if(K===void 0){K=[];let ie=Object.getPrototypeOf(this);for(;ie;){const he=(F=(U=ie.eventListeners)===null||U===void 0?void 0:U[N])!==null&&F!==void 0?F:[];K.push(...he),ie=Object.getPrototypeOf(ie)}H[N]=K,this._cache.set(c,H)}return K}_fire(N,V){V=V||{},V.currentTarget=this,V.type=N;const U=this._getProtoListeners(N);if(U)for(var F=0;F<U.length;F++)U[F].handler.call(this,V);const H=this.eventListeners[N];if(H)for(var F=0;F<H.length;F++)H[F].handler.call(this,V)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(N){var V=N?N.pointerId:void 0,U=this.getStage(),F=this.getAbsolutePosition();if(U){var H=U._getPointerById(V)||U._changedPointerPositions[0]||F;s.DD._dragElements.set(this._id,{node:this,startPointerPos:H,offset:{x:H.x-F.x,y:H.y-F.y},dragStatus:"ready",pointerId:V})}}startDrag(N,V=!0){s.DD._dragElements.has(this._id)||this._createDragElement(N);const U=s.DD._dragElements.get(this._id);U.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:N&&N.evt},V)}_setDragPosition(N,V){const U=this.getStage()._getPointerById(V.pointerId);if(U){var F={x:U.x-V.offset.x,y:U.y-V.offset.y},H=this.dragBoundFunc();if(H!==void 0){const K=H.call(this,F,N);K?F=K:r.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==F.x||this._lastPos.y!==F.y)&&(this.setAbsolutePosition(F),this._requestDraw()),this._lastPos=F}}stopDrag(N){const V=s.DD._dragElements.get(this._id);V&&(V.dragStatus="stopped"),s.DD._endDragBefore(N),s.DD._endDragAfter(N)}setDraggable(N){this._setAttr("draggable",N),this._dragChange()}isDragging(){const N=s.DD._dragElements.get(this._id);return N?N.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(N){var V=N.evt.button!==void 0,U=!V||i.Konva.dragButtons.indexOf(N.evt.button)>=0;if(U&&!this.isDragging()){var F=!1;s.DD._dragElements.forEach(H=>{this.isAncestorOf(H.node)&&(F=!0)}),F||this._createDragElement(N)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var N=this.getStage();if(!N)return;const V=s.DD._dragElements.get(this._id),U=V&&V.dragStatus==="dragging",F=V&&V.dragStatus==="ready";U?this.stopDrag():F&&s.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(N={x:0,y:0}){const V=this.getStage();if(!V)return!1;const U={x:-N.x,y:-N.y,width:V.width()+2*N.x,height:V.height()+2*N.y};return r.Util.haveIntersection(U,this.getClientRect())}static create(N,V){return r.Util._isString(N)&&(N=JSON.parse(N)),this._createNode(N,V)}static _createNode(N,V){var U=M.prototype.getClassName.call(N),F=N.children,H,K,ie;V&&(N.attrs.container=V),i.Konva[U]||(r.Util.warn('Can not find a node with class name "'+U+'". Fallback to "Shape".'),U="Shape");const he=i.Konva[U];if(H=new he(N.attrs),F)for(K=F.length,ie=0;ie<K;ie++)H.add(M._createNode(F[ie]));return H}}gg.Node=M,M.prototype.nodeType="Node",M.prototype._attrsAffectingSize=[],M.prototype.eventListeners={},M.prototype.on.call(M.prototype,A,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(E),this._clearSelfAndDescendantCache(h)}),M.prototype.on.call(M.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(I)}),M.prototype.on.call(M.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(b)}),M.prototype.on.call(M.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const $=e.Factory.addGetterSetter;return $(M,"zIndex"),$(M,"absolutePosition"),$(M,"position"),$(M,"x",0,(0,o.getNumberValidator)()),$(M,"y",0,(0,o.getNumberValidator)()),$(M,"globalCompositeOperation","source-over",(0,o.getStringValidator)()),$(M,"opacity",1,(0,o.getNumberValidator)()),$(M,"name","",(0,o.getStringValidator)()),$(M,"id","",(0,o.getStringValidator)()),$(M,"rotation",0,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(M,"scale",["x","y"]),$(M,"scaleX",1,(0,o.getNumberValidator)()),$(M,"scaleY",1,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(M,"skew",["x","y"]),$(M,"skewX",0,(0,o.getNumberValidator)()),$(M,"skewY",0,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(M,"offset",["x","y"]),$(M,"offsetX",0,(0,o.getNumberValidator)()),$(M,"offsetY",0,(0,o.getNumberValidator)()),$(M,"dragDistance",null,(0,o.getNumberValidator)()),$(M,"width",0,(0,o.getNumberValidator)()),$(M,"height",0,(0,o.getNumberValidator)()),$(M,"listening",!0,(0,o.getBooleanValidator)()),$(M,"preventDefault",!0,(0,o.getBooleanValidator)()),$(M,"filters",null,function(L){return this._filterUpToDate=!1,L}),$(M,"visible",!0,(0,o.getBooleanValidator)()),$(M,"transformsEnabled","all",(0,o.getStringValidator)()),$(M,"size"),$(M,"dragBoundFunc"),$(M,"draggable",!1,(0,o.getBooleanValidator)()),e.Factory.backCompat(M,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),gg}var yg={},zN;function y_(){if(zN)return yg;zN=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.Container=void 0;const r=Si(),e=er(),n=Mi();class i extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(o){if(!o)return this.children||[];const a=this.children||[];var c=[];return a.forEach(function(h){o(h)&&c.push(h)}),c}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.destroy()}),this.children=[],this._requestDraw(),this}add(...o){if(o.length===0)return this;if(o.length>1){for(var a=0;a<o.length;a++)this.add(o[a]);return this}const c=o[0];return c.getParent()?(c.moveTo(this),this):(this._validateAdd(c),c.index=this.getChildren().length,c.parent=this,c._clearCaches(),this.getChildren().push(c),this._fire("add",{child:c}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(o){return this._generalFind(o,!1)}findOne(o){var a=this._generalFind(o,!0);return a.length>0?a[0]:void 0}_generalFind(o,a){var c=[];return this._descendants(h=>{const d=h._isMatch(o);return d&&c.push(h),!!(d&&a)}),c}_descendants(o){let a=!1;const c=this.getChildren();for(const h of c){if(a=o(h),a)return!0;if(h.hasChildren()&&(a=h._descendants(o),a))return!0}return!1}toObject(){var o=e.Node.prototype.toObject.call(this);return o.children=[],this.getChildren().forEach(a=>{o.children.push(a.toObject())}),o}isAncestorOf(o){for(var a=o.getParent();a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(o){var a=e.Node.prototype.clone.call(this,o);return this.getChildren().forEach(function(c){a.add(c.clone())}),a}getAllIntersections(o){var a=[];return this.find("Shape").forEach(c=>{c.isVisible()&&c.intersects(o)&&a.push(c)}),a}_clearSelfAndDescendantCache(o){var a;super._clearSelfAndDescendantCache(o),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(c){c._clearSelfAndDescendantCache(o)}))}_setChildrenIndices(){var o;(o=this.children)===null||o===void 0||o.forEach(function(a,c){a.index=c}),this._requestDraw()}drawScene(o,a,c){var h=this.getLayer(),d=o||h&&h.getCanvas(),f=d&&d.getContext(),p=this._getCanvasCache(),g=p&&p.scene,y=d&&d.isCache;if(!this.isVisible()&&!y)return this;if(g){f.save();var b=this.getAbsoluteTransform(a).getMatrix();f.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedSceneCanvas(f),f.restore()}else this._drawChildren("drawScene",d,a,c);return this}drawHit(o,a){if(!this.shouldDrawHit(a))return this;var c=this.getLayer(),h=o||c&&c.hitCanvas,d=h&&h.getContext(),f=this._getCanvasCache(),p=f&&f.hit;if(p){d.save();var g=this.getAbsoluteTransform(a).getMatrix();d.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(d),d.restore()}else this._drawChildren("drawHit",h,a);return this}_drawChildren(o,a,c,h){var d,f=a&&a.getContext(),p=this.clipWidth(),g=this.clipHeight(),y=this.clipFunc(),b=typeof p=="number"&&typeof g=="number"||y;const w=c===this;if(b){f.save();var x=this.getAbsoluteTransform(c),S=x.getMatrix();f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),f.beginPath();let E;if(y)E=y.call(this,f,this);else{var _=this.clipX(),O=this.clipY();f.rect(_||0,O||0,p,g)}f.clip.apply(f,E),S=x.copy().invert().getMatrix(),f.transform(S[0],S[1],S[2],S[3],S[4],S[5])}var T=!w&&this.globalCompositeOperation()!=="source-over"&&o==="drawScene";T&&(f.save(),f._applyGlobalCompositeOperation(this)),(d=this.children)===null||d===void 0||d.forEach(function(E){E[o](a,c,h)}),T&&f.restore(),b&&f.restore()}getClientRect(o={}){var a,c=o.skipTransform,h=o.relativeTo,d,f,p,g,y={x:1/0,y:1/0,width:0,height:0},b=this;(a=this.children)===null||a===void 0||a.forEach(function(O){if(O.visible()){var T=O.getClientRect({relativeTo:b,skipShadow:o.skipShadow,skipStroke:o.skipStroke});T.width===0&&T.height===0||(d===void 0?(d=T.x,f=T.y,p=T.x+T.width,g=T.y+T.height):(d=Math.min(d,T.x),f=Math.min(f,T.y),p=Math.max(p,T.x+T.width),g=Math.max(g,T.y+T.height)))}});for(var w=this.find("Shape"),x=!1,S=0;S<w.length;S++){var _=w[S];if(_._isVisible(this)){x=!0;break}}return x&&d!==void 0?y={x:d,y:f,width:p-d,height:g-f}:y={x:0,y:0,width:0,height:0},c?y:this._transformedRect(y,h)}}return yg.Container=i,r.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),r.Factory.addGetterSetter(i,"clipX",void 0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(i,"clipY",void 0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(i,"clipWidth",void 0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(i,"clipHeight",void 0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(i,"clipFunc"),yg}var T2={},po={},XN;function $7(){if(XN)return po;XN=1,Object.defineProperty(po,"__esModule",{value:!0}),po.releaseCapture=po.setPointerCapture=po.hasPointerCapture=po.createEvent=po.getCapturedShape=void 0;const r=_i(),e=new Map,n=r.Konva._global.PointerEvent!==void 0;function i(h){return e.get(h)}po.getCapturedShape=i;function s(h){return{evt:h,pointerId:h.pointerId}}po.createEvent=s;function o(h,d){return e.get(h)===d}po.hasPointerCapture=o;function a(h,d){c(h),d.getStage()&&(e.set(h,d),n&&d._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}po.setPointerCapture=a;function c(h,d){const f=e.get(h);if(!f)return;const p=f.getStage();p&&p.content,e.delete(h),n&&f._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return po.releaseCapture=c,po}var WN;function oCe(){return WN||(WN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Stage=r.stages=void 0;const e=Gn(),n=Si(),i=y_(),s=_i(),o=g_(),a=$3(),c=_i(),h=$7();var d="Stage",f="string",p="px",g="mouseout",y="mouseleave",b="mouseover",w="mouseenter",x="mousemove",S="mousedown",_="mouseup",O="pointermove",T="pointerdown",E="pointerup",P="pointercancel",I="lostpointercapture",A="pointerout",D="pointerleave",M="pointerover",$="pointerenter",L="contextmenu",N="touchstart",V="touchend",U="touchmove",F="touchcancel",H="wheel",K=5,ie=[[w,"_pointerenter"],[S,"_pointerdown"],[x,"_pointermove"],[_,"_pointerup"],[y,"_pointerleave"],[N,"_pointerdown"],[U,"_pointermove"],[V,"_pointerup"],[F,"_pointercancel"],[b,"_pointerover"],[H,"_wheel"],[L,"_contextmenu"],[T,"_pointerdown"],[O,"_pointermove"],[E,"_pointerup"],[P,"_pointercancel"],[I,"_lostpointercapture"]];const he={mouse:{[A]:g,[D]:y,[M]:b,[$]:w,[O]:x,[T]:S,[E]:_,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[D]:"touchleave",[M]:"touchover",[$]:"touchenter",[O]:U,[T]:N,[E]:V,[P]:F,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[D]:D,[M]:M,[$]:$,[O]:O,[T]:T,[E]:E,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},me=ke=>ke.indexOf("pointer")>=0?"pointer":ke.indexOf("touch")>=0?"touch":"mouse",Pe=ke=>{const J=me(ke);if(J==="pointer")return s.Konva.pointerEventsEnabled&&he.pointer;if(J==="touch")return he.touch;if(J==="mouse")return he.mouse};function _e(ke={}){return(ke.clipFunc||ke.clipWidth||ke.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ke}const ue="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";r.stages=[];class Se extends i.Container{constructor(J){super(_e(J)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),r.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{_e(this.attrs)}),this._checkVisibility()}_validateAdd(J){const q=J.getType()==="Layer",z=J.getType()==="FastLayer";q||z||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const J=this.visible()?"":"none";this.content.style.display=J}setContainer(J){if(typeof J===f){if(J.charAt(0)==="."){var q=J.slice(1);J=document.getElementsByClassName(q)[0]}else{var z;J.charAt(0)!=="#"?z=J:z=J.slice(1),J=document.getElementById(z)}if(!J)throw"Can not find container in document with id "+z}return this._setAttr("container",J),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),J.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var J=this.children,q=J.length,z;for(z=0;z<q;z++)J[z].clear();return this}clone(J){return J||(J={}),J.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,J)}destroy(){super.destroy();var J=this.content;J&&e.Util._isInDocument(J)&&this.container().removeChild(J);var q=r.stages.indexOf(this);return q>-1&&r.stages.splice(q,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const J=this._pointerPositions[0]||this._changedPointerPositions[0];return J?{x:J.x,y:J.y}:(e.Util.warn(ue),null)}_getPointerById(J){return this._pointerPositions.find(q=>q.id===J)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(J){J=J||{},J.x=J.x||0,J.y=J.y||0,J.width=J.width||this.width(),J.height=J.height||this.height();var q=new o.SceneCanvas({width:J.width,height:J.height,pixelRatio:J.pixelRatio||1}),z=q.getContext()._context,X=this.children;return(J.x||J.y)&&z.translate(-1*J.x,-1*J.y),X.forEach(function(te){if(te.isVisible()){var se=te._toKonvaCanvas(J);z.drawImage(se._canvas,J.x,J.y,se.getWidth()/se.getPixelRatio(),se.getHeight()/se.getPixelRatio())}}),q}getIntersection(J){if(!J)return null;var q=this.children,z=q.length,X=z-1,te;for(te=X;te>=0;te--){const se=q[te].getIntersection(J);if(se)return se}return null}_resizeDOM(){var J=this.width(),q=this.height();this.content&&(this.content.style.width=J+p,this.content.style.height=q+p),this.bufferCanvas.setSize(J,q),this.bufferHitCanvas.setSize(J,q),this.children.forEach(z=>{z.setSize({width:J,height:q}),z.draw()})}add(J,...q){if(arguments.length>1){for(var z=0;z<arguments.length;z++)this.add(arguments[z]);return this}super.add(J);var X=this.children.length;return X>K&&e.Util.warn("The stage has "+X+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),J.setSize({width:this.width(),height:this.height()}),J.draw(),s.Konva.isBrowser&&this.content.appendChild(J.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(J){return h.hasPointerCapture(J,this)}setPointerCapture(J){h.setPointerCapture(J,this)}releaseCapture(J){h.releaseCapture(J,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&ie.forEach(([J,q])=>{this.content.addEventListener(J,z=>{this[q](z)},{passive:!1})})}_pointerenter(J){this.setPointersPositions(J);const q=Pe(J.type);q&&this._fire(q.pointerenter,{evt:J,target:this,currentTarget:this})}_pointerover(J){this.setPointersPositions(J);const q=Pe(J.type);q&&this._fire(q.pointerover,{evt:J,target:this,currentTarget:this})}_getTargetShape(J){let q=this[J+"targetShape"];return q&&!q.getStage()&&(q=null),q}_pointerleave(J){const q=Pe(J.type),z=me(J.type);if(q){this.setPointersPositions(J);var X=this._getTargetShape(z),te=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;X&&te?(X._fireAndBubble(q.pointerout,{evt:J}),X._fireAndBubble(q.pointerleave,{evt:J}),this._fire(q.pointerleave,{evt:J,target:this,currentTarget:this}),this[z+"targetShape"]=null):te&&(this._fire(q.pointerleave,{evt:J,target:this,currentTarget:this}),this._fire(q.pointerout,{evt:J,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(J){const q=Pe(J.type),z=me(J.type);if(q){this.setPointersPositions(J);var X=!1;this._changedPointerPositions.forEach(te=>{var se=this.getIntersection(te);if(a.DD.justDragged=!1,s.Konva["_"+z+"ListenClick"]=!0,!se||!se.isListening()){this[z+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&se.setPointerCapture(te.id),this[z+"ClickStartShape"]=se,se._fireAndBubble(q.pointerdown,{evt:J,pointerId:te.id}),X=!0;const Q=J.type.indexOf("touch")>=0;se.preventDefault()&&J.cancelable&&Q&&J.preventDefault()}),X||this._fire(q.pointerdown,{evt:J,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(J){const q=Pe(J.type),z=me(J.type);if(!q)return;s.Konva.isDragging()&&a.DD.node.preventDefault()&&J.cancelable&&J.preventDefault(),this.setPointersPositions(J);var X=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;if(!X)return;var te={};let se=!1;var Q=this._getTargetShape(z);this._changedPointerPositions.forEach(Z=>{const le=h.getCapturedShape(Z.id)||this.getIntersection(Z),pe=Z.id,be={evt:J,pointerId:pe};var Ee=Q!==le;if(Ee&&Q&&(Q._fireAndBubble(q.pointerout,{...be},le),Q._fireAndBubble(q.pointerleave,{...be},le)),le){if(te[le._id])return;te[le._id]=!0}le&&le.isListening()?(se=!0,Ee&&(le._fireAndBubble(q.pointerover,{...be},Q),le._fireAndBubble(q.pointerenter,{...be},Q),this[z+"targetShape"]=le),le._fireAndBubble(q.pointermove,{...be})):Q&&(this._fire(q.pointerover,{evt:J,target:this,currentTarget:this,pointerId:pe}),this[z+"targetShape"]=null)}),se||this._fire(q.pointermove,{evt:J,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(J){const q=Pe(J.type),z=me(J.type);if(!q)return;this.setPointersPositions(J);const X=this[z+"ClickStartShape"],te=this[z+"ClickEndShape"];var se={};let Q=!1;this._changedPointerPositions.forEach(Z=>{const le=h.getCapturedShape(Z.id)||this.getIntersection(Z);if(le){if(le.releaseCapture(Z.id),se[le._id])return;se[le._id]=!0}const pe=Z.id,be={evt:J,pointerId:pe};let Ee=!1;s.Konva["_"+z+"InDblClickWindow"]?(Ee=!0,clearTimeout(this[z+"DblTimeout"])):a.DD.justDragged||(s.Konva["_"+z+"InDblClickWindow"]=!0,clearTimeout(this[z+"DblTimeout"])),this[z+"DblTimeout"]=setTimeout(function(){s.Konva["_"+z+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),le&&le.isListening()?(Q=!0,this[z+"ClickEndShape"]=le,le._fireAndBubble(q.pointerup,{...be}),s.Konva["_"+z+"ListenClick"]&&X&&X===le&&(le._fireAndBubble(q.pointerclick,{...be}),Ee&&te&&te===le&&le._fireAndBubble(q.pointerdblclick,{...be}))):(this[z+"ClickEndShape"]=null,s.Konva["_"+z+"ListenClick"]&&this._fire(q.pointerclick,{evt:J,target:this,currentTarget:this,pointerId:pe}),Ee&&this._fire(q.pointerdblclick,{evt:J,target:this,currentTarget:this,pointerId:pe}))}),Q||this._fire(q.pointerup,{evt:J,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+z+"ListenClick"]=!1,J.cancelable&&z!=="touch"&&J.preventDefault()}_contextmenu(J){this.setPointersPositions(J);var q=this.getIntersection(this.getPointerPosition());q&&q.isListening()?q._fireAndBubble(L,{evt:J}):this._fire(L,{evt:J,target:this,currentTarget:this})}_wheel(J){this.setPointersPositions(J);var q=this.getIntersection(this.getPointerPosition());q&&q.isListening()?q._fireAndBubble(H,{evt:J}):this._fire(H,{evt:J,target:this,currentTarget:this})}_pointercancel(J){this.setPointersPositions(J);const q=h.getCapturedShape(J.pointerId)||this.getIntersection(this.getPointerPosition());q&&q._fireAndBubble(E,h.createEvent(J)),h.releaseCapture(J.pointerId)}_lostpointercapture(J){h.releaseCapture(J.pointerId)}setPointersPositions(J){var q=this._getContentPosition(),z=null,X=null;J=J||window.event,J.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(J.touches,te=>{this._pointerPositions.push({id:te.identifier,x:(te.clientX-q.left)/q.scaleX,y:(te.clientY-q.top)/q.scaleY})}),Array.prototype.forEach.call(J.changedTouches||J.touches,te=>{this._changedPointerPositions.push({id:te.identifier,x:(te.clientX-q.left)/q.scaleX,y:(te.clientY-q.top)/q.scaleY})})):(z=(J.clientX-q.left)/q.scaleX,X=(J.clientY-q.top)/q.scaleY,this.pointerPos={x:z,y:X},this._pointerPositions=[{x:z,y:X,id:e.Util._getFirstPointerId(J)}],this._changedPointerPositions=[{x:z,y:X,id:e.Util._getFirstPointerId(J)}])}_setPointerPosition(J){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(J)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var J=this.content.getBoundingClientRect();return{top:J.top,left:J.left,scaleX:J.width/this.content.clientWidth||1,scaleY:J.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!s.Konva.isBrowser){var J=this.container();if(!J)throw"Stage has no container. A container is required.";J.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),J.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(J){J.batchDraw()}),this}}r.Stage=Se,Se.prototype.nodeType=d,(0,c._registerNode)(Se),n.Factory.addGetterSetter(Se,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{r.stages.forEach(ke=>{ke.batchDraw()})})}(T2)),T2}var vg={},M2={},QN;function Nr(){return QN||(QN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Shape=r.shapes=void 0;const e=_i(),n=Gn(),i=Si(),s=er(),o=Mi(),a=_i(),c=$7();var h="hasShadow",d="shadowRGBA",f="patternImage",p="linearGradient",g="radialGradient";let y;function b(){return y||(y=n.Util.createCanvasElement().getContext("2d"),y)}r.shapes={};function w(D){const M=this.attrs.fillRule;M?D.fill(M):D.fill()}function x(D){D.stroke()}function S(D){D.fill()}function _(D){D.stroke()}function O(){this._clearCache(h)}function T(){this._clearCache(d)}function E(){this._clearCache(f)}function P(){this._clearCache(p)}function I(){this._clearCache(g)}class A extends s.Node{constructor(M){super(M);let $;for(;$=n.Util.getRandomColor(),!($&&!($ in r.shapes)););this.colorKey=$,r.shapes[$]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var M=b();const $=M.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if($&&$.setTransform){const L=new n.Transform;L.translate(this.fillPatternX(),this.fillPatternY()),L.rotate(e.Konva.getAngle(this.fillPatternRotation())),L.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),L.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const N=L.getMatrix(),V=typeof DOMMatrix>"u"?{a:N[0],b:N[1],c:N[2],d:N[3],e:N[4],f:N[5]}:new DOMMatrix(N);$.setTransform(V)}return $}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){var M=this.fillLinearGradientColorStops();if(M){for(var $=b(),L=this.fillLinearGradientStartPoint(),N=this.fillLinearGradientEndPoint(),V=$.createLinearGradient(L.x,L.y,N.x,N.y),U=0;U<M.length;U+=2)V.addColorStop(M[U],M[U+1]);return V}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){var M=this.fillRadialGradientColorStops();if(M){for(var $=b(),L=this.fillRadialGradientStartPoint(),N=this.fillRadialGradientEndPoint(),V=$.createRadialGradient(L.x,L.y,this.fillRadialGradientStartRadius(),N.x,N.y,this.fillRadialGradientEndRadius()),U=0;U<M.length;U+=2)V.addColorStop(M[U],M[U+1]);return V}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){var $=this.getStage();if(!$)return!1;const L=$.bufferHitCanvas;return L.getContext().clear(),this.drawHit(L,void 0,!0),L.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete r.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var $;if(!(($=this.attrs.perfectDrawEnabled)!==null&&$!==void 0?$:!0))return!1;const N=M||this.hasFill(),V=this.hasStroke(),U=this.getAbsoluteOpacity()!==1;if(N&&V&&U)return!0;const F=this.hasShadow(),H=this.shadowForStrokeEnabled();return!!(N&&V&&F&&H)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){let $=!1,L=this.getParent();for(;L;){if(L.isCached()){$=!0;break}L=L.getParent()}const N=M.skipTransform,V=M.relativeTo||$&&this.getStage()||void 0,U=this.getSelfRect(),H=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,K=U.width+H,ie=U.height+H,he=!M.skipShadow&&this.hasShadow(),me=he?this.shadowOffsetX():0,Pe=he?this.shadowOffsetY():0,_e=K+Math.abs(me),ue=ie+Math.abs(Pe),Se=he&&this.shadowBlur()||0,ke=_e+Se*2,J=ue+Se*2,q={width:ke,height:J,x:-(H/2+Se)+Math.min(me,0)+U.x,y:-(H/2+Se)+Math.min(Pe,0)+U.y};return N?q:this._transformedRect(q,V)}drawScene(M,$,L){var N=this.getLayer(),V=M||N.getCanvas(),U=V.getContext(),F=this._getCanvasCache(),H=this.getSceneFunc(),K=this.hasShadow(),ie,he,me=V.isCache,Pe=$===this;if(!this.isVisible()&&!Pe)return this;if(F){U.save();var _e=this.getAbsoluteTransform($).getMatrix();return U.transform(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5]),this._drawCachedSceneCanvas(U),U.restore(),this}if(!H)return this;if(U.save(),this._useBufferCanvas()&&!me){ie=this.getStage();const ke=L||ie.bufferCanvas;he=ke.getContext(),he.clear(),he.save(),he._applyLineJoin(this);var ue=this.getAbsoluteTransform($).getMatrix();he.transform(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5]),H.call(this,he,this),he.restore();var Se=ke.pixelRatio;K&&U._applyShadow(this),U._applyOpacity(this),U._applyGlobalCompositeOperation(this),U.drawImage(ke._canvas,0,0,ke.width/Se,ke.height/Se)}else{if(U._applyLineJoin(this),!Pe){var ue=this.getAbsoluteTransform($).getMatrix();U.transform(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5]),U._applyOpacity(this),U._applyGlobalCompositeOperation(this)}K&&U._applyShadow(this),H.call(this,U,this)}return U.restore(),this}drawHit(M,$,L=!1){if(!this.shouldDrawHit($,L))return this;var N=this.getLayer(),V=M||N.hitCanvas,U=V&&V.getContext(),F=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),K=H&&H.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),K){U.save();var ie=this.getAbsoluteTransform($).getMatrix();return U.transform(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5]),this._drawCachedHitCanvas(U),U.restore(),this}if(!F)return this;if(U.save(),U._applyLineJoin(this),!(this===$)){var me=this.getAbsoluteTransform($).getMatrix();U.transform(me[0],me[1],me[2],me[3],me[4],me[5])}return F.call(this,U,this),U.restore(),this}drawHitFromCache(M=0){var $=this._getCanvasCache(),L=this._getCachedSceneCanvas(),N=$.hit,V=N.getContext(),U=N.getWidth(),F=N.getHeight(),H,K,ie,he,me,Pe;V.clear(),V.drawImage(L._canvas,0,0,U,F);try{for(H=V.getImageData(0,0,U,F),K=H.data,ie=K.length,he=n.Util._hexToRgb(this.colorKey),me=0;me<ie;me+=4)Pe=K[me+3],Pe>M?(K[me]=he.r,K[me+1]=he.g,K[me+2]=he.b,K[me+3]=255):K[me+3]=0;V.putImageData(H,0,0)}catch(_e){n.Util.error("Unable to draw hit graph from cached scene canvas. "+_e.message)}return this}hasPointerCapture(M){return c.hasPointerCapture(M,this)}setPointerCapture(M){c.setPointerCapture(M,this)}releaseCapture(M){c.releaseCapture(M,this)}}r.Shape=A,A.prototype._fillFunc=w,A.prototype._strokeFunc=x,A.prototype._fillFuncHit=S,A.prototype._strokeFuncHit=_,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,a._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",O),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",T),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",E),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",I),i.Factory.addGetterSetter(A,"stroke",void 0,(0,o.getStringOrGradientValidator)()),i.Factory.addGetterSetter(A,"strokeWidth",2,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,o.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,o.getBooleanValidator)()),i.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,o.getBooleanValidator)()),i.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,o.getBooleanValidator)()),i.Factory.addGetterSetter(A,"lineJoin"),i.Factory.addGetterSetter(A,"lineCap"),i.Factory.addGetterSetter(A,"sceneFunc"),i.Factory.addGetterSetter(A,"hitFunc"),i.Factory.addGetterSetter(A,"dash"),i.Factory.addGetterSetter(A,"dashOffset",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"shadowColor",void 0,(0,o.getStringValidator)()),i.Factory.addGetterSetter(A,"shadowBlur",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"shadowOpacity",1,(0,o.getNumberValidator)()),i.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"fillPatternImage"),i.Factory.addGetterSetter(A,"fill",void 0,(0,o.getStringOrGradientValidator)()),i.Factory.addGetterSetter(A,"fillPatternX",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"fillPatternY",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(A,"fillEnabled",!0),i.Factory.addGetterSetter(A,"strokeEnabled",!0),i.Factory.addGetterSetter(A,"shadowEnabled",!0),i.Factory.addGetterSetter(A,"dashEnabled",!0),i.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(A,"fillPriority","color"),i.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,o.getNumberValidator)()),i.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,o.getNumberValidator)()),i.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(A,"fillPatternRotation",0),i.Factory.addGetterSetter(A,"fillRule",void 0,(0,o.getStringValidator)()),i.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(M2)),M2}var HN;function V7(){if(HN)return vg;HN=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.Layer=void 0;const r=Gn(),e=y_(),n=er(),i=Si(),s=g_(),o=Mi(),a=Nr(),c=_i();var h="#",d="beforeDraw",f="draw",p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],g=p.length;let y=class extends e.Container{constructor(w){super(w),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(w){return this.getContext().clear(w),this.getHitCanvas().getContext().clear(w),this}setZIndex(w){super.setZIndex(w);var x=this.getStage();return x&&x.content&&(x.content.removeChild(this.getNativeCanvasElement()),w<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[w+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);var w=this.getStage();return w&&w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var w=n.Node.prototype.moveUp.call(this);if(!w)return!1;var x=this.getStage();return!x||!x.content?!1:(x.content.removeChild(this.getNativeCanvasElement()),this.index<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[this.index+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){var w=this.getStage();if(w){var x=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),x[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){var w=this.getStage();if(w){var x=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),x[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var w=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),w&&w.parentNode&&r.Util._isInDocument(w)&&w.parentNode.removeChild(w),this}getStage(){return this.parent}setSize({width:w,height:x}){return this.canvas.setSize(w,x),this.hitCanvas.setSize(w,x),this._setSmoothEnabled(),this}_validateAdd(w){var x=w.getType();x!=="Group"&&x!=="Shape"&&r.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(w){return w=w||{},w.width=w.width||this.getWidth(),w.height=w.height||this.getHeight(),w.x=w.x!==void 0?w.x:this.x(),w.y=w.y!==void 0?w.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,w)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){r.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){r.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,r.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(w){if(!this.isListening()||!this.isVisible())return null;for(var x=1,S=!1;;){for(let _=0;_<g;_++){const O=p[_],T=this._getIntersection({x:w.x+O.x*x,y:w.y+O.y*x}),E=T.shape;if(E)return E;if(S=!!T.antialiased,!T.antialiased)break}if(S)x+=1;else return null}}_getIntersection(w){const x=this.hitCanvas.pixelRatio,S=this.hitCanvas.context.getImageData(Math.round(w.x*x),Math.round(w.y*x),1,1).data,_=S[3];if(_===255){const O=r.Util._rgbToHex(S[0],S[1],S[2]),T=a.shapes[h+O];return T?{shape:T}:{antialiased:!0}}else if(_>0)return{antialiased:!0};return{}}drawScene(w,x){var S=this.getLayer(),_=w||S&&S.getCanvas();return this._fire(d,{node:this}),this.clearBeforeDraw()&&_.getContext().clear(),e.Container.prototype.drawScene.call(this,_,x),this._fire(f,{node:this}),this}drawHit(w,x){var S=this.getLayer(),_=w||S&&S.hitCanvas;return S&&S.clearBeforeDraw()&&S.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,_,x),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(w){r.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(w)}getHitGraphEnabled(w){return r.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var w=this.parent,x=!!this.hitCanvas._canvas.parentNode;x?w.content.removeChild(this.hitCanvas._canvas):w.content.appendChild(this.hitCanvas._canvas)}}destroy(){return r.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return vg.Layer=y,y.prototype.nodeType="Layer",(0,c._registerNode)(y),i.Factory.addGetterSetter(y,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(y,"clearBeforeDraw",!0),i.Factory.addGetterSetter(y,"hitGraphEnabled",!0,(0,o.getBooleanValidator)()),vg}var bg={},GN;function aCe(){if(GN)return bg;GN=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.FastLayer=void 0;const r=Gn(),e=V7(),n=_i();let i=class extends e.Layer{constructor(o){super(o),this.listening(!1),r.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return bg.FastLayer=i,i.prototype.nodeType="FastLayer",(0,n._registerNode)(i),bg}var xg={},YN;function V3(){if(YN)return xg;YN=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.Group=void 0;const r=Gn(),e=y_(),n=_i();let i=class extends e.Container{_validateAdd(o){var a=o.getType();a!=="Group"&&a!=="Shape"&&r.Util.throw("You may only add groups and shapes to groups.")}};return xg.Group=i,i.prototype.nodeType="Group",(0,n._registerNode)(i),xg}var Og={},jN;function L3(){if(jN)return Og;jN=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.Animation=void 0;const r=_i(),e=Gn(),n=function(){return r.glob.performance&&r.glob.performance.now?function(){return r.glob.performance.now()}:function(){return new Date().getTime()}}();let i=class If{constructor(o,a){this.id=If.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=o,this.setLayers(a)}setLayers(o){let a=[];return o&&(a=Array.isArray(o)?o:[o]),this.layers=a,this}getLayers(){return this.layers}addLayer(o){const a=this.layers,c=a.length;for(let h=0;h<c;h++)if(a[h]._id===o._id)return!1;return this.layers.push(o),!0}isRunning(){const a=If.animations,c=a.length;for(let h=0;h<c;h++)if(a[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),If._addAnimation(this),this}stop(){return If._removeAnimation(this),this}_updateFrameObject(o){this.frame.timeDiff=o-this.frame.lastTime,this.frame.lastTime=o,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(o){this.animations.push(o),this._handleAnimation()}static _removeAnimation(o){const a=o.id,c=this.animations,h=c.length;for(let d=0;d<h;d++)if(c[d].id===a){this.animations.splice(d,1);break}}static _runFrames(){const o={},a=this.animations;for(let c=0;c<a.length;c++){const h=a[c],d=h.layers,f=h.func;h._updateFrameObject(n());const p=d.length;let g;if(f?g=f.call(h,h.frame)!==!1:g=!0,!!g)for(let y=0;y<p;y++){const b=d[y];b._id!==void 0&&(o[b._id]=b)}}for(let c in o)o.hasOwnProperty(c)&&o[c].batchDraw()}static _animationLoop(){const o=If;o.animations.length?(o._runFrames(),e.Util.requestAnimFrame(o._animationLoop)):o.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Og.Animation=i,i.animations=[],i.animIdCounter=0,i.animRunning=!1,Og}var E2={},qN;function lCe(){return qN||(qN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Easings=r.Tween=void 0;const e=Gn(),n=L3(),i=er(),s=_i();var o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,c=2,h=3,d=0,f=["fill","stroke","shadowColor"];class p{constructor(b,w,x,S,_,O,T){this.prop=b,this.propFunc=w,this.begin=S,this._pos=S,this.duration=O,this._change=0,this.prevPos=0,this.yoyo=T,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=_-this.begin,this.pause()}fire(b){var w=this[b];w&&w()}setTime(b){b>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():b<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=b,this.update())}getTime(){return this._time}setPosition(b){this.prevPos=this._pos,this.propFunc(b),this._pos=b}getPosition(b){return b===void 0&&(b=this._time),this.func(b,this.begin,this._change,this.duration)}play(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(b){this.pause(),this._time=b,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var b=this.getTimer()-this._startTime;this.state===c?this.setTime(b):this.state===h&&this.setTime(this.duration-b)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(b){var w=this,x=b.node,S=x._id,_,O=b.easing||r.Easings.Linear,T=!!b.yoyo,E;typeof b.duration>"u"?_=.3:b.duration===0?_=.001:_=b.duration,this.node=x,this._id=d++;var P=x.getLayer()||(x instanceof s.Konva.Stage?x.getLayers():null);P||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){w.tween.onEnterFrame()},P),this.tween=new p(E,function(I){w._tweenFunc(I)},O,0,1,_*1e3,T),this._addListeners(),g.attrs[S]||(g.attrs[S]={}),g.attrs[S][this._id]||(g.attrs[S][this._id]={}),g.tweens[S]||(g.tweens[S]={});for(E in b)o[E]===void 0&&this._addAttr(E,b[E]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset,this.onUpdate=b.onUpdate}_addAttr(b,w){var x=this.node,S=x._id,_,O,T,E,P,I,A,D;if(T=g.tweens[S][b],T&&delete g.attrs[S][T][b],_=x.getAttr(b),e.Util._isArray(w))if(O=[],P=Math.max(w.length,_.length),b==="points"&&w.length!==_.length&&(w.length>_.length?(A=_,_=e.Util._prepareArrayForTween(_,w,x.closed())):(I=w,w=e.Util._prepareArrayForTween(w,_,x.closed()))),b.indexOf("fill")===0)for(E=0;E<P;E++)if(E%2===0)O.push(w[E]-_[E]);else{var M=e.Util.colorToRGBA(_[E]);D=e.Util.colorToRGBA(w[E]),_[E]=M,O.push({r:D.r-M.r,g:D.g-M.g,b:D.b-M.b,a:D.a-M.a})}else for(E=0;E<P;E++)O.push(w[E]-_[E]);else f.indexOf(b)!==-1?(_=e.Util.colorToRGBA(_),D=e.Util.colorToRGBA(w),O={r:D.r-_.r,g:D.g-_.g,b:D.b-_.b,a:D.a-_.a}):O=w-_;g.attrs[S][this._id][b]={start:_,diff:O,end:w,trueEnd:I,trueStart:A},g.tweens[S][b]=this._id}_tweenFunc(b){var w=this.node,x=g.attrs[w._id][this._id],S,_,O,T,E,P,I,A;for(S in x){if(_=x[S],O=_.start,T=_.diff,A=_.end,e.Util._isArray(O))if(E=[],I=Math.max(O.length,A.length),S.indexOf("fill")===0)for(P=0;P<I;P++)P%2===0?E.push((O[P]||0)+T[P]*b):E.push("rgba("+Math.round(O[P].r+T[P].r*b)+","+Math.round(O[P].g+T[P].g*b)+","+Math.round(O[P].b+T[P].b*b)+","+(O[P].a+T[P].a*b)+")");else for(P=0;P<I;P++)E.push((O[P]||0)+T[P]*b);else f.indexOf(S)!==-1?E="rgba("+Math.round(O.r+T.r*b)+","+Math.round(O.g+T.g*b)+","+Math.round(O.b+T.b*b)+","+(O.a+T.a*b)+")":E=O+T*b;w.setAttr(S,E)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var b=this.node,w=g.attrs[b._id][this._id];w.points&&w.points.trueEnd&&b.setAttr("points",w.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var b=this.node,w=g.attrs[b._id][this._id];w.points&&w.points.trueStart&&b.points(w.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(b){return this.tween.seek(b*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var b=this.node._id,w=this._id,x=g.tweens[b],S;this.pause();for(S in x)delete g.tweens[b][S];delete g.attrs[b][w]}}r.Tween=g,g.attrs={},g.tweens={},i.Node.prototype.to=function(y){var b=y.onFinish;y.node=this,y.onFinish=function(){this.destroy(),b&&b()};var w=new g(y);w.play()},r.Easings={BackEaseIn(y,b,w,x){var S=1.70158;return w*(y/=x)*y*((S+1)*y-S)+b},BackEaseOut(y,b,w,x){var S=1.70158;return w*((y=y/x-1)*y*((S+1)*y+S)+1)+b},BackEaseInOut(y,b,w,x){var S=1.70158;return(y/=x/2)<1?w/2*(y*y*(((S*=1.525)+1)*y-S))+b:w/2*((y-=2)*y*(((S*=1.525)+1)*y+S)+2)+b},ElasticEaseIn(y,b,w,x,S,_){var O=0;return y===0?b:(y/=x)===1?b+w:(_||(_=x*.3),!S||S<Math.abs(w)?(S=w,O=_/4):O=_/(2*Math.PI)*Math.asin(w/S),-(S*Math.pow(2,10*(y-=1))*Math.sin((y*x-O)*(2*Math.PI)/_))+b)},ElasticEaseOut(y,b,w,x,S,_){var O=0;return y===0?b:(y/=x)===1?b+w:(_||(_=x*.3),!S||S<Math.abs(w)?(S=w,O=_/4):O=_/(2*Math.PI)*Math.asin(w/S),S*Math.pow(2,-10*y)*Math.sin((y*x-O)*(2*Math.PI)/_)+w+b)},ElasticEaseInOut(y,b,w,x,S,_){var O=0;return y===0?b:(y/=x/2)===2?b+w:(_||(_=x*(.3*1.5)),!S||S<Math.abs(w)?(S=w,O=_/4):O=_/(2*Math.PI)*Math.asin(w/S),y<1?-.5*(S*Math.pow(2,10*(y-=1))*Math.sin((y*x-O)*(2*Math.PI)/_))+b:S*Math.pow(2,-10*(y-=1))*Math.sin((y*x-O)*(2*Math.PI)/_)*.5+w+b)},BounceEaseOut(y,b,w,x){return(y/=x)<1/2.75?w*(7.5625*y*y)+b:y<2/2.75?w*(7.5625*(y-=1.5/2.75)*y+.75)+b:y<2.5/2.75?w*(7.5625*(y-=2.25/2.75)*y+.9375)+b:w*(7.5625*(y-=2.625/2.75)*y+.984375)+b},BounceEaseIn(y,b,w,x){return w-r.Easings.BounceEaseOut(x-y,0,w,x)+b},BounceEaseInOut(y,b,w,x){return y<x/2?r.Easings.BounceEaseIn(y*2,0,w,x)*.5+b:r.Easings.BounceEaseOut(y*2-x,0,w,x)*.5+w*.5+b},EaseIn(y,b,w,x){return w*(y/=x)*y+b},EaseOut(y,b,w,x){return-w*(y/=x)*(y-2)+b},EaseInOut(y,b,w,x){return(y/=x/2)<1?w/2*y*y+b:-w/2*(--y*(y-2)-1)+b},StrongEaseIn(y,b,w,x){return w*(y/=x)*y*y*y*y+b},StrongEaseOut(y,b,w,x){return w*((y=y/x-1)*y*y*y*y+1)+b},StrongEaseInOut(y,b,w,x){return(y/=x/2)<1?w/2*y*y*y*y*y+b:w/2*((y-=2)*y*y*y*y+2)+b},Linear(y,b,w,x){return w*y/x+b}}}(E2)),E2}var ZN;function cCe(){return ZN||(ZN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Konva=void 0;const e=_i(),n=Gn(),i=er(),s=y_(),o=oCe(),a=V7(),c=aCe(),h=V3(),d=$3(),f=Nr(),p=L3(),g=lCe(),y=N7(),b=g_();r.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:s.Container,Stage:o.Stage,stages:o.stages,Layer:a.Layer,FastLayer:c.FastLayer,Group:h.Group,DD:d.DD,Shape:f.Shape,shapes:f.shapes,Animation:p.Animation,Tween:g.Tween,Easings:g.Easings,Context:y.Context,Canvas:b.Canvas}),r.default=r.Konva}(w2)),w2}var wg={},KN;function hCe(){if(KN)return wg;KN=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.Arc=void 0;const r=Si(),e=Nr(),n=_i(),i=Mi(),s=_i();let o=class extends e.Shape{_sceneFunc(c){var h=n.Konva.getAngle(this.angle()),d=this.clockwise();c.beginPath(),c.arc(0,0,this.outerRadius(),0,h,d),c.arc(0,0,this.innerRadius(),h,0,!d),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}getSelfRect(){const c=this.innerRadius(),h=this.outerRadius(),d=this.clockwise(),f=n.Konva.getAngle(d?360-this.angle():this.angle()),p=Math.cos(Math.min(f,Math.PI)),g=1,y=Math.sin(Math.min(Math.max(Math.PI,f),3*Math.PI/2)),b=Math.sin(Math.min(f,Math.PI/2)),w=p*(p>0?c:h),x=g*h,S=y*(y>0?c:h),_=b*(b>0?h:c);return{x:w,y:d?-1*_:S,width:x-w,height:_-S}}};return wg.Arc=o,o.prototype._centroid=!0,o.prototype.className="Arc",o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(o),r.Factory.addGetterSetter(o,"innerRadius",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"outerRadius",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"angle",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"clockwise",!1,(0,i.getBooleanValidator)()),wg}var _g={},Sg={},JN;function L7(){if(JN)return Sg;JN=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.Line=void 0;const r=Si(),e=Nr(),n=Mi(),i=_i();function s(c,h,d,f,p,g,y){var b=Math.sqrt(Math.pow(d-c,2)+Math.pow(f-h,2)),w=Math.sqrt(Math.pow(p-d,2)+Math.pow(g-f,2)),x=y*b/(b+w),S=y*w/(b+w),_=d-x*(p-c),O=f-x*(g-h),T=d+S*(p-c),E=f+S*(g-h);return[_,O,T,E]}function o(c,h){var d=c.length,f=[],p,g;for(p=2;p<d-2;p+=2)g=s(c[p-2],c[p-1],c[p],c[p+1],c[p+2],c[p+3],h),!isNaN(g[0])&&(f.push(g[0]),f.push(g[1]),f.push(c[p]),f.push(c[p+1]),f.push(g[2]),f.push(g[3]));return f}class a extends e.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){var d=this.points(),f=d.length,p=this.tension(),g=this.closed(),y=this.bezier(),b,w,x;if(f){if(h.beginPath(),h.moveTo(d[0],d[1]),p!==0&&f>4){for(b=this.getTensionPoints(),w=b.length,x=g?0:4,g||h.quadraticCurveTo(b[0],b[1],b[2],b[3]);x<w-2;)h.bezierCurveTo(b[x++],b[x++],b[x++],b[x++],b[x++],b[x++]);g||h.quadraticCurveTo(b[w-2],b[w-1],d[f-2],d[f-1])}else if(y)for(x=2;x<f;)h.bezierCurveTo(d[x++],d[x++],d[x++],d[x++],d[x++],d[x++]);else for(x=2;x<f;x+=2)h.lineTo(d[x],d[x+1]);g?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():o(this.points(),this.tension())}_getTensionPointsClosed(){var h=this.points(),d=h.length,f=this.tension(),p=s(h[d-2],h[d-1],h[0],h[1],h[2],h[3],f),g=s(h[d-4],h[d-3],h[d-2],h[d-1],h[0],h[1],f),y=o(h,f),b=[p[2],p[3]].concat(y).concat([g[0],g[1],h[d-2],h[d-1],g[2],g[3],p[0],p[1],h[0],h[1]]);return b}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();for(var d=h[0],f=h[0],p=h[1],g=h[1],y,b,w=0;w<h.length/2;w++)y=h[w*2],b=h[w*2+1],d=Math.min(d,y),f=Math.max(f,y),p=Math.min(p,b),g=Math.max(g,b);return{x:d,y:p,width:f-d,height:g-p}}}return Sg.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,i._registerNode)(a),r.Factory.addGetterSetter(a,"closed",!1),r.Factory.addGetterSetter(a,"bezier",!1),r.Factory.addGetterSetter(a,"tension",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(a,"points",[],(0,n.getNumberArrayValidator)()),Sg}var Cg={},P2={},e$;function uCe(){return e$||(e$=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.t2length=r.getQuadraticArcLength=r.getCubicArcLength=r.binomialCoefficients=r.cValues=r.tValues=void 0,r.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],r.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],r.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,c,h)=>{let d,f,p;d=h/2,f=0;for(let y=0;y<20;y++)p=d*r.tValues[20][y]+d,f+=r.cValues[20][y]*i(a,c,p);return d*f};r.getCubicArcLength=e;const n=(a,c,h)=>{h===void 0&&(h=1);const d=a[0]-2*a[1]+a[2],f=c[0]-2*c[1]+c[2],p=2*a[1]-2*a[0],g=2*c[1]-2*c[0],y=4*(d*d+f*f),b=4*(d*p+f*g),w=p*p+g*g;if(y===0)return h*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(c[2]-c[0],2));const x=b/(2*y),S=w/y,_=h+x,O=S-x*x,T=_*_+O>0?Math.sqrt(_*_+O):0,E=x*x+O>0?Math.sqrt(x*x+O):0,P=x+Math.sqrt(x*x+O)!==0?O*Math.log(Math.abs((_+T)/(x+E))):0;return Math.sqrt(y)/2*(_*T-x*E+P)};r.getQuadraticArcLength=n;function i(a,c,h){const d=s(1,h,a),f=s(1,h,c),p=d*d+f*f;return Math.sqrt(p)}const s=(a,c,h)=>{const d=h.length-1;let f,p;if(d===0)return 0;if(a===0){p=0;for(let g=0;g<=d;g++)p+=r.binomialCoefficients[d][g]*Math.pow(1-c,d-g)*Math.pow(c,g)*h[g];return p}else{f=new Array(d);for(let g=0;g<d;g++)f[g]=d*(h[g+1]-h[g]);return s(a-1,c,f)}},o=(a,c,h)=>{let d=1,f=a/c,p=(a-h(f))/c,g=0;for(;d>.001;){const y=h(f+p),b=Math.abs(a-y)/c;if(b<d)d=b,f+=p;else{const w=h(f-p),x=Math.abs(a-w)/c;x<d?(d=x,f-=p):p/=2}if(g++,g>500)break}return f};r.t2length=o}(P2)),P2}var t$;function B3(){if(t$)return Cg;t$=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.Path=void 0;const r=Si(),e=Nr(),n=_i(),i=uCe();let s=class Us extends e.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Us.parsePathData(this.data()),this.pathLength=Us.getPathLength(this.dataArray)}_sceneFunc(a){var c=this.dataArray;a.beginPath();for(var h=!1,d=0;d<c.length;d++){var f=c[d].command,p=c[d].points;switch(f){case"L":a.lineTo(p[0],p[1]);break;case"M":a.moveTo(p[0],p[1]);break;case"C":a.bezierCurveTo(p[0],p[1],p[2],p[3],p[4],p[5]);break;case"Q":a.quadraticCurveTo(p[0],p[1],p[2],p[3]);break;case"A":var g=p[0],y=p[1],b=p[2],w=p[3],x=p[4],S=p[5],_=p[6],O=p[7],T=b>w?b:w,E=b>w?1:b/w,P=b>w?w/b:1;a.translate(g,y),a.rotate(_),a.scale(E,P),a.arc(0,0,T,x,x+S,1-O),a.scale(1/E,1/P),a.rotate(-_),a.translate(-g,-y);break;case"z":h=!0,a.closePath();break}}!h&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){var a=[];this.dataArray.forEach(function(b){if(b.command==="A"){var w=b.points[4],x=b.points[5],S=b.points[4]+x,_=Math.PI/180;if(Math.abs(w-S)<_&&(_=Math.abs(w-S)),x<0)for(let O=w-_;O>S;O-=_){const T=Us.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],O,0);a.push(T.x,T.y)}else for(let O=w+_;O<S;O+=_){const T=Us.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],O,0);a.push(T.x,T.y)}}else if(b.command==="C")for(let O=0;O<=1;O+=.01){const T=Us.getPointOnCubicBezier(O,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);a.push(T.x,T.y)}else a=a.concat(b.points)});for(var c=a[0],h=a[0],d=a[1],f=a[1],p,g,y=0;y<a.length/2;y++)p=a[y*2],g=a[y*2+1],isNaN(p)||(c=Math.min(c,p),h=Math.max(h,p)),isNaN(g)||(d=Math.min(d,g),f=Math.max(f,g));return{x:c,y:d,width:h-c,height:f-d}}getLength(){return this.pathLength}getPointAtLength(a){return Us.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,c,h,d){return Math.sqrt((h-a)*(h-a)+(d-c)*(d-c))}static getPathLength(a){let c=0;for(var h=0;h<a.length;++h)c+=a[h].pathLength;return c}static getPointAtLengthOfDataArray(a,c){var h,d=0,f=c.length;if(!f)return null;for(;d<f&&a>c[d].pathLength;)a-=c[d].pathLength,++d;if(d===f)return h=c[d-1].points.slice(-2),{x:h[0],y:h[1]};if(a<.01)return h=c[d].points.slice(0,2),{x:h[0],y:h[1]};var p=c[d],g=p.points;switch(p.command){case"L":return Us.getPointOnLine(a,p.start.x,p.start.y,g[0],g[1]);case"C":return Us.getPointOnCubicBezier((0,i.t2length)(a,Us.getPathLength(c),T=>(0,i.getCubicArcLength)([p.start.x,g[0],g[2],g[4]],[p.start.y,g[1],g[3],g[5]],T)),p.start.x,p.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return Us.getPointOnQuadraticBezier((0,i.t2length)(a,Us.getPathLength(c),T=>(0,i.getQuadraticArcLength)([p.start.x,g[0],g[2]],[p.start.y,g[1],g[3]],T)),p.start.x,p.start.y,g[0],g[1],g[2],g[3]);case"A":var y=g[0],b=g[1],w=g[2],x=g[3],S=g[4],_=g[5],O=g[6];return S+=_*a/p.pathLength,Us.getPointOnEllipticalArc(y,b,w,x,S,O)}return null}static getPointOnLine(a,c,h,d,f,p,g){p=p??c,g=g??h;const y=this.getLineLength(c,h,d,f);if(y<1e-10)return{x:c,y:h};if(d===c)return{x:p,y:g+(f>h?a:-a)};const b=(f-h)/(d-c),w=Math.sqrt(a*a/(1+b*b))*(d<c?-1:1),x=b*w;if(Math.abs(g-h-b*(p-c))<1e-10)return{x:p+w,y:g+x};const S=((p-c)*(d-c)+(g-h)*(f-h))/(y*y),_=c+S*(d-c),O=h+S*(f-h),T=this.getLineLength(p,g,_,O),E=Math.sqrt(a*a-T*T),P=Math.sqrt(E*E/(1+b*b))*(d<c?-1:1),I=b*P;return{x:_+P,y:O+I}}static getPointOnCubicBezier(a,c,h,d,f,p,g,y,b){function w(E){return E*E*E}function x(E){return 3*E*E*(1-E)}function S(E){return 3*E*(1-E)*(1-E)}function _(E){return(1-E)*(1-E)*(1-E)}var O=y*w(a)+p*x(a)+d*S(a)+c*_(a),T=b*w(a)+g*x(a)+f*S(a)+h*_(a);return{x:O,y:T}}static getPointOnQuadraticBezier(a,c,h,d,f,p,g){function y(_){return _*_}function b(_){return 2*_*(1-_)}function w(_){return(1-_)*(1-_)}var x=p*y(a)+d*b(a)+c*w(a),S=g*y(a)+f*b(a)+h*w(a);return{x,y:S}}static getPointOnEllipticalArc(a,c,h,d,f,p){var g=Math.cos(p),y=Math.sin(p),b={x:h*Math.cos(f),y:d*Math.sin(f)};return{x:a+(b.x*g-b.y*y),y:c+(b.x*y+b.y*g)}}static parsePathData(a){if(!a)return[];var c=a,h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];c=c.replace(new RegExp(" ","g"),",");for(var d=0;d<h.length;d++)c=c.replace(new RegExp(h[d],"g"),"|"+h[d]);var f=c.split("|"),p=[],g=[],y=0,b=0,w=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,x;for(d=1;d<f.length;d++){var S=f[d],_=S.charAt(0);for(S=S.slice(1),g.length=0;x=w.exec(S);)g.push(x[0]);for(var O=[],T=0,E=g.length;T<E;T++){if(g[T]==="00"){O.push(0,0);continue}var P=parseFloat(g[T]);isNaN(P)?O.push(0):O.push(P)}for(;O.length>0&&!isNaN(O[0]);){var I="",A=[],D=y,M=b,$,L,N,V,U,F,H,K,ie,he;switch(_){case"l":y+=O.shift(),b+=O.shift(),I="L",A.push(y,b);break;case"L":y=O.shift(),b=O.shift(),A.push(y,b);break;case"m":var me=O.shift(),Pe=O.shift();if(y+=me,b+=Pe,I="M",p.length>2&&p[p.length-1].command==="z"){for(var _e=p.length-2;_e>=0;_e--)if(p[_e].command==="M"){y=p[_e].points[0]+me,b=p[_e].points[1]+Pe;break}}A.push(y,b),_="l";break;case"M":y=O.shift(),b=O.shift(),I="M",A.push(y,b),_="L";break;case"h":y+=O.shift(),I="L",A.push(y,b);break;case"H":y=O.shift(),I="L",A.push(y,b);break;case"v":b+=O.shift(),I="L",A.push(y,b);break;case"V":b=O.shift(),I="L",A.push(y,b);break;case"C":A.push(O.shift(),O.shift(),O.shift(),O.shift()),y=O.shift(),b=O.shift(),A.push(y,b);break;case"c":A.push(y+O.shift(),b+O.shift(),y+O.shift(),b+O.shift()),y+=O.shift(),b+=O.shift(),I="C",A.push(y,b);break;case"S":L=y,N=b,$=p[p.length-1],$.command==="C"&&(L=y+(y-$.points[2]),N=b+(b-$.points[3])),A.push(L,N,O.shift(),O.shift()),y=O.shift(),b=O.shift(),I="C",A.push(y,b);break;case"s":L=y,N=b,$=p[p.length-1],$.command==="C"&&(L=y+(y-$.points[2]),N=b+(b-$.points[3])),A.push(L,N,y+O.shift(),b+O.shift()),y+=O.shift(),b+=O.shift(),I="C",A.push(y,b);break;case"Q":A.push(O.shift(),O.shift()),y=O.shift(),b=O.shift(),A.push(y,b);break;case"q":A.push(y+O.shift(),b+O.shift()),y+=O.shift(),b+=O.shift(),I="Q",A.push(y,b);break;case"T":L=y,N=b,$=p[p.length-1],$.command==="Q"&&(L=y+(y-$.points[0]),N=b+(b-$.points[1])),y=O.shift(),b=O.shift(),I="Q",A.push(L,N,y,b);break;case"t":L=y,N=b,$=p[p.length-1],$.command==="Q"&&(L=y+(y-$.points[0]),N=b+(b-$.points[1])),y+=O.shift(),b+=O.shift(),I="Q",A.push(L,N,y,b);break;case"A":V=O.shift(),U=O.shift(),F=O.shift(),H=O.shift(),K=O.shift(),ie=y,he=b,y=O.shift(),b=O.shift(),I="A",A=this.convertEndpointToCenterParameterization(ie,he,y,b,H,K,V,U,F);break;case"a":V=O.shift(),U=O.shift(),F=O.shift(),H=O.shift(),K=O.shift(),ie=y,he=b,y+=O.shift(),b+=O.shift(),I="A",A=this.convertEndpointToCenterParameterization(ie,he,y,b,H,K,V,U,F);break}p.push({command:I||_,points:A,start:{x:D,y:M},pathLength:this.calcLength(D,M,I||_,A)})}(_==="z"||_==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(a,c,h,d){var f,p,g,y,b=Us;switch(h){case"L":return b.getLineLength(a,c,d[0],d[1]);case"C":return(0,i.getCubicArcLength)([a,d[0],d[2],d[4]],[c,d[1],d[3],d[5]],1);case"Q":return(0,i.getQuadraticArcLength)([a,d[0],d[2]],[c,d[1],d[3]],1);case"A":f=0;var w=d[4],x=d[5],S=d[4]+x,_=Math.PI/180;if(Math.abs(w-S)<_&&(_=Math.abs(w-S)),p=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],w,0),x<0)for(y=w-_;y>S;y-=_)g=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],y,0),f+=b.getLineLength(p.x,p.y,g.x,g.y),p=g;else for(y=w+_;y<S;y+=_)g=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],y,0),f+=b.getLineLength(p.x,p.y,g.x,g.y),p=g;return g=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],S,0),f+=b.getLineLength(p.x,p.y,g.x,g.y),f}return 0}static convertEndpointToCenterParameterization(a,c,h,d,f,p,g,y,b){var w=b*(Math.PI/180),x=Math.cos(w)*(a-h)/2+Math.sin(w)*(c-d)/2,S=-1*Math.sin(w)*(a-h)/2+Math.cos(w)*(c-d)/2,_=x*x/(g*g)+S*S/(y*y);_>1&&(g*=Math.sqrt(_),y*=Math.sqrt(_));var O=Math.sqrt((g*g*(y*y)-g*g*(S*S)-y*y*(x*x))/(g*g*(S*S)+y*y*(x*x)));f===p&&(O*=-1),isNaN(O)&&(O=0);var T=O*g*S/y,E=O*-y*x/g,P=(a+h)/2+Math.cos(w)*T-Math.sin(w)*E,I=(c+d)/2+Math.sin(w)*T+Math.cos(w)*E,A=function(U){return Math.sqrt(U[0]*U[0]+U[1]*U[1])},D=function(U,F){return(U[0]*F[0]+U[1]*F[1])/(A(U)*A(F))},M=function(U,F){return(U[0]*F[1]<U[1]*F[0]?-1:1)*Math.acos(D(U,F))},$=M([1,0],[(x-T)/g,(S-E)/y]),L=[(x-T)/g,(S-E)/y],N=[(-1*x-T)/g,(-1*S-E)/y],V=M(L,N);return D(L,N)<=-1&&(V=Math.PI),D(L,N)>=1&&(V=0),p===0&&V>0&&(V=V-2*Math.PI),p===1&&V<0&&(V=V+2*Math.PI),[P,I,g,y,$,V,w,p]}};return Cg.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(s),r.Factory.addGetterSetter(s,"data"),Cg}var i$;function dCe(){if(i$)return _g;i$=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.Arrow=void 0;const r=Si(),e=L7(),n=Mi(),i=_i(),s=B3();let o=class extends e.Line{_sceneFunc(c){super._sceneFunc(c);var h=Math.PI*2,d=this.points(),f=d,p=this.tension()!==0&&d.length>4;p&&(f=this.getTensionPoints());var g=this.pointerLength(),y=d.length,b,w;if(p){const _=[f[f.length-4],f[f.length-3],f[f.length-2],f[f.length-1],d[y-2],d[y-1]],O=s.Path.calcLength(f[f.length-4],f[f.length-3],"C",_),T=s.Path.getPointOnQuadraticBezier(Math.min(1,1-g/O),_[0],_[1],_[2],_[3],_[4],_[5]);b=d[y-2]-T.x,w=d[y-1]-T.y}else b=d[y-2]-d[y-4],w=d[y-1]-d[y-3];var x=(Math.atan2(w,b)+h)%h,S=this.pointerWidth();this.pointerAtEnding()&&(c.save(),c.beginPath(),c.translate(d[y-2],d[y-1]),c.rotate(x),c.moveTo(0,0),c.lineTo(-g,S/2),c.lineTo(-g,-S/2),c.closePath(),c.restore(),this.__fillStroke(c)),this.pointerAtBeginning()&&(c.save(),c.beginPath(),c.translate(d[0],d[1]),p?(b=(f[0]+f[2])/2-d[0],w=(f[1]+f[3])/2-d[1]):(b=d[2]-d[0],w=d[3]-d[1]),c.rotate((Math.atan2(-w,-b)+h)%h),c.moveTo(0,0),c.lineTo(-g,S/2),c.lineTo(-g,-S/2),c.closePath(),c.restore(),this.__fillStroke(c))}__fillStroke(c){var h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,c.setLineDash([])),c.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const c=super.getSelfRect(),h=this.pointerWidth()/2;return{x:c.x-h,y:c.y-h,width:c.width+h*2,height:c.height+h*2}}};return _g.Arrow=o,o.prototype.className="Arrow",(0,i._registerNode)(o),r.Factory.addGetterSetter(o,"pointerLength",10,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"pointerWidth",10,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"pointerAtBeginning",!1),r.Factory.addGetterSetter(o,"pointerAtEnding",!0),_g}var kg={},n$;function fCe(){if(n$)return kg;n$=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.Circle=void 0;const r=Si(),e=Nr(),n=Mi(),i=_i();class s extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}}return kg.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(s),r.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),kg}var Tg={},r$;function pCe(){if(r$)return Tg;r$=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.Ellipse=void 0;const r=Si(),e=Nr(),n=Mi(),i=_i();class s extends e.Shape{_sceneFunc(a){var c=this.radiusX(),h=this.radiusY();a.beginPath(),a.save(),c!==h&&a.scale(1,h/c),a.arc(0,0,c,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}}return Tg.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,i._registerNode)(s),r.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),r.Factory.addGetterSetter(s,"radiusX",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(s,"radiusY",0,(0,n.getNumberValidator)()),Tg}var Mg={},s$;function mCe(){if(s$)return Mg;s$=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.Image=void 0;const r=Gn(),e=Si(),n=Nr(),i=_i(),s=Mi();class o extends n.Shape{constructor(c){super(c),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const c=this.image();c&&c.complete||c&&c.readyState===4||c&&c.addEventListener&&c.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(c){const h=this.getWidth(),d=this.getHeight(),f=this.cornerRadius(),p=this.attrs.image;let g;if(p){const y=this.attrs.cropWidth,b=this.attrs.cropHeight;y&&b?g=[p,this.cropX(),this.cropY(),y,b,0,0,h,d]:g=[p,0,0,h,d]}(this.hasFill()||this.hasStroke()||f)&&(c.beginPath(),f?r.Util.drawRoundedRectPath(c,h,d,f):c.rect(0,0,h,d),c.closePath(),c.fillStrokeShape(this)),p&&(f&&c.clip(),c.drawImage.apply(c,g))}_hitFunc(c){var h=this.width(),d=this.height(),f=this.cornerRadius();c.beginPath(),f?r.Util.drawRoundedRectPath(c,h,d,f):c.rect(0,0,h,d),c.closePath(),c.fillStrokeShape(this)}getWidth(){var c,h;return(c=this.attrs.width)!==null&&c!==void 0?c:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var c,h;return(c=this.attrs.height)!==null&&c!==void 0?c:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(c,h,d=null){var f=r.Util.createImageElement();f.onload=function(){var p=new o({image:f});h(p)},f.onerror=d,f.crossOrigin="Anonymous",f.src=c}}return Mg.Image=o,o.prototype.className="Image",(0,i._registerNode)(o),e.Factory.addGetterSetter(o,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(o,"image"),e.Factory.addComponentsGetterSetter(o,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(o,"cropX",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropY",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropWidth",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropHeight",0,(0,s.getNumberValidator)()),Mg}var ku={},o$;function gCe(){if(o$)return ku;o$=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.Tag=ku.Label=void 0;const r=Si(),e=Nr(),n=V3(),i=Mi(),s=_i();var o=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",c="none",h="up",d="right",f="down",p="left",g=o.length;let y=class extends n.Group{constructor(x){super(x),this.on("add.konva",function(S){this._addListeners(S.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(x){var S=this,_,O=function(){S._sync()};for(_=0;_<g;_++)x.on(o[_]+a,O)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var x=this.getText(),S=this.getTag(),_,O,T,E,P,I,A;if(x&&S){switch(_=x.width(),O=x.height(),T=S.pointerDirection(),E=S.pointerWidth(),A=S.pointerHeight(),P=0,I=0,T){case h:P=_/2,I=-1*A;break;case d:P=_+E,I=O/2;break;case f:P=_/2,I=O+A;break;case p:P=-1*E,I=O/2;break}S.setAttrs({x:-1*P,y:-1*I,width:_,height:O}),x.setAttrs({x:-1*P,y:-1*I})}}};ku.Label=y,y.prototype.className="Label",(0,s._registerNode)(y);class b extends e.Shape{_sceneFunc(x){var S=this.width(),_=this.height(),O=this.pointerDirection(),T=this.pointerWidth(),E=this.pointerHeight(),P=this.cornerRadius();let I=0,A=0,D=0,M=0;typeof P=="number"?I=A=D=M=Math.min(P,S/2,_/2):(I=Math.min(P[0]||0,S/2,_/2),A=Math.min(P[1]||0,S/2,_/2),M=Math.min(P[2]||0,S/2,_/2),D=Math.min(P[3]||0,S/2,_/2)),x.beginPath(),x.moveTo(I,0),O===h&&(x.lineTo((S-T)/2,0),x.lineTo(S/2,-1*E),x.lineTo((S+T)/2,0)),x.lineTo(S-A,0),x.arc(S-A,A,A,Math.PI*3/2,0,!1),O===d&&(x.lineTo(S,(_-E)/2),x.lineTo(S+T,_/2),x.lineTo(S,(_+E)/2)),x.lineTo(S,_-M),x.arc(S-M,_-M,M,0,Math.PI/2,!1),O===f&&(x.lineTo((S+T)/2,_),x.lineTo(S/2,_+E),x.lineTo((S-T)/2,_)),x.lineTo(D,_),x.arc(D,_-D,D,Math.PI/2,Math.PI,!1),O===p&&(x.lineTo(0,(_+E)/2),x.lineTo(-1*T,_/2),x.lineTo(0,(_-E)/2)),x.lineTo(0,I),x.arc(I,I,I,Math.PI,Math.PI*3/2,!1),x.closePath(),x.fillStrokeShape(this)}getSelfRect(){var x=0,S=0,_=this.pointerWidth(),O=this.pointerHeight(),T=this.pointerDirection(),E=this.width(),P=this.height();return T===h?(S-=O,P+=O):T===f?P+=O:T===p?(x-=_*1.5,E+=_):T===d&&(E+=_*1.5),{x,y:S,width:E,height:P}}}return ku.Tag=b,b.prototype.className="Tag",(0,s._registerNode)(b),r.Factory.addGetterSetter(b,"pointerDirection",c),r.Factory.addGetterSetter(b,"pointerWidth",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(b,"pointerHeight",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(b,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),ku}var Eg={},a$;function B7(){if(a$)return Eg;a$=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.Rect=void 0;const r=Si(),e=Nr(),n=_i(),i=Gn(),s=Mi();let o=class extends e.Shape{_sceneFunc(c){var h=this.cornerRadius(),d=this.width(),f=this.height();c.beginPath(),h?i.Util.drawRoundedRectPath(c,d,f,h):c.rect(0,0,d,f),c.closePath(),c.fillStrokeShape(this)}};return Eg.Rect=o,o.prototype.className="Rect",(0,n._registerNode)(o),r.Factory.addGetterSetter(o,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Eg}var Pg={},l$;function yCe(){if(l$)return Pg;l$=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.RegularPolygon=void 0;const r=Si(),e=Nr(),n=Mi(),i=_i();let s=class extends e.Shape{_sceneFunc(a){const c=this._getPoints();a.beginPath(),a.moveTo(c[0].x,c[0].y);for(var h=1;h<c.length;h++)a.lineTo(c[h].x,c[h].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,c=this.attrs.radius||0,h=[];for(var d=0;d<a;d++)h.push({x:c*Math.sin(d*2*Math.PI/a),y:-1*c*Math.cos(d*2*Math.PI/a)});return h}getSelfRect(){const a=this._getPoints();var c=a[0].x,h=a[0].y,d=a[0].x,f=a[0].y;return a.forEach(p=>{c=Math.min(c,p.x),h=Math.max(h,p.x),d=Math.min(d,p.y),f=Math.max(f,p.y)}),{x:c,y:d,width:h-c,height:f-d}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Pg.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(s),r.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(s,"sides",0,(0,n.getNumberValidator)()),Pg}var Ag={},c$;function vCe(){if(c$)return Ag;c$=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.Ring=void 0;const r=Si(),e=Nr(),n=Mi(),i=_i();var s=Math.PI*2;let o=class extends e.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.innerRadius(),0,s,!1),c.moveTo(this.outerRadius(),0),c.arc(0,0,this.outerRadius(),s,0,!0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}};return Ag.Ring=o,o.prototype.className="Ring",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(o),r.Factory.addGetterSetter(o,"innerRadius",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"outerRadius",0,(0,n.getNumberValidator)()),Ag}var Rg={},h$;function bCe(){if(h$)return Rg;h$=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.Sprite=void 0;const r=Si(),e=Nr(),n=L3(),i=Mi(),s=_i();class o extends e.Shape{constructor(c){super(c),this._updated=!0,this.anim=new n.Animation(()=>{var h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(c){var h=this.animation(),d=this.frameIndex(),f=d*4,p=this.animations()[h],g=this.frameOffsets(),y=p[f+0],b=p[f+1],w=p[f+2],x=p[f+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(c.beginPath(),c.rect(0,0,w,x),c.closePath(),c.fillStrokeShape(this)),S)if(g){var _=g[h],O=d*2;c.drawImage(S,y,b,w,x,_[O+0],_[O+1],w,x)}else c.drawImage(S,y,b,w,x,0,0,w,x)}_hitFunc(c){var h=this.animation(),d=this.frameIndex(),f=d*4,p=this.animations()[h],g=this.frameOffsets(),y=p[f+2],b=p[f+3];if(c.beginPath(),g){var w=g[h],x=d*2;c.rect(w[x+0],w[x+1],y,b)}else c.rect(0,0,y,b);c.closePath(),c.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var c=this;this.interval=setInterval(function(){c._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var c=this.getLayer();this.anim.setLayers(c),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var c=this.frameIndex(),h=this.animation(),d=this.animations(),f=d[h],p=f.length/4;c<p-1?this.frameIndex(c+1):this.frameIndex(0)}}return Rg.Sprite=o,o.prototype.className="Sprite",(0,s._registerNode)(o),r.Factory.addGetterSetter(o,"animation"),r.Factory.addGetterSetter(o,"animations"),r.Factory.addGetterSetter(o,"frameOffsets"),r.Factory.addGetterSetter(o,"image"),r.Factory.addGetterSetter(o,"frameIndex",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"frameRate",17,(0,i.getNumberValidator)()),r.Factory.backCompat(o,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Rg}var Ig={},u$;function xCe(){if(u$)return Ig;u$=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.Star=void 0;const r=Si(),e=Nr(),n=Mi(),i=_i();let s=class extends e.Shape{_sceneFunc(a){var c=this.innerRadius(),h=this.outerRadius(),d=this.numPoints();a.beginPath(),a.moveTo(0,0-h);for(var f=1;f<d*2;f++){var p=f%2===0?h:c,g=p*Math.sin(f*Math.PI/d),y=-1*p*Math.cos(f*Math.PI/d);a.lineTo(g,y)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ig.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(s),r.Factory.addGetterSetter(s,"numPoints",5,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),Ig}var Tu={},d$;function U7(){if(d$)return Tu;d$=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.Text=Tu.stringToArray=void 0;const r=Gn(),e=Si(),n=Nr(),i=_i(),s=Mi(),o=_i();function a(Pe){return Array.from(Pe)}Tu.stringToArray=a;var c="auto",h="center",d="inherit",f="justify",p="Change.konva",g="2d",y="-",b="left",w="text",x="Text",S="top",_="bottom",O="middle",T="normal",E="px ",P=" ",I="right",A="rtl",D="word",M="char",$="none",L="…",N=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],V=N.length;function U(Pe){return Pe.split(",").map(_e=>{_e=_e.trim();const ue=_e.indexOf(" ")>=0,Se=_e.indexOf('"')>=0||_e.indexOf("'")>=0;return ue&&!Se&&(_e=`"${_e}"`),_e}).join(", ")}var F;function H(){return F||(F=r.Util.createCanvasElement().getContext(g),F)}function K(Pe){Pe.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ie(Pe){Pe.setAttr("miterLimit",2),Pe.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function he(Pe){return Pe=Pe||{},!Pe.fillLinearGradientColorStops&&!Pe.fillRadialGradientColorStops&&!Pe.fillPatternImage&&(Pe.fill=Pe.fill||"black"),Pe}class me extends n.Shape{constructor(_e){super(he(_e)),this._partialTextX=0,this._partialTextY=0;for(var ue=0;ue<V;ue++)this.on(N[ue]+p,this._setTextData);this._setTextData()}_sceneFunc(_e){var ue=this.textArr,Se=ue.length;if(this.text()){var ke=this.padding(),J=this.fontSize(),q=this.lineHeight()*J,z=this.verticalAlign(),X=this.direction(),te=0,se=this.align(),Q=this.getWidth(),Z=this.letterSpacing(),le=this.fill(),pe=this.textDecoration(),be=pe.indexOf("underline")!==-1,Ee=pe.indexOf("line-through")!==-1,ee;X=X===d?_e.direction:X;var Y=q/2,de=O;if(i.Konva._fixTextRendering){var fe=this.measureSize("M");de="alphabetic",Y=(fe.fontBoundingBoxAscent-fe.fontBoundingBoxDescent)/2+q/2}var we=0,Me=0;for(X===A&&_e.setAttr("direction",X),_e.setAttr("font",this._getContextFont()),_e.setAttr("textBaseline",de),_e.setAttr("textAlign",b),z===O?te=(this.getHeight()-Se*q-ke*2)/2:z===_&&(te=this.getHeight()-Se*q-ke*2),_e.translate(ke,te+ke),ee=0;ee<Se;ee++){var we=0,Me=0,Qe=ue[ee],Le=Qe.text,ze=Qe.width,ot=Qe.lastInParagraph,Ye,st,Mt;if(_e.save(),se===I?we+=Q-ze-ke*2:se===h&&(we+=(Q-ze-ke*2)/2),be){_e.save(),_e.beginPath();let Be=i.Konva._fixTextRendering?Math.round(J/4):Math.round(J/2);const ge=we,Ue=Y+Me+Be;_e.moveTo(ge,Ue),Ye=Le.split(" ").length-1,st=Ye===0,Mt=se===f&&!ot?Q-ke*2:ze,_e.lineTo(ge+Math.round(Mt),Ue),_e.lineWidth=J/15;const We=this._getLinearGradient();_e.strokeStyle=We||le,_e.stroke(),_e.restore()}if(Ee){_e.save(),_e.beginPath();let Be=i.Konva._fixTextRendering?-Math.round(J/4):0;_e.moveTo(we,Y+Me+Be),Ye=Le.split(" ").length-1,st=Ye===0,Mt=se===f&&ot&&!st?Q-ke*2:ze,_e.lineTo(we+Math.round(Mt),Y+Me+Be),_e.lineWidth=J/15;const ge=this._getLinearGradient();_e.strokeStyle=ge||le,_e.stroke(),_e.restore()}if(X!==A&&(Z!==0||se===f)){Ye=Le.split(" ").length-1;for(var Et=a(Le),ft=0;ft<Et.length;ft++){var Wt=Et[ft];Wt===" "&&!ot&&se===f&&(we+=(Q-ke*2-ze)/Ye),this._partialTextX=we,this._partialTextY=Y+Me,this._partialText=Wt,_e.fillStrokeShape(this),we+=this.measureSize(Wt).width+Z}}else Z!==0&&_e.setAttr("letterSpacing",`${Z}px`),this._partialTextX=we,this._partialTextY=Y+Me,this._partialText=Le,_e.fillStrokeShape(this);_e.restore(),Se>1&&(Y+=q)}}}_hitFunc(_e){var ue=this.getWidth(),Se=this.getHeight();_e.beginPath(),_e.rect(0,0,ue,Se),_e.closePath(),_e.fillStrokeShape(this)}setText(_e){var ue=r.Util._isString(_e)?_e:_e==null?"":_e+"";return this._setAttr(w,ue),this}getWidth(){var _e=this.attrs.width===c||this.attrs.width===void 0;return _e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var _e=this.attrs.height===c||this.attrs.height===void 0;return _e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(_e){var ue=H(),Se=this.fontSize(),ke;return ue.save(),ue.font=this._getContextFont(),ke=ue.measureText(_e),ue.restore(),{actualBoundingBoxAscent:ke.actualBoundingBoxAscent,actualBoundingBoxDescent:ke.actualBoundingBoxDescent,actualBoundingBoxLeft:ke.actualBoundingBoxLeft,actualBoundingBoxRight:ke.actualBoundingBoxRight,alphabeticBaseline:ke.alphabeticBaseline,emHeightAscent:ke.emHeightAscent,emHeightDescent:ke.emHeightDescent,fontBoundingBoxAscent:ke.fontBoundingBoxAscent,fontBoundingBoxDescent:ke.fontBoundingBoxDescent,hangingBaseline:ke.hangingBaseline,ideographicBaseline:ke.ideographicBaseline,width:ke.width,height:Se}}_getContextFont(){return this.fontStyle()+P+this.fontVariant()+P+(this.fontSize()+E)+U(this.fontFamily())}_addTextLine(_e){this.align()===f&&(_e=_e.trim());var Se=this._getTextWidth(_e);return this.textArr.push({text:_e,width:Se,lastInParagraph:!1})}_getTextWidth(_e){var ue=this.letterSpacing(),Se=_e.length;return H().measureText(_e).width+(Se?ue*(Se-1):0)}_setTextData(){var _e=this.text().split(`
`),ue=+this.fontSize(),Se=0,ke=this.lineHeight()*ue,J=this.attrs.width,q=this.attrs.height,z=J!==c&&J!==void 0,X=q!==c&&q!==void 0,te=this.padding(),se=J-te*2,Q=q-te*2,Z=0,le=this.wrap(),pe=le!==$,be=le!==M&&pe,Ee=this.ellipsis();this.textArr=[],H().font=this._getContextFont();for(var ee=Ee?this._getTextWidth(L):0,Y=0,de=_e.length;Y<de;++Y){var fe=_e[Y],we=this._getTextWidth(fe);if(z&&we>se)for(;fe.length>0;){for(var Me=0,Qe=fe.length,Le="",ze=0;Me<Qe;){var ot=Me+Qe>>>1,Ye=fe.slice(0,ot+1),st=this._getTextWidth(Ye)+ee;st<=se?(Me=ot+1,Le=Ye,ze=st):Qe=ot}if(Le){if(be){var Mt,Et=fe[Le.length],ft=Et===P||Et===y;ft&&ze<=se?Mt=Le.length:Mt=Math.max(Le.lastIndexOf(P),Le.lastIndexOf(y))+1,Mt>0&&(Me=Mt,Le=Le.slice(0,Me),ze=this._getTextWidth(Le))}Le=Le.trimRight(),this._addTextLine(Le),Se=Math.max(Se,ze),Z+=ke;var Wt=this._shouldHandleEllipsis(Z);if(Wt){this._tryToAddEllipsisToLastLine();break}if(fe=fe.slice(Me),fe=fe.trimLeft(),fe.length>0&&(we=this._getTextWidth(fe),we<=se)){this._addTextLine(fe),Z+=ke,Se=Math.max(Se,we);break}}else break}else this._addTextLine(fe),Z+=ke,Se=Math.max(Se,we),this._shouldHandleEllipsis(Z)&&Y<de-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),X&&Z+ke>Q)break}this.textHeight=ue,this.textWidth=Se}_shouldHandleEllipsis(_e){var ue=+this.fontSize(),Se=this.lineHeight()*ue,ke=this.attrs.height,J=ke!==c&&ke!==void 0,q=this.padding(),z=ke-q*2,X=this.wrap(),te=X!==$;return!te||J&&_e+Se>z}_tryToAddEllipsisToLastLine(){var _e=this.attrs.width,ue=_e!==c&&_e!==void 0,Se=this.padding(),ke=_e-Se*2,J=this.ellipsis(),q=this.textArr[this.textArr.length-1];if(!(!q||!J)){if(ue){var z=this._getTextWidth(q.text+L)<ke;z||(q.text=q.text.slice(0,q.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(q.text+L)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const _e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ue=this.hasShadow();return _e&&ue?!0:super._useBufferCanvas()}}return Tu.Text=me,me.prototype._fillFunc=K,me.prototype._strokeFunc=ie,me.prototype.className=x,me.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,o._registerNode)(me),e.Factory.overWriteSetter(me,"width",(0,s.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(me,"height",(0,s.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(me,"direction",d),e.Factory.addGetterSetter(me,"fontFamily","Arial"),e.Factory.addGetterSetter(me,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(me,"fontStyle",T),e.Factory.addGetterSetter(me,"fontVariant",T),e.Factory.addGetterSetter(me,"padding",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(me,"align",b),e.Factory.addGetterSetter(me,"verticalAlign",S),e.Factory.addGetterSetter(me,"lineHeight",1,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(me,"wrap",D),e.Factory.addGetterSetter(me,"ellipsis",!1,(0,s.getBooleanValidator)()),e.Factory.addGetterSetter(me,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(me,"text","",(0,s.getStringValidator)()),e.Factory.addGetterSetter(me,"textDecoration",""),Tu}var Dg={},f$;function OCe(){if(f$)return Dg;f$=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.TextPath=void 0;const r=Gn(),e=Si(),n=Nr(),i=B3(),s=U7(),o=Mi(),a=_i();var c="",h="normal";function d(g){g.fillText(this.partialText,0,0)}function f(g){g.strokeText(this.partialText,0,0)}let p=class extends n.Shape{constructor(y){super(y),this.dummyCanvas=r.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return i.Path.getPathLength(this.dataArray)}_getPointAtLength(y){if(!this.attrs.data)return null;const b=this.pathLength;return y-1>b?null:i.Path.getPointAtLengthOfDataArray(y,this.dataArray)}_readDataAttribute(){this.dataArray=i.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(y){y.setAttr("font",this._getContextFont()),y.setAttr("textBaseline",this.textBaseline()),y.setAttr("textAlign","left"),y.save();var b=this.textDecoration(),w=this.fill(),x=this.fontSize(),S=this.glyphInfo;b==="underline"&&y.beginPath();for(var _=0;_<S.length;_++){y.save();var O=S[_].p0;y.translate(O.x,O.y),y.rotate(S[_].rotation),this.partialText=S[_].text,y.fillStrokeShape(this),b==="underline"&&(_===0&&y.moveTo(0,x/2+1),y.lineTo(x,x/2+1)),y.restore()}b==="underline"&&(y.strokeStyle=w,y.lineWidth=x/20,y.stroke()),y.restore()}_hitFunc(y){y.beginPath();var b=this.glyphInfo;if(b.length>=1){var w=b[0].p0;y.moveTo(w.x,w.y)}for(var x=0;x<b.length;x++){var S=b[x].p1;y.lineTo(S.x,S.y)}y.setAttr("lineWidth",this.fontSize()),y.setAttr("strokeStyle",this.colorKey),y.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(y){return s.Text.prototype.setText.call(this,y)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(y){var b=this.dummyCanvas,w=b.getContext("2d");w.save(),w.font=this._getContextFont();var x=w.measureText(y);return w.restore(),{width:x.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:y,height:b}=this._getTextSize(this.attrs.text);if(this.textWidth=y,this.textHeight=b,this.glyphInfo=[],!this.attrs.data)return null;const w=this.letterSpacing(),x=this.align(),S=this.kerningFunc(),_=Math.max(this.textWidth+((this.attrs.text||"").length-1)*w,0);let O=0;x==="center"&&(O=Math.max(0,this.pathLength/2-_/2)),x==="right"&&(O=Math.max(0,this.pathLength-_));const T=(0,s.stringToArray)(this.text());let E=O;for(var P=0;P<T.length;P++){const I=this._getPointAtLength(E);if(!I)return;let A=this._getTextSize(T[P]).width+w;if(T[P]===" "&&x==="justify"){const V=this.text().split(" ").length-1;A+=(this.pathLength-_)/V}const D=this._getPointAtLength(E+A);if(!D)return;const M=i.Path.getLineLength(I.x,I.y,D.x,D.y);let $=0;if(S)try{$=S(T[P-1],T[P])*this.fontSize()}catch{$=0}I.x+=$,D.x+=$,this.textWidth+=$;const L=i.Path.getPointOnLine($+M/2,I.x,I.y,D.x,D.y),N=Math.atan2(D.y-I.y,D.x-I.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:T[P],rotation:N,p0:I,p1:D}),E+=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var y=[];this.glyphInfo.forEach(function(P){y.push(P.p0.x),y.push(P.p0.y),y.push(P.p1.x),y.push(P.p1.y)});for(var b=y[0]||0,w=y[0]||0,x=y[1]||0,S=y[1]||0,_,O,T=0;T<y.length/2;T++)_=y[T*2],O=y[T*2+1],b=Math.min(b,_),w=Math.max(w,_),x=Math.min(x,O),S=Math.max(S,O);var E=this.fontSize();return{x:b-E/2,y:x-E/2,width:w-b+E,height:S-x+E}}destroy(){return r.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Dg.TextPath=p,p.prototype._fillFunc=d,p.prototype._strokeFunc=f,p.prototype._fillFuncHit=d,p.prototype._strokeFuncHit=f,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(p),e.Factory.addGetterSetter(p,"data"),e.Factory.addGetterSetter(p,"fontFamily","Arial"),e.Factory.addGetterSetter(p,"fontSize",12,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(p,"fontStyle",h),e.Factory.addGetterSetter(p,"align","left"),e.Factory.addGetterSetter(p,"letterSpacing",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(p,"textBaseline","middle"),e.Factory.addGetterSetter(p,"fontVariant",h),e.Factory.addGetterSetter(p,"text",c),e.Factory.addGetterSetter(p,"textDecoration",null),e.Factory.addGetterSetter(p,"kerningFunc",null),Dg}var Ng={},p$;function wCe(){if(p$)return Ng;p$=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.Transformer=void 0;const r=Gn(),e=Si(),n=er(),i=Nr(),s=B7(),o=V3(),a=_i(),c=Mi(),h=_i();var d="tr-konva",f=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(D=>D+`.${d}`).join(" "),p="nodesRect",g=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],y={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const b="ontouchstart"in a.Konva._global;function w(D,M,$){if(D==="rotater")return $;M+=r.Util.degToRad(y[D]||0);var L=(r.Util.radToDeg(M)%360+360)%360;return r.Util._inRange(L,315+22.5,360)||r.Util._inRange(L,0,22.5)?"ns-resize":r.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":r.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":r.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":r.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":r.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":r.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":r.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(r.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}var x=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],S=1e8;function _(D){return{x:D.x+D.width/2*Math.cos(D.rotation)+D.height/2*Math.sin(-D.rotation),y:D.y+D.height/2*Math.cos(D.rotation)+D.width/2*Math.sin(D.rotation)}}function O(D,M,$){const L=$.x+(D.x-$.x)*Math.cos(M)-(D.y-$.y)*Math.sin(M),N=$.y+(D.x-$.x)*Math.sin(M)+(D.y-$.y)*Math.cos(M);return{...D,rotation:D.rotation+M,x:L,y:N}}function T(D,M){const $=_(D);return O(D,M,$)}function E(D,M,$){let L=M;for(let N=0;N<D.length;N++){const V=a.Konva.getAngle(D[N]),U=Math.abs(V-M)%(Math.PI*2);Math.min(U,Math.PI*2-U)<$&&(L=V)}return L}let P=0,I=class extends o.Group{constructor(M){super(M),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(f,this.update),this.getNode()&&this.update()}attachTo(M){return this.setNode(M),this}setNode(M){return r.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([M])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return d+this._id}setNodes(M=[]){this._nodes&&this._nodes.length&&this.detach();const $=M.filter(N=>N.isAncestorOf(this)?(r.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=M=$,M.length===1&&this.useSingleNodeRotation()?this.rotation(M[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(N=>{const V=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},U=N._attrsAffectingSize.map(F=>F+"Change."+this._getEventNamespace()).join(" ");N.on(U,V),N.on(g.map(F=>F+`.${this._getEventNamespace()}`).join(" "),V),N.on(`absoluteTransformChange.${this._getEventNamespace()}`,V),this._proxyDrag(N)}),this._resetTransformCache();var L=!!this.findOne(".top-left");return L&&this.update(),this}_proxyDrag(M){let $;M.on(`dragstart.${this._getEventNamespace()}`,L=>{$=M.getAbsolutePosition(),!this.isDragging()&&M!==this.findOne(".back")&&this.startDrag(L,!1)}),M.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!$)return;const N=M.getAbsolutePosition(),V=N.x-$.x,U=N.y-$.y;this.nodes().forEach(F=>{if(F===M||F.isDragging())return;const H=F.getAbsolutePosition();F.setAbsolutePosition({x:H.x+V,y:H.y+U}),F.startDrag(L)}),$=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(M=>{M.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p,this.__getNodeRect)}__getNodeShape(M,$=this.rotation(),L){var N=M.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),V=M.getAbsoluteScale(L),U=M.getAbsolutePosition(L),F=N.x*V.x-M.offsetX()*V.x,H=N.y*V.y-M.offsetY()*V.y;const K=(a.Konva.getAngle(M.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),ie={x:U.x+F*Math.cos(K)+H*Math.sin(-K),y:U.y+H*Math.cos(K)+F*Math.sin(K),width:N.width*V.x,height:N.height*V.y,rotation:K};return O(ie,-a.Konva.getAngle($),{x:0,y:0})}__getNodeRect(){var M=this.getNode();if(!M)return{x:-S,y:-S,width:0,height:0,rotation:0};const $=[];this.nodes().map(K=>{const ie=K.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var he=[{x:ie.x,y:ie.y},{x:ie.x+ie.width,y:ie.y},{x:ie.x+ie.width,y:ie.y+ie.height},{x:ie.x,y:ie.y+ie.height}],me=K.getAbsoluteTransform();he.forEach(function(Pe){var _e=me.point(Pe);$.push(_e)})});const L=new r.Transform;L.rotate(-a.Konva.getAngle(this.rotation()));var N=1/0,V=1/0,U=-1/0,F=-1/0;$.forEach(function(K){var ie=L.point(K);N===void 0&&(N=U=ie.x,V=F=ie.y),N=Math.min(N,ie.x),V=Math.min(V,ie.y),U=Math.max(U,ie.x),F=Math.max(F,ie.y)}),L.invert();const H=L.point({x:N,y:V});return{x:H.x,y:H.y,width:U-N,height:F-V,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),x.forEach(M=>{this._createAnchor(M)}),this._createAnchor("rotater")}_createAnchor(M){var $=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:M+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:b?10:"auto"}),L=this;$.on("mousedown touchstart",function(N){L._handleMouseDown(N)}),$.on("dragstart",N=>{$.stopDrag(),N.cancelBubble=!0}),$.on("dragend",N=>{N.cancelBubble=!0}),$.on("mouseenter",()=>{var N=a.Konva.getAngle(this.rotation()),V=this.rotateAnchorCursor(),U=w(M,N,V);$.getStage().content&&($.getStage().content.style.cursor=U),this._cursorChange=!0}),$.on("mouseout",()=>{$.getStage().content&&($.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add($)}_createBack(){var M=new i.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc($,L){var N=L.getParent(),V=N.padding();$.beginPath(),$.rect(-V,-V,L.width()+V*2,L.height()+V*2),$.moveTo(L.width()/2,-V),N.rotateEnabled()&&N.rotateLineVisible()&&$.lineTo(L.width()/2,-N.rotateAnchorOffset()*r.Util._sign(L.height())-V),$.fillStrokeShape(L)},hitFunc:($,L)=>{if(this.shouldOverdrawWholeArea()){var N=this.padding();$.beginPath(),$.rect(-N,-N,L.width()+N*2,L.height()+N*2),$.fillStrokeShape(L)}}});this.add(M),this._proxyDrag(M),M.on("dragstart",$=>{$.cancelBubble=!0}),M.on("dragmove",$=>{$.cancelBubble=!0}),M.on("dragend",$=>{$.cancelBubble=!0}),this.on("dragmove",$=>{this.update()})}_handleMouseDown(M){if(!this._transforming){this._movingAnchorName=M.target.name().split(" ")[0];var $=this._getNodeRect(),L=$.width,N=$.height,V=Math.sqrt(Math.pow(L,2)+Math.pow(N,2));this.sin=Math.abs(N/V),this.cos=Math.abs(L/V),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var U=M.target.getAbsolutePosition(),F=M.target.getStage().getPointerPosition();this._anchorDragOffset={x:F.x-U.x,y:F.y-U.y},P++,this._fire("transformstart",{evt:M.evt,target:this.getNode()}),this._nodes.forEach(H=>{H._fire("transformstart",{evt:M.evt,target:H})})}}_handleMouseMove(M){var $,L,N,V=this.findOne("."+this._movingAnchorName),U=V.getStage();U.setPointersPositions(M);const F=U.getPointerPosition();let H={x:F.x-this._anchorDragOffset.x,y:F.y-this._anchorDragOffset.y};const K=V.getAbsolutePosition();this.anchorDragBoundFunc()&&(H=this.anchorDragBoundFunc()(K,H,M)),V.setAbsolutePosition(H);const ie=V.getAbsolutePosition();if(!(K.x===ie.x&&K.y===ie.y)){if(this._movingAnchorName==="rotater"){var he=this._getNodeRect();$=V.x()-he.width/2,L=-V.y()+he.height/2;let Ee=Math.atan2(-L,$)+Math.PI/2;he.height<0&&(Ee-=Math.PI);var me=a.Konva.getAngle(this.rotation());const ee=me+Ee,Y=a.Konva.getAngle(this.rotationSnapTolerance()),fe=E(this.rotationSnaps(),ee,Y)-he.rotation,we=T(he,fe);this._fitNodesInto(we,M);return}var Pe=this.shiftBehavior(),_e;Pe==="inverted"?_e=this.keepRatio()&&!M.shiftKey:Pe==="none"?_e=this.keepRatio():_e=this.keepRatio()||M.shiftKey;var q=this.centeredScaling()||M.altKey;if(this._movingAnchorName==="top-left"){if(_e){var ue=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};N=Math.sqrt(Math.pow(ue.x-V.x(),2)+Math.pow(ue.y-V.y(),2));var Se=this.findOne(".top-left").x()>ue.x?-1:1,ke=this.findOne(".top-left").y()>ue.y?-1:1;$=N*this.cos*Se,L=N*this.sin*ke,this.findOne(".top-left").x(ue.x-$),this.findOne(".top-left").y(ue.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(V.y());else if(this._movingAnchorName==="top-right"){if(_e){var ue=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};N=Math.sqrt(Math.pow(V.x()-ue.x,2)+Math.pow(ue.y-V.y(),2));var Se=this.findOne(".top-right").x()<ue.x?-1:1,ke=this.findOne(".top-right").y()>ue.y?-1:1;$=N*this.cos*Se,L=N*this.sin*ke,this.findOne(".top-right").x(ue.x+$),this.findOne(".top-right").y(ue.y-L)}var J=V.position();this.findOne(".top-left").y(J.y),this.findOne(".bottom-right").x(J.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(V.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(V.x());else if(this._movingAnchorName==="bottom-left"){if(_e){var ue=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};N=Math.sqrt(Math.pow(ue.x-V.x(),2)+Math.pow(V.y()-ue.y,2));var Se=ue.x<V.x()?-1:1,ke=V.y()<ue.y?-1:1;$=N*this.cos*Se,L=N*this.sin*ke,V.x(ue.x-$),V.y(ue.y+L)}J=V.position(),this.findOne(".top-left").x(J.x),this.findOne(".bottom-right").y(J.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(V.y());else if(this._movingAnchorName==="bottom-right"){if(_e){var ue=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};N=Math.sqrt(Math.pow(V.x()-ue.x,2)+Math.pow(V.y()-ue.y,2));var Se=this.findOne(".bottom-right").x()<ue.x?-1:1,ke=this.findOne(".bottom-right").y()<ue.y?-1:1;$=N*this.cos*Se,L=N*this.sin*ke,this.findOne(".bottom-right").x(ue.x+$),this.findOne(".bottom-right").y(ue.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var q=this.centeredScaling()||M.altKey;if(q){var z=this.findOne(".top-left"),X=this.findOne(".bottom-right"),te=z.x(),se=z.y(),Q=this.getWidth()-X.x(),Z=this.getHeight()-X.y();X.move({x:-te,y:-se}),z.move({x:Q,y:Z})}var le=this.findOne(".top-left").getAbsolutePosition();$=le.x,L=le.y;var pe=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),be=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:$,y:L,width:pe,height:be,rotation:a.Konva.getAngle(this.rotation())},M)}}_handleMouseUp(M){this._removeEvents(M)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(M){var $;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var L=this.getNode();P--,this._fire("transformend",{evt:M,target:L}),($=this.getLayer())===null||$===void 0||$.batchDraw(),L&&this._nodes.forEach(N=>{var V;N._fire("transformend",{evt:M,target:N}),(V=N.getLayer())===null||V===void 0||V.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(M,$){var L=this._getNodeRect();const N=1;if(r.Util._inRange(M.width,-this.padding()*2-N,N)){this.update();return}if(r.Util._inRange(M.height,-this.padding()*2-N,N)){this.update();return}var V=new r.Transform;if(V.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&M.width<0&&this._movingAnchorName.indexOf("left")>=0){const me=V.point({x:-this.padding()*2,y:0});M.x+=me.x,M.y+=me.y,M.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=me.x,this._anchorDragOffset.y-=me.y}else if(this._movingAnchorName&&M.width<0&&this._movingAnchorName.indexOf("right")>=0){const me=V.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=me.x,this._anchorDragOffset.y-=me.y,M.width+=this.padding()*2}if(this._movingAnchorName&&M.height<0&&this._movingAnchorName.indexOf("top")>=0){const me=V.point({x:0,y:-this.padding()*2});M.x+=me.x,M.y+=me.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=me.x,this._anchorDragOffset.y-=me.y,M.height+=this.padding()*2}else if(this._movingAnchorName&&M.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const me=V.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=me.x,this._anchorDragOffset.y-=me.y,M.height+=this.padding()*2}if(this.boundBoxFunc()){const me=this.boundBoxFunc()(L,M);me?M=me:r.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const U=1e7,F=new r.Transform;F.translate(L.x,L.y),F.rotate(L.rotation),F.scale(L.width/U,L.height/U);const H=new r.Transform,K=M.width/U,ie=M.height/U;this.flipEnabled()===!1?(H.translate(M.x,M.y),H.rotate(M.rotation),H.translate(M.width<0?M.width:0,M.height<0?M.height:0),H.scale(Math.abs(K),Math.abs(ie))):(H.translate(M.x,M.y),H.rotate(M.rotation),H.scale(K,ie));const he=H.multiply(F.invert());this._nodes.forEach(me=>{var Pe;const _e=me.getParent().getAbsoluteTransform(),ue=me.getTransform().copy();ue.translate(me.offsetX(),me.offsetY());const Se=new r.Transform;Se.multiply(_e.copy().invert()).multiply(he).multiply(_e).multiply(ue);const ke=Se.decompose();me.setAttrs(ke),(Pe=me.getLayer())===null||Pe===void 0||Pe.batchDraw()}),this.rotation(r.Util._getRotation(M.rotation)),this._nodes.forEach(me=>{this._fire("transform",{evt:$,target:me}),me._fire("transform",{evt:$,target:me})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(M,$){this.findOne(M).setAttrs($)}update(){var M,$=this._getNodeRect();this.rotation(r.Util._getRotation($.rotation));var L=$.width,N=$.height,V=this.enabledAnchors(),U=this.resizeEnabled(),F=this.padding(),H=this.anchorSize();const K=this.find("._anchor");K.forEach(he=>{he.setAttrs({width:H,height:H,offsetX:H/2,offsetY:H/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:H/2+F,offsetY:H/2+F,visible:U&&V.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:H/2+F,visible:U&&V.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:H/2-F,offsetY:H/2+F,visible:U&&V.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:N/2,offsetX:H/2+F,visible:U&&V.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:N/2,offsetX:H/2-F,visible:U&&V.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:N,offsetX:H/2+F,offsetY:H/2-F,visible:U&&V.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:N,offsetY:H/2-F,visible:U&&V.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:N,offsetX:H/2-F,offsetY:H/2-F,visible:U&&V.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*r.Util._sign(N)-F,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:N,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const ie=this.anchorStyleFunc();ie&&K.forEach(he=>{ie(he)}),(M=this.getLayer())===null||M===void 0||M.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var M=this.findOne("."+this._movingAnchorName);M&&M.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),o.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(M){var $=n.Node.prototype.clone.call(this,M);return $}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ng.Transformer=I,I.isTransforming=()=>P>0;function A(D){return D instanceof Array||r.Util.warn("enabledAnchors value should be an array"),D instanceof Array&&D.forEach(function(M){x.indexOf(M)===-1&&r.Util.warn("Unknown anchor name: "+M+". Available names are: "+x.join(", "))}),D||[]}return I.prototype.className="Transformer",(0,h._registerNode)(I),e.Factory.addGetterSetter(I,"enabledAnchors",x,A),e.Factory.addGetterSetter(I,"flipEnabled",!0,(0,c.getBooleanValidator)()),e.Factory.addGetterSetter(I,"resizeEnabled",!0),e.Factory.addGetterSetter(I,"anchorSize",10,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(I,"rotateEnabled",!0),e.Factory.addGetterSetter(I,"rotateLineVisible",!0),e.Factory.addGetterSetter(I,"rotationSnaps",[]),e.Factory.addGetterSetter(I,"rotateAnchorOffset",50,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(I,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(I,"rotationSnapTolerance",5,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(I,"borderEnabled",!0),e.Factory.addGetterSetter(I,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(I,"anchorStrokeWidth",1,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(I,"anchorFill","white"),e.Factory.addGetterSetter(I,"anchorCornerRadius",0,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(I,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(I,"borderStrokeWidth",1,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(I,"borderDash"),e.Factory.addGetterSetter(I,"keepRatio",!0),e.Factory.addGetterSetter(I,"shiftBehavior","default"),e.Factory.addGetterSetter(I,"centeredScaling",!1),e.Factory.addGetterSetter(I,"ignoreStroke",!1),e.Factory.addGetterSetter(I,"padding",0,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(I,"node"),e.Factory.addGetterSetter(I,"nodes"),e.Factory.addGetterSetter(I,"boundBoxFunc"),e.Factory.addGetterSetter(I,"anchorDragBoundFunc"),e.Factory.addGetterSetter(I,"anchorStyleFunc"),e.Factory.addGetterSetter(I,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(I,"useSingleNodeRotation",!0),e.Factory.backCompat(I,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Ng}var $g={},m$;function _Ce(){if(m$)return $g;m$=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.Wedge=void 0;const r=Si(),e=Nr(),n=_i(),i=Mi(),s=_i();let o=class extends e.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),c.lineTo(0,0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(c){this.radius(c/2)}setHeight(c){this.radius(c/2)}};return $g.Wedge=o,o.prototype.className="Wedge",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),r.Factory.addGetterSetter(o,"radius",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"angle",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"clockwise",!1),r.Factory.backCompat(o,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),$g}var Vg={},g$;function SCe(){if(g$)return Vg;g$=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.Blur=void 0;const r=Si(),e=er(),n=Mi();function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(h,d){var f=h.data,p=h.width,g=h.height,y,b,w,x,S,_,O,T,E,P,I,A,D,M,$,L,N,V,U,F,H,K,ie,he,me=d+d+1,Pe=p-1,_e=g-1,ue=d+1,Se=ue*(ue+1)/2,ke=new i,J=null,q=ke,z=null,X=null,te=s[d],se=o[d];for(w=1;w<me;w++)q=q.next=new i,w===ue&&(J=q);for(q.next=ke,O=_=0,b=0;b<g;b++){for(L=N=V=U=T=E=P=I=0,A=ue*(F=f[_]),D=ue*(H=f[_+1]),M=ue*(K=f[_+2]),$=ue*(ie=f[_+3]),T+=Se*F,E+=Se*H,P+=Se*K,I+=Se*ie,q=ke,w=0;w<ue;w++)q.r=F,q.g=H,q.b=K,q.a=ie,q=q.next;for(w=1;w<ue;w++)x=_+((Pe<w?Pe:w)<<2),T+=(q.r=F=f[x])*(he=ue-w),E+=(q.g=H=f[x+1])*he,P+=(q.b=K=f[x+2])*he,I+=(q.a=ie=f[x+3])*he,L+=F,N+=H,V+=K,U+=ie,q=q.next;for(z=ke,X=J,y=0;y<p;y++)f[_+3]=ie=I*te>>se,ie!==0?(ie=255/ie,f[_]=(T*te>>se)*ie,f[_+1]=(E*te>>se)*ie,f[_+2]=(P*te>>se)*ie):f[_]=f[_+1]=f[_+2]=0,T-=A,E-=D,P-=M,I-=$,A-=z.r,D-=z.g,M-=z.b,$-=z.a,x=O+((x=y+d+1)<Pe?x:Pe)<<2,L+=z.r=f[x],N+=z.g=f[x+1],V+=z.b=f[x+2],U+=z.a=f[x+3],T+=L,E+=N,P+=V,I+=U,z=z.next,A+=F=X.r,D+=H=X.g,M+=K=X.b,$+=ie=X.a,L-=F,N-=H,V-=K,U-=ie,X=X.next,_+=4;O+=p}for(y=0;y<p;y++){for(N=V=U=L=E=P=I=T=0,_=y<<2,A=ue*(F=f[_]),D=ue*(H=f[_+1]),M=ue*(K=f[_+2]),$=ue*(ie=f[_+3]),T+=Se*F,E+=Se*H,P+=Se*K,I+=Se*ie,q=ke,w=0;w<ue;w++)q.r=F,q.g=H,q.b=K,q.a=ie,q=q.next;for(S=p,w=1;w<=d;w++)_=S+y<<2,T+=(q.r=F=f[_])*(he=ue-w),E+=(q.g=H=f[_+1])*he,P+=(q.b=K=f[_+2])*he,I+=(q.a=ie=f[_+3])*he,L+=F,N+=H,V+=K,U+=ie,q=q.next,w<_e&&(S+=p);for(_=y,z=ke,X=J,b=0;b<g;b++)x=_<<2,f[x+3]=ie=I*te>>se,ie>0?(ie=255/ie,f[x]=(T*te>>se)*ie,f[x+1]=(E*te>>se)*ie,f[x+2]=(P*te>>se)*ie):f[x]=f[x+1]=f[x+2]=0,T-=A,E-=D,P-=M,I-=$,A-=z.r,D-=z.g,M-=z.b,$-=z.a,x=y+((x=b+ue)<_e?x:_e)*p<<2,T+=L+=z.r=f[x],E+=N+=z.g=f[x+1],P+=V+=z.b=f[x+2],I+=U+=z.a=f[x+3],z=z.next,A+=F=X.r,D+=H=X.g,M+=K=X.b,$+=ie=X.a,L-=F,N-=H,V-=K,U-=ie,X=X.next,_+=p}}const c=function(d){var f=Math.round(this.blurRadius());f>0&&a(d,f)};return Vg.Blur=c,r.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),Vg}var Lg={},y$;function CCe(){if(y$)return Lg;y$=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.Brighten=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=this.brightness()*255,a=s.data,c=a.length,h;for(h=0;h<c;h+=4)a[h]+=o,a[h+1]+=o,a[h+2]+=o};return Lg.Brighten=i,r.Factory.addGetterSetter(e.Node,"brightness",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),Lg}var Bg={},v$;function kCe(){if(v$)return Bg;v$=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.Contrast=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=Math.pow((this.contrast()+100)/100,2),a=s.data,c=a.length,h=150,d=150,f=150,p;for(p=0;p<c;p+=4)h=a[p],d=a[p+1],f=a[p+2],h/=255,h-=.5,h*=o,h+=.5,h*=255,d/=255,d-=.5,d*=o,d+=.5,d*=255,f/=255,f-=.5,f*=o,f+=.5,f*=255,h=h<0?0:h>255?255:h,d=d<0?0:d>255?255:d,f=f<0?0:f>255?255:f,a[p]=h,a[p+1]=d,a[p+2]=f};return Bg.Contrast=i,r.Factory.addGetterSetter(e.Node,"contrast",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),Bg}var Ug={},b$;function TCe(){if(b$)return Ug;b$=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.Emboss=void 0;const r=Si(),e=er(),n=Gn(),i=Mi(),s=function(o){var a=this.embossStrength()*10,c=this.embossWhiteLevel()*255,h=this.embossDirection(),d=this.embossBlend(),f=0,p=0,g=o.data,y=o.width,b=o.height,w=y*4,x=b;switch(h){case"top-left":f=-1,p=-1;break;case"top":f=-1,p=0;break;case"top-right":f=-1,p=1;break;case"right":f=0,p=1;break;case"bottom-right":f=1,p=1;break;case"bottom":f=1,p=0;break;case"bottom-left":f=1,p=-1;break;case"left":f=0,p=-1;break;default:n.Util.error("Unknown emboss direction: "+h)}do{var S=(x-1)*w,_=f;x+_<1&&(_=0),x+_>b&&(_=0);var O=(x-1+_)*y*4,T=y;do{var E=S+(T-1)*4,P=p;T+P<1&&(P=0),T+P>y&&(P=0);var I=O+(T-1+P)*4,A=g[E]-g[I],D=g[E+1]-g[I+1],M=g[E+2]-g[I+2],$=A,L=$>0?$:-$,N=D>0?D:-D,V=M>0?M:-M;if(N>L&&($=D),V>L&&($=M),$*=a,d){var U=g[E]+$,F=g[E+1]+$,H=g[E+2]+$;g[E]=U>255?255:U<0?0:U,g[E+1]=F>255?255:F<0?0:F,g[E+2]=H>255?255:H<0?0:H}else{var K=c-$;K<0?K=0:K>255&&(K=255),g[E]=g[E+1]=g[E+2]=K}}while(--T)}while(--x)};return Ug.Emboss=s,r.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"embossDirection","top-left",null,r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"embossBlend",!1,null,r.Factory.afterSetFilter),Ug}var Fg={},x$;function MCe(){if(x$)return Fg;x$=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.Enhance=void 0;const r=Si(),e=er(),n=Mi();function i(o,a,c,h,d){var f=c-a,p=d-h,g;return f===0?h+p/2:p===0?h:(g=(o-a)/f,g=p*g+h,g)}const s=function(o){var a=o.data,c=a.length,h=a[0],d=h,f,p=a[1],g=p,y,b=a[2],w=b,x,S,_=this.enhance();if(_!==0){for(S=0;S<c;S+=4)f=a[S+0],f<h?h=f:f>d&&(d=f),y=a[S+1],y<p?p=y:y>g&&(g=y),x=a[S+2],x<b?b=x:x>w&&(w=x);d===h&&(d=255,h=0),g===p&&(g=255,p=0),w===b&&(w=255,b=0);var O,T,E,P,I,A,D,M,$;for(_>0?(T=d+_*(255-d),E=h-_*(h-0),I=g+_*(255-g),A=p-_*(p-0),M=w+_*(255-w),$=b-_*(b-0)):(O=(d+h)*.5,T=d+_*(d-O),E=h+_*(h-O),P=(g+p)*.5,I=g+_*(g-P),A=p+_*(p-P),D=(w+b)*.5,M=w+_*(w-D),$=b+_*(b-D)),S=0;S<c;S+=4)a[S+0]=i(a[S+0],h,d,E,T),a[S+1]=i(a[S+1],p,g,A,I),a[S+2]=i(a[S+2],b,w,$,M)}};return Fg.Enhance=s,r.Factory.addGetterSetter(e.Node,"enhance",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),Fg}var zg={},O$;function ECe(){if(O$)return zg;O$=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.Grayscale=void 0;const r=function(e){var n=e.data,i=n.length,s,o;for(s=0;s<i;s+=4)o=.34*n[s]+.5*n[s+1]+.16*n[s+2],n[s]=o,n[s+1]=o,n[s+2]=o};return zg.Grayscale=r,zg}var Xg={},w$;function PCe(){if(w$)return Xg;w$=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.HSL=void 0;const r=Si(),e=er(),n=Mi();r.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"luminance",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter);const i=function(s){var o=s.data,a=o.length,c=1,h=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,f=this.luminance()*127,p,g=c*h*Math.cos(d*Math.PI/180),y=c*h*Math.sin(d*Math.PI/180),b=.299*c+.701*g+.167*y,w=.587*c-.587*g+.33*y,x=.114*c-.114*g-.497*y,S=.299*c-.299*g-.328*y,_=.587*c+.413*g+.035*y,O=.114*c-.114*g+.293*y,T=.299*c-.3*g+1.25*y,E=.587*c-.586*g-1.05*y,P=.114*c+.886*g-.2*y,I,A,D,M;for(p=0;p<a;p+=4)I=o[p+0],A=o[p+1],D=o[p+2],M=o[p+3],o[p+0]=b*I+w*A+x*D+f,o[p+1]=S*I+_*A+O*D+f,o[p+2]=T*I+E*A+P*D+f,o[p+3]=M};return Xg.HSL=i,Xg}var Wg={},_$;function ACe(){if(_$)return Wg;_$=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.HSV=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=s.data,a=o.length,c=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,f,p=c*h*Math.cos(d*Math.PI/180),g=c*h*Math.sin(d*Math.PI/180),y=.299*c+.701*p+.167*g,b=.587*c-.587*p+.33*g,w=.114*c-.114*p-.497*g,x=.299*c-.299*p-.328*g,S=.587*c+.413*p+.035*g,_=.114*c-.114*p+.293*g,O=.299*c-.3*p+1.25*g,T=.587*c-.586*p-1.05*g,E=.114*c+.886*p-.2*g,P,I,A,D;for(f=0;f<a;f+=4)P=o[f+0],I=o[f+1],A=o[f+2],D=o[f+3],o[f+0]=y*P+b*I+w*A,o[f+1]=x*P+S*I+_*A,o[f+2]=O*P+T*I+E*A,o[f+3]=D};return Wg.HSV=i,r.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"value",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),Wg}var Qg={},S$;function RCe(){if(S$)return Qg;S$=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.Invert=void 0;const r=function(e){var n=e.data,i=n.length,s;for(s=0;s<i;s+=4)n[s]=255-n[s],n[s+1]=255-n[s+1],n[s+2]=255-n[s+2]};return Qg.Invert=r,Qg}var Hg={},C$;function ICe(){if(C$)return Hg;C$=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.Kaleidoscope=void 0;const r=Si(),e=er(),n=Gn(),i=Mi();var s=function(c,h,d){var f=c.data,p=h.data,g=c.width,y=c.height,b=d.polarCenterX||g/2,w=d.polarCenterY||y/2,x,S,_,O=0,T=0,E=0,P=0,I,A=Math.sqrt(b*b+w*w);S=g-b,_=y-w,I=Math.sqrt(S*S+_*_),A=I>A?I:A;var D=y,M=g,$,L,N=360/M*Math.PI/180,V,U;for(L=0;L<M;L+=1)for(V=Math.sin(L*N),U=Math.cos(L*N),$=0;$<D;$+=1)S=Math.floor(b+A*$/D*U),_=Math.floor(w+A*$/D*V),x=(_*g+S)*4,O=f[x+0],T=f[x+1],E=f[x+2],P=f[x+3],x=(L+$*g)*4,p[x+0]=O,p[x+1]=T,p[x+2]=E,p[x+3]=P},o=function(c,h,d){var f=c.data,p=h.data,g=c.width,y=c.height,b=d.polarCenterX||g/2,w=d.polarCenterY||y/2,x,S,_,O,T,E=0,P=0,I=0,A=0,D,M=Math.sqrt(b*b+w*w);S=g-b,_=y-w,D=Math.sqrt(S*S+_*_),M=D>M?D:M;var $=y,L=g,N,V,U=0,F,H;for(S=0;S<g;S+=1)for(_=0;_<y;_+=1)O=S-b,T=_-w,N=Math.sqrt(O*O+T*T)*$/M,V=(Math.atan2(T,O)*180/Math.PI+360+U)%360,V=V*L/360,F=Math.floor(V),H=Math.floor(N),x=(H*g+F)*4,E=f[x+0],P=f[x+1],I=f[x+2],A=f[x+3],x=(_*g+S)*4,p[x+0]=E,p[x+1]=P,p[x+2]=I,p[x+3]=A};const a=function(c){var h=c.width,d=c.height,f,p,g,y,b,w,x,S,_,O,T=Math.round(this.kaleidoscopePower()),E=Math.round(this.kaleidoscopeAngle()),P=Math.floor(h*(E%360)/360);if(!(T<1)){var I=n.Util.createCanvasElement();I.width=h,I.height=d;var A=I.getContext("2d").getImageData(0,0,h,d);n.Util.releaseCanvas(I),s(c,A,{polarCenterX:h/2,polarCenterY:d/2});for(var D=h/Math.pow(2,T);D<=8;)D=D*2,T-=1;D=Math.ceil(D);var M=D,$=0,L=M,N=1;for(P+D>h&&($=M,L=0,N=-1),p=0;p<d;p+=1)for(f=$;f!==L;f+=N)g=Math.round(f+P)%h,_=(h*p+g)*4,b=A.data[_+0],w=A.data[_+1],x=A.data[_+2],S=A.data[_+3],O=(h*p+f)*4,A.data[O+0]=b,A.data[O+1]=w,A.data[O+2]=x,A.data[O+3]=S;for(p=0;p<d;p+=1)for(M=Math.floor(D),y=0;y<T;y+=1){for(f=0;f<M+1;f+=1)_=(h*p+f)*4,b=A.data[_+0],w=A.data[_+1],x=A.data[_+2],S=A.data[_+3],O=(h*p+M*2-f-1)*4,A.data[O+0]=b,A.data[O+1]=w,A.data[O+2]=x,A.data[O+3]=S;M*=2}o(A,c,{polarRotation:0})}};return Hg.Kaleidoscope=a,r.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),Hg}var Gg={},k$;function DCe(){if(k$)return Gg;k$=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.Mask=void 0;const r=Si(),e=er(),n=Mi();function i(g,y,b){var w=(b*g.width+y)*4,x=[];return x.push(g.data[w++],g.data[w++],g.data[w++],g.data[w++]),x}function s(g,y){return Math.sqrt(Math.pow(g[0]-y[0],2)+Math.pow(g[1]-y[1],2)+Math.pow(g[2]-y[2],2))}function o(g){for(var y=[0,0,0],b=0;b<g.length;b++)y[0]+=g[b][0],y[1]+=g[b][1],y[2]+=g[b][2];return y[0]/=g.length,y[1]/=g.length,y[2]/=g.length,y}function a(g,y){var b=i(g,0,0),w=i(g,g.width-1,0),x=i(g,0,g.height-1),S=i(g,g.width-1,g.height-1),_=y||10;if(s(b,w)<_&&s(w,S)<_&&s(S,x)<_&&s(x,b)<_){for(var O=o([w,b,S,x]),T=[],E=0;E<g.width*g.height;E++){var P=s(O,[g.data[E*4],g.data[E*4+1],g.data[E*4+2]]);T[E]=P<_?0:255}return T}}function c(g,y){for(var b=0;b<g.width*g.height;b++)g.data[4*b+3]=y[b]}function h(g,y,b){for(var w=[1,1,1,1,0,1,1,1,1],x=Math.round(Math.sqrt(w.length)),S=Math.floor(x/2),_=[],O=0;O<b;O++)for(var T=0;T<y;T++){for(var E=O*y+T,P=0,I=0;I<x;I++)for(var A=0;A<x;A++){var D=O+I-S,M=T+A-S;if(D>=0&&D<b&&M>=0&&M<y){var $=D*y+M,L=w[I*x+A];P+=g[$]*L}}_[E]=P===255*8?255:0}return _}function d(g,y,b){for(var w=[1,1,1,1,1,1,1,1,1],x=Math.round(Math.sqrt(w.length)),S=Math.floor(x/2),_=[],O=0;O<b;O++)for(var T=0;T<y;T++){for(var E=O*y+T,P=0,I=0;I<x;I++)for(var A=0;A<x;A++){var D=O+I-S,M=T+A-S;if(D>=0&&D<b&&M>=0&&M<y){var $=D*y+M,L=w[I*x+A];P+=g[$]*L}}_[E]=P>=255*4?255:0}return _}function f(g,y,b){for(var w=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],x=Math.round(Math.sqrt(w.length)),S=Math.floor(x/2),_=[],O=0;O<b;O++)for(var T=0;T<y;T++){for(var E=O*y+T,P=0,I=0;I<x;I++)for(var A=0;A<x;A++){var D=O+I-S,M=T+A-S;if(D>=0&&D<b&&M>=0&&M<y){var $=D*y+M,L=w[I*x+A];P+=g[$]*L}}_[E]=P}return _}const p=function(g){var y=this.threshold(),b=a(g,y);return b&&(b=h(b,g.width,g.height),b=d(b,g.width,g.height),b=f(b,g.width,g.height),c(g,b)),g};return Gg.Mask=p,r.Factory.addGetterSetter(e.Node,"threshold",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),Gg}var Yg={},T$;function NCe(){if(T$)return Yg;T$=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.Noise=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=this.noise()*255,a=s.data,c=a.length,h=o/2,d;for(d=0;d<c;d+=4)a[d+0]+=h-2*h*Math.random(),a[d+1]+=h-2*h*Math.random(),a[d+2]+=h-2*h*Math.random()};return Yg.Noise=i,r.Factory.addGetterSetter(e.Node,"noise",.2,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),Yg}var jg={},M$;function $Ce(){if(M$)return jg;M$=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.Pixelate=void 0;const r=Si(),e=Gn(),n=er(),i=Mi(),s=function(o){var a=Math.ceil(this.pixelSize()),c=o.width,h=o.height,d,f,p,g,y,b,w,x=Math.ceil(c/a),S=Math.ceil(h/a),_,O,T,E,P,I,A,D=o.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(P=0;P<x;P+=1)for(I=0;I<S;I+=1){for(g=0,y=0,b=0,w=0,_=P*a,O=_+a,T=I*a,E=T+a,A=0,d=_;d<O;d+=1)if(!(d>=c))for(f=T;f<E;f+=1)f>=h||(p=(c*f+d)*4,g+=D[p+0],y+=D[p+1],b+=D[p+2],w+=D[p+3],A+=1);for(g=g/A,y=y/A,b=b/A,w=w/A,d=_;d<O;d+=1)if(!(d>=c))for(f=T;f<E;f+=1)f>=h||(p=(c*f+d)*4,D[p+0]=g,D[p+1]=y,D[p+2]=b,D[p+3]=w)}};return jg.Pixelate=s,r.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),jg}var qg={},E$;function VCe(){if(E$)return qg;E$=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.Posterize=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=Math.round(this.levels()*254)+1,a=s.data,c=a.length,h=255/o,d;for(d=0;d<c;d+=1)a[d]=Math.floor(a[d]/h)*h};return qg.Posterize=i,r.Factory.addGetterSetter(e.Node,"levels",.5,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),qg}var Zg={},P$;function LCe(){if(P$)return Zg;P$=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.RGB=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=s.data,a=o.length,c=this.red(),h=this.green(),d=this.blue(),f,p;for(f=0;f<a;f+=4)p=(.34*o[f]+.5*o[f+1]+.16*o[f+2])/255,o[f]=p*c,o[f+1]=p*h,o[f+2]=p*d,o[f+3]=o[f+3]};return Zg.RGB=i,r.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,r.Factory.afterSetFilter),Zg}var Kg={},A$;function BCe(){if(A$)return Kg;A$=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.RGBA=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=s.data,a=o.length,c=this.red(),h=this.green(),d=this.blue(),f=this.alpha(),p,g;for(p=0;p<a;p+=4)g=1-f,o[p]=c*f+o[p]*g,o[p+1]=h*f+o[p+1]*g,o[p+2]=d*f+o[p+2]*g};return Kg.RGBA=i,r.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),Kg}var Jg={},R$;function UCe(){if(R$)return Jg;R$=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.Sepia=void 0;const r=function(e){var n=e.data,i=n.length,s,o,a,c;for(s=0;s<i;s+=4)o=n[s+0],a=n[s+1],c=n[s+2],n[s+0]=Math.min(255,o*.393+a*.769+c*.189),n[s+1]=Math.min(255,o*.349+a*.686+c*.168),n[s+2]=Math.min(255,o*.272+a*.534+c*.131)};return Jg.Sepia=r,Jg}var e0={},I$;function FCe(){if(I$)return e0;I$=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.Solarize=void 0;const r=function(e){var n=e.data,i=e.width,s=e.height,o=i*4,a=s;do{var c=(a-1)*o,h=i;do{var d=c+(h-1)*4,f=n[d],p=n[d+1],g=n[d+2];f>127&&(f=255-f),p>127&&(p=255-p),g>127&&(g=255-g),n[d]=f,n[d+1]=p,n[d+2]=g}while(--h)}while(--a)};return e0.Solarize=r,e0}var t0={},D$;function zCe(){if(D$)return t0;D$=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.Threshold=void 0;const r=Si(),e=er(),n=Mi(),i=function(s){var o=this.threshold()*255,a=s.data,c=a.length,h;for(h=0;h<c;h+=1)a[h]=a[h]<o?0:255};return t0.Threshold=i,r.Factory.addGetterSetter(e.Node,"threshold",.5,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),t0}var N$;function XCe(){if(N$)return mg;N$=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.Konva=void 0;const r=cCe(),e=hCe(),n=dCe(),i=fCe(),s=pCe(),o=mCe(),a=gCe(),c=L7(),h=B3(),d=B7(),f=yCe(),p=vCe(),g=bCe(),y=xCe(),b=U7(),w=OCe(),x=wCe(),S=_Ce(),_=SCe(),O=CCe(),T=kCe(),E=TCe(),P=MCe(),I=ECe(),A=PCe(),D=ACe(),M=RCe(),$=ICe(),L=DCe(),N=NCe(),V=$Ce(),U=VCe(),F=LCe(),H=BCe(),K=UCe(),ie=FCe(),he=zCe();return mg.Konva=r.Konva.Util._assign(r.Konva,{Arc:e.Arc,Arrow:n.Arrow,Circle:i.Circle,Ellipse:s.Ellipse,Image:o.Image,Label:a.Label,Tag:a.Tag,Line:c.Line,Path:h.Path,Rect:d.Rect,RegularPolygon:f.RegularPolygon,Ring:p.Ring,Sprite:g.Sprite,Star:y.Star,Text:b.Text,TextPath:w.TextPath,Transformer:x.Transformer,Wedge:S.Wedge,Filters:{Blur:_.Blur,Brighten:O.Brighten,Contrast:T.Contrast,Emboss:E.Emboss,Enhance:P.Enhance,Grayscale:I.Grayscale,HSL:A.HSL,HSV:D.HSV,Invert:M.Invert,Kaleidoscope:$.Kaleidoscope,Mask:L.Mask,Noise:N.Noise,Pixelate:V.Pixelate,Posterize:U.Posterize,RGB:F.RGB,RGBA:H.RGBA,Sepia:K.Sepia,Solarize:ie.Solarize,Threshold:he.Threshold}}),mg}var WCe=Wx.exports,$$;function F7(){if($$)return Wx.exports;$$=1,Object.defineProperty(WCe,"__esModule",{value:!0});const r=XCe();return Wx.exports=r.Konva,Wx.exports}var hh=F7();const QCe=nm(hh),HCe=Fae({__proto__:null,default:QCe},[hh]);var z7={exports:{}};const X7=G_e(iue);/*!
 * vue-konva v3.0.1 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(r,e){(function(i,s){r.exports=s(X7,F7())})(sp,function(n,i){return function(s){var o={};function a(c){if(o[c])return o[c].exports;var h=o[c]={i:c,l:!1,exports:{}};return s[c].call(h.exports,h,h.exports,a),h.l=!0,h.exports}return a.m=s,a.c=o,a.d=function(c,h,d){a.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:d})},a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,h){if(h&1&&(c=a(c)),h&8||h&4&&typeof c=="object"&&c&&c.__esModule)return c;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),h&2&&typeof c!="string")for(var f in c)a.d(d,f,(function(p){return c[p]}).bind(null,f));return d},a.n=function(c){var h=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(h,"a",h),h},a.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},a.p="",a(a.s=2)}([function(s,o){s.exports=n},function(s,o){s.exports=i},function(s,o,a){s.exports=a(3)},function(s,o,a){a.r(o);var c=a(0),h=a(1),d=a.n(h);function f(N){if(!d.a.autoDrawEnabled){var V=N.getLayer()||N.getStage();V&&V.batchDraw()}}var p={key:!0,style:!0,elm:!0,isRootInsert:!0},g=".vue-konva-event";function y(N,V,U,F){V===void 0&&(V={}),U===void 0&&(U={});var H=N.__konvaNode,K={},ie=!1;for(var he in U)if(!p[he]){var me=he.slice(0,2)==="on",Pe=U[he]!==V[he];if(me&&Pe){var _e=he.substr(2).toLowerCase();_e.substr(0,7)==="content"&&(_e="content"+_e.substr(7,1).toUpperCase()+_e.substr(8)),H.off(_e+g,U[he])}var ue=!V.hasOwnProperty(he);ue&&H.setAttr(he,void 0)}for(var Se in V)if(!p[Se]){var ke=Se.slice(0,2)==="on",J=U[Se]!==V[Se];if(ke&&J){var q=Se.substr(2).toLowerCase();q.substr(0,7)==="content"&&(q="content"+q.substr(7,1).toUpperCase()+q.substr(8)),V[Se]&&(H.off(q+g),H.on(q+g,V[Se]))}!ke&&(V[Se]!==U[Se]||F&&V[Se]!==H.getAttr(Se))&&(ie=!0,K[Se]=V[Se])}ie&&(H.setAttrs(K),f(H))}var b="v";function w(N){function V(U){return U.__konvaNode?U:U.parent?V(U.parent):(console.error("vue-konva error: Can not find parent node"),{})}return V(N.parent)}function x(N){if(N!=null&&N.component)return N.component.__konvaNode||x(N.component.subTree)}function S(N){var V=N.el,U=N.component,F=x(N);if(V!=null&&V.tagName&&U&&!F){var H=V&&V.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+H+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return F}function _(N){var V=[];return N.children&&N.children.forEach(function(U){!U.component&&Array.isArray(U.children)&&U.children.forEach(function(F){!F.component&&Array.isArray(F.children)?V.push.apply(V,F.children):V.push(F)}),U.component&&V.push(U)}),V}function O(N,V){var U=_(N),F=[];U.forEach(function(K){var ie=S(K);ie&&F.push(ie)});var H=!1;F.forEach(function(K,ie){K.getZIndex()!==ie&&(K.setZIndex(ie),H=!0)}),H&&f(V)}function T(){return T=Object.assign||function(N){for(var V=1;V<arguments.length;V++){var U=arguments[V];for(var F in U)Object.prototype.hasOwnProperty.call(U,F)&&(N[F]=U[F])}return N},T.apply(this,arguments)}var E={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup:function(V,U){var F=U.attrs,H=U.slots,K=U.expose;U.emits;var ie=Object(c.getCurrentInstance)(),he=Object(c.reactive)({}),me=Object(c.ref)(null),Pe=new window.Konva.Stage({width:V.config.width,height:V.config.height,container:document.createElement("div")});ie.__konvaNode=Pe,Se();function _e(){return ie.__konvaNode}function ue(){return ie.__konvaNode}function Se(){var ke=he||{},J=T({},F,V.config);y(ie,J,ke,V.__useStrictMode),Object.assign(he,J)}return Object(c.onMounted)(function(){me.value.innerHTML="",Pe.container(me.value),Se()}),Object(c.onUpdated)(function(){Se(),O(ie.subTree,Pe)}),Object(c.onBeforeUnmount)(function(){Pe.destroy()}),Object(c.watch)(function(){return V.config},Se,{deep:!0}),K({getStage:ue,getNode:_e}),function(){var ke;return Object(c.h)("div",{ref:me},(ke=H.default)===null||ke===void 0?void 0:ke.call(H))}}};function P(){return P=Object.assign||function(N){for(var V=1;V<arguments.length;V++){var U=arguments[V];for(var F in U)Object.prototype.hasOwnProperty.call(U,F)&&(N[F]=U[F])}return N},P.apply(this,arguments)}var I=".vue-konva-event",A={Group:!0,Layer:!0,FastLayer:!0,Label:!0},D=function(N){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(U,F){var H=F.attrs,K=F.slots,ie=F.expose,he=Object(c.getCurrentInstance)(),me=Object(c.reactive)({}),Pe=window.Konva[N];if(!Pe){console.error("vue-konva error: Can not find node "+N);return}var _e=new Pe;he.__konvaNode=_e,he.vnode.__konvaNode=_e,ke();function ue(){return he.__konvaNode}function Se(){return he.__konvaNode}function ke(){var q={};for(var z in he.vnode.props)z.slice(0,2)==="on"&&(q[z]=he.vnode.props[z]);var X=me||{},te=P({},H,U.config,q);y(he,te,X,U.__useStrictMode),Object.assign(me,te)}Object(c.onMounted)(function(){var q=w(he).__konvaNode;q.add(_e),f(_e)}),Object(c.onUnmounted)(function(){f(_e),_e.destroy(),_e.off(I)}),Object(c.onUpdated)(function(){ke(),O(he.subTree,_e)}),Object(c.watch)(function(){return U.config},ke,{deep:!0}),ie({getStage:Se,getNode:ue});var J=A[N];return J?function(){var q;return Object(c.h)("template",{},(q=K.default)===null||q===void 0?void 0:q.call(K))}:function(){return null}}}};typeof window<"u"&&!window.Konva&&a(1);var M=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],$=[{name:"Stage",component:E}].concat(M.map(function(N){return{name:N,component:D(N)}})),L={install:function(V,U){var F=b;U&&U.prefix&&(F=U.prefix),$.forEach(function(H){V.component(""+F+H.name,H.component)})}};o.default=L}]).default})})(z7);var GCe=z7.exports;const W7=nm(GCe),v_={__name:"KonvaStage",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(r,{expose:e}){let n=0;function i(){return n+=1,n}let s={};function o(w){return s[w.uuid]}function a(w,x){if(w.uuid==x)return w;if(w.children)for(let _=0;_<w.children.length;_++){const O=w.children[_];var S=a(O,x);if(S)return S}return null}e({getObject:o});const c=pU(r,"modelValue");function h(w,x,S){var _=HCe[w],O=new _(S);return O.uuid=S.uuid,s[S.uuid]=O,x&&x.add(O),d(O,S),O}function d(w,x){let S=["x","y","width","height","offsetX","offsetY","fill","opacity","stroke","name","rotation","scaleX","scaleY","shadowColor","shadowOffset","shadowBlur","lineJoin","draggable"];for(let _=0;_<S.length;_++){const O=S[_],T=`${O}Change`;w.on(T,E=>{x[O]=E.newVal})}}function f(w,x,S){var _=s[S.uuid];if(_?_.setAttrs(S):_=h(w,x,S),S.children)for(let O=0;O<S.children.length;O++){const T=S.children[O];f(T.type,_,T)}return _}function p(w){if(w.uuid||(w.uuid=i()),w.children)for(let x=0;x<w.children.length;x++){const S=w.children[x];p(S)}}function g(w){var x=a(c.value,w.uuid);if(!x){w.remove();return}var S=[];if(w.getChildren){var _=w.getChildren();for(let T=0;T<_.length;T++){const E=_[T];var O=a(c.value,E.uuid);O||S.push(E)}}for(let T=0;T<S.length;T++)S[T].remove();if(w.getChildren){var _=w.getChildren();for(let E=0;E<_.length;E++){const P=_[E];g(P)}}}function y(w){let x=document.getElementById(c.value.container);var S=c.value.width||x.clientWidth,_=c.value.height||x.clientHeight;w.width(S),w.height(_)}function b(){p(c.value);var w=f("Stage",null,c.value);y(w),g(w)}return Qi(c.value,()=>{b()}),Jn(()=>{b()}),na(()=>{}),(w,x)=>null}},YCe=Xt("h1",null,"坐标系展示",-1),jCe=Xt("div",{class:"mylabel"},"坐标(x,y)",-1),qCe=Xt("div",{class:"mylabel"},"全局坐标(x,y)",-1),ZCe=Xt("div",{class:"mylabel"},"锚点(offset)",-1),KCe=Xt("div",{class:"mylabel"},"尺寸(w,h)",-1),JCe=Xt("div",{class:"mylabel"},"旋转角度",-1),e2e=Xt("div",{class:"mylabel"},"缩放(scale)",-1),t2e=Xt("div",{class:"mylabel"},"透明度(0-1)",-1),i2e=Xt("div",{class:"mylabel"},"颜色",-1),n2e=Xt("div",{class:"mylabel"},"shadowOffset",-1),r2e=Xt("div",{class:"mylabel"},"shadowBlur",-1),s2e=Xt("div",{class:"mylabel"},"lineJoin",-1),A2=800,R2=600,o2e={__name:"KonvaMain",setup(r){const e=lt({stageConfig:{width:A2,height:R2,fill:"black"},backgroundConfig:{x:0,y:0,width:A2,height:R2,fill:"#fefae0",stroke:"black",strokeWidth:1},rectConfig:{x:100,y:100,gx:100,gy:100,width:200,height:100,offsetX:0,offsetY:0,fill:"#dda15e",opacity:.8,stroke:"black",name:"rect",rotation:0,scaleX:1,scaleY:1,shadowColor:"#A78EEB",shadowOffset:{x:3,y:3},shadowBlur:3,lineJoin:"miter",draggable:!0}}),n=lt(null),i=lt(null),s=lt(null);function o(){if(n.value){var a=n.value.getNode();e.value.rectConfig.x=a.x(),e.value.rectConfig.y=a.y(),e.value.rectConfig.gx=a.absolutePosition().x,e.value.rectConfig.gy=a.absolutePosition().y,e.value.rectConfig.offsetX=a.offsetX(),e.value.rectConfig.offsetY=a.offsetY(),e.value.rectConfig.width=a.width(),e.value.rectConfig.height=a.height(),e.value.rectConfig.rotation=a.rotation(),e.value.rectConfig.rotation=a.rotation(),e.value.rectConfig.scaleX=a.scaleX(),e.value.rectConfig.scaleY=a.scaleY(),requestAnimationFrame(o)}}return Jn(()=>{requestAnimationFrame(o);var a=i.value.getNode(),c=s.value.getNode();a.on("click tap",function(h){var f,p;if(!h.target.hasName("rect")){(f=a.findOne("Transformer"))==null||f.destroy(),c.draw();return}(p=a.findOne("Transformer"))==null||p.destroy();var d=new hh.Transformer;c.add(d),d.nodes([h.target]),c.draw()}),window.stage=a,window.coordConfig=e,window.VueKonva=W7}),(a,c)=>{const h=Rt("v-rect"),d=Rt("v-arrow"),f=Rt("v-layer"),p=Rt("v-stage"),g=Rt("Col"),y=Rt("Divider"),b=Rt("InputNumber"),w=Rt("Row"),x=Rt("Slider"),S=Rt("ColorPicker"),_=Rt("Option"),O=Rt("Select"),T=Rt("Card");return ci(),ln(dn,null,[Ie(T,null,{title:et(()=>[YCe]),default:et(()=>[Ie(w,null,{default:et(()=>[Ie(g,null,{default:et(()=>[Xt("div",null,[Ie(p,{ref_key:"myStageRef",ref:i,config:e.value.stageConfig},{default:et(()=>[Ie(f,{ref_key:"myLayerRef",ref:s},{default:et(()=>[Ie(h,{config:e.value.backgroundConfig},null,8,["config"]),Ie(d,{config:{points:[0,0,A2,0],fill:"black",stroke:"black"}},null,8,["config"]),Ie(d,{config:{points:[0,0,0,R2],fill:"black",stroke:"black"}},null,8,["config"]),Ie(h,{ref_key:"myRectRef",ref:n,config:e.value.rectConfig,__useStrictMode:!0},null,8,["config"])]),_:1},512)]),_:1},8,["config"])])]),_:1}),Ie(g,null,{default:et(()=>[Xt("div",null,[Ie(w,null,{default:et(()=>[Ie(g,null,{default:et(()=>[Ie(y,null,{default:et(()=>[yn("基础")]),_:1}),Ie(w,null,{default:et(()=>[jCe,Ie(b,{modelValue:e.value.rectConfig.x,"onUpdate:modelValue":c[0]||(c[0]=E=>e.value.rectConfig.x=E),step:10},null,8,["modelValue"]),Ie(b,{modelValue:e.value.rectConfig.y,"onUpdate:modelValue":c[1]||(c[1]=E=>e.value.rectConfig.y=E),step:10},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[qCe,Ie(b,{modelValue:e.value.rectConfig.gx,"onUpdate:modelValue":c[2]||(c[2]=E=>e.value.rectConfig.gx=E),readonly:!0},null,8,["modelValue"]),Ie(b,{modelValue:e.value.rectConfig.gy,"onUpdate:modelValue":c[3]||(c[3]=E=>e.value.rectConfig.gy=E),readonly:!0},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[ZCe,Ie(b,{modelValue:e.value.rectConfig.offsetX,"onUpdate:modelValue":c[4]||(c[4]=E=>e.value.rectConfig.offsetX=E),step:10},null,8,["modelValue"]),Ie(b,{modelValue:e.value.rectConfig.offsetY,"onUpdate:modelValue":c[5]||(c[5]=E=>e.value.rectConfig.offsetY=E),step:10},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[KCe,Ie(b,{modelValue:e.value.rectConfig.width,"onUpdate:modelValue":c[6]||(c[6]=E=>e.value.rectConfig.width=E),step:10},null,8,["modelValue"]),Ie(b,{modelValue:e.value.rectConfig.height,"onUpdate:modelValue":c[7]||(c[7]=E=>e.value.rectConfig.height=E),step:10},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[JCe,Ie(b,{modelValue:e.value.rectConfig.rotation,"onUpdate:modelValue":c[8]||(c[8]=E=>e.value.rectConfig.rotation=E),step:10},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[e2e,Ie(b,{modelValue:e.value.rectConfig.scaleX,"onUpdate:modelValue":c[9]||(c[9]=E=>e.value.rectConfig.scaleX=E),step:.1},null,8,["modelValue"]),Ie(b,{modelValue:e.value.rectConfig.scaleY,"onUpdate:modelValue":c[10]||(c[10]=E=>e.value.rectConfig.scaleY=E),step:.1},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[t2e,Ie(x,{modelValue:e.value.rectConfig.opacity,"onUpdate:modelValue":c[11]||(c[11]=E=>e.value.rectConfig.opacity=E),min:0,max:1,step:.05,style:{width:"160px"}},null,8,["modelValue"])]),_:1}),Ie(y,null,{default:et(()=>[yn("阴影")]),_:1}),Ie(w,null,{default:et(()=>[i2e,Ie(S,{modelValue:e.value.rectConfig.shadowColor,"onUpdate:modelValue":c[12]||(c[12]=E=>e.value.rectConfig.shadowColor=E)},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[n2e,Ie(b,{modelValue:e.value.rectConfig.shadowOffsetX,"onUpdate:modelValue":c[13]||(c[13]=E=>e.value.rectConfig.shadowOffsetX=E)},null,8,["modelValue"]),Ie(b,{modelValue:e.value.rectConfig.shadowOffsetY,"onUpdate:modelValue":c[14]||(c[14]=E=>e.value.rectConfig.shadowOffsetY=E)},null,8,["modelValue"])]),_:1}),Ie(w,null,{default:et(()=>[r2e,Ie(b,{modelValue:e.value.rectConfig.shadowBlur,"onUpdate:modelValue":c[15]||(c[15]=E=>e.value.rectConfig.shadowBlur=E)},null,8,["modelValue"])]),_:1}),Ie(y,null,{default:et(()=>[yn("边角")]),_:1}),Ie(w,null,{default:et(()=>[s2e,Ie(O,{modelValue:e.value.rectConfig.lineJoin,"onUpdate:modelValue":c[16]||(c[16]=E=>e.value.rectConfig.lineJoin=E),style:{width:"160px"}},{default:et(()=>[Ie(_,{value:"miter"},{default:et(()=>[yn("miter")]),_:1}),Ie(_,{value:"bevel"},{default:et(()=>[yn("bevel")]),_:1}),Ie(_,{value:"round"},{default:et(()=>[yn("round")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),Ie(v_),Ie(T)],64)}}},a2e=["src"],i0={__name:"EasyLink",props:{link:String,width:Number,height:Number},setup(r){const e=r,n=lt(null);return Jn(()=>{var i=e.width?`${i}px`:"100%",s=e.height?`${s}px`:"100vh";n.value={width:i,height:s}}),(i,s)=>(ci(),ln("iframe",{src:e.link,style:Bh(n.value)},null,12,a2e))}},l2e={__name:"GridSquare",setup(r){const e=Wn(null),n=Wn(null),i=Wn(null),s=Wn(null),o=lt({rows:5,cols:8,boxWidth:100,boxHeight:50,offsetX:-400,offsetY:-125});Qi(o.value,()=>{h()});const a=Wn(null);function c(){var f=i.value.getNode(),p=s.value.getNode(),g=f.getChildren();for(let S=0;S<o.value.rows;S++)for(let _=0;_<o.value.cols;_++){var y=S*o.value.cols+_,b=g[y];b.x(_*o.value.boxWidth+o.value.offsetX),b.y(S*o.value.boxHeight+o.value.offsetY)}var w=p.findOne("#arrowx");w.points([0,0,o.value.boxWidth*o.value.cols+o.value.offsetX,0]);var x=p.findOne("#arrowy");x.points([0,0,0,o.value.boxHeight*o.value.rows+o.value.offsetY])}function h(){var f=n.value.getNode(),p=i.value.getNode(),g=s.value.getNode();p.removeChildren(),g.removeChildren();for(let _=0;_<o.value.rows;_++)for(let O=0;O<o.value.cols;O++){var y=new hh.Group({id:`${_}_${O}`});p.add(y);var b=new hh.Rect({x:0,y:0,width:o.value.boxWidth,height:o.value.boxHeight,stroke:"black",strokeWidth:1,draggable:!0,id:"box"});y.add(b);var w=new hh.Text({text:`(${_},${O})`,x:0,y:0,width:o.value.boxWidth,height:o.value.boxHeight,align:"center",verticalAlign:"middle",id:"text"});y.add(w)}var x=new hh.Arrow({x:0,y:0,points:[0,0,f.width(),0],pointerLength:20,pointerWidth:20,fill:"red",stroke:"red",strokeWidth:4,id:"arrowx"});g.add(x);var S=new hh.Arrow({x:0,y:0,points:[0,0,0,f.height()],pointerLength:20,pointerWidth:20,fill:"green",stroke:"green",strokeWidth:4,id:"arrowy"});g.add(S),c()}Jn(()=>{var f=n.value.getNode(),p=i.value.getNode();f.width(e.value.clientWidth),f.height(e.value.clientHeight),f.x(e.value.clientWidth/2),f.y(e.value.clientHeight/2),window.boxConfig=o,window.stage=f,window.layer=p,h(),f.on("wheel",g=>{g.evt.preventDefault();var y=f.scaleX(),b=f.getPointerPosition(),w={x:(b.x-f.x())/y,y:(b.y-f.y())/y};let x=g.evt.deltaY>0?1:-1;g.evt.ctrlKey&&(x=-x);const S=1.1;var _=x<0?y*S:y/S;f.scale({x:_,y:_});var O={x:b.x-w.x*_,y:b.y-w.y*_};f.position(O)}),f.on("mousemove",g=>{var y=f.getPointerPosition(),b=Math.floor((y.y-f.y()-o.value.offsetY)/o.value.boxHeight),w=Math.floor((y.x-f.x()-o.value.offsetX)/o.value.boxWidth),x=`#${b}_${w}`;if(a.value){var S=p.findOne(a.value);d(S,!1)}var S=p.findOne(x);d(S,!0),a.value=x})});function d(f,p){if(f){var g=f.findOne("#box");p?(console.log(g.fill()),g.fill("red")):g.fill(null)}}return(f,p)=>{const g=Rt("v-layer"),y=Rt("v-stage"),b=Rt("Col"),w=Rt("InputNumber"),x=Rt("FormItem"),S=Rt("Form"),_=Rt("Row");return ci(),Wr(_,null,{default:et(()=>[Ie(b,{span:18},{default:et(()=>[Xt("div",{class:"boxborder",ref_key:"boxParentRef",ref:e},[Ie(y,{ref_key:"boxStageRef",ref:n,config:{width:100,height:100,draggable:!0}},{default:et(()=>[Ie(g,{ref_key:"arrowLayerRef",ref:s},null,512),Ie(g,{ref_key:"boxLayerRef",ref:i},null,512)]),_:1},512)],512)]),_:1}),Ie(b,{span:6},{default:et(()=>[Ie(S,{"label-width":100},{default:et(()=>[Ie(x,{label:"行 / 列",style:{width:"100%"}},{default:et(()=>[Ie(w,{modelValue:o.value.rows,"onUpdate:modelValue":p[0]||(p[0]=O=>o.value.rows=O)},null,8,["modelValue"]),Ie(w,{modelValue:o.value.cols,"onUpdate:modelValue":p[1]||(p[1]=O=>o.value.cols=O)},null,8,["modelValue"])]),_:1}),Ie(x,{label:"单元格宽高"},{default:et(()=>[Ie(w,{modelValue:o.value.boxWidth,"onUpdate:modelValue":p[2]||(p[2]=O=>o.value.boxWidth=O)},null,8,["modelValue"]),Ie(w,{modelValue:o.value.boxHeight,"onUpdate:modelValue":p[3]||(p[3]=O=>o.value.boxHeight=O)},null,8,["modelValue"])]),_:1}),Ie(x,{label:"坐标偏移"},{default:et(()=>[Ie(w,{modelValue:o.value.offsetX,"onUpdate:modelValue":p[4]||(p[4]=O=>o.value.offsetX=O)},null,8,["modelValue"]),Ie(w,{modelValue:o.value.offsetY,"onUpdate:modelValue":p[5]||(p[5]=O=>o.value.offsetY=O)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},c2e={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},h2e={__name:"GridParallelogramH",setup(r){const e=lt(100),n=lt(100),i=lt(60),s=lt(4),o=lt(5),a=vn(()=>{var f=[];const p=e.value,g=n.value,y=i.value*Math.PI/180;for(let b=0;b<s.value;b++)for(let w=0;w<o.value;w++){const x=p*w,S=g*Math.sin(y)*b,_=x+p,O=S,T=_+g*Math.cos(y),E=(b+1)*g*Math.sin(y),P=x+g*Math.cos(y),A={type:"Line",points:[x,S,_,O,T,E,P,E],fill:"#00D2FF",stroke:"black",strokeWidth:1,closed:!0,name:`${b}_${w} line`};f.push(A)}return f}),c=vn(()=>[{type:"Arrow",points:[0,0,e.value*o.value,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,n.value*s.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),h=lt(null),d=lt({container:"container",draggable:!0,x:100,y:600,scaleY:-1,children:[{type:"Layer",children:a},{type:"Layer",children:c}]});return Jn(()=>{window.shapes=a;var f=h.value.getObject(d.value),p=null;f.on("mousemove",g=>{p&&p.fill("#00D2FF"),g.target.hasName("line")&&(g.target.fill("red"),p=g.target)})}),(f,p)=>{const g=Rt("Col"),y=Rt("InputNumber"),b=Rt("FormItem"),w=Rt("Slider"),x=Rt("Form"),S=Rt("Row");return ci(),Wr(S,null,{default:et(()=>[Ie(g,{span:12},{default:et(()=>[Xt("div",c2e,[Ie(v_,{ref_key:"stageRef",ref:h,modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=_=>d.value=_)},null,8,["modelValue"])])]),_:1}),Ie(g,{span:4},{default:et(()=>[Ie(x,{"label-width":100},{default:et(()=>[Ie(b,{label:"地块横边(px)"},{default:et(()=>[Ie(y,{modelValue:e.value,"onUpdate:modelValue":p[1]||(p[1]=_=>e.value=_)},null,8,["modelValue"])]),_:1}),Ie(b,{label:"地块竖边(px)"},{default:et(()=>[Ie(y,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=_=>n.value=_)},null,8,["modelValue"])]),_:1}),Ie(b,{label:"偏转角度"},{default:et(()=>[Ie(w,{modelValue:i.value,"onUpdate:modelValue":p[3]||(p[3]=_=>i.value=_),min:0,max:90},null,8,["modelValue"])]),_:1}),Ie(b,{label:"行 / 列"},{default:et(()=>[Ie(y,{modelValue:s.value,"onUpdate:modelValue":p[4]||(p[4]=_=>s.value=_)},null,8,["modelValue"]),Ie(y,{modelValue:o.value,"onUpdate:modelValue":p[5]||(p[5]=_=>o.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},u2e={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},d2e={__name:"GridParallelogramV",setup(r){const e=lt(130),n=lt(100),i=lt(60),s=lt(4),o=lt(10),a=vn(()=>{var f=[];const p=e.value,g=n.value;i.value*Math.PI/180;for(let b=0;b<s.value;b++)for(let w=0;w<o.value;w++){let x=null,S,_,O,T,E,P,I,A;S=p*w+p/2,_=g*b,O=S+p/2,T=_+g/2,E=S,P=_+g,I=p*w,A=T,S-=p*Math.floor(w/2),O-=p*Math.floor(w/2),E-=p*Math.floor(w/2),I-=p*Math.floor(w/2),w%2==1&&(S-=p/2,O-=p/2,E-=p/2,I-=p/2,_+=g/2,T+=g/2,P+=g/2,A+=g/2),_*=-1,T*=-1,P*=-1,A*=-1,x={type:"Line",points:[S,_,O,T,E,P,I,A],fill:"#c9ada7",stroke:"black",strokeWidth:1,closed:!0,name:`${b}_${w} line`,id:`${b}_${w}`},f.push(x);var y={type:"Text",text:`(${b},${w})`,x:I,y:T,align:"center",width:p,height:g};f.push(y)}return f}),c=vn(()=>[{type:"Arrow",points:[0,0,e.value*o.value/2,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,-n.value*s.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),h=lt(null),d=lt({container:"container",draggable:!0,x:100,y:600,children:[{type:"Layer",children:a},{type:"Layer",children:c}]});return Jn(()=>{window.shapes=a;var f=h.value.getObject(d.value),p=null;f.on("mousemove",g=>{p&&p.fill("#c9ada7"),g.target.hasName("line")&&(g.target.fill("red"),p=g.target)})}),(f,p)=>{const g=Rt("Col"),y=Rt("Slider"),b=Rt("FormItem"),w=Rt("InputNumber"),x=Rt("Form"),S=Rt("Row");return ci(),Wr(S,null,{default:et(()=>[Ie(g,{span:12},{default:et(()=>[Xt("div",u2e,[Ie(v_,{ref_key:"stageRef",ref:h,modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=_=>d.value=_)},null,8,["modelValue"])])]),_:1}),Ie(g,{span:4},{default:et(()=>[Ie(x,{"label-width":100},{default:et(()=>[Ie(b,{label:"地块主边(px)"},{default:et(()=>[Ie(y,{modelValue:e.value,"onUpdate:modelValue":p[1]||(p[1]=_=>e.value=_),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Ie(b,{label:"地块次边(px)"},{default:et(()=>[Ie(y,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=_=>n.value=_),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Ie(b,{label:"行 / 列"},{default:et(()=>[Ie(w,{modelValue:s.value,"onUpdate:modelValue":p[3]||(p[3]=_=>s.value=_)},null,8,["modelValue"]),Ie(w,{modelValue:o.value,"onUpdate:modelValue":p[4]||(p[4]=_=>o.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},f2e={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},p2e={__name:"KonvaStageTest",setup(r){const e=lt([{type:"Rect",x:100,y:100,width:200,height:100,fill:"red",draggable:!0}]),n=lt({type:"Stage",container:"container",wheel:!0,children:[{type:"Layer",children:e}]}),i=Wn(null);function s(o){o=="Rect"?e.value.push({type:"Rect",width:200,height:100,fill:"green",draggable:!0}):o=="Circle"?e.value.push({type:"Circle",radius:80,fill:"green",draggable:!0}):o=="Star"&&e.value.push({type:"Star",innerRadius:40,outerRadius:70,fill:"yellow",stroke:"black",strokeWidth:4,draggable:!0}),console.log(o)}return Jn(()=>{var o=i.value.getObject(n.value);o.on("wheel",a=>{a.evt.preventDefault();var c=o.scaleX(),h=o.getPointerPosition(),d={x:(h.x-o.x())/c,y:(h.y-o.y())/c};let f=a.evt.deltaY>0?1:-1;a.evt.ctrlKey&&(f=-f);var p=1.1,g=f<0?c*p:c/p;o.scale({x:g,y:g});var y={x:h.x-d.x*g,y:h.y-d.y*g};o.position(y)})}),(o,a)=>{const c=Rt("Col"),h=Rt("Icon"),d=Rt("Button"),f=Rt("DropdownItem"),p=Rt("DropdownMenu"),g=Rt("Dropdown"),y=Rt("Space"),b=Rt("FormItem"),w=Rt("Divider"),x=Rt("InputNumber"),S=Rt("Form"),_=Rt("Row");return ci(),Wr(_,null,{default:et(()=>[Ie(c,{span:12},{default:et(()=>[Xt("div",f2e,[Ie(v_,{ref_key:"stageRef",ref:i,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=O=>n.value=O)},null,8,["modelValue"])])]),_:1}),Ie(c,{span:12},{default:et(()=>[Ie(S,{"label-width":100},{default:et(()=>[Ie(b,{label:"添加"},{default:et(()=>[Ie(y,null,{default:et(()=>[Ie(g,{onOnClick:s},{list:et(()=>[Ie(p,null,{default:et(()=>[Ie(f,{name:"Rect"},{default:et(()=>[yn("矩形")]),_:1}),Ie(f,{name:"Circle"},{default:et(()=>[yn("圆形")]),_:1}),Ie(f,{name:"Star"},{default:et(()=>[yn("星形")]),_:1})]),_:1})]),default:et(()=>[Ie(d,{type:"primary"},{default:et(()=>[yn(" 添加图形 "),Ie(h,{type:"ios-arrow-down"})]),_:1})]),_:1})]),_:1})]),_:1}),Ie(w),(ci(!0),ln(dn,null,kh(e.value,O=>(ci(),Wr(b,{label:"x/y"},{default:et(()=>[Ie(x,{modelValue:O.x,"onUpdate:modelValue":T=>O.x=T},null,8,["modelValue","onUpdate:modelValue"]),Ie(x,{modelValue:O.y,"onUpdate:modelValue":T=>O.y=T},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}},m2e=Xt("h1",null,"三角函数计算器",-1),g2e={__name:"TrigoCalc",setup(r){const e=lt(0),n=lt(0),i=lt(0),s=lt(0),o=lt(0),a=lt(0),c=lt(0);let h=!1;Qi(n,()=>{d(n,g=>g)}),Qi(i,()=>{d(i,g=>g*180/Math.PI)}),Qi(s,()=>{d(s,g=>Math.asin(g))}),Qi(o,()=>{d(o,g=>Math.acos(g))}),Qi(a,()=>{d(a,g=>Math.atan(g))}),Qi(c,()=>{d(c,g=>Math.atan(1/g))});function d(g,y){if(h)return;const b=f(g.value);e.value=y(b)}function f(g){let y=parseFloat(g);return y||(y=0),Math.abs(y)<.001&&(y=0),y}Qi(e,p);async function p(){h=!0;const g=e.value*Math.PI/180;n.value=e.value,i.value=g,s.value=Math.sin(g),o.value=Math.cos(g),a.value=Math.tan(g),a.value?c.value=1/a.value:c.value=0,n.value=parseFloat(n.value.toFixed(3)),i.value=parseFloat(i.value.toFixed(3)),s.value=parseFloat(s.value.toFixed(3)),o.value=parseFloat(o.value.toFixed(3)),a.value=parseFloat(a.value.toFixed(3)),c.value=parseFloat(c.value.toFixed(3)),await Yp(),h=!1}return Jn(()=>{e.value=30}),(g,y)=>{const b=Rt("Input"),w=Rt("Col"),x=Rt("Row");return ci(),Wr(x,null,{default:et(()=>[Ie(w,{span:4,offset:10},{default:et(()=>[m2e,Ie(b,{type:"number",modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=S=>n.value=S)},{prepend:et(()=>[yn("角度")]),_:1},8,["modelValue"]),Ie(b,{type:"number",modelValue:i.value,"onUpdate:modelValue":y[1]||(y[1]=S=>i.value=S)},{prepend:et(()=>[yn("弧度")]),_:1},8,["modelValue"]),Ie(b,{type:"number",modelValue:s.value,"onUpdate:modelValue":y[2]||(y[2]=S=>s.value=S)},{prepend:et(()=>[yn("正弦")]),_:1},8,["modelValue"]),Ie(b,{type:"number",modelValue:o.value,"onUpdate:modelValue":y[3]||(y[3]=S=>o.value=S)},{prepend:et(()=>[yn("余弦")]),_:1},8,["modelValue"]),Ie(b,{type:"number",modelValue:a.value,"onUpdate:modelValue":y[4]||(y[4]=S=>a.value=S)},{prepend:et(()=>[yn("正切")]),_:1},8,["modelValue"]),Ie(b,{type:"number",modelValue:c.value,"onUpdate:modelValue":y[5]||(y[5]=S=>c.value=S)},{prepend:et(()=>[yn("余切")]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};class Hi{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=$p(this,e,n);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(n,this.length,s,1),el.from(s,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=$p(this,e,n);let i=[];return this.decompose(e,n,i,0),el.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new Q0(this),o=new Q0(e);for(let a=n,c=n;;){if(s.next(a),o.next(a),a=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(c+=s.value.length,s.done||c>=i)return!0}}iter(e=1){return new Q0(this,e)}iterRange(e,n=this.length){return new Q7(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new H7(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Hi.empty:e.length<=32?new qn(e):el.from(qn.split(e,[]))}}class qn extends Hi{constructor(e,n=y2e(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,s){for(let o=0;;o++){let a=this.text[o],c=s+a.length;if((n?i:c)>=e)return new v2e(s,c,i,a);s=c+1,i++}}decompose(e,n,i,s){let o=e<=0&&n>=this.length?this:new qn(V$(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let a=i.pop(),c=Qx(o.text,a.text.slice(),0,o.length);if(c.length<=32)i.push(new qn(c,a.length+o.length));else{let h=c.length>>1;i.push(new qn(c.slice(0,h)),new qn(c.slice(h)))}}else i.push(o)}replace(e,n,i){if(!(i instanceof qn))return super.replace(e,n,i);[e,n]=$p(this,e,n);let s=Qx(this.text,Qx(i.text,V$(this.text,0,e)),n),o=this.length+i.length-(n-e);return s.length<=32?new qn(s,o):el.from(qn.split(s,[]),o)}sliceString(e,n=this.length,i=`
`){[e,n]=$p(this,e,n);let s="";for(let o=0,a=0;o<=n&&a<this.text.length;a++){let c=this.text[a],h=o+c.length;o>e&&a&&(s+=i),e<h&&n>o&&(s+=c.slice(Math.max(0,e-o),n-o)),o=h+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],s=-1;for(let o of e)i.push(o),s+=o.length+1,i.length==32&&(n.push(new qn(i,s)),i=[],s=-1);return s>-1&&n.push(new qn(i,s)),n}}class el extends Hi{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,s){for(let o=0;;o++){let a=this.children[o],c=s+a.length,h=i+a.lines-1;if((n?h:c)>=e)return a.lineInner(e,n,i,s);s=c+1,i=h+1}}decompose(e,n,i,s){for(let o=0,a=0;a<=n&&o<this.children.length;o++){let c=this.children[o],h=a+c.length;if(e<=h&&n>=a){let d=s&((a<=e?1:0)|(h>=n?2:0));a>=e&&h<=n&&!d?i.push(c):c.decompose(e-a,n-a,i,d)}a=h+1}}replace(e,n,i){if([e,n]=$p(this,e,n),i.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let a=this.children[s],c=o+a.length;if(e>=o&&n<=c){let h=a.replace(e-o,n-o,i),d=this.lines-a.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let f=this.children.slice();return f[s]=h,new el(f,this.length-(n-e)+i.length)}return super.replace(o,c,h)}o=c+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=$p(this,e,n);let s="";for(let o=0,a=0;o<this.children.length&&a<=n;o++){let c=this.children[o],h=a+c.length;a>e&&o&&(s+=i),e<h&&n>a&&(s+=c.sliceString(e-a,n-a,i)),a=h+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof el))return 0;let i=0,[s,o,a,c]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,o+=n){if(s==a||o==c)return i;let h=this.children[s],d=e.children[o];if(h!=d)return i+h.scanIdentical(d,n);i+=h.length+1}}static from(e,n=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let y of e)i+=y.lines;if(i<32){let y=[];for(let b of e)b.flatten(y);return new qn(y,n)}let s=Math.max(32,i>>5),o=s<<1,a=s>>1,c=[],h=0,d=-1,f=[];function p(y){let b;if(y.lines>o&&y instanceof el)for(let w of y.children)p(w);else y.lines>a&&(h>a||!h)?(g(),c.push(y)):y instanceof qn&&h&&(b=f[f.length-1])instanceof qn&&y.lines+b.lines<=32?(h+=y.lines,d+=y.length+1,f[f.length-1]=new qn(b.text.concat(y.text),b.length+1+y.length)):(h+y.lines>s&&g(),h+=y.lines,d+=y.length+1,f.push(y))}function g(){h!=0&&(c.push(f.length==1?f[0]:el.from(f,d)),d=-1,h=f.length=0)}for(let y of e)p(y);return g(),c.length==1?c[0]:new el(c,n)}}Hi.empty=new qn([""],0);function y2e(r){let e=-1;for(let n of r)e+=n.length+1;return e}function Qx(r,e,n=0,i=1e9){for(let s=0,o=0,a=!0;o<r.length&&s<=i;o++){let c=r[o],h=s+c.length;h>=n&&(h>i&&(c=c.slice(0,i-s)),s<n&&(c=c.slice(n-s)),a?(e[e.length-1]+=c,a=!1):e.push(c)),s=h+1}return e}function V$(r,e,n){return Qx(r,[""],e,n)}class Q0{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof qn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],o=this.offsets[i],a=o>>1,c=s instanceof qn?s.text.length:s.children.length;if(a==(n>0?c:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof qn){let h=s.text[a+(n<0?-1:0)];if(this.offsets[i]+=n,h.length>Math.max(0,e))return this.value=e==0?h:n>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(n<0?-1:0)];e>h.length?(e-=h.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(h),this.offsets.push(n>0?1:(h instanceof qn?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Q7{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Q0(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=i?s:n<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class H7{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Hi.prototype[Symbol.iterator]=function(){return this.iter()},Q0.prototype[Symbol.iterator]=Q7.prototype[Symbol.iterator]=H7.prototype[Symbol.iterator]=function(){return this});class v2e{constructor(e,n,i,s){this.from=e,this.to=n,this.number=i,this.text=s}get length(){return this.to-this.from}}function $p(r,e,n){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,n))]}let op="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<op.length;r++)op[r]+=op[r-1];function b2e(r){for(let e=1;e<op.length;e+=2)if(op[e]>r)return op[e-1]<=r;return!1}function L$(r){return r>=127462&&r<=127487}const B$=8205;function Xr(r,e,n=!0,i=!0){return(n?G7:x2e)(r,e,i)}function G7(r,e,n){if(e==r.length)return e;e&&Y7(r.charCodeAt(e))&&j7(r.charCodeAt(e-1))&&e--;let i=Br(r,e);for(e+=Ho(i);e<r.length;){let s=Br(r,e);if(i==B$||s==B$||n&&b2e(s))e+=Ho(s),i=s;else if(L$(s)){let o=0,a=e-2;for(;a>=0&&L$(Br(r,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function x2e(r,e,n){for(;e>0;){let i=G7(r,e-2,n);if(i<e)return i;e--}return 0}function Y7(r){return r>=56320&&r<57344}function j7(r){return r>=55296&&r<56320}function Br(r,e){let n=r.charCodeAt(e);if(!j7(n)||e+1==r.length)return n;let i=r.charCodeAt(e+1);return Y7(i)?(n-55296<<10)+(i-56320)+65536:n}function U3(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Ho(r){return r<65536?1:2}const lM=/\r\n?|\n/;var ws=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(ws||(ws={}));class al{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,s=0;n<this.sections.length;){let o=this.sections[n++],a=this.sections[n++];a<0?(e(i,s,o),s+=o):s+=a,i+=o}}iterChangedRanges(e,n=!1){cM(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];s<0?e.push(i,s):e.push(s,i)}return new al(e)}composeDesc(e){return this.empty?e:e.empty?this:q7(this,e)}mapDesc(e,n=!1){return e.empty?this:hM(this,e,n)}mapPos(e,n=-1,i=ws.Simple){let s=0,o=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],h=this.sections[a++],d=s+c;if(h<0){if(d>e)return o+(e-s);o+=c}else{if(i!=ws.Simple&&d>=e&&(i==ws.TrackDel&&s<e&&d>e||i==ws.TrackBefore&&s<e||i==ws.TrackAfter&&d>e))return null;if(d>e||d==e&&n<0&&!c)return e==s||n<0?o:o+h;o+=h}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,n=e){for(let i=0,s=0;i<this.sections.length&&s<=n;){let o=this.sections[i++],a=this.sections[i++],c=s+o;if(a>=0&&s<=n&&c>=e)return s<e&&c>n?"cover":!0;s=c}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new al(e)}static create(e){return new al(e)}}class gr extends al{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return cM(this,(n,i,s,o,a)=>e=e.replace(s,s+(i-n),a),!1),e}mapDesc(e,n=!1){return hM(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let s=0,o=0;s<n.length;s+=2){let a=n[s],c=n[s+1];if(c>=0){n[s]=c,n[s+1]=a;let h=s>>1;for(;i.length<h;)i.push(Hi.empty);i.push(a?e.slice(o,o+a):Hi.empty)}o+=a}return new gr(n,i)}compose(e){return this.empty?e:e.empty?this:q7(this,e,!0)}map(e,n=!1){return e.empty?this:hM(this,e,n,!0)}iterChanges(e,n=!1){cM(this,e,n)}get desc(){return al.create(this.sections)}filter(e){let n=[],i=[],s=[],o=new Py(this);e:for(let a=0,c=0;;){let h=a==e.length?1e9:e[a++];for(;c<h||c==h&&o.len==0;){if(o.done)break e;let f=Math.min(o.len,h-c);ts(s,f,-1);let p=o.ins==-1?-1:o.off==0?o.ins:0;ts(n,f,p),p>0&&ph(i,n,o.text),o.forward(f),c+=f}let d=e[a++];for(;c<d;){if(o.done)break e;let f=Math.min(o.len,d-c);ts(n,f,-1),ts(s,f,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(f),c+=f}}return{changes:new gr(n,i),filtered:al.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],s=this.sections[n+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let s=[],o=[],a=0,c=null;function h(f=!1){if(!f&&!s.length)return;a<n&&ts(s,n-a,-1);let p=new gr(s,o);c=c?c.compose(p.map(c)):p,s=[],o=[],a=0}function d(f){if(Array.isArray(f))for(let p of f)d(p);else if(f instanceof gr){if(f.length!=n)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${n})`);h(),c=c?c.compose(f.map(c)):f}else{let{from:p,to:g=p,insert:y}=f;if(p>g||p<0||g>n)throw new RangeError(`Invalid change range ${p} to ${g} (in doc of length ${n})`);let b=y?typeof y=="string"?Hi.of(y.split(i||lM)):y:Hi.empty,w=b.length;if(p==g&&w==0)return;p<a&&h(),p>a&&ts(s,p-a,-1),ts(s,g-p,w),ph(o,s,b),a=g}}return d(e),h(!c),c}static empty(e){return new gr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;i.length<s;)i.push(Hi.empty);i[s]=Hi.of(o.slice(1)),n.push(o[0],i[s].length)}}}return new gr(n,i)}static createSet(e,n){return new gr(e,n)}}function ts(r,e,n,i=!1){if(e==0&&n<=0)return;let s=r.length-2;s>=0&&n<=0&&n==r[s+1]?r[s]+=e:e==0&&r[s]==0?r[s+1]+=n:i?(r[s]+=e,r[s+1]+=n):r.push(e,n)}function ph(r,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(n);else{for(;r.length<i;)r.push(Hi.empty);r.push(n)}}function cM(r,e,n){let i=r.inserted;for(let s=0,o=0,a=0;a<r.sections.length;){let c=r.sections[a++],h=r.sections[a++];if(h<0)s+=c,o+=c;else{let d=s,f=o,p=Hi.empty;for(;d+=c,f+=h,h&&i&&(p=p.append(i[a-2>>1])),!(n||a==r.sections.length||r.sections[a+1]<0);)c=r.sections[a++],h=r.sections[a++];e(s,d,o,f,p),s=d,o=f}}}function hM(r,e,n,i=!1){let s=[],o=i?[]:null,a=new Py(r),c=new Py(e);for(let h=-1;;)if(a.ins==-1&&c.ins==-1){let d=Math.min(a.len,c.len);ts(s,d,-1),a.forward(d),c.forward(d)}else if(c.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!n))){let d=c.len;for(ts(s,c.ins,-1);d;){let f=Math.min(a.len,d);a.ins>=0&&h<a.i&&a.len<=f&&(ts(s,0,a.ins),o&&ph(o,s,a.text),h=a.i),a.forward(f),d-=f}c.next()}else if(a.ins>=0){let d=0,f=a.len;for(;f;)if(c.ins==-1){let p=Math.min(f,c.len);d+=p,f-=p,c.forward(p)}else if(c.ins==0&&c.len<f)f-=c.len,c.next();else break;ts(s,d,h<a.i?a.ins:0),o&&h<a.i&&ph(o,s,a.text),h=a.i,a.forward(a.len-f)}else{if(a.done&&c.done)return o?gr.createSet(s,o):al.create(s);throw new Error("Mismatched change set lengths")}}function q7(r,e,n=!1){let i=[],s=n?[]:null,o=new Py(r),a=new Py(e);for(let c=!1;;){if(o.done&&a.done)return s?gr.createSet(i,s):al.create(i);if(o.ins==0)ts(i,o.len,0,c),o.next();else if(a.len==0&&!a.done)ts(i,0,a.ins,c),s&&ph(s,i,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,a.len),d=i.length;if(o.ins==-1){let f=a.ins==-1?-1:a.off?0:a.ins;ts(i,h,f,c),s&&f&&ph(s,i,a.text)}else a.ins==-1?(ts(i,o.off?0:o.len,h,c),s&&ph(s,i,o.textBit(h))):(ts(i,o.off?0:o.len,a.off?0:a.ins,c),s&&!a.off&&ph(s,i,a.text));c=(o.ins>h||a.ins>=0&&a.len>h)&&(c||i.length>d),o.forward2(h),a.forward(h)}}}}class Py{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Hi.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Hi.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Gu{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Gu(i,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ke.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ke.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ke.range(e.anchor,e.head)}static create(e,n,i){return new Gu(e,n,i)}}class Ke{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ke.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ke([this.main],0)}addRange(e,n=!0){return Ke.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,Ke.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ke(e.ranges.map(n=>Gu.fromJSON(n)),e.main)}static single(e,n=e){return new Ke([Ke.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=i:o.from<i)return Ke.normalized(e.slice(),n);i=o.to}return new Ke(e,n)}static cursor(e,n=0,i,s){return Gu.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,n,i,s){let o=(i??16777215)<<6|(s==null?7:Math.min(6,s));return n<e?Gu.create(n,e,48|o):Gu.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let i=e[n];e.sort((s,o)=>s.from-o.from),n=e.indexOf(i);for(let s=1;s<e.length;s++){let o=e[s],a=e[s-1];if(o.empty?o.from<=a.to:o.from<a.to){let c=a.from,h=Math.max(o.to,a.to);s<=n&&n--,e.splice(--s,2,o.anchor>o.head?Ke.range(h,c):Ke.range(c,h))}}return new Ke(e,n)}}function Z7(r,e){for(let n of r.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let F3=0;class St{constructor(e,n,i,s,o){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=s,this.id=F3++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new St(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:z3),!!e.static,e.enables)}of(e){return new Hx([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hx(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hx(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function z3(r,e){return r==e||r.length==e.length&&r.every((n,i)=>n===e[i])}class Hx{constructor(e,n,i,s){this.dependencies=e,this.facet=n,this.type=i,this.value=s,this.id=F3++}dynamicSlot(e){var n;let i=this.value,s=this.facet.compareInput,o=this.id,a=e[o]>>1,c=this.type==2,h=!1,d=!1,f=[];for(let p of this.dependencies)p=="doc"?h=!0:p=="selection"?d=!0:((n=e[p.id])!==null&&n!==void 0?n:1)&1||f.push(e[p.id]);return{create(p){return p.values[a]=i(p),1},update(p,g){if(h&&g.docChanged||d&&(g.docChanged||g.selection)||uM(p,f)){let y=i(p);if(c?!U$(y,p.values[a],s):!s(y,p.values[a]))return p.values[a]=y,1}return 0},reconfigure:(p,g)=>{let y,b=g.config.address[o];if(b!=null){let w=DO(g,b);if(this.dependencies.every(x=>x instanceof St?g.facet(x)===p.facet(x):x instanceof Gr?g.field(x,!1)==p.field(x,!1):!0)||(c?U$(y=i(p),w,s):s(y=i(p),w)))return p.values[a]=w,0}else y=i(p);return p.values[a]=y,1}}}}function U$(r,e,n){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!n(r[i],e[i]))return!1;return!0}function uM(r,e){let n=!1;for(let i of e)H0(r,i)&1&&(n=!0);return n}function O2e(r,e,n){let i=n.map(h=>r[h.id]),s=n.map(h=>h.type),o=i.filter(h=>!(h&1)),a=r[e.id]>>1;function c(h){let d=[];for(let f=0;f<i.length;f++){let p=DO(h,i[f]);if(s[f]==2)for(let g of p)d.push(g);else d.push(p)}return e.combine(d)}return{create(h){for(let d of i)H0(h,d);return h.values[a]=c(h),1},update(h,d){if(!uM(h,o))return 0;let f=c(h);return e.compare(f,h.values[a])?0:(h.values[a]=f,1)},reconfigure(h,d){let f=uM(h,i),p=d.config.facets[e.id],g=d.facet(e);if(p&&!f&&z3(n,p))return h.values[a]=g,0;let y=c(h);return e.compare(y,g)?(h.values[a]=g,0):(h.values[a]=y,1)}}}const F$=St.define({static:!0});class Gr{constructor(e,n,i,s,o){this.id=e,this.createF=n,this.updateF=i,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let n=new Gr(F3++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(F$).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,s)=>{let o=i.values[n],a=this.updateF(o,s);return this.compareF(o,a)?0:(i.values[n]=a,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[n]=s.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,F$.of({field:this,create:e})]}get extension(){return this}}const Bu={lowest:4,low:3,default:2,high:1,highest:0};function n0(r){return e=>new K7(e,r)}const Id={highest:n0(Bu.highest),high:n0(Bu.high),default:n0(Bu.default),low:n0(Bu.low),lowest:n0(Bu.lowest)};class K7{constructor(e,n){this.inner=e,this.prec=n}}class b_{of(e){return new dM(this,e)}reconfigure(e){return b_.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class dM{constructor(e,n){this.compartment=e,this.inner=n}}class IO{constructor(e,n,i,s,o,a){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=s,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let s=[],o=Object.create(null),a=new Map;for(let g of w2e(e,n,a))g instanceof Gr?s.push(g):(o[g.facet.id]||(o[g.facet.id]=[])).push(g);let c=Object.create(null),h=[],d=[];for(let g of s)c[g.id]=d.length<<1,d.push(y=>g.slot(y));let f=i==null?void 0:i.config.facets;for(let g in o){let y=o[g],b=y[0].facet,w=f&&f[g]||[];if(y.every(x=>x.type==0))if(c[b.id]=h.length<<1|1,z3(w,y))h.push(i.facet(b));else{let x=b.combine(y.map(S=>S.value));h.push(i&&b.compare(x,i.facet(b))?i.facet(b):x)}else{for(let x of y)x.type==0?(c[x.id]=h.length<<1|1,h.push(x.value)):(c[x.id]=d.length<<1,d.push(S=>x.dynamicSlot(S)));c[b.id]=d.length<<1,d.push(x=>O2e(x,b,y))}}let p=d.map(g=>g(c));return new IO(e,a,p,c,h,o)}}function w2e(r,e,n){let i=[[],[],[],[],[]],s=new Map;function o(a,c){let h=s.get(a);if(h!=null){if(h<=c)return;let d=i[h].indexOf(a);d>-1&&i[h].splice(d,1),a instanceof dM&&n.delete(a.compartment)}if(s.set(a,c),Array.isArray(a))for(let d of a)o(d,c);else if(a instanceof dM){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(a.compartment)||a.inner;n.set(a.compartment,d),o(d,c)}else if(a instanceof K7)o(a.inner,a.prec);else if(a instanceof Gr)i[c].push(a),a.provides&&o(a.provides,c);else if(a instanceof Hx)i[c].push(a),a.facet.extensions&&o(a.facet.extensions,Bu.default);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,c)}}return o(r,Bu.default),i.reduce((a,c)=>a.concat(c))}function H0(r,e){if(e&1)return 2;let n=e>>1,i=r.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[n]=4;let s=r.computeSlot(r,r.config.dynamicSlots[n]);return r.status[n]=2|s}function DO(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const J7=St.define(),fM=St.define({combine:r=>r.some(e=>e),static:!0}),eX=St.define({combine:r=>r.length?r[0]:void 0,static:!0}),tX=St.define(),iX=St.define(),nX=St.define(),rX=St.define({combine:r=>r.length?r[0]:!1});class vc{constructor(e,n){this.type=e,this.value=n}static define(){return new _2e}}class _2e{of(e){return new vc(this,e)}}class S2e{constructor(e){this.map=e}of(e){return new bi(this,e)}}class bi{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new bi(this.type,n)}is(e){return this.type==e}static define(e={}){return new S2e(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let s of e){let o=s.map(n);o&&i.push(o)}return i}}bi.reconfigure=bi.define();bi.appendConfig=bi.define();class Or{constructor(e,n,i,s,o,a){this.startState=e,this.changes=n,this.selection=i,this.effects=s,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Z7(i,n.newLength),o.some(c=>c.type==Or.time)||(this.annotations=o.concat(Or.time.of(Date.now())))}static create(e,n,i,s,o,a){return new Or(e,n,i,s,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Or.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Or.time=vc.define();Or.userEvent=vc.define();Or.addToHistory=vc.define();Or.remote=vc.define();function C2e(r,e){let n=[];for(let i=0,s=0;;){let o,a;if(i<r.length&&(s==e.length||e[s]>=r[i]))o=r[i++],a=r[i++];else if(s<e.length)o=e[s++],a=e[s++];else return n;!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function sX(r,e,n){var i;let s,o,a;return n?(s=e.changes,o=gr.empty(e.changes.length),a=r.changes.compose(e.changes)):(s=e.changes.map(r.changes),o=r.changes.mapDesc(e.changes,!0),a=r.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(o):(i=r.selection)===null||i===void 0?void 0:i.map(s),effects:bi.mapEffects(r.effects,s).concat(bi.mapEffects(e.effects,o)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function pM(r,e,n){let i=e.selection,s=ap(e.annotations);return e.userEvent&&(s=s.concat(Or.userEvent.of(e.userEvent))),{changes:e.changes instanceof gr?e.changes:gr.of(e.changes||[],n,r.facet(eX)),selection:i&&(i instanceof Ke?i:Ke.single(i.anchor,i.head)),effects:ap(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function oX(r,e,n){let i=pM(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let a=!!e[o].sequential;i=sX(i,pM(r,e[o],a?i.changes.newLength:r.doc.length),a)}let s=Or.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return T2e(n?k2e(s):s)}function k2e(r){let e=r.startState,n=!0;for(let s of e.facet(tX)){let o=s(r);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:C2e(n,o))}if(n!==!0){let s,o;if(n===!1)o=r.changes.invertedDesc,s=gr.empty(e.doc.length);else{let a=r.changes.filter(n);s=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}r=Or.create(e,s,r.selection&&r.selection.map(o),bi.mapEffects(r.effects,o),r.annotations,r.scrollIntoView)}let i=e.facet(iX);for(let s=i.length-1;s>=0;s--){let o=i[s](r);o instanceof Or?r=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Or?r=o[0]:r=oX(e,ap(o),!1)}return r}function T2e(r){let e=r.startState,n=e.facet(nX),i=r;for(let s=n.length-1;s>=0;s--){let o=n[s](r);o&&Object.keys(o).length&&(i=sX(i,pM(e,o,r.changes.newLength),!0))}return i==r?r:Or.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const M2e=[];function ap(r){return r==null?M2e:Array.isArray(r)?r:[r]}var Pn=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Pn||(Pn={}));const E2e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let mM;try{mM=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function P2e(r){if(mM)return mM.test(r);for(let e=0;e<r.length;e++){let n=r[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||E2e.test(n)))return!0}return!1}function A2e(r){return e=>{if(!/\S/.test(e))return Pn.Space;if(P2e(e))return Pn.Word;for(let n=0;n<r.length;n++)if(e.indexOf(r[n])>-1)return Pn.Word;return Pn.Other}}class Xi{constructor(e,n,i,s,o,a){this.config=e,this.doc=n,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)H0(this,c<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return H0(this,i),DO(this,i)}update(...e){return oX(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:s}=n;for(let c of e.effects)c.is(b_.reconfigure)?(n&&(s=new Map,n.compartments.forEach((h,d)=>s.set(d,h)),n=null),s.set(c.value.compartment,c.value.extension)):c.is(bi.reconfigure)?(n=null,i=c.value):c.is(bi.appendConfig)&&(n=null,i=ap(i).concat(c.value));let o;n?o=e.startState.values.slice():(n=IO.resolve(i,s,this),o=new Xi(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let a=e.startState.facet(fM)?e.newSelection:e.newSelection.asSingle();new Xi(n,e.newDoc,a,o,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ke.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),s=this.changes(i.changes),o=[i.range],a=ap(i.effects);for(let c=1;c<n.ranges.length;c++){let h=e(n.ranges[c]),d=this.changes(h.changes),f=d.map(s);for(let g=0;g<c;g++)o[g]=o[g].map(f);let p=s.mapDesc(d,!0);o.push(h.range.map(p)),s=s.compose(f),a=bi.mapEffects(a,f).concat(bi.mapEffects(ap(h.effects),p))}return{changes:s,selection:Ke.create(o,n.mainIndex),effects:a}}changes(e=[]){return e instanceof gr?e:gr.of(e,this.doc.length,this.facet(Xi.lineSeparator))}toText(e){return Hi.of(e.split(this.facet(Xi.lineSeparator)||lM))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(H0(this,n),DO(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Gr&&this.config.address[s.id]!=null&&(n[i]=s.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let a=i[o],c=e[o];s.push(a.init(h=>a.spec.fromJSON(c,h)))}}return Xi.create({doc:e.doc,selection:Ke.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=IO.resolve(e.extensions||[],new Map),i=e.doc instanceof Hi?e.doc:Hi.of((e.doc||"").split(n.staticFacet(Xi.lineSeparator)||lM)),s=e.selection?e.selection instanceof Ke?e.selection:Ke.single(e.selection.anchor,e.selection.head):Ke.single(0);return Z7(s,i.length),n.staticFacet(fM)||(s=s.asSingle()),new Xi(n,i,s,n.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(Xi.tabSize)}get lineBreak(){return this.facet(Xi.lineSeparator)||`
`}get readOnly(){return this.facet(rX)}phrase(e,...n){for(let i of this.facet(Xi.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>n.length?i:n[o-1]})),e}languageDataAt(e,n,i=-1){let s=[];for(let o of this.facet(J7))for(let a of o(this,n,i))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return A2e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-i,c=e-i;for(;a>0;){let h=Xr(n,a,!1);if(o(n.slice(h,a))!=Pn.Word)break;a=h}for(;c<s;){let h=Xr(n,c);if(o(n.slice(c,h))!=Pn.Word)break;c=h}return a==c?null:Ke.range(a+i,c+i)}}Xi.allowMultipleSelections=fM;Xi.tabSize=St.define({combine:r=>r.length?r[0]:4});Xi.lineSeparator=eX;Xi.readOnly=rX;Xi.phrases=St.define({compare(r,e){let n=Object.keys(r),i=Object.keys(e);return n.length==i.length&&n.every(s=>r[s]==e[s])}});Xi.languageData=J7;Xi.changeFilter=tX;Xi.transactionFilter=iX;Xi.transactionExtender=nX;b_.reconfigure=bi.define();function vl(r,e,n={}){let i={};for(let s of r)for(let o of Object.keys(s)){let a=s[o],c=i[o];if(c===void 0)i[o]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(n,o))i[o]=n[o](c,a);else throw new Error("Config merge conflict for field "+o)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class vd{eq(e){return this==e}range(e,n=e){return gM.create(e,n,this)}}vd.prototype.startSide=vd.prototype.endSide=0;vd.prototype.point=!1;vd.prototype.mapMode=ws.TrackDel;let gM=class aX{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new aX(e,n,i)}};function yM(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class X3{constructor(e,n,i,s){this.from=e,this.to=n,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,s=0){let o=i?this.to:this.from;for(let a=s,c=o.length;;){if(a==c)return a;let h=a+c>>1,d=o[h]-e||(i?this.value[h].endSide:this.value[h].startSide)-n;if(h==a)return d>=0?a:c;d>=0?c=h:a=h+1}}between(e,n,i,s){for(let o=this.findIndex(n,-1e9,!0),a=this.findIndex(i,1e9,!1,o);o<a;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let i=[],s=[],o=[],a=-1,c=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],f=this.from[h]+e,p=this.to[h]+e,g,y;if(f==p){let b=n.mapPos(f,d.startSide,d.mapMode);if(b==null||(g=y=b,d.startSide!=d.endSide&&(y=n.mapPos(f,d.endSide),y<g)))continue}else if(g=n.mapPos(f,d.startSide),y=n.mapPos(p,d.endSide),g>y||g==y&&d.startSide>0&&d.endSide<=0)continue;(y-g||d.endSide-d.startSide)<0||(a<0&&(a=g),d.point&&(c=Math.max(c,y-g)),i.push(d),s.push(g-a),o.push(y-a))}return{mapped:i.length?new X3(s,o,i,c):null,pos:a}}}class Fi{constructor(e,n,i,s){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=s}static create(e,n,i,s){return new Fi(e,n,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:s=0,filterTo:o=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(i&&(n=n.slice().sort(yM)),this.isEmpty)return n.length?Fi.of(n):this;let c=new lX(this,null,-1).goto(0),h=0,d=[],f=new Ih;for(;c.value||h<n.length;)if(h<n.length&&(c.from-n[h].from||c.startSide-n[h].value.startSide)>=0){let p=n[h++];f.addInner(p.from,p.to,p.value)||d.push(p)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==n.length||this.chunkEnd(c.chunkIndex)<n[h].from)&&(!a||s>this.chunkEnd(c.chunkIndex)||o<this.chunkPos[c.chunkIndex])&&f.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||s>c.to||o<c.from||a(c.from,c.to,c.value))&&(f.addInner(c.from,c.to,c.value)||d.push(gM.create(c.from,c.to,c.value))),c.next());return f.finishInner(this.nextLayer.isEmpty&&!d.length?Fi.empty:this.nextLayer.update({add:d,filter:a,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],s=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],h=this.chunk[a],d=e.touchesRange(c,c+h.length);if(d===!1)s=Math.max(s,h.maxPoint),n.push(h),i.push(e.mapPos(c));else if(d===!0){let{mapped:f,pos:p}=h.map(c,e);f&&(s=Math.max(s,f.maxPoint),n.push(f),i.push(p))}}let o=this.nextLayer.map(e);return n.length==0?o:new Fi(i,n,o||Fi.empty,s)}between(e,n,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],a=this.chunk[s];if(n>=o&&e<=o+a.length&&a.between(o,e-o,n-o,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Ay.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ay.from(e).goto(n)}static compare(e,n,i,s,o=-1){let a=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),c=n.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),h=z$(a,c,i),d=new r0(a,h,o),f=new r0(c,h,o);i.iterGaps((p,g,y)=>X$(d,p,f,g,y,s)),i.empty&&i.length==0&&X$(d,0,f,0,0,s)}static eq(e,n,i=0,s){s==null&&(s=999999999);let o=e.filter(f=>!f.isEmpty&&n.indexOf(f)<0),a=n.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let c=z$(o,a),h=new r0(o,c,0).goto(i),d=new r0(a,c,0).goto(i);for(;;){if(h.to!=d.to||!vM(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>s)return!0;h.next(),d.next()}}static spans(e,n,i,s,o=-1){let a=new r0(e,null,o).goto(n),c=n,h=a.openStart;for(;;){let d=Math.min(a.to,i);if(a.point){let f=a.activeForPoint(a.to),p=a.pointFrom<n?f.length+1:a.point.startSide<0?f.length:Math.min(f.length,h);s.point(c,d,a.point,f,p,a.pointRank),h=Math.min(a.openEnd(d),f.length)}else d>c&&(s.span(c,d,a.active,h),h=a.openEnd(d));if(a.to>i)return h+(a.point&&a.to>i?1:0);c=a.to,a.next()}}static of(e,n=!1){let i=new Ih;for(let s of e instanceof gM?[e]:n?R2e(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Fi.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Fi.empty;s=s.nextLayer)n=new Fi(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}Fi.empty=new Fi([],[],null,-1);function R2e(r){if(r.length>1)for(let e=r[0],n=1;n<r.length;n++){let i=r[n];if(yM(e,i)>0)return r.slice().sort(yM);e=i}return r}Fi.empty.nextLayer=Fi.empty;class Ih{finishChunk(e){this.chunks.push(new X3(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Ih)).add(e,n,i)}addInner(e,n,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(Fi.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Fi.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function z$(r,e,n){let i=new Map;for(let o of r)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&i.set(o.chunk[a],o.chunkPos[a]);let s=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let c=i.get(o.chunk[a]);c!=null&&(n?n.mapPos(c):c)==o.chunkPos[a]&&!(n!=null&&n.touchesRange(c,c+o.chunk[a].length))&&s.add(o.chunk[a])}return s}class lX{constructor(e,n,i,s=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ay{constructor(e){this.heap=e}static from(e,n=null,i=-1){let s=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&s.push(new lX(a,n,i,o));return s.length==1?s[0]:new Ay(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)I2(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)I2(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),I2(this.heap,0)}}}function I2(r,e){for(let n=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let s=r[i];if(i+1<r.length&&s.compare(r[i+1])>=0&&(s=r[i+1],i++),n.compare(s)<0)break;r[i]=n,r[e]=s,e=i}}class r0{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ay.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Wb(this.active,e),Wb(this.activeTo,e),Wb(this.activeRank,e),this.minActive=W$(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:s,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||s-this.activeTo[n])>0;)n++;Qb(this.active,n,i),Qb(this.activeTo,n,s),Qb(this.activeRank,n,o),e&&Qb(e,n,this.cursor.from),this.minActive=W$(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Wb(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function X$(r,e,n,i,s,o){r.goto(e),n.goto(i);let a=i+s,c=i,h=i-e;for(;;){let d=r.to+h-n.to||r.endSide-n.endSide,f=d<0?r.to+h:n.to,p=Math.min(f,a);if(r.point||n.point?r.point&&n.point&&(r.point==n.point||r.point.eq(n.point))&&vM(r.activeForPoint(r.to),n.activeForPoint(n.to))||o.comparePoint(c,p,r.point,n.point):p>c&&!vM(r.active,n.active)&&o.compareRange(c,p,r.active,n.active),f>a)break;c=f,d<=0&&r.next(),d>=0&&n.next()}}function vM(r,e){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!=e[n]&&!r[n].eq(e[n]))return!1;return!0}function Wb(r,e){for(let n=e,i=r.length-1;n<i;n++)r[n]=r[n+1];r.pop()}function Qb(r,e,n){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=n}function W$(r,e){let n=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||r[s].endSide-r[n].endSide)<0&&(n=s,i=e[s]);return n}function rm(r,e,n=r.length){let i=0;for(let s=0;s<n;)r.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Xr(r,s));return i}function bM(r,e,n,i){for(let s=0,o=0;;){if(o>=e)return s;if(s==r.length)break;o+=r.charCodeAt(s)==9?n-o%n:1,s=Xr(r,s)}return i===!0?-1:r.length}const xM="ͼ",Q$=typeof Symbol>"u"?"__"+xM:Symbol.for(xM),OM=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),H$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Dh{constructor(e,n){this.rules=[];let{finish:i}=n||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,c,h,d){let f=[],p=/^@(\w+)\b/.exec(a[0]),g=p&&p[1]=="keyframes";if(p&&c==null)return h.push(a[0]+";");for(let y in c){let b=c[y];if(/&/.test(y))o(y.split(/,\s*/).map(w=>a.map(x=>w.replace(/&/,x))).reduce((w,x)=>w.concat(x)),b,h);else if(b&&typeof b=="object"){if(!p)throw new RangeError("The value of a property ("+y+") should be a primitive value.");o(s(y),b,f,g)}else b!=null&&f.push(y.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+b+";")}(f.length||g)&&h.push((i&&!p&&!d?a.map(i):a).join(", ")+" {"+f.join(" ")+"}")}for(let a in e)o(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=H$[Q$]||1;return H$[Q$]=e+1,xM+e.toString(36)}static mount(e,n,i){let s=e[OM],o=i&&i.nonce;s?o&&s.setNonce(o):s=new I2e(e,o),s.mount(Array.isArray(n)?n:[n],e)}}let G$=new Map;class I2e{constructor(e,n){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=G$.get(i);if(o)return e[OM]=o;this.sheet=new s.CSSStyleSheet,G$.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[OM]=this}mount(e,n){let i=this.sheet,s=0,o=0;for(let a=0;a<e.length;a++){let c=e[a],h=this.modules.indexOf(c);if(h<o&&h>-1&&(this.modules.splice(h,1),o--,h=-1),h==-1){if(this.modules.splice(o++,0,c),i)for(let d=0;d<c.rules.length;d++)i.insertRule(c.rules[d],s++)}else{for(;o<h;)s+=this.modules[o++].rules.length;s+=c.rules.length,o++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let c=n.head||n;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Nh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ry={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},D2e=typeof navigator<"u"&&/Mac/.test(navigator.platform),N2e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ur=0;Ur<10;Ur++)Nh[48+Ur]=Nh[96+Ur]=String(Ur);for(var Ur=1;Ur<=24;Ur++)Nh[Ur+111]="F"+Ur;for(var Ur=65;Ur<=90;Ur++)Nh[Ur]=String.fromCharCode(Ur+32),Ry[Ur]=String.fromCharCode(Ur);for(var D2 in Nh)Ry.hasOwnProperty(D2)||(Ry[D2]=Nh[D2]);function $2e(r){var e=D2e&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||N2e&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",n=!e&&r.key||(r.shiftKey?Ry:Nh)[r.keyCode]||r.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Iy(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function wM(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function V2e(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Gx(r,e){if(!e.anchorNode)return!1;try{return wM(r,e.anchorNode)}catch{return!1}}function Dy(r){return r.nodeType==3?xd(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function G0(r,e,n,i){return n?Y$(r,e,n,i,-1)||Y$(r,e,n,i,1):!1}function bd(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function NO(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function Y$(r,e,n,i,s){for(;;){if(r==n&&e==i)return!0;if(e==(s<0?0:dc(r))){if(r.nodeName=="DIV")return!1;let o=r.parentNode;if(!o||o.nodeType!=1)return!1;e=bd(r)+(s<0?0:1),r=o}else if(r.nodeType==1){if(r=r.childNodes[e+(s<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=s<0?dc(r):0}else return!1}}function dc(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function x_(r,e){let n=e?r.left:r.right;return{left:n,right:n,top:r.top,bottom:r.bottom}}function L2e(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function cX(r,e){let n=e.width/r.offsetWidth,i=e.height/r.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-r.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-r.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function B2e(r,e,n,i,s,o,a,c){let h=r.ownerDocument,d=h.defaultView||window;for(let f=r,p=!1;f&&!p;)if(f.nodeType==1){let g,y=f==h.body,b=1,w=1;if(y)g=L2e(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(p=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let _=f.getBoundingClientRect();({scaleX:b,scaleY:w}=cX(f,_)),g={left:_.left,right:_.left+f.clientWidth*b,top:_.top,bottom:_.top+f.clientHeight*w}}let x=0,S=0;if(s=="nearest")e.top<g.top?(S=-(g.top-e.top+a),n>0&&e.bottom>g.bottom+S&&(S=e.bottom-g.bottom+S+a)):e.bottom>g.bottom&&(S=e.bottom-g.bottom+a,n<0&&e.top-S<g.top&&(S=-(g.top+S-e.top+a)));else{let _=e.bottom-e.top,O=g.bottom-g.top;S=(s=="center"&&_<=O?e.top+_/2-O/2:s=="start"||s=="center"&&n<0?e.top-a:e.bottom-O+a)-g.top}if(i=="nearest"?e.left<g.left?(x=-(g.left-e.left+o),n>0&&e.right>g.right+x&&(x=e.right-g.right+x+o)):e.right>g.right&&(x=e.right-g.right+o,n<0&&e.left<g.left+x&&(x=-(g.left+x-e.left+o))):x=(i=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:i=="start"==c?e.left-o:e.right-(g.right-g.left)+o)-g.left,x||S)if(y)d.scrollBy(x,S);else{let _=0,O=0;if(S){let T=f.scrollTop;f.scrollTop+=S/w,O=(f.scrollTop-T)*w}if(x){let T=f.scrollLeft;f.scrollLeft+=x/b,_=(f.scrollLeft-T)*b}e={left:e.left-_,top:e.top-O,right:e.right-_,bottom:e.bottom-O},_&&Math.abs(_-x)<1&&(i="nearest"),O&&Math.abs(O-S)<1&&(s="nearest")}if(y)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function U2e(r){let e=r.ownerDocument,n,i;for(let s=r.parentNode;s&&!(s==e.body||n&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:i}}class F2e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?dc(n):0),i,Math.min(e.focusOffset,i?dc(i):0))}set(e,n,i,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=s}}let Mf=null;function hX(r){if(r.setActive)return r.setActive();if(Mf)return r.focus(Mf);let e=[];for(let n=r;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(r.focus(Mf==null?{get preventScroll(){return Mf={preventScroll:!0},!0}}:void 0),!Mf){Mf=!1;for(let n=0;n<e.length;){let i=e[n++],s=e[n++],o=e[n++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let j$;function xd(r,e,n=e){let i=j$||(j$=document.createRange());return i.setEnd(r,n),i.setStart(r,e),i}function lp(r,e,n,i){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,r.dispatchEvent(o);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,r.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function z2e(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function uX(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function X2e(r,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,dc(n));;)if(i){if(n.nodeType!=1)return!1;let s=n.childNodes[i-1];s.contentEditable=="false"?i--:(n=s,i=dc(n))}else{if(n==r)return!0;i=bd(n),n=n.parentNode}}function dX(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function fX(r,e){for(let n=r,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=dc(n)}else if(n.parentNode&&!NO(n))i=bd(n),n=n.parentNode;else return null}}function pX(r,e){for(let n=r,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!NO(n))i=bd(n)+1,n=n.parentNode;else return null}}class rs{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new rs(e.parentNode,bd(e),n)}static after(e,n){return new rs(e.parentNode,bd(e)+1,n)}}const W3=[];class fn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,s=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=s?s.nextSibling:i.firstChild)){let c=fn.get(o);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,n),a.flags&=-8}if(o=s?s.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&o!=a.dom&&(n.written=!0),a.dom.parentNode==i)for(;o&&o!=a.dom;)o=q$(o);else i.insertBefore(a.dom,o);s=a.dom}for(o=s?s.nextSibling:i.firstChild,o&&n&&n.node==i&&(n.written=!0);o;)o=q$(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let s=dc(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;s==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?s=-1:s=1),e=o}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!fn.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,o=0;;s++){let a=this.children[s];if(a.dom==i)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,n,i=0){let s=-1,o=-1,a=-1,c=-1;for(let h=0,d=i,f=i;h<this.children.length;h++){let p=this.children[h],g=d+p.length;if(d<e&&g>n)return p.domBoundsAround(e,n,d);if(g>=e&&s==-1&&(s=h,o=d),d>n&&p.dom.parentNode==this.dom){a=h,c=f;break}f=g,d=g+p.breakAfter}return{from:o,to:c<0?i+this.length:c,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=W3){this.markDirty();for(let s=e;s<n;s++){let o=this.children[s];o.parent==this&&i.indexOf(o)<0&&o.destroy()}this.children.splice(e,n-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new mX(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,s,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}fn.prototype.breakAfter=0;function q$(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class mX{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function gX(r,e,n,i,s,o,a,c,h){let{children:d}=r,f=d.length?d[e]:null,p=o.length?o[o.length-1]:null,g=p?p.breakAfter:a;if(!(e==i&&f&&!a&&!g&&o.length<2&&f.merge(n,s,o.length?p:null,n==0,c,h))){if(i<d.length){let y=d[i];y&&(s<y.length||y.breakAfter&&(p!=null&&p.breakAfter))?(e==i&&(y=y.split(s),s=0),!g&&p&&y.merge(0,s,p,!0,0,h)?o[o.length-1]=y:((s||y.children.length&&!y.children[0].length)&&y.merge(0,s,null,!1,0,h),o.push(y))):y!=null&&y.breakAfter&&(p?p.breakAfter=1:a=1),i++}for(f&&(f.breakAfter=a,n>0&&(!a&&o.length&&f.merge(n,f.length,o[0],!1,c,0)?f.breakAfter=o.shift().breakAfter:(n<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(n,f.length,null,!1,c,0),e++));e<i&&o.length;)if(d[i-1].become(o[o.length-1]))i--,o.pop(),h=o.length?0:c;else if(d[e].become(o[0]))e++,o.shift(),c=o.length?0:h;else break;!o.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,c,h)&&e--,(e<i||o.length)&&r.replaceChildren(e,i,o)}}function yX(r,e,n,i,s,o){let a=r.childCursor(),{i:c,off:h}=a.findPos(n,1),{i:d,off:f}=a.findPos(e,-1),p=e-n;for(let g of i)p+=g.length;r.length+=p,gX(r,d,f,c,h,i,0,s,o)}let Ws=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},_M=typeof document<"u"?document:{documentElement:{style:{}}};const SM=/Edge\/(\d+)/.exec(Ws.userAgent),vX=/MSIE \d/.test(Ws.userAgent),CM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ws.userAgent),O_=!!(vX||CM||SM),Z$=!O_&&/gecko\/(\d+)/i.test(Ws.userAgent),N2=!O_&&/Chrome\/(\d+)/.exec(Ws.userAgent),K$="webkitFontSmoothing"in _M.documentElement.style,bX=!O_&&/Apple Computer/.test(Ws.vendor),J$=bX&&(/Mobile\/\w+/.test(Ws.userAgent)||Ws.maxTouchPoints>2);var kt={mac:J$||/Mac/.test(Ws.platform),windows:/Win/.test(Ws.platform),linux:/Linux|X11/.test(Ws.platform),ie:O_,ie_version:vX?_M.documentMode||6:CM?+CM[1]:SM?+SM[1]:0,gecko:Z$,gecko_version:Z$?+(/Firefox\/(\d+)/.exec(Ws.userAgent)||[0,0])[1]:0,chrome:!!N2,chrome_version:N2?+N2[1]:0,ios:J$,android:/Android\b/.test(Ws.userAgent),webkit:K$,safari:bX,webkit_version:K$?+(/\bAppleWebKit\/(\d+)/.exec(Ws.userAgent)||[0,0])[1]:0,tabSize:_M.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const W2e=256;class Pa extends fn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Pa)||this.length-(n-e)+i.length>W2e||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Pa(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new rs(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Q2e(this.dom,e,n)}}class fc extends fn{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let s of n)s.setParent(this)}setAttrs(e){if(uX(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,s,o,a){return i&&(!(i instanceof fc&&i.mark.eq(this.mark))||e&&o<=0||n<this.length&&a<=0)?!1:(yX(this,e,n,i?i.children.slice():[],o-1,a-1),this.markDirty(),!0)}split(e){let n=[],i=0,s=-1,o=0;for(let c of this.children){let h=i+c.length;h>e&&n.push(i<e?c.split(e-i):c),s<0&&i>=e&&(s=o),i=h,o++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new fc(this.mark,n,a)}domAtPos(e){return xX(this,e)}coordsAt(e,n){return wX(this,e,n)}}function Q2e(r,e,n){let i=r.nodeValue.length;e>i&&(e=i);let s=e,o=e,a=0;e==0&&n<0||e==i&&n>=0?kt.chrome||kt.gecko||(e?(s--,a=1):o<i&&(o++,a=-1)):n<0?s--:o<i&&o++;let c=xd(r,s,o).getClientRects();if(!c.length)return null;let h=c[(a?a<0:n>=0)?0:c.length-1];return kt.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(c,d=>d.width)||h),a?x_(h,a<0):h||null}class mh extends fn{static create(e,n,i){return new mh(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=mh.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,s,o,a){return i&&(!(i instanceof mh)||!this.widget.compare(i.widget)||e>0&&o<=0||n<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof mh&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Hi.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Hi.empty}domAtPos(e){return(this.length?e==0:this.side>0)?rs.before(this.dom):rs.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let c=a?s.length-1:0;o=s[c],!(e>0?c==0:c==s.length-1||o.top<o.bottom);c+=a?-1:1);return x_(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Vp extends fn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Vp&&e.side==this.side}split(){return new Vp(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?rs.before(this.dom):rs.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Hi.empty}get isHidden(){return!0}}Pa.prototype.children=mh.prototype.children=Vp.prototype.children=W3;function xX(r,e){let n=r.dom,{children:i}=r,s=0;for(let o=0;s<i.length;s++){let a=i[s],c=o+a.length;if(!(c==o&&a.getSide()<=0)){if(e>o&&e<c&&a.dom.parentNode==n)return a.domAtPos(e-o);if(e<=o)break;o=c}}for(let o=s;o>0;o--){let a=i[o-1];if(a.dom.parentNode==n)return a.domAtPos(a.length)}for(let o=s;o<i.length;o++){let a=i[o];if(a.dom.parentNode==n)return a.domAtPos(0)}return new rs(n,0)}function OX(r,e,n){let i,{children:s}=r;n>0&&e instanceof fc&&s.length&&(i=s[s.length-1])instanceof fc&&i.mark.eq(e.mark)?OX(i,e.children[0],n-1):(s.push(e),e.setParent(r)),r.length+=e.length}function wX(r,e,n){let i=null,s=-1,o=null,a=-1;function c(d,f){for(let p=0,g=0;p<d.children.length&&g<=f;p++){let y=d.children[p],b=g+y.length;b>=f&&(y.children.length?c(y,f-g):(!o||o.isHidden&&n>0)&&(b>f||g==b&&y.getSide()>0)?(o=y,a=f-g):(g<f||g==b&&y.getSide()<0&&!y.isHidden)&&(i=y,s=f-g)),g=b}}c(r,e);let h=(n<0?i:o)||i||o;return h?h.coordsAt(Math.max(0,h==i?s:a),n):H2e(r)}function H2e(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let n=Dy(e);return n[n.length-1]||null}function kM(r,e){for(let n in r)n=="class"&&e.class?e.class+=" "+r.class:n=="style"&&e.style?e.style+=";"+r.style:e[n]=r[n];return e}const eV=Object.create(null);function $O(r,e,n){if(r==e)return!0;r||(r=eV),e||(e=eV);let i=Object.keys(r),s=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=s.length-(n&&s.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(s.indexOf(o)==-1||r[o]!==e[o]))return!1;return!0}function TM(r,e,n){let i=!1;if(e)for(let s in e)n&&s in n||(i=!0,s=="style"?r.style.cssText="":r.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(i=!0,s=="style"?r.style.cssText=n[s]:r.setAttribute(s,n[s]));return i}function G2e(r){let e=Object.create(null);for(let n=0;n<r.attributes.length;n++){let i=r.attributes[n];e[i.name]=i.value}return e}class Gh{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ts=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Ts||(Ts={}));class Jt extends vd{constructor(e,n,i,s){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Tv(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new $h(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:o,end:a}=_X(e,n);i=(o?n?-3e8:-1:5e8)-1,s=(a?n?2e8:1:-6e8)+1}return new $h(e,i,s,n,e.widget||null,!0)}static line(e){return new Mv(e)}static set(e,n=!1){return Fi.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Jt.none=Fi.empty;class Tv extends Jt{constructor(e){let{start:n,end:i}=_X(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Tv&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&$O(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Tv.prototype.point=!1;class Mv extends Jt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Mv&&this.spec.class==e.spec.class&&$O(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Mv.prototype.mapMode=ws.TrackBefore;Mv.prototype.point=!0;class $h extends Jt{constructor(e,n,i,s,o,a){super(n,i,o,e),this.block=s,this.isReplace=a,this.mapMode=s?n<=0?ws.TrackBefore:ws.TrackAfter:ws.TrackDel}get type(){return this.startSide!=this.endSide?Ts.WidgetRange:this.startSide<=0?Ts.WidgetBefore:Ts.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof $h&&Y2e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}$h.prototype.point=!0;function _X(r,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=r;return n==null&&(n=r.inclusive),i==null&&(i=r.inclusive),{start:n??e,end:i??e}}function Y2e(r,e){return r==e||!!(r&&e&&r.compare(e))}function MM(r,e,n,i=0){let s=n.length-1;s>=0&&n[s]+i>=r?n[s]=Math.max(n[s],e):n.push(r,e)}class rr extends fn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,s,o,a){if(i){if(!(i instanceof rr))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),yX(this,e,n,i?i.children.slice():[],o,a),!0}split(e){let n=new rr;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:s}=this.childPos(e);s&&(n.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)n.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){$O(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){OX(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=kM(n,this.attrs||{})),i&&(this.attrs=kM({class:i},this.attrs||{}))}domAtPos(e){return xX(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(uX(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(TM(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let s=this.dom.lastChild;for(;s&&fn.get(s)instanceof fc;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=fn.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!kt.ios||!this.children.some(o=>o instanceof Pa))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Pa)||/[^ -~]/.test(i.text))return null;let s=Dy(i.dom);if(s.length!=1)return null;e+=s[0].width,n=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=wX(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-s.lineHeight)<2&&s.textHeight<o){let a=(o-s.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(e){return e instanceof rr&&this.children.length==0&&e.children.length==0&&$O(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,s=0;i<e.children.length;i++){let o=e.children[i],a=s+o.length;if(a>=n){if(o instanceof rr)return o;if(a>n)break}s=a+o.breakAfter}return null}}class ic extends fn{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,s,o,a){return i&&(!(i instanceof ic)||!this.widget.compare(i.widget)||e>0&&o<=0||n<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?rs.before(this.dom):rs.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new ic(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return W3}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Hi.empty}domBoundsAround(){return null}become(e){return e instanceof ic&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof EM?null:x_(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class EM extends Gh{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Y0{constructor(e,n,i,s){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ic&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new rr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Hb(new Vp(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ic)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Hb(new Pa(this.text.slice(this.textOff,this.textOff+s)),n),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,n,i,s){this.buildText(n-e,i,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(e,n,i,s,o,a){if(this.disallowBlockEffectsFor[a]&&i instanceof $h){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=n-e;if(i instanceof $h)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ic(i.widget||Lp.block,c,i));else{let h=mh.create(i.widget||Lp.inline,c,c?0:i.startSide),d=this.atCursorPos&&!h.isEditable&&o<=s.length&&(e<n||i.startSide>0),f=!h.isEditable&&(e<n||o>s.length||i.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),d&&(p.append(Hb(new Vp(1),s),o),o=s.length+Math.max(0,o-s.length)),p.append(Hb(h,s),o),this.atCursorPos=f,this.pendingBuffer=f?e<n||o>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(e,n,i,s,o){let a=new Y0(e,n,i,o);return a.openEnd=Fi.spans(s,n,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Hb(r,e){for(let n of e)r=new fc(n,[r],r.length);return r}class Lp extends Gh{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Lp.inline=new Lp("span");Lp.block=new Lp("div");var Sn=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Sn||(Sn={}));const Od=Sn.LTR,Q3=Sn.RTL;function SX(r){let e=[];for(let n=0;n<r.length;n++)e.push(1<<+r[n]);return e}const j2e=SX("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),q2e=SX("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),PM=Object.create(null),Qa=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),n=r.charCodeAt(1);PM[e]=n,PM[n]=-e}function CX(r){return r<=247?j2e[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?q2e[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const Z2e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class gh{get dir(){return this.level%2?Q3:Od}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,s){let o=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=n&&c.to>=n){if(c.level==i)return a;(o<0||(s!=0?s<0?c.from<n:c.to>n:e[o].level>c.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function kX(r,e){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++){let i=r[n],s=e[n];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!kX(i.inner,s.inner))return!1}return!0}const un=[];function K2e(r,e,n,i,s){for(let o=0;o<=i.length;o++){let a=o?i[o-1].to:e,c=o<i.length?i[o].from:n,h=o?256:s;for(let d=a,f=h,p=h;d<c;d++){let g=CX(r.charCodeAt(d));g==512?g=f:g==8&&p==4&&(g=16),un[d]=g==4?2:g,g&7&&(p=g),f=g}for(let d=a,f=h,p=h;d<c;d++){let g=un[d];if(g==128)d<c-1&&f==un[d+1]&&f&24?g=un[d]=f:un[d]=256;else if(g==64){let y=d+1;for(;y<c&&un[y]==64;)y++;let b=d&&f==8||y<n&&un[y]==8?p==1?1:8:256;for(let w=d;w<y;w++)un[w]=b;d=y-1}else g==8&&p==1&&(un[d]=1);f=g,g&7&&(p=g)}}}function J2e(r,e,n,i,s){let o=s==1?2:1;for(let a=0,c=0,h=0;a<=i.length;a++){let d=a?i[a-1].to:e,f=a<i.length?i[a].from:n;for(let p=d,g,y,b;p<f;p++)if(y=PM[g=r.charCodeAt(p)])if(y<0){for(let w=c-3;w>=0;w-=3)if(Qa[w+1]==-y){let x=Qa[w+2],S=x&2?s:x&4?x&1?o:s:0;S&&(un[p]=un[Qa[w]]=S),c=w;break}}else{if(Qa.length==189)break;Qa[c++]=p,Qa[c++]=g,Qa[c++]=h}else if((b=un[p])==2||b==1){let w=b==s;h=w?0:1;for(let x=c-3;x>=0;x-=3){let S=Qa[x+2];if(S&2)break;if(w)Qa[x+2]|=2;else{if(S&4)break;Qa[x+2]|=4}}}}}function eke(r,e,n,i){for(let s=0,o=i;s<=n.length;s++){let a=s?n[s-1].to:r,c=s<n.length?n[s].from:e;for(let h=a;h<c;){let d=un[h];if(d==256){let f=h+1;for(;;)if(f==c){if(s==n.length)break;f=n[s++].to,c=s<n.length?n[s].from:e}else if(un[f]==256)f++;else break;let p=o==1,g=(f<e?un[f]:i)==1,y=p==g?p?1:2:i;for(let b=f,w=s,x=w?n[w-1].to:r;b>h;)b==x&&(b=n[--w].from,x=w?n[w-1].to:r),un[--b]=y;h=f}else o=d,h++}}}function AM(r,e,n,i,s,o,a){let c=i%2?2:1;if(i%2==s%2)for(let h=e,d=0;h<n;){let f=!0,p=!1;if(d==o.length||h<o[d].from){let w=un[h];w!=c&&(f=!1,p=w==16)}let g=!f&&c==1?[]:null,y=f?i:i+1,b=h;e:for(;;)if(d<o.length&&b==o[d].from){if(p)break e;let w=o[d];if(!f)for(let x=w.to,S=d+1;;){if(x==n)break e;if(S<o.length&&o[S].from==x)x=o[S++].to;else{if(un[x]==c)break e;break}}if(d++,g)g.push(w);else{w.from>h&&a.push(new gh(h,w.from,y));let x=w.direction==Od!=!(y%2);RM(r,x?i+1:i,s,w.inner,w.from,w.to,a),h=w.to}b=w.to}else{if(b==n||(f?un[b]!=c:un[b]==c))break;b++}g?AM(r,h,b,i+1,s,g,a):h<b&&a.push(new gh(h,b,y)),h=b}else for(let h=n,d=o.length;h>e;){let f=!0,p=!1;if(!d||h>o[d-1].to){let w=un[h-1];w!=c&&(f=!1,p=w==16)}let g=!f&&c==1?[]:null,y=f?i:i+1,b=h;e:for(;;)if(d&&b==o[d-1].to){if(p)break e;let w=o[--d];if(!f)for(let x=w.from,S=d;;){if(x==e)break e;if(S&&o[S-1].to==x)x=o[--S].from;else{if(un[x-1]==c)break e;break}}if(g)g.push(w);else{w.to<h&&a.push(new gh(w.to,h,y));let x=w.direction==Od!=!(y%2);RM(r,x?i+1:i,s,w.inner,w.from,w.to,a),h=w.from}b=w.from}else{if(b==e||(f?un[b-1]!=c:un[b-1]==c))break;b--}g?AM(r,b,h,i+1,s,g,a):b<h&&a.push(new gh(b,h,y)),h=b}}function RM(r,e,n,i,s,o,a){let c=e%2?2:1;K2e(r,s,o,i,c),J2e(r,s,o,i,c),eke(s,o,i,c),AM(r,s,o,e,n,i,a)}function tke(r,e,n){if(!r)return[new gh(0,0,e==Q3?1:0)];if(e==Od&&!n.length&&!Z2e.test(r))return TX(r.length);if(n.length)for(;r.length>un.length;)un[un.length]=256;let i=[],s=e==Od?0:1;return RM(r,s,s,n,0,r.length,i),i}function TX(r){return[new gh(0,r,0)]}let MX="";function ike(r,e,n,i,s){var o;let a=i.head-r.from,c=gh.find(e,a,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),h=e[c],d=h.side(s,n);if(a==d){let g=c+=s?1:-1;if(g<0||g>=e.length)return null;h=e[c=g],a=h.side(!s,n),d=h.side(s,n)}let f=Xr(r.text,a,h.forward(s,n));(f<h.from||f>h.to)&&(f=d),MX=r.text.slice(Math.min(a,f),Math.max(a,f));let p=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return p&&f==d&&p.level+(s?0:1)<h.level?Ke.cursor(p.side(!s,n)+r.from,p.forward(s,n)?1:-1,p.level):Ke.cursor(f+r.from,h.forward(s,n)?-1:1,h.level)}function nke(r,e,n){for(let i=e;i<n;i++){let s=CX(r.charCodeAt(i));if(s==1)return Od;if(s==2||s==4)return Q3}return Od}const EX=St.define(),PX=St.define(),AX=St.define(),RX=St.define(),IM=St.define(),IX=St.define(),DX=St.define(),H3=St.define(),G3=St.define(),NX=St.define({combine:r=>r.some(e=>e)}),$X=St.define({combine:r=>r.some(e=>e)}),VX=St.define();class cp{constructor(e,n="nearest",i="nearest",s=5,o=5,a=!1){this.range=e,this.y=n,this.x=i,this.yMargin=s,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new cp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new cp(Ke.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Gb=bi.define({map:(r,e)=>r.map(e)}),LX=bi.define();function Ks(r,e,n){let i=r.facet(RX);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const uh=St.define({combine:r=>r.length?r[0]:!0});let rke=0;const S0=St.define();class dr{constructor(e,n,i,s,o){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=s,this.extension=o(this)}static define(e,n){const{eventHandlers:i,eventObservers:s,provide:o,decorations:a}=n||{};return new dr(rke++,e,i,s,c=>{let h=[S0.of(c)];return a&&h.push(Ny.of(d=>{let f=d.plugin(c);return f?a(f):Jt.none})),o&&h.push(o(c)),h})}static fromClass(e,n){return dr.define(i=>new e(i),n)}}class $2{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Ks(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Ks(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Ks(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const BX=St.define(),Y3=St.define(),Ny=St.define(),UX=St.define(),j3=St.define(),FX=St.define();function tV(r,e){let n=r.state.facet(FX);if(!n.length)return n;let i=n.map(o=>o instanceof Function?o(r):o),s=[];return Fi.spans(i,e.from,e.to,{point(){},span(o,a,c,h){let d=o-e.from,f=a-e.from,p=s;for(let g=c.length-1;g>=0;g--,h--){let y=c[g].spec.bidiIsolate,b;if(y==null&&(y=nke(e.text,d,f)),h>0&&p.length&&(b=p[p.length-1]).to==d&&b.direction==y)b.to=f,p=b.inner;else{let w={from:d,to:f,direction:y,inner:[]};p.push(w),p=w.inner}}}}),s}const zX=St.define();function XX(r){let e=0,n=0,i=0,s=0;for(let o of r.state.facet(zX)){let a=o(r);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:n,top:i,bottom:s}}const C0=St.define();class Jo{constructor(e,n,i,s){this.fromA=e,this.toA=n,this.fromB=i,this.toB=s}join(e){return new Jo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let s=0,o=0,a=0,c=0;;s++){let h=s==e.length?null:e[s],d=a-c,f=h?h.fromB:1e9;for(;o<n.length&&n[o]<f;){let p=n[o],g=n[o+1],y=Math.max(c,p),b=Math.min(f,g);if(y<=b&&new Jo(y+d,b+d,y,b).addToSet(i),g>f)break;o+=2}if(!h)return i;new Jo(h.fromA,h.toA,h.fromB,h.toB).addToSet(i),a=h.toA,c=h.toB}}}class VO{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=gr.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,a,c,h)=>s.push(new Jo(o,a,c,h))),this.changedRanges=s}static create(e,n,i){return new VO(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class iV extends fn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Jt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new rr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Jo(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:f})=>f<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!uke(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?oke(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:f}=this.hasComposition;i=new Jo(d,f,e.changes.mapPos(d,-1),e.changes.mapPos(f,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(kt.ie||kt.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),h=cke(a,c,e.changes);return i=Jo.extendWithRanges(i,h),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=kt.chrome||kt.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof ic&&a.widget instanceof EM&&o.push(a.dom);s.updateGaps(o)}updateChildren(e,n,i){let s=i?i.range.addToSet(e.slice()):e,o=this.childCursor(n);for(let a=s.length-1;;a--){let c=a>=0?s[a]:null;if(!c)break;let{fromA:h,toA:d,fromB:f,toB:p}=c,g,y,b,w;if(i&&i.range.fromB<p&&i.range.toB>f){let T=Y0.build(this.view.state.doc,f,i.range.fromB,this.decorations,this.dynamicDecorationMap),E=Y0.build(this.view.state.doc,i.range.toB,p,this.decorations,this.dynamicDecorationMap);y=T.breakAtStart,b=T.openStart,w=E.openEnd;let P=this.compositionView(i);E.breakAtStart?P.breakAfter=1:E.content.length&&P.merge(P.length,P.length,E.content[0],!1,E.openStart,0)&&(P.breakAfter=E.content[0].breakAfter,E.content.shift()),T.content.length&&P.merge(0,0,T.content[T.content.length-1],!0,0,T.openEnd)&&T.content.pop(),g=T.content.concat(P).concat(E.content)}else({content:g,breakAtStart:y,openStart:b,openEnd:w}=Y0.build(this.view.state.doc,f,p,this.decorations,this.dynamicDecorationMap));let{i:x,off:S}=o.findPos(d,1),{i:_,off:O}=o.findPos(h,-1);gX(this,_,O,x,S,g,y,b,w)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(LX)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Pa(e.text.nodeValue);n.flags|=8;for(let{deco:s}of e.marks)n=new fc(s,[n],n.length);let i=new rr;return i.append(n,0),i}fixCompositionDOM(e){let n=(o,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let c=fn.get(o);c&&c!=a&&(c.dom=null),a.setDOM(o)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];n(e.line,s);for(let o=e.marks.length-1;o>=-1;o--)i=s.childPos(i.off,1),s=s.children[i.i],n(o>=0?e.marks[o].node:e.text,s)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,o=!s&&Gx(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(c.anchor)),d=c.empty?h:this.moveToLine(this.domAtPos(c.head));if(kt.gecko&&c.empty&&!this.hasComposition&&ske(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=d=new rs(p,0),a=!0}let f=this.view.observer.selectionRange;(a||!f.focusNode||(!G0(h.node,h.offset,f.anchorNode,f.anchorOffset)||!G0(d.node,d.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,c))&&(this.view.observer.ignore(()=>{kt.android&&kt.chrome&&this.dom.contains(f.focusNode)&&hke(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=Iy(this.view.root);if(p)if(c.empty){if(kt.gecko){let g=ake(h.node,h.offset);if(g&&g!=3){let y=(g==1?fX:pX)(h.node,h.offset);y&&(h=new rs(y.node,y.offset))}}p.collapse(h.node,h.offset),c.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=c.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(d.node,d.offset)}catch{}}else{let g=document.createRange();c.anchor>c.head&&([h,d]=[d,h]),g.setEnd(d.node,d.offset),g.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(g)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new rs(f.anchorNode,f.anchorOffset),this.impreciseHead=d.precise?null:new rs(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&G0(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Iy(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let a=rr.find(this,n.head);if(!a)return;let c=a.posAtStart;if(n.head==c||n.head==c+a.length)return;let h=this.coordsAt(n.head,-1),d=this.coordsAt(n.head,1);if(!h||!d||h.bottom>d.top)return;let f=this.domAtPos(n.head+n.assoc);i.collapse(f.node,f.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=n.from&&i.collapse(s,o)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let s=e.offset;!i&&s<n.childNodes.length;s++){let o=fn.get(n.childNodes[s]);o instanceof rr&&(i=o.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let o=fn.get(n.childNodes[s]);o instanceof rr&&(i=o.domAtPos(o.length))}return i?new rs(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=fn.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let s=this.children[n];if(i<s.length||s instanceof rr)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,s=0;for(let o=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],h=o-c.breakAfter,d=h-c.length;if(h<e)break;if(d<=e&&(d<e||c.covers(-1))&&(h>e||c.covers(1))&&(!i||c instanceof rr&&!(i instanceof rr&&n>=0)))i=c,s=d;else if(i&&d==e&&h==e&&c instanceof ic&&Math.abs(n)<2){if(c.deco.startSide<0)break;a&&(i=null)}o=d}return i?i.coordsAt(e-s,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),s=this.children[n];if(!(s instanceof rr))return null;for(;s.children.length;){let{i:c,off:h}=s.childPos(i,1);for(;;c++){if(c==s.children.length)return null;if((s=s.children[c]).length)break}i=h}if(!(s instanceof Pa))return null;let o=Xr(s.text,i);if(o==i)return null;let a=xd(s.dom,i,o).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(c==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:s}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==Sn.LTR;for(let d=0,f=0;f<this.children.length;f++){let p=this.children[f],g=d+p.length;if(g>s)break;if(d>=i){let y=p.dom.getBoundingClientRect();if(n.push(y.height),a){let b=p.dom.lastChild,w=b?Dy(b):[];if(w.length){let x=w[w.length-1],S=h?x.right-y.left:y.right-x.left;S>c&&(c=S,this.minWidth=o,this.minWidthFrom=d,this.minWidthTo=g)}}}d=g+p.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Sn.RTL:Sn.LTR}measureTextSize(){for(let o of this.children)if(o instanceof rr){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),n,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Dy(e.firstChild)[0];n=e.getBoundingClientRect().height,i=o?o.width/27:7,s=o?o.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:s}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new mX(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,s=0;;s++){let o=s==n.viewports.length?null:n.viewports[s],a=o?o.from-1:this.length;if(a>i){let c=(n.lineBlockAt(a).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Jt.replace({widget:new EM(c),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!o)break;i=o.to+1}return Jt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ny).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,s=this.view.state.facet(UX).map((o,a)=>{let c=typeof o=="function";return c&&(i=!0),c?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=i,n.push(Fi.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(VX))try{if(d(this.view,e.range,e))return!0}catch(f){Ks(this.view.state,f,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!i)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let o=XX(this.view),a={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;B2e(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Sn.LTR)}}function ske(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function WX(r,e){let n=r.observer.selectionRange;if(!n.focusNode)return null;let i=fX(n.focusNode,n.focusOffset),s=pX(n.focusNode,n.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let c=fn.get(s.node);if(!c||c instanceof Pa&&c.text!=s.node.nodeValue)o=s;else if(r.docView.lastCompositionAfterCursor){let h=fn.get(i.node);!h||h instanceof Pa&&h.text!=i.node.nodeValue||(o=s)}}if(r.docView.lastCompositionAfterCursor=o!=i,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function oke(r,e,n){let i=WX(r,n);if(!i)return null;let{node:s,from:o,to:a}=i,c=s.nodeValue;if(/[\n\r]/.test(c)||r.state.doc.sliceString(i.from,i.to)!=c)return null;let h=e.invertedDesc,d=new Jo(h.mapPos(o),h.mapPos(a),o,a),f=[];for(let p=s.parentNode;;p=p.parentNode){let g=fn.get(p);if(g instanceof fc)f.push({node:p,deco:g.mark});else{if(g instanceof rr||p.nodeName=="DIV"&&p.parentNode==r.contentDOM)return{range:d,text:s,marks:f,line:p};if(p!=r.contentDOM)f.push({node:p,deco:new Tv({inclusive:!0,attributes:G2e(p),tagName:p.tagName.toLowerCase()})});else return null}}}function ake(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let lke=class{constructor(){this.changes=[]}compareRange(e,n){MM(e,n,this.changes)}comparePoint(e,n){MM(e,n,this.changes)}};function cke(r,e,n){let i=new lke;return Fi.compare(r,e,n,i),i.changes}function hke(r,e){for(let n=r;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function uke(r,e){let n=!1;return e&&r.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(n=!0)}),n}function dke(r,e,n=1){let i=r.charCategorizer(e),s=r.doc.lineAt(e),o=e-s.from;if(s.length==0)return Ke.cursor(e);o==0?n=1:o==s.length&&(n=-1);let a=o,c=o;n<0?a=Xr(s.text,o,!1):c=Xr(s.text,o);let h=i(s.text.slice(a,c));for(;a>0;){let d=Xr(s.text,a,!1);if(i(s.text.slice(d,a))!=h)break;a=d}for(;c<s.length;){let d=Xr(s.text,c);if(i(s.text.slice(c,d))!=h)break;c=d}return Ke.range(a+s.from,c+s.from)}function fke(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function pke(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function V2(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function nV(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function rV(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function DM(r,e,n){let i,s,o,a,c=!1,h,d,f,p;for(let b=r.firstChild;b;b=b.nextSibling){let w=Dy(b);for(let x=0;x<w.length;x++){let S=w[x];s&&V2(s,S)&&(S=nV(rV(S,s.bottom),s.top));let _=fke(e,S),O=pke(n,S);if(_==0&&O==0)return b.nodeType==3?sV(b,e,n):DM(b,e,n);if(!i||a>O||a==O&&o>_){i=b,s=S,o=_,a=O;let T=O?n<S.top?-1:1:_?e<S.left?-1:1:0;c=!T||(T>0?x<w.length-1:x>0)}_==0?n>S.bottom&&(!f||f.bottom<S.bottom)?(h=b,f=S):n<S.top&&(!p||p.top>S.top)&&(d=b,p=S):f&&V2(f,S)?f=rV(f,S.bottom):p&&V2(p,S)&&(p=nV(p,S.top))}}if(f&&f.bottom>=n?(i=h,s=f):p&&p.top<=n&&(i=d,s=p),!i)return{node:r,offset:0};let g=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return sV(i,g,n);if(c&&i.contentEditable!="false")return DM(i,g,n);let y=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:r,offset:y}}function sV(r,e,n){let i=r.nodeValue.length,s=-1,o=1e9,a=0;for(let c=0;c<i;c++){let h=xd(r,c,c+1).getClientRects();for(let d=0;d<h.length;d++){let f=h[d];if(f.top==f.bottom)continue;a||(a=e-f.left);let p=(f.top>n?f.top-n:n-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&p<o){let g=e>=(f.left+f.right)/2,y=g;if((kt.chrome||kt.gecko)&&xd(r,c).getBoundingClientRect().left==f.right&&(y=!g),p<=0)return{node:r,offset:c+(y?1:0)};s=c+(y?1:0),o=p}}}return{node:r,offset:s>-1?s:a>0?r.nodeValue.length:0}}function QX(r,e,n,i=-1){var s,o;let a=r.contentDOM.getBoundingClientRect(),c=a.top+r.viewState.paddingTop,h,{docHeight:d}=r.viewState,{x:f,y:p}=e,g=p-c;if(g<0)return 0;if(g>d)return r.state.doc.length;for(let T=r.viewState.heightOracle.textHeight/2,E=!1;h=r.elementAtHeight(g),h.type!=Ts.Text;)for(;g=i>0?h.bottom+T:h.top-T,!(g>=0&&g<=d);){if(E)return n?null:0;E=!0,i=-i}p=c+g;let y=h.from;if(y<r.viewport.from)return r.viewport.from==0?0:n?null:oV(r,a,h,f,p);if(y>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:n?null:oV(r,a,h,f,p);let b=r.dom.ownerDocument,w=r.root.elementFromPoint?r.root:b,x=w.elementFromPoint(f,p);x&&!r.contentDOM.contains(x)&&(x=null),x||(f=Math.max(a.left+1,Math.min(a.right-1,f)),x=w.elementFromPoint(f,p),x&&!r.contentDOM.contains(x)&&(x=null));let S,_=-1;if(x&&((s=r.docView.nearest(x))===null||s===void 0?void 0:s.isEditable)!=!1){if(b.caretPositionFromPoint){let T=b.caretPositionFromPoint(f,p);T&&({offsetNode:S,offset:_}=T)}else if(b.caretRangeFromPoint){let T=b.caretRangeFromPoint(f,p);T&&({startContainer:S,startOffset:_}=T,(!r.contentDOM.contains(S)||kt.safari&&mke(S,_,f)||kt.chrome&&gke(S,_,f))&&(S=void 0))}}if(!S||!r.docView.dom.contains(S)){let T=rr.find(r.docView,y);if(!T)return g>h.top+h.height/2?h.to:h.from;({node:S,offset:_}=DM(T.dom,f,p))}let O=r.docView.nearest(S);if(!O)return null;if(O.isWidget&&((o=O.dom)===null||o===void 0?void 0:o.nodeType)==1){let T=O.dom.getBoundingClientRect();return e.y<T.top||e.y<=T.bottom&&e.x<=(T.left+T.right)/2?O.posAtStart:O.posAtEnd}else return O.localPosFromDOM(S,_)+O.posAtStart}function oV(r,e,n,i,s){let o=Math.round((i-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&n.height>r.defaultLineHeight*1.5){let c=r.viewState.heightOracle.textHeight,h=Math.floor((s-n.top-(r.defaultLineHeight-c)*.5)/c);o+=h*r.viewState.heightOracle.lineLength}let a=r.state.sliceDoc(n.from,n.to);return n.from+bM(a,o,r.state.tabSize)}function mke(r,e,n){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let s=r.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return xd(r,i-1,i).getBoundingClientRect().left>n}function gke(r,e,n){if(e!=0)return!1;for(let s=r;;){let o=s.parentNode;if(!o||o.nodeType!=1||o.firstChild!=s)return!1;if(o.classList.contains("cm-line"))break;s=o}let i=r.nodeType==1?r.getBoundingClientRect():xd(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function NM(r,e){let n=r.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==Ts.Text))return i}return n}function yke(r,e,n,i){let s=NM(r,e.head),o=!i||s.type!=Ts.Text||!(r.lineWrapping||s.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let a=r.dom.getBoundingClientRect(),c=r.textDirectionAt(s.from),h=r.posAtCoords({x:n==(c==Sn.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(h!=null)return Ke.cursor(h,n?-1:1)}return Ke.cursor(n?s.to:s.from,n?-1:1)}function aV(r,e,n,i){let s=r.state.doc.lineAt(e.head),o=r.bidiSpans(s),a=r.textDirectionAt(s.from);for(let c=e,h=null;;){let d=ike(s,o,a,c,n),f=MX;if(!d){if(s.number==(n?r.state.doc.lines:1))return c;f=`
`,s=r.state.doc.line(s.number+(n?1:-1)),o=r.bidiSpans(s),d=r.visualLineSide(s,!n)}if(h){if(!h(f))return c}else{if(!i)return d;h=i(f)}c=d}}function vke(r,e,n){let i=r.state.charCategorizer(e),s=i(n);return o=>{let a=i(o);return s==Pn.Space&&(s=a),s==a}}function bke(r,e,n,i){let s=e.head,o=n?1:-1;if(s==(n?r.state.doc.length:0))return Ke.cursor(s,e.assoc);let a=e.goalColumn,c,h=r.contentDOM.getBoundingClientRect(),d=r.coordsAtPos(s,e.assoc||-1),f=r.documentTop;if(d)a==null&&(a=d.left-h.left),c=o<0?d.top:d.bottom;else{let y=r.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,r.defaultCharacterWidth*(s-y.from))),c=(o<0?y.top:y.bottom)+f}let p=h.left+a,g=i??r.viewState.heightOracle.textHeight>>1;for(let y=0;;y+=10){let b=c+(g+y)*o,w=QX(r,{x:p,y:b},!1,o);if(b<h.top||b>h.bottom||(o<0?w<s:w>s)){let x=r.docView.coordsForChar(w),S=!x||b<x.top?-1:1;return Ke.cursor(w,S,void 0,a)}}}function Yx(r,e,n){for(;;){let i=0;for(let s of r)s.between(e-1,e+1,(o,a,c)=>{if(e>o&&e<a){let h=i||n||(e-o<a-e?-1:1);e=h<0?o:a,i=h}});if(!i)return e}}function L2(r,e,n){let i=Yx(r.state.facet(j3).map(s=>s(r)),n.from,e.head>n.from?-1:1);return i==n.from?n:Ke.cursor(i,i<n.from?1:-1)}const k0="￿";class xke{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Xi.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=k0}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let o=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==n)break;let c=fn.get(s),h=fn.get(a);(c&&h?c.breakAfter:(c?c.breakAfter:NO(s))||NO(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>o)&&this.lineBreak(),s=a}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,c;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(c=s.exec(n))&&(o=c.index,a=c[0].length),this.append(n.slice(i,o<0?n.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);i=o+a}}readNode(e){if(e.cmIgnore)return;let n=fn.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Oke(e,i.node,i.offset)?n:0))}}function Oke(r,e,n){for(;;){if(!e||n<dc(e))return!1;if(e==r)return!0;n=bd(e)+1,e=e.parentNode}}class lV{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class wke{constructor(e,n,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let c=o||a?[]:Cke(e),h=new xke(c,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=kke(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!wM(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),d=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!wM(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),f=e.viewport;if((kt.ios||kt.chrome)&&e.state.selection.main.empty&&h!=d&&(f.from>0||f.to<e.state.doc.length)){let p=Math.min(h,d),g=Math.max(h,d),y=f.from-p,b=f.to-g;(y==0||y==1||p==0)&&(b==0||b==-1||g==e.state.doc.length)&&(h=0,d=e.state.doc.length)}this.newSel=Ke.single(d,h)}}}function HX(r,e){let n,{newSel:i}=e,s=r.state.selection.main,o=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,h=s.from,d=null;(o===8||kt.android&&e.text.length<c-a)&&(h=s.to,d="end");let f=Ske(r.state.doc.sliceString(a,c,k0),e.text,h-a,d);f&&(kt.chrome&&o==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==k0+k0&&f.toB--,n={from:a+f.from,to:a+f.toA,insert:Hi.of(e.text.slice(f.from,f.toB).split(k0))})}else i&&(!r.hasFocus&&r.state.facet(uh)||i.main.eq(s))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!s.empty&&i&&i.main.empty?n={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,s.to)}:n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,s.to))}:(kt.mac||kt.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=Ke.single(i.main.anchor-1,i.main.head-1)),n={from:s.from,to:s.to,insert:Hi.of([" "])}):kt.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&r.lineWrapping&&(i&&(i=Ke.single(i.main.anchor-1,i.main.head-1)),n={from:s.from,to:s.to,insert:Hi.of([" "])}),n)return q3(r,n,i,o);if(i&&!i.main.eq(s)){let a=!1,c="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(a=!0),c=r.inputState.lastSelectionOrigin),r.dispatch({selection:i,scrollIntoView:a,userEvent:c}),!0}else return!1}function q3(r,e,n,i=-1){if(kt.ios&&r.inputState.flushIOSKey(e))return!0;let s=r.state.selection.main;if(kt.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&r.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&lp(r.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&lp(r.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&lp(r.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let a,c=()=>a||(a=_ke(r,e,n));return r.state.facet(IX).some(h=>h(r,e.from,e.to,o,c))||r.dispatch(c()),!0}function _ke(r,e,n){let i,s=r.state,o=s.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let c=o.from<e.from?s.sliceDoc(o.from,e.from):"",h=o.to>e.to?s.sliceDoc(e.to,o.to):"";i=s.replaceSelection(r.state.toText(c+e.insert.sliceString(0,void 0,r.state.lineBreak)+h))}else{let c=s.changes(e),h=n&&n.main.to<=c.newLength?n.main:void 0;if(s.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let d=r.state.sliceDoc(e.from,e.to),f,p=n&&WX(r,n.main.head);if(p){let b=e.insert.length-(e.to-e.from);f={from:p.from,to:p.to-b}}else f=r.state.doc.lineAt(o.head);let g=o.to-e.to,y=o.to-o.from;i=s.changeByRange(b=>{if(b.from==o.from&&b.to==o.to)return{changes:c,range:h||b.map(c)};let w=b.to-g,x=w-d.length;if(b.to-b.from!=y||r.state.sliceDoc(x,w)!=d||b.to>=f.from&&b.from<=f.to)return{range:b};let S=s.changes({from:x,to:w,insert:e.insert}),_=b.to-o.to;return{changes:S,range:h?Ke.range(Math.max(0,h.anchor+_),Math.max(0,h.head+_)):b.map(S)}})}else i={changes:c,selection:h&&s.selection.replaceRange(h)}}let a="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,a+=".compose",r.inputState.compositionFirstChange&&(a+=".start",r.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:a,scrollIntoView:!0})}function Ske(r,e,n,i){let s=Math.min(r.length,e.length),o=0;for(;o<s&&r.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&r.length==e.length)return null;let a=r.length,c=e.length;for(;a>0&&c>0&&r.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(i=="end"){let h=Math.max(0,o-Math.min(a,c));n-=a+h-o}if(a<o&&r.length<e.length){let h=n<=o&&n>=a?o-n:0;o-=h,c=o+(c-a),a=o}else if(c<o){let h=n<=o&&n>=c?o-n:0;o-=h,a=o+(a-c),c=o}return{from:o,toA:a,toB:c}}function Cke(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}=r.observer.selectionRange;return n&&(e.push(new lV(n,i)),(s!=n||o!=i)&&e.push(new lV(s,o))),e}function kke(r,e){if(r.length==0)return null;let n=r[0].pos,i=r.length==2?r[1].pos:n;return n>-1&&i>-1?Ke.single(n+e,i+e):null}class Tke{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,kt.safari&&e.contentDOM.addEventListener("input",()=>null),kt.gecko&&Xke(e.contentDOM.ownerDocument)}handleEvent(e){!Nke(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,n);for(let s of i.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Mke(e),i=this.handlers,s=this.view.contentDOM;for(let o in n)if(o!="scroll"){let a=!n[o].handlers.length,c=i[o];c&&a!=!c.handlers.length&&(s.removeEventListener(o,this.handleEvent),c=null),c||s.addEventListener(o,this.handleEvent,{passive:a})}for(let o in i)o!="scroll"&&!n[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&YX.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),kt.android&&kt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return kt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=GX.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Eke.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,lp(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:kt.safari&&!kt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function cV(r,e){return(n,i)=>{try{return e.call(r,i,n)}catch(s){Ks(n.state,s)}}}function Mke(r){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of r){let s=i.spec;if(s&&s.domEventHandlers)for(let o in s.domEventHandlers){let a=s.domEventHandlers[o];a&&n(o).handlers.push(cV(i.value,a))}if(s&&s.domEventObservers)for(let o in s.domEventObservers){let a=s.domEventObservers[o];a&&n(o).observers.push(cV(i.value,a))}}for(let i in Aa)n(i).handlers.push(Aa[i]);for(let i in ia)n(i).observers.push(ia[i]);return e}const GX=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Eke="dthko",YX=[16,17,18,20,91,92,224,225],Yb=6;function jb(r){return Math.max(0,r)*.7+8}function Pke(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class Ake{constructor(e,n,i,s){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=U2e(e.contentDOM),this.atoms=e.state.facet(j3).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Xi.allowMultipleSelections)&&Rke(e,n),this.dragging=Dke(e,n)&&ZX(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Pke(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,s=0,o=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=XX(this.view);e.clientX-h.left<=s+Yb?n=-jb(s-e.clientX):e.clientX+h.right>=a-Yb&&(n=jb(e.clientX-a)),e.clientY-h.top<=o+Yb?i=-jb(o-e.clientY):e.clientY+h.bottom>=c-Yb&&(i=jb(e.clientY-c)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],o=null;if(s.empty){let a=Yx(this.atoms,s.from,0);a!=s.from&&(o=Ke.cursor(a,-1))}else{let a=Yx(this.atoms,s.from,-1),c=Yx(this.atoms,s.to,1);(a!=s.from||c!=s.to)&&(o=Ke.range(s.from==s.anchor?a:c,s.from==s.head?a:c))}o&&(n||(n=e.ranges.slice()),n[i]=o)}return n?Ke.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Rke(r,e){let n=r.state.facet(EX);return n.length?n[0](e):kt.mac?e.metaKey:e.ctrlKey}function Ike(r,e){let n=r.state.facet(PX);return n.length?n[0](e):kt.mac?!e.altKey:!e.ctrlKey}function Dke(r,e){let{main:n}=r.state.selection;if(n.empty)return!1;let i=Iy(r.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let a=s[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Nke(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=r.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=fn.get(n))&&i.ignoreEvent(e))return!1;return!0}const Aa=Object.create(null),ia=Object.create(null),jX=kt.ie&&kt.ie_version<15||kt.ios&&kt.webkit_version<604;function $ke(r){let e=r.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{r.focus(),n.remove(),qX(r,n.value)},50)}function w_(r,e,n){for(let i of r.facet(e))n=i(n,r);return n}function qX(r,e){e=w_(r.state,H3,e);let{state:n}=r,i,s=1,o=n.toText(e),a=o.lines==n.selection.ranges.length;if($M!=null&&n.selection.ranges.every(h=>h.empty)&&$M==o.toString()){let h=-1;i=n.changeByRange(d=>{let f=n.doc.lineAt(d.from);if(f.from==h)return{range:d};h=f.from;let p=n.toText((a?o.line(s++).text:e)+n.lineBreak);return{changes:{from:f.from,insert:p},range:Ke.cursor(d.from+p.length)}})}else a?i=n.changeByRange(h=>{let d=o.line(s++);return{changes:{from:h.from,to:h.to,insert:d.text},range:Ke.cursor(h.from+d.length)}}):i=n.replaceSelection(o);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ia.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};Aa.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);ia.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};ia.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};Aa.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of r.state.facet(AX))if(n=i(r,e),n)break;if(!n&&e.button==0&&(n=Bke(r,e)),n){let i=!r.hasFocus;r.inputState.startMouseSelection(new Ake(r,e,n,i)),i&&r.observer.ignore(()=>{hX(r.contentDOM);let o=r.root.activeElement;o&&!o.contains(r.contentDOM)&&o.blur()});let s=r.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function hV(r,e,n,i){if(i==1)return Ke.cursor(e,n);if(i==2)return dke(r.state,e,n);{let s=rr.find(r.docView,e),o=r.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:o.from,c=s?s.posAtEnd:o.to;return c<r.state.doc.length&&c==o.to&&c++,Ke.range(a,c)}}let uV=(r,e,n)=>e>=n.top&&e<=n.bottom&&r>=n.left&&r<=n.right;function Vke(r,e,n,i){let s=rr.find(r.docView,e);if(!s)return 1;let o=e-s.posAtStart;if(o==0)return 1;if(o==s.length)return-1;let a=s.coordsAt(o,-1);if(a&&uV(n,i,a))return-1;let c=s.coordsAt(o,1);return c&&uV(n,i,c)?1:a&&a.bottom>=i?-1:1}function dV(r,e){let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Vke(r,n,e.clientX,e.clientY)}}const Lke=kt.ie&&kt.ie_version<=11;let fV=null,pV=0,mV=0;function ZX(r){if(!Lke)return r.detail;let e=fV,n=mV;return fV=r,mV=Date.now(),pV=!e||n>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(pV+1)%3:1}function Bke(r,e){let n=dV(r,e),i=ZX(e),s=r.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),s=s.map(o.changes))},get(o,a,c){let h=dV(r,o),d,f=hV(r,h.pos,h.bias,i);if(n.pos!=h.pos&&!a){let p=hV(r,n.pos,n.bias,i),g=Math.min(p.from,f.from),y=Math.max(p.to,f.to);f=g<f.from?Ke.range(g,y):Ke.range(y,g)}return a?s.replaceRange(s.main.extend(f.from,f.to)):c&&i==1&&s.ranges.length>1&&(d=Uke(s,h.pos))?d:c?s.addRange(f):Ke.create([f])}}}function Uke(r,e){for(let n=0;n<r.ranges.length;n++){let{from:i,to:s}=r.ranges[n];if(i<=e&&s>=e)return Ke.create(r.ranges.slice(0,n).concat(r.ranges.slice(n+1)),r.mainIndex==n?0:r.mainIndex-(r.mainIndex>n?1:0))}return null}Aa.dragstart=(r,e)=>{let{selection:{main:n}}=r.state;if(e.target.draggable){let s=r.docView.nearest(e.target);if(s&&s.isWidget){let o=s.posAtStart,a=o+s.length;(o>=n.to||a<=n.from)&&(n=Ke.range(o,a))}}let{inputState:i}=r;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",w_(r.state,G3,r.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Aa.dragend=r=>(r.inputState.draggedContent=null,!1);function gV(r,e,n,i){if(n=w_(r.state,H3,n),!n)return;let s=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=r.inputState,a=i&&o&&Ike(r,e)?{from:o.from,to:o.to}:null,c={from:s,insert:n},h=r.state.changes(a?[a,c]:c);r.focus(),r.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),r.inputState.draggedContent=null}Aa.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),s=0,o=()=>{++s==n.length&&gV(r,e,i.filter(a=>a!=null).join(r.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let c=new FileReader;c.onerror=o,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(i[a]=c.result),o()},c.readAsText(n[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return gV(r,e,i,!0),!0}return!1};Aa.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let n=jX?null:e.clipboardData;return n?(qX(r,n.getData("text/plain")||n.getData("text/uri-list")),!0):($ke(r),!1)};function Fke(r,e){let n=r.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function zke(r){let e=[],n=[],i=!1;for(let s of r.selection.ranges)s.empty||(e.push(r.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:o}of r.selection.ranges){let a=r.doc.lineAt(o);a.number>s&&(e.push(a.text),n.push({from:a.from,to:Math.min(r.doc.length,a.to+1)})),s=a.number}i=!0}return{text:w_(r,G3,e.join(r.lineBreak)),ranges:n,linewise:i}}let $M=null;Aa.copy=Aa.cut=(r,e)=>{let{text:n,ranges:i,linewise:s}=zke(r.state);if(!n&&!s)return!1;$M=s?n:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=jX?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(Fke(r,n),!1)};const KX=vc.define();function JX(r,e){let n=[];for(let i of r.facet(DX)){let s=i(r,e);s&&n.push(s)}return n?r.update({effects:n,annotations:KX.of(!0)}):null}function eW(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let n=JX(r.state,e);n?r.dispatch(n):r.update([])}},10)}ia.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),eW(r)};ia.blur=r=>{r.observer.clearSelectionRange(),eW(r)};ia.compositionstart=ia.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};ia.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,kt.chrome&&kt.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};ia.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};Aa.beforeinput=(r,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let c=a[0],h=r.posAtDOM(c.startContainer,c.startOffset),d=r.posAtDOM(c.endContainer,c.endOffset);return q3(r,{from:h,to:d,insert:r.state.toText(o)},null),!0}}let s;if(kt.chrome&&kt.android&&(s=GX.find(o=>o.inputType==e.inputType))&&(r.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return kt.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),kt.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>ia.compositionend(r,e),20),!1};const yV=new Set;function Xke(r){yV.has(r)||(yV.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const vV=["pre-wrap","normal","pre-line","break-spaces"];let Bp=!1;function bV(){Bp=!1}class Wke{constructor(e){this.lineWrapping=e,this.doc=Hi.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return vV.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,i,s,o,a){let c=vV.indexOf(e)>-1,h=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=n,this.charWidth=i,this.textHeight=s,this.lineLength=o,h){this.heightSamples={};for(let d=0;d<a.length;d++){let f=a[d];f<0?d++:this.heightSamples[Math.floor(f*10)]=!0}}return h}}class Qke{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class tl{constructor(e,n,i,s,o){this.from=e,this.length=n,this.top=i,this.height=s,this._content=o}get type(){return typeof this._content=="number"?Ts.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof $h?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new tl(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var wn=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(wn||(wn={}));const jx=.001;class Ms{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>jx&&(Bp=!0),this.height=e)}replace(e,n,i){return Ms.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,s){let o=this,a=i.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:d,fromB:f,toB:p}=s[c],g=o.lineAt(h,wn.ByPosNoHeight,i.setDoc(n),0,0),y=g.to>=d?g:o.lineAt(d,wn.ByPosNoHeight,i,0,0);for(p+=y.to-d,d=y.to;c>0&&g.from<=s[c-1].toA;)h=s[c-1].fromA,f=s[c-1].fromB,c--,h<g.from&&(g=o.lineAt(h,wn.ByPosNoHeight,i,0,0));f+=g.from-h,h=g.from;let b=Z3.build(i.setDoc(a),e,f,p);o=LO(o,o.replace(h,d,b))}return o.updateHeight(i,0)}static empty(){return new bo(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,s=0,o=0;for(;;)if(n==i)if(s>o*2){let c=e[n-1];c.break?e.splice(--n,1,c.left,null,c.right):e.splice(--n,1,c.left,c.right),i+=1+c.break,s-=c.size}else if(o>s*2){let c=e[i];c.break?e.splice(i,1,c.left,null,c.right):e.splice(i,1,c.left,c.right),i+=2+c.break,o-=c.size}else break;else if(s<o){let c=e[n++];c&&(s+=c.size)}else{let c=e[--i];c&&(o+=c.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,i++),new Hke(Ms.of(e.slice(0,n)),a,Ms.of(e.slice(i)))}}function LO(r,e){return r==e?r:(r.constructor!=e.constructor&&(Bp=!0),e)}Ms.prototype.size=1;class tW extends Ms{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,s){return new tl(s,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,s,o){return this.blockAt(0,i,s,o)}forEachLine(e,n,i,s,o,a){e<=o+this.length&&n>=o&&a(this.blockAt(0,i,s,o))}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class bo extends tW{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,s){return new tl(s,this.length,i,this.height,this.breaks)}replace(e,n,i){let s=i[0];return i.length==1&&(s instanceof bo||s instanceof Lr&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Lr?s=new bo(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Ms.of(i)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Lr extends Ms{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,o=s-i+1,a,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*o);a=h/o,this.length>o+1&&(c=(this.height-h)/(this.length-o-1))}else a=this.height/o;return{firstLine:i,lastLine:s,perLine:a,perChar:c}}blockAt(e,n,i,s){let{firstLine:o,lastLine:a,perLine:c,perChar:h}=this.heightMetrics(n,s);if(n.lineWrapping){let d=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),f=n.doc.lineAt(d),p=c+f.length*h,g=Math.max(i,e-p/2);return new tl(f.from,f.length,g,p,0)}else{let d=Math.max(0,Math.min(a-o,Math.floor((e-i)/c))),{from:f,length:p}=n.doc.line(o+d);return new tl(f,p,i+c*d,c,0)}}lineAt(e,n,i,s,o){if(n==wn.ByHeight)return this.blockAt(e,i,s,o);if(n==wn.ByPosNoHeight){let{from:y,to:b}=i.doc.lineAt(e);return new tl(y,b-y,0,0,0)}let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(i,o),d=i.doc.lineAt(e),f=c+d.length*h,p=d.number-a,g=s+c*p+h*(d.from-o-p);return new tl(d.from,d.length,Math.max(s,Math.min(g,s+this.height-f)),f,0)}forEachLine(e,n,i,s,o,a){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:c,perLine:h,perChar:d}=this.heightMetrics(i,o);for(let f=e,p=s;f<=n;){let g=i.doc.lineAt(f);if(f==e){let b=g.number-c;p+=h*b+d*(e-o-b)}let y=h+d*g.length;a(new tl(g.from,g.length,p,y,0)),p+=y,f=g.to+1}}replace(e,n,i){let s=this.length-n;if(s>0){let o=i[i.length-1];o instanceof Lr?i[i.length-1]=new Lr(o.length+s):i.push(null,new Lr(s-1))}if(e>0){let o=i[0];o instanceof Lr?i[0]=new Lr(e+o.length):i.unshift(new Lr(e-1),null)}return Ms.of(i)}decomposeLeft(e,n){n.push(new Lr(e-1),null)}decomposeRight(e,n){n.push(null,new Lr(this.length-e-1))}updateHeight(e,n=0,i=!1,s){let o=n+this.length;if(s&&s.from<=n+this.length&&s.more){let a=[],c=Math.max(n,s.from),h=-1;for(s.from>n&&a.push(new Lr(s.from-n-1).updateHeight(e,n));c<=o&&s.more;){let f=e.doc.lineAt(c).length;a.length&&a.push(null);let p=s.heights[s.index++];h==-1?h=p:Math.abs(p-h)>=jx&&(h=-2);let g=new bo(f,p);g.outdated=!1,a.push(g),c+=f+1}c<=o&&a.push(null,new Lr(o-c).updateHeight(e,c));let d=Ms.of(a);return(h<0||Math.abs(d.height-this.height)>=jx||Math.abs(h-this.heightMetrics(e,n).perLine)>=jx)&&(Bp=!0),LO(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Hke extends Ms{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,s){let o=i+this.left.height;return e<o?this.left.blockAt(e,n,i,s):this.right.blockAt(e,n,o,s+this.left.length+this.break)}lineAt(e,n,i,s,o){let a=s+this.left.height,c=o+this.left.length+this.break,h=n==wn.ByHeight?e<a:e<c,d=h?this.left.lineAt(e,n,i,s,o):this.right.lineAt(e,n,i,a,c);if(this.break||(h?d.to<c:d.from>c))return d;let f=n==wn.ByPosNoHeight?wn.ByPosNoHeight:wn.ByPos;return h?d.join(this.right.lineAt(c,f,i,a,c)):this.left.lineAt(c,f,i,s,o).join(d)}forEachLine(e,n,i,s,o,a){let c=s+this.left.height,h=o+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,n,i,s,o,a),n>=h&&this.right.forEachLine(e,n,i,c,h,a);else{let d=this.lineAt(h,wn.ByPos,i,s,o);e<d.from&&this.left.forEachLine(e,d.from-1,i,s,o,a),d.to>=e&&d.from<=n&&a(d),n>d.to&&this.right.forEachLine(d.to+1,n,i,c,h,a)}}replace(e,n,i){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,i));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let c of i)o.push(c);if(e>0&&xV(o,a-1),n<this.length){let c=o.length;this.decomposeRight(n,o),xV(o,c)}return Ms.of(o)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ms.of(this.break?[e,null,n]:[e,n]):(this.left=LO(this.left,e),this.right=LO(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,s){let{left:o,right:a}=this,c=n+o.length+this.break,h=null;return s&&s.from<=n+o.length&&s.more?h=o=o.updateHeight(e,n,i,s):o.updateHeight(e,n,i),s&&s.from<=c+a.length&&s.more?h=a=a.updateHeight(e,c,i,s):a.updateHeight(e,c,i),h?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function xV(r,e){let n,i;r[e]==null&&(n=r[e-1])instanceof Lr&&(i=r[e+1])instanceof Lr&&r.splice(e-1,3,new Lr(n.length+1+i.length))}const Gke=5;class Z3{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof bo?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new bo(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=n-e;i.block?this.addBlock(new tW(a,s,i)):(a||o||s>=Gke)&&this.addLineDeco(s,o,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new bo(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Lr(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof bo)return e;let n=new bo(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof bo)&&!this.isCovered?this.nodes.push(new bo(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof bo&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,n,i,s){let o=new Z3(i,e);return Fi.spans(n,i,s,o,0),o.finish(i)}}function Yke(r,e,n){let i=new jke;return Fi.compare(r,e,n,i,0),i.changes}class jke{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,s){(e<n||i&&i.heightRelevant||s&&s.heightRelevant)&&MM(e,n,this.changes,5)}}function qke(r,e){let n=r.getBoundingClientRect(),i=r.ownerDocument,s=i.defaultView||window,o=Math.max(0,n.left),a=Math.min(s.innerWidth,n.right),c=Math.max(0,n.top),h=Math.min(s.innerHeight,n.bottom);for(let d=r.parentNode;d&&d!=i.body;)if(d.nodeType==1){let f=d,p=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&p.overflow!="visible"){let g=f.getBoundingClientRect();o=Math.max(o,g.left),a=Math.min(a,g.right),c=Math.max(c,g.top),h=Math.min(d==r.parentNode?s.innerHeight:h,g.bottom)}d=p.position=="absolute"||p.position=="fixed"?f.offsetParent:f.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-n.left,right:Math.max(o,a)-n.left,top:c-(n.top+e),bottom:Math.max(c,h)-(n.top+e)}}function Zke(r,e){let n=r.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class B2{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],o=n[i];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,n){return Jt.replace({widget:new Kke(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Kke extends Gh{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class OV{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=wV,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Sn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Y3).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Wke(n),this.stateDeco=e.facet(Ny).filter(i=>typeof i!="function"),this.heightMap=Ms.empty().applyChanges(this.stateDeco,Hi.empty,this.heightOracle.setDoc(e.doc),[new Jo(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Jt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let s=i?n.head:n.anchor;if(!e.some(({from:o,to:a})=>s>=o&&s<=a)){let{from:o,to:a}=this.lineBlockAt(s);e.push(new qb(o,a))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?wV:new K3(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(T0(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ny).filter(f=>typeof f!="function");let s=e.changedRanges,o=Jo.extendWithRanges(s,Yke(i,this.stateDeco,e?e.changes:gr.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);bV(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||Bp)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<h.from||n.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,n));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($X)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),s=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Sn.RTL:Sn.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),c=n.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,f=0;if(c.width&&c.height){let{scaleX:T,scaleY:E}=cX(n,c);(T>.005&&Math.abs(this.scaleX-T)>.005||E>.005&&Math.abs(this.scaleY-E)>.005)&&(this.scaleX=T,this.scaleY=E,d|=8,a=h=!0)}let p=(parseInt(i.paddingTop)||0)*this.scaleY,g=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=g)&&(this.paddingTop=p,this.paddingBottom=g,d|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=8);let y=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=y&&(this.scrollAnchorHeight=-1,this.scrollTop=y),this.scrolledToBottom=dX(e.scrollDOM);let b=(this.printing?Zke:qke)(n,this.paddingTop),w=b.top-this.pixelViewport.top,x=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let _=c.width;if((this.contentDOMWidth!=_||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=8),h){let T=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(T)&&(a=!0),a||s.lineWrapping&&Math.abs(_-this.contentDOMWidth)>s.charWidth){let{lineHeight:E,charWidth:P,textHeight:I}=e.docView.measureTextSize();a=E>0&&s.refresh(o,E,P,I,_/P,T),a&&(e.docView.minWidth=0,d|=8)}w>0&&x>0?f=Math.max(w,x):w<0&&x<0&&(f=Math.min(w,x)),bV();for(let E of this.viewports){let P=E.from==this.viewport.from?T:e.docView.measureVisibleLineHeights(E);this.heightMap=(a?Ms.empty().applyChanges(this.stateDeco,Hi.empty,this.heightOracle,[new Jo(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new Qke(E.from,P))}Bp&&(d|=2)}let O=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),d|=this.updateForViewport()),(d&2||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,h=new qb(s.lineAt(a-i*1e3,wn.ByHeight,o,0,0).from,s.lineAt(c+(1-i)*1e3,wn.ByHeight,o,0,0).to);if(n){let{head:d}=n.range;if(d<h.from||d>h.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=s.lineAt(d,wn.ByPos,o,0,0),g;n.y=="center"?g=(p.top+p.bottom)/2-f/2:n.y=="start"||n.y=="nearest"&&d<h.from?g=p.top:g=p.bottom-f,h=new qb(s.lineAt(g-1e3/2,wn.ByHeight,o,0,0).from,s.lineAt(g+f+1e3/2,wn.ByHeight,o,0,0).to)}}return h}mapViewport(e,n){let i=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new qb(this.heightMap.lineAt(i,wn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,wn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,wn.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,wn.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||s<=a-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||o>=c+Math.max(10,Math.min(i,250)))&&s>a-2*1e3&&o<c+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let s of e)n.touchesRange(s.from,s.to)||i.push(new B2(n.mapPos(s.from),n.mapPos(s.to),s.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,o=s>>1,a=s<<1;if(this.defaultTextDirection!=Sn.LTR&&!i)return[];let c=[],h=(f,p,g,y)=>{if(p-f<o)return;let b=this.state.selection.main,w=[b.from];b.empty||w.push(b.to);for(let S of w)if(S>f&&S<p){h(f,S-10,g,y),h(S+10,p,g,y);return}let x=eTe(e,S=>S.from>=g.from&&S.to<=g.to&&Math.abs(S.from-f)<o&&Math.abs(S.to-p)<o&&!w.some(_=>S.from<_&&S.to>_));if(!x){if(p<g.to&&n&&i&&n.visibleRanges.some(S=>S.from<=p&&S.to>=p)){let S=n.moveToLineBoundary(Ke.cursor(p),!1,!0).head;S>f&&(p=S)}x=new B2(f,p,this.gapSize(g,f,p,y))}c.push(x)},d=f=>{if(f.length<a||f.type!=Ts.Text)return;let p=Jke(f.from,f.to,this.stateDeco);if(p.total<a)return;let g=this.scrollTarget?this.scrollTarget.range.head:null,y,b;if(i){let w=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,S;if(g!=null){let _=Kb(p,g),O=((this.visibleBottom-this.visibleTop)/2+w)/f.height;x=_-O,S=_+O}else x=(this.visibleTop-f.top-w)/f.height,S=(this.visibleBottom-f.top+w)/f.height;y=Zb(p,x),b=Zb(p,S)}else{let w=p.total*this.heightOracle.charWidth,x=s*this.heightOracle.charWidth,S,_;if(g!=null){let O=Kb(p,g),T=((this.pixelViewport.right-this.pixelViewport.left)/2+x)/w;S=O-T,_=O+T}else S=(this.pixelViewport.left-x)/w,_=(this.pixelViewport.right+x)/w;y=Zb(p,S),b=Zb(p,_)}y>f.from&&h(f.from,y,f,p),b<f.to&&h(b,f.to,f,p)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(d):d(f);return c}gapSize(e,n,i,s){let o=Kb(s,i)-Kb(s,n);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){B2.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Jt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Fi.spans(e,this.viewport.from,this.viewport.to,{span(s,o){n.push({from:s,to:o})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((s,o)=>s.from!=n[o].from||s.to!=n[o].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||T0(this.heightMap.lineAt(e,wn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||T0(this.heightMap.lineAt(this.scaler.fromDOM(e),wn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return T0(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class qb{constructor(e,n){this.from=e,this.to=n}}function Jke(r,e,n){let i=[],s=r,o=0;return Fi.spans(n,r,e,{span(){},point(a,c){a>s&&(i.push({from:s,to:a}),o+=a-s),s=c}},20),s<e&&(i.push({from:s,to:e}),o+=e-s),{total:o,ranges:i}}function Zb({total:r,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(r*n);for(let s=0;;s++){let{from:o,to:a}=e[s],c=a-o;if(i<=c)return o+i;i-=c}}function Kb(r,e){let n=0;for(let{from:i,to:s}of r.ranges){if(e<=s){n+=e-i;break}n+=s-i}return n/r.total}function eTe(r,e){for(let n of r)if(e(n))return n}const wV={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class K3{constructor(e,n,i){let s=0,o=0,a=0;this.viewports=i.map(({from:c,to:h})=>{let d=n.lineAt(c,wn.ByPos,e,0,0).top,f=n.lineAt(h,wn.ByPos,e,0,0).bottom;return s+=f-d,{from:c,to:h,top:d,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let c of this.viewports)c.domTop=a+(c.top-o)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),o=c.bottom}toDOM(e){for(let n=0,i=0,s=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return s+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,s=o.domBottom}}fromDOM(e){for(let n=0,i=0,s=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return i+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,s=o.domBottom}}eq(e){return e instanceof K3?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function T0(r,e){if(e.scale==1)return r;let n=e.toDOM(r.top),i=e.toDOM(r.bottom);return new tl(r.from,r.length,n,i-n,Array.isArray(r._content)?r._content.map(s=>T0(s,e)):r._content)}const Jb=St.define({combine:r=>r.join(" ")}),VM=St.define({combine:r=>r.indexOf(!0)>-1}),LM=Dh.newName(),iW=Dh.newName(),nW=Dh.newName(),rW={"&light":"."+iW,"&dark":"."+nW};function BM(r,e,n){return new Dh(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return r;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):r+" "+i}})}const tTe=BM("."+LM,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},rW),iTe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},U2=kt.ie&&kt.ie_version<=11;class nTe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new F2e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(kt.ie&&kt.ie_version<=11||kt.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(kt.chrome&&kt.chrome_version<126)&&(this.editContext=new sTe(e),e.state.facet(uh)&&(e.contentDOM.editContext=this.editContext.editContext)),U2&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(uh)?i.root.activeElement!=this.dom:!Gx(i.dom,s))return;let o=s.anchorNode&&i.docView.nearest(s.anchorNode);if(o&&o.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(kt.ie&&kt.ie_version<=11||kt.android&&kt.chrome)&&!i.state.selection.main.empty&&s.focusNode&&G0(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Iy(e.root);if(!n)return!1;let i=kt.safari&&e.root.nodeType==11&&V2e(this.dom.ownerDocument)==this.dom&&rTe(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let s=Gx(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&X2e(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,iTe),U2&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),U2&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&lp(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,s=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(s=!0),n==-1?{from:n,to:i}=a:(n=Math.min(a.from,n),i=Math.max(a.to,i)))}return{from:n,to:i,typeOver:s}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Gx(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new wke(this.view,e,n,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,s=HX(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=_V(n,e.previousSibling||e.target.previousSibling,-1),s=_V(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(uh)!=e.state.facet(uh)&&(e.view.contentDOM.editContext=e.state.facet(uh)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function _V(r,e,n){for(;e;){let i=fn.get(e);if(i&&i.parent==r)return i;let s=e.parentNode;e=s!=r.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function SV(r,e){let n=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=r.docView.domAtPos(r.state.selection.main.anchor);return G0(a.node,a.offset,s,o)&&([n,i,s,o]=[s,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}}function rTe(r,e){if(e.getComposedRanges){let s=e.getComposedRanges(r.root)[0];if(s)return SV(r,s)}let n=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",i,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",i,!0),n?SV(r,n):null}class sTe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:s}=e.state.selection.main,o={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:Hi.of(i.text.split(`
`))};o.from==this.from&&s<this.from?o.from=s:o.to==this.to&&s>this.to&&(o.to=s),!(o.from==o.to&&!o.insert.length)&&(this.pendingContextChange=o,e.state.readOnly||q3(e,o,Ke.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let s=[],o=null;for(let a=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);a<c;a++){let h=e.coordsForChar(a);o=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||o||new DOMRect,s.push(o)}n.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let o of i.getTextFormats()){let a=o.underlineStyle,c=o.underlineThickness;if(a!="None"&&c!="None"){let h=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${c=="Thin"?1:2}px`;s.push(Jt.mark({attributes:{style:h}}).range(this.toEditorPos(o.rangeStart),this.toEditorPos(o.rangeEnd)))}}e.dispatch({effects:LX.of(Jt.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Iy(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,a,c,h,d)=>{if(i)return;let f=d.length-(a-o);if(s&&a>=s.to)if(s.from==o&&s.to==a&&s.insert.eq(d)){s=this.pendingContextChange=null,n+=f,this.to+=f;return}else s=null,this.revertPending(e.state);if(o+=n,a+=n,a<=this.from)this.from+=f,this.to+=f;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),d.toString()),this.to+=f}n+=f}),s&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class bt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(o=>i(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||z2e(e.parent)||document,this.viewState=new OV(e.state||Xi.create(e)),e.scrollTo&&e.scrollTo.is(Gb)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(S0).map(s=>new $2(s));for(let s of this.plugins)s.update(this);this.observer=new nTe(this),this.inputState=new Tke(this),this.inputState.ensureHandlers(this.plugins),this.docView=new iV(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Or?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,s,o=this.state;for(let g of e){if(g.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=g.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,c=0,h=null;e.some(g=>g.annotation(KX))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=JX(o,a),h||(c=1));let d=this.observer.delayedAndroidKey,f=null;if(d?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(f=null)):this.observer.clear(),o.facet(Xi.phrases)!=this.state.facet(Xi.phrases))return this.setState(o);s=VO.create(this,o,e),s.flags|=c;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let g of e){if(p&&(p=p.map(g.changes)),g.scrollIntoView){let{main:y}=g.state.selection;p=new cp(y.empty?y:Ke.cursor(y.head,y.head>y.anchor?-1:1))}for(let y of g.effects)y.is(Gb)&&(p=y.value.clip(this.state))}this.viewState.update(s,p),this.bidiCache=BO.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(C0)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Jb)!=s.state.facet(Jb)&&(this.viewState.mustMeasureContent=!0),(n||i||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let g of this.state.facet(IM))try{g(s)}catch(y){Ks(this.state,y,"update listener")}(h||f)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),f&&!HX(this,f)&&d.force&&lp(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new OV(e),this.plugins=e.facet(S0).map(i=>new $2(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new iV(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(S0),i=e.state.facet(S0);if(n!=i){let s=[];for(let o of i){let a=n.indexOf(o);if(a<0)s.push(new $2(o));else{let c=this.plugins[a];c.mustUpdate=e,s.push(c)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){Ks(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(dX(i))o=-1,a=this.viewState.heightMap.height;else{let y=this.viewState.scrollAnchorAt(s);o=y.from,a=y.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let f=d.map(y=>{try{return y.read(this)}catch(b){return Ks(this.state,b),CV}}),p=VO.create(this,this.state,[]),g=!1;p.flags|=h,n?n.flags|=h:n=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),g=this.docView.update(p),g&&this.docViewUpdate());for(let y=0;y<d.length;y++)if(f[y]!=CV)try{let b=d[y];b.write&&b.write(f[y],this)}catch(b){Ks(this.state,b)}if(g&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let b=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(b>1||b<-1){s=s+b,i.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let c of this.state.facet(IM))c(n)}get themeClasses(){return LM+" "+(this.state.facet(VM)?nW:iW)+" "+this.state.facet(Jb)}updateAttrs(){let e=kV(this,BX,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(uh)?"true":"false",class:"cm-content",style:`${kt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),kV(this,Y3,n);let i=this.observer.ignore(()=>{let s=TM(this.contentDOM,this.contentAttrs,n),o=TM(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let s of i.effects)if(s.is(bt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(C0);let e=this.state.facet(bt.cspNonce);Dh.mount(this.root,this.styleModules.concat(tTe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return L2(this,e,aV(this,e,n,i))}moveByGroup(e,n){return L2(this,e,aV(this,e,n,i=>vke(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=i[n?i.length-1:0];return Ke.cursor(o.side(n,s)+e.from,o.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,i=!0){return yke(this,e,n,i)}moveVertically(e,n,i){return L2(this,e,bke(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),QX(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),a=o[gh.find(o,e-s.from,-1,n)];return x_(i,a.dir==Sn.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(NX)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>oTe)return TX(e.length);let n=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||kX(o.isolates,i=tV(this,e))))return o.order;i||(i=tV(this,e));let s=tke(e.text,n,i);return this.bidiCache.push(new BO(e.from,e.to,n,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||kt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{hX(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Gb.of(new cp(typeof e=="number"?Ke.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Gb.of(new cp(Ke.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return dr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return dr.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Dh.newName(),s=[Jb.of(i),C0.of(BM(`.${i}`,e))];return n&&n.dark&&s.push(VM.of(!0)),s}static baseTheme(e){return Id.lowest(C0.of(BM("."+LM,e,rW)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),s=i&&fn.get(i)||fn.get(e);return((n=s==null?void 0:s.rootView)===null||n===void 0?void 0:n.view)||null}}bt.styleModule=C0;bt.inputHandler=IX;bt.clipboardInputFilter=H3;bt.clipboardOutputFilter=G3;bt.scrollHandler=VX;bt.focusChangeEffect=DX;bt.perLineTextDirection=NX;bt.exceptionSink=RX;bt.updateListener=IM;bt.editable=uh;bt.mouseSelectionStyle=AX;bt.dragMovesSelection=PX;bt.clickAddsSelectionRange=EX;bt.decorations=Ny;bt.outerDecorations=UX;bt.atomicRanges=j3;bt.bidiIsolatedRanges=FX;bt.scrollMargins=zX;bt.darkTheme=VM;bt.cspNonce=St.define({combine:r=>r.length?r[0]:""});bt.contentAttributes=Y3;bt.editorAttributes=BX;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=bi.define();const oTe=4096,CV={};class BO{constructor(e,n,i,s,o,a){this.from=e,this.to=n,this.dir=i,this.isolates=s,this.fresh=o,this.order=a}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:Sn.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==s&&!n.touchesRange(a.from,a.to)&&i.push(new BO(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function kV(r,e,n){for(let i=r.state.facet(e),s=i.length-1;s>=0;s--){let o=i[s],a=typeof o=="function"?o(r):o;a&&kM(a,n)}return n}const aTe=kt.mac?"mac":kt.windows?"win":kt.linux?"linux":"key";function lTe(r,e){const n=r.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let s,o,a,c;for(let h=0;h<n.length-1;++h){const d=n[h];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))e=="mac"?c=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(i="Alt-"+i),o&&(i="Ctrl-"+i),c&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function ex(r,e,n){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),n!==!1&&e.shiftKey&&(r="Shift-"+r),r}const cTe=Id.default(bt.domEventHandlers({keydown(r,e){return oW(sW(e.state),r,e,"editor")}})),J3=St.define({enables:cTe}),TV=new WeakMap;function sW(r){let e=r.facet(J3),n=TV.get(e);return n||TV.set(e,n=dTe(e.reduce((i,s)=>i.concat(s),[]))),n}function hTe(r,e,n){return oW(sW(r.state),e,r,n)}let dh=null;const uTe=4e3;function dTe(r,e=aTe){let n=Object.create(null),i=Object.create(null),s=(a,c)=>{let h=i[a];if(h==null)i[a]=c;else if(h!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,c,h,d,f)=>{var p,g;let y=n[a]||(n[a]=Object.create(null)),b=c.split(/ (?!$)/).map(S=>lTe(S,e));for(let S=1;S<b.length;S++){let _=b.slice(0,S).join(" ");s(_,!0),y[_]||(y[_]={preventDefault:!0,stopPropagation:!1,run:[O=>{let T=dh={view:O,prefix:_,scope:a};return setTimeout(()=>{dh==T&&(dh=null)},uTe),!0}]})}let w=b.join(" ");s(w,!1);let x=y[w]||(y[w]={preventDefault:!1,stopPropagation:!1,run:((g=(p=y._any)===null||p===void 0?void 0:p.run)===null||g===void 0?void 0:g.slice())||[]});h&&x.run.push(h),d&&(x.preventDefault=!0),f&&(x.stopPropagation=!0)};for(let a of r){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let d of c){let f=n[d]||(n[d]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=a;for(let g in f)f[g].run.push(y=>p(y,UM))}let h=a[e]||a.key;if(h)for(let d of c)o(d,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(d,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return n}let UM=null;function oW(r,e,n,i){UM=e;let s=$2e(e),o=Br(s,0),a=Ho(o)==s.length&&s!=" ",c="",h=!1,d=!1,f=!1;dh&&dh.view==n&&dh.scope==i&&(c=dh.prefix+" ",YX.indexOf(e.keyCode)<0&&(d=!0,dh=null));let p=new Set,g=x=>{if(x){for(let S of x.run)if(!p.has(S)&&(p.add(S),S(n)))return x.stopPropagation&&(f=!0),!0;x.preventDefault&&(x.stopPropagation&&(f=!0),d=!0)}return!1},y=r[i],b,w;return y&&(g(y[c+ex(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(kt.windows&&e.ctrlKey&&e.altKey)&&(b=Nh[e.keyCode])&&b!=s?(g(y[c+ex(b,e,!0)])||e.shiftKey&&(w=Ry[e.keyCode])!=s&&w!=b&&g(y[c+ex(w,e,!1)]))&&(h=!0):a&&e.shiftKey&&g(y[c+ex(s,e,!0)])&&(h=!0),!h&&g(y._any)&&(h=!0)),d&&(h=!0),h&&f&&e.stopPropagation(),UM=null,h}class Ev{constructor(e,n,i,s,o){this.className=e,this.left=n,this.top=i,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let o=aW(e);return[new Ev(n,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return fTe(e,n,i)}}function aW(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Sn.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function MV(r,e,n,i){let s=r.coordsAtPos(e,n*2);if(!s)return i;let o=r.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,c=r.posAtCoords({x:o.left+1,y:a}),h=r.posAtCoords({x:o.right-1,y:a});return c==null||h==null?i:{from:Math.max(i.from,Math.min(c,h)),to:Math.min(i.to,Math.max(c,h))}}function fTe(r,e,n){if(n.to<=r.viewport.from||n.from>=r.viewport.to)return[];let i=Math.max(n.from,r.viewport.from),s=Math.min(n.to,r.viewport.to),o=r.textDirection==Sn.LTR,a=r.contentDOM,c=a.getBoundingClientRect(),h=aW(r),d=a.querySelector(".cm-line"),f=d&&window.getComputedStyle(d),p=c.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),g=c.right-(f?parseInt(f.paddingRight):0),y=NM(r,i),b=NM(r,s),w=y.type==Ts.Text?y:null,x=b.type==Ts.Text?b:null;if(w&&(r.lineWrapping||y.widgetLineBreaks)&&(w=MV(r,i,1,w)),x&&(r.lineWrapping||b.widgetLineBreaks)&&(x=MV(r,s,-1,x)),w&&x&&w.from==x.from&&w.to==x.to)return _(O(n.from,n.to,w));{let E=w?O(n.from,null,w):T(y,!1),P=x?O(null,n.to,x):T(b,!0),I=[];return(w||y).to<(x||b).from-(w&&x?1:0)||y.widgetLineBreaks>1&&E.bottom+r.defaultLineHeight/2<P.top?I.push(S(p,E.bottom,g,P.top)):E.bottom<P.top&&r.elementAtHeight((E.bottom+P.top)/2).type==Ts.Text&&(E.bottom=P.top=(E.bottom+P.top)/2),_(E).concat(I).concat(_(P))}function S(E,P,I,A){return new Ev(e,E-h.left,P-h.top-.01,I-E,A-P+.01)}function _({top:E,bottom:P,horizontal:I}){let A=[];for(let D=0;D<I.length;D+=2)A.push(S(I[D],E,I[D+1],P));return A}function O(E,P,I){let A=1e9,D=-1e9,M=[];function $(V,U,F,H,K){let ie=r.coordsAtPos(V,V==I.to?-2:2),he=r.coordsAtPos(F,F==I.from?2:-2);!ie||!he||(A=Math.min(ie.top,he.top,A),D=Math.max(ie.bottom,he.bottom,D),K==Sn.LTR?M.push(o&&U?p:ie.left,o&&H?g:he.right):M.push(!o&&H?p:he.left,!o&&U?g:ie.right))}let L=E??I.from,N=P??I.to;for(let V of r.visibleRanges)if(V.to>L&&V.from<N)for(let U=Math.max(V.from,L),F=Math.min(V.to,N);;){let H=r.state.doc.lineAt(U);for(let K of r.bidiSpans(H)){let ie=K.from+H.from,he=K.to+H.from;if(ie>=F)break;he>U&&$(Math.max(ie,U),E==null&&ie<=L,Math.min(he,F),P==null&&he>=N,K.dir)}if(U=H.to+1,U>=F)break}return M.length==0&&$(L,E==null,N,P==null,r.textDirection),{top:A,bottom:D,horizontal:M}}function T(E,P){let I=c.top+(P?E.top:E.bottom);return{top:I,bottom:I,horizontal:[]}}}function pTe(r,e){return r.constructor==e.constructor&&r.eq(e)}class mTe{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(qx)!=e.state.facet(qx)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(qx);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!pTe(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[i].constructor&&s.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const qx=St.define();function lW(r){return[dr.define(e=>new mTe(e,r)),qx.of(r)]}const cW=!kt.ios,$y=St.define({combine(r){return vl(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function gTe(r={}){return[$y.of(r),yTe,vTe,bTe,$X.of(!0)]}function hW(r){return r.startState.facet($y)!=r.state.facet($y)}const yTe=lW({above:!0,markers(r){let{state:e}=r,n=e.facet($y),i=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty?!o||cW:n.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:Ke.cursor(s.head,s.head>s.anchor?-1:1);for(let h of Ev.forRange(r,a,c))i.push(h)}}return i},update(r,e){r.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=hW(r);return n&&EV(r.state,e),r.docChanged||r.selectionSet||n},mount(r,e){EV(e.state,r)},class:"cm-cursorLayer"});function EV(r,e){e.style.animationDuration=r.facet($y).cursorBlinkRate+"ms"}const vTe=lW({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Ev.forRange(r,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||hW(r)},class:"cm-selectionLayer"}),FM={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};cW&&(FM[".cm-line"].caretColor=FM[".cm-content"].caretColor="transparent !important");const bTe=Id.highest(bt.theme(FM)),uW=bi.define({map(r,e){return r==null?null:e.mapPos(r)}}),M0=Gr.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((n,i)=>i.is(uW)?i.value:n,r)}}),xTe=dr.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let n=r.state.field(M0);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(M0)!=n||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(M0),n=e!=null&&r.coordsAtPos(e);if(!n)return null;let i=r.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+r.scrollDOM.scrollLeft*r.scaleX,top:n.top-i.top+r.scrollDOM.scrollTop*r.scaleY,height:n.bottom-n.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/n+"px",this.cursor.style.height=r.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(M0)!=r&&this.view.dispatch({effects:uW.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function OTe(){return[M0,xTe]}function PV(r,e,n,i,s){e.lastIndex=0;for(let o=r.iterRange(n,i),a=n,c;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;c=e.exec(o.value);)s(a+c.index,c)}function wTe(r,e){let n=r.visibleRanges;if(n.length==1&&n[0].from==r.viewport.from&&n[0].to==r.viewport.to)return n;let i=[];for(let{from:s,to:o}of n)s=Math.max(r.state.doc.lineAt(s).from,s-e),o=Math.min(r.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}class _Te{constructor(e){const{regexp:n,decoration:i,decorate:s,boundary:o,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(c,h,d,f)=>s(f,d,d+c[0].length,c,h);else if(typeof i=="function")this.addMatch=(c,h,d,f)=>{let p=i(c,h,d);p&&f(d,d+c[0].length,p)};else if(i)this.addMatch=(c,h,d,f)=>f(d,d+c[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let n=new Ih,i=n.add.bind(n);for(let{from:s,to:o}of wTe(e,this.maxLength))PV(e.state.doc,this.regexp,s,o,(a,c)=>this.addMatch(c,e,a,i));return n.finish()}updateDeco(e,n){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,a,c,h)=>{h>e.view.viewport.from&&c<e.view.viewport.to&&(i=Math.min(c,i),s=Math.max(h,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,n.map(e.changes),i,s):n}updateRange(e,n,i,s){for(let o of e.visibleRanges){let a=Math.max(o.from,i),c=Math.min(o.to,s);if(c>a){let h=e.state.doc.lineAt(a),d=h.to<c?e.state.doc.lineAt(c):h,f=Math.max(o.from,h.from),p=Math.min(o.to,d.to);if(this.boundary){for(;a>h.from;a--)if(this.boundary.test(h.text[a-1-h.from])){f=a;break}for(;c<d.to;c++)if(this.boundary.test(d.text[c-d.from])){p=c;break}}let g=[],y,b=(w,x,S)=>g.push(S.range(w,x));if(h==d)for(this.regexp.lastIndex=f-h.from;(y=this.regexp.exec(h.text))&&y.index<p-h.from;)this.addMatch(y,e,y.index+h.from,b);else PV(e.state.doc,this.regexp,f,p,(w,x)=>this.addMatch(x,e,w,b));n=n.update({filterFrom:f,filterTo:p,filter:(w,x)=>w<f||x>p,add:g})}}return n}}const zM=/x/.unicode!=null?"gu":"g",STe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,zM),CTe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let F2=null;function kTe(){var r;if(F2==null&&typeof document<"u"&&document.body){let e=document.body.style;F2=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return F2||!1}const Zx=St.define({combine(r){let e=vl(r,{render:null,specialChars:STe,addSpecialChars:null});return(e.replaceTabs=!kTe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,zM)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,zM)),e}});function TTe(r={}){return[Zx.of(r),MTe()]}let AV=null;function MTe(){return AV||(AV=dr.fromClass(class{constructor(r){this.view=r,this.decorations=Jt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(Zx)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new _Te({regexp:r.specialChars,decoration:(e,n,i)=>{let{doc:s}=n.state,o=Br(e[0],0);if(o==9){let a=s.lineAt(i),c=n.state.tabSize,h=rm(a.text,c,i-a.from);return Jt.replace({widget:new RTe((c-h%c)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Jt.replace({widget:new ATe(r,o)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(Zx);r.startState.facet(Zx)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const ETe="•";function PTe(r){return r>=32?ETe:r==10?"␤":String.fromCharCode(9216+r)}class ATe extends Gh{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=PTe(this.code),i=e.state.phrase("Control character")+" "+(CTe[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,n);if(s)return s;let o=document.createElement("span");return o.textContent=n,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class RTe extends Gh{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function ITe(){return NTe}const DTe=Jt.line({class:"cm-activeLine"}),NTe=dr.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,n=[];for(let i of r.state.selection.ranges){let s=r.lineBlockAt(i.head);s.from>e&&(n.push(DTe.range(s.from)),e=s.from)}return Jt.set(n)}},{decorations:r=>r.decorations}),XM=2e3;function $Te(r,e,n){let i=Math.min(e.line,n.line),s=Math.max(e.line,n.line),o=[];if(e.off>XM||n.off>XM||e.col<0||n.col<0){let a=Math.min(e.off,n.off),c=Math.max(e.off,n.off);for(let h=i;h<=s;h++){let d=r.doc.line(h);d.length<=c&&o.push(Ke.range(d.from+a,d.to+c))}}else{let a=Math.min(e.col,n.col),c=Math.max(e.col,n.col);for(let h=i;h<=s;h++){let d=r.doc.line(h),f=bM(d.text,a,r.tabSize,!0);if(f<0)o.push(Ke.cursor(d.to));else{let p=bM(d.text,c,r.tabSize);o.push(Ke.range(d.from+f,d.from+p))}}}return o}function VTe(r,e){let n=r.coordsAtPos(r.viewport.from);return n?Math.round(Math.abs((n.left-e)/r.defaultCharacterWidth)):-1}function RV(r,e){let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(n),s=n-i.from,o=s>XM?-1:s==i.length?VTe(r,e.clientX):rm(i.text,r.state.tabSize,n-i.from);return{line:i.number,col:o,off:s}}function LTe(r,e){let n=RV(r,e),i=r.state.selection;return n?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(n.line).from),a=s.state.doc.lineAt(o);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},i=i.map(s.changes)}},get(s,o,a){let c=RV(r,s);if(!c)return i;let h=$Te(r.state,n,c);return h.length?a?Ke.create(h.concat(i.ranges)):Ke.create(h):i}}:null}function BTe(r){let e=n=>n.altKey&&n.button==0;return bt.mouseSelectionStyle.of((n,i)=>e(i)?LTe(n,i):null)}const UTe={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},FTe={style:"cursor: crosshair"};function zTe(r={}){let[e,n]=UTe[r.key||"Alt"],i=dr.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||n(s))},keyup(s){(s.keyCode==e||!n(s))&&this.set(!1)},mousemove(s){this.set(n(s))}}});return[i,bt.contentAttributes.of(s=>{var o;return!((o=s.plugin(i))===null||o===void 0)&&o.isDown?FTe:null})]}const s0="-10000px";class dW{constructor(e,n,i,s){this.facet=n,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(n),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=i(a,o))}update(e,n){var i;let s=e.state.facet(this.facet),o=s.filter(h=>h);if(s===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let a=[],c=n?[]:null;for(let h=0;h<o.length;h++){let d=o[h],f=-1;if(d){for(let p=0;p<this.tooltips.length;p++){let g=this.tooltips[p];g&&g.create==d.create&&(f=p)}if(f<0)a[h]=this.createTooltipView(d,h?a[h-1]:null),c&&(c[h]=!!d.above);else{let p=a[h]=this.tooltipViews[f];c&&(c[h]=n[f]),p.update&&p.update(e)}}}for(let h of this.tooltipViews)a.indexOf(h)<0&&(this.removeTooltipView(h),(i=h.destroy)===null||i===void 0||i.call(h));return n&&(c.forEach((h,d)=>n[d]=h),n.length=c.length),this.input=s,this.tooltips=o,this.tooltipViews=a,!0}}function XTe(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const z2=St.define({combine:r=>{var e,n,i;return{position:kt.ios?"absolute":((e=r.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=r.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=r.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||XTe}}}),IV=new WeakMap,eA=dr.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(z2);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new dW(r,tA,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let n=e||r.geometryChanged,i=r.state.facet(z2);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(r,e){let n=r.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),r.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",n.dom.appendChild(s)}return n.dom.style.position=this.position,n.dom.style.top=s0,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var r,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(r=i.destroy)===null||r===void 0||r.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,n=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(kt.gecko)i=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==s0&&s.style.left=="0px"){let o=s.getBoundingClientRect();i=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(i||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,n=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(z2).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:i}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let c of this.manager.tooltipViews)c.dom.style.position="absolute"}let{editor:n,space:i,scaleX:s,scaleY:o}=r,a=[];for(let c=0;c<this.manager.tooltips.length;c++){let h=this.manager.tooltips[c],d=this.manager.tooltipViews[c],{dom:f}=d,p=r.pos[c],g=r.size[c];if(!p||p.bottom<=Math.max(n.top,i.top)||p.top>=Math.min(n.bottom,i.bottom)||p.right<Math.max(n.left,i.left)-.1||p.left>Math.min(n.right,i.right)+.1){f.style.top=s0;continue}let y=h.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,b=y?7:0,w=g.right-g.left,x=(e=IV.get(d))!==null&&e!==void 0?e:g.bottom-g.top,S=d.offset||QTe,_=this.view.textDirection==Sn.LTR,O=g.width>i.right-i.left?_?i.left:i.right-g.width:_?Math.max(i.left,Math.min(p.left-(y?14:0)+S.x,i.right-w)):Math.min(Math.max(i.left,p.left-w+(y?14:0)-S.x),i.right-w),T=this.above[c];!h.strictSide&&(T?p.top-(g.bottom-g.top)-S.y<i.top:p.bottom+(g.bottom-g.top)+S.y>i.bottom)&&T==i.bottom-p.bottom>p.top-i.top&&(T=this.above[c]=!T);let E=(T?p.top-i.top:i.bottom-p.bottom)-b;if(E<x&&d.resize!==!1){if(E<this.view.defaultLineHeight){f.style.top=s0;continue}IV.set(d,x),f.style.height=(x=E)/o+"px"}else f.style.height&&(f.style.height="");let P=T?p.top-x-b-S.y:p.bottom+b+S.y,I=O+w;if(d.overlap!==!0)for(let A of a)A.left<I&&A.right>O&&A.top<P+x&&A.bottom>P&&(P=T?A.top-x-2-b:A.bottom+b+2);if(this.position=="absolute"?(f.style.top=(P-r.parent.top)/o+"px",f.style.left=(O-r.parent.left)/s+"px"):(f.style.top=P/o+"px",f.style.left=O/s+"px"),y){let A=p.left+(_?S.x:-S.x)-(O+14-7);y.style.left=A/s+"px"}d.overlap!==!0&&a.push({left:O,top:P,right:I,bottom:P+x}),f.classList.toggle("cm-tooltip-above",T),f.classList.toggle("cm-tooltip-below",!T),d.positioned&&d.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=s0}},{eventObservers:{scroll(){this.maybeMeasure()}}}),WTe=bt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),QTe={x:0,y:0},tA=St.define({enables:[eA,WTe]}),UO=St.define({combine:r=>r.reduce((e,n)=>e.concat(n),[])});class __{static create(e){return new __(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new dW(e,UO,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(n===void 0)n=s;else if(n!==s)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const HTe=tA.compute([UO],r=>{let e=r.facet(UO);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:__.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class GTe{constructor(e,n,i,s,o){this.view=e,this.source=n,this.field=i,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let s,o=1;if(i instanceof mh)s=i.posAtStart;else{if(s=e.posAtCoords(n),s==null)return;let c=e.coordsAtPos(s);if(!c||n.y<c.top||n.y>c.bottom||n.x<c.left-e.defaultCharacterWidth||n.x>c.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(s)).find(f=>f.from<=s&&f.to>=s),d=h&&h.dir==Sn.RTL?-1:1;o=n.x<c.left?-d:d}let a=this.source(e,s,o);if(a!=null&&a.then){let c=this.pending={pos:s};a.then(h=>{this.pending==c&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>Ks(e.state,h,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(eA),n=e?e.manager.tooltips.findIndex(i=>i.create==__.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!YTe(o.dom,e)||this.pending){let{pos:a}=s[0]||this.pending,c=(i=(n=s[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:a;(a==c?this.view.posAtCoords(this.lastMove)!=a:!jTe(this.view,a,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tx=4;function YTe(r,e){let{left:n,right:i,top:s,bottom:o}=r.getBoundingClientRect(),a;if(a=r.querySelector(".cm-tooltip-arrow")){let c=a.getBoundingClientRect();s=Math.min(c.top,s),o=Math.max(c.bottom,o)}return e.clientX>=n-tx&&e.clientX<=i+tx&&e.clientY>=s-tx&&e.clientY<=o+tx}function jTe(r,e,n,i,s,o){let a=r.scrollDOM.getBoundingClientRect(),c=r.documentTop+r.documentPadding.top+r.contentHeight;if(a.left>i||a.right<i||a.top>s||Math.min(a.bottom,c)<s)return!1;let h=r.posAtCoords({x:i,y:s},!1);return h>=e&&h<=n}function qTe(r,e={}){let n=bi.define(),i=Gr.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(a=>!e.hideOn(o,a))),o.docChanged)){let a=[];for(let c of s){let h=o.changes.mapPos(c.pos,-1,ws.TrackDel);if(h!=null){let d=Object.assign(Object.create(null),c);d.pos=h,d.end!=null&&(d.end=o.changes.mapPos(d.end)),a.push(d)}}s=a}for(let a of o.effects)a.is(n)&&(s=a.value),a.is(ZTe)&&(s=[]);return s},provide:s=>UO.from(s)});return{active:i,extension:[i,dr.define(s=>new GTe(s,r,i,n,e.hoverTime||300)),HTe]}}function fW(r,e){let n=r.plugin(eA);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const ZTe=bi.define(),DV=St.define({combine(r){let e,n;for(let i of r)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Vy(r,e){let n=r.plugin(pW),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const pW=dr.fromClass(class{constructor(r){this.input=r.state.facet(Ly),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(r));let e=r.state.facet(DV);this.top=new ix(r,!0,e.topContainer),this.bottom=new ix(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(r){let e=r.state.facet(DV);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ix(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ix(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=r.state.facet(Ly);if(n!=this.input){let i=n.filter(h=>h),s=[],o=[],a=[],c=[];for(let h of i){let d=this.specs.indexOf(h),f;d<0?(f=h(r.view),c.push(f)):(f=this.panels[d],f.update&&f.update(r)),s.push(f),(f.top?o:a).push(f)}this.specs=i,this.panels=s,this.top.sync(o),this.bottom.sync(a);for(let h of c)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>bt.scrollMargins.of(e=>{let n=e.plugin(r);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class ix{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=NV(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=NV(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function NV(r){let e=r.nextSibling;return r.remove(),e}const Ly=St.define({enables:pW});class pc extends vd{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}pc.prototype.elementClass="";pc.prototype.toDOM=void 0;pc.prototype.mapMode=ws.TrackBefore;pc.prototype.startSide=pc.prototype.endSide=-1;pc.prototype.point=!0;const Kx=St.define(),KTe=St.define(),JTe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Fi.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},j0=St.define();function eMe(r){return[mW(),j0.of(Object.assign(Object.assign({},JTe),r))]}const $V=St.define({combine:r=>r.some(e=>e)});function mW(r){return[tMe]}const tMe=dr.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(j0).map(e=>new LV(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet($V),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,n=r.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet($V)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let n=Fi.iter(this.view.state.facet(Kx),this.view.viewport.from),i=[],s=this.gutters.map(o=>new iMe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let a=!0;for(let c of o.type)if(c.type==Ts.Text&&a){WM(n,i,c.from);for(let h of s)h.line(this.view,c,i);a=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(o.type==Ts.Text){WM(n,i,o.from);for(let a of s)a.line(this.view,o,i)}else if(o.widget)for(let a of s)a.widget(this.view,o);for(let o of s)o.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(j0),n=r.state.facet(j0),i=r.docChanged||r.heightChanged||r.viewportChanged||!Fi.eq(r.startState.facet(Kx),r.state.facet(Kx),r.view.viewport.from,r.view.viewport.to);if(e==n)for(let s of this.gutters)s.update(r)&&(i=!0);else{i=!0;let s=[];for(let o of n){let a=e.indexOf(o);a<0?s.push(new LV(this.view,o)):(this.gutters[a].update(r),s.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)this.dom.appendChild(o.dom);this.gutters=s}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>bt.scrollMargins.of(e=>{let n=e.plugin(r);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Sn.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function VV(r){return Array.isArray(r)?r:[r]}function WM(r,e,n){for(;r.value&&r.from<=n;)r.from==n&&e.push(r.value),r.next()}class iMe{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Fi.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:s}=this,o=(n.top-this.height)/e.scaleY,a=n.height/e.scaleY;if(this.i==s.elements.length){let c=new gW(e,a,o,i);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,a,o,i);this.height=n.bottom,this.i++}line(e,n,i){let s=[];WM(this.cursor,s,n.from),i.length&&(s=s.concat(i));let o=this.gutter.config.lineMarker(e,n,s);o&&s.unshift(o);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,s)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),s=i?[i]:null;for(let o of e.state.facet(KTe)){let a=o(e,n.widget,n);a&&(s||(s=[])).push(a)}s&&this.addElement(e,n,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class LV{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,s=>{let o=s.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let h=o.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[i](e,c,s)&&s.preventDefault()});this.markers=VV(n.markers(e)),n.initialSpacer&&(this.spacer=new gW(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=VV(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Fi.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class gW{constructor(e,n,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,s)}update(e,n,i,s){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),nMe(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,n){let i="cm-gutterElement",s=this.dom.firstChild;for(let o=0,a=0;;){let c=a,h=o<n.length?n[o++]:null,d=!1;if(h){let f=h.elementClass;f&&(i+=" "+f);for(let p=a;p<this.markers.length;p++)if(this.markers[p].compare(h)){c=p,d=!0;break}}else c=this.markers.length;for(;a<c;){let f=this.markers[a++];if(f.toDOM){f.destroy(s);let p=s.nextSibling;s.remove(),s=p}}if(!h)break;h.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),d&&a++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function nMe(r,e){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!r[n].compare(e[n]))return!1;return!0}const rMe=St.define(),sMe=St.define(),Ff=St.define({combine(r){return vl(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let s in n){let o=i[s],a=n[s];i[s]=o?(c,h,d)=>o(c,h,d)||a(c,h,d):a}return i}})}});class X2 extends pc{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function W2(r,e){return r.state.facet(Ff).formatNumber(e,r.state)}const oMe=j0.compute([Ff],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(rMe)},lineMarker(e,n,i){return i.some(s=>s.toDOM)?null:new X2(W2(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let s of e.state.facet(sMe)){let o=s(e,n,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Ff)!=e.state.facet(Ff),initialSpacer(e){return new X2(W2(e,BV(e.state.doc.lines)))},updateSpacer(e,n){let i=W2(n.view,BV(n.view.state.doc.lines));return i==e.number?e:new X2(i)},domEventHandlers:r.facet(Ff).domEventHandlers}));function aMe(r={}){return[Ff.of(r),mW(),oMe]}function BV(r){let e=9;for(;e<r;)e=e*10+9;return e}const lMe=new class extends pc{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},cMe=Kx.compute(["selection"],r=>{let e=[],n=-1;for(let i of r.selection.ranges){let s=r.doc.lineAt(i.head).from;s>n&&(n=s,e.push(lMe.range(s)))}return Fi.of(e)});function hMe(){return cMe}const yW=1024;let uMe=0;class Q2{constructor(e,n){this.from=e,this.to=n}}class wi{constructor(e={}){this.id=uMe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=io.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}wi.closedBy=new wi({deserialize:r=>r.split(" ")});wi.openedBy=new wi({deserialize:r=>r.split(" ")});wi.group=new wi({deserialize:r=>r.split(" ")});wi.isolate=new wi({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});wi.contextHash=new wi({perNode:!0});wi.lookAhead=new wi({perNode:!0});wi.mounted=new wi({perNode:!0});class FO{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[wi.mounted.id]}}const dMe=Object.create(null);class io{constructor(e,n,i,s=0){this.name=e,this.props=n,this.id=i,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):dMe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new io(e.name||"",n,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(wi.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let s of i.split(" "))n[s]=e[i];return i=>{for(let s=i.prop(wi.group),o=-1;o<(s?s.length:0);o++){let a=n[o<0?i.name:s[o]];if(a)return a}}}}io.none=new io("",Object.create(null),0,8);class iA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let s=null;for(let o of e){let a=o(i);a&&(s||(s=Object.assign({},i.props)),s[a[0].id]=a[1])}n.push(s?new io(i.name,s,i.id,i.flags):i)}return new iA(n)}}const nx=new WeakMap,UV=new WeakMap;var Ir;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Ir||(Ir={}));class lr{constructor(e,n,i,s,o){if(this.type=e,this.children=n,this.positions=i,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,c]of o)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=FO.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let s=i.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new HM(this.topNode,e)}cursorAt(e,n=0,i=0){let s=nx.get(this)||this.topNode,o=new HM(s);return o.moveTo(e,n),nx.set(this,o._tree),o}get topNode(){return new ea(this,0,0,null)}resolve(e,n=0){let i=By(nx.get(this)||this.topNode,e,n,!1);return nx.set(this,i),i}resolveInner(e,n=0){let i=By(UV.get(this)||this.topNode,e,n,!0);return UV.set(this,i),i}resolveStack(e,n=0){return mMe(this,e,n)}iterate(e){let{enter:n,leave:i,from:s=0,to:o=this.length}=e,a=e.mode||0,c=(a&Ir.IncludeAnonymous)>0;for(let h=this.cursor(a|Ir.IncludeAnonymous);;){let d=!1;if(h.from<=o&&h.to>=s&&(!c&&h.type.isAnonymous||n(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&i&&(c||!h.type.isAnonymous)&&i(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:sA(io.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,s)=>new lr(this.type,n,i,s,this.propValues),e.makeTree||((n,i,s)=>new lr(io.none,n,i,s)))}static build(e){return gMe(e)}}lr.empty=new lr(io.none,[],[],0);class nA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new nA(this.buffer,this.index)}}class Vh{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return io.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],s=this.set.types[n],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,n,i,s,o){let{buffer:a}=this,c=-1;for(let h=e;h!=n&&!(vW(o,s,a[h+1],a[h+2])&&(c=h,i>0));h=a[h+3]);return c}slice(e,n,i){let s=this.buffer,o=new Uint16Array(n-e),a=0;for(let c=e,h=0;c<n;){o[h++]=s[c++],o[h++]=s[c++]-i;let d=o[h++]=s[c++]-i;o[h++]=s[c++]-e,a=Math.max(a,d)}return new Vh(o,a,this.set)}}function vW(r,e,n,i){switch(r){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function By(r,e,n,i){for(var s;r.from==r.to||(n<1?r.from>=e:r.from>e)||(n>-1?r.to<=e:r.to<e);){let a=!i&&r instanceof ea&&r.index<0?null:r.parent;if(!a)return r;r=a}let o=i?0:Ir.IgnoreOverlays;if(i)for(let a=r,c=a.parent;c;a=c,c=a.parent)a instanceof ea&&a.index<0&&((s=c.enter(e,n,o))===null||s===void 0?void 0:s.from)!=a.from&&(r=c);for(;;){let a=r.enter(e,n,o);if(!a)return r;r=a}}class bW{cursor(e=0){return new HM(this,e)}getChild(e,n=null,i=null){let s=FV(this,e,n,i);return s.length?s[0]:null}getChildren(e,n=null,i=null){return FV(this,e,n,i)}resolve(e,n=0){return By(this,e,n,!1)}resolveInner(e,n=0){return By(this,e,n,!0)}matchContext(e){return QM(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(i=n,n=s.prevSibling):n=s}return i}get node(){return this}get next(){return this.parent}}class ea extends bW{constructor(e,n,i,s){super(),this._tree=e,this.from=n,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,s,o=0){for(let a=this;;){for(let{children:c,positions:h}=a._tree,d=n>0?c.length:-1;e!=d;e+=n){let f=c[e],p=h[e]+a.from;if(vW(s,i,p,p+f.length)){if(f instanceof Vh){if(o&Ir.ExcludeBuffers)continue;let g=f.findChild(0,f.buffer.length,n,i-p,s);if(g>-1)return new yh(new fMe(a,f,e,p),null,g)}else if(o&Ir.IncludeAnonymous||!f.type.isAnonymous||rA(f)){let g;if(!(o&Ir.IgnoreMounts)&&(g=FO.get(f))&&!g.overlay)return new ea(g.tree,p,e,a);let y=new ea(f,p,e,a);return o&Ir.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(n<0?f.children.length-1:0,n,i,s)}}}if(o&Ir.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+n:e=n<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let s;if(!(i&Ir.IgnoreOverlays)&&(s=FO.get(this._tree))&&s.overlay){let o=e-this.from;for(let{from:a,to:c}of s.overlay)if((n>0?a<=o:a<o)&&(n<0?c>=o:c>o))return new ea(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function FV(r,e,n,i){let s=r.cursor(),o=[];if(!s.firstChild())return o;if(n!=null){for(let a=!1;!a;)if(a=s.type.is(n),!s.nextSibling())return o}for(;;){if(i!=null&&s.type.is(i))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return i==null?o:[]}}function QM(r,e,n=e.length-1){for(let i=r.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class fMe{constructor(e,n,i,s){this.parent=e,this.buffer=n,this.index=i,this.start=s}}class yh extends bW{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,i);return o<0?null:new yh(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Ir.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new yh(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new yh(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new yh(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,s=this.index+4,o=i.buffer[this.index+3];if(o>s){let a=i.buffer[this.index+1];e.push(i.slice(s,o,a)),n.push(0)}return new lr(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function xW(r){if(!r.length)return null;let e=0,n=r[0];for(let o=1;o<r.length;o++){let a=r[o];(a.from>n.from||a.to<n.to)&&(n=a,e=o)}let i=n instanceof ea&&n.index<0?null:n.parent,s=r.slice();return i?s[e]=i:s.splice(e,1),new pMe(s,n)}class pMe{constructor(e,n){this.heads=e,this.node=n}get next(){return xW(this.heads)}}function mMe(r,e,n){let i=r.resolveInner(e,n),s=null;for(let o=i instanceof ea?i:i.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(s||(s=[i])).push(a.resolve(e,n)),o=a}else{let a=FO.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new ea(a.tree,a.overlay[0].from+o.from,-1,o);(s||(s=[i])).push(By(c,e,n,!1))}}return s?xW(s):i}class HM{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ea)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof ea?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Ir.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ir.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ir.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:i}=s)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let o=n+e,a=e<0?-1:i._tree.children.length;o!=a;o+=e){let c=i._tree.children[o];if(this.mode&Ir.IncludeAnonymous||c instanceof Vh||!c.type.isAnonymous||rA(c))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;n=a,i=o+1;break e}s=this.stack[--o]}for(let s=i;s<this.stack.length;s++)n=new yh(this.buffer,n,this.stack[s]);return this.bufferNode=new yh(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&n&&n(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return QM(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return QM(this.node,e,s);let a=i[n.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function rA(r){return r.children.some(e=>e instanceof Vh||!e.type.isAnonymous||rA(e))}function gMe(r){var e;let{buffer:n,nodeSet:i,maxBufferLength:s=yW,reused:o=[],minRepeatType:a=i.types.length}=r,c=Array.isArray(n)?new nA(n,n.length):n,h=i.types,d=0,f=0;function p(E,P,I,A,D,M){let{id:$,start:L,end:N,size:V}=c,U=f;for(;V<0;)if(c.next(),V==-1){let he=o[$];I.push(he),A.push(L-E);return}else if(V==-3){d=$;return}else if(V==-4){f=$;return}else throw new RangeError(`Unrecognized record size: ${V}`);let F=h[$],H,K,ie=L-E;if(N-L<=s&&(K=x(c.pos-P,D))){let he=new Uint16Array(K.size-K.skip),me=c.pos-K.size,Pe=he.length;for(;c.pos>me;)Pe=S(K.start,he,Pe);H=new Vh(he,N-K.start,i),ie=K.start-E}else{let he=c.pos-V;c.next();let me=[],Pe=[],_e=$>=a?$:-1,ue=0,Se=N;for(;c.pos>he;)_e>=0&&c.id==_e&&c.size>=0?(c.end<=Se-s&&(b(me,Pe,L,ue,c.end,Se,_e,U),ue=me.length,Se=c.end),c.next()):M>2500?g(L,he,me,Pe):p(L,he,me,Pe,_e,M+1);if(_e>=0&&ue>0&&ue<me.length&&b(me,Pe,L,ue,L,Se,_e,U),me.reverse(),Pe.reverse(),_e>-1&&ue>0){let ke=y(F);H=sA(F,me,Pe,0,me.length,0,N-L,ke,ke)}else H=w(F,me,Pe,N-L,U-N)}I.push(H),A.push(ie)}function g(E,P,I,A){let D=[],M=0,$=-1;for(;c.pos>P;){let{id:L,start:N,end:V,size:U}=c;if(U>4)c.next();else{if($>-1&&N<$)break;$<0&&($=V-s),D.push(L,N,V),M++,c.next()}}if(M){let L=new Uint16Array(M*4),N=D[D.length-2];for(let V=D.length-3,U=0;V>=0;V-=3)L[U++]=D[V],L[U++]=D[V+1]-N,L[U++]=D[V+2]-N,L[U++]=U;I.push(new Vh(L,D[2]-N,i)),A.push(N-E)}}function y(E){return(P,I,A)=>{let D=0,M=P.length-1,$,L;if(M>=0&&($=P[M])instanceof lr){if(!M&&$.type==E&&$.length==A)return $;(L=$.prop(wi.lookAhead))&&(D=I[M]+$.length+L)}return w(E,P,I,A,D)}}function b(E,P,I,A,D,M,$,L){let N=[],V=[];for(;E.length>A;)N.push(E.pop()),V.push(P.pop()+I-D);E.push(w(i.types[$],N,V,M-D,L-M)),P.push(D-I)}function w(E,P,I,A,D=0,M){if(d){let $=[wi.contextHash,d];M=M?[$].concat(M):[$]}if(D>25){let $=[wi.lookAhead,D];M=M?[$].concat(M):[$]}return new lr(E,P,I,A,M)}function x(E,P){let I=c.fork(),A=0,D=0,M=0,$=I.end-s,L={size:0,start:0,skip:0};e:for(let N=I.pos-E;I.pos>N;){let V=I.size;if(I.id==P&&V>=0){L.size=A,L.start=D,L.skip=M,M+=4,A+=4,I.next();continue}let U=I.pos-V;if(V<0||U<N||I.start<$)break;let F=I.id>=a?4:0,H=I.start;for(I.next();I.pos>U;){if(I.size<0)if(I.size==-3)F+=4;else break e;else I.id>=a&&(F+=4);I.next()}D=H,A+=V,M+=F}return(P<0||A==E)&&(L.size=A,L.start=D,L.skip=M),L.size>4?L:void 0}function S(E,P,I){let{id:A,start:D,end:M,size:$}=c;if(c.next(),$>=0&&A<a){let L=I;if($>4){let N=c.pos-($-4);for(;c.pos>N;)I=S(E,P,I)}P[--I]=L,P[--I]=M-E,P[--I]=D-E,P[--I]=A}else $==-3?d=A:$==-4&&(f=A);return I}let _=[],O=[];for(;c.pos>0;)p(r.start||0,r.bufferStart||0,_,O,-1,0);let T=(e=r.length)!==null&&e!==void 0?e:_.length?O[0]+_[0].length:0;return new lr(h[r.topID],_.reverse(),O.reverse(),T)}const zV=new WeakMap;function Jx(r,e){if(!r.isAnonymous||e instanceof Vh||e.type!=r)return 1;let n=zV.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=r||!(i instanceof lr)){n=1;break}n+=Jx(r,i)}zV.set(e,n)}return n}function sA(r,e,n,i,s,o,a,c,h){let d=0;for(let b=i;b<s;b++)d+=Jx(r,e[b]);let f=Math.ceil(d*1.5/8),p=[],g=[];function y(b,w,x,S,_){for(let O=x;O<S;){let T=O,E=w[O],P=Jx(r,b[O]);for(O++;O<S;O++){let I=Jx(r,b[O]);if(P+I>=f)break;P+=I}if(O==T+1){if(P>f){let I=b[T];y(I.children,I.positions,0,I.children.length,w[T]+_);continue}p.push(b[T])}else{let I=w[O-1]+b[O-1].length-E;p.push(sA(r,b,w,T,O,E,I,null,h))}g.push(E+_-o)}}return y(e,n,i,s,0),(c||h)(p,g,a)}class ld{constructor(e,n,i,s,o=!1,a=!1){this.from=e,this.to=n,this.tree=i,this.offset=s,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let s=[new ld(0,e.length,e,0,!1,i)];for(let o of n)o.to>e.length&&s.push(o);return s}static applyChanges(e,n,i=128){if(!n.length)return e;let s=[],o=1,a=e.length?e[0]:null;for(let c=0,h=0,d=0;;c++){let f=c<n.length?n[c]:null,p=f?f.fromA:1e9;if(p-h>=i)for(;a&&a.from<p;){let g=a;if(h>=g.from||p<=g.to||d){let y=Math.max(g.from,h)-d,b=Math.min(g.to,p)-d;g=y>=b?null:new ld(y,b,g.tree,g.offset+d,c>0,!!f)}if(g&&s.push(g),a.to>p)break;a=o<e.length?e[o++]:null}if(!f)break;h=f.toA,d=f.toA-f.toB}return s}}class OW{startParse(e,n,i){return typeof e=="string"&&(e=new yMe(e)),i=i?i.length?i.map(s=>new Q2(s.from,s.to)):[new Q2(0,0)]:[new Q2(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let s=this.startParse(e,n,i);for(;;){let o=s.advance();if(o)return o}}}class yMe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new wi({perNode:!0});let vMe=0;class Xo{constructor(e,n,i,s){this.name=e,this.set=n,this.base=i,this.modified=s,this.id=vMe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Xo&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let s=new Xo(i,[],null,[]);if(s.set.push(s),n)for(let o of n.set)s.set.push(o);return s}static defineModifier(e){let n=new zO(e);return i=>i.modified.indexOf(n)>-1?i:zO.get(i.base||i,i.modified.concat(n).sort((s,o)=>s.id-o.id))}}let bMe=0;class zO{constructor(e){this.name=e,this.instances=[],this.id=bMe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(c=>c.base==e&&xMe(n,c.modified));if(i)return i;let s=[],o=new Xo(e.name,s,e,n);for(let c of n)c.instances.push(o);let a=OMe(n);for(let c of e.set)if(!c.modified.length)for(let h of a)s.push(zO.get(c,h));return o}}function xMe(r,e){return r.length==e.length&&r.every((n,i)=>n==e[i])}function OMe(r){let e=[[]];for(let n=0;n<r.length;n++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(r[n]));return e.sort((n,i)=>i.length-n.length)}function wW(r){let e=Object.create(null);for(let n in r){let i=r[n];Array.isArray(i)||(i=[i]);for(let s of n.split(" "))if(s){let o=[],a=2,c=s;for(let p=0;;){if(c=="..."&&p>0&&p+3==s.length){a=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!g)throw new RangeError("Invalid path: "+s);if(o.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),p+=g[0].length,p==s.length)break;let y=s[p++];if(p==s.length&&y=="!"){a=0;break}if(y!="/")throw new RangeError("Invalid path: "+s);c=s.slice(p)}let h=o.length-1,d=o[h];if(!d)throw new RangeError("Invalid path: "+s);let f=new XO(i,a,h>0?o.slice(0,h):null);e[d]=f.sort(e[d])}}return _W.add(e)}const _W=new wi;class XO{constructor(e,n,i,s){this.tags=e,this.mode=n,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}XO.empty=new XO([],2,null);function SW(r,e){let n=Object.create(null);for(let o of r)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let a of o.tag)n[a.id]=o.class;let{scope:i,all:s=null}=e||{};return{style:o=>{let a=s;for(let c of o)for(let h of c.set){let d=n[h.id];if(d){a=a?a+" "+d:d;break}}return a},scope:i}}function wMe(r,e){let n=null;for(let i of r){let s=i.style(e);s&&(n=n?n+" "+s:s)}return n}function _Me(r,e,n,i=0,s=r.length){let o=new SMe(i,Array.isArray(e)?e:[e],n);o.highlightRange(r.cursor(),i,s,"",o.highlighters),o.flush(s)}class SMe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,s,o){let{type:a,from:c,to:h}=e;if(c>=i||h<=n)return;a.isTop&&(o=this.highlighters.filter(y=>!y.scope||y.scope(a)));let d=s,f=CMe(e)||XO.empty,p=wMe(o,f.tags);if(p&&(d&&(d+=" "),d+=p,f.mode==1&&(s+=(s?" ":"")+p)),this.startSpan(Math.max(n,c),d),f.opaque)return;let g=e.tree&&e.tree.prop(wi.mounted);if(g&&g.overlay){let y=e.node.enter(g.overlay[0].from+c,1),b=this.highlighters.filter(x=>!x.scope||x.scope(g.tree.type)),w=e.firstChild();for(let x=0,S=c;;x++){let _=x<g.overlay.length?g.overlay[x]:null,O=_?_.from+c:h,T=Math.max(n,S),E=Math.min(i,O);if(T<E&&w)for(;e.from<E&&(this.highlightRange(e,T,E,s,o),this.startSpan(Math.min(E,e.to),d),!(e.to>=O||!e.nextSibling())););if(!_||O>i)break;S=_.to+c,S>n&&(this.highlightRange(y.cursor(),Math.max(n,_.from+c),Math.min(i,S),"",b),this.startSpan(Math.min(i,S),d))}w&&e.parent()}else if(e.firstChild()){g&&(s="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,s,o),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function CMe(r){let e=r.type.prop(_W);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const dt=Xo.define,rx=dt(),ah=dt(),XV=dt(ah),WV=dt(ah),lh=dt(),sx=dt(lh),H2=dt(lh),Ya=dt(),Mu=dt(Ya),Ha=dt(),Ga=dt(),GM=dt(),o0=dt(GM),ox=dt(),He={comment:rx,lineComment:dt(rx),blockComment:dt(rx),docComment:dt(rx),name:ah,variableName:dt(ah),typeName:XV,tagName:dt(XV),propertyName:WV,attributeName:dt(WV),className:dt(ah),labelName:dt(ah),namespace:dt(ah),macroName:dt(ah),literal:lh,string:sx,docString:dt(sx),character:dt(sx),attributeValue:dt(sx),number:H2,integer:dt(H2),float:dt(H2),bool:dt(lh),regexp:dt(lh),escape:dt(lh),color:dt(lh),url:dt(lh),keyword:Ha,self:dt(Ha),null:dt(Ha),atom:dt(Ha),unit:dt(Ha),modifier:dt(Ha),operatorKeyword:dt(Ha),controlKeyword:dt(Ha),definitionKeyword:dt(Ha),moduleKeyword:dt(Ha),operator:Ga,derefOperator:dt(Ga),arithmeticOperator:dt(Ga),logicOperator:dt(Ga),bitwiseOperator:dt(Ga),compareOperator:dt(Ga),updateOperator:dt(Ga),definitionOperator:dt(Ga),typeOperator:dt(Ga),controlOperator:dt(Ga),punctuation:GM,separator:dt(GM),bracket:o0,angleBracket:dt(o0),squareBracket:dt(o0),paren:dt(o0),brace:dt(o0),content:Ya,heading:Mu,heading1:dt(Mu),heading2:dt(Mu),heading3:dt(Mu),heading4:dt(Mu),heading5:dt(Mu),heading6:dt(Mu),contentSeparator:dt(Ya),list:dt(Ya),quote:dt(Ya),emphasis:dt(Ya),strong:dt(Ya),link:dt(Ya),monospace:dt(Ya),strikethrough:dt(Ya),inserted:dt(),deleted:dt(),changed:dt(),invalid:dt(),meta:ox,documentMeta:dt(ox),annotation:dt(ox),processingInstruction:dt(ox),definition:Xo.defineModifier("definition"),constant:Xo.defineModifier("constant"),function:Xo.defineModifier("function"),standard:Xo.defineModifier("standard"),local:Xo.defineModifier("local"),special:Xo.defineModifier("special")};for(let r in He){let e=He[r];e instanceof Xo&&(e.name=r)}SW([{tag:He.link,class:"tok-link"},{tag:He.heading,class:"tok-heading"},{tag:He.emphasis,class:"tok-emphasis"},{tag:He.strong,class:"tok-strong"},{tag:He.keyword,class:"tok-keyword"},{tag:He.atom,class:"tok-atom"},{tag:He.bool,class:"tok-bool"},{tag:He.url,class:"tok-url"},{tag:He.labelName,class:"tok-labelName"},{tag:He.inserted,class:"tok-inserted"},{tag:He.deleted,class:"tok-deleted"},{tag:He.literal,class:"tok-literal"},{tag:He.string,class:"tok-string"},{tag:He.number,class:"tok-number"},{tag:[He.regexp,He.escape,He.special(He.string)],class:"tok-string2"},{tag:He.variableName,class:"tok-variableName"},{tag:He.local(He.variableName),class:"tok-variableName tok-local"},{tag:He.definition(He.variableName),class:"tok-variableName tok-definition"},{tag:He.special(He.variableName),class:"tok-variableName2"},{tag:He.definition(He.propertyName),class:"tok-propertyName tok-definition"},{tag:He.typeName,class:"tok-typeName"},{tag:He.namespace,class:"tok-namespace"},{tag:He.className,class:"tok-className"},{tag:He.macroName,class:"tok-macroName"},{tag:He.propertyName,class:"tok-propertyName"},{tag:He.operator,class:"tok-operator"},{tag:He.comment,class:"tok-comment"},{tag:He.meta,class:"tok-meta"},{tag:He.invalid,class:"tok-invalid"},{tag:He.punctuation,class:"tok-punctuation"}]);var G2;const zf=new wi;function kMe(r){return St.define({combine:r?e=>e.concat(r):void 0})}const TMe=new wi;class Ta{constructor(e,n,i=[],s=""){this.data=e,this.name=s,Xi.prototype.hasOwnProperty("tree")||Object.defineProperty(Xi.prototype,"tree",{get(){return os(this)}}),this.parser=n,this.extension=[Lh.of(this),Xi.languageData.of((o,a,c)=>{let h=QV(o,a,c),d=h.type.prop(zf);if(!d)return[];let f=o.facet(d),p=h.type.prop(TMe);if(p){let g=h.resolve(a-h.from,c);for(let y of p)if(y.test(g,o)){let b=o.facet(y.facet);return y.type=="replace"?b:b.concat(f)}}return f})].concat(i)}isActiveAt(e,n,i=-1){return QV(e,n,i).type.prop(zf)==this.data}findRegions(e){let n=e.facet(Lh);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],s=(o,a)=>{if(o.prop(zf)==this.data){i.push({from:a,to:a+o.length});return}let c=o.prop(wi.mounted);if(c){if(c.tree.prop(zf)==this.data){if(c.overlay)for(let h of c.overlay)i.push({from:h.from+a,to:h.to+a});else i.push({from:a,to:a+o.length});return}else if(c.overlay){let h=i.length;if(s(c.tree,c.overlay[0].from+a),i.length>h)return}}for(let h=0;h<o.children.length;h++){let d=o.children[h];d instanceof lr&&s(d,o.positions[h]+a)}};return s(os(e),0),i}get allowsNesting(){return!0}}Ta.setState=bi.define();function QV(r,e,n){let i=r.facet(Lh),s=os(r).topNode;if(!i||i.allowsNesting)for(let o=s;o;o=o.enter(e,n,Ir.ExcludeBuffers))o.type.isTop&&(s=o);return s}class WO extends Ta{constructor(e,n,i){super(e,n,[],i),this.parser=n}static define(e){let n=kMe(e.languageData);return new WO(n,e.parser.configure({props:[zf.add(i=>i.isTop?n:void 0)]}),e.name)}configure(e,n){return new WO(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function os(r){let e=r.field(Ta.state,!1);return e?e.tree:lr.empty}class MMe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let a0=null;class QO{constructor(e,n,i=[],s,o,a,c,h){this.parser=e,this.state=n,this.fragments=i,this.tree=s,this.treeLen=o,this.viewport=a,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new QO(e,n,[],lr.empty,0,i,[],null)}startParse(){return this.parser.startParse(new MMe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=lr.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(ld.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ld.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=a0;a0=this;try{return e()}finally{a0=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=HV(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:s,treeLen:o,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,f,p,g)=>h.push({fromA:d,toA:f,fromB:p,toB:g})),i=ld.applyChanges(i,h),s=lr.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let f=e.mapPos(d.from,1),p=e.mapPos(d.to,-1);f<p&&c.push({from:f,to:p})}}}return new QO(this.parser,n,i,s,o,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:o}=this.skipped[i];s<e.to&&o>e.from&&(this.fragments=HV(this.fragments,s,o),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends OW{createParse(n,i,s){let o=s[0].from,a=s[s.length-1].to;return{parsedPos:o,advance(){let h=a0;if(h){for(let d of s)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new lr(io.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return a0}}function HV(r,e,n){return ld.applyChanges(r,[{fromA:e,toA:n,fromB:e,toB:n}])}class Up{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Up(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=QO.create(e.facet(Lh).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Up(i)}}Ta.state=Gr.define({create:Up.init,update(r,e){for(let n of e.effects)if(n.is(Ta.setState))return n.value;return e.startState.facet(Lh)!=e.state.facet(Lh)?Up.init(e.state):r.apply(e)}});let CW=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(CW=r=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Y2=typeof navigator<"u"&&(!((G2=navigator.scheduling)===null||G2===void 0)&&G2.isInputPending)?()=>navigator.scheduling.isInputPending():null,EMe=dr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Ta.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Ta.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=CW(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,o=i.field(Ta.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Y2?Math.max(25,e.timeRemaining()-5):1e9),c=o.context.treeLen<s&&i.doc.length>s+1e3,h=o.context.work(()=>Y2&&Y2()||Date.now()>a,s+(c?0:1e5));this.chunkBudget-=Date.now()-n,(h||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Ta.setState.of(new Up(o.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Ks(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Lh=St.define({combine(r){return r.length?r[0]:null},enables:r=>[Ta.state,EMe,bt.contentAttributes.compute([r],e=>{let n=e.facet(r);return n&&n.name?{"data-language":n.name}:{}})]});class PMe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const AMe=St.define(),oA=St.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function HO(r){let e=r.facet(oA);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function Uy(r,e){let n="",i=r.tabSize,s=r.facet(oA)[0];if(s=="	"){for(;e>=i;)n+="	",e-=i;s=" "}for(let o=0;o<e;o++)n+=s;return n}function aA(r,e){r instanceof Xi&&(r=new S_(r));for(let i of r.state.facet(AMe)){let s=i(r,e);if(s!==void 0)return s}let n=os(r.state);return n.length>=e?RMe(r,n,e):null}class S_{constructor(e,n={}){this.state=e,this.options=n,this.unit=HO(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=i.from&&s<=i.to?o&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,n);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,n=1){let{text:i,from:s}=this.lineAt(e,n),o=this.countColumn(i,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(o+=a-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,n=e.length){return rm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:s}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let a=o(s);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const kW=new wi;function RMe(r,e,n){let i=e.resolveStack(n),s=i.node.enterUnfinishedNodesBefore(n);if(s!=i.node){let o=[];for(let a=s;a!=i.node;a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)i={node:o[a],next:i}}return TW(i,r,n)}function TW(r,e,n){for(let i=r;i;i=i.next){let s=DMe(i.node);if(s)return s(lA.create(e,n,i))}return 0}function IMe(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function DMe(r){let e=r.type.prop(kW);if(e)return e;let n=r.firstChild,i;if(n&&(i=n.type.prop(wi.closedBy))){let s=r.lastChild,o=s&&i.indexOf(s.name)>-1;return a=>MW(a,!0,1,void 0,o&&!IMe(a)?s.from:void 0)}return r.parent==null?NMe:null}function NMe(){return 0}class lA extends S_{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new lA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if($Me(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return TW(this.context.next,this.base,this.pos)}}function $Me(r,e){for(let n=e;n;n=n.parent)if(r==n)return!0;return!1}function VMe(r){let e=r.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let s=r.options.simulateBreak,o=r.state.doc.lineAt(n.from),a=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let c=n.to;;){let h=e.childAfter(c);if(!h||h==i)return null;if(!h.type.isSkipped)return h.from<a?n:null;c=h.to}}function LMe({closing:r,align:e=!0,units:n=1}){return i=>MW(i,e,n,r)}function MW(r,e,n,i,s){let o=r.textAfter,a=o.match(/^\s*/)[0].length,c=i&&o.slice(a,a+i.length)==i||s==r.pos+a,h=e?VMe(r):null;return h?c?r.column(h.from):r.column(h.to):r.baseIndent+(c?0:r.unit*n)}const BMe=r=>r.baseIndent;function j2({except:r,units:e=1}={}){return n=>{let i=r&&r.test(n.textAfter);return n.baseIndent+(i?0:e*n.unit)}}const UMe=200;function FMe(){return Xi.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let n=r.newDoc,{head:i}=r.newSelection.main,s=n.lineAt(i);if(i>s.from+UMe)return r;let o=n.sliceString(s.from,i);if(!e.some(d=>d.test(o)))return r;let{state:a}=r,c=-1,h=[];for(let{head:d}of a.selection.ranges){let f=a.doc.lineAt(d);if(f.from==c)continue;c=f.from;let p=aA(a,f.from);if(p==null)continue;let g=/^\s*/.exec(f.text)[0],y=Uy(a,p);g!=y&&h.push({from:f.from,to:f.from+g.length,insert:y})}return h.length?[r,{changes:h,sequential:!0}]:r})}const zMe=St.define(),EW=new wi;function XMe(r){let e=r.firstChild,n=r.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?r.to:n.from}:null}function WMe(r,e,n){let i=os(r);if(i.length<n)return null;let s=i.resolveStack(n,1),o=null;for(let a=s;a;a=a.next){let c=a.node;if(c.to<=n||c.from>n)continue;if(o&&c.from<e)break;let h=c.type.prop(EW);if(h&&(c.to<i.length-50||i.length==r.doc.length||!QMe(c))){let d=h(c,r);d&&d.from<=n&&d.from>=e&&d.to>n&&(o=d)}}return o}function QMe(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function GO(r,e,n){for(let i of r.facet(zMe)){let s=i(r,e,n);if(s)return s}return WMe(r,e,n)}function PW(r,e){let n=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return n>=i?void 0:{from:n,to:i}}const C_=bi.define({map:PW}),Pv=bi.define({map:PW});function AW(r){let e=[];for(let{head:n}of r.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(r.lineBlockAt(n));return e}const wd=Gr.define({create(){return Jt.none},update(r,e){r=r.map(e.changes);for(let n of e.effects)if(n.is(C_)&&!HMe(r,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(DW),s=i?Jt.replace({widget:new JMe(i(e.state,n.value))}):GV;r=r.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(Pv)&&(r=r.update({filter:(i,s)=>n.value.from!=i||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;r.between(i,i,(s,o)=>{s<i&&o>i&&(n=!0)}),n&&(r=r.update({filterFrom:i,filterTo:i,filter:(s,o)=>o<=i||s>=i}))}return r},provide:r=>bt.decorations.from(r),toJSON(r,e){let n=[];return r.between(0,e.doc.length,(i,s)=>{n.push(i,s)}),n},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<r.length;){let i=r[n++],s=r[n++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(GV.range(i,s))}return Jt.set(e,!0)}});function YO(r,e,n){var i;let s=null;return(i=r.field(wd,!1))===null||i===void 0||i.between(e,n,(o,a)=>{(!s||s.from>o)&&(s={from:o,to:a})}),s}function HMe(r,e,n){let i=!1;return r.between(e,e,(s,o)=>{s==e&&o==n&&(i=!0)}),i}function RW(r,e){return r.field(wd,!1)?e:e.concat(bi.appendConfig.of(NW()))}const GMe=r=>{for(let e of AW(r)){let n=GO(r.state,e.from,e.to);if(n)return r.dispatch({effects:RW(r.state,[C_.of(n),IW(r,n)])}),!0}return!1},YMe=r=>{if(!r.state.field(wd,!1))return!1;let e=[];for(let n of AW(r)){let i=YO(r.state,n.from,n.to);i&&e.push(Pv.of(i),IW(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function IW(r,e,n=!0){let i=r.state.doc.lineAt(e.from).number,s=r.state.doc.lineAt(e.to).number;return bt.announce.of(`${r.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${s}.`)}const jMe=r=>{let{state:e}=r,n=[];for(let i=0;i<e.doc.length;){let s=r.lineBlockAt(i),o=GO(e,s.from,s.to);o&&n.push(C_.of(o)),i=(o?r.lineBlockAt(o.to):s).to+1}return n.length&&r.dispatch({effects:RW(r.state,n)}),!!n.length},qMe=r=>{let e=r.state.field(wd,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,r.state.doc.length,(i,s)=>{n.push(Pv.of({from:i,to:s}))}),r.dispatch({effects:n}),!0},ZMe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:GMe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:YMe},{key:"Ctrl-Alt-[",run:jMe},{key:"Ctrl-Alt-]",run:qMe}],KMe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},DW=St.define({combine(r){return vl(r,KMe)}});function NW(r){return[wd,iEe]}function $W(r,e){let{state:n}=r,i=n.facet(DW),s=a=>{let c=r.lineBlockAt(r.posAtDOM(a.target)),h=YO(r.state,c.from,c.to);h&&r.dispatch({effects:Pv.of(h)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(r,s,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const GV=Jt.replace({widget:new class extends Gh{toDOM(r){return $W(r,null)}}});class JMe extends Gh{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return $W(e,this.value)}}const eEe={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class q2 extends pc{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function tEe(r={}){let e=Object.assign(Object.assign({},eEe),r),n=new q2(e,!0),i=new q2(e,!1),s=dr.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Lh)!=a.state.facet(Lh)||a.startState.field(wd,!1)!=a.state.field(wd,!1)||os(a.startState)!=os(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let c=new Ih;for(let h of a.viewportLineBlocks){let d=YO(a.state,h.from,h.to)?i:GO(a.state,h.from,h.to)?n:null;d&&c.add(h.from,h.from,d)}return c.finish()}}),{domEventHandlers:o}=e;return[s,eMe({class:"cm-foldGutter",markers(a){var c;return((c=a.plugin(s))===null||c===void 0?void 0:c.markers)||Fi.empty},initialSpacer(){return new q2(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,c,h)=>{if(o.click&&o.click(a,c,h))return!0;let d=YO(a.state,c.from,c.to);if(d)return a.dispatch({effects:Pv.of(d)}),!0;let f=GO(a.state,c.from,c.to);return f?(a.dispatch({effects:C_.of(f)}),!0):!1}})}),NW()]}const iEe=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class k_{constructor(e,n){this.specs=e;let i;function s(c){let h=Dh.newName();return(i||(i=Object.create(null)))["."+h]=c,h}const o=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,a=n.scope;this.scope=a instanceof Ta?c=>c.prop(zf)==a.data:a?c=>c==a:void 0,this.style=SW(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:o}).style,this.module=i?new Dh(i):null,this.themeType=n.themeType}static define(e,n){return new k_(e,n||{})}}const YM=St.define(),VW=St.define({combine(r){return r.length?[r[0]]:null}});function Z2(r){let e=r.facet(YM);return e.length?e:r.facet(VW)}function nEe(r,e){let n=[sEe],i;return r instanceof k_&&(r.module&&n.push(bt.styleModule.of(r.module)),i=r.themeType),e!=null&&e.fallback?n.push(VW.of(r)):i?n.push(YM.computeN([bt.darkTheme],s=>s.facet(bt.darkTheme)==(i=="dark")?[r]:[])):n.push(YM.of(r)),n}class rEe{constructor(e){this.markCache=Object.create(null),this.tree=os(e.state),this.decorations=this.buildDeco(e,Z2(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=os(e.state),i=Z2(e.state),s=i!=Z2(e.startState),{viewport:o}=e.view,a=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!s&&n.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return Jt.none;let i=new Ih;for(let{from:s,to:o}of e.visibleRanges)_Me(this.tree,n,(a,c,h)=>{i.add(a,c,this.markCache[h]||(this.markCache[h]=Jt.mark({class:h})))},s,o);return i.finish()}}const sEe=Id.high(dr.fromClass(rEe,{decorations:r=>r.decorations})),oEe=k_.define([{tag:He.meta,color:"#404740"},{tag:He.link,textDecoration:"underline"},{tag:He.heading,textDecoration:"underline",fontWeight:"bold"},{tag:He.emphasis,fontStyle:"italic"},{tag:He.strong,fontWeight:"bold"},{tag:He.strikethrough,textDecoration:"line-through"},{tag:He.keyword,color:"#708"},{tag:[He.atom,He.bool,He.url,He.contentSeparator,He.labelName],color:"#219"},{tag:[He.literal,He.inserted],color:"#164"},{tag:[He.string,He.deleted],color:"#a11"},{tag:[He.regexp,He.escape,He.special(He.string)],color:"#e40"},{tag:He.definition(He.variableName),color:"#00f"},{tag:He.local(He.variableName),color:"#30a"},{tag:[He.typeName,He.namespace],color:"#085"},{tag:He.className,color:"#167"},{tag:[He.special(He.variableName),He.macroName],color:"#256"},{tag:He.definition(He.propertyName),color:"#00c"},{tag:He.comment,color:"#940"},{tag:He.invalid,color:"#f00"}]),aEe=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),LW=1e4,BW="()[]{}",UW=St.define({combine(r){return vl(r,{afterCursor:!0,brackets:BW,maxScanDistance:LW,renderMatch:hEe})}}),lEe=Jt.mark({class:"cm-matchingBracket"}),cEe=Jt.mark({class:"cm-nonmatchingBracket"});function hEe(r){let e=[],n=r.matched?lEe:cEe;return e.push(n.range(r.start.from,r.start.to)),r.end&&e.push(n.range(r.end.from,r.end.to)),e}const uEe=Gr.define({create(){return Jt.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let n=[],i=e.state.facet(UW);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=rl(e.state,s.head,-1,i)||s.head>0&&rl(e.state,s.head-1,1,i)||i.afterCursor&&(rl(e.state,s.head,1,i)||s.head<e.state.doc.length&&rl(e.state,s.head+1,-1,i));o&&(n=n.concat(i.renderMatch(o,e.state)))}return Jt.set(n,!0)},provide:r=>bt.decorations.from(r)}),dEe=[uEe,aEe];function fEe(r={}){return[UW.of(r),dEe]}const pEe=new wi;function jM(r,e,n){let i=r.prop(e<0?wi.openedBy:wi.closedBy);if(i)return i;if(r.name.length==1){let s=n.indexOf(r.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function qM(r){let e=r.type.prop(pEe);return e?e(r.node):r}function rl(r,e,n,i={}){let s=i.maxScanDistance||LW,o=i.brackets||BW,a=os(r),c=a.resolveInner(e,n);for(let h=c;h;h=h.parent){let d=jM(h.type,n,o);if(d&&h.from<h.to){let f=qM(h);if(f&&(n>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return mEe(r,e,n,h,f,d,o)}}return gEe(r,e,n,a,c.type,s,o)}function mEe(r,e,n,i,s,o,a){let c=i.parent,h={from:s.from,to:s.to},d=0,f=c==null?void 0:c.cursor();if(f&&(n<0?f.childBefore(i.from):f.childAfter(i.to)))do if(n<0?f.to<=i.from:f.from>=i.to){if(d==0&&o.indexOf(f.type.name)>-1&&f.from<f.to){let p=qM(f);return{start:h,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(jM(f.type,n,a))d++;else if(jM(f.type,-n,a)){if(d==0){let p=qM(f);return{start:h,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}d--}}while(n<0?f.prevSibling():f.nextSibling());return{start:h,matched:!1}}function gEe(r,e,n,i,s,o,a){let c=n<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),h=a.indexOf(c);if(h<0||h%2==0!=n>0)return null;let d={from:n<0?e-1:e,to:n>0?e+1:e},f=r.doc.iterRange(e,n>0?r.doc.length:0),p=0;for(let g=0;!f.next().done&&g<=o;){let y=f.value;n<0&&(g+=y.length);let b=e+g*n;for(let w=n>0?0:y.length-1,x=n>0?y.length:-1;w!=x;w+=n){let S=a.indexOf(y[w]);if(!(S<0||i.resolveInner(b+w,1).type!=s))if(S%2==0==n>0)p++;else{if(p==1)return{start:d,end:{from:b+w,to:b+w+1},matched:S>>1==h>>1};p--}}n>0&&(g+=y.length)}return f.done?{start:d,matched:!1}:null}const yEe=Object.create(null),YV=[io.none],jV=[],qV=Object.create(null),vEe=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])vEe[r]=bEe(yEe,e);function K2(r,e){jV.indexOf(r)>-1||(jV.push(r),console.warn(e))}function bEe(r,e){let n=[];for(let c of e.split(" ")){let h=[];for(let d of c.split(".")){let f=r[d]||He[d];f?typeof f=="function"?h.length?h=h.map(f):K2(d,`Modifier ${d} used at start of tag`):h.length?K2(d,`Tag ${d} used as modifier`):h=Array.isArray(f)?f:[f]:K2(d,`Unknown highlighting tag ${d}`)}for(let d of h)n.push(d)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+n.map(c=>c.id),o=qV[s];if(o)return o.id;let a=qV[s]=io.define({id:YV.length,name:i,props:[wW({[i]:n})]});return YV.push(a),a.id}Sn.RTL,Sn.LTR;const xEe=r=>{let{state:e}=r,n=e.doc.lineAt(e.selection.main.from),i=hA(r.state,n.from);return i.line?OEe(r):i.block?_Ee(r):!1};function cA(r,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let s=r(e,n);return s?(i(n.update(s)),!0):!1}}const OEe=cA(kEe,0),wEe=cA(FW,0),_Ee=cA((r,e)=>FW(r,e,CEe(e)),0);function hA(r,e){let n=r.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const l0=50;function SEe(r,{open:e,close:n},i,s){let o=r.sliceDoc(i-l0,i),a=r.sliceDoc(s,s+l0),c=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(a)[0].length,d=o.length-c;if(o.slice(d-e.length,d)==e&&a.slice(h,h+n.length)==n)return{open:{pos:i-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let f,p;s-i<=2*l0?f=p=r.sliceDoc(i,s):(f=r.sliceDoc(i,i+l0),p=r.sliceDoc(s-l0,s));let g=/^\s*/.exec(f)[0].length,y=/\s*$/.exec(p)[0].length,b=p.length-y-n.length;return f.slice(g,g+e.length)==e&&p.slice(b,b+n.length)==n?{open:{pos:i+g+e.length,margin:/\s/.test(f.charAt(g+e.length))?1:0},close:{pos:s-y-n.length,margin:/\s/.test(p.charAt(b-1))?1:0}}:null}function CEe(r){let e=[];for(let n of r.selection.ranges){let i=r.doc.lineAt(n.from),s=n.to<=i.to?i:r.doc.lineAt(n.to),o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function FW(r,e,n=e.selection.ranges){let i=n.map(o=>hA(e,o.from).block);if(!i.every(o=>o))return null;let s=n.map((o,a)=>SEe(e,i[a],o.from,o.to));if(r!=2&&!s.every(o=>o))return{changes:e.changes(n.map((o,a)=>s[a]?[]:[{from:o.from,insert:i[a].open+" "},{from:o.to,insert:" "+i[a].close}]))};if(r!=1&&s.some(o=>o)){let o=[];for(let a=0,c;a<s.length;a++)if(c=s[a]){let h=i[a],{open:d,close:f}=c;o.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:f.pos-f.margin,to:f.pos+h.close.length})}return{changes:o}}return null}function kEe(r,e,n=e.selection.ranges){let i=[],s=-1;for(let{from:o,to:a}of n){let c=i.length,h=1e9,d=hA(e,o).line;if(d){for(let f=o;f<=a;){let p=e.doc.lineAt(f);if(p.from>s&&(o==a||a>p.from)){s=p.from;let g=/^\s*/.exec(p.text)[0].length,y=g==p.length,b=p.text.slice(g,g+d.length)==d?g:-1;g<p.text.length&&g<h&&(h=g),i.push({line:p,comment:b,token:d,indent:g,empty:y,single:!1})}f=p.to+1}if(h<1e9)for(let f=c;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=h);i.length==c+1&&(i[c].single=!0)}}if(r!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:c,token:h,indent:d,empty:f,single:p}of i)(p||!f)&&o.push({from:c.from+d,insert:h+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(r!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:c,token:h}of i)if(c>=0){let d=a.from+c,f=d+h.length;a.text[f-a.from]==" "&&f++,o.push({from:d,to:f})}return{changes:o}}return null}const ZM=vc.define(),TEe=vc.define(),MEe=St.define(),zW=St.define({combine(r){return vl(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,s)=>e(i,s)||n(i,s)})}}),XW=Gr.define({create(){return sl.empty},update(r,e){let n=e.state.facet(zW),i=e.annotation(ZM);if(i){let h=Js.fromTransaction(e,i.selection),d=i.side,f=d==0?r.undone:r.done;return h?f=jO(f,f.length,n.minDepth,h):f=HW(f,e.startState.selection),new sl(d==0?i.rest:f,d==0?f:i.rest)}let s=e.annotation(TEe);if((s=="full"||s=="before")&&(r=r.isolate()),e.annotation(Or.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let o=Js.fromTransaction(e),a=e.annotation(Or.time),c=e.annotation(Or.userEvent);return o?r=r.addChanges(o,a,c,n,e):e.selection&&(r=r.addSelection(e.startState.selection,a,c,n.newGroupDelay)),(s=="full"||s=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new sl(r.done.map(Js.fromJSON),r.undone.map(Js.fromJSON))}});function EEe(r={}){return[XW,zW.of(r),bt.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?WW:e.inputType=="historyRedo"?KM:null;return i?(e.preventDefault(),i(n)):!1}})]}function T_(r,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let s=n.field(XW,!1);if(!s)return!1;let o=s.pop(r,n,e);return o?(i(o),!0):!1}}const WW=T_(0,!1),KM=T_(1,!1),PEe=T_(0,!0),AEe=T_(1,!0);class Js{constructor(e,n,i,s,o){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new Js(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Js(e.changes&&gr.fromJSON(e.changes),[],e.mapped&&al.fromJSON(e.mapped),e.startSelection&&Ke.fromJSON(e.startSelection),e.selectionsAfter.map(Ke.fromJSON))}static fromTransaction(e,n){let i=qo;for(let s of e.startState.facet(MEe)){let o=s(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Js(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,qo)}static selection(e){return new Js(void 0,qo,void 0,void 0,e)}}function jO(r,e,n,i){let s=e+1>n+20?e-n-1:0,o=r.slice(s,e);return o.push(i),o}function REe(r,e){let n=[],i=!1;return r.iterChangedRanges((s,o)=>n.push(s,o)),e.iterChangedRanges((s,o,a,c)=>{for(let h=0;h<n.length;){let d=n[h++],f=n[h++];c>=d&&a<=f&&(i=!0)}}),i}function IEe(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function QW(r,e){return r.length?e.length?r.concat(e):r:e}const qo=[],DEe=200;function HW(r,e){if(r.length){let n=r[r.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-DEe));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),jO(r,r.length-1,1e9,n.setSelAfter(i)))}else return[Js.selection([e])]}function NEe(r){let e=r[r.length-1],n=r.slice();return n[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function J2(r,e){if(!r.length)return r;let n=r.length,i=qo;for(;n;){let s=$Ee(r[n-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let o=r.slice(0,n);return o[n-1]=s,o}else e=s.mapped,n--,i=s.selectionsAfter}return i.length?[Js.selection(i)]:qo}function $Ee(r,e,n){let i=QW(r.selectionsAfter.length?r.selectionsAfter.map(c=>c.map(e)):qo,n);if(!r.changes)return Js.selection(i);let s=r.changes.map(e),o=e.mapDesc(r.changes,!0),a=r.mapped?r.mapped.composeDesc(o):o;return new Js(s,bi.mapEffects(r.effects,e),a,r.startSelection.map(o),i)}const VEe=/^(input\.type|delete)($|\.)/;class sl{constructor(e,n,i=0,s=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new sl(this.done,this.undone):this}addChanges(e,n,i,s,o){let a=this.done,c=a[a.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!i||VEe.test(i))&&(!c.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,REe(c.changes,e.changes))||i=="input.type.compose")?a=jO(a,a.length-1,s.minDepth,new Js(e.changes.compose(c.changes),QW(bi.mapEffects(e.effects,c.changes),c.effects),c.mapped,c.startSelection,qo)):a=jO(a,a.length,s.minDepth,e),new sl(a,qo,n,i)}addSelection(e,n,i,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:qo;return o.length>0&&n-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&IEe(o[o.length-1],e)?this:new sl(HW(this.done,e),this.undone,n,i)}addMapping(e){return new sl(J2(this.done,e),J2(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],a=o.selectionsAfter[0]||n.selection;if(i&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:ZM.of({side:e,rest:NEe(s),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let c=s.length==1?qo:s.slice(0,s.length-1);return o.mapped&&(c=J2(c,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:ZM.of({side:e,rest:c,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}sl.empty=new sl(qo,qo);const LEe=[{key:"Mod-z",run:WW,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:KM,preventDefault:!0},{linux:"Ctrl-Shift-z",run:KM,preventDefault:!0},{key:"Mod-u",run:PEe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:AEe,preventDefault:!0}];function sm(r,e){return Ke.create(r.ranges.map(e),r.mainIndex)}function bl(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Da({state:r,dispatch:e},n){let i=sm(r.selection,n);return i.eq(r.selection,!0)?!1:(e(bl(r,i)),!0)}function M_(r,e){return Ke.cursor(e?r.to:r.from)}function GW(r,e){return Da(r,n=>n.empty?r.moveByChar(n,e):M_(n,e))}function hs(r){return r.textDirectionAt(r.state.selection.main.head)==Sn.LTR}const YW=r=>GW(r,!hs(r)),jW=r=>GW(r,hs(r));function qW(r,e){return Da(r,n=>n.empty?r.moveByGroup(n,e):M_(n,e))}const BEe=r=>qW(r,!hs(r)),UEe=r=>qW(r,hs(r));function FEe(r,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function E_(r,e,n){let i=os(r).resolveInner(e.head),s=n?wi.closedBy:wi.openedBy;for(let h=e.head;;){let d=n?i.childAfter(h):i.childBefore(h);if(!d)break;FEe(r,d,s)?i=d:h=n?d.to:d.from}let o=i.type.prop(s),a,c;return o&&(a=n?rl(r,i.from,1):rl(r,i.to,-1))&&a.matched?c=n?a.end.to:a.end.from:c=n?i.to:i.from,Ke.cursor(c,n?-1:1)}const zEe=r=>Da(r,e=>E_(r.state,e,!hs(r))),XEe=r=>Da(r,e=>E_(r.state,e,hs(r)));function ZW(r,e){return Da(r,n=>{if(!n.empty)return M_(n,e);let i=r.moveVertically(n,e);return i.head!=n.head?i:r.moveToLineBoundary(n,e)})}const KW=r=>ZW(r,!1),JW=r=>ZW(r,!0);function eQ(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,n=0,i=0,s;if(e){for(let o of r.state.facet(bt.scrollMargins)){let a=o(r);a!=null&&a.top&&(n=Math.max(a==null?void 0:a.top,n)),a!=null&&a.bottom&&(i=Math.max(a==null?void 0:a.bottom,i))}s=r.scrollDOM.clientHeight-n-i}else s=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(r.defaultLineHeight,s-5)}}function tQ(r,e){let n=eQ(r),{state:i}=r,s=sm(i.selection,a=>a.empty?r.moveVertically(a,e,n.height):M_(a,e));if(s.eq(i.selection))return!1;let o;if(n.selfScroll){let a=r.coordsAtPos(i.selection.main.head),c=r.scrollDOM.getBoundingClientRect(),h=c.top+n.marginTop,d=c.bottom-n.marginBottom;a&&a.top>h&&a.bottom<d&&(o=bt.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return r.dispatch(bl(i,s),{effects:o}),!0}const ZV=r=>tQ(r,!1),JM=r=>tQ(r,!0);function Yh(r,e,n){let i=r.lineBlockAt(e.head),s=r.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?i.to:i.from)&&(s=r.moveToLineBoundary(e,n,!1)),!n&&s.head==i.from&&i.length){let o=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(s=Ke.cursor(i.from+o))}return s}const WEe=r=>Da(r,e=>Yh(r,e,!0)),QEe=r=>Da(r,e=>Yh(r,e,!1)),HEe=r=>Da(r,e=>Yh(r,e,!hs(r))),GEe=r=>Da(r,e=>Yh(r,e,hs(r))),YEe=r=>Da(r,e=>Ke.cursor(r.lineBlockAt(e.head).from,1)),jEe=r=>Da(r,e=>Ke.cursor(r.lineBlockAt(e.head).to,-1));function qEe(r,e,n){let i=!1,s=sm(r.selection,o=>{let a=rl(r,o.head,-1)||rl(r,o.head,1)||o.head>0&&rl(r,o.head-1,1)||o.head<r.doc.length&&rl(r,o.head+1,-1);if(!a||!a.end)return o;i=!0;let c=a.start.from==o.head?a.end.to:a.end.from;return Ke.cursor(c)});return i?(e(bl(r,s)),!0):!1}const ZEe=({state:r,dispatch:e})=>qEe(r,e);function sa(r,e){let n=sm(r.state.selection,i=>{let s=e(i);return Ke.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(r.state.selection)?!1:(r.dispatch(bl(r.state,n)),!0)}function iQ(r,e){return sa(r,n=>r.moveByChar(n,e))}const nQ=r=>iQ(r,!hs(r)),rQ=r=>iQ(r,hs(r));function sQ(r,e){return sa(r,n=>r.moveByGroup(n,e))}const KEe=r=>sQ(r,!hs(r)),JEe=r=>sQ(r,hs(r)),ePe=r=>sa(r,e=>E_(r.state,e,!hs(r))),tPe=r=>sa(r,e=>E_(r.state,e,hs(r)));function oQ(r,e){return sa(r,n=>r.moveVertically(n,e))}const aQ=r=>oQ(r,!1),lQ=r=>oQ(r,!0);function cQ(r,e){return sa(r,n=>r.moveVertically(n,e,eQ(r).height))}const KV=r=>cQ(r,!1),JV=r=>cQ(r,!0),iPe=r=>sa(r,e=>Yh(r,e,!0)),nPe=r=>sa(r,e=>Yh(r,e,!1)),rPe=r=>sa(r,e=>Yh(r,e,!hs(r))),sPe=r=>sa(r,e=>Yh(r,e,hs(r))),oPe=r=>sa(r,e=>Ke.cursor(r.lineBlockAt(e.head).from)),aPe=r=>sa(r,e=>Ke.cursor(r.lineBlockAt(e.head).to)),eL=({state:r,dispatch:e})=>(e(bl(r,{anchor:0})),!0),tL=({state:r,dispatch:e})=>(e(bl(r,{anchor:r.doc.length})),!0),iL=({state:r,dispatch:e})=>(e(bl(r,{anchor:r.selection.main.anchor,head:0})),!0),nL=({state:r,dispatch:e})=>(e(bl(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),lPe=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),cPe=({state:r,dispatch:e})=>{let n=P_(r).map(({from:i,to:s})=>Ke.range(i,Math.min(s+1,r.doc.length)));return e(r.update({selection:Ke.create(n),userEvent:"select"})),!0},hPe=({state:r,dispatch:e})=>{let n=sm(r.selection,i=>{var s;let o=os(r).resolveStack(i.from,1);for(let a=o;a;a=a.next){let{node:c}=a;if((c.from<i.from&&c.to>=i.to||c.to>i.to&&c.from<=i.from)&&(!((s=c.parent)===null||s===void 0)&&s.parent))return Ke.range(c.to,c.from)}return i});return e(bl(r,n)),!0},uPe=({state:r,dispatch:e})=>{let n=r.selection,i=null;return n.ranges.length>1?i=Ke.create([n.main]):n.main.empty||(i=Ke.create([Ke.cursor(n.main.head)])),i?(e(bl(r,i)),!0):!1};function Av(r,e){if(r.state.readOnly)return!1;let n="delete.selection",{state:i}=r,s=i.changeByRange(o=>{let{from:a,to:c}=o;if(a==c){let h=e(o);h<a?(n="delete.backward",h=ax(r,h,!1)):h>a&&(n="delete.forward",h=ax(r,h,!0)),a=Math.min(a,h),c=Math.max(c,h)}else a=ax(r,a,!1),c=ax(r,c,!0);return a==c?{range:o}:{changes:{from:a,to:c},range:Ke.cursor(a,a<o.head?-1:1)}});return s.changes.empty?!1:(r.dispatch(i.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?bt.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function ax(r,e,n){if(r instanceof bt)for(let i of r.state.facet(bt.atomicRanges).map(s=>s(r)))i.between(e,e,(s,o)=>{s<e&&o>e&&(e=n?o:s)});return e}const hQ=(r,e,n)=>Av(r,i=>{let s=i.from,{state:o}=r,a=o.doc.lineAt(s),c,h;if(n&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,s-a.from))){if(c[c.length-1]=="	")return s-1;let d=rm(c,o.tabSize),f=d%HO(o)||HO(o);for(let p=0;p<f&&c[c.length-1-p]==" ";p++)s--;h=s}else h=Xr(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?o.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=Xr(a.text,h-a.from,!1,!1)+a.from);return h}),eE=r=>hQ(r,!1,!0),uQ=r=>hQ(r,!0,!1),dQ=(r,e)=>Av(r,n=>{let i=n.head,{state:s}=r,o=s.doc.lineAt(i),a=s.charCategorizer(i);for(let c=null;;){if(i==(e?o.to:o.from)){i==n.head&&o.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let h=Xr(o.text,i-o.from,e)+o.from,d=o.text.slice(Math.min(i,h)-o.from,Math.max(i,h)-o.from),f=a(d);if(c!=null&&f!=c)break;(d!=" "||i!=n.head)&&(c=f),i=h}return i}),fQ=r=>dQ(r,!1),dPe=r=>dQ(r,!0),fPe=r=>Av(r,e=>{let n=r.lineBlockAt(e.head).to;return e.head<n?n:Math.min(r.state.doc.length,e.head+1)}),pPe=r=>Av(r,e=>{let n=r.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),mPe=r=>Av(r,e=>{let n=r.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(r.state.doc.length,e.head+1)}),gPe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Hi.of(["",""])},range:Ke.cursor(i.from)}));return e(r.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},yPe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let s=i.from,o=r.doc.lineAt(s),a=s==o.from?s-1:Xr(o.text,s-o.from,!1)+o.from,c=s==o.to?s+1:Xr(o.text,s-o.from,!0)+o.from;return{changes:{from:a,to:c,insert:r.doc.slice(s,c).append(r.doc.slice(a,s))},range:Ke.cursor(c)}});return n.changes.empty?!1:(e(r.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function P_(r){let e=[],n=-1;for(let i of r.selection.ranges){let s=r.doc.lineAt(i.from),o=r.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=r.doc.lineAt(i.to-1)),n>=s.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(i)}else e.push({from:s.from,to:o.to,ranges:[i]});n=o.number+1}return e}function pQ(r,e,n){if(r.readOnly)return!1;let i=[],s=[];for(let o of P_(r)){if(n?o.to==r.doc.length:o.from==0)continue;let a=r.doc.lineAt(n?o.to+1:o.from-1),c=a.length+1;if(n){i.push({from:o.to,to:a.to},{from:o.from,insert:a.text+r.lineBreak});for(let h of o.ranges)s.push(Ke.range(Math.min(r.doc.length,h.anchor+c),Math.min(r.doc.length,h.head+c)))}else{i.push({from:a.from,to:o.from},{from:o.to,insert:r.lineBreak+a.text});for(let h of o.ranges)s.push(Ke.range(h.anchor-c,h.head-c))}}return i.length?(e(r.update({changes:i,scrollIntoView:!0,selection:Ke.create(s,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const vPe=({state:r,dispatch:e})=>pQ(r,e,!1),bPe=({state:r,dispatch:e})=>pQ(r,e,!0);function mQ(r,e,n){if(r.readOnly)return!1;let i=[];for(let s of P_(r))n?i.push({from:s.from,insert:r.doc.slice(s.from,s.to)+r.lineBreak}):i.push({from:s.to,insert:r.lineBreak+r.doc.slice(s.from,s.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const xPe=({state:r,dispatch:e})=>mQ(r,e,!1),OPe=({state:r,dispatch:e})=>mQ(r,e,!0),wPe=r=>{if(r.state.readOnly)return!1;let{state:e}=r,n=e.changes(P_(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),i=sm(e.selection,s=>{let o;if(r.lineWrapping){let a=r.lineBlockAt(s.head),c=r.coordsAtPos(s.head,s.assoc||1);c&&(o=a.bottom+r.documentTop-c.bottom+r.defaultLineHeight/2)}return r.moveVertically(s,!0,o)}).map(n);return r.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function _Pe(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=os(r).resolveInner(e),i=n.childBefore(e),s=n.childAfter(e),o;return i&&s&&i.to<=e&&s.from>=e&&(o=i.type.prop(wi.closedBy))&&o.indexOf(s.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(s.from).from&&!/\S/.test(r.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const SPe=gQ(!1),CPe=gQ(!0);function gQ(r){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:o,to:a}=s,c=e.doc.lineAt(o),h=!r&&o==a&&_Pe(e,o);r&&(o=a=(a<=c.to?c:e.doc.lineAt(a)).to);let d=new S_(e,{simulateBreak:o,simulateDoubleBreak:!!h}),f=aA(d,o);for(f==null&&(f=rm(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;h?{from:o,to:a}=h:o>c.from&&o<c.from+100&&!/\S/.test(c.text.slice(0,o))&&(o=c.from);let p=["",Uy(e,f)];return h&&p.push(Uy(e,d.lineIndent(c.from,-1))),{changes:{from:o,to:a,insert:Hi.of(p)},range:Ke.cursor(o+1+p[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function uA(r,e){let n=-1;return r.changeByRange(i=>{let s=[];for(let a=i.from;a<=i.to;){let c=r.doc.lineAt(a);c.number>n&&(i.empty||i.to>c.from)&&(e(c,s,i),n=c.number),a=c.to+1}let o=r.changes(s);return{changes:s,range:Ke.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const kPe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=Object.create(null),i=new S_(r,{overrideIndentation:o=>{let a=n[o];return a??-1}}),s=uA(r,(o,a,c)=>{let h=aA(i,o.from);if(h==null)return;/\S/.test(o.text)||(h=0);let d=/^\s*/.exec(o.text)[0],f=Uy(r,h);(d!=f||c.from<o.from+d.length)&&(n[o.from]=h,a.push({from:o.from,to:o.from+d.length,insert:f}))});return s.changes.empty||e(r.update(s,{userEvent:"indent"})),!0},TPe=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(uA(r,(n,i)=>{i.push({from:n.from,insert:r.facet(oA)})}),{userEvent:"input.indent"})),!0),MPe=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(uA(r,(n,i)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let o=rm(s,r.tabSize),a=0,c=Uy(r,Math.max(0,o-HO(r)));for(;a<s.length&&a<c.length&&s.charCodeAt(a)==c.charCodeAt(a);)a++;i.push({from:n.from+a,to:n.from+s.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),EPe=r=>(r.setTabFocusMode(),!0),PPe=[{key:"Ctrl-b",run:YW,shift:nQ,preventDefault:!0},{key:"Ctrl-f",run:jW,shift:rQ},{key:"Ctrl-p",run:KW,shift:aQ},{key:"Ctrl-n",run:JW,shift:lQ},{key:"Ctrl-a",run:YEe,shift:oPe},{key:"Ctrl-e",run:jEe,shift:aPe},{key:"Ctrl-d",run:uQ},{key:"Ctrl-h",run:eE},{key:"Ctrl-k",run:fPe},{key:"Ctrl-Alt-h",run:fQ},{key:"Ctrl-o",run:gPe},{key:"Ctrl-t",run:yPe},{key:"Ctrl-v",run:JM}],APe=[{key:"ArrowLeft",run:YW,shift:nQ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:BEe,shift:KEe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:HEe,shift:rPe,preventDefault:!0},{key:"ArrowRight",run:jW,shift:rQ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:UEe,shift:JEe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:GEe,shift:sPe,preventDefault:!0},{key:"ArrowUp",run:KW,shift:aQ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:eL,shift:iL},{mac:"Ctrl-ArrowUp",run:ZV,shift:KV},{key:"ArrowDown",run:JW,shift:lQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:tL,shift:nL},{mac:"Ctrl-ArrowDown",run:JM,shift:JV},{key:"PageUp",run:ZV,shift:KV},{key:"PageDown",run:JM,shift:JV},{key:"Home",run:QEe,shift:nPe,preventDefault:!0},{key:"Mod-Home",run:eL,shift:iL},{key:"End",run:WEe,shift:iPe,preventDefault:!0},{key:"Mod-End",run:tL,shift:nL},{key:"Enter",run:SPe},{key:"Mod-a",run:lPe},{key:"Backspace",run:eE,shift:eE},{key:"Delete",run:uQ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:fQ},{key:"Mod-Delete",mac:"Alt-Delete",run:dPe},{mac:"Mod-Backspace",run:pPe},{mac:"Mod-Delete",run:mPe}].concat(PPe.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),RPe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:zEe,shift:ePe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:XEe,shift:tPe},{key:"Alt-ArrowUp",run:vPe},{key:"Shift-Alt-ArrowUp",run:xPe},{key:"Alt-ArrowDown",run:bPe},{key:"Shift-Alt-ArrowDown",run:OPe},{key:"Escape",run:uPe},{key:"Mod-Enter",run:CPe},{key:"Alt-l",mac:"Ctrl-l",run:cPe},{key:"Mod-i",run:hPe,preventDefault:!0},{key:"Mod-[",run:MPe},{key:"Mod-]",run:TPe},{key:"Mod-Alt-\\",run:kPe},{key:"Shift-Mod-k",run:wPe},{key:"Shift-Mod-\\",run:ZEe},{key:"Mod-/",run:xEe},{key:"Alt-A",run:wEe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:EPe}].concat(APe);function gn(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];typeof s=="string"?r.setAttribute(i,s):s!=null&&(r[i]=s)}e++}for(;e<arguments.length;e++)yQ(r,arguments[e]);return r}function yQ(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)yQ(r,e[n]);else throw new RangeError("Unsupported child node: "+e)}const rL=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class Fp{constructor(e,n,i=0,s=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=o?c=>o(rL(c)):rL,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Br(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=U3(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ho(e);let s=this.normalize(n);for(let o=0,a=i;;o++){let c=s.charCodeAt(o),h=this.match(c,a,this.bufferPos+this.bufferStart);if(o==s.length-1){if(h)return this.value=h,this;break}a==i&&o<n.length&&n.charCodeAt(o)==c&&a++}}}match(e,n,i){let s=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],c=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?s={from:this.matches[o+1],to:i}:(this.matches[o]++,c=!0)),c||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:n,to:i}:this.matches.push(1,n)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(Fp.prototype[Symbol.iterator]=function(){return this});const vQ={from:-1,to:-1,match:/.*/.exec("")},dA="gm"+(/x/.unicode==null?"":"u");class bQ{constructor(e,n,i,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=vQ,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new xQ(e,n,i,s,o);this.re=new RegExp(n,dA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=qO(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,s=i+n[0].length;if(this.matchPos=qO(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ek=new WeakMap;class hp{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let s=ek.get(e);if(!s||s.from>=i||s.to<=n){let c=new hp(n,e.sliceString(n,i));return ek.set(e,c),c}if(s.from==n&&s.to==i)return s;let{text:o,from:a}=s;return a>n&&(o=e.sliceString(n,a)+o,a=n),s.to<i&&(o+=e.sliceString(s.to,i)),ek.set(e,new hp(a,o)),new hp(n,o.slice(n-a,i-a))}}class xQ{constructor(e,n,i,s,o){this.text=e,this.to=o,this.done=!1,this.value=vQ,this.matchPos=qO(e,s),this.re=new RegExp(n,dA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=hp.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,s=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this.matchPos=qO(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=hp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(bQ.prototype[Symbol.iterator]=xQ.prototype[Symbol.iterator]=function(){return this});function IPe(r){try{return new RegExp(r,dA),!0}catch{return!1}}function qO(r,e){if(e>=r.length)return e;let n=r.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function tE(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),n=gn("input",{class:"cm-textfield",name:"line",value:e}),i=gn("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),r.dispatch({effects:ZO.of(!1)}),r.focus()):o.keyCode==13&&(o.preventDefault(),s())},onsubmit:o=>{o.preventDefault(),s()}},gn("label",r.state.phrase("Go to line"),": ",n)," ",gn("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function s(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!o)return;let{state:a}=r,c=a.doc.lineAt(a.selection.main.head),[,h,d,f,p]=o,g=f?+f.slice(1):0,y=d?+d:c.number;if(d&&p){let x=y/100;h&&(x=x*(h=="-"?-1:1)+c.number/a.doc.lines),y=Math.round(a.doc.lines*x)}else d&&h&&(y=y*(h=="-"?-1:1)+c.number);let b=a.doc.line(Math.max(1,Math.min(a.doc.lines,y))),w=Ke.cursor(b.from+Math.max(0,Math.min(g,b.length)));r.dispatch({effects:[ZO.of(!1),bt.scrollIntoView(w.from,{y:"center"})],selection:w}),r.focus()}return{dom:i}}const ZO=bi.define(),sL=Gr.define({create(){return!0},update(r,e){for(let n of e.effects)n.is(ZO)&&(r=n.value);return r},provide:r=>Ly.from(r,e=>e?tE:null)}),DPe=r=>{let e=Vy(r,tE);if(!e){let n=[ZO.of(!0)];r.state.field(sL,!1)==null&&n.push(bi.appendConfig.of([sL,NPe])),r.dispatch({effects:n}),e=Vy(r,tE)}return e&&e.dom.querySelector("input").select(),!0},NPe=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),$Pe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},VPe=St.define({combine(r){return vl(r,$Pe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function LPe(r){return[XPe,zPe]}const BPe=Jt.mark({class:"cm-selectionMatch"}),UPe=Jt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function oL(r,e,n,i){return(n==0||r(e.sliceDoc(n-1,n))!=Pn.Word)&&(i==e.doc.length||r(e.sliceDoc(i,i+1))!=Pn.Word)}function FPe(r,e,n,i){return r(e.sliceDoc(n,n+1))==Pn.Word&&r(e.sliceDoc(i-1,i))==Pn.Word}const zPe=dr.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(VPe),{state:n}=r,i=n.selection;if(i.ranges.length>1)return Jt.none;let s=i.main,o,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return Jt.none;let h=n.wordAt(s.head);if(!h)return Jt.none;a=n.charCategorizer(s.head),o=n.sliceDoc(h.from,h.to)}else{let h=s.to-s.from;if(h<e.minSelectionLength||h>200)return Jt.none;if(e.wholeWords){if(o=n.sliceDoc(s.from,s.to),a=n.charCategorizer(s.head),!(oL(a,n,s.from,s.to)&&FPe(a,n,s.from,s.to)))return Jt.none}else if(o=n.sliceDoc(s.from,s.to),!o)return Jt.none}let c=[];for(let h of r.visibleRanges){let d=new Fp(n.doc,o,h.from,h.to);for(;!d.next().done;){let{from:f,to:p}=d.value;if((!a||oL(a,n,f,p))&&(s.empty&&f<=s.from&&p>=s.to?c.push(UPe.range(f,p)):(f>=s.to||p<=s.from)&&c.push(BPe.range(f,p)),c.length>e.maxMatches))return Jt.none}}return Jt.set(c)}},{decorations:r=>r.decorations}),XPe=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),WPe=({state:r,dispatch:e})=>{let{selection:n}=r,i=Ke.create(n.ranges.map(s=>r.wordAt(s.head)||Ke.cursor(s.head)),n.mainIndex);return i.eq(n)?!1:(e(r.update({selection:i})),!0)};function QPe(r,e){let{main:n,ranges:i}=r.selection,s=r.wordAt(n.head),o=s&&s.from==n.from&&s.to==n.to;for(let a=!1,c=new Fp(r.doc,e,i[i.length-1].to);;)if(c.next(),c.done){if(a)return null;c=new Fp(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(h=>h.from==c.value.from))continue;if(o){let h=r.wordAt(c.value.from);if(!h||h.from!=c.value.from||h.to!=c.value.to)continue}return c.value}}const HPe=({state:r,dispatch:e})=>{let{ranges:n}=r.selection;if(n.some(o=>o.from===o.to))return WPe({state:r,dispatch:e});let i=r.sliceDoc(n[0].from,n[0].to);if(r.selection.ranges.some(o=>r.sliceDoc(o.from,o.to)!=i))return!1;let s=QPe(r,i);return s?(e(r.update({selection:r.selection.addRange(Ke.range(s.from,s.to),!1),effects:bt.scrollIntoView(s.to)})),!0):!1},om=St.define({combine(r){return vl(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new r3e(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class OQ{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||IPe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new qPe(this):new YPe(this)}getCursor(e,n=0,i){let s=e.doc?e:Xi.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?Nf(this,s,n,i):Df(this,s,n,i)}}class wQ{constructor(e){this.spec=e}}function Df(r,e,n,i){return new Fp(e.doc,r.unquoted,n,i,r.caseSensitive?void 0:s=>s.toLowerCase(),r.wholeWord?GPe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function GPe(r,e){return(n,i,s,o)=>((o>n||o+s.length<i)&&(o=Math.max(0,n-2),s=r.sliceString(o,Math.min(r.length,i+2))),(e(KO(s,n-o))!=Pn.Word||e(JO(s,n-o))!=Pn.Word)&&(e(JO(s,i-o))!=Pn.Word||e(KO(s,i-o))!=Pn.Word))}class YPe extends wQ{constructor(e){super(e)}nextMatch(e,n,i){let s=Df(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=Df(this.spec,e,0,n).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=i;;){let o=Math.max(n,s-1e4-this.spec.unquoted.length),a=Df(this.spec,e,o,s),c=null;for(;!a.nextOverlapping().done;)c=a.value;if(c)return c;if(o==n)return null;s-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Df(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let o=Df(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function Nf(r,e,n,i){return new bQ(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?jPe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function KO(r,e){return r.slice(Xr(r,e,!1),e)}function JO(r,e){return r.slice(e,Xr(r,e))}function jPe(r){return(e,n,i)=>!i[0].length||(r(KO(i.input,i.index))!=Pn.Word||r(JO(i.input,i.index))!=Pn.Word)&&(r(JO(i.input,i.index+i[0].length))!=Pn.Word||r(KO(i.input,i.index+i[0].length))!=Pn.Word)}class qPe extends wQ{nextMatch(e,n,i){let s=Nf(this.spec,e,i,e.doc.length).next();return s.done&&(s=Nf(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=1;;s++){let o=Math.max(n,i-s*1e4),a=Nf(this.spec,e,o,i),c=null;for(;!a.next().done;)c=a.value;if(c&&(o==n||c.from>o+10))return c;if(o==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n)}matchAll(e,n){let i=Nf(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let o=Nf(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const Fy=bi.define(),fA=bi.define(),wh=Gr.define({create(r){return new tk(iE(r).create(),null)},update(r,e){for(let n of e.effects)n.is(Fy)?r=new tk(n.value.create(),r.panel):n.is(fA)&&(r=new tk(r.query,n.value?pA:null));return r},provide:r=>Ly.from(r,e=>e.panel)});class tk{constructor(e,n){this.query=e,this.panel=n}}const ZPe=Jt.mark({class:"cm-searchMatch"}),KPe=Jt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),JPe=dr.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(wh))}update(r){let e=r.state.field(wh);(e!=r.startState.field(wh)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return Jt.none;let{view:n}=this,i=new Ih;for(let s=0,o=n.visibleRanges,a=o.length;s<a;s++){let{from:c,to:h}=o[s];for(;s<a-1&&h>o[s+1].from-2*250;)h=o[++s].to;r.highlight(n.state,c,h,(d,f)=>{let p=n.state.selection.ranges.some(g=>g.from==d&&g.to==f);i.add(d,f,p?KPe:ZPe)})}return i.finish()}},{decorations:r=>r.decorations});function Rv(r){return e=>{let n=e.state.field(wh,!1);return n&&n.query.spec.valid?r(e,n):CQ(e)}}const ew=Rv((r,{query:e})=>{let{to:n}=r.state.selection.main,i=e.nextMatch(r.state,n,n);if(!i)return!1;let s=Ke.single(i.from,i.to),o=r.state.facet(om);return r.dispatch({selection:s,effects:[mA(r,i),o.scrollToMatch(s.main,r)],userEvent:"select.search"}),SQ(r),!0}),tw=Rv((r,{query:e})=>{let{state:n}=r,{from:i}=n.selection.main,s=e.prevMatch(n,i,i);if(!s)return!1;let o=Ke.single(s.from,s.to),a=r.state.facet(om);return r.dispatch({selection:o,effects:[mA(r,s),a.scrollToMatch(o.main,r)],userEvent:"select.search"}),SQ(r),!0}),e3e=Rv((r,{query:e})=>{let n=e.matchAll(r.state,1e3);return!n||!n.length?!1:(r.dispatch({selection:Ke.create(n.map(i=>Ke.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),t3e=({state:r,dispatch:e})=>{let n=r.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:s}=n.main,o=[],a=0;for(let c=new Fp(r.doc,r.sliceDoc(i,s));!c.next().done;){if(o.length>1e3)return!1;c.value.from==i&&(a=o.length),o.push(Ke.range(c.value.from,c.value.to))}return e(r.update({selection:Ke.create(o,a),userEvent:"select.search.matches"})),!0},aL=Rv((r,{query:e})=>{let{state:n}=r,{from:i,to:s}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,i,i);if(!o)return!1;let a=[],c,h,d=[];if(o.from==i&&o.to==s&&(h=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:h}),o=e.nextMatch(n,o.from,o.to),d.push(bt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),o){let f=a.length==0||a[0].from>=o.to?0:o.to-o.from-h.length;c=Ke.single(o.from-f,o.to-f),d.push(mA(r,o)),d.push(n.facet(om).scrollToMatch(c.main,r))}return r.dispatch({changes:a,selection:c,effects:d,userEvent:"input.replace"}),!0}),i3e=Rv((r,{query:e})=>{if(r.state.readOnly)return!1;let n=e.matchAll(r.state,1e9).map(s=>{let{from:o,to:a}=s;return{from:o,to:a,insert:e.getReplacement(s)}});if(!n.length)return!1;let i=r.state.phrase("replaced $ matches",n.length)+".";return r.dispatch({changes:n,effects:bt.announce.of(i),userEvent:"input.replace.all"}),!0});function pA(r){return r.state.facet(om).createPanel(r)}function iE(r,e){var n,i,s,o,a;let c=r.selection.main,h=c.empty||c.to>c.from+100?"":r.sliceDoc(c.from,c.to);if(e&&!h)return e;let d=r.facet(om);return new OQ({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:d.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:d.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:d.wholeWord})}function _Q(r){let e=Vy(r,pA);return e&&e.dom.querySelector("[main-field]")}function SQ(r){let e=_Q(r);e&&e==r.root.activeElement&&e.select()}const CQ=r=>{let e=r.state.field(wh,!1);if(e&&e.panel){let n=_Q(r);if(n&&n!=r.root.activeElement){let i=iE(r.state,e.query.spec);i.valid&&r.dispatch({effects:Fy.of(i)}),n.focus(),n.select()}}else r.dispatch({effects:[fA.of(!0),e?Fy.of(iE(r.state,e.query.spec)):bi.appendConfig.of(o3e)]});return!0},kQ=r=>{let e=r.state.field(wh,!1);if(!e||!e.panel)return!1;let n=Vy(r,pA);return n&&n.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:fA.of(!1)}),!0},n3e=[{key:"Mod-f",run:CQ,scope:"editor search-panel"},{key:"F3",run:ew,shift:tw,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ew,shift:tw,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kQ,scope:"editor search-panel"},{key:"Mod-Shift-l",run:t3e},{key:"Mod-Alt-g",run:DPe},{key:"Mod-d",run:HPe,preventDefault:!0}];class r3e{constructor(e){this.view=e;let n=this.query=e.state.field(wh).query.spec;this.commit=this.commit.bind(this),this.searchField=gn("input",{value:n.search,placeholder:mo(e,"Find"),"aria-label":mo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=gn("input",{value:n.replace,placeholder:mo(e,"Replace"),"aria-label":mo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=gn("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=gn("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=gn("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(s,o,a){return gn("button",{class:"cm-button",name:s,onclick:o,type:"button"},a)}this.dom=gn("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>ew(e),[mo(e,"next")]),i("prev",()=>tw(e),[mo(e,"previous")]),i("select",()=>e3e(e),[mo(e,"all")]),gn("label",null,[this.caseField,mo(e,"match case")]),gn("label",null,[this.reField,mo(e,"regexp")]),gn("label",null,[this.wordField,mo(e,"by word")]),...e.state.readOnly?[]:[gn("br"),this.replaceField,i("replace",()=>aL(e),[mo(e,"replace")]),i("replaceAll",()=>i3e(e),[mo(e,"replace all")])],gn("button",{name:"close",onclick:()=>kQ(e),"aria-label":mo(e,"close"),type:"button"},["×"])])}commit(){let e=new OQ({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Fy.of(e)}))}keydown(e){hTe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?tw:ew)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),aL(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Fy)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(om).top}}function mo(r,e){return r.state.phrase(e)}const lx=30,cx=/[\s\.,:;?!]/;function mA(r,{from:e,to:n}){let i=r.state.doc.lineAt(e),s=r.state.doc.lineAt(n).to,o=Math.max(i.from,e-lx),a=Math.min(s,n+lx),c=r.state.sliceDoc(o,a);if(o!=i.from){for(let h=0;h<lx;h++)if(!cx.test(c[h+1])&&cx.test(c[h])){c=c.slice(h);break}}if(a!=s){for(let h=c.length-1;h>c.length-lx;h--)if(!cx.test(c[h-1])&&cx.test(c[h])){c=c.slice(0,h);break}}return bt.announce.of(`${r.state.phrase("current match")}. ${c} ${r.state.phrase("on line")} ${i.number}.`)}const s3e=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),o3e=[wh,Id.low(JPe),s3e];class TQ{constructor(e,n,i,s){this.state=e,this.pos=n,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=os(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),s=n.text.slice(i-n.from,this.pos-n.from),o=s.search(MQ(e,!1));return o<0?null:{from:i+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function lL(r){let e=Object.keys(r).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function a3e(r){let e=Object.create(null),n=Object.create(null);for(let{label:s}of r){e[s[0]]=!0;for(let o=1;o<s.length;o++)n[s[o]]=!0}let i=lL(e)+lL(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function l3e(r){let e=r.map(s=>typeof s=="string"?{label:s}:s),[n,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:a3e(e);return s=>{let o=s.matchBefore(i);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:n}:null}}class cL{constructor(e,n,i,s){this.completion=e,this.source=n,this.match=i,this.score=s}}function _h(r){return r.selection.main.from}function MQ(r,e){var n;let{source:i}=r,s=e&&i[0]!="^",o=i[i.length-1]!="$";return!s&&!o?r:new RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,(n=r.flags)!==null&&n!==void 0?n:r.ignoreCase?"i":"")}const EQ=vc.define();function c3e(r,e,n,i){let{main:s}=r.selection,o=n-s.from,a=i-s.from;return Object.assign(Object.assign({},r.changeByRange(c=>c!=s&&n!=i&&r.sliceDoc(c.from+o,c.from+a)!=r.sliceDoc(n,i)?{range:c}:{changes:{from:c.from+o,to:i==s.from?c.to:c.from+a,insert:e},range:Ke.cursor(c.from+o+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const hL=new WeakMap;function h3e(r){if(!Array.isArray(r))return r;let e=hL.get(r);return e||hL.set(r,e=l3e(r)),e}const iw=bi.define(),zy=bi.define();class u3e{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Br(e,n),s=Ho(i);this.chars.push(i);let o=e.slice(n,n+s),a=o.toUpperCase();this.folded.push(Br(a==o?o.toLowerCase():a,0)),n+=s}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:s,precise:o,byWord:a}=this;if(n.length==1){let _=Br(e,0),O=Ho(_),T=O==e.length?0:-100;if(_!=n[0])if(_==i[0])T+=-200;else return null;return this.ret(T,[0,O])}let c=e.indexOf(this.pattern);if(c==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=n.length,d=0;if(c<0){for(let _=0,O=Math.min(e.length,200);_<O&&d<h;){let T=Br(e,_);(T==n[d]||T==i[d])&&(s[d++]=_),_+=Ho(T)}if(d<h)return null}let f=0,p=0,g=!1,y=0,b=-1,w=-1,x=/[a-z]/.test(e),S=!0;for(let _=0,O=Math.min(e.length,200),T=0;_<O&&p<h;){let E=Br(e,_);c<0&&(f<h&&E==n[f]&&(o[f++]=_),y<h&&(E==n[y]||E==i[y]?(y==0&&(b=_),w=_+1,y++):y=0));let P,I=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(P=U3(E))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!_||I==1&&x||T==0&&I!=0)&&(n[p]==E||i[p]==E&&(g=!0)?a[p++]=_:a.length&&(S=!1)),T=I,_+=Ho(E)}return p==h&&a[0]==0&&S?this.result(-100+(g?-200:0),a,e):y==h&&b==0?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):c>-1?this.ret(-700-e.length,[c,c+this.pattern.length]):y==h?this.ret(-900-e.length,[b,w]):p==h?this.result(-100+(g?-200:0)+-700+(S?0:-1100),a,e):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,n,i){let s=[],o=0;for(let a of n){let c=a+(this.astral?Ho(Br(i,a)):1);o&&s[o-1]==a?s[o-1]=c:(s[o++]=a,s[o++]=c)}return this.ret(e-i.length,s)}}class d3e{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Fr=St.define({combine(r){return vl(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:f3e,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>uL(e(i),n(i)),optionClass:(e,n)=>i=>uL(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function uL(r,e){return r?e?r+" "+e:r:e}function f3e(r,e,n,i,s,o){let a=r.textDirection==Sn.RTL,c=a,h=!1,d="top",f,p,g=e.left-s.left,y=s.right-e.right,b=i.right-i.left,w=i.bottom-i.top;if(c&&g<Math.min(b,y)?c=!1:!c&&y<Math.min(b,g)&&(c=!0),b<=(c?g:y))f=Math.max(s.top,Math.min(n.top,s.bottom-w))-e.top,p=Math.min(400,c?g:y);else{h=!0,p=Math.min(400,(a?e.right:s.right-e.left)-30);let _=s.bottom-e.bottom;_>=w||_>e.top?f=n.bottom-e.top:(d="bottom",f=e.bottom-n.top)}let x=(e.bottom-e.top)/o.offsetHeight,S=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${f/x}px; max-width: ${p/S}px`,class:"cm-completionInfo-"+(h?a?"left-narrow":"right-narrow":c?"left":"right")}}function p3e(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,s,o){let a=document.createElement("span");a.className="cm-completionLabel";let c=n.displayLabel||n.label,h=0;for(let d=0;d<o.length;){let f=o[d++],p=o[d++];f>h&&a.appendChild(document.createTextNode(c.slice(h,f)));let g=a.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(c.slice(f,p))),g.className="cm-completionMatchedText",h=p}return h<c.length&&a.appendChild(document.createTextNode(c.slice(h))),a},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function ik(r,e,n){if(r<=n)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let s=Math.floor(e/n);return{from:s*n,to:(s+1)*n}}let i=Math.floor((r-e)/n);return{from:r-(i+1)*n,to:r-i*n}}class m3e{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let s=e.state.field(n),{options:o,selected:a}=s.open,c=e.state.facet(Fr);this.optionContent=p3e(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=ik(o.length,a,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:d}=e.state.field(n).open;for(let f=h.target,p;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(p=/-(\d+)$/.exec(f.id))&&+p[1]<d.length){this.applyCompletion(e,d[+p[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Fr).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:zy.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:o,selected:a,disabled:c}=i.open;(!s.open||s.open.options!=o)&&(this.range=ik(o.length,a,e.state.facet(Fr).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),c!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!c)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=ik(n.options.length,n.selected,this.view.state.facet(Fr).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Ks(this.view.state,a,"completion info")):this.addInfoPane(o,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;i.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&y3e(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return s.top>Math.min(o.bottom,n.bottom)-10||s.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(Fr).positionInfo(this.view,n,s,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let a=i.from;a<i.to;a++){let{completion:c,match:h}=e[a],{section:d}=c;if(d){let g=typeof d=="string"?d:d.name;if(g!=o&&(a>i.from||i.from==0))if(o=g,typeof d!="string"&&d.header)s.appendChild(d.header(d));else{let y=s.appendChild(document.createElement("completion-section"));y.textContent=g}}const f=s.appendChild(document.createElement("li"));f.id=n+"-"+a,f.setAttribute("role","option");let p=this.optionClass(c);p&&(f.className=p);for(let g of this.optionContent){let y=g(c,this.view.state,this.view,h);y&&f.appendChild(y)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function g3e(r,e){return n=>new m3e(n,r,e)}function y3e(r,e){let n=r.getBoundingClientRect(),i=e.getBoundingClientRect(),s=n.height/r.offsetHeight;i.top<n.top?r.scrollTop-=(n.top-i.top)/s:i.bottom>n.bottom&&(r.scrollTop+=(i.bottom-n.bottom)/s)}function dL(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function v3e(r,e){let n=[],i=null,s=d=>{n.push(d);let{section:f}=d.completion;if(f){i||(i=[]);let p=typeof f=="string"?f:f.name;i.some(g=>g.name==p)||i.push(typeof f=="string"?{name:p}:f)}},o=e.facet(Fr);for(let d of r)if(d.hasResult()){let f=d.result.getMatch;if(d.result.filter===!1)for(let p of d.result.options)s(new cL(p,d.source,f?f(p):[],1e9-n.length));else{let p=e.sliceDoc(d.from,d.to),g,y=o.filterStrict?new d3e(p):new u3e(p);for(let b of d.result.options)if(g=y.match(b.label)){let w=b.displayLabel?f?f(b,g.matched):[]:g.matched;s(new cL(b,d.source,w,g.score+(b.boost||0)))}}}if(i){let d=Object.create(null),f=0,p=(g,y)=>{var b,w;return((b=g.rank)!==null&&b!==void 0?b:1e9)-((w=y.rank)!==null&&w!==void 0?w:1e9)||(g.name<y.name?-1:1)};for(let g of i.sort(p))f-=1e5,d[g.name]=f;for(let g of n){let{section:y}=g.completion;y&&(g.score+=d[typeof y=="string"?y:y.name])}}let a=[],c=null,h=o.compareCompletions;for(let d of n.sort((f,p)=>p.score-f.score||h(f.completion,p.completion))){let f=d.completion;!c||c.label!=f.label||c.detail!=f.detail||c.type!=null&&f.type!=null&&c.type!=f.type||c.apply!=f.apply||c.boost!=f.boost?a.push(d):dL(d.completion)>dL(c)&&(a[a.length-1]=d),c=d.completion}return a}class Xf{constructor(e,n,i,s,o,a){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=s,this.selected=o,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Xf(this.options,fL(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,s,o){let a=v3e(e,n);if(!a.length)return s&&e.some(h=>h.state==1)?new Xf(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let c=n.facet(Fr).selectOnOpen?0:-1;if(s&&s.selected!=c&&s.selected!=-1){let h=s.options[s.selected].completion;for(let d=0;d<a.length;d++)if(a[d].completion==h){c=d;break}}return new Xf(a,fL(i,c),{pos:e.reduce((h,d)=>d.hasResult()?Math.min(h,d.from):h,1e8),create:S3e,above:o.aboveCursor},s?s.timestamp:Date.now(),c,!1)}map(e){return new Xf(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class nw{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new nw(w3e,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Fr),o=(i.override||n.languageDataAt("autocomplete",_h(n)).map(h3e)).map(c=>(this.active.find(d=>d.source==c)||new Co(c,this.active.some(d=>d.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,h)=>c==this.active[h])&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!b3e(o,this.active)?a=Xf.build(o,n,this.id,a,i):a&&a.disabled&&!o.some(c=>c.state==1)&&(a=null),!a&&o.every(c=>c.state!=1)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new Co(c.source,0):c));for(let c of e.effects)c.is(RQ)&&(a=a&&a.setSelected(c.value,this.id));return o==this.active&&a==this.open?this:new nw(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?x3e:O3e}}function b3e(r,e){if(r==e)return!0;for(let n=0,i=0;;){for(;n<r.length&&!r[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let s=n==r.length,o=i==e.length;if(s||o)return s==o;if(r[n++].result!=e[i++].result)return!1}}const x3e={"aria-autocomplete":"list"},O3e={};function fL(r,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(n["aria-activedescendant"]=r+"-"+e),n}const w3e=[];function PQ(r,e){if(r.isUserEvent("input.complete")){let i=r.annotation(EQ);if(i&&e.activateOnCompletion(i))return 12}let n=r.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class Co{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=PQ(e,n),s=this;(i&8||i&16&&this.touches(e))&&(s=new Co(s.source,0)),i&4&&s.state==0&&(s=new Co(this.source,1)),s=s.updateFor(e,i);for(let o of e.effects)if(o.is(iw))s=new Co(s.source,1,o.value?_h(e.state):-1);else if(o.is(zy))s=new Co(s.source,0);else if(o.is(AQ))for(let a of o.value)a.source==s.source&&(s=a);return s}updateFor(e,n){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Co(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(_h(e.state))}}class up extends Co{constructor(e,n,i,s,o){super(e,2,n),this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),c=_h(e.state);if((this.explicitPos<0?c<=o:c<this.from)||c>a||!s||n&2&&_h(e.startState)==this.from)return new Co(this.source,n&4?1:0);let h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return _3e(s.validFor,e.state,o,a)?new up(this.source,h,s,o,a):s.update&&(s=s.update(s,o,a,new TQ(e.state,c,h>=0)))?new up(this.source,h,s,s.from,(i=s.to)!==null&&i!==void 0?i:_h(e.state)):new Co(this.source,1,h)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new up(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Co(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function _3e(r,e,n,i){if(!r)return!1;let s=e.sliceDoc(n,i);return typeof r=="function"?r(s,n,i,e):MQ(r,!0).test(s)}const AQ=bi.define({map(r,e){return r.map(n=>n.map(e))}}),RQ=bi.define(),Qs=Gr.define({create(){return nw.start()},update(r,e){return r.update(e)},provide:r=>[tA.from(r,e=>e.tooltip),bt.contentAttributes.from(r,e=>e.attrs)]});function gA(r,e){const n=e.completion.apply||e.completion.label;let i=r.state.field(Qs).active.find(s=>s.source==e.source);return i instanceof up?(typeof n=="string"?r.dispatch(Object.assign(Object.assign({},c3e(r.state,n,i.from,i.to)),{annotations:EQ.of(e.completion)})):n(r,e.completion,i.from,i.to),!0):!1}const S3e=g3e(Qs,gA);function hx(r,e="option"){return n=>{let i=n.state.field(Qs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Fr).interactionDelay)return!1;let s=1,o;e=="page"&&(o=fW(n,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,c=i.open.selected>-1?i.open.selected+s*(r?1:-1):r?0:a-1;return c<0?c=e=="page"?0:a-1:c>=a&&(c=e=="page"?a-1:0),n.dispatch({effects:RQ.of(c)}),!0}}const C3e=r=>{let e=r.state.field(Qs,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(Fr).interactionDelay?!1:gA(r,e.open.options[e.open.selected])},k3e=r=>r.state.field(Qs,!1)?(r.dispatch({effects:iw.of(!0)}),!0):!1,T3e=r=>{let e=r.state.field(Qs,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(r.dispatch({effects:zy.of(null)}),!0)};class M3e{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const E3e=50,P3e=1e3,A3e=dr.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(Qs).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(Qs),n=r.state.facet(Fr);if(!r.selectionSet&&!r.docChanged&&r.startState.field(Qs)==e)return;let i=r.transactions.some(o=>{let a=PQ(o,n);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(i||a.context.abortOnDocChange&&r.docChanged||a.updates.length+r.transactions.length>E3e&&Date.now()-a.time>P3e){for(let c of a.context.abortListeners)try{c()}catch(h){Ks(this.view.state,h)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(o=>o.effects.some(a=>a.is(iw)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.state==1&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of r.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(Qs);for(let n of e.active)n.state==1&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n)}startQuery(r){let{state:e}=this.view,n=_h(e),i=new TQ(e,n,r.explicitPos==n,this.view),s=new M3e(r,i);this.running.push(s),Promise.resolve(r.source(i)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:zy.of(null)}),Ks(this.view.state,o)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Fr).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Fr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=new up(s.active.source,s.active.explicitPos,s.done,s.done.from,(r=s.done.to)!==null&&r!==void 0?r:_h(s.updates.length?s.updates[0].startState:this.view.state));for(let c of s.updates)a=a.update(c,n);if(a.hasResult()){e.push(a);continue}}let o=this.view.state.field(Qs).active.find(a=>a.source==s.active.source);if(o&&o.state==1)if(s.done==null){let a=new Co(s.active.source,0);for(let c of s.updates)a=a.update(c,n);a.state!=1&&e.push(a)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:AQ.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(Qs,!1);if(e&&e.tooltip&&this.view.state.facet(Fr).closeOnBlur){let n=e.open&&fW(this.view,e.open.tooltip);(!n||!n.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:zy.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:iw.of(!1)}),20),this.composing=0}}}),R3e=typeof navigator=="object"&&/Win/.test(navigator.platform),I3e=Id.highest(bt.domEventHandlers({keydown(r,e){let n=e.state.field(Qs,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||r.key.length>1||r.ctrlKey&&!(R3e&&r.altKey)||r.metaKey)return!1;let i=n.open.options[n.open.selected],s=n.active.find(a=>a.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(r.key)>-1&&gA(e,i),!1}})),D3e=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Xy={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Yu=bi.define({map(r,e){let n=e.mapPos(r,-1,ws.TrackAfter);return n??void 0}}),yA=new class extends vd{};yA.startSide=1;yA.endSide=-1;const IQ=Gr.define({create(){return Fi.empty},update(r,e){if(r=r.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(Yu)&&(r=r.update({add:[yA.range(n.value,n.value+1)]}));return r}});function N3e(){return[V3e,IQ]}const nk="()[]{}<>";function DQ(r){for(let e=0;e<nk.length;e+=2)if(nk.charCodeAt(e)==r)return nk.charAt(e+1);return U3(r<128?r:r+1)}function NQ(r,e){return r.languageDataAt("closeBrackets",e)[0]||Xy}const $3e=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),V3e=bt.inputHandler.of((r,e,n,i)=>{if(($3e?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let s=r.state.selection.main;if(i.length>2||i.length==2&&Ho(Br(i,0))==1||e!=s.from||n!=s.to)return!1;let o=U3e(r.state,i);return o?(r.dispatch(o),!0):!1}),L3e=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=NQ(r,r.selection.main.head).brackets||Xy.brackets,s=null,o=r.changeByRange(a=>{if(a.empty){let c=F3e(r.doc,a.head);for(let h of i)if(h==c&&A_(r.doc,a.head)==DQ(Br(h,0)))return{changes:{from:a.head-h.length,to:a.head+h.length},range:Ke.cursor(a.head-h.length)}}return{range:s=a}});return s||e(r.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},B3e=[{key:"Backspace",run:L3e}];function U3e(r,e){let n=NQ(r,r.selection.main.head),i=n.brackets||Xy.brackets;for(let s of i){let o=DQ(Br(s,0));if(e==s)return o==s?W3e(r,s,i.indexOf(s+s+s)>-1,n):z3e(r,s,o,n.before||Xy.before);if(e==o&&$Q(r,r.selection.main.from))return X3e(r,s,o)}return null}function $Q(r,e){let n=!1;return r.field(IQ).between(0,r.doc.length,i=>{i==e&&(n=!0)}),n}function A_(r,e){let n=r.sliceString(e,e+2);return n.slice(0,Ho(Br(n,0)))}function F3e(r,e){let n=r.sliceString(e-2,e);return Ho(Br(n,0))==n.length?n:n.slice(1)}function z3e(r,e,n,i){let s=null,o=r.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:Yu.of(a.to+e.length),range:Ke.range(a.anchor+e.length,a.head+e.length)};let c=A_(r.doc,a.head);return!c||/\s/.test(c)||i.indexOf(c)>-1?{changes:{insert:e+n,from:a.head},effects:Yu.of(a.head+e.length),range:Ke.cursor(a.head+e.length)}:{range:s=a}});return s?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function X3e(r,e,n){let i=null,s=r.changeByRange(o=>o.empty&&A_(r.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:Ke.cursor(o.head+n.length)}:i={range:o});return i?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function W3e(r,e,n,i){let s=i.stringPrefixes||Xy.stringPrefixes,o=null,a=r.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:Yu.of(c.to+e.length),range:Ke.range(c.anchor+e.length,c.head+e.length)};let h=c.head,d=A_(r.doc,h),f;if(d==e){if(pL(r,h))return{changes:{insert:e+e,from:h},effects:Yu.of(h+e.length),range:Ke.cursor(h+e.length)};if($Q(r,h)){let g=n&&r.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+g.length,insert:g},range:Ke.cursor(h+g.length)}}}else{if(n&&r.sliceDoc(h-2*e.length,h)==e+e&&(f=mL(r,h-2*e.length,s))>-1&&pL(r,f))return{changes:{insert:e+e+e+e,from:h},effects:Yu.of(h+e.length),range:Ke.cursor(h+e.length)};if(r.charCategorizer(h)(d)!=Pn.Word&&mL(r,h,s)>-1&&!Q3e(r,h,e,s))return{changes:{insert:e+e,from:h},effects:Yu.of(h+e.length),range:Ke.cursor(h+e.length)}}return{range:o=c}});return o?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function pL(r,e){let n=os(r).resolveInner(e+1);return n.parent&&n.from==e}function Q3e(r,e,n,i){let s=os(r).resolveInner(e,-1),o=i.reduce((a,c)=>Math.max(a,c.length),0);for(let a=0;a<5;a++){let c=r.sliceDoc(s.from,Math.min(s.to,s.from+n.length+o)),h=c.indexOf(n);if(!h||h>-1&&i.indexOf(c.slice(0,h))>-1){let f=s.firstChild;for(;f&&f.from==s.from&&f.to-f.from>n.length+h;){if(r.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let d=s.to==e&&s.parent;if(!d)break;s=d}return!1}function mL(r,e,n){let i=r.charCategorizer(e);if(i(r.sliceDoc(e-1,e))!=Pn.Word)return e;for(let s of n){let o=e-s.length;if(r.sliceDoc(o,e)==s&&i(r.sliceDoc(o-1,o))!=Pn.Word)return o}return-1}function H3e(r={}){return[I3e,Qs,Fr.of(r),A3e,G3e,D3e]}const VQ=[{key:"Ctrl-Space",run:k3e},{key:"Escape",run:T3e},{key:"ArrowDown",run:hx(!0)},{key:"ArrowUp",run:hx(!1)},{key:"PageDown",run:hx(!0,"page")},{key:"PageUp",run:hx(!1,"page")},{key:"Enter",run:C3e}],G3e=Id.highest(J3.computeN([Fr],r=>r.facet(Fr).defaultKeymap?[VQ]:[]));class Y3e{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Uu{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let s=e,o=i.facet(Wy).markerFilter;o&&(s=o(s,i));let a=Jt.set(s.map(c=>c.from==c.to||c.from==c.to-1&&i.doc.lineAt(c.from).to==c.from?Jt.widget({widget:new nAe(c),diagnostic:c}).range(c.from):Jt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+c.severity+(c.markClass?" "+c.markClass:"")},diagnostic:c}).range(c.from,c.to)),!0);return new Uu(a,n,zp(a))}}function zp(r,e=null,n=0){let i=null;return r.between(n,1e9,(s,o,{spec:a})=>{if(!(e&&a.diagnostic!=e))return i=new Y3e(s,o,a.diagnostic),!1}),i}function j3e(r,e){let n=e.pos,i=e.end||n,s=r.state.facet(Wy).hideOn(r,n,i);if(s!=null)return s;let o=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(a=>a.is(LQ))||r.changes.touchesRange(o.from,Math.max(o.to,i)))}function q3e(r,e){return r.field(To,!1)?e:e.concat(bi.appendConfig.of(oAe))}const LQ=bi.define(),vA=bi.define(),BQ=bi.define(),To=Gr.define({create(){return new Uu(Jt.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let n=r.diagnostics.map(e.changes),i=null,s=r.panel;if(r.selected){let o=e.changes.mapPos(r.selected.from,1);i=zp(n,r.selected.diagnostic,o)||zp(n,null,o)}!n.size&&s&&e.state.facet(Wy).autoPanel&&(s=null),r=new Uu(n,s,i)}for(let n of e.effects)if(n.is(LQ)){let i=e.state.facet(Wy).autoPanel?n.value.length?Qy.open:null:r.panel;r=Uu.init(n.value,i,e.state)}else n.is(vA)?r=new Uu(r.diagnostics,n.value?Qy.open:null,r.selected):n.is(BQ)&&(r=new Uu(r.diagnostics,r.panel,n.value));return r},provide:r=>[Ly.from(r,e=>e.panel),bt.decorations.from(r,e=>e.diagnostics)]}),Z3e=Jt.mark({class:"cm-lintRange cm-lintRange-active"});function K3e(r,e,n){let{diagnostics:i}=r.state.field(To),s=[],o=2e8,a=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(h,d,{spec:f})=>{e>=h&&e<=d&&(h==d||(e>h||n>0)&&(e<d||n<0))&&(s.push(f.diagnostic),o=Math.min(h,o),a=Math.max(d,a))});let c=r.state.facet(Wy).tooltipFilter;return c&&(s=c(s,r.state)),s.length?{pos:o,end:a,above:r.state.doc.lineAt(o).to<a,create(){return{dom:J3e(r,s)}}}:null}function J3e(r,e){return gn("ul",{class:"cm-tooltip-lint"},e.map(n=>FQ(r,n,!1)))}const eAe=r=>{let e=r.state.field(To,!1);(!e||!e.panel)&&r.dispatch({effects:q3e(r.state,[vA.of(!0)])});let n=Vy(r,Qy.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},gL=r=>{let e=r.state.field(To,!1);return!e||!e.panel?!1:(r.dispatch({effects:vA.of(!1)}),!0)},tAe=r=>{let e=r.state.field(To,!1);if(!e)return!1;let n=r.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},iAe=[{key:"Mod-Shift-m",run:eAe,preventDefault:!0},{key:"F8",run:tAe}],Wy=St.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},vl(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function UQ(r){let e=[];if(r)e:for(let{name:n}of r){for(let i=0;i<n.length;i++){let s=n[i];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function FQ(r,e,n){var i;let s=n?UQ(e.actions):[];return gn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},gn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,a)=>{let c=!1,h=g=>{if(g.preventDefault(),c)return;c=!0;let y=zp(r.state.field(To).diagnostics,e);y&&o.apply(r,y.from,y.to)},{name:d}=o,f=s[a]?d.indexOf(s[a]):-1,p=f<0?d:[d.slice(0,f),gn("u",d.slice(f,f+1)),d.slice(f+1)];return gn("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${d}${f<0?"":` (access key "${s[a]})"`}.`},p)}),e.source&&gn("div",{class:"cm-diagnosticSource"},e.source))}class nAe extends Gh{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return gn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class yL{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=FQ(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Qy{constructor(e){this.view=e,this.items=[];let n=s=>{if(s.keyCode==27)gL(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=UQ(o.actions);for(let c=0;c<a.length;c++)if(a[c].toUpperCase().charCodeAt(0)==s.keyCode){let h=zp(this.view.state.field(To).diagnostics,o);h&&o.actions[c].apply(e,h.from,h.to)}}else return;s.preventDefault()},i=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=gn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=gn("div",{class:"cm-panel-lint"},this.list,gn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>gL(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(To).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(To),i=0,s=!1,o=null;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==h.diagnostic){d=p;break}d<0?(f=new yL(this.view,h.diagnostic),this.items.splice(i,0,f),s=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),s=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),o=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new yL(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(To),i=zp(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:BQ.of(i)})}static open(e){return new Qy(e)}}function rAe(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function ux(r){return rAe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const sAe=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ux("#d11")},".cm-lintRange-warning":{backgroundImage:ux("orange")},".cm-lintRange-info":{backgroundImage:ux("#999")},".cm-lintRange-hint":{backgroundImage:ux("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),oAe=[To,bt.decorations.compute([To],r=>{let{selected:e,panel:n}=r.field(To);return!e||!n||e.from==e.to?Jt.none:Jt.set([Z3e.range(e.from,e.to)])}),qTe(K3e,{hideOn:j3e}),sAe],rw=[aMe(),hMe(),TTe(),EEe(),tEe(),gTe(),OTe(),Xi.allowMultipleSelections.of(!0),FMe(),nEe(oEe,{fallback:!0}),fEe(),N3e(),H3e(),BTe(),zTe(),ITe(),LPe(),J3.of([...B3e,...RPe,...n3e,...LEe,...ZMe,...VQ,...iAe])];var vL={};class sw{constructor(e,n,i,s,o,a,c,h,d,f=0,p){this.p=e,this.stack=n,this.state=i,this.reducePos=s,this.pos=o,this.score=a,this.buffer=c,this.bufferBase=h,this.curContext=d,this.lookAhead=f,this.parent=p}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,i=0){let s=e.parser.context;return new sw(e,[],n,i,i,0,[],0,s?new bL(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let i=e>>19,s=e&65535,{parser:o}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let c=o.dynamicPrecedence(s);if(c&&(this.score+=c),i==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(i-1)*3-(e&262144?6:0),d=h?this.stack[h-2]:this.p.ranges[0].from,f=this.reducePos-d;f>=2e3&&!(!((n=this.p.parser.nodeSet.types[s])===null||n===void 0)&&n.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=f));let p=h?this.stack[h-1]:0,g=this.bufferBase+this.buffer.length-p;if(s<o.minRepeatTerm||e&131072){let y=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,y,g+4,!0)}if(e&262144)this.state=this.stack[h];else{let y=this.stack[h-3];this.state=o.getGoto(y,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,d)}storeNode(e,n,i,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(n==i)return;if(a.buffer[c-2]>=n){a.buffer[c-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,n,i,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let c=!1;for(let h=a;h>0&&this.buffer[h-2]>i;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=i,this.buffer[a+3]=s}}shift(e,n,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,s,4);else{let o=e,{parser:a}=this.p;(s>this.pos||n<=a.maxNode)&&(this.pos=s,a.stateFlag(o,1)||(this.reducePos=s)),this.pushState(o,i),this.shiftContext(n,i),n<=a.maxNode&&this.buffer.push(n,i,s,4)}}apply(e,n,i,s){e&65536?this.reduce(e):this.shift(e,n,i,s)}useNode(e,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(n,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let i=e.buffer.slice(n),s=e.bufferBase+n;for(;e&&s==e.bufferBase;)e=e.parent;return new sw(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new aAe(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(i==0)return!1;if(!(i&65536))return!0;n.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let s=[];for(let o=0,a;o<n.length;o+=2)(a=n[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(n[o],a);if(this.stack.length<120)for(let o=0;s.length<8&&o<n.length;o+=2){let a=n[o+1];s.some((c,h)=>h&1&&c==a)||s.push(n[o],a)}n=s}let i=[];for(let s=0;s<n.length&&i.length<4;s+=2){let o=n[s+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[s],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let i=n>>19,s=n&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],i=(s,o)=>{if(!n.includes(s))return n.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-o;if(c>1){let h=a&65535,d=this.stack.length-c*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return c<<19|65536|h}}else{let c=i(a,o+1);if(c!=null)return c}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new bL(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class bL{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class aAe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=s}}class ow{constructor(e,n,i){this.stack=e,this.pos=n,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new ow(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ow(this.stack,this.pos,this.index)}}function dx(r,e=Uint16Array){if(typeof r!="string")return r;let n=null;for(let i=0,s=0;i<r.length;){let o=0;for(;;){let a=r.charCodeAt(i++),c=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,c=!0),o+=h,c)break;o*=46}n?n[s++]=o:n=new e(o)}return n}class eO{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const xL=new eO;class lAe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=xL,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let i=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!s)return null;let a=this.ranges[--s];o-=i.from-a.to,i=a}for(;n<0?o>i.to:o>=i.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];o+=a.from-i.to,i=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,i,s;if(n>=0&&n<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=i;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=xL,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let i="";for(let s of this.ranges){if(s.from>=n)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,n)))}return i}}class dp{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:i}=n.p;cAe(this.data,e,n,this.id,i.data,i.tokenPrecTable)}}dp.prototype.contextual=dp.prototype.fallback=dp.prototype.extend=!1;dp.prototype.fallback=dp.prototype.extend=!1;class zQ{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function cAe(r,e,n,i,s,o){let a=0,c=1<<i,{dialect:h}=n.p.parser;e:for(;c&r[a];){let d=r[a+1];for(let y=a+3;y<d;y+=2)if((r[y+1]&c)>0){let b=r[y];if(h.allows(b)&&(e.token.value==-1||e.token.value==b||hAe(b,e.token.value,s,o))){e.acceptToken(b);break}}let f=e.next,p=0,g=r[a+2];if(e.next<0&&g>p&&r[d+g*3-3]==65535){a=r[d+g*3-1];continue e}for(;p<g;){let y=p+g>>1,b=d+y+(y<<1),w=r[b],x=r[b+1]||65536;if(f<w)g=y;else if(f>=x)p=y+1;else{a=r[b+2],e.advance();continue e}}break}}function OL(r,e,n){for(let i=e,s;(s=r[i])!=65535;i++)if(s==n)return i-e;return-1}function hAe(r,e,n,i){let s=OL(n,i,e);return s<0||OL(n,i,r)<s}const go=typeof process<"u"&&vL&&/\bparse\b/.test(vL.LOG);let rk=null;function wL(r,e,n){let i=r.cursor(Ir.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:r.length}}class uAe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?wL(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?wL(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],s=this.index[n];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[s],a=this.start[n]+i.positions[s];if(a>e)return this.nextStart=a,null;if(o instanceof lr){if(a==e){if(a<this.safeFrom)return null;let c=a+o.length;if(c<=this.safeTo){let h=o.prop(wi.lookAhead);if(!h||c+h<this.fragment.to)return o}}this.index[n]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+o.length}}}class dAe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new eO)}getActions(e){let n=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,a=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<o.length;d++){if(!(1<<d&a))continue;let f=o[d],p=this.tokens[d];if(!(i&&!f.fallback)&&((f.contextual||p.start!=e.pos||p.mask!=a||p.context!=c)&&(this.updateCachedToken(p,f,e),p.mask=a,p.context=c),p.lookAhead>p.end+25&&(h=Math.max(p.lookAhead,h)),p.value!=0)){let g=n;if(p.extended>-1&&(n=this.addActions(e,p.extended,p.end,n)),n=this.addActions(e,p.value,p.end,n),!f.extend&&(i=p,n>g))break}}for(;this.actions.length>n;)this.actions.pop();return h&&e.setLookAhead(h),!i&&e.pos==this.stream.end&&(i=new eO,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,n=this.addActions(e,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new eO,{pos:i,p:s}=e;return n.start=i,n.end=Math.min(i+1,s.stream.end),n.value=i==s.stream.end?s.parser.eofTerm:0,n}updateCachedToken(e,n,i){let s=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(s,e),i),e.value>-1){let{parser:o}=i.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let c=o.specializers[a](this.stream.read(e.start,e.end),i);if(c>=0&&i.p.parser.dialect.allows(c>>1)){c&1?e.extended=c>>1:e.value=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,n,i,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=n,this.actions[s++]=i,s}addActions(e,n,i,s){let{state:o}=e,{parser:a}=e.p,{data:c}=a;for(let h=0;h<2;h++)for(let d=a.stateSlot(o,h?2:1);;d+=3){if(c[d]==65535)if(c[d+1]==1)d=Xl(c,d+2);else{s==0&&c[d+1]==2&&(s=this.putAction(Xl(c,d+2),n,i,s));break}c[d]==n&&(s=this.putAction(Xl(c,d+1),n,i,s))}return s}}class fAe{constructor(e,n,i,s){this.parser=e,this.input=n,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new lAe(n,s),this.tokens=new dAe(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[sw.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new uAe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,i=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>n)i.push(c);else{if(this.advanceStack(c,i,e))continue;{s||(s=[],o=[]),s.push(c);let h=this.tokens.getMainToken(c);o.push(h.value,h.end)}}break}}if(!i.length){let a=s&&mAe(s);if(a)return go&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw go&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,i);if(a)return go&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((c,h)=>h.score-c.score);i.length>a;)i.pop();i.some(c=>c.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let c=i[a];for(let h=a+1;h<i.length;h++){let d=i[h];if(c.sameState(d)||c.buffer.length>500&&d.buffer.length>500)if((c.score-d.score||c.buffer.length-d.buffer.length)>0)i.splice(h--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,i){let s=e.pos,{parser:o}=this,a=go?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,f=d?e.curContext.hash:0;for(let p=this.fragments.nodeAt(s);p;){let g=this.parser.nodeSet.types[p.type.id]==p.type?o.getGoto(e.state,p.type.id):-1;if(g>-1&&p.length&&(!d||(p.prop(wi.contextHash)||0)==f))return e.useNode(p,g),go&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(p.type.id)})`),!0;if(!(p instanceof lr)||p.children.length==0||p.positions[0]>0)break;let y=p.children[0];if(y instanceof lr&&p.positions[0]==0)p=y;else break}}let c=o.stateSlot(e.state,4);if(c>0)return e.reduce(c),go&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let f=h[d++],p=h[d++],g=h[d++],y=d==h.length||!i,b=y?e:e.split(),w=this.tokens.mainToken;if(b.apply(f,p,w?w.start:b.pos,g),go&&console.log(a+this.stackID(b)+` (via ${f&65536?`reduce of ${o.getName(f&65535)}`:"shift"} for ${o.getName(p)} @ ${s}${b==e?"":", split"})`),y)return!0;b.pos>s?n.push(b):i.push(b)}return!1}advanceFully(e,n){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return _L(e,n),!0}}runRecovery(e,n,i){let s=null,o=!1;for(let a=0;a<e.length;a++){let c=e[a],h=n[a<<1],d=n[(a<<1)+1],f=go?this.stackID(c)+" -> ":"";if(c.deadEnd&&(o||(o=!0,c.restart(),go&&console.log(f+this.stackID(c)+" (restarted)"),this.advanceFully(c,i))))continue;let p=c.split(),g=f;for(let y=0;p.forceReduce()&&y<10&&(go&&console.log(g+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,i));y++)go&&(g=this.stackID(p)+" -> ");for(let y of c.recoverByInsert(h))go&&console.log(f+this.stackID(y)+" (via recover-insert)"),this.advanceFully(y,i);this.stream.end>c.pos?(d==c.pos&&(d++,h=0),c.recoverByDelete(h,d),go&&console.log(f+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),_L(c,i)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(e){return e.close(),lr.build({buffer:ow.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(rk||(rk=new WeakMap)).get(e);return n||rk.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function _L(r,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==r.pos&&i.sameState(r)){e[n].score<r.score&&(e[n]=r);return}}e.push(r)}class pAe{constructor(e,n,i){this.source=e,this.flags=n,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class aw extends OW{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let c=0;c<e.repeatNodeCount;c++)n.push("");let i=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<n.length;c++)s.push([]);function o(c,h,d){s[c].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let c of e.nodeProps){let h=c[0];typeof h=="string"&&(h=wi[h]);for(let d=1;d<c.length;){let f=c[d++];if(f>=0)o(f,h,c[d++]);else{let p=c[d+-f];for(let g=-f;g>0;g--)o(c[d++],h,p);d++}}}this.nodeSet=new iA(n.map((c,h)=>io.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:i.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=yW;let a=dx(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(SL),this.states=dx(e.states,Uint32Array),this.data=dx(e.stateData),this.goto=dx(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new dp(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,i){let s=new fAe(this,e,n,i);for(let o of this.wrappers)s=o(s,e,n,i);return s}getGoto(e,n,i=!1){let s=this.goto;if(n>=s[0])return-1;for(let o=s[n+1];;){let a=s[o++],c=a&1,h=s[o++];if(c&&i)return h;for(let d=o+(a>>1);o<d;o++)if(s[o]==e)return h;if(c)return-1}}hasAction(e,n){let i=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),a;;o+=3){if((a=i[o])==65535)if(i[o+1]==1)a=i[o=Xl(i,o+2)];else{if(i[o+1]==2)return Xl(i,o+2);break}if(a==n||a==0)return Xl(i,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,i=>i==n?!0:null)}allActions(e,n){let i=this.stateSlot(e,4),s=i?n(i):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Xl(this.data,o+2);else break;s=n(Xl(this.data,o+1))}return s}nextStates(e){let n=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Xl(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];n.some((o,a)=>a&1&&o==s)||n.push(this.data[i],s)}}return n}configure(e){let n=Object.assign(Object.create(aw.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=i}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(o=>o.from==i);return s?s.to:i})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,s)=>{let o=e.specializers.find(c=>c.from==i.external);if(!o)return i;let a=Object.assign(Object.assign({},i),{external:o.to});return n.specializers[s]=SL(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(e)for(let o of e.split(" ")){let a=n.indexOf(o);a>=0&&(i[a]=!0)}let s=null;for(let o=0;o<n.length;o++)if(!i[o])for(let a=this.dialects[n[o]],c;(c=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new pAe(e,i,s)}static deserialize(e){return new aw(e)}}function Xl(r,e){return r[e]|r[e+1]<<16}function mAe(r){let e=null;for(let n of r){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function SL(r){if(r.external){let e=r.extend?1:0;return(n,i)=>r.external(n,i)<<1|e}return r.get}const CL=1,gAe=2,yAe=3,vAe=82,bAe=76,xAe=117,OAe=85,wAe=97,_Ae=122,SAe=65,CAe=90,kAe=95,nE=48,kL=34,TAe=40,TL=41,MAe=32,ML=62,EAe=new zQ(r=>{if(r.next==bAe||r.next==OAe?r.advance():r.next==xAe&&(r.advance(),r.next==nE+8&&r.advance()),r.next!=vAe||(r.advance(),r.next!=kL))return;r.advance();let e="";for(;r.next!=TAe;){if(r.next==MAe||r.next<=13||r.next==TL)return;e+=String.fromCharCode(r.next),r.advance()}for(r.advance();;){if(r.next<0)return r.acceptToken(CL);if(r.next==TL){let n=!0;for(let i=0;n&&i<e.length;i++)r.peek(i+1)!=e.charCodeAt(i)&&(n=!1);if(n&&r.peek(e.length+1)==kL)return r.acceptToken(CL,2+e.length)}r.advance()}}),PAe=new zQ(r=>{if(r.next==ML)r.peek(1)==ML&&r.acceptToken(gAe,1);else{let e=!1,n=0;for(;;n++){if(r.next>=SAe&&r.next<=CAe)e=!0;else{if(r.next>=wAe&&r.next<=_Ae)return;if(r.next!=kAe&&!(r.next>=nE&&r.next<=nE+9))break}r.advance()}e&&n>1&&r.acceptToken(yAe)}},{extend:!0}),AAe=wW({"typedef struct union enum class typename decltype auto template operator friend noexcept namespace using requires concept import export module __attribute__ __declspec __based":He.definitionKeyword,"extern MsCallModifier MsPointerModifier extern static register thread_local inline const volatile restrict _Atomic mutable constexpr constinit consteval virtual explicit VirtualSpecifier Access":He.modifier,"if else switch for while do case default return break continue goto throw try catch":He.controlKeyword,"co_return co_yield co_await":He.controlKeyword,"new sizeof delete static_assert":He.operatorKeyword,"NULL nullptr":He.null,this:He.self,"True False":He.bool,"TypeSize PrimitiveType":He.standard(He.typeName),TypeIdentifier:He.typeName,FieldIdentifier:He.propertyName,"CallExpression/FieldExpression/FieldIdentifier":He.function(He.propertyName),"ModuleName/Identifier":He.namespace,PartitionName:He.labelName,StatementIdentifier:He.labelName,"Identifier DestructorName":He.variableName,"CallExpression/Identifier":He.function(He.variableName),"CallExpression/ScopedIdentifier/Identifier":He.function(He.variableName),"FunctionDeclarator/Identifier FunctionDeclarator/DestructorName":He.function(He.definition(He.variableName)),NamespaceIdentifier:He.namespace,OperatorName:He.operator,ArithOp:He.arithmeticOperator,LogicOp:He.logicOperator,BitOp:He.bitwiseOperator,CompareOp:He.compareOperator,AssignOp:He.definitionOperator,UpdateOp:He.updateOperator,LineComment:He.lineComment,BlockComment:He.blockComment,Number:He.number,String:He.string,"RawString SystemLibString":He.special(He.string),CharLiteral:He.character,EscapeSequence:He.escape,"UserDefinedLiteral/Identifier":He.literal,PreProcArg:He.meta,"PreprocDirectiveName #include #ifdef #ifndef #if #define #else #endif #elif":He.processingInstruction,MacroName:He.special(He.name),"( )":He.paren,"[ ]":He.squareBracket,"{ }":He.brace,"< >":He.angleBracket,". ->":He.derefOperator,", ;":He.separator}),RAe={__proto__:null,bool:34,char:34,int:34,float:34,double:34,void:34,size_t:34,ssize_t:34,intptr_t:34,uintptr_t:34,charptr_t:34,int8_t:34,int16_t:34,int32_t:34,int64_t:34,uint8_t:34,uint16_t:34,uint32_t:34,uint64_t:34,char8_t:34,char16_t:34,char32_t:34,char64_t:34,const:68,volatile:70,restrict:72,_Atomic:74,mutable:76,constexpr:78,constinit:80,consteval:82,struct:86,__declspec:90,final:148,override:148,public:152,private:152,protected:152,virtual:154,extern:160,static:162,register:164,inline:166,thread_local:168,__attribute__:172,__based:178,__restrict:180,__uptr:180,__sptr:180,_unaligned:180,__unaligned:180,noexcept:194,requires:198,TRUE:784,true:784,FALSE:786,false:786,typename:218,class:220,template:234,throw:248,__cdecl:256,__clrcall:256,__stdcall:256,__fastcall:256,__thiscall:256,__vectorcall:256,try:260,catch:264,export:282,import:286,case:296,default:298,if:308,else:314,switch:318,do:322,while:324,for:330,return:334,break:338,continue:342,goto:346,co_return:350,co_yield:354,using:362,typedef:366,namespace:380,new:398,delete:400,co_await:402,concept:406,enum:410,static_assert:414,friend:422,union:424,explicit:430,operator:444,module:456,signed:518,unsigned:518,long:518,short:518,decltype:528,auto:530,sizeof:566,NULL:572,nullptr:586,this:588},IAe={__proto__:null,"<":131},DAe={__proto__:null,">":135},NAe={__proto__:null,operator:388,new:576,delete:582},$Ae=aw.deserialize({version:14,states:"$:|Q!QQVOOP'gOUOOO(XOWO'#CdO,RQUO'#CgO,]QUO'#FjO-sQbO'#CwO.UQUO'#CwO0TQUO'#KZO0[QUO'#CvO0gOpO'#DvO0oQ!dO'#D]OOQR'#JO'#JOO5XQVO'#GUO5fQUO'#JVOOQQ'#JV'#JVO8zQUO'#KmO<eQUO'#KmO>{QVO'#E^O?]QUO'#E^OOQQ'#Ed'#EdOOQQ'#Ee'#EeO?bQVO'#EfO@XQVO'#EiOBUQUO'#FPOBvQUO'#FhOOQR'#Fj'#FjOB{QUO'#FjOOQR'#LQ'#LQOOQR'#LP'#LPOETQVO'#KQOFxQUO'#LVOGVQUO'#KqOGkQUO'#LVOH]QUO'#LXOOQR'#HU'#HUOOQR'#HV'#HVOOQR'#HW'#HWOOQR'#K|'#K|OOQR'#J_'#J_Q!QQVOOOHkQVO'#FOOIWQUO'#EhOI_QUOOOKZQVO'#HgOKkQUO'#HgONVQUO'#KqONaQUO'#KqOOQQ'#Kq'#KqO!!_QUO'#KqOOQQ'#Jq'#JqO!!lQUO'#HxOOQQ'#KZ'#KZO!&^QUO'#KZO!&zQUO'#KQO!(zQVO'#I]O!(zQVO'#I`OCQQUO'#KQOOQQ'#Ip'#IpOOQQ'#KQ'#KQO!,}QUO'#KZOOQR'#KY'#KYO!-UQUO'#DYO!/mQUO'#KnOOQQ'#Kn'#KnO!/tQUO'#KnO!/{QUO'#ETO!0QQUO'#EWO!0VQUO'#FRO8zQUO'#FPO!QQVO'#F^O!0[Q#vO'#F`O!0gQUO'#FkO!0oQUO'#FpO!0tQVO'#FrO!0oQUO'#FuO!3sQUO'#FvO!3xQVO'#FxO!4SQUO'#FzO!4XQUO'#F|O!4^QUO'#GOO!4cQVO'#GQO!(zQVO'#GSO!4jQUO'#GpO!4xQUO'#GYO!(zQVO'#FeO!6VQUO'#FeO!6[QVO'#G`O!6cQUO'#GaO!6nQUO'#GnO!6sQUO'#GrO!6xQUO'#GzO!7jQ&lO'#HiO!:mQUO'#GuO!:}QUO'#HXO!;YQUO'#HZO!;bQUO'#DWO!;bQUO'#HuO!;bQUO'#HvO!;yQUO'#HwO!<[QUO'#H|O!=PQUO'#H}O!>uQVO'#IbO!(zQVO'#IdO!?PQUO'#IgO!?WQVO'#IjP!@}{,UO'#CbP!6n{,UO'#CbP!AY{7[O'#CbP!6n{,UO'#CbP!A_{,UO'#CbP!AjOSO'#IzPOOO)CEn)CEnOOOO'#I|'#I|O!AtOWO,59OOOQR,59O,59OO!(zQVO,59UOOQQ,59W,59WO!(zQVO,5;ROOQR,5<U,5<UO!BPQUO,59YO!(zQVO,5>qOOQR'#IX'#IXOOQR'#IY'#IYOOQR'#IZ'#IZOOQR'#I['#I[O!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!DOQVO,5>zOOQQ,5?W,5?WO!EqQVO'#ChO!IjQUO'#CyOOQQ,59c,59cOOQQ,59b,59bOOQQ,5<},5<}O!IwQ&lO,5=mO!?PQUO,5?RO!LkQVO,5?UO!LrQbO,59cO!L}QVO'#FYOOQQ,5?P,5?PO!M_QVO,59VO!MfO`O,5:bO!MkQbO'#D^O!M|QbO'#K^O!N[QbO,59wO!NdQbO'#CwO!NuQUO'#CwO!NzQUO'#KZO# UQUO'#CvOOQR-E<|-E<|O# aQUO,5AoO# hQVO'#EfO@XQVO'#EiOBUQUO,5;kOOQR,5<p,5<pO#$aQUO'#KQO#$hQUO'#KQO!(zQVO'#IUO8zQUO,5;kO#${Q&lO'#HiO#(SQUO'#CsO#*wQbO'#CwO#*|QUO'#CvO#.jQUO'#KZOOQQ-E=T-E=TO#0}QUO,5AXO#1XQUO'#KZO#1cQUO,5AXOOQR,5Ao,5AoOOQQ,5>l,5>lO#3gQUO'#CgO#4]QUO,5>pO#6OQUO'#IeOOQR'#I}'#I}O#6WQUO,5:xO#6tQUO,5:xO#7eQUO,5:xO#8YQUO'#CtO!0QQUO'#ClOOQQ'#JW'#JWO#6tQUO,5:xO#8bQUO,5;QO!4xQUO'#C}O#9kQUO,5;QO#9pQUO,5>QO#:|QUO'#C}O#;dQUO,5>{O#;iQUO'#KwO#<rQUO,5;TO#<zQVO,5;TO#=UQUO,5;TOOQQ,5;T,5;TO#>}QUO'#L[O#?UQUO,5>UO#?ZQbO'#CwO#?fQUO'#GcO#?kQUO'#E^O#@[QUO,5;kO#@sQUO'#K}O#@{QUO,5;rOKkQUO'#HfOBUQUO'#HgO#AQQUO'#KqO!6nQUO'#HjO#AxQUO'#CtO!0tQVO,5<SOOQQ'#Cg'#CgOOQR'#Jh'#JhO#A}QVO,5=`OOQQ,5?Z,5?ZO#DWQbO'#CwO#DcQUO'#GcOOQQ'#Ji'#JiOOQQ-E=g-E=gOGVQUO,5AqOGkQUO,5AqO#DhQUO,5AsO#DsQUO'#G|OOQR,5Aq,5AqO#DhQUO,5AqO#EOQUO'#HOO#EWQUO,5AsOOQR,5As,5AsOOQR,5At,5AtO#EfQVO,5AtOOQR-E=]-E=]O#G`QVO,5;jOOQR,5;j,5;jO#IaQUO'#EjO#JfQUO'#EwO#K]QVO'#ExO#MoQUO'#EvO#MwQUO'#EyO#NvQUO'#EzOOQQ'#Kz'#KzO$ mQUO,5;SO$!sQUO'#EvOOQQ,5;S,5;SO$#pQUO,5;SO$%cQUO,5:yO$'|QVO,5>PO$(WQUO'#E[O$(eQUO,5>ROOQQ,5>S,5>SO$,RQVO'#C{OOQQ-E=o-E=oOOQQ,5>d,5>dOOQQ,59`,59`O$,]QUO,5>wO$.]QUO,5>zO!6nQUO,59tO$.pQUO,5;qO$.}QUO,5<{O!0QQUO,5:oOOQQ,5:r,5:rO$/YQUO,5;mO$/_QUO'#KmOBUQUO,5;kOOQR,5;x,5;xO$0OQUO'#FbO$0^QUO'#FbO$0cQUO,5;zO$3|QVO'#FmO!0tQVO,5<VO!0oQUO,5<VO!0VQUO,5<[O$4TQVO'#GUO$7PQUO,5<^O!0tQVO,5<aO$:gQVO,5<bO$:tQUO,5<dOOQR,5<d,5<dO$;}QUO,5<dOOQR,5<f,5<fOOQR,5<h,5<hOOQQ'#Fi'#FiO$<SQUO,5<jO$<XQUO,5<lOOQR,5<l,5<lO$=_QUO,5<nO$>eQUO,5<rO$>pQUO,5=[O$>uQUO,5=[O!4xQUO,5<tO$>}QUO,5<tO$?cQUO,5<PO$@iQVO,5<PO$BzQUO,5<zOOQR,5<z,5<zOOQR,5<{,5<{O$>uQUO,5<{O$DQQUO,5<{O$D]QUO,5=YO!(zQVO,5=^O!(zQVO,5=fO#NeQUO,5=mOOQQ,5>T,5>TO$FbQUO,5>TO$FlQUO,5>TO$FqQUO,5>TO$FvQUO,5>TO!6nQUO,5>TO$HtQUO'#KZO$H{QUO,5=oO$IWQUO,5=aOKkQUO,5=oO$JQQUO,5=sOOQR,5=s,5=sO$JYQUO,5=sO$LeQVO'#H[OOQQ,5=u,5=uO!;]QUO,5=uO%#`QUO'#KjO%#gQUO'#K[O%#{QUO'#KjO%$VQUO'#DyO%$hQUO'#D|O%'eQUO'#K[OOQQ'#K['#K[O%)WQUO'#K[O%#gQUO'#K[O%)]QUO'#K[OOQQ,59r,59rOOQQ,5>a,5>aOOQQ,5>b,5>bO%)eQUO'#HzO%)mQUO,5>cOOQQ,5>c,5>cO%-XQUO,5>cO%-dQUO,5>hO%1OQVO,5>iO%1VQUO,5>|O# hQVO'#EfO%4]QUO,5>|OOQQ,5>|,5>|O%4|QUO,5?OO%7QQUO,5?RO!<[QUO,5?RO%8|QUO,5?UO%<iQVO,5?UP!A_{,UO,58|P%<p{,UO,58|P%=O{7[O,58|P%=U{,UO,58|PO{O'#Ju'#JuP%=Z{,UO'#LcPOOO'#Lc'#LcP%=a{,UO'#LcPOOO,58|,58|POOO,5?f,5?fP%=fOSO,5?fOOOO-E<z-E<zOOQR1G.j1G.jO%=mQUO1G.pO%>sQUO1G0mOOQQ1G0m1G0mO%@PQUO'#CoO%B`QbO'#CwO%BkQUO'#CrO%BpQUO'#CrO%BuQUO1G.tO#AxQUO'#CqOOQQ1G.t1G.tO%DxQUO1G4]O%FOQUO1G4^O%GqQUO1G4^O%IdQUO1G4^O%KVQUO1G4^O%LxQUO1G4^O%NkQUO1G4^O&!^QUO1G4^O&$PQUO1G4^O&%rQUO1G4^O&'eQUO1G4^O&)WQUO1G4^O&*yQUO'#KPO&,SQUO'#KPO&,[QUO,59SOOQQ,5=P,5=PO&.dQUO,5=PO&.nQUO,5=PO&.sQUO,5=PO&.xQUO,5=PO!6nQUO,5=PO#NeQUO1G3XO&/SQUO1G4mO!<[QUO1G4mO&1OQUO1G4pO&2qQVO1G4pOOQQ1G.}1G.}OOQQ1G.|1G.|OOQQ1G2i1G2iO!IwQ&lO1G3XO&2xQUO'#LOO@XQVO'#EiO&4RQUO'#F]OOQQ'#Ja'#JaO&4WQUO'#FZO&4cQUO'#LOO&4kQUO,5;tO&4pQUO1G.qOOQQ1G.q1G.qOOQR1G/|1G/|O&6cQ!dO'#JPO&6hQbO,59xO&8yQ!eO'#D`O&9QQ!dO'#JRO&9VQbO,5@xO&9VQbO,5@xOOQR1G/c1G/cO&9bQbO1G/cO&9gQ&lO'#GeO&:eQbO,59cOOQR1G7Z1G7ZO#@[QUO1G1VO&:pQUO1G1^OBUQUO1G1VO&=RQUO'#CyO#*wQbO,59cO&@tQUO1G6sOOQR-E<{-E<{O&BWQUO1G0dO#6WQUO1G0dOOQQ-E=U-E=UO#6tQUO1G0dOOQQ1G0l1G0lO&B{QUO,59iOOQQ1G3l1G3lO&CcQUO,59iO&CyQUO,59iO!M_QVO1G4gO!(zQVO'#JYO&DeQUO,5AcOOQQ1G0o1G0oO!(zQVO1G0oO!6nQUO'#JnO&DmQUO,5AvOOQQ1G3p1G3pOOQR1G1V1G1VO&HjQVO'#FOO!M_QVO,5;sOOQQ,5;s,5;sOBUQUO'#JcO&JfQUO,5AiO&JnQVO'#E[OOQR1G1^1G1^O&M]QUO'#L[OOQR1G1n1G1nOOQR-E=f-E=fOOQR1G7]1G7]O#DhQUO1G7]OGVQUO1G7]O#DhQUO1G7_OOQR1G7_1G7_O&MeQUO'#G}O&MmQUO'#LWOOQQ,5=h,5=hO&M{QUO,5=jO&NQQUO,5=kOOQR1G7`1G7`O#EfQVO1G7`O&NVQUO1G7`O' ]QVO,5=kOOQR1G1U1G1UO$.vQUO'#E]O'!RQUO'#E]OOQQ'#Ky'#KyO'!lQUO'#KxO'!wQUO,5;UO'#PQUO'#ElO'#dQUO'#ElO'#wQUO'#EtOOQQ'#J['#J[O'#|QUO,5;cO'$sQUO,5;cO'%nQUO,5;dO'&tQVO,5;dOOQQ,5;d,5;dO''OQVO,5;dO'&tQVO,5;dO''VQUO,5;bO'(SQUO,5;eO'(_QUO'#KpO'(gQUO,5:vO'(lQUO,5;fOOQQ1G0n1G0nOOQQ'#J]'#J]O''VQUO,5;bO!4xQUO'#E}OOQQ,5;b,5;bO')gQUO'#E`O'+aQUO'#E{OHrQUO1G0nO'+fQUO'#EbOOQQ'#JX'#JXO'-OQUO'#KrOOQQ'#Kr'#KrO'-xQUO1G0eO'.pQUO1G3kO'/vQVO1G3kOOQQ1G3k1G3kO'0QQVO1G3kO'0XQUO'#L_O'1eQUO'#KXO'1sQUO'#KWO'2OQUO,59gO'2WQUO1G/`O'2]QUO'#FPOOQR1G1]1G1]OOQR1G2g1G2gO$>uQUO1G2gO'2gQUO1G2gO'2rQUO1G0ZOOQR'#J`'#J`O'2wQVO1G1XO'8pQUO'#FTO'8uQUO1G1VO!6nQUO'#JdO'9TQUO,5;|O$0^QUO,5;|OOQQ'#Fc'#FcOOQQ,5;|,5;|O'9cQUO1G1fOOQR1G1f1G1fO'9kQUO,5<XO$.vQUO'#FWOBUQUO'#FWO'9rQUO,5<XO!(zQVO,5<XO'9zQUO,5<XO':PQVO1G1qO!0tQVO1G1qOOQR1G1v1G1vO'?oQUO1G1xOOQR1G1{1G1{O'?tQUO1G1|OBUQUO1G2]O'@}QVO1G1|O'CcQUO1G1|O'ChQUO'#GWO8zQUO1G2]OOQR1G2O1G2OOOQR1G2U1G2UOOQR1G2W1G2WOOQR1G2Y1G2YO'CmQUO1G2^O!4xQUO1G2^OOQR1G2v1G2vO'CuQUO1G2vO$>}QUO1G2`OOQQ'#Cu'#CuO'CzQUO'#G[O'DuQUO'#G[O'DzQUO'#LRO'EYQUO'#G_OOQQ'#LS'#LSO'EhQUO1G2`O'EmQVO1G1kO'HOQVO'#GUOBUQUO'#FWOOQR'#Je'#JeO'EmQVO1G1kO'HYQUO'#FvOOQR1G2f1G2fO'H_QUO1G2gO'HdQUO'#JgO'2gQUO1G2gO!(zQVO1G2tO'HlQUO1G2xO'IuQUO1G3QO'J{QUO1G3XOOQQ1G3o1G3oO'KaQUO1G3oOOQR1G3Z1G3ZO'KfQUO'#KZO'2]QUO'#LTOGkQUO'#LVOOQR'#Gy'#GyO#DhQUO'#LXOOQR'#HQ'#HQO'KpQUO'#GvO'#wQUO'#GuOOQR1G2{1G2{O'LmQUO1G2{O'MdQUO1G3ZO'MoQUO1G3_O'MtQUO1G3_OOQR1G3_1G3_O'M|QUO'#H]OOQR'#H]'#H]O( VQUO'#H]O!(zQVO'#H`O!(zQVO'#H_OOQR'#LZ'#LZO( [QUO'#LZOOQR'#Jk'#JkO( aQVO,5=vOOQQ,5=v,5=vO( hQUO'#H^O( pQUO'#HZOOQQ1G3a1G3aO( zQUO,5@vOOQQ,5@v,5@vO%)WQUO,5@vO%)]QUO,5@vO%$VQUO,5:eO(%iQUO'#KkO(%wQUO'#KkOOQQ,5:e,5:eOOQQ'#JS'#JSO(&SQUO'#D}O(&^QUO'#KqOGkQUO'#LVO('YQUO'#D}OOQQ'#Hp'#HpOOQQ'#Hr'#HrOOQQ'#Hs'#HsOOQQ'#Kl'#KlOOQQ'#JU'#JUO('dQUO,5:hOOQQ,5:h,5:hO((aQUO'#LVO((nQUO'#HtO()UQUO,5@vO()]QUO'#H{O()hQUO'#L^O()pQUO,5>fO()uQUO'#L]OOQQ1G3}1G3}O(-lQUO1G3}O(-sQUO1G3}O(-zQUO1G4TO(/QQUO1G4TO(/VQUO,5A|O!6nQUO1G4hO!(zQVO'#IiOOQQ1G4m1G4mO(/[QUO1G4mO(1_QVO1G4pPOOO1G.h1G.hP!A_{,UO1G.hP(3_QUO'#LeP(3j{,UO1G.hP(3o{7[O1G.hPO{O-E=s-E=sPOOO,5A},5A}P(3w{,UO,5A}POOO1G5Q1G5QO!(zQVO7+$[O(3|QUO'#CyOOQQ,59^,59^O(4XQbO,59cO(4dQbO,59^OOQQ,59],59]OOQQ7+)w7+)wO!M_QVO'#JtO(4oQUO,5@kOOQQ1G.n1G.nOOQQ1G2k1G2kO(4wQUO1G2kO(4|QUO7+(sOOQQ7+*X7+*XO(7bQUO7+*XO(7iQUO7+*XO(1_QVO7+*[O#NeQUO7+(sO(7vQVO'#JbO(8ZQUO,5AjO(8cQUO,5;vOOQQ'#Co'#CoOOQQ,5;w,5;wO!(zQVO'#F[OOQQ-E=_-E=_O!M_QVO,5;uOOQQ1G1`1G1`OOQQ,5?k,5?kOOQQ-E<}-E<}OOQR'#Dg'#DgOOQR'#Di'#DiOOQR'#Dl'#DlO(9lQ!eO'#K_O(9sQMkO'#K_O(9zQ!eO'#K_OOQR'#K_'#K_OOQR'#JQ'#JQO(:RQ!eO,59zOOQQ,59z,59zO(:YQbO,5?mOOQQ-E=P-E=PO(:hQbO1G6dOOQR7+$}7+$}OOQR7+&q7+&qOOQR7+&x7+&xO'8uQUO7+&qO(:sQUO7+&OO#6WQUO7+&OO(;hQUO1G/TO(<OQUO1G/TO(<jQUO7+*ROOQQ7+*V7+*VO(>]QUO,5?tOOQQ-E=W-E=WO(?fQUO7+&ZOOQQ,5@Y,5@YOOQQ-E=l-E=lO(?kQUO'#LOO@XQVO'#EiO(@wQUO1G1_OOQQ1G1_1G1_O(BQQUO,5?}OOQQ,5?},5?}OOQQ-E=a-E=aO(BfQUO'#KpOOQR7+,w7+,wO#DhQUO7+,wOOQR7+,y7+,yO(BsQUO,5=iO#DsQUO'#JjO(CUQUO,5ArOOQR1G3U1G3UOOQR1G3V1G3VO(CdQUO7+,zOOQR7+,z7+,zO(E[QUO,5:wO(FyQUO'#EwO!(zQVO,5;VO(GlQUO,5:wO(GvQUO'#EpO(HXQUO'#EzOOQQ,5;Z,5;ZO#K]QVO'#ExO(HoQUO,5:wO(HvQUO'#EyO#GgQUO'#JZO(J`QUO,5AdOOQQ1G0p1G0pO(JkQUO,5;WO!<[QUO,5;^O(KUQUO,5;_O(KdQUO,5;WO(MvQUO,5;`OOQQ-E=Y-E=YO(NOQUO1G0}OOQQ1G1O1G1OO(NyQUO1G1OO)!PQVO1G1OO)!WQVO1G1OO)!bQUO1G0|OOQQ1G0|1G0|OOQQ1G1P1G1PO)#_QUO'#JoO)#iQUO,5A[OOQQ1G0b1G0bOOQQ-E=Z-E=ZO)#qQUO,5;iO!<[QUO,5;iO)$nQVO,5:zO)$uQUO,5;gO$ mQUO7+&YOOQQ7+&Y7+&YO!(zQVO'#EfO)$|QUO,5:|OOQQ'#Ks'#KsOOQQ-E=V-E=VOOQQ,5A^,5A^OOQQ'#Jl'#JlO)(qQUO7+&PPOQQ7+&P7+&POOQQ7+)V7+)VO))iQUO7+)VO)*oQVO7+)VOOQQ,5>m,5>mO$)YQVO'#JsO)*vQUO,5@rOOQQ1G/R1G/ROOQQ7+$z7+$zO)+RQUO7+(RO)+WQUO7+(ROOQR7+(R7+(RO$>uQUO7+(ROOQQ7+%u7+%uOOQR-E=^-E=^O!0VQUO,5;oOOQQ,5@O,5@OOOQQ-E=b-E=bO$0^QUO1G1hOOQQ1G1h1G1hOOQR7+'Q7+'QOOQR1G1s1G1sOBUQUO,5;rO)+tQUO,5<YO)+{QUO1G1sO)-UQUO1G1sO!0tQVO7+']O)-ZQVO7+']O)2yQUO7+'dO)3OQVO7+'hO)5dQUO7+'wO)5nQUO7+'hO)6tQVO7+'hOKkQUO7+'wO$>hQUO,5<rO!4xQUO7+'xO)6{QUO7+'xOOQR7+(b7+(bO)7QQUO7+'zO)7VQUO,5<vO'CzQUO,5<vO)7}QUO,5<vO'CzQUO,5<vOOQQ,5<w,5<wO)8`QVO,5<xO'EYQUO'#JfO)8jQUO,5AmO)8rQUO,5<yOOQR7+'z7+'zO)8}QVO7+'VO)5gQUO'#K}OOQR-E=c-E=cO);`QVO,5<bOOQQ,5@R,5@RO!6nQUO,5@ROOQQ-E=e-E=eO)=wQUO7+(`O)>}QUO7+(dO)?SQVO7+(dOOQQ7+(l7+(lOOQQ7+)Z7+)ZO)?[QUO'#KjO)?fQUO'#KjOOQR,5=b,5=bO)?sQUO,5=bO!;bQUO,5=bO!;bQUO,5=bO!;bQUO,5=bOOQR7+(g7+(gOOQR7+(u7+(uOOQR7+(y7+(yOOQR,5=w,5=wO)?xQUO,5=zO)AOQUO,5=yOOQR,5Au,5AuOOQR-E=i-E=iOOQQ1G3b1G3bO)BUQUO,5=xO)BZQVO'#EfOOQQ1G6b1G6bO%)WQUO1G6bO%)]QUO1G6bOOQQ1G0P1G0POOQQ-E=Q-E=QO)DrQUO,5AVO(%iQUO'#JTO)D}QUO,5AVO)D}QUO,5AVO)EVQUO,5:iO8zQUO,5:iOOQQ,5>],5>]O)EaQUO,5AqO)EhQUO'#EVO)FrQUO'#EVO)G]QUO,5:iO)GgQUO'#HlO)GgQUO'#HmOOQQ'#Ko'#KoO)HUQUO'#KoO!(zQVO'#HnOOQQ,5:i,5:iO)HvQUO,5:iO!M_QVO,5:iOOQQ-E=S-E=SOOQQ1G0S1G0SOOQQ,5>`,5>`O)H{QUO1G6bO!(zQVO,5>gO)LjQUO'#JrO)LuQUO,5AxOOQQ1G4Q1G4QO)L}QUO,5AwOOQQ,5Aw,5AwOOQQ7+)i7+)iO*!lQUO7+)iOOQQ7+)o7+)oO*'kQVO1G7hO*)mQUO7+*SO*)rQUO,5?TO**xQUO7+*[POOO7+$S7+$SP*,kQUO'#LfP*,sQUO,5BPP*,x{,UO7+$SPOOO1G7i1G7iO*,}QUO<<GvOOQQ1G.x1G.xOOQQ'#IT'#ITO*.pQUO,5@`OOQQ,5@`,5@`OOQQ-E=r-E=rOOQQ7+(V7+(VOOQQ<<Ms<<MsO*/yQUO<<MsO*1|QUO<<MvO*3oQUO<<L_O*4TQUO,5?|OOQQ,5?|,5?|OOQQ-E=`-E=`OOQQ1G1b1G1bO*5^QUO,5;vO*6dQUO1G1aOOQQ1G1a1G1aOOQR,5@y,5@yO*7mQ!eO,5@yO*7tQMkO,5@yO*7{Q!eO,5@yOOQR-E=O-E=OOOQQ1G/f1G/fO*8SQ!eO'#DwOOQQ1G5X1G5XOOQR<<J]<<J]O*8ZQUO<<IjO*9OQUO7+$oOOQQ<<Iu<<IuO(7vQVO,5;ROOQR<=!c<=!cOOQQ1G3T1G3TOOQQ,5@U,5@UOOQQ-E=h-E=hOOQR<=!f<=!fO*9{QUO1G0cO*:SQUO'#EzO*:dQUO1G0cO*:kQUO'#I}O*<RQUO1G0qO!(zQVO1G0qOOQQ,5;[,5;[OOQQ,5;],5;]OOQQ,5?u,5?uOOQQ-E=X-E=XO!<[QUO1G0xO*=bQUO1G0xOOQQ1G0y1G0yO*=sQUO'#ElOOQQ1G0z1G0zOOQQ7+&j7+&jO*>XQUO7+&jO*?_QVO7+&jOOQQ7+&h7+&hOOQQ,5@Z,5@ZOOQQ-E=m-E=mO*@ZQUO1G1TO*@eQUO1G1TO*AOQUO1G0fOOQQ1G0f1G0fO*BUQUO'#K{O*B^QUO1G1ROOQQ<<It<<ItOOQQ'#Hb'#HbO'+fQUO,5={OOQQ'#Hd'#HdO'+fQUO,5=}OOQQ-E=j-E=jPOQQ<<Ik<<IkPOQQ-E=k-E=kOOQQ<<Lq<<LqO*BcQUO'#LaO*CoQUO'#L`OOQQ,5@_,5@_OOQQ-E=q-E=qOOQR<<Km<<KmO$>uQUO<<KmO*C}QUO<<KmOOQR1G1Z1G1ZOOQQ7+'S7+'SO!M_QVO1G1tO*DSQUO1G1tOOQR7+'_7+'_OOQR<<Jw<<JwO!0tQVO<<JwOOQR<<KO<<KOO*D_QUO<<KSO*EeQVO<<KSOKkQUO<<KcO!M_QVO<<KcO*ElQUO<<KSO!0tQVO<<KSO*FuQUO<<KSO*FzQUO<<KcO*GVQUO<<KdOOQR<<Kd<<KdOOQR<<Kf<<KfO*G[QUO1G2bO)7VQUO1G2bO'CzQUO1G2bO*GmQUO1G2dO*HsQVO1G2dOOQQ1G2d1G2dO*H}QVO1G2dO*IUQUO,5@QOOQQ-E=d-E=dOOQQ1G2e1G2eO*IdQUO1G1|O*JmQVO1G1|O*JtQUO1G1|OOQQ1G5m1G5mOOQR<<Kz<<KzOOQR<<LO<<LOO*JyQVO<<LOO*KUQUO<<LOOOQR1G2|1G2|O*KZQUO1G2|O*KbQUO1G3eOOQR1G3d1G3dOOQQ7++|7++|O%)WQUO7++|O*KmQUO1G6qO*KmQUO1G6qO(%iQUO,5?oO*KuQUO,5?oOOQQ-E=R-E=RO*LQQUO1G0TOOQQ1G0T1G0TO*L[QUO1G0TO!M_QVO1G0TO*LaQUO1G0TOOQQ1G3w1G3wO*LkQUO,5:qO)EhQUO,5:qO*MXQUO,5:qO)EhQUO,5:qO$#uQUO,5:uO*MvQVO,5>VO)GgQUO'#JpO*NQQUO1G0TO*NcQVO1G0TOOQQ1G3u1G3uO*NjQUO,5>WO*NuQUO,5>XO+ dQUO,5>YO+!jQUO1G0TO%)]QUO7++|O+#pQUO1G4ROOQQ,5@^,5@^OOQQ-E=p-E=pOOQQ<<MT<<MTOOQQ<<Mn<<MnO+$yQUO1G4oP+&|QUO'#JvP+'UQUO,5BQPO{O1G7k1G7kPOOO<<Gn<<GnOOQQANC_ANC_OOQR1G6e1G6eO+'^Q!eO,5:cOOQQ,5:c,5:cO+'eQUO1G0mO+(qQUO7+&]O+*QQUO7+&dO+*cQUO,5;WOOQQ<<JU<<JUO+*qQUO7+&oOOQQ7+&Q7+&QO!4xQUO'#J^O++lQUO,5AgOOQQ7+&m7+&mOOQQ1G3g1G3gO++tQUO1G3iOOQQ,5>n,5>nO+/iQUOANAXOOQRANAXANAXO+/nQUO7+'`OOQRAN@cAN@cO+0zQVOAN@nO+1RQUOAN@nO!0tQVOAN@nO+2[QUOAN@nO+2aQUOAN@}O+2lQUOAN@}O+3rQUOAN@}OOQRAN@nAN@nO!M_QVOAN@}OOQRANAOANAOO+3wQUO7+'|O)7VQUO7+'|OOQQ7+(O7+(OO+4YQUO7+(OO+5`QVO7+(OO+5gQVO7+'hO+5nQUOANAjOOQR7+(h7+(hOOQR7+)P7+)PO+5sQUO7+)PO+5xQUO7+)POOQQ<= h<= hO+6QQUO7+,]O+6YQUO1G5ZOOQQ1G5Z1G5ZO+6eQUO7+%oOOQQ7+%o7+%oO+6vQUO7+%oO*NcQVO7+%oOOQQ7+)a7+)aO+6{QUO7+%oO+8RQUO7+%oO!M_QVO7+%oO+8]QUO1G0]O*LkQUO1G0]O)EhQUO1G0]OOQQ1G0a1G0aO+8zQUO1G3qO+:QQVO1G3qOOQQ1G3q1G3qO+:[QVO1G3qO+:cQUO,5@[OOQQ-E=n-E=nOOQQ1G3r1G3rO%)WQUO<= hOOQQ7+*Z7+*ZPOQQ,5@b,5@bPOQQ-E=t-E=tOOQQ1G/}1G/}OOQQ,5?x,5?xOOQQ-E=[-E=[OOQRG26sG26sO+:zQUOG26YO!0tQVOG26YO+<TQUOG26YOOQRG26YG26YO!M_QVOG26iO!0tQVOG26iO+<YQUOG26iO+=`QUOG26iO+=eQUO<<KhOOQQ<<Kj<<KjOOQRG27UG27UOOQR<<Lk<<LkO+=vQUO<<LkOOQQ7+*u7+*uOOQQ<<IZ<<IZO+={QUO<<IZO!M_QVO<<IZO+>QQUO<<IZO+?WQUO<<IZO*NcQVO<<IZOOQQ<<L{<<L{O+?iQUO7+%wO*LkQUO7+%wOOQQ7+)]7+)]O+@WQUO7+)]O+A^QVO7+)]OOQQANESANESO!0tQVOLD+tOOQRLD+tLD+tO+AeQUOLD,TO+BkQUOLD,TOOQRLD,TLD,TO!0tQVOLD,TOOQRANBVANBVOOQQAN>uAN>uO+BpQUOAN>uO+CvQUOAN>uO!M_QVOAN>uO+C{QUO<<IcOOQQ<<Lw<<LwOOQR!$( `!$( `O!0tQVO!$( oOOQR!$( o!$( oOOQQG24aG24aO+DjQUOG24aO+EpQUOG24aOOQR!)9EZ!)9EZOOQQLD){LD){O+EuQUO'#CgO(dQUO'#CgO+IrQUO'#CyO+LcQUO'#CyO!E{QUO'#CyO+M[QUO'#CyO+MoQUO'#CyO,#bQUO'#CyO,#rQUO'#CyO,$PQUO'#CyO,$[QbO,59cO,$gQbO,59cO,$rQbO,59cO,$}QbO'#CwO,%`QbO'#CwO,%qQbO'#CwO,&SQUO'#CgO,(gQUO'#CgO,(tQUO'#CgO,+iQUO'#CgO,.lQUO'#CgO,.|QUO'#CgO,2uQUO'#CgO,2|QUO'#CgO,3|QUO'#CgO,6VQUO,5:xO#?kQUO,5:xO#?kQUO,5:xO#=ZQUO'#L[O,6sQbO'#CwO,7OQbO'#CwO,7ZQbO'#CwO,7fQbO'#CwO#6tQUO'#E^O,7qQUO'#E^O,9OQUO'#HgO,9pQbO'#CwO,9{QbO'#CwO,:WQUO'#CvO,:]QUO'#CvO,:bQUO'#CoO,:pQbO,59cO,:{QbO,59cO,;WQbO,59cO,;cQbO,59cO,;nQbO,59cO,;yQbO,59cO,<UQbO,59cO,6VQUO1G0dO,<aQUO1G0dO#?kQUO1G0dO,7qQUO1G0dO,>nQUO'#KZO,?OQUO'#CyO,?^QbO,59cO,6VQUO7+&OO,<aQUO7+&OO,?iQUO'#EwO,@[QUO'#EzO,@{QUO'#E^O,AQQUO'#GcO,AVQUO'#CvO,A[QUO'#CwO,AaQUO'#CwO,AfQUO'#CvO,AkQUO'#GcO,ApQUO'#KZO,B^QUO'#KZO,BhQUO'#CvO,BsQUO'#CvO,COQUO'#CvO,<aQUO,5:xO,7qQUO,5:xO,7qQUO,5:xO,CZQUO'#KZO,CnQbO'#CwO,CyQUO'#CrO,DOQUO'#E^",stateData:",Dt~O(nOSSOSTOSRPQVPQ'ePQ'gPQ'hPQ'iPQ'jPQ'kPQ'lPQ'mPQ~O*ZOS~OPmO]eOa!]Od!POlTOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!VfO!X!XO!Y!WO!i!YO!opO!r!`O!s!aO!t!aO!u!bO!v!aO!x!cO!{!dO#V#QO#a#VO#b#TO#i#OO#p!xO#t!fO#v!eO$R!gO$T!hO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO${!tO$}!uO%U!yO%_#ZO%`#[O%a#YO%c!zO%e#UO%g!{O%l#SO%o!|O%v!}O%|#PO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(rRO)PYO)SaO)U|O)V{O)WiO)X!ZO)YXO)hcO)idO~OR#bOV#]O'e#^O'g#_O'h#`O'i#`O'j#aO'k#aO'l#_O'm#_O~OX#dO(p#dO(q#fO~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(uZX(v$]X(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)WZX)XZX)jZX~O)WiX!UZX~P(dO]#}O!V#lO!X#{O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO(w#kO(x#kO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O~Od$RO%Y$SO'[$TO'_$UO(y$OO~Ol$VO~O!T$WO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X~Ol$VO~P.ZOl$VO!g$YO)j$YO~OX$ZO)Z$ZO~O!R$[O)X)QP)])QP~OPmO]$eOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~Ol$_O#t$lO(rRO~P0zO](]Xa'yXd(]Xl'yXl(]Xr'yXr(]Xs'yXs(]Xt'yXt(]Xu'yXu(]Xv'yXv(]Xw'yXw(]Xx'yXx(]Xy'yXy(]X{'yX}'yX!V(]X!o(]X!r'yX!r(]X!s'yX!s(]X!t'yX!t(]X!u'yX!u(]X!v'yX!v(]X!x'yX!x(]X!{(]X#a'yX#b'yX%e'yX%l'yX%o(]X%v(]X&m'yX&r'yX&s'yX(r'yX(r(]X)S(]X)U(]X)V(]X~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO&r#WO&s$wO])aXd)aXl)aX!V)aX!{)aX%v)aX(r)aX)S)aX)U)aX)V)aX~O)W$vO~P:nOPmO]eOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO!|%RO(r$xO~P<lO)S%SO~Oa!]Ol$_O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r:}O~P<lOPmO]$eOa%QOl:zO!V$fO!W%_O!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r;OO)S%dO)U%iO)V%iO~O(v%mO~O)W#jO~O(r%nO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OP%oO(oQO~PCQO]%hOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO%o!|O%v!}O)S;`O)U|O)V|O~Ol%rO!o%wO(r$xO~PE_O!TxO#v!eO(v%yO)j%|O])eX!V)eX~O]%hOd!POl%rO!V%kO!{!dO%v!}O(r$xO)S;`O)U|O)V|O~O!TxO#v!eO)W&PO)j&QO~O!U&TO~P!QO]&YO!TxO!V&WO)S&VO)U&ZO)V&ZO~Op&UO~PHrO]&cO!V&bO~OPmO]eOd!PO!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO%v$mO(r$xO~PIgO]%hOd!POl;[O!V%kO!{!dO%v$mO(r$xO)S;`O)U|O)V|O~Op&fO](tX])eX!V(tX!V)eX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!O)eX!U(tX~O!g$YO)j$YO~PL]O!g(tX)j(tX~PL]O](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!U(tX~O])eX!V)eX!O)eX~PNkOa&hO&m!RO]&lXd&lXl&lXr&lXs&lXt&lXu&lXv&lXw&lXx&lXy&lX}&lX!V&lX!r&lX!s&lX!t&lX!u&lX!v&lX!x&lX!{&lX%v&lX&r&lX&s&lX(r&lX)S&lX)U&lX)V&lX)W&lX!O&lX!T&lX!X&lX!Y&lX![&lX!^&lX!_&lX!a&lX!b&lX!c&lX!e&lX!f&lX!h&lX(u&lX(w&lX(x&lX)T&lX)X&lX!g&lX)j&lX!W&lXQ&lX!d&lX(v&lX!U&lX#v&lX~Op&fOl(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~P.ZO!g$YO)j$YO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O](}Xd(}Xl(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~O]#}O~P!*qO]&lO~O])bXa)bXd)bXl)bXr)bXs)bXt)bXu)bXv)bXw)bXx)bXy)bX{)bX})bX!V)bX!o)bX!r)bX!s)bX!t)bX!u)bX!v)bX!x)bX!{)bX#a)bX#b)bX%e)bX%l)bX%o)bX%v)bX&m)bX&r)bX&s)bX(r)bX)S)bX)U)bX)V)bX~O(oQO~P!-ZO%U&nO~P!-ZO]&oO~O]#}O~O!TxO~O$W&wO(r%nO(v&vO~O]&xOw&zO~O]&xO~OPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#p!xO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O]'PO~O!T$WO)W'RO~P!(zO)W'TO~O)W'UO~O(r'VO~O)W'YO~P!(zOl;^O%U'^O%e'^O(r;PO~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O(v'bO~O)W'dO~P!(zO!TxO(r%nO)j'fO~O(r%nO~O]'iO~O]'jOd%nXl%nX!V%nX!{%nX%v%nX(r%nX)S%nX)U%nX)V%nX~O]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~P8zO]%hOa!TOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO)S;`O)U|O)V|O~Ol;_Op&UO%v$mO(r;QO~P!8jO(r%nO(v'vO)W'wO~O]&cO!T'yO~Ol$oO}!_O!T(QO!l(VO(r$nO(v(PO)PYO~Ol$oO{(^O!T(ZO#b(^O(r$nO~Oa!TOl$oO{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O](`O~OPmOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)YXO)hcO)idO~O](bO)X(cO~P!=UO]#}O~P!<[OPmO]$eOa%QOl:zO!V(iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OY(jO(oQO(r%nO~O'f(mO~OS(qOT(nO*W(pO~O]#}O(n(tO~Q'nXX#dO(p#dO(q(vO~Od)QOl({O&r#WO(r(zO~O!Y'Sa!['Sa!^'Sa!_'Sa!a'Sa!b'Sa!c'Sa!e'Sa!f'Sa!h'Sa(u'Sa)S'Sa)T'Sa)U'Sa)V'Sa)W'Sa)X'Sa!g'Sa)j'Sa!O'Sa!W'Sa(v'Sa!U'SaQ'Sa!d'Sa~OPmOa%QOl:zO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO]'Sa!V'Sa!X'Sa(w'Sa(x'Sa~P!B_O!T$WO!O(sP~P!(zO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!TnX!VnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX(u%WX(w%WX(x%WX)SnX)S%WX)T%WX)UnX)U%WX)VnX)V%WX)W%WX)X%WX)jmX!O%WX~O)WnX!OnX!U%WX~P!E{O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~P8zOPmO]$eOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!V)lO~P!JwOd)oO%Y)pO(y$OO~O!T$WO!V)rO(w)sO!U)rP~P!JwO!T$WO~P!(zO)[)zO~Ol){O]!QX!h!QX)X!QX)]!QX~O])}O!h*OO)X)QX)])QX~O)X*SO)]*RO~Od$RO%Y*TO'[$TO'_$UO(y$OO~Ol*UO~Ol*UO!O(}X~P.ZOl*UO!g$YO)j$YO~O)W*VO~P:nOPmO]$eOa!]Ol$_Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)X!ZO)YXO)hcO)idO~Op&fO~P!&zOp&fO!W(tX(v(tXQ(tX!d(tX~PNkO]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~O]iXdiXlgXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!TiX!hiX)XiX)jiX!OiX~O!liX(viX)WiX!XiX!YiX![iX!^iX!_iX!aiX!biX!ciX!eiX!fiX(uiX(wiX(xiX)TiX!giX!WiXQiX!diX!UiX#viX#TiX#ViX#piXaiX{iX!oiX#aiX#biX#iiX#tiX${iX%ciX%eiX%kiX%liX%oiX&miX)PiX~P#%yO(y*ZO~Ol*[O~O](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!T(}X!X(}X!Y(}X![(}X!^(}X!_(}X!a(}X!b(}X!c(}X!e(}X!f(}X!h(}X(u(}X(w(}X(x(}X)T(}X)X(}X!g(}X)j(}X!O(}X!W(}XQ(}X!d(}X(v(}X!U(}X#v(}X~Ol*[O~P#+ROr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO])aad)aal)aa!V)aa!{)aa%v)aa(r)aa)S)aa)U)aa)V)aaQ)aa!d)aa!h)aa)X)aa)j)aa!O)aa!T)aa(v)aa)W)aa~O&r#WO&s$wO~P#.qOp&fOl(}X~P#+RO&r)aa~P#.qO]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX!OZX~O!WZX(vZX!UZXQZX!dZX~P#1jO]#}O!V#lO!X#{O(w#kO(x#kO~O!Y&xa![&xa!^&xa!_&xa!a&xa!b&xa!c&xa!e&xa!f&xa!g&xa!h&xa(u&xa)S&xa)T&xa)U&xa)V&xa)W&xa)X&xa)j&xa!O&xa!W&xa(v&xa!U&xaQ&xa!d&xa~P#3zOl;hO!T$WO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PKkOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PKkO]&cO!V&bO!O#Qa!T#Qa!h#Qa#v#Qa)W#Qa)j#QaQ#Qa!d#Qa(v#Qa~Op&fO!T$WO~O!O*cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O*cO~O]&cO!O*eO!V&bO~O]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~O!OqXQqX!dqX!hqX)XqX)WqX~P#9{O!O*hO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W)kX~P#3zO!W*kO!h*lO~O!W*kO!h*lO~P!(zO!W*kO~Op&fO!g$YO!h*mO)j$YO](tX!V(tX!W(tX!W*OX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)X(tX~O!h(tX~P#=ZO!W*oO~Od$RO%Y*TO(y:rO~Ol;kO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PBUO]*vO!T*qO!V&bO!h*tO#v!eO)j*rO)W)qX~O!h*tO)W)qX~O)W*wO~Op&fO])eX!T)eX!V)eX!h)eX#v)eX)W)eX)j)eX!O)eXQ)eX!d)eX(v)eX~Op&fO~OP%oO(oQO]%ha!V%ha!X%ha!Y%ha![%ha!^%ha!_%ha!a%ha!b%ha!c%ha!e%ha!f%ha!h%ha(r%ha(u%ha(w%ha(x%ha)S%ha)T%ha)U%ha)V%ha)W%ha)X%ha!g%ha)j%ha!O%ha!W%ha(v%ha!U%haQ%ha!d%ha~Od$RO%Y$SO(y:oO~Ol:wO~O!TxO#v!eO)j%|O~Ol<[O&r#WO(r;gO~O$Z+TO%`+UO~O!TxO#v!eO)W+VO)j+WO~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO$Z+TO%_#ZO%`+YO%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!U+ZO~P!QOa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a+aO#b+bO#i+cO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO)PYO~OQ)lP!d)lP~P#GgO]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO)S&VO)U&ZO)V&ZO~O!O#kX!T#kX#v#kX)W#kX)j#kXQ#kX!d#kX!h#kX)X#kX!x#kX(v#kX~P#IkOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!W+iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S+jO)V$kO)X!ZO)YXO)hcO)idO~O]&cO!V+kO~O]&YO!V&WO)PYO)S&VO)U&ZO)V&ZO)X+nO!O)dP~P8zO]&YO!V&WO)S&VO)U&ZO)V&ZO~O!O#nX!T#nX#v#nX)W#nX)j#nXQ#nX!d#nX!h#nX)X#nX!x#nX(v#nX~P#NeO!TxO])nX!V)nX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O#T+vO#p+wO(x+tO)U+rO)V+rO~O]#jX!T#jX!V#jX!O#jX#v#jX)W#jX)j#jXQ#jX!d#jX!h#jX)X#jX!x#jX(v#jX~P$ xO#V+yO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO])fP!T)fP!V)fP#v)fP(v)fP)j)fP!O)fP!h)fP)W)fP~O!x)fPQ)fP!d)fP~P$#uOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)V$kO)X!ZO)YXO)hcO)idO~O!W,QO)S,RO~P$%pO)PYO)X+nO!O)dP~P8zO]&cO!V&bO!O&Za!T&Za!h&Za#v&Za)W&Za)j&ZaQ&Za!d&Za(v&Za~OPmO]$eOa!]Ol:|Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;RO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OQ(zP!d(zP~P$)YO]#}O!V#lO(w#kO(x#kO!X'Pa!Y'Pa!['Pa!^'Pa!_'Pa!a'Pa!b'Pa!c'Pa!e'Pa!f'Pa!h'Pa(u'Pa)S'Pa)T'Pa)U'Pa)V'Pa)W'Pa)X'Pa!g'Pa)j'Pa!O'Pa!W'Pa(v'Pa!U'PaQ'Pa!d'Pa~O]#}O!V#lO!X#{O(w#kO(x#kO~P!B_O!TxO#t!fO)PYO~P8zO!TxO(r%nO)j,[O~O#x,aO~OQ)aX!d)aX!h)aX)X)aX)j)aX!O)aX!T)aX(v)aX)W)aX~P:nO(v,eO(w,cO)P$UX)W$UX~O(r,fO~O)PYO)W,iO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O(r;SO~P$0kOPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O$h,sO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO$}!uO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O${,yO(r:}O)W,wO~P$7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W,{O)X#|O~P#3zO)W,{O~O)W,|O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W,}O)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-OO)X#|O~P#3zOp&fO)PYO)j-QO~O)W-RO~Ol;^O(r;PO~O]-YO!{!dO&r#WO&s$wO(r-UO)S-VO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v-]O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xa!o$Xa!{$Xa#i$Xa#p$Xa#t$Xa#v$Xa$R$Xa$T$Xa$Y$Xa$Z$Xa${$Xa%U$Xa%c$Xa%g$Xa%o$Xa%|$Xa(k$Xa)U$Xa!U$Xa$c$Xa~P$0kO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-cO)X#|O~P#3zOl-eO!TxO)j,[O~O)j-gO~O]&]a!X&]a!Y&]a![&]a!^&]a!_&]a!a&]a!b&]a!c&]a!e&]a!f&]a!h&]a(u&]a(w&]a(x&]a)T&]a)U&]a)V&]a)W&]a)X&]a!g&]a)j&]a!O&]a!W&]a!T&]a#v&]a(v&]a!U&]aQ&]a!d&]a~O)S-kO!V&]a~P$DbO!O-kO~O!W-kO~O!V-lO)S&]a~P$DbO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X~Ol;mO~P$GQO]&cO!V&bO)W-mO~Ol;cO!o-pO#V+yO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO!n-yO(r,fO~O)PYO)W-{O~OPmO]$eOa%QOl:zO!T.QO!V$fO!X!XO!Y!WO!i!YO#V.XO#a.WO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO(x.PO)S$kO)V$kO)W-}O)X!ZO)YXO)hcO)idO~O!U.VO~P$JbO])^Xd)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)W)^X!O)^X!h)^X)X)^X!X)^X!Y)^X![)^X!^)^X!_)^X!a)^X!b)^X!c)^X!e)^X!f)^X(u)^X(w)^X(x)^X)T)^X!g)^X)j)^X!W)^XQ)^X!d)^X#T)^X#V)^X#p)^X#v)^Xa)^X{)^X!o)^X#a)^X#b)^X#i)^X#t)^X${)^X%c)^X%e)^X%k)^X%l)^X%o)^X&m)^X)P)^X!U)^X~Ol*[O~P$LlOl$oO!T(QO!l.^O(r$nO(v(PO)PYO~Op&fOl)^X~P$LlOl$oO!n.cO!o.cO(r$nO)PYO~Ol;dO!U.nO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jO!T(QO!l.^O(v(PO])OXd)OXl)OXr)OXs)OXt)OXu)OXv)OXw)OXx)OXy)OX})OX!V)OX!r)OX!s)OX!t)OX!u)OX!v)OX!x)OX!{)OX%v)OX&r)OX&s)OX(r)OX)S)OX)U)OX)V)OX~O)W)OX!O)OX!X)OX!Y)OX![)OX!^)OX!_)OX!a)OX!b)OX!c)OX!e)OX!f)OX!h)OX(u)OX(w)OX(x)OX)T)OX)X)OX!g)OX)j)OX!W)OXQ)OX!d)OX!U)OX#v)OX~P%%eO!T(QO~O!T(QO(v(PO~O(r%nO!U*QP~O!T(ZO(v.uO]&kad&kal&kar&kas&kat&kau&kav&kaw&kax&kay&ka}&ka!V&ka!r&ka!s&ka!t&ka!u&ka!v&ka!x&ka!{&ka%v&ka&r&ka&s&ka(r&ka)S&ka)U&ka)V&ka)W&ka!O&ka!X&ka!Y&ka![&ka!^&ka!_&ka!a&ka!b&ka!c&ka!e&ka!f&ka!h&ka(u&ka(w&ka(x&ka)T&ka)X&ka!g&ka)j&ka!W&kaQ&ka!d&ka!U&ka#v&ka~Ol$oO!T(ZO(r$nO~O&r#WO&s$wO]&pad&pal&par&pas&pat&pau&pav&paw&pax&pay&pa}&pa!V&pa!r&pa!s&pa!t&pa!u&pa!v&pa!x&pa!{&pa%v&pa(r&pa)S&pa)U&pa)V&pa)W&pa!O&pa!T&pa!X&pa!Y&pa![&pa!^&pa!_&pa!a&pa!b&pa!c&pa!e&pa!f&pa!h&pa(u&pa(w&pa(x&pa)T&pa)X&pa!g&pa)j&pa!W&paQ&pa!d&pa(v&pa!U&pa#v&pa~O&s.zO~P!(zO!Y#qO![#rO!f#zO)S#mO!^'Ua!_'Ua!a'Ua!b'Ua!c'Ua!e'Ua!h'Ua(u'Ua)T'Ua)U'Ua)V'Ua)W'Ua)X'Ua!g'Ua)j'Ua!O'Ua!W'Ua(v'Ua!U'UaQ'Ua!d'Ua~P#3zO!V'dX!X'dX!Y'dX!['dX!^'dX!_'dX!a'dX!b'dX!c'dX!e'dX!f'dX!h'dX(u'dX(w'dX(x'dX)S'dX)T'dX)U'dX)V'dX)X'dX!O'dX~O].|O)W'dX!g'dX)j'dX!W'dX(v'dX!U'dXQ'dX!d'dX~P%2xO!Y#qO![#rO!f#zO)S#mO!^'Wa!_'Wa!a'Wa!b'Wa!c'Wa!e'Wa!h'Wa(u'Wa)T'Wa)U'Wa)V'Wa)W'Wa)X'Wa!g'Wa)j'Wa!O'Wa!W'Wa(v'Wa!U'WaQ'Wa!d'Wa~P#3zO]#}O!T$WO!V.}O&r#WO&s$wO~O!X'Za!Y'Za!['Za!^'Za!_'Za!a'Za!b'Za!c'Za!e'Za!f'Za!h'Za(u'Za(w'Za(x'Za)S'Za)T'Za)U'Za)V'Za)W'Za)X'Za!g'Za)j'Za!O'Za!W'Za(v'Za!U'ZaQ'Za!d'Za~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^a)W'^a!g'^a)j'^a!O'^a!W'^a(v'^a!U'^aQ'^a!d'^a~P#3zOPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O!W/QO~P%:oOS(qOT(nO]#}O*W(pO~O]/TO'f/UO*W/RO~OS/YOT(nO*W/XO~O]#}O~Q'na!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v/[O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W#Zi!O#Zi~P#3zO]cXlgXpcXpiX!VcX!XcX!YcX![cX!^cX!_cX!acX!bcX!ccX!ecX!fcX!gcX!hcX(ucX(wcX(xcX)ScX)TcX)UcX)VcX)WcX)XcX)jcX!OcX!WcX(vcX!TcX#vcX!UcXQcX!dcX~Od/^O%Y*TO(y/]O~Ol/_O~Ol/`O~Op&fO]bi!Vbi!Xbi!Ybi![bi!^bi!_bi!abi!bbi!cbi!ebi!fbi!gbi!hbi(ubi(wbi(xbi)Sbi)Tbi)Ubi)Vbi)Wbi)Xbi)jbi!Obi!Wbi(vbi!UbiQbi!dbi~O!W/bO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO![#rO)S#mO!Y&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y&zi![&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)S&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)U#nO)V#pO!h&zi(u&zi)T&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!a&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!f#zO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO!h&zi(u&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/cO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(sX~P#3zO!h/cO!O(sX~O!O/eO~O]%Xap%Xa!X%Xa!Y%Xa![%Xa!^%Xa!_%Xa!a%Xa!b%Xa!c%Xa!e%Xa!f%Xa!h%Xa(u%Xa(w%Xa(x%Xa)T%Xa)U%Xa)V%Xa)W%Xa)X%Xa!g%Xa)j%Xa!O%Xa!W%Xa!T%Xa#v%Xa(v%Xa!U%XaQ%Xa!d%Xa~O)S/fO!V%Xa~P&,aO!O/fO~O!W/fO~O!V/gO)S%Xa~P&,aO!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^i)W'^i!g'^i)j'^i!O'^i!W'^i(v'^i!U'^iQ'^i!d'^i~P#3zO!W/lO~P%:oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/nO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U)rX~P#3zO(r/qO~O!V/sO(w)sO)j/uO~O!h/nO!U)rX~O!U/vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO)X#|O!h_i(u_i)W_i!g_i)j_i!O_i!W_i(v_i!U_iQ_i!d_i~P#3zO!R/wO~Ol){O]!Qa!h!Qa)X!Qa)]!Qa~OP0PO]0OOl0PO!R0PO!T/|O!V/}O!X0PO!Y0PO![0PO!^0PO!_0PO!a0PO!b0PO!c0PO!e0PO!f0PO!g0PO!h0PO!i0PO(oQO(v0PO(w0PO(x0PO)S/yO)T/zO)U/zO)V/{O)W0PO)X0PO)YXO~O!O0SO~P&6yO!R$[O~O!h*OO)X)Qa)])Qa~O)]0WO~O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~Od)oO%Y*TO(y$OO~O)W0YO~O]nXdnXlmXpnXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!TnX!hnX)XnX!OnXQnX!dnX~O!lnX(vnX)WnX!XnX!YnX![nX!^nX!_nX!anX!bnX!cnX!enX!fnX(unX(wnX(xnX)TnX!gnX)jnX!WnX!UnX#vnX#TnX#VnX#pnXanX{nX!onX#anX#bnX#inX#tnX${nX%cnX%enX%knX%lnX%onX&mnX)PnX~P&:uOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO~O])aid)ail)ai!V)ai!{)ai%v)ai(r)ai)S)ai)U)ai)V)aiQ)ai!d)ai!h)ai)X)ai)j)ai!O)ai!T)ai&r)ai(v)ai)W)ai~P&?sO]&cO!V&bO!O#Qi!T#Qi!h#Qi#v#Qi)W#Qi)j#QiQ#Qi!d#Qi(v#Qi~O!OqaQqa!dqa!hqa)Xqa)Wqa~P#9{O!OqaQqa!dqa!hqa)Xqa)Wqa~P#IkO]&cO!V+kO!OqaQqa!dqa!hqa)Xqa)Wqa~O!h*iO!W)ka~O!h*mO!W*Oa~OPmOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!X!XO!Y!WO!i!YO!s!aO!t!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)WiO)X!ZO)YXO)hcO)idO~O]eOd!POlTO!T*qO!U&TO!V0hO!opO!r!`O!u!bO!{!dO#i#OO#p!xO#t!fO$R!gO$T!hO${!tO$}!uO%U!yO%c!zO%g!{O%o!|O%v!}O%|#PO(rRO(w)sO)SaO)U|O)V{O~P&DuO!h*tO)W)qa~OPmO]$eOa!]Ol:|O{#RO!T$WO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O(sP!O)dP~P&?sO!h*mO!W*OX~O]#}O!T$WO~O!h0sO!T)zX#v)zX)j)zX~O)W0uO~O)W0vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W0xO)X#|O~P#3zO)W0vO~P!?WO]1SOd!POl%bO!V1QO!{!dO%v$mO(r$xO)S0zO)X0}O~O)U1OO)V1OO)j0{OQ#PX!d#PX!h#PX!O#PX~P' dO!h1TOQ)lX!d)lX~OQ1VO!d1VO~O)X1YO)j1XOQ#`X!d#`X!h#`X~P!<[O)X1YO)j1XOQ#`X!d#`X!h#`X~P!;bOp&UO~O!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~P#IkO]&cO!V+kO!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~O!W1_O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1_O)S1aO~P$%pO!W1_O~P!(zO]#ja!T#ja!V#ja!O#ja#v#ja)W#ja)j#jaQ#ja!d#ja!h#ja)X#ja!x#ja(v#ja~P$ xO]&cO!O1eO!V+kO~O!h1fO!O)dX~O!O1hO~O]&cO!V+kO!O#na!T#na#v#na)W#na)j#naQ#na!d#na!h#na)X#na!x#na(v#na~O]1lOr#SXs#SXt#SXu#SXv#SXw#SXx#SXy#SX!T#SX!V#SX#T#SX#p#SX(x#SX)U#SX)V#SX!l#SX!x#SX#V#SX#v#SX(v#SX)j#SX!O#SX!h#SX)W#SXQ#SX!d#SX)X#SX~O]1mO~O]1pOl$oO!V$fO#V#QO(r$nO)hcO)idO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO~O])fX!T)fX!V)fX!x)fX#v)fX(v)fX)j)fX!O)fX!h)fX)W)fXQ)fX!d)fX~P'+}O!x!cO]#Ri!T#Ri!V#Ri#v#Ri(v#Ri)j#Ri!O#Ri!h#Ri)W#RiQ#Ri!d#Ri~O!W1xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1xO)S1zO~P$%pO!W1xO~P!(zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*RX!d*RX!h*RX~P#3zO)X1{OQ({X!d({X!h({X~O!h1|OQ(zX!d(zX~OQ2OO!d2OO~O!O2PO~O#t$lO)PYO~P8zOl-eO!TxO)j2TO~O!O2UO~O#x,aOP#ui]#uia#uid#uil#uir#uis#uit#uiu#uiv#uiw#uix#uiy#ui{#ui}#ui!T#ui!V#ui!X#ui!Y#ui!i#ui!o#ui!r#ui!s#ui!t#ui!u#ui!v#ui!x#ui!{#ui#V#ui#a#ui#b#ui#i#ui#p#ui#t#ui#v#ui$R#ui$T#ui$Y#ui$Z#ui$`#ui$e#ui$g#ui$h#ui$k#ui$m#ui$o#ui$q#ui$s#ui$u#ui$w#ui${#ui$}#ui%U#ui%_#ui%`#ui%a#ui%c#ui%e#ui%g#ui%l#ui%o#ui%v#ui%|#ui&m#ui&r#ui&s#ui'Q#ui'R#ui'V#ui'Y#ui'a#ui'b#ui(k#ui(o#ui(r#ui)P#ui)S#ui)U#ui)V#ui)W#ui)X#ui)Y#ui)h#ui)i#ui!U#ui$c#ui!n#ui%k#ui~O]&cO~O]&cO!TxO!V&bO#v!eO~O(v2ZO(w,cO)P$Ua)W$Ua~O)PYO)W2]O~O!O2^O~P,]O!O2^O)W#jO~O!O2^O~O$c2cOP$_i]$_ia$_id$_il$_ir$_is$_it$_iu$_iv$_iw$_ix$_iy$_i{$_i}$_i!T$_i!V$_i!X$_i!Y$_i!i$_i!o$_i!r$_i!s$_i!t$_i!u$_i!v$_i!x$_i!{$_i#V$_i#a$_i#b$_i#i$_i#p$_i#t$_i#v$_i$R$_i$T$_i$Y$_i$Z$_i$`$_i$e$_i$g$_i$h$_i$k$_i$m$_i$o$_i$q$_i$s$_i$u$_i$w$_i${$_i$}$_i%U$_i%_$_i%`$_i%a$_i%c$_i%e$_i%g$_i%l$_i%o$_i%v$_i%|$_i&m$_i&r$_i&s$_i'Q$_i'R$_i'V$_i'Y$_i'a$_i'b$_i(k$_i(o$_i(r$_i)P$_i)S$_i)U$_i)V$_i)W$_i)X$_i)Y$_i)h$_i)i$_i!U$_i~O]1pO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W2fO)X#|O~P#3zOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W2iO)X!ZO)YXO)hcO)idO~P&?sO)W2fO~O(r-UO~O)PYO)j2lO~O)W2nO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO(r-UO)S-VO~O)S2sO~O]&cO!V2uO!h2vO)W)uX~O]-YO!{!dO(r-UO)S-VO~O)W2yO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xi!o$Xi!{$Xi#i$Xi#p$Xi#t$Xi#v$Xi$R$Xi$T$Xi$Y$Xi$Z$Xi${$Xi%U$Xi%c$Xi%g$Xi%o$Xi%|$Xi(k$Xi)U$Xi!U$Xi$c$Xi~P$0kOl:{O(r:nO~P0zO]2}O~O)W2SO~O!u3PO(r%nO~O!O3SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h3TO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O3UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO]&cO!V+kO!T%ui#v%ui)W%ui)j%ui~O!W3VO~Ol:yO)W(}X~P$GQOa!TOl$oO{3]O#a#VO#b3[O#t!fO%e#UO%l3^O&m!RO&r#WO&s!TO(r$nO)PYO~P&?sOl;cO!o-pO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO]&cO!V&bO)W3`O~O)W3aO~O)PYO)W3aO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W3bO)X#|O~P#3zO)W3bO~O)W3eO~O!U3gO~P$JbOl$oO(r$nO~O]3iO!T'yO~P'+iO!T(QO!l3lO(v(PO])Oad)Oal)Oar)Oas)Oat)Oau)Oav)Oaw)Oax)Oay)Oa})Oa!V)Oa!r)Oa!s)Oa!t)Oa!u)Oa!v)Oa!x)Oa!{)Oa%v)Oa&r)Oa&s)Oa(r)Oa)S)Oa)U)Oa)V)Oa)W)Oa!O)Oa!X)Oa!Y)Oa![)Oa!^)Oa!_)Oa!a)Oa!b)Oa!c)Oa!e)Oa!f)Oa!h)Oa(u)Oa(w)Oa(x)Oa)T)Oa)X)Oa!g)Oa)j)Oa!W)OaQ)Oa!d)Oa!U)Oa#v)Oa~Ol$oO!n.cO!o.cO(r$nO~O!h3pO)X3rO!T)_X~O!o3tO)PYO~P8zO)W3uO~PGVO]3zOl({O!T$WO!{!dO%v$mO&r#WO(r(zO(v4OO)S3wO)U3{O)V3{O~O)W4PO)j4RO~P(&eOl;dO!U4TO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jOl;dO%v!}O(r;VO~P!8jO(v4UO~Ol$oO!T(QO(r$nO(v(PO)PYO~O!l3lO~P((sO)j4WO!U&oX!h&oX~O!h4XO!U*QX~O!U4ZO~Oa4]Ol$oO&m!RO(r$nO~O!T(ZO]&kid&kil&kir&kis&kit&kiu&kiv&kiw&kix&kiy&ki}&ki!V&ki!r&ki!s&ki!t&ki!u&ki!v&ki!x&ki!{&ki%v&ki&r&ki&s&ki(r&ki)S&ki)U&ki)V&ki)W&ki!O&ki!X&ki!Y&ki![&ki!^&ki!_&ki!a&ki!b&ki!c&ki!e&ki!f&ki!h&ki(u&ki(w&ki(x&ki)T&ki)X&ki!g&ki)j&ki!W&kiQ&ki!d&ki!U&ki#v&ki~O(v&ki~P(*TO(v.uO~P(*TO!O4`O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O4`O~O!O4aO~O]#}O!T$WO!V'Zi!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~OPmOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)X!ZO)YXO)hcO)idO]#]ap#]a!T#]a!V#]a)S#]a)U#]a)V#]a~O(r%nO)X4fO!O*YP~O*W4eO~O'f4hO*W4eO~O*W4iO~OlmXpnXp&wX~Od4kO%Y*TO(y/]O~Od4kO%Y*TO(y4lO~O!h/cO!O(sa~O!W4pO~O]&cO!V+kO!T%uq#v%uq)W%uq)j%uq~O]#}O!T$WO!X'Zq!Y'Zq!['Zq!^'Zq!_'Zq!a'Zq!b'Zq!c'Zq!e'Zq!f'Zq!h'Zq(u'Zq(w'Zq(x'Zq)S'Zq)T'Zq)U'Zq)V'Zq)W'Zq)X'Zq!g'Zq)j'Zq!O'Zq!W'Zq(v'Zq!U'ZqQ'Zq!d'Zq~O!V'Zq~P(5bO!V.}O&r#WO&s$wO~P(5bO!T$WO!V)rO(w)sO!U(UX!h(UX~P!JwO!h/nO!U)ra~O!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!U4|O~P&6yO!W4|O~P&6yO!O4|O~P&6yO!O5RO~P&6yO]5SO!h'ua)X'ua)]'ua~O!h*OO)X)Qi)])Qi~O]&cO!V&bO!O#Qq!T#Qq!h#Qq#v#Qq)W#Qq)j#QqQ#Qq!d#Qq(v#Qq~O!OqiQqi!dqi!hqi)Xqi)Wqi~P#IkO]&cO!V+kO!OqiQqi!dqi!hqi)Xqi)Wqi~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'Tq)W'Tq!g'Tq)j'Tq!O'Tq!W'Tq(v'Tq!U'TqQ'Tq!d'Tq~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W'|a!h'|a~P#3zO!W5XO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h5YO(u#gO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O!U)rX~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h#{i)W#{i~P#3zO]*vO!T$WO!V&bO)j*rO!h(Va)W(Va~O!h1fO]'dX!O)dX~P%2xO)X5[O!T%qa!h%qa#v%qa)j%qa~O!h0sO!T)za#v)za)j)za~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W5_O)X#|O~P#3zO]1SOd!POl;[O!V1QO!{!dO%v$mO(r$xO)S;xO)U5aO)V5aO~OQ#Pa!d#Pa!h#Pa!O#Pa~P(DjO]1SOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V1QO!{!dO!|%RO%v$mO(r$xOQ#kX!d#kX!h#kX!O#kX~Ol%bO)S0zO)U;yO)V;yO~P(ElO]&cOQ#Pa!d#Pa!h#Pa!O#Pa~O!V&bO)j5eO~P(GZO(r%nOQ#dX!d#dX!h#dX!O#dX~O)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P' dO!V+kO~P(GZO]1SOa!TOd!POl;]O{#RO!V1QO!{!dO#a#VO#b#TO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO(r;QO)PYO)S;xO)U5aO)V5aO)X+nO!O)dP~P&?sO!h1TOQ)la!d)la~Op&fO)j5jOQ#`al(}X!d#`a!h#`a)X(}X~P$GQO(r-UOQ#ga!d#ga!h#ga~Op&fO)j5jOQ#`a])^Xd)^Xl)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!d#`a!h#`a!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)X)^X~O#a5mO#b5mO~O]&cO!V+kO!O#ki!T#ki#v#ki)W#ki)j#kiQ#ki!d#ki!h#ki)X#ki!x#ki(v#ki~O!W5oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W5oO~P!(zO!W5oO)S5qO~P$%pO]#ji!T#ji!V#ji!O#ji#v#ji)W#ji)j#jiQ#ji!d#ji!h#ji)X#ji!x#ji(v#ji~P$ xO)PYO)X5sO~P8zO!h1fO!O)da~O&r#WO&s$wO!T#qa!x#qa#v#qa(v#qa)j#qa!O#qa!h#qa)W#qaQ#qa!d#qa)X#qa~P#NeO!O5xO~P!(zO!O)oP~P!4xO)T6OO)U5|O]#Ua!T#Ua!V#Ua)S#Ua)V#Uar#Uas#Uat#Uau#Uav#Uaw#Uax#Uay#Ua!l#Ua!x#Ua#T#Ua#V#Ua#p#Ua#v#Ua(v#Ua(x#Ua)j#Uaa#Uad#Ual#Ua{#Ua}#Ua!o#Ua!r#Ua!s#Ua!t#Ua!u#Ua!v#Ua!{#Ua#a#Ua#b#Ua#i#Ua#t#Ua${#Ua%c#Ua%e#Ua%k#Ua%l#Ua%o#Ua%v#Ua&m#Ua&r#Ua&s#Ua(r#Ua)P#Ua)W#Ua!O#Ua!h#UaQ#Ua!d#Ua~O!x!cO]#Rq!T#Rq!V#Rq#v#Rq(v#Rq)j#Rq!O#Rq!h#Rq)W#RqQ#Rq!d#Rq~O!W6TO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W6TO~P!(zO!h1|OQ(za!d(za~O)W6YO~Ol-eO!TxO)j6ZO~O]*vO!T$WO!V&bO!h*tO)W)qX~O)j6_O~P)+cO!O6aO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O6aO~O$c6cOP$_q]$_qa$_qd$_ql$_qr$_qs$_qt$_qu$_qv$_qw$_qx$_qy$_q{$_q}$_q!T$_q!V$_q!X$_q!Y$_q!i$_q!o$_q!r$_q!s$_q!t$_q!u$_q!v$_q!x$_q!{$_q#V$_q#a$_q#b$_q#i$_q#p$_q#t$_q#v$_q$R$_q$T$_q$Y$_q$Z$_q$`$_q$e$_q$g$_q$h$_q$k$_q$m$_q$o$_q$q$_q$s$_q$u$_q$w$_q${$_q$}$_q%U$_q%_$_q%`$_q%a$_q%c$_q%e$_q%g$_q%l$_q%o$_q%v$_q%|$_q&m$_q&r$_q&s$_q'Q$_q'R$_q'V$_q'Y$_q'a$_q'b$_q(k$_q(o$_q(r$_q)P$_q)S$_q)U$_q)V$_q)W$_q)X$_q)Y$_q)h$_q)i$_q!U$_q~O)W6dO~OPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W6fO)X!ZO)YXO)hcO)idO~P&?sO(v6hO)j*rO~P)+cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W6fO)X#|O~P#3zO!O6jO~P!(zO)W6nO~O)W6oO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO(r-UO)S-VO~O]&cO!V2uO!h%Oa)W%Oa!O%Oa~O!W6uO)S6vO~P$%pO!h2vO)W)ua~O]&cO!O6yO!V2uO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xq!o$Xq!{$Xq#i$Xq#p$Xq#t$Xq#v$Xq$R$Xq$T$Xq$Y$Xq$Z$Xq${$Xq%U$Xq%c$Xq%g$Xq%o$Xq%|$Xq(k$Xq)U$Xq!U$Xq$c$Xq~P$0kOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)PYO)S$kO)V$kO)W6{O)X!ZO)YXO)hcO)idO~P&?sO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W7OO)X#|O~P#3zO)W7PO~OP7QO(oQO~Ol*[O)W)^X~P$GQOp&fOl(}X)W)^X~P$GQO)W7SO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&Sa~P#3zO!U7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO)W7VO~OPmO]$eOa!]Ol:|O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O)dP~P&?sO!h3pO)X7ZO!T)_a~O!h3pO!T)_a~O)W7`O)j7bO~P(&eO)W7dO~PGVO]3zOl({Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~O)S7hO~O]&cO!T*qO!V7jO!h7kO#v!eO(v4OO~O)W7`O)j7mO~P)FwO]3zOl({O!{!dO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~Op&fO])cX!T)cX!V)cX!h)cX#v)cX(v)cX)W)cX)j)cX!O)cX~O)W7`O~O!T(QO!l7sO(v(PO])Oid)Oil)Oir)Ois)Oit)Oiu)Oiv)Oiw)Oix)Oiy)Oi})Oi!V)Oi!r)Oi!s)Oi!t)Oi!u)Oi!v)Oi!x)Oi!{)Oi%v)Oi&r)Oi&s)Oi(r)Oi)S)Oi)U)Oi)V)Oi)W)Oi!O)Oi!X)Oi!Y)Oi![)Oi!^)Oi!_)Oi!a)Oi!b)Oi!c)Oi!e)Oi!f)Oi!h)Oi(u)Oi(w)Oi(x)Oi)T)Oi)X)Oi!g)Oi)j)Oi!W)OiQ)Oi!d)Oi!U)Oi#v)Oi~O(r%nO!U(fX!h(fX~O!h4XO!U*Qa~Op&fO]*Pad*Pal*Par*Pas*Pat*Pau*Pav*Paw*Pax*Pay*Pa}*Pa!T*Pa!V*Pa!r*Pa!s*Pa!t*Pa!u*Pa!v*Pa!x*Pa!{*Pa%v*Pa&r*Pa&s*Pa(r*Pa)S*Pa)U*Pa)V*Pa)W*Pa!O*Pa!X*Pa!Y*Pa![*Pa!^*Pa!_*Pa!a*Pa!b*Pa!c*Pa!e*Pa!f*Pa!h*Pa(u*Pa(w*Pa(x*Pa)T*Pa)X*Pa!g*Pa)j*Pa!W*PaQ*Pa!d*Pa(v*Pa!U*Pa#v*Pa~O!T(ZO]&kqd&kql&kqr&kqs&kqt&kqu&kqv&kqw&kqx&kqy&kq}&kq!V&kq!r&kq!s&kq!t&kq!u&kq!v&kq!x&kq!{&kq%v&kq&r&kq&s&kq(r&kq)S&kq)U&kq)V&kq)W&kq!O&kq!X&kq!Y&kq![&kq!^&kq!_&kq!a&kq!b&kq!c&kq!e&kq!f&kq!h&kq(u&kq(w&kq(x&kq)T&kq)X&kq!g&kq)j&kq!W&kqQ&kq!d&kq(v&kq!U&kq#v&kq~OPmOa%QOl:zO!T$WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO~O]*Ui!V*Ui!X*Ui!Y*Ui![*Ui!^*Ui!_*Ui!a*Ui!b*Ui!c*Ui!e*Ui!f*Ui!h*Ui(u*Ui(w*Ui(x*Ui)S*Ui)T*Ui)U*Ui)V*Ui)W*Ui)X*Ui!g*Ui)j*Ui!O*Ui!W*Ui(v*Ui!U*UiQ*Ui!d*Ui~P*&WO!O7xO~O!W7yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^q)W'^q!g'^q)j'^q!O'^q!W'^q(v'^q!U'^qQ'^q!d'^q~P#3zO!h7zO!O*YX~O!O7|O~O*W7}O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h^y)W^y!g^y)j^y!O^y!W^y(v^y!U^yQ^y!d^y~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(ha!h(ha~P#3zO]#}O!T$WO!V'Zy!X'Zy!Y'Zy!['Zy!^'Zy!_'Zy!a'Zy!b'Zy!c'Zy!e'Zy!f'Zy!h'Zy(u'Zy(w'Zy(x'Zy)S'Zy)T'Zy)U'Zy)V'Zy)W'Zy)X'Zy!g'Zy)j'Zy!O'Zy!W'Zy(v'Zy!U'ZyQ'Zy!d'Zy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^y)W'^y!g'^y)j'^y!O'^y!W'^y(v'^y!U'^yQ'^y!d'^y~P#3zO]&cO!V+kO!T%uy#v%uy)W%uy)j%uy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua!h(Ua~P#3zO!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U#}i!h#}i~P#3zO!U8PO~P&6yO!W8PO~P&6yO!O8PO~P&6yO!O8RO~P&6yO]&cO!V&bO!O#Qy!T#Qy!h#Qy#v#Qy)W#Qy)j#QyQ#Qy!d#Qy(v#Qy~O]&cO!V+kO!OqqQqq!dqq!hqq)Xqq)Wqq~O]&cOQ#Pi!d#Pi!h#Pi!O#Pi~O!V+kO~P*9jOQ#nX!d#nX!h#nX!O#nX~P(DjO!V&bO~P*9jOQ(OX](OXd'qXl'qXr(OXs(OXt(OXu(OXv(OXw(OXx(OXy(OX!V(OX!d(OX!h(OX!{'qX%v'qX(r'qX)S(OX)U(OX)V(OX!O(OX~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_i!d#_i!h#_i!O#_i~P#3zO&r#WO&s$wOQ#fi!d#fi!h#fi~O(r-UO)X1YO)j1XOQ#`X!d#`X!h#`X~O!W8WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8WO~P!(zO!T#qi!x#qi#v#qi(v#qi)j#qi!O#qi!h#qi)W#qiQ#qi!d#qi)X#qi~O]&cO!V+kO~P*?fO]&YO!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~P*?fO!O8YO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!h8ZO!O)oX~O!O8]O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*TX!d*TX!h*TX~P#3zO)X8`OQ*SX!d*SX!h*SX~O)W8bO~O!O$bi!h#{a)W#{a~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W8eO)X#|O~P#3zO!O8gO~P!(zO!O8gO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O8gO~O]&cO!V&bO(v8mO~O)W8nO~O]&cO!V2uO!h%Oi)W%Oi!O%Oi~O!W8qO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8qO)S8sO~P$%pO!W8qO~P!(zO]&cO!V2uO!h(Ya)W(Ya~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W8tO)X#|O~P#3zO)W2iO~P!(zO)W8tO~OP%oO!O8uO(oQO~O!O8uO~O)W8vO~P%%eO#T8yO(x.PO)W8wO~O!h3pO!T)_i~O)X8}O!T'wa!h'wa~O)W9PO)j9RO~P)FwO)W9PO~O)W9PO)j9VO~P(&eOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P)GgO]&cO!V7jO!T!ya!h!ya#v!ya(v!ya)W!ya)j!ya!O!ya~O!W9^O)S9_O~P$%pO!T$WO!h7kO(v4OO)W9PO)j9VO~O!T$WO~P#EfO]&cO!O9bO!V7jO~O]&cO!V7jO!T&aa!h&aa#v&aa(v&aa)W&aa)j&aa!O&aa~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&ba~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9PO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U&oi!h&oi~P#3zO!V.}O]']i!T']i!X']i!Y']i![']i!^']i!_']i!a']i!b']i!c']i!e']i!f']i!h']i(u']i(w']i(x']i)S']i)T']i)U']i)V']i)W']i)X']i!g']i)j']i!O']i!W']i(v']i!U']iQ']i!d']i~O(r%nO)X9eO~O!h7zO!O*Ya~O!O9gO~P&6yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua)W#Zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_q!d#_q!h#_q!O#_q~P#3zO&r#WO&s$wOQ#fq!d#fq!h#fq~O)j5jOQ#`a!d#`a!h#`a~O]&cO!V+kO!T#qq!x#qq#v#qq(v#qq)j#qq!O#qq!h#qq)W#qqQ#qq!d#qq)X#qq~O!h8ZO!O)oa~O)U5|O]&Vi!T&Vi!V&Vi)S&Vi)T&Vi)V&Vir&Vis&Vit&Viu&Viv&Viw&Vix&Viy&Vi!l&Vi!x&Vi#T&Vi#V&Vi#p&Vi#v&Vi(v&Vi(x&Vi)j&Via&Vid&Vil&Vi{&Vi}&Vi!o&Vi!r&Vi!s&Vi!t&Vi!u&Vi!v&Vi!{&Vi#a&Vi#b&Vi#i&Vi#t&Vi${&Vi%c&Vi%e&Vi%k&Vi%l&Vi%o&Vi%v&Vi&m&Vi&r&Vi&s&Vi(r&Vi)P&Vi)W&Vi!O&Vi!h&ViQ&Vi!d&Vi~O)W9jO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O$bq!h#{i)W#{i~P#3zO!O9lO~P!(zO!O9lO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9lO~O]&cO!V&bO(v9oO~O!O9pO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9pO~O]&cO!V2uO!h%Oq)W%Oq!O%Oq~O!W9tO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W9tO~P!(zO)W6fO~P!(zO)W9uO~O)W9vO~O(x.PO)W9vO~O!h3pO!T)_q~O)X9xO!T'wi!h'wi~O!T$WO!h7kO(v4OO)W9yO)j9{O~O)W9yO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9yO)X#|O~P#3zO)W9yO)j:OO~P)FwO]&cO!V7jO!T!yi!h!yi#v!yi(v!yi)W!yi)j!yi!O!yi~O!W:SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:SO)S:UO~P$%pO!W:SO~P!(zO]&cO!V7jO!T(da!h(da(v(da)W(da)j(da~O!O:WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:WO~O!O:]O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:]O~O]&cO!V2uO!h%Oy)W%Oy!O%Oy~O)W:^O~O)W:_O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:_O)X#|O~P#3zO!T$WO!h7kO(v4OO)W:_O)j:bO~O]&cO!V7jO!T!yq!h!yq#v!yq(v!yq)W!yq)j!yq!O!yq~O!W:dO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:dO~P!(zO!O:fO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:fO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:hO)X#|O~P#3zO)W:hO~O]&cO!V7jO!T!yy!h!yy#v!yy(v!yy)W!yy)j!yy!O!yy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:lO)X#|O~P#3zO)W:lO~O]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(v$]X(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX~O]%WXlmXpnXp%WX!TnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX!O%WXQ%WX!d%WX~O)W%WX!W%WX(v%WX!U%WX~P+GrO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!OnX!O%WX!hnX)XnX~O)WnX)jnX~P+JSO]%WXlmXpnXp%WX!V%WX!h%WXQ%WX!d%WX!O%WX~O!T%WX#v%WX)W%WX)j%WX(v%WX~P+LmOQnXQ%WX!TnX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!dnX!d%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX~P+JSO]nX]%WXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX~O!TnX(vnX)WnX)jnX~P, eOdnX!VnX)W%WX~P, eOlmXpnX)W%WX~Od)oO%Y)pO(y:oO~Od)oO%Y)pO(y:tO~Od)oO%Y)pO(y:pO~Od$RO%Y*TO'[$TO'_$UO(y:oO~Od$RO%Y*TO'[$TO'_$UO(y:qO~Od$RO%Y*TO'[$TO'_$UO(y:sO~O]iXriXsiXtiXuiXviXwiXxiXyiX!OiX!ViX&riX&siX)SiX)UiX)ViXdiX}iX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX~P#1jO]ZXlgXpZXpiX!VZX!hZX)WZX)jZX~O!TZX#vZX(vZX~P,'{OlgXpiX)PiX)WZX)jiX~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!OZX!OiX!hiX)XiX)jiX~O)WZX~P,)VO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!hiX&riX&siX(uZX(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)XZX)XiX)jZX~OQZXQiX!dZX!diX~P,+pO]iXdiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~P#1jO]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~O)WiX~P,0rOdiX}iX!OZX!OiX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX)jiX~P,+pO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(viX)SiX)UiX)ViX)WiX)jiX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PBUOd$RO%Y*TO(y:oO~Od$RO%Y*TO(y:pO~Od$RO%Y*TO(y:vO~Od$RO%Y*TO(y:uO~O]%hOd!POl%bOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!{!dO!|%RO%v$mO(r$xO)S;aO)U;bO)V;bO~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r$xO)S;aO)U;bO)V;bO~Od$RO%Y$SO(y:pO~Od$RO%Y$SO(y:tO~Ol:yO~Ol:xO~O]cXlgXpiX!TcX~Od)oO%Y*TO(y:oO~Od)oO%Y*TO(y:pO~Od)oO%Y*TO(y:qO~Od)oO%Y*TO(y:rO~Od)oO%Y*TO(y:sO~Od)oO%Y*TO(y:uO~Od)oO%Y*TO(y:vO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P,9OO](}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)j(}X~Ol:xO!T(}X(v(}X)W(}X~P,<}O]&wXlmXpnX!T&wX~Od4kO%Y*TO(y;tO~Ol;[O)S;xO)U5aO)V5aO~P(ElOd!POl%bO!{!dO%v$mO(r$xO~O]1SO!V1QO)S0zO)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P,?yO)S;YO~Ol;hO~Ol;iO~Ol;jO~Ol;lO~Ol;mO~Ol;nO~Ol;lO!T$WOQ(}X!d(}X!h(}X)X(}X!O(}X)j(}X~P$GQOl;jO!T$WO~P$GQOl;hO!g$YO)j$YO~Ol;jO!g$YO)j$YO~Ol;lO!g$YO)j$YO~Ol;iO!O(}X!h(}X)X(}X)j(}X~P$GQOd/^O%Y*TO(y;tO~Ol;uO~O)S<YO~OV'e'h'i'g(o)Y!R(rST%Z!Y!['jd%[!i'R!f]'f*Z'k(w!^!_'l'm'l~",goto:"%5]*ZPPPPPP*[P*_PP.T4iP7j7j:tP:t>OP>i>{?aFXMX!&]!,sP!3m!4b!5VP!5qPPPPPPPP!6[P!7tPP!9V!:oP!:uPPPPPP!:xP!:xPP!:xPPPPPPPPP!;U!>lP!>oPP!?]!@QPPPPP!@UP>l!AgPP>l!Cn!Eo!E}!Gd!ITP!I`P!Io!Io!MP#!`##v#'S#*^!Eo#*hPP!Eo#*o#*u#*h#*h#*xP#*|#+k#+k#+k#+k!ITP#,U#,g#.|P#/bP#0}P#1R#1Z#2O#2Z#4i#4q#4q#1RP#1RP#4x#5OP#5YPP#5u#6d#7U#5uP#7v#8SP#5uP#5uPP#5u#5uP#5uP#5uP#5uP#5uP#5uP#5uP#8V#5Y#8sP#9YP#9o#9o#9o#9o#9|#1RP#:d#?`#?}PPPPPPPP#@uP#ATP#ATP#Aa#Dn#9OPP#@}#EQP#Ee#Ep#Ev#Ev#@}#FlP#1R#1R#1R#1R#1RP!Io#GW#G_#G_#G_#Gc!Ly#Gm!Ly#Gq!E}!E}!E}#Gt#L^!E}>l>l>l$#V!@Q!@Q!@Q!@Q!@Q!@Q!6[!6[!6[$#jP$%V$%e!6[$%kPP!6[$'y$'|#@l$(P:t7j$+V$-Q$.q$0a7jPP7j$2T7jP7j7jP7jP$5Z7jP7jPP7j$5gPPPPPPPPP*[P$8o$8u$;^$=d$=j$>Q$>[$>g$>v$>|$@[$AZ$Ab$Ai$Ao$Aw$BR$BX$Bd$Bj$Bs$B{$CW$C^$Ch$Cn$Cx$DP$D`$Df$DlP$Dr$Dz$ER$Ea$F}$GT$GZ$Gb$GkPPPPPPPP$Gq$GuPPPPP$Nw$'y$Nz%$S%&[P%&i%&lPPPPPPPPPP%&x%'{%(R%(V%)|%+Z%+|%,T%.d%.jPPP%.t%/P%/S%/Y%0a%0d%0n%0x%0|%2Q%2s%2y#@uP%3d%3t%3w%4X%4e%4i%4o%4u$'y$'|$'|%4x%4{P%5V%5YR#cP'`mO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fU%om%p7QQ&m!`Q(j#]d0P)}/|/}0O0R4}5O5P5S8QR7Q3Tb}Oaewx{!g&S*q&v$i[!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0{1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fS%`f0h#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YS%qm!YS&u!h#PQ']!tQ'g!yQ'h!zQ(j#`Q(k#]Q(l#^Q*x%kQ,W&lQ,]&nQ-S'^Q-d'fQ-k'qS.r(Z4XQ/f)gQ0e*mQ2Q,[Q2X,cQ3O-eQ4b.|Q4f/TQ5f0}Q6[2TQ6}3PQ8a6ZQ9e7zR;Z1Q$|#hS!]$y%Q%T%Z&j&k'Q'X'Z'a'c(a(e(h(w(x)R)S)T)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:iQ&p!dQ(g#ZQ(s#bQ)j$T[*s%e*W0k2`2g2{Q,^&oQ/O(fQ/S(kQ/Z(tS/i)i/PQ0r+QS4q/j/kR8O4r'a![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f'a!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ)O#kS+Q%y0sQ/r)sk3}.g3s3w3z3{7c7e7f7h7k9X9Y:RQ)Q#kk3|.g3s3w3z3{7c7e7f7h7k9X9Y:Rl)P#k.g3s3w3z3{7c7e7f7h7k9X9Y:RT+Q%y0s[UOwx!g&S*qW$`[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.o&|;{af{|!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k$|$}%S%]%h%m&Q&W&b&y&|'O'i'j'u'y(`(i)l)r*`*b*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0]0h0y0{1Q1a1b1l1p1z2c2i2j2u4O4R4W4a5Y5a5e5q6_6c6f6g6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f;`;xQ;|1Sd;}&x'P'b,w-]-^-a2f2z2}W<O&f*v1|3iQ<P#O[<Q!t'^'f,[2T6ZT<]%y0s[VOwx!g&S*qW$a[e$e(bQ$p.u!j$q_!f!u!}#V#Z$S$T$l%U&U&Y&c&m'_(g)j)p+[+a+t,X,k,z-Q-o.d1T1X1f1k1m2l3t5j8Z&^$zaf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fQ'r#O|'|#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[l(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS-n't-wQ3W-tU;s(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;x[<Q!t'^'f,[2T6ZW<R&f*v1|3id<S&x'P'b,w-]-^-a2f2z2}Q<Z1ST<]%y0s!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!v$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$Q%lgnp|#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ'[!tz(O#R#S#T#U'}(P(U(^+y.W.X._.`.q3[3]3^3p5}6P7[f-Z'`-T-V-Y2p2q2s2v6q6r8pQ1W+aQ1Z+bQ2k,yQ3X-tQ4[.uQ5l1YR8V5m!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!x$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+a+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$S%lgnp|!t#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y|(O#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[Q3X-tR4[.u[WOwx!g&S*qW$b[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;xQ;|1SQ<P#O[<Q!t'^'f,[2T6Z&^<Taf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fd<U&x'P'b,w-]-^-a2f2z2}W<V&f*v1|3iT<]%y0sp$PT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)m$V*U*[/_:w:x:y;h;i;j;k;l;m;n;up$QT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)n$V*U*[/_:w:x:y;h;i;j;k;l;m;n;u^&e}!O$i$j%`%j;Zd&i!U$t%P%l'[(O1W1Z3X4[V/a)O)P3}S%Ye$eQ,T&fQ.{(bQ2m-QQ5y1mQ6V1|Q6m2lR9h8Z#}!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Z#[^O[_`wx!f!g!}#O$S$d$l$s$u&S&U&Y&c&m&r&x'P'b't(Q)p*]*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3t_(U#R#S#T+b3[3]3^#}ZO[wx!g!k#R#S#T%m&S&U&Y&c&m&w&x&y&|'O'P'['b't'x'}(P(Q(U*q*v+[+b,X,h,k,q-P-]-^-a-o-t-w-z._.d.m.q1S1T1f2c2k2z2}3[3]3^3i6c6j8g9l9p:W:]:fQ$]YR0T*OR*Q$]e0P)}/|/}0O0R4}5O5P5S8Q'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fe0P)}/|/}0O0R4}5O5P5S8QR5T0T^(T#R#S#T+b3[3]3^Y.]'}(R(U(V7TU3k.Z.^.qS7X3l4VR9c7s^(S#R#S#T+b3[3]3^[.['}(R(T(U(V7TW3j.Z.].^.qU7W3k3l4VS8z7X7sR:V9cT.k(Q.md]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tQ%tnT1u+}1v!jbOaenpwx{|!g#O$|$}%S%h%w&S't'u(Q*`*b*q-p-w.f.m.o0]0y1S2j5a6g;`;xf-W'`-T-V-Y2p2q2s2v6q6r8pj3x.g3s3w3z3{7c7e7f7h7k9X9Y:Rr;zg$g%d%i&s*Y*t,l,v-_2_;W;X;Y;o;q;vi<^+]0z1O;a;b;p;r;w;y<W<X<Y!O&^y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yz&az%O%W%e&d's*W*_,b-x0Z0[0k0|2`2g2{5V5b6l8iS'{#Q.Xn+l&X*g+f+m+p-j/h0_1R1^4t5W5`5u8XQ2W,a^2t-X2r2x6p6w8o9se7i3y7_7g7o7p9U9W9`:Q:cS+^&U1TY+n&Y&c*v1S3iR5s1f#w!POaegnpwx{|!g#O$g$|$}%S%d%h%i%w&S&s't'u(Q*Y*`*b*q*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y`oOwx!g&S't*q-w#U!Paeg{|#O$g$|$}%S%d%h%i&s'u*Y*`*b*t+],l,v-_0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YU%vnp-pQ*}%wS.e(Q.mT3v.f.oW+r&^+l+s1cV+z&a+{7iQ+x&`U+z&a+{7iQ-w'tT.S'y.U'`![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'W!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fW1r+y.X5}6PR2e,s!WjO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fY%Ve$e(b1p3iQ'S!nS(y#i5YQ,m&xQ,x'PS.O'y.UQ2b,nQ6k2iQ6|2}Q8h6fR9m8e'W![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'ayO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k+y,P,R,n,q,w-]-^-a-g.P.Q.U.X.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q5}6P6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ&`yS't#O-uR1[+cS+^&U1TR5n1[Q1P+]R5g1OR1P+]T+^&U1Tz&[%X&V&Y&Z'k)h*d*f+]+e/m0^0y0z1O1S1j5a5v;x;yQ&]yR1n+x!P&[y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yQ+u&^S+|&a7iS1d+l+sQ1t+{R5r1c!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fS%zo.eS&Oq-rQ&_yQ&q!eQ'e!yQ*p%eU*{%v%{3vS+P%x%}Q+q&]Q,Y&mS,Z&n'gQ,r&{S0X*W,bS0o*|*}Q0q+OQ1o+xS2S,]-fQ5U0ZQ5Z0pQ5{1nQ6Y2RQ6]2WQ7n3yQ9S7_R:P9U[uOwx!g&S*qQ,Y&mQ-v'tQ3Y-tR3_-wxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^S%zo.eS&Oq-rQ*p%eU*{%v%{3vS+P%x%}S0X*W,bS0o*|*}Q0q+OQ5U0ZQ5Z0pQ7n3yQ9S7_R:P9UT,_&q,`]uOwx!g&S*q[uOwx!g&S*qQ,Y&mQ,n&xQ,w'PW-`'b-]-a2zQ-v'tQ3Y-tQ3_-wR6{2}[%fg$g,l,v-_2_R0l*t^$XV!U$a$z%P<R<SQ'S!nS)`#}*vS)v$W*qQ)y$YY*s%e*W0k2g2{Q/O(fS/i)i/PS0a*h4aS0j*r6_Q0r+QQ4Q.gQ4n/cS4q/j/kS4v/n5YQ4{/uQ6`2`U7a3s3y4RQ8O4rQ8k6hY9Q7_7b7c7l7mQ9r8mW9z9O9R9U9VQ:Z9oU:a9{9}:OR:j:bS)v$W*qT4v/n5YZ)t$W)u*q/n5YQ&w!hR'x#PS,g&v'vQ2[,eR6^2ZxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fV$h[&|-^!XkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:f!WhO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR'W!q!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR,n&xQ&y!iQ&{!jQ'O!lR,q&zR,o&xxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fX-`'b-]-a2z[uOwx!g&S*qQ,z'PQ-v'tS.k(Q.mR3_-w[uOwx!g&S*qQ,z'PW-`'b-]-a2zT.k(Q.mg-Z'`-T-V-Y2p2q2s2v6q6r8pylOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fb!OOaewx{!g&S*q&|$j[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ']!tQ-S'^Q-d'fQ2Q,[Q6[2TR8a6Zj$RT$_%b%r:z:{:|;[;];^;_;c;di)o$V*U:w:x:y;h;i;j;k;l;m;nj$RT$_%b%r:z:{:|;[;];^;_;c;dh)o$V*U:w:x:y;h;i;j;k;l;m;nS/^({<[V4k/_/`;u[uOwx!g&S*qQ-v'tR3_-w[uOwx!g&S*qT.k(Q.m'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fR7R3T[uOwx!g&S*qQ-v'tS.k(Q.mR3_-w[pOwx!g&S*qQ%wnS-p't-wT.f(Q.mS%{o.eS*|%v3vR0p*}Q+R%yR5]0sS%zo.eS&Oq-rU*{%v%{3vS+P%x%}S0o*|*}Q0q+OQ5Z0pQ7n3yQ9S7_R:P9U`qOwx!g&S(Q*q.mS%xn-pU%}p.f.oQ+O%wT-r't-wS'z#Q.XR.Y'{T.R'y.US.S'y.UQ8x7UR9w8yT5}1q8_R6P1q#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&}![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&|![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fk3|.g3s3w3z3{7c7e7f7h7k9X9Y:RQ4Q.gS7a3s3yU9Q7_7c7lS9z9O9UR:a9}#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR4].uQ(]#US.v([(^S4^.w.xR7w4_Q.s(ZR7u4X#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Zp$w`$d$s%X&r'`(_(f)i*d-T/k1j5k5v8Uq(}#k%y.g0s3s3w3z3{7c7e7f7h7k9X9Y:RR,U&fR6W1|'X!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$q#rS%T%Z'Q'X'Z'a'c(a(e(h(w(x)R)S)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$]#sS%T%Z'Q'X'Z'a'c(h(w(x)R)V)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$Z#tS%T%Z'Q'X'Z'a'c(h(w(x)R)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$c#wS%T%Z'Q'X'Z'a'c(h(w(x)R)U)V)W)X)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i'X![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ/P(fQ/j)iQ4r/kR9d7y']![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ#eQR(u#eU$|a;`;xb%Ue$e&f(b-Q1m1|2l8ZQ'_!u!Q*^$|%U'_*`*f+h,P0]0^1b2p6q6t7e8p9X9]:R;W;o;p;v;w<WS*`$}%SQ*f%XS+h&W1QQ,P&bQ0]*bQ0^*dQ1b+kQ2p-VS6q2q2sQ6t2uQ7e3wQ8p6rS9X7f7hQ9]7jQ:R9YQ;W%dS;o;X;YS;p<X<YQ;v;qQ;w;rT<W0z;a[[Owx!g&S*ql$c[&|'}+[,X,h,k-P-^-o-z._.d.ql&|!k%m&y'O,q2c6c6j8g9l9p:W:]:f^'}#R#S#T+b3[3]3^`+[&U&Y&c*v1S1T1f3iS,X&m-tQ,h&wU,k&x'P2}S-P'[2kW-^'b-]-a2zS-o't-wQ-z'xQ._(PS.d(Q.mR.q(UQ)|$[R/x)|Q0R)}Q4}/|Q5O/}Q5P0OY5Q0R4}5O5P8QR8Q5SQ*P$]S0U*P0VR0V*QS.`(P._S3n.`7[R7[3pQ3q.aS7Y3o3rU7^3q7Y8{R8{7ZQ.m(QR4S.m!|_O[wx!f!g!}#O$S$l&S&U&Y&c&m&x'P'b't(Q)p*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3tU$r_$u*]U$u`$d&rR*]$sU$}a;`;xd*a$}*b2q6r7f9Y;X;q;r<XQ*b%SQ2q-VQ6r2sQ7f3wQ9Y7hQ;X%dQ;q;YQ;r<YT<X0z;aS+{&a7iR1s+{S*j%Z/pR0c*jQ1U+_R5i1UU+e&V0z;xR1]+eQ+s&^Q1c+lT1i+s1cQ8[5yR9i8[QwOS&Rw&ST&Sx*qQ,`&qR2V,`W)u$W*q/n5YR/t)uU/o)q)v0gR4w/o[*u%e%f*W2`2g2{R0m*uQ,d&uR2Y,dQ-a'bQ2z-]T2|-a2zQ2w-XR6x2wQ-f'gQ2R,]T3Q-f2RS%pm7QR*z%pdnOwx!g&S't(Q*q-w.mR%unQ0t+RR5^0tQ.U'yR3f.UQ1v+}R6Q1vU*n%`*x;ZR0f*nS1g+n0nR5t1gQ7l3yQ9O7_U9a7l9O9}R9}9U$O!SO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o.u1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR&g!SQ4Y.sR7v4YQ1},UR6X1}S/d)_)`R4o/dW(o#a(j(k/SR/W(oQ7{4fR9f7{T)a#}*v!USO[wx!g!k%m&S&y&|'O'b,q-]-^-a2c2z6c6j8g9l9p:W:]:fj$ya{$k%]+j,R1a1z5q6v8s9_:UY%Te$e(b1p3iY%Zf$f(i)l*lQ&j!WQ&k!XQ'Q!nQ'X!rQ'Z!sQ'a!vQ'c!xQ(a#XQ(e#YS(h#[+YQ(w#gQ(x#iQ)R#lQ)S#qQ)T#rQ)U#sQ)V#tQ)W#uQ)X#vQ)Y#wQ)Z#xQ)[#yQ)]#zQ)^#{S)_#}*vQ)k$UQ)q$WQ)x$YQ+X&QS+g&W1QQ,O&bQ,S&fQ,j&xQ,u'PQ-h'iQ-i'jS-|'y.UQ.y(`S/p)r0hS0`*h4aQ0b*iQ0g*qQ0i*rQ0w+WS1`+h+kQ1y,PQ2a,nS2h,w6{Q3R-gQ3c.PQ3d.QQ4c.}Q4d/QQ4j/[Q4m/cQ4s/lQ4u/nQ4y/sQ4z/uQ5d0{Q5p1bQ5w1lQ6U1|S6e2f8tQ6i2iQ6s2uQ6z2}Q7q4OQ7r4RQ7t4WQ8S5YQ8T5eQ8c6_Q8f6fQ8j6hQ8r6tS9T7b7mQ9[7jQ9k8eQ9q8mS9|9R9VQ:T9]Q:Y9oS:`9{:OR:i:bR,V&fd]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3t#r${ae!u$e$|$}%S%U%X%d&W&b&f'_(b*`*b*d*f+h+k,P-Q-V0]0^1Q1b1m1|2l2p2q2s2u3w6q6r6t7e7f7h7j8Z8p9X9Y9]:R;W;X;Y;`;a;o;p;q;r;v;w<W<X<YQ%tnS+d&V+eW+r&^+l+s1cU+z&a+{7iQ1k+tT5c0z;x``Owx!g&S't*q-wS$d[-oQ$s_b%Xe$e&f(b-Q1m1|2l8Z!h&r!f!}#O$S$l&U&Y&c&m&x'P'b(Q)p*v+[,X,k,w,z-]-^-a-t.d.m.o1S1T1f2f2z2}3i3tQ'`!uS(_#V+aQ(f#ZS)i$T(gQ*d%UQ-T'_Q/k)jQ1j+tQ5k1XQ5v1kR8U5jS(W#R3]S(X#S3^V(Y#T+b3[R$^Ye0Q)}/|/}0O0R4}5O5P5S8QW(R#R#S#T+bQ([#US.Z'}(US.a(P._Q.x(^W1r+y.X5}6PQ3Z-tQ3h.WQ3o.`Q4V.qU7T3[3]3^Q7]3pR8|7[Q.b(PR3m._T.l(Q.mdgOwx!g&S&m't*q-t-wU$g[,X-oQ&s!fQ'k!}Q'u#OQ)h$SQ*Y$l`+]&U&Y&c*v1S1T1f3iQ,l&xQ,v'PY-_'b-]-a2z2}S.g(Q.mQ/m)pQ0y+[S2_,k-^S2j,w,zS3s.d.oQ6g2fR7c3td]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tR%tnQ3y.gQ7_3sQ7g3wQ7o3zQ7p3{Q9U7cU9W7e7f7hQ9`7kS:Q9X9YR:c:RZ+o&Y&c*v1S3ipzOnpwx!g%w&S't(Q*q-p-w.f.m.o[%Oa%d0z;`;a;xU%We%h1SQ%eg^&d{|%i1O5a;b;yQ's#OQ*W$gb*_$|$}%S;W;X;Y<W<X<YQ,b&sQ-x'uQ0Z*Y[0[*`*b;o;p;q;rQ0k*tQ0|+]Q2`,lQ2g,vS2{-_2_U5V0];v;wQ5b0yQ6l2jR8i6gQ+}&aR9Z7iS1q+y.XQ8^5}R8_6P[%^f$f(i)l)r0hR0d*lR+`&UQ+_&UR5h1TS&Xy+xQ*g%XU+f&V0z;xS+m&Y1SW+p&Z1O5a;yQ-j'kQ/h)hS0_*d*fQ1R+]Q1^+eQ4t/mQ5W0^Q5`0yQ5u1jR8X5vR5z1mYvOwx&S*qR&t!gW%gg,l,v-_T*X$g2_T)w$W*q[uOwx!g&S*qQ&}!kQ*y%mQ,p&yQ,t'OQ2d,qQ6b2cQ8d6cQ8l6jQ9n8gQ:X9lQ:[9pQ:e:WQ:g:]R:k:fxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^X-`'b-]-a2zQ-['`R2o-TS-X'`-TQ2r-VQ2x-YU6p2p2q2sQ6w2vS8o6q6rR9s8p[rOwx!g&S*qS-q't-wT.h(Q.mR+S%y[sOwx!g&S*qS-s't-wT.i(Q.m[tOwx!g&S*qT.j(Q.mT.T'y.UX%af%k0h1QQ.w([R4_.xR.t(ZR(d#XQ(r#aS/R(j(kR4e/SR/V(lR4g/T",nodeNames:"⚠ RawString > MacroName LineComment BlockComment PreprocDirective #include String EscapeSequence SystemLibString Identifier ArgumentList ( ConditionalExpression AssignmentExpression CallExpression PrimitiveType FieldExpression FieldIdentifier DestructorName TemplateMethod ScopedFieldIdentifier NamespaceIdentifier TemplateType TypeIdentifier ScopedTypeIdentifier ScopedNamespaceIdentifier :: NamespaceIdentifier TypeIdentifier TemplateArgumentList < TypeDescriptor const volatile restrict _Atomic mutable constexpr constinit consteval StructSpecifier struct MsDeclspecModifier __declspec ) Attribute AttributeName Identifier AttributeArgs { } [ ] UpdateOp ArithOp ArithOp ArithOp LogicOp BitOp BitOp BitOp CompareOp CompareOp CompareOp > CompareOp BitOp UpdateOp , Number CharLiteral AttributeArgs VirtualSpecifier BaseClassClause Access virtual FieldDeclarationList FieldDeclaration extern static register inline thread_local AttributeSpecifier __attribute__ PointerDeclarator MsBasedModifier __based MsPointerModifier FunctionDeclarator ParameterList ParameterDeclaration PointerDeclarator FunctionDeclarator Noexcept noexcept RequiresClause requires True False ParenthesizedExpression CommaExpression LambdaExpression LambdaCaptureSpecifier TemplateParameterList OptionalParameterDeclaration TypeParameterDeclaration typename class VariadicParameterDeclaration VariadicDeclarator ReferenceDeclarator OptionalTypeParameterDeclaration VariadicTypeParameterDeclaration TemplateTemplateParameterDeclaration template AbstractFunctionDeclarator AbstractPointerDeclarator AbstractArrayDeclarator AbstractParenthesizedDeclarator AbstractReferenceDeclarator ThrowSpecifier throw TrailingReturnType CompoundStatement FunctionDefinition MsCallModifier TryStatement try CatchClause catch LinkageSpecification Declaration InitDeclarator InitializerList InitializerPair SubscriptDesignator FieldDesignator ExportDeclaration export ImportDeclaration import ModuleName PartitionName HeaderName CaseStatement case default LabeledStatement StatementIdentifier ExpressionStatement IfStatement if ConditionClause Declaration else SwitchStatement switch DoStatement do while WhileStatement ForStatement for ReturnStatement return BreakStatement break ContinueStatement continue GotoStatement goto CoReturnStatement co_return CoYieldStatement co_yield AttributeStatement ForRangeLoop AliasDeclaration using TypeDefinition typedef PointerDeclarator FunctionDeclarator ArrayDeclarator ParenthesizedDeclarator ThrowStatement NamespaceDefinition namespace ScopedIdentifier Identifier OperatorName operator ArithOp BitOp CompareOp LogicOp new delete co_await ConceptDefinition concept UsingDeclaration enum StaticAssertDeclaration static_assert ConcatenatedString TemplateDeclaration FriendDeclaration friend union FunctionDefinition ExplicitFunctionSpecifier explicit FieldInitializerList FieldInitializer DefaultMethodClause DeleteMethodClause FunctionDefinition OperatorCast operator TemplateInstantiation FunctionDefinition FunctionDefinition Declaration ModuleDeclaration module RequiresExpression RequirementList SimpleRequirement TypeRequirement CompoundRequirement ReturnTypeRequirement ConstraintConjuction LogicOp ConstraintDisjunction LogicOp ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator TemplateFunction OperatorName StructuredBindingDeclarator ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator BitfieldClause FunctionDefinition FunctionDefinition Declaration FunctionDefinition Declaration AccessSpecifier UnionSpecifier ClassSpecifier EnumSpecifier SizedTypeSpecifier TypeSize EnumeratorList Enumerator DependentType Decltype decltype auto PlaceholderTypeSpecifier ParameterPackExpansion ParameterPackExpansion FieldIdentifier PointerExpression SubscriptExpression BinaryExpression ArithOp LogicOp LogicOp BitOp UnaryExpression LogicOp BitOp UpdateExpression CastExpression SizeofExpression sizeof CoAwaitExpression CompoundLiteralExpression NULL NewExpression new NewDeclarator DeleteExpression delete ParameterPackExpansion nullptr this UserDefinedLiteral ParamPack #define PreprocArg #if #ifdef #ifndef #else #endif #elif PreprocDirectiveName Macro Program",maxTerm:425,nodeProps:[["group",-35,1,8,11,14,15,16,18,71,72,100,101,102,104,191,208,229,242,243,270,271,272,277,280,281,282,284,285,286,287,290,292,293,294,295,296,"Expression",-13,17,24,25,26,42,255,256,257,258,262,263,265,266,"Type",-19,126,129,147,150,152,153,158,160,163,164,166,168,170,172,174,176,178,179,188,"Statement"],["isolate",-4,4,5,8,10,""]],propSources:[AAe],skippedNodes:[0,3,4,5,6,7,10,297,298,299,300,301,302,303,304,305,306,347,348],repeatNodeCount:41,tokenData:"&*r7ZR!UOX$eXY({YZ.gZ]$e]^+P^p$epq({qr.}rs0}st2ktu$euv!7dvw!9bwx!;exy!<Yyz!=Tz{!>O{|!?R|}!AV}!O!BQ!O!P!DX!P!Q#+y!Q!R#Az!R![$(x![!]$Ag!]!^$Cc!^!_$D^!_!`%1W!`!a%2X!a!b%5_!b!c$e!c!n%6Y!n!o%7q!o!w%6Y!w!x%7q!x!}%6Y!}#O%:n#O#P%<g#P#Q%Kz#Q#R%Ms#R#S%6Y#S#T$e#T#i%6Y#i#j%Nv#j#o%6Y#o#p&!e#p#q&#`#q#r&%f#r#s&&a#s;'S$e;'S;=`(u<%lO$e&t$nY)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&r%eW)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^&j&SU'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j&kX'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j']V'f&jOY%}YZ%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j'uP;=`<%l%}&r'{P;=`<%l%^&l(VW(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O&l(rP;=`<%l(O&t(xP;=`<%l$e7Z)Y`)ZW(pQ(n.o'f&j*Z)`OX$eXY({YZ*[Z]$e]^+P^p$epq({qr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e.o*aT(n.oXY*[YZ*[]^*[pq*[#O#P*p.o*sQYZ*[]^*y.o*|PYZ*[4e+[`)ZW(pQ(n.o'f&jOX$eXY+PYZ*[Z]$e]^+P^p$epq+Pqr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e4Z,cX'f&jOY%}YZ-OZ]%}]^-{^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4Z-V[(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4Z.QV'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P.nT*W)`(n.oXY*[YZ*[]^*[pq*[#O#P*p3o/[[%^!b'QP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o0_Y%]!b!a,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e6e1YY)ZW(qQ(o/]'f&jOY%^Zr%^rs1xsw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^(U2RW)x!b)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^4e2tf)ZW(pQ'f&jOX$eXY2kZp$epq2kqr$ers%^sw$ewx(Ox!c$e!c!}4Y!}#O$e#O#P&f#P#T$e#T#W4Y#W#X5m#X#Y>u#Y#]4Y#]#^NZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e4eb)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e5xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y7W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e7cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z8q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e8|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^:[#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e:gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#b4Y#b#c;u#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e<Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y=`#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e=mb)ZW(pQ'e.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e?Qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a@f#a#b4Y#b#cHV#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e@qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^BV#^#g4Y#g#hEV#h#o4Y#o;'S$e;'S;=`(u<%lO$e4eBbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZCp#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eC}b)ZW(pQ'f&j'l.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eEbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#YFp#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4eF}b)ZW(pQ'j.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eHbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#XIp#X#o4Y#o;'S$e;'S;=`(u<%lO$e4eI{d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^KZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4eKfd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZLt#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eMRb)ZW(pQ'f&j'k.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eNff)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z! z#Z#b4Y#b#c!.[#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!!Xf)ZW(pQ'g.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!#m#X#b4Y#b#c!(W#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!#xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!%W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!%cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!&q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!'Ob)ZW(pQ'h.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!(cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!)q#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!)|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!+[#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!+gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!,u#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!-Sb)ZW(pQ'i.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!.gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#V4Y#V#W!/u#W#o4Y#o;'S$e;'S;=`(u<%lO$e4e!0Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a!1`#a#o4Y#o;'S$e;'S;=`(u<%lO$e4e!1kd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#i4Y#i#j!2y#j#o4Y#o;'S$e;'S;=`(u<%lO$e4e!3Ud)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!4d#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!4od)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!5}#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!6[b)ZW(pQV.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e3o!7q[)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!8rY!g-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!9o])V,g)ZW(pQ%[!b'f&jOY$eZr$ers%^sv$evw!:hwx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!:uY)U,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2X!;pW)[S(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O6i!<eY)ZW(pQ]6_'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V!=`Y!Oa)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!>][)S,g)ZW(pQ%Z!b'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!?`^)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|!@[|!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!@gY)ZW!X-y(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!AbY!h,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!B__)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox}$e}!O!@[!O!_$e!_!`!8g!`!a!C^!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!CiY(x-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Dd^)ZW(pQ'f&j(w,gOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!E`!P!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Ei[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!F_!P#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!FjY)X,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]!Gen)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Icx!Q$e!Q![!GY![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T!IjY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![!JY![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T!Jcn(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Icx!Q(O!Q![!JY![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ljl(pQ!i,g'f&jOY(OZr(Ors%}s{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ni^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![# e![!c(O!c!i# e!i#O(O#O#P&f#P#T(O#T#Z# e#Z;'S(O;'S;=`(o<%lO(O2T# nj(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Nbx!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T##id(pQ!i,g'f&jOY(OZr(Ors%}s!h(O!h!i##`!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#Y(O#Y#Z##`#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]#%Sn)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#'Z`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![#(]![!c$e!c!i#(]!i#O$e#O#P&f#P#T$e#T#Z#(]#Z;'S$e;'S;=`(u<%lO$e2]#(hj)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Nbx!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#*ef)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!h$e!h!i#*Y!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#Y$e#Y#Z#*Y#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e7Z#,W`)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Oxz$ez{#-Y{!P$e!P!Q#:s!Q!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#-c])ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y1e#._TOz#.[z{#.n{;'S#.[;'S;=`#/]<%lO#.[1e#.qVOz#.[z{#.n{!P#.[!P!Q#/W!Q;'S#.[;'S;=`#/]<%lO#.[1e#/]OT1e1e#/`P;=`<%l#.[7X#/jZ)ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7P#0bX'f&jOY#0]YZ#.[Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1SZ'f&jOY#0]YZ#.[Zz#0]z{#0}{!P#0]!P!Q#1u!Q#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1|UT1e'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P#2eZ'f&jOY#0]YZ#0]Z]#0]]^#3W^z#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3]X'f&jOY#0]YZ#0]Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3{P;=`<%l#0]7X#4V])ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{!P#/c!P!Q#5O!Q#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7X#5XW)ZWT1e'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^7X#5tP;=`<%l#/c7R#6OZ(pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#6x](pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{!P#5w!P!Q#7q!Q#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#7zW(pQT1e'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O7R#8gP;=`<%l#5w7Z#8s_)ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{!P#-Y!P!Q#9r!Q#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y7Z#9}Y)ZW(pQT1e'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#:pP;=`<%l#-Y7Z#;OY)ZW(pQS1e'f&jOY#:sZr#:srs#;nsw#:swx#@{x#O#:s#O#P#<z#P;'S#:s;'S;=`#At<%lO#:s7X#;wW)ZWS1e'f&jOY#;nZw#;nwx#<ax#O#;n#O#P#<z#P;'S#;n;'S;=`#@u<%lO#;n7P#<hUS1e'f&jOY#<aZ#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#=RXS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P;'S#<a;'S;=`#>[<%lO#<a7P#=uVS1e'f&jOY#<aYZ%}Z#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#>_P;=`<%l#<a7P#>i]S1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c#f#<a#f#g#?b#g;'S#<a;'S;=`#>[<%lO#<a7P#?iUS1e'f&jOY#<aZ#O#<a#O#P#?{#P;'S#<a;'S;=`#>[<%lO#<a7P#@SZS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c;'S#<a;'S;=`#>[<%lO#<a7X#@xP;=`<%l#;n7R#AUW(pQS1e'f&jOY#@{Zr#@{rs#<as#O#@{#O#P#<z#P;'S#@{;'S;=`#An<%lO#@{7R#AqP;=`<%l#@{7Z#AwP;=`<%l#:s2]#BVt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$+X#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$=`#m;'S$e;'S;=`(u<%lO$e2T#DnY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#E^![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T#Egp(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#Dgx!O(O!O!P#Gk!P!Q(O!Q![#E^![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#Gtn(pQ!i,g'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#I{p(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#LW^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!i#Ir!i#O(O#O#P&f#P#T(O#T#Z#Ir#Z;'S(O;'S;=`(o<%lO(O2T#M]t(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$ xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$$Xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$&ht)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$)Tp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$+b_)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$-`!R![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$,j[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$-kt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$/{#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e2]$0U[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$1T`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$2br)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T$4s^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![$5o![!c(O!c!i$5o!i#O(O#O#P&f#P#T(O#T#Z$5o#Z;'S(O;'S;=`(o<%lO(O2T$5xr(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx!O(O!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T$8]u(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx{(O{|!Nb|}(O}!O!Nb!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$:{u)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx{$e{|#'Q|}$e}!O#'Q!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$=ic)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$>t!R![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$?Pv)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#U$2V#U#V$2V#V#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e4e$Ar[(v-X)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox![$e![!]$Bh!]#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3s$BsYl-})ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$CnY)W,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7V$Dk_p,g%]!b)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!^$Ej!^!_%+w!_!`%.U!`!a%0]!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej*[$Es])ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ejp$FoTO!`$Fl!`!a$GO!a;'S$Fl;'S;=`$GT<%lO$Flp$GTO$Wpp$GWP;=`<%l$Fl*Y$GbZ)ZW'f&jOY$GZYZ$FlZw$GZwx$HTx!`$GZ!`!a%(U!a#O$GZ#O#P$Ib#P;'S$GZ;'S;=`%(y<%lO$GZ*Q$HYX'f&jOY$HTYZ$FlZ!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q$IOU$WpY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}*Q$Ig['f&jOY$HTYZ$HTZ]$HT]^$J]^!`$HT!`!a$NO!a#O$HT#O#P%&n#P;'S$HT;'S;=`%'f;=`<%l%$z<%lO$HT*Q$JbX'f&jOY$HTYZ$J}Z!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT'[$KSX'f&jOY$J}YZ$FlZ!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$KvU$Wp'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}'[$L_Z'f&jOY$J}YZ$J}Z]$J}]^$MQ^!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MVX'f&jOY$J}YZ$J}Z!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MuP;=`<%l$J}*Q$M{P;=`<%l$HT*Q$NVW$Wp'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`$NtW'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`% eUY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%})`% |Y'f&jOY$NoYZ$NoZ]$No]^%!l^#O$No#O#P%#d#P;'S$No;'S;=`%$[;=`<%l%$z<%lO$No)`%!qX'f&jOY$NoYZ%}Z!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%#aP;=`<%l$No)`%#iZ'f&jOY$NoYZ%}Z]$No]^%!l^!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%$_XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$No<%lO%$z#t%$}WOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h<%lO%$z#t%%lOY#t#t%%oRO;'S%$z;'S;=`%%x;=`O%$z#t%%{XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l%$z<%lO%$z#t%&kP;=`<%l%$z*Q%&sZ'f&jOY$HTYZ$J}Z]$HT]^$J]^!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q%'iXOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$HT<%lO%$z*Y%(aW$WpY#t)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^*Y%(|P;=`<%l$GZ*S%)WZ(pQ'f&jOY%)PYZ$FlZr%)Prs$HTs!`%)P!`!a%)y!a#O%)P#O#P$Ib#P;'S%)P;'S;=`%*n<%lO%)P*S%*UW$WpY#t(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O*S%*qP;=`<%l%)P*[%+RY$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e*[%+tP;=`<%l$Ej7V%,U^)ZW(pQ%[!b!f,g'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!_$Ej!_!`%-Q!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%-]]!g-y)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%.c]%]!b!b,g)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%/[!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%/mY%]!b!b,g$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e)j%0hYY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%1c[)j!c)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%2f]%]!b)ZW(pQ!d,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`%3_!`!a%4[!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%3lY%]!b!b,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%4i[)ZW(pQ%[!b!f,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%5jY(uP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z%6ib)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e7Z%8Qb)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e5P%9cW)ZW(o/]'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^2T%:UW(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O3o%:yZ!V-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!}$e!}#O%;l#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%;wY)PP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e4e%<la'f&jOY%=qYZ%>[Z]%=q]^%?Z^!Q%=q!Q![%?w![!w%=q!w!x%AX!x#O%=q#O#P%H_#P#i%=q#i#j%Ds#j#l%=q#l#m%IR#m;'S%=q;'S;=`%Kt<%lO%=q&t%=xUXY'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4e%>e[XY(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4e%?bVXY'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@OWXY'f&jOY%}Z!Q%}!Q![%@h![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@oWXY'f&jOY%}Z!Q%}!Q![%=q![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%A^['f&jOY%}Z!Q%}!Q![%BS![!c%}!c!i%BS!i#O%}#O#P&f#P#T%}#T#Z%BS#Z;'S%};'S;=`'r<%lO%}&t%BX['f&jOY%}Z!Q%}!Q![%B}![!c%}!c!i%B}!i#O%}#O#P&f#P#T%}#T#Z%B}#Z;'S%};'S;=`'r<%lO%}&t%CS['f&jOY%}Z!Q%}!Q![%Cx![!c%}!c!i%Cx!i#O%}#O#P&f#P#T%}#T#Z%Cx#Z;'S%};'S;=`'r<%lO%}&t%C}['f&jOY%}Z!Q%}!Q![%Ds![!c%}!c!i%Ds!i#O%}#O#P&f#P#T%}#T#Z%Ds#Z;'S%};'S;=`'r<%lO%}&t%Dx['f&jOY%}Z!Q%}!Q![%En![!c%}!c!i%En!i#O%}#O#P&f#P#T%}#T#Z%En#Z;'S%};'S;=`'r<%lO%}&t%Es['f&jOY%}Z!Q%}!Q![%Fi![!c%}!c!i%Fi!i#O%}#O#P&f#P#T%}#T#Z%Fi#Z;'S%};'S;=`'r<%lO%}&t%Fn['f&jOY%}Z!Q%}!Q![%Gd![!c%}!c!i%Gd!i#O%}#O#P&f#P#T%}#T#Z%Gd#Z;'S%};'S;=`'r<%lO%}&t%Gi['f&jOY%}Z!Q%}!Q![%=q![!c%}!c!i%=q!i#O%}#O#P&f#P#T%}#T#Z%=q#Z;'S%};'S;=`'r<%lO%}&t%HfXXY'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%IW['f&jOY%}Z!Q%}!Q![%I|![!c%}!c!i%I|!i#O%}#O#P&f#P#T%}#T#Z%I|#Z;'S%};'S;=`'r<%lO%}&t%JR['f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KO[XY'f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KwP;=`<%l%=q2a%LVZ!W,V)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P#Q%Lx#Q;'S$e;'S;=`(u<%lO$e'Y%MTY)]d)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%NQ[)ZW(pQ%[!b'f&j!_,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z& Vd)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q!Y%6Y!Y!Z%7q!Z![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e2]&!pY!T,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o&#m^)ZW(pQ%[!b'f&j!^,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P#p$e#p#q&$i#q;'S$e;'S;=`(u<%lO$e3o&$vY)T,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V&%qY!Ua)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e(]&&nc)ZW(pQ%[!b'RP'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&(Sc)ZW(pQ'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&)jb)ZW(pQdT'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![&)_![!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e",tokenizers:[EAe,PAe,0,1,2,3,4,5,6,7,8,9],topRules:{Program:[0,307]},dynamicPrecedences:{87:1,94:1,119:1,184:1,187:-10,240:-10,241:1,244:-1,246:-10,247:1,262:-1,267:2,268:2,306:-10,365:3,417:1,418:3,419:1,420:1},specialized:[{term:356,get:r=>RAe[r]||-1},{term:32,get:r=>IAe[r]||-1},{term:66,get:r=>DAe[r]||-1},{term:363,get:r=>NAe[r]||-1}],tokenPrec:24891}),VAe=WO.define({name:"cpp",parser:$Ae.configure({props:[kW.add({IfStatement:j2({except:/^\s*({|else\b)/}),TryStatement:j2({except:/^\s*({|catch)\b/}),LabeledStatement:BMe,CaseStatement:r=>r.baseIndent+r.unit,BlockComment:()=>null,CompoundStatement:LMe({closing:"}"}),Statement:j2({except:/^{/})}),EW.add({"DeclarationList CompoundStatement EnumeratorList FieldDeclarationList InitializerList":XMe,BlockComment(r){return{from:r.from+2,to:r.to-2}}})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/,closeBrackets:{stringPrefixes:["L","u","U","u8","LR","UR","uR","u8R","R"]}}});function lw(){return new PMe(VAe)}const LAe=Xt("TresPerspectiveCamera",{position:[0,0,5]},null,-1),BAe=Xt("TresAxesHelper",{args:[2]},null,-1),UAe=Xt("TresBoxGeometry",{args:[2,2,2]},null,-1),EL=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,PL=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,FAe={__name:"ShaderFragBase",setup(r){const{onLoop:e}=Ad(),n=[{name:"普通渐变",children:[{name:"普通渐变1",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x;
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"普通渐变2",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-st.x-st.y; //写出渐变方程
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"普通渐变3",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x*st.x*st.x-st.y; //写出渐变方程
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"普通渐变4",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = (st.x-0.5)*2.0;
    c = abs(c);
    gl_FragColor = vec4(0.0, c, 0.0, 1.0);
}
`},{name:"普通渐变5",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-distance(st, vec2(0.5))*1.0;
    gl_FragColor = vec4(0.0, c, c, 1.0);
}
`}]},{name:"渐变和切变，可以用于边缘平滑",children:[{name:"渐变和切变1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = distance(st, vec2(0.5))*2.0;
    c = smoothstep(0.8, 0.9, c);
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"渐变和切变2",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.x*st.x-st.y;
    c = abs(c);
    c = smoothstep(0.005, 0.015, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}

`},{name:"颜色混合(颜色渐变)",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.y;
    vec3 color = mix(vec3(1.0, 0.0, 0.0), vec3(0.0, 1.0, 0.0), c);
    
    gl_FragColor = vec4(color, 1.0);
}
`}]},{name:"重复图形",children:[{name:"重复图形1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = floor(st)*0.5;
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"重复图形2",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = fract(st);
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"重复图形3",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 center = 0.5+floor(st);
    float c = distance(st, center)*2.0;
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]},{name:"简单动画",children:[{name:"平移动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st.x -= fract(u_time*0.2)*2.0-1.0;

    float c = distance(st, vec2(0.5))*2.0;
    c = step(0.5, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"缩放动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    st /= sin(u_time);

    float c = distance(st, vec2(0.0))*2.0;
    c = step(1.0, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"旋转动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    float theta = mod(u_time, 6.28);
    st = mat2(cos(theta), sin(theta), -sin(theta), cos(theta)) * st; //构造了一个绕Z轴的旋转矩阵

    float c = st.x;
    c = abs(c);
    c = step(0.05, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]}],i={u_time:{value:0},u_resolution:{value:{x:800,y:600}}};e(({elapsed:g})=>{i.u_time.value=g}),lt(!0);const s=Wn(null),o=Wn(null),a=lt(null);let c=null;const h=lt(null);let d=null;Jn(()=>{const g=bt.updateListener.of(b=>{if(b.docChanged){let w=s.value;if(!w)return;w.vertexShader=b.state.doc.toString(),w.needsUpdate=!0}});c=new bt({doc:"",extensions:[rw,lw(),g],parent:a.value});const y=bt.updateListener.of(b=>{if(b.docChanged){let w=s.value;if(!w)return;w.fragmentShader=b.state.doc.toString(),w.needsUpdate=!0}});d=new bt({doc:"",extensions:[rw,lw(),y],parent:h.value}),i.u_resolution.value.x=o.value.clientWidth,i.u_resolution.value.y=o.value.clientHeight}),Qi(s,()=>{p(0,0)});function f(g){return g.trim()}function p(g,y){let w=n[g].children[y],x=w.vert?w.vert:EL,S=w.frag?w.frag:PL;x=f(x),S=f(S);let _=c,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:x}});_.dispatch(O),_=d,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:S}}),_.dispatch(O)}return(g,y)=>{const b=Rt("Button"),w=Rt("Card"),x=Rt("Col"),S=Rt("Divider"),_=Rt("Row");return ci(),Wr(_,null,{default:et(()=>[Ie(x,{span:4},{default:et(()=>[(ci(),ln(dn,null,kh(n,(O,T)=>Ie(w,null,{title:et(()=>[Xt("h3",null,mp(O.name),1)]),default:et(()=>[(ci(!0),ln(dn,null,kh(O.children,(E,P)=>(ci(),Wr(b,{onClick:I=>p(T,P)},{default:et(()=>[yn(mp(E.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),Ie(x,{span:10},{default:et(()=>[Xt("div",{ref_key:"tresCanvasParentRef",ref:o,class:"tresCanvasBorder"},[Ie(li(KP),{"clear-color":"#FDF5E6"},{default:et(()=>[LAe,BAe,Xt("TresMesh",null,[UAe,Xt("TresShaderMaterial",{ref_key:"materialRef",ref:s,uniforms:i,vertexShader:EL,fragmentShader:PL},null,512)]),Ie(li(T3))]),_:1})],512)]),_:1}),Ie(x,{span:10},{default:et(()=>[Ie(S,{orientation:"left"},{default:et(()=>[yn("顶点着色器")]),_:1}),Xt("div",{ref_key:"codeContainerV",ref:a},null,512),Ie(S,{orientation:"left"},{default:et(()=>[yn("片段着色器")]),_:1}),Xt("div",{ref_key:"codeContainerF",ref:h},null,512)]),_:1})]),_:1})}}},zAe=Xt("TresPerspectiveCamera",{position:[0,0,5]},null,-1),XAe=Xt("TresAxesHelper",{args:[2]},null,-1),WAe=Xt("TresBoxGeometry",{args:[2,3.6,2]},null,-1),AL=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,RL=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,QAe={__name:"ShaderImageBase",setup(r){const{onLoop:e}=Ad(),n=[{name:"显示图像",children:[{name:"显示图像",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    gl_FragColor = color;
}
`},{name:"图像变色",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float scale = abs(sin(u_time));
    scale *= 1.5;
    color.rgb *= scale;
    gl_FragColor = color;
}
`},{name:"图像置灰",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float gray = color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
    gl_FragColor = vec4(gray, gray, gray, color.a);
}
`},{name:"图像描边",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;

void main() {
    vec4 self = texture2D(u_tex0, UV);

    if(self.a>0.5){
        gl_FragColor = self;
        return;
    }

    float outlineW = abs(sin(u_time))*0.01;
    // outlineW = 0.01;

    int strokeCount = 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x-outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x+outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y-outlineW)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y+outlineW)).a>0.0 ? 1 : 0;

    if (strokeCount>0){
        self.rgb = vec3(1.0, 0.0, 1.0);
        self.a = 1.0;
    }

    gl_FragColor = self;
}
`}]}],i={u_time:{value:0},u_resolution:{value:{x:800,y:600}},u_tex0:{value:null}};e(({elapsed:g})=>{i.u_time.value=g}),lt(!0);const s=Wn(null),o=Wn(null),a=lt(null);let c=null;const h=lt(null);let d=null;Jn(()=>{const g=bt.updateListener.of(b=>{if(b.docChanged){let w=s.value;if(!w)return;w.vertexShader=b.state.doc.toString(),w.needsUpdate=!0}});c=new bt({doc:"",extensions:[rw,lw(),g],parent:a.value});const y=bt.updateListener.of(b=>{if(b.docChanged){let w=s.value;if(!w)return;w.fragmentShader=b.state.doc.toString(),w.needsUpdate=!0}});d=new bt({doc:"",extensions:[rw,lw(),y],parent:h.value}),i.u_resolution.value.x=o.value.clientWidth,i.u_resolution.value.y=o.value.clientHeight,i1e({map:"img/img1.png"}).then(b=>{i.u_tex0.value=b.map})}),Qi(s,()=>{p(0,0)});function f(g){return g.trim()}function p(g,y){let w=n[g].children[y],x=w.vert?w.vert:AL,S=w.frag?w.frag:RL;x=f(x),S=f(S);let _=c,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:x}});_.dispatch(O),_=d,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:S}}),_.dispatch(O)}return(g,y)=>{const b=Rt("Button"),w=Rt("Card"),x=Rt("Col"),S=Rt("Divider"),_=Rt("Row");return ci(),Wr(_,null,{default:et(()=>[Ie(x,{span:4},{default:et(()=>[(ci(),ln(dn,null,kh(n,(O,T)=>Ie(w,null,{title:et(()=>[Xt("h3",null,mp(O.name),1)]),default:et(()=>[(ci(!0),ln(dn,null,kh(O.children,(E,P)=>(ci(),Wr(b,{onClick:I=>p(T,P)},{default:et(()=>[yn(mp(E.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),Ie(x,{span:10},{default:et(()=>[Xt("div",{ref_key:"tresCanvasParentRef",ref:o,class:"tresCanvasBorder"},[Ie(li(KP),{"clear-color":"#FDF5E6"},{default:et(()=>[zAe,XAe,Xt("TresMesh",null,[WAe,Xt("TresShaderMaterial",{ref_key:"materialRef",ref:s,uniforms:i,vertexShader:AL,fragmentShader:RL},null,512)]),Ie(li(T3))]),_:1})],512)]),_:1}),Ie(x,{span:10},{default:et(()=>[Ie(S,{orientation:"left"},{default:et(()=>[yn("顶点着色器")]),_:1}),Xt("div",{ref_key:"codeContainerV",ref:a},null,512),Ie(S,{orientation:"left"},{default:et(()=>[yn("片段着色器")]),_:1}),Xt("div",{ref_key:"codeContainerF",ref:h},null,512)]),_:1})]),_:1})}}},HAe=["src"],sk={__name:"ShowVideo",props:{link:String,width:Number,height:Number},setup(r){const e=r,n=lt(null);return Jn(()=>{var i=e.width?`${i}px`:"100%",s=e.height?`${s}px`:"100vh";n.value={width:i,height:s}}),(i,s)=>(ci(),ln("video",{src:e.link,style:Bh(n.value),controls:"",autoplay:"",loop:""},null,12,HAe))}},R_=r=>(y8("data-v-36b71117"),r=r(),v8(),r),GAe=R_(()=>Xt("audio",{src:"ballgame/ball_bgm.mp3",id:"ball_bgm",loop:"true"},null,-1)),YAe=R_(()=>Xt("audio",{src:"ballgame/ball_bomb.mp3",id:"ball_bomb"},null,-1)),jAe=R_(()=>Xt("audio",{src:"ballgame/ball_collect.mp3",id:"ball_collect"},null,-1)),qAe=R_(()=>Xt("audio",{src:"ballgame/ball_click.mp3",id:"ball_click"},null,-1)),ZAe={__name:"BallGame",setup(r){const e={Wait:"Wait",Play:"Play"},n=lt(null);let i=null,s=null,o=[],a=null,c=[],h={},d=0,f=0,p=0,g=0,y=1,b=e.Wait,w=null,x=null,S=null,_=null,O=null;function T(J,q){const z=J.x,X=J.y,te=J.radius,se=q.x,Q=q.y,Z=q.width,le=q.height;let pe=Math.max(se,Math.min(z,se+Z)),be=Math.max(Q,Math.min(X,Q+le)),Ee=z-pe,ee=X-be;return Ee*Ee+ee*ee<=te*te}function E(J,q){for(let z of q)if(T(J,z))return z;return null}const P={Black:"Black",Red:"Red"};class I{constructor(q,z,X=100,te=50,se=10){this.color="black",this.x=q,this.y=z,this.width=X,this.height=te,this.radius=se,this.rotation=0,this.rotationCenter={x:this.x+this.width/2,y:this.y+this.height/2},this.angle=0,this.speed=0,this.velocity={x:0,y:0}}setRotation(q){return this.rotation=q*Math.PI/180,this}setRotationCenter(q,z){return this.rotationCenter={x:q,y:z},this}setRotationCenterToMiddle(){return this.rotationCenter={x:this.x+this.width/2,y:this.y+this.height/2},this}setAngle(q){return this.angle=q*Math.PI/180,this._updateVelocity(),this}setSpeed(q){return this.speed=q,this._updateVelocity(),this}setVelocity(q,z){return this.velocity.x=q,this.velocity.y=z,this.speed=Math.sqrt(q*q+z*z),this.angle=Math.atan2(z,q),this}update(){return this.x+=this.velocity.x,this.y+=this.velocity.y,this.rotationCenter&&(this.rotationCenter.x+=this.velocity.x,this.rotationCenter.y+=this.velocity.y),this}_updateVelocity(){this.velocity.x=this.speed*Math.cos(this.angle),this.velocity.y=this.speed*Math.sin(this.angle)}getAngleDegrees(){return this.angle*180/Math.PI}getRotationDegrees(){return this.rotation*180/Math.PI}alignRotationWithMovement(){return this.rotation=this.angle,this}draw(q){q.save(),q.translate(this.rotationCenter.x,this.rotationCenter.y),q.rotate(this.rotation),q.translate(-this.rotationCenter.x,-this.rotationCenter.y);const{width:z,height:X,radius:te}=this;q.beginPath(),q.moveTo(this.x+te,this.y),q.lineTo(this.x+z-te,this.y),q.arcTo(this.x+z,this.y,this.x+z,this.y+te,te),q.lineTo(this.x+z,this.y+X-te),q.arcTo(this.x+z,this.y+X,this.x+z-te,this.y+X,te),q.lineTo(this.x+te,this.y+X),q.arcTo(this.x,this.y+X,this.x,this.y+X-te,te),q.lineTo(this.x,this.y+te),q.arcTo(this.x,this.y,this.x+te,this.y,te),q.closePath(),q.fillStyle=this.color,q.fill(),q.restore()}}class A{constructor(q,z){this.x=q,this.y=z,this.radius=20,this.angle=Math.random()*Math.PI*2,this.speed=20,this.life=1e3,this.alpha=100,this.color=`rgb(255,69,1,${this.alpha})`}draw(){i.beginPath(),i.arc(this.x,this.y,this.radius,0,Math.PI*2),i.fillStyle=this.color,i.fill()}update(q){this.x=this.x+Math.cos(this.angle)*this.speed,this.y=this.y+Math.sin(this.angle)*this.speed,this.angle+=Math.PI/180,this.speed*=.9,this.radius-=1,this.radius<0&&(this.radius=0),this.alpha-=Math.floor(q/1e3*255),this.life-=q}}class D{constructor(q,z,X=50){this.color="black",this.x=q,this.y=z,this.radius=X,this.rotation=0,this.rotationCenter={x:this.x,y:this.y},this.startAngle=0,this.endAngle=Math.PI*2,this.counterclockwise=!1,this.shadowColor="rgba(0, 0, 0, 0.3)",this.shadowBlur=10,this.shadowOffsetX=3,this.shadowOffsetY=3,this.useGradient=!0,this.highlightColor="rgba(255, 255, 255, 0.8)",this.shadowCenter="rgba(0, 0, 0, 0.2)",this.balls=[]}draw(q){q.save(),this.balls.length>0?this.drawBalls(q):this.drawSelf(q),q.restore()}update(q){this.balls.length>0?this.updateBalls(q):this.updateSelf&&this.updateSelf(q)}drawSelf(q){if(q.shadowColor=this.shadowColor,q.shadowBlur=this.shadowBlur,q.shadowOffsetX=this.shadowOffsetX,q.shadowOffsetY=this.shadowOffsetY,q.translate(this.rotationCenter.x,this.rotationCenter.y),q.rotate(this.rotation),q.translate(-this.rotationCenter.x,-this.rotationCenter.y),this.useGradient){const z=q.createRadialGradient(this.x-this.radius*.3,this.y-this.radius*.3,this.radius*.1,this.x,this.y,this.radius);z.addColorStop(0,this.highlightColor),z.addColorStop(.1,this.color),z.addColorStop(.9,this.color),z.addColorStop(1,this.shadowCenter),q.fillStyle=z}else q.fillStyle=this.color;q.beginPath(),q.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.counterclockwise),q.fill()}blast(){let q=10;this.balls=[];for(let z=0;z<q;z++)this.balls.push(new A(this.x,this.y))}updateBalls(q){let z=[];for(let X=0;X<this.balls.length;X++){const te=this.balls[X];te.update(q),te.life<0&&z.push(te)}for(let X=0;X<z.length;X++){const te=z[X];let se=this.balls.indexOf(te);se>=0&&this.balls.splice(se)}}drawBalls(q){for(let z=0;z<this.balls.length;z++)this.balls[z].draw(q)}setShadow(q,z,X,te){return this.shadowColor=q,this.shadowBlur=z,this.shadowOffsetX=X,this.shadowOffsetY=te,this}setGradientColors(q,z,X){return this.color=q,this.highlightColor=z,this.shadowCenter=X,this}setUseGradient(q){return this.useGradient=q,this}}const M=()=>{n.value&&(n.value.width=window.innerWidth,n.value.height=window.innerHeight)};function $(J,q){return Math.random()*(q-J)+J}function L(J){if(d+=J,d<=2e3)return;d=0;let q=60,z=60,X=h.centerX-q/2,te=h.yMin,se=new I(X,te,q,z,0);o.push(se),c.push(se),f==2?(se.boxType=P.Red,se.color="#f6416c"):(se.boxType=P.Black,se.color="#252a34"),f=(f+1)%3;let Q=$(-.8,.8)*y,Z=2*y;se.setVelocity(Q,Z)}function N(){let J=[];for(let q=0;q<c.length;q++){const z=c[q];let X=z.getRotationDegrees()+2;z.setRotation(X),z.y>h.yMax&&J.push(z)}for(let q=0;q<J.length;q++){const z=J[q];V(z)}}function V(J){let q=c.indexOf(J);q>=0&&c.splice(q,1),q=o.indexOf(J),q>=0&&o.splice(q,1)}function U(){let J=E(a,c);J&&(J.boxType===P.Red?(p+=1,y+=.3,V(J),w.play()):(ke(),V(J),a.blast(),S.play()),p>g&&(g=p))}function F(J,q,z,X,te={}){J.save(),J.font=te.font||"40px Courier New",J.textAlign=te.align||"center",J.textBaseline=te.baseline||"center",J.strokeStyle=te.strokeColor||"black",J.lineWidth=te.strokeWidth||5,J.strokeText(q,z,X),J.fillStyle=te.fillColor||"white",J.fillText(q,z,X),J.restore()}let H=0;const K=()=>{if(!i||!n.value)return;if(b==e.Play){H||(H=Date.now());let q=Date.now(),z=q-H;for(let X=0;X<o.length;X++){const te=o[X];te.update&&te.update(z)}L(z),N(),U(),H=q}i.fillStyle=s,i.fillRect(0,0,n.value.width,n.value.height);for(let q=0;q<o.length;q++)o[q].draw(i);b==e.Wait&&F(i,"点击屏幕开始游戏",h.centerX,h.yMax*.5);let J=130;F(i,`当前得分:${p}`,h.centerX,h.yMax*.6+J),F(i,`最高得分:${g}`,h.centerX,h.yMax*.6+J+50),requestAnimationFrame(K)};function ie(J){b==e.Wait?(b=e.Play,w.load(),x.load(),S.load(),_.load(),x.play(),ke(),K()):a.speed=-a.speed}function he(J){O||(O="mouse"),O=="mouse"&&(ie(),J.preventDefault())}function me(J){}function Pe(J){}function _e(J){O||(O="touch"),O=="touch"&&(ie(),J.preventDefault())}function ue(J){J.preventDefault()}function Se(J){console.log("Touch end")}function ke(){d=0,p=0,f=0,y=1}return Jn(()=>{i=n.value.getContext("2d"),M(),h.width=600,h.height=n.value.height,h.centerX=n.value.width/2,h.centerY=n.value.height/2,h.xMin=h.centerX-h.width/2,h.xMax=h.centerX+h.width/2,h.yMin=h.centerY-h.height/2,h.yMax=h.centerY+h.height/2;const J=n.value.width/2,q=n.value.height/2;s=i.createLinearGradient(0,0,n.value.width,0),s.addColorStop(0,"#71c9ce"),s.addColorStop(.5,"#8edbdf"),s.addColorStop(1,"#71c9ce"),window.addEventListener("resize",M),window.addEventListener("mousedown",he),window.addEventListener("mousemove",me),window.addEventListener("mouseup",Pe),window.addEventListener("touchstart",_e),window.addEventListener("touchmove",ue),window.addEventListener("touchend",Se),x=document.getElementById("ball_bgm"),w=document.getElementById("ball_collect"),S=document.getElementById("ball_bomb"),_=document.getElementById("ball_click"),b=e.Wait,ke();{let X=h.width,te=h.height,se=J-X/2,Q=q-te/2,Z=new I(se,Q,X,te,5);Z.color="#A9A9A988"}let z=0;{let X=h.width*.6,te=60,se=J-X/2,Q=h.yMax*.6,Z=new I(se,Q,X,te,te/2);Z.color="#A9A9A9",o.push(Z),z=X}{let X=30,te=J,se=h.yMax*.6+X,Q=new D(te,se,X);Q.color="#FF4500",Q.speed=300,Q.updateSelf=(Z=>{Q.x+=Q.speed*Z/1e3,Q.x>te+z/2-X?Q.speed=-Math.abs(Q.speed):Q.x<te-z/2+X&&(Q.speed=Math.abs(Q.speed)),Q.x>h.xMax&&(Q.x=h.xMin,Q.speed=Math.abs(Q.speed)),Q.x<h.xMin&&(Q.x=h.xMax,Q.speed=-Math.abs(Q.speed))}).bind(Q),o.push(Q),a=Q}K()}),na(()=>{window.removeEventListener("resize",M),window.removeEventListener("mousedown",he),window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",Pe),window.removeEventListener("touchstart",_e),window.removeEventListener("touchmove",ue),window.removeEventListener("touchend",Se),x.pause()}),(J,q)=>(ci(),ln(dn,null,[GAe,YAe,jAe,qAe,Xt("canvas",{ref_key:"canvasRef",ref:n,type:"2d"},null,512)],64))}},KAe=tCe(ZAe,[["__scopeId","data-v-36b71117"]]),JAe=Xt("TresAmbientLight",{intensity:1},null,-1),e4e=Xt("TresAxesHelper",null,null,-1),t4e=["position"],i4e=Xt("TresSphereGeometry",{args:[.4,8,8]},null,-1),n4e=Xt("TresMeshBasicMaterial",{color:"red",transparent:!0,opacity:.1},null,-1),r4e=[i4e,n4e],s4e={__name:"CurveRope",setup(r){const e=Wn(null),n=Wn(null),i=Wn(null);let o=new t_().load("img/rope3.png");var a=new Ra({map:o});const c=Wn(null);let h=-1,d=new HP,f=Cd([new re(0,-8,0),new re(0,2,0),new re(0,8,0)]);function p(){const w=new Fw(...f),x=w.getLength();console.log("curveLength",x);const S=30;var _=[],O=[];for(let A=0;A<S;A++){let D=A/S,M=w.getPointAt(D),$=w.getTangentAt(D),L=new Xe(-$.y,$.x).normalize(),N=(A+1)/S,V=w.getPointAt(N),U=w.getTangentAt(N),F=new Xe(-U.y,U.x).normalize(),H=[M.clone().add(L.clone().multiplyScalar(.4)),M.clone().sub(L.clone().multiplyScalar(.4)),V.clone().add(F.clone().multiplyScalar(.4)),V.clone().sub(F.clone().multiplyScalar(.4))];_.push(H[0]),_.push(H[1]),_.push(H[2]),_.push(H[1]),_.push(H[3]),_.push(H[2]);let K=0,ie=1;console.log(`ratio1=${D.toFixed(2)}`,`uv1=${K.toFixed(2)}`,`uv2=${ie.toFixed(2)}`),O.push(new Xe(0,K)),O.push(new Xe(1,K)),O.push(new Xe(0,ie)),O.push(new Xe(1,K)),O.push(new Xe(1,ie)),O.push(new Xe(0,ie))}const T=new Float32Array(_.length*3);for(let A=0;A<_.length;A++)T[A*3]=_[A].x,T[A*3+1]=_[A].y,T[A*3+2]=0;const E=new Float32Array(O.length*2);for(let A=0;A<O.length;A++)E[A*2]=O[A].x,E[A*2+1]=O[A].y;var P=new si;for(P.setAttribute("position",new Di(T,3)),P.setAttribute("uv",new Di(E,2));n.value.children.length>0;)n.value.remove(n.value.children[0]);var I;{var I=new sn(P,a);n.value.add(I)}}Qi(n,()=>{p()});function g(w){if(h>=0){let x={x:0,y:0};x.x=w.clientX/window.innerWidth*2-1,x.y=-(w.clientY/window.innerHeight)*2+1,d.setFromCamera(x,i.value);let S=new wa(new re(0,0,1),0),_=new re;d.ray.intersectPlane(S,_)&&(f[h]=_),p()}}function y(w){let x={x:w.clientX/window.innerWidth*2-1,y:-(w.clientY/window.innerHeight)*2+1};d.setFromCamera(x,i.value);const S=d.intersectObjects(c.value.children);if(S.length>0){const _=S[0].object;h=c.value.children.indexOf(_)}else h=-1}function b(w){h=-1}return(w,x)=>{const S=Rt("TresCanvas");return ci(),ln("div",{onMousemove:g,onMousedown:y,onMouseup:b},[Ie(S,{ref_key:"canvasRef",ref:e,"clear-color":"#f9f7f7","window-size":""},{default:et(()=>[Xt("TresPerspectiveCamera",{ref_key:"cameraRef",ref:i,position:[0,0,20],rotation:[0,0,0]},null,512),JAe,e4e,Xt("TresGroup",{ref_key:"curveRef",ref:n},null,512),Xt("TresGroup",{ref_key:"controlPointsRef",ref:c},[(ci(!0),ln(dn,null,kh(li(f),(_,O)=>(ci(),ln("TresMesh",{key:O,position:_},r4e,8,t4e))),128))],512)]),_:1},512)],32)}}},o4e="modulepreload",a4e=function(r){return"/"+r},IL={},cw=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(n.map(c=>{if(c=a4e(c),c in IL)return;IL[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":o4e,h||(f.as="script",f.crossOrigin=""),f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),h)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}return s.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};var Yt=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(Yt||{});const rE=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},fx=(r,e)=>rE(r).priority??e,Es={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(rE).forEach(e=>{e.type.forEach(n=>{var i,s;return(s=(i=this._removeHandlers)[n])==null?void 0:s.call(i,e)})}),this},add(...r){return r.map(rE).forEach(e=>{e.type.forEach(n=>{var o,a;const i=this._addHandlers,s=this._queue;i[n]?(a=i[n])==null||a.call(i,e):(s[n]=s[n]||[],(o=s[n])==null||o.push(e))})}),this},handle(r,e,n){var a;const i=this._addHandlers,s=this._removeHandlers;if(i[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=e,s[r]=n;const o=this._queue;return o[r]&&((a=o[r])==null||a.forEach(c=>e(c)),delete o[r]),this},handleByMap(r,e){return this.handle(r,n=>{n.name&&(e[n.name]=n.ref)},n=>{n.name&&delete e[n.name]})},handleByNamedList(r,e,n=-1){return this.handle(r,i=>{e.findIndex(o=>o.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((o,a)=>fx(a.value,n)-fx(o.value,n)))},i=>{const s=e.findIndex(o=>o.name===i.name);s!==-1&&e.splice(s,1)})},handleByList(r,e,n=-1){return this.handle(r,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((s,o)=>fx(o,n)-fx(s,n)))},i=>{const s=e.indexOf(i.ref);s!==-1&&e.splice(s,1)})}},l4e={extension:{type:Yt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await cw(()=>import("./browserAll-BBSON43q.js"),__vite__mapDeps([0,1,2]))}},c4e={extension:{type:Yt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await cw(()=>import("./webworkerAll-DM1gbbGH.js"),__vite__mapDeps([1,2]))}};class Oo{constructor(e,n,i){this._x=n||0,this._y=i||0,this._observer=e}clone(e){return new Oo(e??this._observer,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var XQ={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function s(h,d,f){this.fn=h,this.context=d,this.once=f||!1}function o(h,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new s(f,p||h,g),b=n?n+d:d;return h._events[b]?h._events[b].fn?h._events[b]=[h._events[b],y]:h._events[b].push(y):(h._events[b]=y,h._eventsCount++),h}function a(h,d){--h._eventsCount===0?h._events=new i:delete h._events[d]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},c.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,b=new Array(y);g<y;g++)b[g]=p[g].fn;return b},c.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,f,p,g,y,b){var w=n?n+d:d;if(!this._events[w])return!1;var x=this._events[w],S=arguments.length,_,O;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),S){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,p),!0;case 4:return x.fn.call(x.context,f,p,g),!0;case 5:return x.fn.call(x.context,f,p,g,y),!0;case 6:return x.fn.call(x.context,f,p,g,y,b),!0}for(O=1,_=new Array(S-1);O<S;O++)_[O-1]=arguments[O];x.fn.apply(x.context,_)}else{var T=x.length,E;for(O=0;O<T;O++)switch(x[O].once&&this.removeListener(d,x[O].fn,void 0,!0),S){case 1:x[O].fn.call(x[O].context);break;case 2:x[O].fn.call(x[O].context,f);break;case 3:x[O].fn.call(x[O].context,f,p);break;case 4:x[O].fn.call(x[O].context,f,p,g);break;default:if(!_)for(E=1,_=new Array(S-1);E<S;E++)_[E-1]=arguments[E];x[O].fn.apply(x[O].context,_)}}return!0},c.prototype.on=function(d,f,p){return o(this,d,f,p,!1)},c.prototype.once=function(d,f,p){return o(this,d,f,p,!0)},c.prototype.removeListener=function(d,f,p,g){var y=n?n+d:d;if(!this._events[y])return this;if(!f)return a(this,y),this;var b=this._events[y];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&a(this,y);else{for(var w=0,x=[],S=b.length;w<S;w++)(b[w].fn!==f||g&&!b[w].once||p&&b[w].context!==p)&&x.push(b[w]);x.length?this._events[y]=x.length===1?x[0]:x:a(this,y)}return this},c.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&a(this,f)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,r.exports=c})(XQ);var h4e=XQ.exports;const Na=nm(h4e),u4e=Math.PI*2,d4e=180/Math.PI,f4e=Math.PI/180;class Kn{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new Kn(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return ok.x=0,ok.y=0,ok}}const ok=new Kn;class Gi{constructor(e=1,n=0,i=0,s=1,o=0,a=0){this.array=null,this.a=e,this.b=n,this.c=i,this.d=s,this.tx=o,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,i,s,o,a){return this.a=e,this.b=n,this.c=i,this.d=s,this.tx=o,this.ty=a,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const i=n||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,n){n=n||new Kn;const i=e.x,s=e.y;return n.x=this.a*i+this.c*s+this.tx,n.y=this.b*i+this.d*s+this.ty,n}applyInverse(e,n){n=n||new Kn;const i=this.a,s=this.b,o=this.c,a=this.d,c=this.tx,h=this.ty,d=1/(i*a+o*-s),f=e.x,p=e.y;return n.x=a*d*f+-o*d*p+(h*o-c*a)*d,n.y=i*d*p+-s*d*f+(-h*i+c*s)*d,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),s=this.a,o=this.c,a=this.tx;return this.a=s*n-this.b*i,this.b=s*i+this.b*n,this.c=o*n-this.d*i,this.d=o*i+this.d*n,this.tx=a*n-this.ty*i,this.ty=a*i+this.ty*n,this}append(e){const n=this.a,i=this.b,s=this.c,o=this.d;return this.a=e.a*n+e.b*s,this.b=e.a*i+e.b*o,this.c=e.c*n+e.d*s,this.d=e.c*i+e.d*o,this.tx=e.tx*n+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*o+this.ty,this}appendFrom(e,n){const i=e.a,s=e.b,o=e.c,a=e.d,c=e.tx,h=e.ty,d=n.a,f=n.b,p=n.c,g=n.d;return this.a=i*d+s*p,this.b=i*f+s*g,this.c=o*d+a*p,this.d=o*f+a*g,this.tx=c*d+h*p+n.tx,this.ty=c*f+h*g+n.ty,this}setTransform(e,n,i,s,o,a,c,h,d){return this.a=Math.cos(c+d)*o,this.b=Math.sin(c+d)*o,this.c=-Math.sin(c-h)*a,this.d=Math.cos(c-h)*a,this.tx=e-(i*this.a+s*this.c),this.ty=n-(i*this.b+s*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,i=this.b,s=this.c,o=this.d,a=e.pivot,c=-Math.atan2(-s,o),h=Math.atan2(i,n),d=Math.abs(c+h);return d<1e-5||Math.abs(u4e-d)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=h),e.scale.x=Math.sqrt(n*n+i*i),e.scale.y=Math.sqrt(s*s+o*o),e.position.x=this.tx+(a.x*n+a.y*s),e.position.y=this.ty+(a.x*i+a.y*o),e}invert(){const e=this.a,n=this.b,i=this.c,s=this.d,o=this.tx,a=e*s-n*i;return this.a=s/a,this.b=-n/a,this.c=-i/a,this.d=e/a,this.tx=(i*this.ty-s*o)/a,this.ty=-(e*this.ty-n*o)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Gi;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return m4e.identity()}static get shared(){return p4e.identity()}}const p4e=new Gi,m4e=new Gi,Iu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Du=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Nu=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],sE=[],WQ=[],px=Math.sign;function g4e(){for(let r=0;r<16;r++){const e=[];sE.push(e);for(let n=0;n<16;n++){const i=px(Iu[r]*Iu[n]+Nu[r]*Du[n]),s=px(Du[r]*Iu[n]+$u[r]*Du[n]),o=px(Iu[r]*Nu[n]+Nu[r]*$u[n]),a=px(Du[r]*Nu[n]+$u[r]*$u[n]);for(let c=0;c<16;c++)if(Iu[c]===i&&Du[c]===s&&Nu[c]===o&&$u[c]===a){e.push(c);break}}}for(let r=0;r<16;r++){const e=new Gi;e.set(Iu[r],Du[r],Nu[r],$u[r],0,0),WQ.push(e)}}g4e();const Nn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Iu[r],uY:r=>Du[r],vX:r=>Nu[r],vY:r=>$u[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>sE[r][e],sub:(r,e)=>sE[r][Nn.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Nn.S:Nn.N:Math.abs(e)*2<=Math.abs(r)?r>0?Nn.E:Nn.W:e>0?r>0?Nn.SE:Nn.SW:r>0?Nn.NE:Nn.NW,matrixAppendRotationInv:(r,e,n=0,i=0)=>{const s=WQ[Nn.inv(e)];s.tx=n,s.ty=i,r.append(s)}},mx=[new Kn,new Kn,new Kn,new Kn];class wr{constructor(e=0,n=0,i=0,s=0){this.type="rectangle",this.x=Number(e),this.y=Number(n),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new wr(0,0,0,0)}clone(){return new wr(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(e,n,i,s=.5){const{width:o,height:a}=this;if(o<=0||a<=0)return!1;const c=this.x,h=this.y,d=i*(1-s),f=i-d,p=c-d,g=c+o+d,y=h-d,b=h+a+d,w=c+f,x=c+o-f,S=h+f,_=h+a-f;return e>=p&&e<=g&&n>=y&&n<=b&&!(e>w&&e<x&&n>S&&n<_)}intersects(e,n){if(!n){const A=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=A)return!1;const M=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>M}const i=this.left,s=this.right,o=this.top,a=this.bottom;if(s<=i||a<=o)return!1;const c=mx[0].set(e.left,e.top),h=mx[1].set(e.left,e.bottom),d=mx[2].set(e.right,e.top),f=mx[3].set(e.right,e.bottom);if(d.x<=c.x||h.y<=c.y)return!1;const p=Math.sign(n.a*n.d-n.b*n.c);if(p===0||(n.apply(c,c),n.apply(h,h),n.apply(d,d),n.apply(f,f),Math.max(c.x,h.x,d.x,f.x)<=i||Math.min(c.x,h.x,d.x,f.x)>=s||Math.max(c.y,h.y,d.y,f.y)<=o||Math.min(c.y,h.y,d.y,f.y)>=a))return!1;const g=p*(h.y-c.y),y=p*(c.x-h.x),b=g*i+y*o,w=g*s+y*o,x=g*i+y*a,S=g*s+y*a;if(Math.max(b,w,x,S)<=g*c.x+y*c.y||Math.min(b,w,x,S)>=g*f.x+y*f.y)return!1;const _=p*(c.y-d.y),O=p*(d.x-c.x),T=_*i+O*o,E=_*s+O*o,P=_*i+O*a,I=_*s+O*a;return!(Math.max(T,E,P,I)<=_*c.x+O*c.y||Math.min(T,E,P,I)>=_*f.x+O*f.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(i-n,0),this.y=s,this.height=Math.max(o-s,0),this}ceil(e=1,n=.001){const i=Math.ceil((this.x+this.width-n)*e)/e,s=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=i-this.x,this.height=s-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=i-n,this.y=s,this.height=o-s,this}getBounds(e){return e||(e=new wr),e.copyFrom(this),e}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ak={default:-1};function _r(r="default"){return ak[r]===void 0&&(ak[r]=-1),++ak[r]}const DL={},Wi="8.0.0",y4e="8.3.4";function $i(r,e,n=3){if(DL[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(i=i.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(i))),DL[e]=!0}const QQ=()=>{};function hw(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function NL(r){return!(r&r-1)&&!!r}function v4e(r){const e={};for(const n in r)r[n]!==void 0&&(e[n]=r[n]);return e}const $L=Object.create(null);function b4e(r){const e=$L[r];return e===void 0&&($L[r]=_r("resource")),e}const HQ=class GQ extends Na{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...GQ.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){$i(Wi,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=b4e(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};HQ.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let x4e=HQ;const YQ=class jQ extends Na{constructor(e={}){super(),this.options=e,this.uid=_r("textureSource"),this._resourceType="textureSource",this._resourceId=_r("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...jQ.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new x4e(v4e(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var n,i;this.style!==e&&((n=this._style)==null||n.off("change",this._onStyleChange,this),this._style=e,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=_r("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,n,i){i||(i=this._resolution),e||(e=this.width),n||(n=this.height);const s=Math.round(e*i),o=Math.round(n*i);return this.width=s/i,this.height=o/i,this._resolution=i,this.pixelWidth===s&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=o,this.emit("resize",this),this._resourceId=_r("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=NL(this.pixelWidth)&&NL(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};YQ.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let xl=YQ;class bA extends xl{constructor(e){const n=e.resource||new Float32Array(e.width*e.height*4);let i=e.format;i||(n instanceof Float32Array?i="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?i="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?i="rgba16uint":(n instanceof Int8Array,i="bgra8unorm")),super({...e,resource:n,format:i}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}bA.extension=Yt.TextureSource;const VL=new Gi;class O4e{constructor(e,n){this.mapCoord=new Gi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var n;this.texture!==e&&((n=this._texture)==null||n.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,n){n===void 0&&(n=e);const i=this.mapCoord;for(let s=0;s<e.length;s+=2){const o=e[s],a=e[s+1];n[s]=o*i.a+a*i.c+i.tx,n[s+1]=o*i.b+a*i.d+i.ty}return n}update(){const e=this._texture;this._updateID++;const n=e.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=e.orig,s=e.trim;s&&(VL.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(VL));const o=e.source,a=this.uClampFrame,c=this.clampMargin/o._resolution,h=this.clampOffset/o._resolution;return a[0]=(e.frame.x+c+h)/o.width,a[1]=(e.frame.y+c+h)/o.height,a[2]=(e.frame.x+e.frame.width-c+h)/o.width,a[3]=(e.frame.y+e.frame.height-c+h)/o.height,this.uClampOffset[0]=this.clampOffset/o.pixelWidth,this.uClampOffset[1]=this.clampOffset/o.pixelHeight,this.isSimple=e.frame.width===o.width&&e.frame.height===o.height&&e.rotate===0,!0}}class Vi extends Na{constructor({source:e,label:n,frame:i,orig:s,trim:o,defaultAnchor:a,defaultBorders:c,rotate:h,dynamic:d}={}){if(super(),this.uid=_r("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new wr,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=(e==null?void 0:e.source)??new xl,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:f,height:p}=this._source;this.frame.width=f,this.frame.height=p}this.orig=s||this.frame,this.trim=o,this.rotate=h??0,this.defaultAnchor=a,this.defaultBorders=c,this.destroyed=!1,this.dynamic=d||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new O4e(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:n}=this,{width:i,height:s}=this._source,o=n.x/i,a=n.y/s,c=n.width/i,h=n.height/s;let d=this.rotate;if(d){const f=c/2,p=h/2,g=o+f,y=a+p;d=Nn.add(d,Nn.NW),e.x0=g+f*Nn.uX(d),e.y0=y+p*Nn.uY(d),d=Nn.add(d,2),e.x1=g+f*Nn.uX(d),e.y1=y+p*Nn.uY(d),d=Nn.add(d,2),e.x2=g+f*Nn.uX(d),e.y2=y+p*Nn.uY(d),d=Nn.add(d,2),e.x3=g+f*Nn.uX(d),e.y3=y+p*Nn.uY(d)}else e.x0=o,e.y0=a,e.x1=o+c,e.y1=a,e.x2=o+c,e.y2=a+h,e.x3=o,e.y3=a+h}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return $i(Wi,"Texture.baseTexture is now Texture.source"),this._source}}Vi.EMPTY=new Vi({label:"EMPTY",source:new xl({label:"EMPTY"})});Vi.EMPTY.destroy=QQ;Vi.WHITE=new Vi({source:new bA({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Vi.WHITE.destroy=QQ;function w4e(r,e,n,i){const{width:s,height:o}=n.orig,a=n.trim;if(a){const c=a.width,h=a.height;r.minX=a.x-e._x*s-i,r.maxX=r.minX+c,r.minY=a.y-e._y*o-i,r.maxY=r.minY+h}else r.minX=-e._x*s-i,r.maxX=r.minX+s,r.minY=-e._y*o-i,r.maxY=r.minY+o}const LL=new Gi;class fl{constructor(e=1/0,n=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=LL,this.minX=e,this.minY=n,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new wr);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=LL,this}set(e,n,i,s){this.minX=e,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,n,i,s,o){o||(o=this.matrix);const a=o.a,c=o.b,h=o.c,d=o.d,f=o.tx,p=o.ty;let g=this.minX,y=this.minY,b=this.maxX,w=this.maxY,x=a*e+h*n+f,S=c*e+d*n+p;x<g&&(g=x),S<y&&(y=S),x>b&&(b=x),S>w&&(w=S),x=a*i+h*n+f,S=c*i+d*n+p,x<g&&(g=x),S<y&&(y=S),x>b&&(b=x),S>w&&(w=S),x=a*e+h*s+f,S=c*e+d*s+p,x<g&&(g=x),S<y&&(y=S),x>b&&(b=x),S>w&&(w=S),x=a*i+h*s+f,S=c*i+d*s+p,x<g&&(g=x),S<y&&(y=S),x>b&&(b=x),S>w&&(w=S),this.minX=g,this.minY=y,this.maxX=b,this.maxY=w}addRect(e,n){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,n)}addBounds(e,n){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,n)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const n=this.minX,i=this.minY,s=this.maxX,o=this.maxY,{a,b:c,c:h,d,tx:f,ty:p}=e;let g=a*n+h*i+f,y=c*n+d*i+p;this.minX=g,this.minY=y,this.maxX=g,this.maxY=y,g=a*s+h*i+f,y=c*s+d*i+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*n+h*o+f,y=c*n+d*o+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*s+h*o+f,y=c*s+d*o+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,n,i,s){return this.minX<e&&(this.minX=e),this.maxX>n&&(this.maxX=n),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(e,n=e){return this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new fl(this.minX,this.minY,this.maxX,this.maxY)}scale(e,n=e){return this.minX*=e,this.minY*=n,this.maxX*=e,this.maxY*=n,this}get x(){return this.minX}set x(e){const n=this.maxX-this.minX;this.minX=e,this.maxX=e+n}get y(){return this.minY}set y(e){const n=this.maxY-this.minY;this.minY=e,this.maxY=e+n}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,n,i,s){let o=this.minX,a=this.minY,c=this.maxX,h=this.maxY;s||(s=this.matrix);const d=s.a,f=s.b,p=s.c,g=s.d,y=s.tx,b=s.ty;for(let w=n;w<i;w+=2){const x=e[w],S=e[w+1],_=d*x+p*S+y,O=f*x+g*S+b;o=_<o?_:o,a=O<a?O:a,c=_>c?_:c,h=O>h?O:h}this.minX=o,this.minY=a,this.maxX=c,this.maxY=h}containsPoint(e,n){return this.minX<=e&&this.minY<=n&&this.maxX>=e&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var _4e={grad:.9,turn:360,rad:360/(2*Math.PI)},Bl=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Rr=function(r,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*r)/n+0},Zo=function(r,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),r>n?n:r>e?r:e},qQ=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},BL=function(r){return{r:Zo(r.r,0,255),g:Zo(r.g,0,255),b:Zo(r.b,0,255),a:Zo(r.a)}},lk=function(r){return{r:Rr(r.r),g:Rr(r.g),b:Rr(r.b),a:Rr(r.a,3)}},S4e=/^#([0-9a-f]{3,8})$/i,gx=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},ZQ=function(r){var e=r.r,n=r.g,i=r.b,s=r.a,o=Math.max(e,n,i),a=o-Math.min(e,n,i),c=a?o===e?(n-i)/a:o===n?2+(i-e)/a:4+(e-n)/a:0;return{h:60*(c<0?c+6:c),s:o?a/o*100:0,v:o/255*100,a:s}},KQ=function(r){var e=r.h,n=r.s,i=r.v,s=r.a;e=e/360*6,n/=100,i/=100;var o=Math.floor(e),a=i*(1-n),c=i*(1-(e-o)*n),h=i*(1-(1-e+o)*n),d=o%6;return{r:255*[i,c,a,a,h,i][d],g:255*[h,i,i,c,a,a][d],b:255*[a,a,h,i,i,c][d],a:s}},UL=function(r){return{h:qQ(r.h),s:Zo(r.s,0,100),l:Zo(r.l,0,100),a:Zo(r.a)}},FL=function(r){return{h:Rr(r.h),s:Rr(r.s),l:Rr(r.l),a:Rr(r.a,3)}},zL=function(r){return KQ((n=(e=r).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},q0=function(r){return{h:(e=ZQ(r)).h,s:(s=(200-(n=e.s))*(i=e.v)/100)>0&&s<200?n*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,n,i,s},C4e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,k4e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,T4e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,M4e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oE={string:[[function(r){var e=S4e.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Rr(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Rr(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=T4e.exec(r)||M4e.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:BL({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=C4e.exec(r)||k4e.exec(r);if(!e)return null;var n,i,s=UL({h:(n=e[1],i=e[2],i===void 0&&(i="deg"),Number(n)*(_4e[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return zL(s)},"hsl"]],object:[[function(r){var e=r.r,n=r.g,i=r.b,s=r.a,o=s===void 0?1:s;return Bl(e)&&Bl(n)&&Bl(i)?BL({r:Number(e),g:Number(n),b:Number(i),a:Number(o)}):null},"rgb"],[function(r){var e=r.h,n=r.s,i=r.l,s=r.a,o=s===void 0?1:s;if(!Bl(e)||!Bl(n)||!Bl(i))return null;var a=UL({h:Number(e),s:Number(n),l:Number(i),a:Number(o)});return zL(a)},"hsl"],[function(r){var e=r.h,n=r.s,i=r.v,s=r.a,o=s===void 0?1:s;if(!Bl(e)||!Bl(n)||!Bl(i))return null;var a=function(c){return{h:qQ(c.h),s:Zo(c.s,0,100),v:Zo(c.v,0,100),a:Zo(c.a)}}({h:Number(e),s:Number(n),v:Number(i),a:Number(o)});return KQ(a)},"hsv"]]},XL=function(r,e){for(var n=0;n<e.length;n++){var i=e[n][0](r);if(i)return[i,e[n][1]]}return[null,void 0]},E4e=function(r){return typeof r=="string"?XL(r.trim(),oE.string):typeof r=="object"&&r!==null?XL(r,oE.object):[null,void 0]},ck=function(r,e){var n=q0(r);return{h:n.h,s:Zo(n.s+100*e,0,100),l:n.l,a:n.a}},hk=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},WL=function(r,e){var n=q0(r);return{h:n.h,s:n.s,l:Zo(n.l+100*e,0,100),a:n.a}},aE=function(){function r(e){this.parsed=E4e(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Rr(hk(this.rgba),2)},r.prototype.isDark=function(){return hk(this.rgba)<.5},r.prototype.isLight=function(){return hk(this.rgba)>=.5},r.prototype.toHex=function(){return e=lk(this.rgba),n=e.r,i=e.g,s=e.b,a=(o=e.a)<1?gx(Rr(255*o)):"","#"+gx(n)+gx(i)+gx(s)+a;var e,n,i,s,o,a},r.prototype.toRgb=function(){return lk(this.rgba)},r.prototype.toRgbString=function(){return e=lk(this.rgba),n=e.r,i=e.g,s=e.b,(o=e.a)<1?"rgba("+n+", "+i+", "+s+", "+o+")":"rgb("+n+", "+i+", "+s+")";var e,n,i,s,o},r.prototype.toHsl=function(){return FL(q0(this.rgba))},r.prototype.toHslString=function(){return e=FL(q0(this.rgba)),n=e.h,i=e.s,s=e.l,(o=e.a)<1?"hsla("+n+", "+i+"%, "+s+"%, "+o+")":"hsl("+n+", "+i+"%, "+s+"%)";var e,n,i,s,o},r.prototype.toHsv=function(){return e=ZQ(this.rgba),{h:Rr(e.h),s:Rr(e.s),v:Rr(e.v),a:Rr(e.a,3)};var e},r.prototype.invert=function(){return ja({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),ja(ck(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),ja(ck(this.rgba,-e))},r.prototype.grayscale=function(){return ja(ck(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),ja(WL(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),ja(WL(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?ja({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Rr(this.rgba.a,3);var n},r.prototype.hue=function(e){var n=q0(this.rgba);return typeof e=="number"?ja({h:e,s:n.s,l:n.l,a:n.a}):Rr(n.h)},r.prototype.isEqual=function(e){return this.toHex()===ja(e).toHex()},r}(),ja=function(r){return r instanceof aE?r:new aE(r)},QL=[],P4e=function(r){r.forEach(function(e){QL.indexOf(e)<0&&(e(aE,oE),QL.push(e))})};function A4e(r,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in n)i[n[s]]=s;var o={};r.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,h,d=i[this.toHex()];if(d)return d;if(a!=null&&a.closest){var f=this.toRgb(),p=1/0,g="black";if(!o.length)for(var y in n)o[y]=new r(n[y]).toRgb();for(var b in n){var w=(c=f,h=o[b],Math.pow(c.r-h.r,2)+Math.pow(c.g-h.g,2)+Math.pow(c.b-h.b,2));w<p&&(p=w,g=b)}return g}},e.string.push([function(a){var c=a.toLowerCase(),h=c==="transparent"?"#0000":n[c];return h?new r(h).toRgb():null},"name"])}P4e([A4e]);const Xp=class E0{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof E0)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,n){const i=typeof e;if(i!==typeof n)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===n;if(Array.isArray(e)&&Array.isArray(n)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(n))return e.length!==n.length?!1:e.every((o,a)=>o===n[a]);if(e!==null&&n!==null){const o=Object.keys(e),a=Object.keys(n);return o.length!==a.length?!1:o.every(c=>e[c]===n[c])}return e===n}toRgba(){const[e,n,i,s]=this._components;return{r:e,g:n,b:i,a:s}}toRgb(){const[e,n,i]=this._components;return{r:e,g:n,b:i}}toRgbaString(){const[e,n,i]=this.toUint8RgbArray();return`rgba(${e},${n},${i},${this.alpha})`}toUint8RgbArray(e){const[n,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(n*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[n,i,s,o]=this._components;return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[n,i,s]=this._components;return e[0]=n,e[1]=i,e[2]=s,e}toNumber(){return this._int}toBgrNumber(){const[e,n,i]=this.toUint8RgbArray();return(i<<16)+(n<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[n,i,s,o]=E0._temp.setValue(e)._components;return this._components[0]*=n,this._components[1]*=i,this._components[2]*=s,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(e,n=!0){return n&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,n=!0){if(e===1)return(255<<24)+this._int;if(e===0)return n?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,o=this._int&255;return n&&(i=i*e+.5|0,s=s*e+.5|0,o=o*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+o}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let n,i,s,o;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;n=(a>>16&255)/255,i=(a>>8&255)/255,s=(a&255)/255,o=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[n,i,s,o=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[n,i,s,o=255]=e,n/=255,i/=255,s/=255,o/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const c=E0.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}const a=ja(e);a.isValid()&&({r:n,g:i,b:s,a:o}=a.rgba,n/=255,i/=255,s/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=i,this._components[2]=s,this._components[3]=o,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,n,i]=this._components;this._int=(e*255<<16)+(n*255<<8)+(i*255|0)}_clamp(e,n=0,i=1){return typeof e=="number"?Math.min(Math.max(e,n),i):(e.forEach((s,o)=>{e[o]=Math.min(Math.max(s,n),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof E0||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Xp.shared=new Xp;Xp._temp=new Xp;Xp.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let cr=Xp;const R4e={cullArea:null,cullable:!1,cullableChildren:!0};class xA{constructor(e,n){this._pool=[],this._count=0,this._index=0,this._classType=e,n&&this.prepopulate(n)}prepopulate(e){for(let n=0;n<e;n++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var i;let n;return this._index>0?n=this._pool[--this._index]:n=new this._classType,(i=n.init)==null||i.call(n,e),n}return(e){var n;(n=e.reset)==null||n.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class I4e{constructor(){this._poolsByClass=new Map}prepopulate(e,n){this.getPool(e).prepopulate(n)}get(e,n){return this.getPool(e).get(n)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new xA(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(n=>{const i=e[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;e[i]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),e}}const nc=new I4e,D4e={get isCachedAsTexture(){var r;return!!((r=this.renderGroup)!=null&&r.isCachedAsTexture)},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){var r;(r=this.renderGroup)==null||r.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){$i("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function N4e(r,e,n){const i=r.length;let s;if(e>=i||n===0)return;n=e+n>i?i-e:n;const o=i-n;for(s=e;s<o;++s)r[s]=r[s+n];r.length=o}const $4e={allowChildren:!0,removeChildren(r=0,e){const n=e??this.children.length,i=n-r,s=[];if(i>0&&i<=n){for(let a=n-1;a>=r;a--){const c=this.children[a];c&&(s.push(c),c.parent=null)}N4e(this.children,r,n);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(s);for(let a=0;a<s.length;++a)this.emit("childRemoved",s[a],this,a),s[a].emit("removed",this);return s}else if(i===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const e=this.getChildAt(r);return this.removeChild(e)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,e)},getChildIndex(r){const e=this.children.indexOf(r);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(r,e){this.allowChildren||$i(Wi,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(e<0||e>n.length)throw new Error(`${r}addChildAt: The index ${e} supplied is out of bounds ${n.length}`);if(r.parent){const s=r.parent.children.indexOf(r);if(r.parent===this&&s===e)return r;s!==-1&&r.parent.children.splice(s,1)}e===n.length?n.push(r):n.splice(e,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,e),r.emit("added",this),r},swapChildren(r,e){if(r===e)return;const n=this.getChildIndex(r),i=this.getChildIndex(e);this.children[n]=e,this.children[i]=r;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var r;(r=this.parent)==null||r.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(e=>this.reparentChildAt(e,this.children.length)),r[0])},reparentChildAt(r,e){if(r.parent===this)return this.setChildIndex(r,e),r;const n=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,e);const i=this.worldTransform.clone();return i.invert(),n.prepend(i),r.setFromMatrix(n),r}};class HL{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class V4e{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const i=this._tests[n];if(i.test(e))return nc.get(i.maskClass,e)}return e}returnMaskEffect(e){nc.return(e)}}const lE=new V4e;Es.handleByList(Yt.MaskEffect,lE._effectClasses);const L4e={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((n,i)=>n.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const e=this.effects.indexOf(r);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const e=this._maskEffect;(e==null?void 0:e.mask)!==r&&(e&&(this.removeEffect(e),lE.returnMaskEffect(e),this._maskEffect=null),r!=null&&(this._maskEffect=lE.getMaskEffect(r),this.addEffect(this._maskEffect)))},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},get mask(){var r;return(r=this._maskEffect)==null?void 0:r.mask},set filters(r){var o;!Array.isArray(r)&&r&&(r=[r]);const e=this._filterEffect||(this._filterEffect=new HL);r=r;const n=(r==null?void 0:r.length)>0,i=((o=e.filters)==null?void 0:o.length)>0,s=n!==i;r=Array.isArray(r)?r.slice(0):r,e.filters=Object.freeze(r),s&&(n?this.addEffect(e):(this.removeEffect(e),e.filters=r??null))},get filters(){var r;return(r=this._filterEffect)==null?void 0:r.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new HL),this._filterEffect.filterArea=r},get filterArea(){var r;return(r=this._filterEffect)==null?void 0:r.filterArea}},B4e={label:null,get name(){return $i(Wi,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){$i(Wi,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,e=!1){return this.getChildByLabel(r,e)},getChildByLabel(r,e=!1){const n=this.children;for(let i=0;i<n.length;i++){const s=n[i];if(s.label===r||r instanceof RegExp&&r.test(s.label))return s}if(e)for(let i=0;i<n.length;i++){const o=n[i].getChildByLabel(r,!0);if(o)return o}return null},getChildrenByLabel(r,e=!1,n=[]){const i=this.children;for(let s=0;s<i.length;s++){const o=i[s];(o.label===r||r instanceof RegExp&&r.test(o.label))&&n.push(o)}if(e)for(let s=0;s<i.length;s++)i[s].getChildrenByLabel(r,!0,n);return n}},Ss=new xA(Gi),Wp=new xA(fl);function JQ(r,e,n){n.clear();let i,s;return r.parent?e?i=r.parent.worldTransform:(s=Ss.get().identity(),i=OA(r,s)):i=Gi.IDENTITY,eH(r,n,i,e),s&&Ss.return(s),n.isValid||n.set(0,0,0,0),n}function eH(r,e,n,i){var c,h;if(!r.visible||!r.measurable)return;let s;i?s=r.worldTransform:(r.updateLocalTransform(),s=Ss.get(),s.appendFrom(r.localTransform,n));const o=e,a=!!r.effects.length;if(a&&(e=Wp.get().clear()),r.boundsArea)e.addRect(r.boundsArea,s);else{r.bounds&&(e.matrix=s,e.addBounds(r.bounds));for(let d=0;d<r.children.length;d++)eH(r.children[d],e,s,i)}if(a){for(let d=0;d<r.effects.length;d++)(h=(c=r.effects[d]).addBounds)==null||h.call(c,e);o.addBounds(e,Gi.IDENTITY),Wp.return(e)}i||Ss.return(s)}function OA(r,e){const n=r.parent;return n&&(OA(n,e),n.updateLocalTransform(),e.append(n.localTransform)),e}function tH(r,e){if(r===16777215||!e)return e;if(e===16777215||!r)return r;const n=r>>16&255,i=r>>8&255,s=r&255,o=e>>16&255,a=e>>8&255,c=e&255,h=n*o/255|0,d=i*a/255|0,f=s*c/255|0;return(h<<16)+(d<<8)+f}const GL=16777215;function YL(r,e){return r===GL?e:e===GL?r:tH(r,e)}function tO(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const U4e={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,n=this.parent;for(;n;)e*=n.alpha,n=n.parent;return e},getGlobalTransform(r,e){if(e)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const n=OA(this,Ss.get().identity());return r.appendFrom(this.localTransform,n),Ss.return(n),r},getGlobalTint(r){if(r)return this.renderGroup?tO(this.renderGroup.worldColor):this.parentRenderGroup?tO(YL(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,n=this.parent;for(;n;)e=YL(e,n.localColor),n=n.parent;return tO(e)}};let uk=0;const jL=500;function hr(...r){uk!==jL&&(uk++,uk===jL?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}function iH(r,e,n){return e.clear(),n||(n=Gi.IDENTITY),nH(r,e,n,r,!0),e.isValid||e.set(0,0,0,0),e}function nH(r,e,n,i,s){var h,d;let o;if(s)o=Ss.get(),o=n.copyTo(o);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const f=r.localTransform;o=Ss.get(),o.appendFrom(f,n)}const a=e,c=!!r.effects.length;if(c&&(e=Wp.get().clear()),r.boundsArea)e.addRect(r.boundsArea,o);else{r.renderPipeId&&(e.matrix=o,e.addBounds(r.bounds));const f=r.children;for(let p=0;p<f.length;p++)nH(f[p],e,o,i,!1)}if(c){for(let f=0;f<r.effects.length;f++)(d=(h=r.effects[f]).addLocalBounds)==null||d.call(h,e,i);a.addBounds(e,Gi.IDENTITY),Wp.return(e)}Ss.return(o)}function rH(r,e){const n=r.children;for(let i=0;i<n.length;i++){const s=n[i],o=s.uid,a=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,c=e.index;(e.data[c]!==o||e.data[c+1]!==a)&&(e.data[e.index]=o,e.data[e.index+1]=a,e.didChange=!0),e.index=c+2,s.children.length&&rH(s,e)}return e.didChange}const F4e=new Gi,z4e={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,e){const n=Math.sign(this.scale.x)||1;e!==0?this.scale.x=r/e*n:this.scale.x=n},_setHeight(r,e){const n=Math.sign(this.scale.y)||1;e!==0?this.scale.y=r/e*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new fl});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),rH(this,r),r.didChange&&iH(this,r.localBounds,F4e),r.localBounds},getBounds(r,e){return JQ(this,r,e||new fl)}},X4e={_onRender:null,set onRender(r){const e=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},W4e={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Q4e))}};function Q4e(r,e){return r._zIndex-e._zIndex}const H4e={getGlobalPosition(r=new Kn,e=!1){return this.parent?this.parent.toGlobal(this._position,r,e):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,e,n=!1){const i=this.getGlobalTransform(Ss.get(),n);return e=i.apply(r,e),Ss.return(i),e},toLocal(r,e,n,i){e&&(r=e.toGlobal(r,n,i));const s=this.getGlobalTransform(Ss.get(),i);return n=s.applyInverse(r,n),Ss.return(s),n}};class sH{constructor(){this.uid=_r("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let G4e=0;class Y4e{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,n,i){const s=new xl({...this.textureOptions,width:e,height:n,resolution:1,antialias:i,autoGarbageCollect:!0});return new Vi({source:s,label:`texturePool_${G4e++}`})}getOptimalTexture(e,n,i=1,s){let o=Math.ceil(e*i-1e-6),a=Math.ceil(n*i-1e-6);o=hw(o),a=hw(a);const c=(o<<17)+(a<<1)+(s?1:0);this._texturePool[c]||(this._texturePool[c]=[]);let h=this._texturePool[c].pop();return h||(h=this.createTexture(o,a,s)),h.source._resolution=i,h.source.width=o/i,h.source.height=a/i,h.source.pixelWidth=o,h.source.pixelHeight=a,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=n,h.updateUvs(),this._poolKeyHash[h.uid]=c,h}getSameSizeTexture(e,n=!1){const i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,n)}returnTexture(e){const n=this._poolKeyHash[e.uid];this._texturePool[n].push(e)}clear(e){if(e=e!==!1,e)for(const n in this._texturePool){const i=this._texturePool[n];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this._texturePool={}}}const j4e=new Y4e;class q4e{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Gi,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new sH,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const n=e.children;for(let i=0;i<n.length;i++){const s=n[i];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(j4e.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const n=this.childrenToUpdate[e];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const n=this.renderGroupChildren.indexOf(e);n>-1&&this.renderGroupChildren.splice(n,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const n=e.children;for(let i=0;i<n.length;i++)this.addChild(n[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const n=e.children;for(let i=0;i<n.length;i++)this.removeChild(n[i])}removeChildren(e){for(let n=0;n<e.length;n++)this.removeChild(e[n])}onChildUpdate(e){let n=this.childrenToUpdate[e.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender()}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const n=this.root.children;for(let i=0;i<n.length;i++)this._getChildren(n[i],e);return e}_getChildren(e,n=[]){if(n.push(e),e.renderGroup)return n;const i=e.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Gi),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Gi),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Gi),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Z4e(r,e,n={}){for(const i in e)!n[i]&&e[i]!==void 0&&(r[i]=e[i])}const dk=new Oo(null),fk=new Oo(null),pk=new Oo(null,1,1),qL=1,K4e=2,mk=4;class Yr extends Na{constructor(e={}){var n,i;super(),this.uid=_r("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Gi,this.relativeGroupTransform=new Gi,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Oo(this,0,0),this._scale=pk,this._pivot=fk,this._skew=dk,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Z4e(this,e,{children:!0,parent:!0,effects:!0}),(n=e.children)==null||n.forEach(s=>this.addChild(s)),(i=e.parent)==null||i.addChild(this)}static mixin(e){Object.defineProperties(Yr.prototype,Object.getOwnPropertyDescriptors(e))}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||$i(Wi,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let s=0;s<e.length;s++)this.addChild(e[s]);return e[0]}const n=e[0],i=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),i&&(i.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,i&&i.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.removeChild(e[s]);return e[0]}const n=e[0],i=this.children.indexOf(n);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parent=null,this.emit("childRemoved",n,this,i),n.emit("removed",this)),n}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=nc.get(q4e,this),this.groupTransform=Gi.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),nc.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Gi),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*d4e}set angle(e){this.rotation=e*f4e}get pivot(){return this._pivot===fk&&(this._pivot=new Oo(this,0,0)),this._pivot}set pivot(e){this._pivot===fk&&(this._pivot=new Oo(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===dk&&(this._skew=new Oo(this,0,0)),this._skew}set skew(e){this._skew===dk&&(this._skew=new Oo(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===pk&&(this._scale=new Oo(this,1,1)),this._scale}set scale(e){this._scale===pk&&(this._scale=new Oo(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const n=this.getLocalBounds().width;this._setWidth(e,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const n=this.getLocalBounds().height;this._setHeight(e,n)}getSize(e){e||(e={});const n=this.getLocalBounds();return e.width=Math.abs(this.scale.x*n.width),e.height=Math.abs(this.scale.y*n.height),e}setSize(e,n){const i=this.getLocalBounds();typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,i.width),n!==void 0&&this._setHeight(n,i.height)}_updateSkew(){const e=this._rotation,n=this._skew;this._cx=Math.cos(e+n._y),this._sx=Math.sin(e+n._y),this._cy=-Math.sin(e-n._x),this._sy=Math.cos(e-n._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const n=this.localTransform,i=this._scale,s=this._pivot,o=this._position,a=i._x,c=i._y,h=s._x,d=s._y;n.a=this._cx*a,n.b=this._sx*a,n.c=this._cy*c,n.d=this._sy*c,n.tx=o._x-(h*n.a+d*n.c),n.ty=o._y-(h*n.b+d*n.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=qL,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const i=cr.shared.setValue(e??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=qL,this._onUpdate())}get tint(){return tO(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=K4e,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const n=e?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=mk,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const n=e?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=mk,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const n=e?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=mk,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var s;if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&n)for(let o=0;o<n.length;++o)n[o].destroy(e);(s=this.renderGroup)==null||s.destroy(),this.renderGroup=null}}Yr.mixin($4e);Yr.mixin(H4e);Yr.mixin(X4e);Yr.mixin(z4e);Yr.mixin(L4e);Yr.mixin(B4e);Yr.mixin(W4e);Yr.mixin(R4e);Yr.mixin(D4e);Yr.mixin(U4e);class wA extends Yr{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new fl(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const n=this.bounds,{x:i,y:s}=e;return i>=n.minX&&i<=n.maxX&&s>=n.minY&&s<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}}class Hy extends wA{constructor(e=Vi.EMPTY){e instanceof Vi&&(e={texture:e});const{texture:n=Vi.EMPTY,anchor:i,roundPixels:s,width:o,height:a,...c}=e;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Oo({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=s??!1,o!==void 0&&(this.width=o),a!==void 0&&(this.height=a)}static from(e,n=!1){return e instanceof Vi?new Hy(e):new Hy(Vi.from(e,n))}set texture(e){e||(e=Vi.EMPTY);const n=this._texture;n!==e&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return w4e(this._visualBounds,this._anchor,this._texture,0),this._visualBounds}get sourceBounds(){return $i("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,n=this._texture,i=this._bounds,{width:s,height:o}=n.orig;i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*o,i.maxY=i.minY+o}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,n){typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const J4e=new fl;function oH(r,e,n){const i=J4e;r.measurable=!0,JQ(r,n,i),e.addBoundsMask(i),r.measurable=!1}function aH(r,e,n){const i=Wp.get();r.measurable=!0;const s=Ss.get().identity(),o=lH(r,n,s);iH(r,i,o),r.measurable=!1,e.addBoundsMask(i),Ss.return(s),Wp.return(i)}function lH(r,e,n){return r?(r!==e&&(lH(r.parent,e,n),r.updateLocalTransform(),n.append(r.localTransform)),n):(hr("Mask bounds, renderable is not inside the root container"),n)}class cH{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Hy),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,n){this.inverse||oH(this.mask,e,n)}addLocalBounds(e,n){aH(this.mask,e,n)}containsPoint(e,n){const i=this.mask;return n(i,e)}destroy(){this.reset()}static test(e){return e instanceof Hy}}cH.extension=Yt.MaskEffect;class hH{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}hH.extension=Yt.MaskEffect;class uH{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,n){oH(this.mask,e,n)}addLocalBounds(e,n){aH(this.mask,e,n)}containsPoint(e,n){const i=this.mask;return n(i,e)}destroy(){this.reset()}static test(e){return e instanceof Yr}}uH.extension=Yt.MaskEffect;const e5e={createCanvas:(r,e)=>{const n=document.createElement("canvas");return n.width=r,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let ZL=e5e;const Qn={get(){return ZL},set(r){ZL=r}};class dH extends xl{constructor(e){e.resource||(e.resource=Qn.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,n=this.height,i=this._resolution){const s=super.resize(e,n,i);return s&&this.resizeCanvas(),s}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}dH.extension=Yt.TextureSource;class am extends xl{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const n=Qn.get().createCanvas(e.resource.width,e.resource.height);n.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=n,hr("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}am.extension=Yt.TextureSource;var cE=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(cE||{});class gk{constructor(e,n=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=n,this.priority=i,this._once=s}match(e,n=null){return this._fn===e&&this._context===n}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const fH=class yo{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new gk(null,null,1/0),this.deltaMS=1/yo.targetFPMS,this.elapsedMS=1/yo.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,i=cE.NORMAL){return this._addListener(new gk(e,n,i))}addOnce(e,n,i=cE.NORMAL){return this._addListener(new gk(e,n,i,!0))}_addListener(e){let n=this._head.next,i=this._head;if(!n)e.connect(i);else{for(;n;){if(e.priority>n.priority){e.connect(i);break}i=n,n=n.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,n){let i=this._head.next;for(;i;)i.match(e,n)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const o=e-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=e-o%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*yo.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,n)/1e3,yo.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!yo._shared){const e=yo._shared=new yo;e.autoStart=!0,e._protected=!0}return yo._shared}static get system(){if(!yo._system){const e=yo._system=new yo;e.autoStart=!0,e._protected=!0}return yo._system}};fH.targetFPMS=.06;let yx=fH,yk;async function pH(){return yk??(yk=(async()=>{var a;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const n=await new Promise(c=>{const h=document.createElement("video");h.onloadeddata=()=>c(h),h.onerror=()=>c(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!n)return"premultiply-alpha-on-upload";const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n);const o=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,o),e.deleteFramebuffer(s),e.deleteTexture(i),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),o[0]<=o[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),yk}const I_=class mH extends xl{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...mH.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=yx.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,n=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await pH(),this._load=new Promise((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(yx.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(yx.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(yx.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};I_.extension=Yt.TextureSource;I_.defaultOptions={...xl.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};I_.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let iO=I_;const Sa=(r,e,n=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(i=>typeof i=="string"||n?e(i):i):r);class t5e{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||hr(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const i=Sa(e);let s;for(let h=0;h<this.parsers.length;h++){const d=this.parsers[h];if(d.test(n)){s=d.getCacheableAssets(i,n);break}}const o=new Map(Object.entries(s||{}));s||i.forEach(h=>{o.set(h,n)});const a=[...o.keys()],c={cacheKeys:a,keys:i};i.forEach(h=>{this._cacheMap.set(h,c)}),a.forEach(h=>{const d=s?s[h]:n;this._cache.has(h)&&this._cache.get(h)!==d&&hr("[Cache] already has key:",h),this._cache.set(h,o.get(h))})}remove(e){if(!this._cacheMap.has(e)){hr(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(s=>{this._cache.delete(s)}),n.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const zn=new t5e,hE=[];Es.handleByList(Yt.TextureSource,hE);function gH(r={}){const e=r&&r.resource,n=e?r.resource:r,i=e?r:{resource:r};for(let s=0;s<hE.length;s++){const o=hE[s];if(o.test(n))return new o(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function i5e(r={},e=!1){const n=r&&r.resource,i=n?r.resource:r,s=n?r:{resource:r};if(!e&&zn.has(i))return zn.get(i);const o=new Vi({source:gH(s)});return o.on("destroy",()=>{zn.has(i)&&zn.remove(i)}),e||zn.set(i,o),o}function n5e(r,e=!1){return typeof r=="string"?zn.get(r):r instanceof xl?new Vi({source:r}):i5e(r,e)}Vi.from=n5e;xl.from=gH;Es.add(cH,hH,uH,iO,am,dH,bA);var jh=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(jh||{});function Oa(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function c0(r){return r.split("?")[0].split("#")[0]}function r5e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s5e(r,e,n){return r.replace(new RegExp(r5e(e),"g"),n)}function o5e(r,e){let n="",i=0,s=-1,o=0,a=-1;for(let c=0;c<=r.length;++c){if(c<r.length)a=r.charCodeAt(c);else{if(a===47)break;a=47}if(a===47){if(!(s===c-1||o===1))if(s!==c-1&&o===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const h=n.lastIndexOf("/");if(h!==n.length-1){h===-1?(n="",i=0):(n=n.slice(0,h),i=n.length-1-n.lastIndexOf("/")),s=c,o=0;continue}}else if(n.length===2||n.length===1){n="",i=0,s=c,o=0;continue}}}else n.length>0?n+=`/${r.slice(s+1,c)}`:n=r.slice(s+1,c),i=c-s-1;s=c,o=0}else a===46&&o!==-1?++o:o=-1}return n}const Po={toPosix(r){return s5e(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Oa(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const n=/^[^/:]+:\/{0,2}/.exec(r);return n?n[0]:""},toAbsolute(r,e,n){if(Oa(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=c0(this.toPosix(e??Qn.get().getBaseUrl())),s=c0(this.toPosix(n??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?Po.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(Oa(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const n=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const i=r.endsWith("/");return r=o5e(r),r.length>0&&i&&(r+="/"),n?`/${r}`:e+r},isAbsolute(r){return Oa(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let n=0;n<r.length;++n){const i=r[n];if(Oa(i),i.length>0)if(e===void 0)e=i;else{const s=r[n-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(Oa(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const n=e===47;let i=-1,s=!0;const o=this.getProtocol(r),a=r;r=r.slice(o.length);for(let c=r.length-1;c>=1;--c)if(e=r.charCodeAt(c),e===47){if(!s){i=c;break}}else s=!1;return i===-1?n?"/":this.isUrl(a)?o+r:o:n&&i===1?"//":o+r.slice(0,i)},rootname(r){Oa(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const n=r.indexOf("/",e.length);n!==-1?e=r.slice(0,n):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){Oa(r),e&&Oa(e),r=c0(this.toPosix(r));let n=0,i=-1,s=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let a=e.length-1,c=-1;for(o=r.length-1;o>=0;--o){const h=r.charCodeAt(o);if(h===47){if(!s){n=o+1;break}}else c===-1&&(s=!1,c=o+1),a>=0&&(h===e.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=c))}return n===i?i=c:i===-1&&(i=r.length),r.slice(n,i)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===47){if(!s){n=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":r.slice(n,i)},extname(r){Oa(r),r=c0(this.toPosix(r));let e=-1,n=0,i=-1,s=!0,o=0;for(let a=r.length-1;a>=0;--a){const c=r.charCodeAt(a);if(c===47){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),c===46?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===n+1?"":r.slice(e,i)},parse(r){Oa(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=c0(this.toPosix(r));let n=r.charCodeAt(0);const i=this.isAbsolute(r);let s;e.root=this.rootname(r),i||this.hasProtocol(r)?s=1:s=0;let o=-1,a=0,c=-1,h=!0,d=r.length-1,f=0;for(;d>=s;--d){if(n=r.charCodeAt(d),n===47){if(!h){a=d+1;break}continue}c===-1&&(h=!1,c=d+1),n===46?o===-1?o=d:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||c===-1||f===0||f===1&&o===c-1&&o===a+1?c!==-1&&(a===0&&i?e.base=e.name=r.slice(1,c):e.base=e.name=r.slice(a,c)):(a===0&&i?(e.name=r.slice(1,o),e.base=r.slice(1,c)):(e.name=r.slice(a,o),e.base=r.slice(a,c)),e.ext=r.slice(o,c)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function yH(r,e,n,i,s){const o=e[n];for(let a=0;a<o.length;a++){const c=o[a];n<e.length-1?yH(r.replace(i[n],c),e,n+1,i,s):s.push(r.replace(i[n],c))}}function a5e(r){const e=/\{(.*?)\}/g,n=r.match(e),i=[];if(n){const s=[];n.forEach(o=>{const a=o.substring(1,o.length-1).split(",");s.push(a)}),yH(r,s,0,n,i)}else i.push(r);return i}const uw=r=>!Array.isArray(r);class lm{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(n[i])}`).join("&")}}getAlias(e){const{alias:n,src:i}=e;return Sa(n||i,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??a):o!=null&&o.src?o.src:o,!0)}addManifest(e){this._manifest&&hr("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const i=[];let s=n;Array.isArray(n)||(s=Object.entries(n).map(([o,a])=>typeof a=="string"||Array.isArray(a)?{alias:o,src:a}:{alias:o,...a})),s.forEach(o=>{const a=o.src,c=o.alias;let h;if(typeof c=="string"){const d=this._createBundleAssetId(e,c);i.push(d),h=[c,d]}else{const d=c.map(f=>this._createBundleAssetId(e,f));i.push(...d),h=[...c,...d]}this.add({...o,alias:h,src:a})}),this._bundles[e]=i}add(e){const n=[];Array.isArray(e)?n.push(...e):n.push(e);let i;i=o=>{this.hasKey(o)&&hr(`[Resolver] already has key: ${o} overwriting`)},Sa(n).forEach(o=>{const{src:a}=o;let{data:c,format:h,loadParser:d}=o;const f=Sa(a).map(y=>typeof y=="string"?a5e(y):Array.isArray(y)?y:[y]),p=this.getAlias(o);Array.isArray(p)?p.forEach(i):i(p);const g=[];f.forEach(y=>{y.forEach(b=>{let w={};if(typeof b!="object"){w.src=b;for(let x=0;x<this._parsers.length;x++){const S=this._parsers[x];if(S.test(b)){w=S.parse(b);break}}}else c=b.data??c,h=b.format??h,d=b.loadParser??d,w={...w,...b};if(!p)throw new Error(`[Resolver] alias is undefined for this asset: ${w.src}`);w=this._buildResolvedAsset(w,{aliases:p,data:c,format:h,loadParser:d}),g.push(w)})}),p.forEach(y=>{this._assetMap[y]=g})})}resolveBundle(e){const n=uw(e);e=Sa(e);const i={};return e.forEach(s=>{const o=this._bundles[s];if(o){const a=this.resolve(o),c={};for(const h in a){const d=a[h];c[this._extractAssetIdFromBundle(s,h)]=d}i[s]=c}}),n?i[e[0]]:i}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const i={};for(const s in n)i[s]=n[s].src;return i}return n.src}resolve(e){const n=uw(e);e=Sa(e);const i={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let o=this._assetMap[s];const a=this._getPreferredOrder(o);a==null||a.priority.forEach(c=>{a.params[c].forEach(h=>{const d=o.filter(f=>f[c]?f[c]===h:!1);d.length&&(o=d)})}),this._resolverHash[s]=o[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),n?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const i=e[0],s=this._preferredOrder.find(o=>o.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}_buildResolvedAsset(e,n){const{aliases:i,data:s,loadParser:o,format:a}=n;return(this._basePath||this._rootPath)&&(e.src=Po.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=o??e.loadParser,e.format=a??e.format??l5e(e.src),e}}lm.RETINA_PREFIX=/@([0-9\.]+)x/;function l5e(r){return r.split(".").pop().split("?").shift().split("#").shift()}const uE=(r,e)=>{const n=e.split("?")[1];return n&&(r+=`?${n}`),r},vH=class P0{constructor(e,n){this.linkedSheets=[],this._texture=e instanceof Vi?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=n;const i=parseFloat(n.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=P0.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let n=e;const i=P0.BATCH_SIZE;for(;n-e<i&&n<this._frameKeys.length;){const s=this._frameKeys[n],o=this._frames[s],a=o.frame;if(a){let c=null,h=null;const d=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,f=new wr(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);o.rotated?c=new wr(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):c=new wr(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(h=new wr(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[s]=new Vi({source:this.textureSource,frame:c,orig:f,trim:h,rotate:o.rotated?2:0,defaultAnchor:o.anchor,defaultBorders:o.borders,label:s.toString()})}n++}}_processAnimations(){const e=this.data.animations||{};for(const n in e){this.animations[n]=[];for(let i=0;i<e[n].length;i++){const s=e[n][i];this.animations[n].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*P0.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*P0.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var n;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((n=this._texture)==null||n.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};vH.BATCH_SIZE=1e3;let KL=vH;const c5e=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function bH(r,e,n){const i={};if(r.forEach(s=>{i[s]=e}),Object.keys(e.textures).forEach(s=>{i[s]=e.textures[s]}),!n){const s=Po.dirname(r[0]);e.linkedSheets.forEach((o,a)=>{const c=bH([`${s}/${e.data.meta.related_multi_packs[a]}`],o,!0);Object.assign(i,c)})}return i}const h5e={extension:Yt.Asset,cache:{test:r=>r instanceof KL,getCacheableAssets:(r,e)=>bH(r,e,!1)},resolver:{extension:{type:Yt.ResolveParser,name:"resolveSpritesheet"},test:r=>{const n=r.split("?")[0].split("."),i=n.pop(),s=n.pop();return i==="json"&&c5e.includes(s)},parse:r=>{var n;const e=r.split(".");return{resolution:parseFloat(((n=lm.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:Yt.LoadParser,priority:jh.Normal,name:"spritesheetLoader"},async testParse(r,e){return Po.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,n){var d,f;const{texture:i,imageFilename:s}=(e==null?void 0:e.data)??{};let o=Po.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i instanceof Vi)a=i;else{const p=uE(o+(s??r.meta.image),e.src);a=(await n.load([p]))[p]}const c=new KL(a.source,r);await c.parse();const h=(d=r==null?void 0:r.meta)==null?void 0:d.related_multi_packs;if(Array.isArray(h)){const p=[];for(const y of h){if(typeof y!="string")continue;let b=o+y;(f=e.data)!=null&&f.ignoreMultiPack||(b=uE(b,e.src),p.push(n.load({src:b,data:{ignoreMultiPack:!0}})))}const g=await Promise.all(p);c.linkedSheets=g,g.forEach(y=>{y.linkedSheets=[c].concat(c.linkedSheets.filter(b=>b!==y))})}return c},async unload(r,e,n){await n.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};Es.add(h5e);const vk=Object.create(null),JL=Object.create(null);function _A(r,e){let n=JL[r];return n===void 0&&(vk[e]===void 0&&(vk[e]=1),JL[r]=n=vk[e]++),n}let Ef;function xH(){return(!Ef||Ef!=null&&Ef.isContextLost())&&(Ef=Qn.get().createCanvas().getContext("webgl",{})),Ef}let vx;function u5e(){if(!vx){vx="mediump";const r=xH();r&&r.getShaderPrecisionFormat&&(vx=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return vx}function d5e(r,e,n){return e?r:n?(r=r.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function f5e(r,e,n){const i=n?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let s=n?e.requestedFragmentPrecision:e.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${r}`}else if(i!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function p5e(r,e){return e?`#version 300 es
${r}`:r}const m5e={},g5e={};function y5e(r,{name:e="pixi-program"},n=!0){e=e.replace(/\s+/g,"-"),e+=n?"-fragment":"-vertex";const i=n?m5e:g5e;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${e}`}
${r}`}function v5e(r,e){return e?r.replace("#version 300 es",""):r}const bk={stripVersion:v5e,ensurePrecision:f5e,addProgramDefines:d5e,setProgramName:y5e,insertVersion:p5e},xk=Object.create(null),OH=class dE{constructor(e){e={...dE.defaultOptions,...e};const n=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:u5e()},setProgramName:{name:e.name},addProgramDefines:n,insertVersion:n};let s=e.fragment,o=e.vertex;Object.keys(bk).forEach(a=>{const c=i[a];s=bk[a](s,c,!0),o=bk[a](o,c,!1)}),this.fragment=s,this.vertex=o,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=_A(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const n=`${e.vertex}:${e.fragment}`;return xk[n]||(xk[n]=new dE(e)),xk[n]}};OH.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let wH=OH;const eB={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function b5e(r){return eB[r]??eB.float32}const x5e={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function O5e({source:r,entryPoint:e}){const n={},i=r.indexOf(`fn ${e}`);if(i!==-1){const s=r.indexOf("->",i);if(s!==-1){const o=r.substring(i,s),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let c;for(;(c=a.exec(o))!==null;){const h=x5e[c[3]]??"float32";n[c[2]]={location:parseInt(c[1],10),format:h,stride:b5e(h).stride,offset:0,instance:!1,start:0}}}}return n}function Ok(r){var p,g;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,h=/struct\s+(\w+)/,d=(p=r.match(e))==null?void 0:p.map(y=>({group:parseInt(y.match(n)[1],10),binding:parseInt(y.match(i)[1],10),name:y.match(s)[2],isUniform:y.match(s)[1]==="<uniform>",type:y.match(o)[1]}));if(!d)return{groups:[],structs:[]};const f=((g=r.match(a))==null?void 0:g.map(y=>{const b=y.match(h)[1],w=y.match(c).reduce((x,S)=>{const[_,O]=S.split(":");return x[_.trim()]=O.trim(),x},{});return w?{name:b,members:w}:null}).filter(({name:y})=>d.some(b=>b.type===y)))??[];return{groups:d,structs:f}}var A0=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(A0||{});function w5e({groups:r}){const e=[];for(let n=0;n<r.length;n++){const i=r[n];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:A0.VERTEX|A0.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:A0.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&e[i.group].push({binding:i.binding,visibility:A0.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function _5e({groups:r}){const e=[];for(let n=0;n<r.length;n++){const i=r[n];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function S5e(r,e){const n=new Set,i=new Set,s=[...r.structs,...e.structs].filter(a=>n.has(a.name)?!1:(n.add(a.name),!0)),o=[...r.groups,...e.groups].filter(a=>{const c=`${a.name}-${a.binding}`;return i.has(c)?!1:(i.add(c),!0)});return{structs:s,groups:o}}const wk=Object.create(null);class D_{constructor(e){var c,h;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:i,layout:s,gpuLayout:o,name:a}=e;if(this.name=a,this.fragment=n,this.vertex=i,n.source===i.source){const d=Ok(n.source);this.structsAndGroups=d}else{const d=Ok(i.source),f=Ok(n.source);this.structsAndGroups=S5e(d,f)}this.layout=s??_5e(this.structsAndGroups),this.gpuLayout=o??w5e(this.structsAndGroups),this.autoAssignGlobalUniforms=((c=this.layout[0])==null?void 0:c.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((h=this.layout[1])==null?void 0:h.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:n}=this,i=e.source+n.source+e.entryPoint+n.entryPoint;this._layoutKey=_A(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=O5e(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){const n=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return wk[n]||(wk[n]=new D_(e)),wk[n]}}const _H=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],C5e=_H.reduce((r,e)=>(r[e]=!0,r),{});function k5e(r,e){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const SH=class CH{constructor(e,n){this._touched=0,this.uid=_r("uniform"),this._resourceType="uniformGroup",this._resourceId=_r("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...CH.defaultOptions,...n},this.uniformStructures=e;const i={};for(const s in e){const o=e[s];if(o.name=s,o.size=o.size??1,!C5e[o.type])throw new Error(`Uniform type ${o.type} is not supported. Supported uniform types are: ${_H.join(", ")}`);o.value??(o.value=k5e(o.type,o.size)),i[s]=o.value}this.uniforms=i,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=_A(Object.keys(i).map(s=>`${s}-${e[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};SH.defaultOptions={ubo:!1,isStatic:!1};let kH=SH;class nO{constructor(e){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const i in e){const s=e[i];this.setResource(s,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let n=0;for(const i in this.resources)e[n++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,n){var s,o;const i=this.resources[n];e!==i&&(i&&((s=e.off)==null||s.call(e,"change",this.onResourceChange,this)),(o=e.on)==null||o.call(e,"change",this.onResourceChange,this),this.resources[n]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const n=this.resources;for(const i in n)n[i]._touched=e}destroy(){var n;const e=this.resources;for(const i in e){const s=e[i];(n=s.off)==null||n.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const n=this.resources;for(const i in n)n[i]===e&&(n[i]=null)}else this._updateKey()}}var fE=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(fE||{});class N_ extends Na{constructor(e){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:n,glProgram:i,groups:s,resources:o,compatibleRenderers:a,groupMap:c}=e;this.gpuProgram=n,this.glProgram=i,a===void 0&&(a=0,n&&(a|=fE.WEBGPU),i&&(a|=fE.WEBGL)),this.compatibleRenderers=a;const h={};if(!o&&!s&&(o={}),o&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&s&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&s&&c)for(const d in c)for(const f in c[d]){const p=c[d][f];h[p]={group:d,binding:f,name:p}}else if(n&&s&&!c){const d=n.structsAndGroups.groups;c={},d.forEach(f=>{c[f.group]=c[f.group]||{},c[f.group][f.binding]=f.name,h[f.name]=f})}else if(o){s={},c={},n&&n.structsAndGroups.groups.forEach(p=>{c[p.group]=c[p.group]||{},c[p.group][p.binding]=p.name,h[p.name]=p});let d=0;for(const f in o)h[f]||(s[99]||(s[99]=new nO,this._ownedBindGroups.push(s[99])),h[f]={group:99,binding:d,name:f},c[99]=c[99]||{},c[99][d]=f,d++);for(const f in o){const p=f;let g=o[f];!g.source&&!g._resourceType&&(g=new kH(g));const y=h[p];y&&(s[y.group]||(s[y.group]=new nO,this._ownedBindGroups.push(s[y.group])),s[y.group].setResource(g,y.binding))}}this.groups=s,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(s,h)}addResource(e,n,i){var s,o;(s=this._uniformBindMap)[n]||(s[n]={}),(o=this._uniformBindMap[n])[i]||(o[i]=e),this.groups[n]||(this.groups[n]=new nO,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(e,n){const i={};for(const s in n){const o=n[s];Object.defineProperty(i,o.name,{get(){return e[o.group].getResource(o.binding)},set(a){e[o.group].setResource(a,o.binding)}})}return i}destroy(e=!1){var n,i;this.emit("destroy",this),e&&((n=this.gpuProgram)==null||n.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:n,gl:i,...s}=e;let o,a;return n&&(o=D_.from(n)),i&&(a=wH.from(i)),new N_({gpuProgram:o,glProgram:a,...s})}}const T5e={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},_k=0,Sk=1,Ck=2,kk=3,Tk=4,Mk=5,pE=class TH{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<_k)}set blend(e){!!(this.data&1<<_k)!==e&&(this.data^=1<<_k)}get offsets(){return!!(this.data&1<<Sk)}set offsets(e){!!(this.data&1<<Sk)!==e&&(this.data^=1<<Sk)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Ck)}set culling(e){!!(this.data&1<<Ck)!==e&&(this.data^=1<<Ck)}get depthTest(){return!!(this.data&1<<kk)}set depthTest(e){!!(this.data&1<<kk)!==e&&(this.data^=1<<kk)}get depthMask(){return!!(this.data&1<<Mk)}set depthMask(e){!!(this.data&1<<Mk)!==e&&(this.data^=1<<Mk)}get clockwiseFrontFace(){return!!(this.data&1<<Tk)}set clockwiseFrontFace(e){!!(this.data&1<<Tk)!==e&&(this.data^=1<<Tk)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=T5e[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new TH;return e.depthTest=!1,e.blend=!0,e}};pE.default2d=pE.for2d();let M5e=pE;const mE=[];Es.handleByNamedList(Yt.Environment,mE);async function E5e(r){if(!r)for(let e=0;e<mE.length;e++){const n=mE[e];if(n.value.test()){await n.value.load();return}}}let h0;function P5e(){if(typeof h0=="boolean")return h0;try{h0=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{h0=!1}return h0}var SA={exports:{}};SA.exports=$_;SA.exports.default=$_;function $_(r,e,n){n=n||2;var i=e&&e.length,s=i?e[0]*n:r.length,o=MH(r,0,s,n,!0),a=[];if(!o||o.next===o.prev)return a;var c,h,d,f,p,g,y;if(i&&(o=N5e(r,e,o,n)),r.length>80*n){c=d=r[0],h=f=r[1];for(var b=n;b<s;b+=n)p=r[b],g=r[b+1],p<c&&(c=p),g<h&&(h=g),p>d&&(d=p),g>f&&(f=g);y=Math.max(d-c,f-h),y=y!==0?32767/y:0}return Gy(o,a,n,c,h,y,0),a}function MH(r,e,n,i,s){var o,a;if(s===vE(r,e,n,i)>0)for(o=e;o<n;o+=i)a=tB(o,r[o],r[o+1],a);else for(o=n-i;o>=e;o-=i)a=tB(o,r[o],r[o+1],a);return a&&V_(a,a.next)&&(jy(a),a=a.next),a}function _d(r,e){if(!r)return r;e||(e=r);var n=r,i;do if(i=!1,!n.steiner&&(V_(n,n.next)||Vn(n.prev,n,n.next)===0)){if(jy(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Gy(r,e,n,i,s,o,a){if(r){!a&&o&&U5e(r,i,s,o);for(var c=r,h,d;r.prev!==r.next;){if(h=r.prev,d=r.next,o?R5e(r,i,s,o):A5e(r)){e.push(h.i/n|0),e.push(r.i/n|0),e.push(d.i/n|0),jy(r),r=d.next,c=d.next;continue}if(r=d,r===c){a?a===1?(r=I5e(_d(r),e,n),Gy(r,e,n,i,s,o,2)):a===2&&D5e(r,e,n,i,s,o):Gy(_d(r),e,n,i,s,o,1);break}}}}function A5e(r){var e=r.prev,n=r,i=r.next;if(Vn(e,n,i)>=0)return!1;for(var s=e.x,o=n.x,a=i.x,c=e.y,h=n.y,d=i.y,f=s<o?s<a?s:a:o<a?o:a,p=c<h?c<d?c:d:h<d?h:d,g=s>o?s>a?s:a:o>a?o:a,y=c>h?c>d?c:d:h>d?h:d,b=i.next;b!==e;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=y&&Wf(s,c,o,h,a,d,b.x,b.y)&&Vn(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function R5e(r,e,n,i){var s=r.prev,o=r,a=r.next;if(Vn(s,o,a)>=0)return!1;for(var c=s.x,h=o.x,d=a.x,f=s.y,p=o.y,g=a.y,y=c<h?c<d?c:d:h<d?h:d,b=f<p?f<g?f:g:p<g?p:g,w=c>h?c>d?c:d:h>d?h:d,x=f>p?f>g?f:g:p>g?p:g,S=gE(y,b,e,n,i),_=gE(w,x,e,n,i),O=r.prevZ,T=r.nextZ;O&&O.z>=S&&T&&T.z<=_;){if(O.x>=y&&O.x<=w&&O.y>=b&&O.y<=x&&O!==s&&O!==a&&Wf(c,f,h,p,d,g,O.x,O.y)&&Vn(O.prev,O,O.next)>=0||(O=O.prevZ,T.x>=y&&T.x<=w&&T.y>=b&&T.y<=x&&T!==s&&T!==a&&Wf(c,f,h,p,d,g,T.x,T.y)&&Vn(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;O&&O.z>=S;){if(O.x>=y&&O.x<=w&&O.y>=b&&O.y<=x&&O!==s&&O!==a&&Wf(c,f,h,p,d,g,O.x,O.y)&&Vn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;T&&T.z<=_;){if(T.x>=y&&T.x<=w&&T.y>=b&&T.y<=x&&T!==s&&T!==a&&Wf(c,f,h,p,d,g,T.x,T.y)&&Vn(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function I5e(r,e,n){var i=r;do{var s=i.prev,o=i.next.next;!V_(s,o)&&EH(s,i,i.next,o)&&Yy(s,o)&&Yy(o,s)&&(e.push(s.i/n|0),e.push(i.i/n|0),e.push(o.i/n|0),jy(i),jy(i.next),i=r=o),i=i.next}while(i!==r);return _d(i)}function D5e(r,e,n,i,s,o){var a=r;do{for(var c=a.next.next;c!==a.prev;){if(a.i!==c.i&&X5e(a,c)){var h=PH(a,c);a=_d(a,a.next),h=_d(h,h.next),Gy(a,e,n,i,s,o,0),Gy(h,e,n,i,s,o,0);return}c=c.next}a=a.next}while(a!==r)}function N5e(r,e,n,i){var s=[],o,a,c,h,d;for(o=0,a=e.length;o<a;o++)c=e[o]*i,h=o<a-1?e[o+1]*i:r.length,d=MH(r,c,h,i,!1),d===d.next&&(d.steiner=!0),s.push(z5e(d));for(s.sort($5e),o=0;o<s.length;o++)n=V5e(s[o],n);return n}function $5e(r,e){return r.x-e.x}function V5e(r,e){var n=L5e(r,e);if(!n)return e;var i=PH(n,r);return _d(i,i.next),_d(n,n.next)}function L5e(r,e){var n=e,i=r.x,s=r.y,o=-1/0,a;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var c=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(c<=i&&c>o&&(o=c,a=n.x<n.next.x?n:n.next,c===i))return a}n=n.next}while(n!==e);if(!a)return null;var h=a,d=a.x,f=a.y,p=1/0,g;n=a;do i>=n.x&&n.x>=d&&i!==n.x&&Wf(s<f?i:o,s,d,f,s<f?o:i,s,n.x,n.y)&&(g=Math.abs(s-n.y)/(i-n.x),Yy(n,r)&&(g<p||g===p&&(n.x>a.x||n.x===a.x&&B5e(a,n)))&&(a=n,p=g)),n=n.next;while(n!==h);return a}function B5e(r,e){return Vn(r.prev,r,e.prev)<0&&Vn(e.next,r,r.next)<0}function U5e(r,e,n,i){var s=r;do s.z===0&&(s.z=gE(s.x,s.y,e,n,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,F5e(s)}function F5e(r){var e,n,i,s,o,a,c,h,d=1;do{for(n=r,r=null,o=null,a=0;n;){for(a++,i=n,c=0,e=0;e<d&&(c++,i=i.nextZ,!!i);e++);for(h=d;c>0||h>0&&i;)c!==0&&(h===0||!i||n.z<=i.z)?(s=n,n=n.nextZ,c--):(s=i,i=i.nextZ,h--),o?o.nextZ=s:r=s,s.prevZ=o,o=s;n=i}o.nextZ=null,d*=2}while(a>1);return r}function gE(r,e,n,i,s){return r=(r-n)*s|0,e=(e-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function z5e(r){var e=r,n=r;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==r);return n}function Wf(r,e,n,i,s,o,a,c){return(s-a)*(e-c)>=(r-a)*(o-c)&&(r-a)*(i-c)>=(n-a)*(e-c)&&(n-a)*(o-c)>=(s-a)*(i-c)}function X5e(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!W5e(r,e)&&(Yy(r,e)&&Yy(e,r)&&Q5e(r,e)&&(Vn(r.prev,r,e.prev)||Vn(r,e.prev,e))||V_(r,e)&&Vn(r.prev,r,r.next)>0&&Vn(e.prev,e,e.next)>0)}function Vn(r,e,n){return(e.y-r.y)*(n.x-e.x)-(e.x-r.x)*(n.y-e.y)}function V_(r,e){return r.x===e.x&&r.y===e.y}function EH(r,e,n,i){var s=xx(Vn(r,e,n)),o=xx(Vn(r,e,i)),a=xx(Vn(n,i,r)),c=xx(Vn(n,i,e));return!!(s!==o&&a!==c||s===0&&bx(r,n,e)||o===0&&bx(r,i,e)||a===0&&bx(n,r,i)||c===0&&bx(n,e,i))}function bx(r,e,n){return e.x<=Math.max(r.x,n.x)&&e.x>=Math.min(r.x,n.x)&&e.y<=Math.max(r.y,n.y)&&e.y>=Math.min(r.y,n.y)}function xx(r){return r>0?1:r<0?-1:0}function W5e(r,e){var n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==e.i&&n.next.i!==e.i&&EH(n,n.next,r,e))return!0;n=n.next}while(n!==r);return!1}function Yy(r,e){return Vn(r.prev,r,r.next)<0?Vn(r,e,r.next)>=0&&Vn(r,r.prev,e)>=0:Vn(r,e,r.prev)<0||Vn(r,r.next,e)<0}function Q5e(r,e){var n=r,i=!1,s=(r.x+e.x)/2,o=(r.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&s<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==r);return i}function PH(r,e){var n=new yE(r.i,r.x,r.y),i=new yE(e.i,e.x,e.y),s=r.next,o=e.prev;return r.next=e,e.prev=r,n.next=s,s.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function tB(r,e,n,i){var s=new yE(r,e,n);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function jy(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function yE(r,e,n){this.i=r,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}$_.deviation=function(r,e,n,i){var s=e&&e.length,o=s?e[0]*n:r.length,a=Math.abs(vE(r,0,o,n));if(s)for(var c=0,h=e.length;c<h;c++){var d=e[c]*n,f=c<h-1?e[c+1]*n:r.length;a-=Math.abs(vE(r,d,f,n))}var p=0;for(c=0;c<i.length;c+=3){var g=i[c]*n,y=i[c+1]*n,b=i[c+2]*n;p+=Math.abs((r[g]-r[b])*(r[y+1]-r[g+1])-(r[g]-r[y])*(r[b+1]-r[g+1]))}return a===0&&p===0?0:Math.abs((p-a)/a)};function vE(r,e,n,i){for(var s=0,o=e,a=n-i;o<n;o+=i)s+=(r[a]-r[o])*(r[o+1]+r[a+1]),a=o;return s}$_.flatten=function(r){for(var e=r[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,s=0;s<r.length;s++){for(var o=0;o<r[s].length;o++)for(var a=0;a<e;a++)n.vertices.push(r[s][o][a]);s>0&&(i+=r[s-1].length,n.holes.push(i))}return n};var H5e=SA.exports;const G5e=nm(H5e);var AH=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(AH||{});class Y5e{constructor(e){this.items=[],this._name=e}emit(e,n,i,s,o,a,c,h){const{name:d,items:f}=this;for(let p=0,g=f.length;p<g;p++)f[p][d](e,n,i,s,o,a,c,h);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&this.items.splice(n,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const j5e=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],RH=class IH extends Na{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const n=[...j5e,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(e={}){const n=e.skipExtensionImports===!0?!0:e.manageImports===!1;await E5e(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)e={...this._systemsHash[i].constructor.defaultOptions,...e};e={...IH.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(e);this._initOptions=e}render(e,n){let i=e;if(i instanceof Yr&&(i={container:i},n&&($i(Wi,"passing a second argument is deprecated, please use render options instead"),i.target=n.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor=this.background.colorRgba),i.clearColor){const s=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=s?i.clearColor:cr.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(e,n,i){const s=this.view.resolution;this.view.resize(e,n,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==s&&this.runners.resolutionChange.emit(i)}clear(e={}){const n=this;e.target||(e.target=n.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=AH.ALL);const{clear:i,clearColor:s,target:o}=e;cr.shared.setValue(s??this.background.colorRgba),n.renderTarget.clear(o,i,cr.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(n=>{this.runners[n]=new Y5e(n)})}_addSystems(e){let n;for(n in e){const i=e[n];this._addSystem(i.value,i.name)}}_addSystem(e,n){const i=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=i,this._systemsHash[n]=i;for(const s in this.runners)this.runners[s].add(i);return this}_addPipes(e,n){const i=n.reduce((s,o)=>(s[o.name]=o.value,s),{});e.forEach(s=>{const o=s.value,a=s.name,c=i[a];this.renderPipes[a]=new o(this,c?new c:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!P5e())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};RH.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let DH=RH,Ox;function q5e(r){return Ox!==void 0||(Ox=(()=>{var n;const e={stencil:!0,failIfMajorPerformanceCaveat:r??DH.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Qn.get().getWebGLRenderingContext())return!1;let s=Qn.get().createCanvas().getContext("webgl",e);const o=!!((n=s==null?void 0:s.getContextAttributes())!=null&&n.stencil);if(s){const a=s.getExtension("WEBGL_lose_context");a&&a.loseContext()}return s=null,o}catch{return!1}})()),Ox}let wx;async function Z5e(r={}){return wx!==void 0||(wx=await(async()=>{const e=Qn.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),wx}const iB=["webgl","webgpu","canvas"];async function K5e(r){let e=[];r.preference?(e.push(r.preference),iB.forEach(o=>{o!==r.preference&&e.push(o)})):e=iB.slice();let n,i={};for(let o=0;o<e.length;o++){const a=e[o];if(a==="webgpu"&&await Z5e()){const{WebGPURenderer:c}=await cw(()=>import("./WebGPURenderer-CKF2vikp.js"),__vite__mapDeps([3,2,4]));n=c,i={...r,...r.webgpu};break}else if(a==="webgl"&&q5e(r.failIfMajorPerformanceCaveat??DH.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:c}=await cw(()=>import("./WebGLRenderer-53iyQi_6.js"),__vite__mapDeps([5,2,4]));n=c,i={...r,...r.webgl};break}else if(a==="canvas")throw i={...r},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!n)throw new Error("No available renderer for the current environment");const s=new n;return await s.init(i),s}const NH="8.6.6";class $H{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,NH)}static destroy(){}}$H.extension=Yt.Application;class J5e{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,NH)}destroy(){this._renderer=null}}J5e.extension={type:[Yt.WebGLSystem,Yt.WebGPUSystem],name:"initHook",priority:-10};const VH=class bE{constructor(...e){this.stage=new Yr,e[0]!==void 0&&$i(Wi,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await K5e(e),bE._plugins.forEach(n=>{n.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return $i(Wi,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,n=!1){const i=bE._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null}};VH._plugins=[];let LH=VH;Es.handleByList(Yt.Application,LH._plugins);Es.add($H);class BH extends Na{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return $i(Wi,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return $i(Wi,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return $i(Wi,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return $i(Wi,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return $i(Wi,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var n;this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)(n=this.chars[i].texture)==null||n.destroy();this.chars=null,e&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}const UH=class xE{constructor(e,n,i,s){this.uid=_r("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=e,this.y0=n,this.x1=i,this.y1=s}addColorStop(e,n){return this.gradientStops.push({offset:e,color:cr.shared.setValue(n).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;const e=xE.defaultTextureSize,{gradientStops:n}=this,i=Qn.get().createCanvas();i.width=e,i.height=e;const s=i.getContext("2d"),o=s.createLinearGradient(0,0,xE.defaultTextureSize,1);for(let w=0;w<n.length;w++){const x=n[w];o.addColorStop(x.offset,x.color)}s.fillStyle=o,s.fillRect(0,0,e,e),this.texture=new Vi({source:new am({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:a,y0:c,x1:h,y1:d}=this,f=new Gi,p=h-a,g=d-c,y=Math.sqrt(p*p+g*g),b=Math.atan2(g,p);f.translate(-a,-c),f.scale(1/e,1/e),f.rotate(-b),f.scale(256/y,1),this.transform=f,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const e=this.gradientStops.map(s=>`${s.offset}-${s.color}`).join("-"),n=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${e}-${n}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};UH.defaultTextureSize=256;let qy=UH;const nB={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class L_{constructor(e,n){this.uid=_r("fillPattern"),this.transform=new Gi,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),n&&(e.source.style.addressModeU=nB[n].addressModeU,e.source.style.addressModeV=nB[n].addressModeV)}setTransform(e){const n=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var eRe=iRe,Ek={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},tRe=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function iRe(r){var e=[];return r.replace(tRe,function(n,i,s){var o=i.toLowerCase();for(s=rRe(s),o=="m"&&s.length>2&&(e.push([i].concat(s.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(s.length==Ek[o])return s.unshift(i),e.push(s);if(s.length<Ek[o])throw new Error("malformed path data");e.push([i].concat(s.splice(0,Ek[o])))}}),e}var nRe=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function rRe(r){var e=r.match(nRe);return e?e.map(Number):[]}const sRe=nm(eRe);function oRe(r,e){const n=sRe(r),i=[];let s=null,o=0,a=0;for(let c=0;c<n.length;c++){const h=n[c],d=h[0],f=h;switch(d){case"M":o=f[1],a=f[2],e.moveTo(o,a);break;case"m":o+=f[1],a+=f[2],e.moveTo(o,a);break;case"H":o=f[1],e.lineTo(o,a);break;case"h":o+=f[1],e.lineTo(o,a);break;case"V":a=f[1],e.lineTo(o,a);break;case"v":a+=f[1],e.lineTo(o,a);break;case"L":o=f[1],a=f[2],e.lineTo(o,a);break;case"l":o+=f[1],a+=f[2],e.lineTo(o,a);break;case"C":o=f[5],a=f[6],e.bezierCurveTo(f[1],f[2],f[3],f[4],o,a);break;case"c":e.bezierCurveTo(o+f[1],a+f[2],o+f[3],a+f[4],o+f[5],a+f[6]),o+=f[5],a+=f[6];break;case"S":o=f[3],a=f[4],e.bezierCurveToShort(f[1],f[2],o,a);break;case"s":e.bezierCurveToShort(o+f[1],a+f[2],o+f[3],a+f[4]),o+=f[3],a+=f[4];break;case"Q":o=f[3],a=f[4],e.quadraticCurveTo(f[1],f[2],o,a);break;case"q":e.quadraticCurveTo(o+f[1],a+f[2],o+f[3],a+f[4]),o+=f[3],a+=f[4];break;case"T":o=f[1],a=f[2],e.quadraticCurveToShort(o,a);break;case"t":o+=f[1],a+=f[2],e.quadraticCurveToShort(o,a);break;case"A":o=f[6],a=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],o,a);break;case"a":o+=f[6],a+=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],o,a);break;case"Z":case"z":e.closePath(),i.length>0&&(s=i.pop(),s?(o=s.startX,a=s.startY):(o=0,a=0)),s=null;break;default:hr(`Unknown SVG path command: ${d}`)}d!=="Z"&&d!=="z"&&s===null&&(s={startX:o,startY:a},i.push(s))}return e}class B_{constructor(e=0,n=0,i=0){this.type="circle",this.x=e,this.y=n,this.radius=i}clone(){return new B_(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-e,o=this.y-n;return s*=s,o*=o,s+o<=i}strokeContains(e,n,i,s=.5){if(this.radius===0)return!1;const o=this.x-e,a=this.y-n,c=this.radius,h=(1-s)*i,d=Math.sqrt(o*o+a*a);return d<=c+h&&d>c-(i-h)}getBounds(e){return e||(e=new wr),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class CA{constructor(e=0,n=0,i=0,s=0){this.type="ellipse",this.x=e,this.y=n,this.halfWidth=i,this.halfHeight=s}clone(){return new CA(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,s=(n-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(e,n,i,s=.5){const{halfWidth:o,halfHeight:a}=this;if(o<=0||a<=0)return!1;const c=i*(1-s),h=i-c,d=o-h,f=a-h,p=o+c,g=a+c,y=e-this.x,b=n-this.y,w=y*y/(d*d)+b*b/(f*f),x=y*y/(p*p)+b*b/(g*g);return w>1&&x<=1}getBounds(e){return e||(e=new wr),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function aRe(r,e,n,i,s,o){const a=r-n,c=e-i,h=s-n,d=o-i,f=a*h+c*d,p=h*h+d*d;let g=-1;p!==0&&(g=f/p);let y,b;g<0?(y=n,b=i):g>1?(y=s,b=o):(y=n+g*h,b=i+g*d);const w=r-y,x=e-b;return w*w+x*x}class Z0{constructor(...e){this.type="polygon";let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const i=[];for(let s=0,o=n.length;s<o;s++)i.push(n[s].x,n[s].y);n=i}this.points=n,this.closePath=!0}clone(){const e=this.points.slice(),n=new Z0(e);return n.closePath=this.closePath,n}contains(e,n){let i=!1;const s=this.points.length/2;for(let o=0,a=s-1;o<s;a=o++){const c=this.points[o*2],h=this.points[o*2+1],d=this.points[a*2],f=this.points[a*2+1];h>n!=f>n&&e<(d-c)*((n-h)/(f-h))+c&&(i=!i)}return i}strokeContains(e,n,i,s=.5){const o=i*i,a=o*(1-s),c=o-a,{points:h}=this,d=h.length-(this.closePath?0:2);for(let f=0;f<d;f+=2){const p=h[f],g=h[f+1],y=h[(f+2)%h.length],b=h[(f+3)%h.length],w=aRe(e,n,p,g,y,b),x=Math.sign((y-p)*(n-g)-(b-g)*(e-p));if(w<=(x<0?c:a))return!0}return!1}getBounds(e){e||(e=new wr);const n=this.points;let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let c=0,h=n.length;c<h;c+=2){const d=n[c],f=n[c+1];i=d<i?d:i,s=d>s?d:s,o=f<o?f:o,a=f>a?f:a}return e.x=i,e.width=s-i,e.y=o,e.height=a-o,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const _x=(r,e,n,i,s,o,a)=>{const c=r-n,h=e-i,d=Math.sqrt(c*c+h*h);return d>=s-o&&d<=s+a};class kA{constructor(e=0,n=0,i=0,s=0,o=20){this.type="roundedRectangle",this.x=e,this.y=n,this.width=i,this.height=s,this.radius=o}getBounds(e){return e||(e=new wr),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new kA(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+i&&n<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let s=e-(this.x+i),o=n-(this.y+i);const a=i*i;if(s*s+o*o<=a||(s=e-(this.x+this.width-i),s*s+o*o<=a)||(o=n-(this.y+this.height-i),s*s+o*o<=a)||(s=e-(this.x+i),s*s+o*o<=a))return!0}return!1}strokeContains(e,n,i,s=.5){const{x:o,y:a,width:c,height:h,radius:d}=this,f=i*(1-s),p=i-f,g=o+d,y=a+d,b=c-d*2,w=h-d*2,x=o+c,S=a+h;return(e>=o-f&&e<=o+p||e>=x-p&&e<=x+f)&&n>=y&&n<=y+w||(n>=a-f&&n<=a+p||n>=S-p&&n<=S+f)&&e>=g&&e<=g+b?!0:e<g&&n<y&&_x(e,n,g,y,d,p,f)||e>x-d&&n<y&&_x(e,n,x-d,y,d,p,f)||e>x-d&&n>S-d&&_x(e,n,x-d,S-d,d,p,f)||e<g&&n>S-d&&_x(e,n,g,S-d,d,p,f)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const lRe=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function cRe(r){let e="";for(let n=0;n<r;++n)n>0&&(e+=`
else `),n<r-1&&(e+=`if(test == ${n}.0){}`);return e}function hRe(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const i=lRe.replace(/%forloop%/gi,cRe(r));if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))r=r/2|0;else break}}finally{e.deleteShader(n)}return r}let Pf=null;function FH(){var e;if(Pf)return Pf;const r=xH();return Pf=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Pf=hRe(Pf,r),(e=r.getExtension("WEBGL_lose_context"))==null||e.loseContext(),Pf}const zH={};function uRe(r,e){let n=2166136261;for(let i=0;i<e;i++)n^=r[i].uid,n=Math.imul(n,16777619),n>>>=0;return zH[n]||dRe(r,e,n)}let Pk=0;function dRe(r,e,n){const i={};let s=0;Pk||(Pk=FH());for(let a=0;a<Pk;a++){const c=a<e?r[a]:Vi.EMPTY.source;i[s++]=c.source,i[s++]=c.style}const o=new nO(i);return zH[n]=o,o}class rB{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function sB(r,e){const n=r.byteLength/8|0,i=new Float64Array(r,0,n);new Float64Array(e,0,n).set(i);const o=r.byteLength-n*8;if(o>0){const a=new Uint8Array(r,n*8,o);new Uint8Array(e,n*8,o).set(a)}}const fRe={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var pRe=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(pRe||{});function oB(r,e){return e.alphaMode==="no-premultiply-alpha"&&fRe[r]||r}class mRe{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const n=this.textures[e];this.textures[e]=null,this.ids[n.uid]=null}this.count=0}}class gRe{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new mRe,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const XH=[];let OE=0;function aB(){return OE>0?XH[--OE]:new gRe}function lB(r){XH[OE++]=r}let u0=0;const WH=class rO{constructor(e={}){this.uid=_r("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],rO.defaultOptions.maxTextures=rO.defaultOptions.maxTextures??FH(),e={...rO.defaultOptions,...e};const{maxTextures:n,attributesInitialSize:i,indicesInitialSize:s}=e;this.attributeBuffer=new rB(i*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)lB(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,n){const i=e._batch.textures.ids[n._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=n,!0)}updateElement(e){this.dirty=!0;const n=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,n.float32View,n.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,n.float32View,n.uint32View,e._attributeStart,e._textureId)}break(e){const n=this._elements;if(!n[this.elementStart])return;let i=aB(),s=i.textures;s.clear();const o=n[this.elementStart];let a=oB(o.blendMode,o.texture._source),c=o.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const h=this.attributeBuffer.float32View,d=this.attributeBuffer.uint32View,f=this.indexBuffer;let p=this._batchIndexSize,g=this._batchIndexStart,y="startBatch";const b=this.maxTextures;for(let w=this.elementStart;w<this.elementSize;++w){const x=n[w];n[w]=null;const _=x.texture._source,O=oB(x.blendMode,_),T=a!==O||c!==x.topology;if(_._batchTick===u0&&!T){x._textureId=_._textureBindLocation,p+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,h,d,x._attributeStart,x._textureId),this.packQuadIndex(f,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,h,d,x._attributeStart,x._textureId),this.packIndex(x,f,x._indexStart,x._attributeStart/this.vertexSize)),x._batch=i;continue}_._batchTick=u0,(s.count>=b||T)&&(this._finishBatch(i,g,p-g,s,a,c,e,y),y="renderBatch",g=p,a=O,c=x.topology,i=aB(),s=i.textures,s.clear(),++u0),x._textureId=_._textureBindLocation=s.count,s.ids[_.uid]=s.count,s.textures[s.count++]=_,x._batch=i,p+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,h,d,x._attributeStart,x._textureId),this.packQuadIndex(f,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,h,d,x._attributeStart,x._textureId),this.packIndex(x,f,x._indexStart,x._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,g,p-g,s,a,c,e,y),g=p,++u0),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=p}_finishBatch(e,n,i,s,o,a,c,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=h,e.batcher=this,e.textures=s,e.blendMode=o,e.topology=a,e.start=n,e.size=i,++u0,this.batches[this.batchIndex++]=e,c.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const n=Math.max(e,this.attributeBuffer.size*2),i=new rB(n);sB(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){const n=this.indexBuffer;let i=Math.max(e,n.length*1.5);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let o=0;o<n.length;o++)s[o]=n[o];else sB(n.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(e,n,i){e[n]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3}packIndex(e,n,i,s){const o=e.indices,a=e.indexSize,c=e.indexOffset,h=e.attributeOffset;for(let d=0;d<a;d++)n[i++]=s+o[d+c]-h}destroy(){for(let e=0;e<this.batches.length;e++)lB(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};WH.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let yRe=WH;var sr=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(sr||{});class Sh extends Na{constructor(e){let{data:n,size:i}=e;const{usage:s,label:o,shrinkToFit:a}=e;super(),this.uid=_r("buffer"),this._resourceType="buffer",this._resourceId=_r("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,i??(i=n==null?void 0:n.byteLength);const c=!!n;this.descriptor={size:i,usage:s,mappedAtCreation:c,label:o},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&sr.STATIC)}set static(e){e?this.descriptor.usage|=sr.STATIC:this.descriptor.usage&=~sr.STATIC}setDataWithSize(e,n,i){if(this._updateID++,this._updateSize=n*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}const s=this._data;if(this._data=e,this._dataInt32=null,!s||s.length!==e.length){!this.shrinkToFit&&s&&e.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=_r("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function QH(r,e){if(!(r instanceof Sh)){let n=e?sr.INDEX:sr.VERTEX;r instanceof Array&&(e?(r=new Uint32Array(r),n=sr.INDEX|sr.COPY_DST):(r=new Float32Array(r),n=sr.VERTEX|sr.COPY_DST)),r=new Sh({data:r,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return r}function vRe(r,e,n){const i=r.getAttribute(e);if(!i)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const s=i.buffer.data;let o=1/0,a=1/0,c=-1/0,h=-1/0;const d=s.BYTES_PER_ELEMENT,f=(i.offset||0)/d,p=(i.stride||2*4)/d;for(let g=f;g<s.length;g+=p){const y=s[g],b=s[g+1];y>c&&(c=y),b>h&&(h=b),y<o&&(o=y),b<a&&(a=b)}return n.minX=o,n.minY=a,n.maxX=c,n.maxY=h,n}function bRe(r){return(r instanceof Sh||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=QH(r.buffer,!1),r}class U_ extends Na{constructor(e={}){super(),this.uid=_r("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new fl,this._boundsDirty=!0;const{attributes:n,indexBuffer:i,topology:s}=e;if(this.buffers=[],this.attributes={},n)for(const o in n)this.addAttribute(o,n[o]);this.instanceCount=e.instanceCount??1,i&&this.addIndex(i),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const n=this.attributes[e];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(e,n){const i=bRe(n);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=QH(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,vRe(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(n=>n.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const xRe=new Float32Array(1),ORe=new Uint32Array(1);class wRe extends U_{constructor(){const n=new Sh({data:xRe,label:"attribute-batch-buffer",usage:sr.VERTEX|sr.COPY_DST,shrinkToFit:!1}),i=new Sh({data:ORe,label:"index-batch-buffer",usage:sr.INDEX|sr.COPY_DST,shrinkToFit:!1}),s=6*4;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:s,offset:0},aUV:{buffer:n,format:"float32x2",stride:s,offset:2*4},aColor:{buffer:n,format:"unorm8x4",stride:s,offset:4*4},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:s,offset:5*4}},indexBuffer:i})}}function cB(r,e,n){if(r)for(const i in r){const s=i.toLocaleLowerCase(),o=e[s];if(o){let a=r[i];i==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&o.push(`//----${n}----//`),o.push(a)}else hr(`${i} placement hook does not exist in shader`)}}const _Re=/\{\{(.*?)\}\}/g;function hB(r){var i;const e={};return(((i=r.match(_Re))==null?void 0:i.map(s=>s.replace(/[{()}]/g,"")))??[]).forEach(s=>{e[s]=[]}),e}function uB(r,e){let n;const i=/@in\s+([^;]+);/g;for(;(n=i.exec(r))!==null;)e.push(n[1])}function dB(r,e,n=!1){const i=[];uB(e,i),r.forEach(c=>{c.header&&uB(c.header,i)});const s=i;n&&s.sort();const o=s.map((c,h)=>`       @location(${h}) ${c},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${o}
`),a}function fB(r,e){let n;const i=/@out\s+([^;]+);/g;for(;(n=i.exec(r))!==null;)e.push(n[1])}function SRe(r){const n=/\b(\w+)\s*:/g.exec(r);return n?n[1]:""}function CRe(r){const e=/@.*?\s+/g;return r.replace(e,"")}function kRe(r,e){const n=[];fB(e,n),r.forEach(h=>{h.header&&fB(h.header,n)});let i=0;const s=n.sort().map(h=>h.indexOf("builtin")>-1?h:`@location(${i++}) ${h}`).join(`,
`),o=n.sort().map(h=>`       var ${CRe(h)};`).join(`
`),a=`return VSOutput(
            ${n.sort().map(h=>` ${SRe(h)}`).join(`,
`)});`;let c=e.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${s}
`),c=c.replace("{{start}}",`
${o}
`),c=c.replace("{{return}}",`
${a}
`),c}function pB(r,e){let n=r;for(const i in e){const s=e[i];s.join(`
`).length?n=n.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):n=n.replace(`{{${i}}}`,"")}return n}const vh=Object.create(null),Ak=new Map;let TRe=0;function MRe({template:r,bits:e}){const n=HH(r,e);if(vh[n])return vh[n];const{vertex:i,fragment:s}=PRe(r,e);return vh[n]=GH(i,s,e),vh[n]}function ERe({template:r,bits:e}){const n=HH(r,e);return vh[n]||(vh[n]=GH(r.vertex,r.fragment,e)),vh[n]}function PRe(r,e){const n=e.map(a=>a.vertex).filter(a=>!!a),i=e.map(a=>a.fragment).filter(a=>!!a);let s=dB(n,r.vertex,!0);s=kRe(n,s);const o=dB(i,r.fragment,!0);return{vertex:s,fragment:o}}function HH(r,e){return e.map(n=>(Ak.has(n)||Ak.set(n,TRe++),Ak.get(n))).sort((n,i)=>n-i).join("-")+r.vertex+r.fragment}function GH(r,e,n){const i=hB(r),s=hB(e);return n.forEach(o=>{cB(o.vertex,i,o.name),cB(o.fragment,s,o.name)}),{vertex:pB(r,i),fragment:pB(e,s)}}const ARe=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,RRe=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,IRe=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,DRe=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,NRe={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},$Re={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function VRe({bits:r,name:e}){const n=MRe({template:{fragment:RRe,vertex:ARe},bits:[NRe,...r]});return D_.from({name:e,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function LRe({bits:r,name:e}){return new wH({name:e,...ERe({template:{vertex:IRe,fragment:DRe},bits:[$Re,...r]})})}const BRe={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},URe={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Rk={};function FRe(r){const e=[];if(r===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let i=0;i<r;i++)e.push(`@group(1) @binding(${n++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${n++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function zRe(r){const e=[];if(r===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let n=0;n<r;n++)n===r-1?e.push("  default:{"):e.push(`  case ${n}:{`),e.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function XRe(r){return Rk[r]||(Rk[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${FRe(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${zRe(r)}
            `}}),Rk[r]}const Ik={};function WRe(r){const e=[];for(let n=0;n<r;n++)n>0&&e.push("else"),n<r-1&&e.push(`if(vTextureId < ${n}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${n}], vUV);`),e.push("}");return e.join(`
`)}function QRe(r){return Ik[r]||(Ik[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${WRe(r)}
            `}}),Ik[r]}const HRe={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},GRe={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},mB={};function YRe(r){let e=mB[r];if(e)return e;const n=new Int32Array(r);for(let i=0;i<r;i++)n[i]=i;return e=mB[r]=new kH({uTextures:{value:n,type:"i32",size:r}},{isStatic:!0}),e}class jRe extends N_{constructor(e){const n=LRe({name:"batch",bits:[URe,QRe(e),GRe]}),i=VRe({name:"batch",bits:[BRe,XRe(e),HRe]});super({glProgram:n,gpuProgram:i,resources:{batchSamplers:YRe(e)}})}}let gB=null;const YH=class jH extends yRe{constructor(){super(...arguments),this.geometry=new wRe,this.shader=gB||(gB=new jRe(this.maxTextures)),this.name=jH.extension.name,this.vertexSize=6}packAttributes(e,n,i,s,o){const a=o<<16|e.roundPixels&65535,c=e.transform,h=c.a,d=c.b,f=c.c,p=c.d,g=c.tx,y=c.ty,{positions:b,uvs:w}=e,x=e.color,S=e.attributeOffset,_=S+e.attributeSize;for(let O=S;O<_;O++){const T=O*2,E=b[T],P=b[T+1];n[s++]=h*E+f*P+g,n[s++]=p*P+d*E+y,n[s++]=w[T],n[s++]=w[T+1],i[s++]=x,i[s++]=a}}packQuadAttributes(e,n,i,s,o){const a=e.texture,c=e.transform,h=c.a,d=c.b,f=c.c,p=c.d,g=c.tx,y=c.ty,b=e.bounds,w=b.maxX,x=b.minX,S=b.maxY,_=b.minY,O=a.uvs,T=e.color,E=o<<16|e.roundPixels&65535;n[s+0]=h*x+f*_+g,n[s+1]=p*_+d*x+y,n[s+2]=O.x0,n[s+3]=O.y0,i[s+4]=T,i[s+5]=E,n[s+6]=h*w+f*_+g,n[s+7]=p*_+d*w+y,n[s+8]=O.x1,n[s+9]=O.y1,i[s+10]=T,i[s+11]=E,n[s+12]=h*w+f*S+g,n[s+13]=p*S+d*w+y,n[s+14]=O.x2,n[s+15]=O.y2,i[s+16]=T,i[s+17]=E,n[s+18]=h*x+f*S+g,n[s+19]=p*S+d*x+y,n[s+20]=O.x3,n[s+21]=O.y3,i[s+22]=T,i[s+23]=E}};YH.extension={type:[Yt.Batcher],name:"default"};let qRe=YH;function ZRe(r,e,n,i,s,o,a,c=null){let h=0;n*=e,s*=o;const d=c.a,f=c.b,p=c.c,g=c.d,y=c.tx,b=c.ty;for(;h<a;){const w=r[n],x=r[n+1];i[s]=d*w+p*x+y,i[s+1]=f*w+g*x+b,s+=o,n+=e,h++}}function KRe(r,e,n,i){let s=0;for(e*=n;s<i;)r[e]=0,r[e+1]=0,e+=n,s++}function qH(r,e,n,i,s){const o=e.a,a=e.b,c=e.c,h=e.d,d=e.tx,f=e.ty;n||(n=0),i||(i=2),s||(s=r.length/i-n);let p=n*i;for(let g=0;g<s;g++){const y=r[p],b=r[p+1];r[p]=o*y+c*b+d,r[p+1]=a*y+h*b+f,p+=i}}const JRe=new Gi;class ZH{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,n=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?tH(n,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||JRe}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Zy={extension:{type:Yt.ShapeBuilder,name:"circle"},build(r,e){let n,i,s,o,a,c;if(r.type==="circle"){const T=r;n=T.x,i=T.y,a=c=T.radius,s=o=0}else if(r.type==="ellipse"){const T=r;n=T.x,i=T.y,a=T.halfWidth,c=T.halfHeight,s=o=0}else{const T=r,E=T.width/2,P=T.height/2;n=T.x+E,i=T.y+P,a=c=Math.max(0,Math.min(T.radius,Math.min(E,P))),s=E-a,o=P-c}if(!(a>=0&&c>=0&&s>=0&&o>=0))return e;const h=Math.ceil(2.3*Math.sqrt(a+c)),d=h*8+(s?4:0)+(o?4:0);if(d===0)return e;if(h===0)return e[0]=e[6]=n+s,e[1]=e[3]=i+o,e[2]=e[4]=n-s,e[5]=e[7]=i-o,e;let f=0,p=h*4+(s?2:0)+2,g=p,y=d,b=s+a,w=o,x=n+b,S=n-b,_=i+w;if(e[f++]=x,e[f++]=_,e[--p]=_,e[--p]=S,o){const T=i-w;e[g++]=S,e[g++]=T,e[--y]=T,e[--y]=x}for(let T=1;T<h;T++){const E=Math.PI/2*(T/h),P=s+Math.cos(E)*a,I=o+Math.sin(E)*c,A=n+P,D=n-P,M=i+I,$=i-I;e[f++]=A,e[f++]=M,e[--p]=M,e[--p]=D,e[g++]=D,e[g++]=$,e[--y]=$,e[--y]=A}b=s,w=o+c,x=n+b,S=n-b,_=i+w;const O=i-w;return e[f++]=x,e[f++]=_,e[--y]=O,e[--y]=x,s&&(e[f++]=S,e[f++]=_,e[--y]=O,e[--y]=S),e},triangulate(r,e,n,i,s,o){if(r.length===0)return;let a=0,c=0;for(let f=0;f<r.length;f+=2)a+=r[f],c+=r[f+1];a/=r.length/2,c/=r.length/2;let h=i;e[h*n]=a,e[h*n+1]=c;const d=h++;for(let f=0;f<r.length;f+=2)e[h*n]=r[f],e[h*n+1]=r[f+1],f>0&&(s[o++]=h,s[o++]=d,s[o++]=h-1),h++;s[o++]=d+1,s[o++]=d,s[o++]=h-1}},eIe={...Zy,extension:{...Zy.extension,name:"ellipse"}},tIe={...Zy,extension:{...Zy.extension,name:"roundedRectangle"}},KH=1e-4,yB=1e-4;function iIe(r){const e=r.length;if(e<6)return 1;let n=0;for(let i=0,s=r[e-2],o=r[e-1];i<e;i+=2){const a=r[i],c=r[i+1];n+=(a-s)*(c+o),s=a,o=c}return n<0?-1:1}function vB(r,e,n,i,s,o,a,c){const h=r-n*s,d=e-i*s,f=r+n*o,p=e+i*o;let g,y;a?(g=i,y=-n):(g=-i,y=n);const b=h+g,w=d+y,x=f+g,S=p+y;return c.push(b,w),c.push(x,S),2}function Eu(r,e,n,i,s,o,a,c){const h=n-r,d=i-e;let f=Math.atan2(h,d),p=Math.atan2(s-r,o-e);c&&f<p?f+=Math.PI*2:!c&&f>p&&(p+=Math.PI*2);let g=f;const y=p-f,b=Math.abs(y),w=Math.sqrt(h*h+d*d),x=(15*b*Math.sqrt(w)/Math.PI>>0)+1,S=y/x;if(g+=S,c){a.push(r,e),a.push(n,i);for(let _=1,O=g;_<x;_++,O+=S)a.push(r,e),a.push(r+Math.sin(O)*w,e+Math.cos(O)*w);a.push(r,e),a.push(s,o)}else{a.push(n,i),a.push(r,e);for(let _=1,O=g;_<x;_++,O+=S)a.push(r+Math.sin(O)*w,e+Math.cos(O)*w),a.push(r,e);a.push(s,o),a.push(r,e)}return x*2}function nIe(r,e,n,i,s,o){const a=KH;if(r.length===0)return;const c=e;let h=c.alignment;if(e.alignment!==.5){let ie=iIe(r);h=(h-.5)*ie+.5}const d=new Kn(r[0],r[1]),f=new Kn(r[r.length-2],r[r.length-1]),p=i,g=Math.abs(d.x-f.x)<a&&Math.abs(d.y-f.y)<a;if(p){r=r.slice(),g&&(r.pop(),r.pop(),f.set(r[r.length-2],r[r.length-1]));const ie=(d.x+f.x)*.5,he=(f.y+d.y)*.5;r.unshift(ie,he),r.push(ie,he)}const y=s,b=r.length/2;let w=r.length;const x=y.length/2,S=c.width/2,_=S*S,O=c.miterLimit*c.miterLimit;let T=r[0],E=r[1],P=r[2],I=r[3],A=0,D=0,M=-(E-I),$=T-P,L=0,N=0,V=Math.sqrt(M*M+$*$);M/=V,$/=V,M*=S,$*=S;const U=h,F=(1-U)*2,H=U*2;p||(c.cap==="round"?w+=Eu(T-M*(F-H)*.5,E-$*(F-H)*.5,T-M*F,E-$*F,T+M*H,E+$*H,y,!0)+2:c.cap==="square"&&(w+=vB(T,E,M,$,F,H,!0,y))),y.push(T-M*F,E-$*F),y.push(T+M*H,E+$*H);for(let ie=1;ie<b-1;++ie){T=r[(ie-1)*2],E=r[(ie-1)*2+1],P=r[ie*2],I=r[ie*2+1],A=r[(ie+1)*2],D=r[(ie+1)*2+1],M=-(E-I),$=T-P,V=Math.sqrt(M*M+$*$),M/=V,$/=V,M*=S,$*=S,L=-(I-D),N=P-A,V=Math.sqrt(L*L+N*N),L/=V,N/=V,L*=S,N*=S;const he=P-T,me=E-I,Pe=P-A,_e=D-I,ue=he*Pe+me*_e,Se=me*Pe-_e*he,ke=Se<0;if(Math.abs(Se)<.001*Math.abs(ue)){y.push(P-M*F,I-$*F),y.push(P+M*H,I+$*H),ue>=0&&(c.join==="round"?w+=Eu(P,I,P-M*F,I-$*F,P-L*F,I-N*F,y,!1)+4:w+=2,y.push(P-L*H,I-N*H),y.push(P+L*F,I+N*F));continue}const J=(-M+T)*(-$+I)-(-M+P)*(-$+E),q=(-L+A)*(-N+I)-(-L+P)*(-N+D),z=(he*q-Pe*J)/Se,X=(_e*J-me*q)/Se,te=(z-P)*(z-P)+(X-I)*(X-I),se=P+(z-P)*F,Q=I+(X-I)*F,Z=P-(z-P)*H,le=I-(X-I)*H,pe=Math.min(he*he+me*me,Pe*Pe+_e*_e),be=ke?F:H,Ee=pe+be*be*_;te<=Ee?c.join==="bevel"||te/_>O?(ke?(y.push(se,Q),y.push(P+M*H,I+$*H),y.push(se,Q),y.push(P+L*H,I+N*H)):(y.push(P-M*F,I-$*F),y.push(Z,le),y.push(P-L*F,I-N*F),y.push(Z,le)),w+=2):c.join==="round"?ke?(y.push(se,Q),y.push(P+M*H,I+$*H),w+=Eu(P,I,P+M*H,I+$*H,P+L*H,I+N*H,y,!0)+4,y.push(se,Q),y.push(P+L*H,I+N*H)):(y.push(P-M*F,I-$*F),y.push(Z,le),w+=Eu(P,I,P-M*F,I-$*F,P-L*F,I-N*F,y,!1)+4,y.push(P-L*F,I-N*F),y.push(Z,le)):(y.push(se,Q),y.push(Z,le)):(y.push(P-M*F,I-$*F),y.push(P+M*H,I+$*H),c.join==="round"?ke?w+=Eu(P,I,P+M*H,I+$*H,P+L*H,I+N*H,y,!0)+2:w+=Eu(P,I,P-M*F,I-$*F,P-L*F,I-N*F,y,!1)+2:c.join==="miter"&&te/_<=O&&(ke?(y.push(Z,le),y.push(Z,le)):(y.push(se,Q),y.push(se,Q)),w+=2),y.push(P-L*F,I-N*F),y.push(P+L*H,I+N*H),w+=2)}T=r[(b-2)*2],E=r[(b-2)*2+1],P=r[(b-1)*2],I=r[(b-1)*2+1],M=-(E-I),$=T-P,V=Math.sqrt(M*M+$*$),M/=V,$/=V,M*=S,$*=S,y.push(P-M*F,I-$*F),y.push(P+M*H,I+$*H),p||(c.cap==="round"?w+=Eu(P-M*(F-H)*.5,I-$*(F-H)*.5,P-M*F,I-$*F,P+M*H,I+$*H,y,!1)+2:c.cap==="square"&&(w+=vB(P,I,M,$,F,H,!1,y)));const K=yB*yB;for(let ie=x;ie<w+x-2;++ie)T=y[ie*2],E=y[ie*2+1],P=y[(ie+1)*2],I=y[(ie+1)*2+1],A=y[(ie+2)*2],D=y[(ie+2)*2+1],!(Math.abs(T*(I-D)+P*(D-E)+A*(E-I))<K)&&o.push(ie,ie+1,ie+2)}function rIe(r,e,n,i){const s=KH;if(r.length===0)return;const o=r[0],a=r[1],c=r[r.length-2],h=r[r.length-1],d=e||Math.abs(o-c)<s&&Math.abs(a-h)<s,f=n,p=r.length/2,g=f.length/2;for(let y=0;y<p;y++)f.push(r[y*2]),f.push(r[y*2+1]);for(let y=0;y<p-1;y++)i.push(g+y,g+y+1);d&&i.push(g+p-1,g)}function JH(r,e,n,i,s,o,a){const c=G5e(r,e,2);if(!c)return;for(let d=0;d<c.length;d+=3)o[a++]=c[d]+s,o[a++]=c[d+1]+s,o[a++]=c[d+2]+s;let h=s*i;for(let d=0;d<r.length;d+=2)n[h]=r[d],n[h+1]=r[d+1],h+=i}const sIe=[],oIe={extension:{type:Yt.ShapeBuilder,name:"polygon"},build(r,e){for(let n=0;n<r.points.length;n++)e[n]=r.points[n];return e},triangulate(r,e,n,i,s,o){JH(r,sIe,e,n,i,s,o)}},aIe={extension:{type:Yt.ShapeBuilder,name:"rectangle"},build(r,e){const n=r,i=n.x,s=n.y,o=n.width,a=n.height;return o>=0&&a>=0&&(e[0]=i,e[1]=s,e[2]=i+o,e[3]=s,e[4]=i+o,e[5]=s+a,e[6]=i,e[7]=s+a),e},triangulate(r,e,n,i,s,o){let a=0;i*=n,e[i+a]=r[0],e[i+a+1]=r[1],a+=n,e[i+a]=r[2],e[i+a+1]=r[3],a+=n,e[i+a]=r[6],e[i+a+1]=r[7],a+=n,e[i+a]=r[4],e[i+a+1]=r[5],a+=n;const c=i/n;s[o++]=c,s[o++]=c+1,s[o++]=c+2,s[o++]=c+1,s[o++]=c+3,s[o++]=c+2}},lIe={extension:{type:Yt.ShapeBuilder,name:"triangle"},build(r,e){return e[0]=r.x,e[1]=r.y,e[2]=r.x2,e[3]=r.y2,e[4]=r.x3,e[5]=r.y3,e},triangulate(r,e,n,i,s,o){let a=0;i*=n,e[i+a]=r[0],e[i+a+1]=r[1],a+=n,e[i+a]=r[2],e[i+a+1]=r[3],a+=n,e[i+a]=r[4],e[i+a+1]=r[5];const c=i/n;s[o++]=c,s[o++]=c+1,s[o++]=c+2}},F_={};Es.handleByMap(Yt.ShapeBuilder,F_);Es.add(aIe,oIe,lIe,Zy,eIe,tIe);const cIe=new wr;function hIe(r,e){const{geometryData:n,batches:i}=e;i.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let s=0;s<r.instructions.length;s++){const o=r.instructions[s];if(o.action==="texture")uIe(o.data,i,n);else if(o.action==="fill"||o.action==="stroke"){const a=o.action==="stroke",c=o.data.path.shapePath,h=o.data.style,d=o.data.hole;a&&d&&bB(d.shapePath,h,null,!0,i,n),bB(c,h,d,a,i,n)}}}function uIe(r,e,n){const{vertices:i,uvs:s,indices:o}=n,a=o.length,c=i.length/2,h=[],d=F_.rectangle,f=cIe,p=r.image;f.x=r.dx,f.y=r.dy,f.width=r.dw,f.height=r.dh;const g=r.transform;d.build(f,h),g&&qH(h,g),d.triangulate(h,i,2,c,o,a);const y=p.uvs;s.push(y.x0,y.y0,y.x1,y.y1,y.x3,y.y3,y.x2,y.y2);const b=nc.get(ZH);b.indexOffset=a,b.indexSize=o.length-a,b.attributeOffset=c,b.attributeSize=i.length/2-c,b.baseColor=r.style,b.alpha=r.alpha,b.texture=p,b.geometryData=n,e.push(b)}function bB(r,e,n,i,s,o){const{vertices:a,uvs:c,indices:h}=o,d=r.shapePrimitives.length-1;r.shapePrimitives.forEach(({shape:f,transform:p},g)=>{const y=h.length,b=a.length/2,w=[],x=F_[f.type];let S="triangle-list";if(x.build(f,w),p&&qH(w,p),i){const E=f.closePath??!0,P=e;P.pixelLine?(rIe(w,E,a,h),S="line-list"):nIe(w,P,!1,E,a,h)}else if(n&&d===g){d!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const E=[],P=w.slice();dIe(n.shapePath).forEach(A=>{E.push(P.length/2),P.push(...A)}),JH(P,E,a,2,b,h,y)}else x.triangulate(w,a,2,b,h,y);const _=c.length/2,O=e.texture;if(O!==Vi.WHITE){const E=e.matrix;E&&(p&&E.append(p.clone().invert()),ZRe(a,2,b,c,_,2,a.length/2-b,E))}else KRe(c,_,2,a.length/2-b);const T=nc.get(ZH);T.indexOffset=y,T.indexSize=h.length-y,T.attributeOffset=b,T.attributeSize=a.length/2-b,T.baseColor=e.color,T.alpha=e.alpha,T.texture=O,T.geometryData=o,T.topology=S,s.push(T)})}function dIe(r){if(!r)return[];const e=r.shapePrimitives,n=[];for(let i=0;i<e.length;i++){const s=e[i].shape,o=[];F_[s.type].build(s,o),n.push(o)}return n}class fIe{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class pIe{constructor(){this.batcher=new qRe,this.instructions=new sH}init(){this.instructions.reset()}get geometry(){return $i(y4e,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const TA=class wE{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){wE.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??wE.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let n=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){n?this._cleanGraphicsContextData(e):n=this._initContext(e),hIe(e,n);const i=e.batchMode;e.customShader||i==="no-batch"?n.isBatchable=!1:i==="auto"&&(n.isBatchable=n.geometryData.vertices.length<400),e.dirty=!1}return n}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const n=nc.get(pIe),{batches:i,geometryData:s}=this._gpuContextHash[e.uid],o=s.vertices.length,a=s.indices.length;for(let f=0;f<i.length;f++)i[f].applyTransform=!1;const c=n.batcher;c.ensureAttributeBuffer(o),c.ensureIndexBuffer(a),c.begin();for(let f=0;f<i.length;f++){const p=i[f];c.add(p)}c.finish(n.instructions);const h=c.geometry;h.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),h.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const d=c.batches;for(let f=0;f<d.length;f++){const p=d[f];p.bindGroup=uRe(p.textures.textures,p.textures.count)}return this._graphicsDataContextHash[e.uid]=n,n}_initContext(e){const n=new fIe;return n.context=e,this._gpuContextHash[e.uid]=n,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const n=this._gpuContextHash[e.uid];n.isBatchable||this._graphicsDataContextHash[e.uid]&&(nc.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),n.batches&&n.batches.forEach(i=>{nc.return(i)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};TA.extension={type:[Yt.WebGLSystem,Yt.WebGPUSystem,Yt.CanvasSystem],name:"graphicsContext"};TA.defaultOptions={bezierSmoothness:.5};let eG=TA;const mIe=8,Sx=11920929e-14,gIe=1;function tG(r,e,n,i,s,o,a,c,h,d){const p=Math.min(.99,Math.max(0,d??eG.defaultOptions.bezierSmoothness));let g=(gIe-p)/1;return g*=g,yIe(e,n,i,s,o,a,c,h,r,g),r}function yIe(r,e,n,i,s,o,a,c,h,d){_E(r,e,n,i,s,o,a,c,h,d,0),h.push(a,c)}function _E(r,e,n,i,s,o,a,c,h,d,f){if(f>mIe)return;const p=(r+n)/2,g=(e+i)/2,y=(n+s)/2,b=(i+o)/2,w=(s+a)/2,x=(o+c)/2,S=(p+y)/2,_=(g+b)/2,O=(y+w)/2,T=(b+x)/2,E=(S+O)/2,P=(_+T)/2;if(f>0){let I=a-r,A=c-e;const D=Math.abs((n-a)*A-(i-c)*I),M=Math.abs((s-a)*A-(o-c)*I);if(D>Sx&&M>Sx){if((D+M)*(D+M)<=d*(I*I+A*A)){h.push(E,P);return}}else if(D>Sx){if(D*D<=d*(I*I+A*A)){h.push(E,P);return}}else if(M>Sx){if(M*M<=d*(I*I+A*A)){h.push(E,P);return}}else if(I=E-(r+a)/2,A=P-(e+c)/2,I*I+A*A<=d){h.push(E,P);return}}_E(r,e,p,g,S,_,E,P,h,d,f+1),_E(E,P,O,T,w,x,a,c,h,d,f+1)}const vIe=8,bIe=11920929e-14,xIe=1;function OIe(r,e,n,i,s,o,a,c){const d=Math.min(.99,Math.max(0,c??eG.defaultOptions.bezierSmoothness));let f=(xIe-d)/1;return f*=f,wIe(e,n,i,s,o,a,r,f),r}function wIe(r,e,n,i,s,o,a,c){SE(a,r,e,n,i,s,o,c,0),a.push(s,o)}function SE(r,e,n,i,s,o,a,c,h){if(h>vIe)return;const d=(e+i)/2,f=(n+s)/2,p=(i+o)/2,g=(s+a)/2,y=(d+p)/2,b=(f+g)/2;let w=o-e,x=a-n;const S=Math.abs((i-o)*x-(s-a)*w);if(S>bIe){if(S*S<=c*(w*w+x*x)){r.push(y,b);return}}else if(w=y-(e+o)/2,x=b-(n+a)/2,w*w+x*x<=c){r.push(y,b);return}SE(r,e,n,d,f,y,b,c,h+1),SE(r,y,b,p,g,o,a,c,h+1)}function iG(r,e,n,i,s,o,a,c){let h=Math.abs(s-o);(!a&&s>o||a&&o>s)&&(h=2*Math.PI-h),c||(c=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(h/Math.PI)))),c=Math.max(c,3);let d=h/c,f=s;d*=a?-1:1;for(let p=0;p<c+1;p++){const g=Math.cos(f),y=Math.sin(f),b=e+g*i,w=n+y*i;r.push(b,w),f+=d}}function _Ie(r,e,n,i,s,o){const a=r[r.length-2],h=r[r.length-1]-n,d=a-e,f=s-n,p=i-e,g=Math.abs(h*p-d*f);if(g<1e-8||o===0){(r[r.length-2]!==e||r[r.length-1]!==n)&&r.push(e,n);return}const y=h*h+d*d,b=f*f+p*p,w=h*f+d*p,x=o*Math.sqrt(y)/g,S=o*Math.sqrt(b)/g,_=x*w/y,O=S*w/b,T=x*p+S*d,E=x*f+S*h,P=d*(S+_),I=h*(S+_),A=p*(x+O),D=f*(x+O),M=Math.atan2(I-E,P-T),$=Math.atan2(D-E,A-T);iG(r,T+e,E+n,o,M,$,d*f>p*h)}const K0=Math.PI*2,Dk={centerX:0,centerY:0,ang1:0,ang2:0},Nk=({x:r,y:e},n,i,s,o,a,c,h)=>{r*=n,e*=i;const d=s*r-o*e,f=o*r+s*e;return h.x=d+a,h.y=f+c,h};function SIe(r,e){const n=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:n,s=Math.cos(r),o=Math.sin(r),a=Math.cos(r+e),c=Math.sin(r+e);return[{x:s-o*i,y:o+s*i},{x:a+c*i,y:c-a*i},{x:a,y:c}]}const xB=(r,e,n,i)=>{const s=r*i-e*n<0?-1:1;let o=r*n+e*i;return o>1&&(o=1),o<-1&&(o=-1),s*Math.acos(o)},CIe=(r,e,n,i,s,o,a,c,h,d,f,p,g)=>{const y=Math.pow(s,2),b=Math.pow(o,2),w=Math.pow(f,2),x=Math.pow(p,2);let S=y*b-y*x-b*w;S<0&&(S=0),S/=y*x+b*w,S=Math.sqrt(S)*(a===c?-1:1);const _=S*s/o*p,O=S*-o/s*f,T=d*_-h*O+(r+n)/2,E=h*_+d*O+(e+i)/2,P=(f-_)/s,I=(p-O)/o,A=(-f-_)/s,D=(-p-O)/o,M=xB(1,0,P,I);let $=xB(P,I,A,D);c===0&&$>0&&($-=K0),c===1&&$<0&&($+=K0),g.centerX=T,g.centerY=E,g.ang1=M,g.ang2=$};function kIe(r,e,n,i,s,o,a,c=0,h=0,d=0){if(o===0||a===0)return;const f=Math.sin(c*K0/360),p=Math.cos(c*K0/360),g=p*(e-i)/2+f*(n-s)/2,y=-f*(e-i)/2+p*(n-s)/2;if(g===0&&y===0)return;o=Math.abs(o),a=Math.abs(a);const b=Math.pow(g,2)/Math.pow(o,2)+Math.pow(y,2)/Math.pow(a,2);b>1&&(o*=Math.sqrt(b),a*=Math.sqrt(b)),CIe(e,n,i,s,o,a,h,d,f,p,g,y,Dk);let{ang1:w,ang2:x}=Dk;const{centerX:S,centerY:_}=Dk;let O=Math.abs(x)/(K0/4);Math.abs(1-O)<1e-7&&(O=1);const T=Math.max(Math.ceil(O),1);x/=T;let E=r[r.length-2],P=r[r.length-1];const I={x:0,y:0};for(let A=0;A<T;A++){const D=SIe(w,x),{x:M,y:$}=Nk(D[0],o,a,p,f,S,_,I),{x:L,y:N}=Nk(D[1],o,a,p,f,S,_,I),{x:V,y:U}=Nk(D[2],o,a,p,f,S,_,I);tG(r,E,P,M,$,L,N,V,U),E=V,P=U,w+=x}}function TIe(r,e,n){const i=(a,c)=>{const h=c.x-a.x,d=c.y-a.y,f=Math.sqrt(h*h+d*d),p=h/f,g=d/f;return{len:f,nx:p,ny:g}},s=(a,c)=>{a===0?r.moveTo(c.x,c.y):r.lineTo(c.x,c.y)};let o=e[e.length-1];for(let a=0;a<e.length;a++){const c=e[a%e.length],h=c.radius??n;if(h<=0){s(a,c),o=c;continue}const d=e[(a+1)%e.length],f=i(c,o),p=i(c,d);if(f.len<1e-4||p.len<1e-4){s(a,c),o=c;continue}let g=Math.asin(f.nx*p.ny-f.ny*p.nx),y=1,b=!1;f.nx*p.nx-f.ny*-p.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,y=-1,b=!0):g>0&&(y=-1,b=!0);const w=g/2;let x,S=Math.abs(Math.cos(w)*h/Math.sin(w));S>Math.min(f.len/2,p.len/2)?(S=Math.min(f.len/2,p.len/2),x=Math.abs(S*Math.sin(w)/Math.cos(w))):x=h;const _=c.x+p.nx*S+-p.ny*x*y,O=c.y+p.ny*S+p.nx*x*y,T=Math.atan2(f.ny,f.nx)+Math.PI/2*y,E=Math.atan2(p.ny,p.nx)-Math.PI/2*y;a===0&&r.moveTo(_+Math.cos(T)*x,O+Math.sin(T)*x),r.arc(_,O,x,T,E,b),o=c}}function MIe(r,e,n,i){const s=(c,h)=>Math.sqrt((c.x-h.x)**2+(c.y-h.y)**2),o=(c,h,d)=>({x:c.x+(h.x-c.x)*d,y:c.y+(h.y-c.y)*d}),a=e.length;for(let c=0;c<a;c++){const h=e[(c+1)%a],d=h.radius??n;if(d<=0){c===0?r.moveTo(h.x,h.y):r.lineTo(h.x,h.y);continue}const f=e[c],p=e[(c+2)%a],g=s(f,h);let y;if(g<1e-4)y=h;else{const x=Math.min(g/2,d);y=o(h,f,x/g)}const b=s(p,h);let w;if(b<1e-4)w=h;else{const x=Math.min(b/2,d);w=o(h,p,x/b)}c===0?r.moveTo(y.x,y.y):r.lineTo(y.x,y.y),r.quadraticCurveTo(h.x,h.y,w.x,w.y,i)}}const EIe=new wr;class PIe{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new fl,this._graphicsPath2D=e}moveTo(e,n){return this.startPoly(e,n),this}lineTo(e,n){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],o=i[i.length-1];return(s!==e||o!==n)&&i.push(e,n),this}arc(e,n,i,s,o,a){this._ensurePoly(!1);const c=this._currentPoly.points;return iG(c,e,n,i,s,o,a),this}arcTo(e,n,i,s,o){this._ensurePoly();const a=this._currentPoly.points;return _Ie(a,e,n,i,s,o),this}arcToSvg(e,n,i,s,o,a,c){const h=this._currentPoly.points;return kIe(h,this._currentPoly.lastX,this._currentPoly.lastY,a,c,e,n,i,s,o),this}bezierCurveTo(e,n,i,s,o,a,c){this._ensurePoly();const h=this._currentPoly;return tG(this._currentPoly.points,h.lastX,h.lastY,e,n,i,s,o,a,c),this}quadraticCurveTo(e,n,i,s,o){this._ensurePoly();const a=this._currentPoly;return OIe(this._currentPoly.points,a.lastX,a.lastY,e,n,i,s,o),this}closePath(){return this.endPoly(!0),this}addPath(e,n){this.endPoly(),n&&!n.isIdentity()&&(e=e.clone(!0),e.transform(n));for(let i=0;i<e.instructions.length;i++){const s=e.instructions[i];this[s.action](...s.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,n,i,s,o){return this.drawShape(new wr(e,n,i,s),o),this}circle(e,n,i,s){return this.drawShape(new B_(e,n,i),s),this}poly(e,n,i){const s=new Z0(e);return s.closePath=n,this.drawShape(s,i),this}regularPoly(e,n,i,s,o=0,a){s=Math.max(s|0,3);const c=-1*Math.PI/2+o,h=Math.PI*2/s,d=[];for(let f=0;f<s;f++){const p=c-f*h;d.push(e+i*Math.cos(p),n+i*Math.sin(p))}return this.poly(d,!0,a),this}roundPoly(e,n,i,s,o,a=0,c){if(s=Math.max(s|0,3),o<=0)return this.regularPoly(e,n,i,s,a);const h=i*Math.sin(Math.PI/s)-.001;o=Math.min(o,h);const d=-1*Math.PI/2+a,f=Math.PI*2/s,p=(s-2)*Math.PI/s/2;for(let g=0;g<s;g++){const y=g*f+d,b=e+i*Math.cos(y),w=n+i*Math.sin(y),x=y+Math.PI+p,S=y-Math.PI-p,_=b+o*Math.cos(x),O=w+o*Math.sin(x),T=b+o*Math.cos(S),E=w+o*Math.sin(S);g===0?this.moveTo(_,O):this.lineTo(_,O),this.quadraticCurveTo(b,w,T,E,c)}return this.closePath()}roundShape(e,n,i=!1,s){return e.length<3?this:(i?MIe(this,e,n,s):TIe(this,e,n),this.closePath())}filletRect(e,n,i,s,o){if(o===0)return this.rect(e,n,i,s);const a=Math.min(i,s)/2,c=Math.min(a,Math.max(-a,o)),h=e+i,d=n+s,f=c<0?-c:0,p=Math.abs(c);return this.moveTo(e,n+p).arcTo(e+f,n+f,e+p,n,p).lineTo(h-p,n).arcTo(h-f,n+f,h,n+p,p).lineTo(h,d-p).arcTo(h-f,d-f,e+i-p,d,p).lineTo(e+p,d).arcTo(e+f,d-f,e,d-p,p).closePath()}chamferRect(e,n,i,s,o,a){if(o<=0)return this.rect(e,n,i,s);const c=Math.min(o,Math.min(i,s)/2),h=e+i,d=n+s,f=[e+c,n,h-c,n,h,n+c,h,d-c,h-c,d,e+c,d,e,d-c,e,n+c];for(let p=f.length-1;p>=2;p-=2)f[p]===f[p-2]&&f[p-1]===f[p-3]&&f.splice(p-1,2);return this.poly(f,!0,a)}ellipse(e,n,i,s,o){return this.drawShape(new CA(e,n,i,s),o),this}roundRect(e,n,i,s,o,a){return this.drawShape(new kA(e,n,i,s,o),a),this}drawShape(e,n){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:n}),this}startPoly(e,n){let i=this._currentPoly;return i&&this.endPoly(),i=new Z0,i.points.push(e,n),this._currentPoly=i,this}endPoly(e=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=e,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Z0,e)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let i=n.shape.x,s=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const o=n.transform,a=i;i=o.a*i+o.c*s+o.tx,s=o.b*a+o.d*s+o.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<e.instructions.length;n++){const i=e.instructions[n];this[i.action](...i.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const n=this.shapePrimitives;for(let i=0;i<n.length;i++){const s=n[i],o=s.shape.getBounds(EIe);s.transform?e.addRect(o,s.transform):e.addRect(o)}return e}}class Qp{constructor(e){this.instructions=[],this.uid=_r("graphicsPath"),this._dirty=!0,typeof e=="string"?oRe(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new PIe(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,n){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,n]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,n,i,s,o){const a=this.instructions[this.instructions.length-1],c=this.getLastPoint(Kn.shared);let h=0,d=0;if(!a||a.action!=="bezierCurveTo")h=c.x,d=c.y;else{h=a.data[2],d=a.data[3];const f=c.x,p=c.y;h=f+(f-h),d=p+(p-d)}return this.instructions.push({action:"bezierCurveTo",data:[h,d,e,n,i,s,o]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,n,i){const s=this.instructions[this.instructions.length-1],o=this.getLastPoint(Kn.shared);let a=0,c=0;if(!s||s.action!=="quadraticCurveTo")a=o.x,c=o.y;else{a=s.data[0],c=s.data[1];const h=o.x,d=o.y;a=h+(h-a),c=d+(d-c)}return this.instructions.push({action:"quadraticCurveTo",data:[a,c,e,n,i]}),this._dirty=!0,this}rect(e,n,i,s,o){return this.instructions.push({action:"rect",data:[e,n,i,s,o]}),this._dirty=!0,this}circle(e,n,i,s){return this.instructions.push({action:"circle",data:[e,n,i,s]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,n,i,s,o,a,c){o||(o=s/2);const h=-1*Math.PI/2+a,d=i*2,f=Math.PI*2/d,p=[];for(let g=0;g<d;g++){const y=g%2?o:s,b=g*f+h;p.push(e+y*Math.cos(b),n+y*Math.sin(b))}return this.poly(p,!0,c),this}clone(e=!1){const n=new Qp;if(!e)n.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const s=this.instructions[i];n.instructions.push({action:s.action,data:s.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const n=e.a,i=e.b,s=e.c,o=e.d,a=e.tx,c=e.ty;let h=0,d=0,f=0,p=0,g=0,y=0,b=0,w=0;for(let x=0;x<this.instructions.length;x++){const S=this.instructions[x],_=S.data;switch(S.action){case"moveTo":case"lineTo":h=_[0],d=_[1],_[0]=n*h+s*d+a,_[1]=i*h+o*d+c;break;case"bezierCurveTo":f=_[0],p=_[1],g=_[2],y=_[3],h=_[4],d=_[5],_[0]=n*f+s*p+a,_[1]=i*f+o*p+c,_[2]=n*g+s*y+a,_[3]=i*g+o*y+c,_[4]=n*h+s*d+a,_[5]=i*h+o*d+c;break;case"quadraticCurveTo":f=_[0],p=_[1],h=_[2],d=_[3],_[0]=n*f+s*p+a,_[1]=i*f+o*p+c,_[2]=n*h+s*d+a,_[3]=i*h+o*d+c;break;case"arcToSvg":h=_[5],d=_[6],b=_[0],w=_[1],_[0]=n*b+s*w,_[1]=i*b+o*w,_[5]=n*h+s*d+a,_[6]=i*h+o*d+c;break;case"circle":_[4]=d0(_[3],e);break;case"rect":_[4]=d0(_[4],e);break;case"ellipse":_[8]=d0(_[8],e);break;case"roundRect":_[5]=d0(_[5],e);break;case"addPath":_[0].transform(e);break;case"poly":_[2]=d0(_[2],e);break;default:hr("unknown transform action",S.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let n=this.instructions.length-1,i=this.instructions[n];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(n--,n<0)return e.x=0,e.y=0,e;i=this.instructions[n]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}}function d0(r,e){return r?r.prepend(e):e.clone()}function AIe(r,e){if(typeof r=="string"){const i=document.createElement("div");i.innerHTML=r.trim(),r=i.querySelector("svg")}const n={context:e,path:new Qp};return nG(r,n,null,null),e}function nG(r,e,n,i){const s=r.children,{fillStyle:o,strokeStyle:a}=RIe(r);o&&n?n={...n,...o}:o&&(n=o),a&&i?i={...i,...a}:a&&(i=a),e.context.fillStyle=n,e.context.strokeStyle=i;let c,h,d,f,p,g,y,b,w,x,S,_,O,T,E,P,I;switch(r.nodeName.toLowerCase()){case"path":T=r.getAttribute("d"),E=new Qp(T),e.context.path(E),n&&e.context.fill(),i&&e.context.stroke();break;case"circle":y=Ar(r,"cx",0),b=Ar(r,"cy",0),w=Ar(r,"r",0),e.context.ellipse(y,b,w,w),n&&e.context.fill(),i&&e.context.stroke();break;case"rect":c=Ar(r,"x",0),h=Ar(r,"y",0),P=Ar(r,"width",0),I=Ar(r,"height",0),x=Ar(r,"rx",0),S=Ar(r,"ry",0),x||S?e.context.roundRect(c,h,P,I,x||S):e.context.rect(c,h,P,I),n&&e.context.fill(),i&&e.context.stroke();break;case"ellipse":y=Ar(r,"cx",0),b=Ar(r,"cy",0),x=Ar(r,"rx",0),S=Ar(r,"ry",0),e.context.beginPath(),e.context.ellipse(y,b,x,S),n&&e.context.fill(),i&&e.context.stroke();break;case"line":d=Ar(r,"x1",0),f=Ar(r,"y1",0),p=Ar(r,"x2",0),g=Ar(r,"y2",0),e.context.beginPath(),e.context.moveTo(d,f),e.context.lineTo(p,g),i&&e.context.stroke();break;case"polygon":O=r.getAttribute("points"),_=O.match(/\d+/g).map(A=>parseInt(A,10)),e.context.poly(_,!0),n&&e.context.fill(),i&&e.context.stroke();break;case"polyline":O=r.getAttribute("points"),_=O.match(/\d+/g).map(A=>parseInt(A,10)),e.context.poly(_,!1),i&&e.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}for(let A=0;A<s.length;A++)nG(s[A],e,n,i)}function Ar(r,e,n){const i=r.getAttribute(e);return i?Number(i):n}function RIe(r){const e=r.getAttribute("style"),n={},i={};let s=!1,o=!1;if(e){const a=e.split(";");for(let c=0;c<a.length;c++){const h=a[c],[d,f]=h.split(":");switch(d){case"stroke":f!=="none"&&(n.color=cr.shared.setValue(f).toNumber(),o=!0);break;case"stroke-width":n.width=Number(f);break;case"fill":f!=="none"&&(s=!0,i.color=cr.shared.setValue(f).toNumber());break;case"fill-opacity":i.alpha=Number(f);break;case"stroke-opacity":n.alpha=Number(f);break;case"opacity":i.alpha=Number(f),n.alpha=Number(f);break}}}else{const a=r.getAttribute("stroke");a&&a!=="none"&&(o=!0,n.color=cr.shared.setValue(a).toNumber(),n.width=Ar(r,"stroke-width",1));const c=r.getAttribute("fill");c&&c!=="none"&&(s=!0,i.color=cr.shared.setValue(c).toNumber())}return{strokeStyle:o?n:null,fillStyle:s?i:null}}function IIe(r){return cr.isColorLike(r)}function OB(r){return r instanceof L_}function wB(r){return r instanceof qy}function DIe(r,e,n){const i=cr.shared.setValue(e??0);return r.color=i.toNumber(),r.alpha=i.alpha===1?n.alpha:i.alpha,r.texture=Vi.WHITE,{...n,...r}}function _B(r,e,n){return r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,{...n,...r}}function SB(r,e,n){return e.buildLinearGradient(),r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,{...n,...r}}function NIe(r,e){var s;const n={...e,...r};if(n.texture){if(n.texture!==Vi.WHITE){const a=((s=n.matrix)==null?void 0:s.clone().invert())||new Gi;a.translate(n.texture.frame.x,n.texture.frame.y),a.scale(1/n.texture.source.width,1/n.texture.source.height),n.matrix=a}const o=n.texture.source.style;o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update())}const i=cr.shared.setValue(n.color);return n.alpha*=i.alpha,n.color=i.toNumber(),n.matrix=n.matrix?n.matrix.clone():null,n}function ju(r,e){if(r==null)return null;const n={},i=r;return IIe(r)?DIe(n,r,e):OB(r)?_B(n,r,e):wB(r)?SB(n,r,e):i.fill&&OB(i.fill)?_B(i,i.fill,e):i.fill&&wB(i.fill)?SB(i,i.fill,e):NIe(i,e)}function dw(r,e){const{width:n,alignment:i,miterLimit:s,cap:o,join:a,pixelLine:c,...h}=e,d=ju(r,h);return d?{width:n,alignment:i,miterLimit:s,cap:o,join:a,pixelLine:c,...d}:null}const $Ie=new Kn,CB=new Gi,MA=class qa extends Na{constructor(){super(...arguments),this.uid=_r("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Qp,this._transform=new Gi,this._fillStyle={...qa.defaultFillStyle},this._strokeStyle={...qa.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new fl,this._boundsDirty=!0}clone(){const e=new qa;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=ju(e,qa.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=dw(e,qa.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=ju(e,qa.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=ju(e,qa.defaultStrokeStyle),this}texture(e,n,i,s,o,a){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:s||0,dw:o||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?cr.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Qp,this}fill(e,n){let i;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(e!=null&&(n!==void 0&&typeof e=="number"&&($i(Wi,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:n}),this._fillStyle=ju(e,qa.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:n}=this._activePath.getLastPoint(Kn.shared);this._activePath.clear(),this._activePath.moveTo(e,n)}stroke(e){let n;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?n=i.data.path:n=this._activePath.clone(),n?(e!=null&&(this._strokeStyle=dw(e,qa.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const n=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(i);else{n.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,n,i,s,o,a){this._tick++;const c=this._transform;return this._activePath.arc(c.a*e+c.c*n+c.tx,c.b*e+c.d*n+c.ty,i,s,o,a),this}arcTo(e,n,i,s,o){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*n+a.tx,a.b*e+a.d*n+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,o),this}arcToSvg(e,n,i,s,o,a,c){this._tick++;const h=this._transform;return this._activePath.arcToSvg(e,n,i,s,o,h.a*a+h.c*c+h.tx,h.b*a+h.d*c+h.ty),this}bezierCurveTo(e,n,i,s,o,a,c){this._tick++;const h=this._transform;return this._activePath.bezierCurveTo(h.a*e+h.c*n+h.tx,h.b*e+h.d*n+h.ty,h.a*i+h.c*s+h.tx,h.b*i+h.d*s+h.ty,h.a*o+h.c*a+h.tx,h.b*o+h.d*a+h.ty,c),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,n,i,s){return this._tick++,this._activePath.ellipse(e,n,i,s,this._transform.clone()),this}circle(e,n,i){return this._tick++,this._activePath.circle(e,n,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,n){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*e+i.c*n+i.tx,i.b*e+i.d*n+i.ty),this}moveTo(e,n){this._tick++;const i=this._transform,s=this._activePath.instructions,o=i.a*e+i.c*n+i.tx,a=i.b*e+i.d*n+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=o,s[0].data[1]=a,this):(this._activePath.moveTo(o,a),this)}quadraticCurveTo(e,n,i,s,o){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*n+a.tx,a.b*e+a.d*n+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,o),this}rect(e,n,i,s){return this._tick++,this._activePath.rect(e,n,i,s,this._transform.clone()),this}roundRect(e,n,i,s,o){return this._tick++,this._activePath.roundRect(e,n,i,s,o,this._transform.clone()),this}poly(e,n){return this._tick++,this._activePath.poly(e,n,this._transform.clone()),this}regularPoly(e,n,i,s,o=0,a){return this._tick++,this._activePath.regularPoly(e,n,i,s,o,a),this}roundPoly(e,n,i,s,o,a){return this._tick++,this._activePath.roundPoly(e,n,i,s,o,a),this}roundShape(e,n,i,s){return this._tick++,this._activePath.roundShape(e,n,i,s),this}filletRect(e,n,i,s,o){return this._tick++,this._activePath.filletRect(e,n,i,s,o),this}chamferRect(e,n,i,s,o,a){return this._tick++,this._activePath.chamferRect(e,n,i,s,o,a),this}star(e,n,i,s,o=0,a=0){return this._tick++,this._activePath.star(e,n,i,s,o,a,this._transform.clone()),this}svg(e){return this._tick++,AIe(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,n=e){return this._transform.scale(e,n),this}setTransform(e,n,i,s,o,a){return e instanceof Gi?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,n,i,s,o,a),this)}transform(e,n,i,s,o,a){return e instanceof Gi?(this._transform.append(e),this):(CB.set(e,n,i,s,o,a),this._transform.append(CB),this)}translate(e,n=e){return this._transform.translate(e,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let n=0;n<this.instructions.length;n++){const i=this.instructions[n],s=i.action;if(s==="fill"){const o=i.data;e.addBounds(o.path.bounds)}else if(s==="texture"){const o=i.data;e.addFrame(o.dx,o.dy,o.dx+o.dw,o.dy+o.dh,o.transform)}if(s==="stroke"){const o=i.data,a=o.style.alignment,c=o.style.width*(1-a),h=o.path.bounds;e.addFrame(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c)}}return e}containsPoint(e){var s;if(!this.bounds.containsPoint(e.x,e.y))return!1;const n=this.instructions;let i=!1;for(let o=0;o<n.length;o++){const a=n[o],c=a.data,h=c.path;if(!a.action||!h)continue;const d=c.style,f=h.shapePath.shapePrimitives;for(let p=0;p<f.length;p++){const g=f[p].shape;if(!d||!g)continue;const y=f[p].transform,b=y?y.applyInverse(e,$Ie):e;if(a.action==="fill")i=g.contains(b.x,b.y);else{const x=d;i=g.strokeContains(b.x,b.y,x.width,x.alignment)}const w=c.hole;if(w){const x=(s=w.shapePath)==null?void 0:s.shapePrimitives;if(x)for(let S=0;S<x.length;S++)x[S].shape.contains(b.x,b.y)&&(i=!1)}if(i)return!0}}return i}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};MA.defaultFillStyle={color:16777215,alpha:1,texture:Vi.WHITE,matrix:null,fill:null};MA.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Vi.WHITE,matrix:null,fill:null,pixelLine:!1};let Wo=MA;const kB=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function VIe(r){const e=[];let n=0;for(let i=0;i<kB.length;i++){const s=`_${kB[i]}`;e[n++]=r[s]}return n=rG(r._fill,e,n),n=LIe(r._stroke,e,n),n=BIe(r.dropShadow,e,n),e.join("-")}function rG(r,e,n){var i;return r&&(e[n++]=r.color,e[n++]=r.alpha,e[n++]=(i=r.fill)==null?void 0:i.styleKey),n}function LIe(r,e,n){return r&&(n=rG(r,e,n),e[n++]=r.width,e[n++]=r.alignment,e[n++]=r.cap,e[n++]=r.join,e[n++]=r.miterLimit),n}function BIe(r,e,n){return r&&(e[n++]=r.alpha,e[n++]=r.angle,e[n++]=r.blur,e[n++]=r.distance,e[n++]=cr.shared.setValue(r.color).toNumber()),n}const EA=class $f extends Na{constructor(e={}){super(),UIe(e);const n={...$f.defaultTextStyle,...e};for(const i in n){const s=i;this[s]=n[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...$f.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...$f.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Wo.defaultFillStyle,...e},()=>{this._fill=ju({...this._originalFill},Wo.defaultFillStyle)})),this._fill=ju(e===0?"black":e,Wo.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Wo.defaultStrokeStyle,...e},()=>{this._stroke=dw({...this._originalStroke},Wo.defaultStrokeStyle)})),this._stroke=dw(e,Wo.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=VIe(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=$f.defaultTextStyle;for(const n in e)this[n]=e[n]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new $f({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var i,s,o,a;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const c=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(c),(s=this._originalFill)!=null&&s.texture&&this._originalFill.texture.destroy(c),(o=this._stroke)!=null&&o.texture&&this._stroke.texture.destroy(c),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(c)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,n){return new Proxy(e,{set:(i,s,o)=>(i[s]=o,n==null||n(s,o),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(cr.isColorLike(e)||e instanceof qy||e instanceof L_)}};EA.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};EA.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ky=EA;function UIe(r){const e=r;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const n=Ky.defaultDropShadow;r.dropShadow={alpha:e.dropShadowAlpha??n.alpha,angle:e.dropShadowAngle??n.angle,blur:e.dropShadowBlur??n.blur,color:e.dropShadowColor??n.color,distance:e.dropShadowDistance??n.distance}}if(e.strokeThickness!==void 0){$i(Wi,"strokeThickness is now a part of stroke");const n=e.stroke;let i={};if(cr.isColorLike(n))i.color=n;else if(n instanceof qy||n instanceof L_)i.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))i=n;else throw new Error("Invalid stroke value.");r.stroke={...i,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){$i(Wi,"gradient fill is now a fill pattern: `new FillGradient(...)`");let n;r.fontSize==null?r.fontSize=Ky.defaultTextStyle.fontSize:typeof r.fontSize=="string"?n=parseInt(r.fontSize,10):n=r.fontSize;const i=new qy(0,0,0,n*1.7),s=e.fillGradientStops.map(o=>cr.shared.setValue(o).toNumber());s.forEach((o,a)=>{const c=a/(s.length-1);i.addColorStop(c,o)}),r.fill={fill:i}}}class FIe{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,n){const i=Qn.get().createCanvas();i.width=e,i.height=n;const s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(e,n,i=1){e=Math.ceil(e*i-1e-6),n=Math.ceil(n*i-1e-6),e=hw(e),n=hw(n);const s=(e<<17)+(n<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let o=this._canvasPool[s].pop();return o||(o=this._createCanvasAndContext(e,n)),o}returnCanvasAndContext(e){const n=e.canvas,{width:i,height:s}=n,o=(i<<17)+(s<<1);e.context.clearRect(0,0,i,s),this._canvasPool[o].push(e)}clear(){this._canvasPool={}}}const TB=new FIe,zIe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function CE(r){const e=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let n=r.fontFamily;Array.isArray(r.fontFamily)||(n=r.fontFamily.split(","));for(let i=n.length-1;i>=0;i--){let s=n[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!zIe.includes(s)&&(s=`"${s}"`),n[i]=s}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${e} ${n.join(",")}`}const $k={willReadFrequently:!0},$a=class Ft{static get experimentalLetterSpacingSupported(){let e=Ft._experimentalLetterSpacingSupported;if(e!==void 0){const n=Qn.get().getCanvasRenderingContext2D().prototype;e=Ft._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return e}constructor(e,n,i,s,o,a,c,h,d){this.text=e,this.style=n,this.width=i,this.height=s,this.lines=o,this.lineWidths=a,this.lineHeight=c,this.maxLineWidth=h,this.fontProperties=d}static measureText(e=" ",n,i=Ft._canvas,s=n.wordWrap){var _;const o=`${e}:${n.styleKey}`;if(Ft._measurementCache[o])return Ft._measurementCache[o];const a=CE(n),c=Ft.measureFont(a);c.fontSize===0&&(c.fontSize=n.fontSize,c.ascent=n.fontSize);const h=Ft.__context;h.font=a;const f=(s?Ft._wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),p=new Array(f.length);let g=0;for(let O=0;O<f.length;O++){const T=Ft._measureText(f[O],n.letterSpacing,h);p[O]=T,g=Math.max(g,T)}const y=((_=n._stroke)==null?void 0:_.width)||0;let b=g+y;n.dropShadow&&(b+=n.dropShadow.distance);const w=n.lineHeight||c.fontSize;let x=Math.max(w,c.fontSize+y)+(f.length-1)*(w+n.leading);return n.dropShadow&&(x+=n.dropShadow.distance),new Ft(e,n,b,x,f,p,w+n.leading,g,c)}static _measureText(e,n,i){let s=!1;Ft.experimentalLetterSpacingSupported&&(Ft.experimentalLetterSpacing?(i.letterSpacing=`${n}px`,i.textLetterSpacing=`${n}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const o=i.measureText(e);let a=o.width;const c=-o.actualBoundingBoxLeft;let d=o.actualBoundingBoxRight-c;if(a>0)if(s)a-=n,d-=n;else{const f=(Ft.graphemeSegmenter(e).length-1)*n;a+=f,d+=f}return Math.max(a,d)}static _wordWrap(e,n,i=Ft._canvas){const s=i.getContext("2d",$k);let o=0,a="",c="";const h=Object.create(null),{letterSpacing:d,whiteSpace:f}=n,p=Ft._collapseSpaces(f),g=Ft._collapseNewlines(f);let y=!p;const b=n.wordWrapWidth+d,w=Ft._tokenize(e);for(let x=0;x<w.length;x++){let S=w[x];if(Ft._isNewline(S)){if(!g){c+=Ft._addLine(a),y=!p,a="",o=0;continue}S=" "}if(p){const O=Ft.isBreakingSpace(S),T=Ft.isBreakingSpace(a[a.length-1]);if(O&&T)continue}const _=Ft._getFromCache(S,d,h,s);if(_>b)if(a!==""&&(c+=Ft._addLine(a),a="",o=0),Ft.canBreakWords(S,n.breakWords)){const O=Ft.wordWrapSplit(S);for(let T=0;T<O.length;T++){let E=O[T],P=E,I=1;for(;O[T+I];){const D=O[T+I];if(!Ft.canBreakChars(P,D,S,T,n.breakWords))E+=D;else break;P=D,I++}T+=I-1;const A=Ft._getFromCache(E,d,h,s);A+o>b&&(c+=Ft._addLine(a),y=!1,a="",o=0),a+=E,o+=A}}else{a.length>0&&(c+=Ft._addLine(a),a="",o=0);const O=x===w.length-1;c+=Ft._addLine(S,!O),y=!1,a="",o=0}else _+o>b&&(y=!1,c+=Ft._addLine(a),a="",o=0),(a.length>0||!Ft.isBreakingSpace(S)||y)&&(a+=S,o+=_)}return c+=Ft._addLine(a,!1),c}static _addLine(e,n=!0){return e=Ft._trimRight(e),e=n?`${e}
`:e,e}static _getFromCache(e,n,i,s){let o=i[e];return typeof o!="number"&&(o=Ft._measureText(e,n,s)+n,i[e]=o),o}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let n=e.length-1;n>=0;n--){const i=e[n];if(!Ft.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:Ft._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,n){return typeof e!="string"?!1:Ft._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const n=[];let i="";if(typeof e!="string")return n;for(let s=0;s<e.length;s++){const o=e[s],a=e[s+1];if(Ft.isBreakingSpace(o,a)||Ft._isNewline(o)){i!==""&&(n.push(i),i=""),n.push(o);continue}i+=o}return i!==""&&n.push(i),n}static canBreakWords(e,n){return n}static canBreakChars(e,n,i,s,o){return!0}static wordWrapSplit(e){return Ft.graphemeSegmenter(e)}static measureFont(e){if(Ft._fonts[e])return Ft._fonts[e];const n=Ft._context;n.font=e;const i=n.measureText(Ft.METRICS_STRING+Ft.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return Ft._fonts[e]=s,s}static clearMetrics(e=""){e?delete Ft._fonts[e]:Ft._fonts={}}static get _canvas(){if(!Ft.__canvas){let e;try{const n=new OffscreenCanvas(0,0),i=n.getContext("2d",$k);if(i!=null&&i.measureText)return Ft.__canvas=n,n;e=Qn.get().createCanvas()}catch{e=Qn.get().createCanvas()}e.width=e.height=10,Ft.__canvas=e}return Ft.__canvas}static get _context(){return Ft.__context||(Ft.__context=Ft._canvas.getContext("2d",$k)),Ft.__context}};$a.METRICS_STRING="|ÉqÅ";$a.BASELINE_SYMBOL="M";$a.BASELINE_MULTIPLIER=1.4;$a.HEIGHT_MULTIPLIER=2;$a.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(n=>n.segment)}return r=>[...r]})();$a.experimentalLetterSpacing=!1;$a._fonts={};$a._newlines=[10,13];$a._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];$a._measurementCache={};let MB=$a;function EB(r,e){if(r.texture===Vi.WHITE&&!r.fill)return cr.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof L_){const n=r.fill,i=e.createPattern(n.texture.source.resource,"repeat"),s=n.transform.copyTo(Gi.shared);return s.scale(n.texture.frame.width,n.texture.frame.height),i.setTransform(s),i}else if(r.fill instanceof qy){const n=r.fill;if(n.type==="linear"){const i=e.createLinearGradient(n.x0,n.y0,n.x1,n.y1);return n.gradientStops.forEach(s=>{i.addColorStop(s.offset,cr.shared.setValue(s.color).toHex())}),i}}}else{const n=e.createPattern(r.texture.source.resource,"repeat"),i=r.matrix.copyTo(Gi.shared);return i.scale(r.texture.frame.width,r.texture.frame.height),n.setTransform(i),n}return hr("FillStyle not recognised",r),"red"}function sG(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const e=[];for(let n=0,i=r.length;n<i;n++){const s=r[n];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const o=s[0].charCodeAt(0),a=s[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(let c=o,h=a;c<=h;c++)e.push(String.fromCharCode(c))}else e.push(...Array.from(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const oG=class aG extends BH{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...aG.defaultOptions,...e};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const i=n.style.clone();n.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=Vi.WHITE,i._fill.fill=null),this.applyFillAsTint=n.overrideFill;const s=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const o=CE(i);n.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/s):i.fontSize=this.baseRenderedFontSize=s,this._style=i,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,this.fontMetrics=MB.measureFont(o),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(e){var x,S;const n=sG(e).filter(_=>!this._currentChars.includes(_)).filter((_,O,T)=>T.indexOf(_)===O);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:s,context:o}=i.canvasAndContext,a=i.texture.source;const c=this._style;let h=this._currentX,d=this._currentY;const f=this.baseRenderedFontSize/this.baseMeasurementFontSize,p=this._padding*f;let g=0,y=!1;const b=s.width/this.resolution,w=s.height/this.resolution;for(let _=0;_<n.length;_++){const O=n[_],T=MB.measureText(O,c,s,!1);T.lineHeight=T.height;const E=T.width*f,P=Math.ceil((c.fontStyle==="italic"?2:1)*E),I=T.height*f,A=P+p*2,D=I+p*2;if(y=!1,O!==`
`&&O!=="\r"&&O!=="	"&&O!==" "&&(y=!0,g=Math.ceil(Math.max(D,g))),h+A>b&&(d+=g,g=D,h=0,d+g>w)){a.update();const $=this._nextPage();s=$.canvasAndContext.canvas,o=$.canvasAndContext.context,a=$.texture.source,d=0}const M=E/f-(((x=c.dropShadow)==null?void 0:x.distance)??0)-(((S=c._stroke)==null?void 0:S.width)??0);if(this.chars[O]={id:O.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:M,kerning:{}},y){this._drawGlyph(o,T,h+p,d+p,f,c);const $=a.width*f,L=a.height*f,N=new wr(h/$*a.width,d/L*a.height,A/$*a.width,D/L*a.height);this.chars[O].texture=new Vi({source:a,frame:N}),h+=Math.ceil(A)}}a.update(),this._currentX=h,this._currentY=d,this._skipKerning&&this._applyKerning(n,o)}get pageTextures(){return $i(Wi,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,n){const i=this._measureCache;for(let s=0;s<e.length;s++){const o=e[s];for(let a=0;a<this._currentChars.length;a++){const c=this._currentChars[a];let h=i[o];h||(h=i[o]=n.measureText(o).width);let d=i[c];d||(d=i[c]=n.measureText(c).width);let f=n.measureText(o+c).width,p=f-(h+d);p&&(this.chars[o].kerning[c]=p),f=n.measureText(o+c).width,p=f-(h+d),p&&(this.chars[c].kerning[o]=p)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,n=TB.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(n.context,this._style,e);const i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new Vi({source:new am({resource:n.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),o={canvasAndContext:n,texture:s};return this.pages[this._currentPageIndex]=o,o}_setupContext(e,n,i){n.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=CE(n),n.fontSize=this.baseMeasurementFontSize,e.textBaseline=n.textBaseline;const s=n._stroke,o=(s==null?void 0:s.width)??0;if(s&&(e.lineWidth=o,e.lineJoin=s.join,e.miterLimit=s.miterLimit,e.strokeStyle=EB(s,e)),n._fill&&(e.fillStyle=EB(n._fill,e)),n.dropShadow){const a=n.dropShadow,c=cr.shared.setValue(a.color).toArray(),h=a.blur*i,d=a.distance*i;e.shadowColor=`rgba(${c[0]*255},${c[1]*255},${c[2]*255},${a.alpha})`,e.shadowBlur=h,e.shadowOffsetX=Math.cos(a.angle)*d,e.shadowOffsetY=Math.sin(a.angle)*d}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,n,i,s,o,a){const c=n.text,h=n.fontProperties,d=a._stroke,f=((d==null?void 0:d.width)??0)*o,p=i+f/2,g=s-f/2,y=h.descent*o,b=n.lineHeight*o;a.stroke&&f&&e.strokeText(c,p,g+b-y),a._fill&&e.fillText(c,p,g+b-y)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:n,texture:i}=this.pages[e];TB.returnCanvasAndContext(n),i.destroy(!0)}this.pages=null}};oG.defaultOptions={textureSize:512,style:new Ky,mipmap:!0};let PB=oG;function XIe(r,e,n,i){const s={width:0,height:0,offsetY:0,scale:e.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=n.baseLineOffset;let o=s.lines[0],a=null,c=!0;const h={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},d=b=>{const w=o.width;for(let x=0;x<h.index;x++){const S=b.positions[x];o.chars.push(b.chars[x]),o.charPositions.push(S+w)}o.width+=b.width,c=!1,h.width=0,h.index=0,h.chars.length=0},f=()=>{let b=o.chars.length-1;if(i){let w=o.chars[b];for(;w===" ";)o.width-=n.chars[w].xAdvance,w=o.chars[--b]}s.width=Math.max(s.width,o.width),o={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},c=!0,s.lines.push(o),s.height+=n.lineHeight},p=n.baseMeasurementFontSize/e.fontSize,g=e.letterSpacing*p,y=e.wordWrapWidth*p;for(let b=0;b<r.length+1;b++){let w;const x=b===r.length;x||(w=r[b]);const S=n.chars[w]||n.chars[" "];if(/(?:\s)/.test(w)||w==="\r"||w===`
`||x){if(!c&&e.wordWrap&&o.width+h.width-g>y?(f(),d(h),x||o.charPositions.push(0)):(h.start=o.width,d(h),x||o.charPositions.push(0)),w==="\r"||w===`
`)o.width!==0&&f();else if(!x){const E=S.xAdvance+(S.kerning[a]||0)+g;o.width+=E,o.spaceWidth=E,o.spacesIndex.push(o.charPositions.length),o.chars.push(w)}}else{const T=S.kerning[a]||0,E=S.xAdvance+T+g;h.positions[h.index++]=h.width+T,h.chars.push(w),h.width+=E}a=w}return f(),e.align==="center"?WIe(s):e.align==="right"?QIe(s):e.align==="justify"&&HIe(s),s}function WIe(r){for(let e=0;e<r.lines.length;e++){const n=r.lines[e],i=r.width/2-n.width/2;for(let s=0;s<n.charPositions.length;s++)n.charPositions[s]+=i}}function QIe(r){for(let e=0;e<r.lines.length;e++){const n=r.lines[e],i=r.width-n.width;for(let s=0;s<n.charPositions.length;s++)n.charPositions[s]+=i}}function HIe(r){const e=r.width;for(let n=0;n<r.lines.length;n++){const i=r.lines[n];let s=0,o=i.spacesIndex[s++],a=0;const c=i.spacesIndex.length,d=(e-i.width)/c;for(let f=0;f<i.charPositions.length;f++)f===o&&(o=i.spacesIndex[s++],a+=d),i.charPositions[f]+=a}}let Cx=0;class GIe{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(e,n){var a;let i=`${n.fontFamily}-bitmap`,s=!0;if(n._fill.fill&&!n._stroke)i+=n._fill.fill.styleKey,s=!1;else if(n._stroke||n.dropShadow){let c=n.styleKey;c=c.substring(0,c.lastIndexOf("-")),i=`${c}-bitmap`,s=!1}if(!zn.has(i)){const c=new PB({style:n,overrideFill:s,overrideSize:!0,...this.defaultOptions});Cx++,Cx>50&&hr("BitmapText",`You have dynamically created ${Cx} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),c.once("destroy",()=>{Cx--,zn.remove(i)}),zn.set(i,c)}const o=zn.get(i);return(a=o.ensureCharacters)==null||a.call(o,e),o}getLayout(e,n,i=!0){const s=this.getFont(e,n);return XIe([...e],n,s,i)}measureText(e,n,i=!0){return this.getLayout(e,n,i)}install(...e){var d,f,p,g;let n=e[0];typeof n=="string"&&(n={name:n,style:e[1],chars:(d=e[2])==null?void 0:d.chars,resolution:(f=e[2])==null?void 0:f.resolution,padding:(p=e[2])==null?void 0:p.padding,skipKerning:(g=e[2])==null?void 0:g.skipKerning},$i(Wi,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=n==null?void 0:n.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const s=n.style,o=s instanceof Ky?s:new Ky(s),a=o._fill.fill!==null&&o._fill.fill!==void 0,c=new PB({style:o,overrideFill:a,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1}),h=sG(n.chars);return c.ensureCharacters(h.join("")),zn.set(`${i}-bitmap`,c),c.once("destroy",()=>zn.remove(`${i}-bitmap`)),c}uninstall(e){const n=`${e}-bitmap`,i=zn.get(n);i&&i.destroy()}}const AB=new GIe;class lG extends BH{constructor(e,n){super();const{textures:i,data:s}=e;Object.keys(s.pages).forEach(o=>{const a=s.pages[parseInt(o,10)],c=i[a.id];this.pages.push({texture:c})}),Object.keys(s.chars).forEach(o=>{const a=s.chars[o],{frame:c,source:h}=i[a.page],d=new wr(a.x+c.x,a.y+c.y,a.width,a.height),f=new Vi({source:h,frame:d});this.chars[o]={id:o.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:f}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=s.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:n}=this.pages[e];n.destroy(!0)}this.pages=null}static install(e){AB.install(e)}static uninstall(e){AB.uninstall(e)}}const Vk={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const e=r.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const p in e){const g=e[p].match(/^[a-z]+/gm)[0],y=e[p].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),b={};for(const w in y){const x=y[w].split("="),S=x[0],_=x[1].replace(/"/gm,""),O=parseFloat(_),T=isNaN(O)?_:O;b[S]=T}n[g].push(b)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=n.info,[o]=n.common,[a]=n.distanceField??[];a&&(i.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),i.fontSize=parseInt(s.size,10),i.fontFamily=s.face,i.lineHeight=parseInt(o.lineHeight,10);const c=n.page;for(let p=0;p<c.length;p++)i.pages.push({id:parseInt(c[p].id,10)||0,file:c[p].file});const h={};i.baseLineOffset=i.lineHeight-parseInt(o.base,10);const d=n.char;for(let p=0;p<d.length;p++){const g=d[p],y=parseInt(g.id,10);let b=g.letter??g.char??String.fromCharCode(y);b==="space"&&(b=" "),h[y]=b,i.chars[b]={id:y,page:parseInt(g.page,10)||0,x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xOffset:parseInt(g.xoffset,10),yOffset:parseInt(g.yoffset,10),xAdvance:parseInt(g.xadvance,10),kerning:{}}}const f=n.kerning||[];for(let p=0;p<f.length;p++){const g=parseInt(f[p].first,10),y=parseInt(f[p].second,10),b=parseInt(f[p].amount,10);i.chars[h[y]].kerning[h[g]]=b}return i}},RB={test(r){const e=r;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=r.getElementsByTagName("info")[0],i=r.getElementsByTagName("common")[0],s=r.getElementsByTagName("distanceField")[0];s&&(e.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});const o=r.getElementsByTagName("page"),a=r.getElementsByTagName("char"),c=r.getElementsByTagName("kerning");e.fontSize=parseInt(n.getAttribute("size"),10),e.fontFamily=n.getAttribute("face"),e.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let d=0;d<o.length;d++)e.pages.push({id:parseInt(o[d].getAttribute("id"),10)||0,file:o[d].getAttribute("file")});const h={};e.baseLineOffset=e.lineHeight-parseInt(i.getAttribute("base"),10);for(let d=0;d<a.length;d++){const f=a[d],p=parseInt(f.getAttribute("id"),10);let g=f.getAttribute("letter")??f.getAttribute("char")??String.fromCharCode(p);g==="space"&&(g=" "),h[p]=g,e.chars[g]={id:p,page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xOffset:parseInt(f.getAttribute("xoffset"),10),yOffset:parseInt(f.getAttribute("yoffset"),10),xAdvance:parseInt(f.getAttribute("xadvance"),10),kerning:{}}}for(let d=0;d<c.length;d++){const f=parseInt(c[d].getAttribute("first"),10),p=parseInt(c[d].getAttribute("second"),10),g=parseInt(c[d].getAttribute("amount"),10);e.chars[h[p]].kerning[h[f]]=g}return e}},IB={test(r){return typeof r=="string"&&r.includes("<font>")?RB.test(Qn.get().parseXML(r)):!1},parse(r){return RB.parse(Qn.get().parseXML(r))}},YIe=[".xml",".fnt"],jIe={extension:{type:Yt.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof lG,getCacheableAssets(r,e){const n={};return r.forEach(i=>{n[i]=e,n[`${i}-bitmap`]=e}),n[`${e.fontFamily}-bitmap`]=e,n}},qIe={extension:{type:Yt.LoadParser,priority:jh.Normal},name:"loadBitmapFont",test(r){return YIe.includes(Po.extname(r).toLowerCase())},async testParse(r){return Vk.test(r)||IB.test(r)},async parse(r,e,n){const i=Vk.test(r)?Vk.parse(r):IB.parse(r),{src:s}=e,{pages:o}=i,a=[],c=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let p=0;p<o.length;++p){const g=o[p].file;let y=Po.join(Po.dirname(s),g);y=uE(y,s),a.push({src:y,data:c})}const h=await n.load(a),d=a.map(p=>h[p.src]);return new lG({data:i,textures:d},s)},async load(r,e){return await(await Qn.get().fetch(r)).text()},async unload(r,e,n){await Promise.all(r.pages.map(i=>n.unload(i.texture.source._sourceOrigin))),r.destroy()}};class ZIe{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<n;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const KIe={extension:{type:Yt.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(e=>e instanceof Vi),getCacheableAssets:(r,e)=>{const n={};return r.forEach(i=>{e.forEach((s,o)=>{n[i+(o===0?"":o+1)]=s})}),n}};async function cG(r){if("Image"in globalThis)return new Promise(e=>{const n=new Image;n.onload=()=>{e(!0)},n.onerror=()=>{e(!1)},n.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const JIe={extension:{type:Yt.DetectionParser,priority:1},test:async()=>cG("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")},DB=["png","jpg","jpeg"],e6e={extension:{type:Yt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...DB],remove:async r=>r.filter(e=>!DB.includes(e))},t6e="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function PA(r){return t6e?!1:document.createElement("video").canPlayType(r)!==""}const i6e={extension:{type:Yt.DetectionParser,priority:0},test:async()=>PA("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")},n6e={extension:{type:Yt.DetectionParser,priority:0},test:async()=>PA("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")},r6e={extension:{type:Yt.DetectionParser,priority:0},test:async()=>PA("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")},s6e={extension:{type:Yt.DetectionParser,priority:0},test:async()=>cG("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};class o6e{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,i)=>(this._parsersValidated=!1,e[n]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const i={promise:null,parser:null};return i.promise=(async()=>{var a,c;let s=null,o=null;if(n.loadParser&&(o=this._parserHash[n.loadParser],o||hr(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!o){for(let h=0;h<this.parsers.length;h++){const d=this.parsers[h];if(d.load&&((a=d.test)!=null&&a.call(d,e,n,this))){o=d;break}}if(!o)return hr(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await o.load(e,n,this),i.parser=o;for(let h=0;h<this.parsers.length;h++){const d=this.parsers[h];d.parse&&d.parse&&await((c=d.testParse)==null?void 0:c.call(d,s,n,this))&&(s=await d.parse(s,n,this)||s,i.parser=d)}return s})(),i}async load(e,n){this._parsersValidated||this._validateParsers();let i=0;const s={},o=uw(e),a=Sa(e,d=>({alias:[d],src:d,data:{}})),c=a.length,h=a.map(async d=>{const f=Po.toAbsolute(d.src);if(!s[d.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,d)),s[d.src]=await this.promiseCache[f].promise,n&&n(++i/c)}catch(p){throw delete this.promiseCache[f],delete s[d.src],new Error(`[Loader.load] Failed to load ${f}.
${p}`)}});return await Promise.all(h),o?s[a[0].src]:s}async unload(e){const i=Sa(e,s=>({alias:[s],src:s})).map(async s=>{var c,h;const o=Po.toAbsolute(s.src),a=this.promiseCache[o];if(a){const d=await a.promise;delete this.promiseCache[o],await((h=(c=a.parser)==null?void 0:c.unload)==null?void 0:h.call(c,d,s,this))}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(n.name?e[n.name]&&hr(`[Assets] loadParser name conflict "${n.name}"`):hr("[Assets] loadParser should have a name"),{...e,[n.name]:n}),{})}}function cm(r,e){if(Array.isArray(e)){for(const n of e)if(r.startsWith(`data:${n}`))return!0;return!1}return r.startsWith(`data:${e}`)}function hm(r,e){const n=r.split("?")[0],i=Po.extname(n).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const a6e=".json",l6e="application/json",c6e={extension:{type:Yt.LoadParser,priority:jh.Low},name:"loadJson",test(r){return cm(r,l6e)||hm(r,a6e)},async load(r){return await(await Qn.get().fetch(r)).json()}},h6e=".txt",u6e="text/plain",d6e={name:"loadTxt",extension:{type:Yt.LoadParser,priority:jh.Low,name:"loadTxt"},test(r){return cm(r,u6e)||hm(r,h6e)},async load(r){return await(await Qn.get().fetch(r)).text()}},f6e=["normal","bold","100","200","300","400","500","600","700","800","900"],p6e=[".ttf",".otf",".woff",".woff2"],m6e=["font/ttf","font/otf","font/woff","font/woff2"],g6e=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function y6e(r){const e=Po.extname(r),s=Po.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1));let o=s.length>0;for(const c of s)if(!c.match(g6e)){o=!1;break}let a=s.join(" ");return o||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const v6e=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function b6e(r){return v6e.test(r)?r:encodeURI(r)}const x6e={extension:{type:Yt.LoadParser,priority:jh.Low},name:"loadWebFont",test(r){return cm(r,m6e)||hm(r,p6e)},async load(r,e){var i,s,o;const n=Qn.get().getFontFaceSet();if(n){const a=[],c=((i=e.data)==null?void 0:i.family)??y6e(r),h=((o=(s=e.data)==null?void 0:s.weights)==null?void 0:o.filter(f=>f6e.includes(f)))??["normal"],d=e.data??{};for(let f=0;f<h.length;f++){const p=h[f],g=new FontFace(c,`url(${b6e(r)})`,{...d,weight:p});await g.load(),n.add(g),a.push(g)}return zn.set(`${c}-and-url`,{url:r,fontFaces:a}),a.length===1?a[0]:a}return hr("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>{zn.remove(`${e.family}-and-url`),Qn.get().getFontFaceSet().delete(e)})}};function AA(r,e=1){var i;const n=(i=lm.RETINA_PREFIX)==null?void 0:i.exec(r);return n?parseFloat(n[1]):e}function RA(r,e,n){r.label=n,r._sourceOrigin=n;const i=new Vi({source:r,label:n}),s=()=>{delete e.promiseCache[n],zn.has(n)&&zn.remove(n)};return i.source.once("destroy",()=>{e.promiseCache[n]&&(hr("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),i.once("destroy",()=>{r.destroyed||(hr("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const O6e=".svg",w6e="image/svg+xml",_6e={extension:{type:Yt.LoadParser,priority:jh.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return cm(r,w6e)||hm(r,O6e)},async load(r,e,n){return e.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?C6e(r):S6e(r,e,n,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function S6e(r,e,n,i){var x,S,_;const o=await(await Qn.get().fetch(r)).blob(),a=URL.createObjectURL(o),c=new Image;c.src=a,c.crossOrigin=i,await c.decode(),URL.revokeObjectURL(a);const h=document.createElement("canvas"),d=h.getContext("2d"),f=((x=e.data)==null?void 0:x.resolution)||AA(r),p=((S=e.data)==null?void 0:S.width)??c.width,g=((_=e.data)==null?void 0:_.height)??c.height;h.width=p*f,h.height=g*f,d.drawImage(c,0,0,p*f,g*f);const{parseAsGraphicsContext:y,...b}=e.data,w=new am({resource:h,alphaMode:"premultiply-alpha-on-upload",resolution:f,...b});return RA(w,n,r)}async function C6e(r){const n=await(await Qn.get().fetch(r)).text(),i=new Wo;return i.svg(n),i}const k6e=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let fp=null,kE=class{constructor(){fp||(fp=URL.createObjectURL(new Blob([k6e],{type:"application/javascript"}))),this.worker=new Worker(fp)}};kE.revokeObjectURL=function(){fp&&(URL.revokeObjectURL(fp),fp=null)};const T6e=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let pp=null;class hG{constructor(){pp||(pp=URL.createObjectURL(new Blob([T6e],{type:"application/javascript"}))),this.worker=new Worker(pp)}}hG.revokeObjectURL=function(){pp&&(URL.revokeObjectURL(pp),pp=null)};let NB=0,Lk;class M6e{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:n}=new kE;n.addEventListener("message",i=>{n.terminate(),kE.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,n){var i;return this._run("loadImageBitmap",[e,(i=n==null?void 0:n.data)==null?void 0:i.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Lk===void 0&&(Lk=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<Lk&&(this._createdWorkers++,e=new hG().worker,e.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const i=new Promise((s,o)=>{this._queue.push({id:e,arguments:n,resolve:s,reject:o})});return this._next(),i}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const n=this._queue.pop(),i=n.id;this._resolveHash[NB]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:NB++,id:i})}}const $B=new M6e,E6e=[".jpeg",".jpg",".png",".webp",".avif"],P6e=["image/jpeg","image/png","image/webp","image/avif"];async function A6e(r,e){var s;const n=await Qn.get().fetch(r);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${n.status} ${n.statusText}`);const i=await n.blob();return((s=e==null?void 0:e.data)==null?void 0:s.alphaMode)==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}const uG={name:"loadTextures",extension:{type:Yt.LoadParser,priority:jh.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return cm(r,P6e)||hm(r,E6e)},async load(r,e,n){var o;let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await $B.isImageBitmapSupported()?i=await $B.loadImageBitmap(r,e):i=await A6e(r,e):i=await new Promise(a=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=r,i.complete?a(i):i.onload=()=>{a(i)}});const s=new am({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:((o=e.data)==null?void 0:o.resolution)||AA(r),...e.data});return RA(s,n,r)},unload(r){r.destroy(!0)}},dG=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],R6e=dG.map(r=>`video/${r.substring(1)}`);function I6e(r,e,n){n===void 0&&!e.startsWith("data:")?r.crossOrigin=N6e(e):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")}function D6e(r){return new Promise((e,n)=>{r.addEventListener("canplaythrough",i),r.addEventListener("error",s),r.load();function i(){o(),e()}function s(a){o(),n(a)}function o(){r.removeEventListener("canplaythrough",i),r.removeEventListener("error",s)}})}function N6e(r,e=globalThis.location){if(r.startsWith("data:"))return"";e||(e=globalThis.location);const n=new URL(r,document.baseURI);return n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}const $6e={name:"loadVideo",extension:{type:Yt.LoadParser,name:"loadVideo"},test(r){const e=cm(r,R6e),n=hm(r,dG);return e||n},async load(r,e,n){var h,d;const i={...iO.defaultOptions,resolution:((h=e.data)==null?void 0:h.resolution)||AA(r),alphaMode:((d=e.data)==null?void 0:d.alphaMode)||await pH(),...e.data},s=document.createElement("video"),o={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(o).forEach(f=>{const p=o[f];p!==void 0&&s.setAttribute(f,p)}),i.muted===!0&&(s.muted=!0),I6e(s,r,i.crossorigin);const a=document.createElement("source");let c;if(r.startsWith("data:"))c=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const f=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();c=iO.MIME_TYPES[f]||`video/${f}`}return a.src=r,c&&(a.type=c),new Promise(f=>{const p=async()=>{const g=new iO({...i,resource:s});s.removeEventListener("canplay",p),e.data.preload&&await D6e(s),f(RA(g,n,r))};s.addEventListener("canplay",p),s.appendChild(a)})},unload(r){r.destroy(!0)}},fG={extension:{type:Yt.ResolveParser,name:"resolveTexture"},test:uG.test,parse:r=>{var e;return{resolution:parseFloat(((e=lm.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:r.split(".").pop(),src:r}}},V6e={extension:{type:Yt.ResolveParser,priority:-2,name:"resolveJson"},test:r=>lm.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:fG.parse};class L6e{constructor(){this._detections=[],this._initialized=!1,this.resolver=new lm,this.loader=new o6e,this.cache=zn,this._backgroundLoader=new ZIe(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var o,a;if(this._initialized){hr("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let c=e.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const n=((o=e.texturePreference)==null?void 0:o.resolution)??1,i=typeof n=="number"?[n]:n,s=await this._detectFormats({preferredFormats:(a=e.texturePreference)==null?void 0:a.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,n){this._initialized||await this.init();const i=uw(e),s=Sa(e).map(c=>{if(typeof c!="string"){const h=this.resolver.getAlias(c);return h.some(d=>!this.resolver.hasKey(d))&&this.add(c),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),o=this.resolver.resolve(s),a=await this._mapLoadToResolve(o,n);return i?a[s[0]]:a}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const s=this.resolver.resolveBundle(e),o={},a=Object.keys(s);let c=0,h=0;const d=()=>{n==null||n(++c/h)},f=a.map(p=>{const g=s[p];return h+=Object.keys(g).length,this._mapLoadToResolve(g,d).then(y=>{o[p]=y})});return await Promise.all(f),i?o[e[0]]:o}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return zn.get(e);const n={};for(let i=0;i<e.length;i++)n[i]=zn.get(e[i]);return n}async _mapLoadToResolve(e,n){const i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const s=await this.loader.load(i,n);this._backgroundLoader.active=!0;const o={};return i.forEach(a=>{const c=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),h.forEach(d=>{o[d]=c}),zn.set(h,c)}),o}async unload(e){this._initialized||await this.init();const n=Sa(e).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(n);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Sa(e);const n=this.resolver.resolveBundle(e),i=Object.keys(n).map(s=>this._unloadFromResolved(n[s]));await Promise.all(i)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(i=>{zn.remove(i.src)}),await this.loader.unload(n)}async _detectFormats(e){let n=[];e.preferredFormats&&(n=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?n=await i.add(n):e.skipDetections||(n=await i.remove(n));return n=n.filter((i,s)=>n.indexOf(i)===s),n}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(i=>i in e).forEach(i=>{n.config[i]=e[i]})})}}const qu=new L6e;Es.handleByList(Yt.LoadParser,qu.loader.parsers).handleByList(Yt.ResolveParser,qu.resolver.parsers).handleByList(Yt.CacheParser,qu.cache.parsers).handleByList(Yt.DetectionParser,qu.detections);Es.add(KIe,e6e,JIe,s6e,i6e,n6e,r6e,c6e,d6e,x6e,_6e,uG,$6e,qIe,jIe,fG,V6e);const VB={loader:Yt.LoadParser,resolver:Yt.ResolveParser,cache:Yt.CacheParser,detection:Yt.DetectionParser};Es.handle(Yt.Asset,r=>{const e=r.ref;Object.entries(VB).filter(([n])=>!!e[n]).forEach(([n,i])=>Es.add(Object.assign(e[n],{extension:e[n].extension??i})))},r=>{const e=r.ref;Object.keys(VB).filter(n=>!!e[n]).forEach(n=>Es.remove(e[n]))});function LB(r,e,n,i,s,o,a,c){const h=a-n,d=c-i,f=s-n,p=o-i,g=r-n,y=e-i,b=h*h+d*d,w=h*f+d*p,x=h*g+d*y,S=f*f+p*p,_=f*g+p*y,O=1/(b*S-w*w),T=(S*x-w*_)*O,E=(b*_-w*x)*O;return T>=0&&E>=0&&T+E<1}class fw extends wA{constructor(e){e instanceof Wo&&(e={context:e});const{context:n,roundPixels:i,...s}=e||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",n?this._context=n:this._context=this._ownedContext=new Wo,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,n){return this.context[e](...n),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new fw(this._context.clone()):(this._ownedContext=null,new fw(this._context))}lineStyle(e,n,i){$i(Wi,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const s={};return e&&(s.width=e),n&&(s.color=n),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(e,n){$i(Wi,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return e!==void 0&&(i.color=e),n!==void 0&&(i.alpha=n),this.context.fillStyle=i,this}endFill(){$i(Wi,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Wo.defaultStrokeStyle.width||e.color!==Wo.defaultStrokeStyle.color||e.alpha!==Wo.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return $i(Wi,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return $i(Wi,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return $i(Wi,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return $i(Wi,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return $i(Wi,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return $i(Wi,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const pG=class mG extends U_{constructor(...e){let n=e[0]??{};n instanceof Float32Array&&($i(Wi,"use new MeshGeometry({ positions, uvs, indices }) instead"),n={positions:n,uvs:e[1],indices:e[2]}),n={...mG.defaultOptions,...n};const i=n.positions||new Float32Array([0,0,1,0,1,1,0,1]),s=n.uvs||new Float32Array([0,0,1,0,1,1,0,1]),o=n.indices||new Uint32Array([0,1,2,0,2,3]),a=n.shrinkBuffersToFit,c=new Sh({data:i,label:"attribute-mesh-positions",shrinkToFit:a,usage:sr.VERTEX|sr.COPY_DST}),h=new Sh({data:s,label:"attribute-mesh-uvs",shrinkToFit:a,usage:sr.VERTEX|sr.COPY_DST}),d=new Sh({data:o,label:"index-mesh-buffer",shrinkToFit:a,usage:sr.INDEX|sr.COPY_DST});super({attributes:{aPosition:{buffer:c,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:h,format:"float32x2",stride:2*4,offset:0}},indexBuffer:d,topology:n.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};pG.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let B6e=pG;class U6e extends wA{constructor(...e){let n=e[0];n instanceof U_&&($i(Wi,"Mesh: use new Mesh({ geometry, shader }) instead"),n={geometry:n,shader:e[1]},e[3]&&($i(Wi,"Mesh: drawMode argument has been removed, use geometry.topology instead"),n.geometry.topology=e[3]));const{geometry:i,shader:s,texture:o,roundPixels:a,state:c,...h}=n;super({label:"Mesh",...h}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=s??null,this.texture=o??(s==null?void 0:s.texture)??Vi.WHITE,this.state=c??M5e.for2d(),this._geometry=i,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=a??!1}get material(){return $i(Wi,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){var n;this._geometry!==e&&((n=this._geometry)==null||n.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=Vi.EMPTY);const n=this._texture;n!==e&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof B6e?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){const{x:n,y:i}=e;if(!this.bounds.containsPoint(n,i))return!1;const s=this.geometry.getBuffer("aPosition").data,o=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const a=this.geometry.getIndex().data,c=a.length;for(let h=0;h+2<c;h+=o){const d=a[h]*2,f=a[h+1]*2,p=a[h+2]*2;if(LB(n,i,s[d],s[d+1],s[f],s[f+1],s[p],s[p+1]))return!0}}else{const a=s.length/2;for(let c=0;c+2<a;c+=o){const h=c*2,d=(c+1)*2,f=(c+2)*2;if(LB(n,i,s[h],s[h+1],s[d],s[d+1],s[f],s[f+1]))return!0}}return!1}destroy(e){var i;if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}(i=this._geometry)==null||i.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}Es.add(l4e,c4e);const{abs:f0,cos:Ul,sin:Af,acos:F6e,atan2:p0,sqrt:eh,pow:Fo}=Math;function m0(r){return r<0?-Fo(-r,1/3):Fo(r,1/3)}const gG=Math.PI,kx=2*gG,th=gG/2,z6e=1e-6,Bk=Number.MAX_SAFE_INTEGER||9007199254740991,Uk=Number.MIN_SAFE_INTEGER||-9007199254740991,X6e={x:0,y:0,z:0},it={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(r,e){const n=e(r);let i=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(i+=n.z*n.z),eh(i)},compute:function(r,e,n){if(r===0)return e[0].t=0,e[0];const i=e.length-1;if(r===1)return e[i].t=1,e[i];const s=1-r;let o=e;if(i===0)return e[0].t=r,e[0];if(i===1){const c={x:s*o[0].x+r*o[1].x,y:s*o[0].y+r*o[1].y,t:r};return n&&(c.z=s*o[0].z+r*o[1].z),c}if(i<4){let c=s*s,h=r*r,d,f,p,g=0;i===2?(o=[o[0],o[1],o[2],X6e],d=c,f=s*r*2,p=h):i===3&&(d=c*s,f=c*r*3,p=s*h*3,g=r*h);const y={x:d*o[0].x+f*o[1].x+p*o[2].x+g*o[3].x,y:d*o[0].y+f*o[1].y+p*o[2].y+g*o[3].y,t:r};return n&&(y.z=d*o[0].z+f*o[1].z+p*o[2].z+g*o[3].z),y}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let c=0;c<a.length-1;c++)a[c]={x:a[c].x+(a[c+1].x-a[c].x)*r,y:a[c].y+(a[c+1].y-a[c].y)*r},typeof a[c].z<"u"&&(a[c].z=a[c].z+(a[c+1].z-a[c].z)*r);a.splice(a.length-1,1)}return a[0].t=r,a[0]},computeWithRatios:function(r,e,n,i){const s=1-r,o=n,a=e;let c=o[0],h=o[1],d=o[2],f=o[3],p;if(c*=s,h*=r,a.length===2)return p=c+h,{x:(c*a[0].x+h*a[1].x)/p,y:(c*a[0].y+h*a[1].y)/p,z:i?(c*a[0].z+h*a[1].z)/p:!1,t:r};if(c*=s,h*=2*s,d*=r*r,a.length===3)return p=c+h+d,{x:(c*a[0].x+h*a[1].x+d*a[2].x)/p,y:(c*a[0].y+h*a[1].y+d*a[2].y)/p,z:i?(c*a[0].z+h*a[1].z+d*a[2].z)/p:!1,t:r};if(c*=s,h*=1.5*s,d*=3*s,f*=r*r*r,a.length===4)return p=c+h+d+f,{x:(c*a[0].x+h*a[1].x+d*a[2].x+f*a[3].x)/p,y:(c*a[0].y+h*a[1].y+d*a[2].y+f*a[3].y)/p,z:i?(c*a[0].z+h*a[1].z+d*a[2].z+f*a[3].z)/p:!1,t:r}},derive:function(r,e){const n=[];for(let i=r,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let c=0,h;c<o;c++)h={x:o*(i[c+1].x-i[c].x),y:o*(i[c+1].y-i[c].y)},e&&(h.z=o*(i[c+1].z-i[c].z)),a.push(h);n.push(a),i=a}return n},between:function(r,e,n){return e<=r&&r<=n||it.approximately(r,e)||it.approximately(r,n)},approximately:function(r,e,n){return f0(r-e)<=(n||z6e)},length:function(r){const n=it.Tvalues.length;let i=0;for(let s=0,o;s<n;s++)o=.5*it.Tvalues[s]+.5,i+=it.Cvalues[s]*it.arcfn(o,r);return .5*i},map:function(r,e,n,i,s){const o=n-e,a=s-i,c=r-e,h=c/o;return i+a*h},lerp:function(r,e,n){const i={x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)};return e.z!==void 0&&n.z!==void 0&&(i.z=e.z+r*(n.z-e.z)),i},pointToString:function(r){let e=r.x+"/"+r.y;return typeof r.z<"u"&&(e+="/"+r.z),e},pointsToString:function(r){return"["+r.map(it.pointToString).join(", ")+"]"},copy:function(r){return JSON.parse(JSON.stringify(r))},angle:function(r,e,n){const i=e.x-r.x,s=e.y-r.y,o=n.x-r.x,a=n.y-r.y,c=i*a-s*o,h=i*o+s*a;return p0(c,h)},round:function(r,e){const n=""+r,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+e))},dist:function(r,e){const n=r.x-e.x,i=r.y-e.y;return eh(n*n+i*i)},closest:function(r,e){let n=Fo(2,63),i,s;return r.forEach(function(o,a){s=it.dist(e,o),s<n&&(n=s,i=a)}),{mdist:n,mpos:i}},abcratio:function(r,e){if(e!==2&&e!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;const n=Fo(r,e)+Fo(1-r,e),i=n-1;return f0(i/n)},projectionratio:function(r,e){if(e!==2&&e!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;const n=Fo(1-r,e),i=Fo(r,e)+n;return n/i},lli8:function(r,e,n,i,s,o,a,c){const h=(r*i-e*n)*(s-a)-(r-n)*(s*c-o*a),d=(r*i-e*n)*(o-c)-(e-i)*(s*c-o*a),f=(r-n)*(o-c)-(e-i)*(s-a);return f==0?!1:{x:h/f,y:d/f}},lli4:function(r,e,n,i){const s=r.x,o=r.y,a=e.x,c=e.y,h=n.x,d=n.y,f=i.x,p=i.y;return it.lli8(s,o,a,c,h,d,f,p)},lli:function(r,e){return it.lli4(r,r.c,e,e.c)},makeline:function(r,e){return new En(r.x,r.y,(r.x+e.x)/2,(r.y+e.y)/2,e.x,e.y)},findbbox:function(r){let e=Bk,n=Bk,i=Uk,s=Uk;return r.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),n>a.y.min&&(n=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(r,e,n,i,s){if(!it.bboxoverlap(e,i))return[];const o=[],a=[r.startcap,r.forward,r.back,r.endcap],c=[n.startcap,n.forward,n.back,n.endcap];return a.forEach(function(h){h.virtual||c.forEach(function(d){if(d.virtual)return;const f=h.intersects(d,s);f.length>0&&(f.c1=h,f.c2=d,f.s1=r,f.s2=n,o.push(f))})}),o},makeshape:function(r,e,n){const i=e.points.length,s=r.points.length,o=it.makeline(e.points[i-1],r.points[0]),a=it.makeline(r.points[s-1],e.points[0]),c={startcap:o,forward:r,back:e,endcap:a,bbox:it.findbbox([o,r,e,a])};return c.intersections=function(h){return it.shapeintersections(c,c.bbox,h,h.bbox,n)},c},getminmax:function(r,e,n){if(!n)return{min:0,max:0};let i=Bk,s=Uk,o,a;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let c=0,h=n.length;c<h;c++)o=n[c],a=r.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(r,e){const n=e.p1.x,i=e.p1.y,s=-p0(e.p2.y-i,e.p2.x-n),o=function(a){return{x:(a.x-n)*Ul(s)-(a.y-i)*Af(s),y:(a.x-n)*Af(s)+(a.y-i)*Ul(s)}};return r.map(o)},roots:function(r,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=r.length-1,i=it.align(r,e),s=function(I){return 0<=I&&I<=1};if(n===2){const I=i[0].y,A=i[1].y,D=i[2].y,M=I-2*A+D;if(M!==0){const $=-eh(A*A-I*D),L=-I+A,N=-($+L)/M,V=-(-$+L)/M;return[N,V].filter(s)}else if(A!==D&&M===0)return[(2*A-D)/(2*A-2*D)].filter(s);return[]}const o=i[0].y,a=i[1].y,c=i[2].y,h=i[3].y;let d=-o+3*a-3*c+h,f=3*o-6*a+3*c,p=-3*o+3*a,g=o;if(it.approximately(d,0)){if(it.approximately(f,0))return it.approximately(p,0)?[]:[-g/p].filter(s);const I=eh(p*p-4*f*g),A=2*f;return[(I-p)/A,(-p-I)/A].filter(s)}f/=d,p/=d,g/=d;const y=(3*p-f*f)/3,b=y/3,w=(2*f*f*f-9*f*p+27*g)/27,x=w/2,S=x*x+b*b*b;let _,O,T,E,P;if(S<0){const I=-y/3,A=I*I*I,D=eh(A),M=-w/(2*D),$=M<-1?-1:M>1?1:M,L=F6e($),N=m0(D),V=2*N;return T=V*Ul(L/3)-f/3,E=V*Ul((L+kx)/3)-f/3,P=V*Ul((L+2*kx)/3)-f/3,[T,E,P].filter(s)}else{if(S===0)return _=x<0?m0(-x):-m0(x),T=2*_-f/3,E=-_-f/3,[T,E].filter(s);{const I=eh(S);return _=m0(-x+I),O=m0(x+I),[_-O-f/3].filter(s)}}},droots:function(r){if(r.length===3){const e=r[0],n=r[1],i=r[2],s=e-2*n+i;if(s!==0){const o=-eh(n*n-e*i),a=-e+n,c=-(o+a)/s,h=-(-o+a)/s;return[c,h]}else if(n!==i&&s===0)return[(2*n-i)/(2*(n-i))];return[]}if(r.length===2){const e=r[0],n=r[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(r,e,n,i,s){let o,a,c,h,d=0,f=0;const p=it.compute(r,e),g=it.compute(r,n),y=p.x*p.x+p.y*p.y;if(i?(o=eh(Fo(p.y*g.z-g.y*p.z,2)+Fo(p.z*g.x-g.z*p.x,2)+Fo(p.x*g.y-g.x*p.y,2)),a=Fo(y+p.z*p.z,3/2)):(o=p.x*g.y-p.y*g.x,a=Fo(y,3/2)),o===0||a===0)return{k:0,r:0};if(d=o/a,f=a/o,!s){const b=it.curvature(r-.001,e,n,i,!0).k,w=it.curvature(r+.001,e,n,i,!0).k;h=(w-d+(d-b))/2,c=(f0(w-d)+f0(d-b))/2}return{k:d,r:f,dk:h,adk:c}},inflections:function(r){if(r.length<4)return[];const e=it.align(r,{p1:r[0],p2:r.slice(-1)[0]}),n=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*n+2*i+3*s-o),c=18*(3*n-i-3*s),h=18*(s-n);if(it.approximately(a,0)){if(!it.approximately(c,0)){let g=-h/c;if(0<=g&&g<=1)return[g]}return[]}const d=2*a;if(it.approximately(d,0))return[];const f=c*c-4*a*h;if(f<0)return[];const p=Math.sqrt(f);return[(p-c)/d,-(c+p)/d].filter(function(g){return 0<=g&&g<=1})},bboxoverlap:function(r,e){const n=["x","y"],i=n.length;for(let s=0,o,a,c,h;s<i;s++)if(o=n[s],a=r[o].mid,c=e[o].mid,h=(r[o].size+e[o].size)/2,f0(a-c)>=h)return!1;return!0},expandbox:function(r,e){e.x.min<r.x.min&&(r.x.min=e.x.min),e.y.min<r.y.min&&(r.y.min=e.y.min),e.z&&e.z.min<r.z.min&&(r.z.min=e.z.min),e.x.max>r.x.max&&(r.x.max=e.x.max),e.y.max>r.y.max&&(r.y.max=e.y.max),e.z&&e.z.max>r.z.max&&(r.z.max=e.z.max),r.x.mid=(r.x.min+r.x.max)/2,r.y.mid=(r.y.min+r.y.max)/2,r.z&&(r.z.mid=(r.z.min+r.z.max)/2),r.x.size=r.x.max-r.x.min,r.y.size=r.y.max-r.y.min,r.z&&(r.z.size=r.z.max-r.z.min)},pairiteration:function(r,e,n){const i=r.bbox(),s=e.bbox(),o=1e5,a=n||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(r._t1+r._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let c=r.split(.5),h=e.split(.5),d=[{left:c.left,right:h.left},{left:c.left,right:h.right},{left:c.right,right:h.right},{left:c.right,right:h.left}];d=d.filter(function(p){return it.bboxoverlap(p.left.bbox(),p.right.bbox())});let f=[];return d.length===0||(d.forEach(function(p){f=f.concat(it.pairiteration(p.left,p.right,a))}),f=f.filter(function(p,g){return f.indexOf(p)===g})),f},getccenter:function(r,e,n){const i=e.x-r.x,s=e.y-r.y,o=n.x-e.x,a=n.y-e.y,c=i*Ul(th)-s*Af(th),h=i*Af(th)+s*Ul(th),d=o*Ul(th)-a*Af(th),f=o*Af(th)+a*Ul(th),p=(r.x+e.x)/2,g=(r.y+e.y)/2,y=(e.x+n.x)/2,b=(e.y+n.y)/2,w=p+c,x=g+h,S=y+d,_=b+f,O=it.lli8(p,g,w,x,y,b,S,_),T=it.dist(O,r);let E=p0(r.y-O.y,r.x-O.x),P=p0(e.y-O.y,e.x-O.x),I=p0(n.y-O.y,n.x-O.x),A;return E<I?((E>P||P>I)&&(E+=kx),E>I&&(A=I,I=E,E=A)):I<P&&P<E?(A=I,I=E,E=A):I+=kx,O.s=E,O.e=I,O.r=T,O},numberSort:function(r,e){return r-e}};class J0{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return it.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var n=e[0].bbox(),i=1;i<e.length;i++)it.expandbox(n,e[i].bbox());return n}offset(e){const n=[];return this.curves.forEach(function(i){n.push(...i.offset(e))}),new J0(n)}}const{abs:g0,min:BB,max:UB,cos:W6e,sin:Q6e,acos:H6e,sqrt:y0}=Math,G6e=Math.PI;class En{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof n[0]=="object"){i=n.length;const y=[];n.forEach(function(b){["x","y","z"].forEach(function(w){typeof b[w]<"u"&&y.push(b[w])})}),n=y}let s=!1;const o=n.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",c=this.points=[];for(let y=0,b=a?3:2;y<o;y+=b){var h={x:n[y],y:n[y+1]};a&&(h.z=n[y+2]),c.push(h)}const d=this.order=c.length-1,f=this.dims=["x","y"];a&&f.push("z"),this.dimlen=f.length;const p=it.align(c,{p1:c[0],p2:c[d]}),g=it.dist(c[0],c[d]);this._linear=p.reduce((y,b)=>y+g0(b.y),0)<g/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,i,s){if(typeof s>"u"&&(s=.5),s===0)return new En(n,n,i);if(s===1)return new En(e,n,n);const o=En.getABC(2,e,n,i,s);return new En(e,o.A,i)}static cubicFromPoints(e,n,i,s,o){typeof s>"u"&&(s=.5);const a=En.getABC(3,e,n,i,s);typeof o>"u"&&(o=it.dist(n,a.C));const c=o*(1-s)/s,h=it.dist(e,i),d=(i.x-e.x)/h,f=(i.y-e.y)/h,p=o*d,g=o*f,y=c*d,b=c*f,w={x:n.x-p,y:n.y-g},x={x:n.x+y,y:n.y+b},S=a.A,_={x:S.x+(w.x-S.x)/(1-s),y:S.y+(w.y-S.y)/(1-s)},O={x:S.x+(x.x-S.x)/s,y:S.y+(x.y-S.y)/s},T={x:e.x+(_.x-e.x)/s,y:e.y+(_.y-e.y)/s},E={x:i.x+(O.x-i.x)/(1-s),y:i.y+(O.y-i.y)/(1-s)};return new En(e,T,E,i)}static getUtils(){return it}getUtils(){return En.getUtils()}static get PolyBezier(){return J0}valueOf(){return this.toString()}toString(){return it.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,n=e[0].x,i=e[0].y,s=["M",n,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=it.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,n=it.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return it.length(this.derivative.bind(this))}static getABC(e=2,n,i,s,o=.5){const a=it.projectionratio(o,e),c=1-a,h={x:a*n.x+c*s.x,y:a*n.y+c*s.y},d=it.abcratio(o,e);return{A:{x:i.x+(i.x-h.x)/d,y:i.y+(i.y-h.y)/d},B:i,C:h,S:n,E:s}}getABC(e,n){n=n||this.get(e);let i=this.points[0],s=this.points[this.order];return En.getABC(this.order,i,n,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,i,s;n<e;n++)s=n/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),s=[];for(let o=0,a,c=0;o<i.length;o++)a=i[o],it.dist(a,e)<n&&(s.push(a),c+=o/i.length);return s.length?t/=s.length:!1}project(e){const n=this.getLUT(),i=n.length-1,s=it.closest(n,e),o=s.mpos,a=(o-1)/i,c=(o+1)/i,h=.1/i;let d=s.mdist,f=a,p=f,g;d+=1;for(let y;f<c+h;f+=h)g=this.compute(f),y=it.dist(e,g),y<d&&(d=y,p=f);return p=p<0?0:p>1?1:p,g=this.compute(p),g.t=p,g.d=d,g}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?it.computeWithRatios(e,this.points,this.ratios,this._3d):it.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,n=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],n[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return n[i]=e[i-1],new En(n)}derivative(e){return it.compute(e,this.dpoints[0],this._3d)}dderivative(e){return it.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new En(it.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return it.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return it.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const n=this.derivative(e),i=y0(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/i,y:n.x/i}}__normal3(e){const n=this.derivative(e),i=this.derivative(e+.01),s=y0(n.x*n.x+n.y*n.y+n.z*n.z),o=y0(i.x*i.x+i.y*i.y+i.z*i.z);n.x/=s,n.y/=s,n.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*n.z-i.z*n.y,y:i.z*n.x-i.x*n.z,z:i.x*n.y-i.y*n.x},c=y0(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=c,a.y/=c,a.z/=c;const h=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:h[0]*n.x+h[1]*n.y+h[2]*n.z,y:h[3]*n.x+h[4]*n.y+h[5]*n.z,z:h[6]*n.x+h[7]*n.y+h[8]*n.z}}hull(e){let n=this.points,i=[],s=[],o=0;for(s[o++]=n[0],s[o++]=n[1],s[o++]=n[2],this.order===3&&(s[o++]=n[3]);n.length>1;){i=[];for(let a=0,c,h=n.length-1;a<h;a++)c=it.lerp(e,n[a],n[a+1]),s[o++]=c,i.push(c);n=i}return s}split(e,n){if(e===0&&n)return this.split(n).left;if(n===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new En([i[0],i[3],i[5]]):new En([i[0],i[4],i[7],i[9]]),right:this.order===2?new En([i[5],i[4],i[2]]):new En([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=it.map(0,0,1,this._t1,this._t2),s.left._t2=it.map(e,0,1,this._t1,this._t2),s.right._t1=it.map(e,0,1,this._t1,this._t2),s.right._t2=it.map(1,0,1,this._t1,this._t2),n?(n=it.map(n,e,1,0,1),s.right.split(n).left):s}extrema(){const e={};let n=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=it.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(it.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),n=n.concat(e[i].sort(it.numberSort))}).bind(this)),e.values=n.sort(it.numberSort).filter(function(i,s){return n.indexOf(i)===s}),e}bbox(){const e=this.extrema(),n={};return this.dims.forEach((function(i){n[i]=it.getminmax(this,i,e[i])}).bind(this)),n}overlaps(e){const n=this.bbox(),i=e.bbox();return it.bboxoverlap(n,i)}offset(e,n){if(typeof n<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*n,y:i.y+s.y*n};return this._3d&&(o.z=i.z+s.z*n),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new En(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=it.angle(this.points[0],this.points[3],this.points[1]),o=it.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),n=this.normal(1);let i=e.x*n.x+e.y*n.y;return this._3d&&(i+=e.z*n.z),g0(H6e(i))<G6e/3}reduce(){let e,n=0,i=0,s=.01,o,a=[],c=[],h=this.extrema().values;for(h.indexOf(0)===-1&&(h=[0].concat(h)),h.indexOf(1)===-1&&h.push(1),n=h[0],e=1;e<h.length;e++)i=h[e],o=this.split(n,i),o._t1=n,o._t2=i,a.push(o),n=i;return a.forEach(function(d){for(n=0,i=0;i<=1;)for(i=n+s;i<=1+s;i+=s)if(o=d.split(n,i),!o.simple()){if(i-=s,g0(n-i)<s)return[];o=d.split(n,i),o._t1=it.map(n,0,1,d._t1,d._t2),o._t2=it.map(i,0,1,d._t1,d._t2),c.push(o),n=i;break}n<1&&(o=d.split(n,1),o._t1=it.map(n,0,1,d._t1,d._t2),o._t2=d._t2,c.push(o))}),c}translate(e,n,i){i=typeof i=="number"?i:n;const s=this.order;let o=this.points.map((a,c)=>(1-c/s)*n+c/s*i);return new En(this.points.map((a,c)=>({x:a.x+e.x*o[c],y:a.y+e.y*o[c]})))}scale(e){const n=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&n===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,c=i?i(1):e,h=[this.offset(0,10),this.offset(1,10)],d=[],f=it.lli4(h[0],h[0].c,h[1],h[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(p){const g=d[p*n]=it.copy(o[p*n]);g.x+=(p?c:a)*h[p].n.x,g.y+=(p?c:a)*h[p].n.y}),i?([0,1].forEach(function(p){if(!(n===2&&p)){var g=o[p+1],y={x:g.x-f.x,y:g.y-f.y},b=i?i((p+1)/n):e;i&&!s&&(b=-b);var w=y0(y.x*y.x+y.y*y.y);y.x/=w,y.y/=w,d[p+1]={x:g.x+b*y.x,y:g.y+b*y.y}}}),new En(d)):([0,1].forEach(p=>{if(n===2&&p)return;const g=d[p*n],y=this.derivative(p),b={x:g.x+y.x,y:g.y+y.y};d[p+1]=it.lli4(g,b,f,o[p+1])}),new En(d))}outline(e,n,i,s){if(n=n===void 0?e:n,this._linear){const E=this.normal(0),P=this.points[0],I=this.points[this.points.length-1];let A,D,M;i===void 0&&(i=e,s=n),A={x:P.x+E.x*e,y:P.y+E.y*e},M={x:I.x+E.x*i,y:I.y+E.y*i},D={x:(A.x+M.x)/2,y:(A.y+M.y)/2};const $=[A,D,M];A={x:P.x-E.x*n,y:P.y-E.y*n},M={x:I.x-E.x*s,y:I.y-E.y*s},D={x:(A.x+M.x)/2,y:(A.y+M.y)/2};const L=[M,D,A],N=it.makeline(L[2],$[0]),V=it.makeline($[2],L[0]),U=[N,new En($),V,new En(L)];return new J0(U)}const o=this.reduce(),a=o.length,c=[];let h=[],d,f=0,p=this.length();const g=typeof i<"u"&&typeof s<"u";function y(E,P,I,A,D){return function(M){const $=A/I,L=(A+D)/I,N=P-E;return it.map(M,0,1,E+$*N,E+L*N)}}o.forEach(function(E){const P=E.length();g?(c.push(E.scale(y(e,i,p,f,P))),h.push(E.scale(y(-n,-s,p,f,P)))):(c.push(E.scale(e)),h.push(E.scale(-n))),f+=P}),h=h.map(function(E){return d=E.points,d[3]?E.points=[d[3],d[2],d[1],d[0]]:E.points=[d[2],d[1],d[0]],E}).reverse();const b=c[0].points[0],w=c[a-1].points[c[a-1].points.length-1],x=h[a-1].points[h[a-1].points.length-1],S=h[0].points[0],_=it.makeline(x,b),O=it.makeline(w,S),T=[_].concat(c).concat([O]).concat(h);return new J0(T)}outlineshapes(e,n,i){n=n||e;const s=this.outline(e,n).curves,o=[];for(let a=1,c=s.length;a<c/2;a++){const h=it.makeshape(s[a],s[c-a],i);h.startcap.virtual=a>1,h.endcap.virtual=a<c/2-1,o.push(h)}return o}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof En&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){const n=BB(e.p1.x,e.p2.x),i=BB(e.p1.y,e.p2.y),s=UB(e.p1.x,e.p2.x),o=UB(e.p1.y,e.p2.y);return it.roots(this.points,e).filter(a=>{var c=this.get(a);return it.between(c.x,n,s)&&it.between(c.y,i,o)})}selfintersects(e){const n=this.reduce(),i=n.length-2,s=[];for(let o=0,a,c,h;o<i;o++)c=n.slice(o,o+1),h=n.slice(o+2),a=this.curveintersects(c,h,e),s.push(...a);return s}curveintersects(e,n,i){const s=[];e.forEach(function(a){n.forEach(function(c){a.overlaps(c)&&s.push({left:a,right:c})})});let o=[];return s.forEach(function(a){const c=it.pairiteration(a.left,a.right,i);c.length>0&&(o=o.concat(c))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,i,s){const o=(s-i)/4,a=this.get(i+o),c=this.get(s-o),h=it.dist(e,n),d=it.dist(e,a),f=it.dist(e,c);return g0(d-h)+g0(f-h)}_iterate(e,n){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),c,h,d,f,p=!1,g=!1,y,b=s,w=1;do if(g=p,f=d,b=(i+s)/2,c=this.get(b),h=this.get(s),d=it.getccenter(a,c,h),d.interval={start:i,end:s},p=this._error(d,a,i,s)<=e,y=g&&!p,y||(w=s),p){if(s>=1){if(d.interval.end=w=1,f=d,s>1){let S={x:d.x+d.r*W6e(d.e),y:d.y+d.r*Q6e(d.e)};d.e+=it.angle({x:d.x,y:d.y},S,this.get(1))}break}s=s+(s-i)/2}else s=b;while(!y&&o++<100);if(o>=100)break;f=f||d,n.push(f),i=w}while(s<1);return n}}const Y6e=`
in vec2 aPosition;
in vec3 aColor;
in vec2 aUV;

out vec3 vColor;
out vec2 vUV;

uniform mat3 uProjectionMatrix;
uniform mat3 uWorldTransformMatrix;

uniform mat3 uTransformMatrix;


void main() {

    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;
    gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);

    vColor = aColor;
    vUV = aUV;
}
`,j6e=`
in vec3 vColor;
in vec2 vUV;

uniform sampler2D uTexture;

void main() {
    gl_FragColor = texture2D(uTexture, vUV) * vec4(vColor, 1.0);
}
`,q6e={__name:"CurveRopePixi",async setup(r){let e,n;const i=lt(null);let s=null,o=-1,a=null,c=null;const h=[([e,n]=Mx(()=>qu.load("./img/rope1.png")),e=await e,n(),e),([e,n]=Mx(()=>qu.load("./img/rope2.png")),e=await e,n(),e),([e,n]=Mx(()=>qu.load("./img/rope3.png")),e=await e,n(),e)];let d=1;function f(){return a.children.map(x=>new Kn(x.x,x.y))}function p(x){let S=h[d],_=[],O=[],T=[];const E=new En(...x),P=E.getLUT(50);for(let D=0;D<P.length&&D!=P.length-1;D++){const M=P[D];E.derivative(M.t);const $=E.normal(M.t);$.x*=20,$.y*=20;const L=P[D+1];E.derivative(L.t);const N=E.normal(L.t);N.x*=20,N.y*=20;let V=[new Kn(M.x+$.x,M.y+$.y),new Kn(M.x-$.x,M.y-$.y),new Kn(L.x-N.x,L.y-N.y),new Kn(L.x+N.x,L.y+N.y)];_.push(V[0].x,V[0].y),_.push(V[1].x,V[1].y),_.push(V[2].x,V[2].y),_.push(V[0].x,V[0].y),_.push(V[2].x,V[2].y),_.push(V[3].x,V[3].y),O.push(1,1,1),O.push(1,1,1),O.push(1,1,1),O.push(1,1,1),O.push(1,1,1),O.push(1,1,1),T.push(0,0),T.push(1,0),T.push(1,1),T.push(0,0),T.push(1,1),T.push(0,1)}const I=new U_({attributes:{aPosition:_,aColor:O,aUV:T}}),A=N_.from({gl:{vertex:Y6e,fragment:j6e},resources:{uTexture:S.source}});return c=new U6e({geometry:I,shader:A}),c}function g(){let x=f();c&&(s.stage.removeChild(c),c=null),c=p(x),s.stage.addChild(c);for(let S=0;S<x.length;S++){let _=a.children[S];_.clear(),_.circle(0,0,_.hitArea.radius),_.fill(44469),S===o&&_.stroke({width:3,color:3751494})}}function y(x){const S=x.data.global;for(let _=0;_<a.children.length;_++){const O=a.children[_];let T=O.toLocal(S);if(T.x*T.x+T.y*T.y<O.hitArea.radius*O.hitArea.radius){o=_;break}}g()}function b(x){o=-1,g()}function w(x){if(o>=0){const{x:S,y:_}=x.data.global;let O=a.toLocal({x:S,y:_});a.children[o].position.set(O.x,O.y),g()}}return Jn(async()=>{s=new LH,await s.init({background:"#eeeeee",resizeTo:window}),i.value.appendChild(s.canvas);const x={x:s.screen.width/2,y:s.screen.height/2};s.stage.eventMode="static",s.stage.hitArea=s.screen,s.stage.on("pointerupoutside",b),s.stage.on("pointerdown",y),s.stage.on("pointerup",b),s.stage.on("pointermove",w);{a=new Yr,s.stage.addChild(a);for(let _=0;_<4;_++){let O=new fw;a.addChild(O),O.hitArea=new B_(0,0,30)}let S=a.children.slice(a.children.length-4);S[0].position.set(x.x,x.y+300),S[1].position.set(x.x-300,x.y-100),S[2].position.set(x.x+300,x.y+100),S[3].position.set(x.x,x.y-300),g()}document.addEventListener("keydown",S=>{S.key>=1&&S.key<=9&&h[S.key-1]&&(d=S.key-1,g())})}),(x,S)=>(ci(),ln("div",{ref_key:"rootRef",ref:i,style:{width:"100%",height:"100%"}},null,512))}},Z6e={key:0},K6e={key:1},J6e={__name:"App",setup(r){const e=[{id:"TankMain",title:"坦克大战",comp:sCe},{id:"KonvaMain",title:"Konva示例",comp:o2e},{id:"CoinKnight",title:"金币骑士",comp:i0,link:"CoinKnight/index.html"},{id:"FarmMine",title:"田园扫雷",comp:i0,link:"FarmMine/index.html"},{id:"jigsaw",title:"拼图游戏",comp:i0,link:"jigsaw/index.html"},{id:"tetris",title:"俄罗斯方块",comp:i0,link:"tetris/index.html"},{id:"heart",title:"跳动的爱心",comp:i0,link:"webui/heart.html"},{id:"KonvaStageTest",title:"KonvaStageTest",comp:p2e},{id:"GridSquare",title:"矩形网格",comp:l2e},{id:"GridParallelogramH",title:"横向平行四边形网格",comp:h2e},{id:"GridParallelogramV",title:"纵向平行四边形网格",comp:d2e},{id:"TrigoCalc",title:"三角函数计算器",comp:g2e},{id:"ShaderFragBase",title:"Shader-函数入门",comp:FAe},{id:"ShaderImageBase",title:"Shader-图像入门",comp:QAe},{id:"d-puzzle",title:"d-拼图演示",comp:sk,link:"video/puzzle.mp4"},{id:"d-ice",title:"d-冰块演示",comp:sk,link:"video/ice.mp4"},{id:"d-door",title:"d-传送门",comp:sk,link:"video/door.mp4"},{id:"BallGame",title:"小球碰撞游戏",comp:KAe},{id:"CurveRope",title:"曲线绳子(Three)",comp:s4e},{id:"CurveRopePixi",title:"曲线绳子(Pixi)",comp:q6e}],n=lt(window.location.hash.slice(1));window.addEventListener("hashchange",()=>{n.value=window.location.hash.slice(1),document.title="Project:"+n.value});const i=vn(()=>e.find(o=>o.id===n.value)),s=vn(()=>{var o;return(o=i.value)==null?void 0:o.comp});return(o,a)=>{const c=Rt("GridItem"),h=Rt("Grid");return s.value?(ci(),ln("div",Z6e,[(ci(),Wr(O8,null,{default:et(()=>[i.value.link?(ci(),Wr(Qk(s.value),{key:0,link:i.value.link},null,8,["link"])):(ci(),Wr(Qk(s.value),{key:1}))]),_:1}))])):(ci(),ln("div",K6e,[Ie(h,{col:5},{default:et(()=>[(ci(),ln(dn,null,kh(e,d=>Ie(c,null,{default:et(()=>[Ie(rue,{routeData:d},null,8,["routeData"])]),_:2},1024)),64))]),_:1})]))}}};var TE={exports:{}};(function(r,e){(function(n,i){i(e,X7)})(sp,function(n,i){const s=typeof window<"u",o=function(){return s&&document.addEventListener?function(l,u,m,k=!1){l&&u&&m&&l.addEventListener(u,m,k)}:function(l,u,m){l&&u&&m&&l.attachEvent("on"+u,m)}}(),a=function(){return s&&document.removeEventListener?function(l,u,m,k=!1){l&&u&&l.removeEventListener(u,m,k)}:function(l,u,m){l&&u&&l.detachEvent("on"+u,m)}}();var c=(l,u)=>{const m=l.__vccOpts||l;for(const[k,C]of u)m[k]=C;return m};const h="ivu-affix";function d(l,u){const m=u?"pageYOffset":"pageXOffset",k=u?"scrollTop":"scrollLeft";let C=l[m];return s&&typeof C!="number"&&(C=window.document.documentElement[k]),C}function f(l){if(!s)return;const u=l.getBoundingClientRect(),m=d(window,!0),k=d(window),C=window.document.body,v=C.clientTop||0,R=C.clientLeft||0;return{top:u.top+m-v,left:u.left+k-R}}const p={name:"Affix",emits:["on-change"],props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},useCapture:{type:Boolean,default:!1}},data(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType(){let l="top";return this.offsetBottom>=0&&(l="bottom"),l},classes(){return[{[`${h}`]:this.affix}]}},mounted(){o(window,"scroll",this.handleScroll,this.useCapture),o(window,"resize",this.handleScroll,this.useCapture),i.nextTick(()=>{this.handleScroll()})},beforeUnmount(){a(window,"scroll",this.handleScroll,this.useCapture),a(window,"resize",this.handleScroll,this.useCapture)},methods:{handleScroll(){if(!s)return;const l=this.affix,u=d(window,!0),m=f(this.$el),k=window.innerHeight,C=this.$el.getElementsByTagName("div")[0].offsetHeight;m.top-this.offsetTop<u&&this.offsetType=="top"&&!l?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${m.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):m.top-this.offsetTop>u&&this.offsetType=="top"&&l&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),m.top+this.offsetBottom+C>u+k&&this.offsetType=="bottom"&&!l?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${m.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):m.top+this.offsetBottom+C<u+k&&this.offsetType=="bottom"&&l&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};function g(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",null,[i.createElementVNode("div",{ref:"point",class:i.normalizeClass(v.classes),style:i.normalizeStyle(C.styles)},[i.renderSlot(l.$slots,"default")],6),i.withDirectives(i.createElementVNode("div",{style:i.normalizeStyle(C.slotStyle)},null,4),[[i.vShow,C.slot]])])}var y=c(p,[["render",g]]);const b="ivu-icon",w={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return[`${b}`,{[`${b}-${this.type}`]:this.type!=="",[`${this.custom}`]:this.custom!==""}]},styles(){let l={};return this.size&&(l["font-size"]=`${this.size}px`),this.color&&(l.color=this.color),l}}};function x(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("i",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.styles)},null,6)}var S=c(w,[["render",x]]);function _(l,u){for(let m=0;m<u.length;m++)if(l===u[m])return!0;return!1}let O;function T(l){if(s&&O===void 0){const u=document.createElement("div");u.style.width="100%",u.style.height="200px";const m=document.createElement("div"),k=m.style;k.position="absolute",k.top=0,k.left=0,k.pointerEvents="none",k.visibility="hidden",k.width="200px",k.height="150px",k.overflow="hidden",m.appendChild(u),document.body.appendChild(m);const C=u.offsetWidth;m.style.overflow="scroll";let v=u.offsetWidth;C===v&&(v=m.clientWidth),document.body.removeChild(m),O=C-v}return O}const E=s&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||!1,P=/([\:\-\_]+(.))/g,I=/^moz([A-Z])/;function A(l){return l.replace(P,function(u,m,k,C){return C?k.toUpperCase():k}).replace(I,"Moz$1")}function D(l,u){if(s){if(!l||!u)return null;u=A(u),u==="float"&&(u="cssFloat");try{const m=document.defaultView.getComputedStyle(l,"");return l.style[u]||m?m[u]:null}catch{return l.style[u]}}}function M(l){return l.toString()[0].toUpperCase()+l.toString().slice(1)}function $(l){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(l)]}function L(l){const u=$(l);let m;if(u==="array")m=[];else if(u==="object")m={};else return l;if(u==="array")for(let k=0;k<l.length;k++)m.push(L(l[k]));else if(u==="object")for(let k in l)m[k]=L(l[k]);return m}function N(l,u=0,m,k=500,C){if(!s)return;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(G){return window.setTimeout(G,1e3/60)});const v=Math.abs(u-m),R=Math.ceil(v/k*50);function B(G,W,j){if(G===W){C&&C();return}let ce=G+j>W?W:G+j;G>W&&(ce=G-j<W?W:G-j),l===window?window.scrollTo(ce,ce):l.scrollTop=ce,window.requestAnimationFrame(()=>B(ce,W,j))}B(u,m,R)}function V(l,u,m){typeof u=="string"?m=[u]:m=u;let k=l.$parent,C=k.$options.name;for(;k&&(!C||m.indexOf(C)<0);)k=k.$parent,k&&(C=k.$options.name);return k}function U(l,u){let m=[];const k=l.$parent;return k?(k.$options.name===u&&m.push(k),m.concat(U(k,u))):[]}const F=function(l){return(l||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function H(l,u){if(!l||!u)return!1;if(u.indexOf(" ")!==-1)throw new Error("className should not contain space.");return l.classList?l.classList.contains(u):(" "+l.className+" ").indexOf(" "+u+" ")>-1}function K(l,u){if(!l)return;let m=l.className;const k=(u||"").split(" ");for(let C=0,v=k.length;C<v;C++){const R=k[C];!R||(l.classList?l.classList.add(R):H(l,R)||(m+=" "+R))}l.classList||(l.className=m)}function ie(l,u){if(!l||!u)return;const m=u.split(" ");let k=" "+l.className+" ";for(let C=0,v=m.length;C<v;C++){const R=m[C];!R||(l.classList?l.classList.remove(R):H(l,R)&&(k=k.replace(" "+R+" "," ")))}l.classList||(l.className=F(k))}const he={xs:"480px",sm:"576px",md:"768px",lg:"992px",xl:"1200px",xxl:"1600px"};function me(){if(!s)return;const l=u=>({media:u,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||l}const Pe=/#([^#]+)$/;async function _e(l,u="unnamed"){if(!s)return Promise.reject();try{const m=await(await fetch(l)).blob();if(!m)return Promise.reject();const k=URL.createObjectURL(m),C=document.createElement("a");return C.setAttribute("href",k),C.setAttribute("download",u),C.click(),URL.revokeObjectURL(k),Promise.resolve()}catch(m){return Promise.reject(m)}}const ue="ivu-alert",Se={name:"Alert",components:{Icon:S},props:{type:{validator(l){return _(l,["success","info","warning","error"])},default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},banner:{type:Boolean,default:!1},fade:{type:Boolean,default:!0}},data(){return{closed:!1,desc:!1}},computed:{wrapClasses(){return[`${ue}`,`${ue}-${this.type}`,{[`${ue}-with-icon`]:this.showIcon,[`${ue}-with-desc`]:this.desc,[`${ue}-with-banner`]:this.banner}]},messageClasses(){return`${ue}-message`},descClasses(){return`${ue}-desc`},closeClasses(){return`${ue}-close`},iconClasses(){return`${ue}-icon`},iconType(){let l="";switch(this.type){case"success":l="ios-checkmark-circle";break;case"info":l="ios-information-circle";break;case"warning":l="ios-alert";break;case"error":l="ios-close-circle";break}return this.desc&&(l+="-outline"),l}},methods:{close(l){this.closed=!0,this.$emit("on-close",l)}},mounted(){this.desc=this.$slots.desc!==void 0}};function ke(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createBlock(i.Transition,{name:m.fade?"fade":""},{default:i.withCtx(()=>[C.closed?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.wrapClasses)},[m.showIcon?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(v.iconClasses)},[i.renderSlot(l.$slots,"icon",{},()=>[i.createVNode(R,{type:v.iconType},null,8,["type"])])],2)):i.createCommentVNode("",!0),i.createElementVNode("span",{class:i.normalizeClass(v.messageClasses)},[i.renderSlot(l.$slots,"default")],2),i.createElementVNode("span",{class:i.normalizeClass(v.descClasses)},[i.renderSlot(l.$slots,"desc")],2),m.closable?(i.openBlock(),i.createElementBlock("a",{key:1,class:i.normalizeClass(v.closeClasses),onClick:u[0]||(u[0]=(...B)=>v.close&&v.close(...B))},[i.renderSlot(l.$slots,"close",{},()=>[i.createVNode(R,{type:"ios-close"})])],2)):i.createCommentVNode("",!0)],2))]),_:3},8,["name"])}var J=c(Se,[["render",ke]]);const q={name:"Anchor",provide(){return{AnchorInstance:this}},emits:["on-change","on-select"],props:{affix:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},offsetBottom:Number,bounds:{type:Number,default:5},container:null,showInk:{type:Boolean,default:!1},scrollOffset:{type:Number,default:0}},data(){return{prefix:"ivu-anchor",isAffixed:!1,inkTop:0,animating:!1,currentLink:"",currentId:"",scrollContainer:null,scrollElement:null,wrapperTop:0,upperFirstTitle:!0,links:[]}},computed:{wrapperComponent(){return this.affix?"Affix":"div"},wrapperStyle(){return{maxHeight:this.offsetTop?`calc(100vh - ${this.offsetTop}px)`:"100vh"}},containerIsWindow(){return this.scrollContainer===window},titlesOffsetArr(){const l=this.links.map(m=>m.link.href).map(m=>m.split("#")[1]);let u=[];return s&&l.forEach(m=>{const k=document.getElementById(m);k&&u.push({link:`#${m}`,offset:k.offsetTop-this.scrollElement.offsetTop})}),u}},methods:{handleAffixStateChange(l){this.isAffixed=this.affix&&l},handleScroll(l){if(this.upperFirstTitle=!!this.titlesOffsetArr[0]&&l.target.scrollTop<this.titlesOffsetArr[0].offset,this.animating)return;const u=s?document.documentElement.scrollTop||document.body.scrollTop||l.target.scrollTop:0;this.getCurrentScrollAtTitleId(u)},handleHashChange(){if(!s)return;const l=window.location.href,u=Pe.exec(l);!u||(this.currentLink=u[0],this.currentId=u[1])},handleScrollTo(){if(!s)return;const l=document.getElementById(this.currentId),u=document.querySelector(`a[data-href="${this.currentLink}"]`);let m=this.scrollOffset;if(u&&(m=parseFloat(u.getAttribute("data-scroll-offset"))),!l)return;const k=l.offsetTop-this.wrapperTop-m;this.animating=!0,N(this.scrollContainer,this.scrollElement.scrollTop,k,600,()=>{this.animating=!1}),this.handleSetInkTop()},handleSetInkTop(){if(!s)return;const l=document.querySelector(`a[data-href="${this.currentLink}"]`);if(!l)return;const u=l.offsetTop,m=u<0?this.offsetTop:u;this.inkTop=m},getCurrentScrollAtTitleId(l){let u=-1,m=this.titlesOffsetArr.length,k={link:"#",offset:0};for(l+=this.bounds;++u<m;){let C=this.titlesOffsetArr[u],v=this.titlesOffsetArr[u+1];if(l>=C.offset&&l<(v&&v.offset||1/0)){k=this.titlesOffsetArr[u];break}}this.currentLink=k.link,this.handleSetInkTop()},getContainer(){!s||(this.scrollContainer=this.container?typeof this.container=="string"?document.querySelector(this.container):this.container:window,this.scrollElement=this.container?this.scrollContainer:document.documentElement||document.body)},removeListener(){a(this.scrollContainer,"scroll",this.handleScroll),a(window,"hashchange",this.handleHashChange)},init(){this.handleHashChange(),i.nextTick(()=>{this.removeListener(),this.getContainer(),this.wrapperTop=this.containerIsWindow?0:this.scrollElement.offsetTop,this.handleScrollTo(),this.handleSetInkTop(),this.titlesOffsetArr[0]&&(this.upperFirstTitle=this.scrollElement.scrollTop<this.titlesOffsetArr[0].offset),o(this.scrollContainer,"scroll",this.handleScroll),o(window,"hashchange",this.handleHashChange)})},addLink(l,u){this.links.push({id:l,link:u})},removeLink(l){const u=this.links.findIndex(m=>m.id===l);this.links.splice(u,1)}},watch:{$route(){this.currentLink="",this.currentId="",this.handleHashChange(),i.nextTick(()=>{this.handleScrollTo()})},container(){this.init()},currentLink(l,u){this.$emit("on-change",l,u)}},mounted(){this.init()},beforeUnmount(){this.removeListener()}};function z(l,u,m,k,C,v){return i.openBlock(),i.createBlock(i.resolveDynamicComponent(v.wrapperComponent),{"offset-top":m.offsetTop,"offset-bottom":m.offsetBottom,onOnChange:v.handleAffixStateChange},{default:i.withCtx(()=>[i.createElementVNode("div",{class:i.normalizeClass(`${C.prefix}-wrapper`),style:i.normalizeStyle(v.wrapperStyle)},[i.createElementVNode("div",{class:i.normalizeClass(`${C.prefix}`)},[i.createElementVNode("div",{class:i.normalizeClass(`${C.prefix}-ink`)},[i.withDirectives(i.createElementVNode("span",{class:i.normalizeClass(`${C.prefix}-ink-ball`),style:i.normalizeStyle({top:`${C.inkTop}px`})},null,6),[[i.vShow,m.showInk]])],2),i.renderSlot(l.$slots,"default")],2)],6)]),_:3},40,["offset-top","offset-bottom","onOnChange"])}var X=c(q,[["render",z]]);function te(l=32){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",m=u.length;let k="";for(let C=0;C<l;C++)k+=u.charAt(Math.floor(Math.random()*m));return k}const se={name:"AnchorLink",inject:["AnchorInstance"],props:{href:String,title:String,scrollOffset:{type:Number,default(){return i.inject("AnchorInstance").scrollOffset}}},data(){return{prefix:"ivu-anchor-link",id:te(6)}},computed:{anchorLinkClasses(){return[this.prefix,this.AnchorInstance.currentLink===this.href?`${this.prefix}-active`:""]},linkTitleClasses(){return[`${this.prefix}-title`]}},methods:{goAnchor(){this.currentLink=this.href,this.AnchorInstance.handleHashChange(),this.AnchorInstance.handleScrollTo(),this.AnchorInstance.$emit("on-select",this.href),this.$router?this.$router.push(this.href,()=>{}):s&&(window.location.href=this.href)}},mounted(){this.AnchorInstance.addLink(this.id,this),i.nextTick(()=>{this.AnchorInstance.init()})},beforeUnmount(){this.AnchorInstance.removeLink(this.id)}},Q=["href","data-scroll-offset","data-href","title"];function Z(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.anchorLinkClasses)},[i.createElementVNode("a",{class:i.normalizeClass(v.linkTitleClasses),href:m.href,"data-scroll-offset":m.scrollOffset,"data-href":m.href,onClick:u[0]||(u[0]=i.withModifiers((...R)=>v.goAnchor&&v.goAnchor(...R),["prevent"])),title:m.title},i.toDisplayString(m.title),11,Q),i.renderSlot(l.$slots,"default")],2)}var le=c(se,[["render",Z]]),pe={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(l){return _(l,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){if(typeof this.to!="string")return null;if(this.to.includes("//"))return this.to;const l=this.$router;if(l){const u=this.$route,m=l.resolve(this.to,u,this.append);return m?m.href:this.to}return this.to}},methods:{handleOpenTo(){if(!s)return;const l=this.$router;let u=this.to;if(l){const m=this.$route,k=l.resolve(this.to,m,this.append);u=k?k.href:this.to}typeof this.to!="string"&&window.open(u)},handleClick(l=!1){const u=this.$router;!s||(l?this.handleOpenTo():u?typeof this.to=="string"&&this.to.includes("//")?window.location.href=this.to:this.replace?this.$router.replace(this.to,()=>{}):this.$router.push(this.to,()=>{}):window.location.href=this.to)},handleCheckClick(l,u=!1){if(this.to){if(this.target==="_blank")return this.handleOpenTo(),!1;l.preventDefault(),this.handleClick(u)}}}};function be(l,u){let m=!1;return u.forEach(k=>{l.includes(k)&&(m=!0)}),m}const Ee={name:"Auth",mixins:[pe],emits:["click"],props:{authority:{type:[String,Array,Function,Boolean],default:!0},access:{type:[String,Array]},prevent:{type:Boolean,default:!1},message:{type:String,default:"您没有权限进行此操作"},customTip:{type:Boolean,default:!1},display:{type:String}},computed:{isPermission(){let l;if(typeof this.authority=="boolean")l=this.authority;else if(this.authority instanceof Function)l=this.authority();else{const u=typeof this.authority=="string"?[this.authority]:this.authority,m=typeof this.access=="string"?[this.access]:this.access;l=be(u,m)}return l},options(){let l={};return this.display&&(l.display=this.display),{class:{"ivu-auth":!0,"ivu-auth-permission":this.isPermission,"ivu-auth-no-math":!this.isPermission,"ivu-auth-redirect":!this.isPermission&&this.to,"ivu-auth-prevent":this.prevent},style:l}}},render(){return this.isPermission?i.h("div",this.options,this.$slots.default()):this.to?i.h("div",this.options):this.prevent?i.h("div",Object.assign({},this.options,{onClick:this.handlePreventClick}),[i.h("div",{class:"ivu-auth-prevent-no-match"},this.$slots.default())]):i.h("div",this.options,this.$slots.noMatch())},methods:{handlePreventClick(l){this.isPermission||(this.customTip||this.$Message.info({content:this.message,duration:3}),this.$emit("click",l))}},created(){!this.isPermission&&this.to&&this.handleClick(!1)}};var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof sp<"u"?sp:typeof self<"u"?self:{};function Y(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var de={exports:{}};/**!
* @fileOverview Kickass library to create and place poppers near their reference elements.
* @version 1.16.1
* @license
* Copyright (c) 2016 Federico Zivolo and contributors
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/(function(l,u){(function(m,k){l.exports=k()})(ee,function(){var m=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",k=function(){for(var ne=["Edge","Trident","Firefox"],ve=0;ve<ne.length;ve+=1)if(m&&navigator.userAgent.indexOf(ne[ve])>=0)return 1;return 0}();function C(ne){var ve=!1;return function(){ve||(ve=!0,window.Promise.resolve().then(function(){ve=!1,ne()}))}}function v(ne){var ve=!1;return function(){ve||(ve=!0,setTimeout(function(){ve=!1,ne()},k))}}var R=m&&window.Promise,B=R?C:v;function G(ne){var ve={};return ne&&ve.toString.call(ne)==="[object Function]"}function W(ne,ve){if(ne.nodeType!==1)return[];var Te=ne.ownerDocument.defaultView,De=Te.getComputedStyle(ne,null);return ve?De[ve]:De}function j(ne){return ne.nodeName==="HTML"?ne:ne.parentNode||ne.host}function ce(ne){if(!ne)return document.body;switch(ne.nodeName){case"HTML":case"BODY":return ne.ownerDocument.body;case"#document":return ne.body}var ve=W(ne),Te=ve.overflow,De=ve.overflowX,Ze=ve.overflowY;return/(auto|scroll|overlay)/.test(Te+Ze+De)?ne:ce(j(ne))}function Oe(ne){return ne&&ne.referenceNode?ne.referenceNode:ne}var xe=m&&!!(window.MSInputMethodContext&&document.documentMode),ye=m&&/MSIE 10/.test(navigator.userAgent);function oe(ne){return ne===11?xe:ne===10?ye:xe||ye}function Re(ne){if(!ne)return document.documentElement;for(var ve=oe(10)?document.body:null,Te=ne.offsetParent||null;Te===ve&&ne.nextElementSibling;)Te=(ne=ne.nextElementSibling).offsetParent;var De=Te&&Te.nodeName;return!De||De==="BODY"||De==="HTML"?ne?ne.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(Te.nodeName)!==-1&&W(Te,"position")==="static"?Re(Te):Te}function Lt(ne){var ve=ne.nodeName;return ve==="BODY"?!1:ve==="HTML"||Re(ne.firstElementChild)===ne}function yt(ne){return ne.parentNode!==null?yt(ne.parentNode):ne}function wt(ne,ve){if(!ne||!ne.nodeType||!ve||!ve.nodeType)return document.documentElement;var Te=ne.compareDocumentPosition(ve)&Node.DOCUMENT_POSITION_FOLLOWING,De=Te?ne:ve,Ze=Te?ve:ne,qe=document.createRange();qe.setStart(De,0),qe.setEnd(Ze,0);var tt=qe.commonAncestorContainer;if(ne!==tt&&ve!==tt||De.contains(Ze))return Lt(tt)?tt:Re(tt);var at=yt(ne);return at.host?wt(at.host,ve):wt(ne,yt(ve).host)}function Ge(ne){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",Te=ve==="top"?"scrollTop":"scrollLeft",De=ne.nodeName;if(De==="BODY"||De==="HTML"){var Ze=ne.ownerDocument.documentElement,qe=ne.ownerDocument.scrollingElement||Ze;return qe[Te]}return ne[Te]}function Ne(ne,ve){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,De=Ge(ve,"top"),Ze=Ge(ve,"left"),qe=Te?-1:1;return ne.top+=De*qe,ne.bottom+=De*qe,ne.left+=Ze*qe,ne.right+=Ze*qe,ne}function Je(ne,ve){var Te=ve==="x"?"Left":"Top",De=Te==="Left"?"Right":"Bottom";return parseFloat(ne["border"+Te+"Width"])+parseFloat(ne["border"+De+"Width"])}function je(ne,ve,Te,De){return Math.max(ve["offset"+ne],ve["scroll"+ne],Te["client"+ne],Te["offset"+ne],Te["scroll"+ne],oe(10)?parseInt(Te["offset"+ne])+parseInt(De["margin"+(ne==="Height"?"Top":"Left")])+parseInt(De["margin"+(ne==="Height"?"Bottom":"Right")]):0)}function Qt(ne){var ve=ne.body,Te=ne.documentElement,De=oe(10)&&getComputedStyle(Te);return{height:je("Height",ve,Te,De),width:je("Width",ve,Te,De)}}var Ht=function(ne,ve){if(!(ne instanceof ve))throw new TypeError("Cannot call a class as a function")},Pt=function(){function ne(ve,Te){for(var De=0;De<Te.length;De++){var Ze=Te[De];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(ve,Ze.key,Ze)}}return function(ve,Te,De){return Te&&ne(ve.prototype,Te),De&&ne(ve,De),ve}}(),_t=function(ne,ve,Te){return ve in ne?Object.defineProperty(ne,ve,{value:Te,enumerable:!0,configurable:!0,writable:!0}):ne[ve]=Te,ne},Dt=Object.assign||function(ne){for(var ve=1;ve<arguments.length;ve++){var Te=arguments[ve];for(var De in Te)Object.prototype.hasOwnProperty.call(Te,De)&&(ne[De]=Te[De])}return ne};function jt(ne){return Dt({},ne,{right:ne.left+ne.width,bottom:ne.top+ne.height})}function At(ne){var ve={};try{if(oe(10)){ve=ne.getBoundingClientRect();var Te=Ge(ne,"top"),De=Ge(ne,"left");ve.top+=Te,ve.left+=De,ve.bottom+=Te,ve.right+=De}else ve=ne.getBoundingClientRect()}catch{}var Ze={left:ve.left,top:ve.top,width:ve.right-ve.left,height:ve.bottom-ve.top},qe=ne.nodeName==="HTML"?Qt(ne.ownerDocument):{},tt=qe.width||ne.clientWidth||Ze.width,at=qe.height||ne.clientHeight||Ze.height,xt=ne.offsetWidth-tt,Gt=ne.offsetHeight-at;if(xt||Gt){var Zt=W(ne);xt-=Je(Zt,"x"),Gt-=Je(Zt,"y"),Ze.width-=xt,Ze.height-=Gt}return jt(Ze)}function vt(ne,ve){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,De=oe(10),Ze=ve.nodeName==="HTML",qe=At(ne),tt=At(ve),at=ce(ne),xt=W(ve),Gt=parseFloat(xt.borderTopWidth),Zt=parseFloat(xt.borderLeftWidth);Te&&Ze&&(tt.top=Math.max(tt.top,0),tt.left=Math.max(tt.left,0));var Ut=jt({top:qe.top-tt.top-Gt,left:qe.left-tt.left-Zt,width:qe.width,height:qe.height});if(Ut.marginTop=0,Ut.marginLeft=0,!De&&Ze){var Kt=parseFloat(xt.marginTop),Ai=parseFloat(xt.marginLeft);Ut.top-=Gt-Kt,Ut.bottom-=Gt-Kt,Ut.left-=Zt-Ai,Ut.right-=Zt-Ai,Ut.marginTop=Kt,Ut.marginLeft=Ai}return(De&&!Te?ve.contains(at):ve===at&&at.nodeName!=="BODY")&&(Ut=Ne(Ut,ve)),Ut}function ut(ne){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Te=ne.ownerDocument.documentElement,De=vt(ne,Te),Ze=Math.max(Te.clientWidth,window.innerWidth||0),qe=Math.max(Te.clientHeight,window.innerHeight||0),tt=ve?0:Ge(Te),at=ve?0:Ge(Te,"left"),xt={top:tt-De.top+De.marginTop,left:at-De.left+De.marginLeft,width:Ze,height:qe};return jt(xt)}function Nt(ne){var ve=ne.nodeName;if(ve==="BODY"||ve==="HTML")return!1;if(W(ne,"position")==="fixed")return!0;var Te=j(ne);return Te?Nt(Te):!1}function Ot(ne){if(!ne||!ne.parentElement||oe())return document.documentElement;for(var ve=ne.parentElement;ve&&W(ve,"transform")==="none";)ve=ve.parentElement;return ve||document.documentElement}function ii(ne,ve,Te,De){var Ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,qe={top:0,left:0},tt=Ze?Ot(ne):wt(ne,Oe(ve));if(De==="viewport")qe=ut(tt,Ze);else{var at=void 0;De==="scrollParent"?(at=ce(j(ve)),at.nodeName==="BODY"&&(at=ne.ownerDocument.documentElement)):De==="window"?at=ne.ownerDocument.documentElement:at=De;var xt=vt(at,tt,Ze);if(at.nodeName==="HTML"&&!Nt(tt)){var Gt=Qt(ne.ownerDocument),Zt=Gt.height,Ut=Gt.width;qe.top+=xt.top-xt.marginTop,qe.bottom=Zt+xt.top,qe.left+=xt.left-xt.marginLeft,qe.right=Ut+xt.left}else qe=xt}Te=Te||0;var Kt=typeof Te=="number";return qe.left+=Kt?Te:Te.left||0,qe.top+=Kt?Te:Te.top||0,qe.right-=Kt?Te:Te.right||0,qe.bottom-=Kt?Te:Te.bottom||0,qe}function ai(ne){var ve=ne.width,Te=ne.height;return ve*Te}function ji(ne,ve,Te,De,Ze){var qe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(ne.indexOf("auto")===-1)return ne;var tt=ii(Te,De,qe,Ze),at={top:{width:tt.width,height:ve.top-tt.top},right:{width:tt.right-ve.right,height:tt.height},bottom:{width:tt.width,height:tt.bottom-ve.bottom},left:{width:ve.left-tt.left,height:tt.height}},xt=Object.keys(at).map(function(Kt){return Dt({key:Kt},at[Kt],{area:ai(at[Kt])})}).sort(function(Kt,Ai){return Ai.area-Kt.area}),Gt=xt.filter(function(Kt){var Ai=Kt.width,Ri=Kt.height;return Ai>=Te.clientWidth&&Ri>=Te.clientHeight}),Zt=Gt.length>0?Gt[0].key:xt[0].key,Ut=ne.split("-")[1];return Zt+(Ut?"-"+Ut:"")}function hn(ne,ve,Te){var De=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Ze=De?Ot(ve):wt(ve,Oe(Te));return vt(Te,Ze,De)}function Mn(ne){var ve=ne.ownerDocument.defaultView,Te=ve.getComputedStyle(ne),De=parseFloat(Te.marginTop||0)+parseFloat(Te.marginBottom||0),Ze=parseFloat(Te.marginLeft||0)+parseFloat(Te.marginRight||0),qe={width:ne.offsetWidth+Ze,height:ne.offsetHeight+De};return qe}function Dn(ne){var ve={left:"right",right:"left",bottom:"top",top:"bottom"};return ne.replace(/left|right|bottom|top/g,function(Te){return ve[Te]})}function $r(ne,ve,Te){Te=Te.split("-")[0];var De=Mn(ne),Ze={width:De.width,height:De.height},qe=["right","left"].indexOf(Te)!==-1,tt=qe?"top":"left",at=qe?"left":"top",xt=qe?"height":"width",Gt=qe?"width":"height";return Ze[tt]=ve[tt]+ve[xt]/2-De[xt]/2,Te===at?Ze[at]=ve[at]-De[Gt]:Ze[at]=ve[Dn(at)],Ze}function Ns(ne,ve){return Array.prototype.find?ne.find(ve):ne.filter(ve)[0]}function ua(ne,ve,Te){if(Array.prototype.findIndex)return ne.findIndex(function(Ze){return Ze[ve]===Te});var De=Ns(ne,function(Ze){return Ze[ve]===Te});return ne.indexOf(De)}function da(ne,ve,Te){var De=Te===void 0?ne:ne.slice(0,ua(ne,"name",Te));return De.forEach(function(Ze){Ze.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var qe=Ze.function||Ze.fn;Ze.enabled&&G(qe)&&(ve.offsets.popper=jt(ve.offsets.popper),ve.offsets.reference=jt(ve.offsets.reference),ve=qe(ve,Ze))}),ve}function Ct(){if(!this.state.isDestroyed){var ne={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};ne.offsets.reference=hn(this.state,this.popper,this.reference,this.options.positionFixed),ne.placement=ji(this.options.placement,ne.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),ne.originalPlacement=ne.placement,ne.positionFixed=this.options.positionFixed,ne.offsets.popper=$r(this.popper,ne.offsets.reference,ne.placement),ne.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",ne=da(this.modifiers,ne),this.state.isCreated?this.options.onUpdate(ne):(this.state.isCreated=!0,this.options.onCreate(ne))}}function ei(ne,ve){return ne.some(function(Te){var De=Te.name,Ze=Te.enabled;return Ze&&De===ve})}function Pi(ne){for(var ve=[!1,"ms","Webkit","Moz","O"],Te=ne.charAt(0).toUpperCase()+ne.slice(1),De=0;De<ve.length;De++){var Ze=ve[De],qe=Ze?""+Ze+Te:ne;if(typeof document.body.style[qe]<"u")return qe}return null}function Er(){return this.state.isDestroyed=!0,ei(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Pi("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function gs(ne){var ve=ne.ownerDocument;return ve?ve.defaultView:window}function Ml(ne,ve,Te,De){var Ze=ne.nodeName==="BODY",qe=Ze?ne.ownerDocument.defaultView:ne;qe.addEventListener(ve,Te,{passive:!0}),Ze||Ml(ce(qe.parentNode),ve,Te,De),De.push(qe)}function $c(ne,ve,Te,De){Te.updateBound=De,gs(ne).addEventListener("resize",Te.updateBound,{passive:!0});var Ze=ce(ne);return Ml(Ze,"scroll",Te.updateBound,Te.scrollParents),Te.scrollElement=Ze,Te.eventsEnabled=!0,Te}function ys(){this.state.eventsEnabled||(this.state=$c(this.reference,this.options,this.state,this.scheduleUpdate))}function Ji(ne,ve){return gs(ne).removeEventListener("resize",ve.updateBound),ve.scrollParents.forEach(function(Te){Te.removeEventListener("scroll",ve.updateBound)}),ve.updateBound=null,ve.scrollParents=[],ve.scrollElement=null,ve.eventsEnabled=!1,ve}function $s(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Ji(this.reference,this.state))}function fa(ne){return ne!==""&&!isNaN(parseFloat(ne))&&isFinite(ne)}function ho(ne,ve){Object.keys(ve).forEach(function(Te){var De="";["width","height","top","right","bottom","left"].indexOf(Te)!==-1&&fa(ve[Te])&&(De="px"),ne.style[Te]=ve[Te]+De})}function pa(ne,ve){Object.keys(ve).forEach(function(Te){var De=ve[Te];De!==!1?ne.setAttribute(Te,ve[Te]):ne.removeAttribute(Te)})}function Zd(ne){return ho(ne.instance.popper,ne.styles),pa(ne.instance.popper,ne.attributes),ne.arrowElement&&Object.keys(ne.arrowStyles).length&&ho(ne.arrowElement,ne.arrowStyles),ne}function O1(ne,ve,Te,De,Ze){var qe=hn(Ze,ve,ne,Te.positionFixed),tt=ji(Te.placement,qe,ve,ne,Te.modifiers.flip.boundariesElement,Te.modifiers.flip.padding);return ve.setAttribute("x-placement",tt),ho(ve,{position:Te.positionFixed?"fixed":"absolute"}),Te}function Kd(ne,ve){var Te=ne.offsets,De=Te.popper,Ze=Te.reference,qe=Math.round,tt=Math.floor,at=function(Wa){return Wa},xt=qe(Ze.width),Gt=qe(De.width),Zt=["left","right"].indexOf(ne.placement)!==-1,Ut=ne.placement.indexOf("-")!==-1,Kt=xt%2===Gt%2,Ai=xt%2===1&&Gt%2===1,Ri=ve?Zt||Ut||Kt?qe:tt:at,mr=ve?qe:at;return{left:Ri(Ai&&!Ut&&ve?De.left-1:De.left),top:mr(De.top),bottom:mr(De.bottom),right:Ri(De.right)}}var w1=m&&/Firefox/i.test(navigator.userAgent);function _1(ne,ve){var Te=ve.x,De=ve.y,Ze=ne.offsets.popper,qe=Ns(ne.instance.modifiers,function(hu){return hu.name==="applyStyle"}).gpuAcceleration;qe!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var tt=qe!==void 0?qe:ve.gpuAcceleration,at=Re(ne.instance.popper),xt=At(at),Gt={position:Ze.position},Zt=Kd(ne,window.devicePixelRatio<2||!w1),Ut=Te==="bottom"?"top":"bottom",Kt=De==="right"?"left":"right",Ai=Pi("transform"),Ri=void 0,mr=void 0;if(Ut==="bottom"?at.nodeName==="HTML"?mr=-at.clientHeight+Zt.bottom:mr=-xt.height+Zt.bottom:mr=Zt.top,Kt==="right"?at.nodeName==="HTML"?Ri=-at.clientWidth+Zt.right:Ri=-xt.width+Zt.right:Ri=Zt.left,tt&&Ai)Gt[Ai]="translate3d("+Ri+"px, "+mr+"px, 0)",Gt[Ut]=0,Gt[Kt]=0,Gt.willChange="transform";else{var Wa=Ut==="bottom"?-1:1,Jd=Kt==="right"?-1:1;Gt[Ut]=mr*Wa,Gt[Kt]=Ri*Jd,Gt.willChange=Ut+", "+Kt}var Vo={"x-placement":ne.placement};return ne.attributes=Dt({},Vo,ne.attributes),ne.styles=Dt({},Gt,ne.styles),ne.arrowStyles=Dt({},ne.offsets.arrow,ne.arrowStyles),ne}function Gm(ne,ve,Te){var De=Ns(ne,function(at){var xt=at.name;return xt===ve}),Ze=!!De&&ne.some(function(at){return at.name===Te&&at.enabled&&at.order<De.order});if(!Ze){var qe="`"+ve+"`",tt="`"+Te+"`";console.warn(tt+" modifier is required by "+qe+" modifier in order to work, be sure to include it before "+qe+"!")}return Ze}function ir(ne,ve){var Te;if(!Gm(ne.instance.modifiers,"arrow","keepTogether"))return ne;var De=ve.element;if(typeof De=="string"){if(De=ne.instance.popper.querySelector(De),!De)return ne}else if(!ne.instance.popper.contains(De))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),ne;var Ze=ne.placement.split("-")[0],qe=ne.offsets,tt=qe.popper,at=qe.reference,xt=["left","right"].indexOf(Ze)!==-1,Gt=xt?"height":"width",Zt=xt?"Top":"Left",Ut=Zt.toLowerCase(),Kt=xt?"left":"top",Ai=xt?"bottom":"right",Ri=Mn(De)[Gt];at[Ai]-Ri<tt[Ut]&&(ne.offsets.popper[Ut]-=tt[Ut]-(at[Ai]-Ri)),at[Ut]+Ri>tt[Ai]&&(ne.offsets.popper[Ut]+=at[Ut]+Ri-tt[Ai]),ne.offsets.popper=jt(ne.offsets.popper);var mr=at[Ut]+at[Gt]/2-Ri/2,Wa=W(ne.instance.popper),Jd=parseFloat(Wa["margin"+Zt]),Vo=parseFloat(Wa["border"+Zt+"Width"]),hu=mr-ne.offsets.popper[Ut]-Jd-Vo;return hu=Math.max(Math.min(tt[Gt]-Ri,hu),0),ne.arrowElement=De,ne.offsets.arrow=(Te={},_t(Te,Ut,Math.round(hu)),_t(Te,Kt,""),Te),ne}function ma(ne){return ne==="end"?"start":ne==="start"?"end":ne}var El=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ga=El.slice(3);function S1(ne){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Te=ga.indexOf(ne),De=ga.slice(Te+1).concat(ga.slice(0,Te));return ve?De.reverse():De}var Vc={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function nC(ne,ve){if(ei(ne.instance.modifiers,"inner")||ne.flipped&&ne.placement===ne.originalPlacement)return ne;var Te=ii(ne.instance.popper,ne.instance.reference,ve.padding,ve.boundariesElement,ne.positionFixed),De=ne.placement.split("-")[0],Ze=Dn(De),qe=ne.placement.split("-")[1]||"",tt=[];switch(ve.behavior){case Vc.FLIP:tt=[De,Ze];break;case Vc.CLOCKWISE:tt=S1(De);break;case Vc.COUNTERCLOCKWISE:tt=S1(De,!0);break;default:tt=ve.behavior}return tt.forEach(function(at,xt){if(De!==at||tt.length===xt+1)return ne;De=ne.placement.split("-")[0],Ze=Dn(De);var Gt=ne.offsets.popper,Zt=ne.offsets.reference,Ut=Math.floor,Kt=De==="left"&&Ut(Gt.right)>Ut(Zt.left)||De==="right"&&Ut(Gt.left)<Ut(Zt.right)||De==="top"&&Ut(Gt.bottom)>Ut(Zt.top)||De==="bottom"&&Ut(Gt.top)<Ut(Zt.bottom),Ai=Ut(Gt.left)<Ut(Te.left),Ri=Ut(Gt.right)>Ut(Te.right),mr=Ut(Gt.top)<Ut(Te.top),Wa=Ut(Gt.bottom)>Ut(Te.bottom),Jd=De==="left"&&Ai||De==="right"&&Ri||De==="top"&&mr||De==="bottom"&&Wa,Vo=["top","bottom"].indexOf(De)!==-1,hu=!!ve.flipVariations&&(Vo&&qe==="start"&&Ai||Vo&&qe==="end"&&Ri||!Vo&&qe==="start"&&mr||!Vo&&qe==="end"&&Wa),Lae=!!ve.flipVariationsByContent&&(Vo&&qe==="start"&&Ri||Vo&&qe==="end"&&Ai||!Vo&&qe==="start"&&Wa||!Vo&&qe==="end"&&mr),vI=hu||Lae;(Kt||Jd||vI)&&(ne.flipped=!0,(Kt||Jd)&&(De=tt[xt+1]),vI&&(qe=ma(qe)),ne.placement=De+(qe?"-"+qe:""),ne.offsets.popper=Dt({},ne.offsets.popper,$r(ne.instance.popper,ne.offsets.reference,ne.placement)),ne=da(ne.instance.modifiers,ne,"flip"))}),ne}function Ym(ne){var ve=ne.offsets,Te=ve.popper,De=ve.reference,Ze=ne.placement.split("-")[0],qe=Math.floor,tt=["top","bottom"].indexOf(Ze)!==-1,at=tt?"right":"bottom",xt=tt?"left":"top",Gt=tt?"width":"height";return Te[at]<qe(De[xt])&&(ne.offsets.popper[xt]=qe(De[xt])-Te[Gt]),Te[xt]>qe(De[at])&&(ne.offsets.popper[xt]=qe(De[at])),ne}function rC(ne,ve,Te,De){var Ze=ne.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),qe=+Ze[1],tt=Ze[2];if(!qe)return ne;if(tt.indexOf("%")===0){var at=void 0;switch(tt){case"%p":at=Te;break;case"%":case"%r":default:at=De}var xt=jt(at);return xt[ve]/100*qe}else if(tt==="vh"||tt==="vw"){var Gt=void 0;return tt==="vh"?Gt=Math.max(document.documentElement.clientHeight,window.innerHeight||0):Gt=Math.max(document.documentElement.clientWidth,window.innerWidth||0),Gt/100*qe}else return qe}function Pae(ne,ve,Te,De){var Ze=[0,0],qe=["right","left"].indexOf(De)!==-1,tt=ne.split(/(\+|\-)/).map(function(Zt){return Zt.trim()}),at=tt.indexOf(Ns(tt,function(Zt){return Zt.search(/,|\s/)!==-1}));tt[at]&&tt[at].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var xt=/\s*,\s*|\s+/,Gt=at!==-1?[tt.slice(0,at).concat([tt[at].split(xt)[0]]),[tt[at].split(xt)[1]].concat(tt.slice(at+1))]:[tt];return Gt=Gt.map(function(Zt,Ut){var Kt=(Ut===1?!qe:qe)?"height":"width",Ai=!1;return Zt.reduce(function(Ri,mr){return Ri[Ri.length-1]===""&&["+","-"].indexOf(mr)!==-1?(Ri[Ri.length-1]=mr,Ai=!0,Ri):Ai?(Ri[Ri.length-1]+=mr,Ai=!1,Ri):Ri.concat(mr)},[]).map(function(Ri){return rC(Ri,Kt,ve,Te)})}),Gt.forEach(function(Zt,Ut){Zt.forEach(function(Kt,Ai){fa(Kt)&&(Ze[Ut]+=Kt*(Zt[Ai-1]==="-"?-1:1))})}),Ze}function Aae(ne,ve){var Te=ve.offset,De=ne.placement,Ze=ne.offsets,qe=Ze.popper,tt=Ze.reference,at=De.split("-")[0],xt=void 0;return fa(+Te)?xt=[+Te,0]:xt=Pae(Te,qe,tt,at),at==="left"?(qe.top+=xt[0],qe.left-=xt[1]):at==="right"?(qe.top+=xt[0],qe.left+=xt[1]):at==="top"?(qe.left+=xt[0],qe.top-=xt[1]):at==="bottom"&&(qe.left+=xt[0],qe.top+=xt[1]),ne.popper=qe,ne}function Rae(ne,ve){var Te=ve.boundariesElement||Re(ne.instance.popper);ne.instance.reference===Te&&(Te=Re(Te));var De=Pi("transform"),Ze=ne.instance.popper.style,qe=Ze.top,tt=Ze.left,at=Ze[De];Ze.top="",Ze.left="",Ze[De]="";var xt=ii(ne.instance.popper,ne.instance.reference,ve.padding,Te,ne.positionFixed);Ze.top=qe,Ze.left=tt,Ze[De]=at,ve.boundaries=xt;var Gt=ve.priority,Zt=ne.offsets.popper,Ut={primary:function(Kt){var Ai=Zt[Kt];return Zt[Kt]<xt[Kt]&&!ve.escapeWithReference&&(Ai=Math.max(Zt[Kt],xt[Kt])),_t({},Kt,Ai)},secondary:function(Kt){var Ai=Kt==="right"?"left":"top",Ri=Zt[Ai];return Zt[Kt]>xt[Kt]&&!ve.escapeWithReference&&(Ri=Math.min(Zt[Ai],xt[Kt]-(Kt==="right"?Zt.width:Zt.height))),_t({},Ai,Ri)}};return Gt.forEach(function(Kt){var Ai=["left","top"].indexOf(Kt)!==-1?"primary":"secondary";Zt=Dt({},Zt,Ut[Ai](Kt))}),ne.offsets.popper=Zt,ne}function Iae(ne){var ve=ne.placement,Te=ve.split("-")[0],De=ve.split("-")[1];if(De){var Ze=ne.offsets,qe=Ze.reference,tt=Ze.popper,at=["bottom","top"].indexOf(Te)!==-1,xt=at?"left":"top",Gt=at?"width":"height",Zt={start:_t({},xt,qe[xt]),end:_t({},xt,qe[xt]+qe[Gt]-tt[Gt])};ne.offsets.popper=Dt({},tt,Zt[De])}return ne}function Dae(ne){if(!Gm(ne.instance.modifiers,"hide","preventOverflow"))return ne;var ve=ne.offsets.reference,Te=Ns(ne.instance.modifiers,function(De){return De.name==="preventOverflow"}).boundaries;if(ve.bottom<Te.top||ve.left>Te.right||ve.top>Te.bottom||ve.right<Te.left){if(ne.hide===!0)return ne;ne.hide=!0,ne.attributes["x-out-of-boundaries"]=""}else{if(ne.hide===!1)return ne;ne.hide=!1,ne.attributes["x-out-of-boundaries"]=!1}return ne}function Nae(ne){var ve=ne.placement,Te=ve.split("-")[0],De=ne.offsets,Ze=De.popper,qe=De.reference,tt=["left","right"].indexOf(Te)!==-1,at=["top","left"].indexOf(Te)===-1;return Ze[tt?"left":"top"]=qe[Te]-(at?Ze[tt?"width":"height"]:0),ne.placement=Dn(ve),ne.offsets.popper=jt(Ze),ne}var $ae={shift:{order:100,enabled:!0,fn:Iae},offset:{order:200,enabled:!0,fn:Aae,offset:0},preventOverflow:{order:300,enabled:!0,fn:Rae,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Ym},arrow:{order:500,enabled:!0,fn:ir,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:nC,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:Nae},hide:{order:800,enabled:!0,fn:Dae},computeStyle:{order:850,enabled:!0,fn:_1,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Zd,onLoad:O1,gpuAcceleration:void 0}},Vae={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:$ae},C1=function(){function ne(ve,Te){var De=this,Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Ht(this,ne),this.scheduleUpdate=function(){return requestAnimationFrame(De.update)},this.update=B(this.update.bind(this)),this.options=Dt({},ne.Defaults,Ze),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=ve&&ve.jquery?ve[0]:ve,this.popper=Te&&Te.jquery?Te[0]:Te,this.options.modifiers={},Object.keys(Dt({},ne.Defaults.modifiers,Ze.modifiers)).forEach(function(tt){De.options.modifiers[tt]=Dt({},ne.Defaults.modifiers[tt]||{},Ze.modifiers?Ze.modifiers[tt]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(tt){return Dt({name:tt},De.options.modifiers[tt])}).sort(function(tt,at){return tt.order-at.order}),this.modifiers.forEach(function(tt){tt.enabled&&G(tt.onLoad)&&tt.onLoad(De.reference,De.popper,De.options,tt,De.state)}),this.update();var qe=this.options.eventsEnabled;qe&&this.enableEventListeners(),this.state.eventsEnabled=qe}return Pt(ne,[{key:"update",value:function(){return Ct.call(this)}},{key:"destroy",value:function(){return Er.call(this)}},{key:"enableEventListeners",value:function(){return ys.call(this)}},{key:"disableEventListeners",value:function(){return $s.call(this)}}]),ne}();return C1.Utils=(typeof window<"u"?window:ee).PopperUtils,C1.placements=El,C1.Defaults=Vae,C1})})(de);var fe=de.exports;let we=0,Me=0;function Qe(){we++}function Le(){Me++}const ze={name:"Drop",emits:["mouseenter","mouseleave","click"],props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1},visible:{type:Boolean},classes:{type:Object,default:()=>{}},styles:{type:Object,default:()=>{}},transitionName:{type:String,default:"transition-drop"},boundariesElement:{default:"window"}},data(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{mergedStyle(){let l={};return this.width&&(l.minWidth=`${this.width}px`),this.transfer&&(l["z-index"]=1060+this.tIndex),Object.assign({},this.styles,l)},mergedClass(){return Object.assign({},this.classes,{[this.className]:this.className})}},methods:{update(){i.nextTick(()=>{this.popper?(this.popper.update(),this.popperStatus=!0):this.popper=new fe(this.$parent.$refs.reference,this.$refs.drop,{eventsEnabled:this.eventsEnabled,placement:this.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:this.boundariesElement}},onCreate:()=>{this.resetTransformOrigin(),i.nextTick(this.popper.update())},onUpdate:()=>{this.resetTransformOrigin()}}),this.$parent.$options.name==="iSelect"&&(this.width=parseInt(D(this.$parent.$el,"width"))),this.tIndex=this.handleGetIndex()})},destroy(){this.popper&&setTimeout(()=>{this.popper&&!this.popperStatus&&(this.popper.popper.style.display="none",this.popper.destroy(),this.popper=null),this.popperStatus=!1},300)},resetTransformOrigin(){if(!this.popper)return;let l=this.popper.popper.getAttribute("x-placement"),u=l.split("-")[0],m=l.split("-")[1];l==="left"||l==="right"||(this.popper.popper.style.transformOrigin=u==="bottom"||u!=="top"&&m==="start"?"center top":"center bottom")},handleGetIndex(){return Qe(),we},handleMouseenter(l){this.$emit("mouseenter",l)},handleMouseleave(l){this.$emit("mouseleave",l)},handleOnUpdatePopper(){this.update()},handleOnDestroyPopper(){this.destroy()},handleClick(l){this.$emit("click",l)}},beforeUnmount(){this.popper&&(this.popper.destroy(),this.popper=null)}};function ot(l,u,m,k,C,v){return i.openBlock(),i.createBlock(i.Teleport,{to:"body",disabled:!m.transfer},[i.createVNode(i.Transition,{name:m.transitionName},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("div",i.mergeProps({class:["ivu-select-dropdown",v.mergedClass],ref:"drop",style:v.mergedStyle},l.$attrs,{onMouseenter:u[0]||(u[0]=(...R)=>v.handleMouseenter&&v.handleMouseenter(...R)),onMouseleave:u[1]||(u[1]=(...R)=>v.handleMouseleave&&v.handleMouseleave(...R)),onClick:u[2]||(u[2]=i.withModifiers((...R)=>v.handleClick&&v.handleClick(...R),["stop"]))}),[i.renderSlot(l.$slots,"default")],16),[[i.vShow,m.visible]])]),_:3},8,["name"])],8,["disabled"])}var Ye=c(ze,[["render",ot]]);function st(l){s&&typeof window.viewuiplus<"u"&&("langs"in viewuiplus||(viewuiplus.langs={}),viewuiplus.langs[l.i.locale]=l)}const Mt={i:{locale:"zh-CN",select:{placeholder:"请选择",noMatch:"无匹配数据",loading:"加载中"},table:{noDataText:"暂无数据",noFilteredDataText:"暂无筛选结果",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},datepicker:{selectDate:"选择日期",selectTime:"选择时间",startTime:"开始时间",endTime:"结束时间",clear:"清空",ok:"确定",datePanelLabel:"[yyyy年] [m月]",month:"月",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",year:"年",weekStartDay:"0",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{m1:"1月",m2:"2月",m3:"3月",m4:"4月",m5:"5月",m6:"6月",m7:"7月",m8:"8月",m9:"9月",m10:"10月",m11:"11月",m12:"12月"}},transfer:{titles:{source:"源列表",target:"目的列表"},filterPlaceholder:"请输入搜索内容",notFoundText:"列表为空"},modal:{okText:"确定",cancelText:"取消"},poptip:{okText:"确定",cancelText:"取消"},page:{prev:"上一页",next:"下一页",total:"共",item:"条",items:"条",prev5:"向前 5 页",next5:"向后 5 页",page:"条/页",goto:"跳至",p:"页"},rate:{star:"星",stars:"星"},time:{before:"前",after:"后",just:"刚刚",seconds:"秒",minutes:"分钟",hours:"小时",days:"天"},tree:{emptyText:"暂无数据"},image:{zoomIn:"放大",zoomOut:"缩小",rotateLeft:"左旋转",rotateRight:"右旋转",fail:"失败",preview:"预览"}}};st(Mt);var Et=function(l){return ft(l)&&!Wt(l)};function ft(l){return!!l&&typeof l=="object"}function Wt(l){var u=Object.prototype.toString.call(l);return u==="[object RegExp]"||u==="[object Date]"||Be(l)}var hi=typeof Symbol=="function"&&Symbol.for,Ce=hi?Symbol.for("react.element"):60103;function Be(l){return l.$$typeof===Ce}function ge(l){return Array.isArray(l)?[]:{}}function Ue(l,u){return u.clone!==!1&&u.isMergeableObject(l)?pt(ge(l),l,u):l}function We(l,u,m){return l.concat(u).map(function(k){return Ue(k,m)})}function nt(l,u,m){var k={};return m.isMergeableObject(l)&&Object.keys(l).forEach(function(C){k[C]=Ue(l[C],m)}),Object.keys(u).forEach(function(C){!m.isMergeableObject(u[C])||!l[C]?k[C]=Ue(u[C],m):k[C]=pt(l[C],u[C],m)}),k}function pt(l,u,m){m=m||{},m.arrayMerge=m.arrayMerge||We,m.isMergeableObject=m.isMergeableObject||Et;var k=Array.isArray(u),C=Array.isArray(l),v=k===C;return v?k?m.arrayMerge(l,u,m):nt(l,u,m):Ue(u,m)}pt.all=function(l,u){if(!Array.isArray(l))throw new Error("first argument should be an array");return l.reduce(function(m,k){return pt(m,k,u)},{})};var Ci=pt;const ki=/(%|)\{([0-9a-zA-Z_]+)\}/g;function Li(){function l(m,k){return Object.prototype.hasOwnProperty.call(m,k)}function u(m,...k){return k.length===1&&typeof k[0]=="object"&&(k=k[0]),(!k||!k.hasOwnProperty)&&(k={}),m===void 0?"":m.replace(ki,(C,v,R,B)=>{let G;return m[B-1]==="{"&&m[B+C.length]==="}"?R:(G=l(k,R)?k[R]:null,G??"")})}return u}const kn=Li();let xi=Mt;const kr={zh:Mt};let Rn=null,um={},fr=null,Iv=function(){if(Reflect.has(this,"$t"))return this.$t(...arguments);if(fr&&fr.global)return fr.global.t(...arguments);if(fr&&fr.locale){if(!um[fr.locale]||Rn!=fr.locale){um[fr.locale]=!0;let l=fr.getLocaleMessage(fr.locale)||{},u={};Ci(u,kr[fr.locale],l),xi=u,fr.setLocaleMessage(fr.locale,u),Rn=fr.locale}return fr.hlang(...arguments)}};const qh=function(l,u){let m=Iv.apply(this,arguments);if(m!=null)return m;const k=l.split(".");let C=xi;for(let v=0,R=k.length;v<R;v++){const B=k[v];if(m=C[B],v===R-1)return kn(m,u);if(!m)return"";C=m}return""};var bc={use:function(l){xi=l||xi},t:qh,i18n:function(l){fr=l}},Ki={methods:{t(...l){return qh.apply(this,l)}}},oa={data(){return{globalConfig:{}}},created(){const l=i.getCurrentInstance();this.globalConfig=l.appContext.config.globalProperties.$VIEWUI}};const xc="ivu-select",X_={name:"iSelectHead",mixins:[Ki,oa],components:{Icon:S},emits:["on-input-focus","on-input-blur","on-keydown","on-enter","on-clear","on-query-change"],inject:["SelectInstance"],props:{disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},initialLabel:{type:[String,Number,Array]},values:{type:Array,default:()=>[]},clearable:{type:[Function,Boolean],default:!1},inputElementId:{type:String},placeholder:{type:String},queryProp:{type:String,default:""},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean},showCreateItem:{type:Boolean}},data(){return{prefixCls:xc,query:"",inputLength:20,remoteInitialLabel:this.initialLabel,preventRemoteCall:!1}},computed:{singleDisplayClasses(){const{filterable:l,multiple:u,showPlaceholder:m}=this;return[{[xc+"-head-with-prefix"]:this.showPrefix,[xc+"-placeholder"]:m&&!l,[xc+"-selected-value"]:!m&&!u&&!l}]},singleDisplayValue(){return this.multiple&&this.values.length>0||this.filterable?"":`${this.selectedSingle}`||this.localePlaceholder},showPlaceholder(){let l=!1;if(this.multiple)!this.values.length>0&&(l=!0);else{const u=this.values[0];(typeof u>"u"||String(u).trim()==="")&&(l=!this.remoteInitialLabel)}return l},resetSelect(){return!this.showPlaceholder&&this.clearable},inputStyle(){let l={};return this.multiple&&(this.showPlaceholder?l.width="100%":l.width=`${this.inputLength}px`),l},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},selectedSingle(){const l=this.values[0];return l?l.label:this.remoteInitialLabel||""},selectedMultiple(){return(this.multiple?this.values:[]).filter((l,u)=>this.maxTagCount===void 0||u<this.maxTagCount)},headCls(){return{[`${xc}-head-flex`]:this.filterable&&this.showPrefix}},arrowType(){const l=this.globalConfig;let u="ios-arrow-down";return l&&(l.select.customArrow?u="":l.select.arrow&&(u=l.select.arrow)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.select.customArrow&&(u=l.select.customArrow),u},showPrefix(){const l=this.$slots.prefix&&this.$slots.prefix();let u=!1;return l&&(u=l[0].children.length>0),u||this.prefix},arrowSize(){const l=this.globalConfig;let u="";return l&&l.select.arrowSize&&(u=l.select.arrowSize),u}},methods:{onInputFocus(){this.$emit("on-input-focus")},onInputBlur(){this.showCreateItem||(this.values.length||(this.query=""),this.$emit("on-input-blur"))},removeTag(l){if(this.disabled)return!1;this.SelectInstance.handleOnSelectSelected(l)},resetInputState(){this.inputLength=this.$refs.input.value.length*12+20,this.$emit("on-keydown")},handleInputDelete(l){const u=l.target.value;this.multiple&&this.selectedMultiple.length&&this.query===""&&u===""&&this.removeTag(this.selectedMultiple[this.selectedMultiple.length-1])},handleInputEnter(l){this.$emit("on-enter"),this.showCreateItem&&l.stopPropagation()},onHeaderClick(l){this.filterable&&l.target===this.$el&&this.$refs.input.focus()},onClear(){this.$emit("on-clear")}},watch:{values([l]){if(this.filterable){if(this.preventRemoteCall=!0,this.multiple){this.query="",this.preventRemoteCall=!1;return}typeof l>"u"||l===""||l===null?this.query="":this.query=l.label,i.nextTick(()=>this.preventRemoteCall=!1)}},query(l){if(this.preventRemoteCall){this.preventRemoteCall=!1;return}this.$emit("on-query-change",l)},queryProp(l){l!==this.query&&(this.query=l)}}},W_={key:1,class:"ivu-tag ivu-tag-checked"},Q_={class:"ivu-tag-text ivu-select-max-tag"},ae=["id","disabled","placeholder"];function Ae(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{onClick:u[6]||(u[6]=(...B)=>v.onHeaderClick&&v.onHeaderClick(...B)),class:i.normalizeClass(v.headCls)},[v.showPrefix?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass([C.prefixCls+"-prefix"])},[i.renderSlot(l.$slots,"prefix",{},()=>[m.prefix?(i.openBlock(),i.createBlock(R,{key:0,type:m.prefix},null,8,["type"])):i.createCommentVNode("",!0)])],2)):i.createCommentVNode("",!0),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.selectedMultiple,(B,G)=>(i.openBlock(),i.createElementBlock("div",{class:"ivu-tag ivu-tag-checked",key:G},[i.createElementVNode("span",{class:i.normalizeClass(["ivu-tag-text",{"ivu-select-multiple-tag-hidden":B.disabled}])},i.toDisplayString(B.tag!==void 0?B.tag:B.label),3),B.disabled?i.createCommentVNode("",!0):(i.openBlock(),i.createBlock(R,{key:0,type:"ios-close",onClick:i.withModifiers(W=>v.removeTag(B),["stop"])},null,8,["onClick"]))]))),128)),m.maxTagCount!==void 0&&m.values.length>m.maxTagCount?(i.openBlock(),i.createElementBlock("div",W_,[i.createElementVNode("span",Q_,[m.maxTagPlaceholder?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(m.maxTagPlaceholder(m.values.length-m.maxTagCount)),1)],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createTextVNode("+ "+i.toDisplayString(m.values.length-m.maxTagCount)+"...",1)],64))])])):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("span",{class:i.normalizeClass(v.singleDisplayClasses)},i.toDisplayString(v.singleDisplayValue),3),[[i.vShow,v.singleDisplayValue]]),m.filterable?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:2,id:m.inputElementId,type:"text","onUpdate:modelValue":u[0]||(u[0]=B=>C.query=B),disabled:m.disabled,class:i.normalizeClass([C.prefixCls+"-input"]),placeholder:v.showPlaceholder?v.localePlaceholder:"",style:i.normalizeStyle(v.inputStyle),autocomplete:"off",spellcheck:"false",onKeydown:[u[1]||(u[1]=(...B)=>v.resetInputState&&v.resetInputState(...B)),u[2]||(u[2]=i.withKeys((...B)=>v.handleInputDelete&&v.handleInputDelete(...B),["delete"])),u[3]||(u[3]=i.withKeys((...B)=>v.handleInputEnter&&v.handleInputEnter(...B),["enter"]))],onFocus:u[4]||(u[4]=(...B)=>v.onInputFocus&&v.onInputFocus(...B)),onBlur:u[5]||(u[5]=(...B)=>v.onInputBlur&&v.onInputBlur(...B)),ref:"input"},null,46,ae)),[[i.vModelText,C.query]]):i.createCommentVNode("",!0),v.resetSelect?(i.openBlock(),i.createBlock(R,{key:3,type:"ios-close-circle",class:i.normalizeClass([C.prefixCls+"-arrow"]),onClick:i.withModifiers(v.onClear,["stop"])},null,8,["class","onClick"])):i.createCommentVNode("",!0),!v.resetSelect&&!m.remote?(i.openBlock(),i.createBlock(R,{key:4,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:i.normalizeClass([C.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])):i.createCommentVNode("",!0)],2)}var Fe=c(X_,[["render",Ae]]);const Ve="click",$e=Object.create(null),mt=Object.create(null),$t=[$e,mt],Bt=function(l,u,m){const{target:k}=m,C=function(R){const{el:B}=R;if(B!==k&&!B.contains(k)){const{binding:G}=R;G.modifiers.stop&&m.stopPropagation(),G.modifiers.prevent&&m.preventDefault(),G.value.call(l,m)}},v=function(R){return u[R].forEach(C)};Object.keys(u).forEach(v)},qt=function(l){Bt(this,$e,l)},oi=function(l){Bt(this,mt,l)},di=function(l){return l?qt:oi},pi=Object.defineProperties({},{$_captureInstances:{value:$e},$_nonCaptureInstances:{value:mt},$_onCaptureEvent:{value:qt},$_onNonCaptureEvent:{value:oi},beforeMount:{value:function(l,u){if(typeof u.value!="function")throw new TypeError("Binding value must be a function.");let m;const k=u.modifiers;k.click?m="click":k.mousedown?m="mousedown":k.touchstart?m="touchstart":m=Ve;const C=u.arg,v={...u,modifiers:{capture:!1,prevent:!1,stop:!1,...u.modifiers}},R=C?$e:mt;Array.isArray(R[m])||(R[m]=[]),R[m].push({el:l,binding:v})===1&&typeof document=="object"&&document&&document.addEventListener(m,di(C),C)}},unmounted:{value:function(l){const u=function(k){return k.el!==l},m=function(k){const C=Object.keys(k);if(C.length){const v=k===$e,R=function(B){const G=k[B].filter(u);G.length?k[B]=G:(typeof document=="object"&&document&&document.removeEventListener(B,di(v),v),delete k[B])};C.forEach(R)}};$t.forEach(m)}},version:{enumerable:!0,value:"3.7.1"}});var mi={inject:{FormInstance:{default:""},FormItemInstance:{default:null}},computed:{itemDisabled(){let l=this.disabled;return!l&&this.FormInstance&&(l=this.FormInstance.disabled),l?!0:null}},methods:{handleFormItemChange(l,u){this.FormItemInstance&&(l==="blur"?this.FormItemInstance.formBlur(u):l==="change"&&this.FormItemInstance.formChange(u))}}};const on="ivu-select",us=(l,u,m)=>{const k=JSON.stringify(l),C=JSON.stringify(u),v=JSON.stringify(m.map(R=>R.value));return k!==C||k!==v||v!==C},Io=300,zi={name:"iSelect",mixins:[Ki,mi],components:{Drop:Ye,SelectHead:Fe,Icon:S},directives:{clickOutside:pi},emits:["on-set-default-options","on-clear","on-clickoutside","on-select","on-create","on-change","on-query-change","on-open-change","update:modelValue"],provide(){return{SelectInstance:this}},props:{modelValue:{type:[String,Number,Array],default:""},label:{type:[String,Number,Array],default:""},defaultLabel:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},filterable:{type:Boolean,default:!1},filterMethod:{type:Function},remoteMethod:{type:Function},loading:{type:Boolean,default:!1},loadingText:{type:String},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},labelInValue:{type:Boolean,default:!1},notFoundText:{type:String},placement:{validator(l){return _(l,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},autoComplete:{type:Boolean,default:!1},name:{type:String},elementId:{type:String},transferClassName:{type:String},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean,default:!1},capture:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return l.$VIEWUI?l.$VIEWUI.capture:!0}},filterByLabel:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1},hideNotFound:{type:Boolean,default:!1}},mounted(){if(!this.remote&&this.slotOptions.length>0&&(this.values=this.getInitialValue().map(l=>typeof l!="number"&&!l?null:this.getOptionData(l)).filter(Boolean)),this.checkUpdateStatus(),this.remote&&this.modelValue&&this.defaultLabel){if(!this.multiple)this.query=this.defaultLabel,this.modelValue&&this.defaultLabel&&this.values.push({label:this.defaultLabel,value:this.modelValue});else if(this.multiple&&this.defaultLabel instanceof Array&&this.modelValue.length===this.defaultLabel.length){const l=this.modelValue.map((u,m)=>({value:u,label:this.defaultLabel[m]}));setTimeout(()=>{this.values=l})}}},data(){return{prefixCls:on,values:[],dropDownWidth:0,visible:!1,focusIndex:-1,isFocused:!1,query:"",initialLabel:this.label,hasMouseHoverHead:!1,slotOptions:[],caretPosition:-1,lastRemoteQuery:"",unchangedQuery:!0,hasExpectedValue:!1,isTyping:!1,preventRemoteCall:!1,filterQueryChange:!1,slotOptionsMap:new Map,isLocking:!1}},computed:{classes(){return[`${on}`,{[`${on}-visible`]:this.visible,[`${on}-disabled`]:this.itemDisabled,[`${on}-multiple`]:this.multiple,[`${on}-single`]:!this.multiple,[`${on}-${this.size}`]:!!this.size}]},dropdownCls(){return{[on+"-dropdown-transfer"]:this.transfer,[on+"-multiple"]:this.multiple&&this.transfer,"ivu-auto-complete":this.autoComplete,[this.transferClassName]:this.transferClassName}},selectionCls(){return{[`${on}-selection`]:!this.autoComplete,[`${on}-selection-focused`]:this.isFocused}},localeNotFoundText(){return typeof this.notFoundText>"u"?this.t("i.select.noMatch"):this.notFoundText},localeLoadingText(){return typeof this.loadingText>"u"?this.t("i.select.loading"):this.loadingText},showCreateItem(){let l=!1;const{allowCreate:u,query:m,slotOptions:k}=this;return u&&m!==""&&(l=!0,(k||[]).find(C=>C.proxy&&C.proxy.showLabel===m)&&(l=!1)),l},transitionName(){return this.placement==="bottom"?"slide-up":"slide-down"},dropVisible(){let l=!0;const u=this.slotOptions.length===0;return!this.loading&&this.remote&&this.query===""&&u&&(l=!1),this.autoComplete&&u&&(l=!1),this.visible&&l},showNotFoundLabel(){const{loading:l,remote:u,slotOptions:m,hideNotFound:k}=this,C=m||[],v=C.find(R=>R.proxy.isShow);return(C.length===0||!v)&&(!u||u&&!l)&&!k},publicValue(){return this.multiple?this.values.map(l=>l.value):(this.values[0]||{}).value},canBeCleared(){const l=this.hasMouseHoverHead,u=!this.multiple&&!this.itemDisabled&&this.clearable;return l&&u&&this.reset},selectTabindex(){return this.itemDisabled||this.filterable?-1:0},remote(){return typeof this.remoteMethod=="function"}},methods:{setQuery(l){if(l){this.onQueryChange(l);return}l===null&&(this.onQueryChange(""),this.values=[],this.lastRemoteQuery="")},clearSingleSelect(){this.multiple||this.$emit("update:modelValue",""),this.$emit("on-clear"),this.hideMenu(),this.clearable&&this.reset()},getOptionData(l){const u=this.slotOptions.find(({props:C})=>C.value===l);if(!u)return null;const{optionLabel:m,disabled:k}=u.proxy||{};return{value:l,label:m,disabled:k}},getInitialValue(){const{multiple:l,remote:u,modelValue:m}=this;let k=Array.isArray(m)?m:[m];if(!l&&(typeof k[0]>"u"||String(k[0]).trim()===""&&!Number.isFinite(k[0]))&&(k=[]),u&&!l&&m){const C=this.getOptionData(m);this.query=C?C.label:String(m)}return k.filter(C=>!!C||C===0)},validateOption({children:l,elm:u,propsData:m}){const k=m.value,C=m.label||"",v=u&&u.textContent||(l||[]).reduce((G,W)=>{const j=W.elm?W.elm.textContent:W.text;return`${G} ${j}`},"")||"",R=this.filterByLabel?[C].toString():[k,C,v].toString(),B=this.query.toLowerCase().trim();return R.toLowerCase().includes(B)},toggleMenu(l,u){if(this.itemDisabled)return!1;this.visible=typeof u<"u"?u:!this.visible,this.visible&&(this.dropDownWidth=this.$el.getBoundingClientRect().width,this.$refs.dropdown.handleOnUpdatePopper())},hideMenu(){this.toggleMenu(null,!1),this.isTyping=!1,setTimeout(()=>this.unchangedQuery=!0,Io)},onClickOutside(l){if(this.visible){if(l.type==="mousedown"){l.preventDefault();return}if(this.transfer){const u=this.$refs.dropdown.$refs.drop;if(u===l.target||u.contains(l.target))return}if(this.filterable){const u=this.$el.querySelector('input[type="text"]');this.caretPosition=u.selectionStart,i.nextTick(()=>{const m=this.caretPosition===-1?u.value.length:this.caretPosition;u.setSelectionRange(m,m)})}this.autoComplete||l.stopPropagation(),l.preventDefault(),this.hideMenu(),this.isFocused=!0,this.$emit("on-clickoutside",l)}else this.caretPosition=-1,this.isFocused=!1},reset(){this.query="",this.focusIndex=-1,this.unchangedQuery=!0,this.values=[],this.filterQueryChange=!1},handleKeydown(l){const u=l.key||l.code,m=l.keyCode||l.which;if(!(u==="Backspace"||m===8))if(this.visible){if(l.preventDefault(),u==="Tab"&&l.stopPropagation(),u==="Escape"&&(l.stopPropagation(),this.hideMenu()),u==="ArrowUp"&&this.navigateOptions(-1),u==="ArrowDown"&&this.navigateOptions(1),u==="Enter"){if(this.focusIndex===-1)return this.hideMenu();const k=this.slotOptions[this.focusIndex];if(k){const C=this.getOptionData(k.props.value);this.onOptionClick(C)}else this.hideMenu()}}else["ArrowUp","ArrowDown"].includes(l.key)&&this.toggleMenu(null,!0)},navigateOptions(l){const u=this.slotOptions,m=u.length-1;if(m<0)return;let k=this.focusIndex+l;k<0&&(k=m),k>m&&(k=0);let C,v=null;if(l>0){C=-1;for(let R=0;R<u.length;R++){const{proxy:B}=u[R];if(!B.disabled&&(C=R),B.isShow&&v===null)v=R;else if(!B.isShow){C=R;continue}if(C>=k)break}}else{C=u.length;for(let R=m;R>=0;R--){const{proxy:B}=u[R];if(!B.disabled&&(C=R),B.isShow&&v===null)v=R;else if(!B.isShow){C=R;continue}if(C<=k)break}}k=u[C].proxy.isShow?C:v,this.focusIndex=k},onOptionClick(l){if(this.multiple?(this.remote?this.lastRemoteQuery=this.lastRemoteQuery||this.query:this.lastRemoteQuery="",this.values.find(({value:u})=>u===l.value)?this.values=this.values.filter(({value:u})=>u!==l.value):this.values=this.values.concat(l),this.isFocused=!0):(this.query=String(l.label).trim(),this.values=[l],this.lastRemoteQuery="",this.hideMenu()),this.focusIndex=this.slotOptions.findIndex(u=>u?u.props.value===l.value:!1),this.filterable){const u=this.$el.querySelector('input[type="text"]');this.autoComplete||i.nextTick(()=>u.focus())}this.$emit("on-select",l),this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.filterQueryChange=!1},Io)},onQueryChange(l){if(this.isTyping=!0,l.length>0&&l!==this.query)if(s&&this.autoComplete){let u=document.hasFocus&&document.hasFocus()&&document.activeElement===this.$el.querySelector("input");this.visible=u}else this.visible=!0;this.query=l,this.unchangedQuery=this.visible,this.filterQueryChange=!0},toggleHeaderFocus({type:l}){this.itemDisabled||(this.isFocused=l==="focus")},checkUpdateStatus(){this.getInitialValue().length>0&&this.slotOptions.length===0&&(this.hasExpectedValue=!0)},handleCreateItem(){if(this.allowCreate&&this.query!==""&&this.showCreateItem){const l=this.query;this.$emit("on-create",l),this.query="";const u={value:l,label:l,tag:void 0};this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.onOptionClick(u)})}},handleOnSelectSelected(l){this.onOptionClick(l)},focus(){this.filterable&&(this.$refs.selectHead.$refs.input.focus(),this.toggleMenu())},lazyUpdateValue(l){const{getInitialValue:u,isLocking:m,defaultLabel:k,remote:C,modelValue:v,values:R}=this,B=!!(k&&k.length);(v&&v.length||R.length||B)&&C&&l||m||(this.isLocking=!0,i.nextTick(()=>{this.values=u().map(this.getOptionData).filter(Boolean),this.isLocking=!1}))}},watch:{modelValue(l){const{publicValue:u,values:m}=this;this.checkUpdateStatus(),l===""?(this.values=[],this.query=""):us(l,u,m)&&(this.lazyUpdateValue(),this.multiple||this.handleFormItemChange("change",this.publicValue))},values(l,u){const m=JSON.stringify(l),k=JSON.stringify(u);let C=this.publicValue;if(m!==k&&C!==this.modelValue){let v=this.publicValue;this.labelInValue&&(this.multiple?v=this.values:v=this.values[0]),(Array.isArray(C)&&!C.length&&this.modelValue===null||C===void 0&&this.modelValue===null)&&(C=null),this.$emit("update:modelValue",C),this.$emit("on-change",v),this.handleFormItemChange("change",v)}},query(l){this.focusIndex=-1,this.$emit("on-query-change",l);const{remoteMethod:u,lastRemoteQuery:m}=this,k=u&&l!==""&&(l!==m||!m)&&!this.preventRemoteCall;if(this.preventRemoteCall=!1,k){const C=this.remoteMethod(l);this.initialLabel="",C&&C.then&&C.then(v=>{v&&(this.options=v)})}this.visible&&this.$refs.dropdown.handleOnUpdatePopper(),l!==""&&this.remote&&(this.lastRemoteQuery=l)},isFocused(l){(this.filterable?this.$el.querySelector('input[type="text"]'):this.$el)[this.isFocused?"focus":"blur"]();const[u]=this.values;if(u&&this.filterable&&!this.multiple&&!l){const m=String(u.label||u.value).trim();m&&this.query!==m&&(this.preventRemoteCall=!0,this.query=m)}},focusIndex(l){if(!(l<0||this.autoComplete)&&this.slotOptions[l]){const u=this.slotOptions[l].proxy.$el,m=this.$refs.dropdown.$refs.drop;let k=u.getBoundingClientRect().bottom-m.getBoundingClientRect().bottom,C=u.getBoundingClientRect().top-m.getBoundingClientRect().top;k>0&&(m.scrollTop+=k),C<0&&(m.scrollTop+=C)}},dropVisible(l){l?this.$refs.dropdown.handleOnUpdatePopper():this.$refs.dropdown.handleOnDestroyPopper()},visible(l){this.$emit("on-open-change",l)}}},ui=["tabindex"],Zh=["name","value"];function pn(l,u,m,k,C,v){const R=i.resolveComponent("select-head"),B=i.resolveComponent("Icon"),G=i.resolveComponent("Drop"),W=i.resolveDirective("click-outside");return i.withDirectives((i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.createElementVNode("div",{ref:"reference",class:i.normalizeClass(v.selectionCls),tabindex:v.selectTabindex,onBlur:u[2]||(u[2]=(...j)=>v.toggleHeaderFocus&&v.toggleHeaderFocus(...j)),onFocus:u[3]||(u[3]=(...j)=>v.toggleHeaderFocus&&v.toggleHeaderFocus(...j)),onClick:u[4]||(u[4]=(...j)=>v.toggleMenu&&v.toggleMenu(...j)),onKeydown:[u[5]||(u[5]=i.withKeys((...j)=>v.handleKeydown&&v.handleKeydown(...j),["esc"])),u[6]||(u[6]=i.withKeys((...j)=>v.handleKeydown&&v.handleKeydown(...j),["enter"])),u[7]||(u[7]=i.withKeys(i.withModifiers((...j)=>v.handleKeydown&&v.handleKeydown(...j),["prevent"]),["up"])),u[8]||(u[8]=i.withKeys(i.withModifiers((...j)=>v.handleKeydown&&v.handleKeydown(...j),["prevent"]),["down"])),u[9]||(u[9]=i.withKeys((...j)=>v.handleKeydown&&v.handleKeydown(...j),["tab"])),u[10]||(u[10]=i.withKeys((...j)=>v.handleKeydown&&v.handleKeydown(...j),["delete"]))],onMouseenter:u[11]||(u[11]=j=>C.hasMouseHoverHead=!0),onMouseleave:u[12]||(u[12]=j=>C.hasMouseHoverHead=!1)},[i.renderSlot(l.$slots,"input",{},()=>[i.createElementVNode("input",{type:"hidden",name:m.name,value:v.publicValue},null,8,Zh),i.createVNode(R,{ref:"selectHead",filterable:m.filterable,multiple:m.multiple,values:C.values,clearable:v.canBeCleared,prefix:m.prefix,disabled:l.itemDisabled,remote:v.remote,"input-element-id":m.elementId,"initial-label":C.initialLabel,placeholder:m.placeholder,"query-prop":C.query,"max-tag-count":m.maxTagCount,"max-tag-placeholder":m.maxTagPlaceholder,"allow-create":m.allowCreate,"show-create-item":v.showCreateItem,onOnQueryChange:v.onQueryChange,onOnInputFocus:u[0]||(u[0]=j=>C.isFocused=!0),onOnInputBlur:u[1]||(u[1]=j=>C.isFocused=!1),onOnClear:v.clearSingleSelect,onOnEnter:v.handleCreateItem},{prefix:i.withCtx(()=>[i.renderSlot(l.$slots,"prefix")]),_:3},8,["filterable","multiple","values","clearable","prefix","disabled","remote","input-element-id","initial-label","placeholder","query-prop","max-tag-count","max-tag-placeholder","allow-create","show-create-item","onOnQueryChange","onOnClear","onOnEnter"])])],42,ui),i.createVNode(G,{ref:"dropdown",classes:v.dropdownCls,visible:v.dropVisible,placement:m.placement,eventsEnabled:m.eventsEnabled,transfer:m.transfer,"transition-name":"transition-drop"},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls+"-not-found"])},[i.createElementVNode("li",null,i.toDisplayString(v.localeNotFoundText),1)],2),[[i.vShow,v.showNotFoundLabel&&!m.allowCreate]]),!v.remote||v.remote&&!m.loading?(i.openBlock(),i.createElementBlock("ul",{key:0,class:i.normalizeClass(C.prefixCls+"-dropdown-list")},[v.showCreateItem?(i.openBlock(),i.createElementBlock("li",{key:0,class:i.normalizeClass(C.prefixCls+"-item"),onClick:u[13]||(u[13]=(...j)=>v.handleCreateItem&&v.handleCreateItem(...j))},[i.createTextVNode(i.toDisplayString(C.query)+" ",1),i.createVNode(B,{type:"md-return-left",class:i.normalizeClass(C.prefixCls+"-item-enter")},null,8,["class"])],2)):i.createCommentVNode("",!0),i.renderSlot(l.$slots,"default")],2)):(i.openBlock(),i.createElementBlock("ul",{key:1,class:i.normalizeClass(C.prefixCls+"-dropdown-list")},[v.showCreateItem?(i.openBlock(),i.createElementBlock("li",{key:0,class:i.normalizeClass(C.prefixCls+"-item"),onClick:u[14]||(u[14]=(...j)=>v.handleCreateItem&&v.handleCreateItem(...j))},[i.createTextVNode(i.toDisplayString(C.query)+" ",1),i.createVNode(B,{type:"md-return-left",class:i.normalizeClass(C.prefixCls+"-item-enter")},null,8,["class"])],2)):i.createCommentVNode("",!0)],2)),i.withDirectives(i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls+"-loading"])},i.toDisplayString(v.localeLoadingText),3),[[i.vShow,m.loading]])]),_:3},8,["classes","visible","placement","eventsEnabled","transfer"])],2)),[[W,v.onClickOutside,m.capture],[W,v.onClickOutside,m.capture,{mousedown:!0}],[W,v.onClickOutside,m.capture,{touchstart:!0}]])}var ds=c(zi,[["render",pn]]);const Kh="ivu-select-item",Jh={name:"iOption",componentName:"select-item",mixins:[mi],emits:["on-select-selected"],inject:{SelectInstance:{default:null},OptionGroupInstance:{default:null}},props:{value:{type:[String,Number],required:!0},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},tag:{type:[String,Number]}},data(){return{searchLabel:"",autoComplete:!1,id:te(6),instance:null}},computed:{classes(){return[`${Kh}`,{[`${Kh}-disabled`]:this.itemDisabled,[`${Kh}-selected`]:this.selected&&!this.autoComplete,[`${Kh}-focus`]:this.isFocused}]},showLabel(){return this.label?this.label:this.value},optionLabel(){return this.label||this.$el&&this.$el.textContent},isFocused(){const l=this.SelectInstance;let u=l.slotOptions||[];const m=l.focusIndex,k=l.$slots.default;if(this.autoComplete&&k){u=[];let v=k();for(;v.length>0;){const R=v.shift();R.type&&typeof R.type=="object"&&R.type.name==="iOption"?u.push(R):Array.isArray(R.children)&&(v=v.concat(R.children))}}const C=u[m];return C&&C.props&&C.props.value===this.value},isShow(){const l=this.SelectInstance,u=l.filterable,m=l.query.toLowerCase().trim(),k=l.filterByLabel,C=l.slotOptionsMap,{props:v}=C.get(this.value)||{props:{}},R=this.label||this.$el&&this.$el.textContent;let B=(R||v.value||"").toLowerCase();k&&(B=(R||"").toLowerCase());const G=B.includes(m);return!u||u&&(G||!l.filterQueryChange)||$(l.remoteMethod)==="function"},selected(){return(this.SelectInstance.values||[]).find(l=>l.value===this.value)}},methods:{select(){if(this.itemDisabled)return!1;this.SelectInstance.handleOnSelectSelected({value:this.value,label:this.optionLabel,tag:this.tag})},addOption(){const l=this.SelectInstance,u=this.OptionGroupInstance,{id:m,value:k,instance:C}=this;if(u&&u.optionList.push({...C,id:m,tag:"option"}),l){l.slotOptions.push({...C,id:m,tag:"option"}),l.slotOptionsMap.set(k,C);const{modelValue:v}=l;(v&&v.length||$(v)==="number")&&l.lazyUpdateValue(!0)}},removeOption(){const l=this.OptionGroupInstance,u=this.SelectInstance,{id:m,value:k}=this;if(l){const C=l.optionList.findIndex(v=>v.id===m);C!==-1&&l.optionList.splice(C,1)}if(u){const C=this.SelectInstance,v=C.slotOptions.findIndex(R=>R.id===m);v!==-1&&C.slotOptions.splice(v,1),C.slotOptionsMap.has(k)&&C.slotOptionsMap.delete(k)}}},created(){this.instance=i.getCurrentInstance()},mounted(){this.addOption();const l=V(this,"iSelect");l&&(this.autoComplete=l.autoComplete)},beforeUnmount(){i.nextTick(()=>{this.removeOption(),this.instance=null})}};function dm(l,u,m,k,C,v){return i.withDirectives((i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.classes),onClick:u[0]||(u[0]=i.withModifiers((...R)=>v.select&&v.select(...R),["stop"])),onMousedown:u[1]||(u[1]=i.withModifiers(()=>{},["prevent"]))},[i.renderSlot(l.$slots,"default",{},()=>[i.createTextVNode(i.toDisplayString(v.showLabel),1)])],34)),[[i.vShow,v.isShow]])}var In=c(Jh,[["render",dm]]);const Va=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,fm=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let jr={},Is;function H_(l,u=!1){if(!s)return;const m=l.getAttribute("id")||l.getAttribute("data-reactid")||l.getAttribute("name");if(u&&jr[m])return jr[m];const k=window.getComputedStyle(l),C=k.getPropertyValue("box-sizing")||k.getPropertyValue("-moz-box-sizing")||k.getPropertyValue("-webkit-box-sizing"),v=parseFloat(k.getPropertyValue("padding-bottom"))+parseFloat(k.getPropertyValue("padding-top")),R=parseFloat(k.getPropertyValue("border-bottom-width"))+parseFloat(k.getPropertyValue("border-top-width")),B={sizingStyle:fm.map(G=>`${G}:${k.getPropertyValue(G)}`).join(";"),paddingSize:v,borderSize:R,boxSizing:C};return u&&m&&(jr[m]=B),B}function Dv(l,u=null,m=null,k=!1){s&&!Is&&(Is=document.createElement("textarea"),document.body.appendChild(Is)),l.getAttribute("wrap")?Is.setAttribute("wrap",l.getAttribute("wrap")):Is.removeAttribute("wrap");let{paddingSize:C,borderSize:v,boxSizing:R,sizingStyle:B}=H_(l,k);Is.setAttribute("style",`${B};${Va}`),Is.value=l.value||l.placeholder||"";let G=Number.MIN_SAFE_INTEGER,W=Number.MAX_SAFE_INTEGER,j=Is.scrollHeight,ce;if(R==="border-box"?j=j+v:R==="content-box"&&(j=j-C),u!==null||m!==null){Is.value=" ";let Oe=Is.scrollHeight-C;u!==null&&(G=Oe*u,R==="border-box"&&(G=G+C+v),j=Math.max(G,j)),m!==null&&(W=Oe*m,R==="border-box"&&(W=W+C+v),ce=j>W?"":"hidden",j=Math.min(W,j))}return m||(ce="hidden"),{height:`${j}px`,minHeight:`${G}px`,maxHeight:`${W}px`,overflowY:ce}}const tr="ivu-input",yG={name:"Input",mixins:[mi],emits:["on-enter","on-search","on-keydown","on-keypress","on-keyup","on-click","on-focus","on-blur","on-change","on-input-change","on-clear","update:modelValue"],props:{type:{validator(l){return _(l,["text","textarea","password","url","email","date","number","tel"])},default:"text"},modelValue:{type:[String,Number],default:""},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator(l){return _(l,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{currentValue:this.modelValue,prefixCls:tr,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType(){let l=this.type;return l==="password"&&this.password&&this.showPassword&&(l="text"),l},prepend(){let l=!1;return this.type!=="textarea"&&(l=this.$slots.prepend!==void 0),l},append(){let l=!1;return this.type!=="textarea"&&(l=this.$slots.append!==void 0),l},showPrefix(){let l=!1;return this.type!=="textarea"&&(l=this.prefix!==""||this.$slots.prefix!==void 0),l},showSuffix(){let l=!1;return this.type!=="textarea"&&(l=this.suffix!==""||this.$slots.suffix!==void 0),l},wrapClasses(){return[`${tr}-wrapper`,{[`${tr}-wrapper-${this.size}`]:!!this.size,[`${tr}-type-${this.type}`]:this.type,[`${tr}-group`]:this.prepend||this.append||this.search&&this.enterButton,[`${tr}-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,[`${tr}-group-with-prepend`]:this.prepend,[`${tr}-group-with-append`]:this.append||this.search&&this.enterButton,[`${tr}-hide-icon`]:this.append,[`${tr}-with-search`]:this.search&&this.enterButton,[`${tr}-wrapper-disabled`]:this.itemDisabled}]},inputClasses(){return[`${tr}`,{[`${tr}-${this.size}`]:!!this.size,[`${tr}-disabled`]:this.itemDisabled,[`${tr}-no-border`]:!this.border,[`${tr}-with-prefix`]:this.showPrefix,[`${tr}-with-suffix`]:this.showSuffix||this.search&&this.enterButton===!1}]},textareaClasses(){return[`${tr}`,{[`${tr}-disabled`]:this.itemDisabled,[`${tr}-no-border`]:!this.border}]},upperLimit(){return this.maxlength},textLength(){return typeof this.modelValue=="number"?String(this.modelValue).length:(this.modelValue||"").length},clearableStyles(){const l={};let u=this.clearableIconOffset;return u&&(l.transform=`translateX(-${u}px)`),l}},methods:{handleEnter(l){this.$emit("on-enter",l),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(l){this.$emit("on-keydown",l)},handleKeypress(l){this.$emit("on-keypress",l)},handleKeyup(l){this.$emit("on-keyup",l)},handleIconClick(l){this.$emit("on-click",l)},handleFocus(l){this.$emit("on-focus",l)},handleBlur(l){this.$emit("on-blur",l),V(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},handleComposition(l){l.type==="compositionstart"&&(this.isOnComposition=!0),l.type==="compositionend"&&(this.isOnComposition=!1,this.handleInput(l))},handleInput(l){if(this.isOnComposition)return;let u=l.target.value;this.number&&u!==""&&(u=Number.isNaN(Number(u))?u:Number(u)),this.$emit("update:modelValue",u),this.setCurrentValue(u),this.$emit("on-change",l)},handleChange(l){this.$emit("on-input-change",l)},setCurrentValue(l){l!==this.currentValue&&(i.nextTick(()=>{this.resizeTextarea()}),this.currentValue=l,V(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("change",l))},resizeTextarea(){const l=this.autosize;if(!l||this.type!=="textarea")return!1;const u=l.minRows,m=l.maxRows;this.textareaStyles=Dv(this.$refs.textarea,u,m)},focus(l){const u=this.type==="textarea"?this.$refs.textarea:this.$refs.input;u.focus(l);const{cursor:m}=l||{};if(m){const k=u.value.length;switch(m){case"start":u.setSelectionRange(0,0);break;case"end":u.setSelectionRange(k,k);break;default:u.setSelectionRange(0,k)}}},blur(){this.type==="textarea"?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){const l={target:{value:""}};this.$emit("update:modelValue",""),this.setCurrentValue(""),this.$emit("on-change",l),this.$emit("on-clear")},handleSearch(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword(){if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();const l=this.currentValue.length;setTimeout(()=>{this.$refs.input.setSelectionRange(l,l)},0)},handleCalcIconOffset(){const l=this.$el.querySelectorAll(".ivu-input-group-append")[0];l?this.clearableIconOffset=l.offsetWidth:this.clearableIconOffset=0}},watch:{modelValue(l){this.setCurrentValue(l)},type(){i.nextTick(this.handleCalcIconOffset)}},mounted(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated(){i.nextTick(this.handleCalcIconOffset)}},vG={key:4,class:"ivu-input-suffix"},bG={key:5,class:"ivu-input-word-count"},xG={key:0,class:"ivu-icon ivu-icon-ios-eye-outline"},OG={key:1,class:"ivu-icon ivu-icon-ios-eye-off-outline"},wG=["id","autocomplete","spellcheck","type","placeholder","disabled","maxlength","readonly","name","value","number","autofocus"],_G={key:0,class:"ivu-icon ivu-icon-ios-search"},SG={key:9,class:"ivu-input-prefix"},CG=["id","wrap","autocomplete","spellcheck","placeholder","disabled","rows","maxlength","readonly","name","value","autofocus"],kG={key:0,class:"ivu-input-word-count"};function TG(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[m.type!=="textarea"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[v.prepend?i.withDirectives((i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-group-prepend"])},[i.renderSlot(l.$slots,"prepend")],2)),[[i.vShow,C.slotReady]]):i.createCommentVNode("",!0),m.clearable&&C.currentValue&&!l.itemDisabled?(i.openBlock(),i.createElementBlock("i",{key:1,class:i.normalizeClass(["ivu-icon",["ivu-icon-ios-close-circle",C.prefixCls+"-icon",C.prefixCls+"-icon-clear",C.prefixCls+"-icon-normal"]]),onClick:u[0]||(u[0]=(...R)=>v.handleClear&&v.handleClear(...R)),style:i.normalizeStyle(v.clearableStyles)},null,6)):m.icon?(i.openBlock(),i.createElementBlock("i",{key:2,class:i.normalizeClass(["ivu-icon",["ivu-icon-"+m.icon,C.prefixCls+"-icon",C.prefixCls+"-icon-normal"]]),onClick:u[1]||(u[1]=(...R)=>v.handleIconClick&&v.handleIconClick(...R))},null,2)):m.search&&m.enterButton===!1?(i.openBlock(),i.createElementBlock("i",{key:3,class:i.normalizeClass(["ivu-icon ivu-icon-ios-search",[C.prefixCls+"-icon",C.prefixCls+"-icon-normal",C.prefixCls+"-search-icon"]]),onClick:u[2]||(u[2]=(...R)=>v.handleSearch&&v.handleSearch(...R))},null,2)):v.showSuffix?(i.openBlock(),i.createElementBlock("span",vG,[i.renderSlot(l.$slots,"suffix",{},()=>[m.suffix?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass(["ivu-icon",["ivu-icon-"+m.suffix]])},null,2)):i.createCommentVNode("",!0)])])):m.showWordLimit?(i.openBlock(),i.createElementBlock("span",bG,i.toDisplayString(v.textLength)+"/"+i.toDisplayString(v.upperLimit),1)):m.password?(i.openBlock(),i.createElementBlock("span",{key:6,class:"ivu-input-suffix",onClick:u[3]||(u[3]=(...R)=>v.handleToggleShowPassword&&v.handleToggleShowPassword(...R))},[C.showPassword?(i.openBlock(),i.createElementBlock("i",xG)):(i.openBlock(),i.createElementBlock("i",OG))])):i.createCommentVNode("",!0),i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[m.icon?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass(["ivu-icon ivu-icon-ios-loading ivu-load-loop",[C.prefixCls+"-icon",C.prefixCls+"-icon-validate"]])},null,2))]),_:1}),i.createElementVNode("input",{id:m.elementId,autocomplete:m.autocomplete,spellcheck:m.spellcheck,ref:"input",type:v.currentType,class:i.normalizeClass(v.inputClasses),placeholder:m.placeholder,disabled:l.itemDisabled,maxlength:m.maxlength,readonly:m.readonly,name:m.name,value:C.currentValue,number:m.number,autofocus:m.autofocus,onKeyup:[u[4]||(u[4]=i.withKeys((...R)=>v.handleEnter&&v.handleEnter(...R),["enter"])),u[5]||(u[5]=(...R)=>v.handleKeyup&&v.handleKeyup(...R))],onKeypress:u[6]||(u[6]=(...R)=>v.handleKeypress&&v.handleKeypress(...R)),onKeydown:u[7]||(u[7]=(...R)=>v.handleKeydown&&v.handleKeydown(...R)),onFocus:u[8]||(u[8]=(...R)=>v.handleFocus&&v.handleFocus(...R)),onBlur:u[9]||(u[9]=(...R)=>v.handleBlur&&v.handleBlur(...R)),onCompositionstart:u[10]||(u[10]=(...R)=>v.handleComposition&&v.handleComposition(...R)),onCompositionupdate:u[11]||(u[11]=(...R)=>v.handleComposition&&v.handleComposition(...R)),onCompositionend:u[12]||(u[12]=(...R)=>v.handleComposition&&v.handleComposition(...R)),onInput:u[13]||(u[13]=(...R)=>v.handleInput&&v.handleInput(...R)),onChange:u[14]||(u[14]=(...R)=>v.handleChange&&v.handleChange(...R))},null,42,wG),v.append?i.withDirectives((i.openBlock(),i.createElementBlock("div",{key:7,class:i.normalizeClass([C.prefixCls+"-group-append"])},[i.renderSlot(l.$slots,"append")],2)),[[i.vShow,C.slotReady]]):m.search&&m.enterButton?(i.openBlock(),i.createElementBlock("div",{key:8,class:i.normalizeClass([C.prefixCls+"-group-append",C.prefixCls+"-search"]),onClick:u[15]||(u[15]=(...R)=>v.handleSearch&&v.handleSearch(...R))},[m.enterButton===!0?(i.openBlock(),i.createElementBlock("i",_G)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createTextVNode(i.toDisplayString(m.enterButton),1)],64))],2)):v.showPrefix?(i.openBlock(),i.createElementBlock("span",SG,[i.renderSlot(l.$slots,"prefix",{},()=>[m.prefix?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass(["ivu-icon",["ivu-icon-"+m.prefix]])},null,2)):i.createCommentVNode("",!0)])])):i.createCommentVNode("",!0)],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createElementVNode("textarea",{id:m.elementId,wrap:m.wrap,autocomplete:m.autocomplete,spellcheck:m.spellcheck,ref:"textarea",class:i.normalizeClass(v.textareaClasses),style:i.normalizeStyle(C.textareaStyles),placeholder:m.placeholder,disabled:l.itemDisabled,rows:m.rows,maxlength:m.maxlength,readonly:m.readonly,name:m.name,value:C.currentValue,autofocus:m.autofocus,onKeyup:[u[16]||(u[16]=i.withKeys((...R)=>v.handleEnter&&v.handleEnter(...R),["enter"])),u[17]||(u[17]=(...R)=>v.handleKeyup&&v.handleKeyup(...R))],onKeypress:u[18]||(u[18]=(...R)=>v.handleKeypress&&v.handleKeypress(...R)),onKeydown:u[19]||(u[19]=(...R)=>v.handleKeydown&&v.handleKeydown(...R)),onFocus:u[20]||(u[20]=(...R)=>v.handleFocus&&v.handleFocus(...R)),onBlur:u[21]||(u[21]=(...R)=>v.handleBlur&&v.handleBlur(...R)),onCompositionstart:u[22]||(u[22]=(...R)=>v.handleComposition&&v.handleComposition(...R)),onCompositionupdate:u[23]||(u[23]=(...R)=>v.handleComposition&&v.handleComposition(...R)),onCompositionend:u[24]||(u[24]=(...R)=>v.handleComposition&&v.handleComposition(...R)),onInput:u[25]||(u[25]=(...R)=>v.handleInput&&v.handleInput(...R))},`
            `,46,CG),m.showWordLimit?(i.openBlock(),i.createElementBlock("span",kG,i.toDisplayString(v.textLength)+"/"+i.toDisplayString(v.upperLimit),1)):i.createCommentVNode("",!0)],64))],2)}var Do=c(yG,[["render",TG]]);const MG={name:"AutoComplete",mixins:[mi],components:{iSelect:ds,iOption:In,iInput:Do},emits:["update:modelValue","on-change","on-search","on-select","on-focus","on-blur","on-clear"],props:{modelValue:{type:[String,Number],default:""},label:{type:[String,Number],default:""},data:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},icon:{type:String},filterMethod:{type:[Function,Boolean],default:!1},placement:{validator(l){return _(l,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},transferClassName:{type:String},capture:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return l.$VIEWUI?l.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,disableEmitChange:!1}},computed:{inputIcon(){let l="";return this.clearable&&this.currentValue&&!this.disabled?l="ios-close-circle":this.icon&&(l=this.icon),l},filteredData(){return this.filterMethod?this.data.filter(l=>this.filterMethod(this.currentValue,l)):this.data}},watch:{modelValue(l){this.currentValue!==l&&(this.disableEmitChange=!0),this.currentValue=l},currentValue(l){if(this.$refs.select.setQuery(l),this.$emit("update:modelValue",l),this.disableEmitChange){this.disableEmitChange=!1;return}this.$emit("on-change",l),this.handleFormItemChange("change",l)}},methods:{remoteMethod(l){this.$emit("on-search",l)},handleSelect(l){const u=l.value;u!=null&&(this.currentValue=u,this.$refs.input.blur(),this.$emit("on-select",u))},handleFocus(l){this.$emit("on-focus",l)},handleBlur(l){this.$emit("on-blur",l)},handleClear(){!this.clearable||(this.currentValue="",this.$refs.select.reset(),this.$emit("on-clear"))},handleClickOutside(){i.nextTick(()=>{this.$refs.input.blur()})}}};function EG(l,u,m,k,C,v){const R=i.resolveComponent("i-input"),B=i.resolveComponent("i-option"),G=i.resolveComponent("i-select");return i.openBlock(),i.createBlock(G,{ref:"select",class:"ivu-auto-complete",label:m.label,disabled:l.itemDisabled,clearable:m.clearable,placeholder:m.placeholder,size:m.size,placement:m.placement,"model-value":C.currentValue,"transfer-class-name":m.transferClassName,filterable:"",remote:"","auto-complete":"","remote-method":v.remoteMethod,onOnSelect:v.handleSelect,onOnClickoutside:v.handleClickOutside,transfer:m.transfer,capture:m.capture,eventsEnabled:m.eventsEnabled},{input:i.withCtx(()=>[i.renderSlot(l.$slots,"input",{},()=>[i.createVNode(R,{"element-id":m.elementId,ref:"input",modelValue:C.currentValue,"onUpdate:modelValue":u[0]||(u[0]=W=>C.currentValue=W),name:m.name,placeholder:m.placeholder,disabled:l.itemDisabled,size:m.size,icon:v.inputIcon,onOnClick:v.handleClear,onOnFocus:v.handleFocus,onOnBlur:v.handleBlur},null,8,["element-id","modelValue","name","placeholder","disabled","size","icon","onOnClick","onOnFocus","onOnBlur"])])]),default:i.withCtx(()=>[i.renderSlot(l.$slots,"default",{},()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.filteredData,W=>(i.openBlock(),i.createBlock(B,{value:W,key:W},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(W),1)]),_:2},1032,["value"]))),128))])]),_:3},8,["label","disabled","clearable","placeholder","size","placement","model-value","transfer-class-name","remote-method","onOnSelect","onOnClickoutside","transfer","capture","eventsEnabled"])}var IA=c(MG,[["render",EG]]);const Dd="ivu-avatar",DA=["small","large","default"],PG={name:"Avatar",components:{Icon:S},emits:["on-error"],props:{shape:{validator(l){return _(l,["circle","square"])},default:"circle"},size:{type:[String,Number],default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},src:{type:String},icon:{type:String},customIcon:{type:String,default:""}},data(){return{prefixCls:Dd,scale:1,childrenWidth:0,isSlotShow:!1,slotTemp:null}},computed:{classes(){return[`${Dd}`,`${Dd}-${this.shape}`,{[`${Dd}-image`]:!!this.src,[`${Dd}-icon`]:!!this.icon||!!this.customIcon,[`${Dd}-${this.size}`]:_(this.size,DA)}]},styles(){let l={};return this.size&&!_(this.size,DA)&&(l.width=`${this.size}px`,l.height=`${this.size}px`,l.lineHeight=`${this.size}px`,l.fontSize=`${this.size/2}px`),l},childrenStyle(){let l={};return this.isSlotShow&&(l={msTransform:`scale(${this.scale})`,WebkitTransform:`scale(${this.scale})`,transform:`scale(${this.scale})`,position:"absolute",display:"inline-block",left:`calc(50% - ${Math.round(this.childrenWidth/2)}px)`}),l}},watch:{size(l,u){l!==u&&this.setScale()}},methods:{setScale(){if(this.isSlotShow=!this.src&&!this.icon,this.$refs.children){this.childrenWidth=this.$refs.children.offsetWidth;const l=this.$el.getBoundingClientRect().width;l-8<this.childrenWidth?this.scale=(l-8)/this.childrenWidth:this.scale=1}},handleError(l){this.$emit("on-error",l)}},beforeCreate(){this.slotTemp=this.$slots.default?this.$slots.default():null},mounted(){this.setScale()},updated(){const l=this.$slots.default?this.$slots.default():null;l&&l!==this.slotTemp&&this.setScale()}},AG=["src"];function RG(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("span",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.styles)},[m.src?(i.openBlock(),i.createElementBlock("img",{key:0,src:m.src,onError:u[0]||(u[0]=(...B)=>v.handleError&&v.handleError(...B))},null,40,AG)):m.icon||m.customIcon?(i.openBlock(),i.createBlock(R,{key:1,type:m.icon,custom:m.customIcon},null,8,["type","custom"])):(i.openBlock(),i.createElementBlock("span",{key:2,ref:"children",class:i.normalizeClass([C.prefixCls+"-string"]),style:i.normalizeStyle(v.childrenStyle)},[i.renderSlot(l.$slots,"default")],6))],6)}var pm=c(PG,[["render",RG]]),NA={emits:["on-popper-show","on-popper-hide","created","update:modelValue"],props:{eventsEnabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:Object,popper:Object,offset:{default:0},modelValue:{type:Boolean,default:!1},transition:String,options:{type:Object,default(){return{modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:"window"}}}}}},data(){return{visible:this.modelValue}},watch:{modelValue:{immediate:!0,handler(l){this.visible=l,this.$emit("update:modelValue",l)}},visible(l){l?(this.handleIndexIncrease&&this.handleIndexIncrease(),this.updatePopper(),this.$emit("on-popper-show")):this.$emit("on-popper-hide"),this.$emit("update:modelValue",l)}},methods:{createPopper(){if(!/^(top|bottom|left|right)(-start|-end)?$/g.test(this.placement))return;const l=this.options,u=this.popper||this.$refs.popper,m=this.reference||this.$refs.reference;!u||!m||(this.popperJS&&this.popperJS.hasOwnProperty("destroy")&&this.popperJS.destroy(),l.eventsEnabled=this.eventsEnabled,l.placement=this.placement,l.modifiers.offset||(l.modifiers.offset={}),l.modifiers.offset.offset=this.offset,l.onCreate=()=>{i.nextTick(this.updatePopper),this.$emit("created",this)},this.popperJS=new fe(m,u,l))},updatePopper(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy(){this.visible||(this.popperJS.destroy(),this.popperJS=null)}},updated(){i.nextTick(()=>this.updatePopper())},beforeUnmount(){this.popperJS&&this.popperJS.destroy()}};const Nd="ivu-tooltip",IG={name:"Tooltip",mixins:[NA],props:{placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},content:{type:[String,Number],default:""},delay:{type:Number,default:100},disabled:{type:Boolean,default:!1},controlled:{type:Boolean,default:!1},always:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},theme:{validator(l){return _(l,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number]},transferClassName:{type:String}},data(){return{prefixCls:Nd,tIndex:this.handleGetIndex()}},computed:{innerStyles(){const l={};return this.maxWidth&&(l["max-width"]=`${this.maxWidth}px`),l},innerClasses(){return[`${Nd}-inner`,{[`${Nd}-inner-with-width`]:!!this.maxWidth}]},dropStyles(){let l={};return this.transfer&&(l["z-index"]=1060+this.tIndex),l},dropdownCls(){return[`${Nd}-popper`,`${Nd}-${this.theme}`,{[Nd+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]}},watch:{content(){this.updatePopper()}},methods:{handleShowPopper(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!0},this.delay),this.tIndex=this.handleGetIndex()},handleClosePopper(){this.timeout&&(clearTimeout(this.timeout),this.controlled||(this.timeout=setTimeout(()=>{this.visible=!1},100)))},handleGetIndex(){return Qe(),we}},mounted(){this.always&&this.updatePopper()}};function DG(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls]),onMouseenter:u[2]||(u[2]=(...R)=>v.handleShowPopper&&v.handleShowPopper(...R)),onMouseleave:u[3]||(u[3]=(...R)=>v.handleClosePopper&&v.handleClosePopper(...R))},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-rel"]),ref:"reference"},[i.renderSlot(l.$slots,"default")],2),(i.openBlock(),i.createBlock(i.Teleport,{to:"body",disabled:!m.transfer},[i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("div",{ref:"popper",class:i.normalizeClass(v.dropdownCls),style:i.normalizeStyle(v.dropStyles),onMouseenter:u[0]||(u[0]=(...R)=>v.handleShowPopper&&v.handleShowPopper(...R)),onMouseleave:u[1]||(u[1]=(...R)=>v.handleClosePopper&&v.handleClosePopper(...R))},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-arrow"])},null,2),i.createElementVNode("div",{class:i.normalizeClass(v.innerClasses),style:i.normalizeStyle(v.innerStyles)},[i.renderSlot(l.$slots,"content",{},()=>[i.createTextVNode(i.toDisplayString(m.content),1)])],6)],2)],38),[[i.vShow,!m.disabled&&(l.visible||m.always)]])]),_:3})],8,["disabled"]))],34)}var Ol=c(IG,[["render",DG]]);const NG={name:"AvatarList",components:{Avatar:pm,Tooltip:Ol},props:{list:{type:Array,default(){return[]}},shape:{validator(l){return _(l,["circle","square"])},default:"circle"},size:{validator(l){return _(l,["small","large","default"])},default:"default"},excessStyle:{type:Object,default(){return{}}},max:{type:Number},tooltip:{type:Boolean,default:!0},placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}}},computed:{currentList(){const l=this.list.length,u=this.max;return l<=u?[...this.list]:[...this.list].slice(0,u)}}},$G={key:0,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"},VG={key:1,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"};function LG(l,u,m,k,C,v){const R=i.resolveComponent("Avatar"),B=i.resolveComponent("Tooltip");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-avatar-list","ivu-avatar-list-"+m.size])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.currentList,(G,W)=>(i.openBlock(),i.createElementBlock("div",{class:"ivu-avatar-list-item",key:W},[m.tooltip&&G.tip?(i.openBlock(),i.createBlock(B,{key:0,content:G.tip,placement:m.placement,transfer:m.transfer},{default:i.withCtx(()=>[i.createVNode(R,{src:G.src,size:m.size,shape:m.shape},null,8,["src","size","shape"])]),_:2},1032,["content","placement","transfer"])):(i.openBlock(),i.createBlock(R,{key:1,src:G.src,size:m.size,shape:m.shape},null,8,["src","size","shape"]))]))),128)),l.$slots.extra?(i.openBlock(),i.createElementBlock("div",$G,[i.createVNode(R,{size:m.size,shape:m.shape,style:i.normalizeStyle(m.excessStyle)},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"extra")]),_:3},8,["size","shape","style"])])):m.list.length>m.max?(i.openBlock(),i.createElementBlock("div",VG,[i.createVNode(R,{size:m.size,shape:m.shape,style:i.normalizeStyle(m.excessStyle)},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"excess",{},()=>[i.createTextVNode("+"+i.toDisplayString(m.list.length-m.max),1)])]),_:3},8,["size","shape","style"])])):i.createCommentVNode("",!0)],2)}var $A=c(NG,[["render",LG]]);const G_="ivu-back-top",BG={name:"BackTop",emits:["on-click"],props:{height:{type:Number,default:400},bottom:{type:Number,default:30},right:{type:Number,default:30},duration:{type:Number,default:1e3}},data(){return{backTop:!1}},mounted(){o(window,"scroll",this.handleScroll),o(window,"resize",this.handleScroll)},beforeUnmount(){a(window,"scroll",this.handleScroll),a(window,"resize",this.handleScroll)},computed:{classes(){return[`${G_}`,{[`${G_}-show`]:this.backTop}]},styles(){return{bottom:`${this.bottom}px`,right:`${this.right}px`}},innerClasses(){return`${G_}-inner`}},methods:{handleScroll(){!s||(this.backTop=window.pageYOffset>=this.height)},back(){if(!s)return;const l=document.documentElement.scrollTop||document.body.scrollTop;N(window,l,0,this.duration),this.$emit("on-click")}}},UG=[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-up"},null,-1)];function FG(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.styles),onClick:u[0]||(u[0]=(...R)=>v.back&&v.back(...R))},[i.renderSlot(l.$slots,"default",{},()=>[i.createElementVNode("div",{class:i.normalizeClass(v.innerClasses)},UG,2)])],6)}var VA=c(BG,[["render",FG]]);const LA=["blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],La="ivu-badge",zG={name:"Badge",props:{count:Number,dot:{type:Boolean,default:!1},overflowCount:{type:[Number,String],default:99},className:String,showZero:{type:Boolean,default:!1},text:{type:String,default:""},status:{validator(l){return _(l,["success","processing","default","error","warning"])}},type:{validator(l){return _(l,["success","primary","normal","error","warning","info"])}},offset:{type:Array},color:{type:String}},computed:{classes(){return`${La}`},dotClasses(){return`${La}-dot`},countClasses(){return[`${La}-count`,{[`${this.className}`]:!!this.className,[`${La}-count-alone`]:this.alone,[`${La}-count-${this.type}`]:!!this.type}]},customCountClasses(){return[`${La}-count`,`${La}-count-custom`,{[`${this.className}`]:!!this.className}]},statusClasses(){return[`${La}-status-dot`,{[`${La}-status-${this.status}`]:!!this.status,[`${La}-status-${this.color}`]:!!this.color&&_(this.color,LA)}]},statusStyles(){return _(this.color,LA)?{}:{backgroundColor:this.color}},styles(){const l={};return this.offset&&this.offset.length===2&&(l["margin-top"]=`${this.offset[0]}px`,l["margin-right"]=`${this.offset[1]}px`),l},finalCount(){return this.text!==""?this.text:parseInt(this.count)>=parseInt(this.overflowCount)?`${this.overflowCount}+`:this.count},badge(){let l=!1;return this.count&&(l=parseInt(this.count)!==0),this.dot&&(l=!0,this.count!==null&&parseInt(this.count)===0&&(l=!1)),this.text!==""&&(l=!0),l||this.showZero},hasCount(){return!!(this.count||this.text!==""||this.showZero&&parseInt(this.count)===0)},alone(){return this.$slots.default===void 0}}},XG={class:"ivu-badge-status-text"};function WG(l,u,m,k,C,v){return m.dot?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(v.classes),ref:"badge"},[i.renderSlot(l.$slots,"default"),i.withDirectives(i.createElementVNode("sup",{class:i.normalizeClass(v.dotClasses),style:i.normalizeStyle(v.styles)},null,6),[[i.vShow,v.badge]])],2)):m.status||m.color?(i.openBlock(),i.createElementBlock("span",{key:1,class:i.normalizeClass([v.classes,"ivu-badge-status"]),ref:"badge"},[i.createElementVNode("span",{class:i.normalizeClass(v.statusClasses),style:i.normalizeStyle(v.statusStyles)},null,6),i.createElementVNode("span",XG,[i.renderSlot(l.$slots,"text",{},()=>[i.createTextVNode(i.toDisplayString(m.text),1)])])],2)):(i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass(v.classes),ref:"badge"},[i.renderSlot(l.$slots,"default"),l.$slots.count?(i.openBlock(),i.createElementBlock("sup",{key:0,style:i.normalizeStyle(v.styles),class:i.normalizeClass(v.customCountClasses)},[i.renderSlot(l.$slots,"count")],6)):v.hasCount?i.withDirectives((i.openBlock(),i.createElementBlock("sup",{key:1,style:i.normalizeStyle(v.styles),class:i.normalizeClass(v.countClasses)},[i.renderSlot(l.$slots,"text",{},()=>[i.createTextVNode(i.toDisplayString(v.finalCount),1)])],6)),[[i.vShow,v.badge]]):i.createCommentVNode("",!0)],2))}var Nv=c(zG,[["render",WG]]);const QG={name:"Breadcrumb",provide(){return{BreadcrumbInstance:this}},props:{separator:{type:String,default:"/"}}},HG={class:"ivu-breadcrumb"};function GG(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",HG,[i.renderSlot(l.$slots,"default")])}var Y_=c(QG,[["render",GG]]);const BA="ivu-breadcrumb-item",YG={name:"BreadcrumbItem",mixins:[pe],inject:["BreadcrumbInstance"],props:{},data(){return{showSeparator:!1}},computed:{linkClasses(){return`${BA}-link`},separatorClasses(){return`${BA}-separator`},separator(){return this.BreadcrumbInstance.separator}},mounted(){this.showSeparator=this.$slots.separator!==void 0}},jG=["href","target"],qG=["innerHTML"];function ZG(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("span",null,[l.to?(i.openBlock(),i.createElementBlock("a",{key:0,href:l.linkUrl,target:l.target,class:i.normalizeClass(v.linkClasses),onClick:[u[0]||(u[0]=i.withModifiers(R=>l.handleCheckClick(R,!1),["exact"])),u[1]||(u[1]=i.withModifiers(R=>l.handleCheckClick(R,!0),["ctrl"])),u[2]||(u[2]=i.withModifiers(R=>l.handleCheckClick(R,!0),["meta"]))]},[i.renderSlot(l.$slots,"default")],10,jG)):(i.openBlock(),i.createElementBlock("span",{key:1,class:i.normalizeClass(v.linkClasses)},[i.renderSlot(l.$slots,"default")],2)),C.showSeparator?(i.openBlock(),i.createElementBlock("span",{key:3,class:i.normalizeClass(v.separatorClasses)},[i.renderSlot(l.$slots,"separator")],2)):(i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass(v.separatorClasses),innerHTML:v.separator},null,10,qG))])}var j_=c(YG,[["render",ZG]]);const Oc="ivu-btn",fs={name:"Button",mixins:[pe,mi],components:{Icon:S},emits:["click"],props:{type:{validator(l){return _(l,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator(l){return _(l,["circle","circle-outline"])}},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator(l){return _(l,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{showSlot(){return!!this.$slots.default},classes(){return[`${Oc}`,`${Oc}-${this.type}`,{[`${Oc}-long`]:this.long,[`${Oc}-${this.shape}`]:!!this.shape,[`${Oc}-${this.size}`]:this.size!=="default",[`${Oc}-loading`]:this.loading!=null&&this.loading,[`${Oc}-icon-only`]:!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),[`${Oc}-ghost`]:this.ghost}]},isHrefPattern(){const{to:l}=this;return!!l},tagName(){const{isHrefPattern:l}=this;return l?"a":"button"},tagProps(){const{isHrefPattern:l}=this;if(l){const{linkUrl:u,target:m}=this;return{href:u,target:m}}else{const{htmlType:u}=this;return{type:u}}}},methods:{handleClickLink(l){this.$emit("click",l);const u=l.ctrlKey||l.metaKey;this.handleCheckClick(l,u)}},render(){let l;this.tagName==="button"?l="button":this.tagName==="a"&&(l="a");let u=[];return this.loading&&u.push(i.h(S,{class:"ivu-load-loop",type:"ios-loading"})),(this.icon||this.customIcon)&&!this.loading&&u.push(i.h(S,{type:this.icon,custom:this.customIcon})),this.$slots.default&&u.push(i.h("span",{ref:"slot"},this.$slots.default())),i.h(l,{class:this.classes,disabled:this.itemDisabled,onClick:this.handleClickLink,...this.tagProps},u)}},$v="ivu-btn-group",KG={name:"ButtonGroup",props:{size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},shape:{validator(l){return _(l,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes(){return[`${$v}`,{[`${$v}-${this.size}`]:!!this.size,[`${$v}-${this.shape}`]:!!this.shape,[`${$v}-vertical`]:this.vertical}]}}};function JG(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.renderSlot(l.$slots,"default")],2)}var q_=c(KG,[["render",JG]]);const mm="ivu-radio-group";let eY=0;const tY=Date.now(),iY={name:"RadioGroup",mixins:[mi],emits:["update:modelValue","on-change"],provide(){return{RadioGroupInstance:this}},props:{modelValue:{type:[String,Number],default:""},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},type:{validator(l){return _(l,["button"])}},vertical:{type:Boolean,default:!1},name:{type:String,default:()=>`ivuRadioGroup_${tY}_${eY++}`},buttonStyle:{validator(l){return _(l,["default","solid"])},default:"default"}},data(){return{currentValue:this.modelValue,children:[]}},computed:{classes(){return[`${mm}`,{[`${mm}-${this.size}`]:!!this.size,[`ivu-radio-${this.size}`]:!!this.size,[`${mm}-${this.type}`]:!!this.type,[`${mm}-button-${this.buttonStyle}`]:this.type==="button"&&this.buttonStyle!=="default",[`${mm}-vertical`]:this.vertical}]}},methods:{change(l){this.currentValue=l.value,this.$emit("update:modelValue",l.value),this.$emit("on-change",l.value),this.handleFormItemChange("change",l.value)}},watch:{modelValue(){this.currentValue!==this.modelValue&&(this.currentValue=this.modelValue)}}},nY=["name"];function rY(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),name:m.name},[i.renderSlot(l.$slots,"default")],10,nY)}var Vv=c(iY,[["render",rY]]);const no="ivu-radio",sY={name:"Radio",mixins:[mi],emits:["update:modelValue","on-change"],inject:{RadioGroupInstance:{default:null}},props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{groupName:this.name,parent:this.RadioGroupInstance,focusWrapper:!1,focusInner:!1}},computed:{wrapClasses(){return[`${no}-wrapper`,{[`${no}-group-item`]:this.group,[`${no}-wrapper-checked`]:this.currentValue,[`${no}-wrapper-disabled`]:this.itemDisabled,[`${no}-${this.size}`]:!!this.size,[`${no}-focus`]:this.focusWrapper,[`${no}-border`]:this.border}]},radioClasses(){return[`${no}`,{[`${no}-checked`]:this.currentValue,[`${no}-disabled`]:this.itemDisabled}]},innerClasses(){return[`${no}-inner`,{[`${no}-focus`]:this.focusInner}]},inputClasses(){return`${no}-input`},currentValue(){return this.RadioGroupInstance?this.RadioGroupInstance.currentValue===this.label:this.modelValue===this.trueValue},group(){return!!this.RadioGroupInstance}},mounted(){this.parent&&(this.name&&this.name!==this.parent.name?console.warn&&console.warn("[View UI] Name does not match Radio Group name."):this.groupName=this.parent.name)},methods:{change(l){if(this.itemDisabled)return!1;const u=l.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",u),this.group?this.label!==void 0&&this.parent.change({value:this.label,checked:this.modelValue}):(this.$emit("on-change",u),this.handleFormItemChange("change",u))},onBlur(){this.focusWrapper=!1,this.focusInner=!1},onFocus(){this.group&&this.parent.type==="button"?this.focusWrapper=!0:this.focusInner=!0}},watch:{modelValue(l){if(!(l===this.trueValue||l===this.falseValue))throw"Value should be trueValue or falseValue."}}},oY=["disabled","checked","name"];function aY(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("label",{class:i.normalizeClass(v.wrapClasses)},[i.createElementVNode("span",{class:i.normalizeClass(v.radioClasses)},[i.createElementVNode("span",{class:i.normalizeClass(v.innerClasses)},null,2),i.createElementVNode("input",{type:"radio",class:i.normalizeClass(v.inputClasses),disabled:l.itemDisabled,checked:v.currentValue,name:C.groupName,onChange:u[0]||(u[0]=(...R)=>v.change&&v.change(...R)),onFocus:u[1]||(u[1]=(...R)=>v.onFocus&&v.onFocus(...R)),onBlur:u[2]||(u[2]=(...R)=>v.onBlur&&v.onBlur(...R))},null,42,oY)],2),i.renderSlot(l.$slots,"default",{},()=>[i.createTextVNode(i.toDisplayString(m.label),1)])],2)}var Lv=c(sY,[["render",aY]]),UA={exports:{}};(function(l,u){(function(m,k){l.exports=k()})(ee,function(){var m=1e3,k=6e4,C=36e5,v="millisecond",R="second",B="minute",G="hour",W="day",j="week",ce="month",Oe="quarter",xe="year",ye="date",oe="Invalid Date",Re=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Lt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,yt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(At){var vt=["th","st","nd","rd"],ut=At%100;return"["+At+(vt[(ut-20)%10]||vt[ut]||vt[0])+"]"}},wt=function(At,vt,ut){var Nt=String(At);return!Nt||Nt.length>=vt?At:""+Array(vt+1-Nt.length).join(ut)+At},Ge={s:wt,z:function(At){var vt=-At.utcOffset(),ut=Math.abs(vt),Nt=Math.floor(ut/60),Ot=ut%60;return(vt<=0?"+":"-")+wt(Nt,2,"0")+":"+wt(Ot,2,"0")},m:function At(vt,ut){if(vt.date()<ut.date())return-At(ut,vt);var Nt=12*(ut.year()-vt.year())+(ut.month()-vt.month()),Ot=vt.clone().add(Nt,ce),ii=ut-Ot<0,ai=vt.clone().add(Nt+(ii?-1:1),ce);return+(-(Nt+(ut-Ot)/(ii?Ot-ai:ai-Ot))||0)},a:function(At){return At<0?Math.ceil(At)||0:Math.floor(At)},p:function(At){return{M:ce,y:xe,w:j,d:W,D:ye,h:G,m:B,s:R,ms:v,Q:Oe}[At]||String(At||"").toLowerCase().replace(/s$/,"")},u:function(At){return At===void 0}},Ne="en",Je={};Je[Ne]=yt;var je="$isDayjsObject",Qt=function(At){return At instanceof Dt||!(!At||!At[je])},Ht=function At(vt,ut,Nt){var Ot;if(!vt)return Ne;if(typeof vt=="string"){var ii=vt.toLowerCase();Je[ii]&&(Ot=ii),ut&&(Je[ii]=ut,Ot=ii);var ai=vt.split("-");if(!Ot&&ai.length>1)return At(ai[0])}else{var ji=vt.name;Je[ji]=vt,Ot=ji}return!Nt&&Ot&&(Ne=Ot),Ot||!Nt&&Ne},Pt=function(At,vt){if(Qt(At))return At.clone();var ut=typeof vt=="object"?vt:{};return ut.date=At,ut.args=arguments,new Dt(ut)},_t=Ge;_t.l=Ht,_t.i=Qt,_t.w=function(At,vt){return Pt(At,{locale:vt.$L,utc:vt.$u,x:vt.$x,$offset:vt.$offset})};var Dt=function(){function At(ut){this.$L=Ht(ut.locale,null,!0),this.parse(ut),this.$x=this.$x||ut.x||{},this[je]=!0}var vt=At.prototype;return vt.parse=function(ut){this.$d=function(Nt){var Ot=Nt.date,ii=Nt.utc;if(Ot===null)return new Date(NaN);if(_t.u(Ot))return new Date;if(Ot instanceof Date)return new Date(Ot);if(typeof Ot=="string"&&!/Z$/i.test(Ot)){var ai=Ot.match(Re);if(ai){var ji=ai[2]-1||0,hn=(ai[7]||"0").substring(0,3);return ii?new Date(Date.UTC(ai[1],ji,ai[3]||1,ai[4]||0,ai[5]||0,ai[6]||0,hn)):new Date(ai[1],ji,ai[3]||1,ai[4]||0,ai[5]||0,ai[6]||0,hn)}}return new Date(Ot)}(ut),this.init()},vt.init=function(){var ut=this.$d;this.$y=ut.getFullYear(),this.$M=ut.getMonth(),this.$D=ut.getDate(),this.$W=ut.getDay(),this.$H=ut.getHours(),this.$m=ut.getMinutes(),this.$s=ut.getSeconds(),this.$ms=ut.getMilliseconds()},vt.$utils=function(){return _t},vt.isValid=function(){return this.$d.toString()!==oe},vt.isSame=function(ut,Nt){var Ot=Pt(ut);return this.startOf(Nt)<=Ot&&Ot<=this.endOf(Nt)},vt.isAfter=function(ut,Nt){return Pt(ut)<this.startOf(Nt)},vt.isBefore=function(ut,Nt){return this.endOf(Nt)<Pt(ut)},vt.$g=function(ut,Nt,Ot){return _t.u(ut)?this[Nt]:this.set(Ot,ut)},vt.unix=function(){return Math.floor(this.valueOf()/1e3)},vt.valueOf=function(){return this.$d.getTime()},vt.startOf=function(ut,Nt){var Ot=this,ii=!!_t.u(Nt)||Nt,ai=_t.p(ut),ji=function(Ct,ei){var Pi=_t.w(Ot.$u?Date.UTC(Ot.$y,ei,Ct):new Date(Ot.$y,ei,Ct),Ot);return ii?Pi:Pi.endOf(W)},hn=function(Ct,ei){return _t.w(Ot.toDate()[Ct].apply(Ot.toDate("s"),(ii?[0,0,0,0]:[23,59,59,999]).slice(ei)),Ot)},Mn=this.$W,Dn=this.$M,$r=this.$D,Ns="set"+(this.$u?"UTC":"");switch(ai){case xe:return ii?ji(1,0):ji(31,11);case ce:return ii?ji(1,Dn):ji(0,Dn+1);case j:var ua=this.$locale().weekStart||0,da=(Mn<ua?Mn+7:Mn)-ua;return ji(ii?$r-da:$r+(6-da),Dn);case W:case ye:return hn(Ns+"Hours",0);case G:return hn(Ns+"Minutes",1);case B:return hn(Ns+"Seconds",2);case R:return hn(Ns+"Milliseconds",3);default:return this.clone()}},vt.endOf=function(ut){return this.startOf(ut,!1)},vt.$set=function(ut,Nt){var Ot,ii=_t.p(ut),ai="set"+(this.$u?"UTC":""),ji=(Ot={},Ot[W]=ai+"Date",Ot[ye]=ai+"Date",Ot[ce]=ai+"Month",Ot[xe]=ai+"FullYear",Ot[G]=ai+"Hours",Ot[B]=ai+"Minutes",Ot[R]=ai+"Seconds",Ot[v]=ai+"Milliseconds",Ot)[ii],hn=ii===W?this.$D+(Nt-this.$W):Nt;if(ii===ce||ii===xe){var Mn=this.clone().set(ye,1);Mn.$d[ji](hn),Mn.init(),this.$d=Mn.set(ye,Math.min(this.$D,Mn.daysInMonth())).$d}else ji&&this.$d[ji](hn);return this.init(),this},vt.set=function(ut,Nt){return this.clone().$set(ut,Nt)},vt.get=function(ut){return this[_t.p(ut)]()},vt.add=function(ut,Nt){var Ot,ii=this;ut=Number(ut);var ai=_t.p(Nt),ji=function(Dn){var $r=Pt(ii);return _t.w($r.date($r.date()+Math.round(Dn*ut)),ii)};if(ai===ce)return this.set(ce,this.$M+ut);if(ai===xe)return this.set(xe,this.$y+ut);if(ai===W)return ji(1);if(ai===j)return ji(7);var hn=(Ot={},Ot[B]=k,Ot[G]=C,Ot[R]=m,Ot)[ai]||1,Mn=this.$d.getTime()+ut*hn;return _t.w(Mn,this)},vt.subtract=function(ut,Nt){return this.add(-1*ut,Nt)},vt.format=function(ut){var Nt=this,Ot=this.$locale();if(!this.isValid())return Ot.invalidDate||oe;var ii=ut||"YYYY-MM-DDTHH:mm:ssZ",ai=_t.z(this),ji=this.$H,hn=this.$m,Mn=this.$M,Dn=Ot.weekdays,$r=Ot.months,Ns=Ot.meridiem,ua=function(ei,Pi,Er,gs){return ei&&(ei[Pi]||ei(Nt,ii))||Er[Pi].slice(0,gs)},da=function(ei){return _t.s(ji%12||12,ei,"0")},Ct=Ns||function(ei,Pi,Er){var gs=ei<12?"AM":"PM";return Er?gs.toLowerCase():gs};return ii.replace(Lt,function(ei,Pi){return Pi||function(Er){switch(Er){case"YY":return String(Nt.$y).slice(-2);case"YYYY":return _t.s(Nt.$y,4,"0");case"M":return Mn+1;case"MM":return _t.s(Mn+1,2,"0");case"MMM":return ua(Ot.monthsShort,Mn,$r,3);case"MMMM":return ua($r,Mn);case"D":return Nt.$D;case"DD":return _t.s(Nt.$D,2,"0");case"d":return String(Nt.$W);case"dd":return ua(Ot.weekdaysMin,Nt.$W,Dn,2);case"ddd":return ua(Ot.weekdaysShort,Nt.$W,Dn,3);case"dddd":return Dn[Nt.$W];case"H":return String(ji);case"HH":return _t.s(ji,2,"0");case"h":return da(1);case"hh":return da(2);case"a":return Ct(ji,hn,!0);case"A":return Ct(ji,hn,!1);case"m":return String(hn);case"mm":return _t.s(hn,2,"0");case"s":return String(Nt.$s);case"ss":return _t.s(Nt.$s,2,"0");case"SSS":return _t.s(Nt.$ms,3,"0");case"Z":return ai}return null}(ei)||ai.replace(":","")})},vt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},vt.diff=function(ut,Nt,Ot){var ii,ai=this,ji=_t.p(Nt),hn=Pt(ut),Mn=(hn.utcOffset()-this.utcOffset())*k,Dn=this-hn,$r=function(){return _t.m(ai,hn)};switch(ji){case xe:ii=$r()/12;break;case ce:ii=$r();break;case Oe:ii=$r()/3;break;case j:ii=(Dn-Mn)/6048e5;break;case W:ii=(Dn-Mn)/864e5;break;case G:ii=Dn/C;break;case B:ii=Dn/k;break;case R:ii=Dn/m;break;default:ii=Dn}return Ot?ii:_t.a(ii)},vt.daysInMonth=function(){return this.endOf(ce).$D},vt.$locale=function(){return Je[this.$L]},vt.locale=function(ut,Nt){if(!ut)return this.$L;var Ot=this.clone(),ii=Ht(ut,Nt,!0);return ii&&(Ot.$L=ii),Ot},vt.clone=function(){return _t.w(this.$d,this)},vt.toDate=function(){return new Date(this.valueOf())},vt.toJSON=function(){return this.isValid()?this.toISOString():null},vt.toISOString=function(){return this.$d.toISOString()},vt.toString=function(){return this.$d.toUTCString()},At}(),jt=Dt.prototype;return Pt.prototype=jt,[["$ms",v],["$s",R],["$m",B],["$H",G],["$W",W],["$M",ce],["$y",xe],["$D",ye]].forEach(function(At){jt[At[1]]=function(vt){return this.$g(vt,At[0],At[1])}}),Pt.extend=function(At,vt){return At.$i||(At(vt,Dt,Pt),At.$i=!0),Pt},Pt.locale=Ht,Pt.isDayjs=Qt,Pt.unix=function(At){return Pt(1e3*At)},Pt.en=Je[Ne],Pt.Ls=Je,Pt.p={},Pt})})(UA);var ro=UA.exports,FA=1/0,zA=9007199254740991,lY=17976931348623157e292,XA=NaN,cY="[object Function]",hY="[object GeneratorFunction]",uY="[object Symbol]",dY=/^\s+|\s+$/g,fY=/^[-+]0x[0-9a-f]+$/i,pY=/^0b[01]+$/i,mY=/^0o[0-7]+$/i,gY=/^(?:0|[1-9]\d*)$/,yY=parseInt,vY=Object.prototype,WA=vY.toString,bY=Math.ceil,xY=Math.max;function OY(l,u,m){var k=-1,C=l.length;u<0&&(u=-u>C?0:C+u),m=m>C?C:m,m<0&&(m+=C),C=u>m?0:m-u>>>0,u>>>=0;for(var v=Array(C);++k<C;)v[k]=l[k+u];return v}function wY(l,u){return u=u??zA,!!u&&(typeof l=="number"||gY.test(l))&&l>-1&&l%1==0&&l<u}function _Y(l,u,m){if(!Bv(m))return!1;var k=typeof u;return(k=="number"?kY(m)&&wY(u,m.length):k=="string"&&u in m)?CY(m[u],l):!1}function SY(l,u,m){(m?_Y(l,u,m):u===void 0)?u=1:u=xY(RY(u),0);var k=l?l.length:0;if(!k||u<1)return[];for(var C=0,v=0,R=Array(bY(k/u));C<k;)R[v++]=OY(l,C,C+=u);return R}function CY(l,u){return l===u||l!==l&&u!==u}function kY(l){return l!=null&&MY(l.length)&&!TY(l)}function TY(l){var u=Bv(l)?WA.call(l):"";return u==cY||u==hY}function MY(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=zA}function Bv(l){var u=typeof l;return!!l&&(u=="object"||u=="function")}function EY(l){return!!l&&typeof l=="object"}function PY(l){return typeof l=="symbol"||EY(l)&&WA.call(l)==uY}function AY(l){if(!l)return l===0?l:0;if(l=IY(l),l===FA||l===-FA){var u=l<0?-1:1;return u*lY}return l===l?l:0}function RY(l){var u=AY(l),m=u%1;return u===u?m?u-m:u:0}function IY(l){if(typeof l=="number")return l;if(PY(l))return XA;if(Bv(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=Bv(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=l.replace(dY,"");var m=pY.test(l);return m||mY.test(l)?yY(l.slice(2),m?2:8):fY.test(l)?XA:+l}var QA=SY,HA={emits:["on-cell-click","on-cell-contextmenu"],methods:{handleCellClick(l){this.CalendarInstance.$emit("on-cell-click",l)},handleCellContextmenu(l){this.CalendarInstance.$emit("on-cell-contextmenu",l)}}};const DY={name:"CalendarMonth",mixins:[HA],inject:["CalendarInstance"],props:{date:Object},data(){return{firstDayOfWeek:this.CalendarInstance.firstDayOfWeek,weekDays:this.CalendarInstance.locale.weekDays}},computed:{finalWeekDays(){return this.weekDays.slice(this.firstDayOfWeek).concat(this.weekDays.slice(0,this.firstDayOfWeek))},days(){let l=[];const u=ro(this.date.format("YYYY-MM-01")),m=u.day(),k=this.firstDayOfWeek,C=k<=m?m-k:7-(k-m);for(let G=0;G<C;G++){const W=u.subtract(C-G,"day"),j={text:W.format("YYYY-MM-DD"),date:W.format("D"),type:"prev"};l.push(j)}const v=u.daysInMonth();for(let G=0;G<v;G++){const W=u.add(G,"day"),j={text:W.format("YYYY-MM-DD"),date:W.format("D"),type:"current"};l.push(j)}const R=42-l.length,B=u.add(1,"month");for(let G=0;G<R;G++){const W=B.add(G,"day"),j={text:W.format("YYYY-MM-DD"),date:W.format("D"),type:"next"};l.push(j)}return l},chunkDays(){return QA(this.days,7)},dayStyles(){let l={};return this.CalendarInstance.cellHeight!==100&&(l.height=`${this.CalendarInstance.cellHeight}px`),l},currentDate(){return this.date.format("YYYY-MM-DD")}},methods:{handleClickDate(l){this.CalendarInstance.handleChangeDate(ro(l))}}},NY={class:"ivu-calendar-table",cellspacing:"0",cellpadding:"0"},$Y=["onClick","onContextmenu"],VY=["onClick"],LY={class:"ivu-calendar-table-day-title"},BY={class:"ivu-calendar-table-day-slot"};function UY(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("table",NY,[i.createElementVNode("thead",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.finalWeekDays,R=>(i.openBlock(),i.createElementBlock("th",{key:R},i.toDisplayString(R),1))),128))]),i.createElementVNode("tbody",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.chunkDays,(R,B)=>(i.openBlock(),i.createElementBlock("tr",{key:B},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(R,G=>(i.openBlock(),i.createElementBlock("td",{key:G.text,onClick:W=>l.handleCellClick(G),onContextmenu:i.withModifiers(W=>l.handleCellContextmenu(G),["prevent"])},[i.createElementVNode("div",{class:i.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-other":G.type!=="current","ivu-calendar-table-day-current":G.text===v.currentDate}]),style:i.normalizeStyle(v.dayStyles),onClick:W=>v.handleClickDate(G.text)},[i.createElementVNode("div",LY,i.toDisplayString(G.date),1),i.createElementVNode("div",BY,[i.renderSlot(l.$slots,"month",{date:new Date(G.date),data:{type:G.type+"-month",day:G.text,selected:G.text===v.currentDate}})])],14,VY)],40,$Y))),128))]))),128))])])}var FY=c(DY,[["render",UY]]);const zY={name:"CalendarYear",mixins:[HA],inject:["CalendarInstance"],props:{date:Object},data(){return{}},computed:{months(){let l=[];const u=ro(this.date.format("YYYY-01-01"));for(let m=0;m<12;m++){const k=u.add(m,"month");l.push({text:k.format("YYYY-MM"),month:this.CalendarInstance.locale.months[m],type:"current"})}return l},chunkMonths(){return QA(this.months,3)},dayStyles(){let l={};return this.CalendarInstance.cellHeight!==100&&(l.height=`${this.CalendarInstance.cellHeight}px`),l},currentMonth(){return this.date.format("YYYY-MM")}},methods:{handleClickDate(l){this.CalendarInstance.handleChangeDate(ro(l))}}},XY={class:"ivu-calendar-table ivu-calendar-table-year",cellspacing:"0",cellpadding:"0"},WY=["onClick","onContextmenu"],QY=["onClick"],HY={class:"ivu-calendar-table-day-title"},GY={class:"ivu-calendar-table-day-slot"};function YY(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("table",XY,[i.createElementVNode("tbody",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.chunkMonths,(R,B)=>(i.openBlock(),i.createElementBlock("tr",{key:B},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(R,G=>(i.openBlock(),i.createElementBlock("td",{key:G.text,onClick:W=>l.handleCellClick(G),onContextmenu:i.withModifiers(W=>l.handleCellContextmenu(G),["prevent"])},[i.createElementVNode("div",{class:i.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-current":G.text===v.currentMonth}]),style:i.normalizeStyle(v.dayStyles),onClick:W=>v.handleClickDate(G.text)},[i.createElementVNode("div",HY,i.toDisplayString(G.month),1),i.createElementVNode("div",GY,[i.renderSlot(l.$slots,"year",{month:new Date(G.month),data:{type:G.type+"-year",month:G.text,selected:G.text===v.currentMonth}})])],14,QY)],40,WY))),128))]))),128))])])}var jY=c(zY,[["render",YY]]);const qY={name:"Calendar",components:{CalendarMonth:FY,CalendarYear:jY,ButtonGroup:q_,Button:fs,RadioGroup:Vv,Radio:Lv,Icon:S},emits:["on-type-change","on-prev","on-next","on-today","on-change","update:modelValue","on-cell-click","on-cell-contextmenu"],provide(){return{CalendarInstance:this}},props:{modelValue:{type:[Date,String,Number]},type:{validator(l){return _(l,["month","year"])},default:"month"},cellHeight:{type:Number,default:100},showHeader:{type:Boolean,default:!0},headerType:{validator(l){return _(l,["simple","full"])},default:"simple"},firstDayOfWeek:{validator(l){return _(l,[1,2,3,4,5,6,7])},default:1},hideType:{type:Boolean,default:!1},locale:{type:Object,default(){return{today:"今天",type:{month:"月",year:"年"},weekDays:["日","一","二","三","四","五","六"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}}}},data(){const l=this.modelValue?this.modelValue:new Date;return{currentValue:ro(l),mode:this.type}},watch:{modelValue(l){const u=l||new Date;this.currentValue=ro(u)},type(l){this.mode=l}},computed:{headerTitle(){if(this.mode==="month")return this.currentValue.format("YYYY 年 M 月");if(this.mode==="year")return this.currentValue.format("YYYY 年")}},methods:{handleChangeType(l){this.$emit("on-type-change",l)},handlePrev(){const l=this.currentValue.format("YYYY-MM-01");let u;this.mode==="month"?u=ro(l).subtract(1,"month"):this.mode==="year"&&(u=ro(l).subtract(1,"year")),this.handleChangeDate(u),this.$emit("on-prev")},handleNext(){const l=this.currentValue.format("YYYY-MM-01");let u;this.mode==="month"?u=ro(l).add(1,"month"):this.mode==="year"&&(u=ro(l).add(1,"year")),this.handleChangeDate(u),this.$emit("on-next")},handleToday(){const l=ro(new Date),u=l.format("YYYY-MM-DD"),m=this.currentValue.format("YYYY-MM-DD");u!==m&&this.handleChangeDate(l),this.$emit("on-today")},handleChangeDate(l){this.currentValue=l;const u=new Date(l.format("YYYY-MM-DD"));this.$emit("update:modelValue",u),this.$emit("on-change",u)}}},ZY={class:"ivu-calendar"},KY={key:0,class:"ivu-calendar-header"},JY={class:"ivu-calendar-header-title"},ej={class:"ivu-calendar-header-action"},tj={class:"ivu-calendar-body"};function ij(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Button"),G=i.resolveComponent("ButtonGroup"),W=i.resolveComponent("Radio"),j=i.resolveComponent("RadioGroup"),ce=i.resolveComponent("CalendarMonth"),Oe=i.resolveComponent("CalendarYear");return i.openBlock(),i.createElementBlock("div",ZY,[m.showHeader?(i.openBlock(),i.createElementBlock("div",KY,[i.renderSlot(l.$slots,"header",{},()=>[i.createElementVNode("div",JY,[i.renderSlot(l.$slots,"headerTitle",{},()=>[i.createTextVNode(i.toDisplayString(v.headerTitle),1)])]),i.createElementVNode("div",ej,[m.headerType==="simple"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createVNode(G,null,{default:i.withCtx(()=>[i.createVNode(B,{onClick:v.handlePrev},{default:i.withCtx(()=>[i.createVNode(R,{type:"ios-arrow-back"})]),_:1},8,["onClick"]),i.createVNode(B,{onClick:v.handleToday},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(m.locale.today),1)]),_:1},8,["onClick"]),i.createVNode(B,{onClick:v.handleNext},{default:i.withCtx(()=>[i.createVNode(R,{type:"ios-arrow-forward"})]),_:1},8,["onClick"])]),_:1}),m.hideType?i.createCommentVNode("",!0):(i.openBlock(),i.createBlock(j,{key:0,modelValue:C.mode,"onUpdate:modelValue":u[0]||(u[0]=xe=>C.mode=xe),type:"button",class:"ivu-ml",onOnChange:v.handleChangeType},{default:i.withCtx(()=>[i.createVNode(W,{label:"month"},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(m.locale.type.month),1)]),_:1}),i.createVNode(W,{label:"year"},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(m.locale.type.year),1)]),_:1})]),_:1},8,["modelValue","onOnChange"]))],64)):m.headerType==="full"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[],64)):i.createCommentVNode("",!0)])])])):i.createCommentVNode("",!0),i.createElementVNode("div",tj,[C.mode==="month"?(i.openBlock(),i.createBlock(ce,{key:0,date:C.currentValue},{month:i.withCtx(({date:xe,data:ye})=>[i.renderSlot(l.$slots,"month",{date:xe,data:ye})]),_:3},8,["date"])):C.mode==="year"?(i.openBlock(),i.createBlock(Oe,{key:1,date:C.currentValue},{year:i.withCtx(({month:xe,data:ye})=>[i.renderSlot(l.$slots,"year",{month:xe,data:ye})]),_:3},8,["date"])):i.createCommentVNode("",!0)])])}var GA=c(qY,[["render",ij]]);const wl="ivu-col";function nj(l){return typeof l=="number"?`${l} ${l} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(l)?`0 0 ${l}`:l}const rj={name:"iCol",inject:["RowInstance"],props:{span:[Number,String],order:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],className:String,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object],xxl:[Number,Object],flex:{type:[Number,String],default:""}},computed:{gutter(){return this.RowInstance.gutter},classes(){let l=[`${wl}`,{[`${wl}-span-${this.span}`]:this.span,[`${wl}-order-${this.order}`]:this.order,[`${wl}-offset-${this.offset}`]:this.offset,[`${wl}-push-${this.push}`]:this.push,[`${wl}-pull-${this.pull}`]:this.pull,[`${this.className}`]:!!this.className}];return["xs","sm","md","lg","xl","xxl"].forEach(u=>{if(typeof this[u]=="number")l.push(`${wl}-span-${u}-${this[u]}`);else if(typeof this[u]=="object"){let m=this[u];Object.keys(m).forEach(k=>{l.push(k!=="span"?`${wl}-${u}-${k}-${m[k]}`:`${wl}-span-${u}-${m[k]}`)})}}),l},styles(){let l={};return this.gutter!==0&&(l={paddingLeft:this.gutter/2+"px",paddingRight:this.gutter/2+"px"}),this.flex&&(l.flex=nj(this.flex)),l}}};function sj(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.styles)},[i.renderSlot(l.$slots,"default")],6)}var Ba=c(rj,[["render",sj]]);const eu="ivu-row",oj={name:"Row",provide(){return{RowInstance:this}},props:{type:{validator(l){return _(l,["flex"])}},align:{validator(l){return _(l,["top","middle","bottom"])}},justify:{validator(l){return _(l,["start","end","center","space-around","space-between"])}},gutter:{type:Number,default:0},className:String,wrap:{type:Boolean,default:!0}},computed:{classes(){return[`${eu}`,{[`${eu}-${this.type}`]:!!this.type,[`${eu}-${this.type}-${this.align}`]:!!this.align&&this.type,[`${eu}-${this.type}-${this.justify}`]:!!this.justify&&this.type,[`${eu}-${this.align}`]:!!this.align,[`${eu}-${this.justify}`]:!!this.justify,[`${this.className}`]:!!this.className,[`${eu}-no-wrap`]:!this.wrap}]},styles(){let l={};return this.gutter!==0&&(l={marginLeft:this.gutter/-2+"px",marginRight:this.gutter/-2+"px"}),l}}};function aj(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.styles)},[i.renderSlot(l.$slots,"default")],6)}var wc=c(oj,[["render",aj]]);function tu(){return tu=Object.assign||function(l){for(var u=1;u<arguments.length;u++){var m=arguments[u];for(var k in m)Object.prototype.hasOwnProperty.call(m,k)&&(l[k]=m[k])}return l},tu.apply(this,arguments)}function lj(l,u){l.prototype=Object.create(u.prototype),l.prototype.constructor=l,gm(l,u)}function Z_(l){return Z_=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},Z_(l)}function gm(l,u){return gm=Object.setPrototypeOf||function(m,k){return m.__proto__=k,m},gm(l,u)}function cj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uv(l,u,m){return cj()?Uv=Reflect.construct:Uv=function(k,C,v){var R=[null];R.push.apply(R,C);var B=Function.bind.apply(k,R),G=new B;return v&&gm(G,v.prototype),G},Uv.apply(null,arguments)}function hj(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function K_(l){var u=typeof Map=="function"?new Map:void 0;return K_=function(m){if(m===null||!hj(m))return m;if(typeof m!="function")throw new TypeError("Super expression must either be null or a function");if(typeof u<"u"){if(u.has(m))return u.get(m);u.set(m,k)}function k(){return Uv(m,arguments,Z_(this).constructor)}return k.prototype=Object.create(m.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),gm(k,m)},K_(l)}var uj=/%[sdj%]/g,dj=function(){};function J_(l){if(!l||!l.length)return null;var u={};return l.forEach(function(m){var k=m.field;u[k]=u[k]||[],u[k].push(m)}),u}function so(){for(var l=arguments.length,u=new Array(l),m=0;m<l;m++)u[m]=arguments[m];var k=1,C=u[0],v=u.length;if(typeof C=="function")return C.apply(null,u.slice(1));if(typeof C=="string"){var R=String(C).replace(uj,function(B){if(B==="%%")return"%";if(k>=v)return B;switch(B){case"%s":return String(u[k++]);case"%d":return Number(u[k++]);case"%j":try{return JSON.stringify(u[k++])}catch{return"[Circular]"}break;default:return B}});return R}return C}function fj(l){return l==="string"||l==="url"||l==="hex"||l==="email"||l==="date"||l==="pattern"}function pr(l,u){return!!(l==null||u==="array"&&Array.isArray(l)&&!l.length||fj(u)&&typeof l=="string"&&!l)}function pj(l,u,m){var k=[],C=0,v=l.length;function R(B){k.push.apply(k,B),C++,C===v&&m(k)}l.forEach(function(B){u(B,R)})}function YA(l,u,m){var k=0,C=l.length;function v(R){if(R&&R.length){m(R);return}var B=k;k=k+1,B<C?u(l[B],v):m([])}v([])}function mj(l){var u=[];return Object.keys(l).forEach(function(m){u.push.apply(u,l[m])}),u}var jA=function(l){lj(u,l);function u(m,k){var C;return C=l.call(this,"Async Validation Error")||this,C.errors=m,C.fields=k,C}return u}(K_(Error));function gj(l,u,m,k){if(u.first){var C=new Promise(function(ce,Oe){var xe=function(oe){return k(oe),oe.length?Oe(new jA(oe,J_(oe))):ce()},ye=mj(l);YA(ye,m,xe)});return C.catch(function(ce){return ce}),C}var v=u.firstFields||[];v===!0&&(v=Object.keys(l));var R=Object.keys(l),B=R.length,G=0,W=[],j=new Promise(function(ce,Oe){var xe=function(ye){if(W.push.apply(W,ye),G++,G===B)return k(W),W.length?Oe(new jA(W,J_(W))):ce()};R.length||(k(W),ce()),R.forEach(function(ye){var oe=l[ye];v.indexOf(ye)!==-1?YA(oe,m,xe):pj(oe,m,xe)})});return j.catch(function(ce){return ce}),j}function qA(l){return function(u){return u&&u.message?(u.field=u.field||l.fullField,u):{message:typeof u=="function"?u():u,field:u.field||l.fullField}}}function ZA(l,u){if(u){for(var m in u)if(u.hasOwnProperty(m)){var k=u[m];typeof k=="object"&&typeof l[m]=="object"?l[m]=tu({},l[m],k):l[m]=k}}return l}function KA(l,u,m,k,C,v){l.required&&(!m.hasOwnProperty(l.field)||pr(u,v||l.type))&&k.push(so(C.messages.required,l.fullField))}function yj(l,u,m,k,C){(/^\s+$/.test(u)||u==="")&&k.push(so(C.messages.whitespace,l.fullField))}var eS={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ym={integer:function(l){return ym.number(l)&&parseInt(l,10)===l},float:function(l){return ym.number(l)&&!ym.integer(l)},array:function(l){return Array.isArray(l)},regexp:function(l){if(l instanceof RegExp)return!0;try{return!!new RegExp(l)}catch{return!1}},date:function(l){return typeof l.getTime=="function"&&typeof l.getMonth=="function"&&typeof l.getYear=="function"&&!isNaN(l.getTime())},number:function(l){return isNaN(l)?!1:typeof l=="number"},object:function(l){return typeof l=="object"&&!ym.array(l)},method:function(l){return typeof l=="function"},email:function(l){return typeof l=="string"&&!!l.match(eS.email)&&l.length<255},url:function(l){return typeof l=="string"&&!!l.match(eS.url)},hex:function(l){return typeof l=="string"&&!!l.match(eS.hex)}};function vj(l,u,m,k,C){if(l.required&&u===void 0){KA(l,u,m,k,C);return}var v=["integer","float","array","regexp","object","method","email","number","date","url","hex"],R=l.type;v.indexOf(R)>-1?ym[R](u)||k.push(so(C.messages.types[R],l.fullField,l.type)):R&&typeof u!==l.type&&k.push(so(C.messages.types[R],l.fullField,l.type))}function bj(l,u,m,k,C){var v=typeof l.len=="number",R=typeof l.min=="number",B=typeof l.max=="number",G=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,W=u,j=null,ce=typeof u=="number",Oe=typeof u=="string",xe=Array.isArray(u);if(ce?j="number":Oe?j="string":xe&&(j="array"),!j)return!1;xe&&(W=u.length),Oe&&(W=u.replace(G,"_").length),v?W!==l.len&&k.push(so(C.messages[j].len,l.fullField,l.len)):R&&!B&&W<l.min?k.push(so(C.messages[j].min,l.fullField,l.min)):B&&!R&&W>l.max?k.push(so(C.messages[j].max,l.fullField,l.max)):R&&B&&(W<l.min||W>l.max)&&k.push(so(C.messages[j].range,l.fullField,l.min,l.max))}var $d="enum";function xj(l,u,m,k,C){l[$d]=Array.isArray(l[$d])?l[$d]:[],l[$d].indexOf(u)===-1&&k.push(so(C.messages[$d],l.fullField,l[$d].join(", ")))}function Oj(l,u,m,k,C){if(l.pattern){if(l.pattern instanceof RegExp)l.pattern.lastIndex=0,l.pattern.test(u)||k.push(so(C.messages.pattern.mismatch,l.fullField,u,l.pattern));else if(typeof l.pattern=="string"){var v=new RegExp(l.pattern);v.test(u)||k.push(so(C.messages.pattern.mismatch,l.fullField,u,l.pattern))}}}var Ei={required:KA,whitespace:yj,type:vj,range:bj,enum:xj,pattern:Oj};function wj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u,"string")&&!l.required)return m();Ei.required(l,u,k,v,C,"string"),pr(u,"string")||(Ei.type(l,u,k,v,C),Ei.range(l,u,k,v,C),Ei.pattern(l,u,k,v,C),l.whitespace===!0&&Ei.whitespace(l,u,k,v,C))}m(v)}function _j(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),u!==void 0&&Ei.type(l,u,k,v,C)}m(v)}function Sj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(u===""&&(u=void 0),pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),u!==void 0&&(Ei.type(l,u,k,v,C),Ei.range(l,u,k,v,C))}m(v)}function Cj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),u!==void 0&&Ei.type(l,u,k,v,C)}m(v)}function kj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),pr(u)||Ei.type(l,u,k,v,C)}m(v)}function Tj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),u!==void 0&&(Ei.type(l,u,k,v,C),Ei.range(l,u,k,v,C))}m(v)}function Mj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),u!==void 0&&(Ei.type(l,u,k,v,C),Ei.range(l,u,k,v,C))}m(v)}function Ej(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(u==null&&!l.required)return m();Ei.required(l,u,k,v,C,"array"),u!=null&&(Ei.type(l,u,k,v,C),Ei.range(l,u,k,v,C))}m(v)}function Pj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),u!==void 0&&Ei.type(l,u,k,v,C)}m(v)}var Aj="enum";function Rj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C),u!==void 0&&Ei[Aj](l,u,k,v,C)}m(v)}function Ij(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u,"string")&&!l.required)return m();Ei.required(l,u,k,v,C),pr(u,"string")||Ei.pattern(l,u,k,v,C)}m(v)}function Dj(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u,"date")&&!l.required)return m();if(Ei.required(l,u,k,v,C),!pr(u,"date")){var B;u instanceof Date?B=u:B=new Date(u),Ei.type(l,B,k,v,C),B&&Ei.range(l,B.getTime(),k,v,C)}}m(v)}function Nj(l,u,m,k,C){var v=[],R=Array.isArray(u)?"array":typeof u;Ei.required(l,u,k,v,C,R),m(v)}function tS(l,u,m,k,C){var v=l.type,R=[],B=l.required||!l.required&&k.hasOwnProperty(l.field);if(B){if(pr(u,v)&&!l.required)return m();Ei.required(l,u,k,R,C,v),pr(u,v)||Ei.type(l,u,k,R,C)}m(R)}function $j(l,u,m,k,C){var v=[],R=l.required||!l.required&&k.hasOwnProperty(l.field);if(R){if(pr(u)&&!l.required)return m();Ei.required(l,u,k,v,C)}m(v)}var vm={string:wj,method:_j,number:Sj,boolean:Cj,regexp:kj,integer:Tj,float:Mj,array:Ej,object:Pj,enum:Rj,pattern:Ij,date:Dj,url:tS,hex:tS,email:tS,required:Nj,any:$j};function iS(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var l=JSON.parse(JSON.stringify(this));return l.clone=this.clone,l}}}var nS=iS();function _c(l){this.rules=null,this._messages=nS,this.define(l)}_c.prototype={messages:function(l){return l&&(this._messages=ZA(iS(),l)),this._messages},define:function(l){if(!l)throw new Error("Cannot configure a schema with no rules");if(typeof l!="object"||Array.isArray(l))throw new Error("Rules must be an object");this.rules={};var u,m;for(u in l)l.hasOwnProperty(u)&&(m=l[u],this.rules[u]=Array.isArray(m)?m:[m])},validate:function(l,u,m){var k=this;u===void 0&&(u={}),m===void 0&&(m=function(){});var C=l,v=u,R=m;if(typeof v=="function"&&(R=v,v={}),!this.rules||Object.keys(this.rules).length===0)return R&&R(),Promise.resolve();function B(ye){var oe,Re=[],Lt={};function yt(wt){if(Array.isArray(wt)){var Ge;Re=(Ge=Re).concat.apply(Ge,wt)}else Re.push(wt)}for(oe=0;oe<ye.length;oe++)yt(ye[oe]);Re.length?Lt=J_(Re):(Re=null,Lt=null),R(Re,Lt)}if(v.messages){var G=this.messages();G===nS&&(G=iS()),ZA(G,v.messages),v.messages=G}else v.messages=this.messages();var W,j,ce={},Oe=v.keys||Object.keys(this.rules);Oe.forEach(function(ye){W=k.rules[ye],j=C[ye],W.forEach(function(oe){var Re=oe;typeof Re.transform=="function"&&(C===l&&(C=tu({},C)),j=C[ye]=Re.transform(j)),typeof Re=="function"?Re={validator:Re}:Re=tu({},Re),Re.validator=k.getValidationMethod(Re),Re.field=ye,Re.fullField=Re.fullField||ye,Re.type=k.getType(Re),Re.validator&&(ce[ye]=ce[ye]||[],ce[ye].push({rule:Re,value:j,source:C,field:ye}))})});var xe={};return gj(ce,v,function(ye,oe){var Re=ye.rule,Lt=(Re.type==="object"||Re.type==="array")&&(typeof Re.fields=="object"||typeof Re.defaultField=="object");Lt=Lt&&(Re.required||!Re.required&&ye.value),Re.field=ye.field;function yt(Ne,Je){return tu({},Je,{fullField:Re.fullField+"."+Ne})}function wt(Ne){Ne===void 0&&(Ne=[]);var Je=Ne;if(Array.isArray(Je)||(Je=[Je]),!v.suppressWarning&&Je.length&&_c.warning("async-validator:",Je),Je.length&&Re.message!==void 0&&(Je=[].concat(Re.message)),Je=Je.map(qA(Re)),v.first&&Je.length)return xe[Re.field]=1,oe(Je);if(!Lt)oe(Je);else{if(Re.required&&!ye.value)return Re.message!==void 0?Je=[].concat(Re.message).map(qA(Re)):v.error&&(Je=[v.error(Re,so(v.messages.required,Re.field))]),oe(Je);var je={};if(Re.defaultField)for(var Qt in ye.value)ye.value.hasOwnProperty(Qt)&&(je[Qt]=Re.defaultField);je=tu({},je,ye.rule.fields);for(var Ht in je)if(je.hasOwnProperty(Ht)){var Pt=Array.isArray(je[Ht])?je[Ht]:[je[Ht]];je[Ht]=Pt.map(yt.bind(null,Ht))}var _t=new _c(je);_t.messages(v.messages),ye.rule.options&&(ye.rule.options.messages=v.messages,ye.rule.options.error=v.error),_t.validate(ye.value,ye.rule.options||v,function(Dt){var jt=[];Je&&Je.length&&jt.push.apply(jt,Je),Dt&&Dt.length&&jt.push.apply(jt,Dt),oe(jt.length?jt:null)})}}var Ge;Re.asyncValidator?Ge=Re.asyncValidator(Re,ye.value,wt,ye.source,v):Re.validator&&(Ge=Re.validator(Re,ye.value,wt,ye.source,v),Ge===!0?wt():Ge===!1?wt(Re.message||Re.field+" fails"):Ge instanceof Array?wt(Ge):Ge instanceof Error&&wt(Ge.message)),Ge&&Ge.then&&Ge.then(function(){return wt()},function(Ne){return wt(Ne)})},function(ye){B(ye)})},getType:function(l){if(l.type===void 0&&l.pattern instanceof RegExp&&(l.type="pattern"),typeof l.validator!="function"&&l.type&&!vm.hasOwnProperty(l.type))throw new Error(so("Unknown rule type %s",l.type));return l.type||"string"},getValidationMethod:function(l){if(typeof l.validator=="function")return l.validator;var u=Object.keys(l),m=u.indexOf("message");return m!==-1&&u.splice(m,1),u.length===1&&u[0]==="required"?vm.required:vm[this.getType(l)]||!1}},_c.register=function(l,u){if(typeof u!="function")throw new Error("Cannot register a validator by type, validator is not a function");vm[l]=u},_c.warning=dj,_c.messages=nS,_c.validators=vm;const bm="ivu-form-item";function JA(l,u){let m=l;u=u.replace(/\[(\w+)\]/g,".$1"),u=u.replace(/^\./,"");let k=u.split("."),C=0;for(let v=k.length;C<v-1;++C){let R=k[C];if(R in m)m=m[R];else throw new Error("[View UI warn]: please transfer a valid prop path to form item!")}return{o:m,k:k[C],v:m[k[C]]}}const Vj={name:"FormItem",inject:["FormInstance"],provide(){return{FormItemInstance:this}},props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0},labelFor:{type:String}},data(){return{prefixCls:bm,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:{handler(l){this.validateMessage=l,this.validateState=l?"error":""},immediate:!0},validateStatus(l){this.validateState=l},rules(){this.setRules()},required(l,u){this.isRequired=l,u&&!l&&this.resetField()}},computed:{classes(){return[`${bm}`,{[`${bm}-required`]:this.required||this.isRequired,[`${bm}-error`]:this.validateState==="error",[`${bm}-validating`]:this.validateState==="validating"}]},fieldValue(){const l=this.FormInstance.model;if(!l||!this.prop)return;let u=this.prop;return u.indexOf(":")!==-1&&(u=u.replace(/:/,".")),JA(l,u).v},labelStyles(){let l={};const u=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(u||u===0)&&(l.width=`${u}px`),l},contentStyles(){let l={};const u=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(u||u===0)&&(l.marginLeft=`${u}px`),l}},methods:{setRules(){let l=this.getRules();l.length&&this.required||(l.length?l.every(u=>{this.isRequired=u.required}):this.required&&(this.isRequired=this.required))},getRules(){let l=this.FormInstance.rules;const u=this.rules;return l=l?l[this.prop]:[],[].concat(u||l||[])},getFilteredRule(l){return this.getRules().filter(u=>!u.trigger||u.trigger.indexOf(l)!==-1)},validate(l,u=function(){}){let m=this.getFilteredRule(l);if(!m||m.length===0)if(this.required)m=[{required:!0}];else return u(),!0;this.validateState="validating";let k={};k[this.prop]=m;const C=new _c(k);let v={};v[this.prop]=this.fieldValue,C.validate(v,{firstFields:!0},R=>{this.validateState=R?"error":"success",this.validateMessage=R?R[0].message:"",u(this.validateMessage),this.FormInstance&&this.FormInstance.$emit("on-validate",this.prop,!R,this.validateMessage||null)}),this.validateDisabled=!1},resetField(){this.validateState="",this.validateMessage="";let l=this.FormInstance.model,u=this.fieldValue,m=this.prop;m.indexOf(":")!==-1&&(m=m.replace(/:/,"."));let k=JA(l,m);Array.isArray(u)&&this.initialValue!==null?(this.validateDisabled=!0,k.o[k.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,k.o[k.k]=this.initialValue)},onFieldBlur(){this.validate("blur")},onFieldChange(){if(this.validateDisabled){this.validateDisabled=!1;return}this.validate("change")},formBlur(){this.onFieldBlur()},formChange(){this.onFieldChange()}},mounted(){this.prop&&(this.FormInstance.addField(this),Object.defineProperty(this,"initialValue",{value:this.fieldValue}),this.setRules())},beforeUnmount(){this.FormInstance.removeField(this)}},Lj=["for"];function Bj(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[m.label||l.$slots.label?(i.openBlock(),i.createElementBlock("label",{key:0,class:i.normalizeClass([C.prefixCls+"-label"]),for:m.labelFor,style:i.normalizeStyle(v.labelStyles)},[i.renderSlot(l.$slots,"label",{},()=>[i.createTextVNode(i.toDisplayString(m.label)+i.toDisplayString(v.FormInstance.colon),1)])],14,Lj)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content"]),style:i.normalizeStyle(v.contentStyles)},[i.renderSlot(l.$slots,"default"),i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[C.validateState==="error"&&m.showMessage&&v.FormInstance.showMessage?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-error-tip"])},i.toDisplayString(C.validateMessage),3)):i.createCommentVNode("",!0)]),_:1})],6)],2)}var Fv=c(Vj,[["render",Bj]]),rS={UserName:"请输入用户名！",Password:"请输入密码！",Email:"请输入邮箱！",Mobile:"请输入手机号码！",Captcha:"请输入验证码！"},xm={inject:["LoginInstance"],emits:["on-change"],props:{rules:{type:[Object,Array],default(){const l=i.getCurrentInstance().type.name;return[{required:!0,message:rS[l],trigger:"change"}]}},value:{type:String},name:{type:String,required:!0},enterToSubmit:{type:Boolean,default:!1}},data(){return{prop:""}},methods:{handleChange(l){this.LoginInstance.formValidate[this.prop]=l,this.$emit("on-change",l)},handleEnter(){this.enterToSubmit&&this.LoginInstance.handleSubmit()},handleSetValue(){const l=this.$props;l.value&&(this.LoginInstance.formValidate[this.prop]=l.value)},handleGetProps(){let l=this.$props.name;const u={prefix:this.prefix,placeholder:this.placeholder,type:this.type,size:"large",modelValue:this.LoginInstance.formValidate[this.prop]};return l&&(u.name=l),Object.assign(u,this.$attrs)}},render(){const l=this.handleGetProps(),u=i.h(Do,{...l,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),m=i.h(Fv,{prop:this.prop,rules:this.rules},()=>[u]);return i.h("div",{class:this.className},[m])},created(){const l=this.name,u=Object.assign({},this.LoginInstance.formValidate);u[l]="",this.LoginInstance.formValidate=u,this.prop=l,this.handleSetValue()}};const e4={name:"Captcha",mixins:[xm],emits:["on-get-captcha"],props:{field:{type:[String,Array]},countDown:{type:Number,default:60},text:{type:String},unitText:{type:String,default:"秒"},beforeClick:Function},data(){return{className:"ivu-login-captcha",prefix:"ios-keypad-outline",placeholder:"请输入验证码",type:"text",buttonDisabled:!1,limitCountDown:0}},methods:{handleClickCaptcha(){if(this.field){const l=typeof this.field=="string"?[this.field]:this.field;this.LoginInstance.handleValidate(l,u=>{u&&this.handleBeforeGetCaptcha()})}else this.handleBeforeGetCaptcha()},handleBeforeGetCaptcha(){if(!this.beforeClick)return this.handleGetCaptcha();const l=this.beforeClick();l&&l.then?l.then(()=>{this.handleGetCaptcha()}):this.handleGetCaptcha()},handleGetCaptcha(){this.countDown>0&&(this.buttonDisabled=!0,this.limitCountDown=this.countDown,this.handleCountDown()),this.$emit("on-get-captcha",this.LoginInstance.formValidate[this.prop],JSON.parse(JSON.stringify(this.LoginInstance.formValidate)))},handleCountDown(){this.timer=setTimeout(()=>{this.limitCountDown--,this.limitCountDown===0?(this.buttonDisabled=!1,clearTimeout(this.timer)):this.handleCountDown()},1e3)}},render(){const l=this.$attrs,u=this.handleGetProps(),m={size:"large",type:"default",long:!0,disabled:this.buttonDisabled};"size"in l&&(m.size=l.size),"button-type"in l&&(m.type=l["button-type"]);let k;this.$slots.text?k=this.$slots.text:this.limitCountDown!==0?k=()=>`${this.limitCountDown} ${this.unitText}`:this.text?k=()=>this.text:k=()=>"获取验证码";const C=i.h(fs,{...m,onClick:this.handleClickCaptcha},k),v=i.h(Do,{...u,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),R=i.h(Ba,{span:16},()=>[v]),B=i.h(Ba,{span:8},()=>[C]),G=i.h(wc,{gutter:8},()=>[R,B]),W=i.h(Fv,{prop:this.prop,rules:this.rules},()=>[G]);return i.h("div",{class:this.className},[W])},beforeUnmount(){this.timer&&clearTimeout(this.timer)}},iu="ivu-card",t4=16,Uj={name:"Card",mixins:[pe],components:{Icon:S},props:{bordered:{type:Boolean,default:!0},disHover:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},padding:{type:Number,default:t4},title:{type:String},icon:{type:String}},data(){return{showHead:!0,showExtra:!0}},computed:{classes(){return[`${iu}`,{[`${iu}-bordered`]:this.bordered&&!this.shadow,[`${iu}-dis-hover`]:this.disHover||this.shadow,[`${iu}-shadow`]:this.shadow}]},headClasses(){return`${iu}-head`},extraClasses(){return`${iu}-extra`},bodyClasses(){return`${iu}-body`},bodyStyles(){return this.padding!==t4?{padding:`${this.padding}px`}:""},isHrefPattern(){const{to:l}=this;return!!l},tagName(){const{isHrefPattern:l}=this;return l?"a":"div"},tagProps(){const{isHrefPattern:l}=this;if(l){const{linkUrl:u,target:m}=this;return{href:u,target:m}}else return{}}},methods:{handleClickLink(l){if(!this.isHrefPattern)return;const u=l.ctrlKey||l.metaKey;this.handleCheckClick(l,u)}},mounted(){this.showHead=this.title||this.$slots.title!==void 0,this.showExtra=this.$slots.extra!==void 0}},Fj={key:0};function zj(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createBlock(i.resolveDynamicComponent(v.tagName),i.mergeProps({class:v.classes},v.tagProps,{onClick:v.handleClickLink}),{default:i.withCtx(()=>[C.showHead?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.headClasses)},[i.renderSlot(l.$slots,"title",{},()=>[m.title?(i.openBlock(),i.createElementBlock("p",Fj,[m.icon?(i.openBlock(),i.createBlock(R,{key:0,type:m.icon},null,8,["type"])):i.createCommentVNode("",!0),i.createElementVNode("span",null,i.toDisplayString(m.title),1)])):i.createCommentVNode("",!0)])],2)):i.createCommentVNode("",!0),C.showExtra?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass(v.extraClasses)},[i.renderSlot(l.$slots,"extra")],2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass(v.bodyClasses),style:i.normalizeStyle(v.bodyStyles)},[i.renderSlot(l.$slots,"default")],6)]),_:3},16,["class","onClick"])}var i4=c(Uj,[["render",zj]]);const Vd="ivu-carousel",Xj={name:"Carousel",provide(){return{CarouselInstance:this}},components:{Icon:S},emits:["on-change","on-click","update:modelValue"],props:{arrow:{type:String,default:"hover",validator(l){return _(l,["hover","always","never"])}},autoplay:{type:Boolean,default:!1},autoplaySpeed:{type:Number,default:2e3},loop:{type:Boolean,default:!1},easing:{type:String,default:"ease"},dots:{type:String,default:"inside",validator(l){return _(l,["inside","outside","none"])}},radiusDot:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator(l){return _(l,["click","hover"])}},modelValue:{type:Number,default:0},height:{type:[String,Number],default:"auto",validator(l){return l==="auto"||Object.prototype.toString.call(l)==="[object Number]"}}},data(){return{prefixCls:Vd,listWidth:0,trackWidth:0,trackOffset:0,trackCopyOffset:0,showCopyTrack:!1,slides:[],slideInstances:[],timer:null,ready:!1,currentIndex:this.modelValue,trackIndex:this.modelValue,copyTrackIndex:this.modelValue,hideTrackPos:-1,carouselItemList:[]}},computed:{classes(){return[`${Vd}`]},trackStyles(){const l=this.trackIndex===-1?"hidden":"visible";return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,visibility:l}},copyTrackStyles(){return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackCopyOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,position:"absolute"}},arrowClasses(){return[`${Vd}-arrow`,`${Vd}-arrow-${this.arrow}`]},dotsClasses(){return[`${Vd}-dots`,`${Vd}-dots-${this.dots}`]}},methods:{findChild(l){this.carouselItemList.length&&this.carouselItemList.forEach(u=>{l(u.carouselItem)})},initCopyTrackDom(){i.nextTick(()=>{this.$refs.copyTrack.innerHTML=this.$refs.originTrack.innerHTML})},updateSlides(l){let u=[],m=1;this.findChild(k=>{u.push({$el:k.$el}),k.index=m++,l&&this.slideInstances.push(k)}),this.slides=u,this.updatePos()},updatePos(){this.findChild(l=>{l.width=this.listWidth,l.height=typeof this.height=="number"?`${this.height}px`:this.height}),this.trackWidth=(this.slides.length||0)*this.listWidth},slotChange(){i.nextTick(()=>{this.slides=[],this.slideInstances=[],this.updateSlides(!0,!0),this.updatePos(),this.updateOffset()})},handleResize(){this.listWidth=parseInt(D(this.$el,"width")),this.updatePos(),this.updateOffset()},updateTrackPos(l){this.showCopyTrack?this.trackIndex=l:this.copyTrackIndex=l},updateTrackIndex(l){this.showCopyTrack?this.copyTrackIndex=l:this.trackIndex=l,this.currentIndex=l},add(l){let u=this.slides.length;this.loop&&(l>0?this.hideTrackPos=-1:this.hideTrackPos=u,this.updateTrackPos(this.hideTrackPos));const m=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;let k=m+l;for(;k<0;)k+=u;(l>0&&k===u||l<0&&k===u-1)&&this.loop?(this.showCopyTrack=!this.showCopyTrack,this.trackIndex+=l,this.copyTrackIndex+=l):(this.loop||(k=k%this.slides.length),this.updateTrackIndex(k)),this.currentIndex=k===this.slides.length?0:k,this.$emit("on-change",m,this.currentIndex),this.$emit("update:modelValue",this.currentIndex)},arrowEvent(l){this.setAutoplay(),this.add(l)},dotsEvent(l,u){let m=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;const k=this.currentIndex;l===this.trigger&&m!==u&&(this.updateTrackIndex(u),this.$emit("on-change",k,this.currentIndex),this.$emit("update:modelValue",u),this.setAutoplay())},setAutoplay(){!s||(window.clearInterval(this.timer),this.autoplay&&(this.timer=window.setInterval(()=>{this.add(1)},this.autoplaySpeed)))},updateOffset(){i.nextTick(()=>{let l=this.copyTrackIndex>0?-1:1;this.trackOffset=this.trackIndex*this.listWidth,this.trackCopyOffset=this.copyTrackIndex*this.listWidth+l})},handleClick(l){this.$emit("on-click",this[l])}},watch:{autoplay(){this.setAutoplay()},autoplaySpeed(){this.setAutoplay()},trackIndex(){this.updateOffset()},copyTrackIndex(){this.updateOffset()},height(){this.updatePos()},modelValue(l){this.updateTrackIndex(l),this.setAutoplay()}},mounted(){this.updateSlides(!0),this.handleResize(),this.setAutoplay(),o(window,"resize",this.handleResize)},beforeUnmount(){a(window,"resize",this.handleResize)}},Wj=["onClick","onMouseover"];function Qj(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.createElementVNode("button",{type:"button",class:i.normalizeClass([v.arrowClasses,"left"]),onClick:u[0]||(u[0]=B=>v.arrowEvent(-1))},[i.createVNode(R,{type:"ios-arrow-back"})],2),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-list"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-track",C.showCopyTrack?"":"higher"]),style:i.normalizeStyle(v.trackStyles),ref:"originTrack",onClick:u[1]||(u[1]=B=>v.handleClick("currentIndex"))},[i.renderSlot(l.$slots,"default")],6),m.loop?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-track",C.showCopyTrack?"higher":""]),style:i.normalizeStyle(v.copyTrackStyles),ref:"copyTrack",onClick:u[2]||(u[2]=B=>v.handleClick("copyTrackIndex"))},null,6)):i.createCommentVNode("",!0)],2),i.createElementVNode("button",{type:"button",class:i.normalizeClass([v.arrowClasses,"right"]),onClick:u[3]||(u[3]=B=>v.arrowEvent(1))},[i.createVNode(R,{type:"ios-arrow-forward"})],2),i.createElementVNode("ul",{class:i.normalizeClass(v.dotsClasses)},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.slides.length,B=>(i.openBlock(),i.createElementBlock("li",{key:B,class:i.normalizeClass([B-1===C.currentIndex?C.prefixCls+"-active":""]),onClick:G=>v.dotsEvent("click",B-1),onMouseover:G=>v.dotsEvent("hover",B-1)},[i.createElementVNode("button",{type:"button",class:i.normalizeClass([m.radiusDot?"radius":""])},null,2)],42,Wj))),128))],2)],2)}var n4=c(Xj,[["render",Qj]]);const Hj="ivu-carousel-item",Gj={componentName:"carousel-item",name:"CarouselItem",inject:["CarouselInstance"],data(){return{prefixCls:Hj,width:0,height:"auto",left:0,id:te(6)}},computed:{styles(){return{width:`${this.width}px`,height:`${this.height}`,left:`${this.left}px`}}},watch:{width(l){l&&this.CarouselInstance.loop&&i.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})},height(l){l&&this.CarouselInstance.loop&&i.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})}},methods:{addInstance(){const l=this.CarouselInstance;l.carouselItemList||(l.carouselItemList=[]),l.carouselItemList.push({id:this.id,carouselItem:this})},removeInstance(){const l=this.CarouselInstance;if(!l.carouselItemList)return;const u=l.carouselItemList.findIndex(m=>m.id===this.id);l.carouselItemList.splice(u,1)}},mounted(){this.addInstance(),this.CarouselInstance.slotChange()},beforeUnmount(){this.removeInstance(),this.CarouselInstance.slotChange()}};function Yj(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(C.prefixCls),style:i.normalizeStyle(v.styles)},[i.renderSlot(l.$slots,"default")],6)}var r4=c(Gj,[["render",Yj]]);const jj={name:"Casitem",components:{Icon:S},mixins:[oa],props:{data:Object,prefixCls:String,tmpItem:Object},computed:{classes(){return[`${this.prefixCls}-menu-item`,{[`${this.prefixCls}-menu-item-active`]:this.tmpItem.value===this.data.value,[`${this.prefixCls}-menu-item-disabled`]:this.data.disabled}]},showArrow(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},arrowType(){const l=this.globalConfig;let u="ios-arrow-forward";return l&&(l.cascader.customItemArrow?u="":l.cascader.itemArrow&&(u=l.cascader.itemArrow)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.cascader.customItemArrow&&(u=l.cascader.customItemArrow),u},arrowSize(){const l=this.globalConfig;let u="";return l&&l.cascader.itemArrowSize&&(u=l.cascader.itemArrowSize),u}}},qj={key:1,class:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"};function Zj(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.classes)},[i.createTextVNode(i.toDisplayString(m.data.label)+" ",1),v.showArrow?(i.openBlock(),i.createBlock(R,{key:0,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["type","custom","size"])):i.createCommentVNode("",!0),v.showLoading?(i.openBlock(),i.createElementBlock("i",qj)):i.createCommentVNode("",!0)],2)}var Kj=c(jj,[["render",Zj]]);let Jj=1;const eq={name:"Caspanel",components:{Casitem:Kj},inject:["CascaderInstance"],provide(){return{CaspanelInstance:this}},props:{data:{type:Array,default(){return[]}},disabled:Boolean,changeOnSelect:Boolean,trigger:String,prefixCls:String},data(){return{tmpItem:{},result:[],sublist:[],id:te(6),childCaspanelList:[]}},watch:{data(){this.sublist=[]}},methods:{handleClickItem(l){this.trigger!=="click"&&l.children&&l.children.length||this.handleTriggerItem(l,!1,!0)},handleHoverItem(l){this.trigger!=="hover"||!l.children||!l.children.length||this.handleTriggerItem(l,!1,!0)},handleTriggerItem(l,u=!1,m=!1){if(l.disabled)return;const k=V(this,"Cascader");if(l.loading!==void 0&&!l.children.length&&k&&k.loadData){k.loadData(l,()=>{m&&(k.isLoadedChildren=!0),l.children.length&&this.handleTriggerItem(l)});return}const C=this.getBaseItem(l);(this.changeOnSelect||C.label!==this.tmpItem.label||C.value!==this.tmpItem.value||C.label===this.tmpItem.label&&C.value===this.tmpItem.value)&&(this.tmpItem=C,this.emitUpdate([C])),l.children&&l.children.length?(this.sublist=l.children,this.CascaderInstance.handleOnResultChange({lastValue:!1,changeOnSelect:this.changeOnSelect,fromInit:u}),this.changeOnSelect&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)):(this.sublist=[],this.CascaderInstance.handleOnResultChange({lastValue:!0,changeOnSelect:this.changeOnSelect,fromInit:u})),k&&k.$refs.drop.update()},updateResult(l){this.result=[this.tmpItem].concat(l),this.emitUpdate(this.result)},getBaseItem(l){let u=Object.assign({},l);return u.children&&delete u.children,u},emitUpdate(l){this.$parent.$options.name==="Caspanel"?this.$parent.updateResult(l):this.CascaderInstance.updateResult(l)},getKey(){return Jj++},handleOnFindSelected(l){let u=[...l.value];for(let m=0;m<u.length;m++)for(let k=0;k<this.data.length;k++)if(u[m]===this.data[k].value)return this.handleTriggerItem(this.data[k],!0),u.splice(0,1),i.nextTick(()=>{this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnFindSelected({value:u})}),!1},handleOnClear(l=!1){this.sublist=[],this.tmpItem={},l&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)},addCaspanel(){const l=this.CascaderInstance;l.caspanelList||(l.caspanelList=[]),l.caspanelList.push({id:this.id,caspanel:this});const u=V(this,"Caspanel");u&&(u.childCaspanelList||(u.childCaspanelList=[]),u.childCaspanelList.push({id:this.id,caspanel:this}))},removeCaspanel(){const l=this.CascaderInstance;if(l.caspanelList&&l.caspanelList.length){const m=l.caspanelList.findIndex(k=>k.id===this.id);l.caspanelList.splice(m,1)}const u=V(this,"Caspanel");if(u&&u.childCaspanelList&&u.childCaspanelList.length){const m=u.childCaspanelList.findIndex(k=>k.id===this.id);u.childCaspanelList.splice(m,1)}}},mounted(){this.addCaspanel()},beforeUnmount(){this.removeCaspanel()}};function tq(l,u,m,k,C,v){const R=i.resolveComponent("Casitem"),B=i.resolveComponent("Caspanel",!0);return i.openBlock(),i.createElementBlock("span",null,[m.data&&m.data.length?(i.openBlock(),i.createElementBlock("ul",{key:0,class:i.normalizeClass([m.prefixCls+"-menu"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.data,(G,W)=>(i.openBlock(),i.createBlock(R,{key:W,"prefix-cls":m.prefixCls,data:G,"tmp-item":C.tmpItem,onClick:i.withModifiers(j=>v.handleClickItem(G),["stop"]),onMouseenter:i.withModifiers(j=>v.handleHoverItem(G),["stop"])},null,8,["prefix-cls","data","tmp-item","onClick","onMouseenter"]))),128))],2)):i.createCommentVNode("",!0),C.sublist&&C.sublist.length?(i.openBlock(),i.createBlock(B,{key:1,"prefix-cls":m.prefixCls,data:C.sublist,disabled:m.disabled,trigger:m.trigger,"change-on-select":m.changeOnSelect},null,8,["prefix-cls","data","disabled","trigger","change-on-select"])):i.createCommentVNode("",!0)])}var iq=c(eq,[["render",tq]]),sS={beforeMount(l,u,m){function k(C){if(l.contains(C.target))return!1;u.value(C)}l.__vueClickOutside__=k,s&&document.addEventListener("click",k)},unmounted(l,u){s&&document.removeEventListener("click",l.__vueClickOutside__),delete l.__vueClickOutside__}};const Sc="ivu-cascader",nq="ivu-select",rq={name:"Cascader",mixins:[Ki,mi,oa],components:{iInput:Do,Drop:Ye,Icon:S,Caspanel:iq},directives:{clickOutside:sS},emits:["on-change","on-visible-change","update:modelValue"],provide(){return{CascaderInstance:this}},props:{data:{type:Array,default(){return[]}},modelValue:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},trigger:{validator(l){return _(l,["click","hover"])},default:"click"},changeOnSelect:{type:Boolean,default:!1},renderFormat:{type:Function,default(l){return l.join(" / ")}},loadData:{type:Function},filterable:{type:Boolean,default:!1},notFoundText:{type:String},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},capture:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return l.$VIEWUI?l.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:Sc,selectPrefixCls:nq,visible:!1,selected:[],tmpSelected:[],updatingValue:!1,currentValue:this.modelValue||[],query:"",validDataStr:"",isLoadedChildren:!1,isValueNull:!1,caspanelList:[]}},computed:{classes(){return[`${Sc}`,{[`${Sc}-show-clear`]:this.showCloseIcon,[`${Sc}-size-${this.size}`]:!!this.size,[`${Sc}-visible`]:this.visible,[`${Sc}-disabled`]:this.itemDisabled,[`${Sc}-not-found`]:this.filterable&&this.query!==""&&!this.querySelections.length}]},showCloseIcon(){return this.currentValue&&this.currentValue.length&&this.clearable&&!this.itemDisabled},displayRender(){let l=[];for(let u=0;u<this.selected.length;u++)l.push(this.selected[u].label);return this.renderFormat(l,this.selected)},displayInputRender(){return this.filterable?"":this.displayRender},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},inputPlaceholder(){return this.filterable&&this.currentValue.length?null:this.localePlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.select.noMatch"):this.notFoundText},querySelections(){let l=[];function u(m,k,C){const v=L(m);for(let R=0;R<v.length;R++){let B=v[R];B.__label=k?k+" / "+B.label:B.label,B.__value=C?C+","+B.value:B.value,B.children&&B.children.length?(u(B.children,B.__label,B.__value),delete B.__label,delete B.__value):l.push({label:B.__label,value:B.__value,display:B.__label,item:B,disabled:!!B.disabled})}}return u(this.data),l=l.filter(m=>m.label?m.label.indexOf(this.query)>-1:!1).map(m=>(m.display=m.display.replace(new RegExp(this.query,"g"),`<span>${this.query}</span>`),m)),l},arrowType(){const l=this.globalConfig;let u="ios-arrow-down";return l&&(l.cascader.customArrow?u="":l.cascader.arrow&&(u=l.cascader.arrow)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.cascader.customArrow&&(u=l.cascader.customArrow),u},arrowSize(){const l=this.globalConfig;let u="";return l&&l.cascader.arrowSize&&(u=l.cascader.arrowSize),u},dropdownCls(){return{[Sc+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{clearSelect(){if(this.itemDisabled)return!1;const l=JSON.stringify(this.currentValue);this.currentValue=this.selected=this.tmpSelected=[],this.handleClose(),this.emitValue(this.currentValue,l),this.caspanelList.forEach(u=>{u.caspanel.handleOnClear()})},handleClose(){this.visible=!1},toggleOpen(){if(this.itemDisabled)return!1;this.visible?this.filterable||this.handleClose():this.onFocus()},onFocus(){this.visible=!0,this.currentValue.length||this.caspanelList.forEach(l=>{l.caspanel.handleOnClear()})},updateResult(l){this.tmpSelected=l},updateSelected(l=!1,u=!1){(!this.changeOnSelect||l||u)&&this.caspanelList.forEach(m=>{m.caspanel.handleOnFindSelected({value:this.currentValue})})},emitValue(l,u){JSON.stringify(l)!==u&&(this.$emit("on-change",this.currentValue,JSON.parse(JSON.stringify(this.selected))),i.nextTick(()=>{this.handleFormItemChange("change",{value:this.currentValue,selected:JSON.parse(JSON.stringify(this.selected))})}))},handleInput(l){this.query=l.target.value},handleSelectItem(l){const u=this.querySelections[l];if(u.item.disabled)return!1;this.query="",this.$refs.input.currentValue="";const m=JSON.stringify(this.currentValue);this.currentValue=u.value.split(","),setTimeout(()=>{this.emitValue(this.currentValue,m),this.handleClose()},0)},handleFocus(){this.$refs.input.focus()},getValidData(l){const u=L(l);function m(k){const C=Object.assign({},k);return"loading"in C&&delete C.loading,"__value"in C&&delete C.__value,"__label"in C&&delete C.__label,"children"in C&&C.children.length&&(C.children=C.children.map(v=>m(v))),C}return u.map(k=>m(k))},handleOnResultChange(l){const u=l.lastValue,m=l.changeOnSelect,k=l.fromInit;if(u||m){const C=JSON.stringify(this.currentValue);this.selected=this.tmpSelected;let v=[];this.selected.forEach(R=>{v.push(R.value)}),k||(this.updatingValue=!0,this.currentValue=v,this.emitValue(this.currentValue,C))}u&&!k&&this.handleClose()}},created(){this.validDataStr=JSON.stringify(this.getValidData(this.data))},mounted(){this.updateSelected(!0)},watch:{visible(l){l?(this.currentValue.length&&this.updateSelected(),this.transfer&&this.$refs.drop.update(),this.$refs.drop.handleOnUpdatePopper()):(this.filterable&&(this.query="",this.$refs.input.currentValue=""),this.transfer&&this.$refs.drop.destroy(),this.$refs.drop.handleOnDestroyPopper()),this.$emit("on-visible-change",l)},modelValue(l){l===null&&(this.isValueNull=!0),this.currentValue=l||[],(l===null||!l.length)&&(this.selected=[])},currentValue(){if(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",this.currentValue),this.updatingValue){this.updatingValue=!1;return}this.updateSelected(!0)},data:{deep:!0,handler(){const l=JSON.stringify(this.getValidData(this.data));l!==this.validDataStr&&(this.validDataStr=l,this.isLoadedChildren||i.nextTick(()=>this.updateSelected(!1,this.changeOnSelect)),this.isLoadedChildren=!1)}}}},sq=["name","value"],oq=["onClick","innerHTML"];function aq(l,u,m,k,C,v){const R=i.resolveComponent("i-input"),B=i.resolveComponent("Icon"),G=i.resolveComponent("Caspanel"),W=i.resolveComponent("Drop"),j=i.resolveDirective("click-outside");return i.withDirectives((i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-rel"]),onClick:u[1]||(u[1]=(...ce)=>v.toggleOpen&&v.toggleOpen(...ce)),ref:"reference"},[i.createElementVNode("input",{type:"hidden",name:m.name,value:C.currentValue},null,8,sq),i.renderSlot(l.$slots,"default",{},()=>[i.createVNode(R,{"element-id":m.elementId,ref:"input",readonly:!m.filterable,disabled:l.itemDisabled,modelValue:v.displayInputRender,onOnChange:v.handleInput,size:m.size,placeholder:v.inputPlaceholder},null,8,["element-id","readonly","disabled","modelValue","onOnChange","size","placeholder"]),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-label"]),onClick:u[0]||(u[0]=(...ce)=>v.handleFocus&&v.handleFocus(...ce))},i.toDisplayString(v.displayRender),3),[[i.vShow,m.filterable&&C.query===""]]),i.withDirectives(i.createVNode(B,{type:"ios-close-circle",class:i.normalizeClass([C.prefixCls+"-arrow"]),onClick:i.withModifiers(v.clearSelect,["stop"])},null,8,["class","onClick"]),[[i.vShow,v.showCloseIcon]]),i.createVNode(B,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:i.normalizeClass([C.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])])],2),i.createVNode(W,{ref:"drop",visible:C.visible,classes:v.dropdownCls,eventsEnabled:m.eventsEnabled,"transition-name":"transition-drop",transfer:m.transfer},{default:i.withCtx(()=>[i.createElementVNode("div",null,[i.withDirectives(i.createVNode(G,{ref:"caspanel","prefix-cls":C.prefixCls,data:m.data,disabled:l.itemDisabled,"change-on-select":m.changeOnSelect,trigger:m.trigger},null,8,["prefix-cls","data","disabled","change-on-select","trigger"]),[[i.vShow,!m.filterable||m.filterable&&C.query===""]]),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-dropdown"])},[i.createElementVNode("ul",{class:i.normalizeClass([C.selectPrefixCls+"-dropdown-list"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.querySelections,(ce,Oe)=>(i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass([C.selectPrefixCls+"-item",{[C.selectPrefixCls+"-item-disabled"]:ce.disabled}]),key:Oe,onClick:xe=>v.handleSelectItem(Oe),innerHTML:ce.display},null,10,oq))),128))],2)],2),[[i.vShow,m.filterable&&C.query!==""&&v.querySelections.length]]),i.withDirectives(i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls+"-not-found-tip"])},[i.createElementVNode("li",null,i.toDisplayString(v.localeNotFoundText),1)],2),[[i.vShow,m.filterable&&C.query!==""&&!v.querySelections.length||!m.data.length]])])]),_:1},8,["visible","classes","eventsEnabled","transfer"])],2)),[[j,v.handleClose]])}var s4=c(rq,[["render",aq]]);const lq={name:"CellItem",props:{title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""}}},cq={class:"ivu-cell-item"},hq={class:"ivu-cell-icon"},uq={class:"ivu-cell-main"},dq={class:"ivu-cell-title"},fq={class:"ivu-cell-label"},pq={class:"ivu-cell-footer"},mq={class:"ivu-cell-extra"};function gq(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",cq,[i.createElementVNode("div",hq,[i.renderSlot(l.$slots,"icon")]),i.createElementVNode("div",uq,[i.createElementVNode("div",dq,[i.renderSlot(l.$slots,"default",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])]),i.createElementVNode("div",fq,[i.renderSlot(l.$slots,"label",{},()=>[i.createTextVNode(i.toDisplayString(m.label),1)])])]),i.createElementVNode("div",pq,[i.createElementVNode("span",mq,[i.renderSlot(l.$slots,"extra",{},()=>[i.createTextVNode(i.toDisplayString(m.extra),1)])])])])}var yq=c(lq,[["render",gq]]);const Om="ivu-cell",vq={name:"Cell",inject:["CellGroupInstance"],mixins:[pe,oa],components:{CellItem:yq,Icon:S},props:{name:{type:[String,Number]},title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},data(){return{prefixCls:Om}},computed:{classes(){return[`${Om}`,{[`${Om}-disabled`]:this.disabled,[`${Om}-selected`]:this.selected,[`${Om}-with-link`]:this.to}]},arrowType(){const l=this.globalConfig;let u="ios-arrow-forward";return l&&(l.cell.customArrow?u="":l.cell.arrow&&(u=l.cell.arrow)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.cell.customArrow&&(u=l.cell.customArrow),u},arrowSize(){const l=this.globalConfig;let u="";return l&&l.cell.arrowSize&&(u=l.cell.arrowSize),u}},methods:{handleClickItem(l,u){this.CellGroupInstance.handleClick(this.name),this.handleCheckClick(l,u)}}},bq=["href","target"],xq={key:2,class:"ivu-cell-arrow"};function Oq(l,u,m,k,C,v){const R=i.resolveComponent("CellItem"),B=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[l.to?(i.openBlock(),i.createElementBlock("a",{key:0,href:l.linkUrl,target:l.target,class:"ivu-cell-link",onClick:[u[0]||(u[0]=i.withModifiers(G=>v.handleClickItem(G,!1),["exact"])),u[1]||(u[1]=i.withModifiers(G=>v.handleClickItem(G,!0),["ctrl"])),u[2]||(u[2]=i.withModifiers(G=>v.handleClickItem(G,!0),["meta"]))]},[i.createVNode(R,{title:m.title,label:m.label,extra:m.extra},{icon:i.withCtx(()=>[i.renderSlot(l.$slots,"icon")]),default:i.withCtx(()=>[i.renderSlot(l.$slots,"default")]),extra:i.withCtx(()=>[i.renderSlot(l.$slots,"extra")]),label:i.withCtx(()=>[i.renderSlot(l.$slots,"label")]),_:3},8,["title","label","extra"])],8,bq)):(i.openBlock(),i.createElementBlock("div",{key:1,class:"ivu-cell-link",onClick:u[3]||(u[3]=(...G)=>v.handleClickItem&&v.handleClickItem(...G))},[i.createVNode(R,{title:m.title,label:m.label,extra:m.extra},{icon:i.withCtx(()=>[i.renderSlot(l.$slots,"icon")]),default:i.withCtx(()=>[i.renderSlot(l.$slots,"default")]),extra:i.withCtx(()=>[i.renderSlot(l.$slots,"extra")]),label:i.withCtx(()=>[i.renderSlot(l.$slots,"label")]),_:3},8,["title","label","extra"])])),l.to?(i.openBlock(),i.createElementBlock("div",xq,[i.renderSlot(l.$slots,"arrow",{},()=>[i.createVNode(B,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["type","custom","size"])])])):i.createCommentVNode("",!0)],2)}var o4=c(vq,[["render",Oq]]);const wq={name:"CellGroup",emits:["on-click"],provide(){return{CellGroupInstance:this}},methods:{handleClick(l){this.$emit("on-click",l)}}},_q={class:"ivu-cell-group"};function Sq(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",_q,[i.renderSlot(l.$slots,"default")])}var a4=c(wq,[["render",Sq]]);const oo="ivu-checkbox",Cq={name:"Checkbox",mixins:[mi],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[`${oo}-wrapper`,{[`${oo}-group-item`]:this.group,[`${oo}-wrapper-checked`]:this.currentValue,[`${oo}-wrapper-disabled`]:this.itemDisabled,[`${oo}-${this.size}`]:!!this.size,[`${oo}-border`]:this.border}]},checkboxClasses(){return[`${oo}`,{[`${oo}-checked`]:this.currentValue,[`${oo}-disabled`]:this.itemDisabled,[`${oo}-indeterminate`]:this.indeterminate}]},innerClasses(){return[`${oo}-inner`,{[`${oo}-focus`]:this.focusInner}]},inputClasses(){return`${oo}-input`},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=this.$slots.default!==void 0)},methods:{change(l){if(this.itemDisabled)return!1;const u=l.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",u),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",u),this.handleFormItemChange("change",u))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(l){if(!(l===this.trueValue||l===this.falseValue))throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(l){this.model=l||[]},immediate:!0}}},kq=["disabled","value","name"],Tq=["disabled","checked","name"],Mq={key:0,class:"ivu-checkbox-label-text"};function Eq(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("label",{class:i.normalizeClass(v.wrapClasses)},[i.createElementVNode("span",{class:i.normalizeClass(v.checkboxClasses)},[i.createElementVNode("span",{class:i.normalizeClass(v.innerClasses)},null,2),v.group?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:0,type:"checkbox",class:i.normalizeClass(v.inputClasses),disabled:l.itemDisabled,value:m.label,"onUpdate:modelValue":u[0]||(u[0]=R=>C.model=R),name:m.name,onChange:u[1]||(u[1]=(...R)=>v.change&&v.change(...R)),onFocus:u[2]||(u[2]=(...R)=>v.onFocus&&v.onFocus(...R)),onBlur:u[3]||(u[3]=(...R)=>v.onBlur&&v.onBlur(...R))},null,42,kq)),[[i.vModelCheckbox,C.model]]):(i.openBlock(),i.createElementBlock("input",{key:1,type:"checkbox",class:i.normalizeClass(v.inputClasses),disabled:l.itemDisabled,checked:v.currentValue,name:m.name,onChange:u[4]||(u[4]=(...R)=>v.change&&v.change(...R)),onFocus:u[5]||(u[5]=(...R)=>v.onFocus&&v.onFocus(...R)),onBlur:u[6]||(u[6]=(...R)=>v.onBlur&&v.onBlur(...R))},null,42,Tq))],2),C.showSlot?(i.openBlock(),i.createElementBlock("span",Mq,[i.renderSlot(l.$slots,"default",{},()=>[i.createTextVNode(i.toDisplayString(m.label),1)])])):i.createCommentVNode("",!0)],2)}var Ld=c(Cq,[["render",Eq]]);const Pq="ivu-checkbox-group",Aq={name:"CheckboxGroup",mixins:[mi],emits:["update:modelValue","on-change"],provide(){return{CheckboxGroupInstance:this}},props:{modelValue:{type:Array,default(){return[]}},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}}},data(){return{currentValue:this.modelValue||[],children:[]}},computed:{classes(){return[`${Pq}`,{[`ivu-checkbox-${this.size}`]:!!this.size}]}},methods:{change(l){this.currentValue=l,this.$emit("update:modelValue",l),this.$emit("on-change",l),this.handleFormItemChange("change",l)}}};function Rq(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.renderSlot(l.$slots,"default")],2)}var oS=c(Aq,[["render",Rq]]);const l4="ivu-chart-circle",Iq={name:"iCircle",props:{percent:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:6},strokeColor:{type:[String,Array],default:"#2d8cf0"},strokeLinecap:{validator(l){return _(l,["square","round"])},default:"round"},trailWidth:{type:Number,default:5},trailColor:{type:String,default:"#eaeef2"},dashboard:{type:Boolean,default:!1}},data(){return{id:`ivu-chart-circle-${te(3)}`}},computed:{circleSize(){return{width:`${this.size}px`,height:`${this.size}px`}},computedStrokeWidth(){return this.percent===0&&this.dashboard?0:this.strokeWidth},radius(){return 50-this.strokeWidth/2},pathString(){return this.dashboard?`M 50,50 m 0,${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}`:`M 50,50 m 0,-${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}`},len(){return Math.PI*2*this.radius},trailStyle(){let l={};return this.dashboard&&(l={"stroke-dasharray":`${this.len-75}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}),l},pathStyle(){let l={};return this.dashboard?l={"stroke-dasharray":`${this.percent/100*(this.len-75)}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .6s ease 0s, stroke .6s, stroke-width .06s ease .6s"}:l={"stroke-dasharray":`${this.len}px ${this.len}px`,"stroke-dashoffset":`${(100-this.percent)/100*this.len}px`,transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"},l},wrapClasses(){return`${l4}`},innerClasses(){return`${l4}-inner`},strokeValue(){let l=this.strokeColor;return typeof this.strokeColor!="string"&&(l=`url(#${this.id})`),l},showDefs(){return typeof this.strokeColor!="string"}}},Dq={viewBox:"0 0 100 100"},Nq={key:0},$q=["id"],Vq=["stop-color"],Lq=["stop-color"],Bq=["d","stroke","stroke-width","stroke-linecap"],Uq=["d","stroke-linecap","stroke","stroke-width"];function Fq(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{style:i.normalizeStyle(v.circleSize),class:i.normalizeClass(v.wrapClasses)},[(i.openBlock(),i.createElementBlock("svg",Dq,[v.showDefs?(i.openBlock(),i.createElementBlock("defs",Nq,[i.createElementVNode("linearGradient",{id:C.id,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[i.createElementVNode("stop",{offset:"0%","stop-color":m.strokeColor[0]},null,8,Vq),i.createElementVNode("stop",{offset:"100%","stop-color":m.strokeColor[1]},null,8,Lq)],8,$q)])):i.createCommentVNode("",!0),i.createElementVNode("path",{d:v.pathString,stroke:m.trailColor,"stroke-width":m.trailWidth,"fill-opacity":0,style:i.normalizeStyle(v.trailStyle),"stroke-linecap":m.strokeLinecap},null,12,Bq),i.createElementVNode("path",{d:v.pathString,"stroke-linecap":m.strokeLinecap,stroke:v.strokeValue,"stroke-width":v.computedStrokeWidth,"fill-opacity":"0",style:i.normalizeStyle(v.pathStyle)},null,12,Uq)])),i.createElementVNode("div",{class:i.normalizeClass(v.innerClasses)},[i.renderSlot(l.$slots,"default")],2)],6)}var zv=c(Iq,[["render",Fq]]);const Xv="ivu-dropdown",zq={name:"Dropdown",directives:{clickOutside:sS},components:{Drop:Ye},emits:["on-visible-change","on-clickoutside","on-click","on-hover-click","on-haschild-click"],props:{trigger:{validator(l){return _(l,["click","hover","custom","contextMenu"])},default:"hover"},placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},visible:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},transferClassName:{type:String},stopPropagation:{type:Boolean,default:!1},capture:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return l.$VIEWUI?l.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1},boundariesElement:{default:"window"}},computed:{transition(){return["bottom-start","bottom","bottom-end"].indexOf(this.placement)>-1?"slide-up":"fade"},dropdownCls(){return{[Xv+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}},relClasses(){return[`${Xv}-rel`,{[`${Xv}-rel-user-select-none`]:this.trigger==="contextMenu"}]}},data(){return{prefixCls:Xv,currentVisible:this.visible,timeout:null}},watch:{visible(l){this.currentVisible=l},currentVisible(l){l?this.$refs.drop.update():this.$refs.drop.destroy(),this.$emit("on-visible-change",l)}},methods:{handleClick(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.hasParent()||(this.currentVisible=!this.currentVisible)},handleRightClick(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!this.currentVisible},handleMouseenter(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!0},250)},handleMouseleave(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!1},150))},onClickoutside(l){this.handleClose(),this.handleRightClose(),this.currentVisible&&this.$emit("on-clickoutside",l)},handleClose(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.currentVisible=!1},handleRightClose(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!1},hasParent(){return V(this,"Dropdown")||!1},handleHaschildClick(){i.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!0});const l=this.hasParent();l&&l.handleHaschildClick()},handleItemClick(l){if(this.stopPropagation)return;const u=this.hasParent();u?u.handleItemClick(l):this.$emit("on-click",l)},handleHoverClick(){const l=this.hasParent();l?(i.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1}),l.handleHoverClick()):i.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1})}}};function Xq(l,u,m,k,C,v){const R=i.resolveComponent("Drop"),B=i.resolveDirective("click-outside");return i.withDirectives((i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls]),onMouseenter:u[2]||(u[2]=(...G)=>v.handleMouseenter&&v.handleMouseenter(...G)),onMouseleave:u[3]||(u[3]=(...G)=>v.handleMouseleave&&v.handleMouseleave(...G))},[i.createElementVNode("div",{class:i.normalizeClass(v.relClasses),ref:"reference",onClick:u[0]||(u[0]=(...G)=>v.handleClick&&v.handleClick(...G)),onContextmenu:u[1]||(u[1]=i.withModifiers((...G)=>v.handleRightClick&&v.handleRightClick(...G),["prevent"]))},[i.renderSlot(l.$slots,"default")],34),i.createVNode(R,{ref:"drop",visible:C.currentVisible,classes:v.dropdownCls,placement:m.placement,eventsEnabled:m.eventsEnabled,boundariesElement:m.boundariesElement,transfer:m.transfer,"transition-name":"transition-drop",onMouseenter:v.handleMouseenter,onMouseleave:v.handleMouseleave},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"list")]),_:3},8,["visible","classes","placement","eventsEnabled","boundariesElement","transfer","onMouseenter","onMouseleave"])],34)),[[B,v.onClickoutside]])}var nu=c(zq,[["render",Xq]]);const Wq={name:"DropdownMenu"},Qq={class:"ivu-dropdown-menu"};function Hq(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("ul",Qq,[i.renderSlot(l.$slots,"default")])}var ru=c(Wq,[["render",Hq]]);const No="ivu-tag",_l=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],Gq=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],Yq={name:"Tag",components:{Icon:S},emits:["on-change","on-close"],props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(l){return _(l,["border","dot"])}},name:{type:[String,Number]},size:{validator(l){return _(l,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[`${No}`,`${No}-size-${this.size}`,{[`${No}-${this.color}`]:!!this.color&&_(this.color,_l),[`${No}-${this.type}`]:!!this.type,[`${No}-closable`]:this.closable,[`${No}-checked`]:this.isChecked,[`${No}-checkable`]:this.checkable}]},wraperStyles(){return _(this.color,_l)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:this.type!=="dot"&&this.type!=="border"&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[`${No}-text`,this.type==="border"&&_(this.color,_l)?`${No}-color-${this.color}`:"",this.type!=="dot"&&this.type!=="border"&&this.color!=="default"&&this.isChecked&&Gq.indexOf(this.color)<0?`${No}-color-white`:""]},dotClasses(){return`${No}-dot-inner`},iconClass(){return this.type==="dot"?"":this.type==="border"?_(this.color,_l)?`${No}-color-${this.color}`:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&this.type==="dot"},lineColor(){return this.type==="dot"?"":this.type==="border"?this.color!==void 0?_(this.color,_l)?"":this.color:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},borderColor(){return this.color!==void 0?this.color==="default"?"":this.color:""},dotColor(){return this.color!==void 0?_(this.color,_l)?"":this.color:""},textColorStyle(){return _(this.color,_l)?{}:this.type!=="dot"&&this.type!=="border"?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return _(this.color,_l)?{}:{background:this.dotColor}},defaultTypeColor(){return this.type!=="dot"&&this.type!=="border"&&this.color!==void 0?_(this.color,_l)?"":this.color:""}},methods:{close(l){this.name===void 0?this.$emit("on-close",l):this.$emit("on-close",l,this.name)},check(){if(!this.checkable)return;const l=!this.isChecked;this.isChecked=l,this.name===void 0?this.$emit("on-change",l):this.$emit("on-change",l,this.name)}},watch:{checked(l){this.isChecked=l}}};function jq(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),onClick:u[0]||(u[0]=i.withModifiers((...B)=>v.check&&v.check(...B),["stop"])),style:i.normalizeStyle(v.wraperStyles)},[v.showDot?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(v.dotClasses),style:i.normalizeStyle(v.bgColorStyle)},null,6)):i.createCommentVNode("",!0),i.createElementVNode("span",{class:i.normalizeClass(v.textClasses),style:i.normalizeStyle(v.textColorStyle)},[i.renderSlot(l.$slots,"default")],6),m.closable?(i.openBlock(),i.createBlock(R,{key:1,class:i.normalizeClass(v.iconClass),color:v.lineColor,type:"ios-close",onClick:i.withModifiers(v.close,["stop"])},null,8,["class","color","onClick"])):i.createCommentVNode("",!0)],6)}var Bd=c(Yq,[["render",jq]]),c4={11e4:{l:"Z1",n:"北京",c:"110000",p:"86"},12e4:{l:"Z1",n:"天津",c:"120000",p:"86"},13e4:{l:"H",n:"河北",c:"130000",p:"86"},14e4:{l:"S",n:"山西",c:"140000",p:"86"},15e4:{l:"N",n:"内蒙古",c:"150000",p:"86"},21e4:{l:"L",n:"辽宁",c:"210000",p:"86"},22e4:{l:"J",n:"吉林",c:"220000",p:"86"},23e4:{l:"H",n:"黑龙江",c:"230000",p:"86"},31e4:{l:"Z1",n:"上海",c:"310000",p:"86"},32e4:{l:"J",n:"江苏",c:"320000",p:"86"},33e4:{l:"Z",n:"浙江",c:"330000",p:"86"},34e4:{l:"A",n:"安徽",c:"340000",p:"86"},35e4:{l:"F",n:"福建",c:"350000",p:"86"},36e4:{l:"J",n:"江西",c:"360000",p:"86"},37e4:{l:"S",n:"山东",c:"370000",p:"86"},41e4:{l:"H",n:"河南",c:"410000",p:"86"},42e4:{l:"H",n:"湖北",c:"420000",p:"86"},43e4:{l:"H",n:"湖南",c:"430000",p:"86"},44e4:{l:"G",n:"广东",c:"440000",p:"86"},45e4:{l:"G",n:"广西",c:"450000",p:"86"},46e4:{l:"H",n:"海南",c:"460000",p:"86"},5e5:{l:"Z1",n:"重庆",c:"500000",p:"86"},51e4:{l:"S",n:"四川",c:"510000",p:"86"},52e4:{l:"G",n:"贵州",c:"520000",p:"86"},53e4:{l:"Y",n:"云南",c:"530000",p:"86"},54e4:{l:"X",n:"西藏",c:"540000",p:"86"},61e4:{l:"S",n:"陕西",c:"610000",p:"86"},62e4:{l:"G",n:"甘肃",c:"620000",p:"86"},63e4:{l:"Q",n:"青海",c:"630000",p:"86"},64e4:{l:"N",n:"宁夏",c:"640000",p:"86"},65e4:{l:"X",n:"新疆",c:"650000",p:"86"},71e4:{l:"T",n:"台湾",c:"710000",p:"86"},81e4:{l:"Z2",n:"香港",c:"810000",p:"86"},82e4:{l:"Z2",n:"澳门",c:"820000",p:"86"}},Ud={11e4:{l:"B",n:"北京市",c:"110000",p:"86"},12e4:{l:"T",n:"天津市",c:"120000",p:"86"},130100:{l:"S",n:"石家庄市",c:"130100",p:"130000"},130200:{l:"T",n:"唐山市",c:"130200",p:"130000"},130300:{l:"Q",n:"秦皇岛市",c:"130300",p:"130000"},130400:{l:"H",n:"邯郸市",c:"130400",p:"130000"},130500:{l:"X",n:"邢台市",c:"130500",p:"130000"},130600:{l:"B",n:"保定市",c:"130600",p:"130000"},130700:{l:"Z",n:"张家口市",c:"130700",p:"130000"},130800:{l:"C",n:"承德市",c:"130800",p:"130000"},130900:{l:"C",n:"沧州市",c:"130900",p:"130000"},131e3:{l:"L",n:"廊坊市",c:"131000",p:"130000"},131100:{l:"H",n:"衡水市",c:"131100",p:"130000"},139001:{l:"D",n:"定州市",c:"139001",p:"130000"},139002:{l:"X",n:"辛集市",c:"139002",p:"130000"},140100:{l:"T",n:"太原市",c:"140100",p:"140000"},140200:{l:"D",n:"大同市",c:"140200",p:"140000"},140300:{l:"Y",n:"阳泉市",c:"140300",p:"140000"},140400:{l:"C",n:"长治市",c:"140400",p:"140000"},140500:{l:"J",n:"晋城市",c:"140500",p:"140000"},140600:{l:"S",n:"朔州市",c:"140600",p:"140000"},140700:{l:"J",n:"晋中市",c:"140700",p:"140000"},140800:{l:"Y",n:"运城市",c:"140800",p:"140000"},140900:{l:"X",n:"忻州市",c:"140900",p:"140000"},141e3:{l:"L",n:"临汾市",c:"141000",p:"140000"},141100:{l:"L",n:"吕梁市",c:"141100",p:"140000"},150100:{l:"H",n:"呼和浩特市",c:"150100",p:"150000"},150200:{l:"B",n:"包头市",c:"150200",p:"150000"},150300:{l:"W",n:"乌海市",c:"150300",p:"150000"},150400:{l:"C",n:"赤峰市",c:"150400",p:"150000"},150500:{l:"T",n:"通辽市",c:"150500",p:"150000"},150600:{l:"E",n:"鄂尔多斯市",c:"150600",p:"150000"},150700:{l:"H",n:"呼伦贝尔市",c:"150700",p:"150000"},150800:{l:"B",n:"巴彦淖尔市",c:"150800",p:"150000"},150900:{l:"W",n:"乌兰察布市",c:"150900",p:"150000"},152200:{l:"X",n:"兴安盟",c:"152200",p:"150000"},152500:{l:"X",n:"锡林郭勒盟",c:"152500",p:"150000"},152900:{l:"A",n:"阿拉善盟",c:"152900",p:"150000"},210100:{l:"S",n:"沈阳市",c:"210100",p:"210000"},210200:{l:"D",n:"大连市",c:"210200",p:"210000"},210300:{l:"A",n:"鞍山市",c:"210300",p:"210000"},210400:{l:"F",n:"抚顺市",c:"210400",p:"210000"},210500:{l:"B",n:"本溪市",c:"210500",p:"210000"},210600:{l:"D",n:"丹东市",c:"210600",p:"210000"},210700:{l:"J",n:"锦州市",c:"210700",p:"210000"},210800:{l:"Y",n:"营口市",c:"210800",p:"210000"},210900:{l:"F",n:"阜新市",c:"210900",p:"210000"},211e3:{l:"L",n:"辽阳市",c:"211000",p:"210000"},211100:{l:"P",n:"盘锦市",c:"211100",p:"210000"},211200:{l:"T",n:"铁岭市",c:"211200",p:"210000"},211300:{l:"C",n:"朝阳市",c:"211300",p:"210000"},211400:{l:"H",n:"葫芦岛市",c:"211400",p:"210000"},220100:{l:"C",n:"长春市",c:"220100",p:"220000"},220200:{l:"J",n:"吉林市",c:"220200",p:"220000"},220300:{l:"S",n:"四平市",c:"220300",p:"220000"},220400:{l:"L",n:"辽源市",c:"220400",p:"220000"},220500:{l:"T",n:"通化市",c:"220500",p:"220000"},220600:{l:"B",n:"白山市",c:"220600",p:"220000"},220700:{l:"S",n:"松原市",c:"220700",p:"220000"},220800:{l:"B",n:"白城市",c:"220800",p:"220000"},222400:{l:"Y",n:"延边朝鲜族自治州",c:"222400",p:"220000"},230100:{l:"H",n:"哈尔滨市",c:"230100",p:"230000"},230200:{l:"Q",n:"齐齐哈尔市",c:"230200",p:"230000"},230300:{l:"J",n:"鸡西市",c:"230300",p:"230000"},230400:{l:"H",n:"鹤岗市",c:"230400",p:"230000"},230500:{l:"S",n:"双鸭山市",c:"230500",p:"230000"},230600:{l:"D",n:"大庆市",c:"230600",p:"230000"},230700:{l:"Y",n:"伊春市",c:"230700",p:"230000"},230800:{l:"J",n:"佳木斯市",c:"230800",p:"230000"},230900:{l:"Q",n:"七台河市",c:"230900",p:"230000"},231e3:{l:"M",n:"牡丹江市",c:"231000",p:"230000"},231100:{l:"H",n:"黑河市",c:"231100",p:"230000"},231200:{l:"S",n:"绥化市",c:"231200",p:"230000"},232700:{l:"D",n:"大兴安岭地区",c:"232700",p:"230000"},31e4:{l:"S",n:"上海市",c:"310000",p:"86"},320100:{l:"N",n:"南京市",c:"320100",p:"320000"},320200:{l:"W",n:"无锡市",c:"320200",p:"320000"},320300:{l:"X",n:"徐州市",c:"320300",p:"320000"},320400:{l:"C",n:"常州市",c:"320400",p:"320000"},320500:{l:"S",n:"苏州市",c:"320500",p:"320000"},320600:{l:"N",n:"南通市",c:"320600",p:"320000"},320700:{l:"L",n:"连云港市",c:"320700",p:"320000"},320800:{l:"H",n:"淮安市",c:"320800",p:"320000"},320900:{l:"Y",n:"盐城市",c:"320900",p:"320000"},321e3:{l:"Y",n:"扬州市",c:"321000",p:"320000"},321100:{l:"Z",n:"镇江市",c:"321100",p:"320000"},321200:{l:"T",n:"泰州市",c:"321200",p:"320000"},321300:{l:"X",n:"宿迁市",c:"321300",p:"320000"},330100:{l:"H",n:"杭州市",c:"330100",p:"330000"},330200:{l:"N",n:"宁波市",c:"330200",p:"330000"},330300:{l:"W",n:"温州市",c:"330300",p:"330000"},330400:{l:"J",n:"嘉兴市",c:"330400",p:"330000"},330500:{l:"H",n:"湖州市",c:"330500",p:"330000"},330600:{l:"S",n:"绍兴市",c:"330600",p:"330000"},330700:{l:"J",n:"金华市",c:"330700",p:"330000"},330800:{l:"Q",n:"衢州市",c:"330800",p:"330000"},330900:{l:"Z",n:"舟山市",c:"330900",p:"330000"},331e3:{l:"T",n:"台州市",c:"331000",p:"330000"},331100:{l:"L",n:"丽水市",c:"331100",p:"330000"},340100:{l:"H",n:"合肥市",c:"340100",p:"340000"},340200:{l:"W",n:"芜湖市",c:"340200",p:"340000"},340300:{l:"B",n:"蚌埠市",c:"340300",p:"340000"},340400:{l:"H",n:"淮南市",c:"340400",p:"340000"},340500:{l:"M",n:"马鞍山市",c:"340500",p:"340000"},340600:{l:"H",n:"淮北市",c:"340600",p:"340000"},340700:{l:"T",n:"铜陵市",c:"340700",p:"340000"},340800:{l:"A",n:"安庆市",c:"340800",p:"340000"},341e3:{l:"H",n:"黄山市",c:"341000",p:"340000"},341100:{l:"C",n:"滁州市",c:"341100",p:"340000"},341200:{l:"F",n:"阜阳市",c:"341200",p:"340000"},341300:{l:"X",n:"宿州市",c:"341300",p:"340000"},341500:{l:"L",n:"六安市",c:"341500",p:"340000"},341600:{l:"B",n:"亳州市",c:"341600",p:"340000"},341700:{l:"C",n:"池州市",c:"341700",p:"340000"},341800:{l:"X",n:"宣城市",c:"341800",p:"340000"},350100:{l:"F",n:"福州市",c:"350100",p:"350000"},350200:{l:"S",n:"厦门市",c:"350200",p:"350000"},350300:{l:"P",n:"莆田市",c:"350300",p:"350000"},350400:{l:"S",n:"三明市",c:"350400",p:"350000"},350500:{l:"Q",n:"泉州市",c:"350500",p:"350000"},350600:{l:"Z",n:"漳州市",c:"350600",p:"350000"},350700:{l:"N",n:"南平市",c:"350700",p:"350000"},350800:{l:"L",n:"龙岩市",c:"350800",p:"350000"},350900:{l:"N",n:"宁德市",c:"350900",p:"350000"},360100:{l:"N",n:"南昌市",c:"360100",p:"360000"},360200:{l:"J",n:"景德镇市",c:"360200",p:"360000"},360300:{l:"P",n:"萍乡市",c:"360300",p:"360000"},360400:{l:"J",n:"九江市",c:"360400",p:"360000"},360500:{l:"X",n:"新余市",c:"360500",p:"360000"},360600:{l:"Y",n:"鹰潭市",c:"360600",p:"360000"},360700:{l:"G",n:"赣州市",c:"360700",p:"360000"},360800:{l:"J",n:"吉安市",c:"360800",p:"360000"},360900:{l:"Y",n:"宜春市",c:"360900",p:"360000"},361e3:{l:"F",n:"抚州市",c:"361000",p:"360000"},361100:{l:"S",n:"上饶市",c:"361100",p:"360000"},370100:{l:"J",n:"济南市",c:"370100",p:"370000"},370200:{l:"Q",n:"青岛市",c:"370200",p:"370000"},370300:{l:"Z",n:"淄博市",c:"370300",p:"370000"},370400:{l:"Z",n:"枣庄市",c:"370400",p:"370000"},370500:{l:"D",n:"东营市",c:"370500",p:"370000"},370600:{l:"Y",n:"烟台市",c:"370600",p:"370000"},370700:{l:"W",n:"潍坊市",c:"370700",p:"370000"},370800:{l:"J",n:"济宁市",c:"370800",p:"370000"},370900:{l:"T",n:"泰安市",c:"370900",p:"370000"},371e3:{l:"W",n:"威海市",c:"371000",p:"370000"},371100:{l:"R",n:"日照市",c:"371100",p:"370000"},371200:{l:"L",n:"莱芜市",c:"371200",p:"370000"},371300:{l:"L",n:"临沂市",c:"371300",p:"370000"},371400:{l:"D",n:"德州市",c:"371400",p:"370000"},371500:{l:"L",n:"聊城市",c:"371500",p:"370000"},371600:{l:"B",n:"滨州市",c:"371600",p:"370000"},371700:{l:"H",n:"菏泽市",c:"371700",p:"370000"},410100:{l:"Z",n:"郑州市",c:"410100",p:"410000"},410200:{l:"K",n:"开封市",c:"410200",p:"410000"},410300:{l:"L",n:"洛阳市",c:"410300",p:"410000"},410400:{l:"P",n:"平顶山市",c:"410400",p:"410000"},410500:{l:"A",n:"安阳市",c:"410500",p:"410000"},410600:{l:"H",n:"鹤壁市",c:"410600",p:"410000"},410700:{l:"X",n:"新乡市",c:"410700",p:"410000"},410800:{l:"J",n:"焦作市",c:"410800",p:"410000"},410900:{l:"P",n:"濮阳市",c:"410900",p:"410000"},411e3:{l:"X",n:"许昌市",c:"411000",p:"410000"},411100:{l:"L",n:"漯河市",c:"411100",p:"410000"},411200:{l:"S",n:"三门峡市",c:"411200",p:"410000"},411300:{l:"N",n:"南阳市",c:"411300",p:"410000"},411400:{l:"S",n:"商丘市",c:"411400",p:"410000"},411500:{l:"X",n:"信阳市",c:"411500",p:"410000"},411600:{l:"Z",n:"周口市",c:"411600",p:"410000"},411700:{l:"Z",n:"驻马店市",c:"411700",p:"410000"},419001:{l:"J",n:"济源市",c:"419001",p:"410000"},420100:{l:"W",n:"武汉市",c:"420100",p:"420000"},420200:{l:"H",n:"黄石市",c:"420200",p:"420000"},420300:{l:"S",n:"十堰市",c:"420300",p:"420000"},420500:{l:"Y",n:"宜昌市",c:"420500",p:"420000"},420600:{l:"X",n:"襄阳市",c:"420600",p:"420000"},420700:{l:"E",n:"鄂州市",c:"420700",p:"420000"},420800:{l:"J",n:"荆门市",c:"420800",p:"420000"},420900:{l:"X",n:"孝感市",c:"420900",p:"420000"},421e3:{l:"J",n:"荆州市",c:"421000",p:"420000"},421100:{l:"H",n:"黄冈市",c:"421100",p:"420000"},421200:{l:"X",n:"咸宁市",c:"421200",p:"420000"},421300:{l:"S",n:"随州市",c:"421300",p:"420000"},422800:{l:"E",n:"恩施土家族苗族自治州",c:"422800",p:"420000"},429004:{l:"X",n:"仙桃市",c:"429004",p:"420000"},429005:{l:"Q",n:"潜江市",c:"429005",p:"420000"},429006:{l:"T",n:"天门市",c:"429006",p:"420000"},429021:{l:"S",n:"神农架林区",c:"429021",p:"420000"},430100:{l:"C",n:"长沙市",c:"430100",p:"430000"},430200:{l:"Z",n:"株洲市",c:"430200",p:"430000"},430300:{l:"X",n:"湘潭市",c:"430300",p:"430000"},430400:{l:"H",n:"衡阳市",c:"430400",p:"430000"},430500:{l:"S",n:"邵阳市",c:"430500",p:"430000"},430600:{l:"Y",n:"岳阳市",c:"430600",p:"430000"},430700:{l:"C",n:"常德市",c:"430700",p:"430000"},430800:{l:"Z",n:"张家界市",c:"430800",p:"430000"},430900:{l:"Y",n:"益阳市",c:"430900",p:"430000"},431e3:{l:"C",n:"郴州市",c:"431000",p:"430000"},431100:{l:"Y",n:"永州市",c:"431100",p:"430000"},431200:{l:"H",n:"怀化市",c:"431200",p:"430000"},431300:{l:"L",n:"娄底市",c:"431300",p:"430000"},433100:{l:"X",n:"湘西土家族苗族自治州",c:"433100",p:"430000"},440100:{l:"G",n:"广州市",c:"440100",p:"440000"},440200:{l:"S",n:"韶关市",c:"440200",p:"440000"},440300:{l:"S",n:"深圳市",c:"440300",p:"440000"},440400:{l:"Z",n:"珠海市",c:"440400",p:"440000"},440500:{l:"S",n:"汕头市",c:"440500",p:"440000"},440600:{l:"F",n:"佛山市",c:"440600",p:"440000"},440700:{l:"J",n:"江门市",c:"440700",p:"440000"},440800:{l:"Z",n:"湛江市",c:"440800",p:"440000"},440900:{l:"M",n:"茂名市",c:"440900",p:"440000"},441200:{l:"Z",n:"肇庆市",c:"441200",p:"440000"},441300:{l:"H",n:"惠州市",c:"441300",p:"440000"},441400:{l:"M",n:"梅州市",c:"441400",p:"440000"},441500:{l:"S",n:"汕尾市",c:"441500",p:"440000"},441600:{l:"H",n:"河源市",c:"441600",p:"440000"},441700:{l:"Y",n:"阳江市",c:"441700",p:"440000"},441800:{l:"Q",n:"清远市",c:"441800",p:"440000"},441900:{l:"D",n:"东莞市",c:"441900",p:"440000"},442e3:{l:"Z",n:"中山市",c:"442000",p:"440000"},445100:{l:"C",n:"潮州市",c:"445100",p:"440000"},445200:{l:"J",n:"揭阳市",c:"445200",p:"440000"},445300:{l:"Y",n:"云浮市",c:"445300",p:"440000"},450100:{l:"N",n:"南宁市",c:"450100",p:"450000"},450200:{l:"L",n:"柳州市",c:"450200",p:"450000"},450300:{l:"G",n:"桂林市",c:"450300",p:"450000"},450400:{l:"W",n:"梧州市",c:"450400",p:"450000"},450500:{l:"B",n:"北海市",c:"450500",p:"450000"},450600:{l:"F",n:"防城港市",c:"450600",p:"450000"},450700:{l:"Q",n:"钦州市",c:"450700",p:"450000"},450800:{l:"G",n:"贵港市",c:"450800",p:"450000"},450900:{l:"Y",n:"玉林市",c:"450900",p:"450000"},451e3:{l:"B",n:"百色市",c:"451000",p:"450000"},451100:{l:"H",n:"贺州市",c:"451100",p:"450000"},451200:{l:"H",n:"河池市",c:"451200",p:"450000"},451300:{l:"L",n:"来宾市",c:"451300",p:"450000"},451400:{l:"C",n:"崇左市",c:"451400",p:"450000"},460100:{l:"H",n:"海口市",c:"460100",p:"460000"},460200:{l:"S",n:"三亚市",c:"460200",p:"460000"},460300:{l:"S",n:"三沙市",c:"460300",p:"460000"},460400:{l:"D",n:"儋州市",c:"460400",p:"460000"},469001:{l:"W",n:"五指山市",c:"469001",p:"460000"},469002:{l:"Q",n:"琼海市",c:"469002",p:"460000"},469005:{l:"W",n:"文昌市",c:"469005",p:"460000"},469006:{l:"W",n:"万宁市",c:"469006",p:"460000"},469007:{l:"D",n:"东方市",c:"469007",p:"460000"},469021:{l:"D",n:"定安县",c:"469021",p:"460000"},469022:{l:"T",n:"屯昌县",c:"469022",p:"460000"},469023:{l:"C",n:"澄迈县",c:"469023",p:"460000"},469024:{l:"L",n:"临高县",c:"469024",p:"460000"},469025:{l:"B",n:"白沙黎族自治县",c:"469025",p:"460000"},469026:{l:"C",n:"昌江黎族自治县",c:"469026",p:"460000"},469027:{l:"L",n:"乐东黎族自治县",c:"469027",p:"460000"},469028:{l:"L",n:"陵水黎族自治县",c:"469028",p:"460000"},469029:{l:"B",n:"保亭黎族苗族自治县",c:"469029",p:"460000"},469030:{l:"Q",n:"琼中黎族苗族自治县",c:"469030",p:"460000"},5e5:{l:"C",n:"重庆市",c:"500000",p:"86"},510100:{l:"C",n:"成都市",c:"510100",p:"510000"},510300:{l:"Z",n:"自贡市",c:"510300",p:"510000"},510400:{l:"P",n:"攀枝花市",c:"510400",p:"510000"},510500:{l:"L",n:"泸州市",c:"510500",p:"510000"},510600:{l:"D",n:"德阳市",c:"510600",p:"510000"},510700:{l:"M",n:"绵阳市",c:"510700",p:"510000"},510800:{l:"G",n:"广元市",c:"510800",p:"510000"},510900:{l:"S",n:"遂宁市",c:"510900",p:"510000"},511e3:{l:"N",n:"内江市",c:"511000",p:"510000"},511100:{l:"L",n:"乐山市",c:"511100",p:"510000"},511300:{l:"N",n:"南充市",c:"511300",p:"510000"},511400:{l:"M",n:"眉山市",c:"511400",p:"510000"},511500:{l:"Y",n:"宜宾市",c:"511500",p:"510000"},511600:{l:"G",n:"广安市",c:"511600",p:"510000"},511700:{l:"D",n:"达州市",c:"511700",p:"510000"},511800:{l:"Y",n:"雅安市",c:"511800",p:"510000"},511900:{l:"B",n:"巴中市",c:"511900",p:"510000"},512e3:{l:"Z",n:"资阳市",c:"512000",p:"510000"},513200:{l:"A",n:"阿坝藏族羌族自治州",c:"513200",p:"510000"},513300:{l:"G",n:"甘孜藏族自治州",c:"513300",p:"510000"},513400:{l:"L",n:"凉山彝族自治州",c:"513400",p:"510000"},520100:{l:"G",n:"贵阳市",c:"520100",p:"520000"},520200:{l:"L",n:"六盘水市",c:"520200",p:"520000"},520300:{l:"Z",n:"遵义市",c:"520300",p:"520000"},520400:{l:"A",n:"安顺市",c:"520400",p:"520000"},520500:{l:"B",n:"毕节市",c:"520500",p:"520000"},520600:{l:"T",n:"铜仁市",c:"520600",p:"520000"},522300:{l:"Q",n:"黔西南布依族苗族自治州",c:"522300",p:"520000"},522600:{l:"Q",n:"黔东南苗族侗族自治州",c:"522600",p:"520000"},522700:{l:"Q",n:"黔南布依族苗族自治州",c:"522700",p:"520000"},530100:{l:"K",n:"昆明市",c:"530100",p:"530000"},530300:{l:"Q",n:"曲靖市",c:"530300",p:"530000"},530400:{l:"Y",n:"玉溪市",c:"530400",p:"530000"},530500:{l:"B",n:"保山市",c:"530500",p:"530000"},530600:{l:"Z",n:"昭通市",c:"530600",p:"530000"},530700:{l:"L",n:"丽江市",c:"530700",p:"530000"},530800:{l:"P",n:"普洱市",c:"530800",p:"530000"},530900:{l:"L",n:"临沧市",c:"530900",p:"530000"},532300:{l:"C",n:"楚雄彝族自治州",c:"532300",p:"530000"},532500:{l:"H",n:"红河哈尼族彝族自治州",c:"532500",p:"530000"},532600:{l:"W",n:"文山壮族苗族自治州",c:"532600",p:"530000"},532800:{l:"X",n:"西双版纳傣族自治州",c:"532800",p:"530000"},532900:{l:"D",n:"大理白族自治州",c:"532900",p:"530000"},533100:{l:"D",n:"德宏傣族景颇族自治州",c:"533100",p:"530000"},533300:{l:"N",n:"怒江傈僳族自治州",c:"533300",p:"530000"},533400:{l:"D",n:"迪庆藏族自治州",c:"533400",p:"530000"},540100:{l:"L",n:"拉萨市",c:"540100",p:"540000"},540200:{l:"R",n:"日喀则市",c:"540200",p:"540000"},540300:{l:"C",n:"昌都市",c:"540300",p:"540000"},540400:{l:"L",n:"林芝市",c:"540400",p:"540000"},540500:{l:"S",n:"山南市",c:"540500",p:"540000"},542400:{l:"N",n:"那曲地区",c:"542400",p:"540000"},542500:{l:"A",n:"阿里地区",c:"542500",p:"540000"},610100:{l:"X",n:"西安市",c:"610100",p:"610000"},610200:{l:"T",n:"铜川市",c:"610200",p:"610000"},610300:{l:"B",n:"宝鸡市",c:"610300",p:"610000"},610400:{l:"X",n:"咸阳市",c:"610400",p:"610000"},610500:{l:"W",n:"渭南市",c:"610500",p:"610000"},610600:{l:"Y",n:"延安市",c:"610600",p:"610000"},610700:{l:"H",n:"汉中市",c:"610700",p:"610000"},610800:{l:"Y",n:"榆林市",c:"610800",p:"610000"},610900:{l:"A",n:"安康市",c:"610900",p:"610000"},611e3:{l:"S",n:"商洛市",c:"611000",p:"610000"},620100:{l:"L",n:"兰州市",c:"620100",p:"620000"},620200:{l:"J",n:"嘉峪关市",c:"620200",p:"620000"},620300:{l:"J",n:"金昌市",c:"620300",p:"620000"},620400:{l:"B",n:"白银市",c:"620400",p:"620000"},620500:{l:"T",n:"天水市",c:"620500",p:"620000"},620600:{l:"W",n:"武威市",c:"620600",p:"620000"},620700:{l:"Z",n:"张掖市",c:"620700",p:"620000"},620800:{l:"P",n:"平凉市",c:"620800",p:"620000"},620900:{l:"J",n:"酒泉市",c:"620900",p:"620000"},621e3:{l:"Q",n:"庆阳市",c:"621000",p:"620000"},621100:{l:"D",n:"定西市",c:"621100",p:"620000"},621200:{l:"L",n:"陇南市",c:"621200",p:"620000"},622900:{l:"L",n:"临夏回族自治州",c:"622900",p:"620000"},623e3:{l:"G",n:"甘南藏族自治州",c:"623000",p:"620000"},630100:{l:"X",n:"西宁市",c:"630100",p:"630000"},630200:{l:"H",n:"海东市",c:"630200",p:"630000"},632200:{l:"H",n:"海北藏族自治州",c:"632200",p:"630000"},632300:{l:"H",n:"黄南藏族自治州",c:"632300",p:"630000"},632500:{l:"H",n:"海南藏族自治州",c:"632500",p:"630000"},632600:{l:"G",n:"果洛藏族自治州",c:"632600",p:"630000"},632700:{l:"Y",n:"玉树藏族自治州",c:"632700",p:"630000"},632800:{l:"H",n:"海西蒙古族藏族自治州",c:"632800",p:"630000"},640100:{l:"Y",n:"银川市",c:"640100",p:"640000"},640200:{l:"S",n:"石嘴山市",c:"640200",p:"640000"},640300:{l:"W",n:"吴忠市",c:"640300",p:"640000"},640400:{l:"G",n:"固原市",c:"640400",p:"640000"},640500:{l:"Z",n:"中卫市",c:"640500",p:"640000"},650100:{l:"W",n:"乌鲁木齐市",c:"650100",p:"650000"},650200:{l:"K",n:"克拉玛依市",c:"650200",p:"650000"},650400:{l:"T",n:"吐鲁番市",c:"650400",p:"650000"},650500:{l:"H",n:"哈密市",c:"650500",p:"650000"},652300:{l:"C",n:"昌吉回族自治州",c:"652300",p:"650000"},652700:{l:"B",n:"博尔塔拉蒙古自治州",c:"652700",p:"650000"},652800:{l:"B",n:"巴音郭楞蒙古自治州",c:"652800",p:"650000"},652900:{l:"A",n:"阿克苏地区",c:"652900",p:"650000"},653e3:{l:"K",n:"克孜勒苏柯尔克孜自治州",c:"653000",p:"650000"},653100:{l:"K",n:"喀什地区",c:"653100",p:"650000"},653200:{l:"H",n:"和田地区",c:"653200",p:"650000"},654e3:{l:"Y",n:"伊犁哈萨克自治州",c:"654000",p:"650000"},654200:{l:"T",n:"塔城地区",c:"654200",p:"650000"},654300:{l:"A",n:"阿勒泰地区",c:"654300",p:"650000"},659001:{l:"S",n:"石河子市",c:"659001",p:"650000"},659002:{l:"A",n:"阿拉尔市",c:"659002",p:"650000"},659003:{l:"T",n:"图木舒克市",c:"659003",p:"650000"},659004:{l:"W",n:"五家渠市",c:"659004",p:"650000"},659006:{l:"T",n:"铁门关市",c:"659006",p:"650000"},710101:{l:"J",n:"金门",c:"710101",p:"710000"},710102:{l:"L",n:"连江",c:"710102",p:"710000"},710103:{l:"M",n:"苗栗",c:"710103",p:"710000"},710104:{l:"N",n:"南投",c:"710104",p:"710000"},710105:{l:"P",n:"澎湖",c:"710105",p:"710000"},710106:{l:"P",n:"屏东",c:"710106",p:"710000"},710107:{l:"T",n:"台东",c:"710107",p:"710000"},710108:{l:"T",n:"台中",c:"710108",p:"710000"},710109:{l:"T",n:"台南",c:"710109",p:"710000"},710110:{l:"T",n:"台北",c:"710110",p:"710000"},710111:{l:"T",n:"桃园",c:"710111",p:"710000"},710112:{l:"Y",n:"云林",c:"710112",p:"710000"},710113:{l:"X",n:"新北",c:"710113",p:"710000"},710114:{l:"Z",n:"彰化",c:"710114",p:"710000"},710115:{l:"J",n:"嘉义",c:"710115",p:"710000"},710116:{l:"X",n:"新竹",c:"710116",p:"710000"},710117:{l:"H",n:"花莲",c:"710117",p:"710000"},710118:{l:"Y",n:"宜兰",c:"710118",p:"710000"},710119:{l:"G",n:"高雄",c:"710119",p:"710000"},710120:{l:"J",n:"基隆",c:"710120",p:"710000"},81e4:{l:"X",n:"香港特别行政区",c:"810000",p:"86"},82e4:{l:"A",n:"澳门特别行政区",c:"820000",p:"86"}};function wm(l){return l.replace("市","").replace("地区","").replace("特别行政区","")}function qq(){const l=L(Ud),u=[];for(let m in l){const k=l[m];k.n=wm(k.n),u.push(k)}return u}function h4(l,u){if(!u)return"";const m=l.find(k=>k.n===u);return m?m.c:(console.error("[View UI warn]: City name error."),"")}function Zq(l,u){return l.find(m=>m.c===u).n}const Kq={name:"City",mixins:[mi],components:{Dropdown:nu,DropdownMenu:ru,Select:ds,Option:In,Tag:Bd,Icon:S,RadioGroup:Vv,Radio:Lv},emits:["on-change","update:modelValue"],props:{modelValue:{type:String},useName:{type:Boolean,default:!1},cities:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},placeholder:{type:String,default:"请选择"},searchPlaceholder:{type:String,default:"输入城市名称搜索"},transferClassName:{type:String}},data(){const l=qq();return{currentValue:this.useName?h4(l,this.modelValue):this.modelValue,visible:!1,provinceList:[],cityListByProvince:[],cityListByLetter:{},allCities:l,listType:"province",queryCity:""}},watch:{modelValue(l){const u=this.useName?h4(this.allCities,l):l;this.currentValue=u}},computed:{showCloseIcon(){return this.currentValue&&this.clearable&&!this.itemDisabled},classes(){return[{"ivu-city-show-clear":this.showCloseIcon,[`ivu-city-size-${this.size}`]:!!this.size,"ivu-city-visible":this.visible,"ivu-city-disabled":this.itemDisabled}]},transferClasses(){let l="ivu-city-transfer";return this.transferClassName&&(l+=` ${this.transferClassName}`),l},relCities(){const l=[];return this.cities.length&&this.cities.forEach(u=>{const m=Ud[u];m.n=wm(m.n),l.push(m)}),l},codeToName(){if(!this.currentValue)return this.placeholder;const l=Ud[this.currentValue].n;return this.showSuffix?l:wm(l)}},methods:{handleSelect(l){l&&(this.handleChangeValue(l),i.nextTick(()=>{this.queryCity=""}))},handleChangeValue(l){this.currentValue=l,this.visible=!1;const u=this.useName?Zq(this.allCities,l):l;this.$emit("update:modelValue",u),this.$emit("on-change",Ud[l]),this.handleFormItemChange("change",l)},handleClickLetter(l){let u=l;u==="直辖市"?u="Z1":u==="港澳"&&(u="Z2");const m=`.ivu-city-${u}`,k=this.$refs.list,C=k.querySelectorAll(m)[0].offsetTop,v=k.offsetTop;k.scrollTop=C-v},clearSelect(){if(this.itemDisabled)return!1},handleToggleOpen(){if(this.itemDisabled)return!1;this.visible=!this.visible},handleVisibleChange(l){this.visible=l},handleClickOutside(l){this.$refs.city.contains(l.target)||(this.visible=!1)},handleGetProvinceByLetter(){const l={A:{n:"A",p:[],c:[]},F:{n:"F",p:[],c:[]},G:{n:"G",p:[],c:[]},H:{n:"H",p:[],c:[]},J:{n:"J",p:[],c:[]},L:{n:"L",p:[],c:[]},N:{n:"N",p:[],c:[]},Q:{n:"Q",p:[],c:[]},S:{n:"S",p:[],c:[]},T:{n:"T",p:[],c:[]},X:{n:"X",p:[],c:[]},Y:{n:"Y",p:[],c:[]},Z:{n:"Z",p:[],c:[]},Z1:{n:"直辖市",p:[],c:[]},Z2:{n:"港澳",p:[],c:[]}};for(let u in c4){const m=c4[u];l[m.l].p.push(m)}this.provinceList=l},handleGetCityByProvince(){const l=L(this.provinceList),u=[],m=L(Ud),k=[{p:{n:"直辖市",p:"86",l:"Z1"},c:[]},{p:{n:"港澳",p:"86",l:"Z2"},c:[]}];for(let C in l){const v=l[C];for(let R=0;R<v.p.length;R++){const B=v.p[R],G=B.c,W={p:B,c:[]};for(let j in m){const ce=m[j];ce.n=wm(ce.n),G===ce.p&&W.c.push(ce)}C==="Z1"?k[0].c.push(m[G]):C==="Z2"?k[1].c.push(m[G]):u.push(W)}}this.cityListByProvince=u.concat(k)},handleGetCityByLetter(){const l=L(Ud),u={A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],J:[],K:[],L:[],M:[],N:[],P:[],Q:[],R:[],S:[],T:[],W:[],X:[],Y:[],Z:[]};for(let m in l){const k=l[m];k.n=wm(k.n),u[k.l].push(k)}this.cityListByLetter=u}},created(){this.handleGetProvinceByLetter(),this.handleGetCityByProvince(),this.handleGetCityByLetter()}},Jq=["name","value"],eZ={class:"ivu-city-drop"},tZ={key:0,class:"ivu-city-drop-cities"},iZ=["onClick"],nZ={class:"ivu-city-drop-menu"},rZ={class:"ivu-city-drop-type"},sZ={class:"ivu-city-drop-search"},oZ={key:1,class:"ivu-city-drop-list"},aZ={class:"ivu-city-drop-list-letter"},lZ={class:"ivu-city-drop-list-main",ref:"list"},cZ=["onClick"],hZ={key:2,class:"ivu-city-drop-list"},uZ={class:"ivu-city-drop-list-letter"},dZ={class:"ivu-city-drop-list-main ivu-city-drop-list-main-city",ref:"list"},fZ=["onClick"];function pZ(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Radio"),G=i.resolveComponent("RadioGroup"),W=i.resolveComponent("Option"),j=i.resolveComponent("Select"),ce=i.resolveComponent("Tag"),Oe=i.resolveComponent("DropdownMenu"),xe=i.resolveComponent("Dropdown");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-city",v.classes]),ref:"city"},[i.createVNode(xe,{trigger:"custom",visible:C.visible,transfer:m.transfer,placement:"bottom-start","transfer-class-name":v.transferClasses,onOnVisibleChange:v.handleVisibleChange,onOnClickoutside:v.handleClickOutside},{list:i.withCtx(()=>[i.createVNode(Oe,{onClick:u[3]||(u[3]=i.withModifiers(()=>{},["stop"]))},{default:i.withCtx(()=>[i.createElementVNode("div",eZ,[m.cities.length?(i.openBlock(),i.createElementBlock("div",tZ,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.relCities,ye=>(i.openBlock(),i.createElementBlock("span",{key:ye.n,onClick:oe=>v.handleChangeValue(ye.c)},i.toDisplayString(ye.n),9,iZ))),128))])):i.createCommentVNode("",!0),i.createElementVNode("div",nZ,[i.createElementVNode("div",rZ,[i.createVNode(G,{modelValue:C.listType,"onUpdate:modelValue":u[1]||(u[1]=ye=>C.listType=ye),type:"button",size:"small"},{default:i.withCtx(()=>[i.createVNode(B,{label:"province"},{default:i.withCtx(()=>[i.createTextVNode("按省份")]),_:1}),i.createVNode(B,{label:"city"},{default:i.withCtx(()=>[i.createTextVNode("按城市")]),_:1})]),_:1},8,["modelValue"])]),i.createElementVNode("div",sZ,[i.createVNode(j,{modelValue:C.queryCity,"onUpdate:modelValue":u[2]||(u[2]=ye=>C.queryCity=ye),filterable:"",size:"small",transfer:"",placeholder:m.searchPlaceholder,onOnChange:v.handleSelect},{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.allCities,ye=>(i.openBlock(),i.createBlock(W,{value:ye.c,key:ye.c},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(ye.n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder","onOnChange"])])]),C.listType==="province"?(i.openBlock(),i.createElementBlock("div",oZ,[i.createElementVNode("div",aZ,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.provinceList,ye=>(i.openBlock(),i.createBlock(ce,{onClick:oe=>v.handleClickLetter(ye.n),type:"border",fade:!1,key:ye.n},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(ye.n),1)]),_:2},1032,["onClick"]))),128))]),i.createElementVNode("div",lZ,[i.createElementVNode("dl",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.cityListByProvince,ye=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:ye.p.n},[i.createElementVNode("dt",{class:i.normalizeClass("ivu-city-"+ye.p.l)},i.toDisplayString(ye.p.n)+"：",3),i.createElementVNode("dd",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(ye.c,oe=>(i.openBlock(),i.createElementBlock("li",{key:oe.n,onClick:Re=>v.handleChangeValue(oe.c)},i.toDisplayString(oe.n),9,cZ))),128))])],64))),128))])],512)])):i.createCommentVNode("",!0),C.listType==="city"?(i.openBlock(),i.createElementBlock("div",hZ,[i.createElementVNode("div",uZ,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.cityListByLetter,(ye,oe)=>(i.openBlock(),i.createBlock(ce,{onClick:Re=>v.handleClickLetter(oe),type:"border",fade:!1,key:oe},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(oe),1)]),_:2},1032,["onClick"]))),128))]),i.createElementVNode("div",dZ,[i.createElementVNode("dl",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.cityListByLetter,(ye,oe)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:oe},[i.createElementVNode("dt",{class:i.normalizeClass("ivu-city-"+oe)},i.toDisplayString(oe)+"：",3),i.createElementVNode("dd",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(ye,Re=>(i.openBlock(),i.createElementBlock("li",{key:Re.n,onClick:Lt=>v.handleChangeValue(Re.c)},i.toDisplayString(Re.n),9,fZ))),128))])],64))),128))])],512)])):i.createCommentVNode("",!0)])]),_:1})]),default:i.withCtx(()=>[i.createElementVNode("div",{class:"ivu-city-rel",onClick:u[0]||(u[0]=i.withModifiers((...ye)=>v.handleToggleOpen&&v.handleToggleOpen(...ye),["prevent","stop"]))},[i.createElementVNode("input",{type:"hidden",name:m.name,value:C.currentValue},null,8,Jq),i.renderSlot(l.$slots,"default",{},()=>[i.createElementVNode("span",null,i.toDisplayString(v.codeToName),1),i.withDirectives(i.createVNode(R,{type:"ios-close-circle",class:"ivu-city-arrow",onClick:i.withModifiers(v.clearSelect,["stop"])},null,8,["onClick"]),[[i.vShow,v.showCloseIcon]]),i.createVNode(R,{type:"ios-arrow-down",class:"ivu-city-arrow"})])])]),_:3},8,["visible","transfer","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],2)}var u4=c(Kq,[["render",pZ]]);const d4="ivu-collapse",mZ={name:"Collapse",emits:["on-change","update:modelValue"],provide(){return{CollapseInstance:this}},props:{accordion:{type:Boolean,default:!1},modelValue:{type:[Array,String]},simple:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,panelCount:0}},computed:{classes(){return[`${d4}`,{[`${d4}-simple`]:this.simple}]}},methods:{getActiveKey(){let l=this.currentValue||[];const u=this.accordion;Array.isArray(l)||(l=[l]),u&&l.length>1&&(l=[l[0]]);for(let m=0;m<l.length;m++)l[m]=l[m].toString();return l},toggle(l){const u=l.name.toString();let m=[];if(this.accordion)l.isActive||m.push(u);else{let k=this.getActiveKey();const C=k.indexOf(u);l.isActive?C>-1&&k.splice(C,1):C<0&&k.push(u),m=k}this.currentValue=m,this.$emit("update:modelValue",m),this.$emit("on-change",m)}},watch:{modelValue(l){this.currentValue=l}}};function gZ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.renderSlot(l.$slots,"default")],2)}var f4=c(mZ,[["render",gZ]]);function Wv(l){return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},Wv(l)}var yZ=/^\s+/,vZ=/\s+$/;function Vt(l,u){if(l=l||"",u=u||{},l instanceof Vt)return l;if(!(this instanceof Vt))return new Vt(l,u);var m=bZ(l);this._originalInput=l,this._r=m.r,this._g=m.g,this._b=m.b,this._a=m.a,this._roundA=Math.round(100*this._a)/100,this._format=u.format||m.format,this._gradientType=u.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=m.ok}Vt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var l=this.toRgb();return(l.r*299+l.g*587+l.b*114)/1e3},getLuminance:function(){var l=this.toRgb(),u,m,k,C,v,R;return u=l.r/255,m=l.g/255,k=l.b/255,u<=.03928?C=u/12.92:C=Math.pow((u+.055)/1.055,2.4),m<=.03928?v=m/12.92:v=Math.pow((m+.055)/1.055,2.4),k<=.03928?R=k/12.92:R=Math.pow((k+.055)/1.055,2.4),.2126*C+.7152*v+.0722*R},setAlpha:function(l){return this._a=b4(l),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var l=m4(this._r,this._g,this._b);return{h:l.h*360,s:l.s,v:l.v,a:this._a}},toHsvString:function(){var l=m4(this._r,this._g,this._b),u=Math.round(l.h*360),m=Math.round(l.s*100),k=Math.round(l.v*100);return this._a==1?"hsv("+u+", "+m+"%, "+k+"%)":"hsva("+u+", "+m+"%, "+k+"%, "+this._roundA+")"},toHsl:function(){var l=p4(this._r,this._g,this._b);return{h:l.h*360,s:l.s,l:l.l,a:this._a}},toHslString:function(){var l=p4(this._r,this._g,this._b),u=Math.round(l.h*360),m=Math.round(l.s*100),k=Math.round(l.l*100);return this._a==1?"hsl("+u+", "+m+"%, "+k+"%)":"hsla("+u+", "+m+"%, "+k+"%, "+this._roundA+")"},toHex:function(l){return g4(this._r,this._g,this._b,l)},toHexString:function(l){return"#"+this.toHex(l)},toHex8:function(l){return _Z(this._r,this._g,this._b,this._a,l)},toHex8String:function(l){return"#"+this.toHex8(l)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Tn(this._r,255)*100)+"%",g:Math.round(Tn(this._g,255)*100)+"%",b:Math.round(Tn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Tn(this._r,255)*100)+"%, "+Math.round(Tn(this._g,255)*100)+"%, "+Math.round(Tn(this._b,255)*100)+"%)":"rgba("+Math.round(Tn(this._r,255)*100)+"%, "+Math.round(Tn(this._g,255)*100)+"%, "+Math.round(Tn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:NZ[g4(this._r,this._g,this._b,!0)]||!1},toFilter:function(l){var u="#"+y4(this._r,this._g,this._b,this._a),m=u,k=this._gradientType?"GradientType = 1, ":"";if(l){var C=Vt(l);m="#"+y4(C._r,C._g,C._b,C._a)}return"progid:DXImageTransform.Microsoft.gradient("+k+"startColorstr="+u+",endColorstr="+m+")"},toString:function(l){var u=!!l;l=l||this._format;var m=!1,k=this._a<1&&this._a>=0,C=!u&&k&&(l==="hex"||l==="hex6"||l==="hex3"||l==="hex4"||l==="hex8"||l==="name");return C?l==="name"&&this._a===0?this.toName():this.toRgbString():(l==="rgb"&&(m=this.toRgbString()),l==="prgb"&&(m=this.toPercentageRgbString()),(l==="hex"||l==="hex6")&&(m=this.toHexString()),l==="hex3"&&(m=this.toHexString(!0)),l==="hex4"&&(m=this.toHex8String(!0)),l==="hex8"&&(m=this.toHex8String()),l==="name"&&(m=this.toName()),l==="hsl"&&(m=this.toHslString()),l==="hsv"&&(m=this.toHsvString()),m||this.toHexString())},clone:function(){return Vt(this.toString())},_applyModification:function(l,u){var m=l.apply(null,[this].concat([].slice.call(u)));return this._r=m._r,this._g=m._g,this._b=m._b,this.setAlpha(m._a),this},lighten:function(){return this._applyModification(TZ,arguments)},brighten:function(){return this._applyModification(MZ,arguments)},darken:function(){return this._applyModification(EZ,arguments)},desaturate:function(){return this._applyModification(SZ,arguments)},saturate:function(){return this._applyModification(CZ,arguments)},greyscale:function(){return this._applyModification(kZ,arguments)},spin:function(){return this._applyModification(PZ,arguments)},_applyCombination:function(l,u){return l.apply(null,[this].concat([].slice.call(u)))},analogous:function(){return this._applyCombination(IZ,arguments)},complement:function(){return this._applyCombination(AZ,arguments)},monochromatic:function(){return this._applyCombination(DZ,arguments)},splitcomplement:function(){return this._applyCombination(RZ,arguments)},triad:function(){return this._applyCombination(v4,[3])},tetrad:function(){return this._applyCombination(v4,[4])}},Vt.fromRatio=function(l,u){if(Wv(l)=="object"){var m={};for(var k in l)l.hasOwnProperty(k)&&(k==="a"?m[k]=l[k]:m[k]=_m(l[k]));l=m}return Vt(l,u)};function bZ(l){var u={r:0,g:0,b:0},m=1,k=null,C=null,v=null,R=!1,B=!1;return typeof l=="string"&&(l=BZ(l)),Wv(l)=="object"&&(Sl(l.r)&&Sl(l.g)&&Sl(l.b)?(u=xZ(l.r,l.g,l.b),R=!0,B=String(l.r).substr(-1)==="%"?"prgb":"rgb"):Sl(l.h)&&Sl(l.s)&&Sl(l.v)?(k=_m(l.s),C=_m(l.v),u=wZ(l.h,k,C),R=!0,B="hsv"):Sl(l.h)&&Sl(l.s)&&Sl(l.l)&&(k=_m(l.s),v=_m(l.l),u=OZ(l.h,k,v),R=!0,B="hsl"),l.hasOwnProperty("a")&&(m=l.a)),m=b4(m),{ok:R,format:l.format||B,r:Math.min(255,Math.max(u.r,0)),g:Math.min(255,Math.max(u.g,0)),b:Math.min(255,Math.max(u.b,0)),a:m}}function xZ(l,u,m){return{r:Tn(l,255)*255,g:Tn(u,255)*255,b:Tn(m,255)*255}}function p4(l,u,m){l=Tn(l,255),u=Tn(u,255),m=Tn(m,255);var k=Math.max(l,u,m),C=Math.min(l,u,m),v,R,B=(k+C)/2;if(k==C)v=R=0;else{var G=k-C;switch(R=B>.5?G/(2-k-C):G/(k+C),k){case l:v=(u-m)/G+(u<m?6:0);break;case u:v=(m-l)/G+2;break;case m:v=(l-u)/G+4;break}v/=6}return{h:v,s:R,l:B}}function OZ(l,u,m){var k,C,v;l=Tn(l,360),u=Tn(u,100),m=Tn(m,100);function R(W,j,ce){return ce<0&&(ce+=1),ce>1&&(ce-=1),ce<1/6?W+(j-W)*6*ce:ce<1/2?j:ce<2/3?W+(j-W)*(2/3-ce)*6:W}if(u===0)k=C=v=m;else{var B=m<.5?m*(1+u):m+u-m*u,G=2*m-B;k=R(G,B,l+1/3),C=R(G,B,l),v=R(G,B,l-1/3)}return{r:k*255,g:C*255,b:v*255}}function m4(l,u,m){l=Tn(l,255),u=Tn(u,255),m=Tn(m,255);var k=Math.max(l,u,m),C=Math.min(l,u,m),v,R,B=k,G=k-C;if(R=k===0?0:G/k,k==C)v=0;else{switch(k){case l:v=(u-m)/G+(u<m?6:0);break;case u:v=(m-l)/G+2;break;case m:v=(l-u)/G+4;break}v/=6}return{h:v,s:R,v:B}}function wZ(l,u,m){l=Tn(l,360)*6,u=Tn(u,100),m=Tn(m,100);var k=Math.floor(l),C=l-k,v=m*(1-u),R=m*(1-C*u),B=m*(1-(1-C)*u),G=k%6,W=[m,R,v,v,B,m][G],j=[B,m,m,R,v,v][G],ce=[v,v,B,m,m,R][G];return{r:W*255,g:j*255,b:ce*255}}function g4(l,u,m,k){var C=[aa(Math.round(l).toString(16)),aa(Math.round(u).toString(16)),aa(Math.round(m).toString(16))];return k&&C[0].charAt(0)==C[0].charAt(1)&&C[1].charAt(0)==C[1].charAt(1)&&C[2].charAt(0)==C[2].charAt(1)?C[0].charAt(0)+C[1].charAt(0)+C[2].charAt(0):C.join("")}function _Z(l,u,m,k,C){var v=[aa(Math.round(l).toString(16)),aa(Math.round(u).toString(16)),aa(Math.round(m).toString(16)),aa(x4(k))];return C&&v[0].charAt(0)==v[0].charAt(1)&&v[1].charAt(0)==v[1].charAt(1)&&v[2].charAt(0)==v[2].charAt(1)&&v[3].charAt(0)==v[3].charAt(1)?v[0].charAt(0)+v[1].charAt(0)+v[2].charAt(0)+v[3].charAt(0):v.join("")}function y4(l,u,m,k){var C=[aa(x4(k)),aa(Math.round(l).toString(16)),aa(Math.round(u).toString(16)),aa(Math.round(m).toString(16))];return C.join("")}Vt.equals=function(l,u){return!l||!u?!1:Vt(l).toRgbString()==Vt(u).toRgbString()},Vt.random=function(){return Vt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function SZ(l,u){u=u===0?0:u||10;var m=Vt(l).toHsl();return m.s-=u/100,m.s=Qv(m.s),Vt(m)}function CZ(l,u){u=u===0?0:u||10;var m=Vt(l).toHsl();return m.s+=u/100,m.s=Qv(m.s),Vt(m)}function kZ(l){return Vt(l).desaturate(100)}function TZ(l,u){u=u===0?0:u||10;var m=Vt(l).toHsl();return m.l+=u/100,m.l=Qv(m.l),Vt(m)}function MZ(l,u){u=u===0?0:u||10;var m=Vt(l).toRgb();return m.r=Math.max(0,Math.min(255,m.r-Math.round(255*-(u/100)))),m.g=Math.max(0,Math.min(255,m.g-Math.round(255*-(u/100)))),m.b=Math.max(0,Math.min(255,m.b-Math.round(255*-(u/100)))),Vt(m)}function EZ(l,u){u=u===0?0:u||10;var m=Vt(l).toHsl();return m.l-=u/100,m.l=Qv(m.l),Vt(m)}function PZ(l,u){var m=Vt(l).toHsl(),k=(m.h+u)%360;return m.h=k<0?360+k:k,Vt(m)}function AZ(l){var u=Vt(l).toHsl();return u.h=(u.h+180)%360,Vt(u)}function v4(l,u){if(isNaN(u)||u<=0)throw new Error("Argument to polyad must be a positive number");for(var m=Vt(l).toHsl(),k=[Vt(l)],C=360/u,v=1;v<u;v++)k.push(Vt({h:(m.h+v*C)%360,s:m.s,l:m.l}));return k}function RZ(l){var u=Vt(l).toHsl(),m=u.h;return[Vt(l),Vt({h:(m+72)%360,s:u.s,l:u.l}),Vt({h:(m+216)%360,s:u.s,l:u.l})]}function IZ(l,u,m){u=u||6,m=m||30;var k=Vt(l).toHsl(),C=360/m,v=[Vt(l)];for(k.h=(k.h-(C*u>>1)+720)%360;--u;)k.h=(k.h+C)%360,v.push(Vt(k));return v}function DZ(l,u){u=u||6;for(var m=Vt(l).toHsv(),k=m.h,C=m.s,v=m.v,R=[],B=1/u;u--;)R.push(Vt({h:k,s:C,v})),v=(v+B)%1;return R}Vt.mix=function(l,u,m){m=m===0?0:m||50;var k=Vt(l).toRgb(),C=Vt(u).toRgb(),v=m/100,R={r:(C.r-k.r)*v+k.r,g:(C.g-k.g)*v+k.g,b:(C.b-k.b)*v+k.b,a:(C.a-k.a)*v+k.a};return Vt(R)},Vt.readability=function(l,u){var m=Vt(l),k=Vt(u);return(Math.max(m.getLuminance(),k.getLuminance())+.05)/(Math.min(m.getLuminance(),k.getLuminance())+.05)},Vt.isReadable=function(l,u,m){var k=Vt.readability(l,u),C,v;switch(v=!1,C=UZ(m),C.level+C.size){case"AAsmall":case"AAAlarge":v=k>=4.5;break;case"AAlarge":v=k>=3;break;case"AAAsmall":v=k>=7;break}return v},Vt.mostReadable=function(l,u,m){var k=null,C=0,v,R,B,G;m=m||{},R=m.includeFallbackColors,B=m.level,G=m.size;for(var W=0;W<u.length;W++)v=Vt.readability(l,u[W]),v>C&&(C=v,k=Vt(u[W]));return Vt.isReadable(l,k,{level:B,size:G})||!R?k:(m.includeFallbackColors=!1,Vt.mostReadable(l,["#fff","#000"],m))};var aS=Vt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},NZ=Vt.hexNames=$Z(aS);function $Z(l){var u={};for(var m in l)l.hasOwnProperty(m)&&(u[l[m]]=m);return u}function b4(l){return l=parseFloat(l),(isNaN(l)||l<0||l>1)&&(l=1),l}function Tn(l,u){VZ(l)&&(l="100%");var m=LZ(l);return l=Math.min(u,Math.max(0,parseFloat(l))),m&&(l=parseInt(l*u,10)/100),Math.abs(l-u)<1e-6?1:l%u/parseFloat(u)}function Qv(l){return Math.min(1,Math.max(0,l))}function ao(l){return parseInt(l,16)}function VZ(l){return typeof l=="string"&&l.indexOf(".")!=-1&&parseFloat(l)===1}function LZ(l){return typeof l=="string"&&l.indexOf("%")!=-1}function aa(l){return l.length==1?"0"+l:""+l}function _m(l){return l<=1&&(l=l*100+"%"),l}function x4(l){return Math.round(parseFloat(l)*255).toString(16)}function O4(l){return ao(l)/255}var la=function(){var l="[-\\+]?\\d+%?",u="[-\\+]?\\d*\\.\\d+%?",m="(?:"+u+")|(?:"+l+")",k="[\\s|\\(]+("+m+")[,|\\s]+("+m+")[,|\\s]+("+m+")\\s*\\)?",C="[\\s|\\(]+("+m+")[,|\\s]+("+m+")[,|\\s]+("+m+")[,|\\s]+("+m+")\\s*\\)?";return{CSS_UNIT:new RegExp(m),rgb:new RegExp("rgb"+k),rgba:new RegExp("rgba"+C),hsl:new RegExp("hsl"+k),hsla:new RegExp("hsla"+C),hsv:new RegExp("hsv"+k),hsva:new RegExp("hsva"+C),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Sl(l){return!!la.CSS_UNIT.exec(l)}function BZ(l){l=l.replace(yZ,"").replace(vZ,"").toLowerCase();var u=!1;if(aS[l])l=aS[l],u=!0;else if(l=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var m;return(m=la.rgb.exec(l))?{r:m[1],g:m[2],b:m[3]}:(m=la.rgba.exec(l))?{r:m[1],g:m[2],b:m[3],a:m[4]}:(m=la.hsl.exec(l))?{h:m[1],s:m[2],l:m[3]}:(m=la.hsla.exec(l))?{h:m[1],s:m[2],l:m[3],a:m[4]}:(m=la.hsv.exec(l))?{h:m[1],s:m[2],v:m[3]}:(m=la.hsva.exec(l))?{h:m[1],s:m[2],v:m[3],a:m[4]}:(m=la.hex8.exec(l))?{r:ao(m[1]),g:ao(m[2]),b:ao(m[3]),a:O4(m[4]),format:u?"name":"hex8"}:(m=la.hex6.exec(l))?{r:ao(m[1]),g:ao(m[2]),b:ao(m[3]),format:u?"name":"hex"}:(m=la.hex4.exec(l))?{r:ao(m[1]+""+m[1]),g:ao(m[2]+""+m[2]),b:ao(m[3]+""+m[3]),a:O4(m[4]+""+m[4]),format:u?"name":"hex8"}:(m=la.hex3.exec(l))?{r:ao(m[1]+""+m[1]),g:ao(m[2]+""+m[2]),b:ao(m[3]+""+m[3]),format:u?"name":"hex"}:!1}function UZ(l){var u,m;return l=l||{level:"AA",size:"small"},u=(l.level||"AA").toUpperCase(),m=(l.size||"small").toLowerCase(),u!=="AA"&&u!=="AAA"&&(u="AA"),m!=="small"&&m!=="large"&&(m="small"),{level:u,size:m}}var w4={inject:["ColorPickerInstance"],methods:{handleEscape(l){this.ColorPickerInstance.handleOnEscapeKeydown(l)}}},Sm={data(){return{prefixCls:"ivu-color-picker",inputPrefixCls:"ivu-input",iconPrefixCls:"ivu-icon",transferPrefixCls:"ivu-transfer"}}};function lS(l,u){const m=Vt(l),{_a:k}=m;return k==null&&m.setAlpha(u||1),m}function FZ(l,u){const m=u&&u.a;if(u){if(u.hsl)return lS(u.hsl,m);if(u.hex&&u.hex.length>0)return lS(u.hex,m)}return lS(u,m)}function Cm(l,u){const m=l===""?"#2d8cf0":l,k=FZ(l,m),C=k.toHsl(),v=k.toHsv();return C.s===0&&(C.h=m.h||m.hsl&&m.hsl.h||u||0,v.h=C.h),v.v<.0164&&(v.h=m.h||m.hsv&&m.hsv.h||0,v.s=m.s||m.hsv&&m.hsv.s||0),C.l<.01&&(C.h=m.h||m.hsl&&m.hsl.h||0,C.s=m.s||m.hsl&&m.hsl.s||0),{hsl:C,hex:k.toHexString().toUpperCase(),rgba:k.toRgb(),hsv:v,oldHue:m.h||u||C.h,source:m.source,a:m.a||k.getAlpha()}}function ca(l,u,m){return l<u?u:l>m?m:l}function _4(l,u,m){return _(l,u)?m:0}function S4(l,u){return l.touches?l.touches[0][u]:0}function km(l){const{r:u,g:m,b:k,a:C}=l;return`rgba(${[u,m,k,C].join(",")})`}const zZ={name:"RecommendedColors",mixins:[w4,Sm],emits:["picker-color","change"],props:{list:{type:Array,default:void 0}},data(){const l=Math.ceil(this.list.length/12),u=1;return{left:-u,right:u,up:-u,down:u,powerKey:"shiftKey",grid:{x:1,y:1},rows:l,columns:12}},computed:{hideClass(){return`${this.prefixCls}-hide`},linearIndex(){return this.getLinearIndex(this.grid)},currentCircle(){return this.$refs[`color-circle-${this.linearIndex}`][0]}},methods:{getLinearIndex(l){return this.columns*(l.y-1)+l.x-1},getMaxLimit(l){return l==="x"?this.columns:this.rows},handleArrow(l,u,m){l.preventDefault(),l.stopPropagation(),this.blurColor();const k={...this.grid};l[this.powerKey]?m<0?k[u]=1:k[u]=this.getMaxLimit(u):k[u]+=m;const C=this.getLinearIndex(k);C>=0&&C<this.list.length&&(this.grid[u]=ca(k[u],1,this.getMaxLimit(u))),this.focusColor()},blurColor(){this.currentCircle.classList.add(this.hideClass)},focusColor(){this.currentCircle.classList.remove(this.hideClass)},handleEnter(l){this.handleClick(l,this.currentCircle)},handleClick(l,u){l.preventDefault(),l.stopPropagation(),this.$refs.reference.focus();const m=u||l.target,k=m.dataset.colorId||m.parentElement.dataset.colorId;if(k){this.blurColor();const C=Number(k)+1;this.grid.x=C%this.columns||this.columns,this.grid.y=Math.ceil(C/this.columns),this.focusColor(),this.$emit("picker-color",this.list[k]),this.$emit("change",{hex:this.list[k],source:"hex"})}},lineBreak(l,u){if(!u)return!1;const m=u+1;return m<l.length&&m%this.columns===0}}},XZ=["data-color-id"],WZ={key:0};function QZ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{ref:"reference",tabindex:"0",onClick:u[0]||(u[0]=(...R)=>v.handleClick&&v.handleClick(...R)),onKeydown:[u[1]||(u[1]=i.withKeys((...R)=>l.handleEscape&&l.handleEscape(...R),["esc"])),u[2]||(u[2]=i.withKeys((...R)=>v.handleEnter&&v.handleEnter(...R),["enter"])),u[3]||(u[3]=i.withKeys(R=>v.handleArrow(R,"x",C.left),["left"])),u[4]||(u[4]=i.withKeys(R=>v.handleArrow(R,"x",C.right),["right"])),u[5]||(u[5]=i.withKeys(R=>v.handleArrow(R,"y",C.up),["up"])),u[6]||(u[6]=i.withKeys(R=>v.handleArrow(R,"y",C.down),["down"]))],onBlur:u[7]||(u[7]=(...R)=>v.blurColor&&v.blurColor(...R)),onFocus:u[8]||(u[8]=(...R)=>v.focusColor&&v.focusColor(...R))},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.list,(R,B)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:R+":"+B},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-picker-colors-wrapper"])},[i.createElementVNode("div",{"data-color-id":B},[i.createElementVNode("div",{style:i.normalizeStyle({background:R}),class:i.normalizeClass([l.prefixCls+"-picker-colors-wrapper-color"])},null,6),i.createElementVNode("div",{ref_for:!0,ref:"color-circle-"+B,class:i.normalizeClass([l.prefixCls+"-picker-colors-wrapper-circle",v.hideClass])},null,2)],8,XZ)],2),v.lineBreak(m.list,B)?(i.openBlock(),i.createElementBlock("br",WZ)):i.createCommentVNode("",!0)],64))),128))],544)}var HZ=c(zZ,[["render",QZ]]),Tm={mixins:[w4],props:{focused:{type:Boolean,default:!1},value:{type:Object,default:void 0}},created(){this.focused&&setTimeout(()=>this.$el.focus(),1)},beforeUnmount(){this.unbindEventListeners()},methods:{handleLeft(l){this.handleSlide(l,this.left,"left")},handleRight(l){this.handleSlide(l,this.right,"right")},handleUp(l){this.handleSlide(l,this.up,"up")},handleDown(l){this.handleSlide(l,this.down,"down")},handleMouseDown(l){this.ColorPickerInstance.handleOnDragging(!0),this.handleChange(l,!0),o(window,"mousemove",this.handleChange),o(window,"mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){a(window,"mousemove",this.handleChange),a(window,"mouseup",this.handleMouseUp),setTimeout(()=>this.ColorPickerInstance.handleOnDragging(!1),1)},getLeft(l){if(!s)return;const{container:u}=this.$refs,m=u.getBoundingClientRect().left+window.pageXOffset;return(l.pageX||S4(l,"PageX"))-m},getTop(l){if(!s)return;const{container:u}=this.$refs,m=u.getBoundingClientRect().top+window.pageYOffset;return(l.pageY||S4(l,"PageY"))-m}}};const GZ={name:"Saturation",mixins:[Tm,Sm],emits:["change"],data(){return{left:-.01,right:.01,up:.01,down:-.01,multiplier:10,powerKey:"shiftKey"}},computed:{bgColorStyle(){return{background:`hsl(${this.value.hsv.h}, 100%, 50%)`}},pointerStyle(){return{top:`${-(this.value.hsv.v*100)+1+100}%`,left:`${this.value.hsv.s*100}%`}}},methods:{change(l,u,m,k){this.$emit("change",{h:l,s:u,v:m,a:k,source:"hsva"})},handleSlide(l,u,m){l.preventDefault(),l.stopPropagation();const k=l[this.powerKey]?u*this.multiplier:u,{h:C,s:v,v:R,a:B}=this.value.hsv,G=ca(v+_4(m,["left","right"],k),0,1),W=ca(R+_4(m,["up","down"],k),0,1);this.change(C,G,W,B)},handleChange(l){l.preventDefault(),l.stopPropagation();const{clientWidth:u,clientHeight:m}=this.$refs.container,k=ca(this.getLeft(l),0,u),C=ca(this.getTop(l),0,m),v=k/u,R=ca(1-C/m,0,1);this.change(this.value.hsv.h,v,R,this.value.hsv.a)},handleMouseDown(l){Tm.methods.handleMouseDown.call(this,l),o(window,"mouseup",this.handleChange)},unbindEventListeners(l){Tm.methods.unbindEventListeners.call(this,l),a(window,"mouseup",this.handleChange)}}};function YZ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([l.prefixCls+"-saturation-wrapper"]),tabindex:"0",onKeydown:[u[1]||(u[1]=i.withKeys((...R)=>l.handleEscape&&l.handleEscape(...R),["esc"])),u[3]||(u[3]=i.withKeys((...R)=>l.handleLeft&&l.handleLeft(...R),["left"])),u[4]||(u[4]=i.withKeys((...R)=>l.handleRight&&l.handleRight(...R),["right"])),u[5]||(u[5]=i.withKeys((...R)=>l.handleUp&&l.handleUp(...R),["up"])),u[6]||(u[6]=i.withKeys((...R)=>l.handleDown&&l.handleDown(...R),["down"]))],onClick:u[2]||(u[2]=R=>l.$el.focus())},[i.createElementVNode("div",{ref:"container",style:i.normalizeStyle(v.bgColorStyle),class:i.normalizeClass([l.prefixCls+"-saturation"]),onMousedown:u[0]||(u[0]=(...R)=>v.handleMouseDown&&v.handleMouseDown(...R))},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-saturation--white"])},null,2),i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-saturation--black"])},null,2),i.createElementVNode("div",{style:i.normalizeStyle(v.pointerStyle),class:i.normalizeClass([l.prefixCls+"-saturation-pointer"])},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-saturation-circle"])},null,2)],6)],38)],34)}var jZ=c(GZ,[["render",YZ]]);const qZ={name:"Hue",mixins:[Tm,Sm],emits:["change"],data(){const l=.06944444444444445,u=20*l;return{left:-l,right:l,up:u,down:-u,powerKey:"shiftKey",percent:ca(this.value.hsl.h*100/360,0,100)}},watch:{value(){this.percent=ca(this.value.hsl.h*100/360,0,100)}},methods:{change(l){this.percent=ca(l,0,100);const{h:u,s:m,l:k,a:C}=this.value.hsl,v=ca(l/100*360,0,360);u!==v&&this.$emit("change",{h:v,s:m,l:k,a:C,source:"hsl"})},handleSlide(l,u){if(l.preventDefault(),l.stopPropagation(),l[this.powerKey]){this.change(u<0?0:100);return}this.change(this.percent+u)},handleChange(l){l.preventDefault(),l.stopPropagation();const u=this.getLeft(l);if(u<0){this.change(0);return}const{clientWidth:m}=this.$refs.container;if(u>m){this.change(100);return}this.change(u*100/m)}}};function ZZ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([l.prefixCls+"-hue"]),tabindex:"0",onClick:u[3]||(u[3]=R=>l.$el.focus()),onKeydown:[u[4]||(u[4]=i.withKeys((...R)=>l.handleEscape&&l.handleEscape(...R),["esc"])),u[5]||(u[5]=i.withKeys((...R)=>l.handleLeft&&l.handleLeft(...R),["left"])),u[6]||(u[6]=i.withKeys((...R)=>l.handleRight&&l.handleRight(...R),["right"])),u[7]||(u[7]=i.withKeys((...R)=>l.handleUp&&l.handleUp(...R),["up"])),u[8]||(u[8]=i.withKeys((...R)=>l.handleDown&&l.handleDown(...R),["down"]))]},[i.createElementVNode("div",{ref:"container",class:i.normalizeClass([l.prefixCls+"-hue-container"]),onMousedown:u[0]||(u[0]=(...R)=>l.handleMouseDown&&l.handleMouseDown(...R)),onTouchmove:u[1]||(u[1]=(...R)=>v.handleChange&&v.handleChange(...R)),onTouchstart:u[2]||(u[2]=(...R)=>v.handleChange&&v.handleChange(...R))},[i.createElementVNode("div",{style:i.normalizeStyle({top:0,left:`${C.percent}%`}),class:i.normalizeClass([l.prefixCls+"-hue-pointer"])},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-hue-picker"])},null,2)],6)],34)],34)}var KZ=c(qZ,[["render",ZZ]]);const JZ={name:"Alpha",mixins:[Tm,Sm],emits:["change"],data(){return{left:-1,right:1,up:10,down:-10,powerKey:"shiftKey"}},computed:{gradientStyle(){const{r:l,g:u,b:m}=this.value.rgba,k=km({r:l,g:u,b:m,a:0}),C=km({r:l,g:u,b:m,a:1});return{background:`linear-gradient(to right, ${k} 0%, ${C} 100%)`}}},methods:{change(l){const{h:u,s:m,l:k}=this.value.hsl,{a:C}=this.value;C!==l&&this.$emit("change",{h:u,s:m,l:k,a:l,source:"rgba"})},handleSlide(l,u){l.preventDefault(),l.stopPropagation(),this.change(ca(l[this.powerKey]?u:Math.round(this.value.hsl.a*100+u)/100,0,1))},handleChange(l){l.preventDefault(),l.stopPropagation();const u=this.getLeft(l);if(u<0){this.change(0);return}const{clientWidth:m}=this.$refs.container;if(u>m){this.change(1);return}this.change(Math.round(u*100/m)/100)}}};function eK(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([l.prefixCls+"-alpha"]),tabindex:"0",onClick:u[3]||(u[3]=R=>l.$el.focus()),onKeydown:[u[4]||(u[4]=i.withKeys((...R)=>l.handleEscape&&l.handleEscape(...R),["esc"])),u[5]||(u[5]=i.withKeys((...R)=>l.handleLeft&&l.handleLeft(...R),["left"])),u[6]||(u[6]=i.withKeys((...R)=>l.handleRight&&l.handleRight(...R),["right"])),u[7]||(u[7]=i.withKeys((...R)=>l.handleUp&&l.handleUp(...R),["up"])),u[8]||(u[8]=i.withKeys((...R)=>l.handleDown&&l.handleDown(...R),["down"]))]},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-alpha-checkboard-wrap"])},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-alpha-checkerboard"])},null,2)],2),i.createElementVNode("div",{style:i.normalizeStyle(v.gradientStyle),class:i.normalizeClass([l.prefixCls+"-alpha-gradient"])},null,6),i.createElementVNode("div",{ref:"container",class:i.normalizeClass([l.prefixCls+"-alpha-container"]),onMousedown:u[0]||(u[0]=(...R)=>l.handleMouseDown&&l.handleMouseDown(...R)),onTouchmove:u[1]||(u[1]=(...R)=>v.handleChange&&v.handleChange(...R)),onTouchstart:u[2]||(u[2]=(...R)=>v.handleChange&&v.handleChange(...R))},[i.createElementVNode("div",{style:i.normalizeStyle({top:0,left:`${l.value.a*100}%`}),class:i.normalizeClass([l.prefixCls+"-alpha-pointer"])},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-alpha-picker"])},null,2)],6)],34)],34)}var tK=c(JZ,[["render",eK]]);const iK={name:"ColorPicker",components:{Drop:Ye,RecommendColors:HZ,Saturation:jZ,Hue:KZ,Alpha:tK,iInput:Do,iButton:fs,Icon:S},directives:{clickOutside:pi},mixins:[Ki,Sm,mi,oa],emits:["on-active-change","on-open-change","on-change","on-pick-success","on-pick-clear","update:modelValue"],provide(){return{ColorPickerInstance:this}},props:{modelValue:{type:String,default:void 0},hue:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},recommend:{type:Boolean,default:!1},format:{type:String,validator(l){return _(l,["hsl","hsv","hex","rgb"])},default:void 0},colors:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},hideDropDown:{type:Boolean,default:!1},placement:{type:String,validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},name:{type:String,default:void 0},editable:{type:Boolean,default:!0},capture:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return l.$VIEWUI?l.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{val:Cm(this.modelValue||""),currentValue:this.modelValue||"",dragging:!1,visible:!1,recommendedColor:["#2d8cf0","#19be6b","#ff9900","#ed4014","#00b5ff","#19c919","#f9e31c","#ea1a1a","#9b1dea","#00c2b1","#ac7a33","#1d35ea","#8bc34a","#f16b62","#ea4ca3","#0d94aa","#febd79","#5d4037","#00bcd4","#f06292","#cddc39","#607d8b","#000000","#ffffff"]}},computed:{arrowClasses(){return[`${this.inputPrefixCls}-icon`,`${this.inputPrefixCls}-icon-normal`]},transition(){return _(this.placement,["bottom-start","bottom","bottom-end"])?"slide-up":"fade"},saturationColors:{get(){return this.val},set(l){this.val=l,this.$emit("on-active-change",this.formatColor)}},classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-transfer`]:this.transfer}]},wrapClasses(){return[`${this.prefixCls}-rel`,`${this.prefixCls}-${this.size}`,`${this.inputPrefixCls}-wrapper`,`${this.inputPrefixCls}-wrapper-${this.size}`,{[`${this.prefixCls}-disabled`]:this.itemDisabled}]},inputClasses(){return[`${this.prefixCls}-input`,`${this.inputPrefixCls}`,`${this.inputPrefixCls}-${this.size}`,{[`${this.prefixCls}-focused`]:this.visible,[`${this.prefixCls}-disabled`]:this.itemDisabled}]},dropClasses(){return{[`${this.transferPrefixCls}-no-max-height`]:!0,[`${this.prefixCls}-transfer`]:this.transfer,[`${this.prefixCls}-hide-drop`]:this.hideDropDown,[this.transferClassName]:this.transferClassName}},displayedColorStyle(){return{backgroundColor:km(this.visible?this.saturationColors.rgba:Vt(this.modelValue).toRgb())}},formatColor(){const{format:l,saturationColors:u}=this;if(l){if(l==="hsl")return Vt(u.hsl).toHslString();if(l==="hsv")return Vt(u.hsv).toHsvString();if(l==="hex")return u.hex;if(l==="rgb")return km(u.rgba)}else if(this.alpha)return km(u.rgba);return u.hex},confirmColorClasses(){return[`${this.prefixCls}-confirm-color`,{[`${this.prefixCls}-confirm-color-editable`]:this.editable}]},arrowType(){const l=this.globalConfig;let u="ios-arrow-down";return l&&(l.colorPicker.customArrow?u="":l.colorPicker.arrow&&(u=l.colorPicker.arrow)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.colorPicker.customArrow&&(u=l.colorPicker.customArrow),u},arrowSize(){const l=this.globalConfig;let u="";return l&&l.colorPicker.arrowSize&&(u=l.colorPicker.arrowSize),u}},watch:{modelValue(l){this.val=Cm(l||"")},visible(l){this.val=Cm(this.modelValue||""),this.$refs.drop[l?"update":"destroy"](),this.$emit("on-open-change",!!l)}},methods:{setDragging(l){this.dragging=l},handleClose(l){if(this.visible){if(this.dragging||l.type==="mousedown"){this.$refs.editColorInput&&l.target!==this.$refs.editColorInput.$el.querySelector("input")&&l.preventDefault();return}if(this.transfer){const u=this.$refs.drop.$refs.drop;if(u===l.target||u.contains(l.target))return}this.closer(l);return}this.visible=!1},toggleVisible(){this.itemDisabled||(this.visible=!this.visible,this.$refs.input.focus())},childChange(l){this.colorChange(l)},colorChange(l,u){this.oldHue=this.saturationColors.hsl.h,this.saturationColors=Cm(l,u||this.oldHue)},closer(l){l&&(l.preventDefault(),l.stopPropagation()),this.visible=!1,this.$refs.input.focus()},handleButtons(l,u){this.currentValue=u,this.$emit("update:modelValue",u),this.$emit("on-change",u),this.handleFormItemChange("change",u),this.closer(l)},handleSuccess(l){this.handleButtons(l,this.formatColor),this.$emit("on-pick-success")},handleClear(l){this.handleButtons(l,""),this.$emit("on-pick-clear")},handleSelectColor(l){this.val=Cm(l),this.$emit("on-active-change",this.formatColor)},handleEditColor(l){const u=l.target.value;this.handleSelectColor(u)},handleFirstTab(l){l.shiftKey&&(l.preventDefault(),l.stopPropagation(),this.$refs.ok.$el.focus())},handleLastTab(l){l.shiftKey||(l.preventDefault(),l.stopPropagation(),this.$refs.saturation.$el.focus())},onTab(l){this.visible&&l.preventDefault()},onEscape(l){this.visible&&this.closer(l)},onArrow(l){this.visible||(l.preventDefault(),l.stopPropagation(),this.visible=!0)},handleOnEscapeKeydown(l){this.closer(l)},handleOnDragging(l){this.setDragging(l)}}},nK=["name","value"],rK=["tabindex"];function sK(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Saturation"),G=i.resolveComponent("Hue"),W=i.resolveComponent("Alpha"),j=i.resolveComponent("recommend-colors"),ce=i.resolveComponent("i-input"),Oe=i.resolveComponent("i-button"),xe=i.resolveComponent("Drop"),ye=i.resolveDirective("click-outside");return i.withDirectives((i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.createElementVNode("div",{ref:"reference",class:i.normalizeClass(v.wrapClasses),onClick:u[4]||(u[4]=(...oe)=>v.toggleVisible&&v.toggleVisible(...oe))},[i.createElementVNode("input",{name:m.name,value:C.currentValue,type:"hidden"},null,8,nK),i.createVNode(R,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:i.normalizeClass(v.arrowClasses)},null,8,["type","custom","size","class"]),i.createElementVNode("div",{ref:"input",tabindex:l.itemDisabled?void 0:0,class:i.normalizeClass(v.inputClasses),onKeydown:[u[0]||(u[0]=i.withKeys((...oe)=>v.onTab&&v.onTab(...oe),["tab"])),u[1]||(u[1]=i.withKeys((...oe)=>v.onEscape&&v.onEscape(...oe),["esc"])),u[2]||(u[2]=i.withKeys((...oe)=>v.onArrow&&v.onArrow(...oe),["up"])),u[3]||(u[3]=i.withKeys((...oe)=>v.onArrow&&v.onArrow(...oe),["down"]))]},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-color"])},[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-color-empty"])},[i.createElementVNode("i",{class:i.normalizeClass([l.iconPrefixCls,l.iconPrefixCls+"-ios-close"])},null,2)],2),[[i.vShow,m.modelValue===""&&!C.visible]]),i.withDirectives(i.createElementVNode("div",{style:i.normalizeStyle(v.displayedColorStyle)},null,4),[[i.vShow,m.modelValue||C.visible]])],2)],42,rK)],2),i.createVNode(xe,{ref:"drop",visible:C.visible,placement:m.placement,transfer:m.transfer,classes:v.dropClasses,eventsEnabled:m.eventsEnabled,"transition-name":"transition-drop"},{default:i.withCtx(()=>[i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[C.visible?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([l.prefixCls+"-picker"])},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-picker-wrapper"])},[i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-picker-panel"])},[i.createVNode(B,{ref:"saturation",value:v.saturationColors,focused:C.visible,onChange:v.childChange,onKeydown:i.withKeys(v.handleFirstTab,["tab"])},null,8,["value","focused","onChange","onKeydown"])],2),m.hue?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([l.prefixCls+"-picker-hue-slider"])},[i.createVNode(G,{value:v.saturationColors,onChange:v.childChange},null,8,["value","onChange"])],2)):i.createCommentVNode("",!0),m.alpha?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass([l.prefixCls+"-picker-alpha-slider"])},[i.createVNode(W,{value:v.saturationColors,onChange:v.childChange},null,8,["value","onChange"])],2)):i.createCommentVNode("",!0),m.colors.length?(i.openBlock(),i.createBlock(j,{key:2,list:m.colors,class:i.normalizeClass([l.prefixCls+"-picker-colors"]),onPickerColor:v.handleSelectColor},null,8,["list","class","onPickerColor"])):i.createCommentVNode("",!0),!m.colors.length&&m.recommend?(i.openBlock(),i.createBlock(j,{key:3,list:C.recommendedColor,class:i.normalizeClass([l.prefixCls+"-picker-colors"]),onPickerColor:v.handleSelectColor},null,8,["list","class","onPickerColor"])):i.createCommentVNode("",!0)],2),i.createElementVNode("div",{class:i.normalizeClass([l.prefixCls+"-confirm"])},[i.createElementVNode("span",{class:i.normalizeClass(v.confirmColorClasses)},[m.editable?(i.openBlock(),i.createBlock(ce,{key:0,ref:"editColorInput",modelValue:v.formatColor,size:"small",onOnEnter:v.handleEditColor,onOnBlur:v.handleEditColor},null,8,["modelValue","onOnEnter","onOnBlur"])):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createTextVNode(i.toDisplayString(v.formatColor),1)],64))],2),i.createVNode(Oe,{class:i.normalizeClass([l.prefixCls+"-confirm-btn-cancel"]),ref:"clear",tabindex:0,size:"small",onClick:v.handleClear,onKeydown:[i.withKeys(v.handleClear,["enter"]),i.withKeys(v.closer,["esc"])]},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(l.t("i.datepicker.clear")),1)]),_:1},8,["class","onClick","onKeydown"]),i.createVNode(Oe,{ref:"ok",tabindex:0,size:"small",type:"primary",onClick:v.handleSuccess,onKeydown:[i.withKeys(v.handleLastTab,["tab"]),i.withKeys(v.handleSuccess,["enter"]),i.withKeys(v.closer,["esc"])]},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(l.t("i.datepicker.ok")),1)]),_:1},8,["onClick","onKeydown"])],2)],2)):i.createCommentVNode("",!0)]),_:1})]),_:1},8,["visible","placement","transfer","classes","eventsEnabled"])],2)),[[ye,v.handleClose,m.capture]])}var C4=c(iK,[["render",sK]]);const oK="ivu-layout",aK={name:"Content",computed:{wrapClasses(){return`${oK}-content`}}};function lK(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[i.renderSlot(l.$slots,"default")],2)}var cS=c(aK,[["render",lK]]);function cK(l){var u;if(l.nodeName==="SELECT")l.focus(),u=l.value;else if(l.nodeName==="INPUT"||l.nodeName==="TEXTAREA"){var m=l.hasAttribute("readonly");m||l.setAttribute("readonly",""),l.select(),l.setSelectionRange(0,l.value.length),m||l.removeAttribute("readonly"),u=l.value}else{l.hasAttribute("contenteditable")&&l.focus();var k=window.getSelection(),C=document.createRange();C.selectNodeContents(l),k.removeAllRanges(),k.addRange(C),u=k.toString()}return u}var hK=cK,k4={name:"RenderCell",props:{render:Function},render(){return this.render(i.h)}};const uK={components:{RenderCell:k4},props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},withIcon:Boolean,render:{type:Function},hasTitle:Boolean,styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String},background:{type:Boolean,default:!1},msgType:{type:String}},data(){return{withDesc:!1}},computed:{baseClass(){return`${this.prefixCls}-notice`},renderFunc(){return this.render||function(){}},classes(){return[this.baseClass,{[`${this.className}`]:!!this.className,[`${this.baseClass}-closable`]:this.closable,[`${this.baseClass}-with-desc`]:this.withDesc,[`${this.baseClass}-with-background`]:this.background}]},contentClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]},messageContentClasses(){return[`${this.baseClass}-content`,{[`${this.baseClass}-content-${this.msgType}`]:this.msgType,[`${this.baseClass}-content-background`]:this.background}]},contentWithIcon(){return[this.withIcon?`${this.prefixCls}-content-with-icon`:"",!this.hasTitle&&this.withIcon?`${this.prefixCls}-content-with-render-notitle`:""]},messageClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]}},methods:{clearCloseTimer(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close(){this.clearCloseTimer(),this.onClose(),this.$parent.$parent.close(this.name)},handleEnter(l){this.type==="message"&&(l.style.height=l.scrollHeight+"px")},handleLeave(l){this.type==="message"&&s&&document.getElementsByClassName("ivu-message-notice").length!==1&&(l.style.height=0,l.style.paddingTop=0,l.style.paddingBottom=0)}},mounted(){if(this.handleEnter(this.$el),this.clearCloseTimer(),this.duration!==0&&(this.closeTimer=setTimeout(()=>{this.close()},this.duration*1e3)),this.prefixCls==="ivu-notice"){let l=this.$refs.content.querySelectorAll(`.${this.prefixCls}-desc`)[0];this.withDesc=this.render?!0:l?l.innerHTML!=="":!1}},beforeUnmount(){this.handleLeave(this.$el),this.clearCloseTimer()}},dK=["innerHTML"],fK=[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)],pK=["innerHTML"],mK=[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)];function gK(l,u,m,k,C,v){const R=i.resolveComponent("render-cell");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(m.styles)},[m.type==="notice"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createElementVNode("div",{class:i.normalizeClass(v.contentClasses),ref:"content",innerHTML:m.content},null,10,dK),i.createElementVNode("div",{class:i.normalizeClass(v.contentWithIcon)},[i.createVNode(R,{render:v.renderFunc},null,8,["render"])],2),m.closable?(i.openBlock(),i.createElementBlock("a",{key:0,class:i.normalizeClass([v.baseClass+"-close"]),onClick:u[0]||(u[0]=(...B)=>v.close&&v.close(...B))},fK,2)):i.createCommentVNode("",!0)],64)):i.createCommentVNode("",!0),m.type==="message"?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass(v.messageContentClasses),ref:"content"},[i.createElementVNode("div",{class:i.normalizeClass([v.baseClass+"-content-text"]),innerHTML:m.content},null,10,pK),i.createElementVNode("div",{class:i.normalizeClass([v.baseClass+"-content-text"])},[i.createVNode(R,{render:v.renderFunc},null,8,["render"])],2),m.closable?(i.openBlock(),i.createElementBlock("a",{key:0,class:i.normalizeClass([v.baseClass+"-close"]),onClick:u[1]||(u[1]=(...B)=>v.close&&v.close(...B))},mK,2)):i.createCommentVNode("",!0)],2)):i.createCommentVNode("",!0)],6)}var yK=c(uK,[["render",gK]]);const vK="ivu-notification";let bK=0;const xK=Date.now();function OK(){return"ivuNotification_"+xK+"_"+bK++}const wK={components:{Notice:yK},props:{prefixCls:{type:String,default:vK},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String},transitionName:{type:String}},data(){return{notices:[],tIndex:this.handleGetIndex()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.className}`]:!!this.className}]},wrapStyles(){let l=Object.assign({},this.styles);return l["z-index"]=1010+this.tIndex,l}},methods:{add(l){const u=l.name||OK();let m=Object.assign({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:u},l);this.notices.push(m),this.tIndex=this.handleGetIndex()},close(l){const u=this.notices;for(let m=0;m<u.length;m++)if(u[m].name===l){this.notices.splice(m,1);break}},closeAll(){this.notices=[]},handleGetIndex(){return Qe(),we}}};function _K(l,u,m,k,C,v){const R=i.resolveComponent("Notice");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.wrapStyles)},[i.createVNode(i.TransitionGroup,{name:m.transitionName,appear:""},{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.notices,B=>(i.openBlock(),i.createBlock(R,{key:B.name,"prefix-cls":m.prefixCls,styles:B.styles,type:B.type,content:B.content,duration:B.duration,render:B.render,"has-title":B.hasTitle,withIcon:B.withIcon,closable:B.closable,name:B.name,"transition-name":B.transitionName,background:B.background,"msg-type":B.msgType,"on-close":B.onClose},null,8,["prefix-cls","styles","type","content","duration","render","has-title","withIcon","closable","name","transition-name","background","msg-type","on-close"]))),128))]),_:1},8,["name"])],6)}var Hv=c(wK,[["render",_K]]);Hv.newInstance=l=>{if(!s)return;const u=l||{};let m=null;const k=i.createApp({render(){return i.h(Hv,Object.assign({ref:"notification"},u))},created(){m=i.getCurrentInstance()}}),C=document.createElement("div");document.body.appendChild(C),k.mount(C);const v=m.refs.notification;return{notice(R){v.add(R)},remove(R){v.close(R)},component:v,destroy(R){v.closeAll(),s&&setTimeout(function(){document.body.removeChild(document.getElementsByClassName(R)[0])},500)}}};const hS="ivu-message",T4="ivu-icon",M4="ivu_message_key_",Fd={top:24,duration:1.5,background:!1};let Gv,E4=1;const SK={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle",loading:"ios-loading"},P4="move-up";function A4(){return Gv=Gv||Hv.newInstance({prefixCls:hS,styles:{top:`${Fd.top}px`},transitionName:P4}),Gv}function CK(l="",u=Fd.duration,m,k=function(){},C=!1,v=function(){},R=Fd.background){const B=SK[m],G=m==="loading"?" ivu-load-loop":"";let W=A4();return W.notice({name:`${M4}${E4}`,duration:u,styles:{},transitionName:P4,content:`
            <div class="${hS}-custom-content ${hS}-${m}">
                <i class="${T4} ${T4}-${B} ${G}"></i>
                <span>${l}</span>
            </div>
        `,render:v,onClose:k,closable:C,type:"message",msgType:m,background:R}),function(){let j=E4++;return function(){W.remove(`${M4}${j}`)}}()}var Mm={name:"Message",info(l){return this.message("info",l)},success(l){return this.message("success",l)},warning(l){return this.message("warning",l)},error(l){return this.message("error",l)},loading(l){return this.message("loading",l)},message(l,u){return typeof u=="string"&&(u={content:u}),CK(u.content,u.duration,l,u.onClose,u.closable,u.render,u.background)},config(l){(l.top||l.top===0)&&(Fd.top=l.top),(l.duration||l.duration===0)&&(Fd.duration=l.duration),l.background&&(Fd.background=l.background)},destroy(){let l=A4();Gv=null,l.destroy("ivu-message")}};const kK="复制成功",TK="复制失败";function Yv({text:l="",successTip:u=kK,errorTip:m=TK,success:k,error:C,showTip:v=!0}){if(!s)return;const R=document.documentElement.getAttribute("dir")==="rtl",B=document.createElement("textarea");B.style.fontSize="12pt",B.style.border="0",B.style.padding="0",B.style.margin="0",B.style.position="absolute",B.style[R?"right":"left"]="-9999px";let G=window.pageYOffset||document.documentElement.scrollTop;B.style.top=`${G}px`,B.setAttribute("readonly",""),B.value=l,document.body.appendChild(B),hK(B);let W;try{W=document.execCommand("copy"),v&&Mm.success({content:u}),document.body.removeChild(B),k&&k.call()}catch{W=!1,v&&Mm.error({content:m}),document.body.removeChild(B),C&&C.call()}}function uS(l){return l*1<10?`0${l}`:l}const MK={name:"CountDown",emits:["on-end"],props:{format:{type:Function},target:{type:[Date,Number]},interval:{type:Number,default:1e3}},data(){return{lastTime:""}},methods:{initTime(){let l=0,u=0;try{Object.prototype.toString.call(this.target)==="[object Date]"?u=this.target.getTime():u=new Date(this.target).getTime()}catch(m){throw new Error("invalid target prop",m)}return l=u-new Date().getTime(),l<0?0:l},tick(){let{lastTime:l}=this;this.timer=setTimeout(()=>{l<this.interval?(clearTimeout(this.timer),this.lastTime=0,this.$emit("on-end")):(l-=this.interval,this.lastTime=l,this.tick())},this.interval)},defaultFormat(l){const u=Math.floor(l/36e5),m=Math.floor((l-u*36e5)/6e4),k=Math.floor((l-u*36e5-m*6e4)/1e3);return`${uS(u)}:${uS(m)}:${uS(k)}`}},computed:{result(){const{format:l=this.defaultFormat}=this;return l(this.lastTime)}},watch:{target(){this.timer&&clearTimeout(this.timer),this.lastTime=this.initTime(),this.tick()}},created(){this.lastTime=this.initTime()},mounted(){this.tick()},beforeUnmount(){this.timer&&clearTimeout(this.timer)}};function EK(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("span",null,i.toDisplayString(v.result),1)}var R4=c(MK,[["render",EK]]),dS={exports:{}};(function(l,u){(function(m,k){l.exports=k(Y,u,l)})(ee,function(m,k,C){var v=function(R,B,G,W,j,ce){function Oe(Ge){var Ne,Je,je,Qt,Ht,Pt,_t=Ge<0;if(Ge=Math.abs(Ge).toFixed(oe.decimals),Ge+="",Ne=Ge.split("."),Je=Ne[0],je=Ne.length>1?oe.options.decimal+Ne[1]:"",oe.options.useGrouping){for(Qt="",Ht=0,Pt=Je.length;Ht<Pt;++Ht)Ht!==0&&Ht%3===0&&(Qt=oe.options.separator+Qt),Qt=Je[Pt-Ht-1]+Qt;Je=Qt}return oe.options.numerals.length&&(Je=Je.replace(/[0-9]/g,function(Dt){return oe.options.numerals[+Dt]}),je=je.replace(/[0-9]/g,function(Dt){return oe.options.numerals[+Dt]})),(_t?"-":"")+oe.options.prefix+Je+je+oe.options.suffix}function xe(Ge,Ne,Je,je){return Je*(-Math.pow(2,-10*Ge/je)+1)*1024/1023+Ne}function ye(Ge){return typeof Ge=="number"&&!isNaN(Ge)}var oe=this;if(oe.version=function(){return"1.9.3"},oe.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:xe,formattingFn:Oe,prefix:"",suffix:"",numerals:[]},ce&&typeof ce=="object")for(var Re in oe.options)ce.hasOwnProperty(Re)&&ce[Re]!==null&&(oe.options[Re]=ce[Re]);oe.options.separator===""?oe.options.useGrouping=!1:oe.options.separator=""+oe.options.separator;for(var Lt=0,yt=["webkit","moz","ms","o"],wt=0;wt<yt.length&&!window.requestAnimationFrame;++wt)window.requestAnimationFrame=window[yt[wt]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[yt[wt]+"CancelAnimationFrame"]||window[yt[wt]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(Ge,Ne){var Je=new Date().getTime(),je=Math.max(0,16-(Je-Lt)),Qt=window.setTimeout(function(){Ge(Je+je)},je);return Lt=Je+je,Qt}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(Ge){clearTimeout(Ge)}),oe.initialize=function(){return!!oe.initialized||(oe.error="",oe.d=typeof R=="string"?document.getElementById(R):R,oe.d?(oe.startVal=Number(B),oe.endVal=Number(G),ye(oe.startVal)&&ye(oe.endVal)?(oe.decimals=Math.max(0,W||0),oe.dec=Math.pow(10,oe.decimals),oe.duration=1e3*Number(j)||2e3,oe.countDown=oe.startVal>oe.endVal,oe.frameVal=oe.startVal,oe.initialized=!0,!0):(oe.error="[CountUp] startVal ("+B+") or endVal ("+G+") is not a number",!1)):(oe.error="[CountUp] target is null or undefined",!1))},oe.printValue=function(Ge){var Ne=oe.options.formattingFn(Ge);oe.d.tagName==="INPUT"?this.d.value=Ne:oe.d.tagName==="text"||oe.d.tagName==="tspan"?this.d.textContent=Ne:this.d.innerHTML=Ne},oe.count=function(Ge){oe.startTime||(oe.startTime=Ge),oe.timestamp=Ge;var Ne=Ge-oe.startTime;oe.remaining=oe.duration-Ne,oe.options.useEasing?oe.countDown?oe.frameVal=oe.startVal-oe.options.easingFn(Ne,0,oe.startVal-oe.endVal,oe.duration):oe.frameVal=oe.options.easingFn(Ne,oe.startVal,oe.endVal-oe.startVal,oe.duration):oe.countDown?oe.frameVal=oe.startVal-(oe.startVal-oe.endVal)*(Ne/oe.duration):oe.frameVal=oe.startVal+(oe.endVal-oe.startVal)*(Ne/oe.duration),oe.countDown?oe.frameVal=oe.frameVal<oe.endVal?oe.endVal:oe.frameVal:oe.frameVal=oe.frameVal>oe.endVal?oe.endVal:oe.frameVal,oe.frameVal=Math.round(oe.frameVal*oe.dec)/oe.dec,oe.printValue(oe.frameVal),Ne<oe.duration?oe.rAF=requestAnimationFrame(oe.count):oe.callback&&oe.callback()},oe.start=function(Ge){oe.initialize()&&(oe.callback=Ge,oe.rAF=requestAnimationFrame(oe.count))},oe.pauseResume=function(){oe.paused?(oe.paused=!1,delete oe.startTime,oe.duration=oe.remaining,oe.startVal=oe.frameVal,requestAnimationFrame(oe.count)):(oe.paused=!0,cancelAnimationFrame(oe.rAF))},oe.reset=function(){oe.paused=!1,delete oe.startTime,oe.initialized=!1,oe.initialize()&&(cancelAnimationFrame(oe.rAF),oe.printValue(oe.startVal))},oe.update=function(Ge){if(oe.initialize()){if(Ge=Number(Ge),!ye(Ge))return void(oe.error="[CountUp] update() - new endVal is not a number: "+Ge);oe.error="",Ge!==oe.frameVal&&(cancelAnimationFrame(oe.rAF),oe.paused=!1,delete oe.startTime,oe.startVal=oe.frameVal,oe.endVal=Ge,oe.countDown=oe.startVal>oe.endVal,oe.rAF=requestAnimationFrame(oe.count))}},oe.initialize()&&oe.printValue(oe.startVal)};return v})})(dS,dS.exports);var PK=dS.exports;const AK={name:"CountUp",props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1,default(){return{}}},callback:{type:Function,required:!1,default:()=>{}}},data(){return{CountUp:null}},watch:{end(l){this.CountUp&&this.CountUp.update&&this.CountUp.update(l)}},mounted(){this.init()},methods:{init(){this.CountUp||(this.CountUp=new PK(this.$el,this.start,this.end,this.decimals,this.duration,this.options),this.CountUp.start(()=>{this.callback(this.CountUp)}))},destroy(){this.CountUp=null}},beforeUnmounted(){this.destroy()},start(l){this.CountUp&&this.CountUp.start&&this.CountUp.start(()=>{l&&l(this.CountUp)})},pauseResume(){this.CountUp&&this.CountUp.pauseResume&&this.CountUp.pauseResume()},reset(){this.CountUp&&this.CountUp.reset&&this.CountUp.reset()},update(l){this.CountUp&&this.CountUp.update&&this.CountUp.update(l)}},RK={class:"ivu-count-up"};function IK(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("span",RK)}var I4=c(AK,[["render",IK]]),ha={},D4=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,su=/\d\d?/,DK=/\d{3}/,NK=/\d{4}/,jv=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,N4=function(){};function $4(l,u){for(var m=[],k=0,C=l.length;k<C;k++)m.push(l[k].substr(0,u));return m}function V4(l){return function(u,m,k){var C=k[l].indexOf(m.charAt(0).toUpperCase()+m.substr(1).toLowerCase());~C&&(u.month=C)}}function Ua(l,u){for(l=String(l),u=u||2;l.length<u;)l="0"+l;return l}var L4=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],B4=["January","February","March","April","May","June","July","August","September","October","November","December"],$K=$4(B4,3),VK=$4(L4,3);ha.i18n={dayNamesShort:VK,dayNames:L4,monthNamesShort:$K,monthNames:B4,amPm:["am","pm"],DoFn:function(l){return l+["th","st","nd","rd"][l%10>3?0:(l-l%10!==10)*l%10]}};var U4={D:function(l){return l.getDay()},DD:function(l){return Ua(l.getDay())},Do:function(l,u){return u.DoFn(l.getDate())},d:function(l){return l.getDate()},dd:function(l){return Ua(l.getDate())},ddd:function(l,u){return u.dayNamesShort[l.getDay()]},dddd:function(l,u){return u.dayNames[l.getDay()]},M:function(l){return l.getMonth()+1},MM:function(l){return Ua(l.getMonth()+1)},MMM:function(l,u){return u.monthNamesShort[l.getMonth()]},MMMM:function(l,u){return u.monthNames[l.getMonth()]},yy:function(l){return String(l.getFullYear()).substr(2)},yyyy:function(l){return l.getFullYear()},h:function(l){return l.getHours()%12||12},hh:function(l){return Ua(l.getHours()%12||12)},H:function(l){return l.getHours()},HH:function(l){return Ua(l.getHours())},m:function(l){return l.getMinutes()},mm:function(l){return Ua(l.getMinutes())},s:function(l){return l.getSeconds()},ss:function(l){return Ua(l.getSeconds())},S:function(l){return Math.round(l.getMilliseconds()/100)},SS:function(l){return Ua(Math.round(l.getMilliseconds()/10),2)},SSS:function(l){return Ua(l.getMilliseconds(),3)},a:function(l,u){return l.getHours()<12?u.amPm[0]:u.amPm[1]},A:function(l,u){return l.getHours()<12?u.amPm[0].toUpperCase():u.amPm[1].toUpperCase()},ZZ:function(l){var u=l.getTimezoneOffset();return(u>0?"-":"+")+Ua(Math.floor(Math.abs(u)/60)*100+Math.abs(u)%60,4)}},Bn={d:[su,function(l,u){l.day=u}],M:[su,function(l,u){l.month=u-1}],yy:[su,function(l,u){var m=new Date,k=+(""+m.getFullYear()).substr(0,2);l.year=""+(u>68?k-1:k)+u}],h:[su,function(l,u){l.hour=u}],m:[su,function(l,u){l.minute=u}],s:[su,function(l,u){l.second=u}],yyyy:[NK,function(l,u){l.year=u}],S:[/\d/,function(l,u){l.millisecond=u*100}],SS:[/\d{2}/,function(l,u){l.millisecond=u*10}],SSS:[DK,function(l,u){l.millisecond=u}],D:[su,N4],ddd:[jv,N4],MMM:[jv,V4("monthNamesShort")],MMMM:[jv,V4("monthNames")],a:[jv,function(l,u,m){var k=u.toLowerCase();k===m.amPm[0]?l.isPm=!1:k===m.amPm[1]&&(l.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(l,u){var m=(u+"").match(/([\+\-]|\d\d)/gi),k;m&&(k=+(m[1]*60)+parseInt(m[2],10),l.timezoneOffset=m[0]==="+"?k:-k)}]};Bn.DD=Bn.DD,Bn.dddd=Bn.ddd,Bn.Do=Bn.dd=Bn.d,Bn.mm=Bn.m,Bn.hh=Bn.H=Bn.HH=Bn.h,Bn.MM=Bn.M,Bn.ss=Bn.s,Bn.A=Bn.a,ha.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ha.format=function(l,u,m){var k=m||ha.i18n;if(typeof l=="number"&&(l=new Date(l)),Object.prototype.toString.call(l)!=="[object Date]"||isNaN(l.getTime()))throw new Error("Invalid Date in fecha.format");return u=ha.masks[u]||u||ha.masks.default,u.replace(D4,function(C){return C in U4?U4[C](l,k):C.slice(1,C.length-1)})},ha.parse=function(l,u,m){var k=m||ha.i18n;if(typeof u!="string")throw new Error("Invalid format in fecha.parse");if(u=ha.masks[u]||u,l.length>1e3)return!1;var C=!0,v={};if(u.replace(D4,function(G){if(Bn[G]){var W=Bn[G],j=l.search(W[0]);~j?l.replace(W[0],function(ce){return W[1](v,ce,k),l=l.substr(j+ce.length),ce}):C=!1}return Bn[G]?"":G.slice(1,G.length-1)}),!C)return!1;var R=new Date;v.isPm===!0&&v.hour!=null&&+v.hour!=12?v.hour=+v.hour+12:v.isPm===!1&&+v.hour==12&&(v.hour=0);var B;return v.timezoneOffset!=null?(v.minute=+(v.minute||0)-+v.timezoneOffset,B=new Date(Date.UTC(v.year||R.getFullYear(),v.month||0,v.day||1,v.hour||0,v.minute||0,v.second||0,v.millisecond||0))):B=new Date(v.year||R.getFullYear(),v.month||0,v.day||1,v.hour||0,v.minute||0,v.second||0,v.millisecond||0),B};const fS=function(l){let u=new Date(l);return isNaN(u.getTime())&&typeof l=="string"&&(u=l.split("-").map(Number),u[1]+=1,u=new Date(...u)),isNaN(u.getTime())?null:u},ps=function(l){const u=new Date(l);return u.setHours(0,0,0,0),u.getTime()},LK=(l,u,m)=>{if(!u||!m)return!1;const[k,C]=[u,m].sort();return l>=k&&l<=C},Em=function(l,u){return l=fS(l),l?ha.format(l,u||"yyyy-MM-dd"):""},qv=function(l,u){return ha.parse(l,u||"yyyy-MM-dd")},F4=function(l,u){return new Date(l,u+1,0).getDate()},z4=function(l,u){const m=new Date(l),k=m.getMonth()+u,C=F4(m.getFullYear(),k);return C<m.getDate()&&m.setDate(C),m.setMonth(k),m},Fa=function(){const l=new Date;return l.setHours(0),l.setMinutes(0),l.setSeconds(0),l},pS=function(){const l={yyyy:m=>m.getFullYear(),m:m=>m.getMonth()+1,mm:m=>("0"+(m.getMonth()+1)).slice(-2),mmm:(m,k)=>m.toLocaleDateString(k,{month:"long"}).slice(0,3),Mmm:(m,k)=>{const C=m.toLocaleDateString(k,{month:"long"});return(C[0].toUpperCase()+C.slice(1).toLowerCase()).slice(0,3)},mmmm:(m,k)=>m.toLocaleDateString(k,{month:"long"}),Mmmm:(m,k)=>{const C=m.toLocaleDateString(k,{month:"long"});return C[0].toUpperCase()+C.slice(1).toLowerCase()}},u=new RegExp(["yyyy","Mmmm","mmmm","Mmm","mmm","mm","m"].join("|"),"g");return function(m,k,C){const v=/(\[[^\]]+\])([^\[\]]+)(\[[^\]]+\])/,R=k.match(v).slice(1),B=R[1],G=[R[0],R[2]].map(W=>({label:W.replace(/\[[^\]]+\]/,j=>j.slice(1,-1).replace(u,ce=>l[ce](C,m))),type:W.indexOf("yy")!=-1?"year":"month"}));return{separator:B,labels:G}}}(),X4={date:"yyyy-MM-dd",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss"},Pm=function(l,u){return Em(l,u)},Am=function(l,u){return qv(l,u)},mS=function(l,u,m){if(Array.isArray(l)&&l.length===2){const k=l[0],C=l[1];if(k&&C)return Em(k,u)+m+Em(C,u)}else if(!Array.isArray(l)&&l instanceof Date)return Em(l,u);return""},gS=function(l,u,m){const k=Array.isArray(l)?l:l.split(m);if(k.length===2){const C=k[0],v=k[1];return[C instanceof Date?C:qv(C,u),v instanceof Date?v:qv(v,u)]}return[]},zd={default:{formatter(l){return l?""+l:""},parser(l){return l===void 0||l===""?null:l}},date:{formatter:Pm,parser:Am},datetime:{formatter:Pm,parser:Am},daterange:{formatter:mS,parser:gS},datetimerange:{formatter:mS,parser:gS},timerange:{formatter:mS,parser:gS},time:{formatter:Pm,parser:Am},month:{formatter:Pm,parser:Am},year:{formatter:Pm,parser:Am},multiple:{formatter:(l,u)=>l.filter(Boolean).map(m=>Em(m,u)).join(","),parser:(l,u)=>(typeof l=="string"?l.split(","):l).map(m=>m instanceof Date?m:(typeof m=="string"?m=m.trim():typeof m!="number"&&!m&&(m=""),qv(m,u)))},number:{formatter(l){return l?""+l:""},parser(l){let u=Number(l);return isNaN(l)?null:u}}},Zv="ivu-date-picker",BK="ivu-picker",UK=l=>l.reduce((u,m)=>u&&!m||typeof m=="string"&&m.trim()==="",!0),FK={40:"up",39:"right",38:"down",37:"left"},Xd=(l,u,m)=>{if(l==="left")return u*-1;if(l==="right")return u*1;if(l==="up")return m*1;if(l==="down")return m*-1},zK=l=>{const u="ivu-date-picker-btn-pulse";l.classList.add(u),setTimeout(()=>l.classList.remove(u),200)},yS=l=>l?[l.getHours(),l.getMinutes(),l.getSeconds()]:[0,0,0],XK={mixins:[mi,oa],components:{iInput:Do,Drop:Ye,Icon:S},directives:{clickOutside:pi},emits:["on-clickoutside","on-clear","on-change","on-ok","on-open-change","update:modelValue"],provide(){return{PickerInstance:this}},props:{format:{type:String},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1},open:{type:Boolean,default:null},multiple:{type:Boolean,default:!1},timePickerOptions:{type:Object,default:()=>({})},splitPanels:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},placeholder:{type:String,default:""},placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},steps:{type:Array,default:()=>[]},modelValue:{type:[Date,String,Array]},options:{type:Object,default:()=>({})},separator:{type:String,default:" - "},capture:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return l.$VIEWUI?l.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){const l=this.type.includes("range"),u=l?[null,null]:[null],m=UK((l?this.modelValue:[this.modelValue])||[])?u:this.parseDate(this.modelValue),k=m.map(yS);return{prefixCls:Zv,showClose:!1,visible:!1,internalValue:m,disableClickOutSide:!1,disableCloseUnderTransfer:!1,selectionMode:this.onSelectionModeChange(this.type),forceInputRerender:1,isFocused:!1,focusedDate:m[0]||this.startDate||new Date,focusedTime:{column:0,picker:0,time:k,active:!1},internalFocus:!1,isValueNull:!1,timeSpinnerList:[],panelTableList:[]}},computed:{wrapperClasses(){return[Zv,{[Zv+"-focused"]:this.isFocused}]},publicVModelValue(){if(this.multiple)return this.internalValue.slice();{const l=this.type.includes("range");let u=this.internalValue.map(m=>m instanceof Date?new Date(m):m||"");return this.type.match(/^time/)&&(u=u.map(this.formatDate)),l||this.multiple?u:u[0]}},publicStringValue(){const{formatDate:l,publicVModelValue:u,type:m}=this;return m.match(/^time/)?u:this.multiple?l(u):Array.isArray(u)?u.map(l):l(u)},opened(){return this.open===null?this.visible:this.open},transition(){return this.placement.match(/^bottom/)?"slide-up":"slide-down"},visualValue(){return this.formatDate(this.internalValue)},isConfirm(){return this.confirm||this.type==="datetime"||this.type==="datetimerange"||this.multiple},arrowType(){const l=this.globalConfig;let u="";if(this.type==="time"||this.type==="timerange")u="ios-time-outline",l&&(l.timePicker.customIcon?u="":l.timePicker.icon&&(u=l.timePicker.icon));else{const m=this.globalConfig;u="ios-calendar-outline",m&&(m.datePicker.customIcon?u="":m.datePicker.icon&&(u=m.datePicker.icon))}return this.showClose&&(u="ios-close-circle"),u},customArrowType(){const l=this.globalConfig;let u="";return this.showClose||(this.type==="time"||this.type==="timerange"?l&&l.timePicker.customIcon&&(u=l.timePicker.customIcon):l&&l.datePicker.customIcon&&(u=l.datePicker.customIcon)),u},arrowSize(){const l=this.globalConfig;let u="";return this.showClose||(this.type==="time"||this.type==="timerange"?l&&l.timePicker.iconSize&&(u=l.timePicker.iconSize):l&&l.datePicker.iconSize&&(u=l.datePicker.iconSize)),u},dropdownCls(){return{[Zv+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{onSelectionModeChange(l){return l.match(/^date/)&&(l="date"),this.selectionMode=_(l,["year","month","date","time"])&&l,this.selectionMode},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(l){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(l&&l.type==="mousedown"&&this.visible){l.preventDefault(),l.stopPropagation();return}if(this.visible){const u=this.$refs.pickerPanel&&this.$refs.pickerPanel.$el;if(l&&u&&u.contains(l.target))return;this.visible=!1,l&&l.preventDefault(),l&&l.stopPropagation(),this.$emit("on-clickoutside",l);return}this.isFocused=!1,this.disableClickOutSide=!1},handleFocus(l){this.readonly||(this.isFocused=!0,!(l&&l.type==="focus")&&(this.itemDisabled||(this.visible=!0)))},handleBlur(l){if(this.internalFocus){this.internalFocus=!1;return}if(this.visible){l.preventDefault();return}this.isFocused=!1,this.onSelectionModeChange(this.type),this.internalValue=this.internalValue.slice(),this.reset(),this.$refs.pickerPanel.onToggleVisibility(!1)},handleKeydown(l){const u=l.keyCode;if(u===9)if(this.visible)if(l.stopPropagation(),l.preventDefault(),this.isConfirm){const k=`.${BK}-confirm > *`,C=this.$refs.drop.$el.querySelectorAll(k);this.internalFocus=!0,[...C][l.shiftKey?"pop":"shift"]().focus()}else this.handleClose();else this.focused=!1;const m=[37,38,39,40];if(!this.visible&&m.includes(u)){this.visible=!0;return}if(u===27&&this.visible&&(l.stopPropagation(),this.handleClose()),u===13){const k=this.timeSpinnerList.map(C=>C.timeSpinner);if(k.length>0){const C=k[0].showSeconds?3:2,v=Math.floor(this.focusedTime.column/C),R=this.focusedTime.time[v];k[v].chooseValue(R);return}if(this.type.match(/range/))this.$refs.pickerPanel.handleRangePick(this.focusedDate,"date");else{const C=this.panelTableList.map(R=>R.panelTable),v=R=>{const B=["year","month","date"].indexOf(this.type)+1;return[R.getFullYear(),R.getMonth(),R.getDate()].slice(0,B).join("-")};C.find(({cells:R})=>R.find(({date:B,disabled:G})=>v(B)===v(this.focusedDate)&&!G))&&this.onPick(this.focusedDate,!1,"date")}}!m.includes(u)||(this.focusedTime.active&&l.preventDefault(),this.navigateDatePanel(FK[u],l.shiftKey))},reset(){this.$refs.pickerPanel.reset&&this.$refs.pickerPanel.reset()},navigateTimePanel(l){this.focusedTime.active=!0;const u=l.match(/left|right/),m=l.match(/up|down/),k=this.timeSpinnerList.map(W=>W.timeSpinner),C=(k[0].showSeconds?3:2)*k.length,v=(W=>(W+(u?l==="left"?-1:1:0)+C)%C)(this.focusedTime.column),R=C/k.length,B=Math.floor(v/R),G=v%R;if(u){const W=this.internalValue.map(yS);this.focusedTime={...this.focusedTime,column:v,time:W},k.forEach((j,ce)=>{ce===B?j.updateFocusedTime(G,W[B]):j.updateFocusedTime(-1,j.focusedTime)})}if(m){const W=l==="up"?1:-1,j=["hours","minutes","seconds"],ce=k[B][`${j[G]}List`],Oe=(ce.findIndex(({text:oe})=>this.focusedTime.time[B][G]===oe)+W+ce.length)%ce.length,xe=ce[Oe].text,ye=this.focusedTime.time.map((oe,Re)=>(Re!==B||(oe[G]=xe),oe));this.focusedTime={...this.focusedTime,time:ye},k.forEach((oe,Re)=>{Re===B?oe.updateFocusedTime(G,ye[Re]):oe.updateFocusedTime(-1,oe.focusedTime)})}},navigateDatePanel(l,u){const m=this.timeSpinnerList.map(v=>v.timeSpinner);if(m.length>0){this.navigateTimePanel(l,u,m);return}if(u){this.type==="year"?this.focusedDate=new Date(this.focusedDate.getFullYear()+Xd(l,0,10),this.focusedDate.getMonth(),this.focusedDate.getDate()):this.focusedDate=new Date(this.focusedDate.getFullYear()+Xd(l,0,1),this.focusedDate.getMonth()+Xd(l,1,0),this.focusedDate.getDate());const v=l.match(/left|down/)?"prev":"next",R=l.match(/up|down/)?"-double":"",B=this.$refs.drop.$el.querySelector(`.ivu-date-picker-${v}-btn-arrow${R}`);B&&zK(B);return}const k=this.focusedDate||this.internalValue&&this.internalValue[0]||new Date,C=new Date(k);if(this.type.match(/^date/)){const v=F4(k.getFullYear(),k.getMonth()),R=k.getDate(),B=C.getDate()+Xd(l,1,7);B<1?l.match(/left|right/)?(C.setMonth(C.getMonth()+1),C.setDate(B)):C.setDate(R+Math.floor((v-R)/7)*7):B>v?l.match(/left|right/)?(C.setMonth(C.getMonth()-1),C.setDate(B)):C.setDate(R%7):C.setDate(B)}this.type.match(/^month/)&&C.setMonth(C.getMonth()+Xd(l,1,3)),this.type.match(/^year/)&&C.setFullYear(C.getFullYear()+Xd(l,1,3)),this.focusedDate=C},handleInputChange(l){const u=this.type.includes("range")||this.multiple,m=this.visualValue,k=l.target.value,C=this.parseDate(k),v=this.options&&typeof this.options.disabledDate=="function"&&this.options.disabledDate,R=u?C:C[0],B=v&&v(R),G=C.reduce((W,j)=>W&&j instanceof Date,!0);k!==m&&!B&&G?(this.emitChange(this.type),this.internalValue=C):this.forceInputRerender++},handleInputMouseenter(){this.readonly||this.itemDisabled||this.visualValue&&this.clearable&&(this.showClose=!0)},handleInputMouseleave(){this.showClose=!1},handleIconClick(l){this.showClose?(l&&l.stopPropagation(),this.handleClear()):this.itemDisabled||this.handleFocus()},handleClear(){this.visible=!1,this.internalValue=this.internalValue.map(()=>null),this.$emit("on-clear"),this.handleFormItemChange("change",""),this.emitChange(this.type),this.reset(),setTimeout(()=>this.onSelectionModeChange(this.type),500)},emitChange(l){i.nextTick(()=>{this.$emit("on-change",this.publicStringValue,l),this.handleFormItemChange("change",this.publicStringValue)})},parseDate(l){const u=this.type.includes("range"),m=this.type,k=(zd[m]||zd.default).parser,C=this.format||X4[m],v=zd.multiple.parser;if(l&&m==="time"&&!(l instanceof Date))l=k(l,C,this.separator);else if(this.multiple&&l)l=v(l,C,this.separator);else if(u)if(!l)l=[null,null];else if(typeof l=="string")l=k(l,C,this.separator);else if(m==="timerange")l=k(l,C,this.separator).map(R=>R||"");else{const[R,B]=l;R instanceof Date&&B instanceof Date?l=l.map(G=>new Date(G)):typeof R=="string"&&typeof B=="string"?l=k(l.join(this.separator),C,this.separator):(!R||!B)&&(l=[null,null])}else typeof l=="string"&&m.indexOf("time")!==0&&(l=k(l,C)||null);return u||this.multiple?l||[]:[l]},formatDate(l){const u=X4[this.type];if(this.multiple){const m=zd.multiple.formatter;return m(l,this.format||u,this.separator)}else{const{formatter:m}=zd[this.type]||zd.default;return m(l,this.format||u,this.separator)}},onPick(l,u=!1,m){if(this.multiple){const k=l.getTime(),C=this.internalValue.findIndex(R=>R&&R.getTime()===k),v=[...this.internalValue,l].filter(Boolean).map(R=>R.getTime()).filter((R,B,G)=>G.indexOf(R)===B&&B!==C);this.internalValue=v.map(R=>new Date(R))}else l=this.parseDate(l),this.internalValue=Array.isArray(l)?l:[l];this.internalValue[0]&&(this.focusedDate=this.internalValue[0]),this.focusedTime={...this.focusedTime,time:this.internalValue.map(yS)},this.isConfirm||this.onSelectionModeChange(this.type),this.isConfirm||(this.visible=!!u),this.emitChange(m)},onPickSuccess(){this.visible=!1,this.$emit("on-ok"),this.focus(),this.reset()},focus(){this.$refs.input&&this.$refs.input.focus()},updatePopper(){this.$refs.drop.update()},handleOnFocusInput(){this.focus()},handleOnUpdatePopper(){this.updatePopper()}},watch:{visible(l){l===!1&&this.$refs.drop.destroy(),l&&this.$refs.drop.update(),this.$emit("on-open-change",l)},modelValue(l){l===null&&(this.isValueNull=!0),this.internalValue=this.parseDate(l)},open(l){this.visible=l===!0},type(l){this.onSelectionModeChange(l)},publicVModelValue(l,u){const m=JSON.stringify(l),k=JSON.stringify(u);(m!==k||typeof l!=typeof u)&&(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",l))}},mounted(){this.open!==null&&(this.visible=this.open)}};function WK(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("i-input"),G=i.resolveComponent("Drop"),W=i.resolveDirective("click-outside");return i.withDirectives((i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapperClasses)},[i.createElementVNode("div",{ref:"reference",class:i.normalizeClass([C.prefixCls+"-rel"])},[i.renderSlot(l.$slots,"default",{},()=>[(i.openBlock(),i.createBlock(B,{key:C.forceInputRerender,"element-id":m.elementId,class:i.normalizeClass([C.prefixCls+"-editor"]),readonly:!m.editable||m.readonly,disabled:l.itemDisabled,size:m.size,placeholder:m.placeholder,"model-value":v.visualValue,name:m.name,ref:"input",onOnInputChange:v.handleInputChange,onOnFocus:v.handleFocus,onOnBlur:v.handleBlur,onClick:v.handleFocus,onKeydown:v.handleKeydown,onMouseenter:v.handleInputMouseenter,onMouseleave:v.handleInputMouseleave},{suffix:i.withCtx(()=>[i.createVNode(R,{onClick:v.handleIconClick,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["onClick","type","custom","size"])]),_:1},8,["element-id","class","readonly","disabled","size","placeholder","model-value","name","onOnInputChange","onOnFocus","onOnBlur","onClick","onKeydown","onMouseenter","onMouseleave"]))])],2),i.createVNode(G,{ref:"drop",visible:v.opened,classes:v.dropdownCls,placement:m.placement,eventsEnabled:m.eventsEnabled,transfer:m.transfer,"transition-name":"transition-drop",onClick:v.handleTransferClick},{default:i.withCtx(()=>[i.createElementVNode("div",null,[(i.openBlock(),i.createBlock(i.resolveDynamicComponent(l.panel),i.mergeProps({ref:"pickerPanel",visible:C.visible,showTime:l.type==="datetime"||l.type==="datetimerange",confirm:v.isConfirm,selectionMode:C.selectionMode,steps:m.steps,format:m.format,"model-value":C.internalValue,"start-date":m.startDate,"split-panels":m.splitPanels,"show-week-numbers":m.showWeekNumbers,"picker-type":l.type,multiple:m.multiple,"focused-date":C.focusedDate,"time-picker-options":m.timePickerOptions},l.ownPickerProps,{onOnPick:v.onPick,onOnPickClear:v.handleClear,onOnPickSuccess:v.onPickSuccess,onOnPickClick:u[0]||(u[0]=j=>C.disableClickOutSide=!0),onOnSelectionModeChange:v.onSelectionModeChange}),null,16,["visible","showTime","confirm","selectionMode","steps","format","model-value","start-date","split-panels","show-week-numbers","picker-type","multiple","focused-date","time-picker-options","onOnPick","onOnPickClear","onOnPickSuccess","onOnSelectionModeChange"]))])]),_:1},8,["visible","classes","placement","eventsEnabled","transfer","onClick"])],2)),[[W,v.handleClose,m.capture,{mousedown:!0}],[W,v.handleClose,m.capture,{touchstart:!0}],[W,v.handleClose,m.capture]])}var W4=c(XK,[["render",WK]]),Q4=1e3*60*60*24;function H4(l,u){return new Date(l,u+1,0).getDate()}function G4(l,u,m){return u===0&&m>50?l-1:u===11&&m<10?l+1:l}function Y4(l,u,m,k){u>11&&(u=0,l++);var C=new Date(l,u,m);k&&C.setDate(C.getDate()+4-(C.getDay()||7));var v=k?C.getFullYear():l,R=new Date(v,0,1),B=1+Math.round((C-R)/Q4);k||(B+=R.getDay());var G=Math.ceil(B/7);if(!k){var W=new Date(l,u,m),j=new Date(l+1,0,1),ce=j.getDay();W.getTime()>=j.getTime()-Q4*ce&&(G=1)}return G}function QK(l,u,m){for(var k=this.lang||"en",C=this.onlyDays,v=typeof this.weekStart>"u"?1:this.weekStart,R=v===1,B=[],G=new Date(l,u,1),W=G.getDay()||(R?7:0),j=v-W,ce=Y4(l,u,1,R),Oe=H4(l,u),xe=H4(l,u-1),ye,oe,Re,Lt=G4(l,u,ce),yt={month:u,year:l,daysInMonth:Oe},wt=0;wt<7;wt++){Re=j;for(var Ge=0;Ge<8;Ge++){wt>0&&Ge>0&&j++,j>Oe||j<1?(oe=j>Oe?j-Oe:xe+j,ye=j>Oe?u+1:u-1):(oe=j,ye=u);var Ne=function(){return Ge===0?"weekLabel":wt===0?"dayLabel":j<1?"prevMonth":j>Oe?"nextMonth":"monthDay"}(),Je=Re!==j&&wt>0,je={desc:Je?oe:ce,week:ce,type:Ne,format:R?"ISO 8601":"US",date:Je?new Date(Date.UTC(l,ye,oe)):!1,year:Lt,index:B.length};m&&(typeof m=="function"?je=m.call(yt,je,k):m.forEach(function(Qt){je=Qt.call(yt,je,k)})),C&&Je?B.push(je):C||B.push(je)}wt>0&&(ce=Y4(l,ye,oe+1,R)),Lt=G4(l,u,ce)}return yt.cells=B,yt}var HK=function(l){return QK.bind(l)},GK={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"måndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lördag",7:"söndag"},pt:{0:"s",1:"segunda",2:"terça",3:"quarta",4:"quinta",5:"sexta",6:"sábado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}},za=GK;function YK(l){return l==null?!1:l.constructor===Array||l.constructor===Object}function j4(l,u){for(var m in l)u[m]?YK(l[m])&&j4(l[m],u[m]):u[m]=l[m]}function q4(l,u){var m=[za.classes[l.type]];return l.class?l.class=(typeof l.class=="string"?[l.class]:l.class).concat(m):l.class=m,l.type.indexOf("Label")>0&&(l.index==0&&za.weekPlaceholder?l.desc=za.weekPlaceholder:l.index<8?l.desc=za.columnNames[u][l.index]:l.index%8==0&&(l.desc=l.week)),l.date&&(l.monthName=za.monthNames[u][l.date.getMonth()]),this.monthName||(this.monthName=za.monthNames[u][this.month]),this.labels||(this.labels={monthNames:za.monthNames[u],columnNames:za.columnNames[u],classes:za.classes}),l}q4.setLabels=function(l){j4(l,za)};var jK=q4,qK={Generator:HK,addLabels:jK},vS={name:"PanelTable",emits:["on-pick","on-pick-click","on-change-range"],inject:["PickerInstance"],props:{tableDate:{type:Date,required:!0},disabledDate:{type:Function},selectionMode:{type:String,required:!0},modelValue:{type:Array,required:!0},rangeState:{type:Object,default:()=>({from:null,to:null,selecting:!1})},focusedDate:{type:Date,required:!0}},data(){return{id:te(6)}},computed:{dates(){const{selectionMode:l,modelValue:u,rangeState:m}=this;return l==="range"&&m.selecting?[m.from]:u}},methods:{handleClick(l,u){if(u.stopPropagation(),l.disabled||l.type==="weekLabel")return;const m=new Date(ps(l.date));this.$emit("on-pick",m),this.$emit("on-pick-click")},handleMouseMove(l){if(!this.rangeState.selecting||l.disabled)return;const u=l.date;this.$emit("on-change-range",u)},addPanelTable(){const l=this.PickerInstance;l.panelTableList||(l.panelTableList=[]),l.panelTableList.push({id:this.id,panelTable:this})},removePanelTable(){const l=this.PickerInstance;if(l.panelTableList&&l.panelTableList.length){const u=l.panelTableList.findIndex(m=>m.id===this.id);l.panelTableList.splice(u,1)}}},mounted(){this.addPanelTable()},beforeUnmount(){this.removePanelTable()}},bn="ivu-date-picker-cells";const ZK={mixins:[Ki,vS],props:{showWeekNumbers:{type:Boolean,default:!1}},computed:{classes(){return[`${bn}`,{[`${bn}-show-week-numbers`]:this.showWeekNumbers}]},calendar(){const l=Number(this.t("i.datepicker.weekStartDay"));return new qK.Generator({onlyDays:!this.showWeekNumbers,weekStart:l})},headerDays(){const l=Number(this.t("i.datepicker.weekStartDay")),u=["sun","mon","tue","wed","thu","fri","sat"].map(k=>this.t("i.datepicker.weeks."+k)),m=u.splice(l,7-l).concat(u.splice(0,l));return this.showWeekNumbers?[""].concat(m):m},cells(){const l=this.tableDate.getFullYear(),u=this.tableDate.getMonth(),m=ps(new Date),k=this.dates.filter(Boolean).map(ps),[C,v]=this.dates.map(ps),R=this.rangeState.from&&ps(this.rangeState.from),B=this.rangeState.to&&ps(this.rangeState.to),G=this.selectionMode==="range",W=typeof this.disabledDate=="function"&&this.disabledDate;return this.calendar(l,u,j=>{j.date instanceof Date&&j.date.setTime(j.date.getTime()+j.date.getTimezoneOffset()*6e4+480*60*1e3);const ce=j.date&&ps(j.date),Oe=j.date&&u===j.date.getMonth();return{...j,type:ce===m?"today":j.type,selected:Oe&&k.includes(ce),disabled:j.date&&W&&W(new Date(ce)),range:Oe&&G&&LK(ce,R,B),start:Oe&&G&&ce===C,end:Oe&&G&&ce===v}}).cells.slice(this.showWeekNumbers?8:0)}},methods:{getCellCls(l){return[`${bn}-cell`,{[`${bn}-cell-selected`]:l.selected||l.start||l.end,[`${bn}-cell-disabled`]:l.disabled,[`${bn}-cell-today`]:l.type==="today",[`${bn}-cell-prev-month`]:l.type==="prevMonth",[`${bn}-cell-next-month`]:l.type==="nextMonth",[`${bn}-cell-week-label`]:l.type==="weekLabel",[`${bn}-cell-range`]:l.range&&!l.start&&!l.end,[`${bn}-focused`]:ps(l.date)===ps(this.focusedDate)}]}}},KK={class:"ivu-date-picker-cells-header"},JK=["onClick","onMouseenter"];function eJ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.createElementVNode("div",KK,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.headerDays,R=>(i.openBlock(),i.createElementBlock("span",{key:R},i.toDisplayString(R),1))),128))]),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.cells,(R,B)=>(i.openBlock(),i.createElementBlock("span",{key:String(R.date)+B,class:i.normalizeClass(v.getCellCls(R)),onClick:G=>l.handleClick(R,G),onMouseenter:G=>l.handleMouseMove(R)},[i.createElementVNode("em",null,i.toDisplayString(R.desc),1)],42,JK))),128))],2)}var Z4=c(ZK,[["render",eJ]]);const tJ={mixins:[vS],props:{},computed:{classes(){return[`${bn}`,`${bn}-year`]},startYear(){return Math.floor(this.tableDate.getFullYear()/10)*10},cells(){let l=[];const u={text:"",selected:!1,disabled:!1},m=this.dates.filter(Boolean).map(C=>ps(new Date(C.getFullYear(),0,1))),k=ps(new Date(this.focusedDate.getFullYear(),0,1));for(let C=0;C<10;C++){const v=L(u);v.date=new Date(this.startYear+C,0,1),v.disabled=typeof this.disabledDate=="function"&&this.disabledDate(v.date)&&this.selectionMode==="year";const R=ps(v.date);v.selected=m.includes(R),v.focused=R===k,l.push(v)}return l}},methods:{getCellCls(l){return[`${bn}-cell`,{[`${bn}-cell-selected`]:l.selected,[`${bn}-cell-disabled`]:l.disabled,[`${bn}-cell-focused`]:l.focused,[`${bn}-cell-range`]:l.range&&!l.start&&!l.end}]}}},iJ=["onClick","onMouseenter"];function nJ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.cells,R=>(i.openBlock(),i.createElementBlock("span",{class:i.normalizeClass(v.getCellCls(R)),key:R.date,onClick:B=>l.handleClick(R,B),onMouseenter:B=>l.handleMouseMove(R)},[i.createElementVNode("em",null,i.toDisplayString(R.date.getFullYear()),1)],42,iJ))),128))],2)}var K4=c(tJ,[["render",nJ]]);const rJ={mixins:[Ki,vS],props:{},computed:{classes(){return[`${bn}`,`${bn}-month`]},cells(){let l=[];const u={text:"",selected:!1,disabled:!1},m=this.tableDate.getFullYear(),k=this.dates.filter(Boolean).map(v=>ps(new Date(v.getFullYear(),v.getMonth(),1))),C=ps(new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),1));for(let v=0;v<12;v++){const R=L(u);R.date=new Date(m,v,1),R.text=this.tCell(v+1);const B=ps(R.date);R.disabled=typeof this.disabledDate=="function"&&this.disabledDate(R.date)&&this.selectionMode==="month",R.selected=k.includes(B),R.focused=B===C,l.push(R)}return l}},methods:{getCellCls(l){return[`${bn}-cell`,{[`${bn}-cell-selected`]:l.selected,[`${bn}-cell-disabled`]:l.disabled,[`${bn}-cell-focused`]:l.focused,[`${bn}-cell-range`]:l.range&&!l.start&&!l.end}]},tCell(l){return this.t(`i.datepicker.months.m${l}`)}}},sJ=["onClick","onMouseenter"];function oJ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.cells,R=>(i.openBlock(),i.createElementBlock("span",{class:i.normalizeClass(v.getCellCls(R)),key:R.text,onClick:B=>l.handleClick(R,B),onMouseenter:B=>l.handleMouseMove(R)},[i.createElementVNode("em",null,i.toDisplayString(R.text),1)],42,sJ))),128))],2)}var J4=c(rJ,[["render",oJ]]),Kv={props:{disabledHours:{type:Array,default(){return[]}},disabledMinutes:{type:Array,default(){return[]}},disabledSeconds:{type:Array,default(){return[]}},hideDisabledOptions:{type:Boolean,default:!1}}};const ou="ivu-time-picker-cells",bS=["hours","minutes","seconds"],aJ={name:"TimeSpinner",mixins:[Kv],emits:["on-change","on-pick-click"],inject:["PickerInstance"],props:{hours:{type:[Number,String],default:NaN},minutes:{type:[Number,String],default:NaN},seconds:{type:[Number,String],default:NaN},showSeconds:{type:Boolean,default:!0},steps:{type:Array,default:()=>[]}},data(){return{spinerSteps:[1,1,1].map((l,u)=>Math.abs(this.steps[u])||l),prefixCls:ou,compiled:!1,focusedColumn:-1,focusedTime:[0,0,0],id:te(6)}},computed:{classes(){return[`${ou}`,{[`${ou}-with-seconds`]:this.showSeconds}]},hoursList(){let l=[];const u=this.spinerSteps[0],m=this.focusedColumn===0&&this.focusedTime[0],k={text:0,selected:!1,disabled:!1,hide:!1};for(let C=0;C<24;C+=u){const v=L(k);v.text=C,v.focused=C===m,this.disabledHours.length&&this.disabledHours.indexOf(C)>-1&&(v.disabled=!0,this.hideDisabledOptions&&(v.hide=!0)),this.hours===C&&(v.selected=!0),l.push(v)}return l},minutesList(){let l=[];const u=this.spinerSteps[1],m=this.focusedColumn===1&&this.focusedTime[1],k={text:0,selected:!1,disabled:!1,hide:!1};for(let C=0;C<60;C+=u){const v=L(k);v.text=C,v.focused=C===m,this.disabledMinutes.length&&this.disabledMinutes.indexOf(C)>-1&&(v.disabled=!0,this.hideDisabledOptions&&(v.hide=!0)),this.minutes===C&&(v.selected=!0),l.push(v)}return l},secondsList(){let l=[];const u=this.spinerSteps[2],m=this.focusedColumn===2&&this.focusedTime[2],k={text:0,selected:!1,disabled:!1,hide:!1};for(let C=0;C<60;C+=u){const v=L(k);v.text=C,v.focused=C===m,this.disabledSeconds.length&&this.disabledSeconds.indexOf(C)>-1&&(v.disabled=!0,this.hideDisabledOptions&&(v.hide=!0)),this.seconds===C&&(v.selected=!0),l.push(v)}return l}},methods:{getCellCls(l){return[`${ou}-cell`,{[`${ou}-cell-selected`]:l.selected,[`${ou}-cell-focused`]:l.focused,[`${ou}-cell-disabled`]:l.disabled}]},chooseValue(l){const u=bS.reduce((m,k,C)=>{const v=l[C];return this[k]===v?m:{...m,[k]:v}},{});Object.keys(u).length>0&&this.emitChange(u)},handleClick(l,u){if(u.disabled)return;const m={[l]:u.text};this.emitChange(m)},emitChange(l){this.$emit("on-change",l),this.$emit("on-pick-click")},scroll(l,u){const m=this.$refs[l].scrollTop,k=24*this.getScrollIndex(l,u);N(this.$refs[l],m,k,500)},getScrollIndex(l,u){const m=M(l),k=this[`disabled${m}`];if(k.length&&this.hideDisabledOptions){let C=0;k.forEach(v=>v<=u?C++:""),u-=C}return u},updateScroll(){i.nextTick(()=>{bS.forEach(l=>{this.$refs[l].scrollTop=24*this[`${l}List`].findIndex(u=>u.text==this[l])})})},formatTime(l){return l<10?"0"+l:l},updateFocusedTime(l,u){this.focusedColumn=l,this.focusedTime=u.slice()},addTimeSpinner(){const l=this.PickerInstance;l.timeSpinnerList||(l.timeSpinnerList=[]),l.timeSpinnerList.push({id:this.id,timeSpinner:this})},removeTimeSpinner(){const l=this.PickerInstance;if(l.timeSpinnerList&&l.timeSpinnerList.length){const u=l.timeSpinnerList.findIndex(m=>m.id===this.id);l.timeSpinnerList.splice(u,1)}}},watch:{hours(l){!this.compiled||this.scroll("hours",this.hoursList.findIndex(u=>u.text==l))},minutes(l){!this.compiled||this.scroll("minutes",this.minutesList.findIndex(u=>u.text==l))},seconds(l){!this.compiled||this.scroll("seconds",this.secondsList.findIndex(u=>u.text==l))},focusedTime(l,u){bS.forEach((m,k)=>{if(l[k]===u[k]||typeof l[k]>"u")return;const C=this[`${m}List`].findIndex(v=>v.text===l[k]);this.scroll(m,C)})}},mounted(){this.addTimeSpinner(),i.nextTick(()=>this.compiled=!0)},beforeUnmount(){this.removeTimeSpinner()}},lJ=["onClick"],cJ=["onClick"],hJ=["onClick"];function uJ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-list"]),ref:"hours"},[i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls+"-ul"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.hoursList,R=>i.withDirectives((i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.getCellCls(R)),key:R.text,onClick:B=>v.handleClick("hours",R)},i.toDisplayString(v.formatTime(R.text)),11,lJ)),[[i.vShow,!R.hide]])),128))],2)],2),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-list"]),ref:"minutes"},[i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls+"-ul"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.minutesList,R=>i.withDirectives((i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.getCellCls(R)),key:R.text,onClick:B=>v.handleClick("minutes",R)},i.toDisplayString(v.formatTime(R.text)),11,cJ)),[[i.vShow,!R.hide]])),128))],2)],2),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-list"]),ref:"seconds"},[i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls+"-ul"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.secondsList,R=>i.withDirectives((i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.getCellCls(R)),key:R.text,onClick:B=>v.handleClick("seconds",R)},i.toDisplayString(v.formatTime(R.text)),11,hJ)),[[i.vShow,!R.hide]])),128))],2)],2),[[i.vShow,m.showSeconds]])],2)}var e5=c(aJ,[["render",uJ]]);const t5="ivu-picker",dJ={mixins:[Ki],components:{iButton:fs},emits:["on-pick-clear","on-pick-success","on-pick-toggle-time"],inject:["PickerInstance"],props:{showTime:{type:Boolean,default:!1},isTime:{type:Boolean,default:!1},timeDisabled:{type:Boolean,default:!1}},data(){return{prefixCls:t5}},computed:{timeClasses(){return`${t5}-confirm-time`},labels(){const l=["time","clear","ok"],u=[this.isTime?"selectDate":"selectTime","clear","ok"];return l.reduce((m,k,C)=>(m[k]=this.t("i.datepicker."+u[C]),m),{})}},methods:{handleClear(){this.$emit("on-pick-clear")},handleSuccess(){this.$emit("on-pick-success")},handleToggleTime(){this.timeDisabled||(this.$emit("on-pick-toggle-time"),this.PickerInstance.handleOnFocusInput(),this.PickerInstance.handleOnUpdatePopper())},handleTab(l){const u=[...this.$el.children][l.shiftKey?"shift":"pop"]();s&&document.activeElement===u&&(l.preventDefault(),l.stopPropagation(),this.PickerInstance.handleOnFocusInput())}}};function fJ(l,u,m,k,C,v){const R=i.resolveComponent("i-button");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls+"-confirm"]),onKeydownCapture:u[0]||(u[0]=i.withKeys((...B)=>v.handleTab&&v.handleTab(...B),["tab"]))},[m.showTime?(i.openBlock(),i.createBlock(R,{key:0,class:i.normalizeClass(v.timeClasses),size:"small",type:"text",disabled:m.timeDisabled,onClick:v.handleToggleTime},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(v.labels.time),1)]),_:1},8,["class","disabled","onClick"])):i.createCommentVNode("",!0),i.createVNode(R,{size:"small",class:"ivu-picker-confirm-btn-cancel",onClick:v.handleClear,onKeydown:i.withKeys(v.handleClear,["enter"])},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(v.labels.clear),1)]),_:1},8,["onClick","onKeydown"]),i.createVNode(R,{size:"small",type:"primary",onClick:v.handleSuccess,onKeydown:i.withKeys(v.handleSuccess,["enter"])},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(v.labels.ok),1)]),_:1},8,["onClick","onKeydown"])],34)}var Jv=c(dJ,[["render",fJ]]);const pJ="ivu-picker-panel",i5="ivu-date-picker";var e1={emits:["on-pick-clear","on-pick-success","on-pick-click","on-pick"],props:{confirm:{type:Boolean,default:!1}},methods:{iconBtnCls(l,u=""){return[`${pJ}-icon-btn`,`${i5}-${l}-btn`,`${i5}-${l}-btn-arrow${u}`]},handleShortcutClick(l){l.value&&this.$emit("on-pick",l.value()),l.onClick&&l.onClick(this)},handlePickClear(){this.resetView(),this.$emit("on-pick-clear")},handlePickSuccess(){this.resetView(),this.$emit("on-pick-success")},handlePickClick(){this.$emit("on-pick-click")},resetView(){setTimeout(()=>this.currentView=this.selectionMode,500)},handleClear(){this.dates=this.dates.map(()=>null),this.rangeState={},this.$emit("on-pick",this.dates),this.handleConfirm()},handleConfirm(l,u){this.$emit("on-pick",this.dates,l,u||this.type)},onToggleVisibility(l){const{timeSpinner:u,timeSpinnerEnd:m}=this.$refs;l&&u&&u.updateScroll(),l&&m&&m.updateScroll()}}};const mJ="ivu-picker-panel",gJ="ivu-time-picker",yJ=l=>l[0].toUpperCase()+l.slice(1),vJ=(l,u,m,k)=>{const C=new Date(l.getTime());return C.setHours(u),C.setMinutes(m),C.setSeconds(k),C},bJ=(l,u,m)=>m.indexOf(l)===u,n5=()=>!1,xJ={name:"TimePickerPanel",mixins:[e1,Ki,Kv],components:{TimeSpinner:e5,Confirm:Jv},emits:["on-pick"],props:{disabledDate:{type:Function,default:n5},steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){return{prefixCls:mJ,timePrefixCls:gJ,date:this.modelValue[0]||Fa(),showDate:!1}},computed:{showSeconds(){return!!(this.format||"").match(/ss/)},visibleDate(){const l=this.date,u=l.getMonth()+1,m=this.t("i.datepicker.year"),k=this.t(`i.datepicker.month${u}`);return`${l.getFullYear()}${m} ${k}`},timeSlots(){return this.modelValue[0]?["getHours","getMinutes","getSeconds"].map(l=>this.date[l]()):[]},disabledHMS(){const l=["disabledHours","disabledMinutes","disabledSeconds"];if(this.disabledDate===n5||!this.modelValue[0])return l.reduce((u,m)=>(u[m]=this[m],u),{});{const u=[24,60,60],m=["Hours","Minutes","Seconds"].map(k=>this[`disabled${k}`]).map((k,C)=>{const v=u[C],R=k;for(let B=0;B<v;B+=this.steps[C]||1){const G=this.timeSlots.map((j,ce)=>ce===C?B:j),W=vJ(this.date,...G);this.disabledDate(W,!0)&&R.push(B)}return R.filter(bJ)});return l.reduce((k,C,v)=>(k[C]=m[v],k),{})}}},watch:{modelValue(l){let u=l[0]||Fa();u=new Date(u),this.date=u}},methods:{handleChange(l,u=!0){const m=new Date(this.date);Object.keys(l).forEach(k=>m[`set${yJ(k)}`](l[k])),u&&this.$emit("on-pick",m,"time")}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function OJ(l,u,m,k,C,v){const R=i.resolveComponent("time-spinner"),B=i.resolveComponent("Confirm");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls+"-body-wrapper"]),onMousedown:u[0]||(u[0]=i.withModifiers(()=>{},["prevent"]))},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"])},[C.showDate?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.timePrefixCls+"-header"])},i.toDisplayString(v.visibleDate),3)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content"])},[i.createVNode(R,{ref:"timeSpinner","show-seconds":v.showSeconds,steps:m.steps,hours:v.timeSlots[0],minutes:v.timeSlots[1],seconds:v.timeSlots[2],"disabled-hours":v.disabledHMS.disabledHours,"disabled-minutes":v.disabledHMS.disabledMinutes,"disabled-seconds":v.disabledHMS.disabledSeconds,"hide-disabled-options":l.hideDisabledOptions,onOnChange:v.handleChange,onOnPickClick:l.handlePickClick},null,8,["show-seconds","steps","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),l.confirm?(i.openBlock(),i.createBlock(B,{key:1,onOnPickClear:l.handlePickClear,onOnPickSuccess:l.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):i.createCommentVNode("",!0)],2)],34)}var r5=c(xJ,[["render",OJ]]);const wJ={props:{datePanelLabel:Object,currentView:String,datePrefixCls:String}};function _J(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("span",null,[m.datePanelLabel?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass([m.datePrefixCls+"-header-label"]),onClick:u[0]||(u[0]=(...R)=>m.datePanelLabel.labels[0].handler&&m.datePanelLabel.labels[0].handler(...R))},i.toDisplayString(m.datePanelLabel.labels[0].label),3)),[[i.vShow,m.datePanelLabel.labels[0].type==="year"||m.currentView==="date"]]):i.createCommentVNode("",!0),m.datePanelLabel&&m.currentView==="date"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createTextVNode(i.toDisplayString(m.datePanelLabel.separator),1)],64)):i.createCommentVNode("",!0),m.datePanelLabel?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass([m.datePrefixCls+"-header-label"]),onClick:u[1]||(u[1]=(...R)=>m.datePanelLabel.labels[1].handler&&m.datePanelLabel.labels[1].handler(...R))},i.toDisplayString(m.datePanelLabel.labels[1].label),3)),[[i.vShow,m.datePanelLabel.labels[1].type==="year"||m.currentView==="date"]]):i.createCommentVNode("",!0)])}var s5=c(wJ,[["render",_J]]),o5={props:{showTime:{type:Boolean,default:!1},format:{type:String,default:"yyyy-MM-dd"},selectionMode:{type:String,validator(l){return _(l,["year","month","date","time"])},default:"date"},shortcuts:{type:Array,default:()=>[]},disabledDate:{type:Function,default:()=>!1},modelValue:{type:Array,default:()=>[Fa(),Fa()]},timePickerOptions:{default:()=>({}),type:Object},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},pickerType:{type:String,require:!0},focusedDate:{type:Date,required:!0}},computed:{isTime(){return this.currentView==="time"}},methods:{handleToggleTime(){this.currentView=this.currentView==="time"?"date":"time"}}};const xS="ivu-picker-panel",SJ="ivu-date-picker",CJ={name:"DatePickerPanel",mixins:[e1,Ki,o5],components:{Icon:S,DateTable:Z4,YearTable:K4,MonthTable:J4,TimePicker:r5,Confirm:Jv,datePanelLabel:s5},emits:["on-selection-mode-change","on-pick"],props:{multiple:{type:Boolean,default:!1}},data(){const{selectionMode:l,modelValue:u}=this,m=u.slice().sort();return{prefixCls:xS,datePrefixCls:SJ,currentView:l||"date",pickerTable:this.getTableType(l),dates:m,panelDate:this.startDate||m[0]||new Date}},computed:{classes(){return[`${xS}-body-wrapper`,{[`${xS}-with-sidebar`]:this.shortcuts.length}]},panelPickerHandlers(){return this.pickerTable===`${this.currentView}-table`?this.handlePick:this.handlePreSelection},datePanelLabel(){const l=this.t("i.locale"),u=this.t("i.datepicker.datePanelLabel"),m=this.panelDate,{labels:k,separator:C}=pS(l,u,m),v=R=>()=>this.pickerTable=this.getTableType(R);return{separator:C,labels:k.map(R=>(R.handler=v(R.type),R))}},timeDisabled(){return!this.dates[0]}},watch:{modelValue(l){this.dates=l;const u=this.multiple?this.dates[this.dates.length-1]:this.startDate||this.dates[0];this.panelDate=u||new Date},currentView(l){this.$emit("on-selection-mode-change",l),this.currentView==="time"&&i.nextTick(()=>{this.$refs.timePicker.$refs.timeSpinner.updateScroll()})},selectionMode(l){this.currentView=l,this.pickerTable=this.getTableType(l)},focusedDate(l){const u=l.getFullYear()!==this.panelDate.getFullYear(),m=u||l.getMonth()!==this.panelDate.getMonth();(u||m)&&(this.multiple||(this.panelDate=l))}},methods:{reset(){this.currentView=this.selectionMode,this.pickerTable=this.getTableType(this.currentView)},changeYear(l){this.selectionMode==="year"||this.pickerTable==="year-table"?this.panelDate=new Date(this.panelDate.getFullYear()+l*10,0,1):this.panelDate=z4(this.panelDate,l*12)},getTableType(l){return l.match(/^time/)?"time-picker":`${l}-table`},changeMonth(l){this.panelDate=z4(this.panelDate,l)},handlePreSelection(l){this.panelDate=l,this.pickerTable==="year-table"?this.pickerTable="month-table":this.pickerTable=this.getTableType(this.currentView)},handlePick(l,u){const{selectionMode:m,panelDate:k}=this;m==="year"?l=new Date(l.getFullYear(),0,1):m==="month"?l=new Date(k.getFullYear(),l.getMonth(),1):l=new Date(l),this.dates=[l],this.$emit("on-pick",l,!1,u||m)}}},kJ=["onClick"];function TJ(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("date-panel-label"),G=i.resolveComponent("time-picker"),W=i.resolveComponent("Confirm");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),onMousedown:u[4]||(u[4]=i.withModifiers(()=>{},["prevent"]))},[l.shortcuts.length?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-sidebar"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.shortcuts,j=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls+"-shortcut"]),key:j.text,onClick:ce=>l.handleShortcutClick(j)},i.toDisplayString(j.text),11,kJ))),128))],2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"])},[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.datePrefixCls+"-header"])},[i.createElementVNode("span",{class:i.normalizeClass(l.iconBtnCls("prev","-double")),onClick:u[0]||(u[0]=j=>v.changeYear(-1))},[i.createVNode(R,{type:"ios-arrow-back"})],2),C.pickerTable==="date-table"?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(l.iconBtnCls("prev")),onClick:u[1]||(u[1]=j=>v.changeMonth(-1))},[i.createVNode(R,{type:"ios-arrow-back"})],2)),[[i.vShow,C.currentView==="date"]]):i.createCommentVNode("",!0),i.createVNode(B,{"date-panel-label":v.datePanelLabel,"current-view":C.pickerTable.split("-").shift(),"date-prefix-cls":C.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),i.createElementVNode("span",{class:i.normalizeClass(l.iconBtnCls("next","-double")),onClick:u[2]||(u[2]=j=>v.changeYear(1))},[i.createVNode(R,{type:"ios-arrow-forward"})],2),C.pickerTable==="date-table"?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:1,class:i.normalizeClass(l.iconBtnCls("next")),onClick:u[3]||(u[3]=j=>v.changeMonth(1))},[i.createVNode(R,{type:"ios-arrow-forward"})],2)),[[i.vShow,C.currentView==="date"]]):i.createCommentVNode("",!0)],2),[[i.vShow,C.currentView!=="time"]]),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content"])},[C.currentView!=="time"?(i.openBlock(),i.createBlock(i.resolveDynamicComponent(C.pickerTable),{key:0,ref:"pickerTable","table-date":C.panelDate,"show-week-numbers":l.showWeekNumbers,"model-value":C.dates,"selection-mode":l.selectionMode,"disabled-date":l.disabledDate,"focused-date":l.focusedDate,onOnPick:v.panelPickerHandlers,onOnPickClick:l.handlePickClick},null,40,["table-date","show-week-numbers","model-value","selection-mode","disabled-date","focused-date","onOnPick","onOnPickClick"])):i.createCommentVNode("",!0)],2),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content"])},[C.currentView==="time"?(i.openBlock(),i.createBlock(G,i.mergeProps({key:0,ref:"timePicker","model-value":C.dates,format:l.format,"time-disabled":v.timeDisabled,"disabled-date":l.disabledDate,"focused-date":l.focusedDate},l.timePickerOptions,{onOnPick:v.handlePick,onOnPickClick:l.handlePickClick,onOnPickClear:l.handlePickClear,onOnPickSuccess:l.handlePickSuccess,onOnPickToggleTime:l.handleToggleTime}),null,16,["model-value","format","time-disabled","disabled-date","focused-date","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):i.createCommentVNode("",!0)],2),[[i.vShow,l.isTime]]),l.confirm?(i.openBlock(),i.createBlock(W,{key:0,"show-time":l.showTime,"is-time":l.isTime,onOnPickToggleTime:l.handleToggleTime,onOnPickClear:l.handlePickClear,onOnPickSuccess:l.handlePickSuccess},null,8,["show-time","is-time","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):i.createCommentVNode("",!0)],2)],34)}var MJ=c(CJ,[["render",TJ]]);const a5="ivu-picker-panel",OS="ivu-time-picker",l5=l=>l[0].toUpperCase()+l.slice(1),EJ={name:"RangeTimePickerPanel",mixins:[e1,Ki,Kv],components:{TimeSpinner:e5,Confirm:Jv},emits:["on-pick"],props:{steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){const[l,u]=this.modelValue.slice();return{prefixCls:a5,timePrefixCls:OS,showDate:!1,dateStart:l||Fa(),dateEnd:u||Fa()}},computed:{classes(){return[`${a5}-body-wrapper`,`${OS}-with-range`,{[`${OS}-with-seconds`]:this.showSeconds}]},showSeconds(){return!!(this.format||"").match(/ss/)},leftDatePanelLabel(){return this.panelLabelConfig(this.date)},rightDatePanelLabel(){return this.panelLabelConfig(this.dateEnd)}},watch:{modelValue(l){const[u,m]=l.slice();this.dateStart=u||Fa(),this.dateEnd=m||Fa()}},methods:{panelLabelConfig(l){const u=this.t("i.locale"),m=this.t("i.datepicker.datePanelLabel"),{labels:k,separator:C}=pS(u,m,l||Fa());return[k[0].label,C,k[1].label].join("")},handleChange(l,u,m=!0){const k=new Date(this.dateStart);let C=new Date(this.dateEnd);Object.keys(l).forEach(v=>{k[`set${l5(v)}`](l[v])}),Object.keys(u).forEach(v=>{C[`set${l5(v)}`](u[v])}),C<k&&(C=k),m&&this.$emit("on-pick",[k,C],"time")},handleStartChange(l){this.handleChange(l,{})},handleEndChange(l){this.handleChange({},l)},updateScroll(){this.$refs.timeSpinner.updateScroll(),this.$refs.timeSpinnerEnd.updateScroll()}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function PJ(l,u,m,k,C,v){const R=i.resolveComponent("time-spinner"),B=i.resolveComponent("Confirm");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),onMousedown:u[0]||(u[0]=i.withModifiers(()=>{},["prevent"]))},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content",C.prefixCls+"-content-left"])},[i.createElementVNode("div",{class:i.normalizeClass([C.timePrefixCls+"-header"])},[C.showDate?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(v.leftDatePanelLabel),1)],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createTextVNode(i.toDisplayString(l.t("i.datepicker.startTime")),1)],64))],2),i.createVNode(R,{ref:"timeSpinner",steps:m.steps,"show-seconds":v.showSeconds,hours:m.modelValue[0]&&C.dateStart.getHours(),minutes:m.modelValue[0]&&C.dateStart.getMinutes(),seconds:m.modelValue[0]&&C.dateStart.getSeconds(),"disabled-hours":l.disabledHours,"disabled-minutes":l.disabledMinutes,"disabled-seconds":l.disabledSeconds,"hide-disabled-options":l.hideDisabledOptions,onOnChange:v.handleStartChange,onOnPickClick:l.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content",C.prefixCls+"-content-right"])},[i.createElementVNode("div",{class:i.normalizeClass([C.timePrefixCls+"-header"])},[C.showDate?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(v.rightDatePanelLabel),1)],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createTextVNode(i.toDisplayString(l.t("i.datepicker.endTime")),1)],64))],2),i.createVNode(R,{ref:"timeSpinnerEnd",steps:m.steps,"show-seconds":v.showSeconds,hours:m.modelValue[1]&&C.dateEnd.getHours(),minutes:m.modelValue[1]&&C.dateEnd.getMinutes(),seconds:m.modelValue[1]&&C.dateEnd.getSeconds(),"disabled-hours":l.disabledHours,"disabled-minutes":l.disabledMinutes,"disabled-seconds":l.disabledSeconds,"hide-disabled-options":l.hideDisabledOptions,onOnChange:v.handleEndChange,onOnPickClick:l.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),l.confirm?(i.openBlock(),i.createBlock(B,{key:0,onOnPickClear:l.handlePickClear,onOnPickSuccess:l.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):i.createCommentVNode("",!0)],2)],34)}var c5=c(EJ,[["render",PJ]]);const Wd="ivu-picker-panel",wS="ivu-date-picker",h5=(l,u)=>!l||!u?0:l.getTime()-u.getTime(),AJ={name:"RangeDatePickerPanel",mixins:[e1,Ki,o5],components:{Icon:S,DateTable:Z4,YearTable:K4,MonthTable:J4,TimePicker:c5,Confirm:Jv,datePanelLabel:s5},props:{splitPanels:{type:Boolean,default:!1}},data(){const[l,u]=this.modelValue.map(k=>k||Fa()),m=this.startDate?this.startDate:l;return{prefixCls:Wd,datePrefixCls:wS,dates:this.modelValue,rangeState:{from:this.modelValue[0],to:this.modelValue[1],selecting:l&&!u},currentView:this.selectionMode||"range",leftPickerTable:`${this.selectionMode}-table`,rightPickerTable:`${this.selectionMode}-table`,leftPanelDate:m,rightPanelDate:new Date(m.getFullYear(),m.getMonth()+1,1)}},computed:{classes(){return[`${Wd}-body-wrapper`,`${wS}-with-range`,{[`${Wd}-with-sidebar`]:this.shortcuts.length,[`${wS}-with-week-numbers`]:this.showWeekNumbers}]},panelBodyClasses(){return[Wd+"-body",{[Wd+"-body-time"]:this.showTime,[Wd+"-body-date"]:!this.showTime}]},leftDatePanelLabel(){return this.panelLabelConfig("left")},rightDatePanelLabel(){return this.panelLabelConfig("right")},leftDatePanelView(){return this.leftPickerTable.split("-").shift()},rightDatePanelView(){return this.rightPickerTable.split("-").shift()},timeDisabled(){return!(this.dates[0]&&this.dates[1])},preSelecting(){const l=`${this.currentView}-table`;return{left:this.leftPickerTable!==l,right:this.rightPickerTable!==l}},panelPickerHandlers(){return{left:this.preSelecting.left?this.handlePreSelection.bind(this,"left"):this.handleRangePick,right:this.preSelecting.right?this.handlePreSelection.bind(this,"right"):this.handleRangePick}}},watch:{modelValue(l){const u=l[0]?fS(l[0]):null,m=l[1]?fS(l[1]):null;this.dates=[u,m].sort(h5),this.rangeState={from:this.dates[0],to:this.dates[1],selecting:!1},this.setPanelDates(this.startDate||this.dates[0]||new Date)},currentView(l){const u=this.leftPanelDate.getMonth(),m=this.rightPanelDate.getMonth(),k=this.leftPanelDate.getFullYear()===this.rightPanelDate.getFullYear();l==="date"&&k&&u===m&&this.changePanelDate("right","Month",1),l==="month"&&k&&this.changePanelDate("right","FullYear",1),l==="year"&&k&&this.changePanelDate("right","FullYear",10)},selectionMode(l){this.currentView=l||"range"},focusedDate(l){this.setPanelDates(l||new Date)}},methods:{reset(){this.currentView=this.selectionMode,this.leftPickerTable=`${this.currentView}-table`,this.rightPickerTable=`${this.currentView}-table`},setPanelDates(l){this.leftPanelDate=l;const u=new Date(l.getFullYear(),l.getMonth()+1,1),m=this.dates[1]?this.dates[1].getTime():this.dates[1];this.rightPanelDate=this.splitPanels?new Date(Math.max(m,u.getTime())):u},panelLabelConfig(l){const u=this.t("i.locale"),m=this.t("i.datepicker.datePanelLabel"),k=B=>{const G=B=="month"?this.showMonthPicker:this.showYearPicker;return()=>G(l)},C=this[`${l}PanelDate`],{labels:v,separator:R}=pS(u,m,C);return{separator:R,labels:v.map(B=>(B.handler=k(B.type),B))}},prevYear(l){const u=this.currentView==="year"?-10:-1;this.changePanelDate(l,"FullYear",u)},nextYear(l){const u=this.currentView==="year"?10:1;this.changePanelDate(l,"FullYear",u)},prevMonth(l){this.changePanelDate(l,"Month",-1)},nextMonth(l){this.changePanelDate(l,"Month",1)},changePanelDate(l,u,m,k=!0){const C=new Date(this[`${l}PanelDate`]);if(u==="FullYear"?C[`set${u}`](C[`get${u}`]()+m):C[`set${u}`](C[`get${u}`]()+m,1),this[`${l}PanelDate`]=C,!!k)if(this.splitPanels){const v=l==="left"?"right":"left";l==="left"&&this.leftPanelDate>=this.rightPanelDate&&this.changePanelDate(v,u,1),l==="right"&&this.rightPanelDate<=this.leftPanelDate&&this.changePanelDate(v,u,-1)}else{const v=l==="left"?"right":"left",R=this[`${v}PanelDate`],B=new Date(R);if(u==="Month"){const G=new Date(B.getFullYear(),B.getMonth()+m+1,0).getDate();B.setDate(Math.min(G,B.getDate()))}B[`set${u}`](B[`get${u}`]()+m),this[`${v}PanelDate`]=B}},showYearPicker(l){this[`${l}PickerTable`]="year-table"},showMonthPicker(l){this[`${l}PickerTable`]="month-table"},handlePreSelection(l,u){if(this[`${l}PanelDate`]=u,this[`${l}PickerTable`]==="year-table"?this[`${l}PickerTable`]="month-table":this[`${l}PickerTable`]=`${this.currentView}-table`,!this.splitPanels){const m=l==="left"?"right":"left";this[`${m}PanelDate`]=u;const k=m==="left"?-1:1;this.changePanelDate(m,"Month",k,!1)}},handleRangePick(l,u){if(this.rangeState.selecting||this.currentView==="time"){if(this.currentView==="time")this.dates=l;else{const[m,k]=[this.rangeState.from,l].sort(h5);this.dates=[m,k],this.rangeState={from:m,to:k,selecting:!1}}this.handleConfirm(!1,u||"date")}else this.rangeState={from:l,to:null,selecting:!0}},handleChangeRange(l){this.rangeState.to=l}}},RJ=["onClick"];function IJ(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("date-panel-label"),G=i.resolveComponent("time-picker"),W=i.resolveComponent("Confirm");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),onMousedown:u[8]||(u[8]=i.withModifiers(()=>{},["prevent"]))},[l.shortcuts.length?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-sidebar"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.shortcuts,j=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls+"-shortcut"]),key:j.text,onClick:ce=>l.handleShortcutClick(j)},i.toDisplayString(j.text),11,RJ))),128))],2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass(v.panelBodyClasses)},[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content",C.prefixCls+"-content-left"])},[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.datePrefixCls+"-header"])},[i.createElementVNode("span",{class:i.normalizeClass(l.iconBtnCls("prev","-double")),onClick:u[0]||(u[0]=j=>v.prevYear("left"))},[i.createVNode(R,{type:"ios-arrow-back"})],2),C.leftPickerTable==="date-table"?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(l.iconBtnCls("prev")),onClick:u[1]||(u[1]=j=>v.prevMonth("left"))},[i.createVNode(R,{type:"ios-arrow-back"})],2)),[[i.vShow,C.currentView==="date"]]):i.createCommentVNode("",!0),i.createVNode(B,{"date-panel-label":v.leftDatePanelLabel,"current-view":v.leftDatePanelView,"date-prefix-cls":C.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),m.splitPanels||C.leftPickerTable!=="date-table"?(i.openBlock(),i.createElementBlock("span",{key:1,class:i.normalizeClass(l.iconBtnCls("next","-double")),onClick:u[2]||(u[2]=j=>v.nextYear("left"))},[i.createVNode(R,{type:"ios-arrow-forward"})],2)):i.createCommentVNode("",!0),m.splitPanels&&C.leftPickerTable==="date-table"?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass(l.iconBtnCls("next")),onClick:u[3]||(u[3]=j=>v.nextMonth("left"))},[i.createVNode(R,{type:"ios-arrow-forward"})],2)),[[i.vShow,C.currentView==="date"]]):i.createCommentVNode("",!0)],2),[[i.vShow,C.currentView!=="time"]]),C.currentView!=="time"?(i.openBlock(),i.createBlock(i.resolveDynamicComponent(C.leftPickerTable),{key:0,ref:"leftYearTable","table-date":C.leftPanelDate,"selection-mode":"range","disabled-date":l.disabledDate,"range-state":C.rangeState,"show-week-numbers":l.showWeekNumbers,"model-value":v.preSelecting.left?[C.dates[0]]:C.dates,"focused-date":l.focusedDate,onOnChangeRange:v.handleChangeRange,onOnPick:v.panelPickerHandlers.left,onOnPickClick:l.handlePickClick},null,40,["table-date","disabled-date","range-state","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):i.createCommentVNode("",!0)],2),[[i.vShow,!l.isTime]]),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content",C.prefixCls+"-content-right"])},[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.datePrefixCls+"-header"])},[m.splitPanels||C.rightPickerTable!=="date-table"?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(l.iconBtnCls("prev","-double")),onClick:u[4]||(u[4]=j=>v.prevYear("right"))},[i.createVNode(R,{type:"ios-arrow-back"})],2)):i.createCommentVNode("",!0),m.splitPanels&&C.rightPickerTable==="date-table"?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:1,class:i.normalizeClass(l.iconBtnCls("prev")),onClick:u[5]||(u[5]=j=>v.prevMonth("right"))},[i.createVNode(R,{type:"ios-arrow-back"})],2)),[[i.vShow,C.currentView==="date"]]):i.createCommentVNode("",!0),i.createVNode(B,{"date-panel-label":v.rightDatePanelLabel,"current-view":v.rightDatePanelView,"date-prefix-cls":C.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),i.createElementVNode("span",{class:i.normalizeClass(l.iconBtnCls("next","-double")),onClick:u[6]||(u[6]=j=>v.nextYear("right"))},[i.createVNode(R,{type:"ios-arrow-forward"})],2),C.rightPickerTable==="date-table"?i.withDirectives((i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass(l.iconBtnCls("next")),onClick:u[7]||(u[7]=j=>v.nextMonth("right"))},[i.createVNode(R,{type:"ios-arrow-forward"})],2)),[[i.vShow,C.currentView==="date"]]):i.createCommentVNode("",!0)],2),[[i.vShow,C.currentView!=="time"]]),C.currentView!=="time"?(i.openBlock(),i.createBlock(i.resolveDynamicComponent(C.rightPickerTable),{key:0,ref:"rightYearTable","table-date":C.rightPanelDate,"selection-mode":"range","range-state":C.rangeState,"disabled-date":l.disabledDate,"show-week-numbers":l.showWeekNumbers,"model-value":v.preSelecting.right?[C.dates[C.dates.length-1]]:C.dates,"focused-date":l.focusedDate,onOnChangeRange:v.handleChangeRange,onOnPick:v.panelPickerHandlers.right,onOnPickClick:l.handlePickClick},null,40,["table-date","range-state","disabled-date","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):i.createCommentVNode("",!0)],2),[[i.vShow,!l.isTime]]),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content"])},[C.currentView==="time"?(i.openBlock(),i.createBlock(G,i.mergeProps({key:0,ref:"timePicker","model-value":C.dates,format:l.format,"time-disabled":v.timeDisabled},l.timePickerOptions,{onOnPick:v.handleRangePick,onOnPickClick:l.handlePickClick,onOnPickClear:l.handlePickClear,onOnPickSuccess:l.handlePickSuccess,onOnPickToggleTime:l.handleToggleTime}),null,16,["model-value","format","time-disabled","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):i.createCommentVNode("",!0)],2),[[i.vShow,l.isTime]]),l.confirm?(i.openBlock(),i.createBlock(W,{key:0,"show-time":l.showTime,"is-time":l.isTime,"time-disabled":v.timeDisabled,onOnPickToggleTime:l.handleToggleTime,onOnPickClear:l.handlePickClear,onOnPickSuccess:l.handlePickSuccess},null,8,["show-time","is-time","time-disabled","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):i.createCommentVNode("",!0)],2)],34)}var DJ=c(AJ,[["render",IJ]]),u5={name:"CalendarPicker",mixins:[W4],props:{type:{validator(l){return _(l,["year","month","date","daterange","datetime","datetimerange"])},default:"date"}},components:{DatePickerPanel:MJ,RangeDatePickerPanel:DJ},computed:{panel(){return this.type==="daterange"||this.type==="datetimerange"?"RangeDatePickerPanel":"DatePickerPanel"},ownPickerProps(){return this.options}}},NJ={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};const d5={name:"Description",inject:["DescriptionListInstance"],props:{term:{type:String}},computed:{styles(){let l={};return this.DescriptionListInstance.gutter!==0&&(l={paddingLeft:this.DescriptionListInstance.gutter/2+"px",paddingRight:this.DescriptionListInstance.gutter/2+"px"}),l}},render(){let l;(this.term||this.$slots.term)&&(this.$slots.term?l=i.h("div",{class:"ivu-description-term"},this.$slots.term()):l=i.h("div",{class:"ivu-description-term"},this.term));const u=i.h("div",{class:"ivu-description-detail"},this.$slots.default()),m=l?[l,u]:[u];return i.h(Ba,{...NJ[this.DescriptionListInstance.col],style:this.styles},()=>m)}},$J={name:"DescriptionList",components:{Row:wc},provide(){return{DescriptionListInstance:this}},props:{layout:{validator(l){return _(l,["horizontal","vertical"])},default:"horizontal"},title:{type:String},gutter:{type:Number,default:32},col:{validator(l){return _(l,[1,2,3,4])},default:3}}},VJ={key:0,class:"ivu-description-list-title"};function LJ(l,u,m,k,C,v){const R=i.resolveComponent("Row");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-description-list",{"ivu-description-list-vertical":m.layout==="vertical"}])},[m.title||l.$slots.title?(i.openBlock(),i.createElementBlock("div",VJ,[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])])):i.createCommentVNode("",!0),i.createVNode(R,{gutter:m.gutter},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"default")]),_:3},8,["gutter"])],2)}var f5=c($J,[["render",LJ]]);const Cc="ivu-divider",BJ={name:"Divider",props:{type:{type:String,default:"horizontal",validator(l){return _(l,["horizontal","vertical"])}},orientation:{type:String,default:"center",validator(l){return _(l,["left","right","center"])}},dashed:{type:Boolean,default:!1},size:{validator(l){return _(l,["small","default"])},default:"default"},plain:{type:Boolean,default:!1}},computed:{hasSlot(){return!!this.$slots.default},classes(){return[`${Cc}`,`${Cc}-${this.type}`,`${Cc}-${this.size}`,{[`${Cc}-with-text`]:this.hasSlot&&this.orientation==="center",[`${Cc}-with-text-${this.orientation}`]:this.hasSlot,[`${Cc}-dashed`]:!!this.dashed,[`${Cc}-plain`]:this.plain}]},slotClasses(){return[`${Cc}-inner-text`]}}};function UJ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[v.hasSlot?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(v.slotClasses)},[i.renderSlot(l.$slots,"default")],2)):i.createCommentVNode("",!0)],2)}var t1=c(BJ,[["render",UJ]]),_S={props:{lockScroll:{type:Boolean,default:!0}},methods:{checkScrollBar(){if(!s)return;let l=window.innerWidth;if(!l){const u=document.documentElement.getBoundingClientRect();l=u.right-Math.abs(u.left)}this.bodyIsOverflowing=document.body.clientWidth<l,this.bodyIsOverflowing&&(this.scrollBarWidth=T())},checkMaskInVisible(){let l=s?document.getElementsByClassName("ivu-modal-mask")||[]:[];return Array.from(l).every(u=>u.style.display==="none"||u.classList.contains("fade-leave-to"))},setScrollBar(){s&&this.bodyIsOverflowing&&this.scrollBarWidth!==void 0&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){s&&(document.body.style.paddingRight="")},addScrollEffect(){!this.lockScroll||(this.checkScrollBar(),this.setScrollBar(),s&&(document.body.style.overflow="hidden"))},removeScrollEffect(){!this.lockScroll||s&&this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}};const ms="ivu-drawer",FJ={name:"Drawer",mixins:[_S],components:{Icon:S},emits:["on-close","on-resize-width","on-visible-change","update:modelValue","on-drag"],provide(){return{DrawerInstance:this}},props:{modelValue:{type:Boolean,default:!1},title:{type:String},width:{type:[Number,String],default:256},height:{type:[Number,String],default:256},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskStyle:{type:Object},styles:{type:Object},scrollable:{type:Boolean,default:!1},placement:{validator(l){return _(l,["left","right","top","bottom"])},default:"right"},zIndex:{type:Number,default:1e3},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!0:l.$VIEWUI.transfer}},className:{type:String},inner:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},beforeClose:Function},data(){return{prefixCls:ms,visible:this.modelValue,wrapShow:!1,showHead:!0,canMove:!1,dragWidth:this.width,dragHeight:this.height,wrapperWidth:this.width,wrapperHeight:this.height,wrapperLeft:0,minWidth:256,minHeight:256,id:te(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${ms}-wrap`,{[`${ms}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${ms}-no-mask`]:!this.mask,[`${ms}-wrap-inner`]:this.inner,[`${ms}-wrap-dragging`]:this.canMove}]},wrapStyles(){return{zIndex:this.zIndex}},mainStyles(){let l={};if(this.placement==="left"||this.placement==="right"){const u=parseInt(this.dragWidth),m={width:u<=100?`${u}%`:`${u}px`};Object.assign(l,m)}else{const u=parseInt(this.dragHeight),m={height:u<=100?`${u}%`:`${u}px`};Object.assign(l,m)}return l},contentClasses(){return[`${ms}-content`,{[`${ms}-content-no-mask`]:!this.mask}]},classes(){return[`${ms}`,`${ms}-${this.placement}`,{[`${ms}-no-header`]:!this.showHead,[`${ms}-inner`]:this.inner}]},maskClasses(){return[`${ms}-mask`,{[`${ms}-mask-inner`]:this.inner}]},transitionName(){return this.placement==="left"||this.placement==="right"?`move-${this.placement}`:this.placement==="top"?"move-up":"move-down"}},methods:{close(){if(!this.beforeClose)return this.handleClose();const l=this.beforeClose();l&&l.then?l.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-close")},handleMask(){this.maskClosable&&this.mask&&this.close()},handleWrapClick(l){const u=l.target.getAttribute("class");u&&u.indexOf(`${ms}-wrap`)>-1&&this.handleMask()},handleMousemove(l){if(!this.canMove||!this.draggable)return;this.handleSetWrapperWidth();const u=l.pageX-this.wrapperLeft;let m=this.placement==="right"?this.wrapperWidth-u:u;m=Math.max(m,parseFloat(this.minWidth)),l.atMin=m===parseFloat(this.minWidth),m<=100&&(m=m/this.wrapperWidth*100),this.dragWidth=m,this.$emit("on-resize-width",parseInt(this.dragWidth)),this.$emit("on-drag","dragging",parseInt(this.dragWidth))},handleSetWrapperWidth(){const{width:l,left:u}=this.$refs.drawer.getBoundingClientRect();this.wrapperWidth=l,this.wrapperLeft=u},handleMouseup(){!this.draggable||(this.canMove=!1,this.$emit("on-drag","end"))},handleTriggerMousedown(){this.canMove=!0,window.getSelection().removeAllRanges(),this.$emit("on-drag","start")},addDrawer(){const l=this.$root;l.drawerList||(l.drawerList=[]),l.drawerList.push({id:this.id,drawer:this})},removeDrawer(){const l=this.$root;if(!l.drawerList)return;const u=l.drawerList.findIndex(m=>m.id===this.id);l.drawerList.splice(u,1)}},mounted(){this.visible&&(this.wrapShow=!0);let l=!0;this.$slots.header===void 0&&!this.title&&(l=!1),this.showHead=l,this.addDrawer(),o(document,"mousemove",this.handleMousemove),o(document,"mouseup",this.handleMouseup),this.handleSetWrapperWidth()},beforeUnmount(){this.removeDrawer(),a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup),this.removeScrollEffect()},watch:{modelValue(l){this.visible=l},visible(l){l===!1?this.timer=setTimeout(()=>{this.wrapShow=!1,this.$root.drawerList.map(u=>u.drawer).filter(u=>u.id!==this.id).some(u=>u.visible&&!u.scrollable)||this.removeScrollEffect()},300):(this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(u=>{u.table.handleOnVisibleChange(l)}),this.sliderList.forEach(u=>{u.slider.handleOnVisibleChange(l)}),this.$emit("on-visible-change",l)},scrollable(l){l?this.removeScrollEffect():this.addScrollEffect()},title(l){this.$slots.header===void 0&&(this.showHead=!!l)},width(l){this.dragWidth=l},height(l){this.dragHeight=l}}},zJ={ref:"drawer"},XJ=i.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger"},[i.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger-point"},[i.createElementVNode("i"),i.createElementVNode("i"),i.createElementVNode("i"),i.createElementVNode("i"),i.createElementVNode("i")])],-1);function WJ(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createBlock(i.Teleport,{to:"body",disabled:!m.transfer},[i.createElementVNode("div",zJ,[i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[m.mask?i.withDirectives((i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.maskClasses),style:i.normalizeStyle(m.maskStyle),onClick:u[0]||(u[0]=(...B)=>v.handleMask&&v.handleMask(...B))},null,6)),[[i.vShow,C.visible]]):i.createCommentVNode("",!0)]),_:1}),i.createElementVNode("div",{class:i.normalizeClass(v.wrapClasses),style:i.normalizeStyle(v.wrapStyles),onClick:u[3]||(u[3]=(...B)=>v.handleWrapClick&&v.handleWrapClick(...B))},[i.createVNode(i.Transition,{name:v.transitionName},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.mainStyles)},[i.createElementVNode("div",{class:i.normalizeClass(v.contentClasses),ref:"content"},[m.closable?(i.openBlock(),i.createElementBlock("a",{key:0,class:"ivu-drawer-close",onClick:u[1]||(u[1]=(...B)=>v.close&&v.close(...B))},[i.renderSlot(l.$slots,"close",{},()=>[i.createVNode(R,{type:"ios-close"})])])):i.createCommentVNode("",!0),C.showHead?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass([C.prefixCls+"-header"])},[i.renderSlot(l.$slots,"header",{},()=>[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-header-inner"])},i.toDisplayString(m.title),3)])],2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"]),style:i.normalizeStyle(m.styles)},[i.renderSlot(l.$slots,"default")],6)],2),m.draggable&&(m.placement==="left"||m.placement==="right")?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(["ivu-drawer-drag","ivu-drawer-drag-"+m.placement]),onMousedown:u[2]||(u[2]=(...B)=>v.handleTriggerMousedown&&v.handleTriggerMousedown(...B))},[i.renderSlot(l.$slots,"trigger",{},()=>[XJ])],34)):i.createCommentVNode("",!0)],6),[[i.vShow,C.visible]])]),_:3},8,["name"])],6)],512)],8,["disabled"])}var p5=c(FJ,[["render",WJ]]);const i1="ivu-dropdown-item",QJ={name:"DropdownItem",props:{name:{type:[String,Number]},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},divided:{type:Boolean,default:!1}},computed:{classes(){return[`${i1}`,{[`${i1}-disabled`]:this.disabled,[`${i1}-selected`]:this.selected,[`${i1}-divided`]:this.divided}]}},methods:{handleClick(){if(this.disabled)return;const l=V(this,"Dropdown");this.$parent&&this.$parent.$options.name==="Dropdown"?this.$parent.handleHaschildClick():l&&l.$options.name==="Dropdown"&&l.handleHoverClick(),l.handleItemClick(this.name)}}};function HJ(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.classes),onClick:u[0]||(u[0]=(...R)=>v.handleClick&&v.handleClick(...R))},[i.renderSlot(l.$slots,"default")],2)}var m5=c(QJ,[["render",HJ]]);const GJ=(l="")=>l.split("").reduce((u,m)=>{const k=m.charCodeAt(0);return k>=0&&k<=128?u+1:u+2},0),YJ=(l="",u)=>{let m=0;return l.split("").reduce((k,C)=>{const v=C.charCodeAt(0);return v>=0&&v<=128?m+=1:m+=2,m<=u?k+C:k},"")},jJ={name:"Ellipsis",components:{Tooltip:Ol},emits:["on-show","on-hide"],props:{text:{type:String},height:{type:Number},lines:{type:Number},length:{type:Number},fullWidthRecognition:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},theme:{validator(l){return _(l,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"}},data(){return{oversize:!1,computedReady:!1,computedText:""}},watch:{disabled(){this.init()},text(){this.init()},height(){this.init()}},mounted(){this.init()},methods:{init(){this.disabled||(this.computeText(),this.limitShow())},computeText(){this.oversize=!1,this.computedReady=!1,i.nextTick(()=>{let l=this.$refs.text,u=this.$el,m=this.$refs.more,k=1e3,C=this.text,v=this.height;if(!v&&this.lines&&(v=parseInt(D(u,"lineHeight"),10)*this.lines),l){if(this.length)(this.fullWidthRecognition?GJ(C):C.length)>this.length&&(this.oversize=!0,m.style.display="inline-block",C=this.fullWidthRecognition?YJ(C,this.length):C.slice(0,this.length));else if(u.offsetHeight>v)for(this.oversize=!0,m.style.display="inline-block";u.offsetHeight>v&&k>0;)u.offsetHeight>v*3?l.innerText=C=C.substring(0,Math.floor(C.length/2)):l.innerText=C=C.substring(0,C.length-1),k--}this.computedText=C})},limitShow(){this.computedReady=!0,i.nextTick(()=>{let l=this.$refs.text,u=this.$el;l&&(l.innerText=this.computedText,u.offsetHeight>this.height?this.$emit("on-hide"):this.$emit("on-show"))})}}},qJ={class:"ivu-ellipsis"},ZJ={class:"ivu-ellipsis-more",ref:"more"},KJ={class:"ivu-ellipsis-more",ref:"more"},JJ={key:1,class:"ivu-ellipsis-hidden"},eee={class:"ivu-ellipsis-more",ref:"more"};function tee(l,u,m,k,C,v){const R=i.resolveComponent("Tooltip");return i.openBlock(),i.createElementBlock("div",qJ,[i.renderSlot(l.$slots,"prefix",{class:"ivu-ellipsis-prefix"}),C.computedReady?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[m.tooltip?(i.openBlock(),i.createBlock(R,{key:0,content:m.text,theme:m.theme,"max-width":m.maxWidth,placement:m.placement,transfer:m.transfer},{default:i.withCtx(()=>[i.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},i.toDisplayString(m.text),513),i.withDirectives(i.createElementVNode("span",ZJ,[i.renderSlot(l.$slots,"more",{},()=>[i.createTextVNode("...")])],512),[[i.vShow,C.oversize]]),i.renderSlot(l.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]),_:3},8,["content","theme","max-width","placement","transfer"])):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},i.toDisplayString(m.text),513),i.withDirectives(i.createElementVNode("span",KJ,[i.renderSlot(l.$slots,"more",{},()=>[i.createTextVNode("...")])],512),[[i.vShow,C.oversize]]),i.renderSlot(l.$slots,"suffix",{class:"ivu-ellipsis-suffix"})],64))],64)):(i.openBlock(),i.createElementBlock("div",JJ,[i.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},i.toDisplayString(m.text),513),i.withDirectives(i.createElementVNode("span",eee,[i.renderSlot(l.$slots,"more",{},()=>[i.createTextVNode("...")])],512),[[i.vShow,C.oversize]]),i.renderSlot(l.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]))])}var g5=c(jJ,[["render",tee]]);const y5={name:"Email",mixins:[xm],data(){return{className:"ivu-login-mail",prefix:"ios-mail-outline",placeholder:"请输入邮箱",type:"email"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:rS.Email,trigger:"change"},{type:"email",message:"输入的邮箱格式不正确！",trigger:"change"}]}}}};var n1={403:{img:"https://file.iviewui.com/iview-pro/icon-403.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-403-color.svg",title:"403",desc:"抱歉，你无权访问该页面"},404:{img:"https://file.iviewui.com/iview-pro/icon-404.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-404-color.svg",title:"404",desc:"抱歉，你访问的页面不存在"},500:{img:"https://file.iviewui.com/iview-pro/icon-500.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-500-color.svg",title:"500",desc:"抱歉，服务器出错了"}};const iee={name:"Exception",components:{Button:fs},props:{type:{validator(l){return _(l,["403","404","500",403,404,500])},default:"404"},title:{type:String},desc:{type:String},img:{type:String},imgColor:{type:Boolean,default:!1},backText:{type:String,default:"返回首页"},redirect:{type:String,default:"/"}},computed:{imgPath(){return this.img?this.img:this.imgColor?n1[this.type].imgColor:n1[this.type].img},titleText(){return this.title?this.title:n1[this.type].title},descText(){return this.desc?this.desc:n1[this.type].desc}}},nee={class:"ivu-exception"},ree={class:"ivu-exception-img"},see={class:"ivu-exception-content"},oee={class:"ivu-exception-content-desc"},aee={class:"ivu-exception-content-actions"};function lee(l,u,m,k,C,v){const R=i.resolveComponent("Button");return i.openBlock(),i.createElementBlock("div",nee,[i.createElementVNode("div",ree,[i.createElementVNode("div",{class:"ivu-exception-img-element",style:i.normalizeStyle({"background-image":"url("+v.imgPath+")"})},null,4)]),i.createElementVNode("div",see,[i.createElementVNode("h1",null,[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(v.titleText),1)])]),i.createElementVNode("div",oee,[i.renderSlot(l.$slots,"desc",{},()=>[i.createTextVNode(i.toDisplayString(v.descText),1)])]),i.createElementVNode("div",aee,[i.renderSlot(l.$slots,"actions",{},()=>[i.createVNode(R,{to:m.redirect,type:"primary",size:"large"},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(m.backText),1)]),_:1},8,["to"])])])])])}var v5=c(iee,[["render",lee]]);const cee="ivu-layout",hee={name:"Footer",computed:{wrapClasses(){return`${cee}-footer`}}};function uee(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[i.renderSlot(l.$slots,"default")],2)}var SS=c(hee,[["render",uee]]);const dee={name:"FooterToolbar",props:{extra:{type:String}}},fee={class:"ivu-footer-toolbar"},pee={key:0,class:"ivu-footer-toolbar-left"},mee={class:"ivu-footer-toolbar-right"};function gee(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",fee,[m.extra||l.$slots.extra?(i.openBlock(),i.createElementBlock("div",pee,[i.renderSlot(l.$slots,"extra",{},()=>[i.createTextVNode(i.toDisplayString(m.extra),1)])])):i.createCommentVNode("",!0),i.createElementVNode("div",mee,[i.renderSlot(l.$slots,"default")])])}var b5=c(dee,[["render",gee]]);const r1="ivu-form",yee={name:"iForm",emits:["on-validate"],provide(){return{FormInstance:this}},props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{validator(l){return _(l,["left","right","top"])},default:"right"},inline:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},autocomplete:{validator(l){return _(l,["on","off"])},default:"off"},hideRequiredMark:{type:Boolean,default:!1},labelColon:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1}},data(){return{fields:[]}},computed:{classes(){return[`${r1}`,`${r1}-label-${this.labelPosition}`,{[`${r1}-inline`]:this.inline,[`${r1}-hide-required-mark`]:this.hideRequiredMark}]},colon(){let l="";return this.labelColon&&(l=typeof this.labelColon=="boolean"?":":this.labelColon),l}},methods:{resetFields(){this.fields.forEach(l=>{l.resetField()})},validate(l){return new Promise(u=>{let m=!0,k=0;this.fields.length===0&&(u(m),typeof l=="function"&&l(m)),this.fields.forEach(C=>{C.validate("",v=>{v&&(m=!1),++k===this.fields.length&&(u(m),typeof l=="function"&&l(m))})})})},validateField(l,u){const m=this.fields.filter(k=>k.prop===l)[0];if(!m)throw new Error("[View UI warn]: must call validateField with valid prop string!");m.validate("",u)},addField(l){l&&this.fields.push(l)},removeField(l){l.prop&&this.fields.splice(this.fields.indexOf(l),1)}},watch:{rules(){this.validate()}}},vee=["autocomplete"];function bee(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("form",{class:i.normalizeClass(v.classes),autocomplete:m.autocomplete},[i.renderSlot(l.$slots,"default")],10,vee)}var s1=c(yee,[["render",bee]]);const xee={name:"GlobalFooter",components:{Icon:S},props:{links:{type:Array,default(){return[]}},copyright:{type:String}}},Oee={class:"ivu-global-footer"},wee={key:0,class:"ivu-global-footer-links"},_ee=["href","target","title"],See={key:1,class:"ivu-global-footer-copyright"};function Cee(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("footer",Oee,[m.links.length||l.$slots.links?(i.openBlock(),i.createElementBlock("div",wee,[i.renderSlot(l.$slots,"links",{},()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.links,B=>(i.openBlock(),i.createElementBlock("a",{href:B.href,target:B.blankTarget?"_blank":"_self",key:B.key,title:B.title},[B.icon?(i.openBlock(),i.createBlock(R,{key:0,type:B.icon},null,8,["type"])):B.customIcon?(i.openBlock(),i.createBlock(R,{key:1,custom:B.customIcon},null,8,["custom"])):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(B.title),1)],8,_ee))),128))])])):i.createCommentVNode("",!0),m.copyright||l.$slots.copyright?(i.openBlock(),i.createElementBlock("div",See,[i.renderSlot(l.$slots,"copyright",{},()=>[i.createTextVNode(i.toDisplayString(m.copyright),1)])])):i.createCommentVNode("",!0)])}var x5=c(xee,[["render",Cee]]),CS={exports:{}},kee=CS.exports={};kee.forEach=function(l,u){for(var m=0;m<l.length;m++){var k=u(l[m]);if(k)return k}};var Tee=function(l){var u=l.stateHandler.getState;function m(R){var B=u(R);return B&&!!B.isDetectable}function k(R){u(R).isDetectable=!0}function C(R){return!!u(R).busy}function v(R,B){u(R).busy=!!B}return{isDetectable:m,markAsDetectable:k,isBusy:C,markBusy:v}},Mee=function(l){var u={};function m(R){var B=l.get(R);return B===void 0?[]:u[B]||[]}function k(R,B){var G=l.get(R);u[G]||(u[G]=[]),u[G].push(B)}function C(R,B){for(var G=m(R),W=0,j=G.length;W<j;++W)if(G[W]===B){G.splice(W,1);break}}function v(R){var B=m(R);!B||(B.length=0)}return{get:m,add:k,removeListener:C,removeAllListeners:v}},Eee=function(){var l=1;function u(){return l++}return{generate:u}},Pee=function(l){var u=l.idGenerator,m=l.stateHandler.getState;function k(v){var R=m(v);return R&&R.id!==void 0?R.id:null}function C(v){var R=m(v);if(!R)throw new Error("setId required the element to have a resize detection state.");var B=u.generate();return R.id=B,B}return{get:k,set:C}},Aee=function(l){function u(){}var m={log:u,warn:u,error:u};if(!l&&window.console){var k=function(C,v){C[v]=function(){var R=console[v];if(R.apply)R.apply(console,arguments);else for(var B=0;B<arguments.length;B++)R(arguments[B])}};k(m,"log"),k(m,"warn"),k(m,"error")}return m},kS={exports:{}},O5=kS.exports={};O5.isIE=function(l){function u(){var k=navigator.userAgent.toLowerCase();return k.indexOf("msie")!==-1||k.indexOf("trident")!==-1||k.indexOf(" edge/")!==-1}if(!u())return!1;if(!l)return!0;var m=function(){var k,C=3,v=document.createElement("div"),R=v.getElementsByTagName("i");do v.innerHTML="<!--[if gt IE "+ ++C+"]><i></i><![endif]-->";while(R[0]);return C>4?C:k}();return l===m},O5.isLegacyOpera=function(){return!!window.opera};var w5={exports:{}},Ree=w5.exports={};Ree.getOption=Iee;function Iee(l,u,m){var k=l[u];return k==null&&m!==void 0?m:k}var _5=w5.exports,Dee=function(l){l=l||{};var u=l.reporter,m=_5.getOption(l,"async",!0),k=_5.getOption(l,"auto",!0);k&&!m&&(u&&u.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),m=!0);var C=S5(),v,R=!1;function B(xe,ye){!R&&k&&m&&C.size()===0&&j(),C.add(xe,ye)}function G(){for(R=!0;C.size();){var xe=C;C=S5(),xe.process()}R=!1}function W(xe){R||(xe===void 0&&(xe=m),v&&(ce(v),v=null),xe?j():G())}function j(){v=Oe(G)}function ce(xe){var ye=clearTimeout;return ye(xe)}function Oe(xe){var ye=function(oe){return setTimeout(oe,0)};return ye(xe)}return{add:B,force:W}};function S5(){var l={},u=0,m=0,k=0;function C(B,G){G||(G=B,B=0),B>m?m=B:B<k&&(k=B),l[B]||(l[B]=[]),l[B].push(G),u++}function v(){for(var B=k;B<=m;B++)for(var G=l[B],W=0;W<G.length;W++){var j=G[W];j()}}function R(){return u}return{add:C,process:v,size:R}}var TS="_erd";function Nee(l){return l[TS]={},C5(l)}function C5(l){return l[TS]}function $ee(l){delete l[TS]}var Vee={initState:Nee,getState:C5,cleanState:$ee},Rm=kS.exports,Lee=function(l){l=l||{};var u=l.reporter,m=l.batchProcessor,k=l.stateHandler.getState;if(!u)throw new Error("Missing required dependency: reporter.");function C(W,j){function ce(){j(W)}if(Rm.isIE(8))k(W).object={proxy:ce},W.attachEvent("onresize",ce);else{var Oe=B(W);if(!Oe)throw new Error("Element is not detectable by this strategy.");Oe.contentDocument.defaultView.addEventListener("resize",ce)}}function v(W){var j=l.important?" !important; ":"; ";return(W.join(j)+j).trim()}function R(W,j,ce){ce||(ce=j,j=W,W=null),W=W||{},W.debug;function Oe(xe,ye){var oe=v(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Re=!1,Lt=window.getComputedStyle(xe),yt=xe.offsetWidth,wt=xe.offsetHeight;k(xe).startSize={width:yt,height:wt};function Ge(){function Ne(){if(Lt.position==="static"){xe.style.setProperty("position","relative",W.important?"important":"");var Qt=function(Ht,Pt,_t,Dt){function jt(vt){return vt.replace(/[^-\d\.]/g,"")}var At=_t[Dt];At!=="auto"&&jt(At)!=="0"&&(Ht.warn("An element that is positioned static has style."+Dt+"="+At+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Dt+" will be set to 0. Element: ",Pt),Pt.style.setProperty(Dt,"0",W.important?"important":""))};Qt(u,xe,Lt,"top"),Qt(u,xe,Lt,"right"),Qt(u,xe,Lt,"bottom"),Qt(u,xe,Lt,"left")}}function Je(){Re||Ne();function Qt(Pt,_t){if(!Pt.contentDocument){var Dt=k(Pt);Dt.checkForObjectDocumentTimeoutId&&window.clearTimeout(Dt.checkForObjectDocumentTimeoutId),Dt.checkForObjectDocumentTimeoutId=setTimeout(function(){Dt.checkForObjectDocumentTimeoutId=0,Qt(Pt,_t)},100);return}_t(Pt.contentDocument)}var Ht=this;Qt(Ht,function(Pt){ye(xe)})}Lt.position!==""&&(Ne(),Re=!0);var je=document.createElement("object");je.style.cssText=oe,je.tabIndex=-1,je.type="text/html",je.setAttribute("aria-hidden","true"),je.onload=Je,Rm.isIE()||(je.data="about:blank"),k(xe)&&(xe.appendChild(je),k(xe).object=je,Rm.isIE()&&(je.data="about:blank"))}m?m.add(Ge):Ge()}Rm.isIE(8)?ce(j):Oe(j,ce)}function B(W){return k(W).object}function G(W){if(k(W)){var j=B(W);!j||(Rm.isIE(8)?W.detachEvent("onresize",j.proxy):W.removeChild(j),k(W).checkForObjectDocumentTimeoutId&&window.clearTimeout(k(W).checkForObjectDocumentTimeoutId),delete k(W).object)}}return{makeDetectable:R,addListener:C,uninstall:G}},Bee=CS.exports.forEach,Uee=function(l){l=l||{};var u=l.reporter,m=l.batchProcessor,k=l.stateHandler.getState;l.stateHandler.hasState;var C=l.idHandler;if(!m)throw new Error("Missing required dependency: batchProcessor");if(!u)throw new Error("Missing required dependency: reporter.");var v=j(),R="erd_scroll_detection_scrollbar_style",B="erd_scroll_detection_container";function G(Ge){ce(Ge,R,B)}G(window.document);function W(Ge){var Ne=l.important?" !important; ":"; ";return(Ge.join(Ne)+Ne).trim()}function j(){var Ge=500,Ne=500,Je=document.createElement("div");Je.style.cssText=W(["position: absolute","width: "+Ge*2+"px","height: "+Ne*2+"px","visibility: hidden","margin: 0","padding: 0"]);var je=document.createElement("div");je.style.cssText=W(["position: absolute","width: "+Ge+"px","height: "+Ne+"px","overflow: scroll","visibility: none","top: "+-Ge*3+"px","left: "+-Ne*3+"px","visibility: hidden","margin: 0","padding: 0"]),je.appendChild(Je),document.body.insertBefore(je,document.body.firstChild);var Qt=Ge-je.clientWidth,Ht=Ne-je.clientHeight;return document.body.removeChild(je),{width:Qt,height:Ht}}function ce(Ge,Ne,Je){function je(_t,Dt){Dt=Dt||function(At){Ge.head.appendChild(At)};var jt=Ge.createElement("style");return jt.innerHTML=_t,jt.id=Ne,Dt(jt),jt}if(!Ge.getElementById(Ne)){var Qt=Je+"_animation",Ht=Je+"_animation_active",Pt=`/* Created by the element-resize-detector library. */
`;Pt+="."+Je+" > div::-webkit-scrollbar { "+W(["display: none"])+` }

`,Pt+="."+Ht+" { "+W(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+Qt,"animation-name: "+Qt])+` }
`,Pt+="@-webkit-keyframes "+Qt+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,Pt+="@keyframes "+Qt+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",je(Pt)}}function Oe(Ge){Ge.className+=" "+B+"_animation_active"}function xe(Ge,Ne,Je){if(Ge.addEventListener)Ge.addEventListener(Ne,Je);else if(Ge.attachEvent)Ge.attachEvent("on"+Ne,Je);else return u.error("[scroll] Don't know how to add event listeners.")}function ye(Ge,Ne,Je){if(Ge.removeEventListener)Ge.removeEventListener(Ne,Je);else if(Ge.detachEvent)Ge.detachEvent("on"+Ne,Je);else return u.error("[scroll] Don't know how to remove event listeners.")}function oe(Ge){return k(Ge).container.childNodes[0].childNodes[0].childNodes[0]}function Re(Ge){return k(Ge).container.childNodes[0].childNodes[0].childNodes[1]}function Lt(Ge,Ne){var Je=k(Ge).listeners;if(!Je.push)throw new Error("Cannot add listener to an element that is not detectable.");k(Ge).listeners.push(Ne)}function yt(Ge,Ne,Je){Je||(Je=Ne,Ne=Ge,Ge=null),Ge=Ge||{};function je(){if(Ge.debug){var Ct=Array.prototype.slice.call(arguments);if(Ct.unshift(C.get(Ne),"Scroll: "),u.log.apply)u.log.apply(null,Ct);else for(var ei=0;ei<Ct.length;ei++)u.log(Ct[ei])}}function Qt(Ct){function ei(Pi){var Er=Pi.getRootNode&&Pi.getRootNode().contains(Pi);return Pi===Pi.ownerDocument.body||Pi.ownerDocument.body.contains(Pi)||Er}return!ei(Ct)||window.getComputedStyle(Ct)===null}function Ht(Ct){var ei=k(Ct).container.childNodes[0],Pi=window.getComputedStyle(ei);return!Pi.width||Pi.width.indexOf("px")===-1}function Pt(){var Ct=window.getComputedStyle(Ne),ei={};return ei.position=Ct.position,ei.width=Ne.offsetWidth,ei.height=Ne.offsetHeight,ei.top=Ct.top,ei.right=Ct.right,ei.bottom=Ct.bottom,ei.left=Ct.left,ei.widthCSS=Ct.width,ei.heightCSS=Ct.height,ei}function _t(){var Ct=Pt();k(Ne).startSize={width:Ct.width,height:Ct.height},je("Element start size",k(Ne).startSize)}function Dt(){k(Ne).listeners=[]}function jt(){if(je("storeStyle invoked."),!k(Ne)){je("Aborting because element has been uninstalled");return}var Ct=Pt();k(Ne).style=Ct}function At(Ct,ei,Pi){k(Ct).lastWidth=ei,k(Ct).lastHeight=Pi}function vt(Ct){return oe(Ct).childNodes[0]}function ut(){return 2*v.width+1}function Nt(){return 2*v.height+1}function Ot(Ct){return Ct+10+ut()}function ii(Ct){return Ct+10+Nt()}function ai(Ct){return Ct*2+ut()}function ji(Ct){return Ct*2+Nt()}function hn(Ct,ei,Pi){var Er=oe(Ct),gs=Re(Ct),Ml=Ot(ei),$c=ii(Pi),ys=ai(ei),Ji=ji(Pi);Er.scrollLeft=Ml,Er.scrollTop=$c,gs.scrollLeft=ys,gs.scrollTop=Ji}function Mn(){var Ct=k(Ne).container;if(!Ct){Ct=document.createElement("div"),Ct.className=B,Ct.style.cssText=W(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),k(Ne).container=Ct,Oe(Ct),Ne.appendChild(Ct);var ei=function(){k(Ne).onRendered&&k(Ne).onRendered()};xe(Ct,"animationstart",ei),k(Ne).onAnimationStart=ei}return Ct}function Dn(){function Ct(){var ir=k(Ne).style;if(ir.position==="static"){Ne.style.setProperty("position","relative",Ge.important?"important":"");var ma=function(El,ga,S1,Vc){function nC(rC){return rC.replace(/[^-\d\.]/g,"")}var Ym=S1[Vc];Ym!=="auto"&&nC(Ym)!=="0"&&(El.warn("An element that is positioned static has style."+Vc+"="+Ym+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Vc+" will be set to 0. Element: ",ga),ga.style[Vc]=0)};ma(u,Ne,ir,"top"),ma(u,Ne,ir,"right"),ma(u,Ne,ir,"bottom"),ma(u,Ne,ir,"left")}}function ei(ir,ma,El,ga){return ir=ir?ir+"px":"0",ma=ma?ma+"px":"0",El=El?El+"px":"0",ga=ga?ga+"px":"0",["left: "+ir,"top: "+ma,"right: "+ga,"bottom: "+El]}if(je("Injecting elements"),!k(Ne)){je("Aborting because element has been uninstalled");return}Ct();var Pi=k(Ne).container;Pi||(Pi=Mn());var Er=v.width,gs=v.height,Ml=W(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),$c=W(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(ei(-(1+Er),-(1+gs),-gs,-Er))),ys=W(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Ji=W(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),$s=W(["position: absolute","left: 0","top: 0"]),fa=W(["position: absolute","width: 200%","height: 200%"]),ho=document.createElement("div"),pa=document.createElement("div"),Zd=document.createElement("div"),O1=document.createElement("div"),Kd=document.createElement("div"),w1=document.createElement("div");ho.dir="ltr",ho.style.cssText=Ml,ho.className=B,pa.className=B,pa.style.cssText=$c,Zd.style.cssText=ys,O1.style.cssText=$s,Kd.style.cssText=Ji,w1.style.cssText=fa,Zd.appendChild(O1),Kd.appendChild(w1),pa.appendChild(Zd),pa.appendChild(Kd),ho.appendChild(pa),Pi.appendChild(ho);function _1(){var ir=k(Ne);ir&&ir.onExpand?ir.onExpand():je("Aborting expand scroll handler: element has been uninstalled")}function Gm(){var ir=k(Ne);ir&&ir.onShrink?ir.onShrink():je("Aborting shrink scroll handler: element has been uninstalled")}xe(Zd,"scroll",_1),xe(Kd,"scroll",Gm),k(Ne).onExpandScroll=_1,k(Ne).onShrinkScroll=Gm}function $r(){function Ct(ys,Ji,$s){var fa=vt(ys),ho=Ot(Ji),pa=ii($s);fa.style.setProperty("width",ho+"px",Ge.important?"important":""),fa.style.setProperty("height",pa+"px",Ge.important?"important":"")}function ei(ys){var Ji=Ne.offsetWidth,$s=Ne.offsetHeight,fa=Ji!==k(Ne).lastWidth||$s!==k(Ne).lastHeight;je("Storing current size",Ji,$s),At(Ne,Ji,$s),m.add(0,function(){if(fa){if(!k(Ne)){je("Aborting because element has been uninstalled");return}if(!Pi()){je("Aborting because element container has not been initialized");return}if(Ge.debug){var ho=Ne.offsetWidth,pa=Ne.offsetHeight;(ho!==Ji||pa!==$s)&&u.warn(C.get(Ne),"Scroll: Size changed before updating detector elements.")}Ct(Ne,Ji,$s)}}),m.add(1,function(){if(!k(Ne)){je("Aborting because element has been uninstalled");return}if(!Pi()){je("Aborting because element container has not been initialized");return}hn(Ne,Ji,$s)}),fa&&ys&&m.add(2,function(){if(!k(Ne)){je("Aborting because element has been uninstalled");return}if(!Pi()){je("Aborting because element container has not been initialized");return}ys()})}function Pi(){return!!k(Ne).container}function Er(){function ys(){return k(Ne).lastNotifiedWidth===void 0}je("notifyListenersIfNeeded invoked");var Ji=k(Ne);if(ys()&&Ji.lastWidth===Ji.startSize.width&&Ji.lastHeight===Ji.startSize.height)return je("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Ji.lastWidth===Ji.lastNotifiedWidth&&Ji.lastHeight===Ji.lastNotifiedHeight)return je("Not notifying: Size already notified");je("Current size not notified, notifying..."),Ji.lastNotifiedWidth=Ji.lastWidth,Ji.lastNotifiedHeight=Ji.lastHeight,Bee(k(Ne).listeners,function($s){$s(Ne)})}function gs(){if(je("startanimation triggered."),Ht(Ne)){je("Ignoring since element is still unrendered...");return}je("Element rendered.");var ys=oe(Ne),Ji=Re(Ne);(ys.scrollLeft===0||ys.scrollTop===0||Ji.scrollLeft===0||Ji.scrollTop===0)&&(je("Scrollbars out of sync. Updating detector elements..."),ei(Er))}function Ml(){if(je("Scroll detected."),Ht(Ne)){je("Scroll event fired while unrendered. Ignoring...");return}ei(Er)}if(je("registerListenersAndPositionElements invoked."),!k(Ne)){je("Aborting because element has been uninstalled");return}k(Ne).onRendered=gs,k(Ne).onExpand=Ml,k(Ne).onShrink=Ml;var $c=k(Ne).style;Ct(Ne,$c.width,$c.height)}function Ns(){if(je("finalizeDomMutation invoked."),!k(Ne)){je("Aborting because element has been uninstalled");return}var Ct=k(Ne).style;At(Ne,Ct.width,Ct.height),hn(Ne,Ct.width,Ct.height)}function ua(){Je(Ne)}function da(){je("Installing..."),Dt(),_t(),m.add(0,jt),m.add(1,Dn),m.add(2,$r),m.add(3,Ns),m.add(4,ua)}je("Making detectable..."),Qt(Ne)?(je("Element is detached"),Mn(),je("Waiting until element is attached..."),k(Ne).onRendered=function(){je("Element is now attached"),da()}):da()}function wt(Ge){var Ne=k(Ge);!Ne||(Ne.onExpandScroll&&ye(oe(Ge),"scroll",Ne.onExpandScroll),Ne.onShrinkScroll&&ye(Re(Ge),"scroll",Ne.onShrinkScroll),Ne.onAnimationStart&&ye(Ne.container,"animationstart",Ne.onAnimationStart),Ne.container&&Ge.removeChild(Ne.container))}return{makeDetectable:yt,addListener:Lt,uninstall:wt,initDocument:G}},Im=CS.exports.forEach,Fee=Tee,zee=Mee,Xee=Eee,Wee=Pee,Qee=Aee,k5=kS.exports,Hee=Dee,kc=Vee,Gee=Lee,Yee=Uee;function T5(l){return Array.isArray(l)||l.length!==void 0}function M5(l){if(Array.isArray(l))return l;var u=[];return Im(l,function(m){u.push(m)}),u}function E5(l){return l&&l.nodeType===1}var Qd=function(l){l=l||{};var u;if(l.idHandler)u={get:function(yt){return l.idHandler.get(yt,!0)},set:l.idHandler.set};else{var m=Xee(),k=Wee({idGenerator:m,stateHandler:kc});u=k}var C=l.reporter;if(!C){var v=C===!1;C=Qee(v)}var R=Tc(l,"batchProcessor",Hee({reporter:C})),B={};B.callOnAdd=!!Tc(l,"callOnAdd",!0),B.debug=!!Tc(l,"debug",!1);var G=zee(u),W=Fee({stateHandler:kc}),j,ce=Tc(l,"strategy","object"),Oe=Tc(l,"important",!1),xe={reporter:C,batchProcessor:R,stateHandler:kc,idHandler:u,important:Oe};if(ce==="scroll"&&(k5.isLegacyOpera()?(C.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ce="object"):k5.isIE(9)&&(C.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ce="object")),ce==="scroll")j=Yee(xe);else if(ce==="object")j=Gee(xe);else throw new Error("Invalid strategy name: "+ce);var ye={};function oe(yt,wt,Ge){function Ne(_t){var Dt=G.get(_t);Im(Dt,function(jt){jt(_t)})}function Je(_t,Dt,jt){G.add(Dt,jt),_t&&jt(Dt)}if(Ge||(Ge=wt,wt=yt,yt={}),!wt)throw new Error("At least one element required.");if(!Ge)throw new Error("Listener required.");if(E5(wt))wt=[wt];else if(T5(wt))wt=M5(wt);else return C.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var je=0,Qt=Tc(yt,"callOnAdd",B.callOnAdd),Ht=Tc(yt,"onReady",function(){}),Pt=Tc(yt,"debug",B.debug);Im(wt,function(_t){kc.getState(_t)||(kc.initState(_t),u.set(_t));var Dt=u.get(_t);if(Pt&&C.log("Attaching listener to element",Dt,_t),!W.isDetectable(_t)){if(Pt&&C.log(Dt,"Not detectable."),W.isBusy(_t)){Pt&&C.log(Dt,"System busy making it detectable"),Je(Qt,_t,Ge),ye[Dt]=ye[Dt]||[],ye[Dt].push(function(){je++,je===wt.length&&Ht()});return}return Pt&&C.log(Dt,"Making detectable..."),W.markBusy(_t,!0),j.makeDetectable({debug:Pt,important:Oe},_t,function(jt){if(Pt&&C.log(Dt,"onElementDetectable"),kc.getState(jt)){W.markAsDetectable(jt),W.markBusy(jt,!1),j.addListener(jt,Ne),Je(Qt,jt,Ge);var At=kc.getState(jt);if(At&&At.startSize){var vt=jt.offsetWidth,ut=jt.offsetHeight;(At.startSize.width!==vt||At.startSize.height!==ut)&&Ne(jt)}ye[Dt]&&Im(ye[Dt],function(Nt){Nt()})}else Pt&&C.log(Dt,"Element uninstalled before being detectable.");delete ye[Dt],je++,je===wt.length&&Ht()})}Pt&&C.log(Dt,"Already detecable, adding listener."),Je(Qt,_t,Ge),je++}),je===wt.length&&Ht()}function Re(yt){if(!yt)return C.error("At least one element is required.");if(E5(yt))yt=[yt];else if(T5(yt))yt=M5(yt);else return C.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");Im(yt,function(wt){G.removeAllListeners(wt),j.uninstall(wt),kc.cleanState(wt)})}function Lt(yt){j.initDocument&&j.initDocument(yt)}return{listenTo:oe,removeListener:G.removeListener,removeAllListeners:G.removeAllListeners,uninstall:Re,initDocument:Lt}};function Tc(l,u,m){var k=l[u];return k==null&&m!==void 0?m:k}var P5="Expected a function",A5=NaN,jee="[object Symbol]",qee=/^\s+|\s+$/g,Zee=/^[-+]0x[0-9a-f]+$/i,Kee=/^0b[01]+$/i,Jee=/^0o[0-7]+$/i,ete=parseInt,tte=typeof ee=="object"&&ee&&ee.Object===Object&&ee,ite=typeof self=="object"&&self&&self.Object===Object&&self,nte=tte||ite||Function("return this")(),rte=Object.prototype,ste=rte.toString,ote=Math.max,ate=Math.min,MS=function(){return nte.Date.now()};function lte(l,u,m){var k,C,v,R,B,G,W=0,j=!1,ce=!1,Oe=!0;if(typeof l!="function")throw new TypeError(P5);u=R5(u)||0,o1(m)&&(j=!!m.leading,ce="maxWait"in m,v=ce?ote(R5(m.maxWait)||0,u):v,Oe="trailing"in m?!!m.trailing:Oe);function xe(Je){var je=k,Qt=C;return k=C=void 0,W=Je,R=l.apply(Qt,je),R}function ye(Je){return W=Je,B=setTimeout(Lt,u),j?xe(Je):R}function oe(Je){var je=Je-G,Qt=Je-W,Ht=u-je;return ce?ate(Ht,v-Qt):Ht}function Re(Je){var je=Je-G,Qt=Je-W;return G===void 0||je>=u||je<0||ce&&Qt>=v}function Lt(){var Je=MS();if(Re(Je))return yt(Je);B=setTimeout(Lt,oe(Je))}function yt(Je){return B=void 0,Oe&&k?xe(Je):(k=C=void 0,R)}function wt(){B!==void 0&&clearTimeout(B),W=0,k=G=C=B=void 0}function Ge(){return B===void 0?R:yt(MS())}function Ne(){var Je=MS(),je=Re(Je);if(k=arguments,C=this,G=Je,je){if(B===void 0)return ye(G);if(ce)return B=setTimeout(Lt,u),xe(G)}return B===void 0&&(B=setTimeout(Lt,u)),R}return Ne.cancel=wt,Ne.flush=Ge,Ne}function cte(l,u,m){var k=!0,C=!0;if(typeof l!="function")throw new TypeError(P5);return o1(m)&&(k="leading"in m?!!m.leading:k,C="trailing"in m?!!m.trailing:C),lte(l,u,{leading:k,maxWait:u,trailing:C})}function o1(l){var u=typeof l;return!!l&&(u=="object"||u=="function")}function hte(l){return!!l&&typeof l=="object"}function ute(l){return typeof l=="symbol"||hte(l)&&ste.call(l)==jee}function R5(l){if(typeof l=="number")return l;if(ute(l))return A5;if(o1(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=o1(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=l.replace(qee,"");var m=Kee.test(l);return m||Jee.test(l)?ete(l.slice(2),m?2:8):Zee.test(l)?A5:+l}var a1=cte;const dte={name:"Grid",provide(){return{GridInstance:this}},props:{col:{type:Number,default:3},square:{type:Boolean,default:!1},padding:{type:String,default:"24px"},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},hover:{type:Boolean,default:!1}},data(){return{resizeCount:0,handleResize:()=>{}}},computed:{classes(){return{"ivu-grid-center":this.center,"ivu-grid-border":this.border,"ivu-grid-hover":this.hover}}},methods:{onResize(){this.resizeCount++}},mounted(){this.handleResize=a1(this.onResize,150,{leading:!1}),this.observer=Qd(),this.observer.listenTo(this.$refs.grid,this.handleResize)},beforeUnmount(){this.observer.removeListener(this.$refs.grid,this.handleResize)}};function fte(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-grid",v.classes]),ref:"grid"},[i.renderSlot(l.$slots,"default")],2)}var I5=c(dte,[["render",fte]]);const pte={name:"GridItem",inject:["GridInstance"],data(){return{height:0}},computed:{col(){return this.GridInstance.col},square(){return this.GridInstance.square},styles(){const l={width:`${100/this.col}%`};return this.height&&this.square&&(l.height=`${this.height}px`),l},mainStyles(){return{padding:this.GridInstance.padding}}},watch:{col(){i.nextTick(()=>{this.handleChangeHeight()})},square(){this.handleChangeHeight()},"GridInstance.resizeCount"(){this.handleChangeHeight()}},methods:{handleChangeHeight(){if(this.square){const l=this.$refs.col;this.height=parseFloat(D(l,"width"))}}},mounted(){this.handleChangeHeight()}};function mte(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:"ivu-grid-item",style:i.normalizeStyle(v.styles),ref:"col"},[i.createElementVNode("div",{class:"ivu-grid-item-main",style:i.normalizeStyle(v.mainStyles)},[i.renderSlot(l.$slots,"default")],4)],4)}var D5=c(pte,[["render",mte]]);const gte="ivu-layout",yte={name:"Header",computed:{wrapClasses(){return`${gte}-header`}}};function vte(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[i.renderSlot(l.$slots,"default")],2)}var ES=c(yte,[["render",vte]]);const zt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent(l){const{keyCode:u}=l;if(l.altKey&&!l.ctrlKey||l.metaKey||u>=zt.F1&&u<=zt.F12)return!1;switch(u){case zt.ALT:case zt.CAPS_LOCK:case zt.CONTEXT_MENU:case zt.CTRL:case zt.DOWN:case zt.END:case zt.ESC:case zt.HOME:case zt.INSERT:case zt.LEFT:case zt.MAC_FF_META:case zt.META:case zt.NUMLOCK:case zt.NUM_CENTER:case zt.PAGE_DOWN:case zt.PAGE_UP:case zt.PAUSE:case zt.PRINT_SCREEN:case zt.RIGHT:case zt.SHIFT:case zt.UP:case zt.WIN_KEY:case zt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey(l){if(l>=zt.ZERO&&l<=zt.NINE||l>=zt.NUM_ZERO&&l<=zt.NUM_MULTIPLY||l>=zt.A&&l<=zt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&l===0)return!0;switch(l){case zt.SPACE:case zt.QUESTION_MARK:case zt.NUM_PLUS:case zt.NUM_MINUS:case zt.NUM_PERIOD:case zt.NUM_DIVISION:case zt.SEMICOLON:case zt.DASH:case zt.EQUALS:case zt.COMMA:case zt.PERIOD:case zt.SLASH:case zt.APOSTROPHE:case zt.SINGLE_QUOTE:case zt.OPEN_SQUARE_BRACKET:case zt.BACKSLASH:case zt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Mc="ivu-spin",bte={name:"Spin",mixins:[_S],props:{size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},fix:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data(){return{showText:!1,visible:!1}},computed:{classes(){return[`${Mc}`,{[`${Mc}-${this.size}`]:!!this.size,[`${Mc}-fix`]:this.fix,[`${Mc}-show-text`]:this.showText,[`${Mc}-fullscreen`]:this.fullscreen}]},mainClasses(){return`${Mc}-main`},dotClasses(){return`${Mc}-dot`},textClasses(){return`${Mc}-text`},fullscreenVisible(){return this.fullscreen?this.visible:!0}},watch:{visible(l){l?this.addScrollEffect():this.removeScrollEffect()}},mounted(){this.showText=!!this.$slots.default&&this.$slots.default().some(l=>l.children&&l.children.length)}};function xte(l,u,m,k,C,v){return i.openBlock(),i.createBlock(i.Transition,{name:"fade"},{default:i.withCtx(()=>[v.fullscreenVisible&&m.show?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.classes)},[i.createElementVNode("div",{class:i.normalizeClass(v.mainClasses)},[i.createElementVNode("span",{class:i.normalizeClass(v.dotClasses)},null,2),i.createElementVNode("div",{class:i.normalizeClass(v.textClasses)},[i.renderSlot(l.$slots,"default")],2)],2)],2)):i.createCommentVNode("",!0)]),_:3})}var lo=c(bte,[["render",xte]]);const Ote={name:"ImagePreview",mixins:[Ki],components:{Icon:S,Spin:lo,Row:wc,Col:Ba},inheritAttrs:!1,emits:["update:modelValue","on-close","on-switch"],props:{modelValue:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},toolbar:{type:Array,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||!l.$VIEWUI.image||l.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:l.$VIEWUI.image.toolbar}}},data(){return{currentIndex:0,scale:1,degree:0,translate:{x:0,y:0},startX:0,startY:0,transition:!0,original:!1,prevOverflow:"",status:"loading",zIndex:1e3,maskIndex:this.getMaskIndex(),downloading:!1}},computed:{imgClasses(){return["ivu-image-preview-image",{"ivu-image-preview-grabbing":!this.transition,"ivu-image-preview-hidden":this.status==="failed","ivu-image-preview-transition":this.transition,"ivu-image-preview-limit":!this.original}]},imageStyle(){let l=this.translate.x/this.scale,u=this.translate.y/this.scale;const m=this.degree%360;return[90,-270].includes(m)&&([l,u]=[u,-l]),[180,-180].includes(m)&&([l,u]=[-l,-u]),[270,-90].includes(m)&&([l,u]=[-u,l]),{transform:`
                        scale(${this.scale})
                        rotate(${this.degree}deg)
                        translate(${l}px, ${u}px)
                    `}},maskStyle(){return{zIndex:this.maskIndex+this.zIndex}},leftClasses(){return["ivu-image-preview-arrow-left",{"ivu-image-preview-arrow-disabled":this.hasLeftSwitchEnd}]},rightClasses(){return["ivu-image-preview-arrow-right",{"ivu-image-preview-arrow-disabled":this.hasRightSwitchEnd}]},hasRightSwitchEnd(){const{currentIndex:l,infinite:u,previewList:m}=this,k=m.length;return u?!1:l>=k-1},hasLeftSwitchEnd(){const{currentIndex:l,infinite:u}=this;return u?!1:l===0},currentSrc(){return this.previewList[this.currentIndex]},failLang(){return this.t("i.image.fail")}},methods:{resetStyle(){this.scale=1,this.degree=0,this.translate.x=0,this.translate.y=0},handleClose(){this.$emit("update:modelValue",!1),this.$emit("on-close")},handleClickMask(){!this.maskClosable||this.handleClose()},handleSwitch(l){l?this.currentIndex+1===this.previewList.length?this.infinite&&(this.resetStyle(),this.currentIndex=0):(this.resetStyle(),this.currentIndex+=1):this.currentIndex===0?this.infinite&&(this.resetStyle(),this.currentIndex=this.previewList.length-1):(this.resetStyle(),this.currentIndex-=1),this.$emit("on-switch",{currentIndex:this.currentIndex})},handleOperation(l){l==="zoomIn"&&this.scale<6&&(this.scale+=.25),l==="zoomOut"&&this.scale>.25&&(this.scale-=.25),l==="rotateLeft"&&(this.degree-=90),l==="rotateRight"&&(this.degree+=90),l==="original"&&(this.original=!this.original,this.transition=!1,this.resetStyle(),setTimeout(()=>{this.transition=!0},0)),l==="download"&&(this.downloading=!0,_e(this.previewList[this.currentIndex]).then(()=>{this.downloading=!1}).catch(()=>{this.downloading=!1}))},handleKeydown(l){if(!this.modelValue)return;const{keyCode:u}=l;u===zt.LEFT&&this.handleSwitch(!1),u===zt.RIGHT&&this.handleSwitch(!0),u===zt.UP&&this.handleOperation("zoomIn"),u===zt.DOWN&&this.handleOperation("zoomOut"),u===zt.SPACE&&(l.preventDefault(),this.original=!this.original)},handleKeyup(l){if(!this.modelValue)return;const{keyCode:u}=l;u===zt.ESC&&this.handleClose()},handleWheel(l){if(!this.modelValue)return;const{deltaY:u}=l;this.handleOperation(u<0?"zoomIn":"zoomOut")},handleMousedown(l){const{pageX:u,pageY:m,which:k}=l;k===1&&(this.startX=u,this.startY=m,this.transition=!1,o(document,"mousemove",this.handleMousemove),o(document,"mouseup",this.handleMouseup))},handleMousemove:a1(function(l){l.stopPropagation();const{pageX:u,pageY:m}=l;this.translate.x+=u-this.startX,this.translate.y+=m-this.startY,this.startX=u,this.startY=m}),handleMouseup(){this.transition=!0,a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup)},getBodyOverflow(){return s?document.body.style.overflow:""},setBodyOverflow(l){!s||(document.body.style.overflow=l)},handleImageLoad(){this.status="loaded"},handleImageError(){this.status="failed"},getMaskIndex(){return Qe(),we}},watch:{modelValue(l){l?(this.currentIndex=this.initialIndex,this.resetStyle(),this.original=!1,this.prevOverflow=this.getBodyOverflow(),this.setBodyOverflow("hidden"),this.maskIndex=this.getMaskIndex()):this.setBodyOverflow(this.prevOverflow)},currentIndex(){this.status="loading"}},mounted(){o(document,"keydown",this.handleKeydown),o(document,"keyup",this.handleKeyup),o(document,"wheel",this.handleWheel)},beforeUnmount(){a(document,"keydown",this.handleKeydown),a(document,"keyup",this.handleKeyup),a(document,"wheel",this.handleWheel)}},wte={key:1,class:"ivu-image-preview-fail"},_te=["src"],Ste=[i.createElementVNode("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7198",fill:"#ffffff"},null,-1),i.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7199",fill:"#ffffff"},null,-1)],Cte=[i.createElementVNode("path",{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7413",fill:"#ffffff"},null,-1),i.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7414",fill:"#ffffff"},null,-1)],kte=[i.createElementVNode("path",{d:"M358.058667 128H156.970667A28.970667 28.970667 0 0 0 128 157.013333v202.837334c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434666a14.506667 14.506667 0 0 0 14.506667-14.506666V200.448h157.610667a14.506667 14.506667 0 0 0 14.506666-14.506667V142.506667a14.506667 14.506667 0 0 0-14.506666-14.506667zM881.493333 649.642667h-43.434666a14.506667 14.506667 0 0 0-14.506667 14.506666v159.402667h-157.610667a14.506667 14.506667 0 0 0-14.506666 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506666 14.506667h201.088c16 0 28.970667-12.928 28.970667-29.013333v-202.837334a14.506667 14.506667 0 0 0-14.506667-14.506666zM358.058667 823.552H200.448v-159.402667a14.506667 14.506667 0 0 0-14.506667-14.506666H142.506667a14.506667 14.506667 0 0 0-14.506667 14.506666v202.88c0 16 12.970667 28.970667 29.013333 28.970667h201.045334a14.506667 14.506667 0 0 0 14.506666-14.506667v-43.434666a14.506667 14.506667 0 0 0-14.506666-14.506667zM866.986667 128h-201.088a14.506667 14.506667 0 0 0-14.506667 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506667 14.506667h157.610666v159.402667c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434667a14.506667 14.506667 0 0 0 14.506666-14.506666V156.970667A28.928 28.928 0 0 0 866.986667 128z","p-id":"26673",fill:"#ffffff"},null,-1)],Tte=[i.createElementVNode("path",{d:"M864 128H160c-19.2 0-32 12.8-32 32v704c0 19.2 12.8 32 32 32h704c19.2 0 32-12.8 32-32V160c0-19.2-12.8-32-32-32z m-32 704H192V192h640v640z","p-id":"1977",fill:"#ffffff"},null,-1),i.createElementVNode("path",{d:"M320 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32zM640 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32z","p-id":"1978",fill:"#ffffff"},null,-1),i.createElementVNode("path",{d:"M512 384m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1979",fill:"#ffffff"},null,-1),i.createElementVNode("path",{d:"M512 640m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1980",fill:"#ffffff"},null,-1)],Mte=[i.createElementVNode("path",{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z m191.3-491.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z","p-id":"13309",fill:"#ffffff"},null,-1)],Ete=[i.createElementVNode("path",{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8zM880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z","p-id":"13522",fill:"#ffffff"},null,-1)],Pte=[i.createElementVNode("path",{d:"M505.7 621c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-72.1V120c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v346.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z","p-id":"8826",fill:"#ffffff"},null,-1),i.createElementVNode("path",{d:"M903 516h-64c-4.4 0-8 3.6-8 8v300c0 4.4-3.6 8-8 8H199c-4.4 0-8-3.6-8-8V524c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v372c0 8.8 7.2 16 16 16h768c8.8 0 16-7.2 16-16V524c0-4.4-3.6-8-8-8z","p-id":"8827",fill:"#ffffff"},null,-1)],Ate={class:"ivu-image-preview-operations-item ivu-image-preview-operations-wait ivu-anim-loop",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7816",width:"200",height:"200"},Rte=[i.createElementVNode("path",{d:"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z","p-id":"7817",fill:"#ffffff"},null,-1)];function Ite(l,u,m,k,C,v){const R=i.resolveComponent("Spin"),B=i.resolveComponent("Col"),G=i.resolveComponent("Row"),W=i.resolveComponent("Icon");return i.openBlock(),i.createBlock(i.Teleport,{to:"body",disabled:!m.transfer},[i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[m.modelValue?(i.openBlock(),i.createElementBlock("div",{key:0,class:"ivu-image-preview-mask",style:i.normalizeStyle(v.maskStyle)},null,4)):i.createCommentVNode("",!0)]),_:1}),i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[m.modelValue?(i.openBlock(),i.createElementBlock("div",{key:0,class:"ivu-image-preview-wrap",style:i.normalizeStyle(v.maskStyle)},[i.createElementVNode("div",i.mergeProps({class:"ivu-image-preview"},l.$attrs,{onClick:u[14]||(u[14]=i.withModifiers((...j)=>v.handleClickMask&&v.handleClickMask(...j),["stop"]))}),[C.status==="loading"?(i.openBlock(),i.createBlock(R,{key:0,size:"large",class:"ivu-image-preview-loading"})):C.status==="failed"?(i.openBlock(),i.createElementBlock("div",wte,[i.createElementVNode("span",null,i.toDisplayString(v.failLang),1)])):i.createCommentVNode("",!0),(i.openBlock(),i.createElementBlock("img",{class:i.normalizeClass(v.imgClasses),style:i.normalizeStyle(v.imageStyle),src:v.currentSrc,key:C.currentIndex.toString(),onClick:u[0]||(u[0]=i.withModifiers(()=>{},["stop"])),onMousedown:u[1]||(u[1]=i.withModifiers((...j)=>v.handleMousedown&&v.handleMousedown(...j),["stop","prevent"])),onLoad:u[2]||(u[2]=(...j)=>v.handleImageLoad&&v.handleImageLoad(...j)),onError:u[3]||(u[3]=(...j)=>v.handleImageError&&v.handleImageError(...j))},null,46,_te)),m.toolbar&&m.toolbar.length>0?(i.openBlock(),i.createBlock(G,{key:2,"class-name":"ivu-image-preview-operations",wrap:!1,onClick:u[11]||(u[11]=i.withModifiers(()=>{},["stop"]))},{default:i.withCtx(()=>[m.toolbar.indexOf("zoomIn")>-1?(i.openBlock(),i.createBlock(B,{key:0,flex:"1",order:m.toolbar.indexOf("zoomIn")+1},{default:i.withCtx(()=>[(i.openBlock(),i.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:u[4]||(u[4]=i.withModifiers(j=>v.handleOperation("zoomIn"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7197",width:"200",height:"200"},Ste))]),_:1},8,["order"])):i.createCommentVNode("",!0),m.toolbar.indexOf("zoomOut")>-1?(i.openBlock(),i.createBlock(B,{key:1,flex:"1",order:m.toolbar.indexOf("zoomOut")+1},{default:i.withCtx(()=>[(i.openBlock(),i.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:u[5]||(u[5]=i.withModifiers(j=>v.handleOperation("zoomOut"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7412",width:"200",height:"200"},Cte))]),_:1},8,["order"])):i.createCommentVNode("",!0),m.toolbar.indexOf("original")>-1?(i.openBlock(),i.createBlock(B,{key:2,flex:"1",order:m.toolbar.indexOf("original")+1},{default:i.withCtx(()=>[i.withDirectives((i.openBlock(),i.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:u[6]||(u[6]=i.withModifiers(j=>v.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26672",width:"200",height:"200"},kte,512)),[[i.vShow,!this.original]]),i.withDirectives((i.openBlock(),i.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:u[7]||(u[7]=i.withModifiers(j=>v.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1976",width:"200",height:"200"},Tte,512)),[[i.vShow,this.original]])]),_:1},8,["order"])):i.createCommentVNode("",!0),m.toolbar.indexOf("rotateLeft")>-1?(i.openBlock(),i.createBlock(B,{key:3,flex:"1",order:m.toolbar.indexOf("rotateLeft")+1},{default:i.withCtx(()=>[(i.openBlock(),i.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:u[8]||(u[8]=i.withModifiers(j=>v.handleOperation("rotateLeft"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13308",width:"200",height:"200"},Mte))]),_:1},8,["order"])):i.createCommentVNode("",!0),m.toolbar.indexOf("rotateRight")>-1?(i.openBlock(),i.createBlock(B,{key:4,flex:"1",order:m.toolbar.indexOf("rotateRight")+1},{default:i.withCtx(()=>[(i.openBlock(),i.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:u[9]||(u[9]=i.withModifiers(j=>v.handleOperation("rotateRight"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13521",width:"200",height:"200"},Ete))]),_:1},8,["order"])):i.createCommentVNode("",!0),m.toolbar.indexOf("download")>-1?(i.openBlock(),i.createBlock(B,{key:5,flex:"1",order:m.toolbar.indexOf("download")+1},{default:i.withCtx(()=>[i.withDirectives((i.openBlock(),i.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:u[10]||(u[10]=i.withModifiers(j=>v.handleOperation("download"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8825",width:"200",height:"200"},Pte,512)),[[i.vShow,!C.downloading]]),i.withDirectives((i.openBlock(),i.createElementBlock("svg",Ate,Rte,512)),[[i.vShow,C.downloading]])]),_:1},8,["order"])):i.createCommentVNode("",!0)]),_:1})):i.createCommentVNode("",!0),m.previewList.length>1?(i.openBlock(),i.createBlock(W,{key:3,class:i.normalizeClass(v.leftClasses),type:"ios-arrow-back",onClick:u[12]||(u[12]=i.withModifiers(j=>v.handleSwitch(!1),["stop"]))},null,8,["class"])):i.createCommentVNode("",!0),m.previewList.length>1?(i.openBlock(),i.createBlock(W,{key:4,class:i.normalizeClass(v.rightClasses),type:"ios-arrow-forward",onClick:u[13]||(u[13]=i.withModifiers(j=>v.handleSwitch(!0),["stop"]))},null,8,["class"])):i.createCommentVNode("",!0),i.createVNode(W,{class:"ivu-image-preview-arrow-close",type:"md-close",onClick:i.withModifiers(v.handleClose,["stop"])},null,8,["onClick"])],16)],4)):i.createCommentVNode("",!0)]),_:1})],8,["disabled"])}var Ec=c(Ote,[["render",Ite]]);const Dte=l=>typeof HTMLElement=="object"&&l instanceof HTMLElement,Nte={name:"Image",mixins:[Ki],components:{ImagePreview:Ec},emits:["on-load","on-error","on-switch","on-close","on-click"],props:{src:{type:String,default:""},alt:{type:String,default:""},preview:{type:Boolean,default:!1},referrerPolicy:{type:String,default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:[String],default:""},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array},infinite:{type:Boolean,default:!0},initialIndex:{type:Number,default:0},previewTip:{type:Boolean,default:!0},toolbar:{type:Array,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||!l.$VIEWUI.image||l.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:l.$VIEWUI.image.toolbar}}},data(){return{loadingImage:!1,loading:!1,imageError:!1,scrollElement:null,observer:null,imagePreviewModal:!1}},watch:{src(){this.loadImage()}},computed:{innerClasses(){return["ivu-image-inner",{"ivu-image-cursor":this.preview}]},imgClasses(){return["ivu-image-img",{"ivu-image-img-hidden":this.loading||this.imageError}]},fitStyle(){const l=["fill","contain","cover","none","scale-down"],{fit:u}=this;return l.includes(u)?`object-fit:${u};`:""},imageStyles(){return{width:typeof this.width=="number"?`${this.width}px`:this.width,height:typeof this.height=="number"?`${this.height}px`:this.height}},loadingLang(){return this.t("i.select.loading")},failLang(){return this.t("i.image.fail")},previewLang(){return this.t("i.image.preview")},loadingType(){return this.lazy?"lazy":"eager"}},mounted(){s&&this.handleImageEvent()},methods:{handleLazy(){const l=this.$refs.image;(this.observer=new IntersectionObserver(this.handlerObserveImage,{root:this.scrollElement,rootMargin:"0px",threshold:0})).observe(l)},handlerObserveImage(l){for(let u of l)u.isIntersecting&&(this.offObserver(),this.loadImage())},addLazyImageListener(){const{scrollContainer:l}=this;this.scrollElement=null,Dte(l)?this.scrollElement=l:l&&typeof l=="string"&&(this.scrollElement=document.querySelector(l)),this.handleLazy()},handleImageLoad(){this.loading=!1,this.imageError=!1,this.$emit("on-load")},handleImageError(){this.loading=!1,this.imageError=!0,this.loadingImage=!1,this.$emit("on-error")},loadImage(){this.loading=!0,this.imageError=!1,this.loadingImage=!0},handleImageEvent(){const{lazy:l}=this;l?this.addLazyImageListener():this.loadImage()},offObserver(){const{observer:l}=this;l&&l.disconnect()},handlePreview(){const{preview:l,initialIndex:u}=this;l&&(this.imagePreviewModal=!0,this.$emit("on-click",{initialIndex:u}))},handleClose(){this.$emit("on-close")},handleSwitch(l){this.$emit("on-switch",l)}},beforeUnmount(){this.offObserver()}},$te={key:0,class:"ivu-image-placeholder"},Vte={key:1,class:"ivu-image-error"},Lte=["alt","src","loading","referrerPolicy"],Bte={class:"ivu-image-mark"};function Ute(l,u,m,k,C,v){const R=i.resolveComponent("ImagePreview");return i.openBlock(),i.createElementBlock("div",{class:"ivu-image",ref:"image",style:i.normalizeStyle(v.imageStyles)},[C.loading?(i.openBlock(),i.createElementBlock("div",$te,[i.renderSlot(l.$slots,"placeholder",{},()=>[i.createElementVNode("span",null,i.toDisplayString(v.loadingLang),1)])])):C.imageError?(i.openBlock(),i.createElementBlock("div",Vte,[i.renderSlot(l.$slots,"error",{},()=>[i.createElementVNode("span",null,i.toDisplayString(v.failLang),1)])])):i.createCommentVNode("",!0),C.loadingImage?(i.openBlock(),i.createElementBlock("div",{key:2,class:i.normalizeClass(v.innerClasses),onClick:u[2]||(u[2]=(...B)=>v.handlePreview&&v.handlePreview(...B))},[i.createElementVNode("img",{class:i.normalizeClass(v.imgClasses),style:i.normalizeStyle([v.fitStyle]),alt:m.alt,src:m.src,loading:v.loadingType,referrerPolicy:m.referrerPolicy,onLoad:u[0]||(u[0]=(...B)=>v.handleImageLoad&&v.handleImageLoad(...B)),onError:u[1]||(u[1]=(...B)=>v.handleImageError&&v.handleImageError(...B))},null,46,Lte),m.preview&&m.previewTip?i.renderSlot(l.$slots,"preview",{key:0},()=>[i.createElementVNode("div",Bte,[i.createElementVNode("span",null,i.toDisplayString(v.previewLang),1)])]):i.createCommentVNode("",!0)],2)):i.createCommentVNode("",!0),m.preview?(i.openBlock(),i.createBlock(R,{key:3,modelValue:C.imagePreviewModal,"onUpdate:modelValue":u[3]||(u[3]=B=>C.imagePreviewModal=B),"preview-list":m.previewList,"initial-index":m.initialIndex,infinite:m.infinite,"mask-closable":m.maskClosable,transfer:m.transfer,toolbar:m.toolbar,onOnClose:v.handleClose,onOnSwitch:v.handleSwitch},null,8,["modelValue","preview-list","initial-index","infinite","mask-closable","transfer","toolbar","onOnClose","onOnSwitch"])):i.createCommentVNode("",!0)],4)}var N5=c(Nte,[["render",Ute]]);Ec.newInstance=l=>{if(!s)return;const u=l||{};let m=null;const k=i.createApp({data(){return Object.assign({},u,{visible:!1,previewList:[],initialIndex:0,toolbar:["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"],infinite:!0,maskClosable:!0,transfer:!0})},render(){return i.h(Ec,Object.assign({},u,{ref:"imagePreview",modelValue:this.visible,previewList:this.previewList,initialIndex:this.initialIndex,toolbar:this.toolbar,infinite:this.infinite,maskClosable:this.maskClosable,transfer:this.transfer,"onOn-close":this.close}))},methods:{close(){this.visible=!1,setTimeout(()=>{this.destroy(),this.onRemove()},300)},destroy(){k.unmount(),document.body.removeChild(C)},onRemove(){}},created(){m=i.getCurrentInstance()}}),C=document.createElement("div");document.body.appendChild(C),k.mount(C);const v=m.refs.imagePreview;return{show(R){Object.keys(R).forEach(B=>{v.$parent[B]=R[B]}),v.$parent.visible=!0},component:v}};let l1;function Fte(){return l1=l1||Ec.newInstance(),l1}Ec.show=function(l={}){const u=Fte();l.onRemove=function(){l1=null},u.show(l)};const qr="ivu-input-number",c1="ivu-icon";function h1(l,u){let m,k,C;try{m=l.toString().split(".")[1].length}catch{m=0}try{k=u.toString().split(".")[1].length}catch{k=0}return C=Math.pow(10,Math.max(m,k)),(Math.round(l*C)+Math.round(u*C))/C}const zte={name:"InputNumber",mixins:[mi],emits:["on-change","on-focus","on-blur","update:modelValue"],props:{max:{type:Number,default:1/0},min:{type:Number,default:-1/0},step:{type:Number,default:1},activeChange:{type:Boolean,default:!0},modelValue:{type:Number,default:1},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},name:{type:String},precision:{type:Number},elementId:{type:String},formatter:{type:Function},parser:{type:Function},placeholder:{type:String,default:""},controlsOutside:{type:Boolean,default:!1}},data(){return{focused:!1,upDisabled:!1,downDisabled:!1,currentValue:this.modelValue}},computed:{wrapClasses(){return[`${qr}`,{[`${qr}-${this.size}`]:!!this.size,[`${qr}-disabled`]:this.itemDisabled,[`${qr}-focused`]:this.focused,[`${qr}-controls-outside`]:this.controlsOutside}]},handlerClasses(){return`${qr}-handler-wrap`},upClasses(){return[`${qr}-handler`,`${qr}-handler-up`,{[`${qr}-handler-up-disabled`]:this.upDisabled}]},innerUpClasses(){return`${qr}-handler-up-inner ${c1} ${c1}-ios-arrow-up`},downClasses(){return[`${qr}-handler`,`${qr}-handler-down`,{[`${qr}-handler-down-disabled`]:this.downDisabled}]},innerDownClasses(){return`${qr}-handler-down-inner ${c1} ${c1}-ios-arrow-down`},inputWrapClasses(){return`${qr}-input-wrap`},inputClasses(){return`${qr}-input`},precisionValue(){return this.currentValue?this.precision?this.currentValue.toFixed(this.precision):this.currentValue:this.currentValue},formatterValue(){return this.formatter&&this.precisionValue!==null?this.formatter(this.precisionValue):this.precisionValue}},methods:{preventDefault(l){l.preventDefault()},up(l){const u=Number(l.target.value);if(this.upDisabled&&isNaN(u))return!1;this.changeStep("up",l)},down(l){const u=Number(l.target.value);if(this.downDisabled&&isNaN(u))return!1;this.changeStep("down",l)},changeStep(l,u){if(this.itemDisabled||this.readonly)return!1;const m=Number(u.target.value);let k=Number(this.currentValue);const C=Number(this.step);if(isNaN(k))return!1;if(!isNaN(m)){if(l==="up")if(h1(m,C)<=this.max)k=m;else return!1;else if(l==="down")if(h1(m,-C)>=this.min)k=m;else return!1}l==="up"?k=h1(k,C):l==="down"&&(k=h1(k,-C)),this.setValue(k)},setValue(l){l&&!isNaN(this.precision)&&(l=Number(Number(l).toFixed(this.precision)));const{min:u,max:m}=this;l!==null&&(l>m?l=m:l<u&&(l=u)),i.nextTick(()=>{this.currentValue=l,this.$emit("update:modelValue",l),this.$emit("on-change",l),this.handleFormItemChange("change",l)})},focus(l){this.focused=!0,this.$emit("on-focus",l)},blur(){this.focused=!1,this.$emit("on-blur"),V(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},keyDown(l){l.keyCode===38?(l.preventDefault(),this.up(l)):l.keyCode===40&&(l.preventDefault(),this.down(l))},change(l){if(l.type==="change"&&this.activeChange||l.type==="input"&&!this.activeChange)return;let u=l.target.value.trim();if(this.parser&&(u=this.parser(u)),u.length===0){this.setValue(null);return}l.type==="input"&&u.match(/^\-?\.?$|\.$/)||(u=Number(u),isNaN(u)?l.target.value=this.currentValue:(this.currentValue=u,this.setValue(u)))},changeVal(l){if(l=Number(l),isNaN(l))this.upDisabled=!0,this.downDisabled=!0;else{const u=this.step;this.upDisabled=l+u>this.max,this.downDisabled=l-u<this.min}}},mounted(){this.changeVal(this.currentValue)},watch:{modelValue(l){this.currentValue=l},currentValue(l){this.changeVal(l)},min(){this.changeVal(this.currentValue)},max(){this.changeVal(this.currentValue)}}},Xte=[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-remove"},null,-1)],Wte=[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-add"},null,-1)],Qte=["id","disabled","autofocus","readonly","name","value","placeholder"];function Hte(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[m.controlsOutside?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.handlerClasses)},[i.createElementVNode("a",{onClick:u[1]||(u[1]=(...R)=>v.up&&v.up(...R)),class:i.normalizeClass(v.upClasses)},[i.createElementVNode("span",{class:i.normalizeClass(v.innerUpClasses),onClick:u[0]||(u[0]=(...R)=>v.preventDefault&&v.preventDefault(...R))},null,2)],2),i.createElementVNode("a",{onClick:u[3]||(u[3]=(...R)=>v.down&&v.down(...R)),class:i.normalizeClass(v.downClasses)},[i.createElementVNode("span",{class:i.normalizeClass(v.innerDownClasses),onClick:u[2]||(u[2]=(...R)=>v.preventDefault&&v.preventDefault(...R))},null,2)],2)],2)),m.controlsOutside?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-down",{"ivu-input-number-controls-outside-btn-disabled":C.downDisabled}]),onClick:u[4]||(u[4]=(...R)=>v.down&&v.down(...R))},Xte,2)):i.createCommentVNode("",!0),m.controlsOutside?(i.openBlock(),i.createElementBlock("div",{key:2,class:i.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-up",{"ivu-input-number-controls-outside-btn-disabled":C.upDisabled}]),onClick:u[5]||(u[5]=(...R)=>v.up&&v.up(...R))},Wte,2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass(v.inputWrapClasses)},[i.createElementVNode("input",{id:m.elementId,class:i.normalizeClass(v.inputClasses),disabled:l.itemDisabled,autocomplete:"off",spellcheck:"false",autofocus:m.autofocus,onFocus:u[6]||(u[6]=(...R)=>v.focus&&v.focus(...R)),onBlur:u[7]||(u[7]=(...R)=>v.blur&&v.blur(...R)),onKeydown:u[8]||(u[8]=i.withModifiers((...R)=>v.keyDown&&v.keyDown(...R),["stop"])),onInput:u[9]||(u[9]=(...R)=>v.change&&v.change(...R)),onMouseup:u[10]||(u[10]=(...R)=>v.preventDefault&&v.preventDefault(...R)),onChange:u[11]||(u[11]=(...R)=>v.change&&v.change(...R)),readonly:m.readonly||!m.editable,name:m.name,value:v.formatterValue,placeholder:m.placeholder},null,42,Qte)],2)],2)}var PS=c(zte,[["render",Hte]]);const $5="ivu-layout",Gte={name:"Layout",data(){return{hasSider:!1}},computed:{wrapClasses(){return[`${$5}`,{[`${$5}-has-sider`]:this.hasSider}]}},methods:{findSider(){return this.$slots.default().some(l=>l.type.name==="Sider")}},mounted(){this.hasSider=this.findSider()}};function Yte(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[i.renderSlot(l.$slots,"default")],2)}var V5=c(Gte,[["render",Yte]]);const L5={tooltips:["复制","复制成功"],showTip:!1,successTip:"复制成功",errorTip:"复制失败"},B5={tooltip:"编辑",editing:!1,maxlength:"",autosize:!0,triggerType:"icon"},U5={rows:1,tooltip:!1,suffix:!1,expandable:!1,symbol:"展开"};var Dm={emits:["update:modelValue"],mixins:[pe],props:{type:{validator(l){return _(l,["secondary","success","warning","danger",""])},default:""},copyable:{type:Boolean,default:!1},copyText:{type:String,default:""},copyConfig:{type:Object,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.typography.copyConfig===""?L5:l.$VIEWUI.typography.copyConfig}},editable:{type:Boolean,default:!1},editConfig:{type:Object,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.typography.editConfig===""?B5:l.$VIEWUI.typography.editConfig}},ellipsis:{type:Boolean,default:!1},ellipsisConfig:{type:Object,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.typography.ellipsisConfig===""?U5:l.$VIEWUI.typography.ellipsisConfig}},disabled:{type:Boolean,default:!1},code:{type:Boolean,default:!1},delete:{type:Boolean,default:!1},keyboard:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},strong:{type:Boolean,default:!1},underline:{type:Boolean,default:!1},italic:{type:Boolean,default:!1},modelValue:{type:String,default:""},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},theme:{validator(l){return _(l,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"}},computed:{isHrefPattern(){const{to:l}=this;return!!l},linkProps(){if(this.isHrefPattern){const{linkUrl:l,target:u}=this;return{href:l,target:u}}else return{}},mergedCopyConfig(){return Object.assign({},L5,this.copyConfig)},mergedEditConfig(){return Object.assign({},B5,this.editConfig)},mergedEllipsisConfig(){return Object.assign({},U5,this.ellipsisConfig)}},methods:{commonSlots(){const l={};return this.$slots.default&&(l.default=()=>this.$slots.default()),this.$slots.copyIcon&&(l.copyIcon=u=>this.$slots.copyIcon(u)),this.$slots.editIcon&&(l.editIcon=u=>this.$slots.editIcon(u)),this.$slots.enterIcon&&(l.enterIcon=u=>this.$slots.enterIcon(u)),l},commonEvents(){return{"onUpdate:modelValue":this.handleOnUpdateModelValue}},handleOnUpdateModelValue(l){this.$emit("update:modelValue",l)}}};const u1={name:"TypographyBase",mixins:[Dm],emits:["on-copy-success","on-copy-error","on-edit-start","on-edit-end","on-edit-change","on-edit-cancel"],props:{component:{type:String,default:"div"},level:{type:Number,default:0}},data(){return{currentContent:this.modelValue,copied:!1,copyTimeout:null,editing:!1,editContent:"",lastKeyCode:"",isEditESC:!1,ellipsisText:"",ellipsisContent:"",isEllipsis:!1,ellipsisExpanded:!1,observer:null}},created(){this.editing=this.mergedEditConfig.editing||!1,this.editing&&(this.editContent=this.currentContent?this.currentContent:this.handleGetContent())},watch:{modelValue(l){this.currentContent=l},editing(l){l||i.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},isEllipsis(){i.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},ellipsis:{handler(l){l?i.nextTick(()=>{this.handleUpdateEllipsisStatus(),this.handleCreateObserver()}):this.handleRemoveObserver()},immediate:!0}},computed:{classes(){return["ivu-typography",{[`ivu-typography-${this.type}`]:this.type,"ivu-typography-disabled":this.disabled,"ivu-typography-ellipsis-line-clamp":this.ellipsis&&!this.ellipsisExpanded,"ivu-typography-ellipsis-single-line":this.ellipsis&&!this.ellipsisExpanded&&this.mergedEllipsisConfig.rows===1}]}},methods:{wrapperDecorations(){let l=this.currentContent?this.currentContent:this.$slots.default?this.$slots.default():"";function u(m,k){!m||(l=i.h(k,l))}return u(this.strong,"strong"),u(this.underline,"u"),u(this.delete,"del"),u(this.code,"code"),u(this.mark,"mark"),u(this.keyboard,"kbd"),u(this.italic,"i"),l},handleClickContent(l){if(!this.isHrefPattern&&this.component!=="a"){const u=this.mergedEditConfig.triggerType;this.editable&&(u==="text"||u==="both")&&this.handleEdit()}else{const u=l.ctrlKey||l.metaKey;this.handleCheckClick(l,u)}},handleGetContent(){const l=document.createElement("div");document.body.appendChild(l);let u=null,m=null,k="";const C=this.wrapperDecorations();return u=i.createApp({render(){return i.h("div",{ref:"text",style:{display:"none"}},C)},created(){m=i.getCurrentInstance()}}),u.mount(l),k=m.refs.text.innerText,u.unmount(),document.body.removeChild(l),k},handleCopy(){let l="";this.copyText?l=this.copyText:this.currentContent?l=this.currentContent:this.$slots.default&&(l=this.handleGetContent()),Yv({text:this.copyText?this.copyText:l,showTip:this.mergedCopyConfig.showTip,successTip:this.mergedCopyConfig.successTip,errorTip:this.mergedCopyConfig.errorTip,success:()=>{this.$emit("on-copy-success"),this.copied=!0,this.copyTimeout&&clearTimeout(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.copied=!1},3e3)},error:()=>{this.$emit("on-copy-error")}})},handleEdit(){this.editContent=this.currentContent?this.currentContent:this.handleGetContent(),i.nextTick(()=>{this.editing=!0,this.$emit("on-edit-start"),i.nextTick(()=>{this.$refs.edit.focus({cursor:"end"})})})},handleEditBlur(){if(this.isEditESC){this.isEditESC=!1;return}this.handleEditSave(),this.$emit("on-edit-end",this.editContent)},handleEditChange(l){const u=l.target.value;this.editContent=u,this.$emit("on-edit-change",u)},handleEditSave(){this.$emit("update:modelValue",this.editContent),this.editing=!1},handleEditKeydown(l){const{keyCode:u}=l;u===zt.ENTER&&l.preventDefault(),this.lastKeyCode=u},handleEditKeyup(l){const{keyCode:u,ctrlKey:m,altKey:k,metaKey:C,shiftKey:v}=l;this.lastKeyCode===u&&!m&&!k&&!C&&!v&&(u===zt.ENTER?(this.handleEditSave(),this.$emit("on-edit-end",this.editContent)):u===zt.ESC&&(this.isEditESC=!0,this.$emit("on-edit-cancel"),this.editing=!1))},handleUpdateEllipsisStatus(){if(this.ellipsis&&!this.ellipsisExpanded){const l=this.$refs.typography;this.isEllipsis=l.scrollHeight>l.clientHeight}else this.isEllipsis=!1},handleCreateObserver(){this.ellipsis&&!this.ellipsisExpanded&&(this.observer=Qd(),this.observer.listenTo(this.$refs.typography,this.handleUpdateEllipsisStatus))},handleRemoveObserver(){this.observer&&(this.observer.removeListener(this.$refs.typography,this.handleUpdateEllipsisStatus),this.observer=null)}},render(){let l=[];const u=this.wrapperDecorations();if(l.push(u),this.editable){const m=this.mergedEditConfig.triggerType;if(m==="icon"||m==="both"){const k=this.$slots.editIcon?this.$slots.editIcon():i.h(S,{type:"md-create"}),C=i.h("div",{class:"ivu-typography-edit",onClick:this.handleEdit},k);if(this.mergedEditConfig.tooltip){const v=i.h(Ol,{content:this.mergedEditConfig.tooltip,placement:"top"},()=>C);l.push(v)}else l.push(C)}}if(this.copyable){const m=this.$slots.copyIcon?this.$slots.copyIcon({copied:this.copied}):i.h(S,{type:this.copied?"md-checkmark":"md-copy"}),k=i.h("div",{class:["ivu-typography-copy",{"ivu-typography-copy-success":this.copied}],onClick:this.handleCopy},m);if(this.mergedCopyConfig.tooltips instanceof Array&&this.mergedCopyConfig.tooltips.length===2){const C=i.h(Ol,{content:this.copied?this.mergedCopyConfig.tooltips[1]:this.mergedCopyConfig.tooltips[0],placement:"top"},()=>k);l.push(C)}else l.push(k)}if(this.editing){const m=i.h(Do,{ref:"edit",modelValue:this.editContent,type:"textarea",autosize:this.mergedEditConfig.autosize,maxlength:this.mergedEditConfig.maxlength,"onOn-blur":this.handleEditBlur,"onOn-keydown":this.handleEditKeydown,"onOn-keyup":this.handleEditKeyup,"onOn-change":this.handleEditChange}),k=this.$slots.enterIcon?this.$slots.enterIcon():i.h(S,{type:"md-return-left"}),C=i.h("span",{class:"ivu-typography-edit-content-confirm"},k);return i.h("div",{class:["ivu-typography","ivu-typography-edit-content",{[`ivu-typography-h${this.level}`]:this.level,"ivu-typography-div":!this.level}]},[m,C])}else{const m={};this.ellipsis&&!this.ellipsisExpanded&&(m["-webkit-line-clamp"]=this.mergedEllipsisConfig.rows);const C=i.h(this.component,{ref:"typography",class:this.classes,...this.linkProps,style:m,onClick:this.handleClickContent},[l,null]);return this.ellipsis&&!this.ellipsisExpanded&&this.isEllipsis&&this.mergedEllipsisConfig.tooltip?i.h(Ol,{content:this.mergedEllipsisConfig.tooltip===!0?this.handleGetContent():this.mergedEllipsisConfig.tooltip,placement:this.placement,transfer:this.transfer,theme:this.theme,maxWidth:this.maxWidth},()=>C):C}},beforeUnmount(){this.handleRemoveObserver()}},F5={name:"Link",mixins:[Dm],render(){return i.h(u1,{...this.$props,component:"a",...this.commonEvents()},this.commonSlots())}};function z5(){return Qe(),we}let X5=z5();lo.newInstance=l=>{if(!s)return;const u=l||{};let m=null;const k=i.createApp({data(){return Object.assign({},u,{})},render(){let R="";return this.render?R=i.h(lo,{fix:!0,fullscreen:!0,ref:"spin"},[this.render(i.h)]):R=i.h(lo,{size:"large",fix:!0,fullscreen:!0,ref:"spin"}),i.h("div",{class:"ivu-spin-fullscreen ivu-spin-fullscreen-wrapper",style:{"z-index":2010+X5}},[R])},created(){m=i.getCurrentInstance()}}),C=document.createElement("div");document.body.appendChild(C),k.mount(C);const v=m.refs.spin;return{show(){i.nextTick(()=>{m.refs.spin.visible=!0,X5=z5()})},remove(R){v.visible=!1,setTimeout(function(){k.unmount(),document.body.removeChild(C),R()},500)},component:v}};let Nm;function W5(l=void 0){return Nm=Nm||lo.newInstance({render:l}),Nm}function jte(l){const u="render"in l?l.render:void 0;W5(u).show(l)}lo.show=function(l={}){return jte(l)},lo.hide=function(){if(!Nm)return!1;W5().remove(()=>{Nm=null})};const $m="ivu-list",qte={name:"List",provide(){return{ListInstance:this}},components:{Spin:lo},props:{border:{type:Boolean,default:!1},itemLayout:{validator(l){return _(l,["horizontal","vertical"])},default:"horizontal"},header:{type:String,default:""},footer:{type:String,default:""},loading:{type:Boolean,default:!1},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},split:{type:Boolean,default:!0}},data(){return{}},computed:{classes(){return[`${$m}`,`${$m}-${this.size}`,`${$m}-${this.itemLayout}`,{[`${$m}-bordered`]:this.border,[`${$m}-split`]:this.split}]}},methods:{}},Zte={key:0,class:"ivu-list-header"},Kte={class:"ivu-list-container"},Jte={class:"ivu-list-items"},eie={key:2,class:"ivu-list-footer"};function tie(l,u,m,k,C,v){const R=i.resolveComponent("Spin");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[m.header||l.$slots.header?(i.openBlock(),i.createElementBlock("div",Zte,[i.renderSlot(l.$slots,"header",{},()=>[i.createTextVNode(i.toDisplayString(m.header),1)])])):i.createCommentVNode("",!0),i.createElementVNode("div",Kte,[i.createElementVNode("ul",Jte,[i.renderSlot(l.$slots,"default")])]),m.loading?(i.openBlock(),i.createBlock(R,{key:1,fix:"",size:"large"},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"spin")]),_:3})):i.createCommentVNode("",!0),m.footer||l.$slots.footer?(i.openBlock(),i.createElementBlock("div",eie,[i.renderSlot(l.$slots,"footer",{},()=>[i.createTextVNode(i.toDisplayString(m.footer),1)])])):i.createCommentVNode("",!0)],2)}var Q5=c(qte,[["render",tie]]);const iie={name:"ListItem",inject:["ListInstance"],props:{},computed:{itemLayout(){return this.ListInstance.itemLayout},isItemContainsTextNode(){let l;return this.$slots.default().forEach(u=>{typeof u=="string"&&(l=!0)}),l},isFlexMode(){const l=this.$slots.extra;return this.itemLayout==="vertical"?!!l:!this.isItemContainsTextNode},classes(){return[{"ivu-list-item-no-flex":!this.isFlexMode}]}}},nie={class:"ivu-list-item-main"},rie={key:0,class:"ivu-list-item-action"},sie={class:"ivu-list-item-extra"},oie={key:0,class:"ivu-list-item-action"},aie={class:"ivu-list-item-extra"};function lie(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(["ivu-list-item",v.classes])},[v.itemLayout==="vertical"&&l.$slots.extra?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createElementVNode("div",nie,[i.renderSlot(l.$slots,"default"),l.$slots.action?(i.openBlock(),i.createElementBlock("ul",rie,[i.renderSlot(l.$slots,"action")])):i.createCommentVNode("",!0)]),i.createElementVNode("div",sie,[i.renderSlot(l.$slots,"extra")])],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.renderSlot(l.$slots,"default"),l.$slots.action?(i.openBlock(),i.createElementBlock("ul",oie,[i.renderSlot(l.$slots,"action")])):i.createCommentVNode("",!0),i.createElementVNode("div",aie,[i.renderSlot(l.$slots,"extra")])],64))],2)}var H5=c(iie,[["render",lie]]);const cie={name:"ListItemMeta",components:{Avatar:pm},props:{avatar:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""}}},hie={class:"ivu-list-item-meta"},uie={key:0,class:"ivu-list-item-meta-avatar"},die={class:"ivu-list-item-meta-content"},fie={key:0,class:"ivu-list-item-meta-title"},pie={key:1,class:"ivu-list-item-meta-description"};function mie(l,u,m,k,C,v){const R=i.resolveComponent("Avatar");return i.openBlock(),i.createElementBlock("div",hie,[m.avatar||l.$slots.avatar?(i.openBlock(),i.createElementBlock("div",uie,[i.renderSlot(l.$slots,"avatar",{},()=>[i.createVNode(R,{src:m.avatar},null,8,["src"])])])):i.createCommentVNode("",!0),i.createElementVNode("div",die,[m.title||l.$slots.title?(i.openBlock(),i.createElementBlock("div",fie,[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])])):i.createCommentVNode("",!0),m.description||l.$slots.description?(i.openBlock(),i.createElementBlock("div",pie,[i.renderSlot(l.$slots,"description",{},()=>[i.createTextVNode(i.toDisplayString(m.description),1)])])):i.createCommentVNode("",!0)])])}var G5=c(cie,[["render",mie]]);const d1="ivu-loading-bar",gie={name:"LoadingBar",props:{color:{type:String,default:"primary"},failedColor:{type:String,default:"error"},height:{type:Number,default:2}},data(){return{percent:0,status:"success",show:!1}},computed:{classes(){return`${d1}`},innerClasses(){return[`${d1}-inner`,{[`${d1}-inner-color-primary`]:this.color==="primary"&&this.status==="success",[`${d1}-inner-failed-color-error`]:this.failedColor==="error"&&this.status==="error"}]},outerStyles(){return{height:`${this.height}px`}},styles(){let l={width:`${this.percent}%`,height:`${this.height}px`};return this.color!=="primary"&&this.status==="success"&&(l.backgroundColor=this.color),this.failedColor!=="error"&&this.status==="error"&&(l.backgroundColor=this.failedColor),l}}};function yie(l,u,m,k,C,v){return i.openBlock(),i.createBlock(i.Transition,{name:"fade"},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.outerStyles)},[i.createElementVNode("div",{class:i.normalizeClass(v.innerClasses),style:i.normalizeStyle(v.styles)},null,6)],6),[[i.vShow,C.show]])]),_:1})}var AS=c(gie,[["render",yie]]);AS.newInstance=l=>{if(!s)return;const u=l||{};let m=null;const k=i.createApp({data(){return u},render(){return i.h(AS,Object.assign({ref:"loadingBar"},u))},created(){m=i.getCurrentInstance()}}),C=document.createElement("div");document.body.appendChild(C),k.mount(C);const v=m.refs.loadingBar;return{update(R){"percent"in R&&(v.percent=R.percent),R.status&&(v.status=R.status),"show"in R&&(v.show=R.show)},component:v,destroy(){k.unmount(),document.body.removeChild(C)}}};let f1,Y5="primary",j5=800,q5="error",Z5=2,Vm;function K5(){return f1=f1||AS.newInstance({color:Y5,failedColor:q5,height:Z5}),f1}function au(l){K5().update(l)}function J5(){setTimeout(()=>{au({show:!1}),setTimeout(()=>{au({percent:0})},200)},j5)}function Lm(){Vm&&(clearInterval(Vm),Vm=null)}var RS={start(){if(Vm)return;let l=0;au({percent:l,status:"success",show:!0}),Vm=setInterval(()=>{l+=Math.floor(Math.random()*3+1),l>95&&Lm(),au({percent:l,status:"success",show:!0})},200)},update(l){Lm(),au({percent:l,status:"success",show:!0})},finish(){Lm(),au({percent:100,status:"success",show:!0}),J5()},error(){Lm(),au({percent:100,status:"error",show:!0}),J5()},config(l){l.color&&(Y5=l.color),l.duration&&(j5=l.duration),l.failedColor&&(q5=l.failedColor),l.height&&(Z5=l.height)},destroy(){Lm();let l=K5();f1=null,l.destroy()}};const vie={name:"Login",components:{Form:s1},emits:["on-submit"],provide(){return{LoginInstance:this}},props:{},data(){return{formValidate:{}}},methods:{handleSubmit(){this.$refs.form.validate(l=>{this.$emit("on-submit",l,JSON.parse(JSON.stringify(this.formValidate)))})},handleValidate(l,u){let m=!0;l.forEach(k=>{this.$refs.form.validateField(k,C=>{C&&(m=!1)})}),u(m)}}},bie={class:"ivu-login"};function xie(l,u,m,k,C,v){const R=i.resolveComponent("Form");return i.openBlock(),i.createElementBlock("div",bie,[i.createVNode(R,{ref:"form",model:C.formValidate,onSubmit:u[0]||(u[0]=i.withModifiers(()=>{},["prevent"]))},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"default")]),_:3},8,["model"])])}var eR=c(vie,[["render",xie]]);const IS="ivu-menu",Oie={name:"Menu",emits:["on-select","on-open-change"],provide(){return{MenuInstance:this}},props:{mode:{validator(l){return _(l,["horizontal","vertical"])},default:"vertical"},theme:{validator(l){return _(l,["light","dark","primary"])},default:"light"},activeName:{type:[String,Number]},openNames:{type:Array,default(){return[]}},accordion:{type:Boolean,default:!1},width:{type:String,default:"240px"}},data(){return{currentActiveName:this.activeName,openedNames:[],submenuList:[],menuItemList:[],ready:!1}},computed:{classes(){let l=this.theme;return this.mode==="vertical"&&this.theme==="primary"&&(l="light"),[`${IS}`,`${IS}-${l}`,{[`${IS}-${this.mode}`]:this.mode}]},styles(){let l={};return this.mode==="vertical"&&(l.width=this.width),l}},methods:{updateActiveName(){this.currentActiveName===void 0&&(this.currentActiveName=-1),this.submenuList.map(l=>l.submenu).forEach(l=>{l.handleUpdateActiveName(!1)}),this.menuItemList.map(l=>l.menuitem).forEach(l=>{l.handleUpdateActiveName(this.currentActiveName)})},updateOpenKeys(l){const u=[...this.openedNames].indexOf(l),m=this.submenuList.map(C=>C.submenu);if(this.accordion&&m.forEach(C=>{C.opened=!1}),u>=0){let C=null;m.forEach(v=>{v.name===l&&(C=v,v.opened=!1)}),U(C,"Submenu").forEach(v=>{v.opened=!0}),C.childSubmenuList.map(v=>v.submenu).forEach(v=>{v.opened=!1})}else if(this.accordion){let C=null;m.forEach(v=>{v.name===l&&(C=v,v.opened=!0)}),U(C,"Submenu").forEach(v=>{v.opened=!0})}else this.submenuList.map(C=>C.submenu).forEach(C=>{C.name===l&&(C.opened=!0)});let k=m.filter(C=>C.opened).map(C=>C.name);this.openedNames=[...k],this.$emit("on-open-change",k)},updateOpened(){const l=(this.submenuList||[]).map(u=>u.submenu);l.length&&l.forEach(u=>{this.openedNames.indexOf(u.name)>-1?u.opened=!0:u.opened=!1})},handleEmitSelectEvent(l){this.$emit("on-select",l)},handleMenuItemSelect(l){this.currentActiveName=l,this.$emit("on-select",l)}},mounted(){this.openedNames=[...this.openNames],this.updateOpened(),i.nextTick(()=>{this.updateActiveName(),this.ready=!0})},watch:{openNames(l){this.openedNames=l},activeName(l){this.currentActiveName=l},currentActiveName(){this.updateActiveName()}}};function wie(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("ul",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.styles)},[i.renderSlot(l.$slots,"default")],6)}var DS=c(Oie,[["render",wie]]),NS={inject:{MenuInstance:{default:null},SubmenuInstance:{default:null}},data(){return{menu:this.MenuInstance}},computed:{hasParentSubmenu(){return!!this.SubmenuInstance},parentSubmenuNum(){return U(this,"Submenu").length},mode(){return this.MenuInstance.mode}}};const _ie="ivu-menu",Sie={name:"MenuGroup",mixins:[NS],props:{title:{type:String,default:""}},data(){return{prefixCls:_ie}},computed:{groupStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*28+"px"}:{}}}};function Cie(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass([C.prefixCls+"-item-group"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-item-group-title"]),style:i.normalizeStyle(v.groupStyle)},i.toDisplayString(m.title),7),i.createElementVNode("ul",null,[i.renderSlot(l.$slots,"default")])],2)}var tR=c(Sie,[["render",Cie]]);const p1="ivu-menu",kie={name:"MenuItem",mixins:[NS,pe],props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{active:!1,id:te(6)}},computed:{classes(){return[`${p1}-item`,{[`${p1}-item-active`]:this.active,[`${p1}-item-selected`]:this.active,[`${p1}-item-disabled`]:this.disabled}]},itemStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}}},methods:{handleClickItem(l,u=!1){if(!this.disabled)if(u||this.target==="_blank"){this.handleCheckClick(l,u);let m=V(this,"Menu");m&&m.handleEmitSelectEvent(this.name)}else V(this,"Submenu")?this.SubmenuInstance.handleMenuItemSelect(this.name):this.MenuInstance.handleMenuItemSelect(this.name),this.handleCheckClick(l,u)},handleUpdateActiveName(l){this.name===l?(this.active=!0,this.SubmenuInstance&&this.SubmenuInstance.handleUpdateActiveName(l)):this.active=!1},addMenuItem(){const l=this.MenuInstance;l.menuItemList||(l.menuItemList=[]),l.menuItemList.push({id:this.id,menuitem:this})},removeMenuItem(){const l=this.MenuInstance;if(l.menuItemList&&l.menuItemList.length){const u=l.menuItemList.findIndex(m=>m.id===this.id);l.menuItemList.splice(u,1)}}},mounted(){this.addMenuItem()},beforeUnmount(){this.removeMenuItem()}},Tie=["href","target"];function Mie(l,u,m,k,C,v){return l.to?(i.openBlock(),i.createElementBlock("a",{key:0,href:l.linkUrl,target:l.target,class:i.normalizeClass(v.classes),onClick:[u[0]||(u[0]=i.withModifiers(R=>v.handleClickItem(R,!1),["exact"])),u[1]||(u[1]=i.withModifiers(R=>v.handleClickItem(R,!0),["ctrl"])),u[2]||(u[2]=i.withModifiers(R=>v.handleClickItem(R,!0),["meta"]))],style:i.normalizeStyle(v.itemStyle)},[i.renderSlot(l.$slots,"default")],14,Tie)):(i.openBlock(),i.createElementBlock("li",{key:1,class:i.normalizeClass(v.classes),onClick:u[3]||(u[3]=i.withModifiers((...R)=>v.handleClickItem&&v.handleClickItem(...R),["stop"])),style:i.normalizeStyle(v.itemStyle)},[i.renderSlot(l.$slots,"default")],6))}var iR=c(kie,[["render",Mie]]);const nR={name:"Mobile",mixins:[xm],data(){return{className:"ivu-login-mobile",prefix:"ios-phone-portrait",placeholder:"请输入手机号码",type:"text"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:rS.Mobile,trigger:"change"},{pattern:/^1\d{10}$/,message:"输入的手机号码格式不正确！",trigger:"change"}]}}}},Ds="ivu-modal",rR={x:null,y:null,dragX:null,dragY:null,dragging:!1,rect:null},Eie={inheritAttrs:!1,name:"Modal",mixins:[Ki,_S],components:{Icon:S,iButton:fs},emits:["on-cancel","on-ok","on-hidden","on-visible-change","update:modelValue"],provide(){return{ModalInstance:this}},props:{modelValue:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.modal.maskClosable===""?!0:l.$VIEWUI.modal.maskClosable}},title:{type:String},width:{type:[Number,String],default:520},okText:{type:String},cancelText:{type:String},loading:{type:Boolean,default:!1},styles:{type:Object,default(){return{}}},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},transitionNames:{type:Array,default(){return["ease","fade"]}},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!0:l.$VIEWUI.transfer}},fullscreen:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyDistance:{type:Number,default:10},resetDragPosition:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},beforeClose:Function,render:Function},data(){return{prefixCls:Ds,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.modelValue,dragData:L(rR),modalIndex:this.handleGetModalIndex(),isMouseTriggerIn:!1,id:te(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${Ds}-wrap`,{[`${Ds}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${Ds}-no-mask`]:!this.showMask}]},wrapStyles(){return{zIndex:this.modalIndex+this.zIndex}},maskClasses(){return`${Ds}-mask`},classes(){return[`${Ds}`,{[`${Ds}-fullscreen`]:this.fullscreen,[`${Ds}-fullscreen-no-header`]:this.fullscreen&&!this.showHead,[`${Ds}-fullscreen-no-footer`]:this.fullscreen&&this.footerHide}]},contentClasses(){return[`${Ds}-content`,{[`${Ds}-content-no-mask`]:!this.showMask,[`${Ds}-content-drag`]:this.draggable&&!this.fullscreen,[`${Ds}-content-dragging`]:this.draggable&&this.dragData.dragging}]},mainStyles(){let l={};const u=parseInt(this.width),m=this.dragData.x!==null?{top:0}:{width:u<=100?`${u}%`:`${u}px`},k=this.styles?this.styles:{};return Object.assign(l,m,k),l},contentStyles(){let l={};if(this.draggable&&!this.fullscreen){const u=this.styles.top?parseFloat(this.styles.top):0,m=this.styles.left?parseFloat(this.styles.left):0;this.dragData.x!==null&&(l.left=`${this.dragData.x-m}px`),this.dragData.y!==null&&(l.top=`${this.dragData.y}px`),this.dragData.y!==null&&(l.top=`${this.dragData.y-u}px`);const k=parseInt(this.width),C={width:k<=100?`${k}%`:`${k}px`};Object.assign(l,C)}return l},localeOkText(){return this.okText===void 0?this.t("i.modal.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.modal.cancelText"):this.cancelText},showMask(){return this.mask}},methods:{close(){if(!this.beforeClose)return this.handleClose();const l=this.beforeClose();l&&l.then?l.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-cancel")},handleMask(){this.maskClosable&&this.showMask&&this.close()},handleWrapClick(l){if(this.isMouseTriggerIn){this.isMouseTriggerIn=!1;return}const u=l.target.getAttribute("class");u&&u.indexOf(`${Ds}-wrap`)>-1&&this.handleMask()},handleMousedown(){this.isMouseTriggerIn=!0},cancel(){this.close()},ok(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("update:modelValue",!1)),this.$emit("on-ok")},EscClose(l){if(this.visible&&this.closable&&l.keyCode===27){const u=this.$root.modalList.map(m=>m.modal).filter(m=>m.$data.visible&&m.$props.closable).sort((m,k)=>m.$data.modalIndex<k.$data.modalIndex?1:-1)[0];setTimeout(()=>{u.close()},0)}},animationFinish(){this.$emit("on-hidden")},handleMoveStart(l){if(!this.draggable||this.fullscreen)return!1;const u=this.$refs.content.getBoundingClientRect();this.dragData.rect=u,this.dragData.x=u.x||u.left,this.dragData.y=u.y||u.top;const m={x:l.clientX,y:l.clientY};this.dragData.dragX=m.x,this.dragData.dragY=m.y,this.dragData.dragging=!0,o(window,"mousemove",this.handleMoveMove),o(window,"mouseup",this.handleMoveEnd)},handleMoveMove(l){if(!this.dragData.dragging||this.fullscreen)return!1;const u={x:l.clientX,y:l.clientY},m={x:u.x-this.dragData.dragX,y:u.y-this.dragData.dragY};if(s&&this.sticky){const k=document.documentElement.clientWidth,C=document.documentElement.clientHeight;this.dragData.x+m.x<=this.stickyDistance&&m.x<0?this.dragData.x=0:this.dragData.x+this.dragData.rect.width-k>-this.stickyDistance&&m.x>0?this.dragData.x=k-this.dragData.rect.width:this.dragData.x+=m.x,this.dragData.y+m.y<=this.stickyDistance&&m.y<0?this.dragData.y=0:this.dragData.y+this.dragData.rect.height-C>-this.stickyDistance&&m.y>0?this.dragData.y=C-this.dragData.rect.height:this.dragData.y+=m.y}else this.dragData.x+=m.x,this.dragData.y+=m.y;this.dragData.dragX=u.x,this.dragData.dragY=u.y},handleMoveEnd(){this.dragData.dragging=!1,a(window,"mousemove",this.handleMoveMove),a(window,"mouseup",this.handleMoveEnd)},handleGetModalIndex(){return Qe(),we},handleClickModal(){if(this.draggable){if(Me!==this.lastVisibleIndex){this.lastVisibleIndex=Me;return}this.modalIndex=this.handleGetModalIndex()}},addModal(){const l=this.$root;l.modalList||(l.modalList=[]),l.modalList.push({id:this.id,modal:this})},removeModal(){const l=this.$root;if(!l.modalList)return;const u=l.modalList.findIndex(m=>m.id===this.id);l.modalList.splice(u,1)}},watch:{modelValue(l){this.visible=l},visible(l){l===!1?(this.buttonLoading=!1,this.timer=setTimeout(()=>{this.wrapShow=!1,this.removeScrollEffect()},300)):(this.lastVisible!==l&&(this.modalIndex=this.handleGetModalIndex(),Le()),this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(u=>{u.table.handleOnVisibleChange(l)}),this.sliderList.forEach(u=>{u.slider.handleOnVisibleChange(l)}),this.$emit("on-visible-change",l),this.lastVisible=l,this.lastVisibleIndex=Me,l&&this.resetDragPosition&&(this.dragData=L(rR))},loading(l){l||(this.buttonLoading=!1)},scrollable(l){l?this.removeScrollEffect():this.addScrollEffect()},title(l){this.$slots.header===void 0&&(this.showHead=!!l)}},mounted(){this.visible&&(this.wrapShow=!0);let l=!0;this.$slots.header===void 0&&!this.title&&(l=!1),this.showHead=l,this.addModal(),s&&document.addEventListener("keydown",this.EscClose)},beforeUnmount(){this.removeModal(),s&&document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()}};function Pie(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("i-button");return i.openBlock(),i.createBlock(i.Teleport,{to:"body",disabled:!m.transfer},[i.createVNode(i.Transition,{name:m.transitionNames[1]},{default:i.withCtx(()=>[v.showMask?i.withDirectives((i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.maskClasses),style:i.normalizeStyle(v.wrapStyles),onClick:u[0]||(u[0]=(...G)=>v.handleMask&&v.handleMask(...G))},null,6)),[[i.vShow,C.visible]]):i.createCommentVNode("",!0)]),_:1},8,["name"]),i.createElementVNode("div",{class:i.normalizeClass(v.wrapClasses),style:i.normalizeStyle(v.wrapStyles),onClick:u[5]||(u[5]=(...G)=>v.handleWrapClick&&v.handleWrapClick(...G))},[i.createVNode(i.Transition,{name:m.transitionNames[0],onAfterLeave:v.animationFinish},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("div",i.mergeProps(l.$attrs,{class:v.classes,style:v.mainStyles,onMousedown:u[4]||(u[4]=(...G)=>v.handleMousedown&&v.handleMousedown(...G))}),[i.createElementVNode("div",{class:i.normalizeClass(v.contentClasses),ref:"content",style:i.normalizeStyle(v.contentStyles),onClick:u[3]||(u[3]=(...G)=>v.handleClickModal&&v.handleClickModal(...G))},[m.closable?(i.openBlock(),i.createElementBlock("a",{key:0,class:i.normalizeClass([C.prefixCls+"-close"]),onClick:u[1]||(u[1]=(...G)=>v.close&&v.close(...G))},[i.renderSlot(l.$slots,"close",{},()=>[i.createVNode(R,{type:"ios-close"})])],2)):i.createCommentVNode("",!0),C.showHead?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass([C.prefixCls+"-header"]),onMousedown:u[2]||(u[2]=(...G)=>v.handleMoveStart&&v.handleMoveStart(...G))},[i.renderSlot(l.$slots,"header",{},()=>[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-header-inner"])},i.toDisplayString(m.title),3)])],34)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"])},[i.renderSlot(l.$slots,"default")],2),m.footerHide?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("div",{key:2,class:i.normalizeClass([C.prefixCls+"-footer"])},[i.renderSlot(l.$slots,"footer",{},()=>[i.createVNode(B,{type:"text",onClick:v.cancel},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(v.localeCancelText),1)]),_:1},8,["onClick"]),i.createVNode(B,{type:"primary",loading:C.buttonLoading,onClick:v.ok},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(v.localeOkText),1)]),_:1},8,["loading","onClick"])])],2))],6)],16),[[i.vShow,C.visible]])]),_:3},8,["name","onAfterLeave"])],6)],8,["disabled"])}var $o=c(Eie,[["render",Pie]]);const Cl="ivu-modal-confirm";$o.newInstance=l=>{if(!s)return;const u=l||{},m=document.createElement("div");document.body.appendChild(m);let k=null;const C=i.createApp({mixins:[Ki],data(){return Object.assign({},u,{visible:!1,width:416,title:"",body:"",iconType:"",iconName:"",okText:void 0,cancelText:void 0,showCancel:!1,loading:!1,buttonLoading:!1,scrollable:!1,closable:!1,closing:!1})},render(){let R=[];this.showCancel&&R.push(i.h(fs,{type:"text",onClick:this.cancel},()=>this.localeCancelText)),R.push(i.h(fs,{type:"primary",loading:this.buttonLoading,onClick:this.ok},()=>this.localeOkText));let B;this.render?B=i.h("div",{class:`${Cl}-body ${Cl}-body-render`},[this.render(i.h)]):B=i.h("div",{class:`${Cl}-body`},[i.h("div",{innerHTML:this.body})]);let G;return this.title&&(G=i.h("div",{class:`${Cl}-head`},[i.h("div",{class:this.iconTypeCls},[i.h("i",{class:this.iconNameCls})]),i.h("div",{class:`${Cl}-head-title`,innerHTML:this.title})])),i.h($o,Object.assign({},u,{width:this.width,scrollable:this.scrollable,closable:this.closable,ref:"modal"},{modelValue:this.visible,"onUpdate:modelValue":W=>this.visible=W,"onOn-cancel":this.cancel}),()=>i.h("div",{class:Cl},[G,B,i.h("div",{class:`${Cl}-footer`},R)]))},computed:{iconTypeCls(){return[`${Cl}-head-icon`,`${Cl}-head-icon-${this.iconType}`]},iconNameCls(){return["ivu-icon",`ivu-icon-${this.iconName}`]},localeOkText(){return this.okText?this.okText:this.t("i.modal.okText")},localeCancelText(){return this.cancelText?this.cancelText:this.t("i.modal.cancelText")}},methods:{cancel(){this.closing||(this.$refs.modal.visible=!1,this.buttonLoading=!1,this.onCancel(),this.remove())},ok(){this.closing||(this.loading?this.buttonLoading=!0:(this.$refs.modal.visible=!1,this.remove()),this.onOk())},remove(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.destroy()},300)},destroy(){C.unmount(),document.body.removeChild(m),this.onRemove()},onOk(){},onCancel(){},onRemove(){}},created(){k=i.getCurrentInstance()}});C.mount(m);const v=k.refs.modal;return{show(R){switch(v.$parent.showCancel=R.showCancel,v.$parent.iconType=R.icon,R.icon){case"info":v.$parent.iconName="ios-information-circle";break;case"success":v.$parent.iconName="ios-checkmark-circle";break;case"warning":v.$parent.iconName="ios-alert";break;case"error":v.$parent.iconName="ios-close-circle";break;case"confirm":v.$parent.iconName="ios-help-circle";break}"width"in R&&(v.$parent.width=R.width),"closable"in R&&(v.$parent.closable=R.closable),"title"in R&&(v.$parent.title=R.title),"content"in R&&(v.$parent.body=R.content),"okText"in R&&(v.$parent.okText=R.okText),"cancelText"in R&&(v.$parent.cancelText=R.cancelText),"onCancel"in R&&(v.$parent.onCancel=R.onCancel),"onOk"in R&&(v.$parent.onOk=R.onOk),"loading"in R&&(v.$parent.loading=R.loading),"scrollable"in R&&(v.$parent.scrollable=R.scrollable),v.$parent.onRemove=R.onRemove,v.visible=!0},remove(){v.visible=!1,v.$parent.buttonLoading=!1,v.$parent.remove()},component:v}};let Bm;function sR(l=void 0,u=!0){return Bm=Bm||$o.newInstance({closable:!1,maskClosable:!1,footerHide:!0,render:l,lockScroll:u}),Bm}function Um(l){const u="render"in l?l.render:void 0,m="lockScroll"in l?l.lockScroll:!0;let k=sR(u,m);l.onRemove=function(){Bm=null},k.show(l)}$o.info=function(l={}){return l.icon="info",l.showCancel=!1,Um(l)},$o.success=function(l={}){return l.icon="success",l.showCancel=!1,Um(l)},$o.warning=function(l={}){return l.icon="warning",l.showCancel=!1,Um(l)},$o.error=function(l={}){return l.icon="error",l.showCancel=!1,Um(l)},$o.confirm=function(l={}){return l.icon="confirm",l.showCancel=!0,Um(l)},$o.remove=function(){if(!Bm)return!1;sR().remove()};const co="ivu-notice",oR="ivu-icon",Aie="ivu_notice_key_";let aR=24,lR=4.5,Hd,cR=1;const Rie={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle"},hR="move-notice";function uR(){return Hd=Hd||Hv.newInstance({prefixCls:co,styles:{top:`${aR}px`,right:0},transitionName:hR}),Hd}function Fm(l,u){const m=u.title||"",k=u.desc||"",C=u.name||`${Aie}${cR}`,v=u.onClose||function(){},R=u.render,B=u.duration===0?0:u.duration||lR;cR++;let G=uR(),W,j;const ce=u.render&&!m?"":k||u.render?` ${co}-with-desc`:"";if(l==="normal")j=!1,W=`
            <div class="${co}-custom-content ${co}-with-normal ${ce}">
                <div class="${co}-title">${m}</div>
                <div class="${co}-desc">${k}</div>
            </div>
        `;else{const Oe=Rie[l],xe=ce===""?"":"-outline";j=!0,W=`
            <div class="${co}-custom-content ${co}-with-icon ${co}-with-${l} ${ce}">
                <span class="${co}-icon ${co}-icon-${l}">
                    <i class="${oR} ${oR}-${Oe}${xe}"></i>
                </span>
                <div class="${co}-title">${m}</div>
                <div class="${co}-desc">${k}</div>
            </div>
        `}G.notice({name:C.toString(),duration:B,styles:{},transitionName:hR,content:W,withIcon:j,render:R,hasTitle:!!m,onClose:v,closable:!0,type:"notice"})}var $S={open(l){return Fm("normal",l)},info(l){return Fm("info",l)},success(l){return Fm("success",l)},warning(l){return Fm("warning",l)},error(l){return Fm("error",l)},config(l){l.top&&(aR=l.top),(l.duration||l.duration===0)&&(lR=l.duration)},close(l){if(l)l=l.toString(),Hd&&Hd.remove(l);else return!1},destroy(){let l=uR();Hd=null,l.destroy("ivu-notice")}};const Tr="ivu-tabs",VS=300,dR=(l,u,m,k)=>{const C=(l.findIndex(R=>R.name===u)+m+l.length)%l.length,v=l[C];return v.disabled?dR(l,v.name,m):v},fR=(l,u)=>{try{l.focus()}catch{}if(s&&document.activeElement==l&&l!==u)return!0;const m=l.children;for(let k of m)if(fR(k,u))return!0;return!1},Iie={name:"Tabs",mixins:[oa],emits:["on-click","on-dblclick","on-contextmenu","on-tab-remove","on-drag-drop","update:modelValue"],components:{Icon:S,Render:k4,Dropdown:nu,DropdownMenu:ru},provide(){return{TabsInstance:this}},props:{modelValue:{type:[String,Number]},type:{validator(l){return _(l,["line","card"])},default:"line"},size:{validator(l){return _(l,["small","default"])},default:"default"},animated:{type:Boolean,default:!0},captureFocus:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},beforeRemove:Function,name:{type:String},draggable:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:Tr,navList:[],barWidth:0,barOffset:0,activeKey:this.modelValue,focusedKey:this.modelValue,showSlot:!1,navStyle:{transform:""},scrollable:!1,transitioning:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},paneList:[],tableList:[]}},computed:{classes(){return[`${Tr}`,{[`${Tr}-card`]:this.type==="card",[`${Tr}-mini`]:this.size==="small"&&this.type==="line",[`${Tr}-no-animation`]:!this.animated}]},contentClasses(){return[`${Tr}-content`,{[`${Tr}-content-animated`]:this.animated}]},barClasses(){return[`${Tr}-ink-bar`,{[`${Tr}-ink-bar-animated`]:this.animated}]},contentStyle(){const l=this.getTabIndex(this.activeKey),u=l===0?"0%":`-${l}00%`;let m={};return l>-1&&(m={transform:`translateX(${u}) translateZ(0px)`}),m},barStyle(){let l={visibility:"hidden",width:`${this.barWidth}px`};return this.type==="line"&&(l.visibility="visible"),this.animated?l.transform=`translate3d(${this.barOffset}px, 0px, 0px)`:l.left=`${this.barOffset}px`,l},arrowType(){const l=this.globalConfig;let u="ios-close";return l&&(l.tabs.customCloseIcon?u="":l.tabs.closeIcon&&(u=l.tabs.closeIcon)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.tabs.customCloseIcon&&(u=l.tabs.customCloseIcon),u},arrowSize(){const l=this.globalConfig;let u="";return l&&l.tabs.closeIconSize&&(u=l.tabs.closeIconSize),u}},methods:{getTabs(){const l=this.paneList.map(m=>m.pane),u=[];return l.forEach(m=>{m.tab&&this.name?m.tab===this.name&&u.push(m):u.push(m)}),u.sort((m,k)=>{if(m.index&&k.index)return m.index>k.index?1:-1}),u},updateNav(){this.navList=[],this.getTabs().forEach((l,u)=>{this.navList.push({labelType:typeof l.label,label:l.label,icon:l.icon||"",name:l.currentName||u,disabled:l.disabled,closable:l.closable,contextMenu:l.contextMenu}),l.currentName||(l.currentName=u),u===0&&(this.activeKey||(this.activeKey=l.currentName||u))}),this.updateStatus(),this.updateBar()},updateBar(){i.nextTick(()=>{const l=this.getTabIndex(this.activeKey);if(!this.$refs.nav)return;const u=this.$refs.nav.querySelectorAll(`.${Tr}-tab`),m=u[l];if(this.barWidth=m?parseFloat(m.offsetWidth):0,l>0){let k=0;const C=this.size==="small"?0:16;for(let v=0;v<l;v++)k+=parseFloat(u[v].offsetWidth)+C;this.barOffset=k}else this.barOffset=0;this.updateNavScroll()})},updateStatus(){this.getTabs().forEach(l=>l.show=l.currentName===this.activeKey||this.animated)},tabCls(l){return[`${Tr}-tab`,{[`${Tr}-tab-disabled`]:l.disabled,[`${Tr}-tab-active`]:l.name===this.activeKey,[`${Tr}-tab-focused`]:l.name===this.focusedKey}]},handleChange(l){if(this.transitioning)return;this.transitioning=!0,setTimeout(()=>this.transitioning=!1,VS);const u=this.navList[l];!u||u.disabled||(this.activeKey=u.name,this.$emit("update:modelValue",u.name),this.$emit("on-click",u.name))},handleDblclick(l){const u=this.navList[l];!u||u.disabled||this.$emit("on-dblclick",u.name)},handleContextmenu(l,u){this.contextMenuVisible&&this.handleClickContextMenuOutside(),i.nextTick(()=>{const m=this.navList[l];if(!m||m.disabled||!m.contextMenu)return;u.preventDefault();const k=this.$refs.tabsWrap.getBoundingClientRect(),C={left:`${u.clientX-k.left}px`,top:`${u.clientY-k.top}px`};this.contextMenuStyles=C,this.contextMenuVisible=!0,this.$emit("on-contextmenu",m,u,C)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handlePreventSelect(l,u){const m=this.navList[l];!m||m.disabled||!m.contextMenu||u.preventDefault()},handleTabKeyNavigation(l){if(l.keyCode!==37&&l.keyCode!==39)return;const u=l.keyCode===39?1:-1,m=dR(this.navList,this.focusedKey,u);this.focusedKey=m.name},handleTabKeyboardSelect(l=!1){if(l)return;const u=this.focusedKey||0,m=this.getTabIndex(u);this.handleChange(m)},handleRemove(l){if(!this.beforeRemove)return this.handleRemoveTab(l);const u=this.beforeRemove(l);u&&u.then?u.then(()=>{this.handleRemoveTab(l)}):this.handleRemoveTab(l)},handleRemoveTab(l){const u=this.getTabs(),m=u[l];if(m.currentName===this.activeKey){const k=this.getTabs();let C=-1;if(k.length){const v=u.filter((B,G)=>!B.disabled&&G<l),R=u.filter((B,G)=>!B.disabled&&G>l);R.length?C=R[0].currentName:v.length?C=v[v.length-1].currentName:C=k[0].currentName}this.activeKey=C,this.$emit("update:modelValue",C)}this.$emit("on-tab-remove",m.currentName),this.updateNav()},showClose(l){return this.type==="card"?l.closable!==null?l.closable:this.closable:!1},scrollPrev(){const l=this.$refs.navScroll.offsetWidth,u=this.getCurrentScrollOffset();if(!u)return;let m=u>l?u-l:0;this.setOffset(m)},scrollNext(){const l=this.$refs.nav.offsetWidth,u=this.$refs.navScroll.offsetWidth,m=this.getCurrentScrollOffset();if(l-m<=u)return;let k=l-m>u*2?m+u:l-u;this.setOffset(k)},getCurrentScrollOffset(){const{navStyle:l}=this;return l.transform?Number(l.transform.match(/translateX\(-(\d+(\.\d+)*)px\)/)[1]):0},getTabIndex(l){return this.navList.findIndex(u=>u.name===l)},setOffset(l){this.navStyle.transform=`translateX(-${l}px)`},scrollToActiveTab(){if(!this.scrollable)return;const l=this.$refs.nav,u=this.$el.querySelector(`.${Tr}-tab-active`);if(!u)return;const m=this.$refs.navScroll,k=u.getBoundingClientRect(),C=m.getBoundingClientRect(),v=l.getBoundingClientRect(),R=this.getCurrentScrollOffset();let B=R;v.right<C.right&&(B=l.offsetWidth-C.width),k.left<C.left?B=R-(C.left-k.left):k.right>C.right&&(B=R+k.right-C.right),R!==B&&this.setOffset(Math.max(B,0))},updateNavScroll(){const l=this.$refs.nav.offsetWidth,u=this.$refs.navScroll.offsetWidth,m=this.getCurrentScrollOffset();u<l?(this.scrollable=!0,l-m<u&&this.setOffset(l-u)):(this.scrollable=!1,m>0&&this.setOffset(0))},handleScroll(l){l.preventDefault(),l.stopPropagation();const u=l.type;let m=0;(u==="DOMMouseScroll"||u==="mousewheel")&&(m=l.wheelDelta?l.wheelDelta:-(l.detail||0)*40),m>0?this.scrollPrev():this.scrollNext()},handleResize(){this.updateNavScroll()},isInsideHiddenElement(){if(!s)return;let l=this.$el.parentNode;for(;l&&l!==document.body;){if(l.style&&l.style.display==="none")return l;l=l.parentNode}return!1},updateVisibility(l){[...this.$refs.panes.querySelectorAll(`.${Tr}-tabpane`)].forEach((u,m)=>{l===m?([...u.children].filter(k=>k.classList.contains(`${Tr}-tabpane`)).forEach(k=>k.style.visibility="visible"),this.captureFocus&&setTimeout(()=>fR(u,u),VS)):setTimeout(()=>{[...u.children].filter(k=>k.classList.contains(`${Tr}-tabpane`)).forEach(k=>k.style.visibility="hidden")},VS)})},handleDrag(l,u){const m=this.navList[l];m&&u.dataTransfer.setData("tab-name",m.name)},handleDrop(l,u){const m=this.navList[l];if(m){const k=u.dataTransfer.getData("tab-name");u.preventDefault();let C=this.navList.map(B=>B.name);const v=parseInt(C.findIndex(B=>B===k)),R=parseInt(C.findIndex(B=>B===m.name));C.splice(R,1,...C.splice(v,1,C[R])),this.$emit("on-drag-drop",k,m.name,v,R,C)}},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},watch:{modelValue(l){this.activeKey=l,this.focusedKey=l},activeKey(l){this.focusedKey=l,this.updateBar(),this.updateStatus(),this.tableList.forEach(m=>{m.table.handleOnVisibleChange(!0)}),i.nextTick(()=>{this.scrollToActiveTab()});const u=Math.max(this.getTabIndex(this.focusedKey),0);this.updateVisibility(u)}},mounted(){this.showSlot=this.$slots.extra!==void 0,this.observer=Qd(),this.observer.listenTo(this.$refs.navWrap,this.handleResize);const l=this.isInsideHiddenElement();l&&(this.mutationObserver=new E(()=>{l.style.display!=="none"&&(this.updateBar(),this.mutationObserver.disconnect())}),this.mutationObserver.observe(l,{attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]})),this.handleTabKeyboardSelect(!0),this.updateVisibility(this.getTabIndex(this.activeKey))},beforeUnmount(){this.observer.removeListener(this.$refs.navWrap,this.handleResize),this.mutationObserver&&this.mutationObserver.disconnect()}},Die=["onClick","onDblclick","onContextmenu","onSelectstart","draggable","onDragstart","onDrop"];function Nie(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Render"),G=i.resolveComponent("DropdownMenu"),W=i.resolveComponent("Dropdown");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),ref:"tabsWrap"},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-bar"])},[C.showSlot?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-nav-right"])},[i.renderSlot(l.$slots,"extra")],2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-nav-container"]),tabindex:"0",ref:"navContainer",onKeydown:[u[5]||(u[5]=(...j)=>v.handleTabKeyNavigation&&v.handleTabKeyNavigation(...j)),u[6]||(u[6]=i.withKeys(i.withModifiers(j=>v.handleTabKeyboardSelect(!1),["prevent"]),["space"]))]},[i.createElementVNode("div",{ref:"navWrap",class:i.normalizeClass([C.prefixCls+"-nav-wrap",C.scrollable?C.prefixCls+"-nav-scrollable":""])},[i.createElementVNode("span",{class:i.normalizeClass([C.prefixCls+"-nav-prev",C.scrollable?"":C.prefixCls+"-nav-scroll-disabled"]),onClick:u[0]||(u[0]=(...j)=>v.scrollPrev&&v.scrollPrev(...j))},[i.createVNode(R,{type:"ios-arrow-back"})],2),i.createElementVNode("span",{class:i.normalizeClass([C.prefixCls+"-nav-next",C.scrollable?"":C.prefixCls+"-nav-scroll-disabled"]),onClick:u[1]||(u[1]=(...j)=>v.scrollNext&&v.scrollNext(...j))},[i.createVNode(R,{type:"ios-arrow-forward"})],2),i.createElementVNode("div",{ref:"navScroll",class:i.normalizeClass([C.prefixCls+"-nav-scroll"]),"on:DOMMouseScroll":u[3]||(u[3]=(...j)=>v.handleScroll&&v.handleScroll(...j)),onMousewheel:u[4]||(u[4]=(...j)=>v.handleScroll&&v.handleScroll(...j))},[i.createElementVNode("div",{ref:"nav",class:i.normalizeClass([C.prefixCls+"-nav"]),style:i.normalizeStyle(C.navStyle)},[i.createElementVNode("div",{class:i.normalizeClass(v.barClasses),style:i.normalizeStyle(v.barStyle)},null,6),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.navList,(j,ce)=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.tabCls(j)),key:ce,onClick:Oe=>v.handleChange(ce),onDblclick:Oe=>v.handleDblclick(ce),onContextmenu:i.withModifiers(Oe=>v.handleContextmenu(ce,Oe),["stop"]),onSelectstart:i.withModifiers(Oe=>v.handlePreventSelect(ce,Oe),["stop"]),draggable:m.draggable,onDragstart:Oe=>v.handleDrag(ce,Oe),onDrop:Oe=>v.handleDrop(ce,Oe),onDragover:u[2]||(u[2]=i.withModifiers(()=>{},["prevent"]))},[j.icon!==""?(i.openBlock(),i.createBlock(R,{key:0,type:j.icon},null,8,["type"])):i.createCommentVNode("",!0),j.labelType==="function"?(i.openBlock(),i.createBlock(B,{key:1,render:j.label},null,8,["render"])):(i.openBlock(),i.createElementBlock(i.Fragment,{key:2},[i.createTextVNode(i.toDisplayString(j.label),1)],64)),v.showClose(j)?(i.openBlock(),i.createBlock(R,{key:3,class:i.normalizeClass([C.prefixCls+"-close"]),type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,onClick:i.withModifiers(Oe=>v.handleRemove(ce),["stop"])},null,8,["class","type","custom","size","onClick"])):i.createCommentVNode("",!0)],42,Die))),128))],6)],34)],2)],34)],2),i.createElementVNode("div",{class:i.normalizeClass(v.contentClasses),style:i.normalizeStyle(v.contentStyle),ref:"panes"},[i.renderSlot(l.$slots,"default")],6),i.createElementVNode("div",{class:"ivu-tabs-context-menu",style:i.normalizeStyle(C.contextMenuStyles)},[i.createVNode(W,{trigger:"custom",visible:C.contextMenuVisible,transfer:"",onOnClick:v.handleClickDropdownItem,onOnClickoutside:v.handleClickContextMenuOutside},{list:i.withCtx(()=>[i.createVNode(G,null,{default:i.withCtx(()=>[i.renderSlot(l.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var m1=c(Iie,[["render",Nie]]);const $ie={name:"Notification",components:{Dropdown:nu,DropdownMenu:ru,Badge:Nv,Tabs:m1},emits:["on-visible-change","on-item-click","on-clear","on-load-more","on-tab-change"],provide(){return{NotificationInstance:this}},props:{count:{type:Number},autoCount:{type:Boolean,default:!1},countType:{validator(l){return _(l,["text","badge"])},default:"text"},icon:{type:String,default:"md-notifications-outline"},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},badgeProps:{type:Object,default(){return{}}},clearClose:{type:Boolean,default:!1},locale:{type:Object,default(){return{loadedAll:"加载完毕",loading:"加载中...",loadMore:"加载更多",clear:"清空"}}},tab:{type:String},wide:{type:Boolean,default:!1},transferClassName:{type:String}},data(){return{visible:!1,countAll:0,tabList:[]}},computed:{finalCount(){return this.autoCount?this.countAll:this.count},transferClasses(){let l="ivu-notifications-transfer";return this.transferClassName&&(l+=` ${this.transferClassName}`),l}},watch:{visible(l){this.$emit("on-visible-change",l)}},methods:{handleVisibleChange(l){this.visible=l},handleClickOutside(l){this.$refs.notice.contains(l.target)||(this.visible=!1)},handleToggleOpen(){this.visible=!this.visible},handleGetCountAll(){if(this.autoCount){const l=this.tabList.map(m=>m.tab);let u=0;l.forEach(m=>{m.count&&(u+=m.count)}),this.countAll=u}},handleItemClick(l,u){this.$emit("on-item-click",l,u)},handleClear(l){this.$emit("on-clear",l),this.clearClose&&this.handleClose()},handleLoadMore(l){this.$emit("on-load-more",l)},handleClose(){this.visible=!1},handleTabChange(l){const u=this.tabList.map(k=>k.tab);let m={};u.forEach(k=>{k.$refs.tab.currentName===l&&(m=k.handleGetTabBaseInfo())}),this.$emit("on-tab-change",m)}}},Vie={class:"ivu-notifications",ref:"notice"},Lie={class:"ivu-notifications-tabs"},Bie={key:0,class:"ivu-notifications-extra"};function Uie(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Badge"),G=i.resolveComponent("Tabs"),W=i.resolveComponent("DropdownMenu"),j=i.resolveComponent("Dropdown");return i.openBlock(),i.createElementBlock("div",Vie,[i.createVNode(j,{trigger:"custom",visible:C.visible,transfer:m.transfer,placement:m.placement,"transfer-class-name":v.transferClasses,onOnVisibleChange:v.handleVisibleChange,onOnClickoutside:v.handleClickOutside},{list:i.withCtx(()=>[l.$slots.default?(i.openBlock(),i.createBlock(W,{key:0,onClick:u[1]||(u[1]=i.withModifiers(()=>{},["stop"]))},{default:i.withCtx(()=>[i.createElementVNode("div",{class:i.normalizeClass(["ivu-notifications-list",{"ivu-notifications-list-wide":m.wide}])},[i.createElementVNode("div",Lie,[i.createVNode(G,{animated:!1,"model-value":m.tab,onOnClick:v.handleTabChange},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"default")]),_:3},8,["model-value","onOnClick"])])],2),l.$slots.extra?(i.openBlock(),i.createElementBlock("div",Bie,[i.renderSlot(l.$slots,"extra")])):i.createCommentVNode("",!0)]),_:3})):i.createCommentVNode("",!0)]),default:i.withCtx(()=>[i.createElementVNode("div",{class:"ivu-notifications-rel",onClick:u[0]||(u[0]=i.withModifiers((...ce)=>v.handleToggleOpen&&v.handleToggleOpen(...ce),["prevent","stop"]))},[i.createVNode(B,i.mergeProps({count:v.finalCount},m.badgeProps),{default:i.withCtx(()=>[i.renderSlot(l.$slots,"icon",{},()=>[i.createVNode(R,{type:m.icon,size:"24"},null,8,["type"])])]),_:3},16,["count"])])]),_:3},8,["visible","transfer","placement","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],512)}var pR=c($ie,[["render",Uie]]);const Fie=(l,u)=>l<=u,zm=l=>l<10?"0"+l:l,mR=(l,u)=>{const m=new Date(l),k=m.getFullYear(),C=zm(m.getMonth()+1),v=zm(m.getDate()),R=zm(m.getHours()),B=zm(m.getMinutes()),G=zm(m.getSeconds());let W="";return u==="year"?W=k+"-"+C+"-"+v+" "+R+":"+B+":"+G:W=C+"-"+v+" "+R+":"+B,W},zie=(l,u)=>{const m=new Date().getTime(),k=Fie(l,m);let C=m-l;k||(C=-C);let v="",R=k?u("i.time.before")||"前":u("i.time.after")||"后";return C<1e3?v=u("i.time.just")||"刚刚":C<6e4?v=parseInt(C/1e3)+(u("i.time.seconds")||"秒")+R:C>=6e4&&C<36e5?v=Math.floor(C/6e4)+(u("i.time.minutes")||"分钟")+R:C>=36e5&&C<864e5?v=Math.floor(C/36e5)+(u("i.time.hours")||"小时")+R:C>=864e5&&C<262386e4?v=Math.floor(C/864e5)+(u("i.time.days")||"天")+R:C>=262386e4&&C<=3156786e4&&k?v=mR(l):v=mR(l,"year"),v};function Xie(l,u){return zie(l,u)}const gR="ivu-time",Wie={name:"Time",mixins:[Ki],props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(l){return _(l,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},computed:{classes(){return[`${gR}`,{[`${gR}-with-hash`]:this.hash}]}},watch:{time(){this.setTime()}},methods:{handleClick(){s&&this.hash!==""&&(window.location.hash=this.hash)},setTime(){const l=typeof this.time;let u;if(l==="number"){const m=this.time.toString().length>10?this.time:this.time*1e3;u=new Date(m).getTime()}else l==="object"?u=this.time.getTime():l==="string"&&(u=ro(this.time).valueOf());if(this.type==="relative")this.date=Xie(u,this.t);else{const m=new Date(this.time),k=m.getFullYear(),C=m.getMonth()+1<10?"0"+(m.getMonth()+1):m.getMonth()+1,v=m.getDate()<10?"0"+m.getDate():m.getDate(),R=m.getHours()<10?"0"+m.getHours():m.getHours(),B=m.getMinutes()<10?"0"+m.getMinutes():m.getMinutes(),G=m.getSeconds()<10?"0"+m.getSeconds():m.getSeconds();this.type==="datetime"?this.date=`${k}-${C}-${v} ${R}:${B}:${G}`:this.type==="date"&&(this.date=`${k}-${C}-${v}`)}}},mounted(){this.setTime(),this.interval!==0&&(this.timer=setInterval(()=>{this.setTime()},1e3*this.interval))},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function Qie(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("span",{class:i.normalizeClass(v.classes),onClick:u[0]||(u[0]=(...R)=>v.handleClick&&v.handleClick(...R))},i.toDisplayString(C.date),3)}var g1=c(Wie,[["render",Qie]]);const Hie={name:"NotificationItem",inject:["NotificationTabInstance","NotificationInstance"],components:{Row:wc,Col:Ba,Avatar:pm,Tag:Bd,Time:g1},emits:["on-item-click"],props:{rowProps:{type:Object,default(){return{type:"flex",justify:"center",align:"middle"}}},read:{type:[Boolean,Number],default:!1},icon:{type:String},customIcon:{type:String},iconColor:{type:String},iconSize:{validator(l){return _(l,["small","default","large"])},default:"default"},avatar:{type:String},avatarShape:{validator(l){return _(l,["circle","square"])},default:"circle"},title:{type:String},content:{type:String},time:{type:[Number,Date,String]},timeProps:{type:Object,default(){return{}}},tag:{type:String},tagProps:{type:Object,default(){return{}}},clickClose:{type:Boolean,default:!1}},data(){return{id:te(6)}},computed:{classes(){return{"ivu-notifications-item-unread":this.read===!1||this.read===0}},contentSpan(){return this.icon||this.customIcon||this.avatar||this.$slots.avatar?20:24},iconStyle(){let l={};return this.iconColor&&(l={"background-color":this.iconColor}),l}},methods:{handleClick(){this.$emit("on-item-click",this.$attrs),this.NotificationTabInstance.handleItemClick(this.$attrs),this.clickClose&&this.NotificationInstance.handleClose()},addItem(){this.NotificationTabInstance.itemList.push({id:this.id,item:this})},removeItem(){const l=this.NotificationTabInstance,u=l.itemList.findIndex(m=>m.id===this.id);l.itemList.splice(u,1)}},mounted(){this.addItem(),this.NotificationTabInstance.handleGetItems()},unmounted(){this.NotificationTabInstance.handleGetItems()},beforeUnmount(){this.removeItem()}},Gie={class:"ivu-notifications-item-title"},Yie={key:0},jie={key:0,class:"ivu-notifications-item-tag"},qie={key:0,class:"ivu-notifications-item-desc"},Zie={key:1,class:"ivu-notifications-item-time"};function Kie(l,u,m,k,C,v){const R=i.resolveComponent("Avatar"),B=i.resolveComponent("Col"),G=i.resolveComponent("Tag"),W=i.resolveComponent("Time"),j=i.resolveComponent("Row");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-notifications-item",v.classes]),onClick:u[0]||(u[0]=(...ce)=>v.handleClick&&v.handleClick(...ce))},[i.renderSlot(l.$slots,"default",{},()=>[i.createVNode(j,i.normalizeProps(i.guardReactiveProps(m.rowProps)),{default:i.withCtx(()=>[m.icon||m.customIcon||m.avatar||l.$slots.avatar?(i.openBlock(),i.createBlock(B,{key:0,span:"4",class:"ivu-notifications-item-icon"},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"avatar",{},()=>[m.icon?(i.openBlock(),i.createBlock(R,{key:0,icon:m.icon,shape:m.avatarShape,size:m.iconSize,style:i.normalizeStyle(v.iconStyle)},null,8,["icon","shape","size","style"])):m.customIcon?(i.openBlock(),i.createBlock(R,{key:1,"custom-icon":m.customIcon,shape:m.avatarShape,size:m.iconSize,style:i.normalizeStyle(v.iconStyle)},null,8,["custom-icon","shape","size","style"])):m.avatar?(i.openBlock(),i.createBlock(R,{key:2,src:m.avatar,shape:m.avatarShape,size:m.iconSize,style:i.normalizeStyle(v.iconStyle)},null,8,["src","shape","size","style"])):i.createCommentVNode("",!0)])]),_:3})):i.createCommentVNode("",!0),i.createVNode(B,{span:v.contentSpan,class:"ivu-notifications-item-content"},{default:i.withCtx(()=>[i.createElementVNode("div",Gie,[m.title||l.$slots.title?(i.openBlock(),i.createElementBlock("h4",Yie,[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)]),m.tag?(i.openBlock(),i.createElementBlock("div",jie,[i.createVNode(G,i.normalizeProps(i.guardReactiveProps(m.tagProps)),{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(m.tag),1)]),_:1},16)])):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0)]),m.content||l.$slots.content?(i.openBlock(),i.createElementBlock("div",qie,[i.renderSlot(l.$slots,"content",{},()=>[i.createTextVNode(i.toDisplayString(m.content),1)])])):i.createCommentVNode("",!0),m.time||l.$slots.time?(i.openBlock(),i.createElementBlock("div",Zie,[i.renderSlot(l.$slots,"time",{},()=>[i.createVNode(W,i.mergeProps({time:m.time},m.timeProps),null,16,["time"])])])):i.createCommentVNode("",!0)]),_:3},8,["span"])]),_:3},16)])],2)}var yR=c(Hie,[["render",Kie]]);const Jie="ivu-tabs-tabpane",ene={name:"TabPane",inject:["TabsInstance"],props:{name:{type:String},label:{type:[String,Function],default:""},icon:{type:String},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:null},tab:{type:String},index:{type:Number},contextMenu:{type:Boolean,default:!1}},data(){return{prefixCls:Jie,show:!0,currentName:this.name,id:te(6)}},computed:{contentStyle(){return{visibility:this.TabsInstance.activeKey!==this.currentName?"hidden":"visible"}}},methods:{updateNav(){this.TabsInstance.updateNav()},addPane(){const l=this.TabsInstance;l.paneList||(l.paneList=[]),l.paneList.push({id:this.id,pane:this})},removePane(){const l=this.TabsInstance;if(l.paneList&&l.paneList.length){const u=l.paneList.findIndex(m=>m.id===this.id);l.paneList.splice(u,1)}}},watch:{name(l){this.currentName=l,this.updateNav()},label(l){typeof l!="function"&&this.updateNav()},icon(){this.updateNav()},disabled(){this.updateNav()}},mounted(){this.addPane(),this.updateNav()},beforeUnmount(){this.removePane(),this.updateNav()}};function tne(l,u,m,k,C,v){return i.withDirectives((i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(C.prefixCls),style:i.normalizeStyle(v.contentStyle)},[i.renderSlot(l.$slots,"default")],6)),[[i.vShow,C.show]])}var y1=c(ene,[["render",tne]]);const ine={name:"NotificationTab",inject:["NotificationInstance"],components:{TabPane:y1,Icon:S},provide(){return{NotificationTabInstance:this}},props:{count:{type:Number},title:{type:String,required:!0},name:{type:String},emptyText:{type:String,default:"目前没有通知"},emptyImage:{type:String,default:"https://file.iviewui.com/iview-pro/icon-no-message.svg"},loadedAll:{type:Boolean,default:!0},showLoadedAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},scrollToLoad:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearIcon:{type:Boolean,default:!0}},data(){return{customLabel:l=>l("div",[l("span",this.title),l(Nv,{count:this.count})]),itemCount:0,itemList:[],id:te(6)}},computed:{currentTitle(){const l=this.NotificationInstance.countType;if(l==="text"){const u=this.count?`(${this.count})`:"";return`${this.title} ${u}`}else if(l==="badge")return this.customLabel}},watch:{count:{handler(){this.NotificationInstance.handleGetCountAll()},immediate:!0}},methods:{handleGetTabBaseInfo(){return{name:this.name,title:this.title}},handleGetItems(){const l=this.itemList.map(u=>u.item);this.itemCount=l.length},handleItemClick(l){this.NotificationInstance.handleItemClick(this.handleGetTabBaseInfo(),l)},handleClear(){this.NotificationInstance.handleClear(this.handleGetTabBaseInfo())},handleLoadMore(){this.NotificationInstance.handleLoadMore(this.handleGetTabBaseInfo())},handleScroll(){if(!this.scrollToLoad)return;const l=this.$refs.scroll,u=l.scrollHeight-l.clientHeight-l.scrollTop;!this.loading&&u===0&&this.handleLoadMore()},addTab(){this.NotificationInstance.tabList.push({id:this.id,tab:this})},removeTab(){const l=this.NotificationInstance,u=l.tabList.findIndex(m=>m.id===this.id);l.tabList.splice(u,1)}},mounted(){this.addTab()},beforeUnmount(){this.removeTab()}},nne={class:"ivu-notifications-container-list"},rne={key:0,class:"ivu-notifications-tab-empty"},sne=["src"],one={class:"ivu-notifications-tab-empty-text"},ane={class:"ivu-notifications-tab-loading"},lne={key:0,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-show"},cne={key:2,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-all"};function hne(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("TabPane");return i.openBlock(),i.createBlock(B,{label:v.currentTitle,name:m.name,ref:"tab",class:"ivu-notifications-tab"},{default:i.withCtx(()=>[i.createElementVNode("div",{class:"ivu-notifications-container",onScroll:u[1]||(u[1]=(...G)=>v.handleScroll&&v.handleScroll(...G)),ref:"scroll"},[i.renderSlot(l.$slots,"top"),i.createElementVNode("div",nne,[i.renderSlot(l.$slots,"default")]),!m.loading&&C.itemCount===0?(i.openBlock(),i.createElementBlock("div",rne,[i.renderSlot(l.$slots,"empty",{},()=>[m.emptyImage?(i.openBlock(),i.createElementBlock("img",{key:0,class:"ivu-notifications-tab-empty-img",src:m.emptyImage},null,8,sne)):i.createCommentVNode("",!0),i.createElementVNode("div",one,i.toDisplayString(m.emptyText),1)])])):i.createCommentVNode("",!0),i.createElementVNode("div",ane,[m.loading?(i.openBlock(),i.createElementBlock("div",lne,[i.renderSlot(l.$slots,"loading",{},()=>[i.createVNode(R,{type:"ios-loading",class:"ivu-load-loop"}),i.createTextVNode(" "+i.toDisplayString(v.NotificationInstance.locale.loading),1)])])):m.loadedAll?m.showLoadedAll&&m.loadedAll?(i.openBlock(),i.createElementBlock("div",cne,[i.renderSlot(l.$slots,"loaded-all",{},()=>[i.createTextVNode(i.toDisplayString(v.NotificationInstance.locale.loadedAll),1)])])):i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("div",{key:1,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-more",onClick:u[0]||(u[0]=(...G)=>v.handleLoadMore&&v.handleLoadMore(...G))},[i.renderSlot(l.$slots,"load-more",{},()=>[i.createTextVNode(i.toDisplayString(v.NotificationInstance.locale.loadMore),1)])]))])],544),m.showClear&&C.itemCount!==0?(i.openBlock(),i.createElementBlock("div",{key:0,class:"ivu-notifications-tab-clear",onClick:u[2]||(u[2]=(...G)=>v.handleClear&&v.handleClear(...G))},[i.renderSlot(l.$slots,"clear",{},()=>[m.showClearIcon?(i.openBlock(),i.createBlock(R,{key:0,type:"md-done-all"})):i.createCommentVNode("",!0),i.createElementVNode("span",null,i.toDisplayString(v.NotificationInstance.locale.clear)+i.toDisplayString(m.title),1)])])):i.createCommentVNode("",!0)]),_:3},8,["label","name"])}var vR=c(ine,[["render",hne]]);const une={name:"Trend",components:{Icon:S},props:{flag:{validator(l){return _(l,["up","down"])}},colorful:{type:Boolean,default:!0},reverseColor:{type:Boolean,default:!1},textColor:{type:Boolean,default:!1},showTitle:{type:[Boolean,String],default:!1}},computed:{classes(){return[{"ivu-trend-up":this.flag==="up","ivu-trend-down":this.flag==="down","ivu-trend-reverse-color":this.reverseColor,"ivu-trend-colorful":this.colorful,"ivu-trend-text-color":this.textColor}]},flagType(){return this.flag==="up"?"md-arrow-dropup":this.flag==="down"?"md-arrow-dropdown":""}}},dne={class:"ivu-trend-text"};function fne(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-trend",v.classes])},[i.createElementVNode("span",dne,[i.renderSlot(l.$slots,"default")]),i.createVNode(R,{type:v.flagType,class:"ivu-trend-flag"},null,8,["type"])],2)}var LS=c(une,[["render",fne]]);const pne={name:"NumberInfo",components:{Trend:LS},props:{title:{type:String},subTitle:{type:String},total:{type:[String,Number]},subTotal:{type:[String,Number]},status:{validator(l){return _(l,["up","down"])}},gap:{type:[String,Number],default:8}},computed:{valueStyle(){return{"margin-top":this.gap+"px"}}}},mne={class:"ivu-number-info"},gne={key:0,class:"ivu-number-info-title"},yne={key:1,class:"ivu-number-info-subTitle"},vne={class:"ivu-number-info-total"},bne={key:0,class:"ivu-number-info-subTotal"};function xne(l,u,m,k,C,v){const R=i.resolveComponent("Trend");return i.openBlock(),i.createElementBlock("div",mne,[m.title||l.$slots.title?(i.openBlock(),i.createElementBlock("div",gne,[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])])):i.createCommentVNode("",!0),m.subTitle||l.$slots.subTitle?(i.openBlock(),i.createElementBlock("div",yne,[i.renderSlot(l.$slots,"subTitle",{},()=>[i.createTextVNode(i.toDisplayString(m.subTitle),1)])])):i.createCommentVNode("",!0),i.createElementVNode("div",{class:"ivu-number-info-value",style:i.normalizeStyle(v.valueStyle)},[i.createElementVNode("span",vne,[i.renderSlot(l.$slots,"total",{},()=>[i.createTextVNode(i.toDisplayString(m.total),1)])]),m.subTotal||l.$slots.subTotal?(i.openBlock(),i.createElementBlock("span",bne,[i.renderSlot(l.$slots,"subTotal",{},()=>[i.createVNode(R,{flag:m.status},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(m.subTotal),1)]),_:1},8,["flag"])])])):i.createCommentVNode("",!0)],4)])}var bR=c(pne,[["render",xne]]),xR={exports:{}};/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(l){(function(u,m){l.exports?l.exports=m():u.numeral=m()})(ee,function(){var u,m,k="2.0.6",C={},v={},R={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},B={currentLocale:R.currentLocale,zeroFormat:R.zeroFormat,nullFormat:R.nullFormat,defaultFormat:R.defaultFormat,scalePercentBy100:R.scalePercentBy100};function G(W,j){this._input=W,this._value=j}return u=function(W){var j,ce,Oe,xe;if(u.isNumeral(W))j=W.value();else if(W===0||typeof W>"u")j=0;else if(W===null||m.isNaN(W))j=null;else if(typeof W=="string")if(B.zeroFormat&&W===B.zeroFormat)j=0;else if(B.nullFormat&&W===B.nullFormat||!W.replace(/[^0-9]+/g,"").length)j=null;else{for(ce in C)if(xe=typeof C[ce].regexps.unformat=="function"?C[ce].regexps.unformat():C[ce].regexps.unformat,xe&&W.match(xe)){Oe=C[ce].unformat;break}Oe=Oe||u._.stringToNumber,j=Oe(W)}else j=Number(W)||null;return new G(W,j)},u.version=k,u.isNumeral=function(W){return W instanceof G},u._=m={numberToFormat:function(W,j,ce){var Oe=v[u.options.currentLocale],xe=!1,ye=!1,oe=0,Re="",Lt=1e12,yt=1e9,wt=1e6,Ge=1e3,Ne="",Je=!1,je,Qt,Ht,Pt,_t,Dt,jt;if(W=W||0,Qt=Math.abs(W),u._.includes(j,"(")?(xe=!0,j=j.replace(/[\(|\)]/g,"")):(u._.includes(j,"+")||u._.includes(j,"-"))&&(_t=u._.includes(j,"+")?j.indexOf("+"):W<0?j.indexOf("-"):-1,j=j.replace(/[\+|\-]/g,"")),u._.includes(j,"a")&&(je=j.match(/a(k|m|b|t)?/),je=je?je[1]:!1,u._.includes(j," a")&&(Re=" "),j=j.replace(new RegExp(Re+"a[kmbt]?"),""),Qt>=Lt&&!je||je==="t"?(Re+=Oe.abbreviations.trillion,W=W/Lt):Qt<Lt&&Qt>=yt&&!je||je==="b"?(Re+=Oe.abbreviations.billion,W=W/yt):Qt<yt&&Qt>=wt&&!je||je==="m"?(Re+=Oe.abbreviations.million,W=W/wt):(Qt<wt&&Qt>=Ge&&!je||je==="k")&&(Re+=Oe.abbreviations.thousand,W=W/Ge)),u._.includes(j,"[.]")&&(ye=!0,j=j.replace("[.]",".")),Ht=W.toString().split(".")[0],Pt=j.split(".")[1],Dt=j.indexOf(","),oe=(j.split(".")[0].split(",")[0].match(/0/g)||[]).length,Pt?(u._.includes(Pt,"[")?(Pt=Pt.replace("]",""),Pt=Pt.split("["),Ne=u._.toFixed(W,Pt[0].length+Pt[1].length,ce,Pt[1].length)):Ne=u._.toFixed(W,Pt.length,ce),Ht=Ne.split(".")[0],u._.includes(Ne,".")?Ne=Oe.delimiters.decimal+Ne.split(".")[1]:Ne="",ye&&Number(Ne.slice(1))===0&&(Ne="")):Ht=u._.toFixed(W,0,ce),Re&&!je&&Number(Ht)>=1e3&&Re!==Oe.abbreviations.trillion)switch(Ht=String(Number(Ht)/1e3),Re){case Oe.abbreviations.thousand:Re=Oe.abbreviations.million;break;case Oe.abbreviations.million:Re=Oe.abbreviations.billion;break;case Oe.abbreviations.billion:Re=Oe.abbreviations.trillion;break}if(u._.includes(Ht,"-")&&(Ht=Ht.slice(1),Je=!0),Ht.length<oe)for(var At=oe-Ht.length;At>0;At--)Ht="0"+Ht;return Dt>-1&&(Ht=Ht.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+Oe.delimiters.thousands)),j.indexOf(".")===0&&(Ht=""),jt=Ht+Ne+(Re||""),xe?jt=(xe&&Je?"(":"")+jt+(xe&&Je?")":""):_t>=0?jt=_t===0?(Je?"-":"+")+jt:jt+(Je?"-":"+"):Je&&(jt="-"+jt),jt},stringToNumber:function(W){var j=v[B.currentLocale],ce=W,Oe={thousand:3,million:6,billion:9,trillion:12},xe,ye,oe;if(B.zeroFormat&&W===B.zeroFormat)ye=0;else if(B.nullFormat&&W===B.nullFormat||!W.replace(/[^0-9]+/g,"").length)ye=null;else{ye=1,j.delimiters.decimal!=="."&&(W=W.replace(/\./g,"").replace(j.delimiters.decimal,"."));for(xe in Oe)if(oe=new RegExp("[^a-zA-Z]"+j.abbreviations[xe]+"(?:\\)|(\\"+j.currency.symbol+")?(?:\\))?)?$"),ce.match(oe)){ye*=Math.pow(10,Oe[xe]);break}ye*=(W.split("-").length+Math.min(W.split("(").length-1,W.split(")").length-1))%2?1:-1,W=W.replace(/[^0-9\.]+/g,""),ye*=Number(W)}return ye},isNaN:function(W){return typeof W=="number"&&isNaN(W)},includes:function(W,j){return W.indexOf(j)!==-1},insert:function(W,j,ce){return W.slice(0,ce)+j+W.slice(ce)},reduce:function(W,j){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof j!="function")throw new TypeError(j+" is not a function");var ce=Object(W),Oe=ce.length>>>0,xe=0,ye;if(arguments.length===3)ye=arguments[2];else{for(;xe<Oe&&!(xe in ce);)xe++;if(xe>=Oe)throw new TypeError("Reduce of empty array with no initial value");ye=ce[xe++]}for(;xe<Oe;xe++)xe in ce&&(ye=j(ye,ce[xe],xe,ce));return ye},multiplier:function(W){var j=W.toString().split(".");return j.length<2?1:Math.pow(10,j[1].length)},correctionFactor:function(){var W=Array.prototype.slice.call(arguments);return W.reduce(function(j,ce){var Oe=m.multiplier(ce);return j>Oe?j:Oe},1)},toFixed:function(W,j,ce,Oe){var xe=W.toString().split("."),ye=j-(Oe||0),oe,Re,Lt,yt;return xe.length===2?oe=Math.min(Math.max(xe[1].length,ye),j):oe=ye,Lt=Math.pow(10,oe),yt=(ce(W+"e+"+oe)/Lt).toFixed(oe),Oe>j-oe&&(Re=new RegExp("\\.?0{1,"+(Oe-(j-oe))+"}$"),yt=yt.replace(Re,"")),yt}},u.options=B,u.formats=C,u.locales=v,u.locale=function(W){return W&&(B.currentLocale=W.toLowerCase()),B.currentLocale},u.localeData=function(W){if(!W)return v[B.currentLocale];if(W=W.toLowerCase(),!v[W])throw new Error("Unknown locale : "+W);return v[W]},u.reset=function(){for(var W in R)B[W]=R[W]},u.zeroFormat=function(W){B.zeroFormat=typeof W=="string"?W:null},u.nullFormat=function(W){B.nullFormat=typeof W=="string"?W:null},u.defaultFormat=function(W){B.defaultFormat=typeof W=="string"?W:"0.0"},u.register=function(W,j,ce){if(j=j.toLowerCase(),this[W+"s"][j])throw new TypeError(j+" "+W+" already registered.");return this[W+"s"][j]=ce,ce},u.validate=function(W,j){var ce,Oe,xe,ye,oe,Re,Lt,yt;if(typeof W!="string"&&(W+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",W)),W=W.trim(),W.match(/^\d+$/))return!0;if(W==="")return!1;try{Lt=u.localeData(j)}catch{Lt=u.localeData(u.locale())}return xe=Lt.currency.symbol,oe=Lt.abbreviations,ce=Lt.delimiters.decimal,Lt.delimiters.thousands==="."?Oe="\\.":Oe=Lt.delimiters.thousands,yt=W.match(/^[^\d]+/),yt!==null&&(W=W.substr(1),yt[0]!==xe)||(yt=W.match(/[^\d]+$/),yt!==null&&(W=W.slice(0,-1),yt[0]!==oe.thousand&&yt[0]!==oe.million&&yt[0]!==oe.billion&&yt[0]!==oe.trillion))?!1:(Re=new RegExp(Oe+"{2}"),W.match(/[^\d.,]/g)?!1:(ye=W.split(ce),ye.length>2?!1:ye.length<2?!!ye[0].match(/^\d+.*\d$/)&&!ye[0].match(Re):ye[0].length===1?!!ye[0].match(/^\d+$/)&&!ye[0].match(Re)&&!!ye[1].match(/^\d+$/):!!ye[0].match(/^\d+.*\d$/)&&!ye[0].match(Re)&&!!ye[1].match(/^\d+$/)))},u.fn=G.prototype={clone:function(){return u(this)},format:function(W,j){var ce=this._value,Oe=W||B.defaultFormat,xe,ye,oe;if(j=j||Math.round,ce===0&&B.zeroFormat!==null)ye=B.zeroFormat;else if(ce===null&&B.nullFormat!==null)ye=B.nullFormat;else{for(xe in C)if(Oe.match(C[xe].regexps.format)){oe=C[xe].format;break}oe=oe||u._.numberToFormat,ye=oe(ce,Oe,j)}return ye},value:function(){return this._value},input:function(){return this._input},set:function(W){return this._value=Number(W),this},add:function(W){var j=m.correctionFactor.call(null,this._value,W);function ce(Oe,xe,ye,oe){return Oe+Math.round(j*xe)}return this._value=m.reduce([this._value,W],ce,0)/j,this},subtract:function(W){var j=m.correctionFactor.call(null,this._value,W);function ce(Oe,xe,ye,oe){return Oe-Math.round(j*xe)}return this._value=m.reduce([W],ce,Math.round(this._value*j))/j,this},multiply:function(W){function j(ce,Oe,xe,ye){var oe=m.correctionFactor(ce,Oe);return Math.round(ce*oe)*Math.round(Oe*oe)/Math.round(oe*oe)}return this._value=m.reduce([this._value,W],j,1),this},divide:function(W){function j(ce,Oe,xe,ye){var oe=m.correctionFactor(ce,Oe);return Math.round(ce*oe)/Math.round(Oe*oe)}return this._value=m.reduce([this._value,W],j),this},difference:function(W){return Math.abs(u(this._value).subtract(W).value())}},u.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(W){var j=W%10;return~~(W%100/10)===1?"th":j===1?"st":j===2?"nd":j===3?"rd":"th"},currency:{symbol:"$"}}),function(){u.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(W,j,ce){var Oe=u._.includes(j," BPS")?" ":"",xe;return W=W*1e4,j=j.replace(/\s?BPS/,""),xe=u._.numberToFormat(W,j,ce),u._.includes(xe,")")?(xe=xe.split(""),xe.splice(-1,0,Oe+"BPS"),xe=xe.join("")):xe=xe+Oe+"BPS",xe},unformat:function(W){return+(u._.stringToNumber(W)*1e-4).toFixed(15)}})}(),function(){var W={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},j={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},ce=W.suffixes.concat(j.suffixes.filter(function(xe){return W.suffixes.indexOf(xe)<0})),Oe=ce.join("|");Oe="("+Oe.replace("B","B(?!PS)")+")",u.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(Oe)},format:function(xe,ye,oe){var Re,Lt=u._.includes(ye,"ib")?j:W,yt=u._.includes(ye," b")||u._.includes(ye," ib")?" ":"",wt,Ge,Ne;for(ye=ye.replace(/\s?i?b/,""),wt=0;wt<=Lt.suffixes.length;wt++)if(Ge=Math.pow(Lt.base,wt),Ne=Math.pow(Lt.base,wt+1),xe===null||xe===0||xe>=Ge&&xe<Ne){yt+=Lt.suffixes[wt],Ge>0&&(xe=xe/Ge);break}return Re=u._.numberToFormat(xe,ye,oe),Re+yt},unformat:function(xe){var ye=u._.stringToNumber(xe),oe,Re;if(ye){for(oe=W.suffixes.length-1;oe>=0;oe--){if(u._.includes(xe,W.suffixes[oe])){Re=Math.pow(W.base,oe);break}if(u._.includes(xe,j.suffixes[oe])){Re=Math.pow(j.base,oe);break}}ye*=Re||1}return ye}})}(),function(){u.register("format","currency",{regexps:{format:/(\$)/},format:function(W,j,ce){var Oe=u.locales[u.options.currentLocale],xe={before:j.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:j.match(/([\+|\-|\)|\s|\$]*)$/)[0]},ye,oe,Re;for(j=j.replace(/\s?\$\s?/,""),ye=u._.numberToFormat(W,j,ce),W>=0?(xe.before=xe.before.replace(/[\-\(]/,""),xe.after=xe.after.replace(/[\-\)]/,"")):W<0&&!u._.includes(xe.before,"-")&&!u._.includes(xe.before,"(")&&(xe.before="-"+xe.before),Re=0;Re<xe.before.length;Re++)switch(oe=xe.before[Re],oe){case"$":ye=u._.insert(ye,Oe.currency.symbol,Re);break;case" ":ye=u._.insert(ye," ",Re+Oe.currency.symbol.length-1);break}for(Re=xe.after.length-1;Re>=0;Re--)switch(oe=xe.after[Re],oe){case"$":ye=Re===xe.after.length-1?ye+Oe.currency.symbol:u._.insert(ye,Oe.currency.symbol,-(xe.after.length-(1+Re)));break;case" ":ye=Re===xe.after.length-1?ye+" ":u._.insert(ye," ",-(xe.after.length-(1+Re)+Oe.currency.symbol.length-1));break}return ye}})}(),function(){u.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(W,j,ce){var Oe,xe=typeof W=="number"&&!u._.isNaN(W)?W.toExponential():"0e+0",ye=xe.split("e");return j=j.replace(/e[\+|\-]{1}0/,""),Oe=u._.numberToFormat(Number(ye[0]),j,ce),Oe+"e"+ye[1]},unformat:function(W){var j=u._.includes(W,"e+")?W.split("e+"):W.split("e-"),ce=Number(j[0]),Oe=Number(j[1]);Oe=u._.includes(W,"e-")?Oe*=-1:Oe;function xe(ye,oe,Re,Lt){var yt=u._.correctionFactor(ye,oe),wt=ye*yt*(oe*yt)/(yt*yt);return wt}return u._.reduce([ce,Math.pow(10,Oe)],xe,1)}})}(),function(){u.register("format","ordinal",{regexps:{format:/(o)/},format:function(W,j,ce){var Oe=u.locales[u.options.currentLocale],xe,ye=u._.includes(j," o")?" ":"";return j=j.replace(/\s?o/,""),ye+=Oe.ordinal(W),xe=u._.numberToFormat(W,j,ce),xe+ye}})}(),function(){u.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(W,j,ce){var Oe=u._.includes(j," %")?" ":"",xe;return u.options.scalePercentBy100&&(W=W*100),j=j.replace(/\s?\%/,""),xe=u._.numberToFormat(W,j,ce),u._.includes(xe,")")?(xe=xe.split(""),xe.splice(-1,0,Oe+"%"),xe=xe.join("")):xe=xe+Oe+"%",xe},unformat:function(W){var j=u._.stringToNumber(W);return u.options.scalePercentBy100?j*.01:j}})}(),function(){u.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(W,j,ce){var Oe=Math.floor(W/60/60),xe=Math.floor((W-Oe*60*60)/60),ye=Math.round(W-Oe*60*60-xe*60);return Oe+":"+(xe<10?"0"+xe:xe)+":"+(ye<10?"0"+ye:ye)},unformat:function(W){var j=W.split(":"),ce=0;return j.length===3?(ce=ce+Number(j[0])*60*60,ce=ce+Number(j[1])*60,ce=ce+Number(j[2])):j.length===2&&(ce=ce+Number(j[0])*60,ce=ce+Number(j[1])),Number(ce)}})}(),u})})(xR);var One=xR.exports;const wne={name:"Numeral",emits:["on-change"],props:{value:{type:[String,Number]},format:{type:String},prefix:{type:[String,Number]},suffix:{type:[String,Number]}},data(){return{currentValue:""}},watch:{value(){this.init()},format(){this.init()}},methods:{init(){if(this.value!==void 0){const l=One(this.value);this.format?this.currentValue=l.format(this.format):this.currentValue=l.value(),this.$emit("on-change",this.currentValue)}},getValue(){return this.currentValue}},mounted(){this.init()}},_ne={class:"ivu-numeral"};function Sne(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("span",_ne,[i.renderSlot(l.$slots,"prefix",{},()=>[i.createTextVNode(i.toDisplayString(m.prefix),1)]),i.createTextVNode(i.toDisplayString(C.currentValue),1),i.renderSlot(l.$slots,"suffix",{},()=>[i.createTextVNode(i.toDisplayString(m.suffix),1)])])}var OR=c(wne,[["render",Sne]]);const Cne="ivu-select-group",kne={name:"OptionGroup",props:{label:{type:String,default:""}},provide(){return{OptionGroupInstance:this}},inject:["SelectInstance"],data(){return{prefixCls:Cne,hidden:!1,id:te(6),optionList:[]}},computed:{show(){return this.optionList.find(l=>l.proxy&&l.proxy.isShow)}}};function Tne(l,u,m,k,C,v){return i.withDirectives((i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass([C.prefixCls+"-wrap"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-title"])},i.toDisplayString(m.label),3),i.createElementVNode("ul",null,[i.createElementVNode("li",{class:i.normalizeClass([C.prefixCls]),ref:"options"},[i.renderSlot(l.$slots,"default")],2)])],2)),[[i.vShow,v.show]])}var wR=c(kne,[["render",Tne]]);const BS="ivu-page";function Mne(l){return/^[1-9][0-9]*$/.test(l+"")}const Ene={name:"PageOption",mixins:[Ki],components:{iSelect:ds,iOption:In},emits:["on-size","on-page"],props:{pageSizeOpts:Array,showSizer:Boolean,showElevator:Boolean,current:Number,_current:Number,pageSize:Number,allPages:Number,isSmall:Boolean,placement:String,transfer:Boolean,disabled:Boolean,eventsEnabled:Boolean},data(){return{currentPageSize:this.pageSize}},watch:{pageSize(l){this.currentPageSize=l}},computed:{size(){return this.isSmall?"small":"default"},optsClasses(){return[`${BS}-options`]},sizerClasses(){return[`${BS}-options-sizer`]},ElevatorClasses(){return[`${BS}-options-elevator`]}},methods:{changeSize(){this.$emit("on-size",this.currentPageSize)},changePage(l){let u=l.target.value.trim(),m=0;if(Mne(u)){if(u=Number(u),u!=this.current){const k=this.allPages;u>k?m=k:m=u}}else m=1;m&&(this.$emit("on-page",m),l.target.value=m)}}},Pne=["value","disabled"];function Ane(l,u,m,k,C,v){const R=i.resolveComponent("i-option"),B=i.resolveComponent("i-select");return m.showSizer||m.showElevator?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.optsClasses)},[m.showSizer?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.sizerClasses)},[i.createVNode(B,{modelValue:C.currentPageSize,"onUpdate:modelValue":u[0]||(u[0]=G=>C.currentPageSize=G),size:v.size,placement:m.placement,transfer:m.transfer,disabled:m.disabled,eventsEnabled:m.eventsEnabled,onOnChange:v.changeSize},{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.pageSizeOpts,G=>(i.openBlock(),i.createBlock(R,{key:G,value:G,style:{"text-align":"center"}},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(G)+" "+i.toDisplayString(l.t("i.page.page")),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","size","placement","transfer","disabled","eventsEnabled","onOnChange"])],2)):i.createCommentVNode("",!0),m.showElevator?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass(v.ElevatorClasses)},[i.createTextVNode(i.toDisplayString(l.t("i.page.goto"))+" ",1),i.createElementVNode("input",{type:"text",value:m._current,autocomplete:"off",spellcheck:"false",disabled:m.disabled,onKeyup:u[1]||(u[1]=i.withKeys((...G)=>v.changePage&&v.changePage(...G),["enter"]))},null,40,Pne),i.createTextVNode(" "+i.toDisplayString(l.t("i.page.p")),1)],2)):i.createCommentVNode("",!0)],2)):i.createCommentVNode("",!0)}var Rne=c(Ene,[["render",Ane]]);const Zr="ivu-page",Ine={name:"Page",mixins:[Ki],components:{Options:Rne},emits:["update:modelValue","on-change","on-prev","on-next","on-page-size-change"],props:{modelValue:{type:Number,default:1},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageSizeOpts:{type:Array,default(){return[10,20,30,40]}},placement:{validator(l){return _(l,["top","bottom"])},default:"bottom"},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},size:{validator(l){return _(l,["small","default"])}},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showSizer:{type:Boolean,default:!1},className:{type:String},styles:{type:Object},prevText:{type:String,default:""},nextText:{type:String,default:""},disabled:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:Zr,currentPage:this.modelValue,currentPageSize:this.pageSize}},watch:{total(l){let u=Math.ceil(l/this.currentPageSize);u<this.currentPage&&(this.currentPage=u===0?1:u)},modelValue(l){this.currentPage=l},pageSize(l){this.currentPageSize=l}},computed:{isSmall(){return this.size==="small"},allPages(){const l=Math.ceil(this.total/this.currentPageSize);return l===0?1:l},simpleWrapClasses(){return[`${Zr}`,`${Zr}-simple`,{[`${this.className}`]:!!this.className}]},simplePagerClasses(){return`${Zr}-simple-pager`},wrapClasses(){return[`${Zr}`,{[`${this.className}`]:!!this.className,[`${Zr}-with-disabled`]:this.disabled,mini:this.size==="small"}]},prevClasses(){return[`${Zr}-prev`,{[`${Zr}-disabled`]:this.currentPage===1||this.disabled,[`${Zr}-custom-text`]:this.prevText!==""}]},nextClasses(){return[`${Zr}-next`,{[`${Zr}-disabled`]:this.currentPage===this.allPages||this.disabled,[`${Zr}-custom-text`]:this.nextText!==""}]},firstPageClasses(){return[`${Zr}-item`,{[`${Zr}-item-active`]:this.currentPage===1}]},lastPageClasses(){return[`${Zr}-item`,{[`${Zr}-item-active`]:this.currentPage===this.allPages}]}},methods:{changePage(l){this.disabled||this.currentPage!=l&&(this.currentPage=l,this.$emit("update:modelValue",l),this.$emit("on-change",l))},prev(){if(this.disabled)return;const l=this.currentPage;if(l<=1)return!1;this.changePage(l-1),this.$emit("on-prev",l-1)},next(){if(this.disabled)return;const l=this.currentPage;if(l>=this.allPages)return!1;this.changePage(l+1),this.$emit("on-next",l+1)},fastPrev(){if(this.disabled)return;const l=this.currentPage-5;l>0?this.changePage(l):this.changePage(1)},fastNext(){if(this.disabled)return;const l=this.currentPage+5;l>this.allPages?this.changePage(this.allPages):this.changePage(l)},onSize(l){this.disabled||(this.currentPageSize=l,this.$emit("on-page-size-change",l),this.changePage(1))},onPage(l){this.disabled||this.changePage(l)},keyDown(l){const u=l.keyCode;u>=48&&u<=57||u>=96&&u<=105||u===8||u===37||u===39||l.preventDefault()},keyUp(l){const u=l.keyCode,m=parseInt(l.target.value);if(u===38)this.prev();else if(u===40)this.next();else if(u===13){let k=1;m>this.allPages?k=this.allPages:m<=0||!m?k=1:k=m,l.target.value=k,this.changePage(k)}}}},Dne=["title"],Nne=[i.createElementVNode("a",null,[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"})],-1)],$ne=["title"],Vne=["value","disabled"],Lne=i.createElementVNode("span",null,"/",-1),Bne=["title"],Une=[i.createElementVNode("a",null,[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"})],-1)],Fne=["title"],zne={key:1,class:"ivu-icon ivu-icon-ios-arrow-back"},Xne=[i.createElementVNode("a",null,"1",-1)],Wne=["title"],Qne=[i.createElementVNode("a",null,[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"}),i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],Hne=["title"],Gne=["title"],Yne=["title"],jne=["title"],qne=["title"],Zne=["title"],Kne=["title"],Jne=["title"],ere=[i.createElementVNode("a",null,[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"}),i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],tre=["title"],ire=["title"],nre={key:1,class:"ivu-icon ivu-icon-ios-arrow-forward"};function rre(l,u,m,k,C,v){const R=i.resolveComponent("Options");return m.simple?(i.openBlock(),i.createElementBlock("ul",{key:0,class:i.normalizeClass(v.simpleWrapClasses),style:i.normalizeStyle(m.styles)},[i.createElementVNode("li",{title:l.t("i.page.prev"),class:i.normalizeClass(v.prevClasses),onClick:u[0]||(u[0]=(...B)=>v.prev&&v.prev(...B))},Nne,10,Dne),i.createElementVNode("div",{class:i.normalizeClass(v.simplePagerClasses),title:C.currentPage+"/"+v.allPages},[i.createElementVNode("input",{type:"text",value:C.currentPage,autocomplete:"off",spellcheck:"false",disabled:m.disabled,onKeydown:u[1]||(u[1]=(...B)=>v.keyDown&&v.keyDown(...B)),onKeyup:u[2]||(u[2]=(...B)=>v.keyUp&&v.keyUp(...B)),onChange:u[3]||(u[3]=(...B)=>v.keyUp&&v.keyUp(...B))},null,40,Vne),Lne,i.createTextVNode(" "+i.toDisplayString(v.allPages),1)],10,$ne),i.createElementVNode("li",{title:l.t("i.page.next"),class:i.normalizeClass(v.nextClasses),onClick:u[4]||(u[4]=(...B)=>v.next&&v.next(...B))},Une,10,Bne)],6)):(i.openBlock(),i.createElementBlock("ul",{key:1,class:i.normalizeClass(v.wrapClasses),style:i.normalizeStyle(m.styles)},[m.showTotal?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass([C.prefixCls+"-total"])},[i.renderSlot(l.$slots,"default",{},()=>[i.createTextVNode(i.toDisplayString(l.t("i.page.total"))+" "+i.toDisplayString(m.total)+" ",1),m.total<=1?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(l.t("i.page.item")),1)],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createTextVNode(i.toDisplayString(l.t("i.page.items")),1)],64))])],2)):i.createCommentVNode("",!0),i.createElementVNode("li",{title:l.t("i.page.prev"),class:i.normalizeClass(v.prevClasses),onClick:u[5]||(u[5]=(...B)=>v.prev&&v.prev(...B))},[i.createElementVNode("a",null,[m.prevText!==""?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(m.prevText),1)],64)):(i.openBlock(),i.createElementBlock("i",zne))])],10,Fne),i.createElementVNode("li",{title:"1",class:i.normalizeClass(v.firstPageClasses),onClick:u[6]||(u[6]=B=>v.changePage(1))},Xne,2),C.currentPage>5?(i.openBlock(),i.createElementBlock("li",{key:1,title:l.t("i.page.prev5"),class:i.normalizeClass([C.prefixCls+"-item-jump-prev"]),onClick:u[7]||(u[7]=(...B)=>v.fastPrev&&v.fastPrev(...B))},Qne,10,Wne)):i.createCommentVNode("",!0),C.currentPage===5?(i.openBlock(),i.createElementBlock("li",{key:2,title:C.currentPage-3,class:i.normalizeClass([C.prefixCls+"-item"]),onClick:u[8]||(u[8]=B=>v.changePage(C.currentPage-3))},[i.createElementVNode("a",null,i.toDisplayString(C.currentPage-3),1)],10,Hne)):i.createCommentVNode("",!0),C.currentPage-2>1?(i.openBlock(),i.createElementBlock("li",{key:3,title:C.currentPage-2,class:i.normalizeClass([C.prefixCls+"-item"]),onClick:u[9]||(u[9]=B=>v.changePage(C.currentPage-2))},[i.createElementVNode("a",null,i.toDisplayString(C.currentPage-2),1)],10,Gne)):i.createCommentVNode("",!0),C.currentPage-1>1?(i.openBlock(),i.createElementBlock("li",{key:4,title:C.currentPage-1,class:i.normalizeClass([C.prefixCls+"-item"]),onClick:u[10]||(u[10]=B=>v.changePage(C.currentPage-1))},[i.createElementVNode("a",null,i.toDisplayString(C.currentPage-1),1)],10,Yne)):i.createCommentVNode("",!0),C.currentPage!=1&&C.currentPage!=v.allPages?(i.openBlock(),i.createElementBlock("li",{key:5,title:C.currentPage,class:i.normalizeClass([C.prefixCls+"-item",C.prefixCls+"-item-active"])},[i.createElementVNode("a",null,i.toDisplayString(C.currentPage),1)],10,jne)):i.createCommentVNode("",!0),C.currentPage+1<v.allPages?(i.openBlock(),i.createElementBlock("li",{key:6,title:C.currentPage+1,class:i.normalizeClass([C.prefixCls+"-item"]),onClick:u[11]||(u[11]=B=>v.changePage(C.currentPage+1))},[i.createElementVNode("a",null,i.toDisplayString(C.currentPage+1),1)],10,qne)):i.createCommentVNode("",!0),C.currentPage+2<v.allPages?(i.openBlock(),i.createElementBlock("li",{key:7,title:C.currentPage+2,class:i.normalizeClass([C.prefixCls+"-item"]),onClick:u[12]||(u[12]=B=>v.changePage(C.currentPage+2))},[i.createElementVNode("a",null,i.toDisplayString(C.currentPage+2),1)],10,Zne)):i.createCommentVNode("",!0),v.allPages-C.currentPage===4?(i.openBlock(),i.createElementBlock("li",{key:8,title:C.currentPage+3,class:i.normalizeClass([C.prefixCls+"-item"]),onClick:u[13]||(u[13]=B=>v.changePage(C.currentPage+3))},[i.createElementVNode("a",null,i.toDisplayString(C.currentPage+3),1)],10,Kne)):i.createCommentVNode("",!0),v.allPages-C.currentPage>=5?(i.openBlock(),i.createElementBlock("li",{key:9,title:l.t("i.page.next5"),class:i.normalizeClass([C.prefixCls+"-item-jump-next"]),onClick:u[14]||(u[14]=(...B)=>v.fastNext&&v.fastNext(...B))},ere,10,Jne)):i.createCommentVNode("",!0),v.allPages>1?(i.openBlock(),i.createElementBlock("li",{key:10,title:v.allPages,class:i.normalizeClass(v.lastPageClasses),onClick:u[15]||(u[15]=B=>v.changePage(v.allPages))},[i.createElementVNode("a",null,i.toDisplayString(v.allPages),1)],10,tre)):i.createCommentVNode("",!0),i.createElementVNode("li",{title:l.t("i.page.next"),class:i.normalizeClass(v.nextClasses),onClick:u[16]||(u[16]=(...B)=>v.next&&v.next(...B))},[i.createElementVNode("a",null,[m.nextText!==""?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(m.nextText),1)],64)):(i.openBlock(),i.createElementBlock("i",nre))])],10,ire),i.createVNode(R,{"show-sizer":m.showSizer,"page-size":C.currentPageSize,"page-size-opts":m.pageSizeOpts,placement:m.placement,transfer:m.transfer,"show-elevator":m.showElevator,_current:C.currentPage,current:C.currentPage,disabled:m.disabled,"all-pages":v.allPages,"is-small":v.isSmall,eventsEnabled:m.eventsEnabled,onOnSize:v.onSize,onOnPage:v.onPage},null,8,["show-sizer","page-size","page-size-opts","placement","transfer","show-elevator","_current","current","disabled","all-pages","is-small","eventsEnabled","onOnSize","onOnPage"])],6))}var _R=c(Ine,[["render",rre]]);const sre={name:"PageHeader",components:{Breadcrumb:Y_,BreadcrumbItem:j_,Divider:t1,Icon:S,Tabs:m1,TabPane:y1},emits:["on-tab-change","on-back"],props:{title:{type:String},back:{type:Boolean,default:!1},logo:{type:String},action:{type:String},content:{type:String},extra:{type:String},breadcrumbList:{type:Array},hiddenBreadcrumb:{type:Boolean,default:!1},tabList:{type:Array},tabActiveKey:{type:String},wide:{type:Boolean,default:!1}},computed:{classes(){return{"ivu-page-header-wide":this.wide}}},methods:{handleTabChange(l){const u=this.tabList.find(m=>m.name===l);this.$emit("on-tab-change",JSON.parse(JSON.stringify(u)))},handleBack(){this.$emit("on-back")}}},ore={key:0,class:"ivu-page-header-breadcrumb"},are={class:"ivu-page-header-detail"},lre={key:1,class:"ivu-page-header-logo"},cre=["src"],hre={class:"ivu-page-header-main"},ure={class:"ivu-page-header-row"},dre={key:1,class:"ivu-page-header-title"},fre={key:2,class:"ivu-page-header-action"},pre={class:"ivu-page-header-row"},mre={key:0,class:"ivu-page-header-content"},gre={key:1,class:"ivu-page-header-extra"},yre={key:1,class:"ivu-page-header-tabs"};function vre(l,u,m,k,C,v){const R=i.resolveComponent("BreadcrumbItem"),B=i.resolveComponent("Breadcrumb"),G=i.resolveComponent("Icon"),W=i.resolveComponent("Divider"),j=i.resolveComponent("TabPane"),ce=i.resolveComponent("Tabs");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-page-header",v.classes])},[l.$slots.breadcrumb||!m.hiddenBreadcrumb?(i.openBlock(),i.createElementBlock("div",ore,[i.renderSlot(l.$slots,"breadcrumb",{},()=>[i.createVNode(B,null,{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.breadcrumbList,(Oe,xe)=>(i.openBlock(),i.createBlock(R,{key:xe,to:Oe.to,replace:Oe.replace,target:Oe.target},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(Oe.title),1)]),_:2},1032,["to","replace","target"]))),128))]),_:1})])])):i.createCommentVNode("",!0),i.createElementVNode("div",are,[m.back||l.$slots.back?(i.openBlock(),i.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:u[0]||(u[0]=(...Oe)=>v.handleBack&&v.handleBack(...Oe))},[i.renderSlot(l.$slots,"back",{},()=>[i.createVNode(G,{type:"md-arrow-back"})]),i.createVNode(W,{type:"vertical"})])):i.createCommentVNode("",!0),m.logo||l.$slots.logo?(i.openBlock(),i.createElementBlock("div",lre,[i.renderSlot(l.$slots,"logo",{},()=>[i.createElementVNode("img",{src:m.logo},null,8,cre)])])):i.createCommentVNode("",!0),i.createElementVNode("div",hre,[i.createElementVNode("div",ure,[m.back||l.$slots.back?(i.openBlock(),i.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:u[1]||(u[1]=(...Oe)=>v.handleBack&&v.handleBack(...Oe))},[i.renderSlot(l.$slots,"back",{},()=>[i.createVNode(G,{type:"md-arrow-back"})]),i.createVNode(W,{type:"vertical"})])):i.createCommentVNode("",!0),m.title||l.$slots.title?(i.openBlock(),i.createElementBlock("div",dre,[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])])):i.createCommentVNode("",!0),m.action||l.$slots.action?(i.openBlock(),i.createElementBlock("div",fre,[i.renderSlot(l.$slots,"action",{},()=>[i.createTextVNode(i.toDisplayString(m.action),1)])])):i.createCommentVNode("",!0)]),i.createElementVNode("div",pre,[m.content||l.$slots.content?(i.openBlock(),i.createElementBlock("div",mre,[i.renderSlot(l.$slots,"content",{},()=>[i.createTextVNode(i.toDisplayString(m.content),1)])])):i.createCommentVNode("",!0),m.extra||l.$slots.extra?(i.openBlock(),i.createElementBlock("div",gre,[i.renderSlot(l.$slots,"extra",{},()=>[i.createTextVNode(i.toDisplayString(m.extra),1)])])):i.createCommentVNode("",!0)])])]),m.tabList&&m.tabList.length?(i.openBlock(),i.createElementBlock("div",yre,[i.createVNode(ce,{animated:!1,"model-value":m.tabActiveKey,onOnClick:v.handleTabChange},{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.tabList,(Oe,xe)=>(i.openBlock(),i.createBlock(j,{key:xe,label:Oe.label,name:Oe.name},null,8,["label","name"]))),128))]),_:1},8,["model-value","onOnClick"])])):i.createCommentVNode("",!0)],2)}var SR=c(sre,[["render",vre]]);const bre=i.defineComponent({name:"CollapseTransition",props:{ready:{type:Boolean,default:!0}},setup(l){return{on:{beforeEnter(u){!l.ready||(K(u,"collapse-transition"),u.dataset||(u.dataset={}),u.dataset.oldPaddingTop=u.style.paddingTop,u.dataset.oldPaddingBottom=u.style.paddingBottom,u.style.height="0",u.style.paddingTop=0,u.style.paddingBottom=0)},enter(u){!l.ready||(u.dataset.oldOverflow=u.style.overflow,u.scrollHeight!==0?(u.style.height=u.scrollHeight+"px",u.style.paddingTop=u.dataset.oldPaddingTop,u.style.paddingBottom=u.dataset.oldPaddingBottom):(u.style.height="",u.style.paddingTop=u.dataset.oldPaddingTop,u.style.paddingBottom=u.dataset.oldPaddingBottom),u.style.overflow="hidden")},afterEnter(u){!l.ready||(ie(u,"collapse-transition"),u.style.height="",u.style.overflow=u.dataset.oldOverflow)},beforeLeave(u){!l.ready||(u.dataset||(u.dataset={}),u.dataset.oldPaddingTop=u.style.paddingTop,u.dataset.oldPaddingBottom=u.style.paddingBottom,u.dataset.oldOverflow=u.style.overflow,u.style.height=u.scrollHeight+"px",u.style.overflow="hidden")},leave(u){!l.ready||u.scrollHeight!==0&&(K(u,"collapse-transition"),u.style.height=0,u.style.paddingTop=0,u.style.paddingBottom=0)},afterLeave(u){!l.ready||(ie(u,"collapse-transition"),u.style.height="",u.style.overflow=u.dataset.oldOverflow,u.style.paddingTop=u.dataset.oldPaddingTop,u.style.paddingBottom=u.dataset.oldPaddingBottom)}}}}});function xre(l,u,m,k,C,v){return i.openBlock(),i.createBlock(i.Transition,i.toHandlers(l.on),{default:i.withCtx(()=>[i.renderSlot(l.$slots,"default")]),_:3},16)}var US=c(bre,[["render",xre]]);const Xm="ivu-collapse",Ore={name:"Panel",components:{Icon:S,CollapseTransition:US},inject:["CollapseInstance"],props:{name:{type:String},hideArrow:{type:Boolean,default:!1}},data(){return{index:0,mounted:!1}},computed:{itemClasses(){return[`${Xm}-item`,{[`${Xm}-item-active`]:this.isActive}]},headerClasses(){return`${Xm}-header`},contentClasses(){return`${Xm}-content`},boxClasses(){return`${Xm}-content-box`},isActive(){const l=this.CollapseInstance.getActiveKey(),u=this.name||this.index.toString();return l.indexOf(u)>-1}},methods:{setIndex(){this.index=this.CollapseInstance.panelCount+1,this.CollapseInstance.panelCount=this.index},toggle(){this.CollapseInstance.toggle({name:this.name||this.index,isActive:this.isActive})}},mounted(){this.setIndex(),this.mounted=!0}};function wre(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("collapse-transition");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.itemClasses)},[i.createElementVNode("div",{class:i.normalizeClass(v.headerClasses),onClick:u[0]||(u[0]=(...G)=>v.toggle&&v.toggle(...G))},[m.hideArrow?i.createCommentVNode("",!0):(i.openBlock(),i.createBlock(R,{key:0,type:"ios-arrow-forward"})),i.renderSlot(l.$slots,"default")],2),C.mounted?(i.openBlock(),i.createBlock(B,{key:0},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass(v.contentClasses)},[i.createElementVNode("div",{class:i.normalizeClass(v.boxClasses)},[i.renderSlot(l.$slots,"content")],2)],2),[[i.vShow,v.isActive]])]),_:3})):i.createCommentVNode("",!0)],2)}var CR=c(Ore,[["render",wre]]);const kR={name:"Paragraph",mixins:[Dm],render(){return i.h(u1,{...this.$props,component:"div",...this.commonEvents()},this.commonSlots())}},TR={name:"Password",mixins:[xm],data(){return{className:"ivu-login-password",prefix:"ios-lock-outline",placeholder:"请输入密码",type:"password"}}},Pc="ivu-poptip",_re={name:"Poptip",mixins:[NA,Ki],emits:["on-ok","on-cancel"],directives:{clickOutside:sS},components:{iButton:fs},props:{trigger:{validator(l){return _(l,["click","focus","hover"])},default:"click"},placement:{validator(l){return _(l,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},title:{type:[String,Number]},content:{type:[String,Number],default:""},width:{type:[String,Number]},confirm:{type:Boolean,default:!1},okText:{type:String},cancelText:{type:String},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}},popperClass:{type:String},wordWrap:{type:Boolean,default:!1},padding:{type:String},disabled:{type:Boolean,default:!1},capture:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return l.$VIEWUI?l.$VIEWUI.capture:!1}},transferClassName:{type:String}},data(){return{prefixCls:Pc,showTitle:!0,isInput:!1,disableCloseUnderTransfer:!1,tIndex:this.handleGetIndex()}},computed:{classes(){return[`${Pc}`,{[`${Pc}-confirm`]:this.confirm}]},popperClasses(){return[`${Pc}-popper`,{[`${Pc}-confirm`]:this.transfer&&this.confirm,[`${this.popperClass}`]:!!this.popperClass,[Pc+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]},styles(){let l={};return this.width&&(l.width=`${this.width}px`),this.transfer&&(l["z-index"]=1060+this.tIndex),l},localeOkText(){return this.okText===void 0?this.t("i.poptip.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.poptip.cancelText"):this.cancelText},contentClasses(){return[`${Pc}-body-content`,{[`${Pc}-body-content-word-wrap`]:this.wordWrap}]},contentPaddingStyle(){const l={};return this.padding!==""&&(l.padding=this.padding),l}},methods:{handleClick(){if(!this.disabled){if(this.confirm)return this.visible=!this.visible,!0;if(this.trigger!=="click")return!1;this.visible=!this.visible}},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(this.confirm)return this.visible=!1,!0;if(this.trigger!=="click")return!1;this.visible=!1},handleFocus(l=!0){if(!this.disabled){if(this.trigger!=="focus"||this.confirm||this.isInput&&!l)return!1;this.visible=!0}},handleBlur(l=!0){if(this.trigger!=="focus"||this.confirm||this.isInput&&!l)return!1;this.visible=!1},handleMouseenter(){if(!this.disabled){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!0},100)}},handleMouseleave(){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!1},100))},cancel(){this.visible=!1,this.$emit("on-cancel")},ok(){this.visible=!1,this.$emit("on-ok")},getInputChildren(){const l=this.$refs.reference.querySelectorAll("input"),u=this.$refs.reference.querySelectorAll("textarea");let m=null;return l.length?m=l[0]:u.length&&(m=u[0]),m},handleGetIndex(){return Qe(),we},handleIndexIncrease(){this.tIndex=this.handleGetIndex()}},mounted(){this.confirm||(this.showTitle=this.$slots.title!==void 0||this.title),this.trigger==="focus"&&i.nextTick(()=>{const l=this.getInputChildren();l&&(this.isInput=!0,l.addEventListener("focus",this.handleFocus,!1),l.addEventListener("blur",this.handleBlur,!1))})},beforeUnmount(){const l=this.getInputChildren();l&&(l.removeEventListener("focus",this.handleFocus,!1),l.removeEventListener("blur",this.handleBlur,!1))}},Sre=i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-help-circle"},null,-1);function Cre(l,u,m,k,C,v){const R=i.resolveComponent("i-button"),B=i.resolveDirective("click-outside");return i.withDirectives((i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),onMouseenter:u[6]||(u[6]=(...G)=>v.handleMouseenter&&v.handleMouseenter(...G)),onMouseleave:u[7]||(u[7]=(...G)=>v.handleMouseleave&&v.handleMouseleave(...G))},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-rel"]),ref:"reference",onClick:u[0]||(u[0]=(...G)=>v.handleClick&&v.handleClick(...G)),onMousedown:u[1]||(u[1]=G=>v.handleFocus(!1)),onMouseup:u[2]||(u[2]=G=>v.handleBlur(!1))},[i.renderSlot(l.$slots,"default")],34),(i.openBlock(),i.createBlock(i.Teleport,{to:"body",disabled:!m.transfer},[i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass(v.popperClasses),style:i.normalizeStyle(v.styles),ref:"popper",onClick:u[3]||(u[3]=(...G)=>v.handleTransferClick&&v.handleTransferClick(...G)),onMouseenter:u[4]||(u[4]=(...G)=>v.handleMouseenter&&v.handleMouseenter(...G)),onMouseleave:u[5]||(u[5]=(...G)=>v.handleMouseleave&&v.handleMouseleave(...G))},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-content"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-arrow"])},null,2),m.confirm?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-inner"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"])},[Sre,i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body-message"])},[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])],2)],2),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-footer"])},[i.createVNode(R,{type:"text",size:"small",onClick:v.cancel},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(v.localeCancelText),1)]),_:1},8,["onClick"]),i.createVNode(R,{type:"primary",size:"small",onClick:v.ok},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(v.localeOkText),1)]),_:1},8,["onClick"])],2)],2)):i.createCommentVNode("",!0),m.confirm?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass([C.prefixCls+"-inner"])},[C.showTitle?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-title"]),style:i.normalizeStyle(v.contentPaddingStyle),ref:"title"},[i.renderSlot(l.$slots,"title",{},()=>[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-title-inner"])},i.toDisplayString(m.title),3)])],6)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"]),style:i.normalizeStyle(v.contentPaddingStyle)},[i.createElementVNode("div",{class:i.normalizeClass(v.contentClasses)},[i.renderSlot(l.$slots,"content",{},()=>[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body-content-inner"])},i.toDisplayString(m.content),3)])],2)],6)],2))],2)],38),[[i.vShow,l.visible]])]),_:3})],8,["disabled"]))],34)),[[B,v.handleClose]])}var FS=c(_re,[["render",Cre]]);const Xa="ivu-progress",kre={name:"Progress",components:{Icon:S},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator(l){return _(l,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data(){return{currentStatus:this.status}},computed:{isStatus(){return this.currentStatus==="wrong"||this.currentStatus==="success"},statusIcon(){let l="";switch(this.currentStatus){case"wrong":l="ios-close-circle";break;case"success":l="ios-checkmark-circle";break}return l},bgStyle(){const l=this.vertical?{height:`${this.percent}%`,width:`${this.strokeWidth}px`}:{width:`${this.percent}%`,height:`${this.strokeWidth}px`};return this.strokeColor&&(typeof this.strokeColor=="string"?l["background-color"]=this.strokeColor:l["background-image"]=`linear-gradient(to right, ${this.strokeColor[0]} 0%, ${this.strokeColor[1]} 100%)`),l},successBgStyle(){return this.vertical?{height:`${this.successPercent}%`,width:`${this.strokeWidth}px`}:{width:`${this.successPercent}%`,height:`${this.strokeWidth}px`}},wrapClasses(){return[`${Xa}`,`${Xa}-${this.currentStatus}`,{[`${Xa}-show-info`]:!this.hideInfo&&!this.textInside,[`${Xa}-vertical`]:this.vertical}]},textClasses(){return`${Xa}-text`},textInnerClasses(){return`${Xa}-text-inner`},outerClasses(){return`${Xa}-outer`},innerClasses(){return`${Xa}-inner`},bgClasses(){return`${Xa}-bg`},successBgClasses(){return`${Xa}-success-bg`}},created(){this.handleStatus()},methods:{handleStatus(l){l?(this.currentStatus="normal",this.$emit("on-status-change","normal")):parseInt(this.percent,10)===100&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent(l,u){l<u?this.handleStatus(!0):this.handleStatus()},status(l){this.currentStatus=l}}},Tre={key:0,class:"ivu-progress-inner-text"};function Mre(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[i.createElementVNode("div",{class:i.normalizeClass(v.outerClasses)},[i.createElementVNode("div",{class:i.normalizeClass(v.innerClasses)},[i.createElementVNode("div",{class:i.normalizeClass(v.bgClasses),style:i.normalizeStyle(v.bgStyle)},[m.textInside?(i.openBlock(),i.createElementBlock("div",Tre,i.toDisplayString(m.percent)+"%",1)):i.createCommentVNode("",!0)],6),i.createElementVNode("div",{class:i.normalizeClass(v.successBgClasses),style:i.normalizeStyle(v.successBgStyle)},null,6)],2)],2),!m.hideInfo&&!m.textInside?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(v.textClasses)},[i.renderSlot(l.$slots,"default",{},()=>[v.isStatus?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(v.textInnerClasses)},[i.createVNode(R,{type:v.statusIcon},null,8,["type"])],2)):(i.openBlock(),i.createElementBlock("span",{key:1,class:i.normalizeClass(v.textInnerClasses)},i.toDisplayString(m.percent)+"% ",3))])],2)):i.createCommentVNode("",!0)],2)}var v1=c(kre,[["render",Mre]]);const Ac="ivu-rate",Ere={name:"Rate",mixins:[Ki,mi],emits:["update:modelValue","on-change"],props:{count:{type:Number,default:5},modelValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},name:{type:String},clearable:{type:Boolean,default:!1},character:{type:String,default:""},icon:{type:String,default:""},customIcon:{type:String,default:""}},data(){const l=this.modelValue||0;return{prefixCls:Ac,hoverIndex:-1,isHover:!1,isHalf:this.allowHalf&&l.toString().indexOf(".")>=0,currentValue:l}},computed:{classes(){return[`${Ac}`,{[`${Ac}-disabled`]:this.itemDisabled}]},iconClasses(){return["ivu-icon",{[`ivu-icon-${this.icon}`]:this.icon!=="",[`${this.customIcon}`]:this.customIcon!==""}]},showCharacter(){return this.character!==""||this.icon!==""||this.customIcon!==""}},watch:{modelValue(l){this.currentValue=l||0},currentValue(l){this.setHalf(l)}},methods:{starCls(l){const u=this.hoverIndex,m=this.isHover?u:this.currentValue;let k=!1,C=!1;return m>=l&&(k=!0),this.isHover?C=m===l:C=Math.ceil(this.currentValue)===l,[{[`${Ac}-star`]:!this.showCharacter,[`${Ac}-star-chart`]:this.showCharacter,[`${Ac}-star-full`]:!C&&k||C&&!this.isHalf,[`${Ac}-star-half`]:C&&this.isHalf,[`${Ac}-star-zero`]:!k}]},handleMousemove(l,u){if(!this.itemDisabled){if(this.isHover=!0,this.allowHalf){const m=u.target.getAttribute("type")||!1;this.isHalf=m==="half"}else this.isHalf=!1;this.hoverIndex=l}},handleMouseleave(){this.itemDisabled||(this.isHover=!1,this.setHalf(this.currentValue),this.hoverIndex=-1)},setHalf(l){this.isHalf=this.allowHalf&&l.toString().indexOf(".")>=0},handleClick(l){this.itemDisabled||(this.isHalf&&(l-=.5),this.clearable&&Math.abs(l-this.currentValue)<.01&&(l=0),this.currentValue=l,this.$emit("update:modelValue",l),this.$emit("on-change",l),this.handleFormItemChange("change",l))}}},Pre=["name","value"],Are=["onMousemove","onClick"],Rre={key:0},Ire={key:1};function Dre(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),onMouseleave:u[0]||(u[0]=(...R)=>v.handleMouseleave&&v.handleMouseleave(...R))},[i.createElementVNode("input",{type:"hidden",name:m.name,value:C.currentValue},null,8,Pre),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.count,R=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.starCls(R)),onMousemove:B=>v.handleMousemove(R,B),key:R,onClick:B=>v.handleClick(R)},[v.showCharacter?(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createElementVNode("span",{class:i.normalizeClass([C.prefixCls+"-star-first"]),type:"half"},[m.character!==""?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(m.character),1)],64)):(i.openBlock(),i.createElementBlock("i",{key:1,class:i.normalizeClass(v.iconClasses),type:"half"},null,2))],2),i.createElementVNode("span",{class:i.normalizeClass([C.prefixCls+"-star-second"])},[m.character!==""?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createTextVNode(i.toDisplayString(m.character),1)],64)):(i.openBlock(),i.createElementBlock("i",{key:1,class:i.normalizeClass(v.iconClasses)},null,2))],2)],64)):(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass([C.prefixCls+"-star-content"]),type:"half"},null,2))],42,Are))),128)),m.showText?i.withDirectives((i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-text"])},[i.renderSlot(l.$slots,"default",{},()=>[i.createElementVNode("span",null,i.toDisplayString(C.currentValue),1),i.createTextVNode(),C.currentValue<=1?(i.openBlock(),i.createElementBlock("span",Rre,i.toDisplayString(l.t("i.rate.star")),1)):(i.openBlock(),i.createElementBlock("span",Ire,i.toDisplayString(l.t("i.rate.stars")),1))])],2)),[[i.vShow,C.currentValue>0]]):i.createCommentVNode("",!0)],34)}var MR=c(Ere,[["render",Dre]]);const Nre={name:"Result",components:{Icon:S},props:{type:{validator(l){return _(l,["success","error","warning"])}},title:{type:String},desc:{type:String},extra:{type:String}},computed:{iconClasses(){return{"ivu-result-icon-success":this.type==="success","ivu-result-icon-error":this.type==="error","ivu-result-icon-warning":this.type==="warning"}}}},$re={class:"ivu-result"},Vre={key:0,class:"ivu-result-title"},Lre={key:1,class:"ivu-result-desc"},Bre={key:2,class:"ivu-result-extra"},Ure={key:3,class:"ivu-result-actions"};function Fre(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",$re,[i.createElementVNode("div",{class:i.normalizeClass(["ivu-result-icon",v.iconClasses])},[m.type==="success"?(i.openBlock(),i.createBlock(R,{key:0,type:"ios-checkmark"})):i.createCommentVNode("",!0),m.type==="error"?(i.openBlock(),i.createBlock(R,{key:1,type:"ios-close"})):i.createCommentVNode("",!0),m.type==="warning"?(i.openBlock(),i.createBlock(R,{key:2,type:"ios-information"})):i.createCommentVNode("",!0)],2),m.title||l.$slots.title?(i.openBlock(),i.createElementBlock("div",Vre,[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])])):i.createCommentVNode("",!0),m.desc||l.$slots.desc?(i.openBlock(),i.createElementBlock("div",Lre,[i.renderSlot(l.$slots,"desc",{},()=>[i.createTextVNode(i.toDisplayString(m.desc),1)])])):i.createCommentVNode("",!0),m.extra||l.$slots.extra?(i.openBlock(),i.createElementBlock("div",Bre,[i.renderSlot(l.$slots,"extra",{},()=>[i.createTextVNode(i.toDisplayString(m.extra),1)])])):i.createCommentVNode("",!0),l.$slots.actions?(i.openBlock(),i.createElementBlock("div",Ure,[i.renderSlot(l.$slots,"actions")])):i.createCommentVNode("",!0)])}var ER=c(Nre,[["render",Fre]]);const Wm="ivu-scroll",zre={props:["text","active","spinnerHeight"],components:{Spin:lo,Icon:S},computed:{wrapperClasses(){return[`${Wm}-loader-wrapper`,{[`${Wm}-loader-wrapper-active`]:this.active}]},spinnerClasses(){return`${Wm}-spinner`},iconClasses(){return`${Wm}-spinner-icon`},textClasses(){return`${Wm}-loader-text`}}};function Xre(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Spin");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapperClasses)},[i.createElementVNode("div",{class:i.normalizeClass(v.spinnerClasses)},[i.createVNode(B,{fix:""},{default:i.withCtx(()=>[i.createVNode(R,{type:"ios-loading",size:"18",class:i.normalizeClass(v.iconClasses)},null,8,["class"]),m.text?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.textClasses)},i.toDisplayString(m.text),3)):i.createCommentVNode("",!0)]),_:1})],2)],2)}var Wre=c(zre,[["render",Xre]]);const Gd="ivu-scroll",PR={sensitivity:10,minimumStartDragOffset:5},zS=()=>Promise.resolve(),Qre={name:"Scroll",mixins:[Ki],components:{loader:Wre},props:{height:{type:[Number,String],default:300},onReachTop:{type:Function},onReachBottom:{type:Function},onReachEdge:{type:Function},loadingText:{type:String},distanceToEdge:[Number,Array],stopSlide:{type:Boolean,default:!1}},data(){const l=this.calculateProximityThreshold();return{showTopLoader:!1,showBottomLoader:!1,showBodyLoader:!1,lastScroll:0,reachedTopScrollLimit:!0,reachedBottomScrollLimit:!1,topRubberPadding:0,bottomRubberPadding:0,rubberRollBackTimeout:!1,isLoading:!1,pointerTouchDown:null,touchScroll:!1,handleScroll:()=>{},pointerUpHandler:()=>{},pointerMoveHandler:()=>{},topProximityThreshold:l[0],bottomProximityThreshold:l[1]}},computed:{wrapClasses(){return`${Gd}-wrapper`},scrollContainerClasses(){return[`${Gd}-container`,{[`${Gd}-container-loading`]:this.showBodyLoader&&this.stopSlide}]},slotContainerClasses(){return[`${Gd}-content`,{[`${Gd}-content-loading`]:this.showBodyLoader}]},loaderClasses(){return`${Gd}-loader`},wrapperPadding(){return{paddingTop:this.topRubberPadding+"px",paddingBottom:this.bottomRubberPadding+"px"}},localeLoadingText(){return this.loadingText===void 0?this.t("i.select.loading"):this.loadingText}},methods:{waitOneSecond(){return new Promise(l=>{setTimeout(l,1e3)})},calculateProximityThreshold(){const l=this.distanceToEdge;return typeof l>"u"?[20,20]:Array.isArray(l)?l:[l,l]},onCallback(l){if(this.isLoading=!0,this.showBodyLoader=!0,l>0)this.showTopLoader=!0,this.topRubberPadding=20;else{this.showBottomLoader=!0,this.bottomRubberPadding=20;let k=0;const C=this.$refs.scrollContainer,v=C.scrollTop;for(let R=0;R<20;R++)setTimeout(()=>{k=Math.max(k,this.$refs.bottomLoader.getBoundingClientRect().height),C.scrollTop=v+k},R*50)}const u=[this.waitOneSecond(),this.onReachEdge?this.onReachEdge(l):zS()];u.push(l>0?this.onReachTop?this.onReachTop():zS():this.onReachBottom?this.onReachBottom():zS());let m=setTimeout(()=>{this.reset()},5e3);Promise.all(u).then(()=>{clearTimeout(m),this.reset()})},reset(){["showTopLoader","showBottomLoader","showBodyLoader","isLoading","reachedTopScrollLimit","reachedBottomScrollLimit"].forEach(l=>this[l]=!1),this.lastScroll=0,this.topRubberPadding=0,this.bottomRubberPadding=0,clearInterval(this.rubberRollBackTimeout),this.touchScroll&&setTimeout(()=>{a(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.removeEventListener("touchmove",this.pointerMoveHandler),this.touchScroll=!1},500)},onWheel(l){if(this.isLoading)return;const u=l.wheelDelta?l.wheelDelta:-(l.detail||l.deltaY);this.stretchEdge(u)},stretchEdge(l){if(clearTimeout(this.rubberRollBackTimeout),!this.onReachEdge){if(l>0){if(!this.onReachTop)return}else if(!this.onReachBottom)return}this.rubberRollBackTimeout=setTimeout(()=>{this.isLoading||this.reset()},250),l>0&&this.reachedTopScrollLimit?(this.topRubberPadding+=5-this.topRubberPadding/5,this.topRubberPadding>this.topProximityThreshold&&this.onCallback(1)):l<0&&this.reachedBottomScrollLimit?(this.bottomRubberPadding+=6-this.bottomRubberPadding/4,this.bottomRubberPadding>this.bottomProximityThreshold&&this.onCallback(-1)):this.onScroll()},onScroll(){const l=this.$refs.scrollContainer;if(this.isLoading||!l)return;const u=Math.sign(this.lastScroll-l.scrollTop),m=l.scrollHeight-l.clientHeight-l.scrollTop,k=this.topProximityThreshold<0?this.topProximityThreshold:0,C=this.bottomProximityThreshold<0?this.bottomProximityThreshold:0;u==-1&&m+C<=PR.sensitivity?this.reachedBottomScrollLimit=!0:u>=0&&l.scrollTop+k<=0?this.reachedTopScrollLimit=!0:(this.reachedTopScrollLimit=!1,this.reachedBottomScrollLimit=!1,this.lastScroll=l.scrollTop)},getTouchCoordinates(l){return{x:l.touches[0].pageX,y:l.touches[0].pageY}},onPointerDown(l){if(!this.isLoading){if(l.type=="touchstart"){const u=this.$refs.scrollContainer;this.reachedTopScrollLimit?u.scrollTop=5:this.reachedBottomScrollLimit&&(u.scrollTop-=5)}l.type=="touchstart"&&this.$refs.scrollContainer.scrollTop==0&&(this.$refs.scrollContainer.scrollTop=5),this.pointerTouchDown=this.getTouchCoordinates(l),o(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.parentElement.addEventListener("touchmove",u=>{u.stopPropagation(),this.pointerMoveHandler(u)},{passive:!1,useCapture:!0})}},onPointerMove(l){if(!this.pointerTouchDown||this.isLoading)return;const u=this.getTouchCoordinates(l).y-this.pointerTouchDown.y;this.stretchEdge(u),this.touchScroll||Math.abs(u)>PR.minimumStartDragOffset&&(this.touchScroll=!0)},onPointerUp(){this.pointerTouchDown=null}},created(){this.handleScroll=a1(this.onScroll,150,{leading:!1}),this.pointerUpHandler=this.onPointerUp.bind(this),this.pointerMoveHandler=a1(this.onPointerMove,50,{leading:!1})}};function Hre(l,u,m,k,C,v){const R=i.resolveComponent("loader");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses),style:{"touch-action":"none"}},[i.createElementVNode("div",{class:i.normalizeClass(v.scrollContainerClasses),style:i.normalizeStyle({height:m.height+"px"}),onScroll:u[0]||(u[0]=(...B)=>C.handleScroll&&C.handleScroll(...B)),onWheel:u[1]||(u[1]=(...B)=>v.onWheel&&v.onWheel(...B)),onTouchstart:u[2]||(u[2]=(...B)=>v.onPointerDown&&v.onPointerDown(...B)),ref:"scrollContainer"},[i.createElementVNode("div",{class:i.normalizeClass(v.loaderClasses),style:i.normalizeStyle({paddingTop:v.wrapperPadding.paddingTop}),ref:"toploader"},[i.createVNode(R,{text:v.localeLoadingText,active:C.showTopLoader},null,8,["text","active"])],6),i.createElementVNode("div",{class:i.normalizeClass(v.slotContainerClasses),ref:"scrollContent"},[i.renderSlot(l.$slots,"default")],2),i.createElementVNode("div",{class:i.normalizeClass(v.loaderClasses),style:i.normalizeStyle({paddingBottom:v.wrapperPadding.paddingBottom}),ref:"bottomLoader"},[i.createVNode(R,{text:v.localeLoadingText,active:C.showBottomLoader},null,8,["text","active"])],6)],38)],2)}var AR=c(Qre,[["render",Hre]]);const Gre="COMPLETE",RR="CANCELED";function Yre(l){if(s&&"requestAnimationFrame"in window)return window.requestAnimationFrame(l);setTimeout(l,16)}function IR(l,u,m){l===window?l.scrollTo(u,m):(l.scrollLeft=u,l.scrollTop=m)}function jre(l,u,m){if(!s)return;let k=l.getBoundingClientRect(),C=null,v=null,R=null,B=null,G=null,W=null,j=null,ce=m&&m.left!=null?m.left:.5,Oe=m&&m.top!=null?m.top:.5,xe=m&&m.leftOffset!=null?m.leftOffset:0,ye=m&&m.topOffset!=null?m.topOffset:0,oe=ce,Re=Oe;if(u===window)W=Math.min(k.width,window.innerWidth),j=Math.min(k.height,window.innerHeight),v=k.left+window.pageXOffset-window.innerWidth*oe+W*oe,R=k.top+window.pageYOffset-window.innerHeight*Re+j*Re,v-=xe,R-=ye,B=v-window.pageXOffset,G=R-window.pageYOffset;else{W=k.width,j=k.height,C=u.getBoundingClientRect();let Lt=k.left-(C.left-u.scrollLeft),yt=k.top-(C.top-u.scrollTop);v=Lt+W*oe-u.clientWidth*oe,R=yt+j*Re-u.clientHeight*Re,v=Math.max(Math.min(v,u.scrollWidth-u.clientWidth),0),R=Math.max(Math.min(R,u.scrollHeight-u.clientHeight),0),v-=xe,R-=ye,B=v-u.scrollLeft,G=R-u.scrollTop}return{x:v,y:R,differenceX:B,differenceY:G}}function DR(l){Yre(function(){let u=l.scrollOption;if(!u)return;let m=jre(u.target,l,u.align),k=Date.now()-u.startTime,C=Math.min(1/u.time*k,1);if(k>u.time+20)return IR(l,m.x,m.y),l.scrollOption=null,u.end(Gre);let v=1-u.ease(C);IR(l,m.x-m.differenceX*v,m.y-m.differenceY*v),DR(l)})}function qre(l,u,m,k){let C=!u.scrollOption,v=u.scrollOption,R=Date.now(),B;v&&v.end(RR);function G(W){u.scrollOption=null,u.parentElement&&u.parentElement.scrollOption&&u.parentElement.scrollOption.end(W),k(W),u.removeEventListener("touchstart",B)}u.scrollOption={startTime:v?v.startTime:Date.now(),target:l,time:m.time+(v?R-v.startTime:0),ease:m.ease,align:m.align,end:G},B=G.bind(null,RR),u.addEventListener("touchstart",B),C&&DR(u)}function NR(l){if(s)return l===window||(l.scrollHeight!==l.clientHeight||l.scrollWidth!==l.clientWidth)&&getComputedStyle(l).overflow!=="hidden"}function Zre(){return!0}function XS(l,u,m){if(!l)return;typeof u=="function"&&(m=u,u=null),u||(u={}),u.time=isNaN(u.time)?1e3:u.time,u.ease=u.ease||function(G){return 1-Math.pow(1-G,G/2)};let k=l.parentElement,C=0;function v(G){C-=1,!C&&m&&m(G)}let R=u.validTarget||Zre,B=u.isScrollable;for(;k;){if(R(k,C)&&(B?B(k,NR):NR(k))&&(C+=1,qre(l,k,u,v)),k=k.parentElement,!k)return;k.tagName==="BODY"&&(k=window)}}function Kre(l){if(s&&"requestAnimationFrame"in window)return window.requestAnimationFrame(l);setTimeout(l,16)}function WS(l,u,m){if(!l)return;typeof u=="function"&&(m=u,u=null),u||(u={}),u.time=isNaN(u.time)?500:u.time;const k=l.scrollTop,C=u.to||0,v=Math.abs(k-C),R=Math.ceil(v/u.time*50);function B(G,W,j){if(G===W){m&&m();return}let ce=G+j>W?W:G+j;G>W&&(ce=G-j<W?W:G-j),l.scrollTop=ce,Kre(()=>B(ce,W,j))}B(k,C,R)}const kl="ivu-layout-sider";me();const Jre={name:"Sider",emits:["on-collapse","update:modelValue"],props:{modelValue:{type:Boolean,default:!1},width:{type:[Number,String],default:200},collapsedWidth:{type:[Number,String],default:64},hideTrigger:{type:Boolean,default:!1},breakpoint:{type:String,validator(l){return _(l,["xs","sm","md","lg","xl","xxl"])}},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},reverseArrow:{type:Boolean,default:!1}},data(){return{prefixCls:kl,mediaMatched:!1}},computed:{wrapClasses(){return[`${kl}`,this.siderWidth?"":`${kl}-zero-width`,this.modelValue?`${kl}-collapsed`:""]},wrapStyles(){return{width:`${this.siderWidth}px`,minWidth:`${this.siderWidth}px`,maxWidth:`${this.siderWidth}px`,flex:`0 0 ${this.siderWidth}px`}},triggerClasses(){return[`${kl}-trigger`,this.modelValue?`${kl}-trigger-collapsed`:""]},childClasses(){return`${this.prefixCls}-children`},zeroWidthTriggerClasses(){return[`${kl}-zero-width-trigger`,this.reverseArrow?`${kl}-zero-width-trigger-left`:""]},triggerIconClasses(){return["ivu-icon",`ivu-icon-ios-arrow-${this.reverseArrow?"forward":"back"}`,`${kl}-trigger-icon`]},siderWidth(){return this.collapsible?this.modelValue?this.mediaMatched?0:parseInt(this.collapsedWidth):parseInt(this.width):this.width},showZeroTrigger(){return this.collapsible?this.mediaMatched&&!this.hideTrigger||parseInt(this.collapsedWidth)===0&&this.modelValue&&!this.hideTrigger:!1},showBottomTrigger(){return this.collapsible?!this.mediaMatched&&!this.hideTrigger:!1}},methods:{toggleCollapse(){let l=this.collapsible?!this.modelValue:!1;this.$emit("update:modelValue",l)},matchMedia(){if(!s)return;let l;window.matchMedia&&(l=window.matchMedia);let u=this.mediaMatched;this.mediaMatched=l(`(max-width: ${he[this.breakpoint]})`).matches,this.mediaMatched!==u&&this.$emit("update:modelValue",this.mediaMatched)},onWindowResize(){this.matchMedia()}},watch:{modelValue(l){this.$emit("on-collapse",l)}},mounted(){this.defaultCollapsed&&this.$emit("update:modelValue",this.defaultCollapsed),this.breakpoint!==void 0&&(o(window,"resize",this.onWindowResize),this.matchMedia())},beforeUnmount(){this.breakpoint!==void 0&&a(window,"resize",this.onWindowResize)}},ese=[i.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-menu"},null,-1)];function tse(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses),style:i.normalizeStyle(v.wrapStyles)},[i.withDirectives(i.createElementVNode("span",{onClick:u[0]||(u[0]=(...R)=>v.toggleCollapse&&v.toggleCollapse(...R)),class:i.normalizeClass(v.zeroWidthTriggerClasses)},ese,2),[[i.vShow,v.showZeroTrigger]]),i.createElementVNode("div",{class:i.normalizeClass(v.childClasses)},[i.renderSlot(l.$slots,"default")],2),i.renderSlot(l.$slots,"trigger",{},()=>[i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass(v.triggerClasses),onClick:u[1]||(u[1]=(...R)=>v.toggleCollapse&&v.toggleCollapse(...R)),style:i.normalizeStyle({width:v.siderWidth+"px"})},[i.createElementVNode("i",{class:i.normalizeClass(v.triggerIconClasses)},null,2)],6),[[i.vShow,v.showBottomTrigger]])])],6)}var $R=c(Jre,[["render",tse]]);const Rc="ivu-skeleton-item",ise={name:"SkeletonItem",components:{Icon:S},inject:{SkeletonInstance:{default:null}},props:{animated:{type:Boolean,default:!1},type:{validator(l){return _(l,["circle","square","rect","image"])},default:"rect"},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},width:{type:[String,Number]},height:{type:[String,Number]},block:{type:Boolean,default:!1},imgSrc:{type:String}},data(){return{prefixCls:Rc}},computed:{classes(){return[Rc,Rc+"-"+this.type,Rc+"-"+this.type+"-"+this.size,{[Rc+"-animated"]:this.animated||!!this.SkeletonInstance&&this.SkeletonInstance.animated,[Rc+"-inline"]:!this.block,[Rc+"-with-image"]:this.showImage,[Rc+"-round"]:!!this.SkeletonInstance&&this.SkeletonInstance.round}]},styles(){const l={};return["rect","image"].includes(this.type)&&(this.width&&(l.width=typeof this.width=="number"?`${this.width}px`:this.width),this.height&&(l.height=typeof this.height=="number"?`${this.height}px`:this.height),this.showImage&&(l.background=`no-repeat url(${this.imgSrc}) center center`,l.backgroundSize="contain")),l},showIcon(){return this.type==="image"&&!this.imgSrc},showImage(){return this.type==="image"&&!!this.imgSrc},iconSize(){let l=16;return this.size==="large"&&(l=32),this.size==="small"&&(l=10),l}}};function nse(l,u,m,k,C,v){const R=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(v.styles)},[v.showIcon?(i.openBlock(),i.createBlock(R,{key:0,class:i.normalizeClass(C.prefixCls+"-image-icon"),type:"ios-image",size:v.iconSize},null,8,["class","size"])):i.createCommentVNode("",!0)],6)}var QS=c(ise,[["render",nse]]);const lu="ivu-skeleton",rse={name:"Skeleton",components:{SkeletonItem:QS,Row:wc,Col:Ba},provide(){return{SkeletonInstance:this}},props:{animated:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},paragraph:{validator(l){return typeof l=="number"?l>=1:typeof l.rows=="number"&&l.rows>=1},type:[Number,Object],default:3},title:{validator(l){return typeof l=="object"&&l.width?["number","string"].includes(typeof l.width):!0},type:[Boolean,Object],default:!0},avatar:{validator(l){if(typeof l=="object"){if(l.type)return _(l.type,["circle","square"]);if(l.size)return _(l.size,["small","large","default"])}return!0},type:[Boolean,Object],default:!1}},data(){return{prefixCls:lu}},computed:{classes(){return[lu,{[lu+"-with-title"]:this.showTitle,[lu+"-with-avatar"]:this.showAvatar}]},rows(){return typeof this.paragraph=="number"?this.paragraph:this.paragraph.rows},rowsCount(){return this.rows+Number(this.showTitle)},showTitle(){return!!this.title},titleWidth(){return typeof this.title=="object"&&this.title.width?typeof this.title.width=="string"?this.title.width:`${this.title.width}px`:""},showAvatar(){return!!this.avatar},avatarType(){return typeof this.avatar=="object"&&this.avatar.type?this.avatar.type:"circle"},avatarSize(){return typeof this.avatar=="object"&&this.avatar.size?this.avatar.size:!this.$VIEWUI||this.$VIEWUI.size===""?"default":this.$VIEWUI.size}},methods:{rowClasses(l){return[lu+"-item-inner",{[lu+"-item-round"]:this.round,[lu+"-item-title"]:this.showTitle&&l===1}]},rowWidth(l){if(this.showTitle&&l===1)return this.titleWidth||"38%";if(typeof this.paragraph=="object"){if(typeof this.paragraph.width=="string")return this.paragraph.width;if(typeof this.paragraph.width=="number")return`${this.paragraph.width}px`;const u=l-1-Number(this.showTitle);if(Array.isArray(this.paragraph.width)&&this.paragraph.width[u])return typeof this.paragraph.width[u]=="number"?`${this.paragraph.width[u]}px`:this.paragraph.width[u]}return l===this.rowsCount?"62%":"100%"}}};function sse(l,u,m,k,C,v){const R=i.resolveComponent("SkeletonItem"),B=i.resolveComponent("Col"),G=i.resolveComponent("Row");return m.loading?(i.openBlock(),i.createElementBlock("div",i.mergeProps({key:0},l.$attrs,{class:v.classes}),[m.loading?i.renderSlot(l.$slots,"template",{key:0},()=>[i.createVNode(G,null,{default:i.withCtx(()=>[v.showAvatar?(i.openBlock(),i.createBlock(B,{key:0,flex:"0"},{default:i.withCtx(()=>[i.createVNode(R,{type:v.avatarType,size:v.avatarSize,animated:m.animated,class:i.normalizeClass(C.prefixCls+"-item-avatar")},null,8,["type","size","animated","class"])]),_:1})):i.createCommentVNode("",!0),i.createVNode(B,{flex:"1"},{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.rowsCount,W=>(i.openBlock(),i.createBlock(R,{key:W,class:i.normalizeClass(v.rowClasses(W)),animated:m.animated,width:v.rowWidth(W),block:""},null,8,["class","animated","width"]))),128))]),_:1})]),_:1})]):i.createCommentVNode("",!0)],16)):i.renderSlot(l.$slots,"default",i.normalizeProps(i.mergeProps({key:1},l.$attrs)))}var VR=c(rse,[["render",sse]]),ose={name:"SliderMarker",props:{mark:{type:[String,Object]}},render(){let l=typeof this.mark=="string"?this.mark:[this.mark.label];return i.h("div",{class:"ivu-slider-marks-item",style:this.mark.style||{}},l)}};const Tl="ivu-slider",ase={name:"Slider",mixins:[mi],emits:["update:modelValue","on-input","on-change"],components:{InputNumber:PS,Tooltip:Ol,SliderMarker:ose},inject:{ModalInstance:{default:null},DrawerInstance:{default:null}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},disabled:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},inputSize:{type:String,default:"default",validator(l){return _(l,["small","large","default"])}},showStops:{type:Boolean,default:!1},tipFormat:{type:Function,default(l){return l}},showTip:{type:String,default:"hover",validator(l){return _(l,["hover","always","never"])}},name:{type:String},activeChange:{type:Boolean,default:!0},marks:{type:Object}},data(){let l=this.checkLimits(Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]);return this.range&&this.modelValue===null&&(l=[0,0]),{prefixCls:Tl,currentValue:l,dragging:!1,pointerDown:"",startX:0,currentX:0,startPos:0,oldValue:[...l],valueIndex:{min:0,max:1},sliderWidth:0,isValueNull:!1,id:te(6)}},watch:{modelValue(l){l===null&&(this.isValueNull=!0),l=this.checkLimits(Array.isArray(l)?l:[l]),!this.dragging&&(l[0]!==this.currentValue[0]||l[1]!==this.currentValue[1])&&(this.isValueNull&&this.range?this.currentValue=[0,0]:this.currentValue=l)},exportValue(l){i.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()});const u=this.range?l:l[0];this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",u),this.$emit("on-input",u)}},computed:{classes(){return[`${Tl}`,{[`${Tl}-input`]:this.showInput&&!this.range,[`${Tl}-range`]:this.range,[`${Tl}-disabled`]:this.itemDisabled}]},minButtonClasses(){return[`${Tl}-button`,{[`${Tl}-button-dragging`]:this.pointerDown==="min"}]},maxButtonClasses(){return[`${Tl}-button`,{[`${Tl}-button-dragging`]:this.pointerDown==="max"}]},exportValue(){const l=(String(this.step).split(".")[1]||"").length;return this.currentValue.map(u=>Number(u.toFixed(l)))},minPosition(){return(this.currentValue[0]-this.min)/this.valueRange*100},maxPosition:function(){return(this.currentValue[1]-this.min)/this.valueRange*100},barStyle(){const l={width:(this.currentValue[0]-this.min)/this.valueRange*100+"%"};return this.range&&(l.left=(this.currentValue[0]-this.min)/this.valueRange*100+"%",l.width=(this.currentValue[1]-this.currentValue[0])/this.valueRange*100+"%"),l},stops(){let l=this.valueRange/this.step,u=[],m=100*this.step/this.valueRange;for(let k=1;k<l;k++)u.push(k*m);return u},markList(){return this.marks?Object.keys(this.marks).map(parseFloat).sort((l,u)=>l-u).filter(l=>l<=this.max&&l>=this.min).map(l=>({point:l,position:(l-this.min)*100/(this.max-this.min),mark:this.marks[l]})):[]},tipDisabled(){return this.tipFormat(this.currentValue[0])===null||this.showTip==="never"},valueRange(){return this.max-this.min},firstPosition(){return this.currentValue[0]},secondPosition(){return this.currentValue[1]}},methods:{getPointerX(l){return l.type.indexOf("touch")!==-1?l.touches[0].clientX:l.clientX},checkLimits([l,u]){return l=Math.max(this.min,l),l=Math.min(this.max,l),u=Math.max(this.min,l,u),u=Math.min(this.max,u),[l,u]},getCurrentValue(l,u){if(this.itemDisabled)return;const m=this.valueIndex[u];if(typeof m<"u")return this.currentValue[m]},onKeyLeft(l,u){const m=this.getCurrentValue(l,u);Number.isFinite(m)&&this.changeButtonPosition(m-this.step,u)},onKeyRight(l,u){const m=this.getCurrentValue(l,u);Number.isFinite(m)&&this.changeButtonPosition(m+this.step,u)},onPointerDown(l,u){this.itemDisabled||(l.preventDefault(),this.pointerDown=u,this.onPointerDragStart(l),o(window,"mousemove",this.onPointerDrag),o(window,"touchmove",this.onPointerDrag),o(window,"mouseup",this.onPointerDragEnd),o(window,"touchend",this.onPointerDragEnd))},onPointerDragStart(l){this.dragging=!1,this.startX=this.getPointerX(l),this.startPos=this[`${this.pointerDown}Position`]*this.valueRange/100+this.min},onPointerDrag(l){this.dragging=!0,this.$refs[`${this.pointerDown}Tooltip`].visible=!0,this.currentX=this.getPointerX(l);const u=(this.currentX-this.startX)/this.sliderWidth*this.valueRange;this.changeButtonPosition(this.startPos+u)},onPointerDragEnd(){this.dragging&&(this.dragging=!1,this.$refs[`${this.pointerDown}Tooltip`].visible=!1,this.emitChange()),this.pointerDown="",a(window,"mousemove",this.onPointerDrag),a(window,"touchmove",this.onPointerDrag),a(window,"mouseup",this.onPointerDragEnd),a(window,"touchend",this.onPointerDragEnd)},changeButtonPosition(l,u){const m=u||this.pointerDown,k=m==="min"?0:1;m==="min"?l=this.checkLimits([l,this.max])[0]:l=this.checkLimits([this.min,l])[1];const C=this.handleDecimal(l,this.step),v=this.currentValue;v[k]=l-C,this.range&&(m==="min"&&v[0]>v[1]&&(v[1]=v[0]),m==="max"&&v[0]>v[1]&&(v[0]=v[1])),this.currentValue=[...v],this.dragging||this.currentValue[k]!==this.oldValue[k]&&(this.emitChange(),this.oldValue[k]=this.currentValue[k])},handleDecimal(l,u){if(u<1){let m=u.toString(),k=1,C;try{C=m.split(".")[1].length}catch{C=0}return k=Math.pow(10,C),l*k%(u*k)/k}else return l%u},emitChange(){const l=this.range?this.exportValue:this.exportValue[0];this.$emit("on-change",l),this.handleFormItemChange("change",l)},sliderClick(l){if(this.itemDisabled)return;const u=this.getPointerX(l),m=this.$refs.slider.getBoundingClientRect().left;let k=(u-m)/this.sliderWidth*this.valueRange+this.min,C=k/this.valueRange*100;!this.range||C<=this.minPosition?this.changeButtonPosition(k,"min"):C>=this.maxPosition?this.changeButtonPosition(k,"max"):this.changeButtonPosition(k,k-this.firstPosition<=this.secondPosition-k?"min":"max")},handleInputChange(l){this.currentValue=[l===0?0:l||this.min,this.currentValue[1]],this.emitChange()},handleFocus(l){this.$refs[`${l}Tooltip`].handleShowPopper()},handleBlur(l){this.$refs[`${l}Tooltip`].handleClosePopper()},handleSetSliderWidth(){this.sliderWidth=parseInt(D(this.$refs.slider,"width"),10)},handleOnVisibleChange(l){l&&this.showTip==="always"&&(this.$refs.minTooltip.doDestroy(),this.range&&this.$refs.maxTooltip.doDestroy(),i.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()}))},addSlider(l){const u=this[l];!u||(u.sliderList||(u.sliderList=[]),u.sliderList.push({id:this.id,slider:this}))},removeSlider(l){const u=this[l];if(!u||!u.sliderList)return;const m=u.sliderList.findIndex(k=>k.id===this.id);u.sliderList.splice(m,1)}},mounted(){this.addSlider("ModalInstance"),this.addSlider("DrawerInstance"),this.observer=Qd(),this.observer.listenTo(this.$refs.slider,this.handleSetSliderWidth)},beforeUnmount(){this.removeSlider("ModalInstance"),this.removeSlider("DrawerInstance"),this.observer.removeListener(this.$refs.slider,this.handleSetSliderWidth)}},lse=["name","value"],cse={class:"ivu-slider-marks"};function hse(l,u,m,k,C,v){const R=i.resolveComponent("Input-number"),B=i.resolveComponent("SliderMarker"),G=i.resolveComponent("Tooltip");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[!m.range&&m.showInput?(i.openBlock(),i.createBlock(R,{key:0,min:m.min,size:m.inputSize,max:m.max,step:m.step,modelValue:v.exportValue[0],disabled:l.itemDisabled,"active-change":m.activeChange,onOnChange:v.handleInputChange},null,8,["min","size","max","step","modelValue","disabled","active-change","onOnChange"])):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-wrap"]),ref:"slider",onClick:u[19]||(u[19]=i.withModifiers((...W)=>v.sliderClick&&v.sliderClick(...W),["self"]))},[i.createElementVNode("input",{type:"hidden",name:m.name,value:v.exportValue},null,8,lse),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-bar"]),style:i.normalizeStyle(v.barStyle),onClick:u[0]||(u[0]=i.withModifiers((...W)=>v.sliderClick&&v.sliderClick(...W),["self"]))},null,6),m.showStops?(i.openBlock(!0),i.createElementBlock(i.Fragment,{key:0},i.renderList(v.stops,W=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls+"-stop"]),key:W,style:i.normalizeStyle({left:W+"%"}),onClick:u[1]||(u[1]=i.withModifiers((...j)=>v.sliderClick&&v.sliderClick(...j),["self"]))},null,6))),128)):i.createCommentVNode("",!0),v.markList.length>0?(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.markList,(W,j)=>(i.openBlock(),i.createElementBlock("div",{key:j,class:i.normalizeClass([C.prefixCls+"-stop"]),style:i.normalizeStyle({left:W.position+"%"}),onClick:u[2]||(u[2]=i.withModifiers((...ce)=>v.sliderClick&&v.sliderClick(...ce),["self"]))},null,6))),128)),i.createElementVNode("div",cse,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.markList,(W,j)=>(i.openBlock(),i.createBlock(B,{key:j,mark:W.mark,style:i.normalizeStyle({left:W.position+"%"}),onClick:v.sliderClick},null,8,["mark","style","onClick"]))),128))])],64)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-button-wrap"]),style:i.normalizeStyle({left:v.minPosition+"%"}),onTouchstart:u[9]||(u[9]=W=>v.onPointerDown(W,"min")),onMousedown:u[10]||(u[10]=W=>v.onPointerDown(W,"min"))},[i.createVNode(G,{controlled:C.pointerDown==="min",placement:"top",content:m.tipFormat(v.exportValue[0]),disabled:v.tipDisabled,always:m.showTip==="always",ref:"minTooltip"},{default:i.withCtx(()=>[i.createElementVNode("div",{class:i.normalizeClass(v.minButtonClasses),tabindex:"0",onFocus:u[3]||(u[3]=W=>v.handleFocus("min")),onBlur:u[4]||(u[4]=W=>v.handleBlur("min")),onKeydown:[u[5]||(u[5]=i.withKeys(W=>v.onKeyLeft(W,"min"),["left"])),u[6]||(u[6]=i.withKeys(W=>v.onKeyLeft(W,"min"),["down"])),u[7]||(u[7]=i.withKeys(W=>v.onKeyRight(W,"min"),["right"])),u[8]||(u[8]=i.withKeys(W=>v.onKeyRight(W,"min"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38),m.range?(i.openBlock(),i.createElementBlock("div",{key:2,class:i.normalizeClass([C.prefixCls+"-button-wrap"]),style:i.normalizeStyle({left:v.maxPosition+"%"}),onTouchstart:u[17]||(u[17]=W=>v.onPointerDown(W,"max")),onMousedown:u[18]||(u[18]=W=>v.onPointerDown(W,"max"))},[i.createVNode(G,{controlled:C.pointerDown==="max",placement:"top",content:m.tipFormat(v.exportValue[1]),disabled:v.tipDisabled,always:m.showTip==="always",ref:"maxTooltip"},{default:i.withCtx(()=>[i.createElementVNode("div",{class:i.normalizeClass(v.maxButtonClasses),tabindex:"0",onFocus:u[11]||(u[11]=W=>v.handleFocus("max")),onBlur:u[12]||(u[12]=W=>v.handleBlur("max")),onKeydown:[u[13]||(u[13]=i.withKeys(W=>v.onKeyLeft(W,"max"),["left"])),u[14]||(u[14]=i.withKeys(W=>v.onKeyLeft(W,"max"),["down"])),u[15]||(u[15]=i.withKeys(W=>v.onKeyRight(W,"max"),["right"])),u[16]||(u[16]=i.withKeys(W=>v.onKeyRight(W,"max"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38)):i.createCommentVNode("",!0)],2)],2)}var LR=c(ase,[["render",hse]]);const use={small:8,default:16,large:24},BR={name:"Space",props:{size:{type:[String,Number,Array],validator(l){const u=["small","large","default"];return typeof l=="string"?_(l,u):Array.isArray(l)?l.length>0&&l.every(m=>typeof m=="number"||_(m,u)):!0},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||!l.$VIEWUI.space||l.$VIEWUI.space.size===""?"small":l.$VIEWUI.space.size}},direction:{type:String,validator(l){return _(l,["horizontal","vertical"])},default:"horizontal"},align:{type:String,validator(l){return _(l,["start","end","center","baseline","stretch"])}},wrap:{type:Boolean,default:!1},split:{type:Boolean,default:!1},type:{type:String,validator(l){return _(l,["inline-flex","flex"])},default:"inline-flex"}},computed:{mergedAlign(){if(!this.align){if(this.direction==="horizontal")return"center";if(this.type==="flex")return"stretch"}return this.align},classes(){return["ivu-space",`ivu-space-${this.direction}`,{"ivu-space-flex":this.type==="flex","ivu-space-wrap":this.wrap,[`ivu-space-${this.mergedAlign}`]:this.mergedAlign}]},styles(){const l={};return["number","string"].includes(typeof this.size)&&(l.gap=this.getSize(this.size)),Array.isArray(this.size)&&(this.size.length===1?l.columnGap=this.getSize(this.size[0]):this.size.length>1&&(l.columnGap=this.getSize(this.size[0]),l.rowGap=this.getSize(this.size[1]))),l}},methods:{getSize(l){return`${typeof l=="string"?use[l]:l||0}px`},filterEmpty(l=[]){const u=[];return l.forEach(m=>{Array.isArray(m)?u.push(...m):m.type===i.Fragment?u.push(...m.children):u.push(m)}),u.filter(m=>!this.isEmptyElement(m))},isEmptyElement(l){return l&&(l.type===i.Comment||l.type===i.Fragment&&l.children.length===0||l.type===i.Text&&l.children.trim()==="")}},render(){const l=this.filterEmpty(this.$slots.default?this.$slots.default():[]),u=l.length;if(u===0)return null;let m=null;return this.split&&!this.$slots.split?m=i.h(t1,{type:"vertical"}):this.$slots.split&&(m=this.$slots.split()),i.h("div",{class:this.classes,style:this.styles},l.map((k,C)=>{const v=i.h("div",{class:"ivu-space-item"},[k]);return m&&C+1<u?[v,i.h("div",{class:"ivu-space-split"},[m])]:v}))}},dse={name:"Trigger",props:{mode:String},data(){return{prefix:"ivu-split-trigger",initOffset:0}},computed:{isVertical(){return this.mode==="vertical"},classes(){return[this.prefix,this.isVertical?`${this.prefix}-vertical`:`${this.prefix}-horizontal`]},barConClasses(){return[`${this.prefix}-bar-con`,this.isVertical?"vertical":"horizontal"]}}};function fse(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.createElementVNode("div",{class:i.normalizeClass(v.barConClasses)},[u[0]||(i.setBlockTracking(-1),u[0]=(i.openBlock(),i.createElementBlock(i.Fragment,null,i.renderList(8,R=>i.createElementVNode("i",{class:i.normalizeClass(`${C.prefix}-bar`),key:`trigger-${R}`},null,2)),64)),i.setBlockTracking(1),u[0])],2)],2)}var pse=c(dse,[["render",fse]]);const mse={name:"Split",components:{Trigger:pse},emits:["update:modelValue","on-move-start","on-moving","on-move-end"],props:{modelValue:{type:[Number,String],default:.5},mode:{validator(l){return _(l,["horizontal","vertical"])},default:"horizontal"},min:{type:[Number,String],default:"40px"},max:{type:[Number,String],default:"40px"}},data(){return{prefix:"ivu-split",offset:0,oldOffset:0,isMoving:!1,computedMin:0,computedMax:0,currentValue:.5}},computed:{wrapperClasses(){return[`${this.prefix}-wrapper`,this.isMoving?"no-select":""]},paneClasses(){return[`${this.prefix}-pane`,{[`${this.prefix}-pane-moving`]:this.isMoving}]},isHorizontal(){return this.mode==="horizontal"},anotherOffset(){return 100-this.offset},valueIsPx(){return typeof this.modelValue=="string"},offsetSize(){return this.isHorizontal?"offsetWidth":"offsetHeight"}},methods:{px2percent(l,u){return parseFloat(l)/parseFloat(u)},getComputedThresholdValue(l){let u=this.$refs.outerWrapper[this.offsetSize];return this.valueIsPx?typeof this[l]=="string"?this[l]:u*this[l]:typeof this[l]=="string"?this.px2percent(this[l],u):this[l]},getMin(l,u){return this.valueIsPx?`${Math.min(parseFloat(l),parseFloat(u))}px`:Math.min(l,u)},getMax(l,u){return this.valueIsPx?`${Math.max(parseFloat(l),parseFloat(u))}px`:Math.max(l,u)},getAnotherOffset(l){let u=0;return this.valueIsPx?u=`${this.$refs.outerWrapper[this.offsetSize]-parseFloat(l)}px`:u=1-l,u},handleMove(l){let u=(this.isHorizontal?l.pageX:l.pageY)-this.initOffset,m=this.$refs.outerWrapper[this.offsetSize],k=this.valueIsPx?`${parseFloat(this.oldOffset)+u}px`:this.px2percent(m*this.oldOffset+u,m),C=this.getAnotherOffset(k);parseFloat(k)<=parseFloat(this.computedMin)&&(k=this.getMax(k,this.computedMin)),parseFloat(C)<=parseFloat(this.computedMax)&&(k=this.getAnotherOffset(this.getMax(C,this.computedMax))),l.atMin=this.modelValue===this.computedMin,l.atMax=this.valueIsPx?this.getAnotherOffset(this.modelValue)===this.computedMax:this.getAnotherOffset(this.modelValue).toFixed(5)===this.computedMax.toFixed(5),this.$emit("update:modelValue",k),this.$emit("on-moving",l)},handleUp(){this.isMoving=!1,a(document,"mousemove",this.handleMove),a(document,"mouseup",this.handleUp),this.$emit("on-move-end")},handleMousedown(l){this.initOffset=this.isHorizontal?l.pageX:l.pageY,this.oldOffset=this.modelValue,this.isMoving=!0,o(document,"mousemove",this.handleMove),o(document,"mouseup",this.handleUp),this.$emit("on-move-start")},computeOffset(){i.nextTick(()=>{this.computedMin=this.getComputedThresholdValue("min"),this.computedMax=this.getComputedThresholdValue("max"),this.offset=(this.valueIsPx?this.px2percent(this.modelValue,this.$refs.outerWrapper[this.offsetSize]):this.modelValue)*1e4/100})}},watch:{modelValue(l){l!==this.currentValue&&(this.currentValue=l,this.computeOffset())}},mounted(){i.nextTick(()=>{this.computeOffset()}),o(window,"resize",this.computeOffset)},beforeUnmount(){a(window,"resize",this.computeOffset)}};function gse(l,u,m,k,C,v){const R=i.resolveComponent("trigger");return i.openBlock(),i.createElementBlock("div",{ref:"outerWrapper",class:i.normalizeClass(v.wrapperClasses)},[v.isHorizontal?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(`${C.prefix}-horizontal`)},[i.createElementVNode("div",{style:i.normalizeStyle({right:`${v.anotherOffset}%`}),class:i.normalizeClass(["left-pane",v.paneClasses])},[i.renderSlot(l.$slots,"left")],6),i.createElementVNode("div",{class:i.normalizeClass(`${C.prefix}-trigger-con`),style:i.normalizeStyle({left:`${C.offset}%`}),onMousedown:u[0]||(u[0]=(...B)=>v.handleMousedown&&v.handleMousedown(...B))},[i.renderSlot(l.$slots,"trigger",{},()=>[i.createVNode(R,{mode:"vertical"})])],38),i.createElementVNode("div",{style:i.normalizeStyle({left:`${C.offset}%`}),class:i.normalizeClass(["right-pane",v.paneClasses])},[i.renderSlot(l.$slots,"right")],6)],2)):(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass(`${C.prefix}-vertical`)},[i.createElementVNode("div",{style:i.normalizeStyle({bottom:`${v.anotherOffset}%`}),class:i.normalizeClass(["top-pane",v.paneClasses])},[i.renderSlot(l.$slots,"top")],6),i.createElementVNode("div",{class:i.normalizeClass(`${C.prefix}-trigger-con`),style:i.normalizeStyle({top:`${C.offset}%`}),onMousedown:u[1]||(u[1]=(...B)=>v.handleMousedown&&v.handleMousedown(...B))},[i.renderSlot(l.$slots,"trigger",{},()=>[i.createVNode(R,{mode:"horizontal"})])],38),i.createElementVNode("div",{style:i.normalizeStyle({top:`${C.offset}%`}),class:i.normalizeClass(["bottom-pane",v.paneClasses])},[i.renderSlot(l.$slots,"bottom")],6)],2))],2)}var UR=c(mse,[["render",gse]]);const Yd="ivu-steps",FR="ivu-icon",yse={name:"Step",inject:["StepsInstance"],props:{status:{validator(l){return _(l,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:Yd,id:te(6)}},computed:{wrapClasses(){return[`${Yd}-item`,`${Yd}-status-${this.currentStatus}`,{[`${Yd}-custom`]:!!this.icon||!!this.$slots.icon,[`${Yd}-next-error`]:this.nextError}]},iconClasses(){let l="";return this.icon?l=this.icon:this.currentStatus==="finish"?l="ios-checkmark":this.currentStatus==="error"&&(l="ios-close"),[`${Yd}-icon`,`${FR}`,{[`${FR}-${l}`]:l!==""}]},stepNumber(){return this.StepsInstance.steps.findIndex(l=>l.id===this.id)+1},total(){return this.StepsInstance.direction==="horizontal"?this.StepsInstance.steps.length:1},currentStatus(){let l="";if(this.status)l=this.status;else{const u=this.StepsInstance,m=u.current,k=u.steps.findIndex(C=>C.id===this.id);k===m?u.status!=="error"?l="process":l="error":k<m?l="finish":l="wait"}return l},nextError(){let l=!1;const u=this.StepsInstance,m=u.steps.findIndex(k=>k.id===this.id);return m+1<u.steps.length&&u.steps[m+1].currentStatus==="error"&&(l=!0),l}},beforeMount(){this.StepsInstance.addStep(this.id,this)},beforeUnmount(){this.StepsInstance.removeStep(this.id)}},vse=[i.createElementVNode("i",null,null,-1)],bse={key:0},xse={key:1,class:"ivu-steps-icon"};function Ose(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses)},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-tail"])},vse,2),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-head"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-head-inner"])},[!m.icon&&!l.$slots.icon&&v.currentStatus!=="finish"&&v.currentStatus!=="error"?(i.openBlock(),i.createElementBlock("span",bse,i.toDisplayString(v.stepNumber),1)):l.$slots.icon?(i.openBlock(),i.createElementBlock("span",xse,[i.renderSlot(l.$slots,"icon")])):(i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass(v.iconClasses)},null,2))],2)],2),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-main"])},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-title"])},[i.renderSlot(l.$slots,"title",{},()=>[i.createTextVNode(i.toDisplayString(m.title),1)])],2),m.content||l.$slots.content?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-content"])},[i.renderSlot(l.$slots,"content",{},()=>[i.createTextVNode(i.toDisplayString(m.content),1)])],2)):i.createCommentVNode("",!0)],2)],2)}var zR=c(yse,[["render",Ose]]);const HS="ivu-steps",wse={name:"Steps",provide(){return{StepsInstance:this}},props:{current:{type:Number,default:0},status:{validator(l){return _(l,["wait","process","finish","error"])},default:"process"},size:{validator(l){return _(l,["small"])}},direction:{validator(l){return _(l,["horizontal","vertical"])},default:"horizontal"}},data(){return{steps:[]}},computed:{classes(){return[`${HS}`,`${HS}-${this.direction}`,{[`${HS}-${this.size}`]:!!this.size}]},children(){return this.steps.map(l=>l.step)}},methods:{addStep(l,u){this.steps.push({id:l,step:u})},removeStep(l){const u=this.steps.findIndex(m=>m.id===l);this.steps.splice(u,1)}}};function _se(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes)},[i.renderSlot(l.$slots,"default")],2)}var XR=c(wse,[["render",_se]]);const cu="ivu-menu",Sse={name:"Submenu",mixins:[NS,oa],components:{Icon:S,Drop:Ye,CollapseTransition:US},provide(){return{SubmenuInstance:this}},props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{prefixCls:cu,active:!1,opened:!1,dropWidth:parseFloat(D(this.$el,"width")),id:te(6),childSubmenuList:[]}},computed:{classes(){return[`${cu}-submenu`,{[`${cu}-item-active`]:this.active&&!this.hasParentSubmenu,[`${cu}-opened`]:this.opened,[`${cu}-submenu-disabled`]:this.disabled,[`${cu}-submenu-has-parent-submenu`]:this.hasParentSubmenu,[`${cu}-child-item-active`]:this.active}]},accordion(){return this.menu.accordion},dropStyle(){let l={};return this.dropWidth&&(l.minWidth=`${this.dropWidth}px`),l},titleStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}},arrowType(){const l=this.globalConfig;let u="ios-arrow-down";return l&&(l.menu.customArrow?u="":l.menu.arrow&&(u=l.menu.arrow)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.menu.customArrow&&(u=l.menu.customArrow),u},arrowSize(){const l=this.globalConfig;let u="";return l&&l.menu.arrowSize&&(u=l.menu.arrowSize),u}},methods:{handleMouseenter(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!0},250))},handleMouseleave(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!1},150))},handleClick(){if(this.disabled||this.mode==="horizontal")return;const l=this.opened;this.opened=!l,this.menu.updateOpenKeys(this.name)},addSubmenu(){const l=this.MenuInstance;l.submenuList||(l.submenuList=[]),l.submenuList.push({id:this.id,submenu:this});const u=V(this,"Submenu");u&&(u.childSubmenuList||(u.childSubmenuList=[]),u.childSubmenuList.push({id:this.id,submenu:this}))},removeSubmenu(){const l=this.MenuInstance;if(l.submenuList&&l.submenuList.length){const m=l.submenuList.findIndex(k=>k.id===this.id);l.submenuList.splice(m,1)}const u=V(this,"Submenu");if(u&&u.childSubmenuList&&u.childSubmenuList.length){const m=u.childSubmenuList.findIndex(k=>k.id===this.id);u.childSubmenuList.splice(m,1)}},handleMenuItemSelect(l){this.mode==="horizontal"&&(this.opened=!1),this.MenuInstance.handleMenuItemSelect(l)},handleUpdateActiveName(l){V(this,"Submenu")&&this.SubmenuInstance.handleUpdateActiveName(l),this.childSubmenuList&&this.childSubmenuList.length&&this.childSubmenuList.map(u=>u.submenu).forEach(u=>{u.active=!1}),this.active=l}},watch:{mode(l){l==="horizontal"&&this.$refs.drop.update()},opened(l){this.mode!=="vertical"&&(l?(this.dropWidth=parseFloat(D(this.$el,"width")),this.$refs.drop.update()):this.$refs.drop.destroy())}},mounted(){this.addSubmenu()},beforeUnmount(){this.removeSubmenu()}};function Cse(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("collapse-transition"),G=i.resolveComponent("Drop");return i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.classes),onMouseenter:u[1]||(u[1]=(...W)=>v.handleMouseenter&&v.handleMouseenter(...W)),onMouseleave:u[2]||(u[2]=(...W)=>v.handleMouseleave&&v.handleMouseleave(...W))},[i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-submenu-title"]),ref:"reference",onClick:u[0]||(u[0]=i.withModifiers((...W)=>v.handleClick&&v.handleClick(...W),["stop"])),style:i.normalizeStyle(v.titleStyle)},[i.renderSlot(l.$slots,"title"),i.createVNode(R,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:i.normalizeClass([C.prefixCls+"-submenu-title-icon"])},null,8,["type","custom","size","class"])],6),l.mode==="vertical"?(i.openBlock(),i.createBlock(B,{key:0,ready:l.menu.ready},{default:i.withCtx(()=>[i.withDirectives(i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls])},[i.renderSlot(l.$slots,"default")],2),[[i.vShow,C.opened]])]),_:3},8,["ready"])):i.createCommentVNode("",!0),l.mode==="horizontal"?(i.openBlock(),i.createBlock(G,{key:1,ref:"drop",visible:C.opened,placement:"bottom","transition-name":"slide-up",styles:v.dropStyle},{default:i.withCtx(()=>[i.createElementVNode("ul",{class:i.normalizeClass([C.prefixCls+"-drop-list"])},[i.renderSlot(l.$slots,"default")],2)]),_:3},8,["visible","styles"])):i.createCommentVNode("",!0)],34)}var WR=c(Sse,[["render",Cse]]);const QR={name:"Submit",inject:["LoginInstance"],props:{},methods:{handleSubmit(){this.LoginInstance.handleSubmit()}},render(){const l=Object.assign({size:"large",type:"primary",long:!0},this.$attrs),u=i.h(fs,{...l,onClick:this.handleSubmit},this.$slots.default||(()=>"登录"));return i.h("div",{class:"ivu-login-submit"},[u])}},jd="ivu-switch",kse={name:"iSwitch",mixins:[mi],emits:["update:modelValue","on-change"],props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},size:{validator(l){return _(l,["large","small","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},name:{type:String},loading:{type:Boolean,default:!1},trueColor:{type:String},falseColor:{type:String},beforeChange:Function},data(){return{currentValue:this.modelValue}},computed:{wrapClasses(){return[`${jd}`,{[`${jd}-checked`]:this.currentValue===this.trueValue,[`${jd}-disabled`]:this.itemDisabled,[`${jd}-${this.size}`]:!!this.size,[`${jd}-loading`]:this.loading}]},wrapStyles(){let l={};return this.trueColor&&this.currentValue===this.trueValue?(l["border-color"]=this.trueColor,l["background-color"]=this.trueColor):this.falseColor&&this.currentValue===this.falseValue&&(l["border-color"]=this.falseColor,l["background-color"]=this.falseColor),l},innerClasses(){return`${jd}-inner`}},methods:{handleToggle(){const l=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=l,this.$emit("update:modelValue",l),this.$emit("on-change",l),this.handleFormItemChange("change",l)},toggle(l){if(l.preventDefault(),this.itemDisabled||this.loading)return!1;if(!this.beforeChange)return this.handleToggle();const u=this.beforeChange();u&&u.then?u.then(()=>{this.handleToggle()}):this.handleToggle()}},watch:{modelValue(l){if(l!==this.trueValue&&l!==this.falseValue&&l!==null)throw"Value should be trueValue or falseValue.";this.currentValue=l}}},Tse=["name","value"];function Mse(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("span",{tabindex:"0",class:i.normalizeClass(v.wrapClasses),style:i.normalizeStyle(v.wrapStyles),onClick:u[0]||(u[0]=(...R)=>v.toggle&&v.toggle(...R)),onKeydown:u[1]||(u[1]=i.withKeys((...R)=>v.toggle&&v.toggle(...R),["space"]))},[i.createElementVNode("input",{type:"hidden",name:m.name,value:C.currentValue},null,8,Tse),i.createElementVNode("span",{class:i.normalizeClass(v.innerClasses)},[C.currentValue===m.trueValue?i.renderSlot(l.$slots,"open",{key:0}):i.createCommentVNode("",!0),C.currentValue===m.falseValue?i.renderSlot(l.$slots,"close",{key:1}):i.createCommentVNode("",!0)],2)],38)}var GS=c(kse,[["render",Mse]]),Ese={name:"TableRenderHeader",props:{render:Function,column:Object,index:Number},render(){const l={column:this.column,index:this.index};return this.render(i.h,l)}},YS={methods:{alignCls(l,u={}){let m="";return u.cellClassName&&l.key&&u.cellClassName[l.key]&&(m=u.cellClassName[l.key]),[`${this.prefixCls}-column-${l.__id}`,{[`${m}`]:m,[`${l.className}`]:l.className,[`${this.prefixCls}-column-${l.align}`]:l.align,[`${this.prefixCls}-hidden`]:this.fixed==="left"&&l.fixed!=="left"||this.fixed==="right"&&l.fixed!=="right"||!this.fixed&&l.fixed&&(l.fixed==="left"||l.fixed==="right")}]},isPopperShow(l){return l.filters&&(!this.fixed&&!l.fixed||this.fixed==="left"&&l.fixed==="left"||this.fixed==="right"&&l.fixed==="right")},setCellWidth(l){let u="";return l.width?u=l.width:this.columnsWidth[l._index]&&(u=this.columnsWidth[l._index].width),u==="0"&&(u=""),u}}};const Pse={name:"TableHead",mixins:[YS,Ki],components:{CheckboxGroup:oS,Checkbox:Ld,Poptip:FS,iButton:fs,renderHeader:Ese},props:{prefixCls:String,styleObject:Object,columns:Array,objData:Object,data:Array,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},columnRows:Array,fixedColumnRows:Array},data(){return{draggingColumn:null,dragging:!1,dragState:{}}},computed:{styles(){const l=Object.assign({},this.styleObject),u=parseInt(this.styleObject.width);return l.width=`${u}px`,l},isSelectAll(){let l=!0;this.data.length||(l=!1);let u=!0;for(let m in this.objData){const k=this.objData[m];if(!k._isChecked&&!k._isDisabled){l=!1;break}else k.children&&k.children.length&&(l=this.isChildrenSelected(k,l));k._isDisabled&&!k._isChecked?k.children&&k.children.length&&(u=this.isChildrenAllDisabledAndUnSelected(k,u)):u=!1}return u&&(l=!1),l},headRows(){return this.columnRows.length>1?this.fixed?this.fixedColumnRows:this.columnRows:[this.columns]},isSelectDisabled(){let l=!0;if(this.data.length)for(let u in this.objData){const m=this.objData[u];m._isDisabled?m.children&&m.children.length&&(l=this.isChildrenDisabled(m,l)):l=!1}return l}},methods:{cellClasses(l){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&l.fixed&&(l.fixed==="left"||l.fixed==="right"),[`${this.prefixCls}-cell-with-selection`]:l.type==="selection"}]},scrollBarCellClass(){let l=!1;for(let u in this.headRows)for(let m in this.headRows[u]){if(this.headRows[u][m].fixed==="right"){l=!0;break}if(l)break}return[{[`${this.prefixCls}-hidden`]:l}]},itemClasses(l,u){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:l._filterChecked[0]===u.value}]},itemAllClasses(l){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:!l._filterChecked.length}]},selectAll(){const l=!this.isSelectAll;this.$parent.selectAll(l)},handleSort(l,u){const m=this.columns.find(C=>C._index===l),k=m._index;m._sortType===u&&(u="normal"),this.$parent.handleSort(k,u)},handleSortByHead(l){const u=this.columns.find(m=>m._index===l);if(u.sortable){const m=u._sortType;m==="normal"?this.handleSort(l,"asc"):m==="asc"?this.handleSort(l,"desc"):this.handleSort(l,"normal")}},handleFilter(l){this.$parent.handleFilter(l)},handleSelect(l,u){this.$parent.handleFilterSelect(l,u)},handleReset(l){this.$parent.handleFilterReset(l)},handleFilterHide(l){this.$parent.handleFilterHide(l)},getColumn(l,u){if(this.columnRows.length>1){const m=this.headRows[l][u].__id;return this.columns.filter(k=>k.__id===m)[0]}else return this.headRows[l][u]},handleMouseDown(l,u){if(!this.$isServer&&s&&this.draggingColumn){this.dragging=!0;const m=this.$parent,k=m.$el.getBoundingClientRect().left,C=this.$el.querySelector(`th.ivu-table-column-${l.__id}`).getBoundingClientRect(),v=C.left-k+30;m.showResizeLine=!0,this.dragState={startMouseLeft:u.clientX,startLeft:C.right-k,startColumnLeft:C.left-k,tableLeft:k};const R=m.$refs.resizeLine;R.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const B=W=>{const j=W.clientX-this.dragState.startMouseLeft,ce=this.dragState.startLeft+j;R.style.left=Math.max(v,ce)+"px"},G=()=>{if(this.dragging){const{startColumnLeft:W,startLeft:j}=this.dragState,ce=parseInt(R.style.left,10)-W,Oe=m.allColumns.find(xe=>xe.__id===l.__id);Oe&&(Oe.width=ce,l.width=ce,m.handleResize()),m.$emit("on-column-width-resize",Oe.width,j-W,l,u),s&&(document.body.style.cursor=""),this.dragging=!1,this.draggingColumn=null,this.dragState={},m.showResizeLine=!1}!s||(document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",G),document.onselectstart=null,document.ondragstart=null)};if(!s)return;document.addEventListener("mousemove",B),document.addEventListener("mouseup",G)}},handleMouseMove(l,u){let m=u.target;for(;m&&m.tagName!=="TH";)m=m.parentNode;if(!(!l||!l.resizable)&&s&&!this.dragging){let k=m.getBoundingClientRect();const C=document.body.style;k.width>12&&k.right-u.pageX<8?(C.cursor="col-resize",this.draggingColumn=l):this.dragging||(C.cursor="",this.draggingColumn=null)}},handleMouseOut(){this.$isServer||s&&(document.body.style.cursor="")},isChildrenSelected(l,u){let m=u;return l.children&&l.children.length&&l.children.forEach(k=>{!k._isChecked&&!k._isDisabled?m=!1:k.children&&k.children.length&&(m=this.isChildrenSelected(k,m))}),m},isChildrenAllDisabledAndUnSelected(l,u){let m=u;return l.children&&l.children.length&&l.children.forEach(k=>{k._isDisabled&&!k._isChecked?k.children&&k.children.length&&(m=this.isChildrenAllDisabledAndUnSelected(k,m)):m=!1}),m},isChildrenDisabled(l,u){let m=u;return l.children&&l.children.length&&l.children.forEach(k=>{k._isDisabled?k.children&&k.children.length&&(m=this.isChildrenDisabled(k,m)):m=!1}),m}}},Ase=["width"],Rse=["width"],Ise=["colspan","rowspan"],Dse={key:0},Nse=["onClick"],$se=["onClick"],Vse=["onClick"],Lse=["onMousedown","onMousemove"],Bse=["rowspan"];function Use(l,u,m,k,C,v){const R=i.resolveComponent("render-header"),B=i.resolveComponent("Checkbox"),G=i.resolveComponent("checkbox"),W=i.resolveComponent("checkbox-group"),j=i.resolveComponent("i-button"),ce=i.resolveComponent("Poptip");return i.openBlock(),i.createElementBlock("table",{cellspacing:"0",cellpadding:"0",border:"0",style:i.normalizeStyle(v.styles)},[i.createElementVNode("colgroup",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.columns,(Oe,xe)=>(i.openBlock(),i.createElementBlock("col",{key:xe,width:l.setCellWidth(Oe)},null,8,Ase))),128)),l.$parent.showVerticalScrollBar?(i.openBlock(),i.createElementBlock("col",{key:0,width:l.$parent.scrollBarWidth},null,8,Rse)):i.createCommentVNode("",!0)]),i.createElementVNode("thead",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.headRows,(Oe,xe)=>(i.openBlock(),i.createElementBlock("tr",{key:xe},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(Oe,(ye,oe)=>(i.openBlock(),i.createElementBlock("th",{key:oe,colspan:ye.colSpan,rowspan:ye.rowSpan,class:i.normalizeClass(l.alignCls(ye))},[i.createElementVNode("div",{class:i.normalizeClass(v.cellClasses(ye))},[ye.type==="expand"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[ye.renderHeader?(i.openBlock(),i.createBlock(R,{key:1,render:ye.renderHeader,column:ye,index:oe},null,8,["render","column","index"])):(i.openBlock(),i.createElementBlock("span",Dse,i.toDisplayString(ye.title||""),1))],64)):ye.type==="selection"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[ye.hideSelectAll?i.createCommentVNode("",!0):(i.openBlock(),i.createBlock(B,{key:0,"model-value":v.isSelectAll,disabled:v.isSelectDisabled,onOnChange:v.selectAll},null,8,["model-value","disabled","onOnChange"]))],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:2},[ye.renderHeader?(i.openBlock(),i.createBlock(R,{key:1,render:ye.renderHeader,column:ye,index:oe},null,8,["render","column","index"])):(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass({[m.prefixCls+"-cell-sort"]:ye.sortable}),onClick:Re=>ye.sortable&&v.handleSortByHead(v.getColumn(xe,oe)._index)},i.toDisplayString(ye.title||"#"),11,Nse)),ye.sortable?(i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass([m.prefixCls+"-sort"])},[i.createElementVNode("i",{class:i.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropup",{on:v.getColumn(xe,oe)._sortType==="asc"}]),onClick:Re=>v.handleSort(v.getColumn(xe,oe)._index,"asc")},null,10,$se),i.createElementVNode("i",{class:i.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropdown",{on:v.getColumn(xe,oe)._sortType==="desc"}]),onClick:Re=>v.handleSort(v.getColumn(xe,oe)._index,"desc")},null,10,Vse)],2)):i.createCommentVNode("",!0),l.isPopperShow(ye)?(i.openBlock(),i.createBlock(ce,{key:3,modelValue:v.getColumn(xe,oe)._filterVisible,"onUpdate:modelValue":Re=>v.getColumn(xe,oe)._filterVisible=Re,placement:"bottom","popper-class":"ivu-table-popper",transfer:"",capture:!1,onOnPopperHide:Re=>v.handleFilterHide(v.getColumn(xe,oe)._index)},i.createSlots({default:i.withCtx(()=>[i.createElementVNode("span",{class:i.normalizeClass([m.prefixCls+"-filter"])},[i.createElementVNode("i",{class:i.normalizeClass(["ivu-icon ivu-icon-ios-funnel",{on:v.getColumn(xe,oe)._isFiltered}])},null,2)],2)]),_:2},[v.getColumn(xe,oe)._filterMultiple?{name:"content",fn:i.withCtx(()=>[i.createElementVNode("div",{class:i.normalizeClass([m.prefixCls+"-filter-list"])},[i.createElementVNode("div",{class:i.normalizeClass([m.prefixCls+"-filter-list-item"])},[i.createVNode(W,{modelValue:v.getColumn(xe,oe)._filterChecked,"onUpdate:modelValue":Re=>v.getColumn(xe,oe)._filterChecked=Re},{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(ye.filters,(Re,Lt)=>(i.openBlock(),i.createBlock(G,{key:Lt,label:Re.value},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(Re.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],2),i.createElementVNode("div",{class:i.normalizeClass([m.prefixCls+"-filter-footer"])},[i.createVNode(j,{type:"text",size:"small",disabled:!v.getColumn(xe,oe)._filterChecked.length,onClick:Re=>v.handleFilter(v.getColumn(xe,oe)._index)},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(l.t("i.table.confirmFilter")),1)]),_:2},1032,["disabled","onClick"]),i.createVNode(j,{type:"text",size:"small",onClick:Re=>v.handleReset(v.getColumn(xe,oe)._index)},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(l.t("i.table.resetFilter")),1)]),_:2},1032,["onClick"])],2)],2)]),key:"0"}:{name:"content",fn:i.withCtx(()=>[i.createElementVNode("div",{class:i.normalizeClass([m.prefixCls+"-filter-list"])},[i.createElementVNode("ul",{class:i.normalizeClass([m.prefixCls+"-filter-list-single"])},[i.createElementVNode("li",{class:i.normalizeClass(v.itemAllClasses(v.getColumn(xe,oe))),onClick:Re=>v.handleReset(v.getColumn(xe,oe)._index)},i.toDisplayString(l.t("i.table.clearFilter")),11,["onClick"]),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(ye.filters,Re=>(i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.itemClasses(v.getColumn(xe,oe),Re)),key:Re.value,onClick:Lt=>v.handleSelect(v.getColumn(xe,oe)._index,Re.value)},i.toDisplayString(Re.label),11,["onClick"]))),128))],2)],2)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","onOnPopperHide"])):i.createCommentVNode("",!0)],64))],2),ye.resizable?(i.openBlock(),i.createElementBlock("div",{key:0,class:"ivu-table-header-resizable",onMousedown:Re=>v.handleMouseDown(ye,Re),onMousemove:Re=>v.handleMouseMove(ye,Re),onMouseout:u[0]||(u[0]=(...Re)=>v.handleMouseOut&&v.handleMouseOut(...Re))},null,40,Lse)):i.createCommentVNode("",!0)],10,Ise))),128)),l.$parent.showVerticalScrollBar&&xe===0?(i.openBlock(),i.createElementBlock("th",{key:0,class:i.normalizeClass(v.scrollBarCellClass()),rowspan:v.headRows.length},null,10,Bse)):i.createCommentVNode("",!0)]))),128))])],4)}var Fse=c(Pse,[["render",Use]]);const zse={props:{row:Object,prefixCls:String,draggable:Boolean,isChildren:Boolean},computed:{objData(){return this.$parent.objData}},methods:{onDrag(l,u){l.dataTransfer.setData("index",u)},onDrop(l,u){const m=l.dataTransfer.getData("index");this.$parent.$parent.dragAndDrop(m,u),l.preventDefault()},allowDrop(l){l.preventDefault()},rowClasses(l){const u=this.isChildren?this.$parent.$parent.getDataByRowKey(this.row._rowKey):this.objData[l];return[`${this.prefixCls}-row`,this.rowClsName(l),{[`${this.prefixCls}-row-highlight`]:u&&u._isHighlight,[`${this.prefixCls}-row-hover`]:u&&u._isHover}]},rowClsName(l){return this.$parent.$parent.rowClassName(this.objData[l],l)}}},Xse=["draggable"];function Wse(l,u,m,k,C,v){return m.draggable?(i.openBlock(),i.createElementBlock("tr",{key:0,class:i.normalizeClass(v.rowClasses(m.row._index)),draggable:m.draggable,onDragstart:u[0]||(u[0]=R=>v.onDrag(R,m.row._index)),onDrop:u[1]||(u[1]=R=>v.onDrop(R,m.row._index)),onDragover:u[2]||(u[2]=R=>v.allowDrop(R))},[i.renderSlot(l.$slots,"default")],42,Xse)):(i.openBlock(),i.createElementBlock("tr",{key:1,class:i.normalizeClass(v.rowClasses(m.row._index)),draggable:!1},[i.renderSlot(l.$slots,"default")],2))}var jS=c(zse,[["render",Wse]]),qS={name:"TableExpand",props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render(){const l={row:this.row,index:this.index};return this.column&&(l.column=this.column),this.render(i.h,l)}},Qse={name:"TableSlot",inject:["TableInstance"],props:{row:Object,index:Number,column:{type:Object,default:null},display:{type:String,default:"block"}},render(){return i.h("div",{class:{"ivu-table-cell-slot":!0,"ivu-table-cell-slot-inline":this.display==="inline","ivu-table-cell-slot-inline-block":this.display==="inline-block"}},this.TableInstance.$slots[this.column.slot]({row:this.row,column:this.column,index:this.index}))}};const Hse={name:"TableCell",components:{Icon:S,Checkbox:Ld,TableExpand:qS,TableSlot:Qse,Tooltip:Ol},inject:["TableInstance"],props:{prefixCls:String,row:Object,column:Object,naturalIndex:Number,index:Number,checked:Boolean,disabled:Boolean,expanded:Boolean,fixed:{type:[Boolean,String],default:!1},treeNode:Boolean,treeLevel:{type:Number,default:0}},data(){return{renderType:"",uid:-1,context:this.$parent.$parent.$parent.currentContext,showTooltip:!1}},computed:{classes(){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&this.column.fixed&&(this.column.fixed==="left"||this.column.fixed==="right"),[`${this.prefixCls}-cell-ellipsis`]:this.column.ellipsis||!1,[`${this.prefixCls}-cell-with-expand`]:this.renderType==="expand",[`${this.prefixCls}-cell-with-selection`]:this.renderType==="selection"}]},expandCls(){return[`${this.prefixCls}-cell-expand`,{[`${this.prefixCls}-cell-expand-expanded`]:this.expanded}]},showChildren(){let l=!1;if(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot"){const u=this.row;(u.children&&u.children.length||"_loading"in u)&&this.column.tree&&(l=!0)}return l},showTreeNode(){let l=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(l=!0),l},showLevel(){let l=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(l=!0),l},treeLevelStyle(){return{"padding-left":this.treeLevel*this.TableInstance.indentSize+"px"}},childrenExpand(){return this.TableInstance.getDataByRowKey(this.row._rowKey)._isShowChildren},childrenLoading(){const l=this.TableInstance.getDataByRowKey(this.row._rowKey);return"_loading"in l&&l._loading}},methods:{toggleSelect(){this.treeNode?this.$parent.$parent.$parent.toggleSelect(this.index,this.row._rowKey):this.$parent.$parent.$parent.toggleSelect(this.index)},toggleExpand(){this.$parent.$parent.$parent.toggleExpand(this.index)},handleClick(){},handleTooltipIn(){if(!s)return;const l=this.$refs.content;let u=document.createRange();u.setStart(l,0),u.setEnd(l,l.childNodes.length);const m=u.getBoundingClientRect().width;this.showTooltip=m>l.offsetWidth,u=null},handleToggleTree(){this.$parent.$parent.$parent.toggleTree(this.row._rowKey)}},created(){this.column.type==="index"?this.renderType="index":this.column.type==="selection"?this.renderType="selection":this.column.type==="html"?this.renderType="html":this.column.type==="expand"?this.renderType="expand":this.column.render?this.renderType="render":this.column.slot?this.renderType="slot":this.renderType="normal"}},Gse={key:0},Yse={key:4,class:"ivu-table-cell-tree ivu-table-cell-tree-empty"},jse=["innerHTML"],qse={key:1};function Zse(l,u,m,k,C,v){const R=i.resolveComponent("Checkbox"),B=i.resolveComponent("Icon"),G=i.resolveComponent("Tooltip"),W=i.resolveComponent("table-expand"),j=i.resolveComponent("table-slot");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),ref:"cell"},[C.renderType==="index"?(i.openBlock(),i.createElementBlock("span",Gse,i.toDisplayString(m.column.indexMethod?m.column.indexMethod(m.row,m.naturalIndex):m.naturalIndex+1),1)):i.createCommentVNode("",!0),C.renderType==="selection"?(i.openBlock(),i.createBlock(R,{key:1,"model-value":m.checked,onClick:i.withModifiers(v.handleClick,["stop"]),onOnChange:v.toggleSelect,disabled:m.disabled},null,8,["model-value","onClick","onOnChange","disabled"])):i.createCommentVNode("",!0),v.showLevel?(i.openBlock(),i.createElementBlock("div",{key:2,class:"ivu-table-cell-tree-level",style:i.normalizeStyle(v.treeLevelStyle)},null,4)):i.createCommentVNode("",!0),v.showChildren?(i.openBlock(),i.createElementBlock("div",{key:3,class:i.normalizeClass(["ivu-table-cell-tree",{"ivu-table-cell-tree-loading":v.childrenLoading}]),onClick:u[0]||(u[0]=i.withModifiers((...ce)=>v.handleToggleTree&&v.handleToggleTree(...ce),["prevent","stop"]))},[v.childrenLoading?(i.openBlock(),i.createBlock(B,{key:0,type:"ios-loading",class:"ivu-load-loop"})):v.childrenExpand?(i.openBlock(),i.createBlock(B,{key:2,type:"ios-remove"})):(i.openBlock(),i.createBlock(B,{key:1,type:"ios-add"}))],2)):v.showTreeNode?(i.openBlock(),i.createElementBlock("div",Yse)):i.createCommentVNode("",!0),C.renderType==="html"?(i.openBlock(),i.createElementBlock("span",{key:5,innerHTML:m.row[m.column.key]},null,8,jse)):i.createCommentVNode("",!0),C.renderType==="normal"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:6},[m.column.tooltip?(i.openBlock(),i.createBlock(G,{key:0,transfer:"",content:m.row[m.column.key],theme:m.column.tooltipTheme?m.column.tooltipTheme:v.TableInstance.tooltipTheme,disabled:!C.showTooltip,"max-width":m.column.tooltipMaxWidth?m.column.tooltipMaxWidth:v.TableInstance.tooltipMaxWidth,class:"ivu-table-cell-tooltip"},{default:i.withCtx(()=>[i.createElementVNode("span",{ref:"content",onMouseenter:u[1]||(u[1]=(...ce)=>v.handleTooltipIn&&v.handleTooltipIn(...ce)),class:"ivu-table-cell-tooltip-content"},i.toDisplayString(m.row[m.column.key]),545)]),_:1},8,["content","theme","disabled","max-width"])):(i.openBlock(),i.createElementBlock("span",qse,i.toDisplayString(m.row[m.column.key]),1))],64)):i.createCommentVNode("",!0),C.renderType==="expand"&&!m.row._disableExpand?(i.openBlock(),i.createElementBlock("div",{key:7,class:i.normalizeClass(v.expandCls),onClick:u[2]||(u[2]=(...ce)=>v.toggleExpand&&v.toggleExpand(...ce))},[i.createVNode(B,{type:"ios-arrow-forward"})],2)):i.createCommentVNode("",!0),C.renderType==="render"?(i.openBlock(),i.createBlock(W,{key:8,row:m.row,column:m.column,index:m.index,render:m.column.render},null,8,["row","column","index","render"])):i.createCommentVNode("",!0),C.renderType==="slot"?(i.openBlock(),i.createBlock(j,{key:9,row:m.row,column:m.column,display:m.column.display||"block",index:m.index},null,8,["row","column","display","index"])):i.createCommentVNode("",!0)],2)}var ZS=c(Hse,[["render",Zse]]);const Kse={name:"TableBody",mixins:[YS],components:{TableCell:ZS,Expand:qS,TableTr:jS},props:{prefixCls:String,styleObject:Object,columns:Array,data:Array,objData:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1},rowKey:{type:[Boolean,String],default:!1}},computed:{expandRender(){let l=function(){return""};for(let u=0;u<this.columns.length;u++){const m=this.columns[u];m.type&&m.type==="expand"&&m.render&&(l=m.render)}return l}},methods:{rowChecked(l){return this.objData[l]&&this.objData[l]._isChecked},rowDisabled(l){return this.objData[l]&&this.objData[l]._isDisabled},rowExpanded(l){return this.objData[l]&&this.objData[l]._isExpanded},rowStatusByRowKey(l,u){return this.$parent.getDataByRowKey(u)[l]},handleMouseIn(l,u,m){u.stopPropagation(),this.$parent.handleMouseIn(l,m)},handleMouseOut(l,u,m){u.stopPropagation(),this.$parent.handleMouseOut(l,m)},clickCurrentRow(l,u,m){this.$parent.clickCurrentRow(l,m)},dblclickCurrentRow(l,u,m){u.stopPropagation(),this.$parent.dblclickCurrentRow(l,m)},clickCell(l,u,m,k){this.$parent.$emit("on-cell-click",l,u,l[m],k)},contextmenuCurrentRow(l,u,m){u.stopPropagation(),this.$parent.contextMenu&&u.preventDefault(),this.$parent.contextmenuCurrentRow(l,m,u)},selectStartCurrentRow(){this.$parent.contextMenu},getSpan(l,u,m,k){const C=this.$parent.spanMethod;if(typeof C=="function"){const v=C({row:l,column:u,rowIndex:m,columnIndex:k});let R=1,B=1;return Array.isArray(v)?(R=v[0],B=v[1]):typeof v=="object"&&(R=v.rowspan,B=v.colspan),{rowspan:R,colspan:B}}else return{}},showWithSpan(l,u,m,k){const C=this.getSpan(l,u,m,k);return!("rowspan"in C&&C.rowspan===0||"colspan"in C&&C.colspan===0)},isTrShow(l){let u=!0,m;for(let k in this.objData){const C=this.objData[k],v=C._isShowChildren;if(C._rowKey===l){u=u&&v;break}else if(C.children&&C.children.length&&(m=this.getTrStatus(l,C,u&&v),m[0]&&m[0]._rowKey===l))return m[1]}return u},getTrStatus(l,u,m){let k=m,C;if(u.children&&u.children.length)for(let v=0;v<u.children.length;v++){const R=u.children[v],B=R._isShowChildren;if(R._rowKey===l){C=R,k=k&&B;break}else if(R.children&&R.children.length){const G=this.getTrStatus(l,R,k&&B);if(G[0]&&G[0]._rowKey===l)return G}}return[C,k]},getLevel(l){let u,m;for(let k=0;k<this.data.length;k++){const C=this.data[k];if(C[this.rowKey]===l){u=0;break}else if(C.children&&C.children.length&&(m=this.getChildLevel(C,l,1),m[0]&&m[0][this.rowKey]===l))return m[1]}return u},getChildLevel(l,u,m){let k,C;if(l.children&&l.children.length)for(let v=0;v<l.children.length;v++){const R=l.children[v];if(R[this.rowKey]===u){C=R,k=m;break}else if(R.children&&R.children.length){const B=this.getChildLevel(R,u,m+1);if(B[0]&&B[0][this.rowKey]===u)return B}}return[C,k]},getChildNode(l,u,m){return u.children&&u.children.length&&u.children.forEach((k,C)=>{let v=[];this.columns.forEach((G,W)=>{if(this.showWithSpan(k,G,C,W)){const j=l(ZS,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:k,column:G,"natural-index":C,index:k._index,checked:this.rowStatusByRowKey("_isChecked",k._rowKey),disabled:this.rowStatusByRowKey("_isDisabled",k._rowKey),expanded:this.rowStatusByRowKey("_isExpanded",k._rowKey),treeNode:!0,treeLevel:this.getLevel(k._rowKey),key:G._columnKey}),ce=l("td",{class:this.alignCls(G,k),...this.getSpan(k,G,C,W),onClick:Oe=>this.clickCell(k,G,G.key,Oe)},[j]);v.push(ce)}});const R={};this.isTrShow(u._rowKey)||(R.display="none");const B=l(jS,{draggable:!1,row:k,"prefix-cls":this.prefixCls,isChildren:!0,style:R,key:this.rowKey?k._rowKey:C,onMouseenter:G=>this.handleMouseIn(k._index,G,k._rowKey),onMouseleave:G=>this.handleMouseOut(k._index,G,k._rowKey),onClick:G=>this.clickCurrentRow(k._index,G,k._rowKey),onDblclick:G=>this.dblclickCurrentRow(k._index,G,k._rowKey),onContextmenu:G=>this.contextmenuCurrentRow(k._index,G,k._rowKey),onSelectstart:G=>this.selectStartCurrentRow(k._index,G,k._rowKey)},()=>v);m.push(B),k.children&&k.children.length&&this.getChildNode(l,k,m)}),m}},render(){let l=[];this.columns.forEach(C=>{const v=i.h("col",{width:this.setCellWidth(C)});l.push(v)});const u=i.h("colgroup",{},l);let m=[];this.data.forEach((C,v)=>{let R=[];this.columns.forEach((G,W)=>{if(this.showWithSpan(C,G,v,W)){const j=i.h(ZS,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:C,column:G,"natural-index":v,index:C._index,checked:this.rowChecked(C._index),disabled:this.rowDisabled(C._index),expanded:this.rowExpanded(C._index),key:G._columnKey}),ce=i.h("td",{class:this.alignCls(G,C),...this.getSpan(C,G,v,W),onClick:Oe=>this.clickCell(C,G,G.key,Oe)},[j]);R.push(ce)}});const B=i.h(jS,{draggable:this.draggable,row:C,"prefix-cls":this.prefixCls,key:this.rowKey?C._rowKey:v,onMouseenter:G=>this.handleMouseIn(C._index,G),onMouseleave:G=>this.handleMouseOut(C._index,G),onClick:G=>this.clickCurrentRow(C._index,G),onDblclick:G=>this.dblclickCurrentRow(C._index,G),onContextmenu:G=>this.contextmenuCurrentRow(C._index,G),onSelectstart:G=>this.selectStartCurrentRow(C._index,G)},()=>R);if(m.push(B),this.rowExpanded(C._index)){const G=i.h(qS,{row:C,render:this.expandRender,index:C._index,key:this.rowKey?C._rowKey:v}),W=i.h("td",{colspan:this.columns.length,class:this.prefixCls+"-expanded-cell"},[G]),j=i.h("tr",{class:{[this.prefixCls+"-expanded-hidden"]:this.fixed}},[W]);m.push(j)}C.children&&C.children.length&&this.getChildNode(i.h,C,[]).forEach(G=>{m.push(G)})});const k=i.h("tbody",{class:this.prefixCls+"-tbody"},[m]);return i.h("table",{cellspacing:"0",cellpadding:"0",border:"0",style:this.styleObject},[u,k])}},Jse={name:"TableSummary",mixins:[YS],props:{prefixCls:String,styleObject:Object,columns:Array,data:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1}},methods:{cellCls(l){return[{"ivu-table-hidden":this.fixed==="left"&&l.fixed!=="left"||this.fixed==="right"&&l.fixed!=="right"||!this.fixed&&l.fixed&&(l.fixed==="left"||l.fixed==="right")}]}}},eoe={style:{overflow:"hidden"}},toe=["width"],ioe={class:"ivu-table-row"};function noe(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("div",eoe,[i.createElementVNode("table",{class:"ivu-table-summary",cellspacing:"0",cellpadding:"0",border:"0",style:i.normalizeStyle(m.styleObject)},[i.createElementVNode("colgroup",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.columns,(R,B)=>(i.openBlock(),i.createElementBlock("col",{key:B,width:l.setCellWidth(R)},null,8,toe))),128))]),i.createElementVNode("tbody",{class:i.normalizeClass([m.prefixCls+"-tbody"])},[i.createElementVNode("tr",ioe,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.columns,(R,B)=>(i.openBlock(),i.createElementBlock("td",{key:B,class:i.normalizeClass(l.alignCls(R))},[i.createElementVNode("div",{class:i.normalizeClass(["ivu-table-cell",v.cellCls(R)])},[i.createElementVNode("span",null,i.toDisplayString(m.data[R.key].value),1)],2)],2))),128))])],2)],4)])}var roe=c(Jse,[["render",noe]]);const soe=`\r
`,KS=(l,u,{separator:m,quoted:k})=>{const C=u.map(v=>k?(v=typeof v=="string"?v.replace(/"/g,'"'):v,`"${v}"`):v);l.push(C.join(m))},ooe={separator:",",quoted:!1};function aoe(l,u,m,k=!1){m=Object.assign({},ooe,m);let C;const v=[],R=[];return l?(C=l.map(B=>typeof B=="string"?B:(k||R.push(typeof B.title<"u"?B.title:B.key),B.key)),R.length>0&&KS(v,R,m)):(C=[],u.forEach(B=>{Array.isArray(B)||(C=C.concat(Object.keys(B)))}),C.length>0&&(C=C.filter((B,G,W)=>W.indexOf(B)===G),k||KS(v,C,m))),Array.isArray(u)&&u.forEach(B=>{Array.isArray(B)||(B=C.map(G=>typeof B[G]<"u"?B[G]:"")),KS(v,B,m)}),v.join(soe)}function JS(l){const u=navigator.userAgent;return u.indexOf("compatible")>-1&&u.indexOf("MSIE")>-1?(new RegExp("MSIE (\\d+\\.\\d+);").test(u),parseFloat(RegExp.$1)):!1}const loe={_isIE11(){let l=0;const u=/MSIE (\d+\.\d+);/.test(navigator.userAgent),m=!!navigator.userAgent.match(/Trident\/7.0/),k=navigator.userAgent.indexOf("rv:11.0");return u&&(l=Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!==-1&&(l=10),m&&k!==-1&&(l=11),l===11},_isEdge(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl(l){const u="\uFEFF";if(s&&window.Blob&&window.URL&&window.URL.createObjectURL){const m=new Blob([u+l],{type:"text/csv"});return URL.createObjectURL(m)}else return"data:attachment/csv;charset=utf-8,"+u+encodeURIComponent(l)},download(l,u){if(s)if(JS()&&JS()<10){const m=window.top.open("about:blank","_blank");m.document.charset="utf-8",m.document.write(u),m.document.close(),m.document.execCommand("SaveAs",l),m.close()}else if(JS()===10||this._isIE11()||this._isEdge()){const m="\uFEFF",k=new Blob([m+u],{type:"text/csv"});navigator.msSaveBlob(k,l)}else{const m=document.createElement("a");m.download=l,m.href=this._getDownloadUrl(u),document.body.appendChild(m),m.click(),document.body.removeChild(m)}}},b1=(l,u)=>{let m=[],k=[];return l.forEach(C=>{C.fixed&&C.fixed===u?m.push(C):k.push(C)}),m.concat(k)},Qm=(l,u=!1)=>{const m=L(l),k=[];return m.forEach(C=>{C.children?(u&&k.push(C),k.push.apply(k,Qm(C.children,u))):k.push(C)}),k},coe=(l,u=!1)=>{const m=L(u?u==="left"?b1(l,"left"):b1(l,"right"):l);let k=1;const C=(R,B)=>{if(B&&(R.level=B.level+1,k<R.level&&(k=R.level)),R.children){let G=0;R.children.forEach(W=>{C(W,R),G+=W.colSpan}),R.colSpan=G}else R.colSpan=1};m.forEach(R=>{R.level=1,C(R)});const v=[];for(let R=0;R<k;R++)v.push([]);return Qm(m,!0).forEach(R=>{R.children?R.rowSpan=1:R.rowSpan=k-R.level+1,v[R.level-1].push(R)}),v},hoe=function(l=32){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",m=u.length;let k="";for(let C=0;C<l;C++)k+=u.charAt(Math.floor(Math.random()*m));return k},Mr="ivu-table";let HR=1,uoe=1;const doe={name:"Table",mixins:[Ki],components:{tableHead:Fse,tableBody:Kse,tableSummary:roe,Spin:lo,Dropdown:nu,DropdownMenu:ru},emits:["on-current-change","on-row-click","on-row-dblclick","on-contextmenu","on-select","on-select-cancel","on-selection-change","on-expand","on-expand-tree","on-select-all","on-select-all-cancel","on-sort-change","on-filter-change","on-drag-drop","on-cell-click","on-column-width-resize"],provide(){return{TableInstance:this}},inject:{TabsInstance:{default:null},ModalInstance:{default:null},DrawerInstance:{default:null}},props:{data:{type:Array,default(){return[]}},columns:{type:Array,default(){return[]}},size:{validator(l){return _(l,["small","large","default"])},default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.size===""?"default":l.$VIEWUI.size}},width:{type:[Number,String]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tooltipTheme:{validator(l){return _(l,["dark","light"])},default:"dark"},tooltipMaxWidth:{type:Number,default:300},rowKey:{type:[Boolean,String],default:!1},spanMethod:{type:Function},showSummary:{type:Boolean,default:!1},summaryMethod:{type:Function},sumText:{type:String},indentSize:{type:Number,default:16},loadData:{type:Function},updateShowChildren:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},showContextMenu:{type:Boolean,default:!1},fixedShadow:{validator(l){return _(l,["auto","show","hide"])},default:"show"},autoCloseContextmenu:{type:Boolean,default:!0}},data(){const l=this.makeColumnsId(this.columns);return{ready:!1,tableWidth:0,columnsWidth:{},prefixCls:Mr,compiledUids:[],objData:this.makeObjData(),rebuildData:[],cloneColumns:this.makeColumns(l),columnRows:this.makeColumnRows(!1,l),leftFixedColumnRows:this.makeColumnRows("left",l),rightFixedColumnRows:this.makeColumnRows("right",l),allColumns:Qm(l),showSlotHeader:!0,showSlotFooter:!0,bodyHeight:0,scrollBarWidth:T(),currentContext:this.context,cloneData:L(this.data),showVerticalScrollBar:!1,showHorizontalScrollBar:!1,headerWidth:0,headerHeight:0,showResizeLine:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},scrollOnTheLeft:!1,scrollOnTheRight:!1,id:te(6)}},computed:{localeNoDataText(){return this.noDataText===void 0?this.t("i.table.noDataText"):this.noDataText},localeNoFilteredDataText(){return this.noFilteredDataText===void 0?this.t("i.table.noFilteredDataText"):this.noFilteredDataText},localeSumText(){return this.sumText===void 0?this.t("i.table.sumText"):this.sumText},wrapClasses(){return[`${Mr}-wrapper`,{[`${Mr}-hide`]:!this.ready,[`${Mr}-with-header`]:this.showSlotHeader,[`${Mr}-with-footer`]:this.showSlotFooter,[`${Mr}-with-summary`]:this.showSummary,[`${Mr}-wrapper-with-border`]:this.border}]},classes(){return[`${Mr}`,{[`${Mr}-${this.size}`]:!!this.size,[`${Mr}-border`]:this.border,[`${Mr}-stripe`]:this.stripe,[`${Mr}-with-fixed-top`]:!!this.height}]},fixedTableClasses(){return[`${Mr}-fixed`,{[`${Mr}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheLeft}]},fixedRightTableClasses(){return[`${Mr}-fixed-right`,{[`${Mr}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheRight}]},fixedHeaderClasses(){return[`${Mr}-fixed-header`,{[`${Mr}-fixed-header-with-empty`]:!this.rebuildData.length}]},styles(){let l={},u=0;if(this.showSummary&&(this.size==="small"?u=40:this.size==="large"?u=60:u=48),this.height){let m=parseInt(this.height)+u;l.height=`${m}px`}if(this.maxHeight){const m=parseInt(this.maxHeight)+u;l.maxHeight=`${m}px`}return this.width&&(l.width=`${this.width}px`),l},tableStyle(){let l={};if(this.tableWidth!==0){let u="";this.bodyHeight===0?u=this.tableWidth:u=this.tableWidth-(this.showVerticalScrollBar?this.scrollBarWidth:0),l.width=`${u}px`}return l},tableHeaderStyle(){let l={};if(this.tableWidth!==0){let u="";u=this.tableWidth,l.width=`${u}px`}return l},fixedTableStyle(){let l={},u=0;return this.leftFixedColumns.forEach(m=>{m.fixed&&m.fixed==="left"&&(u+=m._width)}),l.width=`${u}px`,l},fixedRightTableStyle(){let l={},u=0;return this.rightFixedColumns.forEach(m=>{m.fixed&&m.fixed==="right"&&(u+=m._width)}),l.width=`${u}px`,l.right=`${this.showVerticalScrollBar?this.scrollBarWidth:0}px`,l},fixedRightHeaderStyle(){let l={},u=0,m=this.headerHeight+1;return this.showVerticalScrollBar&&(u=this.scrollBarWidth),l.width=`${u}px`,l.height=`${m}px`,l},bodyStyle(){let l={};if(this.bodyHeight!==0){const u=this.bodyHeight;this.height?l.height=`${u}px`:this.maxHeight&&(l.maxHeight=`${u}px`)}return l},fixedBodyStyle(){let l={};if(this.bodyHeight!==0){let u=this.bodyHeight-(this.showHorizontalScrollBar?this.scrollBarWidth:0);const m=this.showHorizontalScrollBar?`${u}px`:`${u-1}px`;this.height?l.height=m:this.maxHeight&&(l.maxHeight=m)}return l},leftFixedColumns(){return b1(this.cloneColumns,"left")},rightFixedColumns(){return b1(this.cloneColumns,"right")},isLeftFixed(){return this.columns.some(l=>l.fixed&&l.fixed==="left")},isRightFixed(){return this.columns.some(l=>l.fixed&&l.fixed==="right")},summaryData(){if(!this.showSummary)return{};let l={};return this.summaryMethod?l=this.summaryMethod({columns:this.cloneColumns,data:this.rebuildData}):this.cloneColumns.forEach((u,m)=>{const k=u.key;if(m===0){l[k]={key:u.key,value:this.localeSumText};return}const C=this.rebuildData.map(G=>Number(G[u.key])),v=[];let R=!0;C.forEach(G=>{if(!isNaN(G)){R=!1;let W=(""+G).split(".")[1];v.push(W?W.length:0)}});const B=Math.max.apply(null,v);if(R)l[k]={key:u.key,value:""};else{const G=C.reduce((W,j)=>{const ce=Number(j);return isNaN(ce)?W:parseFloat((W+j).toFixed(Math.min(B,20)))},0);l[k]={key:u.key,value:G}}}),l}},methods:{rowClsName(l){return this.rowClassName(this.data[l],l)},handleResize(){let l=this.$el.offsetWidth-1,u={},m=0,k=[],C=[],v=[];this.cloneColumns.forEach(j=>{j.width?k.push(j):(C.push(j),j.minWidth&&(m+=j.minWidth),j.maxWidth||v.push(j)),j._width=null});let R=k.map(j=>j.width).reduce((j,ce)=>j+ce,0),B=l-R-m-(this.showVerticalScrollBar?this.scrollBarWidth:0)-1,G=C.length,W=0;B>0&&G>0&&(W=parseInt(B/G));for(let j=0;j<this.cloneColumns.length;j++){const ce=this.cloneColumns[j];let Oe=W+(ce.minWidth?ce.minWidth:0);ce.width?Oe=ce.width:ce._width?Oe=ce._width:(ce.minWidth>Oe?Oe=ce.minWidth:ce.maxWidth<Oe&&(Oe=ce.maxWidth),B>0?(B-=Oe-(ce.minWidth?ce.minWidth:0),G--,G>0?W=parseInt(B/G):W=0):W=0),ce._width=Oe,u[ce._index]={width:Oe}}if(B>0){G=v.length,W=parseInt(B/G);for(let j=0;j<v.length;j++){const ce=v[j];let Oe=ce._width+W;G>1?(G--,B-=W,W=parseInt(B/G)):W=0,ce._width=Oe,u[ce._index]={width:Oe}}}this.tableWidth=this.cloneColumns.map(j=>j._width).reduce((j,ce)=>j+ce,0)+(this.showVerticalScrollBar?this.scrollBarWidth:0)+1,this.columnsWidth=u,this.fixedHeader(),this.fixedShadow==="auto"&&i.nextTick(()=>{const j=this.$refs.body;this.scrollOnTheLeft=j.scrollLeft===0,this.scrollOnTheRight=j.scrollWidth===j.scrollLeft+j.clientWidth})},handleMouseIn(l,u){if(this.disabledHover)return;const m=u?this.getDataByRowKey(u):this.objData[l];m._isHover||(m._isHover=!0)},handleMouseOut(l,u){if(this.disabledHover)return;const m=u?this.getDataByRowKey(u):this.objData[l];m._isHover=!1},handleCurrentRow(l,u,m){const k=m?this.getDataByRowKey(m):this.objData[u];let C=null,v=-1;for(let B in this.objData)if(this.objData[B]._isHighlight){v=parseInt(B),this.objData[B]._isHighlight=!1;break}else if(this.objData[B].children&&this.objData[B].children.length){const G=this.handleResetChildrenRow(this.objData[B]);G&&(C=JSON.parse(JSON.stringify(G)))}l==="highlight"&&(k._isHighlight=!0),v>=0&&(C=JSON.parse(JSON.stringify(this.cloneData[v])));const R=l==="highlight"?JSON.parse(JSON.stringify(m?this.getBaseDataByRowKey(m):this.cloneData[u])):null;this.$emit("on-current-change",R,C)},handleResetChildrenRow(l){let u=null;if(l.children&&l.children.length)for(let m=0;m<l.children.length;m++){const k=l.children[m];if(k._isHighlight){k._isHighlight=!1,u=k;break}else k.children&&k.children.length&&(u=this.handleResetChildrenRow(k))}return u},highlightCurrentRow(l,u){const m=u?this.getDataByRowKey(u):this.objData[l];!this.highlightRow||m._isHighlight||this.handleCurrentRow("highlight",l,u)},clearCurrentRow(){!this.highlightRow||this.handleCurrentRow("clear")},clickCurrentRow(l,u){this.highlightCurrentRow(l,u),u?this.$emit("on-row-click",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(u)))):this.$emit("on-row-click",JSON.parse(JSON.stringify(this.cloneData[l])),l)},dblclickCurrentRow(l,u){this.highlightCurrentRow(l,u),u?this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(u)))):this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.cloneData[l])),l)},contextmenuCurrentRow(l,u,m){this.contextMenuVisible&&this.handleClickContextMenuOutside(),i.nextTick(()=>{const k=this.$refs.tableWrap.getBoundingClientRect(),C={left:`${m.clientX-k.left}px`,top:`${m.clientY-k.top}px`};this.contextMenuStyles=C,this.contextMenuVisible=!0,u?this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(u))),m,C):this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.cloneData[l])),m,C)})},getSelection(){let l=[],u=[];for(let k in this.objData){const C=this.objData[k];C._isChecked&&l.push(parseInt(k)),C.children&&C.children.length&&(u=u.concat(this.getSelectionChildrenRowKeys(C,u)))}u=[...new Set(u)];let m=[];return this.data.forEach((k,C)=>{l.indexOf(C)>-1&&(m=m.concat(k)),k.children&&k.children.length&&u.length&&(m=m.concat(this.getSelectionChildren(k,m,u)))}),m=[...new Set(m)],JSON.parse(JSON.stringify(m))},getSelectionChildrenRowKeys(l,u){return l.children&&l.children.length&&l.children.forEach(m=>{m._isChecked&&u.push(m._rowKey),m.children&&m.children.length&&(u=u.concat(this.getSelectionChildrenRowKeys(m,u)))}),u},getSelectionChildren(l,u,m){return l.children&&l.children.length&&l.children.forEach(k=>{m.indexOf(k[this.rowKey])>-1&&(u=u.concat(k)),k.children&&k.children.length&&(u=u.concat(this.getSelectionChildren(k,u,m)))}),u},toggleSelect(l,u){let m={};if(u)m=this.getDataByRowKey(u);else for(let R in this.objData)if(parseInt(R)===l){m=this.objData[R];break}const k=!m._isChecked;m._isChecked=k;const C=this.getSelection(),v=u?this.getBaseDataByRowKey(u,this.data):this.data[l];this.$emit(k?"on-select":"on-select-cancel",C,JSON.parse(JSON.stringify(v))),this.$emit("on-selection-change",C)},toggleExpand(l){let u={};for(let k in this.objData)if(parseInt(k)===l){u=this.objData[k];break}const m=!u._isExpanded;this.objData[l]._isExpanded=m,this.$emit("on-expand",JSON.parse(JSON.stringify(this.cloneData[l])),m),(this.height||this.maxHeight)&&i.nextTick(()=>this.fixedBody())},toggleTree(l){const u=this.getDataByRowKey(l);if(!("_loading"in u&&u._loading)){if("_loading"in u&&!u._loading&&u.children.length===0){const m=this.getBaseDataByRowKey(l,this.data);m._loading=!0,this.loadData(m,k=>{m._loading=!1,k.length&&(m.children=k,i.nextTick(()=>{const C=this.getDataByRowKey(l);C._isShowChildren=!C._isShowChildren,this.updateDataStatus(l,"_showChildren",C._isShowChildren)}))});return}u._isShowChildren=!u._isShowChildren,this.updateShowChildren&&this.updateDataStatus(l,"_showChildren",u._isShowChildren),this.$emit("on-expand-tree",l,u._isShowChildren)}},updateDataStatus(l,u,m){const k=this.getBaseDataByRowKey(l,this.data);k[u]=m},getDataByRowKey(l,u=this.objData){let m=null;for(let k in u){const C=u[k];if(C._rowKey===l){m=C;break}else if(C.children&&C.children.length&&(m=this.getChildrenByRowKey(l,C),m))break}return m},getChildrenByRowKey(l,u){let m=null;if(u.children&&u.children.length)for(let k=0;k<u.children.length;k++){const C=u.children[k];if(C._rowKey===l){m=C;break}else if(C.children&&C.children.length&&(m=this.getChildrenByRowKey(l,C),m))break}return m},getBaseDataByRowKey(l,u=this.cloneData){let m=null;for(let k=0;k<u.length;k++){const C=u[k];if(C[this.rowKey]===l){m=C;break}else if(C.children&&C.children.length&&(m=this.getChildrenDataByRowKey(l,C),m&&m[this.rowKey]===l))return m}return m},getChildrenDataByRowKey(l,u){let m=null;if(u.children&&u.children.length)for(let k=0;k<u.children.length;k++){const C=u.children[k];if(C[this.rowKey]===l){m=C;break}else if(C.children&&C.children.length&&(m=this.getChildrenDataByRowKey(l,C),m))break}return m},selectAll(l){for(const m of this.rebuildData){const k=this.objData[m._index];k._isDisabled||(k._isChecked=l),m.children&&m.children.length&&this.selectAllChildren(k,l)}const u=this.getSelection();l?this.$emit("on-select-all",u):this.$emit("on-select-all-cancel",u),this.$emit("on-selection-change",u)},selectAllChildren(l,u){l.children&&l.children.length&&l.children.map(m=>{m._isDisabled||(m._isChecked=u),m.children&&m.children.length&&this.selectAllChildren(m,u)})},fixedHeader(){this.height||this.maxHeight?i.nextTick(()=>{const l=parseInt(D(this.$refs.title,"height"))||0,u=parseInt(D(this.$refs.header,"height"))||0,m=parseInt(D(this.$refs.footer,"height"))||0;this.height?this.bodyHeight=this.height-l-u-m:this.maxHeight&&(this.bodyHeight=this.maxHeight-l-u-m),i.nextTick(()=>this.fixedBody())}):(this.bodyHeight=0,i.nextTick(()=>this.fixedBody()))},fixedBody(){if(this.$refs.header&&(this.headerWidth=this.$refs.header.children[0].offsetWidth,this.headerHeight=this.$refs.header.children[0].offsetHeight),!this.$refs.tbody||!this.data||this.data.length===0)this.showVerticalScrollBar=!1;else{let l=this.$refs.tbody.$el,u=l.parentElement,m=l.offsetHeight,k=u.offsetHeight;this.showHorizontalScrollBar=u.offsetWidth<l.offsetWidth+(this.showVerticalScrollBar?this.scrollBarWidth:0),this.showVerticalScrollBar=this.bodyHeight?k-(this.showHorizontalScrollBar?this.scrollBarWidth:0)<m:!1,this.showVerticalScrollBar?u.classList.add(this.prefixCls+"-overflowY"):u.classList.remove(this.prefixCls+"-overflowY"),this.showHorizontalScrollBar?u.classList.add(this.prefixCls+"-overflowX"):u.classList.remove(this.prefixCls+"-overflowX")}},hideColumnFilter(){this.cloneColumns.forEach(l=>l._filterVisible=!1)},handleBodyScroll(l){this.scrollOnTheLeft=l.target.scrollLeft===0,this.scrollOnTheRight=l.target.scrollWidth===l.target.scrollLeft+l.target.clientWidth,this.showHeader&&(this.$refs.header.scrollLeft=l.target.scrollLeft),this.isLeftFixed&&(this.$refs.fixedBody.scrollTop=l.target.scrollTop),this.isRightFixed&&(this.$refs.fixedRightBody.scrollTop=l.target.scrollTop),this.showSummary&&this.$refs.summary&&(this.$refs.summary.$el.scrollLeft=l.target.scrollLeft),this.hideColumnFilter()},handleFixedMousewheel(l){let u=l.deltaY;if(!u&&l.detail&&(u=l.detail*40),!u&&l.wheelDeltaY&&(u=-l.wheelDeltaY),!u&&l.wheelDelta&&(u=-l.wheelDelta),!u)return;const m=this.$refs.body,k=m.scrollTop;u<0&&k!==0&&l.preventDefault(),u>0&&m.scrollHeight-m.clientHeight>k&&l.preventDefault();let C=0,v=setInterval(()=>{C+=5,u>0?m.scrollTop+=2:m.scrollTop-=2,C>=Math.abs(u)&&clearInterval(v)},5)},handleMouseWheel(l){const u=l.deltaX,m=this.$refs.body;u>0?m.scrollLeft=m.scrollLeft+10:m.scrollLeft=m.scrollLeft-10},sortData(l,u,m){const k=this.cloneColumns[m].key;l.sort((C,v)=>{if(this.cloneColumns[m].sortMethod)return this.cloneColumns[m].sortMethod(C[k],v[k],u);if(u==="asc")return C[k]>v[k]?1:-1;if(u==="desc")return C[k]<v[k]?1:-1});for(let C=0;C<l.length;C++)l[C].children&&l[C].children.length&&(l[C].children=this.sortData(l[C].children,u,m));return l},handleSort(l,u){const m=this.GetOriginalIndex(l);this.cloneColumns.forEach(C=>C._sortType="normal");const k=this.cloneColumns[m].key;this.cloneColumns[m].sortable!=="custom"&&(u==="normal"?this.rebuildData=this.makeDataWithFilter():this.rebuildData=this.sortData(this.rebuildData,u,m)),this.cloneColumns[m]._sortType=u,this.$emit("on-sort-change",{column:JSON.parse(JSON.stringify(this.allColumns[this.cloneColumns[m]._index])),key:k,order:u})},handleFilterHide(l){this.cloneColumns[l]._isFiltered||(this.cloneColumns[l]._filterChecked=[])},filterData(l,u){return l.filter(m=>{if(typeof u.filterRemote=="function")return!0;let k=!u._filterChecked.length;for(let C=0;C<u._filterChecked.length&&(k=u.filterMethod(u._filterChecked[C],m),!k);C++);return k})},filterOtherData(l,u){let m=this.cloneColumns[u];return typeof m.filterRemote=="function"&&m.filterRemote.call(this.$parent,m._filterChecked,m.key,m),this.cloneColumns.forEach((k,C)=>{C!==u&&(l=this.filterData(l,k))}),l},handleFilter(l){const u=this.cloneColumns[l];let m=this.makeDataWithSort();m=this.filterOtherData(m,l),this.rebuildData=this.filterData(m,u),this.cloneColumns[l]._isFiltered=!0,this.cloneColumns[l]._filterVisible=!1,this.$emit("on-filter-change",u)},GetOriginalIndex(l){return this.cloneColumns.findIndex(u=>u._index===l)},handleFilterSelect(l,u){const m=this.GetOriginalIndex(l);this.cloneColumns[m]._filterChecked=[u],this.handleFilter(m)},handleFilterReset(l){const u=this.GetOriginalIndex(l);this.cloneColumns[u]._isFiltered=!1,this.cloneColumns[u]._filterVisible=!1,this.cloneColumns[u]._filterChecked=[];let m=this.makeDataWithSort();m=this.filterOtherData(m,u),this.rebuildData=m,this.$emit("on-filter-change",this.cloneColumns[u])},makeData(){let l=L(this.data);return l.forEach((u,m)=>{u._index=m,u._rowKey=typeof this.rowKey=="string"?u[this.rowKey]:HR++,u.children&&u.children.length&&(u.children=this.makeChildrenData(u))}),l},makeChildrenData(l){return l.children&&l.children.length?l.children.map((u,m)=>{const k=L(u);return k._index=m,k._rowKey=typeof this.rowKey=="string"?k[this.rowKey]:HR++,k.children&&k.children.length&&(k.children=this.makeChildrenData(k)),k}):l},makeDataWithSort(){let l=this.makeData(),u="normal",m=-1,k=!1;for(let C=0;C<this.cloneColumns.length;C++)if(this.cloneColumns[C]._sortType!=="normal"){u=this.cloneColumns[C]._sortType,m=C,k=this.cloneColumns[C].sortable==="custom";break}return u!=="normal"&&!k&&(l=this.sortData(l,u,m)),l},makeDataWithFilter(){let l=this.makeData();return this.cloneColumns.forEach(u=>l=this.filterData(l,u)),l},makeDataWithSortAndFilter(){let l=this.makeDataWithSort();return this.cloneColumns.forEach(u=>l=this.filterData(l,u)),l},makeObjBaseData(l){const u=L(l);return typeof this.rowKey=="string"&&(u._rowKey=u[this.rowKey]),u._isHover=!1,u._disabled?u._isDisabled=u._disabled:u._isDisabled=!1,u._checked?u._isChecked=u._checked:u._isChecked=!1,u._expanded?u._isExpanded=u._expanded:u._isExpanded=!1,u._highlight?u._isHighlight=u._highlight:u._isHighlight=!1,u},makeObjData(){let l={};return this.data.forEach((u,m)=>{const k=this.makeObjBaseData(u);k.children&&k.children.length&&(k._showChildren?k._isShowChildren=k._showChildren:k._isShowChildren=!1,k.children=this.makeChildrenObjData(k)),l[m]=k}),l},makeChildrenObjData(l){return l.children&&l.children.length?l.children.map(u=>{const m=this.makeObjBaseData(u);return m._showChildren?m._isShowChildren=m._showChildren:m._isShowChildren=!1,m.children&&m.children.length&&(m.children=this.makeChildrenObjData(m)),m}):l},makeColumnsId(l){return L(l).map(u=>("children"in u&&this.makeColumnsId(u.children),u.__id=hoe(6),u))},makeColumns(l){let u=L(Qm(l)),m=[],k=[],C=[];return u.forEach((v,R)=>{v._index=R,v._columnKey=uoe++,v.width=parseInt(v.width),v._width=v.width?v.width:"",v._sortType="normal",v._filterVisible=!1,v._isFiltered=!1,v._filterChecked=[],"filterMultiple"in v?v._filterMultiple=v.filterMultiple:v._filterMultiple=!0,"filteredValue"in v&&(v._filterChecked=v.filteredValue,v._isFiltered=!0),"sortType"in v&&(v._sortType=v.sortType),v.fixed&&v.fixed==="left"?m.push(v):v.fixed&&v.fixed==="right"?k.push(v):C.push(v)}),m.concat(C).concat(k)},makeColumnRows(l,u){return coe(u,l)},exportCsv(l){l.filename?l.filename.indexOf(".csv")===-1&&(l.filename+=".csv"):l.filename="table.csv";let u=[],m=[];l.columns&&l.data?(u=l.columns,m=l.data):(u=this.allColumns,"original"in l||(l.original=!0),m=l.original?this.data:this.rebuildData);let k=!1;"noHeader"in l&&(k=l.noHeader);const C=aoe(u,m,l,k);l.callback?l.callback(C):loe.download(l.filename,C)},dragAndDrop(l,u){this.$emit("on-drag-drop",l,u)},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnVisibleChange(l){l&&i.nextTick(()=>{this.handleResize()})},addTable(l){const u=this[l];!u||(u.tableList||(u.tableList=[]),u.tableList.push({id:this.id,table:this}))},removeTable(l){const u=this[l];if(!u||!u.tableList)return;const m=u.tableList.findIndex(k=>k.id===this.id);u.tableList.splice(m,1)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.context||(this.currentContext=this.$parent),this.showSlotHeader=this.$slots.header!==void 0,this.showSlotFooter=this.$slots.footer!==void 0,this.rebuildData=this.makeDataWithSortAndFilter()},mounted(){this.addTable("TabsInstance"),this.addTable("ModalInstance"),this.addTable("DrawerInstance"),this.handleResize(),i.nextTick(()=>this.ready=!0),o(window,"resize",this.handleResize),this.observer=Qd(),this.observer.listenTo(this.$el,this.handleResize)},beforeUnmount(){this.removeTable("TabsInstance"),this.removeTable("ModalInstance"),this.removeTable("DrawerInstance"),a(window,"resize",this.handleResize),this.observer.removeAllListeners(this.$el),this.observer.uninstall(this.$el),this.observer=null},watch:{data:{handler(){const l=this.rebuildData.length;this.objData=this.makeObjData(),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize(),l||this.fixedHeader(),setTimeout(()=>{this.cloneData=L(this.data)},0)},deep:!0},columns:{handler(){const l=this.makeColumnsId(this.columns);this.allColumns=Qm(l),this.cloneColumns=this.makeColumns(l),this.columnRows=this.makeColumnRows(!1,l),this.leftFixedColumnRows=this.makeColumnRows("left",l),this.rightFixedColumnRows=this.makeColumnRows("right",l),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize()},deep:!0},height(){this.handleResize()},maxHeight(){this.handleResize()},showHorizontalScrollBar(){this.handleResize()},showVerticalScrollBar(){this.handleResize()}}},foe={cellspacing:"0",cellpadding:"0",border:"0"},poe=["innerHTML"],moe=["innerHTML"],goe={class:"ivu-table-resize-line",ref:"resizeLine"};function yoe(l,u,m,k,C,v){const R=i.resolveComponent("table-head"),B=i.resolveComponent("table-body"),G=i.resolveComponent("table-summary"),W=i.resolveComponent("DropdownMenu"),j=i.resolveComponent("Dropdown"),ce=i.resolveComponent("Spin");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.wrapClasses),style:i.normalizeStyle(v.styles),ref:"tableWrap"},[i.createElementVNode("div",{class:i.normalizeClass(v.classes)},[C.showSlotHeader?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-title"]),ref:"title"},[i.renderSlot(l.$slots,"header")],2)):i.createCommentVNode("",!0),m.showHeader?(i.openBlock(),i.createElementBlock("div",{key:1,class:i.normalizeClass([C.prefixCls+"-header"]),ref:"header",onMousewheel:u[0]||(u[0]=(...Oe)=>v.handleMouseWheel&&v.handleMouseWheel(...Oe))},[i.createVNode(R,{"prefix-cls":C.prefixCls,styleObject:v.tableHeaderStyle,columns:C.cloneColumns,"column-rows":C.columnRows,"obj-data":C.objData,"columns-width":C.columnsWidth,data:C.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","obj-data","columns-width","data"])],34)):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-body"]),style:i.normalizeStyle(v.bodyStyle),ref:"body",onScroll:u[1]||(u[1]=(...Oe)=>v.handleBodyScroll&&v.handleBodyScroll(...Oe))},[i.createVNode(B,{ref:"tbody",draggable:m.draggable,"prefix-cls":C.prefixCls,styleObject:v.tableStyle,columns:C.cloneColumns,data:C.rebuildData,"row-key":m.rowKey,"columns-width":C.columnsWidth,"obj-data":C.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),[[i.vShow,!(v.localeNoDataText&&(!m.data||m.data.length===0)||v.localeNoFilteredDataText&&(!C.rebuildData||C.rebuildData.length===0))]]),m.showSummary&&m.data&&m.data.length?(i.openBlock(),i.createBlock(G,{key:2,ref:"summary","prefix-cls":C.prefixCls,styleObject:v.tableStyle,columns:C.cloneColumns,data:v.summaryData,"columns-width":C.columnsWidth},null,8,["prefix-cls","styleObject","columns","data","columns-width"])):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-tip"]),style:i.normalizeStyle(v.bodyStyle),onScroll:u[2]||(u[2]=(...Oe)=>v.handleBodyScroll&&v.handleBodyScroll(...Oe))},[i.createElementVNode("table",foe,[i.createElementVNode("tbody",null,[i.createElementVNode("tr",null,[i.createElementVNode("td",{style:i.normalizeStyle({height:v.bodyStyle.height,width:`${C.headerWidth}px`})},[!m.data||m.data.length===0?(i.openBlock(),i.createElementBlock("span",{key:0,innerHTML:v.localeNoDataText},null,8,poe)):(i.openBlock(),i.createElementBlock("span",{key:1,innerHTML:v.localeNoFilteredDataText},null,8,moe))],4)])])])],38),[[i.vShow,!!v.localeNoDataText&&(!m.data||m.data.length===0)||!!v.localeNoFilteredDataText&&(!C.rebuildData||C.rebuildData.length===0)]]),v.isLeftFixed?(i.openBlock(),i.createElementBlock("div",{key:3,class:i.normalizeClass(v.fixedTableClasses),style:i.normalizeStyle(v.fixedTableStyle)},[m.showHeader?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.fixedHeaderClasses)},[i.createVNode(R,{fixed:"left","prefix-cls":C.prefixCls,styleObject:v.fixedTableStyle,columns:v.leftFixedColumns,"column-rows":C.columnRows,"fixed-column-rows":C.leftFixedColumnRows,"obj-data":C.objData,"columns-width":C.columnsWidth,data:C.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-fixed-body"]),style:i.normalizeStyle(v.fixedBodyStyle),ref:"fixedBody",onMousewheel:u[3]||(u[3]=(...Oe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...Oe)),"on:DOMMouseScroll":u[4]||(u[4]=(...Oe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...Oe))},[i.createVNode(B,{fixed:"left",draggable:m.draggable,"prefix-cls":C.prefixCls,styleObject:v.fixedTableStyle,columns:v.leftFixedColumns,data:C.rebuildData,"row-key":m.rowKey,"columns-width":C.columnsWidth,"obj-data":C.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),m.showSummary&&m.data&&m.data.length?(i.openBlock(),i.createBlock(G,{key:1,fixed:"left","prefix-cls":C.prefixCls,styleObject:v.fixedTableStyle,columns:v.leftFixedColumns,data:v.summaryData,"columns-width":C.columnsWidth,style:i.normalizeStyle({"margin-top":C.showHorizontalScrollBar?C.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):i.createCommentVNode("",!0)],6)):i.createCommentVNode("",!0),v.isRightFixed?(i.openBlock(),i.createElementBlock("div",{key:4,class:i.normalizeClass(v.fixedRightTableClasses),style:i.normalizeStyle(v.fixedRightTableStyle)},[m.showHeader?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(v.fixedHeaderClasses)},[i.createVNode(R,{fixed:"right","prefix-cls":C.prefixCls,styleObject:v.fixedRightTableStyle,columns:v.rightFixedColumns,"column-rows":C.columnRows,"fixed-column-rows":C.rightFixedColumnRows,"obj-data":C.objData,"columns-width":C.columnsWidth,data:C.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass([C.prefixCls+"-fixed-body"]),style:i.normalizeStyle(v.fixedBodyStyle),ref:"fixedRightBody",onMousewheel:u[5]||(u[5]=(...Oe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...Oe)),"on:DOMMouseScroll":u[6]||(u[6]=(...Oe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...Oe))},[i.createVNode(B,{fixed:"right",draggable:m.draggable,"prefix-cls":C.prefixCls,styleObject:v.fixedRightTableStyle,columns:v.rightFixedColumns,data:C.rebuildData,"row-key":m.rowKey,"columns-width":C.columnsWidth,"obj-data":C.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),m.showSummary&&m.data&&m.data.length?(i.openBlock(),i.createBlock(G,{key:1,fixed:"right","prefix-cls":C.prefixCls,styleObject:v.fixedRightTableStyle,columns:v.rightFixedColumns,data:v.summaryData,"columns-width":C.columnsWidth,style:i.normalizeStyle({"margin-top":C.showHorizontalScrollBar?C.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):i.createCommentVNode("",!0)],6)):i.createCommentVNode("",!0),v.isRightFixed?(i.openBlock(),i.createElementBlock("div",{key:5,class:i.normalizeClass([C.prefixCls+"-fixed-right-header"]),style:i.normalizeStyle(v.fixedRightHeaderStyle)},null,6)):i.createCommentVNode("",!0),C.showSlotFooter?(i.openBlock(),i.createElementBlock("div",{key:6,class:i.normalizeClass([C.prefixCls+"-footer"]),ref:"footer"},[i.renderSlot(l.$slots,"footer")],2)):i.createCommentVNode("",!0)],2),i.withDirectives(i.createElementVNode("div",goe,null,512),[[i.vShow,C.showResizeLine]]),m.showContextMenu?(i.openBlock(),i.createElementBlock("div",{key:0,class:"ivu-table-context-menu",style:i.normalizeStyle(C.contextMenuStyles)},[i.createVNode(j,{trigger:"custom",visible:C.contextMenuVisible,transfer:"",onOnClick:v.handleClickDropdownItem,onOnClickoutside:v.handleClickContextMenuOutside},{list:i.withCtx(()=>[i.createVNode(W,null,{default:i.withCtx(()=>[i.renderSlot(l.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)):i.createCommentVNode("",!0),i.createVNode(ce,{fix:"",size:"large",show:m.loading},{default:i.withCtx(()=>[i.renderSlot(l.$slots,"loading")]),_:3},8,["show"])],6)}var x1=c(doe,[["render",yoe]]);const voe={name:"TablePaste",components:{Row:wc,Col:Ba,Input:Do,Table:x1},emits:["on-change","on-error","on-success"],props:{value:{type:String},inputProps:{type:Object,default(){return{}}},tableProps:{type:Object,default(){return{}}},hideTable:{type:Boolean,default:!1}},data(){return{content:"",tableColumns:[],tableData:[]}},watch:{value:{handler(l){this.handleResolveContent(l)},immediate:!0}},methods:{handleContentChange(l){const u=l.target.value.trim();this.$emit("on-change",u),this.handleResolveContent(u)},handleResolveContent(l){let u=[];l!==""&&l!==void 0&&(u=l.split(/[\n\u0085\u2028\u2029]|\r\n?/g).map(C=>C.split("	")));const m=this.handleGetErrorIndex(u),k=this.contentToTable(u);this.tableColumns=k.columns,this.tableData=k.data,m.length?this.$emit("on-error",k,m):this.$emit("on-success",k)},handleGetErrorIndex(l){const u=L(l),m=[];if(u.length){const k=u[0].length;u.forEach((C,v)=>{C.length!==k&&m.push(v)})}return m},contentToTable(l){const u=L(l);let m=[],k=[];return u.length>1&&(m=u.shift().map((C,v)=>({title:C,key:`key${v}`})),k=u.map(C=>{const v={};return C.forEach((R,B)=>{v[`key${B}`]=R}),v})),{columns:m,data:k}}}},boe={class:"ivu-table-paste"},xoe={key:0,class:"ivu-table-paste-input"},Ooe={key:0,class:"ivu-table-paste-input"};function woe(l,u,m,k,C,v){const R=i.resolveComponent("Input"),B=i.resolveComponent("Col"),G=i.resolveComponent("Table"),W=i.resolveComponent("Row");return i.openBlock(),i.createElementBlock("div",boe,[m.hideTable?(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[m.value!==void 0||!l.$slots.default?(i.openBlock(),i.createElementBlock("div",Ooe,[i.renderSlot(l.$slots,"default",{},()=>[i.createVNode(R,i.mergeProps({modelValue:C.content,"onUpdate:modelValue":u[1]||(u[1]=j=>C.content=j),type:"textarea"},m.inputProps,{onOnChange:v.handleContentChange}),null,16,["modelValue","onOnChange"])])])):i.createCommentVNode("",!0)],64)):(i.openBlock(),i.createBlock(W,{key:0,gutter:32},{default:i.withCtx(()=>[i.createVNode(B,{span:"12"},{default:i.withCtx(()=>[m.value!==void 0||!l.$slots.default?(i.openBlock(),i.createElementBlock("div",xoe,[i.renderSlot(l.$slots,"default",{},()=>[i.createVNode(R,i.mergeProps({modelValue:C.content,"onUpdate:modelValue":u[0]||(u[0]=j=>C.content=j),type:"textarea"},m.inputProps,{onOnChange:v.handleContentChange}),null,16,["modelValue","onOnChange"])])])):i.createCommentVNode("",!0)]),_:3}),i.createVNode(B,{span:"12"},{default:i.withCtx(()=>[i.createVNode(G,i.mergeProps({columns:C.tableColumns,data:C.tableData},m.tableProps),null,16,["columns","data"])]),_:1})]),_:3}))])}var GR=c(voe,[["render",woe]]);const _oe={name:"TagSelect",mixins:[mi],components:{Tag:Bd,Icon:S},emits:["on-change","on-checked-all","update:modelValue"],provide(){return{TagSelectInstance:this}},props:{modelValue:{type:Array,default(){return[]}},expandable:{type:Boolean,default:!1},hideCheckAll:{type:Boolean,default:!1},locale:{type:Object,default(){return{collapseText:"收起",expandText:"展开"}}}},data(){return{currentValue:this.modelValue,checkedAll:!1,expand:!1,tagSelectOptionList:[]}},computed:{classes(){return{"ivu-tag-select-with-expanded":this.expandable,"ivu-tag-select-expanded":this.expand}}},watch:{modelValue(l){this.currentValue=l,this.handleUpdateTags()}},methods:{handleUpdateTags(){let l=!0;this.tagSelectOptionList.map(u=>u.option).forEach(u=>{this.currentValue.indexOf(u.name)>=0?u.checked=!0:(u.checked=!1,l=!1)}),this.checkedAll=l},handleChangeTag(l){const u=[];let m=!0;this.tagSelectOptionList.map(k=>k.option).forEach(k=>{k.checked?u.push(k.name):m=!1}),this.currentValue=u,this.$emit("update:modelValue",u),this.$emit("on-change",[...u],l),this.handleFormItemChange("change",l),l&&(this.checkedAll=m)},handleCheckAll(l){this.checkedAll=l,this.tagSelectOptionList.map(u=>u.option).forEach(u=>{u.checked=l}),this.handleChangeTag(),this.$emit("on-checked-all",l)},handleToggleExpand(){this.expand=!this.expand}},mounted(){this.handleUpdateTags()}},Soe={key:0,class:"ivu-tag-select-option"},Coe={key:0},koe={key:1};function Toe(l,u,m,k,C,v){const R=i.resolveComponent("Tag"),B=i.resolveComponent("Icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["ivu-tag-select",v.classes])},[m.hideCheckAll?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("div",Soe,[i.createVNode(R,{checkable:"",checked:C.checkedAll,onOnChange:v.handleCheckAll,color:"primary"},{default:i.withCtx(()=>[i.createTextVNode("全部")]),_:1},8,["checked","onOnChange"])])),i.renderSlot(l.$slots,"default"),m.expandable?(i.openBlock(),i.createElementBlock("a",{key:1,class:"ivu-tag-select-expand-btn",onClick:u[0]||(u[0]=(...G)=>v.handleToggleExpand&&v.handleToggleExpand(...G))},[C.expand?(i.openBlock(),i.createElementBlock("span",Coe,i.toDisplayString(m.locale.collapseText),1)):(i.openBlock(),i.createElementBlock("span",koe,i.toDisplayString(m.locale.expandText),1)),C.expand?(i.openBlock(),i.createBlock(B,{key:2,type:"ios-arrow-up"})):(i.openBlock(),i.createBlock(B,{key:3,type:"ios-arrow-down"}))])):i.createCommentVNode("",!0)],2)}var YR=c(_oe,[["render",Toe]]);const Moe={name:"TagSelectOption",components:{Tag:Bd},inject:["TagSelectInstance"],props:{name:{type:[String,Number],required:!0},tagProps:{type:Object,default(){return{}}},color:{type:String,default:"primary"}},data(){return{checked:!1,id:te(6)}},methods:{handleChange(l){this.checked=l,this.TagSelectInstance.handleChangeTag(this.name)},addOption(){this.TagSelectInstance.tagSelectOptionList.push({id:this.id,option:this})},removeOption(){const l=this.TagSelectInstance,u=l.tagSelectOptionList.findIndex(m=>m.id===this.id);l.tagSelectOptionList.splice(u,1)}},mounted(){this.addOption()},beforeUnmount(){this.removeOption()}},Eoe={class:"ivu-tag-select-option"};function Poe(l,u,m,k,C,v){const R=i.resolveComponent("Tag");return i.openBlock(),i.createElementBlock("div",Eoe,[i.createVNode(R,i.mergeProps({checkable:"",checked:C.checked,onOnChange:v.handleChange,color:m.color},m.tagProps),{default:i.withCtx(()=>[i.renderSlot(l.$slots,"default")]),_:3},16,["checked","onOnChange","color"])])}var jR=c(Moe,[["render",Poe]]);const qR={name:"Text",mixins:[Dm],render(){return i.h(u1,{...this.$props,component:"span",...this.commonEvents()},this.commonSlots())}},ZR="ivu-timeline",Aoe={name:"Timeline",props:{pending:{type:Boolean,default:!1}},computed:{classes(){return[`${ZR}`,{[`${ZR}-pending`]:this.pending}]}}};function Roe(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("ul",{class:i.normalizeClass(v.classes)},[i.renderSlot(l.$slots,"default")],2)}var KR=c(Aoe,[["render",Roe]]);const qd="ivu-timeline",Ioe={name:"TimelineItem",props:{color:{type:String,default:"blue"}},data(){return{dot:!1}},mounted(){this.dot=!!this.$refs.dot.innerHTML.length},computed:{itemClasses(){return`${qd}-item`},tailClasses(){return`${qd}-item-tail`},headClasses(){return[`${qd}-item-head`,{[`${qd}-item-head-custom`]:this.dot,[`${qd}-item-head-${this.color}`]:this.headColorShow}]},headColorShow(){return this.color==="blue"||this.color==="red"||this.color==="green"},customColor(){let l={};return this.color&&(this.headColorShow||(l={color:this.color,"border-color":this.color})),l},contentClasses(){return`${qd}-item-content`}}};function Doe(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("li",{class:i.normalizeClass(v.itemClasses)},[i.createElementVNode("div",{class:i.normalizeClass(v.tailClasses)},null,2),i.createElementVNode("div",{class:i.normalizeClass(v.headClasses),style:i.normalizeStyle(v.customColor),ref:"dot"},[i.renderSlot(l.$slots,"dot")],6),i.createElementVNode("div",{class:i.normalizeClass(v.contentClasses)},[i.renderSlot(l.$slots,"default")],2)],2)}var JR=c(Ioe,[["render",Doe]]),eI={mixins:[W4,Kv],components:{TimePickerPanel:r5,RangeTimePickerPanel:c5},props:{type:{validator(l){return _(l,["time","timerange"])},default:"time"}},computed:{panel(){return this.type==="timerange"?"RangeTimePickerPanel":"TimePickerPanel"},ownPickerProps(){return{disabledHours:this.disabledHours,disabledMinutes:this.disabledMinutes,disabledSeconds:this.disabledSeconds,hideDisabledOptions:this.hideDisabledOptions}}},watch:{visible(l){l&&i.nextTick(()=>{this.timeSpinnerList.map(u=>u.timeSpinner).forEach(u=>u.updateScroll())})}}};const tI={name:"Title",mixins:[Dm],props:{level:{type:Number,validator(l){return _(l,[1,2,3,4,5,6])},default:1}},render(){return i.h(u1,{...this.$props,component:`h${this.level}`,...this.commonEvents()},this.commonSlots())}},Noe={name:"Search",components:{Input:Do},emits:["on-query-change","on-query-clear"],props:{prefixCls:String,placeholder:String,query:String},data(){return{currentQuery:this.query}},watch:{query(l){this.currentQuery=l},currentQuery(l){this.$emit("on-query-change",l)}},computed:{icon(){return this.query===""?"ios-search":"ios-close-circle"}},methods:{handleClick(){this.currentQuery!==""&&(this.currentQuery="",this.$emit("on-query-clear"))}}};function $oe(l,u,m,k,C,v){const R=i.resolveComponent("Input");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(m.prefixCls)},[i.createVNode(R,{modelValue:C.currentQuery,"onUpdate:modelValue":u[0]||(u[0]=B=>C.currentQuery=B),size:"small",icon:v.icon,placeholder:m.placeholder,onOnClick:v.handleClick},null,8,["modelValue","icon","placeholder","onOnClick"])],2)}var Voe=c(Noe,[["render",$oe]]);const Loe={name:"TransferList",components:{Search:Voe,Checkbox:Ld},inject:["TransferInstance"],emits:["on-checked-keys-change"],props:{prefixCls:String,data:Array,renderFormat:Function,checkedKeys:Array,listStyle:Object,title:[String,Number],filterable:Boolean,filterPlaceholder:String,filterMethod:Function,notFoundText:String,validKeysCount:Number},data(){return{showItems:[],query:"",showFooter:!0}},watch:{data(){this.updateFilteredData()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-with-footer`]:this.showFooter}]},bodyClasses(){return[`${this.prefixCls}-body`,{[`${this.prefixCls}-body-with-search`]:this.filterable,[`${this.prefixCls}-body-with-footer`]:this.showFooter}]},count(){const l=this.validKeysCount;return(l>0?`${l}/`:"")+`${this.data.length}`},checkedAll(){return this.filterData.filter(l=>!l.disabled).length===this.validKeysCount&&this.validKeysCount!==0},checkedAllDisabled(){return this.filterData.filter(l=>!l.disabled).length<=0},filterData(){return this.showItems.filter(l=>this.filterMethod(l,this.query))}},methods:{itemClasses(l){return[`${this.prefixCls}-content-item`,{[`${this.prefixCls}-content-item-disabled`]:l.disabled}]},showLabel(l){return this.renderFormat(l)},isCheck(l){return this.checkedKeys.some(u=>u===l.key)},select(l){if(l.disabled)return;const u=this.checkedKeys.indexOf(l.key);u>-1?this.checkedKeys.splice(u,1):this.checkedKeys.push(l.key),this.TransferInstance.handleCheckedKeys()},updateFilteredData(){this.showItems=this.data},toggleSelectAll(l){const u=l?this.filterData.filter(m=>!m.disabled||this.checkedKeys.indexOf(m.key)>-1).map(m=>m.key):this.filterData.filter(m=>m.disabled&&this.checkedKeys.indexOf(m.key)>-1).map(m=>m.key);this.$emit("on-checked-keys-change",u)},handleQueryClear(){this.query=""},handleQueryChange(l){this.query=l}},created(){this.updateFilteredData()},mounted(){this.showFooter=this.$slots.default!==void 0}},Boe=["onClick"],Uoe=["innerHTML"];function Foe(l,u,m,k,C,v){const R=i.resolveComponent("Checkbox"),B=i.resolveComponent("Search");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(v.classes),style:i.normalizeStyle(m.listStyle)},[i.createElementVNode("div",{class:i.normalizeClass(m.prefixCls+"-header")},[i.createVNode(R,{modelValue:v.checkedAll,disabled:v.checkedAllDisabled,"onUpdate:modelValue":v.toggleSelectAll},null,8,["modelValue","disabled","onUpdate:modelValue"]),i.createElementVNode("span",{class:i.normalizeClass(m.prefixCls+"-header-title"),onClick:u[0]||(u[0]=G=>v.toggleSelectAll(!v.checkedAll))},i.toDisplayString(m.title),3),i.createElementVNode("span",{class:i.normalizeClass(m.prefixCls+"-header-count")},i.toDisplayString(v.count),3)],2),i.createElementVNode("div",{class:i.normalizeClass(v.bodyClasses)},[m.filterable?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(m.prefixCls+"-body-search-wrapper")},[i.createVNode(B,{"prefix-cls":m.prefixCls+"-search",query:C.query,onOnQueryClear:v.handleQueryClear,onOnQueryChange:v.handleQueryChange,placeholder:m.filterPlaceholder},null,8,["prefix-cls","query","onOnQueryClear","onOnQueryChange","placeholder"])],2)):i.createCommentVNode("",!0),i.createElementVNode("ul",{class:i.normalizeClass(m.prefixCls+"-content")},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.filterData,(G,W)=>(i.openBlock(),i.createElementBlock("li",{key:W,class:i.normalizeClass(v.itemClasses(G)),onClick:i.withModifiers(j=>v.select(G),["prevent"])},[i.createVNode(R,{modelValue:v.isCheck(G),disabled:G.disabled},null,8,["modelValue","disabled"]),i.createElementVNode("span",{innerHTML:v.showLabel(G)},null,8,Uoe)],10,Boe))),128)),i.createElementVNode("li",{class:i.normalizeClass(m.prefixCls+"-content-not-found")},i.toDisplayString(m.notFoundText),3)],2)],2),C.showFooter?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(m.prefixCls+"-footer")},[i.renderSlot(l.$slots,"default")],2)):i.createCommentVNode("",!0)],6)}var iI=c(Loe,[["render",Foe]]);const zoe={name:"Operation",components:{Button:fs,Icon:S},inject:["TransferInstance"],props:{prefixCls:String,operations:Array,leftActive:Boolean,rightActive:Boolean,reverseOperation:Boolean},methods:{moveToLeft(){this.TransferInstance.moveTo("left")},moveToRight(){this.TransferInstance.moveTo("right")}}},Xoe={key:0},Woe={key:0},Qoe={key:0},Hoe={key:0};function Goe(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Button");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(m.prefixCls+"-operation")},[m.reverseOperation?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createVNode(B,{type:"primary",size:"small",disabled:!m.leftActive,onClick:v.moveToRight},{default:i.withCtx(()=>[m.operations[1]?(i.openBlock(),i.createElementBlock("span",Xoe,i.toDisplayString(m.operations[1]),1)):i.createCommentVNode("",!0),i.createVNode(R,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"]),i.createVNode(B,{type:"primary",size:"small",disabled:!m.rightActive,onClick:v.moveToLeft},{default:i.withCtx(()=>[i.createVNode(R,{type:"ios-arrow-back"}),m.operations[0]?(i.openBlock(),i.createElementBlock("span",Woe,i.toDisplayString(m.operations[0]),1)):i.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"])],64)):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[i.createVNode(B,{type:"primary",size:"small",disabled:!m.rightActive,onClick:v.moveToLeft},{default:i.withCtx(()=>[i.createVNode(R,{type:"ios-arrow-back"}),m.operations[0]?(i.openBlock(),i.createElementBlock("span",Qoe,i.toDisplayString(m.operations[0]),1)):i.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"]),i.createVNode(B,{type:"primary",size:"small",disabled:!m.leftActive,onClick:v.moveToRight},{default:i.withCtx(()=>[m.operations[1]?(i.openBlock(),i.createElementBlock("span",Hoe,i.toDisplayString(m.operations[1]),1)):i.createCommentVNode("",!0),i.createVNode(R,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"])],64))],2)}var Yoe=c(zoe,[["render",Goe]]);const nI="ivu-transfer",rI={name:"Transfer",mixins:[Ki,mi],emits:["on-change","on-selected-change"],provide(){return{TransferInstance:this}},render(){const l=this.$slots.default?this.$slots.default():"";return i.h("div",{class:this.classes},[i.h(iI,{ref:"left",prefixCls:this.prefixCls+"-list",data:this.leftData,renderFormat:this.renderFormat,checkedKeys:this.leftCheckedKeys,validKeysCount:this.leftValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[0],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleLeftCheckedKeysChange},()=>l),i.h(Yoe,{prefixCls:this.prefixCls,operations:this.operations,leftActive:this.leftValidKeysCount>0,rightActive:this.rightValidKeysCount>0,reverseOperation:this.reverseOperation}),i.h(iI,{ref:"right",prefixCls:this.prefixCls+"-list",data:this.rightData,renderFormat:this.renderFormat,checkedKeys:this.rightCheckedKeys,validKeysCount:this.rightValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[1],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleRightCheckedKeysChange},()=>l)])},props:{data:{type:Array,default(){return[]}},renderFormat:{type:Function,default(l){return l.label||l.key}},targetKeys:{type:Array,default(){return[]}},selectedKeys:{type:Array,default(){return[]}},listStyle:{type:Object,default(){return{}}},titles:{type:Array},operations:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!1},filterPlaceholder:{type:String},filterMethod:{type:Function,default(l,u){const m="label"in l?"label":"key";return l[m].indexOf(u)>-1}},notFoundText:{type:String},reverseOperation:{type:Boolean,default:!1}},data(){return{prefixCls:nI,leftData:[],rightData:[],leftCheckedKeys:[],rightCheckedKeys:[]}},computed:{classes(){return[`${nI}`]},leftValidKeysCount(){return this.getValidKeys("left").length},rightValidKeysCount(){return this.getValidKeys("right").length},localeFilterPlaceholder(){return this.filterPlaceholder===void 0?this.t("i.transfer.filterPlaceholder"):this.filterPlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.transfer.notFoundText"):this.notFoundText},localeTitles(){return this.titles===void 0?[this.t("i.transfer.titles.source"),this.t("i.transfer.titles.target")]:this.titles}},methods:{getValidKeys(l){return this[`${l}Data`].filter(u=>!u.disabled&&this[`${l}CheckedKeys`].indexOf(u.key)>-1).map(u=>u.key)},splitData(l=!1){this.leftData=[...this.data],this.rightData=[],this.targetKeys.length>0&&this.targetKeys.forEach(u=>{const m=this.leftData.filter((k,C)=>k.key===u?(this.leftData.splice(C,1),!0):!1);m&&m.length>0&&this.rightData.push(m[0])}),l&&this.splitSelectedKey()},splitSelectedKey(){const l=this.selectedKeys;l.length>0&&(this.leftCheckedKeys=this.leftData.filter(u=>l.indexOf(u.key)>-1).map(u=>u.key),this.rightCheckedKeys=this.rightData.filter(u=>l.indexOf(u.key)>-1).map(u=>u.key))},moveTo(l){const u=this.targetKeys,m=l==="left"?"right":"left",k=this.getValidKeys(m),C=l==="right"?k.concat(u):u.filter(v=>!k.some(R=>v===R));this.$refs[m].toggleSelectAll(!1),this.$emit("on-change",C,l,k),this.handleFormItemChange("change",{tarketKeys:C,direction:l,moveKeys:k})},handleLeftCheckedKeysChange(l){this.leftCheckedKeys=l},handleRightCheckedKeysChange(l){this.rightCheckedKeys=l},handleCheckedKeys(){const l=this.getValidKeys("left"),u=this.getValidKeys("right");this.$emit("on-selected-change",l,u)}},watch:{targetKeys(){this.splitData(!1)},data(){this.splitData(!1)}},mounted(){this.splitData(!0)}};var joe={name:"RenderCell",props:{render:Function,data:Object,node:Array},render(){const l={root:this.node[0],node:this.node[1],data:this.data};return this.render(i.h,l)}};const Ic="ivu-tree",qoe={name:"TreeNode",inject:["TreeInstance"],components:{Checkbox:Ld,Icon:S,CollapseTransition:US,Render:joe},props:{data:{type:Object,default:()=>{}},multiple:{type:Boolean,default:!1},childrenKey:{type:String,default:"children"},showCheckbox:{type:Boolean,default:!1},appear:{type:Boolean,default:!1}},data(){return{prefixCls:Ic,appearByClickArrow:!1,globalConfig:{}}},computed:{classes(){return[`${Ic}-children`]},selectedCls(){return[{[`${Ic}-node-selected`]:this.data.selected}]},arrowClasses(){return[`${Ic}-arrow`,{[`${Ic}-arrow-disabled`]:this.data.disabled,[`${Ic}-arrow-open`]:this.data.expand}]},titleClasses(){return[`${Ic}-title`,{[`${Ic}-title-selected`]:this.data.selected}]},showArrow(){return this.data[this.childrenKey]&&this.data[this.childrenKey].length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},isParentRender(){const l=V(this,"Tree");return l&&l.render},parentRender(){const l=V(this,"Tree");return l&&l.render?l.render:null},node(){const l=V(this,"Tree");return l?[l.flatState,l.flatState.find(u=>u.nodeKey===this.data.nodeKey)]:[]},children(){return this.data[this.childrenKey]},arrowType(){const l=this.globalConfig;let u="ios-arrow-forward";return l&&(l.tree.customArrow?u="":l.tree.arrow&&(u=l.tree.arrow)),u},customArrowType(){const l=this.globalConfig;let u="";return l&&l.tree.customArrow&&(u=l.tree.customArrow),u},arrowSize(){const l=this.globalConfig;let u="";return l&&l.tree.arrowSize&&(u=l.tree.arrowSize),u}},methods:{handleExpand(){const l=this.data;if(this.appearByClickArrow=!0,l[this.childrenKey].length===0){const u=V(this,"Tree");if(u&&u.loadData){this.data.loading=!0,u.loadData(l,m=>{this.data.loading=!1,m.length&&(this.data[this.childrenKey]=m,i.nextTick(()=>this.handleExpand()))});return}}l[this.childrenKey]&&l[this.childrenKey].length&&(this.data.expand=!this.data.expand,this.TreeInstance.handleToggleExpand(this.data))},handleClickNode(){this.TreeInstance.expandNode?this.showArrow&&this.handleExpand():this.TreeInstance.selectNode&&this.handleSelect()},handleSelect(){this.data.disabled||(this.TreeInstance.showCheckbox&&this.TreeInstance.checkDirectly?this.handleCheck():this.TreeInstance.handleOnSelected(this.data.nodeKey))},handleCheck(){if(this.data.disabled)return;const l={checked:!this.data.checked&&!this.data.indeterminate,nodeKey:this.data.nodeKey};this.TreeInstance.handleOnCheck(l)},handleContextmenu(l,u){l.contextmenu&&(u.preventDefault(),this.TreeInstance.handleOnContextmenu({data:l,event:u}))},handlePreventSelect(l,u){l.contextmenu&&u.preventDefault()}},created(){const l=i.getCurrentInstance();this.globalConfig=l.appContext.config.globalProperties.$VIEWUI}},Zoe={key:0,class:"ivu-tree-expand"};function Koe(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("Checkbox"),G=i.resolveComponent("Render"),W=i.resolveComponent("TreeNode"),j=i.resolveComponent("collapse-transition");return i.openBlock(),i.createElementBlock("ul",{class:i.normalizeClass(v.classes)},[i.createElementVNode("li",{onContextmenu:u[2]||(u[2]=i.withModifiers(ce=>v.handleContextmenu(m.data,ce),["stop"])),onSelectstart:u[3]||(u[3]=i.withModifiers(ce=>v.handlePreventSelect(m.data,ce),["stop"]))},[i.createElementVNode("span",{class:i.normalizeClass(v.arrowClasses),onClick:u[0]||(u[0]=(...ce)=>v.handleExpand&&v.handleExpand(...ce))},[v.showArrow?(i.openBlock(),i.createBlock(R,{key:0,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["type","custom","size"])):i.createCommentVNode("",!0),v.showLoading?(i.openBlock(),i.createBlock(R,{key:1,type:"ios-loading",class:"ivu-load-loop"})):i.createCommentVNode("",!0)],2),m.showCheckbox?(i.openBlock(),i.createBlock(B,{key:0,"model-value":m.data.checked,indeterminate:m.data.indeterminate,disabled:m.data.disabled||m.data.disableCheckbox,onClick:i.withModifiers(v.handleCheck,["prevent"])},null,8,["model-value","indeterminate","disabled","onClick"])):i.createCommentVNode("",!0),i.createElementVNode("span",{class:i.normalizeClass(v.titleClasses),onClick:u[1]||(u[1]=(...ce)=>v.handleClickNode&&v.handleClickNode(...ce))},[m.data.render?(i.openBlock(),i.createBlock(G,{key:0,render:m.data.render,data:m.data,node:v.node},null,8,["render","data","node"])):v.isParentRender?(i.openBlock(),i.createBlock(G,{key:1,render:v.parentRender,data:m.data,node:v.node},null,8,["render","data","node"])):(i.openBlock(),i.createElementBlock(i.Fragment,{key:2},[i.createTextVNode(i.toDisplayString(m.data.title),1)],64))],2),i.createVNode(j,{appear:m.appear},{default:i.withCtx(()=>[m.data.expand?(i.openBlock(),i.createElementBlock("div",Zoe,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(v.children,(ce,Oe)=>(i.openBlock(),i.createBlock(W,{appear:C.appearByClickArrow,key:Oe,data:ce,multiple:m.multiple,"show-checkbox":m.showCheckbox,"children-key":m.childrenKey},null,8,["appear","data","multiple","show-checkbox","children-key"]))),128))])):i.createCommentVNode("",!0)]),_:1},8,["appear"])],32)],2)}var Joe=c(qoe,[["render",Koe]]);const eae="ivu-tree",tae={name:"Tree",mixins:[Ki],components:{TreeNode:Joe,Dropdown:nu,DropdownMenu:ru},emits:["on-select-change","on-check-change","on-contextmenu","on-toggle-expand"],provide(){return{TreeInstance:this}},props:{data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!1},emptyText:{type:String},childrenKey:{type:String,default:"children"},loadData:{type:Function},render:{type:Function},selectNode:{type:Boolean,default:!0},expandNode:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:eae,stateTree:this.data,flatState:[],contextMenuVisible:!1,contextMenuStyles:{top:0,left:0}}},watch:{data:{deep:!0,handler(){this.stateTree=this.data,this.flatState=this.compileFlatState(),this.rebuildTree()}}},computed:{localeEmptyText(){return typeof this.emptyText>"u"?this.t("i.tree.emptyText"):this.emptyText}},methods:{compileFlatState(){let l=0,u=this.childrenKey;const m=[];function k(C,v){C.nodeKey=l++,m[C.nodeKey]={node:C,nodeKey:C.nodeKey},typeof v<"u"&&(m[C.nodeKey].parent=v.nodeKey,m[v.nodeKey][u].push(C.nodeKey)),C[u]&&(m[C.nodeKey][u]=[],C[u].forEach(R=>k(R,C)))}return this.stateTree.forEach(C=>{k(C)}),m},updateTreeUp(l){const u=this.flatState[l].parent;if(typeof u>"u"||this.checkStrictly)return;const m=this.flatState[l].node,k=this.flatState[u].node;m.checked==k.checked&&m.indeterminate==k.indeterminate||(m.checked==!0?(k.checked=k[this.childrenKey].every(C=>C.checked),k.indeterminate=!k.checked):(k.checked=!1,k.indeterminate=k[this.childrenKey].some(C=>C.checked||C.indeterminate)),this.updateTreeUp(u))},rebuildTree(){this.getCheckedNodes().forEach(l=>{this.updateTreeDown(l,{checked:!0});const u=this.flatState[l.nodeKey].parent;if(!u&&u!==0)return;const m=this.flatState[u].node;typeof l.checked<"u"&&l.checked&&m.checked!=l.checked&&this.updateTreeUp(l.nodeKey)})},getSelectedNodes(){return this.flatState.filter(l=>l.node.selected).map(l=>l.node)},getCheckedNodes(){return this.flatState.filter(l=>l.node.checked).map(l=>l.node)},getCheckedAndIndeterminateNodes(){return this.flatState.filter(l=>l.node.checked||l.node.indeterminate).map(l=>l.node)},updateTreeDown(l,u={}){if(!this.checkStrictly){for(let m in u)l[m]=u[m];l[this.childrenKey]&&l[this.childrenKey].forEach(m=>{this.updateTreeDown(m,u)})}},handleSelect(l){if(!this.flatState[l])return;const u=this.flatState[l].node;if(!this.multiple){const m=this.flatState.findIndex(k=>k.node.selected);m>=0&&m!==l&&(this.flatState[m].node.selected=!1)}u.selected=!u.selected,this.$emit("on-select-change",this.getSelectedNodes(),u)},handleCheck({checked:l,nodeKey:u}){if(!this.flatState[u])return;const m=this.flatState[u].node;m.checked=l,m.indeterminate=!1,this.updateTreeUp(u),this.updateTreeDown(m,{checked:l,indeterminate:!1}),this.$emit("on-check-change",this.getCheckedNodes(),m)},handleContextmenu({data:l,event:u}){this.contextMenuVisible&&this.handleClickContextMenuOutside(),i.nextTick(()=>{const m=this.$refs.treeWrap.getBoundingClientRect(),k={left:`${u.clientX-m.left}px`,top:`${u.clientY-m.top}px`};this.contextMenuStyles=k,this.contextMenuVisible=!0,this.$emit("on-contextmenu",l,u,k)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnCheck(l){this.handleCheck(l)},handleOnSelected(l){this.handleSelect(l)},handleToggleExpand(l){this.$emit("on-toggle-expand",l)},handleOnContextmenu(l){this.handleContextmenu(l)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.flatState=this.compileFlatState(),this.rebuildTree()}};function iae(l,u,m,k,C,v){const R=i.resolveComponent("TreeNode"),B=i.resolveComponent("DropdownMenu"),G=i.resolveComponent("Dropdown");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(C.prefixCls),ref:"treeWrap"},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(C.stateTree,(W,j)=>(i.openBlock(),i.createBlock(R,{key:j,data:W,visible:"",multiple:m.multiple,"show-checkbox":m.showCheckbox,"children-key":m.childrenKey},null,8,["data","multiple","show-checkbox","children-key"]))),128)),C.stateTree.length?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass([C.prefixCls+"-empty"])},i.toDisplayString(v.localeEmptyText),3)),i.createElementVNode("div",{class:"ivu-tree-context-menu",style:i.normalizeStyle(C.contextMenuStyles)},[i.createVNode(G,{trigger:"custom",visible:C.contextMenuVisible,transfer:"",onOnClick:v.handleClickDropdownItem,onOnClickoutside:v.handleClickContextMenuOutside},{list:i.withCtx(()=>[i.createVNode(B,null,{default:i.withCtx(()=>[i.renderSlot(l.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var eC=c(tae,[["render",iae]]);const nae={name:"TreeSelect",components:{Select:ds,Tree:eC},emits:["on-change","update:modelValue","on-open-change"],mixins:[mi],props:{modelValue:{type:[String,Number,Array]},data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default(){const l=i.getCurrentInstance().appContext.config.globalProperties;return!l.$VIEWUI||l.$VIEWUI.transfer===""?!1:l.$VIEWUI.transfer}}},data(){let l=this.modelValue;return l===null&&(this.multiple?l=[]:l=""),{currentValue:l,isChangeValueInTree:!1,isValueChangeByTree:!1,isValueNull:!1}},watch:{modelValue(l){if(this.isChangeValueInTree)this.isChangeValueInTree=!1;else{let u=l;u===null&&(this.isValueNull=!0,this.multiple?u=[]:u=""),this.currentValue=u,this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0)}},data(){this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0))}},computed:{valueToArray(){return typeof this.currentValue=="object"?this.currentValue:[this.currentValue]},isCheckboxUsable(){return this.multiple&&this.showCheckbox},transferClassName(){return this.transfer?"ivu-tree-select-transfer":""},classes(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode(l,u){if(this.multiple)l.length?(this.currentValue=l.map(m=>m.value),this.handleUpdateSelectValue(u.value,u.title)):(this.currentValue=[],this.handleUpdateSelectValue("",""));else if(l.length){const m=l[0];this.currentValue=m.value,this.handleUpdateSelectValue(m.value,m.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("update:modelValue",this.currentValue),this.$emit("on-change",this.currentValue),this.handleFormItemChange("change",this.currentValue)},handleUpdateTreeNodes(l,u=!1){l.forEach(m=>{this.valueToArray.indexOf(m.value)>=0?(this.isCheckboxUsable?m.checked=!0:m.selected=!0,this.handleUpdateSelectValue(m.value,m.title)):this.isCheckboxUsable?m.checked=!1:m.selected=!1,m.children&&m.children.length&&this.handleUpdateTreeNodes(m.children)}),u&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue(l,u){l===""?this.$refs.select.reset():(this.isValueChangeByTree=!0,this.$refs.select.onOptionClick({value:l,label:u}))},handleChange(l){this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=l,this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",l),this.$emit("on-change",l),this.handleFormItemChange("change",l),this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0),i.nextTick(()=>{this.isValueChangeByTree=!1}))},handleOpenChange(l){this.$emit("on-open-change",l)}},mounted(){this.handleUpdateTreeNodes(this.data,!0)}};function rae(l,u,m,k,C,v){const R=i.resolveComponent("Tree"),B=i.resolveComponent("Select");return i.openBlock(),i.createBlock(B,i.mergeProps({ref:"select"},l.$attrs,{multiple:m.multiple,class:["ivu-tree-select",v.classes],"transfer-class-name":v.transferClassName,onOnChange:v.handleChange,onOnOpenChange:v.handleOpenChange,hideNotFound:"",transfer:m.transfer}),{default:i.withCtx(()=>[i.createVNode(R,{data:m.data,multiple:m.multiple,onOnSelectChange:v.handleSelectNode,onOnCheckChange:v.handleSelectNode,"check-strictly":"","show-checkbox":m.multiple&&m.showCheckbox,"check-directly":"","load-data":m.loadData},null,8,["data","multiple","onOnSelectChange","onOnCheckChange","show-checkbox","load-data"])]),_:1},16,["multiple","class","transfer-class-name","onOnChange","onOnOpenChange","transfer"])}var sI=c(nae,[["render",rae]]);const sae={name:"Typography"},oae={class:"ivu-typography"};function aae(l,u,m,k,C,v){return i.openBlock(),i.createElementBlock("article",oae,[i.renderSlot(l.$slots,"default")])}var oI=c(sae,[["render",aae]]);const tC="ivu-upload",lae={name:"UploadList",components:{Icon:S,iProgress:v1},emits:["on-file-click","on-file-preview","on-file-remove"],props:{files:{type:Array,default(){return[]}}},data(){return{prefixCls:tC}},methods:{fileCls(l){return[`${tC}-list-file`,{[`${tC}-list-file-finish`]:l.status==="finished"}]},handleClick(l){this.$emit("on-file-click",l)},handlePreview(l){this.$emit("on-file-preview",l)},handleRemove(l){this.$emit("on-file-remove",l)},format(l){const u=l.name.split(".").pop().toLocaleLowerCase()||"";let m="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(u)>-1&&(m="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(u)>-1&&(m="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(u)>-1&&(m="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(u)>-1&&(m="md-document"),["numbers","csv","xls","xlsx"].indexOf(u)>-1&&(m="ios-stats"),["keynote","ppt","pptx"].indexOf(u)>-1&&(m="ios-videocam"),m},parsePercentage(l){return parseInt(l,10)}}},cae=["onClick"],hae=["onClick"];function uae(l,u,m,k,C,v){const R=i.resolveComponent("Icon"),B=i.resolveComponent("i-progress");return i.openBlock(),i.createElementBlock("ul",{class:i.normalizeClass([C.prefixCls+"-list"])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(m.files,(G,W)=>(i.openBlock(),i.createElementBlock("li",{key:W,class:i.normalizeClass(v.fileCls(G)),onClick:j=>v.handleClick(G)},[i.createElementVNode("span",{onClick:j=>v.handlePreview(G)},[i.createVNode(R,{type:v.format(G)},null,8,["type"]),i.createTextVNode(" "+i.toDisplayString(G.name),1)],8,hae),i.withDirectives(i.createVNode(R,{type:"ios-close",class:i.normalizeClass([C.prefixCls+"-list-remove"]),onClick:j=>v.handleRemove(G)},null,8,["class","onClick"]),[[i.vShow,G.status==="finished"]]),i.createVNode(i.Transition,{name:"fade"},{default:i.withCtx(()=>[G.showProgress?(i.openBlock(),i.createBlock(B,{key:0,"stroke-width":2,percent:v.parsePercentage(G.percentage),status:G.status==="finished"&&G.showProgress?"success":"normal"},null,8,["percent","status"])):i.createCommentVNode("",!0)]),_:2},1024)],10,cae))),128))],2)}var dae=c(lae,[["render",uae]]);function fae(l,u,m){const k=`fail to post ${l} ${m.status}'`,C=new Error(k);return C.status=m.status,C.method="post",C.url=l,C}function aI(l){const u=l.responseText||l.response;if(!u)return u;try{return JSON.parse(u)}catch{return u}}function pae(l){if(typeof XMLHttpRequest>"u")return;const u=new XMLHttpRequest,m=l.action;u.upload&&(u.upload.onprogress=function(v){v.total>0&&(v.percent=v.loaded/v.total*100),l.onProgress(v)});const k=new FormData;l.data&&Object.keys(l.data).map(v=>{k.append(v,l.data[v])}),k.append(l.filename,l.file),u.onerror=function(v){l.onError(v)},u.onload=function(){if(u.status<200||u.status>=300)return l.onError(fae(m,l,u),aI(u));l.onSuccess(aI(u))},u.open("post",m,!0),l.withCredentials&&"withCredentials"in u&&(u.withCredentials=!0);const C=l.headers||{};for(let v in C)C.hasOwnProperty(v)&&C[v]!==null&&u.setRequestHeader(v,C[v]);u.send(k)}const Hm="ivu-upload",mae={name:"Upload",mixins:[mi],components:{UploadList:dae},props:{action:{type:String,required:!0},headers:{type:Object,default(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator(l){return _(l,["select","drag"])},default:"select"},format:{type:Array,default(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default(){return{}}},onSuccess:{type:Function,default(){return{}}},onError:{type:Function,default(){return{}}},onRemove:{type:Function,default(){return{}}},onPreview:{type:Function,default(){return{}}},onExceededSize:{type:Function,default(){return{}}},onFormatError:{type:Function,default(){return{}}},defaultFileList:{type:Array,default(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},webkitdirectory:{type:Boolean,default:!1}},data(){return{prefixCls:Hm,dragOver:!1,fileList:[],tempIndex:1}},computed:{classes(){return[`${Hm}`,{[`${Hm}-select`]:this.type==="select",[`${Hm}-drag`]:this.type==="drag",[`${Hm}-dragOver`]:this.type==="drag"&&this.dragOver}]}},methods:{handleClick(){this.itemDisabled||this.$refs.input.click()},handleChange(l){const u=l.target.files;!u||(this.uploadFiles(u),this.$refs.input.value=null)},onDrop(l){this.dragOver=!1,!this.itemDisabled&&this.uploadFiles(l.dataTransfer.files)},handlePaste(l){this.itemDisabled||this.paste&&this.uploadFiles(l.clipboardData.files)},uploadFiles(l){let u=Array.prototype.slice.call(l);this.multiple||(u=u.slice(0,1)),u.length!==0&&u.forEach(m=>{this.upload(m)})},upload(l){if(!this.beforeUpload)return this.post(l);const u=this.beforeUpload(l);u&&u.then?u.then(m=>{Object.prototype.toString.call(m)==="[object File]"?this.post(m):this.post(l)},()=>{}):u!==!1&&this.post(l)},post(l){if(this.format.length){const u=l.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(m=>m.toLocaleLowerCase()===u))return this.onFormatError(l,this.fileList),!1}if(this.maxSize&&l.size>this.maxSize*1024)return this.onExceededSize(l,this.fileList),!1;this.handleStart(l),new FormData().append(this.name,l),pae({headers:this.headers,withCredentials:this.withCredentials,file:l,data:this.data,filename:this.name,action:this.action,onProgress:u=>{this.handleProgress(u,l)},onSuccess:u=>{this.handleSuccess(u,l)},onError:(u,m)=>{this.handleError(u,m,l)}})},handleStart(l){l.uid=Date.now()+this.tempIndex++;const u={status:"uploading",name:l.name,size:l.size,percentage:0,uid:l.uid,showProgress:!0};this.fileList.push(u)},getFile(l){const u=this.fileList;let m;return u.every(k=>(m=l.uid===k.uid?k:null,!m)),m},handleProgress(l,u){const m=this.getFile(u);this.onProgress(l,m,this.fileList),m.percentage=l.percent||0},handleSuccess(l,u){const m=this.getFile(u);m&&(m.status="finished",m.response=l,this.onSuccess(l,m,this.fileList),this.handleFormItemChange("change",m),setTimeout(()=>{m.showProgress=!1},1e3))},handleError(l,u,m){const k=this.getFile(m),C=this.fileList;k.status="fail",C.splice(C.indexOf(k),1),this.onError(l,u,m)},handleRemove(l){const u=this.fileList;u.splice(u.indexOf(l),1),this.onRemove(l,u)},handlePreview(l){l.status==="finished"&&this.onPreview(l)},clearFiles(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler(l){this.fileList=l.map(u=>(u.status="finished",u.percentage=100,u.uid=Date.now()+this.tempIndex++,u))}}}},gae=["multiple","webkitdirectory","accept"];function yae(l,u,m,k,C,v){const R=i.resolveComponent("upload-list");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([C.prefixCls])},[i.createElementVNode("div",{class:i.normalizeClass(v.classes),onClick:u[1]||(u[1]=(...B)=>v.handleClick&&v.handleClick(...B)),onDrop:u[2]||(u[2]=i.withModifiers((...B)=>v.onDrop&&v.onDrop(...B),["prevent"])),onPaste:u[3]||(u[3]=(...B)=>v.handlePaste&&v.handlePaste(...B)),onDragover:u[4]||(u[4]=i.withModifiers(B=>C.dragOver=!0,["prevent"])),onDragleave:u[5]||(u[5]=i.withModifiers(B=>C.dragOver=!1,["prevent"]))},[i.createElementVNode("input",{ref:"input",type:"file",class:i.normalizeClass([C.prefixCls+"-input"]),onChange:u[0]||(u[0]=(...B)=>v.handleChange&&v.handleChange(...B)),multiple:m.multiple,webkitdirectory:m.webkitdirectory,accept:m.accept},null,42,gae),i.renderSlot(l.$slots,"default")],34),i.renderSlot(l.$slots,"tip"),m.showUploadList?(i.openBlock(),i.createBlock(R,{key:0,files:C.fileList,onOnFileRemove:v.handleRemove,onOnFilePreview:v.handlePreview},null,8,["files","onOnFileRemove","onOnFilePreview"])):i.createCommentVNode("",!0)],2)}var lI=c(mae,[["render",yae]]);const cI={name:"UserName",mixins:[xm],data(){return{className:"ivu-login-username",prefix:"ios-contact-outline",placeholder:"请输入用户名",type:"text",validateMessage:"请输入用户名！"}}},vae={name:"WordCount",components:{Circle:zv},props:{value:{type:[String,Number],default:""},total:{type:Number,default:0},hideTotal:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},size:{type:[String,Number],default:14}},computed:{isOverflow(){return this.value.length>this.total},percent(){let l=this.value.length/this.total*100;return l>100&&(l=100),l},strokeColor(){return this.isOverflow?"#ed4014":"#2d8cf0"}}},bae={class:"ivu-word-count"},xae={key:0,class:"ivu-word-count-prefix"},Oae={key:1,class:"ivu-word-count-prefix ivu-word-count-overflow"},wae={key:3,class:"ivu-word-count-overflow"},_ae={key:5,class:"ivu-word-count-suffix"},Sae={key:6,class:"ivu-word-count-suffix ivu-word-count-overflow"};function Cae(l,u,m,k,C,v){const R=i.resolveComponent("Circle");return i.openBlock(),i.createElementBlock("div",bae,[m.circle?(i.openBlock(),i.createBlock(R,{key:0,percent:v.percent,size:m.size,"stroke-color":v.strokeColor},null,8,["percent","size","stroke-color"])):(i.openBlock(),i.createElementBlock(i.Fragment,{key:1},[v.isOverflow?(i.openBlock(),i.createElementBlock("span",Oae,[i.renderSlot(l.$slots,"prefix-overflow")])):(i.openBlock(),i.createElementBlock("span",xae,[i.renderSlot(l.$slots,"prefix")])),!v.isOverflow||!m.overflow?(i.openBlock(),i.createElementBlock("span",{key:2,class:i.normalizeClass({"ivu-word-count-overflow":v.isOverflow})},[i.renderSlot(l.$slots,"length",{length:m.value.length},()=>[i.createTextVNode(i.toDisplayString(m.value.length),1)])],2)):(i.openBlock(),i.createElementBlock("span",wae,i.toDisplayString(m.value.length-m.total),1)),m.hideTotal?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock(i.Fragment,{key:4},[i.renderSlot(l.$slots,"separator",{},()=>[i.createTextVNode(" / ")]),i.renderSlot(l.$slots,"total",{total:m.total},()=>[i.createTextVNode(i.toDisplayString(m.total),1)])],64)),v.isOverflow?(i.openBlock(),i.createElementBlock("span",Sae,[i.renderSlot(l.$slots,"suffix-overflow")])):(i.openBlock(),i.createElementBlock("span",_ae,[i.renderSlot(l.$slots,"suffix")]))],64))])}var hI=c(vae,[["render",Cae]]),uI=Object.freeze(Object.defineProperty({__proto__:null,Affix:y,Alert:J,Anchor:X,AnchorLink:le,Auth:Ee,AutoComplete:IA,Avatar:pm,AvatarList:$A,BackTop:VA,Badge:Nv,Breadcrumb:Y_,BreadcrumbItem:j_,Button:fs,ButtonGroup:q_,Calendar:GA,Captcha:e4,Card:i4,Carousel:n4,CarouselItem:r4,Cascader:s4,Cell:o4,CellGroup:a4,Checkbox:Ld,CheckboxGroup:oS,Circle:zv,City:u4,Col:Ba,Collapse:f4,ColorPicker:C4,Content:cS,Copy:Yv,CountDown:R4,CountUp:I4,DatePicker:u5,Description:d5,DescriptionList:f5,Divider:t1,Drawer:p5,Dropdown:nu,DropdownItem:m5,DropdownMenu:ru,Ellipsis:g5,Email:y5,Exception:v5,Footer:SS,FooterToolbar:b5,Form:s1,FormItem:Fv,GlobalFooter:x5,Grid:I5,GridItem:D5,Header:ES,Icon:S,Image:N5,ImagePreview:Ec,Input:Do,InputNumber:PS,Layout:V5,Link:F5,List:Q5,ListItem:H5,ListItemMeta:G5,LoadingBar:RS,Login:eR,Menu:DS,MenuGroup:tR,MenuItem:iR,Message:Mm,Mobile:nR,Modal:$o,Notice:$S,Notification:pR,NotificationItem:yR,NotificationTab:vR,NumberInfo:bR,Numeral:OR,Option:In,OptionGroup:wR,Page:_R,PageHeader:SR,Panel:CR,Paragraph:kR,Password:TR,Poptip:FS,Progress:v1,Radio:Lv,RadioGroup:Vv,Rate:MR,Result:ER,Row:wc,Scroll:AR,ScrollIntoView:XS,ScrollTop:WS,Select:ds,Sider:$R,Skeleton:VR,SkeletonItem:QS,Slider:LR,Space:BR,Spin:lo,Split:UR,Step:zR,Steps:XR,Submenu:WR,Submit:QR,Switch:GS,Table:x1,TablePaste:GR,TabPane:y1,Tabs:m1,Tag:Bd,TagSelect:YR,TagSelectOption:jR,Text:qR,Time:g1,Timeline:KR,TimelineItem:JR,TimePicker:eI,Title:tI,Tooltip:Ol,Transfer:rI,Tree:eC,TreeSelect:sI,Trend:LS,Typography:oI,Upload:lI,UserName:cI,WordCount:hI},Symbol.toStringTag,{value:"Module"})),kae={mounted(l,u){u.value&&(K(l,"ivu-line-clamp"),l.style["-webkit-line-clamp"]=u.value)},updated(l,u){u.value&&(l.style["-webkit-line-clamp"]=u.value)},unmounted(l){ie(l,"ivu-line-clamp"),l.style["-webkit-line-clamp"]=null}},Tae={mounted(l,u){function m(k){u.value(k)}l.__resizeHandler__=m,l.__observer__=Qd(),l.__observer__.listenTo(l,m)},updated(){},unmounted(l,u){l.__observer__.removeListener(l,l.__resizeHandler__),delete l.__resizeHandler__,delete l.__observer__}};function Dc(l){return String(l).endsWith("%")?"":"px"}var Nc={display:{mounted(l,u){u.value&&(l.style.display=u.value)},updated(l,u){u.value&&(l.style.display=u.value)},unmounted(l){l.style.display=null}},width:{mounted(l,u){u.value&&(l.style.width=u.value+Dc(u.value))},updated(l,u){u.value&&(l.style.width=u.value+Dc(u.value))},unmounted(l){l.style.width=null}},height:{mounted(l,u){u.value&&(l.style.height=u.value+Dc(u.value))},updated(l,u){u.value&&(l.style.height=u.value+Dc(u.value))},unmounted(l){l.style.height=null}},margin:{mounted(l,u){u.value&&(l.style.margin=u.value+Dc(u.value))},updated(l,u){u.value&&(l.style.margin=u.value+Dc(u.value))},unmounted(l){l.style.margin=null}},padding:{mounted(l,u){u.value&&(l.style.padding=u.value+Dc(u.value))},updated(l,u){u.value&&(l.style.padding=u.value+Dc(u.value))},unmounted(l){l.style.padding=null}},font:{mounted(l,u){u&&u.value&&(l.style.fontSize=`${u.value}px`)},updated(l,u){u&&u.value&&(l.style.fontSize=`${u.value}px`)},unmounted(l){l.style.fontSize=null}},color:{mounted(l,u){u.value&&(l.style.color=u.value)},updated(l,u){u.value&&(l.style.color=u.value)},unmounted(l){l.style.color=null}},bgColor:{mounted(l,u){u.value&&(l.style.backgroundColor=u.value)},updated(l,u){u.value&&(l.style.backgroundColor=u.value)},unmounted(l){l.style.backgroundColor=null}}},Mae={name:"view-ui-plus",version:"1.3.17",title:"ViewUIPlus",description:"A high quality UI components Library with Vue.js 3",homepage:"http://www.iviewui.com",keywords:["iview","vue","viewui","viewuiplus","vue.js","component","components","ui","framework"],main:"dist/viewuiplus.min.js",typings:"types/index.d.ts",files:["dist","src","types"],scripts:{dev:"vue-cli-service serve",build:"npm run build:prod && npm run build:style && npm run build:lang","build:style":"gulp --gulpfile build/build-style.js","build:prod":"vite build","build:lang":"vite build --config build/vite.lang.config.js",lint:"vue-cli-service lint --fix"},repository:{type:"git",url:"https://github.com/view-design/ViewUIPlus"},author:"Aresn",license:"MIT",bugs:{url:"https://github.com/view-design/ViewUIPlus/issues"},dependencies:{"async-validator":"^3.3.0","countup.js":"^1.9.3",dayjs:"^1.11.0",deepmerge:"^2.2.1","element-resize-detector":"^1.2.0","js-calendar":"^1.2.3","lodash.chunk":"^4.2.0","lodash.throttle":"^4.1.1",numeral:"^2.0.6","popper.js":"^1.14.6",select:"^1.1.2",tinycolor2:"^1.4.1","v-click-outside-x":"^3.7.1"},devDependencies:{"@vitejs/plugin-vue":"^1.9.3","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-eslint":"~4.5.0","@vue/cli-service":"~4.5.0","@vue/compiler-sfc":"^3.0.0","babel-eslint":"^10.1.0","babel-plugin-import":"^1.13.3",chai:"^4.2.0","copy-webpack-plugin":"^6.4.1","cross-env":"^5.2.0",eslint:"^6.7.2","eslint-plugin-vue":"^7.0.0-0",gulp:"^4.0.2","gulp-autoprefixer":"^8.0.0","gulp-clean-css":"^4.3.0","gulp-less":"^4.0.1","gulp-rename":"^2.0.0",karma:"^2.0.5","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-sinon-chai":"^1.3.3","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"^0.0.32","karma-webpack":"^2.0.13",less:"^2.7.3","less-loader":"^4.1.0","lint-staged":"^10.5.4",lolex:"^2.7.5",mocha:"^5.0.4",sinon:"^4.4.2","sinon-chai":"^3.3.0","style-loader":"^0.20.2",tslint:"^5.14.0",typescript:"^3.3.4000","uglifyjs-webpack-plugin":"^1.3.0","url-loader":"^1.1.2",vite:"^2.6.4",vue:"^3.2.47","vue-hot-reload-api":"^2.3.4","vue-html-loader":"^1.2.4","vue-loader":"^17.0.0","vue-router":"^4.0.14","vue-style-loader":"^4.1.3","vue-template-compiler":"^2.6.14"}};const dI={display:Nc.display,width:Nc.width,height:Nc.height,margin:Nc.margin,padding:Nc.padding,font:Nc.font,color:Nc.color,"bg-color":Nc.bgColor,resize:Tae,"line-clamp":kae},fI={...uI,iButton:fs,iCircle:zv,iCol:Ba,iContent:cS,iForm:s1,iFooter:SS,iHeader:ES,iInput:Do,iMenu:DS,iOption:In,iProgress:v1,iSelect:ds,iSwitch:GS,iTable:x1,iTime:g1},iC=function(l,u={}){iC.installed||(u.locale&&bc.use(u.locale),u.i18n&&bc.i18n(u.i18n),Object.keys(fI).forEach(m=>{l.component(m,fI[m])}),Object.keys(dI).forEach(m=>{l.directive(m,dI[m])}),l.config.globalProperties.$VIEWUI={size:u.size||"",capture:"capture"in u?u.capture:!0,transfer:"transfer"in u?u.transfer:"",cell:{arrow:u.cell&&u.cell.arrow?u.cell.arrow:"",customArrow:u.cell&&u.cell.customArrow?u.cell.customArrow:"",arrowSize:u.cell&&u.cell.arrowSize?u.cell.arrowSize:""},menu:{arrow:u.menu&&u.menu.arrow?u.menu.arrow:"",customArrow:u.menu&&u.menu.customArrow?u.menu.customArrow:"",arrowSize:u.menu&&u.menu.arrowSize?u.menu.arrowSize:""},modal:{maskClosable:u.modal&&"maskClosable"in u.modal?u.modal.maskClosable:""},tabs:{closeIcon:u.tabs&&u.tabs.closeIcon?u.tabs.closeIcon:"",customCloseIcon:u.tabs&&u.tabs.customCloseIcon?u.tabs.customCloseIcon:"",closeIconSize:u.tabs&&u.tabs.closeIconSize?u.tabs.closeIconSize:""},select:{arrow:u.select&&u.select.arrow?u.select.arrow:"",customArrow:u.select&&u.select.customArrow?u.select.customArrow:"",arrowSize:u.select&&u.select.arrowSize?u.select.arrowSize:""},colorPicker:{arrow:u.colorPicker&&u.colorPicker.arrow?u.colorPicker.arrow:"",customArrow:u.colorPicker&&u.colorPicker.customArrow?u.colorPicker.customArrow:"",arrowSize:u.colorPicker&&u.colorPicker.arrowSize?u.colorPicker.arrowSize:""},cascader:{arrow:u.cascader&&u.cascader.arrow?u.cascader.arrow:"",customArrow:u.cascader&&u.cascader.customArrow?u.cascader.customArrow:"",arrowSize:u.cascader&&u.cascader.arrowSize?u.cascader.arrowSize:"",itemArrow:u.cascader&&u.cascader.itemArrow?u.cascader.itemArrow:"",customItemArrow:u.cascader&&u.cascader.customItemArrow?u.cascader.customItemArrow:"",itemArrowSize:u.cascader&&u.cascader.itemArrowSize?u.cascader.itemArrowSize:""},tree:{arrow:u.tree&&u.tree.arrow?u.tree.arrow:"",customArrow:u.tree&&u.tree.customArrow?u.tree.customArrow:"",arrowSize:u.tree&&u.tree.arrowSize?u.tree.arrowSize:""},datePicker:{icon:u.datePicker&&u.datePicker.icon?u.datePicker.icon:"",customIcon:u.datePicker&&u.datePicker.customIcon?u.datePicker.customIcon:"",iconSize:u.datePicker&&u.datePicker.iconSize?u.datePicker.iconSize:""},timePicker:{icon:u.timePicker&&u.timePicker.icon?u.timePicker.icon:"",customIcon:u.timePicker&&u.timePicker.customIcon?u.timePicker.customIcon:"",iconSize:u.timePicker&&u.timePicker.iconSize?u.timePicker.iconSize:""},typography:{copyConfig:u.typography&&u.typography.copyConfig?u.typography.copyConfig:"",editConfig:u.typography&&u.typography.editConfig?u.typography.editConfig:"",ellipsisConfig:u.typography&&u.typography.ellipsisConfig?u.typography.ellipsisConfig:""},space:{size:u.space&&u.space.size?u.space.size:""},image:{toolbar:u.image&&u.image.toolbar?u.image.toolbar:""}},l.config.globalProperties.$Spin=lo,l.config.globalProperties.$Loading=RS,l.config.globalProperties.$Message=Mm,l.config.globalProperties.$Notice=$S,l.config.globalProperties.$Modal=$o,l.config.globalProperties.$ImagePreview=Ec,l.config.globalProperties.$Copy=Yv,l.config.globalProperties.$ScrollIntoView=XS,l.config.globalProperties.$ScrollTop=WS,l.config.globalProperties.$Date=ro)},pI=Mae.version,mI=bc.use,gI=bc.i18n,yI=l=>{const u=window["viewuiplus/locale"].default;l===u.i.locale?bc.use(u):console.log(`The ${l} language pack is not loaded.`)},Eae={version:pI,locale:mI,i18n:gI,install:iC,lang:yI,...uI};n.Affix=y,n.Alert=J,n.Anchor=X,n.AnchorLink=le,n.Auth=Ee,n.AutoComplete=IA,n.Avatar=pm,n.AvatarList=$A,n.BackTop=VA,n.Badge=Nv,n.Breadcrumb=Y_,n.BreadcrumbItem=j_,n.Button=fs,n.ButtonGroup=q_,n.Calendar=GA,n.Captcha=e4,n.Card=i4,n.Carousel=n4,n.CarouselItem=r4,n.Cascader=s4,n.Cell=o4,n.CellGroup=a4,n.Checkbox=Ld,n.CheckboxGroup=oS,n.Circle=zv,n.City=u4,n.Col=Ba,n.Collapse=f4,n.ColorPicker=C4,n.Content=cS,n.Copy=Yv,n.CountDown=R4,n.CountUp=I4,n.DatePicker=u5,n.Description=d5,n.DescriptionList=f5,n.Divider=t1,n.Drawer=p5,n.Dropdown=nu,n.DropdownItem=m5,n.DropdownMenu=ru,n.Ellipsis=g5,n.Email=y5,n.Exception=v5,n.Footer=SS,n.FooterToolbar=b5,n.Form=s1,n.FormItem=Fv,n.GlobalFooter=x5,n.Grid=I5,n.GridItem=D5,n.Header=ES,n.Icon=S,n.Image=N5,n.ImagePreview=Ec,n.Input=Do,n.InputNumber=PS,n.Layout=V5,n.Link=F5,n.List=Q5,n.ListItem=H5,n.ListItemMeta=G5,n.LoadingBar=RS,n.Login=eR,n.Menu=DS,n.MenuGroup=tR,n.MenuItem=iR,n.Message=Mm,n.Mobile=nR,n.Modal=$o,n.Notice=$S,n.Notification=pR,n.NotificationItem=yR,n.NotificationTab=vR,n.NumberInfo=bR,n.Numeral=OR,n.Option=In,n.OptionGroup=wR,n.Page=_R,n.PageHeader=SR,n.Panel=CR,n.Paragraph=kR,n.Password=TR,n.Poptip=FS,n.Progress=v1,n.Radio=Lv,n.RadioGroup=Vv,n.Rate=MR,n.Result=ER,n.Row=wc,n.Scroll=AR,n.ScrollIntoView=XS,n.ScrollTop=WS,n.Select=ds,n.Sider=$R,n.Skeleton=VR,n.SkeletonItem=QS,n.Slider=LR,n.Space=BR,n.Spin=lo,n.Split=UR,n.Step=zR,n.Steps=XR,n.Submenu=WR,n.Submit=QR,n.Switch=GS,n.TabPane=y1,n.Table=x1,n.TablePaste=GR,n.Tabs=m1,n.Tag=Bd,n.TagSelect=YR,n.TagSelectOption=jR,n.Text=qR,n.Time=g1,n.TimePicker=eI,n.Timeline=KR,n.TimelineItem=JR,n.Title=tI,n.Tooltip=Ol,n.Transfer=rI,n.Tree=eC,n.TreeSelect=sI,n.Trend=LS,n.Typography=oI,n.Upload=lI,n.UserName=cI,n.WordCount=hI,n.default=Eae,n.i18n=gI,n.install=iC,n.lang=yI,n.locale=mI,n.version=pI,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(TE,TE.exports);var eDe=TE.exports;const tDe=nm(eDe);var z_=$U(J6e);z_.use(tDe);z_.use(_1e);z_.use(W7);z_.mount("#app");export{iH as $,DH as A,sr as B,Yr as C,Qn as D,Yt as E,JQ as F,D_ as G,j4e as H,fl as I,HL as J,Hy as K,b5e as L,Gi as M,P5e as N,_r as O,Kn as P,wr as Q,fE as R,M5e as S,yx as T,cE as U,Y5e as V,YL as W,qL as X,K4e as Y,mk as Z,cr as _,Na as a,NH as a0,$i as a1,Wi as a2,J5e as a3,U_ as a4,LRe as a5,URe as a6,QRe as a7,GRe as a8,YRe as a9,Wp as aa,Ky as ab,VIe as ac,ZH as ad,B6e as ae,oB as af,rB as ag,x4e as ah,AB as ai,XIe as aj,fw as ak,zn as al,w4e as am,MB as an,CE as ao,EB as ap,hw as aq,eG as ar,pRe as b,Sh as c,nO as d,Es as e,sB as f,uRe as g,_A as h,AH as i,dH as j,xl as k,kH as l,TB as m,VRe as n,BRe as o,XRe as p,FH as q,N4e as r,HRe as s,N_ as t,Vi as u,wH as v,hr as w,O4e as x,qRe as y,nc as z};
