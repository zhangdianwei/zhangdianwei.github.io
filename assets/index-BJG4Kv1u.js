var _te=Object.defineProperty;var Ste=(i,e,n)=>e in i?_te(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Fv=(i,e,n)=>(Ste(i,typeof e!="symbol"?e+"":e,n),n);function Cte(i,e){for(var n=0;n<e.length;n++){const t=e[n];if(typeof t!="string"&&!Array.isArray(t)){for(const r in t)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(t,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>t[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function sO(i,e){const n=new Set(i.split(","));return t=>n.has(t)}const jn={},Ld=[],Ss=()=>{},kte=()=>!1,m0=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),ik=i=>i.startsWith("onUpdate:"),vi=Object.assign,rk=(i,e)=>{const n=i.indexOf(e);n>-1&&i.splice(n,1)},Tte=Object.prototype.hasOwnProperty,Nn=(i,e)=>Tte.call(i,e),Pt=Array.isArray,Bd=i=>Nf(i)==="[object Map]",Su=i=>Nf(i)==="[object Set]",$A=i=>Nf(i)==="[object Date]",Mte=i=>Nf(i)==="[object RegExp]",Zt=i=>typeof i=="function",_i=i=>typeof i=="string",vl=i=>typeof i=="symbol",ei=i=>i!==null&&typeof i=="object",sk=i=>(ei(i)||Zt(i))&&Zt(i.then)&&Zt(i.catch),ZD=Object.prototype.toString,Nf=i=>ZD.call(i),Ete=i=>Nf(i).slice(8,-1),KD=i=>Nf(i)==="[object Object]",ok=i=>_i(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Ud=sO(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oO=i=>{const e=Object.create(null);return n=>e[n]||(e[n]=i(n))},Pte=/-(\w)/g,ns=oO(i=>i.replace(Pte,(e,n)=>n?n.toUpperCase():"")),Ate=/\B([A-Z])/g,qs=oO(i=>i.replace(Ate,"-$1").toLowerCase()),g0=oO(i=>i.charAt(0).toUpperCase()+i.slice(1)),sg=oO(i=>i?`on${g0(i)}`:""),jo=(i,e)=>!Object.is(i,e),zd=(i,e)=>{for(let n=0;n<i.length;n++)i[n](e)},JD=(i,e,n,t=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:t,value:n})},tb=i=>{const e=parseFloat(i);return isNaN(e)?i:e},nb=i=>{const e=_i(i)?Number(i):NaN;return isNaN(e)?i:e};let VA;const eN=()=>VA||(VA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Rte="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",Ite=sO(Rte);function Gc(i){if(Pt(i)){const e={};for(let n=0;n<i.length;n++){const t=i[n],r=_i(t)?Vte(t):Gc(t);if(r)for(const s in r)e[s]=r[s]}return e}else if(_i(i)||ei(i))return i}const Dte=/;(?![^(]*\))/g,Nte=/:([^]+)/,$te=/\/\*[^]*?\*\//g;function Vte(i){const e={};return i.replace($te,"").split(Dte).forEach(n=>{if(n){const t=n.split(Nte);t.length>1&&(e[t[0].trim()]=t[1].trim())}}),e}function $f(i){let e="";if(_i(i))e=i;else if(Pt(i))for(let n=0;n<i.length;n++){const t=$f(i[n]);t&&(e+=t+" ")}else if(ei(i))for(const n in i)i[n]&&(e+=n+" ");return e.trim()}function Lte(i){if(!i)return null;let{class:e,style:n}=i;return e&&!_i(e)&&(i.class=$f(e)),n&&(i.style=Gc(n)),i}const Bte="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ute=sO(Bte);function tN(i){return!!i||i===""}function zte(i,e){if(i.length!==e.length)return!1;let n=!0;for(let t=0;n&&t<i.length;t++)n=Dc(i[t],e[t]);return n}function Dc(i,e){if(i===e)return!0;let n=$A(i),t=$A(e);if(n||t)return n&&t?i.getTime()===e.getTime():!1;if(n=vl(i),t=vl(e),n||t)return i===e;if(n=Pt(i),t=Pt(e),n||t)return n&&t?zte(i,e):!1;if(n=ei(i),t=ei(e),n||t){if(!n||!t)return!1;const r=Object.keys(i).length,s=Object.keys(e).length;if(r!==s)return!1;for(const a in i){const l=i.hasOwnProperty(a),h=e.hasOwnProperty(a);if(l&&!h||!l&&h||!Dc(i[a],e[a]))return!1}}return String(i)===String(e)}function aO(i,e){return i.findIndex(n=>Dc(n,e))}const af=i=>_i(i)?i:i==null?"":Pt(i)||ei(i)&&(i.toString===ZD||!Zt(i.toString))?JSON.stringify(i,nN,2):String(i),nN=(i,e)=>e&&e.__v_isRef?nN(i,e.value):Bd(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[t,r],s)=>(n[Bw(t,s)+" =>"]=r,n),{})}:Su(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Bw(n))}:vl(e)?Bw(e):ei(e)&&!Pt(e)&&!KD(e)?String(e):e,Bw=(i,e="")=>{var n;return vl(i)?`Symbol(${(n=i.description)!=null?n:e})`:i};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hs;class ak{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Hs,!e&&Hs&&(this.index=(Hs.scopes||(Hs.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Hs;try{return Hs=this,e()}finally{Hs=n}}}on(){Hs=this}off(){Hs=this.parent}stop(e){if(this._active){let n,t;for(n=0,t=this.effects.length;n<t;n++)this.effects[n].stop();for(n=0,t=this.cleanups.length;n<t;n++)this.cleanups[n]();if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Fte(i){return new ak(i)}function iN(i,e=Hs){e&&e.active&&e.effects.push(i)}function lO(){return Hs}function lk(i){Hs&&Hs.cleanups.push(i)}let Zh;class lf{constructor(e,n,t,r){this.fn=e,this.trigger=n,this.scheduler=t,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,iN(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Yc();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Xte(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),jc()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ec,n=Zh;try{return Ec=!0,Zh=this,this._runnings++,LA(this),this.fn()}finally{BA(this),this._runnings--,Zh=n,Ec=e}}stop(){this.active&&(LA(this),BA(this),this.onStop&&this.onStop(),this.active=!1)}}function Xte(i){return i.value}function LA(i){i._trackId++,i._depsLength=0}function BA(i){if(i.deps.length>i._depsLength){for(let e=i._depsLength;e<i.deps.length;e++)rN(i.deps[e],i);i.deps.length=i._depsLength}}function rN(i,e){const n=i.get(e);n!==void 0&&e._trackId!==n&&(i.delete(e),i.size===0&&i.cleanup())}function Wte(i,e){i.effect instanceof lf&&(i=i.effect.fn);const n=new lf(i,Ss,()=>{n.dirty&&n.run()});e&&(vi(n,e),e.scope&&iN(n,e.scope)),(!e||!e.lazy)&&n.run();const t=n.run.bind(n);return t.effect=n,t}function Qte(i){i.effect.stop()}let Ec=!0,BS=0;const sN=[];function Yc(){sN.push(Ec),Ec=!1}function jc(){const i=sN.pop();Ec=i===void 0?!0:i}function ck(){BS++}function hk(){for(BS--;!BS&&US.length;)US.shift()()}function oN(i,e,n){if(e.get(i)!==i._trackId){e.set(i,i._trackId);const t=i.deps[i._depsLength];t!==e?(t&&rN(t,i),i.deps[i._depsLength++]=e):i._depsLength++}}const US=[];function aN(i,e,n){ck();for(const t of i.keys()){let r;t._dirtyLevel<e&&(r??(r=i.get(t)===t._trackId))&&(t._shouldSchedule||(t._shouldSchedule=t._dirtyLevel===0),t._dirtyLevel=e),t._shouldSchedule&&(r??(r=i.get(t)===t._trackId))&&(t.trigger(),(!t._runnings||t.allowRecurse)&&t._dirtyLevel!==2&&(t._shouldSchedule=!1,t.scheduler&&US.push(t.scheduler)))}hk()}const lN=(i,e)=>{const n=new Map;return n.cleanup=i,n.computed=e,n},ib=new WeakMap,Kh=Symbol(""),zS=Symbol("");function Ps(i,e,n){if(Ec&&Zh){let t=ib.get(i);t||ib.set(i,t=new Map);let r=t.get(n);r||t.set(n,r=lN(()=>t.delete(n))),oN(Zh,r)}}function hl(i,e,n,t,r,s){const a=ib.get(i);if(!a)return;let l=[];if(e==="clear")l=[...a.values()];else if(n==="length"&&Pt(i)){const h=Number(t);a.forEach((u,f)=>{(f==="length"||!vl(f)&&f>=h)&&l.push(u)})}else switch(n!==void 0&&l.push(a.get(n)),e){case"add":Pt(i)?ok(n)&&l.push(a.get("length")):(l.push(a.get(Kh)),Bd(i)&&l.push(a.get(zS)));break;case"delete":Pt(i)||(l.push(a.get(Kh)),Bd(i)&&l.push(a.get(zS)));break;case"set":Bd(i)&&l.push(a.get(Kh));break}ck();for(const h of l)h&&aN(h,4);hk()}function Hte(i,e){const n=ib.get(i);return n&&n.get(e)}const Gte=sO("__proto__,__v_isRef,__isVue"),cN=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(vl)),UA=Yte();function Yte(){const i={};return["includes","indexOf","lastIndexOf"].forEach(e=>{i[e]=function(...n){const t=Dn(this);for(let s=0,a=this.length;s<a;s++)Ps(t,"get",s+"");const r=t[e](...n);return r===-1||r===!1?t[e](...n.map(Dn)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{i[e]=function(...n){Yc(),ck();const t=Dn(this)[e].apply(this,n);return hk(),jc(),t}}),i}function jte(i){vl(i)||(i=String(i));const e=Dn(this);return Ps(e,"has",i),e.hasOwnProperty(i)}class hN{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,t){const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return t===(r?s?gN:mN:s?pN:fN).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(t)?e:void 0;const a=Pt(e);if(!r){if(a&&Nn(UA,n))return Reflect.get(UA,n,t);if(n==="hasOwnProperty")return jte}const l=Reflect.get(e,n,t);return(vl(n)?cN.has(n):Gte(n))||(r||Ps(e,"get",n),s)?l:Hi(l)?a&&ok(n)?l:l.value:ei(l)?r?cu(l):Vf(l):l}}class uN extends hN{constructor(e=!1){super(!1,e)}set(e,n,t,r){let s=e[n];if(!this._isShallow){const h=cf(s);if(!_g(t)&&!cf(t)&&(s=Dn(s),t=Dn(t)),!Pt(e)&&Hi(s)&&!Hi(t))return h?!1:(s.value=t,!0)}const a=Pt(e)&&ok(n)?Number(n)<e.length:Nn(e,n),l=Reflect.set(e,n,t,r);return e===Dn(r)&&(a?jo(t,s)&&hl(e,"set",n,t):hl(e,"add",n,t)),l}deleteProperty(e,n){const t=Nn(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&t&&hl(e,"delete",n,void 0),r}has(e,n){const t=Reflect.has(e,n);return(!vl(n)||!cN.has(n))&&Ps(e,"has",n),t}ownKeys(e){return Ps(e,"iterate",Pt(e)?"length":Kh),Reflect.ownKeys(e)}}class dN extends hN{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const qte=new uN,Zte=new dN,Kte=new uN(!0),Jte=new dN(!0),uk=i=>i,cO=i=>Reflect.getPrototypeOf(i);function Xv(i,e,n=!1,t=!1){i=i.__v_raw;const r=Dn(i),s=Dn(e);n||(jo(e,s)&&Ps(r,"get",e),Ps(r,"get",s));const{has:a}=cO(r),l=t?uk:n?fk:Sg;if(a.call(r,e))return l(i.get(e));if(a.call(r,s))return l(i.get(s));i!==r&&i.get(e)}function Wv(i,e=!1){const n=this.__v_raw,t=Dn(n),r=Dn(i);return e||(jo(i,r)&&Ps(t,"has",i),Ps(t,"has",r)),i===r?n.has(i):n.has(i)||n.has(r)}function Qv(i,e=!1){return i=i.__v_raw,!e&&Ps(Dn(i),"iterate",Kh),Reflect.get(i,"size",i)}function zA(i){i=Dn(i);const e=Dn(this);return cO(e).has.call(e,i)||(e.add(i),hl(e,"add",i,i)),this}function FA(i,e){e=Dn(e);const n=Dn(this),{has:t,get:r}=cO(n);let s=t.call(n,i);s||(i=Dn(i),s=t.call(n,i));const a=r.call(n,i);return n.set(i,e),s?jo(e,a)&&hl(n,"set",i,e):hl(n,"add",i,e),this}function XA(i){const e=Dn(this),{has:n,get:t}=cO(e);let r=n.call(e,i);r||(i=Dn(i),r=n.call(e,i)),t&&t.call(e,i);const s=e.delete(i);return r&&hl(e,"delete",i,void 0),s}function WA(){const i=Dn(this),e=i.size!==0,n=i.clear();return e&&hl(i,"clear",void 0,void 0),n}function Hv(i,e){return function(t,r){const s=this,a=s.__v_raw,l=Dn(a),h=e?uk:i?fk:Sg;return!i&&Ps(l,"iterate",Kh),a.forEach((u,f)=>t.call(r,h(u),h(f),s))}}function Gv(i,e,n){return function(...t){const r=this.__v_raw,s=Dn(r),a=Bd(s),l=i==="entries"||i===Symbol.iterator&&a,h=i==="keys"&&a,u=r[i](...t),f=n?uk:e?fk:Sg;return!e&&Ps(s,"iterate",h?zS:Kh),{next(){const{value:p,done:g}=u.next();return g?{value:p,done:g}:{value:l?[f(p[0]),f(p[1])]:f(p),done:g}},[Symbol.iterator](){return this}}}}function Zl(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function ene(){const i={get(s){return Xv(this,s)},get size(){return Qv(this)},has:Wv,add:zA,set:FA,delete:XA,clear:WA,forEach:Hv(!1,!1)},e={get(s){return Xv(this,s,!1,!0)},get size(){return Qv(this)},has:Wv,add:zA,set:FA,delete:XA,clear:WA,forEach:Hv(!1,!0)},n={get(s){return Xv(this,s,!0)},get size(){return Qv(this,!0)},has(s){return Wv.call(this,s,!0)},add:Zl("add"),set:Zl("set"),delete:Zl("delete"),clear:Zl("clear"),forEach:Hv(!0,!1)},t={get(s){return Xv(this,s,!0,!0)},get size(){return Qv(this,!0)},has(s){return Wv.call(this,s,!0)},add:Zl("add"),set:Zl("set"),delete:Zl("delete"),clear:Zl("clear"),forEach:Hv(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=Gv(s,!1,!1),n[s]=Gv(s,!0,!1),e[s]=Gv(s,!1,!0),t[s]=Gv(s,!0,!0)}),[i,n,e,t]}const[tne,nne,ine,rne]=ene();function hO(i,e){const n=e?i?rne:ine:i?nne:tne;return(t,r,s)=>r==="__v_isReactive"?!i:r==="__v_isReadonly"?i:r==="__v_raw"?t:Reflect.get(Nn(n,r)&&r in t?n:t,r,s)}const sne={get:hO(!1,!1)},one={get:hO(!1,!0)},ane={get:hO(!0,!1)},lne={get:hO(!0,!0)},fN=new WeakMap,pN=new WeakMap,mN=new WeakMap,gN=new WeakMap;function cne(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hne(i){return i.__v_skip||!Object.isExtensible(i)?0:cne(Ete(i))}function Vf(i){return cf(i)?i:uO(i,!1,qte,sne,fN)}function vN(i){return uO(i,!1,Kte,one,pN)}function cu(i){return uO(i,!0,Zte,ane,mN)}function une(i){return uO(i,!0,Jte,lne,gN)}function uO(i,e,n,t,r){if(!ei(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const s=r.get(i);if(s)return s;const a=hne(i);if(a===0)return i;const l=new Proxy(i,a===2?t:n);return r.set(i,l),l}function Fd(i){return cf(i)?Fd(i.__v_raw):!!(i&&i.__v_isReactive)}function cf(i){return!!(i&&i.__v_isReadonly)}function _g(i){return!!(i&&i.__v_isShallow)}function dk(i){return i?!!i.__v_raw:!1}function Dn(i){const e=i&&i.__v_raw;return e?Dn(e):i}function yN(i){return Object.isExtensible(i)&&JD(i,"__v_skip",!0),i}const Sg=i=>ei(i)?Vf(i):i,fk=i=>ei(i)?cu(i):i;class bN{constructor(e,n,t,r){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new lf(()=>e(this._value),()=>Xd(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=t}get value(){const e=Dn(this);return(!e._cacheable||e.effect.dirty)&&jo(e._value,e._value=e.effect.run())&&Xd(e,4),pk(e),e.effect._dirtyLevel>=2&&Xd(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function dne(i,e,n=!1){let t,r;const s=Zt(i);return s?(t=i,r=Ss):(t=i.get,r=i.set),new bN(t,r,s||!r,n)}function pk(i){var e;Ec&&Zh&&(i=Dn(i),oN(Zh,(e=i.dep)!=null?e:i.dep=lN(()=>i.dep=void 0,i instanceof bN?i:void 0)))}function Xd(i,e=4,n){i=Dn(i);const t=i.dep;t&&aN(t,e)}function Hi(i){return!!(i&&i.__v_isRef===!0)}function at(i){return ON(i,!1)}function dr(i){return ON(i,!0)}function ON(i,e){return Hi(i)?i:new fne(i,e)}class fne{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Dn(e),this._value=n?e:Sg(e)}get value(){return pk(this),this._value}set value(e){const n=this.__v_isShallow||_g(e)||cf(e);e=n?e:Dn(e),jo(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Sg(e),Xd(this,4))}}function pne(i){Xd(i,4)}function an(i){return Hi(i)?i.value:i}function mne(i){return Zt(i)?i():an(i)}const gne={get:(i,e,n)=>an(Reflect.get(i,e,n)),set:(i,e,n,t)=>{const r=i[e];return Hi(r)&&!Hi(n)?(r.value=n,!0):Reflect.set(i,e,n,t)}};function mk(i){return Fd(i)?i:new Proxy(i,gne)}class vne{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:t}=e(()=>pk(this),()=>Xd(this));this._get=n,this._set=t}get value(){return this._get()}set value(e){this._set(e)}}function gk(i){return new vne(i)}function v0(i){const e=Pt(i)?new Array(i.length):{};for(const n in i)e[n]=xN(i,n);return e}class yne{constructor(e,n,t){this._object=e,this._key=n,this._defaultValue=t,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Hte(Dn(this._object),this._key)}}class bne{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function One(i,e,n){return Hi(i)?i:Zt(i)?new bne(i):ei(i)&&arguments.length>1?xN(i,e,n):at(i)}function xN(i,e,n){const t=i[e];return Hi(t)?t:new yne(i,e,n)}const xne={GET:"get",HAS:"has",ITERATE:"iterate"},wne={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function _ne(i,e){}const Sne={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},Cne={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function ul(i,e,n,t){try{return t?i(...t):i()}catch(r){Cu(r,e,n)}}function to(i,e,n,t){if(Zt(i)){const r=ul(i,e,n,t);return r&&sk(r)&&r.catch(s=>{Cu(s,e,n)}),r}if(Pt(i)){const r=[];for(let s=0;s<i.length;s++)r.push(to(i[s],e,n,t));return r}}function Cu(i,e,n,t=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const u=s.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](i,a,l)===!1)return}s=s.parent}const h=e.appContext.config.errorHandler;if(h){Yc(),ul(h,null,10,[i,a,l]),jc();return}}kne(i,n,r,t)}function kne(i,e,n,t=!0){console.error(i)}let Cg=!1,FS=!1;const Dr=[];let ga=0;const Wd=[];let pc=null,Bh=0;const wN=Promise.resolve();let vk=null;function Lf(i){const e=vk||wN;return i?e.then(this?i.bind(this):i):e}function Tne(i){let e=ga+1,n=Dr.length;for(;e<n;){const t=e+n>>>1,r=Dr[t],s=kg(r);s<i||s===i&&r.pre?e=t+1:n=t}return e}function dO(i){(!Dr.length||!Dr.includes(i,Cg&&i.allowRecurse?ga+1:ga))&&(i.id==null?Dr.push(i):Dr.splice(Tne(i.id),0,i),_N())}function _N(){!Cg&&!FS&&(FS=!0,vk=wN.then(SN))}function Mne(i){const e=Dr.indexOf(i);e>ga&&Dr.splice(e,1)}function rb(i){Pt(i)?Wd.push(...i):(!pc||!pc.includes(i,i.allowRecurse?Bh+1:Bh))&&Wd.push(i),_N()}function QA(i,e,n=Cg?ga+1:0){for(;n<Dr.length;n++){const t=Dr[n];if(t&&t.pre){if(i&&t.id!==i.uid)continue;Dr.splice(n,1),n--,t()}}}function sb(i){if(Wd.length){const e=[...new Set(Wd)].sort((n,t)=>kg(n)-kg(t));if(Wd.length=0,pc){pc.push(...e);return}for(pc=e,Bh=0;Bh<pc.length;Bh++)pc[Bh]();pc=null,Bh=0}}const kg=i=>i.id==null?1/0:i.id,Ene=(i,e)=>{const n=kg(i)-kg(e);if(n===0){if(i.pre&&!e.pre)return-1;if(e.pre&&!i.pre)return 1}return n};function SN(i){FS=!1,Cg=!0,Dr.sort(Ene);try{for(ga=0;ga<Dr.length;ga++){const e=Dr[ga];e&&e.active!==!1&&ul(e,null,14)}}finally{ga=0,Dr.length=0,sb(),Cg=!1,vk=null,(Dr.length||Wd.length)&&SN()}}let Td,Yv=[];function CN(i,e){var n,t;Td=i,Td?(Td.enabled=!0,Yv.forEach(({event:r,args:s})=>Td.emit(r,...s)),Yv=[]):typeof window<"u"&&window.HTMLElement&&!((t=(n=window.navigator)==null?void 0:n.userAgent)!=null&&t.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{CN(s,e)}),setTimeout(()=>{Td||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Yv=[])},3e3)):Yv=[]}function Pne(i,e,...n){if(i.isUnmounted)return;const t=i.vnode.props||jn;let r=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in t){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:p,trim:g}=t[f]||jn;g&&(r=n.map(v=>_i(v)?v.trim():v)),p&&(r=n.map(tb))}let l,h=t[l=sg(e)]||t[l=sg(ns(e))];!h&&s&&(h=t[l=sg(qs(e))]),h&&to(h,i,6,r);const u=t[l+"Once"];if(u){if(!i.emitted)i.emitted={};else if(i.emitted[l])return;i.emitted[l]=!0,to(u,i,6,r)}}function kN(i,e,n=!1){const t=e.emitsCache,r=t.get(i);if(r!==void 0)return r;const s=i.emits;let a={},l=!1;if(!Zt(i)){const h=u=>{const f=kN(u,e,!0);f&&(l=!0,vi(a,f))};!n&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}return!s&&!l?(ei(i)&&t.set(i,null),null):(Pt(s)?s.forEach(h=>a[h]=null):vi(a,s),ei(i)&&t.set(i,a),a)}function fO(i,e){return!i||!m0(e)?!1:(e=e.slice(2).replace(/Once$/,""),Nn(i,e[0].toLowerCase()+e.slice(1))||Nn(i,qs(e))||Nn(i,e))}let Xi=null,pO=null;function Tg(i){const e=Xi;return Xi=i,pO=i&&i.type.__scopeId||null,e}function TN(i){pO=i}function MN(){pO=null}const Ane=i=>Je;function Je(i,e=Xi,n){if(!e||i._n)return i;const t=(...r)=>{t._d&&ZS(-1);const s=Tg(e);let a;try{a=i(...r)}finally{Tg(s),t._d&&ZS(1)}return a};return t._n=!0,t._c=!0,t._d=!0,t}function E1(i){const{type:e,vnode:n,proxy:t,withProxy:r,propsOptions:[s],slots:a,attrs:l,emit:h,render:u,renderCache:f,props:p,data:g,setupState:v,ctx:y,inheritAttrs:w}=i,x=Tg(i);let S,_;try{if(n.shapeFlag&4){const k=r||t,M=k;S=js(u.call(M,k,f,p,v,g,y)),_=l}else{const k=e;S=js(k.length>1?k(p,{attrs:l,slots:a,emit:h}):k(p,null)),_=e.props?l:Ine(l)}}catch(k){lg.length=0,Cu(k,i,1),S=Re(xr)}let O=S;if(_&&w!==!1){const k=Object.keys(_),{shapeFlag:M}=O;k.length&&M&7&&(s&&k.some(ik)&&(_=Dne(_,s)),O=Ca(O,_,!1,!0))}return n.dirs&&(O=Ca(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&(O.transition=n.transition),S=O,Tg(x),S}function Rne(i,e=!0){let n;for(let t=0;t<i.length;t++){const r=i[t];if(Nc(r)){if(r.type!==xr||r.children==="v-if"){if(n)return;n=r}}else return}return n}const Ine=i=>{let e;for(const n in i)(n==="class"||n==="style"||m0(n))&&((e||(e={}))[n]=i[n]);return e},Dne=(i,e)=>{const n={};for(const t in i)(!ik(t)||!(t.slice(9)in e))&&(n[t]=i[t]);return n};function Nne(i,e,n){const{props:t,children:r,component:s}=i,{props:a,children:l,patchFlag:h}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return t?HA(t,a,u):!!a;if(h&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const g=f[p];if(a[g]!==t[g]&&!fO(u,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:t===a?!1:t?a?HA(t,a,u):!0:!!a;return!1}function HA(i,e,n){const t=Object.keys(e);if(t.length!==Object.keys(i).length)return!0;for(let r=0;r<t.length;r++){const s=t[r];if(e[s]!==i[s]&&!fO(n,s))return!0}return!1}function yk({vnode:i,parent:e},n){for(;e;){const t=e.subTree;if(t.suspense&&t.suspense.activeBranch===i&&(t.el=i.el),t===i)(i=e.vnode).el=n,e=e.parent;else break}}const bk="components",$ne="directives";function Rt(i,e){return Ok(bk,i,!0,e)||i}const EN=Symbol.for("v-ndc");function XS(i){return _i(i)?Ok(bk,i,!1)||i:i||EN}function Vne(i){return Ok($ne,i)}function Ok(i,e,n=!0,t=!1){const r=Xi||Ji;if(r){const s=r.type;if(i===bk){const l=nC(s,!1);if(l&&(l===e||l===ns(e)||l===g0(ns(e))))return s}const a=GA(r[i]||s[i],e)||GA(r.appContext[i],e);return!a&&t?s:a}}function GA(i,e){return i&&(i[e]||i[ns(e)]||i[g0(ns(e))])}const PN=i=>i.__isSuspense;let WS=0;const Lne={name:"Suspense",__isSuspense:!0,process(i,e,n,t,r,s,a,l,h,u){if(i==null)Bne(e,n,t,r,s,a,l,h,u);else{if(s&&s.deps>0&&!i.suspense.isInFallback){e.suspense=i.suspense,e.suspense.vnode=e,e.el=i.el;return}Une(i,e,n,t,r,a,l,h,u)}},hydrate:zne,create:xk,normalize:Fne},AN=Lne;function Mg(i,e){const n=i.props&&i.props[e];Zt(n)&&n()}function Bne(i,e,n,t,r,s,a,l,h){const{p:u,o:{createElement:f}}=h,p=f("div"),g=i.suspense=xk(i,r,t,e,p,n,s,a,l,h);u(null,g.pendingBranch=i.ssContent,p,null,t,g,s,a),g.deps>0?(Mg(i,"onPending"),Mg(i,"onFallback"),u(null,i.ssFallback,e,n,t,null,s,a),Qd(g,i.ssFallback)):g.resolve(!1,!0)}function Une(i,e,n,t,r,s,a,l,{p:h,um:u,o:{createElement:f}}){const p=e.suspense=i.suspense;p.vnode=e,e.el=i.el;const g=e.ssContent,v=e.ssFallback,{activeBranch:y,pendingBranch:w,isInFallback:x,isHydrating:S}=p;if(w)p.pendingBranch=g,Qo(g,w)?(h(w,g,p.hiddenContainer,null,r,p,s,a,l),p.deps<=0?p.resolve():x&&(S||(h(y,v,n,t,r,null,s,a,l),Qd(p,v)))):(p.pendingId=WS++,S?(p.isHydrating=!1,p.activeBranch=w):u(w,r,p),p.deps=0,p.effects.length=0,p.hiddenContainer=f("div"),x?(h(null,g,p.hiddenContainer,null,r,p,s,a,l),p.deps<=0?p.resolve():(h(y,v,n,t,r,null,s,a,l),Qd(p,v))):y&&Qo(g,y)?(h(y,g,n,t,r,p,s,a,l),p.resolve(!0)):(h(null,g,p.hiddenContainer,null,r,p,s,a,l),p.deps<=0&&p.resolve()));else if(y&&Qo(g,y))h(y,g,n,t,r,p,s,a,l),Qd(p,g);else if(Mg(e,"onPending"),p.pendingBranch=g,g.shapeFlag&512?p.pendingId=g.component.suspenseId:p.pendingId=WS++,h(null,g,p.hiddenContainer,null,r,p,s,a,l),p.deps<=0)p.resolve();else{const{timeout:_,pendingId:O}=p;_>0?setTimeout(()=>{p.pendingId===O&&p.fallback(v)},_):_===0&&p.fallback(v)}}function xk(i,e,n,t,r,s,a,l,h,u,f=!1){const{p,m:g,um:v,n:y,o:{parentNode:w,remove:x}}=u;let S;const _=Xne(i);_&&e&&e.pendingBranch&&(S=e.pendingId,e.deps++);const O=i.props?nb(i.props.timeout):void 0,k=s,M={vnode:i,parent:e,parentComponent:n,namespace:a,container:t,hiddenContainer:r,deps:0,pendingId:WS++,timeout:typeof O=="number"?O:-1,activeBranch:null,pendingBranch:null,isInFallback:!f,isHydrating:f,isUnmounted:!1,effects:[],resolve(P=!1,D=!1){const{vnode:A,activeBranch:R,pendingBranch:T,pendingId:N,effects:L,parentComponent:I,container:$}=M;let B=!1;M.isHydrating?M.isHydrating=!1:P||(B=R&&T.transition&&T.transition.mode==="out-in",B&&(R.transition.afterLeave=()=>{N===M.pendingId&&(g(T,$,s===k?y(R):s,0),rb(L))}),R&&(w(R.el)!==M.hiddenContainer&&(s=y(R)),v(R,I,M,!0)),B||g(T,$,s,0)),Qd(M,T),M.pendingBranch=null,M.isInFallback=!1;let U=M.parent,Y=!1;for(;U;){if(U.pendingBranch){U.effects.push(...L),Y=!0;break}U=U.parent}!Y&&!B&&rb(L),M.effects=[],_&&e&&e.pendingBranch&&S===e.pendingId&&(e.deps--,e.deps===0&&!D&&e.resolve()),Mg(A,"onResolve")},fallback(P){if(!M.pendingBranch)return;const{vnode:D,activeBranch:A,parentComponent:R,container:T,namespace:N}=M;Mg(D,"onFallback");const L=y(A),I=()=>{M.isInFallback&&(p(null,P,T,L,R,null,N,l,h),Qd(M,P))},$=P.transition&&P.transition.mode==="out-in";$&&(A.transition.afterLeave=I),M.isInFallback=!0,v(A,R,null,!0),$||I()},move(P,D,A){M.activeBranch&&g(M.activeBranch,P,D,A),M.container=P},next(){return M.activeBranch&&y(M.activeBranch)},registerDep(P,D){const A=!!M.pendingBranch;A&&M.deps++;const R=P.vnode.el;P.asyncDep.catch(T=>{Cu(T,P,0)}).then(T=>{if(P.isUnmounted||M.isUnmounted||M.pendingId!==P.suspenseId)return;P.asyncResolved=!0;const{vnode:N}=P;eC(P,T,!1),R&&(N.el=R);const L=!R&&P.subTree.el;D(P,N,w(R||P.subTree.el),R?null:y(P.subTree),M,a,h),L&&x(L),yk(P,N.el),A&&--M.deps===0&&M.resolve()})},unmount(P,D){M.isUnmounted=!0,M.activeBranch&&v(M.activeBranch,n,P,D),M.pendingBranch&&v(M.pendingBranch,n,P,D)}};return M}function zne(i,e,n,t,r,s,a,l,h){const u=e.suspense=xk(e,t,n,i.parentNode,document.createElement("div"),null,r,s,a,l,!0),f=h(i,u.pendingBranch=e.ssContent,n,u,s,a);return u.deps===0&&u.resolve(!1,!0),f}function Fne(i){const{shapeFlag:e,children:n}=i,t=e&32;i.ssContent=YA(t?n.default:n),i.ssFallback=t?YA(n.fallback):Re(xr)}function YA(i){let e;if(Zt(i)){const n=fu&&i._c;n&&(i._d=!1,mn()),i=i(),n&&(i._d=!0,e=Cs,p$())}return Pt(i)&&(i=Rne(i)),i=js(i),e&&!i.dynamicChildren&&(i.dynamicChildren=e.filter(n=>n!==i)),i}function RN(i,e){e&&e.pendingBranch?Pt(i)?e.effects.push(...i):e.effects.push(i):rb(i)}function Qd(i,e){i.activeBranch=e;const{vnode:n,parentComponent:t}=i;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;n.el=r,t&&t.subTree===n&&(t.vnode.el=r,yk(t,r))}function Xne(i){const e=i.props&&i.props.suspensible;return e!=null&&e!==!1}const IN=Symbol.for("v-scx"),DN=()=>Gd(IN);function dl(i,e){return y0(i,null,e)}function NN(i,e){return y0(i,null,{flush:"post"})}function $N(i,e){return y0(i,null,{flush:"sync"})}const jv={};function Fn(i,e,n){return y0(i,e,n)}function y0(i,e,{immediate:n,deep:t,flush:r,once:s,onTrack:a,onTrigger:l}=jn){if(e&&s){const P=e;e=(...D)=>{P(...D),M()}}const h=Ji,u=P=>t===!0?P:Xh(P,t===!1?1:void 0);let f,p=!1,g=!1;if(Hi(i)?(f=()=>i.value,p=_g(i)):Fd(i)?(f=()=>u(i),p=!0):Pt(i)?(g=!0,p=i.some(P=>Fd(P)||_g(P)),f=()=>i.map(P=>{if(Hi(P))return P.value;if(Fd(P))return u(P);if(Zt(P))return ul(P,h,2)})):Zt(i)?e?f=()=>ul(i,h,2):f=()=>(v&&v(),to(i,h,3,[y])):f=Ss,e&&t){const P=f;f=()=>Xh(P())}let v,y=P=>{v=O.onStop=()=>{ul(P,h,4),v=O.onStop=void 0}},w;if(O0)if(y=Ss,e?n&&to(e,h,3,[f(),g?[]:void 0,y]):f(),r==="sync"){const P=DN();w=P.__watcherHandles||(P.__watcherHandles=[])}else return Ss;let x=g?new Array(i.length).fill(jv):jv;const S=()=>{if(!(!O.active||!O.dirty))if(e){const P=O.run();(t||p||(g?P.some((D,A)=>jo(D,x[A])):jo(P,x)))&&(v&&v(),to(e,h,3,[P,x===jv?void 0:g&&x[0]===jv?[]:x,y]),x=P)}else O.run()};S.allowRecurse=!!e;let _;r==="sync"?_=S:r==="post"?_=()=>gr(S,h&&h.suspense):(S.pre=!0,h&&(S.id=h.uid),_=()=>dO(S));const O=new lf(f,Ss,_),k=lO(),M=()=>{O.stop(),k&&rk(k.effects,O)};return e?n?S():x=O.run():r==="post"?gr(O.run.bind(O),h&&h.suspense):O.run(),w&&w.push(M),M}function Wne(i,e,n){const t=this.proxy,r=_i(i)?i.includes(".")?VN(t,i):()=>t[i]:i.bind(t,t);let s;Zt(e)?s=e:(s=e.handler,n=e);const a=pu(this),l=y0(r,s.bind(t),n);return a(),l}function VN(i,e){const n=e.split(".");return()=>{let t=i;for(let r=0;r<n.length&&t;r++)t=t[n[r]];return t}}function Xh(i,e=1/0,n){if(e<=0||!ei(i)||i.__v_skip||(n=n||new Set,n.has(i)))return i;if(n.add(i),e--,Hi(i))Xh(i.value,e,n);else if(Pt(i))for(let t=0;t<i.length;t++)Xh(i[t],e,n);else if(Su(i)||Bd(i))i.forEach(t=>{Xh(t,e,n)});else if(KD(i))for(const t in i)Xh(i[t],e,n);return i}function Qne(i,e){if(Xi===null)return i;const n=bO(Xi)||Xi.proxy,t=i.dirs||(i.dirs=[]);for(let r=0;r<e.length;r++){let[s,a,l,h=jn]=e[r];s&&(Zt(s)&&(s={mounted:s,updated:s}),s.deep&&Xh(a),t.push({dir:s,instance:n,value:a,oldValue:void 0,arg:l,modifiers:h}))}return i}function pa(i,e,n,t){const r=i.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const l=r[a];s&&(l.oldValue=s[a].value);let h=l.dir[t];h&&(Yc(),to(h,n,8,[i.el,l,i,e]),jc())}}const mc=Symbol("_leaveCb"),qv=Symbol("_enterCb");function wk(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Yi(()=>{i.isMounted=!0}),yO(()=>{i.isUnmounting=!0}),i}const ho=[Function,Array],_k={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ho,onEnter:ho,onAfterEnter:ho,onEnterCancelled:ho,onBeforeLeave:ho,onLeave:ho,onAfterLeave:ho,onLeaveCancelled:ho,onBeforeAppear:ho,onAppear:ho,onAfterAppear:ho,onAppearCancelled:ho},Hne={name:"BaseTransition",props:_k,setup(i,{slots:e}){const n=io(),t=wk();return()=>{const r=e.default&&mO(e.default(),!0);if(!r||!r.length)return;let s=r[0];if(r.length>1){for(const g of r)if(g.type!==xr){s=g;break}}const a=Dn(i),{mode:l}=a;if(t.isLeaving)return Uw(s);const h=jA(s);if(!h)return Uw(s);const u=hf(h,a,t,n);hu(h,u);const f=n.subTree,p=f&&jA(f);if(p&&p.type!==xr&&!Qo(h,p)){const g=hf(p,a,t,n);if(hu(p,g),l==="out-in"&&h.type!==xr)return t.isLeaving=!0,g.afterLeave=()=>{t.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Uw(s);l==="in-out"&&h.type!==xr&&(g.delayLeave=(v,y,w)=>{const x=BN(t,p);x[String(p.key)]=p,v[mc]=()=>{y(),v[mc]=void 0,delete u.delayedLeave},u.delayedLeave=w})}return s}}},LN=Hne;function BN(i,e){const{leavingVNodes:n}=i;let t=n.get(e.type);return t||(t=Object.create(null),n.set(e.type,t)),t}function hf(i,e,n,t){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:l,onEnter:h,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:v,onLeaveCancelled:y,onBeforeAppear:w,onAppear:x,onAfterAppear:S,onAppearCancelled:_}=e,O=String(i.key),k=BN(n,i),M=(A,R)=>{A&&to(A,t,9,R)},P=(A,R)=>{const T=R[1];M(A,R),Pt(A)?A.every(N=>N.length<=1)&&T():A.length<=1&&T()},D={mode:s,persisted:a,beforeEnter(A){let R=l;if(!n.isMounted)if(r)R=w||l;else return;A[mc]&&A[mc](!0);const T=k[O];T&&Qo(i,T)&&T.el[mc]&&T.el[mc](),M(R,[A])},enter(A){let R=h,T=u,N=f;if(!n.isMounted)if(r)R=x||h,T=S||u,N=_||f;else return;let L=!1;const I=A[qv]=$=>{L||(L=!0,$?M(N,[A]):M(T,[A]),D.delayedLeave&&D.delayedLeave(),A[qv]=void 0)};R?P(R,[A,I]):I()},leave(A,R){const T=String(i.key);if(A[qv]&&A[qv](!0),n.isUnmounting)return R();M(p,[A]);let N=!1;const L=A[mc]=I=>{N||(N=!0,R(),I?M(y,[A]):M(v,[A]),A[mc]=void 0,k[T]===i&&delete k[T])};k[T]=i,g?P(g,[A,L]):L()},clone(A){return hf(A,e,n,t)}};return D}function Uw(i){if(b0(i))return i=Ca(i),i.children=null,i}function jA(i){if(!b0(i))return i;const{shapeFlag:e,children:n}=i;if(n){if(e&16)return n[0];if(e&32&&Zt(n.default))return n.default()}}function hu(i,e){i.shapeFlag&6&&i.component?hu(i.component.subTree,e):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function mO(i,e=!1,n){let t=[],r=0;for(let s=0;s<i.length;s++){let a=i[s];const l=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===ai?(a.patchFlag&128&&r++,t=t.concat(mO(a.children,e,l))):(e||a.type!==xr)&&t.push(l!=null?Ca(a,{key:l}):a)}if(r>1)for(let s=0;s<t.length;s++)t[s].patchFlag=-2;return t}/*! #__NO_SIDE_EFFECTS__ */function yl(i,e){return Zt(i)?vi({name:i.name},e,{setup:i}):i}const Jh=i=>!!i.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Gne(i){Zt(i)&&(i={loader:i});const{loader:e,loadingComponent:n,errorComponent:t,delay:r=200,timeout:s,suspensible:a=!0,onError:l}=i;let h=null,u,f=0;const p=()=>(f++,h=null,g()),g=()=>{let v;return h||(v=h=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((w,x)=>{l(y,()=>w(p()),()=>x(y),f+1)});throw y}).then(y=>v!==h&&h?h:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),u=y,y)))};return yl({name:"AsyncComponentWrapper",__asyncLoader:g,get __asyncResolved(){return u},setup(){const v=Ji;if(u)return()=>zw(u,v);const y=_=>{h=null,Cu(_,v,13,!t)};if(a&&v.suspense||O0)return g().then(_=>()=>zw(_,v)).catch(_=>(y(_),()=>t?Re(t,{error:_}):null));const w=at(!1),x=at(),S=at(!!r);return r&&setTimeout(()=>{S.value=!1},r),s!=null&&setTimeout(()=>{if(!w.value&&!x.value){const _=new Error(`Async component timed out after ${s}ms.`);y(_),x.value=_}},s),g().then(()=>{w.value=!0,v.parent&&b0(v.parent.vnode)&&(v.parent.effect.dirty=!0,dO(v.parent.update))}).catch(_=>{y(_),x.value=_}),()=>{if(w.value&&u)return zw(u,v);if(x.value&&t)return Re(t,{error:x.value});if(n&&!S.value)return Re(n)}}})}function zw(i,e){const{ref:n,props:t,children:r,ce:s}=e.vnode,a=Re(i,t,r);return a.ref=n,a.ce=s,delete e.vnode.ce,a}const b0=i=>i.type.__isKeepAlive,Yne={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(i,{slots:e}){const n=io(),t=n.ctx;if(!t.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const r=new Map,s=new Set;let a=null;const l=n.suspense,{renderer:{p:h,m:u,um:f,o:{createElement:p}}}=t,g=p("div");t.activate=(_,O,k,M,P)=>{const D=_.component;u(_,O,k,0,l),h(D.vnode,_,O,k,D,l,M,_.slotScopeIds,P),gr(()=>{D.isDeactivated=!1,D.a&&zd(D.a);const A=_.props&&_.props.onVnodeMounted;A&&bs(A,D.parent,_)},l)},t.deactivate=_=>{const O=_.component;u(_,g,null,1,l),gr(()=>{O.da&&zd(O.da);const k=_.props&&_.props.onVnodeUnmounted;k&&bs(k,O.parent,_),O.isDeactivated=!0},l)};function v(_){Fw(_),f(_,n,l,!0)}function y(_){r.forEach((O,k)=>{const M=nC(O.type);M&&(!_||!_(M))&&w(k)})}function w(_){const O=r.get(_);!a||!Qo(O,a)?v(O):a&&Fw(a),r.delete(_),s.delete(_)}Fn(()=>[i.include,i.exclude],([_,O])=>{_&&y(k=>Ym(_,k)),O&&y(k=>!Ym(O,k))},{flush:"post",deep:!0});let x=null;const S=()=>{x!=null&&r.set(x,Xw(n.subTree))};return Yi(S),vO(S),yO(()=>{r.forEach(_=>{const{subTree:O,suspense:k}=n,M=Xw(O);if(_.type===M.type&&_.key===M.key){Fw(M);const P=M.component.da;P&&gr(P,k);return}v(_)})}),()=>{if(x=null,!e.default)return null;const _=e.default(),O=_[0];if(_.length>1)return a=null,_;if(!Nc(O)||!(O.shapeFlag&4)&&!(O.shapeFlag&128))return a=null,O;let k=Xw(O);const M=k.type,P=nC(Jh(k)?k.type.__asyncResolved||{}:M),{include:D,exclude:A,max:R}=i;if(D&&(!P||!Ym(D,P))||A&&P&&Ym(A,P))return a=k,O;const T=k.key==null?M:k.key,N=r.get(T);return k.el&&(k=Ca(k),O.shapeFlag&128&&(O.ssContent=k)),x=T,N?(k.el=N.el,k.component=N.component,k.transition&&hu(k,k.transition),k.shapeFlag|=512,s.delete(T),s.add(T)):(s.add(T),R&&s.size>parseInt(R,10)&&w(s.values().next().value)),k.shapeFlag|=256,a=k,PN(O.type)?O:k}}},jne=Yne;function Ym(i,e){return Pt(i)?i.some(n=>Ym(n,e)):_i(i)?i.split(",").includes(e):Mte(i)?i.test(e):!1}function UN(i,e){FN(i,"a",e)}function zN(i,e){FN(i,"da",e)}function FN(i,e,n=Ji){const t=i.__wdc||(i.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return i()});if(gO(e,t,n),n){let r=n.parent;for(;r&&r.parent;)b0(r.parent.vnode)&&qne(t,e,n,r),r=r.parent}}function qne(i,e,n,t){const r=gO(e,i,t,!0);To(()=>{rk(t[e],r)},n)}function Fw(i){i.shapeFlag&=-257,i.shapeFlag&=-513}function Xw(i){return i.shapeFlag&128?i.ssContent:i}function gO(i,e,n=Ji,t=!1){if(n){const r=n[i]||(n[i]=[]),s=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;Yc();const l=pu(n),h=to(e,n,i,a);return l(),jc(),h});return t?r.unshift(s):r.push(s),s}}const Ml=i=>(e,n=Ji)=>(!O0||i==="sp")&&gO(i,(...t)=>e(...t),n),XN=Ml("bm"),Yi=Ml("m"),WN=Ml("bu"),vO=Ml("u"),yO=Ml("bum"),To=Ml("um"),QN=Ml("sp"),HN=Ml("rtg"),GN=Ml("rtc");function YN(i,e=Ji){gO("ec",i,e)}function uu(i,e,n,t){let r;const s=n&&n[t];if(Pt(i)||_i(i)){r=new Array(i.length);for(let a=0,l=i.length;a<l;a++)r[a]=e(i[a],a,void 0,s&&s[a])}else if(typeof i=="number"){r=new Array(i);for(let a=0;a<i;a++)r[a]=e(a+1,a,void 0,s&&s[a])}else if(ei(i))if(i[Symbol.iterator])r=Array.from(i,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(i);r=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const u=a[l];r[l]=e(i[u],u,l,s&&s[l])}}else r=[];return n&&(n[t]=r),r}function Zne(i,e){for(let n=0;n<e.length;n++){const t=e[n];if(Pt(t))for(let r=0;r<t.length;r++)i[t[r].name]=t[r].fn;else t&&(i[t.name]=t.key?(...r)=>{const s=t.fn(...r);return s&&(s.key=t.key),s}:t.fn)}return i}function jN(i,e,n={},t,r){if(Xi.isCE||Xi.parent&&Jh(Xi.parent)&&Xi.parent.isCE)return e!=="default"&&(n.name=e),Re("slot",n,t&&t());let s=i[e];s&&s._c&&(s._d=!1),mn();const a=s&&qN(s(n)),l=_r(ai,{key:n.key||a&&a.key||`_${e}`},a||(t?t():[]),a&&i._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function qN(i){return i.some(e=>Nc(e)?!(e.type===xr||e.type===ai&&!qN(e.children)):!0)?i:null}function Kne(i,e){const n={};for(const t in i)n[e&&/[A-Z]/.test(t)?`on:${t}`:sg(t)]=i[t];return n}const QS=i=>i?O$(i)?bO(i)||i.proxy:QS(i.parent):null,og=vi(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>QS(i.parent),$root:i=>QS(i.root),$emit:i=>i.emit,$options:i=>Ck(i),$forceUpdate:i=>i.f||(i.f=()=>{i.effect.dirty=!0,dO(i.update)}),$nextTick:i=>i.n||(i.n=Lf.bind(i.proxy)),$watch:i=>Wne.bind(i)}),Ww=(i,e)=>i!==jn&&!i.__isScriptSetup&&Nn(i,e),HS={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:t,data:r,props:s,accessCache:a,type:l,appContext:h}=i;let u;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return t[e];case 2:return r[e];case 4:return n[e];case 3:return s[e]}else{if(Ww(t,e))return a[e]=1,t[e];if(r!==jn&&Nn(r,e))return a[e]=2,r[e];if((u=i.propsOptions[0])&&Nn(u,e))return a[e]=3,s[e];if(n!==jn&&Nn(n,e))return a[e]=4,n[e];GS&&(a[e]=0)}}const f=og[e];let p,g;if(f)return e==="$attrs"&&Ps(i.attrs,"get",""),f(i);if((p=l.__cssModules)&&(p=p[e]))return p;if(n!==jn&&Nn(n,e))return a[e]=4,n[e];if(g=h.config.globalProperties,Nn(g,e))return g[e]},set({_:i},e,n){const{data:t,setupState:r,ctx:s}=i;return Ww(r,e)?(r[e]=n,!0):t!==jn&&Nn(t,e)?(t[e]=n,!0):Nn(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(s[e]=n,!0)},has({_:{data:i,setupState:e,accessCache:n,ctx:t,appContext:r,propsOptions:s}},a){let l;return!!n[a]||i!==jn&&Nn(i,a)||Ww(e,a)||(l=s[0])&&Nn(l,a)||Nn(t,a)||Nn(og,a)||Nn(r.config.globalProperties,a)},defineProperty(i,e,n){return n.get!=null?i._.accessCache[e]=0:Nn(n,"value")&&this.set(i,e,n.value,null),Reflect.defineProperty(i,e,n)}},Jne=vi({},HS,{get(i,e){if(e!==Symbol.unscopables)return HS.get(i,e,i)},has(i,e){return e[0]!=="_"&&!Ite(e)}});function eie(){return null}function tie(){return null}function nie(i){}function iie(i){}function rie(){return null}function sie(){}function oie(i,e){return null}function Sk(){return KN().slots}function ZN(){return KN().attrs}function KN(){const i=io();return i.setupContext||(i.setupContext=_$(i))}function Eg(i){return Pt(i)?i.reduce((e,n)=>(e[n]=null,e),{}):i}function aie(i,e){const n=Eg(i);for(const t in e){if(t.startsWith("__skip"))continue;let r=n[t];r?Pt(r)||Zt(r)?r=n[t]={type:r,default:e[t]}:r.default=e[t]:r===null&&(r=n[t]={default:e[t]}),r&&e[`__skip_${t}`]&&(r.skipFactory=!0)}return n}function lie(i,e){return!i||!e?i||e:Pt(i)&&Pt(e)?i.concat(e):vi({},Eg(i),Eg(e))}function cie(i,e){const n={};for(const t in i)e.includes(t)||Object.defineProperty(n,t,{enumerable:!0,get:()=>i[t]});return n}function hie(i){const e=io();let n=i();return JS(),sk(n)&&(n=n.catch(t=>{throw pu(e),t})),[n,()=>pu(e)]}let GS=!0;function uie(i){const e=Ck(i),n=i.proxy,t=i.ctx;GS=!1,e.beforeCreate&&qA(e.beforeCreate,i,"bc");const{data:r,computed:s,methods:a,watch:l,provide:h,inject:u,created:f,beforeMount:p,mounted:g,beforeUpdate:v,updated:y,activated:w,deactivated:x,beforeDestroy:S,beforeUnmount:_,destroyed:O,unmounted:k,render:M,renderTracked:P,renderTriggered:D,errorCaptured:A,serverPrefetch:R,expose:T,inheritAttrs:N,components:L,directives:I,filters:$}=e;if(u&&die(u,t,null),a)for(const Y in a){const Z=a[Y];Zt(Z)&&(t[Y]=Z.bind(n))}if(r){const Y=r.call(n,n);ei(Y)&&(i.data=Vf(Y))}if(GS=!0,s)for(const Y in s){const Z=s[Y],ie=Zt(Z)?Z.bind(n,n):Zt(Z.get)?Z.get.bind(n,n):Ss,ce=!Zt(Z)&&Zt(Z.set)?Z.set.bind(n):Ss,ge=ci({get:ie,set:ce});Object.defineProperty(t,Y,{enumerable:!0,configurable:!0,get:()=>ge.value,set:Ae=>ge.value=Ae})}if(l)for(const Y in l)JN(l[Y],t,n,Y);if(h){const Y=Zt(h)?h.call(n):h;Reflect.ownKeys(Y).forEach(Z=>{Pg(Z,Y[Z])})}f&&qA(f,i,"c");function U(Y,Z){Pt(Z)?Z.forEach(ie=>Y(ie.bind(n))):Z&&Y(Z.bind(n))}if(U(XN,p),U(Yi,g),U(WN,v),U(vO,y),U(UN,w),U(zN,x),U(YN,A),U(GN,P),U(HN,D),U(yO,_),U(To,k),U(QN,R),Pt(T))if(T.length){const Y=i.exposed||(i.exposed={});T.forEach(Z=>{Object.defineProperty(Y,Z,{get:()=>n[Z],set:ie=>n[Z]=ie})})}else i.exposed||(i.exposed={});M&&i.render===Ss&&(i.render=M),N!=null&&(i.inheritAttrs=N),L&&(i.components=L),I&&(i.directives=I)}function die(i,e,n=Ss){Pt(i)&&(i=YS(i));for(const t in i){const r=i[t];let s;ei(r)?"default"in r?s=Gd(r.from||t,r.default,!0):s=Gd(r.from||t):s=Gd(r),Hi(s)?Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[t]=s}}function qA(i,e,n){to(Pt(i)?i.map(t=>t.bind(e.proxy)):i.bind(e.proxy),e,n)}function JN(i,e,n,t){const r=t.includes(".")?VN(n,t):()=>n[t];if(_i(i)){const s=e[i];Zt(s)&&Fn(r,s)}else if(Zt(i))Fn(r,i.bind(n));else if(ei(i))if(Pt(i))i.forEach(s=>JN(s,e,n,t));else{const s=Zt(i.handler)?i.handler.bind(n):e[i.handler];Zt(s)&&Fn(r,s,i)}}function Ck(i){const e=i.type,{mixins:n,extends:t}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=i.appContext,l=s.get(e);let h;return l?h=l:!r.length&&!n&&!t?h=e:(h={},r.length&&r.forEach(u=>ob(h,u,a,!0)),ob(h,e,a)),ei(e)&&s.set(e,h),h}function ob(i,e,n,t=!1){const{mixins:r,extends:s}=e;s&&ob(i,s,n,!0),r&&r.forEach(a=>ob(i,a,n,!0));for(const a in e)if(!(t&&a==="expose")){const l=fie[a]||n&&n[a];i[a]=l?l(i[a],e[a]):e[a]}return i}const fie={data:ZA,props:KA,emits:KA,methods:jm,computed:jm,beforeCreate:Zr,created:Zr,beforeMount:Zr,mounted:Zr,beforeUpdate:Zr,updated:Zr,beforeDestroy:Zr,beforeUnmount:Zr,destroyed:Zr,unmounted:Zr,activated:Zr,deactivated:Zr,errorCaptured:Zr,serverPrefetch:Zr,components:jm,directives:jm,watch:mie,provide:ZA,inject:pie};function ZA(i,e){return e?i?function(){return vi(Zt(i)?i.call(this,this):i,Zt(e)?e.call(this,this):e)}:e:i}function pie(i,e){return jm(YS(i),YS(e))}function YS(i){if(Pt(i)){const e={};for(let n=0;n<i.length;n++)e[i[n]]=i[n];return e}return i}function Zr(i,e){return i?[...new Set([].concat(i,e))]:e}function jm(i,e){return i?vi(Object.create(null),i,e):e}function KA(i,e){return i?Pt(i)&&Pt(e)?[...new Set([...i,...e])]:vi(Object.create(null),Eg(i),Eg(e??{})):e}function mie(i,e){if(!i)return e;if(!e)return i;const n=vi(Object.create(null),i);for(const t in e)n[t]=Zr(i[t],e[t]);return n}function e$(){return{app:null,config:{isNativeTag:kte,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gie=0;function vie(i,e){return function(t,r=null){Zt(t)||(t=vi({},t)),r!=null&&!ei(r)&&(r=null);const s=e$(),a=new WeakSet;let l=!1;const h=s.app={_uid:gie++,_component:t,_props:r,_container:null,_context:s,_instance:null,version:k$,get config(){return s.config},set config(u){},use(u,...f){return a.has(u)||(u&&Zt(u.install)?(a.add(u),u.install(h,...f)):Zt(u)&&(a.add(u),u(h,...f))),h},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),h},component(u,f){return f?(s.components[u]=f,h):s.components[u]},directive(u,f){return f?(s.directives[u]=f,h):s.directives[u]},mount(u,f,p){if(!l){const g=Re(t,r);return g.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,u):i(g,u,p),l=!0,h._container=u,u.__vue_app__=h,bO(g.component)||g.component.proxy}},unmount(){l&&(i(null,h._container),delete h._container.__vue_app__)},provide(u,f){return s.provides[u]=f,h},runWithContext(u){const f=Hd;Hd=h;try{return u()}finally{Hd=f}}};return h}}let Hd=null;function Pg(i,e){if(Ji){let n=Ji.provides;const t=Ji.parent&&Ji.parent.provides;t===n&&(n=Ji.provides=Object.create(t)),n[i]=e}}function Gd(i,e,n=!1){const t=Ji||Xi;if(t||Hd){const r=t?t.parent==null?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides:Hd._context.provides;if(r&&i in r)return r[i];if(arguments.length>1)return n&&Zt(e)?e.call(t&&t.proxy):e}}function yie(){return!!(Ji||Xi||Hd)}const t$={},n$=()=>Object.create(t$),i$=i=>Object.getPrototypeOf(i)===t$;function bie(i,e,n,t=!1){const r={},s=n$();i.propsDefaults=Object.create(null),r$(i,e,r,s);for(const a in i.propsOptions[0])a in r||(r[a]=void 0);n?i.props=t?r:vN(r):i.type.props?i.props=r:i.props=s,i.attrs=s}function Oie(i,e,n,t){const{props:r,attrs:s,vnode:{patchFlag:a}}=i,l=Dn(r),[h]=i.propsOptions;let u=!1;if((t||a>0)&&!(a&16)){if(a&8){const f=i.vnode.dynamicProps;for(let p=0;p<f.length;p++){let g=f[p];if(fO(i.emitsOptions,g))continue;const v=e[g];if(h)if(Nn(s,g))v!==s[g]&&(s[g]=v,u=!0);else{const y=ns(g);r[y]=jS(h,l,y,v,i,!1)}else v!==s[g]&&(s[g]=v,u=!0)}}}else{r$(i,e,r,s)&&(u=!0);let f;for(const p in l)(!e||!Nn(e,p)&&((f=qs(p))===p||!Nn(e,f)))&&(h?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=jS(h,l,p,void 0,i,!0)):delete r[p]);if(s!==l)for(const p in s)(!e||!Nn(e,p))&&(delete s[p],u=!0)}u&&hl(i.attrs,"set","")}function r$(i,e,n,t){const[r,s]=i.propsOptions;let a=!1,l;if(e)for(let h in e){if(Ud(h))continue;const u=e[h];let f;r&&Nn(r,f=ns(h))?!s||!s.includes(f)?n[f]=u:(l||(l={}))[f]=u:fO(i.emitsOptions,h)||(!(h in t)||u!==t[h])&&(t[h]=u,a=!0)}if(s){const h=Dn(n),u=l||jn;for(let f=0;f<s.length;f++){const p=s[f];n[p]=jS(r,h,p,u[p],i,!Nn(u,p))}}return a}function jS(i,e,n,t,r,s){const a=i[n];if(a!=null){const l=Nn(a,"default");if(l&&t===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&Zt(h)){const{propsDefaults:u}=r;if(n in u)t=u[n];else{const f=pu(r);t=u[n]=h.call(null,e),f()}}else t=h}a[0]&&(s&&!l?t=!1:a[1]&&(t===""||t===qs(n))&&(t=!0))}return t}function s$(i,e,n=!1){const t=e.propsCache,r=t.get(i);if(r)return r;const s=i.props,a={},l=[];let h=!1;if(!Zt(i)){const f=p=>{h=!0;const[g,v]=s$(p,e,!0);vi(a,g),v&&l.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(f),i.extends&&f(i.extends),i.mixins&&i.mixins.forEach(f)}if(!s&&!h)return ei(i)&&t.set(i,Ld),Ld;if(Pt(s))for(let f=0;f<s.length;f++){const p=ns(s[f]);JA(p)&&(a[p]=jn)}else if(s)for(const f in s){const p=ns(f);if(JA(p)){const g=s[f],v=a[p]=Pt(g)||Zt(g)?{type:g}:vi({},g);if(v){const y=n4(Boolean,v.type),w=n4(String,v.type);v[0]=y>-1,v[1]=w<0||y<w,(y>-1||Nn(v,"default"))&&l.push(p)}}}const u=[a,l];return ei(i)&&t.set(i,u),u}function JA(i){return i[0]!=="$"&&!Ud(i)}function e4(i){return i===null?"null":typeof i=="function"?i.name||"":typeof i=="object"&&i.constructor&&i.constructor.name||""}function t4(i,e){return e4(i)===e4(e)}function n4(i,e){return Pt(e)?e.findIndex(n=>t4(n,i)):Zt(e)&&t4(e,i)?0:-1}const o$=i=>i[0]==="_"||i==="$stable",kk=i=>Pt(i)?i.map(js):[js(i)],xie=(i,e,n)=>{if(e._n)return e;const t=Je((...r)=>kk(e(...r)),n);return t._c=!1,t},a$=(i,e,n)=>{const t=i._ctx;for(const r in i){if(o$(r))continue;const s=i[r];if(Zt(s))e[r]=xie(r,s,t);else if(s!=null){const a=kk(s);e[r]=()=>a}}},l$=(i,e)=>{const n=kk(e);i.slots.default=()=>n},wie=(i,e)=>{const n=i.slots=n$();if(i.vnode.shapeFlag&32){const t=e._;t?(vi(n,e),JD(n,"_",t,!0)):a$(e,n)}else e&&l$(i,e)},_ie=(i,e,n)=>{const{vnode:t,slots:r}=i;let s=!0,a=jn;if(t.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:(vi(r,e),!n&&l===1&&delete r._):(s=!e.$stable,a$(e,r)),a=e}else e&&(l$(i,e),a={default:1});if(s)for(const l in r)!o$(l)&&a[l]==null&&delete r[l]};function ab(i,e,n,t,r=!1){if(Pt(i)){i.forEach((g,v)=>ab(g,e&&(Pt(e)?e[v]:e),n,t,r));return}if(Jh(t)&&!r)return;const s=t.shapeFlag&4?bO(t.component)||t.component.proxy:t.el,a=r?null:s,{i:l,r:h}=i,u=e&&e.r,f=l.refs===jn?l.refs={}:l.refs,p=l.setupState;if(u!=null&&u!==h&&(_i(u)?(f[u]=null,Nn(p,u)&&(p[u]=null)):Hi(u)&&(u.value=null)),Zt(h))ul(h,l,12,[a,f]);else{const g=_i(h),v=Hi(h);if(g||v){const y=()=>{if(i.f){const w=g?Nn(p,h)?p[h]:f[h]:h.value;r?Pt(w)&&rk(w,s):Pt(w)?w.includes(s)||w.push(s):g?(f[h]=[s],Nn(p,h)&&(p[h]=f[h])):(h.value=[s],i.k&&(f[i.k]=h.value))}else g?(f[h]=a,Nn(p,h)&&(p[h]=a)):v&&(h.value=a,i.k&&(f[i.k]=a))};a?(y.id=-1,gr(y,n)):y()}}}let Kl=!1;const Sie=i=>i.namespaceURI.includes("svg")&&i.tagName!=="foreignObject",Cie=i=>i.namespaceURI.includes("MathML"),Zv=i=>{if(Sie(i))return"svg";if(Cie(i))return"mathml"},Kv=i=>i.nodeType===8;function kie(i){const{mt:e,p:n,o:{patchProp:t,createText:r,nextSibling:s,parentNode:a,remove:l,insert:h,createComment:u}}=i,f=(O,k)=>{if(!k.hasChildNodes()){n(null,O,k),sb(),k._vnode=O;return}Kl=!1,p(k.firstChild,O,null,null,null),sb(),k._vnode=O,Kl&&console.error("Hydration completed but contains mismatches.")},p=(O,k,M,P,D,A=!1)=>{A=A||!!k.dynamicChildren;const R=Kv(O)&&O.data==="[",T=()=>w(O,k,M,P,D,R),{type:N,ref:L,shapeFlag:I,patchFlag:$}=k;let B=O.nodeType;k.el=O,$===-2&&(A=!1,k.dynamicChildren=null);let U=null;switch(N){case du:B!==3?k.children===""?(h(k.el=r(""),a(O),O),U=O):U=T():(O.data!==k.children&&(Kl=!0,O.data=k.children),U=s(O));break;case xr:_(O)?(U=s(O),S(k.el=O.content.firstChild,O,M)):B!==8||R?U=T():U=s(O);break;case eu:if(R&&(O=s(O),B=O.nodeType),B===1||B===3){U=O;const Y=!k.children.length;for(let Z=0;Z<k.staticCount;Z++)Y&&(k.children+=U.nodeType===1?U.outerHTML:U.data),Z===k.staticCount-1&&(k.anchor=U),U=s(U);return R?s(U):U}else T();break;case ai:R?U=y(O,k,M,P,D,A):U=T();break;default:if(I&1)(B!==1||k.type.toLowerCase()!==O.tagName.toLowerCase())&&!_(O)?U=T():U=g(O,k,M,P,D,A);else if(I&6){k.slotScopeIds=D;const Y=a(O);if(R?U=x(O):Kv(O)&&O.data==="teleport start"?U=x(O,O.data,"teleport end"):U=s(O),e(k,Y,null,M,P,Zv(Y),A),Jh(k)){let Z;R?(Z=Re(ai),Z.anchor=U?U.previousSibling:Y.lastChild):Z=O.nodeType===3?li(""):Re("div"),Z.el=O,k.component.subTree=Z}}else I&64?B!==8?U=T():U=k.type.hydrate(O,k,M,P,D,A,i,v):I&128&&(U=k.type.hydrate(O,k,M,P,Zv(a(O)),D,A,i,p))}return L!=null&&ab(L,null,P,k),U},g=(O,k,M,P,D,A)=>{A=A||!!k.dynamicChildren;const{type:R,props:T,patchFlag:N,shapeFlag:L,dirs:I,transition:$}=k,B=R==="input"||R==="option";if(B||N!==-1){I&&pa(k,null,M,"created");let U=!1;if(_(O)){U=u$(P,$)&&M&&M.vnode.props&&M.vnode.props.appear;const Z=O.content.firstChild;U&&$.beforeEnter(Z),S(Z,O,M),k.el=O=Z}if(L&16&&!(T&&(T.innerHTML||T.textContent))){let Z=v(O.firstChild,k,O,M,P,D,A);for(;Z;){Kl=!0;const ie=Z;Z=Z.nextSibling,l(ie)}}else L&8&&O.textContent!==k.children&&(Kl=!0,O.textContent=k.children);if(T)if(B||!A||N&48)for(const Z in T)(B&&(Z.endsWith("value")||Z==="indeterminate")||m0(Z)&&!Ud(Z)||Z[0]===".")&&t(O,Z,null,T[Z],void 0,void 0,M);else T.onClick&&t(O,"onClick",null,T.onClick,void 0,void 0,M);let Y;(Y=T&&T.onVnodeBeforeMount)&&bs(Y,M,k),I&&pa(k,null,M,"beforeMount"),((Y=T&&T.onVnodeMounted)||I||U)&&RN(()=>{Y&&bs(Y,M,k),U&&$.enter(O),I&&pa(k,null,M,"mounted")},P)}return O.nextSibling},v=(O,k,M,P,D,A,R)=>{R=R||!!k.dynamicChildren;const T=k.children,N=T.length;for(let L=0;L<N;L++){const I=R?T[L]:T[L]=js(T[L]);if(O)O=p(O,I,P,D,A,R);else{if(I.type===du&&!I.children)continue;Kl=!0,n(null,I,M,null,P,D,Zv(M),A)}}return O},y=(O,k,M,P,D,A)=>{const{slotScopeIds:R}=k;R&&(D=D?D.concat(R):R);const T=a(O),N=v(s(O),k,T,M,P,D,A);return N&&Kv(N)&&N.data==="]"?s(k.anchor=N):(Kl=!0,h(k.anchor=u("]"),T,N),N)},w=(O,k,M,P,D,A)=>{if(Kl=!0,k.el=null,A){const N=x(O);for(;;){const L=s(O);if(L&&L!==N)l(L);else break}}const R=s(O),T=a(O);return l(O),n(null,k,T,R,M,P,Zv(T),D),R},x=(O,k="[",M="]")=>{let P=0;for(;O;)if(O=s(O),O&&Kv(O)&&(O.data===k&&P++,O.data===M)){if(P===0)return s(O);P--}return O},S=(O,k,M)=>{const P=k.parentNode;P&&P.replaceChild(O,k);let D=M;for(;D;)D.vnode.el===k&&(D.vnode.el=D.subTree.el=O),D=D.parent},_=O=>O.nodeType===1&&O.tagName.toLowerCase()==="template";return[f,p]}const gr=RN;function Tk(i){return h$(i)}function c$(i){return h$(i,kie)}function h$(i,e){const n=eN();n.__VUE__=!0;const{insert:t,remove:r,patchProp:s,createElement:a,createText:l,createComment:h,setText:u,setElementText:f,parentNode:p,nextSibling:g,setScopeId:v=Ss,insertStaticContent:y}=i,w=(H,q,le,fe=null,be=null,Me=null,J=void 0,Q=null,ue=!!q.dynamicChildren)=>{if(H===q)return;H&&!Qo(H,q)&&(fe=j(H),Ae(H,be,Me,!0),H=null),q.patchFlag===-2&&(ue=!1,q.dynamicChildren=null);const{type:de,ref:we,shapeFlag:Te}=q;switch(de){case du:x(H,q,le,fe);break;case xr:S(H,q,le,fe);break;case eu:H==null&&_(q,le,fe,J);break;case ai:L(H,q,le,fe,be,Me,J,Q,ue);break;default:Te&1?M(H,q,le,fe,be,Me,J,Q,ue):Te&6?I(H,q,le,fe,be,Me,J,Q,ue):(Te&64||Te&128)&&de.process(H,q,le,fe,be,Me,J,Q,ue,F)}we!=null&&be&&ab(we,H&&H.ref,Me,q||H,!q)},x=(H,q,le,fe)=>{if(H==null)t(q.el=l(q.children),le,fe);else{const be=q.el=H.el;q.children!==H.children&&u(be,q.children)}},S=(H,q,le,fe)=>{H==null?t(q.el=h(q.children||""),le,fe):q.el=H.el},_=(H,q,le,fe)=>{[H.el,H.anchor]=y(H.children,q,le,fe,H.el,H.anchor)},O=({el:H,anchor:q},le,fe)=>{let be;for(;H&&H!==q;)be=g(H),t(H,le,fe),H=be;t(q,le,fe)},k=({el:H,anchor:q})=>{let le;for(;H&&H!==q;)le=g(H),r(H),H=le;r(q)},M=(H,q,le,fe,be,Me,J,Q,ue)=>{q.type==="svg"?J="svg":q.type==="math"&&(J="mathml"),H==null?P(q,le,fe,be,Me,J,Q,ue):R(H,q,be,Me,J,Q,ue)},P=(H,q,le,fe,be,Me,J,Q)=>{let ue,de;const{props:we,shapeFlag:Te,transition:Xe,dirs:Ve}=H;if(ue=H.el=a(H.type,Me,we&&we.is,we),Te&8?f(ue,H.children):Te&16&&A(H.children,ue,null,fe,be,Qw(H,Me),J,Q),Ve&&pa(H,null,fe,"created"),D(ue,H,H.scopeId,J,fe),we){for(const rt in we)rt!=="value"&&!Ud(rt)&&s(ue,rt,null,we[rt],Me,H.children,fe,be,pe);"value"in we&&s(ue,"value",null,we.value,Me),(de=we.onVnodeBeforeMount)&&bs(de,fe,H)}Ve&&pa(H,null,fe,"beforeMount");const ze=u$(be,Xe);ze&&Xe.beforeEnter(ue),t(ue,q,le),((de=we&&we.onVnodeMounted)||ze||Ve)&&gr(()=>{de&&bs(de,fe,H),ze&&Xe.enter(ue),Ve&&pa(H,null,fe,"mounted")},be)},D=(H,q,le,fe,be)=>{if(le&&v(H,le),fe)for(let Me=0;Me<fe.length;Me++)v(H,fe[Me]);if(be){let Me=be.subTree;if(q===Me){const J=be.vnode;D(H,J,J.scopeId,J.slotScopeIds,be.parent)}}},A=(H,q,le,fe,be,Me,J,Q,ue=0)=>{for(let de=ue;de<H.length;de++){const we=H[de]=Q?gc(H[de]):js(H[de]);w(null,we,q,le,fe,be,Me,J,Q)}},R=(H,q,le,fe,be,Me,J)=>{const Q=q.el=H.el;let{patchFlag:ue,dynamicChildren:de,dirs:we}=q;ue|=H.patchFlag&16;const Te=H.props||jn,Xe=q.props||jn;let Ve;if(le&&yh(le,!1),(Ve=Xe.onVnodeBeforeUpdate)&&bs(Ve,le,q,H),we&&pa(q,H,le,"beforeUpdate"),le&&yh(le,!0),de?T(H.dynamicChildren,de,Q,le,fe,Qw(q,be),Me):J||Z(H,q,Q,null,le,fe,Qw(q,be),Me,!1),ue>0){if(ue&16)N(Q,q,Te,Xe,le,fe,be);else if(ue&2&&Te.class!==Xe.class&&s(Q,"class",null,Xe.class,be),ue&4&&s(Q,"style",Te.style,Xe.style,be),ue&8){const ze=q.dynamicProps;for(let rt=0;rt<ze.length;rt++){const Ge=ze[rt],it=Te[Ge],kt=Xe[Ge];(kt!==it||Ge==="value")&&s(Q,Ge,it,kt,be,H.children,le,fe,pe)}}ue&1&&H.children!==q.children&&f(Q,q.children)}else!J&&de==null&&N(Q,q,Te,Xe,le,fe,be);((Ve=Xe.onVnodeUpdated)||we)&&gr(()=>{Ve&&bs(Ve,le,q,H),we&&pa(q,H,le,"updated")},fe)},T=(H,q,le,fe,be,Me,J)=>{for(let Q=0;Q<q.length;Q++){const ue=H[Q],de=q[Q],we=ue.el&&(ue.type===ai||!Qo(ue,de)||ue.shapeFlag&70)?p(ue.el):le;w(ue,de,we,null,fe,be,Me,J,!0)}},N=(H,q,le,fe,be,Me,J)=>{if(le!==fe){if(le!==jn)for(const Q in le)!Ud(Q)&&!(Q in fe)&&s(H,Q,le[Q],null,J,q.children,be,Me,pe);for(const Q in fe){if(Ud(Q))continue;const ue=fe[Q],de=le[Q];ue!==de&&Q!=="value"&&s(H,Q,de,ue,J,q.children,be,Me,pe)}"value"in fe&&s(H,"value",le.value,fe.value,J)}},L=(H,q,le,fe,be,Me,J,Q,ue)=>{const de=q.el=H?H.el:l(""),we=q.anchor=H?H.anchor:l("");let{patchFlag:Te,dynamicChildren:Xe,slotScopeIds:Ve}=q;Ve&&(Q=Q?Q.concat(Ve):Ve),H==null?(t(de,le,fe),t(we,le,fe),A(q.children||[],le,we,be,Me,J,Q,ue)):Te>0&&Te&64&&Xe&&H.dynamicChildren?(T(H.dynamicChildren,Xe,le,be,Me,J,Q),(q.key!=null||be&&q===be.subTree)&&Mk(H,q,!0)):Z(H,q,le,we,be,Me,J,Q,ue)},I=(H,q,le,fe,be,Me,J,Q,ue)=>{q.slotScopeIds=Q,H==null?q.shapeFlag&512?be.ctx.activate(q,le,fe,J,ue):$(q,le,fe,be,Me,J,ue):B(H,q,ue)},$=(H,q,le,fe,be,Me,J)=>{const Q=H.component=b$(H,fe,be);if(b0(H)&&(Q.ctx.renderer=F),x$(Q),Q.asyncDep){if(be&&be.registerDep(Q,U),!H.el){const ue=Q.subTree=Re(xr);S(null,ue,q,le)}}else U(Q,H,q,le,be,Me,J)},B=(H,q,le)=>{const fe=q.component=H.component;if(Nne(H,q,le))if(fe.asyncDep&&!fe.asyncResolved){Y(fe,q,le);return}else fe.next=q,Mne(fe.update),fe.effect.dirty=!0,fe.update();else q.el=H.el,fe.vnode=q},U=(H,q,le,fe,be,Me,J)=>{const Q=()=>{if(H.isMounted){let{next:we,bu:Te,u:Xe,parent:Ve,vnode:ze}=H;{const Tt=d$(H);if(Tt){we&&(we.el=ze.el,Y(H,we,J)),Tt.asyncDep.then(()=>{H.isUnmounted||Q()});return}}let rt=we,Ge;yh(H,!1),we?(we.el=ze.el,Y(H,we,J)):we=ze,Te&&zd(Te),(Ge=we.props&&we.props.onVnodeBeforeUpdate)&&bs(Ge,Ve,we,ze),yh(H,!0);const it=E1(H),kt=H.subTree;H.subTree=it,w(kt,it,p(kt.el),j(kt),H,be,Me),we.el=it.el,rt===null&&yk(H,it.el),Xe&&gr(Xe,be),(Ge=we.props&&we.props.onVnodeUpdated)&&gr(()=>bs(Ge,Ve,we,ze),be)}else{let we;const{el:Te,props:Xe}=q,{bm:Ve,m:ze,parent:rt}=H,Ge=Jh(q);if(yh(H,!1),Ve&&zd(Ve),!Ge&&(we=Xe&&Xe.onVnodeBeforeMount)&&bs(we,rt,q),yh(H,!0),Te&&re){const it=()=>{H.subTree=E1(H),re(Te,H.subTree,H,be,null)};Ge?q.type.__asyncLoader().then(()=>!H.isUnmounted&&it()):it()}else{const it=H.subTree=E1(H);w(null,it,le,fe,H,be,Me),q.el=it.el}if(ze&&gr(ze,be),!Ge&&(we=Xe&&Xe.onVnodeMounted)){const it=q;gr(()=>bs(we,rt,it),be)}(q.shapeFlag&256||rt&&Jh(rt.vnode)&&rt.vnode.shapeFlag&256)&&H.a&&gr(H.a,be),H.isMounted=!0,q=le=fe=null}},ue=H.effect=new lf(Q,Ss,()=>dO(de),H.scope),de=H.update=()=>{ue.dirty&&ue.run()};de.id=H.uid,yh(H,!0),de()},Y=(H,q,le)=>{q.component=H;const fe=H.vnode.props;H.vnode=q,H.next=null,Oie(H,q.props,fe,le),_ie(H,q.children,le),Yc(),QA(H),jc()},Z=(H,q,le,fe,be,Me,J,Q,ue=!1)=>{const de=H&&H.children,we=H?H.shapeFlag:0,Te=q.children,{patchFlag:Xe,shapeFlag:Ve}=q;if(Xe>0){if(Xe&128){ce(de,Te,le,fe,be,Me,J,Q,ue);return}else if(Xe&256){ie(de,Te,le,fe,be,Me,J,Q,ue);return}}Ve&8?(we&16&&pe(de,be,Me),Te!==de&&f(le,Te)):we&16?Ve&16?ce(de,Te,le,fe,be,Me,J,Q,ue):pe(de,be,Me,!0):(we&8&&f(le,""),Ve&16&&A(Te,le,fe,be,Me,J,Q,ue))},ie=(H,q,le,fe,be,Me,J,Q,ue)=>{H=H||Ld,q=q||Ld;const de=H.length,we=q.length,Te=Math.min(de,we);let Xe;for(Xe=0;Xe<Te;Xe++){const Ve=q[Xe]=ue?gc(q[Xe]):js(q[Xe]);w(H[Xe],Ve,le,null,be,Me,J,Q,ue)}de>we?pe(H,be,Me,!0,!1,Te):A(q,le,fe,be,Me,J,Q,ue,Te)},ce=(H,q,le,fe,be,Me,J,Q,ue)=>{let de=0;const we=q.length;let Te=H.length-1,Xe=we-1;for(;de<=Te&&de<=Xe;){const Ve=H[de],ze=q[de]=ue?gc(q[de]):js(q[de]);if(Qo(Ve,ze))w(Ve,ze,le,null,be,Me,J,Q,ue);else break;de++}for(;de<=Te&&de<=Xe;){const Ve=H[Te],ze=q[Xe]=ue?gc(q[Xe]):js(q[Xe]);if(Qo(Ve,ze))w(Ve,ze,le,null,be,Me,J,Q,ue);else break;Te--,Xe--}if(de>Te){if(de<=Xe){const Ve=Xe+1,ze=Ve<we?q[Ve].el:fe;for(;de<=Xe;)w(null,q[de]=ue?gc(q[de]):js(q[de]),le,ze,be,Me,J,Q,ue),de++}}else if(de>Xe)for(;de<=Te;)Ae(H[de],be,Me,!0),de++;else{const Ve=de,ze=de,rt=new Map;for(de=ze;de<=Xe;de++){const _e=q[de]=ue?gc(q[de]):js(q[de]);_e.key!=null&&rt.set(_e.key,de)}let Ge,it=0;const kt=Xe-ze+1;let Tt=!1,ut=0;const Ut=new Array(kt);for(de=0;de<kt;de++)Ut[de]=0;for(de=Ve;de<=Te;de++){const _e=H[de];if(it>=kt){Ae(_e,be,Me,!0);continue}let Le;if(_e.key!=null)Le=rt.get(_e.key);else for(Ge=ze;Ge<=Xe;Ge++)if(Ut[Ge-ze]===0&&Qo(_e,q[Ge])){Le=Ge;break}Le===void 0?Ae(_e,be,Me,!0):(Ut[Le-ze]=de+1,Le>=ut?ut=Le:Tt=!0,w(_e,q[Le],le,null,be,Me,J,Q,ue),it++)}const sn=Tt?Tie(Ut):Ld;for(Ge=sn.length-1,de=kt-1;de>=0;de--){const _e=ze+de,Le=q[_e],me=_e+1<we?q[_e+1].el:fe;Ut[de]===0?w(null,Le,le,me,be,Me,J,Q,ue):Tt&&(Ge<0||de!==sn[Ge]?ge(Le,le,me,2):Ge--)}}},ge=(H,q,le,fe,be=null)=>{const{el:Me,type:J,transition:Q,children:ue,shapeFlag:de}=H;if(de&6){ge(H.component.subTree,q,le,fe);return}if(de&128){H.suspense.move(q,le,fe);return}if(de&64){J.move(H,q,le,F);return}if(J===ai){t(Me,q,le);for(let Te=0;Te<ue.length;Te++)ge(ue[Te],q,le,fe);t(H.anchor,q,le);return}if(J===eu){O(H,q,le);return}if(fe!==2&&de&1&&Q)if(fe===0)Q.beforeEnter(Me),t(Me,q,le),gr(()=>Q.enter(Me),be);else{const{leave:Te,delayLeave:Xe,afterLeave:Ve}=Q,ze=()=>t(Me,q,le),rt=()=>{Te(Me,()=>{ze(),Ve&&Ve()})};Xe?Xe(Me,ze,rt):rt()}else t(Me,q,le)},Ae=(H,q,le,fe=!1,be=!1)=>{const{type:Me,props:J,ref:Q,children:ue,dynamicChildren:de,shapeFlag:we,patchFlag:Te,dirs:Xe}=H;if(Q!=null&&ab(Q,null,le,H,!0),we&256){q.ctx.deactivate(H);return}const Ve=we&1&&Xe,ze=!Jh(H);let rt;if(ze&&(rt=J&&J.onVnodeBeforeUnmount)&&bs(rt,q,H),we&6)Ce(H.component,le,fe);else{if(we&128){H.suspense.unmount(le,fe);return}Ve&&pa(H,null,q,"beforeUnmount"),we&64?H.type.remove(H,q,le,be,F,fe):de&&(Me!==ai||Te>0&&Te&64)?pe(de,q,le,!1,!0):(Me===ai&&Te&384||!be&&we&16)&&pe(ue,q,le),fe&&Se(H)}(ze&&(rt=J&&J.onVnodeUnmounted)||Ve)&&gr(()=>{rt&&bs(rt,q,H),Ve&&pa(H,null,q,"unmounted")},le)},Se=H=>{const{type:q,el:le,anchor:fe,transition:be}=H;if(q===ai){he(le,fe);return}if(q===eu){k(H);return}const Me=()=>{r(le),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(H.shapeFlag&1&&be&&!be.persisted){const{leave:J,delayLeave:Q}=be,ue=()=>J(le,Me);Q?Q(H.el,Me,ue):ue()}else Me()},he=(H,q)=>{let le;for(;H!==q;)le=g(H),r(H),H=le;r(q)},Ce=(H,q,le)=>{const{bum:fe,scope:be,update:Me,subTree:J,um:Q}=H;fe&&zd(fe),be.stop(),Me&&(Me.active=!1,Ae(J,H,q,le)),Q&&gr(Q,q),gr(()=>{H.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},pe=(H,q,le,fe=!1,be=!1,Me=0)=>{for(let J=Me;J<H.length;J++)Ae(H[J],q,le,fe,be)},j=H=>H.shapeFlag&6?j(H.component.subTree):H.shapeFlag&128?H.suspense.next():g(H.anchor||H.el);let K=!1;const X=(H,q,le)=>{H==null?q._vnode&&Ae(q._vnode,null,null,!0):w(q._vnode||null,H,q,null,null,null,le),K||(K=!0,QA(),sb(),K=!1),q._vnode=H},F={p:w,um:Ae,m:ge,r:Se,mt:$,mc:A,pc:Z,pbc:T,n:j,o:i};let te,re;return e&&([te,re]=e(F)),{render:X,hydrate:te,createApp:vie(X,te)}}function Qw({type:i,props:e},n){return n==="svg"&&i==="foreignObject"||n==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function yh({effect:i,update:e},n){i.allowRecurse=e.allowRecurse=n}function u$(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function Mk(i,e,n=!1){const t=i.children,r=e.children;if(Pt(t)&&Pt(r))for(let s=0;s<t.length;s++){const a=t[s];let l=r[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[s]=gc(r[s]),l.el=a.el),n||Mk(a,l)),l.type===du&&(l.el=a.el)}}function Tie(i){const e=i.slice(),n=[0];let t,r,s,a,l;const h=i.length;for(t=0;t<h;t++){const u=i[t];if(u!==0){if(r=n[n.length-1],i[r]<u){e[t]=r,n.push(t);continue}for(s=0,a=n.length-1;s<a;)l=s+a>>1,i[n[l]]<u?s=l+1:a=l;u<i[n[s]]&&(s>0&&(e[t]=n[s-1]),n[s]=t)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}function d$(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:d$(e)}const Mie=i=>i.__isTeleport,ag=i=>i&&(i.disabled||i.disabled===""),i4=i=>typeof SVGElement<"u"&&i instanceof SVGElement,r4=i=>typeof MathMLElement=="function"&&i instanceof MathMLElement,qS=(i,e)=>{const n=i&&i.to;return _i(n)?e?e(n):null:n},Eie={name:"Teleport",__isTeleport:!0,process(i,e,n,t,r,s,a,l,h,u){const{mc:f,pc:p,pbc:g,o:{insert:v,querySelector:y,createText:w,createComment:x}}=u,S=ag(e.props);let{shapeFlag:_,children:O,dynamicChildren:k}=e;if(i==null){const M=e.el=w(""),P=e.anchor=w("");v(M,n,t),v(P,n,t);const D=e.target=qS(e.props,y),A=e.targetAnchor=w("");D&&(v(A,D),a==="svg"||i4(D)?a="svg":(a==="mathml"||r4(D))&&(a="mathml"));const R=(T,N)=>{_&16&&f(O,T,N,r,s,a,l,h)};S?R(n,P):D&&R(D,A)}else{e.el=i.el;const M=e.anchor=i.anchor,P=e.target=i.target,D=e.targetAnchor=i.targetAnchor,A=ag(i.props),R=A?n:P,T=A?M:D;if(a==="svg"||i4(P)?a="svg":(a==="mathml"||r4(P))&&(a="mathml"),k?(g(i.dynamicChildren,k,R,r,s,a,l),Mk(i,e,!0)):h||p(i,e,R,T,r,s,a,l,!1),S)A?e.props&&i.props&&e.props.to!==i.props.to&&(e.props.to=i.props.to):Jv(e,n,M,u,1);else if((e.props&&e.props.to)!==(i.props&&i.props.to)){const N=e.target=qS(e.props,y);N&&Jv(e,N,null,u,0)}else A&&Jv(e,P,D,u,1)}f$(e)},remove(i,e,n,t,{um:r,o:{remove:s}},a){const{shapeFlag:l,children:h,anchor:u,targetAnchor:f,target:p,props:g}=i;if(p&&s(f),a&&s(u),l&16){const v=a||!ag(g);for(let y=0;y<h.length;y++){const w=h[y];r(w,e,n,v,!!w.dynamicChildren)}}},move:Jv,hydrate:Pie};function Jv(i,e,n,{o:{insert:t},m:r},s=2){s===0&&t(i.targetAnchor,e,n);const{el:a,anchor:l,shapeFlag:h,children:u,props:f}=i,p=s===2;if(p&&t(a,e,n),(!p||ag(f))&&h&16)for(let g=0;g<u.length;g++)r(u[g],e,n,2);p&&t(l,e,n)}function Pie(i,e,n,t,r,s,{o:{nextSibling:a,parentNode:l,querySelector:h}},u){const f=e.target=qS(e.props,h);if(f){const p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(ag(e.props))e.anchor=u(a(i),e,l(i),n,t,r,s),e.targetAnchor=p;else{e.anchor=a(i);let g=p;for(;g;)if(g=a(g),g&&g.nodeType===8&&g.data==="teleport anchor"){e.targetAnchor=g,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}u(p,e,f,n,t,r,s)}f$(e)}return e.anchor&&a(e.anchor)}const Aie=Eie;function f$(i){const e=i.ctx;if(e&&e.ut){let n=i.children[0].el;for(;n&&n!==i.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const ai=Symbol.for("v-fgt"),du=Symbol.for("v-txt"),xr=Symbol.for("v-cmt"),eu=Symbol.for("v-stc"),lg=[];let Cs=null;function mn(i=!1){lg.push(Cs=i?null:[])}function p$(){lg.pop(),Cs=lg[lg.length-1]||null}let fu=1;function ZS(i){fu+=i}function m$(i){return i.dynamicChildren=fu>0?Cs||Ld:null,p$(),fu>0&&Cs&&Cs.push(i),i}function xi(i,e,n,t,r,s){return m$(jt(i,e,n,t,r,s,!0))}function _r(i,e,n,t,r){return m$(Re(i,e,n,t,r,!0))}function Nc(i){return i?i.__v_isVNode===!0:!1}function Qo(i,e){return i.type===e.type&&i.key===e.key}function Rie(i){}const g$=({key:i})=>i??null,P1=({ref:i,ref_key:e,ref_for:n})=>(typeof i=="number"&&(i=""+i),i!=null?_i(i)||Hi(i)||Zt(i)?{i:Xi,r:i,k:e,f:!!n}:i:null);function jt(i,e=null,n=null,t=0,r=null,s=i===ai?0:1,a=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&g$(e),ref:e&&P1(e),scopeId:pO,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:t,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Xi};return l?(Pk(h,n),s&128&&i.normalize(h)):n&&(h.shapeFlag|=_i(n)?8:16),fu>0&&!a&&Cs&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&Cs.push(h),h}const Re=Iie;function Iie(i,e=null,n=null,t=0,r=null,s=!1){if((!i||i===EN)&&(i=xr),Nc(i)){const l=Ca(i,e,!0);return n&&Pk(l,n),fu>0&&!s&&Cs&&(l.shapeFlag&6?Cs[Cs.indexOf(i)]=l:Cs.push(l)),l.patchFlag|=-2,l}if(zie(i)&&(i=i.__vccOpts),e){e=v$(e);let{class:l,style:h}=e;l&&!_i(l)&&(e.class=$f(l)),ei(h)&&(dk(h)&&!Pt(h)&&(h=vi({},h)),e.style=Gc(h))}const a=_i(i)?1:PN(i)?128:Mie(i)?64:ei(i)?4:Zt(i)?2:0;return jt(i,e,n,t,r,a,s,!0)}function v$(i){return i?dk(i)||i$(i)?vi({},i):i:null}function Ca(i,e,n=!1,t=!1){const{props:r,ref:s,patchFlag:a,children:l,transition:h}=i,u=e?y$(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:i.type,props:u,key:u&&g$(u),ref:e&&e.ref?n&&s?Pt(s)?s.concat(P1(e)):[s,P1(e)]:P1(e):s,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:l,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==ai?a===-1?16:a|16:a,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:h,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ca(i.ssContent),ssFallback:i.ssFallback&&Ca(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return h&&t&&(f.transition=h.clone(f)),f}function li(i=" ",e=0){return Re(du,null,i,e)}function Die(i,e){const n=Re(eu,null,i);return n.staticCount=e,n}function Ek(i="",e=!1){return e?(mn(),_r(xr,null,i)):Re(xr,null,i)}function js(i){return i==null||typeof i=="boolean"?Re(xr):Pt(i)?Re(ai,null,i.slice()):typeof i=="object"?gc(i):Re(du,null,String(i))}function gc(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ca(i)}function Pk(i,e){let n=0;const{shapeFlag:t}=i;if(e==null)e=null;else if(Pt(e))n=16;else if(typeof e=="object")if(t&65){const r=e.default;r&&(r._c&&(r._d=!1),Pk(i,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!i$(e)?e._ctx=Xi:r===3&&Xi&&(Xi.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else Zt(e)?(e={default:e,_ctx:Xi},n=32):(e=String(e),t&64?(n=16,e=[li(e)]):n=8);i.children=e,i.shapeFlag|=n}function y$(...i){const e={};for(let n=0;n<i.length;n++){const t=i[n];for(const r in t)if(r==="class")e.class!==t.class&&(e.class=$f([e.class,t.class]));else if(r==="style")e.style=Gc([e.style,t.style]);else if(m0(r)){const s=e[r],a=t[r];a&&s!==a&&!(Pt(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=t[r])}return e}function bs(i,e,n,t=null){to(i,e,7,[n,t])}const Nie=e$();let $ie=0;function b$(i,e,n){const t=i.type,r=(e?e.appContext:i.appContext)||Nie,s={uid:$ie++,vnode:i,type:t,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new ak(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:s$(t,r),emitsOptions:kN(t,r),emit:null,emitted:null,propsDefaults:jn,inheritAttrs:t.inheritAttrs,ctx:jn,data:jn,props:jn,attrs:jn,slots:jn,refs:jn,setupState:jn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Pne.bind(null,s),i.ce&&i.ce(s),s}let Ji=null;const io=()=>Ji||Xi;let lb,KS;{const i=eN(),e=(n,t)=>{let r;return(r=i[n])||(r=i[n]=[]),r.push(t),s=>{r.length>1?r.forEach(a=>a(s)):r[0](s)}};lb=e("__VUE_INSTANCE_SETTERS__",n=>Ji=n),KS=e("__VUE_SSR_SETTERS__",n=>O0=n)}const pu=i=>{const e=Ji;return lb(i),i.scope.on(),()=>{i.scope.off(),lb(e)}},JS=()=>{Ji&&Ji.scope.off(),lb(null)};function O$(i){return i.vnode.shapeFlag&4}let O0=!1;function x$(i,e=!1){e&&KS(e);const{props:n,children:t}=i.vnode,r=O$(i);bie(i,n,r,e),wie(i,t);const s=r?Vie(i,e):void 0;return e&&KS(!1),s}function Vie(i,e){const n=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,HS);const{setup:t}=n;if(t){const r=i.setupContext=t.length>1?_$(i):null,s=pu(i);Yc();const a=ul(t,i,0,[i.props,r]);if(jc(),s(),sk(a)){if(a.then(JS,JS),e)return a.then(l=>{eC(i,l,e)}).catch(l=>{Cu(l,i,0)});i.asyncDep=a}else eC(i,a,e)}else w$(i,e)}function eC(i,e,n){Zt(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:ei(e)&&(i.setupState=mk(e)),w$(i,n)}let cb,tC;function Lie(i){cb=i,tC=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,Jne))}}const Bie=()=>!cb;function w$(i,e,n){const t=i.type;if(!i.render){if(!e&&cb&&!t.render){const r=t.template||Ck(i).template;if(r){const{isCustomElement:s,compilerOptions:a}=i.appContext.config,{delimiters:l,compilerOptions:h}=t,u=vi(vi({isCustomElement:s,delimiters:l},a),h);t.render=cb(r,u)}}i.render=t.render||Ss,tC&&tC(i)}{const r=pu(i);Yc();try{uie(i)}finally{jc(),r()}}}const Uie={get(i,e){return Ps(i,"get",""),i[e]}};function _$(i){const e=n=>{i.exposed=n||{}};return{attrs:new Proxy(i.attrs,Uie),slots:i.slots,emit:i.emit,expose:e}}function bO(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(mk(yN(i.exposed)),{get(e,n){if(n in e)return e[n];if(n in og)return og[n](i)},has(e,n){return n in e||n in og}}))}function nC(i,e=!0){return Zt(i)?i.displayName||i.name:i.name||e&&i.__name}function zie(i){return Zt(i)&&"__vccOpts"in i}const ci=(i,e)=>dne(i,e,O0);function S$(i,e,n=jn){const t=io(),r=ns(e),s=qs(e),a=gk((h,u)=>{let f;return $N(()=>{const p=i[e];jo(f,p)&&(f=p,u())}),{get(){return h(),n.get?n.get(f):f},set(p){const g=t.vnode.props;!(g&&(e in g||r in g||s in g)&&(`onUpdate:${e}`in g||`onUpdate:${r}`in g||`onUpdate:${s}`in g))&&jo(p,f)&&(f=p,u()),t.emit(`update:${e}`,n.set?n.set(p):p)}}}),l=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return a[Symbol.iterator]=()=>{let h=0;return{next(){return h<2?{value:h++?i[l]||{}:a,done:!1}:{done:!0}}}},a}function hb(i,e,n){const t=arguments.length;return t===2?ei(e)&&!Pt(e)?Nc(e)?Re(i,null,[e]):Re(i,e):Re(i,null,e):(t>3?n=Array.prototype.slice.call(arguments,2):t===3&&Nc(n)&&(n=[n]),Re(i,e,n))}function Fie(){}function Xie(i,e,n,t){const r=n[t];if(r&&C$(r,i))return r;const s=e();return s.memo=i.slice(),n[t]=s}function C$(i,e){const n=i.memo;if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(jo(n[t],e[t]))return!1;return fu>0&&Cs&&Cs.push(i),!0}const k$="3.4.27",Wie=Ss,Qie=Cne,Hie=Td,Gie=CN,Yie={createComponentInstance:b$,setupComponent:x$,renderComponentRoot:E1,setCurrentRenderingInstance:Tg,isVNode:Nc,normalizeVNode:js},jie=Yie,qie=null,Zie=null,Kie=null;/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Jie="http://www.w3.org/2000/svg",ere="http://www.w3.org/1998/Math/MathML",vc=typeof document<"u"?document:null,s4=vc&&vc.createElement("template"),tre={insert:(i,e,n)=>{e.insertBefore(i,n||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,n,t)=>{const r=e==="svg"?vc.createElementNS(Jie,i):e==="mathml"?vc.createElementNS(ere,i):vc.createElement(i,n?{is:n}:void 0);return i==="select"&&t&&t.multiple!=null&&r.setAttribute("multiple",t.multiple),r},createText:i=>vc.createTextNode(i),createComment:i=>vc.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>vc.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,n,t,r,s){const a=n?n.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{s4.innerHTML=t==="svg"?`<svg>${i}</svg>`:t==="mathml"?`<math>${i}</math>`:i;const l=s4.content;if(t==="svg"||t==="mathml"){const h=l.firstChild;for(;h.firstChild;)l.appendChild(h.firstChild);l.removeChild(h)}e.insertBefore(l,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Jl="transition",Dp="animation",uf=Symbol("_vtc"),Ak=(i,{slots:e})=>hb(LN,M$(i),e);Ak.displayName="Transition";const T$={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},nre=Ak.props=vi({},_k,T$),bh=(i,e=[])=>{Pt(i)?i.forEach(n=>n(...e)):i&&i(...e)},o4=i=>i?Pt(i)?i.some(e=>e.length>1):i.length>1:!1;function M$(i){const e={};for(const L in i)L in T$||(e[L]=i[L]);if(i.css===!1)return e;const{name:n="v",type:t,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:h=s,appearActiveClass:u=a,appearToClass:f=l,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=i,y=ire(r),w=y&&y[0],x=y&&y[1],{onBeforeEnter:S,onEnter:_,onEnterCancelled:O,onLeave:k,onLeaveCancelled:M,onBeforeAppear:P=S,onAppear:D=_,onAppearCancelled:A=O}=e,R=(L,I,$)=>{fc(L,I?f:l),fc(L,I?u:a),$&&$()},T=(L,I)=>{L._isLeaving=!1,fc(L,p),fc(L,v),fc(L,g),I&&I()},N=L=>(I,$)=>{const B=L?D:_,U=()=>R(I,L,$);bh(B,[I,U]),a4(()=>{fc(I,L?h:s),tl(I,L?f:l),o4(B)||l4(I,t,w,U)})};return vi(e,{onBeforeEnter(L){bh(S,[L]),tl(L,s),tl(L,a)},onBeforeAppear(L){bh(P,[L]),tl(L,h),tl(L,u)},onEnter:N(!1),onAppear:N(!0),onLeave(L,I){L._isLeaving=!0;const $=()=>T(L,I);tl(L,p),tl(L,g),P$(),a4(()=>{L._isLeaving&&(fc(L,p),tl(L,v),o4(k)||l4(L,t,x,$))}),bh(k,[L,$])},onEnterCancelled(L){R(L,!1),bh(O,[L])},onAppearCancelled(L){R(L,!0),bh(A,[L])},onLeaveCancelled(L){T(L),bh(M,[L])}})}function ire(i){if(i==null)return null;if(ei(i))return[Hw(i.enter),Hw(i.leave)];{const e=Hw(i);return[e,e]}}function Hw(i){return nb(i)}function tl(i,e){e.split(/\s+/).forEach(n=>n&&i.classList.add(n)),(i[uf]||(i[uf]=new Set)).add(e)}function fc(i,e){e.split(/\s+/).forEach(t=>t&&i.classList.remove(t));const n=i[uf];n&&(n.delete(e),n.size||(i[uf]=void 0))}function a4(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let rre=0;function l4(i,e,n,t){const r=i._endId=++rre,s=()=>{r===i._endId&&t()};if(n)return setTimeout(s,n);const{type:a,timeout:l,propCount:h}=E$(i,e);if(!a)return t();const u=a+"end";let f=0;const p=()=>{i.removeEventListener(u,g),s()},g=v=>{v.target===i&&++f>=h&&p()};setTimeout(()=>{f<h&&p()},l+1),i.addEventListener(u,g)}function E$(i,e){const n=window.getComputedStyle(i),t=y=>(n[y]||"").split(", "),r=t(`${Jl}Delay`),s=t(`${Jl}Duration`),a=c4(r,s),l=t(`${Dp}Delay`),h=t(`${Dp}Duration`),u=c4(l,h);let f=null,p=0,g=0;e===Jl?a>0&&(f=Jl,p=a,g=s.length):e===Dp?u>0&&(f=Dp,p=u,g=h.length):(p=Math.max(a,u),f=p>0?a>u?Jl:Dp:null,g=f?f===Jl?s.length:h.length:0);const v=f===Jl&&/\b(transform|all)(,|$)/.test(t(`${Jl}Property`).toString());return{type:f,timeout:p,propCount:g,hasTransform:v}}function c4(i,e){for(;i.length<e.length;)i=i.concat(i);return Math.max(...e.map((n,t)=>h4(n)+h4(i[t])))}function h4(i){return i==="auto"?0:Number(i.slice(0,-1).replace(",","."))*1e3}function P$(){return document.body.offsetHeight}function sre(i,e,n){const t=i[uf];t&&(e=(e?[e,...t]:[...t]).join(" ")),e==null?i.removeAttribute("class"):n?i.setAttribute("class",e):i.className=e}const ub=Symbol("_vod"),A$=Symbol("_vsh"),R$={beforeMount(i,{value:e},{transition:n}){i[ub]=i.style.display==="none"?"":i.style.display,n&&e?n.beforeEnter(i):Np(i,e)},mounted(i,{value:e},{transition:n}){n&&e&&n.enter(i)},updated(i,{value:e,oldValue:n},{transition:t}){!e!=!n&&(t?e?(t.beforeEnter(i),Np(i,!0),t.enter(i)):t.leave(i,()=>{Np(i,!1)}):Np(i,e))},beforeUnmount(i,{value:e}){Np(i,e)}};function Np(i,e){i.style.display=e?i[ub]:"none",i[A$]=!e}function ore(){R$.getSSRProps=({value:i})=>{if(!i)return{style:{display:"none"}}}}const I$=Symbol("");function are(i){const e=io();if(!e)return;const n=e.ut=(r=i(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>rC(s,r))},t=()=>{const r=i(e.proxy);iC(e.subTree,r),n(r)};Yi(()=>{NN(t);const r=new MutationObserver(t);r.observe(e.subTree.el.parentNode,{childList:!0}),To(()=>r.disconnect())})}function iC(i,e){if(i.shapeFlag&128){const n=i.suspense;i=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{iC(n.activeBranch,e)})}for(;i.component;)i=i.component.subTree;if(i.shapeFlag&1&&i.el)rC(i.el,e);else if(i.type===ai)i.children.forEach(n=>iC(n,e));else if(i.type===eu){let{el:n,anchor:t}=i;for(;n&&(rC(n,e),n!==t);)n=n.nextSibling}}function rC(i,e){if(i.nodeType===1){const n=i.style;let t="";for(const r in e)n.setProperty(`--${r}`,e[r]),t+=`--${r}: ${e[r]};`;n[I$]=t}}const lre=/(^|;)\s*display\s*:/;function cre(i,e,n){const t=i.style,r=_i(n);let s=!1;if(n&&!r){if(e)if(_i(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&A1(t,l,"")}else for(const a in e)n[a]==null&&A1(t,a,"");for(const a in n)a==="display"&&(s=!0),A1(t,a,n[a])}else if(r){if(e!==n){const a=t[I$];a&&(n+=";"+a),t.cssText=n,s=lre.test(n)}}else e&&i.removeAttribute("style");ub in i&&(i[ub]=s?t.display:"",i[A$]&&(t.display="none"))}const u4=/\s*!important$/;function A1(i,e,n){if(Pt(n))n.forEach(t=>A1(i,e,t));else if(n==null&&(n=""),e.startsWith("--"))i.setProperty(e,n);else{const t=hre(i,e);u4.test(n)?i.setProperty(qs(t),n.replace(u4,""),"important"):i[t]=n}}const d4=["Webkit","Moz","ms"],Gw={};function hre(i,e){const n=Gw[e];if(n)return n;let t=ns(e);if(t!=="filter"&&t in i)return Gw[e]=t;t=g0(t);for(let r=0;r<d4.length;r++){const s=d4[r]+t;if(s in i)return Gw[e]=s}return e}const f4="http://www.w3.org/1999/xlink";function ure(i,e,n,t,r){if(t&&e.startsWith("xlink:"))n==null?i.removeAttributeNS(f4,e.slice(6,e.length)):i.setAttributeNS(f4,e,n);else{const s=Ute(e);n==null||s&&!tN(n)?i.removeAttribute(e):i.setAttribute(e,s?"":n)}}function dre(i,e,n,t,r,s,a){if(e==="innerHTML"||e==="textContent"){t&&a(t,r,s),i[e]=n??"";return}const l=i.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const u=l==="OPTION"?i.getAttribute("value")||"":i.value,f=n??"";(u!==f||!("_value"in i))&&(i.value=f),n==null&&i.removeAttribute(e),i._value=n;return}let h=!1;if(n===""||n==null){const u=typeof i[e];u==="boolean"?n=tN(n):n==null&&u==="string"?(n="",h=!0):u==="number"&&(n=0,h=!0)}try{i[e]=n}catch{}h&&i.removeAttribute(e)}function rl(i,e,n,t){i.addEventListener(e,n,t)}function fre(i,e,n,t){i.removeEventListener(e,n,t)}const p4=Symbol("_vei");function pre(i,e,n,t,r=null){const s=i[p4]||(i[p4]={}),a=s[e];if(t&&a)a.value=t;else{const[l,h]=mre(e);if(t){const u=s[e]=yre(t,r);rl(i,l,u,h)}else a&&(fre(i,l,a,h),s[e]=void 0)}}const m4=/(?:Once|Passive|Capture)$/;function mre(i){let e;if(m4.test(i)){e={};let t;for(;t=i.match(m4);)i=i.slice(0,i.length-t[0].length),e[t[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):qs(i.slice(2)),e]}let Yw=0;const gre=Promise.resolve(),vre=()=>Yw||(gre.then(()=>Yw=0),Yw=Date.now());function yre(i,e){const n=t=>{if(!t._vts)t._vts=Date.now();else if(t._vts<=n.attached)return;to(bre(t,n.value),e,5,[t])};return n.value=i,n.attached=vre(),n}function bre(i,e){if(Pt(e)){const n=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{n.call(i),i._stopped=!0},e.map(t=>r=>!r._stopped&&t&&t(r))}else return e}const g4=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,Ore=(i,e,n,t,r,s,a,l,h)=>{const u=r==="svg";e==="class"?sre(i,t,u):e==="style"?cre(i,n,t):m0(e)?ik(e)||pre(i,e,n,t,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xre(i,e,t,u))?dre(i,e,t,s,a,l,h):(e==="true-value"?i._trueValue=t:e==="false-value"&&(i._falseValue=t),ure(i,e,t,u))};function xre(i,e,n,t){if(t)return!!(e==="innerHTML"||e==="textContent"||e in i&&g4(e)&&Zt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=i.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return g4(e)&&_i(n)?!1:e in i}/*! #__NO_SIDE_EFFECTS__ */function D$(i,e){const n=yl(i);class t extends OO{constructor(s){super(n,s,e)}}return t.def=n,t}/*! #__NO_SIDE_EFFECTS__ */const wre=i=>D$(i,Q$),_re=typeof HTMLElement<"u"?HTMLElement:class{};class OO extends _re{constructor(e,n={},t){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&t?t(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),Lf(()=>{this._connected||(pb(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let t=0;t<this.attributes.length;t++)this._setAttr(this.attributes[t].name);this._ob=new MutationObserver(t=>{for(const r of t)this._setAttr(r.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(t,r=!1)=>{const{props:s,styles:a}=t;let l;if(s&&!Pt(s))for(const h in s){const u=s[h];(u===Number||u&&u.type===Number)&&(h in this._props&&(this._props[h]=nb(this._props[h])),(l||(l=Object.create(null)))[ns(h)]=!0)}this._numberProps=l,r&&this._resolveProps(t),this._applyStyles(a),this._update()},n=this._def.__asyncLoader;n?n().then(t=>e(t,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,t=Pt(n)?n:Object.keys(n||{});for(const r of Object.keys(this))r[0]!=="_"&&t.includes(r)&&this._setProp(r,this[r],!0,!1);for(const r of t.map(ns))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(s){this._setProp(r,s)}})}_setAttr(e){let n=this.hasAttribute(e)?this.getAttribute(e):void 0;const t=ns(e);this._numberProps&&this._numberProps[t]&&(n=nb(n)),this._setProp(t,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,t=!0,r=!0){n!==this._props[e]&&(this._props[e]=n,r&&this._instance&&this._update(),t&&(n===!0?this.setAttribute(qs(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(qs(e),n+""):n||this.removeAttribute(qs(e))))}_update(){pb(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Re(this._def,vi({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const t=(s,a)=>{this.dispatchEvent(new CustomEvent(s,{detail:a}))};n.emit=(s,...a)=>{t(s,a),qs(s)!==s&&t(qs(s),a)};let r=this;for(;r=r&&(r.parentNode||r.host);)if(r instanceof OO){n.parent=r._instance,n.provides=r._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const t=document.createElement("style");t.textContent=n,this.shadowRoot.appendChild(t)})}}function Sre(i="$style"){{const e=io();if(!e)return jn;const n=e.type.__cssModules;if(!n)return jn;const t=n[i];return t||jn}}const N$=new WeakMap,$$=new WeakMap,db=Symbol("_moveCb"),v4=Symbol("_enterCb"),V$={name:"TransitionGroup",props:vi({},nre,{tag:String,moveClass:String}),setup(i,{slots:e}){const n=io(),t=wk();let r,s;return vO(()=>{if(!r.length)return;const a=i.moveClass||`${i.name||"v"}-move`;if(!Pre(r[0].el,n.vnode.el,a))return;r.forEach(Tre),r.forEach(Mre);const l=r.filter(Ere);P$(),l.forEach(h=>{const u=h.el,f=u.style;tl(u,a),f.transform=f.webkitTransform=f.transitionDuration="";const p=u[db]=g=>{g&&g.target!==u||(!g||/transform$/.test(g.propertyName))&&(u.removeEventListener("transitionend",p),u[db]=null,fc(u,a))};u.addEventListener("transitionend",p)})}),()=>{const a=Dn(i),l=M$(a);let h=a.tag||ai;if(r=[],s)for(let u=0;u<s.length;u++){const f=s[u];f.el&&f.el instanceof Element&&(r.push(f),hu(f,hf(f,l,t,n)),N$.set(f,f.el.getBoundingClientRect()))}s=e.default?mO(e.default()):[];for(let u=0;u<s.length;u++){const f=s[u];f.key!=null&&hu(f,hf(f,l,t,n))}return Re(h,null,s)}}},Cre=i=>delete i.mode;V$.props;const kre=V$;function Tre(i){const e=i.el;e[db]&&e[db](),e[v4]&&e[v4]()}function Mre(i){$$.set(i,i.el.getBoundingClientRect())}function Ere(i){const e=N$.get(i),n=$$.get(i),t=e.left-n.left,r=e.top-n.top;if(t||r){const s=i.el.style;return s.transform=s.webkitTransform=`translate(${t}px,${r}px)`,s.transitionDuration="0s",i}}function Pre(i,e,n){const t=i.cloneNode(),r=i[uf];r&&r.forEach(l=>{l.split(/\s+/).forEach(h=>h&&t.classList.remove(h))}),n.split(/\s+/).forEach(l=>l&&t.classList.add(l)),t.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(t);const{hasTransform:a}=E$(t);return s.removeChild(t),a}const $c=i=>{const e=i.props["onUpdate:modelValue"]||!1;return Pt(e)?n=>zd(e,n):e};function Are(i){i.target.composing=!0}function y4(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const wo=Symbol("_assign"),fb={created(i,{modifiers:{lazy:e,trim:n,number:t}},r){i[wo]=$c(r);const s=t||r.props&&r.props.type==="number";rl(i,e?"change":"input",a=>{if(a.target.composing)return;let l=i.value;n&&(l=l.trim()),s&&(l=tb(l)),i[wo](l)}),n&&rl(i,"change",()=>{i.value=i.value.trim()}),e||(rl(i,"compositionstart",Are),rl(i,"compositionend",y4),rl(i,"change",y4))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,modifiers:{lazy:n,trim:t,number:r}},s){if(i[wo]=$c(s),i.composing)return;const a=(r||i.type==="number")&&!/^0\d/.test(i.value)?tb(i.value):i.value,l=e??"";a!==l&&(document.activeElement===i&&i.type!=="range"&&(n||t&&i.value.trim()===l)||(i.value=l))}},Rk={deep:!0,created(i,e,n){i[wo]=$c(n),rl(i,"change",()=>{const t=i._modelValue,r=df(i),s=i.checked,a=i[wo];if(Pt(t)){const l=aO(t,r),h=l!==-1;if(s&&!h)a(t.concat(r));else if(!s&&h){const u=[...t];u.splice(l,1),a(u)}}else if(Su(t)){const l=new Set(t);s?l.add(r):l.delete(r),a(l)}else a(B$(i,s))})},mounted:b4,beforeUpdate(i,e,n){i[wo]=$c(n),b4(i,e,n)}};function b4(i,{value:e,oldValue:n},t){i._modelValue=e,Pt(e)?i.checked=aO(e,t.props.value)>-1:Su(e)?i.checked=e.has(t.props.value):e!==n&&(i.checked=Dc(e,B$(i,!0)))}const Ik={created(i,{value:e},n){i.checked=Dc(e,n.props.value),i[wo]=$c(n),rl(i,"change",()=>{i[wo](df(i))})},beforeUpdate(i,{value:e,oldValue:n},t){i[wo]=$c(t),e!==n&&(i.checked=Dc(e,t.props.value))}},L$={deep:!0,created(i,{value:e,modifiers:{number:n}},t){const r=Su(e);rl(i,"change",()=>{const s=Array.prototype.filter.call(i.options,a=>a.selected).map(a=>n?tb(df(a)):df(a));i[wo](i.multiple?r?new Set(s):s:s[0]),i._assigning=!0,Lf(()=>{i._assigning=!1})}),i[wo]=$c(t)},mounted(i,{value:e,modifiers:{number:n}}){O4(i,e)},beforeUpdate(i,e,n){i[wo]=$c(n)},updated(i,{value:e,modifiers:{number:n}}){i._assigning||O4(i,e)}};function O4(i,e,n){const t=i.multiple,r=Pt(e);if(!(t&&!r&&!Su(e))){for(let s=0,a=i.options.length;s<a;s++){const l=i.options[s],h=df(l);if(t)if(r){const u=typeof h;u==="string"||u==="number"?l.selected=e.some(f=>String(f)===String(h)):l.selected=aO(e,h)>-1}else l.selected=e.has(h);else if(Dc(df(l),e)){i.selectedIndex!==s&&(i.selectedIndex=s);return}}!t&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function df(i){return"_value"in i?i._value:i.value}function B$(i,e){const n=e?"_trueValue":"_falseValue";return n in i?i[n]:e}const U$={created(i,e,n){ey(i,e,n,null,"created")},mounted(i,e,n){ey(i,e,n,null,"mounted")},beforeUpdate(i,e,n,t){ey(i,e,n,t,"beforeUpdate")},updated(i,e,n,t){ey(i,e,n,t,"updated")}};function z$(i,e){switch(i){case"SELECT":return L$;case"TEXTAREA":return fb;default:switch(e){case"checkbox":return Rk;case"radio":return Ik;default:return fb}}}function ey(i,e,n,t,r){const a=z$(i.tagName,n.props&&n.props.type)[r];a&&a(i,e,n,t)}function Rre(){fb.getSSRProps=({value:i})=>({value:i}),Ik.getSSRProps=({value:i},e)=>{if(e.props&&Dc(e.props.value,i))return{checked:!0}},Rk.getSSRProps=({value:i},e)=>{if(Pt(i)){if(e.props&&aO(i,e.props.value)>-1)return{checked:!0}}else if(Su(i)){if(e.props&&i.has(e.props.value))return{checked:!0}}else if(i)return{checked:!0}},U$.getSSRProps=(i,e)=>{if(typeof e.type!="string")return;const n=z$(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(i,e)}}const Ire=["ctrl","shift","alt","meta"],Dre={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>Ire.some(n=>i[`${n}Key`]&&!e.includes(n))},Nre=(i,e)=>{const n=i._withMods||(i._withMods={}),t=e.join(".");return n[t]||(n[t]=(r,...s)=>{for(let a=0;a<e.length;a++){const l=Dre[e[a]];if(l&&l(r,e))return}return i(r,...s)})},$re={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Vre=(i,e)=>{const n=i._withKeys||(i._withKeys={}),t=e.join(".");return n[t]||(n[t]=r=>{if(!("key"in r))return;const s=qs(r.key);if(e.some(a=>a===s||$re[a]===s))return i(r)})},F$=vi({patchProp:Ore},tre);let cg,x4=!1;function X$(){return cg||(cg=Tk(F$))}function W$(){return cg=x4?cg:c$(F$),x4=!0,cg}const pb=(...i)=>{X$().render(...i)},Q$=(...i)=>{W$().hydrate(...i)},H$=(...i)=>{const e=X$().createApp(...i),{mount:n}=e;return e.mount=t=>{const r=Y$(t);if(!r)return;const s=e._component;!Zt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=n(r,!1,G$(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e},Lre=(...i)=>{const e=W$().createApp(...i),{mount:n}=e;return e.mount=t=>{const r=Y$(t);if(r)return n(r,!0,G$(r))},e};function G$(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Y$(i){return _i(i)?document.querySelector(i):i}let w4=!1;const Bre=()=>{w4||(w4=!0,Rre(),ore())};/**
* vue v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ure=()=>{},zre=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:LN,BaseTransitionPropsValidators:_k,Comment:xr,DeprecationTypes:Kie,EffectScope:ak,ErrorCodes:Sne,ErrorTypeStrings:Qie,Fragment:ai,KeepAlive:jne,ReactiveEffect:lf,Static:eu,Suspense:AN,Teleport:Aie,Text:du,TrackOpTypes:xne,Transition:Ak,TransitionGroup:kre,TriggerOpTypes:wne,VueElement:OO,assertNumber:_ne,callWithAsyncErrorHandling:to,callWithErrorHandling:ul,camelize:ns,capitalize:g0,cloneVNode:Ca,compatUtils:Zie,compile:Ure,computed:ci,createApp:H$,createBlock:_r,createCommentVNode:Ek,createElementBlock:xi,createElementVNode:jt,createHydrationRenderer:c$,createPropsRestProxy:cie,createRenderer:Tk,createSSRApp:Lre,createSlots:Zne,createStaticVNode:Die,createTextVNode:li,createVNode:Re,customRef:gk,defineAsyncComponent:Gne,defineComponent:yl,defineCustomElement:D$,defineEmits:tie,defineExpose:nie,defineModel:sie,defineOptions:iie,defineProps:eie,defineSSRCustomElement:wre,defineSlots:rie,devtools:Hie,effect:Wte,effectScope:Fte,getCurrentInstance:io,getCurrentScope:lO,getTransitionRawChildren:mO,guardReactiveProps:v$,h:hb,handleError:Cu,hasInjectionContext:yie,hydrate:Q$,initCustomFormatter:Fie,initDirectivesForSSR:Bre,inject:Gd,isMemoSame:C$,isProxy:dk,isReactive:Fd,isReadonly:cf,isRef:Hi,isRuntimeOnly:Bie,isShallow:_g,isVNode:Nc,markRaw:yN,mergeDefaults:aie,mergeModels:lie,mergeProps:y$,nextTick:Lf,normalizeClass:$f,normalizeProps:Lte,normalizeStyle:Gc,onActivated:UN,onBeforeMount:XN,onBeforeUnmount:yO,onBeforeUpdate:WN,onDeactivated:zN,onErrorCaptured:YN,onMounted:Yi,onRenderTracked:GN,onRenderTriggered:HN,onScopeDispose:lk,onServerPrefetch:QN,onUnmounted:To,onUpdated:vO,openBlock:mn,popScopeId:MN,provide:Pg,proxyRefs:mk,pushScopeId:TN,queuePostFlushCb:rb,reactive:Vf,readonly:cu,ref:at,registerRuntimeCompiler:Lie,render:pb,renderList:uu,renderSlot:jN,resolveComponent:Rt,resolveDirective:Vne,resolveDynamicComponent:XS,resolveFilter:qie,resolveTransitionHooks:hf,setBlockTracking:ZS,setDevtoolsHook:Gie,setTransitionHooks:hu,shallowReactive:vN,shallowReadonly:une,shallowRef:dr,ssrContextKey:IN,ssrUtils:jie,stop:Qte,toDisplayString:af,toHandlerKey:sg,toHandlers:Kne,toRaw:Dn,toRef:One,toRefs:v0,toValue:mne,transformVNodeArgs:Rie,triggerRef:pne,unref:an,useAttrs:ZN,useCssModule:Sre,useCssVars:are,useModel:S$,useSSRContext:DN,useSlots:Sk,useTransitionState:wk,vModelCheckbox:Rk,vModelDynamic:U$,vModelRadio:Ik,vModelSelect:L$,vModelText:fb,vShow:R$,version:k$,warn:Wie,watch:Fn,watchEffect:dl,watchPostEffect:NN,watchSyncEffect:$N,withAsyncContext:hie,withCtx:Je,withDefaults:oie,withDirectives:Qne,withKeys:Vre,withMemo:Xie,withModifiers:Nre,withScopeId:Ane},Symbol.toStringTag,{value:"Module"})),Fre={style:{width:"100%","text-align":"center"}},Xre={__name:"AppItem",props:{routeData:{id:"",title:"",comp:null,desc:""}},setup(i){const e=i;function n(){location.hash=e.routeData.id}return(t,r)=>{const s=Rt("Icon"),a=Rt("Button");return mn(),xi("div",Fre,[Re(a,{type:"success",size:"large",onClick:n},{default:Je(()=>[Re(s,{type:"md-eye"}),li(" "+af(i.routeData.title),1)]),_:1})])}}};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Bf="164",$h={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},j$=0,sC=1,q$=2,Wre=3,Qre=0,Dk=1,Nk=2,fa=3,bl=0,Vr=1,ws=2,fl=0,tu=1,mb=2,oC=3,aC=4,Z$=5,Oc=100,K$=101,J$=102,eV=103,tV=104,nV=200,iV=201,rV=202,sV=203,gb=204,vb=205,oV=206,aV=207,lV=208,cV=209,hV=210,uV=211,dV=212,fV=213,pV=214,mV=0,gV=1,vV=2,Ag=3,yV=4,bV=5,OV=6,xV=7,x0=0,wV=1,_V=2,pl=0,SV=1,CV=2,kV=3,$k=4,TV=5,MV=6,EV=7,lC="attached",PV="detached",xO=300,Ol=301,Vc=302,ff=303,Rg=304,Uf=306,Lc=1e3,ts=1001,pf=1002,er=1003,wO=1004,Hre=1004,Wh=1005,Gre=1005,Vi=1006,Yd=1007,Yre=1007,Ho=1008,jre=1008,qo=1009,AV=1010,RV=1011,Vk=1012,Lk=1013,mu=1014,yo=1015,zf=1016,Bk=1017,Uk=1018,Ff=1020,IV=35902,DV=1021,NV=1022,ks=1023,$V=1024,VV=1025,nu=1026,mf=1027,zk=1028,Fk=1029,LV=1030,Xk=1031,Wk=1033,R1=33776,I1=33777,D1=33778,N1=33779,cC=35840,hC=35841,uC=35842,dC=35843,fC=36196,pC=37492,mC=37496,gC=37808,vC=37809,yC=37810,bC=37811,OC=37812,xC=37813,wC=37814,_C=37815,SC=37816,CC=37817,kC=37818,TC=37819,MC=37820,EC=37821,$1=36492,PC=36494,AC=36495,BV=36283,RC=36284,IC=36285,DC=36286,UV=2200,zV=2201,FV=2202,gf=2300,vf=2301,V1=2302,Qh=2400,Hh=2401,Ig=2402,_O=2500,Qk=2501,qre=0,Zre=1,Kre=2,XV=3200,WV=3201,qc=0,QV=1,sl="",Ys="srgb",El="srgb-linear",SO="display-p3",w0="display-p3-linear",Dg="linear",si="srgb",Ng="rec709",$g="p3",Jre=0,Vh=7680,ese=7681,tse=7682,nse=7683,ise=34055,rse=34056,sse=5386,ose=512,ase=513,lse=514,cse=515,hse=516,use=517,dse=518,NC=519,HV=512,GV=513,YV=514,Hk=515,jV=516,qV=517,ZV=518,KV=519,Vg=35044,fse=35048,pse=35040,mse=35045,gse=35049,vse=35041,yse=35046,bse=35050,Ose=35042,xse="100",$C="300 es",ba=2e3,Lg=2001;class Pa{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(n)===-1&&t[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Pr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _4=1234567;const iu=Math.PI/180,yf=180/Math.PI;function no(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(Pr[i&255]+Pr[i>>8&255]+Pr[i>>16&255]+Pr[i>>24&255]+"-"+Pr[e&255]+Pr[e>>8&255]+"-"+Pr[e>>16&15|64]+Pr[e>>24&255]+"-"+Pr[n&63|128]+Pr[n>>8&255]+"-"+Pr[n>>16&255]+Pr[n>>24&255]+Pr[t&255]+Pr[t>>8&255]+Pr[t>>16&255]+Pr[t>>24&255]).toLowerCase()}function Ri(i,e,n){return Math.max(e,Math.min(n,i))}function Gk(i,e){return(i%e+e)%e}function wse(i,e,n,t,r){return t+(i-e)*(r-t)/(n-e)}function _se(i,e,n){return i!==e?(n-i)/(e-i):0}function hg(i,e,n){return(1-n)*i+n*e}function Sse(i,e,n,t){return hg(i,e,1-Math.exp(-n*t))}function Cse(i,e=1){return e-Math.abs(Gk(i,e*2)-e)}function kse(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*(3-2*i))}function Tse(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*i*(i*(i*6-15)+10))}function Mse(i,e){return i+Math.floor(Math.random()*(e-i+1))}function Ese(i,e){return i+Math.random()*(e-i)}function Pse(i){return i*(.5-Math.random())}function Ase(i){i!==void 0&&(_4=i);let e=_4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Rse(i){return i*iu}function Ise(i){return i*yf}function Dse(i){return(i&i-1)===0&&i!==0}function Nse(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function $se(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Vse(i,e,n,t,r){const s=Math.cos,a=Math.sin,l=s(n/2),h=a(n/2),u=s((e+t)/2),f=a((e+t)/2),p=s((e-t)/2),g=a((e-t)/2),v=s((t-e)/2),y=a((t-e)/2);switch(r){case"XYX":i.set(l*f,h*p,h*g,l*u);break;case"YZY":i.set(h*g,l*f,h*p,l*u);break;case"ZXZ":i.set(h*p,h*g,l*f,l*u);break;case"XZX":i.set(l*f,h*y,h*v,l*u);break;case"YXY":i.set(h*v,l*f,h*y,l*u);break;case"ZYZ":i.set(h*y,h*v,l*f,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Jr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function dn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const Nr={DEG2RAD:iu,RAD2DEG:yf,generateUUID:no,clamp:Ri,euclideanModulo:Gk,mapLinear:wse,inverseLerp:_se,lerp:hg,damp:Sse,pingpong:Cse,smoothstep:kse,smootherstep:Tse,randInt:Mse,randFloat:Ese,randFloatSpread:Pse,seededRandom:Ase,degToRad:Rse,radToDeg:Ise,isPowerOfTwo:Dse,ceilPowerOfTwo:Nse,floorPowerOfTwo:$se,setQuaternionFromProperEuler:Vse,normalize:dn,denormalize:Jr};class Qe{constructor(e=0,n=0){Qe.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,t=this.y,r=e.elements;return this.x=r[0]*n+r[3]*t+r[6],this.y=r[1]*n+r[4]*t+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(n,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const t=this.dot(e)/n;return Math.acos(Ri(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,t=this.y-e.y;return n*n+t*t}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,t){return this.x=e.x+(n.x-e.x)*t,this.y=e.y+(n.y-e.y)*t,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const t=Math.cos(n),r=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*t-a*r+e.x,this.y=s*r+a*t+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cn{constructor(e,n,t,r,s,a,l,h,u){cn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,t,r,s,a,l,h,u)}set(e,n,t,r,s,a,l,h,u){const f=this.elements;return f[0]=e,f[1]=r,f[2]=l,f[3]=n,f[4]=s,f[5]=h,f[6]=t,f[7]=a,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,t=e.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this}extractBasis(e,n,t){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const t=e.elements,r=n.elements,s=this.elements,a=t[0],l=t[3],h=t[6],u=t[1],f=t[4],p=t[7],g=t[2],v=t[5],y=t[8],w=r[0],x=r[3],S=r[6],_=r[1],O=r[4],k=r[7],M=r[2],P=r[5],D=r[8];return s[0]=a*w+l*_+h*M,s[3]=a*x+l*O+h*P,s[6]=a*S+l*k+h*D,s[1]=u*w+f*_+p*M,s[4]=u*x+f*O+p*P,s[7]=u*S+f*k+p*D,s[2]=g*w+v*_+y*M,s[5]=g*x+v*O+y*P,s[8]=g*S+v*k+y*D,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],t=e[1],r=e[2],s=e[3],a=e[4],l=e[5],h=e[6],u=e[7],f=e[8];return n*a*f-n*l*u-t*s*f+t*l*h+r*s*u-r*a*h}invert(){const e=this.elements,n=e[0],t=e[1],r=e[2],s=e[3],a=e[4],l=e[5],h=e[6],u=e[7],f=e[8],p=f*a-l*u,g=l*h-f*s,v=u*s-a*h,y=n*p+t*g+r*v;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/y;return e[0]=p*w,e[1]=(r*u-f*t)*w,e[2]=(l*t-r*a)*w,e[3]=g*w,e[4]=(f*n-r*h)*w,e[5]=(r*s-l*n)*w,e[6]=v*w,e[7]=(t*h-u*n)*w,e[8]=(a*n-t*s)*w,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,t,r,s,a,l){const h=Math.cos(s),u=Math.sin(s);return this.set(t*h,t*u,-t*(h*a+u*l)+a+e,-r*u,r*h,-r*(-u*a+h*l)+l+n,0,0,1),this}scale(e,n){return this.premultiply(jw.makeScale(e,n)),this}rotate(e){return this.premultiply(jw.makeRotation(-e)),this}translate(e,n){return this.premultiply(jw.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),t=Math.sin(e);return this.set(n,-t,0,t,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,t=e.elements;for(let r=0;r<9;r++)if(n[r]!==t[r])return!1;return!0}fromArray(e,n=0){for(let t=0;t<9;t++)this.elements[t]=e[t+n];return this}toArray(e=[],n=0){const t=this.elements;return e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3],e[n+4]=t[4],e[n+5]=t[5],e[n+6]=t[6],e[n+7]=t[7],e[n+8]=t[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const jw=new cn;function JV(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const Lse={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ad(i,e){return new Lse[i](e)}function Bg(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function eL(){const i=Bg("canvas");return i.style.display="block",i}const S4={};function tL(i){i in S4||(S4[i]=!0,console.warn(i))}const C4=new cn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),k4=new cn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ty={[El]:{transfer:Dg,primaries:Ng,toReference:i=>i,fromReference:i=>i},[Ys]:{transfer:si,primaries:Ng,toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[w0]:{transfer:Dg,primaries:$g,toReference:i=>i.applyMatrix3(k4),fromReference:i=>i.applyMatrix3(C4)},[SO]:{transfer:si,primaries:$g,toReference:i=>i.convertSRGBToLinear().applyMatrix3(k4),fromReference:i=>i.applyMatrix3(C4).convertLinearToSRGB()}},Bse=new Set([El,w0]),Yn={enabled:!0,_workingColorSpace:El,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!Bse.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,n){if(this.enabled===!1||e===n||!e||!n)return i;const t=ty[e].toReference,r=ty[n].fromReference;return r(t(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return ty[i].primaries},getTransfer:function(i){return i===sl?Dg:ty[i].transfer}};function jd(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function qw(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Ju;class nL{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Ju===void 0&&(Ju=Bg("canvas")),Ju.width=e.width,Ju.height=e.height;const t=Ju.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),n=Ju}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Bg("canvas");n.width=e.width,n.height=e.height;const t=n.getContext("2d");t.drawImage(e,0,0,e.width,e.height);const r=t.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=jd(s[a]/255)*255;return t.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let t=0;t<n.length;t++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[t]=Math.floor(jd(n[t]/255)*255):n[t]=jd(n[t]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Use=0;class Gh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Use++}),this.uuid=no(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const t={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,l=r.length;a<l;a++)r[a].isDataTexture?s.push(Zw(r[a].image)):s.push(Zw(r[a]))}else s=Zw(r);t.url=s}return n||(e.images[this.uuid]=t),t}}function Zw(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?nL.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let zse=0;class hi extends Pa{constructor(e=hi.DEFAULT_IMAGE,n=hi.DEFAULT_MAPPING,t=ts,r=ts,s=Vi,a=Ho,l=ks,h=qo,u=hi.DEFAULT_ANISOTROPY,f=sl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zse++}),this.uuid=no(),this.name="",this.source=new Gh(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=t,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=h,this.offset=new Qe(0,0),this.repeat=new Qe(1,1),this.center=new Qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const t={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(t.userData=this.userData),n||(e.textures[this.uuid]=t),t}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xO)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Lc:e.x=e.x-Math.floor(e.x);break;case ts:e.x=e.x<0?0:1;break;case pf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Lc:e.y=e.y-Math.floor(e.y);break;case ts:e.y=e.y<0?0:1;break;case pf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}hi.DEFAULT_IMAGE=null;hi.DEFAULT_MAPPING=xO;hi.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,n=0,t=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=t,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,t,r){return this.x=e,this.y=n,this.z=t,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,t=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*t+a[8]*r+a[12]*s,this.y=a[1]*n+a[5]*t+a[9]*r+a[13]*s,this.z=a[2]*n+a[6]*t+a[10]*r+a[14]*s,this.w=a[3]*n+a[7]*t+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,t,r,s;const h=e.elements,u=h[0],f=h[4],p=h[8],g=h[1],v=h[5],y=h[9],w=h[2],x=h[6],S=h[10];if(Math.abs(f-g)<.01&&Math.abs(p-w)<.01&&Math.abs(y-x)<.01){if(Math.abs(f+g)<.1&&Math.abs(p+w)<.1&&Math.abs(y+x)<.1&&Math.abs(u+v+S-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const O=(u+1)/2,k=(v+1)/2,M=(S+1)/2,P=(f+g)/4,D=(p+w)/4,A=(y+x)/4;return O>k&&O>M?O<.01?(t=0,r=.707106781,s=.707106781):(t=Math.sqrt(O),r=P/t,s=D/t):k>M?k<.01?(t=.707106781,r=0,s=.707106781):(r=Math.sqrt(k),t=P/r,s=A/r):M<.01?(t=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),t=D/s,r=A/s),this.set(t,r,s,n),this}let _=Math.sqrt((x-y)*(x-y)+(p-w)*(p-w)+(g-f)*(g-f));return Math.abs(_)<.001&&(_=1),this.x=(x-y)/_,this.y=(p-w)/_,this.z=(g-f)/_,this.w=Math.acos((u+v+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(n,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,t){return this.x=e.x+(n.x-e.x)*t,this.y=e.y+(n.y-e.y)*t,this.z=e.z+(n.z-e.z)*t,this.w=e.w+(n.w-e.w)*t,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iL extends Pa{constructor(e=1,n=1,t={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new yn(0,0,e,n),this.scissorTest=!1,this.viewport=new yn(0,0,e,n);const r={width:e,height:n,depth:1};t=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Vi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},t);const s=new hi(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace);s.flipY=!1,s.generateMipmaps=t.generateMipmaps,s.internalFormat=t.internalFormat,this.textures=[];const a=t.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,this.depthTexture=t.depthTexture,this.samples=t.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,t=1){if(this.width!==e||this.height!==n||this.depth!==t){this.width=e,this.height=n,this.depth=t;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=t;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Gh(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Co extends iL{constructor(e=1,n=1,t={}){super(e,n,t),this.isWebGLRenderTarget=!0}}class CO extends hi{constructor(e=null,n=1,t=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:t,depth:r},this.magFilter=er,this.minFilter=er,this.wrapR=ts,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fse extends Co{constructor(e=1,n=1,t=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=t,this.texture=new CO(null,e,n,t),this.texture.isRenderTargetTexture=!0}}class Yk extends hi{constructor(e=null,n=1,t=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:t,depth:r},this.magFilter=er,this.minFilter=er,this.wrapR=ts,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Xse extends Co{constructor(e=1,n=1,t=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=t,this.texture=new Yk(null,e,n,t),this.texture.isRenderTargetTexture=!0}}class Wi{constructor(e=0,n=0,t=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=t,this._w=r}static slerpFlat(e,n,t,r,s,a,l){let h=t[r+0],u=t[r+1],f=t[r+2],p=t[r+3];const g=s[a+0],v=s[a+1],y=s[a+2],w=s[a+3];if(l===0){e[n+0]=h,e[n+1]=u,e[n+2]=f,e[n+3]=p;return}if(l===1){e[n+0]=g,e[n+1]=v,e[n+2]=y,e[n+3]=w;return}if(p!==w||h!==g||u!==v||f!==y){let x=1-l;const S=h*g+u*v+f*y+p*w,_=S>=0?1:-1,O=1-S*S;if(O>Number.EPSILON){const M=Math.sqrt(O),P=Math.atan2(M,S*_);x=Math.sin(x*P)/M,l=Math.sin(l*P)/M}const k=l*_;if(h=h*x+g*k,u=u*x+v*k,f=f*x+y*k,p=p*x+w*k,x===1-l){const M=1/Math.sqrt(h*h+u*u+f*f+p*p);h*=M,u*=M,f*=M,p*=M}}e[n]=h,e[n+1]=u,e[n+2]=f,e[n+3]=p}static multiplyQuaternionsFlat(e,n,t,r,s,a){const l=t[r],h=t[r+1],u=t[r+2],f=t[r+3],p=s[a],g=s[a+1],v=s[a+2],y=s[a+3];return e[n]=l*y+f*p+h*v-u*g,e[n+1]=h*y+f*g+u*p-l*v,e[n+2]=u*y+f*v+l*g-h*p,e[n+3]=f*y-l*p-h*g-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,t,r){return this._x=e,this._y=n,this._z=t,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const t=e._x,r=e._y,s=e._z,a=e._order,l=Math.cos,h=Math.sin,u=l(t/2),f=l(r/2),p=l(s/2),g=h(t/2),v=h(r/2),y=h(s/2);switch(a){case"XYZ":this._x=g*f*p+u*v*y,this._y=u*v*p-g*f*y,this._z=u*f*y+g*v*p,this._w=u*f*p-g*v*y;break;case"YXZ":this._x=g*f*p+u*v*y,this._y=u*v*p-g*f*y,this._z=u*f*y-g*v*p,this._w=u*f*p+g*v*y;break;case"ZXY":this._x=g*f*p-u*v*y,this._y=u*v*p+g*f*y,this._z=u*f*y+g*v*p,this._w=u*f*p-g*v*y;break;case"ZYX":this._x=g*f*p-u*v*y,this._y=u*v*p+g*f*y,this._z=u*f*y-g*v*p,this._w=u*f*p+g*v*y;break;case"YZX":this._x=g*f*p+u*v*y,this._y=u*v*p+g*f*y,this._z=u*f*y-g*v*p,this._w=u*f*p-g*v*y;break;case"XZY":this._x=g*f*p-u*v*y,this._y=u*v*p-g*f*y,this._z=u*f*y+g*v*p,this._w=u*f*p+g*v*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const t=n/2,r=Math.sin(t);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,t=n[0],r=n[4],s=n[8],a=n[1],l=n[5],h=n[9],u=n[2],f=n[6],p=n[10],g=t+l+p;if(g>0){const v=.5/Math.sqrt(g+1);this._w=.25/v,this._x=(f-h)*v,this._y=(s-u)*v,this._z=(a-r)*v}else if(t>l&&t>p){const v=2*Math.sqrt(1+t-l-p);this._w=(f-h)/v,this._x=.25*v,this._y=(r+a)/v,this._z=(s+u)/v}else if(l>p){const v=2*Math.sqrt(1+l-t-p);this._w=(s-u)/v,this._x=(r+a)/v,this._y=.25*v,this._z=(h+f)/v}else{const v=2*Math.sqrt(1+p-t-l);this._w=(a-r)/v,this._x=(s+u)/v,this._y=(h+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let t=e.dot(n)+1;return t<Number.EPSILON?(t=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=t):(this._x=0,this._y=-e.z,this._z=e.y,this._w=t)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=t),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ri(this.dot(e),-1,1)))}rotateTowards(e,n){const t=this.angleTo(e);if(t===0)return this;const r=Math.min(1,n/t);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const t=e._x,r=e._y,s=e._z,a=e._w,l=n._x,h=n._y,u=n._z,f=n._w;return this._x=t*f+a*l+r*u-s*h,this._y=r*f+a*h+s*l-t*u,this._z=s*f+a*u+t*h-r*l,this._w=a*f-t*l-r*h-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const t=this._x,r=this._y,s=this._z,a=this._w;let l=a*e._w+t*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=t,this._y=r,this._z=s,this;const h=1-l*l;if(h<=Number.EPSILON){const v=1-n;return this._w=v*a+n*this._w,this._x=v*t+n*this._x,this._y=v*r+n*this._y,this._z=v*s+n*this._z,this.normalize(),this}const u=Math.sqrt(h),f=Math.atan2(u,l),p=Math.sin((1-n)*f)/u,g=Math.sin(n*f)/u;return this._w=a*p+this._w*g,this._x=t*p+this._x*g,this._y=r*p+this._y*g,this._z=s*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,n,t){return this.copy(e).slerp(n,t)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),t=Math.random(),r=Math.sqrt(1-t),s=Math.sqrt(t);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ne{constructor(e=0,n=0,t=0){ne.prototype.isVector3=!0,this.x=e,this.y=n,this.z=t}set(e,n,t){return t===void 0&&(t=this.z),this.x=e,this.y=n,this.z=t,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(T4.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(T4.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,t=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*t+s[6]*r,this.y=s[1]*n+s[4]*t+s[7]*r,this.z=s[2]*n+s[5]*t+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,t=this.y,r=this.z,s=e.elements,a=1/(s[3]*n+s[7]*t+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*t+s[8]*r+s[12])*a,this.y=(s[1]*n+s[5]*t+s[9]*r+s[13])*a,this.z=(s[2]*n+s[6]*t+s[10]*r+s[14])*a,this}applyQuaternion(e){const n=this.x,t=this.y,r=this.z,s=e.x,a=e.y,l=e.z,h=e.w,u=2*(a*r-l*t),f=2*(l*n-s*r),p=2*(s*t-a*n);return this.x=n+h*u+a*p-l*f,this.y=t+h*f+l*u-s*p,this.z=r+h*p+s*f-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,t=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*t+s[8]*r,this.y=s[1]*n+s[5]*t+s[9]*r,this.z=s[2]*n+s[6]*t+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(n,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,t){return this.x=e.x+(n.x-e.x)*t,this.y=e.y+(n.y-e.y)*t,this.z=e.z+(n.z-e.z)*t,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const t=e.x,r=e.y,s=e.z,a=n.x,l=n.y,h=n.z;return this.x=r*h-s*l,this.y=s*a-t*h,this.z=t*l-r*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const t=e.dot(this)/n;return this.copy(e).multiplyScalar(t)}projectOnPlane(e){return Kw.copy(this).projectOnVector(e),this.sub(Kw)}reflect(e){return this.sub(Kw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const t=this.dot(e)/n;return Math.acos(Ri(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,t=this.y-e.y,r=this.z-e.z;return n*n+t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,t){const r=Math.sin(n)*e;return this.x=r*Math.sin(t),this.y=Math.cos(n)*e,this.z=r*Math.cos(t),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,t){return this.x=e*Math.sin(n),this.y=t,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),t=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=t,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,t=Math.sqrt(1-n*n);return this.x=t*Math.cos(e),this.y=n,this.z=t*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Kw=new ne,T4=new Wi;class Sr{constructor(e=new ne(1/0,1/0,1/0),n=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,t=e.length;n<t;n+=3)this.expandByPoint(zo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,t=e.count;n<t;n++)this.expandByPoint(zo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,t=e.length;n<t;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const t=zo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const t=e.geometry;if(t!==void 0){const s=t.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,zo):zo.fromBufferAttribute(s,a),zo.applyMatrix4(e.matrixWorld),this.expandByPoint(zo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ny.copy(e.boundingBox)):(t.boundingBox===null&&t.computeBoundingBox(),ny.copy(t.boundingBox)),ny.applyMatrix4(e.matrixWorld),this.union(ny)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zo),zo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,t;return e.normal.x>0?(n=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),n<=-e.constant&&t>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($p),iy.subVectors(this.max,$p),ed.subVectors(e.a,$p),td.subVectors(e.b,$p),nd.subVectors(e.c,$p),ec.subVectors(td,ed),tc.subVectors(nd,td),Oh.subVectors(ed,nd);let n=[0,-ec.z,ec.y,0,-tc.z,tc.y,0,-Oh.z,Oh.y,ec.z,0,-ec.x,tc.z,0,-tc.x,Oh.z,0,-Oh.x,-ec.y,ec.x,0,-tc.y,tc.x,0,-Oh.y,Oh.x,0];return!Jw(n,ed,td,nd,iy)||(n=[1,0,0,0,1,0,0,0,1],!Jw(n,ed,td,nd,iy))?!1:(ry.crossVectors(ec,tc),n=[ry.x,ry.y,ry.z],Jw(n,ed,td,nd,iy))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(zo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ha[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ha[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ha[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ha[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ha[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ha[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ha[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ha[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ha),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ha=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],zo=new ne,ny=new Sr,ed=new ne,td=new ne,nd=new ne,ec=new ne,tc=new ne,Oh=new ne,$p=new ne,iy=new ne,ry=new ne,xh=new ne;function Jw(i,e,n,t,r){for(let s=0,a=i.length-3;s<=a;s+=3){xh.fromArray(i,s);const l=r.x*Math.abs(xh.x)+r.y*Math.abs(xh.y)+r.z*Math.abs(xh.z),h=e.dot(xh),u=n.dot(xh),f=t.dot(xh);if(Math.max(-Math.max(h,u,f),Math.min(h,u,f))>l)return!1}return!0}const Wse=new Sr,Vp=new ne,e_=new ne;class Cr{constructor(e=new ne,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const t=this.center;n!==void 0?t.copy(n):Wse.setFromPoints(e).getCenter(t);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,t.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const t=this.center.distanceToSquared(e);return n.copy(e),t>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Vp.subVectors(e,this.center);const n=Vp.lengthSq();if(n>this.radius*this.radius){const t=Math.sqrt(n),r=(t-this.radius)*.5;this.center.addScaledVector(Vp,r/t),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(e_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Vp.copy(e.center).add(e_)),this.expandByPoint(Vp.copy(e.center).sub(e_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ga=new ne,t_=new ne,sy=new ne,nc=new ne,n_=new ne,oy=new ne,i_=new ne;class ku{constructor(e=new ne,n=new ne(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ga)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const t=n.dot(this.direction);return t<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,t)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ga.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ga.copy(this.origin).addScaledVector(this.direction,n),Ga.distanceToSquared(e))}distanceSqToSegment(e,n,t,r){t_.copy(e).add(n).multiplyScalar(.5),sy.copy(n).sub(e).normalize(),nc.copy(this.origin).sub(t_);const s=e.distanceTo(n)*.5,a=-this.direction.dot(sy),l=nc.dot(this.direction),h=-nc.dot(sy),u=nc.lengthSq(),f=Math.abs(1-a*a);let p,g,v,y;if(f>0)if(p=a*h-l,g=a*l-h,y=s*f,p>=0)if(g>=-y)if(g<=y){const w=1/f;p*=w,g*=w,v=p*(p+a*g+2*l)+g*(a*p+g+2*h)+u}else g=s,p=Math.max(0,-(a*g+l)),v=-p*p+g*(g+2*h)+u;else g=-s,p=Math.max(0,-(a*g+l)),v=-p*p+g*(g+2*h)+u;else g<=-y?(p=Math.max(0,-(-a*s+l)),g=p>0?-s:Math.min(Math.max(-s,-h),s),v=-p*p+g*(g+2*h)+u):g<=y?(p=0,g=Math.min(Math.max(-s,-h),s),v=g*(g+2*h)+u):(p=Math.max(0,-(a*s+l)),g=p>0?s:Math.min(Math.max(-s,-h),s),v=-p*p+g*(g+2*h)+u);else g=a>0?-s:s,p=Math.max(0,-(a*g+l)),v=-p*p+g*(g+2*h)+u;return t&&t.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(t_).addScaledVector(sy,g),v}intersectSphere(e,n){Ga.subVectors(e.center,this.origin);const t=Ga.dot(this.direction),r=Ga.dot(Ga)-t*t,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),l=t-a,h=t+a;return h<0?null:l<0?this.at(h,n):this.at(l,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const t=-(this.origin.dot(e.normal)+e.constant)/n;return t>=0?t:null}intersectPlane(e,n){const t=this.distanceToPlane(e);return t===null?null:this.at(t,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let t,r,s,a,l,h;const u=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,g=this.origin;return u>=0?(t=(e.min.x-g.x)*u,r=(e.max.x-g.x)*u):(t=(e.max.x-g.x)*u,r=(e.min.x-g.x)*u),f>=0?(s=(e.min.y-g.y)*f,a=(e.max.y-g.y)*f):(s=(e.max.y-g.y)*f,a=(e.min.y-g.y)*f),t>a||s>r||((s>t||isNaN(t))&&(t=s),(a<r||isNaN(r))&&(r=a),p>=0?(l=(e.min.z-g.z)*p,h=(e.max.z-g.z)*p):(l=(e.max.z-g.z)*p,h=(e.min.z-g.z)*p),t>h||l>r)||((l>t||t!==t)&&(t=l),(h<r||r!==r)&&(r=h),r<0)?null:this.at(t>=0?t:r,n)}intersectsBox(e){return this.intersectBox(e,Ga)!==null}intersectTriangle(e,n,t,r,s){n_.subVectors(n,e),oy.subVectors(t,e),i_.crossVectors(n_,oy);let a=this.direction.dot(i_),l;if(a>0){if(r)return null;l=1}else if(a<0)l=-1,a=-a;else return null;nc.subVectors(this.origin,e);const h=l*this.direction.dot(oy.crossVectors(nc,oy));if(h<0)return null;const u=l*this.direction.dot(n_.cross(nc));if(u<0||h+u>a)return null;const f=-l*nc.dot(i_);return f<0?null:this.at(f/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pt{constructor(e,n,t,r,s,a,l,h,u,f,p,g,v,y,w,x){pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,t,r,s,a,l,h,u,f,p,g,v,y,w,x)}set(e,n,t,r,s,a,l,h,u,f,p,g,v,y,w,x){const S=this.elements;return S[0]=e,S[4]=n,S[8]=t,S[12]=r,S[1]=s,S[5]=a,S[9]=l,S[13]=h,S[2]=u,S[6]=f,S[10]=p,S[14]=g,S[3]=v,S[7]=y,S[11]=w,S[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pt().fromArray(this.elements)}copy(e){const n=this.elements,t=e.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],this}copyPosition(e){const n=this.elements,t=e.elements;return n[12]=t[12],n[13]=t[13],n[14]=t[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,t){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(e,n,t){return this.set(e.x,n.x,t.x,0,e.y,n.y,t.y,0,e.z,n.z,t.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,t=e.elements,r=1/id.setFromMatrixColumn(e,0).length(),s=1/id.setFromMatrixColumn(e,1).length(),a=1/id.setFromMatrixColumn(e,2).length();return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=0,n[4]=t[4]*s,n[5]=t[5]*s,n[6]=t[6]*s,n[7]=0,n[8]=t[8]*a,n[9]=t[9]*a,n[10]=t[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,t=e.x,r=e.y,s=e.z,a=Math.cos(t),l=Math.sin(t),h=Math.cos(r),u=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const g=a*f,v=a*p,y=l*f,w=l*p;n[0]=h*f,n[4]=-h*p,n[8]=u,n[1]=v+y*u,n[5]=g-w*u,n[9]=-l*h,n[2]=w-g*u,n[6]=y+v*u,n[10]=a*h}else if(e.order==="YXZ"){const g=h*f,v=h*p,y=u*f,w=u*p;n[0]=g+w*l,n[4]=y*l-v,n[8]=a*u,n[1]=a*p,n[5]=a*f,n[9]=-l,n[2]=v*l-y,n[6]=w+g*l,n[10]=a*h}else if(e.order==="ZXY"){const g=h*f,v=h*p,y=u*f,w=u*p;n[0]=g-w*l,n[4]=-a*p,n[8]=y+v*l,n[1]=v+y*l,n[5]=a*f,n[9]=w-g*l,n[2]=-a*u,n[6]=l,n[10]=a*h}else if(e.order==="ZYX"){const g=a*f,v=a*p,y=l*f,w=l*p;n[0]=h*f,n[4]=y*u-v,n[8]=g*u+w,n[1]=h*p,n[5]=w*u+g,n[9]=v*u-y,n[2]=-u,n[6]=l*h,n[10]=a*h}else if(e.order==="YZX"){const g=a*h,v=a*u,y=l*h,w=l*u;n[0]=h*f,n[4]=w-g*p,n[8]=y*p+v,n[1]=p,n[5]=a*f,n[9]=-l*f,n[2]=-u*f,n[6]=v*p+y,n[10]=g-w*p}else if(e.order==="XZY"){const g=a*h,v=a*u,y=l*h,w=l*u;n[0]=h*f,n[4]=-p,n[8]=u*f,n[1]=g*p+w,n[5]=a*f,n[9]=v*p-y,n[2]=y*p-v,n[6]=l*f,n[10]=w*p+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Qse,e,Hse)}lookAt(e,n,t){const r=this.elements;return zs.subVectors(e,n),zs.lengthSq()===0&&(zs.z=1),zs.normalize(),ic.crossVectors(t,zs),ic.lengthSq()===0&&(Math.abs(t.z)===1?zs.x+=1e-4:zs.z+=1e-4,zs.normalize(),ic.crossVectors(t,zs)),ic.normalize(),ay.crossVectors(zs,ic),r[0]=ic.x,r[4]=ay.x,r[8]=zs.x,r[1]=ic.y,r[5]=ay.y,r[9]=zs.y,r[2]=ic.z,r[6]=ay.z,r[10]=zs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const t=e.elements,r=n.elements,s=this.elements,a=t[0],l=t[4],h=t[8],u=t[12],f=t[1],p=t[5],g=t[9],v=t[13],y=t[2],w=t[6],x=t[10],S=t[14],_=t[3],O=t[7],k=t[11],M=t[15],P=r[0],D=r[4],A=r[8],R=r[12],T=r[1],N=r[5],L=r[9],I=r[13],$=r[2],B=r[6],U=r[10],Y=r[14],Z=r[3],ie=r[7],ce=r[11],ge=r[15];return s[0]=a*P+l*T+h*$+u*Z,s[4]=a*D+l*N+h*B+u*ie,s[8]=a*A+l*L+h*U+u*ce,s[12]=a*R+l*I+h*Y+u*ge,s[1]=f*P+p*T+g*$+v*Z,s[5]=f*D+p*N+g*B+v*ie,s[9]=f*A+p*L+g*U+v*ce,s[13]=f*R+p*I+g*Y+v*ge,s[2]=y*P+w*T+x*$+S*Z,s[6]=y*D+w*N+x*B+S*ie,s[10]=y*A+w*L+x*U+S*ce,s[14]=y*R+w*I+x*Y+S*ge,s[3]=_*P+O*T+k*$+M*Z,s[7]=_*D+O*N+k*B+M*ie,s[11]=_*A+O*L+k*U+M*ce,s[15]=_*R+O*I+k*Y+M*ge,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],t=e[4],r=e[8],s=e[12],a=e[1],l=e[5],h=e[9],u=e[13],f=e[2],p=e[6],g=e[10],v=e[14],y=e[3],w=e[7],x=e[11],S=e[15];return y*(+s*h*p-r*u*p-s*l*g+t*u*g+r*l*v-t*h*v)+w*(+n*h*v-n*u*g+s*a*g-r*a*v+r*u*f-s*h*f)+x*(+n*u*p-n*l*v-s*a*p+t*a*v+s*l*f-t*u*f)+S*(-r*l*f-n*h*p+n*l*g+r*a*p-t*a*g+t*h*f)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,t){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=t),this}invert(){const e=this.elements,n=e[0],t=e[1],r=e[2],s=e[3],a=e[4],l=e[5],h=e[6],u=e[7],f=e[8],p=e[9],g=e[10],v=e[11],y=e[12],w=e[13],x=e[14],S=e[15],_=p*x*u-w*g*u+w*h*v-l*x*v-p*h*S+l*g*S,O=y*g*u-f*x*u-y*h*v+a*x*v+f*h*S-a*g*S,k=f*w*u-y*p*u+y*l*v-a*w*v-f*l*S+a*p*S,M=y*p*h-f*w*h-y*l*g+a*w*g+f*l*x-a*p*x,P=n*_+t*O+r*k+s*M;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/P;return e[0]=_*D,e[1]=(w*g*s-p*x*s-w*r*v+t*x*v+p*r*S-t*g*S)*D,e[2]=(l*x*s-w*h*s+w*r*u-t*x*u-l*r*S+t*h*S)*D,e[3]=(p*h*s-l*g*s-p*r*u+t*g*u+l*r*v-t*h*v)*D,e[4]=O*D,e[5]=(f*x*s-y*g*s+y*r*v-n*x*v-f*r*S+n*g*S)*D,e[6]=(y*h*s-a*x*s-y*r*u+n*x*u+a*r*S-n*h*S)*D,e[7]=(a*g*s-f*h*s+f*r*u-n*g*u-a*r*v+n*h*v)*D,e[8]=k*D,e[9]=(y*p*s-f*w*s-y*t*v+n*w*v+f*t*S-n*p*S)*D,e[10]=(a*w*s-y*l*s+y*t*u-n*w*u-a*t*S+n*l*S)*D,e[11]=(f*l*s-a*p*s-f*t*u+n*p*u+a*t*v-n*l*v)*D,e[12]=M*D,e[13]=(f*w*r-y*p*r+y*t*g-n*w*g-f*t*x+n*p*x)*D,e[14]=(y*l*r-a*w*r-y*t*h+n*w*h+a*t*x-n*l*x)*D,e[15]=(a*p*r-f*l*r+f*t*h-n*p*h-a*t*g+n*l*g)*D,this}scale(e){const n=this.elements,t=e.x,r=e.y,s=e.z;return n[0]*=t,n[4]*=r,n[8]*=s,n[1]*=t,n[5]*=r,n[9]*=s,n[2]*=t,n[6]*=r,n[10]*=s,n[3]*=t,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],t=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,t,r))}makeTranslation(e,n,t){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,t,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),t=Math.sin(e);return this.set(1,0,0,0,0,n,-t,0,0,t,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),t=Math.sin(e);return this.set(n,0,t,0,0,1,0,0,-t,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),t=Math.sin(e);return this.set(n,-t,0,0,t,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const t=Math.cos(n),r=Math.sin(n),s=1-t,a=e.x,l=e.y,h=e.z,u=s*a,f=s*l;return this.set(u*a+t,u*l-r*h,u*h+r*l,0,u*l+r*h,f*l+t,f*h-r*a,0,u*h-r*l,f*h+r*a,s*h*h+t,0,0,0,0,1),this}makeScale(e,n,t){return this.set(e,0,0,0,0,n,0,0,0,0,t,0,0,0,0,1),this}makeShear(e,n,t,r,s,a){return this.set(1,t,s,0,e,1,a,0,n,r,1,0,0,0,0,1),this}compose(e,n,t){const r=this.elements,s=n._x,a=n._y,l=n._z,h=n._w,u=s+s,f=a+a,p=l+l,g=s*u,v=s*f,y=s*p,w=a*f,x=a*p,S=l*p,_=h*u,O=h*f,k=h*p,M=t.x,P=t.y,D=t.z;return r[0]=(1-(w+S))*M,r[1]=(v+k)*M,r[2]=(y-O)*M,r[3]=0,r[4]=(v-k)*P,r[5]=(1-(g+S))*P,r[6]=(x+_)*P,r[7]=0,r[8]=(y+O)*D,r[9]=(x-_)*D,r[10]=(1-(g+w))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,t){const r=this.elements;let s=id.set(r[0],r[1],r[2]).length();const a=id.set(r[4],r[5],r[6]).length(),l=id.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Fo.copy(this);const u=1/s,f=1/a,p=1/l;return Fo.elements[0]*=u,Fo.elements[1]*=u,Fo.elements[2]*=u,Fo.elements[4]*=f,Fo.elements[5]*=f,Fo.elements[6]*=f,Fo.elements[8]*=p,Fo.elements[9]*=p,Fo.elements[10]*=p,n.setFromRotationMatrix(Fo),t.x=s,t.y=a,t.z=l,this}makePerspective(e,n,t,r,s,a,l=ba){const h=this.elements,u=2*s/(n-e),f=2*s/(t-r),p=(n+e)/(n-e),g=(t+r)/(t-r);let v,y;if(l===ba)v=-(a+s)/(a-s),y=-2*a*s/(a-s);else if(l===Lg)v=-a/(a-s),y=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return h[0]=u,h[4]=0,h[8]=p,h[12]=0,h[1]=0,h[5]=f,h[9]=g,h[13]=0,h[2]=0,h[6]=0,h[10]=v,h[14]=y,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,n,t,r,s,a,l=ba){const h=this.elements,u=1/(n-e),f=1/(t-r),p=1/(a-s),g=(n+e)*u,v=(t+r)*f;let y,w;if(l===ba)y=(a+s)*p,w=-2*p;else if(l===Lg)y=s*p,w=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return h[0]=2*u,h[4]=0,h[8]=0,h[12]=-g,h[1]=0,h[5]=2*f,h[9]=0,h[13]=-v,h[2]=0,h[6]=0,h[10]=w,h[14]=-y,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const n=this.elements,t=e.elements;for(let r=0;r<16;r++)if(n[r]!==t[r])return!1;return!0}fromArray(e,n=0){for(let t=0;t<16;t++)this.elements[t]=e[t+n];return this}toArray(e=[],n=0){const t=this.elements;return e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3],e[n+4]=t[4],e[n+5]=t[5],e[n+6]=t[6],e[n+7]=t[7],e[n+8]=t[8],e[n+9]=t[9],e[n+10]=t[10],e[n+11]=t[11],e[n+12]=t[12],e[n+13]=t[13],e[n+14]=t[14],e[n+15]=t[15],e}}const id=new ne,Fo=new pt,Qse=new ne(0,0,0),Hse=new ne(1,1,1),ic=new ne,ay=new ne,zs=new ne,M4=new pt,E4=new Wi;class tr{constructor(e=0,n=0,t=0,r=tr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=t,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,t,r=this._order){return this._x=e,this._y=n,this._z=t,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,t=!0){const r=e.elements,s=r[0],a=r[4],l=r[8],h=r[1],u=r[5],f=r[9],p=r[2],g=r[6],v=r[10];switch(n){case"XYZ":this._y=Math.asin(Ri(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ri(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ri(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-Ri(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Ri(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-Ri(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,t===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,t){return M4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(M4,n,t)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return E4.setFromEuler(this),this.setFromQuaternion(E4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}tr.DEFAULT_ORDER="XYZ";class kO{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Gse=0;const P4=new ne,rd=new Wi,Ya=new pt,ly=new ne,Lp=new ne,Yse=new ne,jse=new Wi,A4=new ne(1,0,0),R4=new ne(0,1,0),I4=new ne(0,0,1),D4={type:"added"},qse={type:"removed"},sd={type:"childadded",child:null},r_={type:"childremoved",child:null};class An extends Pa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gse++}),this.uuid=no(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=An.DEFAULT_UP.clone();const e=new ne,n=new tr,t=new Wi,r=new ne(1,1,1);function s(){t.setFromEuler(n,!1)}function a(){n.setFromQuaternion(t,void 0,!1)}n._onChange(s),t._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pt},normalMatrix:{value:new cn}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=An.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=An.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new kO,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return rd.setFromAxisAngle(e,n),this.quaternion.multiply(rd),this}rotateOnWorldAxis(e,n){return rd.setFromAxisAngle(e,n),this.quaternion.premultiply(rd),this}rotateX(e){return this.rotateOnAxis(A4,e)}rotateY(e){return this.rotateOnAxis(R4,e)}rotateZ(e){return this.rotateOnAxis(I4,e)}translateOnAxis(e,n){return P4.copy(e).applyQuaternion(this.quaternion),this.position.add(P4.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(A4,e)}translateY(e){return this.translateOnAxis(R4,e)}translateZ(e){return this.translateOnAxis(I4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ya.copy(this.matrixWorld).invert())}lookAt(e,n,t){e.isVector3?ly.copy(e):ly.set(e,n,t);const r=this.parent;this.updateWorldMatrix(!0,!1),Lp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ya.lookAt(Lp,ly,this.up):Ya.lookAt(ly,Lp,this.up),this.quaternion.setFromRotationMatrix(Ya),r&&(Ya.extractRotation(r.matrixWorld),rd.setFromRotationMatrix(Ya),this.quaternion.premultiply(rd.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(D4),sd.child=e,this.dispatchEvent(sd),sd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(qse),r_.child=e,this.dispatchEvent(r_),r_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ya.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ya.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ya),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(D4),sd.child=e,this.dispatchEvent(sd),sd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let t=0,r=this.children.length;t<r;t++){const a=this.children[t].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,t=[]){this[e]===n&&t.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,n,t);return t}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lp,e,Yse),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lp,jse,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let t=0,r=n.length;t<r;t++)n[t].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let t=0,r=n.length;t<r;t++)n[t].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let t=0,r=n.length;t<r;t++){const s=n[t];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const t=this.parent;if(e===!0&&t!==null&&t.matrixWorldAutoUpdate===!0&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",t={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,h){return l[h.uuid]===void 0&&(l[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const h=l.shapes;if(Array.isArray(h))for(let u=0,f=h.length;u<f;u++){const p=h[u];s(e.shapes,p)}else s(e.shapes,h)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let h=0,u=this.material.length;h<u;h++)l.push(s(e.materials,this.material[h]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const h=this.animations[l];r.animations.push(s(e.animations,h))}}if(n){const l=a(e.geometries),h=a(e.materials),u=a(e.textures),f=a(e.images),p=a(e.shapes),g=a(e.skeletons),v=a(e.animations),y=a(e.nodes);l.length>0&&(t.geometries=l),h.length>0&&(t.materials=h),u.length>0&&(t.textures=u),f.length>0&&(t.images=f),p.length>0&&(t.shapes=p),g.length>0&&(t.skeletons=g),v.length>0&&(t.animations=v),y.length>0&&(t.nodes=y)}return t.object=r,t;function a(l){const h=[];for(const u in l){const f=l[u];delete f.metadata,h.push(f)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let t=0;t<e.children.length;t++){const r=e.children[t];this.add(r.clone())}return this}}An.DEFAULT_UP=new ne(0,1,0);An.DEFAULT_MATRIX_AUTO_UPDATE=!0;An.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xo=new ne,ja=new ne,s_=new ne,qa=new ne,od=new ne,ad=new ne,N4=new ne,o_=new ne,a_=new ne,l_=new ne;class _s{constructor(e=new ne,n=new ne,t=new ne){this.a=e,this.b=n,this.c=t}static getNormal(e,n,t,r){r.subVectors(t,n),Xo.subVectors(e,n),r.cross(Xo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,t,r,s){Xo.subVectors(r,n),ja.subVectors(t,n),s_.subVectors(e,n);const a=Xo.dot(Xo),l=Xo.dot(ja),h=Xo.dot(s_),u=ja.dot(ja),f=ja.dot(s_),p=a*u-l*l;if(p===0)return s.set(0,0,0),null;const g=1/p,v=(u*h-l*f)*g,y=(a*f-l*h)*g;return s.set(1-v-y,y,v)}static containsPoint(e,n,t,r){return this.getBarycoord(e,n,t,r,qa)===null?!1:qa.x>=0&&qa.y>=0&&qa.x+qa.y<=1}static getInterpolation(e,n,t,r,s,a,l,h){return this.getBarycoord(e,n,t,r,qa)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(s,qa.x),h.addScaledVector(a,qa.y),h.addScaledVector(l,qa.z),h)}static isFrontFacing(e,n,t,r){return Xo.subVectors(t,n),ja.subVectors(e,n),Xo.cross(ja).dot(r)<0}set(e,n,t){return this.a.copy(e),this.b.copy(n),this.c.copy(t),this}setFromPointsAndIndices(e,n,t,r){return this.a.copy(e[n]),this.b.copy(e[t]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,t,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,t),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xo.subVectors(this.c,this.b),ja.subVectors(this.a,this.b),Xo.cross(ja).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _s.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return _s.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,t,r,s){return _s.getInterpolation(e,this.a,this.b,this.c,n,t,r,s)}containsPoint(e){return _s.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _s.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const t=this.a,r=this.b,s=this.c;let a,l;od.subVectors(r,t),ad.subVectors(s,t),o_.subVectors(e,t);const h=od.dot(o_),u=ad.dot(o_);if(h<=0&&u<=0)return n.copy(t);a_.subVectors(e,r);const f=od.dot(a_),p=ad.dot(a_);if(f>=0&&p<=f)return n.copy(r);const g=h*p-f*u;if(g<=0&&h>=0&&f<=0)return a=h/(h-f),n.copy(t).addScaledVector(od,a);l_.subVectors(e,s);const v=od.dot(l_),y=ad.dot(l_);if(y>=0&&v<=y)return n.copy(s);const w=v*u-h*y;if(w<=0&&u>=0&&y<=0)return l=u/(u-y),n.copy(t).addScaledVector(ad,l);const x=f*y-v*p;if(x<=0&&p-f>=0&&v-y>=0)return N4.subVectors(s,r),l=(p-f)/(p-f+(v-y)),n.copy(r).addScaledVector(N4,l);const S=1/(x+w+g);return a=w*S,l=g*S,n.copy(t).addScaledVector(od,a).addScaledVector(ad,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},rc={h:0,s:0,l:0},cy={h:0,s:0,l:0};function c_(i,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(e-i)*6*n:n<1/2?e:n<2/3?i+(e-i)*6*(2/3-n):i}class nt{constructor(e,n,t){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,t)}set(e,n,t){if(n===void 0&&t===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,t);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ys){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Yn.toWorkingColorSpace(this,n),this}setRGB(e,n,t,r=Yn.workingColorSpace){return this.r=e,this.g=n,this.b=t,Yn.toWorkingColorSpace(this,r),this}setHSL(e,n,t,r=Yn.workingColorSpace){if(e=Gk(e,1),n=Ri(n,0,1),t=Ri(t,0,1),n===0)this.r=this.g=this.b=t;else{const s=t<=.5?t*(1+n):t+n-t*n,a=2*t-s;this.r=c_(a,s,e+1/3),this.g=c_(a,s,e),this.b=c_(a,s,e-1/3)}return Yn.toWorkingColorSpace(this,r),this}setStyle(e,n=Ys){function t(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],l=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return t(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return t(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return t(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ys){const t=rL[e.toLowerCase()];return t!==void 0?this.setHex(t,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=jd(e.r),this.g=jd(e.g),this.b=jd(e.b),this}copyLinearToSRGB(e){return this.r=qw(e.r),this.g=qw(e.g),this.b=qw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ys){return Yn.fromWorkingColorSpace(Ar.copy(this),e),Math.round(Ri(Ar.r*255,0,255))*65536+Math.round(Ri(Ar.g*255,0,255))*256+Math.round(Ri(Ar.b*255,0,255))}getHexString(e=Ys){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Yn.workingColorSpace){Yn.fromWorkingColorSpace(Ar.copy(this),n);const t=Ar.r,r=Ar.g,s=Ar.b,a=Math.max(t,r,s),l=Math.min(t,r,s);let h,u;const f=(l+a)/2;if(l===a)h=0,u=0;else{const p=a-l;switch(u=f<=.5?p/(a+l):p/(2-a-l),a){case t:h=(r-s)/p+(r<s?6:0);break;case r:h=(s-t)/p+2;break;case s:h=(t-r)/p+4;break}h/=6}return e.h=h,e.s=u,e.l=f,e}getRGB(e,n=Yn.workingColorSpace){return Yn.fromWorkingColorSpace(Ar.copy(this),n),e.r=Ar.r,e.g=Ar.g,e.b=Ar.b,e}getStyle(e=Ys){Yn.fromWorkingColorSpace(Ar.copy(this),e);const n=Ar.r,t=Ar.g,r=Ar.b;return e!==Ys?`color(${e} ${n.toFixed(3)} ${t.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(t*255)},${Math.round(r*255)})`}offsetHSL(e,n,t){return this.getHSL(rc),this.setHSL(rc.h+e,rc.s+n,rc.l+t)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,t){return this.r=e.r+(n.r-e.r)*t,this.g=e.g+(n.g-e.g)*t,this.b=e.b+(n.b-e.b)*t,this}lerpHSL(e,n){this.getHSL(rc),e.getHSL(cy);const t=hg(rc.h,cy.h,n),r=hg(rc.s,cy.s,n),s=hg(rc.l,cy.l,n);return this.setHSL(t,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,t=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*t+s[6]*r,this.g=s[1]*n+s[4]*t+s[7]*r,this.b=s[2]*n+s[5]*t+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ar=new nt;nt.NAMES=rL;let Zse=0;class Br extends Pa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zse++}),this.uuid=no(),this.name="",this.type="Material",this.blending=tu,this.side=bl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=gb,this.blendDst=vb,this.blendEquation=Oc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new nt(0,0,0),this.blendAlpha=0,this.depthFunc=Ag,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=NC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vh,this.stencilZFail=Vh,this.stencilZPass=Vh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const t=e[n];if(t===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(t):r&&r.isVector3&&t&&t.isVector3?r.copy(t):this[n]=t}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const t={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(t.dispersion=this.dispersion),this.iridescence!==void 0&&(t.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(t.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(t.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(t.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(t.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(t.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(t.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(t.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(e).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapRotation!==void 0&&(t.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==tu&&(t.blending=this.blending),this.side!==bl&&(t.side=this.side),this.vertexColors===!0&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=!0),this.blendSrc!==gb&&(t.blendSrc=this.blendSrc),this.blendDst!==vb&&(t.blendDst=this.blendDst),this.blendEquation!==Oc&&(t.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(t.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(t.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(t.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(t.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(t.blendAlpha=this.blendAlpha),this.depthFunc!==Ag&&(t.depthFunc=this.depthFunc),this.depthTest===!1&&(t.depthTest=this.depthTest),this.depthWrite===!1&&(t.depthWrite=this.depthWrite),this.colorWrite===!1&&(t.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(t.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==NC&&(t.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(t.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(t.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vh&&(t.stencilFail=this.stencilFail),this.stencilZFail!==Vh&&(t.stencilZFail=this.stencilZFail),this.stencilZPass!==Vh&&(t.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(t.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaHash===!0&&(t.alphaHash=!0),this.alphaToCoverage===!0&&(t.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=!0),this.forceSinglePass===!0&&(t.forceSinglePass=!0),this.wireframe===!0&&(t.wireframe=!0),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),Object.keys(this.userData).length>0&&(t.userData=this.userData);function r(s){const a=[];for(const l in s){const h=s[l];delete h.metadata,a.push(h)}return a}if(n){const s=r(e.textures),a=r(e.images);s.length>0&&(t.textures=s),a.length>0&&(t.images=a)}return t}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let t=null;if(n!==null){const r=n.length;t=new Array(r);for(let s=0;s!==r;++s)t[s]=n[s].clone()}return this.clippingPlanes=t,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Aa extends Br{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.combine=x0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ol=Kse();function Kse(){const i=new ArrayBuffer(4),e=new Float32Array(i),n=new Uint32Array(i),t=new Uint32Array(512),r=new Uint32Array(512);for(let h=0;h<256;++h){const u=h-127;u<-27?(t[h]=0,t[h|256]=32768,r[h]=24,r[h|256]=24):u<-14?(t[h]=1024>>-u-14,t[h|256]=1024>>-u-14|32768,r[h]=-u-1,r[h|256]=-u-1):u<=15?(t[h]=u+15<<10,t[h|256]=u+15<<10|32768,r[h]=13,r[h|256]=13):u<128?(t[h]=31744,t[h|256]=64512,r[h]=24,r[h|256]=24):(t[h]=31744,t[h|256]=64512,r[h]=13,r[h|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let h=1;h<1024;++h){let u=h<<13,f=0;for(;!(u&8388608);)u<<=1,f-=8388608;u&=-8388609,f+=947912704,s[h]=u|f}for(let h=1024;h<2048;++h)s[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)a[h]=h<<23;a[31]=1199570944,a[32]=2147483648;for(let h=33;h<63;++h)a[h]=2147483648+(h-32<<23);a[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(l[h]=1024);return{floatView:e,uint32View:n,baseTable:t,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:l}}function ms(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Ri(i,-65504,65504),ol.floatView[0]=i;const e=ol.uint32View[0],n=e>>23&511;return ol.baseTable[n]+((e&8388607)>>ol.shiftTable[n])}function qm(i){const e=i>>10;return ol.uint32View[0]=ol.mantissaTable[ol.offsetTable[e]+(i&1023)]+ol.exponentTable[e],ol.floatView[0]}const Jse={toHalfFloat:ms,fromHalfFloat:qm},zi=new ne,hy=new Qe;class In{constructor(e,n,t=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=t,this.usage=Vg,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=yo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return tL("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,t){e*=this.itemSize,t*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[t+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,t=this.count;n<t;n++)hy.fromBufferAttribute(this,n),hy.applyMatrix3(e),this.setXY(n,hy.x,hy.y);else if(this.itemSize===3)for(let n=0,t=this.count;n<t;n++)zi.fromBufferAttribute(this,n),zi.applyMatrix3(e),this.setXYZ(n,zi.x,zi.y,zi.z);return this}applyMatrix4(e){for(let n=0,t=this.count;n<t;n++)zi.fromBufferAttribute(this,n),zi.applyMatrix4(e),this.setXYZ(n,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let n=0,t=this.count;n<t;n++)zi.fromBufferAttribute(this,n),zi.applyNormalMatrix(e),this.setXYZ(n,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let n=0,t=this.count;n<t;n++)zi.fromBufferAttribute(this,n),zi.transformDirection(e),this.setXYZ(n,zi.x,zi.y,zi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let t=this.array[e*this.itemSize+n];return this.normalized&&(t=Jr(t,this.array)),t}setComponent(e,n,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+n]=t,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Jr(n,this.array)),n}setX(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Jr(n,this.array)),n}setY(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Jr(n,this.array)),n}setZ(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Jr(n,this.array)),n}setW(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,t){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array)),this.array[e+0]=n,this.array[e+1]=t,this}setXYZ(e,n,t,r){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array),r=dn(r,this.array)),this.array[e+0]=n,this.array[e+1]=t,this.array[e+2]=r,this}setXYZW(e,n,t,r,s){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array),r=dn(r,this.array),s=dn(s,this.array)),this.array[e+0]=n,this.array[e+1]=t,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Vg&&(e.usage=this.usage),e}}class eoe extends In{constructor(e,n,t){super(new Int8Array(e),n,t)}}class toe extends In{constructor(e,n,t){super(new Uint8Array(e),n,t)}}class noe extends In{constructor(e,n,t){super(new Uint8ClampedArray(e),n,t)}}class ioe extends In{constructor(e,n,t){super(new Int16Array(e),n,t)}}class TO extends In{constructor(e,n,t){super(new Uint16Array(e),n,t)}}class roe extends In{constructor(e,n,t){super(new Int32Array(e),n,t)}}class jk extends In{constructor(e,n,t){super(new Uint32Array(e),n,t)}}class soe extends In{constructor(e,n,t){super(new Uint16Array(e),n,t),this.isFloat16BufferAttribute=!0}getX(e){let n=qm(this.array[e*this.itemSize]);return this.normalized&&(n=Jr(n,this.array)),n}setX(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize]=ms(n),this}getY(e){let n=qm(this.array[e*this.itemSize+1]);return this.normalized&&(n=Jr(n,this.array)),n}setY(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+1]=ms(n),this}getZ(e){let n=qm(this.array[e*this.itemSize+2]);return this.normalized&&(n=Jr(n,this.array)),n}setZ(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+2]=ms(n),this}getW(e){let n=qm(this.array[e*this.itemSize+3]);return this.normalized&&(n=Jr(n,this.array)),n}setW(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+3]=ms(n),this}setXY(e,n,t){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array)),this.array[e+0]=ms(n),this.array[e+1]=ms(t),this}setXYZ(e,n,t,r){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array),r=dn(r,this.array)),this.array[e+0]=ms(n),this.array[e+1]=ms(t),this.array[e+2]=ms(r),this}setXYZW(e,n,t,r,s){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array),r=dn(r,this.array),s=dn(s,this.array)),this.array[e+0]=ms(n),this.array[e+1]=ms(t),this.array[e+2]=ms(r),this.array[e+3]=ms(s),this}}class Ct extends In{constructor(e,n,t){super(new Float32Array(e),n,t)}}let ooe=0;const uo=new pt,h_=new An,ld=new ne,Fs=new Sr,Bp=new Sr,hr=new ne;class rn extends Pa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ooe++}),this.uuid=no(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(JV(e)?jk:TO)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,t=0){this.groups.push({start:e,count:n,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const s=new cn().getNormalMatrix(e);t.applyNormalMatrix(s),t.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return uo.makeRotationFromQuaternion(e),this.applyMatrix4(uo),this}rotateX(e){return uo.makeRotationX(e),this.applyMatrix4(uo),this}rotateY(e){return uo.makeRotationY(e),this.applyMatrix4(uo),this}rotateZ(e){return uo.makeRotationZ(e),this.applyMatrix4(uo),this}translate(e,n,t){return uo.makeTranslation(e,n,t),this.applyMatrix4(uo),this}scale(e,n,t){return uo.makeScale(e,n,t),this.applyMatrix4(uo),this}lookAt(e){return h_.lookAt(e),h_.updateMatrix(),this.applyMatrix4(h_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ld).negate(),this.translate(ld.x,ld.y,ld.z),this}setFromPoints(e){const n=[];for(let t=0,r=e.length;t<r;t++){const s=e[t];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let t=0,r=n.length;t<r;t++){const s=n[t];Fs.setFromBufferAttribute(s),this.morphTargetsRelative?(hr.addVectors(this.boundingBox.min,Fs.min),this.boundingBox.expandByPoint(hr),hr.addVectors(this.boundingBox.max,Fs.max),this.boundingBox.expandByPoint(hr)):(this.boundingBox.expandByPoint(Fs.min),this.boundingBox.expandByPoint(Fs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ne,1/0);return}if(e){const t=this.boundingSphere.center;if(Fs.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const l=n[s];Bp.setFromBufferAttribute(l),this.morphTargetsRelative?(hr.addVectors(Fs.min,Bp.min),Fs.expandByPoint(hr),hr.addVectors(Fs.max,Bp.max),Fs.expandByPoint(hr)):(Fs.expandByPoint(Bp.min),Fs.expandByPoint(Bp.max))}Fs.getCenter(t);let r=0;for(let s=0,a=e.count;s<a;s++)hr.fromBufferAttribute(e,s),r=Math.max(r,t.distanceToSquared(hr));if(n)for(let s=0,a=n.length;s<a;s++){const l=n[s],h=this.morphTargetsRelative;for(let u=0,f=l.count;u<f;u++)hr.fromBufferAttribute(l,u),h&&(ld.fromBufferAttribute(e,u),hr.add(ld)),r=Math.max(r,t.distanceToSquared(hr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=n.position,r=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new In(new Float32Array(4*t.count),4));const a=this.getAttribute("tangent"),l=[],h=[];for(let A=0;A<t.count;A++)l[A]=new ne,h[A]=new ne;const u=new ne,f=new ne,p=new ne,g=new Qe,v=new Qe,y=new Qe,w=new ne,x=new ne;function S(A,R,T){u.fromBufferAttribute(t,A),f.fromBufferAttribute(t,R),p.fromBufferAttribute(t,T),g.fromBufferAttribute(s,A),v.fromBufferAttribute(s,R),y.fromBufferAttribute(s,T),f.sub(u),p.sub(u),v.sub(g),y.sub(g);const N=1/(v.x*y.y-y.x*v.y);isFinite(N)&&(w.copy(f).multiplyScalar(y.y).addScaledVector(p,-v.y).multiplyScalar(N),x.copy(p).multiplyScalar(v.x).addScaledVector(f,-y.x).multiplyScalar(N),l[A].add(w),l[R].add(w),l[T].add(w),h[A].add(x),h[R].add(x),h[T].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let A=0,R=_.length;A<R;++A){const T=_[A],N=T.start,L=T.count;for(let I=N,$=N+L;I<$;I+=3)S(e.getX(I+0),e.getX(I+1),e.getX(I+2))}const O=new ne,k=new ne,M=new ne,P=new ne;function D(A){M.fromBufferAttribute(r,A),P.copy(M);const R=l[A];O.copy(R),O.sub(M.multiplyScalar(M.dot(R))).normalize(),k.crossVectors(P,R);const N=k.dot(h[A])<0?-1:1;a.setXYZW(A,O.x,O.y,O.z,N)}for(let A=0,R=_.length;A<R;++A){const T=_[A],N=T.start,L=T.count;for(let I=N,$=N+L;I<$;I+=3)D(e.getX(I+0)),D(e.getX(I+1)),D(e.getX(I+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new In(new Float32Array(n.count*3),3),this.setAttribute("normal",t);else for(let g=0,v=t.count;g<v;g++)t.setXYZ(g,0,0,0);const r=new ne,s=new ne,a=new ne,l=new ne,h=new ne,u=new ne,f=new ne,p=new ne;if(e)for(let g=0,v=e.count;g<v;g+=3){const y=e.getX(g+0),w=e.getX(g+1),x=e.getX(g+2);r.fromBufferAttribute(n,y),s.fromBufferAttribute(n,w),a.fromBufferAttribute(n,x),f.subVectors(a,s),p.subVectors(r,s),f.cross(p),l.fromBufferAttribute(t,y),h.fromBufferAttribute(t,w),u.fromBufferAttribute(t,x),l.add(f),h.add(f),u.add(f),t.setXYZ(y,l.x,l.y,l.z),t.setXYZ(w,h.x,h.y,h.z),t.setXYZ(x,u.x,u.y,u.z)}else for(let g=0,v=n.count;g<v;g+=3)r.fromBufferAttribute(n,g+0),s.fromBufferAttribute(n,g+1),a.fromBufferAttribute(n,g+2),f.subVectors(a,s),p.subVectors(r,s),f.cross(p),t.setXYZ(g+0,f.x,f.y,f.z),t.setXYZ(g+1,f.x,f.y,f.z),t.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),t.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,t=e.count;n<t;n++)hr.fromBufferAttribute(e,n),hr.normalize(),e.setXYZ(n,hr.x,hr.y,hr.z)}toNonIndexed(){function e(l,h){const u=l.array,f=l.itemSize,p=l.normalized,g=new u.constructor(h.length*f);let v=0,y=0;for(let w=0,x=h.length;w<x;w++){l.isInterleavedBufferAttribute?v=h[w]*l.data.stride+l.offset:v=h[w]*f;for(let S=0;S<f;S++)g[y++]=u[v++]}return new In(g,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new rn,t=this.index.array,r=this.attributes;for(const l in r){const h=r[l],u=e(h,t);n.setAttribute(l,u)}const s=this.morphAttributes;for(const l in s){const h=[],u=s[l];for(let f=0,p=u.length;f<p;f++){const g=u[f],v=e(g,t);h.push(v)}n.morphAttributes[l]=h}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,h=a.length;l<h;l++){const u=a[l];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const u in h)h[u]!==void 0&&(e[u]=h[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const t=this.attributes;for(const h in t){const u=t[h];e.data.attributes[h]=u.toJSON(e.data)}const r={};let s=!1;for(const h in this.morphAttributes){const u=this.morphAttributes[h],f=[];for(let p=0,g=u.length;p<g;p++){const v=u[p];f.push(v.toJSON(e.data))}f.length>0&&(r[h]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const t=e.index;t!==null&&this.setIndex(t.clone(n));const r=e.attributes;for(const u in r){const f=r[u];this.setAttribute(u,f.clone(n))}const s=e.morphAttributes;for(const u in s){const f=[],p=s[u];for(let g=0,v=p.length;g<v;g++)f.push(p[g].clone(n));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,f=a.length;u<f;u++){const p=a[u];this.addGroup(p.start,p.count,p.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $4=new pt,wh=new ku,uy=new Cr,V4=new ne,cd=new ne,hd=new ne,ud=new ne,u_=new ne,dy=new ne,fy=new Qe,py=new Qe,my=new Qe,L4=new ne,B4=new ne,U4=new ne,gy=new ne,vy=new ne;class Jn extends An{constructor(e=new rn,n=new Aa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,t=Object.keys(n);if(t.length>0){const r=n[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,n){const t=this.geometry,r=t.attributes.position,s=t.morphAttributes.position,a=t.morphTargetsRelative;n.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){dy.set(0,0,0);for(let h=0,u=s.length;h<u;h++){const f=l[h],p=s[h];f!==0&&(u_.fromBufferAttribute(p,e),a?dy.addScaledVector(u_,f):dy.addScaledVector(u_.sub(n),f))}n.add(dy)}return n}raycast(e,n){const t=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),uy.copy(t.boundingSphere),uy.applyMatrix4(s),wh.copy(e.ray).recast(e.near),!(uy.containsPoint(wh.origin)===!1&&(wh.intersectSphere(uy,V4)===null||wh.origin.distanceToSquared(V4)>(e.far-e.near)**2))&&($4.copy(s).invert(),wh.copy(e.ray).applyMatrix4($4),!(t.boundingBox!==null&&wh.intersectsBox(t.boundingBox)===!1)&&this._computeIntersections(e,n,wh)))}_computeIntersections(e,n,t){let r;const s=this.geometry,a=this.material,l=s.index,h=s.attributes.position,u=s.attributes.uv,f=s.attributes.uv1,p=s.attributes.normal,g=s.groups,v=s.drawRange;if(l!==null)if(Array.isArray(a))for(let y=0,w=g.length;y<w;y++){const x=g[y],S=a[x.materialIndex],_=Math.max(x.start,v.start),O=Math.min(l.count,Math.min(x.start+x.count,v.start+v.count));for(let k=_,M=O;k<M;k+=3){const P=l.getX(k),D=l.getX(k+1),A=l.getX(k+2);r=yy(this,S,e,t,u,f,p,P,D,A),r&&(r.faceIndex=Math.floor(k/3),r.face.materialIndex=x.materialIndex,n.push(r))}}else{const y=Math.max(0,v.start),w=Math.min(l.count,v.start+v.count);for(let x=y,S=w;x<S;x+=3){const _=l.getX(x),O=l.getX(x+1),k=l.getX(x+2);r=yy(this,a,e,t,u,f,p,_,O,k),r&&(r.faceIndex=Math.floor(x/3),n.push(r))}}else if(h!==void 0)if(Array.isArray(a))for(let y=0,w=g.length;y<w;y++){const x=g[y],S=a[x.materialIndex],_=Math.max(x.start,v.start),O=Math.min(h.count,Math.min(x.start+x.count,v.start+v.count));for(let k=_,M=O;k<M;k+=3){const P=k,D=k+1,A=k+2;r=yy(this,S,e,t,u,f,p,P,D,A),r&&(r.faceIndex=Math.floor(k/3),r.face.materialIndex=x.materialIndex,n.push(r))}}else{const y=Math.max(0,v.start),w=Math.min(h.count,v.start+v.count);for(let x=y,S=w;x<S;x+=3){const _=x,O=x+1,k=x+2;r=yy(this,a,e,t,u,f,p,_,O,k),r&&(r.faceIndex=Math.floor(x/3),n.push(r))}}}}function aoe(i,e,n,t,r,s,a,l){let h;if(e.side===Vr?h=t.intersectTriangle(a,s,r,!0,l):h=t.intersectTriangle(r,s,a,e.side===bl,l),h===null)return null;vy.copy(l),vy.applyMatrix4(i.matrixWorld);const u=n.ray.origin.distanceTo(vy);return u<n.near||u>n.far?null:{distance:u,point:vy.clone(),object:i}}function yy(i,e,n,t,r,s,a,l,h,u){i.getVertexPosition(l,cd),i.getVertexPosition(h,hd),i.getVertexPosition(u,ud);const f=aoe(i,e,n,t,cd,hd,ud,gy);if(f){r&&(fy.fromBufferAttribute(r,l),py.fromBufferAttribute(r,h),my.fromBufferAttribute(r,u),f.uv=_s.getInterpolation(gy,cd,hd,ud,fy,py,my,new Qe)),s&&(fy.fromBufferAttribute(s,l),py.fromBufferAttribute(s,h),my.fromBufferAttribute(s,u),f.uv1=_s.getInterpolation(gy,cd,hd,ud,fy,py,my,new Qe)),a&&(L4.fromBufferAttribute(a,l),B4.fromBufferAttribute(a,h),U4.fromBufferAttribute(a,u),f.normal=_s.getInterpolation(gy,cd,hd,ud,L4,B4,U4,new ne),f.normal.dot(t.direction)>0&&f.normal.multiplyScalar(-1));const p={a:l,b:h,c:u,normal:new ne,materialIndex:0};_s.getNormal(cd,hd,ud,p.normal),f.face=p}return f}class Zc extends rn{constructor(e=1,n=1,t=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:t,widthSegments:r,heightSegments:s,depthSegments:a};const l=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const h=[],u=[],f=[],p=[];let g=0,v=0;y("z","y","x",-1,-1,t,n,e,a,s,0),y("z","y","x",1,-1,t,n,-e,a,s,1),y("x","z","y",1,1,e,t,n,r,a,2),y("x","z","y",1,-1,e,t,-n,r,a,3),y("x","y","z",1,-1,e,n,t,r,s,4),y("x","y","z",-1,-1,e,n,-t,r,s,5),this.setIndex(h),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(f,3)),this.setAttribute("uv",new Ct(p,2));function y(w,x,S,_,O,k,M,P,D,A,R){const T=k/D,N=M/A,L=k/2,I=M/2,$=P/2,B=D+1,U=A+1;let Y=0,Z=0;const ie=new ne;for(let ce=0;ce<U;ce++){const ge=ce*N-I;for(let Ae=0;Ae<B;Ae++){const Se=Ae*T-L;ie[w]=Se*_,ie[x]=ge*O,ie[S]=$,u.push(ie.x,ie.y,ie.z),ie[w]=0,ie[x]=0,ie[S]=P>0?1:-1,f.push(ie.x,ie.y,ie.z),p.push(Ae/D),p.push(1-ce/A),Y+=1}}for(let ce=0;ce<A;ce++)for(let ge=0;ge<D;ge++){const Ae=g+ge+B*ce,Se=g+ge+B*(ce+1),he=g+(ge+1)+B*(ce+1),Ce=g+(ge+1)+B*ce;h.push(Ae,Se,Ce),h.push(Se,he,Ce),Z+=6}l.addGroup(v,Z,R),v+=Z,g+=Y}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function bf(i){const e={};for(const n in i){e[n]={};for(const t in i[n]){const r=i[n][t];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][t]=null):e[n][t]=r.clone():Array.isArray(r)?e[n][t]=r.slice():e[n][t]=r}}return e}function Kr(i){const e={};for(let n=0;n<i.length;n++){const t=bf(i[n]);for(const r in t)e[r]=t[r]}return e}function loe(i){const e=[];for(let n=0;n<i.length;n++)e.push(i[n].clone());return e}function sL(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Yn.workingColorSpace}const _0={clone:bf,merge:Kr};var coe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hoe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class os extends Br{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=coe,this.fragmentShader=hoe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bf(e.uniforms),this.uniformsGroups=loe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?n.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[r]={type:"m4",value:a.toArray()}:n.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const t={};for(const r in this.extensions)this.extensions[r]===!0&&(t[r]=!0);return Object.keys(t).length>0&&(n.extensions=t),n}}class S0 extends An{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt,this.coordinateSystem=ba}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const sc=new ne,z4=new Qe,F4=new Qe;class qn extends S0{constructor(e=50,n=1,t=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=t,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=yf*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(iu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return yf*2*Math.atan(Math.tan(iu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,t){sc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(sc.x,sc.y).multiplyScalar(-e/sc.z),sc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(sc.x,sc.y).multiplyScalar(-e/sc.z)}getViewSize(e,n){return this.getViewBounds(e,z4,F4),n.subVectors(F4,z4)}setViewOffset(e,n,t,r,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=t,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(iu*.5*this.fov)/this.zoom,t=2*n,r=this.aspect*t,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const h=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/h,n-=a.offsetY*t/u,r*=a.width/h,t*=a.height/u}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-t,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const dd=-90,fd=1;class oL extends An{constructor(e,n,t){super(),this.type="CubeCamera",this.renderTarget=t,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new qn(dd,fd,e,n);r.layers=this.layers,this.add(r);const s=new qn(dd,fd,e,n);s.layers=this.layers,this.add(s);const a=new qn(dd,fd,e,n);a.layers=this.layers,this.add(a);const l=new qn(dd,fd,e,n);l.layers=this.layers,this.add(l);const h=new qn(dd,fd,e,n);h.layers=this.layers,this.add(h);const u=new qn(dd,fd,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[t,r,s,a,l,h]=n;for(const u of n)this.remove(u);if(e===ba)t.up.set(0,1,0),t.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===Lg)t.up.set(0,-1,0),t.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:t,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,h,u,f]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const w=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,e.setRenderTarget(t,0,r),e.render(n,s),e.setRenderTarget(t,1,r),e.render(n,a),e.setRenderTarget(t,2,r),e.render(n,l),e.setRenderTarget(t,3,r),e.render(n,h),e.setRenderTarget(t,4,r),e.render(n,u),t.texture.generateMipmaps=w,e.setRenderTarget(t,5,r),e.render(n,f),e.setRenderTarget(p,g,v),e.xr.enabled=y,t.texture.needsPMREMUpdate=!0}}class C0 extends hi{constructor(e,n,t,r,s,a,l,h,u,f){e=e!==void 0?e:[],n=n!==void 0?n:Ol,super(e,n,t,r,s,a,l,h,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class aL extends Co{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const t={width:e,height:e,depth:1},r=[t,t,t,t,t,t];this.texture=new C0(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Vi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zc(5,5,5),s=new os({name:"CubemapFromEquirect",uniforms:bf(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:Vr,blending:fl});s.uniforms.tEquirect.value=n;const a=new Jn(r,s),l=n.minFilter;return n.minFilter===Ho&&(n.minFilter=Vi),new oL(1,10,this).update(e,a),n.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,t,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,t,r);e.setRenderTarget(s)}}const d_=new ne,uoe=new ne,doe=new cn;class ma{constructor(e=new ne(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,t,r){return this.normal.set(e,n,t),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,t){const r=d_.subVectors(t,n).cross(uoe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const t=e.delta(d_),r=this.normal.dot(t);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(t,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),t=this.distanceToPoint(e.end);return n<0&&t>0||t<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const t=n||doe.getNormalMatrix(e),r=this.coplanarPoint(d_).applyMatrix4(e),s=this.normal.applyMatrix3(t).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _h=new Cr,by=new ne;class k0{constructor(e=new ma,n=new ma,t=new ma,r=new ma,s=new ma,a=new ma){this.planes=[e,n,t,r,s,a]}set(e,n,t,r,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(n),l[2].copy(t),l[3].copy(r),l[4].copy(s),l[5].copy(a),this}copy(e){const n=this.planes;for(let t=0;t<6;t++)n[t].copy(e.planes[t]);return this}setFromProjectionMatrix(e,n=ba){const t=this.planes,r=e.elements,s=r[0],a=r[1],l=r[2],h=r[3],u=r[4],f=r[5],p=r[6],g=r[7],v=r[8],y=r[9],w=r[10],x=r[11],S=r[12],_=r[13],O=r[14],k=r[15];if(t[0].setComponents(h-s,g-u,x-v,k-S).normalize(),t[1].setComponents(h+s,g+u,x+v,k+S).normalize(),t[2].setComponents(h+a,g+f,x+y,k+_).normalize(),t[3].setComponents(h-a,g-f,x-y,k-_).normalize(),t[4].setComponents(h-l,g-p,x-w,k-O).normalize(),n===ba)t[5].setComponents(h+l,g+p,x+w,k+O).normalize();else if(n===Lg)t[5].setComponents(l,p,w,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),_h.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_h)}intersectsSprite(e){return _h.center.set(0,0,0),_h.radius=.7071067811865476,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const n=this.planes,t=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(t)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let t=0;t<6;t++){const r=n[t];if(by.x=r.normal.x>0?e.max.x:e.min.x,by.y=r.normal.y>0?e.max.y:e.min.y,by.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(by)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let t=0;t<6;t++)if(n[t].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function lL(){let i=null,e=!1,n=null,t=null;function r(s,a){n(s,a),t=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(t=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(t),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){i=s}}}function foe(i){const e=new WeakMap;function n(l,h){const u=l.array,f=l.usage,p=u.byteLength,g=i.createBuffer();i.bindBuffer(h,g),i.bufferData(h,u,f),l.onUploadCallback();let v;if(u instanceof Float32Array)v=i.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?v=i.HALF_FLOAT:v=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)v=i.SHORT;else if(u instanceof Uint32Array)v=i.UNSIGNED_INT;else if(u instanceof Int32Array)v=i.INT;else if(u instanceof Int8Array)v=i.BYTE;else if(u instanceof Uint8Array)v=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)v=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:g,type:v,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:p}}function t(l,h,u){const f=h.array,p=h._updateRange,g=h.updateRanges;if(i.bindBuffer(u,l),p.count===-1&&g.length===0&&i.bufferSubData(u,0,f),g.length!==0){for(let v=0,y=g.length;v<y;v++){const w=g[v];i.bufferSubData(u,w.start*f.BYTES_PER_ELEMENT,f,w.start,w.count)}h.clearUpdateRanges()}p.count!==-1&&(i.bufferSubData(u,p.offset*f.BYTES_PER_ELEMENT,f,p.offset,p.count),p.count=-1),h.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const h=e.get(l);h&&(i.deleteBuffer(h.buffer),e.delete(l))}function a(l,h){if(l.isGLBufferAttribute){const f=e.get(l);(!f||f.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);if(u===void 0)e.set(l,n(l,h));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");t(u.buffer,l,h),u.version=l.version}}return{get:r,remove:s,update:a}}class Kc extends rn{constructor(e=1,n=1,t=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:t,heightSegments:r};const s=e/2,a=n/2,l=Math.floor(t),h=Math.floor(r),u=l+1,f=h+1,p=e/l,g=n/h,v=[],y=[],w=[],x=[];for(let S=0;S<f;S++){const _=S*g-a;for(let O=0;O<u;O++){const k=O*p-s;y.push(k,-_,0),w.push(0,0,1),x.push(O/l),x.push(1-S/h)}}for(let S=0;S<h;S++)for(let _=0;_<l;_++){const O=_+u*S,k=_+u*(S+1),M=_+1+u*(S+1),P=_+1+u*S;v.push(O,k,P),v.push(k,M,P)}this.setIndex(v),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(w,3)),this.setAttribute("uv",new Ct(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kc(e.width,e.height,e.widthSegments,e.heightSegments)}}var poe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,moe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,goe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,voe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yoe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,boe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ooe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xoe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,woe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,_oe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Soe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Coe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,koe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Toe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Moe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Eoe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Poe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Aoe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Roe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ioe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Doe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Noe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,$oe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Voe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Loe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Boe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Uoe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zoe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Foe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Xoe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Woe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Qoe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Hoe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Goe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Yoe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,joe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qoe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Zoe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Koe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Joe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eae=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tae=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nae=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,iae=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rae=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,sae=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,oae=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,aae=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lae=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,cae=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hae=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uae=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,dae=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fae=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pae=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mae=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,gae=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,vae=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yae=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bae=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Oae=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,xae=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,wae=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_ae=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Sae=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Cae=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kae=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Tae=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Mae=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Eae=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Pae=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Aae=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Rae=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Iae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Dae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nae=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,$ae=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Vae=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Lae=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Bae=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Uae=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,zae=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Fae=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Xae=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Wae=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Qae=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Hae=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Gae=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yae=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jae=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,qae=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Zae=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Kae=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Jae=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ele=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,tle=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nle=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ile=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rle=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sle=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ole=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ale=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,lle=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,cle=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hle=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ule=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,dle=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const fle=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ple=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gle=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yle=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ble=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ole=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,xle=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wle=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,_le=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Sle=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Cle=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kle=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tle=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Mle=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ele=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ple=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ale=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Rle=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ile=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Dle=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Nle=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$le=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vle=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Lle=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ble=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ule=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zle=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Fle=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xle=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wle=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qle=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Hle=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:poe,alphahash_pars_fragment:moe,alphamap_fragment:goe,alphamap_pars_fragment:voe,alphatest_fragment:yoe,alphatest_pars_fragment:boe,aomap_fragment:Ooe,aomap_pars_fragment:xoe,batching_pars_vertex:woe,batching_vertex:_oe,begin_vertex:Soe,beginnormal_vertex:Coe,bsdfs:koe,iridescence_fragment:Toe,bumpmap_pars_fragment:Moe,clipping_planes_fragment:Eoe,clipping_planes_pars_fragment:Poe,clipping_planes_pars_vertex:Aoe,clipping_planes_vertex:Roe,color_fragment:Ioe,color_pars_fragment:Doe,color_pars_vertex:Noe,color_vertex:$oe,common:Voe,cube_uv_reflection_fragment:Loe,defaultnormal_vertex:Boe,displacementmap_pars_vertex:Uoe,displacementmap_vertex:zoe,emissivemap_fragment:Foe,emissivemap_pars_fragment:Xoe,colorspace_fragment:Woe,colorspace_pars_fragment:Qoe,envmap_fragment:Hoe,envmap_common_pars_fragment:Goe,envmap_pars_fragment:Yoe,envmap_pars_vertex:joe,envmap_physical_pars_fragment:oae,envmap_vertex:qoe,fog_vertex:Zoe,fog_pars_vertex:Koe,fog_fragment:Joe,fog_pars_fragment:eae,gradientmap_pars_fragment:tae,lightmap_pars_fragment:nae,lights_lambert_fragment:iae,lights_lambert_pars_fragment:rae,lights_pars_begin:sae,lights_toon_fragment:aae,lights_toon_pars_fragment:lae,lights_phong_fragment:cae,lights_phong_pars_fragment:hae,lights_physical_fragment:uae,lights_physical_pars_fragment:dae,lights_fragment_begin:fae,lights_fragment_maps:pae,lights_fragment_end:mae,logdepthbuf_fragment:gae,logdepthbuf_pars_fragment:vae,logdepthbuf_pars_vertex:yae,logdepthbuf_vertex:bae,map_fragment:Oae,map_pars_fragment:xae,map_particle_fragment:wae,map_particle_pars_fragment:_ae,metalnessmap_fragment:Sae,metalnessmap_pars_fragment:Cae,morphinstance_vertex:kae,morphcolor_vertex:Tae,morphnormal_vertex:Mae,morphtarget_pars_vertex:Eae,morphtarget_vertex:Pae,normal_fragment_begin:Aae,normal_fragment_maps:Rae,normal_pars_fragment:Iae,normal_pars_vertex:Dae,normal_vertex:Nae,normalmap_pars_fragment:$ae,clearcoat_normal_fragment_begin:Vae,clearcoat_normal_fragment_maps:Lae,clearcoat_pars_fragment:Bae,iridescence_pars_fragment:Uae,opaque_fragment:zae,packing:Fae,premultiplied_alpha_fragment:Xae,project_vertex:Wae,dithering_fragment:Qae,dithering_pars_fragment:Hae,roughnessmap_fragment:Gae,roughnessmap_pars_fragment:Yae,shadowmap_pars_fragment:jae,shadowmap_pars_vertex:qae,shadowmap_vertex:Zae,shadowmask_pars_fragment:Kae,skinbase_vertex:Jae,skinning_pars_vertex:ele,skinning_vertex:tle,skinnormal_vertex:nle,specularmap_fragment:ile,specularmap_pars_fragment:rle,tonemapping_fragment:sle,tonemapping_pars_fragment:ole,transmission_fragment:ale,transmission_pars_fragment:lle,uv_pars_fragment:cle,uv_pars_vertex:hle,uv_vertex:ule,worldpos_vertex:dle,background_vert:fle,background_frag:ple,backgroundCube_vert:mle,backgroundCube_frag:gle,cube_vert:vle,cube_frag:yle,depth_vert:ble,depth_frag:Ole,distanceRGBA_vert:xle,distanceRGBA_frag:wle,equirect_vert:_le,equirect_frag:Sle,linedashed_vert:Cle,linedashed_frag:kle,meshbasic_vert:Tle,meshbasic_frag:Mle,meshlambert_vert:Ele,meshlambert_frag:Ple,meshmatcap_vert:Ale,meshmatcap_frag:Rle,meshnormal_vert:Ile,meshnormal_frag:Dle,meshphong_vert:Nle,meshphong_frag:$le,meshphysical_vert:Vle,meshphysical_frag:Lle,meshtoon_vert:Ble,meshtoon_frag:Ule,points_vert:zle,points_frag:Fle,shadow_vert:Xle,shadow_frag:Wle,sprite_vert:Qle,sprite_frag:Hle},ot={common:{diffuse:{value:new nt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cn},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cn}},envmap:{envMap:{value:null},envMapRotation:{value:new cn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cn},normalScale:{value:new Qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0},uvTransform:{value:new cn}},sprite:{diffuse:{value:new nt(16777215)},opacity:{value:1},center:{value:new Qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cn},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0}}},po={basic:{uniforms:Kr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:Kr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new nt(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:Kr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new nt(0)},specular:{value:new nt(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:Kr([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:Kr([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new nt(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:Kr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:Kr([ot.points,ot.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:Kr([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:Kr([ot.common,ot.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:Kr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:Kr([ot.sprite,ot.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new cn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new cn}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:Kr([ot.common,ot.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:Kr([ot.lights,ot.fog,{color:{value:new nt(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};po.physical={uniforms:Kr([po.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cn},clearcoatNormalScale:{value:new Qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cn},sheen:{value:0},sheenColor:{value:new nt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cn},transmissionSamplerSize:{value:new Qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cn},attenuationDistance:{value:0},attenuationColor:{value:new nt(0)},specularColor:{value:new nt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cn},anisotropyVector:{value:new Qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cn}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const Oy={r:0,b:0,g:0},Sh=new tr,Gle=new pt;function Yle(i,e,n,t,r,s,a){const l=new nt(0);let h=s===!0?0:1,u,f,p=null,g=0,v=null;function y(_){let O=_.isScene===!0?_.background:null;return O&&O.isTexture&&(O=(_.backgroundBlurriness>0?n:e).get(O)),O}function w(_){let O=!1;const k=y(_);k===null?S(l,h):k&&k.isColor&&(S(k,1),O=!0);const M=i.xr.getEnvironmentBlendMode();M==="additive"?t.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&t.buffers.color.setClear(0,0,0,0,a),(i.autoClear||O)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil)}function x(_,O){const k=y(O);k&&(k.isCubeTexture||k.mapping===Uf)?(f===void 0&&(f=new Jn(new Zc(1,1,1),new os({name:"BackgroundCubeMaterial",uniforms:bf(po.backgroundCube.uniforms),vertexShader:po.backgroundCube.vertexShader,fragmentShader:po.backgroundCube.fragmentShader,side:Vr,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(M,P,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Sh.copy(O.backgroundRotation),Sh.x*=-1,Sh.y*=-1,Sh.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(Sh.y*=-1,Sh.z*=-1),f.material.uniforms.envMap.value=k,f.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(Gle.makeRotationFromEuler(Sh)),f.material.toneMapped=Yn.getTransfer(k.colorSpace)!==si,(p!==k||g!==k.version||v!==i.toneMapping)&&(f.material.needsUpdate=!0,p=k,g=k.version,v=i.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null)):k&&k.isTexture&&(u===void 0&&(u=new Jn(new Kc(2,2),new os({name:"BackgroundMaterial",uniforms:bf(po.background.uniforms),vertexShader:po.background.vertexShader,fragmentShader:po.background.fragmentShader,side:bl,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=k,u.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,u.material.toneMapped=Yn.getTransfer(k.colorSpace)!==si,k.matrixAutoUpdate===!0&&k.updateMatrix(),u.material.uniforms.uvTransform.value.copy(k.matrix),(p!==k||g!==k.version||v!==i.toneMapping)&&(u.material.needsUpdate=!0,p=k,g=k.version,v=i.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function S(_,O){_.getRGB(Oy,sL(i)),t.buffers.color.setClear(Oy.r,Oy.g,Oy.b,O,a)}return{getClearColor:function(){return l},setClearColor:function(_,O=1){l.set(_),h=O,S(l,h)},getClearAlpha:function(){return h},setClearAlpha:function(_){h=_,S(l,h)},render:w,addToRenderList:x}}function jle(i,e){const n=i.getParameter(i.MAX_VERTEX_ATTRIBS),t={},r=g(null);let s=r,a=!1;function l(T,N,L,I,$){let B=!1;const U=p(I,L,N);s!==U&&(s=U,u(s.object)),B=v(T,I,L,$),B&&y(T,I,L,$),$!==null&&e.update($,i.ELEMENT_ARRAY_BUFFER),(B||a)&&(a=!1,k(T,N,L,I),$!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function h(){return i.createVertexArray()}function u(T){return i.bindVertexArray(T)}function f(T){return i.deleteVertexArray(T)}function p(T,N,L){const I=L.wireframe===!0;let $=t[T.id];$===void 0&&($={},t[T.id]=$);let B=$[N.id];B===void 0&&(B={},$[N.id]=B);let U=B[I];return U===void 0&&(U=g(h()),B[I]=U),U}function g(T){const N=[],L=[],I=[];for(let $=0;$<n;$++)N[$]=0,L[$]=0,I[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:L,attributeDivisors:I,object:T,attributes:{},index:null}}function v(T,N,L,I){const $=s.attributes,B=N.attributes;let U=0;const Y=L.getAttributes();for(const Z in Y)if(Y[Z].location>=0){const ce=$[Z];let ge=B[Z];if(ge===void 0&&(Z==="instanceMatrix"&&T.instanceMatrix&&(ge=T.instanceMatrix),Z==="instanceColor"&&T.instanceColor&&(ge=T.instanceColor)),ce===void 0||ce.attribute!==ge||ge&&ce.data!==ge.data)return!0;U++}return s.attributesNum!==U||s.index!==I}function y(T,N,L,I){const $={},B=N.attributes;let U=0;const Y=L.getAttributes();for(const Z in Y)if(Y[Z].location>=0){let ce=B[Z];ce===void 0&&(Z==="instanceMatrix"&&T.instanceMatrix&&(ce=T.instanceMatrix),Z==="instanceColor"&&T.instanceColor&&(ce=T.instanceColor));const ge={};ge.attribute=ce,ce&&ce.data&&(ge.data=ce.data),$[Z]=ge,U++}s.attributes=$,s.attributesNum=U,s.index=I}function w(){const T=s.newAttributes;for(let N=0,L=T.length;N<L;N++)T[N]=0}function x(T){S(T,0)}function S(T,N){const L=s.newAttributes,I=s.enabledAttributes,$=s.attributeDivisors;L[T]=1,I[T]===0&&(i.enableVertexAttribArray(T),I[T]=1),$[T]!==N&&(i.vertexAttribDivisor(T,N),$[T]=N)}function _(){const T=s.newAttributes,N=s.enabledAttributes;for(let L=0,I=N.length;L<I;L++)N[L]!==T[L]&&(i.disableVertexAttribArray(L),N[L]=0)}function O(T,N,L,I,$,B,U){U===!0?i.vertexAttribIPointer(T,N,L,$,B):i.vertexAttribPointer(T,N,L,I,$,B)}function k(T,N,L,I){w();const $=I.attributes,B=L.getAttributes(),U=N.defaultAttributeValues;for(const Y in B){const Z=B[Y];if(Z.location>=0){let ie=$[Y];if(ie===void 0&&(Y==="instanceMatrix"&&T.instanceMatrix&&(ie=T.instanceMatrix),Y==="instanceColor"&&T.instanceColor&&(ie=T.instanceColor)),ie!==void 0){const ce=ie.normalized,ge=ie.itemSize,Ae=e.get(ie);if(Ae===void 0)continue;const Se=Ae.buffer,he=Ae.type,Ce=Ae.bytesPerElement,pe=he===i.INT||he===i.UNSIGNED_INT||ie.gpuType===Lk;if(ie.isInterleavedBufferAttribute){const j=ie.data,K=j.stride,X=ie.offset;if(j.isInstancedInterleavedBuffer){for(let F=0;F<Z.locationSize;F++)S(Z.location+F,j.meshPerAttribute);T.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let F=0;F<Z.locationSize;F++)x(Z.location+F);i.bindBuffer(i.ARRAY_BUFFER,Se);for(let F=0;F<Z.locationSize;F++)O(Z.location+F,ge/Z.locationSize,he,ce,K*Ce,(X+ge/Z.locationSize*F)*Ce,pe)}else{if(ie.isInstancedBufferAttribute){for(let j=0;j<Z.locationSize;j++)S(Z.location+j,ie.meshPerAttribute);T.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let j=0;j<Z.locationSize;j++)x(Z.location+j);i.bindBuffer(i.ARRAY_BUFFER,Se);for(let j=0;j<Z.locationSize;j++)O(Z.location+j,ge/Z.locationSize,he,ce,ge*Ce,ge/Z.locationSize*j*Ce,pe)}}else if(U!==void 0){const ce=U[Y];if(ce!==void 0)switch(ce.length){case 2:i.vertexAttrib2fv(Z.location,ce);break;case 3:i.vertexAttrib3fv(Z.location,ce);break;case 4:i.vertexAttrib4fv(Z.location,ce);break;default:i.vertexAttrib1fv(Z.location,ce)}}}}_()}function M(){A();for(const T in t){const N=t[T];for(const L in N){const I=N[L];for(const $ in I)f(I[$].object),delete I[$];delete N[L]}delete t[T]}}function P(T){if(t[T.id]===void 0)return;const N=t[T.id];for(const L in N){const I=N[L];for(const $ in I)f(I[$].object),delete I[$];delete N[L]}delete t[T.id]}function D(T){for(const N in t){const L=t[N];if(L[T.id]===void 0)continue;const I=L[T.id];for(const $ in I)f(I[$].object),delete I[$];delete L[T.id]}}function A(){R(),a=!0,s!==r&&(s=r,u(s.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:A,resetDefaultState:R,dispose:M,releaseStatesOfGeometry:P,releaseStatesOfProgram:D,initAttributes:w,enableAttribute:x,disableUnusedAttributes:_}}function qle(i,e,n){let t;function r(u){t=u}function s(u,f){i.drawArrays(t,u,f),n.update(f,t,1)}function a(u,f,p){p!==0&&(i.drawArraysInstanced(t,u,f,p),n.update(f,t,p))}function l(u,f,p){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<p;v++)this.render(u[v],f[v]);else{g.multiDrawArraysWEBGL(t,u,0,f,0,p);let v=0;for(let y=0;y<p;y++)v+=f[y];n.update(v,t,1)}}function h(u,f,p,g){if(p===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let y=0;y<u.length;y++)a(u[y],f[y],g[y]);else{v.multiDrawArraysInstancedWEBGL(t,u,0,f,0,g,0,p);let y=0;for(let w=0;w<p;w++)y+=f[w];for(let w=0;w<g.length;w++)n.update(y,t,g[w])}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=h}function Zle(i,e,n,t){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(P){return!(P!==ks&&t.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(P){const D=P===zf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==qo&&t.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==yo&&!D)}function h(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const f=h(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);const p=n.logarithmicDepthBuffer===!0,g=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),v=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=i.getParameter(i.MAX_TEXTURE_SIZE),w=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),x=i.getParameter(i.MAX_VERTEX_ATTRIBS),S=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),_=i.getParameter(i.MAX_VARYING_VECTORS),O=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),k=v>0,M=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:h,textureFormatReadable:a,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:w,maxAttributes:x,maxVertexUniforms:S,maxVaryings:_,maxFragmentUniforms:O,vertexTextures:k,maxSamples:M}}function Kle(i){const e=this;let n=null,t=0,r=!1,s=!1;const a=new ma,l=new cn,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const v=p.length!==0||g||t!==0||r;return r=g,t=p.length,v},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,g){n=f(p,g,0)},this.setState=function(p,g,v){const y=p.clippingPlanes,w=p.clipIntersection,x=p.clipShadows,S=i.get(p);if(!r||y===null||y.length===0||s&&!x)s?f(null):u();else{const _=s?0:t,O=_*4;let k=S.clippingState||null;h.value=k,k=f(y,g,O,v);for(let M=0;M!==O;++M)k[M]=n[M];S.clippingState=k,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=_}};function u(){h.value!==n&&(h.value=n,h.needsUpdate=t>0),e.numPlanes=t,e.numIntersection=0}function f(p,g,v,y){const w=p!==null?p.length:0;let x=null;if(w!==0){if(x=h.value,y!==!0||x===null){const S=v+w*4,_=g.matrixWorldInverse;l.getNormalMatrix(_),(x===null||x.length<S)&&(x=new Float32Array(S));for(let O=0,k=v;O!==w;++O,k+=4)a.copy(p[O]).applyMatrix4(_,l),a.normal.toArray(x,k),x[k+3]=a.constant}h.value=x,h.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,x}}function Jle(i){let e=new WeakMap;function n(a,l){return l===ff?a.mapping=Ol:l===Rg&&(a.mapping=Vc),a}function t(a){if(a&&a.isTexture){const l=a.mapping;if(l===ff||l===Rg)if(e.has(a)){const h=e.get(a).texture;return n(h,a.mapping)}else{const h=a.image;if(h&&h.height>0){const u=new aL(h.height);return u.fromEquirectangularTexture(i,a),e.set(a,u),a.addEventListener("dispose",r),n(u.texture,a.mapping)}else return null}}return a}function r(a){const l=a.target;l.removeEventListener("dispose",r);const h=e.get(l);h!==void 0&&(e.delete(l),h.dispose())}function s(){e=new WeakMap}return{get:t,dispose:s}}class bo extends S0{constructor(e=-1,n=1,t=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=t,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,t,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=t,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=t-e,a=t+e,l=r+n,h=r-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,l-=f*this.view.offsetY,h=l-f*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Rd=4,X4=[.125,.215,.35,.446,.526,.582],Uh=20,f_=new bo,W4=new nt;let p_=null,m_=0,g_=0,v_=!1;const Lh=(1+Math.sqrt(5))/2,pd=1/Lh,Q4=[new ne(-Lh,pd,0),new ne(Lh,pd,0),new ne(-pd,0,Lh),new ne(pd,0,Lh),new ne(0,Lh,-pd),new ne(0,Lh,pd),new ne(-1,1,-1),new ne(1,1,-1),new ne(-1,1,1),new ne(1,1,1)];class VC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,t=.1,r=100){p_=this._renderer.getRenderTarget(),m_=this._renderer.getActiveCubeFace(),g_=this._renderer.getActiveMipmapLevel(),v_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,t,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Y4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=G4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(p_,m_,g_),this._renderer.xr.enabled=v_,e.scissorTest=!1,xy(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ol||e.mapping===Vc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),p_=this._renderer.getRenderTarget(),m_=this._renderer.getActiveCubeFace(),g_=this._renderer.getActiveMipmapLevel(),v_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const t=n||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,t={magFilter:Vi,minFilter:Vi,generateMipmaps:!1,type:zf,format:ks,colorSpace:El,depthBuffer:!1},r=H4(e,n,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=H4(e,n,t);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ece(s)),this._blurMaterial=tce(s,e,n)}return r}_compileMaterial(e){const n=new Jn(this._lodPlanes[0],e);this._renderer.compile(n,f_)}_sceneToCubeUV(e,n,t,r){const l=new qn(90,1,n,t),h=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,g=f.toneMapping;f.getClearColor(W4),f.toneMapping=pl,f.autoClear=!1;const v=new Aa({name:"PMREM.Background",side:Vr,depthWrite:!1,depthTest:!1}),y=new Jn(new Zc,v);let w=!1;const x=e.background;x?x.isColor&&(v.color.copy(x),e.background=null,w=!0):(v.color.copy(W4),w=!0);for(let S=0;S<6;S++){const _=S%3;_===0?(l.up.set(0,h[S],0),l.lookAt(u[S],0,0)):_===1?(l.up.set(0,0,h[S]),l.lookAt(0,u[S],0)):(l.up.set(0,h[S],0),l.lookAt(0,0,u[S]));const O=this._cubeSize;xy(r,_*O,S>2?O:0,O,O),f.setRenderTarget(r),w&&f.render(y,l),f.render(e,l)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=g,f.autoClear=p,e.background=x}_textureToCubeUV(e,n){const t=this._renderer,r=e.mapping===Ol||e.mapping===Vc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Y4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=G4());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Jn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const h=this._cubeSize;xy(n,0,0,3*h,2*h),t.setRenderTarget(n),t.render(a,f_)}_applyPMREM(e){const n=this._renderer,t=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=Q4[(r-s-1)%Q4.length];this._blur(e,s-1,s,a,l)}n.autoClear=t}_blur(e,n,t,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,t,r,"latitudinal",s),this._halfBlur(a,e,t,t,r,"longitudinal",s)}_halfBlur(e,n,t,r,s,a,l){const h=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new Jn(this._lodPlanes[r],u),g=u.uniforms,v=this._sizeLods[t]-1,y=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Uh-1),w=s/y,x=isFinite(s)?1+Math.floor(f*w):Uh;x>Uh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Uh}`);const S=[];let _=0;for(let D=0;D<Uh;++D){const A=D/w,R=Math.exp(-A*A/2);S.push(R),D===0?_+=R:D<x&&(_+=2*R)}for(let D=0;D<S.length;D++)S[D]=S[D]/_;g.envMap.value=e.texture,g.samples.value=x,g.weights.value=S,g.latitudinal.value=a==="latitudinal",l&&(g.poleAxis.value=l);const{_lodMax:O}=this;g.dTheta.value=y,g.mipInt.value=O-t;const k=this._sizeLods[r],M=3*k*(r>O-Rd?r-O+Rd:0),P=4*(this._cubeSize-k);xy(n,M,P,3*k,2*k),h.setRenderTarget(n),h.render(p,f_)}}function ece(i){const e=[],n=[],t=[];let r=i;const s=i-Rd+1+X4.length;for(let a=0;a<s;a++){const l=Math.pow(2,r);n.push(l);let h=1/l;a>i-Rd?h=X4[a-i+Rd-1]:a===0&&(h=0),t.push(h);const u=1/(l-2),f=-u,p=1+u,g=[f,f,p,f,p,p,f,f,p,p,f,p],v=6,y=6,w=3,x=2,S=1,_=new Float32Array(w*y*v),O=new Float32Array(x*y*v),k=new Float32Array(S*y*v);for(let P=0;P<v;P++){const D=P%3*2/3-1,A=P>2?0:-1,R=[D,A,0,D+2/3,A,0,D+2/3,A+1,0,D,A,0,D+2/3,A+1,0,D,A+1,0];_.set(R,w*y*P),O.set(g,x*y*P);const T=[P,P,P,P,P,P];k.set(T,S*y*P)}const M=new rn;M.setAttribute("position",new In(_,w)),M.setAttribute("uv",new In(O,x)),M.setAttribute("faceIndex",new In(k,S)),e.push(M),r>Rd&&r--}return{lodPlanes:e,sizeLods:n,sigmas:t}}function H4(i,e,n){const t=new Co(i,e,n);return t.texture.mapping=Uf,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function xy(i,e,n,t,r){i.viewport.set(e,n,t,r),i.scissor.set(e,n,t,r)}function tce(i,e,n){const t=new Float32Array(Uh),r=new ne(0,1,0);return new os({name:"SphericalGaussianBlur",defines:{n:Uh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:qk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fl,depthTest:!1,depthWrite:!1})}function G4(){return new os({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fl,depthTest:!1,depthWrite:!1})}function Y4(){return new os({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fl,depthTest:!1,depthWrite:!1})}function qk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function nce(i){let e=new WeakMap,n=null;function t(l){if(l&&l.isTexture){const h=l.mapping,u=h===ff||h===Rg,f=h===Ol||h===Vc;if(u||f){let p=e.get(l);const g=p!==void 0?p.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==g)return n===null&&(n=new VC(i)),p=u?n.fromEquirectangular(l,p):n.fromCubemap(l,p),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),p.texture;if(p!==void 0)return p.texture;{const v=l.image;return u&&v&&v.height>0||f&&v&&r(v)?(n===null&&(n=new VC(i)),p=u?n.fromEquirectangular(l):n.fromCubemap(l),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),l.addEventListener("dispose",s),p.texture):null}}}return l}function r(l){let h=0;const u=6;for(let f=0;f<u;f++)l[f]!==void 0&&h++;return h===u}function s(l){const h=l.target;h.removeEventListener("dispose",s);const u=e.get(h);u!==void 0&&(e.delete(h),u.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:t,dispose:a}}function ice(i){const e={};function n(t){if(e[t]!==void 0)return e[t];let r;switch(t){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(t)}return e[t]=r,r}return{has:function(t){return n(t)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const r=n(t);return r===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),r}}}function rce(i,e,n,t){const r={},s=new WeakMap;function a(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const y in g.attributes)e.remove(g.attributes[y]);for(const y in g.morphAttributes){const w=g.morphAttributes[y];for(let x=0,S=w.length;x<S;x++)e.remove(w[x])}g.removeEventListener("dispose",a),delete r[g.id];const v=s.get(g);v&&(e.remove(v),s.delete(g)),t.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function l(p,g){return r[g.id]===!0||(g.addEventListener("dispose",a),r[g.id]=!0,n.memory.geometries++),g}function h(p){const g=p.attributes;for(const y in g)e.update(g[y],i.ARRAY_BUFFER);const v=p.morphAttributes;for(const y in v){const w=v[y];for(let x=0,S=w.length;x<S;x++)e.update(w[x],i.ARRAY_BUFFER)}}function u(p){const g=[],v=p.index,y=p.attributes.position;let w=0;if(v!==null){const _=v.array;w=v.version;for(let O=0,k=_.length;O<k;O+=3){const M=_[O+0],P=_[O+1],D=_[O+2];g.push(M,P,P,D,D,M)}}else if(y!==void 0){const _=y.array;w=y.version;for(let O=0,k=_.length/3-1;O<k;O+=3){const M=O+0,P=O+1,D=O+2;g.push(M,P,P,D,D,M)}}else return;const x=new(JV(g)?jk:TO)(g,1);x.version=w;const S=s.get(p);S&&e.remove(S),s.set(p,x)}function f(p){const g=s.get(p);if(g){const v=p.index;v!==null&&g.version<v.version&&u(p)}else u(p);return s.get(p)}return{get:l,update:h,getWireframeAttribute:f}}function sce(i,e,n){let t;function r(g){t=g}let s,a;function l(g){s=g.type,a=g.bytesPerElement}function h(g,v){i.drawElements(t,v,s,g*a),n.update(v,t,1)}function u(g,v,y){y!==0&&(i.drawElementsInstanced(t,v,s,g*a,y),n.update(v,t,y))}function f(g,v,y){if(y===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let x=0;x<y;x++)this.render(g[x]/a,v[x]);else{w.multiDrawElementsWEBGL(t,v,0,s,g,0,y);let x=0;for(let S=0;S<y;S++)x+=v[S];n.update(x,t,1)}}function p(g,v,y,w){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let S=0;S<g.length;S++)u(g[S]/a,v[S],w[S]);else{x.multiDrawElementsInstancedWEBGL(t,v,0,s,g,0,w,0,y);let S=0;for(let _=0;_<y;_++)S+=v[_];for(let _=0;_<w.length;_++)n.update(S,t,w[_])}}this.setMode=r,this.setIndex=l,this.render=h,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=p}function oce(i){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function t(s,a,l){switch(n.calls++,a){case i.TRIANGLES:n.triangles+=l*(s/3);break;case i.LINES:n.lines+=l*(s/2);break;case i.LINE_STRIP:n.lines+=l*(s-1);break;case i.LINE_LOOP:n.lines+=l*s;break;case i.POINTS:n.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:t}}function ace(i,e,n){const t=new WeakMap,r=new yn;function s(a,l,h){const u=a.morphTargetInfluences,f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=f!==void 0?f.length:0;let g=t.get(l);if(g===void 0||g.count!==p){let T=function(){A.dispose(),t.delete(l),l.removeEventListener("dispose",T)};var v=T;g!==void 0&&g.texture.dispose();const y=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,x=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],_=l.morphAttributes.normal||[],O=l.morphAttributes.color||[];let k=0;y===!0&&(k=1),w===!0&&(k=2),x===!0&&(k=3);let M=l.attributes.position.count*k,P=1;M>e.maxTextureSize&&(P=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const D=new Float32Array(M*P*4*p),A=new CO(D,M,P,p);A.type=yo,A.needsUpdate=!0;const R=k*4;for(let N=0;N<p;N++){const L=S[N],I=_[N],$=O[N],B=M*P*4*N;for(let U=0;U<L.count;U++){const Y=U*R;y===!0&&(r.fromBufferAttribute(L,U),D[B+Y+0]=r.x,D[B+Y+1]=r.y,D[B+Y+2]=r.z,D[B+Y+3]=0),w===!0&&(r.fromBufferAttribute(I,U),D[B+Y+4]=r.x,D[B+Y+5]=r.y,D[B+Y+6]=r.z,D[B+Y+7]=0),x===!0&&(r.fromBufferAttribute($,U),D[B+Y+8]=r.x,D[B+Y+9]=r.y,D[B+Y+10]=r.z,D[B+Y+11]=$.itemSize===4?r.w:1)}}g={count:p,texture:A,size:new Qe(M,P)},t.set(l,g),l.addEventListener("dispose",T)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)h.getUniforms().setValue(i,"morphTexture",a.morphTexture,n);else{let y=0;for(let x=0;x<u.length;x++)y+=u[x];const w=l.morphTargetsRelative?1:1-y;h.getUniforms().setValue(i,"morphTargetBaseInfluence",w),h.getUniforms().setValue(i,"morphTargetInfluences",u)}h.getUniforms().setValue(i,"morphTargetsTexture",g.texture,n),h.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}return{update:s}}function lce(i,e,n,t){let r=new WeakMap;function s(h){const u=t.render.frame,f=h.geometry,p=e.get(h,f);if(r.get(p)!==u&&(e.update(p),r.set(p,u)),h.isInstancedMesh&&(h.hasEventListener("dispose",l)===!1&&h.addEventListener("dispose",l),r.get(h)!==u&&(n.update(h.instanceMatrix,i.ARRAY_BUFFER),h.instanceColor!==null&&n.update(h.instanceColor,i.ARRAY_BUFFER),r.set(h,u))),h.isSkinnedMesh){const g=h.skeleton;r.get(g)!==u&&(g.update(),r.set(g,u))}return p}function a(){r=new WeakMap}function l(h){const u=h.target;u.removeEventListener("dispose",l),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:a}}class Zk extends hi{constructor(e,n,t,r,s,a,l,h,u,f){if(f=f!==void 0?f:nu,f!==nu&&f!==mf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&f===nu&&(t=mu),t===void 0&&f===mf&&(t=Ff),super(null,r,s,a,l,h,f,t,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=l!==void 0?l:er,this.minFilter=h!==void 0?h:er,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const cL=new hi,hL=new Zk(1,1);hL.compareFunction=Hk;const uL=new CO,dL=new Yk,fL=new C0,j4=[],q4=[],Z4=new Float32Array(16),K4=new Float32Array(9),J4=new Float32Array(4);function Xf(i,e,n){const t=i[0];if(t<=0||t>0)return i;const r=e*n;let s=j4[r];if(s===void 0&&(s=new Float32Array(r),j4[r]=s),e!==0){t.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=n,i[a].toArray(s,l)}return s}function rr(i,e){if(i.length!==e.length)return!1;for(let n=0,t=i.length;n<t;n++)if(i[n]!==e[n])return!1;return!0}function sr(i,e){for(let n=0,t=e.length;n<t;n++)i[n]=e[n]}function MO(i,e){let n=q4[e];n===void 0&&(n=new Int32Array(e),q4[e]=n);for(let t=0;t!==e;++t)n[t]=i.allocateTextureUnit();return n}function cce(i,e){const n=this.cache;n[0]!==e&&(i.uniform1f(this.addr,e),n[0]=e)}function hce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(rr(n,e))return;i.uniform2fv(this.addr,e),sr(n,e)}}function uce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(rr(n,e))return;i.uniform3fv(this.addr,e),sr(n,e)}}function dce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(rr(n,e))return;i.uniform4fv(this.addr,e),sr(n,e)}}function fce(i,e){const n=this.cache,t=e.elements;if(t===void 0){if(rr(n,e))return;i.uniformMatrix2fv(this.addr,!1,e),sr(n,e)}else{if(rr(n,t))return;J4.set(t),i.uniformMatrix2fv(this.addr,!1,J4),sr(n,t)}}function pce(i,e){const n=this.cache,t=e.elements;if(t===void 0){if(rr(n,e))return;i.uniformMatrix3fv(this.addr,!1,e),sr(n,e)}else{if(rr(n,t))return;K4.set(t),i.uniformMatrix3fv(this.addr,!1,K4),sr(n,t)}}function mce(i,e){const n=this.cache,t=e.elements;if(t===void 0){if(rr(n,e))return;i.uniformMatrix4fv(this.addr,!1,e),sr(n,e)}else{if(rr(n,t))return;Z4.set(t),i.uniformMatrix4fv(this.addr,!1,Z4),sr(n,t)}}function gce(i,e){const n=this.cache;n[0]!==e&&(i.uniform1i(this.addr,e),n[0]=e)}function vce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(rr(n,e))return;i.uniform2iv(this.addr,e),sr(n,e)}}function yce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(rr(n,e))return;i.uniform3iv(this.addr,e),sr(n,e)}}function bce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(rr(n,e))return;i.uniform4iv(this.addr,e),sr(n,e)}}function Oce(i,e){const n=this.cache;n[0]!==e&&(i.uniform1ui(this.addr,e),n[0]=e)}function xce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(rr(n,e))return;i.uniform2uiv(this.addr,e),sr(n,e)}}function wce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(rr(n,e))return;i.uniform3uiv(this.addr,e),sr(n,e)}}function _ce(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(rr(n,e))return;i.uniform4uiv(this.addr,e),sr(n,e)}}function Sce(i,e,n){const t=this.cache,r=n.allocateTextureUnit();t[0]!==r&&(i.uniform1i(this.addr,r),t[0]=r);const s=this.type===i.SAMPLER_2D_SHADOW?hL:cL;n.setTexture2D(e||s,r)}function Cce(i,e,n){const t=this.cache,r=n.allocateTextureUnit();t[0]!==r&&(i.uniform1i(this.addr,r),t[0]=r),n.setTexture3D(e||dL,r)}function kce(i,e,n){const t=this.cache,r=n.allocateTextureUnit();t[0]!==r&&(i.uniform1i(this.addr,r),t[0]=r),n.setTextureCube(e||fL,r)}function Tce(i,e,n){const t=this.cache,r=n.allocateTextureUnit();t[0]!==r&&(i.uniform1i(this.addr,r),t[0]=r),n.setTexture2DArray(e||uL,r)}function Mce(i){switch(i){case 5126:return cce;case 35664:return hce;case 35665:return uce;case 35666:return dce;case 35674:return fce;case 35675:return pce;case 35676:return mce;case 5124:case 35670:return gce;case 35667:case 35671:return vce;case 35668:case 35672:return yce;case 35669:case 35673:return bce;case 5125:return Oce;case 36294:return xce;case 36295:return wce;case 36296:return _ce;case 35678:case 36198:case 36298:case 36306:case 35682:return Sce;case 35679:case 36299:case 36307:return Cce;case 35680:case 36300:case 36308:case 36293:return kce;case 36289:case 36303:case 36311:case 36292:return Tce}}function Ece(i,e){i.uniform1fv(this.addr,e)}function Pce(i,e){const n=Xf(e,this.size,2);i.uniform2fv(this.addr,n)}function Ace(i,e){const n=Xf(e,this.size,3);i.uniform3fv(this.addr,n)}function Rce(i,e){const n=Xf(e,this.size,4);i.uniform4fv(this.addr,n)}function Ice(i,e){const n=Xf(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,n)}function Dce(i,e){const n=Xf(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,n)}function Nce(i,e){const n=Xf(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,n)}function $ce(i,e){i.uniform1iv(this.addr,e)}function Vce(i,e){i.uniform2iv(this.addr,e)}function Lce(i,e){i.uniform3iv(this.addr,e)}function Bce(i,e){i.uniform4iv(this.addr,e)}function Uce(i,e){i.uniform1uiv(this.addr,e)}function zce(i,e){i.uniform2uiv(this.addr,e)}function Fce(i,e){i.uniform3uiv(this.addr,e)}function Xce(i,e){i.uniform4uiv(this.addr,e)}function Wce(i,e,n){const t=this.cache,r=e.length,s=MO(n,r);rr(t,s)||(i.uniform1iv(this.addr,s),sr(t,s));for(let a=0;a!==r;++a)n.setTexture2D(e[a]||cL,s[a])}function Qce(i,e,n){const t=this.cache,r=e.length,s=MO(n,r);rr(t,s)||(i.uniform1iv(this.addr,s),sr(t,s));for(let a=0;a!==r;++a)n.setTexture3D(e[a]||dL,s[a])}function Hce(i,e,n){const t=this.cache,r=e.length,s=MO(n,r);rr(t,s)||(i.uniform1iv(this.addr,s),sr(t,s));for(let a=0;a!==r;++a)n.setTextureCube(e[a]||fL,s[a])}function Gce(i,e,n){const t=this.cache,r=e.length,s=MO(n,r);rr(t,s)||(i.uniform1iv(this.addr,s),sr(t,s));for(let a=0;a!==r;++a)n.setTexture2DArray(e[a]||uL,s[a])}function Yce(i){switch(i){case 5126:return Ece;case 35664:return Pce;case 35665:return Ace;case 35666:return Rce;case 35674:return Ice;case 35675:return Dce;case 35676:return Nce;case 5124:case 35670:return $ce;case 35667:case 35671:return Vce;case 35668:case 35672:return Lce;case 35669:case 35673:return Bce;case 5125:return Uce;case 36294:return zce;case 36295:return Fce;case 36296:return Xce;case 35678:case 36198:case 36298:case 36306:case 35682:return Wce;case 35679:case 36299:case 36307:return Qce;case 35680:case 36300:case 36308:case 36293:return Hce;case 36289:case 36303:case 36311:case 36292:return Gce}}class jce{constructor(e,n,t){this.id=e,this.addr=t,this.cache=[],this.type=n.type,this.setValue=Mce(n.type)}}class qce{constructor(e,n,t){this.id=e,this.addr=t,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Yce(n.type)}}class Zce{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,t){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const l=r[s];l.setValue(e,n[l.id],t)}}}const y_=/(\w+)(\])?(\[|\.)?/g;function e5(i,e){i.seq.push(e),i.map[e.id]=e}function Kce(i,e,n){const t=i.name,r=t.length;for(y_.lastIndex=0;;){const s=y_.exec(t),a=y_.lastIndex;let l=s[1];const h=s[2]==="]",u=s[3];if(h&&(l=l|0),u===void 0||u==="["&&a+2===r){e5(n,u===void 0?new jce(l,i,e):new qce(l,i,e));break}else{let p=n.map[l];p===void 0&&(p=new Zce(l),e5(n,p)),n=p}}}class L1{constructor(e,n){this.seq=[],this.map={};const t=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<t;++r){const s=e.getActiveUniform(n,r),a=e.getUniformLocation(n,s.name);Kce(s,a,this)}}setValue(e,n,t,r){const s=this.map[n];s!==void 0&&s.setValue(e,t,r)}setOptional(e,n,t){const r=n[t];r!==void 0&&this.setValue(e,t,r)}static upload(e,n,t,r){for(let s=0,a=n.length;s!==a;++s){const l=n[s],h=t[l.id];h.needsUpdate!==!1&&l.setValue(e,h.value,r)}}static seqWithValue(e,n){const t=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in n&&t.push(a)}return t}}function t5(i,e,n){const t=i.createShader(e);return i.shaderSource(t,n),i.compileShader(t),t}const Jce=37297;let ehe=0;function the(i,e){const n=i.split(`
`),t=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=r;a<s;a++){const l=a+1;t.push(`${l===e?">":" "} ${l}: ${n[a]}`)}return t.join(`
`)}function nhe(i){const e=Yn.getPrimaries(Yn.workingColorSpace),n=Yn.getPrimaries(i);let t;switch(e===n?t="":e===$g&&n===Ng?t="LinearDisplayP3ToLinearSRGB":e===Ng&&n===$g&&(t="LinearSRGBToLinearDisplayP3"),i){case El:case w0:return[t,"LinearTransferOETF"];case Ys:case SO:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[t,"LinearTransferOETF"]}}function n5(i,e,n){const t=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(t&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+the(i.getShaderSource(e),a)}else return r}function ihe(i,e){const n=nhe(e);return`vec4 ${i}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function rhe(i,e){let n;switch(e){case SV:n="Linear";break;case CV:n="Reinhard";break;case kV:n="OptimizedCineon";break;case $k:n="ACESFilmic";break;case MV:n="AgX";break;case EV:n="Neutral";break;case TV:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+i+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function she(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Zm).join(`
`)}function ohe(i){const e=[];for(const n in i){const t=i[n];t!==!1&&e.push("#define "+n+" "+t)}return e.join(`
`)}function ahe(i,e){const n={},t=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<t;r++){const s=i.getActiveAttrib(e,r),a=s.name;let l=1;s.type===i.FLOAT_MAT2&&(l=2),s.type===i.FLOAT_MAT3&&(l=3),s.type===i.FLOAT_MAT4&&(l=4),n[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:l}}return n}function Zm(i){return i!==""}function i5(i,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function r5(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lhe=/^[ \t]*#include +<([\w\d./]+)>/gm;function LC(i){return i.replace(lhe,hhe)}const che=new Map;function hhe(i,e){let n=fn[e];if(n===void 0){const t=che.get(e);if(t!==void 0)n=fn[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t);else throw new Error("Can not resolve #include <"+e+">")}return LC(n)}const uhe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s5(i){return i.replace(uhe,dhe)}function dhe(i,e,n,t){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=t.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function o5(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function fhe(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Dk?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Nk?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===fa&&(e="SHADOWMAP_TYPE_VSM"),e}function phe(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Ol:case Vc:e="ENVMAP_TYPE_CUBE";break;case Uf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function mhe(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Vc:e="ENVMAP_MODE_REFRACTION";break}return e}function ghe(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case x0:e="ENVMAP_BLENDING_MULTIPLY";break;case wV:e="ENVMAP_BLENDING_MIX";break;case _V:e="ENVMAP_BLENDING_ADD";break}return e}function vhe(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,t=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:t,maxMip:n}}function yhe(i,e,n,t){const r=i.getContext(),s=n.defines;let a=n.vertexShader,l=n.fragmentShader;const h=fhe(n),u=phe(n),f=mhe(n),p=ghe(n),g=vhe(n),v=she(n),y=ohe(s),w=r.createProgram();let x,S,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(Zm).join(`
`),x.length>0&&(x+=`
`),S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(Zm).join(`
`),S.length>0&&(S+=`
`)):(x=[o5(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Zm).join(`
`),S=[o5(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==pl?"#define TONE_MAPPING":"",n.toneMapping!==pl?fn.tonemapping_pars_fragment:"",n.toneMapping!==pl?rhe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,ihe("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Zm).join(`
`)),a=LC(a),a=i5(a,n),a=r5(a,n),l=LC(l),l=i5(l,n),l=r5(l,n),a=s5(a),l=s5(l),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,S=["#define varying in",n.glslVersion===$C?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===$C?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const O=_+x+a,k=_+S+l,M=t5(r,r.VERTEX_SHADER,O),P=t5(r,r.FRAGMENT_SHADER,k);r.attachShader(w,M),r.attachShader(w,P),n.index0AttributeName!==void 0?r.bindAttribLocation(w,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function D(N){if(i.debug.checkShaderErrors){const L=r.getProgramInfoLog(w).trim(),I=r.getShaderInfoLog(M).trim(),$=r.getShaderInfoLog(P).trim();let B=!0,U=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(B=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,w,M,P);else{const Y=n5(r,M,"vertex"),Z=n5(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+L+`
`+Y+`
`+Z)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(I===""||$==="")&&(U=!1);U&&(N.diagnostics={runnable:B,programLog:L,vertexShader:{log:I,prefix:x},fragmentShader:{log:$,prefix:S}})}r.deleteShader(M),r.deleteShader(P),A=new L1(r,w),R=ahe(r,w)}let A;this.getUniforms=function(){return A===void 0&&D(this),A};let R;this.getAttributes=function(){return R===void 0&&D(this),R};let T=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=r.getProgramParameter(w,Jce)),T},this.destroy=function(){t.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=ehe++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=M,this.fragmentShader=P,this}let bhe=0;class Ohe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,t=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(t),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const t of n)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let t=n.get(e);return t===void 0&&(t=new Set,n.set(e,t)),t}_getShaderStage(e){const n=this.shaderCache;let t=n.get(e);return t===void 0&&(t=new xhe(e),n.set(e,t)),t}}class xhe{constructor(e){this.id=bhe++,this.code=e,this.usedTimes=0}}function whe(i,e,n,t,r,s,a){const l=new kO,h=new Ohe,u=new Set,f=[],p=r.logarithmicDepthBuffer,g=r.vertexTextures;let v=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(R){return u.add(R),R===0?"uv":`uv${R}`}function x(R,T,N,L,I){const $=L.fog,B=I.geometry,U=R.isMeshStandardMaterial?L.environment:null,Y=(R.isMeshStandardMaterial?n:e).get(R.envMap||U),Z=Y&&Y.mapping===Uf?Y.image.height:null,ie=y[R.type];R.precision!==null&&(v=r.getMaxPrecision(R.precision),v!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",v,"instead."));const ce=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,ge=ce!==void 0?ce.length:0;let Ae=0;B.morphAttributes.position!==void 0&&(Ae=1),B.morphAttributes.normal!==void 0&&(Ae=2),B.morphAttributes.color!==void 0&&(Ae=3);let Se,he,Ce,pe;if(ie){const vn=po[ie];Se=vn.vertexShader,he=vn.fragmentShader}else Se=R.vertexShader,he=R.fragmentShader,h.update(R),Ce=h.getVertexShaderID(R),pe=h.getFragmentShaderID(R);const j=i.getRenderTarget(),K=I.isInstancedMesh===!0,X=I.isBatchedMesh===!0,F=!!R.map,te=!!R.matcap,re=!!Y,H=!!R.aoMap,q=!!R.lightMap,le=!!R.bumpMap,fe=!!R.normalMap,be=!!R.displacementMap,Me=!!R.emissiveMap,J=!!R.metalnessMap,Q=!!R.roughnessMap,ue=R.anisotropy>0,de=R.clearcoat>0,we=R.dispersion>0,Te=R.iridescence>0,Xe=R.sheen>0,Ve=R.transmission>0,ze=ue&&!!R.anisotropyMap,rt=de&&!!R.clearcoatMap,Ge=de&&!!R.clearcoatNormalMap,it=de&&!!R.clearcoatRoughnessMap,kt=Te&&!!R.iridescenceMap,Tt=Te&&!!R.iridescenceThicknessMap,ut=Xe&&!!R.sheenColorMap,Ut=Xe&&!!R.sheenRoughnessMap,sn=!!R.specularMap,_e=!!R.specularColorMap,Le=!!R.specularIntensityMap,me=Ve&&!!R.transmissionMap,Be=Ve&&!!R.thicknessMap,Fe=!!R.gradientMap,tt=!!R.alphaMap,dt=R.alphaTest>0,wn=!!R.alphaHash,_n=!!R.extensions;let Rn=pl;R.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(Rn=i.toneMapping);const yi={shaderID:ie,shaderType:R.type,shaderName:R.name,vertexShader:Se,fragmentShader:he,defines:R.defines,customVertexShaderID:Ce,customFragmentShaderID:pe,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:v,batching:X,instancing:K,instancingColor:K&&I.instanceColor!==null,instancingMorph:K&&I.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:j===null?i.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:El,alphaToCoverage:!!R.alphaToCoverage,map:F,matcap:te,envMap:re,envMapMode:re&&Y.mapping,envMapCubeUVHeight:Z,aoMap:H,lightMap:q,bumpMap:le,normalMap:fe,displacementMap:g&&be,emissiveMap:Me,normalMapObjectSpace:fe&&R.normalMapType===QV,normalMapTangentSpace:fe&&R.normalMapType===qc,metalnessMap:J,roughnessMap:Q,anisotropy:ue,anisotropyMap:ze,clearcoat:de,clearcoatMap:rt,clearcoatNormalMap:Ge,clearcoatRoughnessMap:it,dispersion:we,iridescence:Te,iridescenceMap:kt,iridescenceThicknessMap:Tt,sheen:Xe,sheenColorMap:ut,sheenRoughnessMap:Ut,specularMap:sn,specularColorMap:_e,specularIntensityMap:Le,transmission:Ve,transmissionMap:me,thicknessMap:Be,gradientMap:Fe,opaque:R.transparent===!1&&R.blending===tu&&R.alphaToCoverage===!1,alphaMap:tt,alphaTest:dt,alphaHash:wn,combine:R.combine,mapUv:F&&w(R.map.channel),aoMapUv:H&&w(R.aoMap.channel),lightMapUv:q&&w(R.lightMap.channel),bumpMapUv:le&&w(R.bumpMap.channel),normalMapUv:fe&&w(R.normalMap.channel),displacementMapUv:be&&w(R.displacementMap.channel),emissiveMapUv:Me&&w(R.emissiveMap.channel),metalnessMapUv:J&&w(R.metalnessMap.channel),roughnessMapUv:Q&&w(R.roughnessMap.channel),anisotropyMapUv:ze&&w(R.anisotropyMap.channel),clearcoatMapUv:rt&&w(R.clearcoatMap.channel),clearcoatNormalMapUv:Ge&&w(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:it&&w(R.clearcoatRoughnessMap.channel),iridescenceMapUv:kt&&w(R.iridescenceMap.channel),iridescenceThicknessMapUv:Tt&&w(R.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&w(R.sheenColorMap.channel),sheenRoughnessMapUv:Ut&&w(R.sheenRoughnessMap.channel),specularMapUv:sn&&w(R.specularMap.channel),specularColorMapUv:_e&&w(R.specularColorMap.channel),specularIntensityMapUv:Le&&w(R.specularIntensityMap.channel),transmissionMapUv:me&&w(R.transmissionMap.channel),thicknessMapUv:Be&&w(R.thicknessMap.channel),alphaMapUv:tt&&w(R.alphaMap.channel),vertexTangents:!!B.attributes.tangent&&(fe||ue),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,pointsUvs:I.isPoints===!0&&!!B.attributes.uv&&(F||tt),fog:!!$,useFog:R.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:I.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:ge,morphTextureStride:Ae,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:R.dithering,shadowMapEnabled:i.shadowMap.enabled&&N.length>0,shadowMapType:i.shadowMap.type,toneMapping:Rn,useLegacyLights:i._useLegacyLights,decodeVideoTexture:F&&R.map.isVideoTexture===!0&&Yn.getTransfer(R.map.colorSpace)===si,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===ws,flipSided:R.side===Vr,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:_n&&R.extensions.clipCullDistance===!0&&t.has("WEBGL_clip_cull_distance"),extensionMultiDraw:_n&&R.extensions.multiDraw===!0&&t.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:t.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return yi.vertexUv1s=u.has(1),yi.vertexUv2s=u.has(2),yi.vertexUv3s=u.has(3),u.clear(),yi}function S(R){const T=[];if(R.shaderID?T.push(R.shaderID):(T.push(R.customVertexShaderID),T.push(R.customFragmentShaderID)),R.defines!==void 0)for(const N in R.defines)T.push(N),T.push(R.defines[N]);return R.isRawShaderMaterial===!1&&(_(T,R),O(T,R),T.push(i.outputColorSpace)),T.push(R.customProgramCacheKey),T.join()}function _(R,T){R.push(T.precision),R.push(T.outputColorSpace),R.push(T.envMapMode),R.push(T.envMapCubeUVHeight),R.push(T.mapUv),R.push(T.alphaMapUv),R.push(T.lightMapUv),R.push(T.aoMapUv),R.push(T.bumpMapUv),R.push(T.normalMapUv),R.push(T.displacementMapUv),R.push(T.emissiveMapUv),R.push(T.metalnessMapUv),R.push(T.roughnessMapUv),R.push(T.anisotropyMapUv),R.push(T.clearcoatMapUv),R.push(T.clearcoatNormalMapUv),R.push(T.clearcoatRoughnessMapUv),R.push(T.iridescenceMapUv),R.push(T.iridescenceThicknessMapUv),R.push(T.sheenColorMapUv),R.push(T.sheenRoughnessMapUv),R.push(T.specularMapUv),R.push(T.specularColorMapUv),R.push(T.specularIntensityMapUv),R.push(T.transmissionMapUv),R.push(T.thicknessMapUv),R.push(T.combine),R.push(T.fogExp2),R.push(T.sizeAttenuation),R.push(T.morphTargetsCount),R.push(T.morphAttributeCount),R.push(T.numDirLights),R.push(T.numPointLights),R.push(T.numSpotLights),R.push(T.numSpotLightMaps),R.push(T.numHemiLights),R.push(T.numRectAreaLights),R.push(T.numDirLightShadows),R.push(T.numPointLightShadows),R.push(T.numSpotLightShadows),R.push(T.numSpotLightShadowsWithMaps),R.push(T.numLightProbes),R.push(T.shadowMapType),R.push(T.toneMapping),R.push(T.numClippingPlanes),R.push(T.numClipIntersection),R.push(T.depthPacking)}function O(R,T){l.disableAll(),T.supportsVertexTextures&&l.enable(0),T.instancing&&l.enable(1),T.instancingColor&&l.enable(2),T.instancingMorph&&l.enable(3),T.matcap&&l.enable(4),T.envMap&&l.enable(5),T.normalMapObjectSpace&&l.enable(6),T.normalMapTangentSpace&&l.enable(7),T.clearcoat&&l.enable(8),T.iridescence&&l.enable(9),T.alphaTest&&l.enable(10),T.vertexColors&&l.enable(11),T.vertexAlphas&&l.enable(12),T.vertexUv1s&&l.enable(13),T.vertexUv2s&&l.enable(14),T.vertexUv3s&&l.enable(15),T.vertexTangents&&l.enable(16),T.anisotropy&&l.enable(17),T.alphaHash&&l.enable(18),T.batching&&l.enable(19),T.dispersion&&l.enable(20),R.push(l.mask),l.disableAll(),T.fog&&l.enable(0),T.useFog&&l.enable(1),T.flatShading&&l.enable(2),T.logarithmicDepthBuffer&&l.enable(3),T.skinning&&l.enable(4),T.morphTargets&&l.enable(5),T.morphNormals&&l.enable(6),T.morphColors&&l.enable(7),T.premultipliedAlpha&&l.enable(8),T.shadowMapEnabled&&l.enable(9),T.useLegacyLights&&l.enable(10),T.doubleSided&&l.enable(11),T.flipSided&&l.enable(12),T.useDepthPacking&&l.enable(13),T.dithering&&l.enable(14),T.transmission&&l.enable(15),T.sheen&&l.enable(16),T.opaque&&l.enable(17),T.pointsUvs&&l.enable(18),T.decodeVideoTexture&&l.enable(19),T.alphaToCoverage&&l.enable(20),R.push(l.mask)}function k(R){const T=y[R.type];let N;if(T){const L=po[T];N=_0.clone(L.uniforms)}else N=R.uniforms;return N}function M(R,T){let N;for(let L=0,I=f.length;L<I;L++){const $=f[L];if($.cacheKey===T){N=$,++N.usedTimes;break}}return N===void 0&&(N=new yhe(i,T,R,s),f.push(N)),N}function P(R){if(--R.usedTimes===0){const T=f.indexOf(R);f[T]=f[f.length-1],f.pop(),R.destroy()}}function D(R){h.remove(R)}function A(){h.dispose()}return{getParameters:x,getProgramCacheKey:S,getUniforms:k,acquireProgram:M,releaseProgram:P,releaseShaderCache:D,programs:f,dispose:A}}function _he(){let i=new WeakMap;function e(s){let a=i.get(s);return a===void 0&&(a={},i.set(s,a)),a}function n(s){i.delete(s)}function t(s,a,l){i.get(s)[a]=l}function r(){i=new WeakMap}return{get:e,remove:n,update:t,dispose:r}}function She(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function a5(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function l5(){const i=[];let e=0;const n=[],t=[],r=[];function s(){e=0,n.length=0,t.length=0,r.length=0}function a(p,g,v,y,w,x){let S=i[e];return S===void 0?(S={id:p.id,object:p,geometry:g,material:v,groupOrder:y,renderOrder:p.renderOrder,z:w,group:x},i[e]=S):(S.id=p.id,S.object=p,S.geometry=g,S.material=v,S.groupOrder=y,S.renderOrder=p.renderOrder,S.z=w,S.group=x),e++,S}function l(p,g,v,y,w,x){const S=a(p,g,v,y,w,x);v.transmission>0?t.push(S):v.transparent===!0?r.push(S):n.push(S)}function h(p,g,v,y,w,x){const S=a(p,g,v,y,w,x);v.transmission>0?t.unshift(S):v.transparent===!0?r.unshift(S):n.unshift(S)}function u(p,g){n.length>1&&n.sort(p||She),t.length>1&&t.sort(g||a5),r.length>1&&r.sort(g||a5)}function f(){for(let p=e,g=i.length;p<g;p++){const v=i[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:t,transparent:r,init:s,push:l,unshift:h,finish:f,sort:u}}function Che(){let i=new WeakMap;function e(t,r){const s=i.get(t);let a;return s===void 0?(a=new l5,i.set(t,[a])):r>=s.length?(a=new l5,s.push(a)):a=s[r],a}function n(){i=new WeakMap}return{get:e,dispose:n}}function khe(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ne,color:new nt};break;case"SpotLight":n={position:new ne,direction:new ne,color:new nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ne,color:new nt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ne,skyColor:new nt,groundColor:new nt};break;case"RectAreaLight":n={color:new nt,position:new ne,halfWidth:new ne,halfHeight:new ne};break}return i[e.id]=n,n}}}function The(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=n,n}}}let Mhe=0;function Ehe(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Phe(i){const e=new khe,n=The(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)t.probe.push(new ne);const r=new ne,s=new pt,a=new pt;function l(u,f){let p=0,g=0,v=0;for(let N=0;N<9;N++)t.probe[N].set(0,0,0);let y=0,w=0,x=0,S=0,_=0,O=0,k=0,M=0,P=0,D=0,A=0;u.sort(Ehe);const R=f===!0?Math.PI:1;for(let N=0,L=u.length;N<L;N++){const I=u[N],$=I.color,B=I.intensity,U=I.distance,Y=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)p+=$.r*B*R,g+=$.g*B*R,v+=$.b*B*R;else if(I.isLightProbe){for(let Z=0;Z<9;Z++)t.probe[Z].addScaledVector(I.sh.coefficients[Z],B);A++}else if(I.isDirectionalLight){const Z=e.get(I);if(Z.color.copy(I.color).multiplyScalar(I.intensity*R),I.castShadow){const ie=I.shadow,ce=n.get(I);ce.shadowBias=ie.bias,ce.shadowNormalBias=ie.normalBias,ce.shadowRadius=ie.radius,ce.shadowMapSize=ie.mapSize,t.directionalShadow[y]=ce,t.directionalShadowMap[y]=Y,t.directionalShadowMatrix[y]=I.shadow.matrix,O++}t.directional[y]=Z,y++}else if(I.isSpotLight){const Z=e.get(I);Z.position.setFromMatrixPosition(I.matrixWorld),Z.color.copy($).multiplyScalar(B*R),Z.distance=U,Z.coneCos=Math.cos(I.angle),Z.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),Z.decay=I.decay,t.spot[x]=Z;const ie=I.shadow;if(I.map&&(t.spotLightMap[P]=I.map,P++,ie.updateMatrices(I),I.castShadow&&D++),t.spotLightMatrix[x]=ie.matrix,I.castShadow){const ce=n.get(I);ce.shadowBias=ie.bias,ce.shadowNormalBias=ie.normalBias,ce.shadowRadius=ie.radius,ce.shadowMapSize=ie.mapSize,t.spotShadow[x]=ce,t.spotShadowMap[x]=Y,M++}x++}else if(I.isRectAreaLight){const Z=e.get(I);Z.color.copy($).multiplyScalar(B),Z.halfWidth.set(I.width*.5,0,0),Z.halfHeight.set(0,I.height*.5,0),t.rectArea[S]=Z,S++}else if(I.isPointLight){const Z=e.get(I);if(Z.color.copy(I.color).multiplyScalar(I.intensity*R),Z.distance=I.distance,Z.decay=I.decay,I.castShadow){const ie=I.shadow,ce=n.get(I);ce.shadowBias=ie.bias,ce.shadowNormalBias=ie.normalBias,ce.shadowRadius=ie.radius,ce.shadowMapSize=ie.mapSize,ce.shadowCameraNear=ie.camera.near,ce.shadowCameraFar=ie.camera.far,t.pointShadow[w]=ce,t.pointShadowMap[w]=Y,t.pointShadowMatrix[w]=I.shadow.matrix,k++}t.point[w]=Z,w++}else if(I.isHemisphereLight){const Z=e.get(I);Z.skyColor.copy(I.color).multiplyScalar(B*R),Z.groundColor.copy(I.groundColor).multiplyScalar(B*R),t.hemi[_]=Z,_++}}S>0&&(i.has("OES_texture_float_linear")===!0?(t.rectAreaLTC1=ot.LTC_FLOAT_1,t.rectAreaLTC2=ot.LTC_FLOAT_2):(t.rectAreaLTC1=ot.LTC_HALF_1,t.rectAreaLTC2=ot.LTC_HALF_2)),t.ambient[0]=p,t.ambient[1]=g,t.ambient[2]=v;const T=t.hash;(T.directionalLength!==y||T.pointLength!==w||T.spotLength!==x||T.rectAreaLength!==S||T.hemiLength!==_||T.numDirectionalShadows!==O||T.numPointShadows!==k||T.numSpotShadows!==M||T.numSpotMaps!==P||T.numLightProbes!==A)&&(t.directional.length=y,t.spot.length=x,t.rectArea.length=S,t.point.length=w,t.hemi.length=_,t.directionalShadow.length=O,t.directionalShadowMap.length=O,t.pointShadow.length=k,t.pointShadowMap.length=k,t.spotShadow.length=M,t.spotShadowMap.length=M,t.directionalShadowMatrix.length=O,t.pointShadowMatrix.length=k,t.spotLightMatrix.length=M+P-D,t.spotLightMap.length=P,t.numSpotLightShadowsWithMaps=D,t.numLightProbes=A,T.directionalLength=y,T.pointLength=w,T.spotLength=x,T.rectAreaLength=S,T.hemiLength=_,T.numDirectionalShadows=O,T.numPointShadows=k,T.numSpotShadows=M,T.numSpotMaps=P,T.numLightProbes=A,t.version=Mhe++)}function h(u,f){let p=0,g=0,v=0,y=0,w=0;const x=f.matrixWorldInverse;for(let S=0,_=u.length;S<_;S++){const O=u[S];if(O.isDirectionalLight){const k=t.directional[p];k.direction.setFromMatrixPosition(O.matrixWorld),r.setFromMatrixPosition(O.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(x),p++}else if(O.isSpotLight){const k=t.spot[v];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(x),k.direction.setFromMatrixPosition(O.matrixWorld),r.setFromMatrixPosition(O.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(x),v++}else if(O.isRectAreaLight){const k=t.rectArea[y];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(x),a.identity(),s.copy(O.matrixWorld),s.premultiply(x),a.extractRotation(s),k.halfWidth.set(O.width*.5,0,0),k.halfHeight.set(0,O.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),y++}else if(O.isPointLight){const k=t.point[g];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(x),g++}else if(O.isHemisphereLight){const k=t.hemi[w];k.direction.setFromMatrixPosition(O.matrixWorld),k.direction.transformDirection(x),w++}}}return{setup:l,setupView:h,state:t}}function c5(i){const e=new Phe(i),n=[],t=[];function r(f){u.camera=f,n.length=0,t.length=0}function s(f){n.push(f)}function a(f){t.push(f)}function l(f){e.setup(n,f)}function h(f){e.setupView(n,f)}const u={lightsArray:n,shadowsArray:t,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:l,setupLightsView:h,pushLight:s,pushShadow:a}}function Ahe(i){let e=new WeakMap;function n(r,s=0){const a=e.get(r);let l;return a===void 0?(l=new c5(i),e.set(r,[l])):s>=a.length?(l=new c5(i),a.push(l)):l=a[s],l}function t(){e=new WeakMap}return{get:n,dispose:t}}class Kk extends Br{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=XV,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Jk extends Br{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Rhe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ihe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Dhe(i,e,n){let t=new k0;const r=new Qe,s=new Qe,a=new yn,l=new Kk({depthPacking:WV}),h=new Jk,u={},f=n.maxTextureSize,p={[bl]:Vr,[Vr]:bl,[ws]:ws},g=new os({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qe},radius:{value:4}},vertexShader:Rhe,fragmentShader:Ihe}),v=g.clone();v.defines.HORIZONTAL_PASS=1;const y=new rn;y.setAttribute("position",new In(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Jn(y,g),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dk;let S=this.type;this.render=function(P,D,A){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||P.length===0)return;const R=i.getRenderTarget(),T=i.getActiveCubeFace(),N=i.getActiveMipmapLevel(),L=i.state;L.setBlending(fl),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const I=S!==fa&&this.type===fa,$=S===fa&&this.type!==fa;for(let B=0,U=P.length;B<U;B++){const Y=P[B],Z=Y.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;r.copy(Z.mapSize);const ie=Z.getFrameExtents();if(r.multiply(ie),s.copy(Z.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/ie.x),r.x=s.x*ie.x,Z.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/ie.y),r.y=s.y*ie.y,Z.mapSize.y=s.y)),Z.map===null||I===!0||$===!0){const ge=this.type!==fa?{minFilter:er,magFilter:er}:{};Z.map!==null&&Z.map.dispose(),Z.map=new Co(r.x,r.y,ge),Z.map.texture.name=Y.name+".shadowMap",Z.camera.updateProjectionMatrix()}i.setRenderTarget(Z.map),i.clear();const ce=Z.getViewportCount();for(let ge=0;ge<ce;ge++){const Ae=Z.getViewport(ge);a.set(s.x*Ae.x,s.y*Ae.y,s.x*Ae.z,s.y*Ae.w),L.viewport(a),Z.updateMatrices(Y,ge),t=Z.getFrustum(),k(D,A,Z.camera,Y,this.type)}Z.isPointLightShadow!==!0&&this.type===fa&&_(Z,A),Z.needsUpdate=!1}S=this.type,x.needsUpdate=!1,i.setRenderTarget(R,T,N)};function _(P,D){const A=e.update(w);g.defines.VSM_SAMPLES!==P.blurSamples&&(g.defines.VSM_SAMPLES=P.blurSamples,v.defines.VSM_SAMPLES=P.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Co(r.x,r.y)),g.uniforms.shadow_pass.value=P.map.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,i.setRenderTarget(P.mapPass),i.clear(),i.renderBufferDirect(D,null,A,g,w,null),v.uniforms.shadow_pass.value=P.mapPass.texture,v.uniforms.resolution.value=P.mapSize,v.uniforms.radius.value=P.radius,i.setRenderTarget(P.map),i.clear(),i.renderBufferDirect(D,null,A,v,w,null)}function O(P,D,A,R){let T=null;const N=A.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(N!==void 0)T=N;else if(T=A.isPointLight===!0?h:l,i.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const L=T.uuid,I=D.uuid;let $=u[L];$===void 0&&($={},u[L]=$);let B=$[I];B===void 0&&(B=T.clone(),$[I]=B,D.addEventListener("dispose",M)),T=B}if(T.visible=D.visible,T.wireframe=D.wireframe,R===fa?T.side=D.shadowSide!==null?D.shadowSide:D.side:T.side=D.shadowSide!==null?D.shadowSide:p[D.side],T.alphaMap=D.alphaMap,T.alphaTest=D.alphaTest,T.map=D.map,T.clipShadows=D.clipShadows,T.clippingPlanes=D.clippingPlanes,T.clipIntersection=D.clipIntersection,T.displacementMap=D.displacementMap,T.displacementScale=D.displacementScale,T.displacementBias=D.displacementBias,T.wireframeLinewidth=D.wireframeLinewidth,T.linewidth=D.linewidth,A.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const L=i.properties.get(T);L.light=A}return T}function k(P,D,A,R,T){if(P.visible===!1)return;if(P.layers.test(D.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&T===fa)&&(!P.frustumCulled||t.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,P.matrixWorld);const I=e.update(P),$=P.material;if(Array.isArray($)){const B=I.groups;for(let U=0,Y=B.length;U<Y;U++){const Z=B[U],ie=$[Z.materialIndex];if(ie&&ie.visible){const ce=O(P,ie,R,T);P.onBeforeShadow(i,P,D,A,I,ce,Z),i.renderBufferDirect(A,null,I,ce,P,Z),P.onAfterShadow(i,P,D,A,I,ce,Z)}}}else if($.visible){const B=O(P,$,R,T);P.onBeforeShadow(i,P,D,A,I,B,null),i.renderBufferDirect(A,null,I,B,P,null),P.onAfterShadow(i,P,D,A,I,B,null)}}const L=P.children;for(let I=0,$=L.length;I<$;I++)k(L[I],D,A,R,T)}function M(P){P.target.removeEventListener("dispose",M);for(const A in u){const R=u[A],T=P.target.uuid;T in R&&(R[T].dispose(),delete R[T])}}}function Nhe(i){function e(){let me=!1;const Be=new yn;let Fe=null;const tt=new yn(0,0,0,0);return{setMask:function(dt){Fe!==dt&&!me&&(i.colorMask(dt,dt,dt,dt),Fe=dt)},setLocked:function(dt){me=dt},setClear:function(dt,wn,_n,Rn,yi){yi===!0&&(dt*=Rn,wn*=Rn,_n*=Rn),Be.set(dt,wn,_n,Rn),tt.equals(Be)===!1&&(i.clearColor(dt,wn,_n,Rn),tt.copy(Be))},reset:function(){me=!1,Fe=null,tt.set(-1,0,0,0)}}}function n(){let me=!1,Be=null,Fe=null,tt=null;return{setTest:function(dt){dt?pe(i.DEPTH_TEST):j(i.DEPTH_TEST)},setMask:function(dt){Be!==dt&&!me&&(i.depthMask(dt),Be=dt)},setFunc:function(dt){if(Fe!==dt){switch(dt){case mV:i.depthFunc(i.NEVER);break;case gV:i.depthFunc(i.ALWAYS);break;case vV:i.depthFunc(i.LESS);break;case Ag:i.depthFunc(i.LEQUAL);break;case yV:i.depthFunc(i.EQUAL);break;case bV:i.depthFunc(i.GEQUAL);break;case OV:i.depthFunc(i.GREATER);break;case xV:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Fe=dt}},setLocked:function(dt){me=dt},setClear:function(dt){tt!==dt&&(i.clearDepth(dt),tt=dt)},reset:function(){me=!1,Be=null,Fe=null,tt=null}}}function t(){let me=!1,Be=null,Fe=null,tt=null,dt=null,wn=null,_n=null,Rn=null,yi=null;return{setTest:function(vn){me||(vn?pe(i.STENCIL_TEST):j(i.STENCIL_TEST))},setMask:function(vn){Be!==vn&&!me&&(i.stencilMask(vn),Be=vn)},setFunc:function(vn,or,Si){(Fe!==vn||tt!==or||dt!==Si)&&(i.stencilFunc(vn,or,Si),Fe=vn,tt=or,dt=Si)},setOp:function(vn,or,Si){(wn!==vn||_n!==or||Rn!==Si)&&(i.stencilOp(vn,or,Si),wn=vn,_n=or,Rn=Si)},setLocked:function(vn){me=vn},setClear:function(vn){yi!==vn&&(i.clearStencil(vn),yi=vn)},reset:function(){me=!1,Be=null,Fe=null,tt=null,dt=null,wn=null,_n=null,Rn=null,yi=null}}}const r=new e,s=new n,a=new t,l=new WeakMap,h=new WeakMap;let u={},f={},p=new WeakMap,g=[],v=null,y=!1,w=null,x=null,S=null,_=null,O=null,k=null,M=null,P=new nt(0,0,0),D=0,A=!1,R=null,T=null,N=null,L=null,I=null;const $=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let B=!1,U=0;const Y=i.getParameter(i.VERSION);Y.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(Y)[1]),B=U>=1):Y.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),B=U>=2);let Z=null,ie={};const ce=i.getParameter(i.SCISSOR_BOX),ge=i.getParameter(i.VIEWPORT),Ae=new yn().fromArray(ce),Se=new yn().fromArray(ge);function he(me,Be,Fe,tt){const dt=new Uint8Array(4),wn=i.createTexture();i.bindTexture(me,wn),i.texParameteri(me,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(me,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let _n=0;_n<Fe;_n++)me===i.TEXTURE_3D||me===i.TEXTURE_2D_ARRAY?i.texImage3D(Be,0,i.RGBA,1,1,tt,0,i.RGBA,i.UNSIGNED_BYTE,dt):i.texImage2D(Be+_n,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,dt);return wn}const Ce={};Ce[i.TEXTURE_2D]=he(i.TEXTURE_2D,i.TEXTURE_2D,1),Ce[i.TEXTURE_CUBE_MAP]=he(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ce[i.TEXTURE_2D_ARRAY]=he(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ce[i.TEXTURE_3D]=he(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),pe(i.DEPTH_TEST),s.setFunc(Ag),le(!1),fe(sC),pe(i.CULL_FACE),H(fl);function pe(me){u[me]!==!0&&(i.enable(me),u[me]=!0)}function j(me){u[me]!==!1&&(i.disable(me),u[me]=!1)}function K(me,Be){return f[me]!==Be?(i.bindFramebuffer(me,Be),f[me]=Be,me===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=Be),me===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=Be),!0):!1}function X(me,Be){let Fe=g,tt=!1;if(me){Fe=p.get(Be),Fe===void 0&&(Fe=[],p.set(Be,Fe));const dt=me.textures;if(Fe.length!==dt.length||Fe[0]!==i.COLOR_ATTACHMENT0){for(let wn=0,_n=dt.length;wn<_n;wn++)Fe[wn]=i.COLOR_ATTACHMENT0+wn;Fe.length=dt.length,tt=!0}}else Fe[0]!==i.BACK&&(Fe[0]=i.BACK,tt=!0);tt&&i.drawBuffers(Fe)}function F(me){return v!==me?(i.useProgram(me),v=me,!0):!1}const te={[Oc]:i.FUNC_ADD,[K$]:i.FUNC_SUBTRACT,[J$]:i.FUNC_REVERSE_SUBTRACT};te[eV]=i.MIN,te[tV]=i.MAX;const re={[nV]:i.ZERO,[iV]:i.ONE,[rV]:i.SRC_COLOR,[gb]:i.SRC_ALPHA,[hV]:i.SRC_ALPHA_SATURATE,[lV]:i.DST_COLOR,[oV]:i.DST_ALPHA,[sV]:i.ONE_MINUS_SRC_COLOR,[vb]:i.ONE_MINUS_SRC_ALPHA,[cV]:i.ONE_MINUS_DST_COLOR,[aV]:i.ONE_MINUS_DST_ALPHA,[uV]:i.CONSTANT_COLOR,[dV]:i.ONE_MINUS_CONSTANT_COLOR,[fV]:i.CONSTANT_ALPHA,[pV]:i.ONE_MINUS_CONSTANT_ALPHA};function H(me,Be,Fe,tt,dt,wn,_n,Rn,yi,vn){if(me===fl){y===!0&&(j(i.BLEND),y=!1);return}if(y===!1&&(pe(i.BLEND),y=!0),me!==Z$){if(me!==w||vn!==A){if((x!==Oc||O!==Oc)&&(i.blendEquation(i.FUNC_ADD),x=Oc,O=Oc),vn)switch(me){case tu:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case mb:i.blendFunc(i.ONE,i.ONE);break;case oC:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case aC:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",me);break}else switch(me){case tu:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case mb:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case oC:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case aC:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",me);break}S=null,_=null,k=null,M=null,P.set(0,0,0),D=0,w=me,A=vn}return}dt=dt||Be,wn=wn||Fe,_n=_n||tt,(Be!==x||dt!==O)&&(i.blendEquationSeparate(te[Be],te[dt]),x=Be,O=dt),(Fe!==S||tt!==_||wn!==k||_n!==M)&&(i.blendFuncSeparate(re[Fe],re[tt],re[wn],re[_n]),S=Fe,_=tt,k=wn,M=_n),(Rn.equals(P)===!1||yi!==D)&&(i.blendColor(Rn.r,Rn.g,Rn.b,yi),P.copy(Rn),D=yi),w=me,A=!1}function q(me,Be){me.side===ws?j(i.CULL_FACE):pe(i.CULL_FACE);let Fe=me.side===Vr;Be&&(Fe=!Fe),le(Fe),me.blending===tu&&me.transparent===!1?H(fl):H(me.blending,me.blendEquation,me.blendSrc,me.blendDst,me.blendEquationAlpha,me.blendSrcAlpha,me.blendDstAlpha,me.blendColor,me.blendAlpha,me.premultipliedAlpha),s.setFunc(me.depthFunc),s.setTest(me.depthTest),s.setMask(me.depthWrite),r.setMask(me.colorWrite);const tt=me.stencilWrite;a.setTest(tt),tt&&(a.setMask(me.stencilWriteMask),a.setFunc(me.stencilFunc,me.stencilRef,me.stencilFuncMask),a.setOp(me.stencilFail,me.stencilZFail,me.stencilZPass)),Me(me.polygonOffset,me.polygonOffsetFactor,me.polygonOffsetUnits),me.alphaToCoverage===!0?pe(i.SAMPLE_ALPHA_TO_COVERAGE):j(i.SAMPLE_ALPHA_TO_COVERAGE)}function le(me){R!==me&&(me?i.frontFace(i.CW):i.frontFace(i.CCW),R=me)}function fe(me){me!==j$?(pe(i.CULL_FACE),me!==T&&(me===sC?i.cullFace(i.BACK):me===q$?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):j(i.CULL_FACE),T=me}function be(me){me!==N&&(B&&i.lineWidth(me),N=me)}function Me(me,Be,Fe){me?(pe(i.POLYGON_OFFSET_FILL),(L!==Be||I!==Fe)&&(i.polygonOffset(Be,Fe),L=Be,I=Fe)):j(i.POLYGON_OFFSET_FILL)}function J(me){me?pe(i.SCISSOR_TEST):j(i.SCISSOR_TEST)}function Q(me){me===void 0&&(me=i.TEXTURE0+$-1),Z!==me&&(i.activeTexture(me),Z=me)}function ue(me,Be,Fe){Fe===void 0&&(Z===null?Fe=i.TEXTURE0+$-1:Fe=Z);let tt=ie[Fe];tt===void 0&&(tt={type:void 0,texture:void 0},ie[Fe]=tt),(tt.type!==me||tt.texture!==Be)&&(Z!==Fe&&(i.activeTexture(Fe),Z=Fe),i.bindTexture(me,Be||Ce[me]),tt.type=me,tt.texture=Be)}function de(){const me=ie[Z];me!==void 0&&me.type!==void 0&&(i.bindTexture(me.type,null),me.type=void 0,me.texture=void 0)}function we(){try{i.compressedTexImage2D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Te(){try{i.compressedTexImage3D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Xe(){try{i.texSubImage2D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Ve(){try{i.texSubImage3D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function ze(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function rt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Ge(){try{i.texStorage2D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function it(){try{i.texStorage3D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function kt(){try{i.texImage2D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Tt(){try{i.texImage3D.apply(i,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function ut(me){Ae.equals(me)===!1&&(i.scissor(me.x,me.y,me.z,me.w),Ae.copy(me))}function Ut(me){Se.equals(me)===!1&&(i.viewport(me.x,me.y,me.z,me.w),Se.copy(me))}function sn(me,Be){let Fe=h.get(Be);Fe===void 0&&(Fe=new WeakMap,h.set(Be,Fe));let tt=Fe.get(me);tt===void 0&&(tt=i.getUniformBlockIndex(Be,me.name),Fe.set(me,tt))}function _e(me,Be){const tt=h.get(Be).get(me);l.get(Be)!==tt&&(i.uniformBlockBinding(Be,tt,me.__bindingPointIndex),l.set(Be,tt))}function Le(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},Z=null,ie={},f={},p=new WeakMap,g=[],v=null,y=!1,w=null,x=null,S=null,_=null,O=null,k=null,M=null,P=new nt(0,0,0),D=0,A=!1,R=null,T=null,N=null,L=null,I=null,Ae.set(0,0,i.canvas.width,i.canvas.height),Se.set(0,0,i.canvas.width,i.canvas.height),r.reset(),s.reset(),a.reset()}return{buffers:{color:r,depth:s,stencil:a},enable:pe,disable:j,bindFramebuffer:K,drawBuffers:X,useProgram:F,setBlending:H,setMaterial:q,setFlipSided:le,setCullFace:fe,setLineWidth:be,setPolygonOffset:Me,setScissorTest:J,activeTexture:Q,bindTexture:ue,unbindTexture:de,compressedTexImage2D:we,compressedTexImage3D:Te,texImage2D:kt,texImage3D:Tt,updateUBOMapping:sn,uniformBlockBinding:_e,texStorage2D:Ge,texStorage3D:it,texSubImage2D:Xe,texSubImage3D:Ve,compressedTexSubImage2D:ze,compressedTexSubImage3D:rt,scissor:ut,viewport:Ut,reset:Le}}function $he(i,e,n,t,r,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Qe,f=new WeakMap;let p;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(J,Q){return v?new OffscreenCanvas(J,Q):Bg("canvas")}function w(J,Q,ue){let de=1;const we=Me(J);if((we.width>ue||we.height>ue)&&(de=ue/Math.max(we.width,we.height)),de<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Te=Math.floor(de*we.width),Xe=Math.floor(de*we.height);p===void 0&&(p=y(Te,Xe));const Ve=Q?y(Te,Xe):p;return Ve.width=Te,Ve.height=Xe,Ve.getContext("2d").drawImage(J,0,0,Te,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+we.width+"x"+we.height+") to ("+Te+"x"+Xe+")."),Ve}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+we.width+"x"+we.height+")."),J;return J}function x(J){return J.generateMipmaps&&J.minFilter!==er&&J.minFilter!==Vi}function S(J){i.generateMipmap(J)}function _(J,Q,ue,de,we=!1){if(J!==null){if(i[J]!==void 0)return i[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Te=Q;if(Q===i.RED&&(ue===i.FLOAT&&(Te=i.R32F),ue===i.HALF_FLOAT&&(Te=i.R16F),ue===i.UNSIGNED_BYTE&&(Te=i.R8)),Q===i.RED_INTEGER&&(ue===i.UNSIGNED_BYTE&&(Te=i.R8UI),ue===i.UNSIGNED_SHORT&&(Te=i.R16UI),ue===i.UNSIGNED_INT&&(Te=i.R32UI),ue===i.BYTE&&(Te=i.R8I),ue===i.SHORT&&(Te=i.R16I),ue===i.INT&&(Te=i.R32I)),Q===i.RG&&(ue===i.FLOAT&&(Te=i.RG32F),ue===i.HALF_FLOAT&&(Te=i.RG16F),ue===i.UNSIGNED_BYTE&&(Te=i.RG8)),Q===i.RG_INTEGER&&(ue===i.UNSIGNED_BYTE&&(Te=i.RG8UI),ue===i.UNSIGNED_SHORT&&(Te=i.RG16UI),ue===i.UNSIGNED_INT&&(Te=i.RG32UI),ue===i.BYTE&&(Te=i.RG8I),ue===i.SHORT&&(Te=i.RG16I),ue===i.INT&&(Te=i.RG32I)),Q===i.RGB&&ue===i.UNSIGNED_INT_5_9_9_9_REV&&(Te=i.RGB9_E5),Q===i.RGBA){const Xe=we?Dg:Yn.getTransfer(de);ue===i.FLOAT&&(Te=i.RGBA32F),ue===i.HALF_FLOAT&&(Te=i.RGBA16F),ue===i.UNSIGNED_BYTE&&(Te=Xe===si?i.SRGB8_ALPHA8:i.RGBA8),ue===i.UNSIGNED_SHORT_4_4_4_4&&(Te=i.RGBA4),ue===i.UNSIGNED_SHORT_5_5_5_1&&(Te=i.RGB5_A1)}return(Te===i.R16F||Te===i.R32F||Te===i.RG16F||Te===i.RG32F||Te===i.RGBA16F||Te===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function O(J,Q){return x(J)===!0||J.isFramebufferTexture&&J.minFilter!==er&&J.minFilter!==Vi?Math.log2(Math.max(Q.width,Q.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?Q.mipmaps.length:1}function k(J){const Q=J.target;Q.removeEventListener("dispose",k),P(Q),Q.isVideoTexture&&f.delete(Q)}function M(J){const Q=J.target;Q.removeEventListener("dispose",M),A(Q)}function P(J){const Q=t.get(J);if(Q.__webglInit===void 0)return;const ue=J.source,de=g.get(ue);if(de){const we=de[Q.__cacheKey];we.usedTimes--,we.usedTimes===0&&D(J),Object.keys(de).length===0&&g.delete(ue)}t.remove(J)}function D(J){const Q=t.get(J);i.deleteTexture(Q.__webglTexture);const ue=J.source,de=g.get(ue);delete de[Q.__cacheKey],a.memory.textures--}function A(J){const Q=t.get(J);if(J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(Q.__webglFramebuffer[de]))for(let we=0;we<Q.__webglFramebuffer[de].length;we++)i.deleteFramebuffer(Q.__webglFramebuffer[de][we]);else i.deleteFramebuffer(Q.__webglFramebuffer[de]);Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer[de])}else{if(Array.isArray(Q.__webglFramebuffer))for(let de=0;de<Q.__webglFramebuffer.length;de++)i.deleteFramebuffer(Q.__webglFramebuffer[de]);else i.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let de=0;de<Q.__webglColorRenderbuffer.length;de++)Q.__webglColorRenderbuffer[de]&&i.deleteRenderbuffer(Q.__webglColorRenderbuffer[de]);Q.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const ue=J.textures;for(let de=0,we=ue.length;de<we;de++){const Te=t.get(ue[de]);Te.__webglTexture&&(i.deleteTexture(Te.__webglTexture),a.memory.textures--),t.remove(ue[de])}t.remove(J)}let R=0;function T(){R=0}function N(){const J=R;return J>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+r.maxTextures),R+=1,J}function L(J){const Q=[];return Q.push(J.wrapS),Q.push(J.wrapT),Q.push(J.wrapR||0),Q.push(J.magFilter),Q.push(J.minFilter),Q.push(J.anisotropy),Q.push(J.internalFormat),Q.push(J.format),Q.push(J.type),Q.push(J.generateMipmaps),Q.push(J.premultiplyAlpha),Q.push(J.flipY),Q.push(J.unpackAlignment),Q.push(J.colorSpace),Q.join()}function I(J,Q){const ue=t.get(J);if(J.isVideoTexture&&fe(J),J.isRenderTargetTexture===!1&&J.version>0&&ue.__version!==J.version){const de=J.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ae(ue,J,Q);return}}n.bindTexture(i.TEXTURE_2D,ue.__webglTexture,i.TEXTURE0+Q)}function $(J,Q){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Ae(ue,J,Q);return}n.bindTexture(i.TEXTURE_2D_ARRAY,ue.__webglTexture,i.TEXTURE0+Q)}function B(J,Q){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Ae(ue,J,Q);return}n.bindTexture(i.TEXTURE_3D,ue.__webglTexture,i.TEXTURE0+Q)}function U(J,Q){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Se(ue,J,Q);return}n.bindTexture(i.TEXTURE_CUBE_MAP,ue.__webglTexture,i.TEXTURE0+Q)}const Y={[Lc]:i.REPEAT,[ts]:i.CLAMP_TO_EDGE,[pf]:i.MIRRORED_REPEAT},Z={[er]:i.NEAREST,[wO]:i.NEAREST_MIPMAP_NEAREST,[Wh]:i.NEAREST_MIPMAP_LINEAR,[Vi]:i.LINEAR,[Yd]:i.LINEAR_MIPMAP_NEAREST,[Ho]:i.LINEAR_MIPMAP_LINEAR},ie={[HV]:i.NEVER,[KV]:i.ALWAYS,[GV]:i.LESS,[Hk]:i.LEQUAL,[YV]:i.EQUAL,[ZV]:i.GEQUAL,[jV]:i.GREATER,[qV]:i.NOTEQUAL};function ce(J,Q){if(Q.type===yo&&e.has("OES_texture_float_linear")===!1&&(Q.magFilter===Vi||Q.magFilter===Yd||Q.magFilter===Wh||Q.magFilter===Ho||Q.minFilter===Vi||Q.minFilter===Yd||Q.minFilter===Wh||Q.minFilter===Ho)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(J,i.TEXTURE_WRAP_S,Y[Q.wrapS]),i.texParameteri(J,i.TEXTURE_WRAP_T,Y[Q.wrapT]),(J===i.TEXTURE_3D||J===i.TEXTURE_2D_ARRAY)&&i.texParameteri(J,i.TEXTURE_WRAP_R,Y[Q.wrapR]),i.texParameteri(J,i.TEXTURE_MAG_FILTER,Z[Q.magFilter]),i.texParameteri(J,i.TEXTURE_MIN_FILTER,Z[Q.minFilter]),Q.compareFunction&&(i.texParameteri(J,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(J,i.TEXTURE_COMPARE_FUNC,ie[Q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===er||Q.minFilter!==Wh&&Q.minFilter!==Ho||Q.type===yo&&e.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||t.get(Q).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");i.texParameterf(J,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,r.getMaxAnisotropy())),t.get(Q).__currentAnisotropy=Q.anisotropy}}}function ge(J,Q){let ue=!1;J.__webglInit===void 0&&(J.__webglInit=!0,Q.addEventListener("dispose",k));const de=Q.source;let we=g.get(de);we===void 0&&(we={},g.set(de,we));const Te=L(Q);if(Te!==J.__cacheKey){we[Te]===void 0&&(we[Te]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,ue=!0),we[Te].usedTimes++;const Xe=we[J.__cacheKey];Xe!==void 0&&(we[J.__cacheKey].usedTimes--,Xe.usedTimes===0&&D(Q)),J.__cacheKey=Te,J.__webglTexture=we[Te].texture}return ue}function Ae(J,Q,ue){let de=i.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(de=i.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(de=i.TEXTURE_3D);const we=ge(J,Q),Te=Q.source;n.bindTexture(de,J.__webglTexture,i.TEXTURE0+ue);const Xe=t.get(Te);if(Te.version!==Xe.__version||we===!0){n.activeTexture(i.TEXTURE0+ue);const Ve=Yn.getPrimaries(Yn.workingColorSpace),ze=Q.colorSpace===sl?null:Yn.getPrimaries(Q.colorSpace),rt=Q.colorSpace===sl||Ve===ze?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,rt);let Ge=w(Q.image,!1,r.maxTextureSize);Ge=be(Q,Ge);const it=s.convert(Q.format,Q.colorSpace),kt=s.convert(Q.type);let Tt=_(Q.internalFormat,it,kt,Q.colorSpace,Q.isVideoTexture);ce(de,Q);let ut;const Ut=Q.mipmaps,sn=Q.isVideoTexture!==!0,_e=Xe.__version===void 0||we===!0,Le=Te.dataReady,me=O(Q,Ge);if(Q.isDepthTexture)Tt=i.DEPTH_COMPONENT16,Q.type===yo?Tt=i.DEPTH_COMPONENT32F:Q.type===mu?Tt=i.DEPTH_COMPONENT24:Q.type===Ff&&(Tt=i.DEPTH24_STENCIL8),_e&&(sn?n.texStorage2D(i.TEXTURE_2D,1,Tt,Ge.width,Ge.height):n.texImage2D(i.TEXTURE_2D,0,Tt,Ge.width,Ge.height,0,it,kt,null));else if(Q.isDataTexture)if(Ut.length>0){sn&&_e&&n.texStorage2D(i.TEXTURE_2D,me,Tt,Ut[0].width,Ut[0].height);for(let Be=0,Fe=Ut.length;Be<Fe;Be++)ut=Ut[Be],sn?Le&&n.texSubImage2D(i.TEXTURE_2D,Be,0,0,ut.width,ut.height,it,kt,ut.data):n.texImage2D(i.TEXTURE_2D,Be,Tt,ut.width,ut.height,0,it,kt,ut.data);Q.generateMipmaps=!1}else sn?(_e&&n.texStorage2D(i.TEXTURE_2D,me,Tt,Ge.width,Ge.height),Le&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,Ge.width,Ge.height,it,kt,Ge.data)):n.texImage2D(i.TEXTURE_2D,0,Tt,Ge.width,Ge.height,0,it,kt,Ge.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){sn&&_e&&n.texStorage3D(i.TEXTURE_2D_ARRAY,me,Tt,Ut[0].width,Ut[0].height,Ge.depth);for(let Be=0,Fe=Ut.length;Be<Fe;Be++)ut=Ut[Be],Q.format!==ks?it!==null?sn?Le&&n.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Be,0,0,0,ut.width,ut.height,Ge.depth,it,ut.data,0,0):n.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Be,Tt,ut.width,ut.height,Ge.depth,0,ut.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):sn?Le&&n.texSubImage3D(i.TEXTURE_2D_ARRAY,Be,0,0,0,ut.width,ut.height,Ge.depth,it,kt,ut.data):n.texImage3D(i.TEXTURE_2D_ARRAY,Be,Tt,ut.width,ut.height,Ge.depth,0,it,kt,ut.data)}else{sn&&_e&&n.texStorage2D(i.TEXTURE_2D,me,Tt,Ut[0].width,Ut[0].height);for(let Be=0,Fe=Ut.length;Be<Fe;Be++)ut=Ut[Be],Q.format!==ks?it!==null?sn?Le&&n.compressedTexSubImage2D(i.TEXTURE_2D,Be,0,0,ut.width,ut.height,it,ut.data):n.compressedTexImage2D(i.TEXTURE_2D,Be,Tt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):sn?Le&&n.texSubImage2D(i.TEXTURE_2D,Be,0,0,ut.width,ut.height,it,kt,ut.data):n.texImage2D(i.TEXTURE_2D,Be,Tt,ut.width,ut.height,0,it,kt,ut.data)}else if(Q.isDataArrayTexture)sn?(_e&&n.texStorage3D(i.TEXTURE_2D_ARRAY,me,Tt,Ge.width,Ge.height,Ge.depth),Le&&n.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,it,kt,Ge.data)):n.texImage3D(i.TEXTURE_2D_ARRAY,0,Tt,Ge.width,Ge.height,Ge.depth,0,it,kt,Ge.data);else if(Q.isData3DTexture)sn?(_e&&n.texStorage3D(i.TEXTURE_3D,me,Tt,Ge.width,Ge.height,Ge.depth),Le&&n.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,it,kt,Ge.data)):n.texImage3D(i.TEXTURE_3D,0,Tt,Ge.width,Ge.height,Ge.depth,0,it,kt,Ge.data);else if(Q.isFramebufferTexture){if(_e)if(sn)n.texStorage2D(i.TEXTURE_2D,me,Tt,Ge.width,Ge.height);else{let Be=Ge.width,Fe=Ge.height;for(let tt=0;tt<me;tt++)n.texImage2D(i.TEXTURE_2D,tt,Tt,Be,Fe,0,it,kt,null),Be>>=1,Fe>>=1}}else if(Ut.length>0){if(sn&&_e){const Be=Me(Ut[0]);n.texStorage2D(i.TEXTURE_2D,me,Tt,Be.width,Be.height)}for(let Be=0,Fe=Ut.length;Be<Fe;Be++)ut=Ut[Be],sn?Le&&n.texSubImage2D(i.TEXTURE_2D,Be,0,0,it,kt,ut):n.texImage2D(i.TEXTURE_2D,Be,Tt,it,kt,ut);Q.generateMipmaps=!1}else if(sn){if(_e){const Be=Me(Ge);n.texStorage2D(i.TEXTURE_2D,me,Tt,Be.width,Be.height)}Le&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,it,kt,Ge)}else n.texImage2D(i.TEXTURE_2D,0,Tt,it,kt,Ge);x(Q)&&S(de),Xe.__version=Te.version,Q.onUpdate&&Q.onUpdate(Q)}J.__version=Q.version}function Se(J,Q,ue){if(Q.image.length!==6)return;const de=ge(J,Q),we=Q.source;n.bindTexture(i.TEXTURE_CUBE_MAP,J.__webglTexture,i.TEXTURE0+ue);const Te=t.get(we);if(we.version!==Te.__version||de===!0){n.activeTexture(i.TEXTURE0+ue);const Xe=Yn.getPrimaries(Yn.workingColorSpace),Ve=Q.colorSpace===sl?null:Yn.getPrimaries(Q.colorSpace),ze=Q.colorSpace===sl||Xe===Ve?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const rt=Q.isCompressedTexture||Q.image[0].isCompressedTexture,Ge=Q.image[0]&&Q.image[0].isDataTexture,it=[];for(let Fe=0;Fe<6;Fe++)!rt&&!Ge?it[Fe]=w(Q.image[Fe],!0,r.maxCubemapSize):it[Fe]=Ge?Q.image[Fe].image:Q.image[Fe],it[Fe]=be(Q,it[Fe]);const kt=it[0],Tt=s.convert(Q.format,Q.colorSpace),ut=s.convert(Q.type),Ut=_(Q.internalFormat,Tt,ut,Q.colorSpace),sn=Q.isVideoTexture!==!0,_e=Te.__version===void 0||de===!0,Le=we.dataReady;let me=O(Q,kt);ce(i.TEXTURE_CUBE_MAP,Q);let Be;if(rt){sn&&_e&&n.texStorage2D(i.TEXTURE_CUBE_MAP,me,Ut,kt.width,kt.height);for(let Fe=0;Fe<6;Fe++){Be=it[Fe].mipmaps;for(let tt=0;tt<Be.length;tt++){const dt=Be[tt];Q.format!==ks?Tt!==null?sn?Le&&n.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt,0,0,dt.width,dt.height,Tt,dt.data):n.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt,Ut,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):sn?Le&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt,0,0,dt.width,dt.height,Tt,ut,dt.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt,Ut,dt.width,dt.height,0,Tt,ut,dt.data)}}}else{if(Be=Q.mipmaps,sn&&_e){Be.length>0&&me++;const Fe=Me(it[0]);n.texStorage2D(i.TEXTURE_CUBE_MAP,me,Ut,Fe.width,Fe.height)}for(let Fe=0;Fe<6;Fe++)if(Ge){sn?Le&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,it[Fe].width,it[Fe].height,Tt,ut,it[Fe].data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Ut,it[Fe].width,it[Fe].height,0,Tt,ut,it[Fe].data);for(let tt=0;tt<Be.length;tt++){const wn=Be[tt].image[Fe].image;sn?Le&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt+1,0,0,wn.width,wn.height,Tt,ut,wn.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt+1,Ut,wn.width,wn.height,0,Tt,ut,wn.data)}}else{sn?Le&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,Tt,ut,it[Fe]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Ut,Tt,ut,it[Fe]);for(let tt=0;tt<Be.length;tt++){const dt=Be[tt];sn?Le&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt+1,0,0,Tt,ut,dt.image[Fe]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt+1,Ut,Tt,ut,dt.image[Fe])}}}x(Q)&&S(i.TEXTURE_CUBE_MAP),Te.__version=we.version,Q.onUpdate&&Q.onUpdate(Q)}J.__version=Q.version}function he(J,Q,ue,de,we,Te){const Xe=s.convert(ue.format,ue.colorSpace),Ve=s.convert(ue.type),ze=_(ue.internalFormat,Xe,Ve,ue.colorSpace);if(!t.get(Q).__hasExternalTextures){const Ge=Math.max(1,Q.width>>Te),it=Math.max(1,Q.height>>Te);we===i.TEXTURE_3D||we===i.TEXTURE_2D_ARRAY?n.texImage3D(we,Te,ze,Ge,it,Q.depth,0,Xe,Ve,null):n.texImage2D(we,Te,ze,Ge,it,0,Xe,Ve,null)}n.bindFramebuffer(i.FRAMEBUFFER,J),le(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,de,we,t.get(ue).__webglTexture,0,q(Q)):(we===i.TEXTURE_2D||we>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&we<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,de,we,t.get(ue).__webglTexture,Te),n.bindFramebuffer(i.FRAMEBUFFER,null)}function Ce(J,Q,ue){if(i.bindRenderbuffer(i.RENDERBUFFER,J),Q.depthBuffer&&!Q.stencilBuffer){let de=i.DEPTH_COMPONENT24;if(ue||le(Q)){const we=Q.depthTexture;we&&we.isDepthTexture&&(we.type===yo?de=i.DEPTH_COMPONENT32F:we.type===mu&&(de=i.DEPTH_COMPONENT24));const Te=q(Q);le(Q)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Te,de,Q.width,Q.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Te,de,Q.width,Q.height)}else i.renderbufferStorage(i.RENDERBUFFER,de,Q.width,Q.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,J)}else if(Q.depthBuffer&&Q.stencilBuffer){const de=q(Q);ue&&le(Q)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,de,i.DEPTH24_STENCIL8,Q.width,Q.height):le(Q)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,de,i.DEPTH24_STENCIL8,Q.width,Q.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,Q.width,Q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,J)}else{const de=Q.textures;for(let we=0;we<de.length;we++){const Te=de[we],Xe=s.convert(Te.format,Te.colorSpace),Ve=s.convert(Te.type),ze=_(Te.internalFormat,Xe,Ve,Te.colorSpace),rt=q(Q);ue&&le(Q)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,rt,ze,Q.width,Q.height):le(Q)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,rt,ze,Q.width,Q.height):i.renderbufferStorage(i.RENDERBUFFER,ze,Q.width,Q.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function pe(J,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(i.FRAMEBUFFER,J),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(Q.depthTexture).__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),I(Q.depthTexture,0);const de=t.get(Q.depthTexture).__webglTexture,we=q(Q);if(Q.depthTexture.format===nu)le(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,de,0,we):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,de,0);else if(Q.depthTexture.format===mf)le(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,de,0,we):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,de,0);else throw new Error("Unknown depthTexture format")}function j(J){const Q=t.get(J),ue=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!Q.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");pe(Q.__webglFramebuffer,J)}else if(ue){Q.__webglDepthbuffer=[];for(let de=0;de<6;de++)n.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer[de]),Q.__webglDepthbuffer[de]=i.createRenderbuffer(),Ce(Q.__webglDepthbuffer[de],J,!1)}else n.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer=i.createRenderbuffer(),Ce(Q.__webglDepthbuffer,J,!1);n.bindFramebuffer(i.FRAMEBUFFER,null)}function K(J,Q,ue){const de=t.get(J);Q!==void 0&&he(de.__webglFramebuffer,J,J.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ue!==void 0&&j(J)}function X(J){const Q=J.texture,ue=t.get(J),de=t.get(Q);J.addEventListener("dispose",M);const we=J.textures,Te=J.isWebGLCubeRenderTarget===!0,Xe=we.length>1;if(Xe||(de.__webglTexture===void 0&&(de.__webglTexture=i.createTexture()),de.__version=Q.version,a.memory.textures++),Te){ue.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(Q.mipmaps&&Q.mipmaps.length>0){ue.__webglFramebuffer[Ve]=[];for(let ze=0;ze<Q.mipmaps.length;ze++)ue.__webglFramebuffer[Ve][ze]=i.createFramebuffer()}else ue.__webglFramebuffer[Ve]=i.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){ue.__webglFramebuffer=[];for(let Ve=0;Ve<Q.mipmaps.length;Ve++)ue.__webglFramebuffer[Ve]=i.createFramebuffer()}else ue.__webglFramebuffer=i.createFramebuffer();if(Xe)for(let Ve=0,ze=we.length;Ve<ze;Ve++){const rt=t.get(we[Ve]);rt.__webglTexture===void 0&&(rt.__webglTexture=i.createTexture(),a.memory.textures++)}if(J.samples>0&&le(J)===!1){ue.__webglMultisampledFramebuffer=i.createFramebuffer(),ue.__webglColorRenderbuffer=[],n.bindFramebuffer(i.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Ve=0;Ve<we.length;Ve++){const ze=we[Ve];ue.__webglColorRenderbuffer[Ve]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ue.__webglColorRenderbuffer[Ve]);const rt=s.convert(ze.format,ze.colorSpace),Ge=s.convert(ze.type),it=_(ze.internalFormat,rt,Ge,ze.colorSpace,J.isXRRenderTarget===!0),kt=q(J);i.renderbufferStorageMultisample(i.RENDERBUFFER,kt,it,J.width,J.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ve,i.RENDERBUFFER,ue.__webglColorRenderbuffer[Ve])}i.bindRenderbuffer(i.RENDERBUFFER,null),J.depthBuffer&&(ue.__webglDepthRenderbuffer=i.createRenderbuffer(),Ce(ue.__webglDepthRenderbuffer,J,!0)),n.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Te){n.bindTexture(i.TEXTURE_CUBE_MAP,de.__webglTexture),ce(i.TEXTURE_CUBE_MAP,Q);for(let Ve=0;Ve<6;Ve++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let ze=0;ze<Q.mipmaps.length;ze++)he(ue.__webglFramebuffer[Ve][ze],J,Q,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,ze);else he(ue.__webglFramebuffer[Ve],J,Q,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);x(Q)&&S(i.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Xe){for(let Ve=0,ze=we.length;Ve<ze;Ve++){const rt=we[Ve],Ge=t.get(rt);n.bindTexture(i.TEXTURE_2D,Ge.__webglTexture),ce(i.TEXTURE_2D,rt),he(ue.__webglFramebuffer,J,rt,i.COLOR_ATTACHMENT0+Ve,i.TEXTURE_2D,0),x(rt)&&S(i.TEXTURE_2D)}n.unbindTexture()}else{let Ve=i.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(Ve=J.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),n.bindTexture(Ve,de.__webglTexture),ce(Ve,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let ze=0;ze<Q.mipmaps.length;ze++)he(ue.__webglFramebuffer[ze],J,Q,i.COLOR_ATTACHMENT0,Ve,ze);else he(ue.__webglFramebuffer,J,Q,i.COLOR_ATTACHMENT0,Ve,0);x(Q)&&S(Ve),n.unbindTexture()}J.depthBuffer&&j(J)}function F(J){const Q=J.textures;for(let ue=0,de=Q.length;ue<de;ue++){const we=Q[ue];if(x(we)){const Te=J.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Xe=t.get(we).__webglTexture;n.bindTexture(Te,Xe),S(Te),n.unbindTexture()}}}const te=[],re=[];function H(J){if(J.samples>0){if(le(J)===!1){const Q=J.textures,ue=J.width,de=J.height;let we=i.COLOR_BUFFER_BIT;const Te=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Xe=t.get(J),Ve=Q.length>1;if(Ve)for(let ze=0;ze<Q.length;ze++)n.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.RENDERBUFFER,null),n.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.TEXTURE_2D,null,0);n.bindFramebuffer(i.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let ze=0;ze<Q.length;ze++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(we|=i.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(we|=i.STENCIL_BUFFER_BIT)),Ve){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Xe.__webglColorRenderbuffer[ze]);const rt=t.get(Q[ze]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,rt,0)}i.blitFramebuffer(0,0,ue,de,0,0,ue,de,we,i.NEAREST),h===!0&&(te.length=0,re.length=0,te.push(i.COLOR_ATTACHMENT0+ze),J.depthBuffer&&J.resolveDepthBuffer===!1&&(te.push(Te),re.push(Te),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,re)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,te))}if(n.bindFramebuffer(i.READ_FRAMEBUFFER,null),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ve)for(let ze=0;ze<Q.length;ze++){n.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.RENDERBUFFER,Xe.__webglColorRenderbuffer[ze]);const rt=t.get(Q[ze]).__webglTexture;n.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.TEXTURE_2D,rt,0)}n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&h){const Q=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Q])}}}function q(J){return Math.min(r.maxSamples,J.samples)}function le(J){const Q=t.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function fe(J){const Q=a.render.frame;f.get(J)!==Q&&(f.set(J,Q),J.update())}function be(J,Q){const ue=J.colorSpace,de=J.format,we=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||ue!==El&&ue!==sl&&(Yn.getTransfer(ue)===si?(de!==ks||we!==qo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),Q}function Me(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(u.width=J.naturalWidth||J.width,u.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(u.width=J.displayWidth,u.height=J.displayHeight):(u.width=J.width,u.height=J.height),u}this.allocateTextureUnit=N,this.resetTextureUnits=T,this.setTexture2D=I,this.setTexture2DArray=$,this.setTexture3D=B,this.setTextureCube=U,this.rebindTextures=K,this.setupRenderTarget=X,this.updateRenderTargetMipmap=F,this.updateMultisampleRenderTarget=H,this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=he,this.useMultisampledRTT=le}function pL(i,e){function n(t,r=sl){let s;const a=Yn.getTransfer(r);if(t===qo)return i.UNSIGNED_BYTE;if(t===Bk)return i.UNSIGNED_SHORT_4_4_4_4;if(t===Uk)return i.UNSIGNED_SHORT_5_5_5_1;if(t===IV)return i.UNSIGNED_INT_5_9_9_9_REV;if(t===AV)return i.BYTE;if(t===RV)return i.SHORT;if(t===Vk)return i.UNSIGNED_SHORT;if(t===Lk)return i.INT;if(t===mu)return i.UNSIGNED_INT;if(t===yo)return i.FLOAT;if(t===zf)return i.HALF_FLOAT;if(t===DV)return i.ALPHA;if(t===NV)return i.RGB;if(t===ks)return i.RGBA;if(t===$V)return i.LUMINANCE;if(t===VV)return i.LUMINANCE_ALPHA;if(t===nu)return i.DEPTH_COMPONENT;if(t===mf)return i.DEPTH_STENCIL;if(t===zk)return i.RED;if(t===Fk)return i.RED_INTEGER;if(t===LV)return i.RG;if(t===Xk)return i.RG_INTEGER;if(t===Wk)return i.RGBA_INTEGER;if(t===R1||t===I1||t===D1||t===N1)if(a===si)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(t===R1)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===I1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===D1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===N1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(t===R1)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===I1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===D1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===N1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(t===cC||t===hC||t===uC||t===dC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(t===cC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===hC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===uC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===dC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(t===fC||t===pC||t===mC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(t===fC||t===pC)return a===si?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(t===mC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(t===gC||t===vC||t===yC||t===bC||t===OC||t===xC||t===wC||t===_C||t===SC||t===CC||t===kC||t===TC||t===MC||t===EC)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(t===gC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(t===vC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(t===yC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(t===bC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(t===OC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(t===xC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(t===wC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(t===_C)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(t===SC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(t===CC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(t===kC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(t===TC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(t===MC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(t===EC)return a===si?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(t===$1||t===PC||t===AC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(t===$1)return a===si?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(t===PC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(t===AC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(t===BV||t===RC||t===IC||t===DC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(t===$1)return s.COMPRESSED_RED_RGTC1_EXT;if(t===RC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(t===IC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(t===DC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return t===Ff?i.UNSIGNED_INT_24_8:i[t]!==void 0?i[t]:null}return{convert:n}}class mL extends qn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let al=class extends An{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Vhe={type:"move"};class b_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new al,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new al,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new al,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const t of e.hand.values())this._getHandJoint(n,t)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,t){let r=null,s=null,a=null;const l=this._targetRay,h=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const w of e.hand.values()){const x=n.getJointPose(w,t),S=this._getHandJoint(u,w);x!==null&&(S.matrix.fromArray(x.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=x.radius),S.visible=x!==null}const f=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],g=f.position.distanceTo(p.position),v=.02,y=.005;u.inputState.pinching&&g>v+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=v-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,t),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1));l!==null&&(r=n.getPose(e.targetRaySpace,t),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(Vhe)))}return l!==null&&(l.visible=r!==null),h!==null&&(h.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const t=new al;t.matrixAutoUpdate=!1,t.visible=!1,e.joints[n.jointName]=t,e.add(t)}return e.joints[n.jointName]}}const Lhe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Bhe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Uhe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,t){if(this.texture===null){const r=new hi,s=e.properties.get(r);s.__webglTexture=n.texture,(n.depthNear!=t.depthNear||n.depthFar!=t.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=r}}render(e,n){if(this.texture!==null){if(this.mesh===null){const t=n.cameras[0].viewport,r=new os({vertexShader:Lhe,fragmentShader:Bhe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Jn(new Kc(20,20),r)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class zhe extends Pa{constructor(e,n){super();const t=this;let r=null,s=1,a=null,l="local-floor",h=1,u=null,f=null,p=null,g=null,v=null,y=null;const w=new Uhe,x=n.getContextAttributes();let S=null,_=null;const O=[],k=[],M=new Qe;let P=null;const D=new qn;D.layers.enable(1),D.viewport=new yn;const A=new qn;A.layers.enable(2),A.viewport=new yn;const R=[D,A],T=new mL;T.layers.enable(1),T.layers.enable(2);let N=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let Ce=O[he];return Ce===void 0&&(Ce=new b_,O[he]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(he){let Ce=O[he];return Ce===void 0&&(Ce=new b_,O[he]=Ce),Ce.getGripSpace()},this.getHand=function(he){let Ce=O[he];return Ce===void 0&&(Ce=new b_,O[he]=Ce),Ce.getHandSpace()};function I(he){const Ce=k.indexOf(he.inputSource);if(Ce===-1)return;const pe=O[Ce];pe!==void 0&&(pe.update(he.inputSource,he.frame,u||a),pe.dispatchEvent({type:he.type,data:he.inputSource}))}function $(){r.removeEventListener("select",I),r.removeEventListener("selectstart",I),r.removeEventListener("selectend",I),r.removeEventListener("squeeze",I),r.removeEventListener("squeezestart",I),r.removeEventListener("squeezeend",I),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",B);for(let he=0;he<O.length;he++){const Ce=k[he];Ce!==null&&(k[he]=null,O[he].disconnect(Ce))}N=null,L=null,w.reset(),e.setRenderTarget(S),v=null,g=null,p=null,r=null,_=null,Se.stop(),t.isPresenting=!1,e.setPixelRatio(P),e.setSize(M.width,M.height,!1),t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){l=he,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(he){u=he},this.getBaseLayer=function(){return g!==null?g:v},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(he){if(r=he,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",I),r.addEventListener("selectstart",I),r.addEventListener("selectend",I),r.addEventListener("squeeze",I),r.addEventListener("squeezestart",I),r.addEventListener("squeezeend",I),r.addEventListener("end",$),r.addEventListener("inputsourceschange",B),x.xrCompatible!==!0&&await n.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(M),r.renderState.layers===void 0){const Ce={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,n,Ce),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),_=new Co(v.framebufferWidth,v.framebufferHeight,{format:ks,type:qo,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let Ce=null,pe=null,j=null;x.depth&&(j=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Ce=x.stencil?mf:nu,pe=x.stencil?Ff:mu);const K={colorFormat:n.RGBA8,depthFormat:j,scaleFactor:s};p=new XRWebGLBinding(r,n),g=p.createProjectionLayer(K),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),_=new Co(g.textureWidth,g.textureHeight,{format:ks,type:qo,depthTexture:new Zk(g.textureWidth,g.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,Ce),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(h),u=null,a=await r.requestReferenceSpace(l),Se.setContext(r),Se.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function B(he){for(let Ce=0;Ce<he.removed.length;Ce++){const pe=he.removed[Ce],j=k.indexOf(pe);j>=0&&(k[j]=null,O[j].disconnect(pe))}for(let Ce=0;Ce<he.added.length;Ce++){const pe=he.added[Ce];let j=k.indexOf(pe);if(j===-1){for(let X=0;X<O.length;X++)if(X>=k.length){k.push(pe),j=X;break}else if(k[X]===null){k[X]=pe,j=X;break}if(j===-1)break}const K=O[j];K&&K.connect(pe)}}const U=new ne,Y=new ne;function Z(he,Ce,pe){U.setFromMatrixPosition(Ce.matrixWorld),Y.setFromMatrixPosition(pe.matrixWorld);const j=U.distanceTo(Y),K=Ce.projectionMatrix.elements,X=pe.projectionMatrix.elements,F=K[14]/(K[10]-1),te=K[14]/(K[10]+1),re=(K[9]+1)/K[5],H=(K[9]-1)/K[5],q=(K[8]-1)/K[0],le=(X[8]+1)/X[0],fe=F*q,be=F*le,Me=j/(-q+le),J=Me*-q;Ce.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(J),he.translateZ(Me),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert();const Q=F+Me,ue=te+Me,de=fe-J,we=be+(j-J),Te=re*te/ue*Q,Xe=H*te/ue*Q;he.projectionMatrix.makePerspective(de,we,Te,Xe,Q,ue),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}function ie(he,Ce){Ce===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(Ce.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(r===null)return;w.texture!==null&&(he.near=w.depthNear,he.far=w.depthFar),T.near=A.near=D.near=he.near,T.far=A.far=D.far=he.far,(N!==T.near||L!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),N=T.near,L=T.far,D.near=N,D.far=L,A.near=N,A.far=L,D.updateProjectionMatrix(),A.updateProjectionMatrix(),he.updateProjectionMatrix());const Ce=he.parent,pe=T.cameras;ie(T,Ce);for(let j=0;j<pe.length;j++)ie(pe[j],Ce);pe.length===2?Z(T,D,A):T.projectionMatrix.copy(D.projectionMatrix),ce(he,T,Ce)};function ce(he,Ce,pe){pe===null?he.matrix.copy(Ce.matrixWorld):(he.matrix.copy(pe.matrixWorld),he.matrix.invert(),he.matrix.multiply(Ce.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(Ce.projectionMatrix),he.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=yf*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(g===null&&v===null))return h},this.setFoveation=function(he){h=he,g!==null&&(g.fixedFoveation=he),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=he)},this.hasDepthSensing=function(){return w.texture!==null};let ge=null;function Ae(he,Ce){if(f=Ce.getViewerPose(u||a),y=Ce,f!==null){const pe=f.views;v!==null&&(e.setRenderTargetFramebuffer(_,v.framebuffer),e.setRenderTarget(_));let j=!1;pe.length!==T.cameras.length&&(T.cameras.length=0,j=!0);for(let X=0;X<pe.length;X++){const F=pe[X];let te=null;if(v!==null)te=v.getViewport(F);else{const H=p.getViewSubImage(g,F);te=H.viewport,X===0&&(e.setRenderTargetTextures(_,H.colorTexture,g.ignoreDepthValues?void 0:H.depthStencilTexture),e.setRenderTarget(_))}let re=R[X];re===void 0&&(re=new qn,re.layers.enable(X),re.viewport=new yn,R[X]=re),re.matrix.fromArray(F.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(F.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(te.x,te.y,te.width,te.height),X===0&&(T.matrix.copy(re.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),j===!0&&T.cameras.push(re)}const K=r.enabledFeatures;if(K&&K.includes("depth-sensing")){const X=p.getDepthInformation(pe[0]);X&&X.isValid&&X.texture&&w.init(e,X,r.renderState)}}for(let pe=0;pe<O.length;pe++){const j=k[pe],K=O[pe];j!==null&&K!==void 0&&K.update(j,Ce,u||a)}w.render(e,T),ge&&ge(he,Ce),Ce.detectedPlanes&&t.dispatchEvent({type:"planesdetected",data:Ce}),y=null}const Se=new lL;Se.setAnimationLoop(Ae),this.setAnimationLoop=function(he){ge=he},this.dispose=function(){}}}const Ch=new tr,Fhe=new pt;function Xhe(i,e){function n(x,S){x.matrixAutoUpdate===!0&&x.updateMatrix(),S.value.copy(x.matrix)}function t(x,S){S.color.getRGB(x.fogColor.value,sL(i)),S.isFog?(x.fogNear.value=S.near,x.fogFar.value=S.far):S.isFogExp2&&(x.fogDensity.value=S.density)}function r(x,S,_,O,k){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(x,S):S.isMeshToonMaterial?(s(x,S),p(x,S)):S.isMeshPhongMaterial?(s(x,S),f(x,S)):S.isMeshStandardMaterial?(s(x,S),g(x,S),S.isMeshPhysicalMaterial&&v(x,S,k)):S.isMeshMatcapMaterial?(s(x,S),y(x,S)):S.isMeshDepthMaterial?s(x,S):S.isMeshDistanceMaterial?(s(x,S),w(x,S)):S.isMeshNormalMaterial?s(x,S):S.isLineBasicMaterial?(a(x,S),S.isLineDashedMaterial&&l(x,S)):S.isPointsMaterial?h(x,S,_,O):S.isSpriteMaterial?u(x,S):S.isShadowMaterial?(x.color.value.copy(S.color),x.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(x,S){x.opacity.value=S.opacity,S.color&&x.diffuse.value.copy(S.color),S.emissive&&x.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(x.map.value=S.map,n(S.map,x.mapTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,n(S.alphaMap,x.alphaMapTransform)),S.bumpMap&&(x.bumpMap.value=S.bumpMap,n(S.bumpMap,x.bumpMapTransform),x.bumpScale.value=S.bumpScale,S.side===Vr&&(x.bumpScale.value*=-1)),S.normalMap&&(x.normalMap.value=S.normalMap,n(S.normalMap,x.normalMapTransform),x.normalScale.value.copy(S.normalScale),S.side===Vr&&x.normalScale.value.negate()),S.displacementMap&&(x.displacementMap.value=S.displacementMap,n(S.displacementMap,x.displacementMapTransform),x.displacementScale.value=S.displacementScale,x.displacementBias.value=S.displacementBias),S.emissiveMap&&(x.emissiveMap.value=S.emissiveMap,n(S.emissiveMap,x.emissiveMapTransform)),S.specularMap&&(x.specularMap.value=S.specularMap,n(S.specularMap,x.specularMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest);const _=e.get(S),O=_.envMap,k=_.envMapRotation;if(O&&(x.envMap.value=O,Ch.copy(k),Ch.x*=-1,Ch.y*=-1,Ch.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(Ch.y*=-1,Ch.z*=-1),x.envMapRotation.value.setFromMatrix4(Fhe.makeRotationFromEuler(Ch)),x.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=S.reflectivity,x.ior.value=S.ior,x.refractionRatio.value=S.refractionRatio),S.lightMap){x.lightMap.value=S.lightMap;const M=i._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=S.lightMapIntensity*M,n(S.lightMap,x.lightMapTransform)}S.aoMap&&(x.aoMap.value=S.aoMap,x.aoMapIntensity.value=S.aoMapIntensity,n(S.aoMap,x.aoMapTransform))}function a(x,S){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,S.map&&(x.map.value=S.map,n(S.map,x.mapTransform))}function l(x,S){x.dashSize.value=S.dashSize,x.totalSize.value=S.dashSize+S.gapSize,x.scale.value=S.scale}function h(x,S,_,O){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,x.size.value=S.size*_,x.scale.value=O*.5,S.map&&(x.map.value=S.map,n(S.map,x.uvTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,n(S.alphaMap,x.alphaMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest)}function u(x,S){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,x.rotation.value=S.rotation,S.map&&(x.map.value=S.map,n(S.map,x.mapTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,n(S.alphaMap,x.alphaMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest)}function f(x,S){x.specular.value.copy(S.specular),x.shininess.value=Math.max(S.shininess,1e-4)}function p(x,S){S.gradientMap&&(x.gradientMap.value=S.gradientMap)}function g(x,S){x.metalness.value=S.metalness,S.metalnessMap&&(x.metalnessMap.value=S.metalnessMap,n(S.metalnessMap,x.metalnessMapTransform)),x.roughness.value=S.roughness,S.roughnessMap&&(x.roughnessMap.value=S.roughnessMap,n(S.roughnessMap,x.roughnessMapTransform)),S.envMap&&(x.envMapIntensity.value=S.envMapIntensity)}function v(x,S,_){x.ior.value=S.ior,S.sheen>0&&(x.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),x.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(x.sheenColorMap.value=S.sheenColorMap,n(S.sheenColorMap,x.sheenColorMapTransform)),S.sheenRoughnessMap&&(x.sheenRoughnessMap.value=S.sheenRoughnessMap,n(S.sheenRoughnessMap,x.sheenRoughnessMapTransform))),S.clearcoat>0&&(x.clearcoat.value=S.clearcoat,x.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(x.clearcoatMap.value=S.clearcoatMap,n(S.clearcoatMap,x.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,n(S.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(x.clearcoatNormalMap.value=S.clearcoatNormalMap,n(S.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Vr&&x.clearcoatNormalScale.value.negate())),S.dispersion>0&&(x.dispersion.value=S.dispersion),S.iridescence>0&&(x.iridescence.value=S.iridescence,x.iridescenceIOR.value=S.iridescenceIOR,x.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(x.iridescenceMap.value=S.iridescenceMap,n(S.iridescenceMap,x.iridescenceMapTransform)),S.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=S.iridescenceThicknessMap,n(S.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),S.transmission>0&&(x.transmission.value=S.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),S.transmissionMap&&(x.transmissionMap.value=S.transmissionMap,n(S.transmissionMap,x.transmissionMapTransform)),x.thickness.value=S.thickness,S.thicknessMap&&(x.thicknessMap.value=S.thicknessMap,n(S.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=S.attenuationDistance,x.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(x.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(x.anisotropyMap.value=S.anisotropyMap,n(S.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=S.specularIntensity,x.specularColor.value.copy(S.specularColor),S.specularColorMap&&(x.specularColorMap.value=S.specularColorMap,n(S.specularColorMap,x.specularColorMapTransform)),S.specularIntensityMap&&(x.specularIntensityMap.value=S.specularIntensityMap,n(S.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,S){S.matcap&&(x.matcap.value=S.matcap)}function w(x,S){const _=e.get(S).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function Whe(i,e,n,t){let r={},s={},a=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function h(_,O){const k=O.program;t.uniformBlockBinding(_,k)}function u(_,O){let k=r[_.id];k===void 0&&(y(_),k=f(_),r[_.id]=k,_.addEventListener("dispose",x));const M=O.program;t.updateUBOMapping(_,M);const P=e.render.frame;s[_.id]!==P&&(g(_),s[_.id]=P)}function f(_){const O=p();_.__bindingPointIndex=O;const k=i.createBuffer(),M=_.__size,P=_.usage;return i.bindBuffer(i.UNIFORM_BUFFER,k),i.bufferData(i.UNIFORM_BUFFER,M,P),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,O,k),k}function p(){for(let _=0;_<l;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(_){const O=r[_.id],k=_.uniforms,M=_.__cache;i.bindBuffer(i.UNIFORM_BUFFER,O);for(let P=0,D=k.length;P<D;P++){const A=Array.isArray(k[P])?k[P]:[k[P]];for(let R=0,T=A.length;R<T;R++){const N=A[R];if(v(N,P,R,M)===!0){const L=N.__offset,I=Array.isArray(N.value)?N.value:[N.value];let $=0;for(let B=0;B<I.length;B++){const U=I[B],Y=w(U);typeof U=="number"||typeof U=="boolean"?(N.__data[0]=U,i.bufferSubData(i.UNIFORM_BUFFER,L+$,N.__data)):U.isMatrix3?(N.__data[0]=U.elements[0],N.__data[1]=U.elements[1],N.__data[2]=U.elements[2],N.__data[3]=0,N.__data[4]=U.elements[3],N.__data[5]=U.elements[4],N.__data[6]=U.elements[5],N.__data[7]=0,N.__data[8]=U.elements[6],N.__data[9]=U.elements[7],N.__data[10]=U.elements[8],N.__data[11]=0):(U.toArray(N.__data,$),$+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,L,N.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function v(_,O,k,M){const P=_.value,D=O+"_"+k;if(M[D]===void 0)return typeof P=="number"||typeof P=="boolean"?M[D]=P:M[D]=P.clone(),!0;{const A=M[D];if(typeof P=="number"||typeof P=="boolean"){if(A!==P)return M[D]=P,!0}else if(A.equals(P)===!1)return A.copy(P),!0}return!1}function y(_){const O=_.uniforms;let k=0;const M=16;for(let D=0,A=O.length;D<A;D++){const R=Array.isArray(O[D])?O[D]:[O[D]];for(let T=0,N=R.length;T<N;T++){const L=R[T],I=Array.isArray(L.value)?L.value:[L.value];for(let $=0,B=I.length;$<B;$++){const U=I[$],Y=w(U),Z=k%M;Z!==0&&M-Z<Y.boundary&&(k+=M-Z),L.__data=new Float32Array(Y.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=k,k+=Y.storage}}}const P=k%M;return P>0&&(k+=M-P),_.__size=k,_.__cache={},this}function w(_){const O={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(O.boundary=4,O.storage=4):_.isVector2?(O.boundary=8,O.storage=8):_.isVector3||_.isColor?(O.boundary=16,O.storage=12):_.isVector4?(O.boundary=16,O.storage=16):_.isMatrix3?(O.boundary=48,O.storage=48):_.isMatrix4?(O.boundary=64,O.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),O}function x(_){const O=_.target;O.removeEventListener("dispose",x);const k=a.indexOf(O.__bindingPointIndex);a.splice(k,1),i.deleteBuffer(r[O.id]),delete r[O.id],delete s[O.id]}function S(){for(const _ in r)i.deleteBuffer(r[_]);a=[],r={},s={}}return{bind:h,update:u,dispose:S}}class ug{constructor(e={}){const{canvas:n=eL(),context:t=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let g;if(t!==null){if(typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=t.getContextAttributes().alpha}else g=a;const v=new Uint32Array(4),y=new Int32Array(4);let w=null,x=null;const S=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ys,this._useLegacyLights=!1,this.toneMapping=pl,this.toneMappingExposure=1;const O=this;let k=!1,M=0,P=0,D=null,A=-1,R=null;const T=new yn,N=new yn;let L=null;const I=new nt(0);let $=0,B=n.width,U=n.height,Y=1,Z=null,ie=null;const ce=new yn(0,0,B,U),ge=new yn(0,0,B,U);let Ae=!1;const Se=new k0;let he=!1,Ce=!1;const pe=new pt,j=new ne,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return D===null?Y:1}let F=t;function te(oe,Ee){return n.getContext(oe,Ee)}try{const oe={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:h,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Bf}`),n.addEventListener("webglcontextlost",me,!1),n.addEventListener("webglcontextrestored",Be,!1),n.addEventListener("webglcontextcreationerror",Fe,!1),F===null){const Ee="webgl2";if(F=te(Ee,oe),F===null)throw te(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(oe){throw console.error("THREE.WebGLRenderer: "+oe.message),oe}let re,H,q,le,fe,be,Me,J,Q,ue,de,we,Te,Xe,Ve,ze,rt,Ge,it,kt,Tt,ut,Ut,sn;function _e(){re=new ice(F),re.init(),ut=new pL(F,re),H=new Zle(F,re,e,ut),q=new Nhe(F),le=new oce(F),fe=new _he,be=new $he(F,re,q,fe,H,ut,le),Me=new Jle(O),J=new nce(O),Q=new foe(F),Ut=new jle(F,Q),ue=new rce(F,Q,le,Ut),de=new lce(F,ue,Q,le),it=new ace(F,H,be),ze=new Kle(fe),we=new whe(O,Me,J,re,H,Ut,ze),Te=new Xhe(O,fe),Xe=new Che,Ve=new Ahe(re),Ge=new Yle(O,Me,J,q,de,g,h),rt=new Dhe(O,de,H),sn=new Whe(F,le,H,q),kt=new qle(F,re,le),Tt=new sce(F,re,le),le.programs=we.programs,O.capabilities=H,O.extensions=re,O.properties=fe,O.renderLists=Xe,O.shadowMap=rt,O.state=q,O.info=le}_e();const Le=new zhe(O,F);this.xr=Le,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){const oe=re.get("WEBGL_lose_context");oe&&oe.loseContext()},this.forceContextRestore=function(){const oe=re.get("WEBGL_lose_context");oe&&oe.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(oe){oe!==void 0&&(Y=oe,this.setSize(B,U,!1))},this.getSize=function(oe){return oe.set(B,U)},this.setSize=function(oe,Ee,Ue=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=oe,U=Ee,n.width=Math.floor(oe*Y),n.height=Math.floor(Ee*Y),Ue===!0&&(n.style.width=oe+"px",n.style.height=Ee+"px"),this.setViewport(0,0,oe,Ee)},this.getDrawingBufferSize=function(oe){return oe.set(B*Y,U*Y).floor()},this.setDrawingBufferSize=function(oe,Ee,Ue){B=oe,U=Ee,Y=Ue,n.width=Math.floor(oe*Ue),n.height=Math.floor(Ee*Ue),this.setViewport(0,0,oe,Ee)},this.getCurrentViewport=function(oe){return oe.copy(T)},this.getViewport=function(oe){return oe.copy(ce)},this.setViewport=function(oe,Ee,Ue,$e){oe.isVector4?ce.set(oe.x,oe.y,oe.z,oe.w):ce.set(oe,Ee,Ue,$e),q.viewport(T.copy(ce).multiplyScalar(Y).round())},this.getScissor=function(oe){return oe.copy(ge)},this.setScissor=function(oe,Ee,Ue,$e){oe.isVector4?ge.set(oe.x,oe.y,oe.z,oe.w):ge.set(oe,Ee,Ue,$e),q.scissor(N.copy(ge).multiplyScalar(Y).round())},this.getScissorTest=function(){return Ae},this.setScissorTest=function(oe){q.setScissorTest(Ae=oe)},this.setOpaqueSort=function(oe){Z=oe},this.setTransparentSort=function(oe){ie=oe},this.getClearColor=function(oe){return oe.copy(Ge.getClearColor())},this.setClearColor=function(){Ge.setClearColor.apply(Ge,arguments)},this.getClearAlpha=function(){return Ge.getClearAlpha()},this.setClearAlpha=function(){Ge.setClearAlpha.apply(Ge,arguments)},this.clear=function(oe=!0,Ee=!0,Ue=!0){let $e=0;if(oe){let Ne=!1;if(D!==null){const ft=D.texture.format;Ne=ft===Wk||ft===Xk||ft===Fk}if(Ne){const ft=D.texture.type,Dt=ft===qo||ft===mu||ft===Vk||ft===Ff||ft===Bk||ft===Uk,Vt=Ge.getClearColor(),Qt=Ge.getClearAlpha(),tn=Vt.r,ln=Vt.g,hn=Vt.b;Dt?(v[0]=tn,v[1]=ln,v[2]=hn,v[3]=Qt,F.clearBufferuiv(F.COLOR,0,v)):(y[0]=tn,y[1]=ln,y[2]=hn,y[3]=Qt,F.clearBufferiv(F.COLOR,0,y))}else $e|=F.COLOR_BUFFER_BIT}Ee&&($e|=F.DEPTH_BUFFER_BIT),Ue&&($e|=F.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),F.clear($e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",me,!1),n.removeEventListener("webglcontextrestored",Be,!1),n.removeEventListener("webglcontextcreationerror",Fe,!1),Xe.dispose(),Ve.dispose(),fe.dispose(),Me.dispose(),J.dispose(),de.dispose(),Ut.dispose(),sn.dispose(),we.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",vn),Le.removeEventListener("sessionend",or),Si.stop()};function me(oe){oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const oe=le.autoReset,Ee=rt.enabled,Ue=rt.autoUpdate,$e=rt.needsUpdate,Ne=rt.type;_e(),le.autoReset=oe,rt.enabled=Ee,rt.autoUpdate=Ue,rt.needsUpdate=$e,rt.type=Ne}function Fe(oe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",oe.statusMessage)}function tt(oe){const Ee=oe.target;Ee.removeEventListener("dispose",tt),dt(Ee)}function dt(oe){wn(oe),fe.remove(oe)}function wn(oe){const Ee=fe.get(oe).programs;Ee!==void 0&&(Ee.forEach(function(Ue){we.releaseProgram(Ue)}),oe.isShaderMaterial&&we.releaseShaderCache(oe))}this.renderBufferDirect=function(oe,Ee,Ue,$e,Ne,ft){Ee===null&&(Ee=K);const Dt=Ne.isMesh&&Ne.matrixWorld.determinant()<0,Vt=_x(oe,Ee,Ue,$e,Ne);q.setMaterial($e,Dt);let Qt=Ue.index,tn=1;if($e.wireframe===!0){if(Qt=ue.getWireframeAttribute(Ue),Qt===void 0)return;tn=2}const ln=Ue.drawRange,hn=Ue.attributes.position;let un=ln.start*tn,Zn=(ln.start+ln.count)*tn;ft!==null&&(un=Math.max(un,ft.start*tn),Zn=Math.min(Zn,(ft.start+ft.count)*tn)),Qt!==null?(un=Math.max(un,0),Zn=Math.min(Zn,Qt.count)):hn!=null&&(un=Math.max(un,0),Zn=Math.min(Zn,hn.count));const Xr=Zn-un;if(Xr<0||Xr===1/0)return;Ut.setup(Ne,$e,Vt,Ue,Qt);let so,Vn=kt;if(Qt!==null&&(so=Q.get(Qt),Vn=Tt,Vn.setIndex(so)),Ne.isMesh)$e.wireframe===!0?(q.setLineWidth($e.wireframeLinewidth*X()),Vn.setMode(F.LINES)):Vn.setMode(F.TRIANGLES);else if(Ne.isLine){let on=$e.linewidth;on===void 0&&(on=1),q.setLineWidth(on*X()),Ne.isLineSegments?Vn.setMode(F.LINES):Ne.isLineLoop?Vn.setMode(F.LINE_LOOP):Vn.setMode(F.LINE_STRIP)}else Ne.isPoints?Vn.setMode(F.POINTS):Ne.isSprite&&Vn.setMode(F.TRIANGLES);if(Ne.isBatchedMesh)Ne._multiDrawInstances!==null?Vn.renderMultiDrawInstances(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount,Ne._multiDrawInstances):Vn.renderMultiDraw(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount);else if(Ne.isInstancedMesh)Vn.renderInstances(un,Xr,Ne.count);else if(Ue.isInstancedBufferGeometry){const on=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,rh=Math.min(Ue.instanceCount,on);Vn.renderInstances(un,Xr,rh)}else Vn.render(un,Xr)};function _n(oe,Ee,Ue){oe.transparent===!0&&oe.side===ws&&oe.forceSinglePass===!1?(oe.side=Vr,oe.needsUpdate=!0,Qn(oe,Ee,Ue),oe.side=bl,oe.needsUpdate=!0,Qn(oe,Ee,Ue),oe.side=ws):Qn(oe,Ee,Ue)}this.compile=function(oe,Ee,Ue=null){Ue===null&&(Ue=oe),x=Ve.get(Ue),x.init(Ee),_.push(x),Ue.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Ee.layers)&&(x.pushLight(Ne),Ne.castShadow&&x.pushShadow(Ne))}),oe!==Ue&&oe.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Ee.layers)&&(x.pushLight(Ne),Ne.castShadow&&x.pushShadow(Ne))}),x.setupLights(O._useLegacyLights);const $e=new Set;return oe.traverse(function(Ne){const ft=Ne.material;if(ft)if(Array.isArray(ft))for(let Dt=0;Dt<ft.length;Dt++){const Vt=ft[Dt];_n(Vt,Ue,Ne),$e.add(Vt)}else _n(ft,Ue,Ne),$e.add(ft)}),_.pop(),x=null,$e},this.compileAsync=function(oe,Ee,Ue=null){const $e=this.compile(oe,Ee,Ue);return new Promise(Ne=>{function ft(){if($e.forEach(function(Dt){fe.get(Dt).currentProgram.isReady()&&$e.delete(Dt)}),$e.size===0){Ne(oe);return}setTimeout(ft,10)}re.get("KHR_parallel_shader_compile")!==null?ft():setTimeout(ft,10)})};let Rn=null;function yi(oe){Rn&&Rn(oe)}function vn(){Si.stop()}function or(){Si.start()}const Si=new lL;Si.setAnimationLoop(yi),typeof self<"u"&&Si.setContext(self),this.setAnimationLoop=function(oe){Rn=oe,Le.setAnimationLoop(oe),oe===null?Si.stop():Si.start()},Le.addEventListener("sessionstart",vn),Le.addEventListener("sessionend",or),this.render=function(oe,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Ee.parent===null&&Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(Ee),Ee=Le.getCamera()),oe.isScene===!0&&oe.onBeforeRender(O,oe,Ee,D),x=Ve.get(oe,_.length),x.init(Ee),_.push(x),pe.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),Se.setFromProjectionMatrix(pe),Ce=this.localClippingEnabled,he=ze.init(this.clippingPlanes,Ce),w=Xe.get(oe,S.length),w.init(),S.push(w),qf(oe,Ee,0,O.sortObjects),w.finish(),O.sortObjects===!0&&w.sort(Z,ie);const Ue=Le.enabled===!1||Le.isPresenting===!1||Le.hasDepthSensing()===!1;Ue&&Ge.addToRenderList(w,oe),this.info.render.frame++,he===!0&&ze.beginShadows();const $e=x.state.shadowsArray;rt.render($e,oe,Ee),he===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ne=w.opaque,ft=w.transmissive;if(x.setupLights(O._useLegacyLights),Ee.isArrayCamera){const Dt=Ee.cameras;if(ft.length>0)for(let Vt=0,Qt=Dt.length;Vt<Qt;Vt++){const tn=Dt[Vt];j0(Ne,ft,oe,tn)}Ue&&Ge.render(oe);for(let Vt=0,Qt=Dt.length;Vt<Qt;Vt++){const tn=Dt[Vt];ji(w,oe,tn,tn.viewport)}}else ft.length>0&&j0(Ne,ft,oe,Ee),Ue&&Ge.render(oe),ji(w,oe,Ee);D!==null&&(be.updateMultisampleRenderTarget(D),be.updateRenderTargetMipmap(D)),oe.isScene===!0&&oe.onAfterRender(O,oe,Ee),Ut.resetDefaultState(),A=-1,R=null,_.pop(),_.length>0?(x=_[_.length-1],he===!0&&ze.setGlobalState(O.clippingPlanes,x.state.camera)):x=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function qf(oe,Ee,Ue,$e){if(oe.visible===!1)return;if(oe.layers.test(Ee.layers)){if(oe.isGroup)Ue=oe.renderOrder;else if(oe.isLOD)oe.autoUpdate===!0&&oe.update(Ee);else if(oe.isLight)x.pushLight(oe),oe.castShadow&&x.pushShadow(oe);else if(oe.isSprite){if(!oe.frustumCulled||Se.intersectsSprite(oe)){$e&&j.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(pe);const Dt=de.update(oe),Vt=oe.material;Vt.visible&&w.push(oe,Dt,Vt,Ue,j.z,null)}}else if((oe.isMesh||oe.isLine||oe.isPoints)&&(!oe.frustumCulled||Se.intersectsObject(oe))){const Dt=de.update(oe),Vt=oe.material;if($e&&(oe.boundingSphere!==void 0?(oe.boundingSphere===null&&oe.computeBoundingSphere(),j.copy(oe.boundingSphere.center)):(Dt.boundingSphere===null&&Dt.computeBoundingSphere(),j.copy(Dt.boundingSphere.center)),j.applyMatrix4(oe.matrixWorld).applyMatrix4(pe)),Array.isArray(Vt)){const Qt=Dt.groups;for(let tn=0,ln=Qt.length;tn<ln;tn++){const hn=Qt[tn],un=Vt[hn.materialIndex];un&&un.visible&&w.push(oe,Dt,un,Ue,j.z,hn)}}else Vt.visible&&w.push(oe,Dt,Vt,Ue,j.z,null)}}const ft=oe.children;for(let Dt=0,Vt=ft.length;Dt<Vt;Dt++)qf(ft[Dt],Ee,Ue,$e)}function ji(oe,Ee,Ue,$e){const Ne=oe.opaque,ft=oe.transmissive,Dt=oe.transparent;x.setupLightsView(Ue),he===!0&&ze.setGlobalState(O.clippingPlanes,Ue),$e&&q.viewport(T.copy($e)),Ne.length>0&&ih(Ne,Ee,Ue),ft.length>0&&ih(ft,Ee,Ue),Dt.length>0&&ih(Dt,Ee,Ue),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function j0(oe,Ee,Ue,$e){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[$e.id]===void 0&&(x.state.transmissionRenderTarget[$e.id]=new Co(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")||re.has("EXT_color_buffer_float")?zf:qo,minFilter:Ho,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const ft=x.state.transmissionRenderTarget[$e.id],Dt=$e.viewport||T;ft.setSize(Dt.z,Dt.w);const Vt=O.getRenderTarget();O.setRenderTarget(ft),O.getClearColor(I),$=O.getClearAlpha(),$<1&&O.setClearColor(16777215,.5),O.clear();const Qt=O.toneMapping;O.toneMapping=pl;const tn=$e.viewport;if($e.viewport!==void 0&&($e.viewport=void 0),x.setupLightsView($e),he===!0&&ze.setGlobalState(O.clippingPlanes,$e),ih(oe,Ue,$e),be.updateMultisampleRenderTarget(ft),be.updateRenderTargetMipmap(ft),re.has("WEBGL_multisampled_render_to_texture")===!1){let ln=!1;for(let hn=0,un=Ee.length;hn<un;hn++){const Zn=Ee[hn],Xr=Zn.object,so=Zn.geometry,Vn=Zn.material,on=Zn.group;if(Vn.side===ws&&Xr.layers.test($e.layers)){const rh=Vn.side;Vn.side=Vr,Vn.needsUpdate=!0,Rl(Xr,Ue,$e,so,Vn,on),Vn.side=rh,Vn.needsUpdate=!0,ln=!0}}ln===!0&&(be.updateMultisampleRenderTarget(ft),be.updateRenderTargetMipmap(ft))}O.setRenderTarget(Vt),O.setClearColor(I,$),tn!==void 0&&($e.viewport=tn),O.toneMapping=Qt}function ih(oe,Ee,Ue){const $e=Ee.isScene===!0?Ee.overrideMaterial:null;for(let Ne=0,ft=oe.length;Ne<ft;Ne++){const Dt=oe[Ne],Vt=Dt.object,Qt=Dt.geometry,tn=$e===null?Dt.material:$e,ln=Dt.group;Vt.layers.test(Ue.layers)&&Rl(Vt,Ee,Ue,Qt,tn,ln)}}function Rl(oe,Ee,Ue,$e,Ne,ft){oe.onBeforeRender(O,Ee,Ue,$e,Ne,ft),oe.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,oe.matrixWorld),oe.normalMatrix.getNormalMatrix(oe.modelViewMatrix),Ne.onBeforeRender(O,Ee,Ue,$e,oe,ft),Ne.transparent===!0&&Ne.side===ws&&Ne.forceSinglePass===!1?(Ne.side=Vr,Ne.needsUpdate=!0,O.renderBufferDirect(Ue,Ee,$e,Ne,oe,ft),Ne.side=bl,Ne.needsUpdate=!0,O.renderBufferDirect(Ue,Ee,$e,Ne,oe,ft),Ne.side=ws):O.renderBufferDirect(Ue,Ee,$e,Ne,oe,ft),oe.onAfterRender(O,Ee,Ue,$e,Ne,ft)}function Qn(oe,Ee,Ue){Ee.isScene!==!0&&(Ee=K);const $e=fe.get(oe),Ne=x.state.lights,ft=x.state.shadowsArray,Dt=Ne.state.version,Vt=we.getParameters(oe,Ne.state,ft,Ee,Ue),Qt=we.getProgramCacheKey(Vt);let tn=$e.programs;$e.environment=oe.isMeshStandardMaterial?Ee.environment:null,$e.fog=Ee.fog,$e.envMap=(oe.isMeshStandardMaterial?J:Me).get(oe.envMap||$e.environment),$e.envMapRotation=$e.environment!==null&&oe.envMap===null?Ee.environmentRotation:oe.envMapRotation,tn===void 0&&(oe.addEventListener("dispose",tt),tn=new Map,$e.programs=tn);let ln=tn.get(Qt);if(ln!==void 0){if($e.currentProgram===ln&&$e.lightsStateVersion===Dt)return Il(oe,Vt),ln}else Vt.uniforms=we.getUniforms(oe),oe.onBuild(Ue,Vt,O),oe.onBeforeCompile(Vt,O),ln=we.acquireProgram(Vt,Qt),tn.set(Qt,ln),$e.uniforms=Vt.uniforms;const hn=$e.uniforms;return(!oe.isShaderMaterial&&!oe.isRawShaderMaterial||oe.clipping===!0)&&(hn.clippingPlanes=ze.uniform),Il(oe,Vt),$e.needsLights=Cx(oe),$e.lightsStateVersion=Dt,$e.needsLights&&(hn.ambientLightColor.value=Ne.state.ambient,hn.lightProbe.value=Ne.state.probe,hn.directionalLights.value=Ne.state.directional,hn.directionalLightShadows.value=Ne.state.directionalShadow,hn.spotLights.value=Ne.state.spot,hn.spotLightShadows.value=Ne.state.spotShadow,hn.rectAreaLights.value=Ne.state.rectArea,hn.ltc_1.value=Ne.state.rectAreaLTC1,hn.ltc_2.value=Ne.state.rectAreaLTC2,hn.pointLights.value=Ne.state.point,hn.pointLightShadows.value=Ne.state.pointShadow,hn.hemisphereLights.value=Ne.state.hemi,hn.directionalShadowMap.value=Ne.state.directionalShadowMap,hn.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,hn.spotShadowMap.value=Ne.state.spotShadowMap,hn.spotLightMatrix.value=Ne.state.spotLightMatrix,hn.spotLightMap.value=Ne.state.spotLightMap,hn.pointShadowMap.value=Ne.state.pointShadowMap,hn.pointShadowMatrix.value=Ne.state.pointShadowMatrix),$e.currentProgram=ln,$e.uniformsList=null,ln}function Po(oe){if(oe.uniformsList===null){const Ee=oe.currentProgram.getUniforms();oe.uniformsList=L1.seqWithValue(Ee.seq,oe.uniforms)}return oe.uniformsList}function Il(oe,Ee){const Ue=fe.get(oe);Ue.outputColorSpace=Ee.outputColorSpace,Ue.batching=Ee.batching,Ue.instancing=Ee.instancing,Ue.instancingColor=Ee.instancingColor,Ue.instancingMorph=Ee.instancingMorph,Ue.skinning=Ee.skinning,Ue.morphTargets=Ee.morphTargets,Ue.morphNormals=Ee.morphNormals,Ue.morphColors=Ee.morphColors,Ue.morphTargetsCount=Ee.morphTargetsCount,Ue.numClippingPlanes=Ee.numClippingPlanes,Ue.numIntersection=Ee.numClipIntersection,Ue.vertexAlphas=Ee.vertexAlphas,Ue.vertexTangents=Ee.vertexTangents,Ue.toneMapping=Ee.toneMapping}function _x(oe,Ee,Ue,$e,Ne){Ee.isScene!==!0&&(Ee=K),be.resetTextureUnits();const ft=Ee.fog,Dt=$e.isMeshStandardMaterial?Ee.environment:null,Vt=D===null?O.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:El,Qt=($e.isMeshStandardMaterial?J:Me).get($e.envMap||Dt),tn=$e.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,ln=!!Ue.attributes.tangent&&(!!$e.normalMap||$e.anisotropy>0),hn=!!Ue.morphAttributes.position,un=!!Ue.morphAttributes.normal,Zn=!!Ue.morphAttributes.color;let Xr=pl;$e.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(Xr=O.toneMapping);const so=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,Vn=so!==void 0?so.length:0,on=fe.get($e),rh=x.state.lights;if(he===!0&&(Ce===!0||oe!==R)){const Tr=oe===R&&$e.id===A;ze.setState($e,oe,Tr)}let ri=!1;$e.version===on.__version?(on.needsLights&&on.lightsStateVersion!==rh.state.version||on.outputColorSpace!==Vt||Ne.isBatchedMesh&&on.batching===!1||!Ne.isBatchedMesh&&on.batching===!0||Ne.isInstancedMesh&&on.instancing===!1||!Ne.isInstancedMesh&&on.instancing===!0||Ne.isSkinnedMesh&&on.skinning===!1||!Ne.isSkinnedMesh&&on.skinning===!0||Ne.isInstancedMesh&&on.instancingColor===!0&&Ne.instanceColor===null||Ne.isInstancedMesh&&on.instancingColor===!1&&Ne.instanceColor!==null||Ne.isInstancedMesh&&on.instancingMorph===!0&&Ne.morphTexture===null||Ne.isInstancedMesh&&on.instancingMorph===!1&&Ne.morphTexture!==null||on.envMap!==Qt||$e.fog===!0&&on.fog!==ft||on.numClippingPlanes!==void 0&&(on.numClippingPlanes!==ze.numPlanes||on.numIntersection!==ze.numIntersection)||on.vertexAlphas!==tn||on.vertexTangents!==ln||on.morphTargets!==hn||on.morphNormals!==un||on.morphColors!==Zn||on.toneMapping!==Xr||on.morphTargetsCount!==Vn)&&(ri=!0):(ri=!0,on.__version=$e.version);let Wr=on.currentProgram;ri===!0&&(Wr=Qn($e,Ee,Ne));let sh=!1,oh=!1,Zf=!1;const Ci=Wr.getUniforms(),ta=on.uniforms;if(q.useProgram(Wr.program)&&(sh=!0,oh=!0,Zf=!0),$e.id!==A&&(A=$e.id,oh=!0),sh||R!==oe){Ci.setValue(F,"projectionMatrix",oe.projectionMatrix),Ci.setValue(F,"viewMatrix",oe.matrixWorldInverse);const Tr=Ci.map.cameraPosition;Tr!==void 0&&Tr.setValue(F,j.setFromMatrixPosition(oe.matrixWorld)),H.logarithmicDepthBuffer&&Ci.setValue(F,"logDepthBufFC",2/(Math.log(oe.far+1)/Math.LN2)),($e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshLambertMaterial||$e.isMeshBasicMaterial||$e.isMeshStandardMaterial||$e.isShaderMaterial)&&Ci.setValue(F,"isOrthographic",oe.isOrthographicCamera===!0),R!==oe&&(R=oe,oh=!0,Zf=!0)}if(Ne.isSkinnedMesh){Ci.setOptional(F,Ne,"bindMatrix"),Ci.setOptional(F,Ne,"bindMatrixInverse");const Tr=Ne.skeleton;Tr&&(Tr.boneTexture===null&&Tr.computeBoneTexture(),Ci.setValue(F,"boneTexture",Tr.boneTexture,be))}Ne.isBatchedMesh&&(Ci.setOptional(F,Ne,"batchingTexture"),Ci.setValue(F,"batchingTexture",Ne._matricesTexture,be));const Kf=Ue.morphAttributes;if((Kf.position!==void 0||Kf.normal!==void 0||Kf.color!==void 0)&&it.update(Ne,Ue,Wr),(oh||on.receiveShadow!==Ne.receiveShadow)&&(on.receiveShadow=Ne.receiveShadow,Ci.setValue(F,"receiveShadow",Ne.receiveShadow)),$e.isMeshGouraudMaterial&&$e.envMap!==null&&(ta.envMap.value=Qt,ta.flipEnvMap.value=Qt.isCubeTexture&&Qt.isRenderTargetTexture===!1?-1:1),$e.isMeshStandardMaterial&&$e.envMap===null&&Ee.environment!==null&&(ta.envMapIntensity.value=Ee.environmentIntensity),oh&&(Ci.setValue(F,"toneMappingExposure",O.toneMappingExposure),on.needsLights&&Sx(ta,Zf),ft&&$e.fog===!0&&Te.refreshFogUniforms(ta,ft),Te.refreshMaterialUniforms(ta,$e,Y,U,x.state.transmissionRenderTarget[oe.id]),L1.upload(F,Po(on),ta,be)),$e.isShaderMaterial&&$e.uniformsNeedUpdate===!0&&(L1.upload(F,Po(on),ta,be),$e.uniformsNeedUpdate=!1),$e.isSpriteMaterial&&Ci.setValue(F,"center",Ne.center),Ci.setValue(F,"modelViewMatrix",Ne.modelViewMatrix),Ci.setValue(F,"normalMatrix",Ne.normalMatrix),Ci.setValue(F,"modelMatrix",Ne.matrixWorld),$e.isShaderMaterial||$e.isRawShaderMaterial){const Tr=$e.uniformsGroups;for(let cs=0,kx=Tr.length;cs<kx;cs++){const q0=Tr[cs];sn.update(q0,Wr),sn.bind(q0,Wr)}}return Wr}function Sx(oe,Ee){oe.ambientLightColor.needsUpdate=Ee,oe.lightProbe.needsUpdate=Ee,oe.directionalLights.needsUpdate=Ee,oe.directionalLightShadows.needsUpdate=Ee,oe.pointLights.needsUpdate=Ee,oe.pointLightShadows.needsUpdate=Ee,oe.spotLights.needsUpdate=Ee,oe.spotLightShadows.needsUpdate=Ee,oe.rectAreaLights.needsUpdate=Ee,oe.hemisphereLights.needsUpdate=Ee}function Cx(oe){return oe.isMeshLambertMaterial||oe.isMeshToonMaterial||oe.isMeshPhongMaterial||oe.isMeshStandardMaterial||oe.isShadowMaterial||oe.isShaderMaterial&&oe.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(oe,Ee,Ue){fe.get(oe.texture).__webglTexture=Ee,fe.get(oe.depthTexture).__webglTexture=Ue;const $e=fe.get(oe);$e.__hasExternalTextures=!0,$e.__autoAllocateDepthBuffer=Ue===void 0,$e.__autoAllocateDepthBuffer||re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$e.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(oe,Ee){const Ue=fe.get(oe);Ue.__webglFramebuffer=Ee,Ue.__useDefaultFramebuffer=Ee===void 0},this.setRenderTarget=function(oe,Ee=0,Ue=0){D=oe,M=Ee,P=Ue;let $e=!0,Ne=null,ft=!1,Dt=!1;if(oe){const Qt=fe.get(oe);Qt.__useDefaultFramebuffer!==void 0?(q.bindFramebuffer(F.FRAMEBUFFER,null),$e=!1):Qt.__webglFramebuffer===void 0?be.setupRenderTarget(oe):Qt.__hasExternalTextures&&be.rebindTextures(oe,fe.get(oe.texture).__webglTexture,fe.get(oe.depthTexture).__webglTexture);const tn=oe.texture;(tn.isData3DTexture||tn.isDataArrayTexture||tn.isCompressedArrayTexture)&&(Dt=!0);const ln=fe.get(oe).__webglFramebuffer;oe.isWebGLCubeRenderTarget?(Array.isArray(ln[Ee])?Ne=ln[Ee][Ue]:Ne=ln[Ee],ft=!0):oe.samples>0&&be.useMultisampledRTT(oe)===!1?Ne=fe.get(oe).__webglMultisampledFramebuffer:Array.isArray(ln)?Ne=ln[Ue]:Ne=ln,T.copy(oe.viewport),N.copy(oe.scissor),L=oe.scissorTest}else T.copy(ce).multiplyScalar(Y).floor(),N.copy(ge).multiplyScalar(Y).floor(),L=Ae;if(q.bindFramebuffer(F.FRAMEBUFFER,Ne)&&$e&&q.drawBuffers(oe,Ne),q.viewport(T),q.scissor(N),q.setScissorTest(L),ft){const Qt=fe.get(oe.texture);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,Qt.__webglTexture,Ue)}else if(Dt){const Qt=fe.get(oe.texture),tn=Ee||0;F.framebufferTextureLayer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,Qt.__webglTexture,Ue||0,tn)}A=-1},this.readRenderTargetPixels=function(oe,Ee,Ue,$e,Ne,ft,Dt){if(!(oe&&oe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Vt=fe.get(oe).__webglFramebuffer;if(oe.isWebGLCubeRenderTarget&&Dt!==void 0&&(Vt=Vt[Dt]),Vt){q.bindFramebuffer(F.FRAMEBUFFER,Vt);try{const Qt=oe.texture,tn=Qt.format,ln=Qt.type;if(!H.textureFormatReadable(tn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!H.textureTypeReadable(ln)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee>=0&&Ee<=oe.width-$e&&Ue>=0&&Ue<=oe.height-Ne&&F.readPixels(Ee,Ue,$e,Ne,ut.convert(tn),ut.convert(ln),ft)}finally{const Qt=D!==null?fe.get(D).__webglFramebuffer:null;q.bindFramebuffer(F.FRAMEBUFFER,Qt)}}},this.copyFramebufferToTexture=function(oe,Ee,Ue=0){const $e=Math.pow(2,-Ue),Ne=Math.floor(Ee.image.width*$e),ft=Math.floor(Ee.image.height*$e);be.setTexture2D(Ee,0),F.copyTexSubImage2D(F.TEXTURE_2D,Ue,0,0,oe.x,oe.y,Ne,ft),q.unbindTexture()},this.copyTextureToTexture=function(oe,Ee,Ue,$e=0){const Ne=Ee.image.width,ft=Ee.image.height,Dt=ut.convert(Ue.format),Vt=ut.convert(Ue.type);be.setTexture2D(Ue,0),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,Ue.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,Ue.unpackAlignment),Ee.isDataTexture?F.texSubImage2D(F.TEXTURE_2D,$e,oe.x,oe.y,Ne,ft,Dt,Vt,Ee.image.data):Ee.isCompressedTexture?F.compressedTexSubImage2D(F.TEXTURE_2D,$e,oe.x,oe.y,Ee.mipmaps[0].width,Ee.mipmaps[0].height,Dt,Ee.mipmaps[0].data):F.texSubImage2D(F.TEXTURE_2D,$e,oe.x,oe.y,Dt,Vt,Ee.image),$e===0&&Ue.generateMipmaps&&F.generateMipmap(F.TEXTURE_2D),q.unbindTexture()},this.copyTextureToTexture3D=function(oe,Ee,Ue,$e,Ne=0){const ft=oe.max.x-oe.min.x,Dt=oe.max.y-oe.min.y,Vt=oe.max.z-oe.min.z,Qt=ut.convert($e.format),tn=ut.convert($e.type);let ln;if($e.isData3DTexture)be.setTexture3D($e,0),ln=F.TEXTURE_3D;else if($e.isDataArrayTexture||$e.isCompressedArrayTexture)be.setTexture2DArray($e,0),ln=F.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,$e.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$e.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,$e.unpackAlignment);const hn=F.getParameter(F.UNPACK_ROW_LENGTH),un=F.getParameter(F.UNPACK_IMAGE_HEIGHT),Zn=F.getParameter(F.UNPACK_SKIP_PIXELS),Xr=F.getParameter(F.UNPACK_SKIP_ROWS),so=F.getParameter(F.UNPACK_SKIP_IMAGES),Vn=Ue.isCompressedTexture?Ue.mipmaps[Ne]:Ue.image;F.pixelStorei(F.UNPACK_ROW_LENGTH,Vn.width),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,Vn.height),F.pixelStorei(F.UNPACK_SKIP_PIXELS,oe.min.x),F.pixelStorei(F.UNPACK_SKIP_ROWS,oe.min.y),F.pixelStorei(F.UNPACK_SKIP_IMAGES,oe.min.z),Ue.isDataTexture||Ue.isData3DTexture?F.texSubImage3D(ln,Ne,Ee.x,Ee.y,Ee.z,ft,Dt,Vt,Qt,tn,Vn.data):$e.isCompressedArrayTexture?F.compressedTexSubImage3D(ln,Ne,Ee.x,Ee.y,Ee.z,ft,Dt,Vt,Qt,Vn.data):F.texSubImage3D(ln,Ne,Ee.x,Ee.y,Ee.z,ft,Dt,Vt,Qt,tn,Vn),F.pixelStorei(F.UNPACK_ROW_LENGTH,hn),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,un),F.pixelStorei(F.UNPACK_SKIP_PIXELS,Zn),F.pixelStorei(F.UNPACK_SKIP_ROWS,Xr),F.pixelStorei(F.UNPACK_SKIP_IMAGES,so),Ne===0&&$e.generateMipmaps&&F.generateMipmap(ln),q.unbindTexture()},this.initTexture=function(oe){oe.isCubeTexture?be.setTextureCube(oe,0):oe.isData3DTexture?be.setTexture3D(oe,0):oe.isDataArrayTexture||oe.isCompressedArrayTexture?be.setTexture2DArray(oe,0):be.setTexture2D(oe,0),q.unbindTexture()},this.resetState=function(){M=0,P=0,D=null,q.reset(),Ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ba}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===SO?"display-p3":"srgb",n.unpackColorSpace=Yn.workingColorSpace===w0?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class EO{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new nt(e),this.density=n}clone(){return new EO(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class PO{constructor(e,n=1,t=1e3){this.isFog=!0,this.name="",this.color=new nt(e),this.near=n,this.far=t}clone(){return new PO(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Of extends An{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new tr,this.environmentIntensity=1,this.environmentRotation=new tr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class T0{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Vg,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=no()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return tL("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,t){e*=this.stride,t*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[t+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),t=new this.constructor(n,this.stride);return t.setUsage(this.usage),t}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qr=new ne;class xl{constructor(e,n,t,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=t,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,t=this.data.count;n<t;n++)qr.fromBufferAttribute(this,n),qr.applyMatrix4(e),this.setXYZ(n,qr.x,qr.y,qr.z);return this}applyNormalMatrix(e){for(let n=0,t=this.count;n<t;n++)qr.fromBufferAttribute(this,n),qr.applyNormalMatrix(e),this.setXYZ(n,qr.x,qr.y,qr.z);return this}transformDirection(e){for(let n=0,t=this.count;n<t;n++)qr.fromBufferAttribute(this,n),qr.transformDirection(e),this.setXYZ(n,qr.x,qr.y,qr.z);return this}getComponent(e,n){let t=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(t=Jr(t,this.array)),t}setComponent(e,n,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+n]=t,this}setX(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Jr(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Jr(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Jr(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Jr(n,this.array)),n}setXY(e,n,t){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=t,this}setXYZ(e,n,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array),r=dn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=t,this.data.array[e+2]=r,this}setXYZW(e,n,t,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),t=dn(t,this.array),r=dn(r,this.array),s=dn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=t,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let t=0;t<this.count;t++){const r=t*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new In(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new xl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let t=0;t<this.count;t++){const r=t*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eT extends Br{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let md;const Up=new ne,gd=new ne,vd=new ne,yd=new Qe,zp=new Qe,gL=new pt,wy=new ne,Fp=new ne,_y=new ne,h5=new Qe,O_=new Qe,u5=new Qe;let vL=class extends An{constructor(e=new eT){if(super(),this.isSprite=!0,this.type="Sprite",md===void 0){md=new rn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new T0(n,5);md.setIndex([0,1,2,0,2,3]),md.setAttribute("position",new xl(t,3,0,!1)),md.setAttribute("uv",new xl(t,2,3,!1))}this.geometry=md,this.material=e,this.center=new Qe(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gd.setFromMatrixScale(this.matrixWorld),gL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gd.multiplyScalar(-vd.z);const t=this.material.rotation;let r,s;t!==0&&(s=Math.cos(t),r=Math.sin(t));const a=this.center;Sy(wy.set(-.5,-.5,0),vd,a,gd,r,s),Sy(Fp.set(.5,-.5,0),vd,a,gd,r,s),Sy(_y.set(.5,.5,0),vd,a,gd,r,s),h5.set(0,0),O_.set(1,0),u5.set(1,1);let l=e.ray.intersectTriangle(wy,Fp,_y,!1,Up);if(l===null&&(Sy(Fp.set(-.5,.5,0),vd,a,gd,r,s),O_.set(0,1),l=e.ray.intersectTriangle(wy,_y,Fp,!1,Up),l===null))return;const h=e.ray.origin.distanceTo(Up);h<e.near||h>e.far||n.push({distance:h,point:Up.clone(),uv:_s.getInterpolation(Up,wy,Fp,_y,h5,O_,u5,new Qe),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function Sy(i,e,n,t,r,s){yd.subVectors(i,n).addScalar(.5).multiply(t),r!==void 0?(zp.x=s*yd.x-r*yd.y,zp.y=r*yd.x+s*yd.y):zp.copy(yd),i.copy(e),i.x+=zp.x,i.y+=zp.y,i.applyMatrix4(gL)}const Cy=new ne,d5=new ne;class yL extends An{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let t=0,r=n.length;t<r;t++){const s=n[t];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,t=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let t,r;for(t=1,r=n.length;t<r;t++){let s=n[t].distance;if(n[t].object.visible&&(s-=s*n[t].hysteresis),e<s)break}return n[t-1].object}return null}raycast(e,n){if(this.levels.length>0){Cy.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Cy);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Cy.setFromMatrixPosition(e.matrixWorld),d5.setFromMatrixPosition(this.matrixWorld);const t=Cy.distanceTo(d5)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let a=n[r].distance;if(n[r].object.visible&&(a-=a*n[r].hysteresis),t>=a)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const t=this.levels;for(let r=0,s=t.length;r<s;r++){const a=t[r];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const f5=new ne,p5=new yn,m5=new yn,Qhe=new ne,g5=new pt,ky=new ne,x_=new Cr,v5=new pt,w_=new ku;class tT extends Jn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=lC,this.bindMatrix=new pt,this.bindMatrixInverse=new pt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Sr),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let t=0;t<n.count;t++)this.getVertexPosition(t,ky),this.boundingBox.expandByPoint(ky)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Cr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let t=0;t<n.count;t++)this.getVertexPosition(t,ky),this.boundingSphere.expandByPoint(ky)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const t=this.material,r=this.matrixWorld;t!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),x_.copy(this.boundingSphere),x_.applyMatrix4(r),e.ray.intersectsSphere(x_)!==!1&&(v5.copy(r).invert(),w_.copy(e.ray).applyMatrix4(v5),!(this.boundingBox!==null&&w_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,w_)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,n=this.geometry.attributes.skinWeight;for(let t=0,r=n.count;t<r;t++){e.fromBufferAttribute(n,t);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(t,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===lC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===PV?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const t=this.skeleton,r=this.geometry;p5.fromBufferAttribute(r.attributes.skinIndex,e),m5.fromBufferAttribute(r.attributes.skinWeight,e),f5.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const a=m5.getComponent(s);if(a!==0){const l=p5.getComponent(s);g5.multiplyMatrices(t.bones[l].matrixWorld,t.boneInverses[l]),n.addScaledVector(Qhe.copy(f5).applyMatrix4(g5),a)}}return n.applyMatrix4(this.bindMatrixInverse)}}class Ug extends An{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pc extends hi{constructor(e=null,n=1,t=1,r,s,a,l,h,u=er,f=er,p,g){super(null,a,l,h,u,f,r,s,p,g),this.isDataTexture=!0,this.image={data:e,width:n,height:t},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const y5=new pt,Hhe=new pt;class M0{constructor(e=[],n=[]){this.uuid=no(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,r=this.bones.length;t<r;t++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const t=new pt;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,n=this.boneInverses,t=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const l=e[s]?e[s].matrixWorld:Hhe;y5.multiplyMatrices(l,n[s]),y5.toArray(t,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new M0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const t=new Pc(n,e,e,ks,yo);return t.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=t,this}getBoneByName(e){for(let n=0,t=this.bones.length;n<t;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let t=0,r=e.bones.length;t<r;t++){const s=e.bones[t];let a=n[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Ug),this.bones.push(a),this.boneInverses.push(new pt().fromArray(e.boneInverses[t]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,t=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const a=n[r];e.bones.push(a.uuid);const l=t[r];e.boneInverses.push(l.toArray())}return e}}class xf extends In{constructor(e,n,t,r=1){super(e,n,t),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bd=new pt,b5=new pt,Ty=[],O5=new Sr,Ghe=new pt,Xp=new Jn,Wp=new Cr;class bL extends Jn{constructor(e,n,t){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new xf(new Float32Array(t*16),16),this.instanceColor=null,this.morphTexture=null,this.count=t,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<t;r++)this.setMatrixAt(r,Ghe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Sr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let t=0;t<n;t++)this.getMatrixAt(t,bd),O5.copy(e.boundingBox).applyMatrix4(bd),this.boundingBox.union(O5)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Cr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let t=0;t<n;t++)this.getMatrixAt(t,bd),Wp.copy(e.boundingSphere).applyMatrix4(bd),this.boundingSphere.union(Wp)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const t=n.morphTargetInfluences,r=this.morphTexture.source.data.data,s=t.length+1,a=e*s+1;for(let l=0;l<t.length;l++)t[l]=r[a+l]}raycast(e,n){const t=this.matrixWorld,r=this.count;if(Xp.geometry=this.geometry,Xp.material=this.material,Xp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Wp.copy(this.boundingSphere),Wp.applyMatrix4(t),e.ray.intersectsSphere(Wp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,bd),b5.multiplyMatrices(t,bd),Xp.matrixWorld=b5,Xp.raycast(e,Ty);for(let a=0,l=Ty.length;a<l;a++){const h=Ty[a];h.instanceId=s,h.object=this,n.push(h)}Ty.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new xf(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const t=n.morphTargetInfluences,r=t.length+1;this.morphTexture===null&&(this.morphTexture=new Pc(new Float32Array(r*this.count),r,this.count,zk,yo));const s=this.morphTexture.source.data.data;let a=0;for(let u=0;u<t.length;u++)a+=t[u];const l=this.geometry.morphTargetsRelative?1:1-a,h=r*e;s[h]=l,s.set(t,h+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Yhe(i,e){return i.z-e.z}function jhe(i,e){return e.z-i.z}class qhe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const t=this.pool,r=this.list;this.index>=t.length&&t.push({start:-1,count:-1,z:-1});const s=t[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const Od="batchId",oc=new pt,x5=new pt,Zhe=new pt,w5=new pt,__=new k0,My=new Sr,kh=new Cr,Qp=new ne,S_=new qhe,Rr=new Jn,Ey=[];function Khe(i,e,n=0){const t=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let a=0;a<t;a++)e.setComponent(s+n,a,i.getComponent(s,a))}else e.array.set(i.array,n*t);e.needsUpdate=!0}class OL extends Jn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,t=n*2,r){super(new rn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=t,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),t=new Pc(n,e,e,ks,yo);this._matricesTexture=t}_initializeGeometry(e){const n=this.geometry,t=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in e.attributes){const h=e.getAttribute(l),{array:u,itemSize:f,normalized:p}=h,g=new u.constructor(t*f),v=new In(g,f,p);n.setAttribute(l,v)}if(e.getIndex()!==null){const l=t>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new In(l,1))}const a=r>65536?new Uint32Array(t):new Uint16Array(t);n.setAttribute(Od,new In(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Od))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Od}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const t in n.attributes){if(t===Od)continue;if(!e.hasAttribute(t))throw new Error(`BatchedMesh: Added geometry missing "${t}". All geometries must have consistent attributes.`);const r=e.getAttribute(t),s=n.getAttribute(t);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sr);const e=this._geometryCount,n=this.boundingBox,t=this._active;n.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,oc),this.getBoundingBoxAt(r,My).applyMatrix4(oc),n.union(My))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cr);const e=this._geometryCount,n=this.boundingSphere,t=this._active;n.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,oc),this.getBoundingSphereAt(r,kh).applyMatrix4(oc),n.union(kh))}addGeometry(e,n=-1,t=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,l=this._drawRanges,h=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),n===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=n,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),f=u!==null;if(f&&(t===-1?r.indexCount=u.count:r.indexCount=t,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,g=this._active,v=this._matricesTexture,y=this._matricesTexture.image.data;p.push(!0),g.push(!0);const w=this._geometryCount;this._geometryCount++,Zhe.toArray(y,w*16),v.needsUpdate=!0,a.push(r),l.push({start:f?r.indexStart:r.vertexStart,count:-1}),h.push({boxInitialized:!1,box:new Sr,sphereInitialized:!1,sphere:new Cr});const x=this.geometry.getAttribute(Od);for(let S=0;S<r.vertexCount;S++)x.setX(r.vertexStart+S,w);return x.needsUpdate=!0,this.setGeometryAt(w,e),w}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const t=this.geometry,r=t.getIndex()!==null,s=t.getIndex(),a=n.getIndex(),l=this._reservedRanges[e];if(r&&a.count>l.indexCount||n.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const h=l.vertexStart,u=l.vertexCount;for(const v in t.attributes){if(v===Od)continue;const y=n.getAttribute(v),w=t.getAttribute(v);Khe(y,w,h);const x=y.itemSize;for(let S=y.count,_=u;S<_;S++){const O=h+S;for(let k=0;k<x;k++)w.setComponent(O,k,0)}w.needsUpdate=!0,w.addUpdateRange(h*x,u*x)}if(r){const v=l.indexStart;for(let y=0;y<a.count;y++)s.setX(v+y,h+a.getX(y));for(let y=a.count,w=l.indexCount;y<w;y++)s.setX(v+y,h);s.needsUpdate=!0,s.addUpdateRange(v,l.indexCount)}const f=this._bounds[e];n.boundingBox!==null?(f.box.copy(n.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,n.boundingSphere!==null?(f.sphere.copy(n.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const p=this._drawRanges[e],g=n.getAttribute("position");return p.count=r?a.count:g.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,n){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=n,e}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,a=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const l=a.index,h=a.attributes.position,u=this._drawRanges[e];for(let f=u.start,p=u.start+u.count;f<p;f++){let g=f;l&&(g=l.getX(g)),s.expandByPoint(Qp.fromBufferAttribute(h,g))}r.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,a=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,My),My.getCenter(s.center);const l=a.index,h=a.attributes.position,u=this._drawRanges[e];let f=0;for(let p=u.start,g=u.start+u.count;p<g;p++){let v=p;l&&(v=l.getX(v)),Qp.fromBufferAttribute(h,v),f=Math.max(f,s.center.distanceToSquared(Qp))}s.radius=Math.sqrt(f),r.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const t=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||t[e]===!1?this:(n.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,n){const t=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||t[e]===!1?null:n.fromArray(r,e*16)}setVisibleAt(e,n){const t=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||t[e]===n?this:(t[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,t=this._active,r=this._geometryCount;return e>=r||t[e]===!1?!1:n[e]}raycast(e,n){const t=this._visibility,r=this._active,s=this._drawRanges,a=this._geometryCount,l=this.matrixWorld,h=this.geometry;Rr.material=this.material,Rr.geometry.index=h.index,Rr.geometry.attributes=h.attributes,Rr.geometry.boundingBox===null&&(Rr.geometry.boundingBox=new Sr),Rr.geometry.boundingSphere===null&&(Rr.geometry.boundingSphere=new Cr);for(let u=0;u<a;u++){if(!t[u]||!r[u])continue;const f=s[u];Rr.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(u,Rr.matrixWorld).premultiply(l),this.getBoundingBoxAt(u,Rr.geometry.boundingBox),this.getBoundingSphereAt(u,Rr.geometry.boundingSphere),Rr.raycast(e,Ey);for(let p=0,g=Ey.length;p<g;p++){const v=Ey[p];v.object=this,v.batchId=u,n.push(v)}Ey.length=0}Rr.material=null,Rr.geometry.index=null,Rr.geometry.attributes={},Rr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,t,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,h=this._active,u=this._visibility,f=this._multiDrawStarts,p=this._multiDrawCounts,g=this._drawRanges,v=this.perObjectFrustumCulled;v&&(w5.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse).multiply(this.matrixWorld),__.setFromProjectionMatrix(w5,e.coordinateSystem));let y=0;if(this.sortObjects){x5.copy(this.matrixWorld).invert(),Qp.setFromMatrixPosition(t.matrixWorld).applyMatrix4(x5);for(let S=0,_=u.length;S<_;S++)if(u[S]&&h[S]){this.getMatrixAt(S,oc),this.getBoundingSphereAt(S,kh).applyMatrix4(oc);let O=!1;if(v&&(O=!__.intersectsSphere(kh)),!O){const k=Qp.distanceTo(kh.center);S_.push(g[S],k)}}const w=S_.list,x=this.customSort;x===null?w.sort(s.transparent?jhe:Yhe):x.call(this,w,t);for(let S=0,_=w.length;S<_;S++){const O=w[S];f[y]=O.start*l,p[y]=O.count,y++}S_.reset()}else for(let w=0,x=u.length;w<x;w++)if(u[w]&&h[w]){let S=!1;if(v&&(this.getMatrixAt(w,oc),this.getBoundingSphereAt(w,kh).applyMatrix4(oc),S=!__.intersectsSphere(kh)),!S){const _=g[w];f[y]=_.start*l,p[y]=_.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,n,t,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class Ur extends Br{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const yb=new ne,bb=new ne,_5=new pt,Hp=new ku,Py=new Cr,C_=new ne,S5=new ne;let wl=class extends An{constructor(e=new rn,n=new Ur){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,t=[0];for(let r=1,s=n.count;r<s;r++)yb.fromBufferAttribute(n,r-1),bb.fromBufferAttribute(n,r),t[r]=t[r-1],t[r]+=yb.distanceTo(bb);e.setAttribute("lineDistance",new Ct(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const t=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),Py.copy(t.boundingSphere),Py.applyMatrix4(r),Py.radius+=s,e.ray.intersectsSphere(Py)===!1)return;_5.copy(r).invert(),Hp.copy(e.ray).applyMatrix4(_5);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=l*l,u=this.isLineSegments?2:1,f=t.index,g=t.attributes.position;if(f!==null){const v=Math.max(0,a.start),y=Math.min(f.count,a.start+a.count);for(let w=v,x=y-1;w<x;w+=u){const S=f.getX(w),_=f.getX(w+1),O=Ay(this,e,Hp,h,S,_);O&&n.push(O)}if(this.isLineLoop){const w=f.getX(y-1),x=f.getX(v),S=Ay(this,e,Hp,h,w,x);S&&n.push(S)}}else{const v=Math.max(0,a.start),y=Math.min(g.count,a.start+a.count);for(let w=v,x=y-1;w<x;w+=u){const S=Ay(this,e,Hp,h,w,w+1);S&&n.push(S)}if(this.isLineLoop){const w=Ay(this,e,Hp,h,y-1,v);w&&n.push(w)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,t=Object.keys(n);if(t.length>0){const r=n[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}};function Ay(i,e,n,t,r,s){const a=i.geometry.attributes.position;if(yb.fromBufferAttribute(a,r),bb.fromBufferAttribute(a,s),n.distanceSqToSegment(yb,bb,C_,S5)>t)return;C_.applyMatrix4(i.matrixWorld);const h=e.ray.origin.distanceTo(C_);if(!(h<e.near||h>e.far))return{distance:h,point:S5.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,object:i}}const C5=new ne,k5=new ne;class Ra extends wl{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,t=[];for(let r=0,s=n.count;r<s;r+=2)C5.fromBufferAttribute(n,r),k5.fromBufferAttribute(n,r+1),t[r]=r===0?0:t[r-1],t[r+1]=t[r]+C5.distanceTo(k5);e.setAttribute("lineDistance",new Ct(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xL extends wl{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class nT extends Br{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const T5=new pt,BC=new ku,Ry=new Cr,Iy=new ne;class wL extends An{constructor(e=new rn,n=new nT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const t=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),Ry.copy(t.boundingSphere),Ry.applyMatrix4(r),Ry.radius+=s,e.ray.intersectsSphere(Ry)===!1)return;T5.copy(r).invert(),BC.copy(e.ray).applyMatrix4(T5);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=l*l,u=t.index,p=t.attributes.position;if(u!==null){const g=Math.max(0,a.start),v=Math.min(u.count,a.start+a.count);for(let y=g,w=v;y<w;y++){const x=u.getX(y);Iy.fromBufferAttribute(p,x),M5(Iy,x,h,r,e,n,this)}}else{const g=Math.max(0,a.start),v=Math.min(p.count,a.start+a.count);for(let y=g,w=v;y<w;y++)Iy.fromBufferAttribute(p,y),M5(Iy,y,h,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,t=Object.keys(n);if(t.length>0){const r=n[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function M5(i,e,n,t,r,s,a){const l=BC.distanceSqToPoint(i);if(l<n){const h=new ne;BC.closestPointToPoint(i,h),h.applyMatrix4(t);const u=r.ray.origin.distanceTo(h);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(l),point:h,index:e,face:null,object:a})}}class Jhe extends hi{constructor(e,n,t,r,s,a,l,h,u){super(e,n,t,r,s,a,l,h,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Vi,this.magFilter=s!==void 0?s:Vi,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class UC extends hi{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=er,this.minFilter=er,this.generateMipmaps=!1,this.needsUpdate=!0}}class ru extends hi{constructor(e,n,t,r,s,a,l,h,u,f,p,g){super(null,a,l,h,u,f,r,s,p,g),this.isCompressedTexture=!0,this.image={width:n,height:t},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class eue extends ru{constructor(e,n,t,r,s,a){super(e,n,t,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ts}}class tue extends ru{constructor(e,n,t){super(void 0,e[0].width,e[0].height,n,t,Ol),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class nue extends hi{constructor(e,n,t,r,s,a,l,h,u){super(e,n,t,r,s,a,l,h,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Mo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const t=this.getUtoTmapping(e);return this.getPoint(t,n)}getPoints(e=5){const n=[];for(let t=0;t<=e;t++)n.push(this.getPoint(t/e));return n}getSpacedPoints(e=5){const n=[];for(let t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let t,r=this.getPoint(0),s=0;n.push(0);for(let a=1;a<=e;a++)t=this.getPoint(a/e),s+=t.distanceTo(r),n.push(s),r=t;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const t=this.getLengths();let r=0;const s=t.length;let a;n?a=n:a=e*t[s-1];let l=0,h=s-1,u;for(;l<=h;)if(r=Math.floor(l+(h-l)/2),u=t[r]-a,u<0)l=r+1;else if(u>0)h=r-1;else{h=r;break}if(r=h,t[r]===a)return r/(s-1);const f=t[r],g=t[r+1]-f,v=(a-f)/g;return(r+v)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),l=this.getPoint(s),h=n||(a.isVector2?new Qe:new ne);return h.copy(l).sub(a).normalize(),h}getTangentAt(e,n){const t=this.getUtoTmapping(e);return this.getTangent(t,n)}computeFrenetFrames(e,n){const t=new ne,r=[],s=[],a=[],l=new ne,h=new pt;for(let v=0;v<=e;v++){const y=v/e;r[v]=this.getTangentAt(y,new ne)}s[0]=new ne,a[0]=new ne;let u=Number.MAX_VALUE;const f=Math.abs(r[0].x),p=Math.abs(r[0].y),g=Math.abs(r[0].z);f<=u&&(u=f,t.set(1,0,0)),p<=u&&(u=p,t.set(0,1,0)),g<=u&&t.set(0,0,1),l.crossVectors(r[0],t).normalize(),s[0].crossVectors(r[0],l),a[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),a[v]=a[v-1].clone(),l.crossVectors(r[v-1],r[v]),l.length()>Number.EPSILON){l.normalize();const y=Math.acos(Ri(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(h.makeRotationAxis(l,y))}a[v].crossVectors(r[v],s[v])}if(n===!0){let v=Math.acos(Ri(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(v=-v);for(let y=1;y<=e;y++)s[y].applyMatrix4(h.makeRotationAxis(r[y],v*y)),a[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class AO extends Mo{constructor(e=0,n=0,t=1,r=1,s=0,a=Math.PI*2,l=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=t,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=h}getPoint(e,n=new Qe){const t=n,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let h=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=h-this.aX,v=u-this.aY;h=g*f-v*p+this.aX,u=g*p+v*f+this.aY}return t.set(h,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _L extends AO{constructor(e,n,t,r,s,a){super(e,n,t,t,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function iT(){let i=0,e=0,n=0,t=0;function r(s,a,l,h){i=s,e=l,n=-3*s+3*a-2*l-h,t=2*s-2*a+l+h}return{initCatmullRom:function(s,a,l,h,u){r(a,l,u*(l-s),u*(h-a))},initNonuniformCatmullRom:function(s,a,l,h,u,f,p){let g=(a-s)/u-(l-s)/(u+f)+(l-a)/f,v=(l-a)/f-(h-a)/(f+p)+(h-l)/p;g*=f,v*=f,r(a,l,g,v)},calc:function(s){const a=s*s,l=a*s;return i+e*s+n*a+t*l}}}const Dy=new ne,k_=new iT,T_=new iT,M_=new iT;class SL extends Mo{constructor(e=[],n=!1,t="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=t,this.tension=r}getPoint(e,n=new ne){const t=n,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),h=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:h===0&&l===s-1&&(l=s-2,h=1);let u,f;this.closed||l>0?u=r[(l-1)%s]:(Dy.subVectors(r[0],r[1]).add(r[0]),u=Dy);const p=r[l%s],g=r[(l+1)%s];if(this.closed||l+2<s?f=r[(l+2)%s]:(Dy.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Dy),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(p),v),w=Math.pow(p.distanceToSquared(g),v),x=Math.pow(g.distanceToSquared(f),v);w<1e-4&&(w=1),y<1e-4&&(y=w),x<1e-4&&(x=w),k_.initNonuniformCatmullRom(u.x,p.x,g.x,f.x,y,w,x),T_.initNonuniformCatmullRom(u.y,p.y,g.y,f.y,y,w,x),M_.initNonuniformCatmullRom(u.z,p.z,g.z,f.z,y,w,x)}else this.curveType==="catmullrom"&&(k_.initCatmullRom(u.x,p.x,g.x,f.x,this.tension),T_.initCatmullRom(u.y,p.y,g.y,f.y,this.tension),M_.initCatmullRom(u.z,p.z,g.z,f.z,this.tension));return t.set(k_.calc(h),T_.calc(h),M_.calc(h)),t}copy(e){super.copy(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,t=this.points.length;n<t;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const r=e.points[n];this.points.push(new ne().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function E5(i,e,n,t,r){const s=(t-e)*.5,a=(r-n)*.5,l=i*i,h=i*l;return(2*n-2*t+s+a)*h+(-3*n+3*t-2*s-a)*l+s*i+n}function iue(i,e){const n=1-i;return n*n*e}function rue(i,e){return 2*(1-i)*i*e}function sue(i,e){return i*i*e}function dg(i,e,n,t){return iue(i,e)+rue(i,n)+sue(i,t)}function oue(i,e){const n=1-i;return n*n*n*e}function aue(i,e){const n=1-i;return 3*n*n*i*e}function lue(i,e){return 3*(1-i)*i*i*e}function cue(i,e){return i*i*i*e}function fg(i,e,n,t,r){return oue(i,e)+aue(i,n)+lue(i,t)+cue(i,r)}class rT extends Mo{constructor(e=new Qe,n=new Qe,t=new Qe,r=new Qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=t,this.v3=r}getPoint(e,n=new Qe){const t=n,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return t.set(fg(e,r.x,s.x,a.x,l.x),fg(e,r.y,s.y,a.y,l.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CL extends Mo{constructor(e=new ne,n=new ne,t=new ne,r=new ne){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=t,this.v3=r}getPoint(e,n=new ne){const t=n,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return t.set(fg(e,r.x,s.x,a.x,l.x),fg(e,r.y,s.y,a.y,l.y),fg(e,r.z,s.z,a.z,l.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sT extends Mo{constructor(e=new Qe,n=new Qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Qe){const t=n;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Qe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kL extends Mo{constructor(e=new ne,n=new ne){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new ne){const t=n;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ne){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oT extends Mo{constructor(e=new Qe,n=new Qe,t=new Qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=t}getPoint(e,n=new Qe){const t=n,r=this.v0,s=this.v1,a=this.v2;return t.set(dg(e,r.x,s.x,a.x),dg(e,r.y,s.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aT extends Mo{constructor(e=new ne,n=new ne,t=new ne){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=t}getPoint(e,n=new ne){const t=n,r=this.v0,s=this.v1,a=this.v2;return t.set(dg(e,r.x,s.x,a.x),dg(e,r.y,s.y,a.y),dg(e,r.z,s.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lT extends Mo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Qe){const t=n,r=this.points,s=(r.length-1)*e,a=Math.floor(s),l=s-a,h=r[a===0?a:a-1],u=r[a],f=r[a>r.length-2?r.length-1:a+1],p=r[a>r.length-3?r.length-1:a+2];return t.set(E5(l,h.x,u.x,f.x,p.x),E5(l,h.y,u.y,f.y,p.y)),t}copy(e){super.copy(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,t=this.points.length;n<t;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const r=e.points[n];this.points.push(new Qe().fromArray(r))}return this}}var Ob=Object.freeze({__proto__:null,ArcCurve:_L,CatmullRomCurve3:SL,CubicBezierCurve:rT,CubicBezierCurve3:CL,EllipseCurve:AO,LineCurve:sT,LineCurve3:kL,QuadraticBezierCurve:oT,QuadraticBezierCurve3:aT,SplineCurve:lT});class TL extends Mo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const t=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Ob[t](n,e))}return this}getPoint(e,n){const t=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=t){const a=r[s]-t,l=this.curves[s],h=l.getLength(),u=h===0?0:1-a/h;return l.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let t=0,r=this.curves.length;t<r;t++)n+=this.curves[t].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let t=0;t<=e;t++)n.push(this.getPoint(t/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let t;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,h=a.getPoints(l);for(let u=0;u<h.length;u++){const f=h[u];t&&t.equals(f)||(n.push(f),t=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,t=e.curves.length;n<t;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,t=this.curves.length;n<t;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,t=e.curves.length;n<t;n++){const r=e.curves[n];this.curves.push(new Ob[r.type]().fromJSON(r))}return this}}let zg=class extends TL{constructor(e){super(),this.type="Path",this.currentPoint=new Qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,t=e.length;n<t;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const t=new sT(this.currentPoint.clone(),new Qe(e,n));return this.curves.push(t),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,t,r){const s=new oT(this.currentPoint.clone(),new Qe(e,n),new Qe(t,r));return this.curves.push(s),this.currentPoint.set(t,r),this}bezierCurveTo(e,n,t,r,s,a){const l=new rT(this.currentPoint.clone(),new Qe(e,n),new Qe(t,r),new Qe(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),t=new lT(n);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,t,r,s,a){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+l,n+h,t,r,s,a),this}absarc(e,n,t,r,s,a){return this.absellipse(e,n,t,t,r,s,a),this}ellipse(e,n,t,r,s,a,l,h){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,n+f,t,r,s,a,l,h),this}absellipse(e,n,t,r,s,a,l,h){const u=new AO(e,n,t,r,s,a,l,h);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class E0 extends rn{constructor(e=[new Qe(0,-.5),new Qe(.5,0),new Qe(0,.5)],n=12,t=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:t,phiLength:r},n=Math.floor(n),r=Ri(r,0,Math.PI*2);const s=[],a=[],l=[],h=[],u=[],f=1/n,p=new ne,g=new Qe,v=new ne,y=new ne,w=new ne;let x=0,S=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,v.x=S*1,v.y=-x,v.z=S*0,w.copy(v),v.normalize(),h.push(v.x,v.y,v.z);break;case e.length-1:h.push(w.x,w.y,w.z);break;default:x=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,v.x=S*1,v.y=-x,v.z=S*0,y.copy(v),v.x+=w.x,v.y+=w.y,v.z+=w.z,v.normalize(),h.push(v.x,v.y,v.z),w.copy(y)}for(let _=0;_<=n;_++){const O=t+_*f*r,k=Math.sin(O),M=Math.cos(O);for(let P=0;P<=e.length-1;P++){p.x=e[P].x*k,p.y=e[P].y,p.z=e[P].x*M,a.push(p.x,p.y,p.z),g.x=_/n,g.y=P/(e.length-1),l.push(g.x,g.y);const D=h[3*P+0]*k,A=h[3*P+1],R=h[3*P+0]*M;u.push(D,A,R)}}for(let _=0;_<n;_++)for(let O=0;O<e.length-1;O++){const k=O+_*e.length,M=k,P=k+e.length,D=k+e.length+1,A=k+1;s.push(M,P,A),s.push(D,A,P)}this.setIndex(s),this.setAttribute("position",new Ct(a,3)),this.setAttribute("uv",new Ct(l,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new E0(e.points,e.segments,e.phiStart,e.phiLength)}}class RO extends E0{constructor(e=1,n=1,t=4,r=8){const s=new zg;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(t),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:t,radialSegments:r}}static fromJSON(e){return new RO(e.radius,e.length,e.capSegments,e.radialSegments)}}class IO extends rn{constructor(e=1,n=32,t=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:t,thetaLength:r},n=Math.max(3,n);const s=[],a=[],l=[],h=[],u=new ne,f=new Qe;a.push(0,0,0),l.push(0,0,1),h.push(.5,.5);for(let p=0,g=3;p<=n;p++,g+=3){const v=t+p/n*r;u.x=e*Math.cos(v),u.y=e*Math.sin(v),a.push(u.x,u.y,u.z),l.push(0,0,1),f.x=(a[g]/e+1)/2,f.y=(a[g+1]/e+1)/2,h.push(f.x,f.y)}for(let p=1;p<=n;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new IO(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Wf extends rn{constructor(e=1,n=1,t=1,r=32,s=1,a=!1,l=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:t,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:h};const u=this;r=Math.floor(r),s=Math.floor(s);const f=[],p=[],g=[],v=[];let y=0;const w=[],x=t/2;let S=0;_(),a===!1&&(e>0&&O(!0),n>0&&O(!1)),this.setIndex(f),this.setAttribute("position",new Ct(p,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(v,2));function _(){const k=new ne,M=new ne;let P=0;const D=(n-e)/t;for(let A=0;A<=s;A++){const R=[],T=A/s,N=T*(n-e)+e;for(let L=0;L<=r;L++){const I=L/r,$=I*h+l,B=Math.sin($),U=Math.cos($);M.x=N*B,M.y=-T*t+x,M.z=N*U,p.push(M.x,M.y,M.z),k.set(B,D,U).normalize(),g.push(k.x,k.y,k.z),v.push(I,1-T),R.push(y++)}w.push(R)}for(let A=0;A<r;A++)for(let R=0;R<s;R++){const T=w[R][A],N=w[R+1][A],L=w[R+1][A+1],I=w[R][A+1];f.push(T,N,I),f.push(N,L,I),P+=6}u.addGroup(S,P,0),S+=P}function O(k){const M=y,P=new Qe,D=new ne;let A=0;const R=k===!0?e:n,T=k===!0?1:-1;for(let L=1;L<=r;L++)p.push(0,x*T,0),g.push(0,T,0),v.push(.5,.5),y++;const N=y;for(let L=0;L<=r;L++){const $=L/r*h+l,B=Math.cos($),U=Math.sin($);D.x=R*U,D.y=x*T,D.z=R*B,p.push(D.x,D.y,D.z),g.push(0,T,0),P.x=B*.5+.5,P.y=U*.5*T+.5,v.push(P.x,P.y),y++}for(let L=0;L<r;L++){const I=M+L,$=N+L;k===!0?f.push($,$+1,I):f.push($+1,$,I),A+=3}u.addGroup(S,A,k===!0?1:2),S+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class DO extends Wf{constructor(e=1,n=1,t=32,r=1,s=!1,a=0,l=Math.PI*2){super(0,e,n,t,r,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:t,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new DO(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Jc extends rn{constructor(e=[],n=[],t=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:t,detail:r};const s=[],a=[];l(r),u(t),f(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(_){const O=new ne,k=new ne,M=new ne;for(let P=0;P<n.length;P+=3)v(n[P+0],O),v(n[P+1],k),v(n[P+2],M),h(O,k,M,_)}function h(_,O,k,M){const P=M+1,D=[];for(let A=0;A<=P;A++){D[A]=[];const R=_.clone().lerp(k,A/P),T=O.clone().lerp(k,A/P),N=P-A;for(let L=0;L<=N;L++)L===0&&A===P?D[A][L]=R:D[A][L]=R.clone().lerp(T,L/N)}for(let A=0;A<P;A++)for(let R=0;R<2*(P-A)-1;R++){const T=Math.floor(R/2);R%2===0?(g(D[A][T+1]),g(D[A+1][T]),g(D[A][T])):(g(D[A][T+1]),g(D[A+1][T+1]),g(D[A+1][T]))}}function u(_){const O=new ne;for(let k=0;k<s.length;k+=3)O.x=s[k+0],O.y=s[k+1],O.z=s[k+2],O.normalize().multiplyScalar(_),s[k+0]=O.x,s[k+1]=O.y,s[k+2]=O.z}function f(){const _=new ne;for(let O=0;O<s.length;O+=3){_.x=s[O+0],_.y=s[O+1],_.z=s[O+2];const k=x(_)/2/Math.PI+.5,M=S(_)/Math.PI+.5;a.push(k,1-M)}y(),p()}function p(){for(let _=0;_<a.length;_+=6){const O=a[_+0],k=a[_+2],M=a[_+4],P=Math.max(O,k,M),D=Math.min(O,k,M);P>.9&&D<.1&&(O<.2&&(a[_+0]+=1),k<.2&&(a[_+2]+=1),M<.2&&(a[_+4]+=1))}}function g(_){s.push(_.x,_.y,_.z)}function v(_,O){const k=_*3;O.x=e[k+0],O.y=e[k+1],O.z=e[k+2]}function y(){const _=new ne,O=new ne,k=new ne,M=new ne,P=new Qe,D=new Qe,A=new Qe;for(let R=0,T=0;R<s.length;R+=9,T+=6){_.set(s[R+0],s[R+1],s[R+2]),O.set(s[R+3],s[R+4],s[R+5]),k.set(s[R+6],s[R+7],s[R+8]),P.set(a[T+0],a[T+1]),D.set(a[T+2],a[T+3]),A.set(a[T+4],a[T+5]),M.copy(_).add(O).add(k).divideScalar(3);const N=x(M);w(P,T+0,_,N),w(D,T+2,O,N),w(A,T+4,k,N)}}function w(_,O,k,M){M<0&&_.x===1&&(a[O]=_.x-1),k.x===0&&k.z===0&&(a[O]=M/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function S(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jc(e.vertices,e.indices,e.radius,e.details)}}class NO extends Jc{constructor(e=1,n=0){const t=(1+Math.sqrt(5))/2,r=1/t,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-t,0,-r,t,0,r,-t,0,r,t,-r,-t,0,-r,t,0,r,-t,0,r,t,0,-t,0,-r,t,0,-r,-t,0,r,t,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new NO(e.radius,e.detail)}}const Ny=new ne,$y=new ne,E_=new ne,Vy=new _s;class ML extends rn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(iu*n),a=e.getIndex(),l=e.getAttribute("position"),h=a?a.count:l.count,u=[0,0,0],f=["a","b","c"],p=new Array(3),g={},v=[];for(let y=0;y<h;y+=3){a?(u[0]=a.getX(y),u[1]=a.getX(y+1),u[2]=a.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:w,b:x,c:S}=Vy;if(w.fromBufferAttribute(l,u[0]),x.fromBufferAttribute(l,u[1]),S.fromBufferAttribute(l,u[2]),Vy.getNormal(E_),p[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,p[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,p[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let _=0;_<3;_++){const O=(_+1)%3,k=p[_],M=p[O],P=Vy[f[_]],D=Vy[f[O]],A=`${k}_${M}`,R=`${M}_${k}`;R in g&&g[R]?(E_.dot(g[R].normal)<=s&&(v.push(P.x,P.y,P.z),v.push(D.x,D.y,D.z)),g[R]=null):A in g||(g[A]={index0:u[_],index1:u[O],normal:E_.clone()})}}for(const y in g)if(g[y]){const{index0:w,index1:x}=g[y];Ny.fromBufferAttribute(l,w),$y.fromBufferAttribute(l,x),v.push(Ny.x,Ny.y,Ny.z),v.push($y.x,$y.y,$y.z)}this.setAttribute("position",new Ct(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let su=class extends zg{constructor(e){super(e),this.uuid=no(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let t=0,r=this.holes.length;t<r;t++)n[t]=this.holes[t].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,t=e.holes.length;n<t;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,t=this.holes.length;n<t;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,t=e.holes.length;n<t;n++){const r=e.holes[n];this.holes.push(new zg().fromJSON(r))}return this}};const hue={triangulate:function(i,e,n=2){const t=e&&e.length,r=t?e[0]*n:i.length;let s=EL(i,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let l,h,u,f,p,g,v;if(t&&(s=mue(i,e,s,n)),i.length>80*n){l=u=i[0],h=f=i[1];for(let y=n;y<r;y+=n)p=i[y],g=i[y+1],p<l&&(l=p),g<h&&(h=g),p>u&&(u=p),g>f&&(f=g);v=Math.max(u-l,f-h),v=v!==0?32767/v:0}return Fg(s,a,n,l,h,v,0),a}};function EL(i,e,n,t,r){let s,a;if(r===kue(i,e,n,t)>0)for(s=e;s<n;s+=t)a=P5(s,i[s],i[s+1],a);else for(s=n-t;s>=e;s-=t)a=P5(s,i[s],i[s+1],a);return a&&$O(a,a.next)&&(Wg(a),a=a.next),a}function gu(i,e){if(!i)return i;e||(e=i);let n=i,t;do if(t=!1,!n.steiner&&($O(n,n.next)||Ti(n.prev,n,n.next)===0)){if(Wg(n),n=e=n.prev,n===n.next)break;t=!0}else n=n.next;while(t||n!==e);return e}function Fg(i,e,n,t,r,s,a){if(!i)return;!a&&s&&Oue(i,t,r,s);let l=i,h,u;for(;i.prev!==i.next;){if(h=i.prev,u=i.next,s?due(i,t,r,s):uue(i)){e.push(h.i/n|0),e.push(i.i/n|0),e.push(u.i/n|0),Wg(i),i=u.next,l=u.next;continue}if(i=u,i===l){a?a===1?(i=fue(gu(i),e,n),Fg(i,e,n,t,r,s,2)):a===2&&pue(i,e,n,t,r,s):Fg(gu(i),e,n,t,r,s,1);break}}}function uue(i){const e=i.prev,n=i,t=i.next;if(Ti(e,n,t)>=0)return!1;const r=e.x,s=n.x,a=t.x,l=e.y,h=n.y,u=t.y,f=r<s?r<a?r:a:s<a?s:a,p=l<h?l<u?l:u:h<u?h:u,g=r>s?r>a?r:a:s>a?s:a,v=l>h?l>u?l:u:h>u?h:u;let y=t.next;for(;y!==e;){if(y.x>=f&&y.x<=g&&y.y>=p&&y.y<=v&&Id(r,l,s,h,a,u,y.x,y.y)&&Ti(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function due(i,e,n,t){const r=i.prev,s=i,a=i.next;if(Ti(r,s,a)>=0)return!1;const l=r.x,h=s.x,u=a.x,f=r.y,p=s.y,g=a.y,v=l<h?l<u?l:u:h<u?h:u,y=f<p?f<g?f:g:p<g?p:g,w=l>h?l>u?l:u:h>u?h:u,x=f>p?f>g?f:g:p>g?p:g,S=zC(v,y,e,n,t),_=zC(w,x,e,n,t);let O=i.prevZ,k=i.nextZ;for(;O&&O.z>=S&&k&&k.z<=_;){if(O.x>=v&&O.x<=w&&O.y>=y&&O.y<=x&&O!==r&&O!==a&&Id(l,f,h,p,u,g,O.x,O.y)&&Ti(O.prev,O,O.next)>=0||(O=O.prevZ,k.x>=v&&k.x<=w&&k.y>=y&&k.y<=x&&k!==r&&k!==a&&Id(l,f,h,p,u,g,k.x,k.y)&&Ti(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;O&&O.z>=S;){if(O.x>=v&&O.x<=w&&O.y>=y&&O.y<=x&&O!==r&&O!==a&&Id(l,f,h,p,u,g,O.x,O.y)&&Ti(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;k&&k.z<=_;){if(k.x>=v&&k.x<=w&&k.y>=y&&k.y<=x&&k!==r&&k!==a&&Id(l,f,h,p,u,g,k.x,k.y)&&Ti(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function fue(i,e,n){let t=i;do{const r=t.prev,s=t.next.next;!$O(r,s)&&PL(r,t,t.next,s)&&Xg(r,s)&&Xg(s,r)&&(e.push(r.i/n|0),e.push(t.i/n|0),e.push(s.i/n|0),Wg(t),Wg(t.next),t=i=s),t=t.next}while(t!==i);return gu(t)}function pue(i,e,n,t,r,s){let a=i;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&_ue(a,l)){let h=AL(a,l);a=gu(a,a.next),h=gu(h,h.next),Fg(a,e,n,t,r,s,0),Fg(h,e,n,t,r,s,0);return}l=l.next}a=a.next}while(a!==i)}function mue(i,e,n,t){const r=[];let s,a,l,h,u;for(s=0,a=e.length;s<a;s++)l=e[s]*t,h=s<a-1?e[s+1]*t:i.length,u=EL(i,l,h,t,!1),u===u.next&&(u.steiner=!0),r.push(wue(u));for(r.sort(gue),s=0;s<r.length;s++)n=vue(r[s],n);return n}function gue(i,e){return i.x-e.x}function vue(i,e){const n=yue(i,e);if(!n)return e;const t=AL(n,i);return gu(t,t.next),gu(n,n.next)}function yue(i,e){let n=e,t=-1/0,r;const s=i.x,a=i.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const g=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(g<=s&&g>t&&(t=g,r=n.x<n.next.x?n:n.next,g===s))return r}n=n.next}while(n!==e);if(!r)return null;const l=r,h=r.x,u=r.y;let f=1/0,p;n=r;do s>=n.x&&n.x>=h&&s!==n.x&&Id(a<u?s:t,a,h,u,a<u?t:s,a,n.x,n.y)&&(p=Math.abs(a-n.y)/(s-n.x),Xg(n,i)&&(p<f||p===f&&(n.x>r.x||n.x===r.x&&bue(r,n)))&&(r=n,f=p)),n=n.next;while(n!==l);return r}function bue(i,e){return Ti(i.prev,i,e.prev)<0&&Ti(e.next,i,i.next)<0}function Oue(i,e,n,t){let r=i;do r.z===0&&(r.z=zC(r.x,r.y,e,n,t)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,xue(r)}function xue(i){let e,n,t,r,s,a,l,h,u=1;do{for(n=i,i=null,s=null,a=0;n;){for(a++,t=n,l=0,e=0;e<u&&(l++,t=t.nextZ,!!t);e++);for(h=u;l>0||h>0&&t;)l!==0&&(h===0||!t||n.z<=t.z)?(r=n,n=n.nextZ,l--):(r=t,t=t.nextZ,h--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=t}s.nextZ=null,u*=2}while(a>1);return i}function zC(i,e,n,t,r){return i=(i-n)*r|0,e=(e-t)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function wue(i){let e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function Id(i,e,n,t,r,s,a,l){return(r-a)*(e-l)>=(i-a)*(s-l)&&(i-a)*(t-l)>=(n-a)*(e-l)&&(n-a)*(s-l)>=(r-a)*(t-l)}function _ue(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Sue(i,e)&&(Xg(i,e)&&Xg(e,i)&&Cue(i,e)&&(Ti(i.prev,i,e.prev)||Ti(i,e.prev,e))||$O(i,e)&&Ti(i.prev,i,i.next)>0&&Ti(e.prev,e,e.next)>0)}function Ti(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function $O(i,e){return i.x===e.x&&i.y===e.y}function PL(i,e,n,t){const r=By(Ti(i,e,n)),s=By(Ti(i,e,t)),a=By(Ti(n,t,i)),l=By(Ti(n,t,e));return!!(r!==s&&a!==l||r===0&&Ly(i,n,e)||s===0&&Ly(i,t,e)||a===0&&Ly(n,i,t)||l===0&&Ly(n,e,t))}function Ly(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function By(i){return i>0?1:i<0?-1:0}function Sue(i,e){let n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&PL(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1}function Xg(i,e){return Ti(i.prev,i,i.next)<0?Ti(i,e,i.next)>=0&&Ti(i,i.prev,e)>=0:Ti(i,e,i.prev)<0||Ti(i,i.next,e)<0}function Cue(i,e){let n=i,t=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(t=!t),n=n.next;while(n!==i);return t}function AL(i,e){const n=new FC(i.i,i.x,i.y),t=new FC(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,n.next=r,r.prev=n,t.next=n,n.prev=t,s.next=t,t.prev=s,t}function P5(i,e,n,t){const r=new FC(i,e,n);return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function Wg(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function FC(i,e,n){this.i=i,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kue(i,e,n,t){let r=0;for(let s=e,a=n-t;s<n;s+=t)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}class _a{static area(e){const n=e.length;let t=0;for(let r=n-1,s=0;s<n;r=s++)t+=e[r].x*e[s].y-e[s].x*e[r].y;return t*.5}static isClockWise(e){return _a.area(e)<0}static triangulateShape(e,n){const t=[],r=[],s=[];A5(e),R5(t,e);let a=e.length;n.forEach(A5);for(let h=0;h<n.length;h++)r.push(a),a+=n[h].length,R5(t,n[h]);const l=hue.triangulate(t,r);for(let h=0;h<l.length;h+=3)s.push(l.slice(h,h+3));return s}}function A5(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function R5(i,e){for(let n=0;n<e.length;n++)i.push(e[n].x),i.push(e[n].y)}class VO extends rn{constructor(e=new su([new Qe(.5,.5),new Qe(-.5,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const t=this,r=[],s=[];for(let l=0,h=e.length;l<h;l++){const u=e[l];a(u)}this.setAttribute("position",new Ct(r,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function a(l){const h=[],u=n.curveSegments!==void 0?n.curveSegments:12,f=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,v=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:v-.1,w=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const S=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:Tue;let O,k=!1,M,P,D,A;S&&(O=S.getSpacedPoints(f),k=!0,g=!1,M=S.computeFrenetFrames(f,!1),P=new ne,D=new ne,A=new ne),g||(x=0,v=0,y=0,w=0);const R=l.extractPoints(u);let T=R.shape;const N=R.holes;if(!_a.isClockWise(T)){T=T.reverse();for(let re=0,H=N.length;re<H;re++){const q=N[re];_a.isClockWise(q)&&(N[re]=q.reverse())}}const I=_a.triangulateShape(T,N),$=T;for(let re=0,H=N.length;re<H;re++){const q=N[re];T=T.concat(q)}function B(re,H,q){return H||console.error("THREE.ExtrudeGeometry: vec does not exist"),re.clone().addScaledVector(H,q)}const U=T.length,Y=I.length;function Z(re,H,q){let le,fe,be;const Me=re.x-H.x,J=re.y-H.y,Q=q.x-re.x,ue=q.y-re.y,de=Me*Me+J*J,we=Me*ue-J*Q;if(Math.abs(we)>Number.EPSILON){const Te=Math.sqrt(de),Xe=Math.sqrt(Q*Q+ue*ue),Ve=H.x-J/Te,ze=H.y+Me/Te,rt=q.x-ue/Xe,Ge=q.y+Q/Xe,it=((rt-Ve)*ue-(Ge-ze)*Q)/(Me*ue-J*Q);le=Ve+Me*it-re.x,fe=ze+J*it-re.y;const kt=le*le+fe*fe;if(kt<=2)return new Qe(le,fe);be=Math.sqrt(kt/2)}else{let Te=!1;Me>Number.EPSILON?Q>Number.EPSILON&&(Te=!0):Me<-Number.EPSILON?Q<-Number.EPSILON&&(Te=!0):Math.sign(J)===Math.sign(ue)&&(Te=!0),Te?(le=-J,fe=Me,be=Math.sqrt(de)):(le=Me,fe=J,be=Math.sqrt(de/2))}return new Qe(le/be,fe/be)}const ie=[];for(let re=0,H=$.length,q=H-1,le=re+1;re<H;re++,q++,le++)q===H&&(q=0),le===H&&(le=0),ie[re]=Z($[re],$[q],$[le]);const ce=[];let ge,Ae=ie.concat();for(let re=0,H=N.length;re<H;re++){const q=N[re];ge=[];for(let le=0,fe=q.length,be=fe-1,Me=le+1;le<fe;le++,be++,Me++)be===fe&&(be=0),Me===fe&&(Me=0),ge[le]=Z(q[le],q[be],q[Me]);ce.push(ge),Ae=Ae.concat(ge)}for(let re=0;re<x;re++){const H=re/x,q=v*Math.cos(H*Math.PI/2),le=y*Math.sin(H*Math.PI/2)+w;for(let fe=0,be=$.length;fe<be;fe++){const Me=B($[fe],ie[fe],le);j(Me.x,Me.y,-q)}for(let fe=0,be=N.length;fe<be;fe++){const Me=N[fe];ge=ce[fe];for(let J=0,Q=Me.length;J<Q;J++){const ue=B(Me[J],ge[J],le);j(ue.x,ue.y,-q)}}}const Se=y+w;for(let re=0;re<U;re++){const H=g?B(T[re],Ae[re],Se):T[re];k?(D.copy(M.normals[0]).multiplyScalar(H.x),P.copy(M.binormals[0]).multiplyScalar(H.y),A.copy(O[0]).add(D).add(P),j(A.x,A.y,A.z)):j(H.x,H.y,0)}for(let re=1;re<=f;re++)for(let H=0;H<U;H++){const q=g?B(T[H],Ae[H],Se):T[H];k?(D.copy(M.normals[re]).multiplyScalar(q.x),P.copy(M.binormals[re]).multiplyScalar(q.y),A.copy(O[re]).add(D).add(P),j(A.x,A.y,A.z)):j(q.x,q.y,p/f*re)}for(let re=x-1;re>=0;re--){const H=re/x,q=v*Math.cos(H*Math.PI/2),le=y*Math.sin(H*Math.PI/2)+w;for(let fe=0,be=$.length;fe<be;fe++){const Me=B($[fe],ie[fe],le);j(Me.x,Me.y,p+q)}for(let fe=0,be=N.length;fe<be;fe++){const Me=N[fe];ge=ce[fe];for(let J=0,Q=Me.length;J<Q;J++){const ue=B(Me[J],ge[J],le);k?j(ue.x,ue.y+O[f-1].y,O[f-1].x+q):j(ue.x,ue.y,p+q)}}}he(),Ce();function he(){const re=r.length/3;if(g){let H=0,q=U*H;for(let le=0;le<Y;le++){const fe=I[le];K(fe[2]+q,fe[1]+q,fe[0]+q)}H=f+x*2,q=U*H;for(let le=0;le<Y;le++){const fe=I[le];K(fe[0]+q,fe[1]+q,fe[2]+q)}}else{for(let H=0;H<Y;H++){const q=I[H];K(q[2],q[1],q[0])}for(let H=0;H<Y;H++){const q=I[H];K(q[0]+U*f,q[1]+U*f,q[2]+U*f)}}t.addGroup(re,r.length/3-re,0)}function Ce(){const re=r.length/3;let H=0;pe($,H),H+=$.length;for(let q=0,le=N.length;q<le;q++){const fe=N[q];pe(fe,H),H+=fe.length}t.addGroup(re,r.length/3-re,1)}function pe(re,H){let q=re.length;for(;--q>=0;){const le=q;let fe=q-1;fe<0&&(fe=re.length-1);for(let be=0,Me=f+x*2;be<Me;be++){const J=U*be,Q=U*(be+1),ue=H+le+J,de=H+fe+J,we=H+fe+Q,Te=H+le+Q;X(ue,de,we,Te)}}}function j(re,H,q){h.push(re),h.push(H),h.push(q)}function K(re,H,q){F(re),F(H),F(q);const le=r.length/3,fe=_.generateTopUV(t,r,le-3,le-2,le-1);te(fe[0]),te(fe[1]),te(fe[2])}function X(re,H,q,le){F(re),F(H),F(le),F(H),F(q),F(le);const fe=r.length/3,be=_.generateSideWallUV(t,r,fe-6,fe-3,fe-2,fe-1);te(be[0]),te(be[1]),te(be[3]),te(be[1]),te(be[2]),te(be[3])}function F(re){r.push(h[re*3+0]),r.push(h[re*3+1]),r.push(h[re*3+2])}function te(re){s.push(re.x),s.push(re.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,t=this.parameters.options;return Mue(n,t,e)}static fromJSON(e,n){const t=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=n[e.shapes[s]];t.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Ob[r.type]().fromJSON(r)),new VO(t,e.options)}}const Tue={generateTopUV:function(i,e,n,t,r){const s=e[n*3],a=e[n*3+1],l=e[t*3],h=e[t*3+1],u=e[r*3],f=e[r*3+1];return[new Qe(s,a),new Qe(l,h),new Qe(u,f)]},generateSideWallUV:function(i,e,n,t,r,s){const a=e[n*3],l=e[n*3+1],h=e[n*3+2],u=e[t*3],f=e[t*3+1],p=e[t*3+2],g=e[r*3],v=e[r*3+1],y=e[r*3+2],w=e[s*3],x=e[s*3+1],S=e[s*3+2];return Math.abs(l-f)<Math.abs(a-u)?[new Qe(a,1-h),new Qe(u,1-p),new Qe(g,1-y),new Qe(w,1-S)]:[new Qe(l,1-h),new Qe(f,1-p),new Qe(v,1-y),new Qe(x,1-S)]}};function Mue(i,e,n){if(n.shapes=[],Array.isArray(i))for(let t=0,r=i.length;t<r;t++){const s=i[t];n.shapes.push(s.uuid)}else n.shapes.push(i.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class LO extends Jc{constructor(e=1,n=0){const t=(1+Math.sqrt(5))/2,r=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new LO(e.radius,e.detail)}}class P0 extends Jc{constructor(e=1,n=0){const t=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(t,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new P0(e.radius,e.detail)}}class BO extends rn{constructor(e=.5,n=1,t=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:t,phiSegments:r,thetaStart:s,thetaLength:a},t=Math.max(3,t),r=Math.max(1,r);const l=[],h=[],u=[],f=[];let p=e;const g=(n-e)/r,v=new ne,y=new Qe;for(let w=0;w<=r;w++){for(let x=0;x<=t;x++){const S=s+x/t*a;v.x=p*Math.cos(S),v.y=p*Math.sin(S),h.push(v.x,v.y,v.z),u.push(0,0,1),y.x=(v.x/n+1)/2,y.y=(v.y/n+1)/2,f.push(y.x,y.y)}p+=g}for(let w=0;w<r;w++){const x=w*(t+1);for(let S=0;S<t;S++){const _=S+x,O=_,k=_+t+1,M=_+t+2,P=_+1;l.push(O,k,P),l.push(k,M,P)}}this.setIndex(l),this.setAttribute("position",new Ct(h,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BO(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class UO extends rn{constructor(e=new su([new Qe(0,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const t=[],r=[],s=[],a=[];let l=0,h=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(l,h,f),l+=h,h=0;this.setIndex(t),this.setAttribute("position",new Ct(r,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(a,2));function u(f){const p=r.length/3,g=f.extractPoints(n);let v=g.shape;const y=g.holes;_a.isClockWise(v)===!1&&(v=v.reverse());for(let x=0,S=y.length;x<S;x++){const _=y[x];_a.isClockWise(_)===!0&&(y[x]=_.reverse())}const w=_a.triangulateShape(v,y);for(let x=0,S=y.length;x<S;x++){const _=y[x];v=v.concat(_)}for(let x=0,S=v.length;x<S;x++){const _=v[x];r.push(_.x,_.y,0),s.push(0,0,1),a.push(_.x,_.y)}for(let x=0,S=w.length;x<S;x++){const _=w[x],O=_[0]+p,k=_[1]+p,M=_[2]+p;t.push(O,k,M),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Eue(n,e)}static fromJSON(e,n){const t=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=n[e.shapes[r]];t.push(a)}return new UO(t,e.curveSegments)}}function Eue(i,e){if(e.shapes=[],Array.isArray(i))for(let n=0,t=i.length;n<t;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class A0 extends rn{constructor(e=1,n=32,t=16,r=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:t,phiStart:r,phiLength:s,thetaStart:a,thetaLength:l},n=Math.max(3,Math.floor(n)),t=Math.max(2,Math.floor(t));const h=Math.min(a+l,Math.PI);let u=0;const f=[],p=new ne,g=new ne,v=[],y=[],w=[],x=[];for(let S=0;S<=t;S++){const _=[],O=S/t;let k=0;S===0&&a===0?k=.5/n:S===t&&h===Math.PI&&(k=-.5/n);for(let M=0;M<=n;M++){const P=M/n;p.x=-e*Math.cos(r+P*s)*Math.sin(a+O*l),p.y=e*Math.cos(a+O*l),p.z=e*Math.sin(r+P*s)*Math.sin(a+O*l),y.push(p.x,p.y,p.z),g.copy(p).normalize(),w.push(g.x,g.y,g.z),x.push(P+k,1-O),_.push(u++)}f.push(_)}for(let S=0;S<t;S++)for(let _=0;_<n;_++){const O=f[S][_+1],k=f[S][_],M=f[S+1][_],P=f[S+1][_+1];(S!==0||a>0)&&v.push(O,k,P),(S!==t-1||h<Math.PI)&&v.push(k,M,P)}this.setIndex(v),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(w,3)),this.setAttribute("uv",new Ct(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class zO extends Jc{constructor(e=1,n=0){const t=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(t,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new zO(e.radius,e.detail)}}class FO extends rn{constructor(e=1,n=.4,t=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:t,tubularSegments:r,arc:s},t=Math.floor(t),r=Math.floor(r);const a=[],l=[],h=[],u=[],f=new ne,p=new ne,g=new ne;for(let v=0;v<=t;v++)for(let y=0;y<=r;y++){const w=y/r*s,x=v/t*Math.PI*2;p.x=(e+n*Math.cos(x))*Math.cos(w),p.y=(e+n*Math.cos(x))*Math.sin(w),p.z=n*Math.sin(x),l.push(p.x,p.y,p.z),f.x=e*Math.cos(w),f.y=e*Math.sin(w),g.subVectors(p,f).normalize(),h.push(g.x,g.y,g.z),u.push(y/r),u.push(v/t)}for(let v=1;v<=t;v++)for(let y=1;y<=r;y++){const w=(r+1)*v+y-1,x=(r+1)*(v-1)+y-1,S=(r+1)*(v-1)+y,_=(r+1)*v+y;a.push(w,x,_),a.push(x,S,_)}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FO(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class XO extends rn{constructor(e=1,n=.4,t=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:t,radialSegments:r,p:s,q:a},t=Math.floor(t),r=Math.floor(r);const l=[],h=[],u=[],f=[],p=new ne,g=new ne,v=new ne,y=new ne,w=new ne,x=new ne,S=new ne;for(let O=0;O<=t;++O){const k=O/t*s*Math.PI*2;_(k,s,a,e,v),_(k+.01,s,a,e,y),x.subVectors(y,v),S.addVectors(y,v),w.crossVectors(x,S),S.crossVectors(w,x),w.normalize(),S.normalize();for(let M=0;M<=r;++M){const P=M/r*Math.PI*2,D=-n*Math.cos(P),A=n*Math.sin(P);p.x=v.x+(D*S.x+A*w.x),p.y=v.y+(D*S.y+A*w.y),p.z=v.z+(D*S.z+A*w.z),h.push(p.x,p.y,p.z),g.subVectors(p,v).normalize(),u.push(g.x,g.y,g.z),f.push(O/t),f.push(M/r)}}for(let O=1;O<=t;O++)for(let k=1;k<=r;k++){const M=(r+1)*(O-1)+(k-1),P=(r+1)*O+(k-1),D=(r+1)*O+k,A=(r+1)*(O-1)+k;l.push(M,P,A),l.push(P,D,A)}this.setIndex(l),this.setAttribute("position",new Ct(h,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(f,2));function _(O,k,M,P,D){const A=Math.cos(O),R=Math.sin(O),T=M/k*O,N=Math.cos(T);D.x=P*(2+N)*.5*A,D.y=P*(2+N)*R*.5,D.z=P*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XO(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class WO extends rn{constructor(e=new aT(new ne(-1,-1,0),new ne(-1,1,0),new ne(1,1,0)),n=64,t=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:t,radialSegments:r,closed:s};const a=e.computeFrenetFrames(n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new ne,h=new ne,u=new Qe;let f=new ne;const p=[],g=[],v=[],y=[];w(),this.setIndex(y),this.setAttribute("position",new Ct(p,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(v,2));function w(){for(let O=0;O<n;O++)x(O);x(s===!1?n:0),_(),S()}function x(O){f=e.getPointAt(O/n,f);const k=a.normals[O],M=a.binormals[O];for(let P=0;P<=r;P++){const D=P/r*Math.PI*2,A=Math.sin(D),R=-Math.cos(D);h.x=R*k.x+A*M.x,h.y=R*k.y+A*M.y,h.z=R*k.z+A*M.z,h.normalize(),g.push(h.x,h.y,h.z),l.x=f.x+t*h.x,l.y=f.y+t*h.y,l.z=f.z+t*h.z,p.push(l.x,l.y,l.z)}}function S(){for(let O=1;O<=n;O++)for(let k=1;k<=r;k++){const M=(r+1)*(O-1)+(k-1),P=(r+1)*O+(k-1),D=(r+1)*O+k,A=(r+1)*(O-1)+k;y.push(M,P,A),y.push(P,D,A)}}function _(){for(let O=0;O<=n;O++)for(let k=0;k<=r;k++)u.x=O/n,u.y=k/r,v.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new WO(new Ob[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class RL extends rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],t=new Set,r=new ne,s=new ne;if(e.index!==null){const a=e.attributes.position,l=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:l.count,materialIndex:0}]);for(let u=0,f=h.length;u<f;++u){const p=h[u],g=p.start,v=p.count;for(let y=g,w=g+v;y<w;y+=3)for(let x=0;x<3;x++){const S=l.getX(y+x),_=l.getX(y+(x+1)%3);r.fromBufferAttribute(a,S),s.fromBufferAttribute(a,_),I5(r,s,t)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,h=a.count/3;l<h;l++)for(let u=0;u<3;u++){const f=3*l+u,p=3*l+(u+1)%3;r.fromBufferAttribute(a,f),s.fromBufferAttribute(a,p),I5(r,s,t)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function I5(i,e,n){const t=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return n.has(t)===!0||n.has(r)===!0?!1:(n.add(t),n.add(r),!0)}var D5=Object.freeze({__proto__:null,BoxGeometry:Zc,CapsuleGeometry:RO,CircleGeometry:IO,ConeGeometry:DO,CylinderGeometry:Wf,DodecahedronGeometry:NO,EdgesGeometry:ML,ExtrudeGeometry:VO,IcosahedronGeometry:LO,LatheGeometry:E0,OctahedronGeometry:P0,PlaneGeometry:Kc,PolyhedronGeometry:Jc,RingGeometry:BO,ShapeGeometry:UO,SphereGeometry:A0,TetrahedronGeometry:zO,TorusGeometry:FO,TorusKnotGeometry:XO,TubeGeometry:WO,WireframeGeometry:RL});class IL extends Br{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class pg extends os{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class cT extends Br{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DL extends cT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ri(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class mg extends Br{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nt(16777215),this.specular=new nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.combine=x0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NL extends Br{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class $L extends Br{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hT extends Br{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.combine=x0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VL extends Br{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LL extends Ur{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Yh(i,e,n){return!i||!n&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function BL(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function UL(i){function e(r,s){return i[r]-i[s]}const n=i.length,t=new Array(n);for(let r=0;r!==n;++r)t[r]=r;return t.sort(e),t}function XC(i,e,n){const t=i.length,r=new i.constructor(t);for(let s=0,a=0;a!==t;++s){const l=n[s]*e;for(let h=0;h!==e;++h)r[a++]=i[l+h]}return r}function uT(i,e,n,t){let r=1,s=i[0];for(;s!==void 0&&s[t]===void 0;)s=i[r++];if(s===void 0)return;let a=s[t];if(a!==void 0)if(Array.isArray(a))do a=s[t],a!==void 0&&(e.push(s.time),n.push.apply(n,a)),s=i[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[t],a!==void 0&&(e.push(s.time),a.toArray(n,n.length)),s=i[r++];while(s!==void 0);else do a=s[t],a!==void 0&&(e.push(s.time),n.push(a)),s=i[r++];while(s!==void 0)}function Pue(i,e,n,t,r=30){const s=i.clone();s.name=e;const a=[];for(let h=0;h<s.tracks.length;++h){const u=s.tracks[h],f=u.getValueSize(),p=[],g=[];for(let v=0;v<u.times.length;++v){const y=u.times[v]*r;if(!(y<n||y>=t)){p.push(u.times[v]);for(let w=0;w<f;++w)g.push(u.values[v*f+w])}}p.length!==0&&(u.times=Yh(p,u.times.constructor),u.values=Yh(g,u.values.constructor),a.push(u))}s.tracks=a;let l=1/0;for(let h=0;h<s.tracks.length;++h)l>s.tracks[h].times[0]&&(l=s.tracks[h].times[0]);for(let h=0;h<s.tracks.length;++h)s.tracks[h].shift(-1*l);return s.resetDuration(),s}function Aue(i,e=0,n=i,t=30){t<=0&&(t=30);const r=n.tracks.length,s=e/t;for(let a=0;a<r;++a){const l=n.tracks[a],h=l.ValueTypeName;if(h==="bool"||h==="string")continue;const u=i.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===h});if(u===void 0)continue;let f=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);let g=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);const y=l.times.length-1;let w;if(s<=l.times[0]){const S=f,_=p-f;w=l.values.slice(S,_)}else if(s>=l.times[y]){const S=y*p+f,_=S+p-f;w=l.values.slice(S,_)}else{const S=l.createInterpolant(),_=f,O=p-f;S.evaluate(s),w=S.resultBuffer.slice(_,O)}h==="quaternion"&&new Wi().fromArray(w).normalize().conjugate().toArray(w);const x=u.times.length;for(let S=0;S<x;++S){const _=S*v+g;if(h==="quaternion")Wi.multiplyQuaternionsFlat(u.values,_,w,0,u.values,_);else{const O=v-g*2;for(let k=0;k<O;++k)u.values[_+k]-=w[k]}}}return i.blendMode=Qk,i}const Rue={convertArray:Yh,isTypedArray:BL,getKeyframeOrder:UL,sortedArray:XC,flattenJSON:uT,subclip:Pue,makeClipAdditive:Aue};class R0{constructor(e,n,t,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(t),this.sampleValues=n,this.valueSize=t,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let t=this._cachedIndex,r=n[t],s=n[t-1];e:{t:{let a;n:{i:if(!(e<r)){for(let l=t+2;;){if(r===void 0){if(e<s)break i;return t=n.length,this._cachedIndex=t,this.copySampleValue_(t-1)}if(t===l)break;if(s=r,r=n[++t],e<r)break t}a=n.length;break n}if(!(e>=s)){const l=n[1];e<l&&(t=2,s=l);for(let h=t-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(t===h)break;if(r=s,s=n[--t-1],e>=s)break t}a=t,t=0;break n}break e}for(;t<a;){const l=t+a>>>1;e<n[l]?a=l:t=l+1}if(r=n[t],s=n[t-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return t=n.length,this._cachedIndex=t,this.copySampleValue_(t-1)}this._cachedIndex=t,this.intervalChanged_(t,s,r)}return this.interpolate_(t,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,t=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)n[a]=t[s+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zL extends R0{constructor(e,n,t,r){super(e,n,t,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qh,endingEnd:Qh}}intervalChanged_(e,n,t){const r=this.parameterPositions;let s=e-2,a=e+1,l=r[s],h=r[a];if(l===void 0)switch(this.getSettings_().endingStart){case Hh:s=e,l=2*n-t;break;case Ig:s=r.length-2,l=n+r[s]-r[s+1];break;default:s=e,l=t}if(h===void 0)switch(this.getSettings_().endingEnd){case Hh:a=e,h=2*t-n;break;case Ig:a=1,h=t+r[1]-r[0];break;default:a=e-1,h=n}const u=(t-n)*.5,f=this.valueSize;this._weightPrev=u/(n-l),this._weightNext=u/(h-t),this._offsetPrev=s*f,this._offsetNext=a*f}interpolate_(e,n,t,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,h=e*l,u=h-l,f=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,v=this._weightNext,y=(t-n)/(r-n),w=y*y,x=w*y,S=-g*x+2*g*w-g*y,_=(1+g)*x+(-1.5-2*g)*w+(-.5+g)*y+1,O=(-1-v)*x+(1.5+v)*w+.5*y,k=v*x-v*w;for(let M=0;M!==l;++M)s[M]=S*a[f+M]+_*a[u+M]+O*a[h+M]+k*a[p+M];return s}}class dT extends R0{constructor(e,n,t,r){super(e,n,t,r)}interpolate_(e,n,t,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,h=e*l,u=h-l,f=(t-n)/(r-n),p=1-f;for(let g=0;g!==l;++g)s[g]=a[u+g]*p+a[h+g]*f;return s}}class FL extends R0{constructor(e,n,t,r){super(e,n,t,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Jo{constructor(e,n,t,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Yh(n,this.TimeBufferType),this.values=Yh(t,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let t;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Yh(e.times,Array),values:Yh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new FL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zL(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case gf:n=this.InterpolantFactoryMethodDiscrete;break;case vf:n=this.InterpolantFactoryMethodLinear;break;case V1:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gf;case this.InterpolantFactoryMethodLinear:return vf;case this.InterpolantFactoryMethodSmooth:return V1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let t=0,r=n.length;t!==r;++t)n[t]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let t=0,r=n.length;t!==r;++t)n[t]*=e}return this}trim(e,n){const t=this.times,r=t.length;let s=0,a=r-1;for(;s!==r&&t[s]<e;)++s;for(;a!==-1&&t[a]>n;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=t.slice(s,a),this.values=this.values.slice(s*l,a*l)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const t=this.times,r=this.values,s=t.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const h=t[l];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,h),e=!1;break}if(a!==null&&a>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,h,a),e=!1;break}a=h}if(r!==void 0&&BL(r))for(let l=0,h=r.length;l!==h;++l){const u=r[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),t=this.getValueSize(),r=this.getInterpolation()===V1,s=e.length-1;let a=1;for(let l=1;l<s;++l){let h=!1;const u=e[l],f=e[l+1];if(u!==f&&(l!==1||u!==e[0]))if(r)h=!0;else{const p=l*t,g=p-t,v=p+t;for(let y=0;y!==t;++y){const w=n[p+y];if(w!==n[g+y]||w!==n[v+y]){h=!0;break}}}if(h){if(l!==a){e[a]=e[l];const p=l*t,g=a*t;for(let v=0;v!==t;++v)n[g+v]=n[p+v]}++a}}if(s>0){e[a]=e[s];for(let l=s*t,h=a*t,u=0;u!==t;++u)n[h+u]=n[l+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=n.slice(0,a*t)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),t=this.constructor,r=new t(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Jo.prototype.TimeBufferType=Float32Array;Jo.prototype.ValueBufferType=Float32Array;Jo.prototype.DefaultInterpolation=vf;class Tu extends Jo{}Tu.prototype.ValueTypeName="bool";Tu.prototype.ValueBufferType=Array;Tu.prototype.DefaultInterpolation=gf;Tu.prototype.InterpolantFactoryMethodLinear=void 0;Tu.prototype.InterpolantFactoryMethodSmooth=void 0;class fT extends Jo{}fT.prototype.ValueTypeName="color";class wf extends Jo{}wf.prototype.ValueTypeName="number";class XL extends R0{constructor(e,n,t,r){super(e,n,t,r)}interpolate_(e,n,t,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,h=(t-n)/(r-n);let u=e*l;for(let f=u+l;u!==f;u+=4)Wi.slerpFlat(s,0,a,u-l,a,u,h);return s}}class Mu extends Jo{InterpolantFactoryMethodLinear(e){return new XL(this.times,this.values,this.getValueSize(),e)}}Mu.prototype.ValueTypeName="quaternion";Mu.prototype.DefaultInterpolation=vf;Mu.prototype.InterpolantFactoryMethodSmooth=void 0;class Eu extends Jo{}Eu.prototype.ValueTypeName="string";Eu.prototype.ValueBufferType=Array;Eu.prototype.DefaultInterpolation=gf;Eu.prototype.InterpolantFactoryMethodLinear=void 0;Eu.prototype.InterpolantFactoryMethodSmooth=void 0;class _f extends Jo{}_f.prototype.ValueTypeName="vector";class Sf{constructor(e="",n=-1,t=[],r=_O){this.name=e,this.tracks=t,this.duration=n,this.blendMode=r,this.uuid=no(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],t=e.tracks,r=1/(e.fps||1);for(let a=0,l=t.length;a!==l;++a)n.push(Due(t[a]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],t=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=t.length;s!==a;++s)n.push(Jo.toJSON(t[s]));return r}static CreateFromMorphTargetSequence(e,n,t,r){const s=n.length,a=[];for(let l=0;l<s;l++){let h=[],u=[];h.push((l+s-1)%s,l,(l+1)%s),u.push(0,1,0);const f=UL(h);h=XC(h,1,f),u=XC(u,1,f),!r&&h[0]===0&&(h.push(s),u.push(u[0])),a.push(new wf(".morphTargetInfluences["+n[l].name+"]",h,u).scale(1/t))}return new this(e,-1,a)}static findByName(e,n){let t=e;if(!Array.isArray(e)){const r=e;t=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<t.length;r++)if(t[r].name===n)return t[r];return null}static CreateClipsFromMorphTargetSequences(e,n,t){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,h=e.length;l<h;l++){const u=e[l],f=u.name.match(s);if(f&&f.length>1){const p=f[1];let g=r[p];g||(r[p]=g=[]),g.push(u)}}const a=[];for(const l in r)a.push(this.CreateFromMorphTargetSequence(l,r[l],n,t));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const t=function(p,g,v,y,w){if(v.length!==0){const x=[],S=[];uT(v,x,S,y),x.length!==0&&w.push(new p(g,x,S))}},r=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let h=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const g=u[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const v={};let y;for(y=0;y<g.length;y++)if(g[y].morphTargets)for(let w=0;w<g[y].morphTargets.length;w++)v[g[y].morphTargets[w]]=-1;for(const w in v){const x=[],S=[];for(let _=0;_!==g[y].morphTargets.length;++_){const O=g[y];x.push(O.time),S.push(O.morphTarget===w?1:0)}r.push(new wf(".morphTargetInfluence["+w+"]",x,S))}h=v.length*a}else{const v=".bones["+n[p].name+"]";t(_f,v+".position",g,"pos",r),t(Mu,v+".quaternion",g,"rot",r),t(_f,v+".scale",g,"scl",r)}}return r.length===0?null:new this(s,h,r,l)}resetDuration(){const e=this.tracks;let n=0;for(let t=0,r=e.length;t!==r;++t){const s=this.tracks[t];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Iue(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wf;case"vector":case"vector2":case"vector3":case"vector4":return _f;case"color":return fT;case"quaternion":return Mu;case"bool":case"boolean":return Tu;case"string":return Eu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function Due(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Iue(i.type);if(i.times===void 0){const n=[],t=[];uT(i.keys,n,t,"value"),i.times=n,i.values=t}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const ll={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class pT{constructor(e,n,t){const r=this;let s=!1,a=0,l=0,h;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=t,this.itemStart=function(f){l++,s===!1&&r.onStart!==void 0&&r.onStart(f,a,l),s=!0},this.itemEnd=function(f){a++,r.onProgress!==void 0&&r.onProgress(f,a,l),a===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return h?h(f):f},this.setURLModifier=function(f){return h=f,this},this.addHandler=function(f,p){return u.push(f,p),this},this.removeHandler=function(f){const p=u.indexOf(f);return p!==-1&&u.splice(p,2),this},this.getHandler=function(f){for(let p=0,g=u.length;p<g;p+=2){const v=u[p],y=u[p+1];if(v.global&&(v.lastIndex=0),v.test(f))return y}return null}}}const WL=new pT;class as{constructor(e){this.manager=e!==void 0?e:WL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const t=this;return new Promise(function(r,s){t.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}as.DEFAULT_MATERIAL_NAME="__DEFAULT";const Za={};class Nue extends Error{constructor(e,n){super(e),this.response=n}}class ka extends as{constructor(e){super(e)}load(e,n,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ll.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Za[e]!==void 0){Za[e].push({onLoad:n,onProgress:t,onError:r});return}Za[e]=[],Za[e].push({onLoad:n,onProgress:t,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,h=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=Za[e],p=u.body.getReader(),g=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),v=g?parseInt(g):0,y=v!==0;let w=0;const x=new ReadableStream({start(S){_();function _(){p.read().then(({done:O,value:k})=>{if(O)S.close();else{w+=k.byteLength;const M=new ProgressEvent("progress",{lengthComputable:y,loaded:w,total:v});for(let P=0,D=f.length;P<D;P++){const A=f[P];A.onProgress&&A.onProgress(M)}S.enqueue(k),_()}})}}});return new Response(x)}else throw new Nue(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(h){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,l));case"json":return u.json();default:if(l===void 0)return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(l),g=p&&p[1]?p[1].toLowerCase():void 0,v=new TextDecoder(g);return u.arrayBuffer().then(y=>v.decode(y))}}}).then(u=>{ll.add(e,u);const f=Za[e];delete Za[e];for(let p=0,g=f.length;p<g;p++){const v=f[p];v.onLoad&&v.onLoad(u)}}).catch(u=>{const f=Za[e];if(f===void 0)throw this.manager.itemError(e),u;delete Za[e];for(let p=0,g=f.length;p<g;p++){const v=f[p];v.onError&&v.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class $ue extends as{constructor(e){super(e)}load(e,n,t,r){const s=this,a=new ka(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{n(s.parse(JSON.parse(l)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},t,r)}parse(e){const n=[];for(let t=0;t<e.length;t++){const r=Sf.parse(e[t]);n.push(r)}return n}}class Vue extends as{constructor(e){super(e)}load(e,n,t,r){const s=this,a=[],l=new ru,h=new ka(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(s.withCredentials);let u=0;function f(p){h.load(e[p],function(g){const v=s.parse(g,!0);a[p]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},u+=1,u===6&&(v.mipmapCount===1&&(l.minFilter=Vi),l.image=a,l.format=v.format,l.needsUpdate=!0,n&&n(l))},t,r)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)f(p);else h.load(e,function(p){const g=s.parse(p,!0);if(g.isCubemap){const v=g.mipmaps.length/g.mipmapCount;for(let y=0;y<v;y++){a[y]={mipmaps:[]};for(let w=0;w<g.mipmapCount;w++)a[y].mipmaps.push(g.mipmaps[y*g.mipmapCount+w]),a[y].format=g.format,a[y].width=g.width,a[y].height=g.height}l.image=a}else l.image.width=g.width,l.image.height=g.height,l.mipmaps=g.mipmaps;g.mipmapCount===1&&(l.minFilter=Vi),l.format=g.format,l.needsUpdate=!0,n&&n(l)},t,r);return l}}class Qg extends as{constructor(e){super(e)}load(e,n,t,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=ll.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a;const l=Bg("img");function h(){f(),ll.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(p){f(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){l.removeEventListener("load",h,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",h,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class Lue extends as{constructor(e){super(e)}load(e,n,t,r){const s=new C0;s.colorSpace=Ys;const a=new Qg(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function h(u){a.load(e[u],function(f){s.images[u]=f,l++,l===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let u=0;u<e.length;++u)h(u);return s}}class Bue extends as{constructor(e){super(e)}load(e,n,t,r){const s=this,a=new Pc,l=new ka(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(h){let u;try{u=s.parse(h)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:ts,a.wrapT=u.wrapT!==void 0?u.wrapT:ts,a.magFilter=u.magFilter!==void 0?u.magFilter:Vi,a.minFilter=u.minFilter!==void 0?u.minFilter:Vi,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(a.colorSpace=u.colorSpace),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Ho),u.mipmapCount===1&&(a.minFilter=Vi),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,n&&n(a,u)},t,r),a}}class mT extends as{constructor(e){super(e)}load(e,n,t,r){const s=new hi,a=new Qg(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,n!==void 0&&n(s)},t,r),s}}class eh extends An{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new nt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class QL extends eh{constructor(e,n,t){super(e,t),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(An.DEFAULT_UP),this.updateMatrix(),this.groundColor=new nt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const P_=new pt,N5=new ne,$5=new ne;class gT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qe(512,512),this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new k0,this._frameExtents=new Qe(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,t=this.matrix;N5.setFromMatrixPosition(e.matrixWorld),n.position.copy(N5),$5.setFromMatrixPosition(e.target.matrixWorld),n.lookAt($5),n.updateMatrixWorld(),P_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(P_),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(P_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Uue extends gT{constructor(){super(new qn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,t=yf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(t!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=t,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QO extends eh{constructor(e,n,t=0,r=Math.PI/3,s=0,a=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(An.DEFAULT_UP),this.updateMatrix(),this.target=new An,this.distance=t,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Uue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const V5=new pt,Gp=new ne,A_=new ne;class zue extends gT{constructor(){super(new qn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qe(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new ne(1,0,0),new ne(-1,0,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,1,0),new ne(0,-1,0)],this._cubeUps=[new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,0,1),new ne(0,0,-1)]}updateMatrices(e,n=0){const t=this.camera,r=this.matrix,s=e.distance||t.far;s!==t.far&&(t.far=s,t.updateProjectionMatrix()),Gp.setFromMatrixPosition(e.matrixWorld),t.position.copy(Gp),A_.copy(t.position),A_.add(this._cubeDirections[n]),t.up.copy(this._cubeUps[n]),t.lookAt(A_),t.updateMatrixWorld(),r.makeTranslation(-Gp.x,-Gp.y,-Gp.z),V5.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V5)}}class xb extends eh{constructor(e,n,t=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=t,this.decay=r,this.shadow=new zue}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Fue extends gT{constructor(){super(new bo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vT extends eh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(An.DEFAULT_UP),this.updateMatrix(),this.target=new An,this.shadow=new Fue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class yT extends eh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class HL extends eh{constructor(e,n,t=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=t,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class GL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ne)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const t=e.x,r=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*r),n.addScaledVector(a[2],.488603*s),n.addScaledVector(a[3],.488603*t),n.addScaledVector(a[4],1.092548*(t*r)),n.addScaledVector(a[5],1.092548*(r*s)),n.addScaledVector(a[6],.315392*(3*s*s-1)),n.addScaledVector(a[7],1.092548*(t*s)),n.addScaledVector(a[8],.546274*(t*t-r*r)),n}getIrradianceAt(e,n){const t=e.x,r=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*r),n.addScaledVector(a[2],2*.511664*s),n.addScaledVector(a[3],2*.511664*t),n.addScaledVector(a[4],2*.429043*t*r),n.addScaledVector(a[5],2*.429043*r*s),n.addScaledVector(a[6],.743125*s*s-.247708),n.addScaledVector(a[7],2*.429043*t*s),n.addScaledVector(a[8],.429043*(t*t-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let t=0;t<9;t++)this.coefficients[t].addScaledVector(e.coefficients[t],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let t=0;t<9;t++)this.coefficients[t].lerp(e.coefficients[t],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const t=this.coefficients;for(let r=0;r<9;r++)t[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const t=this.coefficients;for(let r=0;r<9;r++)t[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const t=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*t,n[4]=1.092548*t*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*t*s,n[8]=.546274*(t*t-r*r)}}class YL extends eh{constructor(e=new GL,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class HO extends as{constructor(e){super(e),this.textures={}}load(e,n,t,r){const s=this,a=new ka(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(JSON.parse(l)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},t,r)}parse(e){const n=this.textures;function t(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=HO.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new nt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=t(a.value);break;case"c":r.uniforms[s].value=new nt().setHex(a.value);break;case"v2":r.uniforms[s].value=new Qe().fromArray(a.value);break;case"v3":r.uniforms[s].value=new ne().fromArray(a.value);break;case"v4":r.uniforms[s].value=new yn().fromArray(a.value);break;case"m3":r.uniforms[s].value=new cn().fromArray(a.value);break;case"m4":r.uniforms[s].value=new pt().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=t(e.map)),e.matcap!==void 0&&(r.matcap=t(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=t(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=t(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=t(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Qe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=t(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=t(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=t(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=t(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=t(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=t(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=t(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=t(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=t(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=t(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=t(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=t(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=t(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=t(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Qe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=t(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=t(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=t(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=t(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=t(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=t(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=t(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:IL,SpriteMaterial:eT,RawShaderMaterial:pg,ShaderMaterial:os,PointsMaterial:nT,MeshPhysicalMaterial:DL,MeshStandardMaterial:cT,MeshPhongMaterial:mg,MeshToonMaterial:NL,MeshNormalMaterial:$L,MeshLambertMaterial:hT,MeshDepthMaterial:Kk,MeshDistanceMaterial:Jk,MeshBasicMaterial:Aa,MeshMatcapMaterial:VL,LineDashedMaterial:LL,LineBasicMaterial:Ur,Material:Br};return new n[e]}}class Cf{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let t=0,r=e.length;t<r;t++)n+=String.fromCharCode(e[t]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class jL extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class qL extends as{constructor(e){super(e)}load(e,n,t,r){const s=this,a=new ka(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(JSON.parse(l)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},t,r)}parse(e){const n={},t={};function r(v,y){if(n[y]!==void 0)return n[y];const x=v.interleavedBuffers[y],S=s(v,x.buffer),_=Ad(x.type,S),O=new T0(_,x.stride);return O.uuid=x.uuid,n[y]=O,O}function s(v,y){if(t[y]!==void 0)return t[y];const x=v.arrayBuffers[y],S=new Uint32Array(x).buffer;return t[y]=S,S}const a=e.isInstancedBufferGeometry?new jL:new rn,l=e.data.index;if(l!==void 0){const v=Ad(l.type,l.array);a.setIndex(new In(v,1))}const h=e.data.attributes;for(const v in h){const y=h[v];let w;if(y.isInterleavedBufferAttribute){const x=r(e.data,y.data);w=new xl(x,y.itemSize,y.offset,y.normalized)}else{const x=Ad(y.type,y.array),S=y.isInstancedBufferAttribute?xf:In;w=new S(x,y.itemSize,y.normalized)}y.name!==void 0&&(w.name=y.name),y.usage!==void 0&&w.setUsage(y.usage),a.setAttribute(v,w)}const u=e.data.morphAttributes;if(u)for(const v in u){const y=u[v],w=[];for(let x=0,S=y.length;x<S;x++){const _=y[x];let O;if(_.isInterleavedBufferAttribute){const k=r(e.data,_.data);O=new xl(k,_.itemSize,_.offset,_.normalized)}else{const k=Ad(_.type,_.array);O=new In(k,_.itemSize,_.normalized)}_.name!==void 0&&(O.name=_.name),w.push(O)}a.morphAttributes[v]=w}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let v=0,y=p.length;v!==y;++v){const w=p[v];a.addGroup(w.start,w.count,w.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const v=new ne;g.center!==void 0&&v.fromArray(g.center),a.boundingSphere=new Cr(v,g.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Xue extends as{constructor(e){super(e)}load(e,n,t,r){const s=this,a=this.path===""?Cf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new ka(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){let u=null;try{u=JSON.parse(h)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},t,r)}async loadAsync(e,n){const t=this,r=this.path===""?Cf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ka(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,n),l=JSON.parse(a),h=l.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await t.parseAsync(l)}parse(e,n){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){n!==void 0&&n(u)}),l=this.parseTextures(e.textures,a),h=this.parseMaterials(e.materials,l),u=this.parseObject(e.object,s,h,l,t),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),n!==void 0){let p=!1;for(const g in a)if(a[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),t=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,t),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),h=this.parseObject(e.object,r,l,a,n),u=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,u),h}parseShapes(e){const n={};if(e!==void 0)for(let t=0,r=e.length;t<r;t++){const s=new su().fromJSON(e[t]);n[s.uuid]=s}return n}parseSkeletons(e,n){const t={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=new M0().fromJSON(e[s],r);t[l.uuid]=l}return t}parseGeometries(e,n){const t={};if(e!==void 0){const r=new qL;for(let s=0,a=e.length;s<a;s++){let l;const h=e[s];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(h);break;default:h.type in D5?l=D5[h.type].fromJSON(h,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}l.uuid=h.uuid,h.name!==void 0&&(l.name=h.name),h.userData!==void 0&&(l.userData=h.userData),t[h.uuid]=l}}return t}parseMaterials(e,n){const t={},r={};if(e!==void 0){const s=new HO;s.setTextures(n);for(let a=0,l=e.length;a<l;a++){const h=e[a];t[h.uuid]===void 0&&(t[h.uuid]=s.parse(h)),r[h.uuid]=t[h.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let t=0;t<e.length;t++){const r=e[t],s=Sf.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const t=this,r={};let s;function a(h){return t.manager.itemStart(h),s.load(h,function(){t.manager.itemEnd(h)},void 0,function(){t.manager.itemError(h),t.manager.itemEnd(h)})}function l(h){if(typeof h=="string"){const u=h,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return a(f)}else return h.data?{data:Ad(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new pT(n);s=new Qg(h),s.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const p=e[u],g=p.url;if(Array.isArray(g)){const v=[];for(let y=0,w=g.length;y<w;y++){const x=g[y],S=l(x);S!==null&&(S instanceof HTMLImageElement?v.push(S):v.push(new Pc(S.data,S.width,S.height)))}r[p.uuid]=new Gh(v)}else{const v=l(p.url);r[p.uuid]=new Gh(v)}}}return r}async parseImagesAsync(e){const n=this,t={};let r;async function s(a){if(typeof a=="string"){const l=a,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:n.resourcePath+l;return await r.loadAsync(h)}else return a.data?{data:Ad(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new Qg(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const h=e[a],u=h.url;if(Array.isArray(u)){const f=[];for(let p=0,g=u.length;p<g;p++){const v=u[p],y=await s(v);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new Pc(y.data,y.width,y.height)))}t[h.uuid]=new Gh(f)}else{const f=await s(h.url);t[h.uuid]=new Gh(f)}}}return t}parseTextures(e,n){function t(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),n[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const h=n[l.image],u=h.data;let f;Array.isArray(u)?(f=new C0,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new Pc:f=new hi,u&&(f.needsUpdate=!0)),f.source=h,f.uuid=l.uuid,l.name!==void 0&&(f.name=l.name),l.mapping!==void 0&&(f.mapping=t(l.mapping,Wue)),l.channel!==void 0&&(f.channel=l.channel),l.offset!==void 0&&f.offset.fromArray(l.offset),l.repeat!==void 0&&f.repeat.fromArray(l.repeat),l.center!==void 0&&f.center.fromArray(l.center),l.rotation!==void 0&&(f.rotation=l.rotation),l.wrap!==void 0&&(f.wrapS=t(l.wrap[0],L5),f.wrapT=t(l.wrap[1],L5)),l.format!==void 0&&(f.format=l.format),l.internalFormat!==void 0&&(f.internalFormat=l.internalFormat),l.type!==void 0&&(f.type=l.type),l.colorSpace!==void 0&&(f.colorSpace=l.colorSpace),l.minFilter!==void 0&&(f.minFilter=t(l.minFilter,B5)),l.magFilter!==void 0&&(f.magFilter=t(l.magFilter,B5)),l.anisotropy!==void 0&&(f.anisotropy=l.anisotropy),l.flipY!==void 0&&(f.flipY=l.flipY),l.generateMipmaps!==void 0&&(f.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(f.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(f.compareFunction=l.compareFunction),l.userData!==void 0&&(f.userData=l.userData),r[l.uuid]=f}return r}parseObject(e,n,t,r,s){let a;function l(g){return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),n[g]}function h(g){if(g!==void 0){if(Array.isArray(g)){const v=[];for(let y=0,w=g.length;y<w;y++){const x=g[y];t[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),v.push(t[x])}return v}return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),t[g]}}function u(g){return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),r[g]}let f,p;switch(e.type){case"Scene":a=new Of,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new nt(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new PO(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new EO(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new qn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new bo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new yT(e.color,e.intensity);break;case"DirectionalLight":a=new vT(e.color,e.intensity);break;case"PointLight":a=new xb(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new HL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new QO(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new QL(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new YL().fromJSON(e);break;case"SkinnedMesh":f=l(e.geometry),p=h(e.material),a=new tT(f,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":f=l(e.geometry),p=h(e.material),a=new Jn(f,p);break;case"InstancedMesh":f=l(e.geometry),p=h(e.material);const g=e.count,v=e.instanceMatrix,y=e.instanceColor;a=new bL(f,p,g),a.instanceMatrix=new xf(new Float32Array(v.array),16),y!==void 0&&(a.instanceColor=new xf(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":f=l(e.geometry),p=h(e.material),a=new OL(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=f,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(w=>{const x=new Sr;x.min.fromArray(w.boxMin),x.max.fromArray(w.boxMax);const S=new Cr;return S.radius=w.sphereRadius,S.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:x,sphereInitialized:w.sphereInitialized,sphere:S}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":a=new yL;break;case"Line":a=new wl(l(e.geometry),h(e.material));break;case"LineLoop":a=new xL(l(e.geometry),h(e.material));break;case"LineSegments":a=new Ra(l(e.geometry),h(e.material));break;case"PointCloud":case"Points":a=new wL(l(e.geometry),h(e.material));break;case"Sprite":a=new vL(h(e.material));break;case"Group":a=new al;break;case"Bone":a=new Ug;break;default:a=new An}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let v=0;v<g.length;v++)a.add(this.parseObject(g[v],n,t,r,s))}if(e.animations!==void 0){const g=e.animations;for(let v=0;v<g.length;v++){const y=g[v];a.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const g=e.levels;for(let v=0;v<g.length;v++){const y=g[v],w=a.getObjectByProperty("uuid",y.object);w!==void 0&&a.addLevel(w,y.distance,y.hysteresis)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(t){if(t.isSkinnedMesh===!0&&t.skeleton!==void 0){const r=n[t.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(r,t.bindMatrix)}})}}const Wue={UVMapping:xO,CubeReflectionMapping:Ol,CubeRefractionMapping:Vc,EquirectangularReflectionMapping:ff,EquirectangularRefractionMapping:Rg,CubeUVReflectionMapping:Uf},L5={RepeatWrapping:Lc,ClampToEdgeWrapping:ts,MirroredRepeatWrapping:pf},B5={NearestFilter:er,NearestMipmapNearestFilter:wO,NearestMipmapLinearFilter:Wh,LinearFilter:Vi,LinearMipmapNearestFilter:Yd,LinearMipmapLinearFilter:Ho};class Que extends as{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=ll.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(u=>{n&&n(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const h=fetch(e,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return ll.add(e,u),n&&n(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),ll.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ll.add(e,h),s.manager.itemStart(e)}}let Uy;class bT{static getContext(){return Uy===void 0&&(Uy=new(window.AudioContext||window.webkitAudioContext)),Uy}static setContext(e){Uy=e}}class Hue extends as{constructor(e){super(e)}load(e,n,t,r){const s=this,a=new ka(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(h){try{const u=h.slice(0);bT.getContext().decodeAudioData(u,function(p){n(p)}).catch(l)}catch(u){l(u)}},t,r);function l(h){r?r(h):console.error(h),s.manager.itemError(e)}}}const U5=new pt,z5=new pt,Th=new pt;class Gue{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Th.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,a=n.near*Math.tan(iu*n.fov*.5)/n.zoom;let l,h;z5.elements[12]=-r,U5.elements[12]=r,l=-a*n.aspect+s,h=a*n.aspect+s,Th.elements[0]=2*n.near/(h-l),Th.elements[8]=(h+l)/(h-l),this.cameraL.projectionMatrix.copy(Th),l=-a*n.aspect-s,h=a*n.aspect-s,Th.elements[0]=2*n.near/(h-l),Th.elements[8]=(h+l)/(h-l),this.cameraR.projectionMatrix.copy(Th)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(z5),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(U5)}}class OT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=F5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=F5();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function F5(){return(typeof performance>"u"?Date:performance).now()}const Mh=new ne,X5=new Wi,Yue=new ne,Eh=new ne;class jue extends An{constructor(){super(),this.type="AudioListener",this.context=bT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new OT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,t=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Mh,X5,Yue),Eh.set(0,0,-1).applyQuaternion(X5),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Mh.x,r),n.positionY.linearRampToValueAtTime(Mh.y,r),n.positionZ.linearRampToValueAtTime(Mh.z,r),n.forwardX.linearRampToValueAtTime(Eh.x,r),n.forwardY.linearRampToValueAtTime(Eh.y,r),n.forwardZ.linearRampToValueAtTime(Eh.z,r),n.upX.linearRampToValueAtTime(t.x,r),n.upY.linearRampToValueAtTime(t.y,r),n.upZ.linearRampToValueAtTime(t.z,r)}else n.setPosition(Mh.x,Mh.y,Mh.z),n.setOrientation(Eh.x,Eh.y,Eh.z,t.x,t.y,t.z)}}class ZL extends An{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ph=new ne,W5=new Wi,que=new ne,Ah=new ne;class Zue extends ZL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,t){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=t,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ph,W5,que),Ah.set(0,0,1).applyQuaternion(W5);const n=this.panner;if(n.positionX){const t=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Ph.x,t),n.positionY.linearRampToValueAtTime(Ph.y,t),n.positionZ.linearRampToValueAtTime(Ph.z,t),n.orientationX.linearRampToValueAtTime(Ah.x,t),n.orientationY.linearRampToValueAtTime(Ah.y,t),n.orientationZ.linearRampToValueAtTime(Ah.z,t)}else n.setPosition(Ph.x,Ph.y,Ph.z),n.setOrientation(Ah.x,Ah.y,Ah.z)}}class Kue{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let t=0;t<n.length;t++)e+=n[t];return e/n.length}}class KL{constructor(e,n,t){this.binding=e,this.valueSize=t;let r,s,a;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const t=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==r;++l)t[s+l]=t[l];a=n}else{a+=n;const l=n/a;this._mixBufferRegion(t,s,0,l,r)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,t=this.valueSize,r=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,t),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,t=this.buffer,r=e*n+n,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const h=n*this._origIndex;this._mixBufferRegion(t,r,h,1-s,n)}a>0&&this._mixBufferRegionAdditive(t,r,this._addIndex*n,1,n);for(let h=n,u=n+n;h!==u;++h)if(t[h]!==t[h+n]){l.setValue(t,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,t=this.valueSize,r=t*this._origIndex;e.getValue(n,r);for(let s=t,a=r;s!==a;++s)n[s]=n[r+s%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let t=e;t<n;t++)this.buffer[t]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[n+t]=this.buffer[e+t]}_select(e,n,t,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[n+a]=e[t+a]}_slerp(e,n,t,r){Wi.slerpFlat(e,n,e,n,e,t,r)}_slerpAdditive(e,n,t,r,s){const a=this._workIndex*s;Wi.multiplyQuaternionsFlat(e,a,e,n,e,t),Wi.slerpFlat(e,n,e,n,e,a,r)}_lerp(e,n,t,r,s){const a=1-r;for(let l=0;l!==s;++l){const h=n+l;e[h]=e[h]*a+e[t+l]*r}}_lerpAdditive(e,n,t,r,s){for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]+e[t+a]*r}}}const xT="\\[\\]\\.:\\/",Jue=new RegExp("["+xT+"]","g"),wT="[^"+xT+"]",ede="[^"+xT.replace("\\.","")+"]",tde=/((?:WC+[\/:])*)/.source.replace("WC",wT),nde=/(WCOD+)?/.source.replace("WCOD",ede),ide=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wT),rde=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wT),sde=new RegExp("^"+tde+nde+ide+rde+"$"),ode=["material","materials","bones","map"];class ade{constructor(e,n,t){const r=t||pn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const t=this._targetGroup.nCachedObjects_,r=this._bindings[t];r!==void 0&&r.getValue(e,n)}setValue(e,n){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,t=e.length;n!==t;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,t=e.length;n!==t;++n)e[n].unbind()}}class pn{constructor(e,n,t){this.path=n,this.parsedPath=t||pn.parseTrackName(n),this.node=pn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,t){return e&&e.isAnimationObjectGroup?new pn.Composite(e,n,t):new pn(e,n,t)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Jue,"")}static parseTrackName(e){const n=sde.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const t={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=t.nodeName&&t.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=t.nodeName.substring(r+1);ode.indexOf(s)!==-1&&(t.nodeName=t.nodeName.substring(0,r),t.objectName=s)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const t=e.skeleton.getBoneByName(n);if(t!==void 0)return t}if(e.children){const t=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===n||l.uuid===n)return l;const h=t(l.children);if(h)return h}return null},r=t(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)e[n++]=t[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)t[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)t[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)t[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,t=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=pn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(t){let u=n.objectIndex;switch(t){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[t]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[r];if(a===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}h=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(h=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}pn.Composite=ade;pn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};pn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};pn.prototype.GetterByBindingType=[pn.prototype._getValue_direct,pn.prototype._getValue_array,pn.prototype._getValue_arrayElement,pn.prototype._getValue_toArray];pn.prototype.SetterByBindingTypeAndVersioning=[[pn.prototype._setValue_direct,pn.prototype._setValue_direct_setNeedsUpdate,pn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_array,pn.prototype._setValue_array_setNeedsUpdate,pn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_arrayElement,pn.prototype._setValue_arrayElement_setNeedsUpdate,pn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_fromArray,pn.prototype._setValue_fromArray_setNeedsUpdate,pn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class lde{constructor(){this.isAnimationObjectGroup=!0,this.uuid=no(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,t=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let l,h=e.length,u=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const g=arguments[f],v=g.uuid;let y=n[v];if(y===void 0){y=h++,n[v]=y,e.push(g);for(let w=0,x=a;w!==x;++w)s[w].push(new pn(g,t[w],r[w]))}else if(y<u){l=e[y];const w=--u,x=e[w];n[x.uuid]=y,e[y]=x,n[v]=w,e[w]=g;for(let S=0,_=a;S!==_;++S){const O=s[S],k=O[w];let M=O[y];O[y]=k,M===void 0&&(M=new pn(g,t[S],r[S])),O[w]=M}}else e[y]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,t=this._bindings,r=t.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const h=arguments[a],u=h.uuid,f=n[u];if(f!==void 0&&f>=s){const p=s++,g=e[p];n[g.uuid]=f,e[f]=g,n[u]=p,e[p]=h;for(let v=0,y=r;v!==y;++v){const w=t[v],x=w[p],S=w[f];w[f]=x,w[p]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,t=this._bindings,r=t.length;let s=this.nCachedObjects_,a=e.length;for(let l=0,h=arguments.length;l!==h;++l){const u=arguments[l],f=u.uuid,p=n[f];if(p!==void 0)if(delete n[f],p<s){const g=--s,v=e[g],y=--a,w=e[y];n[v.uuid]=p,e[p]=v,n[w.uuid]=g,e[g]=w,e.pop();for(let x=0,S=r;x!==S;++x){const _=t[x],O=_[g],k=_[y];_[p]=O,_[g]=k,_.pop()}}else{const g=--a,v=e[g];g>0&&(n[v.uuid]=p),e[p]=v,e.pop();for(let y=0,w=r;y!==w;++y){const x=t[y];x[p]=x[g],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const t=this._bindingsIndicesByPath;let r=t[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,l=this._parsedPaths,h=this._objects,u=h.length,f=this.nCachedObjects_,p=new Array(u);r=s.length,t[e]=r,a.push(e),l.push(n),s.push(p);for(let g=f,v=h.length;g!==v;++g){const y=h[g];p[g]=new pn(y,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,t=n[e];if(t!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,h=a[l],u=e[l];n[u]=t,a[t]=h,a.pop(),s[t]=s[l],s.pop(),r[t]=r[l],r.pop()}}}class JL{constructor(e,n,t=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=t,this.blendMode=r;const s=n.tracks,a=s.length,l=new Array(a),h={endingStart:Qh,endingEnd:Qh};for(let u=0;u!==a;++u){const f=s[u].createInterpolant(null);l[u]=f,f.settings=h}this._interpolantSettings=h,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zV,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,t){if(e.fadeOut(n),this.fadeIn(n),t){const r=this._clip.duration,s=e._clip.duration,a=s/r,l=r/s;e.warp(1,a,n),this.warp(l,1,n)}return this}crossFadeTo(e,n,t){return e.crossFadeFrom(this,n,t)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,t){const r=this._mixer,s=r.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const h=l.parameterPositions,u=l.sampleValues;return h[0]=s,h[1]=s+t,u[0]=e/a,u[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,t,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const h=(e-s)*t;h<0||t===0?n=0:(this._startTime=null,n=t*h)}n*=this._updateTimeScale(e);const a=this._updateTime(n),l=this._updateWeight(e);if(l>0){const h=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Qk:for(let f=0,p=h.length;f!==p;++f)h[f].evaluate(a),u[f].accumulateAdditive(l);break;case _O:default:for(let f=0,p=h.length;f!==p;++f)h[f].evaluate(a),u[f].accumulate(r,l)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const t=this._weightInterpolant;if(t!==null){const r=t.evaluate(e)[0];n*=r,e>t.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const t=this._timeScaleInterpolant;if(t!==null){const r=t.evaluate(e)[0];n*=r,e>t.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,t=this.loop;let r=this.time+e,s=this._loopCount;const a=t===FV;if(e===0)return s===-1?r:a&&(s&1)===1?n-r:r;if(t===UV){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=n||r<0){const l=Math.floor(r/n);r-=n*l,s+=Math.abs(l);const h=this.repetitions-s;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(a&&(s&1)===1)return n-r}return r}_setEndings(e,n,t){const r=this._interpolantSettings;t?(r.endingStart=Hh,r.endingEnd=Hh):(e?r.endingStart=this.zeroSlopeAtStart?Hh:Qh:r.endingStart=Ig,n?r.endingEnd=this.zeroSlopeAtEnd?Hh:Qh:r.endingEnd=Ig)}_scheduleFading(e,n,t){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,h=a.sampleValues;return l[0]=s,h[0]=n,l[1]=s+e,h[1]=t,this}}const cde=new Float32Array(1);class hde extends Pa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const t=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,l=e._interpolants,h=t.uuid,u=this._bindingsByRootAndName;let f=u[h];f===void 0&&(f={},u[h]=f);for(let p=0;p!==s;++p){const g=r[p],v=g.name;let y=f[v];if(y!==void 0)++y.referenceCount,a[p]=y;else{if(y=a[p],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,h,v));continue}const w=n&&n._propertyBindings[p].binding.parsedPath;y=new KL(pn.create(t,v,w),g.ValueTypeName,g.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,h,v),a[p]=y}l[p].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const t=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,t)}const n=e._propertyBindings;for(let t=0,r=n.length;t!==r;++t){const s=n[t];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let t=0,r=n.length;t!==r;++t){const s=n[t];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,t){const r=this._actions,s=this._actionsByClip;let a=s[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[t]=e}_removeInactiveAction(e){const n=this._actions,t=n[n.length-1],r=e._cacheIndex;t._cacheIndex=r,n[r]=t,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,l=a[s],h=l.knownActions,u=h[h.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,h[f]=u,h.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],h.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let t=0,r=n.length;t!==r;++t){const s=n[t];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,t=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=t,n[t]=s}_takeBackAction(e){const n=this._actions,t=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=t,n[t]=s}_addInactiveBinding(e,n,t){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[n];a===void 0&&(a={},r[n]=a),a[t]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,t=e.binding,r=t.rootNode.uuid,s=t.path,a=this._bindingsByRootAndName,l=a[r],h=n[n.length-1],u=e._cacheIndex;h._cacheIndex=u,n[u]=h,n.pop(),delete l[s],Object.keys(l).length===0&&delete a[r]}_lendBinding(e){const n=this._bindings,t=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=t,n[t]=s}_takeBackBinding(e){const n=this._bindings,t=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=t,n[t]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let t=e[n];return t===void 0&&(t=new dT(new Float32Array(2),new Float32Array(2),1,cde),t.__cacheIndex=n,e[n]=t),t}_takeBackControlInterpolant(e){const n=this._controlInterpolants,t=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=t,n[t]=s}clipAction(e,n,t){const r=n||this._root,s=r.uuid;let a=typeof e=="string"?Sf.findByName(r,e):e;const l=a!==null?a.uuid:e,h=this._actionsByClip[l];let u=null;if(t===void 0&&(a!==null?t=a.blendMode:t=_O),h!==void 0){const p=h.actionByRoot[s];if(p!==void 0&&p.blendMode===t)return p;u=h.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const f=new JL(this,a,n,t);return this._bindAction(f,u),this._addInactiveAction(f,l,s),f}existingAction(e,n){const t=n||this._root,r=t.uuid,s=typeof e=="string"?Sf.findByName(t,e):e,a=s?s.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let t=n-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const n=this._actions,t=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==t;++u)n[u]._update(r,e,s,a);const l=this._bindings,h=this._nActiveBindings;for(let u=0;u!==h;++u)l[u].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,t=e.uuid,r=this._actionsByClip,s=r[t];if(s!==void 0){const a=s.knownActions;for(let l=0,h=a.length;l!==h;++l){const u=a[l];this._deactivateAction(u);const f=u._cacheIndex,p=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=f,n[f]=p,n.pop(),this._removeInactiveBindingsForAction(u)}delete r[t]}}uncacheRoot(e){const n=e.uuid,t=this._actionsByClip;for(const a in t){const l=t[a].actionByRoot,h=l[n];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,n){const t=this.existingAction(e,n);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}}class GO{constructor(e){this.value=e}clone(){return new GO(this.value.clone===void 0?this.value:this.value.clone())}}let ude=0;class dde extends Pa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:ude++}),this.name="",this.usage=Vg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let t=0,r=n.length;t<r;t++){const s=Array.isArray(n[t])?n[t]:[n[t]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class fde extends T0{constructor(e,n,t=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=t}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class pde{constructor(e,n,t,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=t,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Q5=new pt;class e8{constructor(e,n,t=0,r=1/0){this.ray=new ku(e,n),this.near=t,this.far=r,this.camera=null,this.layers=new kO,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return Q5.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Q5),this}intersectObject(e,n=!0,t=[]){return WC(e,this,t,n),t.sort(H5),t}intersectObjects(e,n=!0,t=[]){for(let r=0,s=e.length;r<s;r++)WC(e[r],this,t,n);return t.sort(H5),t}}function H5(i,e){return i.distance-e.distance}function WC(i,e,n,t){if(i.layers.test(e.layers)&&i.raycast(e,n),t===!0){const r=i.children;for(let s=0,a=r.length;s<a;s++)WC(r[s],e,n,!0)}}class QC{constructor(e=1,n=0,t=0){return this.radius=e,this.phi=n,this.theta=t,this}set(e,n,t){return this.radius=e,this.phi=n,this.theta=t,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,t){return this.radius=Math.sqrt(e*e+n*n+t*t),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,t),this.phi=Math.acos(Ri(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class mde{constructor(e=1,n=0,t=0){return this.radius=e,this.theta=n,this.y=t,this}set(e,n,t){return this.radius=e,this.theta=n,this.y=t,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,t){return this.radius=Math.sqrt(e*e+t*t),this.theta=Math.atan2(e,t),this.y=n,this}clone(){return new this.constructor().copy(this)}}const G5=new Qe;class t8{constructor(e=new Qe(1/0,1/0),n=new Qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,t=e.length;n<t;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const t=G5.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,G5).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Y5=new ne,zy=new ne;class n8{constructor(e=new ne,n=new ne){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){Y5.subVectors(e,this.start),zy.subVectors(this.end,this.start);const t=zy.dot(zy);let s=zy.dot(Y5)/t;return n&&(s=Ri(s,0,1)),s}closestPointToPoint(e,n,t){const r=this.closestPointToPointParameter(e,n);return this.delta(t).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const j5=new ne;class gde extends An{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const t=new rn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,h=32;a<h;a++,l++){const u=a/h*Math.PI*2,f=l/h*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}t.setAttribute("position",new Ct(r,3));const s=new Ur({fog:!1,toneMapped:!1});this.cone=new Ra(t,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),j5.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(j5),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ac=new ne,Fy=new pt,R_=new pt;class vde extends Ra{constructor(e){const n=i8(e),t=new rn,r=[],s=[],a=new nt(0,0,1),l=new nt(0,1,0);for(let u=0;u<n.length;u++){const f=n[u];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}t.setAttribute("position",new Ct(r,3)),t.setAttribute("color",new Ct(s,3));const h=new Ur({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(t,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,t=this.geometry,r=t.getAttribute("position");R_.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<n.length;s++){const l=n[s];l.parent&&l.parent.isBone&&(Fy.multiplyMatrices(R_,l.matrixWorld),ac.setFromMatrixPosition(Fy),r.setXYZ(a,ac.x,ac.y,ac.z),Fy.multiplyMatrices(R_,l.parent.matrixWorld),ac.setFromMatrixPosition(Fy),r.setXYZ(a+1,ac.x,ac.y,ac.z),a+=2)}t.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function i8(i){const e=[];i.isBone===!0&&e.push(i);for(let n=0;n<i.children.length;n++)e.push.apply(e,i8(i.children[n]));return e}class yde extends Jn{constructor(e,n,t){const r=new A0(n,4,2),s=new Aa({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=t,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const bde=new ne,q5=new nt,Z5=new nt;class Ode extends An{constructor(e,n,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="HemisphereLightHelper";const r=new P0(n);r.rotateY(Math.PI*.5),this.material=new Aa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new In(a,3)),this.add(new Jn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");q5.copy(this.light.color),Z5.copy(this.light.groundColor);for(let t=0,r=n.count;t<r;t++){const s=t<r/2?q5:Z5;n.setXYZ(t,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(bde.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xde extends Ra{constructor(e=10,n=10,t=4473924,r=8947848){t=new nt(t),r=new nt(r);const s=n/2,a=e/n,l=e/2,h=[],u=[];for(let g=0,v=0,y=-l;g<=n;g++,y+=a){h.push(-l,0,y,l,0,y),h.push(y,0,-l,y,0,l);const w=g===s?t:r;w.toArray(u,v),v+=3,w.toArray(u,v),v+=3,w.toArray(u,v),v+=3,w.toArray(u,v),v+=3}const f=new rn;f.setAttribute("position",new Ct(h,3)),f.setAttribute("color",new Ct(u,3));const p=new Ur({vertexColors:!0,toneMapped:!1});super(f,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class wde extends Ra{constructor(e=10,n=16,t=8,r=64,s=4473924,a=8947848){s=new nt(s),a=new nt(a);const l=[],h=[];if(n>1)for(let p=0;p<n;p++){const g=p/n*(Math.PI*2),v=Math.sin(g)*e,y=Math.cos(g)*e;l.push(0,0,0),l.push(v,0,y);const w=p&1?s:a;h.push(w.r,w.g,w.b),h.push(w.r,w.g,w.b)}for(let p=0;p<t;p++){const g=p&1?s:a,v=e-e/t*p;for(let y=0;y<r;y++){let w=y/r*(Math.PI*2),x=Math.sin(w)*v,S=Math.cos(w)*v;l.push(x,0,S),h.push(g.r,g.g,g.b),w=(y+1)/r*(Math.PI*2),x=Math.sin(w)*v,S=Math.cos(w)*v,l.push(x,0,S),h.push(g.r,g.g,g.b)}}const u=new rn;u.setAttribute("position",new Ct(l,3)),u.setAttribute("color",new Ct(h,3));const f=new Ur({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const K5=new ne,Xy=new ne,J5=new ne;class _de extends An{constructor(e,n,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new rn;r.setAttribute("position",new Ct([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Ur({fog:!1,toneMapped:!1});this.lightPlane=new wl(r,s),this.add(this.lightPlane),r=new rn,r.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new wl(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),K5.setFromMatrixPosition(this.light.matrixWorld),Xy.setFromMatrixPosition(this.light.target.matrixWorld),J5.subVectors(Xy,K5),this.lightPlane.lookAt(Xy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Xy),this.targetLine.scale.z=J5.length()}}const Wy=new ne,Pi=new S0;class Sde extends Ra{constructor(e){const n=new rn,t=new Ur({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(y,w){h(y),h(w)}function h(y){r.push(0,0,0),s.push(0,0,0),a[y]===void 0&&(a[y]=[]),a[y].push(r.length/3-1)}n.setAttribute("position",new Ct(r,3)),n.setAttribute("color",new Ct(s,3)),super(n,t),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new nt(16755200),f=new nt(16711680),p=new nt(43775),g=new nt(16777215),v=new nt(3355443);this.setColors(u,f,p,g,v)}setColors(e,n,t,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,n.r,n.g,n.b),l.setXYZ(25,n.r,n.g,n.b),l.setXYZ(26,n.r,n.g,n.b),l.setXYZ(27,n.r,n.g,n.b),l.setXYZ(28,n.r,n.g,n.b),l.setXYZ(29,n.r,n.g,n.b),l.setXYZ(30,n.r,n.g,n.b),l.setXYZ(31,n.r,n.g,n.b),l.setXYZ(32,t.r,t.g,t.b),l.setXYZ(33,t.r,t.g,t.b),l.setXYZ(34,t.r,t.g,t.b),l.setXYZ(35,t.r,t.g,t.b),l.setXYZ(36,t.r,t.g,t.b),l.setXYZ(37,t.r,t.g,t.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,t=1,r=1;Pi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Di("c",n,e,Pi,0,0,-1),Di("t",n,e,Pi,0,0,1),Di("n1",n,e,Pi,-t,-r,-1),Di("n2",n,e,Pi,t,-r,-1),Di("n3",n,e,Pi,-t,r,-1),Di("n4",n,e,Pi,t,r,-1),Di("f1",n,e,Pi,-t,-r,1),Di("f2",n,e,Pi,t,-r,1),Di("f3",n,e,Pi,-t,r,1),Di("f4",n,e,Pi,t,r,1),Di("u1",n,e,Pi,t*.7,r*1.1,-1),Di("u2",n,e,Pi,-t*.7,r*1.1,-1),Di("u3",n,e,Pi,0,r*2,-1),Di("cf1",n,e,Pi,-t,0,1),Di("cf2",n,e,Pi,t,0,1),Di("cf3",n,e,Pi,0,-r,1),Di("cf4",n,e,Pi,0,r,1),Di("cn1",n,e,Pi,-t,0,-1),Di("cn2",n,e,Pi,t,0,-1),Di("cn3",n,e,Pi,0,-r,-1),Di("cn4",n,e,Pi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Di(i,e,n,t,r,s,a){Wy.set(r,s,a).unproject(t);const l=e[i];if(l!==void 0){const h=n.getAttribute("position");for(let u=0,f=l.length;u<f;u++)h.setXYZ(l[u],Wy.x,Wy.y,Wy.z)}}const Qy=new Sr;class Cde extends Ra{constructor(e,n=16776960){const t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new rn;s.setIndex(new In(t,1)),s.setAttribute("position",new In(r,3)),super(s,new Ur({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Qy.setFromObject(this.object),Qy.isEmpty())return;const n=Qy.min,t=Qy.max,r=this.geometry.attributes.position,s=r.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=n.x,s[4]=t.y,s[5]=t.z,s[6]=n.x,s[7]=n.y,s[8]=t.z,s[9]=t.x,s[10]=n.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=n.z,s[15]=n.x,s[16]=t.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=t.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kde extends Ra{constructor(e,n=16776960){const t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new rn;s.setIndex(new In(t,1)),s.setAttribute("position",new Ct(r,3)),super(s,new Ur({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tde extends wl{constructor(e,n=1,t=16776960){const r=t,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new rn;a.setAttribute("position",new Ct(s,3)),a.computeBoundingSphere(),super(a,new Ur({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new rn;h.setAttribute("position",new Ct(l,3)),h.computeBoundingSphere(),this.add(new Jn(h,new Aa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const eR=new ne;let Hy,I_;class Mde extends An{constructor(e=new ne(0,0,1),n=new ne(0,0,0),t=1,r=16776960,s=t*.2,a=s*.2){super(),this.type="ArrowHelper",Hy===void 0&&(Hy=new rn,Hy.setAttribute("position",new Ct([0,0,0,0,1,0],3)),I_=new Wf(0,.5,1,5,1),I_.translate(0,-.5,0)),this.position.copy(n),this.line=new wl(Hy,new Ur({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Jn(I_,new Aa({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(t,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{eR.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(eR,n)}}setLength(e,n=e*.2,t=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(t,n,t),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Ede extends Ra{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],t=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new rn;r.setAttribute("position",new Ct(n,3)),r.setAttribute("color",new Ct(t,3));const s=new Ur({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,t){const r=new nt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(t),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class r8{constructor(){this.type="ShapePath",this.color=new nt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new zg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,t,r){return this.currentPath.quadraticCurveTo(e,n,t,r),this}bezierCurveTo(e,n,t,r,s,a){return this.currentPath.bezierCurveTo(e,n,t,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(S){const _=[];for(let O=0,k=S.length;O<k;O++){const M=S[O],P=new su;P.curves=M.curves,_.push(P)}return _}function t(S,_){const O=_.length;let k=!1;for(let M=O-1,P=0;P<O;M=P++){let D=_[M],A=_[P],R=A.x-D.x,T=A.y-D.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(D=_[P],R=-R,A=_[M],T=-T),S.y<D.y||S.y>A.y)continue;if(S.y===D.y){if(S.x===D.x)return!0}else{const N=T*(S.x-D.x)-R*(S.y-D.y);if(N===0)return!0;if(N<0)continue;k=!k}}else{if(S.y!==D.y)continue;if(A.x<=S.x&&S.x<=D.x||D.x<=S.x&&S.x<=A.x)return!0}}return k}const r=_a.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,h;const u=[];if(s.length===1)return l=s[0],h=new su,h.curves=l.curves,u.push(h),u;let f=!r(s[0].getPoints());f=e?!f:f;const p=[],g=[];let v=[],y=0,w;g[y]=void 0,v[y]=[];for(let S=0,_=s.length;S<_;S++)l=s[S],w=l.getPoints(),a=r(w),a=e?!a:a,a?(!f&&g[y]&&y++,g[y]={s:new su,p:w},g[y].s.curves=l.curves,f&&y++,v[y]=[]):v[y].push({h:l,p:w[0]});if(!g[0])return n(s);if(g.length>1){let S=!1,_=0;for(let O=0,k=g.length;O<k;O++)p[O]=[];for(let O=0,k=g.length;O<k;O++){const M=v[O];for(let P=0;P<M.length;P++){const D=M[P];let A=!0;for(let R=0;R<g.length;R++)t(D.p,g[R].p)&&(O!==R&&_++,A?(A=!1,p[R].push(D)):S=!0);A&&p[O].push(D)}}_>0&&S===!1&&(v=p)}let x;for(let S=0,_=g.length;S<_;S++){h=g[S].s,u.push(h),x=v[S];for(let O=0,k=x.length;O<k;O++)h.holes.push(x[O].h)}return u}}class Pde extends Co{constructor(e=1,n=1,t=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...r,count:t}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Bf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Bf);const Ade=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$k,AddEquation:Oc,AddOperation:_V,AdditiveAnimationBlendMode:Qk,AdditiveBlending:mb,AgXToneMapping:MV,AlphaFormat:DV,AlwaysCompare:KV,AlwaysDepth:gV,AlwaysStencilFunc:NC,AmbientLight:yT,AnimationAction:JL,AnimationClip:Sf,AnimationLoader:$ue,AnimationMixer:hde,AnimationObjectGroup:lde,AnimationUtils:Rue,ArcCurve:_L,ArrayCamera:mL,ArrowHelper:Mde,AttachedBindMode:lC,Audio:ZL,AudioAnalyser:Kue,AudioContext:bT,AudioListener:jue,AudioLoader:Hue,AxesHelper:Ede,BackSide:Vr,BasicDepthPacking:XV,BasicShadowMap:Qre,BatchedMesh:OL,Bone:Ug,BooleanKeyframeTrack:Tu,Box2:t8,Box3:Sr,Box3Helper:kde,BoxGeometry:Zc,BoxHelper:Cde,BufferAttribute:In,BufferGeometry:rn,BufferGeometryLoader:qL,ByteType:AV,Cache:ll,Camera:S0,CameraHelper:Sde,CanvasTexture:nue,CapsuleGeometry:RO,CatmullRomCurve3:SL,CineonToneMapping:kV,CircleGeometry:IO,ClampToEdgeWrapping:ts,Clock:OT,Color:nt,ColorKeyframeTrack:fT,ColorManagement:Yn,CompressedArrayTexture:eue,CompressedCubeTexture:tue,CompressedTexture:ru,CompressedTextureLoader:Vue,ConeGeometry:DO,ConstantAlphaFactor:fV,ConstantColorFactor:uV,CubeCamera:oL,CubeReflectionMapping:Ol,CubeRefractionMapping:Vc,CubeTexture:C0,CubeTextureLoader:Lue,CubeUVReflectionMapping:Uf,CubicBezierCurve:rT,CubicBezierCurve3:CL,CubicInterpolant:zL,CullFaceBack:sC,CullFaceFront:q$,CullFaceFrontBack:Wre,CullFaceNone:j$,Curve:Mo,CurvePath:TL,CustomBlending:Z$,CustomToneMapping:TV,CylinderGeometry:Wf,Cylindrical:mde,Data3DTexture:Yk,DataArrayTexture:CO,DataTexture:Pc,DataTextureLoader:Bue,DataUtils:Jse,DecrementStencilOp:nse,DecrementWrapStencilOp:rse,DefaultLoadingManager:WL,DepthFormat:nu,DepthStencilFormat:mf,DepthTexture:Zk,DetachedBindMode:PV,DirectionalLight:vT,DirectionalLightHelper:_de,DiscreteInterpolant:FL,DisplayP3ColorSpace:SO,DodecahedronGeometry:NO,DoubleSide:ws,DstAlphaFactor:oV,DstColorFactor:lV,DynamicCopyUsage:bse,DynamicDrawUsage:fse,DynamicReadUsage:gse,EdgesGeometry:ML,EllipseCurve:AO,EqualCompare:YV,EqualDepth:yV,EqualStencilFunc:lse,EquirectangularReflectionMapping:ff,EquirectangularRefractionMapping:Rg,Euler:tr,EventDispatcher:Pa,ExtrudeGeometry:VO,FileLoader:ka,Float16BufferAttribute:soe,Float32BufferAttribute:Ct,FloatType:yo,Fog:PO,FogExp2:EO,FramebufferTexture:UC,FrontSide:bl,Frustum:k0,GLBufferAttribute:pde,GLSL1:xse,GLSL3:$C,GreaterCompare:jV,GreaterDepth:OV,GreaterEqualCompare:ZV,GreaterEqualDepth:bV,GreaterEqualStencilFunc:dse,GreaterStencilFunc:hse,GridHelper:xde,Group:al,HalfFloatType:zf,HemisphereLight:QL,HemisphereLightHelper:Ode,IcosahedronGeometry:LO,ImageBitmapLoader:Que,ImageLoader:Qg,ImageUtils:nL,IncrementStencilOp:tse,IncrementWrapStencilOp:ise,InstancedBufferAttribute:xf,InstancedBufferGeometry:jL,InstancedInterleavedBuffer:fde,InstancedMesh:bL,Int16BufferAttribute:ioe,Int32BufferAttribute:roe,Int8BufferAttribute:eoe,IntType:Lk,InterleavedBuffer:T0,InterleavedBufferAttribute:xl,Interpolant:R0,InterpolateDiscrete:gf,InterpolateLinear:vf,InterpolateSmooth:V1,InvertStencilOp:sse,KeepStencilOp:Vh,KeyframeTrack:Jo,LOD:yL,LatheGeometry:E0,Layers:kO,LessCompare:GV,LessDepth:vV,LessEqualCompare:Hk,LessEqualDepth:Ag,LessEqualStencilFunc:cse,LessStencilFunc:ase,Light:eh,LightProbe:YL,Line:wl,Line3:n8,LineBasicMaterial:Ur,LineCurve:sT,LineCurve3:kL,LineDashedMaterial:LL,LineLoop:xL,LineSegments:Ra,LinearDisplayP3ColorSpace:w0,LinearFilter:Vi,LinearInterpolant:dT,LinearMipMapLinearFilter:jre,LinearMipMapNearestFilter:Yre,LinearMipmapLinearFilter:Ho,LinearMipmapNearestFilter:Yd,LinearSRGBColorSpace:El,LinearToneMapping:SV,LinearTransfer:Dg,Loader:as,LoaderUtils:Cf,LoadingManager:pT,LoopOnce:UV,LoopPingPong:FV,LoopRepeat:zV,LuminanceAlphaFormat:VV,LuminanceFormat:$V,MOUSE:$h,Material:Br,MaterialLoader:HO,MathUtils:Nr,Matrix3:cn,Matrix4:pt,MaxEquation:tV,Mesh:Jn,MeshBasicMaterial:Aa,MeshDepthMaterial:Kk,MeshDistanceMaterial:Jk,MeshLambertMaterial:hT,MeshMatcapMaterial:VL,MeshNormalMaterial:$L,MeshPhongMaterial:mg,MeshPhysicalMaterial:DL,MeshStandardMaterial:cT,MeshToonMaterial:NL,MinEquation:eV,MirroredRepeatWrapping:pf,MixOperation:wV,MultiplyBlending:aC,MultiplyOperation:x0,NearestFilter:er,NearestMipMapLinearFilter:Gre,NearestMipMapNearestFilter:Hre,NearestMipmapLinearFilter:Wh,NearestMipmapNearestFilter:wO,NeutralToneMapping:EV,NeverCompare:HV,NeverDepth:mV,NeverStencilFunc:ose,NoBlending:fl,NoColorSpace:sl,NoToneMapping:pl,NormalAnimationBlendMode:_O,NormalBlending:tu,NotEqualCompare:qV,NotEqualDepth:xV,NotEqualStencilFunc:use,NumberKeyframeTrack:wf,Object3D:An,ObjectLoader:Xue,ObjectSpaceNormalMap:QV,OctahedronGeometry:P0,OneFactor:iV,OneMinusConstantAlphaFactor:pV,OneMinusConstantColorFactor:dV,OneMinusDstAlphaFactor:aV,OneMinusDstColorFactor:cV,OneMinusSrcAlphaFactor:vb,OneMinusSrcColorFactor:sV,OrthographicCamera:bo,P3Primaries:$g,PCFShadowMap:Dk,PCFSoftShadowMap:Nk,PMREMGenerator:VC,Path:zg,PerspectiveCamera:qn,Plane:ma,PlaneGeometry:Kc,PlaneHelper:Tde,PointLight:xb,PointLightHelper:yde,Points:wL,PointsMaterial:nT,PolarGridHelper:wde,PolyhedronGeometry:Jc,PositionalAudio:Zue,PropertyBinding:pn,PropertyMixer:KL,QuadraticBezierCurve:oT,QuadraticBezierCurve3:aT,Quaternion:Wi,QuaternionKeyframeTrack:Mu,QuaternionLinearInterpolant:XL,RED_GREEN_RGTC2_Format:IC,RED_RGTC1_Format:BV,REVISION:Bf,RGBADepthPacking:WV,RGBAFormat:ks,RGBAIntegerFormat:Wk,RGBA_ASTC_10x10_Format:TC,RGBA_ASTC_10x5_Format:SC,RGBA_ASTC_10x6_Format:CC,RGBA_ASTC_10x8_Format:kC,RGBA_ASTC_12x10_Format:MC,RGBA_ASTC_12x12_Format:EC,RGBA_ASTC_4x4_Format:gC,RGBA_ASTC_5x4_Format:vC,RGBA_ASTC_5x5_Format:yC,RGBA_ASTC_6x5_Format:bC,RGBA_ASTC_6x6_Format:OC,RGBA_ASTC_8x5_Format:xC,RGBA_ASTC_8x6_Format:wC,RGBA_ASTC_8x8_Format:_C,RGBA_BPTC_Format:$1,RGBA_ETC2_EAC_Format:mC,RGBA_PVRTC_2BPPV1_Format:dC,RGBA_PVRTC_4BPPV1_Format:uC,RGBA_S3TC_DXT1_Format:I1,RGBA_S3TC_DXT3_Format:D1,RGBA_S3TC_DXT5_Format:N1,RGBFormat:NV,RGB_BPTC_SIGNED_Format:PC,RGB_BPTC_UNSIGNED_Format:AC,RGB_ETC1_Format:fC,RGB_ETC2_Format:pC,RGB_PVRTC_2BPPV1_Format:hC,RGB_PVRTC_4BPPV1_Format:cC,RGB_S3TC_DXT1_Format:R1,RGFormat:LV,RGIntegerFormat:Xk,RawShaderMaterial:pg,Ray:ku,Raycaster:e8,Rec709Primaries:Ng,RectAreaLight:HL,RedFormat:zk,RedIntegerFormat:Fk,ReinhardToneMapping:CV,RenderTarget:iL,RepeatWrapping:Lc,ReplaceStencilOp:ese,ReverseSubtractEquation:J$,RingGeometry:BO,SIGNED_RED_GREEN_RGTC2_Format:DC,SIGNED_RED_RGTC1_Format:RC,SRGBColorSpace:Ys,SRGBTransfer:si,Scene:Of,ShaderChunk:fn,ShaderLib:po,ShaderMaterial:os,ShadowMaterial:IL,Shape:su,ShapeGeometry:UO,ShapePath:r8,ShapeUtils:_a,ShortType:RV,Skeleton:M0,SkeletonHelper:vde,SkinnedMesh:tT,Source:Gh,Sphere:Cr,SphereGeometry:A0,Spherical:QC,SphericalHarmonics3:GL,SplineCurve:lT,SpotLight:QO,SpotLightHelper:gde,Sprite:vL,SpriteMaterial:eT,SrcAlphaFactor:gb,SrcAlphaSaturateFactor:hV,SrcColorFactor:rV,StaticCopyUsage:yse,StaticDrawUsage:Vg,StaticReadUsage:mse,StereoCamera:Gue,StreamCopyUsage:Ose,StreamDrawUsage:pse,StreamReadUsage:vse,StringKeyframeTrack:Eu,SubtractEquation:K$,SubtractiveBlending:oC,TOUCH:nl,TangentSpaceNormalMap:qc,TetrahedronGeometry:zO,Texture:hi,TextureLoader:mT,TorusGeometry:FO,TorusKnotGeometry:XO,Triangle:_s,TriangleFanDrawMode:Kre,TriangleStripDrawMode:Zre,TrianglesDrawMode:qre,TubeGeometry:WO,UVMapping:xO,Uint16BufferAttribute:TO,Uint32BufferAttribute:jk,Uint8BufferAttribute:toe,Uint8ClampedBufferAttribute:noe,Uniform:GO,UniformsGroup:dde,UniformsLib:ot,UniformsUtils:_0,UnsignedByteType:qo,UnsignedInt248Type:Ff,UnsignedInt5999Type:IV,UnsignedIntType:mu,UnsignedShort4444Type:Bk,UnsignedShort5551Type:Uk,UnsignedShortType:Vk,VSMShadowMap:fa,Vector2:Qe,Vector3:ne,Vector4:yn,VectorKeyframeTrack:_f,VideoTexture:Jhe,WebGL3DRenderTarget:Xse,WebGLArrayRenderTarget:Fse,WebGLCoordinateSystem:ba,WebGLCubeRenderTarget:aL,WebGLMultipleRenderTargets:Pde,WebGLRenderTarget:Co,WebGLRenderer:ug,WebGLUtils:pL,WebGPUCoordinateSystem:Lg,WireframeGeometry:RL,WrapAroundEnding:Ig,ZeroCurvatureEnding:Qh,ZeroFactor:nV,ZeroSlopeEnding:Hh,ZeroStencilOp:Jre,createCanvasElement:eL},Symbol.toStringTag,{value:"Module"}));function _l(i){return lO()?(lk(i),!0):!1}function Hg(){const i=new Set,e=r=>{i.delete(r)};return{on:r=>{i.add(r);const s=()=>e(r);return _l(s),{off:s}},off:e,trigger:(...r)=>Promise.all(Array.from(i).map(s=>s(...r)))}}function fi(i){return typeof i=="function"?i():an(i)}const HC=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Rde=i=>i!=null,Ide=Object.prototype.toString,Dde=i=>Ide.call(i)==="[object Object]",GC=()=>{};function Nde(i,e){function n(...t){return new Promise((r,s)=>{Promise.resolve(i(()=>e.apply(this,t),{fn:e,thisArg:this,args:t})).then(r).catch(s)})}return n}function $de(i,e={}){let n,t,r=GC;const s=l=>{clearTimeout(l),r(),r=GC};return l=>{const h=fi(i),u=fi(e.maxWait);return n&&s(n),h<=0||u!==void 0&&u<=0?(t&&(s(t),t=null),Promise.resolve(l())):new Promise((f,p)=>{r=e.rejectOnCancel?p:f,u&&!t&&(t=setTimeout(()=>{n&&s(n),t=null,f(l())},u)),n=setTimeout(()=>{t&&s(t),t=null,f(l())},h)})}}function Vde(i,e,n=!1){return e.reduce((t,r)=>(r in i&&(!n||i[r]!==void 0)&&(t[r]=i[r]),t),{})}function Lde(i){return io()}function Bde(i,e=200,n={}){return Nde($de(e,n),i)}function tR(i,e=200,n={}){const t=at(i.value),r=Bde(()=>{t.value=i.value},e,n);return Fn(i,()=>r()),t}function Ude(i,e={}){if(!Hi(i))return v0(i);const n=Array.isArray(i.value)?Array.from({length:i.value.length}):{};for(const t in i.value)n[t]=gk(()=>({get(){return i.value[t]},set(r){var s;if((s=fi(e.replaceRef))!=null?s:!0)if(Array.isArray(i.value)){const l=[...i.value];l[t]=r,i.value=l}else{const l={...i.value,[t]:r};Object.setPrototypeOf(l,Object.getPrototypeOf(i.value)),i.value=l}else i.value[t]=r}}));return n}function _T(i,e=!0,n){Lde()?Yi(i,n):e?i():Lf(i)}function zde(i,e=1e3,n={}){const{immediate:t=!0,immediateCallback:r=!1}=n;let s=null;const a=at(!1);function l(){s&&(clearInterval(s),s=null)}function h(){a.value=!1,l()}function u(){const f=fi(e);f<=0||(a.value=!0,r&&i(),l(),s=setInterval(i,f))}if(t&&HC&&u(),Hi(e)||typeof e=="function"){const f=Fn(e,()=>{a.value&&HC&&u()});_l(f)}return _l(h),{isActive:a,pause:h,resume:u}}function Go(i){var e;const n=fi(i);return(e=n==null?void 0:n.$el)!=null?e:n}const Pl=HC?window:void 0;function Gg(...i){let e,n,t,r;if(typeof i[0]=="string"||Array.isArray(i[0])?([n,t,r]=i,e=Pl):[e,n,t,r]=i,!e)return GC;Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const s=[],a=()=>{s.forEach(f=>f()),s.length=0},l=(f,p,g,v)=>(f.addEventListener(p,g,v),()=>f.removeEventListener(p,g,v)),h=Fn(()=>[Go(e),fi(r)],([f,p])=>{if(a(),!f)return;const g=Dde(p)?{...p}:p;s.push(...n.flatMap(v=>t.map(y=>l(f,v,y,g))))},{immediate:!0,flush:"post"}),u=()=>{h(),a()};return _l(u),u}function Fde(){const i=at(!1),e=io();return e&&Yi(()=>{i.value=!0},e),i}function YO(i){const e=Fde();return ci(()=>(e.value,!!i()))}function Xde(i,e,n={}){const{window:t=Pl,...r}=n;let s;const a=YO(()=>t&&"MutationObserver"in t),l=()=>{s&&(s.disconnect(),s=void 0)},h=ci(()=>{const g=fi(i),v=(Array.isArray(g)?g:[g]).map(Go).filter(Rde);return new Set(v)}),u=Fn(()=>h.value,g=>{l(),a.value&&g.size&&(s=new MutationObserver(e),g.forEach(v=>s.observe(v,r)))},{immediate:!0,flush:"post"}),f=()=>s==null?void 0:s.takeRecords(),p=()=>{l(),u()};return _l(p),{isSupported:a,stop:p,takeRecords:f}}function ST(i,e={}){const{immediate:n=!0,fpsLimit:t=void 0,window:r=Pl}=e,s=at(!1),a=t?1e3/t:null;let l=0,h=null;function u(g){if(!s.value||!r)return;l||(l=g);const v=g-l;if(a&&v<a){h=r.requestAnimationFrame(u);return}l=g,i({delta:v,timestamp:g}),h=r.requestAnimationFrame(u)}function f(){!s.value&&r&&(s.value=!0,l=0,h=r.requestAnimationFrame(u))}function p(){s.value=!1,h!=null&&r&&(r.cancelAnimationFrame(h),h=null)}return n&&f(),_l(p),{isActive:cu(s),pause:p,resume:f}}function Wde(i,e={}){const{window:n=Pl}=e,t=YO(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const s=at(!1),a=u=>{s.value=u.matches},l=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",a):r.removeListener(a))},h=dl(()=>{t.value&&(l(),r=n.matchMedia(fi(i)),"addEventListener"in r?r.addEventListener("change",a):r.addListener(a),s.value=r.matches)});return _l(()=>{h(),l(),r=void 0}),s}function Qde(i={}){const{window:e=Pl}=i,n=at(1);if(e){let t=function(){n.value=e.devicePixelRatio,r(),s=e.matchMedia(`(resolution: ${n.value}dppx)`),s.addEventListener("change",t,{once:!0})},r=function(){s==null||s.removeEventListener("change",t)},s;t(),_l(r)}return{pixelRatio:n}}function s8(i,e,n={}){const{window:t=Pl,...r}=n;let s;const a=YO(()=>t&&"ResizeObserver"in t),l=()=>{s&&(s.disconnect(),s=void 0)},h=ci(()=>Array.isArray(i)?i.map(p=>Go(p)):[Go(i)]),u=Fn(h,p=>{if(l(),a.value&&t){s=new ResizeObserver(e);for(const g of p)g&&s.observe(g,r)}},{immediate:!0,flush:"post"}),f=()=>{l(),u()};return _l(f),{isSupported:a,stop:f}}function Hde(i,e={}){const{reset:n=!0,windowResize:t=!0,windowScroll:r=!0,immediate:s=!0}=e,a=at(0),l=at(0),h=at(0),u=at(0),f=at(0),p=at(0),g=at(0),v=at(0);function y(){const w=Go(i);if(!w){n&&(a.value=0,l.value=0,h.value=0,u.value=0,f.value=0,p.value=0,g.value=0,v.value=0);return}const x=w.getBoundingClientRect();a.value=x.height,l.value=x.bottom,h.value=x.left,u.value=x.right,f.value=x.top,p.value=x.width,g.value=x.x,v.value=x.y}return s8(i,y),Fn(()=>Go(i),w=>!w&&y()),Xde(i,y,{attributeFilter:["style","class"]}),r&&Gg("scroll",y,{capture:!0,passive:!0}),t&&Gg("resize",y,{passive:!0}),_T(()=>{s&&y()}),{height:a,bottom:l,left:h,right:u,top:f,width:p,x:g,y:v,update:y}}function Gde(i,e={width:0,height:0},n={}){const{window:t=Pl,box:r="content-box"}=n,s=ci(()=>{var p,g;return(g=(p=Go(i))==null?void 0:p.namespaceURI)==null?void 0:g.includes("svg")}),a=at(e.width),l=at(e.height),{stop:h}=s8(i,([p])=>{const g=r==="border-box"?p.borderBoxSize:r==="content-box"?p.contentBoxSize:p.devicePixelContentBoxSize;if(t&&s.value){const v=Go(i);if(v){const y=v.getBoundingClientRect();a.value=y.width,l.value=y.height}}else if(g){const v=Array.isArray(g)?g:[g];a.value=v.reduce((y,{inlineSize:w})=>y+w,0),l.value=v.reduce((y,{blockSize:w})=>y+w,0)}else a.value=p.contentRect.width,l.value=p.contentRect.height},n);_T(()=>{const p=Go(i);p&&(a.value="offsetWidth"in p?p.offsetWidth:e.width,l.value="offsetHeight"in p?p.offsetHeight:e.height)});const u=Fn(()=>Go(i),p=>{a.value=p?e.width:0,l.value=p?e.height:0});function f(){h(),u()}return{width:a,height:l,stop:f}}function Yde(i){var e;const n=at(0);if(typeof performance>"u")return n;const t=(e=i==null?void 0:i.every)!=null?e:10;let r=performance.now(),s=0;return ST(()=>{if(s+=1,s>=t){const a=performance.now(),l=a-r;n.value=Math.round(1e3/(l/s)),r=a,s=0}}),n}function jde(i={}){const e=at(),n=YO(()=>typeof performance<"u"&&"memory"in performance);if(n.value){const{interval:t=1e3}=i;zde(()=>{e.value=performance.memory},t,{immediate:i.immediate,immediateCallback:i.immediateCallback})}return{isSupported:n,memory:e}}const o8={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},qde=Object.keys(o8);function Zde(i={}){const{target:e=Pl}=i,n=at(!1),t=at(i.initialValue||{});Object.assign(t.value,o8,t.value);const r=s=>{n.value=!0,!(i.pointerTypes&&!i.pointerTypes.includes(s.pointerType))&&(t.value=Vde(s,qde,!1))};if(e){const s={passive:!0};Gg(e,["pointerdown","pointermove","pointerup"],r,s),Gg(e,"pointerleave",()=>n.value=!1,s)}return{...Ude(t),isInside:n}}function Kde(i={}){const{window:e=Pl,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:t=Number.POSITIVE_INFINITY,listenOrientation:r=!0,includeScrollbar:s=!0}=i,a=at(n),l=at(t),h=()=>{e&&(s?(a.value=e.innerWidth,l.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,l.value=e.document.documentElement.clientHeight))};if(h(),_T(h),Gg("resize",h,{passive:!0}),r){const u=Wde("(orientation: portrait)");Fn(u,()=>h())}return{width:a,height:l}}var Jde=Object.defineProperty,efe=(i,e,n)=>e in i?Jde(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,nR=(i,e,n)=>(efe(i,typeof e!="symbol"?e+"":e,n),n);const tfe="@tresjs/core",nfe="module",ife="3.9.0",rfe="pnpm@8.15.6",sfe="Declarative ThreeJS using Vue Components",ofe="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",afe="MIT",lfe=["vue","3d","threejs","three","threejs-vue"],cfe=!1,hfe={".":{types:"./dist/index.d.ts",import:"./dist/tres.js",require:"./dist/tres.umd.cjs"},"./components":{types:"./dist/src/components/index.d.ts"},"./composables":{types:"./dist/src/composables/index.d.ts"},"./types":{types:"./dist/src/types/index.d.ts"},"./utils":{types:"./dist/src/utils/index.d.ts"},"./*":"./*"},ufe="./dist/tres.js",dfe="./dist/tres.js",ffe="./dist/index.d.ts",pfe=["*.d.ts","dist"],mfe={access:"public"},gfe={dev:"cd playground && npm run dev",build:"vite build",playground:"cd playground && npm run dev",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui",release:"release-it",coverage:"vitest run --coverage",lint:"eslint .","lint:fix":"eslint . --fix","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts",prepare:"node .husky/install.mjs"},vfe={three:">=0.133",vue:">=3.3"},yfe={"@alvarosabu/utils":"^3.1.1","@vue/devtools-api":"^6.6.1","@vueuse/core":"^10.7.0"},bfe={"@release-it/conventional-changelog":"^8.0.1","@stackblitz/sdk":"^1.9.0","@tresjs/cientos":"3.8.0","@tresjs/eslint-config":"^1.0.0","@tresjs/eslint-config-vue":"^0.2.1","@types/three":"^0.163.0","@typescript-eslint/eslint-plugin":"^7.7.1","@typescript-eslint/parser":"^7.7.1","@vitejs/plugin-vue":"^5.0.4","@vitest/coverage-c8":"^0.33.0","@vitest/ui":"^1.5.0","@vue/test-utils":"^2.4.3",eslint:"^9.1.1","eslint-plugin-vue":"^9.25.0",esno:"^4.0.0",gsap:"^3.12.3",husky:"^9.0.11",jsdom:"^24.0.0",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^1.1.1","release-it":"^17.2.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.11.0",three:"^0.163.0",unocss:"^0.59.4",unplugin:"^1.10.1","unplugin-vue-components":"^0.26.0",vite:"^5.2.10","vite-plugin-banner":"^0.7.1","vite-plugin-dts":"3.9.0","vite-plugin-inspect":"^0.8.4","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.1.3",vitest:"^1.5.0",vue:"^3.4.24","vue-demi":"^0.14.6"},Ofe={name:tfe,type:nfe,version:ife,packageManager:rfe,description:sfe,author:ofe,license:afe,keywords:lfe,sideEffects:cfe,exports:hfe,main:ufe,module:dfe,types:ffe,files:pfe,publishConfig:mfe,scripts:gfe,peerDependencies:vfe,dependencies:yfe,devDependencies:bfe},xfe=({sizes:i,scene:e})=>{const n=at([]),t=ci(()=>n.value[0]),r=l=>{const h=l instanceof S0?l:n.value.find(f=>f.uuid===l);if(!h)return;const u=n.value.filter(({uuid:f})=>f!==h.uuid);n.value=[h,...u]},s=(l,h=!1)=>{n.value.some(({uuid:u})=>u===l.uuid)||(h?r(l):n.value.push(l))},a=l=>{n.value=n.value.filter(({uuid:h})=>h!==l.uuid)};return dl(()=>{i.aspectRatio.value&&n.value.forEach(l=>{l instanceof qn&&(l.aspect=i.aspectRatio.value),(l instanceof qn||l instanceof bo)&&l.updateProjectionMatrix()})}),e.userData.tres__registerCamera=s,e.userData.tres__deregisterCamera=a,To(()=>{n.value=[]}),{camera:t,cameras:n,registerCamera:s,deregisterCamera:a,setCameraActive:r}},a8=Hg(),l8=Hg(),CT=Hg(),gg=new OT;let B1=0,U1=0;const{pause:wfe,resume:_fe,isActive:Sfe}=ST(()=>{a8.trigger({delta:B1,elapsed:U1,clock:gg}),l8.trigger({delta:B1,elapsed:U1,clock:gg}),CT.trigger({delta:B1,elapsed:U1,clock:gg})},{immediate:!1});CT.on(()=>{B1=gg.getDelta(),U1=gg.getElapsedTime()});const Pu=()=>({onBeforeLoop:a8.on,onLoop:l8.on,onAfterLoop:CT.on,pause:wfe,resume:_fe,isActive:Sfe}),Gy="[TresJS ▲ ■ ●] ";function jO(){function i(...t){typeof t[0]=="string"?t[0]=Gy+t[0]:t.unshift(Gy),console.error(...t)}function e(...t){typeof t[0]=="string"?t[0]=Gy+t[0]:t.unshift(Gy),console.warn(...t)}function n(t,r){}return{logError:i,logWarning:e,logMessage:n}}function Cfe(i){return i instanceof nt?i:Array.isArray(i)?new nt(...i):new nt(i)}class kfe extends Jn{constructor(...e){super(...e),nR(this,"type","HightlightMesh"),nR(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const e=(Date.now()-this.createTime)/1e3,n=1+.07*Math.sin(2.5*e);this.scale.set(n,n,n)}}const c8=(i,e)=>{for(const n of Object.keys(e))e[n]instanceof Object&&Object.assign(e[n],c8(i[n],e[n]));return Object.assign(i||{},e),i},Tfe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Mfe=Efe(Tfe);function iR(i){return i&&i.nodeType===1}function Yy(i){return i.replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Efe(i,e){const n=Object.create(null),t=i.split(",");for(let r=0;r<t.length;r++)n[t[r]]=!0;return r=>!!n[r]}const Pfe=(i,e)=>{const n=new Set,t=[];for(const r of i){const s=e(r);n.has(s)||(n.add(s),t.push(r))}return t},rR=(i,e)=>{if(!e)return;const n=Array.isArray(e)?e:e.match(/([^[.\]])+/g);return n==null?void 0:n.reduce((t,r)=>t&&t[r],i)},Afe=(i,e,n)=>{const t=Array.isArray(e)?e:e.match(/([^[.\]])+/g);t&&t.reduce((r,s,a)=>(r[s]===void 0&&(r[s]={}),a===t.length-1&&(r[s]=n),r[s]),i)};function h8(i,e){if(iR(i)&&iR(e)){const r=i.attributes,s=e.attributes;return r.length!==s.length?!1:Array.from(r).every(({name:a,value:l})=>e.getAttribute(a)===l)}if(i===e)return!0;if(i===null||typeof i!="object"||e===null||typeof e!="object")return!1;const n=Object.keys(i),t=Object.keys(e);if(n.length!==t.length)return!1;for(const r of n)if(!t.includes(r)||!h8(i[r],e[r]))return!1;return!0}function Rfe(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(!h8(i[n],e[n]))return!1;return!0}const Ife=Array.isArray;function Dfe(i,e,n,t){const r=h=>{if(h.uuid===e)return h;for(const u of h.children){const f=r(u);if(f)return f}},s=r(i);if(!s){console.warn("Object with UUID not found in the scene.");return}let a=s;for(let h=0;h<n.length-1;h++)if(a[n[h]]!==void 0)a=a[n[h]];else{console.warn(`Property path is not valid: ${n.join(".")}`);return}const l=n[n.length-1];a[l]!==void 0?a[l]=t:console.warn(`Property path is not valid: ${n.join(".")}`)}function Nfe(i){const e=new Aa({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:ws});return new kfe(i.geometry.clone(),e)}const $fe=Number.parseInt(Bf.replace("dev","")),jy={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:Ys,toneMapping:$k,toneMappingExposure:3,shadowMap:{enabled:!0,type:Nk}}};function Vfe({scene:i,canvas:e,options:n,disableRender:t,contextParts:{sizes:r,camera:s}}){const a=ci(()=>({alpha:fi(n.alpha),depth:fi(n.depth),canvas:Go(e),context:fi(n.context),stencil:fi(n.stencil),antialias:fi(n.antialias)===void 0?!0:fi(n.antialias),precision:fi(n.precision),powerPreference:fi(n.powerPreference),premultipliedAlpha:fi(n.premultipliedAlpha),preserveDrawingBuffer:fi(n.preserveDrawingBuffer),logarithmicDepthBuffer:fi(n.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:fi(n.failIfMajorPerformanceCaveat)})),l=dr(new ug(a.value));Fn(a,()=>{l.value.dispose(),l.value=new ug(a.value)}),dl(()=>{l.value.setSize(r.width.value,r.height.value)});const{pixelRatio:h}=Qde();dl(()=>{l.value.setPixelRatio(h.value)});const{logError:u}=jO(),f=(()=>{const y=new ug,w={shadowMap:{enabled:y.shadowMap.enabled,type:y.shadowMap.type},toneMapping:y.toneMapping,toneMappingExposure:y.toneMappingExposure,outputColorSpace:y.outputColorSpace};return y.dispose(),w})();dl(()=>{const y=fi(n.preset);y&&(y in jy||u(`Renderer Preset must be one of these: ${Object.keys(jy).join(", ")}`),c8(l.value,jy[y]));const w=(_,O)=>{const k=fi(_),M=()=>{if(y)return rR(jy[y],O)};if(k!==void 0)return k;const P=M();return P!==void 0?P:rR(f,O)},x=(_,O)=>Afe(l.value,O,w(_,O));x(n.shadows,"shadowMap.enabled"),x(n.toneMapping,"toneMapping"),x(n.shadowMapType,"shadowMap.type"),$fe<150&&x(!n.useLegacyLights,"physicallyCorrectLights"),x(n.outputColorSpace,"outputColorSpace"),x(n.toneMappingExposure,"toneMappingExposure");const S=w(n.clearColor,"clearColor");S&&l.value.setClearColor(S?Cfe(S):new nt(0))});const{pause:p,resume:g,onLoop:v}=Pu();return v(()=>{s.value&&!fi(t)&&l.value.render(i,s.value)}),g(),To(()=>{p(),l.value.dispose(),l.value.forceContextLoss()}),{renderer:l}}const sR=i=>typeof i=="function",Lfe=i=>!!i&&i.constructor===Array;function Bfe(i){const e={nodes:{},materials:{}};return i&&i.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}async function Ufe(i,e,n,t,r){const{logError:s}=jO(),a=new i,l=(Array.isArray(e)?e:[e]).map(h=>new Promise((u,f)=>{a.load(h,p=>{p.scene&&Object.assign(p,Bfe(p.scene)),u(p)},t,p=>f(s("[useLoader] - Failed to load resource",p)))}));return Lfe(e)?await Promise.all(l):await l[0]}async function zfe(i,e){const n=new mT(e),t=r=>new Promise((s,a)=>{n.load(r,l=>s(l),()=>null,()=>{a(new Error("[useTextures] - Failed to load texture"))})});if(Ife(i)){const r=await Promise.all(i.map(s=>t(s)));return i.length>1?r:r[0]}else{const{map:r,displacementMap:s,normalMap:a,roughnessMap:l,metalnessMap:h,aoMap:u,alphaMap:f,matcap:p}=i;return{map:r?await t(r):null,displacementMap:s?await t(s):null,normalMap:a?await t(a):null,roughnessMap:l?await t(l):null,metalnessMap:h?await t(h):null,aoMap:u?await t(u):null,alphaMap:f?await t(f):null,matcap:p?await t(p):null}}}const Ffe=(i,{renderer:e,camera:n,raycaster:t})=>{const r=ci(()=>e.value.domElement),{x:s,y:a}=Zde({target:r}),{width:l,height:h,top:u,left:f}=Hde(r),p=({x:D,y:A})=>{if(r.value)return{x:(D-f.value)/l.value*2-1,y:-((A-u.value)/h.value)*2+1}},g=({x:D,y:A})=>{if(n.value)return t.value.setFromCamera(new Qe(D,A),n.value),t.value.intersectObjects(i.value,!1)},v=D=>{const A=p({x:(D==null?void 0:D.clientX)??s.value,y:(D==null?void 0:D.clientY)??a.value});return A?g(A)||[]:[]},y=ci(()=>v()),w=Hg(),x=Hg(),S=(D,A)=>{D.trigger({event:A,intersects:v(A)})},_=D=>{S(x,D)};let O;const k=D=>{var A;O=(A=v(D)[0])==null?void 0:A.object},M=D=>{var A;D instanceof PointerEvent&&O===((A=v(D)[0])==null?void 0:A.object)&&S(w,D)},P=D=>x.trigger({event:D,intersects:[]});return r.value.addEventListener("pointerup",M),r.value.addEventListener("pointerdown",k),r.value.addEventListener("pointermove",_),r.value.addEventListener("pointerleave",P),To(()=>{r!=null&&r.value&&(r.value.removeEventListener("pointerup",M),r.value.removeEventListener("pointerdown",k),r.value.removeEventListener("pointermove",_),r.value.removeEventListener("pointerleave",P))}),{intersects:y,onClick:D=>w.on(D).off,onPointerMove:D=>x.on(D).off}},Xfe=({scene:i,contextParts:e})=>{const n=Vf({click:new Map,pointerMove:new Map,pointerEnter:new Map,pointerLeave:new Map}),t=at(new Set),r=g=>{t.value.add(g)},s=g=>{t.value.delete(g)},a=g=>{Object.values(n).forEach(v=>v.delete(g)),s(g)},l=g=>{const{onClick:v,onPointerMove:y,onPointerEnter:w,onPointerLeave:x}=g;v&&n.click.set(g,v),y&&n.pointerMove.set(g,y),w&&n.pointerEnter.set(g,w),x&&n.pointerLeave.set(g,x)};i.userData.tres__registerAtPointerEventHandler=l,i.userData.tres__deregisterAtPointerEventHandler=a,i.userData.tres__registerBlockingObjectAtPointerEventHandler=r,i.userData.tres__deregisterBlockingObjectAtPointerEventHandler=s;const h=ci(()=>Pfe([...Array.from(t.value),...Object.values(n).map(g=>Array.from(g.keys())).flat()],({uuid:g})=>g)),{onClick:u,onPointerMove:f}=Ffe(h,e);u(({intersects:g,event:v})=>{var y;g.length&&((y=n.click.get(g[0].object))==null||y(g[0],v))});let p;return f(({intersects:g,event:v})=>{var y,w,x,S;const _=(y=g==null?void 0:g[0])==null?void 0:y.object,{pointerLeave:O,pointerEnter:k,pointerMove:M}=n;p&&p!==_&&((w=O.get(p))==null||w(p,v)),_&&(p!==_&&((x=k.get(_))==null||x(g[0],v)),(S=M.get(_))==null||S(g[0],v)),p=_||null}),{registerObject:l,deregisterObject:a}};function u8(i){let e=0;return i.traverse(n=>{if(n.isMesh&&n.geometry){const t=n.geometry,r=t.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,s=t.index?t.index.count*Uint32Array.BYTES_PER_ELEMENT:0,a=t.attributes.normal?t.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,l=t.attributes.uv?t.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,h=r+s+a+l;e+=h}}),e}function Wfe(i){return(i/1024).toFixed(2)}const YC=at({}),kT=i=>Object.assign(YC.value,i);function Qfe(i,e,n=10){const t=fi(i)?Kde():Gde(ci(()=>fi(e).parentElement)),r=cu(tR(t.width,n)),s=cu(tR(t.height,n)),a=ci(()=>r.value/s.value);return{height:s,width:r,aspectRatio:a}}function Hfe({scene:i,canvas:e,windowSize:n,disableRender:t,rendererOptions:r}){const s=Qfe(n,e),a=dr(i),{camera:l,cameras:h,registerCamera:u,deregisterCamera:f,setCameraActive:p}=xfe({sizes:s,scene:i}),{renderer:g}=Vfe({scene:i,canvas:e,options:r,contextParts:{sizes:s,camera:l},disableRender:t}),v={sizes:s,scene:a,camera:l,cameras:cu(h),renderer:g,raycaster:dr(new e8),controls:at(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},extend:kT,registerCamera:u,setCameraActive:p,deregisterCamera:f};Pg("useTres",v);const y=100,w=Yde({every:y}),{isSupported:x,memory:S}=jde({interval:y}),_=160;let O=performance.now();const k=({timestamp:A})=>{v.scene.value&&(v.perf.memory.allocatedMem=u8(v.scene.value)),A-O>=y&&(O=A,v.perf.fps.accumulator.push(w.value),v.perf.fps.accumulator.length>_&&v.perf.fps.accumulator.shift(),v.perf.fps.value=w.value,x.value&&S.value&&(v.perf.memory.accumulator.push(S.value.usedJSHeapSize/1024/1024),v.perf.memory.accumulator.length>_&&v.perf.memory.accumulator.shift(),v.perf.memory.currentMem=v.perf.memory.accumulator.reduce((R,T)=>R+T,0)/v.perf.memory.accumulator.length))};let M=0;const P=1,{pause:D}=ST(({delta:A})=>{window.__TRES__DEVTOOLS__&&(k({timestamp:performance.now()}),M+=A,M>=P&&(window.__TRES__DEVTOOLS__.cb(v),M=0))},{immediate:!0});return To(()=>{D()}),v}function TT(){const i=Gd("useTres");if(!i)throw new Error("useTresContext must be used together with useTresContextProvider");return i}let Ai=null;const{logError:oR}=jO(),D_=["onClick","onPointerMove","onPointerEnter","onPointerLeave"],Gfe={createElement(i,e,n,t){var r,s;if(t||(t={}),t.args||(t.args=[]),i==="template"||Mfe(i))return null;let a=i.replace("Tres",""),l;if(i==="primitive"){(t==null?void 0:t.object)===void 0&&oR("Tres primitives need a prop 'object'");const h=t.object;a=h.type,l=Object.assign(h,{type:a,attach:t.attach,primitive:!0})}else{const h=YC.value[a];h||oR(`${a} is not defined on the THREE namespace. Use extend to add it to the catalog.`),l=new h(...t.args)}return l.isCamera&&(t!=null&&t.position||l.position.set(3,3,3),t!=null&&t.lookAt||l.lookAt(0,0,0)),(t==null?void 0:t.attach)===void 0&&(l.isMaterial?l.attach="material":l.isBufferGeometry&&(l.attach="geometry")),l.isObject3D&&((r=t==null?void 0:t.material)!=null&&r.isMaterial&&(l.userData.tres__materialViaProp=!0),(s=t==null?void 0:t.geometry)!=null&&s.isBufferGeometry&&(l.userData.tres__geometryViaProp=!0)),l.userData={...l.userData,tres__name:a},l},insert(i,e){var n,t,r,s;e&&e.isScene&&(Ai=e);const a=e||Ai;if(i!=null&&i.isObject3D){if(i!=null&&i.isCamera){if(!(Ai!=null&&Ai.userData.tres__registerCamera))throw new Error("could not find tres__registerCamera on scene's userData");(t=Ai==null?void 0:(n=Ai.userData).tres__registerCamera)==null||t.call(n,i)}if(i&&D_.some(l=>i[l])){if(!(Ai!=null&&Ai.userData.tres__registerAtPointerEventHandler))throw new Error("could not find tres__registerAtPointerEventHandler on scene's userData");(s=Ai==null?void 0:(r=Ai.userData).tres__registerAtPointerEventHandler)==null||s.call(r,i)}}i!=null&&i.isObject3D&&a!=null&&a.isObject3D?(a.add(i),i.dispatchEvent({type:"added"})):i!=null&&i.isFog?a.fog=i:typeof(i==null?void 0:i.attach)=="string"&&(i.__previousAttach=i[a==null?void 0:a.attach],a&&(a[i.attach]=i))},remove(i){var e,n;if(i){if(i.isObject3D){const t=i,r=u=>{var f,p;const g=u;u.userData.tres__materialViaProp||((f=g.material)==null||f.dispose(),g.material=void 0),u.userData.tres__geometryViaProp||((p=g.geometry)==null||p.dispose(),g.geometry=void 0)},s=Ai==null?void 0:Ai.userData.tres__deregisterAtPointerEventHandler,a=Ai==null?void 0:Ai.userData.tres__deregisterBlockingObjectAtPointerEventHandler,l=u=>{var f,p;if(!a)throw new Error("could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData");if((p=Ai==null?void 0:(f=Ai.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||p.call(f,u),!s)throw new Error("could not find tres__deregisterAtPointerEventHandler on scene's userData");u&&D_.some(g=>u[g])&&(s==null||s(u))},h=u=>{const f=Ai==null?void 0:Ai.userData.tres__deregisterCamera;if(!f)throw new Error("could not find tres__deregisterCamera on scene's userData");u.isCamera&&(f==null||f(u))};(e=i.removeFromParent)==null||e.call(i),t.traverse(u=>{r(u),h(u),l==null||l(u)}),r(t),h(t),l==null||l(t)}(n=i.dispose)==null||n.call(i)}},patchProp(i,e,n,t){var r,s,a,l;if(i){let h=i,u=e;if(i.isObject3D&&u==="blocks-pointer-events"){t||t===""?(s=Ai==null?void 0:(r=Ai.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||s.call(r,i):(l=Ai==null?void 0:(a=Ai.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||l.call(a,i);return}let f=Yy(u),p=h==null?void 0:h[f];if(u==="args"){const v=i,y=n??[],w=t??[],x=i.userData.tres__name||i.type;x&&y.length&&!Rfe(y,w)&&(h=Object.assign(v,new YC.value[x](...t)));return}if(h.type==="BufferGeometry"){if(u==="args")return;h.setAttribute(Yy(u),new In(...t));return}if(u.includes("-")&&p===void 0){const v=u.split("-");p=v.reduce((y,w)=>y[Yy(w)],h),u=v.pop(),f=u.toLowerCase(),p!=null&&p.set||(h=v.reduce((y,w)=>y[Yy(w)],h))}let g=t;if(g===""&&(g=!0),sR(p)){D_.includes(e)||(Array.isArray(g)?i[f](...g):i[f](g));return}!(p!=null&&p.set)&&!sR(p)?h[f]=g:p.constructor===g.constructor&&p!=null&&p.copy?p==null||p.copy(g):Array.isArray(g)?p.set(...g):!p.isColor&&p.setScalar?p.setScalar(g):p.set(g)}},parentNode(i){return(i==null?void 0:i.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}},{render:Yfe}=Tk(Gfe);kT(Ade);function jfe(){return d8().__VUE_DEVTOOLS_GLOBAL_HOOK__}function d8(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const qfe=typeof Proxy=="function",Zfe="devtools-plugin:setup",Kfe="plugin:settings:set";let Yp,jC;function Jfe(){var i;return Yp!==void 0||(typeof window<"u"&&window.performance?(Yp=!0,jC=window.performance):typeof globalThis<"u"&&!((i=globalThis.perf_hooks)===null||i===void 0)&&i.performance?(Yp=!0,jC=globalThis.perf_hooks.performance):Yp=!1),Yp}function epe(){return Jfe()?jC.now():Date.now()}class tpe{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const t={};if(e.settings)for(const a in e.settings){const l=e.settings[a];t[a]=l.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},t);try{const a=localStorage.getItem(r),l=JSON.parse(a);Object.assign(s,l)}catch{}this.fallbacks={getSettings(){return s},setSettings(a){try{localStorage.setItem(r,JSON.stringify(a))}catch{}s=a},now(){return epe()}},n&&n.on(Kfe,(a,l)=>{a===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(a,l)=>this.target?this.target.on[l]:(...h)=>{this.onQueue.push({method:l,args:h})}}),this.proxiedTarget=new Proxy({},{get:(a,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...h)=>(this.targetQueue.push({method:l,args:h,resolve:()=>{}}),this.fallbacks[l](...h)):(...h)=>new Promise(u=>{this.targetQueue.push({method:l,args:h,resolve:u})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function npe(i,e){const n=i,t=d8(),r=jfe(),s=qfe&&n.enableEarlyProxy;if(r&&(t.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(Zfe,i,e);else{const a=s?new tpe(n,r):null;(t.__VUE_DEVTOOLS_PLUGINS__=t.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}function ipe(i,e){const n=`▲ ■ ●${i}`;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):console.log(n)}const f8=i=>{const e={id:i.uuid,label:i.type,children:[],tags:[]};i.name!==""&&e.tags.push({label:i.name,textColor:5750629,backgroundColor:15793395});const n=u8(i);return n>0&&e.tags.push({label:`${Wfe(n)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),i.type.includes("Light")&&(e.tags.push({label:`${i.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),e.tags.push({label:`#${i.color.getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),i.type.includes("Camera")&&(e.tags.push({label:`${i.fov}°`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),e.tags.push({label:`x: ${Math.round(i.position.x)} y: ${Math.round(i.position.y)} z: ${Math.round(i.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),e};function p8(i,e){i.children.forEach(n=>{if(n.type==="HightlightMesh")return;const t=f8(n);e.children.push(t),p8(n,t)})}const rpe=[],jp="tres:inspector",spe=Vf({sceneGraph:null});function ope(i,e){npe({id:"dev.esm.tres",label:"TresJS 🪐",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:rpe,app:i},n=>{typeof n.now!="function"&&ipe("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addInspector({id:jp,label:"TresJS 🪐",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{n.sendInspectorTree(jp)},1e3),setInterval(()=>{n.notifyComponentUpdate()},5e3),n.on.getInspectorTree(s=>{if(s.inspectorId===jp){const a=f8(e.scene.value);p8(e.scene.value,a),spe.sceneGraph=a,s.rootNodes=[a]}});let t=null,r=null;n.on.getInspectorState(s=>{if(s.inspectorId===jp){const[a]=e.scene.value.getObjectsByProperty("uuid",s.nodeId);if(!a)return;if(r&&t&&t.parent&&r.remove(t),a.isMesh){const l=Nfe(a);a.add(l),t=l,r=a}s.state={object:[{key:"uuid",editable:!0,value:a.uuid},{key:"name",editable:!0,value:a.name},{key:"type",editable:!0,value:a.type},{key:"position",editable:!0,value:a.position},{key:"rotation",editable:!0,value:a.rotation},{key:"scale",editable:!0,value:a.scale},{key:"geometry",value:a.geometry},{key:"material",value:a.material},{key:"color",editable:!0,value:a.color},{key:"intensity",editable:!0,value:a.intensity},{key:"castShadow",editable:!0,value:a.castShadow},{key:"receiveShadow",editable:!0,value:a.receiveShadow},{key:"frustumCulled",editable:!0,value:a.frustumCulled},{key:"matrixAutoUpdate",editable:!0,value:a.matrixAutoUpdate},{key:"matrixWorldNeedsUpdate",editable:!0,value:a.matrixWorldNeedsUpdate},{key:"matrixWorld",value:a.matrixWorld},{key:"visible",editable:!0,value:a.visible}]}}}),n.on.editInspectorState(s=>{s.inspectorId===jp&&Dfe(e.scene.value,s.nodeId,s.path,s.state.value)})})}const ape=["data-scene","data-tres"],MT=yl({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},disableRender:{type:Boolean,default:void 0},context:{},precision:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},logarithmicDepthBuffer:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0}},setup(i,{expose:e}){var n;const t=i,r=Sk(),{logWarning:s}=jO(),a=at(),l=dr(new Of),{resume:h}=Pu(),u=(n=io())==null?void 0:n.appContext.app,f=w=>yl({setup(){var x;const S=(x=io())==null?void 0:x.appContext;return S&&(S.app=u),Pg("useTres",w),Pg("extend",kT),typeof window<"u"&&ope(S.app,w),()=>hb(ai,null,r!=null&&r.default?r.default():[])}}),p=w=>{const x=f(w);Yfe(hb(x),l.value)},g=(w,x=!1)=>{l.value.children=[],x&&(w.renderer.value.dispose(),w.renderer.value.renderLists.dispose(),w.renderer.value.forceContextLoss()),p(w),h()},v=ci(()=>t.disableRender),y=dr(null);return e({context:y,dispose:()=>g(y.value,!0)}),Yi(()=>{const w=a;y.value=Hfe({scene:l.value,canvas:w,windowSize:t.windowSize,disableRender:v,rendererOptions:t}),Xfe({scene:l.value,contextParts:y.value});const{registerCamera:x,camera:S,cameras:_,deregisterCamera:O}=y.value;p(y.value);const k=()=>{const M=new qn(45,window.innerWidth/window.innerHeight,.1,1e3);M.position.set(3,3,3),M.lookAt(0,0,0),x(M);const P=dl(()=>{_.value.length>=2&&(M.removeFromParent(),O(M),P==null||P())})};Fn(()=>t.camera,(M,P)=>{M&&x(M),P&&(P.removeFromParent(),O(P))},{immediate:!0}),S.value||(s("No camera found. Creating a default perspective camera. To have full control over a camera, please add one to the scene."),k())}),(w,x)=>(mn(),xi("canvas",{ref_key:"canvas",ref:a,"data-scene":l.value.uuid,class:$f(w.$attrs.class),"data-tres":`tresjs ${an(Ofe).version}`,style:Gc({display:"block",width:"100%",height:"100%",position:w.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...w.$attrs.style})},null,14,ape))}}),lpe={install(i){i.component("TresCanvas",MT)}};/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function Mi(i){return i==null}function ET(i){return i!==null&&typeof i=="object"}function qC(i){return i!==null&&typeof i=="object"}function cpe(i,e){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==e[n])return!1;return!0}function vu(i,e){return Array.from(new Set([...Object.keys(i),...Object.keys(e)])).reduce((t,r)=>{const s=i[r],a=e[r];return qC(s)&&qC(a)?Object.assign(Object.assign({},t),{[r]:vu(s,a)}):Object.assign(Object.assign({},t),{[r]:r in e?a:s})},{})}function hpe(i){return ET(i)?"target"in i:!1}const upe={alreadydisposed:()=>"View has been already disposed",invalidparams:i=>`Invalid parameters for '${i.name}'`,nomatchingcontroller:i=>`No matching controller for '${i.key}'`,nomatchingview:i=>`No matching view for '${JSON.stringify(i.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:i=>`Not compatible with  plugin '${i.id}'`,propertynotfound:i=>`Property '${i.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Zs{static alreadyDisposed(){return new Zs({type:"alreadydisposed"})}static notBindable(){return new Zs({type:"notbindable"})}static notCompatible(e,n){return new Zs({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Zs({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Zs({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=upe[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class wb{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const t=this.read();if(!wb.isBindable(t))throw Zs.notBindable();if(!(e in t))throw Zs.propertyNotFound(e);t[e]=n}}class ro{constructor(){this.observers_={}}on(e,n,t){var r;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:n,key:(r=t==null?void 0:t.key)!==null&&r!==void 0?r:n}),this}off(e,n){const t=this.observers_[e];return t&&(this.observers_[e]=t.filter(r=>r.key!==n)),this}emit(e,n){const t=this.observers_[e];t&&t.forEach(r=>{r.handler(n)})}}class dpe{constructor(e,n){var t;this.constraint_=n==null?void 0:n.constraint,this.equals_=(t=n==null?void 0:n.equals)!==null&&t!==void 0?t:(r,s)=>r===s,this.emitter=new ro,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const t=n??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,r)&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:t,previousRawValue:s,rawValue:r,sender:this}))}}class fpe{constructor(e){this.emitter=new ro,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const t=n??{forceEmit:!1,last:!0},r=this.value_;r===e&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:t,previousRawValue:r,rawValue:this.value_,sender:this}))}}class ppe{constructor(e){this.emitter=new ro,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function fr(i,e){const n=e==null?void 0:e.constraint,t=e==null?void 0:e.equals;return!n&&!t?new fpe(i):new dpe(i,e)}function mpe(i){return[new ppe(i),(e,n)=>{i.setRawValue(e,n)}]}class Xn{constructor(e){this.emitter=new ro,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((t,r)=>Object.assign(t,{[r]:fr(e[r])}),{})}static fromObject(e){const n=this.createCore(e);return new Xn(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class qO{constructor(e){this.values=Xn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),t=this.values.get("min");return Math.min(Math.max(e,t),n)}}class gpe{constructor(e){this.values=Xn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),t=this.values.get("min");let r=e;return Mi(t)||(r=Math.max(r,t)),Mi(n)||(r=Math.min(r,n)),r}}class vpe{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,t=Math.round((e-n)/this.step);return n+t*this.step}}class ype{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const bpe={"**":(i,e)=>Math.pow(i,e),"*":(i,e)=>i*e,"/":(i,e)=>i/e,"%":(i,e)=>i%e,"+":(i,e)=>i+e,"-":(i,e)=>i-e,"<<":(i,e)=>i<<e,">>":(i,e)=>i>>e,">>>":(i,e)=>i>>>e,"&":(i,e)=>i&e,"^":(i,e)=>i^e,"|":(i,e)=>i|e};class Ope{constructor(e,n,t){this.left=n,this.operator=e,this.right=t}evaluate(){const e=bpe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const xpe={"+":i=>i,"-":i=>-i,"~":i=>~i};class wpe{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=xpe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function PT(i){return(e,n)=>{for(let t=0;t<i.length;t++){const r=i[t](e,n);if(r!=="")return r}return""}}function Yg(i,e){var n;const t=i.substr(e).match(/^\s+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function _pe(i,e){const n=i.substr(e,1);return n.match(/^[1-9]$/)?n:""}function jg(i,e){var n;const t=i.substr(e).match(/^[0-9]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function Spe(i,e){const n=jg(i,e);if(n!=="")return n;const t=i.substr(e,1);if(e+=1,t!=="-"&&t!=="+")return"";const r=jg(i,e);return r===""?"":t+r}function AT(i,e){const n=i.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const t=Spe(i,e);return t===""?"":n+t}function m8(i,e){const n=i.substr(e,1);if(n==="0")return n;const t=_pe(i,e);return e+=t.length,t===""?"":t+jg(i,e)}function Cpe(i,e){const n=m8(i,e);if(e+=n.length,n==="")return"";const t=i.substr(e,1);if(e+=t.length,t!==".")return"";const r=jg(i,e);return e+=r.length,n+t+r+AT(i,e)}function kpe(i,e){const n=i.substr(e,1);if(e+=n.length,n!==".")return"";const t=jg(i,e);return e+=t.length,t===""?"":n+t+AT(i,e)}function Tpe(i,e){const n=m8(i,e);return e+=n.length,n===""?"":n+AT(i,e)}const Mpe=PT([Cpe,kpe,Tpe]);function Epe(i,e){var n;const t=i.substr(e).match(/^[01]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function Ppe(i,e){const n=i.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const t=Epe(i,e);return t===""?"":n+t}function Ape(i,e){var n;const t=i.substr(e).match(/^[0-7]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function Rpe(i,e){const n=i.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const t=Ape(i,e);return t===""?"":n+t}function Ipe(i,e){var n;const t=i.substr(e).match(/^[0-9a-f]+/i);return(n=t&&t[0])!==null&&n!==void 0?n:""}function Dpe(i,e){const n=i.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const t=Ipe(i,e);return t===""?"":n+t}const Npe=PT([Ppe,Rpe,Dpe]),$pe=PT([Npe,Mpe]);function Vpe(i,e){const n=$pe(i,e);return e+=n.length,n===""?null:{evaluable:new ype(n),cursor:e}}function Lpe(i,e){const n=i.substr(e,1);if(e+=n.length,n!=="(")return null;const t=v8(i,e);if(!t)return null;e=t.cursor,e+=Yg(i,e).length;const r=i.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:t.evaluable,cursor:e}}function Bpe(i,e){var n;return(n=Vpe(i,e))!==null&&n!==void 0?n:Lpe(i,e)}function g8(i,e){const n=Bpe(i,e);if(n)return n;const t=i.substr(e,1);if(e+=t.length,t!=="+"&&t!=="-"&&t!=="~")return null;const r=g8(i,e);return r?(e=r.cursor,{cursor:e,evaluable:new wpe(t,r.evaluable)}):null}function Upe(i,e,n){n+=Yg(e,n).length;const t=i.filter(r=>e.startsWith(r,n))[0];return t?(n+=t.length,n+=Yg(e,n).length,{cursor:n,operator:t}):null}function zpe(i,e){return(n,t)=>{const r=i(n,t);if(!r)return null;t=r.cursor;let s=r.evaluable;for(;;){const a=Upe(e,n,t);if(!a)break;t=a.cursor;const l=i(n,t);if(!l)return null;t=l.cursor,s=new Ope(a.operator,s,l.evaluable)}return s?{cursor:t,evaluable:s}:null}}const Fpe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((i,e)=>zpe(i,e),g8);function v8(i,e){return e+=Yg(i,e).length,Fpe(i,e)}function Xpe(i){const e=v8(i,0);return!e||e.cursor+Yg(i,e.cursor).length!==i.length?null:e.evaluable}function Bc(i){var e;const n=Xpe(i);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function y8(i){if(typeof i=="number")return i;if(typeof i=="string"){const e=Bc(i);if(!Mi(e))return e}return 0}function As(i){return e=>e.toFixed(Math.max(Math.min(i,20),0))}function Gn(i,e,n,t,r){const s=(i-e)/(n-e);return t+s*(r-t)}function aR(i){return String(i.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function nr(i,e,n){return Math.min(Math.max(i,e),n)}function b8(i,e){return(i%e+e)%e}function Wpe(i,e){return Mi(i.step)?Math.max(aR(e),2):aR(i.step)}function O8(i){var e;return(e=i.step)!==null&&e!==void 0?e:1}function Qpe(i,e){var n;const t=Math.abs((n=i.step)!==null&&n!==void 0?n:e);return t===0?.1:Math.pow(10,Math.floor(Math.log10(t))-1)}function x8(i,e){return Mi(i.step)?null:new vpe(i.step,e)}function w8(i){return!Mi(i.max)&&!Mi(i.min)?new qO({max:i.max,min:i.min}):!Mi(i.max)||!Mi(i.min)?new gpe({max:i.max,min:i.min}):null}function _8(i,e){var n,t,r;return{formatter:(n=i.format)!==null&&n!==void 0?n:As(Wpe(i,e)),keyScale:(t=i.keyScale)!==null&&t!==void 0?t:O8(i),pointerScale:(r=i.pointerScale)!==null&&r!==void 0?r:Qpe(i,e)}}function S8(i){return{format:i.optional.function,keyScale:i.optional.number,max:i.optional.number,min:i.optional.number,pointerScale:i.optional.number,step:i.optional.number}}function RT(i){return{constraint:i.constraint,textProps:Xn.fromObject(_8(i.params,i.initialValue))}}class IT{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class ZO{constructor(e){this.target=e}}class C8 extends ZO{constructor(e,n,t){super(e),this.value=n,this.last=t??!0}}class Hpe extends ZO{constructor(e,n){super(e),this.expanded=n}}class Gpe extends ZO{constructor(e,n){super(e),this.index=n}}class Ype extends ZO{constructor(e,n){super(e),this.native=n}}class DT extends IT{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ro,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const t=n.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new C8(this,n.binding.target.read(),e.options.last))}}function jpe(i,e){const t=Object.keys(e).reduce((r,s)=>{if(r===void 0)return;const a=e[s],l=a(i[s]);return l.succeeded?Object.assign(Object.assign({},r),{[s]:l.value}):void 0},{});return t}function qpe(i,e){return i.reduce((n,t)=>{if(n===void 0)return;const r=e(t);if(!(!r.succeeded||r.value===void 0))return[...n,r.value]},[])}function Zpe(i){return i===null?!1:typeof i=="object"}function Ka(i){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const t=i(n);return t!==void 0?{succeeded:!0,value:t}:{succeeded:!1,value:void 0}}}function lR(i){return{custom:e=>Ka(e)(i),boolean:Ka(e=>typeof e=="boolean"?e:void 0)(i),number:Ka(e=>typeof e=="number"?e:void 0)(i),string:Ka(e=>typeof e=="string"?e:void 0)(i),function:Ka(e=>typeof e=="function"?e:void 0)(i),constant:e=>Ka(n=>n===e?e:void 0)(i),raw:Ka(e=>e)(i),object:e=>Ka(n=>{if(Zpe(n))return jpe(n,e)})(i),array:e=>Ka(n=>{if(Array.isArray(n))return qpe(n,e)})(i)}}const ZC={optional:lR(!0),required:lR(!1)};function zr(i,e){const n=e(ZC),t=ZC.required.object(n)(i);return t.succeeded?t.value:void 0}function Ia(i,e,n,t){if(e&&!e(i))return!1;const r=zr(i,n);return r?t(r):!1}function Da(i,e){var n;return vu((n=i==null?void 0:i())!==null&&n!==void 0?n:{},e)}function z1(i){return"value"in i}function Kpe(i){if(!ET(i)||!("binding"in i))return!1;const e=i.binding;return hpe(e)}const Oa="http://www.w3.org/2000/svg";function _b(i){i.offsetHeight}function Jpe(i,e){const n=i.style.transition;i.style.transition="none",e(),i.style.transition=n}function NT(i){return i.ontouchstart!==void 0}function eme(i){const e=i.ownerDocument.defaultView;return e&&"document"in e?i.getContext("2d",{willReadFrequently:!0}):null}const tme={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function KO(i,e){const n=i.createElementNS(Oa,"svg");return n.innerHTML=tme[e],n}function k8(i,e,n){i.insertBefore(e,i.children[n])}function $T(i){i.parentElement&&i.parentElement.removeChild(i)}function T8(i){for(;i.children.length>0;)i.removeChild(i.children[0])}function nme(i){for(;i.childNodes.length>0;)i.removeChild(i.childNodes[0])}function M8(i){return i.relatedTarget?i.relatedTarget:"explicitOriginalTarget"in i?i.explicitOriginalTarget:null}function ml(i,e){i.emitter.on("change",n=>{e(n.rawValue)}),e(i.rawValue)}function Ta(i,e,n){ml(i.value(e),n)}const ime="tp";function Wn(i){return(n,t)=>[ime,"-",i,"v",n?`_${n}`:"",t?`-${t}`:""].join("")}const qp=Wn("lbl");function rme(i,e){const n=i.createDocumentFragment();return e.split(`
`).map(r=>i.createTextNode(r)).forEach((r,s)=>{s>0&&n.appendChild(i.createElement("br")),n.appendChild(r)}),n}class sme{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(qp()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(qp("l")),Ta(n.props,"label",s=>{Mi(s)?this.element.classList.add(qp(void 0,"nol")):(this.element.classList.remove(qp(void 0,"nol")),nme(t),t.appendChild(rme(e,s)))}),this.element.appendChild(t),this.labelElement=t;const r=e.createElement("div");r.classList.add(qp("v")),this.element.appendChild(r),this.valueElement=r}}class ome{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new sme(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Ia(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Da(null,{label:this.props.get("label")})}}function ame(){return["veryfirst","first","last","verylast"]}const cR=Wn(""),hR={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class E8{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ame().forEach(t=>{n.classList.remove(cR(void 0,hR[t]))}),this.blade.get("positions").forEach(t=>{n.classList.add(cR(void 0,hR[t]))})}),this.viewProps.handleDispose(()=>{$T(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Ia(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Da(null,Object.assign({},this.viewProps.exportState()))}}class lme extends IT{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const t=n.bind(this);return this.controller.buttonController.emitter.on(e,s=>{t(new Ype(this,s.nativeEvent))}),this}off(e,n){return this.controller.buttonController.emitter.off(e,n),this}}function cme(i,e,n){n?i.classList.add(e):i.classList.remove(e)}function Qf(i,e){return n=>{cme(i,e,n)}}function VT(i,e){ml(i,n=>{e.textContent=n??""})}const N_=Wn("btn");class hme{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(N_()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("button");t.classList.add(N_("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const r=e.createElement("div");r.classList.add(N_("t")),VT(n.props.value("title"),r),this.buttonElement.appendChild(r)}}class ume{constructor(e,n){this.emitter=new ro,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new hme(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Ia(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Da(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class uR extends E8{constructor(e,n){const t=new ume(e,{props:n.buttonProps,viewProps:n.viewProps}),r=new ome(e,{blade:n.blade,props:n.labelProps,valueController:t});super({blade:n.blade,view:r.view,viewProps:n.viewProps}),this.buttonController=t,this.labelController=r}importState(e){return Ia(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Da(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class P8{constructor(e){const[n,t]=e.split("-"),r=n.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=t??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const dme=new P8("2.0.3");function ls(i){return Object.assign({core:dme},i)}ls({id:"button",type:"blade",accept(i){const e=zr(i,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(i){return new uR(i.document,{blade:i.blade,buttonProps:Xn.fromObject({title:i.params.title}),labelProps:Xn.fromObject({label:i.params.label}),viewProps:i.viewProps})},api(i){return i.controller instanceof uR?new lme(i.controller):null}});function fme(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function pme(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function mme(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function gme(i){return ET(i)?"refresh"in i&&typeof i.refresh=="function":!1}function vme(i,e){if(!wb.isBindable(i))throw Zs.notBindable();return new wb(i,e)}class yme{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new ro,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,t){const r=t??{},s=this.controller_.element.ownerDocument,a=this.pool_.createBinding(s,vme(e,n),r),l=this.pool_.createBindingApi(a);return this.add(l,r.index)}addFolder(e){return pme(this,e)}addButton(e){return fme(this,e)}addTab(e){return mme(this,e)}add(e,n){const t=e.controller;return this.controller_.rack.add(t,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,t=this.pool_.createBlade(n,e),r=this.pool_.createApi(t);return this.add(r,e.index)}on(e,n){const t=n.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.children.forEach(e=>{gme(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,t=this.pool_.createApi(n),r=Kpe(n.value)?n.value.binding:null;this.emitter_.emit("change",new C8(t,r?r.target.read():n.value.rawValue,e.options.last))}}class LT extends IT{constructor(e,n){super(e),this.rackApi_=new yme(e.rackController,n)}refresh(){this.rackApi_.refresh()}}class BT extends E8{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Ia(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((t,r)=>t.importState(n.children[r])))}exportState(){return Da(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function KC(i){return"rackController"in i}class bme{constructor(e){this.emitter=new ro,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Zs.shouldNeverHappen();const t=n!==void 0?n:this.items_.length;this.items_.splice(t,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:t,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const t=this.extract_(e);t&&(t.allItems().forEach(r=>{this.cache_.delete(r)}),t.emitter.off("add",this.onSubListAdd_),t.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function Ome(i,e){for(let n=0;n<i.length;n++){const t=i[n];if(z1(t)&&t.value===e)return t}return null}function xme(i){return KC(i)?i.rackController.rack.bcSet_:null}class wme{constructor(e){var n,t;this.emitter=new ro,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(t=this.blade_)===null||t===void 0||t.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new bme(xme),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var t;(t=e.parent)===null||t===void 0||t.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const t=e.item;if(t.viewProps.emitter.on("change",this.onChildViewPropsChange_),t.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),t.viewProps.handleDispose(this.onChildDispose_),z1(t))t.value.emitter.on("change",this.onChildValueChange_);else if(KC(t)){const r=t.rackController.rack;if(r){const s=r.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const t=e.item;if(z1(t))t.value.emitter.off("change",this.onChildValueChange_);else if(KC(t)){const r=t.rackController.rack;if(r){const s=r.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),n=e[0],t=e[e.length-1];this.bcSet_.items.forEach(r=>{const s=[];r===n&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),r===t&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),r.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=Ome(this.find(z1),e.sender);if(!n)throw Zs.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class UT{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new wme({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&k8(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&$T(e.bladeController.view.element)}}function A8(){return new Xn({positions:fr([],{equals:cpe})})}class I0 extends Xn{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},t=Xn.createCore(n);return new I0(t)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Mi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const t=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Ta(this,"expanded",t),Ta(this,"temporaryExpanded",t)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function _me(i,e){let n=0;return Jpe(e,()=>{i.set("expandedHeight",null),i.set("temporaryExpanded",!0),_b(e),n=e.clientHeight,i.set("temporaryExpanded",null),_b(e)}),n}function dR(i,e){e.style.height=i.styleHeight}function zT(i,e){i.value("expanded").emitter.on("beforechange",()=>{if(i.set("completed",!1),Mi(i.get("expandedHeight"))){const n=_me(i,e);n>0&&i.set("expandedHeight",n)}i.set("shouldFixHeight",!0),_b(e)}),i.emitter.on("change",()=>{dR(i,e)}),dR(i,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&i.cleanUpTransition()})}class Sme extends LT{constructor(e,n){super(e,n),this.emitter_=new ro,this.controller.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",new Hpe(this,t.sender.rawValue))}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,t){return this.rackApi_.addBinding(e,n,t)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const t=n.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}const R8=Wn("cnt");class Cme{constructor(e,n){var t;this.className_=Wn((t=n.viewName)!==null&&t!==void 0?t:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),R8()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ta(this.foldable_,"completed",Qf(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),Ta(n.props,"title",u=>{Mi(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const a=e.createElement("div");a.classList.add(this.className_("t")),VT(n.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const h=e.createElement("div");h.classList.add(this.className_("c")),this.element.appendChild(h),this.containerElement=h}}class fR extends BT{constructor(e,n){var t;const r=I0.create((t=n.expanded)!==null&&t!==void 0?t:!0),s=new Cme(e,{foldable:r,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new UT({blade:n.blade,element:s.containerElement,root:n.root,viewProps:n.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=r,zT(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Ia(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Da(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}ls({id:"folder",type:"blade",accept(i){const e=zr(i,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(i){return new fR(i.document,{blade:i.blade,expanded:i.params.expanded,props:Xn.fromObject({title:i.params.title}),viewProps:i.viewProps})},api(i){return i.controller instanceof fR?new Sme(i.controller,i.pool):null}});const kme=Wn("");function pR(i,e){return Qf(i,kme(void 0,e))}class D0 extends Xn{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=mpe(fr(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,t,r;const s=e??{};return new D0(Xn.createCore({disabled:(n=s.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(t=s.hidden)!==null&&t!==void 0?t:!1,parent:(r=s.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){ml(this.globalDisabled_,pR(e,"disabled")),Ta(this,"hidden",pR(e,"hidden"))}bindDisabled(e){ml(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){ml(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const t=e.previousRawValue;t==null||t.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const mR=Wn("tbp");class Tme{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(mR()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(mR("c")),this.element.appendChild(t),this.containerElement=t}}const Zp=Wn("tbi");class Mme{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Zp()),n.viewProps.bindClassModifiers(this.element),Ta(n.props,"selected",s=>{s?this.element.classList.add(Zp(void 0,"sel")):this.element.classList.remove(Zp(void 0,"sel"))});const t=e.createElement("button");t.classList.add(Zp("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const r=e.createElement("div");r.classList.add(Zp("t")),VT(n.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class Eme{constructor(e,n){this.emitter=new ro,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Mme(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class JC extends BT{constructor(e,n){const t=new Tme(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new UT({blade:n.blade,element:t.containerElement,viewProps:n.viewProps}),view:t})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Eme(e,{props:n.itemProps,viewProps:D0.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Ta(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(e){return Ia(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Da(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Pme extends LT{constructor(e,n){super(e,n),this.emitter_=new ro,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,t=new JC(n,{blade:A8(),itemProps:Xn.fromObject({selected:!1,title:e.title}),props:Xn.fromObject({selected:!1}),viewProps:D0.create()}),r=this.pool_.createApi(t);return this.rackApi_.add(r,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const t=n.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}onSelect_(e){this.emitter_.emit("select",new Gpe(this,e.rawValue))}}class Ame extends LT{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,t){return this.rackApi_.addBinding(e,n,t)}addBlade(e){return this.rackApi_.addBlade(e)}}const gR=-1;class Rme{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=fr(!0),this.selectedIndex=fr(gR),this.items_=[]}add(e,n){const t=n??this.items_.length;this.items_.splice(t,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=gR,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,t)=>{n.rawValue=t===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,t)=>{n.rawValue=t===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(t=>t===e.sender);this.items_.forEach((t,r)=>{t.rawValue=r===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const Kp=Wn("tab");class Ime{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Kp(),R8()),n.viewProps.bindClassModifiers(this.element),ml(n.empty,Qf(this.element,Kp(void 0,"nop")));const t=e.createElement("div");t.classList.add(Kp("t")),this.element.appendChild(t),this.itemsElement=t;const r=e.createElement("div");r.classList.add(Kp("i")),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(Kp("c")),this.element.appendChild(s),this.contentsElement=s}}class vR extends BT{constructor(e,n){const t=new Rme,r=new Ime(e,{empty:t.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new UT({blade:n.blade,element:r.contentsElement,viewProps:n.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=t}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;k8(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;$T(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}ls({id:"tab",type:"blade",accept(i){const e=zr(i,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(i){const e=new vR(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(n=>{const t=new JC(i.document,{blade:A8(),itemProps:Xn.fromObject({selected:!1,title:n.title}),props:Xn.fromObject({selected:!1}),viewProps:D0.create()});e.add(t)}),e},api(i){return i.controller instanceof vR?new Pme(i.controller,i.pool):i.controller instanceof JC?new Ame(i.controller,i.pool):null}});class FT extends DT{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class N0{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,t)=>t.constrain(n),e)}}function Sb(i,e){if(i instanceof e)return i;if(i instanceof N0){const n=i.constraints.reduce((t,r)=>t||(r instanceof e?r:null),null);if(n)return n}return null}class JO{constructor(e){this.values=Xn.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(r=>r.value===e).length>0?e:n[0].value}}function ex(i){var e;const n=ZC;if(Array.isArray(i))return(e=zr({items:i},t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof i=="object")return n.required.raw(i).value}function I8(i){if(Array.isArray(i))return i;const e=[];return Object.keys(i).forEach(n=>{e.push({text:n,value:i[n]})}),e}function XT(i){return Mi(i)?null:new JO(I8(i))}const $_=Wn("lst");class Dme{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add($_()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("select");t.classList.add($_("s")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.selectElement=t;const r=e.createElement("div");r.classList.add($_("m")),r.appendChild(KO(e,"dropdown")),this.element.appendChild(r),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Ta(this.props_,"options",s=>{T8(this.selectElement),s.forEach(a=>{const l=e.createElement("option");l.textContent=a.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class kf{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Dme(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Ia(e,null,n=>({options:n.required.custom(ex)}),n=>(this.props.set("options",I8(n.options)),!0))}exportProps(){return Da(null,{options:this.props.get("options")})}}const yR=Wn("pop");class Nme{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(yR()),n.viewProps.bindClassModifiers(this.element),ml(n.shows,Qf(this.element,yR(void 0,"v")))}}class D8{constructor(e,n){this.shows=fr(!1),this.viewProps=n.viewProps,this.view=new Nme(e,{shows:this.shows,viewProps:this.viewProps})}}const bR=Wn("txt");let $me=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(bR()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const t=e.createElement("input");t.classList.add(bR("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}};class WT{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new $me(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget.value,r=this.parser_(t);Mi(r)||(this.value.rawValue=r),this.view.refresh()}}function Vme(i){return String(i)}function N8(i){return i==="false"?!1:!!i}function OR(i){return Vme(i)}function Lme(i){return e=>i.reduce((n,t)=>n!==null?n:t(e),null)}const Bme=As(0);function Cb(i){return Bme(i)+"%"}function $8(i){return String(i)}function e2(i){return i}function Hf({primary:i,secondary:e,forward:n,backward:t}){let r=!1;function s(a){r||(r=!0,a(),r=!1)}i.emitter.on("change",a=>{s(()=>{e.setRawValue(n(i.rawValue,e.rawValue),a.options)})}),e.emitter.on("change",a=>{s(()=>{i.setRawValue(t(i.rawValue,e.rawValue),a.options)}),s(()=>{e.setRawValue(n(i.rawValue,e.rawValue),a.options)})}),s(()=>{e.setRawValue(n(i.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ts(i,e){const n=i*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function qg(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}function Sl(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}function Ume(i){return i==="ArrowUp"||i==="ArrowDown"}function V8(i){return Ume(i)||i==="ArrowLeft"||i==="ArrowRight"}function V_(i,e){var n,t;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:i.pageX-(((n=r&&r.scrollX)!==null&&n!==void 0?n:0)+s.left),y:i.pageY-(((t=r&&r.scrollY)!==null&&t!==void 0?t:0)+s.top)}}class Au{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new ro,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const t=this.elem_.ownerDocument;t.addEventListener("mousemove",this.onDocumentMouseMove_),t.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(V_(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(V_(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(V_(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const t=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const fo=Wn("txt");class zme{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(fo(),fo(void 0,"num")),n.arrayPosition&&this.element.classList.add(fo(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("input");t.classList.add(fo("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(fo()),this.inputElement.classList.add(fo("i"));const r=e.createElement("div");r.classList.add(fo("k")),this.element.appendChild(r),this.knobElement=r;const s=e.createElementNS(Oa,"svg");s.classList.add(fo("g")),this.knobElement.appendChild(s);const a=e.createElementNS(Oa,"path");a.classList.add(fo("gb")),s.appendChild(a),this.guideBodyElem_=a;const l=e.createElementNS(Oa,"path");l.classList.add(fo("gh")),s.appendChild(l),this.guideHeadElem_=l;const h=e.createElement("div");h.classList.add(Wn("tt")()),this.knobElement.appendChild(h),this.tooltipElem_=h,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(fo(void 0,"drg"));return}this.element.classList.add(fo(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),t=n+(n>0?-1:n<0?1:0),r=nr(-t,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${t+r},0 L${t},4 L${t+r},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class $0{constructor(e,n){var t;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(t=n.sliderProps)!==null&&t!==void 0?t:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=fr(null),this.view=new zme(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new Au(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,t;const r=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),s=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("max");let a=e;return r!==void 0&&(a=Math.max(a,r)),s!==void 0&&(a=Math.min(a,s)),a}onInputChange_(e){const t=e.currentTarget.value,r=this.parser_(t);Mi(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(e){const n=Ts(this.props.get("keyScale"),qg(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ts(this.props.get("keyScale"),qg(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const L_=Wn("sld");class Fme{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(L_()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(L_("t")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.trackElement=t;const r=e.createElement("div");r.classList.add(L_("k")),this.trackElement.appendChild(r),this.knobElement=r,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=nr(Gn(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class Xme{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Fme(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Au(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Gn(nr(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ts(this.props.get("keyScale"),Sl(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Ts(this.props.get("keyScale"),Sl(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const B_=Wn("sldtxt");class Wme{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(B_());const t=e.createElement("div");t.classList.add(B_("s")),this.sliderView_=n.sliderView,t.appendChild(this.sliderView_.element),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(B_("t")),this.textView_=n.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class xR{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new Xme(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new $0(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new Wme(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Ia(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const t=this.sliderC_.props;return t.set("max",n.max),t.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Da(null,{max:e.get("max"),min:e.get("min")})}}function Qme(i){return{sliderProps:new Xn({keyScale:i.keyScale,max:i.max,min:i.min}),textProps:new Xn({formatter:fr(i.formatter),keyScale:i.keyScale,pointerScale:fr(i.pointerScale)})}}const Hme={containerUnitSize:"cnt-usz"};function L8(i){return`--${Hme[i]}`}function Zg(i){return S8(i)}function Sc(i){if(qC(i))return zr(i,Zg)}function cl(i,e){if(!i)return;const n=[],t=x8(i,e);t&&n.push(t);const r=w8(i);return r&&n.push(r),new N0(n)}function B8(i){if(i==="inline"||i==="popup")return i}function V0(i,e){i.write(e)}const qy=Wn("ckb");class Gme{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(qy()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("label");t.classList.add(qy("l")),this.element.appendChild(t),this.labelElement=t;const r=e.createElement("input");r.classList.add(qy("i")),r.type="checkbox",this.labelElement.appendChild(r),this.inputElement=r,n.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(qy("w")),this.labelElement.appendChild(s);const a=KO(e,"check");s.appendChild(a),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Yme{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Gme(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function jme(i){const e=[],n=XT(i.options);return n&&e.push(n),new N0(e)}ls({id:"input-bool",type:"input",accept:(i,e)=>{if(typeof i!="boolean")return null;const n=zr(e,t=>({options:t.optional.custom(ex),readonly:t.optional.constant(!1)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>N8,constraint:i=>jme(i.params),writer:i=>V0},controller:i=>{const e=i.document,n=i.value,t=i.constraint,r=t&&Sb(t,JO);return r?new kf(e,{props:new Xn({options:r.values.value("options")}),value:n,viewProps:i.viewProps}):new Yme(e,{value:n,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="boolean"?null:i.controller.valueController instanceof kf?new FT(i.controller):null}});const Rh=Wn("col");class qme{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Rh()),n.foldable.bindExpandedClass(this.element,Rh(void 0,"expanded")),Ta(n.foldable,"completed",Qf(this.element,Rh(void 0,"cpl")));const t=e.createElement("div");t.classList.add(Rh("h")),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(Rh("s")),t.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(Rh("t")),t.appendChild(s),this.textElement=s,n.pickerLayout==="inline"){const a=e.createElement("div");a.classList.add(Rh("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}function Zme(i,e,n){const t=nr(i/255,0,1),r=nr(e/255,0,1),s=nr(n/255,0,1),a=Math.max(t,r,s),l=Math.min(t,r,s),h=a-l;let u=0,f=0;const p=(l+a)/2;return h!==0&&(f=h/(1-Math.abs(a+l-1)),t===a?u=(r-s)/h:r===a?u=2+(s-t)/h:u=4+(t-r)/h,u=u/6+(u<0?1:0)),[u*360,f*100,p*100]}function Kme(i,e,n){const t=(i%360+360)%360,r=nr(e/100,0,1),s=nr(n/100,0,1),a=(1-Math.abs(2*s-1))*r,l=a*(1-Math.abs(t/60%2-1)),h=s-a/2;let u,f,p;return t>=0&&t<60?[u,f,p]=[a,l,0]:t>=60&&t<120?[u,f,p]=[l,a,0]:t>=120&&t<180?[u,f,p]=[0,a,l]:t>=180&&t<240?[u,f,p]=[0,l,a]:t>=240&&t<300?[u,f,p]=[l,0,a]:[u,f,p]=[a,0,l],[(u+h)*255,(f+h)*255,(p+h)*255]}function Jme(i,e,n){const t=nr(i/255,0,1),r=nr(e/255,0,1),s=nr(n/255,0,1),a=Math.max(t,r,s),l=Math.min(t,r,s),h=a-l;let u;h===0?u=0:a===t?u=60*(((r-s)/h%6+6)%6):a===r?u=60*((s-t)/h+2):u=60*((t-r)/h+4);const f=a===0?0:h/a,p=a;return[u,f*100,p*100]}function U8(i,e,n){const t=b8(i,360),r=nr(e/100,0,1),s=nr(n/100,0,1),a=s*r,l=a*(1-Math.abs(t/60%2-1)),h=s-a;let u,f,p;return t>=0&&t<60?[u,f,p]=[a,l,0]:t>=60&&t<120?[u,f,p]=[l,a,0]:t>=120&&t<180?[u,f,p]=[0,a,l]:t>=180&&t<240?[u,f,p]=[0,l,a]:t>=240&&t<300?[u,f,p]=[l,0,a]:[u,f,p]=[a,0,l],[(u+h)*255,(f+h)*255,(p+h)*255]}function ege(i,e,n){const t=n+e*(100-Math.abs(2*n-100))/200;return[i,t!==0?e*(100-Math.abs(2*n-100))/t:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function tge(i,e,n){const t=100-Math.abs(n*(200-e)/100-100);return[i,t!==0?e*n/t:0,n*(200-e)/(2*100)]}function Ma(i){return[i[0],i[1],i[2]]}function tx(i,e){return[i[0],i[1],i[2],e]}const nge={hsl:{hsl:(i,e,n)=>[i,e,n],hsv:ege,rgb:Kme},hsv:{hsl:tge,hsv:(i,e,n)=>[i,e,n],rgb:U8},rgb:{hsl:Zme,hsv:Jme,rgb:(i,e,n)=>[i,e,n]}};function Tf(i,e){return[e==="float"?1:i==="rgb"?255:360,e==="float"?1:i==="rgb"?255:100,e==="float"?1:i==="rgb"?255:100]}function ige(i,e){return i===e?e:b8(i,e)}function z8(i,e,n){var t;const r=Tf(e,n);return[e==="rgb"?nr(i[0],0,r[0]):ige(i[0],r[0]),nr(i[1],0,r[1]),nr(i[2],0,r[2]),nr((t=i[3])!==null&&t!==void 0?t:1,0,1)]}function wR(i,e,n,t){const r=Tf(e,n),s=Tf(e,t);return i.map((a,l)=>a/r[l]*s[l])}function F8(i,e,n){const t=wR(i,e.mode,e.type,"int"),r=nge[e.mode][n.mode](...t);return wR(r,n.mode,"int",n.type)}class Un{static black(){return new Un([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=z8(e,n,this.type)}getComponents(e){return tx(F8(Ma(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const lc=Wn("colp");class rge{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(lc()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(lc("hsv"));const r=e.createElement("div");r.classList.add(lc("sv")),this.svPaletteView_=n.svPaletteView,r.appendChild(this.svPaletteView_.element),t.appendChild(r);const s=e.createElement("div");s.classList.add(lc("h")),this.hPaletteView_=n.hPaletteView,s.appendChild(this.hPaletteView_.element),t.appendChild(s),this.element.appendChild(t);const a=e.createElement("div");if(a.classList.add(lc("rgb")),this.textsView_=n.textsView,a.appendChild(this.textsView_.element),this.element.appendChild(a),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const l=e.createElement("div");l.classList.add(lc("a"));const h=e.createElement("div");h.classList.add(lc("ap")),h.appendChild(this.alphaViews_.palette.element),l.appendChild(h);const u=e.createElement("div");u.classList.add(lc("at")),u.appendChild(this.alphaViews_.text.element),l.appendChild(u),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function sge(i){return i==="int"?"int":i==="float"?"float":void 0}function QT(i){return zr(i,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(sge)}),expanded:e.optional.boolean,picker:e.optional.custom(B8),readonly:e.optional.constant(!1)}))}function yu(i){return i?.1:1}function X8(i){var e;return(e=i.color)===null||e===void 0?void 0:e.type}class HT{constructor(e,n){this.type="float",this.mode=n,this.comps_=z8(e,n,this.type)}getComponents(e){return tx(F8(Ma(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const oge={int:(i,e)=>new Un(i,e),float:(i,e)=>new HT(i,e)};function GT(i,e,n){return oge[n](i,e)}function age(i){return i.type==="float"}function lge(i){return i.type==="int"}function cge(i){const e=i.getComponents(),n=Tf(i.mode,"int");return new Un([Math.round(Gn(e[0],0,1,0,n[0])),Math.round(Gn(e[1],0,1,0,n[1])),Math.round(Gn(e[2],0,1,0,n[2])),e[3]],i.mode)}function hge(i){const e=i.getComponents(),n=Tf(i.mode,"int");return new HT([Gn(e[0],0,n[0],0,1),Gn(e[1],0,n[1],0,1),Gn(e[2],0,n[2],0,1),e[3]],i.mode)}function is(i,e){if(i.type===e)return i;if(lge(i)&&e==="float")return hge(i);if(age(i)&&e==="int")return cge(i);throw Zs.shouldNeverHappen()}function uge(i,e){return i.alpha===e.alpha&&i.mode===e.mode&&i.notation===e.notation&&i.type===e.type}function Oo(i,e){const n=i.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(i),e)}const dge={deg:i=>i,grad:i=>i*360/400,rad:i=>i*360/(2*Math.PI),turn:i=>i*360};function W8(i){const e=i.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(i);const n=parseFloat(e[1]),t=e[2];return dge[t](n)}function Q8(i){const e=i.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Oo(e[1],255),Oo(e[2],255),Oo(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function fge(i){const e=Q8(i);return e?new Un(e,"rgb"):null}function H8(i){const e=i.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Oo(e[1],255),Oo(e[2],255),Oo(e[3],255),Oo(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function pge(i){const e=H8(i);return e?new Un(e,"rgb"):null}function G8(i){const e=i.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[W8(e[1]),Oo(e[2],100),Oo(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function mge(i){const e=G8(i);return e?new Un(e,"hsl"):null}function Y8(i){const e=i.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[W8(e[1]),Oo(e[2],100),Oo(e[3],100),Oo(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function gge(i){const e=Y8(i);return e?new Un(e,"hsl"):null}function j8(i){const e=i.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=i.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function vge(i){const e=j8(i);return e?new Un(e,"rgb"):null}function q8(i){const e=i.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Gn(parseInt(e[4]+e[4],16),0,255,0,1)];const n=i.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Gn(parseInt(n[4],16),0,255,0,1)]:null}function yge(i){const e=q8(i);return e?new Un(e,"rgb"):null}function Z8(i){const e=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function bge(i){return e=>{const n=Z8(e);return n?GT(n,"rgb",i):null}}function K8(i){const e=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Oge(i){return e=>{const n=K8(e);return n?GT(n,"rgb",i):null}}const xge=[{parser:j8,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:q8,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Q8,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:H8,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:G8,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Y8,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Z8,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:K8,result:{alpha:!0,mode:"rgb",notation:"object"}}];function wge(i){return xge.reduce((e,{parser:n,result:t})=>e||(n(i)?t:null),null)}function _ge(i,e="int"){const n=wge(i);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function L0(i){const e=[vge,yge,fge,pge,mge,gge];e.push(bge("int"),Oge("int"));const n=Lme(e);return t=>{const r=n(t);return r?is(r,i):null}}function Sge(i){const e=L0("int");if(typeof i!="string")return Un.black();const n=e(i);return n??Un.black()}function J8(i){const e=nr(Math.floor(i),0,255).toString(16);return e.length===1?`0${e}`:e}function YT(i,e="#"){const n=Ma(i.getComponents("rgb")).map(J8).join("");return`${e}${n}`}function jT(i,e="#"){const n=i.getComponents("rgb"),t=[n[0],n[1],n[2],n[3]*255].map(J8).join("");return`${e}${t}`}function eB(i){const e=As(0),n=is(i,"int");return`rgb(${Ma(n.getComponents("rgb")).map(r=>e(r)).join(", ")})`}function F1(i){const e=As(2),n=As(0);return`rgba(${is(i,"int").getComponents("rgb").map((s,a)=>(a===3?e:n)(s)).join(", ")})`}function Cge(i){const e=[As(0),Cb,Cb],n=is(i,"int");return`hsl(${Ma(n.getComponents("hsl")).map((r,s)=>e[s](r)).join(", ")})`}function kge(i){const e=[As(0),Cb,Cb,As(2)];return`hsla(${is(i,"int").getComponents("hsl").map((r,s)=>e[s](r)).join(", ")})`}function tB(i,e){const n=As(e==="float"?2:0),t=["r","g","b"],r=is(i,e);return`{${Ma(r.getComponents("rgb")).map((a,l)=>`${t[l]}: ${n(a)}`).join(", ")}}`}function Tge(i){return e=>tB(e,i)}function nB(i,e){const n=As(2),t=As(e==="float"?2:0),r=["r","g","b","a"];return`{${is(i,e).getComponents("rgb").map((l,h)=>{const u=h===3?n:t;return`${r[h]}: ${u(l)}`}).join(", ")}}`}function Mge(i){return e=>nB(e,i)}const Ege=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:YT},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:jT},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:eB},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:F1},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Cge},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:kge},...["int","float"].reduce((i,e)=>[...i,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Tge(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Mge(e)}],[])];function iB(i){return Ege.reduce((e,n)=>e||(uge(n.format,i)?n.stringifier:null),null)}const Jp=Wn("apl");class Pge{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Jp()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=e.createElement("div");t.classList.add(Jp("b")),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(Jp("c")),t.appendChild(r),this.colorElem_=r;const s=e.createElement("div");s.classList.add(Jp("m")),this.element.appendChild(s),this.markerElem_=s;const a=e.createElement("div");a.classList.add(Jp("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),t=new Un([n[0],n[1],n[2],0],"rgb"),r=new Un([n[0],n[1],n[2],255],"rgb"),s=["to right",F1(t),F1(r)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=F1(e);const a=Gn(n[3],0,1,0,100);this.markerElem_.style.left=`${a}%`}onValueChange_(){this.update_()}}class Age{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Pge(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Au(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=e.point.x/e.bounds.width,r=this.value.rawValue,[s,a,l]=r.getComponents("hsv");this.value.setRawValue(new Un([s,a,l,t],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ts(yu(!0),Sl(e));if(n===0)return;const t=this.value.rawValue,[r,s,a,l]=t.getComponents("hsv");this.value.setRawValue(new Un([r,s,a,l+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ts(yu(!0),Sl(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const xd=Wn("coltxt");function Rge(i){const e=i.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((t,r)=>{const s=i.createElement("option");return s.textContent=r.text,s.value=r.value,t.appendChild(s),t},i.createDocumentFragment())),e}class Ige{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(xd()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(xd("m")),this.modeElem_=Rge(e),this.modeElem_.classList.add(xd("ms")),t.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(xd("mm")),r.appendChild(KO(e,"dropdown")),t.appendChild(r),this.element.appendChild(t);const s=e.createElement("div");s.classList.add(xd("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=n.inputViews,this.applyInputViews_(),ml(n.mode,a=>{this.modeElem_.value=a})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){T8(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const t=e.createElement("div");t.classList.add(xd("c")),t.appendChild(n.element),this.inputsElem_.appendChild(t)})}}function Dge(i){return As(i==="float"?2:0)}function Nge(i,e,n){const t=Tf(i,e)[n];return new qO({min:0,max:t})}function $ge(i,e,n){return new $0(i,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:Xn.fromObject({formatter:Dge(e.colorType),keyScale:yu(!1),pointerScale:e.colorType==="float"?.01:1}),value:fr(0,{constraint:Nge(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function Vge(i,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Bc,viewProps:e.viewProps};return[0,1,2].map(t=>{const r=$ge(i,n,t);return Hf({primary:e.value,secondary:r.value,forward(s){return is(s,e.colorType).getComponents(e.colorMode)[t]},backward(s,a){const l=e.colorMode,u=is(s,e.colorType).getComponents(l);u[t]=a;const f=GT(tx(Ma(u),u[3]),l,e.colorType);return is(f,"int")}}),r})}function Lge(i,e){const n=new WT(i,{parser:L0("int"),props:Xn.fromObject({formatter:YT}),value:fr(Un.black()),viewProps:e.viewProps});return Hf({primary:e.value,secondary:n.value,forward:t=>new Un(Ma(t.getComponents()),t.mode),backward:(t,r)=>new Un(tx(Ma(r.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[n]}function Bge(i){return i!=="hex"}class Uge{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=fr(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Ige(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return Bge(n)?Vge(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Lge(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(t=>t.view)}}const U_=Wn("hpl");class zge{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(U_()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=e.createElement("div");t.classList.add(U_("c")),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(U_("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=eB(new Un([n,100,100],"hsv"));const t=Gn(n,0,360,0,100);this.markerElem_.style.left=`${t}%`}onValueChange_(){this.update_()}}class Fge{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new zge(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Au(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=Gn(nr(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,s,a,l]=r.getComponents("hsv");this.value.setRawValue(new Un([t,s,a,l],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ts(yu(!1),Sl(e));if(n===0)return;const t=this.value.rawValue,[r,s,a,l]=t.getComponents("hsv");this.value.setRawValue(new Un([r+n,s,a,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ts(yu(!1),Sl(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const z_=Wn("svp"),_R=64;class Xge{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(z_()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=e.createElement("canvas");t.height=_R,t.width=_R,t.classList.add(z_("c")),this.element.appendChild(t),this.canvasElement=t;const r=e.createElement("div");r.classList.add(z_("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=eme(this.canvasElement);if(!e)return;const t=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,a=e.getImageData(0,0,r,s),l=a.data;for(let f=0;f<s;f++)for(let p=0;p<r;p++){const g=Gn(p,0,r,0,100),v=Gn(f,0,s,100,0),y=U8(t[0],g,v),w=(f*r+p)*4;l[w]=y[0],l[w+1]=y[1],l[w+2]=y[2],l[w+3]=255}e.putImageData(a,0,0);const h=Gn(t[1],0,100,0,100);this.markerElem_.style.left=`${h}%`;const u=Gn(t[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}}class Wge{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Xge(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Au(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=Gn(e.point.x,0,e.bounds.width,0,100),r=Gn(e.point.y,0,e.bounds.height,100,0),[s,,,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Un([s,t,r,a],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){V8(e.key)&&e.preventDefault();const[n,t,r,s]=this.value.rawValue.getComponents("hsv"),a=yu(!1),l=Ts(a,Sl(e)),h=Ts(a,qg(e));l===0&&h===0||this.value.setRawValue(new Un([n,t+l,r+h,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=yu(!1),t=Ts(n,Sl(e)),r=Ts(n,qg(e));t===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Qge{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new Fge(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Wge(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Age(e,{value:this.value,viewProps:this.viewProps}),text:new $0(e,{parser:Bc,props:Xn.fromObject({pointerScale:.01,keyScale:.1,formatter:As(2)}),value:fr(0,{constraint:new qO({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Hf({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,r)=>{const s=t.getComponents();return s[3]=r,new Un(s,t.mode)}}),this.textsC_=new Uge(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new rge(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const F_=Wn("colsw");class Hge{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(F_()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(F_("sw")),this.element.appendChild(t),this.swatchElem_=t;const r=e.createElement("button");r.classList.add(F_("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=jT(e)}onValueChange_(){this.update_()}}class Gge{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Hge(e,{value:this.value,viewProps:this.viewProps})}}class qT{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=I0.create(n.expanded),this.swatchC_=new Gge(e,{value:this.value,viewProps:this.viewProps});const t=this.swatchC_.view.buttonElement;t.addEventListener("blur",this.onButtonBlur_),t.addEventListener("click",this.onButtonClick_),this.textC_=new WT(e,{parser:n.parser,props:Xn.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new qme(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new D8(e,{viewProps:this.viewProps}):null;const r=new Qge(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Hf({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),zT(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,t=e.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,t=M8(e);t&&n.contains(t)||t&&t===this.swatchC_.view.buttonElement&&!NT(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Yge(i){return Ma(i.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function jge(i){return i.getComponents("rgb").reduce((e,n,t)=>{const r=Math.floor(t===3?n*255:n)&255;return e<<8|r},0)>>>0}function qge(i){return new Un([i>>16&255,i>>8&255,i&255],"rgb")}function Zge(i){return new Un([i>>24&255,i>>16&255,i>>8&255,Gn(i&255,0,255,0,1)],"rgb")}function Kge(i){return typeof i!="number"?Un.black():qge(i)}function Jge(i){return typeof i!="number"?Un.black():Zge(i)}function X1(i,e){return typeof i!="object"||Mi(i)?!1:e in i&&typeof i[e]=="number"}function rB(i){return X1(i,"r")&&X1(i,"g")&&X1(i,"b")}function sB(i){return rB(i)&&X1(i,"a")}function oB(i){return rB(i)}function ZT(i,e){if(i.mode!==e.mode||i.type!==e.type)return!1;const n=i.getComponents(),t=e.getComponents();for(let r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}function SR(i){return"a"in i?[i.r,i.g,i.b,i.a]:[i.r,i.g,i.b]}function e0e(i){const e=iB(i);return e?(n,t)=>{V0(n,e(t))}:null}function t0e(i){const e=i?jge:Yge;return(n,t)=>{V0(n,e(t))}}function n0e(i,e,n){const r=is(e,n).toRgbaObject();i.writeProperty("r",r.r),i.writeProperty("g",r.g),i.writeProperty("b",r.b),i.writeProperty("a",r.a)}function i0e(i,e,n){const r=is(e,n).toRgbaObject();i.writeProperty("r",r.r),i.writeProperty("g",r.g),i.writeProperty("b",r.b)}function r0e(i,e){return(n,t)=>{i?n0e(n,t,e):i0e(n,t,e)}}function s0e(i){var e;return!!(!((e=i==null?void 0:i.color)===null||e===void 0)&&e.alpha)}function o0e(i){return i?e=>jT(e,"0x"):e=>YT(e,"0x")}function a0e(i){return"color"in i||i.view==="color"}ls({id:"input-color-number",type:"input",accept:(i,e)=>{if(typeof i!="number"||!a0e(e))return null;const n=QT(e);return n?{initialValue:i,params:Object.assign(Object.assign({},n),{supportsAlpha:s0e(e)})}:null},binding:{reader:i=>i.params.supportsAlpha?Jge:Kge,equals:ZT,writer:i=>t0e(i.params.supportsAlpha)},controller:i=>{var e,n;return new qT(i.document,{colorType:"int",expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:o0e(i.params.supportsAlpha),parser:L0("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:i.params.supportsAlpha,value:i.value,viewProps:i.viewProps})}});function l0e(i,e){if(!oB(i))return is(Un.black(),e);if(e==="int"){const n=SR(i);return new Un(n,"rgb")}if(e==="float"){const n=SR(i);return new HT(n,"rgb")}return is(Un.black(),"int")}function c0e(i){return sB(i)}function h0e(i){return e=>{const n=l0e(e,i);return is(n,"int")}}function u0e(i,e){return n=>i?nB(n,e):tB(n,e)}ls({id:"input-color-object",type:"input",accept:(i,e)=>{var n;if(!oB(i))return null;const t=QT(e);return t?{initialValue:i,params:Object.assign(Object.assign({},t),{colorType:(n=X8(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:i=>h0e(i.params.colorType),equals:ZT,writer:i=>r0e(c0e(i.initialValue),i.params.colorType)},controller:i=>{var e,n;const t=sB(i.initialValue);return new qT(i.document,{colorType:i.params.colorType,expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:u0e(t,i.params.colorType),parser:L0("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t,value:i.value,viewProps:i.viewProps})}});ls({id:"input-color-string",type:"input",accept:(i,e)=>{if(typeof i!="string"||e.view==="text")return null;const n=_ge(i,X8(e));if(!n)return null;const t=iB(n);if(!t)return null;const r=QT(e);return r?{initialValue:i,params:Object.assign(Object.assign({},r),{format:n,stringifier:t})}:null},binding:{reader:()=>Sge,equals:ZT,writer:i=>{const e=e0e(i.params.format);if(!e)throw Zs.notBindable();return e}},controller:i=>{var e,n;return new qT(i.document,{colorType:i.params.format.type,expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:i.params.stringifier,parser:L0("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:i.params.format.alpha,value:i.value,viewProps:i.viewProps})}});class KT{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((t,r)=>{var s,a;return(a=(s=this.components[r])===null||s===void 0?void 0:s.constrain(t))!==null&&a!==void 0?a:t});return this.asm_.fromComponents(n)}}const CR=Wn("pndtxt");class d0e{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(CR()),this.textViews.forEach(t=>{const r=e.createElement("div");r.classList.add(CR("a")),r.appendChild(t.element),this.element.appendChild(r)})}}function f0e(i,e,n){return new $0(i,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:fr(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class JT{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((t,r)=>f0e(e,n,r)),this.acs_.forEach((t,r)=>{Hf({primary:this.value,secondary:t.value,forward:s=>n.assembly.toComponents(s)[r],backward:(s,a)=>{const l=n.assembly.toComponents(s);return l[r]=a,n.assembly.fromComponents(l)}})}),this.view=new d0e(e,{textViews:this.acs_.map(t=>t.view)})}get textControllers(){return this.acs_}}class p0e extends DT{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function m0e(i,e){const n=[],t=x8(i,e);t&&n.push(t);const r=w8(i);r&&n.push(r);const s=XT(i.options);return s&&n.push(s),new N0(n)}ls({id:"input-number",type:"input",accept:(i,e)=>{if(typeof i!="number")return null;const n=zr(e,t=>Object.assign(Object.assign({},S8(t)),{options:t.optional.custom(ex),readonly:t.optional.constant(!1)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>y8,constraint:i=>m0e(i.params,i.initialValue),writer:i=>V0},controller:i=>{const e=i.value,n=i.constraint,t=n&&Sb(n,JO);if(t)return new kf(i.document,{props:new Xn({options:t.values.value("options")}),value:e,viewProps:i.viewProps});const r=_8(i.params,e.rawValue),s=n&&Sb(n,qO);return s?new xR(i.document,Object.assign(Object.assign({},Qme(Object.assign(Object.assign({},r),{keyScale:fr(r.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:Bc,value:e,viewProps:i.viewProps})):new $0(i.document,{parser:Bc,props:Xn.fromObject(r),value:e,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="number"?null:i.controller.valueController instanceof xR?new p0e(i.controller):i.controller.valueController instanceof kf?new FT(i.controller):null}});class Ac{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Mi(e))return!1;const n=e.x,t=e.y;return!(typeof n!="number"||typeof t!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const aB={toComponents:i=>i.getComponents(),fromComponents:i=>new Ac(...i)},wd=Wn("p2d");class g0e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(wd()),n.viewProps.bindClassModifiers(this.element),ml(n.expanded,Qf(this.element,wd(void 0,"expanded")));const t=e.createElement("div");t.classList.add(wd("h")),this.element.appendChild(t);const r=e.createElement("button");r.classList.add(wd("b")),r.appendChild(KO(e,"p2dpad")),n.viewProps.bindDisabled(r),t.appendChild(r),this.buttonElement=r;const s=e.createElement("div");if(s.classList.add(wd("t")),t.appendChild(s),this.textElement=s,n.pickerLayout==="inline"){const a=e.createElement("div");a.classList.add(wd("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}const cc=Wn("p2dp");class v0e{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(cc()),n.layout==="popup"&&this.element.classList.add(cc(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(cc("p")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.padElement=t;const r=e.createElementNS(Oa,"svg");r.classList.add(cc("g")),this.padElement.appendChild(r),this.svgElem_=r;const s=e.createElementNS(Oa,"line");s.classList.add(cc("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const a=e.createElementNS(Oa,"line");a.classList.add(cc("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);const l=e.createElementNS(Oa,"line");l.classList.add(cc("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const h=e.createElement("div");h.classList.add(cc("m")),this.padElement.appendChild(h),this.markerElem_=h,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),t=this.props_.get("max"),r=Gn(e,-t,+t,0,100),s=Gn(n,-t,+t,0,100),a=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${a}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function kR(i,e,n){return[Ts(e[0],Sl(i)),Ts(e[1],qg(i))*(n?1:-1)]}class y0e{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new v0e(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Au(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=this.props.get("max"),r=Gn(e.point.x,0,e.bounds.width,-t,+t),s=Gn(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-t,+t);this.value.setRawValue(new Ac(r,s),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){V8(e.key)&&e.preventDefault();const[n,t]=kR(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(new Ac(this.value.rawValue.x+n,this.value.rawValue.y+t),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,t]=kR(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class b0e{constructor(e,n){var t,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=I0.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new D8(e,{viewProps:this.viewProps}):null;const s=new y0e(e,{layout:n.pickerLayout,props:new Xn({invertsY:fr(n.invertsY),max:fr(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(a=>{a.addEventListener("blur",this.onPopupChildBlur_),a.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new JT(e,{assembly:aB,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new g0e(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(t=this.view.buttonElement)===null||t===void 0||t.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Hf({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:a=>a,backward:(a,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),zT(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,t=e.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,t=M8(e);t&&n.contains(t)||t&&t===this.view.buttonElement&&!NT(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function O0e(i){return Ac.isObject(i)?new Ac(i.x,i.y):new Ac}function x0e(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y)}function w0e(i,e){return new KT({assembly:aB,components:[cl(Object.assign(Object.assign({},i),i.x),e.x),cl(Object.assign(Object.assign({},i),i.y),e.y)]})}function TR(i,e){var n,t;if(!Mi(i.min)||!Mi(i.max))return Math.max(Math.abs((n=i.min)!==null&&n!==void 0?n:0),Math.abs((t=i.max)!==null&&t!==void 0?t:0));const r=O8(i);return Math.max(Math.abs(r)*10,Math.abs(e)*10)}function _0e(i,e){var n,t;const r=TR(vu(i,(n=i.x)!==null&&n!==void 0?n:{}),e.x),s=TR(vu(i,(t=i.y)!==null&&t!==void 0?t:{}),e.y);return Math.max(r,s)}function S0e(i){if(!("y"in i))return!1;const e=i.y;return e&&"inverted"in e?!!e.inverted:!1}ls({id:"input-point2d",type:"input",accept:(i,e)=>{if(!Ac.isObject(i))return null;const n=zr(e,t=>Object.assign(Object.assign({},Zg(t)),{expanded:t.optional.boolean,picker:t.optional.custom(B8),readonly:t.optional.constant(!1),x:t.optional.custom(Sc),y:t.optional.object(Object.assign(Object.assign({},Zg(t)),{inverted:t.optional.boolean}))}));return n?{initialValue:i,params:n}:null},binding:{reader:()=>O0e,constraint:i=>w0e(i.params,i.initialValue),equals:Ac.equals,writer:()=>x0e},controller:i=>{var e,n;const t=i.document,r=i.value,s=i.constraint,a=[i.params.x,i.params.y];return new b0e(t,{axes:r.rawValue.getComponents().map((l,h)=>{var u;return RT({constraint:s.components[h],initialValue:l,params:vu(i.params,(u=a[h])!==null&&u!==void 0?u:{})})}),expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,invertsY:S0e(i.params),max:_0e(i.params,r.rawValue),parser:Bc,pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",value:r,viewProps:i.viewProps})}});class qd{constructor(e=0,n=0,t=0){this.x=e,this.y=n,this.z=t}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Mi(e))return!1;const n=e.x,t=e.y,r=e.z;return!(typeof n!="number"||typeof t!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const lB={toComponents:i=>i.getComponents(),fromComponents:i=>new qd(...i)};function C0e(i){return qd.isObject(i)?new qd(i.x,i.y,i.z):new qd}function k0e(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z)}function T0e(i,e){return new KT({assembly:lB,components:[cl(Object.assign(Object.assign({},i),i.x),e.x),cl(Object.assign(Object.assign({},i),i.y),e.y),cl(Object.assign(Object.assign({},i),i.z),e.z)]})}ls({id:"input-point3d",type:"input",accept:(i,e)=>{if(!qd.isObject(i))return null;const n=zr(e,t=>Object.assign(Object.assign({},Zg(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Sc),y:t.optional.custom(Sc),z:t.optional.custom(Sc)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>C0e,constraint:i=>T0e(i.params,i.initialValue),equals:qd.equals,writer:i=>k0e},controller:i=>{const e=i.value,n=i.constraint,t=[i.params.x,i.params.y,i.params.z];return new JT(i.document,{assembly:lB,axes:e.rawValue.getComponents().map((r,s)=>{var a;return RT({constraint:n.components[s],initialValue:r,params:vu(i.params,(a=t[s])!==null&&a!==void 0?a:{})})}),parser:Bc,value:e,viewProps:i.viewProps})}});class Zd{constructor(e=0,n=0,t=0,r=0){this.x=e,this.y=n,this.z=t,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Mi(e))return!1;const n=e.x,t=e.y,r=e.z,s=e.w;return!(typeof n!="number"||typeof t!="number"||typeof r!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const cB={toComponents:i=>i.getComponents(),fromComponents:i=>new Zd(...i)};function M0e(i){return Zd.isObject(i)?new Zd(i.x,i.y,i.z,i.w):new Zd}function E0e(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z),i.writeProperty("w",e.w)}function P0e(i,e){return new KT({assembly:cB,components:[cl(Object.assign(Object.assign({},i),i.x),e.x),cl(Object.assign(Object.assign({},i),i.y),e.y),cl(Object.assign(Object.assign({},i),i.z),e.z),cl(Object.assign(Object.assign({},i),i.w),e.w)]})}ls({id:"input-point4d",type:"input",accept:(i,e)=>{if(!Zd.isObject(i))return null;const n=zr(e,t=>Object.assign(Object.assign({},Zg(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Sc),x:t.optional.custom(Sc),y:t.optional.custom(Sc),z:t.optional.custom(Sc)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>M0e,constraint:i=>P0e(i.params,i.initialValue),equals:Zd.equals,writer:i=>E0e},controller:i=>{const e=i.value,n=i.constraint,t=[i.params.x,i.params.y,i.params.z,i.params.w];return new JT(i.document,{assembly:cB,axes:e.rawValue.getComponents().map((r,s)=>{var a;return RT({constraint:n.components[s],initialValue:r,params:vu(i.params,(a=t[s])!==null&&a!==void 0?a:{})})}),parser:Bc,value:e,viewProps:i.viewProps})}});function A0e(i){const e=[],n=XT(i.options);return n&&e.push(n),new N0(e)}ls({id:"input-string",type:"input",accept:(i,e)=>{if(typeof i!="string")return null;const n=zr(e,t=>({readonly:t.optional.constant(!1),options:t.optional.custom(ex)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>$8,constraint:i=>A0e(i.params),writer:i=>V0},controller:i=>{const e=i.document,n=i.value,t=i.constraint,r=t&&Sb(t,JO);return r?new kf(e,{props:new Xn({options:r.values.value("options")}),value:n,viewProps:i.viewProps}):new WT(e,{parser:s=>s,props:Xn.fromObject({formatter:e2}),value:n,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="string"?null:i.controller.valueController instanceof kf?new FT(i.controller):null}});const nx={monitor:{defaultInterval:200,defaultRows:3}},MR=Wn("mll");class R0e{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(MR()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("textarea");t.classList.add(MR("i")),t.style.height=`calc(var(${L8("containerUnitSize")}) * ${n.rows})`,t.readOnly=!0,n.viewProps.bindDisabled(t),this.element.appendChild(t),this.textareaElem_=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,t=[];this.value.rawValue.forEach(r=>{r!==void 0&&t.push(this.formatter_(r))}),e.textContent=t.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class eM{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new R0e(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const ER=Wn("sgl");class I0e{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(ER()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("input");t.classList.add(ER("i")),t.readOnly=!0,t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class tM{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new I0e(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}ls({id:"monitor-bool",type:"monitor",accept:(i,e)=>{if(typeof i!="boolean")return null;const n=zr(e,t=>({readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>N8},controller:i=>{var e;return i.value.rawValue.length===1?new tM(i.document,{formatter:OR,value:i.value,viewProps:i.viewProps}):new eM(i.document,{formatter:OR,rows:(e=i.params.rows)!==null&&e!==void 0?e:nx.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}});class D0e extends DT{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const hc=Wn("grl");class N0e{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(hc()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const t=e.createElementNS(Oa,"svg");t.classList.add(hc("g")),t.style.height=`calc(var(${L8("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(t),this.svgElem_=t;const r=e.createElementNS(Oa,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const s=e.createElement("div");s.classList.add(hc("t"),Wn("tt")()),this.element.appendChild(s),this.tooltipElem_=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:n}=this.element,t=this.value.rawValue.length-1,r=this.props_.get("min"),s=this.props_.get("max"),a=[];this.value.rawValue.forEach((p,g)=>{if(p===void 0)return;const v=Gn(g,0,t,0,e),y=Gn(p,r,s,n,0);a.push([v,y].join(","))}),this.lineElem_.setAttributeNS(null,"points",a.join(" "));const l=this.tooltipElem_,h=this.value.rawValue[this.cursor_.rawValue];if(h===void 0){l.classList.remove(hc("t","a"));return}const u=Gn(this.cursor_.rawValue,0,t,0,e),f=Gn(h,r,s,n,0);l.style.left=`${u}px`,l.style.top=`${f}px`,l.textContent=`${this.formatter_(h)}`,l.classList.contains(hc("t","a"))||(l.classList.add(hc("t","a"),hc("t","in")),_b(l),l.classList.remove(hc("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class hB{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=fr(-1),this.view=new N0e(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!NT(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const t=new Au(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Ia(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Da(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(Gn(e.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Gn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function t2(i){return Mi(i.format)?As(2):i.format}function $0e(i){var e;return i.value.rawValue.length===1?new tM(i.document,{formatter:t2(i.params),value:i.value,viewProps:i.viewProps}):new eM(i.document,{formatter:t2(i.params),rows:(e=i.params.rows)!==null&&e!==void 0?e:nx.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}function V0e(i){var e,n,t;return new hB(i.document,{formatter:t2(i.params),rows:(e=i.params.rows)!==null&&e!==void 0?e:nx.monitor.defaultRows,props:Xn.fromObject({max:(n=i.params.max)!==null&&n!==void 0?n:100,min:(t=i.params.min)!==null&&t!==void 0?t:0}),value:i.value,viewProps:i.viewProps})}function PR(i){return i.view==="graph"}ls({id:"monitor-number",type:"monitor",accept:(i,e)=>{if(typeof i!="number")return null;const n=zr(e,t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}));return n?{initialValue:i,params:n}:null},binding:{defaultBufferSize:i=>PR(i)?64:1,reader:i=>y8},controller:i=>PR(i.params)?V0e(i):$0e(i),api:i=>i.controller.valueController instanceof hB?new D0e(i.controller):null});ls({id:"monitor-string",type:"monitor",accept:(i,e)=>{if(typeof i!="string")return null;const n=zr(e,t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>$8},controller:i=>{var e;const n=i.value;return n.rawValue.length>1||i.params.multiline?new eM(i.document,{formatter:e2,rows:(e=i.params.rows)!==null&&e!==void 0?e:nx.monitor.defaultRows,value:n,viewProps:i.viewProps}):new tM(i.document,{formatter:e2,value:n,viewProps:i.viewProps})}});new P8("4.0.3");const L0e=parseInt(Bf.replace(/\D+/g,""));var B0e=Object.defineProperty,U0e=(i,e,n)=>e in i?B0e(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,z0e=(i,e,n)=>(U0e(i,e+"",n),n);async function AR(i){const e=await i.arrayBuffer(),n=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${i.type||""};base64,${n}`}let Zy,X_,_d,Ky;function W_(i,e=1/0,n=null){X_||(X_=new Kc(2,2,1,1)),_d||(_d=new os({uniforms:{blitTexture:new GO(i)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),_d.uniforms.blitTexture.value=i,_d.defines.IS_SRGB="colorSpace"in i?i.colorSpace==="srgb":i.encoding===3001,_d.needsUpdate=!0,Ky||(Ky=new Jn(X_,_d),Ky.frustrumCulled=!1);const t=new qn,r=new Of;r.add(Ky),n||(n=Zy=new ug({antialias:!1})),n.setSize(Math.min(i.image.width,e),Math.min(i.image.height,e)),n.clear(),n.render(r,t);const s=new hi(n.domElement);return s.minFilter=i.minFilter,s.magFilter=i.magFilter,s.wrapS=i.wrapS,s.wrapT=i.wrapT,s.name=i.name,Zy&&(Zy.dispose(),Zy=null),s}const RR={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class uB{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Z0e(e)}),this.register(function(e){return new K0e(e)}),this.register(function(e){return new tve(e)}),this.register(function(e){return new nve(e)}),this.register(function(e){return new ive(e)}),this.register(function(e){return new rve(e)}),this.register(function(e){return new J0e(e)}),this.register(function(e){return new eve(e)}),this.register(function(e){return new sve(e)}),this.register(function(e){return new ove(e)}),this.register(function(e){return new ave(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,r){const s=new q0e,a=[];for(let l=0,h=this.pluginCallbacks.length;l<h;l++)a.push(this.pluginCallbacks[l](s));s.setPlugins(a),s.write(e,n,r).catch(t)}parseAsync(e,n){const t=this;return new Promise(function(r,s){t.parse(e,r,s,n)})}}z0e(uB,"Utils",{insertKeyframe:function(i,e){const n=i.getValueSize(),t=new i.TimeBufferType(i.times.length+1),r=new i.ValueBufferType(i.values.length+n),s=i.createInterpolant(new i.ValueBufferType(n));let a;if(i.times.length===0){t[0]=e;for(let l=0;l<n;l++)r[l]=0;a=0}else if(e<i.times[0]){if(Math.abs(i.times[0]-e)<.001)return 0;t[0]=e,t.set(i.times,1),r.set(s.evaluate(e),0),r.set(i.values,n),a=0}else if(e>i.times[i.times.length-1]){if(Math.abs(i.times[i.times.length-1]-e)<.001)return i.times.length-1;t[t.length-1]=e,t.set(i.times,0),r.set(i.values,0),r.set(s.evaluate(e),i.values.length),a=t.length-1}else for(let l=0;l<i.times.length;l++){if(Math.abs(i.times[l]-e)<.001)return l;if(i.times[l]<e&&i.times[l+1]>e){t.set(i.times.slice(0,l+1),0),t[l+1]=e,t.set(i.times.slice(l+1),l+2),r.set(i.values.slice(0,(l+1)*n),0),r.set(s.evaluate(e),(l+1)*n),r.set(i.values.slice((l+1)*n),(l+2)*n),a=l+1;break}}return i.times=t,i.values=r,a},mergeMorphTargetTracks:function(i,e){const n=[],t={},r=i.tracks;for(let s=0;s<r.length;++s){let a=r[s];const l=pn.parseTrackName(a.name),h=pn.findNode(e,l.nodeName);if(l.propertyName!=="morphTargetInfluences"||l.propertyIndex===void 0){n.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(vf)}const u=h.morphTargetInfluences.length,f=h.morphTargetDictionary[l.propertyIndex];if(f===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);let p;if(t[h.uuid]===void 0){p=a.clone();const v=new p.ValueBufferType(u*p.times.length);for(let y=0;y<p.times.length;y++)v[y*u+f]=p.values[y];p.name=(l.nodeName||"")+".morphTargetInfluences",p.values=v,t[h.uuid]=p,n.push(p);continue}const g=a.createInterpolant(new a.ValueBufferType(1));p=t[h.uuid];for(let v=0;v<p.times.length;v++)p.values[v*u+f]=g.evaluate(p.times[v]);for(let v=0;v<a.times.length;v++){const y=this.insertKeyframe(p,a.times[v]);p.values[y*u+f]=a.values[v]}}return i.tracks=n,i}});const Pn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Q_="KHR_mesh_quantization",Js={};Js[er]=Pn.NEAREST;Js[wO]=Pn.NEAREST_MIPMAP_NEAREST;Js[Wh]=Pn.NEAREST_MIPMAP_LINEAR;Js[Vi]=Pn.LINEAR;Js[Yd]=Pn.LINEAR_MIPMAP_NEAREST;Js[Ho]=Pn.LINEAR_MIPMAP_LINEAR;Js[ts]=Pn.CLAMP_TO_EDGE;Js[Lc]=Pn.REPEAT;Js[pf]=Pn.MIRRORED_REPEAT;const IR={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},F0e=new nt,DR=12,X0e=1179937895,W0e=2,NR=8,Q0e=1313821514,H0e=5130562;function Km(i,e){return i.length===e.length&&i.every(function(n,t){return n===e[t]})}function G0e(i){return new TextEncoder().encode(i).buffer}function Y0e(i){return Km(i.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function j0e(i,e,n){const t={min:new Array(i.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(i.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+n;r++)for(let s=0;s<i.itemSize;s++){let a;i.itemSize>4?a=i.array[r*i.itemSize+s]:(s===0?a=i.getX(r):s===1?a=i.getY(r):s===2?a=i.getZ(r):s===3&&(a=i.getW(r)),i.normalized===!0&&(a=Nr.normalize(a,i.array))),t.min[s]=Math.min(t.min[s],a),t.max[s]=Math.max(t.max[s],a)}return t}function dB(i){return Math.ceil(i/4)*4}function H_(i,e=0){const n=dB(i.byteLength);if(n!==i.byteLength){const t=new Uint8Array(n);if(t.set(new Uint8Array(i)),e!==0)for(let r=i.byteLength;r<n;r++)t[r]=e;return t.buffer}return i}function $R(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function VR(i,e){if(i.toBlob!==void 0)return new Promise(t=>i.toBlob(t,e));let n;return e==="image/jpeg"?n=.92:e==="image/webp"&&(n=.8),i.convertToBlob({type:e,quality:n})}class q0e{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,n,t={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},t),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const r=this,s=r.buffers,a=r.json;t=r.options;const l=r.extensionsUsed,h=r.extensionsRequired,u=new Blob(s,{type:"application/octet-stream"}),f=Object.keys(l),p=Object.keys(h);f.length>0&&(a.extensionsUsed=f),p.length>0&&(a.extensionsRequired=p),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=u.size),t.binary===!0?u.arrayBuffer().then(g=>{const v=H_(g),y=new DataView(new ArrayBuffer(NR));y.setUint32(0,v.byteLength,!0),y.setUint32(4,H0e,!0);const w=H_(G0e(JSON.stringify(a)),32),x=new DataView(new ArrayBuffer(NR));x.setUint32(0,w.byteLength,!0),x.setUint32(4,Q0e,!0);const S=new ArrayBuffer(DR),_=new DataView(S);_.setUint32(0,X0e,!0),_.setUint32(4,W0e,!0);const O=DR+x.byteLength+w.byteLength+y.byteLength+v.byteLength;_.setUint32(8,O,!0),new Blob([S,x,w,y,v],{type:"application/octet-stream"}).arrayBuffer().then(n)}):a.buffers&&a.buffers.length>0?AR(u).then(g=>{a.buffers[0].uri=g,n(a)}):n(a)}serializeUserData(e,n){if(Object.keys(e.userData).length===0)return;const t=this.options,r=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(t.includeCustomExtensions&&s.gltfExtensions){n.extensions===void 0&&(n.extensions={});for(const a in s.gltfExtensions)n.extensions[a]=s.gltfExtensions[a],r[a]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(n.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,n=!1){if(this.uids.has(e)===!1){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(n)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new ne;for(let t=0,r=e.count;t<r;t++)if(Math.abs(n.fromBufferAttribute(e,t).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const n=this.cache;if(n.attributesNormalized.has(e))return n.attributesNormalized.get(e);const t=e.clone(),r=new ne;for(let s=0,a=t.count;s<a;s++)r.fromBufferAttribute(t,s),r.x===0&&r.y===0&&r.z===0?r.setX(1):r.normalize(),t.setXYZ(s,r.x,r.y,r.z);return n.attributesNormalized.set(e,t),t}applyTextureTransform(e,n){let t=!1;const r={};(n.offset.x!==0||n.offset.y!==0)&&(r.offset=n.offset.toArray(),t=!0),n.rotation!==0&&(r.rotation=n.rotation,t=!0),(n.repeat.x!==1||n.repeat.y!==1)&&(r.scale=n.repeat.toArray(),t=!0),t&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,n){if(e===n)return e;function t(g){return("colorSpace"in g?g.colorSpace==="srgb":g.encoding===3001)?function(v){return v<.04045?v*.0773993808:Math.pow(v*.9478672986+.0521327014,2.4)}:function(v){return v}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof ru&&(e=W_(e)),n instanceof ru&&(n=W_(n));const r=e?e.image:null,s=n?n.image:null,a=Math.max(r?r.width:0,s?s.width:0),l=Math.max(r?r.height:0,s?s.height:0),h=$R();h.width=a,h.height=l;const u=h.getContext("2d");u.fillStyle="#00ffff",u.fillRect(0,0,a,l);const f=u.getImageData(0,0,a,l);if(r){u.drawImage(r,0,0,a,l);const g=t(e),v=u.getImageData(0,0,a,l).data;for(let y=2;y<v.length;y+=4)f.data[y]=g(v[y]/256)*256}if(s){u.drawImage(s,0,0,a,l);const g=t(n),v=u.getImageData(0,0,a,l).data;for(let y=1;y<v.length;y+=4)f.data[y]=g(v[y]/256)*256}u.putImageData(f,0,0);const p=(e||n).clone();return p.source=new hi(h).source,"colorSpace"in p?p.colorSpace="":p.encoding=3e3,p.channel=(e||n).channel,e&&n&&e.channel!==n.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),p}processBuffer(e){const n=this.json,t=this.buffers;return n.buffers||(n.buffers=[{byteLength:0}]),t.push(e),0}processBufferView(e,n,t,r,s){const a=this.json;a.bufferViews||(a.bufferViews=[]);let l;switch(n){case Pn.BYTE:case Pn.UNSIGNED_BYTE:l=1;break;case Pn.SHORT:case Pn.UNSIGNED_SHORT:l=2;break;default:l=4}const h=dB(r*e.itemSize*l),u=new DataView(new ArrayBuffer(h));let f=0;for(let g=t;g<t+r;g++)for(let v=0;v<e.itemSize;v++){let y;e.itemSize>4?y=e.array[g*e.itemSize+v]:(v===0?y=e.getX(g):v===1?y=e.getY(g):v===2?y=e.getZ(g):v===3&&(y=e.getW(g)),e.normalized===!0&&(y=Nr.normalize(y,e.array))),n===Pn.FLOAT?u.setFloat32(f,y,!0):n===Pn.INT?u.setInt32(f,y,!0):n===Pn.UNSIGNED_INT?u.setUint32(f,y,!0):n===Pn.SHORT?u.setInt16(f,y,!0):n===Pn.UNSIGNED_SHORT?u.setUint16(f,y,!0):n===Pn.BYTE?u.setInt8(f,y):n===Pn.UNSIGNED_BYTE&&u.setUint8(f,y),f+=l}const p={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:h};return s!==void 0&&(p.target=s),s===Pn.ARRAY_BUFFER&&(p.byteStride=e.itemSize*l),this.byteOffset+=h,a.bufferViews.push(p),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const n=this,t=n.json;return t.bufferViews||(t.bufferViews=[]),e.arrayBuffer().then(r=>{const s=H_(r),a={buffer:n.processBuffer(s),byteOffset:n.byteOffset,byteLength:s.byteLength};return n.byteOffset+=s.byteLength,t.bufferViews.push(a)-1})}processAccessor(e,n,t,r){const s=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let l;if(e.array.constructor===Float32Array)l=Pn.FLOAT;else if(e.array.constructor===Int32Array)l=Pn.INT;else if(e.array.constructor===Uint32Array)l=Pn.UNSIGNED_INT;else if(e.array.constructor===Int16Array)l=Pn.SHORT;else if(e.array.constructor===Uint16Array)l=Pn.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)l=Pn.BYTE;else if(e.array.constructor===Uint8Array)l=Pn.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(t===void 0&&(t=0),r===void 0&&(r=e.count),r===0)return null;const h=j0e(e,t,r);let u;n!==void 0&&(u=e===n.index?Pn.ELEMENT_ARRAY_BUFFER:Pn.ARRAY_BUFFER);const f=this.processBufferView(e,l,t,r,u),p={bufferView:f.id,byteOffset:f.byteOffset,componentType:l,count:r,max:h.max,min:h.min,type:a[e.itemSize]};return e.normalized===!0&&(p.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(p)-1}processImage(e,n,t,r="image/png"){if(e!==null){const s=this,a=s.cache,l=s.json,h=s.options,u=s.pending;a.images.has(e)||a.images.set(e,{});const f=a.images.get(e),p=r+":flipY/"+t.toString();if(f[p]!==void 0)return f[p];l.images||(l.images=[]);const g={mimeType:r},v=$R();v.width=Math.min(e.width,h.maxTextureSize),v.height=Math.min(e.height,h.maxTextureSize);const y=v.getContext("2d");if(t===!0&&(y.translate(0,v.height),y.scale(1,-1)),e.data!==void 0){n!==ks&&console.error("GLTFExporter: Only RGBAFormat is supported.",n),(e.width>h.maxTextureSize||e.height>h.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const x=new Uint8ClampedArray(e.height*e.width*4);for(let S=0;S<x.length;S+=4)x[S+0]=e.data[S+0],x[S+1]=e.data[S+1],x[S+2]=e.data[S+2],x[S+3]=e.data[S+3];y.putImageData(new ImageData(x,e.width,e.height),0,0)}else y.drawImage(e,0,0,v.width,v.height);h.binary===!0?u.push(VR(v,r).then(x=>s.processBufferViewImage(x)).then(x=>{g.bufferView=x})):v.toDataURL!==void 0?g.uri=v.toDataURL(r):u.push(VR(v,r).then(AR).then(x=>{g.uri=x}));const w=l.images.push(g)-1;return f[p]=w,w}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const n=this.json;n.samplers||(n.samplers=[]);const t={magFilter:Js[e.magFilter],minFilter:Js[e.minFilter],wrapS:Js[e.wrapS],wrapT:Js[e.wrapT]};return n.samplers.push(t)-1}processTexture(e){const n=this.options,t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]),e instanceof ru&&(e=W_(e,n.maxTextureSize));let s=e.userData.mimeType;s==="image/webp"&&(s="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(a.name=e.name),this._invokeAll(function(h){h.writeTexture&&h.writeTexture(e,a)});const l=r.textures.push(a)-1;return t.textures.set(e,l),l}processMaterial(e){const n=this.cache,t=this.json;if(n.materials.has(e))return n.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;t.materials||(t.materials=[]);const r={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(Km(s,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const l=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),h={index:this.processTexture(l),channel:l.channel};this.applyTextureTransform(h,l),r.pbrMetallicRoughness.metallicRoughnessTexture=h}if(e.map){const l={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(l,e.map),r.pbrMetallicRoughness.baseColorTexture=l}if(e.emissive){const l=e.emissive;if(Math.max(l.r,l.g,l.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const h={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(h,e.emissiveMap),r.emissiveTexture=h}}if(e.normalMap){const l={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(l.scale=e.normalScale.x),this.applyTextureTransform(l,e.normalMap),r.normalTexture=l}if(e.aoMap){const l={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(l.strength=e.aoMapIntensity),this.applyTextureTransform(l,e.aoMap),r.occlusionTexture=l}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===ws&&(r.doubleSided=!0),e.name!==""&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll(function(l){l.writeMaterial&&l.writeMaterial(e,r)});const a=t.materials.push(r)-1;return n.materials.set(e,a),a}processMesh(e){const n=this.cache,t=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let O=0,k=e.material.length;O<k;O++)r.push(e.material[O].uuid);else r.push(e.material.uuid);const s=r.join(":");if(n.meshes.has(s))return n.meshes.get(s);const a=e.geometry;let l;e.isLineSegments?l=Pn.LINES:e.isLineLoop?l=Pn.LINE_LOOP:e.isLine?l=Pn.LINE_STRIP:e.isPoints?l=Pn.POINTS:l=e.material.wireframe?Pn.LINES:Pn.TRIANGLES;const h={},u={},f=[],p=[],g={...L0e>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},v=a.getAttribute("normal");v!==void 0&&!this.isNormalizedNormalAttribute(v)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(v)));let y=null;for(let O in a.attributes){if(O.slice(0,5)==="morph")continue;const k=a.attributes[O];if(O=g[O]||O.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(O)||(O="_"+O),n.attributes.has(this.getUID(k))){u[O]=n.attributes.get(this.getUID(k));continue}y=null;const M=k.array;O==="JOINTS_0"&&!(M instanceof Uint16Array)&&!(M instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),y=new In(new Uint16Array(M),k.itemSize,k.normalized));const P=this.processAccessor(y||k,a);P!==null&&(O.startsWith("_")||this.detectMeshQuantization(O,k),u[O]=P,n.attributes.set(this.getUID(k),P))}if(v!==void 0&&a.setAttribute("normal",v),Object.keys(u).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const O=[],k=[],M={};if(e.morphTargetDictionary!==void 0)for(const P in e.morphTargetDictionary)M[e.morphTargetDictionary[P]]=P;for(let P=0;P<e.morphTargetInfluences.length;++P){const D={};let A=!1;for(const R in a.morphAttributes){if(R!=="position"&&R!=="normal"){A||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),A=!0);continue}const T=a.morphAttributes[R][P],N=R.toUpperCase(),L=a.attributes[R];if(n.attributes.has(this.getUID(T,!0))){D[N]=n.attributes.get(this.getUID(T,!0));continue}const I=T.clone();if(!a.morphTargetsRelative)for(let $=0,B=T.count;$<B;$++)for(let U=0;U<T.itemSize;U++)U===0&&I.setX($,T.getX($)-L.getX($)),U===1&&I.setY($,T.getY($)-L.getY($)),U===2&&I.setZ($,T.getZ($)-L.getZ($)),U===3&&I.setW($,T.getW($)-L.getW($));D[N]=this.processAccessor(I,a),n.attributes.set(this.getUID(L,!0),D[N])}p.push(D),O.push(e.morphTargetInfluences[P]),e.morphTargetDictionary!==void 0&&k.push(M[P])}h.weights=O,k.length>0&&(h.extras={},h.extras.targetNames=k)}const w=Array.isArray(e.material);if(w&&a.groups.length===0)return null;const x=w?e.material:[e.material],S=w?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let O=0,k=S.length;O<k;O++){const M={mode:l,attributes:u};if(this.serializeUserData(a,M),p.length>0&&(M.targets=p),a.index!==null){let D=this.getUID(a.index);(S[O].start!==void 0||S[O].count!==void 0)&&(D+=":"+S[O].start+":"+S[O].count),n.attributes.has(D)?M.indices=n.attributes.get(D):(M.indices=this.processAccessor(a.index,a,S[O].start,S[O].count),n.attributes.set(D,M.indices)),M.indices===null&&delete M.indices}const P=this.processMaterial(x[S[O].materialIndex]);P!==null&&(M.material=P),f.push(M)}h.primitives=f,t.meshes||(t.meshes=[]),this._invokeAll(function(O){O.writeMesh&&O.writeMesh(e,h)});const _=t.meshes.push(h)-1;return n.meshes.set(s,_),_}detectMeshQuantization(e,n){if(this.extensionsUsed[Q_])return;let t;switch(n.array.constructor){case Int8Array:t="byte";break;case Uint8Array:t="unsigned byte";break;case Int16Array:t="short";break;case Uint16Array:t="unsigned short";break;default:return}n.normalized&&(t+=" normalized");const r=e.split("_",1)[0];RR[r]&&RR[r].includes(t)&&(this.extensionsUsed[Q_]=!0,this.extensionsRequired[Q_]=!0)}processCamera(e){const n=this.json;n.cameras||(n.cameras=[]);const t=e.isOrthographicCamera,r={type:t?"orthographic":"perspective"};return t?r.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:Nr.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(r.name=e.type),n.cameras.push(r)-1}processAnimation(e,n){const t=this.json,r=this.nodeMap;t.animations||(t.animations=[]),e=uB.Utils.mergeMorphTargetTracks(e.clone(),n);const s=e.tracks,a=[],l=[];for(let h=0;h<s.length;++h){const u=s[h],f=pn.parseTrackName(u.name);let p=pn.findNode(n,f.nodeName);const g=IR[f.propertyName];if(f.objectName==="bones"&&(p.isSkinnedMesh===!0?p=p.skeleton.getBoneByName(f.objectIndex):p=void 0),!p||!g)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;const v=1;let y=u.values.length/u.times.length;g===IR.morphTargetInfluences&&(y/=p.morphTargetInfluences.length);let w;u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(w="CUBICSPLINE",y/=3):u.getInterpolation()===gf?w="STEP":w="LINEAR",l.push({input:this.processAccessor(new In(u.times,v)),output:this.processAccessor(new In(u.values,y)),interpolation:w}),a.push({sampler:l.length-1,target:{node:r.get(p),path:g}})}return t.animations.push({name:e.name||"clip_"+t.animations.length,samplers:l,channels:a}),t.animations.length-1}processSkin(e){const n=this.json,t=this.nodeMap,r=n.nodes[t.get(e)],s=e.skeleton;if(s===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const l=[],h=new Float32Array(s.bones.length*16),u=new pt;for(let f=0;f<s.bones.length;++f)l.push(t.get(s.bones[f])),u.copy(s.boneInverses[f]),u.multiply(e.bindMatrix).toArray(h,f*16);return n.skins===void 0&&(n.skins=[]),n.skins.push({inverseBindMatrices:this.processAccessor(new In(h,16)),joints:l,skeleton:t.get(a)}),r.skin=n.skins.length-1}processNode(e){const n=this.json,t=this.options,r=this.nodeMap;n.nodes||(n.nodes=[]);const s={};if(t.trs){const l=e.quaternion.toArray(),h=e.position.toArray(),u=e.scale.toArray();Km(l,[0,0,0,1])||(s.rotation=l),Km(h,[0,0,0])||(s.translation=h),Km(u,[1,1,1])||(s.scale=u)}else e.matrixAutoUpdate&&e.updateMatrix(),Y0e(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const l=this.processMesh(e);l!==null&&(s.mesh=l)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const l=[];for(let h=0,u=e.children.length;h<u;h++){const f=e.children[h];if(f.visible||t.onlyVisible===!1){const p=this.processNode(f);p!==null&&l.push(p)}}l.length>0&&(s.children=l)}this._invokeAll(function(l){l.writeNode&&l.writeNode(e,s)});const a=n.nodes.push(s)-1;return r.set(e,a),a}processScene(e){const n=this.json,t=this.options;n.scenes||(n.scenes=[],n.scene=0);const r={};e.name!==""&&(r.name=e.name),n.scenes.push(r);const s=[];for(let a=0,l=e.children.length;a<l;a++){const h=e.children[a];if(h.visible||t.onlyVisible===!1){const u=this.processNode(h);u!==null&&s.push(u)}}s.length>0&&(r.nodes=s),this.serializeUserData(e,r)}processObjects(e){const n=new Of;n.name="AuxScene";for(let t=0;t<e.length;t++)n.children.push(e[t]);this.processScene(n)}processInput(e){const n=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(r){r.beforeParse&&r.beforeParse(e)});const t=[];for(let r=0;r<e.length;r++)e[r]instanceof Of?this.processScene(e[r]):t.push(e[r]);t.length>0&&this.processObjects(t);for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<n.animations.length;++r)this.processAnimation(n.animations[r],e[0]);this._invokeAll(function(r){r.afterParse&&r.afterParse(e)})}_invokeAll(e){for(let n=0,t=this.plugins.length;n<t;n++)e(this.plugins[n])}}class Z0e{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,n){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const t=this.writer,r=t.json,s=t.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},s[this.name]=!0);const l=r.extensions[this.name].lights;l.push(a),n.extensions=n.extensions||{},n.extensions[this.name]={light:l.length-1}}}let K0e=class{constructor(i){this.writer=i,this.name="KHR_materials_unlit"}writeMaterial(i,e){if(!i.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}},J0e=class{constructor(i){this.writer=i,this.name="KHR_materials_clearcoat"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.clearcoat===0)return;const n=this.writer,t=n.extensionsUsed,r={};if(r.clearcoatFactor=i.clearcoat,i.clearcoatMap){const s={index:n.processTexture(i.clearcoatMap),texCoord:i.clearcoatMap.channel};n.applyTextureTransform(s,i.clearcoatMap),r.clearcoatTexture=s}if(r.clearcoatRoughnessFactor=i.clearcoatRoughness,i.clearcoatRoughnessMap){const s={index:n.processTexture(i.clearcoatRoughnessMap),texCoord:i.clearcoatRoughnessMap.channel};n.applyTextureTransform(s,i.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=s}if(i.clearcoatNormalMap){const s={index:n.processTexture(i.clearcoatNormalMap),texCoord:i.clearcoatNormalMap.channel};n.applyTextureTransform(s,i.clearcoatNormalMap),r.clearcoatNormalTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},eve=class{constructor(i){this.writer=i,this.name="KHR_materials_iridescence"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.iridescence===0)return;const n=this.writer,t=n.extensionsUsed,r={};if(r.iridescenceFactor=i.iridescence,i.iridescenceMap){const s={index:n.processTexture(i.iridescenceMap),texCoord:i.iridescenceMap.channel};n.applyTextureTransform(s,i.iridescenceMap),r.iridescenceTexture=s}if(r.iridescenceIor=i.iridescenceIOR,r.iridescenceThicknessMinimum=i.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=i.iridescenceThicknessRange[1],i.iridescenceThicknessMap){const s={index:n.processTexture(i.iridescenceThicknessMap),texCoord:i.iridescenceThicknessMap.channel};n.applyTextureTransform(s,i.iridescenceThicknessMap),r.iridescenceThicknessTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},tve=class{constructor(i){this.writer=i,this.name="KHR_materials_transmission"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.transmission===0)return;const n=this.writer,t=n.extensionsUsed,r={};if(r.transmissionFactor=i.transmission,i.transmissionMap){const s={index:n.processTexture(i.transmissionMap),texCoord:i.transmissionMap.channel};n.applyTextureTransform(s,i.transmissionMap),r.transmissionTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},nve=class{constructor(i){this.writer=i,this.name="KHR_materials_volume"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.transmission===0)return;const n=this.writer,t=n.extensionsUsed,r={};if(r.thicknessFactor=i.thickness,i.thicknessMap){const s={index:n.processTexture(i.thicknessMap),texCoord:i.thicknessMap.channel};n.applyTextureTransform(s,i.thicknessMap),r.thicknessTexture=s}r.attenuationDistance=i.attenuationDistance,r.attenuationColor=i.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},ive=class{constructor(i){this.writer=i,this.name="KHR_materials_ior"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.ior===1.5)return;const n=this.writer.extensionsUsed,t={};t.ior=i.ior,e.extensions=e.extensions||{},e.extensions[this.name]=t,n[this.name]=!0}},rve=class{constructor(i){this.writer=i,this.name="KHR_materials_specular"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.specularIntensity===1&&i.specularColor.equals(F0e)&&!i.specularIntensityMap&&!i.specularColorTexture)return;const n=this.writer,t=n.extensionsUsed,r={};if(i.specularIntensityMap){const s={index:n.processTexture(i.specularIntensityMap),texCoord:i.specularIntensityMap.channel};n.applyTextureTransform(s,i.specularIntensityMap),r.specularTexture=s}if(i.specularColorMap){const s={index:n.processTexture(i.specularColorMap),texCoord:i.specularColorMap.channel};n.applyTextureTransform(s,i.specularColorMap),r.specularColorTexture=s}r.specularFactor=i.specularIntensity,r.specularColorFactor=i.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},sve=class{constructor(i){this.writer=i,this.name="KHR_materials_sheen"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.sheen==0)return;const n=this.writer,t=n.extensionsUsed,r={};if(i.sheenRoughnessMap){const s={index:n.processTexture(i.sheenRoughnessMap),texCoord:i.sheenRoughnessMap.channel};n.applyTextureTransform(s,i.sheenRoughnessMap),r.sheenRoughnessTexture=s}if(i.sheenColorMap){const s={index:n.processTexture(i.sheenColorMap),texCoord:i.sheenColorMap.channel};n.applyTextureTransform(s,i.sheenColorMap),r.sheenColorTexture=s}r.sheenRoughnessFactor=i.sheenRoughness,r.sheenColorFactor=i.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},ove=class{constructor(i){this.writer=i,this.name="KHR_materials_anisotropy"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.anisotropy==0)return;const n=this.writer,t=n.extensionsUsed,r={};if(i.anisotropyMap){const s={index:n.processTexture(i.anisotropyMap)};n.applyTextureTransform(s,i.anisotropyMap),r.anisotropyTexture=s}r.anisotropyStrength=i.anisotropy,r.anisotropyRotation=i.anisotropyRotation,e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},ave=class{constructor(i){this.writer=i,this.name="KHR_materials_emissive_strength"}writeMaterial(i,e){if(!i.isMeshStandardMaterial||i.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,t={};t.emissiveStrength=i.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=t,n[this.name]=!0}};var go=Uint8Array,ou=Uint16Array,n2=Uint32Array,fB=new go([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pB=new go([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lve=new go([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mB=function(i,e){for(var n=new ou(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var r=new n2(n[30]),t=1;t<30;++t)for(var s=n[t];s<n[t+1];++s)r[s]=s-n[t]<<5|t;return[n,r]},gB=mB(fB,2),vB=gB[0],cve=gB[1];vB[28]=258,cve[258]=28;var hve=mB(pB,0),uve=hve[0],yB=new ou(32768);for(var mi=0;mi<32768;++mi){var uc=(mi&43690)>>>1|(mi&21845)<<1;uc=(uc&52428)>>>2|(uc&13107)<<2,uc=(uc&61680)>>>4|(uc&3855)<<4,yB[mi]=((uc&65280)>>>8|(uc&255)<<8)>>>1}var vg=function(i,e,n){for(var t=i.length,r=0,s=new ou(e);r<t;++r)++s[i[r]-1];var a=new ou(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var l;{l=new ou(1<<e);var h=15-e;for(r=0;r<t;++r)if(i[r])for(var u=r<<4|i[r],f=e-i[r],p=a[i[r]-1]++<<f,g=p|(1<<f)-1;p<=g;++p)l[yB[p]>>>h]=u}return l},B0=new go(288);for(var mi=0;mi<144;++mi)B0[mi]=8;for(var mi=144;mi<256;++mi)B0[mi]=9;for(var mi=256;mi<280;++mi)B0[mi]=7;for(var mi=280;mi<288;++mi)B0[mi]=8;var bB=new go(32);for(var mi=0;mi<32;++mi)bB[mi]=5;var dve=vg(B0,9),fve=vg(bB,5),G_=function(i){for(var e=i[0],n=1;n<i.length;++n)i[n]>e&&(e=i[n]);return e},Wo=function(i,e,n){var t=e/8|0;return(i[t]|i[t+1]<<8)>>(e&7)&n},Y_=function(i,e){var n=e/8|0;return(i[n]|i[n+1]<<8|i[n+2]<<16)>>(e&7)},pve=function(i){return(i/8|0)+(i&7&&1)},mve=function(i,e,n){(n==null||n>i.length)&&(n=i.length);var t=new(i instanceof ou?ou:i instanceof n2?n2:go)(n-e);return t.set(i.subarray(e,n)),t},gve=function(i,e,n){var t=i.length;if(!t||n&&!n.l&&t<5)return e||new go(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new go(t*3));var a=function(pe){var j=e.length;if(pe>j){var K=new go(Math.max(j*2,pe));K.set(e),e=K}},l=n.f||0,h=n.p||0,u=n.b||0,f=n.l,p=n.d,g=n.m,v=n.n,y=t*8;do{if(!f){n.f=l=Wo(i,h,1);var w=Wo(i,h+1,3);if(h+=3,w)if(w==1)f=dve,p=fve,g=9,v=5;else if(w==2){var x=Wo(i,h,31)+257,S=Wo(i,h+10,15)+4,_=x+Wo(i,h+5,31)+1;h+=14;for(var O=new go(_),k=new go(19),M=0;M<S;++M)k[lve[M]]=Wo(i,h+M*3,7);h+=S*3;for(var P=G_(k),D=(1<<P)-1,A=vg(k,P),M=0;M<_;){var R=A[Wo(i,h,D)];h+=R&15;var T=R>>>4;if(T<16)O[M++]=T;else{var N=0,L=0;for(T==16?(L=3+Wo(i,h,3),h+=2,N=O[M-1]):T==17?(L=3+Wo(i,h,7),h+=3):T==18&&(L=11+Wo(i,h,127),h+=7);L--;)O[M++]=N}}var I=O.subarray(0,x),$=O.subarray(x);g=G_(I),v=G_($),f=vg(I,g),p=vg($,v)}else throw"invalid block type";else{var T=pve(h)+4,B=i[T-4]|i[T-3]<<8,U=T+B;if(U>t){if(s)throw"unexpected EOF";break}r&&a(u+B),e.set(i.subarray(T,U),u),n.b=u+=B,n.p=h=U*8;continue}if(h>y){if(s)throw"unexpected EOF";break}}r&&a(u+131072);for(var Y=(1<<g)-1,Z=(1<<v)-1,ie=h;;ie=h){var N=f[Y_(i,h)&Y],ce=N>>>4;if(h+=N&15,h>y){if(s)throw"unexpected EOF";break}if(!N)throw"invalid length/literal";if(ce<256)e[u++]=ce;else if(ce==256){ie=h,f=null;break}else{var ge=ce-254;if(ce>264){var M=ce-257,Ae=fB[M];ge=Wo(i,h,(1<<Ae)-1)+vB[M],h+=Ae}var Se=p[Y_(i,h)&Z],he=Se>>>4;if(!Se)throw"invalid distance";h+=Se&15;var $=uve[he];if(he>3){var Ae=pB[he];$+=Y_(i,h)&(1<<Ae)-1,h+=Ae}if(h>y){if(s)throw"unexpected EOF";break}r&&a(u+131072);for(var Ce=u+ge;u<Ce;u+=4)e[u]=e[u-$],e[u+1]=e[u+1-$],e[u+2]=e[u+2-$],e[u+3]=e[u+3-$];u=Ce}}n.l=f,n.p=ie,n.b=u,f&&(l=1,n.m=g,n.d=p,n.n=v)}while(!l);return u==e.length?e:mve(e,0,u)},vve=new go(0),yve=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function bve(i,e){return gve((yve(i),i.subarray(2,-4)),e)}var Ove=typeof TextDecoder<"u"&&new TextDecoder,xve=0;try{Ove.decode(vve,{stream:!0}),xve=1}catch{}new _s;new ne;new tr(0,0,0,"YXZ");new ne;var wve=Object.defineProperty,_ve=(i,e,n)=>e in i?wve(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,Jt=(i,e,n)=>(_ve(i,typeof e!="symbol"?e+"":e,n),n);const Jy=new ku,LR=new ma,Sve=Math.cos(70*(Math.PI/180)),BR=(i,e)=>(i%e+e)%e;class Cve extends Pa{constructor(e,n){super(),Jt(this,"object"),Jt(this,"domElement"),Jt(this,"enabled",!0),Jt(this,"target",new ne),Jt(this,"minDistance",0),Jt(this,"maxDistance",1/0),Jt(this,"minZoom",0),Jt(this,"maxZoom",1/0),Jt(this,"minPolarAngle",0),Jt(this,"maxPolarAngle",Math.PI),Jt(this,"minAzimuthAngle",-1/0),Jt(this,"maxAzimuthAngle",1/0),Jt(this,"enableDamping",!1),Jt(this,"dampingFactor",.05),Jt(this,"enableZoom",!0),Jt(this,"zoomSpeed",1),Jt(this,"enableRotate",!0),Jt(this,"rotateSpeed",1),Jt(this,"enablePan",!0),Jt(this,"panSpeed",1),Jt(this,"screenSpacePanning",!0),Jt(this,"keyPanSpeed",7),Jt(this,"zoomToCursor",!1),Jt(this,"autoRotate",!1),Jt(this,"autoRotateSpeed",2),Jt(this,"reverseOrbit",!1),Jt(this,"reverseHorizontalOrbit",!1),Jt(this,"reverseVerticalOrbit",!1),Jt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Jt(this,"mouseButtons",{LEFT:$h.ROTATE,MIDDLE:$h.DOLLY,RIGHT:$h.PAN}),Jt(this,"touches",{ONE:nl.ROTATE,TWO:nl.DOLLY_PAN}),Jt(this,"target0"),Jt(this,"position0"),Jt(this,"zoom0"),Jt(this,"_domElementKeyEvents",null),Jt(this,"getPolarAngle"),Jt(this,"getAzimuthalAngle"),Jt(this,"setPolarAngle"),Jt(this,"setAzimuthalAngle"),Jt(this,"getDistance"),Jt(this,"listenToKeyEvents"),Jt(this,"stopListenToKeyEvents"),Jt(this,"saveState"),Jt(this,"reset"),Jt(this,"update"),Jt(this,"connect"),Jt(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=_e=>{let Le=BR(_e,2*Math.PI),me=f.phi;me<0&&(me+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let Be=Math.abs(Le-me);2*Math.PI-Be<Be&&(Le<me?Le+=2*Math.PI:me+=2*Math.PI),p.phi=Le-me,t.update()},this.setAzimuthalAngle=_e=>{let Le=BR(_e,2*Math.PI),me=f.theta;me<0&&(me+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let Be=Math.abs(Le-me);2*Math.PI-Be<Be&&(Le<me?Le+=2*Math.PI:me+=2*Math.PI),p.theta=Le-me,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=_e=>{_e.addEventListener("keydown",rt),this._domElementKeyEvents=_e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",rt),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(r),t.update(),h=l.NONE},this.update=(()=>{const _e=new ne,Le=new ne(0,1,0),me=new Wi().setFromUnitVectors(e.up,Le),Be=me.clone().invert(),Fe=new ne,tt=new Wi,dt=2*Math.PI;return function(){const wn=t.object.position;me.setFromUnitVectors(e.up,Le),Be.copy(me).invert(),_e.copy(wn).sub(t.target),_e.applyQuaternion(me),f.setFromVector3(_e),t.autoRotate&&h===l.NONE&&$(L()),t.enableDamping?(f.theta+=p.theta*t.dampingFactor,f.phi+=p.phi*t.dampingFactor):(f.theta+=p.theta,f.phi+=p.phi);let _n=t.minAzimuthAngle,Rn=t.maxAzimuthAngle;isFinite(_n)&&isFinite(Rn)&&(_n<-Math.PI?_n+=dt:_n>Math.PI&&(_n-=dt),Rn<-Math.PI?Rn+=dt:Rn>Math.PI&&(Rn-=dt),_n<=Rn?f.theta=Math.max(_n,Math.min(Rn,f.theta)):f.theta=f.theta>(_n+Rn)/2?Math.max(_n,f.theta):Math.min(Rn,f.theta)),f.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,f.phi)),f.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(v,t.dampingFactor):t.target.add(v),t.zoomToCursor&&R||t.object.isOrthographicCamera?f.radius=Ae(f.radius):f.radius=Ae(f.radius*g),_e.setFromSpherical(f),_e.applyQuaternion(Be),wn.copy(t.target).add(_e),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(p.theta*=1-t.dampingFactor,p.phi*=1-t.dampingFactor,v.multiplyScalar(1-t.dampingFactor)):(p.set(0,0,0),v.set(0,0,0));let yi=!1;if(t.zoomToCursor&&R){let vn=null;if(t.object instanceof qn&&t.object.isPerspectiveCamera){const or=_e.length();vn=Ae(or*g);const Si=or-vn;t.object.position.addScaledVector(D,Si),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const or=new ne(A.x,A.y,0);or.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/g)),t.object.updateProjectionMatrix(),yi=!0;const Si=new ne(A.x,A.y,0);Si.unproject(t.object),t.object.position.sub(Si).add(or),t.object.updateMatrixWorld(),vn=_e.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;vn!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(vn).add(t.object.position):(Jy.origin.copy(t.object.position),Jy.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(Jy.direction))<Sve?e.lookAt(t.target):(LR.setFromNormalAndCoplanarPoint(t.object.up,t.target),Jy.intersectPlane(LR,t.target))))}else t.object instanceof bo&&t.object.isOrthographicCamera&&(yi=g!==1,yi&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/g)),t.object.updateProjectionMatrix()));return g=1,R=!1,yi||Fe.distanceToSquared(t.object.position)>u||8*(1-tt.dot(t.object.quaternion))>u?(t.dispatchEvent(r),Fe.copy(t.object.position),tt.copy(t.object.quaternion),yi=!1,!0):!1}})(),this.connect=_e=>{_e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=_e,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",kt),t.domElement.addEventListener("pointerdown",ue),t.domElement.addEventListener("pointercancel",Te),t.domElement.addEventListener("wheel",ze,{passive:!0})},this.dispose=()=>{var _e,Le,me,Be,Fe,tt;t.domElement&&(t.domElement.style.touchAction="auto"),(_e=t.domElement)==null||_e.removeEventListener("contextmenu",kt),(Le=t.domElement)==null||Le.removeEventListener("pointerdown",ue),(me=t.domElement)==null||me.removeEventListener("pointercancel",Te),(Be=t.domElement)==null||Be.removeEventListener("wheel",ze),(Fe=t.domElement)==null||Fe.ownerDocument.removeEventListener("pointermove",de),(tt=t.domElement)==null||tt.ownerDocument.removeEventListener("pointerup",we),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",rt)};const t=this,r={type:"change"},s={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=l.NONE;const u=1e-6,f=new QC,p=new QC;let g=1;const v=new ne,y=new Qe,w=new Qe,x=new Qe,S=new Qe,_=new Qe,O=new Qe,k=new Qe,M=new Qe,P=new Qe,D=new ne,A=new Qe;let R=!1;const T=[],N={};function L(){return 2*Math.PI/60/60*t.autoRotateSpeed}function I(){return Math.pow(.95,t.zoomSpeed)}function $(_e){t.reverseOrbit||t.reverseHorizontalOrbit?p.theta+=_e:p.theta-=_e}function B(_e){t.reverseOrbit||t.reverseVerticalOrbit?p.phi+=_e:p.phi-=_e}const U=(()=>{const _e=new ne;return function(Le,me){_e.setFromMatrixColumn(me,0),_e.multiplyScalar(-Le),v.add(_e)}})(),Y=(()=>{const _e=new ne;return function(Le,me){t.screenSpacePanning===!0?_e.setFromMatrixColumn(me,1):(_e.setFromMatrixColumn(me,0),_e.crossVectors(t.object.up,_e)),_e.multiplyScalar(Le),v.add(_e)}})(),Z=(()=>{const _e=new ne;return function(Le,me){const Be=t.domElement;if(Be&&t.object instanceof qn&&t.object.isPerspectiveCamera){const Fe=t.object.position;_e.copy(Fe).sub(t.target);let tt=_e.length();tt*=Math.tan(t.object.fov/2*Math.PI/180),U(2*Le*tt/Be.clientHeight,t.object.matrix),Y(2*me*tt/Be.clientHeight,t.object.matrix)}else Be&&t.object instanceof bo&&t.object.isOrthographicCamera?(U(Le*(t.object.right-t.object.left)/t.object.zoom/Be.clientWidth,t.object.matrix),Y(me*(t.object.top-t.object.bottom)/t.object.zoom/Be.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function ie(_e){t.object instanceof qn&&t.object.isPerspectiveCamera||t.object instanceof bo&&t.object.isOrthographicCamera?g/=_e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function ce(_e){t.object instanceof qn&&t.object.isPerspectiveCamera||t.object instanceof bo&&t.object.isOrthographicCamera?g*=_e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function ge(_e){if(!t.zoomToCursor||!t.domElement)return;R=!0;const Le=t.domElement.getBoundingClientRect(),me=_e.clientX-Le.left,Be=_e.clientY-Le.top,Fe=Le.width,tt=Le.height;A.x=me/Fe*2-1,A.y=-(Be/tt)*2+1,D.set(A.x,A.y,1).unproject(t.object).sub(t.object.position).normalize()}function Ae(_e){return Math.max(t.minDistance,Math.min(t.maxDistance,_e))}function Se(_e){y.set(_e.clientX,_e.clientY)}function he(_e){ge(_e),k.set(_e.clientX,_e.clientY)}function Ce(_e){S.set(_e.clientX,_e.clientY)}function pe(_e){w.set(_e.clientX,_e.clientY),x.subVectors(w,y).multiplyScalar(t.rotateSpeed);const Le=t.domElement;Le&&($(2*Math.PI*x.x/Le.clientHeight),B(2*Math.PI*x.y/Le.clientHeight)),y.copy(w),t.update()}function j(_e){M.set(_e.clientX,_e.clientY),P.subVectors(M,k),P.y>0?ie(I()):P.y<0&&ce(I()),k.copy(M),t.update()}function K(_e){_.set(_e.clientX,_e.clientY),O.subVectors(_,S).multiplyScalar(t.panSpeed),Z(O.x,O.y),S.copy(_),t.update()}function X(_e){ge(_e),_e.deltaY<0?ce(I()):_e.deltaY>0&&ie(I()),t.update()}function F(_e){let Le=!1;switch(_e.code){case t.keys.UP:Z(0,t.keyPanSpeed),Le=!0;break;case t.keys.BOTTOM:Z(0,-t.keyPanSpeed),Le=!0;break;case t.keys.LEFT:Z(t.keyPanSpeed,0),Le=!0;break;case t.keys.RIGHT:Z(-t.keyPanSpeed,0),Le=!0;break}Le&&(_e.preventDefault(),t.update())}function te(){if(T.length==1)y.set(T[0].pageX,T[0].pageY);else{const _e=.5*(T[0].pageX+T[1].pageX),Le=.5*(T[0].pageY+T[1].pageY);y.set(_e,Le)}}function re(){if(T.length==1)S.set(T[0].pageX,T[0].pageY);else{const _e=.5*(T[0].pageX+T[1].pageX),Le=.5*(T[0].pageY+T[1].pageY);S.set(_e,Le)}}function H(){const _e=T[0].pageX-T[1].pageX,Le=T[0].pageY-T[1].pageY,me=Math.sqrt(_e*_e+Le*Le);k.set(0,me)}function q(){t.enableZoom&&H(),t.enablePan&&re()}function le(){t.enableZoom&&H(),t.enableRotate&&te()}function fe(_e){if(T.length==1)w.set(_e.pageX,_e.pageY);else{const me=sn(_e),Be=.5*(_e.pageX+me.x),Fe=.5*(_e.pageY+me.y);w.set(Be,Fe)}x.subVectors(w,y).multiplyScalar(t.rotateSpeed);const Le=t.domElement;Le&&($(2*Math.PI*x.x/Le.clientHeight),B(2*Math.PI*x.y/Le.clientHeight)),y.copy(w)}function be(_e){if(T.length==1)_.set(_e.pageX,_e.pageY);else{const Le=sn(_e),me=.5*(_e.pageX+Le.x),Be=.5*(_e.pageY+Le.y);_.set(me,Be)}O.subVectors(_,S).multiplyScalar(t.panSpeed),Z(O.x,O.y),S.copy(_)}function Me(_e){const Le=sn(_e),me=_e.pageX-Le.x,Be=_e.pageY-Le.y,Fe=Math.sqrt(me*me+Be*Be);M.set(0,Fe),P.set(0,Math.pow(M.y/k.y,t.zoomSpeed)),ie(P.y),k.copy(M)}function J(_e){t.enableZoom&&Me(_e),t.enablePan&&be(_e)}function Q(_e){t.enableZoom&&Me(_e),t.enableRotate&&fe(_e)}function ue(_e){var Le,me;t.enabled!==!1&&(T.length===0&&((Le=t.domElement)==null||Le.ownerDocument.addEventListener("pointermove",de),(me=t.domElement)==null||me.ownerDocument.addEventListener("pointerup",we)),Tt(_e),_e.pointerType==="touch"?Ge(_e):Xe(_e))}function de(_e){t.enabled!==!1&&(_e.pointerType==="touch"?it(_e):Ve(_e))}function we(_e){var Le,me,Be;ut(_e),T.length===0&&((Le=t.domElement)==null||Le.releasePointerCapture(_e.pointerId),(me=t.domElement)==null||me.ownerDocument.removeEventListener("pointermove",de),(Be=t.domElement)==null||Be.ownerDocument.removeEventListener("pointerup",we)),t.dispatchEvent(a),h=l.NONE}function Te(_e){ut(_e)}function Xe(_e){let Le;switch(_e.button){case 0:Le=t.mouseButtons.LEFT;break;case 1:Le=t.mouseButtons.MIDDLE;break;case 2:Le=t.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case $h.DOLLY:if(t.enableZoom===!1)return;he(_e),h=l.DOLLY;break;case $h.ROTATE:if(_e.ctrlKey||_e.metaKey||_e.shiftKey){if(t.enablePan===!1)return;Ce(_e),h=l.PAN}else{if(t.enableRotate===!1)return;Se(_e),h=l.ROTATE}break;case $h.PAN:if(_e.ctrlKey||_e.metaKey||_e.shiftKey){if(t.enableRotate===!1)return;Se(_e),h=l.ROTATE}else{if(t.enablePan===!1)return;Ce(_e),h=l.PAN}break;default:h=l.NONE}h!==l.NONE&&t.dispatchEvent(s)}function Ve(_e){if(t.enabled!==!1)switch(h){case l.ROTATE:if(t.enableRotate===!1)return;pe(_e);break;case l.DOLLY:if(t.enableZoom===!1)return;j(_e);break;case l.PAN:if(t.enablePan===!1)return;K(_e);break}}function ze(_e){t.enabled===!1||t.enableZoom===!1||h!==l.NONE&&h!==l.ROTATE||(t.dispatchEvent(s),X(_e),t.dispatchEvent(a))}function rt(_e){t.enabled===!1||t.enablePan===!1||F(_e)}function Ge(_e){switch(Ut(_e),T.length){case 1:switch(t.touches.ONE){case nl.ROTATE:if(t.enableRotate===!1)return;te(),h=l.TOUCH_ROTATE;break;case nl.PAN:if(t.enablePan===!1)return;re(),h=l.TOUCH_PAN;break;default:h=l.NONE}break;case 2:switch(t.touches.TWO){case nl.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;q(),h=l.TOUCH_DOLLY_PAN;break;case nl.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;le(),h=l.TOUCH_DOLLY_ROTATE;break;default:h=l.NONE}break;default:h=l.NONE}h!==l.NONE&&t.dispatchEvent(s)}function it(_e){switch(Ut(_e),h){case l.TOUCH_ROTATE:if(t.enableRotate===!1)return;fe(_e),t.update();break;case l.TOUCH_PAN:if(t.enablePan===!1)return;be(_e),t.update();break;case l.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;J(_e),t.update();break;case l.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Q(_e),t.update();break;default:h=l.NONE}}function kt(_e){t.enabled!==!1&&_e.preventDefault()}function Tt(_e){T.push(_e)}function ut(_e){delete N[_e.pointerId];for(let Le=0;Le<T.length;Le++)if(T[Le].pointerId==_e.pointerId){T.splice(Le,1);return}}function Ut(_e){let Le=N[_e.pointerId];Le===void 0&&(Le=new Qe,N[_e.pointerId]=Le),Le.set(_e.pageX,_e.pageY)}function sn(_e){const Le=_e.pointerId===T[0].pointerId?T[1]:T[0];return N[Le.pointerId]}n!==void 0&&this.connect(n),this.update()}}new pt;new ne;function OB(i,e,n){const t=n.length-i-1;if(e>=n[t])return t-1;if(e<=n[i])return i;let r=i,s=t,a=Math.floor((r+s)/2);for(;e<n[a]||e>=n[a+1];)e<n[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function kve(i,e,n,t){const r=[],s=[],a=[];r[0]=1;for(let l=1;l<=n;++l){s[l]=e-t[i+1-l],a[l]=t[i+l]-e;let h=0;for(let u=0;u<l;++u){const f=a[u+1],p=s[l-u],g=r[u]/(f+p);r[u]=h+f*g,h=p*g}r[l]=h}return r}function Tve(i,e,n,t){const r=OB(i,t,e),s=kve(r,t,i,e),a=new yn(0,0,0,0);for(let l=0;l<=i;++l){const h=n[r-i+l],u=s[l],f=h.w*u;a.x+=h.x*f,a.y+=h.y*f,a.z+=h.z*f,a.w+=h.w*u}return a}function Mve(i,e,n,t,r){const s=[];for(let p=0;p<=n;++p)s[p]=0;const a=[];for(let p=0;p<=t;++p)a[p]=s.slice(0);const l=[];for(let p=0;p<=n;++p)l[p]=s.slice(0);l[0][0]=1;const h=s.slice(0),u=s.slice(0);for(let p=1;p<=n;++p){h[p]=e-r[i+1-p],u[p]=r[i+p]-e;let g=0;for(let v=0;v<p;++v){const y=u[v+1],w=h[p-v];l[p][v]=y+w;const x=l[v][p-1]/l[p][v];l[v][p]=g+y*x,g=w*x}l[p][p]=g}for(let p=0;p<=n;++p)a[0][p]=l[p][n];for(let p=0;p<=n;++p){let g=0,v=1;const y=[];for(let w=0;w<=n;++w)y[w]=s.slice(0);y[0][0]=1;for(let w=1;w<=t;++w){let x=0;const S=p-w,_=n-w;p>=w&&(y[v][0]=y[g][0]/l[_+1][S],x=y[v][0]*l[S][_]);const O=S>=-1?1:-S,k=p-1<=_?w-1:n-p;for(let P=O;P<=k;++P)y[v][P]=(y[g][P]-y[g][P-1])/l[_+1][S+P],x+=y[v][P]*l[S+P][_];p<=_&&(y[v][w]=-y[g][w-1]/l[_+1][p],x+=y[v][w]*l[p][_]),a[w][p]=x;const M=g;g=v,v=M}}let f=n;for(let p=1;p<=t;++p){for(let g=0;g<=n;++g)a[p][g]*=f;f*=n-p}return a}function Eve(i,e,n,t,r){const s=r<i?r:i,a=[],l=OB(i,t,e),h=Mve(l,t,i,s,e),u=[];for(let f=0;f<n.length;++f){const p=n[f].clone(),g=p.w;p.x*=g,p.y*=g,p.z*=g,u[f]=p}for(let f=0;f<=s;++f){const p=u[l-i].clone().multiplyScalar(h[f][0]);for(let g=1;g<=i;++g)p.add(u[l-i+g].clone().multiplyScalar(h[f][g]));a[f]=p}for(let f=s+1;f<=r+1;++f)a[f]=new yn(0,0,0);return a}function Pve(i,e){let n=1;for(let r=2;r<=i;++r)n*=r;let t=1;for(let r=2;r<=e;++r)t*=r;for(let r=2;r<=i-e;++r)t*=r;return n/t}function Ave(i){const e=i.length,n=[],t=[];for(let s=0;s<e;++s){const a=i[s];n[s]=new ne(a.x,a.y,a.z),t[s]=a.w}const r=[];for(let s=0;s<e;++s){const a=n[s].clone();for(let l=1;l<=s;++l)a.sub(r[s-l].clone().multiplyScalar(Pve(s,l)*t[l]));r[s]=a.divideScalar(t[0])}return r}function Rve(i,e,n,t,r){const s=Eve(i,e,n,t,r);return Ave(s)}class UR extends Mo{constructor(e,n,t,r,s){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<t.length;++a){const l=t[a];this.controlPoints[a]=new yn(l.x,l.y,l.z,l.w)}}getPoint(e,n){const t=n||new ne,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Tve(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),t.set(s.x,s.y,s.z)}getTangent(e,n){const t=n||new ne,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Rve(this.degree,this.knots,this.controlPoints,r,1);return t.copy(s[1]).normalize(),t}}let Sn,Ni,vs;class Ive extends as{constructor(e){super(e)}load(e,n,t,r){const s=this,a=s.path===""?Cf.extractUrlBase(e):s.path,l=new ka(this.manager);l.setPath(s.path),l.setResponseType("arraybuffer"),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(h){try{n(s.parse(h,a))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},t,r)}parse(e,n){if(Bve(e))Sn=new Lve().parse(e);else{const r=SB(e);if(!Uve(r))throw new Error("THREE.FBXLoader: Unknown format.");if(FR(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+FR(r));Sn=new Vve().parse(r)}const t=new mT(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new Dve(t,this.manager).parse(Sn)}}class Dve{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){Ni=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),t=this.parseMaterials(n),r=this.parseDeformers(),s=new Nve().parse(r);return this.parseScene(r,s,t),vs}parseConnections(){const e=new Map;return"Connections"in Sn&&Sn.Connections.connections.forEach(function(n){const t=n[0],r=n[1],s=n[2];e.has(t)||e.set(t,{parents:[],children:[]});const a={ID:r,relationship:s};e.get(t).parents.push(a),e.has(r)||e.set(r,{parents:[],children:[]});const l={ID:t,relationship:s};e.get(r).children.push(l)}),e}parseImages(){const e={},n={};if("Video"in Sn.Objects){const t=Sn.Objects.Video;for(const r in t){const s=t[r],a=parseInt(r);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const l=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,h=typeof s.Content=="string"&&s.Content!=="";if(l||h){const u=this.parseImage(t[r]);n[s.RelativeFilename||s.Filename]=u}}}}for(const t in e){const r=e[t];n[r]!==void 0?e[t]=n[r]:e[t]=e[t].split("\\").pop()}return e}parseImage(e){const n=e.Content,t=e.RelativeFilename||e.Filename,r=t.slice(t.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",t),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof n=="string")return"data:"+s+";base64,"+n;{const a=new Uint8Array(n);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const n=new Map;if("Texture"in Sn.Objects){const t=Sn.Objects.Texture;for(const r in t){const s=this.parseTexture(t[r],e);n.set(parseInt(r),s)}}return n}parseTexture(e,n){const t=this.loadTexture(e,n);t.ID=e.id,t.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=r!==void 0?r.value:0,l=s!==void 0?s.value:0;if(t.wrapS=a===0?Lc:ts,t.wrapT=l===0?Lc:ts,"Scaling"in e){const h=e.Scaling.value;t.repeat.x=h[0],t.repeat.y=h[1]}return t}loadTexture(e,n){let t;const r=this.textureLoader.path,s=Ni.get(e.id).children;s!==void 0&&s.length>0&&n[s[0].ID]!==void 0&&(t=n[s[0].ID],(t.indexOf("blob:")===0||t.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const l=e.FileName.slice(-3).toLowerCase();if(l==="tga"){const h=this.manager.getHandler(".tga");h===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new hi):(h.setPath(this.textureLoader.path),a=h.load(t))}else l==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new hi):a=this.textureLoader.load(t);return this.textureLoader.setPath(r),a}parseMaterials(e){const n=new Map;if("Material"in Sn.Objects){const t=Sn.Objects.Material;for(const r in t){const s=this.parseMaterial(t[r],e);s!==null&&n.set(parseInt(r),s)}}return n}parseMaterial(e,n){const t=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Ni.has(t))return null;const a=this.parseParameters(e,n,t);let l;switch(s.toLowerCase()){case"phong":l=new mg;break;case"lambert":l=new hT;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),l=new mg;break}return l.setValues(a),l.name=r,l}parseParameters(e,n,t){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new nt().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new nt().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new nt().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new nt().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new nt().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new nt().fromArray(e.SpecularColor.value));const s=this;return Ni.get(t).children.forEach(function(a){const l=a.relationship;switch(l){case"Bump":r.bumpMap=s.getTexture(n,a.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(n,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(n,a.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(n,a.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(n,a.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(n,a.ID);break;case"ReflectionColor":r.envMap=s.getTexture(n,a.ID),r.envMap!==void 0&&(r.envMap.mapping=ff,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(n,a.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(n,a.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",l);break}}),r}getTexture(e,n){return"LayeredTexture"in Sn.Objects&&n in Sn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=Ni.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in Sn.Objects){const t=Sn.Objects.Deformer;for(const r in t){const s=t[r],a=Ni.get(parseInt(r));if(s.attrType==="Skin"){const l=this.parseSkeleton(a,t);l.ID=r,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=a.parents[0].ID,e[r]=l}else if(s.attrType==="BlendShape"){const l={id:r};l.rawTargets=this.parseMorphTargets(a,t),l.id=r,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[r]=l}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const t=[];return e.children.forEach(function(r){const s=n[r.ID];if(s.attrType!=="Cluster")return;const a={ID:r.ID,indices:[],weights:[],transformLink:new pt().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),t.push(a)}),{rawBones:t,bones:[]}}parseMorphTargets(e,n){const t=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],a=n[s.ID],l={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;l.geoID=Ni.get(parseInt(s.ID)).children.filter(function(h){return h.relationship===void 0})[0].ID,t.push(l)}return t}parseScene(e,n,t){vs=new al;const r=this.parseModels(e.skeletons,n,t),s=Sn.Objects.Model,a=this;r.forEach(function(h){const u=s[h.ID];a.setLookAtProperties(h,u),Ni.get(h.ID).parents.forEach(function(f){const p=r.get(f.ID);p!==void 0&&p.add(h)}),h.parent===null&&vs.add(h)}),this.bindSkeleton(e.skeletons,n,r),this.createAmbientLight(),vs.traverse(function(h){if(h.userData.transformData){h.parent&&(h.userData.transformData.parentMatrix=h.parent.matrix,h.userData.transformData.parentMatrixWorld=h.parent.matrixWorld);const u=wB(h.userData.transformData);h.applyMatrix4(u),h.updateWorldMatrix()}});const l=new $ve().parse();vs.children.length===1&&vs.children[0].isGroup&&(vs.children[0].animations=l,vs=vs.children[0]),vs.animations=l}parseModels(e,n,t){const r=new Map,s=Sn.Objects.Model;for(const a in s){const l=parseInt(a),h=s[a],u=Ni.get(l);let f=this.buildSkeleton(u,e,l,h.attrName);if(!f){switch(h.attrType){case"Camera":f=this.createCamera(u);break;case"Light":f=this.createLight(u);break;case"Mesh":f=this.createMesh(u,n,t);break;case"NurbsCurve":f=this.createCurve(u,n);break;case"LimbNode":case"Root":f=new Ug;break;case"Null":default:f=new al;break}f.name=h.attrName?pn.sanitizeNodeName(h.attrName):"",f.ID=l}this.getTransformData(f,h),r.set(l,f)}return r}buildSkeleton(e,n,t,r){let s=null;return e.parents.forEach(function(a){for(const l in n){const h=n[l];h.rawBones.forEach(function(u,f){if(u.ID===a.ID){const p=s;s=new Ug,s.matrixWorld.copy(u.transformLink),s.name=r?pn.sanitizeNodeName(r):"",s.ID=t,h.bones[f]=s,p!==null&&s.add(p)}})}}),s}createCamera(e){let n,t;if(e.children.forEach(function(r){const s=Sn.Objects.NodeAttribute[r.ID];s!==void 0&&(t=s)}),t===void 0)n=new An;else{let r=0;t.CameraProjectionType!==void 0&&t.CameraProjectionType.value===1&&(r=1);let s=1;t.NearPlane!==void 0&&(s=t.NearPlane.value/1e3);let a=1e3;t.FarPlane!==void 0&&(a=t.FarPlane.value/1e3);let l=window.innerWidth,h=window.innerHeight;t.AspectWidth!==void 0&&t.AspectHeight!==void 0&&(l=t.AspectWidth.value,h=t.AspectHeight.value);const u=l/h;let f=45;t.FieldOfView!==void 0&&(f=t.FieldOfView.value);const p=t.FocalLength?t.FocalLength.value:null;switch(r){case 0:n=new qn(f,u,s,a),p!==null&&n.setFocalLength(p);break;case 1:n=new bo(-l/2,l/2,h/2,-h/2,s,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),n=new An;break}}return n}createLight(e){let n,t;if(e.children.forEach(function(r){const s=Sn.Objects.NodeAttribute[r.ID];s!==void 0&&(t=s)}),t===void 0)n=new An;else{let r;t.LightType===void 0?r=0:r=t.LightType.value;let s=16777215;t.Color!==void 0&&(s=new nt().fromArray(t.Color.value));let a=t.Intensity===void 0?1:t.Intensity.value/100;t.CastLightOnObject!==void 0&&t.CastLightOnObject.value===0&&(a=0);let l=0;t.FarAttenuationEnd!==void 0&&(t.EnableFarAttenuation!==void 0&&t.EnableFarAttenuation.value===0?l=0:l=t.FarAttenuationEnd.value);const h=1;switch(r){case 0:n=new xb(s,a,l,h);break;case 1:n=new vT(s,a);break;case 2:let u=Math.PI/3;t.InnerAngle!==void 0&&(u=Nr.degToRad(t.InnerAngle.value));let f=0;t.OuterAngle!==void 0&&(f=Nr.degToRad(t.OuterAngle.value),f=Math.max(f,1)),n=new QO(s,a,l,u,f,h);break;default:console.warn("THREE.FBXLoader: Unknown light type "+t.LightType.value+", defaulting to a PointLight."),n=new xb(s,a);break}t.CastShadows!==void 0&&t.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,t){let r,s=null,a=null;const l=[];return e.children.forEach(function(h){n.has(h.ID)&&(s=n.get(h.ID)),t.has(h.ID)&&l.push(t.get(h.ID))}),l.length>1?a=l:l.length>0?a=l[0]:(a=new mg({color:13421772}),l.push(a)),"color"in s.attributes&&l.forEach(function(h){h.vertexColors=!0}),s.FBX_Deformer?(r=new tT(s,a),r.normalizeSkinWeights()):r=new Jn(s,a),r}createCurve(e,n){const t=e.children.reduce(function(s,a){return n.has(a.ID)&&(s=n.get(a.ID)),s},null),r=new Ur({color:3342591,linewidth:1});return new wl(t,r)}getTransformData(e,n){const t={};"InheritType"in n&&(t.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?t.eulerOrder=_B(n.RotationOrder.value):t.eulerOrder="ZYX","Lcl_Translation"in n&&(t.translation=n.Lcl_Translation.value),"PreRotation"in n&&(t.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(t.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(t.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(t.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(t.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(t.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(t.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(t.rotationPivot=n.RotationPivot.value),e.userData.transformData=t}setLookAtProperties(e,n){"LookAtProperty"in n&&Ni.get(e.ID).children.forEach(function(t){if(t.relationship==="LookAtProperty"){const r=Sn.Objects.Model[t.ID];if("Lcl_Translation"in r){const s=r.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),vs.add(e.target)):e.lookAt(new ne().fromArray(s))}}})}bindSkeleton(e,n,t){const r=this.parsePoseNodes();for(const s in e){const a=e[s];Ni.get(parseInt(a.ID)).parents.forEach(function(l){if(n.has(l.ID)){const h=l.ID;Ni.get(h).parents.forEach(function(u){t.has(u.ID)&&t.get(u.ID).bind(new M0(a.bones),r[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Sn.Objects){const n=Sn.Objects.Pose;for(const t in n)if(n[t].attrType==="BindPose"&&n[t].NbPoseNodes>0){const r=n[t].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new pt().fromArray(s.Matrix.a)}):e[r.Node]=new pt().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Sn&&"AmbientColor"in Sn.GlobalSettings){const e=Sn.GlobalSettings.AmbientColor.value,n=e[0],t=e[1],r=e[2];if(n!==0||t!==0||r!==0){const s=new nt(n,t,r);vs.add(new yT(s,1))}}}}class Nve{parse(e){const n=new Map;if("Geometry"in Sn.Objects){const t=Sn.Objects.Geometry;for(const r in t){const s=Ni.get(parseInt(r)),a=this.parseGeometry(s,t[r],e);n.set(parseInt(r),a)}}return n}parseGeometry(e,n,t){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,t);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,t){const r=t.skeletons,s=[],a=e.parents.map(function(p){return Sn.Objects.Model[p.ID]});if(a.length===0)return;const l=e.children.reduce(function(p,g){return r[g.ID]!==void 0&&(p=r[g.ID]),p},null);e.children.forEach(function(p){t.morphTargets[p.ID]!==void 0&&s.push(t.morphTargets[p.ID])});const h=a[0],u={};"RotationOrder"in h&&(u.eulerOrder=_B(h.RotationOrder.value)),"InheritType"in h&&(u.inheritType=parseInt(h.InheritType.value)),"GeometricTranslation"in h&&(u.translation=h.GeometricTranslation.value),"GeometricRotation"in h&&(u.rotation=h.GeometricRotation.value),"GeometricScaling"in h&&(u.scale=h.GeometricScaling.value);const f=wB(u);return this.genGeometry(n,l,s,f)}genGeometry(e,n,t,r){const s=new rn;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,n),l=this.genBuffers(a),h=new Ct(l.vertex,3);if(h.applyMatrix4(r),s.setAttribute("position",h),l.colors.length>0&&s.setAttribute("color",new Ct(l.colors,3)),n&&(s.setAttribute("skinIndex",new TO(l.weightsIndices,4)),s.setAttribute("skinWeight",new Ct(l.vertexWeights,4)),s.FBX_Deformer=n),l.normal.length>0){const u=new cn().getNormalMatrix(r),f=new Ct(l.normal,3);f.applyNormalMatrix(u),s.setAttribute("normal",f)}if(l.uvs.forEach(function(u,f){let p="uv"+(f+1).toString();f===0&&(p="uv"),s.setAttribute(p,new Ct(l.uvs[f],2))}),a.material&&a.material.mappingType!=="AllSame"){let u=l.materialIndex[0],f=0;if(l.materialIndex.forEach(function(p,g){p!==u&&(s.addGroup(f,g-f,u),u=p,f=g)}),s.groups.length>0){const p=s.groups[s.groups.length-1],g=p.start+p.count;g!==l.materialIndex.length&&s.addGroup(g,l.materialIndex.length-g,u)}s.groups.length===0&&s.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(s,e,t,r),s}parseGeoNode(e,n){const t={};if(t.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],t.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(t.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(t.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(t.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){t.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&t.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return t.weightTable={},n!==null&&(t.skeleton=n,n.rawBones.forEach(function(r,s){r.indices.forEach(function(a,l){t.weightTable[a]===void 0&&(t.weightTable[a]=[]),t.weightTable[a].push({id:s,weight:r.weights[l]})})})),t}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let t=0,r=0,s=!1,a=[],l=[],h=[],u=[],f=[],p=[];const g=this;return e.vertexIndices.forEach(function(v,y){let w,x=!1;v<0&&(v=v^-1,x=!0);let S=[],_=[];if(a.push(v*3,v*3+1,v*3+2),e.color){const O=e1(y,t,v,e.color);h.push(O[0],O[1],O[2])}if(e.skeleton){if(e.weightTable[v]!==void 0&&e.weightTable[v].forEach(function(O){_.push(O.weight),S.push(O.id)}),_.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const O=[0,0,0,0],k=[0,0,0,0];_.forEach(function(M,P){let D=M,A=S[P];k.forEach(function(R,T,N){if(D>R){N[T]=D,D=R;const L=O[T];O[T]=A,A=L}})}),S=O,_=k}for(;_.length<4;)_.push(0),S.push(0);for(let O=0;O<4;++O)f.push(_[O]),p.push(S[O])}if(e.normal){const O=e1(y,t,v,e.normal);l.push(O[0],O[1],O[2])}e.material&&e.material.mappingType!=="AllSame"&&(w=e1(y,t,v,e.material)[0]),e.uv&&e.uv.forEach(function(O,k){const M=e1(y,t,v,O);u[k]===void 0&&(u[k]=[]),u[k].push(M[0]),u[k].push(M[1])}),r++,x&&(g.genFace(n,e,a,w,l,h,u,f,p,r),t++,r=0,a=[],l=[],h=[],u=[],f=[],p=[])}),n}genFace(e,n,t,r,s,a,l,h,u,f){for(let p=2;p<f;p++)e.vertex.push(n.vertexPositions[t[0]]),e.vertex.push(n.vertexPositions[t[1]]),e.vertex.push(n.vertexPositions[t[2]]),e.vertex.push(n.vertexPositions[t[(p-1)*3]]),e.vertex.push(n.vertexPositions[t[(p-1)*3+1]]),e.vertex.push(n.vertexPositions[t[(p-1)*3+2]]),e.vertex.push(n.vertexPositions[t[p*3]]),e.vertex.push(n.vertexPositions[t[p*3+1]]),e.vertex.push(n.vertexPositions[t[p*3+2]]),n.skeleton&&(e.vertexWeights.push(h[0]),e.vertexWeights.push(h[1]),e.vertexWeights.push(h[2]),e.vertexWeights.push(h[3]),e.vertexWeights.push(h[(p-1)*4]),e.vertexWeights.push(h[(p-1)*4+1]),e.vertexWeights.push(h[(p-1)*4+2]),e.vertexWeights.push(h[(p-1)*4+3]),e.vertexWeights.push(h[p*4]),e.vertexWeights.push(h[p*4+1]),e.vertexWeights.push(h[p*4+2]),e.vertexWeights.push(h[p*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(p-1)*4]),e.weightsIndices.push(u[(p-1)*4+1]),e.weightsIndices.push(u[(p-1)*4+2]),e.weightsIndices.push(u[(p-1)*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3])),n.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(p-1)*3]),e.colors.push(a[(p-1)*3+1]),e.colors.push(a[(p-1)*3+2]),e.colors.push(a[p*3]),e.colors.push(a[p*3+1]),e.colors.push(a[p*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),n.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(p-1)*3]),e.normal.push(s[(p-1)*3+1]),e.normal.push(s[(p-1)*3+2]),e.normal.push(s[p*3]),e.normal.push(s[p*3+1]),e.normal.push(s[p*3+2])),n.uv&&n.uv.forEach(function(g,v){e.uvs[v]===void 0&&(e.uvs[v]=[]),e.uvs[v].push(l[v][0]),e.uvs[v].push(l[v][1]),e.uvs[v].push(l[v][(p-1)*2]),e.uvs[v].push(l[v][(p-1)*2+1]),e.uvs[v].push(l[v][p*2]),e.uvs[v].push(l[v][p*2+1])})}addMorphTargets(e,n,t,r){if(t.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;t.forEach(function(a){a.rawTargets.forEach(function(l){const h=Sn.Objects.Geometry[l.geoID];h!==void 0&&s.genMorphGeometry(e,n,h,r,l.name)})})}genMorphGeometry(e,n,t,r,s){const a=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],l=t.Vertices!==void 0?t.Vertices.a:[],h=t.Indexes!==void 0?t.Indexes.a:[],u=e.attributes.position.count*3,f=new Float32Array(u);for(let y=0;y<h.length;y++){const w=h[y]*3;f[w]=l[y*3],f[w+1]=l[y*3+1],f[w+2]=l[y*3+2]}const p={vertexIndices:a,vertexPositions:f},g=this.genBuffers(p),v=new Ct(g.vertex,3);v.name=s||t.attrName,v.applyMatrix4(r),e.morphAttributes.position.push(v)}parseNormals(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,r=e.Normals.a;let s=[];return t==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:n,referenceType:t}}parseUVs(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,r=e.UV.a;let s=[];return t==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:n,referenceType:t}}parseVertexColors(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,r=e.Colors.a;let s=[];return t==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:n,referenceType:t}}parseMaterialIndices(e){const n=e.MappingInformationType,t=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:t};const r=e.Materials.a,s=[];for(let a=0;a<r.length;++a)s.push(a);return{dataSize:1,buffer:r,indices:s,mappingType:n,referenceType:t}}parseNurbsGeometry(e){if(UR===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new rn;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new rn;const t=n-1,r=e.KnotVector.a,s=[],a=e.Points.a;for(let f=0,p=a.length;f<p;f+=4)s.push(new yn().fromArray(a,f));let l,h;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){l=t,h=r.length-1-l;for(let f=0;f<t;++f)s.push(s[f])}const u=new UR(t,r,s,l,h).getPoints(s.length*12);return new rn().setFromPoints(u)}}class $ve{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const t in n){const r=n[t],s=this.addClip(r);e.push(s)}return e}parseClips(){if(Sn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=Sn.Objects.AnimationCurveNode,n=new Map;for(const t in e){const r=e[t];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};n.set(s.id,s)}}return n}parseAnimationCurves(e){const n=Sn.Objects.AnimationCurve;for(const t in n){const r={id:n[t].id,times:n[t].KeyTime.a.map(zve),values:n[t].KeyValueFloat.a},s=Ni.get(r.id);if(s!==void 0){const a=s.parents[0].ID,l=s.parents[0].relationship;l.match(/X/)?e.get(a).curves.x=r:l.match(/Y/)?e.get(a).curves.y=r:l.match(/Z/)?e.get(a).curves.z=r:l.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=r)}}}parseAnimationLayers(e){const n=Sn.Objects.AnimationLayer,t=new Map;for(const r in n){const s=[],a=Ni.get(parseInt(r));a!==void 0&&(a.children.forEach(function(l,h){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[h]===void 0){const f=Ni.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(f!==void 0){const p=Sn.Objects.Model[f.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const g={modelName:p.attrName?pn.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};vs.traverse(function(v){v.ID===p.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new pt),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),s[h]=g}}s[h]&&(s[h][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[h]===void 0){const f=Ni.get(l.ID).parents.filter(function(x){return x.relationship!==void 0})[0].ID,p=Ni.get(f).parents[0].ID,g=Ni.get(p).parents[0].ID,v=Ni.get(g).parents[0].ID,y=Sn.Objects.Model[v],w={modelName:y.attrName?pn.sanitizeNodeName(y.attrName):"",morphName:Sn.Objects.Deformer[f].attrName};s[h]=w}s[h][u.attr]=u}}}),t.set(parseInt(r),s))}return t}parseAnimStacks(e){const n=Sn.Objects.AnimationStack,t={};for(const r in n){const s=Ni.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);t[r]={name:n[r].attrName,layer:a}}return t}addClip(e){let n=[];const t=this;return e.layer.forEach(function(r){n=n.concat(t.generateTracks(r))}),new Sf(e.name,-1,n)}generateTracks(e){const n=[];let t=new ne,r=new Wi,s=new ne;if(e.transform&&e.transform.decompose(t,r,s),t=t.toArray(),r=new tr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,t,"position");a!==void 0&&n.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&n.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");a!==void 0&&n.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&n.push(a)}return n}generateVectorTrack(e,n,t,r){const s=this.getTimesForAllAxes(n),a=this.getKeyframeTrackValues(s,n,t);return new _f(e+"."+r,s,a)}generateRotationTrack(e,n,t,r,s,a){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(Nr.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(Nr.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(Nr.degToRad));const l=this.getTimesForAllAxes(n),h=this.getKeyframeTrackValues(l,n,t);r!==void 0&&(r=r.map(Nr.degToRad),r.push(a),r=new tr().fromArray(r),r=new Wi().setFromEuler(r)),s!==void 0&&(s=s.map(Nr.degToRad),s.push(a),s=new tr().fromArray(s),s=new Wi().setFromEuler(s).invert());const u=new Wi,f=new tr,p=[];for(let g=0;g<h.length;g+=3)f.set(h[g],h[g+1],h[g+2],a),u.setFromEuler(f),r!==void 0&&u.premultiply(r),s!==void 0&&u.multiply(s),u.toArray(p,g/3*4);return new Mu(e+".quaternion",l,p)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,t=n.values.map(function(s){return s/100}),r=vs.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new wf(e.modelName+".morphTargetInfluences["+r+"]",n.times,t)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(t,r){return t-r}),n.length>1){let t=1,r=n[0];for(let s=1;s<n.length;s++){const a=n[s];a!==r&&(n[t]=a,r=a,t++)}n=n.slice(0,t)}return n}getKeyframeTrackValues(e,n,t){const r=t,s=[];let a=-1,l=-1,h=-1;return e.forEach(function(u){if(n.x&&(a=n.x.times.indexOf(u)),n.y&&(l=n.y.times.indexOf(u)),n.z&&(h=n.z.times.indexOf(u)),a!==-1){const f=n.x.values[a];s.push(f),r[0]=f}else s.push(r[0]);if(l!==-1){const f=n.y.values[l];s.push(f),r[1]=f}else s.push(r[1]);if(h!==-1){const f=n.z.values[h];s.push(f),r[2]=f}else s.push(r[2])}),s}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const t=e.values[n-1],r=e.values[n]-t,s=Math.abs(r);if(s>=180){const a=s/180,l=r/a;let h=t+l;const u=e.times[n-1],f=(e.times[n]-u)/a;let p=u+f;const g=[],v=[];for(;p<e.times[n];)g.push(p),p+=f,v.push(h),h+=l;e.times=XR(e.times,n,g),e.values=XR(e.values,n,v)}}}}class Vve{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new xB,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,t=e.split(/[\r\n]+/);return t.forEach(function(r,s){const a=r.match(/^[\s\t]*;/),l=r.match(/^[\s\t]*$/);if(a||l)return;const h=r.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=r.match("^\\t{"+(n.currentIndent-1)+"}}");h?n.parseNodeBegin(r,h):u?n.parseNodeProperty(r,u,t[++s]):f?n.popStack():r.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,n){const t=n[1].trim().replace(/^"/,"").replace(/"$/,""),r=n[2].split(",").map(function(h){return h.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:t},a=this.parseNodeAttr(r),l=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(t,s):t in l?(t==="PoseNode"?l.PoseNode.push(s):l[t].id!==void 0&&(l[t]={},l[t][l[t].id]=l[t]),a.id!==""&&(l[t][a.id]=s)):typeof a.id=="number"?(l[t]={},l[t][a.id]=s):t!=="Properties70"&&(t==="PoseNode"?l[t]=[s]:l[t]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let t="",r="";return e.length>1&&(t=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:n,name:t,type:r}}parseNodeProperty(e,n,t){let r=n[1].replace(/^"/,"").replace(/"$/,"").trim(),s=n[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=t.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),h=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",s=[h,u],Xve(s,f),a[r]===void 0&&(a[r]=[])}r==="Node"&&(a.id=s),r in a&&Array.isArray(a[r])?a[r].push(s):r!=="a"?a[r]=s:a.a=s,this.setCurrentProp(a,r),r==="a"&&s.slice(-1)!==","&&(a.a=q_(s))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=q_(n.a))}parseNodeSpecialProperty(e,n,t){const r=t.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],a=r[1],l=r[2],h=r[3];let u=r[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=q_(u);break}this.getPrevNode()[s]={type:a,type2:l,flag:h,value:u},this.setCurrentProp(this.getPrevNode(),s)}}class Lve{parse(e){const n=new zR(e);n.skip(23);const t=n.getUint32();if(t<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+t);const r=new xB;for(;!this.endOfContent(n);){const s=this.parseNode(n,t);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const t={},r=n>=7500?e.getUint64():e.getUint32(),s=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),l=e.getString(a);if(r===0)return null;const h=[];for(let g=0;g<s;g++)h.push(this.parseProperty(e));const u=h.length>0?h[0]:"",f=h.length>1?h[1]:"",p=h.length>2?h[2]:"";for(t.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const g=this.parseNode(e,n);g!==null&&this.parseSubNode(l,t,g)}return t.propertyList=h,typeof u=="number"&&(t.id=u),f!==""&&(t.attrName=f),p!==""&&(t.attrType=p),l!==""&&(t.name=l),t}parseSubNode(e,n,t){if(t.singleProperty===!0){const r=t.propertyList[0];Array.isArray(r)?(n[t.name]=t,t.a=r):n[t.name]=r}else if(e==="Connections"&&t.name==="C"){const r=[];t.propertyList.forEach(function(s,a){a!==0&&r.push(s)}),n.connections===void 0&&(n.connections=[]),n.connections.push(r)}else if(t.name==="Properties70")Object.keys(t).forEach(function(r){n[r]=t[r]});else if(e==="Properties70"&&t.name==="P"){let r=t.propertyList[0],s=t.propertyList[1];const a=t.propertyList[2],l=t.propertyList[3];let h;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?h=[t.propertyList[4],t.propertyList[5],t.propertyList[6]]:h=t.propertyList[4],n[r]={type:s,type2:a,flag:l,value:h}}else n[t.name]===void 0?typeof t.id=="number"?(n[t.name]={},n[t.name][t.id]=t):n[t.name]=t:t.name==="PoseNode"?(Array.isArray(n[t.name])||(n[t.name]=[n[t.name]]),n[t.name].push(t)):n[t.name][t.id]===void 0&&(n[t.name][t.id]=t)}parseProperty(e){const n=e.getString(1);let t;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(n){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const l=bve(new Uint8Array(e.getArrayBuffer(a))),h=new zR(l.buffer);switch(n){case"b":case"c":return h.getBooleanArray(r);case"d":return h.getFloat64Array(r);case"f":return h.getFloat32Array(r);case"i":return h.getInt32Array(r);case"l":return h.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class zR{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let t=0;t<e;t++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let r=0;r<e;r++)n[r]=this.getUint8();const t=n.indexOf(0);return t>=0&&(n=n.slice(0,t)),Cf.decodeText(new Uint8Array(n))}}class xB{add(e,n){this[e]=n}}function Bve(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===SB(i,0,e.length)}function Uve(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function t(r){const s=i[r-1];return i=i.slice(n+r),n++,s}for(let r=0;r<e.length;++r)if(t(1)===e[r])return!1;return!0}function FR(i){const e=/FBXVersion: (\d+)/,n=i.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function zve(i){return i/46186158e3}const Fve=[];function e1(i,e,n,t){let r;switch(t.mappingType){case"ByPolygonVertex":r=i;break;case"ByPolygon":r=e;break;case"ByVertice":r=n;break;case"AllSame":r=t.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+t.mappingType)}t.referenceType==="IndexToDirect"&&(r=t.indices[r]);const s=r*t.dataSize,a=s+t.dataSize;return Wve(Fve,t.buffer,s,a)}const j_=new tr,Sd=new ne;function wB(i){const e=new pt,n=new pt,t=new pt,r=new pt,s=new pt,a=new pt,l=new pt,h=new pt,u=new pt,f=new pt,p=new pt,g=new pt,v=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(Sd.fromArray(i.translation)),i.preRotation){const T=i.preRotation.map(Nr.degToRad);T.push(i.eulerOrder),n.makeRotationFromEuler(j_.fromArray(T))}if(i.rotation){const T=i.rotation.map(Nr.degToRad);T.push(i.eulerOrder),t.makeRotationFromEuler(j_.fromArray(T))}if(i.postRotation){const T=i.postRotation.map(Nr.degToRad);T.push(i.eulerOrder),r.makeRotationFromEuler(j_.fromArray(T)),r.invert()}i.scale&&s.scale(Sd.fromArray(i.scale)),i.scalingOffset&&l.setPosition(Sd.fromArray(i.scalingOffset)),i.scalingPivot&&a.setPosition(Sd.fromArray(i.scalingPivot)),i.rotationOffset&&h.setPosition(Sd.fromArray(i.rotationOffset)),i.rotationPivot&&u.setPosition(Sd.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(p.copy(i.parentMatrix),f.copy(i.parentMatrixWorld));const y=n.clone().multiply(t).multiply(r),w=new pt;w.extractRotation(f);const x=new pt;x.copyPosition(f);const S=x.clone().invert().multiply(f),_=w.clone().invert().multiply(S),O=s,k=new pt;if(v===0)k.copy(w).multiply(y).multiply(_).multiply(O);else if(v===1)k.copy(w).multiply(_).multiply(y).multiply(O);else{const T=new pt().scale(new ne().setFromMatrixScale(p)).clone().invert(),N=_.clone().multiply(T);k.copy(w).multiply(y).multiply(N).multiply(O)}const M=u.clone().invert(),P=a.clone().invert();let D=e.clone().multiply(h).multiply(u).multiply(n).multiply(t).multiply(r).multiply(M).multiply(l).multiply(a).multiply(s).multiply(P);const A=new pt().copyPosition(D),R=f.clone().multiply(A);return g.copyPosition(R),D=g.clone().multiply(k),D.premultiply(f.invert()),D}function _B(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function q_(i){return i.split(",").map(function(e){return parseFloat(e)})}function SB(i,e,n){return e===void 0&&(e=0),n===void 0&&(n=i.byteLength),Cf.decodeText(new Uint8Array(i,e,n))}function Xve(i,e){for(let n=0,t=i.length,r=e.length;n<r;n++,t++)i[t]=e[n]}function Wve(i,e,n,t){for(let r=n,s=0;r<t;r++,s++)i[s]=e[r];return i}function XR(i,e,n){return i.slice(0,e).concat(n).concat(i.slice(e))}var Qve=Object.defineProperty,Hve=(i,e,n)=>e in i?Qve(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,nM=(i,e,n)=>(Hve(i,typeof e!="symbol"?e+"":e,n),n);class CB{constructor(e){nM(this,"data"),this.data=e}generateShapes(e,n=100,t){const r=[],s={letterSpacing:0,lineHeight:1,...t},a=Gve(e,n,this.data,s);for(let l=0,h=a.length;l<h;l++)Array.prototype.push.apply(r,a[l].toShapes(!1));return r}}nM(CB,"isFont");nM(CB,"type");function Gve(i,e,n,t){const r=Array.from(i),s=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,l=[];let h=0,u=0;for(let f=0;f<r.length;f++){const p=r[f];if(p===`
`)h=0,u-=a*t.lineHeight;else{const g=Yve(p,s,h,u,n);g&&(h+=g.offsetX+t.letterSpacing,l.push(g.path))}}return l}function Yve(i,e,n,t,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const a=new r8;let l,h,u,f,p,g,v,y;if(s.o){const w=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let x=0,S=w.length;x<S;)switch(w[x++]){case"m":l=parseInt(w[x++])*e+n,h=parseInt(w[x++])*e+t,a.moveTo(l,h);break;case"l":l=parseInt(w[x++])*e+n,h=parseInt(w[x++])*e+t,a.lineTo(l,h);break;case"q":u=parseInt(w[x++])*e+n,f=parseInt(w[x++])*e+t,p=parseInt(w[x++])*e+n,g=parseInt(w[x++])*e+t,a.quadraticCurveTo(p,g,u,f);break;case"b":u=parseInt(w[x++])*e+n,f=parseInt(w[x++])*e+t,p=parseInt(w[x++])*e+n,g=parseInt(w[x++])*e+t,v=parseInt(w[x++])*e+n,y=parseInt(w[x++])*e+t,a.bezierCurveTo(p,g,v,y,u,f);break}}return{offsetX:s.ha*e,path:a}}class Kg extends Jn{constructor(e,n={}){super(e),this.isReflector=!0,this.type="Reflector",this.camera=new qn;const t=this,r=n.color!==void 0?new nt(n.color):new nt(8355711),s=n.textureWidth||512,a=n.textureHeight||512,l=n.clipBias||0,h=n.shader||Kg.ReflectorShader,u=n.multisample!==void 0?n.multisample:4,f=new ma,p=new ne,g=new ne,v=new ne,y=new pt,w=new ne(0,0,-1),x=new yn,S=new ne,_=new ne,O=new yn,k=new pt,M=this.camera,P=new Co(s,a,{samples:u,type:zf}),D=new os({name:h.name!==void 0?h.name:"unspecified",uniforms:_0.clone(h.uniforms),fragmentShader:h.fragmentShader,vertexShader:h.vertexShader});D.uniforms.tDiffuse.value=P.texture,D.uniforms.color.value=r,D.uniforms.textureMatrix.value=k,this.material=D,this.onBeforeRender=function(A,R,T){if(g.setFromMatrixPosition(t.matrixWorld),v.setFromMatrixPosition(T.matrixWorld),y.extractRotation(t.matrixWorld),p.set(0,0,1),p.applyMatrix4(y),S.subVectors(g,v),S.dot(p)>0)return;S.reflect(p).negate(),S.add(g),y.extractRotation(T.matrixWorld),w.set(0,0,-1),w.applyMatrix4(y),w.add(v),_.subVectors(g,w),_.reflect(p).negate(),_.add(g),M.position.copy(S),M.up.set(0,1,0),M.up.applyMatrix4(y),M.up.reflect(p),M.lookAt(_),M.far=T.far,M.updateMatrixWorld(),M.projectionMatrix.copy(T.projectionMatrix),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(M.projectionMatrix),k.multiply(M.matrixWorldInverse),k.multiply(t.matrixWorld),f.setFromNormalAndCoplanarPoint(p,g),f.applyMatrix4(M.matrixWorldInverse),x.set(f.normal.x,f.normal.y,f.normal.z,f.constant);const N=M.projectionMatrix;O.x=(Math.sign(x.x)+N.elements[8])/N.elements[0],O.y=(Math.sign(x.y)+N.elements[9])/N.elements[5],O.z=-1,O.w=(1+N.elements[10])/N.elements[14],x.multiplyScalar(2/x.dot(O)),N.elements[2]=x.x,N.elements[6]=x.y,N.elements[10]=x.z+1-l,N.elements[14]=x.w,t.visible=!1;const L=A.getRenderTarget(),I=A.xr.enabled,$=A.shadowMap.autoUpdate;A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(P),A.state.buffers.depth.setMask(!0),A.autoClear===!1&&A.clear(),A.render(R,M),A.xr.enabled=I,A.shadowMap.autoUpdate=$,A.setRenderTarget(L);const B=T.viewport;B!==void 0&&A.state.viewport(B),t.visible=!0},this.getRenderTarget=function(){return P},this.dispose=function(){P.dispose(),t.material.dispose()}}}Kg.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const jve=["args","material-uniforms-color-value"],qve=jt("TresPlaneGeometry",{args:[5,5]},null,-1);Kg.ReflectorShader;function Zve(i){return lO()?(lk(i),!0):!1}function kB(i){return typeof i=="function"?i():an(i)}const Kve=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Jve=Object.prototype.toString,eye=i=>Jve.call(i)==="[object Object]",tye=()=>{};function nye(i){var e;const n=kB(i);return(e=n==null?void 0:n.$el)!=null?e:n}const iye=Kve?window:void 0;function Z_(...i){let e,n,t,r;if(typeof i[0]=="string"||Array.isArray(i[0])?([n,t,r]=i,e=iye):[e,n,t,r]=i,!e)return tye;Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const s=[],a=()=>{s.forEach(f=>f()),s.length=0},l=(f,p,g,v)=>(f.addEventListener(p,g,v),()=>f.removeEventListener(p,g,v)),h=Fn(()=>[nye(e),kB(r)],([f,p])=>{if(a(),!f)return;const g=eye(p)?{...p}:p;s.push(...n.flatMap(v=>t.map(y=>l(f,v,y,g))))},{immediate:!0,flush:"post"}),u=()=>{h(),a()};return Zve(u),u}class kb extends Jn{constructor(){super(kb.Geometry,new Aa({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new ne,n=new ne,t=new UC(16,16),r=new UC(16,16);let s=qo;const a=kb.Geometry,l=new pg({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),h=new pg({uniforms:{map:{value:t},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),u=new Jn(a,l),f=[],p=TB.Shader,g=new pg({name:p.name,uniforms:{map:{value:null},occlusionMap:{value:r},color:{value:new nt(16777215)},scale:{value:new Qe},screenPosition:{value:new ne}},vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:mb,transparent:!0,depthWrite:!1}),v=new Jn(a,g);this.addElement=function(_){f.push(_)};const y=new Qe,w=new Qe,x=new t8,S=new yn;this.onBeforeRender=function(_,O,k){_.getCurrentViewport(S);const M=_.getRenderTarget(),P=M!==null?M.texture.type:qo;s!==P&&(t.dispose(),r.dispose(),t.type=r.type=P,s=P);const D=S.w/S.z,A=S.z/2,R=S.w/2;let T=16/S.w;if(y.set(T*D,T),x.min.set(S.x,S.y),x.max.set(S.x+(S.z-16),S.y+(S.w-16)),n.setFromMatrixPosition(this.matrixWorld),n.applyMatrix4(k.matrixWorldInverse),!(n.z>0)&&(e.copy(n).applyMatrix4(k.projectionMatrix),w.x=S.x+e.x*A+A-8,w.y=S.y+e.y*R+R-8,x.containsPoint(w))){_.copyFramebufferToTexture(w,t);let N=l.uniforms;N.scale.value=y,N.screenPosition.value=e,_.renderBufferDirect(k,null,a,l,u,null),_.copyFramebufferToTexture(w,r),N=h.uniforms,N.scale.value=y,N.screenPosition.value=e,_.renderBufferDirect(k,null,a,h,u,null);const L=-e.x*2,I=-e.y*2;for(let $=0,B=f.length;$<B;$++){const U=f[$],Y=g.uniforms;Y.color.value.copy(U.color),Y.map.value=U.texture,Y.screenPosition.value.x=e.x+L*U.distance,Y.screenPosition.value.y=e.y+I*U.distance,T=U.size/S.w;const Z=S.w/S.z;Y.scale.value.set(T*Z,T),g.uniformsNeedUpdate=!0,_.renderBufferDirect(k,null,a,g,v,null)}}},this.dispose=function(){l.dispose(),h.dispose(),g.dispose(),t.dispose(),r.dispose();for(let _=0,O=f.length;_<O;_++)f[_].texture.dispose()}}}class TB{constructor(e,n=1,t=0,r=new nt(16777215)){this.texture=e,this.size=n,this.distance=t,this.color=r}}TB.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};kb.Geometry=function(){const i=new rn,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),n=new T0(e,5);return i.setIndex([0,1,2,0,2,3]),i.setAttribute("position",new xl(n,3,0,!1)),i.setAttribute("uv",new xl(n,2,3,!1)),i}();Nr.clamp;Nr.lerp;async function rye(i){return await Ufe(Ive,i)}const sye=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","args"],iM=yl({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number.NEGATIVE_INFINITY},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number.POSITIVE_INFINITY},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{default:()=>({ONE:nl.ROTATE,TWO:nl.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start","end"],setup(i,{expose:e,emit:n}){const t=i,r=n,{makeDefault:s,autoRotate:a,autoRotateSpeed:l,enableDamping:h,dampingFactor:u,enablePan:f,keyPanSpeed:p,maxAzimuthAngle:g,minAzimuthAngle:v,maxPolarAngle:y,minPolarAngle:w,minDistance:x,maxDistance:S,minZoom:_,maxZoom:O,enableZoom:k,zoomSpeed:M,enableRotate:P,touches:D,rotateSpeed:A,target:R}=v0(t),{camera:T,renderer:N,extend:L,controls:I}=TT(),$=at(null);L({OrbitControls:Cve}),Fn($,Y=>{B(),Y&&s.value?I.value=Y:I.value=null});function B(){Z_($.value,"change",()=>r("change",$.value)),Z_($.value,"start",()=>r("start",$.value)),Z_($.value,"end",()=>r("end",$.value))}const{onLoop:U}=Pu();return U(()=>{$.value&&(h.value||a.value)&&$.value.update()}),To(()=>{$.value&&$.value.dispose()}),e({value:$}),(Y,Z)=>(Y.camera||an(T))&&(Y.domElement||an(N))?(mn(),xi("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:$,target:an(R),"auto-rotate":an(a),"auto-rotate-speed":an(l),"enable-damping":an(h),"damping-factor":an(u),"enable-pan":an(f),"key-pan-speed":an(p),keys:Y.keys,"max-azimuth-angle":an(g),"min-azimuth-angle":an(v),"max-polar-angle":an(y),"min-polar-angle":an(w),"min-distance":an(x),"max-distance":an(S),"min-zoom":an(_),"max-zoom":an(O),touches:an(D),"enable-zoom":an(k),"zoom-speed":an(M),"enable-rotate":an(P),"rotate-speed":an(A),args:[Y.camera||an(T),Y.domElement||an(N).domElement]},null,8,sye)):Ek("",!0)}});var K_;/Mac/.test((K_=globalThis==null?void 0:globalThis.navigator)===null||K_===void 0?void 0:K_.platform);var oye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t1(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aye={exports:{}};(function(i,e){(function(n){i.exports=n()})(function(){return function n(t,r,s){function a(u,f){if(!r[u]){if(!t[u]){var p=typeof t1=="function"&&t1;if(!f&&p)return p(u,!0);if(l)return l(u,!0);throw new Error("Cannot find module '"+u+"'")}f=r[u]={exports:{}},t[u][0].call(f.exports,function(g){var v=t[u][1][g];return a(v||g)},f,f.exports,n,t,r,s)}return r[u].exports}for(var l=typeof t1=="function"&&t1,h=0;h<s.length;h++)a(s[h]);return a}({1:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){var y=n("crypto");function w(P,D){D=_(P,D);var A;return(A=D.algorithm!=="passthrough"?y.createHash(D.algorithm):new M).write===void 0&&(A.write=A.update,A.end=A.update),k(D,A).dispatch(P),A.update||A.end(""),A.digest?A.digest(D.encoding==="buffer"?void 0:D.encoding):(P=A.read(),D.encoding!=="buffer"?P.toString(D.encoding):P)}(r=t.exports=w).sha1=function(P){return w(P)},r.keys=function(P){return w(P,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(P){return w(P,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(P){return w(P,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=y.getHashes?y.getHashes().slice():["sha1","md5"],S=(x.push("passthrough"),["buffer","hex","binary","base64"]);function _(P,D){var A={};if(A.algorithm=(D=D||{}).algorithm||"sha1",A.encoding=D.encoding||"hex",A.excludeValues=!!D.excludeValues,A.algorithm=A.algorithm.toLowerCase(),A.encoding=A.encoding.toLowerCase(),A.ignoreUnknown=D.ignoreUnknown===!0,A.respectType=D.respectType!==!1,A.respectFunctionNames=D.respectFunctionNames!==!1,A.respectFunctionProperties=D.respectFunctionProperties!==!1,A.unorderedArrays=D.unorderedArrays===!0,A.unorderedSets=D.unorderedSets!==!1,A.unorderedObjects=D.unorderedObjects!==!1,A.replacer=D.replacer||void 0,A.excludeKeys=D.excludeKeys||void 0,P===void 0)throw new Error("Object argument required.");for(var R=0;R<x.length;++R)x[R].toLowerCase()===A.algorithm.toLowerCase()&&(A.algorithm=x[R]);if(x.indexOf(A.algorithm)===-1)throw new Error('Algorithm "'+A.algorithm+'"  not supported. supported values: '+x.join(", "));if(S.indexOf(A.encoding)===-1&&A.algorithm!=="passthrough")throw new Error('Encoding "'+A.encoding+'"  not supported. supported values: '+S.join(", "));return A}function O(P){if(typeof P=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(P))!=null}function k(P,D,A){A=A||[];function R(T){return D.update?D.update(T,"utf8"):D.write(T,"utf8")}return{dispatch:function(T){return this["_"+((T=P.replacer?P.replacer(T):T)===null?"null":typeof T)](T)},_object:function(T){var N,L=Object.prototype.toString.call(T),I=/\[object (.*)\]/i.exec(L);if(I=(I=I?I[1]:"unknown:["+L+"]").toLowerCase(),0<=(L=A.indexOf(T)))return this.dispatch("[CIRCULAR:"+L+"]");if(A.push(T),l!==void 0&&l.isBuffer&&l.isBuffer(T))return R("buffer:"),R(T);if(I==="object"||I==="function"||I==="asyncfunction")return L=Object.keys(T),P.unorderedObjects&&(L=L.sort()),P.respectType===!1||O(T)||L.splice(0,0,"prototype","__proto__","constructor"),P.excludeKeys&&(L=L.filter(function($){return!P.excludeKeys($)})),R("object:"+L.length+":"),N=this,L.forEach(function($){N.dispatch($),R(":"),P.excludeValues||N.dispatch(T[$]),R(",")});if(!this["_"+I]){if(P.ignoreUnknown)return R("["+I+"]");throw new Error('Unknown object type "'+I+'"')}this["_"+I](T)},_array:function(T,$){$=$!==void 0?$:P.unorderedArrays!==!1;var L=this;if(R("array:"+T.length+":"),!$||T.length<=1)return T.forEach(function(B){return L.dispatch(B)});var I=[],$=T.map(function(B){var U=new M,Y=A.slice();return k(P,U,Y).dispatch(B),I=I.concat(Y.slice(A.length)),U.read().toString()});return A=A.concat(I),$.sort(),this._array($,!1)},_date:function(T){return R("date:"+T.toJSON())},_symbol:function(T){return R("symbol:"+T.toString())},_error:function(T){return R("error:"+T.toString())},_boolean:function(T){return R("bool:"+T.toString())},_string:function(T){R("string:"+T.length+":"),R(T.toString())},_function:function(T){R("fn:"),O(T)?this.dispatch("[native]"):this.dispatch(T.toString()),P.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(T.name)),P.respectFunctionProperties&&this._object(T)},_number:function(T){return R("number:"+T.toString())},_xml:function(T){return R("xml:"+T.toString())},_null:function(){return R("Null")},_undefined:function(){return R("Undefined")},_regexp:function(T){return R("regex:"+T.toString())},_uint8array:function(T){return R("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return R("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return R("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return R("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return R("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return R("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return R("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return R("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return R("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return R("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return R("url:"+T.toString())},_map:function(T){return R("map:"),T=Array.from(T),this._array(T,P.unorderedSets!==!1)},_set:function(T){return R("set:"),T=Array.from(T),this._array(T,P.unorderedSets!==!1)},_file:function(T){return R("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(P.ignoreUnknown)return R("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return R("domwindow")},_bigint:function(T){return R("bigint:"+T.toString())},_process:function(){return R("process")},_timer:function(){return R("timer")},_pipe:function(){return R("pipe")},_tcp:function(){return R("tcp")},_udp:function(){return R("udp")},_tty:function(){return R("tty")},_statwatcher:function(){return R("statwatcher")},_securecontext:function(){return R("securecontext")},_connection:function(){return R("connection")},_zlib:function(){return R("zlib")},_context:function(){return R("context")},_nodescript:function(){return R("nodescript")},_httpparser:function(){return R("httpparser")},_dataview:function(){return R("dataview")},_signal:function(){return R("signal")},_fsevent:function(){return R("fsevent")},_tlswrap:function(){return R("tlswrap")}}}function M(){return{buf:"",write:function(P){this.buf+=P},end:function(P){this.buf+=P},read:function(){return this.buf}}}r.writeToStream=function(P,D,A){return A===void 0&&(A=D,D={}),k(D=_(P,D),A).dispatch(P)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){(function(y){var w=typeof Uint8Array<"u"?Uint8Array:Array,x=43,S=47,_=48,O=97,k=65,M=45,P=95;function D(A){return A=A.charCodeAt(0),A===x||A===M?62:A===S||A===P?63:A<_?-1:A<_+10?A-_+26+26:A<k+26?A-k:A<O+26?A-O+26:void 0}y.toByteArray=function(A){var R,T;if(0<A.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var N=A.length,N=A.charAt(N-2)==="="?2:A.charAt(N-1)==="="?1:0,L=new w(3*A.length/4-N),I=0<N?A.length-4:A.length,$=0;function B(U){L[$++]=U}for(R=0;R<I;R+=4,0)B((16711680&(T=D(A.charAt(R))<<18|D(A.charAt(R+1))<<12|D(A.charAt(R+2))<<6|D(A.charAt(R+3))))>>16),B((65280&T)>>8),B(255&T);return N==2?B(255&(T=D(A.charAt(R))<<2|D(A.charAt(R+1))>>4)):N==1&&(B((T=D(A.charAt(R))<<10|D(A.charAt(R+1))<<4|D(A.charAt(R+2))>>2)>>8&255),B(255&T)),L},y.fromByteArray=function(A){var R,T,N,L,I=A.length%3,$="";function B(U){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(U)}for(R=0,N=A.length-I;R<N;R+=3)T=(A[R]<<16)+(A[R+1]<<8)+A[R+2],$+=B((L=T)>>18&63)+B(L>>12&63)+B(L>>6&63)+B(63&L);switch(I){case 1:$=($+=B((T=A[A.length-1])>>2))+B(T<<4&63)+"==";break;case 2:$=($=($+=B((T=(A[A.length-2]<<8)+A[A.length-1])>>10))+B(T>>4&63))+B(T<<2&63)+"="}return $}})(r===void 0?this.base64js={}:r)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,t,r){(function(s,a,x,h,u,f,p,g,v){var y=n("base64-js"),w=n("ieee754");function x(X,F,te){if(!(this instanceof x))return new x(X,F,te);var re,H,q,le,fe=typeof X;if(F==="base64"&&fe=="string")for(X=(le=X).trim?le.trim():le.replace(/^\s+|\s+$/g,"");X.length%4!=0;)X+="=";if(fe=="number")re=Z(X);else if(fe=="string")re=x.byteLength(X,F);else{if(fe!="object")throw new Error("First argument needs to be a number, array or string.");re=Z(X.length)}if(x._useTypedArrays?H=x._augment(new Uint8Array(re)):((H=this).length=re,H._isBuffer=!0),x._useTypedArrays&&typeof X.byteLength=="number")H._set(X);else if(ie(le=X)||x.isBuffer(le)||le&&typeof le=="object"&&typeof le.length=="number")for(q=0;q<re;q++)x.isBuffer(X)?H[q]=X.readUInt8(q):H[q]=X[q];else if(fe=="string")H.write(X,0,F);else if(fe=="number"&&!x._useTypedArrays&&!te)for(q=0;q<re;q++)H[q]=0;return H}function S(X,F,te,re){return x._charsWritten=Se(function(H){for(var q=[],le=0;le<H.length;le++)q.push(255&H.charCodeAt(le));return q}(F),X,te,re)}function _(X,F,te,re){return x._charsWritten=Se(function(H){for(var q,le,fe=[],be=0;be<H.length;be++)le=H.charCodeAt(be),q=le>>8,le=le%256,fe.push(le),fe.push(q);return fe}(F),X,te,re)}function O(X,F,te){var re="";te=Math.min(X.length,te);for(var H=F;H<te;H++)re+=String.fromCharCode(X[H]);return re}function k(X,F,te,q){q||(K(typeof te=="boolean","missing or invalid endian"),K(F!=null,"missing offset"),K(F+1<X.length,"Trying to read beyond buffer length"));var H,q=X.length;if(!(q<=F))return te?(H=X[F],F+1<q&&(H|=X[F+1]<<8)):(H=X[F]<<8,F+1<q&&(H|=X[F+1])),H}function M(X,F,te,q){q||(K(typeof te=="boolean","missing or invalid endian"),K(F!=null,"missing offset"),K(F+3<X.length,"Trying to read beyond buffer length"));var H,q=X.length;if(!(q<=F))return te?(F+2<q&&(H=X[F+2]<<16),F+1<q&&(H|=X[F+1]<<8),H|=X[F],F+3<q&&(H+=X[F+3]<<24>>>0)):(F+1<q&&(H=X[F+1]<<16),F+2<q&&(H|=X[F+2]<<8),F+3<q&&(H|=X[F+3]),H+=X[F]<<24>>>0),H}function P(X,F,te,re){if(re||(K(typeof te=="boolean","missing or invalid endian"),K(F!=null,"missing offset"),K(F+1<X.length,"Trying to read beyond buffer length")),!(X.length<=F))return re=k(X,F,te,!0),32768&re?-1*(65535-re+1):re}function D(X,F,te,re){if(re||(K(typeof te=="boolean","missing or invalid endian"),K(F!=null,"missing offset"),K(F+3<X.length,"Trying to read beyond buffer length")),!(X.length<=F))return re=M(X,F,te,!0),2147483648&re?-1*(4294967295-re+1):re}function A(X,F,te,re){return re||(K(typeof te=="boolean","missing or invalid endian"),K(F+3<X.length,"Trying to read beyond buffer length")),w.read(X,F,te,23,4)}function R(X,F,te,re){return re||(K(typeof te=="boolean","missing or invalid endian"),K(F+7<X.length,"Trying to read beyond buffer length")),w.read(X,F,te,52,8)}function T(X,F,te,re,H){if(H||(K(F!=null,"missing value"),K(typeof re=="boolean","missing or invalid endian"),K(te!=null,"missing offset"),K(te+1<X.length,"trying to write beyond buffer length"),Ce(F,65535)),H=X.length,!(H<=te))for(var q=0,le=Math.min(H-te,2);q<le;q++)X[te+q]=(F&255<<8*(re?q:1-q))>>>8*(re?q:1-q)}function N(X,F,te,re,H){if(H||(K(F!=null,"missing value"),K(typeof re=="boolean","missing or invalid endian"),K(te!=null,"missing offset"),K(te+3<X.length,"trying to write beyond buffer length"),Ce(F,4294967295)),H=X.length,!(H<=te))for(var q=0,le=Math.min(H-te,4);q<le;q++)X[te+q]=F>>>8*(re?q:3-q)&255}function L(X,F,te,re,H){H||(K(F!=null,"missing value"),K(typeof re=="boolean","missing or invalid endian"),K(te!=null,"missing offset"),K(te+1<X.length,"Trying to write beyond buffer length"),pe(F,32767,-32768)),X.length<=te||T(X,0<=F?F:65535+F+1,te,re,H)}function I(X,F,te,re,H){H||(K(F!=null,"missing value"),K(typeof re=="boolean","missing or invalid endian"),K(te!=null,"missing offset"),K(te+3<X.length,"Trying to write beyond buffer length"),pe(F,2147483647,-2147483648)),X.length<=te||N(X,0<=F?F:4294967295+F+1,te,re,H)}function $(X,F,te,re,H){H||(K(F!=null,"missing value"),K(typeof re=="boolean","missing or invalid endian"),K(te!=null,"missing offset"),K(te+3<X.length,"Trying to write beyond buffer length"),j(F,34028234663852886e22,-34028234663852886e22)),X.length<=te||w.write(X,F,te,re,23,4)}function B(X,F,te,re,H){H||(K(F!=null,"missing value"),K(typeof re=="boolean","missing or invalid endian"),K(te!=null,"missing offset"),K(te+7<X.length,"Trying to write beyond buffer length"),j(F,17976931348623157e292,-17976931348623157e292)),X.length<=te||w.write(X,F,te,re,52,8)}r.Buffer=x,r.SlowBuffer=x,r.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var X=new ArrayBuffer(0),F=new Uint8Array(X);return F.foo=function(){return 42},F.foo()===42&&typeof F.subarray=="function"}catch{return!1}}(),x.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(X){return!(X==null||!X._isBuffer)},x.byteLength=function(X,F){var te;switch(X+="",F||"utf8"){case"hex":te=X.length/2;break;case"utf8":case"utf-8":te=ge(X).length;break;case"ascii":case"binary":case"raw":te=X.length;break;case"base64":te=Ae(X).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":te=2*X.length;break;default:throw new Error("Unknown encoding")}return te},x.concat=function(X,F){if(K(ie(X),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),X.length===0)return new x(0);if(X.length===1)return X[0];if(typeof F!="number")for(H=F=0;H<X.length;H++)F+=X[H].length;for(var te=new x(F),re=0,H=0;H<X.length;H++){var q=X[H];q.copy(te,re),re+=q.length}return te},x.prototype.write=function(X,F,te,re){isFinite(F)?isFinite(te)||(re=te,te=void 0):(be=re,re=F,F=te,te=be),F=Number(F)||0;var H,q,le,fe,be=this.length-F;switch((!te||be<(te=Number(te)))&&(te=be),re=String(re||"utf8").toLowerCase()){case"hex":H=function(Me,J,Q,ue){Q=Number(Q)||0;var de=Me.length-Q;(!ue||de<(ue=Number(ue)))&&(ue=de),K((de=J.length)%2==0,"Invalid hex string"),de/2<ue&&(ue=de/2);for(var we=0;we<ue;we++){var Te=parseInt(J.substr(2*we,2),16);K(!isNaN(Te),"Invalid hex string"),Me[Q+we]=Te}return x._charsWritten=2*we,we}(this,X,F,te);break;case"utf8":case"utf-8":q=this,le=F,fe=te,H=x._charsWritten=Se(ge(X),q,le,fe);break;case"ascii":case"binary":H=S(this,X,F,te);break;case"base64":q=this,le=F,fe=te,H=x._charsWritten=Se(Ae(X),q,le,fe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":H=_(this,X,F,te);break;default:throw new Error("Unknown encoding")}return H},x.prototype.toString=function(X,F,te){var re,H,q,le,fe=this;if(X=String(X||"utf8").toLowerCase(),F=Number(F)||0,(te=te!==void 0?Number(te):fe.length)===F)return"";switch(X){case"hex":re=function(be,Me,J){var Q=be.length;(!Me||Me<0)&&(Me=0),(!J||J<0||Q<J)&&(J=Q);for(var ue="",de=Me;de<J;de++)ue+=ce(be[de]);return ue}(fe,F,te);break;case"utf8":case"utf-8":re=function(be,Me,J){var Q="",ue="";J=Math.min(be.length,J);for(var de=Me;de<J;de++)be[de]<=127?(Q+=he(ue)+String.fromCharCode(be[de]),ue=""):ue+="%"+be[de].toString(16);return Q+he(ue)}(fe,F,te);break;case"ascii":case"binary":re=O(fe,F,te);break;case"base64":H=fe,le=te,re=(q=F)===0&&le===H.length?y.fromByteArray(H):y.fromByteArray(H.slice(q,le));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":re=function(be,Me,J){for(var Q=be.slice(Me,J),ue="",de=0;de<Q.length;de+=2)ue+=String.fromCharCode(Q[de]+256*Q[de+1]);return ue}(fe,F,te);break;default:throw new Error("Unknown encoding")}return re},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(X,F,te,re){if(F=F||0,(re=re||re===0?re:this.length)!==(te=te||0)&&X.length!==0&&this.length!==0){K(te<=re,"sourceEnd < sourceStart"),K(0<=F&&F<X.length,"targetStart out of bounds"),K(0<=te&&te<this.length,"sourceStart out of bounds"),K(0<=re&&re<=this.length,"sourceEnd out of bounds"),re>this.length&&(re=this.length);var H=(re=X.length-F<re-te?X.length-F+te:re)-te;if(H<100||!x._useTypedArrays)for(var q=0;q<H;q++)X[q+F]=this[q+te];else X._set(this.subarray(te,te+H),F)}},x.prototype.slice=function(X,F){var te=this.length;if(X=Y(X,te,0),F=Y(F,te,te),x._useTypedArrays)return x._augment(this.subarray(X,F));for(var re=F-X,H=new x(re,void 0,!0),q=0;q<re;q++)H[q]=this[q+X];return H},x.prototype.get=function(X){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(X)},x.prototype.set=function(X,F){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(X,F)},x.prototype.readUInt8=function(X,F){if(F||(K(X!=null,"missing offset"),K(X<this.length,"Trying to read beyond buffer length")),!(X>=this.length))return this[X]},x.prototype.readUInt16LE=function(X,F){return k(this,X,!0,F)},x.prototype.readUInt16BE=function(X,F){return k(this,X,!1,F)},x.prototype.readUInt32LE=function(X,F){return M(this,X,!0,F)},x.prototype.readUInt32BE=function(X,F){return M(this,X,!1,F)},x.prototype.readInt8=function(X,F){if(F||(K(X!=null,"missing offset"),K(X<this.length,"Trying to read beyond buffer length")),!(X>=this.length))return 128&this[X]?-1*(255-this[X]+1):this[X]},x.prototype.readInt16LE=function(X,F){return P(this,X,!0,F)},x.prototype.readInt16BE=function(X,F){return P(this,X,!1,F)},x.prototype.readInt32LE=function(X,F){return D(this,X,!0,F)},x.prototype.readInt32BE=function(X,F){return D(this,X,!1,F)},x.prototype.readFloatLE=function(X,F){return A(this,X,!0,F)},x.prototype.readFloatBE=function(X,F){return A(this,X,!1,F)},x.prototype.readDoubleLE=function(X,F){return R(this,X,!0,F)},x.prototype.readDoubleBE=function(X,F){return R(this,X,!1,F)},x.prototype.writeUInt8=function(X,F,te){te||(K(X!=null,"missing value"),K(F!=null,"missing offset"),K(F<this.length,"trying to write beyond buffer length"),Ce(X,255)),F>=this.length||(this[F]=X)},x.prototype.writeUInt16LE=function(X,F,te){T(this,X,F,!0,te)},x.prototype.writeUInt16BE=function(X,F,te){T(this,X,F,!1,te)},x.prototype.writeUInt32LE=function(X,F,te){N(this,X,F,!0,te)},x.prototype.writeUInt32BE=function(X,F,te){N(this,X,F,!1,te)},x.prototype.writeInt8=function(X,F,te){te||(K(X!=null,"missing value"),K(F!=null,"missing offset"),K(F<this.length,"Trying to write beyond buffer length"),pe(X,127,-128)),F>=this.length||(0<=X?this.writeUInt8(X,F,te):this.writeUInt8(255+X+1,F,te))},x.prototype.writeInt16LE=function(X,F,te){L(this,X,F,!0,te)},x.prototype.writeInt16BE=function(X,F,te){L(this,X,F,!1,te)},x.prototype.writeInt32LE=function(X,F,te){I(this,X,F,!0,te)},x.prototype.writeInt32BE=function(X,F,te){I(this,X,F,!1,te)},x.prototype.writeFloatLE=function(X,F,te){$(this,X,F,!0,te)},x.prototype.writeFloatBE=function(X,F,te){$(this,X,F,!1,te)},x.prototype.writeDoubleLE=function(X,F,te){B(this,X,F,!0,te)},x.prototype.writeDoubleBE=function(X,F,te){B(this,X,F,!1,te)},x.prototype.fill=function(X,F,te){if(F=F||0,te=te||this.length,K(typeof(X=typeof(X=X||0)=="string"?X.charCodeAt(0):X)=="number"&&!isNaN(X),"value is not a number"),K(F<=te,"end < start"),te!==F&&this.length!==0){K(0<=F&&F<this.length,"start out of bounds"),K(0<=te&&te<=this.length,"end out of bounds");for(var re=F;re<te;re++)this[re]=X}},x.prototype.inspect=function(){for(var X=[],F=this.length,te=0;te<F;te++)if(X[te]=ce(this[te]),te===r.INSPECT_MAX_BYTES){X[te+1]="...";break}return"<Buffer "+X.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var X=new Uint8Array(this.length),F=0,te=X.length;F<te;F+=1)X[F]=this[F];return X.buffer};var U=x.prototype;function Y(X,F,te){return typeof X!="number"?te:F<=(X=~~X)?F:0<=X||0<=(X+=F)?X:0}function Z(X){return(X=~~Math.ceil(+X))<0?0:X}function ie(X){return(Array.isArray||function(F){return Object.prototype.toString.call(F)==="[object Array]"})(X)}function ce(X){return X<16?"0"+X.toString(16):X.toString(16)}function ge(X){for(var F=[],te=0;te<X.length;te++){var re=X.charCodeAt(te);if(re<=127)F.push(X.charCodeAt(te));else for(var H=te,q=(55296<=re&&re<=57343&&te++,encodeURIComponent(X.slice(H,te+1)).substr(1).split("%")),le=0;le<q.length;le++)F.push(parseInt(q[le],16))}return F}function Ae(X){return y.toByteArray(X)}function Se(X,F,te,re){for(var H=0;H<re&&!(H+te>=F.length||H>=X.length);H++)F[H+te]=X[H];return H}function he(X){try{return decodeURIComponent(X)}catch{return"�"}}function Ce(X,F){K(typeof X=="number","cannot write a non-number as a number"),K(0<=X,"specified a negative value for writing an unsigned value"),K(X<=F,"value is larger than maximum value for type"),K(Math.floor(X)===X,"value has a fractional component")}function pe(X,F,te){K(typeof X=="number","cannot write a non-number as a number"),K(X<=F,"value larger than maximum allowed value"),K(te<=X,"value smaller than minimum allowed value"),K(Math.floor(X)===X,"value has a fractional component")}function j(X,F,te){K(typeof X=="number","cannot write a non-number as a number"),K(X<=F,"value larger than maximum allowed value"),K(te<=X,"value smaller than minimum allowed value")}function K(X,F){if(!X)throw new Error(F||"Failed assertion")}x._augment=function(X){return X._isBuffer=!0,X._get=X.get,X._set=X.set,X.get=U.get,X.set=U.set,X.write=U.write,X.toString=U.toString,X.toLocaleString=U.toString,X.toJSON=U.toJSON,X.copy=U.copy,X.slice=U.slice,X.readUInt8=U.readUInt8,X.readUInt16LE=U.readUInt16LE,X.readUInt16BE=U.readUInt16BE,X.readUInt32LE=U.readUInt32LE,X.readUInt32BE=U.readUInt32BE,X.readInt8=U.readInt8,X.readInt16LE=U.readInt16LE,X.readInt16BE=U.readInt16BE,X.readInt32LE=U.readInt32LE,X.readInt32BE=U.readInt32BE,X.readFloatLE=U.readFloatLE,X.readFloatBE=U.readFloatBE,X.readDoubleLE=U.readDoubleLE,X.readDoubleBE=U.readDoubleBE,X.writeUInt8=U.writeUInt8,X.writeUInt16LE=U.writeUInt16LE,X.writeUInt16BE=U.writeUInt16BE,X.writeUInt32LE=U.writeUInt32LE,X.writeUInt32BE=U.writeUInt32BE,X.writeInt8=U.writeInt8,X.writeInt16LE=U.writeInt16LE,X.writeInt16BE=U.writeInt16BE,X.writeInt32LE=U.writeInt32LE,X.writeInt32BE=U.writeInt32BE,X.writeFloatLE=U.writeFloatLE,X.writeFloatBE=U.writeFloatBE,X.writeDoubleLE=U.writeDoubleLE,X.writeDoubleBE=U.writeDoubleBE,X.fill=U.fill,X.inspect=U.inspect,X.toArrayBuffer=U.toArrayBuffer,X}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,t,r){(function(s,a,y,h,u,f,p,g,v){var y=n("buffer").Buffer,w=4,x=new y(w);x.fill(0),t.exports={hash:function(S,_,O,k){for(var M=_(function(T,N){T.length%w!=0&&(L=T.length+(w-T.length%w),T=y.concat([T,x],L));for(var L,I=[],$=N?T.readInt32BE:T.readInt32LE,B=0;B<T.length;B+=w)I.push($.call(T,B));return I}(S=y.isBuffer(S)?S:new y(S),k),8*S.length),_=k,P=new y(O),D=_?P.writeInt32BE:P.writeInt32LE,A=0;A<M.length;A++)D.call(P,M[A],4*A,!0);return P}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,t,r){(function(s,a,y,h,u,f,p,g,v){var y=n("buffer").Buffer,w=n("./sha"),x=n("./sha256"),S=n("./rng"),_={sha1:w,sha256:x,md5:n("./md5")},O=64,k=new y(O);function M(T,N){var L=_[T=T||"sha1"],I=[];return L||P("algorithm:",T,"is not yet supported"),{update:function($){return y.isBuffer($)||($=new y($)),I.push($),$.length,this},digest:function($){var B=y.concat(I),B=N?function(U,Y,Z){y.isBuffer(Y)||(Y=new y(Y)),y.isBuffer(Z)||(Z=new y(Z)),Y.length>O?Y=U(Y):Y.length<O&&(Y=y.concat([Y,k],O));for(var ie=new y(O),ce=new y(O),ge=0;ge<O;ge++)ie[ge]=54^Y[ge],ce[ge]=92^Y[ge];return Z=U(y.concat([ie,Z])),U(y.concat([ce,Z]))}(L,N,B):L(B);return I=null,$?B.toString($):B}}}function P(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}k.fill(0),r.createHash=function(T){return M(T)},r.createHmac=M,r.randomBytes=function(T,N){if(!N||!N.call)return new y(S(T));try{N.call(this,void 0,new y(S(T)))}catch(L){N(L)}};var D,A=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],R=function(T){r[T]=function(){P("sorry,",T,"is not implemented yet")}};for(D in A)R(A[D])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){var y=n("./helpers");function w(P,D){P[D>>5]|=128<<D%32,P[14+(D+64>>>9<<4)]=D;for(var A=1732584193,R=-271733879,T=-1732584194,N=271733878,L=0;L<P.length;L+=16){var I=A,$=R,B=T,U=N,A=S(A,R,T,N,P[L+0],7,-680876936),N=S(N,A,R,T,P[L+1],12,-389564586),T=S(T,N,A,R,P[L+2],17,606105819),R=S(R,T,N,A,P[L+3],22,-1044525330);A=S(A,R,T,N,P[L+4],7,-176418897),N=S(N,A,R,T,P[L+5],12,1200080426),T=S(T,N,A,R,P[L+6],17,-1473231341),R=S(R,T,N,A,P[L+7],22,-45705983),A=S(A,R,T,N,P[L+8],7,1770035416),N=S(N,A,R,T,P[L+9],12,-1958414417),T=S(T,N,A,R,P[L+10],17,-42063),R=S(R,T,N,A,P[L+11],22,-1990404162),A=S(A,R,T,N,P[L+12],7,1804603682),N=S(N,A,R,T,P[L+13],12,-40341101),T=S(T,N,A,R,P[L+14],17,-1502002290),A=_(A,R=S(R,T,N,A,P[L+15],22,1236535329),T,N,P[L+1],5,-165796510),N=_(N,A,R,T,P[L+6],9,-1069501632),T=_(T,N,A,R,P[L+11],14,643717713),R=_(R,T,N,A,P[L+0],20,-373897302),A=_(A,R,T,N,P[L+5],5,-701558691),N=_(N,A,R,T,P[L+10],9,38016083),T=_(T,N,A,R,P[L+15],14,-660478335),R=_(R,T,N,A,P[L+4],20,-405537848),A=_(A,R,T,N,P[L+9],5,568446438),N=_(N,A,R,T,P[L+14],9,-1019803690),T=_(T,N,A,R,P[L+3],14,-187363961),R=_(R,T,N,A,P[L+8],20,1163531501),A=_(A,R,T,N,P[L+13],5,-1444681467),N=_(N,A,R,T,P[L+2],9,-51403784),T=_(T,N,A,R,P[L+7],14,1735328473),A=O(A,R=_(R,T,N,A,P[L+12],20,-1926607734),T,N,P[L+5],4,-378558),N=O(N,A,R,T,P[L+8],11,-2022574463),T=O(T,N,A,R,P[L+11],16,1839030562),R=O(R,T,N,A,P[L+14],23,-35309556),A=O(A,R,T,N,P[L+1],4,-1530992060),N=O(N,A,R,T,P[L+4],11,1272893353),T=O(T,N,A,R,P[L+7],16,-155497632),R=O(R,T,N,A,P[L+10],23,-1094730640),A=O(A,R,T,N,P[L+13],4,681279174),N=O(N,A,R,T,P[L+0],11,-358537222),T=O(T,N,A,R,P[L+3],16,-722521979),R=O(R,T,N,A,P[L+6],23,76029189),A=O(A,R,T,N,P[L+9],4,-640364487),N=O(N,A,R,T,P[L+12],11,-421815835),T=O(T,N,A,R,P[L+15],16,530742520),A=k(A,R=O(R,T,N,A,P[L+2],23,-995338651),T,N,P[L+0],6,-198630844),N=k(N,A,R,T,P[L+7],10,1126891415),T=k(T,N,A,R,P[L+14],15,-1416354905),R=k(R,T,N,A,P[L+5],21,-57434055),A=k(A,R,T,N,P[L+12],6,1700485571),N=k(N,A,R,T,P[L+3],10,-1894986606),T=k(T,N,A,R,P[L+10],15,-1051523),R=k(R,T,N,A,P[L+1],21,-2054922799),A=k(A,R,T,N,P[L+8],6,1873313359),N=k(N,A,R,T,P[L+15],10,-30611744),T=k(T,N,A,R,P[L+6],15,-1560198380),R=k(R,T,N,A,P[L+13],21,1309151649),A=k(A,R,T,N,P[L+4],6,-145523070),N=k(N,A,R,T,P[L+11],10,-1120210379),T=k(T,N,A,R,P[L+2],15,718787259),R=k(R,T,N,A,P[L+9],21,-343485551),A=M(A,I),R=M(R,$),T=M(T,B),N=M(N,U)}return Array(A,R,T,N)}function x(P,D,A,R,T,N){return M((D=M(M(D,P),M(R,N)))<<T|D>>>32-T,A)}function S(P,D,A,R,T,N,L){return x(D&A|~D&R,P,D,T,N,L)}function _(P,D,A,R,T,N,L){return x(D&R|A&~R,P,D,T,N,L)}function O(P,D,A,R,T,N,L){return x(D^A^R,P,D,T,N,L)}function k(P,D,A,R,T,N,L){return x(A^(D|~R),P,D,T,N,L)}function M(P,D){var A=(65535&P)+(65535&D);return(P>>16)+(D>>16)+(A>>16)<<16|65535&A}t.exports=function(P){return y.hash(P,w,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){t.exports=function(y){for(var w,x=new Array(y),S=0;S<y;S++)!(3&S)&&(w=4294967296*Math.random()),x[S]=w>>>((3&S)<<3)&255;return x}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){var y=n("./helpers");function w(_,O){_[O>>5]|=128<<24-O%32,_[15+(O+64>>9<<4)]=O;for(var k,M,P,D=Array(80),A=1732584193,R=-271733879,T=-1732584194,N=271733878,L=-1009589776,I=0;I<_.length;I+=16){for(var $=A,B=R,U=T,Y=N,Z=L,ie=0;ie<80;ie++){D[ie]=ie<16?_[I+ie]:S(D[ie-3]^D[ie-8]^D[ie-14]^D[ie-16],1);var ce=x(x(S(A,5),(ce=R,M=T,P=N,(k=ie)<20?ce&M|~ce&P:!(k<40)&&k<60?ce&M|ce&P|M&P:ce^M^P)),x(x(L,D[ie]),(k=ie)<20?1518500249:k<40?1859775393:k<60?-1894007588:-899497514)),L=N,N=T,T=S(R,30),R=A,A=ce}A=x(A,$),R=x(R,B),T=x(T,U),N=x(N,Y),L=x(L,Z)}return Array(A,R,T,N,L)}function x(_,O){var k=(65535&_)+(65535&O);return(_>>16)+(O>>16)+(k>>16)<<16|65535&k}function S(_,O){return _<<O|_>>>32-O}t.exports=function(_){return y.hash(_,w,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){function y(O,k){var M=(65535&O)+(65535&k);return(O>>16)+(k>>16)+(M>>16)<<16|65535&M}function w(O,k){var M,P=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),D=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),A=new Array(64);O[k>>5]|=128<<24-k%32,O[15+(k+64>>9<<4)]=k;for(var R,T,N=0;N<O.length;N+=16){for(var L=D[0],I=D[1],$=D[2],B=D[3],U=D[4],Y=D[5],Z=D[6],ie=D[7],ce=0;ce<64;ce++)A[ce]=ce<16?O[ce+N]:y(y(y((T=A[ce-2],S(T,17)^S(T,19)^_(T,10)),A[ce-7]),(T=A[ce-15],S(T,7)^S(T,18)^_(T,3))),A[ce-16]),M=y(y(y(y(ie,S(T=U,6)^S(T,11)^S(T,25)),U&Y^~U&Z),P[ce]),A[ce]),R=y(S(R=L,2)^S(R,13)^S(R,22),L&I^L&$^I&$),ie=Z,Z=Y,Y=U,U=y(B,M),B=$,$=I,I=L,L=y(M,R);D[0]=y(L,D[0]),D[1]=y(I,D[1]),D[2]=y($,D[2]),D[3]=y(B,D[3]),D[4]=y(U,D[4]),D[5]=y(Y,D[5]),D[6]=y(Z,D[6]),D[7]=y(ie,D[7])}return D}var x=n("./helpers"),S=function(O,k){return O>>>k|O<<32-k},_=function(O,k){return O>>>k};t.exports=function(O){return x.hash(O,w,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){r.read=function(y,w,x,S,N){var O,k,M=8*N-S-1,P=(1<<M)-1,D=P>>1,A=-7,R=x?N-1:0,T=x?-1:1,N=y[w+R];for(R+=T,O=N&(1<<-A)-1,N>>=-A,A+=M;0<A;O=256*O+y[w+R],R+=T,A-=8);for(k=O&(1<<-A)-1,O>>=-A,A+=S;0<A;k=256*k+y[w+R],R+=T,A-=8);if(O===0)O=1-D;else{if(O===P)return k?NaN:1/0*(N?-1:1);k+=Math.pow(2,S),O-=D}return(N?-1:1)*k*Math.pow(2,O-S)},r.write=function(y,w,x,S,_,L){var k,M,P=8*L-_-1,D=(1<<P)-1,A=D>>1,R=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=S?0:L-1,N=S?1:-1,L=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(M=isNaN(w)?1:0,k=D):(k=Math.floor(Math.log(w)/Math.LN2),w*(S=Math.pow(2,-k))<1&&(k--,S*=2),2<=(w+=1<=k+A?R/S:R*Math.pow(2,1-A))*S&&(k++,S/=2),D<=k+A?(M=0,k=D):1<=k+A?(M=(w*S-1)*Math.pow(2,_),k+=A):(M=w*Math.pow(2,A-1)*Math.pow(2,_),k=0));8<=_;y[x+T]=255&M,T+=N,M/=256,_-=8);for(k=k<<_|M,P+=_;0<P;y[x+T]=255&k,T+=N,k/=256,P-=8);y[x+T-N]|=128*L}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,t,r){(function(s,a,l,h,u,f,p,g,v){var y,w,x;function S(){}(s=t.exports={}).nextTick=(w=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,w?function(_){return window.setImmediate(_)}:x?(y=[],window.addEventListener("message",function(_){var O=_.source;O!==window&&O!==null||_.data!=="process-tick"||(_.stopPropagation(),0<y.length&&y.shift()())},!0),function(_){y.push(_),window.postMessage("process-tick","*")}):function(_){setTimeout(_,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=S,s.addListener=S,s.once=S,s.off=S,s.removeListener=S,s.removeAllListeners=S,s.emit=S,s.binding=function(_){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(_){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(aye);var lye=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],i2=lye;i2=i2.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)});i2.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function cye(i,e){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var t=n.call(i,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function hye(i){var e=cye(i,"string");return typeof e=="symbol"?e:String(e)}function Kn(i,e,n){return e=hye(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}var en={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},fs,Cd;fs={},Kn(fs,"".concat(en.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(en.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),Kn(fs,"".concat(en.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(en.position,`;
  `)}),Kn(fs,"".concat(en.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(en.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),Kn(fs,"".concat(en.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(en.pointSize,`;
    `)}),Kn(fs,"".concat(en.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(en.diffuseColor,`;
  `)}),Kn(fs,"".concat(en.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(en.fragColor,`;
  `)}),Kn(fs,"".concat(en.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(en.emissive,`;
    `)}),Kn(fs,"".concat(en.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(en.roughness,`;
    `)}),Kn(fs,"".concat(en.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(en.metalness,`;
    `)}),Kn(fs,"".concat(en.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(en.ao,`;
    `)}),Kn(fs,"".concat(en.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(en.bump," - (dot(").concat(en.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),Kn(fs,"".concat(en.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(en.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(en.depthAlpha,`;
    `)});Cd={},Kn(Cd,"".concat(en.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(en.position,`, 1.0 );
  `)}),Kn(Cd,"".concat(en.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(en.position,`;
  `)}),Kn(Cd,"".concat(en.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(en.diffuseColor,`;
  `)}),Kn(Cd,"".concat(en.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(en.fragColor,`;
  `)});var ps;ps={},Kn(ps,"".concat(en.position),"*"),Kn(ps,"".concat(en.positionRaw),"*"),Kn(ps,"".concat(en.normal),"*"),Kn(ps,"".concat(en.pointSize),["PointsMaterial"]),Kn(ps,"".concat(en.diffuseColor),"*"),Kn(ps,"".concat(en.fragColor),"*"),Kn(ps,"".concat(en.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),Kn(ps,"".concat(en.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Kn(ps,"".concat(en.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Kn(ps,"".concat(en.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),Kn(ps,"".concat(en.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),Kn(ps,"".concat(en.depthAlpha),"*");new Sr;new ne;ot.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Qe(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};po.line={uniforms:_0.merge([ot.common,ot.fog,ot.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new ne;new ne;new yn;new yn;new yn;new ne;new pt;new n8;new ne;new Sr;new Cr;new yn;const uye={key:0,args:[0,1,64]},dye={key:1,args:[.5,1,64]},fye={key:2},pye=["tone-mapped","map","side","color"];new nt(16777215);class rM extends Jn{constructor(){const e=rM.SkyShader,n=new os({name:e.name,uniforms:_0.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:Vr,depthWrite:!1});super(new Zc(1,1,1),n),this.isSky=!0}}rM.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new ne},up:{value:new ne(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var mye={exports:{}};(function(i,e){(function(n,t){i.exports=t()})(oye,function(){var n=function(){function t(v){return a.appendChild(v.dom),v}function r(v){for(var y=0;y<a.children.length;y++)a.children[y].style.display=y===v?"block":"none";s=v}var s=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(v){v.preventDefault(),r(++s%a.children.length)},!1);var l=(performance||Date).now(),h=l,u=0,f=t(new n.Panel("FPS","#0ff","#002")),p=t(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var g=t(new n.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:a,addPanel:t,showPanel:r,begin:function(){l=(performance||Date).now()},end:function(){u++;var v=(performance||Date).now();if(p.update(v-l,200),v>h+1e3&&(f.update(1e3*u/(v-h),100),h=v,u=0,g)){var y=performance.memory;g.update(y.usedJSHeapSize/1048576,y.jsHeapSizeLimit/1048576)}return v},update:function(){l=this.end()},domElement:a,setMode:r}};return n.Panel=function(t,r,s){var a=1/0,l=0,h=Math.round,u=h(window.devicePixelRatio||1),f=80*u,p=48*u,g=3*u,v=2*u,y=3*u,w=15*u,x=74*u,S=30*u,_=document.createElement("canvas");_.width=f,_.height=p,_.style.cssText="width:80px;height:48px";var O=_.getContext("2d");return O.font="bold "+9*u+"px Helvetica,Arial,sans-serif",O.textBaseline="top",O.fillStyle=s,O.fillRect(0,0,f,p),O.fillStyle=r,O.fillText(t,g,v),O.fillRect(y,w,x,S),O.fillStyle=s,O.globalAlpha=.9,O.fillRect(y,w,x,S),{dom:_,update:function(k,M){a=Math.min(a,k),l=Math.max(l,k),O.fillStyle=s,O.globalAlpha=1,O.fillRect(0,0,f,w),O.fillStyle=r,O.fillText(h(k)+" "+t+" ("+h(a)+"-"+h(l)+")",g,v),O.drawImage(_,y+u,w,x-u,S,y,w,x-u,S),O.fillRect(y+x-u,w,u,S),O.fillStyle=s,O.globalAlpha=.9,O.fillRect(y+x-u,w,u,h((1-k/M)*S))}}},n})})(mye);var gye=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,vye=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const U0=new ne(0,0,0),sM=new ne(0,0,0),yye=new ne(0,0,0);function WR(i,e,n){const t=U0.setFromMatrixPosition(i.matrixWorld);t.project(e);const r=n.width/2,s=n.height/2;return[(Number.isNaN(t.x)?0:t.x)*r+r,-(t.y*s)+s]}function bye(i,e){const n=U0.setFromMatrixPosition(i.matrixWorld),t=sM.setFromMatrixPosition(e.matrixWorld),r=n.sub(t),s=e.getWorldDirection(yye);return r.angleTo(s)>Math.PI/2}function Oye(i,e,n,t){const r=U0.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),n.setFromCamera(new Qe(s.x,s.y),e);const a=n.intersectObjects(t,!0);if(a.length>0){const l=a[0].distance;return r.distanceTo(n.ray.origin)<l}return!0}function xye(i,e){if(e instanceof bo)return e.zoom;if(e instanceof qn){const n=U0.setFromMatrixPosition(i.matrixWorld),t=sM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(t);return 1/(2*Math.tan(r/2)*s)}else return 1}function wye(i,e,n){if(e instanceof qn||e instanceof bo){const t=U0.setFromMatrixPosition(i.matrixWorld),r=sM.setFromMatrixPosition(e.matrixWorld),s=t.distanceTo(r),a=(n[1]-n[0])/(e.far-e.near),l=n[1]-a*e.far;return Math.round(a*s+l)}}const r2=i=>Math.abs(i)<1e-10?0:i;function MB(i,e,n=""){let t="matrix3d(";for(let r=0;r!==16;r++)t+=r2(e[r]*i.elements[r])+(r!==15?",":")");return n+t}const _ye=(i=>e=>MB(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Sye=(i=>(e,n)=>MB(e,i(n),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]),Cye=["geometry","material"];new Kc;var au=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-au.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?au.Bounce.In(i*2)*.5:au.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),Jm=function(){return performance.now()},kye=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,n){e===void 0&&(e=Jm()),n===void 0&&(n=!1);var t=Object.keys(this._tweens);if(t.length===0)return!1;for(;t.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<t.length;r++){var s=this._tweens[t[r]],a=!n;s&&s.update(e,a)===!1&&!n&&delete this._tweens[t[r]]}t=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),Dd={Linear:function(i,e){var n=i.length-1,t=n*e,r=Math.floor(t),s=Dd.Utils.Linear;return e<0?s(i[0],i[1],t):e>1?s(i[n],i[n-1],n-t):s(i[r],i[r+1>n?n:r+1],t-r)},Bezier:function(i,e){for(var n=0,t=i.length-1,r=Math.pow,s=Dd.Utils.Bernstein,a=0;a<=t;a++)n+=r(1-e,t-a)*r(e,a)*i[a]*s(t,a);return n},CatmullRom:function(i,e){var n=i.length-1,t=n*e,r=Math.floor(t),s=Dd.Utils.CatmullRom;return i[0]===i[n]?(e<0&&(r=Math.floor(t=n*(1+e))),s(i[(r-1+n)%n],i[r],i[(r+1)%n],i[(r+2)%n],t-r)):e<0?i[0]-(s(i[0],i[0],i[1],i[1],-t)-i[0]):e>1?i[n]-(s(i[n],i[n],i[n-1],i[n-1],t-n)-i[n]):s(i[r?r-1:0],i[r],i[n<r+1?n:r+1],i[n<r+2?n:r+2],t-r)},Utils:{Linear:function(i,e,n){return(e-i)*n+i},Bernstein:function(i,e){var n=Dd.Utils.Factorial;return n(i)/n(e)/n(i-e)},Factorial:function(){var i=[1];return function(e){var n=1;if(i[e])return i[e];for(var t=e;t>1;t--)n*=t;return i[e]=n,n}}(),CatmullRom:function(i,e,n,t,r){var s=(n-i)*.5,a=(t-e)*.5,l=r*r,h=r*l;return(2*e-2*n+s+a)*h+(-3*e+3*n-2*s-a)*l+s*r+e}}},Tye=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),s2=new kye,Mye=function(){function i(e,n){n===void 0&&(n=s2),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=au.Linear.None,this._interpolationFunction=Dd.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Tye.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,n){if(e===void 0&&(e=Jm()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var t in this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,n,t,r,s){for(var a in t){var l=e[a],h=Array.isArray(l),u=h?"array":typeof l,f=!h&&Array.isArray(t[a]);if(!(u==="undefined"||u==="function")){if(f){var p=t[a];if(p.length===0)continue;for(var g=[l],v=0,y=p.length;v<y;v+=1){var w=this._handleRelativeValue(l,p[v]);if(isNaN(w)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}g.push(w)}f&&(t[a]=g)}if((u==="object"||h)&&l&&!f){n[a]=h?[]:{};var x=l;for(var S in x)n[a][S]=x[S];r[a]=h?[]:{};var p=t[a];if(!this._isDynamic){var _={};for(var S in p)_[S]=p[S];t[a]=p=_}this._setupProperties(x,n[a],p,r[a],s)}else(typeof n[a]>"u"||s)&&(n[a]=l),h||(n[a]*=1),f?r[a]=t[a].slice().reverse():r[a]=n[a]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=Jm()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=Jm()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=s2),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=au.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=Dd.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,n){var t;if(e===void 0&&(e=Jm()),n===void 0&&(n=!0),this._isPaused)return!0;var r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>r)return!1;n&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,a=this._duration+((t=this._repeatDelayTime)!==null&&t!==void 0?t:this._delayTime),l=this._duration+this._repeat*a,h=this._calculateElapsedPortion(s,a,l),u=this._easingFunction(h),f=this._calculateCompletionStatus(s,a);if(f==="repeat"&&this._processRepetition(s,a),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),f==="about-to-repeat"&&this._processRepetition(s,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),f==="repeat"||f==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(f==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1)}return f!=="completed"},i.prototype._calculateElapsedPortion=function(e,n,t){if(this._duration===0||e>t)return 1;var r=e%n,s=Math.min(r/this._duration,1);return s===0&&e!==0&&e%this._duration===0?1:s},i.prototype._calculateCompletionStatus=function(e,n){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},i.prototype._processRepetition=function(e,n){var t=Math.min(Math.trunc((e-this._duration)/n)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=t);for(var r in this._valuesStartRepeat){var s=this._valuesEnd[r];!this._yoyo&&typeof s=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(s)),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=n*t},i.prototype._updateProperties=function(e,n,t,r){for(var s in t)if(n[s]!==void 0){var a=n[s]||0,l=t[s],h=Array.isArray(e[s]),u=Array.isArray(l),f=!h&&u;f?e[s]=this._interpolationFunction(l,r):typeof l=="object"&&l?this._updateProperties(e[s],a,l,r):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[s]=a+(l-a)*r))}},i.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},i.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],t=this._valuesEnd[e];typeof t=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(t):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},i}(),Ea=s2;Ea.getAll.bind(Ea);Ea.removeAll.bind(Ea);Ea.add.bind(Ea);Ea.remove.bind(Ea);var Eye=Ea.update.bind(Ea);class Pye{constructor(){this.TileType={Brick:1,Iron:2,Grass:3,Water:4,Home:9},this.Direction={None:0,Up:1,Right:2,Down:3,Left:4},this.CampType={Player:"Player",Enermy:"Enermy"},this.ObjectType={Tank:"Tank",Bullet:"Bullet"},this.GameState={Prepare:"Prepare",Gaming:"Gaming",Finish:"Finish"},this.maps=this.getMapDatas()}makeTween(e){var n=new Mye(e);return n}makeTweenTankAppear(e,n){e.position.y=-1,this.makeTween(e.position).to({y:0},1e3).easing(au.Back.Out).onComplete(n).start()}randInt(e,n){if(n<e)return e;var t=n+1-e;return Math.floor(Math.random()*t)+e}randSplice(e){var n=this.randInt(0,e.length-1);return e.splice(n,1)[0]}formatNum(e,n){if(typeof e=="number")return this.formatNumImpl(e,n);if(e instanceof ne)return e.x=this.formatNumImpl(e.x,n),e.y=this.formatNumImpl(e.y,n),e.z=this.formatNumImpl(e.z,n),e}formatNumImpl(e,n){if(n==0)return Math.abs(e)<1e-4?0:e;var t=Math.round(e/n);return n*t}getDirectionRotation(e){return[0,0,-Math.PI/2,Math.PI,Math.PI/2][e]}isEqual(e,n){return Math.abs(e-n)<=1e-4}removeArrayValue(e,n){for(var t=e.indexOf(n);t>=0;)e.splice(t,1),t=e.indexOf(n)}removeArrayValueIf(e,n){for(var t=e.findIndex(n);t>=0;)e.splice(t,1),t=e.indexOf(n)}getMapDatas(){const e=this.getSrcMaps(),n=[];for(let t=0;t<e.length;++t){const r=e[t],s=this.getMapData(r);n.push(s)}return n}getMapData(e){var n=e.split(`
`);n.shift(),n.pop();var t=[];for(let s=0;s<n.length;s++){var r=n[s].trim().split("	").map(l=>parseInt(l)||0);t[s]=r}return t}getDirectionVector(e){var t=[null,new ne(0,0,-1),new ne(1,0,0),new ne(0,0,1),new ne(-1,0,0)][e];return t?t.clone():null}getSrcMaps(){return[`第1关
            0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
            0																									0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0										1	1			1	1										0
            0										1	1			1	1										0
            1	1			1	1	1	1											1	1	1	1			1	1
            2	2			1	1	1	1											1	1	1	1			2	2
            0										1	1			1	1										0
            0										1	1	1	1	1	1										0
            0		1	1			1	1			1	1	1	1	1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1				1	1	1	1			1	1			1	1			0
            0											1	9		1											0
            0	0	0	0	0	0	0	0	0	0	0	1			1	0	0	0	0	0	0	0	0	0	0	0
`]}}const lt=new Pye;class Aye{constructor(){this.Rows=24,this.Cols=26,this.Width=this.Cols*.5,this.Height=this.Rows*.5,this.HalfWidth=this.Width/2,this.HalfHeight=this.Height/2}getRCByIndex(e){let n={};return n.r=Math.floor(e/this.Cols),n.c=e%this.Cols,n}getIndexByRC(e,n){if(typeof e=="object")var{r:e,c:n}=e;return e*this.Cols+n}getIndexByPosition(e){return this.getIndexByRC(getRCByPosition(e))}getPositionByRC(e,n){if(typeof e=="object")var{r:e,c:n}=e;return new ne(n*.5-6.25,0,e*.5-5.75)}getRCByPosition(e){let n={};return n.r=Math.floor((e.z+6)/.5),n.c=Math.floor((e.x+6.5)/.5),n}isIndexInBound(e){return e>=0&&e<this.Rows*this.Cols}isRCInBound(e,n){if(typeof e=="object")var{r:e,c:n}=e;return e>=0&&e<this.Rows&&n>=0&&n<this.Cols}isGridInBound(e){return!(e.minR<0||e.minC<0||e.maxR>=this.Rows||e.maxC>=this.Cols)}getStandGrid(e,n){let t={};const r=new ne(e.x-n/2,0,e.z-n/2),s=new ne(e.x+n/2,0,e.z+n/2),a=this.getRCByPosition(r),l=this.getRCByPosition(s);return t.minR=Math.min(a.r,l.r),t.minC=Math.min(a.c,l.c),t.maxR=Math.max(a.r,l.r),t.maxC=Math.max(a.c,l.c),Number.isInteger(s.x/.5)&&(t.maxC-=1),Number.isInteger(s.z/.5)&&(t.maxR-=1),t}}var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oM(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Rye(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(t){var r=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return i[t]}})}),n}var z0=function(e,n,t,r,s){var a=r-e,l=s-n;return a*a+l*l<=t*t},Iye=function(e,n,t,r,s,a){var l=e-r,h=s-n,u=t+a;return l*l+h*h<=u*u},ix=function(e,n,t,r,s,a,l){var h=[s-e,a-n],u=[t-e,r-n],f=J_(u,u),p=J_(h,u),g=p/f;g=g<0?0:g,g=g>1?1:g;var v=[u[0]*g+e-s,u[1]*g+n-a],y=J_(v,v);return y<=l*l};function J_(i,e){return i[0]*e[0]+i[1]*e[1]}var Dye=ix,Nye=function(e,n,t,r,s,a,l){return Dye(r,s,a,l,e,n,t)},aM=function(e,n,t,r,s,a,l){var h=t/2,u=r/2,f=Math.abs(s-(e+t/2)),p=Math.abs(a-(n+r/2));if(f>h+l||p>u+l)return!1;if(f<=h||p<=u)return!0;var g=f-h,v=p-u;return g*g+v*v<=l*l},$ye=aM,Vye=function(e,n,t,r,s,a,l){return $ye(r,s,a,l,e,n,t)};function eS(i,e,n,t){return Math.sqrt(Math.pow(i-n,2)+Math.pow(e-t,2))}var lM=function(e,n,t,r,s,a,l){return l=l||1,Math.abs(eS(e,n,t,r)-(eS(e,n,s,a)+eS(t,r,s,a)))<=l};const Lye=lM;var F0=function(e,n,t,r){var s=e.length,a=!1,l,h;for(l=0,h=s-2;l<s;l+=2)e[l+1]>t!=e[h+1]>t&&n<(e[h]-e[l])*(t-e[l+1])/(e[h+1]-e[l+1])+e[l]&&(a=!a),h=l;if(a)return!0;for(l=0;l<s;l+=2){var u=e[l],f=e[l+1],p,g;if(l===s-2?(p=e[0],g=e[1]):(p=e[l+2],g=e[l+3]),Lye(u,f,p,g,n,t,r))return!0}return!1},Bye=F0,QR=ix,EB=function(e,n,t,r,s){if(Bye(e,n,t,s))return!0;for(var a=e.length,l=0;l<a-2;l+=2)if(QR(e[l],e[l+1],e[l+2],e[l+3],n,t,r))return!0;return QR(e[0],e[1],e[a-2],e[a-1],n,t,r)},Uye=EB,zye=function(e,n,t,r,s){return Uye(r,e,n,t,s)},PB=10,Tb,Mb,cM;function AB(){Tb=[],Mb=[];for(var i=0;i<=PB;i++){var e=4<<i;Tb[i]=.5/Math.cos(4*Math.acos(0)/e),Mb[i]=.5/(Math.cos(2*Math.acos(0)/e)*Math.cos(2*Math.acos(0)/e))}cM=!0}function RB(i,e,n,t,r,s,a){for(var l=1;l<=PB;l++){var h=(n+r)*Tb[l],u=(t+s)*Tb[l],f=i-h,p=e-u;if(f*f+p*p<=a)return!0;var g=r-h,v=s-u;if(f*g+p*v>=0&&f*g+p*v<=g*g+v*v&&(p*g-f*v>=0||a*(g*g+v*v)>=(p*g-f*v)*(p*g-f*v)))return!0;var y=n-h,w=t-u;if(f*y+p*w>=0&&f*y+p*w<=y*y+w*w&&(p*y-f*w<=0||a*(y*y+w*w)>=(p*y-f*w)*(p*y-f*w)))return!0;var x=(n+h)*Mb[l],S=(t+u)*Mb[l];if((x-i)*(x-i)+(S-e)*(S-e)<a){r=h,s=u;continue}var _=h-x+h,O=u-S+u;if((_-i)*(_-i)+(O-e)*(O-e)<a){n=h,t=u;continue}var k=x-h,M=S-u;if(p*k-f*M<=0||a*(k*k+M*M)>(p*k-f*M)*(p*k-f*M)){if(f*k+p*M>0){if(Math.abs(f*k+p*M)<=k*k+M*M||(i-x)*(n-x)+(e-S)*(t-S)>=0){r=h,s=u;continue}}else if(-(f*k+p*M)<=k*k+M*M||(i-_)*(r-_)+(e-O)*(s-O)>=0){n=h,t=u;continue}}return!1}return!1}function Fye(i,e,n,t,r,s,a,l){cM||AB();var h=Math.abs(r-i)*l,u=Math.abs(s-e)*a;n*=l,t*=a;var f=a*l;return h*h+(t-u)*(t-u)<=f*f||(n-h)*(n-h)+u*u<=f*f||h*t+u*n<=n*t||(h*t+u*n-n*t)*(h*t+u*n-n*t)<=f*f*(n*n+t*t)&&h*n-u*t>=-t*t&&h*n-u*t<=n*n?!0:(h-n)*(h-n)+(u-t)*(u-t)<=f*f||h<=n&&u-f<=t||u<=t&&h-f<=n?RB(h,u,n,0,0,t,f*f):!1}function Xye(i,e,n,t,r,s,a){cM||AB();var l=Math.abs(r-i),h=Math.abs(s-e);return l*l+(t-h)*(t-h)<=a*a||(n-l)*(n-l)+h*h<=a*a||l*t+h*n<=n*t||(l*t+h*n-n*t)*(l*t+h*n-n*t)<=a*a*(n*n+t*t)&&l*n-h*t>=-t*t&&l*n-h*t<=n*n?!0:(l-n)*(l-n)+(h-t)*(h-t)<=a*a||l<=n&&h-a<=t||h<=t&&l-a<=n?RB(l,h,n,0,0,t,a*a):!1}var IB={ellipseCircle:Xye,ellipseEllipse:Fye},Wye=IB,DB=function(e,n,t,r,s,a,l){return Wye.ellipseCircle(e,n,t,r,s,a,l)},Qye=DB,Hye=function(e,n,t,r,s,a,l){return Qye(r,s,a,l,e,n,t)},dc=z0,Gye=aM,NB=function(e,n,t,r,s,a,l,h){h=h||1;var u=0;if(u+=dc(e,n,t,r,s)?1:0,u+=dc(e,n,t,r+a,s)?1:0,u+=dc(e,n,t,r,s+l)?1:0,u+=dc(e,n,t,r+a,s+l)?1:0,u===0)return Gye(r,s,a,l,e,n,t);if(u>=1&&u<=3)return!0;if(u===4)return!dc(e,n,t-h,r,s)||!dc(e,n,t-h,r+a,s)||!dc(e,n,t-h,r,s+l)||!dc(e,n,t-h,r+a,s+l)},Yye=ix,HR=z0,$B=function(e,n,t,r,s,a,l,h){return h=h||1,Yye(r,s,a,l,e,n,t)&&!(HR(e,n,t-h,r,s)&&HR(e,n,t-h,a,l))},GR=z0,VB=function(e,n,t,r,s,a){return a=a||1,GR(e,n,t,r,s)&&!GR(e,n,t-a,r,s)},LB=function(e,n,t,r,s,a,l,h){var u=t-e,f=r-n,p=l-s,g=h-a,v=(-f*(e-s)+u*(n-a))/(-p*f+u*g),y=(p*(n-a)-g*(e-s))/(-p*f+u*g);return v>=0&&v<=1&&y>=0&&y<=1},jye=F0,qye=LB,hM=function(e,n,t,r,s,a){var l=s.length;if(jye(s,e,n,a))return!0;for(var h=0;h<l;h+=2){var u=(h+2)%l;if(qye(e,n,t,r,s[h],s[h+1],s[u],s[u+1]))return!0}return!1},Zye=hM,Kye=function(e,n,t,r,s,a){return Zye(n,t,r,s,e,a)},uM=function(e,n){for(var t=e,r=n,s=[t,r],a,l,h,u,f,p,g=0;g<s.length;g++)for(var v=s[g],y=0;y<v.length;y+=2){var w=(y+2)%v.length,x={x:v[w+1]-v[y+1],y:v[y]-v[w]};for(a=l=null,p=0;p<t.length;p+=2)h=x.x*t[p]+x.y*t[p+1],(a===null||h<a)&&(a=h),(l===null||h>l)&&(l=h);for(u=f=null,p=0;p<r.length;p+=2)h=x.x*r[p]+x.y*r[p+1],(u===null||h<u)&&(u=h),(f===null||h>f)&&(f=h);if(l<u||f<a)return!1}return!0},Jye=uM,BB=function(e,n,t,r,s){var a=[n,t,n+r,t,n+r,t+s,n,t+s];return Jye(e,a)},dM=function(e,n,t,r,s,a,l,h){s-=e,l-=e,a-=n,h-=n;var u=Math.pow(l-s,2)/t/t+Math.pow(h-a,2)/r/r,f=2*s*(l-s)/t/t+2*a*(h-a)/r/r,p=s*s/t/t+a*a/r/r-1,g=f*f-4*u*p;if(g===0){var v=-f/2/u;return v>=0&&v<=1}else if(g>0){var y=Math.sqrt(g),w=(-f+y)/2/u,x=(-f-y)/2/u;return w>=0&&w<=1||x>=0&&x<=1}else return!1},e1e=dM,UB=function(e,n,t,r,s,a,l,h){return e1e(s,a,l,h,e,n,t,r)},t1e=F0,YR=UB,zB=function(e,n,t,r,s){if(t1e(e,n,t))return!0;for(var a=e.length,l=0;l<a-2;l+=2)if(YR(e[l],e[l+1],e[l+2],e[l+3],n,t,r,s))return!0;return YR(e[0],e[1],e[a-2],e[a-1],n,t,r,s)},rx=function(e,n,t,r,s,a){return s>=e&&s<=e+t&&a>=n&&a<=n+r},n1e=function(e,n,t,r,s,a,l,h){return e<s+l&&e+t>s&&n<a+h&&n+r>a},i1e=function(e,n,t,r,s){const a=Math.atan2(r-n,t-e)-Math.PI/2,l=s/2,h=Math.cos(a)*l,u=Math.sin(a)*l;return[e-h,n-u,t-h,r-u,t+h,r+u,e+h,n+u]};const n1=i1e,r1e=uM,jR=hM,s1e=LB;var FB=function(e,n,t,r,s,a,l,h,u,f){return u||f?o1e(e,n,t,r,s,a,l,h,u,f):s1e(e,n,t,r,s,a,l,h)};function o1e(i,e,n,t,r,s,a,l,h,u){if(h&&u)return r1e(n1(i,e,n,t,h),n1(r,s,a,l,u));if(h)return jR(r,s,a,l,n1(i,e,n,t,h));if(u)return jR(i,e,n,t,n1(r,s,a,l,h))}var qR=rx,i1=FB,XB=function(e,n,t,r,s,a,l,h){return qR(s,a,l,h,e,n)||qR(s,a,l,h,t,r)?!0:i1(e,n,t,r,s,a,s+l,a)||i1(e,n,t,r,s+l,a,s+l,a+h)||i1(e,n,t,r,s,a+h,s+l,a+h)||i1(e,n,t,r,s,a,s,a+h)},a1e=XB,l1e=function(e,n,t,r,s,a,l,h){return a1e(s,a,l,h,e,n,t,r)},c1e=BB,h1e=function(e,n,t,r,s){return c1e(s,e,n,t,r)},r1=dM,u1e=rx,WB=function(e,n,t,r,s,a,l,h){return u1e(s,a,l,h,e,n)||r1(e,n,t,r,s,a,s+l,a)||r1(e,n,t,r,s,a+h,s+l,a+h)||r1(e,n,t,r,s,a,s,a+h)||r1(e,n,t,r,s+l,a,s+l,a+h)},d1e=WB,f1e=function(e,n,t,r,s,a,l,h){return d1e(s,a,l,h,e,n,t,r)},p1e=NB,m1e=function(e,n,t,r,s,a,l,h){return p1e(s,a,l,e,n,t,r,h)},g1e=rx,v1e=function(e,n,t,r,s,a){return g1e(t,r,s,a,e,n)},y1e=F0,b1e=function(e,n,t,r){return y1e(t,e,n,r)},O1e=z0,x1e=function(e,n,t,r,s){return O1e(t,r,s,e,n)},w1e=lM,_1e=function(e,n,t,r,s,a){return w1e(t,r,s,a,e,n)},QB=function(e,n,t,r,s,a){var l=Math.pow(s-e,2)/(t*t),h=Math.pow(a-n,2)/(r*r);return l+h<=1},S1e=QB,C1e=function(e,n,t,r,s,a){return S1e(t,r,s,a,e,n)},k1e=VB,T1e=function(e,n,t,r,s,a){return k1e(e,n,t,r,s,a)},M1e=$B,E1e=function(e,n,t,r,s,a,l,h){return M1e(s,a,l,e,n,t,r,h)},P1e=IB,A1e=function(e,n,t,r,s,a,l,h){return P1e.ellipseEllipse(e,n,t,r,s,a,l,h)},R1e=zB,I1e=function(e,n,t,r,s){return R1e(s,e,n,t,r)},s1={circlePoint:z0,circleCircle:Iye,circleLine:Nye,circleBox:Vye,circlePolygon:zye,circleEllipse:Hye,circleOutlineBox:NB,circleOutlineLine:$B,circleOutlinePoint:VB,polygonPoint:F0,polygonLine:Kye,polygonPolygon:uM,polygonBox:BB,polygonCircle:EB,polygonEllipse:zB,boxPoint:rx,boxBox:n1e,boxLine:l1e,boxPolygon:h1e,boxCircle:aM,boxEllipse:f1e,boxCircleOutline:m1e,pointBox:v1e,pointPolygon:b1e,pointCircle:x1e,pointLine:_1e,pointEllipse:C1e,pointCircleOutline:T1e,lineLine:FB,lineBox:XB,linePolygon:hM,lineCircle:ix,linePoint:lM,lineEllipse:UB,lineCircleOutline:E1e,ellipsePoint:QB,ellipseLine:dM,ellipseBox:WB,ellipseCircle:DB,ellipseEllipse:A1e,ellipsePolygon:I1e};const ys=class ys{constructor(e,n){this.shapeType=e,e==ys.Box?this.size=n:e==ys.Circle&&(this.radius=n)}get center(){return this._center}set center(e){this._center=e}intersect(e){if(this.shapeType==ys.Box&&e.shapeType==ys.Box){var n=this.center.x-this.size/2,t=this.center.z-this.size/2,r=this.size,s=this.size,a=e.center.x-e.size/2,l=e.center.z-e.size/2,h=e.size,u=e.size,f=s1.boxBox(n,t,r,s,a,l,h,u);return f}else if(this.shapeType==ys.Box&&e.shapeType==ys.Circle){var n=this.center.x-this.size/2,t=this.center.z-this.size/2,r=this.size,s=this.size,p=e.center.x,g=e.center.z,v=e.radius,f=s1.boxCircle(n,t,r,s,p,g,v);return f}else if(this.shapeType==ys.Circle&&e.shapeType==ys.Box){var p=this.center.x,g=this.center.z,v=this.radius,a=e.center.x-e.size/2,l=e.center.z-e.size/2,h=e.size,u=e.size,f=s1.circleBox(p,g,v,n,t,r,s);return f}else if(this.shapeType==ys.Circle&&e.shapeType==ys.Circle){var n=this.center.x,t=this.center.z,y=this.radius,a=this.center.x,l=this.center.z,w=this.radius,f=s1.circleCircle(n,t,y,a,l,w);return f}}};Fv(ys,"Box","Box"),Fv(ys,"Circle","Circle");let Uc=ys;class D1e{constructor(){this.obj=this.createObject(),this.speed=4,this.power=1,game.timer.tick(this.update.bind(this)),this.shape=new Uc(Uc.Circle,.15)}createObject(){var e=game.ResStore.bullet_player.clone();return e}get CampType(){return lt.CampType.Player}get ObjectType(){return lt.ObjectType.Bullet}get Shape(){return this.shape.center=this.obj.position,this.shape}init(e){this.tank=e;var n=e.position.clone().add(new ne(0,.5,0));this.obj.position.copy(n),this.direction=e.getDirection(),this.speed=this.initBulletSpeed(),this.canHitTileTypes=this.initCanHitTileTypes(),this.power=this.initPower()}initBulletSpeed(){return this.tank.starCount<=0?4:8}initPower(){return this.tank.starCount<=2?1:2}initCanHitTileTypes(){var e=[];return e.push(lt.TileType.Home),e.push(lt.TileType.Brick),this.tank.getStarCount()>=3&&e.push(lt.TileType.Iron),e}onRemove(){}update({delta:e,elapsed:n}){var t=this.speed*e,r=lt.getDirectionVector(this.direction).multiplyScalar(t);this.obj.position.add(r)}}class N1e{constructor(){this.obj=this.createObject(),this.moveSpeed=2,this.shootDiff=.1,this.shootAcc=0,this.starCount=1,this.bullets=[],this.shape=new Uc(Uc.Box,1)}getMaxBulletCount(){return this.starCount<=1?1:2}getStarCount(){return this.starCount}createObject(){var e=game.ResStore.tank_player_1.clone();this.lightTarget=new An,e.add(this.lightTarget),this.lightTarget.position.set(0,.5,-10);var n=new QO(16777215);return n.position.set(0,.5,-.3),n.castShadow=!0,n.target=this.lightTarget,n.angle=Math.PI/4,n.intensity=10,n.penumbra=.2,e.add(n),this.spotLight=n,e}init(){game.onAddController.push(this.onAddController.bind(this)),game.onRemoveController.push(this.onRemoveController.bind(this))}onRemove(){lt.removeArrayValue(game.onAddController,this.onAddController.bind(this)),lt.removeArrayValue(game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e.CampType==lt.CampType.Player&&e.ObjectType==lt.ObjectType.Bullet&&this.bullets.push(e)}onRemoveController(e){e.CampType==lt.CampType.Player&&e.ObjectType==lt.ObjectType.Bullet&&lt.removeArrayValue(this.bullets,e)}get CampType(){return lt.CampType.Player}get ObjectType(){return lt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}ITank_update({delta:e,elapsed:n}){window.game.gameState==lt.GameState.Gaming&&(this.checkMove({delta:e,elapsed:n}),this.checkShoot({delta:e,elapsed:n}))}checkMove({delta:e,elapsed:n}){var t=game.getMoveDirection();if(t){var r=lt.getDirectionRotation(t);r!=this.rotation.y&&(this.rotation.y=r,lt.formatNum(this.position,.25));var s=game.getCanMoveLength(this,t);if(s>0){var a=this.moveSpeed*e;a>s&&(a=s);var l=lt.getDirectionVector(t).multiplyScalar(a);this.position.add(l)}}}getDirection(){return this.rotation.y==0?lt.Direction.Up:this.rotation.y==Math.PI?lt.Direction.Down:this.rotation.y==-Math.PI/2?lt.Direction.Right:this.rotation.y==Math.PI/2?lt.Direction.Left:lt.Direction.Up}shootPressed(){return game.inputs.c||game.inputs.j||game.inputs.f}checkShoot({delta:e,elapsed:n}){this.bullets.length>=this.getMaxBulletCount()||(this.shootAcc+=e,this.shootPressed()&&this.shootAcc>=this.shootDiff&&(this.shootAcc=0,this.doShoot()))}doShoot(){var e=new D1e;game.addController(e),e.init(this)}get position(){return this.obj.position}get rotation(){return this.obj.rotation}}class $1e{constructor(){this.delta=0,this.elapsed=0,this.records=[],this.shouldRemoves=[],this.shouldAdds=[]}update({delta:e,elapsed:n}){this.delta=e,this.elapsed=n;for(let r=0;r<this.records.length;++r){var t=this.records[r];t.acc+=e,t.acc>=t.second&&(t.callback({delta:t.acc,elapsed:n}),t.acc=0,t.times&&(t.times-=1,t.times<=0&&this.shouldRemoves.push(t.callback)))}this.checkRemove(),this.checkAdd()}checkAdd(){for(let e=0;e<this.shouldAdds.length;++e)this.records.push(this.shouldAdds[e]);this.shouldAdds.length=0}checkRemove(){for(let n=0;n<this.shouldRemoves.length;++n){var e=t=>t.callback==this.shouldRemoves[n];lt.removeArrayValueIf(this.records,e),lt.removeArrayValueIf(this.shouldAdds,e)}this.shouldRemoves.length=0}tick(e,n){n=n||0;var t={second:n,callback:e,acc:0};this.shouldAdds.push(t)}tickOnce(e,n){n=n||0;var t={second:n,callback:e,acc:0,times:1};this.shouldAdds.push(t)}untick(e){this.shouldRemoves.push(e)}}class tS{constructor(e,n,t){this.enermyMan=e,this.bornIndex=n,this.tankType=t,this.obj=this.createObject(),this.obj.position.copy(this.getBornPos(this.bornIndex)),this.obj.rotation.y=lt.getDirectionRotation(lt.Direction.Down),this.state=0,this.shape=new Uc(Uc.Box,1),this.moveSpeed=this.getSpeedTemplate(),this.blood=this.getBloodTemplate(),this.direction=this.getRandDirection(),this.moveDirectAcc=0,this.moveDirectMax=3}get position(){return this.obj.position}get rotation(){return this.obj.rotation}createObject(){var e=window.game.ResStore[`enermy${this.tankType+1}`],n=e.clone();return n}getSpeedTemplate(){var e=[2,3,4,2];return e[this.tankType]}getBloodTemplate(){var e=[1,2,1,4];return e[this.tankType]}getRandDirection(){for(var e=[lt.Direction.Up,lt.Direction.Right,lt.Direction.Down,lt.Direction.Left],n=[window.game.getCanMoveLength(this,lt.Direction.Up),window.game.getCanMoveLength(this,lt.Direction.Right),window.game.getCanMoveLength(this,lt.Direction.Down),window.game.getCanMoveLength(this,lt.Direction.Left)],t=n.findIndex(r=>r<=0);t>=0;)e.splice(t,1),n.splice(t,1),t=n.findIndex(r=>r<=0);return e.length>0?lt.randSplice(e):lt.Direction.Down}onAppearFinish(){this.state=1}get CampType(){return lt.CampType.Enermy}get ObjectType(){return lt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new ne(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new ne(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new ne(.25,0,.25))}ITank_update({delta:e}){this.state!=0&&(this.wantChangeDirection&&(this.direction=this.getRandDirection(),this.wantChangeDirection=!1,this.moveDirectAcc=0,this.moveDirectMax=1e3,lt.randInt(1,5)),this.checkMove({delta:e}),this.moveDirectAcc>=this.moveDirectMax&&(this.wantChangeDirection=!0))}checkMove({delta:e}){var n=lt.getDirectionRotation(this.direction);n!=this.rotation.y&&(this.rotation.y=n,lt.formatNum(this.position,.25));var t=game.getCanMoveLength(this,this.direction);if(t>0){var r=this.moveSpeed*e;r>t&&(r=t);var s=lt.getDirectionVector(this.direction).multiplyScalar(r);this.position.add(s),this.moveDirectAcc+=e}else this.wantChangeDirection=!0}}class V1e{constructor(){this.tanks=[],this.bornIndex=0,this.bornTime={},this.totalCount=20,this.destroyCount=0,console.log("EnermyMan")}start(){window.game.timer.tick(this.update.bind(this),1),window.game.onAddController.push(this.onAddController.bind(this)),window.game.onRemoveController.push(this.onRemoveController.bind(this))}dispose(){window.game.timer.untick(this.update.bind(this)),lt.removeArrayValue(window.game.onAddController,this.onAddController.bind(this)),lt.removeArrayValue(window.game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e instanceof tS&&this.tanks.push(e)}onRemoveController(e){e instanceof tS&&(lt.removeArrayValue(this.tanks,e),this.destroyCount+=1)}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new ne(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new ne(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new ne(.25,0,.25))}isEmptyBorn(){var e=this.bornTime[this.bornIndex]||0;return Date.now()-e>2e3}update({delta:e,elapsed:n}){for(;this.tanks.length<1&&this.isEmptyBorn();)this.makeEnermy()}makeEnermy(){var e=lt.randInt(0,3),n=new tS(this,this.bornIndex,e);window.game.addController(n),lt.makeTweenTankAppear(n.obj,n.onAppearFinish.bind(n)),this.bornTime[this.bornIndex]=Date.now(),this.bornIndex+=1,this.bornIndex=this.bornIndex%3}}const{onLoop:L1e}=Pu();class B1e{constructor(e){Fv(this,"tick",0);this.scene=e.value.context.scene.value,this.camera=e.value.context.camera.value}startGame(){this.rc=new Aye,this.inputs={},this.tiles=[],this.player_1=null,this.controllers=[],this.playerBullets=[],this.controllerShouldAdd=[],this.controllerShouldRemove=[],this.ITank_updates=[],this.onAddController=[],this.onRemoveController=[],this.timer=new $1e,L1e(this.update.bind(this));var e=this.ResStore.platform.clone();this.scene.add(e),this.tileRoot=new al,this.scene.add(this.tileRoot),this.startLevel(0),this.initInput(),e.visible=this.visible,this.tileRoot.visible=this.visible}startLevel(e){for(this.gameState=lt.GameState.Prepare;this.tileRoot.children.length>0;)this.tileRoot.remove(this.tileRoot.children[0]);this.initMap(e),this.initPlayer(),this.enermyMan&&this.enermyMan.dispose(),this.enermyMan=new V1e,this.timer.tickOnce(()=>{this.showPlayerAppear()},1)}initPlayer(){this.player_1&&this.removeController(this.player_1),this.player_1=new N1e,this.addController(this.player_1),this.player_1.position.copy(this.rc.getPositionByRC(22,9).add(new ne(-.25,-1,.25))),this.player_1.init()}showPlayerAppear(){lt.makeTween(this.player_1.obj.position).to({y:0},1e3).easing(au.Back.Out).onComplete(()=>{this.gameState=lt.GameState.Gaming,this.enermyMan.start()}).start()}run(){this.loadResource()}loadResource(){this.ResStore={};const e=["tank/platform.fbx","tank/tile1.fbx","tank/tile2.fbx","tank/tile9.fbx","tank/enermy1.fbx","tank/enermy2.fbx","tank/enermy3.fbx","tank/enermy4.fbx","tank/bullet_player.fbx","tank/tank_player_1.fbx"];rye(e).then(n=>{for(let r=0;r<n.length;++r){const s=n[r],a=e[r];this.ResStore[a]=s;var t=a.split("/");t=t[t.length-1],t=t.split("."),t=t[0],this.ResStore[t]=s}this.brickHitMaterial=this.ResStore.tile1.children[0].material.clone(),this.brickHitMaterial.color.setHex(8912896),this.startGame()})}initInput(){document.addEventListener("keydown",e=>{this.inputs[e.key]=1}),document.addEventListener("keyup",e=>{this.inputs[e.key]=0})}initMap(e){var n=lt.maps[e];for(let a=0;a<n.length;a++){const l=n[a];for(let h=0;h<l.length;h++){const u=l[h],f=this.rc.getIndexByRC(a,h);var t=null,r=0;if(u==lt.TileType.Brick){var t=this.ResStore.tile1.clone();this.tileRoot.add(t),t.position.copy(this.rc.getPositionByRC(a,h)),r=1}else if(u==lt.TileType.Iron){var t=this.ResStore.tile2.clone();this.tileRoot.add(t),t.position.copy(this.rc.getPositionByRC(a,h)),r=1}else if(u==lt.TileType.Home){var t=this.ResStore.tile9.clone();this.tileRoot.add(t),t.position.x=h*.5-6,t.position.z=a*.5-5.5,r=2}if(r==1){var s={tileType:u,obj:t,blood:2};this.tiles[f]=s}else if(r==2){var s={tileType:u,obj:t,blood:1};this.tiles[f]=s,this.tiles[this.rc.getIndexByRC(a,h+1)]=s,this.tiles[this.rc.getIndexByRC(a+1,h)]=s,this.tiles[this.rc.getIndexByRC(a+1,h+1)]=s}if(!this.tiles[f]){var s={tileType:u,obj:t};this.tiles[f]=s}}}}getTile(e,n){var t=this.rc.getIndexByRC(e,n);return this.tiles[t]}getTilesByGrid(e){var n=[];for(let r=e.minR;r<=e.maxR;++r)for(let s=e.minC;s<=e.maxC;++s){var t=this.getTile(r,s);t.tileType&&n.push(t)}return n}getMoveDirection(){return this.inputs.w?lt.Direction.Up:this.inputs.s?lt.Direction.Down:this.inputs.a?lt.Direction.Left:this.inputs.d?lt.Direction.Right:lt.Direction.None}getBlockTileRCs(e,n){let t=[];if(n==lt.Direction.Up)for(let s=e.minR;s>=0;--s)for(let a=e.minC;a<=e.maxC;++a){var r=this.getTile(s,a);r.tileType&&t.push({r:s,c:a})}else if(n==lt.Direction.Down)for(let s=e.maxR;s<=this.rc.Rows-1;++s)for(let a=e.minC;a<=e.maxC;++a){var r=this.getTile(s,a);r.tileType&&t.push({r:s,c:a})}else if(n==lt.Direction.Left)for(let s=e.minC;s>=0;--s)for(let a=e.minR;a<=e.maxR;++a){var r=this.getTile(a,s);r.tileType&&t.push({r:a,c:s})}else if(n==lt.Direction.Right)for(let s=e.maxC;s<=this.rc.Cols-1;++s)for(let a=e.minR;a<=e.maxR;++a){var r=this.getTile(a,s);r.tileType&&t.push({r:a,c:s})}return t}getCanMoveLength(e,n){var t=e.position.clone(),r=this.rc.getStandGrid(e.position,1),s=this.getBlockTileRCs(r,n),a=s[0],l=0;if(!a)n==lt.Direction.Up?l=t.z- -5.5:n==lt.Direction.Down?l=5.5-t.z:n==lt.Direction.Left?l=t.x- -6:n==lt.Direction.Right&&(l=6-t.x);else{var h=this.rc.getPositionByRC(a);n==lt.Direction.Up?l=t.z-.5-(h.z+.25):n==lt.Direction.Down?l=h.z-.25-(t.z+.5):n==lt.Direction.Left?l=t.x-.5-(h.x+.25):n==lt.Direction.Right&&(l=h.x-.25-(t.x+.5))}return l}update({delta:e,elapsed:n}){Eye(),this.checkRemoveController(),this.checkAddController();for(let t=0;t<this.ITank_updates.length;t++)this.ITank_updates[t].ITank_update({delta:e,elapsed:n});this.timer.update({delta:e,elapsed:n}),this.checkCollision({delta:e,elapsed:n}),this.checkRemoveController(),this.checkAddController(),this.makeCameraFollow({delta:e,elapsed:n})}makeCameraFollow({delta:e,elapsed:n}){}addController(e){e.obj&&this.tileRoot.add(e.obj),this.controllerShouldAdd.push(e),e.ITank_update&&this.ITank_updates.push(e);for(let t=0;t<this.onAddController.length;++t){var n=this.onAddController[t];n(e)}}checkAddController(){for(let e=0;e<this.controllerShouldAdd.length;e++){const n=this.controllerShouldAdd[e];this.controllers.push(n),n.CampType==lt.CampType.Player&&n.ObjectType==lt.ObjectType.Bullet&&this.playerBullets.push(n)}this.controllerShouldAdd.length=0}removeController(e){this.controllerShouldRemove.push(e),e.ITank_update&&lt.removeArrayValue(this.ITank_updates,e),e.onRemove&&e.onRemove();for(let t=0;t<this.onRemoveController.length;++t){var n=this.onRemoveController[t];n(e)}}checkRemoveController(){for(let e=0;e<this.controllerShouldRemove.length;e++){const n=this.controllerShouldRemove[e];lt.removeArrayValue(this.controllers,n),lt.removeArrayValue(this.playerBullets,n),this.tileRoot.remove(n.obj)}this.controllerShouldRemove.length=0}checkCollision({delta:e,elapsed:n}){for(let t=0;t<this.playerBullets.length;t++){const r=this.playerBullets[t];let s=this.rc.getStandGrid(r.obj.position,.5);if(this.rc.isGridInBound(s)){let a=this.getTilesByGrid(s);a.length>0&&this.onCollisionTiles(a,r)}else this.removeController(r)}for(let t=0;t<this.playerBullets.length;t++){const r=this.playerBullets[t];for(let s=0;s<this.enermyMan.tanks.length;s++){const a=this.enermyMan.tanks[s];if(a.Shape.intersect(r.Shape)){this.onCollisionBulletVsTank(r,a);break}}}}removeTile(e,n){}onCollisionTiles(e,n){this.removeController(n);for(let r=0;r<e.length;++r){var t=e[r];n.canHitTileTypes.indexOf(t.tileType)<0||(t.blood-=n.power,t.tileType==lt.TileType.Brick&&t.blood==1&&(t.obj.children[0].material=this.brickHitMaterial),t.blood<=0&&(t.tileType=0,this.tileRoot.remove(t.obj),t.obj=null))}}onCollisionBulletVsTank(e,n){this.removeController(e),this.removeController(n)}}const U1e=(i,e)=>{const n=i.__vccOpts||i;for(const[t,r]of e)n[t]=r;return n},z1e=jt("TresPerspectiveCamera",{position:[0,20,0],rotation:[0,0,0]},null,-1),F1e=jt("TresAmbientLight",{intensity:1},null,-1),X1e=jt("TresAxesHelper",null,null,-1),W1e={__name:"TankMain",setup(i){const e=dr(null);return Fn(e,()=>{window.game=new B1e(e),window.game.run()}),(n,t)=>{const r=Rt("TresCanvas");return mn(),xi("div",null,[Re(r,{ref_key:"canvasRef",ref:e,"clear-color":"#FDF5E6","window-size":""},{default:Je(()=>[z1e,F1e,X1e,Re(an(iM))]),_:1},512)])}}};var W1={exports:{}},em={},nS={},iS={},ZR;function On(){return ZR||(ZR=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i._registerNode=i.Konva=i.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}i.glob=typeof Kd<"u"?Kd:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},i.Konva={_global:i.glob,version:"9.3.12",isBrowser:n(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return i.Konva.angleDeg?r*e:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return i.Konva.DD.isDragging},isTransforming(){var r;return(r=i.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!i.Konva.DD.node},releaseCanvasOnDestroy:!0,document:i.glob.document,_injectGlobal(r){i.glob.Konva=r}};const t=r=>{i.Konva[r.prototype.getClassName()]=r};i._registerNode=t,i.Konva._injectGlobal(i.Konva)}(iS)),iS}var rS={},KR;function Ii(){return KR||(KR=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.Transform=void 0;const e=On();class n{constructor(k=[1,0,0,1,0,0]){this.dirty=!1,this.m=k&&k.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(k){k.m[0]=this.m[0],k.m[1]=this.m[1],k.m[2]=this.m[2],k.m[3]=this.m[3],k.m[4]=this.m[4],k.m[5]=this.m[5]}point(k){var M=this.m;return{x:M[0]*k.x+M[2]*k.y+M[4],y:M[1]*k.x+M[3]*k.y+M[5]}}translate(k,M){return this.m[4]+=this.m[0]*k+this.m[2]*M,this.m[5]+=this.m[1]*k+this.m[3]*M,this}scale(k,M){return this.m[0]*=k,this.m[1]*=k,this.m[2]*=M,this.m[3]*=M,this}rotate(k){var M=Math.cos(k),P=Math.sin(k),D=this.m[0]*M+this.m[2]*P,A=this.m[1]*M+this.m[3]*P,R=this.m[0]*-P+this.m[2]*M,T=this.m[1]*-P+this.m[3]*M;return this.m[0]=D,this.m[1]=A,this.m[2]=R,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(k,M){var P=this.m[0]+this.m[2]*M,D=this.m[1]+this.m[3]*M,A=this.m[2]+this.m[0]*k,R=this.m[3]+this.m[1]*k;return this.m[0]=P,this.m[1]=D,this.m[2]=A,this.m[3]=R,this}multiply(k){var M=this.m[0]*k.m[0]+this.m[2]*k.m[1],P=this.m[1]*k.m[0]+this.m[3]*k.m[1],D=this.m[0]*k.m[2]+this.m[2]*k.m[3],A=this.m[1]*k.m[2]+this.m[3]*k.m[3],R=this.m[0]*k.m[4]+this.m[2]*k.m[5]+this.m[4],T=this.m[1]*k.m[4]+this.m[3]*k.m[5]+this.m[5];return this.m[0]=M,this.m[1]=P,this.m[2]=D,this.m[3]=A,this.m[4]=R,this.m[5]=T,this}invert(){var k=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),M=this.m[3]*k,P=-this.m[1]*k,D=-this.m[2]*k,A=this.m[0]*k,R=k*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=k*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=M,this.m[1]=P,this.m[2]=D,this.m[3]=A,this.m[4]=R,this.m[5]=T,this}getMatrix(){return this.m}decompose(){var k=this.m[0],M=this.m[1],P=this.m[2],D=this.m[3],A=this.m[4],R=this.m[5],T=k*D-M*P;let N={x:A,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(k!=0||M!=0){var L=Math.sqrt(k*k+M*M);N.rotation=M>0?Math.acos(k/L):-Math.acos(k/L),N.scaleX=L,N.scaleY=T/L,N.skewX=(k*P+M*D)/T,N.skewY=0}else if(P!=0||D!=0){var I=Math.sqrt(P*P+D*D);N.rotation=Math.PI/2-(D>0?Math.acos(-P/I):-Math.acos(P/I)),N.scaleX=T/I,N.scaleY=I,N.skewX=0,N.skewY=(k*P+M*D)/T}return N.rotation=i.Util._getRotation(N.rotation),N}}i.Transform=n;var t="[object Array]",r="[object Number]",s="[object String]",a="[object Boolean]",l=Math.PI/180,h=180/Math.PI,u="#",f="",p="0",g="Konva warning: ",v="Konva error: ",y="rgb(",w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},x=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,S=[];const _=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(O){setTimeout(O,60)};i.Util={_isElement(O){return!!(O&&O.nodeType==1)},_isFunction(O){return!!(O&&O.constructor&&O.call&&O.apply)},_isPlainObject(O){return!!O&&O.constructor===Object},_isArray(O){return Object.prototype.toString.call(O)===t},_isNumber(O){return Object.prototype.toString.call(O)===r&&!isNaN(O)&&isFinite(O)},_isString(O){return Object.prototype.toString.call(O)===s},_isBoolean(O){return Object.prototype.toString.call(O)===a},isObject(O){return O instanceof Object},isValidSelector(O){if(typeof O!="string")return!1;var k=O[0];return k==="#"||k==="."||k===k.toUpperCase()},_sign(O){return O===0||O>0?1:-1},requestAnimFrame(O){S.push(O),S.length===1&&_(function(){const k=S;S=[],k.forEach(function(M){M()})})},createCanvasElement(){var O=document.createElement("canvas");try{O.style=O.style||{}}catch{}return O},createImageElement(){return document.createElement("img")},_isInDocument(O){for(;O=O.parentNode;)if(O==document)return!0;return!1},_urlToImage(O,k){var M=i.Util.createImageElement();M.onload=function(){k(M)},M.src=O},_rgbToHex(O,k,M){return((1<<24)+(O<<16)+(k<<8)+M).toString(16).slice(1)},_hexToRgb(O){O=O.replace(u,f);var k=parseInt(O,16);return{r:k>>16&255,g:k>>8&255,b:k&255}},getRandomColor(){for(var O=(Math.random()*16777215<<0).toString(16);O.length<6;)O=p+O;return u+O},getRGB(O){var k;return O in w?(k=w[O],{r:k[0],g:k[1],b:k[2]}):O[0]===u?this._hexToRgb(O.substring(1)):O.substr(0,4)===y?(k=x.exec(O.replace(/ /g,"")),{r:parseInt(k[1],10),g:parseInt(k[2],10),b:parseInt(k[3],10)}):{r:0,g:0,b:0}},colorToRGBA(O){return O=O||"black",i.Util._namedColorToRBA(O)||i.Util._hex3ColorToRGBA(O)||i.Util._hex4ColorToRGBA(O)||i.Util._hex6ColorToRGBA(O)||i.Util._hex8ColorToRGBA(O)||i.Util._rgbColorToRGBA(O)||i.Util._rgbaColorToRGBA(O)||i.Util._hslColorToRGBA(O)},_namedColorToRBA(O){var k=w[O.toLowerCase()];return k?{r:k[0],g:k[1],b:k[2],a:1}:null},_rgbColorToRGBA(O){if(O.indexOf("rgb(")===0){O=O.match(/rgb\(([^)]+)\)/)[1];var k=O.split(/ *, */).map(Number);return{r:k[0],g:k[1],b:k[2],a:1}}},_rgbaColorToRGBA(O){if(O.indexOf("rgba(")===0){O=O.match(/rgba\(([^)]+)\)/)[1];var k=O.split(/ *, */).map((M,P)=>M.slice(-1)==="%"?P===3?parseInt(M)/100:parseInt(M)/100*255:Number(M));return{r:k[0],g:k[1],b:k[2],a:k[3]}}},_hex8ColorToRGBA(O){if(O[0]==="#"&&O.length===9)return{r:parseInt(O.slice(1,3),16),g:parseInt(O.slice(3,5),16),b:parseInt(O.slice(5,7),16),a:parseInt(O.slice(7,9),16)/255}},_hex6ColorToRGBA(O){if(O[0]==="#"&&O.length===7)return{r:parseInt(O.slice(1,3),16),g:parseInt(O.slice(3,5),16),b:parseInt(O.slice(5,7),16),a:1}},_hex4ColorToRGBA(O){if(O[0]==="#"&&O.length===5)return{r:parseInt(O[1]+O[1],16),g:parseInt(O[2]+O[2],16),b:parseInt(O[3]+O[3],16),a:parseInt(O[4]+O[4],16)/255}},_hex3ColorToRGBA(O){if(O[0]==="#"&&O.length===4)return{r:parseInt(O[1]+O[1],16),g:parseInt(O[2]+O[2],16),b:parseInt(O[3]+O[3],16),a:1}},_hslColorToRGBA(O){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(O)){const[k,...M]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(O),P=Number(M[0])/360,D=Number(M[1])/100,A=Number(M[2])/100;let R,T,N;if(D===0)return N=A*255,{r:Math.round(N),g:Math.round(N),b:Math.round(N),a:1};A<.5?R=A*(1+D):R=A+D-A*D;const L=2*A-R,I=[0,0,0];for(let $=0;$<3;$++)T=P+1/3*-($-1),T<0&&T++,T>1&&T--,6*T<1?N=L+(R-L)*6*T:2*T<1?N=R:3*T<2?N=L+(R-L)*(2/3-T)*6:N=L,I[$]=N*255;return{r:Math.round(I[0]),g:Math.round(I[1]),b:Math.round(I[2]),a:1}}},haveIntersection(O,k){return!(k.x>O.x+O.width||k.x+k.width<O.x||k.y>O.y+O.height||k.y+k.height<O.y)},cloneObject(O){var k={};for(var M in O)this._isPlainObject(O[M])?k[M]=this.cloneObject(O[M]):this._isArray(O[M])?k[M]=this.cloneArray(O[M]):k[M]=O[M];return k},cloneArray(O){return O.slice(0)},degToRad(O){return O*l},radToDeg(O){return O*h},_degToRad(O){return i.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),i.Util.degToRad(O)},_radToDeg(O){return i.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),i.Util.radToDeg(O)},_getRotation(O){return e.Konva.angleDeg?i.Util.radToDeg(O):O},_capitalize(O){return O.charAt(0).toUpperCase()+O.slice(1)},throw(O){throw new Error(v+O)},error(O){console.error(v+O)},warn(O){e.Konva.showWarnings&&console.warn(g+O)},each(O,k){for(var M in O)k(M,O[M])},_inRange(O,k,M){return k<=O&&O<M},_getProjectionToSegment(O,k,M,P,D,A){var R,T,N,L=(O-M)*(O-M)+(k-P)*(k-P);if(L==0)R=O,T=k,N=(D-M)*(D-M)+(A-P)*(A-P);else{var I=((D-O)*(M-O)+(A-k)*(P-k))/L;I<0?(R=O,T=k,N=(O-D)*(O-D)+(k-A)*(k-A)):I>1?(R=M,T=P,N=(M-D)*(M-D)+(P-A)*(P-A)):(R=O+I*(M-O),T=k+I*(P-k),N=(R-D)*(R-D)+(T-A)*(T-A))}return[R,T,N]},_getProjectionToLine(O,k,M){var P=i.Util.cloneObject(O),D=Number.MAX_VALUE;return k.forEach(function(A,R){if(!(!M&&R===k.length-1)){var T=k[(R+1)%k.length],N=i.Util._getProjectionToSegment(A.x,A.y,T.x,T.y,O.x,O.y),L=N[0],I=N[1],$=N[2];$<D&&(P.x=L,P.y=I,D=$)}}),P},_prepareArrayForTween(O,k,M){var P,D=[],A=[];if(O.length>k.length){var R=k;k=O,O=R}for(P=0;P<O.length;P+=2)D.push({x:O[P],y:O[P+1]});for(P=0;P<k.length;P+=2)A.push({x:k[P],y:k[P+1]});var T=[];return A.forEach(function(N){var L=i.Util._getProjectionToLine(N,D,M);T.push(L.x),T.push(L.y)}),T},_prepareToStringify(O){var k;O.visitedByCircularReferenceRemoval=!0;for(var M in O)if(O.hasOwnProperty(M)&&O[M]&&typeof O[M]=="object"){if(k=Object.getOwnPropertyDescriptor(O,M),O[M].visitedByCircularReferenceRemoval||i.Util._isElement(O[M]))if(k.configurable)delete O[M];else return null;else if(i.Util._prepareToStringify(O[M])===null)if(k.configurable)delete O[M];else return null}return delete O.visitedByCircularReferenceRemoval,O},_assign(O,k){for(var M in k)O[M]=k[M];return O},_getFirstPointerId(O){return O.touches?O.changedTouches[0].identifier:O.pointerId||999},releaseCanvas(...O){e.Konva.releaseCanvasOnDestroy&&O.forEach(k=>{k.width=0,k.height=0})},drawRoundedRectPath(O,k,M,P){let D=0,A=0,R=0,T=0;typeof P=="number"?D=A=R=T=Math.min(P,k/2,M/2):(D=Math.min(P[0]||0,k/2,M/2),A=Math.min(P[1]||0,k/2,M/2),T=Math.min(P[2]||0,k/2,M/2),R=Math.min(P[3]||0,k/2,M/2)),O.moveTo(D,0),O.lineTo(k-A,0),O.arc(k-A,A,A,Math.PI*3/2,0,!1),O.lineTo(k,M-T),O.arc(k-T,M-T,T,0,Math.PI/2,!1),O.lineTo(R,M),O.arc(R,M-R,R,Math.PI/2,Math.PI,!1),O.lineTo(0,D),O.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}}(rS)),rS}var tm={},sS={},di={},JR;function Cn(){if(JR)return di;JR=1,Object.defineProperty(di,"__esModule",{value:!0}),di.getComponentValidator=di.getBooleanValidator=di.getNumberArrayValidator=di.getFunctionValidator=di.getStringOrGradientValidator=di.getStringValidator=di.getNumberOrAutoValidator=di.getNumberOrArrayOfNumbersValidator=di.getNumberValidator=di.alphaComponent=di.RGBComponent=void 0;const i=On(),e=Ii();function n(y){return e.Util._isString(y)?'"'+y+'"':Object.prototype.toString.call(y)==="[object Number]"||e.Util._isBoolean(y)?y:Object.prototype.toString.call(y)}function t(y){return y>255?255:y<0?0:Math.round(y)}di.RGBComponent=t;function r(y){return y>1?1:y<1e-4?1e-4:y}di.alphaComponent=r;function s(){if(i.Konva.isUnminified)return function(y,w){return e.Util._isNumber(y)||e.Util.warn(n(y)+' is a not valid value for "'+w+'" attribute. The value should be a number.'),y}}di.getNumberValidator=s;function a(y){if(i.Konva.isUnminified)return function(w,x){let S=e.Util._isNumber(w),_=e.Util._isArray(w)&&w.length==y;return!S&&!_&&e.Util.warn(n(w)+' is a not valid value for "'+x+'" attribute. The value should be a number or Array<number>('+y+")"),w}}di.getNumberOrArrayOfNumbersValidator=a;function l(){if(i.Konva.isUnminified)return function(y,w){var x=e.Util._isNumber(y),S=y==="auto";return x||S||e.Util.warn(n(y)+' is a not valid value for "'+w+'" attribute. The value should be a number or "auto".'),y}}di.getNumberOrAutoValidator=l;function h(){if(i.Konva.isUnminified)return function(y,w){return e.Util._isString(y)||e.Util.warn(n(y)+' is a not valid value for "'+w+'" attribute. The value should be a string.'),y}}di.getStringValidator=h;function u(){if(i.Konva.isUnminified)return function(y,w){const x=e.Util._isString(y),S=Object.prototype.toString.call(y)==="[object CanvasGradient]"||y&&y.addColorStop;return x||S||e.Util.warn(n(y)+' is a not valid value for "'+w+'" attribute. The value should be a string or a native gradient.'),y}}di.getStringOrGradientValidator=u;function f(){if(i.Konva.isUnminified)return function(y,w){return e.Util._isFunction(y)||e.Util.warn(n(y)+' is a not valid value for "'+w+'" attribute. The value should be a function.'),y}}di.getFunctionValidator=f;function p(){if(i.Konva.isUnminified)return function(y,w){const x=Int8Array?Object.getPrototypeOf(Int8Array):null;return x&&y instanceof x||(e.Util._isArray(y)?y.forEach(function(S){e.Util._isNumber(S)||e.Util.warn('"'+w+'" attribute has non numeric element '+S+". Make sure that all elements are numbers.")}):e.Util.warn(n(y)+' is a not valid value for "'+w+'" attribute. The value should be a array of numbers.')),y}}di.getNumberArrayValidator=p;function g(){if(i.Konva.isUnminified)return function(y,w){var x=y===!0||y===!1;return x||e.Util.warn(n(y)+' is a not valid value for "'+w+'" attribute. The value should be a boolean.'),y}}di.getBooleanValidator=g;function v(y){if(i.Konva.isUnminified)return function(w,x){return w==null||e.Util.isObject(w)||e.Util.warn(n(w)+' is a not valid value for "'+x+'" attribute. The value should be an object with properties '+y),w}}return di.getComponentValidator=v,di}var eI;function xn(){return eI||(eI=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Factory=void 0;const e=Ii(),n=Cn();var t="get",r="set";i.Factory={addGetterSetter(s,a,l,h,u){i.Factory.addGetter(s,a,l),i.Factory.addSetter(s,a,h,u),i.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,l){var h=t+e.Util._capitalize(a);s.prototype[h]=s.prototype[h]||function(){var u=this.attrs[a];return u===void 0?l:u}},addSetter(s,a,l,h){var u=r+e.Util._capitalize(a);s.prototype[u]||i.Factory.overWriteSetter(s,a,l,h)},overWriteSetter(s,a,l,h){var u=r+e.Util._capitalize(a);s.prototype[u]=function(f){return l&&f!==void 0&&f!==null&&(f=l.call(this,f,a)),this._setAttr(a,f),h&&h.call(this),this}},addComponentsGetterSetter(s,a,l,h,u){var f=l.length,p=e.Util._capitalize,g=t+p(a),v=r+p(a),y,w;s.prototype[g]=function(){var S={};for(y=0;y<f;y++)w=l[y],S[w]=this.getAttr(a+p(w));return S};var x=(0,n.getComponentValidator)(l);s.prototype[v]=function(S){var _=this.attrs[a],O;h&&(S=h.call(this,S)),x&&x.call(this,S,a);for(O in S)S.hasOwnProperty(O)&&this._setAttr(a+p(O),S[O]);return S||l.forEach(k=>{this._setAttr(a+p(k),void 0)}),this._fireChangeEvent(a,_,S),u&&u.call(this),this},i.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){var l=e.Util._capitalize(a),h=r+l,u=t+l;s.prototype[a]=function(){return arguments.length?(this[h](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,a,l,h){e.Util.error("Adding deprecated "+a);var u=t+e.Util._capitalize(a),f=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(f);var p=this.attrs[a];return p===void 0?l:p},i.Factory.addSetter(s,a,h,function(){e.Util.error(f)}),i.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){e.Util.each(a,function(l,h){var u=s.prototype[h],f=t+e.Util._capitalize(l),p=r+e.Util._capitalize(l);function g(){u.apply(this,arguments),e.Util.error('"'+l+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}s.prototype[l]=g,s.prototype[f]=g,s.prototype[p]=g})},afterSetFilter(){this._filterUpToDate=!1}}}(sS)),sS}var Ja={},el={},tI;function HB(){if(tI)return el;tI=1,Object.defineProperty(el,"__esModule",{value:!0}),el.HitContext=el.SceneContext=el.Context=void 0;const i=Ii(),e=On();function n(S){var _=[],O=S.length,k=i.Util,M,P;for(M=0;M<O;M++)P=S[M],k._isNumber(P)?P=Math.round(P*1e3)/1e3:k._isString(P)||(P=P+""),_.push(P);return _}var t=",",r="(",s=")",a="([",l="])",h=";",u="()",f="=",p=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],g=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const v=100;let y=class{constructor(_){this.canvas=_,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(_){_.fillEnabled()&&this._fill(_)}_fill(_){}strokeShape(_){_.hasStroke()&&this._stroke(_)}_stroke(_){}fillStrokeShape(_){_.attrs.fillAfterStrokeEnabled?(this.strokeShape(_),this.fillShape(_)):(this.fillShape(_),this.strokeShape(_))}getTrace(_,O){var k=this.traceArr,M=k.length,P="",D,A,R,T;for(D=0;D<M;D++)A=k[D],R=A.method,R?(T=A.args,P+=R,_?P+=u:i.Util._isArray(T[0])?P+=a+T.join(t)+l:(O&&(T=T.map(N=>typeof N=="number"?Math.floor(N):N)),P+=r+T.join(t)+s)):(P+=A.property,_||(P+=f+A.val)),P+=h;return P}clearTrace(){this.traceArr=[]}_trace(_){var O=this.traceArr,k;O.push(_),k=O.length,k>=v&&O.shift()}reset(){var _=this.getCanvas().getPixelRatio();this.setTransform(1*_,0,0,1*_,0,0)}getCanvas(){return this.canvas}clear(_){var O=this.getCanvas();_?this.clearRect(_.x||0,_.y||0,_.width||0,_.height||0):this.clearRect(0,0,O.getWidth()/O.pixelRatio,O.getHeight()/O.pixelRatio)}_applyLineCap(_){const O=_.attrs.lineCap;O&&this.setAttr("lineCap",O)}_applyOpacity(_){var O=_.getAbsoluteOpacity();O!==1&&this.setAttr("globalAlpha",O)}_applyLineJoin(_){const O=_.attrs.lineJoin;O&&this.setAttr("lineJoin",O)}setAttr(_,O){this._context[_]=O}arc(_,O,k,M,P,D){this._context.arc(_,O,k,M,P,D)}arcTo(_,O,k,M,P){this._context.arcTo(_,O,k,M,P)}beginPath(){this._context.beginPath()}bezierCurveTo(_,O,k,M,P,D){this._context.bezierCurveTo(_,O,k,M,P,D)}clearRect(_,O,k,M){this._context.clearRect(_,O,k,M)}clip(..._){this._context.clip.apply(this._context,_)}closePath(){this._context.closePath()}createImageData(_,O){var k=arguments;if(k.length===2)return this._context.createImageData(_,O);if(k.length===1)return this._context.createImageData(_)}createLinearGradient(_,O,k,M){return this._context.createLinearGradient(_,O,k,M)}createPattern(_,O){return this._context.createPattern(_,O)}createRadialGradient(_,O,k,M,P,D){return this._context.createRadialGradient(_,O,k,M,P,D)}drawImage(_,O,k,M,P,D,A,R,T){var N=arguments,L=this._context;N.length===3?L.drawImage(_,O,k):N.length===5?L.drawImage(_,O,k,M,P):N.length===9&&L.drawImage(_,O,k,M,P,D,A,R,T)}ellipse(_,O,k,M,P,D,A,R){this._context.ellipse(_,O,k,M,P,D,A,R)}isPointInPath(_,O,k,M){return k?this._context.isPointInPath(k,_,O,M):this._context.isPointInPath(_,O,M)}fill(..._){this._context.fill.apply(this._context,_)}fillRect(_,O,k,M){this._context.fillRect(_,O,k,M)}strokeRect(_,O,k,M){this._context.strokeRect(_,O,k,M)}fillText(_,O,k,M){M?this._context.fillText(_,O,k,M):this._context.fillText(_,O,k)}measureText(_){return this._context.measureText(_)}getImageData(_,O,k,M){return this._context.getImageData(_,O,k,M)}lineTo(_,O){this._context.lineTo(_,O)}moveTo(_,O){this._context.moveTo(_,O)}rect(_,O,k,M){this._context.rect(_,O,k,M)}roundRect(_,O,k,M,P){this._context.roundRect(_,O,k,M,P)}putImageData(_,O,k){this._context.putImageData(_,O,k)}quadraticCurveTo(_,O,k,M){this._context.quadraticCurveTo(_,O,k,M)}restore(){this._context.restore()}rotate(_){this._context.rotate(_)}save(){this._context.save()}scale(_,O){this._context.scale(_,O)}setLineDash(_){this._context.setLineDash?this._context.setLineDash(_):"mozDash"in this._context?this._context.mozDash=_:"webkitLineDash"in this._context&&(this._context.webkitLineDash=_)}getLineDash(){return this._context.getLineDash()}setTransform(_,O,k,M,P,D){this._context.setTransform(_,O,k,M,P,D)}stroke(_){_?this._context.stroke(_):this._context.stroke()}strokeText(_,O,k,M){this._context.strokeText(_,O,k,M)}transform(_,O,k,M,P,D){this._context.transform(_,O,k,M,P,D)}translate(_,O){this._context.translate(_,O)}_enableTrace(){var _=this,O=p.length,k=this.setAttr,M,P,D=function(A){var R=_[A],T;_[A]=function(){return P=n(Array.prototype.slice.call(arguments,0)),T=R.apply(_,arguments),_._trace({method:A,args:P}),T}};for(M=0;M<O;M++)D(p[M]);_.setAttr=function(){k.apply(_,arguments);var A=arguments[0],R=arguments[1];(A==="shadowOffsetX"||A==="shadowOffsetY"||A==="shadowBlur")&&(R=R/this.canvas.getPixelRatio()),_._trace({property:A,val:R})}}_applyGlobalCompositeOperation(_){const O=_.attrs.globalCompositeOperation;var k=!O||O==="source-over";k||this.setAttr("globalCompositeOperation",O)}};el.Context=y,g.forEach(function(S){Object.defineProperty(y.prototype,S,{get(){return this._context[S]},set(_){this._context[S]=_}})});class w extends y{constructor(_,{willReadFrequently:O=!1}={}){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:O})}_fillColor(_){var O=_.fill();this.setAttr("fillStyle",O),_._fillFunc(this)}_fillPattern(_){this.setAttr("fillStyle",_._getFillPattern()),_._fillFunc(this)}_fillLinearGradient(_){var O=_._getLinearGradient();O&&(this.setAttr("fillStyle",O),_._fillFunc(this))}_fillRadialGradient(_){const O=_._getRadialGradient();O&&(this.setAttr("fillStyle",O),_._fillFunc(this))}_fill(_){const O=_.fill(),k=_.getFillPriority();if(O&&k==="color"){this._fillColor(_);return}const M=_.getFillPatternImage();if(M&&k==="pattern"){this._fillPattern(_);return}const P=_.getFillLinearGradientColorStops();if(P&&k==="linear-gradient"){this._fillLinearGradient(_);return}const D=_.getFillRadialGradientColorStops();if(D&&k==="radial-gradient"){this._fillRadialGradient(_);return}O?this._fillColor(_):M?this._fillPattern(_):P?this._fillLinearGradient(_):D&&this._fillRadialGradient(_)}_strokeLinearGradient(_){const O=_.getStrokeLinearGradientStartPoint(),k=_.getStrokeLinearGradientEndPoint(),M=_.getStrokeLinearGradientColorStops(),P=this.createLinearGradient(O.x,O.y,k.x,k.y);if(M){for(var D=0;D<M.length;D+=2)P.addColorStop(M[D],M[D+1]);this.setAttr("strokeStyle",P)}}_stroke(_){var O=_.dash(),k=_.getStrokeScaleEnabled();if(_.hasStroke()){if(!k){this.save();var M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(_),O&&_.dashEnabled()&&(this.setLineDash(O),this.setAttr("lineDashOffset",_.dashOffset())),this.setAttr("lineWidth",_.strokeWidth()),_.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var P=_.getStrokeLinearGradientColorStops();P?this._strokeLinearGradient(_):this.setAttr("strokeStyle",_.stroke()),_._strokeFunc(this),k||this.restore()}}_applyShadow(_){var O,k,M,P=(O=_.getShadowRGBA())!==null&&O!==void 0?O:"black",D=(k=_.getShadowBlur())!==null&&k!==void 0?k:5,A=(M=_.getShadowOffset())!==null&&M!==void 0?M:{x:0,y:0},R=_.getAbsoluteScale(),T=this.canvas.getPixelRatio(),N=R.x*T,L=R.y*T;this.setAttr("shadowColor",P),this.setAttr("shadowBlur",D*Math.min(Math.abs(N),Math.abs(L))),this.setAttr("shadowOffsetX",A.x*N),this.setAttr("shadowOffsetY",A.y*L)}}el.SceneContext=w;class x extends y{constructor(_){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:!0})}_fill(_){this.save(),this.setAttr("fillStyle",_.colorKey),_._fillFuncHit(this),this.restore()}strokeShape(_){_.hasHitStroke()&&this._stroke(_)}_stroke(_){if(_.hasHitStroke()){const P=_.getStrokeScaleEnabled();if(!P){this.save();var O=this.getCanvas().getPixelRatio();this.setTransform(O,0,0,O,0,0)}this._applyLineCap(_);var k=_.hitStrokeWidth(),M=k==="auto"?_.strokeWidth():k;this.setAttr("lineWidth",M),this.setAttr("strokeStyle",_.colorKey),_._strokeFuncHit(this),P||this.restore()}}}return el.HitContext=x,el}var nI;function sx(){if(nI)return Ja;nI=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.HitCanvas=Ja.SceneCanvas=Ja.Canvas=void 0;const i=Ii(),e=HB(),n=On(),t=xn(),r=Cn();var s;function a(){if(s)return s;var f=i.Util.createCanvasElement(),p=f.getContext("2d");return s=function(){var g=n.Konva._global.devicePixelRatio||1,v=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return g/v}(),i.Util.releaseCanvas(f),s}let l=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var g=p||{},v=g.pixelRatio||n.Konva.pixelRatio||a();this.pixelRatio=v,this._canvas=i.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){var g=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/g,this.getHeight()/g)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";var g=this.pixelRatio,v=this.getContext()._context;v.scale(g,g)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";var g=this.pixelRatio,v=this.getContext()._context;v.scale(g,g)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,g){this.setWidth(p||0),this.setHeight(g||0)}toDataURL(p,g){try{return this._canvas.toDataURL(p,g)}catch{try{return this._canvas.toDataURL()}catch(y){return i.Util.error("Unable to get data URL. "+y.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Ja.Canvas=l,t.Factory.addGetterSetter(l,"pixelRatio",void 0,(0,r.getNumberValidator)());class h extends l{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new e.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}Ja.SceneCanvas=h;class u extends l{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(p.width,p.height)}}return Ja.HitCanvas=u,Ja}var oS={},iI;function fM(){return iI||(iI=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DD=void 0;const e=On(),n=Ii();i.DD={get isDragging(){var t=!1;return i.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return i.DD._dragElements.forEach(r=>{t=r.node}),t},_dragElements:new Map,_drag(t){const r=[];i.DD._dragElements.forEach((s,a)=>{const{node:l}=s,h=l.getStage();h.setPointersPositions(t),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(t));const u=h._changedPointerPositions.find(g=>g.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){var f=l.dragDistance(),p=Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y));if(p<f||(l.startDrag({evt:t}),!l.isDragging()))return}l._setDragPosition(t,s),r.push(l)}}),r.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:t},!0)})},_endDragBefore(t){const r=[];i.DD._dragElements.forEach(s=>{const{node:a}=s,l=a.getStage();if(t&&l.setPointersPositions(t),!l._changedPointerPositions.find(f=>f.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(i.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&r.indexOf(u)===-1&&r.push(u)}),r.forEach(s=>{s.draw()})},_endDragAfter(t){i.DD._dragElements.forEach((r,s)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:t},!0),r.dragStatus!=="dragging"&&i.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",i.DD._endDragBefore,!0),window.addEventListener("touchend",i.DD._endDragBefore,!0),window.addEventListener("mousemove",i.DD._drag),window.addEventListener("touchmove",i.DD._drag),window.addEventListener("mouseup",i.DD._endDragAfter,!1),window.addEventListener("touchend",i.DD._endDragAfter,!1))}(oS)),oS}var rI;function Li(){if(rI)return tm;rI=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.Node=void 0;const i=Ii(),e=xn(),n=sx(),t=On(),r=fM(),s=Cn();var a="absoluteOpacity",l="allEventListeners",h="absoluteTransform",u="absoluteScale",f="canvas",p="Change",g="children",v="konva",y="listening",w="mouseenter",x="mouseleave",S="set",_="Shape",O=" ",k="stage",M="transform",P="Stage",D="visible",A=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(O);let R=1;class T{constructor(I){this._id=R++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(I),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(I){(I===M||I===h)&&this._cache.get(I)?this._cache.get(I).dirty=!0:I?this._cache.delete(I):this._cache.clear()}_getCache(I,$){var B=this._cache.get(I),U=I===M||I===h,Y=B===void 0||U&&B.dirty===!0;return Y&&(B=$.call(this),this._cache.set(I,B)),B}_calculate(I,$,B){if(!this._attachedDepsListeners.get(I)){const U=$.map(Y=>Y+"Change.konva").join(O);this.on(U,()=>{this._clearCache(I)}),this._attachedDepsListeners.set(I,!0)}return this._getCache(I,B)}_getCanvasCache(){return this._cache.get(f)}_clearSelfAndDescendantCache(I){this._clearCache(I),I===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(f)){const{scene:I,filter:$,hit:B}=this._cache.get(f);i.Util.releaseCanvas(I,$,B),this._cache.delete(f)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(I){var $=I||{},B={};($.x===void 0||$.y===void 0||$.width===void 0||$.height===void 0)&&(B=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var U=Math.ceil($.width||B.width),Y=Math.ceil($.height||B.height),Z=$.pixelRatio,ie=$.x===void 0?Math.floor(B.x):$.x,ce=$.y===void 0?Math.floor(B.y):$.y,ge=$.offset||0,Ae=$.drawBorder||!1,Se=$.hitCanvasPixelRatio||1;if(!U||!Y){i.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const he=Math.abs(Math.round(B.x)-ie)>.5?1:0,Ce=Math.abs(Math.round(B.y)-ce)>.5?1:0;U+=ge*2+he,Y+=ge*2+Ce,ie-=ge,ce-=ge;var pe=new n.SceneCanvas({pixelRatio:Z,width:U,height:Y}),j=new n.SceneCanvas({pixelRatio:Z,width:0,height:0,willReadFrequently:!0}),K=new n.HitCanvas({pixelRatio:Se,width:U,height:Y}),X=pe.getContext(),F=K.getContext();return K.isCache=!0,pe.isCache=!0,this._cache.delete(f),this._filterUpToDate=!1,$.imageSmoothingEnabled===!1&&(pe.getContext()._context.imageSmoothingEnabled=!1,j.getContext()._context.imageSmoothingEnabled=!1),X.save(),F.save(),X.translate(-ie,-ce),F.translate(-ie,-ce),this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this.drawScene(pe,this),this.drawHit(K,this),this._isUnderCache=!1,X.restore(),F.restore(),Ae&&(X.save(),X.beginPath(),X.rect(0,0,U,Y),X.closePath(),X.setAttr("strokeStyle","red"),X.setAttr("lineWidth",5),X.stroke(),X.restore()),this._cache.set(f,{scene:pe,filter:j,hit:K,x:ie,y:ce}),this._requestDraw(),this}isCached(){return this._cache.has(f)}getClientRect(I){throw new Error('abstract "getClientRect" method call')}_transformedRect(I,$){var B=[{x:I.x,y:I.y},{x:I.x+I.width,y:I.y},{x:I.x+I.width,y:I.y+I.height},{x:I.x,y:I.y+I.height}],U=1/0,Y=1/0,Z=-1/0,ie=-1/0,ce=this.getAbsoluteTransform($);return B.forEach(function(ge){var Ae=ce.point(ge);U===void 0&&(U=Z=Ae.x,Y=ie=Ae.y),U=Math.min(U,Ae.x),Y=Math.min(Y,Ae.y),Z=Math.max(Z,Ae.x),ie=Math.max(ie,Ae.y)}),{x:U,y:Y,width:Z-U,height:ie-Y}}_drawCachedSceneCanvas(I){I.save(),I._applyOpacity(this),I._applyGlobalCompositeOperation(this);const $=this._getCanvasCache();I.translate($.x,$.y);var B=this._getCachedSceneCanvas(),U=B.pixelRatio;I.drawImage(B._canvas,0,0,B.width/U,B.height/U),I.restore()}_drawCachedHitCanvas(I){var $=this._getCanvasCache(),B=$.hit;I.save(),I.translate($.x,$.y),I.drawImage(B._canvas,0,0,B.width/B.pixelRatio,B.height/B.pixelRatio),I.restore()}_getCachedSceneCanvas(){var I=this.filters(),$=this._getCanvasCache(),B=$.scene,U=$.filter,Y=U.getContext(),Z,ie,ce,ge;if(I){if(!this._filterUpToDate){var Ae=B.pixelRatio;U.setSize(B.width/B.pixelRatio,B.height/B.pixelRatio);try{for(Z=I.length,Y.clear(),Y.drawImage(B._canvas,0,0,B.getWidth()/Ae,B.getHeight()/Ae),ie=Y.getImageData(0,0,U.getWidth(),U.getHeight()),ce=0;ce<Z;ce++){if(ge=I[ce],typeof ge!="function"){i.Util.error("Filter should be type of function, but got "+typeof ge+" instead. Please check correct filters");continue}ge.call(this,ie),Y.putImageData(ie,0,0)}}catch(Se){i.Util.error("Unable to apply filter. "+Se.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return U}return B}on(I,$){if(this._cache&&this._cache.delete(l),arguments.length===3)return this._delegate.apply(this,arguments);var B=I.split(O),U=B.length,Y,Z,ie,ce,ge;for(Y=0;Y<U;Y++)Z=B[Y],ie=Z.split("."),ce=ie[0],ge=ie[1]||"",this.eventListeners[ce]||(this.eventListeners[ce]=[]),this.eventListeners[ce].push({name:ge,handler:$});return this}off(I,$){var B=(I||"").split(O),U=B.length,Y,Z,ie,ce,ge,Ae;if(this._cache&&this._cache.delete(l),!I)for(Z in this.eventListeners)this._off(Z);for(Y=0;Y<U;Y++)if(ie=B[Y],ce=ie.split("."),ge=ce[0],Ae=ce[1],ge)this.eventListeners[ge]&&this._off(ge,Ae,$);else for(Z in this.eventListeners)this._off(Z,Ae,$);return this}dispatchEvent(I){var $={target:this,type:I.type,evt:I};return this.fire(I.type,$),this}addEventListener(I,$){return this.on(I,function(B){$.call(this,B.evt)}),this}removeEventListener(I){return this.off(I),this}_delegate(I,$,B){var U=this;this.on(I,function(Y){for(var Z=Y.target.findAncestors($,!0,U),ie=0;ie<Z.length;ie++)Y=i.Util.cloneObject(Y),Y.currentTarget=Z[ie],B.call(Z[ie],Y)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(D),this._clearSelfAndDescendantCache(y)}_remove(){this._clearCaches();var I=this.getParent();I&&I.children&&(I.children.splice(this.index,1),I._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(I){var $="get"+i.Util._capitalize(I);return i.Util._isFunction(this[$])?this[$]():this.attrs[I]}getAncestors(){for(var I=this.getParent(),$=[];I;)$.push(I),I=I.getParent();return $}getAttrs(){return this.attrs||{}}setAttrs(I){return this._batchTransformChanges(()=>{var $,B;if(!I)return this;for($ in I)$!==g&&(B=S+i.Util._capitalize($),i.Util._isFunction(this[B])?this[B](I[$]):this._setAttr($,I[$]))}),this}isListening(){return this._getCache(y,this._isListening)}_isListening(I){if(!this.listening())return!1;const B=this.getParent();return B&&B!==I&&this!==I?B._isListening(I):!0}isVisible(){return this._getCache(D,this._isVisible)}_isVisible(I){if(!this.visible())return!1;const B=this.getParent();return B&&B!==I&&this!==I?B._isVisible(I):!0}shouldDrawHit(I,$=!1){if(I)return this._isVisible(I)&&this._isListening(I);var B=this.getLayer(),U=!1;r.DD._dragElements.forEach(Z=>{Z.dragStatus==="dragging"&&(Z.node.nodeType==="Stage"||Z.node.getLayer()===B)&&(U=!0)});var Y=!$&&!t.Konva.hitOnDragEnabled&&(U||t.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!Y}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var I=this.getDepth(),$=this,B=0,U,Y,Z,ie;function ce(Ae){for(U=[],Y=Ae.length,Z=0;Z<Y;Z++)ie=Ae[Z],B++,ie.nodeType!==_&&(U=U.concat(ie.getChildren().slice())),ie._id===$._id&&(Z=Y);U.length>0&&U[0].getDepth()<=I&&ce(U)}const ge=this.getStage();return $.nodeType!==P&&ge&&ce(ge.getChildren()),B}getDepth(){for(var I=0,$=this.parent;$;)I++,$=$.parent;return I}_batchTransformChanges(I){this._batchingTransformChange=!0,I(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(M),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(I){return this._batchTransformChanges(()=>{this.x(I.x),this.y(I.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const I=this.getStage();if(!I)return null;var $=I.getPointerPosition();if(!$)return null;var B=this.getAbsoluteTransform().copy();return B.invert(),B.point($)}getAbsolutePosition(I){let $=!1,B=this.parent;for(;B;){if(B.isCached()){$=!0;break}B=B.parent}$&&!I&&(I=!0);var U=this.getAbsoluteTransform(I).getMatrix(),Y=new i.Transform,Z=this.offset();return Y.m=U.slice(),Y.translate(Z.x,Z.y),Y.getTranslation()}setAbsolutePosition(I){const{x:$,y:B,...U}=this._clearTransform();this.attrs.x=$,this.attrs.y=B,this._clearCache(M);var Y=this._getAbsoluteTransform().copy();return Y.invert(),Y.translate(I.x,I.y),I={x:this.attrs.x+Y.getTranslation().x,y:this.attrs.y+Y.getTranslation().y},this._setTransform(U),this.setPosition({x:I.x,y:I.y}),this._clearCache(M),this._clearSelfAndDescendantCache(h),this}_setTransform(I){var $;for($ in I)this.attrs[$]=I[$]}_clearTransform(){var I={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,I}move(I){var $=I.x,B=I.y,U=this.x(),Y=this.y();return $!==void 0&&(U+=$),B!==void 0&&(Y+=B),this.setPosition({x:U,y:Y}),this}_eachAncestorReverse(I,$){var B=[],U=this.getParent(),Y,Z;if(!($&&$._id===this._id)){for(B.unshift(this);U&&(!$||U._id!==$._id);)B.unshift(U),U=U.parent;for(Y=B.length,Z=0;Z<Y;Z++)I(B[Z])}}rotate(I){return this.rotation(this.rotation()+I),this}moveToTop(){if(!this.parent)return i.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var I=this.index,$=this.parent.getChildren().length;return I<$-1?(this.parent.children.splice(I,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return i.Util.warn("Node has no parent. moveUp function is ignored."),!1;var I=this.index,$=this.parent.getChildren().length;return I<$-1?(this.parent.children.splice(I,1),this.parent.children.splice(I+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return i.Util.warn("Node has no parent. moveDown function is ignored."),!1;var I=this.index;return I>0?(this.parent.children.splice(I,1),this.parent.children.splice(I-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return i.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var I=this.index;return I>0?(this.parent.children.splice(I,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(I){if(!this.parent)return i.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(I<0||I>=this.parent.children.length)&&i.Util.warn("Unexpected value "+I+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var $=this.index;return this.parent.children.splice($,1),this.parent.children.splice(I,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var I=this.opacity(),$=this.getParent();return $&&!$._isUnderCache&&(I*=$.getAbsoluteOpacity()),I}moveTo(I){return this.getParent()!==I&&(this._remove(),I.add(this)),this}toObject(){var I=this.getAttrs(),$,B,U,Y,Z;const ie={attrs:{},className:this.getClassName()};for($ in I)B=I[$],Z=i.Util.isObject(B)&&!i.Util._isPlainObject(B)&&!i.Util._isArray(B),!Z&&(U=typeof this[$]=="function"&&this[$],delete I[$],Y=U?U.call(this):null,I[$]=B,Y!==B&&(ie.attrs[$]=B));return i.Util._prepareToStringify(ie)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(I,$,B){var U=[];$&&this._isMatch(I)&&U.push(this);for(var Y=this.parent;Y;){if(Y===B)return U;Y._isMatch(I)&&U.push(Y),Y=Y.parent}return U}isAncestorOf(I){return!1}findAncestor(I,$,B){return this.findAncestors(I,$,B)[0]}_isMatch(I){if(!I)return!1;if(typeof I=="function")return I(this);var $=I.replace(/ /g,"").split(","),B=$.length,U,Y;for(U=0;U<B;U++)if(Y=$[U],i.Util.isValidSelector(Y)||(i.Util.warn('Selector "'+Y+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Util.warn("Konva is awesome, right?")),Y.charAt(0)==="#"){if(this.id()===Y.slice(1))return!0}else if(Y.charAt(0)==="."){if(this.hasName(Y.slice(1)))return!0}else if(this.className===Y||this.nodeType===Y)return!0;return!1}getLayer(){var I=this.getParent();return I?I.getLayer():null}getStage(){return this._getCache(k,this._getStage)}_getStage(){var I=this.getParent();return I?I.getStage():null}fire(I,$={},B){return $.target=$.target||this,B?this._fireAndBubble(I,$):this._fire(I,$),this}getAbsoluteTransform(I){return I?this._getAbsoluteTransform(I):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(I){var $;if(I)return $=new i.Transform,this._eachAncestorReverse(function(U){var Y=U.transformsEnabled();Y==="all"?$.multiply(U.getTransform()):Y==="position"&&$.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},I),$;$=this._cache.get(h)||new i.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto($):$.reset();var B=this.transformsEnabled();if(B==="all")$.multiply(this.getTransform());else if(B==="position"){const U=this.attrs.x||0,Y=this.attrs.y||0,Z=this.attrs.offsetX||0,ie=this.attrs.offsetY||0;$.translate(U-Z,Y-ie)}return $.dirty=!1,$}getAbsoluteScale(I){for(var $=this;$;)$._isUnderCache&&(I=$),$=$.getParent();const U=this.getAbsoluteTransform(I).decompose();return{x:U.scaleX,y:U.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(M,this._getTransform)}_getTransform(){var I,$,B=this._cache.get(M)||new i.Transform;B.reset();var U=this.x(),Y=this.y(),Z=t.Konva.getAngle(this.rotation()),ie=(I=this.attrs.scaleX)!==null&&I!==void 0?I:1,ce=($=this.attrs.scaleY)!==null&&$!==void 0?$:1,ge=this.attrs.skewX||0,Ae=this.attrs.skewY||0,Se=this.attrs.offsetX||0,he=this.attrs.offsetY||0;return(U!==0||Y!==0)&&B.translate(U,Y),Z!==0&&B.rotate(Z),(ge!==0||Ae!==0)&&B.skew(ge,Ae),(ie!==1||ce!==1)&&B.scale(ie,ce),(Se!==0||he!==0)&&B.translate(-1*Se,-1*he),B.dirty=!1,B}clone(I){var $=i.Util.cloneObject(this.attrs),B,U,Y,Z,ie;for(B in I)$[B]=I[B];var ce=new this.constructor($);for(B in this.eventListeners)for(U=this.eventListeners[B],Y=U.length,Z=0;Z<Y;Z++)ie=U[Z],ie.name.indexOf(v)<0&&(ce.eventListeners[B]||(ce.eventListeners[B]=[]),ce.eventListeners[B].push(ie));return ce}_toKonvaCanvas(I){I=I||{};var $=this.getClientRect(),B=this.getStage(),U=I.x!==void 0?I.x:Math.floor($.x),Y=I.y!==void 0?I.y:Math.floor($.y),Z=I.pixelRatio||1,ie=new n.SceneCanvas({width:I.width||Math.ceil($.width)||(B?B.width():0),height:I.height||Math.ceil($.height)||(B?B.height():0),pixelRatio:Z}),ce=ie.getContext();const ge=new n.SceneCanvas({width:ie.width/ie.pixelRatio+Math.abs(U),height:ie.height/ie.pixelRatio+Math.abs(Y),pixelRatio:ie.pixelRatio});return I.imageSmoothingEnabled===!1&&(ce._context.imageSmoothingEnabled=!1),ce.save(),(U||Y)&&ce.translate(-1*U,-1*Y),this.drawScene(ie,void 0,ge),ce.restore(),ie}toCanvas(I){return this._toKonvaCanvas(I)._canvas}toDataURL(I){I=I||{};var $=I.mimeType||null,B=I.quality||null,U=this._toKonvaCanvas(I).toDataURL($,B);return I.callback&&I.callback(U),U}toImage(I){return new Promise(($,B)=>{try{const U=I==null?void 0:I.callback;U&&delete I.callback,i.Util._urlToImage(this.toDataURL(I),function(Y){$(Y),U==null||U(Y)})}catch(U){B(U)}})}toBlob(I){return new Promise(($,B)=>{try{const U=I==null?void 0:I.callback;U&&delete I.callback,this.toCanvas(I).toBlob(Y=>{$(Y),U==null||U(Y)},I==null?void 0:I.mimeType,I==null?void 0:I.quality)}catch(U){B(U)}})}setSize(I){return this.width(I.width),this.height(I.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():t.Konva.dragDistance}_off(I,$,B){var U=this.eventListeners[I],Y,Z,ie;for(Y=0;Y<U.length;Y++)if(Z=U[Y].name,ie=U[Y].handler,(Z!=="konva"||$==="konva")&&(!$||Z===$)&&(!B||B===ie)){if(U.splice(Y,1),U.length===0){delete this.eventListeners[I];break}Y--}}_fireChangeEvent(I,$,B){this._fire(I+p,{oldVal:$,newVal:B})}addName(I){if(!this.hasName(I)){var $=this.name(),B=$?$+" "+I:I;this.name(B)}return this}hasName(I){if(!I)return!1;const $=this.name();if(!$)return!1;var B=($||"").split(/\s/g);return B.indexOf(I)!==-1}removeName(I){var $=(this.name()||"").split(/\s/g),B=$.indexOf(I);return B!==-1&&($.splice(B,1),this.name($.join(" "))),this}setAttr(I,$){var B=this[S+i.Util._capitalize(I)];return i.Util._isFunction(B)?B.call(this,$):this._setAttr(I,$),this}_requestDraw(){if(t.Konva.autoDrawEnabled){const I=this.getLayer()||this.getStage();I==null||I.batchDraw()}}_setAttr(I,$){var B=this.attrs[I];B===$&&!i.Util.isObject($)||($==null?delete this.attrs[I]:this.attrs[I]=$,this._shouldFireChangeEvents&&this._fireChangeEvent(I,B,$),this._requestDraw())}_setComponentAttr(I,$,B){var U;B!==void 0&&(U=this.attrs[I],U||(this.attrs[I]=this.getAttr(I)),this.attrs[I][$]=B,this._fireChangeEvent(I,U,B))}_fireAndBubble(I,$,B){$&&this.nodeType===_&&($.target=this);var U=(I===w||I===x)&&(B&&(this===B||this.isAncestorOf&&this.isAncestorOf(B))||this.nodeType==="Stage"&&!B);if(!U){this._fire(I,$);var Y=(I===w||I===x)&&B&&B.isAncestorOf&&B.isAncestorOf(this)&&!B.isAncestorOf(this.parent);($&&!$.cancelBubble||!$)&&this.parent&&this.parent.isListening()&&!Y&&(B&&B.parent?this._fireAndBubble.call(this.parent,I,$,B):this._fireAndBubble.call(this.parent,I,$))}}_getProtoListeners(I){var $,B,U;const Y=($=this._cache.get(l))!==null&&$!==void 0?$:{};let Z=Y==null?void 0:Y[I];if(Z===void 0){Z=[];let ie=Object.getPrototypeOf(this);for(;ie;){const ce=(U=(B=ie.eventListeners)===null||B===void 0?void 0:B[I])!==null&&U!==void 0?U:[];Z.push(...ce),ie=Object.getPrototypeOf(ie)}Y[I]=Z,this._cache.set(l,Y)}return Z}_fire(I,$){$=$||{},$.currentTarget=this,$.type=I;const B=this._getProtoListeners(I);if(B)for(var U=0;U<B.length;U++)B[U].handler.call(this,$);const Y=this.eventListeners[I];if(Y)for(var U=0;U<Y.length;U++)Y[U].handler.call(this,$)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(I){var $=I?I.pointerId:void 0,B=this.getStage(),U=this.getAbsolutePosition();if(B){var Y=B._getPointerById($)||B._changedPointerPositions[0]||U;r.DD._dragElements.set(this._id,{node:this,startPointerPos:Y,offset:{x:Y.x-U.x,y:Y.y-U.y},dragStatus:"ready",pointerId:$})}}startDrag(I,$=!0){r.DD._dragElements.has(this._id)||this._createDragElement(I);const B=r.DD._dragElements.get(this._id);B.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:I&&I.evt},$)}_setDragPosition(I,$){const B=this.getStage()._getPointerById($.pointerId);if(B){var U={x:B.x-$.offset.x,y:B.y-$.offset.y},Y=this.dragBoundFunc();if(Y!==void 0){const Z=Y.call(this,U,I);Z?U=Z:i.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==U.x||this._lastPos.y!==U.y)&&(this.setAbsolutePosition(U),this._requestDraw()),this._lastPos=U}}stopDrag(I){const $=r.DD._dragElements.get(this._id);$&&($.dragStatus="stopped"),r.DD._endDragBefore(I),r.DD._endDragAfter(I)}setDraggable(I){this._setAttr("draggable",I),this._dragChange()}isDragging(){const I=r.DD._dragElements.get(this._id);return I?I.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(I){var $=I.evt.button!==void 0,B=!$||t.Konva.dragButtons.indexOf(I.evt.button)>=0;if(B&&!this.isDragging()){var U=!1;r.DD._dragElements.forEach(Y=>{this.isAncestorOf(Y.node)&&(U=!0)}),U||this._createDragElement(I)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var I=this.getStage();if(!I)return;const $=r.DD._dragElements.get(this._id),B=$&&$.dragStatus==="dragging",U=$&&$.dragStatus==="ready";B?this.stopDrag():U&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(I={x:0,y:0}){const $=this.getStage();if(!$)return!1;const B={x:-I.x,y:-I.y,width:$.width()+2*I.x,height:$.height()+2*I.y};return i.Util.haveIntersection(B,this.getClientRect())}static create(I,$){return i.Util._isString(I)&&(I=JSON.parse(I)),this._createNode(I,$)}static _createNode(I,$){var B=T.prototype.getClassName.call(I),U=I.children,Y,Z,ie;$&&(I.attrs.container=$),t.Konva[B]||(i.Util.warn('Can not find a node with class name "'+B+'". Fallback to "Shape".'),B="Shape");const ce=t.Konva[B];if(Y=new ce(I.attrs),U)for(Z=U.length,ie=0;ie<Z;ie++)Y.add(T._createNode(U[ie]));return Y}}tm.Node=T,T.prototype.nodeType="Node",T.prototype._attrsAffectingSize=[],T.prototype.eventListeners={},T.prototype.on.call(T.prototype,A,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(M),this._clearSelfAndDescendantCache(h)}),T.prototype.on.call(T.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(D)}),T.prototype.on.call(T.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(y)}),T.prototype.on.call(T.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const N=e.Factory.addGetterSetter;return N(T,"zIndex"),N(T,"absolutePosition"),N(T,"position"),N(T,"x",0,(0,s.getNumberValidator)()),N(T,"y",0,(0,s.getNumberValidator)()),N(T,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),N(T,"opacity",1,(0,s.getNumberValidator)()),N(T,"name","",(0,s.getStringValidator)()),N(T,"id","",(0,s.getStringValidator)()),N(T,"rotation",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"scale",["x","y"]),N(T,"scaleX",1,(0,s.getNumberValidator)()),N(T,"scaleY",1,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"skew",["x","y"]),N(T,"skewX",0,(0,s.getNumberValidator)()),N(T,"skewY",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"offset",["x","y"]),N(T,"offsetX",0,(0,s.getNumberValidator)()),N(T,"offsetY",0,(0,s.getNumberValidator)()),N(T,"dragDistance",null,(0,s.getNumberValidator)()),N(T,"width",0,(0,s.getNumberValidator)()),N(T,"height",0,(0,s.getNumberValidator)()),N(T,"listening",!0,(0,s.getBooleanValidator)()),N(T,"preventDefault",!0,(0,s.getBooleanValidator)()),N(T,"filters",null,function(L){return this._filterUpToDate=!1,L}),N(T,"visible",!0,(0,s.getBooleanValidator)()),N(T,"transformsEnabled","all",(0,s.getStringValidator)()),N(T,"size"),N(T,"dragBoundFunc"),N(T,"draggable",!1,(0,s.getBooleanValidator)()),e.Factory.backCompat(T,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),tm}var nm={},sI;function ox(){if(sI)return nm;sI=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.Container=void 0;const i=xn(),e=Li(),n=Cn();let t=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const a=this.children||[];var l=[];return a.forEach(function(h){s(h)&&l.push(h)}),l}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(var a=0;a<s.length;a++)this.add(s[a]);return this}const l=s[0];return l.getParent()?(l.moveTo(this),this):(this._validateAdd(l),l.index=this.getChildren().length,l.parent=this,l._clearCaches(),this.getChildren().push(l),this._fire("add",{child:l}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){var a=this._generalFind(s,!0);return a.length>0?a[0]:void 0}_generalFind(s,a){var l=[];return this._descendants(h=>{const u=h._isMatch(s);return u&&l.push(h),!!(u&&a)}),l}_descendants(s){let a=!1;const l=this.getChildren();for(const h of l){if(a=s(h),a)return!0;if(h.hasChildren()&&(a=h._descendants(s),a))return!0}return!1}toObject(){var s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(a=>{s.children.push(a.toObject())}),s}isAncestorOf(s){for(var a=s.getParent();a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(s){var a=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(l){a.add(l.clone())}),a}getAllIntersections(s){var a=[];return this.find("Shape").forEach(l=>{l.isVisible()&&l.intersects(s)&&a.push(l)}),a}_clearSelfAndDescendantCache(s){var a;super._clearSelfAndDescendantCache(s),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(l){l._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(a,l){a.index=l}),this._requestDraw()}drawScene(s,a,l){var h=this.getLayer(),u=s||h&&h.getCanvas(),f=u&&u.getContext(),p=this._getCanvasCache(),g=p&&p.scene,v=u&&u.isCache;if(!this.isVisible()&&!v)return this;if(g){f.save();var y=this.getAbsoluteTransform(a).getMatrix();f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(f),f.restore()}else this._drawChildren("drawScene",u,a,l);return this}drawHit(s,a){if(!this.shouldDrawHit(a))return this;var l=this.getLayer(),h=s||l&&l.hitCanvas,u=h&&h.getContext(),f=this._getCanvasCache(),p=f&&f.hit;if(p){u.save();var g=this.getAbsoluteTransform(a).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",h,a);return this}_drawChildren(s,a,l,h){var u,f=a&&a.getContext(),p=this.clipWidth(),g=this.clipHeight(),v=this.clipFunc(),y=typeof p=="number"&&typeof g=="number"||v;const w=l===this;if(y){f.save();var x=this.getAbsoluteTransform(l),S=x.getMatrix();f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),f.beginPath();let M;if(v)M=v.call(this,f,this);else{var _=this.clipX(),O=this.clipY();f.rect(_||0,O||0,p,g)}f.clip.apply(f,M),S=x.copy().invert().getMatrix(),f.transform(S[0],S[1],S[2],S[3],S[4],S[5])}var k=!w&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";k&&(f.save(),f._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(M){M[s](a,l,h)}),k&&f.restore(),y&&f.restore()}getClientRect(s={}){var a,l=s.skipTransform,h=s.relativeTo,u,f,p,g,v={x:1/0,y:1/0,width:0,height:0},y=this;(a=this.children)===null||a===void 0||a.forEach(function(O){if(O.visible()){var k=O.getClientRect({relativeTo:y,skipShadow:s.skipShadow,skipStroke:s.skipStroke});k.width===0&&k.height===0||(u===void 0?(u=k.x,f=k.y,p=k.x+k.width,g=k.y+k.height):(u=Math.min(u,k.x),f=Math.min(f,k.y),p=Math.max(p,k.x+k.width),g=Math.max(g,k.y+k.height)))}});for(var w=this.find("Shape"),x=!1,S=0;S<w.length;S++){var _=w[S];if(_._isVisible(this)){x=!0;break}}return x&&u!==void 0?v={x:u,y:f,width:p-u,height:g-f}:v={x:0,y:0,width:0,height:0},l?v:this._transformedRect(v,h)}};return nm.Container=t,i.Factory.addComponentsGetterSetter(t,"clip",["x","y","width","height"]),i.Factory.addGetterSetter(t,"clipX",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipY",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipWidth",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipHeight",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipFunc"),nm}var aS={},Xs={},oI;function GB(){if(oI)return Xs;oI=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.releaseCapture=Xs.setPointerCapture=Xs.hasPointerCapture=Xs.createEvent=Xs.getCapturedShape=void 0;const i=On(),e=new Map,n=i.Konva._global.PointerEvent!==void 0;function t(h){return e.get(h)}Xs.getCapturedShape=t;function r(h){return{evt:h,pointerId:h.pointerId}}Xs.createEvent=r;function s(h,u){return e.get(h)===u}Xs.hasPointerCapture=s;function a(h,u){l(h),u.getStage()&&(e.set(h,u),n&&u._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}Xs.setPointerCapture=a;function l(h,u){const f=e.get(h);if(!f)return;const p=f.getStage();p&&p.content,e.delete(h),n&&f._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return Xs.releaseCapture=l,Xs}var aI;function Q1e(){return aI||(aI=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Stage=i.stages=void 0;const e=Ii(),n=xn(),t=ox(),r=On(),s=sx(),a=fM(),l=On(),h=GB();var u="Stage",f="string",p="px",g="mouseout",v="mouseleave",y="mouseover",w="mouseenter",x="mousemove",S="mousedown",_="mouseup",O="pointermove",k="pointerdown",M="pointerup",P="pointercancel",D="lostpointercapture",A="pointerout",R="pointerleave",T="pointerover",N="pointerenter",L="contextmenu",I="touchstart",$="touchend",B="touchmove",U="touchcancel",Y="wheel",Z=5,ie=[[w,"_pointerenter"],[S,"_pointerdown"],[x,"_pointermove"],[_,"_pointerup"],[v,"_pointerleave"],[I,"_pointerdown"],[B,"_pointermove"],[$,"_pointerup"],[U,"_pointercancel"],[y,"_pointerover"],[Y,"_wheel"],[L,"_contextmenu"],[k,"_pointerdown"],[O,"_pointermove"],[M,"_pointerup"],[P,"_pointercancel"],[D,"_lostpointercapture"]];const ce={mouse:{[A]:g,[R]:v,[T]:y,[N]:w,[O]:x,[k]:S,[M]:_,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[R]:"touchleave",[T]:"touchover",[N]:"touchenter",[O]:B,[k]:I,[M]:$,[P]:U,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[R]:R,[T]:T,[N]:N,[O]:O,[k]:k,[M]:M,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ge=pe=>pe.indexOf("pointer")>=0?"pointer":pe.indexOf("touch")>=0?"touch":"mouse",Ae=pe=>{const j=ge(pe);if(j==="pointer")return r.Konva.pointerEventsEnabled&&ce.pointer;if(j==="touch")return ce.touch;if(j==="mouse")return ce.mouse};function Se(pe={}){return(pe.clipFunc||pe.clipWidth||pe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),pe}const he="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";i.stages=[];class Ce extends t.Container{constructor(j){super(Se(j)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),i.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Se(this.attrs)}),this._checkVisibility()}_validateAdd(j){const K=j.getType()==="Layer",X=j.getType()==="FastLayer";K||X||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const j=this.visible()?"":"none";this.content.style.display=j}setContainer(j){if(typeof j===f){if(j.charAt(0)==="."){var K=j.slice(1);j=document.getElementsByClassName(K)[0]}else{var X;j.charAt(0)!=="#"?X=j:X=j.slice(1),j=document.getElementById(X)}if(!j)throw"Can not find container in document with id "+X}return this._setAttr("container",j),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),j.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var j=this.children,K=j.length,X;for(X=0;X<K;X++)j[X].clear();return this}clone(j){return j||(j={}),j.container=typeof document<"u"&&document.createElement("div"),t.Container.prototype.clone.call(this,j)}destroy(){super.destroy();var j=this.content;j&&e.Util._isInDocument(j)&&this.container().removeChild(j);var K=i.stages.indexOf(this);return K>-1&&i.stages.splice(K,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const j=this._pointerPositions[0]||this._changedPointerPositions[0];return j?{x:j.x,y:j.y}:(e.Util.warn(he),null)}_getPointerById(j){return this._pointerPositions.find(K=>K.id===j)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(j){j=j||{},j.x=j.x||0,j.y=j.y||0,j.width=j.width||this.width(),j.height=j.height||this.height();var K=new s.SceneCanvas({width:j.width,height:j.height,pixelRatio:j.pixelRatio||1}),X=K.getContext()._context,F=this.children;return(j.x||j.y)&&X.translate(-1*j.x,-1*j.y),F.forEach(function(te){if(te.isVisible()){var re=te._toKonvaCanvas(j);X.drawImage(re._canvas,j.x,j.y,re.getWidth()/re.getPixelRatio(),re.getHeight()/re.getPixelRatio())}}),K}getIntersection(j){if(!j)return null;var K=this.children,X=K.length,F=X-1,te;for(te=F;te>=0;te--){const re=K[te].getIntersection(j);if(re)return re}return null}_resizeDOM(){var j=this.width(),K=this.height();this.content&&(this.content.style.width=j+p,this.content.style.height=K+p),this.bufferCanvas.setSize(j,K),this.bufferHitCanvas.setSize(j,K),this.children.forEach(X=>{X.setSize({width:j,height:K}),X.draw()})}add(j,...K){if(arguments.length>1){for(var X=0;X<arguments.length;X++)this.add(arguments[X]);return this}super.add(j);var F=this.children.length;return F>Z&&e.Util.warn("The stage has "+F+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),j.setSize({width:this.width(),height:this.height()}),j.draw(),r.Konva.isBrowser&&this.content.appendChild(j.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(j){return h.hasPointerCapture(j,this)}setPointerCapture(j){h.setPointerCapture(j,this)}releaseCapture(j){h.releaseCapture(j,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&ie.forEach(([j,K])=>{this.content.addEventListener(j,X=>{this[K](X)},{passive:!1})})}_pointerenter(j){this.setPointersPositions(j);const K=Ae(j.type);K&&this._fire(K.pointerenter,{evt:j,target:this,currentTarget:this})}_pointerover(j){this.setPointersPositions(j);const K=Ae(j.type);K&&this._fire(K.pointerover,{evt:j,target:this,currentTarget:this})}_getTargetShape(j){let K=this[j+"targetShape"];return K&&!K.getStage()&&(K=null),K}_pointerleave(j){const K=Ae(j.type),X=ge(j.type);if(K){this.setPointersPositions(j);var F=this._getTargetShape(X),te=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;F&&te?(F._fireAndBubble(K.pointerout,{evt:j}),F._fireAndBubble(K.pointerleave,{evt:j}),this._fire(K.pointerleave,{evt:j,target:this,currentTarget:this}),this[X+"targetShape"]=null):te&&(this._fire(K.pointerleave,{evt:j,target:this,currentTarget:this}),this._fire(K.pointerout,{evt:j,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(j){const K=Ae(j.type),X=ge(j.type);if(K){this.setPointersPositions(j);var F=!1;this._changedPointerPositions.forEach(te=>{var re=this.getIntersection(te);if(a.DD.justDragged=!1,r.Konva["_"+X+"ListenClick"]=!0,!re||!re.isListening()){this[X+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&re.setPointerCapture(te.id),this[X+"ClickStartShape"]=re,re._fireAndBubble(K.pointerdown,{evt:j,pointerId:te.id}),F=!0;const H=j.type.indexOf("touch")>=0;re.preventDefault()&&j.cancelable&&H&&j.preventDefault()}),F||this._fire(K.pointerdown,{evt:j,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(j){const K=Ae(j.type),X=ge(j.type);if(!K)return;r.Konva.isDragging()&&a.DD.node.preventDefault()&&j.cancelable&&j.preventDefault(),this.setPointersPositions(j);var F=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;if(!F)return;var te={};let re=!1;var H=this._getTargetShape(X);this._changedPointerPositions.forEach(q=>{const le=h.getCapturedShape(q.id)||this.getIntersection(q),fe=q.id,be={evt:j,pointerId:fe};var Me=H!==le;if(Me&&H&&(H._fireAndBubble(K.pointerout,{...be},le),H._fireAndBubble(K.pointerleave,{...be},le)),le){if(te[le._id])return;te[le._id]=!0}le&&le.isListening()?(re=!0,Me&&(le._fireAndBubble(K.pointerover,{...be},H),le._fireAndBubble(K.pointerenter,{...be},H),this[X+"targetShape"]=le),le._fireAndBubble(K.pointermove,{...be})):H&&(this._fire(K.pointerover,{evt:j,target:this,currentTarget:this,pointerId:fe}),this[X+"targetShape"]=null)}),re||this._fire(K.pointermove,{evt:j,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(j){const K=Ae(j.type),X=ge(j.type);if(!K)return;this.setPointersPositions(j);const F=this[X+"ClickStartShape"],te=this[X+"ClickEndShape"];var re={};let H=!1;this._changedPointerPositions.forEach(q=>{const le=h.getCapturedShape(q.id)||this.getIntersection(q);if(le){if(le.releaseCapture(q.id),re[le._id])return;re[le._id]=!0}const fe=q.id,be={evt:j,pointerId:fe};let Me=!1;r.Konva["_"+X+"InDblClickWindow"]?(Me=!0,clearTimeout(this[X+"DblTimeout"])):a.DD.justDragged||(r.Konva["_"+X+"InDblClickWindow"]=!0,clearTimeout(this[X+"DblTimeout"])),this[X+"DblTimeout"]=setTimeout(function(){r.Konva["_"+X+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),le&&le.isListening()?(H=!0,this[X+"ClickEndShape"]=le,le._fireAndBubble(K.pointerup,{...be}),r.Konva["_"+X+"ListenClick"]&&F&&F===le&&(le._fireAndBubble(K.pointerclick,{...be}),Me&&te&&te===le&&le._fireAndBubble(K.pointerdblclick,{...be}))):(this[X+"ClickEndShape"]=null,r.Konva["_"+X+"ListenClick"]&&this._fire(K.pointerclick,{evt:j,target:this,currentTarget:this,pointerId:fe}),Me&&this._fire(K.pointerdblclick,{evt:j,target:this,currentTarget:this,pointerId:fe}))}),H||this._fire(K.pointerup,{evt:j,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+X+"ListenClick"]=!1,j.cancelable&&X!=="touch"&&j.preventDefault()}_contextmenu(j){this.setPointersPositions(j);var K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(L,{evt:j}):this._fire(L,{evt:j,target:this,currentTarget:this})}_wheel(j){this.setPointersPositions(j);var K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(Y,{evt:j}):this._fire(Y,{evt:j,target:this,currentTarget:this})}_pointercancel(j){this.setPointersPositions(j);const K=h.getCapturedShape(j.pointerId)||this.getIntersection(this.getPointerPosition());K&&K._fireAndBubble(M,h.createEvent(j)),h.releaseCapture(j.pointerId)}_lostpointercapture(j){h.releaseCapture(j.pointerId)}setPointersPositions(j){var K=this._getContentPosition(),X=null,F=null;j=j||window.event,j.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(j.touches,te=>{this._pointerPositions.push({id:te.identifier,x:(te.clientX-K.left)/K.scaleX,y:(te.clientY-K.top)/K.scaleY})}),Array.prototype.forEach.call(j.changedTouches||j.touches,te=>{this._changedPointerPositions.push({id:te.identifier,x:(te.clientX-K.left)/K.scaleX,y:(te.clientY-K.top)/K.scaleY})})):(X=(j.clientX-K.left)/K.scaleX,F=(j.clientY-K.top)/K.scaleY,this.pointerPos={x:X,y:F},this._pointerPositions=[{x:X,y:F,id:e.Util._getFirstPointerId(j)}],this._changedPointerPositions=[{x:X,y:F,id:e.Util._getFirstPointerId(j)}])}_setPointerPosition(j){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(j)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var j=this.content.getBoundingClientRect();return{top:j.top,left:j.left,scaleX:j.width/this.content.clientWidth||1,scaleY:j.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!r.Konva.isBrowser){var j=this.container();if(!j)throw"Stage has no container. A container is required.";j.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),j.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(j){j.batchDraw()}),this}}i.Stage=Ce,Ce.prototype.nodeType=u,(0,l._registerNode)(Ce),n.Factory.addGetterSetter(Ce,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{i.stages.forEach(pe=>{pe.batchDraw()})})}(aS)),aS}var im={},lS={},lI;function pr(){return lI||(lI=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Shape=i.shapes=void 0;const e=On(),n=Ii(),t=xn(),r=Li(),s=Cn(),a=On(),l=GB();var h="hasShadow",u="shadowRGBA",f="patternImage",p="linearGradient",g="radialGradient";let v;function y(){return v||(v=n.Util.createCanvasElement().getContext("2d"),v)}i.shapes={};function w(R){const T=this.attrs.fillRule;T?R.fill(T):R.fill()}function x(R){R.stroke()}function S(R){R.fill()}function _(R){R.stroke()}function O(){this._clearCache(h)}function k(){this._clearCache(u)}function M(){this._clearCache(f)}function P(){this._clearCache(p)}function D(){this._clearCache(g)}class A extends r.Node{constructor(T){super(T);let N;for(;N=n.Util.getRandomColor(),!(N&&!(N in i.shapes)););this.colorKey=N,i.shapes[N]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var T=y();const N=T.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(N&&N.setTransform){const L=new n.Transform;L.translate(this.fillPatternX(),this.fillPatternY()),L.rotate(e.Konva.getAngle(this.fillPatternRotation())),L.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),L.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const I=L.getMatrix(),$=typeof DOMMatrix>"u"?{a:I[0],b:I[1],c:I[2],d:I[3],e:I[4],f:I[5]}:new DOMMatrix(I);N.setTransform($)}return N}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){var T=this.fillLinearGradientColorStops();if(T){for(var N=y(),L=this.fillLinearGradientStartPoint(),I=this.fillLinearGradientEndPoint(),$=N.createLinearGradient(L.x,L.y,I.x,I.y),B=0;B<T.length;B+=2)$.addColorStop(T[B],T[B+1]);return $}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){var T=this.fillRadialGradientColorStops();if(T){for(var N=y(),L=this.fillRadialGradientStartPoint(),I=this.fillRadialGradientEndPoint(),$=N.createRadialGradient(L.x,L.y,this.fillRadialGradientStartRadius(),I.x,I.y,this.fillRadialGradientEndRadius()),B=0;B<T.length;B+=2)$.addColorStop(T[B],T[B+1]);return $}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var T=n.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){var N=this.getStage();if(!N)return!1;const L=N.bufferHitCanvas;return L.getContext().clear(),this.drawHit(L,void 0,!0),L.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var N;if(!((N=this.attrs.perfectDrawEnabled)!==null&&N!==void 0?N:!0))return!1;const I=T||this.hasFill(),$=this.hasStroke(),B=this.getAbsoluteOpacity()!==1;if(I&&$&&B)return!0;const U=this.hasShadow(),Y=this.shadowForStrokeEnabled();return!!(I&&$&&U&&Y)}setStrokeHitEnabled(T){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let N=!1,L=this.getParent();for(;L;){if(L.isCached()){N=!0;break}L=L.getParent()}const I=T.skipTransform,$=T.relativeTo||N&&this.getStage()||void 0,B=this.getSelfRect(),Y=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Z=B.width+Y,ie=B.height+Y,ce=!T.skipShadow&&this.hasShadow(),ge=ce?this.shadowOffsetX():0,Ae=ce?this.shadowOffsetY():0,Se=Z+Math.abs(ge),he=ie+Math.abs(Ae),Ce=ce&&this.shadowBlur()||0,pe=Se+Ce*2,j=he+Ce*2,K={width:pe,height:j,x:-(Y/2+Ce)+Math.min(ge,0)+B.x,y:-(Y/2+Ce)+Math.min(Ae,0)+B.y};return I?K:this._transformedRect(K,$)}drawScene(T,N,L){var I=this.getLayer(),$=T||I.getCanvas(),B=$.getContext(),U=this._getCanvasCache(),Y=this.getSceneFunc(),Z=this.hasShadow(),ie,ce,ge=$.isCache,Ae=N===this;if(!this.isVisible()&&!Ae)return this;if(U){B.save();var Se=this.getAbsoluteTransform(N).getMatrix();return B.transform(Se[0],Se[1],Se[2],Se[3],Se[4],Se[5]),this._drawCachedSceneCanvas(B),B.restore(),this}if(!Y)return this;if(B.save(),this._useBufferCanvas()&&!ge){ie=this.getStage();const pe=L||ie.bufferCanvas;ce=pe.getContext(),ce.clear(),ce.save(),ce._applyLineJoin(this);var he=this.getAbsoluteTransform(N).getMatrix();ce.transform(he[0],he[1],he[2],he[3],he[4],he[5]),Y.call(this,ce,this),ce.restore();var Ce=pe.pixelRatio;Z&&B._applyShadow(this),B._applyOpacity(this),B._applyGlobalCompositeOperation(this),B.drawImage(pe._canvas,0,0,pe.width/Ce,pe.height/Ce)}else{if(B._applyLineJoin(this),!Ae){var he=this.getAbsoluteTransform(N).getMatrix();B.transform(he[0],he[1],he[2],he[3],he[4],he[5]),B._applyOpacity(this),B._applyGlobalCompositeOperation(this)}Z&&B._applyShadow(this),Y.call(this,B,this)}return B.restore(),this}drawHit(T,N,L=!1){if(!this.shouldDrawHit(N,L))return this;var I=this.getLayer(),$=T||I.hitCanvas,B=$&&$.getContext(),U=this.hitFunc()||this.sceneFunc(),Y=this._getCanvasCache(),Z=Y&&Y.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Z){B.save();var ie=this.getAbsoluteTransform(N).getMatrix();return B.transform(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5]),this._drawCachedHitCanvas(B),B.restore(),this}if(!U)return this;if(B.save(),B._applyLineJoin(this),!(this===N)){var ge=this.getAbsoluteTransform(N).getMatrix();B.transform(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5])}return U.call(this,B,this),B.restore(),this}drawHitFromCache(T=0){var N=this._getCanvasCache(),L=this._getCachedSceneCanvas(),I=N.hit,$=I.getContext(),B=I.getWidth(),U=I.getHeight(),Y,Z,ie,ce,ge,Ae;$.clear(),$.drawImage(L._canvas,0,0,B,U);try{for(Y=$.getImageData(0,0,B,U),Z=Y.data,ie=Z.length,ce=n.Util._hexToRgb(this.colorKey),ge=0;ge<ie;ge+=4)Ae=Z[ge+3],Ae>T?(Z[ge]=ce.r,Z[ge+1]=ce.g,Z[ge+2]=ce.b,Z[ge+3]=255):Z[ge+3]=0;$.putImageData(Y,0,0)}catch(Se){n.Util.error("Unable to draw hit graph from cached scene canvas. "+Se.message)}return this}hasPointerCapture(T){return l.hasPointerCapture(T,this)}setPointerCapture(T){l.setPointerCapture(T,this)}releaseCapture(T){l.releaseCapture(T,this)}}i.Shape=A,A.prototype._fillFunc=w,A.prototype._strokeFunc=x,A.prototype._fillFuncHit=S,A.prototype._strokeFuncHit=_,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,a._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",O),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",k),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",M),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),t.Factory.addGetterSetter(A,"stroke",void 0,(0,s.getStringOrGradientValidator)()),t.Factory.addGetterSetter(A,"strokeWidth",2,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),t.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(A,"lineJoin"),t.Factory.addGetterSetter(A,"lineCap"),t.Factory.addGetterSetter(A,"sceneFunc"),t.Factory.addGetterSetter(A,"hitFunc"),t.Factory.addGetterSetter(A,"dash"),t.Factory.addGetterSetter(A,"dashOffset",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"shadowColor",void 0,(0,s.getStringValidator)()),t.Factory.addGetterSetter(A,"shadowBlur",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"shadowOpacity",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),t.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternImage"),t.Factory.addGetterSetter(A,"fill",void 0,(0,s.getStringOrGradientValidator)()),t.Factory.addGetterSetter(A,"fillPatternX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),t.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),t.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),t.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),t.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),t.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),t.Factory.addGetterSetter(A,"fillEnabled",!0),t.Factory.addGetterSetter(A,"strokeEnabled",!0),t.Factory.addGetterSetter(A,"shadowEnabled",!0),t.Factory.addGetterSetter(A,"dashEnabled",!0),t.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),t.Factory.addGetterSetter(A,"fillPriority","color"),t.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),t.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),t.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),t.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),t.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),t.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),t.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),t.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),t.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),t.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),t.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),t.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),t.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),t.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),t.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),t.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),t.Factory.addGetterSetter(A,"fillPatternRotation",0),t.Factory.addGetterSetter(A,"fillRule",void 0,(0,s.getStringValidator)()),t.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(lS)),lS}var cI;function YB(){if(cI)return im;cI=1,Object.defineProperty(im,"__esModule",{value:!0}),im.Layer=void 0;const i=Ii(),e=ox(),n=Li(),t=xn(),r=sx(),s=Cn(),a=pr(),l=On();var h="#",u="beforeDraw",f="draw",p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],g=p.length;let v=class extends e.Container{constructor(w){super(w),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(w){return this.getContext().clear(w),this.getHitCanvas().getContext().clear(w),this}setZIndex(w){super.setZIndex(w);var x=this.getStage();return x&&x.content&&(x.content.removeChild(this.getNativeCanvasElement()),w<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[w+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);var w=this.getStage();return w&&w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var w=n.Node.prototype.moveUp.call(this);if(!w)return!1;var x=this.getStage();return!x||!x.content?!1:(x.content.removeChild(this.getNativeCanvasElement()),this.index<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[this.index+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){var w=this.getStage();if(w){var x=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),x[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){var w=this.getStage();if(w){var x=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),x[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var w=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),w&&w.parentNode&&i.Util._isInDocument(w)&&w.parentNode.removeChild(w),this}getStage(){return this.parent}setSize({width:w,height:x}){return this.canvas.setSize(w,x),this.hitCanvas.setSize(w,x),this._setSmoothEnabled(),this}_validateAdd(w){var x=w.getType();x!=="Group"&&x!=="Shape"&&i.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(w){return w=w||{},w.width=w.width||this.getWidth(),w.height=w.height||this.getHeight(),w.x=w.x!==void 0?w.x:this.x(),w.y=w.y!==void 0?w.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,w)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(w){if(!this.isListening()||!this.isVisible())return null;for(var x=1,S=!1;;){for(let _=0;_<g;_++){const O=p[_],k=this._getIntersection({x:w.x+O.x*x,y:w.y+O.y*x}),M=k.shape;if(M)return M;if(S=!!k.antialiased,!k.antialiased)break}if(S)x+=1;else return null}}_getIntersection(w){const x=this.hitCanvas.pixelRatio,S=this.hitCanvas.context.getImageData(Math.round(w.x*x),Math.round(w.y*x),1,1).data,_=S[3];if(_===255){const O=i.Util._rgbToHex(S[0],S[1],S[2]),k=a.shapes[h+O];return k?{shape:k}:{antialiased:!0}}else if(_>0)return{antialiased:!0};return{}}drawScene(w,x){var S=this.getLayer(),_=w||S&&S.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&_.getContext().clear(),e.Container.prototype.drawScene.call(this,_,x),this._fire(f,{node:this}),this}drawHit(w,x){var S=this.getLayer(),_=w||S&&S.hitCanvas;return S&&S.clearBeforeDraw()&&S.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,_,x),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(w){i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(w)}getHitGraphEnabled(w){return i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var w=this.parent,x=!!this.hitCanvas._canvas.parentNode;x?w.content.removeChild(this.hitCanvas._canvas):w.content.appendChild(this.hitCanvas._canvas)}}destroy(){return i.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return im.Layer=v,v.prototype.nodeType="Layer",(0,l._registerNode)(v),t.Factory.addGetterSetter(v,"imageSmoothingEnabled",!0),t.Factory.addGetterSetter(v,"clearBeforeDraw",!0),t.Factory.addGetterSetter(v,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),im}var rm={},hI;function H1e(){if(hI)return rm;hI=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.FastLayer=void 0;const i=Ii(),e=YB(),n=On();let t=class extends e.Layer{constructor(s){super(s),this.listening(!1),i.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return rm.FastLayer=t,t.prototype.nodeType="FastLayer",(0,n._registerNode)(t),rm}var sm={},uI;function pM(){if(uI)return sm;uI=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.Group=void 0;const i=Ii(),e=ox(),n=On();let t=class extends e.Container{_validateAdd(s){var a=s.getType();a!=="Group"&&a!=="Shape"&&i.Util.throw("You may only add groups and shapes to groups.")}};return sm.Group=t,t.prototype.nodeType="Group",(0,n._registerNode)(t),sm}var om={},dI;function mM(){if(dI)return om;dI=1,Object.defineProperty(om,"__esModule",{value:!0}),om.Animation=void 0;const i=On(),e=Ii(),n=function(){return i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return new Date().getTime()}}();let t=class Md{constructor(s,a){this.id=Md.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=s,this.setLayers(a)}setLayers(s){let a=[];return s&&(a=Array.isArray(s)?s:[s]),this.layers=a,this}getLayers(){return this.layers}addLayer(s){const a=this.layers,l=a.length;for(let h=0;h<l;h++)if(a[h]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const a=Md.animations,l=a.length;for(let h=0;h<l;h++)if(a[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),Md._addAnimation(this),this}stop(){return Md._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const a=s.id,l=this.animations,h=l.length;for(let u=0;u<h;u++)if(l[u].id===a){this.animations.splice(u,1);break}}static _runFrames(){const s={},a=this.animations;for(let l=0;l<a.length;l++){const h=a[l],u=h.layers,f=h.func;h._updateFrameObject(n());const p=u.length;let g;if(f?g=f.call(h,h.frame)!==!1:g=!0,!!g)for(let v=0;v<p;v++){const y=u[v];y._id!==void 0&&(s[y._id]=y)}}for(let l in s)s.hasOwnProperty(l)&&s[l].batchDraw()}static _animationLoop(){const s=Md;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return om.Animation=t,t.animations=[],t.animIdCounter=0,t.animRunning=!1,om}var cS={},fI;function G1e(){return fI||(fI=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Easings=i.Tween=void 0;const e=Ii(),n=mM(),t=Li(),r=On();var s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,l=2,h=3,u=0,f=["fill","stroke","shadowColor"];class p{constructor(y,w,x,S,_,O,k){this.prop=y,this.propFunc=w,this.begin=S,this._pos=S,this.duration=O,this._change=0,this.prevPos=0,this.yoyo=k,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=_-this.begin,this.pause()}fire(y){var w=this[y];w&&w()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=l,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===l?this.setTime(y):this.state===h&&this.setTime(this.duration-y)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(y){var w=this,x=y.node,S=x._id,_,O=y.easing||i.Easings.Linear,k=!!y.yoyo,M;typeof y.duration>"u"?_=.3:y.duration===0?_=.001:_=y.duration,this.node=x,this._id=u++;var P=x.getLayer()||(x instanceof r.Konva.Stage?x.getLayers():null);P||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){w.tween.onEnterFrame()},P),this.tween=new p(M,function(D){w._tweenFunc(D)},O,0,1,_*1e3,k),this._addListeners(),g.attrs[S]||(g.attrs[S]={}),g.attrs[S][this._id]||(g.attrs[S][this._id]={}),g.tweens[S]||(g.tweens[S]={});for(M in y)s[M]===void 0&&this._addAttr(M,y[M]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,w){var x=this.node,S=x._id,_,O,k,M,P,D,A,R;if(k=g.tweens[S][y],k&&delete g.attrs[S][k][y],_=x.getAttr(y),e.Util._isArray(w))if(O=[],P=Math.max(w.length,_.length),y==="points"&&w.length!==_.length&&(w.length>_.length?(A=_,_=e.Util._prepareArrayForTween(_,w,x.closed())):(D=w,w=e.Util._prepareArrayForTween(w,_,x.closed()))),y.indexOf("fill")===0)for(M=0;M<P;M++)if(M%2===0)O.push(w[M]-_[M]);else{var T=e.Util.colorToRGBA(_[M]);R=e.Util.colorToRGBA(w[M]),_[M]=T,O.push({r:R.r-T.r,g:R.g-T.g,b:R.b-T.b,a:R.a-T.a})}else for(M=0;M<P;M++)O.push(w[M]-_[M]);else f.indexOf(y)!==-1?(_=e.Util.colorToRGBA(_),R=e.Util.colorToRGBA(w),O={r:R.r-_.r,g:R.g-_.g,b:R.b-_.b,a:R.a-_.a}):O=w-_;g.attrs[S][this._id][y]={start:_,diff:O,end:w,trueEnd:D,trueStart:A},g.tweens[S][y]=this._id}_tweenFunc(y){var w=this.node,x=g.attrs[w._id][this._id],S,_,O,k,M,P,D,A;for(S in x){if(_=x[S],O=_.start,k=_.diff,A=_.end,e.Util._isArray(O))if(M=[],D=Math.max(O.length,A.length),S.indexOf("fill")===0)for(P=0;P<D;P++)P%2===0?M.push((O[P]||0)+k[P]*y):M.push("rgba("+Math.round(O[P].r+k[P].r*y)+","+Math.round(O[P].g+k[P].g*y)+","+Math.round(O[P].b+k[P].b*y)+","+(O[P].a+k[P].a*y)+")");else for(P=0;P<D;P++)M.push((O[P]||0)+k[P]*y);else f.indexOf(S)!==-1?M="rgba("+Math.round(O.r+k.r*y)+","+Math.round(O.g+k.g*y)+","+Math.round(O.b+k.b*y)+","+(O.a+k.a*y)+")":M=O+k*y;w.setAttr(S,M)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,w=g.attrs[y._id][this._id];w.points&&w.points.trueEnd&&y.setAttr("points",w.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,w=g.attrs[y._id][this._id];w.points&&w.points.trueStart&&y.points(w.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,w=this._id,x=g.tweens[y],S;this.pause();for(S in x)delete g.tweens[y][S];delete g.attrs[y][w]}}i.Tween=g,g.attrs={},g.tweens={},t.Node.prototype.to=function(v){var y=v.onFinish;v.node=this,v.onFinish=function(){this.destroy(),y&&y()};var w=new g(v);w.play()},i.Easings={BackEaseIn(v,y,w,x){var S=1.70158;return w*(v/=x)*v*((S+1)*v-S)+y},BackEaseOut(v,y,w,x){var S=1.70158;return w*((v=v/x-1)*v*((S+1)*v+S)+1)+y},BackEaseInOut(v,y,w,x){var S=1.70158;return(v/=x/2)<1?w/2*(v*v*(((S*=1.525)+1)*v-S))+y:w/2*((v-=2)*v*(((S*=1.525)+1)*v+S)+2)+y},ElasticEaseIn(v,y,w,x,S,_){var O=0;return v===0?y:(v/=x)===1?y+w:(_||(_=x*.3),!S||S<Math.abs(w)?(S=w,O=_/4):O=_/(2*Math.PI)*Math.asin(w/S),-(S*Math.pow(2,10*(v-=1))*Math.sin((v*x-O)*(2*Math.PI)/_))+y)},ElasticEaseOut(v,y,w,x,S,_){var O=0;return v===0?y:(v/=x)===1?y+w:(_||(_=x*.3),!S||S<Math.abs(w)?(S=w,O=_/4):O=_/(2*Math.PI)*Math.asin(w/S),S*Math.pow(2,-10*v)*Math.sin((v*x-O)*(2*Math.PI)/_)+w+y)},ElasticEaseInOut(v,y,w,x,S,_){var O=0;return v===0?y:(v/=x/2)===2?y+w:(_||(_=x*(.3*1.5)),!S||S<Math.abs(w)?(S=w,O=_/4):O=_/(2*Math.PI)*Math.asin(w/S),v<1?-.5*(S*Math.pow(2,10*(v-=1))*Math.sin((v*x-O)*(2*Math.PI)/_))+y:S*Math.pow(2,-10*(v-=1))*Math.sin((v*x-O)*(2*Math.PI)/_)*.5+w+y)},BounceEaseOut(v,y,w,x){return(v/=x)<1/2.75?w*(7.5625*v*v)+y:v<2/2.75?w*(7.5625*(v-=1.5/2.75)*v+.75)+y:v<2.5/2.75?w*(7.5625*(v-=2.25/2.75)*v+.9375)+y:w*(7.5625*(v-=2.625/2.75)*v+.984375)+y},BounceEaseIn(v,y,w,x){return w-i.Easings.BounceEaseOut(x-v,0,w,x)+y},BounceEaseInOut(v,y,w,x){return v<x/2?i.Easings.BounceEaseIn(v*2,0,w,x)*.5+y:i.Easings.BounceEaseOut(v*2-x,0,w,x)*.5+w*.5+y},EaseIn(v,y,w,x){return w*(v/=x)*v+y},EaseOut(v,y,w,x){return-w*(v/=x)*(v-2)+y},EaseInOut(v,y,w,x){return(v/=x/2)<1?w/2*v*v+y:-w/2*(--v*(v-2)-1)+y},StrongEaseIn(v,y,w,x){return w*(v/=x)*v*v*v*v+y},StrongEaseOut(v,y,w,x){return w*((v=v/x-1)*v*v*v*v+1)+y},StrongEaseInOut(v,y,w,x){return(v/=x/2)<1?w/2*v*v*v*v*v+y:w/2*((v-=2)*v*v*v*v+2)+y},Linear(v,y,w,x){return w*v/x+y}}}(cS)),cS}var pI;function Y1e(){return pI||(pI=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;const e=On(),n=Ii(),t=Li(),r=ox(),s=Q1e(),a=YB(),l=H1e(),h=pM(),u=fM(),f=pr(),p=mM(),g=G1e(),v=HB(),y=sx();i.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:t.Node,Container:r.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:l.FastLayer,Group:h.Group,DD:u.DD,Shape:f.Shape,shapes:f.shapes,Animation:p.Animation,Tween:g.Tween,Easings:g.Easings,Context:v.Context,Canvas:y.Canvas}),i.default=i.Konva}(nS)),nS}var am={},mI;function j1e(){if(mI)return am;mI=1,Object.defineProperty(am,"__esModule",{value:!0}),am.Arc=void 0;const i=xn(),e=pr(),n=On(),t=Cn(),r=On();let s=class extends e.Shape{_sceneFunc(l){var h=n.Konva.getAngle(this.angle()),u=this.clockwise();l.beginPath(),l.arc(0,0,this.outerRadius(),0,h,u),l.arc(0,0,this.innerRadius(),h,0,!u),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}getSelfRect(){const l=this.innerRadius(),h=this.outerRadius(),u=this.clockwise(),f=n.Konva.getAngle(u?360-this.angle():this.angle()),p=Math.cos(Math.min(f,Math.PI)),g=1,v=Math.sin(Math.min(Math.max(Math.PI,f),3*Math.PI/2)),y=Math.sin(Math.min(f,Math.PI/2)),w=p*(p>0?l:h),x=g*h,S=v*(v>0?l:h),_=y*(y>0?h:l);return{x:w,y:u?-1*_:S,width:x-w,height:_-S}}};return am.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),i.Factory.addGetterSetter(s,"innerRadius",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(s,"outerRadius",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(s,"angle",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(s,"clockwise",!1,(0,t.getBooleanValidator)()),am}var lm={},cm={},gI;function jB(){if(gI)return cm;gI=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.Line=void 0;const i=xn(),e=pr(),n=Cn(),t=On();function r(l,h,u,f,p,g,v){var y=Math.sqrt(Math.pow(u-l,2)+Math.pow(f-h,2)),w=Math.sqrt(Math.pow(p-u,2)+Math.pow(g-f,2)),x=v*y/(y+w),S=v*w/(y+w),_=u-x*(p-l),O=f-x*(g-h),k=u+S*(p-l),M=f+S*(g-h);return[_,O,k,M]}function s(l,h){var u=l.length,f=[],p,g;for(p=2;p<u-2;p+=2)g=r(l[p-2],l[p-1],l[p],l[p+1],l[p+2],l[p+3],h),!isNaN(g[0])&&(f.push(g[0]),f.push(g[1]),f.push(l[p]),f.push(l[p+1]),f.push(g[2]),f.push(g[3]));return f}class a extends e.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){var u=this.points(),f=u.length,p=this.tension(),g=this.closed(),v=this.bezier(),y,w,x;if(f){if(h.beginPath(),h.moveTo(u[0],u[1]),p!==0&&f>4){for(y=this.getTensionPoints(),w=y.length,x=g?0:4,g||h.quadraticCurveTo(y[0],y[1],y[2],y[3]);x<w-2;)h.bezierCurveTo(y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]);g||h.quadraticCurveTo(y[w-2],y[w-1],u[f-2],u[f-1])}else if(v)for(x=2;x<f;)h.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<f;x+=2)h.lineTo(u[x],u[x+1]);g?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){var h=this.points(),u=h.length,f=this.tension(),p=r(h[u-2],h[u-1],h[0],h[1],h[2],h[3],f),g=r(h[u-4],h[u-3],h[u-2],h[u-1],h[0],h[1],f),v=s(h,f),y=[p[2],p[3]].concat(v).concat([g[0],g[1],h[u-2],h[u-1],g[2],g[3],p[0],p[1],h[0],h[1]]);return y}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();for(var u=h[0],f=h[0],p=h[1],g=h[1],v,y,w=0;w<h.length/2;w++)v=h[w*2],y=h[w*2+1],u=Math.min(u,v),f=Math.max(f,v),p=Math.min(p,y),g=Math.max(g,y);return{x:u,y:p,width:f-u,height:g-p}}}return cm.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(a),i.Factory.addGetterSetter(a,"closed",!1),i.Factory.addGetterSetter(a,"bezier",!1),i.Factory.addGetterSetter(a,"tension",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(a,"points",[],(0,n.getNumberArrayValidator)()),cm}var hm={},hS={},vI;function q1e(){return vI||(vI=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.t2length=i.getQuadraticArcLength=i.getCubicArcLength=i.binomialCoefficients=i.cValues=i.tValues=void 0,i.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],i.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],i.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,l,h)=>{let u,f,p;u=h/2,f=0;for(let v=0;v<20;v++)p=u*i.tValues[20][v]+u,f+=i.cValues[20][v]*t(a,l,p);return u*f};i.getCubicArcLength=e;const n=(a,l,h)=>{h===void 0&&(h=1);const u=a[0]-2*a[1]+a[2],f=l[0]-2*l[1]+l[2],p=2*a[1]-2*a[0],g=2*l[1]-2*l[0],v=4*(u*u+f*f),y=4*(u*p+f*g),w=p*p+g*g;if(v===0)return h*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(l[2]-l[0],2));const x=y/(2*v),S=w/v,_=h+x,O=S-x*x,k=_*_+O>0?Math.sqrt(_*_+O):0,M=x*x+O>0?Math.sqrt(x*x+O):0,P=x+Math.sqrt(x*x+O)!==0?O*Math.log(Math.abs((_+k)/(x+M))):0;return Math.sqrt(v)/2*(_*k-x*M+P)};i.getQuadraticArcLength=n;function t(a,l,h){const u=r(1,h,a),f=r(1,h,l),p=u*u+f*f;return Math.sqrt(p)}const r=(a,l,h)=>{const u=h.length-1;let f,p;if(u===0)return 0;if(a===0){p=0;for(let g=0;g<=u;g++)p+=i.binomialCoefficients[u][g]*Math.pow(1-l,u-g)*Math.pow(l,g)*h[g];return p}else{f=new Array(u);for(let g=0;g<u;g++)f[g]=u*(h[g+1]-h[g]);return r(a-1,l,f)}},s=(a,l,h)=>{let u=1,f=a/l,p=(a-h(f))/l,g=0;for(;u>.001;){const v=h(f+p),y=Math.abs(a-v)/l;if(y<u)u=y,f+=p;else{const w=h(f-p),x=Math.abs(a-w)/l;x<u?(u=x,f-=p):p/=2}if(g++,g>500)break}return f};i.t2length=s}(hS)),hS}var yI;function gM(){if(yI)return hm;yI=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.Path=void 0;const i=xn(),e=pr(),n=On(),t=q1e();let r=class gs extends e.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=gs.parsePathData(this.data()),this.pathLength=gs.getPathLength(this.dataArray)}_sceneFunc(a){var l=this.dataArray;a.beginPath();for(var h=!1,u=0;u<l.length;u++){var f=l[u].command,p=l[u].points;switch(f){case"L":a.lineTo(p[0],p[1]);break;case"M":a.moveTo(p[0],p[1]);break;case"C":a.bezierCurveTo(p[0],p[1],p[2],p[3],p[4],p[5]);break;case"Q":a.quadraticCurveTo(p[0],p[1],p[2],p[3]);break;case"A":var g=p[0],v=p[1],y=p[2],w=p[3],x=p[4],S=p[5],_=p[6],O=p[7],k=y>w?y:w,M=y>w?1:y/w,P=y>w?w/y:1;a.translate(g,v),a.rotate(_),a.scale(M,P),a.arc(0,0,k,x,x+S,1-O),a.scale(1/M,1/P),a.rotate(-_),a.translate(-g,-v);break;case"z":h=!0,a.closePath();break}}!h&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){var a=[];this.dataArray.forEach(function(y){if(y.command==="A"){var w=y.points[4],x=y.points[5],S=y.points[4]+x,_=Math.PI/180;if(Math.abs(w-S)<_&&(_=Math.abs(w-S)),x<0)for(let O=w-_;O>S;O-=_){const k=gs.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],O,0);a.push(k.x,k.y)}else for(let O=w+_;O<S;O+=_){const k=gs.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],O,0);a.push(k.x,k.y)}}else if(y.command==="C")for(let O=0;O<=1;O+=.01){const k=gs.getPointOnCubicBezier(O,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3],y.points[4],y.points[5]);a.push(k.x,k.y)}else a=a.concat(y.points)});for(var l=a[0],h=a[0],u=a[1],f=a[1],p,g,v=0;v<a.length/2;v++)p=a[v*2],g=a[v*2+1],isNaN(p)||(l=Math.min(l,p),h=Math.max(h,p)),isNaN(g)||(u=Math.min(u,g),f=Math.max(f,g));return{x:l,y:u,width:h-l,height:f-u}}getLength(){return this.pathLength}getPointAtLength(a){return gs.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,l,h,u){return Math.sqrt((h-a)*(h-a)+(u-l)*(u-l))}static getPathLength(a){let l=0;for(var h=0;h<a.length;++h)l+=a[h].pathLength;return l}static getPointAtLengthOfDataArray(a,l){var h,u=0,f=l.length;if(!f)return null;for(;u<f&&a>l[u].pathLength;)a-=l[u].pathLength,++u;if(u===f)return h=l[u-1].points.slice(-2),{x:h[0],y:h[1]};if(a<.01)return h=l[u].points.slice(0,2),{x:h[0],y:h[1]};var p=l[u],g=p.points;switch(p.command){case"L":return gs.getPointOnLine(a,p.start.x,p.start.y,g[0],g[1]);case"C":return gs.getPointOnCubicBezier((0,t.t2length)(a,gs.getPathLength(l),k=>(0,t.getCubicArcLength)([p.start.x,g[0],g[2],g[4]],[p.start.y,g[1],g[3],g[5]],k)),p.start.x,p.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return gs.getPointOnQuadraticBezier((0,t.t2length)(a,gs.getPathLength(l),k=>(0,t.getQuadraticArcLength)([p.start.x,g[0],g[2]],[p.start.y,g[1],g[3]],k)),p.start.x,p.start.y,g[0],g[1],g[2],g[3]);case"A":var v=g[0],y=g[1],w=g[2],x=g[3],S=g[4],_=g[5],O=g[6];return S+=_*a/p.pathLength,gs.getPointOnEllipticalArc(v,y,w,x,S,O)}return null}static getPointOnLine(a,l,h,u,f,p,g){p=p??l,g=g??h;const v=this.getLineLength(l,h,u,f);if(v<1e-10)return{x:l,y:h};if(u===l)return{x:p,y:g+(f>h?a:-a)};const y=(f-h)/(u-l),w=Math.sqrt(a*a/(1+y*y))*(u<l?-1:1),x=y*w;if(Math.abs(g-h-y*(p-l))<1e-10)return{x:p+w,y:g+x};const S=((p-l)*(u-l)+(g-h)*(f-h))/(v*v),_=l+S*(u-l),O=h+S*(f-h),k=this.getLineLength(p,g,_,O),M=Math.sqrt(a*a-k*k),P=Math.sqrt(M*M/(1+y*y))*(u<l?-1:1),D=y*P;return{x:_+P,y:O+D}}static getPointOnCubicBezier(a,l,h,u,f,p,g,v,y){function w(M){return M*M*M}function x(M){return 3*M*M*(1-M)}function S(M){return 3*M*(1-M)*(1-M)}function _(M){return(1-M)*(1-M)*(1-M)}var O=v*w(a)+p*x(a)+u*S(a)+l*_(a),k=y*w(a)+g*x(a)+f*S(a)+h*_(a);return{x:O,y:k}}static getPointOnQuadraticBezier(a,l,h,u,f,p,g){function v(_){return _*_}function y(_){return 2*_*(1-_)}function w(_){return(1-_)*(1-_)}var x=p*v(a)+u*y(a)+l*w(a),S=g*v(a)+f*y(a)+h*w(a);return{x,y:S}}static getPointOnEllipticalArc(a,l,h,u,f,p){var g=Math.cos(p),v=Math.sin(p),y={x:h*Math.cos(f),y:u*Math.sin(f)};return{x:a+(y.x*g-y.y*v),y:l+(y.x*v+y.y*g)}}static parsePathData(a){if(!a)return[];var l=a,h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];l=l.replace(new RegExp(" ","g"),",");for(var u=0;u<h.length;u++)l=l.replace(new RegExp(h[u],"g"),"|"+h[u]);var f=l.split("|"),p=[],g=[],v=0,y=0,w=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,x;for(u=1;u<f.length;u++){var S=f[u],_=S.charAt(0);for(S=S.slice(1),g.length=0;x=w.exec(S);)g.push(x[0]);for(var O=[],k=0,M=g.length;k<M;k++){if(g[k]==="00"){O.push(0,0);continue}var P=parseFloat(g[k]);isNaN(P)?O.push(0):O.push(P)}for(;O.length>0&&!isNaN(O[0]);){var D="",A=[],R=v,T=y,N,L,I,$,B,U,Y,Z,ie,ce;switch(_){case"l":v+=O.shift(),y+=O.shift(),D="L",A.push(v,y);break;case"L":v=O.shift(),y=O.shift(),A.push(v,y);break;case"m":var ge=O.shift(),Ae=O.shift();if(v+=ge,y+=Ae,D="M",p.length>2&&p[p.length-1].command==="z"){for(var Se=p.length-2;Se>=0;Se--)if(p[Se].command==="M"){v=p[Se].points[0]+ge,y=p[Se].points[1]+Ae;break}}A.push(v,y),_="l";break;case"M":v=O.shift(),y=O.shift(),D="M",A.push(v,y),_="L";break;case"h":v+=O.shift(),D="L",A.push(v,y);break;case"H":v=O.shift(),D="L",A.push(v,y);break;case"v":y+=O.shift(),D="L",A.push(v,y);break;case"V":y=O.shift(),D="L",A.push(v,y);break;case"C":A.push(O.shift(),O.shift(),O.shift(),O.shift()),v=O.shift(),y=O.shift(),A.push(v,y);break;case"c":A.push(v+O.shift(),y+O.shift(),v+O.shift(),y+O.shift()),v+=O.shift(),y+=O.shift(),D="C",A.push(v,y);break;case"S":L=v,I=y,N=p[p.length-1],N.command==="C"&&(L=v+(v-N.points[2]),I=y+(y-N.points[3])),A.push(L,I,O.shift(),O.shift()),v=O.shift(),y=O.shift(),D="C",A.push(v,y);break;case"s":L=v,I=y,N=p[p.length-1],N.command==="C"&&(L=v+(v-N.points[2]),I=y+(y-N.points[3])),A.push(L,I,v+O.shift(),y+O.shift()),v+=O.shift(),y+=O.shift(),D="C",A.push(v,y);break;case"Q":A.push(O.shift(),O.shift()),v=O.shift(),y=O.shift(),A.push(v,y);break;case"q":A.push(v+O.shift(),y+O.shift()),v+=O.shift(),y+=O.shift(),D="Q",A.push(v,y);break;case"T":L=v,I=y,N=p[p.length-1],N.command==="Q"&&(L=v+(v-N.points[0]),I=y+(y-N.points[1])),v=O.shift(),y=O.shift(),D="Q",A.push(L,I,v,y);break;case"t":L=v,I=y,N=p[p.length-1],N.command==="Q"&&(L=v+(v-N.points[0]),I=y+(y-N.points[1])),v+=O.shift(),y+=O.shift(),D="Q",A.push(L,I,v,y);break;case"A":$=O.shift(),B=O.shift(),U=O.shift(),Y=O.shift(),Z=O.shift(),ie=v,ce=y,v=O.shift(),y=O.shift(),D="A",A=this.convertEndpointToCenterParameterization(ie,ce,v,y,Y,Z,$,B,U);break;case"a":$=O.shift(),B=O.shift(),U=O.shift(),Y=O.shift(),Z=O.shift(),ie=v,ce=y,v+=O.shift(),y+=O.shift(),D="A",A=this.convertEndpointToCenterParameterization(ie,ce,v,y,Y,Z,$,B,U);break}p.push({command:D||_,points:A,start:{x:R,y:T},pathLength:this.calcLength(R,T,D||_,A)})}(_==="z"||_==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(a,l,h,u){var f,p,g,v,y=gs;switch(h){case"L":return y.getLineLength(a,l,u[0],u[1]);case"C":return(0,t.getCubicArcLength)([a,u[0],u[2],u[4]],[l,u[1],u[3],u[5]],1);case"Q":return(0,t.getQuadraticArcLength)([a,u[0],u[2]],[l,u[1],u[3]],1);case"A":f=0;var w=u[4],x=u[5],S=u[4]+x,_=Math.PI/180;if(Math.abs(w-S)<_&&(_=Math.abs(w-S)),p=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],w,0),x<0)for(v=w-_;v>S;v-=_)g=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),f+=y.getLineLength(p.x,p.y,g.x,g.y),p=g;else for(v=w+_;v<S;v+=_)g=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),f+=y.getLineLength(p.x,p.y,g.x,g.y),p=g;return g=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],S,0),f+=y.getLineLength(p.x,p.y,g.x,g.y),f}return 0}static convertEndpointToCenterParameterization(a,l,h,u,f,p,g,v,y){var w=y*(Math.PI/180),x=Math.cos(w)*(a-h)/2+Math.sin(w)*(l-u)/2,S=-1*Math.sin(w)*(a-h)/2+Math.cos(w)*(l-u)/2,_=x*x/(g*g)+S*S/(v*v);_>1&&(g*=Math.sqrt(_),v*=Math.sqrt(_));var O=Math.sqrt((g*g*(v*v)-g*g*(S*S)-v*v*(x*x))/(g*g*(S*S)+v*v*(x*x)));f===p&&(O*=-1),isNaN(O)&&(O=0);var k=O*g*S/v,M=O*-v*x/g,P=(a+h)/2+Math.cos(w)*k-Math.sin(w)*M,D=(l+u)/2+Math.sin(w)*k+Math.cos(w)*M,A=function(B){return Math.sqrt(B[0]*B[0]+B[1]*B[1])},R=function(B,U){return(B[0]*U[0]+B[1]*U[1])/(A(B)*A(U))},T=function(B,U){return(B[0]*U[1]<B[1]*U[0]?-1:1)*Math.acos(R(B,U))},N=T([1,0],[(x-k)/g,(S-M)/v]),L=[(x-k)/g,(S-M)/v],I=[(-1*x-k)/g,(-1*S-M)/v],$=T(L,I);return R(L,I)<=-1&&($=Math.PI),R(L,I)>=1&&($=0),p===0&&$>0&&($=$-2*Math.PI),p===1&&$<0&&($=$+2*Math.PI),[P,D,g,v,N,$,w,p]}};return hm.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(r),i.Factory.addGetterSetter(r,"data"),hm}var bI;function Z1e(){if(bI)return lm;bI=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.Arrow=void 0;const i=xn(),e=jB(),n=Cn(),t=On(),r=gM();let s=class extends e.Line{_sceneFunc(l){super._sceneFunc(l);var h=Math.PI*2,u=this.points(),f=u,p=this.tension()!==0&&u.length>4;p&&(f=this.getTensionPoints());var g=this.pointerLength(),v=u.length,y,w;if(p){const _=[f[f.length-4],f[f.length-3],f[f.length-2],f[f.length-1],u[v-2],u[v-1]],O=r.Path.calcLength(f[f.length-4],f[f.length-3],"C",_),k=r.Path.getPointOnQuadraticBezier(Math.min(1,1-g/O),_[0],_[1],_[2],_[3],_[4],_[5]);y=u[v-2]-k.x,w=u[v-1]-k.y}else y=u[v-2]-u[v-4],w=u[v-1]-u[v-3];var x=(Math.atan2(w,y)+h)%h,S=this.pointerWidth();this.pointerAtEnding()&&(l.save(),l.beginPath(),l.translate(u[v-2],u[v-1]),l.rotate(x),l.moveTo(0,0),l.lineTo(-g,S/2),l.lineTo(-g,-S/2),l.closePath(),l.restore(),this.__fillStroke(l)),this.pointerAtBeginning()&&(l.save(),l.beginPath(),l.translate(u[0],u[1]),p?(y=(f[0]+f[2])/2-u[0],w=(f[1]+f[3])/2-u[1]):(y=u[2]-u[0],w=u[3]-u[1]),l.rotate((Math.atan2(-w,-y)+h)%h),l.moveTo(0,0),l.lineTo(-g,S/2),l.lineTo(-g,-S/2),l.closePath(),l.restore(),this.__fillStroke(l))}__fillStroke(l){var h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,l.setLineDash([])),l.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const l=super.getSelfRect(),h=this.pointerWidth()/2;return{x:l.x-h,y:l.y-h,width:l.width+h*2,height:l.height+h*2}}};return lm.Arrow=s,s.prototype.className="Arrow",(0,t._registerNode)(s),i.Factory.addGetterSetter(s,"pointerLength",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"pointerWidth",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"pointerAtBeginning",!1),i.Factory.addGetterSetter(s,"pointerAtEnding",!0),lm}var um={},OI;function K1e(){if(OI)return um;OI=1,Object.defineProperty(um,"__esModule",{value:!0}),um.Circle=void 0;const i=xn(),e=pr(),n=Cn(),t=On();let r=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return um.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,t._registerNode)(r),i.Factory.addGetterSetter(r,"radius",0,(0,n.getNumberValidator)()),um}var dm={},xI;function J1e(){if(xI)return dm;xI=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.Ellipse=void 0;const i=xn(),e=pr(),n=Cn(),t=On();let r=class extends e.Shape{_sceneFunc(a){var l=this.radiusX(),h=this.radiusY();a.beginPath(),a.save(),l!==h&&a.scale(1,h/l),a.arc(0,0,l,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return dm.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,t._registerNode)(r),i.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),i.Factory.addGetterSetter(r,"radiusX",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"radiusY",0,(0,n.getNumberValidator)()),dm}var fm={},wI;function ebe(){if(wI)return fm;wI=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.Image=void 0;const i=Ii(),e=xn(),n=pr(),t=On(),r=Cn();let s=class qB extends n.Shape{constructor(l){super(l),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const l=this.image();l&&l.complete||l&&l.readyState===4||l&&l.addEventListener&&l.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(l){const h=this.getWidth(),u=this.getHeight(),f=this.cornerRadius(),p=this.attrs.image;let g;if(p){const v=this.attrs.cropWidth,y=this.attrs.cropHeight;v&&y?g=[p,this.cropX(),this.cropY(),v,y,0,0,h,u]:g=[p,0,0,h,u]}(this.hasFill()||this.hasStroke()||f)&&(l.beginPath(),f?i.Util.drawRoundedRectPath(l,h,u,f):l.rect(0,0,h,u),l.closePath(),l.fillStrokeShape(this)),p&&(f&&l.clip(),l.drawImage.apply(l,g))}_hitFunc(l){var h=this.width(),u=this.height(),f=this.cornerRadius();l.beginPath(),f?i.Util.drawRoundedRectPath(l,h,u,f):l.rect(0,0,h,u),l.closePath(),l.fillStrokeShape(this)}getWidth(){var l,h;return(l=this.attrs.width)!==null&&l!==void 0?l:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var l,h;return(l=this.attrs.height)!==null&&l!==void 0?l:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(l,h,u=null){var f=i.Util.createImageElement();f.onload=function(){var p=new qB({image:f});h(p)},f.onerror=u,f.crossOrigin="Anonymous",f.src=l}};return fm.Image=s,s.prototype.className="Image",(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,r.getNumberValidator)()),fm}var Ih={},_I;function tbe(){if(_I)return Ih;_I=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.Tag=Ih.Label=void 0;const i=xn(),e=pr(),n=pM(),t=Cn(),r=On();var s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",l="none",h="up",u="right",f="down",p="left",g=s.length;let v=class extends n.Group{constructor(x){super(x),this.on("add.konva",function(S){this._addListeners(S.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(x){var S=this,_,O=function(){S._sync()};for(_=0;_<g;_++)x.on(s[_]+a,O)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var x=this.getText(),S=this.getTag(),_,O,k,M,P,D,A;if(x&&S){switch(_=x.width(),O=x.height(),k=S.pointerDirection(),M=S.pointerWidth(),A=S.pointerHeight(),P=0,D=0,k){case h:P=_/2,D=-1*A;break;case u:P=_+M,D=O/2;break;case f:P=_/2,D=O+A;break;case p:P=-1*M,D=O/2;break}S.setAttrs({x:-1*P,y:-1*D,width:_,height:O}),x.setAttrs({x:-1*P,y:-1*D})}}};Ih.Label=v,v.prototype.className="Label",(0,r._registerNode)(v);class y extends e.Shape{_sceneFunc(x){var S=this.width(),_=this.height(),O=this.pointerDirection(),k=this.pointerWidth(),M=this.pointerHeight(),P=this.cornerRadius();let D=0,A=0,R=0,T=0;typeof P=="number"?D=A=R=T=Math.min(P,S/2,_/2):(D=Math.min(P[0]||0,S/2,_/2),A=Math.min(P[1]||0,S/2,_/2),T=Math.min(P[2]||0,S/2,_/2),R=Math.min(P[3]||0,S/2,_/2)),x.beginPath(),x.moveTo(D,0),O===h&&(x.lineTo((S-k)/2,0),x.lineTo(S/2,-1*M),x.lineTo((S+k)/2,0)),x.lineTo(S-A,0),x.arc(S-A,A,A,Math.PI*3/2,0,!1),O===u&&(x.lineTo(S,(_-M)/2),x.lineTo(S+k,_/2),x.lineTo(S,(_+M)/2)),x.lineTo(S,_-T),x.arc(S-T,_-T,T,0,Math.PI/2,!1),O===f&&(x.lineTo((S+k)/2,_),x.lineTo(S/2,_+M),x.lineTo((S-k)/2,_)),x.lineTo(R,_),x.arc(R,_-R,R,Math.PI/2,Math.PI,!1),O===p&&(x.lineTo(0,(_+M)/2),x.lineTo(-1*k,_/2),x.lineTo(0,(_-M)/2)),x.lineTo(0,D),x.arc(D,D,D,Math.PI,Math.PI*3/2,!1),x.closePath(),x.fillStrokeShape(this)}getSelfRect(){var x=0,S=0,_=this.pointerWidth(),O=this.pointerHeight(),k=this.pointerDirection(),M=this.width(),P=this.height();return k===h?(S-=O,P+=O):k===f?P+=O:k===p?(x-=_*1.5,M+=_):k===u&&(M+=_*1.5),{x,y:S,width:M,height:P}}}return Ih.Tag=y,y.prototype.className="Tag",(0,r._registerNode)(y),i.Factory.addGetterSetter(y,"pointerDirection",l),i.Factory.addGetterSetter(y,"pointerWidth",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(y,"pointerHeight",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(y,"cornerRadius",0,(0,t.getNumberOrArrayOfNumbersValidator)(4)),Ih}var pm={},SI;function ZB(){if(SI)return pm;SI=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.Rect=void 0;const i=xn(),e=pr(),n=On(),t=Ii(),r=Cn();let s=class extends e.Shape{_sceneFunc(l){var h=this.cornerRadius(),u=this.width(),f=this.height();l.beginPath(),h?t.Util.drawRoundedRectPath(l,u,f,h):l.rect(0,0,u,f),l.closePath(),l.fillStrokeShape(this)}};return pm.Rect=s,s.prototype.className="Rect",(0,n._registerNode)(s),i.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),pm}var mm={},CI;function nbe(){if(CI)return mm;CI=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.RegularPolygon=void 0;const i=xn(),e=pr(),n=Cn(),t=On();let r=class extends e.Shape{_sceneFunc(a){const l=this._getPoints();a.beginPath(),a.moveTo(l[0].x,l[0].y);for(var h=1;h<l.length;h++)a.lineTo(l[h].x,l[h].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,l=this.attrs.radius||0,h=[];for(var u=0;u<a;u++)h.push({x:l*Math.sin(u*2*Math.PI/a),y:-1*l*Math.cos(u*2*Math.PI/a)});return h}getSelfRect(){const a=this._getPoints();var l=a[0].x,h=a[0].y,u=a[0].x,f=a[0].y;return a.forEach(p=>{l=Math.min(l,p.x),h=Math.max(h,p.x),u=Math.min(u,p.y),f=Math.max(f,p.y)}),{x:l,y:u,width:h-l,height:f-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return mm.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,t._registerNode)(r),i.Factory.addGetterSetter(r,"radius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"sides",0,(0,n.getNumberValidator)()),mm}var gm={},kI;function ibe(){if(kI)return gm;kI=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.Ring=void 0;const i=xn(),e=pr(),n=Cn(),t=On();var r=Math.PI*2;let s=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.innerRadius(),0,r,!1),l.moveTo(this.outerRadius(),0),l.arc(0,0,this.outerRadius(),r,0,!0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}};return gm.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,t._registerNode)(s),i.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),gm}var vm={},TI;function rbe(){if(TI)return vm;TI=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.Sprite=void 0;const i=xn(),e=pr(),n=mM(),t=Cn(),r=On();let s=class extends e.Shape{constructor(l){super(l),this._updated=!0,this.anim=new n.Animation(()=>{var h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(l){var h=this.animation(),u=this.frameIndex(),f=u*4,p=this.animations()[h],g=this.frameOffsets(),v=p[f+0],y=p[f+1],w=p[f+2],x=p[f+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(l.beginPath(),l.rect(0,0,w,x),l.closePath(),l.fillStrokeShape(this)),S)if(g){var _=g[h],O=u*2;l.drawImage(S,v,y,w,x,_[O+0],_[O+1],w,x)}else l.drawImage(S,v,y,w,x,0,0,w,x)}_hitFunc(l){var h=this.animation(),u=this.frameIndex(),f=u*4,p=this.animations()[h],g=this.frameOffsets(),v=p[f+2],y=p[f+3];if(l.beginPath(),g){var w=g[h],x=u*2;l.rect(w[x+0],w[x+1],v,y)}else l.rect(0,0,v,y);l.closePath(),l.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var l=this;this.interval=setInterval(function(){l._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var l=this.getLayer();this.anim.setLayers(l),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var l=this.frameIndex(),h=this.animation(),u=this.animations(),f=u[h],p=f.length/4;l<p-1?this.frameIndex(l+1):this.frameIndex(0)}};return vm.Sprite=s,s.prototype.className="Sprite",(0,r._registerNode)(s),i.Factory.addGetterSetter(s,"animation"),i.Factory.addGetterSetter(s,"animations"),i.Factory.addGetterSetter(s,"frameOffsets"),i.Factory.addGetterSetter(s,"image"),i.Factory.addGetterSetter(s,"frameIndex",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(s,"frameRate",17,(0,t.getNumberValidator)()),i.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),vm}var ym={},MI;function sbe(){if(MI)return ym;MI=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.Star=void 0;const i=xn(),e=pr(),n=Cn(),t=On();let r=class extends e.Shape{_sceneFunc(a){var l=this.innerRadius(),h=this.outerRadius(),u=this.numPoints();a.beginPath(),a.moveTo(0,0-h);for(var f=1;f<u*2;f++){var p=f%2===0?h:l,g=p*Math.sin(f*Math.PI/u),v=-1*p*Math.cos(f*Math.PI/u);a.lineTo(g,v)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return ym.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,t._registerNode)(r),i.Factory.addGetterSetter(r,"numPoints",5,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"outerRadius",0,(0,n.getNumberValidator)()),ym}var Dh={},EI;function KB(){if(EI)return Dh;EI=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.Text=Dh.stringToArray=void 0;const i=Ii(),e=xn(),n=pr(),t=On(),r=Cn(),s=On();function a(Ae){return Array.from(Ae)}Dh.stringToArray=a;var l="auto",h="center",u="inherit",f="justify",p="Change.konva",g="2d",v="-",y="left",w="text",x="Text",S="top",_="bottom",O="middle",k="normal",M="px ",P=" ",D="right",A="rtl",R="word",T="char",N="none",L="…",I=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],$=I.length;function B(Ae){return Ae.split(",").map(Se=>{Se=Se.trim();const he=Se.indexOf(" ")>=0,Ce=Se.indexOf('"')>=0||Se.indexOf("'")>=0;return he&&!Ce&&(Se=`"${Se}"`),Se}).join(", ")}var U;function Y(){return U||(U=i.Util.createCanvasElement().getContext(g),U)}function Z(Ae){Ae.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ie(Ae){Ae.setAttr("miterLimit",2),Ae.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function ce(Ae){return Ae=Ae||{},!Ae.fillLinearGradientColorStops&&!Ae.fillRadialGradientColorStops&&!Ae.fillPatternImage&&(Ae.fill=Ae.fill||"black"),Ae}class ge extends n.Shape{constructor(Se){super(ce(Se)),this._partialTextX=0,this._partialTextY=0;for(var he=0;he<$;he++)this.on(I[he]+p,this._setTextData);this._setTextData()}_sceneFunc(Se){var he=this.textArr,Ce=he.length;if(this.text()){var pe=this.padding(),j=this.fontSize(),K=this.lineHeight()*j,X=this.verticalAlign(),F=this.direction(),te=0,re=this.align(),H=this.getWidth(),q=this.letterSpacing(),le=this.fill(),fe=this.textDecoration(),be=fe.indexOf("underline")!==-1,Me=fe.indexOf("line-through")!==-1,J;F=F===u?Se.direction:F;var Q=K/2,ue=O;if(t.Konva._fixTextRendering){var de=this.measureSize("M");ue="alphabetic",Q=(de.fontBoundingBoxAscent-de.fontBoundingBoxDescent)/2+K/2}var we=0,Te=0;for(F===A&&Se.setAttr("direction",F),Se.setAttr("font",this._getContextFont()),Se.setAttr("textBaseline",ue),Se.setAttr("textAlign",y),X===O?te=(this.getHeight()-Ce*K-pe*2)/2:X===_&&(te=this.getHeight()-Ce*K-pe*2),Se.translate(pe,te+pe),J=0;J<Ce;J++){var we=0,Te=0,Xe=he[J],Ve=Xe.text,ze=Xe.width,rt=Xe.lastInParagraph,Ge,it,kt;if(Se.save(),re===D?we+=H-ze-pe*2:re===h&&(we+=(H-ze-pe*2)/2),be){Se.save(),Se.beginPath();let Le=t.Konva._fixTextRendering?Math.round(j/4):Math.round(j/2);const me=we,Be=Q+Te+Le;Se.moveTo(me,Be),Ge=Ve.split(" ").length-1,it=Ge===0,kt=re===f&&!rt?H-pe*2:ze,Se.lineTo(me+Math.round(kt),Be),Se.lineWidth=j/15;const Fe=this._getLinearGradient();Se.strokeStyle=Fe||le,Se.stroke(),Se.restore()}if(Me){Se.save(),Se.beginPath();let Le=t.Konva._fixTextRendering?-Math.round(j/4):0;Se.moveTo(we,Q+Te+Le),Ge=Ve.split(" ").length-1,it=Ge===0,kt=re===f&&rt&&!it?H-pe*2:ze,Se.lineTo(we+Math.round(kt),Q+Te+Le),Se.lineWidth=j/15;const me=this._getLinearGradient();Se.strokeStyle=me||le,Se.stroke(),Se.restore()}if(F!==A&&(q!==0||re===f)){Ge=Ve.split(" ").length-1;for(var Tt=a(Ve),ut=0;ut<Tt.length;ut++){var Ut=Tt[ut];Ut===" "&&!rt&&re===f&&(we+=(H-pe*2-ze)/Ge),this._partialTextX=we,this._partialTextY=Q+Te,this._partialText=Ut,Se.fillStrokeShape(this),we+=this.measureSize(Ut).width+q}}else q!==0&&Se.setAttr("letterSpacing",`${q}px`),this._partialTextX=we,this._partialTextY=Q+Te,this._partialText=Ve,Se.fillStrokeShape(this);Se.restore(),Ce>1&&(Q+=K)}}}_hitFunc(Se){var he=this.getWidth(),Ce=this.getHeight();Se.beginPath(),Se.rect(0,0,he,Ce),Se.closePath(),Se.fillStrokeShape(this)}setText(Se){var he=i.Util._isString(Se)?Se:Se==null?"":Se+"";return this._setAttr(w,he),this}getWidth(){var Se=this.attrs.width===l||this.attrs.width===void 0;return Se?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var Se=this.attrs.height===l||this.attrs.height===void 0;return Se?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(Se){var he=Y(),Ce=this.fontSize(),pe;return he.save(),he.font=this._getContextFont(),pe=he.measureText(Se),he.restore(),{actualBoundingBoxAscent:pe.actualBoundingBoxAscent,actualBoundingBoxDescent:pe.actualBoundingBoxDescent,actualBoundingBoxLeft:pe.actualBoundingBoxLeft,actualBoundingBoxRight:pe.actualBoundingBoxRight,alphabeticBaseline:pe.alphabeticBaseline,emHeightAscent:pe.emHeightAscent,emHeightDescent:pe.emHeightDescent,fontBoundingBoxAscent:pe.fontBoundingBoxAscent,fontBoundingBoxDescent:pe.fontBoundingBoxDescent,hangingBaseline:pe.hangingBaseline,ideographicBaseline:pe.ideographicBaseline,width:pe.width,height:Ce}}_getContextFont(){return this.fontStyle()+P+this.fontVariant()+P+(this.fontSize()+M)+B(this.fontFamily())}_addTextLine(Se){this.align()===f&&(Se=Se.trim());var Ce=this._getTextWidth(Se);return this.textArr.push({text:Se,width:Ce,lastInParagraph:!1})}_getTextWidth(Se){var he=this.letterSpacing(),Ce=Se.length;return Y().measureText(Se).width+(Ce?he*(Ce-1):0)}_setTextData(){var Se=this.text().split(`
`),he=+this.fontSize(),Ce=0,pe=this.lineHeight()*he,j=this.attrs.width,K=this.attrs.height,X=j!==l&&j!==void 0,F=K!==l&&K!==void 0,te=this.padding(),re=j-te*2,H=K-te*2,q=0,le=this.wrap(),fe=le!==N,be=le!==T&&fe,Me=this.ellipsis();this.textArr=[],Y().font=this._getContextFont();for(var J=Me?this._getTextWidth(L):0,Q=0,ue=Se.length;Q<ue;++Q){var de=Se[Q],we=this._getTextWidth(de);if(X&&we>re)for(;de.length>0;){for(var Te=0,Xe=de.length,Ve="",ze=0;Te<Xe;){var rt=Te+Xe>>>1,Ge=de.slice(0,rt+1),it=this._getTextWidth(Ge)+J;it<=re?(Te=rt+1,Ve=Ge,ze=it):Xe=rt}if(Ve){if(be){var kt,Tt=de[Ve.length],ut=Tt===P||Tt===v;ut&&ze<=re?kt=Ve.length:kt=Math.max(Ve.lastIndexOf(P),Ve.lastIndexOf(v))+1,kt>0&&(Te=kt,Ve=Ve.slice(0,Te),ze=this._getTextWidth(Ve))}Ve=Ve.trimRight(),this._addTextLine(Ve),Ce=Math.max(Ce,ze),q+=pe;var Ut=this._shouldHandleEllipsis(q);if(Ut){this._tryToAddEllipsisToLastLine();break}if(de=de.slice(Te),de=de.trimLeft(),de.length>0&&(we=this._getTextWidth(de),we<=re)){this._addTextLine(de),q+=pe,Ce=Math.max(Ce,we);break}}else break}else this._addTextLine(de),q+=pe,Ce=Math.max(Ce,we),this._shouldHandleEllipsis(q)&&Q<ue-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),F&&q+pe>H)break}this.textHeight=he,this.textWidth=Ce}_shouldHandleEllipsis(Se){var he=+this.fontSize(),Ce=this.lineHeight()*he,pe=this.attrs.height,j=pe!==l&&pe!==void 0,K=this.padding(),X=pe-K*2,F=this.wrap(),te=F!==N;return!te||j&&Se+Ce>X}_tryToAddEllipsisToLastLine(){var Se=this.attrs.width,he=Se!==l&&Se!==void 0,Ce=this.padding(),pe=Se-Ce*2,j=this.ellipsis(),K=this.textArr[this.textArr.length-1];if(!(!K||!j)){if(he){var X=this._getTextWidth(K.text+L)<pe;X||(K.text=K.text.slice(0,K.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(K.text+L)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const Se=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,he=this.hasShadow();return Se&&he?!0:super._useBufferCanvas()}}return Dh.Text=ge,ge.prototype._fillFunc=Z,ge.prototype._strokeFunc=ie,ge.prototype.className=x,ge.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(ge),e.Factory.overWriteSetter(ge,"width",(0,r.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(ge,"height",(0,r.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(ge,"direction",u),e.Factory.addGetterSetter(ge,"fontFamily","Arial"),e.Factory.addGetterSetter(ge,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(ge,"fontStyle",k),e.Factory.addGetterSetter(ge,"fontVariant",k),e.Factory.addGetterSetter(ge,"padding",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(ge,"align",y),e.Factory.addGetterSetter(ge,"verticalAlign",S),e.Factory.addGetterSetter(ge,"lineHeight",1,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(ge,"wrap",R),e.Factory.addGetterSetter(ge,"ellipsis",!1,(0,r.getBooleanValidator)()),e.Factory.addGetterSetter(ge,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(ge,"text","",(0,r.getStringValidator)()),e.Factory.addGetterSetter(ge,"textDecoration",""),Dh}var bm={},PI;function obe(){if(PI)return bm;PI=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.TextPath=void 0;const i=Ii(),e=xn(),n=pr(),t=gM(),r=KB(),s=Cn(),a=On();var l="",h="normal";function u(g){g.fillText(this.partialText,0,0)}function f(g){g.strokeText(this.partialText,0,0)}let p=class extends n.Shape{constructor(v){super(v),this.dummyCanvas=i.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return t.Path.getPathLength(this.dataArray)}_getPointAtLength(v){if(!this.attrs.data)return null;const y=this.pathLength;return v-1>y?null:t.Path.getPointAtLengthOfDataArray(v,this.dataArray)}_readDataAttribute(){this.dataArray=t.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(v){v.setAttr("font",this._getContextFont()),v.setAttr("textBaseline",this.textBaseline()),v.setAttr("textAlign","left"),v.save();var y=this.textDecoration(),w=this.fill(),x=this.fontSize(),S=this.glyphInfo;y==="underline"&&v.beginPath();for(var _=0;_<S.length;_++){v.save();var O=S[_].p0;v.translate(O.x,O.y),v.rotate(S[_].rotation),this.partialText=S[_].text,v.fillStrokeShape(this),y==="underline"&&(_===0&&v.moveTo(0,x/2+1),v.lineTo(x,x/2+1)),v.restore()}y==="underline"&&(v.strokeStyle=w,v.lineWidth=x/20,v.stroke()),v.restore()}_hitFunc(v){v.beginPath();var y=this.glyphInfo;if(y.length>=1){var w=y[0].p0;v.moveTo(w.x,w.y)}for(var x=0;x<y.length;x++){var S=y[x].p1;v.lineTo(S.x,S.y)}v.setAttr("lineWidth",this.fontSize()),v.setAttr("strokeStyle",this.colorKey),v.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(v){return r.Text.prototype.setText.call(this,v)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(v){var y=this.dummyCanvas,w=y.getContext("2d");w.save(),w.font=this._getContextFont();var x=w.measureText(v);return w.restore(),{width:x.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:v,height:y}=this._getTextSize(this.attrs.text);if(this.textWidth=v,this.textHeight=y,this.glyphInfo=[],!this.attrs.data)return null;const w=this.letterSpacing(),x=this.align(),S=this.kerningFunc(),_=Math.max(this.textWidth+((this.attrs.text||"").length-1)*w,0);let O=0;x==="center"&&(O=Math.max(0,this.pathLength/2-_/2)),x==="right"&&(O=Math.max(0,this.pathLength-_));const k=(0,r.stringToArray)(this.text());let M=O;for(var P=0;P<k.length;P++){const D=this._getPointAtLength(M);if(!D)return;let A=this._getTextSize(k[P]).width+w;if(k[P]===" "&&x==="justify"){const $=this.text().split(" ").length-1;A+=(this.pathLength-_)/$}const R=this._getPointAtLength(M+A);if(!R)return;const T=t.Path.getLineLength(D.x,D.y,R.x,R.y);let N=0;if(S)try{N=S(k[P-1],k[P])*this.fontSize()}catch{N=0}D.x+=N,R.x+=N,this.textWidth+=N;const L=t.Path.getPointOnLine(N+T/2,D.x,D.y,R.x,R.y),I=Math.atan2(R.y-D.y,R.x-D.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:k[P],rotation:I,p0:D,p1:R}),M+=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var v=[];this.glyphInfo.forEach(function(P){v.push(P.p0.x),v.push(P.p0.y),v.push(P.p1.x),v.push(P.p1.y)});for(var y=v[0]||0,w=v[0]||0,x=v[1]||0,S=v[1]||0,_,O,k=0;k<v.length/2;k++)_=v[k*2],O=v[k*2+1],y=Math.min(y,_),w=Math.max(w,_),x=Math.min(x,O),S=Math.max(S,O);var M=this.fontSize();return{x:y-M/2,y:x-M/2,width:w-y+M,height:S-x+M}}destroy(){return i.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return bm.TextPath=p,p.prototype._fillFunc=u,p.prototype._strokeFunc=f,p.prototype._fillFuncHit=u,p.prototype._strokeFuncHit=f,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(p),e.Factory.addGetterSetter(p,"data"),e.Factory.addGetterSetter(p,"fontFamily","Arial"),e.Factory.addGetterSetter(p,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(p,"fontStyle",h),e.Factory.addGetterSetter(p,"align","left"),e.Factory.addGetterSetter(p,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(p,"textBaseline","middle"),e.Factory.addGetterSetter(p,"fontVariant",h),e.Factory.addGetterSetter(p,"text",l),e.Factory.addGetterSetter(p,"textDecoration",null),e.Factory.addGetterSetter(p,"kerningFunc",null),bm}var Om={},AI;function abe(){if(AI)return Om;AI=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.Transformer=void 0;const i=Ii(),e=xn(),n=Li(),t=pr(),r=ZB(),s=pM(),a=On(),l=Cn(),h=On();var u="tr-konva",f=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(R=>R+`.${u}`).join(" "),p="nodesRect",g=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],v={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const y="ontouchstart"in a.Konva._global;function w(R,T,N){if(R==="rotater")return N;T+=i.Util.degToRad(v[R]||0);var L=(i.Util.radToDeg(T)%360+360)%360;return i.Util._inRange(L,315+22.5,360)||i.Util._inRange(L,0,22.5)?"ns-resize":i.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":i.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":i.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":i.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":i.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":i.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":i.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(i.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}var x=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],S=1e8;function _(R){return{x:R.x+R.width/2*Math.cos(R.rotation)+R.height/2*Math.sin(-R.rotation),y:R.y+R.height/2*Math.cos(R.rotation)+R.width/2*Math.sin(R.rotation)}}function O(R,T,N){const L=N.x+(R.x-N.x)*Math.cos(T)-(R.y-N.y)*Math.sin(T),I=N.y+(R.x-N.x)*Math.sin(T)+(R.y-N.y)*Math.cos(T);return{...R,rotation:R.rotation+T,x:L,y:I}}function k(R,T){const N=_(R);return O(R,T,N)}function M(R,T,N){let L=T;for(let I=0;I<R.length;I++){const $=a.Konva.getAngle(R[I]),B=Math.abs($-T)%(Math.PI*2);Math.min(B,Math.PI*2-B)<N&&(L=$)}return L}let P=0,D=class extends s.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(f,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return i.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const N=T.filter(I=>I.isAncestorOf(this)?(i.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=T=N,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(I=>{const $=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},B=I._attrsAffectingSize.map(U=>U+"Change."+this._getEventNamespace()).join(" ");I.on(B,$),I.on(g.map(U=>U+`.${this._getEventNamespace()}`).join(" "),$),I.on(`absoluteTransformChange.${this._getEventNamespace()}`,$),this._proxyDrag(I)}),this._resetTransformCache();var L=!!this.findOne(".top-left");return L&&this.update(),this}_proxyDrag(T){let N;T.on(`dragstart.${this._getEventNamespace()}`,L=>{N=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(L,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!N)return;const I=T.getAbsolutePosition(),$=I.x-N.x,B=I.y-N.y;this.nodes().forEach(U=>{if(U===T||U.isDragging())return;const Y=U.getAbsolutePosition();U.setAbsolutePosition({x:Y.x+$,y:Y.y+B}),U.startDrag(L)}),N=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p,this.__getNodeRect)}__getNodeShape(T,N=this.rotation(),L){var I=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),$=T.getAbsoluteScale(L),B=T.getAbsolutePosition(L),U=I.x*$.x-T.offsetX()*$.x,Y=I.y*$.y-T.offsetY()*$.y;const Z=(a.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),ie={x:B.x+U*Math.cos(Z)+Y*Math.sin(-Z),y:B.y+Y*Math.cos(Z)+U*Math.sin(Z),width:I.width*$.x,height:I.height*$.y,rotation:Z};return O(ie,-a.Konva.getAngle(N),{x:0,y:0})}__getNodeRect(){var T=this.getNode();if(!T)return{x:-S,y:-S,width:0,height:0,rotation:0};const N=[];this.nodes().map(Z=>{const ie=Z.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var ce=[{x:ie.x,y:ie.y},{x:ie.x+ie.width,y:ie.y},{x:ie.x+ie.width,y:ie.y+ie.height},{x:ie.x,y:ie.y+ie.height}],ge=Z.getAbsoluteTransform();ce.forEach(function(Ae){var Se=ge.point(Ae);N.push(Se)})});const L=new i.Transform;L.rotate(-a.Konva.getAngle(this.rotation()));var I=1/0,$=1/0,B=-1/0,U=-1/0;N.forEach(function(Z){var ie=L.point(Z);I===void 0&&(I=B=ie.x,$=U=ie.y),I=Math.min(I,ie.x),$=Math.min($,ie.y),B=Math.max(B,ie.x),U=Math.max(U,ie.y)}),L.invert();const Y=L.point({x:I,y:$});return{x:Y.x,y:Y.y,width:B-I,height:U-$,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),x.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){var N=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:y?10:"auto"}),L=this;N.on("mousedown touchstart",function(I){L._handleMouseDown(I)}),N.on("dragstart",I=>{N.stopDrag(),I.cancelBubble=!0}),N.on("dragend",I=>{I.cancelBubble=!0}),N.on("mouseenter",()=>{var I=a.Konva.getAngle(this.rotation()),$=this.rotateAnchorCursor(),B=w(T,I,$);N.getStage().content&&(N.getStage().content.style.cursor=B),this._cursorChange=!0}),N.on("mouseout",()=>{N.getStage().content&&(N.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(N)}_createBack(){var T=new t.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(N,L){var I=L.getParent(),$=I.padding();N.beginPath(),N.rect(-$,-$,L.width()+$*2,L.height()+$*2),N.moveTo(L.width()/2,-$),I.rotateEnabled()&&I.rotateLineVisible()&&N.lineTo(L.width()/2,-I.rotateAnchorOffset()*i.Util._sign(L.height())-$),N.fillStrokeShape(L)},hitFunc:(N,L)=>{if(this.shouldOverdrawWholeArea()){var I=this.padding();N.beginPath(),N.rect(-I,-I,L.width()+I*2,L.height()+I*2),N.fillStrokeShape(L)}}});this.add(T),this._proxyDrag(T),T.on("dragstart",N=>{N.cancelBubble=!0}),T.on("dragmove",N=>{N.cancelBubble=!0}),T.on("dragend",N=>{N.cancelBubble=!0}),this.on("dragmove",N=>{this.update()})}_handleMouseDown(T){if(!this._transforming){this._movingAnchorName=T.target.name().split(" ")[0];var N=this._getNodeRect(),L=N.width,I=N.height,$=Math.sqrt(Math.pow(L,2)+Math.pow(I,2));this.sin=Math.abs(I/$),this.cos=Math.abs(L/$),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var B=T.target.getAbsolutePosition(),U=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:U.x-B.x,y:U.y-B.y},P++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(Y=>{Y._fire("transformstart",{evt:T.evt,target:Y})})}}_handleMouseMove(T){var N,L,I,$=this.findOne("."+this._movingAnchorName),B=$.getStage();B.setPointersPositions(T);const U=B.getPointerPosition();let Y={x:U.x-this._anchorDragOffset.x,y:U.y-this._anchorDragOffset.y};const Z=$.getAbsolutePosition();this.anchorDragBoundFunc()&&(Y=this.anchorDragBoundFunc()(Z,Y,T)),$.setAbsolutePosition(Y);const ie=$.getAbsolutePosition();if(!(Z.x===ie.x&&Z.y===ie.y)){if(this._movingAnchorName==="rotater"){var ce=this._getNodeRect();N=$.x()-ce.width/2,L=-$.y()+ce.height/2;let Me=Math.atan2(-L,N)+Math.PI/2;ce.height<0&&(Me-=Math.PI);var ge=a.Konva.getAngle(this.rotation());const J=ge+Me,Q=a.Konva.getAngle(this.rotationSnapTolerance()),de=M(this.rotationSnaps(),J,Q)-ce.rotation,we=k(ce,de);this._fitNodesInto(we,T);return}var Ae=this.shiftBehavior(),Se;Ae==="inverted"?Se=this.keepRatio()&&!T.shiftKey:Ae==="none"?Se=this.keepRatio():Se=this.keepRatio()||T.shiftKey;var K=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(Se){var he=K?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};I=Math.sqrt(Math.pow(he.x-$.x(),2)+Math.pow(he.y-$.y(),2));var Ce=this.findOne(".top-left").x()>he.x?-1:1,pe=this.findOne(".top-left").y()>he.y?-1:1;N=I*this.cos*Ce,L=I*this.sin*pe,this.findOne(".top-left").x(he.x-N),this.findOne(".top-left").y(he.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y($.y());else if(this._movingAnchorName==="top-right"){if(Se){var he=K?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};I=Math.sqrt(Math.pow($.x()-he.x,2)+Math.pow(he.y-$.y(),2));var Ce=this.findOne(".top-right").x()<he.x?-1:1,pe=this.findOne(".top-right").y()>he.y?-1:1;N=I*this.cos*Ce,L=I*this.sin*pe,this.findOne(".top-right").x(he.x+N),this.findOne(".top-right").y(he.y-L)}var j=$.position();this.findOne(".top-left").y(j.y),this.findOne(".bottom-right").x(j.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x($.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x($.x());else if(this._movingAnchorName==="bottom-left"){if(Se){var he=K?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};I=Math.sqrt(Math.pow(he.x-$.x(),2)+Math.pow($.y()-he.y,2));var Ce=he.x<$.x()?-1:1,pe=$.y()<he.y?-1:1;N=I*this.cos*Ce,L=I*this.sin*pe,$.x(he.x-N),$.y(he.y+L)}j=$.position(),this.findOne(".top-left").x(j.x),this.findOne(".bottom-right").y(j.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y($.y());else if(this._movingAnchorName==="bottom-right"){if(Se){var he=K?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};I=Math.sqrt(Math.pow($.x()-he.x,2)+Math.pow($.y()-he.y,2));var Ce=this.findOne(".bottom-right").x()<he.x?-1:1,pe=this.findOne(".bottom-right").y()<he.y?-1:1;N=I*this.cos*Ce,L=I*this.sin*pe,this.findOne(".bottom-right").x(he.x+N),this.findOne(".bottom-right").y(he.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var K=this.centeredScaling()||T.altKey;if(K){var X=this.findOne(".top-left"),F=this.findOne(".bottom-right"),te=X.x(),re=X.y(),H=this.getWidth()-F.x(),q=this.getHeight()-F.y();F.move({x:-te,y:-re}),X.move({x:H,y:q})}var le=this.findOne(".top-left").getAbsolutePosition();N=le.x,L=le.y;var fe=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),be=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:N,y:L,width:fe,height:be,rotation:a.Konva.getAngle(this.rotation())},T)}}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var N;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var L=this.getNode();P--,this._fire("transformend",{evt:T,target:L}),(N=this.getLayer())===null||N===void 0||N.batchDraw(),L&&this._nodes.forEach(I=>{var $;I._fire("transformend",{evt:T,target:I}),($=I.getLayer())===null||$===void 0||$.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,N){var L=this._getNodeRect();const I=1;if(i.Util._inRange(T.width,-this.padding()*2-I,I)){this.update();return}if(i.Util._inRange(T.height,-this.padding()*2-I,I)){this.update();return}var $=new i.Transform;if($.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const ge=$.point({x:-this.padding()*2,y:0});T.x+=ge.x,T.y+=ge.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=ge.x,this._anchorDragOffset.y-=ge.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const ge=$.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=ge.x,this._anchorDragOffset.y-=ge.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const ge=$.point({x:0,y:-this.padding()*2});T.x+=ge.x,T.y+=ge.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=ge.x,this._anchorDragOffset.y-=ge.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const ge=$.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=ge.x,this._anchorDragOffset.y-=ge.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const ge=this.boundBoxFunc()(L,T);ge?T=ge:i.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const B=1e7,U=new i.Transform;U.translate(L.x,L.y),U.rotate(L.rotation),U.scale(L.width/B,L.height/B);const Y=new i.Transform,Z=T.width/B,ie=T.height/B;this.flipEnabled()===!1?(Y.translate(T.x,T.y),Y.rotate(T.rotation),Y.translate(T.width<0?T.width:0,T.height<0?T.height:0),Y.scale(Math.abs(Z),Math.abs(ie))):(Y.translate(T.x,T.y),Y.rotate(T.rotation),Y.scale(Z,ie));const ce=Y.multiply(U.invert());this._nodes.forEach(ge=>{var Ae;const Se=ge.getParent().getAbsoluteTransform(),he=ge.getTransform().copy();he.translate(ge.offsetX(),ge.offsetY());const Ce=new i.Transform;Ce.multiply(Se.copy().invert()).multiply(ce).multiply(Se).multiply(he);const pe=Ce.decompose();ge.setAttrs(pe),(Ae=ge.getLayer())===null||Ae===void 0||Ae.batchDraw()}),this.rotation(i.Util._getRotation(T.rotation)),this._nodes.forEach(ge=>{this._fire("transform",{evt:N,target:ge}),ge._fire("transform",{evt:N,target:ge})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,N){this.findOne(T).setAttrs(N)}update(){var T,N=this._getNodeRect();this.rotation(i.Util._getRotation(N.rotation));var L=N.width,I=N.height,$=this.enabledAnchors(),B=this.resizeEnabled(),U=this.padding(),Y=this.anchorSize();const Z=this.find("._anchor");Z.forEach(ce=>{ce.setAttrs({width:Y,height:Y,offsetX:Y/2,offsetY:Y/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:Y/2+U,offsetY:Y/2+U,visible:B&&$.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:Y/2+U,visible:B&&$.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:Y/2-U,offsetY:Y/2+U,visible:B&&$.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:I/2,offsetX:Y/2+U,visible:B&&$.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:I/2,offsetX:Y/2-U,visible:B&&$.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:I,offsetX:Y/2+U,offsetY:Y/2-U,visible:B&&$.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:I,offsetY:Y/2-U,visible:B&&$.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:I,offsetX:Y/2-U,offsetY:Y/2-U,visible:B&&$.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*i.Util._sign(I)-U,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:I,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const ie=this.anchorStyleFunc();ie&&Z.forEach(ce=>{ie(ce)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(T){var N=n.Node.prototype.clone.call(this,T);return N}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Om.Transformer=D,D.isTransforming=()=>P>0;function A(R){return R instanceof Array||i.Util.warn("enabledAnchors value should be an array"),R instanceof Array&&R.forEach(function(T){x.indexOf(T)===-1&&i.Util.warn("Unknown anchor name: "+T+". Available names are: "+x.join(", "))}),R||[]}return D.prototype.className="Transformer",(0,h._registerNode)(D),e.Factory.addGetterSetter(D,"enabledAnchors",x,A),e.Factory.addGetterSetter(D,"flipEnabled",!0,(0,l.getBooleanValidator)()),e.Factory.addGetterSetter(D,"resizeEnabled",!0),e.Factory.addGetterSetter(D,"anchorSize",10,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(D,"rotateEnabled",!0),e.Factory.addGetterSetter(D,"rotateLineVisible",!0),e.Factory.addGetterSetter(D,"rotationSnaps",[]),e.Factory.addGetterSetter(D,"rotateAnchorOffset",50,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(D,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(D,"rotationSnapTolerance",5,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(D,"borderEnabled",!0),e.Factory.addGetterSetter(D,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(D,"anchorStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(D,"anchorFill","white"),e.Factory.addGetterSetter(D,"anchorCornerRadius",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(D,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(D,"borderStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(D,"borderDash"),e.Factory.addGetterSetter(D,"keepRatio",!0),e.Factory.addGetterSetter(D,"shiftBehavior","default"),e.Factory.addGetterSetter(D,"centeredScaling",!1),e.Factory.addGetterSetter(D,"ignoreStroke",!1),e.Factory.addGetterSetter(D,"padding",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(D,"node"),e.Factory.addGetterSetter(D,"nodes"),e.Factory.addGetterSetter(D,"boundBoxFunc"),e.Factory.addGetterSetter(D,"anchorDragBoundFunc"),e.Factory.addGetterSetter(D,"anchorStyleFunc"),e.Factory.addGetterSetter(D,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(D,"useSingleNodeRotation",!0),e.Factory.backCompat(D,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Om}var xm={},RI;function lbe(){if(RI)return xm;RI=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.Wedge=void 0;const i=xn(),e=pr(),n=On(),t=Cn(),r=On();let s=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),l.lineTo(0,0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(l){this.radius(l/2)}setHeight(l){this.radius(l/2)}};return xm.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),i.Factory.addGetterSetter(s,"radius",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(s,"angle",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(s,"clockwise",!1),i.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),xm}var wm={},II;function cbe(){if(II)return wm;II=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.Blur=void 0;const i=xn(),e=Li(),n=Cn();function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(h,u){var f=h.data,p=h.width,g=h.height,v,y,w,x,S,_,O,k,M,P,D,A,R,T,N,L,I,$,B,U,Y,Z,ie,ce,ge=u+u+1,Ae=p-1,Se=g-1,he=u+1,Ce=he*(he+1)/2,pe=new t,j=null,K=pe,X=null,F=null,te=r[u],re=s[u];for(w=1;w<ge;w++)K=K.next=new t,w===he&&(j=K);for(K.next=pe,O=_=0,y=0;y<g;y++){for(L=I=$=B=k=M=P=D=0,A=he*(U=f[_]),R=he*(Y=f[_+1]),T=he*(Z=f[_+2]),N=he*(ie=f[_+3]),k+=Ce*U,M+=Ce*Y,P+=Ce*Z,D+=Ce*ie,K=pe,w=0;w<he;w++)K.r=U,K.g=Y,K.b=Z,K.a=ie,K=K.next;for(w=1;w<he;w++)x=_+((Ae<w?Ae:w)<<2),k+=(K.r=U=f[x])*(ce=he-w),M+=(K.g=Y=f[x+1])*ce,P+=(K.b=Z=f[x+2])*ce,D+=(K.a=ie=f[x+3])*ce,L+=U,I+=Y,$+=Z,B+=ie,K=K.next;for(X=pe,F=j,v=0;v<p;v++)f[_+3]=ie=D*te>>re,ie!==0?(ie=255/ie,f[_]=(k*te>>re)*ie,f[_+1]=(M*te>>re)*ie,f[_+2]=(P*te>>re)*ie):f[_]=f[_+1]=f[_+2]=0,k-=A,M-=R,P-=T,D-=N,A-=X.r,R-=X.g,T-=X.b,N-=X.a,x=O+((x=v+u+1)<Ae?x:Ae)<<2,L+=X.r=f[x],I+=X.g=f[x+1],$+=X.b=f[x+2],B+=X.a=f[x+3],k+=L,M+=I,P+=$,D+=B,X=X.next,A+=U=F.r,R+=Y=F.g,T+=Z=F.b,N+=ie=F.a,L-=U,I-=Y,$-=Z,B-=ie,F=F.next,_+=4;O+=p}for(v=0;v<p;v++){for(I=$=B=L=M=P=D=k=0,_=v<<2,A=he*(U=f[_]),R=he*(Y=f[_+1]),T=he*(Z=f[_+2]),N=he*(ie=f[_+3]),k+=Ce*U,M+=Ce*Y,P+=Ce*Z,D+=Ce*ie,K=pe,w=0;w<he;w++)K.r=U,K.g=Y,K.b=Z,K.a=ie,K=K.next;for(S=p,w=1;w<=u;w++)_=S+v<<2,k+=(K.r=U=f[_])*(ce=he-w),M+=(K.g=Y=f[_+1])*ce,P+=(K.b=Z=f[_+2])*ce,D+=(K.a=ie=f[_+3])*ce,L+=U,I+=Y,$+=Z,B+=ie,K=K.next,w<Se&&(S+=p);for(_=v,X=pe,F=j,y=0;y<g;y++)x=_<<2,f[x+3]=ie=D*te>>re,ie>0?(ie=255/ie,f[x]=(k*te>>re)*ie,f[x+1]=(M*te>>re)*ie,f[x+2]=(P*te>>re)*ie):f[x]=f[x+1]=f[x+2]=0,k-=A,M-=R,P-=T,D-=N,A-=X.r,R-=X.g,T-=X.b,N-=X.a,x=v+((x=y+he)<Se?x:Se)*p<<2,k+=L+=X.r=f[x],M+=I+=X.g=f[x+1],P+=$+=X.b=f[x+2],D+=B+=X.a=f[x+3],X=X.next,A+=U=F.r,R+=Y=F.g,T+=Z=F.b,N+=ie=F.a,L-=U,I-=Y,$-=Z,B-=ie,F=F.next,_+=p}}const l=function(u){var f=Math.round(this.blurRadius());f>0&&a(u,f)};return wm.Blur=l,i.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),wm}var _m={},DI;function hbe(){if(DI)return _m;DI=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.Brighten=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=this.brightness()*255,a=r.data,l=a.length,h;for(h=0;h<l;h+=4)a[h]+=s,a[h+1]+=s,a[h+2]+=s};return _m.Brighten=t,i.Factory.addGetterSetter(e.Node,"brightness",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),_m}var Sm={},NI;function ube(){if(NI)return Sm;NI=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.Contrast=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=Math.pow((this.contrast()+100)/100,2),a=r.data,l=a.length,h=150,u=150,f=150,p;for(p=0;p<l;p+=4)h=a[p],u=a[p+1],f=a[p+2],h/=255,h-=.5,h*=s,h+=.5,h*=255,u/=255,u-=.5,u*=s,u+=.5,u*=255,f/=255,f-=.5,f*=s,f+=.5,f*=255,h=h<0?0:h>255?255:h,u=u<0?0:u>255?255:u,f=f<0?0:f>255?255:f,a[p]=h,a[p+1]=u,a[p+2]=f};return Sm.Contrast=t,i.Factory.addGetterSetter(e.Node,"contrast",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Sm}var Cm={},$I;function dbe(){if($I)return Cm;$I=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.Emboss=void 0;const i=xn(),e=Li(),n=Ii(),t=Cn(),r=function(s){var a=this.embossStrength()*10,l=this.embossWhiteLevel()*255,h=this.embossDirection(),u=this.embossBlend(),f=0,p=0,g=s.data,v=s.width,y=s.height,w=v*4,x=y;switch(h){case"top-left":f=-1,p=-1;break;case"top":f=-1,p=0;break;case"top-right":f=-1,p=1;break;case"right":f=0,p=1;break;case"bottom-right":f=1,p=1;break;case"bottom":f=1,p=0;break;case"bottom-left":f=1,p=-1;break;case"left":f=0,p=-1;break;default:n.Util.error("Unknown emboss direction: "+h)}do{var S=(x-1)*w,_=f;x+_<1&&(_=0),x+_>y&&(_=0);var O=(x-1+_)*v*4,k=v;do{var M=S+(k-1)*4,P=p;k+P<1&&(P=0),k+P>v&&(P=0);var D=O+(k-1+P)*4,A=g[M]-g[D],R=g[M+1]-g[D+1],T=g[M+2]-g[D+2],N=A,L=N>0?N:-N,I=R>0?R:-R,$=T>0?T:-T;if(I>L&&(N=R),$>L&&(N=T),N*=a,u){var B=g[M]+N,U=g[M+1]+N,Y=g[M+2]+N;g[M]=B>255?255:B<0?0:B,g[M+1]=U>255?255:U<0?0:U,g[M+2]=Y>255?255:Y<0?0:Y}else{var Z=l-N;Z<0?Z=0:Z>255&&(Z=255),g[M]=g[M+1]=g[M+2]=Z}}while(--k)}while(--x)};return Cm.Emboss=r,i.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"embossDirection","top-left",null,i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"embossBlend",!1,null,i.Factory.afterSetFilter),Cm}var km={},VI;function fbe(){if(VI)return km;VI=1,Object.defineProperty(km,"__esModule",{value:!0}),km.Enhance=void 0;const i=xn(),e=Li(),n=Cn();function t(s,a,l,h,u){var f=l-a,p=u-h,g;return f===0?h+p/2:p===0?h:(g=(s-a)/f,g=p*g+h,g)}const r=function(s){var a=s.data,l=a.length,h=a[0],u=h,f,p=a[1],g=p,v,y=a[2],w=y,x,S,_=this.enhance();if(_!==0){for(S=0;S<l;S+=4)f=a[S+0],f<h?h=f:f>u&&(u=f),v=a[S+1],v<p?p=v:v>g&&(g=v),x=a[S+2],x<y?y=x:x>w&&(w=x);u===h&&(u=255,h=0),g===p&&(g=255,p=0),w===y&&(w=255,y=0);var O,k,M,P,D,A,R,T,N;for(_>0?(k=u+_*(255-u),M=h-_*(h-0),D=g+_*(255-g),A=p-_*(p-0),T=w+_*(255-w),N=y-_*(y-0)):(O=(u+h)*.5,k=u+_*(u-O),M=h+_*(h-O),P=(g+p)*.5,D=g+_*(g-P),A=p+_*(p-P),R=(w+y)*.5,T=w+_*(w-R),N=y+_*(y-R)),S=0;S<l;S+=4)a[S+0]=t(a[S+0],h,u,M,k),a[S+1]=t(a[S+1],p,g,A,D),a[S+2]=t(a[S+2],y,w,N,T)}};return km.Enhance=r,i.Factory.addGetterSetter(e.Node,"enhance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),km}var Tm={},LI;function pbe(){if(LI)return Tm;LI=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.Grayscale=void 0;const i=function(e){var n=e.data,t=n.length,r,s;for(r=0;r<t;r+=4)s=.34*n[r]+.5*n[r+1]+.16*n[r+2],n[r]=s,n[r+1]=s,n[r+2]=s};return Tm.Grayscale=i,Tm}var Mm={},BI;function mbe(){if(BI)return Mm;BI=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.HSL=void 0;const i=xn(),e=Li(),n=Cn();i.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"luminance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter);const t=function(r){var s=r.data,a=s.length,l=1,h=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,f=this.luminance()*127,p,g=l*h*Math.cos(u*Math.PI/180),v=l*h*Math.sin(u*Math.PI/180),y=.299*l+.701*g+.167*v,w=.587*l-.587*g+.33*v,x=.114*l-.114*g-.497*v,S=.299*l-.299*g-.328*v,_=.587*l+.413*g+.035*v,O=.114*l-.114*g+.293*v,k=.299*l-.3*g+1.25*v,M=.587*l-.586*g-1.05*v,P=.114*l+.886*g-.2*v,D,A,R,T;for(p=0;p<a;p+=4)D=s[p+0],A=s[p+1],R=s[p+2],T=s[p+3],s[p+0]=y*D+w*A+x*R+f,s[p+1]=S*D+_*A+O*R+f,s[p+2]=k*D+M*A+P*R+f,s[p+3]=T};return Mm.HSL=t,Mm}var Em={},UI;function gbe(){if(UI)return Em;UI=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.HSV=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=r.data,a=s.length,l=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,f,p=l*h*Math.cos(u*Math.PI/180),g=l*h*Math.sin(u*Math.PI/180),v=.299*l+.701*p+.167*g,y=.587*l-.587*p+.33*g,w=.114*l-.114*p-.497*g,x=.299*l-.299*p-.328*g,S=.587*l+.413*p+.035*g,_=.114*l-.114*p+.293*g,O=.299*l-.3*p+1.25*g,k=.587*l-.586*p-1.05*g,M=.114*l+.886*p-.2*g,P,D,A,R;for(f=0;f<a;f+=4)P=s[f+0],D=s[f+1],A=s[f+2],R=s[f+3],s[f+0]=v*P+y*D+w*A,s[f+1]=x*P+S*D+_*A,s[f+2]=O*P+k*D+M*A,s[f+3]=R};return Em.HSV=t,i.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"value",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Em}var Pm={},zI;function vbe(){if(zI)return Pm;zI=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.Invert=void 0;const i=function(e){var n=e.data,t=n.length,r;for(r=0;r<t;r+=4)n[r]=255-n[r],n[r+1]=255-n[r+1],n[r+2]=255-n[r+2]};return Pm.Invert=i,Pm}var Am={},FI;function ybe(){if(FI)return Am;FI=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.Kaleidoscope=void 0;const i=xn(),e=Li(),n=Ii(),t=Cn();var r=function(l,h,u){var f=l.data,p=h.data,g=l.width,v=l.height,y=u.polarCenterX||g/2,w=u.polarCenterY||v/2,x,S,_,O=0,k=0,M=0,P=0,D,A=Math.sqrt(y*y+w*w);S=g-y,_=v-w,D=Math.sqrt(S*S+_*_),A=D>A?D:A;var R=v,T=g,N,L,I=360/T*Math.PI/180,$,B;for(L=0;L<T;L+=1)for($=Math.sin(L*I),B=Math.cos(L*I),N=0;N<R;N+=1)S=Math.floor(y+A*N/R*B),_=Math.floor(w+A*N/R*$),x=(_*g+S)*4,O=f[x+0],k=f[x+1],M=f[x+2],P=f[x+3],x=(L+N*g)*4,p[x+0]=O,p[x+1]=k,p[x+2]=M,p[x+3]=P},s=function(l,h,u){var f=l.data,p=h.data,g=l.width,v=l.height,y=u.polarCenterX||g/2,w=u.polarCenterY||v/2,x,S,_,O,k,M=0,P=0,D=0,A=0,R,T=Math.sqrt(y*y+w*w);S=g-y,_=v-w,R=Math.sqrt(S*S+_*_),T=R>T?R:T;var N=v,L=g,I,$,B=0,U,Y;for(S=0;S<g;S+=1)for(_=0;_<v;_+=1)O=S-y,k=_-w,I=Math.sqrt(O*O+k*k)*N/T,$=(Math.atan2(k,O)*180/Math.PI+360+B)%360,$=$*L/360,U=Math.floor($),Y=Math.floor(I),x=(Y*g+U)*4,M=f[x+0],P=f[x+1],D=f[x+2],A=f[x+3],x=(_*g+S)*4,p[x+0]=M,p[x+1]=P,p[x+2]=D,p[x+3]=A};const a=function(l){var h=l.width,u=l.height,f,p,g,v,y,w,x,S,_,O,k=Math.round(this.kaleidoscopePower()),M=Math.round(this.kaleidoscopeAngle()),P=Math.floor(h*(M%360)/360);if(!(k<1)){var D=n.Util.createCanvasElement();D.width=h,D.height=u;var A=D.getContext("2d").getImageData(0,0,h,u);n.Util.releaseCanvas(D),r(l,A,{polarCenterX:h/2,polarCenterY:u/2});for(var R=h/Math.pow(2,k);R<=8;)R=R*2,k-=1;R=Math.ceil(R);var T=R,N=0,L=T,I=1;for(P+R>h&&(N=T,L=0,I=-1),p=0;p<u;p+=1)for(f=N;f!==L;f+=I)g=Math.round(f+P)%h,_=(h*p+g)*4,y=A.data[_+0],w=A.data[_+1],x=A.data[_+2],S=A.data[_+3],O=(h*p+f)*4,A.data[O+0]=y,A.data[O+1]=w,A.data[O+2]=x,A.data[O+3]=S;for(p=0;p<u;p+=1)for(T=Math.floor(R),v=0;v<k;v+=1){for(f=0;f<T+1;f+=1)_=(h*p+f)*4,y=A.data[_+0],w=A.data[_+1],x=A.data[_+2],S=A.data[_+3],O=(h*p+T*2-f-1)*4,A.data[O+0]=y,A.data[O+1]=w,A.data[O+2]=x,A.data[O+3]=S;T*=2}s(A,l,{polarRotation:0})}};return Am.Kaleidoscope=a,i.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),Am}var Rm={},XI;function bbe(){if(XI)return Rm;XI=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.Mask=void 0;const i=xn(),e=Li(),n=Cn();function t(g,v,y){var w=(y*g.width+v)*4,x=[];return x.push(g.data[w++],g.data[w++],g.data[w++],g.data[w++]),x}function r(g,v){return Math.sqrt(Math.pow(g[0]-v[0],2)+Math.pow(g[1]-v[1],2)+Math.pow(g[2]-v[2],2))}function s(g){for(var v=[0,0,0],y=0;y<g.length;y++)v[0]+=g[y][0],v[1]+=g[y][1],v[2]+=g[y][2];return v[0]/=g.length,v[1]/=g.length,v[2]/=g.length,v}function a(g,v){var y=t(g,0,0),w=t(g,g.width-1,0),x=t(g,0,g.height-1),S=t(g,g.width-1,g.height-1),_=v||10;if(r(y,w)<_&&r(w,S)<_&&r(S,x)<_&&r(x,y)<_){for(var O=s([w,y,S,x]),k=[],M=0;M<g.width*g.height;M++){var P=r(O,[g.data[M*4],g.data[M*4+1],g.data[M*4+2]]);k[M]=P<_?0:255}return k}}function l(g,v){for(var y=0;y<g.width*g.height;y++)g.data[4*y+3]=v[y]}function h(g,v,y){for(var w=[1,1,1,1,0,1,1,1,1],x=Math.round(Math.sqrt(w.length)),S=Math.floor(x/2),_=[],O=0;O<y;O++)for(var k=0;k<v;k++){for(var M=O*v+k,P=0,D=0;D<x;D++)for(var A=0;A<x;A++){var R=O+D-S,T=k+A-S;if(R>=0&&R<y&&T>=0&&T<v){var N=R*v+T,L=w[D*x+A];P+=g[N]*L}}_[M]=P===255*8?255:0}return _}function u(g,v,y){for(var w=[1,1,1,1,1,1,1,1,1],x=Math.round(Math.sqrt(w.length)),S=Math.floor(x/2),_=[],O=0;O<y;O++)for(var k=0;k<v;k++){for(var M=O*v+k,P=0,D=0;D<x;D++)for(var A=0;A<x;A++){var R=O+D-S,T=k+A-S;if(R>=0&&R<y&&T>=0&&T<v){var N=R*v+T,L=w[D*x+A];P+=g[N]*L}}_[M]=P>=255*4?255:0}return _}function f(g,v,y){for(var w=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],x=Math.round(Math.sqrt(w.length)),S=Math.floor(x/2),_=[],O=0;O<y;O++)for(var k=0;k<v;k++){for(var M=O*v+k,P=0,D=0;D<x;D++)for(var A=0;A<x;A++){var R=O+D-S,T=k+A-S;if(R>=0&&R<y&&T>=0&&T<v){var N=R*v+T,L=w[D*x+A];P+=g[N]*L}}_[M]=P}return _}const p=function(g){var v=this.threshold(),y=a(g,v);return y&&(y=h(y,g.width,g.height),y=u(y,g.width,g.height),y=f(y,g.width,g.height),l(g,y)),g};return Rm.Mask=p,i.Factory.addGetterSetter(e.Node,"threshold",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Rm}var Im={},WI;function Obe(){if(WI)return Im;WI=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.Noise=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=this.noise()*255,a=r.data,l=a.length,h=s/2,u;for(u=0;u<l;u+=4)a[u+0]+=h-2*h*Math.random(),a[u+1]+=h-2*h*Math.random(),a[u+2]+=h-2*h*Math.random()};return Im.Noise=t,i.Factory.addGetterSetter(e.Node,"noise",.2,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Im}var Dm={},QI;function xbe(){if(QI)return Dm;QI=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.Pixelate=void 0;const i=xn(),e=Ii(),n=Li(),t=Cn(),r=function(s){var a=Math.ceil(this.pixelSize()),l=s.width,h=s.height,u,f,p,g,v,y,w,x=Math.ceil(l/a),S=Math.ceil(h/a),_,O,k,M,P,D,A,R=s.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(P=0;P<x;P+=1)for(D=0;D<S;D+=1){for(g=0,v=0,y=0,w=0,_=P*a,O=_+a,k=D*a,M=k+a,A=0,u=_;u<O;u+=1)if(!(u>=l))for(f=k;f<M;f+=1)f>=h||(p=(l*f+u)*4,g+=R[p+0],v+=R[p+1],y+=R[p+2],w+=R[p+3],A+=1);for(g=g/A,v=v/A,y=y/A,w=w/A,u=_;u<O;u+=1)if(!(u>=l))for(f=k;f<M;f+=1)f>=h||(p=(l*f+u)*4,R[p+0]=g,R[p+1]=v,R[p+2]=y,R[p+3]=w)}};return Dm.Pixelate=r,i.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),Dm}var Nm={},HI;function wbe(){if(HI)return Nm;HI=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.Posterize=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=Math.round(this.levels()*254)+1,a=r.data,l=a.length,h=255/s,u;for(u=0;u<l;u+=1)a[u]=Math.floor(a[u]/h)*h};return Nm.Posterize=t,i.Factory.addGetterSetter(e.Node,"levels",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Nm}var $m={},GI;function _be(){if(GI)return $m;GI=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.RGB=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=r.data,a=s.length,l=this.red(),h=this.green(),u=this.blue(),f,p;for(f=0;f<a;f+=4)p=(.34*s[f]+.5*s[f+1]+.16*s[f+2])/255,s[f]=p*l,s[f+1]=p*h,s[f+2]=p*u,s[f+3]=s[f+3]};return $m.RGB=t,i.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter),$m}var Vm={},YI;function Sbe(){if(YI)return Vm;YI=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.RGBA=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=r.data,a=s.length,l=this.red(),h=this.green(),u=this.blue(),f=this.alpha(),p,g;for(p=0;p<a;p+=4)g=1-f,s[p]=l*f+s[p]*g,s[p+1]=h*f+s[p+1]*g,s[p+2]=u*f+s[p+2]*g};return Vm.RGBA=t,i.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),Vm}var Lm={},jI;function Cbe(){if(jI)return Lm;jI=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.Sepia=void 0;const i=function(e){var n=e.data,t=n.length,r,s,a,l;for(r=0;r<t;r+=4)s=n[r+0],a=n[r+1],l=n[r+2],n[r+0]=Math.min(255,s*.393+a*.769+l*.189),n[r+1]=Math.min(255,s*.349+a*.686+l*.168),n[r+2]=Math.min(255,s*.272+a*.534+l*.131)};return Lm.Sepia=i,Lm}var Bm={},qI;function kbe(){if(qI)return Bm;qI=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.Solarize=void 0;const i=function(e){var n=e.data,t=e.width,r=e.height,s=t*4,a=r;do{var l=(a-1)*s,h=t;do{var u=l+(h-1)*4,f=n[u],p=n[u+1],g=n[u+2];f>127&&(f=255-f),p>127&&(p=255-p),g>127&&(g=255-g),n[u]=f,n[u+1]=p,n[u+2]=g}while(--h)}while(--a)};return Bm.Solarize=i,Bm}var Um={},ZI;function Tbe(){if(ZI)return Um;ZI=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.Threshold=void 0;const i=xn(),e=Li(),n=Cn(),t=function(r){var s=this.threshold()*255,a=r.data,l=a.length,h;for(h=0;h<l;h+=1)a[h]=a[h]<s?0:255};return Um.Threshold=t,i.Factory.addGetterSetter(e.Node,"threshold",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Um}var KI;function Mbe(){if(KI)return em;KI=1,Object.defineProperty(em,"__esModule",{value:!0}),em.Konva=void 0;const i=Y1e(),e=j1e(),n=Z1e(),t=K1e(),r=J1e(),s=ebe(),a=tbe(),l=jB(),h=gM(),u=ZB(),f=nbe(),p=ibe(),g=rbe(),v=sbe(),y=KB(),w=obe(),x=abe(),S=lbe(),_=cbe(),O=hbe(),k=ube(),M=dbe(),P=fbe(),D=pbe(),A=mbe(),R=gbe(),T=vbe(),N=ybe(),L=bbe(),I=Obe(),$=xbe(),B=wbe(),U=_be(),Y=Sbe(),Z=Cbe(),ie=kbe(),ce=Tbe();return em.Konva=i.Konva.Util._assign(i.Konva,{Arc:e.Arc,Arrow:n.Arrow,Circle:t.Circle,Ellipse:r.Ellipse,Image:s.Image,Label:a.Label,Tag:a.Tag,Line:l.Line,Path:h.Path,Rect:u.Rect,RegularPolygon:f.RegularPolygon,Ring:p.Ring,Sprite:g.Sprite,Star:v.Star,Text:y.Text,TextPath:w.TextPath,Transformer:x.Transformer,Wedge:S.Wedge,Filters:{Blur:_.Blur,Brighten:O.Brighten,Contrast:k.Contrast,Emboss:M.Emboss,Enhance:P.Enhance,Grayscale:D.Grayscale,HSL:A.HSL,HSV:R.HSV,Invert:T.Invert,Kaleidoscope:N.Kaleidoscope,Mask:L.Mask,Noise:I.Noise,Pixelate:$.Pixelate,Posterize:B.Posterize,RGB:U.RGB,RGBA:Y.RGBA,Sepia:Z.Sepia,Solarize:ie.Solarize,Threshold:ce.Threshold}}),em}var Ebe=W1.exports,JI;function JB(){if(JI)return W1.exports;JI=1,Object.defineProperty(Ebe,"__esModule",{value:!0});const i=Mbe();return W1.exports=i.Konva,W1.exports}var xc=JB();const Pbe=oM(xc),Abe=Cte({__proto__:null,default:Pbe},[xc]);var eU={exports:{}};const tU=Rye(zre);/*!
 * vue-konva v3.0.1 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(i,e){(function(t,r){i.exports=r(tU,JB())})(Kd,function(n,t){return function(r){var s={};function a(l){if(s[l])return s[l].exports;var h=s[l]={i:l,l:!1,exports:{}};return r[l].call(h.exports,h,h.exports,a),h.l=!0,h.exports}return a.m=r,a.c=s,a.d=function(l,h,u){a.o(l,h)||Object.defineProperty(l,h,{enumerable:!0,get:u})},a.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},a.t=function(l,h){if(h&1&&(l=a(l)),h&8||h&4&&typeof l=="object"&&l&&l.__esModule)return l;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:l}),h&2&&typeof l!="string")for(var f in l)a.d(u,f,(function(p){return l[p]}).bind(null,f));return u},a.n=function(l){var h=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(h,"a",h),h},a.o=function(l,h){return Object.prototype.hasOwnProperty.call(l,h)},a.p="",a(a.s=2)}([function(r,s){r.exports=n},function(r,s){r.exports=t},function(r,s,a){r.exports=a(3)},function(r,s,a){a.r(s);var l=a(0),h=a(1),u=a.n(h);function f(I){if(!u.a.autoDrawEnabled){var $=I.getLayer()||I.getStage();$&&$.batchDraw()}}var p={key:!0,style:!0,elm:!0,isRootInsert:!0},g=".vue-konva-event";function v(I,$,B,U){$===void 0&&($={}),B===void 0&&(B={});var Y=I.__konvaNode,Z={},ie=!1;for(var ce in B)if(!p[ce]){var ge=ce.slice(0,2)==="on",Ae=B[ce]!==$[ce];if(ge&&Ae){var Se=ce.substr(2).toLowerCase();Se.substr(0,7)==="content"&&(Se="content"+Se.substr(7,1).toUpperCase()+Se.substr(8)),Y.off(Se+g,B[ce])}var he=!$.hasOwnProperty(ce);he&&Y.setAttr(ce,void 0)}for(var Ce in $)if(!p[Ce]){var pe=Ce.slice(0,2)==="on",j=B[Ce]!==$[Ce];if(pe&&j){var K=Ce.substr(2).toLowerCase();K.substr(0,7)==="content"&&(K="content"+K.substr(7,1).toUpperCase()+K.substr(8)),$[Ce]&&(Y.off(K+g),Y.on(K+g,$[Ce]))}!pe&&($[Ce]!==B[Ce]||U&&$[Ce]!==Y.getAttr(Ce))&&(ie=!0,Z[Ce]=$[Ce])}ie&&(Y.setAttrs(Z),f(Y))}var y="v";function w(I){function $(B){return B.__konvaNode?B:B.parent?$(B.parent):(console.error("vue-konva error: Can not find parent node"),{})}return $(I.parent)}function x(I){if(I!=null&&I.component)return I.component.__konvaNode||x(I.component.subTree)}function S(I){var $=I.el,B=I.component,U=x(I);if($!=null&&$.tagName&&B&&!U){var Y=$&&$.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+Y+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return U}function _(I){var $=[];return I.children&&I.children.forEach(function(B){!B.component&&Array.isArray(B.children)&&B.children.forEach(function(U){!U.component&&Array.isArray(U.children)?$.push.apply($,U.children):$.push(U)}),B.component&&$.push(B)}),$}function O(I,$){var B=_(I),U=[];B.forEach(function(Z){var ie=S(Z);ie&&U.push(ie)});var Y=!1;U.forEach(function(Z,ie){Z.getZIndex()!==ie&&(Z.setZIndex(ie),Y=!0)}),Y&&f($)}function k(){return k=Object.assign||function(I){for(var $=1;$<arguments.length;$++){var B=arguments[$];for(var U in B)Object.prototype.hasOwnProperty.call(B,U)&&(I[U]=B[U])}return I},k.apply(this,arguments)}var M={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup:function($,B){var U=B.attrs,Y=B.slots,Z=B.expose;B.emits;var ie=Object(l.getCurrentInstance)(),ce=Object(l.reactive)({}),ge=Object(l.ref)(null),Ae=new window.Konva.Stage({width:$.config.width,height:$.config.height,container:document.createElement("div")});ie.__konvaNode=Ae,Ce();function Se(){return ie.__konvaNode}function he(){return ie.__konvaNode}function Ce(){var pe=ce||{},j=k({},U,$.config);v(ie,j,pe,$.__useStrictMode),Object.assign(ce,j)}return Object(l.onMounted)(function(){ge.value.innerHTML="",Ae.container(ge.value),Ce()}),Object(l.onUpdated)(function(){Ce(),O(ie.subTree,Ae)}),Object(l.onBeforeUnmount)(function(){Ae.destroy()}),Object(l.watch)(function(){return $.config},Ce,{deep:!0}),Z({getStage:he,getNode:Se}),function(){var pe;return Object(l.h)("div",{ref:ge},(pe=Y.default)===null||pe===void 0?void 0:pe.call(Y))}}};function P(){return P=Object.assign||function(I){for(var $=1;$<arguments.length;$++){var B=arguments[$];for(var U in B)Object.prototype.hasOwnProperty.call(B,U)&&(I[U]=B[U])}return I},P.apply(this,arguments)}var D=".vue-konva-event",A={Group:!0,Layer:!0,FastLayer:!0,Label:!0},R=function(I){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(B,U){var Y=U.attrs,Z=U.slots,ie=U.expose,ce=Object(l.getCurrentInstance)(),ge=Object(l.reactive)({}),Ae=window.Konva[I];if(!Ae){console.error("vue-konva error: Can not find node "+I);return}var Se=new Ae;ce.__konvaNode=Se,ce.vnode.__konvaNode=Se,pe();function he(){return ce.__konvaNode}function Ce(){return ce.__konvaNode}function pe(){var K={};for(var X in ce.vnode.props)X.slice(0,2)==="on"&&(K[X]=ce.vnode.props[X]);var F=ge||{},te=P({},Y,B.config,K);v(ce,te,F,B.__useStrictMode),Object.assign(ge,te)}Object(l.onMounted)(function(){var K=w(ce).__konvaNode;K.add(Se),f(Se)}),Object(l.onUnmounted)(function(){f(Se),Se.destroy(),Se.off(D)}),Object(l.onUpdated)(function(){pe(),O(ce.subTree,Se)}),Object(l.watch)(function(){return B.config},pe,{deep:!0}),ie({getStage:Ce,getNode:he});var j=A[I];return j?function(){var K;return Object(l.h)("template",{},(K=Z.default)===null||K===void 0?void 0:K.call(Z))}:function(){return null}}}};typeof window<"u"&&!window.Konva&&a(1);var T=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],N=[{name:"Stage",component:M}].concat(T.map(function(I){return{name:I,component:R(I)}})),L={install:function($,B){var U=y;B&&B.prefix&&(U=B.prefix),N.forEach(function(Y){$.component(""+U+Y.name,Y.component)})}};s.default=L}]).default})})(eU);var Rbe=eU.exports;const nU=oM(Rbe),ax={__name:"KonvaStage",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i,{expose:e}){let n=0;function t(){return n+=1,n}let r={};function s(w){return r[w.uuid]}function a(w,x){if(w.uuid==x)return w;if(w.children)for(let _=0;_<w.children.length;_++){const O=w.children[_];var S=a(O,x);if(S)return S}return null}e({getObject:s});const l=S$(i,"modelValue");function h(w,x,S){var _=Abe[w],O=new _(S);return O.uuid=S.uuid,r[S.uuid]=O,x&&x.add(O),u(O,S),O}function u(w,x){let S=["x","y","width","height","offsetX","offsetY","fill","opacity","stroke","name","rotation","scaleX","scaleY","shadowColor","shadowOffset","shadowBlur","lineJoin","draggable"];for(let _=0;_<S.length;_++){const O=S[_],k=`${O}Change`;w.on(k,M=>{x[O]=M.newVal})}}function f(w,x,S){var _=r[S.uuid];if(_?_.setAttrs(S):_=h(w,x,S),S.children)for(let O=0;O<S.children.length;O++){const k=S.children[O];f(k.type,_,k)}return _}function p(w){if(w.uuid||(w.uuid=t()),w.children)for(let x=0;x<w.children.length;x++){const S=w.children[x];p(S)}}function g(w){var x=a(l.value,w.uuid);if(!x){w.remove();return}var S=[];if(w.getChildren){var _=w.getChildren();for(let k=0;k<_.length;k++){const M=_[k];var O=a(l.value,M.uuid);O||S.push(M)}}for(let k=0;k<S.length;k++)S[k].remove();if(w.getChildren){var _=w.getChildren();for(let M=0;M<_.length;M++){const P=_[M];g(P)}}}function v(w){let x=document.getElementById(l.value.container);var S=l.value.width||x.clientWidth,_=l.value.height||x.clientHeight;w.width(S),w.height(_)}function y(){p(l.value);var w=f("Stage",null,l.value);v(w),g(w)}return Fn(l.value,()=>{y()}),Yi(()=>{y()}),To(()=>{}),(w,x)=>null}},Ibe=jt("h1",null,"坐标系展示",-1),Dbe=jt("div",{class:"mylabel"},"坐标(x,y)",-1),Nbe=jt("div",{class:"mylabel"},"全局坐标(x,y)",-1),$be=jt("div",{class:"mylabel"},"锚点(offset)",-1),Vbe=jt("div",{class:"mylabel"},"尺寸(w,h)",-1),Lbe=jt("div",{class:"mylabel"},"旋转角度",-1),Bbe=jt("div",{class:"mylabel"},"缩放(scale)",-1),Ube=jt("div",{class:"mylabel"},"透明度(0-1)",-1),zbe=jt("div",{class:"mylabel"},"颜色",-1),Fbe=jt("div",{class:"mylabel"},"shadowOffset",-1),Xbe=jt("div",{class:"mylabel"},"shadowBlur",-1),Wbe=jt("div",{class:"mylabel"},"lineJoin",-1),uS=800,dS=600,Qbe={__name:"KonvaMain",setup(i){const e=at({stageConfig:{width:uS,height:dS,fill:"black"},backgroundConfig:{x:0,y:0,width:uS,height:dS,fill:"#fefae0",stroke:"black",strokeWidth:1},rectConfig:{x:100,y:100,gx:100,gy:100,width:200,height:100,offsetX:0,offsetY:0,fill:"#dda15e",opacity:.8,stroke:"black",name:"rect",rotation:0,scaleX:1,scaleY:1,shadowColor:"#A78EEB",shadowOffset:{x:3,y:3},shadowBlur:3,lineJoin:"miter",draggable:!0}}),n=at(null),t=at(null),r=at(null);function s(){if(n.value){var a=n.value.getNode();e.value.rectConfig.x=a.x(),e.value.rectConfig.y=a.y(),e.value.rectConfig.gx=a.absolutePosition().x,e.value.rectConfig.gy=a.absolutePosition().y,e.value.rectConfig.offsetX=a.offsetX(),e.value.rectConfig.offsetY=a.offsetY(),e.value.rectConfig.width=a.width(),e.value.rectConfig.height=a.height(),e.value.rectConfig.rotation=a.rotation(),e.value.rectConfig.rotation=a.rotation(),e.value.rectConfig.scaleX=a.scaleX(),e.value.rectConfig.scaleY=a.scaleY(),requestAnimationFrame(s)}}return Yi(()=>{requestAnimationFrame(s);var a=t.value.getNode(),l=r.value.getNode();a.on("click tap",function(h){var f,p;if(!h.target.hasName("rect")){(f=a.findOne("Transformer"))==null||f.destroy(),l.draw();return}(p=a.findOne("Transformer"))==null||p.destroy();var u=new xc.Transformer;l.add(u),u.nodes([h.target]),l.draw()}),window.stage=a,window.coordConfig=e,window.VueKonva=nU}),(a,l)=>{const h=Rt("v-rect"),u=Rt("v-arrow"),f=Rt("v-layer"),p=Rt("v-stage"),g=Rt("Col"),v=Rt("Divider"),y=Rt("InputNumber"),w=Rt("Row"),x=Rt("Slider"),S=Rt("ColorPicker"),_=Rt("Option"),O=Rt("Select"),k=Rt("Card");return mn(),xi(ai,null,[Re(k,null,{title:Je(()=>[Ibe]),default:Je(()=>[Re(w,null,{default:Je(()=>[Re(g,null,{default:Je(()=>[jt("div",null,[Re(p,{ref_key:"myStageRef",ref:t,config:e.value.stageConfig},{default:Je(()=>[Re(f,{ref_key:"myLayerRef",ref:r},{default:Je(()=>[Re(h,{config:e.value.backgroundConfig},null,8,["config"]),Re(u,{config:{points:[0,0,uS,0],fill:"black",stroke:"black"}},null,8,["config"]),Re(u,{config:{points:[0,0,0,dS],fill:"black",stroke:"black"}},null,8,["config"]),Re(h,{ref_key:"myRectRef",ref:n,config:e.value.rectConfig,__useStrictMode:!0},null,8,["config"])]),_:1},512)]),_:1},8,["config"])])]),_:1}),Re(g,null,{default:Je(()=>[jt("div",null,[Re(w,null,{default:Je(()=>[Re(g,null,{default:Je(()=>[Re(v,null,{default:Je(()=>[li("基础")]),_:1}),Re(w,null,{default:Je(()=>[Dbe,Re(y,{modelValue:e.value.rectConfig.x,"onUpdate:modelValue":l[0]||(l[0]=M=>e.value.rectConfig.x=M),step:10},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.y,"onUpdate:modelValue":l[1]||(l[1]=M=>e.value.rectConfig.y=M),step:10},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[Nbe,Re(y,{modelValue:e.value.rectConfig.gx,"onUpdate:modelValue":l[2]||(l[2]=M=>e.value.rectConfig.gx=M),readonly:!0},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.gy,"onUpdate:modelValue":l[3]||(l[3]=M=>e.value.rectConfig.gy=M),readonly:!0},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[$be,Re(y,{modelValue:e.value.rectConfig.offsetX,"onUpdate:modelValue":l[4]||(l[4]=M=>e.value.rectConfig.offsetX=M),step:10},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.offsetY,"onUpdate:modelValue":l[5]||(l[5]=M=>e.value.rectConfig.offsetY=M),step:10},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[Vbe,Re(y,{modelValue:e.value.rectConfig.width,"onUpdate:modelValue":l[6]||(l[6]=M=>e.value.rectConfig.width=M),step:10},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.height,"onUpdate:modelValue":l[7]||(l[7]=M=>e.value.rectConfig.height=M),step:10},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[Lbe,Re(y,{modelValue:e.value.rectConfig.rotation,"onUpdate:modelValue":l[8]||(l[8]=M=>e.value.rectConfig.rotation=M),step:10},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[Bbe,Re(y,{modelValue:e.value.rectConfig.scaleX,"onUpdate:modelValue":l[9]||(l[9]=M=>e.value.rectConfig.scaleX=M),step:.1},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.scaleY,"onUpdate:modelValue":l[10]||(l[10]=M=>e.value.rectConfig.scaleY=M),step:.1},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[Ube,Re(x,{modelValue:e.value.rectConfig.opacity,"onUpdate:modelValue":l[11]||(l[11]=M=>e.value.rectConfig.opacity=M),min:0,max:1,step:.05,style:{width:"160px"}},null,8,["modelValue"])]),_:1}),Re(v,null,{default:Je(()=>[li("阴影")]),_:1}),Re(w,null,{default:Je(()=>[zbe,Re(S,{modelValue:e.value.rectConfig.shadowColor,"onUpdate:modelValue":l[12]||(l[12]=M=>e.value.rectConfig.shadowColor=M)},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[Fbe,Re(y,{modelValue:e.value.rectConfig.shadowOffsetX,"onUpdate:modelValue":l[13]||(l[13]=M=>e.value.rectConfig.shadowOffsetX=M)},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.shadowOffsetY,"onUpdate:modelValue":l[14]||(l[14]=M=>e.value.rectConfig.shadowOffsetY=M)},null,8,["modelValue"])]),_:1}),Re(w,null,{default:Je(()=>[Xbe,Re(y,{modelValue:e.value.rectConfig.shadowBlur,"onUpdate:modelValue":l[15]||(l[15]=M=>e.value.rectConfig.shadowBlur=M)},null,8,["modelValue"])]),_:1}),Re(v,null,{default:Je(()=>[li("边角")]),_:1}),Re(w,null,{default:Je(()=>[Wbe,Re(O,{modelValue:e.value.rectConfig.lineJoin,"onUpdate:modelValue":l[16]||(l[16]=M=>e.value.rectConfig.lineJoin=M),style:{width:"160px"}},{default:Je(()=>[Re(_,{value:"miter"},{default:Je(()=>[li("miter")]),_:1}),Re(_,{value:"bevel"},{default:Je(()=>[li("bevel")]),_:1}),Re(_,{value:"round"},{default:Je(()=>[li("round")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),Re(ax),Re(k)],64)}}},Hbe=["src"],zm={__name:"EasyLink",props:{link:String,width:Number,height:Number},setup(i){const e=i,n=at(null);return Yi(()=>{var t=e.width?`${t}px`:"100%",r=e.height?`${r}px`:"100vh";n.value={width:t,height:r}}),(t,r)=>(mn(),xi("iframe",{src:e.link,style:Gc(n.value)},null,12,Hbe))}},Gbe={__name:"GridSquare",setup(i){const e=dr(null),n=dr(null),t=dr(null),r=dr(null),s=at({rows:5,cols:8,boxWidth:100,boxHeight:50,offsetX:-400,offsetY:-125});Fn(s.value,()=>{h()});const a=dr(null);function l(){var f=t.value.getNode(),p=r.value.getNode(),g=f.getChildren();for(let S=0;S<s.value.rows;S++)for(let _=0;_<s.value.cols;_++){var v=S*s.value.cols+_,y=g[v];y.x(_*s.value.boxWidth+s.value.offsetX),y.y(S*s.value.boxHeight+s.value.offsetY)}var w=p.findOne("#arrowx");w.points([0,0,s.value.boxWidth*s.value.cols+s.value.offsetX,0]);var x=p.findOne("#arrowy");x.points([0,0,0,s.value.boxHeight*s.value.rows+s.value.offsetY])}function h(){var f=n.value.getNode(),p=t.value.getNode(),g=r.value.getNode();p.removeChildren(),g.removeChildren();for(let _=0;_<s.value.rows;_++)for(let O=0;O<s.value.cols;O++){var v=new xc.Group({id:`${_}_${O}`});p.add(v);var y=new xc.Rect({x:0,y:0,width:s.value.boxWidth,height:s.value.boxHeight,stroke:"black",strokeWidth:1,draggable:!0,id:"box"});v.add(y);var w=new xc.Text({text:`(${_},${O})`,x:0,y:0,width:s.value.boxWidth,height:s.value.boxHeight,align:"center",verticalAlign:"middle",id:"text"});v.add(w)}var x=new xc.Arrow({x:0,y:0,points:[0,0,f.width(),0],pointerLength:20,pointerWidth:20,fill:"red",stroke:"red",strokeWidth:4,id:"arrowx"});g.add(x);var S=new xc.Arrow({x:0,y:0,points:[0,0,0,f.height()],pointerLength:20,pointerWidth:20,fill:"green",stroke:"green",strokeWidth:4,id:"arrowy"});g.add(S),l()}Yi(()=>{var f=n.value.getNode(),p=t.value.getNode();f.width(e.value.clientWidth),f.height(e.value.clientHeight),f.x(e.value.clientWidth/2),f.y(e.value.clientHeight/2),window.boxConfig=s,window.stage=f,window.layer=p,h(),f.on("wheel",g=>{g.evt.preventDefault();var v=f.scaleX(),y=f.getPointerPosition(),w={x:(y.x-f.x())/v,y:(y.y-f.y())/v};let x=g.evt.deltaY>0?1:-1;g.evt.ctrlKey&&(x=-x);const S=1.1;var _=x<0?v*S:v/S;f.scale({x:_,y:_});var O={x:y.x-w.x*_,y:y.y-w.y*_};f.position(O)}),f.on("mousemove",g=>{var v=f.getPointerPosition(),y=Math.floor((v.y-f.y()-s.value.offsetY)/s.value.boxHeight),w=Math.floor((v.x-f.x()-s.value.offsetX)/s.value.boxWidth),x=`#${y}_${w}`;if(a.value){var S=p.findOne(a.value);u(S,!1)}var S=p.findOne(x);u(S,!0),a.value=x})});function u(f,p){if(f){var g=f.findOne("#box");p?(console.log(g.fill()),g.fill("red")):g.fill(null)}}return(f,p)=>{const g=Rt("v-layer"),v=Rt("v-stage"),y=Rt("Col"),w=Rt("InputNumber"),x=Rt("FormItem"),S=Rt("Form"),_=Rt("Row");return mn(),_r(_,null,{default:Je(()=>[Re(y,{span:18},{default:Je(()=>[jt("div",{class:"boxborder",ref_key:"boxParentRef",ref:e},[Re(v,{ref_key:"boxStageRef",ref:n,config:{width:100,height:100,draggable:!0}},{default:Je(()=>[Re(g,{ref_key:"arrowLayerRef",ref:r},null,512),Re(g,{ref_key:"boxLayerRef",ref:t},null,512)]),_:1},512)],512)]),_:1}),Re(y,{span:6},{default:Je(()=>[Re(S,{"label-width":100},{default:Je(()=>[Re(x,{label:"行 / 列",style:{width:"100%"}},{default:Je(()=>[Re(w,{modelValue:s.value.rows,"onUpdate:modelValue":p[0]||(p[0]=O=>s.value.rows=O)},null,8,["modelValue"]),Re(w,{modelValue:s.value.cols,"onUpdate:modelValue":p[1]||(p[1]=O=>s.value.cols=O)},null,8,["modelValue"])]),_:1}),Re(x,{label:"单元格宽高"},{default:Je(()=>[Re(w,{modelValue:s.value.boxWidth,"onUpdate:modelValue":p[2]||(p[2]=O=>s.value.boxWidth=O)},null,8,["modelValue"]),Re(w,{modelValue:s.value.boxHeight,"onUpdate:modelValue":p[3]||(p[3]=O=>s.value.boxHeight=O)},null,8,["modelValue"])]),_:1}),Re(x,{label:"坐标偏移"},{default:Je(()=>[Re(w,{modelValue:s.value.offsetX,"onUpdate:modelValue":p[4]||(p[4]=O=>s.value.offsetX=O)},null,8,["modelValue"]),Re(w,{modelValue:s.value.offsetY,"onUpdate:modelValue":p[5]||(p[5]=O=>s.value.offsetY=O)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Ybe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},jbe={__name:"GridParallelogramH",setup(i){const e=at(100),n=at(100),t=at(60),r=at(4),s=at(5),a=ci(()=>{var f=[];const p=e.value,g=n.value,v=t.value*Math.PI/180;for(let y=0;y<r.value;y++)for(let w=0;w<s.value;w++){const x=p*w,S=g*Math.sin(v)*y,_=x+p,O=S,k=_+g*Math.cos(v),M=(y+1)*g*Math.sin(v),P=x+g*Math.cos(v),A={type:"Line",points:[x,S,_,O,k,M,P,M],fill:"#00D2FF",stroke:"black",strokeWidth:1,closed:!0,name:`${y}_${w} line`};f.push(A)}return f}),l=ci(()=>[{type:"Arrow",points:[0,0,e.value*s.value,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,n.value*r.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),h=at(null),u=at({container:"container",draggable:!0,x:100,y:600,scaleY:-1,children:[{type:"Layer",children:a},{type:"Layer",children:l}]});return Yi(()=>{window.shapes=a;var f=h.value.getObject(u.value),p=null;f.on("mousemove",g=>{p&&p.fill("#00D2FF"),g.target.hasName("line")&&(g.target.fill("red"),p=g.target)})}),(f,p)=>{const g=Rt("Col"),v=Rt("InputNumber"),y=Rt("FormItem"),w=Rt("Slider"),x=Rt("Form"),S=Rt("Row");return mn(),_r(S,null,{default:Je(()=>[Re(g,{span:12},{default:Je(()=>[jt("div",Ybe,[Re(ax,{ref_key:"stageRef",ref:h,modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=_=>u.value=_)},null,8,["modelValue"])])]),_:1}),Re(g,{span:4},{default:Je(()=>[Re(x,{"label-width":100},{default:Je(()=>[Re(y,{label:"地块横边(px)"},{default:Je(()=>[Re(v,{modelValue:e.value,"onUpdate:modelValue":p[1]||(p[1]=_=>e.value=_)},null,8,["modelValue"])]),_:1}),Re(y,{label:"地块竖边(px)"},{default:Je(()=>[Re(v,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=_=>n.value=_)},null,8,["modelValue"])]),_:1}),Re(y,{label:"偏转角度"},{default:Je(()=>[Re(w,{modelValue:t.value,"onUpdate:modelValue":p[3]||(p[3]=_=>t.value=_),min:0,max:90},null,8,["modelValue"])]),_:1}),Re(y,{label:"行 / 列"},{default:Je(()=>[Re(v,{modelValue:r.value,"onUpdate:modelValue":p[4]||(p[4]=_=>r.value=_)},null,8,["modelValue"]),Re(v,{modelValue:s.value,"onUpdate:modelValue":p[5]||(p[5]=_=>s.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},qbe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},Zbe={__name:"GridParallelogramV",setup(i){const e=at(130),n=at(100),t=at(60),r=at(4),s=at(10),a=ci(()=>{var f=[];const p=e.value,g=n.value;t.value*Math.PI/180;for(let y=0;y<r.value;y++)for(let w=0;w<s.value;w++){let x=null,S,_,O,k,M,P,D,A;S=p*w+p/2,_=g*y,O=S+p/2,k=_+g/2,M=S,P=_+g,D=p*w,A=k,S-=p*Math.floor(w/2),O-=p*Math.floor(w/2),M-=p*Math.floor(w/2),D-=p*Math.floor(w/2),w%2==1&&(S-=p/2,O-=p/2,M-=p/2,D-=p/2,_+=g/2,k+=g/2,P+=g/2,A+=g/2),_*=-1,k*=-1,P*=-1,A*=-1,x={type:"Line",points:[S,_,O,k,M,P,D,A],fill:"#c9ada7",stroke:"black",strokeWidth:1,closed:!0,name:`${y}_${w} line`,id:`${y}_${w}`},f.push(x);var v={type:"Text",text:`(${y},${w})`,x:D,y:k,align:"center",width:p,height:g};f.push(v)}return f}),l=ci(()=>[{type:"Arrow",points:[0,0,e.value*s.value/2,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,-n.value*r.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),h=at(null),u=at({container:"container",draggable:!0,x:100,y:600,children:[{type:"Layer",children:a},{type:"Layer",children:l}]});return Yi(()=>{window.shapes=a;var f=h.value.getObject(u.value),p=null;f.on("mousemove",g=>{p&&p.fill("#c9ada7"),g.target.hasName("line")&&(g.target.fill("red"),p=g.target)})}),(f,p)=>{const g=Rt("Col"),v=Rt("Slider"),y=Rt("FormItem"),w=Rt("InputNumber"),x=Rt("Form"),S=Rt("Row");return mn(),_r(S,null,{default:Je(()=>[Re(g,{span:12},{default:Je(()=>[jt("div",qbe,[Re(ax,{ref_key:"stageRef",ref:h,modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=_=>u.value=_)},null,8,["modelValue"])])]),_:1}),Re(g,{span:4},{default:Je(()=>[Re(x,{"label-width":100},{default:Je(()=>[Re(y,{label:"地块主边(px)"},{default:Je(()=>[Re(v,{modelValue:e.value,"onUpdate:modelValue":p[1]||(p[1]=_=>e.value=_),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Re(y,{label:"地块次边(px)"},{default:Je(()=>[Re(v,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=_=>n.value=_),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Re(y,{label:"行 / 列"},{default:Je(()=>[Re(w,{modelValue:r.value,"onUpdate:modelValue":p[3]||(p[3]=_=>r.value=_)},null,8,["modelValue"]),Re(w,{modelValue:s.value,"onUpdate:modelValue":p[4]||(p[4]=_=>s.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Kbe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},Jbe={__name:"KonvaStageTest",setup(i){const e=at([{type:"Rect",x:100,y:100,width:200,height:100,fill:"red",draggable:!0}]),n=at({type:"Stage",container:"container",wheel:!0,children:[{type:"Layer",children:e}]}),t=dr(null);function r(s){s=="Rect"?e.value.push({type:"Rect",width:200,height:100,fill:"green",draggable:!0}):s=="Circle"?e.value.push({type:"Circle",radius:80,fill:"green",draggable:!0}):s=="Star"&&e.value.push({type:"Star",innerRadius:40,outerRadius:70,fill:"yellow",stroke:"black",strokeWidth:4,draggable:!0}),console.log(s)}return Yi(()=>{var s=t.value.getObject(n.value);s.on("wheel",a=>{a.evt.preventDefault();var l=s.scaleX(),h=s.getPointerPosition(),u={x:(h.x-s.x())/l,y:(h.y-s.y())/l};let f=a.evt.deltaY>0?1:-1;a.evt.ctrlKey&&(f=-f);var p=1.1,g=f<0?l*p:l/p;s.scale({x:g,y:g});var v={x:h.x-u.x*g,y:h.y-u.y*g};s.position(v)})}),(s,a)=>{const l=Rt("Col"),h=Rt("Icon"),u=Rt("Button"),f=Rt("DropdownItem"),p=Rt("DropdownMenu"),g=Rt("Dropdown"),v=Rt("Space"),y=Rt("FormItem"),w=Rt("Divider"),x=Rt("InputNumber"),S=Rt("Form"),_=Rt("Row");return mn(),_r(_,null,{default:Je(()=>[Re(l,{span:12},{default:Je(()=>[jt("div",Kbe,[Re(ax,{ref_key:"stageRef",ref:t,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=O=>n.value=O)},null,8,["modelValue"])])]),_:1}),Re(l,{span:12},{default:Je(()=>[Re(S,{"label-width":100},{default:Je(()=>[Re(y,{label:"添加"},{default:Je(()=>[Re(v,null,{default:Je(()=>[Re(g,{onOnClick:r},{list:Je(()=>[Re(p,null,{default:Je(()=>[Re(f,{name:"Rect"},{default:Je(()=>[li("矩形")]),_:1}),Re(f,{name:"Circle"},{default:Je(()=>[li("圆形")]),_:1}),Re(f,{name:"Star"},{default:Je(()=>[li("星形")]),_:1})]),_:1})]),default:Je(()=>[Re(u,{type:"primary"},{default:Je(()=>[li(" 添加图形 "),Re(h,{type:"ios-arrow-down"})]),_:1})]),_:1})]),_:1})]),_:1}),Re(w),(mn(!0),xi(ai,null,uu(e.value,O=>(mn(),_r(y,{label:"x/y"},{default:Je(()=>[Re(x,{modelValue:O.x,"onUpdate:modelValue":k=>O.x=k},null,8,["modelValue","onUpdate:modelValue"]),Re(x,{modelValue:O.y,"onUpdate:modelValue":k=>O.y=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}},eOe=jt("h1",null,"三角函数计算器",-1),tOe={__name:"TrigoCalc",setup(i){const e=at(0),n=at(0),t=at(0),r=at(0),s=at(0),a=at(0),l=at(0);let h=!1;Fn(n,()=>{u(n,g=>g)}),Fn(t,()=>{u(t,g=>g*180/Math.PI)}),Fn(r,()=>{u(r,g=>Math.asin(g))}),Fn(s,()=>{u(s,g=>Math.acos(g))}),Fn(a,()=>{u(a,g=>Math.atan(g))}),Fn(l,()=>{u(l,g=>Math.atan(1/g))});function u(g,v){if(h)return;const y=f(g.value);e.value=v(y)}function f(g){let v=parseFloat(g);return v||(v=0),Math.abs(v)<.001&&(v=0),v}Fn(e,p);async function p(){h=!0;const g=e.value*Math.PI/180;n.value=e.value,t.value=g,r.value=Math.sin(g),s.value=Math.cos(g),a.value=Math.tan(g),a.value?l.value=1/a.value:l.value=0,n.value=parseFloat(n.value.toFixed(3)),t.value=parseFloat(t.value.toFixed(3)),r.value=parseFloat(r.value.toFixed(3)),s.value=parseFloat(s.value.toFixed(3)),a.value=parseFloat(a.value.toFixed(3)),l.value=parseFloat(l.value.toFixed(3)),await Lf(),h=!1}return Yi(()=>{e.value=30}),(g,v)=>{const y=Rt("Input"),w=Rt("Col"),x=Rt("Row");return mn(),_r(x,null,{default:Je(()=>[Re(w,{span:4,offset:10},{default:Je(()=>[eOe,Re(y,{type:"number",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=S=>n.value=S)},{prepend:Je(()=>[li("角度")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:t.value,"onUpdate:modelValue":v[1]||(v[1]=S=>t.value=S)},{prepend:Je(()=>[li("弧度")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:r.value,"onUpdate:modelValue":v[2]||(v[2]=S=>r.value=S)},{prepend:Je(()=>[li("正弦")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:s.value,"onUpdate:modelValue":v[3]||(v[3]=S=>s.value=S)},{prepend:Je(()=>[li("余弦")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:a.value,"onUpdate:modelValue":v[4]||(v[4]=S=>a.value=S)},{prepend:Je(()=>[li("正切")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:l.value,"onUpdate:modelValue":v[5]||(v[5]=S=>l.value=S)},{prepend:Je(()=>[li("余切")]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};class Bn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,t){[e,n]=Mf(this,e,n);let r=[];return this.decompose(0,e,r,2),t.length&&t.decompose(0,t.length,r,3),this.decompose(n,this.length,r,1),va.from(r,this.length-(n-e)+t.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Mf(this,e,n);let t=[];return this.decompose(e,n,t,0),va.from(t,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),t=this.length-this.scanIdentical(e,-1),r=new yg(this),s=new yg(e);for(let a=n,l=n;;){if(r.next(a),s.next(a),a=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=t)return!0}}iter(e=1){return new yg(this,e)}iterRange(e,n=this.length){return new iU(this,e,n)}iterLines(e,n){let t;if(e==null)t=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;t=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new rU(t)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Bn.empty:e.length<=32?new $i(e):va.from($i.split(e,[]))}}class $i extends Bn{constructor(e,n=nOe(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,t,r){for(let s=0;;s++){let a=this.text[s],l=r+a.length;if((n?t:l)>=e)return new iOe(r,l,t,a);r=l+1,t++}}decompose(e,n,t,r){let s=e<=0&&n>=this.length?this:new $i(e6(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let a=t.pop(),l=Q1(s.text,a.text.slice(),0,s.length);if(l.length<=32)t.push(new $i(l,a.length+s.length));else{let h=l.length>>1;t.push(new $i(l.slice(0,h)),new $i(l.slice(h)))}}else t.push(s)}replace(e,n,t){if(!(t instanceof $i))return super.replace(e,n,t);[e,n]=Mf(this,e,n);let r=Q1(this.text,Q1(t.text,e6(this.text,0,e)),n),s=this.length+t.length-(n-e);return r.length<=32?new $i(r,s):va.from($i.split(r,[]),s)}sliceString(e,n=this.length,t=`
`){[e,n]=Mf(this,e,n);let r="";for(let s=0,a=0;s<=n&&a<this.text.length;a++){let l=this.text[a],h=s+l.length;s>e&&a&&(r+=t),e<h&&n>s&&(r+=l.slice(Math.max(0,e-s),n-s)),s=h+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let t=[],r=-1;for(let s of e)t.push(s),r+=s.length+1,t.length==32&&(n.push(new $i(t,r)),t=[],r=-1);return r>-1&&n.push(new $i(t,r)),n}}class va extends Bn{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,n,t,r){for(let s=0;;s++){let a=this.children[s],l=r+a.length,h=t+a.lines-1;if((n?h:l)>=e)return a.lineInner(e,n,t,r);r=l+1,t=h+1}}decompose(e,n,t,r){for(let s=0,a=0;a<=n&&s<this.children.length;s++){let l=this.children[s],h=a+l.length;if(e<=h&&n>=a){let u=r&((a<=e?1:0)|(h>=n?2:0));a>=e&&h<=n&&!u?t.push(l):l.decompose(e-a,n-a,t,u)}a=h+1}}replace(e,n,t){if([e,n]=Mf(this,e,n),t.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let a=this.children[r],l=s+a.length;if(e>=s&&n<=l){let h=a.replace(e-s,n-s,t),u=this.lines-a.lines+h.lines;if(h.lines<u>>4&&h.lines>u>>6){let f=this.children.slice();return f[r]=h,new va(f,this.length-(n-e)+t.length)}return super.replace(s,l,h)}s=l+1}return super.replace(e,n,t)}sliceString(e,n=this.length,t=`
`){[e,n]=Mf(this,e,n);let r="";for(let s=0,a=0;s<this.children.length&&a<=n;s++){let l=this.children[s],h=a+l.length;a>e&&s&&(r+=t),e<h&&n>a&&(r+=l.sliceString(e-a,n-a,t)),a=h+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof va))return 0;let t=0,[r,s,a,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==a||s==l)return t;let h=this.children[r],u=e.children[s];if(h!=u)return t+h.scanIdentical(u,n);t+=h.length+1}}static from(e,n=e.reduce((t,r)=>t+r.length+1,-1)){let t=0;for(let v of e)t+=v.lines;if(t<32){let v=[];for(let y of e)y.flatten(v);return new $i(v,n)}let r=Math.max(32,t>>5),s=r<<1,a=r>>1,l=[],h=0,u=-1,f=[];function p(v){let y;if(v.lines>s&&v instanceof va)for(let w of v.children)p(w);else v.lines>a&&(h>a||!h)?(g(),l.push(v)):v instanceof $i&&h&&(y=f[f.length-1])instanceof $i&&v.lines+y.lines<=32?(h+=v.lines,u+=v.length+1,f[f.length-1]=new $i(y.text.concat(v.text),y.length+1+v.length)):(h+v.lines>r&&g(),h+=v.lines,u+=v.length+1,f.push(v))}function g(){h!=0&&(l.push(f.length==1?f[0]:va.from(f,u)),u=-1,h=f.length=0)}for(let v of e)p(v);return g(),l.length==1?l[0]:new va(l,n)}}Bn.empty=new $i([""],0);function nOe(i){let e=-1;for(let n of i)e+=n.length+1;return e}function Q1(i,e,n=0,t=1e9){for(let r=0,s=0,a=!0;s<i.length&&r<=t;s++){let l=i[s],h=r+l.length;h>=n&&(h>t&&(l=l.slice(0,t-r)),r<n&&(l=l.slice(n-r)),a?(e[e.length-1]+=l,a=!1):e.push(l)),r=h+1}return e}function e6(i,e,n){return Q1(i,[""],e,n)}class yg{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof $i?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let t=this.nodes.length-1,r=this.nodes[t],s=this.offsets[t],a=s>>1,l=r instanceof $i?r.text.length:r.children.length;if(a==(n>0?l:0)){if(t==0)return this.done=!0,this.value="",this;n>0&&this.offsets[t-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[t]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof $i){let h=r.text[a+(n<0?-1:0)];if(this.offsets[t]+=n,h.length>Math.max(0,e))return this.value=e==0?h:n>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=r.children[a+(n<0?-1:0)];e>h.length?(e-=h.length,this.offsets[t]+=n):(n<0&&this.offsets[t]--,this.nodes.push(h),this.offsets.push(n>0?1:(h instanceof $i?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class iU{constructor(e,n,t){this.value="",this.done=!1,this.cursor=new yg(e,n>t?-1:1),this.pos=n>t?e.length:0,this.from=Math.min(n,t),this.to=Math.max(n,t)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let t=n<0?this.pos-this.from:this.to-this.pos;e>t&&(e=t),t-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=t?r:n<0?r.slice(r.length-t):r.slice(0,t),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class rU{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:t,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):t?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Bn.prototype[Symbol.iterator]=function(){return this.iter()},yg.prototype[Symbol.iterator]=iU.prototype[Symbol.iterator]=rU.prototype[Symbol.iterator]=function(){return this});class iOe{constructor(e,n,t,r){this.from=e,this.to=n,this.number=t,this.text=r}get length(){return this.to-this.from}}function Mf(i,e,n){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,n))]}let Jd="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<Jd.length;i++)Jd[i]+=Jd[i-1];function rOe(i){for(let e=1;e<Jd.length;e+=2)if(Jd[e]>i)return Jd[e-1]<=i;return!1}function t6(i){return i>=127462&&i<=127487}const n6=8205;function wr(i,e,n=!0,t=!0){return(n?sU:sOe)(i,e,t)}function sU(i,e,n){if(e==i.length)return e;e&&oU(i.charCodeAt(e))&&aU(i.charCodeAt(e-1))&&e--;let t=yr(i,e);for(e+=vo(t);e<i.length;){let r=yr(i,e);if(t==n6||r==n6||n&&rOe(r))e+=vo(r),t=r;else if(t6(r)){let s=0,a=e-2;for(;a>=0&&t6(yr(i,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function sOe(i,e,n){for(;e>0;){let t=sU(i,e-2,n);if(t<e)return t;e--}return 0}function oU(i){return i>=56320&&i<57344}function aU(i){return i>=55296&&i<56320}function yr(i,e){let n=i.charCodeAt(e);if(!aU(n)||e+1==i.length)return n;let t=i.charCodeAt(e+1);return oU(t)?(n-55296<<10)+(t-56320)+65536:n}function vM(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function vo(i){return i<65536?1:2}const o2=/\r\n?|\n/;var es=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(es||(es={}));class Sa{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let t=this.sections[n+1];e+=t<0?this.sections[n]:t}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,t=0,r=0;n<this.sections.length;){let s=this.sections[n++],a=this.sections[n++];a<0?(e(t,r,s),r+=s):r+=a,t+=s}}iterChangedRanges(e,n=!1){a2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let t=this.sections[n++],r=this.sections[n++];r<0?e.push(t,r):e.push(r,t)}return new Sa(e)}composeDesc(e){return this.empty?e:e.empty?this:lU(this,e)}mapDesc(e,n=!1){return e.empty?this:l2(this,e,n)}mapPos(e,n=-1,t=es.Simple){let r=0,s=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],h=this.sections[a++],u=r+l;if(h<0){if(u>e)return s+(e-r);s+=l}else{if(t!=es.Simple&&u>=e&&(t==es.TrackDel&&r<e&&u>e||t==es.TrackBefore&&r<e||t==es.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==r||n<0?s:s+h;s+=h}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let t=0,r=0;t<this.sections.length&&r<=n;){let s=this.sections[t++],a=this.sections[t++],l=r+s;if(a>=0&&r<=n&&l>=e)return r<e&&l>n?"cover":!0;r=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let t=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+t+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Sa(e)}static create(e){return new Sa(e)}}class Ki extends Sa{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return a2(this,(n,t,r,s,a)=>e=e.replace(r,r+(t-n),a),!1),e}mapDesc(e,n=!1){return l2(this,e,n,!0)}invert(e){let n=this.sections.slice(),t=[];for(let r=0,s=0;r<n.length;r+=2){let a=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=a;let h=r>>1;for(;t.length<h;)t.push(Bn.empty);t.push(a?e.slice(s,s+a):Bn.empty)}s+=a}return new Ki(n,t)}compose(e){return this.empty?e:e.empty?this:lU(this,e,!0)}map(e,n=!1){return e.empty?this:l2(this,e,n,!0)}iterChanges(e,n=!1){a2(this,e,n)}get desc(){return Sa.create(this.sections)}filter(e){let n=[],t=[],r=[],s=new Jg(this);e:for(let a=0,l=0;;){let h=a==e.length?1e9:e[a++];for(;l<h||l==h&&s.len==0;){if(s.done)break e;let f=Math.min(s.len,h-l);Ir(r,f,-1);let p=s.ins==-1?-1:s.off==0?s.ins:0;Ir(n,f,p),p>0&&Cc(t,n,s.text),s.forward(f),l+=f}let u=e[a++];for(;l<u;){if(s.done)break e;let f=Math.min(s.len,u-l);Ir(n,f,-1),Ir(r,f,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(f),l+=f}}return{changes:new Ki(n,t),filtered:Sa.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let t=this.sections[n],r=this.sections[n+1];r<0?e.push(t):r==0?e.push([t]):e.push([t].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,t){let r=[],s=[],a=0,l=null;function h(f=!1){if(!f&&!r.length)return;a<n&&Ir(r,n-a,-1);let p=new Ki(r,s);l=l?l.compose(p.map(l)):p,r=[],s=[],a=0}function u(f){if(Array.isArray(f))for(let p of f)u(p);else if(f instanceof Ki){if(f.length!=n)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${n})`);h(),l=l?l.compose(f.map(l)):f}else{let{from:p,to:g=p,insert:v}=f;if(p>g||p<0||g>n)throw new RangeError(`Invalid change range ${p} to ${g} (in doc of length ${n})`);let y=v?typeof v=="string"?Bn.of(v.split(t||o2)):v:Bn.empty,w=y.length;if(p==g&&w==0)return;p<a&&h(),p>a&&Ir(r,p-a,-1),Ir(r,g-p,w),Cc(s,r,y),a=g}}return u(e),h(!l),l}static empty(e){return new Ki(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],t=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;t.length<r;)t.push(Bn.empty);t[r]=Bn.of(s.slice(1)),n.push(s[0],t[r].length)}}}return new Ki(n,t)}static createSet(e,n){return new Ki(e,n)}}function Ir(i,e,n,t=!1){if(e==0&&n<=0)return;let r=i.length-2;r>=0&&n<=0&&n==i[r+1]?i[r]+=e:e==0&&i[r]==0?i[r+1]+=n:t?(i[r]+=e,i[r+1]+=n):i.push(e,n)}function Cc(i,e,n){if(n.length==0)return;let t=e.length-2>>1;if(t<i.length)i[i.length-1]=i[i.length-1].append(n);else{for(;i.length<t;)i.push(Bn.empty);i.push(n)}}function a2(i,e,n){let t=i.inserted;for(let r=0,s=0,a=0;a<i.sections.length;){let l=i.sections[a++],h=i.sections[a++];if(h<0)r+=l,s+=l;else{let u=r,f=s,p=Bn.empty;for(;u+=l,f+=h,h&&t&&(p=p.append(t[a-2>>1])),!(n||a==i.sections.length||i.sections[a+1]<0);)l=i.sections[a++],h=i.sections[a++];e(r,u,s,f,p),r=u,s=f}}}function l2(i,e,n,t=!1){let r=[],s=t?[]:null,a=new Jg(i),l=new Jg(e);for(let h=-1;;)if(a.ins==-1&&l.ins==-1){let u=Math.min(a.len,l.len);Ir(r,u,-1),a.forward(u),l.forward(u)}else if(l.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!n))){let u=l.len;for(Ir(r,l.ins,-1);u;){let f=Math.min(a.len,u);a.ins>=0&&h<a.i&&a.len<=f&&(Ir(r,0,a.ins),s&&Cc(s,r,a.text),h=a.i),a.forward(f),u-=f}l.next()}else if(a.ins>=0){let u=0,f=a.len;for(;f;)if(l.ins==-1){let p=Math.min(f,l.len);u+=p,f-=p,l.forward(p)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;Ir(r,u,h<a.i?a.ins:0),s&&h<a.i&&Cc(s,r,a.text),h=a.i,a.forward(a.len-f)}else{if(a.done&&l.done)return s?Ki.createSet(r,s):Sa.create(r);throw new Error("Mismatched change set lengths")}}function lU(i,e,n=!1){let t=[],r=n?[]:null,s=new Jg(i),a=new Jg(e);for(let l=!1;;){if(s.done&&a.done)return r?Ki.createSet(t,r):Sa.create(t);if(s.ins==0)Ir(t,s.len,0,l),s.next();else if(a.len==0&&!a.done)Ir(t,0,a.ins,l),r&&Cc(r,t,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(s.len2,a.len),u=t.length;if(s.ins==-1){let f=a.ins==-1?-1:a.off?0:a.ins;Ir(t,h,f,l),r&&f&&Cc(r,t,a.text)}else a.ins==-1?(Ir(t,s.off?0:s.len,h,l),r&&Cc(r,t,s.textBit(h))):(Ir(t,s.off?0:s.len,a.off?0:a.ins,l),r&&!a.off&&Cc(r,t,a.text));l=(s.ins>h||a.ins>=0&&a.len>h)&&(l||t.length>u),s.forward2(h),a.forward(h)}}}}class Jg{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Bn.empty:e[n]}textBit(e){let{inserted:n}=this.set,t=this.i-2>>1;return t>=n.length&&!e?Bn.empty:n[t].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class jh{constructor(e,n,t){this.from=e,this.to=n,this.flags=t}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let t,r;return this.empty?t=r=e.mapPos(this.from,n):(t=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),t==this.from&&r==this.to?this:new jh(t,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ze.range(e,n);let t=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ze.range(this.anchor,t)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ze.range(e.anchor,e.head)}static create(e,n,t){return new jh(e,n,t)}}class Ze{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ze.create(this.ranges.map(t=>t.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ze([this.main],0)}addRange(e,n=!0){return Ze.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let t=this.ranges.slice();return t[n]=e,Ze.create(t,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ze(e.ranges.map(n=>jh.fromJSON(n)),e.main)}static single(e,n=e){return new Ze([Ze.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let t=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=t:s.from<t)return Ze.normalized(e.slice(),n);t=s.to}return new Ze(e,n)}static cursor(e,n=0,t,r){return jh.create(e,e,(n==0?0:n<0?8:16)|(t==null?7:Math.min(6,t))|(r??16777215)<<6)}static range(e,n,t,r){let s=(t??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?jh.create(n,e,48|s):jh.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let t=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(t);for(let r=1;r<e.length;r++){let s=e[r],a=e[r-1];if(s.empty?s.from<=a.to:s.from<a.to){let l=a.from,h=Math.max(s.to,a.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?Ze.range(h,l):Ze.range(l,h))}}return new Ze(e,n)}}function cU(i,e){for(let n of i.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let yM=0;class wt{constructor(e,n,t,r,s){this.combine=e,this.compareInput=n,this.compare=t,this.isStatic=r,this.id=yM++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new wt(e.combine||(n=>n),e.compareInput||((n,t)=>n===t),e.compare||(e.combine?(n,t)=>n===t:bM),!!e.static,e.enables)}of(e){return new H1([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new H1(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new H1(e,this,2,n)}from(e,n){return n||(n=t=>t),this.compute([e],t=>n(t.field(e)))}}function bM(i,e){return i==e||i.length==e.length&&i.every((n,t)=>n===e[t])}class H1{constructor(e,n,t,r){this.dependencies=e,this.facet=n,this.type=t,this.value=r,this.id=yM++}dynamicSlot(e){var n;let t=this.value,r=this.facet.compareInput,s=this.id,a=e[s]>>1,l=this.type==2,h=!1,u=!1,f=[];for(let p of this.dependencies)p=="doc"?h=!0:p=="selection"?u=!0:((n=e[p.id])!==null&&n!==void 0?n:1)&1||f.push(e[p.id]);return{create(p){return p.values[a]=t(p),1},update(p,g){if(h&&g.docChanged||u&&(g.docChanged||g.selection)||c2(p,f)){let v=t(p);if(l?!i6(v,p.values[a],r):!r(v,p.values[a]))return p.values[a]=v,1}return 0},reconfigure:(p,g)=>{let v,y=g.config.address[s];if(y!=null){let w=Pb(g,y);if(this.dependencies.every(x=>x instanceof wt?g.facet(x)===p.facet(x):x instanceof kr?g.field(x,!1)==p.field(x,!1):!0)||(l?i6(v=t(p),w,r):r(v=t(p),w)))return p.values[a]=w,0}else v=t(p);return p.values[a]=v,1}}}}function i6(i,e,n){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!n(i[t],e[t]))return!1;return!0}function c2(i,e){let n=!1;for(let t of e)bg(i,t)&1&&(n=!0);return n}function oOe(i,e,n){let t=n.map(h=>i[h.id]),r=n.map(h=>h.type),s=t.filter(h=>!(h&1)),a=i[e.id]>>1;function l(h){let u=[];for(let f=0;f<t.length;f++){let p=Pb(h,t[f]);if(r[f]==2)for(let g of p)u.push(g);else u.push(p)}return e.combine(u)}return{create(h){for(let u of t)bg(h,u);return h.values[a]=l(h),1},update(h,u){if(!c2(h,s))return 0;let f=l(h);return e.compare(f,h.values[a])?0:(h.values[a]=f,1)},reconfigure(h,u){let f=c2(h,t),p=u.config.facets[e.id],g=u.facet(e);if(p&&!f&&bM(n,p))return h.values[a]=g,0;let v=l(h);return e.compare(v,g)?(h.values[a]=g,0):(h.values[a]=v,1)}}}const r6=wt.define({static:!0});class kr{constructor(e,n,t,r,s){this.id=e,this.createF=n,this.updateF=t,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new kr(yM++,e.create,e.update,e.compare||((t,r)=>t===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(r6).find(t=>t.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:t=>(t.values[n]=this.create(t),1),update:(t,r)=>{let s=t.values[n],a=this.updateF(s,r);return this.compareF(s,a)?0:(t.values[n]=a,1)},reconfigure:(t,r)=>r.config.address[this.id]!=null?(t.values[n]=r.field(this),0):(t.values[n]=this.create(t),1)}}init(e){return[this,r6.of({field:this,create:e})]}get extension(){return this}}const zh={lowest:4,low:3,default:2,high:1,highest:0};function Fm(i){return e=>new hU(e,i)}const Ru={highest:Fm(zh.highest),high:Fm(zh.high),default:Fm(zh.default),low:Fm(zh.low),lowest:Fm(zh.lowest)};class hU{constructor(e,n){this.inner=e,this.prec=n}}class lx{of(e){return new h2(this,e)}reconfigure(e){return lx.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class h2{constructor(e,n){this.compartment=e,this.inner=n}}class Eb{constructor(e,n,t,r,s,a){for(this.base=e,this.compartments=n,this.dynamicSlots=t,this.address=r,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<t.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,t){let r=[],s=Object.create(null),a=new Map;for(let g of aOe(e,n,a))g instanceof kr?r.push(g):(s[g.facet.id]||(s[g.facet.id]=[])).push(g);let l=Object.create(null),h=[],u=[];for(let g of r)l[g.id]=u.length<<1,u.push(v=>g.slot(v));let f=t==null?void 0:t.config.facets;for(let g in s){let v=s[g],y=v[0].facet,w=f&&f[g]||[];if(v.every(x=>x.type==0))if(l[y.id]=h.length<<1|1,bM(w,v))h.push(t.facet(y));else{let x=y.combine(v.map(S=>S.value));h.push(t&&y.compare(x,t.facet(y))?t.facet(y):x)}else{for(let x of v)x.type==0?(l[x.id]=h.length<<1|1,h.push(x.value)):(l[x.id]=u.length<<1,u.push(S=>x.dynamicSlot(S)));l[y.id]=u.length<<1,u.push(x=>oOe(x,y,v))}}let p=u.map(g=>g(l));return new Eb(e,a,p,l,h,s)}}function aOe(i,e,n){let t=[[],[],[],[],[]],r=new Map;function s(a,l){let h=r.get(a);if(h!=null){if(h<=l)return;let u=t[h].indexOf(a);u>-1&&t[h].splice(u,1),a instanceof h2&&n.delete(a.compartment)}if(r.set(a,l),Array.isArray(a))for(let u of a)s(u,l);else if(a instanceof h2){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;n.set(a.compartment,u),s(u,l)}else if(a instanceof hU)s(a.inner,a.prec);else if(a instanceof kr)t[l].push(a),a.provides&&s(a.provides,l);else if(a instanceof H1)t[l].push(a),a.facet.extensions&&s(a.facet.extensions,zh.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(i,zh.default),t.reduce((a,l)=>a.concat(l))}function bg(i,e){if(e&1)return 2;let n=e>>1,t=i.status[n];if(t==4)throw new Error("Cyclic dependency between fields and/or facets");if(t&2)return t;i.status[n]=4;let r=i.computeSlot(i,i.config.dynamicSlots[n]);return i.status[n]=2|r}function Pb(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const uU=wt.define(),u2=wt.define({combine:i=>i.some(e=>e),static:!0}),dU=wt.define({combine:i=>i.length?i[0]:void 0,static:!0}),fU=wt.define(),pU=wt.define(),mU=wt.define(),gU=wt.define({combine:i=>i.length?i[0]:!1});class Al{constructor(e,n){this.type=e,this.value=n}static define(){return new lOe}}class lOe{of(e){return new Al(this,e)}}class cOe{constructor(e){this.map=e}of(e){return new gn(this,e)}}class gn{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new gn(this.type,n)}is(e){return this.type==e}static define(e={}){return new cOe(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let t=[];for(let r of e){let s=r.map(n);s&&t.push(s)}return t}}gn.reconfigure=gn.define();gn.appendConfig=gn.define();class ir{constructor(e,n,t,r,s,a){this.startState=e,this.changes=n,this.selection=t,this.effects=r,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,t&&cU(t,n.newLength),s.some(l=>l.type==ir.time)||(this.annotations=s.concat(ir.time.of(Date.now())))}static create(e,n,t,r,s,a){return new ir(e,n,t,r,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(ir.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}ir.time=Al.define();ir.userEvent=Al.define();ir.addToHistory=Al.define();ir.remote=Al.define();function hOe(i,e){let n=[];for(let t=0,r=0;;){let s,a;if(t<i.length&&(r==e.length||e[r]>=i[t]))s=i[t++],a=i[t++];else if(r<e.length)s=e[r++],a=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function vU(i,e,n){var t;let r,s,a;return n?(r=e.changes,s=Ki.empty(e.changes.length),a=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),s=i.changes.mapDesc(e.changes,!0),a=i.changes.compose(r)),{changes:a,selection:e.selection?e.selection.map(s):(t=i.selection)===null||t===void 0?void 0:t.map(r),effects:gn.mapEffects(i.effects,r).concat(gn.mapEffects(e.effects,s)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function d2(i,e,n){let t=e.selection,r=ef(e.annotations);return e.userEvent&&(r=r.concat(ir.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ki?e.changes:Ki.of(e.changes||[],n,i.facet(dU)),selection:t&&(t instanceof Ze?t:Ze.single(t.anchor,t.head)),effects:ef(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function yU(i,e,n){let t=d2(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let a=!!e[s].sequential;t=vU(t,d2(i,e[s],a?t.changes.newLength:i.doc.length),a)}let r=ir.create(i,t.changes,t.selection,t.effects,t.annotations,t.scrollIntoView);return dOe(n?uOe(r):r)}function uOe(i){let e=i.startState,n=!0;for(let r of e.facet(fU)){let s=r(i);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:hOe(n,s))}if(n!==!0){let r,s;if(n===!1)s=i.changes.invertedDesc,r=Ki.empty(e.doc.length);else{let a=i.changes.filter(n);r=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}i=ir.create(e,r,i.selection&&i.selection.map(s),gn.mapEffects(i.effects,s),i.annotations,i.scrollIntoView)}let t=e.facet(pU);for(let r=t.length-1;r>=0;r--){let s=t[r](i);s instanceof ir?i=s:Array.isArray(s)&&s.length==1&&s[0]instanceof ir?i=s[0]:i=yU(e,ef(s),!1)}return i}function dOe(i){let e=i.startState,n=e.facet(mU),t=i;for(let r=n.length-1;r>=0;r--){let s=n[r](i);s&&Object.keys(s).length&&(t=vU(t,d2(e,s,i.changes.newLength),!0))}return t==i?i:ir.create(e,i.changes,i.selection,t.effects,t.annotations,t.scrollIntoView)}const fOe=[];function ef(i){return i==null?fOe:Array.isArray(i)?i:[i]}var wi=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(wi||(wi={}));const pOe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let f2;try{f2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function mOe(i){if(f2)return f2.test(i);for(let e=0;e<i.length;e++){let n=i[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||pOe.test(n)))return!0}return!1}function gOe(i){return e=>{if(!/\S/.test(e))return wi.Space;if(mOe(e))return wi.Word;for(let n=0;n<i.length;n++)if(e.indexOf(i[n])>-1)return wi.Word;return wi.Other}}class Ln{constructor(e,n,t,r,s,a){this.config=e,this.doc=n,this.selection=t,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)bg(this,l<<1);this.computeSlot=null}field(e,n=!0){let t=this.config.address[e.id];if(t==null){if(n)throw new RangeError("Field is not present in this state");return}return bg(this,t),Pb(this,t)}update(...e){return yU(this,e,!0)}applyTransaction(e){let n=this.config,{base:t,compartments:r}=n;for(let l of e.effects)l.is(lx.reconfigure)?(n&&(r=new Map,n.compartments.forEach((h,u)=>r.set(u,h)),n=null),r.set(l.value.compartment,l.value.extension)):l.is(gn.reconfigure)?(n=null,t=l.value):l.is(gn.appendConfig)&&(n=null,t=ef(t).concat(l.value));let s;n?s=e.startState.values.slice():(n=Eb.resolve(t,r,this),s=new Ln(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(h,u)=>u.reconfigure(h,this),null).values);let a=e.startState.facet(u2)?e.newSelection:e.newSelection.asSingle();new Ln(n,e.newDoc,a,s,(l,h)=>h.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ze.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,t=e(n.ranges[0]),r=this.changes(t.changes),s=[t.range],a=ef(t.effects);for(let l=1;l<n.ranges.length;l++){let h=e(n.ranges[l]),u=this.changes(h.changes),f=u.map(r);for(let g=0;g<l;g++)s[g]=s[g].map(f);let p=r.mapDesc(u,!0);s.push(h.range.map(p)),r=r.compose(f),a=gn.mapEffects(a,f).concat(gn.mapEffects(ef(h.effects),p))}return{changes:r,selection:Ze.create(s,n.mainIndex),effects:a}}changes(e=[]){return e instanceof Ki?e:Ki.of(e,this.doc.length,this.facet(Ln.lineSeparator))}toText(e){return Bn.of(e.split(this.facet(Ln.lineSeparator)||o2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(bg(this,n),Pb(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let t in e){let r=e[t];r instanceof kr&&this.config.address[r.id]!=null&&(n[t]=r.spec.toJSON(this.field(e[t]),this))}return n}static fromJSON(e,n={},t){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(t){for(let s in t)if(Object.prototype.hasOwnProperty.call(e,s)){let a=t[s],l=e[s];r.push(a.init(h=>a.spec.fromJSON(l,h)))}}return Ln.create({doc:e.doc,selection:Ze.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Eb.resolve(e.extensions||[],new Map),t=e.doc instanceof Bn?e.doc:Bn.of((e.doc||"").split(n.staticFacet(Ln.lineSeparator)||o2)),r=e.selection?e.selection instanceof Ze?e.selection:Ze.single(e.selection.anchor,e.selection.head):Ze.single(0);return cU(r,t.length),n.staticFacet(u2)||(r=r.asSingle()),new Ln(n,t,r,n.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(Ln.tabSize)}get lineBreak(){return this.facet(Ln.lineSeparator)||`
`}get readOnly(){return this.facet(gU)}phrase(e,...n){for(let t of this.facet(Ln.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(t,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?t:n[s-1]})),e}languageDataAt(e,n,t=-1){let r=[];for(let s of this.facet(uU))for(let a of s(this,n,t))Object.prototype.hasOwnProperty.call(a,e)&&r.push(a[e]);return r}charCategorizer(e){return gOe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:t,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-t,l=e-t;for(;a>0;){let h=wr(n,a,!1);if(s(n.slice(h,a))!=wi.Word)break;a=h}for(;l<r;){let h=wr(n,l);if(s(n.slice(l,h))!=wi.Word)break;l=h}return a==l?null:Ze.range(a+t,l+t)}}Ln.allowMultipleSelections=u2;Ln.tabSize=wt.define({combine:i=>i.length?i[0]:4});Ln.lineSeparator=dU;Ln.readOnly=gU;Ln.phrases=wt.define({compare(i,e){let n=Object.keys(i),t=Object.keys(e);return n.length==t.length&&n.every(r=>i[r]==e[r])}});Ln.languageData=uU;Ln.changeFilter=fU;Ln.transactionFilter=pU;Ln.transactionExtender=mU;lx.reconfigure=gn.define();function Na(i,e,n={}){let t={};for(let r of i)for(let s of Object.keys(r)){let a=r[s],l=t[s];if(l===void 0)t[s]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(n,s))t[s]=n[s](l,a);else throw new Error("Config merge conflict for field "+s)}for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}class bu{eq(e){return this==e}range(e,n=e){return p2.create(e,n,this)}}bu.prototype.startSide=bu.prototype.endSide=0;bu.prototype.point=!1;bu.prototype.mapMode=es.TrackDel;let p2=class bU{constructor(e,n,t){this.from=e,this.to=n,this.value=t}static create(e,n,t){return new bU(e,n,t)}};function m2(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class OM{constructor(e,n,t,r){this.from=e,this.to=n,this.value=t,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,t,r=0){let s=t?this.to:this.from;for(let a=r,l=s.length;;){if(a==l)return a;let h=a+l>>1,u=s[h]-e||(t?this.value[h].endSide:this.value[h].startSide)-n;if(h==a)return u>=0?a:l;u>=0?l=h:a=h+1}}between(e,n,t,r){for(let s=this.findIndex(n,-1e9,!0),a=this.findIndex(t,1e9,!1,s);s<a;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let t=[],r=[],s=[],a=-1,l=-1;for(let h=0;h<this.value.length;h++){let u=this.value[h],f=this.from[h]+e,p=this.to[h]+e,g,v;if(f==p){let y=n.mapPos(f,u.startSide,u.mapMode);if(y==null||(g=v=y,u.startSide!=u.endSide&&(v=n.mapPos(f,u.endSide),v<g)))continue}else if(g=n.mapPos(f,u.startSide),v=n.mapPos(p,u.endSide),g>v||g==v&&u.startSide>0&&u.endSide<=0)continue;(v-g||u.endSide-u.startSide)<0||(a<0&&(a=g),u.point&&(l=Math.max(l,v-g)),t.push(u),r.push(g-a),s.push(v-a))}return{mapped:t.length?new OM(r,s,t,l):null,pos:a}}}class $n{constructor(e,n,t,r){this.chunkPos=e,this.chunk=n,this.nextLayer=t,this.maxPoint=r}static create(e,n,t,r){return new $n(e,n,t,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:t=!1,filterFrom:r=0,filterTo:s=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(t&&(n=n.slice().sort(m2)),this.isEmpty)return n.length?$n.of(n):this;let l=new OU(this,null,-1).goto(0),h=0,u=[],f=new zc;for(;l.value||h<n.length;)if(h<n.length&&(l.from-n[h].from||l.startSide-n[h].value.startSide)>=0){let p=n[h++];f.addInner(p.from,p.to,p.value)||u.push(p)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==n.length||this.chunkEnd(l.chunkIndex)<n[h].from)&&(!a||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||r>l.to||s<l.from||a(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||u.push(p2.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!u.length?$n.empty:this.nextLayer.update({add:u,filter:a,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],t=[],r=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],h=this.chunk[a],u=e.touchesRange(l,l+h.length);if(u===!1)r=Math.max(r,h.maxPoint),n.push(h),t.push(e.mapPos(l));else if(u===!0){let{mapped:f,pos:p}=h.map(l,e);f&&(r=Math.max(r,f.maxPoint),n.push(f),t.push(p))}}let s=this.nextLayer.map(e);return n.length==0?s:new $n(t,n,s||$n.empty,r)}between(e,n,t){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],a=this.chunk[r];if(n>=s&&e<=s+a.length&&a.between(s,e-s,n-s,t)===!1)return}this.nextLayer.between(e,n,t)}}iter(e=0){return e0.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return e0.from(e).goto(n)}static compare(e,n,t,r,s=-1){let a=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),l=n.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),h=s6(a,l,t),u=new Xm(a,h,s),f=new Xm(l,h,s);t.iterGaps((p,g,v)=>o6(u,p,f,g,v,r)),t.empty&&t.length==0&&o6(u,0,f,0,0,r)}static eq(e,n,t=0,r){r==null&&(r=999999999);let s=e.filter(f=>!f.isEmpty&&n.indexOf(f)<0),a=n.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let l=s6(s,a),h=new Xm(s,l,0).goto(t),u=new Xm(a,l,0).goto(t);for(;;){if(h.to!=u.to||!g2(h.active,u.active)||h.point&&(!u.point||!h.point.eq(u.point)))return!1;if(h.to>r)return!0;h.next(),u.next()}}static spans(e,n,t,r,s=-1){let a=new Xm(e,null,s).goto(n),l=n,h=a.openStart;for(;;){let u=Math.min(a.to,t);if(a.point){let f=a.activeForPoint(a.to),p=a.pointFrom<n?f.length+1:a.point.startSide<0?f.length:Math.min(f.length,h);r.point(l,u,a.point,f,p,a.pointRank),h=Math.min(a.openEnd(u),f.length)}else u>l&&(r.span(l,u,a.active,h),h=a.openEnd(u));if(a.to>t)return h+(a.point&&a.to>t?1:0);l=a.to,a.next()}}static of(e,n=!1){let t=new zc;for(let r of e instanceof p2?[e]:n?vOe(e):e)t.add(r.from,r.to,r.value);return t.finish()}static join(e){if(!e.length)return $n.empty;let n=e[e.length-1];for(let t=e.length-2;t>=0;t--)for(let r=e[t];r!=$n.empty;r=r.nextLayer)n=new $n(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}$n.empty=new $n([],[],null,-1);function vOe(i){if(i.length>1)for(let e=i[0],n=1;n<i.length;n++){let t=i[n];if(m2(e,t)>0)return i.slice().sort(m2);e=t}return i}$n.empty.nextLayer=$n.empty;class zc{finishChunk(e){this.chunks.push(new OM(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,t){this.addInner(e,n,t)||(this.nextLayer||(this.nextLayer=new zc)).add(e,n,t)}addInner(e,n,t){let r=e-this.lastTo||t.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||t.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=t,this.lastFrom=e,this.lastTo=n,this.value.push(t),t.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let t=n.value.length-1;return this.last=n.value[t],this.lastFrom=n.from[t]+e,this.lastTo=n.to[t]+e,!0}finish(){return this.finishInner($n.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=$n.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function s6(i,e,n){let t=new Map;for(let s of i)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&t.set(s.chunk[a],s.chunkPos[a]);let r=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let l=t.get(s.chunk[a]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[a]&&!(n!=null&&n.touchesRange(l,l+s.chunk[a].length))&&r.add(s.chunk[a])}return r}class OU{constructor(e,n,t,r=0){this.layer=e,this.skip=n,this.minPoint=t,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,t){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,t=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!t||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],t=e+n.from[this.rangeIndex];if(this.from=t,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class e0{constructor(e){this.heap=e}static from(e,n=null,t=-1){let r=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=t&&r.push(new OU(a,n,t,s));return r.length==1?r[0]:new e0(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let t of this.heap)t.goto(e,n);for(let t=this.heap.length>>1;t>=0;t--)fS(this.heap,t);return this.next(),this}forward(e,n){for(let t of this.heap)t.forward(e,n);for(let t=this.heap.length>>1;t>=0;t--)fS(this.heap,t);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),fS(this.heap,0)}}}function fS(i,e){for(let n=i[e];;){let t=(e<<1)+1;if(t>=i.length)break;let r=i[t];if(t+1<i.length&&r.compare(i[t+1])>=0&&(r=i[t+1],t++),n.compare(r)<0)break;i[t]=n,i[e]=r,e=t}}class Xm{constructor(e,n,t){this.minPoint=t,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=e0.from(e,n,t)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){o1(this.active,e),o1(this.activeTo,e),o1(this.activeRank,e),this.minActive=a6(this.active,this.activeTo)}addActive(e){let n=0,{value:t,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;a1(this.active,n,t),a1(this.activeTo,n,r),a1(this.activeRank,n,s),e&&a1(e,n,this.cursor.from),this.minActive=a6(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let t=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),t&&o1(t,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(t),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(t){this.openStart=0;for(let r=t.length-1;r>=0&&t[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let t=this.active.length-1;t>=0&&!(this.activeRank[t]<this.pointRank);t--)(this.activeTo[t]>e||this.activeTo[t]==e&&this.active[t].endSide>=this.point.endSide)&&n.push(this.active[t]);return n.reverse()}openEnd(e){let n=0;for(let t=this.activeTo.length-1;t>=0&&this.activeTo[t]>e;t--)n++;return n}}function o6(i,e,n,t,r,s){i.goto(e),n.goto(t);let a=t+r,l=t,h=t-e;for(;;){let u=i.to+h-n.to||i.endSide-n.endSide,f=u<0?i.to+h:n.to,p=Math.min(f,a);if(i.point||n.point?i.point&&n.point&&(i.point==n.point||i.point.eq(n.point))&&g2(i.activeForPoint(i.to),n.activeForPoint(n.to))||s.comparePoint(l,p,i.point,n.point):p>l&&!g2(i.active,n.active)&&s.compareRange(l,p,i.active,n.active),f>a)break;l=f,u<=0&&i.next(),u>=0&&n.next()}}function g2(i,e){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!=e[n]&&!i[n].eq(e[n]))return!1;return!0}function o1(i,e){for(let n=e,t=i.length-1;n<t;n++)i[n]=i[n+1];i.pop()}function a1(i,e,n){for(let t=i.length-1;t>=e;t--)i[t+1]=i[t];i[e]=n}function a6(i,e){let n=-1,t=1e9;for(let r=0;r<e.length;r++)(e[r]-t||i[r].endSide-i[n].endSide)<0&&(n=r,t=e[r]);return n}function Gf(i,e,n=i.length){let t=0;for(let r=0;r<n;)i.charCodeAt(r)==9?(t+=e-t%e,r++):(t++,r=wr(i,r));return t}function v2(i,e,n,t){for(let r=0,s=0;;){if(s>=e)return r;if(r==i.length)break;s+=i.charCodeAt(r)==9?n-s%n:1,r=wr(i,r)}return t===!0?-1:i.length}const y2="ͼ",l6=typeof Symbol>"u"?"__"+y2:Symbol.for(y2),b2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),c6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Fc{constructor(e,n){this.rules=[];let{finish:t}=n||{};function r(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,l,h,u){let f=[],p=/^@(\w+)\b/.exec(a[0]),g=p&&p[1]=="keyframes";if(p&&l==null)return h.push(a[0]+";");for(let v in l){let y=l[v];if(/&/.test(v))s(v.split(/,\s*/).map(w=>a.map(x=>w.replace(/&/,x))).reduce((w,x)=>w.concat(x)),y,h);else if(y&&typeof y=="object"){if(!p)throw new RangeError("The value of a property ("+v+") should be a primitive value.");s(r(v),y,f,g)}else y!=null&&f.push(v.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+y+";")}(f.length||g)&&h.push((t&&!p&&!u?a.map(t):a).join(", ")+" {"+f.join(" ")+"}")}for(let a in e)s(r(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=c6[l6]||1;return c6[l6]=e+1,y2+e.toString(36)}static mount(e,n,t){let r=e[b2],s=t&&t.nonce;r?s&&r.setNonce(s):r=new yOe(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let h6=new Map;class yOe{constructor(e,n){let t=e.ownerDocument||e,r=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=h6.get(t);if(s)return e[b2]=s;this.sheet=new r.CSSStyleSheet,h6.set(t,this)}else this.styleTag=t.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[b2]=this}mount(e,n){let t=this.sheet,r=0,s=0;for(let a=0;a<e.length;a++){let l=e[a],h=this.modules.indexOf(l);if(h<s&&h>-1&&(this.modules.splice(h,1),s--,h=-1),h==-1){if(this.modules.splice(s++,0,l),t)for(let u=0;u<l.rules.length;u++)t.insertRule(l.rules[u],r++)}else{for(;s<h;)r+=this.modules[s++].rules.length;r+=l.rules.length,s++}}if(t)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Xc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},t0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bOe=typeof navigator<"u"&&/Mac/.test(navigator.platform),OOe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var br=0;br<10;br++)Xc[48+br]=Xc[96+br]=String(br);for(var br=1;br<=24;br++)Xc[br+111]="F"+br;for(var br=65;br<=90;br++)Xc[br]=String.fromCharCode(br+32),t0[br]=String.fromCharCode(br);for(var pS in Xc)t0.hasOwnProperty(pS)||(t0[pS]=Xc[pS]);function xOe(i){var e=bOe&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||OOe&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",n=!e&&i.key||(i.shiftKey?t0:Xc)[i.keyCode]||i.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function n0(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function O2(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function wOe(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function G1(i,e){if(!e.anchorNode)return!1;try{return O2(i,e.anchorNode)}catch{return!1}}function i0(i){return i.nodeType==3?xu(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Og(i,e,n,t){return n?u6(i,e,n,t,-1)||u6(i,e,n,t,1):!1}function Ou(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function Ab(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function u6(i,e,n,t,r){for(;;){if(i==n&&e==t)return!0;if(e==(r<0?0:Cl(i))){if(i.nodeName=="DIV")return!1;let s=i.parentNode;if(!s||s.nodeType!=1)return!1;e=Ou(i)+(r<0?0:1),i=s}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?Cl(i):0}else return!1}}function Cl(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function cx(i,e){let n=e?i.left:i.right;return{left:n,right:n,top:i.top,bottom:i.bottom}}function _Oe(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function xU(i,e){let n=e.width/i.offsetWidth,t=e.height/i.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-i.offsetWidth)<1)&&(n=1),(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.height-i.offsetHeight)<1)&&(t=1),{scaleX:n,scaleY:t}}function SOe(i,e,n,t,r,s,a,l){let h=i.ownerDocument,u=h.defaultView||window;for(let f=i,p=!1;f&&!p;)if(f.nodeType==1){let g,v=f==h.body,y=1,w=1;if(v)g=_Oe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(p=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let _=f.getBoundingClientRect();({scaleX:y,scaleY:w}=xU(f,_)),g={left:_.left,right:_.left+f.clientWidth*y,top:_.top,bottom:_.top+f.clientHeight*w}}let x=0,S=0;if(r=="nearest")e.top<g.top?(S=-(g.top-e.top+a),n>0&&e.bottom>g.bottom+S&&(S=e.bottom-g.bottom+S+a)):e.bottom>g.bottom&&(S=e.bottom-g.bottom+a,n<0&&e.top-S<g.top&&(S=-(g.top+S-e.top+a)));else{let _=e.bottom-e.top,O=g.bottom-g.top;S=(r=="center"&&_<=O?e.top+_/2-O/2:r=="start"||r=="center"&&n<0?e.top-a:e.bottom-O+a)-g.top}if(t=="nearest"?e.left<g.left?(x=-(g.left-e.left+s),n>0&&e.right>g.right+x&&(x=e.right-g.right+x+s)):e.right>g.right&&(x=e.right-g.right+s,n<0&&e.left<g.left+x&&(x=-(g.left+x-e.left+s))):x=(t=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:t=="start"==l?e.left-s:e.right-(g.right-g.left)+s)-g.left,x||S)if(v)u.scrollBy(x,S);else{let _=0,O=0;if(S){let k=f.scrollTop;f.scrollTop+=S/w,O=(f.scrollTop-k)*w}if(x){let k=f.scrollLeft;f.scrollLeft+=x/y,_=(f.scrollLeft-k)*y}e={left:e.left-_,top:e.top-O,right:e.right-_,bottom:e.bottom-O},_&&Math.abs(_-x)<1&&(t="nearest"),O&&Math.abs(O-S)<1&&(r="nearest")}if(v)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function COe(i){let e=i.ownerDocument,n,t;for(let r=i.parentNode;r&&!(r==e.body||n&&t);)if(r.nodeType==1)!t&&r.scrollHeight>r.clientHeight&&(t=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:t}}class kOe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:t}=e;this.set(n,Math.min(e.anchorOffset,n?Cl(n):0),t,Math.min(e.focusOffset,t?Cl(t):0))}set(e,n,t,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=t,this.focusOffset=r}}let kd=null;function wU(i){if(i.setActive)return i.setActive();if(kd)return i.focus(kd);let e=[];for(let n=i;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(i.focus(kd==null?{get preventScroll(){return kd={preventScroll:!0},!0}}:void 0),!kd){kd=!1;for(let n=0;n<e.length;){let t=e[n++],r=e[n++],s=e[n++];t.scrollTop!=r&&(t.scrollTop=r),t.scrollLeft!=s&&(t.scrollLeft=s)}}}let d6;function xu(i,e,n=e){let t=d6||(d6=document.createRange());return t.setEnd(i,n),t.setStart(i,e),t}function tf(i,e,n,t){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};t&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=t);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,i.dispatchEvent(s);let a=new KeyboardEvent("keyup",r);return a.synthetic=!0,i.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function TOe(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function _U(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function MOe(i,e){let n=e.focusNode,t=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=t)return!1;for(t=Math.min(t,Cl(n));;)if(t){if(n.nodeType!=1)return!1;let r=n.childNodes[t-1];r.contentEditable=="false"?t--:(n=r,t=Cl(n))}else{if(n==i)return!0;t=Ou(n),n=n.parentNode}}function SU(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function CU(i,e){for(let n=i,t=e;;){if(n.nodeType==3&&t>0)return{node:n,offset:t};if(n.nodeType==1&&t>0){if(n.contentEditable=="false")return null;n=n.childNodes[t-1],t=Cl(n)}else if(n.parentNode&&!Ab(n))t=Ou(n),n=n.parentNode;else return null}}function kU(i,e){for(let n=i,t=e;;){if(n.nodeType==3&&t<n.nodeValue.length)return{node:n,offset:t};if(n.nodeType==1&&t<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[t],t=0}else if(n.parentNode&&!Ab(n))t=Ou(n)+1,n=n.parentNode;else return null}}class $r{constructor(e,n,t=!0){this.node=e,this.offset=n,this.precise=t}static before(e,n){return new $r(e.parentNode,Ou(e),n)}static after(e,n){return new $r(e.parentNode,Ou(e)+1,n)}}const xM=[];class ii{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let t of this.children){if(t==e)return n;n+=t.length+t.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let t=this.dom,r=null,s;for(let a of this.children){if(a.flags&7){if(!a.dom&&(s=r?r.nextSibling:t.firstChild)){let l=ii.get(s);(!l||!l.parent&&l.canReuseDOM(a))&&a.reuseDOM(s)}a.sync(e,n),a.flags&=-8}if(s=r?r.nextSibling:t.firstChild,n&&!n.written&&n.node==t&&s!=a.dom&&(n.written=!0),a.dom.parentNode==t)for(;s&&s!=a.dom;)s=f6(s);else t.insertBefore(a.dom,s);r=a.dom}for(s=r?r.nextSibling:t.firstChild,s&&n&&n.node==t&&(n.written=!0);s;)s=f6(s)}else if(this.flags&1)for(let t of this.children)t.flags&7&&(t.sync(e,n),t.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let t;if(e==this.dom)t=this.dom.childNodes[n];else{let r=Cl(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?t=e:t=e.nextSibling}if(t==this.dom.firstChild)return 0;for(;t&&!ii.get(t);)t=t.nextSibling;if(!t)return this.length;for(let r=0,s=0;;r++){let a=this.children[r];if(a.dom==t)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,n,t=0){let r=-1,s=-1,a=-1,l=-1;for(let h=0,u=t,f=t;h<this.children.length;h++){let p=this.children[h],g=u+p.length;if(u<e&&g>n)return p.domBoundsAround(e,n,u);if(g>=e&&r==-1&&(r=h,s=u),u>n&&p.dom.parentNode==this.dom){a=h,l=f;break}f=g,u=g+p.breakAfter}return{from:s,to:l<0?t+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,t=xM){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&t.indexOf(s)<0&&s.destroy()}this.children.splice(e,n-e,...t);for(let r=0;r<t.length;r++)t[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new TU(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,t,r,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ii.prototype.breakAfter=0;function f6(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class TU{constructor(e,n,t){this.children=e,this.pos=n,this.i=t,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let t=this.children[--this.i];this.pos-=t.length+t.breakAfter}}}function MU(i,e,n,t,r,s,a,l,h){let{children:u}=i,f=u.length?u[e]:null,p=s.length?s[s.length-1]:null,g=p?p.breakAfter:a;if(!(e==t&&f&&!a&&!g&&s.length<2&&f.merge(n,r,s.length?p:null,n==0,l,h))){if(t<u.length){let v=u[t];v&&(r<v.length||v.breakAfter&&(p!=null&&p.breakAfter))?(e==t&&(v=v.split(r),r=0),!g&&p&&v.merge(0,r,p,!0,0,h)?s[s.length-1]=v:((r||v.children.length&&!v.children[0].length)&&v.merge(0,r,null,!1,0,h),s.push(v))):v!=null&&v.breakAfter&&(p?p.breakAfter=1:a=1),t++}for(f&&(f.breakAfter=a,n>0&&(!a&&s.length&&f.merge(n,f.length,s[0],!1,l,0)?f.breakAfter=s.shift().breakAfter:(n<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(n,f.length,null,!1,l,0),e++));e<t&&s.length;)if(u[t-1].become(s[s.length-1]))t--,s.pop(),h=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:h;else break;!s.length&&e&&t<u.length&&!u[e-1].breakAfter&&u[t].merge(0,0,u[e-1],!1,l,h)&&e--,(e<t||s.length)&&i.replaceChildren(e,t,s)}}function EU(i,e,n,t,r,s){let a=i.childCursor(),{i:l,off:h}=a.findPos(n,1),{i:u,off:f}=a.findPos(e,-1),p=e-n;for(let g of t)p+=g.length;i.length+=p,MU(i,u,f,l,h,t,0,r,s)}let Os=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},x2=typeof document<"u"?document:{documentElement:{style:{}}};const w2=/Edge\/(\d+)/.exec(Os.userAgent),PU=/MSIE \d/.test(Os.userAgent),_2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Os.userAgent),hx=!!(PU||_2||w2),p6=!hx&&/gecko\/(\d+)/i.test(Os.userAgent),mS=!hx&&/Chrome\/(\d+)/.exec(Os.userAgent),m6="webkitFontSmoothing"in x2.documentElement.style,AU=!hx&&/Apple Computer/.test(Os.vendor),g6=AU&&(/Mobile\/\w+/.test(Os.userAgent)||Os.maxTouchPoints>2);var St={mac:g6||/Mac/.test(Os.platform),windows:/Win/.test(Os.platform),linux:/Linux|X11/.test(Os.platform),ie:hx,ie_version:PU?x2.documentMode||6:_2?+_2[1]:w2?+w2[1]:0,gecko:p6,gecko_version:p6?+(/Firefox\/(\d+)/.exec(Os.userAgent)||[0,0])[1]:0,chrome:!!mS,chrome_version:mS?+mS[1]:0,ios:g6,android:/Android\b/.test(Os.userAgent),webkit:m6,safari:AU,webkit_version:m6?+(/\bAppleWebKit\/(\d+)/.exec(Os.userAgent)||[0,0])[1]:0,tabSize:x2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const EOe=256;class Zo extends ii{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,t){return this.flags&8||t&&(!(t instanceof Zo)||this.length-(n-e)+t.length>EOe||t.flags&8)?!1:(this.text=this.text.slice(0,e)+(t?t.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Zo(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new $r(this.dom,e)}domBoundsAround(e,n,t){return{from:t,to:t+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return POe(this.dom,e,n)}}class kl extends ii{constructor(e,n=[],t=0){super(),this.mark=e,this.children=n,this.length=t;for(let r of n)r.setParent(this)}setAttrs(e){if(_U(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,t,r,s,a){return t&&(!(t instanceof kl&&t.mark.eq(this.mark))||e&&s<=0||n<this.length&&a<=0)?!1:(EU(this,e,n,t?t.children.slice():[],s-1,a-1),this.markDirty(),!0)}split(e){let n=[],t=0,r=-1,s=0;for(let l of this.children){let h=t+l.length;h>e&&n.push(t<e?l.split(e-t):l),r<0&&t>=e&&(r=s),t=h,s++}let a=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new kl(this.mark,n,a)}domAtPos(e){return RU(this,e)}coordsAt(e,n){return DU(this,e,n)}}function POe(i,e,n){let t=i.nodeValue.length;e>t&&(e=t);let r=e,s=e,a=0;e==0&&n<0||e==t&&n>=0?St.chrome||St.gecko||(e?(r--,a=1):s<t&&(s++,a=-1)):n<0?r--:s<t&&s++;let l=xu(i,r,s).getClientRects();if(!l.length)return null;let h=l[(a?a<0:n>=0)?0:l.length-1];return St.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(l,u=>u.width)||h),a?cx(h,a<0):h||null}class kc extends ii{static create(e,n,t){return new kc(e,n,t)}constructor(e,n,t){super(),this.widget=e,this.length=n,this.side=t,this.prevWidget=null}split(e){let n=kc.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,t,r,s,a){return t&&(!(t instanceof kc)||!this.widget.compare(t.widget)||e>0&&s<=0||n<this.length&&a<=0)?!1:(this.length=e+(t?t.length:0)+(this.length-n),!0)}become(e){return e instanceof kc&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Bn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,t=n&&n.state.doc,r=this.posAtStart;return t?t.slice(r,r+this.length):Bn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?$r.before(this.dom):$r.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let t=this.widget.coordsAt(this.dom,e,n);if(t)return t;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let a=this.side?this.side<0:e>0;for(let l=a?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=a?-1:1);return cx(s,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ef extends ii{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ef&&e.side==this.side}split(){return new Ef(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?$r.before(this.dom):$r.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Bn.empty}get isHidden(){return!0}}Zo.prototype.children=kc.prototype.children=Ef.prototype.children=xM;function RU(i,e){let n=i.dom,{children:t}=i,r=0;for(let s=0;r<t.length;r++){let a=t[r],l=s+a.length;if(!(l==s&&a.getSide()<=0)){if(e>s&&e<l&&a.dom.parentNode==n)return a.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let a=t[s-1];if(a.dom.parentNode==n)return a.domAtPos(a.length)}for(let s=r;s<t.length;s++){let a=t[s];if(a.dom.parentNode==n)return a.domAtPos(0)}return new $r(n,0)}function IU(i,e,n){let t,{children:r}=i;n>0&&e instanceof kl&&r.length&&(t=r[r.length-1])instanceof kl&&t.mark.eq(e.mark)?IU(t,e.children[0],n-1):(r.push(e),e.setParent(i)),i.length+=e.length}function DU(i,e,n){let t=null,r=-1,s=null,a=-1;function l(u,f){for(let p=0,g=0;p<u.children.length&&g<=f;p++){let v=u.children[p],y=g+v.length;y>=f&&(v.children.length?l(v,f-g):(!s||s.isHidden&&n>0)&&(y>f||g==y&&v.getSide()>0)?(s=v,a=f-g):(g<f||g==y&&v.getSide()<0&&!v.isHidden)&&(t=v,r=f-g)),g=y}}l(i,e);let h=(n<0?t:s)||t||s;return h?h.coordsAt(Math.max(0,h==t?r:a),n):AOe(i)}function AOe(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let n=i0(e);return n[n.length-1]||null}function S2(i,e){for(let n in i)n=="class"&&e.class?e.class+=" "+i.class:n=="style"&&e.style?e.style+=";"+i.style:e[n]=i[n];return e}const v6=Object.create(null);function Rb(i,e,n){if(i==e)return!0;i||(i=v6),e||(e=v6);let t=Object.keys(i),r=Object.keys(e);if(t.length-(n&&t.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of t)if(s!=n&&(r.indexOf(s)==-1||i[s]!==e[s]))return!1;return!0}function C2(i,e,n){let t=!1;if(e)for(let r in e)n&&r in n||(t=!0,r=="style"?i.style.cssText="":i.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(t=!0,r=="style"?i.style.cssText=n[r]:i.setAttribute(r,n[r]));return t}function ROe(i){let e=Object.create(null);for(let n=0;n<i.attributes.length;n++){let t=i.attributes[n];e[t.name]=t.value}return e}class th{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,t){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var rs=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(rs||(rs={}));class Yt extends bu{constructor(e,n,t,r){super(),this.startSide=e,this.endSide=n,this.widget=t,this.spec=r}get heightRelevant(){return!1}static mark(e){return new X0(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),t=!!e.block;return n+=t&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Wc(e,n,n,t,e.widget||null,!1)}static replace(e){let n=!!e.block,t,r;if(e.isBlockGap)t=-5e8,r=4e8;else{let{start:s,end:a}=NU(e,n);t=(s?n?-3e8:-1:5e8)-1,r=(a?n?2e8:1:-6e8)+1}return new Wc(e,t,r,n,e.widget||null,!0)}static line(e){return new W0(e)}static set(e,n=!1){return $n.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Yt.none=$n.empty;class X0 extends Yt{constructor(e){let{start:n,end:t}=NU(e);super(n?-1:5e8,t?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,t;return this==e||e instanceof X0&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((t=e.attrs)===null||t===void 0?void 0:t.class))&&Rb(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}X0.prototype.point=!1;class W0 extends Yt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof W0&&this.spec.class==e.spec.class&&Rb(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}W0.prototype.mapMode=es.TrackBefore;W0.prototype.point=!0;class Wc extends Yt{constructor(e,n,t,r,s,a){super(n,t,s,e),this.block=r,this.isReplace=a,this.mapMode=r?n<=0?es.TrackBefore:es.TrackAfter:es.TrackDel}get type(){return this.startSide!=this.endSide?rs.WidgetRange:this.startSide<=0?rs.WidgetBefore:rs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Wc&&IOe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Wc.prototype.point=!0;function NU(i,e=!1){let{inclusiveStart:n,inclusiveEnd:t}=i;return n==null&&(n=i.inclusive),t==null&&(t=i.inclusive),{start:n??e,end:t??e}}function IOe(i,e){return i==e||!!(i&&e&&i.compare(e))}function k2(i,e,n,t=0){let r=n.length-1;r>=0&&n[r]+t>=i?n[r]=Math.max(n[r],e):n.push(i,e)}class Fi extends ii{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,t,r,s,a){if(t){if(!(t instanceof Fi))return!1;this.dom||t.transferDOM(this)}return r&&this.setDeco(t?t.attrs:null),EU(this,e,n,t?t.children.slice():[],s,a),!0}split(e){let n=new Fi;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:t,off:r}=this.childPos(e);r&&(n.append(this.children[t].split(r),0),this.children[t].merge(r,this.children[t].length,null,!1,0,0),t++);for(let s=t;s<this.children.length;s++)n.append(this.children[s],0);for(;t>0&&this.children[t-1].length==0;)this.children[--t].destroy();return this.children.length=t,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Rb(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){IU(this,e,n)}addLineDeco(e){let n=e.spec.attributes,t=e.spec.class;n&&(this.attrs=S2(n,this.attrs||{})),t&&(this.attrs=S2({class:t},this.attrs||{}))}domAtPos(e){return RU(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var t;this.dom?this.flags&4&&(_U(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(C2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&ii.get(r)instanceof kl;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((t=ii.get(r))===null||t===void 0?void 0:t.isEditable)==!1&&(!St.ios||!this.children.some(s=>s instanceof Zo))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let t of this.children){if(!(t instanceof Zo)||/[^ -~]/.test(t.text))return null;let r=i0(t.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let t=DU(this,e,n);if(!this.children.length&&t&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=t.bottom-t.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let a=(s-r.textHeight)/2;return{top:t.top+a,bottom:t.bottom-a,left:t.left,right:t.left}}}return t}become(e){return e instanceof Fi&&this.children.length==0&&e.children.length==0&&Rb(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let t=0,r=0;t<e.children.length;t++){let s=e.children[t],a=r+s.length;if(a>=n){if(s instanceof Fi)return s;if(a>n)break}r=a+s.breakAfter}return null}}class gl extends ii{constructor(e,n,t){super(),this.widget=e,this.length=n,this.deco=t,this.breakAfter=0,this.prevWidget=null}merge(e,n,t,r,s,a){return t&&(!(t instanceof gl)||!this.widget.compare(t.widget)||e>0&&s<=0||n<this.length&&a<=0)?!1:(this.length=e+(t?t.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?$r.before(this.dom):$r.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let t=new gl(this.widget,n,this.deco);return t.breakAfter=this.breakAfter,t}get children(){return xM}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Bn.empty}domBoundsAround(){return null}become(e){return e instanceof gl&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let t=this.widget.coordsAt(this.dom,e,n);return t||(this.widget instanceof T2?null:cx(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:t}=this.deco;return n==t?!1:e<0?n<0:t>0}}class T2 extends th{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class xg{constructor(e,n,t,r){this.doc=e,this.pos=n,this.end=t,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof gl&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Fi),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(l1(new Ef(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof gl)&&this.getLine()}buildText(e,n,t){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-t)),this.getLine().append(l1(new Zo(this.text.slice(this.textOff,this.textOff+r)),n),t),this.atCursorPos=!0,this.textOff+=r,e-=r,t=0}}span(e,n,t,r){this.buildText(n-e,t,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,t,r,s,a){if(this.disallowBlockEffectsFor[a]&&t instanceof Wc){if(t.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(t instanceof Wc)if(t.block)t.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new gl(t.widget||Pf.block,l,t));else{let h=kc.create(t.widget||Pf.inline,l,l?0:t.startSide),u=this.atCursorPos&&!h.isEditable&&s<=r.length&&(e<n||t.startSide>0),f=!h.isEditable&&(e<n||s>r.length||t.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!u&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(p.append(l1(new Ef(1),r),s),s=r.length+Math.max(0,s-r.length)),p.append(l1(h,r),s),this.atCursorPos=f,this.pendingBuffer=f?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(t);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,t,r,s){let a=new xg(e,n,t,s);return a.openEnd=$n.spans(r,n,t,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function l1(i,e){for(let n of e)i=new kl(n,[i],i.length);return i}class Pf extends th{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Pf.inline=new Pf("span");Pf.block=new Pf("div");var gi=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(gi||(gi={}));const wu=gi.LTR,wM=gi.RTL;function $U(i){let e=[];for(let n=0;n<i.length;n++)e.push(1<<+i[n]);return e}const DOe=$U("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),NOe=$U("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),M2=Object.create(null),ca=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),n=i.charCodeAt(1);M2[e]=n,M2[n]=-e}function VU(i){return i<=247?DOe[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?NOe[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}const $Oe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Tc{get dir(){return this.level%2?wM:wu}constructor(e,n,t){this.from=e,this.to=n,this.level=t}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,t,r){let s=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=n&&l.to>=n){if(l.level==t)return a;(s<0||(r!=0?r<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function LU(i,e){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++){let t=i[n],r=e[n];if(t.from!=r.from||t.to!=r.to||t.direction!=r.direction||!LU(t.inner,r.inner))return!1}return!0}const ni=[];function VOe(i,e,n,t,r){for(let s=0;s<=t.length;s++){let a=s?t[s-1].to:e,l=s<t.length?t[s].from:n,h=s?256:r;for(let u=a,f=h,p=h;u<l;u++){let g=VU(i.charCodeAt(u));g==512?g=f:g==8&&p==4&&(g=16),ni[u]=g==4?2:g,g&7&&(p=g),f=g}for(let u=a,f=h,p=h;u<l;u++){let g=ni[u];if(g==128)u<l-1&&f==ni[u+1]&&f&24?g=ni[u]=f:ni[u]=256;else if(g==64){let v=u+1;for(;v<l&&ni[v]==64;)v++;let y=u&&f==8||v<n&&ni[v]==8?p==1?1:8:256;for(let w=u;w<v;w++)ni[w]=y;u=v-1}else g==8&&p==1&&(ni[u]=1);f=g,g&7&&(p=g)}}}function LOe(i,e,n,t,r){let s=r==1?2:1;for(let a=0,l=0,h=0;a<=t.length;a++){let u=a?t[a-1].to:e,f=a<t.length?t[a].from:n;for(let p=u,g,v,y;p<f;p++)if(v=M2[g=i.charCodeAt(p)])if(v<0){for(let w=l-3;w>=0;w-=3)if(ca[w+1]==-v){let x=ca[w+2],S=x&2?r:x&4?x&1?s:r:0;S&&(ni[p]=ni[ca[w]]=S),l=w;break}}else{if(ca.length==189)break;ca[l++]=p,ca[l++]=g,ca[l++]=h}else if((y=ni[p])==2||y==1){let w=y==r;h=w?0:1;for(let x=l-3;x>=0;x-=3){let S=ca[x+2];if(S&2)break;if(w)ca[x+2]|=2;else{if(S&4)break;ca[x+2]|=4}}}}}function BOe(i,e,n,t){for(let r=0,s=t;r<=n.length;r++){let a=r?n[r-1].to:i,l=r<n.length?n[r].from:e;for(let h=a;h<l;){let u=ni[h];if(u==256){let f=h+1;for(;;)if(f==l){if(r==n.length)break;f=n[r++].to,l=r<n.length?n[r].from:e}else if(ni[f]==256)f++;else break;let p=s==1,g=(f<e?ni[f]:t)==1,v=p==g?p?1:2:t;for(let y=f,w=r,x=w?n[w-1].to:i;y>h;)y==x&&(y=n[--w].from,x=w?n[w-1].to:i),ni[--y]=v;h=f}else s=u,h++}}}function E2(i,e,n,t,r,s,a){let l=t%2?2:1;if(t%2==r%2)for(let h=e,u=0;h<n;){let f=!0,p=!1;if(u==s.length||h<s[u].from){let w=ni[h];w!=l&&(f=!1,p=w==16)}let g=!f&&l==1?[]:null,v=f?t:t+1,y=h;e:for(;;)if(u<s.length&&y==s[u].from){if(p)break e;let w=s[u];if(!f)for(let x=w.to,S=u+1;;){if(x==n)break e;if(S<s.length&&s[S].from==x)x=s[S++].to;else{if(ni[x]==l)break e;break}}if(u++,g)g.push(w);else{w.from>h&&a.push(new Tc(h,w.from,v));let x=w.direction==wu!=!(v%2);P2(i,x?t+1:t,r,w.inner,w.from,w.to,a),h=w.to}y=w.to}else{if(y==n||(f?ni[y]!=l:ni[y]==l))break;y++}g?E2(i,h,y,t+1,r,g,a):h<y&&a.push(new Tc(h,y,v)),h=y}else for(let h=n,u=s.length;h>e;){let f=!0,p=!1;if(!u||h>s[u-1].to){let w=ni[h-1];w!=l&&(f=!1,p=w==16)}let g=!f&&l==1?[]:null,v=f?t:t+1,y=h;e:for(;;)if(u&&y==s[u-1].to){if(p)break e;let w=s[--u];if(!f)for(let x=w.from,S=u;;){if(x==e)break e;if(S&&s[S-1].to==x)x=s[--S].from;else{if(ni[x-1]==l)break e;break}}if(g)g.push(w);else{w.to<h&&a.push(new Tc(w.to,h,v));let x=w.direction==wu!=!(v%2);P2(i,x?t+1:t,r,w.inner,w.from,w.to,a),h=w.from}y=w.from}else{if(y==e||(f?ni[y-1]!=l:ni[y-1]==l))break;y--}g?E2(i,y,h,t+1,r,g,a):y<h&&a.push(new Tc(y,h,v)),h=y}}function P2(i,e,n,t,r,s,a){let l=e%2?2:1;VOe(i,r,s,t,l),LOe(i,r,s,t,l),BOe(r,s,t,l),E2(i,r,s,e,n,t,a)}function UOe(i,e,n){if(!i)return[new Tc(0,0,e==wM?1:0)];if(e==wu&&!n.length&&!$Oe.test(i))return BU(i.length);if(n.length)for(;i.length>ni.length;)ni[ni.length]=256;let t=[],r=e==wu?0:1;return P2(i,r,r,n,0,i.length,t),t}function BU(i){return[new Tc(0,i,0)]}let UU="";function zOe(i,e,n,t,r){var s;let a=t.head-i.from,l=Tc.find(e,a,(s=t.bidiLevel)!==null&&s!==void 0?s:-1,t.assoc),h=e[l],u=h.side(r,n);if(a==u){let g=l+=r?1:-1;if(g<0||g>=e.length)return null;h=e[l=g],a=h.side(!r,n),u=h.side(r,n)}let f=wr(i.text,a,h.forward(r,n));(f<h.from||f>h.to)&&(f=u),UU=i.text.slice(Math.min(a,f),Math.max(a,f));let p=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return p&&f==u&&p.level+(r?0:1)<h.level?Ze.cursor(p.side(!r,n)+i.from,p.forward(r,n)?1:-1,p.level):Ze.cursor(f+i.from,h.forward(r,n)?-1:1,h.level)}function FOe(i,e,n){for(let t=e;t<n;t++){let r=VU(i.charCodeAt(t));if(r==1)return wu;if(r==2||r==4)return wM}return wu}const zU=wt.define(),FU=wt.define(),XU=wt.define(),WU=wt.define(),A2=wt.define(),QU=wt.define(),HU=wt.define(),_M=wt.define(),SM=wt.define(),GU=wt.define({combine:i=>i.some(e=>e)}),YU=wt.define({combine:i=>i.some(e=>e)}),jU=wt.define();class nf{constructor(e,n="nearest",t="nearest",r=5,s=5,a=!1){this.range=e,this.y=n,this.x=t,this.yMargin=r,this.xMargin=s,this.isSnapshot=a}map(e){return e.empty?this:new nf(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new nf(Ze.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const c1=gn.define({map:(i,e)=>i.map(e)}),qU=gn.define();function Ms(i,e,n){let t=i.facet(WU);t.length?t[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const wc=wt.define({combine:i=>i.length?i[0]:!0});let XOe=0;const eg=wt.define();class Gi{constructor(e,n,t,r,s){this.id=e,this.create=n,this.domEventHandlers=t,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:t,eventObservers:r,provide:s,decorations:a}=n||{};return new Gi(XOe++,e,t,r,l=>{let h=[eg.of(l)];return a&&h.push(r0.of(u=>{let f=u.plugin(l);return f?a(f):Yt.none})),s&&h.push(s(l)),h})}static fromClass(e,n){return Gi.define(t=>new e(t),n)}}class gS{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(t){if(Ms(n.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Ms(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(t){Ms(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ZU=wt.define(),CM=wt.define(),r0=wt.define(),KU=wt.define(),kM=wt.define(),JU=wt.define();function y6(i,e){let n=i.state.facet(JU);if(!n.length)return n;let t=n.map(s=>s instanceof Function?s(i):s),r=[];return $n.spans(t,e.from,e.to,{point(){},span(s,a,l,h){let u=s-e.from,f=a-e.from,p=r;for(let g=l.length-1;g>=0;g--,h--){let v=l[g].spec.bidiIsolate,y;if(v==null&&(v=FOe(e.text,u,f)),h>0&&p.length&&(y=p[p.length-1]).to==u&&y.direction==v)y.to=f,p=y.inner;else{let w={from:u,to:f,direction:v,inner:[]};p.push(w),p=w.inner}}}}),r}const e9=wt.define();function t9(i){let e=0,n=0,t=0,r=0;for(let s of i.state.facet(e9)){let a=s(i);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(t=Math.max(t,a.top)),a.bottom!=null&&(r=Math.max(r,a.bottom)))}return{left:e,right:n,top:t,bottom:r}}const tg=wt.define();class _o{constructor(e,n,t,r){this.fromA=e,this.toA=n,this.fromB=t,this.toB=r}join(e){return new _o(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,t=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>t.toA)){if(r.toA<t.fromA)break;t=t.join(r),e.splice(n-1,1)}}return e.splice(n,0,t),e}static extendWithRanges(e,n){if(n.length==0)return e;let t=[];for(let r=0,s=0,a=0,l=0;;r++){let h=r==e.length?null:e[r],u=a-l,f=h?h.fromB:1e9;for(;s<n.length&&n[s]<f;){let p=n[s],g=n[s+1],v=Math.max(l,p),y=Math.min(f,g);if(v<=y&&new _o(v+u,y+u,v,y).addToSet(t),g>f)break;s+=2}if(!h)return t;new _o(h.fromA,h.toA,h.fromB,h.toB).addToSet(t),a=h.toA,l=h.toB}}}class Ib{constructor(e,n,t){this.view=e,this.state=n,this.transactions=t,this.flags=0,this.startState=e.state,this.changes=Ki.empty(this.startState.doc.length);for(let s of t)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,a,l,h)=>r.push(new _o(s,a,l,h))),this.changedRanges=r}static create(e,n,t){return new Ib(e,n,t)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class b6 extends ii{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Yt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Fi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new _o(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:u,toA:f})=>f<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!qOe(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?QOe(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:f}=this.hasComposition;t=new _o(u,f,e.changes.mapPos(u,-1),e.changes.mapPos(f,1)).addToSet(t.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(St.ie||St.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,l=this.updateDeco(),h=YOe(a,l,e.changes);return t=_o.extendWithRanges(t,h),!(this.flags&7)&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=St.chrome||St.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||r.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof gl&&a.widget instanceof T2&&s.push(a.dom);r.updateGaps(s)}updateChildren(e,n,t){let r=t?t.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let a=r.length-1;;a--){let l=a>=0?r[a]:null;if(!l)break;let{fromA:h,toA:u,fromB:f,toB:p}=l,g,v,y,w;if(t&&t.range.fromB<p&&t.range.toB>f){let k=xg.build(this.view.state.doc,f,t.range.fromB,this.decorations,this.dynamicDecorationMap),M=xg.build(this.view.state.doc,t.range.toB,p,this.decorations,this.dynamicDecorationMap);v=k.breakAtStart,y=k.openStart,w=M.openEnd;let P=this.compositionView(t);M.breakAtStart?P.breakAfter=1:M.content.length&&P.merge(P.length,P.length,M.content[0],!1,M.openStart,0)&&(P.breakAfter=M.content[0].breakAfter,M.content.shift()),k.content.length&&P.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),g=k.content.concat(P).concat(M.content)}else({content:g,breakAtStart:v,openStart:y,openEnd:w}=xg.build(this.view.state.doc,f,p,this.decorations,this.dynamicDecorationMap));let{i:x,off:S}=s.findPos(u,1),{i:_,off:O}=s.findPos(h,-1);MU(this,_,O,x,S,g,v,y,w)}t&&this.fixCompositionDOM(t)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let t of n.effects)t.is(qU)&&(this.editContextFormatting=t.value)}compositionView(e){let n=new Zo(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new kl(r,[n],n.length);let t=new Fi;return t.append(n,0),t}fixCompositionDOM(e){let n=(s,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let l=ii.get(s);l&&l!=a&&(l.dom=null),a.setDOM(s)},t=this.childPos(e.range.fromB,1),r=this.children[t.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)t=r.childPos(t.off,1),r=r.children[t.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let t=this.view.root.activeElement,r=t==this.dom,s=!r&&G1(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t));if(!(r||n||s))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?h:this.moveToLine(this.domAtPos(l.head));if(St.gecko&&l.empty&&!this.hasComposition&&WOe(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=u=new $r(p,0),a=!0}let f=this.view.observer.selectionRange;(a||!f.focusNode||(!Og(h.node,h.offset,f.anchorNode,f.anchorOffset)||!Og(u.node,u.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,l))&&(this.view.observer.ignore(()=>{St.android&&St.chrome&&this.dom.contains(f.focusNode)&&jOe(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=n0(this.view.root);if(p)if(l.empty){if(St.gecko){let g=HOe(h.node,h.offset);if(g&&g!=3){let v=(g==1?CU:kU)(h.node,h.offset);v&&(h=new $r(v.node,v.offset))}}p.collapse(h.node,h.offset),l.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=l.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(u.node,u.offset)}catch{}}else{let g=document.createRange();l.anchor>l.head&&([h,u]=[u,h]),g.setEnd(u.node,u.offset),g.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(g)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),t&&t.focus())}),this.view.observer.setSelectionRange(h,u)),this.impreciseAnchor=h.precise?null:new $r(f.anchorNode,f.anchorOffset),this.impreciseHead=u.precise?null:new $r(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Og(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,t=n0(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!t||!n.empty||!n.assoc||!t.modify)return;let a=Fi.find(this,n.head);if(!a)return;let l=a.posAtStart;if(n.head==l||n.head==l+a.length)return;let h=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!h||!u||h.bottom>u.top)return;let f=this.domAtPos(n.head+n.assoc);t.collapse(f.node,f.offset),t.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=n.from&&t.collapse(r,s)}moveToLine(e){let n=this.dom,t;if(e.node!=n)return e;for(let r=e.offset;!t&&r<n.childNodes.length;r++){let s=ii.get(n.childNodes[r]);s instanceof Fi&&(t=s.domAtPos(0))}for(let r=e.offset-1;!t&&r>=0;r--){let s=ii.get(n.childNodes[r]);s instanceof Fi&&(t=s.domAtPos(s.length))}return t?new $r(t.node,t.offset,!0):e}nearest(e){for(let n=e;n;){let t=ii.get(n);if(t&&t.rootView==this)return t;n=n.parentNode}return null}posFromDOM(e,n){let t=this.nearest(e);if(!t)throw new RangeError("Trying to find position for a DOM position outside of the document");return t.localPosFromDOM(e,n)+t.posAtStart}domAtPos(e){let{i:n,off:t}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(t<r.length||r instanceof Fi)break;n++,t=0}return this.children[n].domAtPos(t)}coordsAt(e,n){let t=null,r=0;for(let s=this.length,a=this.children.length-1;a>=0;a--){let l=this.children[a],h=s-l.breakAfter,u=h-l.length;if(h<e)break;if(u<=e&&(u<e||l.covers(-1))&&(h>e||l.covers(1))&&(!t||l instanceof Fi&&!(t instanceof Fi&&n>=0)))t=l,r=u;else if(t&&u==e&&h==e&&l instanceof gl&&Math.abs(n)<2){if(l.deco.startSide<0)break;a&&(t=null)}s=u}return t?t.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:t}=this.childPos(e,1),r=this.children[n];if(!(r instanceof Fi))return null;for(;r.children.length;){let{i:l,off:h}=r.childPos(t,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}t=h}if(!(r instanceof Zo))return null;let s=wr(r.text,t);if(s==t)return null;let a=xu(r.dom,t,s).getClientRects();for(let l=0;l<a.length;l++){let h=a[l];if(l==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let n=[],{from:t,to:r}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==gi.LTR;for(let u=0,f=0;f<this.children.length;f++){let p=this.children[f],g=u+p.length;if(g>r)break;if(u>=t){let v=p.dom.getBoundingClientRect();if(n.push(v.height),a){let y=p.dom.lastChild,w=y?i0(y):[];if(w.length){let x=w[w.length-1],S=h?x.right-v.left:v.right-x.left;S>l&&(l=S,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=g)}}}u=g+p.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?gi.RTL:gi.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Fi){let a=s.measureTextSize();if(a)return a}let e=document.createElement("div"),n,t,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=i0(e.firstChild)[0];n=e.getBoundingClientRect().height,t=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:t,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new TU(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let t=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],a=s?s.from-1:this.length;if(a>t){let l=(n.lineBlockAt(a).bottom-n.lineBlockAt(t).top)/this.view.scaleY;e.push(Yt.replace({widget:new T2(l),block:!0,inclusive:!0,isBlockGap:!0}).range(t,a))}if(!s)break;t=s.to+1}return Yt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(r0).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),t=!1,r=this.view.state.facet(KU).map((s,a)=>{let l=typeof s=="function";return l&&(t=!0),l?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=t,n.push($n.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(jU))try{if(u(this.view,e.range,e))return!0}catch(f){Ms(this.view.state,f,"scroll handler")}let{range:n}=e,t=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!t)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(t={left:Math.min(t.left,r.left),top:Math.min(t.top,r.top),right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)});let s=t9(this.view),a={left:t.left-s.left,top:t.top-s.top,right:t.right+s.right,bottom:t.bottom+s.bottom},{offsetWidth:l,offsetHeight:h}=this.view.scrollDOM;SOe(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==gi.LTR)}}function WOe(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function n9(i,e){let n=i.observer.selectionRange;if(!n.focusNode)return null;let t=CU(n.focusNode,n.focusOffset),r=kU(n.focusNode,n.focusOffset),s=t||r;if(r&&t&&r.node!=t.node){let l=ii.get(r.node);if(!l||l instanceof Zo&&l.text!=r.node.nodeValue)s=r;else if(i.docView.lastCompositionAfterCursor){let h=ii.get(t.node);!h||h instanceof Zo&&h.text!=t.node.nodeValue||(s=r)}}if(i.docView.lastCompositionAfterCursor=s!=t,!s)return null;let a=e-s.offset;return{from:a,to:a+s.node.nodeValue.length,node:s.node}}function QOe(i,e,n){let t=n9(i,n);if(!t)return null;let{node:r,from:s,to:a}=t,l=r.nodeValue;if(/[\n\r]/.test(l)||i.state.doc.sliceString(t.from,t.to)!=l)return null;let h=e.invertedDesc,u=new _o(h.mapPos(s),h.mapPos(a),s,a),f=[];for(let p=r.parentNode;;p=p.parentNode){let g=ii.get(p);if(g instanceof kl)f.push({node:p,deco:g.mark});else{if(g instanceof Fi||p.nodeName=="DIV"&&p.parentNode==i.contentDOM)return{range:u,text:r,marks:f,line:p};if(p!=i.contentDOM)f.push({node:p,deco:new X0({inclusive:!0,attributes:ROe(p),tagName:p.tagName.toLowerCase()})});else return null}}}function HOe(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let GOe=class{constructor(){this.changes=[]}compareRange(e,n){k2(e,n,this.changes)}comparePoint(e,n){k2(e,n,this.changes)}};function YOe(i,e,n){let t=new GOe;return $n.compare(i,e,n,t),t.changes}function jOe(i,e){for(let n=i;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function qOe(i,e){let n=!1;return e&&i.iterChangedRanges((t,r)=>{t<e.to&&r>e.from&&(n=!0)}),n}function ZOe(i,e,n=1){let t=i.charCategorizer(e),r=i.doc.lineAt(e),s=e-r.from;if(r.length==0)return Ze.cursor(e);s==0?n=1:s==r.length&&(n=-1);let a=s,l=s;n<0?a=wr(r.text,s,!1):l=wr(r.text,s);let h=t(r.text.slice(a,l));for(;a>0;){let u=wr(r.text,a,!1);if(t(r.text.slice(u,a))!=h)break;a=u}for(;l<r.length;){let u=wr(r.text,l);if(t(r.text.slice(l,u))!=h)break;l=u}return Ze.range(a+r.from,l+r.from)}function KOe(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function JOe(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function vS(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function O6(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function x6(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function R2(i,e,n){let t,r,s,a,l=!1,h,u,f,p;for(let y=i.firstChild;y;y=y.nextSibling){let w=i0(y);for(let x=0;x<w.length;x++){let S=w[x];r&&vS(r,S)&&(S=O6(x6(S,r.bottom),r.top));let _=KOe(e,S),O=JOe(n,S);if(_==0&&O==0)return y.nodeType==3?w6(y,e,n):R2(y,e,n);if(!t||a>O||a==O&&s>_){t=y,r=S,s=_,a=O;let k=O?n<S.top?-1:1:_?e<S.left?-1:1:0;l=!k||(k>0?x<w.length-1:x>0)}_==0?n>S.bottom&&(!f||f.bottom<S.bottom)?(h=y,f=S):n<S.top&&(!p||p.top>S.top)&&(u=y,p=S):f&&vS(f,S)?f=x6(f,S.bottom):p&&vS(p,S)&&(p=O6(p,S.top))}}if(f&&f.bottom>=n?(t=h,r=f):p&&p.top<=n&&(t=u,r=p),!t)return{node:i,offset:0};let g=Math.max(r.left,Math.min(r.right,e));if(t.nodeType==3)return w6(t,g,n);if(l&&t.contentEditable!="false")return R2(t,g,n);let v=Array.prototype.indexOf.call(i.childNodes,t)+(e>=(r.left+r.right)/2?1:0);return{node:i,offset:v}}function w6(i,e,n){let t=i.nodeValue.length,r=-1,s=1e9,a=0;for(let l=0;l<t;l++){let h=xu(i,l,l+1).getClientRects();for(let u=0;u<h.length;u++){let f=h[u];if(f.top==f.bottom)continue;a||(a=e-f.left);let p=(f.top>n?f.top-n:n-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&p<s){let g=e>=(f.left+f.right)/2,v=g;if((St.chrome||St.gecko)&&xu(i,l).getBoundingClientRect().left==f.right&&(v=!g),p<=0)return{node:i,offset:l+(v?1:0)};r=l+(v?1:0),s=p}}}return{node:i,offset:r>-1?r:a>0?i.nodeValue.length:0}}function i9(i,e,n,t=-1){var r,s;let a=i.contentDOM.getBoundingClientRect(),l=a.top+i.viewState.paddingTop,h,{docHeight:u}=i.viewState,{x:f,y:p}=e,g=p-l;if(g<0)return 0;if(g>u)return i.state.doc.length;for(let k=i.viewState.heightOracle.textHeight/2,M=!1;h=i.elementAtHeight(g),h.type!=rs.Text;)for(;g=t>0?h.bottom+k:h.top-k,!(g>=0&&g<=u);){if(M)return n?null:0;M=!0,t=-t}p=l+g;let v=h.from;if(v<i.viewport.from)return i.viewport.from==0?0:n?null:_6(i,a,h,f,p);if(v>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:n?null:_6(i,a,h,f,p);let y=i.dom.ownerDocument,w=i.root.elementFromPoint?i.root:y,x=w.elementFromPoint(f,p);x&&!i.contentDOM.contains(x)&&(x=null),x||(f=Math.max(a.left+1,Math.min(a.right-1,f)),x=w.elementFromPoint(f,p),x&&!i.contentDOM.contains(x)&&(x=null));let S,_=-1;if(x&&((r=i.docView.nearest(x))===null||r===void 0?void 0:r.isEditable)!=!1){if(y.caretPositionFromPoint){let k=y.caretPositionFromPoint(f,p);k&&({offsetNode:S,offset:_}=k)}else if(y.caretRangeFromPoint){let k=y.caretRangeFromPoint(f,p);k&&({startContainer:S,startOffset:_}=k,(!i.contentDOM.contains(S)||St.safari&&exe(S,_,f)||St.chrome&&txe(S,_,f))&&(S=void 0))}}if(!S||!i.docView.dom.contains(S)){let k=Fi.find(i.docView,v);if(!k)return g>h.top+h.height/2?h.to:h.from;({node:S,offset:_}=R2(k.dom,f,p))}let O=i.docView.nearest(S);if(!O)return null;if(O.isWidget&&((s=O.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=O.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?O.posAtStart:O.posAtEnd}else return O.localPosFromDOM(S,_)+O.posAtStart}function _6(i,e,n,t,r){let s=Math.round((t-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&n.height>i.defaultLineHeight*1.5){let l=i.viewState.heightOracle.textHeight,h=Math.floor((r-n.top-(i.defaultLineHeight-l)*.5)/l);s+=h*i.viewState.heightOracle.lineLength}let a=i.state.sliceDoc(n.from,n.to);return n.from+v2(a,s,i.state.tabSize)}function exe(i,e,n){let t;if(i.nodeType!=3||e!=(t=i.nodeValue.length))return!1;for(let r=i.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return xu(i,t-1,t).getBoundingClientRect().left>n}function txe(i,e,n){if(e!=0)return!1;for(let r=i;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let t=i.nodeType==1?i.getBoundingClientRect():xu(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return n-t.left>5}function I2(i,e){let n=i.lineBlockAt(e);if(Array.isArray(n.type)){for(let t of n.type)if(t.to>e||t.to==e&&(t.to==n.to||t.type==rs.Text))return t}return n}function nxe(i,e,n,t){let r=I2(i,e.head),s=!t||r.type!=rs.Text||!(i.lineWrapping||r.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let a=i.dom.getBoundingClientRect(),l=i.textDirectionAt(r.from),h=i.posAtCoords({x:n==(l==gi.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(h!=null)return Ze.cursor(h,n?-1:1)}return Ze.cursor(n?r.to:r.from,n?-1:1)}function S6(i,e,n,t){let r=i.state.doc.lineAt(e.head),s=i.bidiSpans(r),a=i.textDirectionAt(r.from);for(let l=e,h=null;;){let u=zOe(r,s,a,l,n),f=UU;if(!u){if(r.number==(n?i.state.doc.lines:1))return l;f=`
`,r=i.state.doc.line(r.number+(n?1:-1)),s=i.bidiSpans(r),u=i.visualLineSide(r,!n)}if(h){if(!h(f))return l}else{if(!t)return u;h=t(f)}l=u}}function ixe(i,e,n){let t=i.state.charCategorizer(e),r=t(n);return s=>{let a=t(s);return r==wi.Space&&(r=a),r==a}}function rxe(i,e,n,t){let r=e.head,s=n?1:-1;if(r==(n?i.state.doc.length:0))return Ze.cursor(r,e.assoc);let a=e.goalColumn,l,h=i.contentDOM.getBoundingClientRect(),u=i.coordsAtPos(r,e.assoc||-1),f=i.documentTop;if(u)a==null&&(a=u.left-h.left),l=s<0?u.top:u.bottom;else{let v=i.viewState.lineBlockAt(r);a==null&&(a=Math.min(h.right-h.left,i.defaultCharacterWidth*(r-v.from))),l=(s<0?v.top:v.bottom)+f}let p=h.left+a,g=t??i.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let y=l+(g+v)*s,w=i9(i,{x:p,y},!1,s);if(y<h.top||y>h.bottom||(s<0?w<r:w>r)){let x=i.docView.coordsForChar(w),S=!x||y<x.top?-1:1;return Ze.cursor(w,S,void 0,a)}}}function Y1(i,e,n){for(;;){let t=0;for(let r of i)r.between(e-1,e+1,(s,a,l)=>{if(e>s&&e<a){let h=t||n||(e-s<a-e?-1:1);e=h<0?s:a,t=h}});if(!t)return e}}function yS(i,e,n){let t=Y1(i.state.facet(kM).map(r=>r(i)),n.from,e.head>n.from?-1:1);return t==n.from?n:Ze.cursor(t,t<n.from?1:-1)}const ng="￿";class sxe{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Ln.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ng}readRange(e,n){if(!e)return this;let t=e.parentNode;for(let r=e;;){this.findPointBefore(t,r);let s=this.text.length;this.readNode(r);let a=r.nextSibling;if(a==n)break;let l=ii.get(r),h=ii.get(a);(l&&h?l.breakAfter:(l?l.breakAfter:Ab(r))||Ab(a)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=a}return this.findPointBefore(t,n),this}readTextNode(e){let n=e.nodeValue;for(let t of this.points)t.node==e&&(t.pos=this.text.length+Math.min(t.offset,n.length));for(let t=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,t),a=this.lineSeparator.length):(l=r.exec(n))&&(s=l.index,a=l[0].length),this.append(n.slice(t,s<0?n.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);t=s+a}}readNode(e){if(e.cmIgnore)return;let n=ii.get(e),t=n&&n.overrideDOMText;if(t!=null){this.findPointInside(e,t.length);for(let r=t.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let t of this.points)t.node==e&&e.childNodes[t.offset]==n&&(t.pos=this.text.length)}findPointInside(e,n){for(let t of this.points)(e.nodeType==3?t.node==e:e.contains(t.node))&&(t.pos=this.text.length+(oxe(e,t.node,t.offset)?n:0))}}function oxe(i,e,n){for(;;){if(!e||n<Cl(e))return!1;if(e==i)return!0;n=Ou(e)+1,e=e.parentNode}}class C6{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class axe{constructor(e,n,t,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,t,0))){let l=s||a?[]:hxe(e),h=new sxe(l,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=uxe(l,this.bounds.from)}else{let l=e.observer.selectionRange,h=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!O2(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!O2(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),f=e.viewport;if((St.ios||St.chrome)&&e.state.selection.main.empty&&h!=u&&(f.from>0||f.to<e.state.doc.length)){let p=Math.min(h,u),g=Math.max(h,u),v=f.from-p,y=f.to-g;(v==0||v==1||p==0)&&(y==0||y==-1||g==e.state.doc.length)&&(h=0,u=e.state.doc.length)}this.newSel=Ze.single(u,h)}}}function r9(i,e){let n,{newSel:t}=e,r=i.state.selection.main,s=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:l}=e.bounds,h=r.from,u=null;(s===8||St.android&&e.text.length<l-a)&&(h=r.to,u="end");let f=cxe(i.state.doc.sliceString(a,l,ng),e.text,h-a,u);f&&(St.chrome&&s==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==ng+ng&&f.toB--,n={from:a+f.from,to:a+f.toA,insert:Bn.of(e.text.slice(f.from,f.toB).split(ng))})}else t&&(!i.hasFocus&&i.state.facet(wc)||t.main.eq(r))&&(t=null);if(!n&&!t)return!1;if(!n&&e.typeOver&&!r.empty&&t&&t.main.empty?n={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,n.from).append(n.insert).append(i.state.doc.slice(n.to,r.to))}:(St.mac||St.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(t&&n.insert.length==2&&(t=Ze.single(t.main.anchor-1,t.main.head-1)),n={from:r.from,to:r.to,insert:Bn.of([" "])}):St.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&i.lineWrapping&&(t&&(t=Ze.single(t.main.anchor-1,t.main.head-1)),n={from:r.from,to:r.to,insert:Bn.of([" "])}),n)return TM(i,n,t,s);if(t&&!t.main.eq(r)){let a=!1,l="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(a=!0),l=i.inputState.lastSelectionOrigin),i.dispatch({selection:t,scrollIntoView:a,userEvent:l}),!0}else return!1}function TM(i,e,n,t=-1){if(St.ios&&i.inputState.flushIOSKey(e))return!0;let r=i.state.selection.main;if(St.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&i.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&tf(i.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||t==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&tf(i.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&tf(i.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let a,l=()=>a||(a=lxe(i,e,n));return i.state.facet(QU).some(h=>h(i,e.from,e.to,s,l))||i.dispatch(l()),!0}function lxe(i,e,n){let t,r=i.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",h=s.to>e.to?r.sliceDoc(e.to,s.to):"";t=r.replaceSelection(i.state.toText(l+e.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let l=r.changes(e),h=n&&n.main.to<=l.newLength?n.main:void 0;if(r.selection.ranges.length>1&&i.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=i.state.sliceDoc(e.from,e.to),f,p=n&&n9(i,n.main.head);if(p){let y=e.insert.length-(e.to-e.from);f={from:p.from,to:p.to-y}}else f=i.state.doc.lineAt(s.head);let g=s.to-e.to,v=s.to-s.from;t=r.changeByRange(y=>{if(y.from==s.from&&y.to==s.to)return{changes:l,range:h||y.map(l)};let w=y.to-g,x=w-u.length;if(y.to-y.from!=v||i.state.sliceDoc(x,w)!=u||y.to>=f.from&&y.from<=f.to)return{range:y};let S=r.changes({from:x,to:w,insert:e.insert}),_=y.to-s.to;return{changes:S,range:h?Ze.range(Math.max(0,h.anchor+_),Math.max(0,h.head+_)):y.map(S)}})}else t={changes:l,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,a+=".compose",i.inputState.compositionFirstChange&&(a+=".start",i.inputState.compositionFirstChange=!1)),r.update(t,{userEvent:a,scrollIntoView:!0})}function cxe(i,e,n,t){let r=Math.min(i.length,e.length),s=0;for(;s<r&&i.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&i.length==e.length)return null;let a=i.length,l=e.length;for(;a>0&&l>0&&i.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(t=="end"){let h=Math.max(0,s-Math.min(a,l));n-=a+h-s}if(a<s&&i.length<e.length){let h=n<=s&&n>=a?s-n:0;s-=h,l=s+(l-a),a=s}else if(l<s){let h=n<=s&&n>=l?s-n:0;s-=h,a=s+(a-l),l=s}return{from:s,toA:a,toB:l}}function hxe(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:n,anchorOffset:t,focusNode:r,focusOffset:s}=i.observer.selectionRange;return n&&(e.push(new C6(n,t)),(r!=n||s!=t)&&e.push(new C6(r,s))),e}function uxe(i,e){if(i.length==0)return null;let n=i[0].pos,t=i.length==2?i[1].pos:n;return n>-1&&t>-1?Ze.single(n+e,t+e):null}class dxe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,St.safari&&e.contentDOM.addEventListener("input",()=>null),St.gecko&&Mxe(e.contentDOM.ownerDocument)}handleEvent(e){!Oxe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let t=this.handlers[e];if(t){for(let r of t.observers)r(this.view,n);for(let r of t.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=fxe(e),t=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let a=!n[s].handlers.length,l=t[s];l&&a!=!l.handlers.length&&(r.removeEventListener(s,this.handleEvent),l=null),l||r.addEventListener(s,this.handleEvent,{passive:a})}for(let s in t)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&o9.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),St.android&&St.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return St.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=s9.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||pxe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,tf(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:St.safari&&!St.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function k6(i,e){return(n,t)=>{try{return e.call(i,t,n)}catch(r){Ms(n.state,r)}}}function fxe(i){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let t of i){let r=t.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let a=r.domEventHandlers[s];a&&n(s).handlers.push(k6(t.value,a))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let a=r.domEventObservers[s];a&&n(s).observers.push(k6(t.value,a))}}for(let t in Ko)n(t).handlers.push(Ko[t]);for(let t in ko)n(t).observers.push(ko[t]);return e}const s9=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],pxe="dthko",o9=[16,17,18,20,91,92,224,225],h1=6;function u1(i){return Math.max(0,i)*.7+8}function mxe(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class gxe{constructor(e,n,t,r){this.view=e,this.startEvent=n,this.style=t,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=COe(e.contentDOM),this.atoms=e.state.facet(kM).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ln.allowMultipleSelections)&&vxe(e,n),this.dragging=bxe(e,n)&&c9(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&mxe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,t=0,r=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let h=t9(this.view);e.clientX-h.left<=r+h1?n=-u1(r-e.clientX):e.clientX+h.right>=a-h1&&(n=u1(e.clientX-a)),e.clientY-h.top<=s+h1?t=-u1(s-e.clientY):e.clientY+h.bottom>=l-h1&&(t=u1(e.clientY-l)),this.setScrollSpeed(n,t)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let t=0;t<e.ranges.length;t++){let r=e.ranges[t],s=null;if(r.empty){let a=Y1(this.atoms,r.from,0);a!=r.from&&(s=Ze.cursor(a,-1))}else{let a=Y1(this.atoms,r.from,-1),l=Y1(this.atoms,r.to,1);(a!=r.from||l!=r.to)&&(s=Ze.range(r.from==r.anchor?a:l,r.from==r.head?a:l))}s&&(n||(n=e.ranges.slice()),n[t]=s)}return n?Ze.create(n,e.mainIndex):e}select(e){let{view:n}=this,t=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!t.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function vxe(i,e){let n=i.state.facet(zU);return n.length?n[0](e):St.mac?e.metaKey:e.ctrlKey}function yxe(i,e){let n=i.state.facet(FU);return n.length?n[0](e):St.mac?!e.altKey:!e.ctrlKey}function bxe(i,e){let{main:n}=i.state.selection;if(n.empty)return!1;let t=n0(i.root);if(!t||t.rangeCount==0)return!0;let r=t.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let a=r[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Oxe(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,t;n!=i.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(t=ii.get(n))&&t.ignoreEvent(e))return!1;return!0}const Ko=Object.create(null),ko=Object.create(null),a9=St.ie&&St.ie_version<15||St.ios&&St.webkit_version<604;function xxe(i){let e=i.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{i.focus(),n.remove(),l9(i,n.value)},50)}function ux(i,e,n){for(let t of i.facet(e))n=t(n,i);return n}function l9(i,e){e=ux(i.state,_M,e);let{state:n}=i,t,r=1,s=n.toText(e),a=s.lines==n.selection.ranges.length;if(D2!=null&&n.selection.ranges.every(h=>h.empty)&&D2==s.toString()){let h=-1;t=n.changeByRange(u=>{let f=n.doc.lineAt(u.from);if(f.from==h)return{range:u};h=f.from;let p=n.toText((a?s.line(r++).text:e)+n.lineBreak);return{changes:{from:f.from,insert:p},range:Ze.cursor(u.from+p.length)}})}else a?t=n.changeByRange(h=>{let u=s.line(r++);return{changes:{from:h.from,to:h.to,insert:u.text},range:Ze.cursor(h.from+u.length)}}):t=n.replaceSelection(s);i.dispatch(t,{userEvent:"input.paste",scrollIntoView:!0})}ko.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};Ko.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);ko.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};ko.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};Ko.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let t of i.state.facet(XU))if(n=t(i,e),n)break;if(!n&&e.button==0&&(n=Sxe(i,e)),n){let t=!i.hasFocus;i.inputState.startMouseSelection(new gxe(i,e,n,t)),t&&i.observer.ignore(()=>{wU(i.contentDOM);let s=i.root.activeElement;s&&!s.contains(i.contentDOM)&&s.blur()});let r=i.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function T6(i,e,n,t){if(t==1)return Ze.cursor(e,n);if(t==2)return ZOe(i.state,e,n);{let r=Fi.find(i.docView,e),s=i.state.doc.lineAt(r?r.posAtEnd:e),a=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<i.state.doc.length&&l==s.to&&l++,Ze.range(a,l)}}let M6=(i,e,n)=>e>=n.top&&e<=n.bottom&&i>=n.left&&i<=n.right;function wxe(i,e,n,t){let r=Fi.find(i.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let a=r.coordsAt(s,-1);if(a&&M6(n,t,a))return-1;let l=r.coordsAt(s,1);return l&&M6(n,t,l)?1:a&&a.bottom>=t?-1:1}function E6(i,e){let n=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:wxe(i,n,e.clientX,e.clientY)}}const _xe=St.ie&&St.ie_version<=11;let P6=null,A6=0,R6=0;function c9(i){if(!_xe)return i.detail;let e=P6,n=R6;return P6=i,R6=Date.now(),A6=!e||n>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(A6+1)%3:1}function Sxe(i,e){let n=E6(i,e),t=c9(e),r=i.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,a,l){let h=E6(i,s),u,f=T6(i,h.pos,h.bias,t);if(n.pos!=h.pos&&!a){let p=T6(i,n.pos,n.bias,t),g=Math.min(p.from,f.from),v=Math.max(p.to,f.to);f=g<f.from?Ze.range(g,v):Ze.range(v,g)}return a?r.replaceRange(r.main.extend(f.from,f.to)):l&&t==1&&r.ranges.length>1&&(u=Cxe(r,h.pos))?u:l?r.addRange(f):Ze.create([f])}}}function Cxe(i,e){for(let n=0;n<i.ranges.length;n++){let{from:t,to:r}=i.ranges[n];if(t<=e&&r>=e)return Ze.create(i.ranges.slice(0,n).concat(i.ranges.slice(n+1)),i.mainIndex==n?0:i.mainIndex-(i.mainIndex>n?1:0))}return null}Ko.dragstart=(i,e)=>{let{selection:{main:n}}=i.state;if(e.target.draggable){let r=i.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,a=s+r.length;(s>=n.to||a<=n.from)&&(n=Ze.range(s,a))}}let{inputState:t}=i;return t.mouseSelection&&(t.mouseSelection.dragging=!0),t.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",ux(i.state,SM,i.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ko.dragend=i=>(i.inputState.draggedContent=null,!1);function I6(i,e,n,t){if(n=ux(i.state,_M,n),!n)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=i.inputState,a=t&&s&&yxe(i,e)?{from:s.from,to:s.to}:null,l={from:r,insert:n},h=i.state.changes(a?[a,l]:l);i.focus(),i.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"}),i.inputState.draggedContent=null}Ko.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let t=Array(n.length),r=0,s=()=>{++r==n.length&&I6(i,e,t.filter(a=>a!=null).join(i.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(t[a]=l.result),s()},l.readAsText(n[a])}return!0}else{let t=e.dataTransfer.getData("Text");if(t)return I6(i,e,t,!0),!0}return!1};Ko.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let n=a9?null:e.clipboardData;return n?(l9(i,n.getData("text/plain")||n.getData("text/uri-list")),!0):(xxe(i),!1)};function kxe(i,e){let n=i.dom.parentNode;if(!n)return;let t=n.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.value=e,t.focus(),t.selectionEnd=e.length,t.selectionStart=0,setTimeout(()=>{t.remove(),i.focus()},50)}function Txe(i){let e=[],n=[],t=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of i.selection.ranges){let a=i.doc.lineAt(s);a.number>r&&(e.push(a.text),n.push({from:a.from,to:Math.min(i.doc.length,a.to+1)})),r=a.number}t=!0}return{text:ux(i,SM,e.join(i.lineBreak)),ranges:n,linewise:t}}let D2=null;Ko.copy=Ko.cut=(i,e)=>{let{text:n,ranges:t,linewise:r}=Txe(i.state);if(!n&&!r)return!1;D2=r?n:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:t,scrollIntoView:!0,userEvent:"delete.cut"});let s=a9?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(kxe(i,n),!1)};const h9=Al.define();function u9(i,e){let n=[];for(let t of i.facet(HU)){let r=t(i,e);r&&n.push(r)}return n?i.update({effects:n,annotations:h9.of(!0)}):null}function d9(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let n=u9(i.state,e);n?i.dispatch(n):i.update([])}},10)}ko.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),d9(i)};ko.blur=i=>{i.observer.clearSelectionRange(),d9(i)};ko.compositionstart=ko.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};ko.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,St.chrome&&St.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};ko.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};Ko.beforeinput=(i,e)=>{var n,t;if(e.inputType=="insertReplacementText"&&i.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),a=e.getTargetRanges();if(s&&a.length){let l=a[0],h=i.posAtDOM(l.startContainer,l.startOffset),u=i.posAtDOM(l.endContainer,l.endOffset);return TM(i,{from:h,to:u,insert:i.state.toText(s)},null),!0}}let r;if(St.chrome&&St.android&&(r=s9.find(s=>s.inputType==e.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return St.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),St.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>ko.compositionend(i,e),20),!1};const D6=new Set;function Mxe(i){D6.has(i)||(D6.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const N6=["pre-wrap","normal","pre-line","break-spaces"];let Af=!1;function $6(){Af=!1}class Exe{constructor(e){this.lineWrapping=e,this.doc=Bn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let t=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(t+=Math.max(0,Math.ceil((n-e-t*this.lineLength*.5)/this.lineLength))),this.lineHeight*t}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return N6.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let t=0;t<e.length;t++){let r=e[t];r<0?t++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,t,r,s,a){let l=N6.indexOf(e)>-1,h=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=t,this.textHeight=r,this.lineLength=s,h){this.heightSamples={};for(let u=0;u<a.length;u++){let f=a[u];f<0?u++:this.heightSamples[Math.floor(f*10)]=!0}}return h}}class Pxe{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ya{constructor(e,n,t,r,s){this.from=e,this.length=n,this.top=t,this.height=r,this._content=s}get type(){return typeof this._content=="number"?rs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Wc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ya(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var pi=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(pi||(pi={}));const j1=.001;class ss{constructor(e,n,t=2){this.length=e,this.height=n,this.flags=t}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>j1&&(Af=!0),this.height=e)}replace(e,n,t){return ss.of(t)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,t,r){let s=this,a=t.doc;for(let l=r.length-1;l>=0;l--){let{fromA:h,toA:u,fromB:f,toB:p}=r[l],g=s.lineAt(h,pi.ByPosNoHeight,t.setDoc(n),0,0),v=g.to>=u?g:s.lineAt(u,pi.ByPosNoHeight,t,0,0);for(p+=v.to-u,u=v.to;l>0&&g.from<=r[l-1].toA;)h=r[l-1].fromA,f=r[l-1].fromB,l--,h<g.from&&(g=s.lineAt(h,pi.ByPosNoHeight,t,0,0));f+=g.from-h,h=g.from;let y=MM.build(t.setDoc(a),e,f,p);s=Db(s,s.replace(h,u,y))}return s.updateHeight(t,0)}static empty(){return new Gs(0,0)}static of(e){if(e.length==1)return e[0];let n=0,t=e.length,r=0,s=0;for(;;)if(n==t)if(r>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),t+=1+l.break,r-=l.size}else if(s>r*2){let l=e[t];l.break?e.splice(t,1,l.left,null,l.right):e.splice(t,1,l.left,l.right),t+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[n++];l&&(r+=l.size)}else{let l=e[--t];l&&(s+=l.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,t++),new Axe(ss.of(e.slice(0,n)),a,ss.of(e.slice(t)))}}function Db(i,e){return i==e?i:(i.constructor!=e.constructor&&(Af=!0),e)}ss.prototype.size=1;class f9 extends ss{constructor(e,n,t){super(e,n),this.deco=t}blockAt(e,n,t,r){return new ya(r,this.length,t,this.height,this.deco||0)}lineAt(e,n,t,r,s){return this.blockAt(0,t,r,s)}forEachLine(e,n,t,r,s,a){e<=s+this.length&&n>=s&&a(this.blockAt(0,t,r,s))}updateHeight(e,n=0,t=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Gs extends f9{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,t,r){return new ya(r,this.length,t,this.height,this.breaks)}replace(e,n,t){let r=t[0];return t.length==1&&(r instanceof Gs||r instanceof vr&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof vr?r=new Gs(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):ss.of(t)}updateHeight(e,n=0,t=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(t||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class vr extends ss{constructor(e){super(e,0)}heightMetrics(e,n){let t=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-t+1,a,l=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*s);a=h/s,this.length>s+1&&(l=(this.height-h)/(this.length-s-1))}else a=this.height/s;return{firstLine:t,lastLine:r,perLine:a,perChar:l}}blockAt(e,n,t,r){let{firstLine:s,lastLine:a,perLine:l,perChar:h}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-t)/this.height))*this.length)),f=n.doc.lineAt(u),p=l+f.length*h,g=Math.max(t,e-p/2);return new ya(f.from,f.length,g,p,0)}else{let u=Math.max(0,Math.min(a-s,Math.floor((e-t)/l))),{from:f,length:p}=n.doc.line(s+u);return new ya(f,p,t+l*u,l,0)}}lineAt(e,n,t,r,s){if(n==pi.ByHeight)return this.blockAt(e,t,r,s);if(n==pi.ByPosNoHeight){let{from:v,to:y}=t.doc.lineAt(e);return new ya(v,y-v,0,0,0)}let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(t,s),u=t.doc.lineAt(e),f=l+u.length*h,p=u.number-a,g=r+l*p+h*(u.from-s-p);return new ya(u.from,u.length,Math.max(r,Math.min(g,r+this.height-f)),f,0)}forEachLine(e,n,t,r,s,a){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:h,perChar:u}=this.heightMetrics(t,s);for(let f=e,p=r;f<=n;){let g=t.doc.lineAt(f);if(f==e){let y=g.number-l;p+=h*y+u*(e-s-y)}let v=h+u*g.length;a(new ya(g.from,g.length,p,v,0)),p+=v,f=g.to+1}}replace(e,n,t){let r=this.length-n;if(r>0){let s=t[t.length-1];s instanceof vr?t[t.length-1]=new vr(s.length+r):t.push(null,new vr(r-1))}if(e>0){let s=t[0];s instanceof vr?t[0]=new vr(e+s.length):t.unshift(new vr(e-1),null)}return ss.of(t)}decomposeLeft(e,n){n.push(new vr(e-1),null)}decomposeRight(e,n){n.push(null,new vr(this.length-e-1))}updateHeight(e,n=0,t=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let a=[],l=Math.max(n,r.from),h=-1;for(r.from>n&&a.push(new vr(r.from-n-1).updateHeight(e,n));l<=s&&r.more;){let f=e.doc.lineAt(l).length;a.length&&a.push(null);let p=r.heights[r.index++];h==-1?h=p:Math.abs(p-h)>=j1&&(h=-2);let g=new Gs(f,p);g.outdated=!1,a.push(g),l+=f+1}l<=s&&a.push(null,new vr(s-l).updateHeight(e,l));let u=ss.of(a);return(h<0||Math.abs(u.height-this.height)>=j1||Math.abs(h-this.heightMetrics(e,n).perLine)>=j1)&&(Af=!0),Db(this,u)}else(t||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Axe extends ss{constructor(e,n,t){super(e.length+n+t.length,e.height+t.height,n|(e.outdated||t.outdated?2:0)),this.left=e,this.right=t,this.size=e.size+t.size}get break(){return this.flags&1}blockAt(e,n,t,r){let s=t+this.left.height;return e<s?this.left.blockAt(e,n,t,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,t,r,s){let a=r+this.left.height,l=s+this.left.length+this.break,h=n==pi.ByHeight?e<a:e<l,u=h?this.left.lineAt(e,n,t,r,s):this.right.lineAt(e,n,t,a,l);if(this.break||(h?u.to<l:u.from>l))return u;let f=n==pi.ByPosNoHeight?pi.ByPosNoHeight:pi.ByPos;return h?u.join(this.right.lineAt(l,f,t,a,l)):this.left.lineAt(l,f,t,r,s).join(u)}forEachLine(e,n,t,r,s,a){let l=r+this.left.height,h=s+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,n,t,r,s,a),n>=h&&this.right.forEachLine(e,n,t,l,h,a);else{let u=this.lineAt(h,pi.ByPos,t,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,t,r,s,a),u.to>=e&&u.from<=n&&a(u),n>u.to&&this.right.forEachLine(u.to+1,n,t,l,h,a)}}replace(e,n,t){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,t),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,t));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let l of t)s.push(l);if(e>0&&V6(s,a-1),n<this.length){let l=s.length;this.decomposeRight(n,s),V6(s,l)}return ss.of(s)}decomposeLeft(e,n){let t=this.left.length;if(e<=t)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(t++,e>=t&&n.push(null)),e>t&&this.right.decomposeLeft(e-t,n)}decomposeRight(e,n){let t=this.left.length,r=t+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<t&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?ss.of(this.break?[e,null,n]:[e,n]):(this.left=Db(this.left,e),this.right=Db(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,t=!1,r){let{left:s,right:a}=this,l=n+s.length+this.break,h=null;return r&&r.from<=n+s.length&&r.more?h=s=s.updateHeight(e,n,t,r):s.updateHeight(e,n,t),r&&r.from<=l+a.length&&r.more?h=a=a.updateHeight(e,l,t,r):a.updateHeight(e,l,t),h?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function V6(i,e){let n,t;i[e]==null&&(n=i[e-1])instanceof vr&&(t=i[e+1])instanceof vr&&i.splice(e-1,3,new vr(n.length+1+t.length))}const Rxe=5;class MM{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let t=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Gs?r.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Gs(t-this.pos,-1)),this.writtenTo=t,n>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,t){if(e<n||t.heightRelevant){let r=t.widget?t.widget.estimatedHeight:0,s=t.widget?t.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let a=n-e;t.block?this.addBlock(new f9(a,r,t)):(a||s||r>=Rxe)&&this.addLineDeco(r,s,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Gs(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let t=new vr(n-e);return this.oracle.doc.lineAt(e).to==n&&(t.flags|=4),t}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Gs)return e;let n=new Gs(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+t}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Gs)&&!this.isCovered?this.nodes.push(new Gs(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let t=e;for(let r of this.nodes)r instanceof Gs&&r.updateHeight(this.oracle,t),t+=r?r.length:1;return this.nodes}static build(e,n,t,r){let s=new MM(t,e);return $n.spans(n,t,r,s,0),s.finish(t)}}function Ixe(i,e,n){let t=new Dxe;return $n.compare(i,e,n,t,0),t.changes}class Dxe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,t,r){(e<n||t&&t.heightRelevant||r&&r.heightRelevant)&&k2(e,n,this.changes,5)}}function Nxe(i,e){let n=i.getBoundingClientRect(),t=i.ownerDocument,r=t.defaultView||window,s=Math.max(0,n.left),a=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),h=Math.min(r.innerHeight,n.bottom);for(let u=i.parentNode;u&&u!=t.body;)if(u.nodeType==1){let f=u,p=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&p.overflow!="visible"){let g=f.getBoundingClientRect();s=Math.max(s,g.left),a=Math.min(a,g.right),l=Math.max(l,g.top),h=Math.min(u==i.parentNode?r.innerHeight:h,g.bottom)}u=p.position=="absolute"||p.position=="fixed"?f.offsetParent:f.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,a)-n.left,top:l-(n.top+e),bottom:Math.max(l,h)-(n.top+e)}}function $xe(i,e){let n=i.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class bS{constructor(e,n,t){this.from=e,this.to=n,this.size=t}static same(e,n){if(e.length!=n.length)return!1;for(let t=0;t<e.length;t++){let r=e[t],s=n[t];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Yt.replace({widget:new Vxe(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Vxe extends th{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class L6{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=B6,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=gi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(CM).some(t=>typeof t!="function"&&t.class=="cm-lineWrapping");this.heightOracle=new Exe(n),this.stateDeco=e.facet(r0).filter(t=>typeof t!="function"),this.heightMap=ss.empty().applyChanges(this.stateDeco,Bn.empty,this.heightOracle.setDoc(e.doc),[new _o(0,0,0,e.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Yt.set(this.lineGaps.map(t=>t.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let t=0;t<=1;t++){let r=t?n.head:n.anchor;if(!e.some(({from:s,to:a})=>r>=s&&r<=a)){let{from:s,to:a}=this.lineBlockAt(r);e.push(new d1(s,a))}}return this.viewports=e.sort((t,r)=>t.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?B6:new EM(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ig(e,this.scaler))})}update(e,n=null){this.state=e.state;let t=this.stateDeco;this.stateDeco=this.state.facet(r0).filter(f=>typeof f!="function");let r=e.changedRanges,s=_o.extendWithRanges(r,Ixe(t,this.stateDeco,e?e.changes:Ki.empty(this.state.doc.length))),a=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);$6(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=a||Af)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<h.from||n.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,n));let u=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(YU)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,t=window.getComputedStyle(n),r=this.heightOracle,s=t.whiteSpace;this.defaultTextDirection=t.direction=="rtl"?gi.RTL:gi.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,f=0;if(l.width&&l.height){let{scaleX:k,scaleY:M}=xU(n,l);(k>.005&&Math.abs(this.scaleX-k)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=k,this.scaleY=M,u|=8,a=h=!0)}let p=(parseInt(t.paddingTop)||0)*this.scaleY,g=(parseInt(t.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=g)&&(this.paddingTop=p,this.paddingBottom=g,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=SU(e.scrollDOM);let y=(this.printing?$xe:Nxe)(n,this.paddingTop),w=y.top-this.pixelViewport.top,x=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let _=l.width;if((this.contentDOMWidth!=_||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),h){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(a=!0),a||r.lineWrapping&&Math.abs(_-this.contentDOMWidth)>r.charWidth){let{lineHeight:M,charWidth:P,textHeight:D}=e.docView.measureTextSize();a=M>0&&r.refresh(s,M,P,D,_/P,k),a&&(e.docView.minWidth=0,u|=8)}w>0&&x>0?f=Math.max(w,x):w<0&&x<0&&(f=Math.min(w,x)),$6();for(let M of this.viewports){let P=M.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(M);this.heightMap=(a?ss.empty().applyChanges(this.stateDeco,Bn.empty,this.heightOracle,[new _o(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,a,new Pxe(M.from,P))}Af&&(u|=2)}let O=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),u|=this.updateForViewport()),(u&2||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let t=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,h=new d1(r.lineAt(a-t*1e3,pi.ByHeight,s,0,0).from,r.lineAt(l+(1-t)*1e3,pi.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<h.from||u>h.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=r.lineAt(u,pi.ByPos,s,0,0),g;n.y=="center"?g=(p.top+p.bottom)/2-f/2:n.y=="start"||n.y=="nearest"&&u<h.from?g=p.top:g=p.bottom-f,h=new d1(r.lineAt(g-1e3/2,pi.ByHeight,s,0,0).from,r.lineAt(g+f+1e3/2,pi.ByHeight,s,0,0).to)}}return h}mapViewport(e,n){let t=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new d1(this.heightMap.lineAt(t,pi.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,pi.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},t=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,pi.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,pi.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||r<=a-Math.max(10,Math.min(-t,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(t,250)))&&r>a-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let t=[];for(let r of e)n.touchesRange(r.from,r.to)||t.push(new bS(n.mapPos(r.from),n.mapPos(r.to),r.size));return t}ensureLineGaps(e,n){let t=this.heightOracle.lineWrapping,r=t?1e4:2e3,s=r>>1,a=r<<1;if(this.defaultTextDirection!=gi.LTR&&!t)return[];let l=[],h=(f,p,g,v)=>{if(p-f<s)return;let y=this.state.selection.main,w=[y.from];y.empty||w.push(y.to);for(let S of w)if(S>f&&S<p){h(f,S-10,g,v),h(S+10,p,g,v);return}let x=Bxe(e,S=>S.from>=g.from&&S.to<=g.to&&Math.abs(S.from-f)<s&&Math.abs(S.to-p)<s&&!w.some(_=>S.from<_&&S.to>_));if(!x){if(p<g.to&&n&&t&&n.visibleRanges.some(S=>S.from<=p&&S.to>=p)){let S=n.moveToLineBoundary(Ze.cursor(p),!1,!0).head;S>f&&(p=S)}x=new bS(f,p,this.gapSize(g,f,p,v))}l.push(x)},u=f=>{if(f.length<a||f.type!=rs.Text)return;let p=Lxe(f.from,f.to,this.stateDeco);if(p.total<a)return;let g=this.scrollTarget?this.scrollTarget.range.head:null,v,y;if(t){let w=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,S;if(g!=null){let _=p1(p,g),O=((this.visibleBottom-this.visibleTop)/2+w)/f.height;x=_-O,S=_+O}else x=(this.visibleTop-f.top-w)/f.height,S=(this.visibleBottom-f.top+w)/f.height;v=f1(p,x),y=f1(p,S)}else{let w=p.total*this.heightOracle.charWidth,x=r*this.heightOracle.charWidth,S,_;if(g!=null){let O=p1(p,g),k=((this.pixelViewport.right-this.pixelViewport.left)/2+x)/w;S=O-k,_=O+k}else S=(this.pixelViewport.left-x)/w,_=(this.pixelViewport.right+x)/w;v=f1(p,S),y=f1(p,_)}v>f.from&&h(f.from,v,f,p),y<f.to&&h(y,f.to,f,p)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(u):u(f);return l}gapSize(e,n,t,r){let s=p1(r,t)-p1(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){bS.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Yt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];$n.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let t=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,t?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ig(this.heightMap.lineAt(e,pi.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ig(this.heightMap.lineAt(this.scaler.fromDOM(e),pi.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ig(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class d1{constructor(e,n){this.from=e,this.to=n}}function Lxe(i,e,n){let t=[],r=i,s=0;return $n.spans(n,i,e,{span(){},point(a,l){a>r&&(t.push({from:r,to:a}),s+=a-r),r=l}},20),r<e&&(t.push({from:r,to:e}),s+=e-r),{total:s,ranges:t}}function f1({total:i,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let t=Math.floor(i*n);for(let r=0;;r++){let{from:s,to:a}=e[r],l=a-s;if(t<=l)return s+t;t-=l}}function p1(i,e){let n=0;for(let{from:t,to:r}of i.ranges){if(e<=r){n+=e-t;break}n+=r-t}return n/i.total}function Bxe(i,e){for(let n of i)if(e(n))return n}const B6={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};class EM{constructor(e,n,t){let r=0,s=0,a=0;this.viewports=t.map(({from:l,to:h})=>{let u=n.lineAt(l,pi.ByPos,e,0,0).top,f=n.lineAt(h,pi.ByPos,e,0,0).bottom;return r+=f-u,{from:l,to:h,top:u,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=a+(l.top-s)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,t=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-t)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);t=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,t=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return t+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);t=s.bottom,r=s.domBottom}}eq(e){return e instanceof EM?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,t)=>n.from==e.viewports[t].from&&n.to==e.viewports[t].to):!1}}function ig(i,e){if(e.scale==1)return i;let n=e.toDOM(i.top),t=e.toDOM(i.bottom);return new ya(i.from,i.length,n,t-n,Array.isArray(i._content)?i._content.map(r=>ig(r,e)):i._content)}const m1=wt.define({combine:i=>i.join(" ")}),N2=wt.define({combine:i=>i.indexOf(!0)>-1}),$2=Fc.newName(),p9=Fc.newName(),m9=Fc.newName(),g9={"&light":"."+p9,"&dark":"."+m9};function V2(i,e,n){return new Fc(e,{finish(t){return/&/.test(t)?t.replace(/&\w*/,r=>{if(r=="&")return i;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):i+" "+t}})}const Uxe=V2("."+$2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},g9),zxe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},OS=St.ie&&St.ie_version<=11;class Fxe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new kOe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let t of n)this.queue.push(t);(St.ie&&St.ie_version<=11||St.ios&&e.composing)&&n.some(t=>t.type=="childList"&&t.removedNodes.length||t.type=="characterData"&&t.oldValue.length>t.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(St.chrome&&St.chrome_version<126)&&(this.editContext=new Wxe(e),e.state.facet(wc)&&(e.contentDOM.editContext=this.editContext.editContext)),OS&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,t)=>n!=e[t]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,r=this.selectionRange;if(t.state.facet(wc)?t.root.activeElement!=this.dom:!G1(t.dom,r))return;let s=r.anchorNode&&t.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(St.ie&&St.ie_version<=11||St.android&&St.chrome)&&!t.state.selection.main.empty&&r.focusNode&&Og(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=n0(e.root);if(!n)return!1;let t=St.safari&&e.root.nodeType==11&&wOe(this.dom.ownerDocument)==this.dom&&Xxe(this.view,n)||n;if(!t||this.selectionRange.eq(t))return!1;let r=G1(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&MOe(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let t=this.dom;t;)if(t.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==t?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(t),t=t.assignedSlot||t.parentNode;else if(t.nodeType==11)t=t.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=n)t.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,zxe),OS&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),OS&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var t;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&tf(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((t=this.delayedAndroidKey)===null||t===void 0)&&t.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,t=-1,r=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(r=!0),n==-1?{from:n,to:t}=a:(n=Math.min(a.from,n),t=Math.max(a.to,t)))}return{from:n,to:t,typeOver:r}}readChange(){let{from:e,to:n,typeOver:t}=this.processRecords(),r=this.selectionChanged&&G1(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new axe(this.view,e,n,t);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let t=this.view.state,r=r9(this.view,n);return this.view.state==t&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let t=U6(n,e.previousSibling||e.target.previousSibling,-1),r=U6(n,e.nextSibling||e.target.nextSibling,1);return{from:t?n.posAfter(t):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(wc)!=e.state.facet(wc)&&(e.view.contentDOM.editContext=e.state.facet(wc)?this.editContext.editContext:null))}destroy(){var e,n,t;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(t=this.resizeScroll)===null||t===void 0||t.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function U6(i,e,n){for(;e;){let t=ii.get(e);if(t&&t.parent==i)return t;let r=e.parentNode;e=r!=i.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function z6(i,e){let n=e.startContainer,t=e.startOffset,r=e.endContainer,s=e.endOffset,a=i.docView.domAtPos(i.state.selection.main.anchor);return Og(a.node,a.offset,r,s)&&([n,t,r,s]=[r,s,n,t]),{anchorNode:n,anchorOffset:t,focusNode:r,focusOffset:s}}function Xxe(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return z6(i,r)}let n=null;function t(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",t,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",t,!0),n?z6(i,n):null}class Wxe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=t=>{let{anchor:r}=e.state.selection.main,s={from:this.toEditorPos(t.updateRangeStart),to:this.toEditorPos(t.updateRangeEnd),insert:Bn.of(t.text.split(`
`))};s.from==this.from&&r<this.from?s.from=r:s.to==this.to&&r>this.to&&(s.to=r),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,e.state.readOnly||TM(e,s,Ze.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=t=>{let r=[],s=null;for(let a=this.toEditorPos(t.rangeStart),l=this.toEditorPos(t.rangeEnd);a<l;a++){let h=e.coordsForChar(a);s=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(t.rangeStart,r)},this.handlers.textformatupdate=t=>{let r=[];for(let s of t.getTextFormats()){let a=s.underlineStyle,l=s.underlineThickness;if(a!="None"&&l!="None"){let h=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;r.push(Yt.mark({attributes:{style:h}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:qU.of(Yt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let t in this.handlers)n.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let r=n0(t.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,t=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,a,l,h,u)=>{if(t)return;let f=u.length-(a-s);if(r&&a>=r.to)if(r.from==s&&r.to==a&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=f,this.to+=f;return}else r=null,this.revertPending(e.state);if(s+=n,a+=n,a<=this.from)this.from+=f,this.to+=f;else if(s<this.to){if(s<this.from||a>this.to||this.to-this.from+u.length>3e4){t=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(a),u.toString()),this.to+=f}n+=f}),r&&!t&&this.revertPending(e.state),!t}update(e){let n=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,t=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=t||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(t,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class vt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(r=>r.forEach(s=>t(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||TOe(e.parent)||document,this.viewState=new L6(e.state||Ln.create(e)),e.scrollTo&&e.scrollTo.is(c1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(eg).map(r=>new gS(r));for(let r of this.plugins)r.update(this);this.observer=new Fxe(this),this.inputState=new dxe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new b6(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof ir?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,t=!1,r,s=this.state;for(let g of e){if(g.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=g.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,l=0,h=null;e.some(g=>g.annotation(h9))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=u9(s,a),h||(l=1));let u=this.observer.delayedAndroidKey,f=null;if(u?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(Ln.phrases)!=this.state.facet(Ln.phrases))return this.setState(s);r=Ib.create(this,s,e),r.flags|=l;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let g of e){if(p&&(p=p.map(g.changes)),g.scrollIntoView){let{main:v}=g.state.selection;p=new nf(v.empty?v:Ze.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of g.effects)v.is(c1)&&(p=v.value.clip(this.state))}this.viewState.update(r,p),this.bidiCache=Nb.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(tg)!=this.styleModules&&this.mountStyles(),t=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(m1)!=r.state.facet(m1)&&(this.viewState.mustMeasureContent=!0),(n||t||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let g of this.state.facet(A2))try{g(r)}catch(v){Ms(this.state,v,"update listener")}(h||f)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),f&&!r9(this,f)&&u.force&&tf(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new L6(e),this.plugins=e.facet(eg).map(t=>new gS(t)),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new b6(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(eg),t=e.state.facet(eg);if(n!=t){let r=[];for(let s of t){let a=n.indexOf(s);if(a<0)r.push(new gS(s));else{let l=this.plugins[a];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=t&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(t){Ms(this.state,t,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,t=this.scrollDOM,r=t.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(SU(t))s=-1,a=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(r);s=v.from,a=v.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];h&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(v=>{try{return v.read(this)}catch(y){return Ms(this.state,y),F6}}),p=Ib.create(this,this.state,[]),g=!1;p.flags|=h,n?n.flags|=h:n=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),g=this.docView.update(p),g&&this.docViewUpdate());for(let v=0;v<u.length;v++)if(f[v]!=F6)try{let y=u[v];y.write&&y.write(f[v],this)}catch(y){Ms(this.state,y)}if(g&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let y=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(y>1||y<-1){r=r+y,t.scrollTop=r/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(A2))l(n)}get themeClasses(){return $2+" "+(this.state.facet(N2)?m9:p9)+" "+this.state.facet(m1)}updateAttrs(){let e=X6(this,ZU,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(wc)?"true":"false",class:"cm-content",style:`${St.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),X6(this,CM,n);let t=this.observer.ignore(()=>{let r=C2(this.contentDOM,this.contentAttrs,n),s=C2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,t}showAnnouncements(e){let n=!0;for(let t of e)for(let r of t.effects)if(r.is(vt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(tg);let e=this.state.facet(vt.cspNonce);Fc.mount(this.root,this.styleModules.concat(Uxe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(t=>t.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,t){return yS(this,e,S6(this,e,n,t))}moveByGroup(e,n){return yS(this,e,S6(this,e,n,t=>ixe(this,e.head,t)))}visualLineSide(e,n){let t=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=t[n?t.length-1:0];return Ze.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,t=!0){return nxe(this,e,n,t)}moveVertically(e,n,t){return yS(this,e,rxe(this,e,n,t))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),i9(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let t=this.docView.coordsAt(e,n);if(!t||t.left==t.right)return t;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),a=s[Tc.find(s,e-r.from,-1,n)];return cx(t,a.dir==gi.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(GU)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Qxe)return BU(e.length);let n=this.textDirectionAt(e.from),t;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||LU(s.isolates,t=y6(this,e))))return s.order;t||(t=y6(this,e));let r=UOe(e.text,n,t);return this.bidiCache.push(new Nb(e.from,e.to,n,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||St.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{wU(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return c1.of(new nf(typeof e=="number"?Ze.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,t=this.viewState.scrollAnchorAt(e);return c1.of(new nf(Ze.cursor(t.from),"start","start",t.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Gi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Gi.define(()=>({}),{eventObservers:e})}static theme(e,n){let t=Fc.newName(),r=[m1.of(t),tg.of(V2(`.${t}`,e))];return n&&n.dark&&r.push(N2.of(!0)),r}static baseTheme(e){return Ru.lowest(tg.of(V2("."+$2,e,g9)))}static findFromDOM(e){var n;let t=e.querySelector(".cm-content"),r=t&&ii.get(t)||ii.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}vt.styleModule=tg;vt.inputHandler=QU;vt.clipboardInputFilter=_M;vt.clipboardOutputFilter=SM;vt.scrollHandler=jU;vt.focusChangeEffect=HU;vt.perLineTextDirection=GU;vt.exceptionSink=WU;vt.updateListener=A2;vt.editable=wc;vt.mouseSelectionStyle=XU;vt.dragMovesSelection=FU;vt.clickAddsSelectionRange=zU;vt.decorations=r0;vt.outerDecorations=KU;vt.atomicRanges=kM;vt.bidiIsolatedRanges=JU;vt.scrollMargins=e9;vt.darkTheme=N2;vt.cspNonce=wt.define({combine:i=>i.length?i[0]:""});vt.contentAttributes=CM;vt.editorAttributes=ZU;vt.lineWrapping=vt.contentAttributes.of({class:"cm-lineWrapping"});vt.announce=gn.define();const Qxe=4096,F6={};class Nb{constructor(e,n,t,r,s,a){this.from=e,this.to=n,this.dir=t,this.isolates=r,this.fresh=s,this.order=a}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let t=[],r=e.length?e[e.length-1].dir:gi.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==r&&!n.touchesRange(a.from,a.to)&&t.push(new Nb(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return t}}function X6(i,e,n){for(let t=i.state.facet(e),r=t.length-1;r>=0;r--){let s=t[r],a=typeof s=="function"?s(i):s;a&&S2(a,n)}return n}const Hxe=St.mac?"mac":St.windows?"win":St.linux?"linux":"key";function Gxe(i,e){const n=i.split(/-(?!$)/);let t=n[n.length-1];t=="Space"&&(t=" ");let r,s,a,l;for(let h=0;h<n.length-1;++h){const u=n[h];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function g1(i,e,n){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),n!==!1&&e.shiftKey&&(i="Shift-"+i),i}const Yxe=Ru.default(vt.domEventHandlers({keydown(i,e){return y9(v9(e.state),i,e,"editor")}})),PM=wt.define({enables:Yxe}),W6=new WeakMap;function v9(i){let e=i.facet(PM),n=W6.get(e);return n||W6.set(e,n=Zxe(e.reduce((t,r)=>t.concat(r),[]))),n}function jxe(i,e,n){return y9(v9(i.state),e,i,n)}let _c=null;const qxe=4e3;function Zxe(i,e=Hxe){let n=Object.create(null),t=Object.create(null),r=(a,l)=>{let h=t[a];if(h==null)t[a]=l;else if(h!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,l,h,u,f)=>{var p,g;let v=n[a]||(n[a]=Object.create(null)),y=l.split(/ (?!$)/).map(S=>Gxe(S,e));for(let S=1;S<y.length;S++){let _=y.slice(0,S).join(" ");r(_,!0),v[_]||(v[_]={preventDefault:!0,stopPropagation:!1,run:[O=>{let k=_c={view:O,prefix:_,scope:a};return setTimeout(()=>{_c==k&&(_c=null)},qxe),!0}]})}let w=y.join(" ");r(w,!1);let x=v[w]||(v[w]={preventDefault:!1,stopPropagation:!1,run:((g=(p=v._any)===null||p===void 0?void 0:p.run)===null||g===void 0?void 0:g.slice())||[]});h&&x.run.push(h),u&&(x.preventDefault=!0),f&&(x.stopPropagation=!0)};for(let a of i){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of l){let f=n[u]||(n[u]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=a;for(let g in f)f[g].run.push(v=>p(v,L2))}let h=a[e]||a.key;if(h)for(let u of l)s(u,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(u,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return n}let L2=null;function y9(i,e,n,t){L2=e;let r=xOe(e),s=yr(r,0),a=vo(s)==r.length&&r!=" ",l="",h=!1,u=!1,f=!1;_c&&_c.view==n&&_c.scope==t&&(l=_c.prefix+" ",o9.indexOf(e.keyCode)<0&&(u=!0,_c=null));let p=new Set,g=x=>{if(x){for(let S of x.run)if(!p.has(S)&&(p.add(S),S(n)))return x.stopPropagation&&(f=!0),!0;x.preventDefault&&(x.stopPropagation&&(f=!0),u=!0)}return!1},v=i[t],y,w;return v&&(g(v[l+g1(r,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(St.windows&&e.ctrlKey&&e.altKey)&&(y=Xc[e.keyCode])&&y!=r?(g(v[l+g1(y,e,!0)])||e.shiftKey&&(w=t0[e.keyCode])!=r&&w!=y&&g(v[l+g1(w,e,!1)]))&&(h=!0):a&&e.shiftKey&&g(v[l+g1(r,e,!0)])&&(h=!0),!h&&g(v._any)&&(h=!0)),u&&(h=!0),h&&f&&e.stopPropagation(),L2=null,h}class Q0{constructor(e,n,t,r,s){this.className=e,this.left=n,this.top=t,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,t){if(t.empty){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return[];let s=b9(e);return[new Q0(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Kxe(e,n,t)}}function b9(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==gi.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function Q6(i,e,n,t){let r=i.coordsAtPos(e,n*2);if(!r)return t;let s=i.dom.getBoundingClientRect(),a=(r.top+r.bottom)/2,l=i.posAtCoords({x:s.left+1,y:a}),h=i.posAtCoords({x:s.right-1,y:a});return l==null||h==null?t:{from:Math.max(t.from,Math.min(l,h)),to:Math.min(t.to,Math.max(l,h))}}function Kxe(i,e,n){if(n.to<=i.viewport.from||n.from>=i.viewport.to)return[];let t=Math.max(n.from,i.viewport.from),r=Math.min(n.to,i.viewport.to),s=i.textDirection==gi.LTR,a=i.contentDOM,l=a.getBoundingClientRect(),h=b9(i),u=a.querySelector(".cm-line"),f=u&&window.getComputedStyle(u),p=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),g=l.right-(f?parseInt(f.paddingRight):0),v=I2(i,t),y=I2(i,r),w=v.type==rs.Text?v:null,x=y.type==rs.Text?y:null;if(w&&(i.lineWrapping||v.widgetLineBreaks)&&(w=Q6(i,t,1,w)),x&&(i.lineWrapping||y.widgetLineBreaks)&&(x=Q6(i,r,-1,x)),w&&x&&w.from==x.from&&w.to==x.to)return _(O(n.from,n.to,w));{let M=w?O(n.from,null,w):k(v,!1),P=x?O(null,n.to,x):k(y,!0),D=[];return(w||v).to<(x||y).from-(w&&x?1:0)||v.widgetLineBreaks>1&&M.bottom+i.defaultLineHeight/2<P.top?D.push(S(p,M.bottom,g,P.top)):M.bottom<P.top&&i.elementAtHeight((M.bottom+P.top)/2).type==rs.Text&&(M.bottom=P.top=(M.bottom+P.top)/2),_(M).concat(D).concat(_(P))}function S(M,P,D,A){return new Q0(e,M-h.left,P-h.top-.01,D-M,A-P+.01)}function _({top:M,bottom:P,horizontal:D}){let A=[];for(let R=0;R<D.length;R+=2)A.push(S(D[R],M,D[R+1],P));return A}function O(M,P,D){let A=1e9,R=-1e9,T=[];function N($,B,U,Y,Z){let ie=i.coordsAtPos($,$==D.to?-2:2),ce=i.coordsAtPos(U,U==D.from?2:-2);!ie||!ce||(A=Math.min(ie.top,ce.top,A),R=Math.max(ie.bottom,ce.bottom,R),Z==gi.LTR?T.push(s&&B?p:ie.left,s&&Y?g:ce.right):T.push(!s&&Y?p:ce.left,!s&&B?g:ie.right))}let L=M??D.from,I=P??D.to;for(let $ of i.visibleRanges)if($.to>L&&$.from<I)for(let B=Math.max($.from,L),U=Math.min($.to,I);;){let Y=i.state.doc.lineAt(B);for(let Z of i.bidiSpans(Y)){let ie=Z.from+Y.from,ce=Z.to+Y.from;if(ie>=U)break;ce>B&&N(Math.max(ie,B),M==null&&ie<=L,Math.min(ce,U),P==null&&ce>=I,Z.dir)}if(B=Y.to+1,B>=U)break}return T.length==0&&N(L,M==null,I,P==null,i.textDirection),{top:A,bottom:R,horizontal:T}}function k(M,P){let D=l.top+(P?M.top:M.bottom);return{top:D,bottom:D,horizontal:[]}}}function Jxe(i,e){return i.constructor==e.constructor&&i.eq(e)}class ewe{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(q1)!=e.state.facet(q1)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,t=e.facet(q1);for(;n<t.length&&t[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,t)=>!Jxe(n,this.drawn[t]))){let n=this.dom.firstChild,t=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[t].constructor&&r.update(n,this.drawn[t])?(n=n.nextSibling,t++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const q1=wt.define();function O9(i){return[Gi.define(e=>new ewe(e,i)),q1.of(i)]}const x9=!St.ios,s0=wt.define({combine(i){return Na(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function twe(i={}){return[s0.of(i),nwe,iwe,rwe,YU.of(!0)]}function w9(i){return i.startState.facet(s0)!=i.state.facet(s0)}const nwe=O9({above:!0,markers(i){let{state:e}=i,n=e.facet(s0),t=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||x9:n.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:Ze.cursor(r.head,r.head>r.anchor?-1:1);for(let h of Q0.forRange(i,a,l))t.push(h)}}return t},update(i,e){i.transactions.some(t=>t.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=w9(i);return n&&H6(i.state,e),i.docChanged||i.selectionSet||n},mount(i,e){H6(e.state,i)},class:"cm-cursorLayer"});function H6(i,e){e.style.animationDuration=i.facet(s0).cursorBlinkRate+"ms"}const iwe=O9({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:Q0.forRange(i,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||w9(i)},class:"cm-selectionLayer"}),B2={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};x9&&(B2[".cm-line"].caretColor=B2[".cm-content"].caretColor="transparent !important");const rwe=Ru.highest(vt.theme(B2)),_9=gn.define({map(i,e){return i==null?null:e.mapPos(i)}}),rg=kr.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((n,t)=>t.is(_9)?t.value:n,i)}}),swe=Gi.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let n=i.state.field(rg);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(rg)!=n||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(rg),n=e!=null&&i.coordsAtPos(e);if(!n)return null;let t=i.scrollDOM.getBoundingClientRect();return{left:n.left-t.left+i.scrollDOM.scrollLeft*i.scaleX,top:n.top-t.top+i.scrollDOM.scrollTop*i.scaleY,height:n.bottom-n.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/n+"px",this.cursor.style.height=i.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(rg)!=i&&this.view.dispatch({effects:_9.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function owe(){return[rg,swe]}function G6(i,e,n,t,r){e.lastIndex=0;for(let s=i.iterRange(n,t),a=n,l;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(a+l.index,l)}function awe(i,e){let n=i.visibleRanges;if(n.length==1&&n[0].from==i.viewport.from&&n[0].to==i.viewport.to)return n;let t=[];for(let{from:r,to:s}of n)r=Math.max(i.state.doc.lineAt(r).from,r-e),s=Math.min(i.state.doc.lineAt(s).to,s+e),t.length&&t[t.length-1].to>=r?t[t.length-1].to=s:t.push({from:r,to:s});return t}class lwe{constructor(e){const{regexp:n,decoration:t,decorate:r,boundary:s,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,h,u,f)=>r(f,u,u+l[0].length,l,h);else if(typeof t=="function")this.addMatch=(l,h,u,f)=>{let p=t(l,h,u);p&&f(u,u+l[0].length,p)};else if(t)this.addMatch=(l,h,u,f)=>f(u,u+l[0].length,t);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let n=new zc,t=n.add.bind(n);for(let{from:r,to:s}of awe(e,this.maxLength))G6(e.state.doc,this.regexp,r,s,(a,l)=>this.addMatch(l,e,a,t));return n.finish()}updateDeco(e,n){let t=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,a,l,h)=>{h>e.view.viewport.from&&l<e.view.viewport.to&&(t=Math.min(l,t),r=Math.max(h,r))}),e.viewportChanged||r-t>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),t,r):n}updateRange(e,n,t,r){for(let s of e.visibleRanges){let a=Math.max(s.from,t),l=Math.min(s.to,r);if(l>a){let h=e.state.doc.lineAt(a),u=h.to<l?e.state.doc.lineAt(l):h,f=Math.max(s.from,h.from),p=Math.min(s.to,u.to);if(this.boundary){for(;a>h.from;a--)if(this.boundary.test(h.text[a-1-h.from])){f=a;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){p=l;break}}let g=[],v,y=(w,x,S)=>g.push(S.range(w,x));if(h==u)for(this.regexp.lastIndex=f-h.from;(v=this.regexp.exec(h.text))&&v.index<p-h.from;)this.addMatch(v,e,v.index+h.from,y);else G6(e.state.doc,this.regexp,f,p,(w,x)=>this.addMatch(x,e,w,y));n=n.update({filterFrom:f,filterTo:p,filter:(w,x)=>w<f||x>p,add:g})}}return n}}const U2=/x/.unicode!=null?"gu":"g",cwe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,U2),hwe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xS=null;function uwe(){var i;if(xS==null&&typeof document<"u"&&document.body){let e=document.body.style;xS=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return xS||!1}const Z1=wt.define({combine(i){let e=Na(i,{render:null,specialChars:cwe,addSpecialChars:null});return(e.replaceTabs=!uwe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,U2)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,U2)),e}});function dwe(i={}){return[Z1.of(i),fwe()]}let Y6=null;function fwe(){return Y6||(Y6=Gi.fromClass(class{constructor(i){this.view=i,this.decorations=Yt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Z1)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new lwe({regexp:i.specialChars,decoration:(e,n,t)=>{let{doc:r}=n.state,s=yr(e[0],0);if(s==9){let a=r.lineAt(t),l=n.state.tabSize,h=Gf(a.text,l,t-a.from);return Yt.replace({widget:new vwe((l-h%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Yt.replace({widget:new gwe(i,s)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(Z1);i.startState.facet(Z1)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const pwe="•";function mwe(i){return i>=32?pwe:i==10?"␤":String.fromCharCode(9216+i)}class gwe extends th{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=mwe(this.code),t=e.state.phrase("Control character")+" "+(hwe[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,t,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=t,s.setAttribute("aria-label",t),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class vwe extends th{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function ywe(){return Owe}const bwe=Yt.line({class:"cm-activeLine"}),Owe=Gi.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,n=[];for(let t of i.state.selection.ranges){let r=i.lineBlockAt(t.head);r.from>e&&(n.push(bwe.range(r.from)),e=r.from)}return Yt.set(n)}},{decorations:i=>i.decorations}),z2=2e3;function xwe(i,e,n){let t=Math.min(e.line,n.line),r=Math.max(e.line,n.line),s=[];if(e.off>z2||n.off>z2||e.col<0||n.col<0){let a=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let h=t;h<=r;h++){let u=i.doc.line(h);u.length<=l&&s.push(Ze.range(u.from+a,u.to+l))}}else{let a=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let h=t;h<=r;h++){let u=i.doc.line(h),f=v2(u.text,a,i.tabSize,!0);if(f<0)s.push(Ze.cursor(u.to));else{let p=v2(u.text,l,i.tabSize);s.push(Ze.range(u.from+f,u.from+p))}}}return s}function wwe(i,e){let n=i.coordsAtPos(i.viewport.from);return n?Math.round(Math.abs((n.left-e)/i.defaultCharacterWidth)):-1}function j6(i,e){let n=i.posAtCoords({x:e.clientX,y:e.clientY},!1),t=i.state.doc.lineAt(n),r=n-t.from,s=r>z2?-1:r==t.length?wwe(i,e.clientX):Gf(t.text,i.state.tabSize,n-t.from);return{line:t.number,col:s,off:r}}function _we(i,e){let n=j6(i,e),t=i.state.selection;return n?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(n.line).from),a=r.state.doc.lineAt(s);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},t=t.map(r.changes)}},get(r,s,a){let l=j6(i,r);if(!l)return t;let h=xwe(i.state,n,l);return h.length?a?Ze.create(h.concat(t.ranges)):Ze.create(h):t}}:null}function Swe(i){let e=n=>n.altKey&&n.button==0;return vt.mouseSelectionStyle.of((n,t)=>e(t)?_we(n,t):null)}const Cwe={Alt:[18,i=>!!i.altKey],Control:[17,i=>!!i.ctrlKey],Shift:[16,i=>!!i.shiftKey],Meta:[91,i=>!!i.metaKey]},kwe={style:"cursor: crosshair"};function Twe(i={}){let[e,n]=Cwe[i.key||"Alt"],t=Gi.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||n(r))},keyup(r){(r.keyCode==e||!n(r))&&this.set(!1)},mousemove(r){this.set(n(r))}}});return[t,vt.contentAttributes.of(r=>{var s;return!((s=r.plugin(t))===null||s===void 0)&&s.isDown?kwe:null})]}const Wm="-10000px";class S9{constructor(e,n,t,r){this.facet=n,this.createTooltipView=t,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(a=>a);let s=null;this.tooltipViews=this.tooltips.map(a=>s=t(a,s))}update(e,n){var t;let r=e.state.facet(this.facet),s=r.filter(h=>h);if(r===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let a=[],l=n?[]:null;for(let h=0;h<s.length;h++){let u=s[h],f=-1;if(u){for(let p=0;p<this.tooltips.length;p++){let g=this.tooltips[p];g&&g.create==u.create&&(f=p)}if(f<0)a[h]=this.createTooltipView(u,h?a[h-1]:null),l&&(l[h]=!!u.above);else{let p=a[h]=this.tooltipViews[f];l&&(l[h]=n[f]),p.update&&p.update(e)}}}for(let h of this.tooltipViews)a.indexOf(h)<0&&(this.removeTooltipView(h),(t=h.destroy)===null||t===void 0||t.call(h));return n&&(l.forEach((h,u)=>n[u]=h),n.length=l.length),this.input=r,this.tooltips=s,this.tooltipViews=a,!0}}function Mwe(i){let{win:e}=i;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const wS=wt.define({combine:i=>{var e,n,t;return{position:St.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=i.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((t=i.find(r=>r.tooltipSpace))===null||t===void 0?void 0:t.tooltipSpace)||Mwe}}}),q6=new WeakMap,AM=Gi.fromClass(class{constructor(i){this.view=i,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(wS);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new S9(i,RM,(n,t)=>this.createTooltip(n,t),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i,this.above);e&&this.observeIntersection();let n=e||i.geometryChanged,t=i.state.facet(wS);if(t.position!=this.position&&!this.madeAbsolute){this.position=t.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(t.parent!=this.parent){this.parent&&this.container.remove(),this.parent=t.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(i,e){let n=i.create(this.view),t=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),i.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Wm,n.dom.style.left="0px",this.container.insertBefore(n.dom,t),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var i,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(i=t.destroy)===null||i===void 0||i.call(t);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect(),e=1,n=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(St.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Wm&&r.style.left=="0px"){let s=r.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,n=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((r,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(wS).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:t}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:n,space:t,scaleX:r,scaleY:s}=i,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let h=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:f}=u,p=i.pos[l],g=i.size[l];if(!p||p.bottom<=Math.max(n.top,t.top)||p.top>=Math.min(n.bottom,t.bottom)||p.right<Math.max(n.left,t.left)-.1||p.left>Math.min(n.right,t.right)+.1){f.style.top=Wm;continue}let v=h.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,y=v?7:0,w=g.right-g.left,x=(e=q6.get(u))!==null&&e!==void 0?e:g.bottom-g.top,S=u.offset||Pwe,_=this.view.textDirection==gi.LTR,O=g.width>t.right-t.left?_?t.left:t.right-g.width:_?Math.max(t.left,Math.min(p.left-(v?14:0)+S.x,t.right-w)):Math.min(Math.max(t.left,p.left-w+(v?14:0)-S.x),t.right-w),k=this.above[l];!h.strictSide&&(k?p.top-(g.bottom-g.top)-S.y<t.top:p.bottom+(g.bottom-g.top)+S.y>t.bottom)&&k==t.bottom-p.bottom>p.top-t.top&&(k=this.above[l]=!k);let M=(k?p.top-t.top:t.bottom-p.bottom)-y;if(M<x&&u.resize!==!1){if(M<this.view.defaultLineHeight){f.style.top=Wm;continue}q6.set(u,x),f.style.height=(x=M)/s+"px"}else f.style.height&&(f.style.height="");let P=k?p.top-x-y-S.y:p.bottom+y+S.y,D=O+w;if(u.overlap!==!0)for(let A of a)A.left<D&&A.right>O&&A.top<P+x&&A.bottom>P&&(P=k?A.top-x-2-y:A.bottom+y+2);if(this.position=="absolute"?(f.style.top=(P-i.parent.top)/s+"px",f.style.left=(O-i.parent.left)/r+"px"):(f.style.top=P/s+"px",f.style.left=O/r+"px"),v){let A=p.left+(_?S.x:-S.x)-(O+14-7);v.style.left=A/r+"px"}u.overlap!==!0&&a.push({left:O,top:P,right:D,bottom:P+x}),f.classList.toggle("cm-tooltip-above",k),f.classList.toggle("cm-tooltip-below",!k),u.positioned&&u.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=Wm}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Ewe=vt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Pwe={x:0,y:0},RM=wt.define({enables:[AM,Ewe]}),$b=wt.define({combine:i=>i.reduce((e,n)=>e.concat(n),[])});class dx{static create(e){return new dx(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new S9(e,$b,(n,t)=>this.createHostedView(n,t),n=>n.dom.remove())}createHostedView(e,n){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(t.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let t of this.manager.tooltipViews){let r=t[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Awe=RM.compute([$b],i=>{let e=i.facet($b);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var t;return(t=n.end)!==null&&t!==void 0?t:n.pos})),create:dx.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Rwe{constructor(e,n,t,r,s){this.view=e,this.source=n,this.field=t,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,t=e.docView.nearest(n.target);if(!t)return;let r,s=1;if(t instanceof kc)r=t.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let l=e.coordsAtPos(r);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(r)).find(f=>f.from<=r&&f.to>=r),u=h&&h.dir==gi.RTL?-1:1;s=n.x<l.left?-u:u}let a=this.source(e,r,s);if(a!=null&&a.then){let l=this.pending={pos:r};a.then(h=>{this.pending==l&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>Ms(e.state,h,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(AM),n=e?e.manager.tooltips.findIndex(t=>t.create==dx.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Iwe(s.dom,e)||this.pending){let{pos:a}=r[0]||this.pending,l=(t=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&t!==void 0?t:a;(a==l?this.view.posAtCoords(this.lastMove)!=a:!Dwe(this.view,a,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=t=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const v1=4;function Iwe(i,e){let{left:n,right:t,top:r,bottom:s}=i.getBoundingClientRect(),a;if(a=i.querySelector(".cm-tooltip-arrow")){let l=a.getBoundingClientRect();r=Math.min(l.top,r),s=Math.max(l.bottom,s)}return e.clientX>=n-v1&&e.clientX<=t+v1&&e.clientY>=r-v1&&e.clientY<=s+v1}function Dwe(i,e,n,t,r,s){let a=i.scrollDOM.getBoundingClientRect(),l=i.documentTop+i.documentPadding.top+i.contentHeight;if(a.left>t||a.right<t||a.top>r||Math.min(a.bottom,l)<r)return!1;let h=i.posAtCoords({x:t,y:r},!1);return h>=e&&h<=n}function Nwe(i,e={}){let n=gn.define(),t=kr.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(a=>!e.hideOn(s,a))),s.docChanged)){let a=[];for(let l of r){let h=s.changes.mapPos(l.pos,-1,es.TrackDel);if(h!=null){let u=Object.assign(Object.create(null),l);u.pos=h,u.end!=null&&(u.end=s.changes.mapPos(u.end)),a.push(u)}}r=a}for(let a of s.effects)a.is(n)&&(r=a.value),a.is($we)&&(r=[]);return r},provide:r=>$b.from(r)});return{active:t,extension:[t,Gi.define(r=>new Rwe(r,i,t,n,e.hoverTime||300)),Awe]}}function C9(i,e){let n=i.plugin(AM);if(!n)return null;let t=n.manager.tooltips.indexOf(e);return t<0?null:n.manager.tooltipViews[t]}const $we=gn.define(),Z6=wt.define({combine(i){let e,n;for(let t of i)e=e||t.topContainer,n=n||t.bottomContainer;return{topContainer:e,bottomContainer:n}}});function o0(i,e){let n=i.plugin(k9),t=n?n.specs.indexOf(e):-1;return t>-1?n.panels[t]:null}const k9=Gi.fromClass(class{constructor(i){this.input=i.state.facet(a0),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(i));let e=i.state.facet(Z6);this.top=new y1(i,!0,e.topContainer),this.bottom=new y1(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(i){let e=i.state.facet(Z6);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new y1(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new y1(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=i.state.facet(a0);if(n!=this.input){let t=n.filter(h=>h),r=[],s=[],a=[],l=[];for(let h of t){let u=this.specs.indexOf(h),f;u<0?(f=h(i.view),l.push(f)):(f=this.panels[u],f.update&&f.update(i)),r.push(f),(f.top?s:a).push(f)}this.specs=t,this.panels=r,this.top.sync(s),this.bottom.sync(a);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let t of this.panels)t.update&&t.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>vt.scrollMargins.of(e=>{let n=e.plugin(i);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class y1{constructor(e,n,t){this.view=e,this.top=n,this.container=t,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=K6(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=K6(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function K6(i){let e=i.nextSibling;return i.remove(),e}const a0=wt.define({enables:k9});class Tl extends bu{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Tl.prototype.elementClass="";Tl.prototype.toDOM=void 0;Tl.prototype.mapMode=es.TrackBefore;Tl.prototype.startSide=Tl.prototype.endSide=-1;Tl.prototype.point=!0;const K1=wt.define(),Vwe=wt.define(),Lwe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>$n.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},wg=wt.define();function Bwe(i){return[T9(),wg.of(Object.assign(Object.assign({},Lwe),i))]}const J6=wt.define({combine:i=>i.some(e=>e)});function T9(i){return[Uwe]}const Uwe=Gi.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(wg).map(e=>new tD(i,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!i.state.facet(J6),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let e=this.prevViewport,n=i.view.viewport,t=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(t<(n.to-n.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(J6)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&this.dom.remove();let n=$n.iter(this.view.state.facet(K1),this.view.viewport.from),t=[],r=this.gutters.map(s=>new zwe(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(t.length&&(t=[]),Array.isArray(s.type)){let a=!0;for(let l of s.type)if(l.type==rs.Text&&a){F2(n,t,l.from);for(let h of r)h.line(this.view,l,t);a=!1}else if(l.widget)for(let h of r)h.widget(this.view,l)}else if(s.type==rs.Text){F2(n,t,s.from);for(let a of r)a.line(this.view,s,t)}else if(s.widget)for(let a of r)a.widget(this.view,s);for(let s of r)s.finish();i&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(i){let e=i.startState.facet(wg),n=i.state.facet(wg),t=i.docChanged||i.heightChanged||i.viewportChanged||!$n.eq(i.startState.facet(K1),i.state.facet(K1),i.view.viewport.from,i.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(i)&&(t=!0);else{t=!0;let r=[];for(let s of n){let a=e.indexOf(s);a<0?r.push(new tD(this.view,s)):(this.gutters[a].update(i),r.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return t}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>vt.scrollMargins.of(e=>{let n=e.plugin(i);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==gi.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function eD(i){return Array.isArray(i)?i:[i]}function F2(i,e,n){for(;i.value&&i.from<=n;)i.from==n&&e.push(i.value),i.next()}class zwe{constructor(e,n,t){this.gutter=e,this.height=t,this.i=0,this.cursor=$n.iter(e.markers,n.from)}addElement(e,n,t){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,a=n.height/e.scaleY;if(this.i==r.elements.length){let l=new M9(e,a,s,t);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,a,s,t);this.height=n.bottom,this.i++}line(e,n,t){let r=[];F2(this.cursor,r,n.from),t.length&&(r=r.concat(t));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let a=this.gutter;r.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let t=this.gutter.config.widgetMarker(e,n.widget,n),r=t?[t]:null;for(let s of e.state.facet(Vwe)){let a=s(e,n.widget,n);a&&(r||(r=[])).push(a)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class tD{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let t in n.domEventHandlers)this.dom.addEventListener(t,r=>{let s=r.target,a;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let h=s.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=r.clientY;let l=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[t](e,l,r)&&r.preventDefault()});this.markers=eD(n.markers(e)),n.initialSpacer&&(this.spacer=new M9(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=eD(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let t=e.view.viewport;return!$n.eq(this.markers,n,t.from,t.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class M9{constructor(e,n,t,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,t,r)}update(e,n,t,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),Fwe(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let t="cm-gutterElement",r=this.dom.firstChild;for(let s=0,a=0;;){let l=a,h=s<n.length?n[s++]:null,u=!1;if(h){let f=h.elementClass;f&&(t+=" "+f);for(let p=a;p<this.markers.length;p++)if(this.markers[p].compare(h)){l=p,u=!0;break}}else l=this.markers.length;for(;a<l;){let f=this.markers[a++];if(f.toDOM){f.destroy(r);let p=r.nextSibling;r.remove(),r=p}}if(!h)break;h.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(h.toDOM(e),r)),u&&a++}this.dom.className=t,this.markers=n}destroy(){this.setMarkers(null,[])}}function Fwe(i,e){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!i[n].compare(e[n]))return!1;return!0}const Xwe=wt.define(),Wwe=wt.define(),Nd=wt.define({combine(i){return Na(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let t=Object.assign({},e);for(let r in n){let s=t[r],a=n[r];t[r]=s?(l,h,u)=>s(l,h,u)||a(l,h,u):a}return t}})}});class _S extends Tl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function SS(i,e){return i.state.facet(Nd).formatNumber(e,i.state)}const Qwe=wg.compute([Nd],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Xwe)},lineMarker(e,n,t){return t.some(r=>r.toDOM)?null:new _S(SS(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,t)=>{for(let r of e.state.facet(Wwe)){let s=r(e,n,t);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Nd)!=e.state.facet(Nd),initialSpacer(e){return new _S(SS(e,nD(e.state.doc.lines)))},updateSpacer(e,n){let t=SS(n.view,nD(n.view.state.doc.lines));return t==e.number?e:new _S(t)},domEventHandlers:i.facet(Nd).domEventHandlers}));function Hwe(i={}){return[Nd.of(i),T9(),Qwe]}function nD(i){let e=9;for(;e<i;)e=e*10+9;return e}const Gwe=new class extends Tl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ywe=K1.compute(["selection"],i=>{let e=[],n=-1;for(let t of i.selection.ranges){let r=i.doc.lineAt(t.head).from;r>n&&(n=r,e.push(Gwe.range(r)))}return $n.of(e)});function jwe(){return Ywe}const E9=1024;let qwe=0;class CS{constructor(e,n){this.from=e,this.to=n}}class bn{constructor(e={}){this.id=qwe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Rs.match(e)),n=>{let t=e(n);return t===void 0?null:[this,t]}}}bn.closedBy=new bn({deserialize:i=>i.split(" ")});bn.openedBy=new bn({deserialize:i=>i.split(" ")});bn.group=new bn({deserialize:i=>i.split(" ")});bn.isolate=new bn({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});bn.contextHash=new bn({perNode:!0});bn.lookAhead=new bn({perNode:!0});bn.mounted=new bn({perNode:!0});class Vb{constructor(e,n,t){this.tree=e,this.overlay=n,this.parser=t}static get(e){return e&&e.props&&e.props[bn.mounted.id]}}const Zwe=Object.create(null);class Rs{constructor(e,n,t,r=0){this.name=e,this.props=n,this.id=t,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Zwe,t=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Rs(e.name||"",n,e.id,t);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(bn.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let t in e)for(let r of t.split(" "))n[r]=e[t];return t=>{for(let r=t.prop(bn.group),s=-1;s<(r?r.length:0);s++){let a=n[s<0?t.name:r[s]];if(a)return a}}}}Rs.none=new Rs("",Object.create(null),0,8);class IM{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let t of this.types){let r=null;for(let s of e){let a=s(t);a&&(r||(r=Object.assign({},t.props)),r[a[0].id]=a[1])}n.push(r?new Rs(t.name,r,t.id,t.flags):t)}return new IM(n)}}const b1=new WeakMap,iD=new WeakMap;var ur;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(ur||(ur={}));class Qi{constructor(e,n,t,r,s){if(this.type=e,this.children=n,this.positions=t,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,l]of s)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=Vb.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let t of this.children){let r=t.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new W2(this.topNode,e)}cursorAt(e,n=0,t=0){let r=b1.get(this)||this.topNode,s=new W2(r);return s.moveTo(e,n),b1.set(this,s._tree),s}get topNode(){return new So(this,0,0,null)}resolve(e,n=0){let t=l0(b1.get(this)||this.topNode,e,n,!1);return b1.set(this,t),t}resolveInner(e,n=0){let t=l0(iD.get(this)||this.topNode,e,n,!0);return iD.set(this,t),t}resolveStack(e,n=0){return e_e(this,e,n)}iterate(e){let{enter:n,leave:t,from:r=0,to:s=this.length}=e,a=e.mode||0,l=(a&ur.IncludeAnonymous)>0;for(let h=this.cursor(a|ur.IncludeAnonymous);;){let u=!1;if(h.from<=s&&h.to>=r&&(!l&&h.type.isAnonymous||n(h)!==!1)){if(h.firstChild())continue;u=!0}for(;u&&t&&(l||!h.type.isAnonymous)&&t(h),!h.nextSibling();){if(!h.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:$M(Rs.none,this.children,this.positions,0,this.children.length,0,this.length,(n,t,r)=>new Qi(this.type,n,t,r,this.propValues),e.makeTree||((n,t,r)=>new Qi(Rs.none,n,t,r)))}static build(e){return t_e(e)}}Qi.empty=new Qi(Rs.none,[],[],0);class DM{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new DM(this.buffer,this.index)}}class Qc{constructor(e,n,t){this.buffer=e,this.length=n,this.set=t}get type(){return Rs.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],t=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,t==e)return s;let a=[];for(;e<t;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,n,t,r,s){let{buffer:a}=this,l=-1;for(let h=e;h!=n&&!(P9(s,r,a[h+1],a[h+2])&&(l=h,t>0));h=a[h+3]);return l}slice(e,n,t){let r=this.buffer,s=new Uint16Array(n-e),a=0;for(let l=e,h=0;l<n;){s[h++]=r[l++],s[h++]=r[l++]-t;let u=s[h++]=r[l++]-t;s[h++]=r[l++]-e,a=Math.max(a,u)}return new Qc(s,a,this.set)}}function P9(i,e,n,t){switch(i){case-2:return n<e;case-1:return t>=e&&n<e;case 0:return n<e&&t>e;case 1:return n<=e&&t>e;case 2:return t>e;case 4:return!0}}function l0(i,e,n,t){for(var r;i.from==i.to||(n<1?i.from>=e:i.from>e)||(n>-1?i.to<=e:i.to<e);){let a=!t&&i instanceof So&&i.index<0?null:i.parent;if(!a)return i;i=a}let s=t?0:ur.IgnoreOverlays;if(t)for(let a=i,l=a.parent;l;a=l,l=a.parent)a instanceof So&&a.index<0&&((r=l.enter(e,n,s))===null||r===void 0?void 0:r.from)!=a.from&&(i=l);for(;;){let a=i.enter(e,n,s);if(!a)return i;i=a}}class A9{cursor(e=0){return new W2(this,e)}getChild(e,n=null,t=null){let r=rD(this,e,n,t);return r.length?r[0]:null}getChildren(e,n=null,t=null){return rD(this,e,n,t)}resolve(e,n=0){return l0(this,e,n,!1)}resolveInner(e,n=0){return l0(this,e,n,!0)}matchContext(e){return X2(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),t=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}get node(){return this}get next(){return this.parent}}class So extends A9{constructor(e,n,t,r){super(),this._tree=e,this.from=n,this.index=t,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,t,r,s=0){for(let a=this;;){for(let{children:l,positions:h}=a._tree,u=n>0?l.length:-1;e!=u;e+=n){let f=l[e],p=h[e]+a.from;if(P9(r,t,p,p+f.length)){if(f instanceof Qc){if(s&ur.ExcludeBuffers)continue;let g=f.findChild(0,f.buffer.length,n,t-p,r);if(g>-1)return new Mc(new Kwe(a,f,e,p),null,g)}else if(s&ur.IncludeAnonymous||!f.type.isAnonymous||NM(f)){let g;if(!(s&ur.IgnoreMounts)&&(g=Vb.get(f))&&!g.overlay)return new So(g.tree,p,e,a);let v=new So(f,p,e,a);return s&ur.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(n<0?f.children.length-1:0,n,t,r)}}}if(s&ur.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+n:e=n<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,t=0){let r;if(!(t&ur.IgnoreOverlays)&&(r=Vb.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:a,to:l}of r.overlay)if((n>0?a<=s:a<s)&&(n<0?l>=s:l>s))return new So(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,t)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function rD(i,e,n,t){let r=i.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let a=!1;!a;)if(a=r.type.is(n),!r.nextSibling())return s}for(;;){if(t!=null&&r.type.is(t))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return t==null?s:[]}}function X2(i,e,n=e.length-1){for(let t=i.parent;n>=0;t=t.parent){if(!t)return!1;if(!t.type.isAnonymous){if(e[n]&&e[n]!=t.name)return!1;n--}}return!0}class Kwe{constructor(e,n,t,r){this.parent=e,this.buffer=n,this.index=t,this.start=r}}class Mc extends A9{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,t){super(),this.context=e,this._parent=n,this.index=t,this.type=e.buffer.set.types[e.buffer.buffer[t]]}child(e,n,t){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,t);return s<0?null:new Mc(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,t=0){if(t&ur.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Mc(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Mc(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Mc(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:t}=this.context,r=this.index+4,s=t.buffer[this.index+3];if(s>r){let a=t.buffer[this.index+1];e.push(t.slice(r,s,a)),n.push(0)}return new Qi(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function R9(i){if(!i.length)return null;let e=0,n=i[0];for(let s=1;s<i.length;s++){let a=i[s];(a.from>n.from||a.to<n.to)&&(n=a,e=s)}let t=n instanceof So&&n.index<0?null:n.parent,r=i.slice();return t?r[e]=t:r.splice(e,1),new Jwe(r,n)}class Jwe{constructor(e,n){this.heads=e,this.node=n}get next(){return R9(this.heads)}}function e_e(i,e,n){let t=i.resolveInner(e,n),r=null;for(let s=t instanceof So?t:t.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(r||(r=[t])).push(a.resolve(e,n)),s=a}else{let a=Vb.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let l=new So(a.tree,a.overlay[0].from+s.from,-1,s);(r||(r=[t])).push(l0(l,e,n,!1))}}return r?R9(r):t}class W2{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof So)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:t,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=t+r.buffer[e+1],this.to=t+r.buffer[e+2],!0}yield(e){return e?e instanceof So?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,t){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,t,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,t);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,t=this.mode){return this.buffer?t&ur.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,t))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ur.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ur.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,t=this.stack.length-1;if(e<0){let r=t<0?0:this.stack[t]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(t<0?n.buffer.length:n.buffer[this.stack[t]+3]))return this.yieldBuf(r)}return t<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,t,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:t}=r)}else({index:n,_parent:t}=this._tree);for(;t;{index:n,_parent:t}=t)if(n>-1)for(let s=n+e,a=e<0?-1:t._tree.children.length;s!=a;s+=e){let l=t._tree.children[s];if(this.mode&ur.IncludeAnonymous||l instanceof Qc||!l.type.isAnonymous||NM(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,t=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==r){if(r==this.index)return a;n=a,t=s+1;break e}r=this.stack[--s]}for(let r=t;r<this.stack.length;r++)n=new Mc(this.buffer,n,this.stack[r]);return this.bufferNode=new Mc(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let t=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){t++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!t)return;this.parent(),t--,r=!0}}}matchContext(e){if(!this.buffer)return X2(this.node,e);let{buffer:n}=this.buffer,{types:t}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return X2(this.node,e,r);let a=t[n.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[r]&&e[r]!=a.name)return!1;r--}}return!0}}function NM(i){return i.children.some(e=>e instanceof Qc||!e.type.isAnonymous||NM(e))}function t_e(i){var e;let{buffer:n,nodeSet:t,maxBufferLength:r=E9,reused:s=[],minRepeatType:a=t.types.length}=i,l=Array.isArray(n)?new DM(n,n.length):n,h=t.types,u=0,f=0;function p(M,P,D,A,R,T){let{id:N,start:L,end:I,size:$}=l,B=f;for(;$<0;)if(l.next(),$==-1){let ce=s[N];D.push(ce),A.push(L-M);return}else if($==-3){u=N;return}else if($==-4){f=N;return}else throw new RangeError(`Unrecognized record size: ${$}`);let U=h[N],Y,Z,ie=L-M;if(I-L<=r&&(Z=x(l.pos-P,R))){let ce=new Uint16Array(Z.size-Z.skip),ge=l.pos-Z.size,Ae=ce.length;for(;l.pos>ge;)Ae=S(Z.start,ce,Ae);Y=new Qc(ce,I-Z.start,t),ie=Z.start-M}else{let ce=l.pos-$;l.next();let ge=[],Ae=[],Se=N>=a?N:-1,he=0,Ce=I;for(;l.pos>ce;)Se>=0&&l.id==Se&&l.size>=0?(l.end<=Ce-r&&(y(ge,Ae,L,he,l.end,Ce,Se,B),he=ge.length,Ce=l.end),l.next()):T>2500?g(L,ce,ge,Ae):p(L,ce,ge,Ae,Se,T+1);if(Se>=0&&he>0&&he<ge.length&&y(ge,Ae,L,he,L,Ce,Se,B),ge.reverse(),Ae.reverse(),Se>-1&&he>0){let pe=v(U);Y=$M(U,ge,Ae,0,ge.length,0,I-L,pe,pe)}else Y=w(U,ge,Ae,I-L,B-I)}D.push(Y),A.push(ie)}function g(M,P,D,A){let R=[],T=0,N=-1;for(;l.pos>P;){let{id:L,start:I,end:$,size:B}=l;if(B>4)l.next();else{if(N>-1&&I<N)break;N<0&&(N=$-r),R.push(L,I,$),T++,l.next()}}if(T){let L=new Uint16Array(T*4),I=R[R.length-2];for(let $=R.length-3,B=0;$>=0;$-=3)L[B++]=R[$],L[B++]=R[$+1]-I,L[B++]=R[$+2]-I,L[B++]=B;D.push(new Qc(L,R[2]-I,t)),A.push(I-M)}}function v(M){return(P,D,A)=>{let R=0,T=P.length-1,N,L;if(T>=0&&(N=P[T])instanceof Qi){if(!T&&N.type==M&&N.length==A)return N;(L=N.prop(bn.lookAhead))&&(R=D[T]+N.length+L)}return w(M,P,D,A,R)}}function y(M,P,D,A,R,T,N,L){let I=[],$=[];for(;M.length>A;)I.push(M.pop()),$.push(P.pop()+D-R);M.push(w(t.types[N],I,$,T-R,L-T)),P.push(R-D)}function w(M,P,D,A,R=0,T){if(u){let N=[bn.contextHash,u];T=T?[N].concat(T):[N]}if(R>25){let N=[bn.lookAhead,R];T=T?[N].concat(T):[N]}return new Qi(M,P,D,A,T)}function x(M,P){let D=l.fork(),A=0,R=0,T=0,N=D.end-r,L={size:0,start:0,skip:0};e:for(let I=D.pos-M;D.pos>I;){let $=D.size;if(D.id==P&&$>=0){L.size=A,L.start=R,L.skip=T,T+=4,A+=4,D.next();continue}let B=D.pos-$;if($<0||B<I||D.start<N)break;let U=D.id>=a?4:0,Y=D.start;for(D.next();D.pos>B;){if(D.size<0)if(D.size==-3)U+=4;else break e;else D.id>=a&&(U+=4);D.next()}R=Y,A+=$,T+=U}return(P<0||A==M)&&(L.size=A,L.start=R,L.skip=T),L.size>4?L:void 0}function S(M,P,D){let{id:A,start:R,end:T,size:N}=l;if(l.next(),N>=0&&A<a){let L=D;if(N>4){let I=l.pos-(N-4);for(;l.pos>I;)D=S(M,P,D)}P[--D]=L,P[--D]=T-M,P[--D]=R-M,P[--D]=A}else N==-3?u=A:N==-4&&(f=A);return D}let _=[],O=[];for(;l.pos>0;)p(i.start||0,i.bufferStart||0,_,O,-1,0);let k=(e=i.length)!==null&&e!==void 0?e:_.length?O[0]+_[0].length:0;return new Qi(h[i.topID],_.reverse(),O.reverse(),k)}const sD=new WeakMap;function J1(i,e){if(!i.isAnonymous||e instanceof Qc||e.type!=i)return 1;let n=sD.get(e);if(n==null){n=1;for(let t of e.children){if(t.type!=i||!(t instanceof Qi)){n=1;break}n+=J1(i,t)}sD.set(e,n)}return n}function $M(i,e,n,t,r,s,a,l,h){let u=0;for(let y=t;y<r;y++)u+=J1(i,e[y]);let f=Math.ceil(u*1.5/8),p=[],g=[];function v(y,w,x,S,_){for(let O=x;O<S;){let k=O,M=w[O],P=J1(i,y[O]);for(O++;O<S;O++){let D=J1(i,y[O]);if(P+D>=f)break;P+=D}if(O==k+1){if(P>f){let D=y[k];v(D.children,D.positions,0,D.children.length,w[k]+_);continue}p.push(y[k])}else{let D=w[O-1]+y[O-1].length-M;p.push($M(i,y,w,k,O,M,D,null,h))}g.push(M+_-s)}}return v(e,n,t,r,0),(l||h)(p,g,a)}class lu{constructor(e,n,t,r,s=!1,a=!1){this.from=e,this.to=n,this.tree=t,this.offset=r,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],t=!1){let r=[new lu(0,e.length,e,0,!1,t)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,t=128){if(!n.length)return e;let r=[],s=1,a=e.length?e[0]:null;for(let l=0,h=0,u=0;;l++){let f=l<n.length?n[l]:null,p=f?f.fromA:1e9;if(p-h>=t)for(;a&&a.from<p;){let g=a;if(h>=g.from||p<=g.to||u){let v=Math.max(g.from,h)-u,y=Math.min(g.to,p)-u;g=v>=y?null:new lu(v,y,g.tree,g.offset+u,l>0,!!f)}if(g&&r.push(g),a.to>p)break;a=s<e.length?e[s++]:null}if(!f)break;h=f.toA,u=f.toA-f.toB}return r}}class I9{startParse(e,n,t){return typeof e=="string"&&(e=new n_e(e)),t=t?t.length?t.map(r=>new CS(r.from,r.to)):[new CS(0,0)]:[new CS(0,e.length)],this.createParse(e,n||[],t)}parse(e,n,t){let r=this.startParse(e,n,t);for(;;){let s=r.advance();if(s)return s}}}class n_e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new bn({perNode:!0});let i_e=0;class mo{constructor(e,n,t,r){this.name=e,this.set=n,this.base=t,this.modified=r,this.id=i_e++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let t=typeof e=="string"?e:"?";if(e instanceof mo&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new mo(t,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Lb(e);return t=>t.modified.indexOf(n)>-1?t:Lb.get(t.base||t,t.modified.concat(n).sort((r,s)=>r.id-s.id))}}let r_e=0;class Lb{constructor(e){this.name=e,this.instances=[],this.id=r_e++}static get(e,n){if(!n.length)return e;let t=n[0].instances.find(l=>l.base==e&&s_e(n,l.modified));if(t)return t;let r=[],s=new mo(e.name,r,e,n);for(let l of n)l.instances.push(s);let a=o_e(n);for(let l of e.set)if(!l.modified.length)for(let h of a)r.push(Lb.get(l,h));return s}}function s_e(i,e){return i.length==e.length&&i.every((n,t)=>n==e[t])}function o_e(i){let e=[[]];for(let n=0;n<i.length;n++)for(let t=0,r=e.length;t<r;t++)e.push(e[t].concat(i[n]));return e.sort((n,t)=>t.length-n.length)}function D9(i){let e=Object.create(null);for(let n in i){let t=i[n];Array.isArray(t)||(t=[t]);for(let r of n.split(" "))if(r){let s=[],a=2,l=r;for(let p=0;;){if(l=="..."&&p>0&&p+3==r.length){a=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!g)throw new RangeError("Invalid path: "+r);if(s.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),p+=g[0].length,p==r.length)break;let v=r[p++];if(p==r.length&&v=="!"){a=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);l=r.slice(p)}let h=s.length-1,u=s[h];if(!u)throw new RangeError("Invalid path: "+r);let f=new Bb(t,a,h>0?s.slice(0,h):null);e[u]=f.sort(e[u])}}return N9.add(e)}const N9=new bn;class Bb{constructor(e,n,t,r){this.tags=e,this.mode=n,this.context=t,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Bb.empty=new Bb([],2,null);function $9(i,e){let n=Object.create(null);for(let s of i)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let a of s.tag)n[a.id]=s.class;let{scope:t,all:r=null}=e||{};return{style:s=>{let a=r;for(let l of s)for(let h of l.set){let u=n[h.id];if(u){a=a?a+" "+u:u;break}}return a},scope:t}}function a_e(i,e){let n=null;for(let t of i){let r=t.style(e);r&&(n=n?n+" "+r:r)}return n}function l_e(i,e,n,t=0,r=i.length){let s=new c_e(t,Array.isArray(e)?e:[e],n);s.highlightRange(i.cursor(),t,r,"",s.highlighters),s.flush(r)}class c_e{constructor(e,n,t){this.at=e,this.highlighters=n,this.span=t,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,t,r,s){let{type:a,from:l,to:h}=e;if(l>=t||h<=n)return;a.isTop&&(s=this.highlighters.filter(v=>!v.scope||v.scope(a)));let u=r,f=h_e(e)||Bb.empty,p=a_e(s,f.tags);if(p&&(u&&(u+=" "),u+=p,f.mode==1&&(r+=(r?" ":"")+p)),this.startSpan(Math.max(n,l),u),f.opaque)return;let g=e.tree&&e.tree.prop(bn.mounted);if(g&&g.overlay){let v=e.node.enter(g.overlay[0].from+l,1),y=this.highlighters.filter(x=>!x.scope||x.scope(g.tree.type)),w=e.firstChild();for(let x=0,S=l;;x++){let _=x<g.overlay.length?g.overlay[x]:null,O=_?_.from+l:h,k=Math.max(n,S),M=Math.min(t,O);if(k<M&&w)for(;e.from<M&&(this.highlightRange(e,k,M,r,s),this.startSpan(Math.min(M,e.to),u),!(e.to>=O||!e.nextSibling())););if(!_||O>t)break;S=_.to+l,S>n&&(this.highlightRange(v.cursor(),Math.max(n,_.from+l),Math.min(t,S),"",y),this.startSpan(Math.min(t,S),u))}w&&e.parent()}else if(e.firstChild()){g&&(r="");do if(!(e.to<=n)){if(e.from>=t)break;this.highlightRange(e,n,t,r,s),this.startSpan(Math.min(t,e.to),u)}while(e.nextSibling());e.parent()}}}function h_e(i){let e=i.type.prop(N9);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const ht=mo.define,O1=ht(),yc=ht(),oD=ht(yc),aD=ht(yc),bc=ht(),x1=ht(bc),kS=ht(bc),da=ht(),Nh=ht(da),ha=ht(),ua=ht(),Q2=ht(),Qm=ht(Q2),w1=ht(),We={comment:O1,lineComment:ht(O1),blockComment:ht(O1),docComment:ht(O1),name:yc,variableName:ht(yc),typeName:oD,tagName:ht(oD),propertyName:aD,attributeName:ht(aD),className:ht(yc),labelName:ht(yc),namespace:ht(yc),macroName:ht(yc),literal:bc,string:x1,docString:ht(x1),character:ht(x1),attributeValue:ht(x1),number:kS,integer:ht(kS),float:ht(kS),bool:ht(bc),regexp:ht(bc),escape:ht(bc),color:ht(bc),url:ht(bc),keyword:ha,self:ht(ha),null:ht(ha),atom:ht(ha),unit:ht(ha),modifier:ht(ha),operatorKeyword:ht(ha),controlKeyword:ht(ha),definitionKeyword:ht(ha),moduleKeyword:ht(ha),operator:ua,derefOperator:ht(ua),arithmeticOperator:ht(ua),logicOperator:ht(ua),bitwiseOperator:ht(ua),compareOperator:ht(ua),updateOperator:ht(ua),definitionOperator:ht(ua),typeOperator:ht(ua),controlOperator:ht(ua),punctuation:Q2,separator:ht(Q2),bracket:Qm,angleBracket:ht(Qm),squareBracket:ht(Qm),paren:ht(Qm),brace:ht(Qm),content:da,heading:Nh,heading1:ht(Nh),heading2:ht(Nh),heading3:ht(Nh),heading4:ht(Nh),heading5:ht(Nh),heading6:ht(Nh),contentSeparator:ht(da),list:ht(da),quote:ht(da),emphasis:ht(da),strong:ht(da),link:ht(da),monospace:ht(da),strikethrough:ht(da),inserted:ht(),deleted:ht(),changed:ht(),invalid:ht(),meta:w1,documentMeta:ht(w1),annotation:ht(w1),processingInstruction:ht(w1),definition:mo.defineModifier("definition"),constant:mo.defineModifier("constant"),function:mo.defineModifier("function"),standard:mo.defineModifier("standard"),local:mo.defineModifier("local"),special:mo.defineModifier("special")};for(let i in We){let e=We[i];e instanceof mo&&(e.name=i)}$9([{tag:We.link,class:"tok-link"},{tag:We.heading,class:"tok-heading"},{tag:We.emphasis,class:"tok-emphasis"},{tag:We.strong,class:"tok-strong"},{tag:We.keyword,class:"tok-keyword"},{tag:We.atom,class:"tok-atom"},{tag:We.bool,class:"tok-bool"},{tag:We.url,class:"tok-url"},{tag:We.labelName,class:"tok-labelName"},{tag:We.inserted,class:"tok-inserted"},{tag:We.deleted,class:"tok-deleted"},{tag:We.literal,class:"tok-literal"},{tag:We.string,class:"tok-string"},{tag:We.number,class:"tok-number"},{tag:[We.regexp,We.escape,We.special(We.string)],class:"tok-string2"},{tag:We.variableName,class:"tok-variableName"},{tag:We.local(We.variableName),class:"tok-variableName tok-local"},{tag:We.definition(We.variableName),class:"tok-variableName tok-definition"},{tag:We.special(We.variableName),class:"tok-variableName2"},{tag:We.definition(We.propertyName),class:"tok-propertyName tok-definition"},{tag:We.typeName,class:"tok-typeName"},{tag:We.namespace,class:"tok-namespace"},{tag:We.className,class:"tok-className"},{tag:We.macroName,class:"tok-macroName"},{tag:We.propertyName,class:"tok-propertyName"},{tag:We.operator,class:"tok-operator"},{tag:We.comment,class:"tok-comment"},{tag:We.meta,class:"tok-meta"},{tag:We.invalid,class:"tok-invalid"},{tag:We.punctuation,class:"tok-punctuation"}]);var TS;const $d=new bn;function u_e(i){return wt.define({combine:i?e=>e.concat(i):void 0})}const d_e=new bn;class Yo{constructor(e,n,t=[],r=""){this.data=e,this.name=r,Ln.prototype.hasOwnProperty("tree")||Object.defineProperty(Ln.prototype,"tree",{get(){return Lr(this)}}),this.parser=n,this.extension=[Hc.of(this),Ln.languageData.of((s,a,l)=>{let h=lD(s,a,l),u=h.type.prop($d);if(!u)return[];let f=s.facet(u),p=h.type.prop(d_e);if(p){let g=h.resolve(a-h.from,l);for(let v of p)if(v.test(g,s)){let y=s.facet(v.facet);return v.type=="replace"?y:y.concat(f)}}return f})].concat(t)}isActiveAt(e,n,t=-1){return lD(e,n,t).type.prop($d)==this.data}findRegions(e){let n=e.facet(Hc);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let t=[],r=(s,a)=>{if(s.prop($d)==this.data){t.push({from:a,to:a+s.length});return}let l=s.prop(bn.mounted);if(l){if(l.tree.prop($d)==this.data){if(l.overlay)for(let h of l.overlay)t.push({from:h.from+a,to:h.to+a});else t.push({from:a,to:a+s.length});return}else if(l.overlay){let h=t.length;if(r(l.tree,l.overlay[0].from+a),t.length>h)return}}for(let h=0;h<s.children.length;h++){let u=s.children[h];u instanceof Qi&&r(u,s.positions[h]+a)}};return r(Lr(e),0),t}get allowsNesting(){return!0}}Yo.setState=gn.define();function lD(i,e,n){let t=i.facet(Hc),r=Lr(i).topNode;if(!t||t.allowsNesting)for(let s=r;s;s=s.enter(e,n,ur.ExcludeBuffers))s.type.isTop&&(r=s);return r}class Ub extends Yo{constructor(e,n,t){super(e,n,[],t),this.parser=n}static define(e){let n=u_e(e.languageData);return new Ub(n,e.parser.configure({props:[$d.add(t=>t.isTop?n:void 0)]}),e.name)}configure(e,n){return new Ub(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Lr(i){let e=i.field(Yo.state,!1);return e?e.tree:Qi.empty}class f_e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let t=this.cursorPos-this.string.length;return e<t||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-t,n-t)}}let Hm=null;class zb{constructor(e,n,t=[],r,s,a,l,h){this.parser=e,this.state=n,this.fragments=t,this.tree=r,this.treeLen=s,this.viewport=a,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,n,t){return new zb(e,n,[],Qi.empty,0,t,[],null)}startParse(){return this.parser.startParse(new f_e(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Qi.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var t;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(lu.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(t=this.parse.stoppedAt)!==null&&t!==void 0?t:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(lu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Hm;Hm=this;try{return e()}finally{Hm=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cD(e,n.from,n.to);return e}changes(e,n){let{fragments:t,tree:r,treeLen:s,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((u,f,p,g)=>h.push({fromA:u,toA:f,fromB:p,toB:g})),t=lu.applyChanges(t,h),r=Qi.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let f=e.mapPos(u.from,1),p=e.mapPos(u.to,-1);f<p&&l.push({from:f,to:p})}}}return new zb(this.parser,n,t,r,s,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:r,to:s}=this.skipped[t];r<e.to&&s>e.from&&(this.fragments=cD(this.fragments,r,s),this.skipped.splice(t--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends I9{createParse(n,t,r){let s=r[0].from,a=r[r.length-1].to;return{parsedPos:s,advance(){let h=Hm;if(h){for(let u of r)h.tempSkipped.push(u);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new Qi(Rs.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Hm}}function cD(i,e,n){return lu.applyChanges(i,[{fromA:e,toA:n,fromB:e,toB:n}])}class Rf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),t=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,t)||n.takeTree(),new Rf(n)}static init(e){let n=Math.min(3e3,e.doc.length),t=zb.create(e.facet(Hc).parser,e,{from:0,to:n});return t.work(20,n)||t.takeTree(),new Rf(t)}}Yo.state=kr.define({create:Rf.init,update(i,e){for(let n of e.effects)if(n.is(Yo.setState))return n.value;return e.startState.facet(Hc)!=e.state.facet(Hc)?Rf.init(e.state):i.apply(e)}});let V9=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(V9=i=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const MS=typeof navigator<"u"&&(!((TS=navigator.scheduling)===null||TS===void 0)&&TS.isInputPending)?()=>navigator.scheduling.isInputPending():null,p_e=Gi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Yo.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Yo.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=V9(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:t,viewport:{to:r}}=this.view,s=t.field(Yo.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!MS?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&t.doc.length>r+1e3,h=s.context.work(()=>MS&&MS()||Date.now()>a,r+(l?0:1e5));this.chunkBudget-=Date.now()-n,(h||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Yo.setState.of(new Rf(s.context))})),this.chunkBudget>0&&!(h&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Ms(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Hc=wt.define({combine(i){return i.length?i[0]:null},enables:i=>[Yo.state,p_e,vt.contentAttributes.compute([i],e=>{let n=e.facet(i);return n&&n.name?{"data-language":n.name}:{}})]});class m_e{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const g_e=wt.define(),VM=wt.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Fb(i){let e=i.facet(VM);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function c0(i,e){let n="",t=i.tabSize,r=i.facet(VM)[0];if(r=="	"){for(;e>=t;)n+="	",e-=t;r=" "}for(let s=0;s<e;s++)n+=r;return n}function LM(i,e){i instanceof Ln&&(i=new fx(i));for(let t of i.state.facet(g_e)){let r=t(i,e);if(r!==void 0)return r}let n=Lr(i.state);return n.length>=e?v_e(i,n,e):null}class fx{constructor(e,n={}){this.state=e,this.options=n,this.unit=Fb(e)}lineAt(e,n=1){let t=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=t.from&&r<=t.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:t.text.slice(r-t.from),from:r}:{text:t.text.slice(0,r-t.from),from:t.from}:t}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:t,from:r}=this.lineAt(e,n);return t.slice(e-r,Math.min(t.length,e+100-r))}column(e,n=1){let{text:t,from:r}=this.lineAt(e,n),s=this.countColumn(t,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(s+=a-this.countColumn(t,t.search(/\S|$/))),s}countColumn(e,n=e.length){return Gf(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:t,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let a=s(r);if(a>-1)return a}return this.countColumn(t,t.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const L9=new bn;function v_e(i,e,n){let t=e.resolveStack(n),r=t.node.enterUnfinishedNodesBefore(n);if(r!=t.node){let s=[];for(let a=r;a!=t.node;a=a.parent)s.push(a);for(let a=s.length-1;a>=0;a--)t={node:s[a],next:t}}return B9(t,i,n)}function B9(i,e,n){for(let t=i;t;t=t.next){let r=b_e(t.node);if(r)return r(BM.create(e,n,t))}return 0}function y_e(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function b_e(i){let e=i.type.prop(L9);if(e)return e;let n=i.firstChild,t;if(n&&(t=n.type.prop(bn.closedBy))){let r=i.lastChild,s=r&&t.indexOf(r.name)>-1;return a=>U9(a,!0,1,void 0,s&&!y_e(a)?r.from:void 0)}return i.parent==null?O_e:null}function O_e(){return 0}class BM extends fx{constructor(e,n,t){super(e.state,e.options),this.base=e,this.pos=n,this.context=t}get node(){return this.context.node}static create(e,n,t){return new BM(e,n,t)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let t=e.resolve(n.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(x_e(t,e))break;n=this.state.doc.lineAt(t.from)}return this.lineIndent(n.from)}continue(){return B9(this.context.next,this.base,this.pos)}}function x_e(i,e){for(let n=e;n;n=n.parent)if(i==n)return!0;return!1}function w_e(i){let e=i.node,n=e.childAfter(e.from),t=e.lastChild;if(!n)return null;let r=i.options.simulateBreak,s=i.state.doc.lineAt(n.from),a=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=n.to;;){let h=e.childAfter(l);if(!h||h==t)return null;if(!h.type.isSkipped)return h.from<a?n:null;l=h.to}}function __e({closing:i,align:e=!0,units:n=1}){return t=>U9(t,e,n,i)}function U9(i,e,n,t,r){let s=i.textAfter,a=s.match(/^\s*/)[0].length,l=t&&s.slice(a,a+t.length)==t||r==i.pos+a,h=e?w_e(i):null;return h?l?i.column(h.from):i.column(h.to):i.baseIndent+(l?0:i.unit*n)}const S_e=i=>i.baseIndent;function ES({except:i,units:e=1}={}){return n=>{let t=i&&i.test(n.textAfter);return n.baseIndent+(t?0:e*n.unit)}}const C_e=200;function k_e(){return Ln.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let n=i.newDoc,{head:t}=i.newSelection.main,r=n.lineAt(t);if(t>r.from+C_e)return i;let s=n.sliceString(r.from,t);if(!e.some(u=>u.test(s)))return i;let{state:a}=i,l=-1,h=[];for(let{head:u}of a.selection.ranges){let f=a.doc.lineAt(u);if(f.from==l)continue;l=f.from;let p=LM(a,f.from);if(p==null)continue;let g=/^\s*/.exec(f.text)[0],v=c0(a,p);g!=v&&h.push({from:f.from,to:f.from+g.length,insert:v})}return h.length?[i,{changes:h,sequential:!0}]:i})}const T_e=wt.define(),z9=new bn;function M_e(i){let e=i.firstChild,n=i.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?i.to:n.from}:null}function E_e(i,e,n){let t=Lr(i);if(t.length<n)return null;let r=t.resolveStack(n,1),s=null;for(let a=r;a;a=a.next){let l=a.node;if(l.to<=n||l.from>n)continue;if(s&&l.from<e)break;let h=l.type.prop(z9);if(h&&(l.to<t.length-50||t.length==i.doc.length||!P_e(l))){let u=h(l,i);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function P_e(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function Xb(i,e,n){for(let t of i.facet(T_e)){let r=t(i,e,n);if(r)return r}return E_e(i,e,n)}function F9(i,e){let n=e.mapPos(i.from,1),t=e.mapPos(i.to,-1);return n>=t?void 0:{from:n,to:t}}const px=gn.define({map:F9}),H0=gn.define({map:F9});function X9(i){let e=[];for(let{head:n}of i.state.selection.ranges)e.some(t=>t.from<=n&&t.to>=n)||e.push(i.lineBlockAt(n));return e}const _u=kr.define({create(){return Yt.none},update(i,e){i=i.map(e.changes);for(let n of e.effects)if(n.is(px)&&!A_e(i,n.value.from,n.value.to)){let{preparePlaceholder:t}=e.state.facet(H9),r=t?Yt.replace({widget:new L_e(t(e.state,n.value))}):hD;i=i.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(H0)&&(i=i.update({filter:(t,r)=>n.value.from!=t||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:t}=e.selection.main;i.between(t,t,(r,s)=>{r<t&&s>t&&(n=!0)}),n&&(i=i.update({filterFrom:t,filterTo:t,filter:(r,s)=>s<=t||r>=t}))}return i},provide:i=>vt.decorations.from(i),toJSON(i,e){let n=[];return i.between(0,e.doc.length,(t,r)=>{n.push(t,r)}),n},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<i.length;){let t=i[n++],r=i[n++];if(typeof t!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(hD.range(t,r))}return Yt.set(e,!0)}});function Wb(i,e,n){var t;let r=null;return(t=i.field(_u,!1))===null||t===void 0||t.between(e,n,(s,a)=>{(!r||r.from>s)&&(r={from:s,to:a})}),r}function A_e(i,e,n){let t=!1;return i.between(e,e,(r,s)=>{r==e&&s==n&&(t=!0)}),t}function W9(i,e){return i.field(_u,!1)?e:e.concat(gn.appendConfig.of(G9()))}const R_e=i=>{for(let e of X9(i)){let n=Xb(i.state,e.from,e.to);if(n)return i.dispatch({effects:W9(i.state,[px.of(n),Q9(i,n)])}),!0}return!1},I_e=i=>{if(!i.state.field(_u,!1))return!1;let e=[];for(let n of X9(i)){let t=Wb(i.state,n.from,n.to);t&&e.push(H0.of(t),Q9(i,t,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function Q9(i,e,n=!0){let t=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return vt.announce.of(`${i.state.phrase(n?"Folded lines":"Unfolded lines")} ${t} ${i.state.phrase("to")} ${r}.`)}const D_e=i=>{let{state:e}=i,n=[];for(let t=0;t<e.doc.length;){let r=i.lineBlockAt(t),s=Xb(e,r.from,r.to);s&&n.push(px.of(s)),t=(s?i.lineBlockAt(s.to):r).to+1}return n.length&&i.dispatch({effects:W9(i.state,n)}),!!n.length},N_e=i=>{let e=i.state.field(_u,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,i.state.doc.length,(t,r)=>{n.push(H0.of({from:t,to:r}))}),i.dispatch({effects:n}),!0},$_e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:R_e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:I_e},{key:"Ctrl-Alt-[",run:D_e},{key:"Ctrl-Alt-]",run:N_e}],V_e={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},H9=wt.define({combine(i){return Na(i,V_e)}});function G9(i){return[_u,z_e]}function Y9(i,e){let{state:n}=i,t=n.facet(H9),r=a=>{let l=i.lineBlockAt(i.posAtDOM(a.target)),h=Wb(i.state,l.from,l.to);h&&i.dispatch({effects:H0.of(h)}),a.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(i,r,e);let s=document.createElement("span");return s.textContent=t.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const hD=Yt.replace({widget:new class extends th{toDOM(i){return Y9(i,null)}}});class L_e extends th{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Y9(e,this.value)}}const B_e={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class PS extends Tl{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function U_e(i={}){let e=Object.assign(Object.assign({},B_e),i),n=new PS(e,!0),t=new PS(e,!1),r=Gi.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Hc)!=a.state.facet(Hc)||a.startState.field(_u,!1)!=a.state.field(_u,!1)||Lr(a.startState)!=Lr(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new zc;for(let h of a.viewportLineBlocks){let u=Wb(a.state,h.from,h.to)?t:Xb(a.state,h.from,h.to)?n:null;u&&l.add(h.from,h.from,u)}return l.finish()}}),{domEventHandlers:s}=e;return[r,Bwe({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(r))===null||l===void 0?void 0:l.markers)||$n.empty},initialSpacer(){return new PS(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(a,l,h)=>{if(s.click&&s.click(a,l,h))return!0;let u=Wb(a.state,l.from,l.to);if(u)return a.dispatch({effects:H0.of(u)}),!0;let f=Xb(a.state,l.from,l.to);return f?(a.dispatch({effects:px.of(f)}),!0):!1}})}),G9()]}const z_e=vt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class mx{constructor(e,n){this.specs=e;let t;function r(l){let h=Fc.newName();return(t||(t=Object.create(null)))["."+h]=l,h}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,a=n.scope;this.scope=a instanceof Yo?l=>l.prop($d)==a.data:a?l=>l==a:void 0,this.style=$9(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=t?new Fc(t):null,this.themeType=n.themeType}static define(e,n){return new mx(e,n||{})}}const H2=wt.define(),j9=wt.define({combine(i){return i.length?[i[0]]:null}});function AS(i){let e=i.facet(H2);return e.length?e:i.facet(j9)}function F_e(i,e){let n=[W_e],t;return i instanceof mx&&(i.module&&n.push(vt.styleModule.of(i.module)),t=i.themeType),e!=null&&e.fallback?n.push(j9.of(i)):t?n.push(H2.computeN([vt.darkTheme],r=>r.facet(vt.darkTheme)==(t=="dark")?[i]:[])):n.push(H2.of(i)),n}class X_e{constructor(e){this.markCache=Object.create(null),this.tree=Lr(e.state),this.decorations=this.buildDeco(e,AS(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Lr(e.state),t=AS(e.state),r=t!=AS(e.startState),{viewport:s}=e.view,a=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&a>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,t),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Yt.none;let t=new zc;for(let{from:r,to:s}of e.visibleRanges)l_e(this.tree,n,(a,l,h)=>{t.add(a,l,this.markCache[h]||(this.markCache[h]=Yt.mark({class:h})))},r,s);return t.finish()}}const W_e=Ru.high(Gi.fromClass(X_e,{decorations:i=>i.decorations})),Q_e=mx.define([{tag:We.meta,color:"#404740"},{tag:We.link,textDecoration:"underline"},{tag:We.heading,textDecoration:"underline",fontWeight:"bold"},{tag:We.emphasis,fontStyle:"italic"},{tag:We.strong,fontWeight:"bold"},{tag:We.strikethrough,textDecoration:"line-through"},{tag:We.keyword,color:"#708"},{tag:[We.atom,We.bool,We.url,We.contentSeparator,We.labelName],color:"#219"},{tag:[We.literal,We.inserted],color:"#164"},{tag:[We.string,We.deleted],color:"#a11"},{tag:[We.regexp,We.escape,We.special(We.string)],color:"#e40"},{tag:We.definition(We.variableName),color:"#00f"},{tag:We.local(We.variableName),color:"#30a"},{tag:[We.typeName,We.namespace],color:"#085"},{tag:We.className,color:"#167"},{tag:[We.special(We.variableName),We.macroName],color:"#256"},{tag:We.definition(We.propertyName),color:"#00c"},{tag:We.comment,color:"#940"},{tag:We.invalid,color:"#f00"}]),H_e=vt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),q9=1e4,Z9="()[]{}",K9=wt.define({combine(i){return Na(i,{afterCursor:!0,brackets:Z9,maxScanDistance:q9,renderMatch:j_e})}}),G_e=Yt.mark({class:"cm-matchingBracket"}),Y_e=Yt.mark({class:"cm-nonmatchingBracket"});function j_e(i){let e=[],n=i.matched?G_e:Y_e;return e.push(n.range(i.start.from,i.start.to)),i.end&&e.push(n.range(i.end.from,i.end.to)),e}const q_e=kr.define({create(){return Yt.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let n=[],t=e.state.facet(K9);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=xa(e.state,r.head,-1,t)||r.head>0&&xa(e.state,r.head-1,1,t)||t.afterCursor&&(xa(e.state,r.head,1,t)||r.head<e.state.doc.length&&xa(e.state,r.head+1,-1,t));s&&(n=n.concat(t.renderMatch(s,e.state)))}return Yt.set(n,!0)},provide:i=>vt.decorations.from(i)}),Z_e=[q_e,H_e];function K_e(i={}){return[K9.of(i),Z_e]}const J_e=new bn;function G2(i,e,n){let t=i.prop(e<0?bn.openedBy:bn.closedBy);if(t)return t;if(i.name.length==1){let r=n.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Y2(i){let e=i.type.prop(J_e);return e?e(i.node):i}function xa(i,e,n,t={}){let r=t.maxScanDistance||q9,s=t.brackets||Z9,a=Lr(i),l=a.resolveInner(e,n);for(let h=l;h;h=h.parent){let u=G2(h.type,n,s);if(u&&h.from<h.to){let f=Y2(h);if(f&&(n>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return eSe(i,e,n,h,f,u,s)}}return tSe(i,e,n,a,l.type,r,s)}function eSe(i,e,n,t,r,s,a){let l=t.parent,h={from:r.from,to:r.to},u=0,f=l==null?void 0:l.cursor();if(f&&(n<0?f.childBefore(t.from):f.childAfter(t.to)))do if(n<0?f.to<=t.from:f.from>=t.to){if(u==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let p=Y2(f);return{start:h,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(G2(f.type,n,a))u++;else if(G2(f.type,-n,a)){if(u==0){let p=Y2(f);return{start:h,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}u--}}while(n<0?f.prevSibling():f.nextSibling());return{start:h,matched:!1}}function tSe(i,e,n,t,r,s,a){let l=n<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),h=a.indexOf(l);if(h<0||h%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},f=i.doc.iterRange(e,n>0?i.doc.length:0),p=0;for(let g=0;!f.next().done&&g<=s;){let v=f.value;n<0&&(g+=v.length);let y=e+g*n;for(let w=n>0?0:v.length-1,x=n>0?v.length:-1;w!=x;w+=n){let S=a.indexOf(v[w]);if(!(S<0||t.resolveInner(y+w,1).type!=r))if(S%2==0==n>0)p++;else{if(p==1)return{start:u,end:{from:y+w,to:y+w+1},matched:S>>1==h>>1};p--}}n>0&&(g+=v.length)}return f.done?{start:u,matched:!1}:null}const nSe=Object.create(null),uD=[Rs.none],dD=[],fD=Object.create(null),iSe=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])iSe[i]=rSe(nSe,e);function RS(i,e){dD.indexOf(i)>-1||(dD.push(i),console.warn(e))}function rSe(i,e){let n=[];for(let l of e.split(" ")){let h=[];for(let u of l.split(".")){let f=i[u]||We[u];f?typeof f=="function"?h.length?h=h.map(f):RS(u,`Modifier ${u} used at start of tag`):h.length?RS(u,`Tag ${u} used as modifier`):h=Array.isArray(f)?f:[f]:RS(u,`Unknown highlighting tag ${u}`)}for(let u of h)n.push(u)}if(!n.length)return 0;let t=e.replace(/ /g,"_"),r=t+" "+n.map(l=>l.id),s=fD[r];if(s)return s.id;let a=fD[r]=Rs.define({id:uD.length,name:t,props:[D9({[t]:n})]});return uD.push(a),a.id}gi.RTL,gi.LTR;const sSe=i=>{let{state:e}=i,n=e.doc.lineAt(e.selection.main.from),t=zM(i.state,n.from);return t.line?oSe(i):t.block?lSe(i):!1};function UM(i,e){return({state:n,dispatch:t})=>{if(n.readOnly)return!1;let r=i(e,n);return r?(t(n.update(r)),!0):!1}}const oSe=UM(uSe,0),aSe=UM(J9,0),lSe=UM((i,e)=>J9(i,e,hSe(e)),0);function zM(i,e){let n=i.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Gm=50;function cSe(i,{open:e,close:n},t,r){let s=i.sliceDoc(t-Gm,t),a=i.sliceDoc(r,r+Gm),l=/\s*$/.exec(s)[0].length,h=/^\s*/.exec(a)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&a.slice(h,h+n.length)==n)return{open:{pos:t-l,margin:l&&1},close:{pos:r+h,margin:h&&1}};let f,p;r-t<=2*Gm?f=p=i.sliceDoc(t,r):(f=i.sliceDoc(t,t+Gm),p=i.sliceDoc(r-Gm,r));let g=/^\s*/.exec(f)[0].length,v=/\s*$/.exec(p)[0].length,y=p.length-v-n.length;return f.slice(g,g+e.length)==e&&p.slice(y,y+n.length)==n?{open:{pos:t+g+e.length,margin:/\s/.test(f.charAt(g+e.length))?1:0},close:{pos:r-v-n.length,margin:/\s/.test(p.charAt(y-1))?1:0}}:null}function hSe(i){let e=[];for(let n of i.selection.ranges){let t=i.doc.lineAt(n.from),r=n.to<=t.to?t:i.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>t.from?e[s].to=r.to:e.push({from:t.from+/^\s*/.exec(t.text)[0].length,to:r.to})}return e}function J9(i,e,n=e.selection.ranges){let t=n.map(s=>zM(e,s.from).block);if(!t.every(s=>s))return null;let r=n.map((s,a)=>cSe(e,t[a],s.from,s.to));if(i!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,a)=>r[a]?[]:[{from:s.from,insert:t[a].open+" "},{from:s.to,insert:" "+t[a].close}]))};if(i!=1&&r.some(s=>s)){let s=[];for(let a=0,l;a<r.length;a++)if(l=r[a]){let h=t[a],{open:u,close:f}=l;s.push({from:u.pos-h.open.length,to:u.pos+u.margin},{from:f.pos-f.margin,to:f.pos+h.close.length})}return{changes:s}}return null}function uSe(i,e,n=e.selection.ranges){let t=[],r=-1;for(let{from:s,to:a}of n){let l=t.length,h=1e9,u=zM(e,s).line;if(u){for(let f=s;f<=a;){let p=e.doc.lineAt(f);if(p.from>r&&(s==a||a>p.from)){r=p.from;let g=/^\s*/.exec(p.text)[0].length,v=g==p.length,y=p.text.slice(g,g+u.length)==u?g:-1;g<p.text.length&&g<h&&(h=g),t.push({line:p,comment:y,token:u,indent:g,empty:v,single:!1})}f=p.to+1}if(h<1e9)for(let f=l;f<t.length;f++)t[f].indent<t[f].line.text.length&&(t[f].indent=h);t.length==l+1&&(t[l].single=!0)}}if(i!=2&&t.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:h,indent:u,empty:f,single:p}of t)(p||!f)&&s.push({from:l.from+u,insert:h+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(i!=1&&t.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:l,token:h}of t)if(l>=0){let u=a.from+l,f=u+h.length;a.text[f-a.from]==" "&&f++,s.push({from:u,to:f})}return{changes:s}}return null}const j2=Al.define(),dSe=Al.define(),fSe=wt.define(),ez=wt.define({combine(i){return Na(i,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(t,r)=>e(t,r)||n(t,r)})}}),tz=kr.define({create(){return wa.empty},update(i,e){let n=e.state.facet(ez),t=e.annotation(j2);if(t){let h=Es.fromTransaction(e,t.selection),u=t.side,f=u==0?i.undone:i.done;return h?f=Qb(f,f.length,n.minDepth,h):f=rz(f,e.startState.selection),new wa(u==0?t.rest:f,u==0?f:t.rest)}let r=e.annotation(dSe);if((r=="full"||r=="before")&&(i=i.isolate()),e.annotation(ir.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let s=Es.fromTransaction(e),a=e.annotation(ir.time),l=e.annotation(ir.userEvent);return s?i=i.addChanges(s,a,l,n,e):e.selection&&(i=i.addSelection(e.startState.selection,a,l,n.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new wa(i.done.map(Es.fromJSON),i.undone.map(Es.fromJSON))}});function pSe(i={}){return[tz,ez.of(i),vt.domEventHandlers({beforeinput(e,n){let t=e.inputType=="historyUndo"?nz:e.inputType=="historyRedo"?q2:null;return t?(e.preventDefault(),t(n)):!1}})]}function gx(i,e){return function({state:n,dispatch:t}){if(!e&&n.readOnly)return!1;let r=n.field(tz,!1);if(!r)return!1;let s=r.pop(i,n,e);return s?(t(s),!0):!1}}const nz=gx(0,!1),q2=gx(1,!1),mSe=gx(0,!0),gSe=gx(1,!0);class Es{constructor(e,n,t,r,s){this.changes=e,this.effects=n,this.mapped=t,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Es(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,t;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(t=this.startSelection)===null||t===void 0?void 0:t.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Es(e.changes&&Ki.fromJSON(e.changes),[],e.mapped&&Sa.fromJSON(e.mapped),e.startSelection&&Ze.fromJSON(e.startSelection),e.selectionsAfter.map(Ze.fromJSON))}static fromTransaction(e,n){let t=xo;for(let r of e.startState.facet(fSe)){let s=r(e);s.length&&(t=t.concat(s))}return!t.length&&e.changes.empty?null:new Es(e.changes.invert(e.startState.doc),t,void 0,n||e.startState.selection,xo)}static selection(e){return new Es(void 0,xo,void 0,void 0,e)}}function Qb(i,e,n,t){let r=e+1>n+20?e-n-1:0,s=i.slice(r,e);return s.push(t),s}function vSe(i,e){let n=[],t=!1;return i.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,a,l)=>{for(let h=0;h<n.length;){let u=n[h++],f=n[h++];l>=u&&a<=f&&(t=!0)}}),t}function ySe(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((n,t)=>n.empty!=e.ranges[t].empty).length===0}function iz(i,e){return i.length?e.length?i.concat(e):i:e}const xo=[],bSe=200;function rz(i,e){if(i.length){let n=i[i.length-1],t=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-bSe));return t.length&&t[t.length-1].eq(e)?i:(t.push(e),Qb(i,i.length-1,1e9,n.setSelAfter(t)))}else return[Es.selection([e])]}function OSe(i){let e=i[i.length-1],n=i.slice();return n[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function IS(i,e){if(!i.length)return i;let n=i.length,t=xo;for(;n;){let r=xSe(i[n-1],e,t);if(r.changes&&!r.changes.empty||r.effects.length){let s=i.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,t=r.selectionsAfter}return t.length?[Es.selection(t)]:xo}function xSe(i,e,n){let t=iz(i.selectionsAfter.length?i.selectionsAfter.map(l=>l.map(e)):xo,n);if(!i.changes)return Es.selection(t);let r=i.changes.map(e),s=e.mapDesc(i.changes,!0),a=i.mapped?i.mapped.composeDesc(s):s;return new Es(r,gn.mapEffects(i.effects,e),a,i.startSelection.map(s),t)}const wSe=/^(input\.type|delete)($|\.)/;class wa{constructor(e,n,t=0,r=void 0){this.done=e,this.undone=n,this.prevTime=t,this.prevUserEvent=r}isolate(){return this.prevTime?new wa(this.done,this.undone):this}addChanges(e,n,t,r,s){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!t||wSe.test(t))&&(!l.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,vSe(l.changes,e.changes))||t=="input.type.compose")?a=Qb(a,a.length-1,r.minDepth,new Es(e.changes.compose(l.changes),iz(gn.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,xo)):a=Qb(a,a.length,r.minDepth,e),new wa(a,xo,n,t)}addSelection(e,n,t,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:xo;return s.length>0&&n-this.prevTime<r&&t==this.prevUserEvent&&t&&/^select($|\.)/.test(t)&&ySe(s[s.length-1],e)?this:new wa(rz(this.done,e),this.undone,n,t)}addMapping(e){return new wa(IS(this.done,e),IS(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,t){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],a=s.selectionsAfter[0]||n.selection;if(t&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:j2.of({side:e,rest:OSe(r),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=r.length==1?xo:r.slice(0,r.length-1);return s.mapped&&(l=IS(l,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:j2.of({side:e,rest:l,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}wa.empty=new wa(xo,xo);const _Se=[{key:"Mod-z",run:nz,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:q2,preventDefault:!0},{linux:"Ctrl-Shift-z",run:q2,preventDefault:!0},{key:"Mod-u",run:mSe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:gSe,preventDefault:!0}];function Yf(i,e){return Ze.create(i.ranges.map(e),i.mainIndex)}function $a(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ea({state:i,dispatch:e},n){let t=Yf(i.selection,n);return t.eq(i.selection,!0)?!1:(e($a(i,t)),!0)}function vx(i,e){return Ze.cursor(e?i.to:i.from)}function sz(i,e){return ea(i,n=>n.empty?i.moveByChar(n,e):vx(n,e))}function Fr(i){return i.textDirectionAt(i.state.selection.main.head)==gi.LTR}const oz=i=>sz(i,!Fr(i)),az=i=>sz(i,Fr(i));function lz(i,e){return ea(i,n=>n.empty?i.moveByGroup(n,e):vx(n,e))}const SSe=i=>lz(i,!Fr(i)),CSe=i=>lz(i,Fr(i));function kSe(i,e,n){if(e.type.prop(n))return!0;let t=e.to-e.from;return t&&(t>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function yx(i,e,n){let t=Lr(i).resolveInner(e.head),r=n?bn.closedBy:bn.openedBy;for(let h=e.head;;){let u=n?t.childAfter(h):t.childBefore(h);if(!u)break;kSe(i,u,r)?t=u:h=n?u.to:u.from}let s=t.type.prop(r),a,l;return s&&(a=n?xa(i,t.from,1):xa(i,t.to,-1))&&a.matched?l=n?a.end.to:a.end.from:l=n?t.to:t.from,Ze.cursor(l,n?-1:1)}const TSe=i=>ea(i,e=>yx(i.state,e,!Fr(i))),MSe=i=>ea(i,e=>yx(i.state,e,Fr(i)));function cz(i,e){return ea(i,n=>{if(!n.empty)return vx(n,e);let t=i.moveVertically(n,e);return t.head!=n.head?t:i.moveToLineBoundary(n,e)})}const hz=i=>cz(i,!1),uz=i=>cz(i,!0);function dz(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,n=0,t=0,r;if(e){for(let s of i.state.facet(vt.scrollMargins)){let a=s(i);a!=null&&a.top&&(n=Math.max(a==null?void 0:a.top,n)),a!=null&&a.bottom&&(t=Math.max(a==null?void 0:a.bottom,t))}r=i.scrollDOM.clientHeight-n-t}else r=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:t,selfScroll:e,height:Math.max(i.defaultLineHeight,r-5)}}function fz(i,e){let n=dz(i),{state:t}=i,r=Yf(t.selection,a=>a.empty?i.moveVertically(a,e,n.height):vx(a,e));if(r.eq(t.selection))return!1;let s;if(n.selfScroll){let a=i.coordsAtPos(t.selection.main.head),l=i.scrollDOM.getBoundingClientRect(),h=l.top+n.marginTop,u=l.bottom-n.marginBottom;a&&a.top>h&&a.bottom<u&&(s=vt.scrollIntoView(r.main.head,{y:"start",yMargin:a.top-h}))}return i.dispatch($a(t,r),{effects:s}),!0}const pD=i=>fz(i,!1),Z2=i=>fz(i,!0);function nh(i,e,n){let t=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?t.to:t.from)&&(r=i.moveToLineBoundary(e,n,!1)),!n&&r.head==t.from&&t.length){let s=/^\s*/.exec(i.state.sliceDoc(t.from,Math.min(t.from+100,t.to)))[0].length;s&&e.head!=t.from+s&&(r=Ze.cursor(t.from+s))}return r}const ESe=i=>ea(i,e=>nh(i,e,!0)),PSe=i=>ea(i,e=>nh(i,e,!1)),ASe=i=>ea(i,e=>nh(i,e,!Fr(i))),RSe=i=>ea(i,e=>nh(i,e,Fr(i))),ISe=i=>ea(i,e=>Ze.cursor(i.lineBlockAt(e.head).from,1)),DSe=i=>ea(i,e=>Ze.cursor(i.lineBlockAt(e.head).to,-1));function NSe(i,e,n){let t=!1,r=Yf(i.selection,s=>{let a=xa(i,s.head,-1)||xa(i,s.head,1)||s.head>0&&xa(i,s.head-1,1)||s.head<i.doc.length&&xa(i,s.head+1,-1);if(!a||!a.end)return s;t=!0;let l=a.start.from==s.head?a.end.to:a.end.from;return Ze.cursor(l)});return t?(e($a(i,r)),!0):!1}const $Se=({state:i,dispatch:e})=>NSe(i,e);function Eo(i,e){let n=Yf(i.state.selection,t=>{let r=e(t);return Ze.range(t.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(i.state.selection)?!1:(i.dispatch($a(i.state,n)),!0)}function pz(i,e){return Eo(i,n=>i.moveByChar(n,e))}const mz=i=>pz(i,!Fr(i)),gz=i=>pz(i,Fr(i));function vz(i,e){return Eo(i,n=>i.moveByGroup(n,e))}const VSe=i=>vz(i,!Fr(i)),LSe=i=>vz(i,Fr(i)),BSe=i=>Eo(i,e=>yx(i.state,e,!Fr(i))),USe=i=>Eo(i,e=>yx(i.state,e,Fr(i)));function yz(i,e){return Eo(i,n=>i.moveVertically(n,e))}const bz=i=>yz(i,!1),Oz=i=>yz(i,!0);function xz(i,e){return Eo(i,n=>i.moveVertically(n,e,dz(i).height))}const mD=i=>xz(i,!1),gD=i=>xz(i,!0),zSe=i=>Eo(i,e=>nh(i,e,!0)),FSe=i=>Eo(i,e=>nh(i,e,!1)),XSe=i=>Eo(i,e=>nh(i,e,!Fr(i))),WSe=i=>Eo(i,e=>nh(i,e,Fr(i))),QSe=i=>Eo(i,e=>Ze.cursor(i.lineBlockAt(e.head).from)),HSe=i=>Eo(i,e=>Ze.cursor(i.lineBlockAt(e.head).to)),vD=({state:i,dispatch:e})=>(e($a(i,{anchor:0})),!0),yD=({state:i,dispatch:e})=>(e($a(i,{anchor:i.doc.length})),!0),bD=({state:i,dispatch:e})=>(e($a(i,{anchor:i.selection.main.anchor,head:0})),!0),OD=({state:i,dispatch:e})=>(e($a(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),GSe=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),YSe=({state:i,dispatch:e})=>{let n=bx(i).map(({from:t,to:r})=>Ze.range(t,Math.min(r+1,i.doc.length)));return e(i.update({selection:Ze.create(n),userEvent:"select"})),!0},jSe=({state:i,dispatch:e})=>{let n=Yf(i.selection,t=>{var r;let s=Lr(i).resolveStack(t.from,1);for(let a=s;a;a=a.next){let{node:l}=a;if((l.from<t.from&&l.to>=t.to||l.to>t.to&&l.from<=t.from)&&(!((r=l.parent)===null||r===void 0)&&r.parent))return Ze.range(l.to,l.from)}return t});return e($a(i,n)),!0},qSe=({state:i,dispatch:e})=>{let n=i.selection,t=null;return n.ranges.length>1?t=Ze.create([n.main]):n.main.empty||(t=Ze.create([Ze.cursor(n.main.head)])),t?(e($a(i,t)),!0):!1};function G0(i,e){if(i.state.readOnly)return!1;let n="delete.selection",{state:t}=i,r=t.changeByRange(s=>{let{from:a,to:l}=s;if(a==l){let h=e(s);h<a?(n="delete.backward",h=_1(i,h,!1)):h>a&&(n="delete.forward",h=_1(i,h,!0)),a=Math.min(a,h),l=Math.max(l,h)}else a=_1(i,a,!1),l=_1(i,l,!0);return a==l?{range:s}:{changes:{from:a,to:l},range:Ze.cursor(a,a<s.head?-1:1)}});return r.changes.empty?!1:(i.dispatch(t.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?vt.announce.of(t.phrase("Selection deleted")):void 0})),!0)}function _1(i,e,n){if(i instanceof vt)for(let t of i.state.facet(vt.atomicRanges).map(r=>r(i)))t.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const wz=(i,e,n)=>G0(i,t=>{let r=t.from,{state:s}=i,a=s.doc.lineAt(r),l,h;if(n&&!e&&r>a.from&&r<a.from+200&&!/[^ \t]/.test(l=a.text.slice(0,r-a.from))){if(l[l.length-1]=="	")return r-1;let u=Gf(l,s.tabSize),f=u%Fb(s)||Fb(s);for(let p=0;p<f&&l[l.length-1-p]==" ";p++)r--;h=r}else h=wr(a.text,r-a.from,e,e)+a.from,h==r&&a.number!=(e?s.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,r-a.from))&&(h=wr(a.text,h-a.from,!1,!1)+a.from);return h}),K2=i=>wz(i,!1,!0),_z=i=>wz(i,!0,!1),Sz=(i,e)=>G0(i,n=>{let t=n.head,{state:r}=i,s=r.doc.lineAt(t),a=r.charCategorizer(t);for(let l=null;;){if(t==(e?s.to:s.from)){t==n.head&&s.number!=(e?r.doc.lines:1)&&(t+=e?1:-1);break}let h=wr(s.text,t-s.from,e)+s.from,u=s.text.slice(Math.min(t,h)-s.from,Math.max(t,h)-s.from),f=a(u);if(l!=null&&f!=l)break;(u!=" "||t!=n.head)&&(l=f),t=h}return t}),Cz=i=>Sz(i,!1),ZSe=i=>Sz(i,!0),KSe=i=>G0(i,e=>{let n=i.lineBlockAt(e.head).to;return e.head<n?n:Math.min(i.state.doc.length,e.head+1)}),JSe=i=>G0(i,e=>{let n=i.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),eCe=i=>G0(i,e=>{let n=i.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(i.state.doc.length,e.head+1)}),tCe=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=i.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:Bn.of(["",""])},range:Ze.cursor(t.from)}));return e(i.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},nCe=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=i.changeByRange(t=>{if(!t.empty||t.from==0||t.from==i.doc.length)return{range:t};let r=t.from,s=i.doc.lineAt(r),a=r==s.from?r-1:wr(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:wr(s.text,r-s.from,!0)+s.from;return{changes:{from:a,to:l,insert:i.doc.slice(r,l).append(i.doc.slice(a,r))},range:Ze.cursor(l)}});return n.changes.empty?!1:(e(i.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function bx(i){let e=[],n=-1;for(let t of i.selection.ranges){let r=i.doc.lineAt(t.from),s=i.doc.lineAt(t.to);if(!t.empty&&t.to==s.from&&(s=i.doc.lineAt(t.to-1)),n>=r.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(t)}else e.push({from:r.from,to:s.to,ranges:[t]});n=s.number+1}return e}function kz(i,e,n){if(i.readOnly)return!1;let t=[],r=[];for(let s of bx(i)){if(n?s.to==i.doc.length:s.from==0)continue;let a=i.doc.lineAt(n?s.to+1:s.from-1),l=a.length+1;if(n){t.push({from:s.to,to:a.to},{from:s.from,insert:a.text+i.lineBreak});for(let h of s.ranges)r.push(Ze.range(Math.min(i.doc.length,h.anchor+l),Math.min(i.doc.length,h.head+l)))}else{t.push({from:a.from,to:s.from},{from:s.to,insert:i.lineBreak+a.text});for(let h of s.ranges)r.push(Ze.range(h.anchor-l,h.head-l))}}return t.length?(e(i.update({changes:t,scrollIntoView:!0,selection:Ze.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const iCe=({state:i,dispatch:e})=>kz(i,e,!1),rCe=({state:i,dispatch:e})=>kz(i,e,!0);function Tz(i,e,n){if(i.readOnly)return!1;let t=[];for(let r of bx(i))n?t.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):t.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return e(i.update({changes:t,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const sCe=({state:i,dispatch:e})=>Tz(i,e,!1),oCe=({state:i,dispatch:e})=>Tz(i,e,!0),aCe=i=>{if(i.state.readOnly)return!1;let{state:e}=i,n=e.changes(bx(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),t=Yf(e.selection,r=>{let s;if(i.lineWrapping){let a=i.lineBlockAt(r.head),l=i.coordsAtPos(r.head,r.assoc||1);l&&(s=a.bottom+i.documentTop-l.bottom+i.defaultLineHeight/2)}return i.moveVertically(r,!0,s)}).map(n);return i.dispatch({changes:n,selection:t,scrollIntoView:!0,userEvent:"delete.line"}),!0};function lCe(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Lr(i).resolveInner(e),t=n.childBefore(e),r=n.childAfter(e),s;return t&&r&&t.to<=e&&r.from>=e&&(s=t.type.prop(bn.closedBy))&&s.indexOf(r.name)>-1&&i.doc.lineAt(t.to).from==i.doc.lineAt(r.from).from&&!/\S/.test(i.sliceDoc(t.to,r.from))?{from:t.to,to:r.from}:null}const cCe=Mz(!1),hCe=Mz(!0);function Mz(i){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let t=e.changeByRange(r=>{let{from:s,to:a}=r,l=e.doc.lineAt(s),h=!i&&s==a&&lCe(e,s);i&&(s=a=(a<=l.to?l:e.doc.lineAt(a)).to);let u=new fx(e,{simulateBreak:s,simulateDoubleBreak:!!h}),f=LM(u,s);for(f==null&&(f=Gf(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;h?{from:s,to:a}=h:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let p=["",c0(e,f)];return h&&p.push(c0(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:a,insert:Bn.of(p)},range:Ze.cursor(s+1+p[1].length)}});return n(e.update(t,{scrollIntoView:!0,userEvent:"input"})),!0}}function FM(i,e){let n=-1;return i.changeByRange(t=>{let r=[];for(let a=t.from;a<=t.to;){let l=i.doc.lineAt(a);l.number>n&&(t.empty||t.to>l.from)&&(e(l,r,t),n=l.number),a=l.to+1}let s=i.changes(r);return{changes:r,range:Ze.range(s.mapPos(t.anchor,1),s.mapPos(t.head,1))}})}const uCe=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=Object.create(null),t=new fx(i,{overrideIndentation:s=>{let a=n[s];return a??-1}}),r=FM(i,(s,a,l)=>{let h=LM(t,s.from);if(h==null)return;/\S/.test(s.text)||(h=0);let u=/^\s*/.exec(s.text)[0],f=c0(i,h);(u!=f||l.from<s.from+u.length)&&(n[s.from]=h,a.push({from:s.from,to:s.from+u.length,insert:f}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},dCe=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(FM(i,(n,t)=>{t.push({from:n.from,insert:i.facet(VM)})}),{userEvent:"input.indent"})),!0),fCe=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(FM(i,(n,t)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Gf(r,i.tabSize),a=0,l=c0(i,Math.max(0,s-Fb(i)));for(;a<r.length&&a<l.length&&r.charCodeAt(a)==l.charCodeAt(a);)a++;t.push({from:n.from+a,to:n.from+r.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),pCe=i=>(i.setTabFocusMode(),!0),mCe=[{key:"Ctrl-b",run:oz,shift:mz,preventDefault:!0},{key:"Ctrl-f",run:az,shift:gz},{key:"Ctrl-p",run:hz,shift:bz},{key:"Ctrl-n",run:uz,shift:Oz},{key:"Ctrl-a",run:ISe,shift:QSe},{key:"Ctrl-e",run:DSe,shift:HSe},{key:"Ctrl-d",run:_z},{key:"Ctrl-h",run:K2},{key:"Ctrl-k",run:KSe},{key:"Ctrl-Alt-h",run:Cz},{key:"Ctrl-o",run:tCe},{key:"Ctrl-t",run:nCe},{key:"Ctrl-v",run:Z2}],gCe=[{key:"ArrowLeft",run:oz,shift:mz,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:SSe,shift:VSe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:ASe,shift:XSe,preventDefault:!0},{key:"ArrowRight",run:az,shift:gz,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:CSe,shift:LSe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:RSe,shift:WSe,preventDefault:!0},{key:"ArrowUp",run:hz,shift:bz,preventDefault:!0},{mac:"Cmd-ArrowUp",run:vD,shift:bD},{mac:"Ctrl-ArrowUp",run:pD,shift:mD},{key:"ArrowDown",run:uz,shift:Oz,preventDefault:!0},{mac:"Cmd-ArrowDown",run:yD,shift:OD},{mac:"Ctrl-ArrowDown",run:Z2,shift:gD},{key:"PageUp",run:pD,shift:mD},{key:"PageDown",run:Z2,shift:gD},{key:"Home",run:PSe,shift:FSe,preventDefault:!0},{key:"Mod-Home",run:vD,shift:bD},{key:"End",run:ESe,shift:zSe,preventDefault:!0},{key:"Mod-End",run:yD,shift:OD},{key:"Enter",run:cCe},{key:"Mod-a",run:GSe},{key:"Backspace",run:K2,shift:K2},{key:"Delete",run:_z},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Cz},{key:"Mod-Delete",mac:"Alt-Delete",run:ZSe},{mac:"Mod-Backspace",run:JSe},{mac:"Mod-Delete",run:eCe}].concat(mCe.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),vCe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:TSe,shift:BSe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:MSe,shift:USe},{key:"Alt-ArrowUp",run:iCe},{key:"Shift-Alt-ArrowUp",run:sCe},{key:"Alt-ArrowDown",run:rCe},{key:"Shift-Alt-ArrowDown",run:oCe},{key:"Escape",run:qSe},{key:"Mod-Enter",run:hCe},{key:"Alt-l",mac:"Ctrl-l",run:YSe},{key:"Mod-i",run:jSe,preventDefault:!0},{key:"Mod-[",run:fCe},{key:"Mod-]",run:dCe},{key:"Mod-Alt-\\",run:uCe},{key:"Shift-Mod-k",run:aCe},{key:"Shift-Mod-\\",run:$Se},{key:"Mod-/",run:sSe},{key:"Alt-A",run:aSe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:pCe}].concat(gCe);function oi(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var r=n[t];typeof r=="string"?i.setAttribute(t,r):r!=null&&(i[t]=r)}e++}for(;e<arguments.length;e++)Ez(i,arguments[e]);return i}function Ez(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Ez(i,e[n]);else throw new RangeError("Unsupported child node: "+e)}const xD=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class If{constructor(e,n,t=0,r=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(t,r),this.bufferStart=t,this.normalize=s?l=>s(xD(l)):xD,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return yr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=vM(e),t=this.bufferStart+this.bufferPos;this.bufferPos+=vo(e);let r=this.normalize(n);for(let s=0,a=t;;s++){let l=r.charCodeAt(s),h=this.match(l,a,this.bufferPos+this.bufferStart);if(s==r.length-1){if(h)return this.value=h,this;break}a==t&&s<n.length&&n.charCodeAt(s)==l&&a++}}}match(e,n,t){let r=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?r={from:this.matches[s+1],to:t}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:t}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(If.prototype[Symbol.iterator]=function(){return this});const Pz={from:-1,to:-1,match:/.*/.exec("")},XM="gm"+(/x/.unicode==null?"":"u");class Az{constructor(e,n,t,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Pz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Rz(e,n,t,r,s);this.re=new RegExp(n,XM+(t!=null&&t.ignoreCase?"i":"")),this.test=t==null?void 0:t.test,this.iter=e.iter();let a=e.lineAt(r);this.curLineStart=a.from,this.matchPos=Hb(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let t=this.curLineStart+n.index,r=t+n[0].length;if(this.matchPos=Hb(this.text,r+(t==r?1:0)),t==this.curLineStart+this.curLine.length&&this.nextLine(),(t<r||t>this.value.to)&&(!this.test||this.test(t,r,n)))return this.value={from:t,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const DS=new WeakMap;class rf{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,t){let r=DS.get(e);if(!r||r.from>=t||r.to<=n){let l=new rf(n,e.sliceString(n,t));return DS.set(e,l),l}if(r.from==n&&r.to==t)return r;let{text:s,from:a}=r;return a>n&&(s=e.sliceString(n,a)+s,a=n),r.to<t&&(s+=e.sliceString(r.to,t)),DS.set(e,new rf(a,s)),new rf(n,s.slice(n-a,t-a))}}class Rz{constructor(e,n,t,r,s){this.text=e,this.to=s,this.done=!1,this.value=Pz,this.matchPos=Hb(e,r),this.re=new RegExp(n,XM+(t!=null&&t.ignoreCase?"i":"")),this.test=t==null?void 0:t.test,this.flat=rf.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let t=this.flat.from+n.index,r=t+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,r,n)))return this.value={from:t,to:r,match:n},this.matchPos=Hb(this.text,r+(t==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=rf.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Az.prototype[Symbol.iterator]=Rz.prototype[Symbol.iterator]=function(){return this});function yCe(i){try{return new RegExp(i,XM),!0}catch{return!1}}function Hb(i,e){if(e>=i.length)return e;let n=i.lineAt(e),t;for(;e<n.to&&(t=n.text.charCodeAt(e-n.from))>=56320&&t<57344;)e++;return e}function J2(i){let e=String(i.state.doc.lineAt(i.state.selection.main.head).number),n=oi("input",{class:"cm-textfield",name:"line",value:e}),t=oi("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),i.dispatch({effects:Gb.of(!1)}),i.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},oi("label",i.state.phrase("Go to line"),": ",n)," ",oi("button",{class:"cm-button",type:"submit"},i.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:a}=i,l=a.doc.lineAt(a.selection.main.head),[,h,u,f,p]=s,g=f?+f.slice(1):0,v=u?+u:l.number;if(u&&p){let x=v/100;h&&(x=x*(h=="-"?-1:1)+l.number/a.doc.lines),v=Math.round(a.doc.lines*x)}else u&&h&&(v=v*(h=="-"?-1:1)+l.number);let y=a.doc.line(Math.max(1,Math.min(a.doc.lines,v))),w=Ze.cursor(y.from+Math.max(0,Math.min(g,y.length)));i.dispatch({effects:[Gb.of(!1),vt.scrollIntoView(w.from,{y:"center"})],selection:w}),i.focus()}return{dom:t}}const Gb=gn.define(),wD=kr.define({create(){return!0},update(i,e){for(let n of e.effects)n.is(Gb)&&(i=n.value);return i},provide:i=>a0.from(i,e=>e?J2:null)}),bCe=i=>{let e=o0(i,J2);if(!e){let n=[Gb.of(!0)];i.state.field(wD,!1)==null&&n.push(gn.appendConfig.of([wD,OCe])),i.dispatch({effects:n}),e=o0(i,J2)}return e&&e.dom.querySelector("input").select(),!0},OCe=vt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),xCe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wCe=wt.define({combine(i){return Na(i,xCe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function _Ce(i){return[MCe,TCe]}const SCe=Yt.mark({class:"cm-selectionMatch"}),CCe=Yt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _D(i,e,n,t){return(n==0||i(e.sliceDoc(n-1,n))!=wi.Word)&&(t==e.doc.length||i(e.sliceDoc(t,t+1))!=wi.Word)}function kCe(i,e,n,t){return i(e.sliceDoc(n,n+1))==wi.Word&&i(e.sliceDoc(t-1,t))==wi.Word}const TCe=Gi.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(wCe),{state:n}=i,t=n.selection;if(t.ranges.length>1)return Yt.none;let r=t.main,s,a=null;if(r.empty){if(!e.highlightWordAroundCursor)return Yt.none;let h=n.wordAt(r.head);if(!h)return Yt.none;a=n.charCategorizer(r.head),s=n.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<e.minSelectionLength||h>200)return Yt.none;if(e.wholeWords){if(s=n.sliceDoc(r.from,r.to),a=n.charCategorizer(r.head),!(_D(a,n,r.from,r.to)&&kCe(a,n,r.from,r.to)))return Yt.none}else if(s=n.sliceDoc(r.from,r.to),!s)return Yt.none}let l=[];for(let h of i.visibleRanges){let u=new If(n.doc,s,h.from,h.to);for(;!u.next().done;){let{from:f,to:p}=u.value;if((!a||_D(a,n,f,p))&&(r.empty&&f<=r.from&&p>=r.to?l.push(CCe.range(f,p)):(f>=r.to||p<=r.from)&&l.push(SCe.range(f,p)),l.length>e.maxMatches))return Yt.none}}return Yt.set(l)}},{decorations:i=>i.decorations}),MCe=vt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),ECe=({state:i,dispatch:e})=>{let{selection:n}=i,t=Ze.create(n.ranges.map(r=>i.wordAt(r.head)||Ze.cursor(r.head)),n.mainIndex);return t.eq(n)?!1:(e(i.update({selection:t})),!0)};function PCe(i,e){let{main:n,ranges:t}=i.selection,r=i.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let a=!1,l=new If(i.doc,e,t[t.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new If(i.doc,e,0,Math.max(0,t[t.length-1].from-1)),a=!0}else{if(a&&t.some(h=>h.from==l.value.from))continue;if(s){let h=i.wordAt(l.value.from);if(!h||h.from!=l.value.from||h.to!=l.value.to)continue}return l.value}}const ACe=({state:i,dispatch:e})=>{let{ranges:n}=i.selection;if(n.some(s=>s.from===s.to))return ECe({state:i,dispatch:e});let t=i.sliceDoc(n[0].from,n[0].to);if(i.selection.ranges.some(s=>i.sliceDoc(s.from,s.to)!=t))return!1;let r=PCe(i,t);return r?(e(i.update({selection:i.selection.addRange(Ze.range(r.from,r.to),!1),effects:vt.scrollIntoView(r.to)})),!0):!1},jf=wt.define({combine(i){return Na(i,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new XCe(e),scrollToMatch:e=>vt.scrollIntoView(e)})}});class Iz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||yCe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,t)=>t=="n"?`
`:t=="r"?"\r":t=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new NCe(this):new ICe(this)}getCursor(e,n=0,t){let r=e.doc?e:Ln.create({doc:e});return t==null&&(t=r.doc.length),this.regexp?Pd(this,r,n,t):Ed(this,r,n,t)}}class Dz{constructor(e){this.spec=e}}function Ed(i,e,n,t){return new If(e.doc,i.unquoted,n,t,i.caseSensitive?void 0:r=>r.toLowerCase(),i.wholeWord?RCe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function RCe(i,e){return(n,t,r,s)=>((s>n||s+r.length<t)&&(s=Math.max(0,n-2),r=i.sliceString(s,Math.min(i.length,t+2))),(e(Yb(r,n-s))!=wi.Word||e(jb(r,n-s))!=wi.Word)&&(e(jb(r,t-s))!=wi.Word||e(Yb(r,t-s))!=wi.Word))}class ICe extends Dz{constructor(e){super(e)}nextMatch(e,n,t){let r=Ed(this.spec,e,t,e.doc.length).nextOverlapping();return r.done&&(r=Ed(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,t){for(let r=t;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),a=Ed(this.spec,e,s,r),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(s==n)return null;r-=1e4}}prevMatch(e,n,t){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,t,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let t=Ed(this.spec,e,0,e.doc.length),r=[];for(;!t.next().done;){if(r.length>=n)return null;r.push(t.value)}return r}highlight(e,n,t,r){let s=Ed(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(t+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Pd(i,e,n,t){return new Az(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?DCe(e.charCategorizer(e.selection.main.head)):void 0},n,t)}function Yb(i,e){return i.slice(wr(i,e,!1),e)}function jb(i,e){return i.slice(e,wr(i,e))}function DCe(i){return(e,n,t)=>!t[0].length||(i(Yb(t.input,t.index))!=wi.Word||i(jb(t.input,t.index))!=wi.Word)&&(i(jb(t.input,t.index+t[0].length))!=wi.Word||i(Yb(t.input,t.index+t[0].length))!=wi.Word)}class NCe extends Dz{nextMatch(e,n,t){let r=Pd(this.spec,e,t,e.doc.length).next();return r.done&&(r=Pd(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,t){for(let r=1;;r++){let s=Math.max(n,t-r*1e4),a=Pd(this.spec,e,s,t),l=null;for(;!a.next().done;)l=a.value;if(l&&(s==n||l.from>s+10))return l;if(s==n)return null}}prevMatch(e,n,t){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,t,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,t)=>t=="$"?"$":t=="&"?e.match[0]:t!="0"&&+t<e.match.length?e.match[t]:n)}matchAll(e,n){let t=Pd(this.spec,e,0,e.doc.length),r=[];for(;!t.next().done;){if(r.length>=n)return null;r.push(t.value)}return r}highlight(e,n,t,r){let s=Pd(this.spec,e,Math.max(0,n-250),Math.min(t+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const h0=gn.define(),WM=gn.define(),Rc=kr.define({create(i){return new NS(ek(i).create(),null)},update(i,e){for(let n of e.effects)n.is(h0)?i=new NS(n.value.create(),i.panel):n.is(WM)&&(i=new NS(i.query,n.value?QM:null));return i},provide:i=>a0.from(i,e=>e.panel)});class NS{constructor(e,n){this.query=e,this.panel=n}}const $Ce=Yt.mark({class:"cm-searchMatch"}),VCe=Yt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),LCe=Gi.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(Rc))}update(i){let e=i.state.field(Rc);(e!=i.startState.field(Rc)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return Yt.none;let{view:n}=this,t=new zc;for(let r=0,s=n.visibleRanges,a=s.length;r<a;r++){let{from:l,to:h}=s[r];for(;r<a-1&&h>s[r+1].from-2*250;)h=s[++r].to;i.highlight(n.state,l,h,(u,f)=>{let p=n.state.selection.ranges.some(g=>g.from==u&&g.to==f);t.add(u,f,p?VCe:$Ce)})}return t.finish()}},{decorations:i=>i.decorations});function Y0(i){return e=>{let n=e.state.field(Rc,!1);return n&&n.query.spec.valid?i(e,n):Vz(e)}}const qb=Y0((i,{query:e})=>{let{to:n}=i.state.selection.main,t=e.nextMatch(i.state,n,n);if(!t)return!1;let r=Ze.single(t.from,t.to),s=i.state.facet(jf);return i.dispatch({selection:r,effects:[HM(i,t),s.scrollToMatch(r.main,i)],userEvent:"select.search"}),$z(i),!0}),Zb=Y0((i,{query:e})=>{let{state:n}=i,{from:t}=n.selection.main,r=e.prevMatch(n,t,t);if(!r)return!1;let s=Ze.single(r.from,r.to),a=i.state.facet(jf);return i.dispatch({selection:s,effects:[HM(i,r),a.scrollToMatch(s.main,i)],userEvent:"select.search"}),$z(i),!0}),BCe=Y0((i,{query:e})=>{let n=e.matchAll(i.state,1e3);return!n||!n.length?!1:(i.dispatch({selection:Ze.create(n.map(t=>Ze.range(t.from,t.to))),userEvent:"select.search.matches"}),!0)}),UCe=({state:i,dispatch:e})=>{let n=i.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:t,to:r}=n.main,s=[],a=0;for(let l=new If(i.doc,i.sliceDoc(t,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==t&&(a=s.length),s.push(Ze.range(l.value.from,l.value.to))}return e(i.update({selection:Ze.create(s,a),userEvent:"select.search.matches"})),!0},SD=Y0((i,{query:e})=>{let{state:n}=i,{from:t,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,t,t);if(!s)return!1;let a=[],l,h,u=[];if(s.from==t&&s.to==r&&(h=n.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(n,s.from,s.to),u.push(vt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(t).number)+"."))),s){let f=a.length==0||a[0].from>=s.to?0:s.to-s.from-h.length;l=Ze.single(s.from-f,s.to-f),u.push(HM(i,s)),u.push(n.facet(jf).scrollToMatch(l.main,i))}return i.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),zCe=Y0((i,{query:e})=>{if(i.state.readOnly)return!1;let n=e.matchAll(i.state,1e9).map(r=>{let{from:s,to:a}=r;return{from:s,to:a,insert:e.getReplacement(r)}});if(!n.length)return!1;let t=i.state.phrase("replaced $ matches",n.length)+".";return i.dispatch({changes:n,effects:vt.announce.of(t),userEvent:"input.replace.all"}),!0});function QM(i){return i.state.facet(jf).createPanel(i)}function ek(i,e){var n,t,r,s,a;let l=i.selection.main,h=l.empty||l.to>l.from+100?"":i.sliceDoc(l.from,l.to);if(e&&!h)return e;let u=i.facet(jf);return new Iz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(t=e==null?void 0:e.caseSensitive)!==null&&t!==void 0?t:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:u.wholeWord})}function Nz(i){let e=o0(i,QM);return e&&e.dom.querySelector("[main-field]")}function $z(i){let e=Nz(i);e&&e==i.root.activeElement&&e.select()}const Vz=i=>{let e=i.state.field(Rc,!1);if(e&&e.panel){let n=Nz(i);if(n&&n!=i.root.activeElement){let t=ek(i.state,e.query.spec);t.valid&&i.dispatch({effects:h0.of(t)}),n.focus(),n.select()}}else i.dispatch({effects:[WM.of(!0),e?h0.of(ek(i.state,e.query.spec)):gn.appendConfig.of(QCe)]});return!0},Lz=i=>{let e=i.state.field(Rc,!1);if(!e||!e.panel)return!1;let n=o0(i,QM);return n&&n.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:WM.of(!1)}),!0},FCe=[{key:"Mod-f",run:Vz,scope:"editor search-panel"},{key:"F3",run:qb,shift:Zb,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:qb,shift:Zb,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Lz,scope:"editor search-panel"},{key:"Mod-Shift-l",run:UCe},{key:"Mod-Alt-g",run:bCe},{key:"Mod-d",run:ACe,preventDefault:!0}];class XCe{constructor(e){this.view=e;let n=this.query=e.state.field(Rc).query.spec;this.commit=this.commit.bind(this),this.searchField=oi("input",{value:n.search,placeholder:Ws(e,"Find"),"aria-label":Ws(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=oi("input",{value:n.replace,placeholder:Ws(e,"Replace"),"aria-label":Ws(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=oi("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=oi("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=oi("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function t(r,s,a){return oi("button",{class:"cm-button",name:r,onclick:s,type:"button"},a)}this.dom=oi("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,t("next",()=>qb(e),[Ws(e,"next")]),t("prev",()=>Zb(e),[Ws(e,"previous")]),t("select",()=>BCe(e),[Ws(e,"all")]),oi("label",null,[this.caseField,Ws(e,"match case")]),oi("label",null,[this.reField,Ws(e,"regexp")]),oi("label",null,[this.wordField,Ws(e,"by word")]),...e.state.readOnly?[]:[oi("br"),this.replaceField,t("replace",()=>SD(e),[Ws(e,"replace")]),t("replaceAll",()=>zCe(e),[Ws(e,"replace all")])],oi("button",{name:"close",onclick:()=>Lz(e),"aria-label":Ws(e,"close"),type:"button"},["×"])])}commit(){let e=new Iz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:h0.of(e)}))}keydown(e){jxe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Zb:qb)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),SD(this.view))}update(e){for(let n of e.transactions)for(let t of n.effects)t.is(h0)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(jf).top}}function Ws(i,e){return i.state.phrase(e)}const S1=30,C1=/[\s\.,:;?!]/;function HM(i,{from:e,to:n}){let t=i.state.doc.lineAt(e),r=i.state.doc.lineAt(n).to,s=Math.max(t.from,e-S1),a=Math.min(r,n+S1),l=i.state.sliceDoc(s,a);if(s!=t.from){for(let h=0;h<S1;h++)if(!C1.test(l[h+1])&&C1.test(l[h])){l=l.slice(h);break}}if(a!=r){for(let h=l.length-1;h>l.length-S1;h--)if(!C1.test(l[h-1])&&C1.test(l[h])){l=l.slice(0,h);break}}return vt.announce.of(`${i.state.phrase("current match")}. ${l} ${i.state.phrase("on line")} ${t.number}.`)}const WCe=vt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),QCe=[Rc,Ru.low(LCe),WCe];class Bz{constructor(e,n,t,r){this.state=e,this.pos=n,this.explicit=t,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Lr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),t=Math.max(n.from,this.pos-250),r=n.text.slice(t-n.from,this.pos-n.from),s=r.search(Uz(e,!1));return s<0?null:{from:t+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,t){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),t&&t.onDocChange&&(this.abortOnDocChange=!0))}}function CD(i){let e=Object.keys(i).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function HCe(i){let e=Object.create(null),n=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let t=CD(e)+CD(n)+"*$";return[new RegExp("^"+t),new RegExp(t)]}function GCe(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[n,t]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:HCe(e);return r=>{let s=r.matchBefore(t);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class kD{constructor(e,n,t,r){this.completion=e,this.source=n,this.match=t,this.score=r}}function Ic(i){return i.selection.main.from}function Uz(i,e){var n;let{source:t}=i,r=e&&t[0]!="^",s=t[t.length-1]!="$";return!r&&!s?i:new RegExp(`${r?"^":""}(?:${t})${s?"$":""}`,(n=i.flags)!==null&&n!==void 0?n:i.ignoreCase?"i":"")}const zz=Al.define();function YCe(i,e,n,t){let{main:r}=i.selection,s=n-r.from,a=t-r.from;return Object.assign(Object.assign({},i.changeByRange(l=>l!=r&&n!=t&&i.sliceDoc(l.from+s,l.from+a)!=i.sliceDoc(n,t)?{range:l}:{changes:{from:l.from+s,to:t==r.from?l.to:l.from+a,insert:e},range:Ze.cursor(l.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const TD=new WeakMap;function jCe(i){if(!Array.isArray(i))return i;let e=TD.get(i);return e||TD.set(i,e=GCe(i)),e}const Kb=gn.define(),u0=gn.define();class qCe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let t=yr(e,n),r=vo(t);this.chars.push(t);let s=e.slice(n,n+r),a=s.toUpperCase();this.folded.push(yr(a==s?s.toLowerCase():a,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:t,any:r,precise:s,byWord:a}=this;if(n.length==1){let _=yr(e,0),O=vo(_),k=O==e.length?0:-100;if(_!=n[0])if(_==t[0])k+=-200;else return null;return this.ret(k,[0,O])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=n.length,u=0;if(l<0){for(let _=0,O=Math.min(e.length,200);_<O&&u<h;){let k=yr(e,_);(k==n[u]||k==t[u])&&(r[u++]=_),_+=vo(k)}if(u<h)return null}let f=0,p=0,g=!1,v=0,y=-1,w=-1,x=/[a-z]/.test(e),S=!0;for(let _=0,O=Math.min(e.length,200),k=0;_<O&&p<h;){let M=yr(e,_);l<0&&(f<h&&M==n[f]&&(s[f++]=_),v<h&&(M==n[v]||M==t[v]?(v==0&&(y=_),w=_+1,v++):v=0));let P,D=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(P=vM(M))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!_||D==1&&x||k==0&&D!=0)&&(n[p]==M||t[p]==M&&(g=!0)?a[p++]=_:a.length&&(S=!1)),k=D,_+=vo(M)}return p==h&&a[0]==0&&S?this.result(-100+(g?-200:0),a,e):v==h&&y==0?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):v==h?this.ret(-900-e.length,[y,w]):p==h?this.result(-100+(g?-200:0)+-700+(S?0:-1100),a,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,t){let r=[],s=0;for(let a of n){let l=a+(this.astral?vo(yr(t,a)):1);s&&r[s-1]==a?r[s-1]=l:(r[s++]=a,r[s++]=l)}return this.ret(e-t.length,r)}}class ZCe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),t=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return t==null?null:(this.matched=[0,n.length],this.score=t+(e.length==this.pattern.length?0:-100),this)}}const Or=wt.define({combine(i){return Na(i,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:KCe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>t=>MD(e(t),n(t)),optionClass:(e,n)=>t=>MD(e(t),n(t)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function MD(i,e){return i?e?i+" "+e:i:e}function KCe(i,e,n,t,r,s){let a=i.textDirection==gi.RTL,l=a,h=!1,u="top",f,p,g=e.left-r.left,v=r.right-e.right,y=t.right-t.left,w=t.bottom-t.top;if(l&&g<Math.min(y,v)?l=!1:!l&&v<Math.min(y,g)&&(l=!0),y<=(l?g:v))f=Math.max(r.top,Math.min(n.top,r.bottom-w))-e.top,p=Math.min(400,l?g:v);else{h=!0,p=Math.min(400,(a?e.right:r.right-e.left)-30);let _=r.bottom-e.bottom;_>=w||_>e.top?f=n.bottom-e.top:(u="bottom",f=e.bottom-n.top)}let x=(e.bottom-e.top)/s.offsetHeight,S=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${f/x}px; max-width: ${p/S}px`,class:"cm-completionInfo-"+(h?a?"left-narrow":"right-narrow":l?"left":"right")}}function JCe(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(n){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),n.type&&t.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),t.setAttribute("aria-hidden","true"),t},position:20}),e.push({render(n,t,r,s){let a=document.createElement("span");a.className="cm-completionLabel";let l=n.displayLabel||n.label,h=0;for(let u=0;u<s.length;){let f=s[u++],p=s[u++];f>h&&a.appendChild(document.createTextNode(l.slice(h,f)));let g=a.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(l.slice(f,p))),g.className="cm-completionMatchedText",h=p}return h<l.length&&a.appendChild(document.createTextNode(l.slice(h))),a},position:50},{render(n){if(!n.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=n.detail,t},position:80}),e.sort((n,t)=>n.position-t.position).map(n=>n.render)}function $S(i,e,n){if(i<=n)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let t=Math.floor((i-e)/n);return{from:i-(t+1)*n,to:i-t*n}}class e2e{constructor(e,n,t){this.view=e,this.stateField=n,this.applyCompletion=t,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:a}=r.open,l=e.state.facet(Or);this.optionContent=JCe(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=$S(s.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:u}=e.state.field(n).open;for(let f=h.target,p;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(p=/-(\d+)$/.exec(f.id))&&+p[1]<u.length){this.applyCompletion(e,u[+p[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Or).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:u0.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let t=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),t!=r){let{options:s,selected:a,disabled:l}=t.open;(!r.open||r.open.options!=s)&&(this.range=$S(s.length,a,e.state.facet(Or).maxRenderedOptions),this.showOptions(s,t.id)),this.updateSel(),l!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of n.split(" "))t&&this.dom.classList.add(t);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=$S(n.options.length,n.selected,this.view.state.facet(Or).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:t}=n.options[n.selected],{info:r}=t;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(t);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,t)}).catch(a=>Ms(this.view.state,a,"completion info")):this.addInfoPane(s,t)}}addInfoPane(e,n){this.destroyInfo();let t=this.info=document.createElement("div");if(t.className="cm-tooltip cm-completionInfo",e.nodeType!=null)t.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;t.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(t),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let t=this.list.firstChild,r=this.range.from;t;t=t.nextSibling,r++)t.nodeName!="LI"||!t.id?r--:r==e?t.hasAttribute("aria-selected")||(t.setAttribute("aria-selected","true"),n=t):t.hasAttribute("aria-selected")&&t.removeAttribute("aria-selected");return n&&n2e(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),t=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Or).positionInfo(this.view,n,r,t,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,t){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let a=t.from;a<t.to;a++){let{completion:l,match:h}=e[a],{section:u}=l;if(u){let g=typeof u=="string"?u:u.name;if(g!=s&&(a>t.from||t.from==0))if(s=g,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let v=r.appendChild(document.createElement("completion-section"));v.textContent=g}}const f=r.appendChild(document.createElement("li"));f.id=n+"-"+a,f.setAttribute("role","option");let p=this.optionClass(l);p&&(f.className=p);for(let g of this.optionContent){let v=g(l,this.view.state,this.view,h);v&&f.appendChild(v)}}return t.from&&r.classList.add("cm-completionListIncompleteTop"),t.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function t2e(i,e){return n=>new e2e(n,i,e)}function n2e(i,e){let n=i.getBoundingClientRect(),t=e.getBoundingClientRect(),r=n.height/i.offsetHeight;t.top<n.top?i.scrollTop-=(n.top-t.top)/r:t.bottom>n.bottom&&(i.scrollTop+=(t.bottom-n.bottom)/r)}function ED(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function i2e(i,e){let n=[],t=null,r=u=>{n.push(u);let{section:f}=u.completion;if(f){t||(t=[]);let p=typeof f=="string"?f:f.name;t.some(g=>g.name==p)||t.push(typeof f=="string"?{name:p}:f)}},s=e.facet(Or);for(let u of i)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let p of u.result.options)r(new kD(p,u.source,f?f(p):[],1e9-n.length));else{let p=e.sliceDoc(u.from,u.to),g,v=s.filterStrict?new ZCe(p):new qCe(p);for(let y of u.result.options)if(g=v.match(y.label)){let w=y.displayLabel?f?f(y,g.matched):[]:g.matched;r(new kD(y,u.source,w,g.score+(y.boost||0)))}}}if(t){let u=Object.create(null),f=0,p=(g,v)=>{var y,w;return((y=g.rank)!==null&&y!==void 0?y:1e9)-((w=v.rank)!==null&&w!==void 0?w:1e9)||(g.name<v.name?-1:1)};for(let g of t.sort(p))f-=1e5,u[g.name]=f;for(let g of n){let{section:v}=g.completion;v&&(g.score+=u[typeof v=="string"?v:v.name])}}let a=[],l=null,h=s.compareCompletions;for(let u of n.sort((f,p)=>p.score-f.score||h(f.completion,p.completion))){let f=u.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?a.push(u):ED(u.completion)>ED(l)&&(a[a.length-1]=u),l=u.completion}return a}class Vd{constructor(e,n,t,r,s,a){this.options=e,this.attrs=n,this.tooltip=t,this.timestamp=r,this.selected=s,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Vd(this.options,PD(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,t,r,s){let a=i2e(e,n);if(!a.length)return r&&e.some(h=>h.state==1)?new Vd(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=n.facet(Or).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let h=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==h){l=u;break}}return new Vd(a,PD(t,l),{pos:e.reduce((h,u)=>u.hasResult()?Math.min(h,u.from):h,1e8),create:c2e,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Vd(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Jb{constructor(e,n,t){this.active=e,this.id=n,this.open=t}static start(){return new Jb(a2e,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,t=n.facet(Or),s=(t.override||n.languageDataAt("autocomplete",Ic(n)).map(jCe)).map(l=>(this.active.find(u=>u.source==l)||new Ks(l,this.active.some(u=>u.state!=0)?1:0)).update(e,t));s.length==this.active.length&&s.every((l,h)=>l==this.active[h])&&(s=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!r2e(s,this.active)?a=Vd.build(s,n,this.id,a,t):a&&a.disabled&&!s.some(l=>l.state==1)&&(a=null),!a&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Ks(l.source,0):l));for(let l of e.effects)l.is(Wz)&&(a=a&&a.setSelected(l.value,this.id));return s==this.active&&a==this.open?this:new Jb(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?s2e:o2e}}function r2e(i,e){if(i==e)return!0;for(let n=0,t=0;;){for(;n<i.length&&!i[n].hasResult;)n++;for(;t<e.length&&!e[t].hasResult;)t++;let r=n==i.length,s=t==e.length;if(r||s)return r==s;if(i[n++].result!=e[t++].result)return!1}}const s2e={"aria-autocomplete":"list"},o2e={};function PD(i,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(n["aria-activedescendant"]=i+"-"+e),n}const a2e=[];function Fz(i,e){if(i.isUserEvent("input.complete")){let t=i.annotation(zz);if(t&&e.activateOnCompletion(t))return 12}let n=i.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:i.isUserEvent("delete.backward")?2:i.selection?8:i.docChanged?16:0}class Ks{constructor(e,n,t=-1){this.source=e,this.state=n,this.explicitPos=t}hasResult(){return!1}update(e,n){let t=Fz(e,n),r=this;(t&8||t&16&&this.touches(e))&&(r=new Ks(r.source,0)),t&4&&r.state==0&&(r=new Ks(this.source,1)),r=r.updateFor(e,t);for(let s of e.effects)if(s.is(Kb))r=new Ks(r.source,1,s.value?Ic(e.state):-1);else if(s.is(u0))r=new Ks(r.source,0);else if(s.is(Xz))for(let a of s.value)a.source==r.source&&(r=a);return r}updateFor(e,n){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ks(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(Ic(e.state))}}class sf extends Ks{constructor(e,n,t,r,s){super(e,2,n),this.result=t,this.from=r,this.to=s}hasResult(){return!0}updateFor(e,n){var t;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=Ic(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>a||!r||n&2&&Ic(e.startState)==this.from)return new Ks(this.source,n&4?1:0);let h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return l2e(r.validFor,e.state,s,a)?new sf(this.source,h,r,s,a):r.update&&(r=r.update(r,s,a,new Bz(e.state,l,h>=0)))?new sf(this.source,h,r,r.from,(t=r.to)!==null&&t!==void 0?t:Ic(e.state)):new Ks(this.source,1,h)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new sf(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ks(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function l2e(i,e,n,t){if(!i)return!1;let r=e.sliceDoc(n,t);return typeof i=="function"?i(r,n,t,e):Uz(i,!0).test(r)}const Xz=gn.define({map(i,e){return i.map(n=>n.map(e))}}),Wz=gn.define(),xs=kr.define({create(){return Jb.start()},update(i,e){return i.update(e)},provide:i=>[RM.from(i,e=>e.tooltip),vt.contentAttributes.from(i,e=>e.attrs)]});function GM(i,e){const n=e.completion.apply||e.completion.label;let t=i.state.field(xs).active.find(r=>r.source==e.source);return t instanceof sf?(typeof n=="string"?i.dispatch(Object.assign(Object.assign({},YCe(i.state,n,t.from,t.to)),{annotations:zz.of(e.completion)})):n(i,e.completion,t.from,t.to),!0):!1}const c2e=t2e(xs,GM);function k1(i,e="option"){return n=>{let t=n.state.field(xs,!1);if(!t||!t.open||t.open.disabled||Date.now()-t.open.timestamp<n.state.facet(Or).interactionDelay)return!1;let r=1,s;e=="page"&&(s=C9(n,t.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=t.open.options,l=t.open.selected>-1?t.open.selected+r*(i?1:-1):i?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),n.dispatch({effects:Wz.of(l)}),!0}}const h2e=i=>{let e=i.state.field(xs,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<i.state.facet(Or).interactionDelay?!1:GM(i,e.open.options[e.open.selected])},u2e=i=>i.state.field(xs,!1)?(i.dispatch({effects:Kb.of(!0)}),!0):!1,d2e=i=>{let e=i.state.field(xs,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(i.dispatch({effects:u0.of(null)}),!0)};class f2e{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const p2e=50,m2e=1e3,g2e=Gi.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of i.state.field(xs).active)e.state==1&&this.startQuery(e)}update(i){let e=i.state.field(xs),n=i.state.facet(Or);if(!i.selectionSet&&!i.docChanged&&i.startState.field(xs)==e)return;let t=i.transactions.some(s=>{let a=Fz(s,n);return a&8||(s.selection||s.docChanged)&&!(a&3)});for(let s=0;s<this.running.length;s++){let a=this.running[s];if(t||a.context.abortOnDocChange&&i.docChanged||a.updates.length+i.transactions.length>p2e&&Date.now()-a.time>m2e){for(let l of a.context.abortListeners)try{l()}catch(h){Ms(this.view.state,h)}a.context.abortListeners=null,this.running.splice(s--,1)}else a.updates.push(...i.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),i.transactions.some(s=>s.effects.some(a=>a.is(Kb)))&&(this.pendingStart=!0);let r=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(a=>a.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of i.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:i}=this.view,e=i.field(xs);for(let n of e.active)n.state==1&&!this.running.some(t=>t.active.source==n.source)&&this.startQuery(n)}startQuery(i){let{state:e}=this.view,n=Ic(e),t=new Bz(e,n,i.explicitPos==n,this.view),r=new f2e(i,t);this.running.push(r),Promise.resolve(i.source(t)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:u0.of(null)}),Ms(this.view.state,s)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Or).updateSyncTime))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Or);for(let t=0;t<this.running.length;t++){let r=this.running[t];if(r.done===void 0)continue;if(this.running.splice(t--,1),r.done){let a=new sf(r.active.source,r.active.explicitPos,r.done,r.done.from,(i=r.done.to)!==null&&i!==void 0?i:Ic(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)a=a.update(l,n);if(a.hasResult()){e.push(a);continue}}let s=this.view.state.field(xs).active.find(a=>a.source==r.active.source);if(s&&s.state==1)if(r.done==null){let a=new Ks(r.active.source,0);for(let l of r.updates)a=a.update(l,n);a.state!=1&&e.push(a)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:Xz.of(e)})}},{eventHandlers:{blur(i){let e=this.view.state.field(xs,!1);if(e&&e.tooltip&&this.view.state.facet(Or).closeOnBlur){let n=e.open&&C9(this.view,e.open.tooltip);(!n||!n.dom.contains(i.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:u0.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Kb.of(!1)}),20),this.composing=0}}}),v2e=typeof navigator=="object"&&/Win/.test(navigator.platform),y2e=Ru.highest(vt.domEventHandlers({keydown(i,e){let n=e.state.field(xs,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||i.key.length>1||i.ctrlKey&&!(v2e&&i.altKey)||i.metaKey)return!1;let t=n.open.options[n.open.selected],r=n.active.find(a=>a.source==t.source),s=t.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(i.key)>-1&&GM(e,t),!1}})),b2e=vt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),d0={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},qh=gn.define({map(i,e){let n=e.mapPos(i,-1,es.TrackAfter);return n??void 0}}),YM=new class extends bu{};YM.startSide=1;YM.endSide=-1;const Qz=kr.define({create(){return $n.empty},update(i,e){if(i=i.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);i=i.update({filter:t=>t>=n.from&&t<=n.to})}for(let n of e.effects)n.is(qh)&&(i=i.update({add:[YM.range(n.value,n.value+1)]}));return i}});function O2e(){return[w2e,Qz]}const VS="()[]{}<>";function Hz(i){for(let e=0;e<VS.length;e+=2)if(VS.charCodeAt(e)==i)return VS.charAt(e+1);return vM(i<128?i:i+1)}function Gz(i,e){return i.languageDataAt("closeBrackets",e)[0]||d0}const x2e=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),w2e=vt.inputHandler.of((i,e,n,t)=>{if((x2e?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(t.length>2||t.length==2&&vo(yr(t,0))==1||e!=r.from||n!=r.to)return!1;let s=C2e(i.state,t);return s?(i.dispatch(s),!0):!1}),_2e=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Gz(i,i.selection.main.head).brackets||d0.brackets,r=null,s=i.changeByRange(a=>{if(a.empty){let l=k2e(i.doc,a.head);for(let h of t)if(h==l&&Ox(i.doc,a.head)==Hz(yr(h,0)))return{changes:{from:a.head-h.length,to:a.head+h.length},range:Ze.cursor(a.head-h.length)}}return{range:r=a}});return r||e(i.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},S2e=[{key:"Backspace",run:_2e}];function C2e(i,e){let n=Gz(i,i.selection.main.head),t=n.brackets||d0.brackets;for(let r of t){let s=Hz(yr(r,0));if(e==r)return s==r?E2e(i,r,t.indexOf(r+r+r)>-1,n):T2e(i,r,s,n.before||d0.before);if(e==s&&Yz(i,i.selection.main.from))return M2e(i,r,s)}return null}function Yz(i,e){let n=!1;return i.field(Qz).between(0,i.doc.length,t=>{t==e&&(n=!0)}),n}function Ox(i,e){let n=i.sliceString(e,e+2);return n.slice(0,vo(yr(n,0)))}function k2e(i,e){let n=i.sliceString(e-2,e);return vo(yr(n,0))==n.length?n:n.slice(1)}function T2e(i,e,n,t){let r=null,s=i.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:qh.of(a.to+e.length),range:Ze.range(a.anchor+e.length,a.head+e.length)};let l=Ox(i.doc,a.head);return!l||/\s/.test(l)||t.indexOf(l)>-1?{changes:{insert:e+n,from:a.head},effects:qh.of(a.head+e.length),range:Ze.cursor(a.head+e.length)}:{range:r=a}});return r?null:i.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function M2e(i,e,n){let t=null,r=i.changeByRange(s=>s.empty&&Ox(i.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:Ze.cursor(s.head+n.length)}:t={range:s});return t?null:i.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function E2e(i,e,n,t){let r=t.stringPrefixes||d0.stringPrefixes,s=null,a=i.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:qh.of(l.to+e.length),range:Ze.range(l.anchor+e.length,l.head+e.length)};let h=l.head,u=Ox(i.doc,h),f;if(u==e){if(AD(i,h))return{changes:{insert:e+e,from:h},effects:qh.of(h+e.length),range:Ze.cursor(h+e.length)};if(Yz(i,h)){let g=n&&i.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+g.length,insert:g},range:Ze.cursor(h+g.length)}}}else{if(n&&i.sliceDoc(h-2*e.length,h)==e+e&&(f=RD(i,h-2*e.length,r))>-1&&AD(i,f))return{changes:{insert:e+e+e+e,from:h},effects:qh.of(h+e.length),range:Ze.cursor(h+e.length)};if(i.charCategorizer(h)(u)!=wi.Word&&RD(i,h,r)>-1&&!P2e(i,h,e,r))return{changes:{insert:e+e,from:h},effects:qh.of(h+e.length),range:Ze.cursor(h+e.length)}}return{range:s=l}});return s?null:i.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function AD(i,e){let n=Lr(i).resolveInner(e+1);return n.parent&&n.from==e}function P2e(i,e,n,t){let r=Lr(i).resolveInner(e,-1),s=t.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=i.sliceDoc(r.from,Math.min(r.to,r.from+n.length+s)),h=l.indexOf(n);if(!h||h>-1&&t.indexOf(l.slice(0,h))>-1){let f=r.firstChild;for(;f&&f.from==r.from&&f.to-f.from>n.length+h;){if(i.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let u=r.to==e&&r.parent;if(!u)break;r=u}return!1}function RD(i,e,n){let t=i.charCategorizer(e);if(t(i.sliceDoc(e-1,e))!=wi.Word)return e;for(let r of n){let s=e-r.length;if(i.sliceDoc(s,e)==r&&t(i.sliceDoc(s-1,s))!=wi.Word)return s}return-1}function A2e(i={}){return[y2e,xs,Or.of(i),g2e,R2e,b2e]}const jz=[{key:"Ctrl-Space",run:u2e},{key:"Escape",run:d2e},{key:"ArrowDown",run:k1(!0)},{key:"ArrowUp",run:k1(!1)},{key:"PageDown",run:k1(!0,"page")},{key:"PageUp",run:k1(!1,"page")},{key:"Enter",run:h2e}],R2e=Ru.highest(PM.computeN([Or],i=>i.facet(Or).defaultKeymap?[jz]:[]));class I2e{constructor(e,n,t){this.from=e,this.to=n,this.diagnostic=t}}class Fh{constructor(e,n,t){this.diagnostics=e,this.panel=n,this.selected=t}static init(e,n,t){let r=e,s=t.facet(f0).markerFilter;s&&(r=s(r,t));let a=Yt.set(r.map(l=>l.from==l.to||l.from==l.to-1&&t.doc.lineAt(l.from).to==l.from?Yt.widget({widget:new F2e(l),diagnostic:l}).range(l.from):Yt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new Fh(a,n,Df(a))}}function Df(i,e=null,n=0){let t=null;return i.between(n,1e9,(r,s,{spec:a})=>{if(!(e&&a.diagnostic!=e))return t=new I2e(r,s,a.diagnostic),!1}),t}function D2e(i,e){let n=e.pos,t=e.end||n,r=i.state.facet(f0).hideOn(i,n,t);if(r!=null)return r;let s=i.startState.doc.lineAt(e.pos);return!!(i.effects.some(a=>a.is(qz))||i.changes.touchesRange(s.from,Math.max(s.to,t)))}function N2e(i,e){return i.field(eo,!1)?e:e.concat(gn.appendConfig.of(Q2e))}const qz=gn.define(),jM=gn.define(),Zz=gn.define(),eo=kr.define({create(){return new Fh(Yt.none,null,null)},update(i,e){if(e.docChanged&&i.diagnostics.size){let n=i.diagnostics.map(e.changes),t=null,r=i.panel;if(i.selected){let s=e.changes.mapPos(i.selected.from,1);t=Df(n,i.selected.diagnostic,s)||Df(n,null,s)}!n.size&&r&&e.state.facet(f0).autoPanel&&(r=null),i=new Fh(n,r,t)}for(let n of e.effects)if(n.is(qz)){let t=e.state.facet(f0).autoPanel?n.value.length?p0.open:null:i.panel;i=Fh.init(n.value,t,e.state)}else n.is(jM)?i=new Fh(i.diagnostics,n.value?p0.open:null,i.selected):n.is(Zz)&&(i=new Fh(i.diagnostics,i.panel,n.value));return i},provide:i=>[a0.from(i,e=>e.panel),vt.decorations.from(i,e=>e.diagnostics)]}),$2e=Yt.mark({class:"cm-lintRange cm-lintRange-active"});function V2e(i,e,n){let{diagnostics:t}=i.state.field(eo),r=[],s=2e8,a=0;t.between(e-(n<0?1:0),e+(n>0?1:0),(h,u,{spec:f})=>{e>=h&&e<=u&&(h==u||(e>h||n>0)&&(e<u||n<0))&&(r.push(f.diagnostic),s=Math.min(h,s),a=Math.max(u,a))});let l=i.state.facet(f0).tooltipFilter;return l&&(r=l(r,i.state)),r.length?{pos:s,end:a,above:i.state.doc.lineAt(s).to<a,create(){return{dom:L2e(i,r)}}}:null}function L2e(i,e){return oi("ul",{class:"cm-tooltip-lint"},e.map(n=>Jz(i,n,!1)))}const B2e=i=>{let e=i.state.field(eo,!1);(!e||!e.panel)&&i.dispatch({effects:N2e(i.state,[jM.of(!0)])});let n=o0(i,p0.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},ID=i=>{let e=i.state.field(eo,!1);return!e||!e.panel?!1:(i.dispatch({effects:jM.of(!1)}),!0)},U2e=i=>{let e=i.state.field(eo,!1);if(!e)return!1;let n=i.state.selection.main,t=e.diagnostics.iter(n.to+1);return!t.value&&(t=e.diagnostics.iter(0),!t.value||t.from==n.from&&t.to==n.to)?!1:(i.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0}),!0)},z2e=[{key:"Mod-Shift-m",run:B2e,preventDefault:!0},{key:"F8",run:U2e}],f0=wt.define({combine(i){return Object.assign({sources:i.map(e=>e.source).filter(e=>e!=null)},Na(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?t=>e(t)||n(t):e:n}))}});function Kz(i){let e=[];if(i)e:for(let{name:n}of i){for(let t=0;t<n.length;t++){let r=n[t];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Jz(i,e,n){var t;let r=n?Kz(e.actions):[];return oi("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},oi("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(i):e.message),(t=e.actions)===null||t===void 0?void 0:t.map((s,a)=>{let l=!1,h=g=>{if(g.preventDefault(),l)return;l=!0;let v=Df(i.state.field(eo).diagnostics,e);v&&s.apply(i,v.from,v.to)},{name:u}=s,f=r[a]?u.indexOf(r[a]):-1,p=f<0?u:[u.slice(0,f),oi("u",u.slice(f,f+1)),u.slice(f+1)];return oi("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${u}${f<0?"":` (access key "${r[a]})"`}.`},p)}),e.source&&oi("div",{class:"cm-diagnosticSource"},e.source))}class F2e extends th{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return oi("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class DD{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Jz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class p0{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)ID(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=Kz(s.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==r.keyCode){let h=Df(this.view.state.field(eo).diagnostics,s);h&&s.actions[l].apply(e,h.from,h.to)}}else return;r.preventDefault()},t=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=oi("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:t}),this.dom=oi("div",{class:"cm-panel-lint"},this.list,oi("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ID(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(eo).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(eo),t=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(a,l,{spec:h})=>{let u=-1,f;for(let p=t;p<this.items.length;p++)if(this.items[p].diagnostic==h.diagnostic){u=p;break}u<0?(f=new DD(this.view,h.diagnostic),this.items.splice(t,0,f),r=!0):(f=this.items[u],u>t&&(this.items.splice(t,u-t),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),t++});t<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new DD(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let h=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/h:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let t=e;e=t.nextSibling,t.remove()}for(let t of this.items)if(t.dom.parentNode==this.list){for(;e!=t.dom;)n();e=t.dom.nextSibling}else this.list.insertBefore(t.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(eo),t=Df(n.diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:Zz.of(t)})}static open(e){return new p0(e)}}function X2e(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function T1(i){return X2e(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const W2e=vt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:T1("#d11")},".cm-lintRange-warning":{backgroundImage:T1("orange")},".cm-lintRange-info":{backgroundImage:T1("#999")},".cm-lintRange-hint":{backgroundImage:T1("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Q2e=[eo,vt.decorations.compute([eo],i=>{let{selected:e,panel:n}=i.field(eo);return!e||!n||e.from==e.to?Yt.none:Yt.set([$2e.range(e.from,e.to)])}),Nwe(V2e,{hideOn:D2e}),W2e],eO=[Hwe(),jwe(),dwe(),pSe(),U_e(),twe(),owe(),Ln.allowMultipleSelections.of(!0),k_e(),F_e(Q_e,{fallback:!0}),K_e(),O2e(),A2e(),Swe(),Twe(),ywe(),_Ce(),PM.of([...S2e,...vCe,...FCe,..._Se,...$_e,...jz,...z2e])];var ND={};class tO{constructor(e,n,t,r,s,a,l,h,u,f=0,p){this.p=e,this.stack=n,this.state=t,this.reducePos=r,this.pos=s,this.score=a,this.buffer=l,this.bufferBase=h,this.curContext=u,this.lookAhead=f,this.parent=p}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,t=0){let r=e.parser.context;return new tO(e,[],n,t,t,0,[],0,r?new $D(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let t=e>>19,r=e&65535,{parser:s}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(r);if(l&&(this.score+=l),t==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(r,this.reducePos);return}let h=this.stack.length-(t-1)*3-(e&262144?6:0),u=h?this.stack[h-2]:this.p.ranges[0].from,f=this.reducePos-u;f>=2e3&&!(!((n=this.p.parser.nodeSet.types[r])===null||n===void 0)&&n.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=f));let p=h?this.stack[h-1]:0,g=this.bufferBase+this.buffer.length-p;if(r<s.minRepeatTerm||e&131072){let v=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,u,v,g+4,!0)}if(e&262144)this.state=this.stack[h];else{let v=this.stack[h-3];this.state=s.getGoto(v,r,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(r,u)}storeNode(e,n,t,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,l=this.buffer.length;if(l==0&&a.parent&&(l=a.bufferBase-a.parent.bufferBase,a=a.parent),l>0&&a.buffer[l-4]==0&&a.buffer[l-1]>-1){if(n==t)return;if(a.buffer[l-2]>=n){a.buffer[l-2]=t;return}}}if(!s||this.pos==t)this.buffer.push(e,n,t,r);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let l=!1;for(let h=a;h>0&&this.buffer[h-2]>t;h-=4)if(this.buffer[h-1]>=0){l=!0;break}if(l)for(;a>0&&this.buffer[a-2]>t;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,r>4&&(r-=4)}this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=t,this.buffer[a+3]=r}}shift(e,n,t,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(n,t),n<=this.p.parser.maxNode&&this.buffer.push(n,t,r,4);else{let s=e,{parser:a}=this.p;(r>this.pos||n<=a.maxNode)&&(this.pos=r,a.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,t),this.shiftContext(n,t),n<=a.maxNode&&this.buffer.push(n,t,r,4)}}apply(e,n,t,r){e&65536?this.reduce(e):this.shift(e,n,t,r)}useNode(e,n){let t=this.p.reused.length-1;(t<0||this.p.reused[t]!=e)&&(this.p.reused.push(e),t++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(n,r),this.buffer.push(t,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let t=e.buffer.slice(n),r=e.bufferBase+n;for(;e&&r==e.bufferBase;)e=e.parent;return new tO(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,t,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let t=e<=this.p.parser.maxNode;t&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,t?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new H2e(this);;){let t=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(t==0)return!1;if(!(t&65536))return!0;n.reduce(t)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let r=[];for(let s=0,a;s<n.length;s+=2)(a=n[s+1])!=this.state&&this.p.parser.hasAction(a,e)&&r.push(n[s],a);if(this.stack.length<120)for(let s=0;r.length<8&&s<n.length;s+=2){let a=n[s+1];r.some((l,h)=>h&1&&l==a)||r.push(n[s],a)}n=r}let t=[];for(let r=0;r<n.length&&t.length<4;r+=2){let s=n[r+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[r],this.pos),a.reducePos=this.pos,a.score-=200,t.push(a)}return t}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let t=n>>19,r=n&65535,s=this.stack.length-t*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],t=(r,s)=>{if(!n.includes(r))return n.push(r),e.allActions(r,a=>{if(!(a&393216))if(a&65536){let l=(a>>19)-s;if(l>1){let h=a&65535,u=this.stack.length-l*3;if(u>=0&&e.getGoto(this.stack[u],h,!1)>=0)return l<<19|65536|h}}else{let l=t(a,s+1);if(l!=null)return l}})};return t(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new $D(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class $D{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class H2e{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,t=e>>19;t==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(t-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=r}}class nO{constructor(e,n,t){this.stack=e,this.pos=n,this.index=t,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new nO(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new nO(this.stack,this.pos,this.index)}}function M1(i,e=Uint16Array){if(typeof i!="string")return i;let n=null;for(let t=0,r=0;t<i.length;){let s=0;for(;;){let a=i.charCodeAt(t++),l=!1;if(a==126){s=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,l=!0),s+=h,l)break;s*=46}n?n[r++]=s:n=new e(s)}return n}class eb{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const VD=new eb;class G2e{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=VD,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let t=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<t.from;){if(!r)return null;let a=this.ranges[--r];s-=t.from-a.to,t=a}for(;n<0?s>t.to:s>=t.to;){if(r==this.ranges.length-1)return null;let a=this.ranges[++r];s+=a.from-t.to,t=a}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,t,r;if(n>=0&&n<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(t=s,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let a=this.rangeIndex,l=this.range;for(;l.to<=t;)l=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,n=0){let t=n?this.resolveOffset(n,-1):this.pos;if(t==null||t<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=t}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=VD,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let t="";for(let r of this.ranges){if(r.from>=n)break;r.to>e&&(t+=this.input.read(Math.max(r.from,e),Math.min(r.to,n)))}return t}}class of{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:t}=n.p;Y2e(this.data,e,n,this.id,t.data,t.tokenPrecTable)}}of.prototype.contextual=of.prototype.fallback=of.prototype.extend=!1;of.prototype.fallback=of.prototype.extend=!1;class e7{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function Y2e(i,e,n,t,r,s){let a=0,l=1<<t,{dialect:h}=n.p.parser;e:for(;l&i[a];){let u=i[a+1];for(let v=a+3;v<u;v+=2)if((i[v+1]&l)>0){let y=i[v];if(h.allows(y)&&(e.token.value==-1||e.token.value==y||j2e(y,e.token.value,r,s))){e.acceptToken(y);break}}let f=e.next,p=0,g=i[a+2];if(e.next<0&&g>p&&i[u+g*3-3]==65535){a=i[u+g*3-1];continue e}for(;p<g;){let v=p+g>>1,y=u+v+(v<<1),w=i[y],x=i[y+1]||65536;if(f<w)g=v;else if(f>=x)p=v+1;else{a=i[y+2],e.advance();continue e}}break}}function LD(i,e,n){for(let t=e,r;(r=i[t])!=65535;t++)if(r==n)return t-e;return-1}function j2e(i,e,n,t){let r=LD(n,t,e);return r<0||LD(n,t,i)<r}const Qs=typeof process<"u"&&ND&&/\bparse\b/.test(ND.LOG);let LS=null;function BD(i,e,n){let t=i.cursor(ur.IncludeAnonymous);for(t.moveTo(e);;)if(!(n<0?t.childBefore(e):t.childAfter(e)))for(;;){if((n<0?t.to<e:t.from>e)&&!t.type.isError)return n<0?Math.max(0,Math.min(t.to-1,e-25)):Math.min(i.length,Math.max(t.from+1,e+25));if(n<0?t.prevSibling():t.nextSibling())break;if(!t.parent())return n<0?0:i.length}}class q2e{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?BD(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?BD(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let t=this.trees[n],r=this.index[n];if(r==t.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=t.children[r],a=this.start[n]+t.positions[r];if(a>e)return this.nextStart=a,null;if(s instanceof Qi){if(a==e){if(a<this.safeFrom)return null;let l=a+s.length;if(l<=this.safeTo){let h=s.prop(bn.lookAhead);if(!h||l+h<this.fragment.to)return s}}this.index[n]++,a+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+s.length}}}class Z2e{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(t=>new eb)}getActions(e){let n=0,t=null,{parser:r}=e.p,{tokenizers:s}=r,a=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,h=0;for(let u=0;u<s.length;u++){if(!(1<<u&a))continue;let f=s[u],p=this.tokens[u];if(!(t&&!f.fallback)&&((f.contextual||p.start!=e.pos||p.mask!=a||p.context!=l)&&(this.updateCachedToken(p,f,e),p.mask=a,p.context=l),p.lookAhead>p.end+25&&(h=Math.max(p.lookAhead,h)),p.value!=0)){let g=n;if(p.extended>-1&&(n=this.addActions(e,p.extended,p.end,n)),n=this.addActions(e,p.value,p.end,n),!f.extend&&(t=p,n>g))break}}for(;this.actions.length>n;)this.actions.pop();return h&&e.setLookAhead(h),!t&&e.pos==this.stream.end&&(t=new eb,t.value=e.p.parser.eofTerm,t.start=t.end=e.pos,n=this.addActions(e,t.value,t.end,n)),this.mainToken=t,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new eb,{pos:t,p:r}=e;return n.start=t,n.end=Math.min(t+1,r.stream.end),n.value=t==r.stream.end?r.parser.eofTerm:0,n}updateCachedToken(e,n,t){let r=this.stream.clipPos(t.pos);if(n.token(this.stream.reset(r,e),t),e.value>-1){let{parser:s}=t.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==e.value){let l=s.specializers[a](this.stream.read(e.start,e.end),t);if(l>=0&&t.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,n,t,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=n,this.actions[r++]=t,r}addActions(e,n,t,r){let{state:s}=e,{parser:a}=e.p,{data:l}=a;for(let h=0;h<2;h++)for(let u=a.stateSlot(s,h?2:1);;u+=3){if(l[u]==65535)if(l[u+1]==1)u=il(l,u+2);else{r==0&&l[u+1]==2&&(r=this.putAction(il(l,u+2),n,t,r));break}l[u]==n&&(r=this.putAction(il(l,u+1),n,t,r))}return r}}class K2e{constructor(e,n,t,r){this.parser=e,this.input=n,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new G2e(n,r),this.tokens=new Z2e(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[tO.start(this,e.top[0],s)],this.fragments=t.length&&this.stream.end-s>e.bufferLength*4?new q2e(t,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,t=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let l=e[a];for(;;){if(this.tokens.mainToken=null,l.pos>n)t.push(l);else{if(this.advanceStack(l,t,e))continue;{r||(r=[],s=[]),r.push(l);let h=this.tokens.getMainToken(l);s.push(h.value,h.end)}}break}}if(!t.length){let a=r&&eke(r);if(a)return Qs&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Qs&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&r){let a=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,t);if(a)return Qs&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(t.length>a)for(t.sort((l,h)=>h.score-l.score);t.length>a;)t.pop();t.some(l=>l.reducePos>n)&&this.recovering--}else if(t.length>1){e:for(let a=0;a<t.length-1;a++){let l=t[a];for(let h=a+1;h<t.length;h++){let u=t[h];if(l.sameState(u)||l.buffer.length>500&&u.buffer.length>500)if((l.score-u.score||l.buffer.length-u.buffer.length)>0)t.splice(h--,1);else{t.splice(a--,1);continue e}}}t.length>12&&t.splice(12,t.length-12)}this.minStackPos=t[0].pos;for(let a=1;a<t.length;a++)t[a].pos<this.minStackPos&&(this.minStackPos=t[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,t){let r=e.pos,{parser:s}=this,a=Qs?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,f=u?e.curContext.hash:0;for(let p=this.fragments.nodeAt(r);p;){let g=this.parser.nodeSet.types[p.type.id]==p.type?s.getGoto(e.state,p.type.id):-1;if(g>-1&&p.length&&(!u||(p.prop(bn.contextHash)||0)==f))return e.useNode(p,g),Qs&&console.log(a+this.stackID(e)+` (via reuse of ${s.getName(p.type.id)})`),!0;if(!(p instanceof Qi)||p.children.length==0||p.positions[0]>0)break;let v=p.children[0];if(v instanceof Qi&&p.positions[0]==0)p=v;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),Qs&&console.log(a+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let u=0;u<h.length;){let f=h[u++],p=h[u++],g=h[u++],v=u==h.length||!t,y=v?e:e.split(),w=this.tokens.mainToken;if(y.apply(f,p,w?w.start:y.pos,g),Qs&&console.log(a+this.stackID(y)+` (via ${f&65536?`reduce of ${s.getName(f&65535)}`:"shift"} for ${s.getName(p)} @ ${r}${y==e?"":", split"})`),v)return!0;y.pos>r?n.push(y):t.push(y)}return!1}advanceFully(e,n){let t=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>t)return UD(e,n),!0}}runRecovery(e,n,t){let r=null,s=!1;for(let a=0;a<e.length;a++){let l=e[a],h=n[a<<1],u=n[(a<<1)+1],f=Qs?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),Qs&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,t))))continue;let p=l.split(),g=f;for(let v=0;p.forceReduce()&&v<10&&(Qs&&console.log(g+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,t));v++)Qs&&(g=this.stackID(p)+" -> ");for(let v of l.recoverByInsert(h))Qs&&console.log(f+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,t);this.stream.end>l.pos?(u==l.pos&&(u++,h=0),l.recoverByDelete(h,u),Qs&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(h)})`),UD(l,t)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),Qi.build({buffer:nO.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(LS||(LS=new WeakMap)).get(e);return n||LS.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function UD(i,e){for(let n=0;n<e.length;n++){let t=e[n];if(t.pos==i.pos&&t.sameState(i)){e[n].score<i.score&&(e[n]=i);return}}e.push(i)}class J2e{constructor(e,n,t){this.source=e,this.flags=n,this.disabled=t}allows(e){return!this.disabled||this.disabled[e]==0}}class iO extends I9{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let l=0;l<e.repeatNodeCount;l++)n.push("");let t=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<n.length;l++)r.push([]);function s(l,h,u){r[l].push([h,h.deserialize(String(u))])}if(e.nodeProps)for(let l of e.nodeProps){let h=l[0];typeof h=="string"&&(h=bn[h]);for(let u=1;u<l.length;){let f=l[u++];if(f>=0)s(f,h,l[u++]);else{let p=l[u+-f];for(let g=-f;g>0;g--)s(l[u++],h,p);u++}}}this.nodeSet=new IM(n.map((l,h)=>Rs.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:r[h],top:t.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=E9;let a=M1(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(zD),this.states=M1(e.states,Uint32Array),this.data=M1(e.stateData),this.goto=M1(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new of(a,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,t){let r=new K2e(this,e,n,t);for(let s of this.wrappers)r=s(r,e,n,t);return r}getGoto(e,n,t=!1){let r=this.goto;if(n>=r[0])return-1;for(let s=r[n+1];;){let a=r[s++],l=a&1,h=r[s++];if(l&&t)return h;for(let u=s+(a>>1);s<u;s++)if(r[s]==e)return h;if(l)return-1}}hasAction(e,n){let t=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),a;;s+=3){if((a=t[s])==65535)if(t[s+1]==1)a=t[s=il(t,s+2)];else{if(t[s+1]==2)return il(t,s+2);break}if(a==n||a==0)return il(t,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,t=>t==n?!0:null)}allActions(e,n){let t=this.stateSlot(e,4),r=t?n(t):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=il(this.data,s+2);else break;r=n(il(this.data,s+1))}return r}nextStates(e){let n=[];for(let t=this.stateSlot(e,1);;t+=3){if(this.data[t]==65535)if(this.data[t+1]==1)t=il(this.data,t+2);else break;if(!(this.data[t+2]&1)){let r=this.data[t+1];n.some((s,a)=>a&1&&s==r)||n.push(this.data[t],r)}}return n}configure(e){let n=Object.assign(Object.create(iO.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let t=this.topRules[e.top];if(!t)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=t}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(t=>{let r=e.tokenizers.find(s=>s.from==t);return r?r.to:t})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((t,r)=>{let s=e.specializers.find(l=>l.from==t.external);if(!s)return t;let a=Object.assign(Object.assign({},t),{external:s.to});return n.specializers[r]=zD(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),t=n.map(()=>!1);if(e)for(let s of e.split(" ")){let a=n.indexOf(s);a>=0&&(t[a]=!0)}let r=null;for(let s=0;s<n.length;s++)if(!t[s])for(let a=this.dialects[n[s]],l;(l=this.data[a++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new J2e(e,t,r)}static deserialize(e){return new iO(e)}}function il(i,e){return i[e]|i[e+1]<<16}function eke(i){let e=null;for(let n of i){let t=n.p.stoppedAt;(n.pos==n.p.stream.end||t!=null&&n.pos>t)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function zD(i){if(i.external){let e=i.extend?1:0;return(n,t)=>i.external(n,t)<<1|e}return i.get}const FD=1,tke=2,nke=3,ike=82,rke=76,ske=117,oke=85,ake=97,lke=122,cke=65,hke=90,uke=95,tk=48,XD=34,dke=40,WD=41,fke=32,QD=62,pke=new e7(i=>{if(i.next==rke||i.next==oke?i.advance():i.next==ske&&(i.advance(),i.next==tk+8&&i.advance()),i.next!=ike||(i.advance(),i.next!=XD))return;i.advance();let e="";for(;i.next!=dke;){if(i.next==fke||i.next<=13||i.next==WD)return;e+=String.fromCharCode(i.next),i.advance()}for(i.advance();;){if(i.next<0)return i.acceptToken(FD);if(i.next==WD){let n=!0;for(let t=0;n&&t<e.length;t++)i.peek(t+1)!=e.charCodeAt(t)&&(n=!1);if(n&&i.peek(e.length+1)==XD)return i.acceptToken(FD,2+e.length)}i.advance()}}),mke=new e7(i=>{if(i.next==QD)i.peek(1)==QD&&i.acceptToken(tke,1);else{let e=!1,n=0;for(;;n++){if(i.next>=cke&&i.next<=hke)e=!0;else{if(i.next>=ake&&i.next<=lke)return;if(i.next!=uke&&!(i.next>=tk&&i.next<=tk+9))break}i.advance()}e&&n>1&&i.acceptToken(nke)}},{extend:!0}),gke=D9({"typedef struct union enum class typename decltype auto template operator friend noexcept namespace using requires concept import export module __attribute__ __declspec __based":We.definitionKeyword,"extern MsCallModifier MsPointerModifier extern static register thread_local inline const volatile restrict _Atomic mutable constexpr constinit consteval virtual explicit VirtualSpecifier Access":We.modifier,"if else switch for while do case default return break continue goto throw try catch":We.controlKeyword,"co_return co_yield co_await":We.controlKeyword,"new sizeof delete static_assert":We.operatorKeyword,"NULL nullptr":We.null,this:We.self,"True False":We.bool,"TypeSize PrimitiveType":We.standard(We.typeName),TypeIdentifier:We.typeName,FieldIdentifier:We.propertyName,"CallExpression/FieldExpression/FieldIdentifier":We.function(We.propertyName),"ModuleName/Identifier":We.namespace,PartitionName:We.labelName,StatementIdentifier:We.labelName,"Identifier DestructorName":We.variableName,"CallExpression/Identifier":We.function(We.variableName),"CallExpression/ScopedIdentifier/Identifier":We.function(We.variableName),"FunctionDeclarator/Identifier FunctionDeclarator/DestructorName":We.function(We.definition(We.variableName)),NamespaceIdentifier:We.namespace,OperatorName:We.operator,ArithOp:We.arithmeticOperator,LogicOp:We.logicOperator,BitOp:We.bitwiseOperator,CompareOp:We.compareOperator,AssignOp:We.definitionOperator,UpdateOp:We.updateOperator,LineComment:We.lineComment,BlockComment:We.blockComment,Number:We.number,String:We.string,"RawString SystemLibString":We.special(We.string),CharLiteral:We.character,EscapeSequence:We.escape,"UserDefinedLiteral/Identifier":We.literal,PreProcArg:We.meta,"PreprocDirectiveName #include #ifdef #ifndef #if #define #else #endif #elif":We.processingInstruction,MacroName:We.special(We.name),"( )":We.paren,"[ ]":We.squareBracket,"{ }":We.brace,"< >":We.angleBracket,". ->":We.derefOperator,", ;":We.separator}),vke={__proto__:null,bool:34,char:34,int:34,float:34,double:34,void:34,size_t:34,ssize_t:34,intptr_t:34,uintptr_t:34,charptr_t:34,int8_t:34,int16_t:34,int32_t:34,int64_t:34,uint8_t:34,uint16_t:34,uint32_t:34,uint64_t:34,char8_t:34,char16_t:34,char32_t:34,char64_t:34,const:68,volatile:70,restrict:72,_Atomic:74,mutable:76,constexpr:78,constinit:80,consteval:82,struct:86,__declspec:90,final:148,override:148,public:152,private:152,protected:152,virtual:154,extern:160,static:162,register:164,inline:166,thread_local:168,__attribute__:172,__based:178,__restrict:180,__uptr:180,__sptr:180,_unaligned:180,__unaligned:180,noexcept:194,requires:198,TRUE:784,true:784,FALSE:786,false:786,typename:218,class:220,template:234,throw:248,__cdecl:256,__clrcall:256,__stdcall:256,__fastcall:256,__thiscall:256,__vectorcall:256,try:260,catch:264,export:282,import:286,case:296,default:298,if:308,else:314,switch:318,do:322,while:324,for:330,return:334,break:338,continue:342,goto:346,co_return:350,co_yield:354,using:362,typedef:366,namespace:380,new:398,delete:400,co_await:402,concept:406,enum:410,static_assert:414,friend:422,union:424,explicit:430,operator:444,module:456,signed:518,unsigned:518,long:518,short:518,decltype:528,auto:530,sizeof:566,NULL:572,nullptr:586,this:588},yke={__proto__:null,"<":131},bke={__proto__:null,">":135},Oke={__proto__:null,operator:388,new:576,delete:582},xke=iO.deserialize({version:14,states:"$:|Q!QQVOOP'gOUOOO(XOWO'#CdO,RQUO'#CgO,]QUO'#FjO-sQbO'#CwO.UQUO'#CwO0TQUO'#KZO0[QUO'#CvO0gOpO'#DvO0oQ!dO'#D]OOQR'#JO'#JOO5XQVO'#GUO5fQUO'#JVOOQQ'#JV'#JVO8zQUO'#KmO<eQUO'#KmO>{QVO'#E^O?]QUO'#E^OOQQ'#Ed'#EdOOQQ'#Ee'#EeO?bQVO'#EfO@XQVO'#EiOBUQUO'#FPOBvQUO'#FhOOQR'#Fj'#FjOB{QUO'#FjOOQR'#LQ'#LQOOQR'#LP'#LPOETQVO'#KQOFxQUO'#LVOGVQUO'#KqOGkQUO'#LVOH]QUO'#LXOOQR'#HU'#HUOOQR'#HV'#HVOOQR'#HW'#HWOOQR'#K|'#K|OOQR'#J_'#J_Q!QQVOOOHkQVO'#FOOIWQUO'#EhOI_QUOOOKZQVO'#HgOKkQUO'#HgONVQUO'#KqONaQUO'#KqOOQQ'#Kq'#KqO!!_QUO'#KqOOQQ'#Jq'#JqO!!lQUO'#HxOOQQ'#KZ'#KZO!&^QUO'#KZO!&zQUO'#KQO!(zQVO'#I]O!(zQVO'#I`OCQQUO'#KQOOQQ'#Ip'#IpOOQQ'#KQ'#KQO!,}QUO'#KZOOQR'#KY'#KYO!-UQUO'#DYO!/mQUO'#KnOOQQ'#Kn'#KnO!/tQUO'#KnO!/{QUO'#ETO!0QQUO'#EWO!0VQUO'#FRO8zQUO'#FPO!QQVO'#F^O!0[Q#vO'#F`O!0gQUO'#FkO!0oQUO'#FpO!0tQVO'#FrO!0oQUO'#FuO!3sQUO'#FvO!3xQVO'#FxO!4SQUO'#FzO!4XQUO'#F|O!4^QUO'#GOO!4cQVO'#GQO!(zQVO'#GSO!4jQUO'#GpO!4xQUO'#GYO!(zQVO'#FeO!6VQUO'#FeO!6[QVO'#G`O!6cQUO'#GaO!6nQUO'#GnO!6sQUO'#GrO!6xQUO'#GzO!7jQ&lO'#HiO!:mQUO'#GuO!:}QUO'#HXO!;YQUO'#HZO!;bQUO'#DWO!;bQUO'#HuO!;bQUO'#HvO!;yQUO'#HwO!<[QUO'#H|O!=PQUO'#H}O!>uQVO'#IbO!(zQVO'#IdO!?PQUO'#IgO!?WQVO'#IjP!@}{,UO'#CbP!6n{,UO'#CbP!AY{7[O'#CbP!6n{,UO'#CbP!A_{,UO'#CbP!AjOSO'#IzPOOO)CEn)CEnOOOO'#I|'#I|O!AtOWO,59OOOQR,59O,59OO!(zQVO,59UOOQQ,59W,59WO!(zQVO,5;ROOQR,5<U,5<UO!BPQUO,59YO!(zQVO,5>qOOQR'#IX'#IXOOQR'#IY'#IYOOQR'#IZ'#IZOOQR'#I['#I[O!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!DOQVO,5>zOOQQ,5?W,5?WO!EqQVO'#ChO!IjQUO'#CyOOQQ,59c,59cOOQQ,59b,59bOOQQ,5<},5<}O!IwQ&lO,5=mO!?PQUO,5?RO!LkQVO,5?UO!LrQbO,59cO!L}QVO'#FYOOQQ,5?P,5?PO!M_QVO,59VO!MfO`O,5:bO!MkQbO'#D^O!M|QbO'#K^O!N[QbO,59wO!NdQbO'#CwO!NuQUO'#CwO!NzQUO'#KZO# UQUO'#CvOOQR-E<|-E<|O# aQUO,5AoO# hQVO'#EfO@XQVO'#EiOBUQUO,5;kOOQR,5<p,5<pO#$aQUO'#KQO#$hQUO'#KQO!(zQVO'#IUO8zQUO,5;kO#${Q&lO'#HiO#(SQUO'#CsO#*wQbO'#CwO#*|QUO'#CvO#.jQUO'#KZOOQQ-E=T-E=TO#0}QUO,5AXO#1XQUO'#KZO#1cQUO,5AXOOQR,5Ao,5AoOOQQ,5>l,5>lO#3gQUO'#CgO#4]QUO,5>pO#6OQUO'#IeOOQR'#I}'#I}O#6WQUO,5:xO#6tQUO,5:xO#7eQUO,5:xO#8YQUO'#CtO!0QQUO'#ClOOQQ'#JW'#JWO#6tQUO,5:xO#8bQUO,5;QO!4xQUO'#C}O#9kQUO,5;QO#9pQUO,5>QO#:|QUO'#C}O#;dQUO,5>{O#;iQUO'#KwO#<rQUO,5;TO#<zQVO,5;TO#=UQUO,5;TOOQQ,5;T,5;TO#>}QUO'#L[O#?UQUO,5>UO#?ZQbO'#CwO#?fQUO'#GcO#?kQUO'#E^O#@[QUO,5;kO#@sQUO'#K}O#@{QUO,5;rOKkQUO'#HfOBUQUO'#HgO#AQQUO'#KqO!6nQUO'#HjO#AxQUO'#CtO!0tQVO,5<SOOQQ'#Cg'#CgOOQR'#Jh'#JhO#A}QVO,5=`OOQQ,5?Z,5?ZO#DWQbO'#CwO#DcQUO'#GcOOQQ'#Ji'#JiOOQQ-E=g-E=gOGVQUO,5AqOGkQUO,5AqO#DhQUO,5AsO#DsQUO'#G|OOQR,5Aq,5AqO#DhQUO,5AqO#EOQUO'#HOO#EWQUO,5AsOOQR,5As,5AsOOQR,5At,5AtO#EfQVO,5AtOOQR-E=]-E=]O#G`QVO,5;jOOQR,5;j,5;jO#IaQUO'#EjO#JfQUO'#EwO#K]QVO'#ExO#MoQUO'#EvO#MwQUO'#EyO#NvQUO'#EzOOQQ'#Kz'#KzO$ mQUO,5;SO$!sQUO'#EvOOQQ,5;S,5;SO$#pQUO,5;SO$%cQUO,5:yO$'|QVO,5>PO$(WQUO'#E[O$(eQUO,5>ROOQQ,5>S,5>SO$,RQVO'#C{OOQQ-E=o-E=oOOQQ,5>d,5>dOOQQ,59`,59`O$,]QUO,5>wO$.]QUO,5>zO!6nQUO,59tO$.pQUO,5;qO$.}QUO,5<{O!0QQUO,5:oOOQQ,5:r,5:rO$/YQUO,5;mO$/_QUO'#KmOBUQUO,5;kOOQR,5;x,5;xO$0OQUO'#FbO$0^QUO'#FbO$0cQUO,5;zO$3|QVO'#FmO!0tQVO,5<VO!0oQUO,5<VO!0VQUO,5<[O$4TQVO'#GUO$7PQUO,5<^O!0tQVO,5<aO$:gQVO,5<bO$:tQUO,5<dOOQR,5<d,5<dO$;}QUO,5<dOOQR,5<f,5<fOOQR,5<h,5<hOOQQ'#Fi'#FiO$<SQUO,5<jO$<XQUO,5<lOOQR,5<l,5<lO$=_QUO,5<nO$>eQUO,5<rO$>pQUO,5=[O$>uQUO,5=[O!4xQUO,5<tO$>}QUO,5<tO$?cQUO,5<PO$@iQVO,5<PO$BzQUO,5<zOOQR,5<z,5<zOOQR,5<{,5<{O$>uQUO,5<{O$DQQUO,5<{O$D]QUO,5=YO!(zQVO,5=^O!(zQVO,5=fO#NeQUO,5=mOOQQ,5>T,5>TO$FbQUO,5>TO$FlQUO,5>TO$FqQUO,5>TO$FvQUO,5>TO!6nQUO,5>TO$HtQUO'#KZO$H{QUO,5=oO$IWQUO,5=aOKkQUO,5=oO$JQQUO,5=sOOQR,5=s,5=sO$JYQUO,5=sO$LeQVO'#H[OOQQ,5=u,5=uO!;]QUO,5=uO%#`QUO'#KjO%#gQUO'#K[O%#{QUO'#KjO%$VQUO'#DyO%$hQUO'#D|O%'eQUO'#K[OOQQ'#K['#K[O%)WQUO'#K[O%#gQUO'#K[O%)]QUO'#K[OOQQ,59r,59rOOQQ,5>a,5>aOOQQ,5>b,5>bO%)eQUO'#HzO%)mQUO,5>cOOQQ,5>c,5>cO%-XQUO,5>cO%-dQUO,5>hO%1OQVO,5>iO%1VQUO,5>|O# hQVO'#EfO%4]QUO,5>|OOQQ,5>|,5>|O%4|QUO,5?OO%7QQUO,5?RO!<[QUO,5?RO%8|QUO,5?UO%<iQVO,5?UP!A_{,UO,58|P%<p{,UO,58|P%=O{7[O,58|P%=U{,UO,58|PO{O'#Ju'#JuP%=Z{,UO'#LcPOOO'#Lc'#LcP%=a{,UO'#LcPOOO,58|,58|POOO,5?f,5?fP%=fOSO,5?fOOOO-E<z-E<zOOQR1G.j1G.jO%=mQUO1G.pO%>sQUO1G0mOOQQ1G0m1G0mO%@PQUO'#CoO%B`QbO'#CwO%BkQUO'#CrO%BpQUO'#CrO%BuQUO1G.tO#AxQUO'#CqOOQQ1G.t1G.tO%DxQUO1G4]O%FOQUO1G4^O%GqQUO1G4^O%IdQUO1G4^O%KVQUO1G4^O%LxQUO1G4^O%NkQUO1G4^O&!^QUO1G4^O&$PQUO1G4^O&%rQUO1G4^O&'eQUO1G4^O&)WQUO1G4^O&*yQUO'#KPO&,SQUO'#KPO&,[QUO,59SOOQQ,5=P,5=PO&.dQUO,5=PO&.nQUO,5=PO&.sQUO,5=PO&.xQUO,5=PO!6nQUO,5=PO#NeQUO1G3XO&/SQUO1G4mO!<[QUO1G4mO&1OQUO1G4pO&2qQVO1G4pOOQQ1G.}1G.}OOQQ1G.|1G.|OOQQ1G2i1G2iO!IwQ&lO1G3XO&2xQUO'#LOO@XQVO'#EiO&4RQUO'#F]OOQQ'#Ja'#JaO&4WQUO'#FZO&4cQUO'#LOO&4kQUO,5;tO&4pQUO1G.qOOQQ1G.q1G.qOOQR1G/|1G/|O&6cQ!dO'#JPO&6hQbO,59xO&8yQ!eO'#D`O&9QQ!dO'#JRO&9VQbO,5@xO&9VQbO,5@xOOQR1G/c1G/cO&9bQbO1G/cO&9gQ&lO'#GeO&:eQbO,59cOOQR1G7Z1G7ZO#@[QUO1G1VO&:pQUO1G1^OBUQUO1G1VO&=RQUO'#CyO#*wQbO,59cO&@tQUO1G6sOOQR-E<{-E<{O&BWQUO1G0dO#6WQUO1G0dOOQQ-E=U-E=UO#6tQUO1G0dOOQQ1G0l1G0lO&B{QUO,59iOOQQ1G3l1G3lO&CcQUO,59iO&CyQUO,59iO!M_QVO1G4gO!(zQVO'#JYO&DeQUO,5AcOOQQ1G0o1G0oO!(zQVO1G0oO!6nQUO'#JnO&DmQUO,5AvOOQQ1G3p1G3pOOQR1G1V1G1VO&HjQVO'#FOO!M_QVO,5;sOOQQ,5;s,5;sOBUQUO'#JcO&JfQUO,5AiO&JnQVO'#E[OOQR1G1^1G1^O&M]QUO'#L[OOQR1G1n1G1nOOQR-E=f-E=fOOQR1G7]1G7]O#DhQUO1G7]OGVQUO1G7]O#DhQUO1G7_OOQR1G7_1G7_O&MeQUO'#G}O&MmQUO'#LWOOQQ,5=h,5=hO&M{QUO,5=jO&NQQUO,5=kOOQR1G7`1G7`O#EfQVO1G7`O&NVQUO1G7`O' ]QVO,5=kOOQR1G1U1G1UO$.vQUO'#E]O'!RQUO'#E]OOQQ'#Ky'#KyO'!lQUO'#KxO'!wQUO,5;UO'#PQUO'#ElO'#dQUO'#ElO'#wQUO'#EtOOQQ'#J['#J[O'#|QUO,5;cO'$sQUO,5;cO'%nQUO,5;dO'&tQVO,5;dOOQQ,5;d,5;dO''OQVO,5;dO'&tQVO,5;dO''VQUO,5;bO'(SQUO,5;eO'(_QUO'#KpO'(gQUO,5:vO'(lQUO,5;fOOQQ1G0n1G0nOOQQ'#J]'#J]O''VQUO,5;bO!4xQUO'#E}OOQQ,5;b,5;bO')gQUO'#E`O'+aQUO'#E{OHrQUO1G0nO'+fQUO'#EbOOQQ'#JX'#JXO'-OQUO'#KrOOQQ'#Kr'#KrO'-xQUO1G0eO'.pQUO1G3kO'/vQVO1G3kOOQQ1G3k1G3kO'0QQVO1G3kO'0XQUO'#L_O'1eQUO'#KXO'1sQUO'#KWO'2OQUO,59gO'2WQUO1G/`O'2]QUO'#FPOOQR1G1]1G1]OOQR1G2g1G2gO$>uQUO1G2gO'2gQUO1G2gO'2rQUO1G0ZOOQR'#J`'#J`O'2wQVO1G1XO'8pQUO'#FTO'8uQUO1G1VO!6nQUO'#JdO'9TQUO,5;|O$0^QUO,5;|OOQQ'#Fc'#FcOOQQ,5;|,5;|O'9cQUO1G1fOOQR1G1f1G1fO'9kQUO,5<XO$.vQUO'#FWOBUQUO'#FWO'9rQUO,5<XO!(zQVO,5<XO'9zQUO,5<XO':PQVO1G1qO!0tQVO1G1qOOQR1G1v1G1vO'?oQUO1G1xOOQR1G1{1G1{O'?tQUO1G1|OBUQUO1G2]O'@}QVO1G1|O'CcQUO1G1|O'ChQUO'#GWO8zQUO1G2]OOQR1G2O1G2OOOQR1G2U1G2UOOQR1G2W1G2WOOQR1G2Y1G2YO'CmQUO1G2^O!4xQUO1G2^OOQR1G2v1G2vO'CuQUO1G2vO$>}QUO1G2`OOQQ'#Cu'#CuO'CzQUO'#G[O'DuQUO'#G[O'DzQUO'#LRO'EYQUO'#G_OOQQ'#LS'#LSO'EhQUO1G2`O'EmQVO1G1kO'HOQVO'#GUOBUQUO'#FWOOQR'#Je'#JeO'EmQVO1G1kO'HYQUO'#FvOOQR1G2f1G2fO'H_QUO1G2gO'HdQUO'#JgO'2gQUO1G2gO!(zQVO1G2tO'HlQUO1G2xO'IuQUO1G3QO'J{QUO1G3XOOQQ1G3o1G3oO'KaQUO1G3oOOQR1G3Z1G3ZO'KfQUO'#KZO'2]QUO'#LTOGkQUO'#LVOOQR'#Gy'#GyO#DhQUO'#LXOOQR'#HQ'#HQO'KpQUO'#GvO'#wQUO'#GuOOQR1G2{1G2{O'LmQUO1G2{O'MdQUO1G3ZO'MoQUO1G3_O'MtQUO1G3_OOQR1G3_1G3_O'M|QUO'#H]OOQR'#H]'#H]O( VQUO'#H]O!(zQVO'#H`O!(zQVO'#H_OOQR'#LZ'#LZO( [QUO'#LZOOQR'#Jk'#JkO( aQVO,5=vOOQQ,5=v,5=vO( hQUO'#H^O( pQUO'#HZOOQQ1G3a1G3aO( zQUO,5@vOOQQ,5@v,5@vO%)WQUO,5@vO%)]QUO,5@vO%$VQUO,5:eO(%iQUO'#KkO(%wQUO'#KkOOQQ,5:e,5:eOOQQ'#JS'#JSO(&SQUO'#D}O(&^QUO'#KqOGkQUO'#LVO('YQUO'#D}OOQQ'#Hp'#HpOOQQ'#Hr'#HrOOQQ'#Hs'#HsOOQQ'#Kl'#KlOOQQ'#JU'#JUO('dQUO,5:hOOQQ,5:h,5:hO((aQUO'#LVO((nQUO'#HtO()UQUO,5@vO()]QUO'#H{O()hQUO'#L^O()pQUO,5>fO()uQUO'#L]OOQQ1G3}1G3}O(-lQUO1G3}O(-sQUO1G3}O(-zQUO1G4TO(/QQUO1G4TO(/VQUO,5A|O!6nQUO1G4hO!(zQVO'#IiOOQQ1G4m1G4mO(/[QUO1G4mO(1_QVO1G4pPOOO1G.h1G.hP!A_{,UO1G.hP(3_QUO'#LeP(3j{,UO1G.hP(3o{7[O1G.hPO{O-E=s-E=sPOOO,5A},5A}P(3w{,UO,5A}POOO1G5Q1G5QO!(zQVO7+$[O(3|QUO'#CyOOQQ,59^,59^O(4XQbO,59cO(4dQbO,59^OOQQ,59],59]OOQQ7+)w7+)wO!M_QVO'#JtO(4oQUO,5@kOOQQ1G.n1G.nOOQQ1G2k1G2kO(4wQUO1G2kO(4|QUO7+(sOOQQ7+*X7+*XO(7bQUO7+*XO(7iQUO7+*XO(1_QVO7+*[O#NeQUO7+(sO(7vQVO'#JbO(8ZQUO,5AjO(8cQUO,5;vOOQQ'#Co'#CoOOQQ,5;w,5;wO!(zQVO'#F[OOQQ-E=_-E=_O!M_QVO,5;uOOQQ1G1`1G1`OOQQ,5?k,5?kOOQQ-E<}-E<}OOQR'#Dg'#DgOOQR'#Di'#DiOOQR'#Dl'#DlO(9lQ!eO'#K_O(9sQMkO'#K_O(9zQ!eO'#K_OOQR'#K_'#K_OOQR'#JQ'#JQO(:RQ!eO,59zOOQQ,59z,59zO(:YQbO,5?mOOQQ-E=P-E=PO(:hQbO1G6dOOQR7+$}7+$}OOQR7+&q7+&qOOQR7+&x7+&xO'8uQUO7+&qO(:sQUO7+&OO#6WQUO7+&OO(;hQUO1G/TO(<OQUO1G/TO(<jQUO7+*ROOQQ7+*V7+*VO(>]QUO,5?tOOQQ-E=W-E=WO(?fQUO7+&ZOOQQ,5@Y,5@YOOQQ-E=l-E=lO(?kQUO'#LOO@XQVO'#EiO(@wQUO1G1_OOQQ1G1_1G1_O(BQQUO,5?}OOQQ,5?},5?}OOQQ-E=a-E=aO(BfQUO'#KpOOQR7+,w7+,wO#DhQUO7+,wOOQR7+,y7+,yO(BsQUO,5=iO#DsQUO'#JjO(CUQUO,5ArOOQR1G3U1G3UOOQR1G3V1G3VO(CdQUO7+,zOOQR7+,z7+,zO(E[QUO,5:wO(FyQUO'#EwO!(zQVO,5;VO(GlQUO,5:wO(GvQUO'#EpO(HXQUO'#EzOOQQ,5;Z,5;ZO#K]QVO'#ExO(HoQUO,5:wO(HvQUO'#EyO#GgQUO'#JZO(J`QUO,5AdOOQQ1G0p1G0pO(JkQUO,5;WO!<[QUO,5;^O(KUQUO,5;_O(KdQUO,5;WO(MvQUO,5;`OOQQ-E=Y-E=YO(NOQUO1G0}OOQQ1G1O1G1OO(NyQUO1G1OO)!PQVO1G1OO)!WQVO1G1OO)!bQUO1G0|OOQQ1G0|1G0|OOQQ1G1P1G1PO)#_QUO'#JoO)#iQUO,5A[OOQQ1G0b1G0bOOQQ-E=Z-E=ZO)#qQUO,5;iO!<[QUO,5;iO)$nQVO,5:zO)$uQUO,5;gO$ mQUO7+&YOOQQ7+&Y7+&YO!(zQVO'#EfO)$|QUO,5:|OOQQ'#Ks'#KsOOQQ-E=V-E=VOOQQ,5A^,5A^OOQQ'#Jl'#JlO)(qQUO7+&PPOQQ7+&P7+&POOQQ7+)V7+)VO))iQUO7+)VO)*oQVO7+)VOOQQ,5>m,5>mO$)YQVO'#JsO)*vQUO,5@rOOQQ1G/R1G/ROOQQ7+$z7+$zO)+RQUO7+(RO)+WQUO7+(ROOQR7+(R7+(RO$>uQUO7+(ROOQQ7+%u7+%uOOQR-E=^-E=^O!0VQUO,5;oOOQQ,5@O,5@OOOQQ-E=b-E=bO$0^QUO1G1hOOQQ1G1h1G1hOOQR7+'Q7+'QOOQR1G1s1G1sOBUQUO,5;rO)+tQUO,5<YO)+{QUO1G1sO)-UQUO1G1sO!0tQVO7+']O)-ZQVO7+']O)2yQUO7+'dO)3OQVO7+'hO)5dQUO7+'wO)5nQUO7+'hO)6tQVO7+'hOKkQUO7+'wO$>hQUO,5<rO!4xQUO7+'xO)6{QUO7+'xOOQR7+(b7+(bO)7QQUO7+'zO)7VQUO,5<vO'CzQUO,5<vO)7}QUO,5<vO'CzQUO,5<vOOQQ,5<w,5<wO)8`QVO,5<xO'EYQUO'#JfO)8jQUO,5AmO)8rQUO,5<yOOQR7+'z7+'zO)8}QVO7+'VO)5gQUO'#K}OOQR-E=c-E=cO);`QVO,5<bOOQQ,5@R,5@RO!6nQUO,5@ROOQQ-E=e-E=eO)=wQUO7+(`O)>}QUO7+(dO)?SQVO7+(dOOQQ7+(l7+(lOOQQ7+)Z7+)ZO)?[QUO'#KjO)?fQUO'#KjOOQR,5=b,5=bO)?sQUO,5=bO!;bQUO,5=bO!;bQUO,5=bO!;bQUO,5=bOOQR7+(g7+(gOOQR7+(u7+(uOOQR7+(y7+(yOOQR,5=w,5=wO)?xQUO,5=zO)AOQUO,5=yOOQR,5Au,5AuOOQR-E=i-E=iOOQQ1G3b1G3bO)BUQUO,5=xO)BZQVO'#EfOOQQ1G6b1G6bO%)WQUO1G6bO%)]QUO1G6bOOQQ1G0P1G0POOQQ-E=Q-E=QO)DrQUO,5AVO(%iQUO'#JTO)D}QUO,5AVO)D}QUO,5AVO)EVQUO,5:iO8zQUO,5:iOOQQ,5>],5>]O)EaQUO,5AqO)EhQUO'#EVO)FrQUO'#EVO)G]QUO,5:iO)GgQUO'#HlO)GgQUO'#HmOOQQ'#Ko'#KoO)HUQUO'#KoO!(zQVO'#HnOOQQ,5:i,5:iO)HvQUO,5:iO!M_QVO,5:iOOQQ-E=S-E=SOOQQ1G0S1G0SOOQQ,5>`,5>`O)H{QUO1G6bO!(zQVO,5>gO)LjQUO'#JrO)LuQUO,5AxOOQQ1G4Q1G4QO)L}QUO,5AwOOQQ,5Aw,5AwOOQQ7+)i7+)iO*!lQUO7+)iOOQQ7+)o7+)oO*'kQVO1G7hO*)mQUO7+*SO*)rQUO,5?TO**xQUO7+*[POOO7+$S7+$SP*,kQUO'#LfP*,sQUO,5BPP*,x{,UO7+$SPOOO1G7i1G7iO*,}QUO<<GvOOQQ1G.x1G.xOOQQ'#IT'#ITO*.pQUO,5@`OOQQ,5@`,5@`OOQQ-E=r-E=rOOQQ7+(V7+(VOOQQ<<Ms<<MsO*/yQUO<<MsO*1|QUO<<MvO*3oQUO<<L_O*4TQUO,5?|OOQQ,5?|,5?|OOQQ-E=`-E=`OOQQ1G1b1G1bO*5^QUO,5;vO*6dQUO1G1aOOQQ1G1a1G1aOOQR,5@y,5@yO*7mQ!eO,5@yO*7tQMkO,5@yO*7{Q!eO,5@yOOQR-E=O-E=OOOQQ1G/f1G/fO*8SQ!eO'#DwOOQQ1G5X1G5XOOQR<<J]<<J]O*8ZQUO<<IjO*9OQUO7+$oOOQQ<<Iu<<IuO(7vQVO,5;ROOQR<=!c<=!cOOQQ1G3T1G3TOOQQ,5@U,5@UOOQQ-E=h-E=hOOQR<=!f<=!fO*9{QUO1G0cO*:SQUO'#EzO*:dQUO1G0cO*:kQUO'#I}O*<RQUO1G0qO!(zQVO1G0qOOQQ,5;[,5;[OOQQ,5;],5;]OOQQ,5?u,5?uOOQQ-E=X-E=XO!<[QUO1G0xO*=bQUO1G0xOOQQ1G0y1G0yO*=sQUO'#ElOOQQ1G0z1G0zOOQQ7+&j7+&jO*>XQUO7+&jO*?_QVO7+&jOOQQ7+&h7+&hOOQQ,5@Z,5@ZOOQQ-E=m-E=mO*@ZQUO1G1TO*@eQUO1G1TO*AOQUO1G0fOOQQ1G0f1G0fO*BUQUO'#K{O*B^QUO1G1ROOQQ<<It<<ItOOQQ'#Hb'#HbO'+fQUO,5={OOQQ'#Hd'#HdO'+fQUO,5=}OOQQ-E=j-E=jPOQQ<<Ik<<IkPOQQ-E=k-E=kOOQQ<<Lq<<LqO*BcQUO'#LaO*CoQUO'#L`OOQQ,5@_,5@_OOQQ-E=q-E=qOOQR<<Km<<KmO$>uQUO<<KmO*C}QUO<<KmOOQR1G1Z1G1ZOOQQ7+'S7+'SO!M_QVO1G1tO*DSQUO1G1tOOQR7+'_7+'_OOQR<<Jw<<JwO!0tQVO<<JwOOQR<<KO<<KOO*D_QUO<<KSO*EeQVO<<KSOKkQUO<<KcO!M_QVO<<KcO*ElQUO<<KSO!0tQVO<<KSO*FuQUO<<KSO*FzQUO<<KcO*GVQUO<<KdOOQR<<Kd<<KdOOQR<<Kf<<KfO*G[QUO1G2bO)7VQUO1G2bO'CzQUO1G2bO*GmQUO1G2dO*HsQVO1G2dOOQQ1G2d1G2dO*H}QVO1G2dO*IUQUO,5@QOOQQ-E=d-E=dOOQQ1G2e1G2eO*IdQUO1G1|O*JmQVO1G1|O*JtQUO1G1|OOQQ1G5m1G5mOOQR<<Kz<<KzOOQR<<LO<<LOO*JyQVO<<LOO*KUQUO<<LOOOQR1G2|1G2|O*KZQUO1G2|O*KbQUO1G3eOOQR1G3d1G3dOOQQ7++|7++|O%)WQUO7++|O*KmQUO1G6qO*KmQUO1G6qO(%iQUO,5?oO*KuQUO,5?oOOQQ-E=R-E=RO*LQQUO1G0TOOQQ1G0T1G0TO*L[QUO1G0TO!M_QVO1G0TO*LaQUO1G0TOOQQ1G3w1G3wO*LkQUO,5:qO)EhQUO,5:qO*MXQUO,5:qO)EhQUO,5:qO$#uQUO,5:uO*MvQVO,5>VO)GgQUO'#JpO*NQQUO1G0TO*NcQVO1G0TOOQQ1G3u1G3uO*NjQUO,5>WO*NuQUO,5>XO+ dQUO,5>YO+!jQUO1G0TO%)]QUO7++|O+#pQUO1G4ROOQQ,5@^,5@^OOQQ-E=p-E=pOOQQ<<MT<<MTOOQQ<<Mn<<MnO+$yQUO1G4oP+&|QUO'#JvP+'UQUO,5BQPO{O1G7k1G7kPOOO<<Gn<<GnOOQQANC_ANC_OOQR1G6e1G6eO+'^Q!eO,5:cOOQQ,5:c,5:cO+'eQUO1G0mO+(qQUO7+&]O+*QQUO7+&dO+*cQUO,5;WOOQQ<<JU<<JUO+*qQUO7+&oOOQQ7+&Q7+&QO!4xQUO'#J^O++lQUO,5AgOOQQ7+&m7+&mOOQQ1G3g1G3gO++tQUO1G3iOOQQ,5>n,5>nO+/iQUOANAXOOQRANAXANAXO+/nQUO7+'`OOQRAN@cAN@cO+0zQVOAN@nO+1RQUOAN@nO!0tQVOAN@nO+2[QUOAN@nO+2aQUOAN@}O+2lQUOAN@}O+3rQUOAN@}OOQRAN@nAN@nO!M_QVOAN@}OOQRANAOANAOO+3wQUO7+'|O)7VQUO7+'|OOQQ7+(O7+(OO+4YQUO7+(OO+5`QVO7+(OO+5gQVO7+'hO+5nQUOANAjOOQR7+(h7+(hOOQR7+)P7+)PO+5sQUO7+)PO+5xQUO7+)POOQQ<= h<= hO+6QQUO7+,]O+6YQUO1G5ZOOQQ1G5Z1G5ZO+6eQUO7+%oOOQQ7+%o7+%oO+6vQUO7+%oO*NcQVO7+%oOOQQ7+)a7+)aO+6{QUO7+%oO+8RQUO7+%oO!M_QVO7+%oO+8]QUO1G0]O*LkQUO1G0]O)EhQUO1G0]OOQQ1G0a1G0aO+8zQUO1G3qO+:QQVO1G3qOOQQ1G3q1G3qO+:[QVO1G3qO+:cQUO,5@[OOQQ-E=n-E=nOOQQ1G3r1G3rO%)WQUO<= hOOQQ7+*Z7+*ZPOQQ,5@b,5@bPOQQ-E=t-E=tOOQQ1G/}1G/}OOQQ,5?x,5?xOOQQ-E=[-E=[OOQRG26sG26sO+:zQUOG26YO!0tQVOG26YO+<TQUOG26YOOQRG26YG26YO!M_QVOG26iO!0tQVOG26iO+<YQUOG26iO+=`QUOG26iO+=eQUO<<KhOOQQ<<Kj<<KjOOQRG27UG27UOOQR<<Lk<<LkO+=vQUO<<LkOOQQ7+*u7+*uOOQQ<<IZ<<IZO+={QUO<<IZO!M_QVO<<IZO+>QQUO<<IZO+?WQUO<<IZO*NcQVO<<IZOOQQ<<L{<<L{O+?iQUO7+%wO*LkQUO7+%wOOQQ7+)]7+)]O+@WQUO7+)]O+A^QVO7+)]OOQQANESANESO!0tQVOLD+tOOQRLD+tLD+tO+AeQUOLD,TO+BkQUOLD,TOOQRLD,TLD,TO!0tQVOLD,TOOQRANBVANBVOOQQAN>uAN>uO+BpQUOAN>uO+CvQUOAN>uO!M_QVOAN>uO+C{QUO<<IcOOQQ<<Lw<<LwOOQR!$( `!$( `O!0tQVO!$( oOOQR!$( o!$( oOOQQG24aG24aO+DjQUOG24aO+EpQUOG24aOOQR!)9EZ!)9EZOOQQLD){LD){O+EuQUO'#CgO(dQUO'#CgO+IrQUO'#CyO+LcQUO'#CyO!E{QUO'#CyO+M[QUO'#CyO+MoQUO'#CyO,#bQUO'#CyO,#rQUO'#CyO,$PQUO'#CyO,$[QbO,59cO,$gQbO,59cO,$rQbO,59cO,$}QbO'#CwO,%`QbO'#CwO,%qQbO'#CwO,&SQUO'#CgO,(gQUO'#CgO,(tQUO'#CgO,+iQUO'#CgO,.lQUO'#CgO,.|QUO'#CgO,2uQUO'#CgO,2|QUO'#CgO,3|QUO'#CgO,6VQUO,5:xO#?kQUO,5:xO#?kQUO,5:xO#=ZQUO'#L[O,6sQbO'#CwO,7OQbO'#CwO,7ZQbO'#CwO,7fQbO'#CwO#6tQUO'#E^O,7qQUO'#E^O,9OQUO'#HgO,9pQbO'#CwO,9{QbO'#CwO,:WQUO'#CvO,:]QUO'#CvO,:bQUO'#CoO,:pQbO,59cO,:{QbO,59cO,;WQbO,59cO,;cQbO,59cO,;nQbO,59cO,;yQbO,59cO,<UQbO,59cO,6VQUO1G0dO,<aQUO1G0dO#?kQUO1G0dO,7qQUO1G0dO,>nQUO'#KZO,?OQUO'#CyO,?^QbO,59cO,6VQUO7+&OO,<aQUO7+&OO,?iQUO'#EwO,@[QUO'#EzO,@{QUO'#E^O,AQQUO'#GcO,AVQUO'#CvO,A[QUO'#CwO,AaQUO'#CwO,AfQUO'#CvO,AkQUO'#GcO,ApQUO'#KZO,B^QUO'#KZO,BhQUO'#CvO,BsQUO'#CvO,COQUO'#CvO,<aQUO,5:xO,7qQUO,5:xO,7qQUO,5:xO,CZQUO'#KZO,CnQbO'#CwO,CyQUO'#CrO,DOQUO'#E^",stateData:",Dt~O(nOSSOSTOSRPQVPQ'ePQ'gPQ'hPQ'iPQ'jPQ'kPQ'lPQ'mPQ~O*ZOS~OPmO]eOa!]Od!POlTOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!VfO!X!XO!Y!WO!i!YO!opO!r!`O!s!aO!t!aO!u!bO!v!aO!x!cO!{!dO#V#QO#a#VO#b#TO#i#OO#p!xO#t!fO#v!eO$R!gO$T!hO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO${!tO$}!uO%U!yO%_#ZO%`#[O%a#YO%c!zO%e#UO%g!{O%l#SO%o!|O%v!}O%|#PO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(rRO)PYO)SaO)U|O)V{O)WiO)X!ZO)YXO)hcO)idO~OR#bOV#]O'e#^O'g#_O'h#`O'i#`O'j#aO'k#aO'l#_O'm#_O~OX#dO(p#dO(q#fO~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(uZX(v$]X(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)WZX)XZX)jZX~O)WiX!UZX~P(dO]#}O!V#lO!X#{O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO(w#kO(x#kO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O~Od$RO%Y$SO'[$TO'_$UO(y$OO~Ol$VO~O!T$WO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X~Ol$VO~P.ZOl$VO!g$YO)j$YO~OX$ZO)Z$ZO~O!R$[O)X)QP)])QP~OPmO]$eOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~Ol$_O#t$lO(rRO~P0zO](]Xa'yXd(]Xl'yXl(]Xr'yXr(]Xs'yXs(]Xt'yXt(]Xu'yXu(]Xv'yXv(]Xw'yXw(]Xx'yXx(]Xy'yXy(]X{'yX}'yX!V(]X!o(]X!r'yX!r(]X!s'yX!s(]X!t'yX!t(]X!u'yX!u(]X!v'yX!v(]X!x'yX!x(]X!{(]X#a'yX#b'yX%e'yX%l'yX%o(]X%v(]X&m'yX&r'yX&s'yX(r'yX(r(]X)S(]X)U(]X)V(]X~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO&r#WO&s$wO])aXd)aXl)aX!V)aX!{)aX%v)aX(r)aX)S)aX)U)aX)V)aX~O)W$vO~P:nOPmO]eOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO!|%RO(r$xO~P<lO)S%SO~Oa!]Ol$_O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r:}O~P<lOPmO]$eOa%QOl:zO!V$fO!W%_O!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r;OO)S%dO)U%iO)V%iO~O(v%mO~O)W#jO~O(r%nO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OP%oO(oQO~PCQO]%hOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO%o!|O%v!}O)S;`O)U|O)V|O~Ol%rO!o%wO(r$xO~PE_O!TxO#v!eO(v%yO)j%|O])eX!V)eX~O]%hOd!POl%rO!V%kO!{!dO%v!}O(r$xO)S;`O)U|O)V|O~O!TxO#v!eO)W&PO)j&QO~O!U&TO~P!QO]&YO!TxO!V&WO)S&VO)U&ZO)V&ZO~Op&UO~PHrO]&cO!V&bO~OPmO]eOd!PO!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO%v$mO(r$xO~PIgO]%hOd!POl;[O!V%kO!{!dO%v$mO(r$xO)S;`O)U|O)V|O~Op&fO](tX])eX!V(tX!V)eX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!O)eX!U(tX~O!g$YO)j$YO~PL]O!g(tX)j(tX~PL]O](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!U(tX~O])eX!V)eX!O)eX~PNkOa&hO&m!RO]&lXd&lXl&lXr&lXs&lXt&lXu&lXv&lXw&lXx&lXy&lX}&lX!V&lX!r&lX!s&lX!t&lX!u&lX!v&lX!x&lX!{&lX%v&lX&r&lX&s&lX(r&lX)S&lX)U&lX)V&lX)W&lX!O&lX!T&lX!X&lX!Y&lX![&lX!^&lX!_&lX!a&lX!b&lX!c&lX!e&lX!f&lX!h&lX(u&lX(w&lX(x&lX)T&lX)X&lX!g&lX)j&lX!W&lXQ&lX!d&lX(v&lX!U&lX#v&lX~Op&fOl(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~P.ZO!g$YO)j$YO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O](}Xd(}Xl(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~O]#}O~P!*qO]&lO~O])bXa)bXd)bXl)bXr)bXs)bXt)bXu)bXv)bXw)bXx)bXy)bX{)bX})bX!V)bX!o)bX!r)bX!s)bX!t)bX!u)bX!v)bX!x)bX!{)bX#a)bX#b)bX%e)bX%l)bX%o)bX%v)bX&m)bX&r)bX&s)bX(r)bX)S)bX)U)bX)V)bX~O(oQO~P!-ZO%U&nO~P!-ZO]&oO~O]#}O~O!TxO~O$W&wO(r%nO(v&vO~O]&xOw&zO~O]&xO~OPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#p!xO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O]'PO~O!T$WO)W'RO~P!(zO)W'TO~O)W'UO~O(r'VO~O)W'YO~P!(zOl;^O%U'^O%e'^O(r;PO~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O(v'bO~O)W'dO~P!(zO!TxO(r%nO)j'fO~O(r%nO~O]'iO~O]'jOd%nXl%nX!V%nX!{%nX%v%nX(r%nX)S%nX)U%nX)V%nX~O]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~P8zO]%hOa!TOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO)S;`O)U|O)V|O~Ol;_Op&UO%v$mO(r;QO~P!8jO(r%nO(v'vO)W'wO~O]&cO!T'yO~Ol$oO}!_O!T(QO!l(VO(r$nO(v(PO)PYO~Ol$oO{(^O!T(ZO#b(^O(r$nO~Oa!TOl$oO{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O](`O~OPmOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)YXO)hcO)idO~O](bO)X(cO~P!=UO]#}O~P!<[OPmO]$eOa%QOl:zO!V(iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OY(jO(oQO(r%nO~O'f(mO~OS(qOT(nO*W(pO~O]#}O(n(tO~Q'nXX#dO(p#dO(q(vO~Od)QOl({O&r#WO(r(zO~O!Y'Sa!['Sa!^'Sa!_'Sa!a'Sa!b'Sa!c'Sa!e'Sa!f'Sa!h'Sa(u'Sa)S'Sa)T'Sa)U'Sa)V'Sa)W'Sa)X'Sa!g'Sa)j'Sa!O'Sa!W'Sa(v'Sa!U'SaQ'Sa!d'Sa~OPmOa%QOl:zO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO]'Sa!V'Sa!X'Sa(w'Sa(x'Sa~P!B_O!T$WO!O(sP~P!(zO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!TnX!VnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX(u%WX(w%WX(x%WX)SnX)S%WX)T%WX)UnX)U%WX)VnX)V%WX)W%WX)X%WX)jmX!O%WX~O)WnX!OnX!U%WX~P!E{O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~P8zOPmO]$eOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!V)lO~P!JwOd)oO%Y)pO(y$OO~O!T$WO!V)rO(w)sO!U)rP~P!JwO!T$WO~P!(zO)[)zO~Ol){O]!QX!h!QX)X!QX)]!QX~O])}O!h*OO)X)QX)])QX~O)X*SO)]*RO~Od$RO%Y*TO'[$TO'_$UO(y$OO~Ol*UO~Ol*UO!O(}X~P.ZOl*UO!g$YO)j$YO~O)W*VO~P:nOPmO]$eOa!]Ol$_Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)X!ZO)YXO)hcO)idO~Op&fO~P!&zOp&fO!W(tX(v(tXQ(tX!d(tX~PNkO]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~O]iXdiXlgXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!TiX!hiX)XiX)jiX!OiX~O!liX(viX)WiX!XiX!YiX![iX!^iX!_iX!aiX!biX!ciX!eiX!fiX(uiX(wiX(xiX)TiX!giX!WiXQiX!diX!UiX#viX#TiX#ViX#piXaiX{iX!oiX#aiX#biX#iiX#tiX${iX%ciX%eiX%kiX%liX%oiX&miX)PiX~P#%yO(y*ZO~Ol*[O~O](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!T(}X!X(}X!Y(}X![(}X!^(}X!_(}X!a(}X!b(}X!c(}X!e(}X!f(}X!h(}X(u(}X(w(}X(x(}X)T(}X)X(}X!g(}X)j(}X!O(}X!W(}XQ(}X!d(}X(v(}X!U(}X#v(}X~Ol*[O~P#+ROr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO])aad)aal)aa!V)aa!{)aa%v)aa(r)aa)S)aa)U)aa)V)aaQ)aa!d)aa!h)aa)X)aa)j)aa!O)aa!T)aa(v)aa)W)aa~O&r#WO&s$wO~P#.qOp&fOl(}X~P#+RO&r)aa~P#.qO]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX!OZX~O!WZX(vZX!UZXQZX!dZX~P#1jO]#}O!V#lO!X#{O(w#kO(x#kO~O!Y&xa![&xa!^&xa!_&xa!a&xa!b&xa!c&xa!e&xa!f&xa!g&xa!h&xa(u&xa)S&xa)T&xa)U&xa)V&xa)W&xa)X&xa)j&xa!O&xa!W&xa(v&xa!U&xaQ&xa!d&xa~P#3zOl;hO!T$WO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PKkOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PKkO]&cO!V&bO!O#Qa!T#Qa!h#Qa#v#Qa)W#Qa)j#QaQ#Qa!d#Qa(v#Qa~Op&fO!T$WO~O!O*cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O*cO~O]&cO!O*eO!V&bO~O]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~O!OqXQqX!dqX!hqX)XqX)WqX~P#9{O!O*hO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W)kX~P#3zO!W*kO!h*lO~O!W*kO!h*lO~P!(zO!W*kO~Op&fO!g$YO!h*mO)j$YO](tX!V(tX!W(tX!W*OX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)X(tX~O!h(tX~P#=ZO!W*oO~Od$RO%Y*TO(y:rO~Ol;kO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PBUO]*vO!T*qO!V&bO!h*tO#v!eO)j*rO)W)qX~O!h*tO)W)qX~O)W*wO~Op&fO])eX!T)eX!V)eX!h)eX#v)eX)W)eX)j)eX!O)eXQ)eX!d)eX(v)eX~Op&fO~OP%oO(oQO]%ha!V%ha!X%ha!Y%ha![%ha!^%ha!_%ha!a%ha!b%ha!c%ha!e%ha!f%ha!h%ha(r%ha(u%ha(w%ha(x%ha)S%ha)T%ha)U%ha)V%ha)W%ha)X%ha!g%ha)j%ha!O%ha!W%ha(v%ha!U%haQ%ha!d%ha~Od$RO%Y$SO(y:oO~Ol:wO~O!TxO#v!eO)j%|O~Ol<[O&r#WO(r;gO~O$Z+TO%`+UO~O!TxO#v!eO)W+VO)j+WO~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO$Z+TO%_#ZO%`+YO%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!U+ZO~P!QOa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a+aO#b+bO#i+cO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO)PYO~OQ)lP!d)lP~P#GgO]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO)S&VO)U&ZO)V&ZO~O!O#kX!T#kX#v#kX)W#kX)j#kXQ#kX!d#kX!h#kX)X#kX!x#kX(v#kX~P#IkOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!W+iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S+jO)V$kO)X!ZO)YXO)hcO)idO~O]&cO!V+kO~O]&YO!V&WO)PYO)S&VO)U&ZO)V&ZO)X+nO!O)dP~P8zO]&YO!V&WO)S&VO)U&ZO)V&ZO~O!O#nX!T#nX#v#nX)W#nX)j#nXQ#nX!d#nX!h#nX)X#nX!x#nX(v#nX~P#NeO!TxO])nX!V)nX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O#T+vO#p+wO(x+tO)U+rO)V+rO~O]#jX!T#jX!V#jX!O#jX#v#jX)W#jX)j#jXQ#jX!d#jX!h#jX)X#jX!x#jX(v#jX~P$ xO#V+yO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO])fP!T)fP!V)fP#v)fP(v)fP)j)fP!O)fP!h)fP)W)fP~O!x)fPQ)fP!d)fP~P$#uOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)V$kO)X!ZO)YXO)hcO)idO~O!W,QO)S,RO~P$%pO)PYO)X+nO!O)dP~P8zO]&cO!V&bO!O&Za!T&Za!h&Za#v&Za)W&Za)j&ZaQ&Za!d&Za(v&Za~OPmO]$eOa!]Ol:|Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;RO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OQ(zP!d(zP~P$)YO]#}O!V#lO(w#kO(x#kO!X'Pa!Y'Pa!['Pa!^'Pa!_'Pa!a'Pa!b'Pa!c'Pa!e'Pa!f'Pa!h'Pa(u'Pa)S'Pa)T'Pa)U'Pa)V'Pa)W'Pa)X'Pa!g'Pa)j'Pa!O'Pa!W'Pa(v'Pa!U'PaQ'Pa!d'Pa~O]#}O!V#lO!X#{O(w#kO(x#kO~P!B_O!TxO#t!fO)PYO~P8zO!TxO(r%nO)j,[O~O#x,aO~OQ)aX!d)aX!h)aX)X)aX)j)aX!O)aX!T)aX(v)aX)W)aX~P:nO(v,eO(w,cO)P$UX)W$UX~O(r,fO~O)PYO)W,iO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O(r;SO~P$0kOPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O$h,sO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO$}!uO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O${,yO(r:}O)W,wO~P$7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W,{O)X#|O~P#3zO)W,{O~O)W,|O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W,}O)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-OO)X#|O~P#3zOp&fO)PYO)j-QO~O)W-RO~Ol;^O(r;PO~O]-YO!{!dO&r#WO&s$wO(r-UO)S-VO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v-]O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xa!o$Xa!{$Xa#i$Xa#p$Xa#t$Xa#v$Xa$R$Xa$T$Xa$Y$Xa$Z$Xa${$Xa%U$Xa%c$Xa%g$Xa%o$Xa%|$Xa(k$Xa)U$Xa!U$Xa$c$Xa~P$0kO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-cO)X#|O~P#3zOl-eO!TxO)j,[O~O)j-gO~O]&]a!X&]a!Y&]a![&]a!^&]a!_&]a!a&]a!b&]a!c&]a!e&]a!f&]a!h&]a(u&]a(w&]a(x&]a)T&]a)U&]a)V&]a)W&]a)X&]a!g&]a)j&]a!O&]a!W&]a!T&]a#v&]a(v&]a!U&]aQ&]a!d&]a~O)S-kO!V&]a~P$DbO!O-kO~O!W-kO~O!V-lO)S&]a~P$DbO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X~Ol;mO~P$GQO]&cO!V&bO)W-mO~Ol;cO!o-pO#V+yO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO!n-yO(r,fO~O)PYO)W-{O~OPmO]$eOa%QOl:zO!T.QO!V$fO!X!XO!Y!WO!i!YO#V.XO#a.WO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO(x.PO)S$kO)V$kO)W-}O)X!ZO)YXO)hcO)idO~O!U.VO~P$JbO])^Xd)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)W)^X!O)^X!h)^X)X)^X!X)^X!Y)^X![)^X!^)^X!_)^X!a)^X!b)^X!c)^X!e)^X!f)^X(u)^X(w)^X(x)^X)T)^X!g)^X)j)^X!W)^XQ)^X!d)^X#T)^X#V)^X#p)^X#v)^Xa)^X{)^X!o)^X#a)^X#b)^X#i)^X#t)^X${)^X%c)^X%e)^X%k)^X%l)^X%o)^X&m)^X)P)^X!U)^X~Ol*[O~P$LlOl$oO!T(QO!l.^O(r$nO(v(PO)PYO~Op&fOl)^X~P$LlOl$oO!n.cO!o.cO(r$nO)PYO~Ol;dO!U.nO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jO!T(QO!l.^O(v(PO])OXd)OXl)OXr)OXs)OXt)OXu)OXv)OXw)OXx)OXy)OX})OX!V)OX!r)OX!s)OX!t)OX!u)OX!v)OX!x)OX!{)OX%v)OX&r)OX&s)OX(r)OX)S)OX)U)OX)V)OX~O)W)OX!O)OX!X)OX!Y)OX![)OX!^)OX!_)OX!a)OX!b)OX!c)OX!e)OX!f)OX!h)OX(u)OX(w)OX(x)OX)T)OX)X)OX!g)OX)j)OX!W)OXQ)OX!d)OX!U)OX#v)OX~P%%eO!T(QO~O!T(QO(v(PO~O(r%nO!U*QP~O!T(ZO(v.uO]&kad&kal&kar&kas&kat&kau&kav&kaw&kax&kay&ka}&ka!V&ka!r&ka!s&ka!t&ka!u&ka!v&ka!x&ka!{&ka%v&ka&r&ka&s&ka(r&ka)S&ka)U&ka)V&ka)W&ka!O&ka!X&ka!Y&ka![&ka!^&ka!_&ka!a&ka!b&ka!c&ka!e&ka!f&ka!h&ka(u&ka(w&ka(x&ka)T&ka)X&ka!g&ka)j&ka!W&kaQ&ka!d&ka!U&ka#v&ka~Ol$oO!T(ZO(r$nO~O&r#WO&s$wO]&pad&pal&par&pas&pat&pau&pav&paw&pax&pay&pa}&pa!V&pa!r&pa!s&pa!t&pa!u&pa!v&pa!x&pa!{&pa%v&pa(r&pa)S&pa)U&pa)V&pa)W&pa!O&pa!T&pa!X&pa!Y&pa![&pa!^&pa!_&pa!a&pa!b&pa!c&pa!e&pa!f&pa!h&pa(u&pa(w&pa(x&pa)T&pa)X&pa!g&pa)j&pa!W&paQ&pa!d&pa(v&pa!U&pa#v&pa~O&s.zO~P!(zO!Y#qO![#rO!f#zO)S#mO!^'Ua!_'Ua!a'Ua!b'Ua!c'Ua!e'Ua!h'Ua(u'Ua)T'Ua)U'Ua)V'Ua)W'Ua)X'Ua!g'Ua)j'Ua!O'Ua!W'Ua(v'Ua!U'UaQ'Ua!d'Ua~P#3zO!V'dX!X'dX!Y'dX!['dX!^'dX!_'dX!a'dX!b'dX!c'dX!e'dX!f'dX!h'dX(u'dX(w'dX(x'dX)S'dX)T'dX)U'dX)V'dX)X'dX!O'dX~O].|O)W'dX!g'dX)j'dX!W'dX(v'dX!U'dXQ'dX!d'dX~P%2xO!Y#qO![#rO!f#zO)S#mO!^'Wa!_'Wa!a'Wa!b'Wa!c'Wa!e'Wa!h'Wa(u'Wa)T'Wa)U'Wa)V'Wa)W'Wa)X'Wa!g'Wa)j'Wa!O'Wa!W'Wa(v'Wa!U'WaQ'Wa!d'Wa~P#3zO]#}O!T$WO!V.}O&r#WO&s$wO~O!X'Za!Y'Za!['Za!^'Za!_'Za!a'Za!b'Za!c'Za!e'Za!f'Za!h'Za(u'Za(w'Za(x'Za)S'Za)T'Za)U'Za)V'Za)W'Za)X'Za!g'Za)j'Za!O'Za!W'Za(v'Za!U'ZaQ'Za!d'Za~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^a)W'^a!g'^a)j'^a!O'^a!W'^a(v'^a!U'^aQ'^a!d'^a~P#3zOPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O!W/QO~P%:oOS(qOT(nO]#}O*W(pO~O]/TO'f/UO*W/RO~OS/YOT(nO*W/XO~O]#}O~Q'na!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v/[O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W#Zi!O#Zi~P#3zO]cXlgXpcXpiX!VcX!XcX!YcX![cX!^cX!_cX!acX!bcX!ccX!ecX!fcX!gcX!hcX(ucX(wcX(xcX)ScX)TcX)UcX)VcX)WcX)XcX)jcX!OcX!WcX(vcX!TcX#vcX!UcXQcX!dcX~Od/^O%Y*TO(y/]O~Ol/_O~Ol/`O~Op&fO]bi!Vbi!Xbi!Ybi![bi!^bi!_bi!abi!bbi!cbi!ebi!fbi!gbi!hbi(ubi(wbi(xbi)Sbi)Tbi)Ubi)Vbi)Wbi)Xbi)jbi!Obi!Wbi(vbi!UbiQbi!dbi~O!W/bO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO![#rO)S#mO!Y&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y&zi![&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)S&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)U#nO)V#pO!h&zi(u&zi)T&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!a&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!f#zO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO!h&zi(u&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/cO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(sX~P#3zO!h/cO!O(sX~O!O/eO~O]%Xap%Xa!X%Xa!Y%Xa![%Xa!^%Xa!_%Xa!a%Xa!b%Xa!c%Xa!e%Xa!f%Xa!h%Xa(u%Xa(w%Xa(x%Xa)T%Xa)U%Xa)V%Xa)W%Xa)X%Xa!g%Xa)j%Xa!O%Xa!W%Xa!T%Xa#v%Xa(v%Xa!U%XaQ%Xa!d%Xa~O)S/fO!V%Xa~P&,aO!O/fO~O!W/fO~O!V/gO)S%Xa~P&,aO!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^i)W'^i!g'^i)j'^i!O'^i!W'^i(v'^i!U'^iQ'^i!d'^i~P#3zO!W/lO~P%:oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/nO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U)rX~P#3zO(r/qO~O!V/sO(w)sO)j/uO~O!h/nO!U)rX~O!U/vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO)X#|O!h_i(u_i)W_i!g_i)j_i!O_i!W_i(v_i!U_iQ_i!d_i~P#3zO!R/wO~Ol){O]!Qa!h!Qa)X!Qa)]!Qa~OP0PO]0OOl0PO!R0PO!T/|O!V/}O!X0PO!Y0PO![0PO!^0PO!_0PO!a0PO!b0PO!c0PO!e0PO!f0PO!g0PO!h0PO!i0PO(oQO(v0PO(w0PO(x0PO)S/yO)T/zO)U/zO)V/{O)W0PO)X0PO)YXO~O!O0SO~P&6yO!R$[O~O!h*OO)X)Qa)])Qa~O)]0WO~O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~Od)oO%Y*TO(y$OO~O)W0YO~O]nXdnXlmXpnXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!TnX!hnX)XnX!OnXQnX!dnX~O!lnX(vnX)WnX!XnX!YnX![nX!^nX!_nX!anX!bnX!cnX!enX!fnX(unX(wnX(xnX)TnX!gnX)jnX!WnX!UnX#vnX#TnX#VnX#pnXanX{nX!onX#anX#bnX#inX#tnX${nX%cnX%enX%knX%lnX%onX&mnX)PnX~P&:uOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO~O])aid)ail)ai!V)ai!{)ai%v)ai(r)ai)S)ai)U)ai)V)aiQ)ai!d)ai!h)ai)X)ai)j)ai!O)ai!T)ai&r)ai(v)ai)W)ai~P&?sO]&cO!V&bO!O#Qi!T#Qi!h#Qi#v#Qi)W#Qi)j#QiQ#Qi!d#Qi(v#Qi~O!OqaQqa!dqa!hqa)Xqa)Wqa~P#9{O!OqaQqa!dqa!hqa)Xqa)Wqa~P#IkO]&cO!V+kO!OqaQqa!dqa!hqa)Xqa)Wqa~O!h*iO!W)ka~O!h*mO!W*Oa~OPmOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!X!XO!Y!WO!i!YO!s!aO!t!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)WiO)X!ZO)YXO)hcO)idO~O]eOd!POlTO!T*qO!U&TO!V0hO!opO!r!`O!u!bO!{!dO#i#OO#p!xO#t!fO$R!gO$T!hO${!tO$}!uO%U!yO%c!zO%g!{O%o!|O%v!}O%|#PO(rRO(w)sO)SaO)U|O)V{O~P&DuO!h*tO)W)qa~OPmO]$eOa!]Ol:|O{#RO!T$WO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O(sP!O)dP~P&?sO!h*mO!W*OX~O]#}O!T$WO~O!h0sO!T)zX#v)zX)j)zX~O)W0uO~O)W0vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W0xO)X#|O~P#3zO)W0vO~P!?WO]1SOd!POl%bO!V1QO!{!dO%v$mO(r$xO)S0zO)X0}O~O)U1OO)V1OO)j0{OQ#PX!d#PX!h#PX!O#PX~P' dO!h1TOQ)lX!d)lX~OQ1VO!d1VO~O)X1YO)j1XOQ#`X!d#`X!h#`X~P!<[O)X1YO)j1XOQ#`X!d#`X!h#`X~P!;bOp&UO~O!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~P#IkO]&cO!V+kO!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~O!W1_O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1_O)S1aO~P$%pO!W1_O~P!(zO]#ja!T#ja!V#ja!O#ja#v#ja)W#ja)j#jaQ#ja!d#ja!h#ja)X#ja!x#ja(v#ja~P$ xO]&cO!O1eO!V+kO~O!h1fO!O)dX~O!O1hO~O]&cO!V+kO!O#na!T#na#v#na)W#na)j#naQ#na!d#na!h#na)X#na!x#na(v#na~O]1lOr#SXs#SXt#SXu#SXv#SXw#SXx#SXy#SX!T#SX!V#SX#T#SX#p#SX(x#SX)U#SX)V#SX!l#SX!x#SX#V#SX#v#SX(v#SX)j#SX!O#SX!h#SX)W#SXQ#SX!d#SX)X#SX~O]1mO~O]1pOl$oO!V$fO#V#QO(r$nO)hcO)idO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO~O])fX!T)fX!V)fX!x)fX#v)fX(v)fX)j)fX!O)fX!h)fX)W)fXQ)fX!d)fX~P'+}O!x!cO]#Ri!T#Ri!V#Ri#v#Ri(v#Ri)j#Ri!O#Ri!h#Ri)W#RiQ#Ri!d#Ri~O!W1xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1xO)S1zO~P$%pO!W1xO~P!(zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*RX!d*RX!h*RX~P#3zO)X1{OQ({X!d({X!h({X~O!h1|OQ(zX!d(zX~OQ2OO!d2OO~O!O2PO~O#t$lO)PYO~P8zOl-eO!TxO)j2TO~O!O2UO~O#x,aOP#ui]#uia#uid#uil#uir#uis#uit#uiu#uiv#uiw#uix#uiy#ui{#ui}#ui!T#ui!V#ui!X#ui!Y#ui!i#ui!o#ui!r#ui!s#ui!t#ui!u#ui!v#ui!x#ui!{#ui#V#ui#a#ui#b#ui#i#ui#p#ui#t#ui#v#ui$R#ui$T#ui$Y#ui$Z#ui$`#ui$e#ui$g#ui$h#ui$k#ui$m#ui$o#ui$q#ui$s#ui$u#ui$w#ui${#ui$}#ui%U#ui%_#ui%`#ui%a#ui%c#ui%e#ui%g#ui%l#ui%o#ui%v#ui%|#ui&m#ui&r#ui&s#ui'Q#ui'R#ui'V#ui'Y#ui'a#ui'b#ui(k#ui(o#ui(r#ui)P#ui)S#ui)U#ui)V#ui)W#ui)X#ui)Y#ui)h#ui)i#ui!U#ui$c#ui!n#ui%k#ui~O]&cO~O]&cO!TxO!V&bO#v!eO~O(v2ZO(w,cO)P$Ua)W$Ua~O)PYO)W2]O~O!O2^O~P,]O!O2^O)W#jO~O!O2^O~O$c2cOP$_i]$_ia$_id$_il$_ir$_is$_it$_iu$_iv$_iw$_ix$_iy$_i{$_i}$_i!T$_i!V$_i!X$_i!Y$_i!i$_i!o$_i!r$_i!s$_i!t$_i!u$_i!v$_i!x$_i!{$_i#V$_i#a$_i#b$_i#i$_i#p$_i#t$_i#v$_i$R$_i$T$_i$Y$_i$Z$_i$`$_i$e$_i$g$_i$h$_i$k$_i$m$_i$o$_i$q$_i$s$_i$u$_i$w$_i${$_i$}$_i%U$_i%_$_i%`$_i%a$_i%c$_i%e$_i%g$_i%l$_i%o$_i%v$_i%|$_i&m$_i&r$_i&s$_i'Q$_i'R$_i'V$_i'Y$_i'a$_i'b$_i(k$_i(o$_i(r$_i)P$_i)S$_i)U$_i)V$_i)W$_i)X$_i)Y$_i)h$_i)i$_i!U$_i~O]1pO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W2fO)X#|O~P#3zOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W2iO)X!ZO)YXO)hcO)idO~P&?sO)W2fO~O(r-UO~O)PYO)j2lO~O)W2nO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO(r-UO)S-VO~O)S2sO~O]&cO!V2uO!h2vO)W)uX~O]-YO!{!dO(r-UO)S-VO~O)W2yO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xi!o$Xi!{$Xi#i$Xi#p$Xi#t$Xi#v$Xi$R$Xi$T$Xi$Y$Xi$Z$Xi${$Xi%U$Xi%c$Xi%g$Xi%o$Xi%|$Xi(k$Xi)U$Xi!U$Xi$c$Xi~P$0kOl:{O(r:nO~P0zO]2}O~O)W2SO~O!u3PO(r%nO~O!O3SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h3TO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O3UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO]&cO!V+kO!T%ui#v%ui)W%ui)j%ui~O!W3VO~Ol:yO)W(}X~P$GQOa!TOl$oO{3]O#a#VO#b3[O#t!fO%e#UO%l3^O&m!RO&r#WO&s!TO(r$nO)PYO~P&?sOl;cO!o-pO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO]&cO!V&bO)W3`O~O)W3aO~O)PYO)W3aO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W3bO)X#|O~P#3zO)W3bO~O)W3eO~O!U3gO~P$JbOl$oO(r$nO~O]3iO!T'yO~P'+iO!T(QO!l3lO(v(PO])Oad)Oal)Oar)Oas)Oat)Oau)Oav)Oaw)Oax)Oay)Oa})Oa!V)Oa!r)Oa!s)Oa!t)Oa!u)Oa!v)Oa!x)Oa!{)Oa%v)Oa&r)Oa&s)Oa(r)Oa)S)Oa)U)Oa)V)Oa)W)Oa!O)Oa!X)Oa!Y)Oa![)Oa!^)Oa!_)Oa!a)Oa!b)Oa!c)Oa!e)Oa!f)Oa!h)Oa(u)Oa(w)Oa(x)Oa)T)Oa)X)Oa!g)Oa)j)Oa!W)OaQ)Oa!d)Oa!U)Oa#v)Oa~Ol$oO!n.cO!o.cO(r$nO~O!h3pO)X3rO!T)_X~O!o3tO)PYO~P8zO)W3uO~PGVO]3zOl({O!T$WO!{!dO%v$mO&r#WO(r(zO(v4OO)S3wO)U3{O)V3{O~O)W4PO)j4RO~P(&eOl;dO!U4TO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jOl;dO%v!}O(r;VO~P!8jO(v4UO~Ol$oO!T(QO(r$nO(v(PO)PYO~O!l3lO~P((sO)j4WO!U&oX!h&oX~O!h4XO!U*QX~O!U4ZO~Oa4]Ol$oO&m!RO(r$nO~O!T(ZO]&kid&kil&kir&kis&kit&kiu&kiv&kiw&kix&kiy&ki}&ki!V&ki!r&ki!s&ki!t&ki!u&ki!v&ki!x&ki!{&ki%v&ki&r&ki&s&ki(r&ki)S&ki)U&ki)V&ki)W&ki!O&ki!X&ki!Y&ki![&ki!^&ki!_&ki!a&ki!b&ki!c&ki!e&ki!f&ki!h&ki(u&ki(w&ki(x&ki)T&ki)X&ki!g&ki)j&ki!W&kiQ&ki!d&ki!U&ki#v&ki~O(v&ki~P(*TO(v.uO~P(*TO!O4`O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O4`O~O!O4aO~O]#}O!T$WO!V'Zi!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~OPmOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)X!ZO)YXO)hcO)idO]#]ap#]a!T#]a!V#]a)S#]a)U#]a)V#]a~O(r%nO)X4fO!O*YP~O*W4eO~O'f4hO*W4eO~O*W4iO~OlmXpnXp&wX~Od4kO%Y*TO(y/]O~Od4kO%Y*TO(y4lO~O!h/cO!O(sa~O!W4pO~O]&cO!V+kO!T%uq#v%uq)W%uq)j%uq~O]#}O!T$WO!X'Zq!Y'Zq!['Zq!^'Zq!_'Zq!a'Zq!b'Zq!c'Zq!e'Zq!f'Zq!h'Zq(u'Zq(w'Zq(x'Zq)S'Zq)T'Zq)U'Zq)V'Zq)W'Zq)X'Zq!g'Zq)j'Zq!O'Zq!W'Zq(v'Zq!U'ZqQ'Zq!d'Zq~O!V'Zq~P(5bO!V.}O&r#WO&s$wO~P(5bO!T$WO!V)rO(w)sO!U(UX!h(UX~P!JwO!h/nO!U)ra~O!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!U4|O~P&6yO!W4|O~P&6yO!O4|O~P&6yO!O5RO~P&6yO]5SO!h'ua)X'ua)]'ua~O!h*OO)X)Qi)])Qi~O]&cO!V&bO!O#Qq!T#Qq!h#Qq#v#Qq)W#Qq)j#QqQ#Qq!d#Qq(v#Qq~O!OqiQqi!dqi!hqi)Xqi)Wqi~P#IkO]&cO!V+kO!OqiQqi!dqi!hqi)Xqi)Wqi~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'Tq)W'Tq!g'Tq)j'Tq!O'Tq!W'Tq(v'Tq!U'TqQ'Tq!d'Tq~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W'|a!h'|a~P#3zO!W5XO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h5YO(u#gO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O!U)rX~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h#{i)W#{i~P#3zO]*vO!T$WO!V&bO)j*rO!h(Va)W(Va~O!h1fO]'dX!O)dX~P%2xO)X5[O!T%qa!h%qa#v%qa)j%qa~O!h0sO!T)za#v)za)j)za~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W5_O)X#|O~P#3zO]1SOd!POl;[O!V1QO!{!dO%v$mO(r$xO)S;xO)U5aO)V5aO~OQ#Pa!d#Pa!h#Pa!O#Pa~P(DjO]1SOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V1QO!{!dO!|%RO%v$mO(r$xOQ#kX!d#kX!h#kX!O#kX~Ol%bO)S0zO)U;yO)V;yO~P(ElO]&cOQ#Pa!d#Pa!h#Pa!O#Pa~O!V&bO)j5eO~P(GZO(r%nOQ#dX!d#dX!h#dX!O#dX~O)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P' dO!V+kO~P(GZO]1SOa!TOd!POl;]O{#RO!V1QO!{!dO#a#VO#b#TO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO(r;QO)PYO)S;xO)U5aO)V5aO)X+nO!O)dP~P&?sO!h1TOQ)la!d)la~Op&fO)j5jOQ#`al(}X!d#`a!h#`a)X(}X~P$GQO(r-UOQ#ga!d#ga!h#ga~Op&fO)j5jOQ#`a])^Xd)^Xl)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!d#`a!h#`a!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)X)^X~O#a5mO#b5mO~O]&cO!V+kO!O#ki!T#ki#v#ki)W#ki)j#kiQ#ki!d#ki!h#ki)X#ki!x#ki(v#ki~O!W5oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W5oO~P!(zO!W5oO)S5qO~P$%pO]#ji!T#ji!V#ji!O#ji#v#ji)W#ji)j#jiQ#ji!d#ji!h#ji)X#ji!x#ji(v#ji~P$ xO)PYO)X5sO~P8zO!h1fO!O)da~O&r#WO&s$wO!T#qa!x#qa#v#qa(v#qa)j#qa!O#qa!h#qa)W#qaQ#qa!d#qa)X#qa~P#NeO!O5xO~P!(zO!O)oP~P!4xO)T6OO)U5|O]#Ua!T#Ua!V#Ua)S#Ua)V#Uar#Uas#Uat#Uau#Uav#Uaw#Uax#Uay#Ua!l#Ua!x#Ua#T#Ua#V#Ua#p#Ua#v#Ua(v#Ua(x#Ua)j#Uaa#Uad#Ual#Ua{#Ua}#Ua!o#Ua!r#Ua!s#Ua!t#Ua!u#Ua!v#Ua!{#Ua#a#Ua#b#Ua#i#Ua#t#Ua${#Ua%c#Ua%e#Ua%k#Ua%l#Ua%o#Ua%v#Ua&m#Ua&r#Ua&s#Ua(r#Ua)P#Ua)W#Ua!O#Ua!h#UaQ#Ua!d#Ua~O!x!cO]#Rq!T#Rq!V#Rq#v#Rq(v#Rq)j#Rq!O#Rq!h#Rq)W#RqQ#Rq!d#Rq~O!W6TO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W6TO~P!(zO!h1|OQ(za!d(za~O)W6YO~Ol-eO!TxO)j6ZO~O]*vO!T$WO!V&bO!h*tO)W)qX~O)j6_O~P)+cO!O6aO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O6aO~O$c6cOP$_q]$_qa$_qd$_ql$_qr$_qs$_qt$_qu$_qv$_qw$_qx$_qy$_q{$_q}$_q!T$_q!V$_q!X$_q!Y$_q!i$_q!o$_q!r$_q!s$_q!t$_q!u$_q!v$_q!x$_q!{$_q#V$_q#a$_q#b$_q#i$_q#p$_q#t$_q#v$_q$R$_q$T$_q$Y$_q$Z$_q$`$_q$e$_q$g$_q$h$_q$k$_q$m$_q$o$_q$q$_q$s$_q$u$_q$w$_q${$_q$}$_q%U$_q%_$_q%`$_q%a$_q%c$_q%e$_q%g$_q%l$_q%o$_q%v$_q%|$_q&m$_q&r$_q&s$_q'Q$_q'R$_q'V$_q'Y$_q'a$_q'b$_q(k$_q(o$_q(r$_q)P$_q)S$_q)U$_q)V$_q)W$_q)X$_q)Y$_q)h$_q)i$_q!U$_q~O)W6dO~OPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W6fO)X!ZO)YXO)hcO)idO~P&?sO(v6hO)j*rO~P)+cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W6fO)X#|O~P#3zO!O6jO~P!(zO)W6nO~O)W6oO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO(r-UO)S-VO~O]&cO!V2uO!h%Oa)W%Oa!O%Oa~O!W6uO)S6vO~P$%pO!h2vO)W)ua~O]&cO!O6yO!V2uO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xq!o$Xq!{$Xq#i$Xq#p$Xq#t$Xq#v$Xq$R$Xq$T$Xq$Y$Xq$Z$Xq${$Xq%U$Xq%c$Xq%g$Xq%o$Xq%|$Xq(k$Xq)U$Xq!U$Xq$c$Xq~P$0kOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)PYO)S$kO)V$kO)W6{O)X!ZO)YXO)hcO)idO~P&?sO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W7OO)X#|O~P#3zO)W7PO~OP7QO(oQO~Ol*[O)W)^X~P$GQOp&fOl(}X)W)^X~P$GQO)W7SO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&Sa~P#3zO!U7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO)W7VO~OPmO]$eOa!]Ol:|O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O)dP~P&?sO!h3pO)X7ZO!T)_a~O!h3pO!T)_a~O)W7`O)j7bO~P(&eO)W7dO~PGVO]3zOl({Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~O)S7hO~O]&cO!T*qO!V7jO!h7kO#v!eO(v4OO~O)W7`O)j7mO~P)FwO]3zOl({O!{!dO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~Op&fO])cX!T)cX!V)cX!h)cX#v)cX(v)cX)W)cX)j)cX!O)cX~O)W7`O~O!T(QO!l7sO(v(PO])Oid)Oil)Oir)Ois)Oit)Oiu)Oiv)Oiw)Oix)Oiy)Oi})Oi!V)Oi!r)Oi!s)Oi!t)Oi!u)Oi!v)Oi!x)Oi!{)Oi%v)Oi&r)Oi&s)Oi(r)Oi)S)Oi)U)Oi)V)Oi)W)Oi!O)Oi!X)Oi!Y)Oi![)Oi!^)Oi!_)Oi!a)Oi!b)Oi!c)Oi!e)Oi!f)Oi!h)Oi(u)Oi(w)Oi(x)Oi)T)Oi)X)Oi!g)Oi)j)Oi!W)OiQ)Oi!d)Oi!U)Oi#v)Oi~O(r%nO!U(fX!h(fX~O!h4XO!U*Qa~Op&fO]*Pad*Pal*Par*Pas*Pat*Pau*Pav*Paw*Pax*Pay*Pa}*Pa!T*Pa!V*Pa!r*Pa!s*Pa!t*Pa!u*Pa!v*Pa!x*Pa!{*Pa%v*Pa&r*Pa&s*Pa(r*Pa)S*Pa)U*Pa)V*Pa)W*Pa!O*Pa!X*Pa!Y*Pa![*Pa!^*Pa!_*Pa!a*Pa!b*Pa!c*Pa!e*Pa!f*Pa!h*Pa(u*Pa(w*Pa(x*Pa)T*Pa)X*Pa!g*Pa)j*Pa!W*PaQ*Pa!d*Pa(v*Pa!U*Pa#v*Pa~O!T(ZO]&kqd&kql&kqr&kqs&kqt&kqu&kqv&kqw&kqx&kqy&kq}&kq!V&kq!r&kq!s&kq!t&kq!u&kq!v&kq!x&kq!{&kq%v&kq&r&kq&s&kq(r&kq)S&kq)U&kq)V&kq)W&kq!O&kq!X&kq!Y&kq![&kq!^&kq!_&kq!a&kq!b&kq!c&kq!e&kq!f&kq!h&kq(u&kq(w&kq(x&kq)T&kq)X&kq!g&kq)j&kq!W&kqQ&kq!d&kq(v&kq!U&kq#v&kq~OPmOa%QOl:zO!T$WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO~O]*Ui!V*Ui!X*Ui!Y*Ui![*Ui!^*Ui!_*Ui!a*Ui!b*Ui!c*Ui!e*Ui!f*Ui!h*Ui(u*Ui(w*Ui(x*Ui)S*Ui)T*Ui)U*Ui)V*Ui)W*Ui)X*Ui!g*Ui)j*Ui!O*Ui!W*Ui(v*Ui!U*UiQ*Ui!d*Ui~P*&WO!O7xO~O!W7yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^q)W'^q!g'^q)j'^q!O'^q!W'^q(v'^q!U'^qQ'^q!d'^q~P#3zO!h7zO!O*YX~O!O7|O~O*W7}O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h^y)W^y!g^y)j^y!O^y!W^y(v^y!U^yQ^y!d^y~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(ha!h(ha~P#3zO]#}O!T$WO!V'Zy!X'Zy!Y'Zy!['Zy!^'Zy!_'Zy!a'Zy!b'Zy!c'Zy!e'Zy!f'Zy!h'Zy(u'Zy(w'Zy(x'Zy)S'Zy)T'Zy)U'Zy)V'Zy)W'Zy)X'Zy!g'Zy)j'Zy!O'Zy!W'Zy(v'Zy!U'ZyQ'Zy!d'Zy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^y)W'^y!g'^y)j'^y!O'^y!W'^y(v'^y!U'^yQ'^y!d'^y~P#3zO]&cO!V+kO!T%uy#v%uy)W%uy)j%uy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua!h(Ua~P#3zO!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U#}i!h#}i~P#3zO!U8PO~P&6yO!W8PO~P&6yO!O8PO~P&6yO!O8RO~P&6yO]&cO!V&bO!O#Qy!T#Qy!h#Qy#v#Qy)W#Qy)j#QyQ#Qy!d#Qy(v#Qy~O]&cO!V+kO!OqqQqq!dqq!hqq)Xqq)Wqq~O]&cOQ#Pi!d#Pi!h#Pi!O#Pi~O!V+kO~P*9jOQ#nX!d#nX!h#nX!O#nX~P(DjO!V&bO~P*9jOQ(OX](OXd'qXl'qXr(OXs(OXt(OXu(OXv(OXw(OXx(OXy(OX!V(OX!d(OX!h(OX!{'qX%v'qX(r'qX)S(OX)U(OX)V(OX!O(OX~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_i!d#_i!h#_i!O#_i~P#3zO&r#WO&s$wOQ#fi!d#fi!h#fi~O(r-UO)X1YO)j1XOQ#`X!d#`X!h#`X~O!W8WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8WO~P!(zO!T#qi!x#qi#v#qi(v#qi)j#qi!O#qi!h#qi)W#qiQ#qi!d#qi)X#qi~O]&cO!V+kO~P*?fO]&YO!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~P*?fO!O8YO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!h8ZO!O)oX~O!O8]O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*TX!d*TX!h*TX~P#3zO)X8`OQ*SX!d*SX!h*SX~O)W8bO~O!O$bi!h#{a)W#{a~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W8eO)X#|O~P#3zO!O8gO~P!(zO!O8gO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O8gO~O]&cO!V&bO(v8mO~O)W8nO~O]&cO!V2uO!h%Oi)W%Oi!O%Oi~O!W8qO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8qO)S8sO~P$%pO!W8qO~P!(zO]&cO!V2uO!h(Ya)W(Ya~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W8tO)X#|O~P#3zO)W2iO~P!(zO)W8tO~OP%oO!O8uO(oQO~O!O8uO~O)W8vO~P%%eO#T8yO(x.PO)W8wO~O!h3pO!T)_i~O)X8}O!T'wa!h'wa~O)W9PO)j9RO~P)FwO)W9PO~O)W9PO)j9VO~P(&eOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P)GgO]&cO!V7jO!T!ya!h!ya#v!ya(v!ya)W!ya)j!ya!O!ya~O!W9^O)S9_O~P$%pO!T$WO!h7kO(v4OO)W9PO)j9VO~O!T$WO~P#EfO]&cO!O9bO!V7jO~O]&cO!V7jO!T&aa!h&aa#v&aa(v&aa)W&aa)j&aa!O&aa~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&ba~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9PO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U&oi!h&oi~P#3zO!V.}O]']i!T']i!X']i!Y']i![']i!^']i!_']i!a']i!b']i!c']i!e']i!f']i!h']i(u']i(w']i(x']i)S']i)T']i)U']i)V']i)W']i)X']i!g']i)j']i!O']i!W']i(v']i!U']iQ']i!d']i~O(r%nO)X9eO~O!h7zO!O*Ya~O!O9gO~P&6yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua)W#Zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_q!d#_q!h#_q!O#_q~P#3zO&r#WO&s$wOQ#fq!d#fq!h#fq~O)j5jOQ#`a!d#`a!h#`a~O]&cO!V+kO!T#qq!x#qq#v#qq(v#qq)j#qq!O#qq!h#qq)W#qqQ#qq!d#qq)X#qq~O!h8ZO!O)oa~O)U5|O]&Vi!T&Vi!V&Vi)S&Vi)T&Vi)V&Vir&Vis&Vit&Viu&Viv&Viw&Vix&Viy&Vi!l&Vi!x&Vi#T&Vi#V&Vi#p&Vi#v&Vi(v&Vi(x&Vi)j&Via&Vid&Vil&Vi{&Vi}&Vi!o&Vi!r&Vi!s&Vi!t&Vi!u&Vi!v&Vi!{&Vi#a&Vi#b&Vi#i&Vi#t&Vi${&Vi%c&Vi%e&Vi%k&Vi%l&Vi%o&Vi%v&Vi&m&Vi&r&Vi&s&Vi(r&Vi)P&Vi)W&Vi!O&Vi!h&ViQ&Vi!d&Vi~O)W9jO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O$bq!h#{i)W#{i~P#3zO!O9lO~P!(zO!O9lO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9lO~O]&cO!V&bO(v9oO~O!O9pO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9pO~O]&cO!V2uO!h%Oq)W%Oq!O%Oq~O!W9tO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W9tO~P!(zO)W6fO~P!(zO)W9uO~O)W9vO~O(x.PO)W9vO~O!h3pO!T)_q~O)X9xO!T'wi!h'wi~O!T$WO!h7kO(v4OO)W9yO)j9{O~O)W9yO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9yO)X#|O~P#3zO)W9yO)j:OO~P)FwO]&cO!V7jO!T!yi!h!yi#v!yi(v!yi)W!yi)j!yi!O!yi~O!W:SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:SO)S:UO~P$%pO!W:SO~P!(zO]&cO!V7jO!T(da!h(da(v(da)W(da)j(da~O!O:WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:WO~O!O:]O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:]O~O]&cO!V2uO!h%Oy)W%Oy!O%Oy~O)W:^O~O)W:_O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:_O)X#|O~P#3zO!T$WO!h7kO(v4OO)W:_O)j:bO~O]&cO!V7jO!T!yq!h!yq#v!yq(v!yq)W!yq)j!yq!O!yq~O!W:dO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:dO~P!(zO!O:fO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:fO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:hO)X#|O~P#3zO)W:hO~O]&cO!V7jO!T!yy!h!yy#v!yy(v!yy)W!yy)j!yy!O!yy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:lO)X#|O~P#3zO)W:lO~O]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(v$]X(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX~O]%WXlmXpnXp%WX!TnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX!O%WXQ%WX!d%WX~O)W%WX!W%WX(v%WX!U%WX~P+GrO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!OnX!O%WX!hnX)XnX~O)WnX)jnX~P+JSO]%WXlmXpnXp%WX!V%WX!h%WXQ%WX!d%WX!O%WX~O!T%WX#v%WX)W%WX)j%WX(v%WX~P+LmOQnXQ%WX!TnX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!dnX!d%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX~P+JSO]nX]%WXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX~O!TnX(vnX)WnX)jnX~P, eOdnX!VnX)W%WX~P, eOlmXpnX)W%WX~Od)oO%Y)pO(y:oO~Od)oO%Y)pO(y:tO~Od)oO%Y)pO(y:pO~Od$RO%Y*TO'[$TO'_$UO(y:oO~Od$RO%Y*TO'[$TO'_$UO(y:qO~Od$RO%Y*TO'[$TO'_$UO(y:sO~O]iXriXsiXtiXuiXviXwiXxiXyiX!OiX!ViX&riX&siX)SiX)UiX)ViXdiX}iX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX~P#1jO]ZXlgXpZXpiX!VZX!hZX)WZX)jZX~O!TZX#vZX(vZX~P,'{OlgXpiX)PiX)WZX)jiX~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!OZX!OiX!hiX)XiX)jiX~O)WZX~P,)VO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!hiX&riX&siX(uZX(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)XZX)XiX)jZX~OQZXQiX!dZX!diX~P,+pO]iXdiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~P#1jO]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~O)WiX~P,0rOdiX}iX!OZX!OiX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX)jiX~P,+pO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(viX)SiX)UiX)ViX)WiX)jiX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PBUOd$RO%Y*TO(y:oO~Od$RO%Y*TO(y:pO~Od$RO%Y*TO(y:vO~Od$RO%Y*TO(y:uO~O]%hOd!POl%bOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!{!dO!|%RO%v$mO(r$xO)S;aO)U;bO)V;bO~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r$xO)S;aO)U;bO)V;bO~Od$RO%Y$SO(y:pO~Od$RO%Y$SO(y:tO~Ol:yO~Ol:xO~O]cXlgXpiX!TcX~Od)oO%Y*TO(y:oO~Od)oO%Y*TO(y:pO~Od)oO%Y*TO(y:qO~Od)oO%Y*TO(y:rO~Od)oO%Y*TO(y:sO~Od)oO%Y*TO(y:uO~Od)oO%Y*TO(y:vO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P,9OO](}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)j(}X~Ol:xO!T(}X(v(}X)W(}X~P,<}O]&wXlmXpnX!T&wX~Od4kO%Y*TO(y;tO~Ol;[O)S;xO)U5aO)V5aO~P(ElOd!POl%bO!{!dO%v$mO(r$xO~O]1SO!V1QO)S0zO)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P,?yO)S;YO~Ol;hO~Ol;iO~Ol;jO~Ol;lO~Ol;mO~Ol;nO~Ol;lO!T$WOQ(}X!d(}X!h(}X)X(}X!O(}X)j(}X~P$GQOl;jO!T$WO~P$GQOl;hO!g$YO)j$YO~Ol;jO!g$YO)j$YO~Ol;lO!g$YO)j$YO~Ol;iO!O(}X!h(}X)X(}X)j(}X~P$GQOd/^O%Y*TO(y;tO~Ol;uO~O)S<YO~OV'e'h'i'g(o)Y!R(rST%Z!Y!['jd%[!i'R!f]'f*Z'k(w!^!_'l'm'l~",goto:"%5]*ZPPPPPP*[P*_PP.T4iP7j7j:tP:t>OP>i>{?aFXMX!&]!,sP!3m!4b!5VP!5qPPPPPPPP!6[P!7tPP!9V!:oP!:uPPPPPP!:xP!:xPP!:xPPPPPPPPP!;U!>lP!>oPP!?]!@QPPPPP!@UP>l!AgPP>l!Cn!Eo!E}!Gd!ITP!I`P!Io!Io!MP#!`##v#'S#*^!Eo#*hPP!Eo#*o#*u#*h#*h#*xP#*|#+k#+k#+k#+k!ITP#,U#,g#.|P#/bP#0}P#1R#1Z#2O#2Z#4i#4q#4q#1RP#1RP#4x#5OP#5YPP#5u#6d#7U#5uP#7v#8SP#5uP#5uPP#5u#5uP#5uP#5uP#5uP#5uP#5uP#5uP#8V#5Y#8sP#9YP#9o#9o#9o#9o#9|#1RP#:d#?`#?}PPPPPPPP#@uP#ATP#ATP#Aa#Dn#9OPP#@}#EQP#Ee#Ep#Ev#Ev#@}#FlP#1R#1R#1R#1R#1RP!Io#GW#G_#G_#G_#Gc!Ly#Gm!Ly#Gq!E}!E}!E}#Gt#L^!E}>l>l>l$#V!@Q!@Q!@Q!@Q!@Q!@Q!6[!6[!6[$#jP$%V$%e!6[$%kPP!6[$'y$'|#@l$(P:t7j$+V$-Q$.q$0a7jPP7j$2T7jP7j7jP7jP$5Z7jP7jPP7j$5gPPPPPPPPP*[P$8o$8u$;^$=d$=j$>Q$>[$>g$>v$>|$@[$AZ$Ab$Ai$Ao$Aw$BR$BX$Bd$Bj$Bs$B{$CW$C^$Ch$Cn$Cx$DP$D`$Df$DlP$Dr$Dz$ER$Ea$F}$GT$GZ$Gb$GkPPPPPPPP$Gq$GuPPPPP$Nw$'y$Nz%$S%&[P%&i%&lPPPPPPPPPP%&x%'{%(R%(V%)|%+Z%+|%,T%.d%.jPPP%.t%/P%/S%/Y%0a%0d%0n%0x%0|%2Q%2s%2y#@uP%3d%3t%3w%4X%4e%4i%4o%4u$'y$'|$'|%4x%4{P%5V%5YR#cP'`mO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fU%om%p7QQ&m!`Q(j#]d0P)}/|/}0O0R4}5O5P5S8QR7Q3Tb}Oaewx{!g&S*q&v$i[!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0{1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fS%`f0h#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YS%qm!YS&u!h#PQ']!tQ'g!yQ'h!zQ(j#`Q(k#]Q(l#^Q*x%kQ,W&lQ,]&nQ-S'^Q-d'fQ-k'qS.r(Z4XQ/f)gQ0e*mQ2Q,[Q2X,cQ3O-eQ4b.|Q4f/TQ5f0}Q6[2TQ6}3PQ8a6ZQ9e7zR;Z1Q$|#hS!]$y%Q%T%Z&j&k'Q'X'Z'a'c(a(e(h(w(x)R)S)T)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:iQ&p!dQ(g#ZQ(s#bQ)j$T[*s%e*W0k2`2g2{Q,^&oQ/O(fQ/S(kQ/Z(tS/i)i/PQ0r+QS4q/j/kR8O4r'a![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f'a!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ)O#kS+Q%y0sQ/r)sk3}.g3s3w3z3{7c7e7f7h7k9X9Y:RQ)Q#kk3|.g3s3w3z3{7c7e7f7h7k9X9Y:Rl)P#k.g3s3w3z3{7c7e7f7h7k9X9Y:RT+Q%y0s[UOwx!g&S*qW$`[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.o&|;{af{|!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k$|$}%S%]%h%m&Q&W&b&y&|'O'i'j'u'y(`(i)l)r*`*b*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0]0h0y0{1Q1a1b1l1p1z2c2i2j2u4O4R4W4a5Y5a5e5q6_6c6f6g6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f;`;xQ;|1Sd;}&x'P'b,w-]-^-a2f2z2}W<O&f*v1|3iQ<P#O[<Q!t'^'f,[2T6ZT<]%y0s[VOwx!g&S*qW$a[e$e(bQ$p.u!j$q_!f!u!}#V#Z$S$T$l%U&U&Y&c&m'_(g)j)p+[+a+t,X,k,z-Q-o.d1T1X1f1k1m2l3t5j8Z&^$zaf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fQ'r#O|'|#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[l(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS-n't-wQ3W-tU;s(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;x[<Q!t'^'f,[2T6ZW<R&f*v1|3id<S&x'P'b,w-]-^-a2f2z2}Q<Z1ST<]%y0s!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!v$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$Q%lgnp|#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ'[!tz(O#R#S#T#U'}(P(U(^+y.W.X._.`.q3[3]3^3p5}6P7[f-Z'`-T-V-Y2p2q2s2v6q6r8pQ1W+aQ1Z+bQ2k,yQ3X-tQ4[.uQ5l1YR8V5m!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!x$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+a+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$S%lgnp|!t#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y|(O#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[Q3X-tR4[.u[WOwx!g&S*qW$b[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;xQ;|1SQ<P#O[<Q!t'^'f,[2T6Z&^<Taf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fd<U&x'P'b,w-]-^-a2f2z2}W<V&f*v1|3iT<]%y0sp$PT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)m$V*U*[/_:w:x:y;h;i;j;k;l;m;n;up$QT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)n$V*U*[/_:w:x:y;h;i;j;k;l;m;n;u^&e}!O$i$j%`%j;Zd&i!U$t%P%l'[(O1W1Z3X4[V/a)O)P3}S%Ye$eQ,T&fQ.{(bQ2m-QQ5y1mQ6V1|Q6m2lR9h8Z#}!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Z#[^O[_`wx!f!g!}#O$S$d$l$s$u&S&U&Y&c&m&r&x'P'b't(Q)p*]*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3t_(U#R#S#T+b3[3]3^#}ZO[wx!g!k#R#S#T%m&S&U&Y&c&m&w&x&y&|'O'P'['b't'x'}(P(Q(U*q*v+[+b,X,h,k,q-P-]-^-a-o-t-w-z._.d.m.q1S1T1f2c2k2z2}3[3]3^3i6c6j8g9l9p:W:]:fQ$]YR0T*OR*Q$]e0P)}/|/}0O0R4}5O5P5S8Q'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fe0P)}/|/}0O0R4}5O5P5S8QR5T0T^(T#R#S#T+b3[3]3^Y.]'}(R(U(V7TU3k.Z.^.qS7X3l4VR9c7s^(S#R#S#T+b3[3]3^[.['}(R(T(U(V7TW3j.Z.].^.qU7W3k3l4VS8z7X7sR:V9cT.k(Q.md]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tQ%tnT1u+}1v!jbOaenpwx{|!g#O$|$}%S%h%w&S't'u(Q*`*b*q-p-w.f.m.o0]0y1S2j5a6g;`;xf-W'`-T-V-Y2p2q2s2v6q6r8pj3x.g3s3w3z3{7c7e7f7h7k9X9Y:Rr;zg$g%d%i&s*Y*t,l,v-_2_;W;X;Y;o;q;vi<^+]0z1O;a;b;p;r;w;y<W<X<Y!O&^y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yz&az%O%W%e&d's*W*_,b-x0Z0[0k0|2`2g2{5V5b6l8iS'{#Q.Xn+l&X*g+f+m+p-j/h0_1R1^4t5W5`5u8XQ2W,a^2t-X2r2x6p6w8o9se7i3y7_7g7o7p9U9W9`:Q:cS+^&U1TY+n&Y&c*v1S3iR5s1f#w!POaegnpwx{|!g#O$g$|$}%S%d%h%i%w&S&s't'u(Q*Y*`*b*q*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y`oOwx!g&S't*q-w#U!Paeg{|#O$g$|$}%S%d%h%i&s'u*Y*`*b*t+],l,v-_0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YU%vnp-pQ*}%wS.e(Q.mT3v.f.oW+r&^+l+s1cV+z&a+{7iQ+x&`U+z&a+{7iQ-w'tT.S'y.U'`![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'W!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fW1r+y.X5}6PR2e,s!WjO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fY%Ve$e(b1p3iQ'S!nS(y#i5YQ,m&xQ,x'PS.O'y.UQ2b,nQ6k2iQ6|2}Q8h6fR9m8e'W![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'ayO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k+y,P,R,n,q,w-]-^-a-g.P.Q.U.X.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q5}6P6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ&`yS't#O-uR1[+cS+^&U1TR5n1[Q1P+]R5g1OR1P+]T+^&U1Tz&[%X&V&Y&Z'k)h*d*f+]+e/m0^0y0z1O1S1j5a5v;x;yQ&]yR1n+x!P&[y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yQ+u&^S+|&a7iS1d+l+sQ1t+{R5r1c!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fS%zo.eS&Oq-rQ&_yQ&q!eQ'e!yQ*p%eU*{%v%{3vS+P%x%}Q+q&]Q,Y&mS,Z&n'gQ,r&{S0X*W,bS0o*|*}Q0q+OQ1o+xS2S,]-fQ5U0ZQ5Z0pQ5{1nQ6Y2RQ6]2WQ7n3yQ9S7_R:P9U[uOwx!g&S*qQ,Y&mQ-v'tQ3Y-tR3_-wxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^S%zo.eS&Oq-rQ*p%eU*{%v%{3vS+P%x%}S0X*W,bS0o*|*}Q0q+OQ5U0ZQ5Z0pQ7n3yQ9S7_R:P9UT,_&q,`]uOwx!g&S*q[uOwx!g&S*qQ,Y&mQ,n&xQ,w'PW-`'b-]-a2zQ-v'tQ3Y-tQ3_-wR6{2}[%fg$g,l,v-_2_R0l*t^$XV!U$a$z%P<R<SQ'S!nS)`#}*vS)v$W*qQ)y$YY*s%e*W0k2g2{Q/O(fS/i)i/PS0a*h4aS0j*r6_Q0r+QQ4Q.gQ4n/cS4q/j/kS4v/n5YQ4{/uQ6`2`U7a3s3y4RQ8O4rQ8k6hY9Q7_7b7c7l7mQ9r8mW9z9O9R9U9VQ:Z9oU:a9{9}:OR:j:bS)v$W*qT4v/n5YZ)t$W)u*q/n5YQ&w!hR'x#PS,g&v'vQ2[,eR6^2ZxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fV$h[&|-^!XkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:f!WhO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR'W!q!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR,n&xQ&y!iQ&{!jQ'O!lR,q&zR,o&xxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fX-`'b-]-a2z[uOwx!g&S*qQ,z'PQ-v'tS.k(Q.mR3_-w[uOwx!g&S*qQ,z'PW-`'b-]-a2zT.k(Q.mg-Z'`-T-V-Y2p2q2s2v6q6r8pylOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fb!OOaewx{!g&S*q&|$j[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ']!tQ-S'^Q-d'fQ2Q,[Q6[2TR8a6Zj$RT$_%b%r:z:{:|;[;];^;_;c;di)o$V*U:w:x:y;h;i;j;k;l;m;nj$RT$_%b%r:z:{:|;[;];^;_;c;dh)o$V*U:w:x:y;h;i;j;k;l;m;nS/^({<[V4k/_/`;u[uOwx!g&S*qQ-v'tR3_-w[uOwx!g&S*qT.k(Q.m'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fR7R3T[uOwx!g&S*qQ-v'tS.k(Q.mR3_-w[pOwx!g&S*qQ%wnS-p't-wT.f(Q.mS%{o.eS*|%v3vR0p*}Q+R%yR5]0sS%zo.eS&Oq-rU*{%v%{3vS+P%x%}S0o*|*}Q0q+OQ5Z0pQ7n3yQ9S7_R:P9U`qOwx!g&S(Q*q.mS%xn-pU%}p.f.oQ+O%wT-r't-wS'z#Q.XR.Y'{T.R'y.US.S'y.UQ8x7UR9w8yT5}1q8_R6P1q#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&}![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&|![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fk3|.g3s3w3z3{7c7e7f7h7k9X9Y:RQ4Q.gS7a3s3yU9Q7_7c7lS9z9O9UR:a9}#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR4].uQ(]#US.v([(^S4^.w.xR7w4_Q.s(ZR7u4X#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Zp$w`$d$s%X&r'`(_(f)i*d-T/k1j5k5v8Uq(}#k%y.g0s3s3w3z3{7c7e7f7h7k9X9Y:RR,U&fR6W1|'X!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$q#rS%T%Z'Q'X'Z'a'c(a(e(h(w(x)R)S)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$]#sS%T%Z'Q'X'Z'a'c(h(w(x)R)V)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$Z#tS%T%Z'Q'X'Z'a'c(h(w(x)R)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$c#wS%T%Z'Q'X'Z'a'c(h(w(x)R)U)V)W)X)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i'X![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ/P(fQ/j)iQ4r/kR9d7y']![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ#eQR(u#eU$|a;`;xb%Ue$e&f(b-Q1m1|2l8ZQ'_!u!Q*^$|%U'_*`*f+h,P0]0^1b2p6q6t7e8p9X9]:R;W;o;p;v;w<WS*`$}%SQ*f%XS+h&W1QQ,P&bQ0]*bQ0^*dQ1b+kQ2p-VS6q2q2sQ6t2uQ7e3wQ8p6rS9X7f7hQ9]7jQ:R9YQ;W%dS;o;X;YS;p<X<YQ;v;qQ;w;rT<W0z;a[[Owx!g&S*ql$c[&|'}+[,X,h,k-P-^-o-z._.d.ql&|!k%m&y'O,q2c6c6j8g9l9p:W:]:f^'}#R#S#T+b3[3]3^`+[&U&Y&c*v1S1T1f3iS,X&m-tQ,h&wU,k&x'P2}S-P'[2kW-^'b-]-a2zS-o't-wQ-z'xQ._(PS.d(Q.mR.q(UQ)|$[R/x)|Q0R)}Q4}/|Q5O/}Q5P0OY5Q0R4}5O5P8QR8Q5SQ*P$]S0U*P0VR0V*QS.`(P._S3n.`7[R7[3pQ3q.aS7Y3o3rU7^3q7Y8{R8{7ZQ.m(QR4S.m!|_O[wx!f!g!}#O$S$l&S&U&Y&c&m&x'P'b't(Q)p*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3tU$r_$u*]U$u`$d&rR*]$sU$}a;`;xd*a$}*b2q6r7f9Y;X;q;r<XQ*b%SQ2q-VQ6r2sQ7f3wQ9Y7hQ;X%dQ;q;YQ;r<YT<X0z;aS+{&a7iR1s+{S*j%Z/pR0c*jQ1U+_R5i1UU+e&V0z;xR1]+eQ+s&^Q1c+lT1i+s1cQ8[5yR9i8[QwOS&Rw&ST&Sx*qQ,`&qR2V,`W)u$W*q/n5YR/t)uU/o)q)v0gR4w/o[*u%e%f*W2`2g2{R0m*uQ,d&uR2Y,dQ-a'bQ2z-]T2|-a2zQ2w-XR6x2wQ-f'gQ2R,]T3Q-f2RS%pm7QR*z%pdnOwx!g&S't(Q*q-w.mR%unQ0t+RR5^0tQ.U'yR3f.UQ1v+}R6Q1vU*n%`*x;ZR0f*nS1g+n0nR5t1gQ7l3yQ9O7_U9a7l9O9}R9}9U$O!SO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o.u1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR&g!SQ4Y.sR7v4YQ1},UR6X1}S/d)_)`R4o/dW(o#a(j(k/SR/W(oQ7{4fR9f7{T)a#}*v!USO[wx!g!k%m&S&y&|'O'b,q-]-^-a2c2z6c6j8g9l9p:W:]:fj$ya{$k%]+j,R1a1z5q6v8s9_:UY%Te$e(b1p3iY%Zf$f(i)l*lQ&j!WQ&k!XQ'Q!nQ'X!rQ'Z!sQ'a!vQ'c!xQ(a#XQ(e#YS(h#[+YQ(w#gQ(x#iQ)R#lQ)S#qQ)T#rQ)U#sQ)V#tQ)W#uQ)X#vQ)Y#wQ)Z#xQ)[#yQ)]#zQ)^#{S)_#}*vQ)k$UQ)q$WQ)x$YQ+X&QS+g&W1QQ,O&bQ,S&fQ,j&xQ,u'PQ-h'iQ-i'jS-|'y.UQ.y(`S/p)r0hS0`*h4aQ0b*iQ0g*qQ0i*rQ0w+WS1`+h+kQ1y,PQ2a,nS2h,w6{Q3R-gQ3c.PQ3d.QQ4c.}Q4d/QQ4j/[Q4m/cQ4s/lQ4u/nQ4y/sQ4z/uQ5d0{Q5p1bQ5w1lQ6U1|S6e2f8tQ6i2iQ6s2uQ6z2}Q7q4OQ7r4RQ7t4WQ8S5YQ8T5eQ8c6_Q8f6fQ8j6hQ8r6tS9T7b7mQ9[7jQ9k8eQ9q8mS9|9R9VQ:T9]Q:Y9oS:`9{:OR:i:bR,V&fd]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3t#r${ae!u$e$|$}%S%U%X%d&W&b&f'_(b*`*b*d*f+h+k,P-Q-V0]0^1Q1b1m1|2l2p2q2s2u3w6q6r6t7e7f7h7j8Z8p9X9Y9]:R;W;X;Y;`;a;o;p;q;r;v;w<W<X<YQ%tnS+d&V+eW+r&^+l+s1cU+z&a+{7iQ1k+tT5c0z;x``Owx!g&S't*q-wS$d[-oQ$s_b%Xe$e&f(b-Q1m1|2l8Z!h&r!f!}#O$S$l&U&Y&c&m&x'P'b(Q)p*v+[,X,k,w,z-]-^-a-t.d.m.o1S1T1f2f2z2}3i3tQ'`!uS(_#V+aQ(f#ZS)i$T(gQ*d%UQ-T'_Q/k)jQ1j+tQ5k1XQ5v1kR8U5jS(W#R3]S(X#S3^V(Y#T+b3[R$^Ye0Q)}/|/}0O0R4}5O5P5S8QW(R#R#S#T+bQ([#US.Z'}(US.a(P._Q.x(^W1r+y.X5}6PQ3Z-tQ3h.WQ3o.`Q4V.qU7T3[3]3^Q7]3pR8|7[Q.b(PR3m._T.l(Q.mdgOwx!g&S&m't*q-t-wU$g[,X-oQ&s!fQ'k!}Q'u#OQ)h$SQ*Y$l`+]&U&Y&c*v1S1T1f3iQ,l&xQ,v'PY-_'b-]-a2z2}S.g(Q.mQ/m)pQ0y+[S2_,k-^S2j,w,zS3s.d.oQ6g2fR7c3td]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tR%tnQ3y.gQ7_3sQ7g3wQ7o3zQ7p3{Q9U7cU9W7e7f7hQ9`7kS:Q9X9YR:c:RZ+o&Y&c*v1S3ipzOnpwx!g%w&S't(Q*q-p-w.f.m.o[%Oa%d0z;`;a;xU%We%h1SQ%eg^&d{|%i1O5a;b;yQ's#OQ*W$gb*_$|$}%S;W;X;Y<W<X<YQ,b&sQ-x'uQ0Z*Y[0[*`*b;o;p;q;rQ0k*tQ0|+]Q2`,lQ2g,vS2{-_2_U5V0];v;wQ5b0yQ6l2jR8i6gQ+}&aR9Z7iS1q+y.XQ8^5}R8_6P[%^f$f(i)l)r0hR0d*lR+`&UQ+_&UR5h1TS&Xy+xQ*g%XU+f&V0z;xS+m&Y1SW+p&Z1O5a;yQ-j'kQ/h)hS0_*d*fQ1R+]Q1^+eQ4t/mQ5W0^Q5`0yQ5u1jR8X5vR5z1mYvOwx&S*qR&t!gW%gg,l,v-_T*X$g2_T)w$W*q[uOwx!g&S*qQ&}!kQ*y%mQ,p&yQ,t'OQ2d,qQ6b2cQ8d6cQ8l6jQ9n8gQ:X9lQ:[9pQ:e:WQ:g:]R:k:fxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^X-`'b-]-a2zQ-['`R2o-TS-X'`-TQ2r-VQ2x-YU6p2p2q2sQ6w2vS8o6q6rR9s8p[rOwx!g&S*qS-q't-wT.h(Q.mR+S%y[sOwx!g&S*qS-s't-wT.i(Q.m[tOwx!g&S*qT.j(Q.mT.T'y.UX%af%k0h1QQ.w([R4_.xR.t(ZR(d#XQ(r#aS/R(j(kR4e/SR/V(lR4g/T",nodeNames:"⚠ RawString > MacroName LineComment BlockComment PreprocDirective #include String EscapeSequence SystemLibString Identifier ArgumentList ( ConditionalExpression AssignmentExpression CallExpression PrimitiveType FieldExpression FieldIdentifier DestructorName TemplateMethod ScopedFieldIdentifier NamespaceIdentifier TemplateType TypeIdentifier ScopedTypeIdentifier ScopedNamespaceIdentifier :: NamespaceIdentifier TypeIdentifier TemplateArgumentList < TypeDescriptor const volatile restrict _Atomic mutable constexpr constinit consteval StructSpecifier struct MsDeclspecModifier __declspec ) Attribute AttributeName Identifier AttributeArgs { } [ ] UpdateOp ArithOp ArithOp ArithOp LogicOp BitOp BitOp BitOp CompareOp CompareOp CompareOp > CompareOp BitOp UpdateOp , Number CharLiteral AttributeArgs VirtualSpecifier BaseClassClause Access virtual FieldDeclarationList FieldDeclaration extern static register inline thread_local AttributeSpecifier __attribute__ PointerDeclarator MsBasedModifier __based MsPointerModifier FunctionDeclarator ParameterList ParameterDeclaration PointerDeclarator FunctionDeclarator Noexcept noexcept RequiresClause requires True False ParenthesizedExpression CommaExpression LambdaExpression LambdaCaptureSpecifier TemplateParameterList OptionalParameterDeclaration TypeParameterDeclaration typename class VariadicParameterDeclaration VariadicDeclarator ReferenceDeclarator OptionalTypeParameterDeclaration VariadicTypeParameterDeclaration TemplateTemplateParameterDeclaration template AbstractFunctionDeclarator AbstractPointerDeclarator AbstractArrayDeclarator AbstractParenthesizedDeclarator AbstractReferenceDeclarator ThrowSpecifier throw TrailingReturnType CompoundStatement FunctionDefinition MsCallModifier TryStatement try CatchClause catch LinkageSpecification Declaration InitDeclarator InitializerList InitializerPair SubscriptDesignator FieldDesignator ExportDeclaration export ImportDeclaration import ModuleName PartitionName HeaderName CaseStatement case default LabeledStatement StatementIdentifier ExpressionStatement IfStatement if ConditionClause Declaration else SwitchStatement switch DoStatement do while WhileStatement ForStatement for ReturnStatement return BreakStatement break ContinueStatement continue GotoStatement goto CoReturnStatement co_return CoYieldStatement co_yield AttributeStatement ForRangeLoop AliasDeclaration using TypeDefinition typedef PointerDeclarator FunctionDeclarator ArrayDeclarator ParenthesizedDeclarator ThrowStatement NamespaceDefinition namespace ScopedIdentifier Identifier OperatorName operator ArithOp BitOp CompareOp LogicOp new delete co_await ConceptDefinition concept UsingDeclaration enum StaticAssertDeclaration static_assert ConcatenatedString TemplateDeclaration FriendDeclaration friend union FunctionDefinition ExplicitFunctionSpecifier explicit FieldInitializerList FieldInitializer DefaultMethodClause DeleteMethodClause FunctionDefinition OperatorCast operator TemplateInstantiation FunctionDefinition FunctionDefinition Declaration ModuleDeclaration module RequiresExpression RequirementList SimpleRequirement TypeRequirement CompoundRequirement ReturnTypeRequirement ConstraintConjuction LogicOp ConstraintDisjunction LogicOp ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator TemplateFunction OperatorName StructuredBindingDeclarator ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator BitfieldClause FunctionDefinition FunctionDefinition Declaration FunctionDefinition Declaration AccessSpecifier UnionSpecifier ClassSpecifier EnumSpecifier SizedTypeSpecifier TypeSize EnumeratorList Enumerator DependentType Decltype decltype auto PlaceholderTypeSpecifier ParameterPackExpansion ParameterPackExpansion FieldIdentifier PointerExpression SubscriptExpression BinaryExpression ArithOp LogicOp LogicOp BitOp UnaryExpression LogicOp BitOp UpdateExpression CastExpression SizeofExpression sizeof CoAwaitExpression CompoundLiteralExpression NULL NewExpression new NewDeclarator DeleteExpression delete ParameterPackExpansion nullptr this UserDefinedLiteral ParamPack #define PreprocArg #if #ifdef #ifndef #else #endif #elif PreprocDirectiveName Macro Program",maxTerm:425,nodeProps:[["group",-35,1,8,11,14,15,16,18,71,72,100,101,102,104,191,208,229,242,243,270,271,272,277,280,281,282,284,285,286,287,290,292,293,294,295,296,"Expression",-13,17,24,25,26,42,255,256,257,258,262,263,265,266,"Type",-19,126,129,147,150,152,153,158,160,163,164,166,168,170,172,174,176,178,179,188,"Statement"],["isolate",-4,4,5,8,10,""]],propSources:[gke],skippedNodes:[0,3,4,5,6,7,10,297,298,299,300,301,302,303,304,305,306,347,348],repeatNodeCount:41,tokenData:"&*r7ZR!UOX$eXY({YZ.gZ]$e]^+P^p$epq({qr.}rs0}st2ktu$euv!7dvw!9bwx!;exy!<Yyz!=Tz{!>O{|!?R|}!AV}!O!BQ!O!P!DX!P!Q#+y!Q!R#Az!R![$(x![!]$Ag!]!^$Cc!^!_$D^!_!`%1W!`!a%2X!a!b%5_!b!c$e!c!n%6Y!n!o%7q!o!w%6Y!w!x%7q!x!}%6Y!}#O%:n#O#P%<g#P#Q%Kz#Q#R%Ms#R#S%6Y#S#T$e#T#i%6Y#i#j%Nv#j#o%6Y#o#p&!e#p#q&#`#q#r&%f#r#s&&a#s;'S$e;'S;=`(u<%lO$e&t$nY)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&r%eW)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^&j&SU'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j&kX'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j']V'f&jOY%}YZ%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j'uP;=`<%l%}&r'{P;=`<%l%^&l(VW(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O&l(rP;=`<%l(O&t(xP;=`<%l$e7Z)Y`)ZW(pQ(n.o'f&j*Z)`OX$eXY({YZ*[Z]$e]^+P^p$epq({qr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e.o*aT(n.oXY*[YZ*[]^*[pq*[#O#P*p.o*sQYZ*[]^*y.o*|PYZ*[4e+[`)ZW(pQ(n.o'f&jOX$eXY+PYZ*[Z]$e]^+P^p$epq+Pqr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e4Z,cX'f&jOY%}YZ-OZ]%}]^-{^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4Z-V[(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4Z.QV'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P.nT*W)`(n.oXY*[YZ*[]^*[pq*[#O#P*p3o/[[%^!b'QP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o0_Y%]!b!a,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e6e1YY)ZW(qQ(o/]'f&jOY%^Zr%^rs1xsw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^(U2RW)x!b)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^4e2tf)ZW(pQ'f&jOX$eXY2kZp$epq2kqr$ers%^sw$ewx(Ox!c$e!c!}4Y!}#O$e#O#P&f#P#T$e#T#W4Y#W#X5m#X#Y>u#Y#]4Y#]#^NZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e4eb)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e5xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y7W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e7cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z8q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e8|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^:[#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e:gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#b4Y#b#c;u#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e<Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y=`#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e=mb)ZW(pQ'e.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e?Qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a@f#a#b4Y#b#cHV#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e@qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^BV#^#g4Y#g#hEV#h#o4Y#o;'S$e;'S;=`(u<%lO$e4eBbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZCp#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eC}b)ZW(pQ'f&j'l.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eEbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#YFp#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4eF}b)ZW(pQ'j.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eHbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#XIp#X#o4Y#o;'S$e;'S;=`(u<%lO$e4eI{d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^KZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4eKfd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZLt#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eMRb)ZW(pQ'f&j'k.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eNff)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z! z#Z#b4Y#b#c!.[#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!!Xf)ZW(pQ'g.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!#m#X#b4Y#b#c!(W#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!#xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!%W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!%cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!&q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!'Ob)ZW(pQ'h.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!(cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!)q#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!)|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!+[#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!+gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!,u#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!-Sb)ZW(pQ'i.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!.gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#V4Y#V#W!/u#W#o4Y#o;'S$e;'S;=`(u<%lO$e4e!0Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a!1`#a#o4Y#o;'S$e;'S;=`(u<%lO$e4e!1kd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#i4Y#i#j!2y#j#o4Y#o;'S$e;'S;=`(u<%lO$e4e!3Ud)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!4d#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!4od)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!5}#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!6[b)ZW(pQV.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e3o!7q[)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!8rY!g-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!9o])V,g)ZW(pQ%[!b'f&jOY$eZr$ers%^sv$evw!:hwx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!:uY)U,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2X!;pW)[S(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O6i!<eY)ZW(pQ]6_'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V!=`Y!Oa)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!>][)S,g)ZW(pQ%Z!b'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!?`^)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|!@[|!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!@gY)ZW!X-y(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!AbY!h,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!B__)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox}$e}!O!@[!O!_$e!_!`!8g!`!a!C^!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!CiY(x-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Dd^)ZW(pQ'f&j(w,gOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!E`!P!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Ei[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!F_!P#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!FjY)X,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]!Gen)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Icx!Q$e!Q![!GY![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T!IjY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![!JY![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T!Jcn(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Icx!Q(O!Q![!JY![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ljl(pQ!i,g'f&jOY(OZr(Ors%}s{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ni^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![# e![!c(O!c!i# e!i#O(O#O#P&f#P#T(O#T#Z# e#Z;'S(O;'S;=`(o<%lO(O2T# nj(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Nbx!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T##id(pQ!i,g'f&jOY(OZr(Ors%}s!h(O!h!i##`!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#Y(O#Y#Z##`#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]#%Sn)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#'Z`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![#(]![!c$e!c!i#(]!i#O$e#O#P&f#P#T$e#T#Z#(]#Z;'S$e;'S;=`(u<%lO$e2]#(hj)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Nbx!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#*ef)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!h$e!h!i#*Y!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#Y$e#Y#Z#*Y#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e7Z#,W`)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Oxz$ez{#-Y{!P$e!P!Q#:s!Q!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#-c])ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y1e#._TOz#.[z{#.n{;'S#.[;'S;=`#/]<%lO#.[1e#.qVOz#.[z{#.n{!P#.[!P!Q#/W!Q;'S#.[;'S;=`#/]<%lO#.[1e#/]OT1e1e#/`P;=`<%l#.[7X#/jZ)ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7P#0bX'f&jOY#0]YZ#.[Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1SZ'f&jOY#0]YZ#.[Zz#0]z{#0}{!P#0]!P!Q#1u!Q#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1|UT1e'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P#2eZ'f&jOY#0]YZ#0]Z]#0]]^#3W^z#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3]X'f&jOY#0]YZ#0]Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3{P;=`<%l#0]7X#4V])ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{!P#/c!P!Q#5O!Q#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7X#5XW)ZWT1e'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^7X#5tP;=`<%l#/c7R#6OZ(pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#6x](pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{!P#5w!P!Q#7q!Q#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#7zW(pQT1e'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O7R#8gP;=`<%l#5w7Z#8s_)ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{!P#-Y!P!Q#9r!Q#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y7Z#9}Y)ZW(pQT1e'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#:pP;=`<%l#-Y7Z#;OY)ZW(pQS1e'f&jOY#:sZr#:srs#;nsw#:swx#@{x#O#:s#O#P#<z#P;'S#:s;'S;=`#At<%lO#:s7X#;wW)ZWS1e'f&jOY#;nZw#;nwx#<ax#O#;n#O#P#<z#P;'S#;n;'S;=`#@u<%lO#;n7P#<hUS1e'f&jOY#<aZ#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#=RXS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P;'S#<a;'S;=`#>[<%lO#<a7P#=uVS1e'f&jOY#<aYZ%}Z#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#>_P;=`<%l#<a7P#>i]S1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c#f#<a#f#g#?b#g;'S#<a;'S;=`#>[<%lO#<a7P#?iUS1e'f&jOY#<aZ#O#<a#O#P#?{#P;'S#<a;'S;=`#>[<%lO#<a7P#@SZS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c;'S#<a;'S;=`#>[<%lO#<a7X#@xP;=`<%l#;n7R#AUW(pQS1e'f&jOY#@{Zr#@{rs#<as#O#@{#O#P#<z#P;'S#@{;'S;=`#An<%lO#@{7R#AqP;=`<%l#@{7Z#AwP;=`<%l#:s2]#BVt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$+X#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$=`#m;'S$e;'S;=`(u<%lO$e2T#DnY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#E^![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T#Egp(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#Dgx!O(O!O!P#Gk!P!Q(O!Q![#E^![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#Gtn(pQ!i,g'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#I{p(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#LW^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!i#Ir!i#O(O#O#P&f#P#T(O#T#Z#Ir#Z;'S(O;'S;=`(o<%lO(O2T#M]t(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$ xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$$Xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$&ht)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$)Tp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$+b_)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$-`!R![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$,j[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$-kt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$/{#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e2]$0U[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$1T`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$2br)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T$4s^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![$5o![!c(O!c!i$5o!i#O(O#O#P&f#P#T(O#T#Z$5o#Z;'S(O;'S;=`(o<%lO(O2T$5xr(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx!O(O!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T$8]u(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx{(O{|!Nb|}(O}!O!Nb!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$:{u)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx{$e{|#'Q|}$e}!O#'Q!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$=ic)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$>t!R![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$?Pv)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#U$2V#U#V$2V#V#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e4e$Ar[(v-X)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox![$e![!]$Bh!]#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3s$BsYl-})ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$CnY)W,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7V$Dk_p,g%]!b)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!^$Ej!^!_%+w!_!`%.U!`!a%0]!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej*[$Es])ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ejp$FoTO!`$Fl!`!a$GO!a;'S$Fl;'S;=`$GT<%lO$Flp$GTO$Wpp$GWP;=`<%l$Fl*Y$GbZ)ZW'f&jOY$GZYZ$FlZw$GZwx$HTx!`$GZ!`!a%(U!a#O$GZ#O#P$Ib#P;'S$GZ;'S;=`%(y<%lO$GZ*Q$HYX'f&jOY$HTYZ$FlZ!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q$IOU$WpY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}*Q$Ig['f&jOY$HTYZ$HTZ]$HT]^$J]^!`$HT!`!a$NO!a#O$HT#O#P%&n#P;'S$HT;'S;=`%'f;=`<%l%$z<%lO$HT*Q$JbX'f&jOY$HTYZ$J}Z!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT'[$KSX'f&jOY$J}YZ$FlZ!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$KvU$Wp'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}'[$L_Z'f&jOY$J}YZ$J}Z]$J}]^$MQ^!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MVX'f&jOY$J}YZ$J}Z!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MuP;=`<%l$J}*Q$M{P;=`<%l$HT*Q$NVW$Wp'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`$NtW'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`% eUY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%})`% |Y'f&jOY$NoYZ$NoZ]$No]^%!l^#O$No#O#P%#d#P;'S$No;'S;=`%$[;=`<%l%$z<%lO$No)`%!qX'f&jOY$NoYZ%}Z!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%#aP;=`<%l$No)`%#iZ'f&jOY$NoYZ%}Z]$No]^%!l^!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%$_XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$No<%lO%$z#t%$}WOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h<%lO%$z#t%%lOY#t#t%%oRO;'S%$z;'S;=`%%x;=`O%$z#t%%{XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l%$z<%lO%$z#t%&kP;=`<%l%$z*Q%&sZ'f&jOY$HTYZ$J}Z]$HT]^$J]^!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q%'iXOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$HT<%lO%$z*Y%(aW$WpY#t)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^*Y%(|P;=`<%l$GZ*S%)WZ(pQ'f&jOY%)PYZ$FlZr%)Prs$HTs!`%)P!`!a%)y!a#O%)P#O#P$Ib#P;'S%)P;'S;=`%*n<%lO%)P*S%*UW$WpY#t(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O*S%*qP;=`<%l%)P*[%+RY$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e*[%+tP;=`<%l$Ej7V%,U^)ZW(pQ%[!b!f,g'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!_$Ej!_!`%-Q!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%-]]!g-y)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%.c]%]!b!b,g)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%/[!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%/mY%]!b!b,g$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e)j%0hYY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%1c[)j!c)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%2f]%]!b)ZW(pQ!d,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`%3_!`!a%4[!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%3lY%]!b!b,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%4i[)ZW(pQ%[!b!f,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%5jY(uP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z%6ib)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e7Z%8Qb)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e5P%9cW)ZW(o/]'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^2T%:UW(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O3o%:yZ!V-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!}$e!}#O%;l#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%;wY)PP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e4e%<la'f&jOY%=qYZ%>[Z]%=q]^%?Z^!Q%=q!Q![%?w![!w%=q!w!x%AX!x#O%=q#O#P%H_#P#i%=q#i#j%Ds#j#l%=q#l#m%IR#m;'S%=q;'S;=`%Kt<%lO%=q&t%=xUXY'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4e%>e[XY(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4e%?bVXY'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@OWXY'f&jOY%}Z!Q%}!Q![%@h![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@oWXY'f&jOY%}Z!Q%}!Q![%=q![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%A^['f&jOY%}Z!Q%}!Q![%BS![!c%}!c!i%BS!i#O%}#O#P&f#P#T%}#T#Z%BS#Z;'S%};'S;=`'r<%lO%}&t%BX['f&jOY%}Z!Q%}!Q![%B}![!c%}!c!i%B}!i#O%}#O#P&f#P#T%}#T#Z%B}#Z;'S%};'S;=`'r<%lO%}&t%CS['f&jOY%}Z!Q%}!Q![%Cx![!c%}!c!i%Cx!i#O%}#O#P&f#P#T%}#T#Z%Cx#Z;'S%};'S;=`'r<%lO%}&t%C}['f&jOY%}Z!Q%}!Q![%Ds![!c%}!c!i%Ds!i#O%}#O#P&f#P#T%}#T#Z%Ds#Z;'S%};'S;=`'r<%lO%}&t%Dx['f&jOY%}Z!Q%}!Q![%En![!c%}!c!i%En!i#O%}#O#P&f#P#T%}#T#Z%En#Z;'S%};'S;=`'r<%lO%}&t%Es['f&jOY%}Z!Q%}!Q![%Fi![!c%}!c!i%Fi!i#O%}#O#P&f#P#T%}#T#Z%Fi#Z;'S%};'S;=`'r<%lO%}&t%Fn['f&jOY%}Z!Q%}!Q![%Gd![!c%}!c!i%Gd!i#O%}#O#P&f#P#T%}#T#Z%Gd#Z;'S%};'S;=`'r<%lO%}&t%Gi['f&jOY%}Z!Q%}!Q![%=q![!c%}!c!i%=q!i#O%}#O#P&f#P#T%}#T#Z%=q#Z;'S%};'S;=`'r<%lO%}&t%HfXXY'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%IW['f&jOY%}Z!Q%}!Q![%I|![!c%}!c!i%I|!i#O%}#O#P&f#P#T%}#T#Z%I|#Z;'S%};'S;=`'r<%lO%}&t%JR['f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KO[XY'f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KwP;=`<%l%=q2a%LVZ!W,V)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P#Q%Lx#Q;'S$e;'S;=`(u<%lO$e'Y%MTY)]d)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%NQ[)ZW(pQ%[!b'f&j!_,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z& Vd)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q!Y%6Y!Y!Z%7q!Z![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e2]&!pY!T,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o&#m^)ZW(pQ%[!b'f&j!^,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P#p$e#p#q&$i#q;'S$e;'S;=`(u<%lO$e3o&$vY)T,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V&%qY!Ua)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e(]&&nc)ZW(pQ%[!b'RP'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&(Sc)ZW(pQ'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&)jb)ZW(pQdT'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![&)_![!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e",tokenizers:[pke,mke,0,1,2,3,4,5,6,7,8,9],topRules:{Program:[0,307]},dynamicPrecedences:{87:1,94:1,119:1,184:1,187:-10,240:-10,241:1,244:-1,246:-10,247:1,262:-1,267:2,268:2,306:-10,365:3,417:1,418:3,419:1,420:1},specialized:[{term:356,get:i=>vke[i]||-1},{term:32,get:i=>yke[i]||-1},{term:66,get:i=>bke[i]||-1},{term:363,get:i=>Oke[i]||-1}],tokenPrec:24891}),wke=Ub.define({name:"cpp",parser:xke.configure({props:[L9.add({IfStatement:ES({except:/^\s*({|else\b)/}),TryStatement:ES({except:/^\s*({|catch)\b/}),LabeledStatement:S_e,CaseStatement:i=>i.baseIndent+i.unit,BlockComment:()=>null,CompoundStatement:__e({closing:"}"}),Statement:ES({except:/^{/})}),z9.add({"DeclarationList CompoundStatement EnumeratorList FieldDeclarationList InitializerList":M_e,BlockComment(i){return{from:i.from+2,to:i.to-2}}})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/,closeBrackets:{stringPrefixes:["L","u","U","u8","LR","UR","uR","u8R","R"]}}});function rO(){return new m_e(wke)}const _ke=jt("TresPerspectiveCamera",{position:[0,0,5]},null,-1),Ske=jt("TresAxesHelper",{args:[2]},null,-1),Cke=jt("TresBoxGeometry",{args:[2,2,2]},null,-1),HD=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,GD=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,kke={__name:"ShaderFragBase",setup(i){const{onLoop:e}=Pu(),n=[{name:"普通渐变",children:[{name:"普通渐变1",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x;
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"普通渐变2",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-st.x-st.y; //写出渐变方程
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"普通渐变3",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x*st.x*st.x-st.y; //写出渐变方程
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"普通渐变4",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = (st.x-0.5)*2.0;
    c = abs(c);
    gl_FragColor = vec4(0.0, c, 0.0, 1.0);
}
`},{name:"普通渐变5",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-distance(st, vec2(0.5))*1.0;
    gl_FragColor = vec4(0.0, c, c, 1.0);
}
`}]},{name:"渐变和切变，可以用于边缘平滑",children:[{name:"渐变和切变1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = distance(st, vec2(0.5))*2.0;
    c = smoothstep(0.8, 0.9, c);
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"渐变和切变2",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.x*st.x-st.y;
    c = abs(c);
    c = smoothstep(0.005, 0.015, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}

`},{name:"颜色混合(颜色渐变)",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.y;
    vec3 color = mix(vec3(1.0, 0.0, 0.0), vec3(0.0, 1.0, 0.0), c);
    
    gl_FragColor = vec4(color, 1.0);
}
`}]},{name:"重复图形",children:[{name:"重复图形1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = floor(st)*0.5;
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"重复图形2",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = fract(st);
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"重复图形3",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 center = 0.5+floor(st);
    float c = distance(st, center)*2.0;
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]},{name:"简单动画",children:[{name:"平移动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st.x -= fract(u_time*0.2)*2.0-1.0;

    float c = distance(st, vec2(0.5))*2.0;
    c = step(0.5, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"缩放动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    st /= sin(u_time);

    float c = distance(st, vec2(0.0))*2.0;
    c = step(1.0, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"旋转动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    float theta = mod(u_time, 6.28);
    st = mat2(cos(theta), sin(theta), -sin(theta), cos(theta)) * st; //构造了一个绕Z轴的旋转矩阵

    float c = st.x;
    c = abs(c);
    c = step(0.05, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]}],t={u_time:{value:0},u_resolution:{value:{x:800,y:600}}};e(({elapsed:g})=>{t.u_time.value=g}),at(!0);const r=dr(null),s=dr(null),a=at(null);let l=null;const h=at(null);let u=null;Yi(()=>{const g=vt.updateListener.of(y=>{if(y.docChanged){let w=r.value;if(!w)return;w.vertexShader=y.state.doc.toString(),w.needsUpdate=!0}});l=new vt({doc:"",extensions:[eO,rO(),g],parent:a.value});const v=vt.updateListener.of(y=>{if(y.docChanged){let w=r.value;if(!w)return;w.fragmentShader=y.state.doc.toString(),w.needsUpdate=!0}});u=new vt({doc:"",extensions:[eO,rO(),v],parent:h.value}),t.u_resolution.value.x=s.value.clientWidth,t.u_resolution.value.y=s.value.clientHeight}),Fn(r,()=>{p(0,0)});function f(g){return g.trim()}function p(g,v){let w=n[g].children[v],x=w.vert?w.vert:HD,S=w.frag?w.frag:GD;x=f(x),S=f(S);let _=l,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:x}});_.dispatch(O),_=u,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:S}}),_.dispatch(O)}return(g,v)=>{const y=Rt("Button"),w=Rt("Card"),x=Rt("Col"),S=Rt("Divider"),_=Rt("Row");return mn(),_r(_,null,{default:Je(()=>[Re(x,{span:4},{default:Je(()=>[(mn(),xi(ai,null,uu(n,(O,k)=>Re(w,null,{title:Je(()=>[jt("h3",null,af(O.name),1)]),default:Je(()=>[(mn(!0),xi(ai,null,uu(O.children,(M,P)=>(mn(),_r(y,{onClick:D=>p(k,P)},{default:Je(()=>[li(af(M.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),Re(x,{span:10},{default:Je(()=>[jt("div",{ref_key:"tresCanvasParentRef",ref:s,class:"tresCanvasBorder"},[Re(an(MT),{"clear-color":"#FDF5E6"},{default:Je(()=>[_ke,Ske,jt("TresMesh",null,[Cke,jt("TresShaderMaterial",{ref_key:"materialRef",ref:r,uniforms:t,vertexShader:HD,fragmentShader:GD},null,512)]),Re(an(iM))]),_:1})],512)]),_:1}),Re(x,{span:10},{default:Je(()=>[Re(S,{orientation:"left"},{default:Je(()=>[li("顶点着色器")]),_:1}),jt("div",{ref_key:"codeContainerV",ref:a},null,512),Re(S,{orientation:"left"},{default:Je(()=>[li("片段着色器")]),_:1}),jt("div",{ref_key:"codeContainerF",ref:h},null,512)]),_:1})]),_:1})}}},Tke=jt("TresPerspectiveCamera",{position:[0,0,5]},null,-1),Mke=jt("TresAxesHelper",{args:[2]},null,-1),Eke=jt("TresBoxGeometry",{args:[2,3.6,2]},null,-1),YD=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,jD=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,Pke={__name:"ShaderImageBase",setup(i){const{onLoop:e}=Pu(),n=[{name:"显示图像",children:[{name:"显示图像",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    gl_FragColor = color;
}
`},{name:"图像变色",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float scale = abs(sin(u_time));
    scale *= 1.5;
    color.rgb *= scale;
    gl_FragColor = color;
}
`},{name:"图像置灰",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float gray = color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
    gl_FragColor = vec4(gray, gray, gray, color.a);
}
`},{name:"图像描边",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;

void main() {
    vec4 self = texture2D(u_tex0, UV);

    if(self.a>0.5){
        gl_FragColor = self;
        return;
    }

    float outlineW = abs(sin(u_time))*0.01;
    // outlineW = 0.01;

    int strokeCount = 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x-outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x+outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y-outlineW)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y+outlineW)).a>0.0 ? 1 : 0;

    if (strokeCount>0){
        self.rgb = vec3(1.0, 0.0, 1.0);
        self.a = 1.0;
    }

    gl_FragColor = self;
}
`}]}],t={u_time:{value:0},u_resolution:{value:{x:800,y:600}},u_tex0:{value:null}};e(({elapsed:g})=>{t.u_time.value=g}),at(!0);const r=dr(null),s=dr(null),a=at(null);let l=null;const h=at(null);let u=null;Yi(()=>{const g=vt.updateListener.of(y=>{if(y.docChanged){let w=r.value;if(!w)return;w.vertexShader=y.state.doc.toString(),w.needsUpdate=!0}});l=new vt({doc:"",extensions:[eO,rO(),g],parent:a.value});const v=vt.updateListener.of(y=>{if(y.docChanged){let w=r.value;if(!w)return;w.fragmentShader=y.state.doc.toString(),w.needsUpdate=!0}});u=new vt({doc:"",extensions:[eO,rO(),v],parent:h.value}),t.u_resolution.value.x=s.value.clientWidth,t.u_resolution.value.y=s.value.clientHeight,zfe({map:"img/img1.png"}).then(y=>{t.u_tex0.value=y.map})}),Fn(r,()=>{p(0,0)});function f(g){return g.trim()}function p(g,v){let w=n[g].children[v],x=w.vert?w.vert:YD,S=w.frag?w.frag:jD;x=f(x),S=f(S);let _=l,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:x}});_.dispatch(O),_=u,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:S}}),_.dispatch(O)}return(g,v)=>{const y=Rt("Button"),w=Rt("Card"),x=Rt("Col"),S=Rt("Divider"),_=Rt("Row");return mn(),_r(_,null,{default:Je(()=>[Re(x,{span:4},{default:Je(()=>[(mn(),xi(ai,null,uu(n,(O,k)=>Re(w,null,{title:Je(()=>[jt("h3",null,af(O.name),1)]),default:Je(()=>[(mn(!0),xi(ai,null,uu(O.children,(M,P)=>(mn(),_r(y,{onClick:D=>p(k,P)},{default:Je(()=>[li(af(M.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),Re(x,{span:10},{default:Je(()=>[jt("div",{ref_key:"tresCanvasParentRef",ref:s,class:"tresCanvasBorder"},[Re(an(MT),{"clear-color":"#FDF5E6"},{default:Je(()=>[Tke,Mke,jt("TresMesh",null,[Eke,jt("TresShaderMaterial",{ref_key:"materialRef",ref:r,uniforms:t,vertexShader:YD,fragmentShader:jD},null,512)]),Re(an(iM))]),_:1})],512)]),_:1}),Re(x,{span:10},{default:Je(()=>[Re(S,{orientation:"left"},{default:Je(()=>[li("顶点着色器")]),_:1}),jt("div",{ref_key:"codeContainerV",ref:a},null,512),Re(S,{orientation:"left"},{default:Je(()=>[li("片段着色器")]),_:1}),jt("div",{ref_key:"codeContainerF",ref:h},null,512)]),_:1})]),_:1})}}},Ake=["src"],qD={__name:"ShowVideo",props:{link:String,width:Number,height:Number},setup(i){const e=i,n=at(null);return Yi(()=>{var t=e.width?`${t}px`:"100%",r=e.height?`${r}px`:"100vh";n.value={width:t,height:r}}),(t,r)=>(mn(),xi("video",{src:e.link,style:Gc(n.value),controls:"",autoplay:"",loop:""},null,12,Ake))}},xx=i=>(TN("data-v-97e4533a"),i=i(),MN(),i),Rke=xx(()=>jt("audio",{src:"ballgame/ball_bgm.mp3",id:"ball_bgm",loop:"true"},null,-1)),Ike=xx(()=>jt("audio",{src:"ballgame/ball_bomb.mp3",id:"ball_bomb"},null,-1)),Dke=xx(()=>jt("audio",{src:"ballgame/ball_collect.mp3",id:"ball_collect"},null,-1)),Nke=xx(()=>jt("audio",{src:"ballgame/ball_click.mp3",id:"ball_click"},null,-1)),$ke={__name:"BallGame",setup(i){const e={Wait:"Wait",Play:"Play"},n=at(null);let t=null,r=null,s=[],a=null,l=[],h={},u=0,f=0,p=0,g=0,v=e.Wait,y=null,w=null,x=null,S=null;function _(pe,j){const K=pe.x,X=pe.y,F=pe.radius,te=j.x,re=j.y,H=j.width,q=j.height;let le=Math.max(te,Math.min(K,te+H)),fe=Math.max(re,Math.min(X,re+q)),be=K-le,Me=X-fe;return be*be+Me*Me<=F*F}function O(pe,j){for(let K of j)if(_(pe,K))return K;return null}const k={Black:"Black",Red:"Red"};class M{constructor(j,K,X=100,F=50,te=10){this.color="black",this.x=j,this.y=K,this.width=X,this.height=F,this.radius=te,this.rotation=0,this.rotationCenter={x:this.x+this.width/2,y:this.y+this.height/2},this.angle=0,this.speed=0,this.velocity={x:0,y:0}}setRotation(j){return this.rotation=j*Math.PI/180,this}setRotationCenter(j,K){return this.rotationCenter={x:j,y:K},this}setRotationCenterToMiddle(){return this.rotationCenter={x:this.x+this.width/2,y:this.y+this.height/2},this}setAngle(j){return this.angle=j*Math.PI/180,this._updateVelocity(),this}setSpeed(j){return this.speed=j,this._updateVelocity(),this}setVelocity(j,K){return this.velocity.x=j,this.velocity.y=K,this.speed=Math.sqrt(j*j+K*K),this.angle=Math.atan2(K,j),this}update(){return this.x+=this.velocity.x,this.y+=this.velocity.y,this.rotationCenter&&(this.rotationCenter.x+=this.velocity.x,this.rotationCenter.y+=this.velocity.y),this}_updateVelocity(){this.velocity.x=this.speed*Math.cos(this.angle),this.velocity.y=this.speed*Math.sin(this.angle)}getAngleDegrees(){return this.angle*180/Math.PI}getRotationDegrees(){return this.rotation*180/Math.PI}alignRotationWithMovement(){return this.rotation=this.angle,this}draw(j){j.save(),j.translate(this.rotationCenter.x,this.rotationCenter.y),j.rotate(this.rotation),j.translate(-this.rotationCenter.x,-this.rotationCenter.y);const{width:K,height:X,radius:F}=this;j.beginPath(),j.moveTo(this.x+F,this.y),j.lineTo(this.x+K-F,this.y),j.arcTo(this.x+K,this.y,this.x+K,this.y+F,F),j.lineTo(this.x+K,this.y+X-F),j.arcTo(this.x+K,this.y+X,this.x+K-F,this.y+X,F),j.lineTo(this.x+F,this.y+X),j.arcTo(this.x,this.y+X,this.x,this.y+X-F,F),j.lineTo(this.x,this.y+F),j.arcTo(this.x,this.y,this.x+F,this.y,F),j.closePath(),j.fillStyle=this.color,j.fill(),j.restore()}}class P{constructor(j,K){this.x=j,this.y=K,this.radius=20,this.angle=Math.random()*Math.PI*2,this.speed=20,this.life=1e3,this.alpha=100,this.color=`rgb(255,69,1,${this.alpha})`}draw(){t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.fillStyle=this.color,t.fill()}update(j){this.x=this.x+Math.cos(this.angle)*this.speed,this.y=this.y+Math.sin(this.angle)*this.speed,this.angle+=Math.PI/180,this.speed*=.9,this.radius-=1,this.radius<0&&(this.radius=0),this.alpha-=Math.floor(j/1e3*255),this.life-=j}}class D{constructor(j,K,X=50){this.color="black",this.x=j,this.y=K,this.radius=X,this.rotation=0,this.rotationCenter={x:this.x,y:this.y},this.startAngle=0,this.endAngle=Math.PI*2,this.counterclockwise=!1,this.shadowColor="rgba(0, 0, 0, 0.3)",this.shadowBlur=10,this.shadowOffsetX=3,this.shadowOffsetY=3,this.useGradient=!0,this.highlightColor="rgba(255, 255, 255, 0.8)",this.shadowCenter="rgba(0, 0, 0, 0.2)",this.balls=[]}draw(j){j.save(),this.balls.length>0?this.drawBalls(j):this.drawSelf(j),j.restore()}update(j){this.balls.length>0?this.updateBalls(j):this.updateSelf&&this.updateSelf(j)}drawSelf(j){if(j.shadowColor=this.shadowColor,j.shadowBlur=this.shadowBlur,j.shadowOffsetX=this.shadowOffsetX,j.shadowOffsetY=this.shadowOffsetY,j.translate(this.rotationCenter.x,this.rotationCenter.y),j.rotate(this.rotation),j.translate(-this.rotationCenter.x,-this.rotationCenter.y),this.useGradient){const K=j.createRadialGradient(this.x-this.radius*.3,this.y-this.radius*.3,this.radius*.1,this.x,this.y,this.radius);K.addColorStop(0,this.highlightColor),K.addColorStop(.1,this.color),K.addColorStop(.9,this.color),K.addColorStop(1,this.shadowCenter),j.fillStyle=K}else j.fillStyle=this.color;j.beginPath(),j.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.counterclockwise),j.fill()}blast(){let j=10;this.balls=[];for(let K=0;K<j;K++)this.balls.push(new P(this.x,this.y))}updateBalls(j){let K=[];for(let X=0;X<this.balls.length;X++){const F=this.balls[X];F.update(j),F.life<0&&K.push(F)}for(let X=0;X<K.length;X++){const F=K[X];let te=this.balls.indexOf(F);te>=0&&this.balls.splice(te)}}drawBalls(j){for(let K=0;K<this.balls.length;K++)this.balls[K].draw(j)}setShadow(j,K,X,F){return this.shadowColor=j,this.shadowBlur=K,this.shadowOffsetX=X,this.shadowOffsetY=F,this}setGradientColors(j,K,X){return this.color=j,this.highlightColor=K,this.shadowCenter=X,this}setUseGradient(j){return this.useGradient=j,this}}const A=()=>{n.value&&(n.value.width=window.innerWidth,n.value.height=window.innerHeight)};function R(pe,j){return Math.floor(Math.random()*(j-pe)+pe)}function T(pe,j){return Math.random()*(j-pe)+pe}function N(){return 4+g/5e3}function L(pe){if(u+=pe,u<=2e3)return;u=0;let j=60,K=60,X=h.centerX-j/2,F=h.yMin,te=new M(X,F,j,K,0);s.push(te),l.push(te),R(0,101)<30?(te.boxType=k.Red,te.color="#f6416c"):(te.boxType=k.Black,te.color="#252a34");let re=T(-1.3,1.3);te.setVelocity(re,N())}function I(){let pe=[];for(let j=0;j<l.length;j++){const K=l[j];let X=K.getRotationDegrees()+2;K.setRotation(X),K.y>h.yMax&&pe.push(K)}for(let j=0;j<pe.length;j++){const K=pe[j];$(K)}}function $(pe){let j=l.indexOf(pe);j>=0&&l.splice(j,1),j=s.indexOf(pe),j>=0&&s.splice(j,1)}function B(){let pe=O(a,l);pe&&(pe.boxType===k.Red?(f+=1,$(pe),y.play()):(f=0,g=0,$(pe),a.blast(),x.play()),f>p&&(p=f))}function U(pe,j,K,X,F={}){pe.save(),pe.font=F.font||"52px Courier New",pe.textAlign=F.align||"center",pe.textBaseline=F.baseline||"center",pe.strokeStyle=F.strokeColor||"black",pe.lineWidth=F.strokeWidth||5,pe.strokeText(j,K,X),pe.fillStyle=F.fillColor||"white",pe.fillText(j,K,X),pe.restore()}let Y=0;const Z=()=>{if(!(!t||!n.value)){if(v==e.Play){Y||(Y=Date.now());let pe=Date.now(),j=pe-Y;for(let K=0;K<s.length;K++){const X=s[K];X.update&&X.update(j)}L(j),I(),B(),Y=pe,g+=j,requestAnimationFrame(Z)}t.fillStyle=r,t.fillRect(0,0,n.value.width,n.value.height);for(let pe=0;pe<s.length;pe++)s[pe].draw(t);v==e.Wait&&U(t,"点击屏幕开始游戏",h.centerX,h.yMax*.5),U(t,`当前得分:${f}`,h.centerX,h.yMax*.75),U(t,`得分冠军:${p}`,h.centerX,h.yMax*.75+64)}};function ie(pe){v==e.Wait?(v=e.Play,y.load(),w.load(),x.load(),S.load(),w.play(),Z()):a.speed=-a.speed}function ce(pe){ie(),pe.preventDefault()}function ge(pe){}function Ae(pe){}function Se(pe){ie(),pe.preventDefault()}function he(pe){pe.preventDefault()}function Ce(pe){console.log("Touch end")}return Yi(()=>{t=n.value.getContext("2d"),A(),h.width=600,h.height=n.value.height,h.centerX=n.value.width/2,h.centerY=n.value.height/2,h.xMin=h.centerX-h.width/2,h.xMax=h.centerX+h.width/2,h.yMin=h.centerY-h.height/2,h.yMax=h.centerY+h.height/2;const pe=n.value.width/2,j=n.value.height/2;r=t.createLinearGradient(0,0,n.value.width,0),r.addColorStop(0,"#71c9ce"),r.addColorStop(.5,"#8edbdf"),r.addColorStop(1,"#71c9ce"),window.addEventListener("resize",A),window.addEventListener("mousedown",ce),window.addEventListener("mousemove",ge),window.addEventListener("mouseup",Ae),window.addEventListener("touchstart",Se),window.addEventListener("touchmove",he),window.addEventListener("touchend",Ce),w=document.getElementById("ball_bgm"),y=document.getElementById("ball_collect"),x=document.getElementById("ball_bomb"),S=document.getElementById("ball_click");{let X=h.width,F=h.height,te=pe-X/2,re=j-F/2,H=new M(te,re,X,F,5);H.color="#A9A9A988"}let K=0;{let X=h.width*.6,F=60,te=pe-X/2,re=h.yMax*.6,H=new M(te,re,X,F,F/2);H.color="#A9A9A9",s.push(H),K=X}{let X=30,F=pe,te=h.yMax*.6+X,re=new D(F,te,X);re.color="#FF4500",re.speed=300,re.updateSelf=(H=>{re.x+=re.speed*H/1e3,re.x>F+K/2-X?re.speed=-Math.abs(re.speed):re.x<F-K/2+X&&(re.speed=Math.abs(re.speed)),re.x>h.xMax&&(re.x=h.xMin,re.speed=Math.abs(re.speed)),re.x<h.xMin&&(re.x=h.xMax,re.speed=-Math.abs(re.speed))}).bind(re),s.push(re),a=re}Z()}),To(()=>{window.removeEventListener("resize",A),window.removeEventListener("mousedown",ce),window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",Ae),window.removeEventListener("touchstart",Se),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ce),w.pause()}),(pe,j)=>(mn(),xi(ai,null,[Rke,Ike,Dke,Nke,jt("canvas",{ref_key:"canvasRef",ref:n},null,512)],64))}},Vke=U1e($ke,[["__scopeId","data-v-97e4533a"]]),Lke={key:0},Bke={key:1},Uke={__name:"App",setup(i){const e=[{id:"TankMain",title:"坦克大战",comp:W1e},{id:"KonvaMain",title:"Konva示例",comp:Qbe},{id:"CoinKnight",title:"金币骑士",comp:zm,link:"CoinKnight/index.html"},{id:"FarmMine",title:"田园扫雷",comp:zm,link:"FarmMine/index.html"},{id:"jigsaw",title:"拼图游戏",comp:zm,link:"jigsaw/index.html"},{id:"tetris",title:"俄罗斯方块",comp:zm,link:"tetris/index.html"},{id:"heart",title:"跳动的爱心",comp:zm,link:"webui/heart.html"},{id:"KonvaStageTest",title:"KonvaStageTest",comp:Jbe},{id:"GridSquare",title:"矩形网格",comp:Gbe},{id:"GridParallelogramH",title:"横向平行四边形网格",comp:jbe},{id:"GridParallelogramV",title:"纵向平行四边形网格",comp:Zbe},{id:"TrigoCalc",title:"三角函数计算器",comp:tOe},{id:"ShaderFragBase",title:"Shader-函数入门",comp:kke},{id:"ShaderImageBase",title:"Shader-图像入门",comp:Pke},{id:"v-puzzle",title:"拼图演示",comp:qD,link:"video/puzzle.mp4"},{id:"v-ice",title:"冰块演示",comp:qD,link:"video/ice.mp4"},{id:"BallGame",title:"小球碰撞游戏",comp:Vke}],n=at(window.location.hash.slice(1));window.addEventListener("hashchange",()=>{n.value=window.location.hash.slice(1),document.title="Project:"+n.value});const t=ci(()=>e.find(s=>s.id===n.value)),r=ci(()=>{var s;return(s=t.value)==null?void 0:s.comp});return(s,a)=>{const l=Rt("GridItem"),h=Rt("Grid");return r.value?(mn(),xi("div",Lke,[(mn(),_r(AN,null,{default:Je(()=>[t.value.link?(mn(),_r(XS(r.value),{key:0,link:t.value.link},null,8,["link"])):(mn(),_r(XS(r.value),{key:1}))]),_:1}))])):(mn(),xi("div",Bke,[Re(h,{col:5},{default:Je(()=>[(mn(),xi(ai,null,uu(e,u=>Re(l,null,{default:Je(()=>[Re(Xre,{routeData:u},null,8,["routeData"])]),_:2},1024)),64))]),_:1})]))}}};var nk={exports:{}};(function(i,e){(function(n,t){t(e,tU)})(Kd,function(n,t){const r=typeof window<"u",s=function(){return r&&document.addEventListener?function(o,c,d,C=!1){o&&c&&d&&o.addEventListener(c,d,C)}:function(o,c,d){o&&c&&d&&o.attachEvent("on"+c,d)}}(),a=function(){return r&&document.removeEventListener?function(o,c,d,C=!1){o&&c&&o.removeEventListener(c,d,C)}:function(o,c,d){o&&c&&o.detachEvent("on"+c,d)}}();var l=(o,c)=>{const d=o.__vccOpts||o;for(const[C,b]of c)d[C]=b;return d};const h="ivu-affix";function u(o,c){const d=c?"pageYOffset":"pageXOffset",C=c?"scrollTop":"scrollLeft";let b=o[d];return r&&typeof b!="number"&&(b=window.document.documentElement[C]),b}function f(o){if(!r)return;const c=o.getBoundingClientRect(),d=u(window,!0),C=u(window),b=window.document.body,m=b.clientTop||0,E=b.clientLeft||0;return{top:c.top+d-m,left:c.left+C-E}}const p={name:"Affix",emits:["on-change"],props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},useCapture:{type:Boolean,default:!1}},data(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType(){let o="top";return this.offsetBottom>=0&&(o="bottom"),o},classes(){return[{[`${h}`]:this.affix}]}},mounted(){s(window,"scroll",this.handleScroll,this.useCapture),s(window,"resize",this.handleScroll,this.useCapture),t.nextTick(()=>{this.handleScroll()})},beforeUnmount(){a(window,"scroll",this.handleScroll,this.useCapture),a(window,"resize",this.handleScroll,this.useCapture)},methods:{handleScroll(){if(!r)return;const o=this.affix,c=u(window,!0),d=f(this.$el),C=window.innerHeight,b=this.$el.getElementsByTagName("div")[0].offsetHeight;d.top-this.offsetTop<c&&this.offsetType=="top"&&!o?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${d.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):d.top-this.offsetTop>c&&this.offsetType=="top"&&o&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),d.top+this.offsetBottom+b>c+C&&this.offsetType=="bottom"&&!o?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${d.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):d.top+this.offsetBottom+b<c+C&&this.offsetType=="bottom"&&o&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};function g(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",null,[t.createElementVNode("div",{ref:"point",class:t.normalizeClass(m.classes),style:t.normalizeStyle(b.styles)},[t.renderSlot(o.$slots,"default")],6),t.withDirectives(t.createElementVNode("div",{style:t.normalizeStyle(b.slotStyle)},null,4),[[t.vShow,b.slot]])])}var v=l(p,[["render",g]]);const y="ivu-icon",w={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return[`${y}`,{[`${y}-${this.type}`]:this.type!=="",[`${this.custom}`]:this.custom!==""}]},styles(){let o={};return this.size&&(o["font-size"]=`${this.size}px`),this.color&&(o.color=this.color),o}}};function x(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("i",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.styles)},null,6)}var S=l(w,[["render",x]]);function _(o,c){for(let d=0;d<c.length;d++)if(o===c[d])return!0;return!1}let O;function k(o){if(r&&O===void 0){const c=document.createElement("div");c.style.width="100%",c.style.height="200px";const d=document.createElement("div"),C=d.style;C.position="absolute",C.top=0,C.left=0,C.pointerEvents="none",C.visibility="hidden",C.width="200px",C.height="150px",C.overflow="hidden",d.appendChild(c),document.body.appendChild(d);const b=c.offsetWidth;d.style.overflow="scroll";let m=c.offsetWidth;b===m&&(m=d.clientWidth),document.body.removeChild(d),O=b-m}return O}const M=r&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||!1,P=/([\:\-\_]+(.))/g,D=/^moz([A-Z])/;function A(o){return o.replace(P,function(c,d,C,b){return b?C.toUpperCase():C}).replace(D,"Moz$1")}function R(o,c){if(r){if(!o||!c)return null;c=A(c),c==="float"&&(c="cssFloat");try{const d=document.defaultView.getComputedStyle(o,"");return o.style[c]||d?d[c]:null}catch{return o.style[c]}}}function T(o){return o.toString()[0].toUpperCase()+o.toString().slice(1)}function N(o){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(o)]}function L(o){const c=N(o);let d;if(c==="array")d=[];else if(c==="object")d={};else return o;if(c==="array")for(let C=0;C<o.length;C++)d.push(L(o[C]));else if(c==="object")for(let C in o)d[C]=L(o[C]);return d}function I(o,c=0,d,C=500,b){if(!r)return;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(W){return window.setTimeout(W,1e3/60)});const m=Math.abs(c-d),E=Math.ceil(m/C*50);function V(W,z,G){if(W===z){b&&b();return}let ae=W+G>z?z:W+G;W>z&&(ae=W-G<z?z:W-G),o===window?window.scrollTo(ae,ae):o.scrollTop=ae,window.requestAnimationFrame(()=>V(ae,z,G))}V(c,d,E)}function $(o,c,d){typeof c=="string"?d=[c]:d=c;let C=o.$parent,b=C.$options.name;for(;C&&(!b||d.indexOf(b)<0);)C=C.$parent,C&&(b=C.$options.name);return C}function B(o,c){let d=[];const C=o.$parent;return C?(C.$options.name===c&&d.push(C),d.concat(B(C,c))):[]}const U=function(o){return(o||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function Y(o,c){if(!o||!c)return!1;if(c.indexOf(" ")!==-1)throw new Error("className should not contain space.");return o.classList?o.classList.contains(c):(" "+o.className+" ").indexOf(" "+c+" ")>-1}function Z(o,c){if(!o)return;let d=o.className;const C=(c||"").split(" ");for(let b=0,m=C.length;b<m;b++){const E=C[b];!E||(o.classList?o.classList.add(E):Y(o,E)||(d+=" "+E))}o.classList||(o.className=d)}function ie(o,c){if(!o||!c)return;const d=c.split(" ");let C=" "+o.className+" ";for(let b=0,m=d.length;b<m;b++){const E=d[b];!E||(o.classList?o.classList.remove(E):Y(o,E)&&(C=C.replace(" "+E+" "," ")))}o.classList||(o.className=U(C))}const ce={xs:"480px",sm:"576px",md:"768px",lg:"992px",xl:"1200px",xxl:"1600px"};function ge(){if(!r)return;const o=c=>({media:c,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||o}const Ae=/#([^#]+)$/;async function Se(o,c="unnamed"){if(!r)return Promise.reject();try{const d=await(await fetch(o)).blob();if(!d)return Promise.reject();const C=URL.createObjectURL(d),b=document.createElement("a");return b.setAttribute("href",C),b.setAttribute("download",c),b.click(),URL.revokeObjectURL(C),Promise.resolve()}catch(d){return Promise.reject(d)}}const he="ivu-alert",Ce={name:"Alert",components:{Icon:S},props:{type:{validator(o){return _(o,["success","info","warning","error"])},default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},banner:{type:Boolean,default:!1},fade:{type:Boolean,default:!0}},data(){return{closed:!1,desc:!1}},computed:{wrapClasses(){return[`${he}`,`${he}-${this.type}`,{[`${he}-with-icon`]:this.showIcon,[`${he}-with-desc`]:this.desc,[`${he}-with-banner`]:this.banner}]},messageClasses(){return`${he}-message`},descClasses(){return`${he}-desc`},closeClasses(){return`${he}-close`},iconClasses(){return`${he}-icon`},iconType(){let o="";switch(this.type){case"success":o="ios-checkmark-circle";break;case"info":o="ios-information-circle";break;case"warning":o="ios-alert";break;case"error":o="ios-close-circle";break}return this.desc&&(o+="-outline"),o}},methods:{close(o){this.closed=!0,this.$emit("on-close",o)}},mounted(){this.desc=this.$slots.desc!==void 0}};function pe(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Transition,{name:d.fade?"fade":""},{default:t.withCtx(()=>[b.closed?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.wrapClasses)},[d.showIcon?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(m.iconClasses)},[t.renderSlot(o.$slots,"icon",{},()=>[t.createVNode(E,{type:m.iconType},null,8,["type"])])],2)):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(m.messageClasses)},[t.renderSlot(o.$slots,"default")],2),t.createElementVNode("span",{class:t.normalizeClass(m.descClasses)},[t.renderSlot(o.$slots,"desc")],2),d.closable?(t.openBlock(),t.createElementBlock("a",{key:1,class:t.normalizeClass(m.closeClasses),onClick:c[0]||(c[0]=(...V)=>m.close&&m.close(...V))},[t.renderSlot(o.$slots,"close",{},()=>[t.createVNode(E,{type:"ios-close"})])],2)):t.createCommentVNode("",!0)],2))]),_:3},8,["name"])}var j=l(Ce,[["render",pe]]);const K={name:"Anchor",provide(){return{AnchorInstance:this}},emits:["on-change","on-select"],props:{affix:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},offsetBottom:Number,bounds:{type:Number,default:5},container:null,showInk:{type:Boolean,default:!1},scrollOffset:{type:Number,default:0}},data(){return{prefix:"ivu-anchor",isAffixed:!1,inkTop:0,animating:!1,currentLink:"",currentId:"",scrollContainer:null,scrollElement:null,wrapperTop:0,upperFirstTitle:!0,links:[]}},computed:{wrapperComponent(){return this.affix?"Affix":"div"},wrapperStyle(){return{maxHeight:this.offsetTop?`calc(100vh - ${this.offsetTop}px)`:"100vh"}},containerIsWindow(){return this.scrollContainer===window},titlesOffsetArr(){const o=this.links.map(d=>d.link.href).map(d=>d.split("#")[1]);let c=[];return r&&o.forEach(d=>{const C=document.getElementById(d);C&&c.push({link:`#${d}`,offset:C.offsetTop-this.scrollElement.offsetTop})}),c}},methods:{handleAffixStateChange(o){this.isAffixed=this.affix&&o},handleScroll(o){if(this.upperFirstTitle=!!this.titlesOffsetArr[0]&&o.target.scrollTop<this.titlesOffsetArr[0].offset,this.animating)return;const c=r?document.documentElement.scrollTop||document.body.scrollTop||o.target.scrollTop:0;this.getCurrentScrollAtTitleId(c)},handleHashChange(){if(!r)return;const o=window.location.href,c=Ae.exec(o);!c||(this.currentLink=c[0],this.currentId=c[1])},handleScrollTo(){if(!r)return;const o=document.getElementById(this.currentId),c=document.querySelector(`a[data-href="${this.currentLink}"]`);let d=this.scrollOffset;if(c&&(d=parseFloat(c.getAttribute("data-scroll-offset"))),!o)return;const C=o.offsetTop-this.wrapperTop-d;this.animating=!0,I(this.scrollContainer,this.scrollElement.scrollTop,C,600,()=>{this.animating=!1}),this.handleSetInkTop()},handleSetInkTop(){if(!r)return;const o=document.querySelector(`a[data-href="${this.currentLink}"]`);if(!o)return;const c=o.offsetTop,d=c<0?this.offsetTop:c;this.inkTop=d},getCurrentScrollAtTitleId(o){let c=-1,d=this.titlesOffsetArr.length,C={link:"#",offset:0};for(o+=this.bounds;++c<d;){let b=this.titlesOffsetArr[c],m=this.titlesOffsetArr[c+1];if(o>=b.offset&&o<(m&&m.offset||1/0)){C=this.titlesOffsetArr[c];break}}this.currentLink=C.link,this.handleSetInkTop()},getContainer(){!r||(this.scrollContainer=this.container?typeof this.container=="string"?document.querySelector(this.container):this.container:window,this.scrollElement=this.container?this.scrollContainer:document.documentElement||document.body)},removeListener(){a(this.scrollContainer,"scroll",this.handleScroll),a(window,"hashchange",this.handleHashChange)},init(){this.handleHashChange(),t.nextTick(()=>{this.removeListener(),this.getContainer(),this.wrapperTop=this.containerIsWindow?0:this.scrollElement.offsetTop,this.handleScrollTo(),this.handleSetInkTop(),this.titlesOffsetArr[0]&&(this.upperFirstTitle=this.scrollElement.scrollTop<this.titlesOffsetArr[0].offset),s(this.scrollContainer,"scroll",this.handleScroll),s(window,"hashchange",this.handleHashChange)})},addLink(o,c){this.links.push({id:o,link:c})},removeLink(o){const c=this.links.findIndex(d=>d.id===o);this.links.splice(c,1)}},watch:{$route(){this.currentLink="",this.currentId="",this.handleHashChange(),t.nextTick(()=>{this.handleScrollTo()})},container(){this.init()},currentLink(o,c){this.$emit("on-change",o,c)}},mounted(){this.init()},beforeUnmount(){this.removeListener()}};function X(o,c,d,C,b,m){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(m.wrapperComponent),{"offset-top":d.offsetTop,"offset-bottom":d.offsetBottom,onOnChange:m.handleAffixStateChange},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(`${b.prefix}-wrapper`),style:t.normalizeStyle(m.wrapperStyle)},[t.createElementVNode("div",{class:t.normalizeClass(`${b.prefix}`)},[t.createElementVNode("div",{class:t.normalizeClass(`${b.prefix}-ink`)},[t.withDirectives(t.createElementVNode("span",{class:t.normalizeClass(`${b.prefix}-ink-ball`),style:t.normalizeStyle({top:`${b.inkTop}px`})},null,6),[[t.vShow,d.showInk]])],2),t.renderSlot(o.$slots,"default")],2)],6)]),_:3},40,["offset-top","offset-bottom","onOnChange"])}var F=l(K,[["render",X]]);function te(o=32){const c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",d=c.length;let C="";for(let b=0;b<o;b++)C+=c.charAt(Math.floor(Math.random()*d));return C}const re={name:"AnchorLink",inject:["AnchorInstance"],props:{href:String,title:String,scrollOffset:{type:Number,default(){return t.inject("AnchorInstance").scrollOffset}}},data(){return{prefix:"ivu-anchor-link",id:te(6)}},computed:{anchorLinkClasses(){return[this.prefix,this.AnchorInstance.currentLink===this.href?`${this.prefix}-active`:""]},linkTitleClasses(){return[`${this.prefix}-title`]}},methods:{goAnchor(){this.currentLink=this.href,this.AnchorInstance.handleHashChange(),this.AnchorInstance.handleScrollTo(),this.AnchorInstance.$emit("on-select",this.href),this.$router?this.$router.push(this.href,()=>{}):r&&(window.location.href=this.href)}},mounted(){this.AnchorInstance.addLink(this.id,this),t.nextTick(()=>{this.AnchorInstance.init()})},beforeUnmount(){this.AnchorInstance.removeLink(this.id)}},H=["href","data-scroll-offset","data-href","title"];function q(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.anchorLinkClasses)},[t.createElementVNode("a",{class:t.normalizeClass(m.linkTitleClasses),href:d.href,"data-scroll-offset":d.scrollOffset,"data-href":d.href,onClick:c[0]||(c[0]=t.withModifiers((...E)=>m.goAnchor&&m.goAnchor(...E),["prevent"])),title:d.title},t.toDisplayString(d.title),11,H),t.renderSlot(o.$slots,"default")],2)}var le=l(re,[["render",q]]),fe={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(o){return _(o,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){if(typeof this.to!="string")return null;if(this.to.includes("//"))return this.to;const o=this.$router;if(o){const c=this.$route,d=o.resolve(this.to,c,this.append);return d?d.href:this.to}return this.to}},methods:{handleOpenTo(){if(!r)return;const o=this.$router;let c=this.to;if(o){const d=this.$route,C=o.resolve(this.to,d,this.append);c=C?C.href:this.to}typeof this.to!="string"&&window.open(c)},handleClick(o=!1){const c=this.$router;!r||(o?this.handleOpenTo():c?typeof this.to=="string"&&this.to.includes("//")?window.location.href=this.to:this.replace?this.$router.replace(this.to,()=>{}):this.$router.push(this.to,()=>{}):window.location.href=this.to)},handleCheckClick(o,c=!1){if(this.to){if(this.target==="_blank")return this.handleOpenTo(),!1;o.preventDefault(),this.handleClick(c)}}}};function be(o,c){let d=!1;return c.forEach(C=>{o.includes(C)&&(d=!0)}),d}const Me={name:"Auth",mixins:[fe],emits:["click"],props:{authority:{type:[String,Array,Function,Boolean],default:!0},access:{type:[String,Array]},prevent:{type:Boolean,default:!1},message:{type:String,default:"您没有权限进行此操作"},customTip:{type:Boolean,default:!1},display:{type:String}},computed:{isPermission(){let o;if(typeof this.authority=="boolean")o=this.authority;else if(this.authority instanceof Function)o=this.authority();else{const c=typeof this.authority=="string"?[this.authority]:this.authority,d=typeof this.access=="string"?[this.access]:this.access;o=be(c,d)}return o},options(){let o={};return this.display&&(o.display=this.display),{class:{"ivu-auth":!0,"ivu-auth-permission":this.isPermission,"ivu-auth-no-math":!this.isPermission,"ivu-auth-redirect":!this.isPermission&&this.to,"ivu-auth-prevent":this.prevent},style:o}}},render(){return this.isPermission?t.h("div",this.options,this.$slots.default()):this.to?t.h("div",this.options):this.prevent?t.h("div",Object.assign({},this.options,{onClick:this.handlePreventClick}),[t.h("div",{class:"ivu-auth-prevent-no-match"},this.$slots.default())]):t.h("div",this.options,this.$slots.noMatch())},methods:{handlePreventClick(o){this.isPermission||(this.customTip||this.$Message.info({content:this.message,duration:3}),this.$emit("click",o))}},created(){!this.isPermission&&this.to&&this.handleClick(!1)}};var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Kd<"u"?Kd:typeof self<"u"?self:{};function Q(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ue={exports:{}};/**!
* @fileOverview Kickass library to create and place poppers near their reference elements.
* @version 1.16.1
* @license
* Copyright (c) 2016 Federico Zivolo and contributors
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/(function(o,c){(function(d,C){o.exports=C()})(J,function(){var d=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",C=function(){for(var ee=["Edge","Trident","Firefox"],ye=0;ye<ee.length;ye+=1)if(d&&navigator.userAgent.indexOf(ee[ye])>=0)return 1;return 0}();function b(ee){var ye=!1;return function(){ye||(ye=!0,window.Promise.resolve().then(function(){ye=!1,ee()}))}}function m(ee){var ye=!1;return function(){ye||(ye=!0,setTimeout(function(){ye=!1,ee()},C))}}var E=d&&window.Promise,V=E?b:m;function W(ee){var ye={};return ee&&ye.toString.call(ee)==="[object Function]"}function z(ee,ye){if(ee.nodeType!==1)return[];var ke=ee.ownerDocument.defaultView,Ie=ke.getComputedStyle(ee,null);return ye?Ie[ye]:Ie}function G(ee){return ee.nodeName==="HTML"?ee:ee.parentNode||ee.host}function ae(ee){if(!ee)return document.body;switch(ee.nodeName){case"HTML":case"BODY":return ee.ownerDocument.body;case"#document":return ee.body}var ye=z(ee),ke=ye.overflow,Ie=ye.overflowX,qe=ye.overflowY;return/(auto|scroll|overlay)/.test(ke+qe+Ie)?ee:ae(G(ee))}function xe(ee){return ee&&ee.referenceNode?ee.referenceNode:ee}var Oe=d&&!!(window.MSInputMethodContext&&document.documentMode),ve=d&&/MSIE 10/.test(navigator.userAgent);function se(ee){return ee===11?Oe:ee===10?ve:Oe||ve}function Pe(ee){if(!ee)return document.documentElement;for(var ye=se(10)?document.body:null,ke=ee.offsetParent||null;ke===ye&&ee.nextElementSibling;)ke=(ee=ee.nextElementSibling).offsetParent;var Ie=ke&&ke.nodeName;return!Ie||Ie==="BODY"||Ie==="HTML"?ee?ee.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(ke.nodeName)!==-1&&z(ke,"position")==="static"?Pe(ke):ke}function $t(ee){var ye=ee.nodeName;return ye==="BODY"?!1:ye==="HTML"||Pe(ee.firstElementChild)===ee}function mt(ee){return ee.parentNode!==null?mt(ee.parentNode):ee}function Ot(ee,ye){if(!ee||!ee.nodeType||!ye||!ye.nodeType)return document.documentElement;var ke=ee.compareDocumentPosition(ye)&Node.DOCUMENT_POSITION_FOLLOWING,Ie=ke?ee:ye,qe=ke?ye:ee,je=document.createRange();je.setStart(Ie,0),je.setEnd(qe,0);var et=je.commonAncestorContainer;if(ee!==et&&ye!==et||Ie.contains(qe))return $t(et)?et:Pe(et);var st=mt(ee);return st.host?Ot(st.host,ye):Ot(ee,mt(ye).host)}function He(ee){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",ke=ye==="top"?"scrollTop":"scrollLeft",Ie=ee.nodeName;if(Ie==="BODY"||Ie==="HTML"){var qe=ee.ownerDocument.documentElement,je=ee.ownerDocument.scrollingElement||qe;return je[ke]}return ee[ke]}function De(ee,ye){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ie=He(ye,"top"),qe=He(ye,"left"),je=ke?-1:1;return ee.top+=Ie*je,ee.bottom+=Ie*je,ee.left+=qe*je,ee.right+=qe*je,ee}function Ke(ee,ye){var ke=ye==="x"?"Left":"Top",Ie=ke==="Left"?"Right":"Bottom";return parseFloat(ee["border"+ke+"Width"])+parseFloat(ee["border"+Ie+"Width"])}function Ye(ee,ye,ke,Ie){return Math.max(ye["offset"+ee],ye["scroll"+ee],ke["client"+ee],ke["offset"+ee],ke["scroll"+ee],se(10)?parseInt(ke["offset"+ee])+parseInt(Ie["margin"+(ee==="Height"?"Top":"Left")])+parseInt(Ie["margin"+(ee==="Height"?"Bottom":"Right")]):0)}function zt(ee){var ye=ee.body,ke=ee.documentElement,Ie=se(10)&&getComputedStyle(ke);return{height:Ye("Height",ye,ke,Ie),width:Ye("Width",ye,ke,Ie)}}var Ft=function(ee,ye){if(!(ee instanceof ye))throw new TypeError("Cannot call a class as a function")},Mt=function(){function ee(ye,ke){for(var Ie=0;Ie<ke.length;Ie++){var qe=ke[Ie];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(ye,qe.key,qe)}}return function(ye,ke,Ie){return ke&&ee(ye.prototype,ke),Ie&&ee(ye,Ie),ye}}(),xt=function(ee,ye,ke){return ye in ee?Object.defineProperty(ee,ye,{value:ke,enumerable:!0,configurable:!0,writable:!0}):ee[ye]=ke,ee},At=Object.assign||function(ee){for(var ye=1;ye<arguments.length;ye++){var ke=arguments[ye];for(var Ie in ke)Object.prototype.hasOwnProperty.call(ke,Ie)&&(ee[Ie]=ke[Ie])}return ee};function Wt(ee){return At({},ee,{right:ee.left+ee.width,bottom:ee.top+ee.height})}function Et(ee){var ye={};try{if(se(10)){ye=ee.getBoundingClientRect();var ke=He(ee,"top"),Ie=He(ee,"left");ye.top+=ke,ye.left+=Ie,ye.bottom+=ke,ye.right+=Ie}else ye=ee.getBoundingClientRect()}catch{}var qe={left:ye.left,top:ye.top,width:ye.right-ye.left,height:ye.bottom-ye.top},je=ee.nodeName==="HTML"?zt(ee.ownerDocument):{},et=je.width||ee.clientWidth||qe.width,st=je.height||ee.clientHeight||qe.height,yt=ee.offsetWidth-et,Xt=ee.offsetHeight-st;if(yt||Xt){var Ht=z(ee);yt-=Ke(Ht,"x"),Xt-=Ke(Ht,"y"),qe.width-=yt,qe.height-=Xt}return Wt(qe)}function gt(ee,ye){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ie=se(10),qe=ye.nodeName==="HTML",je=Et(ee),et=Et(ye),st=ae(ee),yt=z(ye),Xt=parseFloat(yt.borderTopWidth),Ht=parseFloat(yt.borderLeftWidth);ke&&qe&&(et.top=Math.max(et.top,0),et.left=Math.max(et.left,0));var Lt=Wt({top:je.top-et.top-Xt,left:je.left-et.left-Ht,width:je.width,height:je.height});if(Lt.marginTop=0,Lt.marginLeft=0,!Ie&&qe){var Gt=parseFloat(yt.marginTop),Mn=parseFloat(yt.marginLeft);Lt.top-=Xt-Gt,Lt.bottom-=Xt-Gt,Lt.left-=Ht-Mn,Lt.right-=Ht-Mn,Lt.marginTop=Gt,Lt.marginLeft=Mn}return(Ie&&!ke?ye.contains(st):ye===st&&st.nodeName!=="BODY")&&(Lt=De(Lt,ye)),Lt}function ct(ee){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke=ee.ownerDocument.documentElement,Ie=gt(ee,ke),qe=Math.max(ke.clientWidth,window.innerWidth||0),je=Math.max(ke.clientHeight,window.innerHeight||0),et=ye?0:He(ke),st=ye?0:He(ke,"left"),yt={top:et-Ie.top+Ie.marginTop,left:st-Ie.left+Ie.marginLeft,width:qe,height:je};return Wt(yt)}function It(ee){var ye=ee.nodeName;if(ye==="BODY"||ye==="HTML")return!1;if(z(ee,"position")==="fixed")return!0;var ke=G(ee);return ke?It(ke):!1}function bt(ee){if(!ee||!ee.parentElement||se())return document.documentElement;for(var ye=ee.parentElement;ye&&z(ye,"transform")==="none";)ye=ye.parentElement;return ye||document.documentElement}function Kt(ee,ye,ke,Ie){var qe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,je={top:0,left:0},et=qe?bt(ee):Ot(ee,xe(ye));if(Ie==="viewport")je=ct(et,qe);else{var st=void 0;Ie==="scrollParent"?(st=ae(G(ye)),st.nodeName==="BODY"&&(st=ee.ownerDocument.documentElement)):Ie==="window"?st=ee.ownerDocument.documentElement:st=Ie;var yt=gt(st,et,qe);if(st.nodeName==="HTML"&&!It(et)){var Xt=zt(ee.ownerDocument),Ht=Xt.height,Lt=Xt.width;je.top+=yt.top-yt.marginTop,je.bottom=Ht+yt.top,je.left+=yt.left-yt.marginLeft,je.right=Lt+yt.left}else je=yt}ke=ke||0;var Gt=typeof ke=="number";return je.left+=Gt?ke:ke.left||0,je.top+=Gt?ke:ke.top||0,je.right-=Gt?ke:ke.right||0,je.bottom-=Gt?ke:ke.bottom||0,je}function nn(ee){var ye=ee.width,ke=ee.height;return ye*ke}function zn(ee,ye,ke,Ie,qe){var je=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(ee.indexOf("auto")===-1)return ee;var et=Kt(ke,Ie,je,qe),st={top:{width:et.width,height:ye.top-et.top},right:{width:et.right-ye.right,height:et.height},bottom:{width:et.width,height:et.bottom-ye.bottom},left:{width:ye.left-et.left,height:et.height}},yt=Object.keys(st).map(function(Gt){return At({key:Gt},st[Gt],{area:nn(st[Gt])})}).sort(function(Gt,Mn){return Mn.area-Gt.area}),Xt=yt.filter(function(Gt){var Mn=Gt.width,En=Gt.height;return Mn>=ke.clientWidth&&En>=ke.clientHeight}),Ht=Xt.length>0?Xt[0].key:yt[0].key,Lt=ee.split("-")[1];return Ht+(Lt?"-"+Lt:"")}function ti(ee,ye,ke){var Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,qe=Ie?bt(ye):Ot(ye,xe(ke));return gt(ke,qe,Ie)}function Oi(ee){var ye=ee.ownerDocument.defaultView,ke=ye.getComputedStyle(ee),Ie=parseFloat(ke.marginTop||0)+parseFloat(ke.marginBottom||0),qe=parseFloat(ke.marginLeft||0)+parseFloat(ke.marginRight||0),je={width:ee.offsetWidth+qe,height:ee.offsetHeight+Ie};return je}function ki(ee){var ye={left:"right",right:"left",bottom:"top",top:"bottom"};return ee.replace(/left|right|bottom|top/g,function(ke){return ye[ke]})}function mr(ee,ye,ke){ke=ke.split("-")[0];var Ie=Oi(ee),qe={width:Ie.width,height:Ie.height},je=["right","left"].indexOf(ke)!==-1,et=je?"top":"left",st=je?"left":"top",yt=je?"height":"width",Xt=je?"width":"height";return qe[et]=ye[et]+ye[yt]/2-Ie[yt]/2,ke===st?qe[st]=ye[st]-Ie[Xt]:qe[st]=ye[ki(st)],qe}function us(ee,ye){return Array.prototype.find?ee.find(ye):ee.filter(ye)[0]}function No(ee,ye,ke){if(Array.prototype.findIndex)return ee.findIndex(function(qe){return qe[ye]===ke});var Ie=us(ee,function(qe){return qe[ye]===ke});return ee.indexOf(Ie)}function $o(ee,ye,ke){var Ie=ke===void 0?ee:ee.slice(0,No(ee,"name",ke));return Ie.forEach(function(qe){qe.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var je=qe.function||qe.fn;qe.enabled&&W(je)&&(ye.offsets.popper=Wt(ye.offsets.popper),ye.offsets.reference=Wt(ye.offsets.reference),ye=je(ye,qe))}),ye}function _t(){if(!this.state.isDestroyed){var ee={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};ee.offsets.reference=ti(this.state,this.popper,this.reference,this.options.positionFixed),ee.placement=zn(this.options.placement,ee.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),ee.originalPlacement=ee.placement,ee.positionFixed=this.options.positionFixed,ee.offsets.popper=mr(this.popper,ee.offsets.reference,ee.placement),ee.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",ee=$o(this.modifiers,ee),this.state.isCreated?this.options.onUpdate(ee):(this.state.isCreated=!0,this.options.onCreate(ee))}}function qt(ee,ye){return ee.some(function(ke){var Ie=ke.name,qe=ke.enabled;return qe&&Ie===ye})}function Tn(ee){for(var ye=[!1,"ms","Webkit","Moz","O"],ke=ee.charAt(0).toUpperCase()+ee.slice(1),Ie=0;Ie<ye.length;Ie++){var qe=ye[Ie],je=qe?""+qe+ke:ee;if(typeof document.body.style[je]<"u")return je}return null}function cr(){return this.state.isDestroyed=!0,qt(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Tn("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Yr(ee){var ye=ee.ownerDocument;return ye?ye.defaultView:window}function Wa(ee,ye,ke,Ie){var qe=ee.nodeName==="BODY",je=qe?ee.ownerDocument.defaultView:ee;je.addEventListener(ye,ke,{passive:!0}),qe||Wa(ae(je.parentNode),ye,ke,Ie),Ie.push(je)}function jl(ee,ye,ke,Ie){ke.updateBound=Ie,Yr(ee).addEventListener("resize",ke.updateBound,{passive:!0});var qe=ae(ee);return Wa(qe,"scroll",ke.updateBound,ke.scrollParents),ke.scrollElement=qe,ke.eventsEnabled=!0,ke}function jr(){this.state.eventsEnabled||(this.state=jl(this.reference,this.options,this.state,this.scheduleUpdate))}function Hn(ee,ye){return Yr(ee).removeEventListener("resize",ye.updateBound),ye.scrollParents.forEach(function(ke){ke.removeEventListener("scroll",ye.updateBound)}),ye.updateBound=null,ye.scrollParents=[],ye.scrollElement=null,ye.eventsEnabled=!1,ye}function ds(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Hn(this.reference,this.state))}function Vo(ee){return ee!==""&&!isNaN(parseFloat(ee))&&isFinite(ee)}function Us(ee,ye){Object.keys(ye).forEach(function(ke){var Ie="";["width","height","top","right","bottom","left"].indexOf(ke)!==-1&&Vo(ye[ke])&&(Ie="px"),ee.style[ke]=ye[ke]+Ie})}function Lo(ee,ye){Object.keys(ye).forEach(function(ke){var Ie=ye[ke];Ie!==!1?ee.setAttribute(ke,ye[ke]):ee.removeAttribute(ke)})}function qu(ee){return Us(ee.instance.popper,ee.styles),Lo(ee.instance.popper,ee.attributes),ee.arrowElement&&Object.keys(ee.arrowStyles).length&&Us(ee.arrowElement,ee.arrowStyles),ee}function Vv(ee,ye,ke,Ie,qe){var je=ti(qe,ye,ee,ke.positionFixed),et=zn(ke.placement,je,ye,ee,ke.modifiers.flip.boundariesElement,ke.modifiers.flip.padding);return ye.setAttribute("x-placement",et),Us(ye,{position:ke.positionFixed?"fixed":"absolute"}),ke}function Zu(ee,ye){var ke=ee.offsets,Ie=ke.popper,qe=ke.reference,je=Math.round,et=Math.floor,st=function(la){return la},yt=je(qe.width),Xt=je(Ie.width),Ht=["left","right"].indexOf(ee.placement)!==-1,Lt=ee.placement.indexOf("-")!==-1,Gt=yt%2===Xt%2,Mn=yt%2===1&&Xt%2===1,En=ye?Ht||Lt||Gt?je:et:st,Zi=ye?je:st;return{left:En(Mn&&!Lt&&ye?Ie.left-1:Ie.left),top:Zi(Ie.top),bottom:Zi(Ie.bottom),right:En(Ie.right)}}var Lv=d&&/Firefox/i.test(navigator.userAgent);function Bv(ee,ye){var ke=ye.x,Ie=ye.y,qe=ee.offsets.popper,je=us(ee.instance.modifiers,function(vh){return vh.name==="applyStyle"}).gpuAcceleration;je!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var et=je!==void 0?je:ye.gpuAcceleration,st=Pe(ee.instance.popper),yt=Et(st),Xt={position:qe.position},Ht=Zu(ee,window.devicePixelRatio<2||!Lv),Lt=ke==="bottom"?"top":"bottom",Gt=Ie==="right"?"left":"right",Mn=Tn("transform"),En=void 0,Zi=void 0;if(Lt==="bottom"?st.nodeName==="HTML"?Zi=-st.clientHeight+Ht.bottom:Zi=-yt.height+Ht.bottom:Zi=Ht.top,Gt==="right"?st.nodeName==="HTML"?En=-st.clientWidth+Ht.right:En=-yt.width+Ht.right:En=Ht.left,et&&Mn)Xt[Mn]="translate3d("+En+"px, "+Zi+"px, 0)",Xt[Lt]=0,Xt[Gt]=0,Xt.willChange="transform";else{var la=Lt==="bottom"?-1:1,Ku=Gt==="right"?-1:1;Xt[Lt]=Zi*la,Xt[Gt]=En*Ku,Xt.willChange=Lt+", "+Gt}var co={"x-placement":ee.placement};return ee.attributes=At({},co,ee.attributes),ee.styles=At({},Xt,ee.styles),ee.arrowStyles=At({},ee.offsets.arrow,ee.arrowStyles),ee}function Rp(ee,ye,ke){var Ie=us(ee,function(st){var yt=st.name;return yt===ye}),qe=!!Ie&&ee.some(function(st){return st.name===ke&&st.enabled&&st.order<Ie.order});if(!qe){var je="`"+ye+"`",et="`"+ke+"`";console.warn(et+" modifier is required by "+je+" modifier in order to work, be sure to include it before "+je+"!")}return qe}function Ui(ee,ye){var ke;if(!Rp(ee.instance.modifiers,"arrow","keepTogether"))return ee;var Ie=ye.element;if(typeof Ie=="string"){if(Ie=ee.instance.popper.querySelector(Ie),!Ie)return ee}else if(!ee.instance.popper.contains(Ie))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),ee;var qe=ee.placement.split("-")[0],je=ee.offsets,et=je.popper,st=je.reference,yt=["left","right"].indexOf(qe)!==-1,Xt=yt?"height":"width",Ht=yt?"Top":"Left",Lt=Ht.toLowerCase(),Gt=yt?"left":"top",Mn=yt?"bottom":"right",En=Oi(Ie)[Xt];st[Mn]-En<et[Lt]&&(ee.offsets.popper[Lt]-=et[Lt]-(st[Mn]-En)),st[Lt]+En>et[Mn]&&(ee.offsets.popper[Lt]+=st[Lt]+En-et[Mn]),ee.offsets.popper=Wt(ee.offsets.popper);var Zi=st[Lt]+st[Xt]/2-En/2,la=z(ee.instance.popper),Ku=parseFloat(la["margin"+Ht]),co=parseFloat(la["border"+Ht+"Width"]),vh=Zi-ee.offsets.popper[Lt]-Ku-co;return vh=Math.max(Math.min(et[Xt]-En,vh),0),ee.arrowElement=Ie,ee.offsets.arrow=(ke={},xt(ke,Lt,Math.round(vh)),xt(ke,Gt,""),ke),ee}function Bo(ee){return ee==="end"?"start":ee==="start"?"end":ee}var Qa=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Uo=Qa.slice(3);function Uv(ee){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke=Uo.indexOf(ee),Ie=Uo.slice(ke+1).concat(Uo.slice(0,ke));return ye?Ie.reverse():Ie}var ql={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function Vw(ee,ye){if(qt(ee.instance.modifiers,"inner")||ee.flipped&&ee.placement===ee.originalPlacement)return ee;var ke=Kt(ee.instance.popper,ee.instance.reference,ye.padding,ye.boundariesElement,ee.positionFixed),Ie=ee.placement.split("-")[0],qe=ki(Ie),je=ee.placement.split("-")[1]||"",et=[];switch(ye.behavior){case ql.FLIP:et=[Ie,qe];break;case ql.CLOCKWISE:et=Uv(Ie);break;case ql.COUNTERCLOCKWISE:et=Uv(Ie,!0);break;default:et=ye.behavior}return et.forEach(function(st,yt){if(Ie!==st||et.length===yt+1)return ee;Ie=ee.placement.split("-")[0],qe=ki(Ie);var Xt=ee.offsets.popper,Ht=ee.offsets.reference,Lt=Math.floor,Gt=Ie==="left"&&Lt(Xt.right)>Lt(Ht.left)||Ie==="right"&&Lt(Xt.left)<Lt(Ht.right)||Ie==="top"&&Lt(Xt.bottom)>Lt(Ht.top)||Ie==="bottom"&&Lt(Xt.top)<Lt(Ht.bottom),Mn=Lt(Xt.left)<Lt(ke.left),En=Lt(Xt.right)>Lt(ke.right),Zi=Lt(Xt.top)<Lt(ke.top),la=Lt(Xt.bottom)>Lt(ke.bottom),Ku=Ie==="left"&&Mn||Ie==="right"&&En||Ie==="top"&&Zi||Ie==="bottom"&&la,co=["top","bottom"].indexOf(Ie)!==-1,vh=!!ye.flipVariations&&(co&&je==="start"&&Mn||co&&je==="end"&&En||!co&&je==="start"&&Zi||!co&&je==="end"&&la),wte=!!ye.flipVariationsByContent&&(co&&je==="start"&&En||co&&je==="end"&&Mn||!co&&je==="start"&&la||!co&&je==="end"&&Zi),NA=vh||wte;(Gt||Ku||NA)&&(ee.flipped=!0,(Gt||Ku)&&(Ie=et[yt+1]),NA&&(je=Bo(je)),ee.placement=Ie+(je?"-"+je:""),ee.offsets.popper=At({},ee.offsets.popper,mr(ee.instance.popper,ee.offsets.reference,ee.placement)),ee=$o(ee.instance.modifiers,ee,"flip"))}),ee}function Ip(ee){var ye=ee.offsets,ke=ye.popper,Ie=ye.reference,qe=ee.placement.split("-")[0],je=Math.floor,et=["top","bottom"].indexOf(qe)!==-1,st=et?"right":"bottom",yt=et?"left":"top",Xt=et?"width":"height";return ke[st]<je(Ie[yt])&&(ee.offsets.popper[yt]=je(Ie[yt])-ke[Xt]),ke[yt]>je(Ie[st])&&(ee.offsets.popper[yt]=je(Ie[st])),ee}function Lw(ee,ye,ke,Ie){var qe=ee.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),je=+qe[1],et=qe[2];if(!je)return ee;if(et.indexOf("%")===0){var st=void 0;switch(et){case"%p":st=ke;break;case"%":case"%r":default:st=Ie}var yt=Wt(st);return yt[ye]/100*je}else if(et==="vh"||et==="vw"){var Xt=void 0;return et==="vh"?Xt=Math.max(document.documentElement.clientHeight,window.innerHeight||0):Xt=Math.max(document.documentElement.clientWidth,window.innerWidth||0),Xt/100*je}else return je}function pte(ee,ye,ke,Ie){var qe=[0,0],je=["right","left"].indexOf(Ie)!==-1,et=ee.split(/(\+|\-)/).map(function(Ht){return Ht.trim()}),st=et.indexOf(us(et,function(Ht){return Ht.search(/,|\s/)!==-1}));et[st]&&et[st].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var yt=/\s*,\s*|\s+/,Xt=st!==-1?[et.slice(0,st).concat([et[st].split(yt)[0]]),[et[st].split(yt)[1]].concat(et.slice(st+1))]:[et];return Xt=Xt.map(function(Ht,Lt){var Gt=(Lt===1?!je:je)?"height":"width",Mn=!1;return Ht.reduce(function(En,Zi){return En[En.length-1]===""&&["+","-"].indexOf(Zi)!==-1?(En[En.length-1]=Zi,Mn=!0,En):Mn?(En[En.length-1]+=Zi,Mn=!1,En):En.concat(Zi)},[]).map(function(En){return Lw(En,Gt,ye,ke)})}),Xt.forEach(function(Ht,Lt){Ht.forEach(function(Gt,Mn){Vo(Gt)&&(qe[Lt]+=Gt*(Ht[Mn-1]==="-"?-1:1))})}),qe}function mte(ee,ye){var ke=ye.offset,Ie=ee.placement,qe=ee.offsets,je=qe.popper,et=qe.reference,st=Ie.split("-")[0],yt=void 0;return Vo(+ke)?yt=[+ke,0]:yt=pte(ke,je,et,st),st==="left"?(je.top+=yt[0],je.left-=yt[1]):st==="right"?(je.top+=yt[0],je.left+=yt[1]):st==="top"?(je.left+=yt[0],je.top-=yt[1]):st==="bottom"&&(je.left+=yt[0],je.top+=yt[1]),ee.popper=je,ee}function gte(ee,ye){var ke=ye.boundariesElement||Pe(ee.instance.popper);ee.instance.reference===ke&&(ke=Pe(ke));var Ie=Tn("transform"),qe=ee.instance.popper.style,je=qe.top,et=qe.left,st=qe[Ie];qe.top="",qe.left="",qe[Ie]="";var yt=Kt(ee.instance.popper,ee.instance.reference,ye.padding,ke,ee.positionFixed);qe.top=je,qe.left=et,qe[Ie]=st,ye.boundaries=yt;var Xt=ye.priority,Ht=ee.offsets.popper,Lt={primary:function(Gt){var Mn=Ht[Gt];return Ht[Gt]<yt[Gt]&&!ye.escapeWithReference&&(Mn=Math.max(Ht[Gt],yt[Gt])),xt({},Gt,Mn)},secondary:function(Gt){var Mn=Gt==="right"?"left":"top",En=Ht[Mn];return Ht[Gt]>yt[Gt]&&!ye.escapeWithReference&&(En=Math.min(Ht[Mn],yt[Gt]-(Gt==="right"?Ht.width:Ht.height))),xt({},Mn,En)}};return Xt.forEach(function(Gt){var Mn=["left","top"].indexOf(Gt)!==-1?"primary":"secondary";Ht=At({},Ht,Lt[Mn](Gt))}),ee.offsets.popper=Ht,ee}function vte(ee){var ye=ee.placement,ke=ye.split("-")[0],Ie=ye.split("-")[1];if(Ie){var qe=ee.offsets,je=qe.reference,et=qe.popper,st=["bottom","top"].indexOf(ke)!==-1,yt=st?"left":"top",Xt=st?"width":"height",Ht={start:xt({},yt,je[yt]),end:xt({},yt,je[yt]+je[Xt]-et[Xt])};ee.offsets.popper=At({},et,Ht[Ie])}return ee}function yte(ee){if(!Rp(ee.instance.modifiers,"hide","preventOverflow"))return ee;var ye=ee.offsets.reference,ke=us(ee.instance.modifiers,function(Ie){return Ie.name==="preventOverflow"}).boundaries;if(ye.bottom<ke.top||ye.left>ke.right||ye.top>ke.bottom||ye.right<ke.left){if(ee.hide===!0)return ee;ee.hide=!0,ee.attributes["x-out-of-boundaries"]=""}else{if(ee.hide===!1)return ee;ee.hide=!1,ee.attributes["x-out-of-boundaries"]=!1}return ee}function bte(ee){var ye=ee.placement,ke=ye.split("-")[0],Ie=ee.offsets,qe=Ie.popper,je=Ie.reference,et=["left","right"].indexOf(ke)!==-1,st=["top","left"].indexOf(ke)===-1;return qe[et?"left":"top"]=je[ke]-(st?qe[et?"width":"height"]:0),ee.placement=ki(ye),ee.offsets.popper=Wt(qe),ee}var Ote={shift:{order:100,enabled:!0,fn:vte},offset:{order:200,enabled:!0,fn:mte,offset:0},preventOverflow:{order:300,enabled:!0,fn:gte,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Ip},arrow:{order:500,enabled:!0,fn:Ui,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:Vw,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:bte},hide:{order:800,enabled:!0,fn:yte},computeStyle:{order:850,enabled:!0,fn:Bv,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:qu,onLoad:Vv,gpuAcceleration:void 0}},xte={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Ote},zv=function(){function ee(ye,ke){var Ie=this,qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Ft(this,ee),this.scheduleUpdate=function(){return requestAnimationFrame(Ie.update)},this.update=V(this.update.bind(this)),this.options=At({},ee.Defaults,qe),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=ye&&ye.jquery?ye[0]:ye,this.popper=ke&&ke.jquery?ke[0]:ke,this.options.modifiers={},Object.keys(At({},ee.Defaults.modifiers,qe.modifiers)).forEach(function(et){Ie.options.modifiers[et]=At({},ee.Defaults.modifiers[et]||{},qe.modifiers?qe.modifiers[et]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(et){return At({name:et},Ie.options.modifiers[et])}).sort(function(et,st){return et.order-st.order}),this.modifiers.forEach(function(et){et.enabled&&W(et.onLoad)&&et.onLoad(Ie.reference,Ie.popper,Ie.options,et,Ie.state)}),this.update();var je=this.options.eventsEnabled;je&&this.enableEventListeners(),this.state.eventsEnabled=je}return Mt(ee,[{key:"update",value:function(){return _t.call(this)}},{key:"destroy",value:function(){return cr.call(this)}},{key:"enableEventListeners",value:function(){return jr.call(this)}},{key:"disableEventListeners",value:function(){return ds.call(this)}}]),ee}();return zv.Utils=(typeof window<"u"?window:J).PopperUtils,zv.placements=Qa,zv.Defaults=xte,zv})})(ue);var de=ue.exports;let we=0,Te=0;function Xe(){we++}function Ve(){Te++}const ze={name:"Drop",emits:["mouseenter","mouseleave","click"],props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1},visible:{type:Boolean},classes:{type:Object,default:()=>{}},styles:{type:Object,default:()=>{}},transitionName:{type:String,default:"transition-drop"},boundariesElement:{default:"window"}},data(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{mergedStyle(){let o={};return this.width&&(o.minWidth=`${this.width}px`),this.transfer&&(o["z-index"]=1060+this.tIndex),Object.assign({},this.styles,o)},mergedClass(){return Object.assign({},this.classes,{[this.className]:this.className})}},methods:{update(){t.nextTick(()=>{this.popper?(this.popper.update(),this.popperStatus=!0):this.popper=new de(this.$parent.$refs.reference,this.$refs.drop,{eventsEnabled:this.eventsEnabled,placement:this.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:this.boundariesElement}},onCreate:()=>{this.resetTransformOrigin(),t.nextTick(this.popper.update())},onUpdate:()=>{this.resetTransformOrigin()}}),this.$parent.$options.name==="iSelect"&&(this.width=parseInt(R(this.$parent.$el,"width"))),this.tIndex=this.handleGetIndex()})},destroy(){this.popper&&setTimeout(()=>{this.popper&&!this.popperStatus&&(this.popper.popper.style.display="none",this.popper.destroy(),this.popper=null),this.popperStatus=!1},300)},resetTransformOrigin(){if(!this.popper)return;let o=this.popper.popper.getAttribute("x-placement"),c=o.split("-")[0],d=o.split("-")[1];o==="left"||o==="right"||(this.popper.popper.style.transformOrigin=c==="bottom"||c!=="top"&&d==="start"?"center top":"center bottom")},handleGetIndex(){return Xe(),we},handleMouseenter(o){this.$emit("mouseenter",o)},handleMouseleave(o){this.$emit("mouseleave",o)},handleOnUpdatePopper(){this.update()},handleOnDestroyPopper(){this.destroy()},handleClick(o){this.$emit("click",o)}},beforeUnmount(){this.popper&&(this.popper.destroy(),this.popper=null)}};function rt(o,c,d,C,b,m){return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!d.transfer},[t.createVNode(t.Transition,{name:d.transitionName},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",t.mergeProps({class:["ivu-select-dropdown",m.mergedClass],ref:"drop",style:m.mergedStyle},o.$attrs,{onMouseenter:c[0]||(c[0]=(...E)=>m.handleMouseenter&&m.handleMouseenter(...E)),onMouseleave:c[1]||(c[1]=(...E)=>m.handleMouseleave&&m.handleMouseleave(...E)),onClick:c[2]||(c[2]=t.withModifiers((...E)=>m.handleClick&&m.handleClick(...E),["stop"]))}),[t.renderSlot(o.$slots,"default")],16),[[t.vShow,d.visible]])]),_:3},8,["name"])],8,["disabled"])}var Ge=l(ze,[["render",rt]]);function it(o){r&&typeof window.viewuiplus<"u"&&("langs"in viewuiplus||(viewuiplus.langs={}),viewuiplus.langs[o.i.locale]=o)}const kt={i:{locale:"zh-CN",select:{placeholder:"请选择",noMatch:"无匹配数据",loading:"加载中"},table:{noDataText:"暂无数据",noFilteredDataText:"暂无筛选结果",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},datepicker:{selectDate:"选择日期",selectTime:"选择时间",startTime:"开始时间",endTime:"结束时间",clear:"清空",ok:"确定",datePanelLabel:"[yyyy年] [m月]",month:"月",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",year:"年",weekStartDay:"0",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{m1:"1月",m2:"2月",m3:"3月",m4:"4月",m5:"5月",m6:"6月",m7:"7月",m8:"8月",m9:"9月",m10:"10月",m11:"11月",m12:"12月"}},transfer:{titles:{source:"源列表",target:"目的列表"},filterPlaceholder:"请输入搜索内容",notFoundText:"列表为空"},modal:{okText:"确定",cancelText:"取消"},poptip:{okText:"确定",cancelText:"取消"},page:{prev:"上一页",next:"下一页",total:"共",item:"条",items:"条",prev5:"向前 5 页",next5:"向后 5 页",page:"条/页",goto:"跳至",p:"页"},rate:{star:"星",stars:"星"},time:{before:"前",after:"后",just:"刚刚",seconds:"秒",minutes:"分钟",hours:"小时",days:"天"},tree:{emptyText:"暂无数据"},image:{zoomIn:"放大",zoomOut:"缩小",rotateLeft:"左旋转",rotateRight:"右旋转",fail:"失败",preview:"预览"}}};it(kt);var Tt=function(o){return ut(o)&&!Ut(o)};function ut(o){return!!o&&typeof o=="object"}function Ut(o){var c=Object.prototype.toString.call(o);return c==="[object RegExp]"||c==="[object Date]"||Le(o)}var sn=typeof Symbol=="function"&&Symbol.for,_e=sn?Symbol.for("react.element"):60103;function Le(o){return o.$$typeof===_e}function me(o){return Array.isArray(o)?[]:{}}function Be(o,c){return c.clone!==!1&&c.isMergeableObject(o)?dt(me(o),o,c):o}function Fe(o,c,d){return o.concat(c).map(function(C){return Be(C,d)})}function tt(o,c,d){var C={};return d.isMergeableObject(o)&&Object.keys(o).forEach(function(b){C[b]=Be(o[b],d)}),Object.keys(c).forEach(function(b){!d.isMergeableObject(c[b])||!o[b]?C[b]=Be(c[b],d):C[b]=dt(o[b],c[b],d)}),C}function dt(o,c,d){d=d||{},d.arrayMerge=d.arrayMerge||Fe,d.isMergeableObject=d.isMergeableObject||Tt;var C=Array.isArray(c),b=Array.isArray(o),m=C===b;return m?C?d.arrayMerge(o,c,d):tt(o,c,d):Be(c,d)}dt.all=function(o,c){if(!Array.isArray(o))throw new Error("first argument should be an array");return o.reduce(function(d,C){return dt(d,C,c)},{})};var wn=dt;const _n=/(%|)\{([0-9a-zA-Z_]+)\}/g;function Rn(){function o(d,C){return Object.prototype.hasOwnProperty.call(d,C)}function c(d,...C){return C.length===1&&typeof C[0]=="object"&&(C=C[0]),(!C||!C.hasOwnProperty)&&(C={}),d===void 0?"":d.replace(_n,(b,m,E,V)=>{let W;return d[V-1]==="{"&&d[V+b.length]==="}"?E:(W=o(C,E)?C[E]:null,W??"")})}return c}const yi=Rn();let vn=kt;const or={zh:kt};let Si=null,qf={},ji=null,j0=function(){if(Reflect.has(this,"$t"))return this.$t(...arguments);if(ji&&ji.global)return ji.global.t(...arguments);if(ji&&ji.locale){if(!qf[ji.locale]||Si!=ji.locale){qf[ji.locale]=!0;let o=ji.getLocaleMessage(ji.locale)||{},c={};wn(c,or[ji.locale],o),vn=c,ji.setLocaleMessage(ji.locale,c),Si=ji.locale}return ji.hlang(...arguments)}};const ih=function(o,c){let d=j0.apply(this,arguments);if(d!=null)return d;const C=o.split(".");let b=vn;for(let m=0,E=C.length;m<E;m++){const V=C[m];if(d=b[V],m===E-1)return yi(d,c);if(!d)return"";b=d}return""};var Rl={use:function(o){vn=o||vn},t:ih,i18n:function(o){ji=o}},Qn={methods:{t(...o){return ih.apply(this,o)}}},Po={data(){return{globalConfig:{}}},created(){const o=t.getCurrentInstance();this.globalConfig=o.appContext.config.globalProperties.$VIEWUI}};const Il="ivu-select",_x={name:"iSelectHead",mixins:[Qn,Po],components:{Icon:S},emits:["on-input-focus","on-input-blur","on-keydown","on-enter","on-clear","on-query-change"],inject:["SelectInstance"],props:{disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},initialLabel:{type:[String,Number,Array]},values:{type:Array,default:()=>[]},clearable:{type:[Function,Boolean],default:!1},inputElementId:{type:String},placeholder:{type:String},queryProp:{type:String,default:""},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean},showCreateItem:{type:Boolean}},data(){return{prefixCls:Il,query:"",inputLength:20,remoteInitialLabel:this.initialLabel,preventRemoteCall:!1}},computed:{singleDisplayClasses(){const{filterable:o,multiple:c,showPlaceholder:d}=this;return[{[Il+"-head-with-prefix"]:this.showPrefix,[Il+"-placeholder"]:d&&!o,[Il+"-selected-value"]:!d&&!c&&!o}]},singleDisplayValue(){return this.multiple&&this.values.length>0||this.filterable?"":`${this.selectedSingle}`||this.localePlaceholder},showPlaceholder(){let o=!1;if(this.multiple)!this.values.length>0&&(o=!0);else{const c=this.values[0];(typeof c>"u"||String(c).trim()==="")&&(o=!this.remoteInitialLabel)}return o},resetSelect(){return!this.showPlaceholder&&this.clearable},inputStyle(){let o={};return this.multiple&&(this.showPlaceholder?o.width="100%":o.width=`${this.inputLength}px`),o},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},selectedSingle(){const o=this.values[0];return o?o.label:this.remoteInitialLabel||""},selectedMultiple(){return(this.multiple?this.values:[]).filter((o,c)=>this.maxTagCount===void 0||c<this.maxTagCount)},headCls(){return{[`${Il}-head-flex`]:this.filterable&&this.showPrefix}},arrowType(){const o=this.globalConfig;let c="ios-arrow-down";return o&&(o.select.customArrow?c="":o.select.arrow&&(c=o.select.arrow)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.select.customArrow&&(c=o.select.customArrow),c},showPrefix(){const o=this.$slots.prefix&&this.$slots.prefix();let c=!1;return o&&(c=o[0].children.length>0),c||this.prefix},arrowSize(){const o=this.globalConfig;let c="";return o&&o.select.arrowSize&&(c=o.select.arrowSize),c}},methods:{onInputFocus(){this.$emit("on-input-focus")},onInputBlur(){this.showCreateItem||(this.values.length||(this.query=""),this.$emit("on-input-blur"))},removeTag(o){if(this.disabled)return!1;this.SelectInstance.handleOnSelectSelected(o)},resetInputState(){this.inputLength=this.$refs.input.value.length*12+20,this.$emit("on-keydown")},handleInputDelete(o){const c=o.target.value;this.multiple&&this.selectedMultiple.length&&this.query===""&&c===""&&this.removeTag(this.selectedMultiple[this.selectedMultiple.length-1])},handleInputEnter(o){this.$emit("on-enter"),this.showCreateItem&&o.stopPropagation()},onHeaderClick(o){this.filterable&&o.target===this.$el&&this.$refs.input.focus()},onClear(){this.$emit("on-clear")}},watch:{values([o]){if(this.filterable){if(this.preventRemoteCall=!0,this.multiple){this.query="",this.preventRemoteCall=!1;return}typeof o>"u"||o===""||o===null?this.query="":this.query=o.label,t.nextTick(()=>this.preventRemoteCall=!1)}},query(o){if(this.preventRemoteCall){this.preventRemoteCall=!1;return}this.$emit("on-query-change",o)},queryProp(o){o!==this.query&&(this.query=o)}}},Sx={key:1,class:"ivu-tag ivu-tag-checked"},Cx={class:"ivu-tag-text ivu-select-max-tag"},oe=["id","disabled","placeholder"];function Ee(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{onClick:c[6]||(c[6]=(...V)=>m.onHeaderClick&&m.onHeaderClick(...V)),class:t.normalizeClass(m.headCls)},[m.showPrefix?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([b.prefixCls+"-prefix"])},[t.renderSlot(o.$slots,"prefix",{},()=>[d.prefix?(t.openBlock(),t.createBlock(E,{key:0,type:d.prefix},null,8,["type"])):t.createCommentVNode("",!0)])],2)):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.selectedMultiple,(V,W)=>(t.openBlock(),t.createElementBlock("div",{class:"ivu-tag ivu-tag-checked",key:W},[t.createElementVNode("span",{class:t.normalizeClass(["ivu-tag-text",{"ivu-select-multiple-tag-hidden":V.disabled}])},t.toDisplayString(V.tag!==void 0?V.tag:V.label),3),V.disabled?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(E,{key:0,type:"ios-close",onClick:t.withModifiers(z=>m.removeTag(V),["stop"])},null,8,["onClick"]))]))),128)),d.maxTagCount!==void 0&&d.values.length>d.maxTagCount?(t.openBlock(),t.createElementBlock("div",Sx,[t.createElementVNode("span",Cx,[d.maxTagPlaceholder?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(d.maxTagPlaceholder(d.values.length-d.maxTagCount)),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode("+ "+t.toDisplayString(d.values.length-d.maxTagCount)+"...",1)],64))])])):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("span",{class:t.normalizeClass(m.singleDisplayClasses)},t.toDisplayString(m.singleDisplayValue),3),[[t.vShow,m.singleDisplayValue]]),d.filterable?t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:2,id:d.inputElementId,type:"text","onUpdate:modelValue":c[0]||(c[0]=V=>b.query=V),disabled:d.disabled,class:t.normalizeClass([b.prefixCls+"-input"]),placeholder:m.showPlaceholder?m.localePlaceholder:"",style:t.normalizeStyle(m.inputStyle),autocomplete:"off",spellcheck:"false",onKeydown:[c[1]||(c[1]=(...V)=>m.resetInputState&&m.resetInputState(...V)),c[2]||(c[2]=t.withKeys((...V)=>m.handleInputDelete&&m.handleInputDelete(...V),["delete"])),c[3]||(c[3]=t.withKeys((...V)=>m.handleInputEnter&&m.handleInputEnter(...V),["enter"]))],onFocus:c[4]||(c[4]=(...V)=>m.onInputFocus&&m.onInputFocus(...V)),onBlur:c[5]||(c[5]=(...V)=>m.onInputBlur&&m.onInputBlur(...V)),ref:"input"},null,46,oe)),[[t.vModelText,b.query]]):t.createCommentVNode("",!0),m.resetSelect?(t.openBlock(),t.createBlock(E,{key:3,type:"ios-close-circle",class:t.normalizeClass([b.prefixCls+"-arrow"]),onClick:t.withModifiers(m.onClear,["stop"])},null,8,["class","onClick"])):t.createCommentVNode("",!0),!m.resetSelect&&!d.remote?(t.openBlock(),t.createBlock(E,{key:4,type:m.arrowType,custom:m.customArrowType,size:m.arrowSize,class:t.normalizeClass([b.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])):t.createCommentVNode("",!0)],2)}var Ue=l(_x,[["render",Ee]]);const $e="click",Ne=Object.create(null),ft=Object.create(null),Dt=[Ne,ft],Vt=function(o,c,d){const{target:C}=d,b=function(E){const{el:V}=E;if(V!==C&&!V.contains(C)){const{binding:W}=E;W.modifiers.stop&&d.stopPropagation(),W.modifiers.prevent&&d.preventDefault(),W.value.call(o,d)}},m=function(E){return c[E].forEach(b)};Object.keys(c).forEach(m)},Qt=function(o){Vt(this,Ne,o)},tn=function(o){Vt(this,ft,o)},ln=function(o){return o?Qt:tn},hn=Object.defineProperties({},{$_captureInstances:{value:Ne},$_nonCaptureInstances:{value:ft},$_onCaptureEvent:{value:Qt},$_onNonCaptureEvent:{value:tn},beforeMount:{value:function(o,c){if(typeof c.value!="function")throw new TypeError("Binding value must be a function.");let d;const C=c.modifiers;C.click?d="click":C.mousedown?d="mousedown":C.touchstart?d="touchstart":d=$e;const b=c.arg,m={...c,modifiers:{capture:!1,prevent:!1,stop:!1,...c.modifiers}},E=b?Ne:ft;Array.isArray(E[d])||(E[d]=[]),E[d].push({el:o,binding:m})===1&&typeof document=="object"&&document&&document.addEventListener(d,ln(b),b)}},unmounted:{value:function(o){const c=function(C){return C.el!==o},d=function(C){const b=Object.keys(C);if(b.length){const m=C===Ne,E=function(V){const W=C[V].filter(c);W.length?C[V]=W:(typeof document=="object"&&document&&document.removeEventListener(V,ln(m),m),delete C[V])};b.forEach(E)}};Dt.forEach(d)}},version:{enumerable:!0,value:"3.7.1"}});var un={inject:{FormInstance:{default:""},FormItemInstance:{default:null}},computed:{itemDisabled(){let o=this.disabled;return!o&&this.FormInstance&&(o=this.FormInstance.disabled),o?!0:null}},methods:{handleFormItemChange(o,c){this.FormItemInstance&&(o==="blur"?this.FormItemInstance.formBlur(c):o==="change"&&this.FormItemInstance.formChange(c))}}};const Zn="ivu-select",Xr=(o,c,d)=>{const C=JSON.stringify(o),b=JSON.stringify(c),m=JSON.stringify(d.map(E=>E.value));return C!==b||C!==m||m!==b},so=300,Vn={name:"iSelect",mixins:[Qn,un],components:{Drop:Ge,SelectHead:Ue,Icon:S},directives:{clickOutside:hn},emits:["on-set-default-options","on-clear","on-clickoutside","on-select","on-create","on-change","on-query-change","on-open-change","update:modelValue"],provide(){return{SelectInstance:this}},props:{modelValue:{type:[String,Number,Array],default:""},label:{type:[String,Number,Array],default:""},defaultLabel:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},filterable:{type:Boolean,default:!1},filterMethod:{type:Function},remoteMethod:{type:Function},loading:{type:Boolean,default:!1},loadingText:{type:String},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},labelInValue:{type:Boolean,default:!1},notFoundText:{type:String},placement:{validator(o){return _(o,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},autoComplete:{type:Boolean,default:!1},name:{type:String},elementId:{type:String},transferClassName:{type:String},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean,default:!1},capture:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return o.$VIEWUI?o.$VIEWUI.capture:!0}},filterByLabel:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1},hideNotFound:{type:Boolean,default:!1}},mounted(){if(!this.remote&&this.slotOptions.length>0&&(this.values=this.getInitialValue().map(o=>typeof o!="number"&&!o?null:this.getOptionData(o)).filter(Boolean)),this.checkUpdateStatus(),this.remote&&this.modelValue&&this.defaultLabel){if(!this.multiple)this.query=this.defaultLabel,this.modelValue&&this.defaultLabel&&this.values.push({label:this.defaultLabel,value:this.modelValue});else if(this.multiple&&this.defaultLabel instanceof Array&&this.modelValue.length===this.defaultLabel.length){const o=this.modelValue.map((c,d)=>({value:c,label:this.defaultLabel[d]}));setTimeout(()=>{this.values=o})}}},data(){return{prefixCls:Zn,values:[],dropDownWidth:0,visible:!1,focusIndex:-1,isFocused:!1,query:"",initialLabel:this.label,hasMouseHoverHead:!1,slotOptions:[],caretPosition:-1,lastRemoteQuery:"",unchangedQuery:!0,hasExpectedValue:!1,isTyping:!1,preventRemoteCall:!1,filterQueryChange:!1,slotOptionsMap:new Map,isLocking:!1}},computed:{classes(){return[`${Zn}`,{[`${Zn}-visible`]:this.visible,[`${Zn}-disabled`]:this.itemDisabled,[`${Zn}-multiple`]:this.multiple,[`${Zn}-single`]:!this.multiple,[`${Zn}-${this.size}`]:!!this.size}]},dropdownCls(){return{[Zn+"-dropdown-transfer"]:this.transfer,[Zn+"-multiple"]:this.multiple&&this.transfer,"ivu-auto-complete":this.autoComplete,[this.transferClassName]:this.transferClassName}},selectionCls(){return{[`${Zn}-selection`]:!this.autoComplete,[`${Zn}-selection-focused`]:this.isFocused}},localeNotFoundText(){return typeof this.notFoundText>"u"?this.t("i.select.noMatch"):this.notFoundText},localeLoadingText(){return typeof this.loadingText>"u"?this.t("i.select.loading"):this.loadingText},showCreateItem(){let o=!1;const{allowCreate:c,query:d,slotOptions:C}=this;return c&&d!==""&&(o=!0,(C||[]).find(b=>b.proxy&&b.proxy.showLabel===d)&&(o=!1)),o},transitionName(){return this.placement==="bottom"?"slide-up":"slide-down"},dropVisible(){let o=!0;const c=this.slotOptions.length===0;return!this.loading&&this.remote&&this.query===""&&c&&(o=!1),this.autoComplete&&c&&(o=!1),this.visible&&o},showNotFoundLabel(){const{loading:o,remote:c,slotOptions:d,hideNotFound:C}=this,b=d||[],m=b.find(E=>E.proxy.isShow);return(b.length===0||!m)&&(!c||c&&!o)&&!C},publicValue(){return this.multiple?this.values.map(o=>o.value):(this.values[0]||{}).value},canBeCleared(){const o=this.hasMouseHoverHead,c=!this.multiple&&!this.itemDisabled&&this.clearable;return o&&c&&this.reset},selectTabindex(){return this.itemDisabled||this.filterable?-1:0},remote(){return typeof this.remoteMethod=="function"}},methods:{setQuery(o){if(o){this.onQueryChange(o);return}o===null&&(this.onQueryChange(""),this.values=[],this.lastRemoteQuery="")},clearSingleSelect(){this.multiple||this.$emit("update:modelValue",""),this.$emit("on-clear"),this.hideMenu(),this.clearable&&this.reset()},getOptionData(o){const c=this.slotOptions.find(({props:b})=>b.value===o);if(!c)return null;const{optionLabel:d,disabled:C}=c.proxy||{};return{value:o,label:d,disabled:C}},getInitialValue(){const{multiple:o,remote:c,modelValue:d}=this;let C=Array.isArray(d)?d:[d];if(!o&&(typeof C[0]>"u"||String(C[0]).trim()===""&&!Number.isFinite(C[0]))&&(C=[]),c&&!o&&d){const b=this.getOptionData(d);this.query=b?b.label:String(d)}return C.filter(b=>!!b||b===0)},validateOption({children:o,elm:c,propsData:d}){const C=d.value,b=d.label||"",m=c&&c.textContent||(o||[]).reduce((W,z)=>{const G=z.elm?z.elm.textContent:z.text;return`${W} ${G}`},"")||"",E=this.filterByLabel?[b].toString():[C,b,m].toString(),V=this.query.toLowerCase().trim();return E.toLowerCase().includes(V)},toggleMenu(o,c){if(this.itemDisabled)return!1;this.visible=typeof c<"u"?c:!this.visible,this.visible&&(this.dropDownWidth=this.$el.getBoundingClientRect().width,this.$refs.dropdown.handleOnUpdatePopper())},hideMenu(){this.toggleMenu(null,!1),this.isTyping=!1,setTimeout(()=>this.unchangedQuery=!0,so)},onClickOutside(o){if(this.visible){if(o.type==="mousedown"){o.preventDefault();return}if(this.transfer){const c=this.$refs.dropdown.$refs.drop;if(c===o.target||c.contains(o.target))return}if(this.filterable){const c=this.$el.querySelector('input[type="text"]');this.caretPosition=c.selectionStart,t.nextTick(()=>{const d=this.caretPosition===-1?c.value.length:this.caretPosition;c.setSelectionRange(d,d)})}this.autoComplete||o.stopPropagation(),o.preventDefault(),this.hideMenu(),this.isFocused=!0,this.$emit("on-clickoutside",o)}else this.caretPosition=-1,this.isFocused=!1},reset(){this.query="",this.focusIndex=-1,this.unchangedQuery=!0,this.values=[],this.filterQueryChange=!1},handleKeydown(o){const c=o.key||o.code,d=o.keyCode||o.which;if(!(c==="Backspace"||d===8))if(this.visible){if(o.preventDefault(),c==="Tab"&&o.stopPropagation(),c==="Escape"&&(o.stopPropagation(),this.hideMenu()),c==="ArrowUp"&&this.navigateOptions(-1),c==="ArrowDown"&&this.navigateOptions(1),c==="Enter"){if(this.focusIndex===-1)return this.hideMenu();const C=this.slotOptions[this.focusIndex];if(C){const b=this.getOptionData(C.props.value);this.onOptionClick(b)}else this.hideMenu()}}else["ArrowUp","ArrowDown"].includes(o.key)&&this.toggleMenu(null,!0)},navigateOptions(o){const c=this.slotOptions,d=c.length-1;if(d<0)return;let C=this.focusIndex+o;C<0&&(C=d),C>d&&(C=0);let b,m=null;if(o>0){b=-1;for(let E=0;E<c.length;E++){const{proxy:V}=c[E];if(!V.disabled&&(b=E),V.isShow&&m===null)m=E;else if(!V.isShow){b=E;continue}if(b>=C)break}}else{b=c.length;for(let E=d;E>=0;E--){const{proxy:V}=c[E];if(!V.disabled&&(b=E),V.isShow&&m===null)m=E;else if(!V.isShow){b=E;continue}if(b<=C)break}}C=c[b].proxy.isShow?b:m,this.focusIndex=C},onOptionClick(o){if(this.multiple?(this.remote?this.lastRemoteQuery=this.lastRemoteQuery||this.query:this.lastRemoteQuery="",this.values.find(({value:c})=>c===o.value)?this.values=this.values.filter(({value:c})=>c!==o.value):this.values=this.values.concat(o),this.isFocused=!0):(this.query=String(o.label).trim(),this.values=[o],this.lastRemoteQuery="",this.hideMenu()),this.focusIndex=this.slotOptions.findIndex(c=>c?c.props.value===o.value:!1),this.filterable){const c=this.$el.querySelector('input[type="text"]');this.autoComplete||t.nextTick(()=>c.focus())}this.$emit("on-select",o),this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.filterQueryChange=!1},so)},onQueryChange(o){if(this.isTyping=!0,o.length>0&&o!==this.query)if(r&&this.autoComplete){let c=document.hasFocus&&document.hasFocus()&&document.activeElement===this.$el.querySelector("input");this.visible=c}else this.visible=!0;this.query=o,this.unchangedQuery=this.visible,this.filterQueryChange=!0},toggleHeaderFocus({type:o}){this.itemDisabled||(this.isFocused=o==="focus")},checkUpdateStatus(){this.getInitialValue().length>0&&this.slotOptions.length===0&&(this.hasExpectedValue=!0)},handleCreateItem(){if(this.allowCreate&&this.query!==""&&this.showCreateItem){const o=this.query;this.$emit("on-create",o),this.query="";const c={value:o,label:o,tag:void 0};this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.onOptionClick(c)})}},handleOnSelectSelected(o){this.onOptionClick(o)},focus(){this.filterable&&(this.$refs.selectHead.$refs.input.focus(),this.toggleMenu())},lazyUpdateValue(o){const{getInitialValue:c,isLocking:d,defaultLabel:C,remote:b,modelValue:m,values:E}=this,V=!!(C&&C.length);(m&&m.length||E.length||V)&&b&&o||d||(this.isLocking=!0,t.nextTick(()=>{this.values=c().map(this.getOptionData).filter(Boolean),this.isLocking=!1}))}},watch:{modelValue(o){const{publicValue:c,values:d}=this;this.checkUpdateStatus(),o===""?(this.values=[],this.query=""):Xr(o,c,d)&&(this.lazyUpdateValue(),this.multiple||this.handleFormItemChange("change",this.publicValue))},values(o,c){const d=JSON.stringify(o),C=JSON.stringify(c);let b=this.publicValue;if(d!==C&&b!==this.modelValue){let m=this.publicValue;this.labelInValue&&(this.multiple?m=this.values:m=this.values[0]),(Array.isArray(b)&&!b.length&&this.modelValue===null||b===void 0&&this.modelValue===null)&&(b=null),this.$emit("update:modelValue",b),this.$emit("on-change",m),this.handleFormItemChange("change",m)}},query(o){this.focusIndex=-1,this.$emit("on-query-change",o);const{remoteMethod:c,lastRemoteQuery:d}=this,C=c&&o!==""&&(o!==d||!d)&&!this.preventRemoteCall;if(this.preventRemoteCall=!1,C){const b=this.remoteMethod(o);this.initialLabel="",b&&b.then&&b.then(m=>{m&&(this.options=m)})}this.visible&&this.$refs.dropdown.handleOnUpdatePopper(),o!==""&&this.remote&&(this.lastRemoteQuery=o)},isFocused(o){(this.filterable?this.$el.querySelector('input[type="text"]'):this.$el)[this.isFocused?"focus":"blur"]();const[c]=this.values;if(c&&this.filterable&&!this.multiple&&!o){const d=String(c.label||c.value).trim();d&&this.query!==d&&(this.preventRemoteCall=!0,this.query=d)}},focusIndex(o){if(!(o<0||this.autoComplete)&&this.slotOptions[o]){const c=this.slotOptions[o].proxy.$el,d=this.$refs.dropdown.$refs.drop;let C=c.getBoundingClientRect().bottom-d.getBoundingClientRect().bottom,b=c.getBoundingClientRect().top-d.getBoundingClientRect().top;C>0&&(d.scrollTop+=C),b<0&&(d.scrollTop+=b)}},dropVisible(o){o?this.$refs.dropdown.handleOnUpdatePopper():this.$refs.dropdown.handleOnDestroyPopper()},visible(o){this.$emit("on-open-change",o)}}},on=["tabindex"],rh=["name","value"];function ri(o,c,d,C,b,m){const E=t.resolveComponent("select-head"),V=t.resolveComponent("Icon"),W=t.resolveComponent("Drop"),z=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass(m.selectionCls),tabindex:m.selectTabindex,onBlur:c[2]||(c[2]=(...G)=>m.toggleHeaderFocus&&m.toggleHeaderFocus(...G)),onFocus:c[3]||(c[3]=(...G)=>m.toggleHeaderFocus&&m.toggleHeaderFocus(...G)),onClick:c[4]||(c[4]=(...G)=>m.toggleMenu&&m.toggleMenu(...G)),onKeydown:[c[5]||(c[5]=t.withKeys((...G)=>m.handleKeydown&&m.handleKeydown(...G),["esc"])),c[6]||(c[6]=t.withKeys((...G)=>m.handleKeydown&&m.handleKeydown(...G),["enter"])),c[7]||(c[7]=t.withKeys(t.withModifiers((...G)=>m.handleKeydown&&m.handleKeydown(...G),["prevent"]),["up"])),c[8]||(c[8]=t.withKeys(t.withModifiers((...G)=>m.handleKeydown&&m.handleKeydown(...G),["prevent"]),["down"])),c[9]||(c[9]=t.withKeys((...G)=>m.handleKeydown&&m.handleKeydown(...G),["tab"])),c[10]||(c[10]=t.withKeys((...G)=>m.handleKeydown&&m.handleKeydown(...G),["delete"]))],onMouseenter:c[11]||(c[11]=G=>b.hasMouseHoverHead=!0),onMouseleave:c[12]||(c[12]=G=>b.hasMouseHoverHead=!1)},[t.renderSlot(o.$slots,"input",{},()=>[t.createElementVNode("input",{type:"hidden",name:d.name,value:m.publicValue},null,8,rh),t.createVNode(E,{ref:"selectHead",filterable:d.filterable,multiple:d.multiple,values:b.values,clearable:m.canBeCleared,prefix:d.prefix,disabled:o.itemDisabled,remote:m.remote,"input-element-id":d.elementId,"initial-label":b.initialLabel,placeholder:d.placeholder,"query-prop":b.query,"max-tag-count":d.maxTagCount,"max-tag-placeholder":d.maxTagPlaceholder,"allow-create":d.allowCreate,"show-create-item":m.showCreateItem,onOnQueryChange:m.onQueryChange,onOnInputFocus:c[0]||(c[0]=G=>b.isFocused=!0),onOnInputBlur:c[1]||(c[1]=G=>b.isFocused=!1),onOnClear:m.clearSingleSelect,onOnEnter:m.handleCreateItem},{prefix:t.withCtx(()=>[t.renderSlot(o.$slots,"prefix")]),_:3},8,["filterable","multiple","values","clearable","prefix","disabled","remote","input-element-id","initial-label","placeholder","query-prop","max-tag-count","max-tag-placeholder","allow-create","show-create-item","onOnQueryChange","onOnClear","onOnEnter"])])],42,on),t.createVNode(W,{ref:"dropdown",classes:m.dropdownCls,visible:m.dropVisible,placement:d.placement,eventsEnabled:d.eventsEnabled,transfer:d.transfer,"transition-name":"transition-drop"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls+"-not-found"])},[t.createElementVNode("li",null,t.toDisplayString(m.localeNotFoundText),1)],2),[[t.vShow,m.showNotFoundLabel&&!d.allowCreate]]),!m.remote||m.remote&&!d.loading?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass(b.prefixCls+"-dropdown-list")},[m.showCreateItem?(t.openBlock(),t.createElementBlock("li",{key:0,class:t.normalizeClass(b.prefixCls+"-item"),onClick:c[13]||(c[13]=(...G)=>m.handleCreateItem&&m.handleCreateItem(...G))},[t.createTextVNode(t.toDisplayString(b.query)+" ",1),t.createVNode(V,{type:"md-return-left",class:t.normalizeClass(b.prefixCls+"-item-enter")},null,8,["class"])],2)):t.createCommentVNode("",!0),t.renderSlot(o.$slots,"default")],2)):(t.openBlock(),t.createElementBlock("ul",{key:1,class:t.normalizeClass(b.prefixCls+"-dropdown-list")},[m.showCreateItem?(t.openBlock(),t.createElementBlock("li",{key:0,class:t.normalizeClass(b.prefixCls+"-item"),onClick:c[14]||(c[14]=(...G)=>m.handleCreateItem&&m.handleCreateItem(...G))},[t.createTextVNode(t.toDisplayString(b.query)+" ",1),t.createVNode(V,{type:"md-return-left",class:t.normalizeClass(b.prefixCls+"-item-enter")},null,8,["class"])],2)):t.createCommentVNode("",!0)],2)),t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls+"-loading"])},t.toDisplayString(m.localeLoadingText),3),[[t.vShow,d.loading]])]),_:3},8,["classes","visible","placement","eventsEnabled","transfer"])],2)),[[z,m.onClickOutside,d.capture],[z,m.onClickOutside,d.capture,{mousedown:!0}],[z,m.onClickOutside,d.capture,{touchstart:!0}]])}var Wr=l(Vn,[["render",ri]]);const sh="ivu-select-item",oh={name:"iOption",componentName:"select-item",mixins:[un],emits:["on-select-selected"],inject:{SelectInstance:{default:null},OptionGroupInstance:{default:null}},props:{value:{type:[String,Number],required:!0},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},tag:{type:[String,Number]}},data(){return{searchLabel:"",autoComplete:!1,id:te(6),instance:null}},computed:{classes(){return[`${sh}`,{[`${sh}-disabled`]:this.itemDisabled,[`${sh}-selected`]:this.selected&&!this.autoComplete,[`${sh}-focus`]:this.isFocused}]},showLabel(){return this.label?this.label:this.value},optionLabel(){return this.label||this.$el&&this.$el.textContent},isFocused(){const o=this.SelectInstance;let c=o.slotOptions||[];const d=o.focusIndex,C=o.$slots.default;if(this.autoComplete&&C){c=[];let m=C();for(;m.length>0;){const E=m.shift();E.type&&typeof E.type=="object"&&E.type.name==="iOption"?c.push(E):Array.isArray(E.children)&&(m=m.concat(E.children))}}const b=c[d];return b&&b.props&&b.props.value===this.value},isShow(){const o=this.SelectInstance,c=o.filterable,d=o.query.toLowerCase().trim(),C=o.filterByLabel,b=o.slotOptionsMap,{props:m}=b.get(this.value)||{props:{}},E=this.label||this.$el&&this.$el.textContent;let V=(E||m.value||"").toLowerCase();C&&(V=(E||"").toLowerCase());const W=V.includes(d);return!c||c&&(W||!o.filterQueryChange)||N(o.remoteMethod)==="function"},selected(){return(this.SelectInstance.values||[]).find(o=>o.value===this.value)}},methods:{select(){if(this.itemDisabled)return!1;this.SelectInstance.handleOnSelectSelected({value:this.value,label:this.optionLabel,tag:this.tag})},addOption(){const o=this.SelectInstance,c=this.OptionGroupInstance,{id:d,value:C,instance:b}=this;if(c&&c.optionList.push({...b,id:d,tag:"option"}),o){o.slotOptions.push({...b,id:d,tag:"option"}),o.slotOptionsMap.set(C,b);const{modelValue:m}=o;(m&&m.length||N(m)==="number")&&o.lazyUpdateValue(!0)}},removeOption(){const o=this.OptionGroupInstance,c=this.SelectInstance,{id:d,value:C}=this;if(o){const b=o.optionList.findIndex(m=>m.id===d);b!==-1&&o.optionList.splice(b,1)}if(c){const b=this.SelectInstance,m=b.slotOptions.findIndex(E=>E.id===d);m!==-1&&b.slotOptions.splice(m,1),b.slotOptionsMap.has(C)&&b.slotOptionsMap.delete(C)}}},created(){this.instance=t.getCurrentInstance()},mounted(){this.addOption();const o=$(this,"iSelect");o&&(this.autoComplete=o.autoComplete)},beforeUnmount(){t.nextTick(()=>{this.removeOption(),this.instance=null})}};function Zf(o,c,d,C,b,m){return t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.classes),onClick:c[0]||(c[0]=t.withModifiers((...E)=>m.select&&m.select(...E),["stop"])),onMousedown:c[1]||(c[1]=t.withModifiers(()=>{},["prevent"]))},[t.renderSlot(o.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(m.showLabel),1)])],34)),[[t.vShow,m.isShow]])}var Ci=l(oh,[["render",Zf]]);const ta=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,Kf=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let Tr={},cs;function kx(o,c=!1){if(!r)return;const d=o.getAttribute("id")||o.getAttribute("data-reactid")||o.getAttribute("name");if(c&&Tr[d])return Tr[d];const C=window.getComputedStyle(o),b=C.getPropertyValue("box-sizing")||C.getPropertyValue("-moz-box-sizing")||C.getPropertyValue("-webkit-box-sizing"),m=parseFloat(C.getPropertyValue("padding-bottom"))+parseFloat(C.getPropertyValue("padding-top")),E=parseFloat(C.getPropertyValue("border-bottom-width"))+parseFloat(C.getPropertyValue("border-top-width")),V={sizingStyle:Kf.map(W=>`${W}:${C.getPropertyValue(W)}`).join(";"),paddingSize:m,borderSize:E,boxSizing:b};return c&&d&&(Tr[d]=V),V}function q0(o,c=null,d=null,C=!1){r&&!cs&&(cs=document.createElement("textarea"),document.body.appendChild(cs)),o.getAttribute("wrap")?cs.setAttribute("wrap",o.getAttribute("wrap")):cs.removeAttribute("wrap");let{paddingSize:b,borderSize:m,boxSizing:E,sizingStyle:V}=kx(o,C);cs.setAttribute("style",`${V};${ta}`),cs.value=o.value||o.placeholder||"";let W=Number.MIN_SAFE_INTEGER,z=Number.MAX_SAFE_INTEGER,G=cs.scrollHeight,ae;if(E==="border-box"?G=G+m:E==="content-box"&&(G=G-b),c!==null||d!==null){cs.value=" ";let xe=cs.scrollHeight-b;c!==null&&(W=xe*c,E==="border-box"&&(W=W+b+m),G=Math.max(W,G)),d!==null&&(z=xe*d,E==="border-box"&&(z=z+b+m),ae=G>z?"":"hidden",G=Math.min(z,G))}return d||(ae="hidden"),{height:`${G}px`,minHeight:`${W}px`,maxHeight:`${z}px`,overflowY:ae}}const Bi="ivu-input",t7={name:"Input",mixins:[un],emits:["on-enter","on-search","on-keydown","on-keypress","on-keyup","on-click","on-focus","on-blur","on-change","on-input-change","on-clear","update:modelValue"],props:{type:{validator(o){return _(o,["text","textarea","password","url","email","date","number","tel"])},default:"text"},modelValue:{type:[String,Number],default:""},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator(o){return _(o,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{currentValue:this.modelValue,prefixCls:Bi,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType(){let o=this.type;return o==="password"&&this.password&&this.showPassword&&(o="text"),o},prepend(){let o=!1;return this.type!=="textarea"&&(o=this.$slots.prepend!==void 0),o},append(){let o=!1;return this.type!=="textarea"&&(o=this.$slots.append!==void 0),o},showPrefix(){let o=!1;return this.type!=="textarea"&&(o=this.prefix!==""||this.$slots.prefix!==void 0),o},showSuffix(){let o=!1;return this.type!=="textarea"&&(o=this.suffix!==""||this.$slots.suffix!==void 0),o},wrapClasses(){return[`${Bi}-wrapper`,{[`${Bi}-wrapper-${this.size}`]:!!this.size,[`${Bi}-type-${this.type}`]:this.type,[`${Bi}-group`]:this.prepend||this.append||this.search&&this.enterButton,[`${Bi}-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,[`${Bi}-group-with-prepend`]:this.prepend,[`${Bi}-group-with-append`]:this.append||this.search&&this.enterButton,[`${Bi}-hide-icon`]:this.append,[`${Bi}-with-search`]:this.search&&this.enterButton,[`${Bi}-wrapper-disabled`]:this.itemDisabled}]},inputClasses(){return[`${Bi}`,{[`${Bi}-${this.size}`]:!!this.size,[`${Bi}-disabled`]:this.itemDisabled,[`${Bi}-no-border`]:!this.border,[`${Bi}-with-prefix`]:this.showPrefix,[`${Bi}-with-suffix`]:this.showSuffix||this.search&&this.enterButton===!1}]},textareaClasses(){return[`${Bi}`,{[`${Bi}-disabled`]:this.itemDisabled,[`${Bi}-no-border`]:!this.border}]},upperLimit(){return this.maxlength},textLength(){return typeof this.modelValue=="number"?String(this.modelValue).length:(this.modelValue||"").length},clearableStyles(){const o={};let c=this.clearableIconOffset;return c&&(o.transform=`translateX(-${c}px)`),o}},methods:{handleEnter(o){this.$emit("on-enter",o),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(o){this.$emit("on-keydown",o)},handleKeypress(o){this.$emit("on-keypress",o)},handleKeyup(o){this.$emit("on-keyup",o)},handleIconClick(o){this.$emit("on-click",o)},handleFocus(o){this.$emit("on-focus",o)},handleBlur(o){this.$emit("on-blur",o),$(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},handleComposition(o){o.type==="compositionstart"&&(this.isOnComposition=!0),o.type==="compositionend"&&(this.isOnComposition=!1,this.handleInput(o))},handleInput(o){if(this.isOnComposition)return;let c=o.target.value;this.number&&c!==""&&(c=Number.isNaN(Number(c))?c:Number(c)),this.$emit("update:modelValue",c),this.setCurrentValue(c),this.$emit("on-change",o)},handleChange(o){this.$emit("on-input-change",o)},setCurrentValue(o){o!==this.currentValue&&(t.nextTick(()=>{this.resizeTextarea()}),this.currentValue=o,$(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("change",o))},resizeTextarea(){const o=this.autosize;if(!o||this.type!=="textarea")return!1;const c=o.minRows,d=o.maxRows;this.textareaStyles=q0(this.$refs.textarea,c,d)},focus(o){const c=this.type==="textarea"?this.$refs.textarea:this.$refs.input;c.focus(o);const{cursor:d}=o||{};if(d){const C=c.value.length;switch(d){case"start":c.setSelectionRange(0,0);break;case"end":c.setSelectionRange(C,C);break;default:c.setSelectionRange(0,C)}}},blur(){this.type==="textarea"?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){const o={target:{value:""}};this.$emit("update:modelValue",""),this.setCurrentValue(""),this.$emit("on-change",o),this.$emit("on-clear")},handleSearch(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword(){if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();const o=this.currentValue.length;setTimeout(()=>{this.$refs.input.setSelectionRange(o,o)},0)},handleCalcIconOffset(){const o=this.$el.querySelectorAll(".ivu-input-group-append")[0];o?this.clearableIconOffset=o.offsetWidth:this.clearableIconOffset=0}},watch:{modelValue(o){this.setCurrentValue(o)},type(){t.nextTick(this.handleCalcIconOffset)}},mounted(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated(){t.nextTick(this.handleCalcIconOffset)}},n7={key:4,class:"ivu-input-suffix"},i7={key:5,class:"ivu-input-word-count"},r7={key:0,class:"ivu-icon ivu-icon-ios-eye-outline"},s7={key:1,class:"ivu-icon ivu-icon-ios-eye-off-outline"},o7=["id","autocomplete","spellcheck","type","placeholder","disabled","maxlength","readonly","name","value","number","autofocus"],a7={key:0,class:"ivu-icon ivu-icon-ios-search"},l7={key:9,class:"ivu-input-prefix"},c7=["id","wrap","autocomplete","spellcheck","placeholder","disabled","rows","maxlength","readonly","name","value","autofocus"],h7={key:0,class:"ivu-input-word-count"};function u7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[d.type!=="textarea"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[m.prepend?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-group-prepend"])},[t.renderSlot(o.$slots,"prepend")],2)),[[t.vShow,b.slotReady]]):t.createCommentVNode("",!0),d.clearable&&b.currentValue&&!o.itemDisabled?(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(["ivu-icon",["ivu-icon-ios-close-circle",b.prefixCls+"-icon",b.prefixCls+"-icon-clear",b.prefixCls+"-icon-normal"]]),onClick:c[0]||(c[0]=(...E)=>m.handleClear&&m.handleClear(...E)),style:t.normalizeStyle(m.clearableStyles)},null,6)):d.icon?(t.openBlock(),t.createElementBlock("i",{key:2,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+d.icon,b.prefixCls+"-icon",b.prefixCls+"-icon-normal"]]),onClick:c[1]||(c[1]=(...E)=>m.handleIconClick&&m.handleIconClick(...E))},null,2)):d.search&&d.enterButton===!1?(t.openBlock(),t.createElementBlock("i",{key:3,class:t.normalizeClass(["ivu-icon ivu-icon-ios-search",[b.prefixCls+"-icon",b.prefixCls+"-icon-normal",b.prefixCls+"-search-icon"]]),onClick:c[2]||(c[2]=(...E)=>m.handleSearch&&m.handleSearch(...E))},null,2)):m.showSuffix?(t.openBlock(),t.createElementBlock("span",n7,[t.renderSlot(o.$slots,"suffix",{},()=>[d.suffix?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+d.suffix]])},null,2)):t.createCommentVNode("",!0)])])):d.showWordLimit?(t.openBlock(),t.createElementBlock("span",i7,t.toDisplayString(m.textLength)+"/"+t.toDisplayString(m.upperLimit),1)):d.password?(t.openBlock(),t.createElementBlock("span",{key:6,class:"ivu-input-suffix",onClick:c[3]||(c[3]=(...E)=>m.handleToggleShowPassword&&m.handleToggleShowPassword(...E))},[b.showPassword?(t.openBlock(),t.createElementBlock("i",r7)):(t.openBlock(),t.createElementBlock("i",s7))])):t.createCommentVNode("",!0),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[d.icon?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon ivu-icon-ios-loading ivu-load-loop",[b.prefixCls+"-icon",b.prefixCls+"-icon-validate"]])},null,2))]),_:1}),t.createElementVNode("input",{id:d.elementId,autocomplete:d.autocomplete,spellcheck:d.spellcheck,ref:"input",type:m.currentType,class:t.normalizeClass(m.inputClasses),placeholder:d.placeholder,disabled:o.itemDisabled,maxlength:d.maxlength,readonly:d.readonly,name:d.name,value:b.currentValue,number:d.number,autofocus:d.autofocus,onKeyup:[c[4]||(c[4]=t.withKeys((...E)=>m.handleEnter&&m.handleEnter(...E),["enter"])),c[5]||(c[5]=(...E)=>m.handleKeyup&&m.handleKeyup(...E))],onKeypress:c[6]||(c[6]=(...E)=>m.handleKeypress&&m.handleKeypress(...E)),onKeydown:c[7]||(c[7]=(...E)=>m.handleKeydown&&m.handleKeydown(...E)),onFocus:c[8]||(c[8]=(...E)=>m.handleFocus&&m.handleFocus(...E)),onBlur:c[9]||(c[9]=(...E)=>m.handleBlur&&m.handleBlur(...E)),onCompositionstart:c[10]||(c[10]=(...E)=>m.handleComposition&&m.handleComposition(...E)),onCompositionupdate:c[11]||(c[11]=(...E)=>m.handleComposition&&m.handleComposition(...E)),onCompositionend:c[12]||(c[12]=(...E)=>m.handleComposition&&m.handleComposition(...E)),onInput:c[13]||(c[13]=(...E)=>m.handleInput&&m.handleInput(...E)),onChange:c[14]||(c[14]=(...E)=>m.handleChange&&m.handleChange(...E))},null,42,o7),m.append?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:7,class:t.normalizeClass([b.prefixCls+"-group-append"])},[t.renderSlot(o.$slots,"append")],2)),[[t.vShow,b.slotReady]]):d.search&&d.enterButton?(t.openBlock(),t.createElementBlock("div",{key:8,class:t.normalizeClass([b.prefixCls+"-group-append",b.prefixCls+"-search"]),onClick:c[15]||(c[15]=(...E)=>m.handleSearch&&m.handleSearch(...E))},[d.enterButton===!0?(t.openBlock(),t.createElementBlock("i",a7)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(d.enterButton),1)],64))],2)):m.showPrefix?(t.openBlock(),t.createElementBlock("span",l7,[t.renderSlot(o.$slots,"prefix",{},()=>[d.prefix?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+d.prefix]])},null,2)):t.createCommentVNode("",!0)])])):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("textarea",{id:d.elementId,wrap:d.wrap,autocomplete:d.autocomplete,spellcheck:d.spellcheck,ref:"textarea",class:t.normalizeClass(m.textareaClasses),style:t.normalizeStyle(b.textareaStyles),placeholder:d.placeholder,disabled:o.itemDisabled,rows:d.rows,maxlength:d.maxlength,readonly:d.readonly,name:d.name,value:b.currentValue,autofocus:d.autofocus,onKeyup:[c[16]||(c[16]=t.withKeys((...E)=>m.handleEnter&&m.handleEnter(...E),["enter"])),c[17]||(c[17]=(...E)=>m.handleKeyup&&m.handleKeyup(...E))],onKeypress:c[18]||(c[18]=(...E)=>m.handleKeypress&&m.handleKeypress(...E)),onKeydown:c[19]||(c[19]=(...E)=>m.handleKeydown&&m.handleKeydown(...E)),onFocus:c[20]||(c[20]=(...E)=>m.handleFocus&&m.handleFocus(...E)),onBlur:c[21]||(c[21]=(...E)=>m.handleBlur&&m.handleBlur(...E)),onCompositionstart:c[22]||(c[22]=(...E)=>m.handleComposition&&m.handleComposition(...E)),onCompositionupdate:c[23]||(c[23]=(...E)=>m.handleComposition&&m.handleComposition(...E)),onCompositionend:c[24]||(c[24]=(...E)=>m.handleComposition&&m.handleComposition(...E)),onInput:c[25]||(c[25]=(...E)=>m.handleInput&&m.handleInput(...E))},`
            `,46,c7),d.showWordLimit?(t.openBlock(),t.createElementBlock("span",h7,t.toDisplayString(m.textLength)+"/"+t.toDisplayString(m.upperLimit),1)):t.createCommentVNode("",!0)],64))],2)}var oo=l(t7,[["render",u7]]);const d7={name:"AutoComplete",mixins:[un],components:{iSelect:Wr,iOption:Ci,iInput:oo},emits:["update:modelValue","on-change","on-search","on-select","on-focus","on-blur","on-clear"],props:{modelValue:{type:[String,Number],default:""},label:{type:[String,Number],default:""},data:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},icon:{type:String},filterMethod:{type:[Function,Boolean],default:!1},placement:{validator(o){return _(o,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},transferClassName:{type:String},capture:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return o.$VIEWUI?o.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,disableEmitChange:!1}},computed:{inputIcon(){let o="";return this.clearable&&this.currentValue&&!this.disabled?o="ios-close-circle":this.icon&&(o=this.icon),o},filteredData(){return this.filterMethod?this.data.filter(o=>this.filterMethod(this.currentValue,o)):this.data}},watch:{modelValue(o){this.currentValue!==o&&(this.disableEmitChange=!0),this.currentValue=o},currentValue(o){if(this.$refs.select.setQuery(o),this.$emit("update:modelValue",o),this.disableEmitChange){this.disableEmitChange=!1;return}this.$emit("on-change",o),this.handleFormItemChange("change",o)}},methods:{remoteMethod(o){this.$emit("on-search",o)},handleSelect(o){const c=o.value;c!=null&&(this.currentValue=c,this.$refs.input.blur(),this.$emit("on-select",c))},handleFocus(o){this.$emit("on-focus",o)},handleBlur(o){this.$emit("on-blur",o)},handleClear(){!this.clearable||(this.currentValue="",this.$refs.select.reset(),this.$emit("on-clear"))},handleClickOutside(){t.nextTick(()=>{this.$refs.input.blur()})}}};function f7(o,c,d,C,b,m){const E=t.resolveComponent("i-input"),V=t.resolveComponent("i-option"),W=t.resolveComponent("i-select");return t.openBlock(),t.createBlock(W,{ref:"select",class:"ivu-auto-complete",label:d.label,disabled:o.itemDisabled,clearable:d.clearable,placeholder:d.placeholder,size:d.size,placement:d.placement,"model-value":b.currentValue,"transfer-class-name":d.transferClassName,filterable:"",remote:"","auto-complete":"","remote-method":m.remoteMethod,onOnSelect:m.handleSelect,onOnClickoutside:m.handleClickOutside,transfer:d.transfer,capture:d.capture,eventsEnabled:d.eventsEnabled},{input:t.withCtx(()=>[t.renderSlot(o.$slots,"input",{},()=>[t.createVNode(E,{"element-id":d.elementId,ref:"input",modelValue:b.currentValue,"onUpdate:modelValue":c[0]||(c[0]=z=>b.currentValue=z),name:d.name,placeholder:d.placeholder,disabled:o.itemDisabled,size:d.size,icon:m.inputIcon,onOnClick:m.handleClear,onOnFocus:m.handleFocus,onOnBlur:m.handleBlur},null,8,["element-id","modelValue","name","placeholder","disabled","size","icon","onOnClick","onOnFocus","onOnBlur"])])]),default:t.withCtx(()=>[t.renderSlot(o.$slots,"default",{},()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.filteredData,z=>(t.openBlock(),t.createBlock(V,{value:z,key:z},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(z),1)]),_:2},1032,["value"]))),128))])]),_:3},8,["label","disabled","clearable","placeholder","size","placement","model-value","transfer-class-name","remote-method","onOnSelect","onOnClickoutside","transfer","capture","eventsEnabled"])}var qM=l(d7,[["render",f7]]);const Iu="ivu-avatar",ZM=["small","large","default"],p7={name:"Avatar",components:{Icon:S},emits:["on-error"],props:{shape:{validator(o){return _(o,["circle","square"])},default:"circle"},size:{type:[String,Number],default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},src:{type:String},icon:{type:String},customIcon:{type:String,default:""}},data(){return{prefixCls:Iu,scale:1,childrenWidth:0,isSlotShow:!1,slotTemp:null}},computed:{classes(){return[`${Iu}`,`${Iu}-${this.shape}`,{[`${Iu}-image`]:!!this.src,[`${Iu}-icon`]:!!this.icon||!!this.customIcon,[`${Iu}-${this.size}`]:_(this.size,ZM)}]},styles(){let o={};return this.size&&!_(this.size,ZM)&&(o.width=`${this.size}px`,o.height=`${this.size}px`,o.lineHeight=`${this.size}px`,o.fontSize=`${this.size/2}px`),o},childrenStyle(){let o={};return this.isSlotShow&&(o={msTransform:`scale(${this.scale})`,WebkitTransform:`scale(${this.scale})`,transform:`scale(${this.scale})`,position:"absolute",display:"inline-block",left:`calc(50% - ${Math.round(this.childrenWidth/2)}px)`}),o}},watch:{size(o,c){o!==c&&this.setScale()}},methods:{setScale(){if(this.isSlotShow=!this.src&&!this.icon,this.$refs.children){this.childrenWidth=this.$refs.children.offsetWidth;const o=this.$el.getBoundingClientRect().width;o-8<this.childrenWidth?this.scale=(o-8)/this.childrenWidth:this.scale=1}},handleError(o){this.$emit("on-error",o)}},beforeCreate(){this.slotTemp=this.$slots.default?this.$slots.default():null},mounted(){this.setScale()},updated(){const o=this.$slots.default?this.$slots.default():null;o&&o!==this.slotTemp&&this.setScale()}},m7=["src"];function g7(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.styles)},[d.src?(t.openBlock(),t.createElementBlock("img",{key:0,src:d.src,onError:c[0]||(c[0]=(...V)=>m.handleError&&m.handleError(...V))},null,40,m7)):d.icon||d.customIcon?(t.openBlock(),t.createBlock(E,{key:1,type:d.icon,custom:d.customIcon},null,8,["type","custom"])):(t.openBlock(),t.createElementBlock("span",{key:2,ref:"children",class:t.normalizeClass([b.prefixCls+"-string"]),style:t.normalizeStyle(m.childrenStyle)},[t.renderSlot(o.$slots,"default")],6))],6)}var Jf=l(p7,[["render",g7]]),KM={emits:["on-popper-show","on-popper-hide","created","update:modelValue"],props:{eventsEnabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:Object,popper:Object,offset:{default:0},modelValue:{type:Boolean,default:!1},transition:String,options:{type:Object,default(){return{modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:"window"}}}}}},data(){return{visible:this.modelValue}},watch:{modelValue:{immediate:!0,handler(o){this.visible=o,this.$emit("update:modelValue",o)}},visible(o){o?(this.handleIndexIncrease&&this.handleIndexIncrease(),this.updatePopper(),this.$emit("on-popper-show")):this.$emit("on-popper-hide"),this.$emit("update:modelValue",o)}},methods:{createPopper(){if(!/^(top|bottom|left|right)(-start|-end)?$/g.test(this.placement))return;const o=this.options,c=this.popper||this.$refs.popper,d=this.reference||this.$refs.reference;!c||!d||(this.popperJS&&this.popperJS.hasOwnProperty("destroy")&&this.popperJS.destroy(),o.eventsEnabled=this.eventsEnabled,o.placement=this.placement,o.modifiers.offset||(o.modifiers.offset={}),o.modifiers.offset.offset=this.offset,o.onCreate=()=>{t.nextTick(this.updatePopper),this.$emit("created",this)},this.popperJS=new de(d,c,o))},updatePopper(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy(){this.visible||(this.popperJS.destroy(),this.popperJS=null)}},updated(){t.nextTick(()=>this.updatePopper())},beforeUnmount(){this.popperJS&&this.popperJS.destroy()}};const Du="ivu-tooltip",v7={name:"Tooltip",mixins:[KM],props:{placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},content:{type:[String,Number],default:""},delay:{type:Number,default:100},disabled:{type:Boolean,default:!1},controlled:{type:Boolean,default:!1},always:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},theme:{validator(o){return _(o,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number]},transferClassName:{type:String}},data(){return{prefixCls:Du,tIndex:this.handleGetIndex()}},computed:{innerStyles(){const o={};return this.maxWidth&&(o["max-width"]=`${this.maxWidth}px`),o},innerClasses(){return[`${Du}-inner`,{[`${Du}-inner-with-width`]:!!this.maxWidth}]},dropStyles(){let o={};return this.transfer&&(o["z-index"]=1060+this.tIndex),o},dropdownCls(){return[`${Du}-popper`,`${Du}-${this.theme}`,{[Du+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]}},watch:{content(){this.updatePopper()}},methods:{handleShowPopper(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!0},this.delay),this.tIndex=this.handleGetIndex()},handleClosePopper(){this.timeout&&(clearTimeout(this.timeout),this.controlled||(this.timeout=setTimeout(()=>{this.visible=!1},100)))},handleGetIndex(){return Xe(),we}},mounted(){this.always&&this.updatePopper()}};function y7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls]),onMouseenter:c[2]||(c[2]=(...E)=>m.handleShowPopper&&m.handleShowPopper(...E)),onMouseleave:c[3]||(c[3]=(...E)=>m.handleClosePopper&&m.handleClosePopper(...E))},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-rel"]),ref:"reference"},[t.renderSlot(o.$slots,"default")],2),(t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!d.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{ref:"popper",class:t.normalizeClass(m.dropdownCls),style:t.normalizeStyle(m.dropStyles),onMouseenter:c[0]||(c[0]=(...E)=>m.handleShowPopper&&m.handleShowPopper(...E)),onMouseleave:c[1]||(c[1]=(...E)=>m.handleClosePopper&&m.handleClosePopper(...E))},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-arrow"])},null,2),t.createElementVNode("div",{class:t.normalizeClass(m.innerClasses),style:t.normalizeStyle(m.innerStyles)},[t.renderSlot(o.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(d.content),1)])],6)],2)],38),[[t.vShow,!d.disabled&&(o.visible||d.always)]])]),_:3})],8,["disabled"]))],34)}var Va=l(v7,[["render",y7]]);const b7={name:"AvatarList",components:{Avatar:Jf,Tooltip:Va},props:{list:{type:Array,default(){return[]}},shape:{validator(o){return _(o,["circle","square"])},default:"circle"},size:{validator(o){return _(o,["small","large","default"])},default:"default"},excessStyle:{type:Object,default(){return{}}},max:{type:Number},tooltip:{type:Boolean,default:!0},placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}}},computed:{currentList(){const o=this.list.length,c=this.max;return o<=c?[...this.list]:[...this.list].slice(0,c)}}},O7={key:0,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"},x7={key:1,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"};function w7(o,c,d,C,b,m){const E=t.resolveComponent("Avatar"),V=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-avatar-list","ivu-avatar-list-"+d.size])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.currentList,(W,z)=>(t.openBlock(),t.createElementBlock("div",{class:"ivu-avatar-list-item",key:z},[d.tooltip&&W.tip?(t.openBlock(),t.createBlock(V,{key:0,content:W.tip,placement:d.placement,transfer:d.transfer},{default:t.withCtx(()=>[t.createVNode(E,{src:W.src,size:d.size,shape:d.shape},null,8,["src","size","shape"])]),_:2},1032,["content","placement","transfer"])):(t.openBlock(),t.createBlock(E,{key:1,src:W.src,size:d.size,shape:d.shape},null,8,["src","size","shape"]))]))),128)),o.$slots.extra?(t.openBlock(),t.createElementBlock("div",O7,[t.createVNode(E,{size:d.size,shape:d.shape,style:t.normalizeStyle(d.excessStyle)},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"extra")]),_:3},8,["size","shape","style"])])):d.list.length>d.max?(t.openBlock(),t.createElementBlock("div",x7,[t.createVNode(E,{size:d.size,shape:d.shape,style:t.normalizeStyle(d.excessStyle)},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"excess",{},()=>[t.createTextVNode("+"+t.toDisplayString(d.list.length-d.max),1)])]),_:3},8,["size","shape","style"])])):t.createCommentVNode("",!0)],2)}var JM=l(b7,[["render",w7]]);const Tx="ivu-back-top",_7={name:"BackTop",emits:["on-click"],props:{height:{type:Number,default:400},bottom:{type:Number,default:30},right:{type:Number,default:30},duration:{type:Number,default:1e3}},data(){return{backTop:!1}},mounted(){s(window,"scroll",this.handleScroll),s(window,"resize",this.handleScroll)},beforeUnmount(){a(window,"scroll",this.handleScroll),a(window,"resize",this.handleScroll)},computed:{classes(){return[`${Tx}`,{[`${Tx}-show`]:this.backTop}]},styles(){return{bottom:`${this.bottom}px`,right:`${this.right}px`}},innerClasses(){return`${Tx}-inner`}},methods:{handleScroll(){!r||(this.backTop=window.pageYOffset>=this.height)},back(){if(!r)return;const o=document.documentElement.scrollTop||document.body.scrollTop;I(window,o,0,this.duration),this.$emit("on-click")}}},S7=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-up"},null,-1)];function C7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.styles),onClick:c[0]||(c[0]=(...E)=>m.back&&m.back(...E))},[t.renderSlot(o.$slots,"default",{},()=>[t.createElementVNode("div",{class:t.normalizeClass(m.innerClasses)},S7,2)])],6)}var eE=l(_7,[["render",C7]]);const tE=["blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],na="ivu-badge",k7={name:"Badge",props:{count:Number,dot:{type:Boolean,default:!1},overflowCount:{type:[Number,String],default:99},className:String,showZero:{type:Boolean,default:!1},text:{type:String,default:""},status:{validator(o){return _(o,["success","processing","default","error","warning"])}},type:{validator(o){return _(o,["success","primary","normal","error","warning","info"])}},offset:{type:Array},color:{type:String}},computed:{classes(){return`${na}`},dotClasses(){return`${na}-dot`},countClasses(){return[`${na}-count`,{[`${this.className}`]:!!this.className,[`${na}-count-alone`]:this.alone,[`${na}-count-${this.type}`]:!!this.type}]},customCountClasses(){return[`${na}-count`,`${na}-count-custom`,{[`${this.className}`]:!!this.className}]},statusClasses(){return[`${na}-status-dot`,{[`${na}-status-${this.status}`]:!!this.status,[`${na}-status-${this.color}`]:!!this.color&&_(this.color,tE)}]},statusStyles(){return _(this.color,tE)?{}:{backgroundColor:this.color}},styles(){const o={};return this.offset&&this.offset.length===2&&(o["margin-top"]=`${this.offset[0]}px`,o["margin-right"]=`${this.offset[1]}px`),o},finalCount(){return this.text!==""?this.text:parseInt(this.count)>=parseInt(this.overflowCount)?`${this.overflowCount}+`:this.count},badge(){let o=!1;return this.count&&(o=parseInt(this.count)!==0),this.dot&&(o=!0,this.count!==null&&parseInt(this.count)===0&&(o=!1)),this.text!==""&&(o=!0),o||this.showZero},hasCount(){return!!(this.count||this.text!==""||this.showZero&&parseInt(this.count)===0)},alone(){return this.$slots.default===void 0}}},T7={class:"ivu-badge-status-text"};function M7(o,c,d,C,b,m){return d.dot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(m.classes),ref:"badge"},[t.renderSlot(o.$slots,"default"),t.withDirectives(t.createElementVNode("sup",{class:t.normalizeClass(m.dotClasses),style:t.normalizeStyle(m.styles)},null,6),[[t.vShow,m.badge]])],2)):d.status||d.color?(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass([m.classes,"ivu-badge-status"]),ref:"badge"},[t.createElementVNode("span",{class:t.normalizeClass(m.statusClasses),style:t.normalizeStyle(m.statusStyles)},null,6),t.createElementVNode("span",T7,[t.renderSlot(o.$slots,"text",{},()=>[t.createTextVNode(t.toDisplayString(d.text),1)])])],2)):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(m.classes),ref:"badge"},[t.renderSlot(o.$slots,"default"),o.$slots.count?(t.openBlock(),t.createElementBlock("sup",{key:0,style:t.normalizeStyle(m.styles),class:t.normalizeClass(m.customCountClasses)},[t.renderSlot(o.$slots,"count")],6)):m.hasCount?t.withDirectives((t.openBlock(),t.createElementBlock("sup",{key:1,style:t.normalizeStyle(m.styles),class:t.normalizeClass(m.countClasses)},[t.renderSlot(o.$slots,"text",{},()=>[t.createTextVNode(t.toDisplayString(m.finalCount),1)])],6)),[[t.vShow,m.badge]]):t.createCommentVNode("",!0)],2))}var Z0=l(k7,[["render",M7]]);const E7={name:"Breadcrumb",provide(){return{BreadcrumbInstance:this}},props:{separator:{type:String,default:"/"}}},P7={class:"ivu-breadcrumb"};function A7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",P7,[t.renderSlot(o.$slots,"default")])}var Mx=l(E7,[["render",A7]]);const nE="ivu-breadcrumb-item",R7={name:"BreadcrumbItem",mixins:[fe],inject:["BreadcrumbInstance"],props:{},data(){return{showSeparator:!1}},computed:{linkClasses(){return`${nE}-link`},separatorClasses(){return`${nE}-separator`},separator(){return this.BreadcrumbInstance.separator}},mounted(){this.showSeparator=this.$slots.separator!==void 0}},I7=["href","target"],D7=["innerHTML"];function N7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("span",null,[o.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:o.linkUrl,target:o.target,class:t.normalizeClass(m.linkClasses),onClick:[c[0]||(c[0]=t.withModifiers(E=>o.handleCheckClick(E,!1),["exact"])),c[1]||(c[1]=t.withModifiers(E=>o.handleCheckClick(E,!0),["ctrl"])),c[2]||(c[2]=t.withModifiers(E=>o.handleCheckClick(E,!0),["meta"]))]},[t.renderSlot(o.$slots,"default")],10,I7)):(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(m.linkClasses)},[t.renderSlot(o.$slots,"default")],2)),b.showSeparator?(t.openBlock(),t.createElementBlock("span",{key:3,class:t.normalizeClass(m.separatorClasses)},[t.renderSlot(o.$slots,"separator")],2)):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(m.separatorClasses),innerHTML:m.separator},null,10,D7))])}var Ex=l(R7,[["render",N7]]);const Dl="ivu-btn",Qr={name:"Button",mixins:[fe,un],components:{Icon:S},emits:["click"],props:{type:{validator(o){return _(o,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator(o){return _(o,["circle","circle-outline"])}},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator(o){return _(o,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{showSlot(){return!!this.$slots.default},classes(){return[`${Dl}`,`${Dl}-${this.type}`,{[`${Dl}-long`]:this.long,[`${Dl}-${this.shape}`]:!!this.shape,[`${Dl}-${this.size}`]:this.size!=="default",[`${Dl}-loading`]:this.loading!=null&&this.loading,[`${Dl}-icon-only`]:!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),[`${Dl}-ghost`]:this.ghost}]},isHrefPattern(){const{to:o}=this;return!!o},tagName(){const{isHrefPattern:o}=this;return o?"a":"button"},tagProps(){const{isHrefPattern:o}=this;if(o){const{linkUrl:c,target:d}=this;return{href:c,target:d}}else{const{htmlType:c}=this;return{type:c}}}},methods:{handleClickLink(o){this.$emit("click",o);const c=o.ctrlKey||o.metaKey;this.handleCheckClick(o,c)}},render(){let o;this.tagName==="button"?o="button":this.tagName==="a"&&(o="a");let c=[];return this.loading&&c.push(t.h(S,{class:"ivu-load-loop",type:"ios-loading"})),(this.icon||this.customIcon)&&!this.loading&&c.push(t.h(S,{type:this.icon,custom:this.customIcon})),this.$slots.default&&c.push(t.h("span",{ref:"slot"},this.$slots.default())),t.h(o,{class:this.classes,disabled:this.itemDisabled,onClick:this.handleClickLink,...this.tagProps},c)}},K0="ivu-btn-group",$7={name:"ButtonGroup",props:{size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},shape:{validator(o){return _(o,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes(){return[`${K0}`,{[`${K0}-${this.size}`]:!!this.size,[`${K0}-${this.shape}`]:!!this.shape,[`${K0}-vertical`]:this.vertical}]}}};function V7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.renderSlot(o.$slots,"default")],2)}var Px=l($7,[["render",V7]]);const ep="ivu-radio-group";let L7=0;const B7=Date.now(),U7={name:"RadioGroup",mixins:[un],emits:["update:modelValue","on-change"],provide(){return{RadioGroupInstance:this}},props:{modelValue:{type:[String,Number],default:""},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},type:{validator(o){return _(o,["button"])}},vertical:{type:Boolean,default:!1},name:{type:String,default:()=>`ivuRadioGroup_${B7}_${L7++}`},buttonStyle:{validator(o){return _(o,["default","solid"])},default:"default"}},data(){return{currentValue:this.modelValue,children:[]}},computed:{classes(){return[`${ep}`,{[`${ep}-${this.size}`]:!!this.size,[`ivu-radio-${this.size}`]:!!this.size,[`${ep}-${this.type}`]:!!this.type,[`${ep}-button-${this.buttonStyle}`]:this.type==="button"&&this.buttonStyle!=="default",[`${ep}-vertical`]:this.vertical}]}},methods:{change(o){this.currentValue=o.value,this.$emit("update:modelValue",o.value),this.$emit("on-change",o.value),this.handleFormItemChange("change",o.value)}},watch:{modelValue(){this.currentValue!==this.modelValue&&(this.currentValue=this.modelValue)}}},z7=["name"];function F7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),name:d.name},[t.renderSlot(o.$slots,"default")],10,z7)}var J0=l(U7,[["render",F7]]);const Is="ivu-radio",X7={name:"Radio",mixins:[un],emits:["update:modelValue","on-change"],inject:{RadioGroupInstance:{default:null}},props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{groupName:this.name,parent:this.RadioGroupInstance,focusWrapper:!1,focusInner:!1}},computed:{wrapClasses(){return[`${Is}-wrapper`,{[`${Is}-group-item`]:this.group,[`${Is}-wrapper-checked`]:this.currentValue,[`${Is}-wrapper-disabled`]:this.itemDisabled,[`${Is}-${this.size}`]:!!this.size,[`${Is}-focus`]:this.focusWrapper,[`${Is}-border`]:this.border}]},radioClasses(){return[`${Is}`,{[`${Is}-checked`]:this.currentValue,[`${Is}-disabled`]:this.itemDisabled}]},innerClasses(){return[`${Is}-inner`,{[`${Is}-focus`]:this.focusInner}]},inputClasses(){return`${Is}-input`},currentValue(){return this.RadioGroupInstance?this.RadioGroupInstance.currentValue===this.label:this.modelValue===this.trueValue},group(){return!!this.RadioGroupInstance}},mounted(){this.parent&&(this.name&&this.name!==this.parent.name?console.warn&&console.warn("[View UI] Name does not match Radio Group name."):this.groupName=this.parent.name)},methods:{change(o){if(this.itemDisabled)return!1;const c=o.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",c),this.group?this.label!==void 0&&this.parent.change({value:this.label,checked:this.modelValue}):(this.$emit("on-change",c),this.handleFormItemChange("change",c))},onBlur(){this.focusWrapper=!1,this.focusInner=!1},onFocus(){this.group&&this.parent.type==="button"?this.focusWrapper=!0:this.focusInner=!0}},watch:{modelValue(o){if(!(o===this.trueValue||o===this.falseValue))throw"Value should be trueValue or falseValue."}}},W7=["disabled","checked","name"];function Q7(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("label",{class:t.normalizeClass(m.wrapClasses)},[t.createElementVNode("span",{class:t.normalizeClass(m.radioClasses)},[t.createElementVNode("span",{class:t.normalizeClass(m.innerClasses)},null,2),t.createElementVNode("input",{type:"radio",class:t.normalizeClass(m.inputClasses),disabled:o.itemDisabled,checked:m.currentValue,name:b.groupName,onChange:c[0]||(c[0]=(...E)=>m.change&&m.change(...E)),onFocus:c[1]||(c[1]=(...E)=>m.onFocus&&m.onFocus(...E)),onBlur:c[2]||(c[2]=(...E)=>m.onBlur&&m.onBlur(...E))},null,42,W7)],2),t.renderSlot(o.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(d.label),1)])],2)}var ev=l(X7,[["render",Q7]]),iE={exports:{}};(function(o,c){(function(d,C){o.exports=C()})(J,function(){var d=1e3,C=6e4,b=36e5,m="millisecond",E="second",V="minute",W="hour",z="day",G="week",ae="month",xe="quarter",Oe="year",ve="date",se="Invalid Date",Pe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$t=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,mt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Et){var gt=["th","st","nd","rd"],ct=Et%100;return"["+Et+(gt[(ct-20)%10]||gt[ct]||gt[0])+"]"}},Ot=function(Et,gt,ct){var It=String(Et);return!It||It.length>=gt?Et:""+Array(gt+1-It.length).join(ct)+Et},He={s:Ot,z:function(Et){var gt=-Et.utcOffset(),ct=Math.abs(gt),It=Math.floor(ct/60),bt=ct%60;return(gt<=0?"+":"-")+Ot(It,2,"0")+":"+Ot(bt,2,"0")},m:function Et(gt,ct){if(gt.date()<ct.date())return-Et(ct,gt);var It=12*(ct.year()-gt.year())+(ct.month()-gt.month()),bt=gt.clone().add(It,ae),Kt=ct-bt<0,nn=gt.clone().add(It+(Kt?-1:1),ae);return+(-(It+(ct-bt)/(Kt?bt-nn:nn-bt))||0)},a:function(Et){return Et<0?Math.ceil(Et)||0:Math.floor(Et)},p:function(Et){return{M:ae,y:Oe,w:G,d:z,D:ve,h:W,m:V,s:E,ms:m,Q:xe}[Et]||String(Et||"").toLowerCase().replace(/s$/,"")},u:function(Et){return Et===void 0}},De="en",Ke={};Ke[De]=mt;var Ye="$isDayjsObject",zt=function(Et){return Et instanceof At||!(!Et||!Et[Ye])},Ft=function Et(gt,ct,It){var bt;if(!gt)return De;if(typeof gt=="string"){var Kt=gt.toLowerCase();Ke[Kt]&&(bt=Kt),ct&&(Ke[Kt]=ct,bt=Kt);var nn=gt.split("-");if(!bt&&nn.length>1)return Et(nn[0])}else{var zn=gt.name;Ke[zn]=gt,bt=zn}return!It&&bt&&(De=bt),bt||!It&&De},Mt=function(Et,gt){if(zt(Et))return Et.clone();var ct=typeof gt=="object"?gt:{};return ct.date=Et,ct.args=arguments,new At(ct)},xt=He;xt.l=Ft,xt.i=zt,xt.w=function(Et,gt){return Mt(Et,{locale:gt.$L,utc:gt.$u,x:gt.$x,$offset:gt.$offset})};var At=function(){function Et(ct){this.$L=Ft(ct.locale,null,!0),this.parse(ct),this.$x=this.$x||ct.x||{},this[Ye]=!0}var gt=Et.prototype;return gt.parse=function(ct){this.$d=function(It){var bt=It.date,Kt=It.utc;if(bt===null)return new Date(NaN);if(xt.u(bt))return new Date;if(bt instanceof Date)return new Date(bt);if(typeof bt=="string"&&!/Z$/i.test(bt)){var nn=bt.match(Pe);if(nn){var zn=nn[2]-1||0,ti=(nn[7]||"0").substring(0,3);return Kt?new Date(Date.UTC(nn[1],zn,nn[3]||1,nn[4]||0,nn[5]||0,nn[6]||0,ti)):new Date(nn[1],zn,nn[3]||1,nn[4]||0,nn[5]||0,nn[6]||0,ti)}}return new Date(bt)}(ct),this.init()},gt.init=function(){var ct=this.$d;this.$y=ct.getFullYear(),this.$M=ct.getMonth(),this.$D=ct.getDate(),this.$W=ct.getDay(),this.$H=ct.getHours(),this.$m=ct.getMinutes(),this.$s=ct.getSeconds(),this.$ms=ct.getMilliseconds()},gt.$utils=function(){return xt},gt.isValid=function(){return this.$d.toString()!==se},gt.isSame=function(ct,It){var bt=Mt(ct);return this.startOf(It)<=bt&&bt<=this.endOf(It)},gt.isAfter=function(ct,It){return Mt(ct)<this.startOf(It)},gt.isBefore=function(ct,It){return this.endOf(It)<Mt(ct)},gt.$g=function(ct,It,bt){return xt.u(ct)?this[It]:this.set(bt,ct)},gt.unix=function(){return Math.floor(this.valueOf()/1e3)},gt.valueOf=function(){return this.$d.getTime()},gt.startOf=function(ct,It){var bt=this,Kt=!!xt.u(It)||It,nn=xt.p(ct),zn=function(_t,qt){var Tn=xt.w(bt.$u?Date.UTC(bt.$y,qt,_t):new Date(bt.$y,qt,_t),bt);return Kt?Tn:Tn.endOf(z)},ti=function(_t,qt){return xt.w(bt.toDate()[_t].apply(bt.toDate("s"),(Kt?[0,0,0,0]:[23,59,59,999]).slice(qt)),bt)},Oi=this.$W,ki=this.$M,mr=this.$D,us="set"+(this.$u?"UTC":"");switch(nn){case Oe:return Kt?zn(1,0):zn(31,11);case ae:return Kt?zn(1,ki):zn(0,ki+1);case G:var No=this.$locale().weekStart||0,$o=(Oi<No?Oi+7:Oi)-No;return zn(Kt?mr-$o:mr+(6-$o),ki);case z:case ve:return ti(us+"Hours",0);case W:return ti(us+"Minutes",1);case V:return ti(us+"Seconds",2);case E:return ti(us+"Milliseconds",3);default:return this.clone()}},gt.endOf=function(ct){return this.startOf(ct,!1)},gt.$set=function(ct,It){var bt,Kt=xt.p(ct),nn="set"+(this.$u?"UTC":""),zn=(bt={},bt[z]=nn+"Date",bt[ve]=nn+"Date",bt[ae]=nn+"Month",bt[Oe]=nn+"FullYear",bt[W]=nn+"Hours",bt[V]=nn+"Minutes",bt[E]=nn+"Seconds",bt[m]=nn+"Milliseconds",bt)[Kt],ti=Kt===z?this.$D+(It-this.$W):It;if(Kt===ae||Kt===Oe){var Oi=this.clone().set(ve,1);Oi.$d[zn](ti),Oi.init(),this.$d=Oi.set(ve,Math.min(this.$D,Oi.daysInMonth())).$d}else zn&&this.$d[zn](ti);return this.init(),this},gt.set=function(ct,It){return this.clone().$set(ct,It)},gt.get=function(ct){return this[xt.p(ct)]()},gt.add=function(ct,It){var bt,Kt=this;ct=Number(ct);var nn=xt.p(It),zn=function(ki){var mr=Mt(Kt);return xt.w(mr.date(mr.date()+Math.round(ki*ct)),Kt)};if(nn===ae)return this.set(ae,this.$M+ct);if(nn===Oe)return this.set(Oe,this.$y+ct);if(nn===z)return zn(1);if(nn===G)return zn(7);var ti=(bt={},bt[V]=C,bt[W]=b,bt[E]=d,bt)[nn]||1,Oi=this.$d.getTime()+ct*ti;return xt.w(Oi,this)},gt.subtract=function(ct,It){return this.add(-1*ct,It)},gt.format=function(ct){var It=this,bt=this.$locale();if(!this.isValid())return bt.invalidDate||se;var Kt=ct||"YYYY-MM-DDTHH:mm:ssZ",nn=xt.z(this),zn=this.$H,ti=this.$m,Oi=this.$M,ki=bt.weekdays,mr=bt.months,us=bt.meridiem,No=function(qt,Tn,cr,Yr){return qt&&(qt[Tn]||qt(It,Kt))||cr[Tn].slice(0,Yr)},$o=function(qt){return xt.s(zn%12||12,qt,"0")},_t=us||function(qt,Tn,cr){var Yr=qt<12?"AM":"PM";return cr?Yr.toLowerCase():Yr};return Kt.replace($t,function(qt,Tn){return Tn||function(cr){switch(cr){case"YY":return String(It.$y).slice(-2);case"YYYY":return xt.s(It.$y,4,"0");case"M":return Oi+1;case"MM":return xt.s(Oi+1,2,"0");case"MMM":return No(bt.monthsShort,Oi,mr,3);case"MMMM":return No(mr,Oi);case"D":return It.$D;case"DD":return xt.s(It.$D,2,"0");case"d":return String(It.$W);case"dd":return No(bt.weekdaysMin,It.$W,ki,2);case"ddd":return No(bt.weekdaysShort,It.$W,ki,3);case"dddd":return ki[It.$W];case"H":return String(zn);case"HH":return xt.s(zn,2,"0");case"h":return $o(1);case"hh":return $o(2);case"a":return _t(zn,ti,!0);case"A":return _t(zn,ti,!1);case"m":return String(ti);case"mm":return xt.s(ti,2,"0");case"s":return String(It.$s);case"ss":return xt.s(It.$s,2,"0");case"SSS":return xt.s(It.$ms,3,"0");case"Z":return nn}return null}(qt)||nn.replace(":","")})},gt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},gt.diff=function(ct,It,bt){var Kt,nn=this,zn=xt.p(It),ti=Mt(ct),Oi=(ti.utcOffset()-this.utcOffset())*C,ki=this-ti,mr=function(){return xt.m(nn,ti)};switch(zn){case Oe:Kt=mr()/12;break;case ae:Kt=mr();break;case xe:Kt=mr()/3;break;case G:Kt=(ki-Oi)/6048e5;break;case z:Kt=(ki-Oi)/864e5;break;case W:Kt=ki/b;break;case V:Kt=ki/C;break;case E:Kt=ki/d;break;default:Kt=ki}return bt?Kt:xt.a(Kt)},gt.daysInMonth=function(){return this.endOf(ae).$D},gt.$locale=function(){return Ke[this.$L]},gt.locale=function(ct,It){if(!ct)return this.$L;var bt=this.clone(),Kt=Ft(ct,It,!0);return Kt&&(bt.$L=Kt),bt},gt.clone=function(){return xt.w(this.$d,this)},gt.toDate=function(){return new Date(this.valueOf())},gt.toJSON=function(){return this.isValid()?this.toISOString():null},gt.toISOString=function(){return this.$d.toISOString()},gt.toString=function(){return this.$d.toUTCString()},Et}(),Wt=At.prototype;return Mt.prototype=Wt,[["$ms",m],["$s",E],["$m",V],["$H",W],["$W",z],["$M",ae],["$y",Oe],["$D",ve]].forEach(function(Et){Wt[Et[1]]=function(gt){return this.$g(gt,Et[0],Et[1])}}),Mt.extend=function(Et,gt){return Et.$i||(Et(gt,At,Mt),Et.$i=!0),Mt},Mt.locale=Ft,Mt.isDayjs=zt,Mt.unix=function(Et){return Mt(1e3*Et)},Mt.en=Ke[De],Mt.Ls=Ke,Mt.p={},Mt})})(iE);var Ds=iE.exports,rE=1/0,sE=9007199254740991,H7=17976931348623157e292,oE=NaN,G7="[object Function]",Y7="[object GeneratorFunction]",j7="[object Symbol]",q7=/^\s+|\s+$/g,Z7=/^[-+]0x[0-9a-f]+$/i,K7=/^0b[01]+$/i,J7=/^0o[0-7]+$/i,eF=/^(?:0|[1-9]\d*)$/,tF=parseInt,nF=Object.prototype,aE=nF.toString,iF=Math.ceil,rF=Math.max;function sF(o,c,d){var C=-1,b=o.length;c<0&&(c=-c>b?0:b+c),d=d>b?b:d,d<0&&(d+=b),b=c>d?0:d-c>>>0,c>>>=0;for(var m=Array(b);++C<b;)m[C]=o[C+c];return m}function oF(o,c){return c=c??sE,!!c&&(typeof o=="number"||eF.test(o))&&o>-1&&o%1==0&&o<c}function aF(o,c,d){if(!tv(d))return!1;var C=typeof c;return(C=="number"?hF(d)&&oF(c,d.length):C=="string"&&c in d)?cF(d[c],o):!1}function lF(o,c,d){(d?aF(o,c,d):c===void 0)?c=1:c=rF(gF(c),0);var C=o?o.length:0;if(!C||c<1)return[];for(var b=0,m=0,E=Array(iF(C/c));b<C;)E[m++]=sF(o,b,b+=c);return E}function cF(o,c){return o===c||o!==o&&c!==c}function hF(o){return o!=null&&dF(o.length)&&!uF(o)}function uF(o){var c=tv(o)?aE.call(o):"";return c==G7||c==Y7}function dF(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=sE}function tv(o){var c=typeof o;return!!o&&(c=="object"||c=="function")}function fF(o){return!!o&&typeof o=="object"}function pF(o){return typeof o=="symbol"||fF(o)&&aE.call(o)==j7}function mF(o){if(!o)return o===0?o:0;if(o=vF(o),o===rE||o===-rE){var c=o<0?-1:1;return c*H7}return o===o?o:0}function gF(o){var c=mF(o),d=c%1;return c===c?d?c-d:c:0}function vF(o){if(typeof o=="number")return o;if(pF(o))return oE;if(tv(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=tv(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=o.replace(q7,"");var d=K7.test(o);return d||J7.test(o)?tF(o.slice(2),d?2:8):Z7.test(o)?oE:+o}var lE=lF,cE={emits:["on-cell-click","on-cell-contextmenu"],methods:{handleCellClick(o){this.CalendarInstance.$emit("on-cell-click",o)},handleCellContextmenu(o){this.CalendarInstance.$emit("on-cell-contextmenu",o)}}};const yF={name:"CalendarMonth",mixins:[cE],inject:["CalendarInstance"],props:{date:Object},data(){return{firstDayOfWeek:this.CalendarInstance.firstDayOfWeek,weekDays:this.CalendarInstance.locale.weekDays}},computed:{finalWeekDays(){return this.weekDays.slice(this.firstDayOfWeek).concat(this.weekDays.slice(0,this.firstDayOfWeek))},days(){let o=[];const c=Ds(this.date.format("YYYY-MM-01")),d=c.day(),C=this.firstDayOfWeek,b=C<=d?d-C:7-(C-d);for(let W=0;W<b;W++){const z=c.subtract(b-W,"day"),G={text:z.format("YYYY-MM-DD"),date:z.format("D"),type:"prev"};o.push(G)}const m=c.daysInMonth();for(let W=0;W<m;W++){const z=c.add(W,"day"),G={text:z.format("YYYY-MM-DD"),date:z.format("D"),type:"current"};o.push(G)}const E=42-o.length,V=c.add(1,"month");for(let W=0;W<E;W++){const z=V.add(W,"day"),G={text:z.format("YYYY-MM-DD"),date:z.format("D"),type:"next"};o.push(G)}return o},chunkDays(){return lE(this.days,7)},dayStyles(){let o={};return this.CalendarInstance.cellHeight!==100&&(o.height=`${this.CalendarInstance.cellHeight}px`),o},currentDate(){return this.date.format("YYYY-MM-DD")}},methods:{handleClickDate(o){this.CalendarInstance.handleChangeDate(Ds(o))}}},bF={class:"ivu-calendar-table",cellspacing:"0",cellpadding:"0"},OF=["onClick","onContextmenu"],xF=["onClick"],wF={class:"ivu-calendar-table-day-title"},_F={class:"ivu-calendar-table-day-slot"};function SF(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("table",bF,[t.createElementVNode("thead",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.finalWeekDays,E=>(t.openBlock(),t.createElementBlock("th",{key:E},t.toDisplayString(E),1))),128))]),t.createElementVNode("tbody",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.chunkDays,(E,V)=>(t.openBlock(),t.createElementBlock("tr",{key:V},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(E,W=>(t.openBlock(),t.createElementBlock("td",{key:W.text,onClick:z=>o.handleCellClick(W),onContextmenu:t.withModifiers(z=>o.handleCellContextmenu(W),["prevent"])},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-other":W.type!=="current","ivu-calendar-table-day-current":W.text===m.currentDate}]),style:t.normalizeStyle(m.dayStyles),onClick:z=>m.handleClickDate(W.text)},[t.createElementVNode("div",wF,t.toDisplayString(W.date),1),t.createElementVNode("div",_F,[t.renderSlot(o.$slots,"month",{date:new Date(W.date),data:{type:W.type+"-month",day:W.text,selected:W.text===m.currentDate}})])],14,xF)],40,OF))),128))]))),128))])])}var CF=l(yF,[["render",SF]]);const kF={name:"CalendarYear",mixins:[cE],inject:["CalendarInstance"],props:{date:Object},data(){return{}},computed:{months(){let o=[];const c=Ds(this.date.format("YYYY-01-01"));for(let d=0;d<12;d++){const C=c.add(d,"month");o.push({text:C.format("YYYY-MM"),month:this.CalendarInstance.locale.months[d],type:"current"})}return o},chunkMonths(){return lE(this.months,3)},dayStyles(){let o={};return this.CalendarInstance.cellHeight!==100&&(o.height=`${this.CalendarInstance.cellHeight}px`),o},currentMonth(){return this.date.format("YYYY-MM")}},methods:{handleClickDate(o){this.CalendarInstance.handleChangeDate(Ds(o))}}},TF={class:"ivu-calendar-table ivu-calendar-table-year",cellspacing:"0",cellpadding:"0"},MF=["onClick","onContextmenu"],EF=["onClick"],PF={class:"ivu-calendar-table-day-title"},AF={class:"ivu-calendar-table-day-slot"};function RF(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("table",TF,[t.createElementVNode("tbody",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.chunkMonths,(E,V)=>(t.openBlock(),t.createElementBlock("tr",{key:V},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(E,W=>(t.openBlock(),t.createElementBlock("td",{key:W.text,onClick:z=>o.handleCellClick(W),onContextmenu:t.withModifiers(z=>o.handleCellContextmenu(W),["prevent"])},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-current":W.text===m.currentMonth}]),style:t.normalizeStyle(m.dayStyles),onClick:z=>m.handleClickDate(W.text)},[t.createElementVNode("div",PF,t.toDisplayString(W.month),1),t.createElementVNode("div",AF,[t.renderSlot(o.$slots,"year",{month:new Date(W.month),data:{type:W.type+"-year",month:W.text,selected:W.text===m.currentMonth}})])],14,EF)],40,MF))),128))]))),128))])])}var IF=l(kF,[["render",RF]]);const DF={name:"Calendar",components:{CalendarMonth:CF,CalendarYear:IF,ButtonGroup:Px,Button:Qr,RadioGroup:J0,Radio:ev,Icon:S},emits:["on-type-change","on-prev","on-next","on-today","on-change","update:modelValue","on-cell-click","on-cell-contextmenu"],provide(){return{CalendarInstance:this}},props:{modelValue:{type:[Date,String,Number]},type:{validator(o){return _(o,["month","year"])},default:"month"},cellHeight:{type:Number,default:100},showHeader:{type:Boolean,default:!0},headerType:{validator(o){return _(o,["simple","full"])},default:"simple"},firstDayOfWeek:{validator(o){return _(o,[1,2,3,4,5,6,7])},default:1},hideType:{type:Boolean,default:!1},locale:{type:Object,default(){return{today:"今天",type:{month:"月",year:"年"},weekDays:["日","一","二","三","四","五","六"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}}}},data(){const o=this.modelValue?this.modelValue:new Date;return{currentValue:Ds(o),mode:this.type}},watch:{modelValue(o){const c=o||new Date;this.currentValue=Ds(c)},type(o){this.mode=o}},computed:{headerTitle(){if(this.mode==="month")return this.currentValue.format("YYYY 年 M 月");if(this.mode==="year")return this.currentValue.format("YYYY 年")}},methods:{handleChangeType(o){this.$emit("on-type-change",o)},handlePrev(){const o=this.currentValue.format("YYYY-MM-01");let c;this.mode==="month"?c=Ds(o).subtract(1,"month"):this.mode==="year"&&(c=Ds(o).subtract(1,"year")),this.handleChangeDate(c),this.$emit("on-prev")},handleNext(){const o=this.currentValue.format("YYYY-MM-01");let c;this.mode==="month"?c=Ds(o).add(1,"month"):this.mode==="year"&&(c=Ds(o).add(1,"year")),this.handleChangeDate(c),this.$emit("on-next")},handleToday(){const o=Ds(new Date),c=o.format("YYYY-MM-DD"),d=this.currentValue.format("YYYY-MM-DD");c!==d&&this.handleChangeDate(o),this.$emit("on-today")},handleChangeDate(o){this.currentValue=o;const c=new Date(o.format("YYYY-MM-DD"));this.$emit("update:modelValue",c),this.$emit("on-change",c)}}},NF={class:"ivu-calendar"},$F={key:0,class:"ivu-calendar-header"},VF={class:"ivu-calendar-header-title"},LF={class:"ivu-calendar-header-action"},BF={class:"ivu-calendar-body"};function UF(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Button"),W=t.resolveComponent("ButtonGroup"),z=t.resolveComponent("Radio"),G=t.resolveComponent("RadioGroup"),ae=t.resolveComponent("CalendarMonth"),xe=t.resolveComponent("CalendarYear");return t.openBlock(),t.createElementBlock("div",NF,[d.showHeader?(t.openBlock(),t.createElementBlock("div",$F,[t.renderSlot(o.$slots,"header",{},()=>[t.createElementVNode("div",VF,[t.renderSlot(o.$slots,"headerTitle",{},()=>[t.createTextVNode(t.toDisplayString(m.headerTitle),1)])]),t.createElementVNode("div",LF,[d.headerType==="simple"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(W,null,{default:t.withCtx(()=>[t.createVNode(V,{onClick:m.handlePrev},{default:t.withCtx(()=>[t.createVNode(E,{type:"ios-arrow-back"})]),_:1},8,["onClick"]),t.createVNode(V,{onClick:m.handleToday},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.locale.today),1)]),_:1},8,["onClick"]),t.createVNode(V,{onClick:m.handleNext},{default:t.withCtx(()=>[t.createVNode(E,{type:"ios-arrow-forward"})]),_:1},8,["onClick"])]),_:1}),d.hideType?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(G,{key:0,modelValue:b.mode,"onUpdate:modelValue":c[0]||(c[0]=Oe=>b.mode=Oe),type:"button",class:"ivu-ml",onOnChange:m.handleChangeType},{default:t.withCtx(()=>[t.createVNode(z,{label:"month"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.locale.type.month),1)]),_:1}),t.createVNode(z,{label:"year"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.locale.type.year),1)]),_:1})]),_:1},8,["modelValue","onOnChange"]))],64)):d.headerType==="full"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[],64)):t.createCommentVNode("",!0)])])])):t.createCommentVNode("",!0),t.createElementVNode("div",BF,[b.mode==="month"?(t.openBlock(),t.createBlock(ae,{key:0,date:b.currentValue},{month:t.withCtx(({date:Oe,data:ve})=>[t.renderSlot(o.$slots,"month",{date:Oe,data:ve})]),_:3},8,["date"])):b.mode==="year"?(t.openBlock(),t.createBlock(xe,{key:1,date:b.currentValue},{year:t.withCtx(({month:Oe,data:ve})=>[t.renderSlot(o.$slots,"year",{month:Oe,data:ve})]),_:3},8,["date"])):t.createCommentVNode("",!0)])])}var hE=l(DF,[["render",UF]]);const La="ivu-col";function zF(o){return typeof o=="number"?`${o} ${o} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(o)?`0 0 ${o}`:o}const FF={name:"iCol",inject:["RowInstance"],props:{span:[Number,String],order:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],className:String,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object],xxl:[Number,Object],flex:{type:[Number,String],default:""}},computed:{gutter(){return this.RowInstance.gutter},classes(){let o=[`${La}`,{[`${La}-span-${this.span}`]:this.span,[`${La}-order-${this.order}`]:this.order,[`${La}-offset-${this.offset}`]:this.offset,[`${La}-push-${this.push}`]:this.push,[`${La}-pull-${this.pull}`]:this.pull,[`${this.className}`]:!!this.className}];return["xs","sm","md","lg","xl","xxl"].forEach(c=>{if(typeof this[c]=="number")o.push(`${La}-span-${c}-${this[c]}`);else if(typeof this[c]=="object"){let d=this[c];Object.keys(d).forEach(C=>{o.push(C!=="span"?`${La}-${c}-${C}-${d[C]}`:`${La}-span-${c}-${d[C]}`)})}}),o},styles(){let o={};return this.gutter!==0&&(o={paddingLeft:this.gutter/2+"px",paddingRight:this.gutter/2+"px"}),this.flex&&(o.flex=zF(this.flex)),o}}};function XF(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.styles)},[t.renderSlot(o.$slots,"default")],6)}var ia=l(FF,[["render",XF]]);const ah="ivu-row",WF={name:"Row",provide(){return{RowInstance:this}},props:{type:{validator(o){return _(o,["flex"])}},align:{validator(o){return _(o,["top","middle","bottom"])}},justify:{validator(o){return _(o,["start","end","center","space-around","space-between"])}},gutter:{type:Number,default:0},className:String,wrap:{type:Boolean,default:!0}},computed:{classes(){return[`${ah}`,{[`${ah}-${this.type}`]:!!this.type,[`${ah}-${this.type}-${this.align}`]:!!this.align&&this.type,[`${ah}-${this.type}-${this.justify}`]:!!this.justify&&this.type,[`${ah}-${this.align}`]:!!this.align,[`${ah}-${this.justify}`]:!!this.justify,[`${this.className}`]:!!this.className,[`${ah}-no-wrap`]:!this.wrap}]},styles(){let o={};return this.gutter!==0&&(o={marginLeft:this.gutter/-2+"px",marginRight:this.gutter/-2+"px"}),o}}};function QF(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.styles)},[t.renderSlot(o.$slots,"default")],6)}var Nl=l(WF,[["render",QF]]);function lh(){return lh=Object.assign||function(o){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var C in d)Object.prototype.hasOwnProperty.call(d,C)&&(o[C]=d[C])}return o},lh.apply(this,arguments)}function HF(o,c){o.prototype=Object.create(c.prototype),o.prototype.constructor=o,tp(o,c)}function Ax(o){return Ax=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},Ax(o)}function tp(o,c){return tp=Object.setPrototypeOf||function(d,C){return d.__proto__=C,d},tp(o,c)}function GF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nv(o,c,d){return GF()?nv=Reflect.construct:nv=function(C,b,m){var E=[null];E.push.apply(E,b);var V=Function.bind.apply(C,E),W=new V;return m&&tp(W,m.prototype),W},nv.apply(null,arguments)}function YF(o){return Function.toString.call(o).indexOf("[native code]")!==-1}function Rx(o){var c=typeof Map=="function"?new Map:void 0;return Rx=function(d){if(d===null||!YF(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c<"u"){if(c.has(d))return c.get(d);c.set(d,C)}function C(){return nv(d,arguments,Ax(this).constructor)}return C.prototype=Object.create(d.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),tp(C,d)},Rx(o)}var jF=/%[sdj%]/g,qF=function(){};function Ix(o){if(!o||!o.length)return null;var c={};return o.forEach(function(d){var C=d.field;c[C]=c[C]||[],c[C].push(d)}),c}function Ns(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var C=1,b=c[0],m=c.length;if(typeof b=="function")return b.apply(null,c.slice(1));if(typeof b=="string"){var E=String(b).replace(jF,function(V){if(V==="%%")return"%";if(C>=m)return V;switch(V){case"%s":return String(c[C++]);case"%d":return Number(c[C++]);case"%j":try{return JSON.stringify(c[C++])}catch{return"[Circular]"}break;default:return V}});return E}return b}function ZF(o){return o==="string"||o==="url"||o==="hex"||o==="email"||o==="date"||o==="pattern"}function qi(o,c){return!!(o==null||c==="array"&&Array.isArray(o)&&!o.length||ZF(c)&&typeof o=="string"&&!o)}function KF(o,c,d){var C=[],b=0,m=o.length;function E(V){C.push.apply(C,V),b++,b===m&&d(C)}o.forEach(function(V){c(V,E)})}function uE(o,c,d){var C=0,b=o.length;function m(E){if(E&&E.length){d(E);return}var V=C;C=C+1,V<b?c(o[V],m):d([])}m([])}function JF(o){var c=[];return Object.keys(o).forEach(function(d){c.push.apply(c,o[d])}),c}var dE=function(o){HF(c,o);function c(d,C){var b;return b=o.call(this,"Async Validation Error")||this,b.errors=d,b.fields=C,b}return c}(Rx(Error));function eX(o,c,d,C){if(c.first){var b=new Promise(function(ae,xe){var Oe=function(se){return C(se),se.length?xe(new dE(se,Ix(se))):ae()},ve=JF(o);uE(ve,d,Oe)});return b.catch(function(ae){return ae}),b}var m=c.firstFields||[];m===!0&&(m=Object.keys(o));var E=Object.keys(o),V=E.length,W=0,z=[],G=new Promise(function(ae,xe){var Oe=function(ve){if(z.push.apply(z,ve),W++,W===V)return C(z),z.length?xe(new dE(z,Ix(z))):ae()};E.length||(C(z),ae()),E.forEach(function(ve){var se=o[ve];m.indexOf(ve)!==-1?uE(se,d,Oe):KF(se,d,Oe)})});return G.catch(function(ae){return ae}),G}function fE(o){return function(c){return c&&c.message?(c.field=c.field||o.fullField,c):{message:typeof c=="function"?c():c,field:c.field||o.fullField}}}function pE(o,c){if(c){for(var d in c)if(c.hasOwnProperty(d)){var C=c[d];typeof C=="object"&&typeof o[d]=="object"?o[d]=lh({},o[d],C):o[d]=C}}return o}function mE(o,c,d,C,b,m){o.required&&(!d.hasOwnProperty(o.field)||qi(c,m||o.type))&&C.push(Ns(b.messages.required,o.fullField))}function tX(o,c,d,C,b){(/^\s+$/.test(c)||c==="")&&C.push(Ns(b.messages.whitespace,o.fullField))}var Dx={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},np={integer:function(o){return np.number(o)&&parseInt(o,10)===o},float:function(o){return np.number(o)&&!np.integer(o)},array:function(o){return Array.isArray(o)},regexp:function(o){if(o instanceof RegExp)return!0;try{return!!new RegExp(o)}catch{return!1}},date:function(o){return typeof o.getTime=="function"&&typeof o.getMonth=="function"&&typeof o.getYear=="function"&&!isNaN(o.getTime())},number:function(o){return isNaN(o)?!1:typeof o=="number"},object:function(o){return typeof o=="object"&&!np.array(o)},method:function(o){return typeof o=="function"},email:function(o){return typeof o=="string"&&!!o.match(Dx.email)&&o.length<255},url:function(o){return typeof o=="string"&&!!o.match(Dx.url)},hex:function(o){return typeof o=="string"&&!!o.match(Dx.hex)}};function nX(o,c,d,C,b){if(o.required&&c===void 0){mE(o,c,d,C,b);return}var m=["integer","float","array","regexp","object","method","email","number","date","url","hex"],E=o.type;m.indexOf(E)>-1?np[E](c)||C.push(Ns(b.messages.types[E],o.fullField,o.type)):E&&typeof c!==o.type&&C.push(Ns(b.messages.types[E],o.fullField,o.type))}function iX(o,c,d,C,b){var m=typeof o.len=="number",E=typeof o.min=="number",V=typeof o.max=="number",W=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,z=c,G=null,ae=typeof c=="number",xe=typeof c=="string",Oe=Array.isArray(c);if(ae?G="number":xe?G="string":Oe&&(G="array"),!G)return!1;Oe&&(z=c.length),xe&&(z=c.replace(W,"_").length),m?z!==o.len&&C.push(Ns(b.messages[G].len,o.fullField,o.len)):E&&!V&&z<o.min?C.push(Ns(b.messages[G].min,o.fullField,o.min)):V&&!E&&z>o.max?C.push(Ns(b.messages[G].max,o.fullField,o.max)):E&&V&&(z<o.min||z>o.max)&&C.push(Ns(b.messages[G].range,o.fullField,o.min,o.max))}var Nu="enum";function rX(o,c,d,C,b){o[Nu]=Array.isArray(o[Nu])?o[Nu]:[],o[Nu].indexOf(c)===-1&&C.push(Ns(b.messages[Nu],o.fullField,o[Nu].join(", ")))}function sX(o,c,d,C,b){if(o.pattern){if(o.pattern instanceof RegExp)o.pattern.lastIndex=0,o.pattern.test(c)||C.push(Ns(b.messages.pattern.mismatch,o.fullField,c,o.pattern));else if(typeof o.pattern=="string"){var m=new RegExp(o.pattern);m.test(c)||C.push(Ns(b.messages.pattern.mismatch,o.fullField,c,o.pattern))}}}var kn={required:mE,whitespace:tX,type:nX,range:iX,enum:rX,pattern:sX};function oX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c,"string")&&!o.required)return d();kn.required(o,c,C,m,b,"string"),qi(c,"string")||(kn.type(o,c,C,m,b),kn.range(o,c,C,m,b),kn.pattern(o,c,C,m,b),o.whitespace===!0&&kn.whitespace(o,c,C,m,b))}d(m)}function aX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),c!==void 0&&kn.type(o,c,C,m,b)}d(m)}function lX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(c===""&&(c=void 0),qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),c!==void 0&&(kn.type(o,c,C,m,b),kn.range(o,c,C,m,b))}d(m)}function cX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),c!==void 0&&kn.type(o,c,C,m,b)}d(m)}function hX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),qi(c)||kn.type(o,c,C,m,b)}d(m)}function uX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),c!==void 0&&(kn.type(o,c,C,m,b),kn.range(o,c,C,m,b))}d(m)}function dX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),c!==void 0&&(kn.type(o,c,C,m,b),kn.range(o,c,C,m,b))}d(m)}function fX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(c==null&&!o.required)return d();kn.required(o,c,C,m,b,"array"),c!=null&&(kn.type(o,c,C,m,b),kn.range(o,c,C,m,b))}d(m)}function pX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),c!==void 0&&kn.type(o,c,C,m,b)}d(m)}var mX="enum";function gX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b),c!==void 0&&kn[mX](o,c,C,m,b)}d(m)}function vX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c,"string")&&!o.required)return d();kn.required(o,c,C,m,b),qi(c,"string")||kn.pattern(o,c,C,m,b)}d(m)}function yX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c,"date")&&!o.required)return d();if(kn.required(o,c,C,m,b),!qi(c,"date")){var V;c instanceof Date?V=c:V=new Date(c),kn.type(o,V,C,m,b),V&&kn.range(o,V.getTime(),C,m,b)}}d(m)}function bX(o,c,d,C,b){var m=[],E=Array.isArray(c)?"array":typeof c;kn.required(o,c,C,m,b,E),d(m)}function Nx(o,c,d,C,b){var m=o.type,E=[],V=o.required||!o.required&&C.hasOwnProperty(o.field);if(V){if(qi(c,m)&&!o.required)return d();kn.required(o,c,C,E,b,m),qi(c,m)||kn.type(o,c,C,E,b)}d(E)}function OX(o,c,d,C,b){var m=[],E=o.required||!o.required&&C.hasOwnProperty(o.field);if(E){if(qi(c)&&!o.required)return d();kn.required(o,c,C,m,b)}d(m)}var ip={string:oX,method:aX,number:lX,boolean:cX,regexp:hX,integer:uX,float:dX,array:fX,object:pX,enum:gX,pattern:vX,date:yX,url:Nx,hex:Nx,email:Nx,required:bX,any:OX};function $x(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var o=JSON.parse(JSON.stringify(this));return o.clone=this.clone,o}}}var Vx=$x();function $l(o){this.rules=null,this._messages=Vx,this.define(o)}$l.prototype={messages:function(o){return o&&(this._messages=pE($x(),o)),this._messages},define:function(o){if(!o)throw new Error("Cannot configure a schema with no rules");if(typeof o!="object"||Array.isArray(o))throw new Error("Rules must be an object");this.rules={};var c,d;for(c in o)o.hasOwnProperty(c)&&(d=o[c],this.rules[c]=Array.isArray(d)?d:[d])},validate:function(o,c,d){var C=this;c===void 0&&(c={}),d===void 0&&(d=function(){});var b=o,m=c,E=d;if(typeof m=="function"&&(E=m,m={}),!this.rules||Object.keys(this.rules).length===0)return E&&E(),Promise.resolve();function V(ve){var se,Pe=[],$t={};function mt(Ot){if(Array.isArray(Ot)){var He;Pe=(He=Pe).concat.apply(He,Ot)}else Pe.push(Ot)}for(se=0;se<ve.length;se++)mt(ve[se]);Pe.length?$t=Ix(Pe):(Pe=null,$t=null),E(Pe,$t)}if(m.messages){var W=this.messages();W===Vx&&(W=$x()),pE(W,m.messages),m.messages=W}else m.messages=this.messages();var z,G,ae={},xe=m.keys||Object.keys(this.rules);xe.forEach(function(ve){z=C.rules[ve],G=b[ve],z.forEach(function(se){var Pe=se;typeof Pe.transform=="function"&&(b===o&&(b=lh({},b)),G=b[ve]=Pe.transform(G)),typeof Pe=="function"?Pe={validator:Pe}:Pe=lh({},Pe),Pe.validator=C.getValidationMethod(Pe),Pe.field=ve,Pe.fullField=Pe.fullField||ve,Pe.type=C.getType(Pe),Pe.validator&&(ae[ve]=ae[ve]||[],ae[ve].push({rule:Pe,value:G,source:b,field:ve}))})});var Oe={};return eX(ae,m,function(ve,se){var Pe=ve.rule,$t=(Pe.type==="object"||Pe.type==="array")&&(typeof Pe.fields=="object"||typeof Pe.defaultField=="object");$t=$t&&(Pe.required||!Pe.required&&ve.value),Pe.field=ve.field;function mt(De,Ke){return lh({},Ke,{fullField:Pe.fullField+"."+De})}function Ot(De){De===void 0&&(De=[]);var Ke=De;if(Array.isArray(Ke)||(Ke=[Ke]),!m.suppressWarning&&Ke.length&&$l.warning("async-validator:",Ke),Ke.length&&Pe.message!==void 0&&(Ke=[].concat(Pe.message)),Ke=Ke.map(fE(Pe)),m.first&&Ke.length)return Oe[Pe.field]=1,se(Ke);if(!$t)se(Ke);else{if(Pe.required&&!ve.value)return Pe.message!==void 0?Ke=[].concat(Pe.message).map(fE(Pe)):m.error&&(Ke=[m.error(Pe,Ns(m.messages.required,Pe.field))]),se(Ke);var Ye={};if(Pe.defaultField)for(var zt in ve.value)ve.value.hasOwnProperty(zt)&&(Ye[zt]=Pe.defaultField);Ye=lh({},Ye,ve.rule.fields);for(var Ft in Ye)if(Ye.hasOwnProperty(Ft)){var Mt=Array.isArray(Ye[Ft])?Ye[Ft]:[Ye[Ft]];Ye[Ft]=Mt.map(mt.bind(null,Ft))}var xt=new $l(Ye);xt.messages(m.messages),ve.rule.options&&(ve.rule.options.messages=m.messages,ve.rule.options.error=m.error),xt.validate(ve.value,ve.rule.options||m,function(At){var Wt=[];Ke&&Ke.length&&Wt.push.apply(Wt,Ke),At&&At.length&&Wt.push.apply(Wt,At),se(Wt.length?Wt:null)})}}var He;Pe.asyncValidator?He=Pe.asyncValidator(Pe,ve.value,Ot,ve.source,m):Pe.validator&&(He=Pe.validator(Pe,ve.value,Ot,ve.source,m),He===!0?Ot():He===!1?Ot(Pe.message||Pe.field+" fails"):He instanceof Array?Ot(He):He instanceof Error&&Ot(He.message)),He&&He.then&&He.then(function(){return Ot()},function(De){return Ot(De)})},function(ve){V(ve)})},getType:function(o){if(o.type===void 0&&o.pattern instanceof RegExp&&(o.type="pattern"),typeof o.validator!="function"&&o.type&&!ip.hasOwnProperty(o.type))throw new Error(Ns("Unknown rule type %s",o.type));return o.type||"string"},getValidationMethod:function(o){if(typeof o.validator=="function")return o.validator;var c=Object.keys(o),d=c.indexOf("message");return d!==-1&&c.splice(d,1),c.length===1&&c[0]==="required"?ip.required:ip[this.getType(o)]||!1}},$l.register=function(o,c){if(typeof c!="function")throw new Error("Cannot register a validator by type, validator is not a function");ip[o]=c},$l.warning=qF,$l.messages=Vx,$l.validators=ip;const rp="ivu-form-item";function gE(o,c){let d=o;c=c.replace(/\[(\w+)\]/g,".$1"),c=c.replace(/^\./,"");let C=c.split("."),b=0;for(let m=C.length;b<m-1;++b){let E=C[b];if(E in d)d=d[E];else throw new Error("[View UI warn]: please transfer a valid prop path to form item!")}return{o:d,k:C[b],v:d[C[b]]}}const xX={name:"FormItem",inject:["FormInstance"],provide(){return{FormItemInstance:this}},props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0},labelFor:{type:String}},data(){return{prefixCls:rp,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:{handler(o){this.validateMessage=o,this.validateState=o?"error":""},immediate:!0},validateStatus(o){this.validateState=o},rules(){this.setRules()},required(o,c){this.isRequired=o,c&&!o&&this.resetField()}},computed:{classes(){return[`${rp}`,{[`${rp}-required`]:this.required||this.isRequired,[`${rp}-error`]:this.validateState==="error",[`${rp}-validating`]:this.validateState==="validating"}]},fieldValue(){const o=this.FormInstance.model;if(!o||!this.prop)return;let c=this.prop;return c.indexOf(":")!==-1&&(c=c.replace(/:/,".")),gE(o,c).v},labelStyles(){let o={};const c=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(c||c===0)&&(o.width=`${c}px`),o},contentStyles(){let o={};const c=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(c||c===0)&&(o.marginLeft=`${c}px`),o}},methods:{setRules(){let o=this.getRules();o.length&&this.required||(o.length?o.every(c=>{this.isRequired=c.required}):this.required&&(this.isRequired=this.required))},getRules(){let o=this.FormInstance.rules;const c=this.rules;return o=o?o[this.prop]:[],[].concat(c||o||[])},getFilteredRule(o){return this.getRules().filter(c=>!c.trigger||c.trigger.indexOf(o)!==-1)},validate(o,c=function(){}){let d=this.getFilteredRule(o);if(!d||d.length===0)if(this.required)d=[{required:!0}];else return c(),!0;this.validateState="validating";let C={};C[this.prop]=d;const b=new $l(C);let m={};m[this.prop]=this.fieldValue,b.validate(m,{firstFields:!0},E=>{this.validateState=E?"error":"success",this.validateMessage=E?E[0].message:"",c(this.validateMessage),this.FormInstance&&this.FormInstance.$emit("on-validate",this.prop,!E,this.validateMessage||null)}),this.validateDisabled=!1},resetField(){this.validateState="",this.validateMessage="";let o=this.FormInstance.model,c=this.fieldValue,d=this.prop;d.indexOf(":")!==-1&&(d=d.replace(/:/,"."));let C=gE(o,d);Array.isArray(c)&&this.initialValue!==null?(this.validateDisabled=!0,C.o[C.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,C.o[C.k]=this.initialValue)},onFieldBlur(){this.validate("blur")},onFieldChange(){if(this.validateDisabled){this.validateDisabled=!1;return}this.validate("change")},formBlur(){this.onFieldBlur()},formChange(){this.onFieldChange()}},mounted(){this.prop&&(this.FormInstance.addField(this),Object.defineProperty(this,"initialValue",{value:this.fieldValue}),this.setRules())},beforeUnmount(){this.FormInstance.removeField(this)}},wX=["for"];function _X(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[d.label||o.$slots.label?(t.openBlock(),t.createElementBlock("label",{key:0,class:t.normalizeClass([b.prefixCls+"-label"]),for:d.labelFor,style:t.normalizeStyle(m.labelStyles)},[t.renderSlot(o.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(d.label)+t.toDisplayString(m.FormInstance.colon),1)])],14,wX)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content"]),style:t.normalizeStyle(m.contentStyles)},[t.renderSlot(o.$slots,"default"),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[b.validateState==="error"&&d.showMessage&&m.FormInstance.showMessage?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-error-tip"])},t.toDisplayString(b.validateMessage),3)):t.createCommentVNode("",!0)]),_:1})],6)],2)}var iv=l(xX,[["render",_X]]),Lx={UserName:"请输入用户名！",Password:"请输入密码！",Email:"请输入邮箱！",Mobile:"请输入手机号码！",Captcha:"请输入验证码！"},sp={inject:["LoginInstance"],emits:["on-change"],props:{rules:{type:[Object,Array],default(){const o=t.getCurrentInstance().type.name;return[{required:!0,message:Lx[o],trigger:"change"}]}},value:{type:String},name:{type:String,required:!0},enterToSubmit:{type:Boolean,default:!1}},data(){return{prop:""}},methods:{handleChange(o){this.LoginInstance.formValidate[this.prop]=o,this.$emit("on-change",o)},handleEnter(){this.enterToSubmit&&this.LoginInstance.handleSubmit()},handleSetValue(){const o=this.$props;o.value&&(this.LoginInstance.formValidate[this.prop]=o.value)},handleGetProps(){let o=this.$props.name;const c={prefix:this.prefix,placeholder:this.placeholder,type:this.type,size:"large",modelValue:this.LoginInstance.formValidate[this.prop]};return o&&(c.name=o),Object.assign(c,this.$attrs)}},render(){const o=this.handleGetProps(),c=t.h(oo,{...o,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),d=t.h(iv,{prop:this.prop,rules:this.rules},()=>[c]);return t.h("div",{class:this.className},[d])},created(){const o=this.name,c=Object.assign({},this.LoginInstance.formValidate);c[o]="",this.LoginInstance.formValidate=c,this.prop=o,this.handleSetValue()}};const vE={name:"Captcha",mixins:[sp],emits:["on-get-captcha"],props:{field:{type:[String,Array]},countDown:{type:Number,default:60},text:{type:String},unitText:{type:String,default:"秒"},beforeClick:Function},data(){return{className:"ivu-login-captcha",prefix:"ios-keypad-outline",placeholder:"请输入验证码",type:"text",buttonDisabled:!1,limitCountDown:0}},methods:{handleClickCaptcha(){if(this.field){const o=typeof this.field=="string"?[this.field]:this.field;this.LoginInstance.handleValidate(o,c=>{c&&this.handleBeforeGetCaptcha()})}else this.handleBeforeGetCaptcha()},handleBeforeGetCaptcha(){if(!this.beforeClick)return this.handleGetCaptcha();const o=this.beforeClick();o&&o.then?o.then(()=>{this.handleGetCaptcha()}):this.handleGetCaptcha()},handleGetCaptcha(){this.countDown>0&&(this.buttonDisabled=!0,this.limitCountDown=this.countDown,this.handleCountDown()),this.$emit("on-get-captcha",this.LoginInstance.formValidate[this.prop],JSON.parse(JSON.stringify(this.LoginInstance.formValidate)))},handleCountDown(){this.timer=setTimeout(()=>{this.limitCountDown--,this.limitCountDown===0?(this.buttonDisabled=!1,clearTimeout(this.timer)):this.handleCountDown()},1e3)}},render(){const o=this.$attrs,c=this.handleGetProps(),d={size:"large",type:"default",long:!0,disabled:this.buttonDisabled};"size"in o&&(d.size=o.size),"button-type"in o&&(d.type=o["button-type"]);let C;this.$slots.text?C=this.$slots.text:this.limitCountDown!==0?C=()=>`${this.limitCountDown} ${this.unitText}`:this.text?C=()=>this.text:C=()=>"获取验证码";const b=t.h(Qr,{...d,onClick:this.handleClickCaptcha},C),m=t.h(oo,{...c,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),E=t.h(ia,{span:16},()=>[m]),V=t.h(ia,{span:8},()=>[b]),W=t.h(Nl,{gutter:8},()=>[E,V]),z=t.h(iv,{prop:this.prop,rules:this.rules},()=>[W]);return t.h("div",{class:this.className},[z])},beforeUnmount(){this.timer&&clearTimeout(this.timer)}},ch="ivu-card",yE=16,SX={name:"Card",mixins:[fe],components:{Icon:S},props:{bordered:{type:Boolean,default:!0},disHover:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},padding:{type:Number,default:yE},title:{type:String},icon:{type:String}},data(){return{showHead:!0,showExtra:!0}},computed:{classes(){return[`${ch}`,{[`${ch}-bordered`]:this.bordered&&!this.shadow,[`${ch}-dis-hover`]:this.disHover||this.shadow,[`${ch}-shadow`]:this.shadow}]},headClasses(){return`${ch}-head`},extraClasses(){return`${ch}-extra`},bodyClasses(){return`${ch}-body`},bodyStyles(){return this.padding!==yE?{padding:`${this.padding}px`}:""},isHrefPattern(){const{to:o}=this;return!!o},tagName(){const{isHrefPattern:o}=this;return o?"a":"div"},tagProps(){const{isHrefPattern:o}=this;if(o){const{linkUrl:c,target:d}=this;return{href:c,target:d}}else return{}}},methods:{handleClickLink(o){if(!this.isHrefPattern)return;const c=o.ctrlKey||o.metaKey;this.handleCheckClick(o,c)}},mounted(){this.showHead=this.title||this.$slots.title!==void 0,this.showExtra=this.$slots.extra!==void 0}},CX={key:0};function kX(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.resolveDynamicComponent(m.tagName),t.mergeProps({class:m.classes},m.tagProps,{onClick:m.handleClickLink}),{default:t.withCtx(()=>[b.showHead?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.headClasses)},[t.renderSlot(o.$slots,"title",{},()=>[d.title?(t.openBlock(),t.createElementBlock("p",CX,[d.icon?(t.openBlock(),t.createBlock(E,{key:0,type:d.icon},null,8,["type"])):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(d.title),1)])):t.createCommentVNode("",!0)])],2)):t.createCommentVNode("",!0),b.showExtra?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(m.extraClasses)},[t.renderSlot(o.$slots,"extra")],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(m.bodyClasses),style:t.normalizeStyle(m.bodyStyles)},[t.renderSlot(o.$slots,"default")],6)]),_:3},16,["class","onClick"])}var bE=l(SX,[["render",kX]]);const $u="ivu-carousel",TX={name:"Carousel",provide(){return{CarouselInstance:this}},components:{Icon:S},emits:["on-change","on-click","update:modelValue"],props:{arrow:{type:String,default:"hover",validator(o){return _(o,["hover","always","never"])}},autoplay:{type:Boolean,default:!1},autoplaySpeed:{type:Number,default:2e3},loop:{type:Boolean,default:!1},easing:{type:String,default:"ease"},dots:{type:String,default:"inside",validator(o){return _(o,["inside","outside","none"])}},radiusDot:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator(o){return _(o,["click","hover"])}},modelValue:{type:Number,default:0},height:{type:[String,Number],default:"auto",validator(o){return o==="auto"||Object.prototype.toString.call(o)==="[object Number]"}}},data(){return{prefixCls:$u,listWidth:0,trackWidth:0,trackOffset:0,trackCopyOffset:0,showCopyTrack:!1,slides:[],slideInstances:[],timer:null,ready:!1,currentIndex:this.modelValue,trackIndex:this.modelValue,copyTrackIndex:this.modelValue,hideTrackPos:-1,carouselItemList:[]}},computed:{classes(){return[`${$u}`]},trackStyles(){const o=this.trackIndex===-1?"hidden":"visible";return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,visibility:o}},copyTrackStyles(){return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackCopyOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,position:"absolute"}},arrowClasses(){return[`${$u}-arrow`,`${$u}-arrow-${this.arrow}`]},dotsClasses(){return[`${$u}-dots`,`${$u}-dots-${this.dots}`]}},methods:{findChild(o){this.carouselItemList.length&&this.carouselItemList.forEach(c=>{o(c.carouselItem)})},initCopyTrackDom(){t.nextTick(()=>{this.$refs.copyTrack.innerHTML=this.$refs.originTrack.innerHTML})},updateSlides(o){let c=[],d=1;this.findChild(C=>{c.push({$el:C.$el}),C.index=d++,o&&this.slideInstances.push(C)}),this.slides=c,this.updatePos()},updatePos(){this.findChild(o=>{o.width=this.listWidth,o.height=typeof this.height=="number"?`${this.height}px`:this.height}),this.trackWidth=(this.slides.length||0)*this.listWidth},slotChange(){t.nextTick(()=>{this.slides=[],this.slideInstances=[],this.updateSlides(!0,!0),this.updatePos(),this.updateOffset()})},handleResize(){this.listWidth=parseInt(R(this.$el,"width")),this.updatePos(),this.updateOffset()},updateTrackPos(o){this.showCopyTrack?this.trackIndex=o:this.copyTrackIndex=o},updateTrackIndex(o){this.showCopyTrack?this.copyTrackIndex=o:this.trackIndex=o,this.currentIndex=o},add(o){let c=this.slides.length;this.loop&&(o>0?this.hideTrackPos=-1:this.hideTrackPos=c,this.updateTrackPos(this.hideTrackPos));const d=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;let C=d+o;for(;C<0;)C+=c;(o>0&&C===c||o<0&&C===c-1)&&this.loop?(this.showCopyTrack=!this.showCopyTrack,this.trackIndex+=o,this.copyTrackIndex+=o):(this.loop||(C=C%this.slides.length),this.updateTrackIndex(C)),this.currentIndex=C===this.slides.length?0:C,this.$emit("on-change",d,this.currentIndex),this.$emit("update:modelValue",this.currentIndex)},arrowEvent(o){this.setAutoplay(),this.add(o)},dotsEvent(o,c){let d=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;const C=this.currentIndex;o===this.trigger&&d!==c&&(this.updateTrackIndex(c),this.$emit("on-change",C,this.currentIndex),this.$emit("update:modelValue",c),this.setAutoplay())},setAutoplay(){!r||(window.clearInterval(this.timer),this.autoplay&&(this.timer=window.setInterval(()=>{this.add(1)},this.autoplaySpeed)))},updateOffset(){t.nextTick(()=>{let o=this.copyTrackIndex>0?-1:1;this.trackOffset=this.trackIndex*this.listWidth,this.trackCopyOffset=this.copyTrackIndex*this.listWidth+o})},handleClick(o){this.$emit("on-click",this[o])}},watch:{autoplay(){this.setAutoplay()},autoplaySpeed(){this.setAutoplay()},trackIndex(){this.updateOffset()},copyTrackIndex(){this.updateOffset()},height(){this.updatePos()},modelValue(o){this.updateTrackIndex(o),this.setAutoplay()}},mounted(){this.updateSlides(!0),this.handleResize(),this.setAutoplay(),s(window,"resize",this.handleResize)},beforeUnmount(){a(window,"resize",this.handleResize)}},MX=["onClick","onMouseover"];function EX(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.createElementVNode("button",{type:"button",class:t.normalizeClass([m.arrowClasses,"left"]),onClick:c[0]||(c[0]=V=>m.arrowEvent(-1))},[t.createVNode(E,{type:"ios-arrow-back"})],2),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-list"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-track",b.showCopyTrack?"":"higher"]),style:t.normalizeStyle(m.trackStyles),ref:"originTrack",onClick:c[1]||(c[1]=V=>m.handleClick("currentIndex"))},[t.renderSlot(o.$slots,"default")],6),d.loop?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-track",b.showCopyTrack?"higher":""]),style:t.normalizeStyle(m.copyTrackStyles),ref:"copyTrack",onClick:c[2]||(c[2]=V=>m.handleClick("copyTrackIndex"))},null,6)):t.createCommentVNode("",!0)],2),t.createElementVNode("button",{type:"button",class:t.normalizeClass([m.arrowClasses,"right"]),onClick:c[3]||(c[3]=V=>m.arrowEvent(1))},[t.createVNode(E,{type:"ios-arrow-forward"})],2),t.createElementVNode("ul",{class:t.normalizeClass(m.dotsClasses)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.slides.length,V=>(t.openBlock(),t.createElementBlock("li",{key:V,class:t.normalizeClass([V-1===b.currentIndex?b.prefixCls+"-active":""]),onClick:W=>m.dotsEvent("click",V-1),onMouseover:W=>m.dotsEvent("hover",V-1)},[t.createElementVNode("button",{type:"button",class:t.normalizeClass([d.radiusDot?"radius":""])},null,2)],42,MX))),128))],2)],2)}var OE=l(TX,[["render",EX]]);const PX="ivu-carousel-item",AX={componentName:"carousel-item",name:"CarouselItem",inject:["CarouselInstance"],data(){return{prefixCls:PX,width:0,height:"auto",left:0,id:te(6)}},computed:{styles(){return{width:`${this.width}px`,height:`${this.height}`,left:`${this.left}px`}}},watch:{width(o){o&&this.CarouselInstance.loop&&t.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})},height(o){o&&this.CarouselInstance.loop&&t.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})}},methods:{addInstance(){const o=this.CarouselInstance;o.carouselItemList||(o.carouselItemList=[]),o.carouselItemList.push({id:this.id,carouselItem:this})},removeInstance(){const o=this.CarouselInstance;if(!o.carouselItemList)return;const c=o.carouselItemList.findIndex(d=>d.id===this.id);o.carouselItemList.splice(c,1)}},mounted(){this.addInstance(),this.CarouselInstance.slotChange()},beforeUnmount(){this.removeInstance(),this.CarouselInstance.slotChange()}};function RX(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(b.prefixCls),style:t.normalizeStyle(m.styles)},[t.renderSlot(o.$slots,"default")],6)}var xE=l(AX,[["render",RX]]);const IX={name:"Casitem",components:{Icon:S},mixins:[Po],props:{data:Object,prefixCls:String,tmpItem:Object},computed:{classes(){return[`${this.prefixCls}-menu-item`,{[`${this.prefixCls}-menu-item-active`]:this.tmpItem.value===this.data.value,[`${this.prefixCls}-menu-item-disabled`]:this.data.disabled}]},showArrow(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},arrowType(){const o=this.globalConfig;let c="ios-arrow-forward";return o&&(o.cascader.customItemArrow?c="":o.cascader.itemArrow&&(c=o.cascader.itemArrow)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.cascader.customItemArrow&&(c=o.cascader.customItemArrow),c},arrowSize(){const o=this.globalConfig;let c="";return o&&o.cascader.itemArrowSize&&(c=o.cascader.itemArrowSize),c}}},DX={key:1,class:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"};function NX(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.classes)},[t.createTextVNode(t.toDisplayString(d.data.label)+" ",1),m.showArrow?(t.openBlock(),t.createBlock(E,{key:0,type:m.arrowType,custom:m.customArrowType,size:m.arrowSize},null,8,["type","custom","size"])):t.createCommentVNode("",!0),m.showLoading?(t.openBlock(),t.createElementBlock("i",DX)):t.createCommentVNode("",!0)],2)}var $X=l(IX,[["render",NX]]);let VX=1;const LX={name:"Caspanel",components:{Casitem:$X},inject:["CascaderInstance"],provide(){return{CaspanelInstance:this}},props:{data:{type:Array,default(){return[]}},disabled:Boolean,changeOnSelect:Boolean,trigger:String,prefixCls:String},data(){return{tmpItem:{},result:[],sublist:[],id:te(6),childCaspanelList:[]}},watch:{data(){this.sublist=[]}},methods:{handleClickItem(o){this.trigger!=="click"&&o.children&&o.children.length||this.handleTriggerItem(o,!1,!0)},handleHoverItem(o){this.trigger!=="hover"||!o.children||!o.children.length||this.handleTriggerItem(o,!1,!0)},handleTriggerItem(o,c=!1,d=!1){if(o.disabled)return;const C=$(this,"Cascader");if(o.loading!==void 0&&!o.children.length&&C&&C.loadData){C.loadData(o,()=>{d&&(C.isLoadedChildren=!0),o.children.length&&this.handleTriggerItem(o)});return}const b=this.getBaseItem(o);(this.changeOnSelect||b.label!==this.tmpItem.label||b.value!==this.tmpItem.value||b.label===this.tmpItem.label&&b.value===this.tmpItem.value)&&(this.tmpItem=b,this.emitUpdate([b])),o.children&&o.children.length?(this.sublist=o.children,this.CascaderInstance.handleOnResultChange({lastValue:!1,changeOnSelect:this.changeOnSelect,fromInit:c}),this.changeOnSelect&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)):(this.sublist=[],this.CascaderInstance.handleOnResultChange({lastValue:!0,changeOnSelect:this.changeOnSelect,fromInit:c})),C&&C.$refs.drop.update()},updateResult(o){this.result=[this.tmpItem].concat(o),this.emitUpdate(this.result)},getBaseItem(o){let c=Object.assign({},o);return c.children&&delete c.children,c},emitUpdate(o){this.$parent.$options.name==="Caspanel"?this.$parent.updateResult(o):this.CascaderInstance.updateResult(o)},getKey(){return VX++},handleOnFindSelected(o){let c=[...o.value];for(let d=0;d<c.length;d++)for(let C=0;C<this.data.length;C++)if(c[d]===this.data[C].value)return this.handleTriggerItem(this.data[C],!0),c.splice(0,1),t.nextTick(()=>{this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnFindSelected({value:c})}),!1},handleOnClear(o=!1){this.sublist=[],this.tmpItem={},o&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)},addCaspanel(){const o=this.CascaderInstance;o.caspanelList||(o.caspanelList=[]),o.caspanelList.push({id:this.id,caspanel:this});const c=$(this,"Caspanel");c&&(c.childCaspanelList||(c.childCaspanelList=[]),c.childCaspanelList.push({id:this.id,caspanel:this}))},removeCaspanel(){const o=this.CascaderInstance;if(o.caspanelList&&o.caspanelList.length){const d=o.caspanelList.findIndex(C=>C.id===this.id);o.caspanelList.splice(d,1)}const c=$(this,"Caspanel");if(c&&c.childCaspanelList&&c.childCaspanelList.length){const d=c.childCaspanelList.findIndex(C=>C.id===this.id);c.childCaspanelList.splice(d,1)}}},mounted(){this.addCaspanel()},beforeUnmount(){this.removeCaspanel()}};function BX(o,c,d,C,b,m){const E=t.resolveComponent("Casitem"),V=t.resolveComponent("Caspanel",!0);return t.openBlock(),t.createElementBlock("span",null,[d.data&&d.data.length?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass([d.prefixCls+"-menu"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.data,(W,z)=>(t.openBlock(),t.createBlock(E,{key:z,"prefix-cls":d.prefixCls,data:W,"tmp-item":b.tmpItem,onClick:t.withModifiers(G=>m.handleClickItem(W),["stop"]),onMouseenter:t.withModifiers(G=>m.handleHoverItem(W),["stop"])},null,8,["prefix-cls","data","tmp-item","onClick","onMouseenter"]))),128))],2)):t.createCommentVNode("",!0),b.sublist&&b.sublist.length?(t.openBlock(),t.createBlock(V,{key:1,"prefix-cls":d.prefixCls,data:b.sublist,disabled:d.disabled,trigger:d.trigger,"change-on-select":d.changeOnSelect},null,8,["prefix-cls","data","disabled","trigger","change-on-select"])):t.createCommentVNode("",!0)])}var UX=l(LX,[["render",BX]]),Bx={beforeMount(o,c,d){function C(b){if(o.contains(b.target))return!1;c.value(b)}o.__vueClickOutside__=C,r&&document.addEventListener("click",C)},unmounted(o,c){r&&document.removeEventListener("click",o.__vueClickOutside__),delete o.__vueClickOutside__}};const Vl="ivu-cascader",zX="ivu-select",FX={name:"Cascader",mixins:[Qn,un,Po],components:{iInput:oo,Drop:Ge,Icon:S,Caspanel:UX},directives:{clickOutside:Bx},emits:["on-change","on-visible-change","update:modelValue"],provide(){return{CascaderInstance:this}},props:{data:{type:Array,default(){return[]}},modelValue:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},trigger:{validator(o){return _(o,["click","hover"])},default:"click"},changeOnSelect:{type:Boolean,default:!1},renderFormat:{type:Function,default(o){return o.join(" / ")}},loadData:{type:Function},filterable:{type:Boolean,default:!1},notFoundText:{type:String},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},capture:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return o.$VIEWUI?o.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:Vl,selectPrefixCls:zX,visible:!1,selected:[],tmpSelected:[],updatingValue:!1,currentValue:this.modelValue||[],query:"",validDataStr:"",isLoadedChildren:!1,isValueNull:!1,caspanelList:[]}},computed:{classes(){return[`${Vl}`,{[`${Vl}-show-clear`]:this.showCloseIcon,[`${Vl}-size-${this.size}`]:!!this.size,[`${Vl}-visible`]:this.visible,[`${Vl}-disabled`]:this.itemDisabled,[`${Vl}-not-found`]:this.filterable&&this.query!==""&&!this.querySelections.length}]},showCloseIcon(){return this.currentValue&&this.currentValue.length&&this.clearable&&!this.itemDisabled},displayRender(){let o=[];for(let c=0;c<this.selected.length;c++)o.push(this.selected[c].label);return this.renderFormat(o,this.selected)},displayInputRender(){return this.filterable?"":this.displayRender},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},inputPlaceholder(){return this.filterable&&this.currentValue.length?null:this.localePlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.select.noMatch"):this.notFoundText},querySelections(){let o=[];function c(d,C,b){const m=L(d);for(let E=0;E<m.length;E++){let V=m[E];V.__label=C?C+" / "+V.label:V.label,V.__value=b?b+","+V.value:V.value,V.children&&V.children.length?(c(V.children,V.__label,V.__value),delete V.__label,delete V.__value):o.push({label:V.__label,value:V.__value,display:V.__label,item:V,disabled:!!V.disabled})}}return c(this.data),o=o.filter(d=>d.label?d.label.indexOf(this.query)>-1:!1).map(d=>(d.display=d.display.replace(new RegExp(this.query,"g"),`<span>${this.query}</span>`),d)),o},arrowType(){const o=this.globalConfig;let c="ios-arrow-down";return o&&(o.cascader.customArrow?c="":o.cascader.arrow&&(c=o.cascader.arrow)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.cascader.customArrow&&(c=o.cascader.customArrow),c},arrowSize(){const o=this.globalConfig;let c="";return o&&o.cascader.arrowSize&&(c=o.cascader.arrowSize),c},dropdownCls(){return{[Vl+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{clearSelect(){if(this.itemDisabled)return!1;const o=JSON.stringify(this.currentValue);this.currentValue=this.selected=this.tmpSelected=[],this.handleClose(),this.emitValue(this.currentValue,o),this.caspanelList.forEach(c=>{c.caspanel.handleOnClear()})},handleClose(){this.visible=!1},toggleOpen(){if(this.itemDisabled)return!1;this.visible?this.filterable||this.handleClose():this.onFocus()},onFocus(){this.visible=!0,this.currentValue.length||this.caspanelList.forEach(o=>{o.caspanel.handleOnClear()})},updateResult(o){this.tmpSelected=o},updateSelected(o=!1,c=!1){(!this.changeOnSelect||o||c)&&this.caspanelList.forEach(d=>{d.caspanel.handleOnFindSelected({value:this.currentValue})})},emitValue(o,c){JSON.stringify(o)!==c&&(this.$emit("on-change",this.currentValue,JSON.parse(JSON.stringify(this.selected))),t.nextTick(()=>{this.handleFormItemChange("change",{value:this.currentValue,selected:JSON.parse(JSON.stringify(this.selected))})}))},handleInput(o){this.query=o.target.value},handleSelectItem(o){const c=this.querySelections[o];if(c.item.disabled)return!1;this.query="",this.$refs.input.currentValue="";const d=JSON.stringify(this.currentValue);this.currentValue=c.value.split(","),setTimeout(()=>{this.emitValue(this.currentValue,d),this.handleClose()},0)},handleFocus(){this.$refs.input.focus()},getValidData(o){const c=L(o);function d(C){const b=Object.assign({},C);return"loading"in b&&delete b.loading,"__value"in b&&delete b.__value,"__label"in b&&delete b.__label,"children"in b&&b.children.length&&(b.children=b.children.map(m=>d(m))),b}return c.map(C=>d(C))},handleOnResultChange(o){const c=o.lastValue,d=o.changeOnSelect,C=o.fromInit;if(c||d){const b=JSON.stringify(this.currentValue);this.selected=this.tmpSelected;let m=[];this.selected.forEach(E=>{m.push(E.value)}),C||(this.updatingValue=!0,this.currentValue=m,this.emitValue(this.currentValue,b))}c&&!C&&this.handleClose()}},created(){this.validDataStr=JSON.stringify(this.getValidData(this.data))},mounted(){this.updateSelected(!0)},watch:{visible(o){o?(this.currentValue.length&&this.updateSelected(),this.transfer&&this.$refs.drop.update(),this.$refs.drop.handleOnUpdatePopper()):(this.filterable&&(this.query="",this.$refs.input.currentValue=""),this.transfer&&this.$refs.drop.destroy(),this.$refs.drop.handleOnDestroyPopper()),this.$emit("on-visible-change",o)},modelValue(o){o===null&&(this.isValueNull=!0),this.currentValue=o||[],(o===null||!o.length)&&(this.selected=[])},currentValue(){if(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",this.currentValue),this.updatingValue){this.updatingValue=!1;return}this.updateSelected(!0)},data:{deep:!0,handler(){const o=JSON.stringify(this.getValidData(this.data));o!==this.validDataStr&&(this.validDataStr=o,this.isLoadedChildren||t.nextTick(()=>this.updateSelected(!1,this.changeOnSelect)),this.isLoadedChildren=!1)}}}},XX=["name","value"],WX=["onClick","innerHTML"];function QX(o,c,d,C,b,m){const E=t.resolveComponent("i-input"),V=t.resolveComponent("Icon"),W=t.resolveComponent("Caspanel"),z=t.resolveComponent("Drop"),G=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-rel"]),onClick:c[1]||(c[1]=(...ae)=>m.toggleOpen&&m.toggleOpen(...ae)),ref:"reference"},[t.createElementVNode("input",{type:"hidden",name:d.name,value:b.currentValue},null,8,XX),t.renderSlot(o.$slots,"default",{},()=>[t.createVNode(E,{"element-id":d.elementId,ref:"input",readonly:!d.filterable,disabled:o.itemDisabled,modelValue:m.displayInputRender,onOnChange:m.handleInput,size:d.size,placeholder:m.inputPlaceholder},null,8,["element-id","readonly","disabled","modelValue","onOnChange","size","placeholder"]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-label"]),onClick:c[0]||(c[0]=(...ae)=>m.handleFocus&&m.handleFocus(...ae))},t.toDisplayString(m.displayRender),3),[[t.vShow,d.filterable&&b.query===""]]),t.withDirectives(t.createVNode(V,{type:"ios-close-circle",class:t.normalizeClass([b.prefixCls+"-arrow"]),onClick:t.withModifiers(m.clearSelect,["stop"])},null,8,["class","onClick"]),[[t.vShow,m.showCloseIcon]]),t.createVNode(V,{type:m.arrowType,custom:m.customArrowType,size:m.arrowSize,class:t.normalizeClass([b.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])])],2),t.createVNode(z,{ref:"drop",visible:b.visible,classes:m.dropdownCls,eventsEnabled:d.eventsEnabled,"transition-name":"transition-drop",transfer:d.transfer},{default:t.withCtx(()=>[t.createElementVNode("div",null,[t.withDirectives(t.createVNode(W,{ref:"caspanel","prefix-cls":b.prefixCls,data:d.data,disabled:o.itemDisabled,"change-on-select":d.changeOnSelect,trigger:d.trigger},null,8,["prefix-cls","data","disabled","change-on-select","trigger"]),[[t.vShow,!d.filterable||d.filterable&&b.query===""]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-dropdown"])},[t.createElementVNode("ul",{class:t.normalizeClass([b.selectPrefixCls+"-dropdown-list"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.querySelections,(ae,xe)=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([b.selectPrefixCls+"-item",{[b.selectPrefixCls+"-item-disabled"]:ae.disabled}]),key:xe,onClick:Oe=>m.handleSelectItem(xe),innerHTML:ae.display},null,10,WX))),128))],2)],2),[[t.vShow,d.filterable&&b.query!==""&&m.querySelections.length]]),t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls+"-not-found-tip"])},[t.createElementVNode("li",null,t.toDisplayString(m.localeNotFoundText),1)],2),[[t.vShow,d.filterable&&b.query!==""&&!m.querySelections.length||!d.data.length]])])]),_:1},8,["visible","classes","eventsEnabled","transfer"])],2)),[[G,m.handleClose]])}var wE=l(FX,[["render",QX]]);const HX={name:"CellItem",props:{title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""}}},GX={class:"ivu-cell-item"},YX={class:"ivu-cell-icon"},jX={class:"ivu-cell-main"},qX={class:"ivu-cell-title"},ZX={class:"ivu-cell-label"},KX={class:"ivu-cell-footer"},JX={class:"ivu-cell-extra"};function eW(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",GX,[t.createElementVNode("div",YX,[t.renderSlot(o.$slots,"icon")]),t.createElementVNode("div",jX,[t.createElementVNode("div",qX,[t.renderSlot(o.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])]),t.createElementVNode("div",ZX,[t.renderSlot(o.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(d.label),1)])])]),t.createElementVNode("div",KX,[t.createElementVNode("span",JX,[t.renderSlot(o.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(d.extra),1)])])])])}var tW=l(HX,[["render",eW]]);const op="ivu-cell",nW={name:"Cell",inject:["CellGroupInstance"],mixins:[fe,Po],components:{CellItem:tW,Icon:S},props:{name:{type:[String,Number]},title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},data(){return{prefixCls:op}},computed:{classes(){return[`${op}`,{[`${op}-disabled`]:this.disabled,[`${op}-selected`]:this.selected,[`${op}-with-link`]:this.to}]},arrowType(){const o=this.globalConfig;let c="ios-arrow-forward";return o&&(o.cell.customArrow?c="":o.cell.arrow&&(c=o.cell.arrow)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.cell.customArrow&&(c=o.cell.customArrow),c},arrowSize(){const o=this.globalConfig;let c="";return o&&o.cell.arrowSize&&(c=o.cell.arrowSize),c}},methods:{handleClickItem(o,c){this.CellGroupInstance.handleClick(this.name),this.handleCheckClick(o,c)}}},iW=["href","target"],rW={key:2,class:"ivu-cell-arrow"};function sW(o,c,d,C,b,m){const E=t.resolveComponent("CellItem"),V=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[o.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:o.linkUrl,target:o.target,class:"ivu-cell-link",onClick:[c[0]||(c[0]=t.withModifiers(W=>m.handleClickItem(W,!1),["exact"])),c[1]||(c[1]=t.withModifiers(W=>m.handleClickItem(W,!0),["ctrl"])),c[2]||(c[2]=t.withModifiers(W=>m.handleClickItem(W,!0),["meta"]))]},[t.createVNode(E,{title:d.title,label:d.label,extra:d.extra},{icon:t.withCtx(()=>[t.renderSlot(o.$slots,"icon")]),default:t.withCtx(()=>[t.renderSlot(o.$slots,"default")]),extra:t.withCtx(()=>[t.renderSlot(o.$slots,"extra")]),label:t.withCtx(()=>[t.renderSlot(o.$slots,"label")]),_:3},8,["title","label","extra"])],8,iW)):(t.openBlock(),t.createElementBlock("div",{key:1,class:"ivu-cell-link",onClick:c[3]||(c[3]=(...W)=>m.handleClickItem&&m.handleClickItem(...W))},[t.createVNode(E,{title:d.title,label:d.label,extra:d.extra},{icon:t.withCtx(()=>[t.renderSlot(o.$slots,"icon")]),default:t.withCtx(()=>[t.renderSlot(o.$slots,"default")]),extra:t.withCtx(()=>[t.renderSlot(o.$slots,"extra")]),label:t.withCtx(()=>[t.renderSlot(o.$slots,"label")]),_:3},8,["title","label","extra"])])),o.to?(t.openBlock(),t.createElementBlock("div",rW,[t.renderSlot(o.$slots,"arrow",{},()=>[t.createVNode(V,{type:m.arrowType,custom:m.customArrowType,size:m.arrowSize},null,8,["type","custom","size"])])])):t.createCommentVNode("",!0)],2)}var _E=l(nW,[["render",sW]]);const oW={name:"CellGroup",emits:["on-click"],provide(){return{CellGroupInstance:this}},methods:{handleClick(o){this.$emit("on-click",o)}}},aW={class:"ivu-cell-group"};function lW(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",aW,[t.renderSlot(o.$slots,"default")])}var SE=l(oW,[["render",lW]]);const $s="ivu-checkbox",cW={name:"Checkbox",mixins:[un],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[`${$s}-wrapper`,{[`${$s}-group-item`]:this.group,[`${$s}-wrapper-checked`]:this.currentValue,[`${$s}-wrapper-disabled`]:this.itemDisabled,[`${$s}-${this.size}`]:!!this.size,[`${$s}-border`]:this.border}]},checkboxClasses(){return[`${$s}`,{[`${$s}-checked`]:this.currentValue,[`${$s}-disabled`]:this.itemDisabled,[`${$s}-indeterminate`]:this.indeterminate}]},innerClasses(){return[`${$s}-inner`,{[`${$s}-focus`]:this.focusInner}]},inputClasses(){return`${$s}-input`},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=this.$slots.default!==void 0)},methods:{change(o){if(this.itemDisabled)return!1;const c=o.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",c),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",c),this.handleFormItemChange("change",c))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(o){if(!(o===this.trueValue||o===this.falseValue))throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(o){this.model=o||[]},immediate:!0}}},hW=["disabled","value","name"],uW=["disabled","checked","name"],dW={key:0,class:"ivu-checkbox-label-text"};function fW(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("label",{class:t.normalizeClass(m.wrapClasses)},[t.createElementVNode("span",{class:t.normalizeClass(m.checkboxClasses)},[t.createElementVNode("span",{class:t.normalizeClass(m.innerClasses)},null,2),m.group?t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:0,type:"checkbox",class:t.normalizeClass(m.inputClasses),disabled:o.itemDisabled,value:d.label,"onUpdate:modelValue":c[0]||(c[0]=E=>b.model=E),name:d.name,onChange:c[1]||(c[1]=(...E)=>m.change&&m.change(...E)),onFocus:c[2]||(c[2]=(...E)=>m.onFocus&&m.onFocus(...E)),onBlur:c[3]||(c[3]=(...E)=>m.onBlur&&m.onBlur(...E))},null,42,hW)),[[t.vModelCheckbox,b.model]]):(t.openBlock(),t.createElementBlock("input",{key:1,type:"checkbox",class:t.normalizeClass(m.inputClasses),disabled:o.itemDisabled,checked:m.currentValue,name:d.name,onChange:c[4]||(c[4]=(...E)=>m.change&&m.change(...E)),onFocus:c[5]||(c[5]=(...E)=>m.onFocus&&m.onFocus(...E)),onBlur:c[6]||(c[6]=(...E)=>m.onBlur&&m.onBlur(...E))},null,42,uW))],2),b.showSlot?(t.openBlock(),t.createElementBlock("span",dW,[t.renderSlot(o.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(d.label),1)])])):t.createCommentVNode("",!0)],2)}var Vu=l(cW,[["render",fW]]);const pW="ivu-checkbox-group",mW={name:"CheckboxGroup",mixins:[un],emits:["update:modelValue","on-change"],provide(){return{CheckboxGroupInstance:this}},props:{modelValue:{type:Array,default(){return[]}},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}}},data(){return{currentValue:this.modelValue||[],children:[]}},computed:{classes(){return[`${pW}`,{[`ivu-checkbox-${this.size}`]:!!this.size}]}},methods:{change(o){this.currentValue=o,this.$emit("update:modelValue",o),this.$emit("on-change",o),this.handleFormItemChange("change",o)}}};function gW(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.renderSlot(o.$slots,"default")],2)}var Ux=l(mW,[["render",gW]]);const CE="ivu-chart-circle",vW={name:"iCircle",props:{percent:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:6},strokeColor:{type:[String,Array],default:"#2d8cf0"},strokeLinecap:{validator(o){return _(o,["square","round"])},default:"round"},trailWidth:{type:Number,default:5},trailColor:{type:String,default:"#eaeef2"},dashboard:{type:Boolean,default:!1}},data(){return{id:`ivu-chart-circle-${te(3)}`}},computed:{circleSize(){return{width:`${this.size}px`,height:`${this.size}px`}},computedStrokeWidth(){return this.percent===0&&this.dashboard?0:this.strokeWidth},radius(){return 50-this.strokeWidth/2},pathString(){return this.dashboard?`M 50,50 m 0,${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}`:`M 50,50 m 0,-${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}`},len(){return Math.PI*2*this.radius},trailStyle(){let o={};return this.dashboard&&(o={"stroke-dasharray":`${this.len-75}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}),o},pathStyle(){let o={};return this.dashboard?o={"stroke-dasharray":`${this.percent/100*(this.len-75)}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .6s ease 0s, stroke .6s, stroke-width .06s ease .6s"}:o={"stroke-dasharray":`${this.len}px ${this.len}px`,"stroke-dashoffset":`${(100-this.percent)/100*this.len}px`,transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"},o},wrapClasses(){return`${CE}`},innerClasses(){return`${CE}-inner`},strokeValue(){let o=this.strokeColor;return typeof this.strokeColor!="string"&&(o=`url(#${this.id})`),o},showDefs(){return typeof this.strokeColor!="string"}}},yW={viewBox:"0 0 100 100"},bW={key:0},OW=["id"],xW=["stop-color"],wW=["stop-color"],_W=["d","stroke","stroke-width","stroke-linecap"],SW=["d","stroke-linecap","stroke","stroke-width"];function CW(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{style:t.normalizeStyle(m.circleSize),class:t.normalizeClass(m.wrapClasses)},[(t.openBlock(),t.createElementBlock("svg",yW,[m.showDefs?(t.openBlock(),t.createElementBlock("defs",bW,[t.createElementVNode("linearGradient",{id:b.id,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[t.createElementVNode("stop",{offset:"0%","stop-color":d.strokeColor[0]},null,8,xW),t.createElementVNode("stop",{offset:"100%","stop-color":d.strokeColor[1]},null,8,wW)],8,OW)])):t.createCommentVNode("",!0),t.createElementVNode("path",{d:m.pathString,stroke:d.trailColor,"stroke-width":d.trailWidth,"fill-opacity":0,style:t.normalizeStyle(m.trailStyle),"stroke-linecap":d.strokeLinecap},null,12,_W),t.createElementVNode("path",{d:m.pathString,"stroke-linecap":d.strokeLinecap,stroke:m.strokeValue,"stroke-width":m.computedStrokeWidth,"fill-opacity":"0",style:t.normalizeStyle(m.pathStyle)},null,12,SW)])),t.createElementVNode("div",{class:t.normalizeClass(m.innerClasses)},[t.renderSlot(o.$slots,"default")],2)],6)}var rv=l(vW,[["render",CW]]);const sv="ivu-dropdown",kW={name:"Dropdown",directives:{clickOutside:Bx},components:{Drop:Ge},emits:["on-visible-change","on-clickoutside","on-click","on-hover-click","on-haschild-click"],props:{trigger:{validator(o){return _(o,["click","hover","custom","contextMenu"])},default:"hover"},placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},visible:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},transferClassName:{type:String},stopPropagation:{type:Boolean,default:!1},capture:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return o.$VIEWUI?o.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1},boundariesElement:{default:"window"}},computed:{transition(){return["bottom-start","bottom","bottom-end"].indexOf(this.placement)>-1?"slide-up":"fade"},dropdownCls(){return{[sv+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}},relClasses(){return[`${sv}-rel`,{[`${sv}-rel-user-select-none`]:this.trigger==="contextMenu"}]}},data(){return{prefixCls:sv,currentVisible:this.visible,timeout:null}},watch:{visible(o){this.currentVisible=o},currentVisible(o){o?this.$refs.drop.update():this.$refs.drop.destroy(),this.$emit("on-visible-change",o)}},methods:{handleClick(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.hasParent()||(this.currentVisible=!this.currentVisible)},handleRightClick(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!this.currentVisible},handleMouseenter(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!0},250)},handleMouseleave(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!1},150))},onClickoutside(o){this.handleClose(),this.handleRightClose(),this.currentVisible&&this.$emit("on-clickoutside",o)},handleClose(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.currentVisible=!1},handleRightClose(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!1},hasParent(){return $(this,"Dropdown")||!1},handleHaschildClick(){t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!0});const o=this.hasParent();o&&o.handleHaschildClick()},handleItemClick(o){if(this.stopPropagation)return;const c=this.hasParent();c?c.handleItemClick(o):this.$emit("on-click",o)},handleHoverClick(){const o=this.hasParent();o?(t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1}),o.handleHoverClick()):t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1})}}};function TW(o,c,d,C,b,m){const E=t.resolveComponent("Drop"),V=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls]),onMouseenter:c[2]||(c[2]=(...W)=>m.handleMouseenter&&m.handleMouseenter(...W)),onMouseleave:c[3]||(c[3]=(...W)=>m.handleMouseleave&&m.handleMouseleave(...W))},[t.createElementVNode("div",{class:t.normalizeClass(m.relClasses),ref:"reference",onClick:c[0]||(c[0]=(...W)=>m.handleClick&&m.handleClick(...W)),onContextmenu:c[1]||(c[1]=t.withModifiers((...W)=>m.handleRightClick&&m.handleRightClick(...W),["prevent"]))},[t.renderSlot(o.$slots,"default")],34),t.createVNode(E,{ref:"drop",visible:b.currentVisible,classes:m.dropdownCls,placement:d.placement,eventsEnabled:d.eventsEnabled,boundariesElement:d.boundariesElement,transfer:d.transfer,"transition-name":"transition-drop",onMouseenter:m.handleMouseenter,onMouseleave:m.handleMouseleave},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"list")]),_:3},8,["visible","classes","placement","eventsEnabled","boundariesElement","transfer","onMouseenter","onMouseleave"])],34)),[[V,m.onClickoutside]])}var hh=l(kW,[["render",TW]]);const MW={name:"DropdownMenu"},EW={class:"ivu-dropdown-menu"};function PW(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("ul",EW,[t.renderSlot(o.$slots,"default")])}var uh=l(MW,[["render",PW]]);const ao="ivu-tag",Ba=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],AW=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],RW={name:"Tag",components:{Icon:S},emits:["on-change","on-close"],props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(o){return _(o,["border","dot"])}},name:{type:[String,Number]},size:{validator(o){return _(o,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[`${ao}`,`${ao}-size-${this.size}`,{[`${ao}-${this.color}`]:!!this.color&&_(this.color,Ba),[`${ao}-${this.type}`]:!!this.type,[`${ao}-closable`]:this.closable,[`${ao}-checked`]:this.isChecked,[`${ao}-checkable`]:this.checkable}]},wraperStyles(){return _(this.color,Ba)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:this.type!=="dot"&&this.type!=="border"&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[`${ao}-text`,this.type==="border"&&_(this.color,Ba)?`${ao}-color-${this.color}`:"",this.type!=="dot"&&this.type!=="border"&&this.color!=="default"&&this.isChecked&&AW.indexOf(this.color)<0?`${ao}-color-white`:""]},dotClasses(){return`${ao}-dot-inner`},iconClass(){return this.type==="dot"?"":this.type==="border"?_(this.color,Ba)?`${ao}-color-${this.color}`:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&this.type==="dot"},lineColor(){return this.type==="dot"?"":this.type==="border"?this.color!==void 0?_(this.color,Ba)?"":this.color:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},borderColor(){return this.color!==void 0?this.color==="default"?"":this.color:""},dotColor(){return this.color!==void 0?_(this.color,Ba)?"":this.color:""},textColorStyle(){return _(this.color,Ba)?{}:this.type!=="dot"&&this.type!=="border"?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return _(this.color,Ba)?{}:{background:this.dotColor}},defaultTypeColor(){return this.type!=="dot"&&this.type!=="border"&&this.color!==void 0?_(this.color,Ba)?"":this.color:""}},methods:{close(o){this.name===void 0?this.$emit("on-close",o):this.$emit("on-close",o,this.name)},check(){if(!this.checkable)return;const o=!this.isChecked;this.isChecked=o,this.name===void 0?this.$emit("on-change",o):this.$emit("on-change",o,this.name)}},watch:{checked(o){this.isChecked=o}}};function IW(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),onClick:c[0]||(c[0]=t.withModifiers((...V)=>m.check&&m.check(...V),["stop"])),style:t.normalizeStyle(m.wraperStyles)},[m.showDot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(m.dotClasses),style:t.normalizeStyle(m.bgColorStyle)},null,6)):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(m.textClasses),style:t.normalizeStyle(m.textColorStyle)},[t.renderSlot(o.$slots,"default")],6),d.closable?(t.openBlock(),t.createBlock(E,{key:1,class:t.normalizeClass(m.iconClass),color:m.lineColor,type:"ios-close",onClick:t.withModifiers(m.close,["stop"])},null,8,["class","color","onClick"])):t.createCommentVNode("",!0)],6)}var Lu=l(RW,[["render",IW]]),kE={11e4:{l:"Z1",n:"北京",c:"110000",p:"86"},12e4:{l:"Z1",n:"天津",c:"120000",p:"86"},13e4:{l:"H",n:"河北",c:"130000",p:"86"},14e4:{l:"S",n:"山西",c:"140000",p:"86"},15e4:{l:"N",n:"内蒙古",c:"150000",p:"86"},21e4:{l:"L",n:"辽宁",c:"210000",p:"86"},22e4:{l:"J",n:"吉林",c:"220000",p:"86"},23e4:{l:"H",n:"黑龙江",c:"230000",p:"86"},31e4:{l:"Z1",n:"上海",c:"310000",p:"86"},32e4:{l:"J",n:"江苏",c:"320000",p:"86"},33e4:{l:"Z",n:"浙江",c:"330000",p:"86"},34e4:{l:"A",n:"安徽",c:"340000",p:"86"},35e4:{l:"F",n:"福建",c:"350000",p:"86"},36e4:{l:"J",n:"江西",c:"360000",p:"86"},37e4:{l:"S",n:"山东",c:"370000",p:"86"},41e4:{l:"H",n:"河南",c:"410000",p:"86"},42e4:{l:"H",n:"湖北",c:"420000",p:"86"},43e4:{l:"H",n:"湖南",c:"430000",p:"86"},44e4:{l:"G",n:"广东",c:"440000",p:"86"},45e4:{l:"G",n:"广西",c:"450000",p:"86"},46e4:{l:"H",n:"海南",c:"460000",p:"86"},5e5:{l:"Z1",n:"重庆",c:"500000",p:"86"},51e4:{l:"S",n:"四川",c:"510000",p:"86"},52e4:{l:"G",n:"贵州",c:"520000",p:"86"},53e4:{l:"Y",n:"云南",c:"530000",p:"86"},54e4:{l:"X",n:"西藏",c:"540000",p:"86"},61e4:{l:"S",n:"陕西",c:"610000",p:"86"},62e4:{l:"G",n:"甘肃",c:"620000",p:"86"},63e4:{l:"Q",n:"青海",c:"630000",p:"86"},64e4:{l:"N",n:"宁夏",c:"640000",p:"86"},65e4:{l:"X",n:"新疆",c:"650000",p:"86"},71e4:{l:"T",n:"台湾",c:"710000",p:"86"},81e4:{l:"Z2",n:"香港",c:"810000",p:"86"},82e4:{l:"Z2",n:"澳门",c:"820000",p:"86"}},Bu={11e4:{l:"B",n:"北京市",c:"110000",p:"86"},12e4:{l:"T",n:"天津市",c:"120000",p:"86"},130100:{l:"S",n:"石家庄市",c:"130100",p:"130000"},130200:{l:"T",n:"唐山市",c:"130200",p:"130000"},130300:{l:"Q",n:"秦皇岛市",c:"130300",p:"130000"},130400:{l:"H",n:"邯郸市",c:"130400",p:"130000"},130500:{l:"X",n:"邢台市",c:"130500",p:"130000"},130600:{l:"B",n:"保定市",c:"130600",p:"130000"},130700:{l:"Z",n:"张家口市",c:"130700",p:"130000"},130800:{l:"C",n:"承德市",c:"130800",p:"130000"},130900:{l:"C",n:"沧州市",c:"130900",p:"130000"},131e3:{l:"L",n:"廊坊市",c:"131000",p:"130000"},131100:{l:"H",n:"衡水市",c:"131100",p:"130000"},139001:{l:"D",n:"定州市",c:"139001",p:"130000"},139002:{l:"X",n:"辛集市",c:"139002",p:"130000"},140100:{l:"T",n:"太原市",c:"140100",p:"140000"},140200:{l:"D",n:"大同市",c:"140200",p:"140000"},140300:{l:"Y",n:"阳泉市",c:"140300",p:"140000"},140400:{l:"C",n:"长治市",c:"140400",p:"140000"},140500:{l:"J",n:"晋城市",c:"140500",p:"140000"},140600:{l:"S",n:"朔州市",c:"140600",p:"140000"},140700:{l:"J",n:"晋中市",c:"140700",p:"140000"},140800:{l:"Y",n:"运城市",c:"140800",p:"140000"},140900:{l:"X",n:"忻州市",c:"140900",p:"140000"},141e3:{l:"L",n:"临汾市",c:"141000",p:"140000"},141100:{l:"L",n:"吕梁市",c:"141100",p:"140000"},150100:{l:"H",n:"呼和浩特市",c:"150100",p:"150000"},150200:{l:"B",n:"包头市",c:"150200",p:"150000"},150300:{l:"W",n:"乌海市",c:"150300",p:"150000"},150400:{l:"C",n:"赤峰市",c:"150400",p:"150000"},150500:{l:"T",n:"通辽市",c:"150500",p:"150000"},150600:{l:"E",n:"鄂尔多斯市",c:"150600",p:"150000"},150700:{l:"H",n:"呼伦贝尔市",c:"150700",p:"150000"},150800:{l:"B",n:"巴彦淖尔市",c:"150800",p:"150000"},150900:{l:"W",n:"乌兰察布市",c:"150900",p:"150000"},152200:{l:"X",n:"兴安盟",c:"152200",p:"150000"},152500:{l:"X",n:"锡林郭勒盟",c:"152500",p:"150000"},152900:{l:"A",n:"阿拉善盟",c:"152900",p:"150000"},210100:{l:"S",n:"沈阳市",c:"210100",p:"210000"},210200:{l:"D",n:"大连市",c:"210200",p:"210000"},210300:{l:"A",n:"鞍山市",c:"210300",p:"210000"},210400:{l:"F",n:"抚顺市",c:"210400",p:"210000"},210500:{l:"B",n:"本溪市",c:"210500",p:"210000"},210600:{l:"D",n:"丹东市",c:"210600",p:"210000"},210700:{l:"J",n:"锦州市",c:"210700",p:"210000"},210800:{l:"Y",n:"营口市",c:"210800",p:"210000"},210900:{l:"F",n:"阜新市",c:"210900",p:"210000"},211e3:{l:"L",n:"辽阳市",c:"211000",p:"210000"},211100:{l:"P",n:"盘锦市",c:"211100",p:"210000"},211200:{l:"T",n:"铁岭市",c:"211200",p:"210000"},211300:{l:"C",n:"朝阳市",c:"211300",p:"210000"},211400:{l:"H",n:"葫芦岛市",c:"211400",p:"210000"},220100:{l:"C",n:"长春市",c:"220100",p:"220000"},220200:{l:"J",n:"吉林市",c:"220200",p:"220000"},220300:{l:"S",n:"四平市",c:"220300",p:"220000"},220400:{l:"L",n:"辽源市",c:"220400",p:"220000"},220500:{l:"T",n:"通化市",c:"220500",p:"220000"},220600:{l:"B",n:"白山市",c:"220600",p:"220000"},220700:{l:"S",n:"松原市",c:"220700",p:"220000"},220800:{l:"B",n:"白城市",c:"220800",p:"220000"},222400:{l:"Y",n:"延边朝鲜族自治州",c:"222400",p:"220000"},230100:{l:"H",n:"哈尔滨市",c:"230100",p:"230000"},230200:{l:"Q",n:"齐齐哈尔市",c:"230200",p:"230000"},230300:{l:"J",n:"鸡西市",c:"230300",p:"230000"},230400:{l:"H",n:"鹤岗市",c:"230400",p:"230000"},230500:{l:"S",n:"双鸭山市",c:"230500",p:"230000"},230600:{l:"D",n:"大庆市",c:"230600",p:"230000"},230700:{l:"Y",n:"伊春市",c:"230700",p:"230000"},230800:{l:"J",n:"佳木斯市",c:"230800",p:"230000"},230900:{l:"Q",n:"七台河市",c:"230900",p:"230000"},231e3:{l:"M",n:"牡丹江市",c:"231000",p:"230000"},231100:{l:"H",n:"黑河市",c:"231100",p:"230000"},231200:{l:"S",n:"绥化市",c:"231200",p:"230000"},232700:{l:"D",n:"大兴安岭地区",c:"232700",p:"230000"},31e4:{l:"S",n:"上海市",c:"310000",p:"86"},320100:{l:"N",n:"南京市",c:"320100",p:"320000"},320200:{l:"W",n:"无锡市",c:"320200",p:"320000"},320300:{l:"X",n:"徐州市",c:"320300",p:"320000"},320400:{l:"C",n:"常州市",c:"320400",p:"320000"},320500:{l:"S",n:"苏州市",c:"320500",p:"320000"},320600:{l:"N",n:"南通市",c:"320600",p:"320000"},320700:{l:"L",n:"连云港市",c:"320700",p:"320000"},320800:{l:"H",n:"淮安市",c:"320800",p:"320000"},320900:{l:"Y",n:"盐城市",c:"320900",p:"320000"},321e3:{l:"Y",n:"扬州市",c:"321000",p:"320000"},321100:{l:"Z",n:"镇江市",c:"321100",p:"320000"},321200:{l:"T",n:"泰州市",c:"321200",p:"320000"},321300:{l:"X",n:"宿迁市",c:"321300",p:"320000"},330100:{l:"H",n:"杭州市",c:"330100",p:"330000"},330200:{l:"N",n:"宁波市",c:"330200",p:"330000"},330300:{l:"W",n:"温州市",c:"330300",p:"330000"},330400:{l:"J",n:"嘉兴市",c:"330400",p:"330000"},330500:{l:"H",n:"湖州市",c:"330500",p:"330000"},330600:{l:"S",n:"绍兴市",c:"330600",p:"330000"},330700:{l:"J",n:"金华市",c:"330700",p:"330000"},330800:{l:"Q",n:"衢州市",c:"330800",p:"330000"},330900:{l:"Z",n:"舟山市",c:"330900",p:"330000"},331e3:{l:"T",n:"台州市",c:"331000",p:"330000"},331100:{l:"L",n:"丽水市",c:"331100",p:"330000"},340100:{l:"H",n:"合肥市",c:"340100",p:"340000"},340200:{l:"W",n:"芜湖市",c:"340200",p:"340000"},340300:{l:"B",n:"蚌埠市",c:"340300",p:"340000"},340400:{l:"H",n:"淮南市",c:"340400",p:"340000"},340500:{l:"M",n:"马鞍山市",c:"340500",p:"340000"},340600:{l:"H",n:"淮北市",c:"340600",p:"340000"},340700:{l:"T",n:"铜陵市",c:"340700",p:"340000"},340800:{l:"A",n:"安庆市",c:"340800",p:"340000"},341e3:{l:"H",n:"黄山市",c:"341000",p:"340000"},341100:{l:"C",n:"滁州市",c:"341100",p:"340000"},341200:{l:"F",n:"阜阳市",c:"341200",p:"340000"},341300:{l:"X",n:"宿州市",c:"341300",p:"340000"},341500:{l:"L",n:"六安市",c:"341500",p:"340000"},341600:{l:"B",n:"亳州市",c:"341600",p:"340000"},341700:{l:"C",n:"池州市",c:"341700",p:"340000"},341800:{l:"X",n:"宣城市",c:"341800",p:"340000"},350100:{l:"F",n:"福州市",c:"350100",p:"350000"},350200:{l:"S",n:"厦门市",c:"350200",p:"350000"},350300:{l:"P",n:"莆田市",c:"350300",p:"350000"},350400:{l:"S",n:"三明市",c:"350400",p:"350000"},350500:{l:"Q",n:"泉州市",c:"350500",p:"350000"},350600:{l:"Z",n:"漳州市",c:"350600",p:"350000"},350700:{l:"N",n:"南平市",c:"350700",p:"350000"},350800:{l:"L",n:"龙岩市",c:"350800",p:"350000"},350900:{l:"N",n:"宁德市",c:"350900",p:"350000"},360100:{l:"N",n:"南昌市",c:"360100",p:"360000"},360200:{l:"J",n:"景德镇市",c:"360200",p:"360000"},360300:{l:"P",n:"萍乡市",c:"360300",p:"360000"},360400:{l:"J",n:"九江市",c:"360400",p:"360000"},360500:{l:"X",n:"新余市",c:"360500",p:"360000"},360600:{l:"Y",n:"鹰潭市",c:"360600",p:"360000"},360700:{l:"G",n:"赣州市",c:"360700",p:"360000"},360800:{l:"J",n:"吉安市",c:"360800",p:"360000"},360900:{l:"Y",n:"宜春市",c:"360900",p:"360000"},361e3:{l:"F",n:"抚州市",c:"361000",p:"360000"},361100:{l:"S",n:"上饶市",c:"361100",p:"360000"},370100:{l:"J",n:"济南市",c:"370100",p:"370000"},370200:{l:"Q",n:"青岛市",c:"370200",p:"370000"},370300:{l:"Z",n:"淄博市",c:"370300",p:"370000"},370400:{l:"Z",n:"枣庄市",c:"370400",p:"370000"},370500:{l:"D",n:"东营市",c:"370500",p:"370000"},370600:{l:"Y",n:"烟台市",c:"370600",p:"370000"},370700:{l:"W",n:"潍坊市",c:"370700",p:"370000"},370800:{l:"J",n:"济宁市",c:"370800",p:"370000"},370900:{l:"T",n:"泰安市",c:"370900",p:"370000"},371e3:{l:"W",n:"威海市",c:"371000",p:"370000"},371100:{l:"R",n:"日照市",c:"371100",p:"370000"},371200:{l:"L",n:"莱芜市",c:"371200",p:"370000"},371300:{l:"L",n:"临沂市",c:"371300",p:"370000"},371400:{l:"D",n:"德州市",c:"371400",p:"370000"},371500:{l:"L",n:"聊城市",c:"371500",p:"370000"},371600:{l:"B",n:"滨州市",c:"371600",p:"370000"},371700:{l:"H",n:"菏泽市",c:"371700",p:"370000"},410100:{l:"Z",n:"郑州市",c:"410100",p:"410000"},410200:{l:"K",n:"开封市",c:"410200",p:"410000"},410300:{l:"L",n:"洛阳市",c:"410300",p:"410000"},410400:{l:"P",n:"平顶山市",c:"410400",p:"410000"},410500:{l:"A",n:"安阳市",c:"410500",p:"410000"},410600:{l:"H",n:"鹤壁市",c:"410600",p:"410000"},410700:{l:"X",n:"新乡市",c:"410700",p:"410000"},410800:{l:"J",n:"焦作市",c:"410800",p:"410000"},410900:{l:"P",n:"濮阳市",c:"410900",p:"410000"},411e3:{l:"X",n:"许昌市",c:"411000",p:"410000"},411100:{l:"L",n:"漯河市",c:"411100",p:"410000"},411200:{l:"S",n:"三门峡市",c:"411200",p:"410000"},411300:{l:"N",n:"南阳市",c:"411300",p:"410000"},411400:{l:"S",n:"商丘市",c:"411400",p:"410000"},411500:{l:"X",n:"信阳市",c:"411500",p:"410000"},411600:{l:"Z",n:"周口市",c:"411600",p:"410000"},411700:{l:"Z",n:"驻马店市",c:"411700",p:"410000"},419001:{l:"J",n:"济源市",c:"419001",p:"410000"},420100:{l:"W",n:"武汉市",c:"420100",p:"420000"},420200:{l:"H",n:"黄石市",c:"420200",p:"420000"},420300:{l:"S",n:"十堰市",c:"420300",p:"420000"},420500:{l:"Y",n:"宜昌市",c:"420500",p:"420000"},420600:{l:"X",n:"襄阳市",c:"420600",p:"420000"},420700:{l:"E",n:"鄂州市",c:"420700",p:"420000"},420800:{l:"J",n:"荆门市",c:"420800",p:"420000"},420900:{l:"X",n:"孝感市",c:"420900",p:"420000"},421e3:{l:"J",n:"荆州市",c:"421000",p:"420000"},421100:{l:"H",n:"黄冈市",c:"421100",p:"420000"},421200:{l:"X",n:"咸宁市",c:"421200",p:"420000"},421300:{l:"S",n:"随州市",c:"421300",p:"420000"},422800:{l:"E",n:"恩施土家族苗族自治州",c:"422800",p:"420000"},429004:{l:"X",n:"仙桃市",c:"429004",p:"420000"},429005:{l:"Q",n:"潜江市",c:"429005",p:"420000"},429006:{l:"T",n:"天门市",c:"429006",p:"420000"},429021:{l:"S",n:"神农架林区",c:"429021",p:"420000"},430100:{l:"C",n:"长沙市",c:"430100",p:"430000"},430200:{l:"Z",n:"株洲市",c:"430200",p:"430000"},430300:{l:"X",n:"湘潭市",c:"430300",p:"430000"},430400:{l:"H",n:"衡阳市",c:"430400",p:"430000"},430500:{l:"S",n:"邵阳市",c:"430500",p:"430000"},430600:{l:"Y",n:"岳阳市",c:"430600",p:"430000"},430700:{l:"C",n:"常德市",c:"430700",p:"430000"},430800:{l:"Z",n:"张家界市",c:"430800",p:"430000"},430900:{l:"Y",n:"益阳市",c:"430900",p:"430000"},431e3:{l:"C",n:"郴州市",c:"431000",p:"430000"},431100:{l:"Y",n:"永州市",c:"431100",p:"430000"},431200:{l:"H",n:"怀化市",c:"431200",p:"430000"},431300:{l:"L",n:"娄底市",c:"431300",p:"430000"},433100:{l:"X",n:"湘西土家族苗族自治州",c:"433100",p:"430000"},440100:{l:"G",n:"广州市",c:"440100",p:"440000"},440200:{l:"S",n:"韶关市",c:"440200",p:"440000"},440300:{l:"S",n:"深圳市",c:"440300",p:"440000"},440400:{l:"Z",n:"珠海市",c:"440400",p:"440000"},440500:{l:"S",n:"汕头市",c:"440500",p:"440000"},440600:{l:"F",n:"佛山市",c:"440600",p:"440000"},440700:{l:"J",n:"江门市",c:"440700",p:"440000"},440800:{l:"Z",n:"湛江市",c:"440800",p:"440000"},440900:{l:"M",n:"茂名市",c:"440900",p:"440000"},441200:{l:"Z",n:"肇庆市",c:"441200",p:"440000"},441300:{l:"H",n:"惠州市",c:"441300",p:"440000"},441400:{l:"M",n:"梅州市",c:"441400",p:"440000"},441500:{l:"S",n:"汕尾市",c:"441500",p:"440000"},441600:{l:"H",n:"河源市",c:"441600",p:"440000"},441700:{l:"Y",n:"阳江市",c:"441700",p:"440000"},441800:{l:"Q",n:"清远市",c:"441800",p:"440000"},441900:{l:"D",n:"东莞市",c:"441900",p:"440000"},442e3:{l:"Z",n:"中山市",c:"442000",p:"440000"},445100:{l:"C",n:"潮州市",c:"445100",p:"440000"},445200:{l:"J",n:"揭阳市",c:"445200",p:"440000"},445300:{l:"Y",n:"云浮市",c:"445300",p:"440000"},450100:{l:"N",n:"南宁市",c:"450100",p:"450000"},450200:{l:"L",n:"柳州市",c:"450200",p:"450000"},450300:{l:"G",n:"桂林市",c:"450300",p:"450000"},450400:{l:"W",n:"梧州市",c:"450400",p:"450000"},450500:{l:"B",n:"北海市",c:"450500",p:"450000"},450600:{l:"F",n:"防城港市",c:"450600",p:"450000"},450700:{l:"Q",n:"钦州市",c:"450700",p:"450000"},450800:{l:"G",n:"贵港市",c:"450800",p:"450000"},450900:{l:"Y",n:"玉林市",c:"450900",p:"450000"},451e3:{l:"B",n:"百色市",c:"451000",p:"450000"},451100:{l:"H",n:"贺州市",c:"451100",p:"450000"},451200:{l:"H",n:"河池市",c:"451200",p:"450000"},451300:{l:"L",n:"来宾市",c:"451300",p:"450000"},451400:{l:"C",n:"崇左市",c:"451400",p:"450000"},460100:{l:"H",n:"海口市",c:"460100",p:"460000"},460200:{l:"S",n:"三亚市",c:"460200",p:"460000"},460300:{l:"S",n:"三沙市",c:"460300",p:"460000"},460400:{l:"D",n:"儋州市",c:"460400",p:"460000"},469001:{l:"W",n:"五指山市",c:"469001",p:"460000"},469002:{l:"Q",n:"琼海市",c:"469002",p:"460000"},469005:{l:"W",n:"文昌市",c:"469005",p:"460000"},469006:{l:"W",n:"万宁市",c:"469006",p:"460000"},469007:{l:"D",n:"东方市",c:"469007",p:"460000"},469021:{l:"D",n:"定安县",c:"469021",p:"460000"},469022:{l:"T",n:"屯昌县",c:"469022",p:"460000"},469023:{l:"C",n:"澄迈县",c:"469023",p:"460000"},469024:{l:"L",n:"临高县",c:"469024",p:"460000"},469025:{l:"B",n:"白沙黎族自治县",c:"469025",p:"460000"},469026:{l:"C",n:"昌江黎族自治县",c:"469026",p:"460000"},469027:{l:"L",n:"乐东黎族自治县",c:"469027",p:"460000"},469028:{l:"L",n:"陵水黎族自治县",c:"469028",p:"460000"},469029:{l:"B",n:"保亭黎族苗族自治县",c:"469029",p:"460000"},469030:{l:"Q",n:"琼中黎族苗族自治县",c:"469030",p:"460000"},5e5:{l:"C",n:"重庆市",c:"500000",p:"86"},510100:{l:"C",n:"成都市",c:"510100",p:"510000"},510300:{l:"Z",n:"自贡市",c:"510300",p:"510000"},510400:{l:"P",n:"攀枝花市",c:"510400",p:"510000"},510500:{l:"L",n:"泸州市",c:"510500",p:"510000"},510600:{l:"D",n:"德阳市",c:"510600",p:"510000"},510700:{l:"M",n:"绵阳市",c:"510700",p:"510000"},510800:{l:"G",n:"广元市",c:"510800",p:"510000"},510900:{l:"S",n:"遂宁市",c:"510900",p:"510000"},511e3:{l:"N",n:"内江市",c:"511000",p:"510000"},511100:{l:"L",n:"乐山市",c:"511100",p:"510000"},511300:{l:"N",n:"南充市",c:"511300",p:"510000"},511400:{l:"M",n:"眉山市",c:"511400",p:"510000"},511500:{l:"Y",n:"宜宾市",c:"511500",p:"510000"},511600:{l:"G",n:"广安市",c:"511600",p:"510000"},511700:{l:"D",n:"达州市",c:"511700",p:"510000"},511800:{l:"Y",n:"雅安市",c:"511800",p:"510000"},511900:{l:"B",n:"巴中市",c:"511900",p:"510000"},512e3:{l:"Z",n:"资阳市",c:"512000",p:"510000"},513200:{l:"A",n:"阿坝藏族羌族自治州",c:"513200",p:"510000"},513300:{l:"G",n:"甘孜藏族自治州",c:"513300",p:"510000"},513400:{l:"L",n:"凉山彝族自治州",c:"513400",p:"510000"},520100:{l:"G",n:"贵阳市",c:"520100",p:"520000"},520200:{l:"L",n:"六盘水市",c:"520200",p:"520000"},520300:{l:"Z",n:"遵义市",c:"520300",p:"520000"},520400:{l:"A",n:"安顺市",c:"520400",p:"520000"},520500:{l:"B",n:"毕节市",c:"520500",p:"520000"},520600:{l:"T",n:"铜仁市",c:"520600",p:"520000"},522300:{l:"Q",n:"黔西南布依族苗族自治州",c:"522300",p:"520000"},522600:{l:"Q",n:"黔东南苗族侗族自治州",c:"522600",p:"520000"},522700:{l:"Q",n:"黔南布依族苗族自治州",c:"522700",p:"520000"},530100:{l:"K",n:"昆明市",c:"530100",p:"530000"},530300:{l:"Q",n:"曲靖市",c:"530300",p:"530000"},530400:{l:"Y",n:"玉溪市",c:"530400",p:"530000"},530500:{l:"B",n:"保山市",c:"530500",p:"530000"},530600:{l:"Z",n:"昭通市",c:"530600",p:"530000"},530700:{l:"L",n:"丽江市",c:"530700",p:"530000"},530800:{l:"P",n:"普洱市",c:"530800",p:"530000"},530900:{l:"L",n:"临沧市",c:"530900",p:"530000"},532300:{l:"C",n:"楚雄彝族自治州",c:"532300",p:"530000"},532500:{l:"H",n:"红河哈尼族彝族自治州",c:"532500",p:"530000"},532600:{l:"W",n:"文山壮族苗族自治州",c:"532600",p:"530000"},532800:{l:"X",n:"西双版纳傣族自治州",c:"532800",p:"530000"},532900:{l:"D",n:"大理白族自治州",c:"532900",p:"530000"},533100:{l:"D",n:"德宏傣族景颇族自治州",c:"533100",p:"530000"},533300:{l:"N",n:"怒江傈僳族自治州",c:"533300",p:"530000"},533400:{l:"D",n:"迪庆藏族自治州",c:"533400",p:"530000"},540100:{l:"L",n:"拉萨市",c:"540100",p:"540000"},540200:{l:"R",n:"日喀则市",c:"540200",p:"540000"},540300:{l:"C",n:"昌都市",c:"540300",p:"540000"},540400:{l:"L",n:"林芝市",c:"540400",p:"540000"},540500:{l:"S",n:"山南市",c:"540500",p:"540000"},542400:{l:"N",n:"那曲地区",c:"542400",p:"540000"},542500:{l:"A",n:"阿里地区",c:"542500",p:"540000"},610100:{l:"X",n:"西安市",c:"610100",p:"610000"},610200:{l:"T",n:"铜川市",c:"610200",p:"610000"},610300:{l:"B",n:"宝鸡市",c:"610300",p:"610000"},610400:{l:"X",n:"咸阳市",c:"610400",p:"610000"},610500:{l:"W",n:"渭南市",c:"610500",p:"610000"},610600:{l:"Y",n:"延安市",c:"610600",p:"610000"},610700:{l:"H",n:"汉中市",c:"610700",p:"610000"},610800:{l:"Y",n:"榆林市",c:"610800",p:"610000"},610900:{l:"A",n:"安康市",c:"610900",p:"610000"},611e3:{l:"S",n:"商洛市",c:"611000",p:"610000"},620100:{l:"L",n:"兰州市",c:"620100",p:"620000"},620200:{l:"J",n:"嘉峪关市",c:"620200",p:"620000"},620300:{l:"J",n:"金昌市",c:"620300",p:"620000"},620400:{l:"B",n:"白银市",c:"620400",p:"620000"},620500:{l:"T",n:"天水市",c:"620500",p:"620000"},620600:{l:"W",n:"武威市",c:"620600",p:"620000"},620700:{l:"Z",n:"张掖市",c:"620700",p:"620000"},620800:{l:"P",n:"平凉市",c:"620800",p:"620000"},620900:{l:"J",n:"酒泉市",c:"620900",p:"620000"},621e3:{l:"Q",n:"庆阳市",c:"621000",p:"620000"},621100:{l:"D",n:"定西市",c:"621100",p:"620000"},621200:{l:"L",n:"陇南市",c:"621200",p:"620000"},622900:{l:"L",n:"临夏回族自治州",c:"622900",p:"620000"},623e3:{l:"G",n:"甘南藏族自治州",c:"623000",p:"620000"},630100:{l:"X",n:"西宁市",c:"630100",p:"630000"},630200:{l:"H",n:"海东市",c:"630200",p:"630000"},632200:{l:"H",n:"海北藏族自治州",c:"632200",p:"630000"},632300:{l:"H",n:"黄南藏族自治州",c:"632300",p:"630000"},632500:{l:"H",n:"海南藏族自治州",c:"632500",p:"630000"},632600:{l:"G",n:"果洛藏族自治州",c:"632600",p:"630000"},632700:{l:"Y",n:"玉树藏族自治州",c:"632700",p:"630000"},632800:{l:"H",n:"海西蒙古族藏族自治州",c:"632800",p:"630000"},640100:{l:"Y",n:"银川市",c:"640100",p:"640000"},640200:{l:"S",n:"石嘴山市",c:"640200",p:"640000"},640300:{l:"W",n:"吴忠市",c:"640300",p:"640000"},640400:{l:"G",n:"固原市",c:"640400",p:"640000"},640500:{l:"Z",n:"中卫市",c:"640500",p:"640000"},650100:{l:"W",n:"乌鲁木齐市",c:"650100",p:"650000"},650200:{l:"K",n:"克拉玛依市",c:"650200",p:"650000"},650400:{l:"T",n:"吐鲁番市",c:"650400",p:"650000"},650500:{l:"H",n:"哈密市",c:"650500",p:"650000"},652300:{l:"C",n:"昌吉回族自治州",c:"652300",p:"650000"},652700:{l:"B",n:"博尔塔拉蒙古自治州",c:"652700",p:"650000"},652800:{l:"B",n:"巴音郭楞蒙古自治州",c:"652800",p:"650000"},652900:{l:"A",n:"阿克苏地区",c:"652900",p:"650000"},653e3:{l:"K",n:"克孜勒苏柯尔克孜自治州",c:"653000",p:"650000"},653100:{l:"K",n:"喀什地区",c:"653100",p:"650000"},653200:{l:"H",n:"和田地区",c:"653200",p:"650000"},654e3:{l:"Y",n:"伊犁哈萨克自治州",c:"654000",p:"650000"},654200:{l:"T",n:"塔城地区",c:"654200",p:"650000"},654300:{l:"A",n:"阿勒泰地区",c:"654300",p:"650000"},659001:{l:"S",n:"石河子市",c:"659001",p:"650000"},659002:{l:"A",n:"阿拉尔市",c:"659002",p:"650000"},659003:{l:"T",n:"图木舒克市",c:"659003",p:"650000"},659004:{l:"W",n:"五家渠市",c:"659004",p:"650000"},659006:{l:"T",n:"铁门关市",c:"659006",p:"650000"},710101:{l:"J",n:"金门",c:"710101",p:"710000"},710102:{l:"L",n:"连江",c:"710102",p:"710000"},710103:{l:"M",n:"苗栗",c:"710103",p:"710000"},710104:{l:"N",n:"南投",c:"710104",p:"710000"},710105:{l:"P",n:"澎湖",c:"710105",p:"710000"},710106:{l:"P",n:"屏东",c:"710106",p:"710000"},710107:{l:"T",n:"台东",c:"710107",p:"710000"},710108:{l:"T",n:"台中",c:"710108",p:"710000"},710109:{l:"T",n:"台南",c:"710109",p:"710000"},710110:{l:"T",n:"台北",c:"710110",p:"710000"},710111:{l:"T",n:"桃园",c:"710111",p:"710000"},710112:{l:"Y",n:"云林",c:"710112",p:"710000"},710113:{l:"X",n:"新北",c:"710113",p:"710000"},710114:{l:"Z",n:"彰化",c:"710114",p:"710000"},710115:{l:"J",n:"嘉义",c:"710115",p:"710000"},710116:{l:"X",n:"新竹",c:"710116",p:"710000"},710117:{l:"H",n:"花莲",c:"710117",p:"710000"},710118:{l:"Y",n:"宜兰",c:"710118",p:"710000"},710119:{l:"G",n:"高雄",c:"710119",p:"710000"},710120:{l:"J",n:"基隆",c:"710120",p:"710000"},81e4:{l:"X",n:"香港特别行政区",c:"810000",p:"86"},82e4:{l:"A",n:"澳门特别行政区",c:"820000",p:"86"}};function ap(o){return o.replace("市","").replace("地区","").replace("特别行政区","")}function DW(){const o=L(Bu),c=[];for(let d in o){const C=o[d];C.n=ap(C.n),c.push(C)}return c}function TE(o,c){if(!c)return"";const d=o.find(C=>C.n===c);return d?d.c:(console.error("[View UI warn]: City name error."),"")}function NW(o,c){return o.find(d=>d.c===c).n}const $W={name:"City",mixins:[un],components:{Dropdown:hh,DropdownMenu:uh,Select:Wr,Option:Ci,Tag:Lu,Icon:S,RadioGroup:J0,Radio:ev},emits:["on-change","update:modelValue"],props:{modelValue:{type:String},useName:{type:Boolean,default:!1},cities:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},placeholder:{type:String,default:"请选择"},searchPlaceholder:{type:String,default:"输入城市名称搜索"},transferClassName:{type:String}},data(){const o=DW();return{currentValue:this.useName?TE(o,this.modelValue):this.modelValue,visible:!1,provinceList:[],cityListByProvince:[],cityListByLetter:{},allCities:o,listType:"province",queryCity:""}},watch:{modelValue(o){const c=this.useName?TE(this.allCities,o):o;this.currentValue=c}},computed:{showCloseIcon(){return this.currentValue&&this.clearable&&!this.itemDisabled},classes(){return[{"ivu-city-show-clear":this.showCloseIcon,[`ivu-city-size-${this.size}`]:!!this.size,"ivu-city-visible":this.visible,"ivu-city-disabled":this.itemDisabled}]},transferClasses(){let o="ivu-city-transfer";return this.transferClassName&&(o+=` ${this.transferClassName}`),o},relCities(){const o=[];return this.cities.length&&this.cities.forEach(c=>{const d=Bu[c];d.n=ap(d.n),o.push(d)}),o},codeToName(){if(!this.currentValue)return this.placeholder;const o=Bu[this.currentValue].n;return this.showSuffix?o:ap(o)}},methods:{handleSelect(o){o&&(this.handleChangeValue(o),t.nextTick(()=>{this.queryCity=""}))},handleChangeValue(o){this.currentValue=o,this.visible=!1;const c=this.useName?NW(this.allCities,o):o;this.$emit("update:modelValue",c),this.$emit("on-change",Bu[o]),this.handleFormItemChange("change",o)},handleClickLetter(o){let c=o;c==="直辖市"?c="Z1":c==="港澳"&&(c="Z2");const d=`.ivu-city-${c}`,C=this.$refs.list,b=C.querySelectorAll(d)[0].offsetTop,m=C.offsetTop;C.scrollTop=b-m},clearSelect(){if(this.itemDisabled)return!1},handleToggleOpen(){if(this.itemDisabled)return!1;this.visible=!this.visible},handleVisibleChange(o){this.visible=o},handleClickOutside(o){this.$refs.city.contains(o.target)||(this.visible=!1)},handleGetProvinceByLetter(){const o={A:{n:"A",p:[],c:[]},F:{n:"F",p:[],c:[]},G:{n:"G",p:[],c:[]},H:{n:"H",p:[],c:[]},J:{n:"J",p:[],c:[]},L:{n:"L",p:[],c:[]},N:{n:"N",p:[],c:[]},Q:{n:"Q",p:[],c:[]},S:{n:"S",p:[],c:[]},T:{n:"T",p:[],c:[]},X:{n:"X",p:[],c:[]},Y:{n:"Y",p:[],c:[]},Z:{n:"Z",p:[],c:[]},Z1:{n:"直辖市",p:[],c:[]},Z2:{n:"港澳",p:[],c:[]}};for(let c in kE){const d=kE[c];o[d.l].p.push(d)}this.provinceList=o},handleGetCityByProvince(){const o=L(this.provinceList),c=[],d=L(Bu),C=[{p:{n:"直辖市",p:"86",l:"Z1"},c:[]},{p:{n:"港澳",p:"86",l:"Z2"},c:[]}];for(let b in o){const m=o[b];for(let E=0;E<m.p.length;E++){const V=m.p[E],W=V.c,z={p:V,c:[]};for(let G in d){const ae=d[G];ae.n=ap(ae.n),W===ae.p&&z.c.push(ae)}b==="Z1"?C[0].c.push(d[W]):b==="Z2"?C[1].c.push(d[W]):c.push(z)}}this.cityListByProvince=c.concat(C)},handleGetCityByLetter(){const o=L(Bu),c={A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],J:[],K:[],L:[],M:[],N:[],P:[],Q:[],R:[],S:[],T:[],W:[],X:[],Y:[],Z:[]};for(let d in o){const C=o[d];C.n=ap(C.n),c[C.l].push(C)}this.cityListByLetter=c}},created(){this.handleGetProvinceByLetter(),this.handleGetCityByProvince(),this.handleGetCityByLetter()}},VW=["name","value"],LW={class:"ivu-city-drop"},BW={key:0,class:"ivu-city-drop-cities"},UW=["onClick"],zW={class:"ivu-city-drop-menu"},FW={class:"ivu-city-drop-type"},XW={class:"ivu-city-drop-search"},WW={key:1,class:"ivu-city-drop-list"},QW={class:"ivu-city-drop-list-letter"},HW={class:"ivu-city-drop-list-main",ref:"list"},GW=["onClick"],YW={key:2,class:"ivu-city-drop-list"},jW={class:"ivu-city-drop-list-letter"},qW={class:"ivu-city-drop-list-main ivu-city-drop-list-main-city",ref:"list"},ZW=["onClick"];function KW(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Radio"),W=t.resolveComponent("RadioGroup"),z=t.resolveComponent("Option"),G=t.resolveComponent("Select"),ae=t.resolveComponent("Tag"),xe=t.resolveComponent("DropdownMenu"),Oe=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-city",m.classes]),ref:"city"},[t.createVNode(Oe,{trigger:"custom",visible:b.visible,transfer:d.transfer,placement:"bottom-start","transfer-class-name":m.transferClasses,onOnVisibleChange:m.handleVisibleChange,onOnClickoutside:m.handleClickOutside},{list:t.withCtx(()=>[t.createVNode(xe,{onClick:c[3]||(c[3]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[t.createElementVNode("div",LW,[d.cities.length?(t.openBlock(),t.createElementBlock("div",BW,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.relCities,ve=>(t.openBlock(),t.createElementBlock("span",{key:ve.n,onClick:se=>m.handleChangeValue(ve.c)},t.toDisplayString(ve.n),9,UW))),128))])):t.createCommentVNode("",!0),t.createElementVNode("div",zW,[t.createElementVNode("div",FW,[t.createVNode(W,{modelValue:b.listType,"onUpdate:modelValue":c[1]||(c[1]=ve=>b.listType=ve),type:"button",size:"small"},{default:t.withCtx(()=>[t.createVNode(V,{label:"province"},{default:t.withCtx(()=>[t.createTextVNode("按省份")]),_:1}),t.createVNode(V,{label:"city"},{default:t.withCtx(()=>[t.createTextVNode("按城市")]),_:1})]),_:1},8,["modelValue"])]),t.createElementVNode("div",XW,[t.createVNode(G,{modelValue:b.queryCity,"onUpdate:modelValue":c[2]||(c[2]=ve=>b.queryCity=ve),filterable:"",size:"small",transfer:"",placeholder:d.searchPlaceholder,onOnChange:m.handleSelect},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.allCities,ve=>(t.openBlock(),t.createBlock(z,{value:ve.c,key:ve.c},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(ve.n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder","onOnChange"])])]),b.listType==="province"?(t.openBlock(),t.createElementBlock("div",WW,[t.createElementVNode("div",QW,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.provinceList,ve=>(t.openBlock(),t.createBlock(ae,{onClick:se=>m.handleClickLetter(ve.n),type:"border",fade:!1,key:ve.n},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(ve.n),1)]),_:2},1032,["onClick"]))),128))]),t.createElementVNode("div",HW,[t.createElementVNode("dl",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.cityListByProvince,ve=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:ve.p.n},[t.createElementVNode("dt",{class:t.normalizeClass("ivu-city-"+ve.p.l)},t.toDisplayString(ve.p.n)+"：",3),t.createElementVNode("dd",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ve.c,se=>(t.openBlock(),t.createElementBlock("li",{key:se.n,onClick:Pe=>m.handleChangeValue(se.c)},t.toDisplayString(se.n),9,GW))),128))])],64))),128))])],512)])):t.createCommentVNode("",!0),b.listType==="city"?(t.openBlock(),t.createElementBlock("div",YW,[t.createElementVNode("div",jW,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.cityListByLetter,(ve,se)=>(t.openBlock(),t.createBlock(ae,{onClick:Pe=>m.handleClickLetter(se),type:"border",fade:!1,key:se},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(se),1)]),_:2},1032,["onClick"]))),128))]),t.createElementVNode("div",qW,[t.createElementVNode("dl",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.cityListByLetter,(ve,se)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:se},[t.createElementVNode("dt",{class:t.normalizeClass("ivu-city-"+se)},t.toDisplayString(se)+"：",3),t.createElementVNode("dd",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ve,Pe=>(t.openBlock(),t.createElementBlock("li",{key:Pe.n,onClick:$t=>m.handleChangeValue(Pe.c)},t.toDisplayString(Pe.n),9,ZW))),128))])],64))),128))])],512)])):t.createCommentVNode("",!0)])]),_:1})]),default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-city-rel",onClick:c[0]||(c[0]=t.withModifiers((...ve)=>m.handleToggleOpen&&m.handleToggleOpen(...ve),["prevent","stop"]))},[t.createElementVNode("input",{type:"hidden",name:d.name,value:b.currentValue},null,8,VW),t.renderSlot(o.$slots,"default",{},()=>[t.createElementVNode("span",null,t.toDisplayString(m.codeToName),1),t.withDirectives(t.createVNode(E,{type:"ios-close-circle",class:"ivu-city-arrow",onClick:t.withModifiers(m.clearSelect,["stop"])},null,8,["onClick"]),[[t.vShow,m.showCloseIcon]]),t.createVNode(E,{type:"ios-arrow-down",class:"ivu-city-arrow"})])])]),_:3},8,["visible","transfer","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],2)}var ME=l($W,[["render",KW]]);const EE="ivu-collapse",JW={name:"Collapse",emits:["on-change","update:modelValue"],provide(){return{CollapseInstance:this}},props:{accordion:{type:Boolean,default:!1},modelValue:{type:[Array,String]},simple:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,panelCount:0}},computed:{classes(){return[`${EE}`,{[`${EE}-simple`]:this.simple}]}},methods:{getActiveKey(){let o=this.currentValue||[];const c=this.accordion;Array.isArray(o)||(o=[o]),c&&o.length>1&&(o=[o[0]]);for(let d=0;d<o.length;d++)o[d]=o[d].toString();return o},toggle(o){const c=o.name.toString();let d=[];if(this.accordion)o.isActive||d.push(c);else{let C=this.getActiveKey();const b=C.indexOf(c);o.isActive?b>-1&&C.splice(b,1):b<0&&C.push(c),d=C}this.currentValue=d,this.$emit("update:modelValue",d),this.$emit("on-change",d)}},watch:{modelValue(o){this.currentValue=o}}};function eQ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.renderSlot(o.$slots,"default")],2)}var PE=l(JW,[["render",eQ]]);function ov(o){return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ov(o)}var tQ=/^\s+/,nQ=/\s+$/;function Nt(o,c){if(o=o||"",c=c||{},o instanceof Nt)return o;if(!(this instanceof Nt))return new Nt(o,c);var d=iQ(o);this._originalInput=o,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=Math.round(100*this._a)/100,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=d.ok}Nt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var o=this.toRgb();return(o.r*299+o.g*587+o.b*114)/1e3},getLuminance:function(){var o=this.toRgb(),c,d,C,b,m,E;return c=o.r/255,d=o.g/255,C=o.b/255,c<=.03928?b=c/12.92:b=Math.pow((c+.055)/1.055,2.4),d<=.03928?m=d/12.92:m=Math.pow((d+.055)/1.055,2.4),C<=.03928?E=C/12.92:E=Math.pow((C+.055)/1.055,2.4),.2126*b+.7152*m+.0722*E},setAlpha:function(o){return this._a=$E(o),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var o=RE(this._r,this._g,this._b);return{h:o.h*360,s:o.s,v:o.v,a:this._a}},toHsvString:function(){var o=RE(this._r,this._g,this._b),c=Math.round(o.h*360),d=Math.round(o.s*100),C=Math.round(o.v*100);return this._a==1?"hsv("+c+", "+d+"%, "+C+"%)":"hsva("+c+", "+d+"%, "+C+"%, "+this._roundA+")"},toHsl:function(){var o=AE(this._r,this._g,this._b);return{h:o.h*360,s:o.s,l:o.l,a:this._a}},toHslString:function(){var o=AE(this._r,this._g,this._b),c=Math.round(o.h*360),d=Math.round(o.s*100),C=Math.round(o.l*100);return this._a==1?"hsl("+c+", "+d+"%, "+C+"%)":"hsla("+c+", "+d+"%, "+C+"%, "+this._roundA+")"},toHex:function(o){return IE(this._r,this._g,this._b,o)},toHexString:function(o){return"#"+this.toHex(o)},toHex8:function(o){return aQ(this._r,this._g,this._b,this._a,o)},toHex8String:function(o){return"#"+this.toHex8(o)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(bi(this._r,255)*100)+"%",g:Math.round(bi(this._g,255)*100)+"%",b:Math.round(bi(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(bi(this._r,255)*100)+"%, "+Math.round(bi(this._g,255)*100)+"%, "+Math.round(bi(this._b,255)*100)+"%)":"rgba("+Math.round(bi(this._r,255)*100)+"%, "+Math.round(bi(this._g,255)*100)+"%, "+Math.round(bi(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:bQ[IE(this._r,this._g,this._b,!0)]||!1},toFilter:function(o){var c="#"+DE(this._r,this._g,this._b,this._a),d=c,C=this._gradientType?"GradientType = 1, ":"";if(o){var b=Nt(o);d="#"+DE(b._r,b._g,b._b,b._a)}return"progid:DXImageTransform.Microsoft.gradient("+C+"startColorstr="+c+",endColorstr="+d+")"},toString:function(o){var c=!!o;o=o||this._format;var d=!1,C=this._a<1&&this._a>=0,b=!c&&C&&(o==="hex"||o==="hex6"||o==="hex3"||o==="hex4"||o==="hex8"||o==="name");return b?o==="name"&&this._a===0?this.toName():this.toRgbString():(o==="rgb"&&(d=this.toRgbString()),o==="prgb"&&(d=this.toPercentageRgbString()),(o==="hex"||o==="hex6")&&(d=this.toHexString()),o==="hex3"&&(d=this.toHexString(!0)),o==="hex4"&&(d=this.toHex8String(!0)),o==="hex8"&&(d=this.toHex8String()),o==="name"&&(d=this.toName()),o==="hsl"&&(d=this.toHslString()),o==="hsv"&&(d=this.toHsvString()),d||this.toHexString())},clone:function(){return Nt(this.toString())},_applyModification:function(o,c){var d=o.apply(null,[this].concat([].slice.call(c)));return this._r=d._r,this._g=d._g,this._b=d._b,this.setAlpha(d._a),this},lighten:function(){return this._applyModification(uQ,arguments)},brighten:function(){return this._applyModification(dQ,arguments)},darken:function(){return this._applyModification(fQ,arguments)},desaturate:function(){return this._applyModification(lQ,arguments)},saturate:function(){return this._applyModification(cQ,arguments)},greyscale:function(){return this._applyModification(hQ,arguments)},spin:function(){return this._applyModification(pQ,arguments)},_applyCombination:function(o,c){return o.apply(null,[this].concat([].slice.call(c)))},analogous:function(){return this._applyCombination(vQ,arguments)},complement:function(){return this._applyCombination(mQ,arguments)},monochromatic:function(){return this._applyCombination(yQ,arguments)},splitcomplement:function(){return this._applyCombination(gQ,arguments)},triad:function(){return this._applyCombination(NE,[3])},tetrad:function(){return this._applyCombination(NE,[4])}},Nt.fromRatio=function(o,c){if(ov(o)=="object"){var d={};for(var C in o)o.hasOwnProperty(C)&&(C==="a"?d[C]=o[C]:d[C]=lp(o[C]));o=d}return Nt(o,c)};function iQ(o){var c={r:0,g:0,b:0},d=1,C=null,b=null,m=null,E=!1,V=!1;return typeof o=="string"&&(o=_Q(o)),ov(o)=="object"&&(Ua(o.r)&&Ua(o.g)&&Ua(o.b)?(c=rQ(o.r,o.g,o.b),E=!0,V=String(o.r).substr(-1)==="%"?"prgb":"rgb"):Ua(o.h)&&Ua(o.s)&&Ua(o.v)?(C=lp(o.s),b=lp(o.v),c=oQ(o.h,C,b),E=!0,V="hsv"):Ua(o.h)&&Ua(o.s)&&Ua(o.l)&&(C=lp(o.s),m=lp(o.l),c=sQ(o.h,C,m),E=!0,V="hsl"),o.hasOwnProperty("a")&&(d=o.a)),d=$E(d),{ok:E,format:o.format||V,r:Math.min(255,Math.max(c.r,0)),g:Math.min(255,Math.max(c.g,0)),b:Math.min(255,Math.max(c.b,0)),a:d}}function rQ(o,c,d){return{r:bi(o,255)*255,g:bi(c,255)*255,b:bi(d,255)*255}}function AE(o,c,d){o=bi(o,255),c=bi(c,255),d=bi(d,255);var C=Math.max(o,c,d),b=Math.min(o,c,d),m,E,V=(C+b)/2;if(C==b)m=E=0;else{var W=C-b;switch(E=V>.5?W/(2-C-b):W/(C+b),C){case o:m=(c-d)/W+(c<d?6:0);break;case c:m=(d-o)/W+2;break;case d:m=(o-c)/W+4;break}m/=6}return{h:m,s:E,l:V}}function sQ(o,c,d){var C,b,m;o=bi(o,360),c=bi(c,100),d=bi(d,100);function E(z,G,ae){return ae<0&&(ae+=1),ae>1&&(ae-=1),ae<1/6?z+(G-z)*6*ae:ae<1/2?G:ae<2/3?z+(G-z)*(2/3-ae)*6:z}if(c===0)C=b=m=d;else{var V=d<.5?d*(1+c):d+c-d*c,W=2*d-V;C=E(W,V,o+1/3),b=E(W,V,o),m=E(W,V,o-1/3)}return{r:C*255,g:b*255,b:m*255}}function RE(o,c,d){o=bi(o,255),c=bi(c,255),d=bi(d,255);var C=Math.max(o,c,d),b=Math.min(o,c,d),m,E,V=C,W=C-b;if(E=C===0?0:W/C,C==b)m=0;else{switch(C){case o:m=(c-d)/W+(c<d?6:0);break;case c:m=(d-o)/W+2;break;case d:m=(o-c)/W+4;break}m/=6}return{h:m,s:E,v:V}}function oQ(o,c,d){o=bi(o,360)*6,c=bi(c,100),d=bi(d,100);var C=Math.floor(o),b=o-C,m=d*(1-c),E=d*(1-b*c),V=d*(1-(1-b)*c),W=C%6,z=[d,E,m,m,V,d][W],G=[V,d,d,E,m,m][W],ae=[m,m,V,d,d,E][W];return{r:z*255,g:G*255,b:ae*255}}function IE(o,c,d,C){var b=[Ao(Math.round(o).toString(16)),Ao(Math.round(c).toString(16)),Ao(Math.round(d).toString(16))];return C&&b[0].charAt(0)==b[0].charAt(1)&&b[1].charAt(0)==b[1].charAt(1)&&b[2].charAt(0)==b[2].charAt(1)?b[0].charAt(0)+b[1].charAt(0)+b[2].charAt(0):b.join("")}function aQ(o,c,d,C,b){var m=[Ao(Math.round(o).toString(16)),Ao(Math.round(c).toString(16)),Ao(Math.round(d).toString(16)),Ao(VE(C))];return b&&m[0].charAt(0)==m[0].charAt(1)&&m[1].charAt(0)==m[1].charAt(1)&&m[2].charAt(0)==m[2].charAt(1)&&m[3].charAt(0)==m[3].charAt(1)?m[0].charAt(0)+m[1].charAt(0)+m[2].charAt(0)+m[3].charAt(0):m.join("")}function DE(o,c,d,C){var b=[Ao(VE(C)),Ao(Math.round(o).toString(16)),Ao(Math.round(c).toString(16)),Ao(Math.round(d).toString(16))];return b.join("")}Nt.equals=function(o,c){return!o||!c?!1:Nt(o).toRgbString()==Nt(c).toRgbString()},Nt.random=function(){return Nt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function lQ(o,c){c=c===0?0:c||10;var d=Nt(o).toHsl();return d.s-=c/100,d.s=av(d.s),Nt(d)}function cQ(o,c){c=c===0?0:c||10;var d=Nt(o).toHsl();return d.s+=c/100,d.s=av(d.s),Nt(d)}function hQ(o){return Nt(o).desaturate(100)}function uQ(o,c){c=c===0?0:c||10;var d=Nt(o).toHsl();return d.l+=c/100,d.l=av(d.l),Nt(d)}function dQ(o,c){c=c===0?0:c||10;var d=Nt(o).toRgb();return d.r=Math.max(0,Math.min(255,d.r-Math.round(255*-(c/100)))),d.g=Math.max(0,Math.min(255,d.g-Math.round(255*-(c/100)))),d.b=Math.max(0,Math.min(255,d.b-Math.round(255*-(c/100)))),Nt(d)}function fQ(o,c){c=c===0?0:c||10;var d=Nt(o).toHsl();return d.l-=c/100,d.l=av(d.l),Nt(d)}function pQ(o,c){var d=Nt(o).toHsl(),C=(d.h+c)%360;return d.h=C<0?360+C:C,Nt(d)}function mQ(o){var c=Nt(o).toHsl();return c.h=(c.h+180)%360,Nt(c)}function NE(o,c){if(isNaN(c)||c<=0)throw new Error("Argument to polyad must be a positive number");for(var d=Nt(o).toHsl(),C=[Nt(o)],b=360/c,m=1;m<c;m++)C.push(Nt({h:(d.h+m*b)%360,s:d.s,l:d.l}));return C}function gQ(o){var c=Nt(o).toHsl(),d=c.h;return[Nt(o),Nt({h:(d+72)%360,s:c.s,l:c.l}),Nt({h:(d+216)%360,s:c.s,l:c.l})]}function vQ(o,c,d){c=c||6,d=d||30;var C=Nt(o).toHsl(),b=360/d,m=[Nt(o)];for(C.h=(C.h-(b*c>>1)+720)%360;--c;)C.h=(C.h+b)%360,m.push(Nt(C));return m}function yQ(o,c){c=c||6;for(var d=Nt(o).toHsv(),C=d.h,b=d.s,m=d.v,E=[],V=1/c;c--;)E.push(Nt({h:C,s:b,v:m})),m=(m+V)%1;return E}Nt.mix=function(o,c,d){d=d===0?0:d||50;var C=Nt(o).toRgb(),b=Nt(c).toRgb(),m=d/100,E={r:(b.r-C.r)*m+C.r,g:(b.g-C.g)*m+C.g,b:(b.b-C.b)*m+C.b,a:(b.a-C.a)*m+C.a};return Nt(E)},Nt.readability=function(o,c){var d=Nt(o),C=Nt(c);return(Math.max(d.getLuminance(),C.getLuminance())+.05)/(Math.min(d.getLuminance(),C.getLuminance())+.05)},Nt.isReadable=function(o,c,d){var C=Nt.readability(o,c),b,m;switch(m=!1,b=SQ(d),b.level+b.size){case"AAsmall":case"AAAlarge":m=C>=4.5;break;case"AAlarge":m=C>=3;break;case"AAAsmall":m=C>=7;break}return m},Nt.mostReadable=function(o,c,d){var C=null,b=0,m,E,V,W;d=d||{},E=d.includeFallbackColors,V=d.level,W=d.size;for(var z=0;z<c.length;z++)m=Nt.readability(o,c[z]),m>b&&(b=m,C=Nt(c[z]));return Nt.isReadable(o,C,{level:V,size:W})||!E?C:(d.includeFallbackColors=!1,Nt.mostReadable(o,["#fff","#000"],d))};var zx=Nt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bQ=Nt.hexNames=OQ(zx);function OQ(o){var c={};for(var d in o)o.hasOwnProperty(d)&&(c[o[d]]=d);return c}function $E(o){return o=parseFloat(o),(isNaN(o)||o<0||o>1)&&(o=1),o}function bi(o,c){xQ(o)&&(o="100%");var d=wQ(o);return o=Math.min(c,Math.max(0,parseFloat(o))),d&&(o=parseInt(o*c,10)/100),Math.abs(o-c)<1e-6?1:o%c/parseFloat(c)}function av(o){return Math.min(1,Math.max(0,o))}function Vs(o){return parseInt(o,16)}function xQ(o){return typeof o=="string"&&o.indexOf(".")!=-1&&parseFloat(o)===1}function wQ(o){return typeof o=="string"&&o.indexOf("%")!=-1}function Ao(o){return o.length==1?"0"+o:""+o}function lp(o){return o<=1&&(o=o*100+"%"),o}function VE(o){return Math.round(parseFloat(o)*255).toString(16)}function LE(o){return Vs(o)/255}var Ro=function(){var o="[-\\+]?\\d+%?",c="[-\\+]?\\d*\\.\\d+%?",d="(?:"+c+")|(?:"+o+")",C="[\\s|\\(]+("+d+")[,|\\s]+("+d+")[,|\\s]+("+d+")\\s*\\)?",b="[\\s|\\(]+("+d+")[,|\\s]+("+d+")[,|\\s]+("+d+")[,|\\s]+("+d+")\\s*\\)?";return{CSS_UNIT:new RegExp(d),rgb:new RegExp("rgb"+C),rgba:new RegExp("rgba"+b),hsl:new RegExp("hsl"+C),hsla:new RegExp("hsla"+b),hsv:new RegExp("hsv"+C),hsva:new RegExp("hsva"+b),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ua(o){return!!Ro.CSS_UNIT.exec(o)}function _Q(o){o=o.replace(tQ,"").replace(nQ,"").toLowerCase();var c=!1;if(zx[o])o=zx[o],c=!0;else if(o=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var d;return(d=Ro.rgb.exec(o))?{r:d[1],g:d[2],b:d[3]}:(d=Ro.rgba.exec(o))?{r:d[1],g:d[2],b:d[3],a:d[4]}:(d=Ro.hsl.exec(o))?{h:d[1],s:d[2],l:d[3]}:(d=Ro.hsla.exec(o))?{h:d[1],s:d[2],l:d[3],a:d[4]}:(d=Ro.hsv.exec(o))?{h:d[1],s:d[2],v:d[3]}:(d=Ro.hsva.exec(o))?{h:d[1],s:d[2],v:d[3],a:d[4]}:(d=Ro.hex8.exec(o))?{r:Vs(d[1]),g:Vs(d[2]),b:Vs(d[3]),a:LE(d[4]),format:c?"name":"hex8"}:(d=Ro.hex6.exec(o))?{r:Vs(d[1]),g:Vs(d[2]),b:Vs(d[3]),format:c?"name":"hex"}:(d=Ro.hex4.exec(o))?{r:Vs(d[1]+""+d[1]),g:Vs(d[2]+""+d[2]),b:Vs(d[3]+""+d[3]),a:LE(d[4]+""+d[4]),format:c?"name":"hex8"}:(d=Ro.hex3.exec(o))?{r:Vs(d[1]+""+d[1]),g:Vs(d[2]+""+d[2]),b:Vs(d[3]+""+d[3]),format:c?"name":"hex"}:!1}function SQ(o){var c,d;return o=o||{level:"AA",size:"small"},c=(o.level||"AA").toUpperCase(),d=(o.size||"small").toLowerCase(),c!=="AA"&&c!=="AAA"&&(c="AA"),d!=="small"&&d!=="large"&&(d="small"),{level:c,size:d}}var BE={inject:["ColorPickerInstance"],methods:{handleEscape(o){this.ColorPickerInstance.handleOnEscapeKeydown(o)}}},cp={data(){return{prefixCls:"ivu-color-picker",inputPrefixCls:"ivu-input",iconPrefixCls:"ivu-icon",transferPrefixCls:"ivu-transfer"}}};function Fx(o,c){const d=Nt(o),{_a:C}=d;return C==null&&d.setAlpha(c||1),d}function CQ(o,c){const d=c&&c.a;if(c){if(c.hsl)return Fx(c.hsl,d);if(c.hex&&c.hex.length>0)return Fx(c.hex,d)}return Fx(c,d)}function hp(o,c){const d=o===""?"#2d8cf0":o,C=CQ(o,d),b=C.toHsl(),m=C.toHsv();return b.s===0&&(b.h=d.h||d.hsl&&d.hsl.h||c||0,m.h=b.h),m.v<.0164&&(m.h=d.h||d.hsv&&d.hsv.h||0,m.s=d.s||d.hsv&&d.hsv.s||0),b.l<.01&&(b.h=d.h||d.hsl&&d.hsl.h||0,b.s=d.s||d.hsl&&d.hsl.s||0),{hsl:b,hex:C.toHexString().toUpperCase(),rgba:C.toRgb(),hsv:m,oldHue:d.h||c||b.h,source:d.source,a:d.a||C.getAlpha()}}function Io(o,c,d){return o<c?c:o>d?d:o}function UE(o,c,d){return _(o,c)?d:0}function zE(o,c){return o.touches?o.touches[0][c]:0}function up(o){const{r:c,g:d,b:C,a:b}=o;return`rgba(${[c,d,C,b].join(",")})`}const kQ={name:"RecommendedColors",mixins:[BE,cp],emits:["picker-color","change"],props:{list:{type:Array,default:void 0}},data(){const o=Math.ceil(this.list.length/12),c=1;return{left:-c,right:c,up:-c,down:c,powerKey:"shiftKey",grid:{x:1,y:1},rows:o,columns:12}},computed:{hideClass(){return`${this.prefixCls}-hide`},linearIndex(){return this.getLinearIndex(this.grid)},currentCircle(){return this.$refs[`color-circle-${this.linearIndex}`][0]}},methods:{getLinearIndex(o){return this.columns*(o.y-1)+o.x-1},getMaxLimit(o){return o==="x"?this.columns:this.rows},handleArrow(o,c,d){o.preventDefault(),o.stopPropagation(),this.blurColor();const C={...this.grid};o[this.powerKey]?d<0?C[c]=1:C[c]=this.getMaxLimit(c):C[c]+=d;const b=this.getLinearIndex(C);b>=0&&b<this.list.length&&(this.grid[c]=Io(C[c],1,this.getMaxLimit(c))),this.focusColor()},blurColor(){this.currentCircle.classList.add(this.hideClass)},focusColor(){this.currentCircle.classList.remove(this.hideClass)},handleEnter(o){this.handleClick(o,this.currentCircle)},handleClick(o,c){o.preventDefault(),o.stopPropagation(),this.$refs.reference.focus();const d=c||o.target,C=d.dataset.colorId||d.parentElement.dataset.colorId;if(C){this.blurColor();const b=Number(C)+1;this.grid.x=b%this.columns||this.columns,this.grid.y=Math.ceil(b/this.columns),this.focusColor(),this.$emit("picker-color",this.list[C]),this.$emit("change",{hex:this.list[C],source:"hex"})}},lineBreak(o,c){if(!c)return!1;const d=c+1;return d<o.length&&d%this.columns===0}}},TQ=["data-color-id"],MQ={key:0};function EQ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{ref:"reference",tabindex:"0",onClick:c[0]||(c[0]=(...E)=>m.handleClick&&m.handleClick(...E)),onKeydown:[c[1]||(c[1]=t.withKeys((...E)=>o.handleEscape&&o.handleEscape(...E),["esc"])),c[2]||(c[2]=t.withKeys((...E)=>m.handleEnter&&m.handleEnter(...E),["enter"])),c[3]||(c[3]=t.withKeys(E=>m.handleArrow(E,"x",b.left),["left"])),c[4]||(c[4]=t.withKeys(E=>m.handleArrow(E,"x",b.right),["right"])),c[5]||(c[5]=t.withKeys(E=>m.handleArrow(E,"y",b.up),["up"])),c[6]||(c[6]=t.withKeys(E=>m.handleArrow(E,"y",b.down),["down"]))],onBlur:c[7]||(c[7]=(...E)=>m.blurColor&&m.blurColor(...E)),onFocus:c[8]||(c[8]=(...E)=>m.focusColor&&m.focusColor(...E))},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.list,(E,V)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:E+":"+V},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-picker-colors-wrapper"])},[t.createElementVNode("div",{"data-color-id":V},[t.createElementVNode("div",{style:t.normalizeStyle({background:E}),class:t.normalizeClass([o.prefixCls+"-picker-colors-wrapper-color"])},null,6),t.createElementVNode("div",{ref_for:!0,ref:"color-circle-"+V,class:t.normalizeClass([o.prefixCls+"-picker-colors-wrapper-circle",m.hideClass])},null,2)],8,TQ)],2),m.lineBreak(d.list,V)?(t.openBlock(),t.createElementBlock("br",MQ)):t.createCommentVNode("",!0)],64))),128))],544)}var PQ=l(kQ,[["render",EQ]]),dp={mixins:[BE],props:{focused:{type:Boolean,default:!1},value:{type:Object,default:void 0}},created(){this.focused&&setTimeout(()=>this.$el.focus(),1)},beforeUnmount(){this.unbindEventListeners()},methods:{handleLeft(o){this.handleSlide(o,this.left,"left")},handleRight(o){this.handleSlide(o,this.right,"right")},handleUp(o){this.handleSlide(o,this.up,"up")},handleDown(o){this.handleSlide(o,this.down,"down")},handleMouseDown(o){this.ColorPickerInstance.handleOnDragging(!0),this.handleChange(o,!0),s(window,"mousemove",this.handleChange),s(window,"mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){a(window,"mousemove",this.handleChange),a(window,"mouseup",this.handleMouseUp),setTimeout(()=>this.ColorPickerInstance.handleOnDragging(!1),1)},getLeft(o){if(!r)return;const{container:c}=this.$refs,d=c.getBoundingClientRect().left+window.pageXOffset;return(o.pageX||zE(o,"PageX"))-d},getTop(o){if(!r)return;const{container:c}=this.$refs,d=c.getBoundingClientRect().top+window.pageYOffset;return(o.pageY||zE(o,"PageY"))-d}}};const AQ={name:"Saturation",mixins:[dp,cp],emits:["change"],data(){return{left:-.01,right:.01,up:.01,down:-.01,multiplier:10,powerKey:"shiftKey"}},computed:{bgColorStyle(){return{background:`hsl(${this.value.hsv.h}, 100%, 50%)`}},pointerStyle(){return{top:`${-(this.value.hsv.v*100)+1+100}%`,left:`${this.value.hsv.s*100}%`}}},methods:{change(o,c,d,C){this.$emit("change",{h:o,s:c,v:d,a:C,source:"hsva"})},handleSlide(o,c,d){o.preventDefault(),o.stopPropagation();const C=o[this.powerKey]?c*this.multiplier:c,{h:b,s:m,v:E,a:V}=this.value.hsv,W=Io(m+UE(d,["left","right"],C),0,1),z=Io(E+UE(d,["up","down"],C),0,1);this.change(b,W,z,V)},handleChange(o){o.preventDefault(),o.stopPropagation();const{clientWidth:c,clientHeight:d}=this.$refs.container,C=Io(this.getLeft(o),0,c),b=Io(this.getTop(o),0,d),m=C/c,E=Io(1-b/d,0,1);this.change(this.value.hsv.h,m,E,this.value.hsv.a)},handleMouseDown(o){dp.methods.handleMouseDown.call(this,o),s(window,"mouseup",this.handleChange)},unbindEventListeners(o){dp.methods.unbindEventListeners.call(this,o),a(window,"mouseup",this.handleChange)}}};function RQ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([o.prefixCls+"-saturation-wrapper"]),tabindex:"0",onKeydown:[c[1]||(c[1]=t.withKeys((...E)=>o.handleEscape&&o.handleEscape(...E),["esc"])),c[3]||(c[3]=t.withKeys((...E)=>o.handleLeft&&o.handleLeft(...E),["left"])),c[4]||(c[4]=t.withKeys((...E)=>o.handleRight&&o.handleRight(...E),["right"])),c[5]||(c[5]=t.withKeys((...E)=>o.handleUp&&o.handleUp(...E),["up"])),c[6]||(c[6]=t.withKeys((...E)=>o.handleDown&&o.handleDown(...E),["down"]))],onClick:c[2]||(c[2]=E=>o.$el.focus())},[t.createElementVNode("div",{ref:"container",style:t.normalizeStyle(m.bgColorStyle),class:t.normalizeClass([o.prefixCls+"-saturation"]),onMousedown:c[0]||(c[0]=(...E)=>m.handleMouseDown&&m.handleMouseDown(...E))},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-saturation--white"])},null,2),t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-saturation--black"])},null,2),t.createElementVNode("div",{style:t.normalizeStyle(m.pointerStyle),class:t.normalizeClass([o.prefixCls+"-saturation-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-saturation-circle"])},null,2)],6)],38)],34)}var IQ=l(AQ,[["render",RQ]]);const DQ={name:"Hue",mixins:[dp,cp],emits:["change"],data(){const o=.06944444444444445,c=20*o;return{left:-o,right:o,up:c,down:-c,powerKey:"shiftKey",percent:Io(this.value.hsl.h*100/360,0,100)}},watch:{value(){this.percent=Io(this.value.hsl.h*100/360,0,100)}},methods:{change(o){this.percent=Io(o,0,100);const{h:c,s:d,l:C,a:b}=this.value.hsl,m=Io(o/100*360,0,360);c!==m&&this.$emit("change",{h:m,s:d,l:C,a:b,source:"hsl"})},handleSlide(o,c){if(o.preventDefault(),o.stopPropagation(),o[this.powerKey]){this.change(c<0?0:100);return}this.change(this.percent+c)},handleChange(o){o.preventDefault(),o.stopPropagation();const c=this.getLeft(o);if(c<0){this.change(0);return}const{clientWidth:d}=this.$refs.container;if(c>d){this.change(100);return}this.change(c*100/d)}}};function NQ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([o.prefixCls+"-hue"]),tabindex:"0",onClick:c[3]||(c[3]=E=>o.$el.focus()),onKeydown:[c[4]||(c[4]=t.withKeys((...E)=>o.handleEscape&&o.handleEscape(...E),["esc"])),c[5]||(c[5]=t.withKeys((...E)=>o.handleLeft&&o.handleLeft(...E),["left"])),c[6]||(c[6]=t.withKeys((...E)=>o.handleRight&&o.handleRight(...E),["right"])),c[7]||(c[7]=t.withKeys((...E)=>o.handleUp&&o.handleUp(...E),["up"])),c[8]||(c[8]=t.withKeys((...E)=>o.handleDown&&o.handleDown(...E),["down"]))]},[t.createElementVNode("div",{ref:"container",class:t.normalizeClass([o.prefixCls+"-hue-container"]),onMousedown:c[0]||(c[0]=(...E)=>o.handleMouseDown&&o.handleMouseDown(...E)),onTouchmove:c[1]||(c[1]=(...E)=>m.handleChange&&m.handleChange(...E)),onTouchstart:c[2]||(c[2]=(...E)=>m.handleChange&&m.handleChange(...E))},[t.createElementVNode("div",{style:t.normalizeStyle({top:0,left:`${b.percent}%`}),class:t.normalizeClass([o.prefixCls+"-hue-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-hue-picker"])},null,2)],6)],34)],34)}var $Q=l(DQ,[["render",NQ]]);const VQ={name:"Alpha",mixins:[dp,cp],emits:["change"],data(){return{left:-1,right:1,up:10,down:-10,powerKey:"shiftKey"}},computed:{gradientStyle(){const{r:o,g:c,b:d}=this.value.rgba,C=up({r:o,g:c,b:d,a:0}),b=up({r:o,g:c,b:d,a:1});return{background:`linear-gradient(to right, ${C} 0%, ${b} 100%)`}}},methods:{change(o){const{h:c,s:d,l:C}=this.value.hsl,{a:b}=this.value;b!==o&&this.$emit("change",{h:c,s:d,l:C,a:o,source:"rgba"})},handleSlide(o,c){o.preventDefault(),o.stopPropagation(),this.change(Io(o[this.powerKey]?c:Math.round(this.value.hsl.a*100+c)/100,0,1))},handleChange(o){o.preventDefault(),o.stopPropagation();const c=this.getLeft(o);if(c<0){this.change(0);return}const{clientWidth:d}=this.$refs.container;if(c>d){this.change(1);return}this.change(Math.round(c*100/d)/100)}}};function LQ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([o.prefixCls+"-alpha"]),tabindex:"0",onClick:c[3]||(c[3]=E=>o.$el.focus()),onKeydown:[c[4]||(c[4]=t.withKeys((...E)=>o.handleEscape&&o.handleEscape(...E),["esc"])),c[5]||(c[5]=t.withKeys((...E)=>o.handleLeft&&o.handleLeft(...E),["left"])),c[6]||(c[6]=t.withKeys((...E)=>o.handleRight&&o.handleRight(...E),["right"])),c[7]||(c[7]=t.withKeys((...E)=>o.handleUp&&o.handleUp(...E),["up"])),c[8]||(c[8]=t.withKeys((...E)=>o.handleDown&&o.handleDown(...E),["down"]))]},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-alpha-checkboard-wrap"])},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-alpha-checkerboard"])},null,2)],2),t.createElementVNode("div",{style:t.normalizeStyle(m.gradientStyle),class:t.normalizeClass([o.prefixCls+"-alpha-gradient"])},null,6),t.createElementVNode("div",{ref:"container",class:t.normalizeClass([o.prefixCls+"-alpha-container"]),onMousedown:c[0]||(c[0]=(...E)=>o.handleMouseDown&&o.handleMouseDown(...E)),onTouchmove:c[1]||(c[1]=(...E)=>m.handleChange&&m.handleChange(...E)),onTouchstart:c[2]||(c[2]=(...E)=>m.handleChange&&m.handleChange(...E))},[t.createElementVNode("div",{style:t.normalizeStyle({top:0,left:`${o.value.a*100}%`}),class:t.normalizeClass([o.prefixCls+"-alpha-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-alpha-picker"])},null,2)],6)],34)],34)}var BQ=l(VQ,[["render",LQ]]);const UQ={name:"ColorPicker",components:{Drop:Ge,RecommendColors:PQ,Saturation:IQ,Hue:$Q,Alpha:BQ,iInput:oo,iButton:Qr,Icon:S},directives:{clickOutside:hn},mixins:[Qn,cp,un,Po],emits:["on-active-change","on-open-change","on-change","on-pick-success","on-pick-clear","update:modelValue"],provide(){return{ColorPickerInstance:this}},props:{modelValue:{type:String,default:void 0},hue:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},recommend:{type:Boolean,default:!1},format:{type:String,validator(o){return _(o,["hsl","hsv","hex","rgb"])},default:void 0},colors:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},hideDropDown:{type:Boolean,default:!1},placement:{type:String,validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},name:{type:String,default:void 0},editable:{type:Boolean,default:!0},capture:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return o.$VIEWUI?o.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{val:hp(this.modelValue||""),currentValue:this.modelValue||"",dragging:!1,visible:!1,recommendedColor:["#2d8cf0","#19be6b","#ff9900","#ed4014","#00b5ff","#19c919","#f9e31c","#ea1a1a","#9b1dea","#00c2b1","#ac7a33","#1d35ea","#8bc34a","#f16b62","#ea4ca3","#0d94aa","#febd79","#5d4037","#00bcd4","#f06292","#cddc39","#607d8b","#000000","#ffffff"]}},computed:{arrowClasses(){return[`${this.inputPrefixCls}-icon`,`${this.inputPrefixCls}-icon-normal`]},transition(){return _(this.placement,["bottom-start","bottom","bottom-end"])?"slide-up":"fade"},saturationColors:{get(){return this.val},set(o){this.val=o,this.$emit("on-active-change",this.formatColor)}},classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-transfer`]:this.transfer}]},wrapClasses(){return[`${this.prefixCls}-rel`,`${this.prefixCls}-${this.size}`,`${this.inputPrefixCls}-wrapper`,`${this.inputPrefixCls}-wrapper-${this.size}`,{[`${this.prefixCls}-disabled`]:this.itemDisabled}]},inputClasses(){return[`${this.prefixCls}-input`,`${this.inputPrefixCls}`,`${this.inputPrefixCls}-${this.size}`,{[`${this.prefixCls}-focused`]:this.visible,[`${this.prefixCls}-disabled`]:this.itemDisabled}]},dropClasses(){return{[`${this.transferPrefixCls}-no-max-height`]:!0,[`${this.prefixCls}-transfer`]:this.transfer,[`${this.prefixCls}-hide-drop`]:this.hideDropDown,[this.transferClassName]:this.transferClassName}},displayedColorStyle(){return{backgroundColor:up(this.visible?this.saturationColors.rgba:Nt(this.modelValue).toRgb())}},formatColor(){const{format:o,saturationColors:c}=this;if(o){if(o==="hsl")return Nt(c.hsl).toHslString();if(o==="hsv")return Nt(c.hsv).toHsvString();if(o==="hex")return c.hex;if(o==="rgb")return up(c.rgba)}else if(this.alpha)return up(c.rgba);return c.hex},confirmColorClasses(){return[`${this.prefixCls}-confirm-color`,{[`${this.prefixCls}-confirm-color-editable`]:this.editable}]},arrowType(){const o=this.globalConfig;let c="ios-arrow-down";return o&&(o.colorPicker.customArrow?c="":o.colorPicker.arrow&&(c=o.colorPicker.arrow)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.colorPicker.customArrow&&(c=o.colorPicker.customArrow),c},arrowSize(){const o=this.globalConfig;let c="";return o&&o.colorPicker.arrowSize&&(c=o.colorPicker.arrowSize),c}},watch:{modelValue(o){this.val=hp(o||"")},visible(o){this.val=hp(this.modelValue||""),this.$refs.drop[o?"update":"destroy"](),this.$emit("on-open-change",!!o)}},methods:{setDragging(o){this.dragging=o},handleClose(o){if(this.visible){if(this.dragging||o.type==="mousedown"){this.$refs.editColorInput&&o.target!==this.$refs.editColorInput.$el.querySelector("input")&&o.preventDefault();return}if(this.transfer){const c=this.$refs.drop.$refs.drop;if(c===o.target||c.contains(o.target))return}this.closer(o);return}this.visible=!1},toggleVisible(){this.itemDisabled||(this.visible=!this.visible,this.$refs.input.focus())},childChange(o){this.colorChange(o)},colorChange(o,c){this.oldHue=this.saturationColors.hsl.h,this.saturationColors=hp(o,c||this.oldHue)},closer(o){o&&(o.preventDefault(),o.stopPropagation()),this.visible=!1,this.$refs.input.focus()},handleButtons(o,c){this.currentValue=c,this.$emit("update:modelValue",c),this.$emit("on-change",c),this.handleFormItemChange("change",c),this.closer(o)},handleSuccess(o){this.handleButtons(o,this.formatColor),this.$emit("on-pick-success")},handleClear(o){this.handleButtons(o,""),this.$emit("on-pick-clear")},handleSelectColor(o){this.val=hp(o),this.$emit("on-active-change",this.formatColor)},handleEditColor(o){const c=o.target.value;this.handleSelectColor(c)},handleFirstTab(o){o.shiftKey&&(o.preventDefault(),o.stopPropagation(),this.$refs.ok.$el.focus())},handleLastTab(o){o.shiftKey||(o.preventDefault(),o.stopPropagation(),this.$refs.saturation.$el.focus())},onTab(o){this.visible&&o.preventDefault()},onEscape(o){this.visible&&this.closer(o)},onArrow(o){this.visible||(o.preventDefault(),o.stopPropagation(),this.visible=!0)},handleOnEscapeKeydown(o){this.closer(o)},handleOnDragging(o){this.setDragging(o)}}},zQ=["name","value"],FQ=["tabindex"];function XQ(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Saturation"),W=t.resolveComponent("Hue"),z=t.resolveComponent("Alpha"),G=t.resolveComponent("recommend-colors"),ae=t.resolveComponent("i-input"),xe=t.resolveComponent("i-button"),Oe=t.resolveComponent("Drop"),ve=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass(m.wrapClasses),onClick:c[4]||(c[4]=(...se)=>m.toggleVisible&&m.toggleVisible(...se))},[t.createElementVNode("input",{name:d.name,value:b.currentValue,type:"hidden"},null,8,zQ),t.createVNode(E,{type:m.arrowType,custom:m.customArrowType,size:m.arrowSize,class:t.normalizeClass(m.arrowClasses)},null,8,["type","custom","size","class"]),t.createElementVNode("div",{ref:"input",tabindex:o.itemDisabled?void 0:0,class:t.normalizeClass(m.inputClasses),onKeydown:[c[0]||(c[0]=t.withKeys((...se)=>m.onTab&&m.onTab(...se),["tab"])),c[1]||(c[1]=t.withKeys((...se)=>m.onEscape&&m.onEscape(...se),["esc"])),c[2]||(c[2]=t.withKeys((...se)=>m.onArrow&&m.onArrow(...se),["up"])),c[3]||(c[3]=t.withKeys((...se)=>m.onArrow&&m.onArrow(...se),["down"]))]},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-color"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-color-empty"])},[t.createElementVNode("i",{class:t.normalizeClass([o.iconPrefixCls,o.iconPrefixCls+"-ios-close"])},null,2)],2),[[t.vShow,d.modelValue===""&&!b.visible]]),t.withDirectives(t.createElementVNode("div",{style:t.normalizeStyle(m.displayedColorStyle)},null,4),[[t.vShow,d.modelValue||b.visible]])],2)],42,FQ)],2),t.createVNode(Oe,{ref:"drop",visible:b.visible,placement:d.placement,transfer:d.transfer,classes:m.dropClasses,eventsEnabled:d.eventsEnabled,"transition-name":"transition-drop"},{default:t.withCtx(()=>[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[b.visible?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([o.prefixCls+"-picker"])},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-picker-wrapper"])},[t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-picker-panel"])},[t.createVNode(V,{ref:"saturation",value:m.saturationColors,focused:b.visible,onChange:m.childChange,onKeydown:t.withKeys(m.handleFirstTab,["tab"])},null,8,["value","focused","onChange","onKeydown"])],2),d.hue?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([o.prefixCls+"-picker-hue-slider"])},[t.createVNode(W,{value:m.saturationColors,onChange:m.childChange},null,8,["value","onChange"])],2)):t.createCommentVNode("",!0),d.alpha?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([o.prefixCls+"-picker-alpha-slider"])},[t.createVNode(z,{value:m.saturationColors,onChange:m.childChange},null,8,["value","onChange"])],2)):t.createCommentVNode("",!0),d.colors.length?(t.openBlock(),t.createBlock(G,{key:2,list:d.colors,class:t.normalizeClass([o.prefixCls+"-picker-colors"]),onPickerColor:m.handleSelectColor},null,8,["list","class","onPickerColor"])):t.createCommentVNode("",!0),!d.colors.length&&d.recommend?(t.openBlock(),t.createBlock(G,{key:3,list:b.recommendedColor,class:t.normalizeClass([o.prefixCls+"-picker-colors"]),onPickerColor:m.handleSelectColor},null,8,["list","class","onPickerColor"])):t.createCommentVNode("",!0)],2),t.createElementVNode("div",{class:t.normalizeClass([o.prefixCls+"-confirm"])},[t.createElementVNode("span",{class:t.normalizeClass(m.confirmColorClasses)},[d.editable?(t.openBlock(),t.createBlock(ae,{key:0,ref:"editColorInput",modelValue:m.formatColor,size:"small",onOnEnter:m.handleEditColor,onOnBlur:m.handleEditColor},null,8,["modelValue","onOnEnter","onOnBlur"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(m.formatColor),1)],64))],2),t.createVNode(xe,{class:t.normalizeClass([o.prefixCls+"-confirm-btn-cancel"]),ref:"clear",tabindex:0,size:"small",onClick:m.handleClear,onKeydown:[t.withKeys(m.handleClear,["enter"]),t.withKeys(m.closer,["esc"])]},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.t("i.datepicker.clear")),1)]),_:1},8,["class","onClick","onKeydown"]),t.createVNode(xe,{ref:"ok",tabindex:0,size:"small",type:"primary",onClick:m.handleSuccess,onKeydown:[t.withKeys(m.handleLastTab,["tab"]),t.withKeys(m.handleSuccess,["enter"]),t.withKeys(m.closer,["esc"])]},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.t("i.datepicker.ok")),1)]),_:1},8,["onClick","onKeydown"])],2)],2)):t.createCommentVNode("",!0)]),_:1})]),_:1},8,["visible","placement","transfer","classes","eventsEnabled"])],2)),[[ve,m.handleClose,d.capture]])}var FE=l(UQ,[["render",XQ]]);const WQ="ivu-layout",QQ={name:"Content",computed:{wrapClasses(){return`${WQ}-content`}}};function HQ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[t.renderSlot(o.$slots,"default")],2)}var Xx=l(QQ,[["render",HQ]]);function GQ(o){var c;if(o.nodeName==="SELECT")o.focus(),c=o.value;else if(o.nodeName==="INPUT"||o.nodeName==="TEXTAREA"){var d=o.hasAttribute("readonly");d||o.setAttribute("readonly",""),o.select(),o.setSelectionRange(0,o.value.length),d||o.removeAttribute("readonly"),c=o.value}else{o.hasAttribute("contenteditable")&&o.focus();var C=window.getSelection(),b=document.createRange();b.selectNodeContents(o),C.removeAllRanges(),C.addRange(b),c=C.toString()}return c}var YQ=GQ,XE={name:"RenderCell",props:{render:Function},render(){return this.render(t.h)}};const jQ={components:{RenderCell:XE},props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},withIcon:Boolean,render:{type:Function},hasTitle:Boolean,styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String},background:{type:Boolean,default:!1},msgType:{type:String}},data(){return{withDesc:!1}},computed:{baseClass(){return`${this.prefixCls}-notice`},renderFunc(){return this.render||function(){}},classes(){return[this.baseClass,{[`${this.className}`]:!!this.className,[`${this.baseClass}-closable`]:this.closable,[`${this.baseClass}-with-desc`]:this.withDesc,[`${this.baseClass}-with-background`]:this.background}]},contentClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]},messageContentClasses(){return[`${this.baseClass}-content`,{[`${this.baseClass}-content-${this.msgType}`]:this.msgType,[`${this.baseClass}-content-background`]:this.background}]},contentWithIcon(){return[this.withIcon?`${this.prefixCls}-content-with-icon`:"",!this.hasTitle&&this.withIcon?`${this.prefixCls}-content-with-render-notitle`:""]},messageClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]}},methods:{clearCloseTimer(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close(){this.clearCloseTimer(),this.onClose(),this.$parent.$parent.close(this.name)},handleEnter(o){this.type==="message"&&(o.style.height=o.scrollHeight+"px")},handleLeave(o){this.type==="message"&&r&&document.getElementsByClassName("ivu-message-notice").length!==1&&(o.style.height=0,o.style.paddingTop=0,o.style.paddingBottom=0)}},mounted(){if(this.handleEnter(this.$el),this.clearCloseTimer(),this.duration!==0&&(this.closeTimer=setTimeout(()=>{this.close()},this.duration*1e3)),this.prefixCls==="ivu-notice"){let o=this.$refs.content.querySelectorAll(`.${this.prefixCls}-desc`)[0];this.withDesc=this.render?!0:o?o.innerHTML!=="":!1}},beforeUnmount(){this.handleLeave(this.$el),this.clearCloseTimer()}},qQ=["innerHTML"],ZQ=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)],KQ=["innerHTML"],JQ=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)];function eH(o,c,d,C,b,m){const E=t.resolveComponent("render-cell");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(d.styles)},[d.type==="notice"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("div",{class:t.normalizeClass(m.contentClasses),ref:"content",innerHTML:d.content},null,10,qQ),t.createElementVNode("div",{class:t.normalizeClass(m.contentWithIcon)},[t.createVNode(E,{render:m.renderFunc},null,8,["render"])],2),d.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([m.baseClass+"-close"]),onClick:c[0]||(c[0]=(...V)=>m.close&&m.close(...V))},ZQ,2)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0),d.type==="message"?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(m.messageContentClasses),ref:"content"},[t.createElementVNode("div",{class:t.normalizeClass([m.baseClass+"-content-text"]),innerHTML:d.content},null,10,KQ),t.createElementVNode("div",{class:t.normalizeClass([m.baseClass+"-content-text"])},[t.createVNode(E,{render:m.renderFunc},null,8,["render"])],2),d.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([m.baseClass+"-close"]),onClick:c[1]||(c[1]=(...V)=>m.close&&m.close(...V))},JQ,2)):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0)],6)}var tH=l(jQ,[["render",eH]]);const nH="ivu-notification";let iH=0;const rH=Date.now();function sH(){return"ivuNotification_"+rH+"_"+iH++}const oH={components:{Notice:tH},props:{prefixCls:{type:String,default:nH},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String},transitionName:{type:String}},data(){return{notices:[],tIndex:this.handleGetIndex()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.className}`]:!!this.className}]},wrapStyles(){let o=Object.assign({},this.styles);return o["z-index"]=1010+this.tIndex,o}},methods:{add(o){const c=o.name||sH();let d=Object.assign({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:c},o);this.notices.push(d),this.tIndex=this.handleGetIndex()},close(o){const c=this.notices;for(let d=0;d<c.length;d++)if(c[d].name===o){this.notices.splice(d,1);break}},closeAll(){this.notices=[]},handleGetIndex(){return Xe(),we}}};function aH(o,c,d,C,b,m){const E=t.resolveComponent("Notice");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.wrapStyles)},[t.createVNode(t.TransitionGroup,{name:d.transitionName,appear:""},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.notices,V=>(t.openBlock(),t.createBlock(E,{key:V.name,"prefix-cls":d.prefixCls,styles:V.styles,type:V.type,content:V.content,duration:V.duration,render:V.render,"has-title":V.hasTitle,withIcon:V.withIcon,closable:V.closable,name:V.name,"transition-name":V.transitionName,background:V.background,"msg-type":V.msgType,"on-close":V.onClose},null,8,["prefix-cls","styles","type","content","duration","render","has-title","withIcon","closable","name","transition-name","background","msg-type","on-close"]))),128))]),_:1},8,["name"])],6)}var lv=l(oH,[["render",aH]]);lv.newInstance=o=>{if(!r)return;const c=o||{};let d=null;const C=t.createApp({render(){return t.h(lv,Object.assign({ref:"notification"},c))},created(){d=t.getCurrentInstance()}}),b=document.createElement("div");document.body.appendChild(b),C.mount(b);const m=d.refs.notification;return{notice(E){m.add(E)},remove(E){m.close(E)},component:m,destroy(E){m.closeAll(),r&&setTimeout(function(){document.body.removeChild(document.getElementsByClassName(E)[0])},500)}}};const Wx="ivu-message",WE="ivu-icon",QE="ivu_message_key_",Uu={top:24,duration:1.5,background:!1};let cv,HE=1;const lH={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle",loading:"ios-loading"},GE="move-up";function YE(){return cv=cv||lv.newInstance({prefixCls:Wx,styles:{top:`${Uu.top}px`},transitionName:GE}),cv}function cH(o="",c=Uu.duration,d,C=function(){},b=!1,m=function(){},E=Uu.background){const V=lH[d],W=d==="loading"?" ivu-load-loop":"";let z=YE();return z.notice({name:`${QE}${HE}`,duration:c,styles:{},transitionName:GE,content:`
            <div class="${Wx}-custom-content ${Wx}-${d}">
                <i class="${WE} ${WE}-${V} ${W}"></i>
                <span>${o}</span>
            </div>
        `,render:m,onClose:C,closable:b,type:"message",msgType:d,background:E}),function(){let G=HE++;return function(){z.remove(`${QE}${G}`)}}()}var fp={name:"Message",info(o){return this.message("info",o)},success(o){return this.message("success",o)},warning(o){return this.message("warning",o)},error(o){return this.message("error",o)},loading(o){return this.message("loading",o)},message(o,c){return typeof c=="string"&&(c={content:c}),cH(c.content,c.duration,o,c.onClose,c.closable,c.render,c.background)},config(o){(o.top||o.top===0)&&(Uu.top=o.top),(o.duration||o.duration===0)&&(Uu.duration=o.duration),o.background&&(Uu.background=o.background)},destroy(){let o=YE();cv=null,o.destroy("ivu-message")}};const hH="复制成功",uH="复制失败";function hv({text:o="",successTip:c=hH,errorTip:d=uH,success:C,error:b,showTip:m=!0}){if(!r)return;const E=document.documentElement.getAttribute("dir")==="rtl",V=document.createElement("textarea");V.style.fontSize="12pt",V.style.border="0",V.style.padding="0",V.style.margin="0",V.style.position="absolute",V.style[E?"right":"left"]="-9999px";let W=window.pageYOffset||document.documentElement.scrollTop;V.style.top=`${W}px`,V.setAttribute("readonly",""),V.value=o,document.body.appendChild(V),YQ(V);let z;try{z=document.execCommand("copy"),m&&fp.success({content:c}),document.body.removeChild(V),C&&C.call()}catch{z=!1,m&&fp.error({content:d}),document.body.removeChild(V),b&&b.call()}}function Qx(o){return o*1<10?`0${o}`:o}const dH={name:"CountDown",emits:["on-end"],props:{format:{type:Function},target:{type:[Date,Number]},interval:{type:Number,default:1e3}},data(){return{lastTime:""}},methods:{initTime(){let o=0,c=0;try{Object.prototype.toString.call(this.target)==="[object Date]"?c=this.target.getTime():c=new Date(this.target).getTime()}catch(d){throw new Error("invalid target prop",d)}return o=c-new Date().getTime(),o<0?0:o},tick(){let{lastTime:o}=this;this.timer=setTimeout(()=>{o<this.interval?(clearTimeout(this.timer),this.lastTime=0,this.$emit("on-end")):(o-=this.interval,this.lastTime=o,this.tick())},this.interval)},defaultFormat(o){const c=Math.floor(o/36e5),d=Math.floor((o-c*36e5)/6e4),C=Math.floor((o-c*36e5-d*6e4)/1e3);return`${Qx(c)}:${Qx(d)}:${Qx(C)}`}},computed:{result(){const{format:o=this.defaultFormat}=this;return o(this.lastTime)}},watch:{target(){this.timer&&clearTimeout(this.timer),this.lastTime=this.initTime(),this.tick()}},created(){this.lastTime=this.initTime()},mounted(){this.tick()},beforeUnmount(){this.timer&&clearTimeout(this.timer)}};function fH(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("span",null,t.toDisplayString(m.result),1)}var jE=l(dH,[["render",fH]]),Hx={exports:{}};(function(o,c){(function(d,C){o.exports=C(Q,c,o)})(J,function(d,C,b){var m=function(E,V,W,z,G,ae){function xe(He){var De,Ke,Ye,zt,Ft,Mt,xt=He<0;if(He=Math.abs(He).toFixed(se.decimals),He+="",De=He.split("."),Ke=De[0],Ye=De.length>1?se.options.decimal+De[1]:"",se.options.useGrouping){for(zt="",Ft=0,Mt=Ke.length;Ft<Mt;++Ft)Ft!==0&&Ft%3===0&&(zt=se.options.separator+zt),zt=Ke[Mt-Ft-1]+zt;Ke=zt}return se.options.numerals.length&&(Ke=Ke.replace(/[0-9]/g,function(At){return se.options.numerals[+At]}),Ye=Ye.replace(/[0-9]/g,function(At){return se.options.numerals[+At]})),(xt?"-":"")+se.options.prefix+Ke+Ye+se.options.suffix}function Oe(He,De,Ke,Ye){return Ke*(-Math.pow(2,-10*He/Ye)+1)*1024/1023+De}function ve(He){return typeof He=="number"&&!isNaN(He)}var se=this;if(se.version=function(){return"1.9.3"},se.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:Oe,formattingFn:xe,prefix:"",suffix:"",numerals:[]},ae&&typeof ae=="object")for(var Pe in se.options)ae.hasOwnProperty(Pe)&&ae[Pe]!==null&&(se.options[Pe]=ae[Pe]);se.options.separator===""?se.options.useGrouping=!1:se.options.separator=""+se.options.separator;for(var $t=0,mt=["webkit","moz","ms","o"],Ot=0;Ot<mt.length&&!window.requestAnimationFrame;++Ot)window.requestAnimationFrame=window[mt[Ot]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[mt[Ot]+"CancelAnimationFrame"]||window[mt[Ot]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(He,De){var Ke=new Date().getTime(),Ye=Math.max(0,16-(Ke-$t)),zt=window.setTimeout(function(){He(Ke+Ye)},Ye);return $t=Ke+Ye,zt}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(He){clearTimeout(He)}),se.initialize=function(){return!!se.initialized||(se.error="",se.d=typeof E=="string"?document.getElementById(E):E,se.d?(se.startVal=Number(V),se.endVal=Number(W),ve(se.startVal)&&ve(se.endVal)?(se.decimals=Math.max(0,z||0),se.dec=Math.pow(10,se.decimals),se.duration=1e3*Number(G)||2e3,se.countDown=se.startVal>se.endVal,se.frameVal=se.startVal,se.initialized=!0,!0):(se.error="[CountUp] startVal ("+V+") or endVal ("+W+") is not a number",!1)):(se.error="[CountUp] target is null or undefined",!1))},se.printValue=function(He){var De=se.options.formattingFn(He);se.d.tagName==="INPUT"?this.d.value=De:se.d.tagName==="text"||se.d.tagName==="tspan"?this.d.textContent=De:this.d.innerHTML=De},se.count=function(He){se.startTime||(se.startTime=He),se.timestamp=He;var De=He-se.startTime;se.remaining=se.duration-De,se.options.useEasing?se.countDown?se.frameVal=se.startVal-se.options.easingFn(De,0,se.startVal-se.endVal,se.duration):se.frameVal=se.options.easingFn(De,se.startVal,se.endVal-se.startVal,se.duration):se.countDown?se.frameVal=se.startVal-(se.startVal-se.endVal)*(De/se.duration):se.frameVal=se.startVal+(se.endVal-se.startVal)*(De/se.duration),se.countDown?se.frameVal=se.frameVal<se.endVal?se.endVal:se.frameVal:se.frameVal=se.frameVal>se.endVal?se.endVal:se.frameVal,se.frameVal=Math.round(se.frameVal*se.dec)/se.dec,se.printValue(se.frameVal),De<se.duration?se.rAF=requestAnimationFrame(se.count):se.callback&&se.callback()},se.start=function(He){se.initialize()&&(se.callback=He,se.rAF=requestAnimationFrame(se.count))},se.pauseResume=function(){se.paused?(se.paused=!1,delete se.startTime,se.duration=se.remaining,se.startVal=se.frameVal,requestAnimationFrame(se.count)):(se.paused=!0,cancelAnimationFrame(se.rAF))},se.reset=function(){se.paused=!1,delete se.startTime,se.initialized=!1,se.initialize()&&(cancelAnimationFrame(se.rAF),se.printValue(se.startVal))},se.update=function(He){if(se.initialize()){if(He=Number(He),!ve(He))return void(se.error="[CountUp] update() - new endVal is not a number: "+He);se.error="",He!==se.frameVal&&(cancelAnimationFrame(se.rAF),se.paused=!1,delete se.startTime,se.startVal=se.frameVal,se.endVal=He,se.countDown=se.startVal>se.endVal,se.rAF=requestAnimationFrame(se.count))}},se.initialize()&&se.printValue(se.startVal)};return m})})(Hx,Hx.exports);var pH=Hx.exports;const mH={name:"CountUp",props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1,default(){return{}}},callback:{type:Function,required:!1,default:()=>{}}},data(){return{CountUp:null}},watch:{end(o){this.CountUp&&this.CountUp.update&&this.CountUp.update(o)}},mounted(){this.init()},methods:{init(){this.CountUp||(this.CountUp=new pH(this.$el,this.start,this.end,this.decimals,this.duration,this.options),this.CountUp.start(()=>{this.callback(this.CountUp)}))},destroy(){this.CountUp=null}},beforeUnmounted(){this.destroy()},start(o){this.CountUp&&this.CountUp.start&&this.CountUp.start(()=>{o&&o(this.CountUp)})},pauseResume(){this.CountUp&&this.CountUp.pauseResume&&this.CountUp.pauseResume()},reset(){this.CountUp&&this.CountUp.reset&&this.CountUp.reset()},update(o){this.CountUp&&this.CountUp.update&&this.CountUp.update(o)}},gH={class:"ivu-count-up"};function vH(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("span",gH)}var qE=l(mH,[["render",vH]]),Do={},ZE=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,dh=/\d\d?/,yH=/\d{3}/,bH=/\d{4}/,uv=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,KE=function(){};function JE(o,c){for(var d=[],C=0,b=o.length;C<b;C++)d.push(o[C].substr(0,c));return d}function e3(o){return function(c,d,C){var b=C[o].indexOf(d.charAt(0).toUpperCase()+d.substr(1).toLowerCase());~b&&(c.month=b)}}function ra(o,c){for(o=String(o),c=c||2;o.length<c;)o="0"+o;return o}var t3=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n3=["January","February","March","April","May","June","July","August","September","October","November","December"],OH=JE(n3,3),xH=JE(t3,3);Do.i18n={dayNamesShort:xH,dayNames:t3,monthNamesShort:OH,monthNames:n3,amPm:["am","pm"],DoFn:function(o){return o+["th","st","nd","rd"][o%10>3?0:(o-o%10!==10)*o%10]}};var i3={D:function(o){return o.getDay()},DD:function(o){return ra(o.getDay())},Do:function(o,c){return c.DoFn(o.getDate())},d:function(o){return o.getDate()},dd:function(o){return ra(o.getDate())},ddd:function(o,c){return c.dayNamesShort[o.getDay()]},dddd:function(o,c){return c.dayNames[o.getDay()]},M:function(o){return o.getMonth()+1},MM:function(o){return ra(o.getMonth()+1)},MMM:function(o,c){return c.monthNamesShort[o.getMonth()]},MMMM:function(o,c){return c.monthNames[o.getMonth()]},yy:function(o){return String(o.getFullYear()).substr(2)},yyyy:function(o){return o.getFullYear()},h:function(o){return o.getHours()%12||12},hh:function(o){return ra(o.getHours()%12||12)},H:function(o){return o.getHours()},HH:function(o){return ra(o.getHours())},m:function(o){return o.getMinutes()},mm:function(o){return ra(o.getMinutes())},s:function(o){return o.getSeconds()},ss:function(o){return ra(o.getSeconds())},S:function(o){return Math.round(o.getMilliseconds()/100)},SS:function(o){return ra(Math.round(o.getMilliseconds()/10),2)},SSS:function(o){return ra(o.getMilliseconds(),3)},a:function(o,c){return o.getHours()<12?c.amPm[0]:c.amPm[1]},A:function(o,c){return o.getHours()<12?c.amPm[0].toUpperCase():c.amPm[1].toUpperCase()},ZZ:function(o){var c=o.getTimezoneOffset();return(c>0?"-":"+")+ra(Math.floor(Math.abs(c)/60)*100+Math.abs(c)%60,4)}},Ei={d:[dh,function(o,c){o.day=c}],M:[dh,function(o,c){o.month=c-1}],yy:[dh,function(o,c){var d=new Date,C=+(""+d.getFullYear()).substr(0,2);o.year=""+(c>68?C-1:C)+c}],h:[dh,function(o,c){o.hour=c}],m:[dh,function(o,c){o.minute=c}],s:[dh,function(o,c){o.second=c}],yyyy:[bH,function(o,c){o.year=c}],S:[/\d/,function(o,c){o.millisecond=c*100}],SS:[/\d{2}/,function(o,c){o.millisecond=c*10}],SSS:[yH,function(o,c){o.millisecond=c}],D:[dh,KE],ddd:[uv,KE],MMM:[uv,e3("monthNamesShort")],MMMM:[uv,e3("monthNames")],a:[uv,function(o,c,d){var C=c.toLowerCase();C===d.amPm[0]?o.isPm=!1:C===d.amPm[1]&&(o.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(o,c){var d=(c+"").match(/([\+\-]|\d\d)/gi),C;d&&(C=+(d[1]*60)+parseInt(d[2],10),o.timezoneOffset=d[0]==="+"?C:-C)}]};Ei.DD=Ei.DD,Ei.dddd=Ei.ddd,Ei.Do=Ei.dd=Ei.d,Ei.mm=Ei.m,Ei.hh=Ei.H=Ei.HH=Ei.h,Ei.MM=Ei.M,Ei.ss=Ei.s,Ei.A=Ei.a,Do.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Do.format=function(o,c,d){var C=d||Do.i18n;if(typeof o=="number"&&(o=new Date(o)),Object.prototype.toString.call(o)!=="[object Date]"||isNaN(o.getTime()))throw new Error("Invalid Date in fecha.format");return c=Do.masks[c]||c||Do.masks.default,c.replace(ZE,function(b){return b in i3?i3[b](o,C):b.slice(1,b.length-1)})},Do.parse=function(o,c,d){var C=d||Do.i18n;if(typeof c!="string")throw new Error("Invalid format in fecha.parse");if(c=Do.masks[c]||c,o.length>1e3)return!1;var b=!0,m={};if(c.replace(ZE,function(W){if(Ei[W]){var z=Ei[W],G=o.search(z[0]);~G?o.replace(z[0],function(ae){return z[1](m,ae,C),o=o.substr(G+ae.length),ae}):b=!1}return Ei[W]?"":W.slice(1,W.length-1)}),!b)return!1;var E=new Date;m.isPm===!0&&m.hour!=null&&+m.hour!=12?m.hour=+m.hour+12:m.isPm===!1&&+m.hour==12&&(m.hour=0);var V;return m.timezoneOffset!=null?(m.minute=+(m.minute||0)-+m.timezoneOffset,V=new Date(Date.UTC(m.year||E.getFullYear(),m.month||0,m.day||1,m.hour||0,m.minute||0,m.second||0,m.millisecond||0))):V=new Date(m.year||E.getFullYear(),m.month||0,m.day||1,m.hour||0,m.minute||0,m.second||0,m.millisecond||0),V};const Gx=function(o){let c=new Date(o);return isNaN(c.getTime())&&typeof o=="string"&&(c=o.split("-").map(Number),c[1]+=1,c=new Date(...c)),isNaN(c.getTime())?null:c},Hr=function(o){const c=new Date(o);return c.setHours(0,0,0,0),c.getTime()},wH=(o,c,d)=>{if(!c||!d)return!1;const[C,b]=[c,d].sort();return o>=C&&o<=b},pp=function(o,c){return o=Gx(o),o?Do.format(o,c||"yyyy-MM-dd"):""},dv=function(o,c){return Do.parse(o,c||"yyyy-MM-dd")},r3=function(o,c){return new Date(o,c+1,0).getDate()},s3=function(o,c){const d=new Date(o),C=d.getMonth()+c,b=r3(d.getFullYear(),C);return b<d.getDate()&&d.setDate(b),d.setMonth(C),d},sa=function(){const o=new Date;return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o},Yx=function(){const o={yyyy:d=>d.getFullYear(),m:d=>d.getMonth()+1,mm:d=>("0"+(d.getMonth()+1)).slice(-2),mmm:(d,C)=>d.toLocaleDateString(C,{month:"long"}).slice(0,3),Mmm:(d,C)=>{const b=d.toLocaleDateString(C,{month:"long"});return(b[0].toUpperCase()+b.slice(1).toLowerCase()).slice(0,3)},mmmm:(d,C)=>d.toLocaleDateString(C,{month:"long"}),Mmmm:(d,C)=>{const b=d.toLocaleDateString(C,{month:"long"});return b[0].toUpperCase()+b.slice(1).toLowerCase()}},c=new RegExp(["yyyy","Mmmm","mmmm","Mmm","mmm","mm","m"].join("|"),"g");return function(d,C,b){const m=/(\[[^\]]+\])([^\[\]]+)(\[[^\]]+\])/,E=C.match(m).slice(1),V=E[1],W=[E[0],E[2]].map(z=>({label:z.replace(/\[[^\]]+\]/,G=>G.slice(1,-1).replace(c,ae=>o[ae](b,d))),type:z.indexOf("yy")!=-1?"year":"month"}));return{separator:V,labels:W}}}(),o3={date:"yyyy-MM-dd",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss"},mp=function(o,c){return pp(o,c)},gp=function(o,c){return dv(o,c)},jx=function(o,c,d){if(Array.isArray(o)&&o.length===2){const C=o[0],b=o[1];if(C&&b)return pp(C,c)+d+pp(b,c)}else if(!Array.isArray(o)&&o instanceof Date)return pp(o,c);return""},qx=function(o,c,d){const C=Array.isArray(o)?o:o.split(d);if(C.length===2){const b=C[0],m=C[1];return[b instanceof Date?b:dv(b,c),m instanceof Date?m:dv(m,c)]}return[]},zu={default:{formatter(o){return o?""+o:""},parser(o){return o===void 0||o===""?null:o}},date:{formatter:mp,parser:gp},datetime:{formatter:mp,parser:gp},daterange:{formatter:jx,parser:qx},datetimerange:{formatter:jx,parser:qx},timerange:{formatter:jx,parser:qx},time:{formatter:mp,parser:gp},month:{formatter:mp,parser:gp},year:{formatter:mp,parser:gp},multiple:{formatter:(o,c)=>o.filter(Boolean).map(d=>pp(d,c)).join(","),parser:(o,c)=>(typeof o=="string"?o.split(","):o).map(d=>d instanceof Date?d:(typeof d=="string"?d=d.trim():typeof d!="number"&&!d&&(d=""),dv(d,c)))},number:{formatter(o){return o?""+o:""},parser(o){let c=Number(o);return isNaN(o)?null:c}}},fv="ivu-date-picker",_H="ivu-picker",SH=o=>o.reduce((c,d)=>c&&!d||typeof d=="string"&&d.trim()==="",!0),CH={40:"up",39:"right",38:"down",37:"left"},Fu=(o,c,d)=>{if(o==="left")return c*-1;if(o==="right")return c*1;if(o==="up")return d*1;if(o==="down")return d*-1},kH=o=>{const c="ivu-date-picker-btn-pulse";o.classList.add(c),setTimeout(()=>o.classList.remove(c),200)},Zx=o=>o?[o.getHours(),o.getMinutes(),o.getSeconds()]:[0,0,0],TH={mixins:[un,Po],components:{iInput:oo,Drop:Ge,Icon:S},directives:{clickOutside:hn},emits:["on-clickoutside","on-clear","on-change","on-ok","on-open-change","update:modelValue"],provide(){return{PickerInstance:this}},props:{format:{type:String},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1},open:{type:Boolean,default:null},multiple:{type:Boolean,default:!1},timePickerOptions:{type:Object,default:()=>({})},splitPanels:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},placeholder:{type:String,default:""},placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},steps:{type:Array,default:()=>[]},modelValue:{type:[Date,String,Array]},options:{type:Object,default:()=>({})},separator:{type:String,default:" - "},capture:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return o.$VIEWUI?o.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){const o=this.type.includes("range"),c=o?[null,null]:[null],d=SH((o?this.modelValue:[this.modelValue])||[])?c:this.parseDate(this.modelValue),C=d.map(Zx);return{prefixCls:fv,showClose:!1,visible:!1,internalValue:d,disableClickOutSide:!1,disableCloseUnderTransfer:!1,selectionMode:this.onSelectionModeChange(this.type),forceInputRerender:1,isFocused:!1,focusedDate:d[0]||this.startDate||new Date,focusedTime:{column:0,picker:0,time:C,active:!1},internalFocus:!1,isValueNull:!1,timeSpinnerList:[],panelTableList:[]}},computed:{wrapperClasses(){return[fv,{[fv+"-focused"]:this.isFocused}]},publicVModelValue(){if(this.multiple)return this.internalValue.slice();{const o=this.type.includes("range");let c=this.internalValue.map(d=>d instanceof Date?new Date(d):d||"");return this.type.match(/^time/)&&(c=c.map(this.formatDate)),o||this.multiple?c:c[0]}},publicStringValue(){const{formatDate:o,publicVModelValue:c,type:d}=this;return d.match(/^time/)?c:this.multiple?o(c):Array.isArray(c)?c.map(o):o(c)},opened(){return this.open===null?this.visible:this.open},transition(){return this.placement.match(/^bottom/)?"slide-up":"slide-down"},visualValue(){return this.formatDate(this.internalValue)},isConfirm(){return this.confirm||this.type==="datetime"||this.type==="datetimerange"||this.multiple},arrowType(){const o=this.globalConfig;let c="";if(this.type==="time"||this.type==="timerange")c="ios-time-outline",o&&(o.timePicker.customIcon?c="":o.timePicker.icon&&(c=o.timePicker.icon));else{const d=this.globalConfig;c="ios-calendar-outline",d&&(d.datePicker.customIcon?c="":d.datePicker.icon&&(c=d.datePicker.icon))}return this.showClose&&(c="ios-close-circle"),c},customArrowType(){const o=this.globalConfig;let c="";return this.showClose||(this.type==="time"||this.type==="timerange"?o&&o.timePicker.customIcon&&(c=o.timePicker.customIcon):o&&o.datePicker.customIcon&&(c=o.datePicker.customIcon)),c},arrowSize(){const o=this.globalConfig;let c="";return this.showClose||(this.type==="time"||this.type==="timerange"?o&&o.timePicker.iconSize&&(c=o.timePicker.iconSize):o&&o.datePicker.iconSize&&(c=o.datePicker.iconSize)),c},dropdownCls(){return{[fv+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{onSelectionModeChange(o){return o.match(/^date/)&&(o="date"),this.selectionMode=_(o,["year","month","date","time"])&&o,this.selectionMode},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(o){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(o&&o.type==="mousedown"&&this.visible){o.preventDefault(),o.stopPropagation();return}if(this.visible){const c=this.$refs.pickerPanel&&this.$refs.pickerPanel.$el;if(o&&c&&c.contains(o.target))return;this.visible=!1,o&&o.preventDefault(),o&&o.stopPropagation(),this.$emit("on-clickoutside",o);return}this.isFocused=!1,this.disableClickOutSide=!1},handleFocus(o){this.readonly||(this.isFocused=!0,!(o&&o.type==="focus")&&(this.itemDisabled||(this.visible=!0)))},handleBlur(o){if(this.internalFocus){this.internalFocus=!1;return}if(this.visible){o.preventDefault();return}this.isFocused=!1,this.onSelectionModeChange(this.type),this.internalValue=this.internalValue.slice(),this.reset(),this.$refs.pickerPanel.onToggleVisibility(!1)},handleKeydown(o){const c=o.keyCode;if(c===9)if(this.visible)if(o.stopPropagation(),o.preventDefault(),this.isConfirm){const C=`.${_H}-confirm > *`,b=this.$refs.drop.$el.querySelectorAll(C);this.internalFocus=!0,[...b][o.shiftKey?"pop":"shift"]().focus()}else this.handleClose();else this.focused=!1;const d=[37,38,39,40];if(!this.visible&&d.includes(c)){this.visible=!0;return}if(c===27&&this.visible&&(o.stopPropagation(),this.handleClose()),c===13){const C=this.timeSpinnerList.map(b=>b.timeSpinner);if(C.length>0){const b=C[0].showSeconds?3:2,m=Math.floor(this.focusedTime.column/b),E=this.focusedTime.time[m];C[m].chooseValue(E);return}if(this.type.match(/range/))this.$refs.pickerPanel.handleRangePick(this.focusedDate,"date");else{const b=this.panelTableList.map(E=>E.panelTable),m=E=>{const V=["year","month","date"].indexOf(this.type)+1;return[E.getFullYear(),E.getMonth(),E.getDate()].slice(0,V).join("-")};b.find(({cells:E})=>E.find(({date:V,disabled:W})=>m(V)===m(this.focusedDate)&&!W))&&this.onPick(this.focusedDate,!1,"date")}}!d.includes(c)||(this.focusedTime.active&&o.preventDefault(),this.navigateDatePanel(CH[c],o.shiftKey))},reset(){this.$refs.pickerPanel.reset&&this.$refs.pickerPanel.reset()},navigateTimePanel(o){this.focusedTime.active=!0;const c=o.match(/left|right/),d=o.match(/up|down/),C=this.timeSpinnerList.map(z=>z.timeSpinner),b=(C[0].showSeconds?3:2)*C.length,m=(z=>(z+(c?o==="left"?-1:1:0)+b)%b)(this.focusedTime.column),E=b/C.length,V=Math.floor(m/E),W=m%E;if(c){const z=this.internalValue.map(Zx);this.focusedTime={...this.focusedTime,column:m,time:z},C.forEach((G,ae)=>{ae===V?G.updateFocusedTime(W,z[V]):G.updateFocusedTime(-1,G.focusedTime)})}if(d){const z=o==="up"?1:-1,G=["hours","minutes","seconds"],ae=C[V][`${G[W]}List`],xe=(ae.findIndex(({text:se})=>this.focusedTime.time[V][W]===se)+z+ae.length)%ae.length,Oe=ae[xe].text,ve=this.focusedTime.time.map((se,Pe)=>(Pe!==V||(se[W]=Oe),se));this.focusedTime={...this.focusedTime,time:ve},C.forEach((se,Pe)=>{Pe===V?se.updateFocusedTime(W,ve[Pe]):se.updateFocusedTime(-1,se.focusedTime)})}},navigateDatePanel(o,c){const d=this.timeSpinnerList.map(m=>m.timeSpinner);if(d.length>0){this.navigateTimePanel(o,c,d);return}if(c){this.type==="year"?this.focusedDate=new Date(this.focusedDate.getFullYear()+Fu(o,0,10),this.focusedDate.getMonth(),this.focusedDate.getDate()):this.focusedDate=new Date(this.focusedDate.getFullYear()+Fu(o,0,1),this.focusedDate.getMonth()+Fu(o,1,0),this.focusedDate.getDate());const m=o.match(/left|down/)?"prev":"next",E=o.match(/up|down/)?"-double":"",V=this.$refs.drop.$el.querySelector(`.ivu-date-picker-${m}-btn-arrow${E}`);V&&kH(V);return}const C=this.focusedDate||this.internalValue&&this.internalValue[0]||new Date,b=new Date(C);if(this.type.match(/^date/)){const m=r3(C.getFullYear(),C.getMonth()),E=C.getDate(),V=b.getDate()+Fu(o,1,7);V<1?o.match(/left|right/)?(b.setMonth(b.getMonth()+1),b.setDate(V)):b.setDate(E+Math.floor((m-E)/7)*7):V>m?o.match(/left|right/)?(b.setMonth(b.getMonth()-1),b.setDate(V)):b.setDate(E%7):b.setDate(V)}this.type.match(/^month/)&&b.setMonth(b.getMonth()+Fu(o,1,3)),this.type.match(/^year/)&&b.setFullYear(b.getFullYear()+Fu(o,1,3)),this.focusedDate=b},handleInputChange(o){const c=this.type.includes("range")||this.multiple,d=this.visualValue,C=o.target.value,b=this.parseDate(C),m=this.options&&typeof this.options.disabledDate=="function"&&this.options.disabledDate,E=c?b:b[0],V=m&&m(E),W=b.reduce((z,G)=>z&&G instanceof Date,!0);C!==d&&!V&&W?(this.emitChange(this.type),this.internalValue=b):this.forceInputRerender++},handleInputMouseenter(){this.readonly||this.itemDisabled||this.visualValue&&this.clearable&&(this.showClose=!0)},handleInputMouseleave(){this.showClose=!1},handleIconClick(o){this.showClose?(o&&o.stopPropagation(),this.handleClear()):this.itemDisabled||this.handleFocus()},handleClear(){this.visible=!1,this.internalValue=this.internalValue.map(()=>null),this.$emit("on-clear"),this.handleFormItemChange("change",""),this.emitChange(this.type),this.reset(),setTimeout(()=>this.onSelectionModeChange(this.type),500)},emitChange(o){t.nextTick(()=>{this.$emit("on-change",this.publicStringValue,o),this.handleFormItemChange("change",this.publicStringValue)})},parseDate(o){const c=this.type.includes("range"),d=this.type,C=(zu[d]||zu.default).parser,b=this.format||o3[d],m=zu.multiple.parser;if(o&&d==="time"&&!(o instanceof Date))o=C(o,b,this.separator);else if(this.multiple&&o)o=m(o,b,this.separator);else if(c)if(!o)o=[null,null];else if(typeof o=="string")o=C(o,b,this.separator);else if(d==="timerange")o=C(o,b,this.separator).map(E=>E||"");else{const[E,V]=o;E instanceof Date&&V instanceof Date?o=o.map(W=>new Date(W)):typeof E=="string"&&typeof V=="string"?o=C(o.join(this.separator),b,this.separator):(!E||!V)&&(o=[null,null])}else typeof o=="string"&&d.indexOf("time")!==0&&(o=C(o,b)||null);return c||this.multiple?o||[]:[o]},formatDate(o){const c=o3[this.type];if(this.multiple){const d=zu.multiple.formatter;return d(o,this.format||c,this.separator)}else{const{formatter:d}=zu[this.type]||zu.default;return d(o,this.format||c,this.separator)}},onPick(o,c=!1,d){if(this.multiple){const C=o.getTime(),b=this.internalValue.findIndex(E=>E&&E.getTime()===C),m=[...this.internalValue,o].filter(Boolean).map(E=>E.getTime()).filter((E,V,W)=>W.indexOf(E)===V&&V!==b);this.internalValue=m.map(E=>new Date(E))}else o=this.parseDate(o),this.internalValue=Array.isArray(o)?o:[o];this.internalValue[0]&&(this.focusedDate=this.internalValue[0]),this.focusedTime={...this.focusedTime,time:this.internalValue.map(Zx)},this.isConfirm||this.onSelectionModeChange(this.type),this.isConfirm||(this.visible=!!c),this.emitChange(d)},onPickSuccess(){this.visible=!1,this.$emit("on-ok"),this.focus(),this.reset()},focus(){this.$refs.input&&this.$refs.input.focus()},updatePopper(){this.$refs.drop.update()},handleOnFocusInput(){this.focus()},handleOnUpdatePopper(){this.updatePopper()}},watch:{visible(o){o===!1&&this.$refs.drop.destroy(),o&&this.$refs.drop.update(),this.$emit("on-open-change",o)},modelValue(o){o===null&&(this.isValueNull=!0),this.internalValue=this.parseDate(o)},open(o){this.visible=o===!0},type(o){this.onSelectionModeChange(o)},publicVModelValue(o,c){const d=JSON.stringify(o),C=JSON.stringify(c);(d!==C||typeof o!=typeof c)&&(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",o))}},mounted(){this.open!==null&&(this.visible=this.open)}};function MH(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("i-input"),W=t.resolveComponent("Drop"),z=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapperClasses)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass([b.prefixCls+"-rel"])},[t.renderSlot(o.$slots,"default",{},()=>[(t.openBlock(),t.createBlock(V,{key:b.forceInputRerender,"element-id":d.elementId,class:t.normalizeClass([b.prefixCls+"-editor"]),readonly:!d.editable||d.readonly,disabled:o.itemDisabled,size:d.size,placeholder:d.placeholder,"model-value":m.visualValue,name:d.name,ref:"input",onOnInputChange:m.handleInputChange,onOnFocus:m.handleFocus,onOnBlur:m.handleBlur,onClick:m.handleFocus,onKeydown:m.handleKeydown,onMouseenter:m.handleInputMouseenter,onMouseleave:m.handleInputMouseleave},{suffix:t.withCtx(()=>[t.createVNode(E,{onClick:m.handleIconClick,type:m.arrowType,custom:m.customArrowType,size:m.arrowSize},null,8,["onClick","type","custom","size"])]),_:1},8,["element-id","class","readonly","disabled","size","placeholder","model-value","name","onOnInputChange","onOnFocus","onOnBlur","onClick","onKeydown","onMouseenter","onMouseleave"]))])],2),t.createVNode(W,{ref:"drop",visible:m.opened,classes:m.dropdownCls,placement:d.placement,eventsEnabled:d.eventsEnabled,transfer:d.transfer,"transition-name":"transition-drop",onClick:m.handleTransferClick},{default:t.withCtx(()=>[t.createElementVNode("div",null,[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o.panel),t.mergeProps({ref:"pickerPanel",visible:b.visible,showTime:o.type==="datetime"||o.type==="datetimerange",confirm:m.isConfirm,selectionMode:b.selectionMode,steps:d.steps,format:d.format,"model-value":b.internalValue,"start-date":d.startDate,"split-panels":d.splitPanels,"show-week-numbers":d.showWeekNumbers,"picker-type":o.type,multiple:d.multiple,"focused-date":b.focusedDate,"time-picker-options":d.timePickerOptions},o.ownPickerProps,{onOnPick:m.onPick,onOnPickClear:m.handleClear,onOnPickSuccess:m.onPickSuccess,onOnPickClick:c[0]||(c[0]=G=>b.disableClickOutSide=!0),onOnSelectionModeChange:m.onSelectionModeChange}),null,16,["visible","showTime","confirm","selectionMode","steps","format","model-value","start-date","split-panels","show-week-numbers","picker-type","multiple","focused-date","time-picker-options","onOnPick","onOnPickClear","onOnPickSuccess","onOnSelectionModeChange"]))])]),_:1},8,["visible","classes","placement","eventsEnabled","transfer","onClick"])],2)),[[z,m.handleClose,d.capture,{mousedown:!0}],[z,m.handleClose,d.capture,{touchstart:!0}],[z,m.handleClose,d.capture]])}var a3=l(TH,[["render",MH]]),l3=1e3*60*60*24;function c3(o,c){return new Date(o,c+1,0).getDate()}function h3(o,c,d){return c===0&&d>50?o-1:c===11&&d<10?o+1:o}function u3(o,c,d,C){c>11&&(c=0,o++);var b=new Date(o,c,d);C&&b.setDate(b.getDate()+4-(b.getDay()||7));var m=C?b.getFullYear():o,E=new Date(m,0,1),V=1+Math.round((b-E)/l3);C||(V+=E.getDay());var W=Math.ceil(V/7);if(!C){var z=new Date(o,c,d),G=new Date(o+1,0,1),ae=G.getDay();z.getTime()>=G.getTime()-l3*ae&&(W=1)}return W}function EH(o,c,d){for(var C=this.lang||"en",b=this.onlyDays,m=typeof this.weekStart>"u"?1:this.weekStart,E=m===1,V=[],W=new Date(o,c,1),z=W.getDay()||(E?7:0),G=m-z,ae=u3(o,c,1,E),xe=c3(o,c),Oe=c3(o,c-1),ve,se,Pe,$t=h3(o,c,ae),mt={month:c,year:o,daysInMonth:xe},Ot=0;Ot<7;Ot++){Pe=G;for(var He=0;He<8;He++){Ot>0&&He>0&&G++,G>xe||G<1?(se=G>xe?G-xe:Oe+G,ve=G>xe?c+1:c-1):(se=G,ve=c);var De=function(){return He===0?"weekLabel":Ot===0?"dayLabel":G<1?"prevMonth":G>xe?"nextMonth":"monthDay"}(),Ke=Pe!==G&&Ot>0,Ye={desc:Ke?se:ae,week:ae,type:De,format:E?"ISO 8601":"US",date:Ke?new Date(Date.UTC(o,ve,se)):!1,year:$t,index:V.length};d&&(typeof d=="function"?Ye=d.call(mt,Ye,C):d.forEach(function(zt){Ye=zt.call(mt,Ye,C)})),b&&Ke?V.push(Ye):b||V.push(Ye)}Ot>0&&(ae=u3(o,ve,se+1,E)),$t=h3(o,c,ae)}return mt.cells=V,mt}var PH=function(o){return EH.bind(o)},AH={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"måndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lördag",7:"söndag"},pt:{0:"s",1:"segunda",2:"terça",3:"quarta",4:"quinta",5:"sexta",6:"sábado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}},oa=AH;function RH(o){return o==null?!1:o.constructor===Array||o.constructor===Object}function d3(o,c){for(var d in o)c[d]?RH(o[d])&&d3(o[d],c[d]):c[d]=o[d]}function f3(o,c){var d=[oa.classes[o.type]];return o.class?o.class=(typeof o.class=="string"?[o.class]:o.class).concat(d):o.class=d,o.type.indexOf("Label")>0&&(o.index==0&&oa.weekPlaceholder?o.desc=oa.weekPlaceholder:o.index<8?o.desc=oa.columnNames[c][o.index]:o.index%8==0&&(o.desc=o.week)),o.date&&(o.monthName=oa.monthNames[c][o.date.getMonth()]),this.monthName||(this.monthName=oa.monthNames[c][this.month]),this.labels||(this.labels={monthNames:oa.monthNames[c],columnNames:oa.columnNames[c],classes:oa.classes}),o}f3.setLabels=function(o){d3(o,oa)};var IH=f3,DH={Generator:PH,addLabels:IH},Kx={name:"PanelTable",emits:["on-pick","on-pick-click","on-change-range"],inject:["PickerInstance"],props:{tableDate:{type:Date,required:!0},disabledDate:{type:Function},selectionMode:{type:String,required:!0},modelValue:{type:Array,required:!0},rangeState:{type:Object,default:()=>({from:null,to:null,selecting:!1})},focusedDate:{type:Date,required:!0}},data(){return{id:te(6)}},computed:{dates(){const{selectionMode:o,modelValue:c,rangeState:d}=this;return o==="range"&&d.selecting?[d.from]:c}},methods:{handleClick(o,c){if(c.stopPropagation(),o.disabled||o.type==="weekLabel")return;const d=new Date(Hr(o.date));this.$emit("on-pick",d),this.$emit("on-pick-click")},handleMouseMove(o){if(!this.rangeState.selecting||o.disabled)return;const c=o.date;this.$emit("on-change-range",c)},addPanelTable(){const o=this.PickerInstance;o.panelTableList||(o.panelTableList=[]),o.panelTableList.push({id:this.id,panelTable:this})},removePanelTable(){const o=this.PickerInstance;if(o.panelTableList&&o.panelTableList.length){const c=o.panelTableList.findIndex(d=>d.id===this.id);o.panelTableList.splice(c,1)}}},mounted(){this.addPanelTable()},beforeUnmount(){this.removePanelTable()}},ui="ivu-date-picker-cells";const NH={mixins:[Qn,Kx],props:{showWeekNumbers:{type:Boolean,default:!1}},computed:{classes(){return[`${ui}`,{[`${ui}-show-week-numbers`]:this.showWeekNumbers}]},calendar(){const o=Number(this.t("i.datepicker.weekStartDay"));return new DH.Generator({onlyDays:!this.showWeekNumbers,weekStart:o})},headerDays(){const o=Number(this.t("i.datepicker.weekStartDay")),c=["sun","mon","tue","wed","thu","fri","sat"].map(C=>this.t("i.datepicker.weeks."+C)),d=c.splice(o,7-o).concat(c.splice(0,o));return this.showWeekNumbers?[""].concat(d):d},cells(){const o=this.tableDate.getFullYear(),c=this.tableDate.getMonth(),d=Hr(new Date),C=this.dates.filter(Boolean).map(Hr),[b,m]=this.dates.map(Hr),E=this.rangeState.from&&Hr(this.rangeState.from),V=this.rangeState.to&&Hr(this.rangeState.to),W=this.selectionMode==="range",z=typeof this.disabledDate=="function"&&this.disabledDate;return this.calendar(o,c,G=>{G.date instanceof Date&&G.date.setTime(G.date.getTime()+G.date.getTimezoneOffset()*6e4+480*60*1e3);const ae=G.date&&Hr(G.date),xe=G.date&&c===G.date.getMonth();return{...G,type:ae===d?"today":G.type,selected:xe&&C.includes(ae),disabled:G.date&&z&&z(new Date(ae)),range:xe&&W&&wH(ae,E,V),start:xe&&W&&ae===b,end:xe&&W&&ae===m}}).cells.slice(this.showWeekNumbers?8:0)}},methods:{getCellCls(o){return[`${ui}-cell`,{[`${ui}-cell-selected`]:o.selected||o.start||o.end,[`${ui}-cell-disabled`]:o.disabled,[`${ui}-cell-today`]:o.type==="today",[`${ui}-cell-prev-month`]:o.type==="prevMonth",[`${ui}-cell-next-month`]:o.type==="nextMonth",[`${ui}-cell-week-label`]:o.type==="weekLabel",[`${ui}-cell-range`]:o.range&&!o.start&&!o.end,[`${ui}-focused`]:Hr(o.date)===Hr(this.focusedDate)}]}}},$H={class:"ivu-date-picker-cells-header"},VH=["onClick","onMouseenter"];function LH(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.createElementVNode("div",$H,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.headerDays,E=>(t.openBlock(),t.createElementBlock("span",{key:E},t.toDisplayString(E),1))),128))]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.cells,(E,V)=>(t.openBlock(),t.createElementBlock("span",{key:String(E.date)+V,class:t.normalizeClass(m.getCellCls(E)),onClick:W=>o.handleClick(E,W),onMouseenter:W=>o.handleMouseMove(E)},[t.createElementVNode("em",null,t.toDisplayString(E.desc),1)],42,VH))),128))],2)}var p3=l(NH,[["render",LH]]);const BH={mixins:[Kx],props:{},computed:{classes(){return[`${ui}`,`${ui}-year`]},startYear(){return Math.floor(this.tableDate.getFullYear()/10)*10},cells(){let o=[];const c={text:"",selected:!1,disabled:!1},d=this.dates.filter(Boolean).map(b=>Hr(new Date(b.getFullYear(),0,1))),C=Hr(new Date(this.focusedDate.getFullYear(),0,1));for(let b=0;b<10;b++){const m=L(c);m.date=new Date(this.startYear+b,0,1),m.disabled=typeof this.disabledDate=="function"&&this.disabledDate(m.date)&&this.selectionMode==="year";const E=Hr(m.date);m.selected=d.includes(E),m.focused=E===C,o.push(m)}return o}},methods:{getCellCls(o){return[`${ui}-cell`,{[`${ui}-cell-selected`]:o.selected,[`${ui}-cell-disabled`]:o.disabled,[`${ui}-cell-focused`]:o.focused,[`${ui}-cell-range`]:o.range&&!o.start&&!o.end}]}}},UH=["onClick","onMouseenter"];function zH(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.cells,E=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(m.getCellCls(E)),key:E.date,onClick:V=>o.handleClick(E,V),onMouseenter:V=>o.handleMouseMove(E)},[t.createElementVNode("em",null,t.toDisplayString(E.date.getFullYear()),1)],42,UH))),128))],2)}var m3=l(BH,[["render",zH]]);const FH={mixins:[Qn,Kx],props:{},computed:{classes(){return[`${ui}`,`${ui}-month`]},cells(){let o=[];const c={text:"",selected:!1,disabled:!1},d=this.tableDate.getFullYear(),C=this.dates.filter(Boolean).map(m=>Hr(new Date(m.getFullYear(),m.getMonth(),1))),b=Hr(new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),1));for(let m=0;m<12;m++){const E=L(c);E.date=new Date(d,m,1),E.text=this.tCell(m+1);const V=Hr(E.date);E.disabled=typeof this.disabledDate=="function"&&this.disabledDate(E.date)&&this.selectionMode==="month",E.selected=C.includes(V),E.focused=V===b,o.push(E)}return o}},methods:{getCellCls(o){return[`${ui}-cell`,{[`${ui}-cell-selected`]:o.selected,[`${ui}-cell-disabled`]:o.disabled,[`${ui}-cell-focused`]:o.focused,[`${ui}-cell-range`]:o.range&&!o.start&&!o.end}]},tCell(o){return this.t(`i.datepicker.months.m${o}`)}}},XH=["onClick","onMouseenter"];function WH(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.cells,E=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(m.getCellCls(E)),key:E.text,onClick:V=>o.handleClick(E,V),onMouseenter:V=>o.handleMouseMove(E)},[t.createElementVNode("em",null,t.toDisplayString(E.text),1)],42,XH))),128))],2)}var g3=l(FH,[["render",WH]]),pv={props:{disabledHours:{type:Array,default(){return[]}},disabledMinutes:{type:Array,default(){return[]}},disabledSeconds:{type:Array,default(){return[]}},hideDisabledOptions:{type:Boolean,default:!1}}};const fh="ivu-time-picker-cells",Jx=["hours","minutes","seconds"],QH={name:"TimeSpinner",mixins:[pv],emits:["on-change","on-pick-click"],inject:["PickerInstance"],props:{hours:{type:[Number,String],default:NaN},minutes:{type:[Number,String],default:NaN},seconds:{type:[Number,String],default:NaN},showSeconds:{type:Boolean,default:!0},steps:{type:Array,default:()=>[]}},data(){return{spinerSteps:[1,1,1].map((o,c)=>Math.abs(this.steps[c])||o),prefixCls:fh,compiled:!1,focusedColumn:-1,focusedTime:[0,0,0],id:te(6)}},computed:{classes(){return[`${fh}`,{[`${fh}-with-seconds`]:this.showSeconds}]},hoursList(){let o=[];const c=this.spinerSteps[0],d=this.focusedColumn===0&&this.focusedTime[0],C={text:0,selected:!1,disabled:!1,hide:!1};for(let b=0;b<24;b+=c){const m=L(C);m.text=b,m.focused=b===d,this.disabledHours.length&&this.disabledHours.indexOf(b)>-1&&(m.disabled=!0,this.hideDisabledOptions&&(m.hide=!0)),this.hours===b&&(m.selected=!0),o.push(m)}return o},minutesList(){let o=[];const c=this.spinerSteps[1],d=this.focusedColumn===1&&this.focusedTime[1],C={text:0,selected:!1,disabled:!1,hide:!1};for(let b=0;b<60;b+=c){const m=L(C);m.text=b,m.focused=b===d,this.disabledMinutes.length&&this.disabledMinutes.indexOf(b)>-1&&(m.disabled=!0,this.hideDisabledOptions&&(m.hide=!0)),this.minutes===b&&(m.selected=!0),o.push(m)}return o},secondsList(){let o=[];const c=this.spinerSteps[2],d=this.focusedColumn===2&&this.focusedTime[2],C={text:0,selected:!1,disabled:!1,hide:!1};for(let b=0;b<60;b+=c){const m=L(C);m.text=b,m.focused=b===d,this.disabledSeconds.length&&this.disabledSeconds.indexOf(b)>-1&&(m.disabled=!0,this.hideDisabledOptions&&(m.hide=!0)),this.seconds===b&&(m.selected=!0),o.push(m)}return o}},methods:{getCellCls(o){return[`${fh}-cell`,{[`${fh}-cell-selected`]:o.selected,[`${fh}-cell-focused`]:o.focused,[`${fh}-cell-disabled`]:o.disabled}]},chooseValue(o){const c=Jx.reduce((d,C,b)=>{const m=o[b];return this[C]===m?d:{...d,[C]:m}},{});Object.keys(c).length>0&&this.emitChange(c)},handleClick(o,c){if(c.disabled)return;const d={[o]:c.text};this.emitChange(d)},emitChange(o){this.$emit("on-change",o),this.$emit("on-pick-click")},scroll(o,c){const d=this.$refs[o].scrollTop,C=24*this.getScrollIndex(o,c);I(this.$refs[o],d,C,500)},getScrollIndex(o,c){const d=T(o),C=this[`disabled${d}`];if(C.length&&this.hideDisabledOptions){let b=0;C.forEach(m=>m<=c?b++:""),c-=b}return c},updateScroll(){t.nextTick(()=>{Jx.forEach(o=>{this.$refs[o].scrollTop=24*this[`${o}List`].findIndex(c=>c.text==this[o])})})},formatTime(o){return o<10?"0"+o:o},updateFocusedTime(o,c){this.focusedColumn=o,this.focusedTime=c.slice()},addTimeSpinner(){const o=this.PickerInstance;o.timeSpinnerList||(o.timeSpinnerList=[]),o.timeSpinnerList.push({id:this.id,timeSpinner:this})},removeTimeSpinner(){const o=this.PickerInstance;if(o.timeSpinnerList&&o.timeSpinnerList.length){const c=o.timeSpinnerList.findIndex(d=>d.id===this.id);o.timeSpinnerList.splice(c,1)}}},watch:{hours(o){!this.compiled||this.scroll("hours",this.hoursList.findIndex(c=>c.text==o))},minutes(o){!this.compiled||this.scroll("minutes",this.minutesList.findIndex(c=>c.text==o))},seconds(o){!this.compiled||this.scroll("seconds",this.secondsList.findIndex(c=>c.text==o))},focusedTime(o,c){Jx.forEach((d,C)=>{if(o[C]===c[C]||typeof o[C]>"u")return;const b=this[`${d}List`].findIndex(m=>m.text===o[C]);this.scroll(d,b)})}},mounted(){this.addTimeSpinner(),t.nextTick(()=>this.compiled=!0)},beforeUnmount(){this.removeTimeSpinner()}},HH=["onClick"],GH=["onClick"],YH=["onClick"];function jH(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-list"]),ref:"hours"},[t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.hoursList,E=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.getCellCls(E)),key:E.text,onClick:V=>m.handleClick("hours",E)},t.toDisplayString(m.formatTime(E.text)),11,HH)),[[t.vShow,!E.hide]])),128))],2)],2),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-list"]),ref:"minutes"},[t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.minutesList,E=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.getCellCls(E)),key:E.text,onClick:V=>m.handleClick("minutes",E)},t.toDisplayString(m.formatTime(E.text)),11,GH)),[[t.vShow,!E.hide]])),128))],2)],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-list"]),ref:"seconds"},[t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.secondsList,E=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.getCellCls(E)),key:E.text,onClick:V=>m.handleClick("seconds",E)},t.toDisplayString(m.formatTime(E.text)),11,YH)),[[t.vShow,!E.hide]])),128))],2)],2),[[t.vShow,d.showSeconds]])],2)}var v3=l(QH,[["render",jH]]);const y3="ivu-picker",qH={mixins:[Qn],components:{iButton:Qr},emits:["on-pick-clear","on-pick-success","on-pick-toggle-time"],inject:["PickerInstance"],props:{showTime:{type:Boolean,default:!1},isTime:{type:Boolean,default:!1},timeDisabled:{type:Boolean,default:!1}},data(){return{prefixCls:y3}},computed:{timeClasses(){return`${y3}-confirm-time`},labels(){const o=["time","clear","ok"],c=[this.isTime?"selectDate":"selectTime","clear","ok"];return o.reduce((d,C,b)=>(d[C]=this.t("i.datepicker."+c[b]),d),{})}},methods:{handleClear(){this.$emit("on-pick-clear")},handleSuccess(){this.$emit("on-pick-success")},handleToggleTime(){this.timeDisabled||(this.$emit("on-pick-toggle-time"),this.PickerInstance.handleOnFocusInput(),this.PickerInstance.handleOnUpdatePopper())},handleTab(o){const c=[...this.$el.children][o.shiftKey?"shift":"pop"]();r&&document.activeElement===c&&(o.preventDefault(),o.stopPropagation(),this.PickerInstance.handleOnFocusInput())}}};function ZH(o,c,d,C,b,m){const E=t.resolveComponent("i-button");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls+"-confirm"]),onKeydownCapture:c[0]||(c[0]=t.withKeys((...V)=>m.handleTab&&m.handleTab(...V),["tab"]))},[d.showTime?(t.openBlock(),t.createBlock(E,{key:0,class:t.normalizeClass(m.timeClasses),size:"small",type:"text",disabled:d.timeDisabled,onClick:m.handleToggleTime},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.labels.time),1)]),_:1},8,["class","disabled","onClick"])):t.createCommentVNode("",!0),t.createVNode(E,{size:"small",class:"ivu-picker-confirm-btn-cancel",onClick:m.handleClear,onKeydown:t.withKeys(m.handleClear,["enter"])},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.labels.clear),1)]),_:1},8,["onClick","onKeydown"]),t.createVNode(E,{size:"small",type:"primary",onClick:m.handleSuccess,onKeydown:t.withKeys(m.handleSuccess,["enter"])},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.labels.ok),1)]),_:1},8,["onClick","onKeydown"])],34)}var mv=l(qH,[["render",ZH]]);const KH="ivu-picker-panel",b3="ivu-date-picker";var gv={emits:["on-pick-clear","on-pick-success","on-pick-click","on-pick"],props:{confirm:{type:Boolean,default:!1}},methods:{iconBtnCls(o,c=""){return[`${KH}-icon-btn`,`${b3}-${o}-btn`,`${b3}-${o}-btn-arrow${c}`]},handleShortcutClick(o){o.value&&this.$emit("on-pick",o.value()),o.onClick&&o.onClick(this)},handlePickClear(){this.resetView(),this.$emit("on-pick-clear")},handlePickSuccess(){this.resetView(),this.$emit("on-pick-success")},handlePickClick(){this.$emit("on-pick-click")},resetView(){setTimeout(()=>this.currentView=this.selectionMode,500)},handleClear(){this.dates=this.dates.map(()=>null),this.rangeState={},this.$emit("on-pick",this.dates),this.handleConfirm()},handleConfirm(o,c){this.$emit("on-pick",this.dates,o,c||this.type)},onToggleVisibility(o){const{timeSpinner:c,timeSpinnerEnd:d}=this.$refs;o&&c&&c.updateScroll(),o&&d&&d.updateScroll()}}};const JH="ivu-picker-panel",eG="ivu-time-picker",tG=o=>o[0].toUpperCase()+o.slice(1),nG=(o,c,d,C)=>{const b=new Date(o.getTime());return b.setHours(c),b.setMinutes(d),b.setSeconds(C),b},iG=(o,c,d)=>d.indexOf(o)===c,O3=()=>!1,rG={name:"TimePickerPanel",mixins:[gv,Qn,pv],components:{TimeSpinner:v3,Confirm:mv},emits:["on-pick"],props:{disabledDate:{type:Function,default:O3},steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){return{prefixCls:JH,timePrefixCls:eG,date:this.modelValue[0]||sa(),showDate:!1}},computed:{showSeconds(){return!!(this.format||"").match(/ss/)},visibleDate(){const o=this.date,c=o.getMonth()+1,d=this.t("i.datepicker.year"),C=this.t(`i.datepicker.month${c}`);return`${o.getFullYear()}${d} ${C}`},timeSlots(){return this.modelValue[0]?["getHours","getMinutes","getSeconds"].map(o=>this.date[o]()):[]},disabledHMS(){const o=["disabledHours","disabledMinutes","disabledSeconds"];if(this.disabledDate===O3||!this.modelValue[0])return o.reduce((c,d)=>(c[d]=this[d],c),{});{const c=[24,60,60],d=["Hours","Minutes","Seconds"].map(C=>this[`disabled${C}`]).map((C,b)=>{const m=c[b],E=C;for(let V=0;V<m;V+=this.steps[b]||1){const W=this.timeSlots.map((G,ae)=>ae===b?V:G),z=nG(this.date,...W);this.disabledDate(z,!0)&&E.push(V)}return E.filter(iG)});return o.reduce((C,b,m)=>(C[b]=d[m],C),{})}}},watch:{modelValue(o){let c=o[0]||sa();c=new Date(c),this.date=c}},methods:{handleChange(o,c=!0){const d=new Date(this.date);Object.keys(o).forEach(C=>d[`set${tG(C)}`](o[C])),c&&this.$emit("on-pick",d,"time")}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function sG(o,c,d,C,b,m){const E=t.resolveComponent("time-spinner"),V=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls+"-body-wrapper"]),onMousedown:c[0]||(c[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"])},[b.showDate?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.timePrefixCls+"-header"])},t.toDisplayString(m.visibleDate),3)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content"])},[t.createVNode(E,{ref:"timeSpinner","show-seconds":m.showSeconds,steps:d.steps,hours:m.timeSlots[0],minutes:m.timeSlots[1],seconds:m.timeSlots[2],"disabled-hours":m.disabledHMS.disabledHours,"disabled-minutes":m.disabledHMS.disabledMinutes,"disabled-seconds":m.disabledHMS.disabledSeconds,"hide-disabled-options":o.hideDisabledOptions,onOnChange:m.handleChange,onOnPickClick:o.handlePickClick},null,8,["show-seconds","steps","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),o.confirm?(t.openBlock(),t.createBlock(V,{key:1,onOnPickClear:o.handlePickClear,onOnPickSuccess:o.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var x3=l(rG,[["render",sG]]);const oG={props:{datePanelLabel:Object,currentView:String,datePrefixCls:String}};function aG(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("span",null,[d.datePanelLabel?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([d.datePrefixCls+"-header-label"]),onClick:c[0]||(c[0]=(...E)=>d.datePanelLabel.labels[0].handler&&d.datePanelLabel.labels[0].handler(...E))},t.toDisplayString(d.datePanelLabel.labels[0].label),3)),[[t.vShow,d.datePanelLabel.labels[0].type==="year"||d.currentView==="date"]]):t.createCommentVNode("",!0),d.datePanelLabel&&d.currentView==="date"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(d.datePanelLabel.separator),1)],64)):t.createCommentVNode("",!0),d.datePanelLabel?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass([d.datePrefixCls+"-header-label"]),onClick:c[1]||(c[1]=(...E)=>d.datePanelLabel.labels[1].handler&&d.datePanelLabel.labels[1].handler(...E))},t.toDisplayString(d.datePanelLabel.labels[1].label),3)),[[t.vShow,d.datePanelLabel.labels[1].type==="year"||d.currentView==="date"]]):t.createCommentVNode("",!0)])}var w3=l(oG,[["render",aG]]),_3={props:{showTime:{type:Boolean,default:!1},format:{type:String,default:"yyyy-MM-dd"},selectionMode:{type:String,validator(o){return _(o,["year","month","date","time"])},default:"date"},shortcuts:{type:Array,default:()=>[]},disabledDate:{type:Function,default:()=>!1},modelValue:{type:Array,default:()=>[sa(),sa()]},timePickerOptions:{default:()=>({}),type:Object},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},pickerType:{type:String,require:!0},focusedDate:{type:Date,required:!0}},computed:{isTime(){return this.currentView==="time"}},methods:{handleToggleTime(){this.currentView=this.currentView==="time"?"date":"time"}}};const ew="ivu-picker-panel",lG="ivu-date-picker",cG={name:"DatePickerPanel",mixins:[gv,Qn,_3],components:{Icon:S,DateTable:p3,YearTable:m3,MonthTable:g3,TimePicker:x3,Confirm:mv,datePanelLabel:w3},emits:["on-selection-mode-change","on-pick"],props:{multiple:{type:Boolean,default:!1}},data(){const{selectionMode:o,modelValue:c}=this,d=c.slice().sort();return{prefixCls:ew,datePrefixCls:lG,currentView:o||"date",pickerTable:this.getTableType(o),dates:d,panelDate:this.startDate||d[0]||new Date}},computed:{classes(){return[`${ew}-body-wrapper`,{[`${ew}-with-sidebar`]:this.shortcuts.length}]},panelPickerHandlers(){return this.pickerTable===`${this.currentView}-table`?this.handlePick:this.handlePreSelection},datePanelLabel(){const o=this.t("i.locale"),c=this.t("i.datepicker.datePanelLabel"),d=this.panelDate,{labels:C,separator:b}=Yx(o,c,d),m=E=>()=>this.pickerTable=this.getTableType(E);return{separator:b,labels:C.map(E=>(E.handler=m(E.type),E))}},timeDisabled(){return!this.dates[0]}},watch:{modelValue(o){this.dates=o;const c=this.multiple?this.dates[this.dates.length-1]:this.startDate||this.dates[0];this.panelDate=c||new Date},currentView(o){this.$emit("on-selection-mode-change",o),this.currentView==="time"&&t.nextTick(()=>{this.$refs.timePicker.$refs.timeSpinner.updateScroll()})},selectionMode(o){this.currentView=o,this.pickerTable=this.getTableType(o)},focusedDate(o){const c=o.getFullYear()!==this.panelDate.getFullYear(),d=c||o.getMonth()!==this.panelDate.getMonth();(c||d)&&(this.multiple||(this.panelDate=o))}},methods:{reset(){this.currentView=this.selectionMode,this.pickerTable=this.getTableType(this.currentView)},changeYear(o){this.selectionMode==="year"||this.pickerTable==="year-table"?this.panelDate=new Date(this.panelDate.getFullYear()+o*10,0,1):this.panelDate=s3(this.panelDate,o*12)},getTableType(o){return o.match(/^time/)?"time-picker":`${o}-table`},changeMonth(o){this.panelDate=s3(this.panelDate,o)},handlePreSelection(o){this.panelDate=o,this.pickerTable==="year-table"?this.pickerTable="month-table":this.pickerTable=this.getTableType(this.currentView)},handlePick(o,c){const{selectionMode:d,panelDate:C}=this;d==="year"?o=new Date(o.getFullYear(),0,1):d==="month"?o=new Date(C.getFullYear(),o.getMonth(),1):o=new Date(o),this.dates=[o],this.$emit("on-pick",o,!1,c||d)}}},hG=["onClick"];function uG(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("date-panel-label"),W=t.resolveComponent("time-picker"),z=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),onMousedown:c[4]||(c[4]=t.withModifiers(()=>{},["prevent"]))},[o.shortcuts.length?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-sidebar"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.shortcuts,G=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls+"-shortcut"]),key:G.text,onClick:ae=>o.handleShortcutClick(G)},t.toDisplayString(G.text),11,hG))),128))],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.datePrefixCls+"-header"])},[t.createElementVNode("span",{class:t.normalizeClass(o.iconBtnCls("prev","-double")),onClick:c[0]||(c[0]=G=>m.changeYear(-1))},[t.createVNode(E,{type:"ios-arrow-back"})],2),b.pickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(o.iconBtnCls("prev")),onClick:c[1]||(c[1]=G=>m.changeMonth(-1))},[t.createVNode(E,{type:"ios-arrow-back"})],2)),[[t.vShow,b.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(V,{"date-panel-label":m.datePanelLabel,"current-view":b.pickerTable.split("-").shift(),"date-prefix-cls":b.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),t.createElementVNode("span",{class:t.normalizeClass(o.iconBtnCls("next","-double")),onClick:c[2]||(c[2]=G=>m.changeYear(1))},[t.createVNode(E,{type:"ios-arrow-forward"})],2),b.pickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(o.iconBtnCls("next")),onClick:c[3]||(c[3]=G=>m.changeMonth(1))},[t.createVNode(E,{type:"ios-arrow-forward"})],2)),[[t.vShow,b.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,b.currentView!=="time"]]),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content"])},[b.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(b.pickerTable),{key:0,ref:"pickerTable","table-date":b.panelDate,"show-week-numbers":o.showWeekNumbers,"model-value":b.dates,"selection-mode":o.selectionMode,"disabled-date":o.disabledDate,"focused-date":o.focusedDate,onOnPick:m.panelPickerHandlers,onOnPickClick:o.handlePickClick},null,40,["table-date","show-week-numbers","model-value","selection-mode","disabled-date","focused-date","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content"])},[b.currentView==="time"?(t.openBlock(),t.createBlock(W,t.mergeProps({key:0,ref:"timePicker","model-value":b.dates,format:o.format,"time-disabled":m.timeDisabled,"disabled-date":o.disabledDate,"focused-date":o.focusedDate},o.timePickerOptions,{onOnPick:m.handlePick,onOnPickClick:o.handlePickClick,onOnPickClear:o.handlePickClear,onOnPickSuccess:o.handlePickSuccess,onOnPickToggleTime:o.handleToggleTime}),null,16,["model-value","format","time-disabled","disabled-date","focused-date","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):t.createCommentVNode("",!0)],2),[[t.vShow,o.isTime]]),o.confirm?(t.openBlock(),t.createBlock(z,{key:0,"show-time":o.showTime,"is-time":o.isTime,onOnPickToggleTime:o.handleToggleTime,onOnPickClear:o.handlePickClear,onOnPickSuccess:o.handlePickSuccess},null,8,["show-time","is-time","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var dG=l(cG,[["render",uG]]);const S3="ivu-picker-panel",tw="ivu-time-picker",C3=o=>o[0].toUpperCase()+o.slice(1),fG={name:"RangeTimePickerPanel",mixins:[gv,Qn,pv],components:{TimeSpinner:v3,Confirm:mv},emits:["on-pick"],props:{steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){const[o,c]=this.modelValue.slice();return{prefixCls:S3,timePrefixCls:tw,showDate:!1,dateStart:o||sa(),dateEnd:c||sa()}},computed:{classes(){return[`${S3}-body-wrapper`,`${tw}-with-range`,{[`${tw}-with-seconds`]:this.showSeconds}]},showSeconds(){return!!(this.format||"").match(/ss/)},leftDatePanelLabel(){return this.panelLabelConfig(this.date)},rightDatePanelLabel(){return this.panelLabelConfig(this.dateEnd)}},watch:{modelValue(o){const[c,d]=o.slice();this.dateStart=c||sa(),this.dateEnd=d||sa()}},methods:{panelLabelConfig(o){const c=this.t("i.locale"),d=this.t("i.datepicker.datePanelLabel"),{labels:C,separator:b}=Yx(c,d,o||sa());return[C[0].label,b,C[1].label].join("")},handleChange(o,c,d=!0){const C=new Date(this.dateStart);let b=new Date(this.dateEnd);Object.keys(o).forEach(m=>{C[`set${C3(m)}`](o[m])}),Object.keys(c).forEach(m=>{b[`set${C3(m)}`](c[m])}),b<C&&(b=C),d&&this.$emit("on-pick",[C,b],"time")},handleStartChange(o){this.handleChange(o,{})},handleEndChange(o){this.handleChange({},o)},updateScroll(){this.$refs.timeSpinner.updateScroll(),this.$refs.timeSpinnerEnd.updateScroll()}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function pG(o,c,d,C,b,m){const E=t.resolveComponent("time-spinner"),V=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),onMousedown:c[0]||(c[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content",b.prefixCls+"-content-left"])},[t.createElementVNode("div",{class:t.normalizeClass([b.timePrefixCls+"-header"])},[b.showDate?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(m.leftDatePanelLabel),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(o.t("i.datepicker.startTime")),1)],64))],2),t.createVNode(E,{ref:"timeSpinner",steps:d.steps,"show-seconds":m.showSeconds,hours:d.modelValue[0]&&b.dateStart.getHours(),minutes:d.modelValue[0]&&b.dateStart.getMinutes(),seconds:d.modelValue[0]&&b.dateStart.getSeconds(),"disabled-hours":o.disabledHours,"disabled-minutes":o.disabledMinutes,"disabled-seconds":o.disabledSeconds,"hide-disabled-options":o.hideDisabledOptions,onOnChange:m.handleStartChange,onOnPickClick:o.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content",b.prefixCls+"-content-right"])},[t.createElementVNode("div",{class:t.normalizeClass([b.timePrefixCls+"-header"])},[b.showDate?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(m.rightDatePanelLabel),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(o.t("i.datepicker.endTime")),1)],64))],2),t.createVNode(E,{ref:"timeSpinnerEnd",steps:d.steps,"show-seconds":m.showSeconds,hours:d.modelValue[1]&&b.dateEnd.getHours(),minutes:d.modelValue[1]&&b.dateEnd.getMinutes(),seconds:d.modelValue[1]&&b.dateEnd.getSeconds(),"disabled-hours":o.disabledHours,"disabled-minutes":o.disabledMinutes,"disabled-seconds":o.disabledSeconds,"hide-disabled-options":o.hideDisabledOptions,onOnChange:m.handleEndChange,onOnPickClick:o.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),o.confirm?(t.openBlock(),t.createBlock(V,{key:0,onOnPickClear:o.handlePickClear,onOnPickSuccess:o.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var k3=l(fG,[["render",pG]]);const Xu="ivu-picker-panel",nw="ivu-date-picker",T3=(o,c)=>!o||!c?0:o.getTime()-c.getTime(),mG={name:"RangeDatePickerPanel",mixins:[gv,Qn,_3],components:{Icon:S,DateTable:p3,YearTable:m3,MonthTable:g3,TimePicker:k3,Confirm:mv,datePanelLabel:w3},props:{splitPanels:{type:Boolean,default:!1}},data(){const[o,c]=this.modelValue.map(C=>C||sa()),d=this.startDate?this.startDate:o;return{prefixCls:Xu,datePrefixCls:nw,dates:this.modelValue,rangeState:{from:this.modelValue[0],to:this.modelValue[1],selecting:o&&!c},currentView:this.selectionMode||"range",leftPickerTable:`${this.selectionMode}-table`,rightPickerTable:`${this.selectionMode}-table`,leftPanelDate:d,rightPanelDate:new Date(d.getFullYear(),d.getMonth()+1,1)}},computed:{classes(){return[`${Xu}-body-wrapper`,`${nw}-with-range`,{[`${Xu}-with-sidebar`]:this.shortcuts.length,[`${nw}-with-week-numbers`]:this.showWeekNumbers}]},panelBodyClasses(){return[Xu+"-body",{[Xu+"-body-time"]:this.showTime,[Xu+"-body-date"]:!this.showTime}]},leftDatePanelLabel(){return this.panelLabelConfig("left")},rightDatePanelLabel(){return this.panelLabelConfig("right")},leftDatePanelView(){return this.leftPickerTable.split("-").shift()},rightDatePanelView(){return this.rightPickerTable.split("-").shift()},timeDisabled(){return!(this.dates[0]&&this.dates[1])},preSelecting(){const o=`${this.currentView}-table`;return{left:this.leftPickerTable!==o,right:this.rightPickerTable!==o}},panelPickerHandlers(){return{left:this.preSelecting.left?this.handlePreSelection.bind(this,"left"):this.handleRangePick,right:this.preSelecting.right?this.handlePreSelection.bind(this,"right"):this.handleRangePick}}},watch:{modelValue(o){const c=o[0]?Gx(o[0]):null,d=o[1]?Gx(o[1]):null;this.dates=[c,d].sort(T3),this.rangeState={from:this.dates[0],to:this.dates[1],selecting:!1},this.setPanelDates(this.startDate||this.dates[0]||new Date)},currentView(o){const c=this.leftPanelDate.getMonth(),d=this.rightPanelDate.getMonth(),C=this.leftPanelDate.getFullYear()===this.rightPanelDate.getFullYear();o==="date"&&C&&c===d&&this.changePanelDate("right","Month",1),o==="month"&&C&&this.changePanelDate("right","FullYear",1),o==="year"&&C&&this.changePanelDate("right","FullYear",10)},selectionMode(o){this.currentView=o||"range"},focusedDate(o){this.setPanelDates(o||new Date)}},methods:{reset(){this.currentView=this.selectionMode,this.leftPickerTable=`${this.currentView}-table`,this.rightPickerTable=`${this.currentView}-table`},setPanelDates(o){this.leftPanelDate=o;const c=new Date(o.getFullYear(),o.getMonth()+1,1),d=this.dates[1]?this.dates[1].getTime():this.dates[1];this.rightPanelDate=this.splitPanels?new Date(Math.max(d,c.getTime())):c},panelLabelConfig(o){const c=this.t("i.locale"),d=this.t("i.datepicker.datePanelLabel"),C=V=>{const W=V=="month"?this.showMonthPicker:this.showYearPicker;return()=>W(o)},b=this[`${o}PanelDate`],{labels:m,separator:E}=Yx(c,d,b);return{separator:E,labels:m.map(V=>(V.handler=C(V.type),V))}},prevYear(o){const c=this.currentView==="year"?-10:-1;this.changePanelDate(o,"FullYear",c)},nextYear(o){const c=this.currentView==="year"?10:1;this.changePanelDate(o,"FullYear",c)},prevMonth(o){this.changePanelDate(o,"Month",-1)},nextMonth(o){this.changePanelDate(o,"Month",1)},changePanelDate(o,c,d,C=!0){const b=new Date(this[`${o}PanelDate`]);if(c==="FullYear"?b[`set${c}`](b[`get${c}`]()+d):b[`set${c}`](b[`get${c}`]()+d,1),this[`${o}PanelDate`]=b,!!C)if(this.splitPanels){const m=o==="left"?"right":"left";o==="left"&&this.leftPanelDate>=this.rightPanelDate&&this.changePanelDate(m,c,1),o==="right"&&this.rightPanelDate<=this.leftPanelDate&&this.changePanelDate(m,c,-1)}else{const m=o==="left"?"right":"left",E=this[`${m}PanelDate`],V=new Date(E);if(c==="Month"){const W=new Date(V.getFullYear(),V.getMonth()+d+1,0).getDate();V.setDate(Math.min(W,V.getDate()))}V[`set${c}`](V[`get${c}`]()+d),this[`${m}PanelDate`]=V}},showYearPicker(o){this[`${o}PickerTable`]="year-table"},showMonthPicker(o){this[`${o}PickerTable`]="month-table"},handlePreSelection(o,c){if(this[`${o}PanelDate`]=c,this[`${o}PickerTable`]==="year-table"?this[`${o}PickerTable`]="month-table":this[`${o}PickerTable`]=`${this.currentView}-table`,!this.splitPanels){const d=o==="left"?"right":"left";this[`${d}PanelDate`]=c;const C=d==="left"?-1:1;this.changePanelDate(d,"Month",C,!1)}},handleRangePick(o,c){if(this.rangeState.selecting||this.currentView==="time"){if(this.currentView==="time")this.dates=o;else{const[d,C]=[this.rangeState.from,o].sort(T3);this.dates=[d,C],this.rangeState={from:d,to:C,selecting:!1}}this.handleConfirm(!1,c||"date")}else this.rangeState={from:o,to:null,selecting:!0}},handleChangeRange(o){this.rangeState.to=o}}},gG=["onClick"];function vG(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("date-panel-label"),W=t.resolveComponent("time-picker"),z=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),onMousedown:c[8]||(c[8]=t.withModifiers(()=>{},["prevent"]))},[o.shortcuts.length?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-sidebar"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.shortcuts,G=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls+"-shortcut"]),key:G.text,onClick:ae=>o.handleShortcutClick(G)},t.toDisplayString(G.text),11,gG))),128))],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(m.panelBodyClasses)},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content",b.prefixCls+"-content-left"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.datePrefixCls+"-header"])},[t.createElementVNode("span",{class:t.normalizeClass(o.iconBtnCls("prev","-double")),onClick:c[0]||(c[0]=G=>m.prevYear("left"))},[t.createVNode(E,{type:"ios-arrow-back"})],2),b.leftPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(o.iconBtnCls("prev")),onClick:c[1]||(c[1]=G=>m.prevMonth("left"))},[t.createVNode(E,{type:"ios-arrow-back"})],2)),[[t.vShow,b.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(V,{"date-panel-label":m.leftDatePanelLabel,"current-view":m.leftDatePanelView,"date-prefix-cls":b.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),d.splitPanels||b.leftPickerTable!=="date-table"?(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(o.iconBtnCls("next","-double")),onClick:c[2]||(c[2]=G=>m.nextYear("left"))},[t.createVNode(E,{type:"ios-arrow-forward"})],2)):t.createCommentVNode("",!0),d.splitPanels&&b.leftPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(o.iconBtnCls("next")),onClick:c[3]||(c[3]=G=>m.nextMonth("left"))},[t.createVNode(E,{type:"ios-arrow-forward"})],2)),[[t.vShow,b.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,b.currentView!=="time"]]),b.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(b.leftPickerTable),{key:0,ref:"leftYearTable","table-date":b.leftPanelDate,"selection-mode":"range","disabled-date":o.disabledDate,"range-state":b.rangeState,"show-week-numbers":o.showWeekNumbers,"model-value":m.preSelecting.left?[b.dates[0]]:b.dates,"focused-date":o.focusedDate,onOnChangeRange:m.handleChangeRange,onOnPick:m.panelPickerHandlers.left,onOnPickClick:o.handlePickClick},null,40,["table-date","disabled-date","range-state","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),[[t.vShow,!o.isTime]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content",b.prefixCls+"-content-right"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.datePrefixCls+"-header"])},[d.splitPanels||b.rightPickerTable!=="date-table"?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(o.iconBtnCls("prev","-double")),onClick:c[4]||(c[4]=G=>m.prevYear("right"))},[t.createVNode(E,{type:"ios-arrow-back"})],2)):t.createCommentVNode("",!0),d.splitPanels&&b.rightPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(o.iconBtnCls("prev")),onClick:c[5]||(c[5]=G=>m.prevMonth("right"))},[t.createVNode(E,{type:"ios-arrow-back"})],2)),[[t.vShow,b.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(V,{"date-panel-label":m.rightDatePanelLabel,"current-view":m.rightDatePanelView,"date-prefix-cls":b.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),t.createElementVNode("span",{class:t.normalizeClass(o.iconBtnCls("next","-double")),onClick:c[6]||(c[6]=G=>m.nextYear("right"))},[t.createVNode(E,{type:"ios-arrow-forward"})],2),b.rightPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(o.iconBtnCls("next")),onClick:c[7]||(c[7]=G=>m.nextMonth("right"))},[t.createVNode(E,{type:"ios-arrow-forward"})],2)),[[t.vShow,b.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,b.currentView!=="time"]]),b.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(b.rightPickerTable),{key:0,ref:"rightYearTable","table-date":b.rightPanelDate,"selection-mode":"range","range-state":b.rangeState,"disabled-date":o.disabledDate,"show-week-numbers":o.showWeekNumbers,"model-value":m.preSelecting.right?[b.dates[b.dates.length-1]]:b.dates,"focused-date":o.focusedDate,onOnChangeRange:m.handleChangeRange,onOnPick:m.panelPickerHandlers.right,onOnPickClick:o.handlePickClick},null,40,["table-date","range-state","disabled-date","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),[[t.vShow,!o.isTime]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content"])},[b.currentView==="time"?(t.openBlock(),t.createBlock(W,t.mergeProps({key:0,ref:"timePicker","model-value":b.dates,format:o.format,"time-disabled":m.timeDisabled},o.timePickerOptions,{onOnPick:m.handleRangePick,onOnPickClick:o.handlePickClick,onOnPickClear:o.handlePickClear,onOnPickSuccess:o.handlePickSuccess,onOnPickToggleTime:o.handleToggleTime}),null,16,["model-value","format","time-disabled","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):t.createCommentVNode("",!0)],2),[[t.vShow,o.isTime]]),o.confirm?(t.openBlock(),t.createBlock(z,{key:0,"show-time":o.showTime,"is-time":o.isTime,"time-disabled":m.timeDisabled,onOnPickToggleTime:o.handleToggleTime,onOnPickClear:o.handlePickClear,onOnPickSuccess:o.handlePickSuccess},null,8,["show-time","is-time","time-disabled","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var yG=l(mG,[["render",vG]]),M3={name:"CalendarPicker",mixins:[a3],props:{type:{validator(o){return _(o,["year","month","date","daterange","datetime","datetimerange"])},default:"date"}},components:{DatePickerPanel:dG,RangeDatePickerPanel:yG},computed:{panel(){return this.type==="daterange"||this.type==="datetimerange"?"RangeDatePickerPanel":"DatePickerPanel"},ownPickerProps(){return this.options}}},bG={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};const E3={name:"Description",inject:["DescriptionListInstance"],props:{term:{type:String}},computed:{styles(){let o={};return this.DescriptionListInstance.gutter!==0&&(o={paddingLeft:this.DescriptionListInstance.gutter/2+"px",paddingRight:this.DescriptionListInstance.gutter/2+"px"}),o}},render(){let o;(this.term||this.$slots.term)&&(this.$slots.term?o=t.h("div",{class:"ivu-description-term"},this.$slots.term()):o=t.h("div",{class:"ivu-description-term"},this.term));const c=t.h("div",{class:"ivu-description-detail"},this.$slots.default()),d=o?[o,c]:[c];return t.h(ia,{...bG[this.DescriptionListInstance.col],style:this.styles},()=>d)}},OG={name:"DescriptionList",components:{Row:Nl},provide(){return{DescriptionListInstance:this}},props:{layout:{validator(o){return _(o,["horizontal","vertical"])},default:"horizontal"},title:{type:String},gutter:{type:Number,default:32},col:{validator(o){return _(o,[1,2,3,4])},default:3}}},xG={key:0,class:"ivu-description-list-title"};function wG(o,c,d,C,b,m){const E=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-description-list",{"ivu-description-list-vertical":d.layout==="vertical"}])},[d.title||o.$slots.title?(t.openBlock(),t.createElementBlock("div",xG,[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])])):t.createCommentVNode("",!0),t.createVNode(E,{gutter:d.gutter},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"default")]),_:3},8,["gutter"])],2)}var P3=l(OG,[["render",wG]]);const Ll="ivu-divider",_G={name:"Divider",props:{type:{type:String,default:"horizontal",validator(o){return _(o,["horizontal","vertical"])}},orientation:{type:String,default:"center",validator(o){return _(o,["left","right","center"])}},dashed:{type:Boolean,default:!1},size:{validator(o){return _(o,["small","default"])},default:"default"},plain:{type:Boolean,default:!1}},computed:{hasSlot(){return!!this.$slots.default},classes(){return[`${Ll}`,`${Ll}-${this.type}`,`${Ll}-${this.size}`,{[`${Ll}-with-text`]:this.hasSlot&&this.orientation==="center",[`${Ll}-with-text-${this.orientation}`]:this.hasSlot,[`${Ll}-dashed`]:!!this.dashed,[`${Ll}-plain`]:this.plain}]},slotClasses(){return[`${Ll}-inner-text`]}}};function SG(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[m.hasSlot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(m.slotClasses)},[t.renderSlot(o.$slots,"default")],2)):t.createCommentVNode("",!0)],2)}var vv=l(_G,[["render",SG]]),iw={props:{lockScroll:{type:Boolean,default:!0}},methods:{checkScrollBar(){if(!r)return;let o=window.innerWidth;if(!o){const c=document.documentElement.getBoundingClientRect();o=c.right-Math.abs(c.left)}this.bodyIsOverflowing=document.body.clientWidth<o,this.bodyIsOverflowing&&(this.scrollBarWidth=k())},checkMaskInVisible(){let o=r?document.getElementsByClassName("ivu-modal-mask")||[]:[];return Array.from(o).every(c=>c.style.display==="none"||c.classList.contains("fade-leave-to"))},setScrollBar(){r&&this.bodyIsOverflowing&&this.scrollBarWidth!==void 0&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){r&&(document.body.style.paddingRight="")},addScrollEffect(){!this.lockScroll||(this.checkScrollBar(),this.setScrollBar(),r&&(document.body.style.overflow="hidden"))},removeScrollEffect(){!this.lockScroll||r&&this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}};const Gr="ivu-drawer",CG={name:"Drawer",mixins:[iw],components:{Icon:S},emits:["on-close","on-resize-width","on-visible-change","update:modelValue","on-drag"],provide(){return{DrawerInstance:this}},props:{modelValue:{type:Boolean,default:!1},title:{type:String},width:{type:[Number,String],default:256},height:{type:[Number,String],default:256},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskStyle:{type:Object},styles:{type:Object},scrollable:{type:Boolean,default:!1},placement:{validator(o){return _(o,["left","right","top","bottom"])},default:"right"},zIndex:{type:Number,default:1e3},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!0:o.$VIEWUI.transfer}},className:{type:String},inner:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},beforeClose:Function},data(){return{prefixCls:Gr,visible:this.modelValue,wrapShow:!1,showHead:!0,canMove:!1,dragWidth:this.width,dragHeight:this.height,wrapperWidth:this.width,wrapperHeight:this.height,wrapperLeft:0,minWidth:256,minHeight:256,id:te(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${Gr}-wrap`,{[`${Gr}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${Gr}-no-mask`]:!this.mask,[`${Gr}-wrap-inner`]:this.inner,[`${Gr}-wrap-dragging`]:this.canMove}]},wrapStyles(){return{zIndex:this.zIndex}},mainStyles(){let o={};if(this.placement==="left"||this.placement==="right"){const c=parseInt(this.dragWidth),d={width:c<=100?`${c}%`:`${c}px`};Object.assign(o,d)}else{const c=parseInt(this.dragHeight),d={height:c<=100?`${c}%`:`${c}px`};Object.assign(o,d)}return o},contentClasses(){return[`${Gr}-content`,{[`${Gr}-content-no-mask`]:!this.mask}]},classes(){return[`${Gr}`,`${Gr}-${this.placement}`,{[`${Gr}-no-header`]:!this.showHead,[`${Gr}-inner`]:this.inner}]},maskClasses(){return[`${Gr}-mask`,{[`${Gr}-mask-inner`]:this.inner}]},transitionName(){return this.placement==="left"||this.placement==="right"?`move-${this.placement}`:this.placement==="top"?"move-up":"move-down"}},methods:{close(){if(!this.beforeClose)return this.handleClose();const o=this.beforeClose();o&&o.then?o.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-close")},handleMask(){this.maskClosable&&this.mask&&this.close()},handleWrapClick(o){const c=o.target.getAttribute("class");c&&c.indexOf(`${Gr}-wrap`)>-1&&this.handleMask()},handleMousemove(o){if(!this.canMove||!this.draggable)return;this.handleSetWrapperWidth();const c=o.pageX-this.wrapperLeft;let d=this.placement==="right"?this.wrapperWidth-c:c;d=Math.max(d,parseFloat(this.minWidth)),o.atMin=d===parseFloat(this.minWidth),d<=100&&(d=d/this.wrapperWidth*100),this.dragWidth=d,this.$emit("on-resize-width",parseInt(this.dragWidth)),this.$emit("on-drag","dragging",parseInt(this.dragWidth))},handleSetWrapperWidth(){const{width:o,left:c}=this.$refs.drawer.getBoundingClientRect();this.wrapperWidth=o,this.wrapperLeft=c},handleMouseup(){!this.draggable||(this.canMove=!1,this.$emit("on-drag","end"))},handleTriggerMousedown(){this.canMove=!0,window.getSelection().removeAllRanges(),this.$emit("on-drag","start")},addDrawer(){const o=this.$root;o.drawerList||(o.drawerList=[]),o.drawerList.push({id:this.id,drawer:this})},removeDrawer(){const o=this.$root;if(!o.drawerList)return;const c=o.drawerList.findIndex(d=>d.id===this.id);o.drawerList.splice(c,1)}},mounted(){this.visible&&(this.wrapShow=!0);let o=!0;this.$slots.header===void 0&&!this.title&&(o=!1),this.showHead=o,this.addDrawer(),s(document,"mousemove",this.handleMousemove),s(document,"mouseup",this.handleMouseup),this.handleSetWrapperWidth()},beforeUnmount(){this.removeDrawer(),a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup),this.removeScrollEffect()},watch:{modelValue(o){this.visible=o},visible(o){o===!1?this.timer=setTimeout(()=>{this.wrapShow=!1,this.$root.drawerList.map(c=>c.drawer).filter(c=>c.id!==this.id).some(c=>c.visible&&!c.scrollable)||this.removeScrollEffect()},300):(this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(c=>{c.table.handleOnVisibleChange(o)}),this.sliderList.forEach(c=>{c.slider.handleOnVisibleChange(o)}),this.$emit("on-visible-change",o)},scrollable(o){o?this.removeScrollEffect():this.addScrollEffect()},title(o){this.$slots.header===void 0&&(this.showHead=!!o)},width(o){this.dragWidth=o},height(o){this.dragHeight=o}}},kG={ref:"drawer"},TG=t.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger"},[t.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger-point"},[t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i")])],-1);function MG(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!d.transfer},[t.createElementVNode("div",kG,[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[d.mask?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.maskClasses),style:t.normalizeStyle(d.maskStyle),onClick:c[0]||(c[0]=(...V)=>m.handleMask&&m.handleMask(...V))},null,6)),[[t.vShow,b.visible]]):t.createCommentVNode("",!0)]),_:1}),t.createElementVNode("div",{class:t.normalizeClass(m.wrapClasses),style:t.normalizeStyle(m.wrapStyles),onClick:c[3]||(c[3]=(...V)=>m.handleWrapClick&&m.handleWrapClick(...V))},[t.createVNode(t.Transition,{name:m.transitionName},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.mainStyles)},[t.createElementVNode("div",{class:t.normalizeClass(m.contentClasses),ref:"content"},[d.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:"ivu-drawer-close",onClick:c[1]||(c[1]=(...V)=>m.close&&m.close(...V))},[t.renderSlot(o.$slots,"close",{},()=>[t.createVNode(E,{type:"ios-close"})])])):t.createCommentVNode("",!0),b.showHead?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([b.prefixCls+"-header"])},[t.renderSlot(o.$slots,"header",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-header-inner"])},t.toDisplayString(d.title),3)])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"]),style:t.normalizeStyle(d.styles)},[t.renderSlot(o.$slots,"default")],6)],2),d.draggable&&(d.placement==="left"||d.placement==="right")?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["ivu-drawer-drag","ivu-drawer-drag-"+d.placement]),onMousedown:c[2]||(c[2]=(...V)=>m.handleTriggerMousedown&&m.handleTriggerMousedown(...V))},[t.renderSlot(o.$slots,"trigger",{},()=>[TG])],34)):t.createCommentVNode("",!0)],6),[[t.vShow,b.visible]])]),_:3},8,["name"])],6)],512)],8,["disabled"])}var A3=l(CG,[["render",MG]]);const yv="ivu-dropdown-item",EG={name:"DropdownItem",props:{name:{type:[String,Number]},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},divided:{type:Boolean,default:!1}},computed:{classes(){return[`${yv}`,{[`${yv}-disabled`]:this.disabled,[`${yv}-selected`]:this.selected,[`${yv}-divided`]:this.divided}]}},methods:{handleClick(){if(this.disabled)return;const o=$(this,"Dropdown");this.$parent&&this.$parent.$options.name==="Dropdown"?this.$parent.handleHaschildClick():o&&o.$options.name==="Dropdown"&&o.handleHoverClick(),o.handleItemClick(this.name)}}};function PG(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.classes),onClick:c[0]||(c[0]=(...E)=>m.handleClick&&m.handleClick(...E))},[t.renderSlot(o.$slots,"default")],2)}var R3=l(EG,[["render",PG]]);const AG=(o="")=>o.split("").reduce((c,d)=>{const C=d.charCodeAt(0);return C>=0&&C<=128?c+1:c+2},0),RG=(o="",c)=>{let d=0;return o.split("").reduce((C,b)=>{const m=b.charCodeAt(0);return m>=0&&m<=128?d+=1:d+=2,d<=c?C+b:C},"")},IG={name:"Ellipsis",components:{Tooltip:Va},emits:["on-show","on-hide"],props:{text:{type:String},height:{type:Number},lines:{type:Number},length:{type:Number},fullWidthRecognition:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},theme:{validator(o){return _(o,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"}},data(){return{oversize:!1,computedReady:!1,computedText:""}},watch:{disabled(){this.init()},text(){this.init()},height(){this.init()}},mounted(){this.init()},methods:{init(){this.disabled||(this.computeText(),this.limitShow())},computeText(){this.oversize=!1,this.computedReady=!1,t.nextTick(()=>{let o=this.$refs.text,c=this.$el,d=this.$refs.more,C=1e3,b=this.text,m=this.height;if(!m&&this.lines&&(m=parseInt(R(c,"lineHeight"),10)*this.lines),o){if(this.length)(this.fullWidthRecognition?AG(b):b.length)>this.length&&(this.oversize=!0,d.style.display="inline-block",b=this.fullWidthRecognition?RG(b,this.length):b.slice(0,this.length));else if(c.offsetHeight>m)for(this.oversize=!0,d.style.display="inline-block";c.offsetHeight>m&&C>0;)c.offsetHeight>m*3?o.innerText=b=b.substring(0,Math.floor(b.length/2)):o.innerText=b=b.substring(0,b.length-1),C--}this.computedText=b})},limitShow(){this.computedReady=!0,t.nextTick(()=>{let o=this.$refs.text,c=this.$el;o&&(o.innerText=this.computedText,c.offsetHeight>this.height?this.$emit("on-hide"):this.$emit("on-show"))})}}},DG={class:"ivu-ellipsis"},NG={class:"ivu-ellipsis-more",ref:"more"},$G={class:"ivu-ellipsis-more",ref:"more"},VG={key:1,class:"ivu-ellipsis-hidden"},LG={class:"ivu-ellipsis-more",ref:"more"};function BG(o,c,d,C,b,m){const E=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",DG,[t.renderSlot(o.$slots,"prefix",{class:"ivu-ellipsis-prefix"}),b.computedReady?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[d.tooltip?(t.openBlock(),t.createBlock(E,{key:0,content:d.text,theme:d.theme,"max-width":d.maxWidth,placement:d.placement,transfer:d.transfer},{default:t.withCtx(()=>[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(d.text),513),t.withDirectives(t.createElementVNode("span",NG,[t.renderSlot(o.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,b.oversize]]),t.renderSlot(o.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]),_:3},8,["content","theme","max-width","placement","transfer"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(d.text),513),t.withDirectives(t.createElementVNode("span",$G,[t.renderSlot(o.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,b.oversize]]),t.renderSlot(o.$slots,"suffix",{class:"ivu-ellipsis-suffix"})],64))],64)):(t.openBlock(),t.createElementBlock("div",VG,[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(d.text),513),t.withDirectives(t.createElementVNode("span",LG,[t.renderSlot(o.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,b.oversize]]),t.renderSlot(o.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]))])}var I3=l(IG,[["render",BG]]);const D3={name:"Email",mixins:[sp],data(){return{className:"ivu-login-mail",prefix:"ios-mail-outline",placeholder:"请输入邮箱",type:"email"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:Lx.Email,trigger:"change"},{type:"email",message:"输入的邮箱格式不正确！",trigger:"change"}]}}}};var bv={403:{img:"https://file.iviewui.com/iview-pro/icon-403.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-403-color.svg",title:"403",desc:"抱歉，你无权访问该页面"},404:{img:"https://file.iviewui.com/iview-pro/icon-404.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-404-color.svg",title:"404",desc:"抱歉，你访问的页面不存在"},500:{img:"https://file.iviewui.com/iview-pro/icon-500.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-500-color.svg",title:"500",desc:"抱歉，服务器出错了"}};const UG={name:"Exception",components:{Button:Qr},props:{type:{validator(o){return _(o,["403","404","500",403,404,500])},default:"404"},title:{type:String},desc:{type:String},img:{type:String},imgColor:{type:Boolean,default:!1},backText:{type:String,default:"返回首页"},redirect:{type:String,default:"/"}},computed:{imgPath(){return this.img?this.img:this.imgColor?bv[this.type].imgColor:bv[this.type].img},titleText(){return this.title?this.title:bv[this.type].title},descText(){return this.desc?this.desc:bv[this.type].desc}}},zG={class:"ivu-exception"},FG={class:"ivu-exception-img"},XG={class:"ivu-exception-content"},WG={class:"ivu-exception-content-desc"},QG={class:"ivu-exception-content-actions"};function HG(o,c,d,C,b,m){const E=t.resolveComponent("Button");return t.openBlock(),t.createElementBlock("div",zG,[t.createElementVNode("div",FG,[t.createElementVNode("div",{class:"ivu-exception-img-element",style:t.normalizeStyle({"background-image":"url("+m.imgPath+")"})},null,4)]),t.createElementVNode("div",XG,[t.createElementVNode("h1",null,[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(m.titleText),1)])]),t.createElementVNode("div",WG,[t.renderSlot(o.$slots,"desc",{},()=>[t.createTextVNode(t.toDisplayString(m.descText),1)])]),t.createElementVNode("div",QG,[t.renderSlot(o.$slots,"actions",{},()=>[t.createVNode(E,{to:d.redirect,type:"primary",size:"large"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.backText),1)]),_:1},8,["to"])])])])])}var N3=l(UG,[["render",HG]]);const GG="ivu-layout",YG={name:"Footer",computed:{wrapClasses(){return`${GG}-footer`}}};function jG(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[t.renderSlot(o.$slots,"default")],2)}var rw=l(YG,[["render",jG]]);const qG={name:"FooterToolbar",props:{extra:{type:String}}},ZG={class:"ivu-footer-toolbar"},KG={key:0,class:"ivu-footer-toolbar-left"},JG={class:"ivu-footer-toolbar-right"};function eY(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",ZG,[d.extra||o.$slots.extra?(t.openBlock(),t.createElementBlock("div",KG,[t.renderSlot(o.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(d.extra),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",JG,[t.renderSlot(o.$slots,"default")])])}var $3=l(qG,[["render",eY]]);const Ov="ivu-form",tY={name:"iForm",emits:["on-validate"],provide(){return{FormInstance:this}},props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{validator(o){return _(o,["left","right","top"])},default:"right"},inline:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},autocomplete:{validator(o){return _(o,["on","off"])},default:"off"},hideRequiredMark:{type:Boolean,default:!1},labelColon:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1}},data(){return{fields:[]}},computed:{classes(){return[`${Ov}`,`${Ov}-label-${this.labelPosition}`,{[`${Ov}-inline`]:this.inline,[`${Ov}-hide-required-mark`]:this.hideRequiredMark}]},colon(){let o="";return this.labelColon&&(o=typeof this.labelColon=="boolean"?":":this.labelColon),o}},methods:{resetFields(){this.fields.forEach(o=>{o.resetField()})},validate(o){return new Promise(c=>{let d=!0,C=0;this.fields.length===0&&(c(d),typeof o=="function"&&o(d)),this.fields.forEach(b=>{b.validate("",m=>{m&&(d=!1),++C===this.fields.length&&(c(d),typeof o=="function"&&o(d))})})})},validateField(o,c){const d=this.fields.filter(C=>C.prop===o)[0];if(!d)throw new Error("[View UI warn]: must call validateField with valid prop string!");d.validate("",c)},addField(o){o&&this.fields.push(o)},removeField(o){o.prop&&this.fields.splice(this.fields.indexOf(o),1)}},watch:{rules(){this.validate()}}},nY=["autocomplete"];function iY(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("form",{class:t.normalizeClass(m.classes),autocomplete:d.autocomplete},[t.renderSlot(o.$slots,"default")],10,nY)}var xv=l(tY,[["render",iY]]);const rY={name:"GlobalFooter",components:{Icon:S},props:{links:{type:Array,default(){return[]}},copyright:{type:String}}},sY={class:"ivu-global-footer"},oY={key:0,class:"ivu-global-footer-links"},aY=["href","target","title"],lY={key:1,class:"ivu-global-footer-copyright"};function cY(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("footer",sY,[d.links.length||o.$slots.links?(t.openBlock(),t.createElementBlock("div",oY,[t.renderSlot(o.$slots,"links",{},()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.links,V=>(t.openBlock(),t.createElementBlock("a",{href:V.href,target:V.blankTarget?"_blank":"_self",key:V.key,title:V.title},[V.icon?(t.openBlock(),t.createBlock(E,{key:0,type:V.icon},null,8,["type"])):V.customIcon?(t.openBlock(),t.createBlock(E,{key:1,custom:V.customIcon},null,8,["custom"])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(V.title),1)],8,aY))),128))])])):t.createCommentVNode("",!0),d.copyright||o.$slots.copyright?(t.openBlock(),t.createElementBlock("div",lY,[t.renderSlot(o.$slots,"copyright",{},()=>[t.createTextVNode(t.toDisplayString(d.copyright),1)])])):t.createCommentVNode("",!0)])}var V3=l(rY,[["render",cY]]),sw={exports:{}},hY=sw.exports={};hY.forEach=function(o,c){for(var d=0;d<o.length;d++){var C=c(o[d]);if(C)return C}};var uY=function(o){var c=o.stateHandler.getState;function d(E){var V=c(E);return V&&!!V.isDetectable}function C(E){c(E).isDetectable=!0}function b(E){return!!c(E).busy}function m(E,V){c(E).busy=!!V}return{isDetectable:d,markAsDetectable:C,isBusy:b,markBusy:m}},dY=function(o){var c={};function d(E){var V=o.get(E);return V===void 0?[]:c[V]||[]}function C(E,V){var W=o.get(E);c[W]||(c[W]=[]),c[W].push(V)}function b(E,V){for(var W=d(E),z=0,G=W.length;z<G;++z)if(W[z]===V){W.splice(z,1);break}}function m(E){var V=d(E);!V||(V.length=0)}return{get:d,add:C,removeListener:b,removeAllListeners:m}},fY=function(){var o=1;function c(){return o++}return{generate:c}},pY=function(o){var c=o.idGenerator,d=o.stateHandler.getState;function C(m){var E=d(m);return E&&E.id!==void 0?E.id:null}function b(m){var E=d(m);if(!E)throw new Error("setId required the element to have a resize detection state.");var V=c.generate();return E.id=V,V}return{get:C,set:b}},mY=function(o){function c(){}var d={log:c,warn:c,error:c};if(!o&&window.console){var C=function(b,m){b[m]=function(){var E=console[m];if(E.apply)E.apply(console,arguments);else for(var V=0;V<arguments.length;V++)E(arguments[V])}};C(d,"log"),C(d,"warn"),C(d,"error")}return d},ow={exports:{}},L3=ow.exports={};L3.isIE=function(o){function c(){var C=navigator.userAgent.toLowerCase();return C.indexOf("msie")!==-1||C.indexOf("trident")!==-1||C.indexOf(" edge/")!==-1}if(!c())return!1;if(!o)return!0;var d=function(){var C,b=3,m=document.createElement("div"),E=m.getElementsByTagName("i");do m.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->";while(E[0]);return b>4?b:C}();return o===d},L3.isLegacyOpera=function(){return!!window.opera};var B3={exports:{}},gY=B3.exports={};gY.getOption=vY;function vY(o,c,d){var C=o[c];return C==null&&d!==void 0?d:C}var U3=B3.exports,yY=function(o){o=o||{};var c=o.reporter,d=U3.getOption(o,"async",!0),C=U3.getOption(o,"auto",!0);C&&!d&&(c&&c.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),d=!0);var b=z3(),m,E=!1;function V(Oe,ve){!E&&C&&d&&b.size()===0&&G(),b.add(Oe,ve)}function W(){for(E=!0;b.size();){var Oe=b;b=z3(),Oe.process()}E=!1}function z(Oe){E||(Oe===void 0&&(Oe=d),m&&(ae(m),m=null),Oe?G():W())}function G(){m=xe(W)}function ae(Oe){var ve=clearTimeout;return ve(Oe)}function xe(Oe){var ve=function(se){return setTimeout(se,0)};return ve(Oe)}return{add:V,force:z}};function z3(){var o={},c=0,d=0,C=0;function b(V,W){W||(W=V,V=0),V>d?d=V:V<C&&(C=V),o[V]||(o[V]=[]),o[V].push(W),c++}function m(){for(var V=C;V<=d;V++)for(var W=o[V],z=0;z<W.length;z++){var G=W[z];G()}}function E(){return c}return{add:b,process:m,size:E}}var aw="_erd";function bY(o){return o[aw]={},F3(o)}function F3(o){return o[aw]}function OY(o){delete o[aw]}var xY={initState:bY,getState:F3,cleanState:OY},vp=ow.exports,wY=function(o){o=o||{};var c=o.reporter,d=o.batchProcessor,C=o.stateHandler.getState;if(!c)throw new Error("Missing required dependency: reporter.");function b(z,G){function ae(){G(z)}if(vp.isIE(8))C(z).object={proxy:ae},z.attachEvent("onresize",ae);else{var xe=V(z);if(!xe)throw new Error("Element is not detectable by this strategy.");xe.contentDocument.defaultView.addEventListener("resize",ae)}}function m(z){var G=o.important?" !important; ":"; ";return(z.join(G)+G).trim()}function E(z,G,ae){ae||(ae=G,G=z,z=null),z=z||{},z.debug;function xe(Oe,ve){var se=m(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Pe=!1,$t=window.getComputedStyle(Oe),mt=Oe.offsetWidth,Ot=Oe.offsetHeight;C(Oe).startSize={width:mt,height:Ot};function He(){function De(){if($t.position==="static"){Oe.style.setProperty("position","relative",z.important?"important":"");var zt=function(Ft,Mt,xt,At){function Wt(gt){return gt.replace(/[^-\d\.]/g,"")}var Et=xt[At];Et!=="auto"&&Wt(Et)!=="0"&&(Ft.warn("An element that is positioned static has style."+At+"="+Et+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+At+" will be set to 0. Element: ",Mt),Mt.style.setProperty(At,"0",z.important?"important":""))};zt(c,Oe,$t,"top"),zt(c,Oe,$t,"right"),zt(c,Oe,$t,"bottom"),zt(c,Oe,$t,"left")}}function Ke(){Pe||De();function zt(Mt,xt){if(!Mt.contentDocument){var At=C(Mt);At.checkForObjectDocumentTimeoutId&&window.clearTimeout(At.checkForObjectDocumentTimeoutId),At.checkForObjectDocumentTimeoutId=setTimeout(function(){At.checkForObjectDocumentTimeoutId=0,zt(Mt,xt)},100);return}xt(Mt.contentDocument)}var Ft=this;zt(Ft,function(Mt){ve(Oe)})}$t.position!==""&&(De(),Pe=!0);var Ye=document.createElement("object");Ye.style.cssText=se,Ye.tabIndex=-1,Ye.type="text/html",Ye.setAttribute("aria-hidden","true"),Ye.onload=Ke,vp.isIE()||(Ye.data="about:blank"),C(Oe)&&(Oe.appendChild(Ye),C(Oe).object=Ye,vp.isIE()&&(Ye.data="about:blank"))}d?d.add(He):He()}vp.isIE(8)?ae(G):xe(G,ae)}function V(z){return C(z).object}function W(z){if(C(z)){var G=V(z);!G||(vp.isIE(8)?z.detachEvent("onresize",G.proxy):z.removeChild(G),C(z).checkForObjectDocumentTimeoutId&&window.clearTimeout(C(z).checkForObjectDocumentTimeoutId),delete C(z).object)}}return{makeDetectable:E,addListener:b,uninstall:W}},_Y=sw.exports.forEach,SY=function(o){o=o||{};var c=o.reporter,d=o.batchProcessor,C=o.stateHandler.getState;o.stateHandler.hasState;var b=o.idHandler;if(!d)throw new Error("Missing required dependency: batchProcessor");if(!c)throw new Error("Missing required dependency: reporter.");var m=G(),E="erd_scroll_detection_scrollbar_style",V="erd_scroll_detection_container";function W(He){ae(He,E,V)}W(window.document);function z(He){var De=o.important?" !important; ":"; ";return(He.join(De)+De).trim()}function G(){var He=500,De=500,Ke=document.createElement("div");Ke.style.cssText=z(["position: absolute","width: "+He*2+"px","height: "+De*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Ye=document.createElement("div");Ye.style.cssText=z(["position: absolute","width: "+He+"px","height: "+De+"px","overflow: scroll","visibility: none","top: "+-He*3+"px","left: "+-De*3+"px","visibility: hidden","margin: 0","padding: 0"]),Ye.appendChild(Ke),document.body.insertBefore(Ye,document.body.firstChild);var zt=He-Ye.clientWidth,Ft=De-Ye.clientHeight;return document.body.removeChild(Ye),{width:zt,height:Ft}}function ae(He,De,Ke){function Ye(xt,At){At=At||function(Et){He.head.appendChild(Et)};var Wt=He.createElement("style");return Wt.innerHTML=xt,Wt.id=De,At(Wt),Wt}if(!He.getElementById(De)){var zt=Ke+"_animation",Ft=Ke+"_animation_active",Mt=`/* Created by the element-resize-detector library. */
`;Mt+="."+Ke+" > div::-webkit-scrollbar { "+z(["display: none"])+` }

`,Mt+="."+Ft+" { "+z(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+zt,"animation-name: "+zt])+` }
`,Mt+="@-webkit-keyframes "+zt+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,Mt+="@keyframes "+zt+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Ye(Mt)}}function xe(He){He.className+=" "+V+"_animation_active"}function Oe(He,De,Ke){if(He.addEventListener)He.addEventListener(De,Ke);else if(He.attachEvent)He.attachEvent("on"+De,Ke);else return c.error("[scroll] Don't know how to add event listeners.")}function ve(He,De,Ke){if(He.removeEventListener)He.removeEventListener(De,Ke);else if(He.detachEvent)He.detachEvent("on"+De,Ke);else return c.error("[scroll] Don't know how to remove event listeners.")}function se(He){return C(He).container.childNodes[0].childNodes[0].childNodes[0]}function Pe(He){return C(He).container.childNodes[0].childNodes[0].childNodes[1]}function $t(He,De){var Ke=C(He).listeners;if(!Ke.push)throw new Error("Cannot add listener to an element that is not detectable.");C(He).listeners.push(De)}function mt(He,De,Ke){Ke||(Ke=De,De=He,He=null),He=He||{};function Ye(){if(He.debug){var _t=Array.prototype.slice.call(arguments);if(_t.unshift(b.get(De),"Scroll: "),c.log.apply)c.log.apply(null,_t);else for(var qt=0;qt<_t.length;qt++)c.log(_t[qt])}}function zt(_t){function qt(Tn){var cr=Tn.getRootNode&&Tn.getRootNode().contains(Tn);return Tn===Tn.ownerDocument.body||Tn.ownerDocument.body.contains(Tn)||cr}return!qt(_t)||window.getComputedStyle(_t)===null}function Ft(_t){var qt=C(_t).container.childNodes[0],Tn=window.getComputedStyle(qt);return!Tn.width||Tn.width.indexOf("px")===-1}function Mt(){var _t=window.getComputedStyle(De),qt={};return qt.position=_t.position,qt.width=De.offsetWidth,qt.height=De.offsetHeight,qt.top=_t.top,qt.right=_t.right,qt.bottom=_t.bottom,qt.left=_t.left,qt.widthCSS=_t.width,qt.heightCSS=_t.height,qt}function xt(){var _t=Mt();C(De).startSize={width:_t.width,height:_t.height},Ye("Element start size",C(De).startSize)}function At(){C(De).listeners=[]}function Wt(){if(Ye("storeStyle invoked."),!C(De)){Ye("Aborting because element has been uninstalled");return}var _t=Mt();C(De).style=_t}function Et(_t,qt,Tn){C(_t).lastWidth=qt,C(_t).lastHeight=Tn}function gt(_t){return se(_t).childNodes[0]}function ct(){return 2*m.width+1}function It(){return 2*m.height+1}function bt(_t){return _t+10+ct()}function Kt(_t){return _t+10+It()}function nn(_t){return _t*2+ct()}function zn(_t){return _t*2+It()}function ti(_t,qt,Tn){var cr=se(_t),Yr=Pe(_t),Wa=bt(qt),jl=Kt(Tn),jr=nn(qt),Hn=zn(Tn);cr.scrollLeft=Wa,cr.scrollTop=jl,Yr.scrollLeft=jr,Yr.scrollTop=Hn}function Oi(){var _t=C(De).container;if(!_t){_t=document.createElement("div"),_t.className=V,_t.style.cssText=z(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),C(De).container=_t,xe(_t),De.appendChild(_t);var qt=function(){C(De).onRendered&&C(De).onRendered()};Oe(_t,"animationstart",qt),C(De).onAnimationStart=qt}return _t}function ki(){function _t(){var Ui=C(De).style;if(Ui.position==="static"){De.style.setProperty("position","relative",He.important?"important":"");var Bo=function(Qa,Uo,Uv,ql){function Vw(Lw){return Lw.replace(/[^-\d\.]/g,"")}var Ip=Uv[ql];Ip!=="auto"&&Vw(Ip)!=="0"&&(Qa.warn("An element that is positioned static has style."+ql+"="+Ip+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ql+" will be set to 0. Element: ",Uo),Uo.style[ql]=0)};Bo(c,De,Ui,"top"),Bo(c,De,Ui,"right"),Bo(c,De,Ui,"bottom"),Bo(c,De,Ui,"left")}}function qt(Ui,Bo,Qa,Uo){return Ui=Ui?Ui+"px":"0",Bo=Bo?Bo+"px":"0",Qa=Qa?Qa+"px":"0",Uo=Uo?Uo+"px":"0",["left: "+Ui,"top: "+Bo,"right: "+Uo,"bottom: "+Qa]}if(Ye("Injecting elements"),!C(De)){Ye("Aborting because element has been uninstalled");return}_t();var Tn=C(De).container;Tn||(Tn=Oi());var cr=m.width,Yr=m.height,Wa=z(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),jl=z(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(qt(-(1+cr),-(1+Yr),-Yr,-cr))),jr=z(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Hn=z(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),ds=z(["position: absolute","left: 0","top: 0"]),Vo=z(["position: absolute","width: 200%","height: 200%"]),Us=document.createElement("div"),Lo=document.createElement("div"),qu=document.createElement("div"),Vv=document.createElement("div"),Zu=document.createElement("div"),Lv=document.createElement("div");Us.dir="ltr",Us.style.cssText=Wa,Us.className=V,Lo.className=V,Lo.style.cssText=jl,qu.style.cssText=jr,Vv.style.cssText=ds,Zu.style.cssText=Hn,Lv.style.cssText=Vo,qu.appendChild(Vv),Zu.appendChild(Lv),Lo.appendChild(qu),Lo.appendChild(Zu),Us.appendChild(Lo),Tn.appendChild(Us);function Bv(){var Ui=C(De);Ui&&Ui.onExpand?Ui.onExpand():Ye("Aborting expand scroll handler: element has been uninstalled")}function Rp(){var Ui=C(De);Ui&&Ui.onShrink?Ui.onShrink():Ye("Aborting shrink scroll handler: element has been uninstalled")}Oe(qu,"scroll",Bv),Oe(Zu,"scroll",Rp),C(De).onExpandScroll=Bv,C(De).onShrinkScroll=Rp}function mr(){function _t(jr,Hn,ds){var Vo=gt(jr),Us=bt(Hn),Lo=Kt(ds);Vo.style.setProperty("width",Us+"px",He.important?"important":""),Vo.style.setProperty("height",Lo+"px",He.important?"important":"")}function qt(jr){var Hn=De.offsetWidth,ds=De.offsetHeight,Vo=Hn!==C(De).lastWidth||ds!==C(De).lastHeight;Ye("Storing current size",Hn,ds),Et(De,Hn,ds),d.add(0,function(){if(Vo){if(!C(De)){Ye("Aborting because element has been uninstalled");return}if(!Tn()){Ye("Aborting because element container has not been initialized");return}if(He.debug){var Us=De.offsetWidth,Lo=De.offsetHeight;(Us!==Hn||Lo!==ds)&&c.warn(b.get(De),"Scroll: Size changed before updating detector elements.")}_t(De,Hn,ds)}}),d.add(1,function(){if(!C(De)){Ye("Aborting because element has been uninstalled");return}if(!Tn()){Ye("Aborting because element container has not been initialized");return}ti(De,Hn,ds)}),Vo&&jr&&d.add(2,function(){if(!C(De)){Ye("Aborting because element has been uninstalled");return}if(!Tn()){Ye("Aborting because element container has not been initialized");return}jr()})}function Tn(){return!!C(De).container}function cr(){function jr(){return C(De).lastNotifiedWidth===void 0}Ye("notifyListenersIfNeeded invoked");var Hn=C(De);if(jr()&&Hn.lastWidth===Hn.startSize.width&&Hn.lastHeight===Hn.startSize.height)return Ye("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Hn.lastWidth===Hn.lastNotifiedWidth&&Hn.lastHeight===Hn.lastNotifiedHeight)return Ye("Not notifying: Size already notified");Ye("Current size not notified, notifying..."),Hn.lastNotifiedWidth=Hn.lastWidth,Hn.lastNotifiedHeight=Hn.lastHeight,_Y(C(De).listeners,function(ds){ds(De)})}function Yr(){if(Ye("startanimation triggered."),Ft(De)){Ye("Ignoring since element is still unrendered...");return}Ye("Element rendered.");var jr=se(De),Hn=Pe(De);(jr.scrollLeft===0||jr.scrollTop===0||Hn.scrollLeft===0||Hn.scrollTop===0)&&(Ye("Scrollbars out of sync. Updating detector elements..."),qt(cr))}function Wa(){if(Ye("Scroll detected."),Ft(De)){Ye("Scroll event fired while unrendered. Ignoring...");return}qt(cr)}if(Ye("registerListenersAndPositionElements invoked."),!C(De)){Ye("Aborting because element has been uninstalled");return}C(De).onRendered=Yr,C(De).onExpand=Wa,C(De).onShrink=Wa;var jl=C(De).style;_t(De,jl.width,jl.height)}function us(){if(Ye("finalizeDomMutation invoked."),!C(De)){Ye("Aborting because element has been uninstalled");return}var _t=C(De).style;Et(De,_t.width,_t.height),ti(De,_t.width,_t.height)}function No(){Ke(De)}function $o(){Ye("Installing..."),At(),xt(),d.add(0,Wt),d.add(1,ki),d.add(2,mr),d.add(3,us),d.add(4,No)}Ye("Making detectable..."),zt(De)?(Ye("Element is detached"),Oi(),Ye("Waiting until element is attached..."),C(De).onRendered=function(){Ye("Element is now attached"),$o()}):$o()}function Ot(He){var De=C(He);!De||(De.onExpandScroll&&ve(se(He),"scroll",De.onExpandScroll),De.onShrinkScroll&&ve(Pe(He),"scroll",De.onShrinkScroll),De.onAnimationStart&&ve(De.container,"animationstart",De.onAnimationStart),De.container&&He.removeChild(De.container))}return{makeDetectable:mt,addListener:$t,uninstall:Ot,initDocument:W}},yp=sw.exports.forEach,CY=uY,kY=dY,TY=fY,MY=pY,EY=mY,X3=ow.exports,PY=yY,Bl=xY,AY=wY,RY=SY;function W3(o){return Array.isArray(o)||o.length!==void 0}function Q3(o){if(Array.isArray(o))return o;var c=[];return yp(o,function(d){c.push(d)}),c}function H3(o){return o&&o.nodeType===1}var Wu=function(o){o=o||{};var c;if(o.idHandler)c={get:function(mt){return o.idHandler.get(mt,!0)},set:o.idHandler.set};else{var d=TY(),C=MY({idGenerator:d,stateHandler:Bl});c=C}var b=o.reporter;if(!b){var m=b===!1;b=EY(m)}var E=Ul(o,"batchProcessor",PY({reporter:b})),V={};V.callOnAdd=!!Ul(o,"callOnAdd",!0),V.debug=!!Ul(o,"debug",!1);var W=kY(c),z=CY({stateHandler:Bl}),G,ae=Ul(o,"strategy","object"),xe=Ul(o,"important",!1),Oe={reporter:b,batchProcessor:E,stateHandler:Bl,idHandler:c,important:xe};if(ae==="scroll"&&(X3.isLegacyOpera()?(b.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ae="object"):X3.isIE(9)&&(b.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ae="object")),ae==="scroll")G=RY(Oe);else if(ae==="object")G=AY(Oe);else throw new Error("Invalid strategy name: "+ae);var ve={};function se(mt,Ot,He){function De(xt){var At=W.get(xt);yp(At,function(Wt){Wt(xt)})}function Ke(xt,At,Wt){W.add(At,Wt),xt&&Wt(At)}if(He||(He=Ot,Ot=mt,mt={}),!Ot)throw new Error("At least one element required.");if(!He)throw new Error("Listener required.");if(H3(Ot))Ot=[Ot];else if(W3(Ot))Ot=Q3(Ot);else return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Ye=0,zt=Ul(mt,"callOnAdd",V.callOnAdd),Ft=Ul(mt,"onReady",function(){}),Mt=Ul(mt,"debug",V.debug);yp(Ot,function(xt){Bl.getState(xt)||(Bl.initState(xt),c.set(xt));var At=c.get(xt);if(Mt&&b.log("Attaching listener to element",At,xt),!z.isDetectable(xt)){if(Mt&&b.log(At,"Not detectable."),z.isBusy(xt)){Mt&&b.log(At,"System busy making it detectable"),Ke(zt,xt,He),ve[At]=ve[At]||[],ve[At].push(function(){Ye++,Ye===Ot.length&&Ft()});return}return Mt&&b.log(At,"Making detectable..."),z.markBusy(xt,!0),G.makeDetectable({debug:Mt,important:xe},xt,function(Wt){if(Mt&&b.log(At,"onElementDetectable"),Bl.getState(Wt)){z.markAsDetectable(Wt),z.markBusy(Wt,!1),G.addListener(Wt,De),Ke(zt,Wt,He);var Et=Bl.getState(Wt);if(Et&&Et.startSize){var gt=Wt.offsetWidth,ct=Wt.offsetHeight;(Et.startSize.width!==gt||Et.startSize.height!==ct)&&De(Wt)}ve[At]&&yp(ve[At],function(It){It()})}else Mt&&b.log(At,"Element uninstalled before being detectable.");delete ve[At],Ye++,Ye===Ot.length&&Ft()})}Mt&&b.log(At,"Already detecable, adding listener."),Ke(zt,xt,He),Ye++}),Ye===Ot.length&&Ft()}function Pe(mt){if(!mt)return b.error("At least one element is required.");if(H3(mt))mt=[mt];else if(W3(mt))mt=Q3(mt);else return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");yp(mt,function(Ot){W.removeAllListeners(Ot),G.uninstall(Ot),Bl.cleanState(Ot)})}function $t(mt){G.initDocument&&G.initDocument(mt)}return{listenTo:se,removeListener:W.removeListener,removeAllListeners:W.removeAllListeners,uninstall:Pe,initDocument:$t}};function Ul(o,c,d){var C=o[c];return C==null&&d!==void 0?d:C}var G3="Expected a function",Y3=NaN,IY="[object Symbol]",DY=/^\s+|\s+$/g,NY=/^[-+]0x[0-9a-f]+$/i,$Y=/^0b[01]+$/i,VY=/^0o[0-7]+$/i,LY=parseInt,BY=typeof J=="object"&&J&&J.Object===Object&&J,UY=typeof self=="object"&&self&&self.Object===Object&&self,zY=BY||UY||Function("return this")(),FY=Object.prototype,XY=FY.toString,WY=Math.max,QY=Math.min,lw=function(){return zY.Date.now()};function HY(o,c,d){var C,b,m,E,V,W,z=0,G=!1,ae=!1,xe=!0;if(typeof o!="function")throw new TypeError(G3);c=j3(c)||0,wv(d)&&(G=!!d.leading,ae="maxWait"in d,m=ae?WY(j3(d.maxWait)||0,c):m,xe="trailing"in d?!!d.trailing:xe);function Oe(Ke){var Ye=C,zt=b;return C=b=void 0,z=Ke,E=o.apply(zt,Ye),E}function ve(Ke){return z=Ke,V=setTimeout($t,c),G?Oe(Ke):E}function se(Ke){var Ye=Ke-W,zt=Ke-z,Ft=c-Ye;return ae?QY(Ft,m-zt):Ft}function Pe(Ke){var Ye=Ke-W,zt=Ke-z;return W===void 0||Ye>=c||Ye<0||ae&&zt>=m}function $t(){var Ke=lw();if(Pe(Ke))return mt(Ke);V=setTimeout($t,se(Ke))}function mt(Ke){return V=void 0,xe&&C?Oe(Ke):(C=b=void 0,E)}function Ot(){V!==void 0&&clearTimeout(V),z=0,C=W=b=V=void 0}function He(){return V===void 0?E:mt(lw())}function De(){var Ke=lw(),Ye=Pe(Ke);if(C=arguments,b=this,W=Ke,Ye){if(V===void 0)return ve(W);if(ae)return V=setTimeout($t,c),Oe(W)}return V===void 0&&(V=setTimeout($t,c)),E}return De.cancel=Ot,De.flush=He,De}function GY(o,c,d){var C=!0,b=!0;if(typeof o!="function")throw new TypeError(G3);return wv(d)&&(C="leading"in d?!!d.leading:C,b="trailing"in d?!!d.trailing:b),HY(o,c,{leading:C,maxWait:c,trailing:b})}function wv(o){var c=typeof o;return!!o&&(c=="object"||c=="function")}function YY(o){return!!o&&typeof o=="object"}function jY(o){return typeof o=="symbol"||YY(o)&&XY.call(o)==IY}function j3(o){if(typeof o=="number")return o;if(jY(o))return Y3;if(wv(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=wv(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=o.replace(DY,"");var d=$Y.test(o);return d||VY.test(o)?LY(o.slice(2),d?2:8):NY.test(o)?Y3:+o}var _v=GY;const qY={name:"Grid",provide(){return{GridInstance:this}},props:{col:{type:Number,default:3},square:{type:Boolean,default:!1},padding:{type:String,default:"24px"},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},hover:{type:Boolean,default:!1}},data(){return{resizeCount:0,handleResize:()=>{}}},computed:{classes(){return{"ivu-grid-center":this.center,"ivu-grid-border":this.border,"ivu-grid-hover":this.hover}}},methods:{onResize(){this.resizeCount++}},mounted(){this.handleResize=_v(this.onResize,150,{leading:!1}),this.observer=Wu(),this.observer.listenTo(this.$refs.grid,this.handleResize)},beforeUnmount(){this.observer.removeListener(this.$refs.grid,this.handleResize)}};function ZY(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-grid",m.classes]),ref:"grid"},[t.renderSlot(o.$slots,"default")],2)}var q3=l(qY,[["render",ZY]]);const KY={name:"GridItem",inject:["GridInstance"],data(){return{height:0}},computed:{col(){return this.GridInstance.col},square(){return this.GridInstance.square},styles(){const o={width:`${100/this.col}%`};return this.height&&this.square&&(o.height=`${this.height}px`),o},mainStyles(){return{padding:this.GridInstance.padding}}},watch:{col(){t.nextTick(()=>{this.handleChangeHeight()})},square(){this.handleChangeHeight()},"GridInstance.resizeCount"(){this.handleChangeHeight()}},methods:{handleChangeHeight(){if(this.square){const o=this.$refs.col;this.height=parseFloat(R(o,"width"))}}},mounted(){this.handleChangeHeight()}};function JY(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:"ivu-grid-item",style:t.normalizeStyle(m.styles),ref:"col"},[t.createElementVNode("div",{class:"ivu-grid-item-main",style:t.normalizeStyle(m.mainStyles)},[t.renderSlot(o.$slots,"default")],4)],4)}var Z3=l(KY,[["render",JY]]);const ej="ivu-layout",tj={name:"Header",computed:{wrapClasses(){return`${ej}-header`}}};function nj(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[t.renderSlot(o.$slots,"default")],2)}var cw=l(tj,[["render",nj]]);const Bt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent(o){const{keyCode:c}=o;if(o.altKey&&!o.ctrlKey||o.metaKey||c>=Bt.F1&&c<=Bt.F12)return!1;switch(c){case Bt.ALT:case Bt.CAPS_LOCK:case Bt.CONTEXT_MENU:case Bt.CTRL:case Bt.DOWN:case Bt.END:case Bt.ESC:case Bt.HOME:case Bt.INSERT:case Bt.LEFT:case Bt.MAC_FF_META:case Bt.META:case Bt.NUMLOCK:case Bt.NUM_CENTER:case Bt.PAGE_DOWN:case Bt.PAGE_UP:case Bt.PAUSE:case Bt.PRINT_SCREEN:case Bt.RIGHT:case Bt.SHIFT:case Bt.UP:case Bt.WIN_KEY:case Bt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey(o){if(o>=Bt.ZERO&&o<=Bt.NINE||o>=Bt.NUM_ZERO&&o<=Bt.NUM_MULTIPLY||o>=Bt.A&&o<=Bt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&o===0)return!0;switch(o){case Bt.SPACE:case Bt.QUESTION_MARK:case Bt.NUM_PLUS:case Bt.NUM_MINUS:case Bt.NUM_PERIOD:case Bt.NUM_DIVISION:case Bt.SEMICOLON:case Bt.DASH:case Bt.EQUALS:case Bt.COMMA:case Bt.PERIOD:case Bt.SLASH:case Bt.APOSTROPHE:case Bt.SINGLE_QUOTE:case Bt.OPEN_SQUARE_BRACKET:case Bt.BACKSLASH:case Bt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},zl="ivu-spin",ij={name:"Spin",mixins:[iw],props:{size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},fix:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data(){return{showText:!1,visible:!1}},computed:{classes(){return[`${zl}`,{[`${zl}-${this.size}`]:!!this.size,[`${zl}-fix`]:this.fix,[`${zl}-show-text`]:this.showText,[`${zl}-fullscreen`]:this.fullscreen}]},mainClasses(){return`${zl}-main`},dotClasses(){return`${zl}-dot`},textClasses(){return`${zl}-text`},fullscreenVisible(){return this.fullscreen?this.visible:!0}},watch:{visible(o){o?this.addScrollEffect():this.removeScrollEffect()}},mounted(){this.showText=!!this.$slots.default&&this.$slots.default().some(o=>o.children&&o.children.length)}};function rj(o,c,d,C,b,m){return t.openBlock(),t.createBlock(t.Transition,{name:"fade"},{default:t.withCtx(()=>[m.fullscreenVisible&&d.show?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.classes)},[t.createElementVNode("div",{class:t.normalizeClass(m.mainClasses)},[t.createElementVNode("span",{class:t.normalizeClass(m.dotClasses)},null,2),t.createElementVNode("div",{class:t.normalizeClass(m.textClasses)},[t.renderSlot(o.$slots,"default")],2)],2)],2)):t.createCommentVNode("",!0)]),_:3})}var Ls=l(ij,[["render",rj]]);const sj={name:"ImagePreview",mixins:[Qn],components:{Icon:S,Spin:Ls,Row:Nl,Col:ia},inheritAttrs:!1,emits:["update:modelValue","on-close","on-switch"],props:{modelValue:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},toolbar:{type:Array,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||!o.$VIEWUI.image||o.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:o.$VIEWUI.image.toolbar}}},data(){return{currentIndex:0,scale:1,degree:0,translate:{x:0,y:0},startX:0,startY:0,transition:!0,original:!1,prevOverflow:"",status:"loading",zIndex:1e3,maskIndex:this.getMaskIndex(),downloading:!1}},computed:{imgClasses(){return["ivu-image-preview-image",{"ivu-image-preview-grabbing":!this.transition,"ivu-image-preview-hidden":this.status==="failed","ivu-image-preview-transition":this.transition,"ivu-image-preview-limit":!this.original}]},imageStyle(){let o=this.translate.x/this.scale,c=this.translate.y/this.scale;const d=this.degree%360;return[90,-270].includes(d)&&([o,c]=[c,-o]),[180,-180].includes(d)&&([o,c]=[-o,-c]),[270,-90].includes(d)&&([o,c]=[-c,o]),{transform:`
                        scale(${this.scale})
                        rotate(${this.degree}deg)
                        translate(${o}px, ${c}px)
                    `}},maskStyle(){return{zIndex:this.maskIndex+this.zIndex}},leftClasses(){return["ivu-image-preview-arrow-left",{"ivu-image-preview-arrow-disabled":this.hasLeftSwitchEnd}]},rightClasses(){return["ivu-image-preview-arrow-right",{"ivu-image-preview-arrow-disabled":this.hasRightSwitchEnd}]},hasRightSwitchEnd(){const{currentIndex:o,infinite:c,previewList:d}=this,C=d.length;return c?!1:o>=C-1},hasLeftSwitchEnd(){const{currentIndex:o,infinite:c}=this;return c?!1:o===0},currentSrc(){return this.previewList[this.currentIndex]},failLang(){return this.t("i.image.fail")}},methods:{resetStyle(){this.scale=1,this.degree=0,this.translate.x=0,this.translate.y=0},handleClose(){this.$emit("update:modelValue",!1),this.$emit("on-close")},handleClickMask(){!this.maskClosable||this.handleClose()},handleSwitch(o){o?this.currentIndex+1===this.previewList.length?this.infinite&&(this.resetStyle(),this.currentIndex=0):(this.resetStyle(),this.currentIndex+=1):this.currentIndex===0?this.infinite&&(this.resetStyle(),this.currentIndex=this.previewList.length-1):(this.resetStyle(),this.currentIndex-=1),this.$emit("on-switch",{currentIndex:this.currentIndex})},handleOperation(o){o==="zoomIn"&&this.scale<6&&(this.scale+=.25),o==="zoomOut"&&this.scale>.25&&(this.scale-=.25),o==="rotateLeft"&&(this.degree-=90),o==="rotateRight"&&(this.degree+=90),o==="original"&&(this.original=!this.original,this.transition=!1,this.resetStyle(),setTimeout(()=>{this.transition=!0},0)),o==="download"&&(this.downloading=!0,Se(this.previewList[this.currentIndex]).then(()=>{this.downloading=!1}).catch(()=>{this.downloading=!1}))},handleKeydown(o){if(!this.modelValue)return;const{keyCode:c}=o;c===Bt.LEFT&&this.handleSwitch(!1),c===Bt.RIGHT&&this.handleSwitch(!0),c===Bt.UP&&this.handleOperation("zoomIn"),c===Bt.DOWN&&this.handleOperation("zoomOut"),c===Bt.SPACE&&(o.preventDefault(),this.original=!this.original)},handleKeyup(o){if(!this.modelValue)return;const{keyCode:c}=o;c===Bt.ESC&&this.handleClose()},handleWheel(o){if(!this.modelValue)return;const{deltaY:c}=o;this.handleOperation(c<0?"zoomIn":"zoomOut")},handleMousedown(o){const{pageX:c,pageY:d,which:C}=o;C===1&&(this.startX=c,this.startY=d,this.transition=!1,s(document,"mousemove",this.handleMousemove),s(document,"mouseup",this.handleMouseup))},handleMousemove:_v(function(o){o.stopPropagation();const{pageX:c,pageY:d}=o;this.translate.x+=c-this.startX,this.translate.y+=d-this.startY,this.startX=c,this.startY=d}),handleMouseup(){this.transition=!0,a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup)},getBodyOverflow(){return r?document.body.style.overflow:""},setBodyOverflow(o){!r||(document.body.style.overflow=o)},handleImageLoad(){this.status="loaded"},handleImageError(){this.status="failed"},getMaskIndex(){return Xe(),we}},watch:{modelValue(o){o?(this.currentIndex=this.initialIndex,this.resetStyle(),this.original=!1,this.prevOverflow=this.getBodyOverflow(),this.setBodyOverflow("hidden"),this.maskIndex=this.getMaskIndex()):this.setBodyOverflow(this.prevOverflow)},currentIndex(){this.status="loading"}},mounted(){s(document,"keydown",this.handleKeydown),s(document,"keyup",this.handleKeyup),s(document,"wheel",this.handleWheel)},beforeUnmount(){a(document,"keydown",this.handleKeydown),a(document,"keyup",this.handleKeyup),a(document,"wheel",this.handleWheel)}},oj={key:1,class:"ivu-image-preview-fail"},aj=["src"],lj=[t.createElementVNode("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7198",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7199",fill:"#ffffff"},null,-1)],cj=[t.createElementVNode("path",{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7413",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7414",fill:"#ffffff"},null,-1)],hj=[t.createElementVNode("path",{d:"M358.058667 128H156.970667A28.970667 28.970667 0 0 0 128 157.013333v202.837334c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434666a14.506667 14.506667 0 0 0 14.506667-14.506666V200.448h157.610667a14.506667 14.506667 0 0 0 14.506666-14.506667V142.506667a14.506667 14.506667 0 0 0-14.506666-14.506667zM881.493333 649.642667h-43.434666a14.506667 14.506667 0 0 0-14.506667 14.506666v159.402667h-157.610667a14.506667 14.506667 0 0 0-14.506666 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506666 14.506667h201.088c16 0 28.970667-12.928 28.970667-29.013333v-202.837334a14.506667 14.506667 0 0 0-14.506667-14.506666zM358.058667 823.552H200.448v-159.402667a14.506667 14.506667 0 0 0-14.506667-14.506666H142.506667a14.506667 14.506667 0 0 0-14.506667 14.506666v202.88c0 16 12.970667 28.970667 29.013333 28.970667h201.045334a14.506667 14.506667 0 0 0 14.506666-14.506667v-43.434666a14.506667 14.506667 0 0 0-14.506666-14.506667zM866.986667 128h-201.088a14.506667 14.506667 0 0 0-14.506667 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506667 14.506667h157.610666v159.402667c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434667a14.506667 14.506667 0 0 0 14.506666-14.506666V156.970667A28.928 28.928 0 0 0 866.986667 128z","p-id":"26673",fill:"#ffffff"},null,-1)],uj=[t.createElementVNode("path",{d:"M864 128H160c-19.2 0-32 12.8-32 32v704c0 19.2 12.8 32 32 32h704c19.2 0 32-12.8 32-32V160c0-19.2-12.8-32-32-32z m-32 704H192V192h640v640z","p-id":"1977",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M320 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32zM640 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32z","p-id":"1978",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M512 384m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1979",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M512 640m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1980",fill:"#ffffff"},null,-1)],dj=[t.createElementVNode("path",{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z m191.3-491.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z","p-id":"13309",fill:"#ffffff"},null,-1)],fj=[t.createElementVNode("path",{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8zM880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z","p-id":"13522",fill:"#ffffff"},null,-1)],pj=[t.createElementVNode("path",{d:"M505.7 621c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-72.1V120c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v346.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z","p-id":"8826",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M903 516h-64c-4.4 0-8 3.6-8 8v300c0 4.4-3.6 8-8 8H199c-4.4 0-8-3.6-8-8V524c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v372c0 8.8 7.2 16 16 16h768c8.8 0 16-7.2 16-16V524c0-4.4-3.6-8-8-8z","p-id":"8827",fill:"#ffffff"},null,-1)],mj={class:"ivu-image-preview-operations-item ivu-image-preview-operations-wait ivu-anim-loop",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7816",width:"200",height:"200"},gj=[t.createElementVNode("path",{d:"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z","p-id":"7817",fill:"#ffffff"},null,-1)];function vj(o,c,d,C,b,m){const E=t.resolveComponent("Spin"),V=t.resolveComponent("Col"),W=t.resolveComponent("Row"),z=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!d.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[d.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-image-preview-mask",style:t.normalizeStyle(m.maskStyle)},null,4)):t.createCommentVNode("",!0)]),_:1}),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[d.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-image-preview-wrap",style:t.normalizeStyle(m.maskStyle)},[t.createElementVNode("div",t.mergeProps({class:"ivu-image-preview"},o.$attrs,{onClick:c[14]||(c[14]=t.withModifiers((...G)=>m.handleClickMask&&m.handleClickMask(...G),["stop"]))}),[b.status==="loading"?(t.openBlock(),t.createBlock(E,{key:0,size:"large",class:"ivu-image-preview-loading"})):b.status==="failed"?(t.openBlock(),t.createElementBlock("div",oj,[t.createElementVNode("span",null,t.toDisplayString(m.failLang),1)])):t.createCommentVNode("",!0),(t.openBlock(),t.createElementBlock("img",{class:t.normalizeClass(m.imgClasses),style:t.normalizeStyle(m.imageStyle),src:m.currentSrc,key:b.currentIndex.toString(),onClick:c[0]||(c[0]=t.withModifiers(()=>{},["stop"])),onMousedown:c[1]||(c[1]=t.withModifiers((...G)=>m.handleMousedown&&m.handleMousedown(...G),["stop","prevent"])),onLoad:c[2]||(c[2]=(...G)=>m.handleImageLoad&&m.handleImageLoad(...G)),onError:c[3]||(c[3]=(...G)=>m.handleImageError&&m.handleImageError(...G))},null,46,aj)),d.toolbar&&d.toolbar.length>0?(t.openBlock(),t.createBlock(W,{key:2,"class-name":"ivu-image-preview-operations",wrap:!1,onClick:c[11]||(c[11]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[d.toolbar.indexOf("zoomIn")>-1?(t.openBlock(),t.createBlock(V,{key:0,flex:"1",order:d.toolbar.indexOf("zoomIn")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:c[4]||(c[4]=t.withModifiers(G=>m.handleOperation("zoomIn"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7197",width:"200",height:"200"},lj))]),_:1},8,["order"])):t.createCommentVNode("",!0),d.toolbar.indexOf("zoomOut")>-1?(t.openBlock(),t.createBlock(V,{key:1,flex:"1",order:d.toolbar.indexOf("zoomOut")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:c[5]||(c[5]=t.withModifiers(G=>m.handleOperation("zoomOut"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7412",width:"200",height:"200"},cj))]),_:1},8,["order"])):t.createCommentVNode("",!0),d.toolbar.indexOf("original")>-1?(t.openBlock(),t.createBlock(V,{key:2,flex:"1",order:d.toolbar.indexOf("original")+1},{default:t.withCtx(()=>[t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:c[6]||(c[6]=t.withModifiers(G=>m.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26672",width:"200",height:"200"},hj,512)),[[t.vShow,!this.original]]),t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:c[7]||(c[7]=t.withModifiers(G=>m.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1976",width:"200",height:"200"},uj,512)),[[t.vShow,this.original]])]),_:1},8,["order"])):t.createCommentVNode("",!0),d.toolbar.indexOf("rotateLeft")>-1?(t.openBlock(),t.createBlock(V,{key:3,flex:"1",order:d.toolbar.indexOf("rotateLeft")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:c[8]||(c[8]=t.withModifiers(G=>m.handleOperation("rotateLeft"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13308",width:"200",height:"200"},dj))]),_:1},8,["order"])):t.createCommentVNode("",!0),d.toolbar.indexOf("rotateRight")>-1?(t.openBlock(),t.createBlock(V,{key:4,flex:"1",order:d.toolbar.indexOf("rotateRight")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:c[9]||(c[9]=t.withModifiers(G=>m.handleOperation("rotateRight"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13521",width:"200",height:"200"},fj))]),_:1},8,["order"])):t.createCommentVNode("",!0),d.toolbar.indexOf("download")>-1?(t.openBlock(),t.createBlock(V,{key:5,flex:"1",order:d.toolbar.indexOf("download")+1},{default:t.withCtx(()=>[t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:c[10]||(c[10]=t.withModifiers(G=>m.handleOperation("download"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8825",width:"200",height:"200"},pj,512)),[[t.vShow,!b.downloading]]),t.withDirectives((t.openBlock(),t.createElementBlock("svg",mj,gj,512)),[[t.vShow,b.downloading]])]),_:1},8,["order"])):t.createCommentVNode("",!0)]),_:1})):t.createCommentVNode("",!0),d.previewList.length>1?(t.openBlock(),t.createBlock(z,{key:3,class:t.normalizeClass(m.leftClasses),type:"ios-arrow-back",onClick:c[12]||(c[12]=t.withModifiers(G=>m.handleSwitch(!1),["stop"]))},null,8,["class"])):t.createCommentVNode("",!0),d.previewList.length>1?(t.openBlock(),t.createBlock(z,{key:4,class:t.normalizeClass(m.rightClasses),type:"ios-arrow-forward",onClick:c[13]||(c[13]=t.withModifiers(G=>m.handleSwitch(!0),["stop"]))},null,8,["class"])):t.createCommentVNode("",!0),t.createVNode(z,{class:"ivu-image-preview-arrow-close",type:"md-close",onClick:t.withModifiers(m.handleClose,["stop"])},null,8,["onClick"])],16)],4)):t.createCommentVNode("",!0)]),_:1})],8,["disabled"])}var Fl=l(sj,[["render",vj]]);const yj=o=>typeof HTMLElement=="object"&&o instanceof HTMLElement,bj={name:"Image",mixins:[Qn],components:{ImagePreview:Fl},emits:["on-load","on-error","on-switch","on-close","on-click"],props:{src:{type:String,default:""},alt:{type:String,default:""},preview:{type:Boolean,default:!1},referrerPolicy:{type:String,default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:[String],default:""},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array},infinite:{type:Boolean,default:!0},initialIndex:{type:Number,default:0},previewTip:{type:Boolean,default:!0},toolbar:{type:Array,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||!o.$VIEWUI.image||o.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:o.$VIEWUI.image.toolbar}}},data(){return{loadingImage:!1,loading:!1,imageError:!1,scrollElement:null,observer:null,imagePreviewModal:!1}},watch:{src(){this.loadImage()}},computed:{innerClasses(){return["ivu-image-inner",{"ivu-image-cursor":this.preview}]},imgClasses(){return["ivu-image-img",{"ivu-image-img-hidden":this.loading||this.imageError}]},fitStyle(){const o=["fill","contain","cover","none","scale-down"],{fit:c}=this;return o.includes(c)?`object-fit:${c};`:""},imageStyles(){return{width:typeof this.width=="number"?`${this.width}px`:this.width,height:typeof this.height=="number"?`${this.height}px`:this.height}},loadingLang(){return this.t("i.select.loading")},failLang(){return this.t("i.image.fail")},previewLang(){return this.t("i.image.preview")},loadingType(){return this.lazy?"lazy":"eager"}},mounted(){r&&this.handleImageEvent()},methods:{handleLazy(){const o=this.$refs.image;(this.observer=new IntersectionObserver(this.handlerObserveImage,{root:this.scrollElement,rootMargin:"0px",threshold:0})).observe(o)},handlerObserveImage(o){for(let c of o)c.isIntersecting&&(this.offObserver(),this.loadImage())},addLazyImageListener(){const{scrollContainer:o}=this;this.scrollElement=null,yj(o)?this.scrollElement=o:o&&typeof o=="string"&&(this.scrollElement=document.querySelector(o)),this.handleLazy()},handleImageLoad(){this.loading=!1,this.imageError=!1,this.$emit("on-load")},handleImageError(){this.loading=!1,this.imageError=!0,this.loadingImage=!1,this.$emit("on-error")},loadImage(){this.loading=!0,this.imageError=!1,this.loadingImage=!0},handleImageEvent(){const{lazy:o}=this;o?this.addLazyImageListener():this.loadImage()},offObserver(){const{observer:o}=this;o&&o.disconnect()},handlePreview(){const{preview:o,initialIndex:c}=this;o&&(this.imagePreviewModal=!0,this.$emit("on-click",{initialIndex:c}))},handleClose(){this.$emit("on-close")},handleSwitch(o){this.$emit("on-switch",o)}},beforeUnmount(){this.offObserver()}},Oj={key:0,class:"ivu-image-placeholder"},xj={key:1,class:"ivu-image-error"},wj=["alt","src","loading","referrerPolicy"],_j={class:"ivu-image-mark"};function Sj(o,c,d,C,b,m){const E=t.resolveComponent("ImagePreview");return t.openBlock(),t.createElementBlock("div",{class:"ivu-image",ref:"image",style:t.normalizeStyle(m.imageStyles)},[b.loading?(t.openBlock(),t.createElementBlock("div",Oj,[t.renderSlot(o.$slots,"placeholder",{},()=>[t.createElementVNode("span",null,t.toDisplayString(m.loadingLang),1)])])):b.imageError?(t.openBlock(),t.createElementBlock("div",xj,[t.renderSlot(o.$slots,"error",{},()=>[t.createElementVNode("span",null,t.toDisplayString(m.failLang),1)])])):t.createCommentVNode("",!0),b.loadingImage?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(m.innerClasses),onClick:c[2]||(c[2]=(...V)=>m.handlePreview&&m.handlePreview(...V))},[t.createElementVNode("img",{class:t.normalizeClass(m.imgClasses),style:t.normalizeStyle([m.fitStyle]),alt:d.alt,src:d.src,loading:m.loadingType,referrerPolicy:d.referrerPolicy,onLoad:c[0]||(c[0]=(...V)=>m.handleImageLoad&&m.handleImageLoad(...V)),onError:c[1]||(c[1]=(...V)=>m.handleImageError&&m.handleImageError(...V))},null,46,wj),d.preview&&d.previewTip?t.renderSlot(o.$slots,"preview",{key:0},()=>[t.createElementVNode("div",_j,[t.createElementVNode("span",null,t.toDisplayString(m.previewLang),1)])]):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0),d.preview?(t.openBlock(),t.createBlock(E,{key:3,modelValue:b.imagePreviewModal,"onUpdate:modelValue":c[3]||(c[3]=V=>b.imagePreviewModal=V),"preview-list":d.previewList,"initial-index":d.initialIndex,infinite:d.infinite,"mask-closable":d.maskClosable,transfer:d.transfer,toolbar:d.toolbar,onOnClose:m.handleClose,onOnSwitch:m.handleSwitch},null,8,["modelValue","preview-list","initial-index","infinite","mask-closable","transfer","toolbar","onOnClose","onOnSwitch"])):t.createCommentVNode("",!0)],4)}var K3=l(bj,[["render",Sj]]);Fl.newInstance=o=>{if(!r)return;const c=o||{};let d=null;const C=t.createApp({data(){return Object.assign({},c,{visible:!1,previewList:[],initialIndex:0,toolbar:["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"],infinite:!0,maskClosable:!0,transfer:!0})},render(){return t.h(Fl,Object.assign({},c,{ref:"imagePreview",modelValue:this.visible,previewList:this.previewList,initialIndex:this.initialIndex,toolbar:this.toolbar,infinite:this.infinite,maskClosable:this.maskClosable,transfer:this.transfer,"onOn-close":this.close}))},methods:{close(){this.visible=!1,setTimeout(()=>{this.destroy(),this.onRemove()},300)},destroy(){C.unmount(),document.body.removeChild(b)},onRemove(){}},created(){d=t.getCurrentInstance()}}),b=document.createElement("div");document.body.appendChild(b),C.mount(b);const m=d.refs.imagePreview;return{show(E){Object.keys(E).forEach(V=>{m.$parent[V]=E[V]}),m.$parent.visible=!0},component:m}};let Sv;function Cj(){return Sv=Sv||Fl.newInstance(),Sv}Fl.show=function(o={}){const c=Cj();o.onRemove=function(){Sv=null},c.show(o)};const Mr="ivu-input-number",Cv="ivu-icon";function kv(o,c){let d,C,b;try{d=o.toString().split(".")[1].length}catch{d=0}try{C=c.toString().split(".")[1].length}catch{C=0}return b=Math.pow(10,Math.max(d,C)),(Math.round(o*b)+Math.round(c*b))/b}const kj={name:"InputNumber",mixins:[un],emits:["on-change","on-focus","on-blur","update:modelValue"],props:{max:{type:Number,default:1/0},min:{type:Number,default:-1/0},step:{type:Number,default:1},activeChange:{type:Boolean,default:!0},modelValue:{type:Number,default:1},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},name:{type:String},precision:{type:Number},elementId:{type:String},formatter:{type:Function},parser:{type:Function},placeholder:{type:String,default:""},controlsOutside:{type:Boolean,default:!1}},data(){return{focused:!1,upDisabled:!1,downDisabled:!1,currentValue:this.modelValue}},computed:{wrapClasses(){return[`${Mr}`,{[`${Mr}-${this.size}`]:!!this.size,[`${Mr}-disabled`]:this.itemDisabled,[`${Mr}-focused`]:this.focused,[`${Mr}-controls-outside`]:this.controlsOutside}]},handlerClasses(){return`${Mr}-handler-wrap`},upClasses(){return[`${Mr}-handler`,`${Mr}-handler-up`,{[`${Mr}-handler-up-disabled`]:this.upDisabled}]},innerUpClasses(){return`${Mr}-handler-up-inner ${Cv} ${Cv}-ios-arrow-up`},downClasses(){return[`${Mr}-handler`,`${Mr}-handler-down`,{[`${Mr}-handler-down-disabled`]:this.downDisabled}]},innerDownClasses(){return`${Mr}-handler-down-inner ${Cv} ${Cv}-ios-arrow-down`},inputWrapClasses(){return`${Mr}-input-wrap`},inputClasses(){return`${Mr}-input`},precisionValue(){return this.currentValue?this.precision?this.currentValue.toFixed(this.precision):this.currentValue:this.currentValue},formatterValue(){return this.formatter&&this.precisionValue!==null?this.formatter(this.precisionValue):this.precisionValue}},methods:{preventDefault(o){o.preventDefault()},up(o){const c=Number(o.target.value);if(this.upDisabled&&isNaN(c))return!1;this.changeStep("up",o)},down(o){const c=Number(o.target.value);if(this.downDisabled&&isNaN(c))return!1;this.changeStep("down",o)},changeStep(o,c){if(this.itemDisabled||this.readonly)return!1;const d=Number(c.target.value);let C=Number(this.currentValue);const b=Number(this.step);if(isNaN(C))return!1;if(!isNaN(d)){if(o==="up")if(kv(d,b)<=this.max)C=d;else return!1;else if(o==="down")if(kv(d,-b)>=this.min)C=d;else return!1}o==="up"?C=kv(C,b):o==="down"&&(C=kv(C,-b)),this.setValue(C)},setValue(o){o&&!isNaN(this.precision)&&(o=Number(Number(o).toFixed(this.precision)));const{min:c,max:d}=this;o!==null&&(o>d?o=d:o<c&&(o=c)),t.nextTick(()=>{this.currentValue=o,this.$emit("update:modelValue",o),this.$emit("on-change",o),this.handleFormItemChange("change",o)})},focus(o){this.focused=!0,this.$emit("on-focus",o)},blur(){this.focused=!1,this.$emit("on-blur"),$(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},keyDown(o){o.keyCode===38?(o.preventDefault(),this.up(o)):o.keyCode===40&&(o.preventDefault(),this.down(o))},change(o){if(o.type==="change"&&this.activeChange||o.type==="input"&&!this.activeChange)return;let c=o.target.value.trim();if(this.parser&&(c=this.parser(c)),c.length===0){this.setValue(null);return}o.type==="input"&&c.match(/^\-?\.?$|\.$/)||(c=Number(c),isNaN(c)?o.target.value=this.currentValue:(this.currentValue=c,this.setValue(c)))},changeVal(o){if(o=Number(o),isNaN(o))this.upDisabled=!0,this.downDisabled=!0;else{const c=this.step;this.upDisabled=o+c>this.max,this.downDisabled=o-c<this.min}}},mounted(){this.changeVal(this.currentValue)},watch:{modelValue(o){this.currentValue=o},currentValue(o){this.changeVal(o)},min(){this.changeVal(this.currentValue)},max(){this.changeVal(this.currentValue)}}},Tj=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-remove"},null,-1)],Mj=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-add"},null,-1)],Ej=["id","disabled","autofocus","readonly","name","value","placeholder"];function Pj(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[d.controlsOutside?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.handlerClasses)},[t.createElementVNode("a",{onClick:c[1]||(c[1]=(...E)=>m.up&&m.up(...E)),class:t.normalizeClass(m.upClasses)},[t.createElementVNode("span",{class:t.normalizeClass(m.innerUpClasses),onClick:c[0]||(c[0]=(...E)=>m.preventDefault&&m.preventDefault(...E))},null,2)],2),t.createElementVNode("a",{onClick:c[3]||(c[3]=(...E)=>m.down&&m.down(...E)),class:t.normalizeClass(m.downClasses)},[t.createElementVNode("span",{class:t.normalizeClass(m.innerDownClasses),onClick:c[2]||(c[2]=(...E)=>m.preventDefault&&m.preventDefault(...E))},null,2)],2)],2)),d.controlsOutside?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-down",{"ivu-input-number-controls-outside-btn-disabled":b.downDisabled}]),onClick:c[4]||(c[4]=(...E)=>m.down&&m.down(...E))},Tj,2)):t.createCommentVNode("",!0),d.controlsOutside?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-up",{"ivu-input-number-controls-outside-btn-disabled":b.upDisabled}]),onClick:c[5]||(c[5]=(...E)=>m.up&&m.up(...E))},Mj,2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(m.inputWrapClasses)},[t.createElementVNode("input",{id:d.elementId,class:t.normalizeClass(m.inputClasses),disabled:o.itemDisabled,autocomplete:"off",spellcheck:"false",autofocus:d.autofocus,onFocus:c[6]||(c[6]=(...E)=>m.focus&&m.focus(...E)),onBlur:c[7]||(c[7]=(...E)=>m.blur&&m.blur(...E)),onKeydown:c[8]||(c[8]=t.withModifiers((...E)=>m.keyDown&&m.keyDown(...E),["stop"])),onInput:c[9]||(c[9]=(...E)=>m.change&&m.change(...E)),onMouseup:c[10]||(c[10]=(...E)=>m.preventDefault&&m.preventDefault(...E)),onChange:c[11]||(c[11]=(...E)=>m.change&&m.change(...E)),readonly:d.readonly||!d.editable,name:d.name,value:m.formatterValue,placeholder:d.placeholder},null,42,Ej)],2)],2)}var hw=l(kj,[["render",Pj]]);const J3="ivu-layout",Aj={name:"Layout",data(){return{hasSider:!1}},computed:{wrapClasses(){return[`${J3}`,{[`${J3}-has-sider`]:this.hasSider}]}},methods:{findSider(){return this.$slots.default().some(o=>o.type.name==="Sider")}},mounted(){this.hasSider=this.findSider()}};function Rj(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[t.renderSlot(o.$slots,"default")],2)}var eP=l(Aj,[["render",Rj]]);const tP={tooltips:["复制","复制成功"],showTip:!1,successTip:"复制成功",errorTip:"复制失败"},nP={tooltip:"编辑",editing:!1,maxlength:"",autosize:!0,triggerType:"icon"},iP={rows:1,tooltip:!1,suffix:!1,expandable:!1,symbol:"展开"};var bp={emits:["update:modelValue"],mixins:[fe],props:{type:{validator(o){return _(o,["secondary","success","warning","danger",""])},default:""},copyable:{type:Boolean,default:!1},copyText:{type:String,default:""},copyConfig:{type:Object,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.typography.copyConfig===""?tP:o.$VIEWUI.typography.copyConfig}},editable:{type:Boolean,default:!1},editConfig:{type:Object,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.typography.editConfig===""?nP:o.$VIEWUI.typography.editConfig}},ellipsis:{type:Boolean,default:!1},ellipsisConfig:{type:Object,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.typography.ellipsisConfig===""?iP:o.$VIEWUI.typography.ellipsisConfig}},disabled:{type:Boolean,default:!1},code:{type:Boolean,default:!1},delete:{type:Boolean,default:!1},keyboard:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},strong:{type:Boolean,default:!1},underline:{type:Boolean,default:!1},italic:{type:Boolean,default:!1},modelValue:{type:String,default:""},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},theme:{validator(o){return _(o,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"}},computed:{isHrefPattern(){const{to:o}=this;return!!o},linkProps(){if(this.isHrefPattern){const{linkUrl:o,target:c}=this;return{href:o,target:c}}else return{}},mergedCopyConfig(){return Object.assign({},tP,this.copyConfig)},mergedEditConfig(){return Object.assign({},nP,this.editConfig)},mergedEllipsisConfig(){return Object.assign({},iP,this.ellipsisConfig)}},methods:{commonSlots(){const o={};return this.$slots.default&&(o.default=()=>this.$slots.default()),this.$slots.copyIcon&&(o.copyIcon=c=>this.$slots.copyIcon(c)),this.$slots.editIcon&&(o.editIcon=c=>this.$slots.editIcon(c)),this.$slots.enterIcon&&(o.enterIcon=c=>this.$slots.enterIcon(c)),o},commonEvents(){return{"onUpdate:modelValue":this.handleOnUpdateModelValue}},handleOnUpdateModelValue(o){this.$emit("update:modelValue",o)}}};const Tv={name:"TypographyBase",mixins:[bp],emits:["on-copy-success","on-copy-error","on-edit-start","on-edit-end","on-edit-change","on-edit-cancel"],props:{component:{type:String,default:"div"},level:{type:Number,default:0}},data(){return{currentContent:this.modelValue,copied:!1,copyTimeout:null,editing:!1,editContent:"",lastKeyCode:"",isEditESC:!1,ellipsisText:"",ellipsisContent:"",isEllipsis:!1,ellipsisExpanded:!1,observer:null}},created(){this.editing=this.mergedEditConfig.editing||!1,this.editing&&(this.editContent=this.currentContent?this.currentContent:this.handleGetContent())},watch:{modelValue(o){this.currentContent=o},editing(o){o||t.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},isEllipsis(){t.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},ellipsis:{handler(o){o?t.nextTick(()=>{this.handleUpdateEllipsisStatus(),this.handleCreateObserver()}):this.handleRemoveObserver()},immediate:!0}},computed:{classes(){return["ivu-typography",{[`ivu-typography-${this.type}`]:this.type,"ivu-typography-disabled":this.disabled,"ivu-typography-ellipsis-line-clamp":this.ellipsis&&!this.ellipsisExpanded,"ivu-typography-ellipsis-single-line":this.ellipsis&&!this.ellipsisExpanded&&this.mergedEllipsisConfig.rows===1}]}},methods:{wrapperDecorations(){let o=this.currentContent?this.currentContent:this.$slots.default?this.$slots.default():"";function c(d,C){!d||(o=t.h(C,o))}return c(this.strong,"strong"),c(this.underline,"u"),c(this.delete,"del"),c(this.code,"code"),c(this.mark,"mark"),c(this.keyboard,"kbd"),c(this.italic,"i"),o},handleClickContent(o){if(!this.isHrefPattern&&this.component!=="a"){const c=this.mergedEditConfig.triggerType;this.editable&&(c==="text"||c==="both")&&this.handleEdit()}else{const c=o.ctrlKey||o.metaKey;this.handleCheckClick(o,c)}},handleGetContent(){const o=document.createElement("div");document.body.appendChild(o);let c=null,d=null,C="";const b=this.wrapperDecorations();return c=t.createApp({render(){return t.h("div",{ref:"text",style:{display:"none"}},b)},created(){d=t.getCurrentInstance()}}),c.mount(o),C=d.refs.text.innerText,c.unmount(),document.body.removeChild(o),C},handleCopy(){let o="";this.copyText?o=this.copyText:this.currentContent?o=this.currentContent:this.$slots.default&&(o=this.handleGetContent()),hv({text:this.copyText?this.copyText:o,showTip:this.mergedCopyConfig.showTip,successTip:this.mergedCopyConfig.successTip,errorTip:this.mergedCopyConfig.errorTip,success:()=>{this.$emit("on-copy-success"),this.copied=!0,this.copyTimeout&&clearTimeout(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.copied=!1},3e3)},error:()=>{this.$emit("on-copy-error")}})},handleEdit(){this.editContent=this.currentContent?this.currentContent:this.handleGetContent(),t.nextTick(()=>{this.editing=!0,this.$emit("on-edit-start"),t.nextTick(()=>{this.$refs.edit.focus({cursor:"end"})})})},handleEditBlur(){if(this.isEditESC){this.isEditESC=!1;return}this.handleEditSave(),this.$emit("on-edit-end",this.editContent)},handleEditChange(o){const c=o.target.value;this.editContent=c,this.$emit("on-edit-change",c)},handleEditSave(){this.$emit("update:modelValue",this.editContent),this.editing=!1},handleEditKeydown(o){const{keyCode:c}=o;c===Bt.ENTER&&o.preventDefault(),this.lastKeyCode=c},handleEditKeyup(o){const{keyCode:c,ctrlKey:d,altKey:C,metaKey:b,shiftKey:m}=o;this.lastKeyCode===c&&!d&&!C&&!b&&!m&&(c===Bt.ENTER?(this.handleEditSave(),this.$emit("on-edit-end",this.editContent)):c===Bt.ESC&&(this.isEditESC=!0,this.$emit("on-edit-cancel"),this.editing=!1))},handleUpdateEllipsisStatus(){if(this.ellipsis&&!this.ellipsisExpanded){const o=this.$refs.typography;this.isEllipsis=o.scrollHeight>o.clientHeight}else this.isEllipsis=!1},handleCreateObserver(){this.ellipsis&&!this.ellipsisExpanded&&(this.observer=Wu(),this.observer.listenTo(this.$refs.typography,this.handleUpdateEllipsisStatus))},handleRemoveObserver(){this.observer&&(this.observer.removeListener(this.$refs.typography,this.handleUpdateEllipsisStatus),this.observer=null)}},render(){let o=[];const c=this.wrapperDecorations();if(o.push(c),this.editable){const d=this.mergedEditConfig.triggerType;if(d==="icon"||d==="both"){const C=this.$slots.editIcon?this.$slots.editIcon():t.h(S,{type:"md-create"}),b=t.h("div",{class:"ivu-typography-edit",onClick:this.handleEdit},C);if(this.mergedEditConfig.tooltip){const m=t.h(Va,{content:this.mergedEditConfig.tooltip,placement:"top"},()=>b);o.push(m)}else o.push(b)}}if(this.copyable){const d=this.$slots.copyIcon?this.$slots.copyIcon({copied:this.copied}):t.h(S,{type:this.copied?"md-checkmark":"md-copy"}),C=t.h("div",{class:["ivu-typography-copy",{"ivu-typography-copy-success":this.copied}],onClick:this.handleCopy},d);if(this.mergedCopyConfig.tooltips instanceof Array&&this.mergedCopyConfig.tooltips.length===2){const b=t.h(Va,{content:this.copied?this.mergedCopyConfig.tooltips[1]:this.mergedCopyConfig.tooltips[0],placement:"top"},()=>C);o.push(b)}else o.push(C)}if(this.editing){const d=t.h(oo,{ref:"edit",modelValue:this.editContent,type:"textarea",autosize:this.mergedEditConfig.autosize,maxlength:this.mergedEditConfig.maxlength,"onOn-blur":this.handleEditBlur,"onOn-keydown":this.handleEditKeydown,"onOn-keyup":this.handleEditKeyup,"onOn-change":this.handleEditChange}),C=this.$slots.enterIcon?this.$slots.enterIcon():t.h(S,{type:"md-return-left"}),b=t.h("span",{class:"ivu-typography-edit-content-confirm"},C);return t.h("div",{class:["ivu-typography","ivu-typography-edit-content",{[`ivu-typography-h${this.level}`]:this.level,"ivu-typography-div":!this.level}]},[d,b])}else{const d={};this.ellipsis&&!this.ellipsisExpanded&&(d["-webkit-line-clamp"]=this.mergedEllipsisConfig.rows);const b=t.h(this.component,{ref:"typography",class:this.classes,...this.linkProps,style:d,onClick:this.handleClickContent},[o,null]);return this.ellipsis&&!this.ellipsisExpanded&&this.isEllipsis&&this.mergedEllipsisConfig.tooltip?t.h(Va,{content:this.mergedEllipsisConfig.tooltip===!0?this.handleGetContent():this.mergedEllipsisConfig.tooltip,placement:this.placement,transfer:this.transfer,theme:this.theme,maxWidth:this.maxWidth},()=>b):b}},beforeUnmount(){this.handleRemoveObserver()}},rP={name:"Link",mixins:[bp],render(){return t.h(Tv,{...this.$props,component:"a",...this.commonEvents()},this.commonSlots())}};function sP(){return Xe(),we}let oP=sP();Ls.newInstance=o=>{if(!r)return;const c=o||{};let d=null;const C=t.createApp({data(){return Object.assign({},c,{})},render(){let E="";return this.render?E=t.h(Ls,{fix:!0,fullscreen:!0,ref:"spin"},[this.render(t.h)]):E=t.h(Ls,{size:"large",fix:!0,fullscreen:!0,ref:"spin"}),t.h("div",{class:"ivu-spin-fullscreen ivu-spin-fullscreen-wrapper",style:{"z-index":2010+oP}},[E])},created(){d=t.getCurrentInstance()}}),b=document.createElement("div");document.body.appendChild(b),C.mount(b);const m=d.refs.spin;return{show(){t.nextTick(()=>{d.refs.spin.visible=!0,oP=sP()})},remove(E){m.visible=!1,setTimeout(function(){C.unmount(),document.body.removeChild(b),E()},500)},component:m}};let Op;function aP(o=void 0){return Op=Op||Ls.newInstance({render:o}),Op}function Ij(o){const c="render"in o?o.render:void 0;aP(c).show(o)}Ls.show=function(o={}){return Ij(o)},Ls.hide=function(){if(!Op)return!1;aP().remove(()=>{Op=null})};const xp="ivu-list",Dj={name:"List",provide(){return{ListInstance:this}},components:{Spin:Ls},props:{border:{type:Boolean,default:!1},itemLayout:{validator(o){return _(o,["horizontal","vertical"])},default:"horizontal"},header:{type:String,default:""},footer:{type:String,default:""},loading:{type:Boolean,default:!1},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},split:{type:Boolean,default:!0}},data(){return{}},computed:{classes(){return[`${xp}`,`${xp}-${this.size}`,`${xp}-${this.itemLayout}`,{[`${xp}-bordered`]:this.border,[`${xp}-split`]:this.split}]}},methods:{}},Nj={key:0,class:"ivu-list-header"},$j={class:"ivu-list-container"},Vj={class:"ivu-list-items"},Lj={key:2,class:"ivu-list-footer"};function Bj(o,c,d,C,b,m){const E=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[d.header||o.$slots.header?(t.openBlock(),t.createElementBlock("div",Nj,[t.renderSlot(o.$slots,"header",{},()=>[t.createTextVNode(t.toDisplayString(d.header),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",$j,[t.createElementVNode("ul",Vj,[t.renderSlot(o.$slots,"default")])]),d.loading?(t.openBlock(),t.createBlock(E,{key:1,fix:"",size:"large"},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"spin")]),_:3})):t.createCommentVNode("",!0),d.footer||o.$slots.footer?(t.openBlock(),t.createElementBlock("div",Lj,[t.renderSlot(o.$slots,"footer",{},()=>[t.createTextVNode(t.toDisplayString(d.footer),1)])])):t.createCommentVNode("",!0)],2)}var lP=l(Dj,[["render",Bj]]);const Uj={name:"ListItem",inject:["ListInstance"],props:{},computed:{itemLayout(){return this.ListInstance.itemLayout},isItemContainsTextNode(){let o;return this.$slots.default().forEach(c=>{typeof c=="string"&&(o=!0)}),o},isFlexMode(){const o=this.$slots.extra;return this.itemLayout==="vertical"?!!o:!this.isItemContainsTextNode},classes(){return[{"ivu-list-item-no-flex":!this.isFlexMode}]}}},zj={class:"ivu-list-item-main"},Fj={key:0,class:"ivu-list-item-action"},Xj={class:"ivu-list-item-extra"},Wj={key:0,class:"ivu-list-item-action"},Qj={class:"ivu-list-item-extra"};function Hj(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(["ivu-list-item",m.classes])},[m.itemLayout==="vertical"&&o.$slots.extra?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("div",zj,[t.renderSlot(o.$slots,"default"),o.$slots.action?(t.openBlock(),t.createElementBlock("ul",Fj,[t.renderSlot(o.$slots,"action")])):t.createCommentVNode("",!0)]),t.createElementVNode("div",Xj,[t.renderSlot(o.$slots,"extra")])],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.renderSlot(o.$slots,"default"),o.$slots.action?(t.openBlock(),t.createElementBlock("ul",Wj,[t.renderSlot(o.$slots,"action")])):t.createCommentVNode("",!0),t.createElementVNode("div",Qj,[t.renderSlot(o.$slots,"extra")])],64))],2)}var cP=l(Uj,[["render",Hj]]);const Gj={name:"ListItemMeta",components:{Avatar:Jf},props:{avatar:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""}}},Yj={class:"ivu-list-item-meta"},jj={key:0,class:"ivu-list-item-meta-avatar"},qj={class:"ivu-list-item-meta-content"},Zj={key:0,class:"ivu-list-item-meta-title"},Kj={key:1,class:"ivu-list-item-meta-description"};function Jj(o,c,d,C,b,m){const E=t.resolveComponent("Avatar");return t.openBlock(),t.createElementBlock("div",Yj,[d.avatar||o.$slots.avatar?(t.openBlock(),t.createElementBlock("div",jj,[t.renderSlot(o.$slots,"avatar",{},()=>[t.createVNode(E,{src:d.avatar},null,8,["src"])])])):t.createCommentVNode("",!0),t.createElementVNode("div",qj,[d.title||o.$slots.title?(t.openBlock(),t.createElementBlock("div",Zj,[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])])):t.createCommentVNode("",!0),d.description||o.$slots.description?(t.openBlock(),t.createElementBlock("div",Kj,[t.renderSlot(o.$slots,"description",{},()=>[t.createTextVNode(t.toDisplayString(d.description),1)])])):t.createCommentVNode("",!0)])])}var hP=l(Gj,[["render",Jj]]);const Mv="ivu-loading-bar",eq={name:"LoadingBar",props:{color:{type:String,default:"primary"},failedColor:{type:String,default:"error"},height:{type:Number,default:2}},data(){return{percent:0,status:"success",show:!1}},computed:{classes(){return`${Mv}`},innerClasses(){return[`${Mv}-inner`,{[`${Mv}-inner-color-primary`]:this.color==="primary"&&this.status==="success",[`${Mv}-inner-failed-color-error`]:this.failedColor==="error"&&this.status==="error"}]},outerStyles(){return{height:`${this.height}px`}},styles(){let o={width:`${this.percent}%`,height:`${this.height}px`};return this.color!=="primary"&&this.status==="success"&&(o.backgroundColor=this.color),this.failedColor!=="error"&&this.status==="error"&&(o.backgroundColor=this.failedColor),o}}};function tq(o,c,d,C,b,m){return t.openBlock(),t.createBlock(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.outerStyles)},[t.createElementVNode("div",{class:t.normalizeClass(m.innerClasses),style:t.normalizeStyle(m.styles)},null,6)],6),[[t.vShow,b.show]])]),_:1})}var uw=l(eq,[["render",tq]]);uw.newInstance=o=>{if(!r)return;const c=o||{};let d=null;const C=t.createApp({data(){return c},render(){return t.h(uw,Object.assign({ref:"loadingBar"},c))},created(){d=t.getCurrentInstance()}}),b=document.createElement("div");document.body.appendChild(b),C.mount(b);const m=d.refs.loadingBar;return{update(E){"percent"in E&&(m.percent=E.percent),E.status&&(m.status=E.status),"show"in E&&(m.show=E.show)},component:m,destroy(){C.unmount(),document.body.removeChild(b)}}};let Ev,uP="primary",dP=800,fP="error",pP=2,wp;function mP(){return Ev=Ev||uw.newInstance({color:uP,failedColor:fP,height:pP}),Ev}function ph(o){mP().update(o)}function gP(){setTimeout(()=>{ph({show:!1}),setTimeout(()=>{ph({percent:0})},200)},dP)}function _p(){wp&&(clearInterval(wp),wp=null)}var dw={start(){if(wp)return;let o=0;ph({percent:o,status:"success",show:!0}),wp=setInterval(()=>{o+=Math.floor(Math.random()*3+1),o>95&&_p(),ph({percent:o,status:"success",show:!0})},200)},update(o){_p(),ph({percent:o,status:"success",show:!0})},finish(){_p(),ph({percent:100,status:"success",show:!0}),gP()},error(){_p(),ph({percent:100,status:"error",show:!0}),gP()},config(o){o.color&&(uP=o.color),o.duration&&(dP=o.duration),o.failedColor&&(fP=o.failedColor),o.height&&(pP=o.height)},destroy(){_p();let o=mP();Ev=null,o.destroy()}};const nq={name:"Login",components:{Form:xv},emits:["on-submit"],provide(){return{LoginInstance:this}},props:{},data(){return{formValidate:{}}},methods:{handleSubmit(){this.$refs.form.validate(o=>{this.$emit("on-submit",o,JSON.parse(JSON.stringify(this.formValidate)))})},handleValidate(o,c){let d=!0;o.forEach(C=>{this.$refs.form.validateField(C,b=>{b&&(d=!1)})}),c(d)}}},iq={class:"ivu-login"};function rq(o,c,d,C,b,m){const E=t.resolveComponent("Form");return t.openBlock(),t.createElementBlock("div",iq,[t.createVNode(E,{ref:"form",model:b.formValidate,onSubmit:c[0]||(c[0]=t.withModifiers(()=>{},["prevent"]))},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"default")]),_:3},8,["model"])])}var vP=l(nq,[["render",rq]]);const fw="ivu-menu",sq={name:"Menu",emits:["on-select","on-open-change"],provide(){return{MenuInstance:this}},props:{mode:{validator(o){return _(o,["horizontal","vertical"])},default:"vertical"},theme:{validator(o){return _(o,["light","dark","primary"])},default:"light"},activeName:{type:[String,Number]},openNames:{type:Array,default(){return[]}},accordion:{type:Boolean,default:!1},width:{type:String,default:"240px"}},data(){return{currentActiveName:this.activeName,openedNames:[],submenuList:[],menuItemList:[],ready:!1}},computed:{classes(){let o=this.theme;return this.mode==="vertical"&&this.theme==="primary"&&(o="light"),[`${fw}`,`${fw}-${o}`,{[`${fw}-${this.mode}`]:this.mode}]},styles(){let o={};return this.mode==="vertical"&&(o.width=this.width),o}},methods:{updateActiveName(){this.currentActiveName===void 0&&(this.currentActiveName=-1),this.submenuList.map(o=>o.submenu).forEach(o=>{o.handleUpdateActiveName(!1)}),this.menuItemList.map(o=>o.menuitem).forEach(o=>{o.handleUpdateActiveName(this.currentActiveName)})},updateOpenKeys(o){const c=[...this.openedNames].indexOf(o),d=this.submenuList.map(b=>b.submenu);if(this.accordion&&d.forEach(b=>{b.opened=!1}),c>=0){let b=null;d.forEach(m=>{m.name===o&&(b=m,m.opened=!1)}),B(b,"Submenu").forEach(m=>{m.opened=!0}),b.childSubmenuList.map(m=>m.submenu).forEach(m=>{m.opened=!1})}else if(this.accordion){let b=null;d.forEach(m=>{m.name===o&&(b=m,m.opened=!0)}),B(b,"Submenu").forEach(m=>{m.opened=!0})}else this.submenuList.map(b=>b.submenu).forEach(b=>{b.name===o&&(b.opened=!0)});let C=d.filter(b=>b.opened).map(b=>b.name);this.openedNames=[...C],this.$emit("on-open-change",C)},updateOpened(){const o=(this.submenuList||[]).map(c=>c.submenu);o.length&&o.forEach(c=>{this.openedNames.indexOf(c.name)>-1?c.opened=!0:c.opened=!1})},handleEmitSelectEvent(o){this.$emit("on-select",o)},handleMenuItemSelect(o){this.currentActiveName=o,this.$emit("on-select",o)}},mounted(){this.openedNames=[...this.openNames],this.updateOpened(),t.nextTick(()=>{this.updateActiveName(),this.ready=!0})},watch:{openNames(o){this.openedNames=o},activeName(o){this.currentActiveName=o},currentActiveName(){this.updateActiveName()}}};function oq(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.styles)},[t.renderSlot(o.$slots,"default")],6)}var pw=l(sq,[["render",oq]]),mw={inject:{MenuInstance:{default:null},SubmenuInstance:{default:null}},data(){return{menu:this.MenuInstance}},computed:{hasParentSubmenu(){return!!this.SubmenuInstance},parentSubmenuNum(){return B(this,"Submenu").length},mode(){return this.MenuInstance.mode}}};const aq="ivu-menu",lq={name:"MenuGroup",mixins:[mw],props:{title:{type:String,default:""}},data(){return{prefixCls:aq}},computed:{groupStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*28+"px"}:{}}}};function cq(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([b.prefixCls+"-item-group"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-item-group-title"]),style:t.normalizeStyle(m.groupStyle)},t.toDisplayString(d.title),7),t.createElementVNode("ul",null,[t.renderSlot(o.$slots,"default")])],2)}var yP=l(lq,[["render",cq]]);const Pv="ivu-menu",hq={name:"MenuItem",mixins:[mw,fe],props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{active:!1,id:te(6)}},computed:{classes(){return[`${Pv}-item`,{[`${Pv}-item-active`]:this.active,[`${Pv}-item-selected`]:this.active,[`${Pv}-item-disabled`]:this.disabled}]},itemStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}}},methods:{handleClickItem(o,c=!1){if(!this.disabled)if(c||this.target==="_blank"){this.handleCheckClick(o,c);let d=$(this,"Menu");d&&d.handleEmitSelectEvent(this.name)}else $(this,"Submenu")?this.SubmenuInstance.handleMenuItemSelect(this.name):this.MenuInstance.handleMenuItemSelect(this.name),this.handleCheckClick(o,c)},handleUpdateActiveName(o){this.name===o?(this.active=!0,this.SubmenuInstance&&this.SubmenuInstance.handleUpdateActiveName(o)):this.active=!1},addMenuItem(){const o=this.MenuInstance;o.menuItemList||(o.menuItemList=[]),o.menuItemList.push({id:this.id,menuitem:this})},removeMenuItem(){const o=this.MenuInstance;if(o.menuItemList&&o.menuItemList.length){const c=o.menuItemList.findIndex(d=>d.id===this.id);o.menuItemList.splice(c,1)}}},mounted(){this.addMenuItem()},beforeUnmount(){this.removeMenuItem()}},uq=["href","target"];function dq(o,c,d,C,b,m){return o.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:o.linkUrl,target:o.target,class:t.normalizeClass(m.classes),onClick:[c[0]||(c[0]=t.withModifiers(E=>m.handleClickItem(E,!1),["exact"])),c[1]||(c[1]=t.withModifiers(E=>m.handleClickItem(E,!0),["ctrl"])),c[2]||(c[2]=t.withModifiers(E=>m.handleClickItem(E,!0),["meta"]))],style:t.normalizeStyle(m.itemStyle)},[t.renderSlot(o.$slots,"default")],14,uq)):(t.openBlock(),t.createElementBlock("li",{key:1,class:t.normalizeClass(m.classes),onClick:c[3]||(c[3]=t.withModifiers((...E)=>m.handleClickItem&&m.handleClickItem(...E),["stop"])),style:t.normalizeStyle(m.itemStyle)},[t.renderSlot(o.$slots,"default")],6))}var bP=l(hq,[["render",dq]]);const OP={name:"Mobile",mixins:[sp],data(){return{className:"ivu-login-mobile",prefix:"ios-phone-portrait",placeholder:"请输入手机号码",type:"text"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:Lx.Mobile,trigger:"change"},{pattern:/^1\d{10}$/,message:"输入的手机号码格式不正确！",trigger:"change"}]}}}},hs="ivu-modal",xP={x:null,y:null,dragX:null,dragY:null,dragging:!1,rect:null},fq={inheritAttrs:!1,name:"Modal",mixins:[Qn,iw],components:{Icon:S,iButton:Qr},emits:["on-cancel","on-ok","on-hidden","on-visible-change","update:modelValue"],provide(){return{ModalInstance:this}},props:{modelValue:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.modal.maskClosable===""?!0:o.$VIEWUI.modal.maskClosable}},title:{type:String},width:{type:[Number,String],default:520},okText:{type:String},cancelText:{type:String},loading:{type:Boolean,default:!1},styles:{type:Object,default(){return{}}},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},transitionNames:{type:Array,default(){return["ease","fade"]}},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!0:o.$VIEWUI.transfer}},fullscreen:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyDistance:{type:Number,default:10},resetDragPosition:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},beforeClose:Function,render:Function},data(){return{prefixCls:hs,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.modelValue,dragData:L(xP),modalIndex:this.handleGetModalIndex(),isMouseTriggerIn:!1,id:te(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${hs}-wrap`,{[`${hs}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${hs}-no-mask`]:!this.showMask}]},wrapStyles(){return{zIndex:this.modalIndex+this.zIndex}},maskClasses(){return`${hs}-mask`},classes(){return[`${hs}`,{[`${hs}-fullscreen`]:this.fullscreen,[`${hs}-fullscreen-no-header`]:this.fullscreen&&!this.showHead,[`${hs}-fullscreen-no-footer`]:this.fullscreen&&this.footerHide}]},contentClasses(){return[`${hs}-content`,{[`${hs}-content-no-mask`]:!this.showMask,[`${hs}-content-drag`]:this.draggable&&!this.fullscreen,[`${hs}-content-dragging`]:this.draggable&&this.dragData.dragging}]},mainStyles(){let o={};const c=parseInt(this.width),d=this.dragData.x!==null?{top:0}:{width:c<=100?`${c}%`:`${c}px`},C=this.styles?this.styles:{};return Object.assign(o,d,C),o},contentStyles(){let o={};if(this.draggable&&!this.fullscreen){const c=this.styles.top?parseFloat(this.styles.top):0,d=this.styles.left?parseFloat(this.styles.left):0;this.dragData.x!==null&&(o.left=`${this.dragData.x-d}px`),this.dragData.y!==null&&(o.top=`${this.dragData.y}px`),this.dragData.y!==null&&(o.top=`${this.dragData.y-c}px`);const C=parseInt(this.width),b={width:C<=100?`${C}%`:`${C}px`};Object.assign(o,b)}return o},localeOkText(){return this.okText===void 0?this.t("i.modal.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.modal.cancelText"):this.cancelText},showMask(){return this.mask}},methods:{close(){if(!this.beforeClose)return this.handleClose();const o=this.beforeClose();o&&o.then?o.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-cancel")},handleMask(){this.maskClosable&&this.showMask&&this.close()},handleWrapClick(o){if(this.isMouseTriggerIn){this.isMouseTriggerIn=!1;return}const c=o.target.getAttribute("class");c&&c.indexOf(`${hs}-wrap`)>-1&&this.handleMask()},handleMousedown(){this.isMouseTriggerIn=!0},cancel(){this.close()},ok(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("update:modelValue",!1)),this.$emit("on-ok")},EscClose(o){if(this.visible&&this.closable&&o.keyCode===27){const c=this.$root.modalList.map(d=>d.modal).filter(d=>d.$data.visible&&d.$props.closable).sort((d,C)=>d.$data.modalIndex<C.$data.modalIndex?1:-1)[0];setTimeout(()=>{c.close()},0)}},animationFinish(){this.$emit("on-hidden")},handleMoveStart(o){if(!this.draggable||this.fullscreen)return!1;const c=this.$refs.content.getBoundingClientRect();this.dragData.rect=c,this.dragData.x=c.x||c.left,this.dragData.y=c.y||c.top;const d={x:o.clientX,y:o.clientY};this.dragData.dragX=d.x,this.dragData.dragY=d.y,this.dragData.dragging=!0,s(window,"mousemove",this.handleMoveMove),s(window,"mouseup",this.handleMoveEnd)},handleMoveMove(o){if(!this.dragData.dragging||this.fullscreen)return!1;const c={x:o.clientX,y:o.clientY},d={x:c.x-this.dragData.dragX,y:c.y-this.dragData.dragY};if(r&&this.sticky){const C=document.documentElement.clientWidth,b=document.documentElement.clientHeight;this.dragData.x+d.x<=this.stickyDistance&&d.x<0?this.dragData.x=0:this.dragData.x+this.dragData.rect.width-C>-this.stickyDistance&&d.x>0?this.dragData.x=C-this.dragData.rect.width:this.dragData.x+=d.x,this.dragData.y+d.y<=this.stickyDistance&&d.y<0?this.dragData.y=0:this.dragData.y+this.dragData.rect.height-b>-this.stickyDistance&&d.y>0?this.dragData.y=b-this.dragData.rect.height:this.dragData.y+=d.y}else this.dragData.x+=d.x,this.dragData.y+=d.y;this.dragData.dragX=c.x,this.dragData.dragY=c.y},handleMoveEnd(){this.dragData.dragging=!1,a(window,"mousemove",this.handleMoveMove),a(window,"mouseup",this.handleMoveEnd)},handleGetModalIndex(){return Xe(),we},handleClickModal(){if(this.draggable){if(Te!==this.lastVisibleIndex){this.lastVisibleIndex=Te;return}this.modalIndex=this.handleGetModalIndex()}},addModal(){const o=this.$root;o.modalList||(o.modalList=[]),o.modalList.push({id:this.id,modal:this})},removeModal(){const o=this.$root;if(!o.modalList)return;const c=o.modalList.findIndex(d=>d.id===this.id);o.modalList.splice(c,1)}},watch:{modelValue(o){this.visible=o},visible(o){o===!1?(this.buttonLoading=!1,this.timer=setTimeout(()=>{this.wrapShow=!1,this.removeScrollEffect()},300)):(this.lastVisible!==o&&(this.modalIndex=this.handleGetModalIndex(),Ve()),this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(c=>{c.table.handleOnVisibleChange(o)}),this.sliderList.forEach(c=>{c.slider.handleOnVisibleChange(o)}),this.$emit("on-visible-change",o),this.lastVisible=o,this.lastVisibleIndex=Te,o&&this.resetDragPosition&&(this.dragData=L(xP))},loading(o){o||(this.buttonLoading=!1)},scrollable(o){o?this.removeScrollEffect():this.addScrollEffect()},title(o){this.$slots.header===void 0&&(this.showHead=!!o)}},mounted(){this.visible&&(this.wrapShow=!0);let o=!0;this.$slots.header===void 0&&!this.title&&(o=!1),this.showHead=o,this.addModal(),r&&document.addEventListener("keydown",this.EscClose)},beforeUnmount(){this.removeModal(),r&&document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()}};function pq(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("i-button");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!d.transfer},[t.createVNode(t.Transition,{name:d.transitionNames[1]},{default:t.withCtx(()=>[m.showMask?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.maskClasses),style:t.normalizeStyle(m.wrapStyles),onClick:c[0]||(c[0]=(...W)=>m.handleMask&&m.handleMask(...W))},null,6)),[[t.vShow,b.visible]]):t.createCommentVNode("",!0)]),_:1},8,["name"]),t.createElementVNode("div",{class:t.normalizeClass(m.wrapClasses),style:t.normalizeStyle(m.wrapStyles),onClick:c[5]||(c[5]=(...W)=>m.handleWrapClick&&m.handleWrapClick(...W))},[t.createVNode(t.Transition,{name:d.transitionNames[0],onAfterLeave:m.animationFinish},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",t.mergeProps(o.$attrs,{class:m.classes,style:m.mainStyles,onMousedown:c[4]||(c[4]=(...W)=>m.handleMousedown&&m.handleMousedown(...W))}),[t.createElementVNode("div",{class:t.normalizeClass(m.contentClasses),ref:"content",style:t.normalizeStyle(m.contentStyles),onClick:c[3]||(c[3]=(...W)=>m.handleClickModal&&m.handleClickModal(...W))},[d.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([b.prefixCls+"-close"]),onClick:c[1]||(c[1]=(...W)=>m.close&&m.close(...W))},[t.renderSlot(o.$slots,"close",{},()=>[t.createVNode(E,{type:"ios-close"})])],2)):t.createCommentVNode("",!0),b.showHead?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([b.prefixCls+"-header"]),onMousedown:c[2]||(c[2]=(...W)=>m.handleMoveStart&&m.handleMoveStart(...W))},[t.renderSlot(o.$slots,"header",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-header-inner"])},t.toDisplayString(d.title),3)])],34)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"])},[t.renderSlot(o.$slots,"default")],2),d.footerHide?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass([b.prefixCls+"-footer"])},[t.renderSlot(o.$slots,"footer",{},()=>[t.createVNode(V,{type:"text",onClick:m.cancel},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.localeCancelText),1)]),_:1},8,["onClick"]),t.createVNode(V,{type:"primary",loading:b.buttonLoading,onClick:m.ok},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.localeOkText),1)]),_:1},8,["loading","onClick"])])],2))],6)],16),[[t.vShow,b.visible]])]),_:3},8,["name","onAfterLeave"])],6)],8,["disabled"])}var lo=l(fq,[["render",pq]]);const za="ivu-modal-confirm";lo.newInstance=o=>{if(!r)return;const c=o||{},d=document.createElement("div");document.body.appendChild(d);let C=null;const b=t.createApp({mixins:[Qn],data(){return Object.assign({},c,{visible:!1,width:416,title:"",body:"",iconType:"",iconName:"",okText:void 0,cancelText:void 0,showCancel:!1,loading:!1,buttonLoading:!1,scrollable:!1,closable:!1,closing:!1})},render(){let E=[];this.showCancel&&E.push(t.h(Qr,{type:"text",onClick:this.cancel},()=>this.localeCancelText)),E.push(t.h(Qr,{type:"primary",loading:this.buttonLoading,onClick:this.ok},()=>this.localeOkText));let V;this.render?V=t.h("div",{class:`${za}-body ${za}-body-render`},[this.render(t.h)]):V=t.h("div",{class:`${za}-body`},[t.h("div",{innerHTML:this.body})]);let W;return this.title&&(W=t.h("div",{class:`${za}-head`},[t.h("div",{class:this.iconTypeCls},[t.h("i",{class:this.iconNameCls})]),t.h("div",{class:`${za}-head-title`,innerHTML:this.title})])),t.h(lo,Object.assign({},c,{width:this.width,scrollable:this.scrollable,closable:this.closable,ref:"modal"},{modelValue:this.visible,"onUpdate:modelValue":z=>this.visible=z,"onOn-cancel":this.cancel}),()=>t.h("div",{class:za},[W,V,t.h("div",{class:`${za}-footer`},E)]))},computed:{iconTypeCls(){return[`${za}-head-icon`,`${za}-head-icon-${this.iconType}`]},iconNameCls(){return["ivu-icon",`ivu-icon-${this.iconName}`]},localeOkText(){return this.okText?this.okText:this.t("i.modal.okText")},localeCancelText(){return this.cancelText?this.cancelText:this.t("i.modal.cancelText")}},methods:{cancel(){this.closing||(this.$refs.modal.visible=!1,this.buttonLoading=!1,this.onCancel(),this.remove())},ok(){this.closing||(this.loading?this.buttonLoading=!0:(this.$refs.modal.visible=!1,this.remove()),this.onOk())},remove(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.destroy()},300)},destroy(){b.unmount(),document.body.removeChild(d),this.onRemove()},onOk(){},onCancel(){},onRemove(){}},created(){C=t.getCurrentInstance()}});b.mount(d);const m=C.refs.modal;return{show(E){switch(m.$parent.showCancel=E.showCancel,m.$parent.iconType=E.icon,E.icon){case"info":m.$parent.iconName="ios-information-circle";break;case"success":m.$parent.iconName="ios-checkmark-circle";break;case"warning":m.$parent.iconName="ios-alert";break;case"error":m.$parent.iconName="ios-close-circle";break;case"confirm":m.$parent.iconName="ios-help-circle";break}"width"in E&&(m.$parent.width=E.width),"closable"in E&&(m.$parent.closable=E.closable),"title"in E&&(m.$parent.title=E.title),"content"in E&&(m.$parent.body=E.content),"okText"in E&&(m.$parent.okText=E.okText),"cancelText"in E&&(m.$parent.cancelText=E.cancelText),"onCancel"in E&&(m.$parent.onCancel=E.onCancel),"onOk"in E&&(m.$parent.onOk=E.onOk),"loading"in E&&(m.$parent.loading=E.loading),"scrollable"in E&&(m.$parent.scrollable=E.scrollable),m.$parent.onRemove=E.onRemove,m.visible=!0},remove(){m.visible=!1,m.$parent.buttonLoading=!1,m.$parent.remove()},component:m}};let Sp;function wP(o=void 0,c=!0){return Sp=Sp||lo.newInstance({closable:!1,maskClosable:!1,footerHide:!0,render:o,lockScroll:c}),Sp}function Cp(o){const c="render"in o?o.render:void 0,d="lockScroll"in o?o.lockScroll:!0;let C=wP(c,d);o.onRemove=function(){Sp=null},C.show(o)}lo.info=function(o={}){return o.icon="info",o.showCancel=!1,Cp(o)},lo.success=function(o={}){return o.icon="success",o.showCancel=!1,Cp(o)},lo.warning=function(o={}){return o.icon="warning",o.showCancel=!1,Cp(o)},lo.error=function(o={}){return o.icon="error",o.showCancel=!1,Cp(o)},lo.confirm=function(o={}){return o.icon="confirm",o.showCancel=!0,Cp(o)},lo.remove=function(){if(!Sp)return!1;wP().remove()};const Bs="ivu-notice",_P="ivu-icon",mq="ivu_notice_key_";let SP=24,CP=4.5,Qu,kP=1;const gq={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle"},TP="move-notice";function MP(){return Qu=Qu||lv.newInstance({prefixCls:Bs,styles:{top:`${SP}px`,right:0},transitionName:TP}),Qu}function kp(o,c){const d=c.title||"",C=c.desc||"",b=c.name||`${mq}${kP}`,m=c.onClose||function(){},E=c.render,V=c.duration===0?0:c.duration||CP;kP++;let W=MP(),z,G;const ae=c.render&&!d?"":C||c.render?` ${Bs}-with-desc`:"";if(o==="normal")G=!1,z=`
            <div class="${Bs}-custom-content ${Bs}-with-normal ${ae}">
                <div class="${Bs}-title">${d}</div>
                <div class="${Bs}-desc">${C}</div>
            </div>
        `;else{const xe=gq[o],Oe=ae===""?"":"-outline";G=!0,z=`
            <div class="${Bs}-custom-content ${Bs}-with-icon ${Bs}-with-${o} ${ae}">
                <span class="${Bs}-icon ${Bs}-icon-${o}">
                    <i class="${_P} ${_P}-${xe}${Oe}"></i>
                </span>
                <div class="${Bs}-title">${d}</div>
                <div class="${Bs}-desc">${C}</div>
            </div>
        `}W.notice({name:b.toString(),duration:V,styles:{},transitionName:TP,content:z,withIcon:G,render:E,hasTitle:!!d,onClose:m,closable:!0,type:"notice"})}var gw={open(o){return kp("normal",o)},info(o){return kp("info",o)},success(o){return kp("success",o)},warning(o){return kp("warning",o)},error(o){return kp("error",o)},config(o){o.top&&(SP=o.top),(o.duration||o.duration===0)&&(CP=o.duration)},close(o){if(o)o=o.toString(),Qu&&Qu.remove(o);else return!1},destroy(){let o=MP();Qu=null,o.destroy("ivu-notice")}};const ar="ivu-tabs",vw=300,EP=(o,c,d,C)=>{const b=(o.findIndex(E=>E.name===c)+d+o.length)%o.length,m=o[b];return m.disabled?EP(o,m.name,d):m},PP=(o,c)=>{try{o.focus()}catch{}if(r&&document.activeElement==o&&o!==c)return!0;const d=o.children;for(let C of d)if(PP(C,c))return!0;return!1},vq={name:"Tabs",mixins:[Po],emits:["on-click","on-dblclick","on-contextmenu","on-tab-remove","on-drag-drop","update:modelValue"],components:{Icon:S,Render:XE,Dropdown:hh,DropdownMenu:uh},provide(){return{TabsInstance:this}},props:{modelValue:{type:[String,Number]},type:{validator(o){return _(o,["line","card"])},default:"line"},size:{validator(o){return _(o,["small","default"])},default:"default"},animated:{type:Boolean,default:!0},captureFocus:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},beforeRemove:Function,name:{type:String},draggable:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:ar,navList:[],barWidth:0,barOffset:0,activeKey:this.modelValue,focusedKey:this.modelValue,showSlot:!1,navStyle:{transform:""},scrollable:!1,transitioning:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},paneList:[],tableList:[]}},computed:{classes(){return[`${ar}`,{[`${ar}-card`]:this.type==="card",[`${ar}-mini`]:this.size==="small"&&this.type==="line",[`${ar}-no-animation`]:!this.animated}]},contentClasses(){return[`${ar}-content`,{[`${ar}-content-animated`]:this.animated}]},barClasses(){return[`${ar}-ink-bar`,{[`${ar}-ink-bar-animated`]:this.animated}]},contentStyle(){const o=this.getTabIndex(this.activeKey),c=o===0?"0%":`-${o}00%`;let d={};return o>-1&&(d={transform:`translateX(${c}) translateZ(0px)`}),d},barStyle(){let o={visibility:"hidden",width:`${this.barWidth}px`};return this.type==="line"&&(o.visibility="visible"),this.animated?o.transform=`translate3d(${this.barOffset}px, 0px, 0px)`:o.left=`${this.barOffset}px`,o},arrowType(){const o=this.globalConfig;let c="ios-close";return o&&(o.tabs.customCloseIcon?c="":o.tabs.closeIcon&&(c=o.tabs.closeIcon)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.tabs.customCloseIcon&&(c=o.tabs.customCloseIcon),c},arrowSize(){const o=this.globalConfig;let c="";return o&&o.tabs.closeIconSize&&(c=o.tabs.closeIconSize),c}},methods:{getTabs(){const o=this.paneList.map(d=>d.pane),c=[];return o.forEach(d=>{d.tab&&this.name?d.tab===this.name&&c.push(d):c.push(d)}),c.sort((d,C)=>{if(d.index&&C.index)return d.index>C.index?1:-1}),c},updateNav(){this.navList=[],this.getTabs().forEach((o,c)=>{this.navList.push({labelType:typeof o.label,label:o.label,icon:o.icon||"",name:o.currentName||c,disabled:o.disabled,closable:o.closable,contextMenu:o.contextMenu}),o.currentName||(o.currentName=c),c===0&&(this.activeKey||(this.activeKey=o.currentName||c))}),this.updateStatus(),this.updateBar()},updateBar(){t.nextTick(()=>{const o=this.getTabIndex(this.activeKey);if(!this.$refs.nav)return;const c=this.$refs.nav.querySelectorAll(`.${ar}-tab`),d=c[o];if(this.barWidth=d?parseFloat(d.offsetWidth):0,o>0){let C=0;const b=this.size==="small"?0:16;for(let m=0;m<o;m++)C+=parseFloat(c[m].offsetWidth)+b;this.barOffset=C}else this.barOffset=0;this.updateNavScroll()})},updateStatus(){this.getTabs().forEach(o=>o.show=o.currentName===this.activeKey||this.animated)},tabCls(o){return[`${ar}-tab`,{[`${ar}-tab-disabled`]:o.disabled,[`${ar}-tab-active`]:o.name===this.activeKey,[`${ar}-tab-focused`]:o.name===this.focusedKey}]},handleChange(o){if(this.transitioning)return;this.transitioning=!0,setTimeout(()=>this.transitioning=!1,vw);const c=this.navList[o];!c||c.disabled||(this.activeKey=c.name,this.$emit("update:modelValue",c.name),this.$emit("on-click",c.name))},handleDblclick(o){const c=this.navList[o];!c||c.disabled||this.$emit("on-dblclick",c.name)},handleContextmenu(o,c){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const d=this.navList[o];if(!d||d.disabled||!d.contextMenu)return;c.preventDefault();const C=this.$refs.tabsWrap.getBoundingClientRect(),b={left:`${c.clientX-C.left}px`,top:`${c.clientY-C.top}px`};this.contextMenuStyles=b,this.contextMenuVisible=!0,this.$emit("on-contextmenu",d,c,b)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handlePreventSelect(o,c){const d=this.navList[o];!d||d.disabled||!d.contextMenu||c.preventDefault()},handleTabKeyNavigation(o){if(o.keyCode!==37&&o.keyCode!==39)return;const c=o.keyCode===39?1:-1,d=EP(this.navList,this.focusedKey,c);this.focusedKey=d.name},handleTabKeyboardSelect(o=!1){if(o)return;const c=this.focusedKey||0,d=this.getTabIndex(c);this.handleChange(d)},handleRemove(o){if(!this.beforeRemove)return this.handleRemoveTab(o);const c=this.beforeRemove(o);c&&c.then?c.then(()=>{this.handleRemoveTab(o)}):this.handleRemoveTab(o)},handleRemoveTab(o){const c=this.getTabs(),d=c[o];if(d.currentName===this.activeKey){const C=this.getTabs();let b=-1;if(C.length){const m=c.filter((V,W)=>!V.disabled&&W<o),E=c.filter((V,W)=>!V.disabled&&W>o);E.length?b=E[0].currentName:m.length?b=m[m.length-1].currentName:b=C[0].currentName}this.activeKey=b,this.$emit("update:modelValue",b)}this.$emit("on-tab-remove",d.currentName),this.updateNav()},showClose(o){return this.type==="card"?o.closable!==null?o.closable:this.closable:!1},scrollPrev(){const o=this.$refs.navScroll.offsetWidth,c=this.getCurrentScrollOffset();if(!c)return;let d=c>o?c-o:0;this.setOffset(d)},scrollNext(){const o=this.$refs.nav.offsetWidth,c=this.$refs.navScroll.offsetWidth,d=this.getCurrentScrollOffset();if(o-d<=c)return;let C=o-d>c*2?d+c:o-c;this.setOffset(C)},getCurrentScrollOffset(){const{navStyle:o}=this;return o.transform?Number(o.transform.match(/translateX\(-(\d+(\.\d+)*)px\)/)[1]):0},getTabIndex(o){return this.navList.findIndex(c=>c.name===o)},setOffset(o){this.navStyle.transform=`translateX(-${o}px)`},scrollToActiveTab(){if(!this.scrollable)return;const o=this.$refs.nav,c=this.$el.querySelector(`.${ar}-tab-active`);if(!c)return;const d=this.$refs.navScroll,C=c.getBoundingClientRect(),b=d.getBoundingClientRect(),m=o.getBoundingClientRect(),E=this.getCurrentScrollOffset();let V=E;m.right<b.right&&(V=o.offsetWidth-b.width),C.left<b.left?V=E-(b.left-C.left):C.right>b.right&&(V=E+C.right-b.right),E!==V&&this.setOffset(Math.max(V,0))},updateNavScroll(){const o=this.$refs.nav.offsetWidth,c=this.$refs.navScroll.offsetWidth,d=this.getCurrentScrollOffset();c<o?(this.scrollable=!0,o-d<c&&this.setOffset(o-c)):(this.scrollable=!1,d>0&&this.setOffset(0))},handleScroll(o){o.preventDefault(),o.stopPropagation();const c=o.type;let d=0;(c==="DOMMouseScroll"||c==="mousewheel")&&(d=o.wheelDelta?o.wheelDelta:-(o.detail||0)*40),d>0?this.scrollPrev():this.scrollNext()},handleResize(){this.updateNavScroll()},isInsideHiddenElement(){if(!r)return;let o=this.$el.parentNode;for(;o&&o!==document.body;){if(o.style&&o.style.display==="none")return o;o=o.parentNode}return!1},updateVisibility(o){[...this.$refs.panes.querySelectorAll(`.${ar}-tabpane`)].forEach((c,d)=>{o===d?([...c.children].filter(C=>C.classList.contains(`${ar}-tabpane`)).forEach(C=>C.style.visibility="visible"),this.captureFocus&&setTimeout(()=>PP(c,c),vw)):setTimeout(()=>{[...c.children].filter(C=>C.classList.contains(`${ar}-tabpane`)).forEach(C=>C.style.visibility="hidden")},vw)})},handleDrag(o,c){const d=this.navList[o];d&&c.dataTransfer.setData("tab-name",d.name)},handleDrop(o,c){const d=this.navList[o];if(d){const C=c.dataTransfer.getData("tab-name");c.preventDefault();let b=this.navList.map(V=>V.name);const m=parseInt(b.findIndex(V=>V===C)),E=parseInt(b.findIndex(V=>V===d.name));b.splice(E,1,...b.splice(m,1,b[E])),this.$emit("on-drag-drop",C,d.name,m,E,b)}},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},watch:{modelValue(o){this.activeKey=o,this.focusedKey=o},activeKey(o){this.focusedKey=o,this.updateBar(),this.updateStatus(),this.tableList.forEach(d=>{d.table.handleOnVisibleChange(!0)}),t.nextTick(()=>{this.scrollToActiveTab()});const c=Math.max(this.getTabIndex(this.focusedKey),0);this.updateVisibility(c)}},mounted(){this.showSlot=this.$slots.extra!==void 0,this.observer=Wu(),this.observer.listenTo(this.$refs.navWrap,this.handleResize);const o=this.isInsideHiddenElement();o&&(this.mutationObserver=new M(()=>{o.style.display!=="none"&&(this.updateBar(),this.mutationObserver.disconnect())}),this.mutationObserver.observe(o,{attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]})),this.handleTabKeyboardSelect(!0),this.updateVisibility(this.getTabIndex(this.activeKey))},beforeUnmount(){this.observer.removeListener(this.$refs.navWrap,this.handleResize),this.mutationObserver&&this.mutationObserver.disconnect()}},yq=["onClick","onDblclick","onContextmenu","onSelectstart","draggable","onDragstart","onDrop"];function bq(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Render"),W=t.resolveComponent("DropdownMenu"),z=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),ref:"tabsWrap"},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-bar"])},[b.showSlot?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-nav-right"])},[t.renderSlot(o.$slots,"extra")],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-nav-container"]),tabindex:"0",ref:"navContainer",onKeydown:[c[5]||(c[5]=(...G)=>m.handleTabKeyNavigation&&m.handleTabKeyNavigation(...G)),c[6]||(c[6]=t.withKeys(t.withModifiers(G=>m.handleTabKeyboardSelect(!1),["prevent"]),["space"]))]},[t.createElementVNode("div",{ref:"navWrap",class:t.normalizeClass([b.prefixCls+"-nav-wrap",b.scrollable?b.prefixCls+"-nav-scrollable":""])},[t.createElementVNode("span",{class:t.normalizeClass([b.prefixCls+"-nav-prev",b.scrollable?"":b.prefixCls+"-nav-scroll-disabled"]),onClick:c[0]||(c[0]=(...G)=>m.scrollPrev&&m.scrollPrev(...G))},[t.createVNode(E,{type:"ios-arrow-back"})],2),t.createElementVNode("span",{class:t.normalizeClass([b.prefixCls+"-nav-next",b.scrollable?"":b.prefixCls+"-nav-scroll-disabled"]),onClick:c[1]||(c[1]=(...G)=>m.scrollNext&&m.scrollNext(...G))},[t.createVNode(E,{type:"ios-arrow-forward"})],2),t.createElementVNode("div",{ref:"navScroll",class:t.normalizeClass([b.prefixCls+"-nav-scroll"]),"on:DOMMouseScroll":c[3]||(c[3]=(...G)=>m.handleScroll&&m.handleScroll(...G)),onMousewheel:c[4]||(c[4]=(...G)=>m.handleScroll&&m.handleScroll(...G))},[t.createElementVNode("div",{ref:"nav",class:t.normalizeClass([b.prefixCls+"-nav"]),style:t.normalizeStyle(b.navStyle)},[t.createElementVNode("div",{class:t.normalizeClass(m.barClasses),style:t.normalizeStyle(m.barStyle)},null,6),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.navList,(G,ae)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.tabCls(G)),key:ae,onClick:xe=>m.handleChange(ae),onDblclick:xe=>m.handleDblclick(ae),onContextmenu:t.withModifiers(xe=>m.handleContextmenu(ae,xe),["stop"]),onSelectstart:t.withModifiers(xe=>m.handlePreventSelect(ae,xe),["stop"]),draggable:d.draggable,onDragstart:xe=>m.handleDrag(ae,xe),onDrop:xe=>m.handleDrop(ae,xe),onDragover:c[2]||(c[2]=t.withModifiers(()=>{},["prevent"]))},[G.icon!==""?(t.openBlock(),t.createBlock(E,{key:0,type:G.icon},null,8,["type"])):t.createCommentVNode("",!0),G.labelType==="function"?(t.openBlock(),t.createBlock(V,{key:1,render:G.label},null,8,["render"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[t.createTextVNode(t.toDisplayString(G.label),1)],64)),m.showClose(G)?(t.openBlock(),t.createBlock(E,{key:3,class:t.normalizeClass([b.prefixCls+"-close"]),type:m.arrowType,custom:m.customArrowType,size:m.arrowSize,onClick:t.withModifiers(xe=>m.handleRemove(ae),["stop"])},null,8,["class","type","custom","size","onClick"])):t.createCommentVNode("",!0)],42,yq))),128))],6)],34)],2)],34)],2),t.createElementVNode("div",{class:t.normalizeClass(m.contentClasses),style:t.normalizeStyle(m.contentStyle),ref:"panes"},[t.renderSlot(o.$slots,"default")],6),t.createElementVNode("div",{class:"ivu-tabs-context-menu",style:t.normalizeStyle(b.contextMenuStyles)},[t.createVNode(z,{trigger:"custom",visible:b.contextMenuVisible,transfer:"",onOnClick:m.handleClickDropdownItem,onOnClickoutside:m.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(W,null,{default:t.withCtx(()=>[t.renderSlot(o.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var Av=l(vq,[["render",bq]]);const Oq={name:"Notification",components:{Dropdown:hh,DropdownMenu:uh,Badge:Z0,Tabs:Av},emits:["on-visible-change","on-item-click","on-clear","on-load-more","on-tab-change"],provide(){return{NotificationInstance:this}},props:{count:{type:Number},autoCount:{type:Boolean,default:!1},countType:{validator(o){return _(o,["text","badge"])},default:"text"},icon:{type:String,default:"md-notifications-outline"},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},badgeProps:{type:Object,default(){return{}}},clearClose:{type:Boolean,default:!1},locale:{type:Object,default(){return{loadedAll:"加载完毕",loading:"加载中...",loadMore:"加载更多",clear:"清空"}}},tab:{type:String},wide:{type:Boolean,default:!1},transferClassName:{type:String}},data(){return{visible:!1,countAll:0,tabList:[]}},computed:{finalCount(){return this.autoCount?this.countAll:this.count},transferClasses(){let o="ivu-notifications-transfer";return this.transferClassName&&(o+=` ${this.transferClassName}`),o}},watch:{visible(o){this.$emit("on-visible-change",o)}},methods:{handleVisibleChange(o){this.visible=o},handleClickOutside(o){this.$refs.notice.contains(o.target)||(this.visible=!1)},handleToggleOpen(){this.visible=!this.visible},handleGetCountAll(){if(this.autoCount){const o=this.tabList.map(d=>d.tab);let c=0;o.forEach(d=>{d.count&&(c+=d.count)}),this.countAll=c}},handleItemClick(o,c){this.$emit("on-item-click",o,c)},handleClear(o){this.$emit("on-clear",o),this.clearClose&&this.handleClose()},handleLoadMore(o){this.$emit("on-load-more",o)},handleClose(){this.visible=!1},handleTabChange(o){const c=this.tabList.map(C=>C.tab);let d={};c.forEach(C=>{C.$refs.tab.currentName===o&&(d=C.handleGetTabBaseInfo())}),this.$emit("on-tab-change",d)}}},xq={class:"ivu-notifications",ref:"notice"},wq={class:"ivu-notifications-tabs"},_q={key:0,class:"ivu-notifications-extra"};function Sq(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Badge"),W=t.resolveComponent("Tabs"),z=t.resolveComponent("DropdownMenu"),G=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",xq,[t.createVNode(G,{trigger:"custom",visible:b.visible,transfer:d.transfer,placement:d.placement,"transfer-class-name":m.transferClasses,onOnVisibleChange:m.handleVisibleChange,onOnClickoutside:m.handleClickOutside},{list:t.withCtx(()=>[o.$slots.default?(t.openBlock(),t.createBlock(z,{key:0,onClick:c[1]||(c[1]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(["ivu-notifications-list",{"ivu-notifications-list-wide":d.wide}])},[t.createElementVNode("div",wq,[t.createVNode(W,{animated:!1,"model-value":d.tab,onOnClick:m.handleTabChange},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"default")]),_:3},8,["model-value","onOnClick"])])],2),o.$slots.extra?(t.openBlock(),t.createElementBlock("div",_q,[t.renderSlot(o.$slots,"extra")])):t.createCommentVNode("",!0)]),_:3})):t.createCommentVNode("",!0)]),default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-notifications-rel",onClick:c[0]||(c[0]=t.withModifiers((...ae)=>m.handleToggleOpen&&m.handleToggleOpen(...ae),["prevent","stop"]))},[t.createVNode(V,t.mergeProps({count:m.finalCount},d.badgeProps),{default:t.withCtx(()=>[t.renderSlot(o.$slots,"icon",{},()=>[t.createVNode(E,{type:d.icon,size:"24"},null,8,["type"])])]),_:3},16,["count"])])]),_:3},8,["visible","transfer","placement","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],512)}var AP=l(Oq,[["render",Sq]]);const Cq=(o,c)=>o<=c,Tp=o=>o<10?"0"+o:o,RP=(o,c)=>{const d=new Date(o),C=d.getFullYear(),b=Tp(d.getMonth()+1),m=Tp(d.getDate()),E=Tp(d.getHours()),V=Tp(d.getMinutes()),W=Tp(d.getSeconds());let z="";return c==="year"?z=C+"-"+b+"-"+m+" "+E+":"+V+":"+W:z=b+"-"+m+" "+E+":"+V,z},kq=(o,c)=>{const d=new Date().getTime(),C=Cq(o,d);let b=d-o;C||(b=-b);let m="",E=C?c("i.time.before")||"前":c("i.time.after")||"后";return b<1e3?m=c("i.time.just")||"刚刚":b<6e4?m=parseInt(b/1e3)+(c("i.time.seconds")||"秒")+E:b>=6e4&&b<36e5?m=Math.floor(b/6e4)+(c("i.time.minutes")||"分钟")+E:b>=36e5&&b<864e5?m=Math.floor(b/36e5)+(c("i.time.hours")||"小时")+E:b>=864e5&&b<262386e4?m=Math.floor(b/864e5)+(c("i.time.days")||"天")+E:b>=262386e4&&b<=3156786e4&&C?m=RP(o):m=RP(o,"year"),m};function Tq(o,c){return kq(o,c)}const IP="ivu-time",Mq={name:"Time",mixins:[Qn],props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(o){return _(o,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},computed:{classes(){return[`${IP}`,{[`${IP}-with-hash`]:this.hash}]}},watch:{time(){this.setTime()}},methods:{handleClick(){r&&this.hash!==""&&(window.location.hash=this.hash)},setTime(){const o=typeof this.time;let c;if(o==="number"){const d=this.time.toString().length>10?this.time:this.time*1e3;c=new Date(d).getTime()}else o==="object"?c=this.time.getTime():o==="string"&&(c=Ds(this.time).valueOf());if(this.type==="relative")this.date=Tq(c,this.t);else{const d=new Date(this.time),C=d.getFullYear(),b=d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1,m=d.getDate()<10?"0"+d.getDate():d.getDate(),E=d.getHours()<10?"0"+d.getHours():d.getHours(),V=d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes(),W=d.getSeconds()<10?"0"+d.getSeconds():d.getSeconds();this.type==="datetime"?this.date=`${C}-${b}-${m} ${E}:${V}:${W}`:this.type==="date"&&(this.date=`${C}-${b}-${m}`)}}},mounted(){this.setTime(),this.interval!==0&&(this.timer=setInterval(()=>{this.setTime()},1e3*this.interval))},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function Eq(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(m.classes),onClick:c[0]||(c[0]=(...E)=>m.handleClick&&m.handleClick(...E))},t.toDisplayString(b.date),3)}var Rv=l(Mq,[["render",Eq]]);const Pq={name:"NotificationItem",inject:["NotificationTabInstance","NotificationInstance"],components:{Row:Nl,Col:ia,Avatar:Jf,Tag:Lu,Time:Rv},emits:["on-item-click"],props:{rowProps:{type:Object,default(){return{type:"flex",justify:"center",align:"middle"}}},read:{type:[Boolean,Number],default:!1},icon:{type:String},customIcon:{type:String},iconColor:{type:String},iconSize:{validator(o){return _(o,["small","default","large"])},default:"default"},avatar:{type:String},avatarShape:{validator(o){return _(o,["circle","square"])},default:"circle"},title:{type:String},content:{type:String},time:{type:[Number,Date,String]},timeProps:{type:Object,default(){return{}}},tag:{type:String},tagProps:{type:Object,default(){return{}}},clickClose:{type:Boolean,default:!1}},data(){return{id:te(6)}},computed:{classes(){return{"ivu-notifications-item-unread":this.read===!1||this.read===0}},contentSpan(){return this.icon||this.customIcon||this.avatar||this.$slots.avatar?20:24},iconStyle(){let o={};return this.iconColor&&(o={"background-color":this.iconColor}),o}},methods:{handleClick(){this.$emit("on-item-click",this.$attrs),this.NotificationTabInstance.handleItemClick(this.$attrs),this.clickClose&&this.NotificationInstance.handleClose()},addItem(){this.NotificationTabInstance.itemList.push({id:this.id,item:this})},removeItem(){const o=this.NotificationTabInstance,c=o.itemList.findIndex(d=>d.id===this.id);o.itemList.splice(c,1)}},mounted(){this.addItem(),this.NotificationTabInstance.handleGetItems()},unmounted(){this.NotificationTabInstance.handleGetItems()},beforeUnmount(){this.removeItem()}},Aq={class:"ivu-notifications-item-title"},Rq={key:0},Iq={key:0,class:"ivu-notifications-item-tag"},Dq={key:0,class:"ivu-notifications-item-desc"},Nq={key:1,class:"ivu-notifications-item-time"};function $q(o,c,d,C,b,m){const E=t.resolveComponent("Avatar"),V=t.resolveComponent("Col"),W=t.resolveComponent("Tag"),z=t.resolveComponent("Time"),G=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-notifications-item",m.classes]),onClick:c[0]||(c[0]=(...ae)=>m.handleClick&&m.handleClick(...ae))},[t.renderSlot(o.$slots,"default",{},()=>[t.createVNode(G,t.normalizeProps(t.guardReactiveProps(d.rowProps)),{default:t.withCtx(()=>[d.icon||d.customIcon||d.avatar||o.$slots.avatar?(t.openBlock(),t.createBlock(V,{key:0,span:"4",class:"ivu-notifications-item-icon"},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"avatar",{},()=>[d.icon?(t.openBlock(),t.createBlock(E,{key:0,icon:d.icon,shape:d.avatarShape,size:d.iconSize,style:t.normalizeStyle(m.iconStyle)},null,8,["icon","shape","size","style"])):d.customIcon?(t.openBlock(),t.createBlock(E,{key:1,"custom-icon":d.customIcon,shape:d.avatarShape,size:d.iconSize,style:t.normalizeStyle(m.iconStyle)},null,8,["custom-icon","shape","size","style"])):d.avatar?(t.openBlock(),t.createBlock(E,{key:2,src:d.avatar,shape:d.avatarShape,size:d.iconSize,style:t.normalizeStyle(m.iconStyle)},null,8,["src","shape","size","style"])):t.createCommentVNode("",!0)])]),_:3})):t.createCommentVNode("",!0),t.createVNode(V,{span:m.contentSpan,class:"ivu-notifications-item-content"},{default:t.withCtx(()=>[t.createElementVNode("div",Aq,[d.title||o.$slots.title?(t.openBlock(),t.createElementBlock("h4",Rq,[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)]),d.tag?(t.openBlock(),t.createElementBlock("div",Iq,[t.createVNode(W,t.normalizeProps(t.guardReactiveProps(d.tagProps)),{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.tag),1)]),_:1},16)])):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0)]),d.content||o.$slots.content?(t.openBlock(),t.createElementBlock("div",Dq,[t.renderSlot(o.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(d.content),1)])])):t.createCommentVNode("",!0),d.time||o.$slots.time?(t.openBlock(),t.createElementBlock("div",Nq,[t.renderSlot(o.$slots,"time",{},()=>[t.createVNode(z,t.mergeProps({time:d.time},d.timeProps),null,16,["time"])])])):t.createCommentVNode("",!0)]),_:3},8,["span"])]),_:3},16)])],2)}var DP=l(Pq,[["render",$q]]);const Vq="ivu-tabs-tabpane",Lq={name:"TabPane",inject:["TabsInstance"],props:{name:{type:String},label:{type:[String,Function],default:""},icon:{type:String},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:null},tab:{type:String},index:{type:Number},contextMenu:{type:Boolean,default:!1}},data(){return{prefixCls:Vq,show:!0,currentName:this.name,id:te(6)}},computed:{contentStyle(){return{visibility:this.TabsInstance.activeKey!==this.currentName?"hidden":"visible"}}},methods:{updateNav(){this.TabsInstance.updateNav()},addPane(){const o=this.TabsInstance;o.paneList||(o.paneList=[]),o.paneList.push({id:this.id,pane:this})},removePane(){const o=this.TabsInstance;if(o.paneList&&o.paneList.length){const c=o.paneList.findIndex(d=>d.id===this.id);o.paneList.splice(c,1)}}},watch:{name(o){this.currentName=o,this.updateNav()},label(o){typeof o!="function"&&this.updateNav()},icon(){this.updateNav()},disabled(){this.updateNav()}},mounted(){this.addPane(),this.updateNav()},beforeUnmount(){this.removePane(),this.updateNav()}};function Bq(o,c,d,C,b,m){return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(b.prefixCls),style:t.normalizeStyle(m.contentStyle)},[t.renderSlot(o.$slots,"default")],6)),[[t.vShow,b.show]])}var Iv=l(Lq,[["render",Bq]]);const Uq={name:"NotificationTab",inject:["NotificationInstance"],components:{TabPane:Iv,Icon:S},provide(){return{NotificationTabInstance:this}},props:{count:{type:Number},title:{type:String,required:!0},name:{type:String},emptyText:{type:String,default:"目前没有通知"},emptyImage:{type:String,default:"https://file.iviewui.com/iview-pro/icon-no-message.svg"},loadedAll:{type:Boolean,default:!0},showLoadedAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},scrollToLoad:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearIcon:{type:Boolean,default:!0}},data(){return{customLabel:o=>o("div",[o("span",this.title),o(Z0,{count:this.count})]),itemCount:0,itemList:[],id:te(6)}},computed:{currentTitle(){const o=this.NotificationInstance.countType;if(o==="text"){const c=this.count?`(${this.count})`:"";return`${this.title} ${c}`}else if(o==="badge")return this.customLabel}},watch:{count:{handler(){this.NotificationInstance.handleGetCountAll()},immediate:!0}},methods:{handleGetTabBaseInfo(){return{name:this.name,title:this.title}},handleGetItems(){const o=this.itemList.map(c=>c.item);this.itemCount=o.length},handleItemClick(o){this.NotificationInstance.handleItemClick(this.handleGetTabBaseInfo(),o)},handleClear(){this.NotificationInstance.handleClear(this.handleGetTabBaseInfo())},handleLoadMore(){this.NotificationInstance.handleLoadMore(this.handleGetTabBaseInfo())},handleScroll(){if(!this.scrollToLoad)return;const o=this.$refs.scroll,c=o.scrollHeight-o.clientHeight-o.scrollTop;!this.loading&&c===0&&this.handleLoadMore()},addTab(){this.NotificationInstance.tabList.push({id:this.id,tab:this})},removeTab(){const o=this.NotificationInstance,c=o.tabList.findIndex(d=>d.id===this.id);o.tabList.splice(c,1)}},mounted(){this.addTab()},beforeUnmount(){this.removeTab()}},zq={class:"ivu-notifications-container-list"},Fq={key:0,class:"ivu-notifications-tab-empty"},Xq=["src"],Wq={class:"ivu-notifications-tab-empty-text"},Qq={class:"ivu-notifications-tab-loading"},Hq={key:0,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-show"},Gq={key:2,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-all"};function Yq(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("TabPane");return t.openBlock(),t.createBlock(V,{label:m.currentTitle,name:d.name,ref:"tab",class:"ivu-notifications-tab"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-notifications-container",onScroll:c[1]||(c[1]=(...W)=>m.handleScroll&&m.handleScroll(...W)),ref:"scroll"},[t.renderSlot(o.$slots,"top"),t.createElementVNode("div",zq,[t.renderSlot(o.$slots,"default")]),!d.loading&&b.itemCount===0?(t.openBlock(),t.createElementBlock("div",Fq,[t.renderSlot(o.$slots,"empty",{},()=>[d.emptyImage?(t.openBlock(),t.createElementBlock("img",{key:0,class:"ivu-notifications-tab-empty-img",src:d.emptyImage},null,8,Xq)):t.createCommentVNode("",!0),t.createElementVNode("div",Wq,t.toDisplayString(d.emptyText),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",Qq,[d.loading?(t.openBlock(),t.createElementBlock("div",Hq,[t.renderSlot(o.$slots,"loading",{},()=>[t.createVNode(E,{type:"ios-loading",class:"ivu-load-loop"}),t.createTextVNode(" "+t.toDisplayString(m.NotificationInstance.locale.loading),1)])])):d.loadedAll?d.showLoadedAll&&d.loadedAll?(t.openBlock(),t.createElementBlock("div",Gq,[t.renderSlot(o.$slots,"loaded-all",{},()=>[t.createTextVNode(t.toDisplayString(m.NotificationInstance.locale.loadedAll),1)])])):t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-more",onClick:c[0]||(c[0]=(...W)=>m.handleLoadMore&&m.handleLoadMore(...W))},[t.renderSlot(o.$slots,"load-more",{},()=>[t.createTextVNode(t.toDisplayString(m.NotificationInstance.locale.loadMore),1)])]))])],544),d.showClear&&b.itemCount!==0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-notifications-tab-clear",onClick:c[2]||(c[2]=(...W)=>m.handleClear&&m.handleClear(...W))},[t.renderSlot(o.$slots,"clear",{},()=>[d.showClearIcon?(t.openBlock(),t.createBlock(E,{key:0,type:"md-done-all"})):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(m.NotificationInstance.locale.clear)+t.toDisplayString(d.title),1)])])):t.createCommentVNode("",!0)]),_:3},8,["label","name"])}var NP=l(Uq,[["render",Yq]]);const jq={name:"Trend",components:{Icon:S},props:{flag:{validator(o){return _(o,["up","down"])}},colorful:{type:Boolean,default:!0},reverseColor:{type:Boolean,default:!1},textColor:{type:Boolean,default:!1},showTitle:{type:[Boolean,String],default:!1}},computed:{classes(){return[{"ivu-trend-up":this.flag==="up","ivu-trend-down":this.flag==="down","ivu-trend-reverse-color":this.reverseColor,"ivu-trend-colorful":this.colorful,"ivu-trend-text-color":this.textColor}]},flagType(){return this.flag==="up"?"md-arrow-dropup":this.flag==="down"?"md-arrow-dropdown":""}}},qq={class:"ivu-trend-text"};function Zq(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-trend",m.classes])},[t.createElementVNode("span",qq,[t.renderSlot(o.$slots,"default")]),t.createVNode(E,{type:m.flagType,class:"ivu-trend-flag"},null,8,["type"])],2)}var yw=l(jq,[["render",Zq]]);const Kq={name:"NumberInfo",components:{Trend:yw},props:{title:{type:String},subTitle:{type:String},total:{type:[String,Number]},subTotal:{type:[String,Number]},status:{validator(o){return _(o,["up","down"])}},gap:{type:[String,Number],default:8}},computed:{valueStyle(){return{"margin-top":this.gap+"px"}}}},Jq={class:"ivu-number-info"},eZ={key:0,class:"ivu-number-info-title"},tZ={key:1,class:"ivu-number-info-subTitle"},nZ={class:"ivu-number-info-total"},iZ={key:0,class:"ivu-number-info-subTotal"};function rZ(o,c,d,C,b,m){const E=t.resolveComponent("Trend");return t.openBlock(),t.createElementBlock("div",Jq,[d.title||o.$slots.title?(t.openBlock(),t.createElementBlock("div",eZ,[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])])):t.createCommentVNode("",!0),d.subTitle||o.$slots.subTitle?(t.openBlock(),t.createElementBlock("div",tZ,[t.renderSlot(o.$slots,"subTitle",{},()=>[t.createTextVNode(t.toDisplayString(d.subTitle),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"ivu-number-info-value",style:t.normalizeStyle(m.valueStyle)},[t.createElementVNode("span",nZ,[t.renderSlot(o.$slots,"total",{},()=>[t.createTextVNode(t.toDisplayString(d.total),1)])]),d.subTotal||o.$slots.subTotal?(t.openBlock(),t.createElementBlock("span",iZ,[t.renderSlot(o.$slots,"subTotal",{},()=>[t.createVNode(E,{flag:d.status},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d.subTotal),1)]),_:1},8,["flag"])])])):t.createCommentVNode("",!0)],4)])}var $P=l(Kq,[["render",rZ]]),VP={exports:{}};/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(o){(function(c,d){o.exports?o.exports=d():c.numeral=d()})(J,function(){var c,d,C="2.0.6",b={},m={},E={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},V={currentLocale:E.currentLocale,zeroFormat:E.zeroFormat,nullFormat:E.nullFormat,defaultFormat:E.defaultFormat,scalePercentBy100:E.scalePercentBy100};function W(z,G){this._input=z,this._value=G}return c=function(z){var G,ae,xe,Oe;if(c.isNumeral(z))G=z.value();else if(z===0||typeof z>"u")G=0;else if(z===null||d.isNaN(z))G=null;else if(typeof z=="string")if(V.zeroFormat&&z===V.zeroFormat)G=0;else if(V.nullFormat&&z===V.nullFormat||!z.replace(/[^0-9]+/g,"").length)G=null;else{for(ae in b)if(Oe=typeof b[ae].regexps.unformat=="function"?b[ae].regexps.unformat():b[ae].regexps.unformat,Oe&&z.match(Oe)){xe=b[ae].unformat;break}xe=xe||c._.stringToNumber,G=xe(z)}else G=Number(z)||null;return new W(z,G)},c.version=C,c.isNumeral=function(z){return z instanceof W},c._=d={numberToFormat:function(z,G,ae){var xe=m[c.options.currentLocale],Oe=!1,ve=!1,se=0,Pe="",$t=1e12,mt=1e9,Ot=1e6,He=1e3,De="",Ke=!1,Ye,zt,Ft,Mt,xt,At,Wt;if(z=z||0,zt=Math.abs(z),c._.includes(G,"(")?(Oe=!0,G=G.replace(/[\(|\)]/g,"")):(c._.includes(G,"+")||c._.includes(G,"-"))&&(xt=c._.includes(G,"+")?G.indexOf("+"):z<0?G.indexOf("-"):-1,G=G.replace(/[\+|\-]/g,"")),c._.includes(G,"a")&&(Ye=G.match(/a(k|m|b|t)?/),Ye=Ye?Ye[1]:!1,c._.includes(G," a")&&(Pe=" "),G=G.replace(new RegExp(Pe+"a[kmbt]?"),""),zt>=$t&&!Ye||Ye==="t"?(Pe+=xe.abbreviations.trillion,z=z/$t):zt<$t&&zt>=mt&&!Ye||Ye==="b"?(Pe+=xe.abbreviations.billion,z=z/mt):zt<mt&&zt>=Ot&&!Ye||Ye==="m"?(Pe+=xe.abbreviations.million,z=z/Ot):(zt<Ot&&zt>=He&&!Ye||Ye==="k")&&(Pe+=xe.abbreviations.thousand,z=z/He)),c._.includes(G,"[.]")&&(ve=!0,G=G.replace("[.]",".")),Ft=z.toString().split(".")[0],Mt=G.split(".")[1],At=G.indexOf(","),se=(G.split(".")[0].split(",")[0].match(/0/g)||[]).length,Mt?(c._.includes(Mt,"[")?(Mt=Mt.replace("]",""),Mt=Mt.split("["),De=c._.toFixed(z,Mt[0].length+Mt[1].length,ae,Mt[1].length)):De=c._.toFixed(z,Mt.length,ae),Ft=De.split(".")[0],c._.includes(De,".")?De=xe.delimiters.decimal+De.split(".")[1]:De="",ve&&Number(De.slice(1))===0&&(De="")):Ft=c._.toFixed(z,0,ae),Pe&&!Ye&&Number(Ft)>=1e3&&Pe!==xe.abbreviations.trillion)switch(Ft=String(Number(Ft)/1e3),Pe){case xe.abbreviations.thousand:Pe=xe.abbreviations.million;break;case xe.abbreviations.million:Pe=xe.abbreviations.billion;break;case xe.abbreviations.billion:Pe=xe.abbreviations.trillion;break}if(c._.includes(Ft,"-")&&(Ft=Ft.slice(1),Ke=!0),Ft.length<se)for(var Et=se-Ft.length;Et>0;Et--)Ft="0"+Ft;return At>-1&&(Ft=Ft.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+xe.delimiters.thousands)),G.indexOf(".")===0&&(Ft=""),Wt=Ft+De+(Pe||""),Oe?Wt=(Oe&&Ke?"(":"")+Wt+(Oe&&Ke?")":""):xt>=0?Wt=xt===0?(Ke?"-":"+")+Wt:Wt+(Ke?"-":"+"):Ke&&(Wt="-"+Wt),Wt},stringToNumber:function(z){var G=m[V.currentLocale],ae=z,xe={thousand:3,million:6,billion:9,trillion:12},Oe,ve,se;if(V.zeroFormat&&z===V.zeroFormat)ve=0;else if(V.nullFormat&&z===V.nullFormat||!z.replace(/[^0-9]+/g,"").length)ve=null;else{ve=1,G.delimiters.decimal!=="."&&(z=z.replace(/\./g,"").replace(G.delimiters.decimal,"."));for(Oe in xe)if(se=new RegExp("[^a-zA-Z]"+G.abbreviations[Oe]+"(?:\\)|(\\"+G.currency.symbol+")?(?:\\))?)?$"),ae.match(se)){ve*=Math.pow(10,xe[Oe]);break}ve*=(z.split("-").length+Math.min(z.split("(").length-1,z.split(")").length-1))%2?1:-1,z=z.replace(/[^0-9\.]+/g,""),ve*=Number(z)}return ve},isNaN:function(z){return typeof z=="number"&&isNaN(z)},includes:function(z,G){return z.indexOf(G)!==-1},insert:function(z,G,ae){return z.slice(0,ae)+G+z.slice(ae)},reduce:function(z,G){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof G!="function")throw new TypeError(G+" is not a function");var ae=Object(z),xe=ae.length>>>0,Oe=0,ve;if(arguments.length===3)ve=arguments[2];else{for(;Oe<xe&&!(Oe in ae);)Oe++;if(Oe>=xe)throw new TypeError("Reduce of empty array with no initial value");ve=ae[Oe++]}for(;Oe<xe;Oe++)Oe in ae&&(ve=G(ve,ae[Oe],Oe,ae));return ve},multiplier:function(z){var G=z.toString().split(".");return G.length<2?1:Math.pow(10,G[1].length)},correctionFactor:function(){var z=Array.prototype.slice.call(arguments);return z.reduce(function(G,ae){var xe=d.multiplier(ae);return G>xe?G:xe},1)},toFixed:function(z,G,ae,xe){var Oe=z.toString().split("."),ve=G-(xe||0),se,Pe,$t,mt;return Oe.length===2?se=Math.min(Math.max(Oe[1].length,ve),G):se=ve,$t=Math.pow(10,se),mt=(ae(z+"e+"+se)/$t).toFixed(se),xe>G-se&&(Pe=new RegExp("\\.?0{1,"+(xe-(G-se))+"}$"),mt=mt.replace(Pe,"")),mt}},c.options=V,c.formats=b,c.locales=m,c.locale=function(z){return z&&(V.currentLocale=z.toLowerCase()),V.currentLocale},c.localeData=function(z){if(!z)return m[V.currentLocale];if(z=z.toLowerCase(),!m[z])throw new Error("Unknown locale : "+z);return m[z]},c.reset=function(){for(var z in E)V[z]=E[z]},c.zeroFormat=function(z){V.zeroFormat=typeof z=="string"?z:null},c.nullFormat=function(z){V.nullFormat=typeof z=="string"?z:null},c.defaultFormat=function(z){V.defaultFormat=typeof z=="string"?z:"0.0"},c.register=function(z,G,ae){if(G=G.toLowerCase(),this[z+"s"][G])throw new TypeError(G+" "+z+" already registered.");return this[z+"s"][G]=ae,ae},c.validate=function(z,G){var ae,xe,Oe,ve,se,Pe,$t,mt;if(typeof z!="string"&&(z+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",z)),z=z.trim(),z.match(/^\d+$/))return!0;if(z==="")return!1;try{$t=c.localeData(G)}catch{$t=c.localeData(c.locale())}return Oe=$t.currency.symbol,se=$t.abbreviations,ae=$t.delimiters.decimal,$t.delimiters.thousands==="."?xe="\\.":xe=$t.delimiters.thousands,mt=z.match(/^[^\d]+/),mt!==null&&(z=z.substr(1),mt[0]!==Oe)||(mt=z.match(/[^\d]+$/),mt!==null&&(z=z.slice(0,-1),mt[0]!==se.thousand&&mt[0]!==se.million&&mt[0]!==se.billion&&mt[0]!==se.trillion))?!1:(Pe=new RegExp(xe+"{2}"),z.match(/[^\d.,]/g)?!1:(ve=z.split(ae),ve.length>2?!1:ve.length<2?!!ve[0].match(/^\d+.*\d$/)&&!ve[0].match(Pe):ve[0].length===1?!!ve[0].match(/^\d+$/)&&!ve[0].match(Pe)&&!!ve[1].match(/^\d+$/):!!ve[0].match(/^\d+.*\d$/)&&!ve[0].match(Pe)&&!!ve[1].match(/^\d+$/)))},c.fn=W.prototype={clone:function(){return c(this)},format:function(z,G){var ae=this._value,xe=z||V.defaultFormat,Oe,ve,se;if(G=G||Math.round,ae===0&&V.zeroFormat!==null)ve=V.zeroFormat;else if(ae===null&&V.nullFormat!==null)ve=V.nullFormat;else{for(Oe in b)if(xe.match(b[Oe].regexps.format)){se=b[Oe].format;break}se=se||c._.numberToFormat,ve=se(ae,xe,G)}return ve},value:function(){return this._value},input:function(){return this._input},set:function(z){return this._value=Number(z),this},add:function(z){var G=d.correctionFactor.call(null,this._value,z);function ae(xe,Oe,ve,se){return xe+Math.round(G*Oe)}return this._value=d.reduce([this._value,z],ae,0)/G,this},subtract:function(z){var G=d.correctionFactor.call(null,this._value,z);function ae(xe,Oe,ve,se){return xe-Math.round(G*Oe)}return this._value=d.reduce([z],ae,Math.round(this._value*G))/G,this},multiply:function(z){function G(ae,xe,Oe,ve){var se=d.correctionFactor(ae,xe);return Math.round(ae*se)*Math.round(xe*se)/Math.round(se*se)}return this._value=d.reduce([this._value,z],G,1),this},divide:function(z){function G(ae,xe,Oe,ve){var se=d.correctionFactor(ae,xe);return Math.round(ae*se)/Math.round(xe*se)}return this._value=d.reduce([this._value,z],G),this},difference:function(z){return Math.abs(c(this._value).subtract(z).value())}},c.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(z){var G=z%10;return~~(z%100/10)===1?"th":G===1?"st":G===2?"nd":G===3?"rd":"th"},currency:{symbol:"$"}}),function(){c.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(z,G,ae){var xe=c._.includes(G," BPS")?" ":"",Oe;return z=z*1e4,G=G.replace(/\s?BPS/,""),Oe=c._.numberToFormat(z,G,ae),c._.includes(Oe,")")?(Oe=Oe.split(""),Oe.splice(-1,0,xe+"BPS"),Oe=Oe.join("")):Oe=Oe+xe+"BPS",Oe},unformat:function(z){return+(c._.stringToNumber(z)*1e-4).toFixed(15)}})}(),function(){var z={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},G={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},ae=z.suffixes.concat(G.suffixes.filter(function(Oe){return z.suffixes.indexOf(Oe)<0})),xe=ae.join("|");xe="("+xe.replace("B","B(?!PS)")+")",c.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(xe)},format:function(Oe,ve,se){var Pe,$t=c._.includes(ve,"ib")?G:z,mt=c._.includes(ve," b")||c._.includes(ve," ib")?" ":"",Ot,He,De;for(ve=ve.replace(/\s?i?b/,""),Ot=0;Ot<=$t.suffixes.length;Ot++)if(He=Math.pow($t.base,Ot),De=Math.pow($t.base,Ot+1),Oe===null||Oe===0||Oe>=He&&Oe<De){mt+=$t.suffixes[Ot],He>0&&(Oe=Oe/He);break}return Pe=c._.numberToFormat(Oe,ve,se),Pe+mt},unformat:function(Oe){var ve=c._.stringToNumber(Oe),se,Pe;if(ve){for(se=z.suffixes.length-1;se>=0;se--){if(c._.includes(Oe,z.suffixes[se])){Pe=Math.pow(z.base,se);break}if(c._.includes(Oe,G.suffixes[se])){Pe=Math.pow(G.base,se);break}}ve*=Pe||1}return ve}})}(),function(){c.register("format","currency",{regexps:{format:/(\$)/},format:function(z,G,ae){var xe=c.locales[c.options.currentLocale],Oe={before:G.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:G.match(/([\+|\-|\)|\s|\$]*)$/)[0]},ve,se,Pe;for(G=G.replace(/\s?\$\s?/,""),ve=c._.numberToFormat(z,G,ae),z>=0?(Oe.before=Oe.before.replace(/[\-\(]/,""),Oe.after=Oe.after.replace(/[\-\)]/,"")):z<0&&!c._.includes(Oe.before,"-")&&!c._.includes(Oe.before,"(")&&(Oe.before="-"+Oe.before),Pe=0;Pe<Oe.before.length;Pe++)switch(se=Oe.before[Pe],se){case"$":ve=c._.insert(ve,xe.currency.symbol,Pe);break;case" ":ve=c._.insert(ve," ",Pe+xe.currency.symbol.length-1);break}for(Pe=Oe.after.length-1;Pe>=0;Pe--)switch(se=Oe.after[Pe],se){case"$":ve=Pe===Oe.after.length-1?ve+xe.currency.symbol:c._.insert(ve,xe.currency.symbol,-(Oe.after.length-(1+Pe)));break;case" ":ve=Pe===Oe.after.length-1?ve+" ":c._.insert(ve," ",-(Oe.after.length-(1+Pe)+xe.currency.symbol.length-1));break}return ve}})}(),function(){c.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(z,G,ae){var xe,Oe=typeof z=="number"&&!c._.isNaN(z)?z.toExponential():"0e+0",ve=Oe.split("e");return G=G.replace(/e[\+|\-]{1}0/,""),xe=c._.numberToFormat(Number(ve[0]),G,ae),xe+"e"+ve[1]},unformat:function(z){var G=c._.includes(z,"e+")?z.split("e+"):z.split("e-"),ae=Number(G[0]),xe=Number(G[1]);xe=c._.includes(z,"e-")?xe*=-1:xe;function Oe(ve,se,Pe,$t){var mt=c._.correctionFactor(ve,se),Ot=ve*mt*(se*mt)/(mt*mt);return Ot}return c._.reduce([ae,Math.pow(10,xe)],Oe,1)}})}(),function(){c.register("format","ordinal",{regexps:{format:/(o)/},format:function(z,G,ae){var xe=c.locales[c.options.currentLocale],Oe,ve=c._.includes(G," o")?" ":"";return G=G.replace(/\s?o/,""),ve+=xe.ordinal(z),Oe=c._.numberToFormat(z,G,ae),Oe+ve}})}(),function(){c.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(z,G,ae){var xe=c._.includes(G," %")?" ":"",Oe;return c.options.scalePercentBy100&&(z=z*100),G=G.replace(/\s?\%/,""),Oe=c._.numberToFormat(z,G,ae),c._.includes(Oe,")")?(Oe=Oe.split(""),Oe.splice(-1,0,xe+"%"),Oe=Oe.join("")):Oe=Oe+xe+"%",Oe},unformat:function(z){var G=c._.stringToNumber(z);return c.options.scalePercentBy100?G*.01:G}})}(),function(){c.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(z,G,ae){var xe=Math.floor(z/60/60),Oe=Math.floor((z-xe*60*60)/60),ve=Math.round(z-xe*60*60-Oe*60);return xe+":"+(Oe<10?"0"+Oe:Oe)+":"+(ve<10?"0"+ve:ve)},unformat:function(z){var G=z.split(":"),ae=0;return G.length===3?(ae=ae+Number(G[0])*60*60,ae=ae+Number(G[1])*60,ae=ae+Number(G[2])):G.length===2&&(ae=ae+Number(G[0])*60,ae=ae+Number(G[1])),Number(ae)}})}(),c})})(VP);var sZ=VP.exports;const oZ={name:"Numeral",emits:["on-change"],props:{value:{type:[String,Number]},format:{type:String},prefix:{type:[String,Number]},suffix:{type:[String,Number]}},data(){return{currentValue:""}},watch:{value(){this.init()},format(){this.init()}},methods:{init(){if(this.value!==void 0){const o=sZ(this.value);this.format?this.currentValue=o.format(this.format):this.currentValue=o.value(),this.$emit("on-change",this.currentValue)}},getValue(){return this.currentValue}},mounted(){this.init()}},aZ={class:"ivu-numeral"};function lZ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("span",aZ,[t.renderSlot(o.$slots,"prefix",{},()=>[t.createTextVNode(t.toDisplayString(d.prefix),1)]),t.createTextVNode(t.toDisplayString(b.currentValue),1),t.renderSlot(o.$slots,"suffix",{},()=>[t.createTextVNode(t.toDisplayString(d.suffix),1)])])}var LP=l(oZ,[["render",lZ]]);const cZ="ivu-select-group",hZ={name:"OptionGroup",props:{label:{type:String,default:""}},provide(){return{OptionGroupInstance:this}},inject:["SelectInstance"],data(){return{prefixCls:cZ,hidden:!1,id:te(6),optionList:[]}},computed:{show(){return this.optionList.find(o=>o.proxy&&o.proxy.isShow)}}};function uZ(o,c,d,C,b,m){return t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([b.prefixCls+"-wrap"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-title"])},t.toDisplayString(d.label),3),t.createElementVNode("ul",null,[t.createElementVNode("li",{class:t.normalizeClass([b.prefixCls]),ref:"options"},[t.renderSlot(o.$slots,"default")],2)])],2)),[[t.vShow,m.show]])}var BP=l(hZ,[["render",uZ]]);const bw="ivu-page";function dZ(o){return/^[1-9][0-9]*$/.test(o+"")}const fZ={name:"PageOption",mixins:[Qn],components:{iSelect:Wr,iOption:Ci},emits:["on-size","on-page"],props:{pageSizeOpts:Array,showSizer:Boolean,showElevator:Boolean,current:Number,_current:Number,pageSize:Number,allPages:Number,isSmall:Boolean,placement:String,transfer:Boolean,disabled:Boolean,eventsEnabled:Boolean},data(){return{currentPageSize:this.pageSize}},watch:{pageSize(o){this.currentPageSize=o}},computed:{size(){return this.isSmall?"small":"default"},optsClasses(){return[`${bw}-options`]},sizerClasses(){return[`${bw}-options-sizer`]},ElevatorClasses(){return[`${bw}-options-elevator`]}},methods:{changeSize(){this.$emit("on-size",this.currentPageSize)},changePage(o){let c=o.target.value.trim(),d=0;if(dZ(c)){if(c=Number(c),c!=this.current){const C=this.allPages;c>C?d=C:d=c}}else d=1;d&&(this.$emit("on-page",d),o.target.value=d)}}},pZ=["value","disabled"];function mZ(o,c,d,C,b,m){const E=t.resolveComponent("i-option"),V=t.resolveComponent("i-select");return d.showSizer||d.showElevator?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.optsClasses)},[d.showSizer?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.sizerClasses)},[t.createVNode(V,{modelValue:b.currentPageSize,"onUpdate:modelValue":c[0]||(c[0]=W=>b.currentPageSize=W),size:m.size,placement:d.placement,transfer:d.transfer,disabled:d.disabled,eventsEnabled:d.eventsEnabled,onOnChange:m.changeSize},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.pageSizeOpts,W=>(t.openBlock(),t.createBlock(E,{key:W,value:W,style:{"text-align":"center"}},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(W)+" "+t.toDisplayString(o.t("i.page.page")),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","size","placement","transfer","disabled","eventsEnabled","onOnChange"])],2)):t.createCommentVNode("",!0),d.showElevator?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(m.ElevatorClasses)},[t.createTextVNode(t.toDisplayString(o.t("i.page.goto"))+" ",1),t.createElementVNode("input",{type:"text",value:d._current,autocomplete:"off",spellcheck:"false",disabled:d.disabled,onKeyup:c[1]||(c[1]=t.withKeys((...W)=>m.changePage&&m.changePage(...W),["enter"]))},null,40,pZ),t.createTextVNode(" "+t.toDisplayString(o.t("i.page.p")),1)],2)):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0)}var gZ=l(fZ,[["render",mZ]]);const Er="ivu-page",vZ={name:"Page",mixins:[Qn],components:{Options:gZ},emits:["update:modelValue","on-change","on-prev","on-next","on-page-size-change"],props:{modelValue:{type:Number,default:1},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageSizeOpts:{type:Array,default(){return[10,20,30,40]}},placement:{validator(o){return _(o,["top","bottom"])},default:"bottom"},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},size:{validator(o){return _(o,["small","default"])}},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showSizer:{type:Boolean,default:!1},className:{type:String},styles:{type:Object},prevText:{type:String,default:""},nextText:{type:String,default:""},disabled:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:Er,currentPage:this.modelValue,currentPageSize:this.pageSize}},watch:{total(o){let c=Math.ceil(o/this.currentPageSize);c<this.currentPage&&(this.currentPage=c===0?1:c)},modelValue(o){this.currentPage=o},pageSize(o){this.currentPageSize=o}},computed:{isSmall(){return this.size==="small"},allPages(){const o=Math.ceil(this.total/this.currentPageSize);return o===0?1:o},simpleWrapClasses(){return[`${Er}`,`${Er}-simple`,{[`${this.className}`]:!!this.className}]},simplePagerClasses(){return`${Er}-simple-pager`},wrapClasses(){return[`${Er}`,{[`${this.className}`]:!!this.className,[`${Er}-with-disabled`]:this.disabled,mini:this.size==="small"}]},prevClasses(){return[`${Er}-prev`,{[`${Er}-disabled`]:this.currentPage===1||this.disabled,[`${Er}-custom-text`]:this.prevText!==""}]},nextClasses(){return[`${Er}-next`,{[`${Er}-disabled`]:this.currentPage===this.allPages||this.disabled,[`${Er}-custom-text`]:this.nextText!==""}]},firstPageClasses(){return[`${Er}-item`,{[`${Er}-item-active`]:this.currentPage===1}]},lastPageClasses(){return[`${Er}-item`,{[`${Er}-item-active`]:this.currentPage===this.allPages}]}},methods:{changePage(o){this.disabled||this.currentPage!=o&&(this.currentPage=o,this.$emit("update:modelValue",o),this.$emit("on-change",o))},prev(){if(this.disabled)return;const o=this.currentPage;if(o<=1)return!1;this.changePage(o-1),this.$emit("on-prev",o-1)},next(){if(this.disabled)return;const o=this.currentPage;if(o>=this.allPages)return!1;this.changePage(o+1),this.$emit("on-next",o+1)},fastPrev(){if(this.disabled)return;const o=this.currentPage-5;o>0?this.changePage(o):this.changePage(1)},fastNext(){if(this.disabled)return;const o=this.currentPage+5;o>this.allPages?this.changePage(this.allPages):this.changePage(o)},onSize(o){this.disabled||(this.currentPageSize=o,this.$emit("on-page-size-change",o),this.changePage(1))},onPage(o){this.disabled||this.changePage(o)},keyDown(o){const c=o.keyCode;c>=48&&c<=57||c>=96&&c<=105||c===8||c===37||c===39||o.preventDefault()},keyUp(o){const c=o.keyCode,d=parseInt(o.target.value);if(c===38)this.prev();else if(c===40)this.next();else if(c===13){let C=1;d>this.allPages?C=this.allPages:d<=0||!d?C=1:C=d,o.target.value=C,this.changePage(C)}}}},yZ=["title"],bZ=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"})],-1)],OZ=["title"],xZ=["value","disabled"],wZ=t.createElementVNode("span",null,"/",-1),_Z=["title"],SZ=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"})],-1)],CZ=["title"],kZ={key:1,class:"ivu-icon ivu-icon-ios-arrow-back"},TZ=[t.createElementVNode("a",null,"1",-1)],MZ=["title"],EZ=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"}),t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],PZ=["title"],AZ=["title"],RZ=["title"],IZ=["title"],DZ=["title"],NZ=["title"],$Z=["title"],VZ=["title"],LZ=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"}),t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],BZ=["title"],UZ=["title"],zZ={key:1,class:"ivu-icon ivu-icon-ios-arrow-forward"};function FZ(o,c,d,C,b,m){const E=t.resolveComponent("Options");return d.simple?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass(m.simpleWrapClasses),style:t.normalizeStyle(d.styles)},[t.createElementVNode("li",{title:o.t("i.page.prev"),class:t.normalizeClass(m.prevClasses),onClick:c[0]||(c[0]=(...V)=>m.prev&&m.prev(...V))},bZ,10,yZ),t.createElementVNode("div",{class:t.normalizeClass(m.simplePagerClasses),title:b.currentPage+"/"+m.allPages},[t.createElementVNode("input",{type:"text",value:b.currentPage,autocomplete:"off",spellcheck:"false",disabled:d.disabled,onKeydown:c[1]||(c[1]=(...V)=>m.keyDown&&m.keyDown(...V)),onKeyup:c[2]||(c[2]=(...V)=>m.keyUp&&m.keyUp(...V)),onChange:c[3]||(c[3]=(...V)=>m.keyUp&&m.keyUp(...V))},null,40,xZ),wZ,t.createTextVNode(" "+t.toDisplayString(m.allPages),1)],10,OZ),t.createElementVNode("li",{title:o.t("i.page.next"),class:t.normalizeClass(m.nextClasses),onClick:c[4]||(c[4]=(...V)=>m.next&&m.next(...V))},SZ,10,_Z)],6)):(t.openBlock(),t.createElementBlock("ul",{key:1,class:t.normalizeClass(m.wrapClasses),style:t.normalizeStyle(d.styles)},[d.showTotal?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([b.prefixCls+"-total"])},[t.renderSlot(o.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(o.t("i.page.total"))+" "+t.toDisplayString(d.total)+" ",1),d.total<=1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(o.t("i.page.item")),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(o.t("i.page.items")),1)],64))])],2)):t.createCommentVNode("",!0),t.createElementVNode("li",{title:o.t("i.page.prev"),class:t.normalizeClass(m.prevClasses),onClick:c[5]||(c[5]=(...V)=>m.prev&&m.prev(...V))},[t.createElementVNode("a",null,[d.prevText!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(d.prevText),1)],64)):(t.openBlock(),t.createElementBlock("i",kZ))])],10,CZ),t.createElementVNode("li",{title:"1",class:t.normalizeClass(m.firstPageClasses),onClick:c[6]||(c[6]=V=>m.changePage(1))},TZ,2),b.currentPage>5?(t.openBlock(),t.createElementBlock("li",{key:1,title:o.t("i.page.prev5"),class:t.normalizeClass([b.prefixCls+"-item-jump-prev"]),onClick:c[7]||(c[7]=(...V)=>m.fastPrev&&m.fastPrev(...V))},EZ,10,MZ)):t.createCommentVNode("",!0),b.currentPage===5?(t.openBlock(),t.createElementBlock("li",{key:2,title:b.currentPage-3,class:t.normalizeClass([b.prefixCls+"-item"]),onClick:c[8]||(c[8]=V=>m.changePage(b.currentPage-3))},[t.createElementVNode("a",null,t.toDisplayString(b.currentPage-3),1)],10,PZ)):t.createCommentVNode("",!0),b.currentPage-2>1?(t.openBlock(),t.createElementBlock("li",{key:3,title:b.currentPage-2,class:t.normalizeClass([b.prefixCls+"-item"]),onClick:c[9]||(c[9]=V=>m.changePage(b.currentPage-2))},[t.createElementVNode("a",null,t.toDisplayString(b.currentPage-2),1)],10,AZ)):t.createCommentVNode("",!0),b.currentPage-1>1?(t.openBlock(),t.createElementBlock("li",{key:4,title:b.currentPage-1,class:t.normalizeClass([b.prefixCls+"-item"]),onClick:c[10]||(c[10]=V=>m.changePage(b.currentPage-1))},[t.createElementVNode("a",null,t.toDisplayString(b.currentPage-1),1)],10,RZ)):t.createCommentVNode("",!0),b.currentPage!=1&&b.currentPage!=m.allPages?(t.openBlock(),t.createElementBlock("li",{key:5,title:b.currentPage,class:t.normalizeClass([b.prefixCls+"-item",b.prefixCls+"-item-active"])},[t.createElementVNode("a",null,t.toDisplayString(b.currentPage),1)],10,IZ)):t.createCommentVNode("",!0),b.currentPage+1<m.allPages?(t.openBlock(),t.createElementBlock("li",{key:6,title:b.currentPage+1,class:t.normalizeClass([b.prefixCls+"-item"]),onClick:c[11]||(c[11]=V=>m.changePage(b.currentPage+1))},[t.createElementVNode("a",null,t.toDisplayString(b.currentPage+1),1)],10,DZ)):t.createCommentVNode("",!0),b.currentPage+2<m.allPages?(t.openBlock(),t.createElementBlock("li",{key:7,title:b.currentPage+2,class:t.normalizeClass([b.prefixCls+"-item"]),onClick:c[12]||(c[12]=V=>m.changePage(b.currentPage+2))},[t.createElementVNode("a",null,t.toDisplayString(b.currentPage+2),1)],10,NZ)):t.createCommentVNode("",!0),m.allPages-b.currentPage===4?(t.openBlock(),t.createElementBlock("li",{key:8,title:b.currentPage+3,class:t.normalizeClass([b.prefixCls+"-item"]),onClick:c[13]||(c[13]=V=>m.changePage(b.currentPage+3))},[t.createElementVNode("a",null,t.toDisplayString(b.currentPage+3),1)],10,$Z)):t.createCommentVNode("",!0),m.allPages-b.currentPage>=5?(t.openBlock(),t.createElementBlock("li",{key:9,title:o.t("i.page.next5"),class:t.normalizeClass([b.prefixCls+"-item-jump-next"]),onClick:c[14]||(c[14]=(...V)=>m.fastNext&&m.fastNext(...V))},LZ,10,VZ)):t.createCommentVNode("",!0),m.allPages>1?(t.openBlock(),t.createElementBlock("li",{key:10,title:m.allPages,class:t.normalizeClass(m.lastPageClasses),onClick:c[15]||(c[15]=V=>m.changePage(m.allPages))},[t.createElementVNode("a",null,t.toDisplayString(m.allPages),1)],10,BZ)):t.createCommentVNode("",!0),t.createElementVNode("li",{title:o.t("i.page.next"),class:t.normalizeClass(m.nextClasses),onClick:c[16]||(c[16]=(...V)=>m.next&&m.next(...V))},[t.createElementVNode("a",null,[d.nextText!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(d.nextText),1)],64)):(t.openBlock(),t.createElementBlock("i",zZ))])],10,UZ),t.createVNode(E,{"show-sizer":d.showSizer,"page-size":b.currentPageSize,"page-size-opts":d.pageSizeOpts,placement:d.placement,transfer:d.transfer,"show-elevator":d.showElevator,_current:b.currentPage,current:b.currentPage,disabled:d.disabled,"all-pages":m.allPages,"is-small":m.isSmall,eventsEnabled:d.eventsEnabled,onOnSize:m.onSize,onOnPage:m.onPage},null,8,["show-sizer","page-size","page-size-opts","placement","transfer","show-elevator","_current","current","disabled","all-pages","is-small","eventsEnabled","onOnSize","onOnPage"])],6))}var UP=l(vZ,[["render",FZ]]);const XZ={name:"PageHeader",components:{Breadcrumb:Mx,BreadcrumbItem:Ex,Divider:vv,Icon:S,Tabs:Av,TabPane:Iv},emits:["on-tab-change","on-back"],props:{title:{type:String},back:{type:Boolean,default:!1},logo:{type:String},action:{type:String},content:{type:String},extra:{type:String},breadcrumbList:{type:Array},hiddenBreadcrumb:{type:Boolean,default:!1},tabList:{type:Array},tabActiveKey:{type:String},wide:{type:Boolean,default:!1}},computed:{classes(){return{"ivu-page-header-wide":this.wide}}},methods:{handleTabChange(o){const c=this.tabList.find(d=>d.name===o);this.$emit("on-tab-change",JSON.parse(JSON.stringify(c)))},handleBack(){this.$emit("on-back")}}},WZ={key:0,class:"ivu-page-header-breadcrumb"},QZ={class:"ivu-page-header-detail"},HZ={key:1,class:"ivu-page-header-logo"},GZ=["src"],YZ={class:"ivu-page-header-main"},jZ={class:"ivu-page-header-row"},qZ={key:1,class:"ivu-page-header-title"},ZZ={key:2,class:"ivu-page-header-action"},KZ={class:"ivu-page-header-row"},JZ={key:0,class:"ivu-page-header-content"},eK={key:1,class:"ivu-page-header-extra"},tK={key:1,class:"ivu-page-header-tabs"};function nK(o,c,d,C,b,m){const E=t.resolveComponent("BreadcrumbItem"),V=t.resolveComponent("Breadcrumb"),W=t.resolveComponent("Icon"),z=t.resolveComponent("Divider"),G=t.resolveComponent("TabPane"),ae=t.resolveComponent("Tabs");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-page-header",m.classes])},[o.$slots.breadcrumb||!d.hiddenBreadcrumb?(t.openBlock(),t.createElementBlock("div",WZ,[t.renderSlot(o.$slots,"breadcrumb",{},()=>[t.createVNode(V,null,{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.breadcrumbList,(xe,Oe)=>(t.openBlock(),t.createBlock(E,{key:Oe,to:xe.to,replace:xe.replace,target:xe.target},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(xe.title),1)]),_:2},1032,["to","replace","target"]))),128))]),_:1})])])):t.createCommentVNode("",!0),t.createElementVNode("div",QZ,[d.back||o.$slots.back?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:c[0]||(c[0]=(...xe)=>m.handleBack&&m.handleBack(...xe))},[t.renderSlot(o.$slots,"back",{},()=>[t.createVNode(W,{type:"md-arrow-back"})]),t.createVNode(z,{type:"vertical"})])):t.createCommentVNode("",!0),d.logo||o.$slots.logo?(t.openBlock(),t.createElementBlock("div",HZ,[t.renderSlot(o.$slots,"logo",{},()=>[t.createElementVNode("img",{src:d.logo},null,8,GZ)])])):t.createCommentVNode("",!0),t.createElementVNode("div",YZ,[t.createElementVNode("div",jZ,[d.back||o.$slots.back?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:c[1]||(c[1]=(...xe)=>m.handleBack&&m.handleBack(...xe))},[t.renderSlot(o.$slots,"back",{},()=>[t.createVNode(W,{type:"md-arrow-back"})]),t.createVNode(z,{type:"vertical"})])):t.createCommentVNode("",!0),d.title||o.$slots.title?(t.openBlock(),t.createElementBlock("div",qZ,[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])])):t.createCommentVNode("",!0),d.action||o.$slots.action?(t.openBlock(),t.createElementBlock("div",ZZ,[t.renderSlot(o.$slots,"action",{},()=>[t.createTextVNode(t.toDisplayString(d.action),1)])])):t.createCommentVNode("",!0)]),t.createElementVNode("div",KZ,[d.content||o.$slots.content?(t.openBlock(),t.createElementBlock("div",JZ,[t.renderSlot(o.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(d.content),1)])])):t.createCommentVNode("",!0),d.extra||o.$slots.extra?(t.openBlock(),t.createElementBlock("div",eK,[t.renderSlot(o.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(d.extra),1)])])):t.createCommentVNode("",!0)])])]),d.tabList&&d.tabList.length?(t.openBlock(),t.createElementBlock("div",tK,[t.createVNode(ae,{animated:!1,"model-value":d.tabActiveKey,onOnClick:m.handleTabChange},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.tabList,(xe,Oe)=>(t.openBlock(),t.createBlock(G,{key:Oe,label:xe.label,name:xe.name},null,8,["label","name"]))),128))]),_:1},8,["model-value","onOnClick"])])):t.createCommentVNode("",!0)],2)}var zP=l(XZ,[["render",nK]]);const iK=t.defineComponent({name:"CollapseTransition",props:{ready:{type:Boolean,default:!0}},setup(o){return{on:{beforeEnter(c){!o.ready||(Z(c,"collapse-transition"),c.dataset||(c.dataset={}),c.dataset.oldPaddingTop=c.style.paddingTop,c.dataset.oldPaddingBottom=c.style.paddingBottom,c.style.height="0",c.style.paddingTop=0,c.style.paddingBottom=0)},enter(c){!o.ready||(c.dataset.oldOverflow=c.style.overflow,c.scrollHeight!==0?(c.style.height=c.scrollHeight+"px",c.style.paddingTop=c.dataset.oldPaddingTop,c.style.paddingBottom=c.dataset.oldPaddingBottom):(c.style.height="",c.style.paddingTop=c.dataset.oldPaddingTop,c.style.paddingBottom=c.dataset.oldPaddingBottom),c.style.overflow="hidden")},afterEnter(c){!o.ready||(ie(c,"collapse-transition"),c.style.height="",c.style.overflow=c.dataset.oldOverflow)},beforeLeave(c){!o.ready||(c.dataset||(c.dataset={}),c.dataset.oldPaddingTop=c.style.paddingTop,c.dataset.oldPaddingBottom=c.style.paddingBottom,c.dataset.oldOverflow=c.style.overflow,c.style.height=c.scrollHeight+"px",c.style.overflow="hidden")},leave(c){!o.ready||c.scrollHeight!==0&&(Z(c,"collapse-transition"),c.style.height=0,c.style.paddingTop=0,c.style.paddingBottom=0)},afterLeave(c){!o.ready||(ie(c,"collapse-transition"),c.style.height="",c.style.overflow=c.dataset.oldOverflow,c.style.paddingTop=c.dataset.oldPaddingTop,c.style.paddingBottom=c.dataset.oldPaddingBottom)}}}}});function rK(o,c,d,C,b,m){return t.openBlock(),t.createBlock(t.Transition,t.toHandlers(o.on),{default:t.withCtx(()=>[t.renderSlot(o.$slots,"default")]),_:3},16)}var Ow=l(iK,[["render",rK]]);const Mp="ivu-collapse",sK={name:"Panel",components:{Icon:S,CollapseTransition:Ow},inject:["CollapseInstance"],props:{name:{type:String},hideArrow:{type:Boolean,default:!1}},data(){return{index:0,mounted:!1}},computed:{itemClasses(){return[`${Mp}-item`,{[`${Mp}-item-active`]:this.isActive}]},headerClasses(){return`${Mp}-header`},contentClasses(){return`${Mp}-content`},boxClasses(){return`${Mp}-content-box`},isActive(){const o=this.CollapseInstance.getActiveKey(),c=this.name||this.index.toString();return o.indexOf(c)>-1}},methods:{setIndex(){this.index=this.CollapseInstance.panelCount+1,this.CollapseInstance.panelCount=this.index},toggle(){this.CollapseInstance.toggle({name:this.name||this.index,isActive:this.isActive})}},mounted(){this.setIndex(),this.mounted=!0}};function oK(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("collapse-transition");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.itemClasses)},[t.createElementVNode("div",{class:t.normalizeClass(m.headerClasses),onClick:c[0]||(c[0]=(...W)=>m.toggle&&m.toggle(...W))},[d.hideArrow?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(E,{key:0,type:"ios-arrow-forward"})),t.renderSlot(o.$slots,"default")],2),b.mounted?(t.openBlock(),t.createBlock(V,{key:0},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(m.contentClasses)},[t.createElementVNode("div",{class:t.normalizeClass(m.boxClasses)},[t.renderSlot(o.$slots,"content")],2)],2),[[t.vShow,m.isActive]])]),_:3})):t.createCommentVNode("",!0)],2)}var FP=l(sK,[["render",oK]]);const XP={name:"Paragraph",mixins:[bp],render(){return t.h(Tv,{...this.$props,component:"div",...this.commonEvents()},this.commonSlots())}},WP={name:"Password",mixins:[sp],data(){return{className:"ivu-login-password",prefix:"ios-lock-outline",placeholder:"请输入密码",type:"password"}}},Xl="ivu-poptip",aK={name:"Poptip",mixins:[KM,Qn],emits:["on-ok","on-cancel"],directives:{clickOutside:Bx},components:{iButton:Qr},props:{trigger:{validator(o){return _(o,["click","focus","hover"])},default:"click"},placement:{validator(o){return _(o,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},title:{type:[String,Number]},content:{type:[String,Number],default:""},width:{type:[String,Number]},confirm:{type:Boolean,default:!1},okText:{type:String},cancelText:{type:String},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}},popperClass:{type:String},wordWrap:{type:Boolean,default:!1},padding:{type:String},disabled:{type:Boolean,default:!1},capture:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return o.$VIEWUI?o.$VIEWUI.capture:!1}},transferClassName:{type:String}},data(){return{prefixCls:Xl,showTitle:!0,isInput:!1,disableCloseUnderTransfer:!1,tIndex:this.handleGetIndex()}},computed:{classes(){return[`${Xl}`,{[`${Xl}-confirm`]:this.confirm}]},popperClasses(){return[`${Xl}-popper`,{[`${Xl}-confirm`]:this.transfer&&this.confirm,[`${this.popperClass}`]:!!this.popperClass,[Xl+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]},styles(){let o={};return this.width&&(o.width=`${this.width}px`),this.transfer&&(o["z-index"]=1060+this.tIndex),o},localeOkText(){return this.okText===void 0?this.t("i.poptip.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.poptip.cancelText"):this.cancelText},contentClasses(){return[`${Xl}-body-content`,{[`${Xl}-body-content-word-wrap`]:this.wordWrap}]},contentPaddingStyle(){const o={};return this.padding!==""&&(o.padding=this.padding),o}},methods:{handleClick(){if(!this.disabled){if(this.confirm)return this.visible=!this.visible,!0;if(this.trigger!=="click")return!1;this.visible=!this.visible}},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(this.confirm)return this.visible=!1,!0;if(this.trigger!=="click")return!1;this.visible=!1},handleFocus(o=!0){if(!this.disabled){if(this.trigger!=="focus"||this.confirm||this.isInput&&!o)return!1;this.visible=!0}},handleBlur(o=!0){if(this.trigger!=="focus"||this.confirm||this.isInput&&!o)return!1;this.visible=!1},handleMouseenter(){if(!this.disabled){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!0},100)}},handleMouseleave(){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!1},100))},cancel(){this.visible=!1,this.$emit("on-cancel")},ok(){this.visible=!1,this.$emit("on-ok")},getInputChildren(){const o=this.$refs.reference.querySelectorAll("input"),c=this.$refs.reference.querySelectorAll("textarea");let d=null;return o.length?d=o[0]:c.length&&(d=c[0]),d},handleGetIndex(){return Xe(),we},handleIndexIncrease(){this.tIndex=this.handleGetIndex()}},mounted(){this.confirm||(this.showTitle=this.$slots.title!==void 0||this.title),this.trigger==="focus"&&t.nextTick(()=>{const o=this.getInputChildren();o&&(this.isInput=!0,o.addEventListener("focus",this.handleFocus,!1),o.addEventListener("blur",this.handleBlur,!1))})},beforeUnmount(){const o=this.getInputChildren();o&&(o.removeEventListener("focus",this.handleFocus,!1),o.removeEventListener("blur",this.handleBlur,!1))}},lK=t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-help-circle"},null,-1);function cK(o,c,d,C,b,m){const E=t.resolveComponent("i-button"),V=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),onMouseenter:c[6]||(c[6]=(...W)=>m.handleMouseenter&&m.handleMouseenter(...W)),onMouseleave:c[7]||(c[7]=(...W)=>m.handleMouseleave&&m.handleMouseleave(...W))},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-rel"]),ref:"reference",onClick:c[0]||(c[0]=(...W)=>m.handleClick&&m.handleClick(...W)),onMousedown:c[1]||(c[1]=W=>m.handleFocus(!1)),onMouseup:c[2]||(c[2]=W=>m.handleBlur(!1))},[t.renderSlot(o.$slots,"default")],34),(t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!d.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(m.popperClasses),style:t.normalizeStyle(m.styles),ref:"popper",onClick:c[3]||(c[3]=(...W)=>m.handleTransferClick&&m.handleTransferClick(...W)),onMouseenter:c[4]||(c[4]=(...W)=>m.handleMouseenter&&m.handleMouseenter(...W)),onMouseleave:c[5]||(c[5]=(...W)=>m.handleMouseleave&&m.handleMouseleave(...W))},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-content"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-arrow"])},null,2),d.confirm?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-inner"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"])},[lK,t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body-message"])},[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])],2)],2),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-footer"])},[t.createVNode(E,{type:"text",size:"small",onClick:m.cancel},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.localeCancelText),1)]),_:1},8,["onClick"]),t.createVNode(E,{type:"primary",size:"small",onClick:m.ok},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.localeOkText),1)]),_:1},8,["onClick"])],2)],2)):t.createCommentVNode("",!0),d.confirm?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([b.prefixCls+"-inner"])},[b.showTitle?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-title"]),style:t.normalizeStyle(m.contentPaddingStyle),ref:"title"},[t.renderSlot(o.$slots,"title",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-title-inner"])},t.toDisplayString(d.title),3)])],6)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"]),style:t.normalizeStyle(m.contentPaddingStyle)},[t.createElementVNode("div",{class:t.normalizeClass(m.contentClasses)},[t.renderSlot(o.$slots,"content",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body-content-inner"])},t.toDisplayString(d.content),3)])],2)],6)],2))],2)],38),[[t.vShow,o.visible]])]),_:3})],8,["disabled"]))],34)),[[V,m.handleClose]])}var xw=l(aK,[["render",cK]]);const aa="ivu-progress",hK={name:"Progress",components:{Icon:S},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator(o){return _(o,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data(){return{currentStatus:this.status}},computed:{isStatus(){return this.currentStatus==="wrong"||this.currentStatus==="success"},statusIcon(){let o="";switch(this.currentStatus){case"wrong":o="ios-close-circle";break;case"success":o="ios-checkmark-circle";break}return o},bgStyle(){const o=this.vertical?{height:`${this.percent}%`,width:`${this.strokeWidth}px`}:{width:`${this.percent}%`,height:`${this.strokeWidth}px`};return this.strokeColor&&(typeof this.strokeColor=="string"?o["background-color"]=this.strokeColor:o["background-image"]=`linear-gradient(to right, ${this.strokeColor[0]} 0%, ${this.strokeColor[1]} 100%)`),o},successBgStyle(){return this.vertical?{height:`${this.successPercent}%`,width:`${this.strokeWidth}px`}:{width:`${this.successPercent}%`,height:`${this.strokeWidth}px`}},wrapClasses(){return[`${aa}`,`${aa}-${this.currentStatus}`,{[`${aa}-show-info`]:!this.hideInfo&&!this.textInside,[`${aa}-vertical`]:this.vertical}]},textClasses(){return`${aa}-text`},textInnerClasses(){return`${aa}-text-inner`},outerClasses(){return`${aa}-outer`},innerClasses(){return`${aa}-inner`},bgClasses(){return`${aa}-bg`},successBgClasses(){return`${aa}-success-bg`}},created(){this.handleStatus()},methods:{handleStatus(o){o?(this.currentStatus="normal",this.$emit("on-status-change","normal")):parseInt(this.percent,10)===100&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent(o,c){o<c?this.handleStatus(!0):this.handleStatus()},status(o){this.currentStatus=o}}},uK={key:0,class:"ivu-progress-inner-text"};function dK(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[t.createElementVNode("div",{class:t.normalizeClass(m.outerClasses)},[t.createElementVNode("div",{class:t.normalizeClass(m.innerClasses)},[t.createElementVNode("div",{class:t.normalizeClass(m.bgClasses),style:t.normalizeStyle(m.bgStyle)},[d.textInside?(t.openBlock(),t.createElementBlock("div",uK,t.toDisplayString(d.percent)+"%",1)):t.createCommentVNode("",!0)],6),t.createElementVNode("div",{class:t.normalizeClass(m.successBgClasses),style:t.normalizeStyle(m.successBgStyle)},null,6)],2)],2),!d.hideInfo&&!d.textInside?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(m.textClasses)},[t.renderSlot(o.$slots,"default",{},()=>[m.isStatus?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(m.textInnerClasses)},[t.createVNode(E,{type:m.statusIcon},null,8,["type"])],2)):(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(m.textInnerClasses)},t.toDisplayString(d.percent)+"% ",3))])],2)):t.createCommentVNode("",!0)],2)}var Dv=l(hK,[["render",dK]]);const Wl="ivu-rate",fK={name:"Rate",mixins:[Qn,un],emits:["update:modelValue","on-change"],props:{count:{type:Number,default:5},modelValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},name:{type:String},clearable:{type:Boolean,default:!1},character:{type:String,default:""},icon:{type:String,default:""},customIcon:{type:String,default:""}},data(){const o=this.modelValue||0;return{prefixCls:Wl,hoverIndex:-1,isHover:!1,isHalf:this.allowHalf&&o.toString().indexOf(".")>=0,currentValue:o}},computed:{classes(){return[`${Wl}`,{[`${Wl}-disabled`]:this.itemDisabled}]},iconClasses(){return["ivu-icon",{[`ivu-icon-${this.icon}`]:this.icon!=="",[`${this.customIcon}`]:this.customIcon!==""}]},showCharacter(){return this.character!==""||this.icon!==""||this.customIcon!==""}},watch:{modelValue(o){this.currentValue=o||0},currentValue(o){this.setHalf(o)}},methods:{starCls(o){const c=this.hoverIndex,d=this.isHover?c:this.currentValue;let C=!1,b=!1;return d>=o&&(C=!0),this.isHover?b=d===o:b=Math.ceil(this.currentValue)===o,[{[`${Wl}-star`]:!this.showCharacter,[`${Wl}-star-chart`]:this.showCharacter,[`${Wl}-star-full`]:!b&&C||b&&!this.isHalf,[`${Wl}-star-half`]:b&&this.isHalf,[`${Wl}-star-zero`]:!C}]},handleMousemove(o,c){if(!this.itemDisabled){if(this.isHover=!0,this.allowHalf){const d=c.target.getAttribute("type")||!1;this.isHalf=d==="half"}else this.isHalf=!1;this.hoverIndex=o}},handleMouseleave(){this.itemDisabled||(this.isHover=!1,this.setHalf(this.currentValue),this.hoverIndex=-1)},setHalf(o){this.isHalf=this.allowHalf&&o.toString().indexOf(".")>=0},handleClick(o){this.itemDisabled||(this.isHalf&&(o-=.5),this.clearable&&Math.abs(o-this.currentValue)<.01&&(o=0),this.currentValue=o,this.$emit("update:modelValue",o),this.$emit("on-change",o),this.handleFormItemChange("change",o))}}},pK=["name","value"],mK=["onMousemove","onClick"],gK={key:0},vK={key:1};function yK(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),onMouseleave:c[0]||(c[0]=(...E)=>m.handleMouseleave&&m.handleMouseleave(...E))},[t.createElementVNode("input",{type:"hidden",name:d.name,value:b.currentValue},null,8,pK),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.count,E=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.starCls(E)),onMousemove:V=>m.handleMousemove(E,V),key:E,onClick:V=>m.handleClick(E)},[m.showCharacter?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("span",{class:t.normalizeClass([b.prefixCls+"-star-first"]),type:"half"},[d.character!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(d.character),1)],64)):(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(m.iconClasses),type:"half"},null,2))],2),t.createElementVNode("span",{class:t.normalizeClass([b.prefixCls+"-star-second"])},[d.character!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(d.character),1)],64)):(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(m.iconClasses)},null,2))],2)],64)):(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([b.prefixCls+"-star-content"]),type:"half"},null,2))],42,mK))),128)),d.showText?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-text"])},[t.renderSlot(o.$slots,"default",{},()=>[t.createElementVNode("span",null,t.toDisplayString(b.currentValue),1),t.createTextVNode(),b.currentValue<=1?(t.openBlock(),t.createElementBlock("span",gK,t.toDisplayString(o.t("i.rate.star")),1)):(t.openBlock(),t.createElementBlock("span",vK,t.toDisplayString(o.t("i.rate.stars")),1))])],2)),[[t.vShow,b.currentValue>0]]):t.createCommentVNode("",!0)],34)}var QP=l(fK,[["render",yK]]);const bK={name:"Result",components:{Icon:S},props:{type:{validator(o){return _(o,["success","error","warning"])}},title:{type:String},desc:{type:String},extra:{type:String}},computed:{iconClasses(){return{"ivu-result-icon-success":this.type==="success","ivu-result-icon-error":this.type==="error","ivu-result-icon-warning":this.type==="warning"}}}},OK={class:"ivu-result"},xK={key:0,class:"ivu-result-title"},wK={key:1,class:"ivu-result-desc"},_K={key:2,class:"ivu-result-extra"},SK={key:3,class:"ivu-result-actions"};function CK(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",OK,[t.createElementVNode("div",{class:t.normalizeClass(["ivu-result-icon",m.iconClasses])},[d.type==="success"?(t.openBlock(),t.createBlock(E,{key:0,type:"ios-checkmark"})):t.createCommentVNode("",!0),d.type==="error"?(t.openBlock(),t.createBlock(E,{key:1,type:"ios-close"})):t.createCommentVNode("",!0),d.type==="warning"?(t.openBlock(),t.createBlock(E,{key:2,type:"ios-information"})):t.createCommentVNode("",!0)],2),d.title||o.$slots.title?(t.openBlock(),t.createElementBlock("div",xK,[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])])):t.createCommentVNode("",!0),d.desc||o.$slots.desc?(t.openBlock(),t.createElementBlock("div",wK,[t.renderSlot(o.$slots,"desc",{},()=>[t.createTextVNode(t.toDisplayString(d.desc),1)])])):t.createCommentVNode("",!0),d.extra||o.$slots.extra?(t.openBlock(),t.createElementBlock("div",_K,[t.renderSlot(o.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(d.extra),1)])])):t.createCommentVNode("",!0),o.$slots.actions?(t.openBlock(),t.createElementBlock("div",SK,[t.renderSlot(o.$slots,"actions")])):t.createCommentVNode("",!0)])}var HP=l(bK,[["render",CK]]);const Ep="ivu-scroll",kK={props:["text","active","spinnerHeight"],components:{Spin:Ls,Icon:S},computed:{wrapperClasses(){return[`${Ep}-loader-wrapper`,{[`${Ep}-loader-wrapper-active`]:this.active}]},spinnerClasses(){return`${Ep}-spinner`},iconClasses(){return`${Ep}-spinner-icon`},textClasses(){return`${Ep}-loader-text`}}};function TK(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapperClasses)},[t.createElementVNode("div",{class:t.normalizeClass(m.spinnerClasses)},[t.createVNode(V,{fix:""},{default:t.withCtx(()=>[t.createVNode(E,{type:"ios-loading",size:"18",class:t.normalizeClass(m.iconClasses)},null,8,["class"]),d.text?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.textClasses)},t.toDisplayString(d.text),3)):t.createCommentVNode("",!0)]),_:1})],2)],2)}var MK=l(kK,[["render",TK]]);const Hu="ivu-scroll",GP={sensitivity:10,minimumStartDragOffset:5},ww=()=>Promise.resolve(),EK={name:"Scroll",mixins:[Qn],components:{loader:MK},props:{height:{type:[Number,String],default:300},onReachTop:{type:Function},onReachBottom:{type:Function},onReachEdge:{type:Function},loadingText:{type:String},distanceToEdge:[Number,Array],stopSlide:{type:Boolean,default:!1}},data(){const o=this.calculateProximityThreshold();return{showTopLoader:!1,showBottomLoader:!1,showBodyLoader:!1,lastScroll:0,reachedTopScrollLimit:!0,reachedBottomScrollLimit:!1,topRubberPadding:0,bottomRubberPadding:0,rubberRollBackTimeout:!1,isLoading:!1,pointerTouchDown:null,touchScroll:!1,handleScroll:()=>{},pointerUpHandler:()=>{},pointerMoveHandler:()=>{},topProximityThreshold:o[0],bottomProximityThreshold:o[1]}},computed:{wrapClasses(){return`${Hu}-wrapper`},scrollContainerClasses(){return[`${Hu}-container`,{[`${Hu}-container-loading`]:this.showBodyLoader&&this.stopSlide}]},slotContainerClasses(){return[`${Hu}-content`,{[`${Hu}-content-loading`]:this.showBodyLoader}]},loaderClasses(){return`${Hu}-loader`},wrapperPadding(){return{paddingTop:this.topRubberPadding+"px",paddingBottom:this.bottomRubberPadding+"px"}},localeLoadingText(){return this.loadingText===void 0?this.t("i.select.loading"):this.loadingText}},methods:{waitOneSecond(){return new Promise(o=>{setTimeout(o,1e3)})},calculateProximityThreshold(){const o=this.distanceToEdge;return typeof o>"u"?[20,20]:Array.isArray(o)?o:[o,o]},onCallback(o){if(this.isLoading=!0,this.showBodyLoader=!0,o>0)this.showTopLoader=!0,this.topRubberPadding=20;else{this.showBottomLoader=!0,this.bottomRubberPadding=20;let C=0;const b=this.$refs.scrollContainer,m=b.scrollTop;for(let E=0;E<20;E++)setTimeout(()=>{C=Math.max(C,this.$refs.bottomLoader.getBoundingClientRect().height),b.scrollTop=m+C},E*50)}const c=[this.waitOneSecond(),this.onReachEdge?this.onReachEdge(o):ww()];c.push(o>0?this.onReachTop?this.onReachTop():ww():this.onReachBottom?this.onReachBottom():ww());let d=setTimeout(()=>{this.reset()},5e3);Promise.all(c).then(()=>{clearTimeout(d),this.reset()})},reset(){["showTopLoader","showBottomLoader","showBodyLoader","isLoading","reachedTopScrollLimit","reachedBottomScrollLimit"].forEach(o=>this[o]=!1),this.lastScroll=0,this.topRubberPadding=0,this.bottomRubberPadding=0,clearInterval(this.rubberRollBackTimeout),this.touchScroll&&setTimeout(()=>{a(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.removeEventListener("touchmove",this.pointerMoveHandler),this.touchScroll=!1},500)},onWheel(o){if(this.isLoading)return;const c=o.wheelDelta?o.wheelDelta:-(o.detail||o.deltaY);this.stretchEdge(c)},stretchEdge(o){if(clearTimeout(this.rubberRollBackTimeout),!this.onReachEdge){if(o>0){if(!this.onReachTop)return}else if(!this.onReachBottom)return}this.rubberRollBackTimeout=setTimeout(()=>{this.isLoading||this.reset()},250),o>0&&this.reachedTopScrollLimit?(this.topRubberPadding+=5-this.topRubberPadding/5,this.topRubberPadding>this.topProximityThreshold&&this.onCallback(1)):o<0&&this.reachedBottomScrollLimit?(this.bottomRubberPadding+=6-this.bottomRubberPadding/4,this.bottomRubberPadding>this.bottomProximityThreshold&&this.onCallback(-1)):this.onScroll()},onScroll(){const o=this.$refs.scrollContainer;if(this.isLoading||!o)return;const c=Math.sign(this.lastScroll-o.scrollTop),d=o.scrollHeight-o.clientHeight-o.scrollTop,C=this.topProximityThreshold<0?this.topProximityThreshold:0,b=this.bottomProximityThreshold<0?this.bottomProximityThreshold:0;c==-1&&d+b<=GP.sensitivity?this.reachedBottomScrollLimit=!0:c>=0&&o.scrollTop+C<=0?this.reachedTopScrollLimit=!0:(this.reachedTopScrollLimit=!1,this.reachedBottomScrollLimit=!1,this.lastScroll=o.scrollTop)},getTouchCoordinates(o){return{x:o.touches[0].pageX,y:o.touches[0].pageY}},onPointerDown(o){if(!this.isLoading){if(o.type=="touchstart"){const c=this.$refs.scrollContainer;this.reachedTopScrollLimit?c.scrollTop=5:this.reachedBottomScrollLimit&&(c.scrollTop-=5)}o.type=="touchstart"&&this.$refs.scrollContainer.scrollTop==0&&(this.$refs.scrollContainer.scrollTop=5),this.pointerTouchDown=this.getTouchCoordinates(o),s(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.parentElement.addEventListener("touchmove",c=>{c.stopPropagation(),this.pointerMoveHandler(c)},{passive:!1,useCapture:!0})}},onPointerMove(o){if(!this.pointerTouchDown||this.isLoading)return;const c=this.getTouchCoordinates(o).y-this.pointerTouchDown.y;this.stretchEdge(c),this.touchScroll||Math.abs(c)>GP.minimumStartDragOffset&&(this.touchScroll=!0)},onPointerUp(){this.pointerTouchDown=null}},created(){this.handleScroll=_v(this.onScroll,150,{leading:!1}),this.pointerUpHandler=this.onPointerUp.bind(this),this.pointerMoveHandler=_v(this.onPointerMove,50,{leading:!1})}};function PK(o,c,d,C,b,m){const E=t.resolveComponent("loader");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses),style:{"touch-action":"none"}},[t.createElementVNode("div",{class:t.normalizeClass(m.scrollContainerClasses),style:t.normalizeStyle({height:d.height+"px"}),onScroll:c[0]||(c[0]=(...V)=>b.handleScroll&&b.handleScroll(...V)),onWheel:c[1]||(c[1]=(...V)=>m.onWheel&&m.onWheel(...V)),onTouchstart:c[2]||(c[2]=(...V)=>m.onPointerDown&&m.onPointerDown(...V)),ref:"scrollContainer"},[t.createElementVNode("div",{class:t.normalizeClass(m.loaderClasses),style:t.normalizeStyle({paddingTop:m.wrapperPadding.paddingTop}),ref:"toploader"},[t.createVNode(E,{text:m.localeLoadingText,active:b.showTopLoader},null,8,["text","active"])],6),t.createElementVNode("div",{class:t.normalizeClass(m.slotContainerClasses),ref:"scrollContent"},[t.renderSlot(o.$slots,"default")],2),t.createElementVNode("div",{class:t.normalizeClass(m.loaderClasses),style:t.normalizeStyle({paddingBottom:m.wrapperPadding.paddingBottom}),ref:"bottomLoader"},[t.createVNode(E,{text:m.localeLoadingText,active:b.showBottomLoader},null,8,["text","active"])],6)],38)],2)}var YP=l(EK,[["render",PK]]);const AK="COMPLETE",jP="CANCELED";function RK(o){if(r&&"requestAnimationFrame"in window)return window.requestAnimationFrame(o);setTimeout(o,16)}function qP(o,c,d){o===window?o.scrollTo(c,d):(o.scrollLeft=c,o.scrollTop=d)}function IK(o,c,d){if(!r)return;let C=o.getBoundingClientRect(),b=null,m=null,E=null,V=null,W=null,z=null,G=null,ae=d&&d.left!=null?d.left:.5,xe=d&&d.top!=null?d.top:.5,Oe=d&&d.leftOffset!=null?d.leftOffset:0,ve=d&&d.topOffset!=null?d.topOffset:0,se=ae,Pe=xe;if(c===window)z=Math.min(C.width,window.innerWidth),G=Math.min(C.height,window.innerHeight),m=C.left+window.pageXOffset-window.innerWidth*se+z*se,E=C.top+window.pageYOffset-window.innerHeight*Pe+G*Pe,m-=Oe,E-=ve,V=m-window.pageXOffset,W=E-window.pageYOffset;else{z=C.width,G=C.height,b=c.getBoundingClientRect();let $t=C.left-(b.left-c.scrollLeft),mt=C.top-(b.top-c.scrollTop);m=$t+z*se-c.clientWidth*se,E=mt+G*Pe-c.clientHeight*Pe,m=Math.max(Math.min(m,c.scrollWidth-c.clientWidth),0),E=Math.max(Math.min(E,c.scrollHeight-c.clientHeight),0),m-=Oe,E-=ve,V=m-c.scrollLeft,W=E-c.scrollTop}return{x:m,y:E,differenceX:V,differenceY:W}}function ZP(o){RK(function(){let c=o.scrollOption;if(!c)return;let d=IK(c.target,o,c.align),C=Date.now()-c.startTime,b=Math.min(1/c.time*C,1);if(C>c.time+20)return qP(o,d.x,d.y),o.scrollOption=null,c.end(AK);let m=1-c.ease(b);qP(o,d.x-d.differenceX*m,d.y-d.differenceY*m),ZP(o)})}function DK(o,c,d,C){let b=!c.scrollOption,m=c.scrollOption,E=Date.now(),V;m&&m.end(jP);function W(z){c.scrollOption=null,c.parentElement&&c.parentElement.scrollOption&&c.parentElement.scrollOption.end(z),C(z),c.removeEventListener("touchstart",V)}c.scrollOption={startTime:m?m.startTime:Date.now(),target:o,time:d.time+(m?E-m.startTime:0),ease:d.ease,align:d.align,end:W},V=W.bind(null,jP),c.addEventListener("touchstart",V),b&&ZP(c)}function KP(o){if(r)return o===window||(o.scrollHeight!==o.clientHeight||o.scrollWidth!==o.clientWidth)&&getComputedStyle(o).overflow!=="hidden"}function NK(){return!0}function _w(o,c,d){if(!o)return;typeof c=="function"&&(d=c,c=null),c||(c={}),c.time=isNaN(c.time)?1e3:c.time,c.ease=c.ease||function(W){return 1-Math.pow(1-W,W/2)};let C=o.parentElement,b=0;function m(W){b-=1,!b&&d&&d(W)}let E=c.validTarget||NK,V=c.isScrollable;for(;C;){if(E(C,b)&&(V?V(C,KP):KP(C))&&(b+=1,DK(o,C,c,m)),C=C.parentElement,!C)return;C.tagName==="BODY"&&(C=window)}}function $K(o){if(r&&"requestAnimationFrame"in window)return window.requestAnimationFrame(o);setTimeout(o,16)}function Sw(o,c,d){if(!o)return;typeof c=="function"&&(d=c,c=null),c||(c={}),c.time=isNaN(c.time)?500:c.time;const C=o.scrollTop,b=c.to||0,m=Math.abs(C-b),E=Math.ceil(m/c.time*50);function V(W,z,G){if(W===z){d&&d();return}let ae=W+G>z?z:W+G;W>z&&(ae=W-G<z?z:W-G),o.scrollTop=ae,$K(()=>V(ae,z,G))}V(C,b,E)}const Fa="ivu-layout-sider";ge();const VK={name:"Sider",emits:["on-collapse","update:modelValue"],props:{modelValue:{type:Boolean,default:!1},width:{type:[Number,String],default:200},collapsedWidth:{type:[Number,String],default:64},hideTrigger:{type:Boolean,default:!1},breakpoint:{type:String,validator(o){return _(o,["xs","sm","md","lg","xl","xxl"])}},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},reverseArrow:{type:Boolean,default:!1}},data(){return{prefixCls:Fa,mediaMatched:!1}},computed:{wrapClasses(){return[`${Fa}`,this.siderWidth?"":`${Fa}-zero-width`,this.modelValue?`${Fa}-collapsed`:""]},wrapStyles(){return{width:`${this.siderWidth}px`,minWidth:`${this.siderWidth}px`,maxWidth:`${this.siderWidth}px`,flex:`0 0 ${this.siderWidth}px`}},triggerClasses(){return[`${Fa}-trigger`,this.modelValue?`${Fa}-trigger-collapsed`:""]},childClasses(){return`${this.prefixCls}-children`},zeroWidthTriggerClasses(){return[`${Fa}-zero-width-trigger`,this.reverseArrow?`${Fa}-zero-width-trigger-left`:""]},triggerIconClasses(){return["ivu-icon",`ivu-icon-ios-arrow-${this.reverseArrow?"forward":"back"}`,`${Fa}-trigger-icon`]},siderWidth(){return this.collapsible?this.modelValue?this.mediaMatched?0:parseInt(this.collapsedWidth):parseInt(this.width):this.width},showZeroTrigger(){return this.collapsible?this.mediaMatched&&!this.hideTrigger||parseInt(this.collapsedWidth)===0&&this.modelValue&&!this.hideTrigger:!1},showBottomTrigger(){return this.collapsible?!this.mediaMatched&&!this.hideTrigger:!1}},methods:{toggleCollapse(){let o=this.collapsible?!this.modelValue:!1;this.$emit("update:modelValue",o)},matchMedia(){if(!r)return;let o;window.matchMedia&&(o=window.matchMedia);let c=this.mediaMatched;this.mediaMatched=o(`(max-width: ${ce[this.breakpoint]})`).matches,this.mediaMatched!==c&&this.$emit("update:modelValue",this.mediaMatched)},onWindowResize(){this.matchMedia()}},watch:{modelValue(o){this.$emit("on-collapse",o)}},mounted(){this.defaultCollapsed&&this.$emit("update:modelValue",this.defaultCollapsed),this.breakpoint!==void 0&&(s(window,"resize",this.onWindowResize),this.matchMedia())},beforeUnmount(){this.breakpoint!==void 0&&a(window,"resize",this.onWindowResize)}},LK=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-menu"},null,-1)];function BK(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses),style:t.normalizeStyle(m.wrapStyles)},[t.withDirectives(t.createElementVNode("span",{onClick:c[0]||(c[0]=(...E)=>m.toggleCollapse&&m.toggleCollapse(...E)),class:t.normalizeClass(m.zeroWidthTriggerClasses)},LK,2),[[t.vShow,m.showZeroTrigger]]),t.createElementVNode("div",{class:t.normalizeClass(m.childClasses)},[t.renderSlot(o.$slots,"default")],2),t.renderSlot(o.$slots,"trigger",{},()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(m.triggerClasses),onClick:c[1]||(c[1]=(...E)=>m.toggleCollapse&&m.toggleCollapse(...E)),style:t.normalizeStyle({width:m.siderWidth+"px"})},[t.createElementVNode("i",{class:t.normalizeClass(m.triggerIconClasses)},null,2)],6),[[t.vShow,m.showBottomTrigger]])])],6)}var JP=l(VK,[["render",BK]]);const Ql="ivu-skeleton-item",UK={name:"SkeletonItem",components:{Icon:S},inject:{SkeletonInstance:{default:null}},props:{animated:{type:Boolean,default:!1},type:{validator(o){return _(o,["circle","square","rect","image"])},default:"rect"},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},width:{type:[String,Number]},height:{type:[String,Number]},block:{type:Boolean,default:!1},imgSrc:{type:String}},data(){return{prefixCls:Ql}},computed:{classes(){return[Ql,Ql+"-"+this.type,Ql+"-"+this.type+"-"+this.size,{[Ql+"-animated"]:this.animated||!!this.SkeletonInstance&&this.SkeletonInstance.animated,[Ql+"-inline"]:!this.block,[Ql+"-with-image"]:this.showImage,[Ql+"-round"]:!!this.SkeletonInstance&&this.SkeletonInstance.round}]},styles(){const o={};return["rect","image"].includes(this.type)&&(this.width&&(o.width=typeof this.width=="number"?`${this.width}px`:this.width),this.height&&(o.height=typeof this.height=="number"?`${this.height}px`:this.height),this.showImage&&(o.background=`no-repeat url(${this.imgSrc}) center center`,o.backgroundSize="contain")),o},showIcon(){return this.type==="image"&&!this.imgSrc},showImage(){return this.type==="image"&&!!this.imgSrc},iconSize(){let o=16;return this.size==="large"&&(o=32),this.size==="small"&&(o=10),o}}};function zK(o,c,d,C,b,m){const E=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(m.styles)},[m.showIcon?(t.openBlock(),t.createBlock(E,{key:0,class:t.normalizeClass(b.prefixCls+"-image-icon"),type:"ios-image",size:m.iconSize},null,8,["class","size"])):t.createCommentVNode("",!0)],6)}var Cw=l(UK,[["render",zK]]);const mh="ivu-skeleton",FK={name:"Skeleton",components:{SkeletonItem:Cw,Row:Nl,Col:ia},provide(){return{SkeletonInstance:this}},props:{animated:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},paragraph:{validator(o){return typeof o=="number"?o>=1:typeof o.rows=="number"&&o.rows>=1},type:[Number,Object],default:3},title:{validator(o){return typeof o=="object"&&o.width?["number","string"].includes(typeof o.width):!0},type:[Boolean,Object],default:!0},avatar:{validator(o){if(typeof o=="object"){if(o.type)return _(o.type,["circle","square"]);if(o.size)return _(o.size,["small","large","default"])}return!0},type:[Boolean,Object],default:!1}},data(){return{prefixCls:mh}},computed:{classes(){return[mh,{[mh+"-with-title"]:this.showTitle,[mh+"-with-avatar"]:this.showAvatar}]},rows(){return typeof this.paragraph=="number"?this.paragraph:this.paragraph.rows},rowsCount(){return this.rows+Number(this.showTitle)},showTitle(){return!!this.title},titleWidth(){return typeof this.title=="object"&&this.title.width?typeof this.title.width=="string"?this.title.width:`${this.title.width}px`:""},showAvatar(){return!!this.avatar},avatarType(){return typeof this.avatar=="object"&&this.avatar.type?this.avatar.type:"circle"},avatarSize(){return typeof this.avatar=="object"&&this.avatar.size?this.avatar.size:!this.$VIEWUI||this.$VIEWUI.size===""?"default":this.$VIEWUI.size}},methods:{rowClasses(o){return[mh+"-item-inner",{[mh+"-item-round"]:this.round,[mh+"-item-title"]:this.showTitle&&o===1}]},rowWidth(o){if(this.showTitle&&o===1)return this.titleWidth||"38%";if(typeof this.paragraph=="object"){if(typeof this.paragraph.width=="string")return this.paragraph.width;if(typeof this.paragraph.width=="number")return`${this.paragraph.width}px`;const c=o-1-Number(this.showTitle);if(Array.isArray(this.paragraph.width)&&this.paragraph.width[c])return typeof this.paragraph.width[c]=="number"?`${this.paragraph.width[c]}px`:this.paragraph.width[c]}return o===this.rowsCount?"62%":"100%"}}};function XK(o,c,d,C,b,m){const E=t.resolveComponent("SkeletonItem"),V=t.resolveComponent("Col"),W=t.resolveComponent("Row");return d.loading?(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:0},o.$attrs,{class:m.classes}),[d.loading?t.renderSlot(o.$slots,"template",{key:0},()=>[t.createVNode(W,null,{default:t.withCtx(()=>[m.showAvatar?(t.openBlock(),t.createBlock(V,{key:0,flex:"0"},{default:t.withCtx(()=>[t.createVNode(E,{type:m.avatarType,size:m.avatarSize,animated:d.animated,class:t.normalizeClass(b.prefixCls+"-item-avatar")},null,8,["type","size","animated","class"])]),_:1})):t.createCommentVNode("",!0),t.createVNode(V,{flex:"1"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.rowsCount,z=>(t.openBlock(),t.createBlock(E,{key:z,class:t.normalizeClass(m.rowClasses(z)),animated:d.animated,width:m.rowWidth(z),block:""},null,8,["class","animated","width"]))),128))]),_:1})]),_:1})]):t.createCommentVNode("",!0)],16)):t.renderSlot(o.$slots,"default",t.normalizeProps(t.mergeProps({key:1},o.$attrs)))}var eA=l(FK,[["render",XK]]),WK={name:"SliderMarker",props:{mark:{type:[String,Object]}},render(){let o=typeof this.mark=="string"?this.mark:[this.mark.label];return t.h("div",{class:"ivu-slider-marks-item",style:this.mark.style||{}},o)}};const Xa="ivu-slider",QK={name:"Slider",mixins:[un],emits:["update:modelValue","on-input","on-change"],components:{InputNumber:hw,Tooltip:Va,SliderMarker:WK},inject:{ModalInstance:{default:null},DrawerInstance:{default:null}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},disabled:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},inputSize:{type:String,default:"default",validator(o){return _(o,["small","large","default"])}},showStops:{type:Boolean,default:!1},tipFormat:{type:Function,default(o){return o}},showTip:{type:String,default:"hover",validator(o){return _(o,["hover","always","never"])}},name:{type:String},activeChange:{type:Boolean,default:!0},marks:{type:Object}},data(){let o=this.checkLimits(Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]);return this.range&&this.modelValue===null&&(o=[0,0]),{prefixCls:Xa,currentValue:o,dragging:!1,pointerDown:"",startX:0,currentX:0,startPos:0,oldValue:[...o],valueIndex:{min:0,max:1},sliderWidth:0,isValueNull:!1,id:te(6)}},watch:{modelValue(o){o===null&&(this.isValueNull=!0),o=this.checkLimits(Array.isArray(o)?o:[o]),!this.dragging&&(o[0]!==this.currentValue[0]||o[1]!==this.currentValue[1])&&(this.isValueNull&&this.range?this.currentValue=[0,0]:this.currentValue=o)},exportValue(o){t.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()});const c=this.range?o:o[0];this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",c),this.$emit("on-input",c)}},computed:{classes(){return[`${Xa}`,{[`${Xa}-input`]:this.showInput&&!this.range,[`${Xa}-range`]:this.range,[`${Xa}-disabled`]:this.itemDisabled}]},minButtonClasses(){return[`${Xa}-button`,{[`${Xa}-button-dragging`]:this.pointerDown==="min"}]},maxButtonClasses(){return[`${Xa}-button`,{[`${Xa}-button-dragging`]:this.pointerDown==="max"}]},exportValue(){const o=(String(this.step).split(".")[1]||"").length;return this.currentValue.map(c=>Number(c.toFixed(o)))},minPosition(){return(this.currentValue[0]-this.min)/this.valueRange*100},maxPosition:function(){return(this.currentValue[1]-this.min)/this.valueRange*100},barStyle(){const o={width:(this.currentValue[0]-this.min)/this.valueRange*100+"%"};return this.range&&(o.left=(this.currentValue[0]-this.min)/this.valueRange*100+"%",o.width=(this.currentValue[1]-this.currentValue[0])/this.valueRange*100+"%"),o},stops(){let o=this.valueRange/this.step,c=[],d=100*this.step/this.valueRange;for(let C=1;C<o;C++)c.push(C*d);return c},markList(){return this.marks?Object.keys(this.marks).map(parseFloat).sort((o,c)=>o-c).filter(o=>o<=this.max&&o>=this.min).map(o=>({point:o,position:(o-this.min)*100/(this.max-this.min),mark:this.marks[o]})):[]},tipDisabled(){return this.tipFormat(this.currentValue[0])===null||this.showTip==="never"},valueRange(){return this.max-this.min},firstPosition(){return this.currentValue[0]},secondPosition(){return this.currentValue[1]}},methods:{getPointerX(o){return o.type.indexOf("touch")!==-1?o.touches[0].clientX:o.clientX},checkLimits([o,c]){return o=Math.max(this.min,o),o=Math.min(this.max,o),c=Math.max(this.min,o,c),c=Math.min(this.max,c),[o,c]},getCurrentValue(o,c){if(this.itemDisabled)return;const d=this.valueIndex[c];if(typeof d<"u")return this.currentValue[d]},onKeyLeft(o,c){const d=this.getCurrentValue(o,c);Number.isFinite(d)&&this.changeButtonPosition(d-this.step,c)},onKeyRight(o,c){const d=this.getCurrentValue(o,c);Number.isFinite(d)&&this.changeButtonPosition(d+this.step,c)},onPointerDown(o,c){this.itemDisabled||(o.preventDefault(),this.pointerDown=c,this.onPointerDragStart(o),s(window,"mousemove",this.onPointerDrag),s(window,"touchmove",this.onPointerDrag),s(window,"mouseup",this.onPointerDragEnd),s(window,"touchend",this.onPointerDragEnd))},onPointerDragStart(o){this.dragging=!1,this.startX=this.getPointerX(o),this.startPos=this[`${this.pointerDown}Position`]*this.valueRange/100+this.min},onPointerDrag(o){this.dragging=!0,this.$refs[`${this.pointerDown}Tooltip`].visible=!0,this.currentX=this.getPointerX(o);const c=(this.currentX-this.startX)/this.sliderWidth*this.valueRange;this.changeButtonPosition(this.startPos+c)},onPointerDragEnd(){this.dragging&&(this.dragging=!1,this.$refs[`${this.pointerDown}Tooltip`].visible=!1,this.emitChange()),this.pointerDown="",a(window,"mousemove",this.onPointerDrag),a(window,"touchmove",this.onPointerDrag),a(window,"mouseup",this.onPointerDragEnd),a(window,"touchend",this.onPointerDragEnd)},changeButtonPosition(o,c){const d=c||this.pointerDown,C=d==="min"?0:1;d==="min"?o=this.checkLimits([o,this.max])[0]:o=this.checkLimits([this.min,o])[1];const b=this.handleDecimal(o,this.step),m=this.currentValue;m[C]=o-b,this.range&&(d==="min"&&m[0]>m[1]&&(m[1]=m[0]),d==="max"&&m[0]>m[1]&&(m[0]=m[1])),this.currentValue=[...m],this.dragging||this.currentValue[C]!==this.oldValue[C]&&(this.emitChange(),this.oldValue[C]=this.currentValue[C])},handleDecimal(o,c){if(c<1){let d=c.toString(),C=1,b;try{b=d.split(".")[1].length}catch{b=0}return C=Math.pow(10,b),o*C%(c*C)/C}else return o%c},emitChange(){const o=this.range?this.exportValue:this.exportValue[0];this.$emit("on-change",o),this.handleFormItemChange("change",o)},sliderClick(o){if(this.itemDisabled)return;const c=this.getPointerX(o),d=this.$refs.slider.getBoundingClientRect().left;let C=(c-d)/this.sliderWidth*this.valueRange+this.min,b=C/this.valueRange*100;!this.range||b<=this.minPosition?this.changeButtonPosition(C,"min"):b>=this.maxPosition?this.changeButtonPosition(C,"max"):this.changeButtonPosition(C,C-this.firstPosition<=this.secondPosition-C?"min":"max")},handleInputChange(o){this.currentValue=[o===0?0:o||this.min,this.currentValue[1]],this.emitChange()},handleFocus(o){this.$refs[`${o}Tooltip`].handleShowPopper()},handleBlur(o){this.$refs[`${o}Tooltip`].handleClosePopper()},handleSetSliderWidth(){this.sliderWidth=parseInt(R(this.$refs.slider,"width"),10)},handleOnVisibleChange(o){o&&this.showTip==="always"&&(this.$refs.minTooltip.doDestroy(),this.range&&this.$refs.maxTooltip.doDestroy(),t.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()}))},addSlider(o){const c=this[o];!c||(c.sliderList||(c.sliderList=[]),c.sliderList.push({id:this.id,slider:this}))},removeSlider(o){const c=this[o];if(!c||!c.sliderList)return;const d=c.sliderList.findIndex(C=>C.id===this.id);c.sliderList.splice(d,1)}},mounted(){this.addSlider("ModalInstance"),this.addSlider("DrawerInstance"),this.observer=Wu(),this.observer.listenTo(this.$refs.slider,this.handleSetSliderWidth)},beforeUnmount(){this.removeSlider("ModalInstance"),this.removeSlider("DrawerInstance"),this.observer.removeListener(this.$refs.slider,this.handleSetSliderWidth)}},HK=["name","value"],GK={class:"ivu-slider-marks"};function YK(o,c,d,C,b,m){const E=t.resolveComponent("Input-number"),V=t.resolveComponent("SliderMarker"),W=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[!d.range&&d.showInput?(t.openBlock(),t.createBlock(E,{key:0,min:d.min,size:d.inputSize,max:d.max,step:d.step,modelValue:m.exportValue[0],disabled:o.itemDisabled,"active-change":d.activeChange,onOnChange:m.handleInputChange},null,8,["min","size","max","step","modelValue","disabled","active-change","onOnChange"])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-wrap"]),ref:"slider",onClick:c[19]||(c[19]=t.withModifiers((...z)=>m.sliderClick&&m.sliderClick(...z),["self"]))},[t.createElementVNode("input",{type:"hidden",name:d.name,value:m.exportValue},null,8,HK),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-bar"]),style:t.normalizeStyle(m.barStyle),onClick:c[0]||(c[0]=t.withModifiers((...z)=>m.sliderClick&&m.sliderClick(...z),["self"]))},null,6),d.showStops?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(m.stops,z=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls+"-stop"]),key:z,style:t.normalizeStyle({left:z+"%"}),onClick:c[1]||(c[1]=t.withModifiers((...G)=>m.sliderClick&&m.sliderClick(...G),["self"]))},null,6))),128)):t.createCommentVNode("",!0),m.markList.length>0?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.markList,(z,G)=>(t.openBlock(),t.createElementBlock("div",{key:G,class:t.normalizeClass([b.prefixCls+"-stop"]),style:t.normalizeStyle({left:z.position+"%"}),onClick:c[2]||(c[2]=t.withModifiers((...ae)=>m.sliderClick&&m.sliderClick(...ae),["self"]))},null,6))),128)),t.createElementVNode("div",GK,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.markList,(z,G)=>(t.openBlock(),t.createBlock(V,{key:G,mark:z.mark,style:t.normalizeStyle({left:z.position+"%"}),onClick:m.sliderClick},null,8,["mark","style","onClick"]))),128))])],64)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-button-wrap"]),style:t.normalizeStyle({left:m.minPosition+"%"}),onTouchstart:c[9]||(c[9]=z=>m.onPointerDown(z,"min")),onMousedown:c[10]||(c[10]=z=>m.onPointerDown(z,"min"))},[t.createVNode(W,{controlled:b.pointerDown==="min",placement:"top",content:d.tipFormat(m.exportValue[0]),disabled:m.tipDisabled,always:d.showTip==="always",ref:"minTooltip"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(m.minButtonClasses),tabindex:"0",onFocus:c[3]||(c[3]=z=>m.handleFocus("min")),onBlur:c[4]||(c[4]=z=>m.handleBlur("min")),onKeydown:[c[5]||(c[5]=t.withKeys(z=>m.onKeyLeft(z,"min"),["left"])),c[6]||(c[6]=t.withKeys(z=>m.onKeyLeft(z,"min"),["down"])),c[7]||(c[7]=t.withKeys(z=>m.onKeyRight(z,"min"),["right"])),c[8]||(c[8]=t.withKeys(z=>m.onKeyRight(z,"min"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38),d.range?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass([b.prefixCls+"-button-wrap"]),style:t.normalizeStyle({left:m.maxPosition+"%"}),onTouchstart:c[17]||(c[17]=z=>m.onPointerDown(z,"max")),onMousedown:c[18]||(c[18]=z=>m.onPointerDown(z,"max"))},[t.createVNode(W,{controlled:b.pointerDown==="max",placement:"top",content:d.tipFormat(m.exportValue[1]),disabled:m.tipDisabled,always:d.showTip==="always",ref:"maxTooltip"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(m.maxButtonClasses),tabindex:"0",onFocus:c[11]||(c[11]=z=>m.handleFocus("max")),onBlur:c[12]||(c[12]=z=>m.handleBlur("max")),onKeydown:[c[13]||(c[13]=t.withKeys(z=>m.onKeyLeft(z,"max"),["left"])),c[14]||(c[14]=t.withKeys(z=>m.onKeyLeft(z,"max"),["down"])),c[15]||(c[15]=t.withKeys(z=>m.onKeyRight(z,"max"),["right"])),c[16]||(c[16]=t.withKeys(z=>m.onKeyRight(z,"max"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38)):t.createCommentVNode("",!0)],2)],2)}var tA=l(QK,[["render",YK]]);const jK={small:8,default:16,large:24},nA={name:"Space",props:{size:{type:[String,Number,Array],validator(o){const c=["small","large","default"];return typeof o=="string"?_(o,c):Array.isArray(o)?o.length>0&&o.every(d=>typeof d=="number"||_(d,c)):!0},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||!o.$VIEWUI.space||o.$VIEWUI.space.size===""?"small":o.$VIEWUI.space.size}},direction:{type:String,validator(o){return _(o,["horizontal","vertical"])},default:"horizontal"},align:{type:String,validator(o){return _(o,["start","end","center","baseline","stretch"])}},wrap:{type:Boolean,default:!1},split:{type:Boolean,default:!1},type:{type:String,validator(o){return _(o,["inline-flex","flex"])},default:"inline-flex"}},computed:{mergedAlign(){if(!this.align){if(this.direction==="horizontal")return"center";if(this.type==="flex")return"stretch"}return this.align},classes(){return["ivu-space",`ivu-space-${this.direction}`,{"ivu-space-flex":this.type==="flex","ivu-space-wrap":this.wrap,[`ivu-space-${this.mergedAlign}`]:this.mergedAlign}]},styles(){const o={};return["number","string"].includes(typeof this.size)&&(o.gap=this.getSize(this.size)),Array.isArray(this.size)&&(this.size.length===1?o.columnGap=this.getSize(this.size[0]):this.size.length>1&&(o.columnGap=this.getSize(this.size[0]),o.rowGap=this.getSize(this.size[1]))),o}},methods:{getSize(o){return`${typeof o=="string"?jK[o]:o||0}px`},filterEmpty(o=[]){const c=[];return o.forEach(d=>{Array.isArray(d)?c.push(...d):d.type===t.Fragment?c.push(...d.children):c.push(d)}),c.filter(d=>!this.isEmptyElement(d))},isEmptyElement(o){return o&&(o.type===t.Comment||o.type===t.Fragment&&o.children.length===0||o.type===t.Text&&o.children.trim()==="")}},render(){const o=this.filterEmpty(this.$slots.default?this.$slots.default():[]),c=o.length;if(c===0)return null;let d=null;return this.split&&!this.$slots.split?d=t.h(vv,{type:"vertical"}):this.$slots.split&&(d=this.$slots.split()),t.h("div",{class:this.classes,style:this.styles},o.map((C,b)=>{const m=t.h("div",{class:"ivu-space-item"},[C]);return d&&b+1<c?[m,t.h("div",{class:"ivu-space-split"},[d])]:m}))}},qK={name:"Trigger",props:{mode:String},data(){return{prefix:"ivu-split-trigger",initOffset:0}},computed:{isVertical(){return this.mode==="vertical"},classes(){return[this.prefix,this.isVertical?`${this.prefix}-vertical`:`${this.prefix}-horizontal`]},barConClasses(){return[`${this.prefix}-bar-con`,this.isVertical?"vertical":"horizontal"]}}};function ZK(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.createElementVNode("div",{class:t.normalizeClass(m.barConClasses)},[c[0]||(t.setBlockTracking(-1),c[0]=(t.openBlock(),t.createElementBlock(t.Fragment,null,t.renderList(8,E=>t.createElementVNode("i",{class:t.normalizeClass(`${b.prefix}-bar`),key:`trigger-${E}`},null,2)),64)),t.setBlockTracking(1),c[0])],2)],2)}var KK=l(qK,[["render",ZK]]);const JK={name:"Split",components:{Trigger:KK},emits:["update:modelValue","on-move-start","on-moving","on-move-end"],props:{modelValue:{type:[Number,String],default:.5},mode:{validator(o){return _(o,["horizontal","vertical"])},default:"horizontal"},min:{type:[Number,String],default:"40px"},max:{type:[Number,String],default:"40px"}},data(){return{prefix:"ivu-split",offset:0,oldOffset:0,isMoving:!1,computedMin:0,computedMax:0,currentValue:.5}},computed:{wrapperClasses(){return[`${this.prefix}-wrapper`,this.isMoving?"no-select":""]},paneClasses(){return[`${this.prefix}-pane`,{[`${this.prefix}-pane-moving`]:this.isMoving}]},isHorizontal(){return this.mode==="horizontal"},anotherOffset(){return 100-this.offset},valueIsPx(){return typeof this.modelValue=="string"},offsetSize(){return this.isHorizontal?"offsetWidth":"offsetHeight"}},methods:{px2percent(o,c){return parseFloat(o)/parseFloat(c)},getComputedThresholdValue(o){let c=this.$refs.outerWrapper[this.offsetSize];return this.valueIsPx?typeof this[o]=="string"?this[o]:c*this[o]:typeof this[o]=="string"?this.px2percent(this[o],c):this[o]},getMin(o,c){return this.valueIsPx?`${Math.min(parseFloat(o),parseFloat(c))}px`:Math.min(o,c)},getMax(o,c){return this.valueIsPx?`${Math.max(parseFloat(o),parseFloat(c))}px`:Math.max(o,c)},getAnotherOffset(o){let c=0;return this.valueIsPx?c=`${this.$refs.outerWrapper[this.offsetSize]-parseFloat(o)}px`:c=1-o,c},handleMove(o){let c=(this.isHorizontal?o.pageX:o.pageY)-this.initOffset,d=this.$refs.outerWrapper[this.offsetSize],C=this.valueIsPx?`${parseFloat(this.oldOffset)+c}px`:this.px2percent(d*this.oldOffset+c,d),b=this.getAnotherOffset(C);parseFloat(C)<=parseFloat(this.computedMin)&&(C=this.getMax(C,this.computedMin)),parseFloat(b)<=parseFloat(this.computedMax)&&(C=this.getAnotherOffset(this.getMax(b,this.computedMax))),o.atMin=this.modelValue===this.computedMin,o.atMax=this.valueIsPx?this.getAnotherOffset(this.modelValue)===this.computedMax:this.getAnotherOffset(this.modelValue).toFixed(5)===this.computedMax.toFixed(5),this.$emit("update:modelValue",C),this.$emit("on-moving",o)},handleUp(){this.isMoving=!1,a(document,"mousemove",this.handleMove),a(document,"mouseup",this.handleUp),this.$emit("on-move-end")},handleMousedown(o){this.initOffset=this.isHorizontal?o.pageX:o.pageY,this.oldOffset=this.modelValue,this.isMoving=!0,s(document,"mousemove",this.handleMove),s(document,"mouseup",this.handleUp),this.$emit("on-move-start")},computeOffset(){t.nextTick(()=>{this.computedMin=this.getComputedThresholdValue("min"),this.computedMax=this.getComputedThresholdValue("max"),this.offset=(this.valueIsPx?this.px2percent(this.modelValue,this.$refs.outerWrapper[this.offsetSize]):this.modelValue)*1e4/100})}},watch:{modelValue(o){o!==this.currentValue&&(this.currentValue=o,this.computeOffset())}},mounted(){t.nextTick(()=>{this.computeOffset()}),s(window,"resize",this.computeOffset)},beforeUnmount(){a(window,"resize",this.computeOffset)}};function eJ(o,c,d,C,b,m){const E=t.resolveComponent("trigger");return t.openBlock(),t.createElementBlock("div",{ref:"outerWrapper",class:t.normalizeClass(m.wrapperClasses)},[m.isHorizontal?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(`${b.prefix}-horizontal`)},[t.createElementVNode("div",{style:t.normalizeStyle({right:`${m.anotherOffset}%`}),class:t.normalizeClass(["left-pane",m.paneClasses])},[t.renderSlot(o.$slots,"left")],6),t.createElementVNode("div",{class:t.normalizeClass(`${b.prefix}-trigger-con`),style:t.normalizeStyle({left:`${b.offset}%`}),onMousedown:c[0]||(c[0]=(...V)=>m.handleMousedown&&m.handleMousedown(...V))},[t.renderSlot(o.$slots,"trigger",{},()=>[t.createVNode(E,{mode:"vertical"})])],38),t.createElementVNode("div",{style:t.normalizeStyle({left:`${b.offset}%`}),class:t.normalizeClass(["right-pane",m.paneClasses])},[t.renderSlot(o.$slots,"right")],6)],2)):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(`${b.prefix}-vertical`)},[t.createElementVNode("div",{style:t.normalizeStyle({bottom:`${m.anotherOffset}%`}),class:t.normalizeClass(["top-pane",m.paneClasses])},[t.renderSlot(o.$slots,"top")],6),t.createElementVNode("div",{class:t.normalizeClass(`${b.prefix}-trigger-con`),style:t.normalizeStyle({top:`${b.offset}%`}),onMousedown:c[1]||(c[1]=(...V)=>m.handleMousedown&&m.handleMousedown(...V))},[t.renderSlot(o.$slots,"trigger",{},()=>[t.createVNode(E,{mode:"horizontal"})])],38),t.createElementVNode("div",{style:t.normalizeStyle({top:`${b.offset}%`}),class:t.normalizeClass(["bottom-pane",m.paneClasses])},[t.renderSlot(o.$slots,"bottom")],6)],2))],2)}var iA=l(JK,[["render",eJ]]);const Gu="ivu-steps",rA="ivu-icon",tJ={name:"Step",inject:["StepsInstance"],props:{status:{validator(o){return _(o,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:Gu,id:te(6)}},computed:{wrapClasses(){return[`${Gu}-item`,`${Gu}-status-${this.currentStatus}`,{[`${Gu}-custom`]:!!this.icon||!!this.$slots.icon,[`${Gu}-next-error`]:this.nextError}]},iconClasses(){let o="";return this.icon?o=this.icon:this.currentStatus==="finish"?o="ios-checkmark":this.currentStatus==="error"&&(o="ios-close"),[`${Gu}-icon`,`${rA}`,{[`${rA}-${o}`]:o!==""}]},stepNumber(){return this.StepsInstance.steps.findIndex(o=>o.id===this.id)+1},total(){return this.StepsInstance.direction==="horizontal"?this.StepsInstance.steps.length:1},currentStatus(){let o="";if(this.status)o=this.status;else{const c=this.StepsInstance,d=c.current,C=c.steps.findIndex(b=>b.id===this.id);C===d?c.status!=="error"?o="process":o="error":C<d?o="finish":o="wait"}return o},nextError(){let o=!1;const c=this.StepsInstance,d=c.steps.findIndex(C=>C.id===this.id);return d+1<c.steps.length&&c.steps[d+1].currentStatus==="error"&&(o=!0),o}},beforeMount(){this.StepsInstance.addStep(this.id,this)},beforeUnmount(){this.StepsInstance.removeStep(this.id)}},nJ=[t.createElementVNode("i",null,null,-1)],iJ={key:0},rJ={key:1,class:"ivu-steps-icon"};function sJ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses)},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-tail"])},nJ,2),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-head"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-head-inner"])},[!d.icon&&!o.$slots.icon&&m.currentStatus!=="finish"&&m.currentStatus!=="error"?(t.openBlock(),t.createElementBlock("span",iJ,t.toDisplayString(m.stepNumber),1)):o.$slots.icon?(t.openBlock(),t.createElementBlock("span",rJ,[t.renderSlot(o.$slots,"icon")])):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(m.iconClasses)},null,2))],2)],2),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-main"])},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-title"])},[t.renderSlot(o.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(d.title),1)])],2),d.content||o.$slots.content?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-content"])},[t.renderSlot(o.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(d.content),1)])],2)):t.createCommentVNode("",!0)],2)],2)}var sA=l(tJ,[["render",sJ]]);const kw="ivu-steps",oJ={name:"Steps",provide(){return{StepsInstance:this}},props:{current:{type:Number,default:0},status:{validator(o){return _(o,["wait","process","finish","error"])},default:"process"},size:{validator(o){return _(o,["small"])}},direction:{validator(o){return _(o,["horizontal","vertical"])},default:"horizontal"}},data(){return{steps:[]}},computed:{classes(){return[`${kw}`,`${kw}-${this.direction}`,{[`${kw}-${this.size}`]:!!this.size}]},children(){return this.steps.map(o=>o.step)}},methods:{addStep(o,c){this.steps.push({id:o,step:c})},removeStep(o){const c=this.steps.findIndex(d=>d.id===o);this.steps.splice(c,1)}}};function aJ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes)},[t.renderSlot(o.$slots,"default")],2)}var oA=l(oJ,[["render",aJ]]);const gh="ivu-menu",lJ={name:"Submenu",mixins:[mw,Po],components:{Icon:S,Drop:Ge,CollapseTransition:Ow},provide(){return{SubmenuInstance:this}},props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{prefixCls:gh,active:!1,opened:!1,dropWidth:parseFloat(R(this.$el,"width")),id:te(6),childSubmenuList:[]}},computed:{classes(){return[`${gh}-submenu`,{[`${gh}-item-active`]:this.active&&!this.hasParentSubmenu,[`${gh}-opened`]:this.opened,[`${gh}-submenu-disabled`]:this.disabled,[`${gh}-submenu-has-parent-submenu`]:this.hasParentSubmenu,[`${gh}-child-item-active`]:this.active}]},accordion(){return this.menu.accordion},dropStyle(){let o={};return this.dropWidth&&(o.minWidth=`${this.dropWidth}px`),o},titleStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}},arrowType(){const o=this.globalConfig;let c="ios-arrow-down";return o&&(o.menu.customArrow?c="":o.menu.arrow&&(c=o.menu.arrow)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.menu.customArrow&&(c=o.menu.customArrow),c},arrowSize(){const o=this.globalConfig;let c="";return o&&o.menu.arrowSize&&(c=o.menu.arrowSize),c}},methods:{handleMouseenter(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!0},250))},handleMouseleave(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!1},150))},handleClick(){if(this.disabled||this.mode==="horizontal")return;const o=this.opened;this.opened=!o,this.menu.updateOpenKeys(this.name)},addSubmenu(){const o=this.MenuInstance;o.submenuList||(o.submenuList=[]),o.submenuList.push({id:this.id,submenu:this});const c=$(this,"Submenu");c&&(c.childSubmenuList||(c.childSubmenuList=[]),c.childSubmenuList.push({id:this.id,submenu:this}))},removeSubmenu(){const o=this.MenuInstance;if(o.submenuList&&o.submenuList.length){const d=o.submenuList.findIndex(C=>C.id===this.id);o.submenuList.splice(d,1)}const c=$(this,"Submenu");if(c&&c.childSubmenuList&&c.childSubmenuList.length){const d=c.childSubmenuList.findIndex(C=>C.id===this.id);c.childSubmenuList.splice(d,1)}},handleMenuItemSelect(o){this.mode==="horizontal"&&(this.opened=!1),this.MenuInstance.handleMenuItemSelect(o)},handleUpdateActiveName(o){$(this,"Submenu")&&this.SubmenuInstance.handleUpdateActiveName(o),this.childSubmenuList&&this.childSubmenuList.length&&this.childSubmenuList.map(c=>c.submenu).forEach(c=>{c.active=!1}),this.active=o}},watch:{mode(o){o==="horizontal"&&this.$refs.drop.update()},opened(o){this.mode!=="vertical"&&(o?(this.dropWidth=parseFloat(R(this.$el,"width")),this.$refs.drop.update()):this.$refs.drop.destroy())}},mounted(){this.addSubmenu()},beforeUnmount(){this.removeSubmenu()}};function cJ(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("collapse-transition"),W=t.resolveComponent("Drop");return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.classes),onMouseenter:c[1]||(c[1]=(...z)=>m.handleMouseenter&&m.handleMouseenter(...z)),onMouseleave:c[2]||(c[2]=(...z)=>m.handleMouseleave&&m.handleMouseleave(...z))},[t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-submenu-title"]),ref:"reference",onClick:c[0]||(c[0]=t.withModifiers((...z)=>m.handleClick&&m.handleClick(...z),["stop"])),style:t.normalizeStyle(m.titleStyle)},[t.renderSlot(o.$slots,"title"),t.createVNode(E,{type:m.arrowType,custom:m.customArrowType,size:m.arrowSize,class:t.normalizeClass([b.prefixCls+"-submenu-title-icon"])},null,8,["type","custom","size","class"])],6),o.mode==="vertical"?(t.openBlock(),t.createBlock(V,{key:0,ready:o.menu.ready},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls])},[t.renderSlot(o.$slots,"default")],2),[[t.vShow,b.opened]])]),_:3},8,["ready"])):t.createCommentVNode("",!0),o.mode==="horizontal"?(t.openBlock(),t.createBlock(W,{key:1,ref:"drop",visible:b.opened,placement:"bottom","transition-name":"slide-up",styles:m.dropStyle},{default:t.withCtx(()=>[t.createElementVNode("ul",{class:t.normalizeClass([b.prefixCls+"-drop-list"])},[t.renderSlot(o.$slots,"default")],2)]),_:3},8,["visible","styles"])):t.createCommentVNode("",!0)],34)}var aA=l(lJ,[["render",cJ]]);const lA={name:"Submit",inject:["LoginInstance"],props:{},methods:{handleSubmit(){this.LoginInstance.handleSubmit()}},render(){const o=Object.assign({size:"large",type:"primary",long:!0},this.$attrs),c=t.h(Qr,{...o,onClick:this.handleSubmit},this.$slots.default||(()=>"登录"));return t.h("div",{class:"ivu-login-submit"},[c])}},Yu="ivu-switch",hJ={name:"iSwitch",mixins:[un],emits:["update:modelValue","on-change"],props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},size:{validator(o){return _(o,["large","small","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},name:{type:String},loading:{type:Boolean,default:!1},trueColor:{type:String},falseColor:{type:String},beforeChange:Function},data(){return{currentValue:this.modelValue}},computed:{wrapClasses(){return[`${Yu}`,{[`${Yu}-checked`]:this.currentValue===this.trueValue,[`${Yu}-disabled`]:this.itemDisabled,[`${Yu}-${this.size}`]:!!this.size,[`${Yu}-loading`]:this.loading}]},wrapStyles(){let o={};return this.trueColor&&this.currentValue===this.trueValue?(o["border-color"]=this.trueColor,o["background-color"]=this.trueColor):this.falseColor&&this.currentValue===this.falseValue&&(o["border-color"]=this.falseColor,o["background-color"]=this.falseColor),o},innerClasses(){return`${Yu}-inner`}},methods:{handleToggle(){const o=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=o,this.$emit("update:modelValue",o),this.$emit("on-change",o),this.handleFormItemChange("change",o)},toggle(o){if(o.preventDefault(),this.itemDisabled||this.loading)return!1;if(!this.beforeChange)return this.handleToggle();const c=this.beforeChange();c&&c.then?c.then(()=>{this.handleToggle()}):this.handleToggle()}},watch:{modelValue(o){if(o!==this.trueValue&&o!==this.falseValue&&o!==null)throw"Value should be trueValue or falseValue.";this.currentValue=o}}},uJ=["name","value"];function dJ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("span",{tabindex:"0",class:t.normalizeClass(m.wrapClasses),style:t.normalizeStyle(m.wrapStyles),onClick:c[0]||(c[0]=(...E)=>m.toggle&&m.toggle(...E)),onKeydown:c[1]||(c[1]=t.withKeys((...E)=>m.toggle&&m.toggle(...E),["space"]))},[t.createElementVNode("input",{type:"hidden",name:d.name,value:b.currentValue},null,8,uJ),t.createElementVNode("span",{class:t.normalizeClass(m.innerClasses)},[b.currentValue===d.trueValue?t.renderSlot(o.$slots,"open",{key:0}):t.createCommentVNode("",!0),b.currentValue===d.falseValue?t.renderSlot(o.$slots,"close",{key:1}):t.createCommentVNode("",!0)],2)],38)}var Tw=l(hJ,[["render",dJ]]),fJ={name:"TableRenderHeader",props:{render:Function,column:Object,index:Number},render(){const o={column:this.column,index:this.index};return this.render(t.h,o)}},Mw={methods:{alignCls(o,c={}){let d="";return c.cellClassName&&o.key&&c.cellClassName[o.key]&&(d=c.cellClassName[o.key]),[`${this.prefixCls}-column-${o.__id}`,{[`${d}`]:d,[`${o.className}`]:o.className,[`${this.prefixCls}-column-${o.align}`]:o.align,[`${this.prefixCls}-hidden`]:this.fixed==="left"&&o.fixed!=="left"||this.fixed==="right"&&o.fixed!=="right"||!this.fixed&&o.fixed&&(o.fixed==="left"||o.fixed==="right")}]},isPopperShow(o){return o.filters&&(!this.fixed&&!o.fixed||this.fixed==="left"&&o.fixed==="left"||this.fixed==="right"&&o.fixed==="right")},setCellWidth(o){let c="";return o.width?c=o.width:this.columnsWidth[o._index]&&(c=this.columnsWidth[o._index].width),c==="0"&&(c=""),c}}};const pJ={name:"TableHead",mixins:[Mw,Qn],components:{CheckboxGroup:Ux,Checkbox:Vu,Poptip:xw,iButton:Qr,renderHeader:fJ},props:{prefixCls:String,styleObject:Object,columns:Array,objData:Object,data:Array,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},columnRows:Array,fixedColumnRows:Array},data(){return{draggingColumn:null,dragging:!1,dragState:{}}},computed:{styles(){const o=Object.assign({},this.styleObject),c=parseInt(this.styleObject.width);return o.width=`${c}px`,o},isSelectAll(){let o=!0;this.data.length||(o=!1);let c=!0;for(let d in this.objData){const C=this.objData[d];if(!C._isChecked&&!C._isDisabled){o=!1;break}else C.children&&C.children.length&&(o=this.isChildrenSelected(C,o));C._isDisabled&&!C._isChecked?C.children&&C.children.length&&(c=this.isChildrenAllDisabledAndUnSelected(C,c)):c=!1}return c&&(o=!1),o},headRows(){return this.columnRows.length>1?this.fixed?this.fixedColumnRows:this.columnRows:[this.columns]},isSelectDisabled(){let o=!0;if(this.data.length)for(let c in this.objData){const d=this.objData[c];d._isDisabled?d.children&&d.children.length&&(o=this.isChildrenDisabled(d,o)):o=!1}return o}},methods:{cellClasses(o){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&o.fixed&&(o.fixed==="left"||o.fixed==="right"),[`${this.prefixCls}-cell-with-selection`]:o.type==="selection"}]},scrollBarCellClass(){let o=!1;for(let c in this.headRows)for(let d in this.headRows[c]){if(this.headRows[c][d].fixed==="right"){o=!0;break}if(o)break}return[{[`${this.prefixCls}-hidden`]:o}]},itemClasses(o,c){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:o._filterChecked[0]===c.value}]},itemAllClasses(o){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:!o._filterChecked.length}]},selectAll(){const o=!this.isSelectAll;this.$parent.selectAll(o)},handleSort(o,c){const d=this.columns.find(b=>b._index===o),C=d._index;d._sortType===c&&(c="normal"),this.$parent.handleSort(C,c)},handleSortByHead(o){const c=this.columns.find(d=>d._index===o);if(c.sortable){const d=c._sortType;d==="normal"?this.handleSort(o,"asc"):d==="asc"?this.handleSort(o,"desc"):this.handleSort(o,"normal")}},handleFilter(o){this.$parent.handleFilter(o)},handleSelect(o,c){this.$parent.handleFilterSelect(o,c)},handleReset(o){this.$parent.handleFilterReset(o)},handleFilterHide(o){this.$parent.handleFilterHide(o)},getColumn(o,c){if(this.columnRows.length>1){const d=this.headRows[o][c].__id;return this.columns.filter(C=>C.__id===d)[0]}else return this.headRows[o][c]},handleMouseDown(o,c){if(!this.$isServer&&r&&this.draggingColumn){this.dragging=!0;const d=this.$parent,C=d.$el.getBoundingClientRect().left,b=this.$el.querySelector(`th.ivu-table-column-${o.__id}`).getBoundingClientRect(),m=b.left-C+30;d.showResizeLine=!0,this.dragState={startMouseLeft:c.clientX,startLeft:b.right-C,startColumnLeft:b.left-C,tableLeft:C};const E=d.$refs.resizeLine;E.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const V=z=>{const G=z.clientX-this.dragState.startMouseLeft,ae=this.dragState.startLeft+G;E.style.left=Math.max(m,ae)+"px"},W=()=>{if(this.dragging){const{startColumnLeft:z,startLeft:G}=this.dragState,ae=parseInt(E.style.left,10)-z,xe=d.allColumns.find(Oe=>Oe.__id===o.__id);xe&&(xe.width=ae,o.width=ae,d.handleResize()),d.$emit("on-column-width-resize",xe.width,G-z,o,c),r&&(document.body.style.cursor=""),this.dragging=!1,this.draggingColumn=null,this.dragState={},d.showResizeLine=!1}!r||(document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",W),document.onselectstart=null,document.ondragstart=null)};if(!r)return;document.addEventListener("mousemove",V),document.addEventListener("mouseup",W)}},handleMouseMove(o,c){let d=c.target;for(;d&&d.tagName!=="TH";)d=d.parentNode;if(!(!o||!o.resizable)&&r&&!this.dragging){let C=d.getBoundingClientRect();const b=document.body.style;C.width>12&&C.right-c.pageX<8?(b.cursor="col-resize",this.draggingColumn=o):this.dragging||(b.cursor="",this.draggingColumn=null)}},handleMouseOut(){this.$isServer||r&&(document.body.style.cursor="")},isChildrenSelected(o,c){let d=c;return o.children&&o.children.length&&o.children.forEach(C=>{!C._isChecked&&!C._isDisabled?d=!1:C.children&&C.children.length&&(d=this.isChildrenSelected(C,d))}),d},isChildrenAllDisabledAndUnSelected(o,c){let d=c;return o.children&&o.children.length&&o.children.forEach(C=>{C._isDisabled&&!C._isChecked?C.children&&C.children.length&&(d=this.isChildrenAllDisabledAndUnSelected(C,d)):d=!1}),d},isChildrenDisabled(o,c){let d=c;return o.children&&o.children.length&&o.children.forEach(C=>{C._isDisabled?C.children&&C.children.length&&(d=this.isChildrenDisabled(C,d)):d=!1}),d}}},mJ=["width"],gJ=["width"],vJ=["colspan","rowspan"],yJ={key:0},bJ=["onClick"],OJ=["onClick"],xJ=["onClick"],wJ=["onMousedown","onMousemove"],_J=["rowspan"];function SJ(o,c,d,C,b,m){const E=t.resolveComponent("render-header"),V=t.resolveComponent("Checkbox"),W=t.resolveComponent("checkbox"),z=t.resolveComponent("checkbox-group"),G=t.resolveComponent("i-button"),ae=t.resolveComponent("Poptip");return t.openBlock(),t.createElementBlock("table",{cellspacing:"0",cellpadding:"0",border:"0",style:t.normalizeStyle(m.styles)},[t.createElementVNode("colgroup",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.columns,(xe,Oe)=>(t.openBlock(),t.createElementBlock("col",{key:Oe,width:o.setCellWidth(xe)},null,8,mJ))),128)),o.$parent.showVerticalScrollBar?(t.openBlock(),t.createElementBlock("col",{key:0,width:o.$parent.scrollBarWidth},null,8,gJ)):t.createCommentVNode("",!0)]),t.createElementVNode("thead",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.headRows,(xe,Oe)=>(t.openBlock(),t.createElementBlock("tr",{key:Oe},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(xe,(ve,se)=>(t.openBlock(),t.createElementBlock("th",{key:se,colspan:ve.colSpan,rowspan:ve.rowSpan,class:t.normalizeClass(o.alignCls(ve))},[t.createElementVNode("div",{class:t.normalizeClass(m.cellClasses(ve))},[ve.type==="expand"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[ve.renderHeader?(t.openBlock(),t.createBlock(E,{key:1,render:ve.renderHeader,column:ve,index:se},null,8,["render","column","index"])):(t.openBlock(),t.createElementBlock("span",yJ,t.toDisplayString(ve.title||""),1))],64)):ve.type==="selection"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[ve.hideSelectAll?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(V,{key:0,"model-value":m.isSelectAll,disabled:m.isSelectDisabled,onOnChange:m.selectAll},null,8,["model-value","disabled","onOnChange"]))],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[ve.renderHeader?(t.openBlock(),t.createBlock(E,{key:1,render:ve.renderHeader,column:ve,index:se},null,8,["render","column","index"])):(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass({[d.prefixCls+"-cell-sort"]:ve.sortable}),onClick:Pe=>ve.sortable&&m.handleSortByHead(m.getColumn(Oe,se)._index)},t.toDisplayString(ve.title||"#"),11,bJ)),ve.sortable?(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass([d.prefixCls+"-sort"])},[t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropup",{on:m.getColumn(Oe,se)._sortType==="asc"}]),onClick:Pe=>m.handleSort(m.getColumn(Oe,se)._index,"asc")},null,10,OJ),t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropdown",{on:m.getColumn(Oe,se)._sortType==="desc"}]),onClick:Pe=>m.handleSort(m.getColumn(Oe,se)._index,"desc")},null,10,xJ)],2)):t.createCommentVNode("",!0),o.isPopperShow(ve)?(t.openBlock(),t.createBlock(ae,{key:3,modelValue:m.getColumn(Oe,se)._filterVisible,"onUpdate:modelValue":Pe=>m.getColumn(Oe,se)._filterVisible=Pe,placement:"bottom","popper-class":"ivu-table-popper",transfer:"",capture:!1,onOnPopperHide:Pe=>m.handleFilterHide(m.getColumn(Oe,se)._index)},t.createSlots({default:t.withCtx(()=>[t.createElementVNode("span",{class:t.normalizeClass([d.prefixCls+"-filter"])},[t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-ios-funnel",{on:m.getColumn(Oe,se)._isFiltered}])},null,2)],2)]),_:2},[m.getColumn(Oe,se)._filterMultiple?{name:"content",fn:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass([d.prefixCls+"-filter-list"])},[t.createElementVNode("div",{class:t.normalizeClass([d.prefixCls+"-filter-list-item"])},[t.createVNode(z,{modelValue:m.getColumn(Oe,se)._filterChecked,"onUpdate:modelValue":Pe=>m.getColumn(Oe,se)._filterChecked=Pe},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ve.filters,(Pe,$t)=>(t.openBlock(),t.createBlock(W,{key:$t,label:Pe.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(Pe.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],2),t.createElementVNode("div",{class:t.normalizeClass([d.prefixCls+"-filter-footer"])},[t.createVNode(G,{type:"text",size:"small",disabled:!m.getColumn(Oe,se)._filterChecked.length,onClick:Pe=>m.handleFilter(m.getColumn(Oe,se)._index)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.t("i.table.confirmFilter")),1)]),_:2},1032,["disabled","onClick"]),t.createVNode(G,{type:"text",size:"small",onClick:Pe=>m.handleReset(m.getColumn(Oe,se)._index)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(o.t("i.table.resetFilter")),1)]),_:2},1032,["onClick"])],2)],2)]),key:"0"}:{name:"content",fn:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass([d.prefixCls+"-filter-list"])},[t.createElementVNode("ul",{class:t.normalizeClass([d.prefixCls+"-filter-list-single"])},[t.createElementVNode("li",{class:t.normalizeClass(m.itemAllClasses(m.getColumn(Oe,se))),onClick:Pe=>m.handleReset(m.getColumn(Oe,se)._index)},t.toDisplayString(o.t("i.table.clearFilter")),11,["onClick"]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ve.filters,Pe=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.itemClasses(m.getColumn(Oe,se),Pe)),key:Pe.value,onClick:$t=>m.handleSelect(m.getColumn(Oe,se)._index,Pe.value)},t.toDisplayString(Pe.label),11,["onClick"]))),128))],2)],2)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","onOnPopperHide"])):t.createCommentVNode("",!0)],64))],2),ve.resizable?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-table-header-resizable",onMousedown:Pe=>m.handleMouseDown(ve,Pe),onMousemove:Pe=>m.handleMouseMove(ve,Pe),onMouseout:c[0]||(c[0]=(...Pe)=>m.handleMouseOut&&m.handleMouseOut(...Pe))},null,40,wJ)):t.createCommentVNode("",!0)],10,vJ))),128)),o.$parent.showVerticalScrollBar&&Oe===0?(t.openBlock(),t.createElementBlock("th",{key:0,class:t.normalizeClass(m.scrollBarCellClass()),rowspan:m.headRows.length},null,10,_J)):t.createCommentVNode("",!0)]))),128))])],4)}var CJ=l(pJ,[["render",SJ]]);const kJ={props:{row:Object,prefixCls:String,draggable:Boolean,isChildren:Boolean},computed:{objData(){return this.$parent.objData}},methods:{onDrag(o,c){o.dataTransfer.setData("index",c)},onDrop(o,c){const d=o.dataTransfer.getData("index");this.$parent.$parent.dragAndDrop(d,c),o.preventDefault()},allowDrop(o){o.preventDefault()},rowClasses(o){const c=this.isChildren?this.$parent.$parent.getDataByRowKey(this.row._rowKey):this.objData[o];return[`${this.prefixCls}-row`,this.rowClsName(o),{[`${this.prefixCls}-row-highlight`]:c&&c._isHighlight,[`${this.prefixCls}-row-hover`]:c&&c._isHover}]},rowClsName(o){return this.$parent.$parent.rowClassName(this.objData[o],o)}}},TJ=["draggable"];function MJ(o,c,d,C,b,m){return d.draggable?(t.openBlock(),t.createElementBlock("tr",{key:0,class:t.normalizeClass(m.rowClasses(d.row._index)),draggable:d.draggable,onDragstart:c[0]||(c[0]=E=>m.onDrag(E,d.row._index)),onDrop:c[1]||(c[1]=E=>m.onDrop(E,d.row._index)),onDragover:c[2]||(c[2]=E=>m.allowDrop(E))},[t.renderSlot(o.$slots,"default")],42,TJ)):(t.openBlock(),t.createElementBlock("tr",{key:1,class:t.normalizeClass(m.rowClasses(d.row._index)),draggable:!1},[t.renderSlot(o.$slots,"default")],2))}var Ew=l(kJ,[["render",MJ]]),Pw={name:"TableExpand",props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render(){const o={row:this.row,index:this.index};return this.column&&(o.column=this.column),this.render(t.h,o)}},EJ={name:"TableSlot",inject:["TableInstance"],props:{row:Object,index:Number,column:{type:Object,default:null},display:{type:String,default:"block"}},render(){return t.h("div",{class:{"ivu-table-cell-slot":!0,"ivu-table-cell-slot-inline":this.display==="inline","ivu-table-cell-slot-inline-block":this.display==="inline-block"}},this.TableInstance.$slots[this.column.slot]({row:this.row,column:this.column,index:this.index}))}};const PJ={name:"TableCell",components:{Icon:S,Checkbox:Vu,TableExpand:Pw,TableSlot:EJ,Tooltip:Va},inject:["TableInstance"],props:{prefixCls:String,row:Object,column:Object,naturalIndex:Number,index:Number,checked:Boolean,disabled:Boolean,expanded:Boolean,fixed:{type:[Boolean,String],default:!1},treeNode:Boolean,treeLevel:{type:Number,default:0}},data(){return{renderType:"",uid:-1,context:this.$parent.$parent.$parent.currentContext,showTooltip:!1}},computed:{classes(){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&this.column.fixed&&(this.column.fixed==="left"||this.column.fixed==="right"),[`${this.prefixCls}-cell-ellipsis`]:this.column.ellipsis||!1,[`${this.prefixCls}-cell-with-expand`]:this.renderType==="expand",[`${this.prefixCls}-cell-with-selection`]:this.renderType==="selection"}]},expandCls(){return[`${this.prefixCls}-cell-expand`,{[`${this.prefixCls}-cell-expand-expanded`]:this.expanded}]},showChildren(){let o=!1;if(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot"){const c=this.row;(c.children&&c.children.length||"_loading"in c)&&this.column.tree&&(o=!0)}return o},showTreeNode(){let o=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(o=!0),o},showLevel(){let o=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(o=!0),o},treeLevelStyle(){return{"padding-left":this.treeLevel*this.TableInstance.indentSize+"px"}},childrenExpand(){return this.TableInstance.getDataByRowKey(this.row._rowKey)._isShowChildren},childrenLoading(){const o=this.TableInstance.getDataByRowKey(this.row._rowKey);return"_loading"in o&&o._loading}},methods:{toggleSelect(){this.treeNode?this.$parent.$parent.$parent.toggleSelect(this.index,this.row._rowKey):this.$parent.$parent.$parent.toggleSelect(this.index)},toggleExpand(){this.$parent.$parent.$parent.toggleExpand(this.index)},handleClick(){},handleTooltipIn(){if(!r)return;const o=this.$refs.content;let c=document.createRange();c.setStart(o,0),c.setEnd(o,o.childNodes.length);const d=c.getBoundingClientRect().width;this.showTooltip=d>o.offsetWidth,c=null},handleToggleTree(){this.$parent.$parent.$parent.toggleTree(this.row._rowKey)}},created(){this.column.type==="index"?this.renderType="index":this.column.type==="selection"?this.renderType="selection":this.column.type==="html"?this.renderType="html":this.column.type==="expand"?this.renderType="expand":this.column.render?this.renderType="render":this.column.slot?this.renderType="slot":this.renderType="normal"}},AJ={key:0},RJ={key:4,class:"ivu-table-cell-tree ivu-table-cell-tree-empty"},IJ=["innerHTML"],DJ={key:1};function NJ(o,c,d,C,b,m){const E=t.resolveComponent("Checkbox"),V=t.resolveComponent("Icon"),W=t.resolveComponent("Tooltip"),z=t.resolveComponent("table-expand"),G=t.resolveComponent("table-slot");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),ref:"cell"},[b.renderType==="index"?(t.openBlock(),t.createElementBlock("span",AJ,t.toDisplayString(d.column.indexMethod?d.column.indexMethod(d.row,d.naturalIndex):d.naturalIndex+1),1)):t.createCommentVNode("",!0),b.renderType==="selection"?(t.openBlock(),t.createBlock(E,{key:1,"model-value":d.checked,onClick:t.withModifiers(m.handleClick,["stop"]),onOnChange:m.toggleSelect,disabled:d.disabled},null,8,["model-value","onClick","onOnChange","disabled"])):t.createCommentVNode("",!0),m.showLevel?(t.openBlock(),t.createElementBlock("div",{key:2,class:"ivu-table-cell-tree-level",style:t.normalizeStyle(m.treeLevelStyle)},null,4)):t.createCommentVNode("",!0),m.showChildren?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(["ivu-table-cell-tree",{"ivu-table-cell-tree-loading":m.childrenLoading}]),onClick:c[0]||(c[0]=t.withModifiers((...ae)=>m.handleToggleTree&&m.handleToggleTree(...ae),["prevent","stop"]))},[m.childrenLoading?(t.openBlock(),t.createBlock(V,{key:0,type:"ios-loading",class:"ivu-load-loop"})):m.childrenExpand?(t.openBlock(),t.createBlock(V,{key:2,type:"ios-remove"})):(t.openBlock(),t.createBlock(V,{key:1,type:"ios-add"}))],2)):m.showTreeNode?(t.openBlock(),t.createElementBlock("div",RJ)):t.createCommentVNode("",!0),b.renderType==="html"?(t.openBlock(),t.createElementBlock("span",{key:5,innerHTML:d.row[d.column.key]},null,8,IJ)):t.createCommentVNode("",!0),b.renderType==="normal"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:6},[d.column.tooltip?(t.openBlock(),t.createBlock(W,{key:0,transfer:"",content:d.row[d.column.key],theme:d.column.tooltipTheme?d.column.tooltipTheme:m.TableInstance.tooltipTheme,disabled:!b.showTooltip,"max-width":d.column.tooltipMaxWidth?d.column.tooltipMaxWidth:m.TableInstance.tooltipMaxWidth,class:"ivu-table-cell-tooltip"},{default:t.withCtx(()=>[t.createElementVNode("span",{ref:"content",onMouseenter:c[1]||(c[1]=(...ae)=>m.handleTooltipIn&&m.handleTooltipIn(...ae)),class:"ivu-table-cell-tooltip-content"},t.toDisplayString(d.row[d.column.key]),545)]),_:1},8,["content","theme","disabled","max-width"])):(t.openBlock(),t.createElementBlock("span",DJ,t.toDisplayString(d.row[d.column.key]),1))],64)):t.createCommentVNode("",!0),b.renderType==="expand"&&!d.row._disableExpand?(t.openBlock(),t.createElementBlock("div",{key:7,class:t.normalizeClass(m.expandCls),onClick:c[2]||(c[2]=(...ae)=>m.toggleExpand&&m.toggleExpand(...ae))},[t.createVNode(V,{type:"ios-arrow-forward"})],2)):t.createCommentVNode("",!0),b.renderType==="render"?(t.openBlock(),t.createBlock(z,{key:8,row:d.row,column:d.column,index:d.index,render:d.column.render},null,8,["row","column","index","render"])):t.createCommentVNode("",!0),b.renderType==="slot"?(t.openBlock(),t.createBlock(G,{key:9,row:d.row,column:d.column,display:d.column.display||"block",index:d.index},null,8,["row","column","display","index"])):t.createCommentVNode("",!0)],2)}var Aw=l(PJ,[["render",NJ]]);const $J={name:"TableBody",mixins:[Mw],components:{TableCell:Aw,Expand:Pw,TableTr:Ew},props:{prefixCls:String,styleObject:Object,columns:Array,data:Array,objData:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1},rowKey:{type:[Boolean,String],default:!1}},computed:{expandRender(){let o=function(){return""};for(let c=0;c<this.columns.length;c++){const d=this.columns[c];d.type&&d.type==="expand"&&d.render&&(o=d.render)}return o}},methods:{rowChecked(o){return this.objData[o]&&this.objData[o]._isChecked},rowDisabled(o){return this.objData[o]&&this.objData[o]._isDisabled},rowExpanded(o){return this.objData[o]&&this.objData[o]._isExpanded},rowStatusByRowKey(o,c){return this.$parent.getDataByRowKey(c)[o]},handleMouseIn(o,c,d){c.stopPropagation(),this.$parent.handleMouseIn(o,d)},handleMouseOut(o,c,d){c.stopPropagation(),this.$parent.handleMouseOut(o,d)},clickCurrentRow(o,c,d){this.$parent.clickCurrentRow(o,d)},dblclickCurrentRow(o,c,d){c.stopPropagation(),this.$parent.dblclickCurrentRow(o,d)},clickCell(o,c,d,C){this.$parent.$emit("on-cell-click",o,c,o[d],C)},contextmenuCurrentRow(o,c,d){c.stopPropagation(),this.$parent.contextMenu&&c.preventDefault(),this.$parent.contextmenuCurrentRow(o,d,c)},selectStartCurrentRow(){this.$parent.contextMenu},getSpan(o,c,d,C){const b=this.$parent.spanMethod;if(typeof b=="function"){const m=b({row:o,column:c,rowIndex:d,columnIndex:C});let E=1,V=1;return Array.isArray(m)?(E=m[0],V=m[1]):typeof m=="object"&&(E=m.rowspan,V=m.colspan),{rowspan:E,colspan:V}}else return{}},showWithSpan(o,c,d,C){const b=this.getSpan(o,c,d,C);return!("rowspan"in b&&b.rowspan===0||"colspan"in b&&b.colspan===0)},isTrShow(o){let c=!0,d;for(let C in this.objData){const b=this.objData[C],m=b._isShowChildren;if(b._rowKey===o){c=c&&m;break}else if(b.children&&b.children.length&&(d=this.getTrStatus(o,b,c&&m),d[0]&&d[0]._rowKey===o))return d[1]}return c},getTrStatus(o,c,d){let C=d,b;if(c.children&&c.children.length)for(let m=0;m<c.children.length;m++){const E=c.children[m],V=E._isShowChildren;if(E._rowKey===o){b=E,C=C&&V;break}else if(E.children&&E.children.length){const W=this.getTrStatus(o,E,C&&V);if(W[0]&&W[0]._rowKey===o)return W}}return[b,C]},getLevel(o){let c,d;for(let C=0;C<this.data.length;C++){const b=this.data[C];if(b[this.rowKey]===o){c=0;break}else if(b.children&&b.children.length&&(d=this.getChildLevel(b,o,1),d[0]&&d[0][this.rowKey]===o))return d[1]}return c},getChildLevel(o,c,d){let C,b;if(o.children&&o.children.length)for(let m=0;m<o.children.length;m++){const E=o.children[m];if(E[this.rowKey]===c){b=E,C=d;break}else if(E.children&&E.children.length){const V=this.getChildLevel(E,c,d+1);if(V[0]&&V[0][this.rowKey]===c)return V}}return[b,C]},getChildNode(o,c,d){return c.children&&c.children.length&&c.children.forEach((C,b)=>{let m=[];this.columns.forEach((W,z)=>{if(this.showWithSpan(C,W,b,z)){const G=o(Aw,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:C,column:W,"natural-index":b,index:C._index,checked:this.rowStatusByRowKey("_isChecked",C._rowKey),disabled:this.rowStatusByRowKey("_isDisabled",C._rowKey),expanded:this.rowStatusByRowKey("_isExpanded",C._rowKey),treeNode:!0,treeLevel:this.getLevel(C._rowKey),key:W._columnKey}),ae=o("td",{class:this.alignCls(W,C),...this.getSpan(C,W,b,z),onClick:xe=>this.clickCell(C,W,W.key,xe)},[G]);m.push(ae)}});const E={};this.isTrShow(c._rowKey)||(E.display="none");const V=o(Ew,{draggable:!1,row:C,"prefix-cls":this.prefixCls,isChildren:!0,style:E,key:this.rowKey?C._rowKey:b,onMouseenter:W=>this.handleMouseIn(C._index,W,C._rowKey),onMouseleave:W=>this.handleMouseOut(C._index,W,C._rowKey),onClick:W=>this.clickCurrentRow(C._index,W,C._rowKey),onDblclick:W=>this.dblclickCurrentRow(C._index,W,C._rowKey),onContextmenu:W=>this.contextmenuCurrentRow(C._index,W,C._rowKey),onSelectstart:W=>this.selectStartCurrentRow(C._index,W,C._rowKey)},()=>m);d.push(V),C.children&&C.children.length&&this.getChildNode(o,C,d)}),d}},render(){let o=[];this.columns.forEach(b=>{const m=t.h("col",{width:this.setCellWidth(b)});o.push(m)});const c=t.h("colgroup",{},o);let d=[];this.data.forEach((b,m)=>{let E=[];this.columns.forEach((W,z)=>{if(this.showWithSpan(b,W,m,z)){const G=t.h(Aw,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:b,column:W,"natural-index":m,index:b._index,checked:this.rowChecked(b._index),disabled:this.rowDisabled(b._index),expanded:this.rowExpanded(b._index),key:W._columnKey}),ae=t.h("td",{class:this.alignCls(W,b),...this.getSpan(b,W,m,z),onClick:xe=>this.clickCell(b,W,W.key,xe)},[G]);E.push(ae)}});const V=t.h(Ew,{draggable:this.draggable,row:b,"prefix-cls":this.prefixCls,key:this.rowKey?b._rowKey:m,onMouseenter:W=>this.handleMouseIn(b._index,W),onMouseleave:W=>this.handleMouseOut(b._index,W),onClick:W=>this.clickCurrentRow(b._index,W),onDblclick:W=>this.dblclickCurrentRow(b._index,W),onContextmenu:W=>this.contextmenuCurrentRow(b._index,W),onSelectstart:W=>this.selectStartCurrentRow(b._index,W)},()=>E);if(d.push(V),this.rowExpanded(b._index)){const W=t.h(Pw,{row:b,render:this.expandRender,index:b._index,key:this.rowKey?b._rowKey:m}),z=t.h("td",{colspan:this.columns.length,class:this.prefixCls+"-expanded-cell"},[W]),G=t.h("tr",{class:{[this.prefixCls+"-expanded-hidden"]:this.fixed}},[z]);d.push(G)}b.children&&b.children.length&&this.getChildNode(t.h,b,[]).forEach(W=>{d.push(W)})});const C=t.h("tbody",{class:this.prefixCls+"-tbody"},[d]);return t.h("table",{cellspacing:"0",cellpadding:"0",border:"0",style:this.styleObject},[c,C])}},VJ={name:"TableSummary",mixins:[Mw],props:{prefixCls:String,styleObject:Object,columns:Array,data:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1}},methods:{cellCls(o){return[{"ivu-table-hidden":this.fixed==="left"&&o.fixed!=="left"||this.fixed==="right"&&o.fixed!=="right"||!this.fixed&&o.fixed&&(o.fixed==="left"||o.fixed==="right")}]}}},LJ={style:{overflow:"hidden"}},BJ=["width"],UJ={class:"ivu-table-row"};function zJ(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("div",LJ,[t.createElementVNode("table",{class:"ivu-table-summary",cellspacing:"0",cellpadding:"0",border:"0",style:t.normalizeStyle(d.styleObject)},[t.createElementVNode("colgroup",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.columns,(E,V)=>(t.openBlock(),t.createElementBlock("col",{key:V,width:o.setCellWidth(E)},null,8,BJ))),128))]),t.createElementVNode("tbody",{class:t.normalizeClass([d.prefixCls+"-tbody"])},[t.createElementVNode("tr",UJ,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.columns,(E,V)=>(t.openBlock(),t.createElementBlock("td",{key:V,class:t.normalizeClass(o.alignCls(E))},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-table-cell",m.cellCls(E)])},[t.createElementVNode("span",null,t.toDisplayString(d.data[E.key].value),1)],2)],2))),128))])],2)],4)])}var FJ=l(VJ,[["render",zJ]]);const XJ=`\r
`,Rw=(o,c,{separator:d,quoted:C})=>{const b=c.map(m=>C?(m=typeof m=="string"?m.replace(/"/g,'"'):m,`"${m}"`):m);o.push(b.join(d))},WJ={separator:",",quoted:!1};function QJ(o,c,d,C=!1){d=Object.assign({},WJ,d);let b;const m=[],E=[];return o?(b=o.map(V=>typeof V=="string"?V:(C||E.push(typeof V.title<"u"?V.title:V.key),V.key)),E.length>0&&Rw(m,E,d)):(b=[],c.forEach(V=>{Array.isArray(V)||(b=b.concat(Object.keys(V)))}),b.length>0&&(b=b.filter((V,W,z)=>z.indexOf(V)===W),C||Rw(m,b,d))),Array.isArray(c)&&c.forEach(V=>{Array.isArray(V)||(V=b.map(W=>typeof V[W]<"u"?V[W]:"")),Rw(m,V,d)}),m.join(XJ)}function Iw(o){const c=navigator.userAgent;return c.indexOf("compatible")>-1&&c.indexOf("MSIE")>-1?(new RegExp("MSIE (\\d+\\.\\d+);").test(c),parseFloat(RegExp.$1)):!1}const HJ={_isIE11(){let o=0;const c=/MSIE (\d+\.\d+);/.test(navigator.userAgent),d=!!navigator.userAgent.match(/Trident\/7.0/),C=navigator.userAgent.indexOf("rv:11.0");return c&&(o=Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!==-1&&(o=10),d&&C!==-1&&(o=11),o===11},_isEdge(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl(o){const c="\uFEFF";if(r&&window.Blob&&window.URL&&window.URL.createObjectURL){const d=new Blob([c+o],{type:"text/csv"});return URL.createObjectURL(d)}else return"data:attachment/csv;charset=utf-8,"+c+encodeURIComponent(o)},download(o,c){if(r)if(Iw()&&Iw()<10){const d=window.top.open("about:blank","_blank");d.document.charset="utf-8",d.document.write(c),d.document.close(),d.document.execCommand("SaveAs",o),d.close()}else if(Iw()===10||this._isIE11()||this._isEdge()){const d="\uFEFF",C=new Blob([d+c],{type:"text/csv"});navigator.msSaveBlob(C,o)}else{const d=document.createElement("a");d.download=o,d.href=this._getDownloadUrl(c),document.body.appendChild(d),d.click(),document.body.removeChild(d)}}},Nv=(o,c)=>{let d=[],C=[];return o.forEach(b=>{b.fixed&&b.fixed===c?d.push(b):C.push(b)}),d.concat(C)},Pp=(o,c=!1)=>{const d=L(o),C=[];return d.forEach(b=>{b.children?(c&&C.push(b),C.push.apply(C,Pp(b.children,c))):C.push(b)}),C},GJ=(o,c=!1)=>{const d=L(c?c==="left"?Nv(o,"left"):Nv(o,"right"):o);let C=1;const b=(E,V)=>{if(V&&(E.level=V.level+1,C<E.level&&(C=E.level)),E.children){let W=0;E.children.forEach(z=>{b(z,E),W+=z.colSpan}),E.colSpan=W}else E.colSpan=1};d.forEach(E=>{E.level=1,b(E)});const m=[];for(let E=0;E<C;E++)m.push([]);return Pp(d,!0).forEach(E=>{E.children?E.rowSpan=1:E.rowSpan=C-E.level+1,m[E.level-1].push(E)}),m},YJ=function(o=32){const c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",d=c.length;let C="";for(let b=0;b<o;b++)C+=c.charAt(Math.floor(Math.random()*d));return C},lr="ivu-table";let cA=1,jJ=1;const qJ={name:"Table",mixins:[Qn],components:{tableHead:CJ,tableBody:$J,tableSummary:FJ,Spin:Ls,Dropdown:hh,DropdownMenu:uh},emits:["on-current-change","on-row-click","on-row-dblclick","on-contextmenu","on-select","on-select-cancel","on-selection-change","on-expand","on-expand-tree","on-select-all","on-select-all-cancel","on-sort-change","on-filter-change","on-drag-drop","on-cell-click","on-column-width-resize"],provide(){return{TableInstance:this}},inject:{TabsInstance:{default:null},ModalInstance:{default:null},DrawerInstance:{default:null}},props:{data:{type:Array,default(){return[]}},columns:{type:Array,default(){return[]}},size:{validator(o){return _(o,["small","large","default"])},default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.size===""?"default":o.$VIEWUI.size}},width:{type:[Number,String]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tooltipTheme:{validator(o){return _(o,["dark","light"])},default:"dark"},tooltipMaxWidth:{type:Number,default:300},rowKey:{type:[Boolean,String],default:!1},spanMethod:{type:Function},showSummary:{type:Boolean,default:!1},summaryMethod:{type:Function},sumText:{type:String},indentSize:{type:Number,default:16},loadData:{type:Function},updateShowChildren:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},showContextMenu:{type:Boolean,default:!1},fixedShadow:{validator(o){return _(o,["auto","show","hide"])},default:"show"},autoCloseContextmenu:{type:Boolean,default:!0}},data(){const o=this.makeColumnsId(this.columns);return{ready:!1,tableWidth:0,columnsWidth:{},prefixCls:lr,compiledUids:[],objData:this.makeObjData(),rebuildData:[],cloneColumns:this.makeColumns(o),columnRows:this.makeColumnRows(!1,o),leftFixedColumnRows:this.makeColumnRows("left",o),rightFixedColumnRows:this.makeColumnRows("right",o),allColumns:Pp(o),showSlotHeader:!0,showSlotFooter:!0,bodyHeight:0,scrollBarWidth:k(),currentContext:this.context,cloneData:L(this.data),showVerticalScrollBar:!1,showHorizontalScrollBar:!1,headerWidth:0,headerHeight:0,showResizeLine:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},scrollOnTheLeft:!1,scrollOnTheRight:!1,id:te(6)}},computed:{localeNoDataText(){return this.noDataText===void 0?this.t("i.table.noDataText"):this.noDataText},localeNoFilteredDataText(){return this.noFilteredDataText===void 0?this.t("i.table.noFilteredDataText"):this.noFilteredDataText},localeSumText(){return this.sumText===void 0?this.t("i.table.sumText"):this.sumText},wrapClasses(){return[`${lr}-wrapper`,{[`${lr}-hide`]:!this.ready,[`${lr}-with-header`]:this.showSlotHeader,[`${lr}-with-footer`]:this.showSlotFooter,[`${lr}-with-summary`]:this.showSummary,[`${lr}-wrapper-with-border`]:this.border}]},classes(){return[`${lr}`,{[`${lr}-${this.size}`]:!!this.size,[`${lr}-border`]:this.border,[`${lr}-stripe`]:this.stripe,[`${lr}-with-fixed-top`]:!!this.height}]},fixedTableClasses(){return[`${lr}-fixed`,{[`${lr}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheLeft}]},fixedRightTableClasses(){return[`${lr}-fixed-right`,{[`${lr}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheRight}]},fixedHeaderClasses(){return[`${lr}-fixed-header`,{[`${lr}-fixed-header-with-empty`]:!this.rebuildData.length}]},styles(){let o={},c=0;if(this.showSummary&&(this.size==="small"?c=40:this.size==="large"?c=60:c=48),this.height){let d=parseInt(this.height)+c;o.height=`${d}px`}if(this.maxHeight){const d=parseInt(this.maxHeight)+c;o.maxHeight=`${d}px`}return this.width&&(o.width=`${this.width}px`),o},tableStyle(){let o={};if(this.tableWidth!==0){let c="";this.bodyHeight===0?c=this.tableWidth:c=this.tableWidth-(this.showVerticalScrollBar?this.scrollBarWidth:0),o.width=`${c}px`}return o},tableHeaderStyle(){let o={};if(this.tableWidth!==0){let c="";c=this.tableWidth,o.width=`${c}px`}return o},fixedTableStyle(){let o={},c=0;return this.leftFixedColumns.forEach(d=>{d.fixed&&d.fixed==="left"&&(c+=d._width)}),o.width=`${c}px`,o},fixedRightTableStyle(){let o={},c=0;return this.rightFixedColumns.forEach(d=>{d.fixed&&d.fixed==="right"&&(c+=d._width)}),o.width=`${c}px`,o.right=`${this.showVerticalScrollBar?this.scrollBarWidth:0}px`,o},fixedRightHeaderStyle(){let o={},c=0,d=this.headerHeight+1;return this.showVerticalScrollBar&&(c=this.scrollBarWidth),o.width=`${c}px`,o.height=`${d}px`,o},bodyStyle(){let o={};if(this.bodyHeight!==0){const c=this.bodyHeight;this.height?o.height=`${c}px`:this.maxHeight&&(o.maxHeight=`${c}px`)}return o},fixedBodyStyle(){let o={};if(this.bodyHeight!==0){let c=this.bodyHeight-(this.showHorizontalScrollBar?this.scrollBarWidth:0);const d=this.showHorizontalScrollBar?`${c}px`:`${c-1}px`;this.height?o.height=d:this.maxHeight&&(o.maxHeight=d)}return o},leftFixedColumns(){return Nv(this.cloneColumns,"left")},rightFixedColumns(){return Nv(this.cloneColumns,"right")},isLeftFixed(){return this.columns.some(o=>o.fixed&&o.fixed==="left")},isRightFixed(){return this.columns.some(o=>o.fixed&&o.fixed==="right")},summaryData(){if(!this.showSummary)return{};let o={};return this.summaryMethod?o=this.summaryMethod({columns:this.cloneColumns,data:this.rebuildData}):this.cloneColumns.forEach((c,d)=>{const C=c.key;if(d===0){o[C]={key:c.key,value:this.localeSumText};return}const b=this.rebuildData.map(W=>Number(W[c.key])),m=[];let E=!0;b.forEach(W=>{if(!isNaN(W)){E=!1;let z=(""+W).split(".")[1];m.push(z?z.length:0)}});const V=Math.max.apply(null,m);if(E)o[C]={key:c.key,value:""};else{const W=b.reduce((z,G)=>{const ae=Number(G);return isNaN(ae)?z:parseFloat((z+G).toFixed(Math.min(V,20)))},0);o[C]={key:c.key,value:W}}}),o}},methods:{rowClsName(o){return this.rowClassName(this.data[o],o)},handleResize(){let o=this.$el.offsetWidth-1,c={},d=0,C=[],b=[],m=[];this.cloneColumns.forEach(G=>{G.width?C.push(G):(b.push(G),G.minWidth&&(d+=G.minWidth),G.maxWidth||m.push(G)),G._width=null});let E=C.map(G=>G.width).reduce((G,ae)=>G+ae,0),V=o-E-d-(this.showVerticalScrollBar?this.scrollBarWidth:0)-1,W=b.length,z=0;V>0&&W>0&&(z=parseInt(V/W));for(let G=0;G<this.cloneColumns.length;G++){const ae=this.cloneColumns[G];let xe=z+(ae.minWidth?ae.minWidth:0);ae.width?xe=ae.width:ae._width?xe=ae._width:(ae.minWidth>xe?xe=ae.minWidth:ae.maxWidth<xe&&(xe=ae.maxWidth),V>0?(V-=xe-(ae.minWidth?ae.minWidth:0),W--,W>0?z=parseInt(V/W):z=0):z=0),ae._width=xe,c[ae._index]={width:xe}}if(V>0){W=m.length,z=parseInt(V/W);for(let G=0;G<m.length;G++){const ae=m[G];let xe=ae._width+z;W>1?(W--,V-=z,z=parseInt(V/W)):z=0,ae._width=xe,c[ae._index]={width:xe}}}this.tableWidth=this.cloneColumns.map(G=>G._width).reduce((G,ae)=>G+ae,0)+(this.showVerticalScrollBar?this.scrollBarWidth:0)+1,this.columnsWidth=c,this.fixedHeader(),this.fixedShadow==="auto"&&t.nextTick(()=>{const G=this.$refs.body;this.scrollOnTheLeft=G.scrollLeft===0,this.scrollOnTheRight=G.scrollWidth===G.scrollLeft+G.clientWidth})},handleMouseIn(o,c){if(this.disabledHover)return;const d=c?this.getDataByRowKey(c):this.objData[o];d._isHover||(d._isHover=!0)},handleMouseOut(o,c){if(this.disabledHover)return;const d=c?this.getDataByRowKey(c):this.objData[o];d._isHover=!1},handleCurrentRow(o,c,d){const C=d?this.getDataByRowKey(d):this.objData[c];let b=null,m=-1;for(let V in this.objData)if(this.objData[V]._isHighlight){m=parseInt(V),this.objData[V]._isHighlight=!1;break}else if(this.objData[V].children&&this.objData[V].children.length){const W=this.handleResetChildrenRow(this.objData[V]);W&&(b=JSON.parse(JSON.stringify(W)))}o==="highlight"&&(C._isHighlight=!0),m>=0&&(b=JSON.parse(JSON.stringify(this.cloneData[m])));const E=o==="highlight"?JSON.parse(JSON.stringify(d?this.getBaseDataByRowKey(d):this.cloneData[c])):null;this.$emit("on-current-change",E,b)},handleResetChildrenRow(o){let c=null;if(o.children&&o.children.length)for(let d=0;d<o.children.length;d++){const C=o.children[d];if(C._isHighlight){C._isHighlight=!1,c=C;break}else C.children&&C.children.length&&(c=this.handleResetChildrenRow(C))}return c},highlightCurrentRow(o,c){const d=c?this.getDataByRowKey(c):this.objData[o];!this.highlightRow||d._isHighlight||this.handleCurrentRow("highlight",o,c)},clearCurrentRow(){!this.highlightRow||this.handleCurrentRow("clear")},clickCurrentRow(o,c){this.highlightCurrentRow(o,c),c?this.$emit("on-row-click",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(c)))):this.$emit("on-row-click",JSON.parse(JSON.stringify(this.cloneData[o])),o)},dblclickCurrentRow(o,c){this.highlightCurrentRow(o,c),c?this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(c)))):this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.cloneData[o])),o)},contextmenuCurrentRow(o,c,d){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const C=this.$refs.tableWrap.getBoundingClientRect(),b={left:`${d.clientX-C.left}px`,top:`${d.clientY-C.top}px`};this.contextMenuStyles=b,this.contextMenuVisible=!0,c?this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(c))),d,b):this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.cloneData[o])),d,b)})},getSelection(){let o=[],c=[];for(let C in this.objData){const b=this.objData[C];b._isChecked&&o.push(parseInt(C)),b.children&&b.children.length&&(c=c.concat(this.getSelectionChildrenRowKeys(b,c)))}c=[...new Set(c)];let d=[];return this.data.forEach((C,b)=>{o.indexOf(b)>-1&&(d=d.concat(C)),C.children&&C.children.length&&c.length&&(d=d.concat(this.getSelectionChildren(C,d,c)))}),d=[...new Set(d)],JSON.parse(JSON.stringify(d))},getSelectionChildrenRowKeys(o,c){return o.children&&o.children.length&&o.children.forEach(d=>{d._isChecked&&c.push(d._rowKey),d.children&&d.children.length&&(c=c.concat(this.getSelectionChildrenRowKeys(d,c)))}),c},getSelectionChildren(o,c,d){return o.children&&o.children.length&&o.children.forEach(C=>{d.indexOf(C[this.rowKey])>-1&&(c=c.concat(C)),C.children&&C.children.length&&(c=c.concat(this.getSelectionChildren(C,c,d)))}),c},toggleSelect(o,c){let d={};if(c)d=this.getDataByRowKey(c);else for(let E in this.objData)if(parseInt(E)===o){d=this.objData[E];break}const C=!d._isChecked;d._isChecked=C;const b=this.getSelection(),m=c?this.getBaseDataByRowKey(c,this.data):this.data[o];this.$emit(C?"on-select":"on-select-cancel",b,JSON.parse(JSON.stringify(m))),this.$emit("on-selection-change",b)},toggleExpand(o){let c={};for(let C in this.objData)if(parseInt(C)===o){c=this.objData[C];break}const d=!c._isExpanded;this.objData[o]._isExpanded=d,this.$emit("on-expand",JSON.parse(JSON.stringify(this.cloneData[o])),d),(this.height||this.maxHeight)&&t.nextTick(()=>this.fixedBody())},toggleTree(o){const c=this.getDataByRowKey(o);if(!("_loading"in c&&c._loading)){if("_loading"in c&&!c._loading&&c.children.length===0){const d=this.getBaseDataByRowKey(o,this.data);d._loading=!0,this.loadData(d,C=>{d._loading=!1,C.length&&(d.children=C,t.nextTick(()=>{const b=this.getDataByRowKey(o);b._isShowChildren=!b._isShowChildren,this.updateDataStatus(o,"_showChildren",b._isShowChildren)}))});return}c._isShowChildren=!c._isShowChildren,this.updateShowChildren&&this.updateDataStatus(o,"_showChildren",c._isShowChildren),this.$emit("on-expand-tree",o,c._isShowChildren)}},updateDataStatus(o,c,d){const C=this.getBaseDataByRowKey(o,this.data);C[c]=d},getDataByRowKey(o,c=this.objData){let d=null;for(let C in c){const b=c[C];if(b._rowKey===o){d=b;break}else if(b.children&&b.children.length&&(d=this.getChildrenByRowKey(o,b),d))break}return d},getChildrenByRowKey(o,c){let d=null;if(c.children&&c.children.length)for(let C=0;C<c.children.length;C++){const b=c.children[C];if(b._rowKey===o){d=b;break}else if(b.children&&b.children.length&&(d=this.getChildrenByRowKey(o,b),d))break}return d},getBaseDataByRowKey(o,c=this.cloneData){let d=null;for(let C=0;C<c.length;C++){const b=c[C];if(b[this.rowKey]===o){d=b;break}else if(b.children&&b.children.length&&(d=this.getChildrenDataByRowKey(o,b),d&&d[this.rowKey]===o))return d}return d},getChildrenDataByRowKey(o,c){let d=null;if(c.children&&c.children.length)for(let C=0;C<c.children.length;C++){const b=c.children[C];if(b[this.rowKey]===o){d=b;break}else if(b.children&&b.children.length&&(d=this.getChildrenDataByRowKey(o,b),d))break}return d},selectAll(o){for(const d of this.rebuildData){const C=this.objData[d._index];C._isDisabled||(C._isChecked=o),d.children&&d.children.length&&this.selectAllChildren(C,o)}const c=this.getSelection();o?this.$emit("on-select-all",c):this.$emit("on-select-all-cancel",c),this.$emit("on-selection-change",c)},selectAllChildren(o,c){o.children&&o.children.length&&o.children.map(d=>{d._isDisabled||(d._isChecked=c),d.children&&d.children.length&&this.selectAllChildren(d,c)})},fixedHeader(){this.height||this.maxHeight?t.nextTick(()=>{const o=parseInt(R(this.$refs.title,"height"))||0,c=parseInt(R(this.$refs.header,"height"))||0,d=parseInt(R(this.$refs.footer,"height"))||0;this.height?this.bodyHeight=this.height-o-c-d:this.maxHeight&&(this.bodyHeight=this.maxHeight-o-c-d),t.nextTick(()=>this.fixedBody())}):(this.bodyHeight=0,t.nextTick(()=>this.fixedBody()))},fixedBody(){if(this.$refs.header&&(this.headerWidth=this.$refs.header.children[0].offsetWidth,this.headerHeight=this.$refs.header.children[0].offsetHeight),!this.$refs.tbody||!this.data||this.data.length===0)this.showVerticalScrollBar=!1;else{let o=this.$refs.tbody.$el,c=o.parentElement,d=o.offsetHeight,C=c.offsetHeight;this.showHorizontalScrollBar=c.offsetWidth<o.offsetWidth+(this.showVerticalScrollBar?this.scrollBarWidth:0),this.showVerticalScrollBar=this.bodyHeight?C-(this.showHorizontalScrollBar?this.scrollBarWidth:0)<d:!1,this.showVerticalScrollBar?c.classList.add(this.prefixCls+"-overflowY"):c.classList.remove(this.prefixCls+"-overflowY"),this.showHorizontalScrollBar?c.classList.add(this.prefixCls+"-overflowX"):c.classList.remove(this.prefixCls+"-overflowX")}},hideColumnFilter(){this.cloneColumns.forEach(o=>o._filterVisible=!1)},handleBodyScroll(o){this.scrollOnTheLeft=o.target.scrollLeft===0,this.scrollOnTheRight=o.target.scrollWidth===o.target.scrollLeft+o.target.clientWidth,this.showHeader&&(this.$refs.header.scrollLeft=o.target.scrollLeft),this.isLeftFixed&&(this.$refs.fixedBody.scrollTop=o.target.scrollTop),this.isRightFixed&&(this.$refs.fixedRightBody.scrollTop=o.target.scrollTop),this.showSummary&&this.$refs.summary&&(this.$refs.summary.$el.scrollLeft=o.target.scrollLeft),this.hideColumnFilter()},handleFixedMousewheel(o){let c=o.deltaY;if(!c&&o.detail&&(c=o.detail*40),!c&&o.wheelDeltaY&&(c=-o.wheelDeltaY),!c&&o.wheelDelta&&(c=-o.wheelDelta),!c)return;const d=this.$refs.body,C=d.scrollTop;c<0&&C!==0&&o.preventDefault(),c>0&&d.scrollHeight-d.clientHeight>C&&o.preventDefault();let b=0,m=setInterval(()=>{b+=5,c>0?d.scrollTop+=2:d.scrollTop-=2,b>=Math.abs(c)&&clearInterval(m)},5)},handleMouseWheel(o){const c=o.deltaX,d=this.$refs.body;c>0?d.scrollLeft=d.scrollLeft+10:d.scrollLeft=d.scrollLeft-10},sortData(o,c,d){const C=this.cloneColumns[d].key;o.sort((b,m)=>{if(this.cloneColumns[d].sortMethod)return this.cloneColumns[d].sortMethod(b[C],m[C],c);if(c==="asc")return b[C]>m[C]?1:-1;if(c==="desc")return b[C]<m[C]?1:-1});for(let b=0;b<o.length;b++)o[b].children&&o[b].children.length&&(o[b].children=this.sortData(o[b].children,c,d));return o},handleSort(o,c){const d=this.GetOriginalIndex(o);this.cloneColumns.forEach(b=>b._sortType="normal");const C=this.cloneColumns[d].key;this.cloneColumns[d].sortable!=="custom"&&(c==="normal"?this.rebuildData=this.makeDataWithFilter():this.rebuildData=this.sortData(this.rebuildData,c,d)),this.cloneColumns[d]._sortType=c,this.$emit("on-sort-change",{column:JSON.parse(JSON.stringify(this.allColumns[this.cloneColumns[d]._index])),key:C,order:c})},handleFilterHide(o){this.cloneColumns[o]._isFiltered||(this.cloneColumns[o]._filterChecked=[])},filterData(o,c){return o.filter(d=>{if(typeof c.filterRemote=="function")return!0;let C=!c._filterChecked.length;for(let b=0;b<c._filterChecked.length&&(C=c.filterMethod(c._filterChecked[b],d),!C);b++);return C})},filterOtherData(o,c){let d=this.cloneColumns[c];return typeof d.filterRemote=="function"&&d.filterRemote.call(this.$parent,d._filterChecked,d.key,d),this.cloneColumns.forEach((C,b)=>{b!==c&&(o=this.filterData(o,C))}),o},handleFilter(o){const c=this.cloneColumns[o];let d=this.makeDataWithSort();d=this.filterOtherData(d,o),this.rebuildData=this.filterData(d,c),this.cloneColumns[o]._isFiltered=!0,this.cloneColumns[o]._filterVisible=!1,this.$emit("on-filter-change",c)},GetOriginalIndex(o){return this.cloneColumns.findIndex(c=>c._index===o)},handleFilterSelect(o,c){const d=this.GetOriginalIndex(o);this.cloneColumns[d]._filterChecked=[c],this.handleFilter(d)},handleFilterReset(o){const c=this.GetOriginalIndex(o);this.cloneColumns[c]._isFiltered=!1,this.cloneColumns[c]._filterVisible=!1,this.cloneColumns[c]._filterChecked=[];let d=this.makeDataWithSort();d=this.filterOtherData(d,c),this.rebuildData=d,this.$emit("on-filter-change",this.cloneColumns[c])},makeData(){let o=L(this.data);return o.forEach((c,d)=>{c._index=d,c._rowKey=typeof this.rowKey=="string"?c[this.rowKey]:cA++,c.children&&c.children.length&&(c.children=this.makeChildrenData(c))}),o},makeChildrenData(o){return o.children&&o.children.length?o.children.map((c,d)=>{const C=L(c);return C._index=d,C._rowKey=typeof this.rowKey=="string"?C[this.rowKey]:cA++,C.children&&C.children.length&&(C.children=this.makeChildrenData(C)),C}):o},makeDataWithSort(){let o=this.makeData(),c="normal",d=-1,C=!1;for(let b=0;b<this.cloneColumns.length;b++)if(this.cloneColumns[b]._sortType!=="normal"){c=this.cloneColumns[b]._sortType,d=b,C=this.cloneColumns[b].sortable==="custom";break}return c!=="normal"&&!C&&(o=this.sortData(o,c,d)),o},makeDataWithFilter(){let o=this.makeData();return this.cloneColumns.forEach(c=>o=this.filterData(o,c)),o},makeDataWithSortAndFilter(){let o=this.makeDataWithSort();return this.cloneColumns.forEach(c=>o=this.filterData(o,c)),o},makeObjBaseData(o){const c=L(o);return typeof this.rowKey=="string"&&(c._rowKey=c[this.rowKey]),c._isHover=!1,c._disabled?c._isDisabled=c._disabled:c._isDisabled=!1,c._checked?c._isChecked=c._checked:c._isChecked=!1,c._expanded?c._isExpanded=c._expanded:c._isExpanded=!1,c._highlight?c._isHighlight=c._highlight:c._isHighlight=!1,c},makeObjData(){let o={};return this.data.forEach((c,d)=>{const C=this.makeObjBaseData(c);C.children&&C.children.length&&(C._showChildren?C._isShowChildren=C._showChildren:C._isShowChildren=!1,C.children=this.makeChildrenObjData(C)),o[d]=C}),o},makeChildrenObjData(o){return o.children&&o.children.length?o.children.map(c=>{const d=this.makeObjBaseData(c);return d._showChildren?d._isShowChildren=d._showChildren:d._isShowChildren=!1,d.children&&d.children.length&&(d.children=this.makeChildrenObjData(d)),d}):o},makeColumnsId(o){return L(o).map(c=>("children"in c&&this.makeColumnsId(c.children),c.__id=YJ(6),c))},makeColumns(o){let c=L(Pp(o)),d=[],C=[],b=[];return c.forEach((m,E)=>{m._index=E,m._columnKey=jJ++,m.width=parseInt(m.width),m._width=m.width?m.width:"",m._sortType="normal",m._filterVisible=!1,m._isFiltered=!1,m._filterChecked=[],"filterMultiple"in m?m._filterMultiple=m.filterMultiple:m._filterMultiple=!0,"filteredValue"in m&&(m._filterChecked=m.filteredValue,m._isFiltered=!0),"sortType"in m&&(m._sortType=m.sortType),m.fixed&&m.fixed==="left"?d.push(m):m.fixed&&m.fixed==="right"?C.push(m):b.push(m)}),d.concat(b).concat(C)},makeColumnRows(o,c){return GJ(c,o)},exportCsv(o){o.filename?o.filename.indexOf(".csv")===-1&&(o.filename+=".csv"):o.filename="table.csv";let c=[],d=[];o.columns&&o.data?(c=o.columns,d=o.data):(c=this.allColumns,"original"in o||(o.original=!0),d=o.original?this.data:this.rebuildData);let C=!1;"noHeader"in o&&(C=o.noHeader);const b=QJ(c,d,o,C);o.callback?o.callback(b):HJ.download(o.filename,b)},dragAndDrop(o,c){this.$emit("on-drag-drop",o,c)},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnVisibleChange(o){o&&t.nextTick(()=>{this.handleResize()})},addTable(o){const c=this[o];!c||(c.tableList||(c.tableList=[]),c.tableList.push({id:this.id,table:this}))},removeTable(o){const c=this[o];if(!c||!c.tableList)return;const d=c.tableList.findIndex(C=>C.id===this.id);c.tableList.splice(d,1)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.context||(this.currentContext=this.$parent),this.showSlotHeader=this.$slots.header!==void 0,this.showSlotFooter=this.$slots.footer!==void 0,this.rebuildData=this.makeDataWithSortAndFilter()},mounted(){this.addTable("TabsInstance"),this.addTable("ModalInstance"),this.addTable("DrawerInstance"),this.handleResize(),t.nextTick(()=>this.ready=!0),s(window,"resize",this.handleResize),this.observer=Wu(),this.observer.listenTo(this.$el,this.handleResize)},beforeUnmount(){this.removeTable("TabsInstance"),this.removeTable("ModalInstance"),this.removeTable("DrawerInstance"),a(window,"resize",this.handleResize),this.observer.removeAllListeners(this.$el),this.observer.uninstall(this.$el),this.observer=null},watch:{data:{handler(){const o=this.rebuildData.length;this.objData=this.makeObjData(),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize(),o||this.fixedHeader(),setTimeout(()=>{this.cloneData=L(this.data)},0)},deep:!0},columns:{handler(){const o=this.makeColumnsId(this.columns);this.allColumns=Pp(o),this.cloneColumns=this.makeColumns(o),this.columnRows=this.makeColumnRows(!1,o),this.leftFixedColumnRows=this.makeColumnRows("left",o),this.rightFixedColumnRows=this.makeColumnRows("right",o),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize()},deep:!0},height(){this.handleResize()},maxHeight(){this.handleResize()},showHorizontalScrollBar(){this.handleResize()},showVerticalScrollBar(){this.handleResize()}}},ZJ={cellspacing:"0",cellpadding:"0",border:"0"},KJ=["innerHTML"],JJ=["innerHTML"],eee={class:"ivu-table-resize-line",ref:"resizeLine"};function tee(o,c,d,C,b,m){const E=t.resolveComponent("table-head"),V=t.resolveComponent("table-body"),W=t.resolveComponent("table-summary"),z=t.resolveComponent("DropdownMenu"),G=t.resolveComponent("Dropdown"),ae=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.wrapClasses),style:t.normalizeStyle(m.styles),ref:"tableWrap"},[t.createElementVNode("div",{class:t.normalizeClass(m.classes)},[b.showSlotHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-title"]),ref:"title"},[t.renderSlot(o.$slots,"header")],2)):t.createCommentVNode("",!0),d.showHeader?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([b.prefixCls+"-header"]),ref:"header",onMousewheel:c[0]||(c[0]=(...xe)=>m.handleMouseWheel&&m.handleMouseWheel(...xe))},[t.createVNode(E,{"prefix-cls":b.prefixCls,styleObject:m.tableHeaderStyle,columns:b.cloneColumns,"column-rows":b.columnRows,"obj-data":b.objData,"columns-width":b.columnsWidth,data:b.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","obj-data","columns-width","data"])],34)):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-body"]),style:t.normalizeStyle(m.bodyStyle),ref:"body",onScroll:c[1]||(c[1]=(...xe)=>m.handleBodyScroll&&m.handleBodyScroll(...xe))},[t.createVNode(V,{ref:"tbody",draggable:d.draggable,"prefix-cls":b.prefixCls,styleObject:m.tableStyle,columns:b.cloneColumns,data:b.rebuildData,"row-key":d.rowKey,"columns-width":b.columnsWidth,"obj-data":b.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),[[t.vShow,!(m.localeNoDataText&&(!d.data||d.data.length===0)||m.localeNoFilteredDataText&&(!b.rebuildData||b.rebuildData.length===0))]]),d.showSummary&&d.data&&d.data.length?(t.openBlock(),t.createBlock(W,{key:2,ref:"summary","prefix-cls":b.prefixCls,styleObject:m.tableStyle,columns:b.cloneColumns,data:m.summaryData,"columns-width":b.columnsWidth},null,8,["prefix-cls","styleObject","columns","data","columns-width"])):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-tip"]),style:t.normalizeStyle(m.bodyStyle),onScroll:c[2]||(c[2]=(...xe)=>m.handleBodyScroll&&m.handleBodyScroll(...xe))},[t.createElementVNode("table",ZJ,[t.createElementVNode("tbody",null,[t.createElementVNode("tr",null,[t.createElementVNode("td",{style:t.normalizeStyle({height:m.bodyStyle.height,width:`${b.headerWidth}px`})},[!d.data||d.data.length===0?(t.openBlock(),t.createElementBlock("span",{key:0,innerHTML:m.localeNoDataText},null,8,KJ)):(t.openBlock(),t.createElementBlock("span",{key:1,innerHTML:m.localeNoFilteredDataText},null,8,JJ))],4)])])])],38),[[t.vShow,!!m.localeNoDataText&&(!d.data||d.data.length===0)||!!m.localeNoFilteredDataText&&(!b.rebuildData||b.rebuildData.length===0)]]),m.isLeftFixed?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(m.fixedTableClasses),style:t.normalizeStyle(m.fixedTableStyle)},[d.showHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.fixedHeaderClasses)},[t.createVNode(E,{fixed:"left","prefix-cls":b.prefixCls,styleObject:m.fixedTableStyle,columns:m.leftFixedColumns,"column-rows":b.columnRows,"fixed-column-rows":b.leftFixedColumnRows,"obj-data":b.objData,"columns-width":b.columnsWidth,data:b.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-fixed-body"]),style:t.normalizeStyle(m.fixedBodyStyle),ref:"fixedBody",onMousewheel:c[3]||(c[3]=(...xe)=>m.handleFixedMousewheel&&m.handleFixedMousewheel(...xe)),"on:DOMMouseScroll":c[4]||(c[4]=(...xe)=>m.handleFixedMousewheel&&m.handleFixedMousewheel(...xe))},[t.createVNode(V,{fixed:"left",draggable:d.draggable,"prefix-cls":b.prefixCls,styleObject:m.fixedTableStyle,columns:m.leftFixedColumns,data:b.rebuildData,"row-key":d.rowKey,"columns-width":b.columnsWidth,"obj-data":b.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),d.showSummary&&d.data&&d.data.length?(t.openBlock(),t.createBlock(W,{key:1,fixed:"left","prefix-cls":b.prefixCls,styleObject:m.fixedTableStyle,columns:m.leftFixedColumns,data:m.summaryData,"columns-width":b.columnsWidth,style:t.normalizeStyle({"margin-top":b.showHorizontalScrollBar?b.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):t.createCommentVNode("",!0)],6)):t.createCommentVNode("",!0),m.isRightFixed?(t.openBlock(),t.createElementBlock("div",{key:4,class:t.normalizeClass(m.fixedRightTableClasses),style:t.normalizeStyle(m.fixedRightTableStyle)},[d.showHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(m.fixedHeaderClasses)},[t.createVNode(E,{fixed:"right","prefix-cls":b.prefixCls,styleObject:m.fixedRightTableStyle,columns:m.rightFixedColumns,"column-rows":b.columnRows,"fixed-column-rows":b.rightFixedColumnRows,"obj-data":b.objData,"columns-width":b.columnsWidth,data:b.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([b.prefixCls+"-fixed-body"]),style:t.normalizeStyle(m.fixedBodyStyle),ref:"fixedRightBody",onMousewheel:c[5]||(c[5]=(...xe)=>m.handleFixedMousewheel&&m.handleFixedMousewheel(...xe)),"on:DOMMouseScroll":c[6]||(c[6]=(...xe)=>m.handleFixedMousewheel&&m.handleFixedMousewheel(...xe))},[t.createVNode(V,{fixed:"right",draggable:d.draggable,"prefix-cls":b.prefixCls,styleObject:m.fixedRightTableStyle,columns:m.rightFixedColumns,data:b.rebuildData,"row-key":d.rowKey,"columns-width":b.columnsWidth,"obj-data":b.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),d.showSummary&&d.data&&d.data.length?(t.openBlock(),t.createBlock(W,{key:1,fixed:"right","prefix-cls":b.prefixCls,styleObject:m.fixedRightTableStyle,columns:m.rightFixedColumns,data:m.summaryData,"columns-width":b.columnsWidth,style:t.normalizeStyle({"margin-top":b.showHorizontalScrollBar?b.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):t.createCommentVNode("",!0)],6)):t.createCommentVNode("",!0),m.isRightFixed?(t.openBlock(),t.createElementBlock("div",{key:5,class:t.normalizeClass([b.prefixCls+"-fixed-right-header"]),style:t.normalizeStyle(m.fixedRightHeaderStyle)},null,6)):t.createCommentVNode("",!0),b.showSlotFooter?(t.openBlock(),t.createElementBlock("div",{key:6,class:t.normalizeClass([b.prefixCls+"-footer"]),ref:"footer"},[t.renderSlot(o.$slots,"footer")],2)):t.createCommentVNode("",!0)],2),t.withDirectives(t.createElementVNode("div",eee,null,512),[[t.vShow,b.showResizeLine]]),d.showContextMenu?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-table-context-menu",style:t.normalizeStyle(b.contextMenuStyles)},[t.createVNode(G,{trigger:"custom",visible:b.contextMenuVisible,transfer:"",onOnClick:m.handleClickDropdownItem,onOnClickoutside:m.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(z,null,{default:t.withCtx(()=>[t.renderSlot(o.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)):t.createCommentVNode("",!0),t.createVNode(ae,{fix:"",size:"large",show:d.loading},{default:t.withCtx(()=>[t.renderSlot(o.$slots,"loading")]),_:3},8,["show"])],6)}var $v=l(qJ,[["render",tee]]);const nee={name:"TablePaste",components:{Row:Nl,Col:ia,Input:oo,Table:$v},emits:["on-change","on-error","on-success"],props:{value:{type:String},inputProps:{type:Object,default(){return{}}},tableProps:{type:Object,default(){return{}}},hideTable:{type:Boolean,default:!1}},data(){return{content:"",tableColumns:[],tableData:[]}},watch:{value:{handler(o){this.handleResolveContent(o)},immediate:!0}},methods:{handleContentChange(o){const c=o.target.value.trim();this.$emit("on-change",c),this.handleResolveContent(c)},handleResolveContent(o){let c=[];o!==""&&o!==void 0&&(c=o.split(/[\n\u0085\u2028\u2029]|\r\n?/g).map(b=>b.split("	")));const d=this.handleGetErrorIndex(c),C=this.contentToTable(c);this.tableColumns=C.columns,this.tableData=C.data,d.length?this.$emit("on-error",C,d):this.$emit("on-success",C)},handleGetErrorIndex(o){const c=L(o),d=[];if(c.length){const C=c[0].length;c.forEach((b,m)=>{b.length!==C&&d.push(m)})}return d},contentToTable(o){const c=L(o);let d=[],C=[];return c.length>1&&(d=c.shift().map((b,m)=>({title:b,key:`key${m}`})),C=c.map(b=>{const m={};return b.forEach((E,V)=>{m[`key${V}`]=E}),m})),{columns:d,data:C}}}},iee={class:"ivu-table-paste"},ree={key:0,class:"ivu-table-paste-input"},see={key:0,class:"ivu-table-paste-input"};function oee(o,c,d,C,b,m){const E=t.resolveComponent("Input"),V=t.resolveComponent("Col"),W=t.resolveComponent("Table"),z=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",iee,[d.hideTable?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[d.value!==void 0||!o.$slots.default?(t.openBlock(),t.createElementBlock("div",see,[t.renderSlot(o.$slots,"default",{},()=>[t.createVNode(E,t.mergeProps({modelValue:b.content,"onUpdate:modelValue":c[1]||(c[1]=G=>b.content=G),type:"textarea"},d.inputProps,{onOnChange:m.handleContentChange}),null,16,["modelValue","onOnChange"])])])):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createBlock(z,{key:0,gutter:32},{default:t.withCtx(()=>[t.createVNode(V,{span:"12"},{default:t.withCtx(()=>[d.value!==void 0||!o.$slots.default?(t.openBlock(),t.createElementBlock("div",ree,[t.renderSlot(o.$slots,"default",{},()=>[t.createVNode(E,t.mergeProps({modelValue:b.content,"onUpdate:modelValue":c[0]||(c[0]=G=>b.content=G),type:"textarea"},d.inputProps,{onOnChange:m.handleContentChange}),null,16,["modelValue","onOnChange"])])])):t.createCommentVNode("",!0)]),_:3}),t.createVNode(V,{span:"12"},{default:t.withCtx(()=>[t.createVNode(W,t.mergeProps({columns:b.tableColumns,data:b.tableData},d.tableProps),null,16,["columns","data"])]),_:1})]),_:3}))])}var hA=l(nee,[["render",oee]]);const aee={name:"TagSelect",mixins:[un],components:{Tag:Lu,Icon:S},emits:["on-change","on-checked-all","update:modelValue"],provide(){return{TagSelectInstance:this}},props:{modelValue:{type:Array,default(){return[]}},expandable:{type:Boolean,default:!1},hideCheckAll:{type:Boolean,default:!1},locale:{type:Object,default(){return{collapseText:"收起",expandText:"展开"}}}},data(){return{currentValue:this.modelValue,checkedAll:!1,expand:!1,tagSelectOptionList:[]}},computed:{classes(){return{"ivu-tag-select-with-expanded":this.expandable,"ivu-tag-select-expanded":this.expand}}},watch:{modelValue(o){this.currentValue=o,this.handleUpdateTags()}},methods:{handleUpdateTags(){let o=!0;this.tagSelectOptionList.map(c=>c.option).forEach(c=>{this.currentValue.indexOf(c.name)>=0?c.checked=!0:(c.checked=!1,o=!1)}),this.checkedAll=o},handleChangeTag(o){const c=[];let d=!0;this.tagSelectOptionList.map(C=>C.option).forEach(C=>{C.checked?c.push(C.name):d=!1}),this.currentValue=c,this.$emit("update:modelValue",c),this.$emit("on-change",[...c],o),this.handleFormItemChange("change",o),o&&(this.checkedAll=d)},handleCheckAll(o){this.checkedAll=o,this.tagSelectOptionList.map(c=>c.option).forEach(c=>{c.checked=o}),this.handleChangeTag(),this.$emit("on-checked-all",o)},handleToggleExpand(){this.expand=!this.expand}},mounted(){this.handleUpdateTags()}},lee={key:0,class:"ivu-tag-select-option"},cee={key:0},hee={key:1};function uee(o,c,d,C,b,m){const E=t.resolveComponent("Tag"),V=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-tag-select",m.classes])},[d.hideCheckAll?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",lee,[t.createVNode(E,{checkable:"",checked:b.checkedAll,onOnChange:m.handleCheckAll,color:"primary"},{default:t.withCtx(()=>[t.createTextVNode("全部")]),_:1},8,["checked","onOnChange"])])),t.renderSlot(o.$slots,"default"),d.expandable?(t.openBlock(),t.createElementBlock("a",{key:1,class:"ivu-tag-select-expand-btn",onClick:c[0]||(c[0]=(...W)=>m.handleToggleExpand&&m.handleToggleExpand(...W))},[b.expand?(t.openBlock(),t.createElementBlock("span",cee,t.toDisplayString(d.locale.collapseText),1)):(t.openBlock(),t.createElementBlock("span",hee,t.toDisplayString(d.locale.expandText),1)),b.expand?(t.openBlock(),t.createBlock(V,{key:2,type:"ios-arrow-up"})):(t.openBlock(),t.createBlock(V,{key:3,type:"ios-arrow-down"}))])):t.createCommentVNode("",!0)],2)}var uA=l(aee,[["render",uee]]);const dee={name:"TagSelectOption",components:{Tag:Lu},inject:["TagSelectInstance"],props:{name:{type:[String,Number],required:!0},tagProps:{type:Object,default(){return{}}},color:{type:String,default:"primary"}},data(){return{checked:!1,id:te(6)}},methods:{handleChange(o){this.checked=o,this.TagSelectInstance.handleChangeTag(this.name)},addOption(){this.TagSelectInstance.tagSelectOptionList.push({id:this.id,option:this})},removeOption(){const o=this.TagSelectInstance,c=o.tagSelectOptionList.findIndex(d=>d.id===this.id);o.tagSelectOptionList.splice(c,1)}},mounted(){this.addOption()},beforeUnmount(){this.removeOption()}},fee={class:"ivu-tag-select-option"};function pee(o,c,d,C,b,m){const E=t.resolveComponent("Tag");return t.openBlock(),t.createElementBlock("div",fee,[t.createVNode(E,t.mergeProps({checkable:"",checked:b.checked,onOnChange:m.handleChange,color:d.color},d.tagProps),{default:t.withCtx(()=>[t.renderSlot(o.$slots,"default")]),_:3},16,["checked","onOnChange","color"])])}var dA=l(dee,[["render",pee]]);const fA={name:"Text",mixins:[bp],render(){return t.h(Tv,{...this.$props,component:"span",...this.commonEvents()},this.commonSlots())}},pA="ivu-timeline",mee={name:"Timeline",props:{pending:{type:Boolean,default:!1}},computed:{classes(){return[`${pA}`,{[`${pA}-pending`]:this.pending}]}}};function gee(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(m.classes)},[t.renderSlot(o.$slots,"default")],2)}var mA=l(mee,[["render",gee]]);const ju="ivu-timeline",vee={name:"TimelineItem",props:{color:{type:String,default:"blue"}},data(){return{dot:!1}},mounted(){this.dot=!!this.$refs.dot.innerHTML.length},computed:{itemClasses(){return`${ju}-item`},tailClasses(){return`${ju}-item-tail`},headClasses(){return[`${ju}-item-head`,{[`${ju}-item-head-custom`]:this.dot,[`${ju}-item-head-${this.color}`]:this.headColorShow}]},headColorShow(){return this.color==="blue"||this.color==="red"||this.color==="green"},customColor(){let o={};return this.color&&(this.headColorShow||(o={color:this.color,"border-color":this.color})),o},contentClasses(){return`${ju}-item-content`}}};function yee(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(m.itemClasses)},[t.createElementVNode("div",{class:t.normalizeClass(m.tailClasses)},null,2),t.createElementVNode("div",{class:t.normalizeClass(m.headClasses),style:t.normalizeStyle(m.customColor),ref:"dot"},[t.renderSlot(o.$slots,"dot")],6),t.createElementVNode("div",{class:t.normalizeClass(m.contentClasses)},[t.renderSlot(o.$slots,"default")],2)],2)}var gA=l(vee,[["render",yee]]),vA={mixins:[a3,pv],components:{TimePickerPanel:x3,RangeTimePickerPanel:k3},props:{type:{validator(o){return _(o,["time","timerange"])},default:"time"}},computed:{panel(){return this.type==="timerange"?"RangeTimePickerPanel":"TimePickerPanel"},ownPickerProps(){return{disabledHours:this.disabledHours,disabledMinutes:this.disabledMinutes,disabledSeconds:this.disabledSeconds,hideDisabledOptions:this.hideDisabledOptions}}},watch:{visible(o){o&&t.nextTick(()=>{this.timeSpinnerList.map(c=>c.timeSpinner).forEach(c=>c.updateScroll())})}}};const yA={name:"Title",mixins:[bp],props:{level:{type:Number,validator(o){return _(o,[1,2,3,4,5,6])},default:1}},render(){return t.h(Tv,{...this.$props,component:`h${this.level}`,...this.commonEvents()},this.commonSlots())}},bee={name:"Search",components:{Input:oo},emits:["on-query-change","on-query-clear"],props:{prefixCls:String,placeholder:String,query:String},data(){return{currentQuery:this.query}},watch:{query(o){this.currentQuery=o},currentQuery(o){this.$emit("on-query-change",o)}},computed:{icon(){return this.query===""?"ios-search":"ios-close-circle"}},methods:{handleClick(){this.currentQuery!==""&&(this.currentQuery="",this.$emit("on-query-clear"))}}};function Oee(o,c,d,C,b,m){const E=t.resolveComponent("Input");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(d.prefixCls)},[t.createVNode(E,{modelValue:b.currentQuery,"onUpdate:modelValue":c[0]||(c[0]=V=>b.currentQuery=V),size:"small",icon:m.icon,placeholder:d.placeholder,onOnClick:m.handleClick},null,8,["modelValue","icon","placeholder","onOnClick"])],2)}var xee=l(bee,[["render",Oee]]);const wee={name:"TransferList",components:{Search:xee,Checkbox:Vu},inject:["TransferInstance"],emits:["on-checked-keys-change"],props:{prefixCls:String,data:Array,renderFormat:Function,checkedKeys:Array,listStyle:Object,title:[String,Number],filterable:Boolean,filterPlaceholder:String,filterMethod:Function,notFoundText:String,validKeysCount:Number},data(){return{showItems:[],query:"",showFooter:!0}},watch:{data(){this.updateFilteredData()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-with-footer`]:this.showFooter}]},bodyClasses(){return[`${this.prefixCls}-body`,{[`${this.prefixCls}-body-with-search`]:this.filterable,[`${this.prefixCls}-body-with-footer`]:this.showFooter}]},count(){const o=this.validKeysCount;return(o>0?`${o}/`:"")+`${this.data.length}`},checkedAll(){return this.filterData.filter(o=>!o.disabled).length===this.validKeysCount&&this.validKeysCount!==0},checkedAllDisabled(){return this.filterData.filter(o=>!o.disabled).length<=0},filterData(){return this.showItems.filter(o=>this.filterMethod(o,this.query))}},methods:{itemClasses(o){return[`${this.prefixCls}-content-item`,{[`${this.prefixCls}-content-item-disabled`]:o.disabled}]},showLabel(o){return this.renderFormat(o)},isCheck(o){return this.checkedKeys.some(c=>c===o.key)},select(o){if(o.disabled)return;const c=this.checkedKeys.indexOf(o.key);c>-1?this.checkedKeys.splice(c,1):this.checkedKeys.push(o.key),this.TransferInstance.handleCheckedKeys()},updateFilteredData(){this.showItems=this.data},toggleSelectAll(o){const c=o?this.filterData.filter(d=>!d.disabled||this.checkedKeys.indexOf(d.key)>-1).map(d=>d.key):this.filterData.filter(d=>d.disabled&&this.checkedKeys.indexOf(d.key)>-1).map(d=>d.key);this.$emit("on-checked-keys-change",c)},handleQueryClear(){this.query=""},handleQueryChange(o){this.query=o}},created(){this.updateFilteredData()},mounted(){this.showFooter=this.$slots.default!==void 0}},_ee=["onClick"],See=["innerHTML"];function Cee(o,c,d,C,b,m){const E=t.resolveComponent("Checkbox"),V=t.resolveComponent("Search");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(m.classes),style:t.normalizeStyle(d.listStyle)},[t.createElementVNode("div",{class:t.normalizeClass(d.prefixCls+"-header")},[t.createVNode(E,{modelValue:m.checkedAll,disabled:m.checkedAllDisabled,"onUpdate:modelValue":m.toggleSelectAll},null,8,["modelValue","disabled","onUpdate:modelValue"]),t.createElementVNode("span",{class:t.normalizeClass(d.prefixCls+"-header-title"),onClick:c[0]||(c[0]=W=>m.toggleSelectAll(!m.checkedAll))},t.toDisplayString(d.title),3),t.createElementVNode("span",{class:t.normalizeClass(d.prefixCls+"-header-count")},t.toDisplayString(m.count),3)],2),t.createElementVNode("div",{class:t.normalizeClass(m.bodyClasses)},[d.filterable?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(d.prefixCls+"-body-search-wrapper")},[t.createVNode(V,{"prefix-cls":d.prefixCls+"-search",query:b.query,onOnQueryClear:m.handleQueryClear,onOnQueryChange:m.handleQueryChange,placeholder:d.filterPlaceholder},null,8,["prefix-cls","query","onOnQueryClear","onOnQueryChange","placeholder"])],2)):t.createCommentVNode("",!0),t.createElementVNode("ul",{class:t.normalizeClass(d.prefixCls+"-content")},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.filterData,(W,z)=>(t.openBlock(),t.createElementBlock("li",{key:z,class:t.normalizeClass(m.itemClasses(W)),onClick:t.withModifiers(G=>m.select(W),["prevent"])},[t.createVNode(E,{modelValue:m.isCheck(W),disabled:W.disabled},null,8,["modelValue","disabled"]),t.createElementVNode("span",{innerHTML:m.showLabel(W)},null,8,See)],10,_ee))),128)),t.createElementVNode("li",{class:t.normalizeClass(d.prefixCls+"-content-not-found")},t.toDisplayString(d.notFoundText),3)],2)],2),b.showFooter?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(d.prefixCls+"-footer")},[t.renderSlot(o.$slots,"default")],2)):t.createCommentVNode("",!0)],6)}var bA=l(wee,[["render",Cee]]);const kee={name:"Operation",components:{Button:Qr,Icon:S},inject:["TransferInstance"],props:{prefixCls:String,operations:Array,leftActive:Boolean,rightActive:Boolean,reverseOperation:Boolean},methods:{moveToLeft(){this.TransferInstance.moveTo("left")},moveToRight(){this.TransferInstance.moveTo("right")}}},Tee={key:0},Mee={key:0},Eee={key:0},Pee={key:0};function Aee(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Button");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(d.prefixCls+"-operation")},[d.reverseOperation?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(V,{type:"primary",size:"small",disabled:!d.leftActive,onClick:m.moveToRight},{default:t.withCtx(()=>[d.operations[1]?(t.openBlock(),t.createElementBlock("span",Tee,t.toDisplayString(d.operations[1]),1)):t.createCommentVNode("",!0),t.createVNode(E,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"]),t.createVNode(V,{type:"primary",size:"small",disabled:!d.rightActive,onClick:m.moveToLeft},{default:t.withCtx(()=>[t.createVNode(E,{type:"ios-arrow-back"}),d.operations[0]?(t.openBlock(),t.createElementBlock("span",Mee,t.toDisplayString(d.operations[0]),1)):t.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"])],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createVNode(V,{type:"primary",size:"small",disabled:!d.rightActive,onClick:m.moveToLeft},{default:t.withCtx(()=>[t.createVNode(E,{type:"ios-arrow-back"}),d.operations[0]?(t.openBlock(),t.createElementBlock("span",Eee,t.toDisplayString(d.operations[0]),1)):t.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"]),t.createVNode(V,{type:"primary",size:"small",disabled:!d.leftActive,onClick:m.moveToRight},{default:t.withCtx(()=>[d.operations[1]?(t.openBlock(),t.createElementBlock("span",Pee,t.toDisplayString(d.operations[1]),1)):t.createCommentVNode("",!0),t.createVNode(E,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"])],64))],2)}var Ree=l(kee,[["render",Aee]]);const OA="ivu-transfer",xA={name:"Transfer",mixins:[Qn,un],emits:["on-change","on-selected-change"],provide(){return{TransferInstance:this}},render(){const o=this.$slots.default?this.$slots.default():"";return t.h("div",{class:this.classes},[t.h(bA,{ref:"left",prefixCls:this.prefixCls+"-list",data:this.leftData,renderFormat:this.renderFormat,checkedKeys:this.leftCheckedKeys,validKeysCount:this.leftValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[0],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleLeftCheckedKeysChange},()=>o),t.h(Ree,{prefixCls:this.prefixCls,operations:this.operations,leftActive:this.leftValidKeysCount>0,rightActive:this.rightValidKeysCount>0,reverseOperation:this.reverseOperation}),t.h(bA,{ref:"right",prefixCls:this.prefixCls+"-list",data:this.rightData,renderFormat:this.renderFormat,checkedKeys:this.rightCheckedKeys,validKeysCount:this.rightValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[1],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleRightCheckedKeysChange},()=>o)])},props:{data:{type:Array,default(){return[]}},renderFormat:{type:Function,default(o){return o.label||o.key}},targetKeys:{type:Array,default(){return[]}},selectedKeys:{type:Array,default(){return[]}},listStyle:{type:Object,default(){return{}}},titles:{type:Array},operations:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!1},filterPlaceholder:{type:String},filterMethod:{type:Function,default(o,c){const d="label"in o?"label":"key";return o[d].indexOf(c)>-1}},notFoundText:{type:String},reverseOperation:{type:Boolean,default:!1}},data(){return{prefixCls:OA,leftData:[],rightData:[],leftCheckedKeys:[],rightCheckedKeys:[]}},computed:{classes(){return[`${OA}`]},leftValidKeysCount(){return this.getValidKeys("left").length},rightValidKeysCount(){return this.getValidKeys("right").length},localeFilterPlaceholder(){return this.filterPlaceholder===void 0?this.t("i.transfer.filterPlaceholder"):this.filterPlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.transfer.notFoundText"):this.notFoundText},localeTitles(){return this.titles===void 0?[this.t("i.transfer.titles.source"),this.t("i.transfer.titles.target")]:this.titles}},methods:{getValidKeys(o){return this[`${o}Data`].filter(c=>!c.disabled&&this[`${o}CheckedKeys`].indexOf(c.key)>-1).map(c=>c.key)},splitData(o=!1){this.leftData=[...this.data],this.rightData=[],this.targetKeys.length>0&&this.targetKeys.forEach(c=>{const d=this.leftData.filter((C,b)=>C.key===c?(this.leftData.splice(b,1),!0):!1);d&&d.length>0&&this.rightData.push(d[0])}),o&&this.splitSelectedKey()},splitSelectedKey(){const o=this.selectedKeys;o.length>0&&(this.leftCheckedKeys=this.leftData.filter(c=>o.indexOf(c.key)>-1).map(c=>c.key),this.rightCheckedKeys=this.rightData.filter(c=>o.indexOf(c.key)>-1).map(c=>c.key))},moveTo(o){const c=this.targetKeys,d=o==="left"?"right":"left",C=this.getValidKeys(d),b=o==="right"?C.concat(c):c.filter(m=>!C.some(E=>m===E));this.$refs[d].toggleSelectAll(!1),this.$emit("on-change",b,o,C),this.handleFormItemChange("change",{tarketKeys:b,direction:o,moveKeys:C})},handleLeftCheckedKeysChange(o){this.leftCheckedKeys=o},handleRightCheckedKeysChange(o){this.rightCheckedKeys=o},handleCheckedKeys(){const o=this.getValidKeys("left"),c=this.getValidKeys("right");this.$emit("on-selected-change",o,c)}},watch:{targetKeys(){this.splitData(!1)},data(){this.splitData(!1)}},mounted(){this.splitData(!0)}};var Iee={name:"RenderCell",props:{render:Function,data:Object,node:Array},render(){const o={root:this.node[0],node:this.node[1],data:this.data};return this.render(t.h,o)}};const Hl="ivu-tree",Dee={name:"TreeNode",inject:["TreeInstance"],components:{Checkbox:Vu,Icon:S,CollapseTransition:Ow,Render:Iee},props:{data:{type:Object,default:()=>{}},multiple:{type:Boolean,default:!1},childrenKey:{type:String,default:"children"},showCheckbox:{type:Boolean,default:!1},appear:{type:Boolean,default:!1}},data(){return{prefixCls:Hl,appearByClickArrow:!1,globalConfig:{}}},computed:{classes(){return[`${Hl}-children`]},selectedCls(){return[{[`${Hl}-node-selected`]:this.data.selected}]},arrowClasses(){return[`${Hl}-arrow`,{[`${Hl}-arrow-disabled`]:this.data.disabled,[`${Hl}-arrow-open`]:this.data.expand}]},titleClasses(){return[`${Hl}-title`,{[`${Hl}-title-selected`]:this.data.selected}]},showArrow(){return this.data[this.childrenKey]&&this.data[this.childrenKey].length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},isParentRender(){const o=$(this,"Tree");return o&&o.render},parentRender(){const o=$(this,"Tree");return o&&o.render?o.render:null},node(){const o=$(this,"Tree");return o?[o.flatState,o.flatState.find(c=>c.nodeKey===this.data.nodeKey)]:[]},children(){return this.data[this.childrenKey]},arrowType(){const o=this.globalConfig;let c="ios-arrow-forward";return o&&(o.tree.customArrow?c="":o.tree.arrow&&(c=o.tree.arrow)),c},customArrowType(){const o=this.globalConfig;let c="";return o&&o.tree.customArrow&&(c=o.tree.customArrow),c},arrowSize(){const o=this.globalConfig;let c="";return o&&o.tree.arrowSize&&(c=o.tree.arrowSize),c}},methods:{handleExpand(){const o=this.data;if(this.appearByClickArrow=!0,o[this.childrenKey].length===0){const c=$(this,"Tree");if(c&&c.loadData){this.data.loading=!0,c.loadData(o,d=>{this.data.loading=!1,d.length&&(this.data[this.childrenKey]=d,t.nextTick(()=>this.handleExpand()))});return}}o[this.childrenKey]&&o[this.childrenKey].length&&(this.data.expand=!this.data.expand,this.TreeInstance.handleToggleExpand(this.data))},handleClickNode(){this.TreeInstance.expandNode?this.showArrow&&this.handleExpand():this.TreeInstance.selectNode&&this.handleSelect()},handleSelect(){this.data.disabled||(this.TreeInstance.showCheckbox&&this.TreeInstance.checkDirectly?this.handleCheck():this.TreeInstance.handleOnSelected(this.data.nodeKey))},handleCheck(){if(this.data.disabled)return;const o={checked:!this.data.checked&&!this.data.indeterminate,nodeKey:this.data.nodeKey};this.TreeInstance.handleOnCheck(o)},handleContextmenu(o,c){o.contextmenu&&(c.preventDefault(),this.TreeInstance.handleOnContextmenu({data:o,event:c}))},handlePreventSelect(o,c){o.contextmenu&&c.preventDefault()}},created(){const o=t.getCurrentInstance();this.globalConfig=o.appContext.config.globalProperties.$VIEWUI}},Nee={key:0,class:"ivu-tree-expand"};function $ee(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("Checkbox"),W=t.resolveComponent("Render"),z=t.resolveComponent("TreeNode"),G=t.resolveComponent("collapse-transition");return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(m.classes)},[t.createElementVNode("li",{onContextmenu:c[2]||(c[2]=t.withModifiers(ae=>m.handleContextmenu(d.data,ae),["stop"])),onSelectstart:c[3]||(c[3]=t.withModifiers(ae=>m.handlePreventSelect(d.data,ae),["stop"]))},[t.createElementVNode("span",{class:t.normalizeClass(m.arrowClasses),onClick:c[0]||(c[0]=(...ae)=>m.handleExpand&&m.handleExpand(...ae))},[m.showArrow?(t.openBlock(),t.createBlock(E,{key:0,type:m.arrowType,custom:m.customArrowType,size:m.arrowSize},null,8,["type","custom","size"])):t.createCommentVNode("",!0),m.showLoading?(t.openBlock(),t.createBlock(E,{key:1,type:"ios-loading",class:"ivu-load-loop"})):t.createCommentVNode("",!0)],2),d.showCheckbox?(t.openBlock(),t.createBlock(V,{key:0,"model-value":d.data.checked,indeterminate:d.data.indeterminate,disabled:d.data.disabled||d.data.disableCheckbox,onClick:t.withModifiers(m.handleCheck,["prevent"])},null,8,["model-value","indeterminate","disabled","onClick"])):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(m.titleClasses),onClick:c[1]||(c[1]=(...ae)=>m.handleClickNode&&m.handleClickNode(...ae))},[d.data.render?(t.openBlock(),t.createBlock(W,{key:0,render:d.data.render,data:d.data,node:m.node},null,8,["render","data","node"])):m.isParentRender?(t.openBlock(),t.createBlock(W,{key:1,render:m.parentRender,data:d.data,node:m.node},null,8,["render","data","node"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[t.createTextVNode(t.toDisplayString(d.data.title),1)],64))],2),t.createVNode(G,{appear:d.appear},{default:t.withCtx(()=>[d.data.expand?(t.openBlock(),t.createElementBlock("div",Nee,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.children,(ae,xe)=>(t.openBlock(),t.createBlock(z,{appear:b.appearByClickArrow,key:xe,data:ae,multiple:d.multiple,"show-checkbox":d.showCheckbox,"children-key":d.childrenKey},null,8,["appear","data","multiple","show-checkbox","children-key"]))),128))])):t.createCommentVNode("",!0)]),_:1},8,["appear"])],32)],2)}var Vee=l(Dee,[["render",$ee]]);const Lee="ivu-tree",Bee={name:"Tree",mixins:[Qn],components:{TreeNode:Vee,Dropdown:hh,DropdownMenu:uh},emits:["on-select-change","on-check-change","on-contextmenu","on-toggle-expand"],provide(){return{TreeInstance:this}},props:{data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!1},emptyText:{type:String},childrenKey:{type:String,default:"children"},loadData:{type:Function},render:{type:Function},selectNode:{type:Boolean,default:!0},expandNode:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:Lee,stateTree:this.data,flatState:[],contextMenuVisible:!1,contextMenuStyles:{top:0,left:0}}},watch:{data:{deep:!0,handler(){this.stateTree=this.data,this.flatState=this.compileFlatState(),this.rebuildTree()}}},computed:{localeEmptyText(){return typeof this.emptyText>"u"?this.t("i.tree.emptyText"):this.emptyText}},methods:{compileFlatState(){let o=0,c=this.childrenKey;const d=[];function C(b,m){b.nodeKey=o++,d[b.nodeKey]={node:b,nodeKey:b.nodeKey},typeof m<"u"&&(d[b.nodeKey].parent=m.nodeKey,d[m.nodeKey][c].push(b.nodeKey)),b[c]&&(d[b.nodeKey][c]=[],b[c].forEach(E=>C(E,b)))}return this.stateTree.forEach(b=>{C(b)}),d},updateTreeUp(o){const c=this.flatState[o].parent;if(typeof c>"u"||this.checkStrictly)return;const d=this.flatState[o].node,C=this.flatState[c].node;d.checked==C.checked&&d.indeterminate==C.indeterminate||(d.checked==!0?(C.checked=C[this.childrenKey].every(b=>b.checked),C.indeterminate=!C.checked):(C.checked=!1,C.indeterminate=C[this.childrenKey].some(b=>b.checked||b.indeterminate)),this.updateTreeUp(c))},rebuildTree(){this.getCheckedNodes().forEach(o=>{this.updateTreeDown(o,{checked:!0});const c=this.flatState[o.nodeKey].parent;if(!c&&c!==0)return;const d=this.flatState[c].node;typeof o.checked<"u"&&o.checked&&d.checked!=o.checked&&this.updateTreeUp(o.nodeKey)})},getSelectedNodes(){return this.flatState.filter(o=>o.node.selected).map(o=>o.node)},getCheckedNodes(){return this.flatState.filter(o=>o.node.checked).map(o=>o.node)},getCheckedAndIndeterminateNodes(){return this.flatState.filter(o=>o.node.checked||o.node.indeterminate).map(o=>o.node)},updateTreeDown(o,c={}){if(!this.checkStrictly){for(let d in c)o[d]=c[d];o[this.childrenKey]&&o[this.childrenKey].forEach(d=>{this.updateTreeDown(d,c)})}},handleSelect(o){if(!this.flatState[o])return;const c=this.flatState[o].node;if(!this.multiple){const d=this.flatState.findIndex(C=>C.node.selected);d>=0&&d!==o&&(this.flatState[d].node.selected=!1)}c.selected=!c.selected,this.$emit("on-select-change",this.getSelectedNodes(),c)},handleCheck({checked:o,nodeKey:c}){if(!this.flatState[c])return;const d=this.flatState[c].node;d.checked=o,d.indeterminate=!1,this.updateTreeUp(c),this.updateTreeDown(d,{checked:o,indeterminate:!1}),this.$emit("on-check-change",this.getCheckedNodes(),d)},handleContextmenu({data:o,event:c}){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const d=this.$refs.treeWrap.getBoundingClientRect(),C={left:`${c.clientX-d.left}px`,top:`${c.clientY-d.top}px`};this.contextMenuStyles=C,this.contextMenuVisible=!0,this.$emit("on-contextmenu",o,c,C)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnCheck(o){this.handleCheck(o)},handleOnSelected(o){this.handleSelect(o)},handleToggleExpand(o){this.$emit("on-toggle-expand",o)},handleOnContextmenu(o){this.handleContextmenu(o)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.flatState=this.compileFlatState(),this.rebuildTree()}};function Uee(o,c,d,C,b,m){const E=t.resolveComponent("TreeNode"),V=t.resolveComponent("DropdownMenu"),W=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(b.prefixCls),ref:"treeWrap"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(b.stateTree,(z,G)=>(t.openBlock(),t.createBlock(E,{key:G,data:z,visible:"",multiple:d.multiple,"show-checkbox":d.showCheckbox,"children-key":d.childrenKey},null,8,["data","multiple","show-checkbox","children-key"]))),128)),b.stateTree.length?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([b.prefixCls+"-empty"])},t.toDisplayString(m.localeEmptyText),3)),t.createElementVNode("div",{class:"ivu-tree-context-menu",style:t.normalizeStyle(b.contextMenuStyles)},[t.createVNode(W,{trigger:"custom",visible:b.contextMenuVisible,transfer:"",onOnClick:m.handleClickDropdownItem,onOnClickoutside:m.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(V,null,{default:t.withCtx(()=>[t.renderSlot(o.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var Dw=l(Bee,[["render",Uee]]);const zee={name:"TreeSelect",components:{Select:Wr,Tree:Dw},emits:["on-change","update:modelValue","on-open-change"],mixins:[un],props:{modelValue:{type:[String,Number,Array]},data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default(){const o=t.getCurrentInstance().appContext.config.globalProperties;return!o.$VIEWUI||o.$VIEWUI.transfer===""?!1:o.$VIEWUI.transfer}}},data(){let o=this.modelValue;return o===null&&(this.multiple?o=[]:o=""),{currentValue:o,isChangeValueInTree:!1,isValueChangeByTree:!1,isValueNull:!1}},watch:{modelValue(o){if(this.isChangeValueInTree)this.isChangeValueInTree=!1;else{let c=o;c===null&&(this.isValueNull=!0,this.multiple?c=[]:c=""),this.currentValue=c,this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0)}},data(){this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0))}},computed:{valueToArray(){return typeof this.currentValue=="object"?this.currentValue:[this.currentValue]},isCheckboxUsable(){return this.multiple&&this.showCheckbox},transferClassName(){return this.transfer?"ivu-tree-select-transfer":""},classes(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode(o,c){if(this.multiple)o.length?(this.currentValue=o.map(d=>d.value),this.handleUpdateSelectValue(c.value,c.title)):(this.currentValue=[],this.handleUpdateSelectValue("",""));else if(o.length){const d=o[0];this.currentValue=d.value,this.handleUpdateSelectValue(d.value,d.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("update:modelValue",this.currentValue),this.$emit("on-change",this.currentValue),this.handleFormItemChange("change",this.currentValue)},handleUpdateTreeNodes(o,c=!1){o.forEach(d=>{this.valueToArray.indexOf(d.value)>=0?(this.isCheckboxUsable?d.checked=!0:d.selected=!0,this.handleUpdateSelectValue(d.value,d.title)):this.isCheckboxUsable?d.checked=!1:d.selected=!1,d.children&&d.children.length&&this.handleUpdateTreeNodes(d.children)}),c&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue(o,c){o===""?this.$refs.select.reset():(this.isValueChangeByTree=!0,this.$refs.select.onOptionClick({value:o,label:c}))},handleChange(o){this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=o,this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",o),this.$emit("on-change",o),this.handleFormItemChange("change",o),this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0),t.nextTick(()=>{this.isValueChangeByTree=!1}))},handleOpenChange(o){this.$emit("on-open-change",o)}},mounted(){this.handleUpdateTreeNodes(this.data,!0)}};function Fee(o,c,d,C,b,m){const E=t.resolveComponent("Tree"),V=t.resolveComponent("Select");return t.openBlock(),t.createBlock(V,t.mergeProps({ref:"select"},o.$attrs,{multiple:d.multiple,class:["ivu-tree-select",m.classes],"transfer-class-name":m.transferClassName,onOnChange:m.handleChange,onOnOpenChange:m.handleOpenChange,hideNotFound:"",transfer:d.transfer}),{default:t.withCtx(()=>[t.createVNode(E,{data:d.data,multiple:d.multiple,onOnSelectChange:m.handleSelectNode,onOnCheckChange:m.handleSelectNode,"check-strictly":"","show-checkbox":d.multiple&&d.showCheckbox,"check-directly":"","load-data":d.loadData},null,8,["data","multiple","onOnSelectChange","onOnCheckChange","show-checkbox","load-data"])]),_:1},16,["multiple","class","transfer-class-name","onOnChange","onOnOpenChange","transfer"])}var wA=l(zee,[["render",Fee]]);const Xee={name:"Typography"},Wee={class:"ivu-typography"};function Qee(o,c,d,C,b,m){return t.openBlock(),t.createElementBlock("article",Wee,[t.renderSlot(o.$slots,"default")])}var _A=l(Xee,[["render",Qee]]);const Nw="ivu-upload",Hee={name:"UploadList",components:{Icon:S,iProgress:Dv},emits:["on-file-click","on-file-preview","on-file-remove"],props:{files:{type:Array,default(){return[]}}},data(){return{prefixCls:Nw}},methods:{fileCls(o){return[`${Nw}-list-file`,{[`${Nw}-list-file-finish`]:o.status==="finished"}]},handleClick(o){this.$emit("on-file-click",o)},handlePreview(o){this.$emit("on-file-preview",o)},handleRemove(o){this.$emit("on-file-remove",o)},format(o){const c=o.name.split(".").pop().toLocaleLowerCase()||"";let d="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(c)>-1&&(d="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(c)>-1&&(d="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(c)>-1&&(d="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(c)>-1&&(d="md-document"),["numbers","csv","xls","xlsx"].indexOf(c)>-1&&(d="ios-stats"),["keynote","ppt","pptx"].indexOf(c)>-1&&(d="ios-videocam"),d},parsePercentage(o){return parseInt(o,10)}}},Gee=["onClick"],Yee=["onClick"];function jee(o,c,d,C,b,m){const E=t.resolveComponent("Icon"),V=t.resolveComponent("i-progress");return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass([b.prefixCls+"-list"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.files,(W,z)=>(t.openBlock(),t.createElementBlock("li",{key:z,class:t.normalizeClass(m.fileCls(W)),onClick:G=>m.handleClick(W)},[t.createElementVNode("span",{onClick:G=>m.handlePreview(W)},[t.createVNode(E,{type:m.format(W)},null,8,["type"]),t.createTextVNode(" "+t.toDisplayString(W.name),1)],8,Yee),t.withDirectives(t.createVNode(E,{type:"ios-close",class:t.normalizeClass([b.prefixCls+"-list-remove"]),onClick:G=>m.handleRemove(W)},null,8,["class","onClick"]),[[t.vShow,W.status==="finished"]]),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[W.showProgress?(t.openBlock(),t.createBlock(V,{key:0,"stroke-width":2,percent:m.parsePercentage(W.percentage),status:W.status==="finished"&&W.showProgress?"success":"normal"},null,8,["percent","status"])):t.createCommentVNode("",!0)]),_:2},1024)],10,Gee))),128))],2)}var qee=l(Hee,[["render",jee]]);function Zee(o,c,d){const C=`fail to post ${o} ${d.status}'`,b=new Error(C);return b.status=d.status,b.method="post",b.url=o,b}function SA(o){const c=o.responseText||o.response;if(!c)return c;try{return JSON.parse(c)}catch{return c}}function Kee(o){if(typeof XMLHttpRequest>"u")return;const c=new XMLHttpRequest,d=o.action;c.upload&&(c.upload.onprogress=function(m){m.total>0&&(m.percent=m.loaded/m.total*100),o.onProgress(m)});const C=new FormData;o.data&&Object.keys(o.data).map(m=>{C.append(m,o.data[m])}),C.append(o.filename,o.file),c.onerror=function(m){o.onError(m)},c.onload=function(){if(c.status<200||c.status>=300)return o.onError(Zee(d,o,c),SA(c));o.onSuccess(SA(c))},c.open("post",d,!0),o.withCredentials&&"withCredentials"in c&&(c.withCredentials=!0);const b=o.headers||{};for(let m in b)b.hasOwnProperty(m)&&b[m]!==null&&c.setRequestHeader(m,b[m]);c.send(C)}const Ap="ivu-upload",Jee={name:"Upload",mixins:[un],components:{UploadList:qee},props:{action:{type:String,required:!0},headers:{type:Object,default(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator(o){return _(o,["select","drag"])},default:"select"},format:{type:Array,default(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default(){return{}}},onSuccess:{type:Function,default(){return{}}},onError:{type:Function,default(){return{}}},onRemove:{type:Function,default(){return{}}},onPreview:{type:Function,default(){return{}}},onExceededSize:{type:Function,default(){return{}}},onFormatError:{type:Function,default(){return{}}},defaultFileList:{type:Array,default(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},webkitdirectory:{type:Boolean,default:!1}},data(){return{prefixCls:Ap,dragOver:!1,fileList:[],tempIndex:1}},computed:{classes(){return[`${Ap}`,{[`${Ap}-select`]:this.type==="select",[`${Ap}-drag`]:this.type==="drag",[`${Ap}-dragOver`]:this.type==="drag"&&this.dragOver}]}},methods:{handleClick(){this.itemDisabled||this.$refs.input.click()},handleChange(o){const c=o.target.files;!c||(this.uploadFiles(c),this.$refs.input.value=null)},onDrop(o){this.dragOver=!1,!this.itemDisabled&&this.uploadFiles(o.dataTransfer.files)},handlePaste(o){this.itemDisabled||this.paste&&this.uploadFiles(o.clipboardData.files)},uploadFiles(o){let c=Array.prototype.slice.call(o);this.multiple||(c=c.slice(0,1)),c.length!==0&&c.forEach(d=>{this.upload(d)})},upload(o){if(!this.beforeUpload)return this.post(o);const c=this.beforeUpload(o);c&&c.then?c.then(d=>{Object.prototype.toString.call(d)==="[object File]"?this.post(d):this.post(o)},()=>{}):c!==!1&&this.post(o)},post(o){if(this.format.length){const c=o.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(d=>d.toLocaleLowerCase()===c))return this.onFormatError(o,this.fileList),!1}if(this.maxSize&&o.size>this.maxSize*1024)return this.onExceededSize(o,this.fileList),!1;this.handleStart(o),new FormData().append(this.name,o),Kee({headers:this.headers,withCredentials:this.withCredentials,file:o,data:this.data,filename:this.name,action:this.action,onProgress:c=>{this.handleProgress(c,o)},onSuccess:c=>{this.handleSuccess(c,o)},onError:(c,d)=>{this.handleError(c,d,o)}})},handleStart(o){o.uid=Date.now()+this.tempIndex++;const c={status:"uploading",name:o.name,size:o.size,percentage:0,uid:o.uid,showProgress:!0};this.fileList.push(c)},getFile(o){const c=this.fileList;let d;return c.every(C=>(d=o.uid===C.uid?C:null,!d)),d},handleProgress(o,c){const d=this.getFile(c);this.onProgress(o,d,this.fileList),d.percentage=o.percent||0},handleSuccess(o,c){const d=this.getFile(c);d&&(d.status="finished",d.response=o,this.onSuccess(o,d,this.fileList),this.handleFormItemChange("change",d),setTimeout(()=>{d.showProgress=!1},1e3))},handleError(o,c,d){const C=this.getFile(d),b=this.fileList;C.status="fail",b.splice(b.indexOf(C),1),this.onError(o,c,d)},handleRemove(o){const c=this.fileList;c.splice(c.indexOf(o),1),this.onRemove(o,c)},handlePreview(o){o.status==="finished"&&this.onPreview(o)},clearFiles(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler(o){this.fileList=o.map(c=>(c.status="finished",c.percentage=100,c.uid=Date.now()+this.tempIndex++,c))}}}},ete=["multiple","webkitdirectory","accept"];function tte(o,c,d,C,b,m){const E=t.resolveComponent("upload-list");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([b.prefixCls])},[t.createElementVNode("div",{class:t.normalizeClass(m.classes),onClick:c[1]||(c[1]=(...V)=>m.handleClick&&m.handleClick(...V)),onDrop:c[2]||(c[2]=t.withModifiers((...V)=>m.onDrop&&m.onDrop(...V),["prevent"])),onPaste:c[3]||(c[3]=(...V)=>m.handlePaste&&m.handlePaste(...V)),onDragover:c[4]||(c[4]=t.withModifiers(V=>b.dragOver=!0,["prevent"])),onDragleave:c[5]||(c[5]=t.withModifiers(V=>b.dragOver=!1,["prevent"]))},[t.createElementVNode("input",{ref:"input",type:"file",class:t.normalizeClass([b.prefixCls+"-input"]),onChange:c[0]||(c[0]=(...V)=>m.handleChange&&m.handleChange(...V)),multiple:d.multiple,webkitdirectory:d.webkitdirectory,accept:d.accept},null,42,ete),t.renderSlot(o.$slots,"default")],34),t.renderSlot(o.$slots,"tip"),d.showUploadList?(t.openBlock(),t.createBlock(E,{key:0,files:b.fileList,onOnFileRemove:m.handleRemove,onOnFilePreview:m.handlePreview},null,8,["files","onOnFileRemove","onOnFilePreview"])):t.createCommentVNode("",!0)],2)}var CA=l(Jee,[["render",tte]]);const kA={name:"UserName",mixins:[sp],data(){return{className:"ivu-login-username",prefix:"ios-contact-outline",placeholder:"请输入用户名",type:"text",validateMessage:"请输入用户名！"}}},nte={name:"WordCount",components:{Circle:rv},props:{value:{type:[String,Number],default:""},total:{type:Number,default:0},hideTotal:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},size:{type:[String,Number],default:14}},computed:{isOverflow(){return this.value.length>this.total},percent(){let o=this.value.length/this.total*100;return o>100&&(o=100),o},strokeColor(){return this.isOverflow?"#ed4014":"#2d8cf0"}}},ite={class:"ivu-word-count"},rte={key:0,class:"ivu-word-count-prefix"},ste={key:1,class:"ivu-word-count-prefix ivu-word-count-overflow"},ote={key:3,class:"ivu-word-count-overflow"},ate={key:5,class:"ivu-word-count-suffix"},lte={key:6,class:"ivu-word-count-suffix ivu-word-count-overflow"};function cte(o,c,d,C,b,m){const E=t.resolveComponent("Circle");return t.openBlock(),t.createElementBlock("div",ite,[d.circle?(t.openBlock(),t.createBlock(E,{key:0,percent:m.percent,size:d.size,"stroke-color":m.strokeColor},null,8,["percent","size","stroke-color"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[m.isOverflow?(t.openBlock(),t.createElementBlock("span",ste,[t.renderSlot(o.$slots,"prefix-overflow")])):(t.openBlock(),t.createElementBlock("span",rte,[t.renderSlot(o.$slots,"prefix")])),!m.isOverflow||!d.overflow?(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass({"ivu-word-count-overflow":m.isOverflow})},[t.renderSlot(o.$slots,"length",{length:d.value.length},()=>[t.createTextVNode(t.toDisplayString(d.value.length),1)])],2)):(t.openBlock(),t.createElementBlock("span",ote,t.toDisplayString(d.value.length-d.total),1)),d.hideTotal?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock(t.Fragment,{key:4},[t.renderSlot(o.$slots,"separator",{},()=>[t.createTextVNode(" / ")]),t.renderSlot(o.$slots,"total",{total:d.total},()=>[t.createTextVNode(t.toDisplayString(d.total),1)])],64)),m.isOverflow?(t.openBlock(),t.createElementBlock("span",lte,[t.renderSlot(o.$slots,"suffix-overflow")])):(t.openBlock(),t.createElementBlock("span",ate,[t.renderSlot(o.$slots,"suffix")]))],64))])}var TA=l(nte,[["render",cte]]),MA=Object.freeze(Object.defineProperty({__proto__:null,Affix:v,Alert:j,Anchor:F,AnchorLink:le,Auth:Me,AutoComplete:qM,Avatar:Jf,AvatarList:JM,BackTop:eE,Badge:Z0,Breadcrumb:Mx,BreadcrumbItem:Ex,Button:Qr,ButtonGroup:Px,Calendar:hE,Captcha:vE,Card:bE,Carousel:OE,CarouselItem:xE,Cascader:wE,Cell:_E,CellGroup:SE,Checkbox:Vu,CheckboxGroup:Ux,Circle:rv,City:ME,Col:ia,Collapse:PE,ColorPicker:FE,Content:Xx,Copy:hv,CountDown:jE,CountUp:qE,DatePicker:M3,Description:E3,DescriptionList:P3,Divider:vv,Drawer:A3,Dropdown:hh,DropdownItem:R3,DropdownMenu:uh,Ellipsis:I3,Email:D3,Exception:N3,Footer:rw,FooterToolbar:$3,Form:xv,FormItem:iv,GlobalFooter:V3,Grid:q3,GridItem:Z3,Header:cw,Icon:S,Image:K3,ImagePreview:Fl,Input:oo,InputNumber:hw,Layout:eP,Link:rP,List:lP,ListItem:cP,ListItemMeta:hP,LoadingBar:dw,Login:vP,Menu:pw,MenuGroup:yP,MenuItem:bP,Message:fp,Mobile:OP,Modal:lo,Notice:gw,Notification:AP,NotificationItem:DP,NotificationTab:NP,NumberInfo:$P,Numeral:LP,Option:Ci,OptionGroup:BP,Page:UP,PageHeader:zP,Panel:FP,Paragraph:XP,Password:WP,Poptip:xw,Progress:Dv,Radio:ev,RadioGroup:J0,Rate:QP,Result:HP,Row:Nl,Scroll:YP,ScrollIntoView:_w,ScrollTop:Sw,Select:Wr,Sider:JP,Skeleton:eA,SkeletonItem:Cw,Slider:tA,Space:nA,Spin:Ls,Split:iA,Step:sA,Steps:oA,Submenu:aA,Submit:lA,Switch:Tw,Table:$v,TablePaste:hA,TabPane:Iv,Tabs:Av,Tag:Lu,TagSelect:uA,TagSelectOption:dA,Text:fA,Time:Rv,Timeline:mA,TimelineItem:gA,TimePicker:vA,Title:yA,Tooltip:Va,Transfer:xA,Tree:Dw,TreeSelect:wA,Trend:yw,Typography:_A,Upload:CA,UserName:kA,WordCount:TA},Symbol.toStringTag,{value:"Module"})),hte={mounted(o,c){c.value&&(Z(o,"ivu-line-clamp"),o.style["-webkit-line-clamp"]=c.value)},updated(o,c){c.value&&(o.style["-webkit-line-clamp"]=c.value)},unmounted(o){ie(o,"ivu-line-clamp"),o.style["-webkit-line-clamp"]=null}},ute={mounted(o,c){function d(C){c.value(C)}o.__resizeHandler__=d,o.__observer__=Wu(),o.__observer__.listenTo(o,d)},updated(){},unmounted(o,c){o.__observer__.removeListener(o,o.__resizeHandler__),delete o.__resizeHandler__,delete o.__observer__}};function Gl(o){return String(o).endsWith("%")?"":"px"}var Yl={display:{mounted(o,c){c.value&&(o.style.display=c.value)},updated(o,c){c.value&&(o.style.display=c.value)},unmounted(o){o.style.display=null}},width:{mounted(o,c){c.value&&(o.style.width=c.value+Gl(c.value))},updated(o,c){c.value&&(o.style.width=c.value+Gl(c.value))},unmounted(o){o.style.width=null}},height:{mounted(o,c){c.value&&(o.style.height=c.value+Gl(c.value))},updated(o,c){c.value&&(o.style.height=c.value+Gl(c.value))},unmounted(o){o.style.height=null}},margin:{mounted(o,c){c.value&&(o.style.margin=c.value+Gl(c.value))},updated(o,c){c.value&&(o.style.margin=c.value+Gl(c.value))},unmounted(o){o.style.margin=null}},padding:{mounted(o,c){c.value&&(o.style.padding=c.value+Gl(c.value))},updated(o,c){c.value&&(o.style.padding=c.value+Gl(c.value))},unmounted(o){o.style.padding=null}},font:{mounted(o,c){c&&c.value&&(o.style.fontSize=`${c.value}px`)},updated(o,c){c&&c.value&&(o.style.fontSize=`${c.value}px`)},unmounted(o){o.style.fontSize=null}},color:{mounted(o,c){c.value&&(o.style.color=c.value)},updated(o,c){c.value&&(o.style.color=c.value)},unmounted(o){o.style.color=null}},bgColor:{mounted(o,c){c.value&&(o.style.backgroundColor=c.value)},updated(o,c){c.value&&(o.style.backgroundColor=c.value)},unmounted(o){o.style.backgroundColor=null}}},dte={name:"view-ui-plus",version:"1.3.17",title:"ViewUIPlus",description:"A high quality UI components Library with Vue.js 3",homepage:"http://www.iviewui.com",keywords:["iview","vue","viewui","viewuiplus","vue.js","component","components","ui","framework"],main:"dist/viewuiplus.min.js",typings:"types/index.d.ts",files:["dist","src","types"],scripts:{dev:"vue-cli-service serve",build:"npm run build:prod && npm run build:style && npm run build:lang","build:style":"gulp --gulpfile build/build-style.js","build:prod":"vite build","build:lang":"vite build --config build/vite.lang.config.js",lint:"vue-cli-service lint --fix"},repository:{type:"git",url:"https://github.com/view-design/ViewUIPlus"},author:"Aresn",license:"MIT",bugs:{url:"https://github.com/view-design/ViewUIPlus/issues"},dependencies:{"async-validator":"^3.3.0","countup.js":"^1.9.3",dayjs:"^1.11.0",deepmerge:"^2.2.1","element-resize-detector":"^1.2.0","js-calendar":"^1.2.3","lodash.chunk":"^4.2.0","lodash.throttle":"^4.1.1",numeral:"^2.0.6","popper.js":"^1.14.6",select:"^1.1.2",tinycolor2:"^1.4.1","v-click-outside-x":"^3.7.1"},devDependencies:{"@vitejs/plugin-vue":"^1.9.3","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-eslint":"~4.5.0","@vue/cli-service":"~4.5.0","@vue/compiler-sfc":"^3.0.0","babel-eslint":"^10.1.0","babel-plugin-import":"^1.13.3",chai:"^4.2.0","copy-webpack-plugin":"^6.4.1","cross-env":"^5.2.0",eslint:"^6.7.2","eslint-plugin-vue":"^7.0.0-0",gulp:"^4.0.2","gulp-autoprefixer":"^8.0.0","gulp-clean-css":"^4.3.0","gulp-less":"^4.0.1","gulp-rename":"^2.0.0",karma:"^2.0.5","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-sinon-chai":"^1.3.3","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"^0.0.32","karma-webpack":"^2.0.13",less:"^2.7.3","less-loader":"^4.1.0","lint-staged":"^10.5.4",lolex:"^2.7.5",mocha:"^5.0.4",sinon:"^4.4.2","sinon-chai":"^3.3.0","style-loader":"^0.20.2",tslint:"^5.14.0",typescript:"^3.3.4000","uglifyjs-webpack-plugin":"^1.3.0","url-loader":"^1.1.2",vite:"^2.6.4",vue:"^3.2.47","vue-hot-reload-api":"^2.3.4","vue-html-loader":"^1.2.4","vue-loader":"^17.0.0","vue-router":"^4.0.14","vue-style-loader":"^4.1.3","vue-template-compiler":"^2.6.14"}};const EA={display:Yl.display,width:Yl.width,height:Yl.height,margin:Yl.margin,padding:Yl.padding,font:Yl.font,color:Yl.color,"bg-color":Yl.bgColor,resize:ute,"line-clamp":hte},PA={...MA,iButton:Qr,iCircle:rv,iCol:ia,iContent:Xx,iForm:xv,iFooter:rw,iHeader:cw,iInput:oo,iMenu:pw,iOption:Ci,iProgress:Dv,iSelect:Wr,iSwitch:Tw,iTable:$v,iTime:Rv},$w=function(o,c={}){$w.installed||(c.locale&&Rl.use(c.locale),c.i18n&&Rl.i18n(c.i18n),Object.keys(PA).forEach(d=>{o.component(d,PA[d])}),Object.keys(EA).forEach(d=>{o.directive(d,EA[d])}),o.config.globalProperties.$VIEWUI={size:c.size||"",capture:"capture"in c?c.capture:!0,transfer:"transfer"in c?c.transfer:"",cell:{arrow:c.cell&&c.cell.arrow?c.cell.arrow:"",customArrow:c.cell&&c.cell.customArrow?c.cell.customArrow:"",arrowSize:c.cell&&c.cell.arrowSize?c.cell.arrowSize:""},menu:{arrow:c.menu&&c.menu.arrow?c.menu.arrow:"",customArrow:c.menu&&c.menu.customArrow?c.menu.customArrow:"",arrowSize:c.menu&&c.menu.arrowSize?c.menu.arrowSize:""},modal:{maskClosable:c.modal&&"maskClosable"in c.modal?c.modal.maskClosable:""},tabs:{closeIcon:c.tabs&&c.tabs.closeIcon?c.tabs.closeIcon:"",customCloseIcon:c.tabs&&c.tabs.customCloseIcon?c.tabs.customCloseIcon:"",closeIconSize:c.tabs&&c.tabs.closeIconSize?c.tabs.closeIconSize:""},select:{arrow:c.select&&c.select.arrow?c.select.arrow:"",customArrow:c.select&&c.select.customArrow?c.select.customArrow:"",arrowSize:c.select&&c.select.arrowSize?c.select.arrowSize:""},colorPicker:{arrow:c.colorPicker&&c.colorPicker.arrow?c.colorPicker.arrow:"",customArrow:c.colorPicker&&c.colorPicker.customArrow?c.colorPicker.customArrow:"",arrowSize:c.colorPicker&&c.colorPicker.arrowSize?c.colorPicker.arrowSize:""},cascader:{arrow:c.cascader&&c.cascader.arrow?c.cascader.arrow:"",customArrow:c.cascader&&c.cascader.customArrow?c.cascader.customArrow:"",arrowSize:c.cascader&&c.cascader.arrowSize?c.cascader.arrowSize:"",itemArrow:c.cascader&&c.cascader.itemArrow?c.cascader.itemArrow:"",customItemArrow:c.cascader&&c.cascader.customItemArrow?c.cascader.customItemArrow:"",itemArrowSize:c.cascader&&c.cascader.itemArrowSize?c.cascader.itemArrowSize:""},tree:{arrow:c.tree&&c.tree.arrow?c.tree.arrow:"",customArrow:c.tree&&c.tree.customArrow?c.tree.customArrow:"",arrowSize:c.tree&&c.tree.arrowSize?c.tree.arrowSize:""},datePicker:{icon:c.datePicker&&c.datePicker.icon?c.datePicker.icon:"",customIcon:c.datePicker&&c.datePicker.customIcon?c.datePicker.customIcon:"",iconSize:c.datePicker&&c.datePicker.iconSize?c.datePicker.iconSize:""},timePicker:{icon:c.timePicker&&c.timePicker.icon?c.timePicker.icon:"",customIcon:c.timePicker&&c.timePicker.customIcon?c.timePicker.customIcon:"",iconSize:c.timePicker&&c.timePicker.iconSize?c.timePicker.iconSize:""},typography:{copyConfig:c.typography&&c.typography.copyConfig?c.typography.copyConfig:"",editConfig:c.typography&&c.typography.editConfig?c.typography.editConfig:"",ellipsisConfig:c.typography&&c.typography.ellipsisConfig?c.typography.ellipsisConfig:""},space:{size:c.space&&c.space.size?c.space.size:""},image:{toolbar:c.image&&c.image.toolbar?c.image.toolbar:""}},o.config.globalProperties.$Spin=Ls,o.config.globalProperties.$Loading=dw,o.config.globalProperties.$Message=fp,o.config.globalProperties.$Notice=gw,o.config.globalProperties.$Modal=lo,o.config.globalProperties.$ImagePreview=Fl,o.config.globalProperties.$Copy=hv,o.config.globalProperties.$ScrollIntoView=_w,o.config.globalProperties.$ScrollTop=Sw,o.config.globalProperties.$Date=Ds)},AA=dte.version,RA=Rl.use,IA=Rl.i18n,DA=o=>{const c=window["viewuiplus/locale"].default;o===c.i.locale?Rl.use(c):console.log(`The ${o} language pack is not loaded.`)},fte={version:AA,locale:RA,i18n:IA,install:$w,lang:DA,...MA};n.Affix=v,n.Alert=j,n.Anchor=F,n.AnchorLink=le,n.Auth=Me,n.AutoComplete=qM,n.Avatar=Jf,n.AvatarList=JM,n.BackTop=eE,n.Badge=Z0,n.Breadcrumb=Mx,n.BreadcrumbItem=Ex,n.Button=Qr,n.ButtonGroup=Px,n.Calendar=hE,n.Captcha=vE,n.Card=bE,n.Carousel=OE,n.CarouselItem=xE,n.Cascader=wE,n.Cell=_E,n.CellGroup=SE,n.Checkbox=Vu,n.CheckboxGroup=Ux,n.Circle=rv,n.City=ME,n.Col=ia,n.Collapse=PE,n.ColorPicker=FE,n.Content=Xx,n.Copy=hv,n.CountDown=jE,n.CountUp=qE,n.DatePicker=M3,n.Description=E3,n.DescriptionList=P3,n.Divider=vv,n.Drawer=A3,n.Dropdown=hh,n.DropdownItem=R3,n.DropdownMenu=uh,n.Ellipsis=I3,n.Email=D3,n.Exception=N3,n.Footer=rw,n.FooterToolbar=$3,n.Form=xv,n.FormItem=iv,n.GlobalFooter=V3,n.Grid=q3,n.GridItem=Z3,n.Header=cw,n.Icon=S,n.Image=K3,n.ImagePreview=Fl,n.Input=oo,n.InputNumber=hw,n.Layout=eP,n.Link=rP,n.List=lP,n.ListItem=cP,n.ListItemMeta=hP,n.LoadingBar=dw,n.Login=vP,n.Menu=pw,n.MenuGroup=yP,n.MenuItem=bP,n.Message=fp,n.Mobile=OP,n.Modal=lo,n.Notice=gw,n.Notification=AP,n.NotificationItem=DP,n.NotificationTab=NP,n.NumberInfo=$P,n.Numeral=LP,n.Option=Ci,n.OptionGroup=BP,n.Page=UP,n.PageHeader=zP,n.Panel=FP,n.Paragraph=XP,n.Password=WP,n.Poptip=xw,n.Progress=Dv,n.Radio=ev,n.RadioGroup=J0,n.Rate=QP,n.Result=HP,n.Row=Nl,n.Scroll=YP,n.ScrollIntoView=_w,n.ScrollTop=Sw,n.Select=Wr,n.Sider=JP,n.Skeleton=eA,n.SkeletonItem=Cw,n.Slider=tA,n.Space=nA,n.Spin=Ls,n.Split=iA,n.Step=sA,n.Steps=oA,n.Submenu=aA,n.Submit=lA,n.Switch=Tw,n.TabPane=Iv,n.Table=$v,n.TablePaste=hA,n.Tabs=Av,n.Tag=Lu,n.TagSelect=uA,n.TagSelectOption=dA,n.Text=fA,n.Time=Rv,n.TimePicker=vA,n.Timeline=mA,n.TimelineItem=gA,n.Title=yA,n.Tooltip=Va,n.Transfer=xA,n.Tree=Dw,n.TreeSelect=wA,n.Trend=yw,n.Typography=_A,n.Upload=CA,n.UserName=kA,n.WordCount=TA,n.default=fte,n.i18n=IA,n.install=$w,n.lang=DA,n.locale=RA,n.version=AA,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(nk,nk.exports);var zke=nk.exports;const Fke=oM(zke);var wx=H$(Uke);wx.use(Fke);wx.use(lpe);wx.use(nU);wx.mount("#app");
