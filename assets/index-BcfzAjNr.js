const __vite__fileDeps=["assets/browserAll-unXbVNlA.js","assets/webworkerAll-J02iDL49.js","assets/colorToUniform-C2GHuDhf.js","assets/WebGPURenderer-CZikG9L4.js","assets/SharedSystems-Bll1o2hJ.js","assets/WebGLRenderer-BI7ZnjWQ.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var aae=Object.defineProperty;var lae=(n,e,i)=>e in n?aae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i;var f1=(n,e,i)=>(lae(n,typeof e!="symbol"?e+"":e,i),i);function cae(n,e){for(var i=0;i<e.length;i++){const t=e[i];if(typeof t!="string"&&!Array.isArray(t)){for(const r in t)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(t,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>t[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function JO(n,e){const i=new Set(n.split(","));return t=>i.has(t)}const Ji={},$f=[],Qs=()=>{},hae=()=>!1,Uv=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),iE=n=>n.startsWith("onUpdate:"),_n=Object.assign,nE=(n,e)=>{const i=n.indexOf(e);i>-1&&n.splice(i,1)},uae=Object.prototype.hasOwnProperty,$i=(n,e)=>uae.call(n,e),At=Array.isArray,Vf=n=>Vp(n)==="[object Map]",gd=n=>Vp(n)==="[object Set]",GR=n=>Vp(n)==="[object Date]",dae=n=>Vp(n)==="[object RegExp]",Jt=n=>typeof n=="function",Mn=n=>typeof n=="string",Jl=n=>typeof n=="symbol",an=n=>n!==null&&typeof n=="object",rE=n=>(an(n)||Jt(n))&&Jt(n.then)&&Jt(n.catch),dB=Object.prototype.toString,Vp=n=>dB.call(n),fae=n=>Vp(n).slice(8,-1),fB=n=>Vp(n)==="[object Object]",sE=n=>Mn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Lf=JO(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ew=n=>{const e=Object.create(null);return i=>e[i]||(e[i]=n(i))},pae=/-(\w)/g,Os=ew(n=>n.replace(pae,(e,i)=>i?i.toUpperCase():"")),mae=/\B([A-Z])/g,xo=ew(n=>n.replace(mae,"-$1").toLowerCase()),Fv=ew(n=>n.charAt(0).toUpperCase()+n.slice(1)),y0=ew(n=>n?`on${Fv(n)}`:""),Sa=(n,e)=>!Object.is(n,e),Bf=(n,e)=>{for(let i=0;i<n.length;i++)n[i](e)},pB=(n,e,i,t=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:t,value:i})},Qx=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Hx=n=>{const e=Mn(n)?Number(n):NaN;return isNaN(e)?n:e};let YR;const mB=()=>YR||(YR=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),gae="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",vae=JO(gae);function Ah(n){if(At(n)){const e={};for(let i=0;i<n.length;i++){const t=n[i],r=Mn(t)?Oae(t):Ah(t);if(r)for(const s in r)e[s]=r[s]}return e}else if(Mn(n)||an(n))return n}const yae=/;(?![^(]*\))/g,bae=/:([^]+)/,xae=/\/\*[^]*?\*\//g;function Oae(n){const e={};return n.replace(xae,"").split(yae).forEach(i=>{if(i){const t=i.split(bae);t.length>1&&(e[t[0].trim()]=t[1].trim())}}),e}function Lp(n){let e="";if(Mn(n))e=n;else if(At(n))for(let i=0;i<n.length;i++){const t=Lp(n[i]);t&&(e+=t+" ")}else if(an(n))for(const i in n)n[i]&&(e+=i+" ");return e.trim()}function wae(n){if(!n)return null;let{class:e,style:i}=n;return e&&!Mn(e)&&(n.class=Lp(e)),i&&(n.style=Ah(i)),n}const _ae="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sae=JO(_ae);function gB(n){return!!n||n===""}function Cae(n,e){if(n.length!==e.length)return!1;let i=!0;for(let t=0;i&&t<n.length;t++)i=vh(n[t],e[t]);return i}function vh(n,e){if(n===e)return!0;let i=GR(n),t=GR(e);if(i||t)return i&&t?n.getTime()===e.getTime():!1;if(i=Jl(n),t=Jl(e),i||t)return n===e;if(i=At(n),t=At(e),i||t)return i&&t?Cae(n,e):!1;if(i=an(n),t=an(e),i||t){if(!i||!t)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const o in n){const l=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!vh(n[o],e[o]))return!1}}return String(n)===String(e)}function tw(n,e){return n.findIndex(i=>vh(i,e))}const op=n=>Mn(n)?n:n==null?"":At(n)||an(n)&&(n.toString===dB||!Jt(n.toString))?JSON.stringify(n,vB,2):String(n),vB=(n,e)=>e&&e.__v_isRef?vB(n,e.value):Vf(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[t,r],s)=>(i[zS(t,s)+" =>"]=r,i),{})}:gd(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>zS(i))}:Jl(e)?zS(e):an(e)&&!At(e)&&!fB(e)?String(e):e,zS=(n,e="")=>{var i;return Jl(n)?`Symbol(${(i=n.description)!=null?i:e})`:n};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mo;class oE{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=mo,!e&&mo&&(this.index=(mo.scopes||(mo.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=mo;try{return mo=this,e()}finally{mo=i}}}on(){mo=this}off(){mo=this.parent}stop(e){if(this._active){let i,t;for(i=0,t=this.effects.length;i<t;i++)this.effects[i].stop();for(i=0,t=this.cleanups.length;i<t;i++)this.cleanups[i]();if(this.scopes)for(i=0,t=this.scopes.length;i<t;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function kae(n){return new oE(n)}function yB(n,e=mo){e&&e.active&&e.effects.push(n)}function iw(){return mo}function aE(n){mo&&mo.cleanups.push(n)}let Xu;class ap{constructor(e,i,t,r){this.fn=e,this.trigger=i,this.scheduler=t,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,yB(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Rh();for(let e=0;e<this._depsLength;e++){const i=this.deps[e];if(i.computed&&(Tae(i.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ih()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=dh,i=Xu;try{return dh=!0,Xu=this,this._runnings++,jR(this),this.fn()}finally{qR(this),this._runnings--,Xu=i,dh=e}}stop(){this.active&&(jR(this),qR(this),this.onStop&&this.onStop(),this.active=!1)}}function Tae(n){return n.value}function jR(n){n._trackId++,n._depsLength=0}function qR(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)bB(n.deps[e],n);n.deps.length=n._depsLength}}function bB(n,e){const i=n.get(e);i!==void 0&&e._trackId!==i&&(n.delete(e),n.size===0&&n.cleanup())}function Mae(n,e){n.effect instanceof ap&&(n=n.effect.fn);const i=new ap(n,Qs,()=>{i.dirty&&i.run()});e&&(_n(i,e),e.scope&&yB(i,e.scope)),(!e||!e.lazy)&&i.run();const t=i.run.bind(i);return t.effect=i,t}function Eae(n){n.effect.stop()}let dh=!0,gk=0;const xB=[];function Rh(){xB.push(dh),dh=!1}function Ih(){const n=xB.pop();dh=n===void 0?!0:n}function lE(){gk++}function cE(){for(gk--;!gk&&vk.length;)vk.shift()()}function OB(n,e,i){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const t=n.deps[n._depsLength];t!==e?(t&&bB(t,n),n.deps[n._depsLength++]=e):n._depsLength++}}const vk=[];function wB(n,e,i){lE();for(const t of n.keys()){let r;t._dirtyLevel<e&&(r??(r=n.get(t)===t._trackId))&&(t._shouldSchedule||(t._shouldSchedule=t._dirtyLevel===0),t._dirtyLevel=e),t._shouldSchedule&&(r??(r=n.get(t)===t._trackId))&&(t.trigger(),(!t._runnings||t.allowRecurse)&&t._dirtyLevel!==2&&(t._shouldSchedule=!1,t.scheduler&&vk.push(t.scheduler)))}cE()}const _B=(n,e)=>{const i=new Map;return i.cleanup=n,i.computed=e,i},Gx=new WeakMap,Wu=Symbol(""),yk=Symbol("");function Zs(n,e,i){if(dh&&Xu){let t=Gx.get(n);t||Gx.set(n,t=new Map);let r=t.get(i);r||t.set(i,r=_B(()=>t.delete(i))),OB(Xu,r)}}function Ql(n,e,i,t,r,s){const o=Gx.get(n);if(!o)return;let l=[];if(e==="clear")l=[...o.values()];else if(i==="length"&&At(n)){const c=Number(t);o.forEach((u,d)=>{(d==="length"||!Jl(d)&&d>=c)&&l.push(u)})}else switch(i!==void 0&&l.push(o.get(i)),e){case"add":At(n)?sE(i)&&l.push(o.get("length")):(l.push(o.get(Wu)),Vf(n)&&l.push(o.get(yk)));break;case"delete":At(n)||(l.push(o.get(Wu)),Vf(n)&&l.push(o.get(yk)));break;case"set":Vf(n)&&l.push(o.get(Wu));break}lE();for(const c of l)c&&wB(c,4);cE()}function Pae(n,e){const i=Gx.get(n);return i&&i.get(e)}const Aae=JO("__proto__,__v_isRef,__isVue"),SB=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Jl)),ZR=Rae();function Rae(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...i){const t=Ni(this);for(let s=0,o=this.length;s<o;s++)Zs(t,"get",s+"");const r=t[e](...i);return r===-1||r===!1?t[e](...i.map(Ni)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...i){Rh(),lE();const t=Ni(this)[e].apply(this,i);return cE(),Ih(),t}}),n}function Iae(n){Jl(n)||(n=String(n));const e=Ni(this);return Zs(e,"has",n),e.hasOwnProperty(n)}class CB{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,t){const r=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return s;if(i==="__v_raw")return t===(r?s?AB:PB:s?EB:MB).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(t)?e:void 0;const o=At(e);if(!r){if(o&&$i(ZR,i))return Reflect.get(ZR,i,t);if(i==="hasOwnProperty")return Iae}const l=Reflect.get(e,i,t);return(Jl(i)?SB.has(i):Aae(i))||(r||Zs(e,"get",i),s)?l:or(l)?o&&sE(i)?l:l.value:an(l)?r?td(l):vd(l):l}}class kB extends CB{constructor(e=!1){super(!1,e)}set(e,i,t,r){let s=e[i];if(!this._isShallow){const c=lp(s);if(!B0(t)&&!lp(t)&&(s=Ni(s),t=Ni(t)),!At(e)&&or(s)&&!or(t))return c?!1:(s.value=t,!0)}const o=At(e)&&sE(i)?Number(i)<e.length:$i(e,i),l=Reflect.set(e,i,t,r);return e===Ni(r)&&(o?Sa(t,s)&&Ql(e,"set",i,t):Ql(e,"add",i,t)),l}deleteProperty(e,i){const t=$i(e,i);e[i];const r=Reflect.deleteProperty(e,i);return r&&t&&Ql(e,"delete",i,void 0),r}has(e,i){const t=Reflect.has(e,i);return(!Jl(i)||!SB.has(i))&&Zs(e,"has",i),t}ownKeys(e){return Zs(e,"iterate",At(e)?"length":Wu),Reflect.ownKeys(e)}}class TB extends CB{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const Dae=new kB,Nae=new TB,$ae=new kB(!0),Vae=new TB(!0),hE=n=>n,nw=n=>Reflect.getPrototypeOf(n);function p1(n,e,i=!1,t=!1){n=n.__v_raw;const r=Ni(n),s=Ni(e);i||(Sa(e,s)&&Zs(r,"get",e),Zs(r,"get",s));const{has:o}=nw(r),l=t?hE:i?dE:U0;if(o.call(r,e))return l(n.get(e));if(o.call(r,s))return l(n.get(s));n!==r&&n.get(e)}function m1(n,e=!1){const i=this.__v_raw,t=Ni(i),r=Ni(n);return e||(Sa(n,r)&&Zs(t,"has",n),Zs(t,"has",r)),n===r?i.has(n):i.has(n)||i.has(r)}function g1(n,e=!1){return n=n.__v_raw,!e&&Zs(Ni(n),"iterate",Wu),Reflect.get(n,"size",n)}function KR(n){n=Ni(n);const e=Ni(this);return nw(e).has.call(e,n)||(e.add(n),Ql(e,"add",n,n)),this}function JR(n,e){e=Ni(e);const i=Ni(this),{has:t,get:r}=nw(i);let s=t.call(i,n);s||(n=Ni(n),s=t.call(i,n));const o=r.call(i,n);return i.set(n,e),s?Sa(e,o)&&Ql(i,"set",n,e):Ql(i,"add",n,e),this}function eI(n){const e=Ni(this),{has:i,get:t}=nw(e);let r=i.call(e,n);r||(n=Ni(n),r=i.call(e,n)),t&&t.call(e,n);const s=e.delete(n);return r&&Ql(e,"delete",n,void 0),s}function tI(){const n=Ni(this),e=n.size!==0,i=n.clear();return e&&Ql(n,"clear",void 0,void 0),i}function v1(n,e){return function(t,r){const s=this,o=s.__v_raw,l=Ni(o),c=e?hE:n?dE:U0;return!n&&Zs(l,"iterate",Wu),o.forEach((u,d)=>t.call(r,c(u),c(d),s))}}function y1(n,e,i){return function(...t){const r=this.__v_raw,s=Ni(r),o=Vf(s),l=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,u=r[n](...t),d=i?hE:e?dE:U0;return!e&&Zs(s,"iterate",c?yk:Wu),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:l?[d(f[0]),d(f[1])]:d(f),done:m}},[Symbol.iterator](){return this}}}}function Ic(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Lae(){const n={get(s){return p1(this,s)},get size(){return g1(this)},has:m1,add:KR,set:JR,delete:eI,clear:tI,forEach:v1(!1,!1)},e={get(s){return p1(this,s,!1,!0)},get size(){return g1(this)},has:m1,add:KR,set:JR,delete:eI,clear:tI,forEach:v1(!1,!0)},i={get(s){return p1(this,s,!0)},get size(){return g1(this,!0)},has(s){return m1.call(this,s,!0)},add:Ic("add"),set:Ic("set"),delete:Ic("delete"),clear:Ic("clear"),forEach:v1(!0,!1)},t={get(s){return p1(this,s,!0,!0)},get size(){return g1(this,!0)},has(s){return m1.call(this,s,!0)},add:Ic("add"),set:Ic("set"),delete:Ic("delete"),clear:Ic("clear"),forEach:v1(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=y1(s,!1,!1),i[s]=y1(s,!0,!1),e[s]=y1(s,!1,!0),t[s]=y1(s,!0,!0)}),[n,i,e,t]}const[Bae,Uae,Fae,zae]=Lae();function rw(n,e){const i=e?n?zae:Fae:n?Uae:Bae;return(t,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?t:Reflect.get($i(i,r)&&r in t?i:t,r,s)}const Xae={get:rw(!1,!1)},Wae={get:rw(!1,!0)},Qae={get:rw(!0,!1)},Hae={get:rw(!0,!0)},MB=new WeakMap,EB=new WeakMap,PB=new WeakMap,AB=new WeakMap;function Gae(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yae(n){return n.__v_skip||!Object.isExtensible(n)?0:Gae(fae(n))}function vd(n){return lp(n)?n:sw(n,!1,Dae,Xae,MB)}function RB(n){return sw(n,!1,$ae,Wae,EB)}function td(n){return sw(n,!0,Nae,Qae,PB)}function jae(n){return sw(n,!0,Vae,Hae,AB)}function sw(n,e,i,t,r){if(!an(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=Yae(n);if(o===0)return n;const l=new Proxy(n,o===2?t:i);return r.set(n,l),l}function Uf(n){return lp(n)?Uf(n.__v_raw):!!(n&&n.__v_isReactive)}function lp(n){return!!(n&&n.__v_isReadonly)}function B0(n){return!!(n&&n.__v_isShallow)}function uE(n){return n?!!n.__v_raw:!1}function Ni(n){const e=n&&n.__v_raw;return e?Ni(e):n}function IB(n){return Object.isExtensible(n)&&pB(n,"__v_skip",!0),n}const U0=n=>an(n)?vd(n):n,dE=n=>an(n)?td(n):n;class DB{constructor(e,i,t,r){this.getter=e,this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ap(()=>e(this._value),()=>Ff(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=t}get value(){const e=Ni(this);return(!e._cacheable||e.effect.dirty)&&Sa(e._value,e._value=e.effect.run())&&Ff(e,4),fE(e),e.effect._dirtyLevel>=2&&Ff(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function qae(n,e,i=!1){let t,r;const s=Jt(n);return s?(t=n,r=Qs):(t=n.get,r=n.set),new DB(t,r,s||!r,i)}function fE(n){var e;dh&&Xu&&(n=Ni(n),OB(Xu,(e=n.dep)!=null?e:n.dep=_B(()=>n.dep=void 0,n instanceof DB?n:void 0)))}function Ff(n,e=4,i){n=Ni(n);const t=n.dep;t&&wB(t,e)}function or(n){return!!(n&&n.__v_isRef===!0)}function ot(n){return NB(n,!1)}function Fn(n){return NB(n,!0)}function NB(n,e){return or(n)?n:new Zae(n,e)}class Zae{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:Ni(e),this._value=i?e:U0(e)}get value(){return fE(this),this._value}set value(e){const i=this.__v_isShallow||B0(e)||lp(e);e=i?e:Ni(e),Sa(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:U0(e),Ff(this,4))}}function Kae(n){Ff(n,4)}function oi(n){return or(n)?n.value:n}function Jae(n){return Jt(n)?n():oi(n)}const ele={get:(n,e,i)=>oi(Reflect.get(n,e,i)),set:(n,e,i,t)=>{const r=n[e];return or(r)&&!or(i)?(r.value=i,!0):Reflect.set(n,e,i,t)}};function pE(n){return Uf(n)?n:new Proxy(n,ele)}class tle{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:t}=e(()=>fE(this),()=>Ff(this));this._get=i,this._set=t}get value(){return this._get()}set value(e){this._set(e)}}function mE(n){return new tle(n)}function zv(n){const e=At(n)?new Array(n.length):{};for(const i in n)e[i]=$B(n,i);return e}class ile{constructor(e,i,t){this._object=e,this._key=i,this._defaultValue=t,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Pae(Ni(this._object),this._key)}}class nle{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function rle(n,e,i){return or(n)?n:Jt(n)?new nle(n):an(n)&&arguments.length>1?$B(n,e,i):ot(n)}function $B(n,e,i){const t=n[e];return or(t)?t:new ile(n,e,i)}const sle={GET:"get",HAS:"has",ITERATE:"iterate"},ole={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ale(n,e){}const lle={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},cle={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function Hl(n,e,i,t){try{return t?n(...t):n()}catch(r){yd(r,e,i)}}function Co(n,e,i,t){if(Jt(n)){const r=Hl(n,e,i,t);return r&&rE(r)&&r.catch(s=>{yd(s,e,i)}),r}if(At(n)){const r=[];for(let s=0;s<n.length;s++)r.push(Co(n[s],e,i,t));return r}}function yd(n,e,i,t=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${i}`;for(;s;){const u=s.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,o,l)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){Rh(),Hl(c,null,10,[n,o,l]),Ih();return}}hle(n,i,r,t)}function hle(n,e,i,t=!0){console.error(n)}let F0=!1,bk=!1;const Kr=[];let ja=0;const zf=[];let qc=null,Eu=0;const VB=Promise.resolve();let gE=null;function Bp(n){const e=gE||VB;return n?e.then(this?n.bind(this):n):e}function ule(n){let e=ja+1,i=Kr.length;for(;e<i;){const t=e+i>>>1,r=Kr[t],s=z0(r);s<n||s===n&&r.pre?e=t+1:i=t}return e}function ow(n){(!Kr.length||!Kr.includes(n,F0&&n.allowRecurse?ja+1:ja))&&(n.id==null?Kr.push(n):Kr.splice(ule(n.id),0,n),LB())}function LB(){!F0&&!bk&&(bk=!0,gE=VB.then(BB))}function dle(n){const e=Kr.indexOf(n);e>ja&&Kr.splice(e,1)}function Yx(n){At(n)?zf.push(...n):(!qc||!qc.includes(n,n.allowRecurse?Eu+1:Eu))&&zf.push(n),LB()}function iI(n,e,i=F0?ja+1:0){for(;i<Kr.length;i++){const t=Kr[i];if(t&&t.pre){if(n&&t.id!==n.uid)continue;Kr.splice(i,1),i--,t()}}}function jx(n){if(zf.length){const e=[...new Set(zf)].sort((i,t)=>z0(i)-z0(t));if(zf.length=0,qc){qc.push(...e);return}for(qc=e,Eu=0;Eu<qc.length;Eu++)qc[Eu]();qc=null,Eu=0}}const z0=n=>n.id==null?1/0:n.id,fle=(n,e)=>{const i=z0(n)-z0(e);if(i===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return i};function BB(n){bk=!1,F0=!0,Kr.sort(fle);try{for(ja=0;ja<Kr.length;ja++){const e=Kr[ja];e&&e.active!==!1&&Hl(e,null,14)}}finally{ja=0,Kr.length=0,jx(),F0=!1,gE=null,(Kr.length||zf.length)&&BB()}}let _f,b1=[];function UB(n,e){var i,t;_f=n,_f?(_f.enabled=!0,b1.forEach(({event:r,args:s})=>_f.emit(r,...s)),b1=[]):typeof window<"u"&&window.HTMLElement&&!((t=(i=window.navigator)==null?void 0:i.userAgent)!=null&&t.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{UB(s,e)}),setTimeout(()=>{_f||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,b1=[])},3e3)):b1=[]}function ple(n,e,...i){if(n.isUnmounted)return;const t=n.vnode.props||Ji;let r=i;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in t){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:m}=t[d]||Ji;m&&(r=i.map(g=>Mn(g)?g.trim():g)),f&&(r=i.map(Qx))}let l,c=t[l=y0(e)]||t[l=y0(Os(e))];!c&&s&&(c=t[l=y0(xo(e))]),c&&Co(c,n,6,r);const u=t[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,Co(u,n,6,r)}}function FB(n,e,i=!1){const t=e.emitsCache,r=t.get(n);if(r!==void 0)return r;const s=n.emits;let o={},l=!1;if(!Jt(n)){const c=u=>{const d=FB(u,e,!0);d&&(l=!0,_n(o,d))};!i&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!l?(an(n)&&t.set(n,null),null):(At(s)?s.forEach(c=>o[c]=null):_n(o,s),an(n)&&t.set(n,o),o)}function aw(n,e){return!n||!Uv(e)?!1:(e=e.slice(2).replace(/Once$/,""),$i(n,e[0].toLowerCase()+e.slice(1))||$i(n,xo(e))||$i(n,e))}let tr=null,lw=null;function X0(n){const e=tr;return tr=n,lw=n&&n.type.__scopeId||null,e}function zB(n){lw=n}function XB(){lw=null}const mle=n=>Je;function Je(n,e=tr,i){if(!e||n._n)return n;const t=(...r)=>{t._d&&Mk(-1);const s=X0(e);let o;try{o=n(...r)}finally{X0(s),t._d&&Mk(1)}return o};return t._n=!0,t._c=!0,t._d=!0,t}function fx(n){const{type:e,vnode:i,proxy:t,withProxy:r,propsOptions:[s],slots:o,attrs:l,emit:c,render:u,renderCache:d,props:f,data:m,setupState:g,ctx:y,inheritAttrs:x}=n,b=X0(n);let S,_;try{if(i.shapeFlag&4){const k=r||t,M=k;S=bo(u.call(M,k,d,f,g,m,y)),_=l}else{const k=e;S=bo(k.length>1?k(f,{attrs:l,slots:o,emit:c}):k(f,null)),_=e.props?l:vle(l)}}catch(k){O0.length=0,yd(k,n,1),S=Re(Vr)}let O=S;if(_&&x!==!1){const k=Object.keys(_),{shapeFlag:M}=O;k.length&&M&7&&(s&&k.some(iE)&&(_=yle(_,s)),O=rl(O,_,!1,!0))}return i.dirs&&(O=rl(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(i.dirs):i.dirs),i.transition&&(O.transition=i.transition),S=O,X0(b),S}function gle(n,e=!0){let i;for(let t=0;t<n.length;t++){const r=n[t];if(bh(r)){if(r.type!==Vr||r.children==="v-if"){if(i)return;i=r}}else return}return i}const vle=n=>{let e;for(const i in n)(i==="class"||i==="style"||Uv(i))&&((e||(e={}))[i]=n[i]);return e},yle=(n,e)=>{const i={};for(const t in n)(!iE(t)||!(t.slice(9)in e))&&(i[t]=n[t]);return i};function ble(n,e,i){const{props:t,children:r,component:s}=n,{props:o,children:l,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&c>=0){if(c&1024)return!0;if(c&16)return t?nI(t,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(o[m]!==t[m]&&!aw(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:t===o?!1:t?o?nI(t,o,u):!0:!!o;return!1}function nI(n,e,i){const t=Object.keys(e);if(t.length!==Object.keys(n).length)return!0;for(let r=0;r<t.length;r++){const s=t[r];if(e[s]!==n[s]&&!aw(i,s))return!0}return!1}function vE({vnode:n,parent:e},i){for(;e;){const t=e.subTree;if(t.suspense&&t.suspense.activeBranch===n&&(t.el=n.el),t===n)(n=e.vnode).el=i,e=e.parent;else break}}const yE="components",xle="directives";function Pt(n,e){return bE(yE,n,!0,e)||n}const WB=Symbol.for("v-ndc");function xk(n){return Mn(n)?bE(yE,n,!1)||n:n||WB}function Ole(n){return bE(xle,n)}function bE(n,e,i=!0,t=!1){const r=tr||dr;if(r){const s=r.type;if(n===yE){const l=Ik(s,!1);if(l&&(l===e||l===Os(e)||l===Fv(Os(e))))return s}const o=rI(r[n]||s[n],e)||rI(r.appContext[n],e);return!o&&t?s:o}}function rI(n,e){return n&&(n[e]||n[Os(e)]||n[Fv(Os(e))])}const QB=n=>n.__isSuspense;let Ok=0;const wle={name:"Suspense",__isSuspense:!0,process(n,e,i,t,r,s,o,l,c,u){if(n==null)_le(e,i,t,r,s,o,l,c,u);else{if(s&&s.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}Sle(n,e,i,t,r,o,l,c,u)}},hydrate:Cle,create:xE,normalize:kle},HB=wle;function W0(n,e){const i=n.props&&n.props[e];Jt(i)&&i()}function _le(n,e,i,t,r,s,o,l,c){const{p:u,o:{createElement:d}}=c,f=d("div"),m=n.suspense=xE(n,r,t,e,f,i,s,o,l,c);u(null,m.pendingBranch=n.ssContent,f,null,t,m,s,o),m.deps>0?(W0(n,"onPending"),W0(n,"onFallback"),u(null,n.ssFallback,e,i,t,null,s,o),Xf(m,n.ssFallback)):m.resolve(!1,!0)}function Sle(n,e,i,t,r,s,o,l,{p:c,um:u,o:{createElement:d}}){const f=e.suspense=n.suspense;f.vnode=e,e.el=n.el;const m=e.ssContent,g=e.ssFallback,{activeBranch:y,pendingBranch:x,isInFallback:b,isHydrating:S}=f;if(x)f.pendingBranch=m,ba(m,x)?(c(x,m,f.hiddenContainer,null,r,f,s,o,l),f.deps<=0?f.resolve():b&&(S||(c(y,g,i,t,r,null,s,o,l),Xf(f,g)))):(f.pendingId=Ok++,S?(f.isHydrating=!1,f.activeBranch=x):u(x,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=d("div"),b?(c(null,m,f.hiddenContainer,null,r,f,s,o,l),f.deps<=0?f.resolve():(c(y,g,i,t,r,null,s,o,l),Xf(f,g))):y&&ba(m,y)?(c(y,m,i,t,r,f,s,o,l),f.resolve(!0)):(c(null,m,f.hiddenContainer,null,r,f,s,o,l),f.deps<=0&&f.resolve()));else if(y&&ba(m,y))c(y,m,i,t,r,f,s,o,l),Xf(f,m);else if(W0(e,"onPending"),f.pendingBranch=m,m.shapeFlag&512?f.pendingId=m.component.suspenseId:f.pendingId=Ok++,c(null,m,f.hiddenContainer,null,r,f,s,o,l),f.deps<=0)f.resolve();else{const{timeout:_,pendingId:O}=f;_>0?setTimeout(()=>{f.pendingId===O&&f.fallback(g)},_):_===0&&f.fallback(g)}}function xE(n,e,i,t,r,s,o,l,c,u,d=!1){const{p:f,m,um:g,n:y,o:{parentNode:x,remove:b}}=u;let S;const _=Tle(n);_&&e&&e.pendingBranch&&(S=e.pendingId,e.deps++);const O=n.props?Hx(n.props.timeout):void 0,k=s,M={vnode:n,parent:e,parentComponent:i,namespace:o,container:t,hiddenContainer:r,deps:0,pendingId:Ok++,timeout:typeof O=="number"?O:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(E=!1,R=!1){const{vnode:P,activeBranch:I,pendingBranch:T,pendingId:N,effects:L,parentComponent:D,container:$}=M;let B=!1;M.isHydrating?M.isHydrating=!1:E||(B=I&&T.transition&&T.transition.mode==="out-in",B&&(I.transition.afterLeave=()=>{N===M.pendingId&&(m(T,$,s===k?y(I):s,0),Yx(L))}),I&&(x(I.el)!==M.hiddenContainer&&(s=y(I)),g(I,D,M,!0)),B||m(T,$,s,0)),Xf(M,T),M.pendingBranch=null,M.isInFallback=!1;let U=M.parent,Q=!1;for(;U;){if(U.pendingBranch){U.effects.push(...L),Q=!0;break}U=U.parent}!Q&&!B&&Yx(L),M.effects=[],_&&e&&e.pendingBranch&&S===e.pendingId&&(e.deps--,e.deps===0&&!R&&e.resolve()),W0(P,"onResolve")},fallback(E){if(!M.pendingBranch)return;const{vnode:R,activeBranch:P,parentComponent:I,container:T,namespace:N}=M;W0(R,"onFallback");const L=y(P),D=()=>{M.isInFallback&&(f(null,E,T,L,I,null,N,l,c),Xf(M,E))},$=E.transition&&E.transition.mode==="out-in";$&&(P.transition.afterLeave=D),M.isInFallback=!0,g(P,I,null,!0),$||D()},move(E,R,P){M.activeBranch&&m(M.activeBranch,E,R,P),M.container=E},next(){return M.activeBranch&&y(M.activeBranch)},registerDep(E,R){const P=!!M.pendingBranch;P&&M.deps++;const I=E.vnode.el;E.asyncDep.catch(T=>{yd(T,E,0)}).then(T=>{if(E.isUnmounted||M.isUnmounted||M.pendingId!==E.suspenseId)return;E.asyncResolved=!0;const{vnode:N}=E;Ak(E,T,!1),I&&(N.el=I);const L=!I&&E.subTree.el;R(E,N,x(I||E.subTree.el),I?null:y(E.subTree),M,o,c),L&&b(L),vE(E,N.el),P&&--M.deps===0&&M.resolve()})},unmount(E,R){M.isUnmounted=!0,M.activeBranch&&g(M.activeBranch,i,E,R),M.pendingBranch&&g(M.pendingBranch,i,E,R)}};return M}function Cle(n,e,i,t,r,s,o,l,c){const u=e.suspense=xE(e,t,i,n.parentNode,document.createElement("div"),null,r,s,o,l,!0),d=c(n,u.pendingBranch=e.ssContent,i,u,s,o);return u.deps===0&&u.resolve(!1,!0),d}function kle(n){const{shapeFlag:e,children:i}=n,t=e&32;n.ssContent=sI(t?i.default:i),n.ssFallback=t?sI(i.fallback):Re(Vr)}function sI(n){let e;if(Jt(n)){const i=rd&&n._c;i&&(n._d=!1,ai()),n=n(),i&&(n._d=!0,e=Hs,E8())}return At(n)&&(n=gle(n)),n=bo(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(i=>i!==n)),n}function GB(n,e){e&&e.pendingBranch?At(n)?e.effects.push(...n):e.effects.push(n):Yx(n)}function Xf(n,e){n.activeBranch=e;const{vnode:i,parentComponent:t}=n;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;i.el=r,t&&t.subTree===i&&(t.vnode.el=r,vE(t,r))}function Tle(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const YB=Symbol.for("v-scx"),jB=()=>Qf(YB);function Gl(n,e){return Xv(n,null,e)}function qB(n,e){return Xv(n,null,{flush:"post"})}function ZB(n,e){return Xv(n,null,{flush:"sync"})}const x1={};function Fi(n,e,i){return Xv(n,e,i)}function Xv(n,e,{immediate:i,deep:t,flush:r,once:s,onTrack:o,onTrigger:l}=Ji){if(e&&s){const E=e;e=(...R)=>{E(...R),M()}}const c=dr,u=E=>t===!0?E:Iu(E,t===!1?1:void 0);let d,f=!1,m=!1;if(or(n)?(d=()=>n.value,f=B0(n)):Uf(n)?(d=()=>u(n),f=!0):At(n)?(m=!0,f=n.some(E=>Uf(E)||B0(E)),d=()=>n.map(E=>{if(or(E))return E.value;if(Uf(E))return u(E);if(Jt(E))return Hl(E,c,2)})):Jt(n)?e?d=()=>Hl(n,c,2):d=()=>(g&&g(),Co(n,c,3,[y])):d=Qs,e&&t){const E=d;d=()=>Iu(E())}let g,y=E=>{g=O.onStop=()=>{Hl(E,c,4),g=O.onStop=void 0}},x;if(Qv)if(y=Qs,e?i&&Co(e,c,3,[d(),m?[]:void 0,y]):d(),r==="sync"){const E=jB();x=E.__watcherHandles||(E.__watcherHandles=[])}else return Qs;let b=m?new Array(n.length).fill(x1):x1;const S=()=>{if(!(!O.active||!O.dirty))if(e){const E=O.run();(t||f||(m?E.some((R,P)=>Sa(R,b[P])):Sa(E,b)))&&(g&&g(),Co(e,c,3,[E,b===x1?void 0:m&&b[0]===x1?[]:b,y]),b=E)}else O.run()};S.allowRecurse=!!e;let _;r==="sync"?_=S:r==="post"?_=()=>Rr(S,c&&c.suspense):(S.pre=!0,c&&(S.id=c.uid),_=()=>ow(S));const O=new ap(d,Qs,_),k=iw(),M=()=>{O.stop(),k&&nE(k.effects,O)};return e?i?S():b=O.run():r==="post"?Rr(O.run.bind(O),c&&c.suspense):O.run(),x&&x.push(M),M}function Mle(n,e,i){const t=this.proxy,r=Mn(n)?n.includes(".")?KB(t,n):()=>t[n]:n.bind(t,t);let s;Jt(e)?s=e:(s=e.handler,i=e);const o=sd(this),l=Xv(r,s.bind(t),i);return o(),l}function KB(n,e){const i=e.split(".");return()=>{let t=n;for(let r=0;r<i.length&&t;r++)t=t[i[r]];return t}}function Iu(n,e=1/0,i){if(e<=0||!an(n)||n.__v_skip||(i=i||new Set,i.has(n)))return n;if(i.add(n),e--,or(n))Iu(n.value,e,i);else if(At(n))for(let t=0;t<n.length;t++)Iu(n[t],e,i);else if(gd(n)||Vf(n))n.forEach(t=>{Iu(t,e,i)});else if(fB(n))for(const t in n)Iu(n[t],e,i);return n}function Ele(n,e){if(tr===null)return n;const i=fw(tr)||tr.proxy,t=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[s,o,l,c=Ji]=e[r];s&&(Jt(s)&&(s={mounted:s,updated:s}),s.deep&&Iu(o),t.push({dir:s,instance:i,value:o,oldValue:void 0,arg:l,modifiers:c}))}return n}function Ya(n,e,i,t){const r=n.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];s&&(l.oldValue=s[o].value);let c=l.dir[t];c&&(Rh(),Co(c,i,8,[n.el,l,n,e]),Ih())}}const Zc=Symbol("_leaveCb"),O1=Symbol("_enterCb");function OE(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jn(()=>{n.isMounted=!0}),dw(()=>{n.isUnmounting=!0}),n}const No=[Function,Array],wE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:No,onEnter:No,onAfterEnter:No,onEnterCancelled:No,onBeforeLeave:No,onLeave:No,onAfterLeave:No,onLeaveCancelled:No,onBeforeAppear:No,onAppear:No,onAfterAppear:No,onAppearCancelled:No},Ple={name:"BaseTransition",props:wE,setup(n,{slots:e}){const i=Mo(),t=OE();return()=>{const r=e.default&&cw(e.default(),!0);if(!r||!r.length)return;let s=r[0];if(r.length>1){for(const m of r)if(m.type!==Vr){s=m;break}}const o=Ni(n),{mode:l}=o;if(t.isLeaving)return XS(s);const c=oI(s);if(!c)return XS(s);const u=cp(c,o,t,i);id(c,u);const d=i.subTree,f=d&&oI(d);if(f&&f.type!==Vr&&!ba(c,f)){const m=cp(f,o,t,i);if(id(f,m),l==="out-in"&&c.type!==Vr)return t.isLeaving=!0,m.afterLeave=()=>{t.isLeaving=!1,i.update.active!==!1&&(i.effect.dirty=!0,i.update())},XS(s);l==="in-out"&&c.type!==Vr&&(m.delayLeave=(g,y,x)=>{const b=e8(t,f);b[String(f.key)]=f,g[Zc]=()=>{y(),g[Zc]=void 0,delete u.delayedLeave},u.delayedLeave=x})}return s}}},JB=Ple;function e8(n,e){const{leavingVNodes:i}=n;let t=i.get(e.type);return t||(t=Object.create(null),i.set(e.type,t)),t}function cp(n,e,i,t){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:m,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:x,onAppear:b,onAfterAppear:S,onAppearCancelled:_}=e,O=String(n.key),k=e8(i,n),M=(P,I)=>{P&&Co(P,t,9,I)},E=(P,I)=>{const T=I[1];M(P,I),At(P)?P.every(N=>N.length<=1)&&T():P.length<=1&&T()},R={mode:s,persisted:o,beforeEnter(P){let I=l;if(!i.isMounted)if(r)I=x||l;else return;P[Zc]&&P[Zc](!0);const T=k[O];T&&ba(n,T)&&T.el[Zc]&&T.el[Zc](),M(I,[P])},enter(P){let I=c,T=u,N=d;if(!i.isMounted)if(r)I=b||c,T=S||u,N=_||d;else return;let L=!1;const D=P[O1]=$=>{L||(L=!0,$?M(N,[P]):M(T,[P]),R.delayedLeave&&R.delayedLeave(),P[O1]=void 0)};I?E(I,[P,D]):D()},leave(P,I){const T=String(n.key);if(P[O1]&&P[O1](!0),i.isUnmounting)return I();M(f,[P]);let N=!1;const L=P[Zc]=D=>{N||(N=!0,I(),D?M(y,[P]):M(g,[P]),P[Zc]=void 0,k[T]===n&&delete k[T])};k[T]=n,m?E(m,[P,L]):L()},clone(P){return cp(P,e,i,t)}};return R}function XS(n){if(Wv(n))return n=rl(n),n.children=null,n}function oI(n){if(!Wv(n))return n;const{shapeFlag:e,children:i}=n;if(i){if(e&16)return i[0];if(e&32&&Jt(i.default))return i.default()}}function id(n,e){n.shapeFlag&6&&n.component?id(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function cw(n,e=!1,i){let t=[],r=0;for(let s=0;s<n.length;s++){let o=n[s];const l=i==null?o.key:String(i)+String(o.key!=null?o.key:s);o.type===hn?(o.patchFlag&128&&r++,t=t.concat(cw(o.children,e,l))):(e||o.type!==Vr)&&t.push(l!=null?rl(o,{key:l}):o)}if(r>1)for(let s=0;s<t.length;s++)t[s].patchFlag=-2;return t}/*! #__NO_SIDE_EFFECTS__ */function ec(n,e){return Jt(n)?_n({name:n.name},e,{setup:n}):n}const Qu=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Ale(n){Jt(n)&&(n={loader:n});const{loader:e,loadingComponent:i,errorComponent:t,delay:r=200,timeout:s,suspensible:o=!0,onError:l}=n;let c=null,u,d=0;const f=()=>(d++,c=null,m()),m=()=>{let g;return c||(g=c=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((x,b)=>{l(y,()=>x(f()),()=>b(y),d+1)});throw y}).then(y=>g!==c&&c?c:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),u=y,y)))};return ec({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return u},setup(){const g=dr;if(u)return()=>WS(u,g);const y=_=>{c=null,yd(_,g,13,!t)};if(o&&g.suspense||Qv)return m().then(_=>()=>WS(_,g)).catch(_=>(y(_),()=>t?Re(t,{error:_}):null));const x=ot(!1),b=ot(),S=ot(!!r);return r&&setTimeout(()=>{S.value=!1},r),s!=null&&setTimeout(()=>{if(!x.value&&!b.value){const _=new Error(`Async component timed out after ${s}ms.`);y(_),b.value=_}},s),m().then(()=>{x.value=!0,g.parent&&Wv(g.parent.vnode)&&(g.parent.effect.dirty=!0,ow(g.parent.update))}).catch(_=>{y(_),b.value=_}),()=>{if(x.value&&u)return WS(u,g);if(b.value&&t)return Re(t,{error:b.value});if(i&&!S.value)return Re(i)}}})}function WS(n,e){const{ref:i,props:t,children:r,ce:s}=e.vnode,o=Re(n,t,r);return o.ref=i,o.ce=s,delete e.vnode.ce,o}const Wv=n=>n.type.__isKeepAlive,Rle={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const i=Mo(),t=i.ctx;if(!t.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const r=new Map,s=new Set;let o=null;const l=i.suspense,{renderer:{p:c,m:u,um:d,o:{createElement:f}}}=t,m=f("div");t.activate=(_,O,k,M,E)=>{const R=_.component;u(_,O,k,0,l),c(R.vnode,_,O,k,R,l,M,_.slotScopeIds,E),Rr(()=>{R.isDeactivated=!1,R.a&&Bf(R.a);const P=_.props&&_.props.onVnodeMounted;P&&Bs(P,R.parent,_)},l)},t.deactivate=_=>{const O=_.component;u(_,m,null,1,l),Rr(()=>{O.da&&Bf(O.da);const k=_.props&&_.props.onVnodeUnmounted;k&&Bs(k,O.parent,_),O.isDeactivated=!0},l)};function g(_){QS(_),d(_,i,l,!0)}function y(_){r.forEach((O,k)=>{const M=Ik(O.type);M&&(!_||!_(M))&&x(k)})}function x(_){const O=r.get(_);!o||!ba(O,o)?g(O):o&&QS(o),r.delete(_),s.delete(_)}Fi(()=>[n.include,n.exclude],([_,O])=>{_&&y(k=>r0(_,k)),O&&y(k=>!r0(O,k))},{flush:"post",deep:!0});let b=null;const S=()=>{b!=null&&r.set(b,HS(i.subTree))};return jn(S),uw(S),dw(()=>{r.forEach(_=>{const{subTree:O,suspense:k}=i,M=HS(O);if(_.type===M.type&&_.key===M.key){QS(M);const E=M.component.da;E&&Rr(E,k);return}g(_)})}),()=>{if(b=null,!e.default)return null;const _=e.default(),O=_[0];if(_.length>1)return o=null,_;if(!bh(O)||!(O.shapeFlag&4)&&!(O.shapeFlag&128))return o=null,O;let k=HS(O);const M=k.type,E=Ik(Qu(k)?k.type.__asyncResolved||{}:M),{include:R,exclude:P,max:I}=n;if(R&&(!E||!r0(R,E))||P&&E&&r0(P,E))return o=k,O;const T=k.key==null?M:k.key,N=r.get(T);return k.el&&(k=rl(k),O.shapeFlag&128&&(O.ssContent=k)),b=T,N?(k.el=N.el,k.component=N.component,k.transition&&id(k,k.transition),k.shapeFlag|=512,s.delete(T),s.add(T)):(s.add(T),I&&s.size>parseInt(I,10)&&x(s.values().next().value)),k.shapeFlag|=256,o=k,QB(O.type)?O:k}}},Ile=Rle;function r0(n,e){return At(n)?n.some(i=>r0(i,e)):Mn(n)?n.split(",").includes(e):dae(n)?n.test(e):!1}function t8(n,e){n8(n,"a",e)}function i8(n,e){n8(n,"da",e)}function n8(n,e,i=dr){const t=n.__wdc||(n.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(hw(e,t,i),i){let r=i.parent;for(;r&&r.parent;)Wv(r.parent.vnode)&&Dle(t,e,i,r),r=r.parent}}function Dle(n,e,i,t){const r=hw(e,n,t,!0);Jo(()=>{nE(t[e],r)},i)}function QS(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function HS(n){return n.shapeFlag&128?n.ssContent:n}function hw(n,e,i=dr,t=!1){if(i){const r=i[n]||(i[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(i.isUnmounted)return;Rh();const l=sd(i),c=Co(e,i,n,o);return l(),Ih(),c});return t?r.unshift(s):r.push(s),s}}const hc=n=>(e,i=dr)=>(!Qv||n==="sp")&&hw(n,(...t)=>e(...t),i),r8=hc("bm"),jn=hc("m"),s8=hc("bu"),uw=hc("u"),dw=hc("bum"),Jo=hc("um"),o8=hc("sp"),a8=hc("rtg"),l8=hc("rtc");function c8(n,e=dr){hw("ec",n,e)}function yh(n,e,i,t){let r;const s=i&&i[t];if(At(n)||Mn(n)){r=new Array(n.length);for(let o=0,l=n.length;o<l;o++)r[o]=e(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(an(n))if(n[Symbol.iterator])r=Array.from(n,(o,l)=>e(o,l,void 0,s&&s[l]));else{const o=Object.keys(n);r=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];r[l]=e(n[u],u,l,s&&s[l])}}else r=[];return i&&(i[t]=r),r}function Nle(n,e){for(let i=0;i<e.length;i++){const t=e[i];if(At(t))for(let r=0;r<t.length;r++)n[t[r].name]=t[r].fn;else t&&(n[t.name]=t.key?(...r)=>{const s=t.fn(...r);return s&&(s.key=t.key),s}:t.fn)}return n}function h8(n,e,i={},t,r){if(tr.isCE||tr.parent&&Qu(tr.parent)&&tr.parent.isCE)return e!=="default"&&(i.name=e),Re("slot",i,t&&t());let s=n[e];s&&s._c&&(s._d=!1),ai();const o=s&&u8(s(i)),l=Ur(hn,{key:i.key||o&&o.key||`_${e}`},o||(t?t():[]),o&&n._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function u8(n){return n.some(e=>bh(e)?!(e.type===Vr||e.type===hn&&!u8(e.children)):!0)?n:null}function $le(n,e){const i={};for(const t in n)i[e&&/[A-Z]/.test(t)?`on:${t}`:y0(t)]=n[t];return i}const wk=n=>n?N8(n)?fw(n)||n.proxy:wk(n.parent):null,b0=_n(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>wk(n.parent),$root:n=>wk(n.root),$emit:n=>n.emit,$options:n=>SE(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,ow(n.update)}),$nextTick:n=>n.n||(n.n=Bp.bind(n.proxy)),$watch:n=>Mle.bind(n)}),GS=(n,e)=>n!==Ji&&!n.__isScriptSetup&&$i(n,e),_k={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:t,data:r,props:s,accessCache:o,type:l,appContext:c}=n;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return t[e];case 2:return r[e];case 4:return i[e];case 3:return s[e]}else{if(GS(t,e))return o[e]=1,t[e];if(r!==Ji&&$i(r,e))return o[e]=2,r[e];if((u=n.propsOptions[0])&&$i(u,e))return o[e]=3,s[e];if(i!==Ji&&$i(i,e))return o[e]=4,i[e];Sk&&(o[e]=0)}}const d=b0[e];let f,m;if(d)return e==="$attrs"&&Zs(n.attrs,"get",""),d(n);if((f=l.__cssModules)&&(f=f[e]))return f;if(i!==Ji&&$i(i,e))return o[e]=4,i[e];if(m=c.config.globalProperties,$i(m,e))return m[e]},set({_:n},e,i){const{data:t,setupState:r,ctx:s}=n;return GS(r,e)?(r[e]=i,!0):t!==Ji&&$i(t,e)?(t[e]=i,!0):$i(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=i,!0)},has({_:{data:n,setupState:e,accessCache:i,ctx:t,appContext:r,propsOptions:s}},o){let l;return!!i[o]||n!==Ji&&$i(n,o)||GS(e,o)||(l=s[0])&&$i(l,o)||$i(t,o)||$i(b0,o)||$i(r.config.globalProperties,o)},defineProperty(n,e,i){return i.get!=null?n._.accessCache[e]=0:$i(i,"value")&&this.set(n,e,i.value,null),Reflect.defineProperty(n,e,i)}},Vle=_n({},_k,{get(n,e){if(e!==Symbol.unscopables)return _k.get(n,e,n)},has(n,e){return e[0]!=="_"&&!vae(e)}});function Lle(){return null}function Ble(){return null}function Ule(n){}function Fle(n){}function zle(){return null}function Xle(){}function Wle(n,e){return null}function _E(){return f8().slots}function d8(){return f8().attrs}function f8(){const n=Mo();return n.setupContext||(n.setupContext=L8(n))}function Q0(n){return At(n)?n.reduce((e,i)=>(e[i]=null,e),{}):n}function Qle(n,e){const i=Q0(n);for(const t in e){if(t.startsWith("__skip"))continue;let r=i[t];r?At(r)||Jt(r)?r=i[t]={type:r,default:e[t]}:r.default=e[t]:r===null&&(r=i[t]={default:e[t]}),r&&e[`__skip_${t}`]&&(r.skipFactory=!0)}return i}function Hle(n,e){return!n||!e?n||e:At(n)&&At(e)?n.concat(e):_n({},Q0(n),Q0(e))}function Gle(n,e){const i={};for(const t in n)e.includes(t)||Object.defineProperty(i,t,{enumerable:!0,get:()=>n[t]});return i}function px(n){const e=Mo();let i=n();return Pk(),rE(i)&&(i=i.catch(t=>{throw sd(e),t})),[i,()=>sd(e)]}let Sk=!0;function Yle(n){const e=SE(n),i=n.proxy,t=n.ctx;Sk=!1,e.beforeCreate&&aI(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:m,beforeUpdate:g,updated:y,activated:x,deactivated:b,beforeDestroy:S,beforeUnmount:_,destroyed:O,unmounted:k,render:M,renderTracked:E,renderTriggered:R,errorCaptured:P,serverPrefetch:I,expose:T,inheritAttrs:N,components:L,directives:D,filters:$}=e;if(u&&jle(u,t,null),o)for(const Q in o){const Z=o[Q];Jt(Z)&&(t[Q]=Z.bind(i))}if(r){const Q=r.call(i,i);an(Q)&&(n.data=vd(Q))}if(Sk=!0,s)for(const Q in s){const Z=s[Q],te=Jt(Z)?Z.bind(i,i):Jt(Z.get)?Z.get.bind(i,i):Qs,ce=!Jt(Z)&&Jt(Z.set)?Z.set.bind(i):Qs,pe=gn({get:te,set:ce});Object.defineProperty(t,Q,{enumerable:!0,configurable:!0,get:()=>pe.value,set:Ee=>pe.value=Ee})}if(l)for(const Q in l)p8(l[Q],t,i,Q);if(c){const Q=Jt(c)?c.call(i):c;Reflect.ownKeys(Q).forEach(Z=>{H0(Z,Q[Z])})}d&&aI(d,n,"c");function U(Q,Z){At(Z)?Z.forEach(te=>Q(te.bind(i))):Z&&Q(Z.bind(i))}if(U(r8,f),U(jn,m),U(s8,g),U(uw,y),U(t8,x),U(i8,b),U(c8,P),U(l8,E),U(a8,R),U(dw,_),U(Jo,k),U(o8,I),At(T))if(T.length){const Q=n.exposed||(n.exposed={});T.forEach(Z=>{Object.defineProperty(Q,Z,{get:()=>i[Z],set:te=>i[Z]=te})})}else n.exposed||(n.exposed={});M&&n.render===Qs&&(n.render=M),N!=null&&(n.inheritAttrs=N),L&&(n.components=L),D&&(n.directives=D)}function jle(n,e,i=Qs){At(n)&&(n=Ck(n));for(const t in n){const r=n[t];let s;an(r)?"default"in r?s=Qf(r.from||t,r.default,!0):s=Qf(r.from||t):s=Qf(r),or(s)?Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[t]=s}}function aI(n,e,i){Co(At(n)?n.map(t=>t.bind(e.proxy)):n.bind(e.proxy),e,i)}function p8(n,e,i,t){const r=t.includes(".")?KB(i,t):()=>i[t];if(Mn(n)){const s=e[n];Jt(s)&&Fi(r,s)}else if(Jt(n))Fi(r,n.bind(i));else if(an(n))if(At(n))n.forEach(s=>p8(s,e,i,t));else{const s=Jt(n.handler)?n.handler.bind(i):e[n.handler];Jt(s)&&Fi(r,s,n)}}function SE(n){const e=n.type,{mixins:i,extends:t}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,l=s.get(e);let c;return l?c=l:!r.length&&!i&&!t?c=e:(c={},r.length&&r.forEach(u=>qx(c,u,o,!0)),qx(c,e,o)),an(e)&&s.set(e,c),c}function qx(n,e,i,t=!1){const{mixins:r,extends:s}=e;s&&qx(n,s,i,!0),r&&r.forEach(o=>qx(n,o,i,!0));for(const o in e)if(!(t&&o==="expose")){const l=qle[o]||i&&i[o];n[o]=l?l(n[o],e[o]):e[o]}return n}const qle={data:lI,props:cI,emits:cI,methods:s0,computed:s0,beforeCreate:ms,created:ms,beforeMount:ms,mounted:ms,beforeUpdate:ms,updated:ms,beforeDestroy:ms,beforeUnmount:ms,destroyed:ms,unmounted:ms,activated:ms,deactivated:ms,errorCaptured:ms,serverPrefetch:ms,components:s0,directives:s0,watch:Kle,provide:lI,inject:Zle};function lI(n,e){return e?n?function(){return _n(Jt(n)?n.call(this,this):n,Jt(e)?e.call(this,this):e)}:e:n}function Zle(n,e){return s0(Ck(n),Ck(e))}function Ck(n){if(At(n)){const e={};for(let i=0;i<n.length;i++)e[n[i]]=n[i];return e}return n}function ms(n,e){return n?[...new Set([].concat(n,e))]:e}function s0(n,e){return n?_n(Object.create(null),n,e):e}function cI(n,e){return n?At(n)&&At(e)?[...new Set([...n,...e])]:_n(Object.create(null),Q0(n),Q0(e??{})):e}function Kle(n,e){if(!n)return e;if(!e)return n;const i=_n(Object.create(null),n);for(const t in e)i[t]=ms(n[t],e[t]);return i}function m8(){return{app:null,config:{isNativeTag:hae,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jle=0;function ece(n,e){return function(t,r=null){Jt(t)||(t=_n({},t)),r!=null&&!an(r)&&(r=null);const s=m8(),o=new WeakSet;let l=!1;const c=s.app={_uid:Jle++,_component:t,_props:r,_container:null,_context:s,_instance:null,version:F8,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&Jt(u.install)?(o.add(u),u.install(c,...d)):Jt(u)&&(o.add(u),u(c,...d))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,d){return d?(s.components[u]=d,c):s.components[u]},directive(u,d){return d?(s.directives[u]=d,c):s.directives[u]},mount(u,d,f){if(!l){const m=Re(t,r);return m.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(m,u):n(m,u,f),l=!0,c._container=u,u.__vue_app__=c,fw(m.component)||m.component.proxy}},unmount(){l&&(n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return s.provides[u]=d,c},runWithContext(u){const d=Wf;Wf=c;try{return u()}finally{Wf=d}}};return c}}let Wf=null;function H0(n,e){if(dr){let i=dr.provides;const t=dr.parent&&dr.parent.provides;t===i&&(i=dr.provides=Object.create(t)),i[n]=e}}function Qf(n,e,i=!1){const t=dr||tr;if(t||Wf){const r=t?t.parent==null?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides:Wf._context.provides;if(r&&n in r)return r[n];if(arguments.length>1)return i&&Jt(e)?e.call(t&&t.proxy):e}}function tce(){return!!(dr||tr||Wf)}const g8={},v8=()=>Object.create(g8),y8=n=>Object.getPrototypeOf(n)===g8;function ice(n,e,i,t=!1){const r={},s=v8();n.propsDefaults=Object.create(null),b8(n,e,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);i?n.props=t?r:RB(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function nce(n,e,i,t){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,l=Ni(r),[c]=n.propsOptions;let u=!1;if((t||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(aw(n.emitsOptions,m))continue;const g=e[m];if(c)if($i(s,m))g!==s[m]&&(s[m]=g,u=!0);else{const y=Os(m);r[y]=kk(c,l,y,g,n,!1)}else g!==s[m]&&(s[m]=g,u=!0)}}}else{b8(n,e,r,s)&&(u=!0);let d;for(const f in l)(!e||!$i(e,f)&&((d=xo(f))===f||!$i(e,d)))&&(c?i&&(i[f]!==void 0||i[d]!==void 0)&&(r[f]=kk(c,l,f,void 0,n,!0)):delete r[f]);if(s!==l)for(const f in s)(!e||!$i(e,f))&&(delete s[f],u=!0)}u&&Ql(n.attrs,"set","")}function b8(n,e,i,t){const[r,s]=n.propsOptions;let o=!1,l;if(e)for(let c in e){if(Lf(c))continue;const u=e[c];let d;r&&$i(r,d=Os(c))?!s||!s.includes(d)?i[d]=u:(l||(l={}))[d]=u:aw(n.emitsOptions,c)||(!(c in t)||u!==t[c])&&(t[c]=u,o=!0)}if(s){const c=Ni(i),u=l||Ji;for(let d=0;d<s.length;d++){const f=s[d];i[f]=kk(r,c,f,u[f],n,!$i(u,f))}}return o}function kk(n,e,i,t,r,s){const o=n[i];if(o!=null){const l=$i(o,"default");if(l&&t===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Jt(c)){const{propsDefaults:u}=r;if(i in u)t=u[i];else{const d=sd(r);t=u[i]=c.call(null,e),d()}}else t=c}o[0]&&(s&&!l?t=!1:o[1]&&(t===""||t===xo(i))&&(t=!0))}return t}function x8(n,e,i=!1){const t=e.propsCache,r=t.get(n);if(r)return r;const s=n.props,o={},l=[];let c=!1;if(!Jt(n)){const d=f=>{c=!0;const[m,g]=x8(f,e,!0);_n(o,m),g&&l.push(...g)};!i&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!s&&!c)return an(n)&&t.set(n,$f),$f;if(At(s))for(let d=0;d<s.length;d++){const f=Os(s[d]);hI(f)&&(o[f]=Ji)}else if(s)for(const d in s){const f=Os(d);if(hI(f)){const m=s[d],g=o[f]=At(m)||Jt(m)?{type:m}:_n({},m);if(g){const y=fI(Boolean,g.type),x=fI(String,g.type);g[0]=y>-1,g[1]=x<0||y<x,(y>-1||$i(g,"default"))&&l.push(f)}}}const u=[o,l];return an(n)&&t.set(n,u),u}function hI(n){return n[0]!=="$"&&!Lf(n)}function uI(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function dI(n,e){return uI(n)===uI(e)}function fI(n,e){return At(e)?e.findIndex(i=>dI(i,n)):Jt(e)&&dI(e,n)?0:-1}const O8=n=>n[0]==="_"||n==="$stable",CE=n=>At(n)?n.map(bo):[bo(n)],rce=(n,e,i)=>{if(e._n)return e;const t=Je((...r)=>CE(e(...r)),i);return t._c=!1,t},w8=(n,e,i)=>{const t=n._ctx;for(const r in n){if(O8(r))continue;const s=n[r];if(Jt(s))e[r]=rce(r,s,t);else if(s!=null){const o=CE(s);e[r]=()=>o}}},_8=(n,e)=>{const i=CE(e);n.slots.default=()=>i},sce=(n,e)=>{const i=n.slots=v8();if(n.vnode.shapeFlag&32){const t=e._;t?(_n(i,e),pB(i,"_",t,!0)):w8(e,i)}else e&&_8(n,e)},oce=(n,e,i)=>{const{vnode:t,slots:r}=n;let s=!0,o=Ji;if(t.shapeFlag&32){const l=e._;l?i&&l===1?s=!1:(_n(r,e),!i&&l===1&&delete r._):(s=!e.$stable,w8(e,r)),o=e}else e&&(_8(n,e),o={default:1});if(s)for(const l in r)!O8(l)&&o[l]==null&&delete r[l]};function Zx(n,e,i,t,r=!1){if(At(n)){n.forEach((m,g)=>Zx(m,e&&(At(e)?e[g]:e),i,t,r));return}if(Qu(t)&&!r)return;const s=t.shapeFlag&4?fw(t.component)||t.component.proxy:t.el,o=r?null:s,{i:l,r:c}=n,u=e&&e.r,d=l.refs===Ji?l.refs={}:l.refs,f=l.setupState;if(u!=null&&u!==c&&(Mn(u)?(d[u]=null,$i(f,u)&&(f[u]=null)):or(u)&&(u.value=null)),Jt(c))Hl(c,l,12,[o,d]);else{const m=Mn(c),g=or(c);if(m||g){const y=()=>{if(n.f){const x=m?$i(f,c)?f[c]:d[c]:c.value;r?At(x)&&nE(x,s):At(x)?x.includes(s)||x.push(s):m?(d[c]=[s],$i(f,c)&&(f[c]=d[c])):(c.value=[s],n.k&&(d[n.k]=c.value))}else m?(d[c]=o,$i(f,c)&&(f[c]=o)):g&&(c.value=o,n.k&&(d[n.k]=o))};o?(y.id=-1,Rr(y,i)):y()}}}let Dc=!1;const ace=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",lce=n=>n.namespaceURI.includes("MathML"),w1=n=>{if(ace(n))return"svg";if(lce(n))return"mathml"},_1=n=>n.nodeType===8;function cce(n){const{mt:e,p:i,o:{patchProp:t,createText:r,nextSibling:s,parentNode:o,remove:l,insert:c,createComment:u}}=n,d=(O,k)=>{if(!k.hasChildNodes()){i(null,O,k),jx(),k._vnode=O;return}Dc=!1,f(k.firstChild,O,null,null,null),jx(),k._vnode=O,Dc&&console.error("Hydration completed but contains mismatches.")},f=(O,k,M,E,R,P=!1)=>{P=P||!!k.dynamicChildren;const I=_1(O)&&O.data==="[",T=()=>x(O,k,M,E,R,I),{type:N,ref:L,shapeFlag:D,patchFlag:$}=k;let B=O.nodeType;k.el=O,$===-2&&(P=!1,k.dynamicChildren=null);let U=null;switch(N){case nd:B!==3?k.children===""?(c(k.el=r(""),o(O),O),U=O):U=T():(O.data!==k.children&&(Dc=!0,O.data=k.children),U=s(O));break;case Vr:_(O)?(U=s(O),S(k.el=O.content.firstChild,O,M)):B!==8||I?U=T():U=s(O);break;case Hu:if(I&&(O=s(O),B=O.nodeType),B===1||B===3){U=O;const Q=!k.children.length;for(let Z=0;Z<k.staticCount;Z++)Q&&(k.children+=U.nodeType===1?U.outerHTML:U.data),Z===k.staticCount-1&&(k.anchor=U),U=s(U);return I?s(U):U}else T();break;case hn:I?U=y(O,k,M,E,R,P):U=T();break;default:if(D&1)(B!==1||k.type.toLowerCase()!==O.tagName.toLowerCase())&&!_(O)?U=T():U=m(O,k,M,E,R,P);else if(D&6){k.slotScopeIds=R;const Q=o(O);if(I?U=b(O):_1(O)&&O.data==="teleport start"?U=b(O,O.data,"teleport end"):U=s(O),e(k,Q,null,M,E,w1(Q),P),Qu(k)){let Z;I?(Z=Re(hn),Z.anchor=U?U.previousSibling:Q.lastChild):Z=O.nodeType===3?mn(""):Re("div"),Z.el=O,k.component.subTree=Z}}else D&64?B!==8?U=T():U=k.type.hydrate(O,k,M,E,R,P,n,g):D&128&&(U=k.type.hydrate(O,k,M,E,w1(o(O)),R,P,n,f))}return L!=null&&Zx(L,null,E,k),U},m=(O,k,M,E,R,P)=>{P=P||!!k.dynamicChildren;const{type:I,props:T,patchFlag:N,shapeFlag:L,dirs:D,transition:$}=k,B=I==="input"||I==="option";if(B||N!==-1){D&&Ya(k,null,M,"created");let U=!1;if(_(O)){U=k8(E,$)&&M&&M.vnode.props&&M.vnode.props.appear;const Z=O.content.firstChild;U&&$.beforeEnter(Z),S(Z,O,M),k.el=O=Z}if(L&16&&!(T&&(T.innerHTML||T.textContent))){let Z=g(O.firstChild,k,O,M,E,R,P);for(;Z;){Dc=!0;const te=Z;Z=Z.nextSibling,l(te)}}else L&8&&O.textContent!==k.children&&(Dc=!0,O.textContent=k.children);if(T)if(B||!P||N&48)for(const Z in T)(B&&(Z.endsWith("value")||Z==="indeterminate")||Uv(Z)&&!Lf(Z)||Z[0]===".")&&t(O,Z,null,T[Z],void 0,void 0,M);else T.onClick&&t(O,"onClick",null,T.onClick,void 0,void 0,M);let Q;(Q=T&&T.onVnodeBeforeMount)&&Bs(Q,M,k),D&&Ya(k,null,M,"beforeMount"),((Q=T&&T.onVnodeMounted)||D||U)&&GB(()=>{Q&&Bs(Q,M,k),U&&$.enter(O),D&&Ya(k,null,M,"mounted")},E)}return O.nextSibling},g=(O,k,M,E,R,P,I)=>{I=I||!!k.dynamicChildren;const T=k.children,N=T.length;for(let L=0;L<N;L++){const D=I?T[L]:T[L]=bo(T[L]);if(O)O=f(O,D,E,R,P,I);else{if(D.type===nd&&!D.children)continue;Dc=!0,i(null,D,M,null,E,R,w1(M),P)}}return O},y=(O,k,M,E,R,P)=>{const{slotScopeIds:I}=k;I&&(R=R?R.concat(I):I);const T=o(O),N=g(s(O),k,T,M,E,R,P);return N&&_1(N)&&N.data==="]"?s(k.anchor=N):(Dc=!0,c(k.anchor=u("]"),T,N),N)},x=(O,k,M,E,R,P)=>{if(Dc=!0,k.el=null,P){const N=b(O);for(;;){const L=s(O);if(L&&L!==N)l(L);else break}}const I=s(O),T=o(O);return l(O),i(null,k,T,I,M,E,w1(T),R),I},b=(O,k="[",M="]")=>{let E=0;for(;O;)if(O=s(O),O&&_1(O)&&(O.data===k&&E++,O.data===M)){if(E===0)return s(O);E--}return O},S=(O,k,M)=>{const E=k.parentNode;E&&E.replaceChild(O,k);let R=M;for(;R;)R.vnode.el===k&&(R.vnode.el=R.subTree.el=O),R=R.parent},_=O=>O.nodeType===1&&O.tagName.toLowerCase()==="template";return[d,f]}const Rr=GB;function kE(n){return C8(n)}function S8(n){return C8(n,cce)}function C8(n,e){const i=mB();i.__VUE__=!0;const{insert:t,remove:r,patchProp:s,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:m,setScopeId:g=Qs,insertStaticContent:y}=n,x=(W,q,ae,fe=null,ye=null,Me=null,J=void 0,G=null,ue=!!q.dynamicChildren)=>{if(W===q)return;W&&!ba(W,q)&&(fe=K(W),Ee(W,ye,Me,!0),W=null),q.patchFlag===-2&&(ue=!1,q.dynamicChildren=null);const{type:de,ref:Oe,shapeFlag:Te}=q;switch(de){case nd:b(W,q,ae,fe);break;case Vr:S(W,q,ae,fe);break;case Hu:W==null&&_(q,ae,fe,J);break;case hn:L(W,q,ae,fe,ye,Me,J,G,ue);break;default:Te&1?M(W,q,ae,fe,ye,Me,J,G,ue):Te&6?D(W,q,ae,fe,ye,Me,J,G,ue):(Te&64||Te&128)&&de.process(W,q,ae,fe,ye,Me,J,G,ue,z)}Oe!=null&&ye&&Zx(Oe,W&&W.ref,Me,q||W,!q)},b=(W,q,ae,fe)=>{if(W==null)t(q.el=l(q.children),ae,fe);else{const ye=q.el=W.el;q.children!==W.children&&u(ye,q.children)}},S=(W,q,ae,fe)=>{W==null?t(q.el=c(q.children||""),ae,fe):q.el=W.el},_=(W,q,ae,fe)=>{[W.el,W.anchor]=y(W.children,q,ae,fe,W.el,W.anchor)},O=({el:W,anchor:q},ae,fe)=>{let ye;for(;W&&W!==q;)ye=m(W),t(W,ae,fe),W=ye;t(q,ae,fe)},k=({el:W,anchor:q})=>{let ae;for(;W&&W!==q;)ae=m(W),r(W),W=ae;r(q)},M=(W,q,ae,fe,ye,Me,J,G,ue)=>{q.type==="svg"?J="svg":q.type==="math"&&(J="mathml"),W==null?E(q,ae,fe,ye,Me,J,G,ue):I(W,q,ye,Me,J,G,ue)},E=(W,q,ae,fe,ye,Me,J,G)=>{let ue,de;const{props:Oe,shapeFlag:Te,transition:We,dirs:Ve}=W;if(ue=W.el=o(W.type,Me,Oe&&Oe.is,Oe),Te&8?d(ue,W.children):Te&16&&P(W.children,ue,null,fe,ye,YS(W,Me),J,G),Ve&&Ya(W,null,fe,"created"),R(ue,W,W.scopeId,J,fe),Oe){for(const rt in Oe)rt!=="value"&&!Lf(rt)&&s(ue,rt,null,Oe[rt],Me,W.children,fe,ye,Ce);"value"in Oe&&s(ue,"value",null,Oe.value,Me),(de=Oe.onVnodeBeforeMount)&&Bs(de,fe,W)}Ve&&Ya(W,null,fe,"beforeMount");const Fe=k8(ye,We);Fe&&We.beforeEnter(ue),t(ue,q,ae),((de=Oe&&Oe.onVnodeMounted)||Fe||Ve)&&Rr(()=>{de&&Bs(de,fe,W),Fe&&We.enter(ue),Ve&&Ya(W,null,fe,"mounted")},ye)},R=(W,q,ae,fe,ye)=>{if(ae&&g(W,ae),fe)for(let Me=0;Me<fe.length;Me++)g(W,fe[Me]);if(ye){let Me=ye.subTree;if(q===Me){const J=ye.vnode;R(W,J,J.scopeId,J.slotScopeIds,ye.parent)}}},P=(W,q,ae,fe,ye,Me,J,G,ue=0)=>{for(let de=ue;de<W.length;de++){const Oe=W[de]=G?Kc(W[de]):bo(W[de]);x(null,Oe,q,ae,fe,ye,Me,J,G)}},I=(W,q,ae,fe,ye,Me,J)=>{const G=q.el=W.el;let{patchFlag:ue,dynamicChildren:de,dirs:Oe}=q;ue|=W.patchFlag&16;const Te=W.props||Ji,We=q.props||Ji;let Ve;if(ae&&nu(ae,!1),(Ve=We.onVnodeBeforeUpdate)&&Bs(Ve,ae,q,W),Oe&&Ya(q,W,ae,"beforeUpdate"),ae&&nu(ae,!0),de?T(W.dynamicChildren,de,G,ae,fe,YS(q,ye),Me):J||Z(W,q,G,null,ae,fe,YS(q,ye),Me,!1),ue>0){if(ue&16)N(G,q,Te,We,ae,fe,ye);else if(ue&2&&Te.class!==We.class&&s(G,"class",null,We.class,ye),ue&4&&s(G,"style",Te.style,We.style,ye),ue&8){const Fe=q.dynamicProps;for(let rt=0;rt<Fe.length;rt++){const Ge=Fe[rt],nt=Te[Ge],kt=We[Ge];(kt!==nt||Ge==="value")&&s(G,Ge,nt,kt,ye,W.children,ae,fe,Ce)}}ue&1&&W.children!==q.children&&d(G,q.children)}else!J&&de==null&&N(G,q,Te,We,ae,fe,ye);((Ve=We.onVnodeUpdated)||Oe)&&Rr(()=>{Ve&&Bs(Ve,ae,q,W),Oe&&Ya(q,W,ae,"updated")},fe)},T=(W,q,ae,fe,ye,Me,J)=>{for(let G=0;G<q.length;G++){const ue=W[G],de=q[G],Oe=ue.el&&(ue.type===hn||!ba(ue,de)||ue.shapeFlag&70)?f(ue.el):ae;x(ue,de,Oe,null,fe,ye,Me,J,!0)}},N=(W,q,ae,fe,ye,Me,J)=>{if(ae!==fe){if(ae!==Ji)for(const G in ae)!Lf(G)&&!(G in fe)&&s(W,G,ae[G],null,J,q.children,ye,Me,Ce);for(const G in fe){if(Lf(G))continue;const ue=fe[G],de=ae[G];ue!==de&&G!=="value"&&s(W,G,de,ue,J,q.children,ye,Me,Ce)}"value"in fe&&s(W,"value",ae.value,fe.value,J)}},L=(W,q,ae,fe,ye,Me,J,G,ue)=>{const de=q.el=W?W.el:l(""),Oe=q.anchor=W?W.anchor:l("");let{patchFlag:Te,dynamicChildren:We,slotScopeIds:Ve}=q;Ve&&(G=G?G.concat(Ve):Ve),W==null?(t(de,ae,fe),t(Oe,ae,fe),P(q.children||[],ae,Oe,ye,Me,J,G,ue)):Te>0&&Te&64&&We&&W.dynamicChildren?(T(W.dynamicChildren,We,ae,ye,Me,J,G),(q.key!=null||ye&&q===ye.subTree)&&TE(W,q,!0)):Z(W,q,ae,Oe,ye,Me,J,G,ue)},D=(W,q,ae,fe,ye,Me,J,G,ue)=>{q.slotScopeIds=G,W==null?q.shapeFlag&512?ye.ctx.activate(q,ae,fe,J,ue):$(q,ae,fe,ye,Me,J,ue):B(W,q,ue)},$=(W,q,ae,fe,ye,Me,J)=>{const G=W.component=D8(W,fe,ye);if(Wv(W)&&(G.ctx.renderer=z),$8(G),G.asyncDep){if(ye&&ye.registerDep(G,U),!W.el){const ue=G.subTree=Re(Vr);S(null,ue,q,ae)}}else U(G,W,q,ae,ye,Me,J)},B=(W,q,ae)=>{const fe=q.component=W.component;if(ble(W,q,ae))if(fe.asyncDep&&!fe.asyncResolved){Q(fe,q,ae);return}else fe.next=q,dle(fe.update),fe.effect.dirty=!0,fe.update();else q.el=W.el,fe.vnode=q},U=(W,q,ae,fe,ye,Me,J)=>{const G=()=>{if(W.isMounted){let{next:Oe,bu:Te,u:We,parent:Ve,vnode:Fe}=W;{const Tt=T8(W);if(Tt){Oe&&(Oe.el=Fe.el,Q(W,Oe,J)),Tt.asyncDep.then(()=>{W.isUnmounted||G()});return}}let rt=Oe,Ge;nu(W,!1),Oe?(Oe.el=Fe.el,Q(W,Oe,J)):Oe=Fe,Te&&Bf(Te),(Ge=Oe.props&&Oe.props.onVnodeBeforeUpdate)&&Bs(Ge,Ve,Oe,Fe),nu(W,!0);const nt=fx(W),kt=W.subTree;W.subTree=nt,x(kt,nt,f(kt.el),K(kt),W,ye,Me),Oe.el=nt.el,rt===null&&vE(W,nt.el),We&&Rr(We,ye),(Ge=Oe.props&&Oe.props.onVnodeUpdated)&&Rr(()=>Bs(Ge,Ve,Oe,Fe),ye)}else{let Oe;const{el:Te,props:We}=q,{bm:Ve,m:Fe,parent:rt}=W,Ge=Qu(q);if(nu(W,!1),Ve&&Bf(Ve),!Ge&&(Oe=We&&We.onVnodeBeforeMount)&&Bs(Oe,rt,q),nu(W,!0),Te&&re){const nt=()=>{W.subTree=fx(W),re(Te,W.subTree,W,ye,null)};Ge?q.type.__asyncLoader().then(()=>!W.isUnmounted&&nt()):nt()}else{const nt=W.subTree=fx(W);x(null,nt,ae,fe,W,ye,Me),q.el=nt.el}if(Fe&&Rr(Fe,ye),!Ge&&(Oe=We&&We.onVnodeMounted)){const nt=q;Rr(()=>Bs(Oe,rt,nt),ye)}(q.shapeFlag&256||rt&&Qu(rt.vnode)&&rt.vnode.shapeFlag&256)&&W.a&&Rr(W.a,ye),W.isMounted=!0,q=ae=fe=null}},ue=W.effect=new ap(G,Qs,()=>ow(de),W.scope),de=W.update=()=>{ue.dirty&&ue.run()};de.id=W.uid,nu(W,!0),de()},Q=(W,q,ae)=>{q.component=W;const fe=W.vnode.props;W.vnode=q,W.next=null,nce(W,q.props,fe,ae),oce(W,q.children,ae),Rh(),iI(W),Ih()},Z=(W,q,ae,fe,ye,Me,J,G,ue=!1)=>{const de=W&&W.children,Oe=W?W.shapeFlag:0,Te=q.children,{patchFlag:We,shapeFlag:Ve}=q;if(We>0){if(We&128){ce(de,Te,ae,fe,ye,Me,J,G,ue);return}else if(We&256){te(de,Te,ae,fe,ye,Me,J,G,ue);return}}Ve&8?(Oe&16&&Ce(de,ye,Me),Te!==de&&d(ae,Te)):Oe&16?Ve&16?ce(de,Te,ae,fe,ye,Me,J,G,ue):Ce(de,ye,Me,!0):(Oe&8&&d(ae,""),Ve&16&&P(Te,ae,fe,ye,Me,J,G,ue))},te=(W,q,ae,fe,ye,Me,J,G,ue)=>{W=W||$f,q=q||$f;const de=W.length,Oe=q.length,Te=Math.min(de,Oe);let We;for(We=0;We<Te;We++){const Ve=q[We]=ue?Kc(q[We]):bo(q[We]);x(W[We],Ve,ae,null,ye,Me,J,G,ue)}de>Oe?Ce(W,ye,Me,!0,!1,Te):P(q,ae,fe,ye,Me,J,G,ue,Te)},ce=(W,q,ae,fe,ye,Me,J,G,ue)=>{let de=0;const Oe=q.length;let Te=W.length-1,We=Oe-1;for(;de<=Te&&de<=We;){const Ve=W[de],Fe=q[de]=ue?Kc(q[de]):bo(q[de]);if(ba(Ve,Fe))x(Ve,Fe,ae,null,ye,Me,J,G,ue);else break;de++}for(;de<=Te&&de<=We;){const Ve=W[Te],Fe=q[We]=ue?Kc(q[We]):bo(q[We]);if(ba(Ve,Fe))x(Ve,Fe,ae,null,ye,Me,J,G,ue);else break;Te--,We--}if(de>Te){if(de<=We){const Ve=We+1,Fe=Ve<Oe?q[Ve].el:fe;for(;de<=We;)x(null,q[de]=ue?Kc(q[de]):bo(q[de]),ae,Fe,ye,Me,J,G,ue),de++}}else if(de>We)for(;de<=Te;)Ee(W[de],ye,Me,!0),de++;else{const Ve=de,Fe=de,rt=new Map;for(de=Fe;de<=We;de++){const Se=q[de]=ue?Kc(q[de]):bo(q[de]);Se.key!=null&&rt.set(Se.key,de)}let Ge,nt=0;const kt=We-Fe+1;let Tt=!1,ut=0;const zt=new Array(kt);for(de=0;de<kt;de++)zt[de]=0;for(de=Ve;de<=Te;de++){const Se=W[de];if(nt>=kt){Ee(Se,ye,Me,!0);continue}let Le;if(Se.key!=null)Le=rt.get(Se.key);else for(Ge=Fe;Ge<=We;Ge++)if(zt[Ge-Fe]===0&&ba(Se,q[Ge])){Le=Ge;break}Le===void 0?Ee(Se,ye,Me,!0):(zt[Le-Fe]=de+1,Le>=ut?ut=Le:Tt=!0,x(Se,q[Le],ae,null,ye,Me,J,G,ue),nt++)}const li=Tt?hce(zt):$f;for(Ge=li.length-1,de=kt-1;de>=0;de--){const Se=Fe+de,Le=q[Se],me=Se+1<Oe?q[Se+1].el:fe;zt[de]===0?x(null,Le,ae,me,ye,Me,J,G,ue):Tt&&(Ge<0||de!==li[Ge]?pe(Le,ae,me,2):Ge--)}}},pe=(W,q,ae,fe,ye=null)=>{const{el:Me,type:J,transition:G,children:ue,shapeFlag:de}=W;if(de&6){pe(W.component.subTree,q,ae,fe);return}if(de&128){W.suspense.move(q,ae,fe);return}if(de&64){J.move(W,q,ae,z);return}if(J===hn){t(Me,q,ae);for(let Te=0;Te<ue.length;Te++)pe(ue[Te],q,ae,fe);t(W.anchor,q,ae);return}if(J===Hu){O(W,q,ae);return}if(fe!==2&&de&1&&G)if(fe===0)G.beforeEnter(Me),t(Me,q,ae),Rr(()=>G.enter(Me),ye);else{const{leave:Te,delayLeave:We,afterLeave:Ve}=G,Fe=()=>t(Me,q,ae),rt=()=>{Te(Me,()=>{Fe(),Ve&&Ve()})};We?We(Me,Fe,rt):rt()}else t(Me,q,ae)},Ee=(W,q,ae,fe=!1,ye=!1)=>{const{type:Me,props:J,ref:G,children:ue,dynamicChildren:de,shapeFlag:Oe,patchFlag:Te,dirs:We}=W;if(G!=null&&Zx(G,null,ae,W,!0),Oe&256){q.ctx.deactivate(W);return}const Ve=Oe&1&&We,Fe=!Qu(W);let rt;if(Fe&&(rt=J&&J.onVnodeBeforeUnmount)&&Bs(rt,q,W),Oe&6)_e(W.component,ae,fe);else{if(Oe&128){W.suspense.unmount(ae,fe);return}Ve&&Ya(W,null,q,"beforeUnmount"),Oe&64?W.type.remove(W,q,ae,ye,z,fe):de&&(Me!==hn||Te>0&&Te&64)?Ce(de,q,ae,!1,!0):(Me===hn&&Te&384||!ye&&Oe&16)&&Ce(ue,q,ae),fe&&we(W)}(Fe&&(rt=J&&J.onVnodeUnmounted)||Ve)&&Rr(()=>{rt&&Bs(rt,q,W),Ve&&Ya(W,null,q,"unmounted")},ae)},we=W=>{const{type:q,el:ae,anchor:fe,transition:ye}=W;if(q===hn){he(ae,fe);return}if(q===Hu){k(W);return}const Me=()=>{r(ae),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(W.shapeFlag&1&&ye&&!ye.persisted){const{leave:J,delayLeave:G}=ye,ue=()=>J(ae,Me);G?G(W.el,Me,ue):ue()}else Me()},he=(W,q)=>{let ae;for(;W!==q;)ae=m(W),r(W),W=ae;r(q)},_e=(W,q,ae)=>{const{bum:fe,scope:ye,update:Me,subTree:J,um:G}=W;fe&&Bf(fe),ye.stop(),Me&&(Me.active=!1,Ee(J,W,q,ae)),G&&Rr(G,q),Rr(()=>{W.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},Ce=(W,q,ae,fe=!1,ye=!1,Me=0)=>{for(let J=Me;J<W.length;J++)Ee(W[J],q,ae,fe,ye)},K=W=>W.shapeFlag&6?K(W.component.subTree):W.shapeFlag&128?W.suspense.next():m(W.anchor||W.el);let j=!1;const F=(W,q,ae)=>{W==null?q._vnode&&Ee(q._vnode,null,null,!0):x(q._vnode||null,W,q,null,null,null,ae),j||(j=!0,iI(),jx(),j=!1),q._vnode=W},z={p:x,um:Ee,m:pe,r:we,mt:$,mc:P,pc:Z,pbc:T,n:K,o:n};let ee,re;return e&&([ee,re]=e(z)),{render:F,hydrate:ee,createApp:ece(F,ee)}}function YS({type:n,props:e},i){return i==="svg"&&n==="foreignObject"||i==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function nu({effect:n,update:e},i){n.allowRecurse=e.allowRecurse=i}function k8(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function TE(n,e,i=!1){const t=n.children,r=e.children;if(At(t)&&At(r))for(let s=0;s<t.length;s++){const o=t[s];let l=r[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[s]=Kc(r[s]),l.el=o.el),i||TE(o,l)),l.type===nd&&(l.el=o.el)}}function hce(n){const e=n.slice(),i=[0];let t,r,s,o,l;const c=n.length;for(t=0;t<c;t++){const u=n[t];if(u!==0){if(r=i[i.length-1],n[r]<u){e[t]=r,i.push(t);continue}for(s=0,o=i.length-1;s<o;)l=s+o>>1,n[i[l]]<u?s=l+1:o=l;u<n[i[s]]&&(s>0&&(e[t]=i[s-1]),i[s]=t)}}for(s=i.length,o=i[s-1];s-- >0;)i[s]=o,o=e[o];return i}function T8(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:T8(e)}const uce=n=>n.__isTeleport,x0=n=>n&&(n.disabled||n.disabled===""),pI=n=>typeof SVGElement<"u"&&n instanceof SVGElement,mI=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Tk=(n,e)=>{const i=n&&n.to;return Mn(i)?e?e(i):null:i},dce={name:"Teleport",__isTeleport:!0,process(n,e,i,t,r,s,o,l,c,u){const{mc:d,pc:f,pbc:m,o:{insert:g,querySelector:y,createText:x,createComment:b}}=u,S=x0(e.props);let{shapeFlag:_,children:O,dynamicChildren:k}=e;if(n==null){const M=e.el=x(""),E=e.anchor=x("");g(M,i,t),g(E,i,t);const R=e.target=Tk(e.props,y),P=e.targetAnchor=x("");R&&(g(P,R),o==="svg"||pI(R)?o="svg":(o==="mathml"||mI(R))&&(o="mathml"));const I=(T,N)=>{_&16&&d(O,T,N,r,s,o,l,c)};S?I(i,E):R&&I(R,P)}else{e.el=n.el;const M=e.anchor=n.anchor,E=e.target=n.target,R=e.targetAnchor=n.targetAnchor,P=x0(n.props),I=P?i:E,T=P?M:R;if(o==="svg"||pI(E)?o="svg":(o==="mathml"||mI(E))&&(o="mathml"),k?(m(n.dynamicChildren,k,I,r,s,o,l),TE(n,e,!0)):c||f(n,e,I,T,r,s,o,l,!1),S)P?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):S1(e,i,M,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const N=e.target=Tk(e.props,y);N&&S1(e,N,null,u,0)}else P&&S1(e,E,R,u,1)}M8(e)},remove(n,e,i,t,{um:r,o:{remove:s}},o){const{shapeFlag:l,children:c,anchor:u,targetAnchor:d,target:f,props:m}=n;if(f&&s(d),o&&s(u),l&16){const g=o||!x0(m);for(let y=0;y<c.length;y++){const x=c[y];r(x,e,i,g,!!x.dynamicChildren)}}},move:S1,hydrate:fce};function S1(n,e,i,{o:{insert:t},m:r},s=2){s===0&&t(n.targetAnchor,e,i);const{el:o,anchor:l,shapeFlag:c,children:u,props:d}=n,f=s===2;if(f&&t(o,e,i),(!f||x0(d))&&c&16)for(let m=0;m<u.length;m++)r(u[m],e,i,2);f&&t(l,e,i)}function fce(n,e,i,t,r,s,{o:{nextSibling:o,parentNode:l,querySelector:c}},u){const d=e.target=Tk(e.props,c);if(d){const f=d._lpa||d.firstChild;if(e.shapeFlag&16)if(x0(e.props))e.anchor=u(o(n),e,l(n),i,t,r,s),e.targetAnchor=f;else{e.anchor=o(n);let m=f;for(;m;)if(m=o(m),m&&m.nodeType===8&&m.data==="teleport anchor"){e.targetAnchor=m,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(f,e,d,i,t,r,s)}M8(e)}return e.anchor&&o(e.anchor)}const pce=dce;function M8(n){const e=n.ctx;if(e&&e.ut){let i=n.children[0].el;for(;i&&i!==n.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",e.uid),i=i.nextSibling;e.ut()}}const hn=Symbol.for("v-fgt"),nd=Symbol.for("v-txt"),Vr=Symbol.for("v-cmt"),Hu=Symbol.for("v-stc"),O0=[];let Hs=null;function ai(n=!1){O0.push(Hs=n?null:[])}function E8(){O0.pop(),Hs=O0[O0.length-1]||null}let rd=1;function Mk(n){rd+=n}function P8(n){return n.dynamicChildren=rd>0?Hs||$f:null,E8(),rd>0&&Hs&&Hs.push(n),n}function on(n,e,i,t,r,s){return P8(Ft(n,e,i,t,r,s,!0))}function Ur(n,e,i,t,r){return P8(Re(n,e,i,t,r,!0))}function bh(n){return n?n.__v_isVNode===!0:!1}function ba(n,e){return n.type===e.type&&n.key===e.key}function mce(n){}const A8=({key:n})=>n??null,mx=({ref:n,ref_key:e,ref_for:i})=>(typeof n=="number"&&(n=""+n),n!=null?Mn(n)||or(n)||Jt(n)?{i:tr,r:n,k:e,f:!!i}:n:null);function Ft(n,e=null,i=null,t=0,r=null,s=n===hn?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&A8(e),ref:e&&mx(e),scopeId:lw,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:t,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:tr};return l?(EE(c,i),s&128&&n.normalize(c)):i&&(c.shapeFlag|=Mn(i)?8:16),rd>0&&!o&&Hs&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Hs.push(c),c}const Re=gce;function gce(n,e=null,i=null,t=0,r=null,s=!1){if((!n||n===WB)&&(n=Vr),bh(n)){const l=rl(n,e,!0);return i&&EE(l,i),rd>0&&!s&&Hs&&(l.shapeFlag&6?Hs[Hs.indexOf(n)]=l:Hs.push(l)),l.patchFlag|=-2,l}if(Sce(n)&&(n=n.__vccOpts),e){e=R8(e);let{class:l,style:c}=e;l&&!Mn(l)&&(e.class=Lp(l)),an(c)&&(uE(c)&&!At(c)&&(c=_n({},c)),e.style=Ah(c))}const o=Mn(n)?1:QB(n)?128:uce(n)?64:an(n)?4:Jt(n)?2:0;return Ft(n,e,i,t,r,o,s,!0)}function R8(n){return n?uE(n)||y8(n)?_n({},n):n:null}function rl(n,e,i=!1,t=!1){const{props:r,ref:s,patchFlag:o,children:l,transition:c}=n,u=e?I8(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&A8(u),ref:e&&e.ref?i&&s?At(s)?s.concat(mx(e)):[s,mx(e)]:mx(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==hn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&rl(n.ssContent),ssFallback:n.ssFallback&&rl(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&t&&(d.transition=c.clone(d)),d}function mn(n=" ",e=0){return Re(nd,null,n,e)}function vce(n,e){const i=Re(Hu,null,n);return i.staticCount=e,i}function ME(n="",e=!1){return e?(ai(),Ur(Vr,null,n)):Re(Vr,null,n)}function bo(n){return n==null||typeof n=="boolean"?Re(Vr):At(n)?Re(hn,null,n.slice()):typeof n=="object"?Kc(n):Re(nd,null,String(n))}function Kc(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:rl(n)}function EE(n,e){let i=0;const{shapeFlag:t}=n;if(e==null)e=null;else if(At(e))i=16;else if(typeof e=="object")if(t&65){const r=e.default;r&&(r._c&&(r._d=!1),EE(n,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!y8(e)?e._ctx=tr:r===3&&tr&&(tr.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Jt(e)?(e={default:e,_ctx:tr},i=32):(e=String(e),t&64?(i=16,e=[mn(e)]):i=8);n.children=e,n.shapeFlag|=i}function I8(...n){const e={};for(let i=0;i<n.length;i++){const t=n[i];for(const r in t)if(r==="class")e.class!==t.class&&(e.class=Lp([e.class,t.class]));else if(r==="style")e.style=Ah([e.style,t.style]);else if(Uv(r)){const s=e[r],o=t[r];o&&s!==o&&!(At(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=t[r])}return e}function Bs(n,e,i,t=null){Co(n,e,7,[i,t])}const yce=m8();let bce=0;function D8(n,e,i){const t=n.type,r=(e?e.appContext:n.appContext)||yce,s={uid:bce++,vnode:n,type:t,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new oE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:x8(t,r),emitsOptions:FB(t,r),emit:null,emitted:null,propsDefaults:Ji,inheritAttrs:t.inheritAttrs,ctx:Ji,data:Ji,props:Ji,attrs:Ji,slots:Ji,refs:Ji,setupState:Ji,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ple.bind(null,s),n.ce&&n.ce(s),s}let dr=null;const Mo=()=>dr||tr;let Kx,Ek;{const n=mB(),e=(i,t)=>{let r;return(r=n[i])||(r=n[i]=[]),r.push(t),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Kx=e("__VUE_INSTANCE_SETTERS__",i=>dr=i),Ek=e("__VUE_SSR_SETTERS__",i=>Qv=i)}const sd=n=>{const e=dr;return Kx(n),n.scope.on(),()=>{n.scope.off(),Kx(e)}},Pk=()=>{dr&&dr.scope.off(),Kx(null)};function N8(n){return n.vnode.shapeFlag&4}let Qv=!1;function $8(n,e=!1){e&&Ek(e);const{props:i,children:t}=n.vnode,r=N8(n);ice(n,i,r,e),sce(n,t);const s=r?xce(n,e):void 0;return e&&Ek(!1),s}function xce(n,e){const i=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,_k);const{setup:t}=i;if(t){const r=n.setupContext=t.length>1?L8(n):null,s=sd(n);Rh();const o=Hl(t,n,0,[n.props,r]);if(Ih(),s(),rE(o)){if(o.then(Pk,Pk),e)return o.then(l=>{Ak(n,l,e)}).catch(l=>{yd(l,n,0)});n.asyncDep=o}else Ak(n,o,e)}else V8(n,e)}function Ak(n,e,i){Jt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:an(e)&&(n.setupState=pE(e)),V8(n,i)}let Jx,Rk;function Oce(n){Jx=n,Rk=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,Vle))}}const wce=()=>!Jx;function V8(n,e,i){const t=n.type;if(!n.render){if(!e&&Jx&&!t.render){const r=t.template||SE(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:l,compilerOptions:c}=t,u=_n(_n({isCustomElement:s,delimiters:l},o),c);t.render=Jx(r,u)}}n.render=t.render||Qs,Rk&&Rk(n)}{const r=sd(n);Rh();try{Yle(n)}finally{Ih(),r()}}}const _ce={get(n,e){return Zs(n,"get",""),n[e]}};function L8(n){const e=i=>{n.exposed=i||{}};return{attrs:new Proxy(n.attrs,_ce),slots:n.slots,emit:n.emit,expose:e}}function fw(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(pE(IB(n.exposed)),{get(e,i){if(i in e)return e[i];if(i in b0)return b0[i](n)},has(e,i){return i in e||i in b0}}))}function Ik(n,e=!0){return Jt(n)?n.displayName||n.name:n.name||e&&n.__name}function Sce(n){return Jt(n)&&"__vccOpts"in n}const gn=(n,e)=>qae(n,e,Qv);function B8(n,e,i=Ji){const t=Mo(),r=Os(e),s=xo(e),o=mE((c,u)=>{let d;return ZB(()=>{const f=n[e];Sa(d,f)&&(d=f,u())}),{get(){return c(),i.get?i.get(d):d},set(f){const m=t.vnode.props;!(m&&(e in m||r in m||s in m)&&(`onUpdate:${e}`in m||`onUpdate:${r}`in m||`onUpdate:${s}`in m))&&Sa(f,d)&&(d=f,u()),t.emit(`update:${e}`,i.set?i.set(f):f)}}}),l=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return o[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?n[l]||{}:o,done:!1}:{done:!0}}}},o}function eO(n,e,i){const t=arguments.length;return t===2?an(e)&&!At(e)?bh(e)?Re(n,null,[e]):Re(n,e):Re(n,null,e):(t>3?i=Array.prototype.slice.call(arguments,2):t===3&&bh(i)&&(i=[i]),Re(n,e,i))}function Cce(){}function kce(n,e,i,t){const r=i[t];if(r&&U8(r,n))return r;const s=e();return s.memo=n.slice(),i[t]=s}function U8(n,e){const i=n.memo;if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(Sa(i[t],e[t]))return!1;return rd>0&&Hs&&Hs.push(n),!0}const F8="3.4.27",Tce=Qs,Mce=cle,Ece=_f,Pce=UB,Ace={createComponentInstance:D8,setupComponent:$8,renderComponentRoot:fx,setCurrentRenderingInstance:X0,isVNode:bh,normalizeVNode:bo},Rce=Ace,Ice=null,Dce=null,Nce=null;/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const $ce="http://www.w3.org/2000/svg",Vce="http://www.w3.org/1998/Math/MathML",Jc=typeof document<"u"?document:null,gI=Jc&&Jc.createElement("template"),Lce={insert:(n,e,i)=>{e.insertBefore(n,i||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,i,t)=>{const r=e==="svg"?Jc.createElementNS($ce,n):e==="mathml"?Jc.createElementNS(Vce,n):Jc.createElement(n,i?{is:i}:void 0);return n==="select"&&t&&t.multiple!=null&&r.setAttribute("multiple",t.multiple),r},createText:n=>Jc.createTextNode(n),createComment:n=>Jc.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Jc.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,i,t,r,s){const o=i?i.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===s||!(r=r.nextSibling)););else{gI.innerHTML=t==="svg"?`<svg>${n}</svg>`:t==="mathml"?`<math>${n}</math>`:n;const l=gI.content;if(t==="svg"||t==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},Nc="transition",Um="animation",hp=Symbol("_vtc"),PE=(n,{slots:e})=>eO(JB,X8(n),e);PE.displayName="Transition";const z8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Bce=PE.props=_n({},wE,z8),ru=(n,e=[])=>{At(n)?n.forEach(i=>i(...e)):n&&n(...e)},vI=n=>n?At(n)?n.some(e=>e.length>1):n.length>1:!1;function X8(n){const e={};for(const L in n)L in z8||(e[L]=n[L]);if(n.css===!1)return e;const{name:i="v",type:t,duration:r,enterFromClass:s=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:c=s,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:f=`${i}-leave-from`,leaveActiveClass:m=`${i}-leave-active`,leaveToClass:g=`${i}-leave-to`}=n,y=Uce(r),x=y&&y[0],b=y&&y[1],{onBeforeEnter:S,onEnter:_,onEnterCancelled:O,onLeave:k,onLeaveCancelled:M,onBeforeAppear:E=S,onAppear:R=_,onAppearCancelled:P=O}=e,I=(L,D,$)=>{jc(L,D?d:l),jc(L,D?u:o),$&&$()},T=(L,D)=>{L._isLeaving=!1,jc(L,f),jc(L,g),jc(L,m),D&&D()},N=L=>(D,$)=>{const B=L?R:_,U=()=>I(D,L,$);ru(B,[D,U]),yI(()=>{jc(D,L?c:s),$l(D,L?d:l),vI(B)||bI(D,t,x,U)})};return _n(e,{onBeforeEnter(L){ru(S,[L]),$l(L,s),$l(L,o)},onBeforeAppear(L){ru(E,[L]),$l(L,c),$l(L,u)},onEnter:N(!1),onAppear:N(!0),onLeave(L,D){L._isLeaving=!0;const $=()=>T(L,D);$l(L,f),$l(L,m),Q8(),yI(()=>{L._isLeaving&&(jc(L,f),$l(L,g),vI(k)||bI(L,t,b,$))}),ru(k,[L,$])},onEnterCancelled(L){I(L,!1),ru(O,[L])},onAppearCancelled(L){I(L,!0),ru(P,[L])},onLeaveCancelled(L){T(L),ru(M,[L])}})}function Uce(n){if(n==null)return null;if(an(n))return[jS(n.enter),jS(n.leave)];{const e=jS(n);return[e,e]}}function jS(n){return Hx(n)}function $l(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.add(i)),(n[hp]||(n[hp]=new Set)).add(e)}function jc(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.remove(t));const i=n[hp];i&&(i.delete(e),i.size||(n[hp]=void 0))}function yI(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Fce=0;function bI(n,e,i,t){const r=n._endId=++Fce,s=()=>{r===n._endId&&t()};if(i)return setTimeout(s,i);const{type:o,timeout:l,propCount:c}=W8(n,e);if(!o)return t();const u=o+"end";let d=0;const f=()=>{n.removeEventListener(u,m),s()},m=g=>{g.target===n&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},l+1),n.addEventListener(u,m)}function W8(n,e){const i=window.getComputedStyle(n),t=y=>(i[y]||"").split(", "),r=t(`${Nc}Delay`),s=t(`${Nc}Duration`),o=xI(r,s),l=t(`${Um}Delay`),c=t(`${Um}Duration`),u=xI(l,c);let d=null,f=0,m=0;e===Nc?o>0&&(d=Nc,f=o,m=s.length):e===Um?u>0&&(d=Um,f=u,m=c.length):(f=Math.max(o,u),d=f>0?o>u?Nc:Um:null,m=d?d===Nc?s.length:c.length:0);const g=d===Nc&&/\b(transform|all)(,|$)/.test(t(`${Nc}Property`).toString());return{type:d,timeout:f,propCount:m,hasTransform:g}}function xI(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((i,t)=>OI(i)+OI(n[t])))}function OI(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Q8(){return document.body.offsetHeight}function zce(n,e,i){const t=n[hp];t&&(e=(e?[e,...t]:[...t]).join(" ")),e==null?n.removeAttribute("class"):i?n.setAttribute("class",e):n.className=e}const tO=Symbol("_vod"),H8=Symbol("_vsh"),G8={beforeMount(n,{value:e},{transition:i}){n[tO]=n.style.display==="none"?"":n.style.display,i&&e?i.beforeEnter(n):Fm(n,e)},mounted(n,{value:e},{transition:i}){i&&e&&i.enter(n)},updated(n,{value:e,oldValue:i},{transition:t}){!e!=!i&&(t?e?(t.beforeEnter(n),Fm(n,!0),t.enter(n)):t.leave(n,()=>{Fm(n,!1)}):Fm(n,e))},beforeUnmount(n,{value:e}){Fm(n,e)}};function Fm(n,e){n.style.display=e?n[tO]:"none",n[H8]=!e}function Xce(){G8.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const Y8=Symbol("");function Wce(n){const e=Mo();if(!e)return;const i=e.ut=(r=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Nk(s,r))},t=()=>{const r=n(e.proxy);Dk(e.subTree,r),i(r)};jn(()=>{qB(t);const r=new MutationObserver(t);r.observe(e.subTree.el.parentNode,{childList:!0}),Jo(()=>r.disconnect())})}function Dk(n,e){if(n.shapeFlag&128){const i=n.suspense;n=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{Dk(i.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Nk(n.el,e);else if(n.type===hn)n.children.forEach(i=>Dk(i,e));else if(n.type===Hu){let{el:i,anchor:t}=n;for(;i&&(Nk(i,e),i!==t);)i=i.nextSibling}}function Nk(n,e){if(n.nodeType===1){const i=n.style;let t="";for(const r in e)i.setProperty(`--${r}`,e[r]),t+=`--${r}: ${e[r]};`;i[Y8]=t}}const Qce=/(^|;)\s*display\s*:/;function Hce(n,e,i){const t=n.style,r=Mn(i);let s=!1;if(i&&!r){if(e)if(Mn(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();i[l]==null&&gx(t,l,"")}else for(const o in e)i[o]==null&&gx(t,o,"");for(const o in i)o==="display"&&(s=!0),gx(t,o,i[o])}else if(r){if(e!==i){const o=t[Y8];o&&(i+=";"+o),t.cssText=i,s=Qce.test(i)}}else e&&n.removeAttribute("style");tO in n&&(n[tO]=s?t.display:"",n[H8]&&(t.display="none"))}const wI=/\s*!important$/;function gx(n,e,i){if(At(i))i.forEach(t=>gx(n,e,t));else if(i==null&&(i=""),e.startsWith("--"))n.setProperty(e,i);else{const t=Gce(n,e);wI.test(i)?n.setProperty(xo(t),i.replace(wI,""),"important"):n[t]=i}}const _I=["Webkit","Moz","ms"],qS={};function Gce(n,e){const i=qS[e];if(i)return i;let t=Os(e);if(t!=="filter"&&t in n)return qS[e]=t;t=Fv(t);for(let r=0;r<_I.length;r++){const s=_I[r]+t;if(s in n)return qS[e]=s}return e}const SI="http://www.w3.org/1999/xlink";function Yce(n,e,i,t,r){if(t&&e.startsWith("xlink:"))i==null?n.removeAttributeNS(SI,e.slice(6,e.length)):n.setAttributeNS(SI,e,i);else{const s=Sae(e);i==null||s&&!gB(i)?n.removeAttribute(e):n.setAttribute(e,s?"":i)}}function jce(n,e,i,t,r,s,o){if(e==="innerHTML"||e==="textContent"){t&&o(t,r,s),n[e]=i??"";return}const l=n.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const u=l==="OPTION"?n.getAttribute("value")||"":n.value,d=i??"";(u!==d||!("_value"in n))&&(n.value=d),i==null&&n.removeAttribute(e),n._value=i;return}let c=!1;if(i===""||i==null){const u=typeof n[e];u==="boolean"?i=gB(i):i==null&&u==="string"?(i="",c=!0):u==="number"&&(i=0,c=!0)}try{n[e]=i}catch{}c&&n.removeAttribute(e)}function Bl(n,e,i,t){n.addEventListener(e,i,t)}function qce(n,e,i,t){n.removeEventListener(e,i,t)}const CI=Symbol("_vei");function Zce(n,e,i,t,r=null){const s=n[CI]||(n[CI]={}),o=s[e];if(t&&o)o.value=t;else{const[l,c]=Kce(e);if(t){const u=s[e]=the(t,r);Bl(n,l,u,c)}else o&&(qce(n,l,o,c),s[e]=void 0)}}const kI=/(?:Once|Passive|Capture)$/;function Kce(n){let e;if(kI.test(n)){e={};let t;for(;t=n.match(kI);)n=n.slice(0,n.length-t[0].length),e[t[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):xo(n.slice(2)),e]}let ZS=0;const Jce=Promise.resolve(),ehe=()=>ZS||(Jce.then(()=>ZS=0),ZS=Date.now());function the(n,e){const i=t=>{if(!t._vts)t._vts=Date.now();else if(t._vts<=i.attached)return;Co(ihe(t,i.value),e,5,[t])};return i.value=n,i.attached=ehe(),i}function ihe(n,e){if(At(e)){const i=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{i.call(n),n._stopped=!0},e.map(t=>r=>!r._stopped&&t&&t(r))}else return e}const TI=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,nhe=(n,e,i,t,r,s,o,l,c)=>{const u=r==="svg";e==="class"?zce(n,t,u):e==="style"?Hce(n,i,t):Uv(e)?iE(e)||Zce(n,e,i,t,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rhe(n,e,t,u))?jce(n,e,t,s,o,l,c):(e==="true-value"?n._trueValue=t:e==="false-value"&&(n._falseValue=t),Yce(n,e,t,u))};function rhe(n,e,i,t){if(t)return!!(e==="innerHTML"||e==="textContent"||e in n&&TI(e)&&Jt(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return TI(e)&&Mn(i)?!1:e in n}/*! #__NO_SIDE_EFFECTS__ */function j8(n,e){const i=ec(n);class t extends pw{constructor(s){super(i,s,e)}}return t.def=i,t}/*! #__NO_SIDE_EFFECTS__ */const she=n=>j8(n,oU),ohe=typeof HTMLElement<"u"?HTMLElement:class{};class pw extends ohe{constructor(e,i={},t){super(),this._def=e,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&t?t(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),Bp(()=>{this._connected||(rO(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let t=0;t<this.attributes.length;t++)this._setAttr(this.attributes[t].name);this._ob=new MutationObserver(t=>{for(const r of t)this._setAttr(r.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(t,r=!1)=>{const{props:s,styles:o}=t;let l;if(s&&!At(s))for(const c in s){const u=s[c];(u===Number||u&&u.type===Number)&&(c in this._props&&(this._props[c]=Hx(this._props[c])),(l||(l=Object.create(null)))[Os(c)]=!0)}this._numberProps=l,r&&this._resolveProps(t),this._applyStyles(o),this._update()},i=this._def.__asyncLoader;i?i().then(t=>e(t,!0)):e(this._def)}_resolveProps(e){const{props:i}=e,t=At(i)?i:Object.keys(i||{});for(const r of Object.keys(this))r[0]!=="_"&&t.includes(r)&&this._setProp(r,this[r],!0,!1);for(const r of t.map(Os))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(s){this._setProp(r,s)}})}_setAttr(e){let i=this.hasAttribute(e)?this.getAttribute(e):void 0;const t=Os(e);this._numberProps&&this._numberProps[t]&&(i=Hx(i)),this._setProp(t,i,!1)}_getProp(e){return this._props[e]}_setProp(e,i,t=!0,r=!0){i!==this._props[e]&&(this._props[e]=i,r&&this._instance&&this._update(),t&&(i===!0?this.setAttribute(xo(e),""):typeof i=="string"||typeof i=="number"?this.setAttribute(xo(e),i+""):i||this.removeAttribute(xo(e))))}_update(){rO(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Re(this._def,_n({},this._props));return this._instance||(e.ce=i=>{this._instance=i,i.isCE=!0;const t=(s,o)=>{this.dispatchEvent(new CustomEvent(s,{detail:o}))};i.emit=(s,...o)=>{t(s,o),xo(s)!==s&&t(xo(s),o)};let r=this;for(;r=r&&(r.parentNode||r.host);)if(r instanceof pw){i.parent=r._instance,i.provides=r._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(i=>{const t=document.createElement("style");t.textContent=i,this.shadowRoot.appendChild(t)})}}function ahe(n="$style"){{const e=Mo();if(!e)return Ji;const i=e.type.__cssModules;if(!i)return Ji;const t=i[n];return t||Ji}}const q8=new WeakMap,Z8=new WeakMap,iO=Symbol("_moveCb"),MI=Symbol("_enterCb"),K8={name:"TransitionGroup",props:_n({},Bce,{tag:String,moveClass:String}),setup(n,{slots:e}){const i=Mo(),t=OE();let r,s;return uw(()=>{if(!r.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!fhe(r[0].el,i.vnode.el,o))return;r.forEach(hhe),r.forEach(uhe);const l=r.filter(dhe);Q8(),l.forEach(c=>{const u=c.el,d=u.style;$l(u,o),d.transform=d.webkitTransform=d.transitionDuration="";const f=u[iO]=m=>{m&&m.target!==u||(!m||/transform$/.test(m.propertyName))&&(u.removeEventListener("transitionend",f),u[iO]=null,jc(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=Ni(n),l=X8(o);let c=o.tag||hn;if(r=[],s)for(let u=0;u<s.length;u++){const d=s[u];d.el&&d.el instanceof Element&&(r.push(d),id(d,cp(d,l,t,i)),q8.set(d,d.el.getBoundingClientRect()))}s=e.default?cw(e.default()):[];for(let u=0;u<s.length;u++){const d=s[u];d.key!=null&&id(d,cp(d,l,t,i))}return Re(c,null,s)}}},lhe=n=>delete n.mode;K8.props;const che=K8;function hhe(n){const e=n.el;e[iO]&&e[iO](),e[MI]&&e[MI]()}function uhe(n){Z8.set(n,n.el.getBoundingClientRect())}function dhe(n){const e=q8.get(n),i=Z8.get(n),t=e.left-i.left,r=e.top-i.top;if(t||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${t}px,${r}px)`,s.transitionDuration="0s",n}}function fhe(n,e,i){const t=n.cloneNode(),r=n[hp];r&&r.forEach(l=>{l.split(/\s+/).forEach(c=>c&&t.classList.remove(c))}),i.split(/\s+/).forEach(l=>l&&t.classList.add(l)),t.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(t);const{hasTransform:o}=W8(t);return s.removeChild(t),o}const xh=n=>{const e=n.props["onUpdate:modelValue"]||!1;return At(e)?i=>Bf(e,i):e};function phe(n){n.target.composing=!0}function EI(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Yo=Symbol("_assign"),nO={created(n,{modifiers:{lazy:e,trim:i,number:t}},r){n[Yo]=xh(r);const s=t||r.props&&r.props.type==="number";Bl(n,e?"change":"input",o=>{if(o.target.composing)return;let l=n.value;i&&(l=l.trim()),s&&(l=Qx(l)),n[Yo](l)}),i&&Bl(n,"change",()=>{n.value=n.value.trim()}),e||(Bl(n,"compositionstart",phe),Bl(n,"compositionend",EI),Bl(n,"change",EI))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:i,trim:t,number:r}},s){if(n[Yo]=xh(s),n.composing)return;const o=(r||n.type==="number")&&!/^0\d/.test(n.value)?Qx(n.value):n.value,l=e??"";o!==l&&(document.activeElement===n&&n.type!=="range"&&(i||t&&n.value.trim()===l)||(n.value=l))}},AE={deep:!0,created(n,e,i){n[Yo]=xh(i),Bl(n,"change",()=>{const t=n._modelValue,r=up(n),s=n.checked,o=n[Yo];if(At(t)){const l=tw(t,r),c=l!==-1;if(s&&!c)o(t.concat(r));else if(!s&&c){const u=[...t];u.splice(l,1),o(u)}}else if(gd(t)){const l=new Set(t);s?l.add(r):l.delete(r),o(l)}else o(eU(n,s))})},mounted:PI,beforeUpdate(n,e,i){n[Yo]=xh(i),PI(n,e,i)}};function PI(n,{value:e,oldValue:i},t){n._modelValue=e,At(e)?n.checked=tw(e,t.props.value)>-1:gd(e)?n.checked=e.has(t.props.value):e!==i&&(n.checked=vh(e,eU(n,!0)))}const RE={created(n,{value:e},i){n.checked=vh(e,i.props.value),n[Yo]=xh(i),Bl(n,"change",()=>{n[Yo](up(n))})},beforeUpdate(n,{value:e,oldValue:i},t){n[Yo]=xh(t),e!==i&&(n.checked=vh(e,t.props.value))}},J8={deep:!0,created(n,{value:e,modifiers:{number:i}},t){const r=gd(e);Bl(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>i?Qx(up(o)):up(o));n[Yo](n.multiple?r?new Set(s):s:s[0]),n._assigning=!0,Bp(()=>{n._assigning=!1})}),n[Yo]=xh(t)},mounted(n,{value:e,modifiers:{number:i}}){AI(n,e)},beforeUpdate(n,e,i){n[Yo]=xh(i)},updated(n,{value:e,modifiers:{number:i}}){n._assigning||AI(n,e)}};function AI(n,e,i){const t=n.multiple,r=At(e);if(!(t&&!r&&!gd(e))){for(let s=0,o=n.options.length;s<o;s++){const l=n.options[s],c=up(l);if(t)if(r){const u=typeof c;u==="string"||u==="number"?l.selected=e.some(d=>String(d)===String(c)):l.selected=tw(e,c)>-1}else l.selected=e.has(c);else if(vh(up(l),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function up(n){return"_value"in n?n._value:n.value}function eU(n,e){const i=e?"_trueValue":"_falseValue";return i in n?n[i]:e}const tU={created(n,e,i){C1(n,e,i,null,"created")},mounted(n,e,i){C1(n,e,i,null,"mounted")},beforeUpdate(n,e,i,t){C1(n,e,i,t,"beforeUpdate")},updated(n,e,i,t){C1(n,e,i,t,"updated")}};function iU(n,e){switch(n){case"SELECT":return J8;case"TEXTAREA":return nO;default:switch(e){case"checkbox":return AE;case"radio":return RE;default:return nO}}}function C1(n,e,i,t,r){const o=iU(n.tagName,i.props&&i.props.type)[r];o&&o(n,e,i,t)}function mhe(){nO.getSSRProps=({value:n})=>({value:n}),RE.getSSRProps=({value:n},e)=>{if(e.props&&vh(e.props.value,n))return{checked:!0}},AE.getSSRProps=({value:n},e)=>{if(At(n)){if(e.props&&tw(n,e.props.value)>-1)return{checked:!0}}else if(gd(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},tU.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const i=iU(e.type.toUpperCase(),e.props&&e.props.type);if(i.getSSRProps)return i.getSSRProps(n,e)}}const ghe=["ctrl","shift","alt","meta"],vhe={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>ghe.some(i=>n[`${i}Key`]&&!e.includes(i))},yhe=(n,e)=>{const i=n._withMods||(n._withMods={}),t=e.join(".");return i[t]||(i[t]=(r,...s)=>{for(let o=0;o<e.length;o++){const l=vhe[e[o]];if(l&&l(r,e))return}return n(r,...s)})},bhe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xhe=(n,e)=>{const i=n._withKeys||(n._withKeys={}),t=e.join(".");return i[t]||(i[t]=r=>{if(!("key"in r))return;const s=xo(r.key);if(e.some(o=>o===s||bhe[o]===s))return n(r)})},nU=_n({patchProp:nhe},Lce);let w0,RI=!1;function rU(){return w0||(w0=kE(nU))}function sU(){return w0=RI?w0:S8(nU),RI=!0,w0}const rO=(...n)=>{rU().render(...n)},oU=(...n)=>{sU().hydrate(...n)},aU=(...n)=>{const e=rU().createApp(...n),{mount:i}=e;return e.mount=t=>{const r=cU(t);if(!r)return;const s=e._component;!Jt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=i(r,!1,lU(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e},Ohe=(...n)=>{const e=sU().createApp(...n),{mount:i}=e;return e.mount=t=>{const r=cU(t);if(r)return i(r,!0,lU(r))},e};function lU(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function cU(n){return Mn(n)?document.querySelector(n):n}let II=!1;const whe=()=>{II||(II=!0,mhe(),Xce())};/**
* vue v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const _he=()=>{},She=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:JB,BaseTransitionPropsValidators:wE,Comment:Vr,DeprecationTypes:Nce,EffectScope:oE,ErrorCodes:lle,ErrorTypeStrings:Mce,Fragment:hn,KeepAlive:Ile,ReactiveEffect:ap,Static:Hu,Suspense:HB,Teleport:pce,Text:nd,TrackOpTypes:sle,Transition:PE,TransitionGroup:che,TriggerOpTypes:ole,VueElement:pw,assertNumber:ale,callWithAsyncErrorHandling:Co,callWithErrorHandling:Hl,camelize:Os,capitalize:Fv,cloneVNode:rl,compatUtils:Dce,compile:_he,computed:gn,createApp:aU,createBlock:Ur,createCommentVNode:ME,createElementBlock:on,createElementVNode:Ft,createHydrationRenderer:S8,createPropsRestProxy:Gle,createRenderer:kE,createSSRApp:Ohe,createSlots:Nle,createStaticVNode:vce,createTextVNode:mn,createVNode:Re,customRef:mE,defineAsyncComponent:Ale,defineComponent:ec,defineCustomElement:j8,defineEmits:Ble,defineExpose:Ule,defineModel:Xle,defineOptions:Fle,defineProps:Lle,defineSSRCustomElement:she,defineSlots:zle,devtools:Ece,effect:Mae,effectScope:kae,getCurrentInstance:Mo,getCurrentScope:iw,getTransitionRawChildren:cw,guardReactiveProps:R8,h:eO,handleError:yd,hasInjectionContext:tce,hydrate:oU,initCustomFormatter:Cce,initDirectivesForSSR:whe,inject:Qf,isMemoSame:U8,isProxy:uE,isReactive:Uf,isReadonly:lp,isRef:or,isRuntimeOnly:wce,isShallow:B0,isVNode:bh,markRaw:IB,mergeDefaults:Qle,mergeModels:Hle,mergeProps:I8,nextTick:Bp,normalizeClass:Lp,normalizeProps:wae,normalizeStyle:Ah,onActivated:t8,onBeforeMount:r8,onBeforeUnmount:dw,onBeforeUpdate:s8,onDeactivated:i8,onErrorCaptured:c8,onMounted:jn,onRenderTracked:l8,onRenderTriggered:a8,onScopeDispose:aE,onServerPrefetch:o8,onUnmounted:Jo,onUpdated:uw,openBlock:ai,popScopeId:XB,provide:H0,proxyRefs:pE,pushScopeId:zB,queuePostFlushCb:Yx,reactive:vd,readonly:td,ref:ot,registerRuntimeCompiler:Oce,render:rO,renderList:yh,renderSlot:h8,resolveComponent:Pt,resolveDirective:Ole,resolveDynamicComponent:xk,resolveFilter:Ice,resolveTransitionHooks:cp,setBlockTracking:Mk,setDevtoolsHook:Pce,setTransitionHooks:id,shallowReactive:RB,shallowReadonly:jae,shallowRef:Fn,ssrContextKey:YB,ssrUtils:Rce,stop:Eae,toDisplayString:op,toHandlerKey:y0,toHandlers:$le,toRaw:Ni,toRef:rle,toRefs:zv,toValue:Jae,transformVNodeArgs:mce,triggerRef:Kae,unref:oi,useAttrs:d8,useCssModule:ahe,useCssVars:Wce,useModel:B8,useSSRContext:jB,useSlots:_E,useTransitionState:OE,vModelCheckbox:AE,vModelDynamic:tU,vModelRadio:RE,vModelSelect:J8,vModelText:nO,vShow:G8,version:F8,warn:Tce,watch:Fi,watchEffect:Gl,watchPostEffect:qB,watchSyncEffect:ZB,withAsyncContext:px,withCtx:Je,withDefaults:Wle,withDirectives:Ele,withKeys:xhe,withMemo:kce,withModifiers:yhe,withScopeId:mle},Symbol.toStringTag,{value:"Module"})),Che={style:{width:"100%","text-align":"center"}},khe={__name:"AppItem",props:{routeData:{id:"",title:"",comp:null,desc:""}},setup(n){const e=n;function i(){location.hash=e.routeData.id}return(t,r)=>{const s=Pt("Icon"),o=Pt("Button");return ai(),on("div",Che,[Re(o,{type:"success",size:"large",onClick:i},{default:Je(()=>[Re(s,{type:"md-eye"}),mn(" "+op(n.routeData.title),1)]),_:1})])}}};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Up="164",wu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Vl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hU=0,$k=1,uU=2,The=3,Mhe=0,IE=1,DE=2,Ga=3,tc=0,ts=1,Xs=2,Yl=0,Gu=1,sO=2,Vk=3,Lk=4,dU=5,ih=100,fU=101,pU=102,mU=103,gU=104,vU=200,yU=201,bU=202,xU=203,oO=204,aO=205,OU=206,wU=207,_U=208,SU=209,CU=210,kU=211,TU=212,MU=213,EU=214,PU=0,AU=1,RU=2,G0=3,IU=4,DU=5,NU=6,$U=7,Hv=0,VU=1,LU=2,jl=0,BU=1,UU=2,FU=3,NE=4,zU=5,XU=6,WU=7,Bk="attached",QU="detached",mw=300,ic=301,Oh=302,dp=303,Y0=304,Fp=306,wh=1e3,bs=1001,fp=1002,fr=1003,gw=1004,Ehe=1004,Du=1005,Phe=1005,Yn=1006,Hf=1007,Ahe=1007,Oa=1008,Rhe=1008,Ca=1009,HU=1010,GU=1011,$E=1012,VE=1013,od=1014,Xo=1015,zp=1016,LE=1017,BE=1018,Xp=1020,YU=35902,jU=1021,qU=1022,Gs=1023,ZU=1024,KU=1025,Yu=1026,pp=1027,UE=1028,FE=1029,JU=1030,zE=1031,XE=1033,vx=33776,yx=33777,bx=33778,xx=33779,Uk=35840,Fk=35841,zk=35842,Xk=35843,Wk=36196,Qk=37492,Hk=37496,Gk=37808,Yk=37809,jk=37810,qk=37811,Zk=37812,Kk=37813,Jk=37814,eT=37815,tT=37816,iT=37817,nT=37818,rT=37819,sT=37820,oT=37821,Ox=36492,aT=36494,lT=36495,eF=36283,cT=36284,hT=36285,uT=36286,tF=2200,iF=2201,nF=2202,mp=2300,gp=2301,wx=2302,Nu=2400,$u=2401,j0=2402,vw=2500,WE=2501,Ihe=0,Dhe=1,Nhe=2,rF=3200,sF=3201,Dh=0,oF=1,Ul="",vo="srgb",uc="srgb-linear",yw="display-p3",Gv="display-p3-linear",q0="linear",fn="srgb",Z0="rec709",K0="p3",$he=0,_u=7680,Vhe=7681,Lhe=7682,Bhe=7683,Uhe=34055,Fhe=34056,zhe=5386,Xhe=512,Whe=513,Qhe=514,Hhe=515,Ghe=516,Yhe=517,jhe=518,dT=519,aF=512,lF=513,cF=514,QE=515,hF=516,uF=517,dF=518,fF=519,J0=35044,qhe=35048,Zhe=35040,Khe=35045,Jhe=35049,eue=35041,tue=35046,iue=35050,nue=35042,rue="100",fT="300 es",Ka=2e3,ev=2001;class hl{addEventListener(e,i){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(i)===-1&&t[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(i);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Yr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let DI=1234567;const ju=Math.PI/180,vp=180/Math.PI;function ko(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(Yr[n&255]+Yr[n>>8&255]+Yr[n>>16&255]+Yr[n>>24&255]+"-"+Yr[e&255]+Yr[e>>8&255]+"-"+Yr[e>>16&15|64]+Yr[e>>24&255]+"-"+Yr[i&63|128]+Yr[i>>8&255]+"-"+Yr[i>>16&255]+Yr[i>>24&255]+Yr[t&255]+Yr[t>>8&255]+Yr[t>>16&255]+Yr[t>>24&255]).toLowerCase()}function Un(n,e,i){return Math.max(e,Math.min(i,n))}function HE(n,e){return(n%e+e)%e}function sue(n,e,i,t,r){return t+(n-e)*(r-t)/(i-e)}function oue(n,e,i){return n!==e?(i-n)/(e-n):0}function _0(n,e,i){return(1-i)*n+i*e}function aue(n,e,i,t){return _0(n,e,1-Math.exp(-i*t))}function lue(n,e=1){return e-Math.abs(HE(n,e*2)-e)}function cue(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*(3-2*n))}function hue(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*n*(n*(n*6-15)+10))}function uue(n,e){return n+Math.floor(Math.random()*(e-n+1))}function due(n,e){return n+Math.random()*(e-n)}function fue(n){return n*(.5-Math.random())}function pue(n){n!==void 0&&(DI=n);let e=DI+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function mue(n){return n*ju}function gue(n){return n*vp}function vue(n){return(n&n-1)===0&&n!==0}function yue(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function bue(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function xue(n,e,i,t,r){const s=Math.cos,o=Math.sin,l=s(i/2),c=o(i/2),u=s((e+t)/2),d=o((e+t)/2),f=s((e-t)/2),m=o((e-t)/2),g=s((t-e)/2),y=o((t-e)/2);switch(r){case"XYX":n.set(l*d,c*f,c*m,l*u);break;case"YZY":n.set(c*m,l*d,c*f,l*u);break;case"ZXZ":n.set(c*f,c*m,l*d,l*u);break;case"XZX":n.set(l*d,c*y,c*g,l*u);break;case"YXY":n.set(c*g,l*d,c*y,l*u);break;case"ZYZ":n.set(c*y,c*g,l*d,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function vs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function pi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Jr={DEG2RAD:ju,RAD2DEG:vp,generateUUID:ko,clamp:Un,euclideanModulo:HE,mapLinear:sue,inverseLerp:oue,lerp:_0,damp:aue,pingpong:lue,smoothstep:cue,smootherstep:hue,randInt:uue,randFloat:due,randFloatSpread:fue,seededRandom:pue,degToRad:mue,radToDeg:gue,isPowerOfTwo:vue,ceilPowerOfTwo:yue,floorPowerOfTwo:bue,setQuaternionFromProperEuler:xue,normalize:pi,denormalize:vs};class ze{constructor(e=0,i=0){ze.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,i){return this.x=e,this.y=i,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const i=this.x,t=this.y,r=e.elements;return this.x=r[0]*i+r[3]*t+r[6],this.y=r[1]*i+r[4]*t+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this}clampLength(e,i){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const t=this.dot(e)/i;return Math.acos(Un(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,t=this.y-e.y;return i*i+t*t}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this}rotateAround(e,i){const t=Math.cos(i),r=Math.sin(i),s=this.x-e.x,o=this.y-e.y;return this.x=s*t-o*r+e.x,this.y=s*r+o*t+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ui{constructor(e,i,t,r,s,o,l,c,u){ui.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,i,t,r,s,o,l,c,u)}set(e,i,t,r,s,o,l,c,u){const d=this.elements;return d[0]=e,d[1]=r,d[2]=l,d[3]=i,d[4]=s,d[5]=c,d[6]=t,d[7]=o,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const i=this.elements,t=e.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this}extractBasis(e,i,t){return e.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const i=e.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const t=e.elements,r=i.elements,s=this.elements,o=t[0],l=t[3],c=t[6],u=t[1],d=t[4],f=t[7],m=t[2],g=t[5],y=t[8],x=r[0],b=r[3],S=r[6],_=r[1],O=r[4],k=r[7],M=r[2],E=r[5],R=r[8];return s[0]=o*x+l*_+c*M,s[3]=o*b+l*O+c*E,s[6]=o*S+l*k+c*R,s[1]=u*x+d*_+f*M,s[4]=u*b+d*O+f*E,s[7]=u*S+d*k+f*R,s[2]=m*x+g*_+y*M,s[5]=m*b+g*O+y*E,s[8]=m*S+g*k+y*R,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=e,i[4]*=e,i[7]*=e,i[2]*=e,i[5]*=e,i[8]*=e,this}determinant(){const e=this.elements,i=e[0],t=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return i*o*d-i*l*u-t*s*d+t*l*c+r*s*u-r*o*c}invert(){const e=this.elements,i=e[0],t=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=d*o-l*u,m=l*c-d*s,g=u*s-o*c,y=i*f+t*m+r*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return e[0]=f*x,e[1]=(r*u-d*t)*x,e[2]=(l*t-r*o)*x,e[3]=m*x,e[4]=(d*i-r*c)*x,e[5]=(r*s-l*i)*x,e[6]=g*x,e[7]=(t*c-u*i)*x,e[8]=(o*i-t*s)*x,this}transpose(){let e;const i=this.elements;return e=i[1],i[1]=i[3],i[3]=e,e=i[2],i[2]=i[6],i[6]=e,e=i[5],i[5]=i[7],i[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const i=this.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this}setUvTransform(e,i,t,r,s,o,l){const c=Math.cos(s),u=Math.sin(s);return this.set(t*c,t*u,-t*(c*o+u*l)+o+e,-r*u,r*c,-r*(-u*o+c*l)+l+i,0,0,1),this}scale(e,i){return this.premultiply(KS.makeScale(e,i)),this}rotate(e){return this.premultiply(KS.makeRotation(-e)),this}translate(e,i){return this.premultiply(KS.makeTranslation(e,i)),this}makeTranslation(e,i){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,i,0,0,1),this}makeRotation(e){const i=Math.cos(e),t=Math.sin(e);return this.set(i,-t,0,t,i,0,0,0,1),this}makeScale(e,i){return this.set(e,0,0,0,i,0,0,0,1),this}equals(e){const i=this.elements,t=e.elements;for(let r=0;r<9;r++)if(i[r]!==t[r])return!1;return!0}fromArray(e,i=0){for(let t=0;t<9;t++)this.elements[t]=e[t+i];return this}toArray(e=[],i=0){const t=this.elements;return e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3],e[i+4]=t[4],e[i+5]=t[5],e[i+6]=t[6],e[i+7]=t[7],e[i+8]=t[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const KS=new ui;function pF(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Oue={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mf(n,e){return new Oue[n](e)}function tv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function mF(){const n=tv("canvas");return n.style.display="block",n}const NI={};function gF(n){n in NI||(NI[n]=!0,console.warn(n))}const $I=new ui().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),VI=new ui().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),k1={[uc]:{transfer:q0,primaries:Z0,toReference:n=>n,fromReference:n=>n},[vo]:{transfer:fn,primaries:Z0,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Gv]:{transfer:q0,primaries:K0,toReference:n=>n.applyMatrix3(VI),fromReference:n=>n.applyMatrix3($I)},[yw]:{transfer:fn,primaries:K0,toReference:n=>n.convertSRGBToLinear().applyMatrix3(VI),fromReference:n=>n.applyMatrix3($I).convertLinearToSRGB()}},wue=new Set([uc,Gv]),Ki={enabled:!0,_workingColorSpace:uc,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!wue.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,i){if(this.enabled===!1||e===i||!e||!i)return n;const t=k1[e].toReference,r=k1[i].fromReference;return r(t(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return k1[n].primaries},getTransfer:function(n){return n===Ul?q0:k1[n].transfer}};function Gf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function JS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Hd;class vF{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Hd===void 0&&(Hd=tv("canvas")),Hd.width=e.width,Hd.height=e.height;const t=Hd.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),i=Hd}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const i=tv("canvas");i.width=e.width,i.height=e.height;const t=i.getContext("2d");t.drawImage(e,0,0,e.width,e.height);const r=t.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Gf(s[o]/255)*255;return t.putImageData(r,0,0),i}else if(e.data){const i=e.data.slice(0);for(let t=0;t<i.length;t++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[t]=Math.floor(Gf(i[t]/255)*255):i[t]=Gf(i[t]);return{data:i,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _ue=0;class Vu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_ue++}),this.uuid=ko(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const t={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(eC(r[o].image)):s.push(eC(r[o]))}else s=eC(r);t.url=s}return i||(e.images[this.uuid]=t),t}}function eC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?vF.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Sue=0,Xn=class _x extends hl{constructor(e=_x.DEFAULT_IMAGE,i=_x.DEFAULT_MAPPING,t=bs,r=bs,s=Yn,o=Oa,l=Gs,c=Ca,u=_x.DEFAULT_ANISOTROPY,d=Ul){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Sue++}),this.uuid=ko(),this.name="",this.source=new Vu(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=t,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ui,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const t={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(t.userData=this.userData),i||(e.textures[this.uuid]=t),t}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wh:e.x=e.x-Math.floor(e.x);break;case bs:e.x=e.x<0?0:1;break;case fp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case wh:e.y=e.y-Math.floor(e.y);break;case bs:e.y=e.y<0?0:1;break;case fp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Xn.DEFAULT_IMAGE=null;Xn.DEFAULT_MAPPING=mw;Xn.DEFAULT_ANISOTROPY=1;class bi{constructor(e=0,i=0,t=0,r=1){bi.prototype.isVector4=!0,this.x=e,this.y=i,this.z=t,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,i,t,r){return this.x=e,this.y=i,this.z=t,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this.w=e.w+i.w,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this.w+=e.w*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this.w=e.w-i.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const i=this.x,t=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*i+o[4]*t+o[8]*r+o[12]*s,this.y=o[1]*i+o[5]*t+o[9]*r+o[13]*s,this.z=o[2]*i+o[6]*t+o[10]*r+o[14]*s,this.w=o[3]*i+o[7]*t+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const i=Math.sqrt(1-e.w*e.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/i,this.y=e.y/i,this.z=e.z/i),this}setAxisAngleFromRotationMatrix(e){let i,t,r,s;const c=e.elements,u=c[0],d=c[4],f=c[8],m=c[1],g=c[5],y=c[9],x=c[2],b=c[6],S=c[10];if(Math.abs(d-m)<.01&&Math.abs(f-x)<.01&&Math.abs(y-b)<.01){if(Math.abs(d+m)<.1&&Math.abs(f+x)<.1&&Math.abs(y+b)<.1&&Math.abs(u+g+S-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const O=(u+1)/2,k=(g+1)/2,M=(S+1)/2,E=(d+m)/4,R=(f+x)/4,P=(y+b)/4;return O>k&&O>M?O<.01?(t=0,r=.707106781,s=.707106781):(t=Math.sqrt(O),r=E/t,s=R/t):k>M?k<.01?(t=.707106781,r=0,s=.707106781):(r=Math.sqrt(k),t=E/r,s=P/r):M<.01?(t=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),t=R/s,r=P/s),this.set(t,r,s,i),this}let _=Math.sqrt((b-y)*(b-y)+(f-x)*(f-x)+(m-d)*(m-d));return Math.abs(_)<.001&&(_=1),this.x=(b-y)/_,this.y=(f-x)/_,this.z=(m-d)/_,this.w=Math.acos((u+g+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this.w=Math.max(e.w,Math.min(i.w,this.w)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this.w=Math.max(e,Math.min(i,this.w)),this}clampLength(e,i){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this.w+=(e.w-this.w)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this.z=e.z+(i.z-e.z)*t,this.w=e.w+(i.w-e.w)*t,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this.w=e[i+3],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e[i+3]=this.w,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this.w=e.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yF extends hl{constructor(e=1,i=1,t={}){super(),this.isRenderTarget=!0,this.width=e,this.height=i,this.depth=1,this.scissor=new bi(0,0,e,i),this.scissorTest=!1,this.viewport=new bi(0,0,e,i);const r={width:e,height:i,depth:1};t=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Yn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},t);const s=new Xn(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace);s.flipY=!1,s.generateMipmaps=t.generateMipmaps,s.internalFormat=t.internalFormat,this.textures=[];const o=t.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,this.depthTexture=t.depthTexture,this.samples=t.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,i,t=1){if(this.width!==e||this.height!==i||this.depth!==t){this.width=e,this.height=i,this.depth=t;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=i,this.textures[r].image.depth=t;this.dispose()}this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;const i=Object.assign({},e.texture.image);return this.texture.source=new Vu(i),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Zo extends yF{constructor(e=1,i=1,t={}){super(e,i,t),this.isWebGLRenderTarget=!0}}class bw extends Xn{constructor(e=null,i=1,t=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:i,height:t,depth:r},this.magFilter=fr,this.minFilter=fr,this.wrapR=bs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Cue extends Zo{constructor(e=1,i=1,t=1,r={}){super(e,i,r),this.isWebGLArrayRenderTarget=!0,this.depth=t,this.texture=new bw(null,e,i,t),this.texture.isRenderTargetTexture=!0}}class GE extends Xn{constructor(e=null,i=1,t=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:i,height:t,depth:r},this.magFilter=fr,this.minFilter=fr,this.wrapR=bs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kue extends Zo{constructor(e=1,i=1,t=1,r={}){super(e,i,r),this.isWebGL3DRenderTarget=!0,this.depth=t,this.texture=new GE(null,e,i,t),this.texture.isRenderTargetTexture=!0}}class ir{constructor(e=0,i=0,t=0,r=1){this.isQuaternion=!0,this._x=e,this._y=i,this._z=t,this._w=r}static slerpFlat(e,i,t,r,s,o,l){let c=t[r+0],u=t[r+1],d=t[r+2],f=t[r+3];const m=s[o+0],g=s[o+1],y=s[o+2],x=s[o+3];if(l===0){e[i+0]=c,e[i+1]=u,e[i+2]=d,e[i+3]=f;return}if(l===1){e[i+0]=m,e[i+1]=g,e[i+2]=y,e[i+3]=x;return}if(f!==x||c!==m||u!==g||d!==y){let b=1-l;const S=c*m+u*g+d*y+f*x,_=S>=0?1:-1,O=1-S*S;if(O>Number.EPSILON){const M=Math.sqrt(O),E=Math.atan2(M,S*_);b=Math.sin(b*E)/M,l=Math.sin(l*E)/M}const k=l*_;if(c=c*b+m*k,u=u*b+g*k,d=d*b+y*k,f=f*b+x*k,b===1-l){const M=1/Math.sqrt(c*c+u*u+d*d+f*f);c*=M,u*=M,d*=M,f*=M}}e[i]=c,e[i+1]=u,e[i+2]=d,e[i+3]=f}static multiplyQuaternionsFlat(e,i,t,r,s,o){const l=t[r],c=t[r+1],u=t[r+2],d=t[r+3],f=s[o],m=s[o+1],g=s[o+2],y=s[o+3];return e[i]=l*y+d*f+c*g-u*m,e[i+1]=c*y+d*m+u*f-l*g,e[i+2]=u*y+d*g+l*m-c*f,e[i+3]=d*y-l*f-c*m-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,i,t,r){return this._x=e,this._y=i,this._z=t,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,i=!0){const t=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,u=l(t/2),d=l(r/2),f=l(s/2),m=c(t/2),g=c(r/2),y=c(s/2);switch(o){case"XYZ":this._x=m*d*f+u*g*y,this._y=u*g*f-m*d*y,this._z=u*d*y+m*g*f,this._w=u*d*f-m*g*y;break;case"YXZ":this._x=m*d*f+u*g*y,this._y=u*g*f-m*d*y,this._z=u*d*y-m*g*f,this._w=u*d*f+m*g*y;break;case"ZXY":this._x=m*d*f-u*g*y,this._y=u*g*f+m*d*y,this._z=u*d*y+m*g*f,this._w=u*d*f-m*g*y;break;case"ZYX":this._x=m*d*f-u*g*y,this._y=u*g*f+m*d*y,this._z=u*d*y-m*g*f,this._w=u*d*f+m*g*y;break;case"YZX":this._x=m*d*f+u*g*y,this._y=u*g*f+m*d*y,this._z=u*d*y-m*g*f,this._w=u*d*f-m*g*y;break;case"XZY":this._x=m*d*f-u*g*y,this._y=u*g*f-m*d*y,this._z=u*d*y+m*g*f,this._w=u*d*f+m*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,i){const t=i/2,r=Math.sin(t);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){const i=e.elements,t=i[0],r=i[4],s=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],f=i[10],m=t+l+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-c)*g,this._y=(s-u)*g,this._z=(o-r)*g}else if(t>l&&t>f){const g=2*Math.sqrt(1+t-l-f);this._w=(d-c)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+u)/g}else if(l>f){const g=2*Math.sqrt(1+l-t-f);this._w=(s-u)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(c+d)/g}else{const g=2*Math.sqrt(1+f-t-l);this._w=(o-r)/g,this._x=(s+u)/g,this._y=(c+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,i){let t=e.dot(i)+1;return t<Number.EPSILON?(t=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=t):(this._x=0,this._y=-e.z,this._z=e.y,this._w=t)):(this._x=e.y*i.z-e.z*i.y,this._y=e.z*i.x-e.x*i.z,this._z=e.x*i.y-e.y*i.x,this._w=t),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Un(this.dot(e),-1,1)))}rotateTowards(e,i){const t=this.angleTo(e);if(t===0)return this;const r=Math.min(1,i/t);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,i){const t=e._x,r=e._y,s=e._z,o=e._w,l=i._x,c=i._y,u=i._z,d=i._w;return this._x=t*d+o*l+r*u-s*c,this._y=r*d+o*c+s*l-t*u,this._z=s*d+o*u+t*c-r*l,this._w=o*d-t*l-r*c-s*u,this._onChangeCallback(),this}slerp(e,i){if(i===0)return this;if(i===1)return this.copy(e);const t=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+t*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=t,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const g=1-i;return this._w=g*o+i*this._w,this._x=g*t+i*this._x,this._y=g*r+i*this._y,this._z=g*s+i*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,l),f=Math.sin((1-i)*d)/u,m=Math.sin(i*d)/u;return this._w=o*f+this._w*m,this._x=t*f+this._x*m,this._y=r*f+this._y*m,this._z=s*f+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,i,t){return this.copy(e).slerp(i,t)}random(){const e=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),t=Math.random(),r=Math.sqrt(1-t),s=Math.sqrt(t);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(i),s*Math.cos(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,i=0){return this._x=e[i],this._y=e[i+1],this._z=e[i+2],this._w=e[i+3],this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._w,e}fromBufferAttribute(e,i){return this._x=e.getX(i),this._y=e.getY(i),this._z=e.getZ(i),this._w=e.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ne{constructor(e=0,i=0,t=0){ne.prototype.isVector3=!0,this.x=e,this.y=i,this.z=t}set(e,i,t){return t===void 0&&(t=this.z),this.x=e,this.y=i,this.z=t,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,i){return this.x=e.x*i.x,this.y=e.y*i.y,this.z=e.z*i.z,this}applyEuler(e){return this.applyQuaternion(LI.setFromEuler(e))}applyAxisAngle(e,i){return this.applyQuaternion(LI.setFromAxisAngle(e,i))}applyMatrix3(e){const i=this.x,t=this.y,r=this.z,s=e.elements;return this.x=s[0]*i+s[3]*t+s[6]*r,this.y=s[1]*i+s[4]*t+s[7]*r,this.z=s[2]*i+s[5]*t+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const i=this.x,t=this.y,r=this.z,s=e.elements,o=1/(s[3]*i+s[7]*t+s[11]*r+s[15]);return this.x=(s[0]*i+s[4]*t+s[8]*r+s[12])*o,this.y=(s[1]*i+s[5]*t+s[9]*r+s[13])*o,this.z=(s[2]*i+s[6]*t+s[10]*r+s[14])*o,this}applyQuaternion(e){const i=this.x,t=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,u=2*(o*r-l*t),d=2*(l*i-s*r),f=2*(s*t-o*i);return this.x=i+c*u+o*f-l*d,this.y=t+c*d+l*u-s*f,this.z=r+c*f+s*d-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const i=this.x,t=this.y,r=this.z,s=e.elements;return this.x=s[0]*i+s[4]*t+s[8]*r,this.y=s[1]*i+s[5]*t+s[9]*r,this.z=s[2]*i+s[6]*t+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this}clampLength(e,i){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this.z=e.z+(i.z-e.z)*t,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,i){const t=e.x,r=e.y,s=e.z,o=i.x,l=i.y,c=i.z;return this.x=r*c-s*l,this.y=s*o-t*c,this.z=t*l-r*o,this}projectOnVector(e){const i=e.lengthSq();if(i===0)return this.set(0,0,0);const t=e.dot(this)/i;return this.copy(e).multiplyScalar(t)}projectOnPlane(e){return tC.copy(this).projectOnVector(e),this.sub(tC)}reflect(e){return this.sub(tC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const t=this.dot(e)/i;return Math.acos(Un(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,t=this.y-e.y,r=this.z-e.z;return i*i+t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,i,t){const r=Math.sin(i)*e;return this.x=r*Math.sin(t),this.y=Math.cos(i)*e,this.z=r*Math.cos(t),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,i,t){return this.x=e*Math.sin(i),this.y=t,this.z=e*Math.cos(i),this}setFromMatrixPosition(e){const i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(e){const i=this.setFromMatrixColumn(e,0).length(),t=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=i,this.y=t,this.z=r,this}setFromMatrixColumn(e,i){return this.fromArray(e.elements,i*4)}setFromMatrix3Column(e,i){return this.fromArray(e.elements,i*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,i=Math.random()*2-1,t=Math.sqrt(1-i*i);return this.x=t*Math.cos(e),this.y=i,this.z=t*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tC=new ne,LI=new ir;class Fr{constructor(e=new ne(1/0,1/0,1/0),i=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromArray(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i+=3)this.expandByPoint(fa.fromArray(e,i));return this}setFromBufferAttribute(e){this.makeEmpty();for(let i=0,t=e.count;i<t;i++)this.expandByPoint(fa.fromBufferAttribute(e,i));return this}setFromPoints(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){const t=fa.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,i=!1){return this.makeEmpty(),this.expandByObject(e,i)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,i=!1){e.updateWorldMatrix(!1,!1);const t=e.geometry;if(t!==void 0){const s=t.getAttribute("position");if(i===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,fa):fa.fromBufferAttribute(s,o),fa.applyMatrix4(e.matrixWorld),this.expandByPoint(fa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),T1.copy(e.boundingBox)):(t.boundingBox===null&&t.computeBoundingBox(),T1.copy(t.boundingBox)),T1.applyMatrix4(e.matrixWorld),this.union(T1)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],i);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fa),fa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let i,t;return e.normal.x>0?(i=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(i=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(i+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(i+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(i+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(i+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),i<=-e.constant&&t>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zm),M1.subVectors(this.max,zm),Gd.subVectors(e.a,zm),Yd.subVectors(e.b,zm),jd.subVectors(e.c,zm),$c.subVectors(Yd,Gd),Vc.subVectors(jd,Yd),su.subVectors(Gd,jd);let i=[0,-$c.z,$c.y,0,-Vc.z,Vc.y,0,-su.z,su.y,$c.z,0,-$c.x,Vc.z,0,-Vc.x,su.z,0,-su.x,-$c.y,$c.x,0,-Vc.y,Vc.x,0,-su.y,su.x,0];return!iC(i,Gd,Yd,jd,M1)||(i=[1,0,0,0,1,0,0,0,1],!iC(i,Gd,Yd,jd,M1))?!1:(E1.crossVectors($c,Vc),i=[E1.x,E1.y,E1.z],iC(i,Gd,Yd,jd,M1))}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(kl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const kl=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],fa=new ne,T1=new Fr,Gd=new ne,Yd=new ne,jd=new ne,$c=new ne,Vc=new ne,su=new ne,zm=new ne,M1=new ne,E1=new ne,ou=new ne;function iC(n,e,i,t,r){for(let s=0,o=n.length-3;s<=o;s+=3){ou.fromArray(n,s);const l=r.x*Math.abs(ou.x)+r.y*Math.abs(ou.y)+r.z*Math.abs(ou.z),c=e.dot(ou),u=i.dot(ou),d=t.dot(ou);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>l)return!1}return!0}const Tue=new Fr,Xm=new ne,nC=new ne;class zr{constructor(e=new ne,i=-1){this.isSphere=!0,this.center=e,this.radius=i}set(e,i){return this.center.copy(e),this.radius=i,this}setFromPoints(e,i){const t=this.center;i!==void 0?t.copy(i):Tue.setFromPoints(e).getCenter(t);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,t.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const i=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=i*i}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,i){const t=this.center.distanceToSquared(e);return i.copy(e),t>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xm.subVectors(e,this.center);const i=Xm.lengthSq();if(i>this.radius*this.radius){const t=Math.sqrt(i),r=(t-this.radius)*.5;this.center.addScaledVector(Xm,r/t),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(nC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Xm.copy(e.center).add(nC)),this.expandByPoint(Xm.copy(e.center).sub(nC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Tl=new ne,rC=new ne,P1=new ne,Lc=new ne,sC=new ne,A1=new ne,oC=new ne;class bd{constructor(e=new ne,i=new ne(0,0,-1)){this.origin=e,this.direction=i}set(e,i){return this.origin.copy(e),this.direction.copy(i),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,i){return i.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tl)),this}closestPointToPoint(e,i){i.subVectors(e,this.origin);const t=i.dot(this.direction);return t<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,t)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const i=Tl.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(Tl.copy(this.origin).addScaledVector(this.direction,i),Tl.distanceToSquared(e))}distanceSqToSegment(e,i,t,r){rC.copy(e).add(i).multiplyScalar(.5),P1.copy(i).sub(e).normalize(),Lc.copy(this.origin).sub(rC);const s=e.distanceTo(i)*.5,o=-this.direction.dot(P1),l=Lc.dot(this.direction),c=-Lc.dot(P1),u=Lc.lengthSq(),d=Math.abs(1-o*o);let f,m,g,y;if(d>0)if(f=o*c-l,m=o*l-c,y=s*d,f>=0)if(m>=-y)if(m<=y){const x=1/d;f*=x,m*=x,g=f*(f+o*m+2*l)+m*(o*f+m+2*c)+u}else m=s,f=Math.max(0,-(o*m+l)),g=-f*f+m*(m+2*c)+u;else m=-s,f=Math.max(0,-(o*m+l)),g=-f*f+m*(m+2*c)+u;else m<=-y?(f=Math.max(0,-(-o*s+l)),m=f>0?-s:Math.min(Math.max(-s,-c),s),g=-f*f+m*(m+2*c)+u):m<=y?(f=0,m=Math.min(Math.max(-s,-c),s),g=m*(m+2*c)+u):(f=Math.max(0,-(o*s+l)),m=f>0?s:Math.min(Math.max(-s,-c),s),g=-f*f+m*(m+2*c)+u);else m=o>0?-s:s,f=Math.max(0,-(o*m+l)),g=-f*f+m*(m+2*c)+u;return t&&t.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(rC).addScaledVector(P1,m),g}intersectSphere(e,i){Tl.subVectors(e.center,this.origin);const t=Tl.dot(this.direction),r=Tl.dot(Tl)-t*t,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=t-o,c=t+o;return c<0?null:l<0?this.at(c,i):this.at(l,i)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const i=e.normal.dot(this.direction);if(i===0)return e.distanceToPoint(this.origin)===0?0:null;const t=-(this.origin.dot(e.normal)+e.constant)/i;return t>=0?t:null}intersectPlane(e,i){const t=this.distanceToPlane(e);return t===null?null:this.at(t,i)}intersectsPlane(e){const i=e.distanceToPoint(this.origin);return i===0||e.normal.dot(this.direction)*i<0}intersectBox(e,i){let t,r,s,o,l,c;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,m=this.origin;return u>=0?(t=(e.min.x-m.x)*u,r=(e.max.x-m.x)*u):(t=(e.max.x-m.x)*u,r=(e.min.x-m.x)*u),d>=0?(s=(e.min.y-m.y)*d,o=(e.max.y-m.y)*d):(s=(e.max.y-m.y)*d,o=(e.min.y-m.y)*d),t>o||s>r||((s>t||isNaN(t))&&(t=s),(o<r||isNaN(r))&&(r=o),f>=0?(l=(e.min.z-m.z)*f,c=(e.max.z-m.z)*f):(l=(e.max.z-m.z)*f,c=(e.min.z-m.z)*f),t>c||l>r)||((l>t||t!==t)&&(t=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(t>=0?t:r,i)}intersectsBox(e){return this.intersectBox(e,Tl)!==null}intersectTriangle(e,i,t,r,s){sC.subVectors(i,e),A1.subVectors(t,e),oC.crossVectors(sC,A1);let o=this.direction.dot(oC),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Lc.subVectors(this.origin,e);const c=l*this.direction.dot(A1.crossVectors(Lc,A1));if(c<0)return null;const u=l*this.direction.dot(sC.cross(Lc));if(u<0||c+u>o)return null;const d=-l*Lc.dot(oC);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pt{constructor(e,i,t,r,s,o,l,c,u,d,f,m,g,y,x,b){pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,i,t,r,s,o,l,c,u,d,f,m,g,y,x,b)}set(e,i,t,r,s,o,l,c,u,d,f,m,g,y,x,b){const S=this.elements;return S[0]=e,S[4]=i,S[8]=t,S[12]=r,S[1]=s,S[5]=o,S[9]=l,S[13]=c,S[2]=u,S[6]=d,S[10]=f,S[14]=m,S[3]=g,S[7]=y,S[11]=x,S[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pt().fromArray(this.elements)}copy(e){const i=this.elements,t=e.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this}copyPosition(e){const i=this.elements,t=e.elements;return i[12]=t[12],i[13]=t[13],i[14]=t[14],this}setFromMatrix3(e){const i=e.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(e,i,t){return e.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(e,i,t){return this.set(e.x,i.x,t.x,0,e.y,i.y,t.y,0,e.z,i.z,t.z,0,0,0,0,1),this}extractRotation(e){const i=this.elements,t=e.elements,r=1/qd.setFromMatrixColumn(e,0).length(),s=1/qd.setFromMatrixColumn(e,1).length(),o=1/qd.setFromMatrixColumn(e,2).length();return i[0]=t[0]*r,i[1]=t[1]*r,i[2]=t[2]*r,i[3]=0,i[4]=t[4]*s,i[5]=t[5]*s,i[6]=t[6]*s,i[7]=0,i[8]=t[8]*o,i[9]=t[9]*o,i[10]=t[10]*o,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(e){const i=this.elements,t=e.x,r=e.y,s=e.z,o=Math.cos(t),l=Math.sin(t),c=Math.cos(r),u=Math.sin(r),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const m=o*d,g=o*f,y=l*d,x=l*f;i[0]=c*d,i[4]=-c*f,i[8]=u,i[1]=g+y*u,i[5]=m-x*u,i[9]=-l*c,i[2]=x-m*u,i[6]=y+g*u,i[10]=o*c}else if(e.order==="YXZ"){const m=c*d,g=c*f,y=u*d,x=u*f;i[0]=m+x*l,i[4]=y*l-g,i[8]=o*u,i[1]=o*f,i[5]=o*d,i[9]=-l,i[2]=g*l-y,i[6]=x+m*l,i[10]=o*c}else if(e.order==="ZXY"){const m=c*d,g=c*f,y=u*d,x=u*f;i[0]=m-x*l,i[4]=-o*f,i[8]=y+g*l,i[1]=g+y*l,i[5]=o*d,i[9]=x-m*l,i[2]=-o*u,i[6]=l,i[10]=o*c}else if(e.order==="ZYX"){const m=o*d,g=o*f,y=l*d,x=l*f;i[0]=c*d,i[4]=y*u-g,i[8]=m*u+x,i[1]=c*f,i[5]=x*u+m,i[9]=g*u-y,i[2]=-u,i[6]=l*c,i[10]=o*c}else if(e.order==="YZX"){const m=o*c,g=o*u,y=l*c,x=l*u;i[0]=c*d,i[4]=x-m*f,i[8]=y*f+g,i[1]=f,i[5]=o*d,i[9]=-l*d,i[2]=-u*d,i[6]=g*f+y,i[10]=m-x*f}else if(e.order==="XZY"){const m=o*c,g=o*u,y=l*c,x=l*u;i[0]=c*d,i[4]=-f,i[8]=u*d,i[1]=m*f+x,i[5]=o*d,i[9]=g*f-y,i[2]=y*f-g,i[6]=l*d,i[10]=x*f+m}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Mue,e,Eue)}lookAt(e,i,t){const r=this.elements;return lo.subVectors(e,i),lo.lengthSq()===0&&(lo.z=1),lo.normalize(),Bc.crossVectors(t,lo),Bc.lengthSq()===0&&(Math.abs(t.z)===1?lo.x+=1e-4:lo.z+=1e-4,lo.normalize(),Bc.crossVectors(t,lo)),Bc.normalize(),R1.crossVectors(lo,Bc),r[0]=Bc.x,r[4]=R1.x,r[8]=lo.x,r[1]=Bc.y,r[5]=R1.y,r[9]=lo.y,r[2]=Bc.z,r[6]=R1.z,r[10]=lo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const t=e.elements,r=i.elements,s=this.elements,o=t[0],l=t[4],c=t[8],u=t[12],d=t[1],f=t[5],m=t[9],g=t[13],y=t[2],x=t[6],b=t[10],S=t[14],_=t[3],O=t[7],k=t[11],M=t[15],E=r[0],R=r[4],P=r[8],I=r[12],T=r[1],N=r[5],L=r[9],D=r[13],$=r[2],B=r[6],U=r[10],Q=r[14],Z=r[3],te=r[7],ce=r[11],pe=r[15];return s[0]=o*E+l*T+c*$+u*Z,s[4]=o*R+l*N+c*B+u*te,s[8]=o*P+l*L+c*U+u*ce,s[12]=o*I+l*D+c*Q+u*pe,s[1]=d*E+f*T+m*$+g*Z,s[5]=d*R+f*N+m*B+g*te,s[9]=d*P+f*L+m*U+g*ce,s[13]=d*I+f*D+m*Q+g*pe,s[2]=y*E+x*T+b*$+S*Z,s[6]=y*R+x*N+b*B+S*te,s[10]=y*P+x*L+b*U+S*ce,s[14]=y*I+x*D+b*Q+S*pe,s[3]=_*E+O*T+k*$+M*Z,s[7]=_*R+O*N+k*B+M*te,s[11]=_*P+O*L+k*U+M*ce,s[15]=_*I+O*D+k*Q+M*pe,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[4]*=e,i[8]*=e,i[12]*=e,i[1]*=e,i[5]*=e,i[9]*=e,i[13]*=e,i[2]*=e,i[6]*=e,i[10]*=e,i[14]*=e,i[3]*=e,i[7]*=e,i[11]*=e,i[15]*=e,this}determinant(){const e=this.elements,i=e[0],t=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],u=e[13],d=e[2],f=e[6],m=e[10],g=e[14],y=e[3],x=e[7],b=e[11],S=e[15];return y*(+s*c*f-r*u*f-s*l*m+t*u*m+r*l*g-t*c*g)+x*(+i*c*g-i*u*m+s*o*m-r*o*g+r*u*d-s*c*d)+b*(+i*u*f-i*l*g-s*o*f+t*o*g+s*l*d-t*u*d)+S*(-r*l*d-i*c*f+i*l*m+r*o*f-t*o*m+t*c*d)}transpose(){const e=this.elements;let i;return i=e[1],e[1]=e[4],e[4]=i,i=e[2],e[2]=e[8],e[8]=i,i=e[6],e[6]=e[9],e[9]=i,i=e[3],e[3]=e[12],e[12]=i,i=e[7],e[7]=e[13],e[13]=i,i=e[11],e[11]=e[14],e[14]=i,this}setPosition(e,i,t){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=i,r[14]=t),this}invert(){const e=this.elements,i=e[0],t=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],m=e[10],g=e[11],y=e[12],x=e[13],b=e[14],S=e[15],_=f*b*u-x*m*u+x*c*g-l*b*g-f*c*S+l*m*S,O=y*m*u-d*b*u-y*c*g+o*b*g+d*c*S-o*m*S,k=d*x*u-y*f*u+y*l*g-o*x*g-d*l*S+o*f*S,M=y*f*c-d*x*c-y*l*m+o*x*m+d*l*b-o*f*b,E=i*_+t*O+r*k+s*M;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/E;return e[0]=_*R,e[1]=(x*m*s-f*b*s-x*r*g+t*b*g+f*r*S-t*m*S)*R,e[2]=(l*b*s-x*c*s+x*r*u-t*b*u-l*r*S+t*c*S)*R,e[3]=(f*c*s-l*m*s-f*r*u+t*m*u+l*r*g-t*c*g)*R,e[4]=O*R,e[5]=(d*b*s-y*m*s+y*r*g-i*b*g-d*r*S+i*m*S)*R,e[6]=(y*c*s-o*b*s-y*r*u+i*b*u+o*r*S-i*c*S)*R,e[7]=(o*m*s-d*c*s+d*r*u-i*m*u-o*r*g+i*c*g)*R,e[8]=k*R,e[9]=(y*f*s-d*x*s-y*t*g+i*x*g+d*t*S-i*f*S)*R,e[10]=(o*x*s-y*l*s+y*t*u-i*x*u-o*t*S+i*l*S)*R,e[11]=(d*l*s-o*f*s-d*t*u+i*f*u+o*t*g-i*l*g)*R,e[12]=M*R,e[13]=(d*x*r-y*f*r+y*t*m-i*x*m-d*t*b+i*f*b)*R,e[14]=(y*l*r-o*x*r-y*t*c+i*x*c+o*t*b-i*l*b)*R,e[15]=(o*f*r-d*l*r+d*t*c-i*f*c-o*t*m+i*l*m)*R,this}scale(e){const i=this.elements,t=e.x,r=e.y,s=e.z;return i[0]*=t,i[4]*=r,i[8]*=s,i[1]*=t,i[5]*=r,i[9]*=s,i[2]*=t,i[6]*=r,i[10]*=s,i[3]*=t,i[7]*=r,i[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],t=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(i,t,r))}makeTranslation(e,i,t){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,i,0,0,1,t,0,0,0,1),this}makeRotationX(e){const i=Math.cos(e),t=Math.sin(e);return this.set(1,0,0,0,0,i,-t,0,0,t,i,0,0,0,0,1),this}makeRotationY(e){const i=Math.cos(e),t=Math.sin(e);return this.set(i,0,t,0,0,1,0,0,-t,0,i,0,0,0,0,1),this}makeRotationZ(e){const i=Math.cos(e),t=Math.sin(e);return this.set(i,-t,0,0,t,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,i){const t=Math.cos(i),r=Math.sin(i),s=1-t,o=e.x,l=e.y,c=e.z,u=s*o,d=s*l;return this.set(u*o+t,u*l-r*c,u*c+r*l,0,u*l+r*c,d*l+t,d*c-r*o,0,u*c-r*l,d*c+r*o,s*c*c+t,0,0,0,0,1),this}makeScale(e,i,t){return this.set(e,0,0,0,0,i,0,0,0,0,t,0,0,0,0,1),this}makeShear(e,i,t,r,s,o){return this.set(1,t,s,0,e,1,o,0,i,r,1,0,0,0,0,1),this}compose(e,i,t){const r=this.elements,s=i._x,o=i._y,l=i._z,c=i._w,u=s+s,d=o+o,f=l+l,m=s*u,g=s*d,y=s*f,x=o*d,b=o*f,S=l*f,_=c*u,O=c*d,k=c*f,M=t.x,E=t.y,R=t.z;return r[0]=(1-(x+S))*M,r[1]=(g+k)*M,r[2]=(y-O)*M,r[3]=0,r[4]=(g-k)*E,r[5]=(1-(m+S))*E,r[6]=(b+_)*E,r[7]=0,r[8]=(y+O)*R,r[9]=(b-_)*R,r[10]=(1-(m+x))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,i,t){const r=this.elements;let s=qd.set(r[0],r[1],r[2]).length();const o=qd.set(r[4],r[5],r[6]).length(),l=qd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],pa.copy(this);const u=1/s,d=1/o,f=1/l;return pa.elements[0]*=u,pa.elements[1]*=u,pa.elements[2]*=u,pa.elements[4]*=d,pa.elements[5]*=d,pa.elements[6]*=d,pa.elements[8]*=f,pa.elements[9]*=f,pa.elements[10]*=f,i.setFromRotationMatrix(pa),t.x=s,t.y=o,t.z=l,this}makePerspective(e,i,t,r,s,o,l=Ka){const c=this.elements,u=2*s/(i-e),d=2*s/(t-r),f=(i+e)/(i-e),m=(t+r)/(t-r);let g,y;if(l===Ka)g=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(l===ev)g=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,i,t,r,s,o,l=Ka){const c=this.elements,u=1/(i-e),d=1/(t-r),f=1/(o-s),m=(i+e)*u,g=(t+r)*d;let y,x;if(l===Ka)y=(o+s)*f,x=-2*f;else if(l===ev)y=s*f,x=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-g,c[2]=0,c[6]=0,c[10]=x,c[14]=-y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const i=this.elements,t=e.elements;for(let r=0;r<16;r++)if(i[r]!==t[r])return!1;return!0}fromArray(e,i=0){for(let t=0;t<16;t++)this.elements[t]=e[t+i];return this}toArray(e=[],i=0){const t=this.elements;return e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3],e[i+4]=t[4],e[i+5]=t[5],e[i+6]=t[6],e[i+7]=t[7],e[i+8]=t[8],e[i+9]=t[9],e[i+10]=t[10],e[i+11]=t[11],e[i+12]=t[12],e[i+13]=t[13],e[i+14]=t[14],e[i+15]=t[15],e}}const qd=new ne,pa=new pt,Mue=new ne(0,0,0),Eue=new ne(1,1,1),Bc=new ne,R1=new ne,lo=new ne,BI=new pt,UI=new ir;class pr{constructor(e=0,i=0,t=0,r=pr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=t,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,t,r=this._order){return this._x=e,this._y=i,this._z=t,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,t=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],u=r[5],d=r[9],f=r[2],m=r[6],g=r[10];switch(i){case"XYZ":this._y=Math.asin(Un(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Un(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Un(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Un(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Un(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-Un(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,t===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,t){return BI.makeRotationFromQuaternion(e),this.setFromRotationMatrix(BI,i,t)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return UI.setFromEuler(this),this.setFromQuaternion(UI,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}pr.DEFAULT_ORDER="XYZ";class xw{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Pue=0;const FI=new ne,Zd=new ir,Ml=new pt,I1=new ne,Wm=new ne,Aue=new ne,Rue=new ir,zI=new ne(1,0,0),XI=new ne(0,1,0),WI=new ne(0,0,1),QI={type:"added"},Iue={type:"removed"},Kd={type:"childadded",child:null},aC={type:"childremoved",child:null};class Ii extends hl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pue++}),this.uuid=ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ii.DEFAULT_UP.clone();const e=new ne,i=new pr,t=new ir,r=new ne(1,1,1);function s(){t.setFromEuler(i,!1)}function o(){i.setFromQuaternion(t,void 0,!1)}i._onChange(s),t._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pt},normalMatrix:{value:new ui}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=Ii.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new xw,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Zd.setFromAxisAngle(e,i),this.quaternion.multiply(Zd),this}rotateOnWorldAxis(e,i){return Zd.setFromAxisAngle(e,i),this.quaternion.premultiply(Zd),this}rotateX(e){return this.rotateOnAxis(zI,e)}rotateY(e){return this.rotateOnAxis(XI,e)}rotateZ(e){return this.rotateOnAxis(WI,e)}translateOnAxis(e,i){return FI.copy(e).applyQuaternion(this.quaternion),this.position.add(FI.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(zI,e)}translateY(e){return this.translateOnAxis(XI,e)}translateZ(e){return this.translateOnAxis(WI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ml.copy(this.matrixWorld).invert())}lookAt(e,i,t){e.isVector3?I1.copy(e):I1.set(e,i,t);const r=this.parent;this.updateWorldMatrix(!0,!1),Wm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ml.lookAt(Wm,I1,this.up):Ml.lookAt(I1,Wm,this.up),this.quaternion.setFromRotationMatrix(Ml),r&&(Ml.extractRotation(r.matrixWorld),Zd.setFromRotationMatrix(Ml),this.quaternion.premultiply(Zd.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(QI),Kd.child=e,this.dispatchEvent(Kd),Kd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(Iue),aC.child=e,this.dispatchEvent(aC),aC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ml.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ml.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ml),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(QI),Kd.child=e,this.dispatchEvent(Kd),Kd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let t=0,r=this.children.length;t<r;t++){const o=this.children[t].getObjectByProperty(e,i);if(o!==void 0)return o}}getObjectsByProperty(e,i,t=[]){this[e]===i&&t.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,i,t);return t}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wm,e,Aue),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wm,Rue,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);const i=this.children;for(let t=0,r=i.length;t<r;t++)i[t].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const i=this.children;for(let t=0,r=i.length;t<r;t++)i[t].traverseVisible(e)}traverseAncestors(e){const i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const i=this.children;for(let t=0,r=i.length;t<r;t++){const s=i[t];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,i){const t=this.parent;if(e===!0&&t!==null&&t.matrixWorldAutoUpdate===!0&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const i=e===void 0||typeof e=="string",t={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const f=c[u];s(e.shapes,f)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(i){const l=o(e.geometries),c=o(e.materials),u=o(e.textures),d=o(e.images),f=o(e.shapes),m=o(e.skeletons),g=o(e.animations),y=o(e.nodes);l.length>0&&(t.geometries=l),c.length>0&&(t.materials=c),u.length>0&&(t.textures=u),d.length>0&&(t.images=d),f.length>0&&(t.shapes=f),m.length>0&&(t.skeletons=m),g.length>0&&(t.animations=g),y.length>0&&(t.nodes=y)}return t.object=r,t;function o(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let t=0;t<e.children.length;t++){const r=e.children[t];this.add(r.clone())}return this}}Ii.DEFAULT_UP=new ne(0,1,0);Ii.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ma=new ne,El=new ne,lC=new ne,Pl=new ne,Jd=new ne,ef=new ne,HI=new ne,cC=new ne,hC=new ne,uC=new ne;class Ws{constructor(e=new ne,i=new ne,t=new ne){this.a=e,this.b=i,this.c=t}static getNormal(e,i,t,r){r.subVectors(t,i),ma.subVectors(e,i),r.cross(ma);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,i,t,r,s){ma.subVectors(r,i),El.subVectors(t,i),lC.subVectors(e,i);const o=ma.dot(ma),l=ma.dot(El),c=ma.dot(lC),u=El.dot(El),d=El.dot(lC),f=o*u-l*l;if(f===0)return s.set(0,0,0),null;const m=1/f,g=(u*c-l*d)*m,y=(o*d-l*c)*m;return s.set(1-g-y,y,g)}static containsPoint(e,i,t,r){return this.getBarycoord(e,i,t,r,Pl)===null?!1:Pl.x>=0&&Pl.y>=0&&Pl.x+Pl.y<=1}static getInterpolation(e,i,t,r,s,o,l,c){return this.getBarycoord(e,i,t,r,Pl)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Pl.x),c.addScaledVector(o,Pl.y),c.addScaledVector(l,Pl.z),c)}static isFrontFacing(e,i,t,r){return ma.subVectors(t,i),El.subVectors(e,i),ma.cross(El).dot(r)<0}set(e,i,t){return this.a.copy(e),this.b.copy(i),this.c.copy(t),this}setFromPointsAndIndices(e,i,t,r){return this.a.copy(e[i]),this.b.copy(e[t]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,i,t,r){return this.a.fromBufferAttribute(e,i),this.b.fromBufferAttribute(e,t),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ma.subVectors(this.c,this.b),El.subVectors(this.a,this.b),ma.cross(El).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ws.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return Ws.getBarycoord(e,this.a,this.b,this.c,i)}getInterpolation(e,i,t,r,s){return Ws.getInterpolation(e,this.a,this.b,this.c,i,t,r,s)}containsPoint(e){return Ws.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ws.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,i){const t=this.a,r=this.b,s=this.c;let o,l;Jd.subVectors(r,t),ef.subVectors(s,t),cC.subVectors(e,t);const c=Jd.dot(cC),u=ef.dot(cC);if(c<=0&&u<=0)return i.copy(t);hC.subVectors(e,r);const d=Jd.dot(hC),f=ef.dot(hC);if(d>=0&&f<=d)return i.copy(r);const m=c*f-d*u;if(m<=0&&c>=0&&d<=0)return o=c/(c-d),i.copy(t).addScaledVector(Jd,o);uC.subVectors(e,s);const g=Jd.dot(uC),y=ef.dot(uC);if(y>=0&&g<=y)return i.copy(s);const x=g*u-c*y;if(x<=0&&u>=0&&y<=0)return l=u/(u-y),i.copy(t).addScaledVector(ef,l);const b=d*y-g*f;if(b<=0&&f-d>=0&&g-y>=0)return HI.subVectors(s,r),l=(f-d)/(f-d+(g-y)),i.copy(r).addScaledVector(HI,l);const S=1/(b+x+m);return o=x*S,l=m*S,i.copy(t).addScaledVector(Jd,o).addScaledVector(ef,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const bF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Uc={h:0,s:0,l:0},D1={h:0,s:0,l:0};function dC(n,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(e-n)*6*i:i<1/2?e:i<2/3?n+(e-n)*6*(2/3-i):n}let it=class{constructor(e,i,t){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,i,t)}set(e,i,t){if(i===void 0&&t===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,i,t);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=vo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ki.toWorkingColorSpace(this,i),this}setRGB(e,i,t,r=Ki.workingColorSpace){return this.r=e,this.g=i,this.b=t,Ki.toWorkingColorSpace(this,r),this}setHSL(e,i,t,r=Ki.workingColorSpace){if(e=HE(e,1),i=Un(i,0,1),t=Un(t,0,1),i===0)this.r=this.g=this.b=t;else{const s=t<=.5?t*(1+i):t+i-t*i,o=2*t-s;this.r=dC(o,s,e+1/3),this.g=dC(o,s,e),this.b=dC(o,s,e-1/3)}return Ki.toWorkingColorSpace(this,r),this}setStyle(e,i=vo){function t(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return t(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,i);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return t(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,i);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return t(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,i);if(o===6)return this.setHex(parseInt(s,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e,i=vo){const t=bF[e.toLowerCase()];return t!==void 0?this.setHex(t,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gf(e.r),this.g=Gf(e.g),this.b=Gf(e.b),this}copyLinearToSRGB(e){return this.r=JS(e.r),this.g=JS(e.g),this.b=JS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vo){return Ki.fromWorkingColorSpace(jr.copy(this),e),Math.round(Un(jr.r*255,0,255))*65536+Math.round(Un(jr.g*255,0,255))*256+Math.round(Un(jr.b*255,0,255))}getHexString(e=vo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=Ki.workingColorSpace){Ki.fromWorkingColorSpace(jr.copy(this),i);const t=jr.r,r=jr.g,s=jr.b,o=Math.max(t,r,s),l=Math.min(t,r,s);let c,u;const d=(l+o)/2;if(l===o)c=0,u=0;else{const f=o-l;switch(u=d<=.5?f/(o+l):f/(2-o-l),o){case t:c=(r-s)/f+(r<s?6:0);break;case r:c=(s-t)/f+2;break;case s:c=(t-r)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,i=Ki.workingColorSpace){return Ki.fromWorkingColorSpace(jr.copy(this),i),e.r=jr.r,e.g=jr.g,e.b=jr.b,e}getStyle(e=vo){Ki.fromWorkingColorSpace(jr.copy(this),e);const i=jr.r,t=jr.g,r=jr.b;return e!==vo?`color(${e} ${i.toFixed(3)} ${t.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(t*255)},${Math.round(r*255)})`}offsetHSL(e,i,t){return this.getHSL(Uc),this.setHSL(Uc.h+e,Uc.s+i,Uc.l+t)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,t){return this.r=e.r+(i.r-e.r)*t,this.g=e.g+(i.g-e.g)*t,this.b=e.b+(i.b-e.b)*t,this}lerpHSL(e,i){this.getHSL(Uc),e.getHSL(D1);const t=_0(Uc.h,D1.h,i),r=_0(Uc.s,D1.s,i),s=_0(Uc.l,D1.l,i);return this.setHSL(t,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const i=this.r,t=this.g,r=this.b,s=e.elements;return this.r=s[0]*i+s[3]*t+s[6]*r,this.g=s[1]*i+s[4]*t+s[7]*r,this.b=s[2]*i+s[5]*t+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const jr=new it;it.NAMES=bF;let Due=0;class ns extends hl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Due++}),this.uuid=ko(),this.name="",this.type="Material",this.blending=Gu,this.side=tc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=oO,this.blendDst=aO,this.blendEquation=ih,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new it(0,0,0),this.blendAlpha=0,this.depthFunc=G0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_u,this.stencilZFail=_u,this.stencilZPass=_u,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const i in e){const t=e[i];if(t===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const r=this[i];if(r===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(t):r&&r.isVector3&&t&&t.isVector3?r.copy(t):this[i]=t}}toJSON(e){const i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});const t={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(t.dispersion=this.dispersion),this.iridescence!==void 0&&(t.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(t.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(t.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(t.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(t.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(t.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(t.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(t.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(e).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapRotation!==void 0&&(t.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==Gu&&(t.blending=this.blending),this.side!==tc&&(t.side=this.side),this.vertexColors===!0&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=!0),this.blendSrc!==oO&&(t.blendSrc=this.blendSrc),this.blendDst!==aO&&(t.blendDst=this.blendDst),this.blendEquation!==ih&&(t.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(t.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(t.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(t.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(t.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(t.blendAlpha=this.blendAlpha),this.depthFunc!==G0&&(t.depthFunc=this.depthFunc),this.depthTest===!1&&(t.depthTest=this.depthTest),this.depthWrite===!1&&(t.depthWrite=this.depthWrite),this.colorWrite===!1&&(t.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(t.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==dT&&(t.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(t.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(t.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_u&&(t.stencilFail=this.stencilFail),this.stencilZFail!==_u&&(t.stencilZFail=this.stencilZFail),this.stencilZPass!==_u&&(t.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(t.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaHash===!0&&(t.alphaHash=!0),this.alphaToCoverage===!0&&(t.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=!0),this.forceSinglePass===!0&&(t.forceSinglePass=!0),this.wireframe===!0&&(t.wireframe=!0),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),Object.keys(this.userData).length>0&&(t.userData=this.userData);function r(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(i){const s=r(e.textures),o=r(e.images);s.length>0&&(t.textures=s),o.length>0&&(t.images=o)}return t}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const i=e.clippingPlanes;let t=null;if(i!==null){const r=i.length;t=new Array(r);for(let s=0;s!==r;++s)t[s]=i[s].clone()}return this.clippingPlanes=t,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ma extends ns{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pr,this.combine=Hv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fl=Nue();function Nue(){const n=new ArrayBuffer(4),e=new Float32Array(n),i=new Uint32Array(n),t=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(t[c]=0,t[c|256]=32768,r[c]=24,r[c|256]=24):u<-14?(t[c]=1024>>-u-14,t[c|256]=1024>>-u-14|32768,r[c]=-u-1,r[c|256]=-u-1):u<=15?(t[c]=u+15<<10,t[c|256]=u+15<<10|32768,r[c]=13,r[c|256]=13):u<128?(t[c]=31744,t[c|256]=64512,r[c]=24,r[c|256]=24):(t[c]=31744,t[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[c]=u|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:i,baseTable:t,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Ns(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Un(n,-65504,65504),Fl.floatView[0]=n;const e=Fl.uint32View[0],i=e>>23&511;return Fl.baseTable[i]+((e&8388607)>>Fl.shiftTable[i])}function o0(n){const e=n>>10;return Fl.uint32View[0]=Fl.mantissaTable[Fl.offsetTable[e]+(n&1023)]+Fl.exponentTable[e],Fl.floatView[0]}const $ue={toHalfFloat:Ns,fromHalfFloat:o0},Jn=new ne,N1=new ze;class Ri{constructor(e,i,t=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=e!==void 0?e.length/i:0,this.normalized=t,this.usage=J0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Xo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return gF("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,i,t){e*=this.itemSize,t*=i.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=i.array[t+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let i=0,t=this.count;i<t;i++)N1.fromBufferAttribute(this,i),N1.applyMatrix3(e),this.setXY(i,N1.x,N1.y);else if(this.itemSize===3)for(let i=0,t=this.count;i<t;i++)Jn.fromBufferAttribute(this,i),Jn.applyMatrix3(e),this.setXYZ(i,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let i=0,t=this.count;i<t;i++)Jn.fromBufferAttribute(this,i),Jn.applyMatrix4(e),this.setXYZ(i,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let i=0,t=this.count;i<t;i++)Jn.fromBufferAttribute(this,i),Jn.applyNormalMatrix(e),this.setXYZ(i,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let i=0,t=this.count;i<t;i++)Jn.fromBufferAttribute(this,i),Jn.transformDirection(e),this.setXYZ(i,Jn.x,Jn.y,Jn.z);return this}set(e,i=0){return this.array.set(e,i),this}getComponent(e,i){let t=this.array[e*this.itemSize+i];return this.normalized&&(t=vs(t,this.array)),t}setComponent(e,i,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize+i]=t,this}getX(e){let i=this.array[e*this.itemSize];return this.normalized&&(i=vs(i,this.array)),i}setX(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize]=i,this}getY(e){let i=this.array[e*this.itemSize+1];return this.normalized&&(i=vs(i,this.array)),i}setY(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize+1]=i,this}getZ(e){let i=this.array[e*this.itemSize+2];return this.normalized&&(i=vs(i,this.array)),i}setZ(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize+2]=i,this}getW(e){let i=this.array[e*this.itemSize+3];return this.normalized&&(i=vs(i,this.array)),i}setW(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize+3]=i,this}setXY(e,i,t){return e*=this.itemSize,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array)),this.array[e+0]=i,this.array[e+1]=t,this}setXYZ(e,i,t,r){return e*=this.itemSize,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array),r=pi(r,this.array)),this.array[e+0]=i,this.array[e+1]=t,this.array[e+2]=r,this}setXYZW(e,i,t,r,s){return e*=this.itemSize,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array),r=pi(r,this.array),s=pi(s,this.array)),this.array[e+0]=i,this.array[e+1]=t,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==J0&&(e.usage=this.usage),e}}class Vue extends Ri{constructor(e,i,t){super(new Int8Array(e),i,t)}}class Lue extends Ri{constructor(e,i,t){super(new Uint8Array(e),i,t)}}class Bue extends Ri{constructor(e,i,t){super(new Uint8ClampedArray(e),i,t)}}class Uue extends Ri{constructor(e,i,t){super(new Int16Array(e),i,t)}}class Ow extends Ri{constructor(e,i,t){super(new Uint16Array(e),i,t)}}class Fue extends Ri{constructor(e,i,t){super(new Int32Array(e),i,t)}}class YE extends Ri{constructor(e,i,t){super(new Uint32Array(e),i,t)}}class zue extends Ri{constructor(e,i,t){super(new Uint16Array(e),i,t),this.isFloat16BufferAttribute=!0}getX(e){let i=o0(this.array[e*this.itemSize]);return this.normalized&&(i=vs(i,this.array)),i}setX(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize]=Ns(i),this}getY(e){let i=o0(this.array[e*this.itemSize+1]);return this.normalized&&(i=vs(i,this.array)),i}setY(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize+1]=Ns(i),this}getZ(e){let i=o0(this.array[e*this.itemSize+2]);return this.normalized&&(i=vs(i,this.array)),i}setZ(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize+2]=Ns(i),this}getW(e){let i=o0(this.array[e*this.itemSize+3]);return this.normalized&&(i=vs(i,this.array)),i}setW(e,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize+3]=Ns(i),this}setXY(e,i,t){return e*=this.itemSize,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array)),this.array[e+0]=Ns(i),this.array[e+1]=Ns(t),this}setXYZ(e,i,t,r){return e*=this.itemSize,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array),r=pi(r,this.array)),this.array[e+0]=Ns(i),this.array[e+1]=Ns(t),this.array[e+2]=Ns(r),this}setXYZW(e,i,t,r,s){return e*=this.itemSize,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array),r=pi(r,this.array),s=pi(s,this.array)),this.array[e+0]=Ns(i),this.array[e+1]=Ns(t),this.array[e+2]=Ns(r),this.array[e+3]=Ns(s),this}}class Ct extends Ri{constructor(e,i,t){super(new Float32Array(e),i,t)}}let Xue=0;const $o=new pt,fC=new Ii,tf=new ne,co=new Fr,Qm=new Fr,Cr=new ne;class ni extends hl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Xue++}),this.uuid=ko(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pF(e)?YE:Ow)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,i){return this.attributes[e]=i,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,i,t=0){this.groups.push({start:e,count:i,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}applyMatrix4(e){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(e),i.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const s=new ui().getNormalMatrix(e);t.applyNormalMatrix(s),t.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return $o.makeRotationFromQuaternion(e),this.applyMatrix4($o),this}rotateX(e){return $o.makeRotationX(e),this.applyMatrix4($o),this}rotateY(e){return $o.makeRotationY(e),this.applyMatrix4($o),this}rotateZ(e){return $o.makeRotationZ(e),this.applyMatrix4($o),this}translate(e,i,t){return $o.makeTranslation(e,i,t),this.applyMatrix4($o),this}scale(e,i,t){return $o.makeScale(e,i,t),this.applyMatrix4($o),this}lookAt(e){return fC.lookAt(e),fC.updateMatrix(),this.applyMatrix4(fC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tf).negate(),this.translate(tf.x,tf.y,tf.z),this}setFromPoints(e){const i=[];for(let t=0,r=e.length;t<r;t++){const s=e[t];i.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fr);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),i)for(let t=0,r=i.length;t<r;t++){const s=i[t];co.setFromBufferAttribute(s),this.morphTargetsRelative?(Cr.addVectors(this.boundingBox.min,co.min),this.boundingBox.expandByPoint(Cr),Cr.addVectors(this.boundingBox.max,co.max),this.boundingBox.expandByPoint(Cr)):(this.boundingBox.expandByPoint(co.min),this.boundingBox.expandByPoint(co.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zr);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ne,1/0);return}if(e){const t=this.boundingSphere.center;if(co.setFromBufferAttribute(e),i)for(let s=0,o=i.length;s<o;s++){const l=i[s];Qm.setFromBufferAttribute(l),this.morphTargetsRelative?(Cr.addVectors(co.min,Qm.min),co.expandByPoint(Cr),Cr.addVectors(co.max,Qm.max),co.expandByPoint(Cr)):(co.expandByPoint(Qm.min),co.expandByPoint(Qm.max))}co.getCenter(t);let r=0;for(let s=0,o=e.count;s<o;s++)Cr.fromBufferAttribute(e,s),r=Math.max(r,t.distanceToSquared(Cr));if(i)for(let s=0,o=i.length;s<o;s++){const l=i[s],c=this.morphTargetsRelative;for(let u=0,d=l.count;u<d;u++)Cr.fromBufferAttribute(l,u),c&&(tf.fromBufferAttribute(e,u),Cr.add(tf)),r=Math.max(r,t.distanceToSquared(Cr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,i=this.attributes;if(e===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=i.position,r=i.normal,s=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ri(new Float32Array(4*t.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let P=0;P<t.count;P++)l[P]=new ne,c[P]=new ne;const u=new ne,d=new ne,f=new ne,m=new ze,g=new ze,y=new ze,x=new ne,b=new ne;function S(P,I,T){u.fromBufferAttribute(t,P),d.fromBufferAttribute(t,I),f.fromBufferAttribute(t,T),m.fromBufferAttribute(s,P),g.fromBufferAttribute(s,I),y.fromBufferAttribute(s,T),d.sub(u),f.sub(u),g.sub(m),y.sub(m);const N=1/(g.x*y.y-y.x*g.y);isFinite(N)&&(x.copy(d).multiplyScalar(y.y).addScaledVector(f,-g.y).multiplyScalar(N),b.copy(f).multiplyScalar(g.x).addScaledVector(d,-y.x).multiplyScalar(N),l[P].add(x),l[I].add(x),l[T].add(x),c[P].add(b),c[I].add(b),c[T].add(b))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let P=0,I=_.length;P<I;++P){const T=_[P],N=T.start,L=T.count;for(let D=N,$=N+L;D<$;D+=3)S(e.getX(D+0),e.getX(D+1),e.getX(D+2))}const O=new ne,k=new ne,M=new ne,E=new ne;function R(P){M.fromBufferAttribute(r,P),E.copy(M);const I=l[P];O.copy(I),O.sub(M.multiplyScalar(M.dot(I))).normalize(),k.crossVectors(E,I);const N=k.dot(c[P])<0?-1:1;o.setXYZW(P,O.x,O.y,O.z,N)}for(let P=0,I=_.length;P<I;++P){const T=_[P],N=T.start,L=T.count;for(let D=N,$=N+L;D<$;D+=3)R(e.getX(D+0)),R(e.getX(D+1)),R(e.getX(D+2))}}computeVertexNormals(){const e=this.index,i=this.getAttribute("position");if(i!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new Ri(new Float32Array(i.count*3),3),this.setAttribute("normal",t);else for(let m=0,g=t.count;m<g;m++)t.setXYZ(m,0,0,0);const r=new ne,s=new ne,o=new ne,l=new ne,c=new ne,u=new ne,d=new ne,f=new ne;if(e)for(let m=0,g=e.count;m<g;m+=3){const y=e.getX(m+0),x=e.getX(m+1),b=e.getX(m+2);r.fromBufferAttribute(i,y),s.fromBufferAttribute(i,x),o.fromBufferAttribute(i,b),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),l.fromBufferAttribute(t,y),c.fromBufferAttribute(t,x),u.fromBufferAttribute(t,b),l.add(d),c.add(d),u.add(d),t.setXYZ(y,l.x,l.y,l.z),t.setXYZ(x,c.x,c.y,c.z),t.setXYZ(b,u.x,u.y,u.z)}else for(let m=0,g=i.count;m<g;m+=3)r.fromBufferAttribute(i,m+0),s.fromBufferAttribute(i,m+1),o.fromBufferAttribute(i,m+2),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),t.setXYZ(m+0,d.x,d.y,d.z),t.setXYZ(m+1,d.x,d.y,d.z),t.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),t.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let i=0,t=e.count;i<t;i++)Cr.fromBufferAttribute(e,i),Cr.normalize(),e.setXYZ(i,Cr.x,Cr.y,Cr.z)}toNonIndexed(){function e(l,c){const u=l.array,d=l.itemSize,f=l.normalized,m=new u.constructor(c.length*d);let g=0,y=0;for(let x=0,b=c.length;x<b;x++){l.isInterleavedBufferAttribute?g=c[x]*l.data.stride+l.offset:g=c[x]*d;for(let S=0;S<d;S++)m[y++]=u[g++]}return new Ri(m,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new ni,t=this.index.array,r=this.attributes;for(const l in r){const c=r[l],u=e(c,t);i.setAttribute(l,u)}const s=this.morphAttributes;for(const l in s){const c=[],u=s[l];for(let d=0,f=u.length;d<f;d++){const m=u[d],g=e(m,t);c.push(g)}i.morphAttributes[l]=c}i.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const u=o[l];i.addGroup(u.start,u.count,u.materialIndex)}return i}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const i=this.index;i!==null&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const t=this.attributes;for(const c in t){const u=t[c];e.data.attributes[c]=u.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let f=0,m=u.length;f<m;f++){const g=u[f];d.push(g.toJSON(e.data))}d.length>0&&(r[c]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=e.name;const t=e.index;t!==null&&this.setIndex(t.clone(i));const r=e.attributes;for(const u in r){const d=r[u];this.setAttribute(u,d.clone(i))}const s=e.morphAttributes;for(const u in s){const d=[],f=s[u];for(let m=0,g=f.length;m<g;m++)d.push(f[m].clone(i));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,d=o.length;u<d;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const GI=new pt,au=new bd,$1=new zr,YI=new ne,nf=new ne,rf=new ne,sf=new ne,pC=new ne,V1=new ne,L1=new ze,B1=new ze,U1=new ze,jI=new ne,qI=new ne,ZI=new ne,F1=new ne,z1=new ne;class tn extends Ii{constructor(e=new ni,i=new Ma){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){const r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,i){const t=this.geometry,r=t.attributes.position,s=t.morphAttributes.position,o=t.morphTargetsRelative;i.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){V1.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const d=l[c],f=s[c];d!==0&&(pC.fromBufferAttribute(f,e),o?V1.addScaledVector(pC,d):V1.addScaledVector(pC.sub(i),d))}i.add(V1)}return i}raycast(e,i){const t=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),$1.copy(t.boundingSphere),$1.applyMatrix4(s),au.copy(e.ray).recast(e.near),!($1.containsPoint(au.origin)===!1&&(au.intersectSphere($1,YI)===null||au.origin.distanceToSquared(YI)>(e.far-e.near)**2))&&(GI.copy(s).invert(),au.copy(e.ray).applyMatrix4(GI),!(t.boundingBox!==null&&au.intersectsBox(t.boundingBox)===!1)&&this._computeIntersections(e,i,au)))}_computeIntersections(e,i,t){let r;const s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,m=s.groups,g=s.drawRange;if(l!==null)if(Array.isArray(o))for(let y=0,x=m.length;y<x;y++){const b=m[y],S=o[b.materialIndex],_=Math.max(b.start,g.start),O=Math.min(l.count,Math.min(b.start+b.count,g.start+g.count));for(let k=_,M=O;k<M;k+=3){const E=l.getX(k),R=l.getX(k+1),P=l.getX(k+2);r=X1(this,S,e,t,u,d,f,E,R,P),r&&(r.faceIndex=Math.floor(k/3),r.face.materialIndex=b.materialIndex,i.push(r))}}else{const y=Math.max(0,g.start),x=Math.min(l.count,g.start+g.count);for(let b=y,S=x;b<S;b+=3){const _=l.getX(b),O=l.getX(b+1),k=l.getX(b+2);r=X1(this,o,e,t,u,d,f,_,O,k),r&&(r.faceIndex=Math.floor(b/3),i.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let y=0,x=m.length;y<x;y++){const b=m[y],S=o[b.materialIndex],_=Math.max(b.start,g.start),O=Math.min(c.count,Math.min(b.start+b.count,g.start+g.count));for(let k=_,M=O;k<M;k+=3){const E=k,R=k+1,P=k+2;r=X1(this,S,e,t,u,d,f,E,R,P),r&&(r.faceIndex=Math.floor(k/3),r.face.materialIndex=b.materialIndex,i.push(r))}}else{const y=Math.max(0,g.start),x=Math.min(c.count,g.start+g.count);for(let b=y,S=x;b<S;b+=3){const _=b,O=b+1,k=b+2;r=X1(this,o,e,t,u,d,f,_,O,k),r&&(r.faceIndex=Math.floor(b/3),i.push(r))}}}}function Wue(n,e,i,t,r,s,o,l){let c;if(e.side===ts?c=t.intersectTriangle(o,s,r,!0,l):c=t.intersectTriangle(r,s,o,e.side===tc,l),c===null)return null;z1.copy(l),z1.applyMatrix4(n.matrixWorld);const u=i.ray.origin.distanceTo(z1);return u<i.near||u>i.far?null:{distance:u,point:z1.clone(),object:n}}function X1(n,e,i,t,r,s,o,l,c,u){n.getVertexPosition(l,nf),n.getVertexPosition(c,rf),n.getVertexPosition(u,sf);const d=Wue(n,e,i,t,nf,rf,sf,F1);if(d){r&&(L1.fromBufferAttribute(r,l),B1.fromBufferAttribute(r,c),U1.fromBufferAttribute(r,u),d.uv=Ws.getInterpolation(F1,nf,rf,sf,L1,B1,U1,new ze)),s&&(L1.fromBufferAttribute(s,l),B1.fromBufferAttribute(s,c),U1.fromBufferAttribute(s,u),d.uv1=Ws.getInterpolation(F1,nf,rf,sf,L1,B1,U1,new ze)),o&&(jI.fromBufferAttribute(o,l),qI.fromBufferAttribute(o,c),ZI.fromBufferAttribute(o,u),d.normal=Ws.getInterpolation(F1,nf,rf,sf,jI,qI,ZI,new ne),d.normal.dot(t.direction)>0&&d.normal.multiplyScalar(-1));const f={a:l,b:c,c:u,normal:new ne,materialIndex:0};Ws.getNormal(nf,rf,sf,f.normal),d.face=f}return d}class Nh extends ni{constructor(e=1,i=1,t=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:i,depth:t,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],u=[],d=[],f=[];let m=0,g=0;y("z","y","x",-1,-1,t,i,e,o,s,0),y("z","y","x",1,-1,t,i,-e,o,s,1),y("x","z","y",1,1,e,t,i,r,o,2),y("x","z","y",1,-1,e,t,-i,r,o,3),y("x","y","z",1,-1,e,i,t,r,s,4),y("x","y","z",-1,-1,e,i,-t,r,s,5),this.setIndex(c),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(d,3)),this.setAttribute("uv",new Ct(f,2));function y(x,b,S,_,O,k,M,E,R,P,I){const T=k/R,N=M/P,L=k/2,D=M/2,$=E/2,B=R+1,U=P+1;let Q=0,Z=0;const te=new ne;for(let ce=0;ce<U;ce++){const pe=ce*N-D;for(let Ee=0;Ee<B;Ee++){const we=Ee*T-L;te[x]=we*_,te[b]=pe*O,te[S]=$,u.push(te.x,te.y,te.z),te[x]=0,te[b]=0,te[S]=E>0?1:-1,d.push(te.x,te.y,te.z),f.push(Ee/R),f.push(1-ce/P),Q+=1}}for(let ce=0;ce<P;ce++)for(let pe=0;pe<R;pe++){const Ee=m+pe+B*ce,we=m+pe+B*(ce+1),he=m+(pe+1)+B*(ce+1),_e=m+(pe+1)+B*ce;c.push(Ee,we,_e),c.push(we,he,_e),Z+=6}l.addGroup(g,Z,I),g+=Z,m+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yp(n){const e={};for(const i in n){e[i]={};for(const t in n[i]){const r=n[i][t];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][t]=null):e[i][t]=r.clone():Array.isArray(r)?e[i][t]=r.slice():e[i][t]=r}}return e}function gs(n){const e={};for(let i=0;i<n.length;i++){const t=yp(n[i]);for(const r in t)e[r]=t[r]}return e}function Que(n){const e=[];for(let i=0;i<n.length;i++)e.push(n[i].clone());return e}function xF(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ki.workingColorSpace}const Yv={clone:yp,merge:gs};var Hue=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Gue=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ks extends ns{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Hue,this.fragmentShader=Gue,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yp(e.uniforms),this.uniformsGroups=Que(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const i=super.toJSON(e);i.glslVersion=this.glslVersion,i.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?i.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?i.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?i.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?i.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?i.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?i.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?i.uniforms[r]={type:"m4",value:o.toArray()}:i.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const t={};for(const r in this.extensions)this.extensions[r]===!0&&(t[r]=!0);return Object.keys(t).length>0&&(i.extensions=t),i}}class jv extends Ii{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt,this.coordinateSystem=Ka}copy(e,i){return super.copy(e,i),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,i){super.updateWorldMatrix(e,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Fc=new ne,KI=new ze,JI=new ze;class en extends jv{constructor(e=50,i=1,t=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=t,this.far=r,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const i=.5*this.getFilmHeight()/e;this.fov=vp*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ju*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vp*2*Math.atan(Math.tan(ju*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,i,t){Fc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Fc.x,Fc.y).multiplyScalar(-e/Fc.z),Fc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Fc.x,Fc.y).multiplyScalar(-e/Fc.z)}getViewSize(e,i){return this.getViewBounds(e,KI,JI),i.subVectors(JI,KI)}setViewOffset(e,i,t,r,s,o){this.aspect=e/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=t,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let i=e*Math.tan(ju*.5*this.fov)/this.zoom,t=2*i,r=this.aspect*t,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/c,i-=o.offsetY*t/u,r*=o.width/c,t*=o.height/u}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,i,i-t,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const of=-90,af=1;class OF extends Ii{constructor(e,i,t){super(),this.type="CubeCamera",this.renderTarget=t,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new en(of,af,e,i);r.layers=this.layers,this.add(r);const s=new en(of,af,e,i);s.layers=this.layers,this.add(s);const o=new en(of,af,e,i);o.layers=this.layers,this.add(o);const l=new en(of,af,e,i);l.layers=this.layers,this.add(l);const c=new en(of,af,e,i);c.layers=this.layers,this.add(c);const u=new en(of,af,e,i);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,i=this.children.concat(),[t,r,s,o,l,c]=i;for(const u of i)this.remove(u);if(e===Ka)t.up.set(0,1,0),t.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===ev)t.up.set(0,-1,0),t.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of i)this.add(u),u.updateMatrixWorld()}update(e,i){this.parent===null&&this.updateMatrixWorld();const{renderTarget:t,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,c,u,d]=this.children,f=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const x=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,e.setRenderTarget(t,0,r),e.render(i,s),e.setRenderTarget(t,1,r),e.render(i,o),e.setRenderTarget(t,2,r),e.render(i,l),e.setRenderTarget(t,3,r),e.render(i,c),e.setRenderTarget(t,4,r),e.render(i,u),t.texture.generateMipmaps=x,e.setRenderTarget(t,5,r),e.render(i,d),e.setRenderTarget(f,m,g),e.xr.enabled=y,t.texture.needsPMREMUpdate=!0}}class qv extends Xn{constructor(e,i,t,r,s,o,l,c,u,d){e=e!==void 0?e:[],i=i!==void 0?i:ic,super(e,i,t,r,s,o,l,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wF extends Zo{constructor(e=1,i={}){super(e,e,i),this.isWebGLCubeRenderTarget=!0;const t={width:e,height:e,depth:1},r=[t,t,t,t,t,t];this.texture=new qv(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Yn}fromEquirectangularTexture(e,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Nh(5,5,5),s=new ks({name:"CubemapFromEquirect",uniforms:yp(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:ts,blending:Yl});s.uniforms.tEquirect.value=i;const o=new tn(r,s),l=i.minFilter;return i.minFilter===Oa&&(i.minFilter=Yn),new OF(1,10,this).update(e,o),i.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,i,t,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(i,t,r);e.setRenderTarget(s)}}const mC=new ne,Yue=new ne,jue=new ui;class ya{constructor(e=new ne(1,0,0),i=0){this.isPlane=!0,this.normal=e,this.constant=i}set(e,i){return this.normal.copy(e),this.constant=i,this}setComponents(e,i,t,r){return this.normal.set(e,i,t),this.constant=r,this}setFromNormalAndCoplanarPoint(e,i){return this.normal.copy(e),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(e,i,t){const r=mC.subVectors(t,i).cross(Yue.subVectors(e,i)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,i){return i.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,i){const t=e.delta(mC),r=this.normal.dot(t);if(r===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:i.copy(e.start).addScaledVector(t,s)}intersectsLine(e){const i=this.distanceToPoint(e.start),t=this.distanceToPoint(e.end);return i<0&&t>0||t<0&&i>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,i){const t=i||jue.getNormalMatrix(e),r=this.coplanarPoint(mC).applyMatrix4(e),s=this.normal.applyMatrix3(t).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lu=new zr,W1=new ne;class Zv{constructor(e=new ya,i=new ya,t=new ya,r=new ya,s=new ya,o=new ya){this.planes=[e,i,t,r,s,o]}set(e,i,t,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(i),l[2].copy(t),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const i=this.planes;for(let t=0;t<6;t++)i[t].copy(e.planes[t]);return this}setFromProjectionMatrix(e,i=Ka){const t=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],c=r[3],u=r[4],d=r[5],f=r[6],m=r[7],g=r[8],y=r[9],x=r[10],b=r[11],S=r[12],_=r[13],O=r[14],k=r[15];if(t[0].setComponents(c-s,m-u,b-g,k-S).normalize(),t[1].setComponents(c+s,m+u,b+g,k+S).normalize(),t[2].setComponents(c+o,m+d,b+y,k+_).normalize(),t[3].setComponents(c-o,m-d,b-y,k-_).normalize(),t[4].setComponents(c-l,m-f,b-x,k-O).normalize(),i===Ka)t[5].setComponents(c+l,m+f,b+x,k+O).normalize();else if(i===ev)t[5].setComponents(l,f,x,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),lu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const i=e.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),lu.copy(i.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(lu)}intersectsSprite(e){return lu.center.set(0,0,0),lu.radius=.7071067811865476,lu.applyMatrix4(e.matrixWorld),this.intersectsSphere(lu)}intersectsSphere(e){const i=this.planes,t=e.center,r=-e.radius;for(let s=0;s<6;s++)if(i[s].distanceToPoint(t)<r)return!1;return!0}intersectsBox(e){const i=this.planes;for(let t=0;t<6;t++){const r=i[t];if(W1.x=r.normal.x>0?e.max.x:e.min.x,W1.y=r.normal.y>0?e.max.y:e.min.y,W1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(W1)<0)return!1}return!0}containsPoint(e){const i=this.planes;for(let t=0;t<6;t++)if(i[t].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _F(){let n=null,e=!1,i=null,t=null;function r(s,o){i(s,o),t=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&i!==null&&(t=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(t),e=!1},setAnimationLoop:function(s){i=s},setContext:function(s){n=s}}}function que(n){const e=new WeakMap;function i(l,c){const u=l.array,d=l.usage,f=u.byteLength,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,u,d),l.onUploadCallback();let g;if(u instanceof Float32Array)g=n.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=n.SHORT;else if(u instanceof Uint32Array)g=n.UNSIGNED_INT;else if(u instanceof Int32Array)g=n.INT;else if(u instanceof Int8Array)g=n.BYTE;else if(u instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:f}}function t(l,c,u){const d=c.array,f=c._updateRange,m=c.updateRanges;if(n.bindBuffer(u,l),f.count===-1&&m.length===0&&n.bufferSubData(u,0,d),m.length!==0){for(let g=0,y=m.length;g<y;g++){const x=m[g];n.bufferSubData(u,x.start*d.BYTES_PER_ELEMENT,d,x.start,x.count)}c.clearUpdateRanges()}f.count!==-1&&(n.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count),f.count=-1),c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function o(l,c){if(l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);if(u===void 0)e.set(l,i(l,c));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");t(u.buffer,l,c),u.version=l.version}}return{get:r,remove:s,update:o}}class $h extends ni{constructor(e=1,i=1,t=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:i,widthSegments:t,heightSegments:r};const s=e/2,o=i/2,l=Math.floor(t),c=Math.floor(r),u=l+1,d=c+1,f=e/l,m=i/c,g=[],y=[],x=[],b=[];for(let S=0;S<d;S++){const _=S*m-o;for(let O=0;O<u;O++){const k=O*f-s;y.push(k,-_,0),x.push(0,0,1),b.push(O/l),b.push(1-S/c)}}for(let S=0;S<c;S++)for(let _=0;_<l;_++){const O=_+u*S,k=_+u*(S+1),M=_+1+u*(S+1),E=_+1+u*S;g.push(O,k,E),g.push(k,M,E)}this.setIndex(g),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(x,3)),this.setAttribute("uv",new Ct(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $h(e.width,e.height,e.widthSegments,e.heightSegments)}}var Zue=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Kue=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Jue=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ede=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tde=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ide=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,nde=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rde=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sde=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ode=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,ade=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lde=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cde=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,hde=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ude=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,dde=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,fde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mde=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gde=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,bde=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,xde=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ode=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wde=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_de=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Sde=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Cde=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,kde=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Tde="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mde=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Ede=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pde=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ade=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Rde=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ide=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Dde=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Nde=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$de=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Vde=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Lde=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Bde=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ude=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Fde=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,zde=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Xde=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Wde=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Qde=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Hde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Gde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Yde=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,jde=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qde=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Zde=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Kde=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Jde=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,efe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tfe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ife=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,nfe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rfe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sfe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ofe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,afe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lfe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cfe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,hfe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ufe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,dfe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ffe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,pfe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mfe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yfe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,bfe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,xfe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Ofe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wfe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,_fe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Sfe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Cfe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,kfe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Tfe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Mfe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Efe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Pfe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Afe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Rfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,Ife=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Dfe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Nfe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$fe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Vfe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Lfe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Bfe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ufe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ffe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,zfe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Xfe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Wfe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Qfe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Hfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Gfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Yfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,jfe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qfe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Zfe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Kfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Jfe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,epe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tpe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ipe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,npe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,rpe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,spe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,ope=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ape=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lpe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cpe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hpe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,upe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dpe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fpe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ppe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mpe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gpe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,vpe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ype=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bpe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xpe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ope=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wpe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_pe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Spe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Cpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kpe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tpe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mpe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Epe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mi={alphahash_fragment:Zue,alphahash_pars_fragment:Kue,alphamap_fragment:Jue,alphamap_pars_fragment:ede,alphatest_fragment:tde,alphatest_pars_fragment:ide,aomap_fragment:nde,aomap_pars_fragment:rde,batching_pars_vertex:sde,batching_vertex:ode,begin_vertex:ade,beginnormal_vertex:lde,bsdfs:cde,iridescence_fragment:hde,bumpmap_pars_fragment:ude,clipping_planes_fragment:dde,clipping_planes_pars_fragment:fde,clipping_planes_pars_vertex:pde,clipping_planes_vertex:mde,color_fragment:gde,color_pars_fragment:vde,color_pars_vertex:yde,color_vertex:bde,common:xde,cube_uv_reflection_fragment:Ode,defaultnormal_vertex:wde,displacementmap_pars_vertex:_de,displacementmap_vertex:Sde,emissivemap_fragment:Cde,emissivemap_pars_fragment:kde,colorspace_fragment:Tde,colorspace_pars_fragment:Mde,envmap_fragment:Ede,envmap_common_pars_fragment:Pde,envmap_pars_fragment:Ade,envmap_pars_vertex:Rde,envmap_physical_pars_fragment:Xde,envmap_vertex:Ide,fog_vertex:Dde,fog_pars_vertex:Nde,fog_fragment:$de,fog_pars_fragment:Vde,gradientmap_pars_fragment:Lde,lightmap_pars_fragment:Bde,lights_lambert_fragment:Ude,lights_lambert_pars_fragment:Fde,lights_pars_begin:zde,lights_toon_fragment:Wde,lights_toon_pars_fragment:Qde,lights_phong_fragment:Hde,lights_phong_pars_fragment:Gde,lights_physical_fragment:Yde,lights_physical_pars_fragment:jde,lights_fragment_begin:qde,lights_fragment_maps:Zde,lights_fragment_end:Kde,logdepthbuf_fragment:Jde,logdepthbuf_pars_fragment:efe,logdepthbuf_pars_vertex:tfe,logdepthbuf_vertex:ife,map_fragment:nfe,map_pars_fragment:rfe,map_particle_fragment:sfe,map_particle_pars_fragment:ofe,metalnessmap_fragment:afe,metalnessmap_pars_fragment:lfe,morphinstance_vertex:cfe,morphcolor_vertex:hfe,morphnormal_vertex:ufe,morphtarget_pars_vertex:dfe,morphtarget_vertex:ffe,normal_fragment_begin:pfe,normal_fragment_maps:mfe,normal_pars_fragment:gfe,normal_pars_vertex:vfe,normal_vertex:yfe,normalmap_pars_fragment:bfe,clearcoat_normal_fragment_begin:xfe,clearcoat_normal_fragment_maps:Ofe,clearcoat_pars_fragment:wfe,iridescence_pars_fragment:_fe,opaque_fragment:Sfe,packing:Cfe,premultiplied_alpha_fragment:kfe,project_vertex:Tfe,dithering_fragment:Mfe,dithering_pars_fragment:Efe,roughnessmap_fragment:Pfe,roughnessmap_pars_fragment:Afe,shadowmap_pars_fragment:Rfe,shadowmap_pars_vertex:Ife,shadowmap_vertex:Dfe,shadowmask_pars_fragment:Nfe,skinbase_vertex:$fe,skinning_pars_vertex:Vfe,skinning_vertex:Lfe,skinnormal_vertex:Bfe,specularmap_fragment:Ufe,specularmap_pars_fragment:Ffe,tonemapping_fragment:zfe,tonemapping_pars_fragment:Xfe,transmission_fragment:Wfe,transmission_pars_fragment:Qfe,uv_pars_fragment:Hfe,uv_pars_vertex:Gfe,uv_vertex:Yfe,worldpos_vertex:jfe,background_vert:qfe,background_frag:Zfe,backgroundCube_vert:Kfe,backgroundCube_frag:Jfe,cube_vert:epe,cube_frag:tpe,depth_vert:ipe,depth_frag:npe,distanceRGBA_vert:rpe,distanceRGBA_frag:spe,equirect_vert:ope,equirect_frag:ape,linedashed_vert:lpe,linedashed_frag:cpe,meshbasic_vert:hpe,meshbasic_frag:upe,meshlambert_vert:dpe,meshlambert_frag:fpe,meshmatcap_vert:ppe,meshmatcap_frag:mpe,meshnormal_vert:gpe,meshnormal_frag:vpe,meshphong_vert:ype,meshphong_frag:bpe,meshphysical_vert:xpe,meshphysical_frag:Ope,meshtoon_vert:wpe,meshtoon_frag:_pe,points_vert:Spe,points_frag:Cpe,shadow_vert:kpe,shadow_frag:Tpe,sprite_vert:Mpe,sprite_frag:Epe},at={common:{diffuse:{value:new it(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ui},alphaMap:{value:null},alphaMapTransform:{value:new ui},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ui}},envmap:{envMap:{value:null},envMapRotation:{value:new ui},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ui}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ui}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ui},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ui},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ui},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ui}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ui}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ui}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new it(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new it(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ui},alphaTest:{value:0},uvTransform:{value:new ui}},sprite:{diffuse:{value:new it(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ui},alphaMap:{value:null},alphaMapTransform:{value:new ui},alphaTest:{value:0}}},Lo={basic:{uniforms:gs([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:mi.meshbasic_vert,fragmentShader:mi.meshbasic_frag},lambert:{uniforms:gs([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new it(0)}}]),vertexShader:mi.meshlambert_vert,fragmentShader:mi.meshlambert_frag},phong:{uniforms:gs([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new it(0)},specular:{value:new it(1118481)},shininess:{value:30}}]),vertexShader:mi.meshphong_vert,fragmentShader:mi.meshphong_frag},standard:{uniforms:gs([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new it(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag},toon:{uniforms:gs([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new it(0)}}]),vertexShader:mi.meshtoon_vert,fragmentShader:mi.meshtoon_frag},matcap:{uniforms:gs([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:mi.meshmatcap_vert,fragmentShader:mi.meshmatcap_frag},points:{uniforms:gs([at.points,at.fog]),vertexShader:mi.points_vert,fragmentShader:mi.points_frag},dashed:{uniforms:gs([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mi.linedashed_vert,fragmentShader:mi.linedashed_frag},depth:{uniforms:gs([at.common,at.displacementmap]),vertexShader:mi.depth_vert,fragmentShader:mi.depth_frag},normal:{uniforms:gs([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:mi.meshnormal_vert,fragmentShader:mi.meshnormal_frag},sprite:{uniforms:gs([at.sprite,at.fog]),vertexShader:mi.sprite_vert,fragmentShader:mi.sprite_frag},background:{uniforms:{uvTransform:{value:new ui},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mi.background_vert,fragmentShader:mi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ui}},vertexShader:mi.backgroundCube_vert,fragmentShader:mi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mi.cube_vert,fragmentShader:mi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mi.equirect_vert,fragmentShader:mi.equirect_frag},distanceRGBA:{uniforms:gs([at.common,at.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mi.distanceRGBA_vert,fragmentShader:mi.distanceRGBA_frag},shadow:{uniforms:gs([at.lights,at.fog,{color:{value:new it(0)},opacity:{value:1}}]),vertexShader:mi.shadow_vert,fragmentShader:mi.shadow_frag}};Lo.physical={uniforms:gs([Lo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ui},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ui},clearcoatNormalScale:{value:new ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ui},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ui},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ui},sheen:{value:0},sheenColor:{value:new it(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ui},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ui},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ui},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ui},attenuationDistance:{value:0},attenuationColor:{value:new it(0)},specularColor:{value:new it(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ui},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ui},anisotropyVector:{value:new ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ui}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag};const Q1={r:0,b:0,g:0},cu=new pr,Ppe=new pt;function Ape(n,e,i,t,r,s,o){const l=new it(0);let c=s===!0?0:1,u,d,f=null,m=0,g=null;function y(_){let O=_.isScene===!0?_.background:null;return O&&O.isTexture&&(O=(_.backgroundBlurriness>0?i:e).get(O)),O}function x(_){let O=!1;const k=y(_);k===null?S(l,c):k&&k.isColor&&(S(k,1),O=!0);const M=n.xr.getEnvironmentBlendMode();M==="additive"?t.buffers.color.setClear(0,0,0,1,o):M==="alpha-blend"&&t.buffers.color.setClear(0,0,0,0,o),(n.autoClear||O)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil)}function b(_,O){const k=y(O);k&&(k.isCubeTexture||k.mapping===Fp)?(d===void 0&&(d=new tn(new Nh(1,1,1),new ks({name:"BackgroundCubeMaterial",uniforms:yp(Lo.backgroundCube.uniforms),vertexShader:Lo.backgroundCube.vertexShader,fragmentShader:Lo.backgroundCube.fragmentShader,side:ts,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(M,E,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),cu.copy(O.backgroundRotation),cu.x*=-1,cu.y*=-1,cu.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(cu.y*=-1,cu.z*=-1),d.material.uniforms.envMap.value=k,d.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Ppe.makeRotationFromEuler(cu)),d.material.toneMapped=Ki.getTransfer(k.colorSpace)!==fn,(f!==k||m!==k.version||g!==n.toneMapping)&&(d.material.needsUpdate=!0,f=k,m=k.version,g=n.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null)):k&&k.isTexture&&(u===void 0&&(u=new tn(new $h(2,2),new ks({name:"BackgroundMaterial",uniforms:yp(Lo.background.uniforms),vertexShader:Lo.background.vertexShader,fragmentShader:Lo.background.fragmentShader,side:tc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=k,u.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,u.material.toneMapped=Ki.getTransfer(k.colorSpace)!==fn,k.matrixAutoUpdate===!0&&k.updateMatrix(),u.material.uniforms.uvTransform.value.copy(k.matrix),(f!==k||m!==k.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,f=k,m=k.version,g=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function S(_,O){_.getRGB(Q1,xF(n)),t.buffers.color.setClear(Q1.r,Q1.g,Q1.b,O,o)}return{getClearColor:function(){return l},setClearColor:function(_,O=1){l.set(_),c=O,S(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(_){c=_,S(l,c)},render:x,addToRenderList:b}}function Rpe(n,e){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),t={},r=m(null);let s=r,o=!1;function l(T,N,L,D,$){let B=!1;const U=f(D,L,N);s!==U&&(s=U,u(s.object)),B=g(T,D,L,$),B&&y(T,D,L,$),$!==null&&e.update($,n.ELEMENT_ARRAY_BUFFER),(B||o)&&(o=!1,k(T,N,L,D),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function c(){return n.createVertexArray()}function u(T){return n.bindVertexArray(T)}function d(T){return n.deleteVertexArray(T)}function f(T,N,L){const D=L.wireframe===!0;let $=t[T.id];$===void 0&&($={},t[T.id]=$);let B=$[N.id];B===void 0&&(B={},$[N.id]=B);let U=B[D];return U===void 0&&(U=m(c()),B[D]=U),U}function m(T){const N=[],L=[],D=[];for(let $=0;$<i;$++)N[$]=0,L[$]=0,D[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:L,attributeDivisors:D,object:T,attributes:{},index:null}}function g(T,N,L,D){const $=s.attributes,B=N.attributes;let U=0;const Q=L.getAttributes();for(const Z in Q)if(Q[Z].location>=0){const ce=$[Z];let pe=B[Z];if(pe===void 0&&(Z==="instanceMatrix"&&T.instanceMatrix&&(pe=T.instanceMatrix),Z==="instanceColor"&&T.instanceColor&&(pe=T.instanceColor)),ce===void 0||ce.attribute!==pe||pe&&ce.data!==pe.data)return!0;U++}return s.attributesNum!==U||s.index!==D}function y(T,N,L,D){const $={},B=N.attributes;let U=0;const Q=L.getAttributes();for(const Z in Q)if(Q[Z].location>=0){let ce=B[Z];ce===void 0&&(Z==="instanceMatrix"&&T.instanceMatrix&&(ce=T.instanceMatrix),Z==="instanceColor"&&T.instanceColor&&(ce=T.instanceColor));const pe={};pe.attribute=ce,ce&&ce.data&&(pe.data=ce.data),$[Z]=pe,U++}s.attributes=$,s.attributesNum=U,s.index=D}function x(){const T=s.newAttributes;for(let N=0,L=T.length;N<L;N++)T[N]=0}function b(T){S(T,0)}function S(T,N){const L=s.newAttributes,D=s.enabledAttributes,$=s.attributeDivisors;L[T]=1,D[T]===0&&(n.enableVertexAttribArray(T),D[T]=1),$[T]!==N&&(n.vertexAttribDivisor(T,N),$[T]=N)}function _(){const T=s.newAttributes,N=s.enabledAttributes;for(let L=0,D=N.length;L<D;L++)N[L]!==T[L]&&(n.disableVertexAttribArray(L),N[L]=0)}function O(T,N,L,D,$,B,U){U===!0?n.vertexAttribIPointer(T,N,L,$,B):n.vertexAttribPointer(T,N,L,D,$,B)}function k(T,N,L,D){x();const $=D.attributes,B=L.getAttributes(),U=N.defaultAttributeValues;for(const Q in B){const Z=B[Q];if(Z.location>=0){let te=$[Q];if(te===void 0&&(Q==="instanceMatrix"&&T.instanceMatrix&&(te=T.instanceMatrix),Q==="instanceColor"&&T.instanceColor&&(te=T.instanceColor)),te!==void 0){const ce=te.normalized,pe=te.itemSize,Ee=e.get(te);if(Ee===void 0)continue;const we=Ee.buffer,he=Ee.type,_e=Ee.bytesPerElement,Ce=he===n.INT||he===n.UNSIGNED_INT||te.gpuType===VE;if(te.isInterleavedBufferAttribute){const K=te.data,j=K.stride,F=te.offset;if(K.isInstancedInterleavedBuffer){for(let z=0;z<Z.locationSize;z++)S(Z.location+z,K.meshPerAttribute);T.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let z=0;z<Z.locationSize;z++)b(Z.location+z);n.bindBuffer(n.ARRAY_BUFFER,we);for(let z=0;z<Z.locationSize;z++)O(Z.location+z,pe/Z.locationSize,he,ce,j*_e,(F+pe/Z.locationSize*z)*_e,Ce)}else{if(te.isInstancedBufferAttribute){for(let K=0;K<Z.locationSize;K++)S(Z.location+K,te.meshPerAttribute);T.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let K=0;K<Z.locationSize;K++)b(Z.location+K);n.bindBuffer(n.ARRAY_BUFFER,we);for(let K=0;K<Z.locationSize;K++)O(Z.location+K,pe/Z.locationSize,he,ce,pe*_e,pe/Z.locationSize*K*_e,Ce)}}else if(U!==void 0){const ce=U[Q];if(ce!==void 0)switch(ce.length){case 2:n.vertexAttrib2fv(Z.location,ce);break;case 3:n.vertexAttrib3fv(Z.location,ce);break;case 4:n.vertexAttrib4fv(Z.location,ce);break;default:n.vertexAttrib1fv(Z.location,ce)}}}}_()}function M(){P();for(const T in t){const N=t[T];for(const L in N){const D=N[L];for(const $ in D)d(D[$].object),delete D[$];delete N[L]}delete t[T]}}function E(T){if(t[T.id]===void 0)return;const N=t[T.id];for(const L in N){const D=N[L];for(const $ in D)d(D[$].object),delete D[$];delete N[L]}delete t[T.id]}function R(T){for(const N in t){const L=t[N];if(L[T.id]===void 0)continue;const D=L[T.id];for(const $ in D)d(D[$].object),delete D[$];delete L[T.id]}}function P(){I(),o=!0,s!==r&&(s=r,u(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:P,resetDefaultState:I,dispose:M,releaseStatesOfGeometry:E,releaseStatesOfProgram:R,initAttributes:x,enableAttribute:b,disableUnusedAttributes:_}}function Ipe(n,e,i){let t;function r(u){t=u}function s(u,d){n.drawArrays(t,u,d),i.update(d,t,1)}function o(u,d,f){f!==0&&(n.drawArraysInstanced(t,u,d,f),i.update(d,t,f))}function l(u,d,f){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<f;g++)this.render(u[g],d[g]);else{m.multiDrawArraysWEBGL(t,u,0,d,0,f);let g=0;for(let y=0;y<f;y++)g+=d[y];i.update(g,t,1)}}function c(u,d,f,m){if(f===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<u.length;y++)o(u[y],d[y],m[y]);else{g.multiDrawArraysInstancedWEBGL(t,u,0,d,0,m,0,f);let y=0;for(let x=0;x<f;x++)y+=d[x];for(let x=0;x<m.length;x++)i.update(y,t,m[x])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Dpe(n,e,i,t){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(E){return!(E!==Gs&&t.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(E){const R=E===zp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==Ca&&t.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==Xo&&!R)}function c(E){if(E==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=i.precision!==void 0?i.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const f=i.logarithmicDepthBuffer===!0,m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),k=g>0,M=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:f,maxTextures:m,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:S,maxVaryings:_,maxFragmentUniforms:O,vertexTextures:k,maxSamples:M}}function Npe(n){const e=this;let i=null,t=0,r=!1,s=!1;const o=new ya,l=new ui,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,m){const g=f.length!==0||m||t!==0||r;return r=m,t=f.length,g},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,m){i=d(f,m,0)},this.setState=function(f,m,g){const y=f.clippingPlanes,x=f.clipIntersection,b=f.clipShadows,S=n.get(f);if(!r||y===null||y.length===0||s&&!b)s?d(null):u();else{const _=s?0:t,O=_*4;let k=S.clippingState||null;c.value=k,k=d(y,m,O,g);for(let M=0;M!==O;++M)k[M]=i[M];S.clippingState=k,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=_}};function u(){c.value!==i&&(c.value=i,c.needsUpdate=t>0),e.numPlanes=t,e.numIntersection=0}function d(f,m,g,y){const x=f!==null?f.length:0;let b=null;if(x!==0){if(b=c.value,y!==!0||b===null){const S=g+x*4,_=m.matrixWorldInverse;l.getNormalMatrix(_),(b===null||b.length<S)&&(b=new Float32Array(S));for(let O=0,k=g;O!==x;++O,k+=4)o.copy(f[O]).applyMatrix4(_,l),o.normal.toArray(b,k),b[k+3]=o.constant}c.value=b,c.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function $pe(n){let e=new WeakMap;function i(o,l){return l===dp?o.mapping=ic:l===Y0&&(o.mapping=Oh),o}function t(o){if(o&&o.isTexture){const l=o.mapping;if(l===dp||l===Y0)if(e.has(o)){const c=e.get(o).texture;return i(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const u=new wF(c.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),i(u.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:t,dispose:s}}class Wo extends jv{constructor(e=-1,i=1,t=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=i,this.top=t,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,i,t,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=t,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=t-e,o=t+e,l=r+i,c=r-i;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}const Ef=4,e6=[.125,.215,.35,.446,.526,.582],Pu=20,gC=new Wo,t6=new it;let vC=null,yC=0,bC=0,xC=!1;const Su=(1+Math.sqrt(5))/2,lf=1/Su,i6=[new ne(-Su,lf,0),new ne(Su,lf,0),new ne(-lf,0,Su),new ne(lf,0,Su),new ne(0,Su,-lf),new ne(0,Su,lf),new ne(-1,1,-1),new ne(1,1,-1),new ne(-1,1,1),new ne(1,1,1)];class pT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,i=0,t=.1,r=100){vC=this._renderer.getRenderTarget(),yC=this._renderer.getActiveCubeFace(),bC=this._renderer.getActiveMipmapLevel(),xC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,t,r,s),i>0&&this._blur(s,0,0,i),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,i=null){return this._fromTexture(e,i)}fromCubemap(e,i=null){return this._fromTexture(e,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=s6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=r6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(vC,yC,bC),this._renderer.xr.enabled=xC,e.scissorTest=!1,H1(e,0,0,e.width,e.height)}_fromTexture(e,i){e.mapping===ic||e.mapping===Oh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),vC=this._renderer.getRenderTarget(),yC=this._renderer.getActiveCubeFace(),bC=this._renderer.getActiveMipmapLevel(),xC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const t=i||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,t={magFilter:Yn,minFilter:Yn,generateMipmaps:!1,type:zp,format:Gs,colorSpace:uc,depthBuffer:!1},r=n6(e,i,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=n6(e,i,t);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Vpe(s)),this._blurMaterial=Lpe(s,e,i)}return r}_compileMaterial(e){const i=new tn(this._lodPlanes[0],e);this._renderer.compile(i,gC)}_sceneToCubeUV(e,i,t,r){const l=new en(90,1,i,t),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,m=d.toneMapping;d.getClearColor(t6),d.toneMapping=jl,d.autoClear=!1;const g=new Ma({name:"PMREM.Background",side:ts,depthWrite:!1,depthTest:!1}),y=new tn(new Nh,g);let x=!1;const b=e.background;b?b.isColor&&(g.color.copy(b),e.background=null,x=!0):(g.color.copy(t6),x=!0);for(let S=0;S<6;S++){const _=S%3;_===0?(l.up.set(0,c[S],0),l.lookAt(u[S],0,0)):_===1?(l.up.set(0,0,c[S]),l.lookAt(0,u[S],0)):(l.up.set(0,c[S],0),l.lookAt(0,0,u[S]));const O=this._cubeSize;H1(r,_*O,S>2?O:0,O,O),d.setRenderTarget(r),x&&d.render(y,l),d.render(e,l)}y.geometry.dispose(),y.material.dispose(),d.toneMapping=m,d.autoClear=f,e.background=b}_textureToCubeUV(e,i){const t=this._renderer,r=e.mapping===ic||e.mapping===Oh;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=s6()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=r6());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new tn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;H1(i,0,0,3*c,2*c),t.setRenderTarget(i),t.render(o,gC)}_applyPMREM(e){const i=this._renderer,t=i.autoClear;i.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=i6[(r-s-1)%i6.length];this._blur(e,s-1,s,o,l)}i.autoClear=t}_blur(e,i,t,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,i,t,r,"latitudinal",s),this._halfBlur(o,e,t,t,r,"longitudinal",s)}_halfBlur(e,i,t,r,s,o,l){const c=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new tn(this._lodPlanes[r],u),m=u.uniforms,g=this._sizeLods[t]-1,y=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*Pu-1),x=s/y,b=isFinite(s)?1+Math.floor(d*x):Pu;b>Pu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Pu}`);const S=[];let _=0;for(let R=0;R<Pu;++R){const P=R/x,I=Math.exp(-P*P/2);S.push(I),R===0?_+=I:R<b&&(_+=2*I)}for(let R=0;R<S.length;R++)S[R]=S[R]/_;m.envMap.value=e.texture,m.samples.value=b,m.weights.value=S,m.latitudinal.value=o==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:O}=this;m.dTheta.value=y,m.mipInt.value=O-t;const k=this._sizeLods[r],M=3*k*(r>O-Ef?r-O+Ef:0),E=4*(this._cubeSize-k);H1(i,M,E,3*k,2*k),c.setRenderTarget(i),c.render(f,gC)}}function Vpe(n){const e=[],i=[],t=[];let r=n;const s=n-Ef+1+e6.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);i.push(l);let c=1/l;o>n-Ef?c=e6[o-n+Ef-1]:o===0&&(c=0),t.push(c);const u=1/(l-2),d=-u,f=1+u,m=[d,d,f,d,f,f,d,d,f,f,d,f],g=6,y=6,x=3,b=2,S=1,_=new Float32Array(x*y*g),O=new Float32Array(b*y*g),k=new Float32Array(S*y*g);for(let E=0;E<g;E++){const R=E%3*2/3-1,P=E>2?0:-1,I=[R,P,0,R+2/3,P,0,R+2/3,P+1,0,R,P,0,R+2/3,P+1,0,R,P+1,0];_.set(I,x*y*E),O.set(m,b*y*E);const T=[E,E,E,E,E,E];k.set(T,S*y*E)}const M=new ni;M.setAttribute("position",new Ri(_,x)),M.setAttribute("uv",new Ri(O,b)),M.setAttribute("faceIndex",new Ri(k,S)),e.push(M),r>Ef&&r--}return{lodPlanes:e,sizeLods:i,sigmas:t}}function n6(n,e,i){const t=new Zo(n,e,i);return t.texture.mapping=Fp,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function H1(n,e,i,t,r){n.viewport.set(e,i,t,r),n.scissor.set(e,i,t,r)}function Lpe(n,e,i){const t=new Float32Array(Pu),r=new ne(0,1,0);return new ks({name:"SphericalGaussianBlur",defines:{n:Pu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:jE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yl,depthTest:!1,depthWrite:!1})}function r6(){return new ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:jE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yl,depthTest:!1,depthWrite:!1})}function s6(){return new ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:jE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yl,depthTest:!1,depthWrite:!1})}function jE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bpe(n){let e=new WeakMap,i=null;function t(l){if(l&&l.isTexture){const c=l.mapping,u=c===dp||c===Y0,d=c===ic||c===Oh;if(u||d){let f=e.get(l);const m=f!==void 0?f.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==m)return i===null&&(i=new pT(n)),f=u?i.fromEquirectangular(l,f):i.fromCubemap(l,f),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),f.texture;if(f!==void 0)return f.texture;{const g=l.image;return u&&g&&g.height>0||d&&g&&r(g)?(i===null&&(i=new pT(n)),f=u?i.fromEquirectangular(l):i.fromCubemap(l),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),l.addEventListener("dispose",s),f.texture):null}}}return l}function r(l){let c=0;const u=6;for(let d=0;d<u;d++)l[d]!==void 0&&c++;return c===u}function s(l){const c=l.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function o(){e=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:t,dispose:o}}function Upe(n){const e={};function i(t){if(e[t]!==void 0)return e[t];let r;switch(t){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(t)}return e[t]=r,r}return{has:function(t){return i(t)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(t){const r=i(t);return r===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),r}}}function Fpe(n,e,i,t){const r={},s=new WeakMap;function o(f){const m=f.target;m.index!==null&&e.remove(m.index);for(const y in m.attributes)e.remove(m.attributes[y]);for(const y in m.morphAttributes){const x=m.morphAttributes[y];for(let b=0,S=x.length;b<S;b++)e.remove(x[b])}m.removeEventListener("dispose",o),delete r[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),t.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,i.memory.geometries--}function l(f,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,i.memory.geometries++),m}function c(f){const m=f.attributes;for(const y in m)e.update(m[y],n.ARRAY_BUFFER);const g=f.morphAttributes;for(const y in g){const x=g[y];for(let b=0,S=x.length;b<S;b++)e.update(x[b],n.ARRAY_BUFFER)}}function u(f){const m=[],g=f.index,y=f.attributes.position;let x=0;if(g!==null){const _=g.array;x=g.version;for(let O=0,k=_.length;O<k;O+=3){const M=_[O+0],E=_[O+1],R=_[O+2];m.push(M,E,E,R,R,M)}}else if(y!==void 0){const _=y.array;x=y.version;for(let O=0,k=_.length/3-1;O<k;O+=3){const M=O+0,E=O+1,R=O+2;m.push(M,E,E,R,R,M)}}else return;const b=new(pF(m)?YE:Ow)(m,1);b.version=x;const S=s.get(f);S&&e.remove(S),s.set(f,b)}function d(f){const m=s.get(f);if(m){const g=f.index;g!==null&&m.version<g.version&&u(f)}else u(f);return s.get(f)}return{get:l,update:c,getWireframeAttribute:d}}function zpe(n,e,i){let t;function r(m){t=m}let s,o;function l(m){s=m.type,o=m.bytesPerElement}function c(m,g){n.drawElements(t,g,s,m*o),i.update(g,t,1)}function u(m,g,y){y!==0&&(n.drawElementsInstanced(t,g,s,m*o,y),i.update(g,t,y))}function d(m,g,y){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let b=0;b<y;b++)this.render(m[b]/o,g[b]);else{x.multiDrawElementsWEBGL(t,g,0,s,m,0,y);let b=0;for(let S=0;S<y;S++)b+=g[S];i.update(b,t,1)}}function f(m,g,y,x){if(y===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let S=0;S<m.length;S++)u(m[S]/o,g[S],x[S]);else{b.multiDrawElementsInstancedWEBGL(t,g,0,s,m,0,x,0,y);let S=0;for(let _=0;_<y;_++)S+=g[_];for(let _=0;_<x.length;_++)i.update(S,t,x[_])}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function Xpe(n){const e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function t(s,o,l){switch(i.calls++,o){case n.TRIANGLES:i.triangles+=l*(s/3);break;case n.LINES:i.lines+=l*(s/2);break;case n.LINE_STRIP:i.lines+=l*(s-1);break;case n.LINE_LOOP:i.lines+=l*s;break;case n.POINTS:i.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:r,update:t}}function Wpe(n,e,i){const t=new WeakMap,r=new bi;function s(o,l,c){const u=o.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=d!==void 0?d.length:0;let m=t.get(l);if(m===void 0||m.count!==f){let I=function(){R.dispose(),t.delete(l),l.removeEventListener("dispose",I)};m!==void 0&&m.texture.dispose();const g=l.morphAttributes.position!==void 0,y=l.morphAttributes.normal!==void 0,x=l.morphAttributes.color!==void 0,b=l.morphAttributes.position||[],S=l.morphAttributes.normal||[],_=l.morphAttributes.color||[];let O=0;g===!0&&(O=1),y===!0&&(O=2),x===!0&&(O=3);let k=l.attributes.position.count*O,M=1;k>e.maxTextureSize&&(M=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const E=new Float32Array(k*M*4*f),R=new bw(E,k,M,f);R.type=Xo,R.needsUpdate=!0;const P=O*4;for(let T=0;T<f;T++){const N=b[T],L=S[T],D=_[T],$=k*M*4*T;for(let B=0;B<N.count;B++){const U=B*P;g===!0&&(r.fromBufferAttribute(N,B),E[$+U+0]=r.x,E[$+U+1]=r.y,E[$+U+2]=r.z,E[$+U+3]=0),y===!0&&(r.fromBufferAttribute(L,B),E[$+U+4]=r.x,E[$+U+5]=r.y,E[$+U+6]=r.z,E[$+U+7]=0),x===!0&&(r.fromBufferAttribute(D,B),E[$+U+8]=r.x,E[$+U+9]=r.y,E[$+U+10]=r.z,E[$+U+11]=D.itemSize===4?r.w:1)}}m={count:f,texture:R,size:new ze(k,M)},t.set(l,m),l.addEventListener("dispose",I)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,i);else{let g=0;for(let x=0;x<u.length;x++)g+=u[x];const y=l.morphTargetsRelative?1:1-g;c.getUniforms().setValue(n,"morphTargetBaseInfluence",y),c.getUniforms().setValue(n,"morphTargetInfluences",u)}c.getUniforms().setValue(n,"morphTargetsTexture",m.texture,i),c.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}function Qpe(n,e,i,t){let r=new WeakMap;function s(c){const u=t.render.frame,d=c.geometry,f=e.get(c,d);if(r.get(f)!==u&&(e.update(f),r.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==u&&(i.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&i.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,u))),c.isSkinnedMesh){const m=c.skeleton;r.get(m)!==u&&(m.update(),r.set(m,u))}return f}function o(){r=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),i.remove(u.instanceMatrix),u.instanceColor!==null&&i.remove(u.instanceColor)}return{update:s,dispose:o}}class qE extends Xn{constructor(e,i,t,r,s,o,l,c,u,d){if(d=d!==void 0?d:Yu,d!==Yu&&d!==pp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&d===Yu&&(t=od),t===void 0&&d===pp&&(t=Xp),super(null,r,s,o,l,c,d,t,u),this.isDepthTexture=!0,this.image={width:e,height:i},this.magFilter=l!==void 0?l:fr,this.minFilter=c!==void 0?c:fr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const i=super.toJSON(e);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}const SF=new Xn,CF=new qE(1,1);CF.compareFunction=QE;const kF=new bw,TF=new GE,MF=new qv,o6=[],a6=[],l6=new Float32Array(16),c6=new Float32Array(9),h6=new Float32Array(4);function Wp(n,e,i){const t=n[0];if(t<=0||t>0)return n;const r=e*i;let s=o6[r];if(s===void 0&&(s=new Float32Array(r),o6[r]=s),e!==0){t.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=i,n[o].toArray(s,l)}return s}function br(n,e){if(n.length!==e.length)return!1;for(let i=0,t=n.length;i<t;i++)if(n[i]!==e[i])return!1;return!0}function xr(n,e){for(let i=0,t=e.length;i<t;i++)n[i]=e[i]}function ww(n,e){let i=a6[e];i===void 0&&(i=new Int32Array(e),a6[e]=i);for(let t=0;t!==e;++t)i[t]=n.allocateTextureUnit();return i}function Hpe(n,e){const i=this.cache;i[0]!==e&&(n.uniform1f(this.addr,e),i[0]=e)}function Gpe(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(br(i,e))return;n.uniform2fv(this.addr,e),xr(i,e)}}function Ype(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(e.r!==void 0)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(br(i,e))return;n.uniform3fv(this.addr,e),xr(i,e)}}function jpe(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(br(i,e))return;n.uniform4fv(this.addr,e),xr(i,e)}}function qpe(n,e){const i=this.cache,t=e.elements;if(t===void 0){if(br(i,e))return;n.uniformMatrix2fv(this.addr,!1,e),xr(i,e)}else{if(br(i,t))return;h6.set(t),n.uniformMatrix2fv(this.addr,!1,h6),xr(i,t)}}function Zpe(n,e){const i=this.cache,t=e.elements;if(t===void 0){if(br(i,e))return;n.uniformMatrix3fv(this.addr,!1,e),xr(i,e)}else{if(br(i,t))return;c6.set(t),n.uniformMatrix3fv(this.addr,!1,c6),xr(i,t)}}function Kpe(n,e){const i=this.cache,t=e.elements;if(t===void 0){if(br(i,e))return;n.uniformMatrix4fv(this.addr,!1,e),xr(i,e)}else{if(br(i,t))return;l6.set(t),n.uniformMatrix4fv(this.addr,!1,l6),xr(i,t)}}function Jpe(n,e){const i=this.cache;i[0]!==e&&(n.uniform1i(this.addr,e),i[0]=e)}function eme(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(br(i,e))return;n.uniform2iv(this.addr,e),xr(i,e)}}function tme(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(br(i,e))return;n.uniform3iv(this.addr,e),xr(i,e)}}function ime(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(br(i,e))return;n.uniform4iv(this.addr,e),xr(i,e)}}function nme(n,e){const i=this.cache;i[0]!==e&&(n.uniform1ui(this.addr,e),i[0]=e)}function rme(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(br(i,e))return;n.uniform2uiv(this.addr,e),xr(i,e)}}function sme(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(br(i,e))return;n.uniform3uiv(this.addr,e),xr(i,e)}}function ome(n,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(br(i,e))return;n.uniform4uiv(this.addr,e),xr(i,e)}}function ame(n,e,i){const t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?CF:SF;i.setTexture2D(e||s,r)}function lme(n,e,i){const t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTexture3D(e||TF,r)}function cme(n,e,i){const t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTextureCube(e||MF,r)}function hme(n,e,i){const t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTexture2DArray(e||kF,r)}function ume(n){switch(n){case 5126:return Hpe;case 35664:return Gpe;case 35665:return Ype;case 35666:return jpe;case 35674:return qpe;case 35675:return Zpe;case 35676:return Kpe;case 5124:case 35670:return Jpe;case 35667:case 35671:return eme;case 35668:case 35672:return tme;case 35669:case 35673:return ime;case 5125:return nme;case 36294:return rme;case 36295:return sme;case 36296:return ome;case 35678:case 36198:case 36298:case 36306:case 35682:return ame;case 35679:case 36299:case 36307:return lme;case 35680:case 36300:case 36308:case 36293:return cme;case 36289:case 36303:case 36311:case 36292:return hme}}function dme(n,e){n.uniform1fv(this.addr,e)}function fme(n,e){const i=Wp(e,this.size,2);n.uniform2fv(this.addr,i)}function pme(n,e){const i=Wp(e,this.size,3);n.uniform3fv(this.addr,i)}function mme(n,e){const i=Wp(e,this.size,4);n.uniform4fv(this.addr,i)}function gme(n,e){const i=Wp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,i)}function vme(n,e){const i=Wp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,i)}function yme(n,e){const i=Wp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,i)}function bme(n,e){n.uniform1iv(this.addr,e)}function xme(n,e){n.uniform2iv(this.addr,e)}function Ome(n,e){n.uniform3iv(this.addr,e)}function wme(n,e){n.uniform4iv(this.addr,e)}function _me(n,e){n.uniform1uiv(this.addr,e)}function Sme(n,e){n.uniform2uiv(this.addr,e)}function Cme(n,e){n.uniform3uiv(this.addr,e)}function kme(n,e){n.uniform4uiv(this.addr,e)}function Tme(n,e,i){const t=this.cache,r=e.length,s=ww(i,r);br(t,s)||(n.uniform1iv(this.addr,s),xr(t,s));for(let o=0;o!==r;++o)i.setTexture2D(e[o]||SF,s[o])}function Mme(n,e,i){const t=this.cache,r=e.length,s=ww(i,r);br(t,s)||(n.uniform1iv(this.addr,s),xr(t,s));for(let o=0;o!==r;++o)i.setTexture3D(e[o]||TF,s[o])}function Eme(n,e,i){const t=this.cache,r=e.length,s=ww(i,r);br(t,s)||(n.uniform1iv(this.addr,s),xr(t,s));for(let o=0;o!==r;++o)i.setTextureCube(e[o]||MF,s[o])}function Pme(n,e,i){const t=this.cache,r=e.length,s=ww(i,r);br(t,s)||(n.uniform1iv(this.addr,s),xr(t,s));for(let o=0;o!==r;++o)i.setTexture2DArray(e[o]||kF,s[o])}function Ame(n){switch(n){case 5126:return dme;case 35664:return fme;case 35665:return pme;case 35666:return mme;case 35674:return gme;case 35675:return vme;case 35676:return yme;case 5124:case 35670:return bme;case 35667:case 35671:return xme;case 35668:case 35672:return Ome;case 35669:case 35673:return wme;case 5125:return _me;case 36294:return Sme;case 36295:return Cme;case 36296:return kme;case 35678:case 36198:case 36298:case 36306:case 35682:return Tme;case 35679:case 36299:case 36307:return Mme;case 35680:case 36300:case 36308:case 36293:return Eme;case 36289:case 36303:case 36311:case 36292:return Pme}}class Rme{constructor(e,i,t){this.id=e,this.addr=t,this.cache=[],this.type=i.type,this.setValue=ume(i.type)}}class Ime{constructor(e,i,t){this.id=e,this.addr=t,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=Ame(i.type)}}class Dme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,i,t){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,i[l.id],t)}}}const OC=/(\w+)(\])?(\[|\.)?/g;function u6(n,e){n.seq.push(e),n.map[e.id]=e}function Nme(n,e,i){const t=n.name,r=t.length;for(OC.lastIndex=0;;){const s=OC.exec(t),o=OC.lastIndex;let l=s[1];const c=s[2]==="]",u=s[3];if(c&&(l=l|0),u===void 0||u==="["&&o+2===r){u6(i,u===void 0?new Rme(l,n,e):new Ime(l,n,e));break}else{let f=i.map[l];f===void 0&&(f=new Dme(l),u6(i,f)),i=f}}}class Sx{constructor(e,i){this.seq=[],this.map={};const t=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let r=0;r<t;++r){const s=e.getActiveUniform(i,r),o=e.getUniformLocation(i,s.name);Nme(s,o,this)}}setValue(e,i,t,r){const s=this.map[i];s!==void 0&&s.setValue(e,t,r)}setOptional(e,i,t){const r=i[t];r!==void 0&&this.setValue(e,t,r)}static upload(e,i,t,r){for(let s=0,o=i.length;s!==o;++s){const l=i[s],c=t[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,i){const t=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in i&&t.push(o)}return t}}function d6(n,e,i){const t=n.createShader(e);return n.shaderSource(t,i),n.compileShader(t),t}const $me=37297;let Vme=0;function Lme(n,e){const i=n.split(`
`),t=[],r=Math.max(e-6,0),s=Math.min(e+6,i.length);for(let o=r;o<s;o++){const l=o+1;t.push(`${l===e?">":" "} ${l}: ${i[o]}`)}return t.join(`
`)}function Bme(n){const e=Ki.getPrimaries(Ki.workingColorSpace),i=Ki.getPrimaries(n);let t;switch(e===i?t="":e===K0&&i===Z0?t="LinearDisplayP3ToLinearSRGB":e===Z0&&i===K0&&(t="LinearSRGBToLinearDisplayP3"),n){case uc:case Gv:return[t,"LinearTransferOETF"];case vo:case yw:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[t,"LinearTransferOETF"]}}function f6(n,e,i){const t=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(t&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return i.toUpperCase()+`

`+r+`

`+Lme(n.getShaderSource(e),o)}else return r}function Ume(n,e){const i=Bme(e);return`vec4 ${n}( vec4 value ) { return ${i[0]}( ${i[1]}( value ) ); }`}function Fme(n,e){let i;switch(e){case BU:i="Linear";break;case UU:i="Reinhard";break;case FU:i="OptimizedCineon";break;case NE:i="ACESFilmic";break;case XU:i="AgX";break;case WU:i="Neutral";break;case zU:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+n+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function zme(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(a0).join(`
`)}function Xme(n){const e=[];for(const i in n){const t=n[i];t!==!1&&e.push("#define "+i+" "+t)}return e.join(`
`)}function Wme(n,e){const i={},t=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<t;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),i[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return i}function a0(n){return n!==""}function p6(n,e){const i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function m6(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Qme=/^[ \t]*#include +<([\w\d./]+)>/gm;function mT(n){return n.replace(Qme,Gme)}const Hme=new Map;function Gme(n,e){let i=mi[e];if(i===void 0){const t=Hme.get(e);if(t!==void 0)i=mi[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t);else throw new Error("Can not resolve #include <"+e+">")}return mT(i)}const Yme=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function g6(n){return n.replace(Yme,jme)}function jme(n,e,i,t){let r="";for(let s=parseInt(e);s<parseInt(i);s++)r+=t.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function v6(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function qme(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===IE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===DE?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ga&&(e="SHADOWMAP_TYPE_VSM"),e}function Zme(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ic:case Oh:e="ENVMAP_TYPE_CUBE";break;case Fp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Kme(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Oh:e="ENVMAP_MODE_REFRACTION";break}return e}function Jme(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Hv:e="ENVMAP_BLENDING_MULTIPLY";break;case VU:e="ENVMAP_BLENDING_MIX";break;case LU:e="ENVMAP_BLENDING_ADD";break}return e}function ege(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const i=Math.log2(e)-2,t=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:t,maxMip:i}}function tge(n,e,i,t){const r=n.getContext(),s=i.defines;let o=i.vertexShader,l=i.fragmentShader;const c=qme(i),u=Zme(i),d=Kme(i),f=Jme(i),m=ege(i),g=zme(i),y=Xme(s),x=r.createProgram();let b,S,_=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(b=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y].filter(a0).join(`
`),b.length>0&&(b+=`
`),S=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y].filter(a0).join(`
`),S.length>0&&(S+=`
`)):(b=[v6(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(a0).join(`
`),S=[v6(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.envMap?"#define "+d:"",i.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==jl?"#define TONE_MAPPING":"",i.toneMapping!==jl?mi.tonemapping_pars_fragment:"",i.toneMapping!==jl?Fme("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",mi.colorspace_pars_fragment,Ume("linearToOutputTexel",i.outputColorSpace),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(a0).join(`
`)),o=mT(o),o=p6(o,i),o=m6(o,i),l=mT(l),l=p6(l,i),l=m6(l,i),o=g6(o),l=g6(l),i.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,b=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,S=["#define varying in",i.glslVersion===fT?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===fT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const O=_+b+o,k=_+S+l,M=d6(r,r.VERTEX_SHADER,O),E=d6(r,r.FRAGMENT_SHADER,k);r.attachShader(x,M),r.attachShader(x,E),i.index0AttributeName!==void 0?r.bindAttribLocation(x,0,i.index0AttributeName):i.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function R(N){if(n.debug.checkShaderErrors){const L=r.getProgramInfoLog(x).trim(),D=r.getShaderInfoLog(M).trim(),$=r.getShaderInfoLog(E).trim();let B=!0,U=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(B=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,M,E);else{const Q=f6(r,M,"vertex"),Z=f6(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+L+`
`+Q+`
`+Z)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(D===""||$==="")&&(U=!1);U&&(N.diagnostics={runnable:B,programLog:L,vertexShader:{log:D,prefix:b},fragmentShader:{log:$,prefix:S}})}r.deleteShader(M),r.deleteShader(E),P=new Sx(r,x),I=Wme(r,x)}let P;this.getUniforms=function(){return P===void 0&&R(this),P};let I;this.getAttributes=function(){return I===void 0&&R(this),I};let T=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=r.getProgramParameter(x,$me)),T},this.destroy=function(){t.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=Vme++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=M,this.fragmentShader=E,this}let ige=0;class nge{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.vertexShader,t=e.fragmentShader,r=this._getShaderStage(i),s=this._getShaderStage(t),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const i=this.materialCache.get(e);for(const t of i)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const i=this.materialCache;let t=i.get(e);return t===void 0&&(t=new Set,i.set(e,t)),t}_getShaderStage(e){const i=this.shaderCache;let t=i.get(e);return t===void 0&&(t=new rge(e),i.set(e,t)),t}}class rge{constructor(e){this.id=ige++,this.code=e,this.usedTimes=0}}function sge(n,e,i,t,r,s,o){const l=new xw,c=new nge,u=new Set,d=[],f=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(I){return u.add(I),I===0?"uv":`uv${I}`}function b(I,T,N,L,D){const $=L.fog,B=D.geometry,U=I.isMeshStandardMaterial?L.environment:null,Q=(I.isMeshStandardMaterial?i:e).get(I.envMap||U),Z=Q&&Q.mapping===Fp?Q.image.height:null,te=y[I.type];I.precision!==null&&(g=r.getMaxPrecision(I.precision),g!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",g,"instead."));const ce=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,pe=ce!==void 0?ce.length:0;let Ee=0;B.morphAttributes.position!==void 0&&(Ee=1),B.morphAttributes.normal!==void 0&&(Ee=2),B.morphAttributes.color!==void 0&&(Ee=3);let we,he,_e,Ce;if(te){const yi=Lo[te];we=yi.vertexShader,he=yi.fragmentShader}else we=I.vertexShader,he=I.fragmentShader,c.update(I),_e=c.getVertexShaderID(I),Ce=c.getFragmentShaderID(I);const K=n.getRenderTarget(),j=D.isInstancedMesh===!0,F=D.isBatchedMesh===!0,z=!!I.map,ee=!!I.matcap,re=!!Q,W=!!I.aoMap,q=!!I.lightMap,ae=!!I.bumpMap,fe=!!I.normalMap,ye=!!I.displacementMap,Me=!!I.emissiveMap,J=!!I.metalnessMap,G=!!I.roughnessMap,ue=I.anisotropy>0,de=I.clearcoat>0,Oe=I.dispersion>0,Te=I.iridescence>0,We=I.sheen>0,Ve=I.transmission>0,Fe=ue&&!!I.anisotropyMap,rt=de&&!!I.clearcoatMap,Ge=de&&!!I.clearcoatNormalMap,nt=de&&!!I.clearcoatRoughnessMap,kt=Te&&!!I.iridescenceMap,Tt=Te&&!!I.iridescenceThicknessMap,ut=We&&!!I.sheenColorMap,zt=We&&!!I.sheenRoughnessMap,li=!!I.specularMap,Se=!!I.specularColorMap,Le=!!I.specularIntensityMap,me=Ve&&!!I.transmissionMap,Be=Ve&&!!I.thicknessMap,Xe=!!I.gradientMap,tt=!!I.alphaMap,dt=I.alphaTest>0,_i=!!I.alphaHash,Si=!!I.extensions;let Di=jl;I.toneMapped&&(K===null||K.isXRRenderTarget===!0)&&(Di=n.toneMapping);const Sn={shaderID:te,shaderType:I.type,shaderName:I.name,vertexShader:we,fragmentShader:he,defines:I.defines,customVertexShaderID:_e,customFragmentShaderID:Ce,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:g,batching:F,instancing:j,instancingColor:j&&D.instanceColor!==null,instancingMorph:j&&D.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:K===null?n.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:uc,alphaToCoverage:!!I.alphaToCoverage,map:z,matcap:ee,envMap:re,envMapMode:re&&Q.mapping,envMapCubeUVHeight:Z,aoMap:W,lightMap:q,bumpMap:ae,normalMap:fe,displacementMap:m&&ye,emissiveMap:Me,normalMapObjectSpace:fe&&I.normalMapType===oF,normalMapTangentSpace:fe&&I.normalMapType===Dh,metalnessMap:J,roughnessMap:G,anisotropy:ue,anisotropyMap:Fe,clearcoat:de,clearcoatMap:rt,clearcoatNormalMap:Ge,clearcoatRoughnessMap:nt,dispersion:Oe,iridescence:Te,iridescenceMap:kt,iridescenceThicknessMap:Tt,sheen:We,sheenColorMap:ut,sheenRoughnessMap:zt,specularMap:li,specularColorMap:Se,specularIntensityMap:Le,transmission:Ve,transmissionMap:me,thicknessMap:Be,gradientMap:Xe,opaque:I.transparent===!1&&I.blending===Gu&&I.alphaToCoverage===!1,alphaMap:tt,alphaTest:dt,alphaHash:_i,combine:I.combine,mapUv:z&&x(I.map.channel),aoMapUv:W&&x(I.aoMap.channel),lightMapUv:q&&x(I.lightMap.channel),bumpMapUv:ae&&x(I.bumpMap.channel),normalMapUv:fe&&x(I.normalMap.channel),displacementMapUv:ye&&x(I.displacementMap.channel),emissiveMapUv:Me&&x(I.emissiveMap.channel),metalnessMapUv:J&&x(I.metalnessMap.channel),roughnessMapUv:G&&x(I.roughnessMap.channel),anisotropyMapUv:Fe&&x(I.anisotropyMap.channel),clearcoatMapUv:rt&&x(I.clearcoatMap.channel),clearcoatNormalMapUv:Ge&&x(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:nt&&x(I.clearcoatRoughnessMap.channel),iridescenceMapUv:kt&&x(I.iridescenceMap.channel),iridescenceThicknessMapUv:Tt&&x(I.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&x(I.sheenColorMap.channel),sheenRoughnessMapUv:zt&&x(I.sheenRoughnessMap.channel),specularMapUv:li&&x(I.specularMap.channel),specularColorMapUv:Se&&x(I.specularColorMap.channel),specularIntensityMapUv:Le&&x(I.specularIntensityMap.channel),transmissionMapUv:me&&x(I.transmissionMap.channel),thicknessMapUv:Be&&x(I.thicknessMap.channel),alphaMapUv:tt&&x(I.alphaMap.channel),vertexTangents:!!B.attributes.tangent&&(fe||ue),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,pointsUvs:D.isPoints===!0&&!!B.attributes.uv&&(z||tt),fog:!!$,useFog:I.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:D.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:pe,morphTextureStride:Ee,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Di,useLegacyLights:n._useLegacyLights,decodeVideoTexture:z&&I.map.isVideoTexture===!0&&Ki.getTransfer(I.map.colorSpace)===fn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Xs,flipSided:I.side===ts,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Si&&I.extensions.clipCullDistance===!0&&t.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Si&&I.extensions.multiDraw===!0&&t.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:t.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Sn.vertexUv1s=u.has(1),Sn.vertexUv2s=u.has(2),Sn.vertexUv3s=u.has(3),u.clear(),Sn}function S(I){const T=[];if(I.shaderID?T.push(I.shaderID):(T.push(I.customVertexShaderID),T.push(I.customFragmentShaderID)),I.defines!==void 0)for(const N in I.defines)T.push(N),T.push(I.defines[N]);return I.isRawShaderMaterial===!1&&(_(T,I),O(T,I),T.push(n.outputColorSpace)),T.push(I.customProgramCacheKey),T.join()}function _(I,T){I.push(T.precision),I.push(T.outputColorSpace),I.push(T.envMapMode),I.push(T.envMapCubeUVHeight),I.push(T.mapUv),I.push(T.alphaMapUv),I.push(T.lightMapUv),I.push(T.aoMapUv),I.push(T.bumpMapUv),I.push(T.normalMapUv),I.push(T.displacementMapUv),I.push(T.emissiveMapUv),I.push(T.metalnessMapUv),I.push(T.roughnessMapUv),I.push(T.anisotropyMapUv),I.push(T.clearcoatMapUv),I.push(T.clearcoatNormalMapUv),I.push(T.clearcoatRoughnessMapUv),I.push(T.iridescenceMapUv),I.push(T.iridescenceThicknessMapUv),I.push(T.sheenColorMapUv),I.push(T.sheenRoughnessMapUv),I.push(T.specularMapUv),I.push(T.specularColorMapUv),I.push(T.specularIntensityMapUv),I.push(T.transmissionMapUv),I.push(T.thicknessMapUv),I.push(T.combine),I.push(T.fogExp2),I.push(T.sizeAttenuation),I.push(T.morphTargetsCount),I.push(T.morphAttributeCount),I.push(T.numDirLights),I.push(T.numPointLights),I.push(T.numSpotLights),I.push(T.numSpotLightMaps),I.push(T.numHemiLights),I.push(T.numRectAreaLights),I.push(T.numDirLightShadows),I.push(T.numPointLightShadows),I.push(T.numSpotLightShadows),I.push(T.numSpotLightShadowsWithMaps),I.push(T.numLightProbes),I.push(T.shadowMapType),I.push(T.toneMapping),I.push(T.numClippingPlanes),I.push(T.numClipIntersection),I.push(T.depthPacking)}function O(I,T){l.disableAll(),T.supportsVertexTextures&&l.enable(0),T.instancing&&l.enable(1),T.instancingColor&&l.enable(2),T.instancingMorph&&l.enable(3),T.matcap&&l.enable(4),T.envMap&&l.enable(5),T.normalMapObjectSpace&&l.enable(6),T.normalMapTangentSpace&&l.enable(7),T.clearcoat&&l.enable(8),T.iridescence&&l.enable(9),T.alphaTest&&l.enable(10),T.vertexColors&&l.enable(11),T.vertexAlphas&&l.enable(12),T.vertexUv1s&&l.enable(13),T.vertexUv2s&&l.enable(14),T.vertexUv3s&&l.enable(15),T.vertexTangents&&l.enable(16),T.anisotropy&&l.enable(17),T.alphaHash&&l.enable(18),T.batching&&l.enable(19),T.dispersion&&l.enable(20),I.push(l.mask),l.disableAll(),T.fog&&l.enable(0),T.useFog&&l.enable(1),T.flatShading&&l.enable(2),T.logarithmicDepthBuffer&&l.enable(3),T.skinning&&l.enable(4),T.morphTargets&&l.enable(5),T.morphNormals&&l.enable(6),T.morphColors&&l.enable(7),T.premultipliedAlpha&&l.enable(8),T.shadowMapEnabled&&l.enable(9),T.useLegacyLights&&l.enable(10),T.doubleSided&&l.enable(11),T.flipSided&&l.enable(12),T.useDepthPacking&&l.enable(13),T.dithering&&l.enable(14),T.transmission&&l.enable(15),T.sheen&&l.enable(16),T.opaque&&l.enable(17),T.pointsUvs&&l.enable(18),T.decodeVideoTexture&&l.enable(19),T.alphaToCoverage&&l.enable(20),I.push(l.mask)}function k(I){const T=y[I.type];let N;if(T){const L=Lo[T];N=Yv.clone(L.uniforms)}else N=I.uniforms;return N}function M(I,T){let N;for(let L=0,D=d.length;L<D;L++){const $=d[L];if($.cacheKey===T){N=$,++N.usedTimes;break}}return N===void 0&&(N=new tge(n,T,I,s),d.push(N)),N}function E(I){if(--I.usedTimes===0){const T=d.indexOf(I);d[T]=d[d.length-1],d.pop(),I.destroy()}}function R(I){c.remove(I)}function P(){c.dispose()}return{getParameters:b,getProgramCacheKey:S,getUniforms:k,acquireProgram:M,releaseProgram:E,releaseShaderCache:R,programs:d,dispose:P}}function oge(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function i(s){n.delete(s)}function t(s,o,l){n.get(s)[o]=l}function r(){n=new WeakMap}return{get:e,remove:i,update:t,dispose:r}}function age(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function y6(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function b6(){const n=[];let e=0;const i=[],t=[],r=[];function s(){e=0,i.length=0,t.length=0,r.length=0}function o(f,m,g,y,x,b){let S=n[e];return S===void 0?(S={id:f.id,object:f,geometry:m,material:g,groupOrder:y,renderOrder:f.renderOrder,z:x,group:b},n[e]=S):(S.id=f.id,S.object=f,S.geometry=m,S.material=g,S.groupOrder=y,S.renderOrder=f.renderOrder,S.z=x,S.group=b),e++,S}function l(f,m,g,y,x,b){const S=o(f,m,g,y,x,b);g.transmission>0?t.push(S):g.transparent===!0?r.push(S):i.push(S)}function c(f,m,g,y,x,b){const S=o(f,m,g,y,x,b);g.transmission>0?t.unshift(S):g.transparent===!0?r.unshift(S):i.unshift(S)}function u(f,m){i.length>1&&i.sort(f||age),t.length>1&&t.sort(m||y6),r.length>1&&r.sort(m||y6)}function d(){for(let f=e,m=n.length;f<m;f++){const g=n[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:i,transmissive:t,transparent:r,init:s,push:l,unshift:c,finish:d,sort:u}}function lge(){let n=new WeakMap;function e(t,r){const s=n.get(t);let o;return s===void 0?(o=new b6,n.set(t,[o])):r>=s.length?(o=new b6,s.push(o)):o=s[r],o}function i(){n=new WeakMap}return{get:e,dispose:i}}function cge(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new ne,color:new it};break;case"SpotLight":i={position:new ne,direction:new ne,color:new it,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new ne,color:new it,distance:0,decay:0};break;case"HemisphereLight":i={direction:new ne,skyColor:new it,groundColor:new it};break;case"RectAreaLight":i={color:new it,position:new ne,halfWidth:new ne,halfHeight:new ne};break}return n[e.id]=i,i}}}function hge(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=i,i}}}let uge=0;function dge(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function fge(n){const e=new cge,i=hge(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)t.probe.push(new ne);const r=new ne,s=new pt,o=new pt;function l(u,d){let f=0,m=0,g=0;for(let N=0;N<9;N++)t.probe[N].set(0,0,0);let y=0,x=0,b=0,S=0,_=0,O=0,k=0,M=0,E=0,R=0,P=0;u.sort(dge);const I=d===!0?Math.PI:1;for(let N=0,L=u.length;N<L;N++){const D=u[N],$=D.color,B=D.intensity,U=D.distance,Q=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)f+=$.r*B*I,m+=$.g*B*I,g+=$.b*B*I;else if(D.isLightProbe){for(let Z=0;Z<9;Z++)t.probe[Z].addScaledVector(D.sh.coefficients[Z],B);P++}else if(D.isDirectionalLight){const Z=e.get(D);if(Z.color.copy(D.color).multiplyScalar(D.intensity*I),D.castShadow){const te=D.shadow,ce=i.get(D);ce.shadowBias=te.bias,ce.shadowNormalBias=te.normalBias,ce.shadowRadius=te.radius,ce.shadowMapSize=te.mapSize,t.directionalShadow[y]=ce,t.directionalShadowMap[y]=Q,t.directionalShadowMatrix[y]=D.shadow.matrix,O++}t.directional[y]=Z,y++}else if(D.isSpotLight){const Z=e.get(D);Z.position.setFromMatrixPosition(D.matrixWorld),Z.color.copy($).multiplyScalar(B*I),Z.distance=U,Z.coneCos=Math.cos(D.angle),Z.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),Z.decay=D.decay,t.spot[b]=Z;const te=D.shadow;if(D.map&&(t.spotLightMap[E]=D.map,E++,te.updateMatrices(D),D.castShadow&&R++),t.spotLightMatrix[b]=te.matrix,D.castShadow){const ce=i.get(D);ce.shadowBias=te.bias,ce.shadowNormalBias=te.normalBias,ce.shadowRadius=te.radius,ce.shadowMapSize=te.mapSize,t.spotShadow[b]=ce,t.spotShadowMap[b]=Q,M++}b++}else if(D.isRectAreaLight){const Z=e.get(D);Z.color.copy($).multiplyScalar(B),Z.halfWidth.set(D.width*.5,0,0),Z.halfHeight.set(0,D.height*.5,0),t.rectArea[S]=Z,S++}else if(D.isPointLight){const Z=e.get(D);if(Z.color.copy(D.color).multiplyScalar(D.intensity*I),Z.distance=D.distance,Z.decay=D.decay,D.castShadow){const te=D.shadow,ce=i.get(D);ce.shadowBias=te.bias,ce.shadowNormalBias=te.normalBias,ce.shadowRadius=te.radius,ce.shadowMapSize=te.mapSize,ce.shadowCameraNear=te.camera.near,ce.shadowCameraFar=te.camera.far,t.pointShadow[x]=ce,t.pointShadowMap[x]=Q,t.pointShadowMatrix[x]=D.shadow.matrix,k++}t.point[x]=Z,x++}else if(D.isHemisphereLight){const Z=e.get(D);Z.skyColor.copy(D.color).multiplyScalar(B*I),Z.groundColor.copy(D.groundColor).multiplyScalar(B*I),t.hemi[_]=Z,_++}}S>0&&(n.has("OES_texture_float_linear")===!0?(t.rectAreaLTC1=at.LTC_FLOAT_1,t.rectAreaLTC2=at.LTC_FLOAT_2):(t.rectAreaLTC1=at.LTC_HALF_1,t.rectAreaLTC2=at.LTC_HALF_2)),t.ambient[0]=f,t.ambient[1]=m,t.ambient[2]=g;const T=t.hash;(T.directionalLength!==y||T.pointLength!==x||T.spotLength!==b||T.rectAreaLength!==S||T.hemiLength!==_||T.numDirectionalShadows!==O||T.numPointShadows!==k||T.numSpotShadows!==M||T.numSpotMaps!==E||T.numLightProbes!==P)&&(t.directional.length=y,t.spot.length=b,t.rectArea.length=S,t.point.length=x,t.hemi.length=_,t.directionalShadow.length=O,t.directionalShadowMap.length=O,t.pointShadow.length=k,t.pointShadowMap.length=k,t.spotShadow.length=M,t.spotShadowMap.length=M,t.directionalShadowMatrix.length=O,t.pointShadowMatrix.length=k,t.spotLightMatrix.length=M+E-R,t.spotLightMap.length=E,t.numSpotLightShadowsWithMaps=R,t.numLightProbes=P,T.directionalLength=y,T.pointLength=x,T.spotLength=b,T.rectAreaLength=S,T.hemiLength=_,T.numDirectionalShadows=O,T.numPointShadows=k,T.numSpotShadows=M,T.numSpotMaps=E,T.numLightProbes=P,t.version=uge++)}function c(u,d){let f=0,m=0,g=0,y=0,x=0;const b=d.matrixWorldInverse;for(let S=0,_=u.length;S<_;S++){const O=u[S];if(O.isDirectionalLight){const k=t.directional[f];k.direction.setFromMatrixPosition(O.matrixWorld),r.setFromMatrixPosition(O.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(b),f++}else if(O.isSpotLight){const k=t.spot[g];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(b),k.direction.setFromMatrixPosition(O.matrixWorld),r.setFromMatrixPosition(O.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(b),g++}else if(O.isRectAreaLight){const k=t.rectArea[y];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(b),o.identity(),s.copy(O.matrixWorld),s.premultiply(b),o.extractRotation(s),k.halfWidth.set(O.width*.5,0,0),k.halfHeight.set(0,O.height*.5,0),k.halfWidth.applyMatrix4(o),k.halfHeight.applyMatrix4(o),y++}else if(O.isPointLight){const k=t.point[m];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(b),m++}else if(O.isHemisphereLight){const k=t.hemi[x];k.direction.setFromMatrixPosition(O.matrixWorld),k.direction.transformDirection(b),x++}}}return{setup:l,setupView:c,state:t}}function x6(n){const e=new fge(n),i=[],t=[];function r(d){u.camera=d,i.length=0,t.length=0}function s(d){i.push(d)}function o(d){t.push(d)}function l(d){e.setup(i,d)}function c(d){e.setupView(i,d)}const u={lightsArray:i,shadowsArray:t,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function pge(n){let e=new WeakMap;function i(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new x6(n),e.set(r,[l])):s>=o.length?(l=new x6(n),o.push(l)):l=o[s],l}function t(){e=new WeakMap}return{get:i,dispose:t}}class ZE extends ns{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=rF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class KE extends ns{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const mge=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,gge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vge(n,e,i){let t=new Zv;const r=new ze,s=new ze,o=new bi,l=new ZE({depthPacking:sF}),c=new KE,u={},d=i.maxTextureSize,f={[tc]:ts,[ts]:tc,[Xs]:Xs},m=new ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:mge,fragmentShader:gge}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const y=new ni;y.setAttribute("position",new Ri(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new tn(y,m),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=IE;let S=this.type;this.render=function(E,R,P){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||E.length===0)return;const I=n.getRenderTarget(),T=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),L=n.state;L.setBlending(Yl),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const D=S!==Ga&&this.type===Ga,$=S===Ga&&this.type!==Ga;for(let B=0,U=E.length;B<U;B++){const Q=E[B],Z=Q.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;r.copy(Z.mapSize);const te=Z.getFrameExtents();if(r.multiply(te),s.copy(Z.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/te.x),r.x=s.x*te.x,Z.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/te.y),r.y=s.y*te.y,Z.mapSize.y=s.y)),Z.map===null||D===!0||$===!0){const pe=this.type!==Ga?{minFilter:fr,magFilter:fr}:{};Z.map!==null&&Z.map.dispose(),Z.map=new Zo(r.x,r.y,pe),Z.map.texture.name=Q.name+".shadowMap",Z.camera.updateProjectionMatrix()}n.setRenderTarget(Z.map),n.clear();const ce=Z.getViewportCount();for(let pe=0;pe<ce;pe++){const Ee=Z.getViewport(pe);o.set(s.x*Ee.x,s.y*Ee.y,s.x*Ee.z,s.y*Ee.w),L.viewport(o),Z.updateMatrices(Q,pe),t=Z.getFrustum(),k(R,P,Z.camera,Q,this.type)}Z.isPointLightShadow!==!0&&this.type===Ga&&_(Z,P),Z.needsUpdate=!1}S=this.type,b.needsUpdate=!1,n.setRenderTarget(I,T,N)};function _(E,R){const P=e.update(x);m.defines.VSM_SAMPLES!==E.blurSamples&&(m.defines.VSM_SAMPLES=E.blurSamples,g.defines.VSM_SAMPLES=E.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new Zo(r.x,r.y)),m.uniforms.shadow_pass.value=E.map.texture,m.uniforms.resolution.value=E.mapSize,m.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(R,null,P,m,x,null),g.uniforms.shadow_pass.value=E.mapPass.texture,g.uniforms.resolution.value=E.mapSize,g.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(R,null,P,g,x,null)}function O(E,R,P,I){let T=null;const N=P.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(N!==void 0)T=N;else if(T=P.isPointLight===!0?c:l,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const L=T.uuid,D=R.uuid;let $=u[L];$===void 0&&($={},u[L]=$);let B=$[D];B===void 0&&(B=T.clone(),$[D]=B,R.addEventListener("dispose",M)),T=B}if(T.visible=R.visible,T.wireframe=R.wireframe,I===Ga?T.side=R.shadowSide!==null?R.shadowSide:R.side:T.side=R.shadowSide!==null?R.shadowSide:f[R.side],T.alphaMap=R.alphaMap,T.alphaTest=R.alphaTest,T.map=R.map,T.clipShadows=R.clipShadows,T.clippingPlanes=R.clippingPlanes,T.clipIntersection=R.clipIntersection,T.displacementMap=R.displacementMap,T.displacementScale=R.displacementScale,T.displacementBias=R.displacementBias,T.wireframeLinewidth=R.wireframeLinewidth,T.linewidth=R.linewidth,P.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const L=n.properties.get(T);L.light=P}return T}function k(E,R,P,I,T){if(E.visible===!1)return;if(E.layers.test(R.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&T===Ga)&&(!E.frustumCulled||t.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,E.matrixWorld);const D=e.update(E),$=E.material;if(Array.isArray($)){const B=D.groups;for(let U=0,Q=B.length;U<Q;U++){const Z=B[U],te=$[Z.materialIndex];if(te&&te.visible){const ce=O(E,te,I,T);E.onBeforeShadow(n,E,R,P,D,ce,Z),n.renderBufferDirect(P,null,D,ce,E,Z),E.onAfterShadow(n,E,R,P,D,ce,Z)}}}else if($.visible){const B=O(E,$,I,T);E.onBeforeShadow(n,E,R,P,D,B,null),n.renderBufferDirect(P,null,D,B,E,null),E.onAfterShadow(n,E,R,P,D,B,null)}}const L=E.children;for(let D=0,$=L.length;D<$;D++)k(L[D],R,P,I,T)}function M(E){E.target.removeEventListener("dispose",M);for(const P in u){const I=u[P],T=E.target.uuid;T in I&&(I[T].dispose(),delete I[T])}}}function yge(n){function e(){let me=!1;const Be=new bi;let Xe=null;const tt=new bi(0,0,0,0);return{setMask:function(dt){Xe!==dt&&!me&&(n.colorMask(dt,dt,dt,dt),Xe=dt)},setLocked:function(dt){me=dt},setClear:function(dt,_i,Si,Di,Sn){Sn===!0&&(dt*=Di,_i*=Di,Si*=Di),Be.set(dt,_i,Si,Di),tt.equals(Be)===!1&&(n.clearColor(dt,_i,Si,Di),tt.copy(Be))},reset:function(){me=!1,Xe=null,tt.set(-1,0,0,0)}}}function i(){let me=!1,Be=null,Xe=null,tt=null;return{setTest:function(dt){dt?Ce(n.DEPTH_TEST):K(n.DEPTH_TEST)},setMask:function(dt){Be!==dt&&!me&&(n.depthMask(dt),Be=dt)},setFunc:function(dt){if(Xe!==dt){switch(dt){case PU:n.depthFunc(n.NEVER);break;case AU:n.depthFunc(n.ALWAYS);break;case RU:n.depthFunc(n.LESS);break;case G0:n.depthFunc(n.LEQUAL);break;case IU:n.depthFunc(n.EQUAL);break;case DU:n.depthFunc(n.GEQUAL);break;case NU:n.depthFunc(n.GREATER);break;case $U:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Xe=dt}},setLocked:function(dt){me=dt},setClear:function(dt){tt!==dt&&(n.clearDepth(dt),tt=dt)},reset:function(){me=!1,Be=null,Xe=null,tt=null}}}function t(){let me=!1,Be=null,Xe=null,tt=null,dt=null,_i=null,Si=null,Di=null,Sn=null;return{setTest:function(yi){me||(yi?Ce(n.STENCIL_TEST):K(n.STENCIL_TEST))},setMask:function(yi){Be!==yi&&!me&&(n.stencilMask(yi),Be=yi)},setFunc:function(yi,Or,En){(Xe!==yi||tt!==Or||dt!==En)&&(n.stencilFunc(yi,Or,En),Xe=yi,tt=Or,dt=En)},setOp:function(yi,Or,En){(_i!==yi||Si!==Or||Di!==En)&&(n.stencilOp(yi,Or,En),_i=yi,Si=Or,Di=En)},setLocked:function(yi){me=yi},setClear:function(yi){Sn!==yi&&(n.clearStencil(yi),Sn=yi)},reset:function(){me=!1,Be=null,Xe=null,tt=null,dt=null,_i=null,Si=null,Di=null,Sn=null}}}const r=new e,s=new i,o=new t,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,m=[],g=null,y=!1,x=null,b=null,S=null,_=null,O=null,k=null,M=null,E=new it(0,0,0),R=0,P=!1,I=null,T=null,N=null,L=null,D=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let B=!1,U=0;const Q=n.getParameter(n.VERSION);Q.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(Q)[1]),B=U>=1):Q.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),B=U>=2);let Z=null,te={};const ce=n.getParameter(n.SCISSOR_BOX),pe=n.getParameter(n.VIEWPORT),Ee=new bi().fromArray(ce),we=new bi().fromArray(pe);function he(me,Be,Xe,tt){const dt=new Uint8Array(4),_i=n.createTexture();n.bindTexture(me,_i),n.texParameteri(me,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(me,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Si=0;Si<Xe;Si++)me===n.TEXTURE_3D||me===n.TEXTURE_2D_ARRAY?n.texImage3D(Be,0,n.RGBA,1,1,tt,0,n.RGBA,n.UNSIGNED_BYTE,dt):n.texImage2D(Be+Si,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,dt);return _i}const _e={};_e[n.TEXTURE_2D]=he(n.TEXTURE_2D,n.TEXTURE_2D,1),_e[n.TEXTURE_CUBE_MAP]=he(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),_e[n.TEXTURE_2D_ARRAY]=he(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),_e[n.TEXTURE_3D]=he(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ce(n.DEPTH_TEST),s.setFunc(G0),ae(!1),fe($k),Ce(n.CULL_FACE),W(Yl);function Ce(me){u[me]!==!0&&(n.enable(me),u[me]=!0)}function K(me){u[me]!==!1&&(n.disable(me),u[me]=!1)}function j(me,Be){return d[me]!==Be?(n.bindFramebuffer(me,Be),d[me]=Be,me===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Be),me===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Be),!0):!1}function F(me,Be){let Xe=m,tt=!1;if(me){Xe=f.get(Be),Xe===void 0&&(Xe=[],f.set(Be,Xe));const dt=me.textures;if(Xe.length!==dt.length||Xe[0]!==n.COLOR_ATTACHMENT0){for(let _i=0,Si=dt.length;_i<Si;_i++)Xe[_i]=n.COLOR_ATTACHMENT0+_i;Xe.length=dt.length,tt=!0}}else Xe[0]!==n.BACK&&(Xe[0]=n.BACK,tt=!0);tt&&n.drawBuffers(Xe)}function z(me){return g!==me?(n.useProgram(me),g=me,!0):!1}const ee={[ih]:n.FUNC_ADD,[fU]:n.FUNC_SUBTRACT,[pU]:n.FUNC_REVERSE_SUBTRACT};ee[mU]=n.MIN,ee[gU]=n.MAX;const re={[vU]:n.ZERO,[yU]:n.ONE,[bU]:n.SRC_COLOR,[oO]:n.SRC_ALPHA,[CU]:n.SRC_ALPHA_SATURATE,[_U]:n.DST_COLOR,[OU]:n.DST_ALPHA,[xU]:n.ONE_MINUS_SRC_COLOR,[aO]:n.ONE_MINUS_SRC_ALPHA,[SU]:n.ONE_MINUS_DST_COLOR,[wU]:n.ONE_MINUS_DST_ALPHA,[kU]:n.CONSTANT_COLOR,[TU]:n.ONE_MINUS_CONSTANT_COLOR,[MU]:n.CONSTANT_ALPHA,[EU]:n.ONE_MINUS_CONSTANT_ALPHA};function W(me,Be,Xe,tt,dt,_i,Si,Di,Sn,yi){if(me===Yl){y===!0&&(K(n.BLEND),y=!1);return}if(y===!1&&(Ce(n.BLEND),y=!0),me!==dU){if(me!==x||yi!==P){if((b!==ih||O!==ih)&&(n.blendEquation(n.FUNC_ADD),b=ih,O=ih),yi)switch(me){case Gu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case sO:n.blendFunc(n.ONE,n.ONE);break;case Vk:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Lk:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",me);break}else switch(me){case Gu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case sO:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Vk:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Lk:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",me);break}S=null,_=null,k=null,M=null,E.set(0,0,0),R=0,x=me,P=yi}return}dt=dt||Be,_i=_i||Xe,Si=Si||tt,(Be!==b||dt!==O)&&(n.blendEquationSeparate(ee[Be],ee[dt]),b=Be,O=dt),(Xe!==S||tt!==_||_i!==k||Si!==M)&&(n.blendFuncSeparate(re[Xe],re[tt],re[_i],re[Si]),S=Xe,_=tt,k=_i,M=Si),(Di.equals(E)===!1||Sn!==R)&&(n.blendColor(Di.r,Di.g,Di.b,Sn),E.copy(Di),R=Sn),x=me,P=!1}function q(me,Be){me.side===Xs?K(n.CULL_FACE):Ce(n.CULL_FACE);let Xe=me.side===ts;Be&&(Xe=!Xe),ae(Xe),me.blending===Gu&&me.transparent===!1?W(Yl):W(me.blending,me.blendEquation,me.blendSrc,me.blendDst,me.blendEquationAlpha,me.blendSrcAlpha,me.blendDstAlpha,me.blendColor,me.blendAlpha,me.premultipliedAlpha),s.setFunc(me.depthFunc),s.setTest(me.depthTest),s.setMask(me.depthWrite),r.setMask(me.colorWrite);const tt=me.stencilWrite;o.setTest(tt),tt&&(o.setMask(me.stencilWriteMask),o.setFunc(me.stencilFunc,me.stencilRef,me.stencilFuncMask),o.setOp(me.stencilFail,me.stencilZFail,me.stencilZPass)),Me(me.polygonOffset,me.polygonOffsetFactor,me.polygonOffsetUnits),me.alphaToCoverage===!0?Ce(n.SAMPLE_ALPHA_TO_COVERAGE):K(n.SAMPLE_ALPHA_TO_COVERAGE)}function ae(me){I!==me&&(me?n.frontFace(n.CW):n.frontFace(n.CCW),I=me)}function fe(me){me!==hU?(Ce(n.CULL_FACE),me!==T&&(me===$k?n.cullFace(n.BACK):me===uU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):K(n.CULL_FACE),T=me}function ye(me){me!==N&&(B&&n.lineWidth(me),N=me)}function Me(me,Be,Xe){me?(Ce(n.POLYGON_OFFSET_FILL),(L!==Be||D!==Xe)&&(n.polygonOffset(Be,Xe),L=Be,D=Xe)):K(n.POLYGON_OFFSET_FILL)}function J(me){me?Ce(n.SCISSOR_TEST):K(n.SCISSOR_TEST)}function G(me){me===void 0&&(me=n.TEXTURE0+$-1),Z!==me&&(n.activeTexture(me),Z=me)}function ue(me,Be,Xe){Xe===void 0&&(Z===null?Xe=n.TEXTURE0+$-1:Xe=Z);let tt=te[Xe];tt===void 0&&(tt={type:void 0,texture:void 0},te[Xe]=tt),(tt.type!==me||tt.texture!==Be)&&(Z!==Xe&&(n.activeTexture(Xe),Z=Xe),n.bindTexture(me,Be||_e[me]),tt.type=me,tt.texture=Be)}function de(){const me=te[Z];me!==void 0&&me.type!==void 0&&(n.bindTexture(me.type,null),me.type=void 0,me.texture=void 0)}function Oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Te(){try{n.compressedTexImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function We(){try{n.texSubImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Ve(){try{n.texSubImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Fe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function rt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Ge(){try{n.texStorage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function nt(){try{n.texStorage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function kt(){try{n.texImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Tt(){try{n.texImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function ut(me){Ee.equals(me)===!1&&(n.scissor(me.x,me.y,me.z,me.w),Ee.copy(me))}function zt(me){we.equals(me)===!1&&(n.viewport(me.x,me.y,me.z,me.w),we.copy(me))}function li(me,Be){let Xe=c.get(Be);Xe===void 0&&(Xe=new WeakMap,c.set(Be,Xe));let tt=Xe.get(me);tt===void 0&&(tt=n.getUniformBlockIndex(Be,me.name),Xe.set(me,tt))}function Se(me,Be){const tt=c.get(Be).get(me);l.get(Be)!==tt&&(n.uniformBlockBinding(Be,tt,me.__bindingPointIndex),l.set(Be,tt))}function Le(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},Z=null,te={},d={},f=new WeakMap,m=[],g=null,y=!1,x=null,b=null,S=null,_=null,O=null,k=null,M=null,E=new it(0,0,0),R=0,P=!1,I=null,T=null,N=null,L=null,D=null,Ee.set(0,0,n.canvas.width,n.canvas.height),we.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Ce,disable:K,bindFramebuffer:j,drawBuffers:F,useProgram:z,setBlending:W,setMaterial:q,setFlipSided:ae,setCullFace:fe,setLineWidth:ye,setPolygonOffset:Me,setScissorTest:J,activeTexture:G,bindTexture:ue,unbindTexture:de,compressedTexImage2D:Oe,compressedTexImage3D:Te,texImage2D:kt,texImage3D:Tt,updateUBOMapping:li,uniformBlockBinding:Se,texStorage2D:Ge,texStorage3D:nt,texSubImage2D:We,texSubImage3D:Ve,compressedTexSubImage2D:Fe,compressedTexSubImage3D:rt,scissor:ut,viewport:zt,reset:Le}}function bge(n,e,i,t,r,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new ze,d=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(J,G){return g?new OffscreenCanvas(J,G):tv("canvas")}function x(J,G,ue){let de=1;const Oe=Me(J);if((Oe.width>ue||Oe.height>ue)&&(de=ue/Math.max(Oe.width,Oe.height)),de<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Te=Math.floor(de*Oe.width),We=Math.floor(de*Oe.height);f===void 0&&(f=y(Te,We));const Ve=G?y(Te,We):f;return Ve.width=Te,Ve.height=We,Ve.getContext("2d").drawImage(J,0,0,Te,We),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+Te+"x"+We+")."),Ve}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),J;return J}function b(J){return J.generateMipmaps&&J.minFilter!==fr&&J.minFilter!==Yn}function S(J){n.generateMipmap(J)}function _(J,G,ue,de,Oe=!1){if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Te=G;if(G===n.RED&&(ue===n.FLOAT&&(Te=n.R32F),ue===n.HALF_FLOAT&&(Te=n.R16F),ue===n.UNSIGNED_BYTE&&(Te=n.R8)),G===n.RED_INTEGER&&(ue===n.UNSIGNED_BYTE&&(Te=n.R8UI),ue===n.UNSIGNED_SHORT&&(Te=n.R16UI),ue===n.UNSIGNED_INT&&(Te=n.R32UI),ue===n.BYTE&&(Te=n.R8I),ue===n.SHORT&&(Te=n.R16I),ue===n.INT&&(Te=n.R32I)),G===n.RG&&(ue===n.FLOAT&&(Te=n.RG32F),ue===n.HALF_FLOAT&&(Te=n.RG16F),ue===n.UNSIGNED_BYTE&&(Te=n.RG8)),G===n.RG_INTEGER&&(ue===n.UNSIGNED_BYTE&&(Te=n.RG8UI),ue===n.UNSIGNED_SHORT&&(Te=n.RG16UI),ue===n.UNSIGNED_INT&&(Te=n.RG32UI),ue===n.BYTE&&(Te=n.RG8I),ue===n.SHORT&&(Te=n.RG16I),ue===n.INT&&(Te=n.RG32I)),G===n.RGB&&ue===n.UNSIGNED_INT_5_9_9_9_REV&&(Te=n.RGB9_E5),G===n.RGBA){const We=Oe?q0:Ki.getTransfer(de);ue===n.FLOAT&&(Te=n.RGBA32F),ue===n.HALF_FLOAT&&(Te=n.RGBA16F),ue===n.UNSIGNED_BYTE&&(Te=We===fn?n.SRGB8_ALPHA8:n.RGBA8),ue===n.UNSIGNED_SHORT_4_4_4_4&&(Te=n.RGBA4),ue===n.UNSIGNED_SHORT_5_5_5_1&&(Te=n.RGB5_A1)}return(Te===n.R16F||Te===n.R32F||Te===n.RG16F||Te===n.RG32F||Te===n.RGBA16F||Te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function O(J,G){return b(J)===!0||J.isFramebufferTexture&&J.minFilter!==fr&&J.minFilter!==Yn?Math.log2(Math.max(G.width,G.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?G.mipmaps.length:1}function k(J){const G=J.target;G.removeEventListener("dispose",k),E(G),G.isVideoTexture&&d.delete(G)}function M(J){const G=J.target;G.removeEventListener("dispose",M),P(G)}function E(J){const G=t.get(J);if(G.__webglInit===void 0)return;const ue=J.source,de=m.get(ue);if(de){const Oe=de[G.__cacheKey];Oe.usedTimes--,Oe.usedTimes===0&&R(J),Object.keys(de).length===0&&m.delete(ue)}t.remove(J)}function R(J){const G=t.get(J);n.deleteTexture(G.__webglTexture);const ue=J.source,de=m.get(ue);delete de[G.__cacheKey],o.memory.textures--}function P(J){const G=t.get(J);if(J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(G.__webglFramebuffer[de]))for(let Oe=0;Oe<G.__webglFramebuffer[de].length;Oe++)n.deleteFramebuffer(G.__webglFramebuffer[de][Oe]);else n.deleteFramebuffer(G.__webglFramebuffer[de]);G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer[de])}else{if(Array.isArray(G.__webglFramebuffer))for(let de=0;de<G.__webglFramebuffer.length;de++)n.deleteFramebuffer(G.__webglFramebuffer[de]);else n.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&n.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let de=0;de<G.__webglColorRenderbuffer.length;de++)G.__webglColorRenderbuffer[de]&&n.deleteRenderbuffer(G.__webglColorRenderbuffer[de]);G.__webglDepthRenderbuffer&&n.deleteRenderbuffer(G.__webglDepthRenderbuffer)}const ue=J.textures;for(let de=0,Oe=ue.length;de<Oe;de++){const Te=t.get(ue[de]);Te.__webglTexture&&(n.deleteTexture(Te.__webglTexture),o.memory.textures--),t.remove(ue[de])}t.remove(J)}let I=0;function T(){I=0}function N(){const J=I;return J>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+r.maxTextures),I+=1,J}function L(J){const G=[];return G.push(J.wrapS),G.push(J.wrapT),G.push(J.wrapR||0),G.push(J.magFilter),G.push(J.minFilter),G.push(J.anisotropy),G.push(J.internalFormat),G.push(J.format),G.push(J.type),G.push(J.generateMipmaps),G.push(J.premultiplyAlpha),G.push(J.flipY),G.push(J.unpackAlignment),G.push(J.colorSpace),G.join()}function D(J,G){const ue=t.get(J);if(J.isVideoTexture&&fe(J),J.isRenderTargetTexture===!1&&J.version>0&&ue.__version!==J.version){const de=J.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ee(ue,J,G);return}}i.bindTexture(n.TEXTURE_2D,ue.__webglTexture,n.TEXTURE0+G)}function $(J,G){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Ee(ue,J,G);return}i.bindTexture(n.TEXTURE_2D_ARRAY,ue.__webglTexture,n.TEXTURE0+G)}function B(J,G){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Ee(ue,J,G);return}i.bindTexture(n.TEXTURE_3D,ue.__webglTexture,n.TEXTURE0+G)}function U(J,G){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){we(ue,J,G);return}i.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture,n.TEXTURE0+G)}const Q={[wh]:n.REPEAT,[bs]:n.CLAMP_TO_EDGE,[fp]:n.MIRRORED_REPEAT},Z={[fr]:n.NEAREST,[gw]:n.NEAREST_MIPMAP_NEAREST,[Du]:n.NEAREST_MIPMAP_LINEAR,[Yn]:n.LINEAR,[Hf]:n.LINEAR_MIPMAP_NEAREST,[Oa]:n.LINEAR_MIPMAP_LINEAR},te={[aF]:n.NEVER,[fF]:n.ALWAYS,[lF]:n.LESS,[QE]:n.LEQUAL,[cF]:n.EQUAL,[dF]:n.GEQUAL,[hF]:n.GREATER,[uF]:n.NOTEQUAL};function ce(J,G){if(G.type===Xo&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===Yn||G.magFilter===Hf||G.magFilter===Du||G.magFilter===Oa||G.minFilter===Yn||G.minFilter===Hf||G.minFilter===Du||G.minFilter===Oa)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,Q[G.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,Q[G.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,Q[G.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,Z[G.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,Z[G.minFilter]),G.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,te[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(G.magFilter===fr||G.minFilter!==Du&&G.minFilter!==Oa||G.type===Xo&&e.has("OES_texture_float_linear")===!1)return;if(G.anisotropy>1||t.get(G).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,r.getMaxAnisotropy())),t.get(G).__currentAnisotropy=G.anisotropy}}}function pe(J,G){let ue=!1;J.__webglInit===void 0&&(J.__webglInit=!0,G.addEventListener("dispose",k));const de=G.source;let Oe=m.get(de);Oe===void 0&&(Oe={},m.set(de,Oe));const Te=L(G);if(Te!==J.__cacheKey){Oe[Te]===void 0&&(Oe[Te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ue=!0),Oe[Te].usedTimes++;const We=Oe[J.__cacheKey];We!==void 0&&(Oe[J.__cacheKey].usedTimes--,We.usedTimes===0&&R(G)),J.__cacheKey=Te,J.__webglTexture=Oe[Te].texture}return ue}function Ee(J,G,ue){let de=n.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(de=n.TEXTURE_2D_ARRAY),G.isData3DTexture&&(de=n.TEXTURE_3D);const Oe=pe(J,G),Te=G.source;i.bindTexture(de,J.__webglTexture,n.TEXTURE0+ue);const We=t.get(Te);if(Te.version!==We.__version||Oe===!0){i.activeTexture(n.TEXTURE0+ue);const Ve=Ki.getPrimaries(Ki.workingColorSpace),Fe=G.colorSpace===Ul?null:Ki.getPrimaries(G.colorSpace),rt=G.colorSpace===Ul||Ve===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,rt);let Ge=x(G.image,!1,r.maxTextureSize);Ge=ye(G,Ge);const nt=s.convert(G.format,G.colorSpace),kt=s.convert(G.type);let Tt=_(G.internalFormat,nt,kt,G.colorSpace,G.isVideoTexture);ce(de,G);let ut;const zt=G.mipmaps,li=G.isVideoTexture!==!0,Se=We.__version===void 0||Oe===!0,Le=Te.dataReady,me=O(G,Ge);if(G.isDepthTexture)Tt=n.DEPTH_COMPONENT16,G.type===Xo?Tt=n.DEPTH_COMPONENT32F:G.type===od?Tt=n.DEPTH_COMPONENT24:G.type===Xp&&(Tt=n.DEPTH24_STENCIL8),Se&&(li?i.texStorage2D(n.TEXTURE_2D,1,Tt,Ge.width,Ge.height):i.texImage2D(n.TEXTURE_2D,0,Tt,Ge.width,Ge.height,0,nt,kt,null));else if(G.isDataTexture)if(zt.length>0){li&&Se&&i.texStorage2D(n.TEXTURE_2D,me,Tt,zt[0].width,zt[0].height);for(let Be=0,Xe=zt.length;Be<Xe;Be++)ut=zt[Be],li?Le&&i.texSubImage2D(n.TEXTURE_2D,Be,0,0,ut.width,ut.height,nt,kt,ut.data):i.texImage2D(n.TEXTURE_2D,Be,Tt,ut.width,ut.height,0,nt,kt,ut.data);G.generateMipmaps=!1}else li?(Se&&i.texStorage2D(n.TEXTURE_2D,me,Tt,Ge.width,Ge.height),Le&&i.texSubImage2D(n.TEXTURE_2D,0,0,0,Ge.width,Ge.height,nt,kt,Ge.data)):i.texImage2D(n.TEXTURE_2D,0,Tt,Ge.width,Ge.height,0,nt,kt,Ge.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){li&&Se&&i.texStorage3D(n.TEXTURE_2D_ARRAY,me,Tt,zt[0].width,zt[0].height,Ge.depth);for(let Be=0,Xe=zt.length;Be<Xe;Be++)ut=zt[Be],G.format!==Gs?nt!==null?li?Le&&i.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Be,0,0,0,ut.width,ut.height,Ge.depth,nt,ut.data,0,0):i.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Be,Tt,ut.width,ut.height,Ge.depth,0,ut.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):li?Le&&i.texSubImage3D(n.TEXTURE_2D_ARRAY,Be,0,0,0,ut.width,ut.height,Ge.depth,nt,kt,ut.data):i.texImage3D(n.TEXTURE_2D_ARRAY,Be,Tt,ut.width,ut.height,Ge.depth,0,nt,kt,ut.data)}else{li&&Se&&i.texStorage2D(n.TEXTURE_2D,me,Tt,zt[0].width,zt[0].height);for(let Be=0,Xe=zt.length;Be<Xe;Be++)ut=zt[Be],G.format!==Gs?nt!==null?li?Le&&i.compressedTexSubImage2D(n.TEXTURE_2D,Be,0,0,ut.width,ut.height,nt,ut.data):i.compressedTexImage2D(n.TEXTURE_2D,Be,Tt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):li?Le&&i.texSubImage2D(n.TEXTURE_2D,Be,0,0,ut.width,ut.height,nt,kt,ut.data):i.texImage2D(n.TEXTURE_2D,Be,Tt,ut.width,ut.height,0,nt,kt,ut.data)}else if(G.isDataArrayTexture)li?(Se&&i.texStorage3D(n.TEXTURE_2D_ARRAY,me,Tt,Ge.width,Ge.height,Ge.depth),Le&&i.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,nt,kt,Ge.data)):i.texImage3D(n.TEXTURE_2D_ARRAY,0,Tt,Ge.width,Ge.height,Ge.depth,0,nt,kt,Ge.data);else if(G.isData3DTexture)li?(Se&&i.texStorage3D(n.TEXTURE_3D,me,Tt,Ge.width,Ge.height,Ge.depth),Le&&i.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,nt,kt,Ge.data)):i.texImage3D(n.TEXTURE_3D,0,Tt,Ge.width,Ge.height,Ge.depth,0,nt,kt,Ge.data);else if(G.isFramebufferTexture){if(Se)if(li)i.texStorage2D(n.TEXTURE_2D,me,Tt,Ge.width,Ge.height);else{let Be=Ge.width,Xe=Ge.height;for(let tt=0;tt<me;tt++)i.texImage2D(n.TEXTURE_2D,tt,Tt,Be,Xe,0,nt,kt,null),Be>>=1,Xe>>=1}}else if(zt.length>0){if(li&&Se){const Be=Me(zt[0]);i.texStorage2D(n.TEXTURE_2D,me,Tt,Be.width,Be.height)}for(let Be=0,Xe=zt.length;Be<Xe;Be++)ut=zt[Be],li?Le&&i.texSubImage2D(n.TEXTURE_2D,Be,0,0,nt,kt,ut):i.texImage2D(n.TEXTURE_2D,Be,Tt,nt,kt,ut);G.generateMipmaps=!1}else if(li){if(Se){const Be=Me(Ge);i.texStorage2D(n.TEXTURE_2D,me,Tt,Be.width,Be.height)}Le&&i.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,kt,Ge)}else i.texImage2D(n.TEXTURE_2D,0,Tt,nt,kt,Ge);b(G)&&S(de),We.__version=Te.version,G.onUpdate&&G.onUpdate(G)}J.__version=G.version}function we(J,G,ue){if(G.image.length!==6)return;const de=pe(J,G),Oe=G.source;i.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+ue);const Te=t.get(Oe);if(Oe.version!==Te.__version||de===!0){i.activeTexture(n.TEXTURE0+ue);const We=Ki.getPrimaries(Ki.workingColorSpace),Ve=G.colorSpace===Ul?null:Ki.getPrimaries(G.colorSpace),Fe=G.colorSpace===Ul||We===Ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const rt=G.isCompressedTexture||G.image[0].isCompressedTexture,Ge=G.image[0]&&G.image[0].isDataTexture,nt=[];for(let Xe=0;Xe<6;Xe++)!rt&&!Ge?nt[Xe]=x(G.image[Xe],!0,r.maxCubemapSize):nt[Xe]=Ge?G.image[Xe].image:G.image[Xe],nt[Xe]=ye(G,nt[Xe]);const kt=nt[0],Tt=s.convert(G.format,G.colorSpace),ut=s.convert(G.type),zt=_(G.internalFormat,Tt,ut,G.colorSpace),li=G.isVideoTexture!==!0,Se=Te.__version===void 0||de===!0,Le=Oe.dataReady;let me=O(G,kt);ce(n.TEXTURE_CUBE_MAP,G);let Be;if(rt){li&&Se&&i.texStorage2D(n.TEXTURE_CUBE_MAP,me,zt,kt.width,kt.height);for(let Xe=0;Xe<6;Xe++){Be=nt[Xe].mipmaps;for(let tt=0;tt<Be.length;tt++){const dt=Be[tt];G.format!==Gs?Tt!==null?li?Le&&i.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt,0,0,dt.width,dt.height,Tt,dt.data):i.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt,zt,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):li?Le&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt,0,0,dt.width,dt.height,Tt,ut,dt.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt,zt,dt.width,dt.height,0,Tt,ut,dt.data)}}}else{if(Be=G.mipmaps,li&&Se){Be.length>0&&me++;const Xe=Me(nt[0]);i.texStorage2D(n.TEXTURE_CUBE_MAP,me,zt,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(Ge){li?Le&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,nt[Xe].width,nt[Xe].height,Tt,ut,nt[Xe].data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,zt,nt[Xe].width,nt[Xe].height,0,Tt,ut,nt[Xe].data);for(let tt=0;tt<Be.length;tt++){const _i=Be[tt].image[Xe].image;li?Le&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt+1,0,0,_i.width,_i.height,Tt,ut,_i.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt+1,zt,_i.width,_i.height,0,Tt,ut,_i.data)}}else{li?Le&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,Tt,ut,nt[Xe]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,zt,Tt,ut,nt[Xe]);for(let tt=0;tt<Be.length;tt++){const dt=Be[tt];li?Le&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt+1,0,0,Tt,ut,dt.image[Xe]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,tt+1,zt,Tt,ut,dt.image[Xe])}}}b(G)&&S(n.TEXTURE_CUBE_MAP),Te.__version=Oe.version,G.onUpdate&&G.onUpdate(G)}J.__version=G.version}function he(J,G,ue,de,Oe,Te){const We=s.convert(ue.format,ue.colorSpace),Ve=s.convert(ue.type),Fe=_(ue.internalFormat,We,Ve,ue.colorSpace);if(!t.get(G).__hasExternalTextures){const Ge=Math.max(1,G.width>>Te),nt=Math.max(1,G.height>>Te);Oe===n.TEXTURE_3D||Oe===n.TEXTURE_2D_ARRAY?i.texImage3D(Oe,Te,Fe,Ge,nt,G.depth,0,We,Ve,null):i.texImage2D(Oe,Te,Fe,Ge,nt,0,We,Ve,null)}i.bindFramebuffer(n.FRAMEBUFFER,J),ae(G)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,de,Oe,t.get(ue).__webglTexture,0,q(G)):(Oe===n.TEXTURE_2D||Oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,de,Oe,t.get(ue).__webglTexture,Te),i.bindFramebuffer(n.FRAMEBUFFER,null)}function _e(J,G,ue){if(n.bindRenderbuffer(n.RENDERBUFFER,J),G.depthBuffer&&!G.stencilBuffer){let de=n.DEPTH_COMPONENT24;if(ue||ae(G)){const Oe=G.depthTexture;Oe&&Oe.isDepthTexture&&(Oe.type===Xo?de=n.DEPTH_COMPONENT32F:Oe.type===od&&(de=n.DEPTH_COMPONENT24));const Te=q(G);ae(G)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,de,G.width,G.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,de,G.width,G.height)}else n.renderbufferStorage(n.RENDERBUFFER,de,G.width,G.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,J)}else if(G.depthBuffer&&G.stencilBuffer){const de=q(G);ue&&ae(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,de,n.DEPTH24_STENCIL8,G.width,G.height):ae(G)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,de,n.DEPTH24_STENCIL8,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,J)}else{const de=G.textures;for(let Oe=0;Oe<de.length;Oe++){const Te=de[Oe],We=s.convert(Te.format,Te.colorSpace),Ve=s.convert(Te.type),Fe=_(Te.internalFormat,We,Ve,Te.colorSpace),rt=q(G);ue&&ae(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,rt,Fe,G.width,G.height):ae(G)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,rt,Fe,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,Fe,G.width,G.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ce(J,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(n.FRAMEBUFFER,J),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),D(G.depthTexture,0);const de=t.get(G.depthTexture).__webglTexture,Oe=q(G);if(G.depthTexture.format===Yu)ae(G)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,de,0,Oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,de,0);else if(G.depthTexture.format===pp)ae(G)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,de,0,Oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,de,0);else throw new Error("Unknown depthTexture format")}function K(J){const G=t.get(J),ue=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!G.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");Ce(G.__webglFramebuffer,J)}else if(ue){G.__webglDepthbuffer=[];for(let de=0;de<6;de++)i.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer[de]),G.__webglDepthbuffer[de]=n.createRenderbuffer(),_e(G.__webglDepthbuffer[de],J,!1)}else i.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer=n.createRenderbuffer(),_e(G.__webglDepthbuffer,J,!1);i.bindFramebuffer(n.FRAMEBUFFER,null)}function j(J,G,ue){const de=t.get(J);G!==void 0&&he(de.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ue!==void 0&&K(J)}function F(J){const G=J.texture,ue=t.get(J),de=t.get(G);J.addEventListener("dispose",M);const Oe=J.textures,Te=J.isWebGLCubeRenderTarget===!0,We=Oe.length>1;if(We||(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=G.version,o.memory.textures++),Te){ue.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(G.mipmaps&&G.mipmaps.length>0){ue.__webglFramebuffer[Ve]=[];for(let Fe=0;Fe<G.mipmaps.length;Fe++)ue.__webglFramebuffer[Ve][Fe]=n.createFramebuffer()}else ue.__webglFramebuffer[Ve]=n.createFramebuffer()}else{if(G.mipmaps&&G.mipmaps.length>0){ue.__webglFramebuffer=[];for(let Ve=0;Ve<G.mipmaps.length;Ve++)ue.__webglFramebuffer[Ve]=n.createFramebuffer()}else ue.__webglFramebuffer=n.createFramebuffer();if(We)for(let Ve=0,Fe=Oe.length;Ve<Fe;Ve++){const rt=t.get(Oe[Ve]);rt.__webglTexture===void 0&&(rt.__webglTexture=n.createTexture(),o.memory.textures++)}if(J.samples>0&&ae(J)===!1){ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],i.bindFramebuffer(n.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Oe.length;Ve++){const Fe=Oe[Ve];ue.__webglColorRenderbuffer[Ve]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ue.__webglColorRenderbuffer[Ve]);const rt=s.convert(Fe.format,Fe.colorSpace),Ge=s.convert(Fe.type),nt=_(Fe.internalFormat,rt,Ge,Fe.colorSpace,J.isXRRenderTarget===!0),kt=q(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,kt,nt,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,ue.__webglColorRenderbuffer[Ve])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),_e(ue.__webglDepthRenderbuffer,J,!0)),i.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Te){i.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture),ce(n.TEXTURE_CUBE_MAP,G);for(let Ve=0;Ve<6;Ve++)if(G.mipmaps&&G.mipmaps.length>0)for(let Fe=0;Fe<G.mipmaps.length;Fe++)he(ue.__webglFramebuffer[Ve][Fe],J,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,Fe);else he(ue.__webglFramebuffer[Ve],J,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);b(G)&&S(n.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(We){for(let Ve=0,Fe=Oe.length;Ve<Fe;Ve++){const rt=Oe[Ve],Ge=t.get(rt);i.bindTexture(n.TEXTURE_2D,Ge.__webglTexture),ce(n.TEXTURE_2D,rt),he(ue.__webglFramebuffer,J,rt,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,0),b(rt)&&S(n.TEXTURE_2D)}i.unbindTexture()}else{let Ve=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(Ve=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),i.bindTexture(Ve,de.__webglTexture),ce(Ve,G),G.mipmaps&&G.mipmaps.length>0)for(let Fe=0;Fe<G.mipmaps.length;Fe++)he(ue.__webglFramebuffer[Fe],J,G,n.COLOR_ATTACHMENT0,Ve,Fe);else he(ue.__webglFramebuffer,J,G,n.COLOR_ATTACHMENT0,Ve,0);b(G)&&S(Ve),i.unbindTexture()}J.depthBuffer&&K(J)}function z(J){const G=J.textures;for(let ue=0,de=G.length;ue<de;ue++){const Oe=G[ue];if(b(Oe)){const Te=J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,We=t.get(Oe).__webglTexture;i.bindTexture(Te,We),S(Te),i.unbindTexture()}}}const ee=[],re=[];function W(J){if(J.samples>0){if(ae(J)===!1){const G=J.textures,ue=J.width,de=J.height;let Oe=n.COLOR_BUFFER_BIT;const Te=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=t.get(J),Ve=G.length>1;if(Ve)for(let Fe=0;Fe<G.length;Fe++)i.bindFramebuffer(n.FRAMEBUFFER,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,null),i.bindFramebuffer(n.FRAMEBUFFER,We.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,null,0);i.bindFramebuffer(n.READ_FRAMEBUFFER,We.__webglMultisampledFramebuffer),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,We.__webglFramebuffer);for(let Fe=0;Fe<G.length;Fe++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Oe|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Oe|=n.STENCIL_BUFFER_BIT)),Ve){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,We.__webglColorRenderbuffer[Fe]);const rt=t.get(G[Fe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,rt,0)}n.blitFramebuffer(0,0,ue,de,0,0,ue,de,Oe,n.NEAREST),c===!0&&(ee.length=0,re.length=0,ee.push(n.COLOR_ATTACHMENT0+Fe),J.depthBuffer&&J.resolveDepthBuffer===!1&&(ee.push(Te),re.push(Te),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,re)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ee))}if(i.bindFramebuffer(n.READ_FRAMEBUFFER,null),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ve)for(let Fe=0;Fe<G.length;Fe++){i.bindFramebuffer(n.FRAMEBUFFER,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,We.__webglColorRenderbuffer[Fe]);const rt=t.get(G[Fe]).__webglTexture;i.bindFramebuffer(n.FRAMEBUFFER,We.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,rt,0)}i.bindFramebuffer(n.DRAW_FRAMEBUFFER,We.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&c){const G=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[G])}}}function q(J){return Math.min(r.maxSamples,J.samples)}function ae(J){const G=t.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function fe(J){const G=o.render.frame;d.get(J)!==G&&(d.set(J,G),J.update())}function ye(J,G){const ue=J.colorSpace,de=J.format,Oe=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||ue!==uc&&ue!==Ul&&(Ki.getTransfer(ue)===fn?(de!==Gs||Oe!==Ca)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),G}function Me(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(u.width=J.naturalWidth||J.width,u.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(u.width=J.displayWidth,u.height=J.displayHeight):(u.width=J.width,u.height=J.height),u}this.allocateTextureUnit=N,this.resetTextureUnits=T,this.setTexture2D=D,this.setTexture2DArray=$,this.setTexture3D=B,this.setTextureCube=U,this.rebindTextures=j,this.setupRenderTarget=F,this.updateRenderTargetMipmap=z,this.updateMultisampleRenderTarget=W,this.setupDepthRenderbuffer=K,this.setupFrameBufferTexture=he,this.useMultisampledRTT=ae}function EF(n,e){function i(t,r=Ul){let s;const o=Ki.getTransfer(r);if(t===Ca)return n.UNSIGNED_BYTE;if(t===LE)return n.UNSIGNED_SHORT_4_4_4_4;if(t===BE)return n.UNSIGNED_SHORT_5_5_5_1;if(t===YU)return n.UNSIGNED_INT_5_9_9_9_REV;if(t===HU)return n.BYTE;if(t===GU)return n.SHORT;if(t===$E)return n.UNSIGNED_SHORT;if(t===VE)return n.INT;if(t===od)return n.UNSIGNED_INT;if(t===Xo)return n.FLOAT;if(t===zp)return n.HALF_FLOAT;if(t===jU)return n.ALPHA;if(t===qU)return n.RGB;if(t===Gs)return n.RGBA;if(t===ZU)return n.LUMINANCE;if(t===KU)return n.LUMINANCE_ALPHA;if(t===Yu)return n.DEPTH_COMPONENT;if(t===pp)return n.DEPTH_STENCIL;if(t===UE)return n.RED;if(t===FE)return n.RED_INTEGER;if(t===JU)return n.RG;if(t===zE)return n.RG_INTEGER;if(t===XE)return n.RGBA_INTEGER;if(t===vx||t===yx||t===bx||t===xx)if(o===fn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(t===vx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===yx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===bx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===xx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(t===vx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===yx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===bx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===xx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(t===Uk||t===Fk||t===zk||t===Xk)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(t===Uk)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Fk)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===zk)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Xk)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(t===Wk||t===Qk||t===Hk)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(t===Wk||t===Qk)return o===fn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(t===Hk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(t===Gk||t===Yk||t===jk||t===qk||t===Zk||t===Kk||t===Jk||t===eT||t===tT||t===iT||t===nT||t===rT||t===sT||t===oT)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(t===Gk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(t===Yk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(t===jk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(t===qk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(t===Zk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(t===Kk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(t===Jk)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(t===eT)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(t===tT)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(t===iT)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(t===nT)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(t===rT)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(t===sT)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(t===oT)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(t===Ox||t===aT||t===lT)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(t===Ox)return o===fn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(t===aT)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(t===lT)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(t===eF||t===cT||t===hT||t===uT)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(t===Ox)return s.COMPRESSED_RED_RGTC1_EXT;if(t===cT)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(t===hT)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(t===uT)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return t===Xp?n.UNSIGNED_INT_24_8:n[t]!==void 0?n[t]:null}return{convert:i}}class PF extends en{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let zl=class extends Ii{constructor(){super(),this.isGroup=!0,this.type="Group"}};const xge={type:"move"};class wC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new zl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new zl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new zl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const i=this._hand;if(i)for(const t of e.hand.values())this._getHandJoint(i,t)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,i,t){let r=null,s=null,o=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&i.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const b=i.getJointPose(x,t),S=this._getHandJoint(u,x);b!==null&&(S.matrix.fromArray(b.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=b.radius),S.visible=b!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],m=d.position.distanceTo(f.position),g=.02,y=.005;u.inputState.pinching&&m>g+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=g-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=i.getPose(e.gripSpace,t),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=i.getPose(e.targetRaySpace,t),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(xge)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,i){if(e.joints[i.jointName]===void 0){const t=new zl;t.matrixAutoUpdate=!1,t.visible=!1,e.joints[i.jointName]=t,e.add(t)}return e.joints[i.jointName]}}const Oge=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,wge=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class _ge{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,i,t){if(this.texture===null){const r=new Xn,s=e.properties.get(r);s.__webglTexture=i.texture,(i.depthNear!=t.depthNear||i.depthFar!=t.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=r}}render(e,i){if(this.texture!==null){if(this.mesh===null){const t=i.cameras[0].viewport,r=new ks({vertexShader:Oge,fragmentShader:wge,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new tn(new $h(20,20),r)}e.render(this.mesh,i)}}reset(){this.texture=null,this.mesh=null}}class Sge extends hl{constructor(e,i){super();const t=this;let r=null,s=1,o=null,l="local-floor",c=1,u=null,d=null,f=null,m=null,g=null,y=null;const x=new _ge,b=i.getContextAttributes();let S=null,_=null;const O=[],k=[],M=new ze;let E=null;const R=new en;R.layers.enable(1),R.viewport=new bi;const P=new en;P.layers.enable(2),P.viewport=new bi;const I=[R,P],T=new PF;T.layers.enable(1),T.layers.enable(2);let N=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let _e=O[he];return _e===void 0&&(_e=new wC,O[he]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(he){let _e=O[he];return _e===void 0&&(_e=new wC,O[he]=_e),_e.getGripSpace()},this.getHand=function(he){let _e=O[he];return _e===void 0&&(_e=new wC,O[he]=_e),_e.getHandSpace()};function D(he){const _e=k.indexOf(he.inputSource);if(_e===-1)return;const Ce=O[_e];Ce!==void 0&&(Ce.update(he.inputSource,he.frame,u||o),Ce.dispatchEvent({type:he.type,data:he.inputSource}))}function $(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",B);for(let he=0;he<O.length;he++){const _e=k[he];_e!==null&&(k[he]=null,O[he].disconnect(_e))}N=null,L=null,x.reset(),e.setRenderTarget(S),g=null,m=null,f=null,r=null,_=null,we.stop(),t.isPresenting=!1,e.setPixelRatio(E),e.setSize(M.width,M.height,!1),t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){l=he,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(he){u=he},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(he){if(r=he,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",$),r.addEventListener("inputsourceschange",B),b.xrCompatible!==!0&&await i.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(M),r.renderState.layers===void 0){const _e={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,i,_e),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),_=new Zo(g.framebufferWidth,g.framebufferHeight,{format:Gs,type:Ca,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let _e=null,Ce=null,K=null;b.depth&&(K=b.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,_e=b.stencil?pp:Yu,Ce=b.stencil?Xp:od);const j={colorFormat:i.RGBA8,depthFormat:K,scaleFactor:s};f=new XRWebGLBinding(r,i),m=f.createProjectionLayer(j),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),_=new Zo(m.textureWidth,m.textureHeight,{format:Gs,type:Ca,depthTexture:new qE(m.textureWidth,m.textureHeight,Ce,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(c),u=null,o=await r.requestReferenceSpace(l),we.setContext(r),we.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function B(he){for(let _e=0;_e<he.removed.length;_e++){const Ce=he.removed[_e],K=k.indexOf(Ce);K>=0&&(k[K]=null,O[K].disconnect(Ce))}for(let _e=0;_e<he.added.length;_e++){const Ce=he.added[_e];let K=k.indexOf(Ce);if(K===-1){for(let F=0;F<O.length;F++)if(F>=k.length){k.push(Ce),K=F;break}else if(k[F]===null){k[F]=Ce,K=F;break}if(K===-1)break}const j=O[K];j&&j.connect(Ce)}}const U=new ne,Q=new ne;function Z(he,_e,Ce){U.setFromMatrixPosition(_e.matrixWorld),Q.setFromMatrixPosition(Ce.matrixWorld);const K=U.distanceTo(Q),j=_e.projectionMatrix.elements,F=Ce.projectionMatrix.elements,z=j[14]/(j[10]-1),ee=j[14]/(j[10]+1),re=(j[9]+1)/j[5],W=(j[9]-1)/j[5],q=(j[8]-1)/j[0],ae=(F[8]+1)/F[0],fe=z*q,ye=z*ae,Me=K/(-q+ae),J=Me*-q;_e.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(J),he.translateZ(Me),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert();const G=z+Me,ue=ee+Me,de=fe-J,Oe=ye+(K-J),Te=re*ee/ue*G,We=W*ee/ue*G;he.projectionMatrix.makePerspective(de,Oe,Te,We,G,ue),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}function te(he,_e){_e===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(_e.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(r===null)return;x.texture!==null&&(he.near=x.depthNear,he.far=x.depthFar),T.near=P.near=R.near=he.near,T.far=P.far=R.far=he.far,(N!==T.near||L!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),N=T.near,L=T.far,R.near=N,R.far=L,P.near=N,P.far=L,R.updateProjectionMatrix(),P.updateProjectionMatrix(),he.updateProjectionMatrix());const _e=he.parent,Ce=T.cameras;te(T,_e);for(let K=0;K<Ce.length;K++)te(Ce[K],_e);Ce.length===2?Z(T,R,P):T.projectionMatrix.copy(R.projectionMatrix),ce(he,T,_e)};function ce(he,_e,Ce){Ce===null?he.matrix.copy(_e.matrixWorld):(he.matrix.copy(Ce.matrixWorld),he.matrix.invert(),he.matrix.multiply(_e.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(_e.projectionMatrix),he.projectionMatrixInverse.copy(_e.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=vp*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(m===null&&g===null))return c},this.setFoveation=function(he){c=he,m!==null&&(m.fixedFoveation=he),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=he)},this.hasDepthSensing=function(){return x.texture!==null};let pe=null;function Ee(he,_e){if(d=_e.getViewerPose(u||o),y=_e,d!==null){const Ce=d.views;g!==null&&(e.setRenderTargetFramebuffer(_,g.framebuffer),e.setRenderTarget(_));let K=!1;Ce.length!==T.cameras.length&&(T.cameras.length=0,K=!0);for(let F=0;F<Ce.length;F++){const z=Ce[F];let ee=null;if(g!==null)ee=g.getViewport(z);else{const W=f.getViewSubImage(m,z);ee=W.viewport,F===0&&(e.setRenderTargetTextures(_,W.colorTexture,m.ignoreDepthValues?void 0:W.depthStencilTexture),e.setRenderTarget(_))}let re=I[F];re===void 0&&(re=new en,re.layers.enable(F),re.viewport=new bi,I[F]=re),re.matrix.fromArray(z.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(z.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(ee.x,ee.y,ee.width,ee.height),F===0&&(T.matrix.copy(re.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),K===!0&&T.cameras.push(re)}const j=r.enabledFeatures;if(j&&j.includes("depth-sensing")){const F=f.getDepthInformation(Ce[0]);F&&F.isValid&&F.texture&&x.init(e,F,r.renderState)}}for(let Ce=0;Ce<O.length;Ce++){const K=k[Ce],j=O[Ce];K!==null&&j!==void 0&&j.update(K,_e,u||o)}x.render(e,T),pe&&pe(he,_e),_e.detectedPlanes&&t.dispatchEvent({type:"planesdetected",data:_e}),y=null}const we=new _F;we.setAnimationLoop(Ee),this.setAnimationLoop=function(he){pe=he},this.dispose=function(){}}}const hu=new pr,Cge=new pt;function kge(n,e){function i(b,S){b.matrixAutoUpdate===!0&&b.updateMatrix(),S.value.copy(b.matrix)}function t(b,S){S.color.getRGB(b.fogColor.value,xF(n)),S.isFog?(b.fogNear.value=S.near,b.fogFar.value=S.far):S.isFogExp2&&(b.fogDensity.value=S.density)}function r(b,S,_,O,k){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(b,S):S.isMeshToonMaterial?(s(b,S),f(b,S)):S.isMeshPhongMaterial?(s(b,S),d(b,S)):S.isMeshStandardMaterial?(s(b,S),m(b,S),S.isMeshPhysicalMaterial&&g(b,S,k)):S.isMeshMatcapMaterial?(s(b,S),y(b,S)):S.isMeshDepthMaterial?s(b,S):S.isMeshDistanceMaterial?(s(b,S),x(b,S)):S.isMeshNormalMaterial?s(b,S):S.isLineBasicMaterial?(o(b,S),S.isLineDashedMaterial&&l(b,S)):S.isPointsMaterial?c(b,S,_,O):S.isSpriteMaterial?u(b,S):S.isShadowMaterial?(b.color.value.copy(S.color),b.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(b,S){b.opacity.value=S.opacity,S.color&&b.diffuse.value.copy(S.color),S.emissive&&b.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(b.map.value=S.map,i(S.map,b.mapTransform)),S.alphaMap&&(b.alphaMap.value=S.alphaMap,i(S.alphaMap,b.alphaMapTransform)),S.bumpMap&&(b.bumpMap.value=S.bumpMap,i(S.bumpMap,b.bumpMapTransform),b.bumpScale.value=S.bumpScale,S.side===ts&&(b.bumpScale.value*=-1)),S.normalMap&&(b.normalMap.value=S.normalMap,i(S.normalMap,b.normalMapTransform),b.normalScale.value.copy(S.normalScale),S.side===ts&&b.normalScale.value.negate()),S.displacementMap&&(b.displacementMap.value=S.displacementMap,i(S.displacementMap,b.displacementMapTransform),b.displacementScale.value=S.displacementScale,b.displacementBias.value=S.displacementBias),S.emissiveMap&&(b.emissiveMap.value=S.emissiveMap,i(S.emissiveMap,b.emissiveMapTransform)),S.specularMap&&(b.specularMap.value=S.specularMap,i(S.specularMap,b.specularMapTransform)),S.alphaTest>0&&(b.alphaTest.value=S.alphaTest);const _=e.get(S),O=_.envMap,k=_.envMapRotation;if(O&&(b.envMap.value=O,hu.copy(k),hu.x*=-1,hu.y*=-1,hu.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(hu.y*=-1,hu.z*=-1),b.envMapRotation.value.setFromMatrix4(Cge.makeRotationFromEuler(hu)),b.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=S.reflectivity,b.ior.value=S.ior,b.refractionRatio.value=S.refractionRatio),S.lightMap){b.lightMap.value=S.lightMap;const M=n._useLegacyLights===!0?Math.PI:1;b.lightMapIntensity.value=S.lightMapIntensity*M,i(S.lightMap,b.lightMapTransform)}S.aoMap&&(b.aoMap.value=S.aoMap,b.aoMapIntensity.value=S.aoMapIntensity,i(S.aoMap,b.aoMapTransform))}function o(b,S){b.diffuse.value.copy(S.color),b.opacity.value=S.opacity,S.map&&(b.map.value=S.map,i(S.map,b.mapTransform))}function l(b,S){b.dashSize.value=S.dashSize,b.totalSize.value=S.dashSize+S.gapSize,b.scale.value=S.scale}function c(b,S,_,O){b.diffuse.value.copy(S.color),b.opacity.value=S.opacity,b.size.value=S.size*_,b.scale.value=O*.5,S.map&&(b.map.value=S.map,i(S.map,b.uvTransform)),S.alphaMap&&(b.alphaMap.value=S.alphaMap,i(S.alphaMap,b.alphaMapTransform)),S.alphaTest>0&&(b.alphaTest.value=S.alphaTest)}function u(b,S){b.diffuse.value.copy(S.color),b.opacity.value=S.opacity,b.rotation.value=S.rotation,S.map&&(b.map.value=S.map,i(S.map,b.mapTransform)),S.alphaMap&&(b.alphaMap.value=S.alphaMap,i(S.alphaMap,b.alphaMapTransform)),S.alphaTest>0&&(b.alphaTest.value=S.alphaTest)}function d(b,S){b.specular.value.copy(S.specular),b.shininess.value=Math.max(S.shininess,1e-4)}function f(b,S){S.gradientMap&&(b.gradientMap.value=S.gradientMap)}function m(b,S){b.metalness.value=S.metalness,S.metalnessMap&&(b.metalnessMap.value=S.metalnessMap,i(S.metalnessMap,b.metalnessMapTransform)),b.roughness.value=S.roughness,S.roughnessMap&&(b.roughnessMap.value=S.roughnessMap,i(S.roughnessMap,b.roughnessMapTransform)),S.envMap&&(b.envMapIntensity.value=S.envMapIntensity)}function g(b,S,_){b.ior.value=S.ior,S.sheen>0&&(b.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),b.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(b.sheenColorMap.value=S.sheenColorMap,i(S.sheenColorMap,b.sheenColorMapTransform)),S.sheenRoughnessMap&&(b.sheenRoughnessMap.value=S.sheenRoughnessMap,i(S.sheenRoughnessMap,b.sheenRoughnessMapTransform))),S.clearcoat>0&&(b.clearcoat.value=S.clearcoat,b.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(b.clearcoatMap.value=S.clearcoatMap,i(S.clearcoatMap,b.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,i(S.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(b.clearcoatNormalMap.value=S.clearcoatNormalMap,i(S.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===ts&&b.clearcoatNormalScale.value.negate())),S.dispersion>0&&(b.dispersion.value=S.dispersion),S.iridescence>0&&(b.iridescence.value=S.iridescence,b.iridescenceIOR.value=S.iridescenceIOR,b.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(b.iridescenceMap.value=S.iridescenceMap,i(S.iridescenceMap,b.iridescenceMapTransform)),S.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=S.iridescenceThicknessMap,i(S.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),S.transmission>0&&(b.transmission.value=S.transmission,b.transmissionSamplerMap.value=_.texture,b.transmissionSamplerSize.value.set(_.width,_.height),S.transmissionMap&&(b.transmissionMap.value=S.transmissionMap,i(S.transmissionMap,b.transmissionMapTransform)),b.thickness.value=S.thickness,S.thicknessMap&&(b.thicknessMap.value=S.thicknessMap,i(S.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=S.attenuationDistance,b.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(b.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(b.anisotropyMap.value=S.anisotropyMap,i(S.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=S.specularIntensity,b.specularColor.value.copy(S.specularColor),S.specularColorMap&&(b.specularColorMap.value=S.specularColorMap,i(S.specularColorMap,b.specularColorMapTransform)),S.specularIntensityMap&&(b.specularIntensityMap.value=S.specularIntensityMap,i(S.specularIntensityMap,b.specularIntensityMapTransform))}function y(b,S){S.matcap&&(b.matcap.value=S.matcap)}function x(b,S){const _=e.get(S).light;b.referencePosition.value.setFromMatrixPosition(_.matrixWorld),b.nearDistance.value=_.shadow.camera.near,b.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function Tge(n,e,i,t){let r={},s={},o=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(_,O){const k=O.program;t.uniformBlockBinding(_,k)}function u(_,O){let k=r[_.id];k===void 0&&(y(_),k=d(_),r[_.id]=k,_.addEventListener("dispose",b));const M=O.program;t.updateUBOMapping(_,M);const E=e.render.frame;s[_.id]!==E&&(m(_),s[_.id]=E)}function d(_){const O=f();_.__bindingPointIndex=O;const k=n.createBuffer(),M=_.__size,E=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,k),n.bufferData(n.UNIFORM_BUFFER,M,E),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,O,k),k}function f(){for(let _=0;_<l;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(_){const O=r[_.id],k=_.uniforms,M=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,O);for(let E=0,R=k.length;E<R;E++){const P=Array.isArray(k[E])?k[E]:[k[E]];for(let I=0,T=P.length;I<T;I++){const N=P[I];if(g(N,E,I,M)===!0){const L=N.__offset,D=Array.isArray(N.value)?N.value:[N.value];let $=0;for(let B=0;B<D.length;B++){const U=D[B],Q=x(U);typeof U=="number"||typeof U=="boolean"?(N.__data[0]=U,n.bufferSubData(n.UNIFORM_BUFFER,L+$,N.__data)):U.isMatrix3?(N.__data[0]=U.elements[0],N.__data[1]=U.elements[1],N.__data[2]=U.elements[2],N.__data[3]=0,N.__data[4]=U.elements[3],N.__data[5]=U.elements[4],N.__data[6]=U.elements[5],N.__data[7]=0,N.__data[8]=U.elements[6],N.__data[9]=U.elements[7],N.__data[10]=U.elements[8],N.__data[11]=0):(U.toArray(N.__data,$),$+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,L,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(_,O,k,M){const E=_.value,R=O+"_"+k;if(M[R]===void 0)return typeof E=="number"||typeof E=="boolean"?M[R]=E:M[R]=E.clone(),!0;{const P=M[R];if(typeof E=="number"||typeof E=="boolean"){if(P!==E)return M[R]=E,!0}else if(P.equals(E)===!1)return P.copy(E),!0}return!1}function y(_){const O=_.uniforms;let k=0;const M=16;for(let R=0,P=O.length;R<P;R++){const I=Array.isArray(O[R])?O[R]:[O[R]];for(let T=0,N=I.length;T<N;T++){const L=I[T],D=Array.isArray(L.value)?L.value:[L.value];for(let $=0,B=D.length;$<B;$++){const U=D[$],Q=x(U),Z=k%M;Z!==0&&M-Z<Q.boundary&&(k+=M-Z),L.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=k,k+=Q.storage}}}const E=k%M;return E>0&&(k+=M-E),_.__size=k,_.__cache={},this}function x(_){const O={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(O.boundary=4,O.storage=4):_.isVector2?(O.boundary=8,O.storage=8):_.isVector3||_.isColor?(O.boundary=16,O.storage=12):_.isVector4?(O.boundary=16,O.storage=16):_.isMatrix3?(O.boundary=48,O.storage=48):_.isMatrix4?(O.boundary=64,O.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),O}function b(_){const O=_.target;O.removeEventListener("dispose",b);const k=o.indexOf(O.__bindingPointIndex);o.splice(k,1),n.deleteBuffer(r[O.id]),delete r[O.id],delete s[O.id]}function S(){for(const _ in r)n.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:c,update:u,dispose:S}}class S0{constructor(e={}){const{canvas:i=mF(),context:t=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let m;if(t!==null){if(typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=t.getContextAttributes().alpha}else m=o;const g=new Uint32Array(4),y=new Int32Array(4);let x=null,b=null;const S=[],_=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=vo,this._useLegacyLights=!1,this.toneMapping=jl,this.toneMappingExposure=1;const O=this;let k=!1,M=0,E=0,R=null,P=-1,I=null;const T=new bi,N=new bi;let L=null;const D=new it(0);let $=0,B=i.width,U=i.height,Q=1,Z=null,te=null;const ce=new bi(0,0,B,U),pe=new bi(0,0,B,U);let Ee=!1;const we=new Zv;let he=!1,_e=!1;const Ce=new pt,K=new ne,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function F(){return R===null?Q:1}let z=t;function ee(oe,Pe){return i.getContext(oe,Pe)}try{const oe={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${Up}`),i.addEventListener("webglcontextlost",me,!1),i.addEventListener("webglcontextrestored",Be,!1),i.addEventListener("webglcontextcreationerror",Xe,!1),z===null){const Pe="webgl2";if(z=ee(Pe,oe),z===null)throw ee(Pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(oe){throw console.error("THREE.WebGLRenderer: "+oe.message),oe}let re,W,q,ae,fe,ye,Me,J,G,ue,de,Oe,Te,We,Ve,Fe,rt,Ge,nt,kt,Tt,ut,zt,li;function Se(){re=new Upe(z),re.init(),ut=new EF(z,re),W=new Dpe(z,re,e,ut),q=new yge(z),ae=new Xpe(z),fe=new oge,ye=new bge(z,re,q,fe,W,ut,ae),Me=new $pe(O),J=new Bpe(O),G=new que(z),zt=new Rpe(z,G),ue=new Fpe(z,G,ae,zt),de=new Qpe(z,ue,G,ae),nt=new Wpe(z,W,ye),Fe=new Npe(fe),Oe=new sge(O,Me,J,re,W,zt,Fe),Te=new kge(O,fe),We=new lge,Ve=new pge(re),Ge=new Ape(O,Me,J,q,de,m,c),rt=new vge(O,de,W),li=new Tge(z,ae,W,q),kt=new Ipe(z,re,ae),Tt=new zpe(z,re,ae),ae.programs=Oe.programs,O.capabilities=W,O.extensions=re,O.properties=fe,O.renderLists=We,O.shadowMap=rt,O.state=q,O.info=ae}Se();const Le=new Sge(O,z);this.xr=Le,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const oe=re.get("WEBGL_lose_context");oe&&oe.loseContext()},this.forceContextRestore=function(){const oe=re.get("WEBGL_lose_context");oe&&oe.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(oe){oe!==void 0&&(Q=oe,this.setSize(B,U,!1))},this.getSize=function(oe){return oe.set(B,U)},this.setSize=function(oe,Pe,Ue=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=oe,U=Pe,i.width=Math.floor(oe*Q),i.height=Math.floor(Pe*Q),Ue===!0&&(i.style.width=oe+"px",i.style.height=Pe+"px"),this.setViewport(0,0,oe,Pe)},this.getDrawingBufferSize=function(oe){return oe.set(B*Q,U*Q).floor()},this.setDrawingBufferSize=function(oe,Pe,Ue){B=oe,U=Pe,Q=Ue,i.width=Math.floor(oe*Ue),i.height=Math.floor(Pe*Ue),this.setViewport(0,0,oe,Pe)},this.getCurrentViewport=function(oe){return oe.copy(T)},this.getViewport=function(oe){return oe.copy(ce)},this.setViewport=function(oe,Pe,Ue,$e){oe.isVector4?ce.set(oe.x,oe.y,oe.z,oe.w):ce.set(oe,Pe,Ue,$e),q.viewport(T.copy(ce).multiplyScalar(Q).round())},this.getScissor=function(oe){return oe.copy(pe)},this.setScissor=function(oe,Pe,Ue,$e){oe.isVector4?pe.set(oe.x,oe.y,oe.z,oe.w):pe.set(oe,Pe,Ue,$e),q.scissor(N.copy(pe).multiplyScalar(Q).round())},this.getScissorTest=function(){return Ee},this.setScissorTest=function(oe){q.setScissorTest(Ee=oe)},this.setOpaqueSort=function(oe){Z=oe},this.setTransparentSort=function(oe){te=oe},this.getClearColor=function(oe){return oe.copy(Ge.getClearColor())},this.setClearColor=function(){Ge.setClearColor.apply(Ge,arguments)},this.getClearAlpha=function(){return Ge.getClearAlpha()},this.setClearAlpha=function(){Ge.setClearAlpha.apply(Ge,arguments)},this.clear=function(oe=!0,Pe=!0,Ue=!0){let $e=0;if(oe){let Ne=!1;if(R!==null){const ft=R.texture.format;Ne=ft===XE||ft===zE||ft===FE}if(Ne){const ft=R.texture.type,Dt=ft===Ca||ft===od||ft===$E||ft===Xp||ft===LE||ft===BE,Vt=Ge.getClearColor(),Yt=Ge.getClearAlpha(),ri=Vt.r,hi=Vt.g,di=Vt.b;Dt?(g[0]=ri,g[1]=hi,g[2]=di,g[3]=Yt,z.clearBufferuiv(z.COLOR,0,g)):(y[0]=ri,y[1]=hi,y[2]=di,y[3]=Yt,z.clearBufferiv(z.COLOR,0,y))}else $e|=z.COLOR_BUFFER_BIT}Pe&&($e|=z.DEPTH_BUFFER_BIT),Ue&&($e|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear($e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",me,!1),i.removeEventListener("webglcontextrestored",Be,!1),i.removeEventListener("webglcontextcreationerror",Xe,!1),We.dispose(),Ve.dispose(),fe.dispose(),Me.dispose(),J.dispose(),de.dispose(),zt.dispose(),li.dispose(),Oe.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",yi),Le.removeEventListener("sessionend",Or),En.stop()};function me(oe){oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const oe=ae.autoReset,Pe=rt.enabled,Ue=rt.autoUpdate,$e=rt.needsUpdate,Ne=rt.type;Se(),ae.autoReset=oe,rt.enabled=Pe,rt.autoUpdate=Ue,rt.needsUpdate=$e,rt.type=Ne}function Xe(oe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",oe.statusMessage)}function tt(oe){const Pe=oe.target;Pe.removeEventListener("dispose",tt),dt(Pe)}function dt(oe){_i(oe),fe.remove(oe)}function _i(oe){const Pe=fe.get(oe).programs;Pe!==void 0&&(Pe.forEach(function(Ue){Oe.releaseProgram(Ue)}),oe.isShaderMaterial&&Oe.releaseShaderCache(oe))}this.renderBufferDirect=function(oe,Pe,Ue,$e,Ne,ft){Pe===null&&(Pe=j);const Dt=Ne.isMesh&&Ne.matrixWorld.determinant()<0,Vt=k_(oe,Pe,Ue,$e,Ne);q.setMaterial($e,Dt);let Yt=Ue.index,ri=1;if($e.wireframe===!0){if(Yt=ue.getWireframeAttribute(Ue),Yt===void 0)return;ri=2}const hi=Ue.drawRange,di=Ue.attributes.position;let fi=hi.start*ri,nn=(hi.start+hi.count)*ri;ft!==null&&(fi=Math.max(fi,ft.start*ri),nn=Math.min(nn,(ft.start+ft.count)*ri)),Yt!==null?(fi=Math.max(fi,0),nn=Math.min(nn,Yt.count)):di!=null&&(fi=Math.max(fi,0),nn=Math.min(nn,di.count));const as=nn-fi;if(as<0||as===1/0)return;zt.setup(Ne,$e,Vt,Ue,Yt);let Po,Bi=kt;if(Yt!==null&&(Po=G.get(Yt),Bi=Tt,Bi.setIndex(Po)),Ne.isMesh)$e.wireframe===!0?(q.setLineWidth($e.wireframeLinewidth*F()),Bi.setMode(z.LINES)):Bi.setMode(z.TRIANGLES);else if(Ne.isLine){let ci=$e.linewidth;ci===void 0&&(ci=1),q.setLineWidth(ci*F()),Ne.isLineSegments?Bi.setMode(z.LINES):Ne.isLineLoop?Bi.setMode(z.LINE_LOOP):Bi.setMode(z.LINE_STRIP)}else Ne.isPoints?Bi.setMode(z.POINTS):Ne.isSprite&&Bi.setMode(z.TRIANGLES);if(Ne.isBatchedMesh)Ne._multiDrawInstances!==null?Bi.renderMultiDrawInstances(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount,Ne._multiDrawInstances):Bi.renderMultiDraw(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount);else if(Ne.isInstancedMesh)Bi.renderInstances(fi,as,Ne.count);else if(Ue.isInstancedBufferGeometry){const ci=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,Xh=Math.min(Ue.instanceCount,ci);Bi.renderInstances(fi,as,Xh)}else Bi.render(fi,as)};function Si(oe,Pe,Ue){oe.transparent===!0&&oe.side===Xs&&oe.forceSinglePass===!1?(oe.side=ts,oe.needsUpdate=!0,ji(oe,Pe,Ue),oe.side=tc,oe.needsUpdate=!0,ji(oe,Pe,Ue),oe.side=Xs):ji(oe,Pe,Ue)}this.compile=function(oe,Pe,Ue=null){Ue===null&&(Ue=oe),b=Ve.get(Ue),b.init(Pe),_.push(b),Ue.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Pe.layers)&&(b.pushLight(Ne),Ne.castShadow&&b.pushShadow(Ne))}),oe!==Ue&&oe.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Pe.layers)&&(b.pushLight(Ne),Ne.castShadow&&b.pushShadow(Ne))}),b.setupLights(O._useLegacyLights);const $e=new Set;return oe.traverse(function(Ne){const ft=Ne.material;if(ft)if(Array.isArray(ft))for(let Dt=0;Dt<ft.length;Dt++){const Vt=ft[Dt];Si(Vt,Ue,Ne),$e.add(Vt)}else Si(ft,Ue,Ne),$e.add(ft)}),_.pop(),b=null,$e},this.compileAsync=function(oe,Pe,Ue=null){const $e=this.compile(oe,Pe,Ue);return new Promise(Ne=>{function ft(){if($e.forEach(function(Dt){fe.get(Dt).currentProgram.isReady()&&$e.delete(Dt)}),$e.size===0){Ne(oe);return}setTimeout(ft,10)}re.get("KHR_parallel_shader_compile")!==null?ft():setTimeout(ft,10)})};let Di=null;function Sn(oe){Di&&Di(oe)}function yi(){En.stop()}function Or(){En.start()}const En=new _F;En.setAnimationLoop(Sn),typeof self<"u"&&En.setContext(self),this.setAnimationLoop=function(oe){Di=oe,Le.setAnimationLoop(oe),oe===null?En.stop():En.start()},Le.addEventListener("sessionstart",yi),Le.addEventListener("sessionend",Or),this.render=function(oe,Pe){if(Pe!==void 0&&Pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Pe.parent===null&&Pe.matrixWorldAutoUpdate===!0&&Pe.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(Pe),Pe=Le.getCamera()),oe.isScene===!0&&oe.onBeforeRender(O,oe,Pe,R),b=Ve.get(oe,_.length),b.init(Pe),_.push(b),Ce.multiplyMatrices(Pe.projectionMatrix,Pe.matrixWorldInverse),we.setFromProjectionMatrix(Ce),_e=this.localClippingEnabled,he=Fe.init(this.clippingPlanes,_e),x=We.get(oe,S.length),x.init(),S.push(x),im(oe,Pe,0,O.sortObjects),x.finish(),O.sortObjects===!0&&x.sort(Z,te);const Ue=Le.enabled===!1||Le.isPresenting===!1||Le.hasDepthSensing()===!1;Ue&&Ge.addToRenderList(x,oe),this.info.render.frame++,he===!0&&Fe.beginShadows();const $e=b.state.shadowsArray;rt.render($e,oe,Pe),he===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ne=x.opaque,ft=x.transmissive;if(b.setupLights(O._useLegacyLights),Pe.isArrayCamera){const Dt=Pe.cameras;if(ft.length>0)for(let Vt=0,Yt=Dt.length;Vt<Yt;Vt++){const ri=Dt[Vt];xy(Ne,ft,oe,ri)}Ue&&Ge.render(oe);for(let Vt=0,Yt=Dt.length;Vt<Yt;Vt++){const ri=Dt[Vt];lr(x,oe,ri,ri.viewport)}}else ft.length>0&&xy(Ne,ft,oe,Pe),Ue&&Ge.render(oe),lr(x,oe,Pe);R!==null&&(ye.updateMultisampleRenderTarget(R),ye.updateRenderTargetMipmap(R)),oe.isScene===!0&&oe.onAfterRender(O,oe,Pe),zt.resetDefaultState(),P=-1,I=null,_.pop(),_.length>0?(b=_[_.length-1],he===!0&&Fe.setGlobalState(O.clippingPlanes,b.state.camera)):b=null,S.pop(),S.length>0?x=S[S.length-1]:x=null};function im(oe,Pe,Ue,$e){if(oe.visible===!1)return;if(oe.layers.test(Pe.layers)){if(oe.isGroup)Ue=oe.renderOrder;else if(oe.isLOD)oe.autoUpdate===!0&&oe.update(Pe);else if(oe.isLight)b.pushLight(oe),oe.castShadow&&b.pushShadow(oe);else if(oe.isSprite){if(!oe.frustumCulled||we.intersectsSprite(oe)){$e&&K.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(Ce);const Dt=de.update(oe),Vt=oe.material;Vt.visible&&x.push(oe,Dt,Vt,Ue,K.z,null)}}else if((oe.isMesh||oe.isLine||oe.isPoints)&&(!oe.frustumCulled||we.intersectsObject(oe))){const Dt=de.update(oe),Vt=oe.material;if($e&&(oe.boundingSphere!==void 0?(oe.boundingSphere===null&&oe.computeBoundingSphere(),K.copy(oe.boundingSphere.center)):(Dt.boundingSphere===null&&Dt.computeBoundingSphere(),K.copy(Dt.boundingSphere.center)),K.applyMatrix4(oe.matrixWorld).applyMatrix4(Ce)),Array.isArray(Vt)){const Yt=Dt.groups;for(let ri=0,hi=Yt.length;ri<hi;ri++){const di=Yt[ri],fi=Vt[di.materialIndex];fi&&fi.visible&&x.push(oe,Dt,fi,Ue,K.z,di)}}else Vt.visible&&x.push(oe,Dt,Vt,Ue,K.z,null)}}const ft=oe.children;for(let Dt=0,Vt=ft.length;Dt<Vt;Dt++)im(ft[Dt],Pe,Ue,$e)}function lr(oe,Pe,Ue,$e){const Ne=oe.opaque,ft=oe.transmissive,Dt=oe.transparent;b.setupLightsView(Ue),he===!0&&Fe.setGlobalState(O.clippingPlanes,Ue),$e&&q.viewport(T.copy($e)),Ne.length>0&&zh(Ne,Pe,Ue),ft.length>0&&zh(ft,Pe,Ue),Dt.length>0&&zh(Dt,Pe,Ue),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function xy(oe,Pe,Ue,$e){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[$e.id]===void 0&&(b.state.transmissionRenderTarget[$e.id]=new Zo(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")||re.has("EXT_color_buffer_float")?zp:Ca,minFilter:Oa,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const ft=b.state.transmissionRenderTarget[$e.id],Dt=$e.viewport||T;ft.setSize(Dt.z,Dt.w);const Vt=O.getRenderTarget();O.setRenderTarget(ft),O.getClearColor(D),$=O.getClearAlpha(),$<1&&O.setClearColor(16777215,.5),O.clear();const Yt=O.toneMapping;O.toneMapping=jl;const ri=$e.viewport;if($e.viewport!==void 0&&($e.viewport=void 0),b.setupLightsView($e),he===!0&&Fe.setGlobalState(O.clippingPlanes,$e),zh(oe,Ue,$e),ye.updateMultisampleRenderTarget(ft),ye.updateRenderTargetMipmap(ft),re.has("WEBGL_multisampled_render_to_texture")===!1){let hi=!1;for(let di=0,fi=Pe.length;di<fi;di++){const nn=Pe[di],as=nn.object,Po=nn.geometry,Bi=nn.material,ci=nn.group;if(Bi.side===Xs&&as.layers.test($e.layers)){const Xh=Bi.side;Bi.side=ts,Bi.needsUpdate=!0,pc(as,Ue,$e,Po,Bi,ci),Bi.side=Xh,Bi.needsUpdate=!0,hi=!0}}hi===!0&&(ye.updateMultisampleRenderTarget(ft),ye.updateRenderTargetMipmap(ft))}O.setRenderTarget(Vt),O.setClearColor(D,$),ri!==void 0&&($e.viewport=ri),O.toneMapping=Yt}function zh(oe,Pe,Ue){const $e=Pe.isScene===!0?Pe.overrideMaterial:null;for(let Ne=0,ft=oe.length;Ne<ft;Ne++){const Dt=oe[Ne],Vt=Dt.object,Yt=Dt.geometry,ri=$e===null?Dt.material:$e,hi=Dt.group;Vt.layers.test(Ue.layers)&&pc(Vt,Pe,Ue,Yt,ri,hi)}}function pc(oe,Pe,Ue,$e,Ne,ft){oe.onBeforeRender(O,Pe,Ue,$e,Ne,ft),oe.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,oe.matrixWorld),oe.normalMatrix.getNormalMatrix(oe.modelViewMatrix),Ne.onBeforeRender(O,Pe,Ue,$e,oe,ft),Ne.transparent===!0&&Ne.side===Xs&&Ne.forceSinglePass===!1?(Ne.side=ts,Ne.needsUpdate=!0,O.renderBufferDirect(Ue,Pe,$e,Ne,oe,ft),Ne.side=tc,Ne.needsUpdate=!0,O.renderBufferDirect(Ue,Pe,$e,Ne,oe,ft),Ne.side=Xs):O.renderBufferDirect(Ue,Pe,$e,Ne,oe,ft),oe.onAfterRender(O,Pe,Ue,$e,Ne,ft)}function ji(oe,Pe,Ue){Pe.isScene!==!0&&(Pe=j);const $e=fe.get(oe),Ne=b.state.lights,ft=b.state.shadowsArray,Dt=Ne.state.version,Vt=Oe.getParameters(oe,Ne.state,ft,Pe,Ue),Yt=Oe.getProgramCacheKey(Vt);let ri=$e.programs;$e.environment=oe.isMeshStandardMaterial?Pe.environment:null,$e.fog=Pe.fog,$e.envMap=(oe.isMeshStandardMaterial?J:Me).get(oe.envMap||$e.environment),$e.envMapRotation=$e.environment!==null&&oe.envMap===null?Pe.environmentRotation:oe.envMapRotation,ri===void 0&&(oe.addEventListener("dispose",tt),ri=new Map,$e.programs=ri);let hi=ri.get(Yt);if(hi!==void 0){if($e.currentProgram===hi&&$e.lightsStateVersion===Dt)return mc(oe,Vt),hi}else Vt.uniforms=Oe.getUniforms(oe),oe.onBuild(Ue,Vt,O),oe.onBeforeCompile(Vt,O),hi=Oe.acquireProgram(Vt,Yt),ri.set(Yt,hi),$e.uniforms=Vt.uniforms;const di=$e.uniforms;return(!oe.isShaderMaterial&&!oe.isRawShaderMaterial||oe.clipping===!0)&&(di.clippingPlanes=Fe.uniform),mc(oe,Vt),$e.needsLights=M_(oe),$e.lightsStateVersion=Dt,$e.needsLights&&(di.ambientLightColor.value=Ne.state.ambient,di.lightProbe.value=Ne.state.probe,di.directionalLights.value=Ne.state.directional,di.directionalLightShadows.value=Ne.state.directionalShadow,di.spotLights.value=Ne.state.spot,di.spotLightShadows.value=Ne.state.spotShadow,di.rectAreaLights.value=Ne.state.rectArea,di.ltc_1.value=Ne.state.rectAreaLTC1,di.ltc_2.value=Ne.state.rectAreaLTC2,di.pointLights.value=Ne.state.point,di.pointLightShadows.value=Ne.state.pointShadow,di.hemisphereLights.value=Ne.state.hemi,di.directionalShadowMap.value=Ne.state.directionalShadowMap,di.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,di.spotShadowMap.value=Ne.state.spotShadowMap,di.spotLightMatrix.value=Ne.state.spotLightMatrix,di.spotLightMap.value=Ne.state.spotLightMap,di.pointShadowMap.value=Ne.state.pointShadowMap,di.pointShadowMatrix.value=Ne.state.pointShadowMatrix),$e.currentProgram=hi,$e.uniformsList=null,hi}function ia(oe){if(oe.uniformsList===null){const Pe=oe.currentProgram.getUniforms();oe.uniformsList=Sx.seqWithValue(Pe.seq,oe.uniforms)}return oe.uniformsList}function mc(oe,Pe){const Ue=fe.get(oe);Ue.outputColorSpace=Pe.outputColorSpace,Ue.batching=Pe.batching,Ue.instancing=Pe.instancing,Ue.instancingColor=Pe.instancingColor,Ue.instancingMorph=Pe.instancingMorph,Ue.skinning=Pe.skinning,Ue.morphTargets=Pe.morphTargets,Ue.morphNormals=Pe.morphNormals,Ue.morphColors=Pe.morphColors,Ue.morphTargetsCount=Pe.morphTargetsCount,Ue.numClippingPlanes=Pe.numClippingPlanes,Ue.numIntersection=Pe.numClipIntersection,Ue.vertexAlphas=Pe.vertexAlphas,Ue.vertexTangents=Pe.vertexTangents,Ue.toneMapping=Pe.toneMapping}function k_(oe,Pe,Ue,$e,Ne){Pe.isScene!==!0&&(Pe=j),ye.resetTextureUnits();const ft=Pe.fog,Dt=$e.isMeshStandardMaterial?Pe.environment:null,Vt=R===null?O.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:uc,Yt=($e.isMeshStandardMaterial?J:Me).get($e.envMap||Dt),ri=$e.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,hi=!!Ue.attributes.tangent&&(!!$e.normalMap||$e.anisotropy>0),di=!!Ue.morphAttributes.position,fi=!!Ue.morphAttributes.normal,nn=!!Ue.morphAttributes.color;let as=jl;$e.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(as=O.toneMapping);const Po=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,Bi=Po!==void 0?Po.length:0,ci=fe.get($e),Xh=b.state.lights;if(he===!0&&(_e===!0||oe!==I)){const Qr=oe===I&&$e.id===P;Fe.setState($e,oe,Qr)}let dn=!1;$e.version===ci.__version?(ci.needsLights&&ci.lightsStateVersion!==Xh.state.version||ci.outputColorSpace!==Vt||Ne.isBatchedMesh&&ci.batching===!1||!Ne.isBatchedMesh&&ci.batching===!0||Ne.isInstancedMesh&&ci.instancing===!1||!Ne.isInstancedMesh&&ci.instancing===!0||Ne.isSkinnedMesh&&ci.skinning===!1||!Ne.isSkinnedMesh&&ci.skinning===!0||Ne.isInstancedMesh&&ci.instancingColor===!0&&Ne.instanceColor===null||Ne.isInstancedMesh&&ci.instancingColor===!1&&Ne.instanceColor!==null||Ne.isInstancedMesh&&ci.instancingMorph===!0&&Ne.morphTexture===null||Ne.isInstancedMesh&&ci.instancingMorph===!1&&Ne.morphTexture!==null||ci.envMap!==Yt||$e.fog===!0&&ci.fog!==ft||ci.numClippingPlanes!==void 0&&(ci.numClippingPlanes!==Fe.numPlanes||ci.numIntersection!==Fe.numIntersection)||ci.vertexAlphas!==ri||ci.vertexTangents!==hi||ci.morphTargets!==di||ci.morphNormals!==fi||ci.morphColors!==nn||ci.toneMapping!==as||ci.morphTargetsCount!==Bi)&&(dn=!0):(dn=!0,ci.__version=$e.version);let ls=ci.currentProgram;dn===!0&&(ls=ji($e,Pe,Ne));let Wh=!1,Qh=!1,nm=!1;const Pn=ls.getUniforms(),Ia=ci.uniforms;if(q.useProgram(ls.program)&&(Wh=!0,Qh=!0,nm=!0),$e.id!==P&&(P=$e.id,Qh=!0),Wh||I!==oe){Pn.setValue(z,"projectionMatrix",oe.projectionMatrix),Pn.setValue(z,"viewMatrix",oe.matrixWorldInverse);const Qr=Pn.map.cameraPosition;Qr!==void 0&&Qr.setValue(z,K.setFromMatrixPosition(oe.matrixWorld)),W.logarithmicDepthBuffer&&Pn.setValue(z,"logDepthBufFC",2/(Math.log(oe.far+1)/Math.LN2)),($e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshLambertMaterial||$e.isMeshBasicMaterial||$e.isMeshStandardMaterial||$e.isShaderMaterial)&&Pn.setValue(z,"isOrthographic",oe.isOrthographicCamera===!0),I!==oe&&(I=oe,Qh=!0,nm=!0)}if(Ne.isSkinnedMesh){Pn.setOptional(z,Ne,"bindMatrix"),Pn.setOptional(z,Ne,"bindMatrixInverse");const Qr=Ne.skeleton;Qr&&(Qr.boneTexture===null&&Qr.computeBoneTexture(),Pn.setValue(z,"boneTexture",Qr.boneTexture,ye))}Ne.isBatchedMesh&&(Pn.setOptional(z,Ne,"batchingTexture"),Pn.setValue(z,"batchingTexture",Ne._matricesTexture,ye));const rm=Ue.morphAttributes;if((rm.position!==void 0||rm.normal!==void 0||rm.color!==void 0)&&nt.update(Ne,Ue,ls),(Qh||ci.receiveShadow!==Ne.receiveShadow)&&(ci.receiveShadow=Ne.receiveShadow,Pn.setValue(z,"receiveShadow",Ne.receiveShadow)),$e.isMeshGouraudMaterial&&$e.envMap!==null&&(Ia.envMap.value=Yt,Ia.flipEnvMap.value=Yt.isCubeTexture&&Yt.isRenderTargetTexture===!1?-1:1),$e.isMeshStandardMaterial&&$e.envMap===null&&Pe.environment!==null&&(Ia.envMapIntensity.value=Pe.environmentIntensity),Qh&&(Pn.setValue(z,"toneMappingExposure",O.toneMappingExposure),ci.needsLights&&T_(Ia,nm),ft&&$e.fog===!0&&Te.refreshFogUniforms(Ia,ft),Te.refreshMaterialUniforms(Ia,$e,Q,U,b.state.transmissionRenderTarget[oe.id]),Sx.upload(z,ia(ci),Ia,ye)),$e.isShaderMaterial&&$e.uniformsNeedUpdate===!0&&(Sx.upload(z,ia(ci),Ia,ye),$e.uniformsNeedUpdate=!1),$e.isSpriteMaterial&&Pn.setValue(z,"center",Ne.center),Pn.setValue(z,"modelViewMatrix",Ne.modelViewMatrix),Pn.setValue(z,"normalMatrix",Ne.normalMatrix),Pn.setValue(z,"modelMatrix",Ne.matrixWorld),$e.isShaderMaterial||$e.isRawShaderMaterial){const Qr=$e.uniformsGroups;for(let Es=0,E_=Qr.length;Es<E_;Es++){const Oy=Qr[Es];li.update(Oy,ls),li.bind(Oy,ls)}}return ls}function T_(oe,Pe){oe.ambientLightColor.needsUpdate=Pe,oe.lightProbe.needsUpdate=Pe,oe.directionalLights.needsUpdate=Pe,oe.directionalLightShadows.needsUpdate=Pe,oe.pointLights.needsUpdate=Pe,oe.pointLightShadows.needsUpdate=Pe,oe.spotLights.needsUpdate=Pe,oe.spotLightShadows.needsUpdate=Pe,oe.rectAreaLights.needsUpdate=Pe,oe.hemisphereLights.needsUpdate=Pe}function M_(oe){return oe.isMeshLambertMaterial||oe.isMeshToonMaterial||oe.isMeshPhongMaterial||oe.isMeshStandardMaterial||oe.isShadowMaterial||oe.isShaderMaterial&&oe.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(oe,Pe,Ue){fe.get(oe.texture).__webglTexture=Pe,fe.get(oe.depthTexture).__webglTexture=Ue;const $e=fe.get(oe);$e.__hasExternalTextures=!0,$e.__autoAllocateDepthBuffer=Ue===void 0,$e.__autoAllocateDepthBuffer||re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$e.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(oe,Pe){const Ue=fe.get(oe);Ue.__webglFramebuffer=Pe,Ue.__useDefaultFramebuffer=Pe===void 0},this.setRenderTarget=function(oe,Pe=0,Ue=0){R=oe,M=Pe,E=Ue;let $e=!0,Ne=null,ft=!1,Dt=!1;if(oe){const Yt=fe.get(oe);Yt.__useDefaultFramebuffer!==void 0?(q.bindFramebuffer(z.FRAMEBUFFER,null),$e=!1):Yt.__webglFramebuffer===void 0?ye.setupRenderTarget(oe):Yt.__hasExternalTextures&&ye.rebindTextures(oe,fe.get(oe.texture).__webglTexture,fe.get(oe.depthTexture).__webglTexture);const ri=oe.texture;(ri.isData3DTexture||ri.isDataArrayTexture||ri.isCompressedArrayTexture)&&(Dt=!0);const hi=fe.get(oe).__webglFramebuffer;oe.isWebGLCubeRenderTarget?(Array.isArray(hi[Pe])?Ne=hi[Pe][Ue]:Ne=hi[Pe],ft=!0):oe.samples>0&&ye.useMultisampledRTT(oe)===!1?Ne=fe.get(oe).__webglMultisampledFramebuffer:Array.isArray(hi)?Ne=hi[Ue]:Ne=hi,T.copy(oe.viewport),N.copy(oe.scissor),L=oe.scissorTest}else T.copy(ce).multiplyScalar(Q).floor(),N.copy(pe).multiplyScalar(Q).floor(),L=Ee;if(q.bindFramebuffer(z.FRAMEBUFFER,Ne)&&$e&&q.drawBuffers(oe,Ne),q.viewport(T),q.scissor(N),q.setScissorTest(L),ft){const Yt=fe.get(oe.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Yt.__webglTexture,Ue)}else if(Dt){const Yt=fe.get(oe.texture),ri=Pe||0;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,Yt.__webglTexture,Ue||0,ri)}P=-1},this.readRenderTargetPixels=function(oe,Pe,Ue,$e,Ne,ft,Dt){if(!(oe&&oe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Vt=fe.get(oe).__webglFramebuffer;if(oe.isWebGLCubeRenderTarget&&Dt!==void 0&&(Vt=Vt[Dt]),Vt){q.bindFramebuffer(z.FRAMEBUFFER,Vt);try{const Yt=oe.texture,ri=Yt.format,hi=Yt.type;if(!W.textureFormatReadable(ri)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!W.textureTypeReadable(hi)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Pe>=0&&Pe<=oe.width-$e&&Ue>=0&&Ue<=oe.height-Ne&&z.readPixels(Pe,Ue,$e,Ne,ut.convert(ri),ut.convert(hi),ft)}finally{const Yt=R!==null?fe.get(R).__webglFramebuffer:null;q.bindFramebuffer(z.FRAMEBUFFER,Yt)}}},this.copyFramebufferToTexture=function(oe,Pe,Ue=0){const $e=Math.pow(2,-Ue),Ne=Math.floor(Pe.image.width*$e),ft=Math.floor(Pe.image.height*$e);ye.setTexture2D(Pe,0),z.copyTexSubImage2D(z.TEXTURE_2D,Ue,0,0,oe.x,oe.y,Ne,ft),q.unbindTexture()},this.copyTextureToTexture=function(oe,Pe,Ue,$e=0){const Ne=Pe.image.width,ft=Pe.image.height,Dt=ut.convert(Ue.format),Vt=ut.convert(Ue.type);ye.setTexture2D(Ue,0),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,Ue.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,Ue.unpackAlignment),Pe.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,$e,oe.x,oe.y,Ne,ft,Dt,Vt,Pe.image.data):Pe.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,$e,oe.x,oe.y,Pe.mipmaps[0].width,Pe.mipmaps[0].height,Dt,Pe.mipmaps[0].data):z.texSubImage2D(z.TEXTURE_2D,$e,oe.x,oe.y,Dt,Vt,Pe.image),$e===0&&Ue.generateMipmaps&&z.generateMipmap(z.TEXTURE_2D),q.unbindTexture()},this.copyTextureToTexture3D=function(oe,Pe,Ue,$e,Ne=0){const ft=oe.max.x-oe.min.x,Dt=oe.max.y-oe.min.y,Vt=oe.max.z-oe.min.z,Yt=ut.convert($e.format),ri=ut.convert($e.type);let hi;if($e.isData3DTexture)ye.setTexture3D($e,0),hi=z.TEXTURE_3D;else if($e.isDataArrayTexture||$e.isCompressedArrayTexture)ye.setTexture2DArray($e,0),hi=z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,$e.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$e.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,$e.unpackAlignment);const di=z.getParameter(z.UNPACK_ROW_LENGTH),fi=z.getParameter(z.UNPACK_IMAGE_HEIGHT),nn=z.getParameter(z.UNPACK_SKIP_PIXELS),as=z.getParameter(z.UNPACK_SKIP_ROWS),Po=z.getParameter(z.UNPACK_SKIP_IMAGES),Bi=Ue.isCompressedTexture?Ue.mipmaps[Ne]:Ue.image;z.pixelStorei(z.UNPACK_ROW_LENGTH,Bi.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Bi.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,oe.min.x),z.pixelStorei(z.UNPACK_SKIP_ROWS,oe.min.y),z.pixelStorei(z.UNPACK_SKIP_IMAGES,oe.min.z),Ue.isDataTexture||Ue.isData3DTexture?z.texSubImage3D(hi,Ne,Pe.x,Pe.y,Pe.z,ft,Dt,Vt,Yt,ri,Bi.data):$e.isCompressedArrayTexture?z.compressedTexSubImage3D(hi,Ne,Pe.x,Pe.y,Pe.z,ft,Dt,Vt,Yt,Bi.data):z.texSubImage3D(hi,Ne,Pe.x,Pe.y,Pe.z,ft,Dt,Vt,Yt,ri,Bi),z.pixelStorei(z.UNPACK_ROW_LENGTH,di),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,fi),z.pixelStorei(z.UNPACK_SKIP_PIXELS,nn),z.pixelStorei(z.UNPACK_SKIP_ROWS,as),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Po),Ne===0&&$e.generateMipmaps&&z.generateMipmap(hi),q.unbindTexture()},this.initTexture=function(oe){oe.isCubeTexture?ye.setTextureCube(oe,0):oe.isData3DTexture?ye.setTexture3D(oe,0):oe.isDataArrayTexture||oe.isCompressedArrayTexture?ye.setTexture2DArray(oe,0):ye.setTexture2D(oe,0),q.unbindTexture()},this.resetState=function(){M=0,E=0,R=null,q.reset(),zt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ka}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const i=this.getContext();i.drawingBufferColorSpace=e===yw?"display-p3":"srgb",i.unpackColorSpace=Ki.workingColorSpace===Gv?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class _w{constructor(e,i=25e-5){this.isFogExp2=!0,this.name="",this.color=new it(e),this.density=i}clone(){return new _w(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Sw{constructor(e,i=1,t=1e3){this.isFog=!0,this.name="",this.color=new it(e),this.near=i,this.far=t}clone(){return new Sw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bp extends Ii{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new pr,this.environmentIntensity=1,this.environmentRotation=new pr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,i){return super.copy(e,i),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const i=super.toJSON(e);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}class Kv{constructor(e,i){this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=e!==void 0?e.length/i:0,this.usage=J0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ko()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return gF("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,i,t){e*=this.stride,t*=i.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=i.array[t+r];return this}set(e,i=0){return this.array.set(e,i),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),t=new this.constructor(i,this.stride);return t.setUsage(this.usage),t}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ps=new ne;class nc{constructor(e,i,t,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=t,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let i=0,t=this.data.count;i<t;i++)ps.fromBufferAttribute(this,i),ps.applyMatrix4(e),this.setXYZ(i,ps.x,ps.y,ps.z);return this}applyNormalMatrix(e){for(let i=0,t=this.count;i<t;i++)ps.fromBufferAttribute(this,i),ps.applyNormalMatrix(e),this.setXYZ(i,ps.x,ps.y,ps.z);return this}transformDirection(e){for(let i=0,t=this.count;i<t;i++)ps.fromBufferAttribute(this,i),ps.transformDirection(e),this.setXYZ(i,ps.x,ps.y,ps.z);return this}getComponent(e,i){let t=this.array[e*this.data.stride+this.offset+i];return this.normalized&&(t=vs(t,this.array)),t}setComponent(e,i,t){return this.normalized&&(t=pi(t,this.array)),this.data.array[e*this.data.stride+this.offset+i]=t,this}setX(e,i){return this.normalized&&(i=pi(i,this.array)),this.data.array[e*this.data.stride+this.offset]=i,this}setY(e,i){return this.normalized&&(i=pi(i,this.array)),this.data.array[e*this.data.stride+this.offset+1]=i,this}setZ(e,i){return this.normalized&&(i=pi(i,this.array)),this.data.array[e*this.data.stride+this.offset+2]=i,this}setW(e,i){return this.normalized&&(i=pi(i,this.array)),this.data.array[e*this.data.stride+this.offset+3]=i,this}getX(e){let i=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(i=vs(i,this.array)),i}getY(e){let i=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(i=vs(i,this.array)),i}getZ(e){let i=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(i=vs(i,this.array)),i}getW(e){let i=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(i=vs(i,this.array)),i}setXY(e,i,t){return e=e*this.data.stride+this.offset,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this}setXYZ(e,i,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array),r=pi(r,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this.data.array[e+2]=r,this}setXYZW(e,i,t,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(i=pi(i,this.array),t=pi(t,this.array),r=pi(r,this.array),s=pi(s,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let t=0;t<this.count;t++){const r=t*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)i.push(this.data.array[r+s])}return new Ri(new this.array.constructor(i),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let t=0;t<this.count;t++){const r=t*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)i.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class JE extends ns{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let cf;const Hm=new ne,hf=new ne,uf=new ne,df=new ze,Gm=new ze,AF=new pt,G1=new ne,Ym=new ne,Y1=new ne,O6=new ze,_C=new ze,w6=new ze;let RF=class extends Ii{constructor(e=new JE){if(super(),this.isSprite=!0,this.type="Sprite",cf===void 0){cf=new ni;const i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Kv(i,5);cf.setIndex([0,1,2,0,2,3]),cf.setAttribute("position",new nc(t,3,0,!1)),cf.setAttribute("uv",new nc(t,2,3,!1))}this.geometry=cf,this.material=e,this.center=new ze(.5,.5)}raycast(e,i){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hf.setFromMatrixScale(this.matrixWorld),AF.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&hf.multiplyScalar(-uf.z);const t=this.material.rotation;let r,s;t!==0&&(s=Math.cos(t),r=Math.sin(t));const o=this.center;j1(G1.set(-.5,-.5,0),uf,o,hf,r,s),j1(Ym.set(.5,-.5,0),uf,o,hf,r,s),j1(Y1.set(.5,.5,0),uf,o,hf,r,s),O6.set(0,0),_C.set(1,0),w6.set(1,1);let l=e.ray.intersectTriangle(G1,Ym,Y1,!1,Hm);if(l===null&&(j1(Ym.set(-.5,.5,0),uf,o,hf,r,s),_C.set(0,1),l=e.ray.intersectTriangle(G1,Y1,Ym,!1,Hm),l===null))return;const c=e.ray.origin.distanceTo(Hm);c<e.near||c>e.far||i.push({distance:c,point:Hm.clone(),uv:Ws.getInterpolation(Hm,G1,Ym,Y1,O6,_C,w6,new ze),face:null,object:this})}copy(e,i){return super.copy(e,i),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function j1(n,e,i,t,r,s){df.subVectors(n,i).addScalar(.5).multiply(t),r!==void 0?(Gm.x=s*df.x-r*df.y,Gm.y=r*df.x+s*df.y):Gm.copy(df),n.copy(e),n.x+=Gm.x,n.y+=Gm.y,n.applyMatrix4(AF)}const q1=new ne,_6=new ne;class IF extends Ii{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const i=e.levels;for(let t=0,r=i.length;t<r;t++){const s=i[t];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,i=0,t=0){i=Math.abs(i);const r=this.levels;let s;for(s=0;s<r.length&&!(i<r[s].distance);s++);return r.splice(s,0,{distance:i,hysteresis:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const i=this.levels;if(i.length>0){let t,r;for(t=1,r=i.length;t<r;t++){let s=i[t].distance;if(i[t].object.visible&&(s-=s*i[t].hysteresis),e<s)break}return i[t-1].object}return null}raycast(e,i){if(this.levels.length>0){q1.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(q1);this.getObjectForDistance(r).raycast(e,i)}}update(e){const i=this.levels;if(i.length>1){q1.setFromMatrixPosition(e.matrixWorld),_6.setFromMatrixPosition(this.matrixWorld);const t=q1.distanceTo(_6)/e.zoom;i[0].object.visible=!0;let r,s;for(r=1,s=i.length;r<s;r++){let o=i[r].distance;if(i[r].object.visible&&(o-=o*i[r].hysteresis),t>=o)i[r-1].object.visible=!1,i[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)i[r].object.visible=!1}}toJSON(e){const i=super.toJSON(e);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];const t=this.levels;for(let r=0,s=t.length;r<s;r++){const o=t[r];i.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return i}}const S6=new ne,C6=new bi,k6=new bi,Mge=new ne,T6=new pt,Z1=new ne,SC=new zr,M6=new pt,CC=new bd;class eP extends tn{constructor(e,i){super(e,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Bk,this.bindMatrix=new pt,this.bindMatrixInverse=new pt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Fr),this.boundingBox.makeEmpty();const i=e.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,Z1),this.boundingBox.expandByPoint(Z1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new zr),this.boundingSphere.makeEmpty();const i=e.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,Z1),this.boundingSphere.expandByPoint(Z1)}copy(e,i){return super.copy(e,i),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,i){const t=this.material,r=this.matrixWorld;t!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),SC.copy(this.boundingSphere),SC.applyMatrix4(r),e.ray.intersectsSphere(SC)!==!1&&(M6.copy(r).invert(),CC.copy(e.ray).applyMatrix4(M6),!(this.boundingBox!==null&&CC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,i,CC)))}getVertexPosition(e,i){return super.getVertexPosition(e,i),this.applyBoneTransform(e,i),i}bind(e,i){this.skeleton=e,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new bi,i=this.geometry.attributes.skinWeight;for(let t=0,r=i.count;t<r;t++){e.fromBufferAttribute(i,t);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),i.setXYZW(t,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Bk?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===QU?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,i){const t=this.skeleton,r=this.geometry;C6.fromBufferAttribute(r.attributes.skinIndex,e),k6.fromBufferAttribute(r.attributes.skinWeight,e),S6.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let s=0;s<4;s++){const o=k6.getComponent(s);if(o!==0){const l=C6.getComponent(s);T6.multiplyMatrices(t.bones[l].matrixWorld,t.boneInverses[l]),i.addScaledVector(Mge.copy(S6).applyMatrix4(T6),o)}}return i.applyMatrix4(this.bindMatrixInverse)}}class iv extends Ii{constructor(){super(),this.isBone=!0,this.type="Bone"}}class fh extends Xn{constructor(e=null,i=1,t=1,r,s,o,l,c,u=fr,d=fr,f,m){super(null,o,l,c,u,d,r,s,f,m),this.isDataTexture=!0,this.image={data:e,width:i,height:t},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const E6=new pt,Ege=new pt;class Jv{constructor(e=[],i=[]){this.uuid=ko(),this.bones=e.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),i.length===0)this.calculateInverses();else if(e.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,r=this.bones.length;t<r;t++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,i=this.bones.length;e<i;e++){const t=new pt;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,i=this.bones.length;e<i;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,i=this.bones.length;e<i;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,i=this.boneInverses,t=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:Ege;E6.multiplyMatrices(l,i[s]),E6.toArray(t,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Jv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const i=new Float32Array(e*e*4);i.set(this.boneMatrices);const t=new fh(i,e,e,Gs,Xo);return t.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=t,this}getBoneByName(e){for(let i=0,t=this.bones.length;i<t;i++){const r=this.bones[i];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,i){this.uuid=e.uuid;for(let t=0,r=e.bones.length;t<r;t++){const s=e.bones[t];let o=i[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new iv),this.bones.push(o),this.boneInverses.push(new pt().fromArray(e.boneInverses[t]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const i=this.bones,t=this.boneInverses;for(let r=0,s=i.length;r<s;r++){const o=i[r];e.bones.push(o.uuid);const l=t[r];e.boneInverses.push(l.toArray())}return e}}class xp extends Ri{constructor(e,i,t,r=1){super(e,i,t),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ff=new pt,P6=new pt,K1=[],A6=new Fr,Pge=new pt,jm=new tn,qm=new zr;class DF extends tn{constructor(e,i,t){super(e,i),this.isInstancedMesh=!0,this.instanceMatrix=new xp(new Float32Array(t*16),16),this.instanceColor=null,this.morphTexture=null,this.count=t,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<t;r++)this.setMatrixAt(r,Pge)}computeBoundingBox(){const e=this.geometry,i=this.count;this.boundingBox===null&&(this.boundingBox=new Fr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let t=0;t<i;t++)this.getMatrixAt(t,ff),A6.copy(e.boundingBox).applyMatrix4(ff),this.boundingBox.union(A6)}computeBoundingSphere(){const e=this.geometry,i=this.count;this.boundingSphere===null&&(this.boundingSphere=new zr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let t=0;t<i;t++)this.getMatrixAt(t,ff),qm.copy(e.boundingSphere).applyMatrix4(ff),this.boundingSphere.union(qm)}copy(e,i){return super.copy(e,i),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,i){i.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,i){i.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,i){const t=i.morphTargetInfluences,r=this.morphTexture.source.data.data,s=t.length+1,o=e*s+1;for(let l=0;l<t.length;l++)t[l]=r[o+l]}raycast(e,i){const t=this.matrixWorld,r=this.count;if(jm.geometry=this.geometry,jm.material=this.material,jm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qm.copy(this.boundingSphere),qm.applyMatrix4(t),e.ray.intersectsSphere(qm)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,ff),P6.multiplyMatrices(t,ff),jm.matrixWorld=P6,jm.raycast(e,K1);for(let o=0,l=K1.length;o<l;o++){const c=K1[o];c.instanceId=s,c.object=this,i.push(c)}K1.length=0}}setColorAt(e,i){this.instanceColor===null&&(this.instanceColor=new xp(new Float32Array(this.instanceMatrix.count*3),3)),i.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,i){i.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,i){const t=i.morphTargetInfluences,r=t.length+1;this.morphTexture===null&&(this.morphTexture=new fh(new Float32Array(r*this.count),r,this.count,UE,Xo));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<t.length;u++)o+=t[u];const l=this.geometry.morphTargetsRelative?1:1-o,c=r*e;s[c]=l,s.set(t,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Age(n,e){return n.z-e.z}function Rge(n,e){return e.z-n.z}class Ige{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,i){const t=this.pool,r=this.list;this.index>=t.length&&t.push({start:-1,count:-1,z:-1});const s=t[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=i}reset(){this.list.length=0,this.index=0}}const pf="batchId",zc=new pt,R6=new pt,Dge=new pt,I6=new pt,kC=new Zv,J1=new Fr,uu=new zr,Zm=new ne,TC=new Ige,qr=new tn,eb=[];function Nge(n,e,i=0){const t=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<t;o++)e.setComponent(s+i,o,n.getComponent(s,o))}else e.array.set(n.array,i*t);e.needsUpdate=!0}class NF extends tn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,i,t=i*2,r){super(new ni,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=i,this._maxIndexCount=t,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const i=new Float32Array(e*e*4),t=new fh(i,e,e,Gs,Xo);this._matricesTexture=t}_initializeGeometry(e){const i=this.geometry,t=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in e.attributes){const c=e.getAttribute(l),{array:u,itemSize:d,normalized:f}=c,m=new u.constructor(t*d),g=new Ri(m,d,f);i.setAttribute(l,g)}if(e.getIndex()!==null){const l=t>65536?new Uint32Array(s):new Uint16Array(s);i.setIndex(new Ri(l,1))}const o=r>65536?new Uint32Array(t):new Uint16Array(t);i.setAttribute(pf,new Ri(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(pf))throw new Error(`BatchedMesh: Geometry cannot use attribute "${pf}"`);const i=this.geometry;if(!!e.getIndex()!=!!i.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const t in i.attributes){if(t===pf)continue;if(!e.hasAttribute(t))throw new Error(`BatchedMesh: Added geometry missing "${t}". All geometries must have consistent attributes.`);const r=e.getAttribute(t),s=i.getAttribute(t);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fr);const e=this._geometryCount,i=this.boundingBox,t=this._active;i.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,zc),this.getBoundingBoxAt(r,J1).applyMatrix4(zc),i.union(J1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zr);const e=this._geometryCount,i=this.boundingSphere,t=this._active;i.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,zc),this.getBoundingSphereAt(r,uu).applyMatrix4(zc),i.union(uu))}addGeometry(e,i=-1,t=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,l=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),i===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=i,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),d=u!==null;if(d&&(t===-1?r.indexCount=u.count:r.indexCount=t,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,m=this._active,g=this._matricesTexture,y=this._matricesTexture.image.data;f.push(!0),m.push(!0);const x=this._geometryCount;this._geometryCount++,Dge.toArray(y,x*16),g.needsUpdate=!0,o.push(r),l.push({start:d?r.indexStart:r.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new Fr,sphereInitialized:!1,sphere:new zr});const b=this.geometry.getAttribute(pf);for(let S=0;S<r.vertexCount;S++)b.setX(r.vertexStart+S,x);return b.needsUpdate=!0,this.setGeometryAt(x,e),x}setGeometryAt(e,i){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(i);const t=this.geometry,r=t.getIndex()!==null,s=t.getIndex(),o=i.getIndex(),l=this._reservedRanges[e];if(r&&o.count>l.indexCount||i.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,u=l.vertexCount;for(const g in t.attributes){if(g===pf)continue;const y=i.getAttribute(g),x=t.getAttribute(g);Nge(y,x,c);const b=y.itemSize;for(let S=y.count,_=u;S<_;S++){const O=c+S;for(let k=0;k<b;k++)x.setComponent(O,k,0)}x.needsUpdate=!0,x.addUpdateRange(c*b,u*b)}if(r){const g=l.indexStart;for(let y=0;y<o.count;y++)s.setX(g+y,c+o.getX(y));for(let y=o.count,x=l.indexCount;y<x;y++)s.setX(g+y,c);s.needsUpdate=!0,s.addUpdateRange(g,l.indexCount)}const d=this._bounds[e];i.boundingBox!==null?(d.box.copy(i.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,i.boundingSphere!==null?(d.sphere.copy(i.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const f=this._drawRanges[e],m=i.getAttribute("position");return f.count=r?o.count:m.count,this._visibilityChanged=!0,e}deleteGeometry(e){const i=this._active;return e>=i.length||i[e]===!1?this:(i[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,i){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=i,e}getBoundingBoxAt(e,i){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const l=o.index,c=o.attributes.position,u=this._drawRanges[e];for(let d=u.start,f=u.start+u.count;d<f;d++){let m=d;l&&(m=l.getX(m)),s.expandByPoint(Zm.fromBufferAttribute(c,m))}r.boxInitialized=!0}return i.copy(s),i}getBoundingSphereAt(e,i){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,J1),J1.getCenter(s.center);const l=o.index,c=o.attributes.position,u=this._drawRanges[e];let d=0;for(let f=u.start,m=u.start+u.count;f<m;f++){let g=f;l&&(g=l.getX(g)),Zm.fromBufferAttribute(c,g),d=Math.max(d,s.center.distanceToSquared(Zm))}s.radius=Math.sqrt(d),r.sphereInitialized=!0}return i.copy(s),i}setMatrixAt(e,i){const t=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||t[e]===!1?this:(i.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,i){const t=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||t[e]===!1?null:i.fromArray(r,e*16)}setVisibleAt(e,i){const t=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||t[e]===i?this:(t[e]=i,this._visibilityChanged=!0,this)}getVisibleAt(e){const i=this._visibility,t=this._active,r=this._geometryCount;return e>=r||t[e]===!1?!1:i[e]}raycast(e,i){const t=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,l=this.matrixWorld,c=this.geometry;qr.material=this.material,qr.geometry.index=c.index,qr.geometry.attributes=c.attributes,qr.geometry.boundingBox===null&&(qr.geometry.boundingBox=new Fr),qr.geometry.boundingSphere===null&&(qr.geometry.boundingSphere=new zr);for(let u=0;u<o;u++){if(!t[u]||!r[u])continue;const d=s[u];qr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(u,qr.matrixWorld).premultiply(l),this.getBoundingBoxAt(u,qr.geometry.boundingBox),this.getBoundingSphereAt(u,qr.geometry.boundingSphere),qr.raycast(e,eb);for(let f=0,m=eb.length;f<m;f++){const g=eb[f];g.object=this,g.batchId=u,i.push(g)}eb.length=0}qr.material=null,qr.geometry.index=null,qr.geometry.attributes={},qr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(i=>({...i})),this._reservedRanges=e._reservedRanges.map(i=>({...i})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(i=>({boxInitialized:i.boxInitialized,box:i.box.clone(),sphereInitialized:i.sphereInitialized,sphere:i.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,i,t,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._active,u=this._visibility,d=this._multiDrawStarts,f=this._multiDrawCounts,m=this._drawRanges,g=this.perObjectFrustumCulled;g&&(I6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse).multiply(this.matrixWorld),kC.setFromProjectionMatrix(I6,e.coordinateSystem));let y=0;if(this.sortObjects){R6.copy(this.matrixWorld).invert(),Zm.setFromMatrixPosition(t.matrixWorld).applyMatrix4(R6);for(let S=0,_=u.length;S<_;S++)if(u[S]&&c[S]){this.getMatrixAt(S,zc),this.getBoundingSphereAt(S,uu).applyMatrix4(zc);let O=!1;if(g&&(O=!kC.intersectsSphere(uu)),!O){const k=Zm.distanceTo(uu.center);TC.push(m[S],k)}}const x=TC.list,b=this.customSort;b===null?x.sort(s.transparent?Rge:Age):b.call(this,x,t);for(let S=0,_=x.length;S<_;S++){const O=x[S];d[y]=O.start*l,f[y]=O.count,y++}TC.reset()}else for(let x=0,b=u.length;x<b;x++)if(u[x]&&c[x]){let S=!1;if(g&&(this.getMatrixAt(x,zc),this.getBoundingSphereAt(x,uu).applyMatrix4(zc),S=!kC.intersectsSphere(uu)),!S){const _=m[x];d[y]=_.start*l,f[y]=_.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,i,t,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class rs extends ns{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new it(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const lO=new ne,cO=new ne,D6=new pt,Km=new bd,tb=new zr,MC=new ne,N6=new ne;let rc=class extends Ii{constructor(e=new ni,i=new rs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const i=e.attributes.position,t=[0];for(let r=1,s=i.count;r<s;r++)lO.fromBufferAttribute(i,r-1),cO.fromBufferAttribute(i,r),t[r]=t[r-1],t[r]+=lO.distanceTo(cO);e.setAttribute("lineDistance",new Ct(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,i){const t=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),tb.copy(t.boundingSphere),tb.applyMatrix4(r),tb.radius+=s,e.ray.intersectsSphere(tb)===!1)return;D6.copy(r).invert(),Km.copy(e.ray).applyMatrix4(D6);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,d=t.index,m=t.attributes.position;if(d!==null){const g=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let x=g,b=y-1;x<b;x+=u){const S=d.getX(x),_=d.getX(x+1),O=ib(this,e,Km,c,S,_);O&&i.push(O)}if(this.isLineLoop){const x=d.getX(y-1),b=d.getX(g),S=ib(this,e,Km,c,x,b);S&&i.push(S)}}else{const g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let x=g,b=y-1;x<b;x+=u){const S=ib(this,e,Km,c,x,x+1);S&&i.push(S)}if(this.isLineLoop){const x=ib(this,e,Km,c,y-1,g);x&&i.push(x)}}}updateMorphTargets(){const i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){const r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}};function ib(n,e,i,t,r,s){const o=n.geometry.attributes.position;if(lO.fromBufferAttribute(o,r),cO.fromBufferAttribute(o,s),i.distanceSqToSegment(lO,cO,MC,N6)>t)return;MC.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(MC);if(!(c<e.near||c>e.far))return{distance:c,point:N6.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const $6=new ne,V6=new ne;class ul extends rc{constructor(e,i){super(e,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const i=e.attributes.position,t=[];for(let r=0,s=i.count;r<s;r+=2)$6.fromBufferAttribute(i,r),V6.fromBufferAttribute(i,r+1),t[r]=r===0?0:t[r-1],t[r+1]=t[r]+$6.distanceTo(V6);e.setAttribute("lineDistance",new Ct(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $F extends rc{constructor(e,i){super(e,i),this.isLineLoop=!0,this.type="LineLoop"}}class tP extends ns{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const L6=new pt,gT=new bd,nb=new zr,rb=new ne;class VF extends Ii{constructor(e=new ni,i=new tP){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,i){const t=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),nb.copy(t.boundingSphere),nb.applyMatrix4(r),nb.radius+=s,e.ray.intersectsSphere(nb)===!1)return;L6.copy(r).invert(),gT.copy(e.ray).applyMatrix4(L6);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=t.index,f=t.attributes.position;if(u!==null){const m=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let y=m,x=g;y<x;y++){const b=u.getX(y);rb.fromBufferAttribute(f,b),B6(rb,b,c,r,e,i,this)}}else{const m=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let y=m,x=g;y<x;y++)rb.fromBufferAttribute(f,y),B6(rb,y,c,r,e,i,this)}}updateMorphTargets(){const i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){const r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function B6(n,e,i,t,r,s,o){const l=gT.distanceSqToPoint(n);if(l<i){const c=new ne;gT.closestPointToPoint(n,c),c.applyMatrix4(t);const u=r.ray.origin.distanceTo(c);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:o})}}class $ge extends Xn{constructor(e,i,t,r,s,o,l,c,u){super(e,i,t,r,s,o,l,c,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Yn,this.magFilter=s!==void 0?s:Yn,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class vT extends Xn{constructor(e,i){super({width:e,height:i}),this.isFramebufferTexture=!0,this.magFilter=fr,this.minFilter=fr,this.generateMipmaps=!1,this.needsUpdate=!0}}class qu extends Xn{constructor(e,i,t,r,s,o,l,c,u,d,f,m){super(null,o,l,c,u,d,r,s,f,m),this.isCompressedTexture=!0,this.image={width:i,height:t},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Vge extends qu{constructor(e,i,t,r,s,o){super(e,i,t,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=bs}}class Lge extends qu{constructor(e,i,t){super(void 0,e[0].width,e[0].height,i,t,ic),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Bge extends Xn{constructor(e,i,t,r,s,o,l,c,u){super(e,i,t,r,s,o,l,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ea{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,i){const t=this.getUtoTmapping(e);return this.getPoint(t,i)}getPoints(e=5){const i=[];for(let t=0;t<=e;t++)i.push(this.getPoint(t/e));return i}getSpacedPoints(e=5){const i=[];for(let t=0;t<=e;t++)i.push(this.getPointAt(t/e));return i}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const i=[];let t,r=this.getPoint(0),s=0;i.push(0);for(let o=1;o<=e;o++)t=this.getPoint(o/e),s+=t.distanceTo(r),i.push(s),r=t;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,i){const t=this.getLengths();let r=0;const s=t.length;let o;i?o=i:o=e*t[s-1];let l=0,c=s-1,u;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),u=t[r]-o,u<0)l=r+1;else if(u>0)c=r-1;else{c=r;break}if(r=c,t[r]===o)return r/(s-1);const d=t[r],m=t[r+1]-d,g=(o-d)/m;return(r+g)/(s-1)}getTangent(e,i){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),c=i||(o.isVector2?new ze:new ne);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,i){const t=this.getUtoTmapping(e);return this.getTangent(t,i)}computeFrenetFrames(e,i){const t=new ne,r=[],s=[],o=[],l=new ne,c=new pt;for(let g=0;g<=e;g++){const y=g/e;r[g]=this.getTangentAt(y,new ne)}s[0]=new ne,o[0]=new ne;let u=Number.MAX_VALUE;const d=Math.abs(r[0].x),f=Math.abs(r[0].y),m=Math.abs(r[0].z);d<=u&&(u=d,t.set(1,0,0)),f<=u&&(u=f,t.set(0,1,0)),m<=u&&t.set(0,0,1),l.crossVectors(r[0],t).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),l.crossVectors(r[g-1],r[g]),l.length()>Number.EPSILON){l.normalize();const y=Math.acos(Un(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(c.makeRotationAxis(l,y))}o[g].crossVectors(r[g],s[g])}if(i===!0){let g=Math.acos(Un(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(g=-g);for(let y=1;y<=e;y++)s[y].applyMatrix4(c.makeRotationAxis(r[y],g*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Cw extends ea{constructor(e=0,i=0,t=1,r=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=i,this.xRadius=t,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,i=new ze){const t=i,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),m=c-this.aX,g=u-this.aY;c=m*d-g*f+this.aX,u=m*f+g*d+this.aY}return t.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class LF extends Cw{constructor(e,i,t,r,s,o){super(e,i,t,t,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function iP(){let n=0,e=0,i=0,t=0;function r(s,o,l,c){n=s,e=l,i=-3*s+3*o-2*l-c,t=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,u){r(o,l,u*(l-s),u*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,u,d,f){let m=(o-s)/u-(l-s)/(u+d)+(l-o)/d,g=(l-o)/d-(c-o)/(d+f)+(c-l)/f;m*=d,g*=d,r(o,l,m,g)},calc:function(s){const o=s*s,l=o*s;return n+e*s+i*o+t*l}}}const sb=new ne,EC=new iP,PC=new iP,AC=new iP;class BF extends ea{constructor(e=[],i=!1,t="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=i,this.curveType=t,this.tension=r}getPoint(e,i=new ne){const t=i,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let u,d;this.closed||l>0?u=r[(l-1)%s]:(sb.subVectors(r[0],r[1]).add(r[0]),u=sb);const f=r[l%s],m=r[(l+1)%s];if(this.closed||l+2<s?d=r[(l+2)%s]:(sb.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=sb),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(f),g),x=Math.pow(f.distanceToSquared(m),g),b=Math.pow(m.distanceToSquared(d),g);x<1e-4&&(x=1),y<1e-4&&(y=x),b<1e-4&&(b=x),EC.initNonuniformCatmullRom(u.x,f.x,m.x,d.x,y,x,b),PC.initNonuniformCatmullRom(u.y,f.y,m.y,d.y,y,x,b),AC.initNonuniformCatmullRom(u.z,f.z,m.z,d.z,y,x,b)}else this.curveType==="catmullrom"&&(EC.initCatmullRom(u.x,f.x,m.x,d.x,this.tension),PC.initCatmullRom(u.y,f.y,m.y,d.y,this.tension),AC.initCatmullRom(u.z,f.z,m.z,d.z,this.tension));return t.set(EC.calc(c),PC.calc(c),AC.calc(c)),t}copy(e){super.copy(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){const r=e.points[i];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,t=this.points.length;i<t;i++){const r=this.points[i];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){const r=e.points[i];this.points.push(new ne().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function U6(n,e,i,t,r){const s=(t-e)*.5,o=(r-i)*.5,l=n*n,c=n*l;return(2*i-2*t+s+o)*c+(-3*i+3*t-2*s-o)*l+s*n+i}function Uge(n,e){const i=1-n;return i*i*e}function Fge(n,e){return 2*(1-n)*n*e}function zge(n,e){return n*n*e}function C0(n,e,i,t){return Uge(n,e)+Fge(n,i)+zge(n,t)}function Xge(n,e){const i=1-n;return i*i*i*e}function Wge(n,e){const i=1-n;return 3*i*i*n*e}function Qge(n,e){return 3*(1-n)*n*n*e}function Hge(n,e){return n*n*n*e}function k0(n,e,i,t,r){return Xge(n,e)+Wge(n,i)+Qge(n,t)+Hge(n,r)}class nP extends ea{constructor(e=new ze,i=new ze,t=new ze,r=new ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=i,this.v2=t,this.v3=r}getPoint(e,i=new ze){const t=i,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return t.set(k0(e,r.x,s.x,o.x,l.x),k0(e,r.y,s.y,o.y,l.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UF extends ea{constructor(e=new ne,i=new ne,t=new ne,r=new ne){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=i,this.v2=t,this.v3=r}getPoint(e,i=new ne){const t=i,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return t.set(k0(e,r.x,s.x,o.x,l.x),k0(e,r.y,s.y,o.y,l.y),k0(e,r.z,s.z,o.z,l.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rP extends ea{constructor(e=new ze,i=new ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=i}getPoint(e,i=new ze){const t=i;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new ze){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FF extends ea{constructor(e=new ne,i=new ne){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=i}getPoint(e,i=new ne){const t=i;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new ne){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kw extends ea{constructor(e=new ze,i=new ze,t=new ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=i,this.v2=t}getPoint(e,i=new ze){const t=i,r=this.v0,s=this.v1,o=this.v2;return t.set(C0(e,r.x,s.x,o.x),C0(e,r.y,s.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sP extends ea{constructor(e=new ne,i=new ne,t=new ne){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=i,this.v2=t}getPoint(e,i=new ne){const t=i,r=this.v0,s=this.v1,o=this.v2;return t.set(C0(e,r.x,s.x,o.x),C0(e,r.y,s.y,o.y),C0(e,r.z,s.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oP extends ea{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,i=new ze){const t=i,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,c=r[o===0?o:o-1],u=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return t.set(U6(l,c.x,u.x,d.x,f.x),U6(l,c.y,u.y,d.y,f.y)),t}copy(e){super.copy(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){const r=e.points[i];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,t=this.points.length;i<t;i++){const r=this.points[i];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){const r=e.points[i];this.points.push(new ze().fromArray(r))}return this}}var hO=Object.freeze({__proto__:null,ArcCurve:LF,CatmullRomCurve3:BF,CubicBezierCurve:nP,CubicBezierCurve3:UF,EllipseCurve:Cw,LineCurve:rP,LineCurve3:FF,QuadraticBezierCurve:kw,QuadraticBezierCurve3:sP,SplineCurve:oP});class zF extends ea{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(i)){const t=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new hO[t](i,e))}return this}getPoint(e,i){const t=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=t){const o=r[s]-t,l=this.curves[s],c=l.getLength(),u=c===0?0:1-o/c;return l.getPointAt(u,i)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let i=0;for(let t=0,r=this.curves.length;t<r;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e,e}getSpacedPoints(e=40){const i=[];for(let t=0;t<=e;t++)i.push(this.getPoint(t/e));return this.autoClose&&i.push(i[0]),i}getPoints(e=12){const i=[];let t;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let u=0;u<c.length;u++){const d=c[u];t&&t.equals(d)||(i.push(d),t=d)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(e){super.copy(e),this.curves=[];for(let i=0,t=e.curves.length;i<t;i++){const r=e.curves[i];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let i=0,t=this.curves.length;i<t;i++){const r=this.curves[i];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let i=0,t=e.curves.length;i<t;i++){const r=e.curves[i];this.curves.push(new hO[r.type]().fromJSON(r))}return this}}let nv=class extends zF{constructor(e){super(),this.type="Path",this.currentPoint=new ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let i=1,t=e.length;i<t;i++)this.lineTo(e[i].x,e[i].y);return this}moveTo(e,i){return this.currentPoint.set(e,i),this}lineTo(e,i){const t=new rP(this.currentPoint.clone(),new ze(e,i));return this.curves.push(t),this.currentPoint.set(e,i),this}quadraticCurveTo(e,i,t,r){const s=new kw(this.currentPoint.clone(),new ze(e,i),new ze(t,r));return this.curves.push(s),this.currentPoint.set(t,r),this}bezierCurveTo(e,i,t,r,s,o){const l=new nP(this.currentPoint.clone(),new ze(e,i),new ze(t,r),new ze(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const i=[this.currentPoint.clone()].concat(e),t=new oP(i);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,i,t,r,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,i+c,t,r,s,o),this}absarc(e,i,t,r,s,o){return this.absellipse(e,i,t,t,r,s,o),this}ellipse(e,i,t,r,s,o,l,c){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,i+d,t,r,s,o,l,c),this}absellipse(e,i,t,r,s,o,l,c){const u=new Cw(e,i,t,r,s,o,l,c);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class ey extends ni{constructor(e=[new ze(0,-.5),new ze(.5,0),new ze(0,.5)],i=12,t=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:i,phiStart:t,phiLength:r},i=Math.floor(i),r=Un(r,0,Math.PI*2);const s=[],o=[],l=[],c=[],u=[],d=1/i,f=new ne,m=new ze,g=new ne,y=new ne,x=new ne;let b=0,S=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:b=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,g.x=S*1,g.y=-b,g.z=S*0,x.copy(g),g.normalize(),c.push(g.x,g.y,g.z);break;case e.length-1:c.push(x.x,x.y,x.z);break;default:b=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,g.x=S*1,g.y=-b,g.z=S*0,y.copy(g),g.x+=x.x,g.y+=x.y,g.z+=x.z,g.normalize(),c.push(g.x,g.y,g.z),x.copy(y)}for(let _=0;_<=i;_++){const O=t+_*d*r,k=Math.sin(O),M=Math.cos(O);for(let E=0;E<=e.length-1;E++){f.x=e[E].x*k,f.y=e[E].y,f.z=e[E].x*M,o.push(f.x,f.y,f.z),m.x=_/i,m.y=E/(e.length-1),l.push(m.x,m.y);const R=c[3*E+0]*k,P=c[3*E+1],I=c[3*E+0]*M;u.push(R,P,I)}}for(let _=0;_<i;_++)for(let O=0;O<e.length-1;O++){const k=O+_*e.length,M=k,E=k+e.length,R=k+e.length+1,P=k+1;s.push(M,E,P),s.push(R,P,E)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(l,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ey(e.points,e.segments,e.phiStart,e.phiLength)}}class Tw extends ey{constructor(e=1,i=1,t=4,r=8){const s=new nv;s.absarc(0,-i/2,e,Math.PI*1.5,0),s.absarc(0,i/2,e,0,Math.PI*.5),super(s.getPoints(t),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:i,capSegments:t,radialSegments:r}}static fromJSON(e){return new Tw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Mw extends ni{constructor(e=1,i=32,t=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:i,thetaStart:t,thetaLength:r},i=Math.max(3,i);const s=[],o=[],l=[],c=[],u=new ne,d=new ze;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let f=0,m=3;f<=i;f++,m+=3){const g=t+f/i*r;u.x=e*Math.cos(g),u.y=e*Math.sin(g),o.push(u.x,u.y,u.z),l.push(0,0,1),d.x=(o[m]/e+1)/2,d.y=(o[m+1]/e+1)/2,c.push(d.x,d.y)}for(let f=1;f<=i;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qp extends ni{constructor(e=1,i=1,t=1,r=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:i,height:t,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const u=this;r=Math.floor(r),s=Math.floor(s);const d=[],f=[],m=[],g=[];let y=0;const x=[],b=t/2;let S=0;_(),o===!1&&(e>0&&O(!0),i>0&&O(!1)),this.setIndex(d),this.setAttribute("position",new Ct(f,3)),this.setAttribute("normal",new Ct(m,3)),this.setAttribute("uv",new Ct(g,2));function _(){const k=new ne,M=new ne;let E=0;const R=(i-e)/t;for(let P=0;P<=s;P++){const I=[],T=P/s,N=T*(i-e)+e;for(let L=0;L<=r;L++){const D=L/r,$=D*c+l,B=Math.sin($),U=Math.cos($);M.x=N*B,M.y=-T*t+b,M.z=N*U,f.push(M.x,M.y,M.z),k.set(B,R,U).normalize(),m.push(k.x,k.y,k.z),g.push(D,1-T),I.push(y++)}x.push(I)}for(let P=0;P<r;P++)for(let I=0;I<s;I++){const T=x[I][P],N=x[I+1][P],L=x[I+1][P+1],D=x[I][P+1];d.push(T,N,D),d.push(N,L,D),E+=6}u.addGroup(S,E,0),S+=E}function O(k){const M=y,E=new ze,R=new ne;let P=0;const I=k===!0?e:i,T=k===!0?1:-1;for(let L=1;L<=r;L++)f.push(0,b*T,0),m.push(0,T,0),g.push(.5,.5),y++;const N=y;for(let L=0;L<=r;L++){const $=L/r*c+l,B=Math.cos($),U=Math.sin($);R.x=I*U,R.y=b*T,R.z=I*B,f.push(R.x,R.y,R.z),m.push(0,T,0),E.x=B*.5+.5,E.y=U*.5*T+.5,g.push(E.x,E.y),y++}for(let L=0;L<r;L++){const D=M+L,$=N+L;k===!0?d.push($,$+1,D):d.push($+1,$,D),P+=3}u.addGroup(S,P,k===!0?1:2),S+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ew extends Qp{constructor(e=1,i=1,t=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,i,t,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:i,radialSegments:t,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Ew(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vh extends ni{constructor(e=[],i=[],t=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:i,radius:t,detail:r};const s=[],o=[];l(r),u(t),d(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(_){const O=new ne,k=new ne,M=new ne;for(let E=0;E<i.length;E+=3)g(i[E+0],O),g(i[E+1],k),g(i[E+2],M),c(O,k,M,_)}function c(_,O,k,M){const E=M+1,R=[];for(let P=0;P<=E;P++){R[P]=[];const I=_.clone().lerp(k,P/E),T=O.clone().lerp(k,P/E),N=E-P;for(let L=0;L<=N;L++)L===0&&P===E?R[P][L]=I:R[P][L]=I.clone().lerp(T,L/N)}for(let P=0;P<E;P++)for(let I=0;I<2*(E-P)-1;I++){const T=Math.floor(I/2);I%2===0?(m(R[P][T+1]),m(R[P+1][T]),m(R[P][T])):(m(R[P][T+1]),m(R[P+1][T+1]),m(R[P+1][T]))}}function u(_){const O=new ne;for(let k=0;k<s.length;k+=3)O.x=s[k+0],O.y=s[k+1],O.z=s[k+2],O.normalize().multiplyScalar(_),s[k+0]=O.x,s[k+1]=O.y,s[k+2]=O.z}function d(){const _=new ne;for(let O=0;O<s.length;O+=3){_.x=s[O+0],_.y=s[O+1],_.z=s[O+2];const k=b(_)/2/Math.PI+.5,M=S(_)/Math.PI+.5;o.push(k,1-M)}y(),f()}function f(){for(let _=0;_<o.length;_+=6){const O=o[_+0],k=o[_+2],M=o[_+4],E=Math.max(O,k,M),R=Math.min(O,k,M);E>.9&&R<.1&&(O<.2&&(o[_+0]+=1),k<.2&&(o[_+2]+=1),M<.2&&(o[_+4]+=1))}}function m(_){s.push(_.x,_.y,_.z)}function g(_,O){const k=_*3;O.x=e[k+0],O.y=e[k+1],O.z=e[k+2]}function y(){const _=new ne,O=new ne,k=new ne,M=new ne,E=new ze,R=new ze,P=new ze;for(let I=0,T=0;I<s.length;I+=9,T+=6){_.set(s[I+0],s[I+1],s[I+2]),O.set(s[I+3],s[I+4],s[I+5]),k.set(s[I+6],s[I+7],s[I+8]),E.set(o[T+0],o[T+1]),R.set(o[T+2],o[T+3]),P.set(o[T+4],o[T+5]),M.copy(_).add(O).add(k).divideScalar(3);const N=b(M);x(E,T+0,_,N),x(R,T+2,O,N),x(P,T+4,k,N)}}function x(_,O,k,M){M<0&&_.x===1&&(o[O]=_.x-1),k.x===0&&k.z===0&&(o[O]=M/2/Math.PI+.5)}function b(_){return Math.atan2(_.z,-_.x)}function S(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vh(e.vertices,e.indices,e.radius,e.details)}}class Pw extends Vh{constructor(e=1,i=0){const t=(1+Math.sqrt(5))/2,r=1/t,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-t,0,-r,t,0,r,-t,0,r,t,-r,-t,0,-r,t,0,r,-t,0,r,t,0,-t,0,-r,t,0,-r,-t,0,r,t,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,i),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new Pw(e.radius,e.detail)}}const ob=new ne,ab=new ne,RC=new ne,lb=new Ws;class XF extends ni{constructor(e=null,i=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:i},e!==null){const r=Math.pow(10,4),s=Math.cos(ju*i),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,u=[0,0,0],d=["a","b","c"],f=new Array(3),m={},g=[];for(let y=0;y<c;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:x,b,c:S}=lb;if(x.fromBufferAttribute(l,u[0]),b.fromBufferAttribute(l,u[1]),S.fromBufferAttribute(l,u[2]),lb.getNormal(RC),f[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,f[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const O=(_+1)%3,k=f[_],M=f[O],E=lb[d[_]],R=lb[d[O]],P=`${k}_${M}`,I=`${M}_${k}`;I in m&&m[I]?(RC.dot(m[I].normal)<=s&&(g.push(E.x,E.y,E.z),g.push(R.x,R.y,R.z)),m[I]=null):P in m||(m[P]={index0:u[_],index1:u[O],normal:RC.clone()})}}for(const y in m)if(m[y]){const{index0:x,index1:b}=m[y];ob.fromBufferAttribute(l,x),ab.fromBufferAttribute(l,b),g.push(ob.x,ob.y,ob.z),g.push(ab.x,ab.y,ab.z)}this.setAttribute("position",new Ct(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Zu=class extends nv{constructor(e){super(e),this.uuid=ko(),this.type="Shape",this.holes=[]}getPointsHoles(e){const i=[];for(let t=0,r=this.holes.length;t<r;t++)i[t]=this.holes[t].getPoints(e);return i}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let i=0,t=e.holes.length;i<t;i++){const r=e.holes[i];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let i=0,t=this.holes.length;i<t;i++){const r=this.holes[i];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let i=0,t=e.holes.length;i<t;i++){const r=e.holes[i];this.holes.push(new nv().fromJSON(r))}return this}};const Gge={triangulate:function(n,e,i=2){const t=e&&e.length,r=t?e[0]*i:n.length;let s=WF(n,0,r,i,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,u,d,f,m,g;if(t&&(s=Kge(n,e,s,i)),n.length>80*i){l=u=n[0],c=d=n[1];for(let y=i;y<r;y+=i)f=n[y],m=n[y+1],f<l&&(l=f),m<c&&(c=m),f>u&&(u=f),m>d&&(d=m);g=Math.max(u-l,d-c),g=g!==0?32767/g:0}return rv(s,o,i,l,c,g,0),o}};function WF(n,e,i,t,r){let s,o;if(r===c0e(n,e,i,t)>0)for(s=e;s<i;s+=t)o=F6(s,n[s],n[s+1],o);else for(s=i-t;s>=e;s-=t)o=F6(s,n[s],n[s+1],o);return o&&Aw(o,o.next)&&(ov(o),o=o.next),o}function ad(n,e){if(!n)return n;e||(e=n);let i=n,t;do if(t=!1,!i.steiner&&(Aw(i,i.next)||In(i.prev,i,i.next)===0)){if(ov(i),i=e=i.prev,i===i.next)break;t=!0}else i=i.next;while(t||i!==e);return e}function rv(n,e,i,t,r,s,o){if(!n)return;!o&&s&&n0e(n,t,r,s);let l=n,c,u;for(;n.prev!==n.next;){if(c=n.prev,u=n.next,s?jge(n,t,r,s):Yge(n)){e.push(c.i/i|0),e.push(n.i/i|0),e.push(u.i/i|0),ov(n),n=u.next,l=u.next;continue}if(n=u,n===l){o?o===1?(n=qge(ad(n),e,i),rv(n,e,i,t,r,s,2)):o===2&&Zge(n,e,i,t,r,s):rv(ad(n),e,i,t,r,s,1);break}}}function Yge(n){const e=n.prev,i=n,t=n.next;if(In(e,i,t)>=0)return!1;const r=e.x,s=i.x,o=t.x,l=e.y,c=i.y,u=t.y,d=r<s?r<o?r:o:s<o?s:o,f=l<c?l<u?l:u:c<u?c:u,m=r>s?r>o?r:o:s>o?s:o,g=l>c?l>u?l:u:c>u?c:u;let y=t.next;for(;y!==e;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=g&&Pf(r,l,s,c,o,u,y.x,y.y)&&In(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function jge(n,e,i,t){const r=n.prev,s=n,o=n.next;if(In(r,s,o)>=0)return!1;const l=r.x,c=s.x,u=o.x,d=r.y,f=s.y,m=o.y,g=l<c?l<u?l:u:c<u?c:u,y=d<f?d<m?d:m:f<m?f:m,x=l>c?l>u?l:u:c>u?c:u,b=d>f?d>m?d:m:f>m?f:m,S=yT(g,y,e,i,t),_=yT(x,b,e,i,t);let O=n.prevZ,k=n.nextZ;for(;O&&O.z>=S&&k&&k.z<=_;){if(O.x>=g&&O.x<=x&&O.y>=y&&O.y<=b&&O!==r&&O!==o&&Pf(l,d,c,f,u,m,O.x,O.y)&&In(O.prev,O,O.next)>=0||(O=O.prevZ,k.x>=g&&k.x<=x&&k.y>=y&&k.y<=b&&k!==r&&k!==o&&Pf(l,d,c,f,u,m,k.x,k.y)&&In(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;O&&O.z>=S;){if(O.x>=g&&O.x<=x&&O.y>=y&&O.y<=b&&O!==r&&O!==o&&Pf(l,d,c,f,u,m,O.x,O.y)&&In(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;k&&k.z<=_;){if(k.x>=g&&k.x<=x&&k.y>=y&&k.y<=b&&k!==r&&k!==o&&Pf(l,d,c,f,u,m,k.x,k.y)&&In(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function qge(n,e,i){let t=n;do{const r=t.prev,s=t.next.next;!Aw(r,s)&&QF(r,t,t.next,s)&&sv(r,s)&&sv(s,r)&&(e.push(r.i/i|0),e.push(t.i/i|0),e.push(s.i/i|0),ov(t),ov(t.next),t=n=s),t=t.next}while(t!==n);return ad(t)}function Zge(n,e,i,t,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&o0e(o,l)){let c=HF(o,l);o=ad(o,o.next),c=ad(c,c.next),rv(o,e,i,t,r,s,0),rv(c,e,i,t,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function Kge(n,e,i,t){const r=[];let s,o,l,c,u;for(s=0,o=e.length;s<o;s++)l=e[s]*t,c=s<o-1?e[s+1]*t:n.length,u=WF(n,l,c,t,!1),u===u.next&&(u.steiner=!0),r.push(s0e(u));for(r.sort(Jge),s=0;s<r.length;s++)i=e0e(r[s],i);return i}function Jge(n,e){return n.x-e.x}function e0e(n,e){const i=t0e(n,e);if(!i)return e;const t=HF(i,n);return ad(t,t.next),ad(i,i.next)}function t0e(n,e){let i=e,t=-1/0,r;const s=n.x,o=n.y;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){const m=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(m<=s&&m>t&&(t=m,r=i.x<i.next.x?i:i.next,m===s))return r}i=i.next}while(i!==e);if(!r)return null;const l=r,c=r.x,u=r.y;let d=1/0,f;i=r;do s>=i.x&&i.x>=c&&s!==i.x&&Pf(o<u?s:t,o,c,u,o<u?t:s,o,i.x,i.y)&&(f=Math.abs(o-i.y)/(s-i.x),sv(i,n)&&(f<d||f===d&&(i.x>r.x||i.x===r.x&&i0e(r,i)))&&(r=i,d=f)),i=i.next;while(i!==l);return r}function i0e(n,e){return In(n.prev,n,e.prev)<0&&In(e.next,n,n.next)<0}function n0e(n,e,i,t){let r=n;do r.z===0&&(r.z=yT(r.x,r.y,e,i,t)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,r0e(r)}function r0e(n){let e,i,t,r,s,o,l,c,u=1;do{for(i=n,n=null,s=null,o=0;i;){for(o++,t=i,l=0,e=0;e<u&&(l++,t=t.nextZ,!!t);e++);for(c=u;l>0||c>0&&t;)l!==0&&(c===0||!t||i.z<=t.z)?(r=i,i=i.nextZ,l--):(r=t,t=t.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=t}s.nextZ=null,u*=2}while(o>1);return n}function yT(n,e,i,t,r){return n=(n-i)*r|0,e=(e-t)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function s0e(n){let e=n,i=n;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==n);return i}function Pf(n,e,i,t,r,s,o,l){return(r-o)*(e-l)>=(n-o)*(s-l)&&(n-o)*(t-l)>=(i-o)*(e-l)&&(i-o)*(s-l)>=(r-o)*(t-l)}function o0e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!a0e(n,e)&&(sv(n,e)&&sv(e,n)&&l0e(n,e)&&(In(n.prev,n,e.prev)||In(n,e.prev,e))||Aw(n,e)&&In(n.prev,n,n.next)>0&&In(e.prev,e,e.next)>0)}function In(n,e,i){return(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y)}function Aw(n,e){return n.x===e.x&&n.y===e.y}function QF(n,e,i,t){const r=hb(In(n,e,i)),s=hb(In(n,e,t)),o=hb(In(i,t,n)),l=hb(In(i,t,e));return!!(r!==s&&o!==l||r===0&&cb(n,i,e)||s===0&&cb(n,t,e)||o===0&&cb(i,n,t)||l===0&&cb(i,e,t))}function cb(n,e,i){return e.x<=Math.max(n.x,i.x)&&e.x>=Math.min(n.x,i.x)&&e.y<=Math.max(n.y,i.y)&&e.y>=Math.min(n.y,i.y)}function hb(n){return n>0?1:n<0?-1:0}function a0e(n,e){let i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==e.i&&i.next.i!==e.i&&QF(i,i.next,n,e))return!0;i=i.next}while(i!==n);return!1}function sv(n,e){return In(n.prev,n,n.next)<0?In(n,e,n.next)>=0&&In(n,n.prev,e)>=0:In(n,e,n.prev)<0||In(n,n.next,e)<0}function l0e(n,e){let i=n,t=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(t=!t),i=i.next;while(i!==n);return t}function HF(n,e){const i=new bT(n.i,n.x,n.y),t=new bT(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,i.next=r,r.prev=i,t.next=i,i.prev=t,s.next=t,t.prev=s,t}function F6(n,e,i,t){const r=new bT(n,e,i);return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function ov(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function bT(n,e,i){this.i=n,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function c0e(n,e,i,t){let r=0;for(let s=e,o=i-t;s<i;s+=t)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class il{static area(e){const i=e.length;let t=0;for(let r=i-1,s=0;s<i;r=s++)t+=e[r].x*e[s].y-e[s].x*e[r].y;return t*.5}static isClockWise(e){return il.area(e)<0}static triangulateShape(e,i){const t=[],r=[],s=[];z6(e),X6(t,e);let o=e.length;i.forEach(z6);for(let c=0;c<i.length;c++)r.push(o),o+=i[c].length,X6(t,i[c]);const l=Gge.triangulate(t,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function z6(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function X6(n,e){for(let i=0;i<e.length;i++)n.push(e[i].x),n.push(e[i].y)}class Rw extends ni{constructor(e=new Zu([new ze(.5,.5),new ze(-.5,.5),new ze(-.5,-.5),new ze(.5,-.5)]),i={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:i},e=Array.isArray(e)?e:[e];const t=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const u=e[l];o(u)}this.setAttribute("position",new Ct(r,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(l){const c=[],u=i.curveSegments!==void 0?i.curveSegments:12,d=i.steps!==void 0?i.steps:1,f=i.depth!==void 0?i.depth:1;let m=i.bevelEnabled!==void 0?i.bevelEnabled:!0,g=i.bevelThickness!==void 0?i.bevelThickness:.2,y=i.bevelSize!==void 0?i.bevelSize:g-.1,x=i.bevelOffset!==void 0?i.bevelOffset:0,b=i.bevelSegments!==void 0?i.bevelSegments:3;const S=i.extrudePath,_=i.UVGenerator!==void 0?i.UVGenerator:h0e;let O,k=!1,M,E,R,P;S&&(O=S.getSpacedPoints(d),k=!0,m=!1,M=S.computeFrenetFrames(d,!1),E=new ne,R=new ne,P=new ne),m||(b=0,g=0,y=0,x=0);const I=l.extractPoints(u);let T=I.shape;const N=I.holes;if(!il.isClockWise(T)){T=T.reverse();for(let re=0,W=N.length;re<W;re++){const q=N[re];il.isClockWise(q)&&(N[re]=q.reverse())}}const D=il.triangulateShape(T,N),$=T;for(let re=0,W=N.length;re<W;re++){const q=N[re];T=T.concat(q)}function B(re,W,q){return W||console.error("THREE.ExtrudeGeometry: vec does not exist"),re.clone().addScaledVector(W,q)}const U=T.length,Q=D.length;function Z(re,W,q){let ae,fe,ye;const Me=re.x-W.x,J=re.y-W.y,G=q.x-re.x,ue=q.y-re.y,de=Me*Me+J*J,Oe=Me*ue-J*G;if(Math.abs(Oe)>Number.EPSILON){const Te=Math.sqrt(de),We=Math.sqrt(G*G+ue*ue),Ve=W.x-J/Te,Fe=W.y+Me/Te,rt=q.x-ue/We,Ge=q.y+G/We,nt=((rt-Ve)*ue-(Ge-Fe)*G)/(Me*ue-J*G);ae=Ve+Me*nt-re.x,fe=Fe+J*nt-re.y;const kt=ae*ae+fe*fe;if(kt<=2)return new ze(ae,fe);ye=Math.sqrt(kt/2)}else{let Te=!1;Me>Number.EPSILON?G>Number.EPSILON&&(Te=!0):Me<-Number.EPSILON?G<-Number.EPSILON&&(Te=!0):Math.sign(J)===Math.sign(ue)&&(Te=!0),Te?(ae=-J,fe=Me,ye=Math.sqrt(de)):(ae=Me,fe=J,ye=Math.sqrt(de/2))}return new ze(ae/ye,fe/ye)}const te=[];for(let re=0,W=$.length,q=W-1,ae=re+1;re<W;re++,q++,ae++)q===W&&(q=0),ae===W&&(ae=0),te[re]=Z($[re],$[q],$[ae]);const ce=[];let pe,Ee=te.concat();for(let re=0,W=N.length;re<W;re++){const q=N[re];pe=[];for(let ae=0,fe=q.length,ye=fe-1,Me=ae+1;ae<fe;ae++,ye++,Me++)ye===fe&&(ye=0),Me===fe&&(Me=0),pe[ae]=Z(q[ae],q[ye],q[Me]);ce.push(pe),Ee=Ee.concat(pe)}for(let re=0;re<b;re++){const W=re/b,q=g*Math.cos(W*Math.PI/2),ae=y*Math.sin(W*Math.PI/2)+x;for(let fe=0,ye=$.length;fe<ye;fe++){const Me=B($[fe],te[fe],ae);K(Me.x,Me.y,-q)}for(let fe=0,ye=N.length;fe<ye;fe++){const Me=N[fe];pe=ce[fe];for(let J=0,G=Me.length;J<G;J++){const ue=B(Me[J],pe[J],ae);K(ue.x,ue.y,-q)}}}const we=y+x;for(let re=0;re<U;re++){const W=m?B(T[re],Ee[re],we):T[re];k?(R.copy(M.normals[0]).multiplyScalar(W.x),E.copy(M.binormals[0]).multiplyScalar(W.y),P.copy(O[0]).add(R).add(E),K(P.x,P.y,P.z)):K(W.x,W.y,0)}for(let re=1;re<=d;re++)for(let W=0;W<U;W++){const q=m?B(T[W],Ee[W],we):T[W];k?(R.copy(M.normals[re]).multiplyScalar(q.x),E.copy(M.binormals[re]).multiplyScalar(q.y),P.copy(O[re]).add(R).add(E),K(P.x,P.y,P.z)):K(q.x,q.y,f/d*re)}for(let re=b-1;re>=0;re--){const W=re/b,q=g*Math.cos(W*Math.PI/2),ae=y*Math.sin(W*Math.PI/2)+x;for(let fe=0,ye=$.length;fe<ye;fe++){const Me=B($[fe],te[fe],ae);K(Me.x,Me.y,f+q)}for(let fe=0,ye=N.length;fe<ye;fe++){const Me=N[fe];pe=ce[fe];for(let J=0,G=Me.length;J<G;J++){const ue=B(Me[J],pe[J],ae);k?K(ue.x,ue.y+O[d-1].y,O[d-1].x+q):K(ue.x,ue.y,f+q)}}}he(),_e();function he(){const re=r.length/3;if(m){let W=0,q=U*W;for(let ae=0;ae<Q;ae++){const fe=D[ae];j(fe[2]+q,fe[1]+q,fe[0]+q)}W=d+b*2,q=U*W;for(let ae=0;ae<Q;ae++){const fe=D[ae];j(fe[0]+q,fe[1]+q,fe[2]+q)}}else{for(let W=0;W<Q;W++){const q=D[W];j(q[2],q[1],q[0])}for(let W=0;W<Q;W++){const q=D[W];j(q[0]+U*d,q[1]+U*d,q[2]+U*d)}}t.addGroup(re,r.length/3-re,0)}function _e(){const re=r.length/3;let W=0;Ce($,W),W+=$.length;for(let q=0,ae=N.length;q<ae;q++){const fe=N[q];Ce(fe,W),W+=fe.length}t.addGroup(re,r.length/3-re,1)}function Ce(re,W){let q=re.length;for(;--q>=0;){const ae=q;let fe=q-1;fe<0&&(fe=re.length-1);for(let ye=0,Me=d+b*2;ye<Me;ye++){const J=U*ye,G=U*(ye+1),ue=W+ae+J,de=W+fe+J,Oe=W+fe+G,Te=W+ae+G;F(ue,de,Oe,Te)}}}function K(re,W,q){c.push(re),c.push(W),c.push(q)}function j(re,W,q){z(re),z(W),z(q);const ae=r.length/3,fe=_.generateTopUV(t,r,ae-3,ae-2,ae-1);ee(fe[0]),ee(fe[1]),ee(fe[2])}function F(re,W,q,ae){z(re),z(W),z(ae),z(W),z(q),z(ae);const fe=r.length/3,ye=_.generateSideWallUV(t,r,fe-6,fe-3,fe-2,fe-1);ee(ye[0]),ee(ye[1]),ee(ye[3]),ee(ye[1]),ee(ye[2]),ee(ye[3])}function z(re){r.push(c[re*3+0]),r.push(c[re*3+1]),r.push(c[re*3+2])}function ee(re){s.push(re.x),s.push(re.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),i=this.parameters.shapes,t=this.parameters.options;return u0e(i,t,e)}static fromJSON(e,i){const t=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=i[e.shapes[s]];t.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new hO[r.type]().fromJSON(r)),new Rw(t,e.options)}}const h0e={generateTopUV:function(n,e,i,t,r){const s=e[i*3],o=e[i*3+1],l=e[t*3],c=e[t*3+1],u=e[r*3],d=e[r*3+1];return[new ze(s,o),new ze(l,c),new ze(u,d)]},generateSideWallUV:function(n,e,i,t,r,s){const o=e[i*3],l=e[i*3+1],c=e[i*3+2],u=e[t*3],d=e[t*3+1],f=e[t*3+2],m=e[r*3],g=e[r*3+1],y=e[r*3+2],x=e[s*3],b=e[s*3+1],S=e[s*3+2];return Math.abs(l-d)<Math.abs(o-u)?[new ze(o,1-c),new ze(u,1-f),new ze(m,1-y),new ze(x,1-S)]:[new ze(l,1-c),new ze(d,1-f),new ze(g,1-y),new ze(b,1-S)]}};function u0e(n,e,i){if(i.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const s=n[t];i.shapes.push(s.uuid)}else i.shapes.push(n.uuid);return i.options=Object.assign({},e),e.extrudePath!==void 0&&(i.options.extrudePath=e.extrudePath.toJSON()),i}class Iw extends Vh{constructor(e=1,i=0){const t=(1+Math.sqrt(5))/2,r=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,i),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new Iw(e.radius,e.detail)}}class ty extends Vh{constructor(e=1,i=0){const t=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(t,r,e,i),this.type="OctahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new ty(e.radius,e.detail)}}class Dw extends ni{constructor(e=.5,i=1,t=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:i,thetaSegments:t,phiSegments:r,thetaStart:s,thetaLength:o},t=Math.max(3,t),r=Math.max(1,r);const l=[],c=[],u=[],d=[];let f=e;const m=(i-e)/r,g=new ne,y=new ze;for(let x=0;x<=r;x++){for(let b=0;b<=t;b++){const S=s+b/t*o;g.x=f*Math.cos(S),g.y=f*Math.sin(S),c.push(g.x,g.y,g.z),u.push(0,0,1),y.x=(g.x/i+1)/2,y.y=(g.y/i+1)/2,d.push(y.x,y.y)}f+=m}for(let x=0;x<r;x++){const b=x*(t+1);for(let S=0;S<t;S++){const _=S+b,O=_,k=_+t+1,M=_+t+2,E=_+1;l.push(O,k,E),l.push(k,M,E)}}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Nw extends ni{constructor(e=new Zu([new ze(0,.5),new ze(-.5,-.5),new ze(.5,-.5)]),i=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:i};const t=[],r=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(l,c,d),l+=c,c=0;this.setIndex(t),this.setAttribute("position",new Ct(r,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function u(d){const f=r.length/3,m=d.extractPoints(i);let g=m.shape;const y=m.holes;il.isClockWise(g)===!1&&(g=g.reverse());for(let b=0,S=y.length;b<S;b++){const _=y[b];il.isClockWise(_)===!0&&(y[b]=_.reverse())}const x=il.triangulateShape(g,y);for(let b=0,S=y.length;b<S;b++){const _=y[b];g=g.concat(_)}for(let b=0,S=g.length;b<S;b++){const _=g[b];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let b=0,S=x.length;b<S;b++){const _=x[b],O=_[0]+f,k=_[1]+f,M=_[2]+f;t.push(O,k,M),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),i=this.parameters.shapes;return d0e(i,e)}static fromJSON(e,i){const t=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=i[e.shapes[r]];t.push(o)}return new Nw(t,e.curveSegments)}}function d0e(n,e){if(e.shapes=[],Array.isArray(n))for(let i=0,t=n.length;i<t;i++){const r=n[i];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class iy extends ni{constructor(e=1,i=32,t=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:i,heightSegments:t,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},i=Math.max(3,Math.floor(i)),t=Math.max(2,Math.floor(t));const c=Math.min(o+l,Math.PI);let u=0;const d=[],f=new ne,m=new ne,g=[],y=[],x=[],b=[];for(let S=0;S<=t;S++){const _=[],O=S/t;let k=0;S===0&&o===0?k=.5/i:S===t&&c===Math.PI&&(k=-.5/i);for(let M=0;M<=i;M++){const E=M/i;f.x=-e*Math.cos(r+E*s)*Math.sin(o+O*l),f.y=e*Math.cos(o+O*l),f.z=e*Math.sin(r+E*s)*Math.sin(o+O*l),y.push(f.x,f.y,f.z),m.copy(f).normalize(),x.push(m.x,m.y,m.z),b.push(E+k,1-O),_.push(u++)}d.push(_)}for(let S=0;S<t;S++)for(let _=0;_<i;_++){const O=d[S][_+1],k=d[S][_],M=d[S+1][_],E=d[S+1][_+1];(S!==0||o>0)&&g.push(O,k,E),(S!==t-1||c<Math.PI)&&g.push(k,M,E)}this.setIndex(g),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(x,3)),this.setAttribute("uv",new Ct(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $w extends Vh{constructor(e=1,i=0){const t=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(t,r,e,i),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new $w(e.radius,e.detail)}}class Vw extends ni{constructor(e=1,i=.4,t=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:i,radialSegments:t,tubularSegments:r,arc:s},t=Math.floor(t),r=Math.floor(r);const o=[],l=[],c=[],u=[],d=new ne,f=new ne,m=new ne;for(let g=0;g<=t;g++)for(let y=0;y<=r;y++){const x=y/r*s,b=g/t*Math.PI*2;f.x=(e+i*Math.cos(b))*Math.cos(x),f.y=(e+i*Math.cos(b))*Math.sin(x),f.z=i*Math.sin(b),l.push(f.x,f.y,f.z),d.x=e*Math.cos(x),d.y=e*Math.sin(x),m.subVectors(f,d).normalize(),c.push(m.x,m.y,m.z),u.push(y/r),u.push(g/t)}for(let g=1;g<=t;g++)for(let y=1;y<=r;y++){const x=(r+1)*g+y-1,b=(r+1)*(g-1)+y-1,S=(r+1)*(g-1)+y,_=(r+1)*g+y;o.push(x,b,_),o.push(b,S,_)}this.setIndex(o),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Lw extends ni{constructor(e=1,i=.4,t=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:i,tubularSegments:t,radialSegments:r,p:s,q:o},t=Math.floor(t),r=Math.floor(r);const l=[],c=[],u=[],d=[],f=new ne,m=new ne,g=new ne,y=new ne,x=new ne,b=new ne,S=new ne;for(let O=0;O<=t;++O){const k=O/t*s*Math.PI*2;_(k,s,o,e,g),_(k+.01,s,o,e,y),b.subVectors(y,g),S.addVectors(y,g),x.crossVectors(b,S),S.crossVectors(x,b),x.normalize(),S.normalize();for(let M=0;M<=r;++M){const E=M/r*Math.PI*2,R=-i*Math.cos(E),P=i*Math.sin(E);f.x=g.x+(R*S.x+P*x.x),f.y=g.y+(R*S.y+P*x.y),f.z=g.z+(R*S.z+P*x.z),c.push(f.x,f.y,f.z),m.subVectors(f,g).normalize(),u.push(m.x,m.y,m.z),d.push(O/t),d.push(M/r)}}for(let O=1;O<=t;O++)for(let k=1;k<=r;k++){const M=(r+1)*(O-1)+(k-1),E=(r+1)*O+(k-1),R=(r+1)*O+k,P=(r+1)*(O-1)+k;l.push(M,E,P),l.push(E,R,P)}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(d,2));function _(O,k,M,E,R){const P=Math.cos(O),I=Math.sin(O),T=M/k*O,N=Math.cos(T);R.x=E*(2+N)*.5*P,R.y=E*(2+N)*I*.5,R.z=E*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Bw extends ni{constructor(e=new sP(new ne(-1,-1,0),new ne(-1,1,0),new ne(1,1,0)),i=64,t=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:i,radius:t,radialSegments:r,closed:s};const o=e.computeFrenetFrames(i,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new ne,c=new ne,u=new ze;let d=new ne;const f=[],m=[],g=[],y=[];x(),this.setIndex(y),this.setAttribute("position",new Ct(f,3)),this.setAttribute("normal",new Ct(m,3)),this.setAttribute("uv",new Ct(g,2));function x(){for(let O=0;O<i;O++)b(O);b(s===!1?i:0),_(),S()}function b(O){d=e.getPointAt(O/i,d);const k=o.normals[O],M=o.binormals[O];for(let E=0;E<=r;E++){const R=E/r*Math.PI*2,P=Math.sin(R),I=-Math.cos(R);c.x=I*k.x+P*M.x,c.y=I*k.y+P*M.y,c.z=I*k.z+P*M.z,c.normalize(),m.push(c.x,c.y,c.z),l.x=d.x+t*c.x,l.y=d.y+t*c.y,l.z=d.z+t*c.z,f.push(l.x,l.y,l.z)}}function S(){for(let O=1;O<=i;O++)for(let k=1;k<=r;k++){const M=(r+1)*(O-1)+(k-1),E=(r+1)*O+(k-1),R=(r+1)*O+k,P=(r+1)*(O-1)+k;y.push(M,E,P),y.push(E,R,P)}}function _(){for(let O=0;O<=i;O++)for(let k=0;k<=r;k++)u.x=O/i,u.y=k/r,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Bw(new hO[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class GF extends ni{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const i=[],t=new Set,r=new ne,s=new ne;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let u=0,d=c.length;u<d;++u){const f=c[u],m=f.start,g=f.count;for(let y=m,x=m+g;y<x;y+=3)for(let b=0;b<3;b++){const S=l.getX(y+b),_=l.getX(y+(b+1)%3);r.fromBufferAttribute(o,S),s.fromBufferAttribute(o,_),W6(r,s,t)===!0&&(i.push(r.x,r.y,r.z),i.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let u=0;u<3;u++){const d=3*l+u,f=3*l+(u+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,f),W6(r,s,t)===!0&&(i.push(r.x,r.y,r.z),i.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(i,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function W6(n,e,i){const t=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return i.has(t)===!0||i.has(r)===!0?!1:(i.add(t),i.add(r),!0)}var Q6=Object.freeze({__proto__:null,BoxGeometry:Nh,CapsuleGeometry:Tw,CircleGeometry:Mw,ConeGeometry:Ew,CylinderGeometry:Qp,DodecahedronGeometry:Pw,EdgesGeometry:XF,ExtrudeGeometry:Rw,IcosahedronGeometry:Iw,LatheGeometry:ey,OctahedronGeometry:ty,PlaneGeometry:$h,PolyhedronGeometry:Vh,RingGeometry:Dw,ShapeGeometry:Nw,SphereGeometry:iy,TetrahedronGeometry:$w,TorusGeometry:Vw,TorusKnotGeometry:Lw,TubeGeometry:Bw,WireframeGeometry:GF});class YF extends ns{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new it(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class T0 extends ks{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class aP extends ns{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new it(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jF extends aP{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new it(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new it(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new it(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class M0 extends ns{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new it(16777215),this.specular=new it(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pr,this.combine=Hv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qF extends ns{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new it(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ZF extends ns{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class lP extends ns{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pr,this.combine=Hv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KF extends ns{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new it(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class JF extends rs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Lu(n,e,i){return!n||!i&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function ez(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function tz(n){function e(r,s){return n[r]-n[s]}const i=n.length,t=new Array(i);for(let r=0;r!==i;++r)t[r]=r;return t.sort(e),t}function xT(n,e,i){const t=n.length,r=new n.constructor(t);for(let s=0,o=0;o!==t;++s){const l=i[s]*e;for(let c=0;c!==e;++c)r[o++]=n[l+c]}return r}function cP(n,e,i,t){let r=1,s=n[0];for(;s!==void 0&&s[t]===void 0;)s=n[r++];if(s===void 0)return;let o=s[t];if(o!==void 0)if(Array.isArray(o))do o=s[t],o!==void 0&&(e.push(s.time),i.push.apply(i,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[t],o!==void 0&&(e.push(s.time),o.toArray(i,i.length)),s=n[r++];while(s!==void 0);else do o=s[t],o!==void 0&&(e.push(s.time),i.push(o)),s=n[r++];while(s!==void 0)}function f0e(n,e,i,t,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const u=s.tracks[c],d=u.getValueSize(),f=[],m=[];for(let g=0;g<u.times.length;++g){const y=u.times[g]*r;if(!(y<i||y>=t)){f.push(u.times[g]);for(let x=0;x<d;++x)m.push(u.values[g*d+x])}}f.length!==0&&(u.times=Lu(f,u.times.constructor),u.values=Lu(m,u.values.constructor),o.push(u))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function p0e(n,e=0,i=n,t=30){t<=0&&(t=30);const r=i.tracks.length,s=e/t;for(let o=0;o<r;++o){const l=i.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const u=n.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===c});if(u===void 0)continue;let d=0;const f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let m=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const y=l.times.length-1;let x;if(s<=l.times[0]){const S=d,_=f-d;x=l.values.slice(S,_)}else if(s>=l.times[y]){const S=y*f+d,_=S+f-d;x=l.values.slice(S,_)}else{const S=l.createInterpolant(),_=d,O=f-d;S.evaluate(s),x=S.resultBuffer.slice(_,O)}c==="quaternion"&&new ir().fromArray(x).normalize().conjugate().toArray(x);const b=u.times.length;for(let S=0;S<b;++S){const _=S*g+m;if(c==="quaternion")ir.multiplyQuaternionsFlat(u.values,_,x,0,u.values,_);else{const O=g-m*2;for(let k=0;k<O;++k)u.values[_+k]-=x[k]}}}return n.blendMode=WE,n}const m0e={convertArray:Lu,isTypedArray:ez,getKeyframeOrder:tz,sortedArray:xT,flattenJSON:cP,subclip:f0e,makeClipAdditive:p0e};class ny{constructor(e,i,t,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new i.constructor(t),this.sampleValues=i,this.valueSize=t,this.settings=null,this.DefaultSettings_={}}evaluate(e){const i=this.parameterPositions;let t=this._cachedIndex,r=i[t],s=i[t-1];e:{t:{let o;i:{n:if(!(e<r)){for(let l=t+2;;){if(r===void 0){if(e<s)break n;return t=i.length,this._cachedIndex=t,this.copySampleValue_(t-1)}if(t===l)break;if(s=r,r=i[++t],e<r)break t}o=i.length;break i}if(!(e>=s)){const l=i[1];e<l&&(t=2,s=l);for(let c=t-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(t===c)break;if(r=s,s=i[--t-1],e>=s)break t}o=t,t=0;break i}break e}for(;t<o;){const l=t+o>>>1;e<i[l]?o=l:t=l+1}if(r=i[t],s=i[t-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return t=i.length,this._cachedIndex=t,this.copySampleValue_(t-1)}this._cachedIndex=t,this.intervalChanged_(t,s,r)}return this.interpolate_(t,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const i=this.resultBuffer,t=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)i[o]=t[s+o];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class iz extends ny{constructor(e,i,t,r){super(e,i,t,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Nu,endingEnd:Nu}}intervalChanged_(e,i,t){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case $u:s=e,l=2*i-t;break;case j0:s=r.length-2,l=i+r[s]-r[s+1];break;default:s=e,l=t}if(c===void 0)switch(this.getSettings_().endingEnd){case $u:o=e,c=2*t-i;break;case j0:o=1,c=t+r[1]-r[0];break;default:o=e-1,c=i}const u=(t-i)*.5,d=this.valueSize;this._weightPrev=u/(i-l),this._weightNext=u/(c-t),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,i,t,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,d=this._offsetPrev,f=this._offsetNext,m=this._weightPrev,g=this._weightNext,y=(t-i)/(r-i),x=y*y,b=x*y,S=-m*b+2*m*x-m*y,_=(1+m)*b+(-1.5-2*m)*x+(-.5+m)*y+1,O=(-1-g)*b+(1.5+g)*x+.5*y,k=g*b-g*x;for(let M=0;M!==l;++M)s[M]=S*o[d+M]+_*o[u+M]+O*o[c+M]+k*o[f+M];return s}}class hP extends ny{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e,i,t,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,d=(t-i)/(r-i),f=1-d;for(let m=0;m!==l;++m)s[m]=o[u+m]*f+o[c+m]*d;return s}}class nz extends ny{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ea{constructor(e,i,t,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Lu(i,this.TimeBufferType),this.values=Lu(t,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const i=e.constructor;let t;if(i.toJSON!==this.toJSON)t=i.toJSON(e);else{t={name:e.name,times:Lu(e.times,Array),values:Lu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new nz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new hP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new iz(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let i;switch(e){case mp:i=this.InterpolantFactoryMethodDiscrete;break;case gp:i=this.InterpolantFactoryMethodLinear;break;case wx:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mp;case this.InterpolantFactoryMethodLinear:return gp;case this.InterpolantFactoryMethodSmooth:return wx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const i=this.times;for(let t=0,r=i.length;t!==r;++t)i[t]+=e}return this}scale(e){if(e!==1){const i=this.times;for(let t=0,r=i.length;t!==r;++t)i[t]*=e}return this}trim(e,i){const t=this.times,r=t.length;let s=0,o=r-1;for(;s!==r&&t[s]<e;)++s;for(;o!==-1&&t[o]>i;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=t.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const t=this.times,r=this.values,s=t.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=t[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&ez(r))for(let l=0,c=r.length;l!==c;++l){const u=r[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),i=this.values.slice(),t=this.getValueSize(),r=this.getInterpolation()===wx,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const u=e[l],d=e[l+1];if(u!==d&&(l!==1||u!==e[0]))if(r)c=!0;else{const f=l*t,m=f-t,g=f+t;for(let y=0;y!==t;++y){const x=i[f+y];if(x!==i[m+y]||x!==i[g+y]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const f=l*t,m=o*t;for(let g=0;g!==t;++g)i[m+g]=i[f+g]}++o}}if(s>0){e[o]=e[s];for(let l=s*t,c=o*t,u=0;u!==t;++u)i[c+u]=i[l+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=i.slice(0,o*t)):(this.times=e,this.values=i),this}clone(){const e=this.times.slice(),i=this.values.slice(),t=this.constructor,r=new t(this.name,e,i);return r.createInterpolant=this.createInterpolant,r}}Ea.prototype.TimeBufferType=Float32Array;Ea.prototype.ValueBufferType=Float32Array;Ea.prototype.DefaultInterpolation=gp;class xd extends Ea{}xd.prototype.ValueTypeName="bool";xd.prototype.ValueBufferType=Array;xd.prototype.DefaultInterpolation=mp;xd.prototype.InterpolantFactoryMethodLinear=void 0;xd.prototype.InterpolantFactoryMethodSmooth=void 0;class uP extends Ea{}uP.prototype.ValueTypeName="color";class Op extends Ea{}Op.prototype.ValueTypeName="number";class rz extends ny{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e,i,t,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(t-i)/(r-i);let u=e*l;for(let d=u+l;u!==d;u+=4)ir.slerpFlat(s,0,o,u-l,o,u,c);return s}}class Od extends Ea{InterpolantFactoryMethodLinear(e){return new rz(this.times,this.values,this.getValueSize(),e)}}Od.prototype.ValueTypeName="quaternion";Od.prototype.DefaultInterpolation=gp;Od.prototype.InterpolantFactoryMethodSmooth=void 0;class wd extends Ea{}wd.prototype.ValueTypeName="string";wd.prototype.ValueBufferType=Array;wd.prototype.DefaultInterpolation=mp;wd.prototype.InterpolantFactoryMethodLinear=void 0;wd.prototype.InterpolantFactoryMethodSmooth=void 0;class wp extends Ea{}wp.prototype.ValueTypeName="vector";class _p{constructor(e="",i=-1,t=[],r=vw){this.name=e,this.tracks=t,this.duration=i,this.blendMode=r,this.uuid=ko(),this.duration<0&&this.resetDuration()}static parse(e){const i=[],t=e.tracks,r=1/(e.fps||1);for(let o=0,l=t.length;o!==l;++o)i.push(v0e(t[o]).scale(r));const s=new this(e.name,e.duration,i,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const i=[],t=e.tracks,r={name:e.name,duration:e.duration,tracks:i,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=t.length;s!==o;++s)i.push(Ea.toJSON(t[s]));return r}static CreateFromMorphTargetSequence(e,i,t,r){const s=i.length,o=[];for(let l=0;l<s;l++){let c=[],u=[];c.push((l+s-1)%s,l,(l+1)%s),u.push(0,1,0);const d=tz(c);c=xT(c,1,d),u=xT(u,1,d),!r&&c[0]===0&&(c.push(s),u.push(u[0])),o.push(new Op(".morphTargetInfluences["+i[l].name+"]",c,u).scale(1/t))}return new this(e,-1,o)}static findByName(e,i){let t=e;if(!Array.isArray(e)){const r=e;t=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<t.length;r++)if(t[r].name===i)return t[r];return null}static CreateClipsFromMorphTargetSequences(e,i,t){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const u=e[l],d=u.name.match(s);if(d&&d.length>1){const f=d[1];let m=r[f];m||(r[f]=m=[]),m.push(u)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],i,t));return o}static parseAnimation(e,i){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const t=function(f,m,g,y,x){if(g.length!==0){const b=[],S=[];cP(g,b,S,y),b.length!==0&&x.push(new f(m,b,S))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const m=u[f].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let y;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(let x=0;x<m[y].morphTargets.length;x++)g[m[y].morphTargets[x]]=-1;for(const x in g){const b=[],S=[];for(let _=0;_!==m[y].morphTargets.length;++_){const O=m[y];b.push(O.time),S.push(O.morphTarget===x?1:0)}r.push(new Op(".morphTargetInfluence["+x+"]",b,S))}c=g.length*o}else{const g=".bones["+i[f].name+"]";t(wp,g+".position",m,"pos",r),t(Od,g+".quaternion",m,"rot",r),t(wp,g+".scale",m,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let i=0;for(let t=0,r=e.length;t!==r;++t){const s=this.tracks[t];i=Math.max(i,s.times[s.times.length-1])}return this.duration=i,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let i=0;i<this.tracks.length;i++)e=e&&this.tracks[i].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function g0e(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Op;case"vector":case"vector2":case"vector3":case"vector4":return wp;case"color":return uP;case"quaternion":return Od;case"bool":case"boolean":return xd;case"string":return wd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function v0e(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=g0e(n.type);if(n.times===void 0){const i=[],t=[];cP(n.keys,i,t,"value"),n.times=i,n.values=t}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Xl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class dP{constructor(e,i,t){const r=this;let s=!1,o=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=t,this.itemStart=function(d){l++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,l),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,m=u.length;f<m;f+=2){const g=u[f],y=u[f+1];if(g.global&&(g.lastIndex=0),g.test(d))return y}return null}}}const sz=new dP;let Ts=class{constructor(e){this.manager=e!==void 0?e:sz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){const t=this;return new Promise(function(r,s){t.load(e,r,i,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Ts.DEFAULT_MATERIAL_NAME="__DEFAULT";const Al={};class y0e extends Error{constructor(e,i){super(e),this.response=i}}class sl extends Ts{constructor(e){super(e)}load(e,i,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{i&&i(s),this.manager.itemEnd(e)},0),s;if(Al[e]!==void 0){Al[e].push({onLoad:i,onProgress:t,onError:r});return}Al[e]=[],Al[e].push({onLoad:i,onProgress:t,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Al[e],f=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=m?parseInt(m):0,y=g!==0;let x=0;const b=new ReadableStream({start(S){_();function _(){f.read().then(({done:O,value:k})=>{if(O)S.close();else{x+=k.byteLength;const M=new ProgressEvent("progress",{lengthComputable:y,loaded:x,total:g});for(let E=0,R=d.length;E<R;E++){const P=d[E];P.onProgress&&P.onProgress(M)}S.enqueue(k),_()}})}}});return new Response(b)}else throw new y0e(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return u.json();default:if(l===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(l),m=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(m);return u.arrayBuffer().then(y=>g.decode(y))}}}).then(u=>{Xl.add(e,u);const d=Al[e];delete Al[e];for(let f=0,m=d.length;f<m;f++){const g=d[f];g.onLoad&&g.onLoad(u)}}).catch(u=>{const d=Al[e];if(d===void 0)throw this.manager.itemError(e),u;delete Al[e];for(let f=0,m=d.length;f<m;f++){const g=d[f];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class b0e extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=this,o=new sl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{i(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},t,r)}parse(e){const i=[];for(let t=0;t<e.length;t++){const r=_p.parse(e[t]);i.push(r)}return i}}class x0e extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=this,o=[],l=new qu,c=new sl(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let u=0;function d(f){c.load(e[f],function(m){const g=s.parse(m,!0);o[f]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(l.minFilter=Yn),l.image=o,l.format=g.format,l.needsUpdate=!0,i&&i(l))},t,r)}if(Array.isArray(e))for(let f=0,m=e.length;f<m;++f)d(f);else c.load(e,function(f){const m=s.parse(f,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let y=0;y<g;y++){o[y]={mipmaps:[]};for(let x=0;x<m.mipmapCount;x++)o[y].mipmaps.push(m.mipmaps[y*m.mipmapCount+x]),o[y].format=m.format,o[y].width=m.width,o[y].height=m.height}l.image=o}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&&(l.minFilter=Yn),l.format=m.format,l.needsUpdate=!0,i&&i(l)},t,r);return l}}class av extends Ts{constructor(e){super(e)}load(e,i,t,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){i&&i(o),s.manager.itemEnd(e)},0),o;const l=tv("img");function c(){d(),Xl.add(e,this),i&&i(this),s.manager.itemEnd(e)}function u(f){d(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class O0e extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=new qv;s.colorSpace=vo;const o=new av(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(u){o.load(e[u],function(d){s.images[u]=d,l++,l===6&&(s.needsUpdate=!0,i&&i(s))},void 0,r)}for(let u=0;u<e.length;++u)c(u);return s}}class w0e extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=this,o=new fh,l=new sl(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let u;try{u=s.parse(c)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:bs,o.wrapT=u.wrapT!==void 0?u.wrapT:bs,o.magFilter=u.magFilter!==void 0?u.magFilter:Yn,o.minFilter=u.minFilter!==void 0?u.minFilter:Yn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Oa),u.mipmapCount===1&&(o.minFilter=Yn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,i&&i(o,u)},t,r),o}}class Uw extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=new Xn,o=new av(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,i!==void 0&&i(s)},t,r),s}}class Lh extends Ii{constructor(e,i=1){super(),this.isLight=!0,this.type="Light",this.color=new it(e),this.intensity=i}dispose(){}copy(e,i){return super.copy(e,i),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const i=super.toJSON(e);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}}class oz extends Lh{constructor(e,i,t){super(e,t),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ii.DEFAULT_UP),this.updateMatrix(),this.groundColor=new it(i)}copy(e,i){return super.copy(e,i),this.groundColor.copy(e.groundColor),this}}const IC=new pt,H6=new ne,G6=new ne;class fP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zv,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new bi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const i=this.camera,t=this.matrix;H6.setFromMatrixPosition(e.matrixWorld),i.position.copy(H6),G6.setFromMatrixPosition(e.target.matrixWorld),i.lookAt(G6),i.updateMatrixWorld(),IC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IC),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(IC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class _0e extends fP{constructor(){super(new en(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const i=this.camera,t=vp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||i.far;(t!==i.fov||r!==i.aspect||s!==i.far)&&(i.fov=t,i.aspect=r,i.far=s,i.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Fw extends Lh{constructor(e,i,t=0,r=Math.PI/3,s=0,o=2){super(e,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ii.DEFAULT_UP),this.updateMatrix(),this.target=new Ii,this.distance=t,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new _0e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Y6=new pt,Jm=new ne,DC=new ne;class S0e extends fP{constructor(){super(new en(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ze(4,2),this._viewportCount=6,this._viewports=[new bi(2,1,1,1),new bi(0,1,1,1),new bi(3,1,1,1),new bi(1,1,1,1),new bi(3,0,1,1),new bi(1,0,1,1)],this._cubeDirections=[new ne(1,0,0),new ne(-1,0,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,1,0),new ne(0,-1,0)],this._cubeUps=[new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,0,1),new ne(0,0,-1)]}updateMatrices(e,i=0){const t=this.camera,r=this.matrix,s=e.distance||t.far;s!==t.far&&(t.far=s,t.updateProjectionMatrix()),Jm.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jm),DC.copy(t.position),DC.add(this._cubeDirections[i]),t.up.copy(this._cubeUps[i]),t.lookAt(DC),t.updateMatrixWorld(),r.makeTranslation(-Jm.x,-Jm.y,-Jm.z),Y6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Y6)}}class uO extends Lh{constructor(e,i,t=0,r=2){super(e,i),this.isPointLight=!0,this.type="PointLight",this.distance=t,this.decay=r,this.shadow=new S0e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class C0e extends fP{constructor(){super(new Wo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pP extends Lh{constructor(e,i){super(e,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ii.DEFAULT_UP),this.updateMatrix(),this.target=new Ii,this.shadow=new C0e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mP extends Lh{constructor(e,i){super(e,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class az extends Lh{constructor(e,i,t=10,r=10){super(e,i),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=t,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const i=super.toJSON(e);return i.object.width=this.width,i.object.height=this.height,i}}class lz{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ne)}set(e){for(let i=0;i<9;i++)this.coefficients[i].copy(e[i]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,i){const t=e.x,r=e.y,s=e.z,o=this.coefficients;return i.copy(o[0]).multiplyScalar(.282095),i.addScaledVector(o[1],.488603*r),i.addScaledVector(o[2],.488603*s),i.addScaledVector(o[3],.488603*t),i.addScaledVector(o[4],1.092548*(t*r)),i.addScaledVector(o[5],1.092548*(r*s)),i.addScaledVector(o[6],.315392*(3*s*s-1)),i.addScaledVector(o[7],1.092548*(t*s)),i.addScaledVector(o[8],.546274*(t*t-r*r)),i}getIrradianceAt(e,i){const t=e.x,r=e.y,s=e.z,o=this.coefficients;return i.copy(o[0]).multiplyScalar(.886227),i.addScaledVector(o[1],2*.511664*r),i.addScaledVector(o[2],2*.511664*s),i.addScaledVector(o[3],2*.511664*t),i.addScaledVector(o[4],2*.429043*t*r),i.addScaledVector(o[5],2*.429043*r*s),i.addScaledVector(o[6],.743125*s*s-.247708),i.addScaledVector(o[7],2*.429043*t*s),i.addScaledVector(o[8],.429043*(t*t-r*r)),i}add(e){for(let i=0;i<9;i++)this.coefficients[i].add(e.coefficients[i]);return this}addScaledSH(e,i){for(let t=0;t<9;t++)this.coefficients[t].addScaledVector(e.coefficients[t],i);return this}scale(e){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(e);return this}lerp(e,i){for(let t=0;t<9;t++)this.coefficients[t].lerp(e.coefficients[t],i);return this}equals(e){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(e.coefficients[i]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,i=0){const t=this.coefficients;for(let r=0;r<9;r++)t[r].fromArray(e,i+r*3);return this}toArray(e=[],i=0){const t=this.coefficients;for(let r=0;r<9;r++)t[r].toArray(e,i+r*3);return e}static getBasisAt(e,i){const t=e.x,r=e.y,s=e.z;i[0]=.282095,i[1]=.488603*r,i[2]=.488603*s,i[3]=.488603*t,i[4]=1.092548*t*r,i[5]=1.092548*r*s,i[6]=.315392*(3*s*s-1),i[7]=1.092548*t*s,i[8]=.546274*(t*t-r*r)}}class cz extends Lh{constructor(e=new lz,i=1){super(void 0,i),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const i=super.toJSON(e);return i.object.sh=this.sh.toArray(),i}}class zw extends Ts{constructor(e){super(e),this.textures={}}load(e,i,t,r){const s=this,o=new sl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{i(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},t,r)}parse(e){const i=this.textures;function t(s){return i[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),i[s]}const r=zw.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new it().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=t(o.value);break;case"c":r.uniforms[s].value=new it().setHex(o.value);break;case"v2":r.uniforms[s].value=new ze().fromArray(o.value);break;case"v3":r.uniforms[s].value=new ne().fromArray(o.value);break;case"v4":r.uniforms[s].value=new bi().fromArray(o.value);break;case"m3":r.uniforms[s].value=new ui().fromArray(o.value);break;case"m4":r.uniforms[s].value=new pt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=t(e.map)),e.matcap!==void 0&&(r.matcap=t(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=t(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=t(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=t(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ze().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=t(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=t(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=t(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=t(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=t(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=t(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=t(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=t(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=t(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=t(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=t(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=t(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=t(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=t(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=t(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=t(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=t(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=t(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=t(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=t(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=t(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const i={ShadowMaterial:YF,SpriteMaterial:JE,RawShaderMaterial:T0,ShaderMaterial:ks,PointsMaterial:tP,MeshPhysicalMaterial:jF,MeshStandardMaterial:aP,MeshPhongMaterial:M0,MeshToonMaterial:qF,MeshNormalMaterial:ZF,MeshLambertMaterial:lP,MeshDepthMaterial:ZE,MeshDistanceMaterial:KE,MeshBasicMaterial:Ma,MeshMatcapMaterial:KF,LineDashedMaterial:JF,LineBasicMaterial:rs,Material:ns};return new i[e]}}class Sp{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let i="";for(let t=0,r=e.length;t<r;t++)i+=String.fromCharCode(e[t]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(e){const i=e.lastIndexOf("/");return i===-1?"./":e.slice(0,i+1)}static resolveURL(e,i){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(e)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:i+e)}}class hz extends ni{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class uz extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=this,o=new sl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{i(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},t,r)}parse(e){const i={},t={};function r(g,y){if(i[y]!==void 0)return i[y];const b=g.interleavedBuffers[y],S=s(g,b.buffer),_=Mf(b.type,S),O=new Kv(_,b.stride);return O.uuid=b.uuid,i[y]=O,O}function s(g,y){if(t[y]!==void 0)return t[y];const b=g.arrayBuffers[y],S=new Uint32Array(b).buffer;return t[y]=S,S}const o=e.isInstancedBufferGeometry?new hz:new ni,l=e.data.index;if(l!==void 0){const g=Mf(l.type,l.array);o.setIndex(new Ri(g,1))}const c=e.data.attributes;for(const g in c){const y=c[g];let x;if(y.isInterleavedBufferAttribute){const b=r(e.data,y.data);x=new nc(b,y.itemSize,y.offset,y.normalized)}else{const b=Mf(y.type,y.array),S=y.isInstancedBufferAttribute?xp:Ri;x=new S(b,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),y.usage!==void 0&&x.setUsage(y.usage),o.setAttribute(g,x)}const u=e.data.morphAttributes;if(u)for(const g in u){const y=u[g],x=[];for(let b=0,S=y.length;b<S;b++){const _=y[b];let O;if(_.isInterleavedBufferAttribute){const k=r(e.data,_.data);O=new nc(k,_.itemSize,_.offset,_.normalized)}else{const k=Mf(_.type,_.array);O=new Ri(k,_.itemSize,_.normalized)}_.name!==void 0&&(O.name=_.name),x.push(O)}o.morphAttributes[g]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let g=0,y=f.length;g!==y;++g){const x=f[g];o.addGroup(x.start,x.count,x.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new ne;m.center!==void 0&&g.fromArray(m.center),o.boundingSphere=new zr(g,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class k0e extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=this,o=this.path===""?Sp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new sl(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,i)},t,r)}async loadAsync(e,i){const t=this,r=this.path===""?Sp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new sl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,i),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await t.parseAsync(l)}parse(e,i){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){i!==void 0&&i(u)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),u=this.parseObject(e.object,s,c,l,t),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),i!==void 0){let f=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){f=!0;break}f===!1&&i(u)}return u}async parseAsync(e){const i=this.parseAnimations(e.animations),t=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,t),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,i),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),c}parseShapes(e){const i={};if(e!==void 0)for(let t=0,r=e.length;t<r;t++){const s=new Zu().fromJSON(e[t]);i[s.uuid]=s}return i}parseSkeletons(e,i){const t={},r={};if(i.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Jv().fromJSON(e[s],r);t[l.uuid]=l}return t}parseGeometries(e,i){const t={};if(e!==void 0){const r=new uz;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in Q6?l=Q6[c.type].fromJSON(c,i):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),t[c.uuid]=l}}return t}parseMaterials(e,i){const t={},r={};if(e!==void 0){const s=new zw;s.setTextures(i);for(let o=0,l=e.length;o<l;o++){const c=e[o];t[c.uuid]===void 0&&(t[c.uuid]=s.parse(c)),r[c.uuid]=t[c.uuid]}}return r}parseAnimations(e){const i={};if(e!==void 0)for(let t=0;t<e.length;t++){const r=e[t],s=_p.parse(r);i[s.uuid]=s}return i}parseImages(e,i){const t=this,r={};let s;function o(c){return t.manager.itemStart(c),s.load(c,function(){t.manager.itemEnd(c)},void 0,function(){t.manager.itemError(c),t.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const u=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return o(d)}else return c.data?{data:Mf(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new dP(i);s=new av(c),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const f=e[u],m=f.url;if(Array.isArray(m)){const g=[];for(let y=0,x=m.length;y<x;y++){const b=m[y],S=l(b);S!==null&&(S instanceof HTMLImageElement?g.push(S):g.push(new fh(S.data,S.width,S.height)))}r[f.uuid]=new Vu(g)}else{const g=l(f.url);r[f.uuid]=new Vu(g)}}}return r}async parseImagesAsync(e){const i=this,t={};let r;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:i.resourcePath+l;return await r.loadAsync(c)}else return o.data?{data:Mf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new av(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.url;if(Array.isArray(u)){const d=[];for(let f=0,m=u.length;f<m;f++){const g=u[f],y=await s(g);y!==null&&(y instanceof HTMLImageElement?d.push(y):d.push(new fh(y.data,y.width,y.height)))}t[c.uuid]=new Vu(d)}else{const d=await s(c.url);t[c.uuid]=new Vu(d)}}}return t}parseTextures(e,i){function t(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),i[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=i[l.image],u=c.data;let d;Array.isArray(u)?(d=new qv,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new fh:d=new Xn,u&&(d.needsUpdate=!0)),d.source=c,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=t(l.mapping,T0e)),l.channel!==void 0&&(d.channel=l.channel),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=t(l.wrap[0],j6),d.wrapT=t(l.wrap[1],j6)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.colorSpace!==void 0&&(d.colorSpace=l.colorSpace),l.minFilter!==void 0&&(d.minFilter=t(l.minFilter,q6)),l.magFilter!==void 0&&(d.magFilter=t(l.magFilter,q6)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(d.compareFunction=l.compareFunction),l.userData!==void 0&&(d.userData=l.userData),r[l.uuid]=d}return r}parseObject(e,i,t,r,s){let o;function l(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),i[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let y=0,x=m.length;y<x;y++){const b=m[y];t[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),g.push(t[b])}return g}return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),t[m]}}function u(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let d,f;switch(e.type){case"Scene":o=new bp,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new it(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Sw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new _w(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new en(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Wo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new mP(e.color,e.intensity);break;case"DirectionalLight":o=new pP(e.color,e.intensity);break;case"PointLight":o=new uO(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new az(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Fw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new oz(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new cz().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),f=c(e.material),o=new eP(d,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),f=c(e.material),o=new tn(d,f);break;case"InstancedMesh":d=l(e.geometry),f=c(e.material);const m=e.count,g=e.instanceMatrix,y=e.instanceColor;o=new DF(d,f,m),o.instanceMatrix=new xp(new Float32Array(g.array),16),y!==void 0&&(o.instanceColor=new xp(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":d=l(e.geometry),f=c(e.material),o=new NF(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const b=new Fr;b.min.fromArray(x.boxMin),b.max.fromArray(x.boxMax);const S=new zr;return S.radius=x.sphereRadius,S.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:b,sphereInitialized:x.sphereInitialized,sphere:S}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":o=new IF;break;case"Line":o=new rc(l(e.geometry),c(e.material));break;case"LineLoop":o=new $F(l(e.geometry),c(e.material));break;case"LineSegments":o=new ul(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new VF(l(e.geometry),c(e.material));break;case"Sprite":o=new RF(c(e.material));break;case"Group":o=new zl;break;case"Bone":o=new iv;break;default:o=new Ii}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)o.add(this.parseObject(m[g],i,t,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const y=m[g];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const y=m[g],x=o.getObjectByProperty("uuid",y.object);x!==void 0&&o.addLevel(x,y.distance,y.hysteresis)}}return o}bindSkeletons(e,i){Object.keys(i).length!==0&&e.traverse(function(t){if(t.isSkinnedMesh===!0&&t.skeleton!==void 0){const r=i[t.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(r,t.bindMatrix)}})}}const T0e={UVMapping:mw,CubeReflectionMapping:ic,CubeRefractionMapping:Oh,EquirectangularReflectionMapping:dp,EquirectangularRefractionMapping:Y0,CubeUVReflectionMapping:Fp},j6={RepeatWrapping:wh,ClampToEdgeWrapping:bs,MirroredRepeatWrapping:fp},q6={NearestFilter:fr,NearestMipmapNearestFilter:gw,NearestMipmapLinearFilter:Du,LinearFilter:Yn,LinearMipmapNearestFilter:Hf,LinearMipmapLinearFilter:Oa};class M0e extends Ts{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,i,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xl.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{i&&i(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){i&&i(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Xl.add(e,u),i&&i(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Xl.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Xl.add(e,c),s.manager.itemStart(e)}}let ub;class gP{static getContext(){return ub===void 0&&(ub=new(window.AudioContext||window.webkitAudioContext)),ub}static setContext(e){ub=e}}class E0e extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=this,o=new sl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const u=c.slice(0);gP.getContext().decodeAudioData(u,function(f){i(f)}).catch(l)}catch(u){l(u)}},t,r);function l(c){r?r(c):console.error(c),s.manager.itemError(e)}}}const Z6=new pt,K6=new pt,du=new pt;class P0e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new en,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new en,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const i=this._cache;if(i.focus!==e.focus||i.fov!==e.fov||i.aspect!==e.aspect*this.aspect||i.near!==e.near||i.far!==e.far||i.zoom!==e.zoom||i.eyeSep!==this.eyeSep){i.focus=e.focus,i.fov=e.fov,i.aspect=e.aspect*this.aspect,i.near=e.near,i.far=e.far,i.zoom=e.zoom,i.eyeSep=this.eyeSep,du.copy(e.projectionMatrix);const r=i.eyeSep/2,s=r*i.near/i.focus,o=i.near*Math.tan(ju*i.fov*.5)/i.zoom;let l,c;K6.elements[12]=-r,Z6.elements[12]=r,l=-o*i.aspect+s,c=o*i.aspect+s,du.elements[0]=2*i.near/(c-l),du.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(du),l=-o*i.aspect-s,c=o*i.aspect-s,du.elements[0]=2*i.near/(c-l),du.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(du)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(K6),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Z6)}}class vP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=J6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=J6();e=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=e}return e}}function J6(){return(typeof performance>"u"?Date:performance).now()}const fu=new ne,eD=new ir,A0e=new ne,pu=new ne;class R0e extends Ii{constructor(){super(),this.type="AudioListener",this.context=gP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new vP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const i=this.context.listener,t=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fu,eD,A0e),pu.set(0,0,-1).applyQuaternion(eD),i.positionX){const r=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(fu.x,r),i.positionY.linearRampToValueAtTime(fu.y,r),i.positionZ.linearRampToValueAtTime(fu.z,r),i.forwardX.linearRampToValueAtTime(pu.x,r),i.forwardY.linearRampToValueAtTime(pu.y,r),i.forwardZ.linearRampToValueAtTime(pu.z,r),i.upX.linearRampToValueAtTime(t.x,r),i.upY.linearRampToValueAtTime(t.y,r),i.upZ.linearRampToValueAtTime(t.z,r)}else i.setPosition(fu.x,fu.y,fu.z),i.setOrientation(pu.x,pu.y,pu.z,t.x,t.y,t.z)}}class dz extends Ii{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const mu=new ne,tD=new ir,I0e=new ne,gu=new ne;class D0e extends dz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,i,t){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=t,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(mu,tD,I0e),gu.set(0,0,1).applyQuaternion(tD);const i=this.panner;if(i.positionX){const t=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(mu.x,t),i.positionY.linearRampToValueAtTime(mu.y,t),i.positionZ.linearRampToValueAtTime(mu.z,t),i.orientationX.linearRampToValueAtTime(gu.x,t),i.orientationY.linearRampToValueAtTime(gu.y,t),i.orientationZ.linearRampToValueAtTime(gu.z,t)}else i.setPosition(mu.x,mu.y,mu.z),i.setOrientation(gu.x,gu.y,gu.z)}}class N0e{constructor(e,i=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const i=this.getFrequencyData();for(let t=0;t<i.length;t++)e+=i[t];return e/i.length}}class fz{constructor(e,i,t){this.binding=e,this.valueSize=t;let r,s,o;switch(i){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,i){const t=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)t[s+l]=t[l];o=i}else{o+=i;const l=i/o;this._mixBufferRegion(t,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const i=this.buffer,t=this.valueSize,r=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,r,0,e,t),this.cumulativeWeightAdditive+=e}apply(e){const i=this.valueSize,t=this.buffer,r=e*i+i,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=i*this._origIndex;this._mixBufferRegion(t,r,c,1-s,i)}o>0&&this._mixBufferRegionAdditive(t,r,this._addIndex*i,1,i);for(let c=i,u=i+i;c!==u;++c)if(t[c]!==t[c+i]){l.setValue(t,r);break}}saveOriginalState(){const e=this.binding,i=this.buffer,t=this.valueSize,r=t*this._origIndex;e.getValue(i,r);for(let s=t,o=r;s!==o;++s)i[s]=i[r+s%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,i=e+this.valueSize;for(let t=e;t<i;t++)this.buffer[t]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[i+t]=this.buffer[e+t]}_select(e,i,t,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[i+o]=e[t+o]}_slerp(e,i,t,r){ir.slerpFlat(e,i,e,i,e,t,r)}_slerpAdditive(e,i,t,r,s){const o=this._workIndex*s;ir.multiplyQuaternionsFlat(e,o,e,i,e,t),ir.slerpFlat(e,i,e,i,e,o,r)}_lerp(e,i,t,r,s){const o=1-r;for(let l=0;l!==s;++l){const c=i+l;e[c]=e[c]*o+e[t+l]*r}}_lerpAdditive(e,i,t,r,s){for(let o=0;o!==s;++o){const l=i+o;e[l]=e[l]+e[t+o]*r}}}const yP="\\[\\]\\.:\\/",$0e=new RegExp("["+yP+"]","g"),bP="[^"+yP+"]",V0e="[^"+yP.replace("\\.","")+"]",L0e=/((?:WC+[\/:])*)/.source.replace("WC",bP),B0e=/(WCOD+)?/.source.replace("WCOD",V0e),U0e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bP),F0e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bP),z0e=new RegExp("^"+L0e+B0e+U0e+F0e+"$"),X0e=["material","materials","bones","map"];class W0e{constructor(e,i,t){const r=t||gi.parseTrackName(i);this._targetGroup=e,this._bindings=e.subscribe_(i,r)}getValue(e,i){this.bind();const t=this._targetGroup.nCachedObjects_,r=this._bindings[t];r!==void 0&&r.getValue(e,i)}setValue(e,i){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].setValue(e,i)}bind(){const e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,t=e.length;i!==t;++i)e[i].bind()}unbind(){const e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,t=e.length;i!==t;++i)e[i].unbind()}}class gi{constructor(e,i,t){this.path=i,this.parsedPath=t||gi.parseTrackName(i),this.node=gi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,t){return e&&e.isAnimationObjectGroup?new gi.Composite(e,i,t):new gi(e,i,t)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($0e,"")}static parseTrackName(e){const i=z0e.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const t={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},r=t.nodeName&&t.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=t.nodeName.substring(r+1);X0e.indexOf(s)!==-1&&(t.nodeName=t.nodeName.substring(0,r),t.objectName=s)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){const t=e.skeleton.getBoneByName(i);if(t!==void 0)return t}if(e.children){const t=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===i||l.uuid===i)return l;const c=t(l.children);if(c)return c}return null},r=t(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)e[i++]=t[r]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)t[r]=e[i++]}_setValue_array_setNeedsUpdate(e,i){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)t[r]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){const t=this.resolvedProperty;for(let r=0,s=t.length;r!==s;++r)t[r]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node;const i=this.parsedPath,t=i.objectName,r=i.propertyName;let s=i.propertyIndex;if(e||(e=gi.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(t){let u=i.objectIndex;switch(t){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[t]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}gi.Composite=W0e;gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};gi.prototype.GetterByBindingType=[gi.prototype._getValue_direct,gi.prototype._getValue_array,gi.prototype._getValue_arrayElement,gi.prototype._getValue_toArray];gi.prototype.SetterByBindingTypeAndVersioning=[[gi.prototype._setValue_direct,gi.prototype._setValue_direct_setNeedsUpdate,gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_array,gi.prototype._setValue_array_setNeedsUpdate,gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_arrayElement,gi.prototype._setValue_arrayElement_setNeedsUpdate,gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_fromArray,gi.prototype._setValue_fromArray_setNeedsUpdate,gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Q0e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ko(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){const e=this._objects,i=this._indicesByUUID,t=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,u=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const m=arguments[d],g=m.uuid;let y=i[g];if(y===void 0){y=c++,i[g]=y,e.push(m);for(let x=0,b=o;x!==b;++x)s[x].push(new gi(m,t[x],r[x]))}else if(y<u){l=e[y];const x=--u,b=e[x];i[b.uuid]=y,e[y]=b,i[g]=x,e[x]=m;for(let S=0,_=o;S!==_;++S){const O=s[S],k=O[x];let M=O[y];O[y]=k,M===void 0&&(M=new gi(m,t[S],r[S])),O[x]=M}}else e[y]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,i=this._indicesByUUID,t=this._bindings,r=t.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,d=i[u];if(d!==void 0&&d>=s){const f=s++,m=e[f];i[m.uuid]=d,e[d]=m,i[u]=f,e[f]=c;for(let g=0,y=r;g!==y;++g){const x=t[g],b=x[f],S=x[d];x[d]=b,x[f]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,i=this._indicesByUUID,t=this._bindings,r=t.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const u=arguments[l],d=u.uuid,f=i[d];if(f!==void 0)if(delete i[d],f<s){const m=--s,g=e[m],y=--o,x=e[y];i[g.uuid]=f,e[f]=g,i[x.uuid]=m,e[m]=x,e.pop();for(let b=0,S=r;b!==S;++b){const _=t[b],O=_[m],k=_[y];_[f]=O,_[m]=k,_.pop()}}else{const m=--o,g=e[m];m>0&&(i[g.uuid]=f),e[f]=g,e.pop();for(let y=0,x=r;y!==x;++y){const b=t[y];b[f]=b[m],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,i){const t=this._bindingsIndicesByPath;let r=t[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,c=this._objects,u=c.length,d=this.nCachedObjects_,f=new Array(u);r=s.length,t[e]=r,o.push(e),l.push(i),s.push(f);for(let m=d,g=c.length;m!==g;++m){const y=c[m];f[m]=new gi(y,e,i)}return f}unsubscribe_(e){const i=this._bindingsIndicesByPath,t=i[e];if(t!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],u=e[l];i[u]=t,o[t]=c,o.pop(),s[t]=s[l],s.pop(),r[t]=r[l],r.pop()}}}class pz{constructor(e,i,t=null,r=i.blendMode){this._mixer=e,this._clip=i,this._localRoot=t,this.blendMode=r;const s=i.tracks,o=s.length,l=new Array(o),c={endingStart:Nu,endingEnd:Nu};for(let u=0;u!==o;++u){const d=s[u].createInterpolant(null);l[u]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iF,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,i){return this.loop=e,this.repetitions=i,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,i,t){if(e.fadeOut(i),this.fadeIn(i),t){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,i),this.warp(l,1,i)}return this}crossFadeTo(e,i,t){return e.crossFadeFrom(this,i,t)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,i,t){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,u=l.sampleValues;return c[0]=s,c[1]=s+t,u[0]=e/o,u[1]=i/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,i,t,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*t;c<0||t===0?i=0:(this._startTime=null,i=t*c)}i*=this._updateTimeScale(e);const o=this._updateTime(i),l=this._updateWeight(e);if(l>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case WE:for(let d=0,f=c.length;d!==f;++d)c[d].evaluate(o),u[d].accumulateAdditive(l);break;case vw:default:for(let d=0,f=c.length;d!==f;++d)c[d].evaluate(o),u[d].accumulate(r,l)}}}_updateWeight(e){let i=0;if(this.enabled){i=this.weight;const t=this._weightInterpolant;if(t!==null){const r=t.evaluate(e)[0];i*=r,e>t.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(e){let i=0;if(!this.paused){i=this.timeScale;const t=this._timeScaleInterpolant;if(t!==null){const r=t.evaluate(e)[0];i*=r,e>t.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(e){const i=this._clip.duration,t=this.loop;let r=this.time+e,s=this._loopCount;const o=t===nF;if(e===0)return s===-1?r:o&&(s&1)===1?i-r:r;if(t===tF){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=i)r=i;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=i||r<0){const l=Math.floor(r/i);r-=i*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?i:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return i-r}return r}_setEndings(e,i,t){const r=this._interpolantSettings;t?(r.endingStart=$u,r.endingEnd=$u):(e?r.endingStart=this.zeroSlopeAtStart?$u:Nu:r.endingStart=j0,i?r.endingEnd=this.zeroSlopeAtEnd?$u:Nu:r.endingEnd=j0)}_scheduleFading(e,i,t){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=i,l[1]=s+e,c[1]=t,this}}const H0e=new Float32Array(1);class G0e extends hl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,i){const t=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,c=t.uuid,u=this._bindingsByRootAndName;let d=u[c];d===void 0&&(d={},u[c]=d);for(let f=0;f!==s;++f){const m=r[f],g=m.name;let y=d[g];if(y!==void 0)++y.referenceCount,o[f]=y;else{if(y=o[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,c,g));continue}const x=i&&i._propertyBindings[f].binding.parsedPath;y=new fz(gi.create(t,g,x),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,c,g),o[f]=y}l[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const t=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,t)}const i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){const s=i[t];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){const s=i[t];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const i=e._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(e,i,t){const r=this._actions,s=this._actionsByClip;let o=s[i];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[i]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[t]=e}_removeInactiveAction(e){const i=this._actions,t=i[i.length-1],r=e._cacheIndex;t._cacheIndex=r,i[r]=t,i.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,u=c[c.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,c[d]=u,c.pop(),e._byClipCacheIndex=null;const f=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete f[m],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){const s=i[t];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const i=this._actions,t=e._cacheIndex,r=this._nActiveActions++,s=i[r];e._cacheIndex=r,i[r]=e,s._cacheIndex=t,i[t]=s}_takeBackAction(e){const i=this._actions,t=e._cacheIndex,r=--this._nActiveActions,s=i[r];e._cacheIndex=r,i[r]=e,s._cacheIndex=t,i[t]=s}_addInactiveBinding(e,i,t){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[i];o===void 0&&(o={},r[i]=o),o[t]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const i=this._bindings,t=e.binding,r=t.rootNode.uuid,s=t.path,o=this._bindingsByRootAndName,l=o[r],c=i[i.length-1],u=e._cacheIndex;c._cacheIndex=u,i[u]=c,i.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const i=this._bindings,t=e._cacheIndex,r=this._nActiveBindings++,s=i[r];e._cacheIndex=r,i[r]=e,s._cacheIndex=t,i[t]=s}_takeBackBinding(e){const i=this._bindings,t=e._cacheIndex,r=--this._nActiveBindings,s=i[r];e._cacheIndex=r,i[r]=e,s._cacheIndex=t,i[t]=s}_lendControlInterpolant(){const e=this._controlInterpolants,i=this._nActiveControlInterpolants++;let t=e[i];return t===void 0&&(t=new hP(new Float32Array(2),new Float32Array(2),1,H0e),t.__cacheIndex=i,e[i]=t),t}_takeBackControlInterpolant(e){const i=this._controlInterpolants,t=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=i[r];e.__cacheIndex=r,i[r]=e,s.__cacheIndex=t,i[t]=s}clipAction(e,i,t){const r=i||this._root,s=r.uuid;let o=typeof e=="string"?_p.findByName(r,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let u=null;if(t===void 0&&(o!==null?t=o.blendMode:t=vw),c!==void 0){const f=c.actionByRoot[s];if(f!==void 0&&f.blendMode===t)return f;u=c.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const d=new pz(this,o,i,t);return this._bindAction(d,u),this._addInactiveAction(d,l,s),d}existingAction(e,i){const t=i||this._root,r=t.uuid,s=typeof e=="string"?_p.findByName(t,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,i=this._nActiveActions;for(let t=i-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const i=this._actions,t=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==t;++u)i[u]._update(r,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)l[u].apply(o);return this}setTime(e){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const i=this._actions,t=e.uuid,r=this._actionsByClip,s=r[t];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const u=o[l];this._deactivateAction(u);const d=u._cacheIndex,f=i[i.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=d,i[d]=f,i.pop(),this._removeInactiveBindingsForAction(u)}delete r[t]}}uncacheRoot(e){const i=e.uuid,t=this._actionsByClip;for(const o in t){const l=t[o].actionByRoot,c=l[i];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[i];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,i){const t=this.existingAction(e,i);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}}class Xw{constructor(e){this.value=e}clone(){return new Xw(this.value.clone===void 0?this.value:this.value.clone())}}let Y0e=0;class j0e extends hl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Y0e++}),this.name="",this.usage=J0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const i=this.uniforms.indexOf(e);return i!==-1&&this.uniforms.splice(i,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const i=e.uniforms;this.uniforms.length=0;for(let t=0,r=i.length;t<r;t++){const s=Array.isArray(i[t])?i[t]:[i[t]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class q0e extends Kv{constructor(e,i,t=1){super(e,i),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=t}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const i=super.clone(e);return i.meshPerAttribute=this.meshPerAttribute,i}toJSON(e){const i=super.toJSON(e);return i.isInstancedInterleavedBuffer=!0,i.meshPerAttribute=this.meshPerAttribute,i}}class Z0e{constructor(e,i,t,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=i,this.itemSize=t,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,i){return this.type=e,this.elementSize=i,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const iD=new pt;class xP{constructor(e,i,t=0,r=1/0){this.ray=new bd(e,i),this.near=t,this.far=r,this.camera=null,this.layers=new xw,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,i){this.ray.set(e,i)}setFromCamera(e,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}setFromXRController(e){return iD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(iD),this}intersectObject(e,i=!0,t=[]){return OT(e,this,t,i),t.sort(nD),t}intersectObjects(e,i=!0,t=[]){for(let r=0,s=e.length;r<s;r++)OT(e[r],this,t,i);return t.sort(nD),t}}function nD(n,e){return n.distance-e.distance}function OT(n,e,i,t){if(n.layers.test(e.layers)&&n.raycast(e,i),t===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)OT(r[s],e,i,!0)}}class wT{constructor(e=1,i=0,t=0){return this.radius=e,this.phi=i,this.theta=t,this}set(e,i,t){return this.radius=e,this.phi=i,this.theta=t,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,t){return this.radius=Math.sqrt(e*e+i*i+t*t),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,t),this.phi=Math.acos(Un(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class K0e{constructor(e=1,i=0,t=0){return this.radius=e,this.theta=i,this.y=t,this}set(e,i,t){return this.radius=e,this.theta=i,this.y=t,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,t){return this.radius=Math.sqrt(e*e+t*t),this.theta=Math.atan2(e,t),this.y=i,this}clone(){return new this.constructor().copy(this)}}const rD=new ze;class mz{constructor(e=new ze(1/0,1/0),i=new ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromPoints(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){const t=rD.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sD=new ne,db=new ne;class gz{constructor(e=new ne,i=new ne){this.start=e,this.end=i}set(e,i){return this.start.copy(e),this.end.copy(i),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,i){return this.delta(i).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,i){sD.subVectors(e,this.start),db.subVectors(this.end,this.start);const t=db.dot(db);let s=db.dot(sD)/t;return i&&(s=Un(s,0,1)),s}closestPointToPoint(e,i,t){const r=this.closestPointToPointParameter(e,i);return this.delta(t).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const oD=new ne;class J0e extends Ii{constructor(e,i){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=i,this.type="SpotLightHelper";const t=new ni,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const u=o/c*Math.PI*2,d=l/c*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}t.setAttribute("position",new Ct(r,3));const s=new rs({fog:!1,toneMapped:!1});this.cone=new ul(t,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),oD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(oD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Xc=new ne,fb=new pt,NC=new pt;class eve extends ul{constructor(e){const i=vz(e),t=new ni,r=[],s=[],o=new it(0,0,1),l=new it(0,1,0);for(let u=0;u<i.length;u++){const d=i[u];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}t.setAttribute("position",new Ct(r,3)),t.setAttribute("color",new Ct(s,3));const c=new rs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(t,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=i,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const i=this.bones,t=this.geometry,r=t.getAttribute("position");NC.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<i.length;s++){const l=i[s];l.parent&&l.parent.isBone&&(fb.multiplyMatrices(NC,l.matrixWorld),Xc.setFromMatrixPosition(fb),r.setXYZ(o,Xc.x,Xc.y,Xc.z),fb.multiplyMatrices(NC,l.parent.matrixWorld),Xc.setFromMatrixPosition(fb),r.setXYZ(o+1,Xc.x,Xc.y,Xc.z),o+=2)}t.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function vz(n){const e=[];n.isBone===!0&&e.push(n);for(let i=0;i<n.children.length;i++)e.push.apply(e,vz(n.children[i]));return e}class tve extends tn{constructor(e,i,t){const r=new iy(i,4,2),s=new Ma({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=t,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ive=new ne,aD=new it,lD=new it;class nve extends Ii{constructor(e,i,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="HemisphereLightHelper";const r=new ty(i);r.rotateY(Math.PI*.5),this.material=new Ma({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Ri(o,3)),this.add(new tn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const i=e.geometry.getAttribute("color");aD.copy(this.light.color),lD.copy(this.light.groundColor);for(let t=0,r=i.count;t<r;t++){const s=t<r/2?aD:lD;i.setXYZ(t,s.r,s.g,s.b)}i.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(ive.setFromMatrixPosition(this.light.matrixWorld).negate())}}class rve extends ul{constructor(e=10,i=10,t=4473924,r=8947848){t=new it(t),r=new it(r);const s=i/2,o=e/i,l=e/2,c=[],u=[];for(let m=0,g=0,y=-l;m<=i;m++,y+=o){c.push(-l,0,y,l,0,y),c.push(y,0,-l,y,0,l);const x=m===s?t:r;x.toArray(u,g),g+=3,x.toArray(u,g),g+=3,x.toArray(u,g),g+=3,x.toArray(u,g),g+=3}const d=new ni;d.setAttribute("position",new Ct(c,3)),d.setAttribute("color",new Ct(u,3));const f=new rs({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class sve extends ul{constructor(e=10,i=16,t=8,r=64,s=4473924,o=8947848){s=new it(s),o=new it(o);const l=[],c=[];if(i>1)for(let f=0;f<i;f++){const m=f/i*(Math.PI*2),g=Math.sin(m)*e,y=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,y);const x=f&1?s:o;c.push(x.r,x.g,x.b),c.push(x.r,x.g,x.b)}for(let f=0;f<t;f++){const m=f&1?s:o,g=e-e/t*f;for(let y=0;y<r;y++){let x=y/r*(Math.PI*2),b=Math.sin(x)*g,S=Math.cos(x)*g;l.push(b,0,S),c.push(m.r,m.g,m.b),x=(y+1)/r*(Math.PI*2),b=Math.sin(x)*g,S=Math.cos(x)*g,l.push(b,0,S),c.push(m.r,m.g,m.b)}}const u=new ni;u.setAttribute("position",new Ct(l,3)),u.setAttribute("color",new Ct(c,3));const d=new rs({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cD=new ne,pb=new ne,hD=new ne;class ove extends Ii{constructor(e,i,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="DirectionalLightHelper",i===void 0&&(i=1);let r=new ni;r.setAttribute("position",new Ct([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));const s=new rs({fog:!1,toneMapped:!1});this.lightPlane=new rc(r,s),this.add(this.lightPlane),r=new ni,r.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new rc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cD.setFromMatrixPosition(this.light.matrixWorld),pb.setFromMatrixPosition(this.light.target.matrixWorld),hD.subVectors(pb,cD),this.lightPlane.lookAt(pb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(pb),this.targetLine.scale.z=hD.length()}}const mb=new ne,Vn=new jv;class ave extends ul{constructor(e){const i=new ni,t=new rs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(y,x){c(y),c(x)}function c(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}i.setAttribute("position",new Ct(r,3)),i.setAttribute("color",new Ct(s,3)),super(i,t),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new it(16755200),d=new it(16711680),f=new it(43775),m=new it(16777215),g=new it(3355443);this.setColors(u,d,f,m,g)}setColors(e,i,t,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,i.r,i.g,i.b),l.setXYZ(25,i.r,i.g,i.b),l.setXYZ(26,i.r,i.g,i.b),l.setXYZ(27,i.r,i.g,i.b),l.setXYZ(28,i.r,i.g,i.b),l.setXYZ(29,i.r,i.g,i.b),l.setXYZ(30,i.r,i.g,i.b),l.setXYZ(31,i.r,i.g,i.b),l.setXYZ(32,t.r,t.g,t.b),l.setXYZ(33,t.r,t.g,t.b),l.setXYZ(34,t.r,t.g,t.b),l.setXYZ(35,t.r,t.g,t.b),l.setXYZ(36,t.r,t.g,t.b),l.setXYZ(37,t.r,t.g,t.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,i=this.pointMap,t=1,r=1;Vn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qn("c",i,e,Vn,0,0,-1),Qn("t",i,e,Vn,0,0,1),Qn("n1",i,e,Vn,-t,-r,-1),Qn("n2",i,e,Vn,t,-r,-1),Qn("n3",i,e,Vn,-t,r,-1),Qn("n4",i,e,Vn,t,r,-1),Qn("f1",i,e,Vn,-t,-r,1),Qn("f2",i,e,Vn,t,-r,1),Qn("f3",i,e,Vn,-t,r,1),Qn("f4",i,e,Vn,t,r,1),Qn("u1",i,e,Vn,t*.7,r*1.1,-1),Qn("u2",i,e,Vn,-t*.7,r*1.1,-1),Qn("u3",i,e,Vn,0,r*2,-1),Qn("cf1",i,e,Vn,-t,0,1),Qn("cf2",i,e,Vn,t,0,1),Qn("cf3",i,e,Vn,0,-r,1),Qn("cf4",i,e,Vn,0,r,1),Qn("cn1",i,e,Vn,-t,0,-1),Qn("cn2",i,e,Vn,t,0,-1),Qn("cn3",i,e,Vn,0,-r,-1),Qn("cn4",i,e,Vn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qn(n,e,i,t,r,s,o){mb.set(r,s,o).unproject(t);const l=e[n];if(l!==void 0){const c=i.getAttribute("position");for(let u=0,d=l.length;u<d;u++)c.setXYZ(l[u],mb.x,mb.y,mb.z)}}const gb=new Fr;class lve extends ul{constructor(e,i=16776960){const t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new ni;s.setIndex(new Ri(t,1)),s.setAttribute("position",new Ri(r,3)),super(s,new rs({color:i,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&gb.setFromObject(this.object),gb.isEmpty())return;const i=gb.min,t=gb.max,r=this.geometry.attributes.position,s=r.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=i.x,s[4]=t.y,s[5]=t.z,s[6]=i.x,s[7]=i.y,s[8]=t.z,s[9]=t.x,s[10]=i.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=i.z,s[15]=i.x,s[16]=t.y,s[17]=i.z,s[18]=i.x,s[19]=i.y,s[20]=i.z,s[21]=t.x,s[22]=i.y,s[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,i){return super.copy(e,i),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cve extends ul{constructor(e,i=16776960){const t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ni;s.setIndex(new Ri(t,1)),s.setAttribute("position",new Ct(r,3)),super(s,new rs({color:i,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class hve extends rc{constructor(e,i=1,t=16776960){const r=t,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new ni;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new rs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=i;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new ni;c.setAttribute("position",new Ct(l,3)),c.computeBoundingSphere(),this.add(new tn(c,new Ma({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const uD=new ne;let vb,$C;class uve extends Ii{constructor(e=new ne(0,0,1),i=new ne(0,0,0),t=1,r=16776960,s=t*.2,o=s*.2){super(),this.type="ArrowHelper",vb===void 0&&(vb=new ni,vb.setAttribute("position",new Ct([0,0,0,0,1,0],3)),$C=new Qp(0,.5,1,5,1),$C.translate(0,-.5,0)),this.position.copy(i),this.line=new rc(vb,new rs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new tn($C,new Ma({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(t,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uD.set(e.z,0,-e.x).normalize();const i=Math.acos(e.y);this.quaternion.setFromAxisAngle(uD,i)}}setLength(e,i=e*.2,t=i*.2){this.line.scale.set(1,Math.max(1e-4,e-i),1),this.line.updateMatrix(),this.cone.scale.set(t,i,t),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class dve extends ul{constructor(e=1){const i=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],t=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ni;r.setAttribute("position",new Ct(i,3)),r.setAttribute("color",new Ct(t,3));const s=new rs({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,i,t){const r=new it,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(i),r.toArray(s,6),r.toArray(s,9),r.set(t),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}let yz=class{constructor(){this.type="ShapePath",this.color=new it,this.subPaths=[],this.currentPath=null}moveTo(e,i){return this.currentPath=new nv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,i),this}lineTo(e,i){return this.currentPath.lineTo(e,i),this}quadraticCurveTo(e,i,t,r){return this.currentPath.quadraticCurveTo(e,i,t,r),this}bezierCurveTo(e,i,t,r,s,o){return this.currentPath.bezierCurveTo(e,i,t,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function i(S){const _=[];for(let O=0,k=S.length;O<k;O++){const M=S[O],E=new Zu;E.curves=M.curves,_.push(E)}return _}function t(S,_){const O=_.length;let k=!1;for(let M=O-1,E=0;E<O;M=E++){let R=_[M],P=_[E],I=P.x-R.x,T=P.y-R.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(R=_[E],I=-I,P=_[M],T=-T),S.y<R.y||S.y>P.y)continue;if(S.y===R.y){if(S.x===R.x)return!0}else{const N=T*(S.x-R.x)-I*(S.y-R.y);if(N===0)return!0;if(N<0)continue;k=!k}}else{if(S.y!==R.y)continue;if(P.x<=S.x&&S.x<=R.x||R.x<=S.x&&S.x<=P.x)return!0}}return k}const r=il.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const u=[];if(s.length===1)return l=s[0],c=new Zu,c.curves=l.curves,u.push(c),u;let d=!r(s[0].getPoints());d=e?!d:d;const f=[],m=[];let g=[],y=0,x;m[y]=void 0,g[y]=[];for(let S=0,_=s.length;S<_;S++)l=s[S],x=l.getPoints(),o=r(x),o=e?!o:o,o?(!d&&m[y]&&y++,m[y]={s:new Zu,p:x},m[y].s.curves=l.curves,d&&y++,g[y]=[]):g[y].push({h:l,p:x[0]});if(!m[0])return i(s);if(m.length>1){let S=!1,_=0;for(let O=0,k=m.length;O<k;O++)f[O]=[];for(let O=0,k=m.length;O<k;O++){const M=g[O];for(let E=0;E<M.length;E++){const R=M[E];let P=!0;for(let I=0;I<m.length;I++)t(R.p,m[I].p)&&(O!==I&&_++,P?(P=!1,f[I].push(R)):S=!0);P&&f[O].push(R)}}_>0&&S===!1&&(g=f)}let b;for(let S=0,_=m.length;S<_;S++){c=m[S].s,u.push(c),b=g[S];for(let O=0,k=b.length;O<k;O++)c.holes.push(b[O].h)}return u}};class fve extends Zo{constructor(e=1,i=1,t=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,i,{...r,count:t}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Up}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Up);const pve=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:NE,AddEquation:ih,AddOperation:LU,AdditiveAnimationBlendMode:WE,AdditiveBlending:sO,AgXToneMapping:XU,AlphaFormat:jU,AlwaysCompare:fF,AlwaysDepth:AU,AlwaysStencilFunc:dT,AmbientLight:mP,AnimationAction:pz,AnimationClip:_p,AnimationLoader:b0e,AnimationMixer:G0e,AnimationObjectGroup:Q0e,AnimationUtils:m0e,ArcCurve:LF,ArrayCamera:PF,ArrowHelper:uve,AttachedBindMode:Bk,Audio:dz,AudioAnalyser:N0e,AudioContext:gP,AudioListener:R0e,AudioLoader:E0e,AxesHelper:dve,BackSide:ts,BasicDepthPacking:rF,BasicShadowMap:Mhe,BatchedMesh:NF,Bone:iv,BooleanKeyframeTrack:xd,Box2:mz,Box3:Fr,Box3Helper:cve,BoxGeometry:Nh,BoxHelper:lve,BufferAttribute:Ri,BufferGeometry:ni,BufferGeometryLoader:uz,ByteType:HU,Cache:Xl,Camera:jv,CameraHelper:ave,CanvasTexture:Bge,CapsuleGeometry:Tw,CatmullRomCurve3:BF,CineonToneMapping:FU,CircleGeometry:Mw,ClampToEdgeWrapping:bs,Clock:vP,Color:it,ColorKeyframeTrack:uP,ColorManagement:Ki,CompressedArrayTexture:Vge,CompressedCubeTexture:Lge,CompressedTexture:qu,CompressedTextureLoader:x0e,ConeGeometry:Ew,ConstantAlphaFactor:MU,ConstantColorFactor:kU,CubeCamera:OF,CubeReflectionMapping:ic,CubeRefractionMapping:Oh,CubeTexture:qv,CubeTextureLoader:O0e,CubeUVReflectionMapping:Fp,CubicBezierCurve:nP,CubicBezierCurve3:UF,CubicInterpolant:iz,CullFaceBack:$k,CullFaceFront:uU,CullFaceFrontBack:The,CullFaceNone:hU,Curve:ea,CurvePath:zF,CustomBlending:dU,CustomToneMapping:zU,CylinderGeometry:Qp,Cylindrical:K0e,Data3DTexture:GE,DataArrayTexture:bw,DataTexture:fh,DataTextureLoader:w0e,DataUtils:$ue,DecrementStencilOp:Bhe,DecrementWrapStencilOp:Fhe,DefaultLoadingManager:sz,DepthFormat:Yu,DepthStencilFormat:pp,DepthTexture:qE,DetachedBindMode:QU,DirectionalLight:pP,DirectionalLightHelper:ove,DiscreteInterpolant:nz,DisplayP3ColorSpace:yw,DodecahedronGeometry:Pw,DoubleSide:Xs,DstAlphaFactor:OU,DstColorFactor:_U,DynamicCopyUsage:iue,DynamicDrawUsage:qhe,DynamicReadUsage:Jhe,EdgesGeometry:XF,EllipseCurve:Cw,EqualCompare:cF,EqualDepth:IU,EqualStencilFunc:Qhe,EquirectangularReflectionMapping:dp,EquirectangularRefractionMapping:Y0,Euler:pr,EventDispatcher:hl,ExtrudeGeometry:Rw,FileLoader:sl,Float16BufferAttribute:zue,Float32BufferAttribute:Ct,FloatType:Xo,Fog:Sw,FogExp2:_w,FramebufferTexture:vT,FrontSide:tc,Frustum:Zv,GLBufferAttribute:Z0e,GLSL1:rue,GLSL3:fT,GreaterCompare:hF,GreaterDepth:NU,GreaterEqualCompare:dF,GreaterEqualDepth:DU,GreaterEqualStencilFunc:jhe,GreaterStencilFunc:Ghe,GridHelper:rve,Group:zl,HalfFloatType:zp,HemisphereLight:oz,HemisphereLightHelper:nve,IcosahedronGeometry:Iw,ImageBitmapLoader:M0e,ImageLoader:av,ImageUtils:vF,IncrementStencilOp:Lhe,IncrementWrapStencilOp:Uhe,InstancedBufferAttribute:xp,InstancedBufferGeometry:hz,InstancedInterleavedBuffer:q0e,InstancedMesh:DF,Int16BufferAttribute:Uue,Int32BufferAttribute:Fue,Int8BufferAttribute:Vue,IntType:VE,InterleavedBuffer:Kv,InterleavedBufferAttribute:nc,Interpolant:ny,InterpolateDiscrete:mp,InterpolateLinear:gp,InterpolateSmooth:wx,InvertStencilOp:zhe,KeepStencilOp:_u,KeyframeTrack:Ea,LOD:IF,LatheGeometry:ey,Layers:xw,LessCompare:lF,LessDepth:RU,LessEqualCompare:QE,LessEqualDepth:G0,LessEqualStencilFunc:Hhe,LessStencilFunc:Whe,Light:Lh,LightProbe:cz,Line:rc,Line3:gz,LineBasicMaterial:rs,LineCurve:rP,LineCurve3:FF,LineDashedMaterial:JF,LineLoop:$F,LineSegments:ul,LinearDisplayP3ColorSpace:Gv,LinearFilter:Yn,LinearInterpolant:hP,LinearMipMapLinearFilter:Rhe,LinearMipMapNearestFilter:Ahe,LinearMipmapLinearFilter:Oa,LinearMipmapNearestFilter:Hf,LinearSRGBColorSpace:uc,LinearToneMapping:BU,LinearTransfer:q0,Loader:Ts,LoaderUtils:Sp,LoadingManager:dP,LoopOnce:tF,LoopPingPong:nF,LoopRepeat:iF,LuminanceAlphaFormat:KU,LuminanceFormat:ZU,MOUSE:wu,Material:ns,MaterialLoader:zw,MathUtils:Jr,Matrix3:ui,Matrix4:pt,MaxEquation:gU,Mesh:tn,MeshBasicMaterial:Ma,MeshDepthMaterial:ZE,MeshDistanceMaterial:KE,MeshLambertMaterial:lP,MeshMatcapMaterial:KF,MeshNormalMaterial:ZF,MeshPhongMaterial:M0,MeshPhysicalMaterial:jF,MeshStandardMaterial:aP,MeshToonMaterial:qF,MinEquation:mU,MirroredRepeatWrapping:fp,MixOperation:VU,MultiplyBlending:Lk,MultiplyOperation:Hv,NearestFilter:fr,NearestMipMapLinearFilter:Phe,NearestMipMapNearestFilter:Ehe,NearestMipmapLinearFilter:Du,NearestMipmapNearestFilter:gw,NeutralToneMapping:WU,NeverCompare:aF,NeverDepth:PU,NeverStencilFunc:Xhe,NoBlending:Yl,NoColorSpace:Ul,NoToneMapping:jl,NormalAnimationBlendMode:vw,NormalBlending:Gu,NotEqualCompare:uF,NotEqualDepth:$U,NotEqualStencilFunc:Yhe,NumberKeyframeTrack:Op,Object3D:Ii,ObjectLoader:k0e,ObjectSpaceNormalMap:oF,OctahedronGeometry:ty,OneFactor:yU,OneMinusConstantAlphaFactor:EU,OneMinusConstantColorFactor:TU,OneMinusDstAlphaFactor:wU,OneMinusDstColorFactor:SU,OneMinusSrcAlphaFactor:aO,OneMinusSrcColorFactor:xU,OrthographicCamera:Wo,P3Primaries:K0,PCFShadowMap:IE,PCFSoftShadowMap:DE,PMREMGenerator:pT,Path:nv,PerspectiveCamera:en,Plane:ya,PlaneGeometry:$h,PlaneHelper:hve,PointLight:uO,PointLightHelper:tve,Points:VF,PointsMaterial:tP,PolarGridHelper:sve,PolyhedronGeometry:Vh,PositionalAudio:D0e,PropertyBinding:gi,PropertyMixer:fz,QuadraticBezierCurve:kw,QuadraticBezierCurve3:sP,Quaternion:ir,QuaternionKeyframeTrack:Od,QuaternionLinearInterpolant:rz,RED_GREEN_RGTC2_Format:hT,RED_RGTC1_Format:eF,REVISION:Up,RGBADepthPacking:sF,RGBAFormat:Gs,RGBAIntegerFormat:XE,RGBA_ASTC_10x10_Format:rT,RGBA_ASTC_10x5_Format:tT,RGBA_ASTC_10x6_Format:iT,RGBA_ASTC_10x8_Format:nT,RGBA_ASTC_12x10_Format:sT,RGBA_ASTC_12x12_Format:oT,RGBA_ASTC_4x4_Format:Gk,RGBA_ASTC_5x4_Format:Yk,RGBA_ASTC_5x5_Format:jk,RGBA_ASTC_6x5_Format:qk,RGBA_ASTC_6x6_Format:Zk,RGBA_ASTC_8x5_Format:Kk,RGBA_ASTC_8x6_Format:Jk,RGBA_ASTC_8x8_Format:eT,RGBA_BPTC_Format:Ox,RGBA_ETC2_EAC_Format:Hk,RGBA_PVRTC_2BPPV1_Format:Xk,RGBA_PVRTC_4BPPV1_Format:zk,RGBA_S3TC_DXT1_Format:yx,RGBA_S3TC_DXT3_Format:bx,RGBA_S3TC_DXT5_Format:xx,RGBFormat:qU,RGB_BPTC_SIGNED_Format:aT,RGB_BPTC_UNSIGNED_Format:lT,RGB_ETC1_Format:Wk,RGB_ETC2_Format:Qk,RGB_PVRTC_2BPPV1_Format:Fk,RGB_PVRTC_4BPPV1_Format:Uk,RGB_S3TC_DXT1_Format:vx,RGFormat:JU,RGIntegerFormat:zE,RawShaderMaterial:T0,Ray:bd,Raycaster:xP,Rec709Primaries:Z0,RectAreaLight:az,RedFormat:UE,RedIntegerFormat:FE,ReinhardToneMapping:UU,RenderTarget:yF,RepeatWrapping:wh,ReplaceStencilOp:Vhe,ReverseSubtractEquation:pU,RingGeometry:Dw,SIGNED_RED_GREEN_RGTC2_Format:uT,SIGNED_RED_RGTC1_Format:cT,SRGBColorSpace:vo,SRGBTransfer:fn,Scene:bp,ShaderChunk:mi,ShaderLib:Lo,ShaderMaterial:ks,ShadowMaterial:YF,Shape:Zu,ShapeGeometry:Nw,ShapePath:yz,ShapeUtils:il,ShortType:GU,Skeleton:Jv,SkeletonHelper:eve,SkinnedMesh:eP,Source:Vu,Sphere:zr,SphereGeometry:iy,Spherical:wT,SphericalHarmonics3:lz,SplineCurve:oP,SpotLight:Fw,SpotLightHelper:J0e,Sprite:RF,SpriteMaterial:JE,SrcAlphaFactor:oO,SrcAlphaSaturateFactor:CU,SrcColorFactor:bU,StaticCopyUsage:tue,StaticDrawUsage:J0,StaticReadUsage:Khe,StereoCamera:P0e,StreamCopyUsage:nue,StreamDrawUsage:Zhe,StreamReadUsage:eue,StringKeyframeTrack:wd,SubtractEquation:fU,SubtractiveBlending:Vk,TOUCH:Vl,TangentSpaceNormalMap:Dh,TetrahedronGeometry:$w,Texture:Xn,TextureLoader:Uw,TorusGeometry:Vw,TorusKnotGeometry:Lw,Triangle:Ws,TriangleFanDrawMode:Nhe,TriangleStripDrawMode:Dhe,TrianglesDrawMode:Ihe,TubeGeometry:Bw,UVMapping:mw,Uint16BufferAttribute:Ow,Uint32BufferAttribute:YE,Uint8BufferAttribute:Lue,Uint8ClampedBufferAttribute:Bue,Uniform:Xw,UniformsGroup:j0e,UniformsLib:at,UniformsUtils:Yv,UnsignedByteType:Ca,UnsignedInt248Type:Xp,UnsignedInt5999Type:YU,UnsignedIntType:od,UnsignedShort4444Type:LE,UnsignedShort5551Type:BE,UnsignedShortType:$E,VSMShadowMap:Ga,Vector2:ze,Vector3:ne,Vector4:bi,VectorKeyframeTrack:wp,VideoTexture:$ge,WebGL3DRenderTarget:kue,WebGLArrayRenderTarget:Cue,WebGLCoordinateSystem:Ka,WebGLCubeRenderTarget:wF,WebGLMultipleRenderTargets:fve,WebGLRenderTarget:Zo,WebGLRenderer:S0,WebGLUtils:EF,WebGPUCoordinateSystem:ev,WireframeGeometry:GF,WrapAroundEnding:j0,ZeroCurvatureEnding:Nu,ZeroFactor:vU,ZeroSlopeEnding:$u,ZeroStencilOp:$he,createCanvasElement:mF},Symbol.toStringTag,{value:"Module"}));function sc(n){return iw()?(aE(n),!0):!1}function lv(){const n=new Set,e=r=>{n.delete(r)};return{on:r=>{n.add(r);const s=()=>e(r);return sc(s),{off:s}},off:e,trigger:(...r)=>Promise.all(Array.from(n).map(s=>s(...r)))}}function bn(n){return typeof n=="function"?n():oi(n)}const _T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const mve=n=>n!=null,gve=Object.prototype.toString,vve=n=>gve.call(n)==="[object Object]",ST=()=>{};function yve(n,e){function i(...t){return new Promise((r,s)=>{Promise.resolve(n(()=>e.apply(this,t),{fn:e,thisArg:this,args:t})).then(r).catch(s)})}return i}function bve(n,e={}){let i,t,r=ST;const s=l=>{clearTimeout(l),r(),r=ST};return l=>{const c=bn(n),u=bn(e.maxWait);return i&&s(i),c<=0||u!==void 0&&u<=0?(t&&(s(t),t=null),Promise.resolve(l())):new Promise((d,f)=>{r=e.rejectOnCancel?f:d,u&&!t&&(t=setTimeout(()=>{i&&s(i),t=null,d(l())},u)),i=setTimeout(()=>{t&&s(t),t=null,d(l())},c)})}}function xve(n,e,i=!1){return e.reduce((t,r)=>(r in n&&(!i||n[r]!==void 0)&&(t[r]=n[r]),t),{})}function Ove(n){return Mo()}function wve(n,e=200,i={}){return yve(bve(e,i),n)}function dD(n,e=200,i={}){const t=ot(n.value),r=wve(()=>{t.value=n.value},e,i);return Fi(n,()=>r()),t}function _ve(n,e={}){if(!or(n))return zv(n);const i=Array.isArray(n.value)?Array.from({length:n.value.length}):{};for(const t in n.value)i[t]=mE(()=>({get(){return n.value[t]},set(r){var s;if((s=bn(e.replaceRef))!=null?s:!0)if(Array.isArray(n.value)){const l=[...n.value];l[t]=r,n.value=l}else{const l={...n.value,[t]:r};Object.setPrototypeOf(l,Object.getPrototypeOf(n.value)),n.value=l}else n.value[t]=r}}));return i}function OP(n,e=!0,i){Ove()?jn(n,i):e?n():Bp(n)}function Sve(n,e=1e3,i={}){const{immediate:t=!0,immediateCallback:r=!1}=i;let s=null;const o=ot(!1);function l(){s&&(clearInterval(s),s=null)}function c(){o.value=!1,l()}function u(){const d=bn(e);d<=0||(o.value=!0,r&&n(),l(),s=setInterval(n,d))}if(t&&_T&&u(),or(e)||typeof e=="function"){const d=Fi(e,()=>{o.value&&_T&&u()});sc(d)}return sc(c),{isActive:o,pause:c,resume:u}}function wa(n){var e;const i=bn(n);return(e=i==null?void 0:i.$el)!=null?e:i}const dc=_T?window:void 0;function cv(...n){let e,i,t,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([i,t,r]=n,e=dc):[e,i,t,r]=n,!e)return ST;Array.isArray(i)||(i=[i]),Array.isArray(t)||(t=[t]);const s=[],o=()=>{s.forEach(d=>d()),s.length=0},l=(d,f,m,g)=>(d.addEventListener(f,m,g),()=>d.removeEventListener(f,m,g)),c=Fi(()=>[wa(e),bn(r)],([d,f])=>{if(o(),!d)return;const m=vve(f)?{...f}:f;s.push(...i.flatMap(g=>t.map(y=>l(d,g,y,m))))},{immediate:!0,flush:"post"}),u=()=>{c(),o()};return sc(u),u}function Cve(){const n=ot(!1),e=Mo();return e&&jn(()=>{n.value=!0},e),n}function Ww(n){const e=Cve();return gn(()=>(e.value,!!n()))}function kve(n,e,i={}){const{window:t=dc,...r}=i;let s;const o=Ww(()=>t&&"MutationObserver"in t),l=()=>{s&&(s.disconnect(),s=void 0)},c=gn(()=>{const m=bn(n),g=(Array.isArray(m)?m:[m]).map(wa).filter(mve);return new Set(g)}),u=Fi(()=>c.value,m=>{l(),o.value&&m.size&&(s=new MutationObserver(e),m.forEach(g=>s.observe(g,r)))},{immediate:!0,flush:"post"}),d=()=>s==null?void 0:s.takeRecords(),f=()=>{l(),u()};return sc(f),{isSupported:o,stop:f,takeRecords:d}}function wP(n,e={}){const{immediate:i=!0,fpsLimit:t=void 0,window:r=dc}=e,s=ot(!1),o=t?1e3/t:null;let l=0,c=null;function u(m){if(!s.value||!r)return;l||(l=m);const g=m-l;if(o&&g<o){c=r.requestAnimationFrame(u);return}l=m,n({delta:g,timestamp:m}),c=r.requestAnimationFrame(u)}function d(){!s.value&&r&&(s.value=!0,l=0,c=r.requestAnimationFrame(u))}function f(){s.value=!1,c!=null&&r&&(r.cancelAnimationFrame(c),c=null)}return i&&d(),sc(f),{isActive:td(s),pause:f,resume:d}}function Tve(n,e={}){const{window:i=dc}=e,t=Ww(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let r;const s=ot(!1),o=u=>{s.value=u.matches},l=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",o):r.removeListener(o))},c=Gl(()=>{t.value&&(l(),r=i.matchMedia(bn(n)),"addEventListener"in r?r.addEventListener("change",o):r.addListener(o),s.value=r.matches)});return sc(()=>{c(),l(),r=void 0}),s}function Mve(n={}){const{window:e=dc}=n,i=ot(1);if(e){let t=function(){i.value=e.devicePixelRatio,r(),s=e.matchMedia(`(resolution: ${i.value}dppx)`),s.addEventListener("change",t,{once:!0})},r=function(){s==null||s.removeEventListener("change",t)},s;t(),sc(r)}return{pixelRatio:i}}function bz(n,e,i={}){const{window:t=dc,...r}=i;let s;const o=Ww(()=>t&&"ResizeObserver"in t),l=()=>{s&&(s.disconnect(),s=void 0)},c=gn(()=>Array.isArray(n)?n.map(f=>wa(f)):[wa(n)]),u=Fi(c,f=>{if(l(),o.value&&t){s=new ResizeObserver(e);for(const m of f)m&&s.observe(m,r)}},{immediate:!0,flush:"post"}),d=()=>{l(),u()};return sc(d),{isSupported:o,stop:d}}function Eve(n,e={}){const{reset:i=!0,windowResize:t=!0,windowScroll:r=!0,immediate:s=!0}=e,o=ot(0),l=ot(0),c=ot(0),u=ot(0),d=ot(0),f=ot(0),m=ot(0),g=ot(0);function y(){const x=wa(n);if(!x){i&&(o.value=0,l.value=0,c.value=0,u.value=0,d.value=0,f.value=0,m.value=0,g.value=0);return}const b=x.getBoundingClientRect();o.value=b.height,l.value=b.bottom,c.value=b.left,u.value=b.right,d.value=b.top,f.value=b.width,m.value=b.x,g.value=b.y}return bz(n,y),Fi(()=>wa(n),x=>!x&&y()),kve(n,y,{attributeFilter:["style","class"]}),r&&cv("scroll",y,{capture:!0,passive:!0}),t&&cv("resize",y,{passive:!0}),OP(()=>{s&&y()}),{height:o,bottom:l,left:c,right:u,top:d,width:f,x:m,y:g,update:y}}function Pve(n,e={width:0,height:0},i={}){const{window:t=dc,box:r="content-box"}=i,s=gn(()=>{var f,m;return(m=(f=wa(n))==null?void 0:f.namespaceURI)==null?void 0:m.includes("svg")}),o=ot(e.width),l=ot(e.height),{stop:c}=bz(n,([f])=>{const m=r==="border-box"?f.borderBoxSize:r==="content-box"?f.contentBoxSize:f.devicePixelContentBoxSize;if(t&&s.value){const g=wa(n);if(g){const y=g.getBoundingClientRect();o.value=y.width,l.value=y.height}}else if(m){const g=Array.isArray(m)?m:[m];o.value=g.reduce((y,{inlineSize:x})=>y+x,0),l.value=g.reduce((y,{blockSize:x})=>y+x,0)}else o.value=f.contentRect.width,l.value=f.contentRect.height},i);OP(()=>{const f=wa(n);f&&(o.value="offsetWidth"in f?f.offsetWidth:e.width,l.value="offsetHeight"in f?f.offsetHeight:e.height)});const u=Fi(()=>wa(n),f=>{o.value=f?e.width:0,l.value=f?e.height:0});function d(){c(),u()}return{width:o,height:l,stop:d}}function Ave(n){var e;const i=ot(0);if(typeof performance>"u")return i;const t=(e=n==null?void 0:n.every)!=null?e:10;let r=performance.now(),s=0;return wP(()=>{if(s+=1,s>=t){const o=performance.now(),l=o-r;i.value=Math.round(1e3/(l/s)),r=o,s=0}}),i}function Rve(n={}){const e=ot(),i=Ww(()=>typeof performance<"u"&&"memory"in performance);if(i.value){const{interval:t=1e3}=n;Sve(()=>{e.value=performance.memory},t,{immediate:n.immediate,immediateCallback:n.immediateCallback})}return{isSupported:i,memory:e}}const xz={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},Ive=Object.keys(xz);function Dve(n={}){const{target:e=dc}=n,i=ot(!1),t=ot(n.initialValue||{});Object.assign(t.value,xz,t.value);const r=s=>{i.value=!0,!(n.pointerTypes&&!n.pointerTypes.includes(s.pointerType))&&(t.value=xve(s,Ive,!1))};if(e){const s={passive:!0};cv(e,["pointerdown","pointermove","pointerup"],r,s),cv(e,"pointerleave",()=>i.value=!1,s)}return{..._ve(t),isInside:i}}function Nve(n={}){const{window:e=dc,initialWidth:i=Number.POSITIVE_INFINITY,initialHeight:t=Number.POSITIVE_INFINITY,listenOrientation:r=!0,includeScrollbar:s=!0}=n,o=ot(i),l=ot(t),c=()=>{e&&(s?(o.value=e.innerWidth,l.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,l.value=e.document.documentElement.clientHeight))};if(c(),OP(c),cv("resize",c,{passive:!0}),r){const u=Tve("(orientation: portrait)");Fi(u,()=>c())}return{width:o,height:l}}var $ve=Object.defineProperty,Vve=(n,e,i)=>e in n?$ve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,fD=(n,e,i)=>(Vve(n,typeof e!="symbol"?e+"":e,i),i);const Lve="@tresjs/core",Bve="module",Uve="3.9.0",Fve="pnpm@8.15.6",zve="Declarative ThreeJS using Vue Components",Xve="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",Wve="MIT",Qve=["vue","3d","threejs","three","threejs-vue"],Hve=!1,Gve={".":{types:"./dist/index.d.ts",import:"./dist/tres.js",require:"./dist/tres.umd.cjs"},"./components":{types:"./dist/src/components/index.d.ts"},"./composables":{types:"./dist/src/composables/index.d.ts"},"./types":{types:"./dist/src/types/index.d.ts"},"./utils":{types:"./dist/src/utils/index.d.ts"},"./*":"./*"},Yve="./dist/tres.js",jve="./dist/tres.js",qve="./dist/index.d.ts",Zve=["*.d.ts","dist"],Kve={access:"public"},Jve={dev:"cd playground && npm run dev",build:"vite build",playground:"cd playground && npm run dev",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui",release:"release-it",coverage:"vitest run --coverage",lint:"eslint .","lint:fix":"eslint . --fix","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts",prepare:"node .husky/install.mjs"},eye={three:">=0.133",vue:">=3.3"},tye={"@alvarosabu/utils":"^3.1.1","@vue/devtools-api":"^6.6.1","@vueuse/core":"^10.7.0"},iye={"@release-it/conventional-changelog":"^8.0.1","@stackblitz/sdk":"^1.9.0","@tresjs/cientos":"3.8.0","@tresjs/eslint-config":"^1.0.0","@tresjs/eslint-config-vue":"^0.2.1","@types/three":"^0.163.0","@typescript-eslint/eslint-plugin":"^7.7.1","@typescript-eslint/parser":"^7.7.1","@vitejs/plugin-vue":"^5.0.4","@vitest/coverage-c8":"^0.33.0","@vitest/ui":"^1.5.0","@vue/test-utils":"^2.4.3",eslint:"^9.1.1","eslint-plugin-vue":"^9.25.0",esno:"^4.0.0",gsap:"^3.12.3",husky:"^9.0.11",jsdom:"^24.0.0",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^1.1.1","release-it":"^17.2.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.11.0",three:"^0.163.0",unocss:"^0.59.4",unplugin:"^1.10.1","unplugin-vue-components":"^0.26.0",vite:"^5.2.10","vite-plugin-banner":"^0.7.1","vite-plugin-dts":"3.9.0","vite-plugin-inspect":"^0.8.4","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.1.3",vitest:"^1.5.0",vue:"^3.4.24","vue-demi":"^0.14.6"},nye={name:Lve,type:Bve,version:Uve,packageManager:Fve,description:zve,author:Xve,license:Wve,keywords:Qve,sideEffects:Hve,exports:Gve,main:Yve,module:jve,types:qve,files:Zve,publishConfig:Kve,scripts:Jve,peerDependencies:eye,dependencies:tye,devDependencies:iye},rye=({sizes:n,scene:e})=>{const i=ot([]),t=gn(()=>i.value[0]),r=l=>{const c=l instanceof jv?l:i.value.find(d=>d.uuid===l);if(!c)return;const u=i.value.filter(({uuid:d})=>d!==c.uuid);i.value=[c,...u]},s=(l,c=!1)=>{i.value.some(({uuid:u})=>u===l.uuid)||(c?r(l):i.value.push(l))},o=l=>{i.value=i.value.filter(({uuid:c})=>c!==l.uuid)};return Gl(()=>{n.aspectRatio.value&&i.value.forEach(l=>{l instanceof en&&(l.aspect=n.aspectRatio.value),(l instanceof en||l instanceof Wo)&&l.updateProjectionMatrix()})}),e.userData.tres__registerCamera=s,e.userData.tres__deregisterCamera=o,Jo(()=>{i.value=[]}),{camera:t,cameras:i,registerCamera:s,deregisterCamera:o,setCameraActive:r}},Oz=lv(),wz=lv(),_P=lv(),E0=new vP;let Cx=0,kx=0;const{pause:sye,resume:oye,isActive:aye}=wP(()=>{Oz.trigger({delta:Cx,elapsed:kx,clock:E0}),wz.trigger({delta:Cx,elapsed:kx,clock:E0}),_P.trigger({delta:Cx,elapsed:kx,clock:E0})},{immediate:!1});_P.on(()=>{Cx=E0.getDelta(),kx=E0.getElapsedTime()});const _d=()=>({onBeforeLoop:Oz.on,onLoop:wz.on,onAfterLoop:_P.on,pause:sye,resume:oye,isActive:aye}),yb="[TresJS   ] ";function Qw(){function n(...t){typeof t[0]=="string"?t[0]=yb+t[0]:t.unshift(yb),console.error(...t)}function e(...t){typeof t[0]=="string"?t[0]=yb+t[0]:t.unshift(yb),console.warn(...t)}function i(t,r){}return{logError:n,logWarning:e,logMessage:i}}function lye(n){return n instanceof it?n:Array.isArray(n)?new it(...n):new it(n)}class cye extends tn{constructor(...e){super(...e),fD(this,"type","HightlightMesh"),fD(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const e=(Date.now()-this.createTime)/1e3,i=1+.07*Math.sin(2.5*e);this.scale.set(i,i,i)}}const _z=(n,e)=>{for(const i of Object.keys(e))e[i]instanceof Object&&Object.assign(e[i],_z(n[i],e[i]));return Object.assign(n||{},e),n},hye="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",uye=dye(hye);function pD(n){return n&&n.nodeType===1}function bb(n){return n.replace(/-([a-z])/g,(e,i)=>i.toUpperCase())}function dye(n,e){const i=Object.create(null),t=n.split(",");for(let r=0;r<t.length;r++)i[t[r]]=!0;return r=>!!i[r]}const fye=(n,e)=>{const i=new Set,t=[];for(const r of n){const s=e(r);i.has(s)||(i.add(s),t.push(r))}return t},mD=(n,e)=>{if(!e)return;const i=Array.isArray(e)?e:e.match(/([^[.\]])+/g);return i==null?void 0:i.reduce((t,r)=>t&&t[r],n)},pye=(n,e,i)=>{const t=Array.isArray(e)?e:e.match(/([^[.\]])+/g);t&&t.reduce((r,s,o)=>(r[s]===void 0&&(r[s]={}),o===t.length-1&&(r[s]=i),r[s]),n)};function Sz(n,e){if(pD(n)&&pD(e)){const r=n.attributes,s=e.attributes;return r.length!==s.length?!1:Array.from(r).every(({name:o,value:l})=>e.getAttribute(o)===l)}if(n===e)return!0;if(n===null||typeof n!="object"||e===null||typeof e!="object")return!1;const i=Object.keys(n),t=Object.keys(e);if(i.length!==t.length)return!1;for(const r of i)if(!t.includes(r)||!Sz(n[r],e[r]))return!1;return!0}function mye(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let i=0;i<n.length;i++)if(!Sz(n[i],e[i]))return!1;return!0}const gye=Array.isArray;function vye(n,e,i,t){const r=c=>{if(c.uuid===e)return c;for(const u of c.children){const d=r(u);if(d)return d}},s=r(n);if(!s){console.warn("Object with UUID not found in the scene.");return}let o=s;for(let c=0;c<i.length-1;c++)if(o[i[c]]!==void 0)o=o[i[c]];else{console.warn(`Property path is not valid: ${i.join(".")}`);return}const l=i[i.length-1];o[l]!==void 0?o[l]=t:console.warn(`Property path is not valid: ${i.join(".")}`)}function yye(n){const e=new Ma({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:Xs});return new cye(n.geometry.clone(),e)}const bye=Number.parseInt(Up.replace("dev","")),xb={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:vo,toneMapping:NE,toneMappingExposure:3,shadowMap:{enabled:!0,type:DE}}};function xye({scene:n,canvas:e,options:i,disableRender:t,contextParts:{sizes:r,camera:s}}){const o=gn(()=>({alpha:bn(i.alpha),depth:bn(i.depth),canvas:wa(e),context:bn(i.context),stencil:bn(i.stencil),antialias:bn(i.antialias)===void 0?!0:bn(i.antialias),precision:bn(i.precision),powerPreference:bn(i.powerPreference),premultipliedAlpha:bn(i.premultipliedAlpha),preserveDrawingBuffer:bn(i.preserveDrawingBuffer),logarithmicDepthBuffer:bn(i.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:bn(i.failIfMajorPerformanceCaveat)})),l=Fn(new S0(o.value));Fi(o,()=>{l.value.dispose(),l.value=new S0(o.value)}),Gl(()=>{l.value.setSize(r.width.value,r.height.value)});const{pixelRatio:c}=Mve();Gl(()=>{l.value.setPixelRatio(c.value)});const{logError:u}=Qw(),d=(()=>{const y=new S0,x={shadowMap:{enabled:y.shadowMap.enabled,type:y.shadowMap.type},toneMapping:y.toneMapping,toneMappingExposure:y.toneMappingExposure,outputColorSpace:y.outputColorSpace};return y.dispose(),x})();Gl(()=>{const y=bn(i.preset);y&&(y in xb||u(`Renderer Preset must be one of these: ${Object.keys(xb).join(", ")}`),_z(l.value,xb[y]));const x=(_,O)=>{const k=bn(_),M=()=>{if(y)return mD(xb[y],O)};if(k!==void 0)return k;const E=M();return E!==void 0?E:mD(d,O)},b=(_,O)=>pye(l.value,O,x(_,O));b(i.shadows,"shadowMap.enabled"),b(i.toneMapping,"toneMapping"),b(i.shadowMapType,"shadowMap.type"),bye<150&&b(!i.useLegacyLights,"physicallyCorrectLights"),b(i.outputColorSpace,"outputColorSpace"),b(i.toneMappingExposure,"toneMappingExposure");const S=x(i.clearColor,"clearColor");S&&l.value.setClearColor(S?lye(S):new it(0))});const{pause:f,resume:m,onLoop:g}=_d();return g(()=>{s.value&&!bn(t)&&l.value.render(n,s.value)}),m(),Jo(()=>{f(),l.value.dispose(),l.value.forceContextLoss()}),{renderer:l}}const gD=n=>typeof n=="function",Oye=n=>!!n&&n.constructor===Array;function wye(n){const e={nodes:{},materials:{}};return n&&n.traverse(i=>{i.name&&(e.nodes[i.name]=i),i.material&&!e.materials[i.material.name]&&(e.materials[i.material.name]=i.material)}),e}async function _ye(n,e,i,t,r){const{logError:s}=Qw(),o=new n,l=(Array.isArray(e)?e:[e]).map(c=>new Promise((u,d)=>{o.load(c,f=>{f.scene&&Object.assign(f,wye(f.scene)),u(f)},t,f=>d(s("[useLoader] - Failed to load resource",f)))}));return Oye(e)?await Promise.all(l):await l[0]}async function Sye(n,e){const i=new Uw(e),t=r=>new Promise((s,o)=>{i.load(r,l=>s(l),()=>null,()=>{o(new Error("[useTextures] - Failed to load texture"))})});if(gye(n)){const r=await Promise.all(n.map(s=>t(s)));return n.length>1?r:r[0]}else{const{map:r,displacementMap:s,normalMap:o,roughnessMap:l,metalnessMap:c,aoMap:u,alphaMap:d,matcap:f}=n;return{map:r?await t(r):null,displacementMap:s?await t(s):null,normalMap:o?await t(o):null,roughnessMap:l?await t(l):null,metalnessMap:c?await t(c):null,aoMap:u?await t(u):null,alphaMap:d?await t(d):null,matcap:f?await t(f):null}}}const Cye=(n,{renderer:e,camera:i,raycaster:t})=>{const r=gn(()=>e.value.domElement),{x:s,y:o}=Dve({target:r}),{width:l,height:c,top:u,left:d}=Eve(r),f=({x:R,y:P})=>{if(r.value)return{x:(R-d.value)/l.value*2-1,y:-((P-u.value)/c.value)*2+1}},m=({x:R,y:P})=>{if(i.value)return t.value.setFromCamera(new ze(R,P),i.value),t.value.intersectObjects(n.value,!1)},g=R=>{const P=f({x:(R==null?void 0:R.clientX)??s.value,y:(R==null?void 0:R.clientY)??o.value});return P?m(P)||[]:[]},y=gn(()=>g()),x=lv(),b=lv(),S=(R,P)=>{R.trigger({event:P,intersects:g(P)})},_=R=>{S(b,R)};let O;const k=R=>{var P;O=(P=g(R)[0])==null?void 0:P.object},M=R=>{var P;R instanceof PointerEvent&&O===((P=g(R)[0])==null?void 0:P.object)&&S(x,R)},E=R=>b.trigger({event:R,intersects:[]});return r.value.addEventListener("pointerup",M),r.value.addEventListener("pointerdown",k),r.value.addEventListener("pointermove",_),r.value.addEventListener("pointerleave",E),Jo(()=>{r!=null&&r.value&&(r.value.removeEventListener("pointerup",M),r.value.removeEventListener("pointerdown",k),r.value.removeEventListener("pointermove",_),r.value.removeEventListener("pointerleave",E))}),{intersects:y,onClick:R=>x.on(R).off,onPointerMove:R=>b.on(R).off}},kye=({scene:n,contextParts:e})=>{const i=vd({click:new Map,pointerMove:new Map,pointerEnter:new Map,pointerLeave:new Map}),t=ot(new Set),r=m=>{t.value.add(m)},s=m=>{t.value.delete(m)},o=m=>{Object.values(i).forEach(g=>g.delete(m)),s(m)},l=m=>{const{onClick:g,onPointerMove:y,onPointerEnter:x,onPointerLeave:b}=m;g&&i.click.set(m,g),y&&i.pointerMove.set(m,y),x&&i.pointerEnter.set(m,x),b&&i.pointerLeave.set(m,b)};n.userData.tres__registerAtPointerEventHandler=l,n.userData.tres__deregisterAtPointerEventHandler=o,n.userData.tres__registerBlockingObjectAtPointerEventHandler=r,n.userData.tres__deregisterBlockingObjectAtPointerEventHandler=s;const c=gn(()=>fye([...Array.from(t.value),...Object.values(i).map(m=>Array.from(m.keys())).flat()],({uuid:m})=>m)),{onClick:u,onPointerMove:d}=Cye(c,e);u(({intersects:m,event:g})=>{var y;m.length&&((y=i.click.get(m[0].object))==null||y(m[0],g))});let f;return d(({intersects:m,event:g})=>{var y,x,b,S;const _=(y=m==null?void 0:m[0])==null?void 0:y.object,{pointerLeave:O,pointerEnter:k,pointerMove:M}=i;f&&f!==_&&((x=O.get(f))==null||x(f,g)),_&&(f!==_&&((b=k.get(_))==null||b(m[0],g)),(S=M.get(_))==null||S(m[0],g)),f=_||null}),{registerObject:l,deregisterObject:o}};function Cz(n){let e=0;return n.traverse(i=>{if(i.isMesh&&i.geometry){const t=i.geometry,r=t.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,s=t.index?t.index.count*Uint32Array.BYTES_PER_ELEMENT:0,o=t.attributes.normal?t.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,l=t.attributes.uv?t.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,c=r+s+o+l;e+=c}}),e}function Tye(n){return(n/1024).toFixed(2)}const CT=ot({}),SP=n=>Object.assign(CT.value,n);function Mye(n,e,i=10){const t=bn(n)?Nve():Pve(gn(()=>bn(e).parentElement)),r=td(dD(t.width,i)),s=td(dD(t.height,i)),o=gn(()=>r.value/s.value);return{height:s,width:r,aspectRatio:o}}function Eye({scene:n,canvas:e,windowSize:i,disableRender:t,rendererOptions:r}){const s=Mye(i,e),o=Fn(n),{camera:l,cameras:c,registerCamera:u,deregisterCamera:d,setCameraActive:f}=rye({sizes:s,scene:n}),{renderer:m}=xye({scene:n,canvas:e,options:r,contextParts:{sizes:s,camera:l},disableRender:t}),g={sizes:s,scene:o,camera:l,cameras:td(c),renderer:m,raycaster:Fn(new xP),controls:ot(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},extend:SP,registerCamera:u,setCameraActive:f,deregisterCamera:d};H0("useTres",g);const y=100,x=Ave({every:y}),{isSupported:b,memory:S}=Rve({interval:y}),_=160;let O=performance.now();const k=({timestamp:P})=>{g.scene.value&&(g.perf.memory.allocatedMem=Cz(g.scene.value)),P-O>=y&&(O=P,g.perf.fps.accumulator.push(x.value),g.perf.fps.accumulator.length>_&&g.perf.fps.accumulator.shift(),g.perf.fps.value=x.value,b.value&&S.value&&(g.perf.memory.accumulator.push(S.value.usedJSHeapSize/1024/1024),g.perf.memory.accumulator.length>_&&g.perf.memory.accumulator.shift(),g.perf.memory.currentMem=g.perf.memory.accumulator.reduce((I,T)=>I+T,0)/g.perf.memory.accumulator.length))};let M=0;const E=1,{pause:R}=wP(({delta:P})=>{window.__TRES__DEVTOOLS__&&(k({timestamp:performance.now()}),M+=P,M>=E&&(window.__TRES__DEVTOOLS__.cb(g),M=0))},{immediate:!0});return Jo(()=>{R()}),g}function CP(){const n=Qf("useTres");if(!n)throw new Error("useTresContext must be used together with useTresContextProvider");return n}let Ln=null;const{logError:vD}=Qw(),VC=["onClick","onPointerMove","onPointerEnter","onPointerLeave"],Pye={createElement(n,e,i,t){var r,s;if(t||(t={}),t.args||(t.args=[]),n==="template"||uye(n))return null;let o=n.replace("Tres",""),l;if(n==="primitive"){(t==null?void 0:t.object)===void 0&&vD("Tres primitives need a prop 'object'");const c=t.object;o=c.type,l=Object.assign(c,{type:o,attach:t.attach,primitive:!0})}else{const c=CT.value[o];c||vD(`${o} is not defined on the THREE namespace. Use extend to add it to the catalog.`),l=new c(...t.args)}return l.isCamera&&(t!=null&&t.position||l.position.set(3,3,3),t!=null&&t.lookAt||l.lookAt(0,0,0)),(t==null?void 0:t.attach)===void 0&&(l.isMaterial?l.attach="material":l.isBufferGeometry&&(l.attach="geometry")),l.isObject3D&&((r=t==null?void 0:t.material)!=null&&r.isMaterial&&(l.userData.tres__materialViaProp=!0),(s=t==null?void 0:t.geometry)!=null&&s.isBufferGeometry&&(l.userData.tres__geometryViaProp=!0)),l.userData={...l.userData,tres__name:o},l},insert(n,e){var i,t,r,s;e&&e.isScene&&(Ln=e);const o=e||Ln;if(n!=null&&n.isObject3D){if(n!=null&&n.isCamera){if(!(Ln!=null&&Ln.userData.tres__registerCamera))throw new Error("could not find tres__registerCamera on scene's userData");(t=Ln==null?void 0:(i=Ln.userData).tres__registerCamera)==null||t.call(i,n)}if(n&&VC.some(l=>n[l])){if(!(Ln!=null&&Ln.userData.tres__registerAtPointerEventHandler))throw new Error("could not find tres__registerAtPointerEventHandler on scene's userData");(s=Ln==null?void 0:(r=Ln.userData).tres__registerAtPointerEventHandler)==null||s.call(r,n)}}n!=null&&n.isObject3D&&o!=null&&o.isObject3D?(o.add(n),n.dispatchEvent({type:"added"})):n!=null&&n.isFog?o.fog=n:typeof(n==null?void 0:n.attach)=="string"&&(n.__previousAttach=n[o==null?void 0:o.attach],o&&(o[n.attach]=n))},remove(n){var e,i;if(n){if(n.isObject3D){const t=n,r=u=>{var d,f;const m=u;u.userData.tres__materialViaProp||((d=m.material)==null||d.dispose(),m.material=void 0),u.userData.tres__geometryViaProp||((f=m.geometry)==null||f.dispose(),m.geometry=void 0)},s=Ln==null?void 0:Ln.userData.tres__deregisterAtPointerEventHandler,o=Ln==null?void 0:Ln.userData.tres__deregisterBlockingObjectAtPointerEventHandler,l=u=>{var d,f;if(!o)throw new Error("could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData");if((f=Ln==null?void 0:(d=Ln.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||f.call(d,u),!s)throw new Error("could not find tres__deregisterAtPointerEventHandler on scene's userData");u&&VC.some(m=>u[m])&&(s==null||s(u))},c=u=>{const d=Ln==null?void 0:Ln.userData.tres__deregisterCamera;if(!d)throw new Error("could not find tres__deregisterCamera on scene's userData");u.isCamera&&(d==null||d(u))};(e=n.removeFromParent)==null||e.call(n),t.traverse(u=>{r(u),c(u),l==null||l(u)}),r(t),c(t),l==null||l(t)}(i=n.dispose)==null||i.call(n)}},patchProp(n,e,i,t){var r,s,o,l;if(n){let c=n,u=e;if(n.isObject3D&&u==="blocks-pointer-events"){t||t===""?(s=Ln==null?void 0:(r=Ln.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||s.call(r,n):(l=Ln==null?void 0:(o=Ln.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||l.call(o,n);return}let d=bb(u),f=c==null?void 0:c[d];if(u==="args"){const g=n,y=i??[],x=t??[],b=n.userData.tres__name||n.type;b&&y.length&&!mye(y,x)&&(c=Object.assign(g,new CT.value[b](...t)));return}if(c.type==="BufferGeometry"){if(u==="args")return;c.setAttribute(bb(u),new Ri(...t));return}if(u.includes("-")&&f===void 0){const g=u.split("-");f=g.reduce((y,x)=>y[bb(x)],c),u=g.pop(),d=u.toLowerCase(),f!=null&&f.set||(c=g.reduce((y,x)=>y[bb(x)],c))}let m=t;if(m===""&&(m=!0),gD(f)){VC.includes(e)||(Array.isArray(m)?n[d](...m):n[d](m));return}!(f!=null&&f.set)&&!gD(f)?c[d]=m:f.constructor===m.constructor&&f!=null&&f.copy?f==null||f.copy(m):Array.isArray(m)?f.set(...m):!f.isColor&&f.setScalar?f.setScalar(m):f.set(m)}},parentNode(n){return(n==null?void 0:n.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}},{render:Aye}=kE(Pye);SP(pve);function Rye(){return kz().__VUE_DEVTOOLS_GLOBAL_HOOK__}function kz(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Iye=typeof Proxy=="function",Dye="devtools-plugin:setup",Nye="plugin:settings:set";let eg,kT;function $ye(){var n;return eg!==void 0||(typeof window<"u"&&window.performance?(eg=!0,kT=window.performance):typeof globalThis<"u"&&!((n=globalThis.perf_hooks)===null||n===void 0)&&n.performance?(eg=!0,kT=globalThis.perf_hooks.performance):eg=!1),eg}function Vye(){return $ye()?kT.now():Date.now()}class Lye{constructor(e,i){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=i;const t={};if(e.settings)for(const o in e.settings){const l=e.settings[o];t[o]=l.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},t);try{const o=localStorage.getItem(r),l=JSON.parse(o);Object.assign(s,l)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return Vye()}},i&&i.on(Nye,(o,l)=>{o===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(o,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:l,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const i of this.onQueue)this.target.on[i.method](...i.args);for(const i of this.targetQueue)i.resolve(await this.target[i.method](...i.args))}}function Bye(n,e){const i=n,t=kz(),r=Rye(),s=Iye&&i.enableEarlyProxy;if(r&&(t.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(Dye,n,e);else{const o=s?new Lye(i,r):null;(t.__VUE_DEVTOOLS_PLUGINS__=t.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:i,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}function Uye(n,e){const i=`  ${n}`;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(i,e):console.log(i)}const Tz=n=>{const e={id:n.uuid,label:n.type,children:[],tags:[]};n.name!==""&&e.tags.push({label:n.name,textColor:5750629,backgroundColor:15793395});const i=Cz(n);return i>0&&e.tags.push({label:`${Tye(i)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),n.type.includes("Light")&&(e.tags.push({label:`${n.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),e.tags.push({label:`#${n.color.getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),n.type.includes("Camera")&&(e.tags.push({label:`${n.fov}`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),e.tags.push({label:`x: ${Math.round(n.position.x)} y: ${Math.round(n.position.y)} z: ${Math.round(n.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),e};function Mz(n,e){n.children.forEach(i=>{if(i.type==="HightlightMesh")return;const t=Tz(i);e.children.push(t),Mz(i,t)})}const Fye=[],tg="tres:inspector",zye=vd({sceneGraph:null});function Xye(n,e){Bye({id:"dev.esm.tres",label:"TresJS ",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:Fye,app:n},i=>{typeof i.now!="function"&&Uye("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),i.addInspector({id:tg,label:"TresJS ",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{i.sendInspectorTree(tg)},1e3),setInterval(()=>{i.notifyComponentUpdate()},5e3),i.on.getInspectorTree(s=>{if(s.inspectorId===tg){const o=Tz(e.scene.value);Mz(e.scene.value,o),zye.sceneGraph=o,s.rootNodes=[o]}});let t=null,r=null;i.on.getInspectorState(s=>{if(s.inspectorId===tg){const[o]=e.scene.value.getObjectsByProperty("uuid",s.nodeId);if(!o)return;if(r&&t&&t.parent&&r.remove(t),o.isMesh){const l=yye(o);o.add(l),t=l,r=o}s.state={object:[{key:"uuid",editable:!0,value:o.uuid},{key:"name",editable:!0,value:o.name},{key:"type",editable:!0,value:o.type},{key:"position",editable:!0,value:o.position},{key:"rotation",editable:!0,value:o.rotation},{key:"scale",editable:!0,value:o.scale},{key:"geometry",value:o.geometry},{key:"material",value:o.material},{key:"color",editable:!0,value:o.color},{key:"intensity",editable:!0,value:o.intensity},{key:"castShadow",editable:!0,value:o.castShadow},{key:"receiveShadow",editable:!0,value:o.receiveShadow},{key:"frustumCulled",editable:!0,value:o.frustumCulled},{key:"matrixAutoUpdate",editable:!0,value:o.matrixAutoUpdate},{key:"matrixWorldNeedsUpdate",editable:!0,value:o.matrixWorldNeedsUpdate},{key:"matrixWorld",value:o.matrixWorld},{key:"visible",editable:!0,value:o.visible}]}}}),i.on.editInspectorState(s=>{s.inspectorId===tg&&vye(e.scene.value,s.nodeId,s.path,s.state.value)})})}const Wye=["data-scene","data-tres"],kP=ec({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},disableRender:{type:Boolean,default:void 0},context:{},precision:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},logarithmicDepthBuffer:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0}},setup(n,{expose:e}){var i;const t=n,r=_E(),{logWarning:s}=Qw(),o=ot(),l=Fn(new bp),{resume:c}=_d(),u=(i=Mo())==null?void 0:i.appContext.app,d=x=>ec({setup(){var b;const S=(b=Mo())==null?void 0:b.appContext;return S&&(S.app=u),H0("useTres",x),H0("extend",SP),typeof window<"u"&&Xye(S.app,x),()=>eO(hn,null,r!=null&&r.default?r.default():[])}}),f=x=>{const b=d(x);Aye(eO(b),l.value)},m=(x,b=!1)=>{l.value.children=[],b&&(x.renderer.value.dispose(),x.renderer.value.renderLists.dispose(),x.renderer.value.forceContextLoss()),f(x),c()},g=gn(()=>t.disableRender),y=Fn(null);return e({context:y,dispose:()=>m(y.value,!0)}),jn(()=>{const x=o;y.value=Eye({scene:l.value,canvas:x,windowSize:t.windowSize,disableRender:g,rendererOptions:t}),kye({scene:l.value,contextParts:y.value});const{registerCamera:b,camera:S,cameras:_,deregisterCamera:O}=y.value;f(y.value);const k=()=>{const M=new en(45,window.innerWidth/window.innerHeight,.1,1e3);M.position.set(3,3,3),M.lookAt(0,0,0),b(M);const E=Gl(()=>{_.value.length>=2&&(M.removeFromParent(),O(M),E==null||E())})};Fi(()=>t.camera,(M,E)=>{M&&b(M),E&&(E.removeFromParent(),O(E))},{immediate:!0}),S.value||(s("No camera found. Creating a default perspective camera. To have full control over a camera, please add one to the scene."),k())}),(x,b)=>(ai(),on("canvas",{ref_key:"canvas",ref:o,"data-scene":l.value.uuid,class:Lp(x.$attrs.class),"data-tres":`tresjs ${oi(nye).version}`,style:Ah({display:"block",width:"100%",height:"100%",position:x.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...x.$attrs.style})},null,14,Wye))}}),Qye={install(n){n.component("TresCanvas",kP)}};/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function Nn(n){return n==null}function TP(n){return n!==null&&typeof n=="object"}function TT(n){return n!==null&&typeof n=="object"}function Hye(n,e){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==e[i])return!1;return!0}function ld(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((t,r)=>{const s=n[r],o=e[r];return TT(s)&&TT(o)?Object.assign(Object.assign({},t),{[r]:ld(s,o)}):Object.assign(Object.assign({},t),{[r]:r in e?o:s})},{})}function Gye(n){return TP(n)?"target"in n:!1}const Yye={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Oo{static alreadyDisposed(){return new Oo({type:"alreadydisposed"})}static notBindable(){return new Oo({type:"notbindable"})}static notCompatible(e,i){return new Oo({type:"notcompatible",context:{id:`${e}.${i}`}})}static propertyNotFound(e){return new Oo({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Oo({type:"shouldneverhappen"})}constructor(e){var i;this.message=(i=Yye[e.type](e.context))!==null&&i!==void 0?i:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class dO{constructor(e,i){this.obj_=e,this.key=i}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,i){const t=this.read();if(!dO.isBindable(t))throw Oo.notBindable();if(!(e in t))throw Oo.propertyNotFound(e);t[e]=i}}class Eo{constructor(){this.observers_={}}on(e,i,t){var r;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:i,key:(r=t==null?void 0:t.key)!==null&&r!==void 0?r:i}),this}off(e,i){const t=this.observers_[e];return t&&(this.observers_[e]=t.filter(r=>r.key!==i)),this}emit(e,i){const t=this.observers_[e];t&&t.forEach(r=>{r.handler(i)})}}class jye{constructor(e,i){var t;this.constraint_=i==null?void 0:i.constraint,this.equals_=(t=i==null?void 0:i.equals)!==null&&t!==void 0?t:(r,s)=>r===s,this.emitter=new Eo,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,i){const t=i??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,r)&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:t,previousRawValue:s,rawValue:r,sender:this}))}}class qye{constructor(e){this.emitter=new Eo,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,i){const t=i??{forceEmit:!1,last:!0},r=this.value_;r===e&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:t,previousRawValue:r,rawValue:this.value_,sender:this}))}}class Zye{constructor(e){this.emitter=new Eo,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Er(n,e){const i=e==null?void 0:e.constraint,t=e==null?void 0:e.equals;return!i&&!t?new qye(n):new jye(n,e)}function Kye(n){return[new Zye(n),(e,i)=>{n.setRawValue(e,i)}]}class Gi{constructor(e){this.emitter=new Eo,this.valMap_=e;for(const i in this.valMap_)this.valMap_[i].emitter.on("change",()=>{this.emitter.emit("change",{key:i,sender:this})})}static createCore(e){return Object.keys(e).reduce((t,r)=>Object.assign(t,{[r]:Er(e[r])}),{})}static fromObject(e){const i=this.createCore(e);return new Gi(i)}get(e){return this.valMap_[e].rawValue}set(e,i){this.valMap_[e].rawValue=i}value(e){return this.valMap_[e]}}class Hw{constructor(e){this.values=Gi.fromObject({max:e.max,min:e.min})}constrain(e){const i=this.values.get("max"),t=this.values.get("min");return Math.min(Math.max(e,t),i)}}class Jye{constructor(e){this.values=Gi.fromObject({max:e.max,min:e.min})}constrain(e){const i=this.values.get("max"),t=this.values.get("min");let r=e;return Nn(t)||(r=Math.max(r,t)),Nn(i)||(r=Math.min(r,i)),r}}class e1e{constructor(e,i=0){this.step=e,this.origin=i}constrain(e){const i=this.origin%this.step,t=Math.round((e-i)/this.step);return i+t*this.step}}class t1e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const i1e={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};class n1e{constructor(e,i,t){this.left=i,this.operator=e,this.right=t}evaluate(){const e=i1e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const r1e={"+":n=>n,"-":n=>-n,"~":n=>~n};class s1e{constructor(e,i){this.operator=e,this.expression=i}evaluate(){const e=r1e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function MP(n){return(e,i)=>{for(let t=0;t<n.length;t++){const r=n[t](e,i);if(r!=="")return r}return""}}function hv(n,e){var i;const t=n.substr(e).match(/^\s+/);return(i=t&&t[0])!==null&&i!==void 0?i:""}function o1e(n,e){const i=n.substr(e,1);return i.match(/^[1-9]$/)?i:""}function uv(n,e){var i;const t=n.substr(e).match(/^[0-9]+/);return(i=t&&t[0])!==null&&i!==void 0?i:""}function a1e(n,e){const i=uv(n,e);if(i!=="")return i;const t=n.substr(e,1);if(e+=1,t!=="-"&&t!=="+")return"";const r=uv(n,e);return r===""?"":t+r}function EP(n,e){const i=n.substr(e,1);if(e+=1,i.toLowerCase()!=="e")return"";const t=a1e(n,e);return t===""?"":i+t}function Ez(n,e){const i=n.substr(e,1);if(i==="0")return i;const t=o1e(n,e);return e+=t.length,t===""?"":t+uv(n,e)}function l1e(n,e){const i=Ez(n,e);if(e+=i.length,i==="")return"";const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const r=uv(n,e);return e+=r.length,i+t+r+EP(n,e)}function c1e(n,e){const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const t=uv(n,e);return e+=t.length,t===""?"":i+t+EP(n,e)}function h1e(n,e){const i=Ez(n,e);return e+=i.length,i===""?"":i+EP(n,e)}const u1e=MP([l1e,c1e,h1e]);function d1e(n,e){var i;const t=n.substr(e).match(/^[01]+/);return(i=t&&t[0])!==null&&i!==void 0?i:""}function f1e(n,e){const i=n.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0b")return"";const t=d1e(n,e);return t===""?"":i+t}function p1e(n,e){var i;const t=n.substr(e).match(/^[0-7]+/);return(i=t&&t[0])!==null&&i!==void 0?i:""}function m1e(n,e){const i=n.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0o")return"";const t=p1e(n,e);return t===""?"":i+t}function g1e(n,e){var i;const t=n.substr(e).match(/^[0-9a-f]+/i);return(i=t&&t[0])!==null&&i!==void 0?i:""}function v1e(n,e){const i=n.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0x")return"";const t=g1e(n,e);return t===""?"":i+t}const y1e=MP([f1e,m1e,v1e]),b1e=MP([y1e,u1e]);function x1e(n,e){const i=b1e(n,e);return e+=i.length,i===""?null:{evaluable:new t1e(i),cursor:e}}function O1e(n,e){const i=n.substr(e,1);if(e+=i.length,i!=="(")return null;const t=Az(n,e);if(!t)return null;e=t.cursor,e+=hv(n,e).length;const r=n.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:t.evaluable,cursor:e}}function w1e(n,e){var i;return(i=x1e(n,e))!==null&&i!==void 0?i:O1e(n,e)}function Pz(n,e){const i=w1e(n,e);if(i)return i;const t=n.substr(e,1);if(e+=t.length,t!=="+"&&t!=="-"&&t!=="~")return null;const r=Pz(n,e);return r?(e=r.cursor,{cursor:e,evaluable:new s1e(t,r.evaluable)}):null}function _1e(n,e,i){i+=hv(e,i).length;const t=n.filter(r=>e.startsWith(r,i))[0];return t?(i+=t.length,i+=hv(e,i).length,{cursor:i,operator:t}):null}function S1e(n,e){return(i,t)=>{const r=n(i,t);if(!r)return null;t=r.cursor;let s=r.evaluable;for(;;){const o=_1e(e,i,t);if(!o)break;t=o.cursor;const l=n(i,t);if(!l)return null;t=l.cursor,s=new n1e(o.operator,s,l.evaluable)}return s?{cursor:t,evaluable:s}:null}}const C1e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>S1e(n,e),Pz);function Az(n,e){return e+=hv(n,e).length,C1e(n,e)}function k1e(n){const e=Az(n,0);return!e||e.cursor+hv(n,e.cursor).length!==n.length?null:e.evaluable}function _h(n){var e;const i=k1e(n);return(e=i==null?void 0:i.evaluate())!==null&&e!==void 0?e:null}function Rz(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=_h(n);if(!Nn(e))return e}return 0}function Ks(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function Zi(n,e,i,t,r){const s=(n-e)/(i-e);return t+s*(r-t)}function yD(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function mr(n,e,i){return Math.min(Math.max(n,e),i)}function Iz(n,e){return(n%e+e)%e}function T1e(n,e){return Nn(n.step)?Math.max(yD(e),2):yD(n.step)}function Dz(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function M1e(n,e){var i;const t=Math.abs((i=n.step)!==null&&i!==void 0?i:e);return t===0?.1:Math.pow(10,Math.floor(Math.log10(t))-1)}function Nz(n,e){return Nn(n.step)?null:new e1e(n.step,e)}function $z(n){return!Nn(n.max)&&!Nn(n.min)?new Hw({max:n.max,min:n.min}):!Nn(n.max)||!Nn(n.min)?new Jye({max:n.max,min:n.min}):null}function Vz(n,e){var i,t,r;return{formatter:(i=n.format)!==null&&i!==void 0?i:Ks(T1e(n,e)),keyScale:(t=n.keyScale)!==null&&t!==void 0?t:Dz(n),pointerScale:(r=n.pointerScale)!==null&&r!==void 0?r:M1e(n,e)}}function Lz(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function PP(n){return{constraint:n.constraint,textProps:Gi.fromObject(Vz(n.params,n.initialValue))}}class AP{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class Gw{constructor(e){this.target=e}}class Bz extends Gw{constructor(e,i,t){super(e),this.value=i,this.last=t??!0}}class E1e extends Gw{constructor(e,i){super(e),this.expanded=i}}class P1e extends Gw{constructor(e,i){super(e),this.index=i}}class A1e extends Gw{constructor(e,i){super(e),this.native=i}}class RP extends AP{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Eo,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,i){const t=i.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const i=this.controller.value;this.emitter_.emit("change",new Bz(this,i.binding.target.read(),e.options.last))}}function R1e(n,e){const t=Object.keys(e).reduce((r,s)=>{if(r===void 0)return;const o=e[s],l=o(n[s]);return l.succeeded?Object.assign(Object.assign({},r),{[s]:l.value}):void 0},{});return t}function I1e(n,e){return n.reduce((i,t)=>{if(i===void 0)return;const r=e(t);if(!(!r.succeeded||r.value===void 0))return[...i,r.value]},[])}function D1e(n){return n===null?!1:typeof n=="object"}function Rl(n){return e=>i=>{if(!e&&i===void 0)return{succeeded:!1,value:void 0};if(e&&i===void 0)return{succeeded:!0,value:void 0};const t=n(i);return t!==void 0?{succeeded:!0,value:t}:{succeeded:!1,value:void 0}}}function bD(n){return{custom:e=>Rl(e)(n),boolean:Rl(e=>typeof e=="boolean"?e:void 0)(n),number:Rl(e=>typeof e=="number"?e:void 0)(n),string:Rl(e=>typeof e=="string"?e:void 0)(n),function:Rl(e=>typeof e=="function"?e:void 0)(n),constant:e=>Rl(i=>i===e?e:void 0)(n),raw:Rl(e=>e)(n),object:e=>Rl(i=>{if(D1e(i))return R1e(i,e)})(n),array:e=>Rl(i=>{if(Array.isArray(i))return I1e(i,e)})(n)}}const MT={optional:bD(!0),required:bD(!1)};function ss(n,e){const i=e(MT),t=MT.required.object(i)(n);return t.succeeded?t.value:void 0}function dl(n,e,i,t){if(e&&!e(n))return!1;const r=ss(n,i);return r?t(r):!1}function fl(n,e){var i;return ld((i=n==null?void 0:n())!==null&&i!==void 0?i:{},e)}function Tx(n){return"value"in n}function N1e(n){if(!TP(n)||!("binding"in n))return!1;const e=n.binding;return Gye(e)}const Ja="http://www.w3.org/2000/svg";function fO(n){n.offsetHeight}function $1e(n,e){const i=n.style.transition;n.style.transition="none",e(),n.style.transition=i}function IP(n){return n.ontouchstart!==void 0}function V1e(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const L1e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Yw(n,e){const i=n.createElementNS(Ja,"svg");return i.innerHTML=L1e[e],i}function Uz(n,e,i){n.insertBefore(e,n.children[i])}function DP(n){n.parentElement&&n.parentElement.removeChild(n)}function Fz(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function B1e(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function zz(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function ql(n,e){n.emitter.on("change",i=>{e(i.rawValue)}),e(n.rawValue)}function ol(n,e,i){ql(n.value(e),i)}const U1e="tp";function Yi(n){return(i,t)=>[U1e,"-",n,"v",i?`_${i}`:"",t?`-${t}`:""].join("")}const ig=Yi("lbl");function F1e(n,e){const i=n.createDocumentFragment();return e.split(`
`).map(r=>n.createTextNode(r)).forEach((r,s)=>{s>0&&i.appendChild(n.createElement("br")),i.appendChild(r)}),i}class z1e{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(ig()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(ig("l")),ol(i.props,"label",s=>{Nn(s)?this.element.classList.add(ig(void 0,"nol")):(this.element.classList.remove(ig(void 0,"nol")),B1e(t),t.appendChild(F1e(e,s)))}),this.element.appendChild(t),this.labelElement=t;const r=e.createElement("div");r.classList.add(ig("v")),this.element.appendChild(r),this.valueElement=r}}class X1e{constructor(e,i){this.props=i.props,this.valueController=i.valueController,this.viewProps=i.valueController.viewProps,this.view=new z1e(e,{props:i.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return dl(e,null,i=>({label:i.optional.string}),i=>(this.props.set("label",i.label),!0))}exportProps(){return fl(null,{label:this.props.get("label")})}}function W1e(){return["veryfirst","first","last","verylast"]}const xD=Yi(""),OD={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Xz{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const i=this.view.element;this.blade.value("positions").emitter.on("change",()=>{W1e().forEach(t=>{i.classList.remove(xD(void 0,OD[t]))}),this.blade.get("positions").forEach(t=>{i.classList.add(xD(void 0,OD[t]))})}),this.viewProps.handleDispose(()=>{DP(i)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return dl(e,null,i=>({disabled:i.required.boolean,hidden:i.required.boolean}),i=>(this.viewProps.importState(i),!0))}exportState(){return fl(null,Object.assign({},this.viewProps.exportState()))}}class Q1e extends AP{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,i){const t=i.bind(this);return this.controller.buttonController.emitter.on(e,s=>{t(new A1e(this,s.nativeEvent))}),this}off(e,i){return this.controller.buttonController.emitter.off(e,i),this}}function H1e(n,e,i){i?n.classList.add(e):n.classList.remove(e)}function Hp(n,e){return i=>{H1e(n,e,i)}}function NP(n,e){ql(n,i=>{e.textContent=i??""})}const LC=Yi("btn");class G1e{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(LC()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("button");t.classList.add(LC("b")),i.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const r=e.createElement("div");r.classList.add(LC("t")),NP(i.props.value("title"),r),this.buttonElement.appendChild(r)}}class Y1e{constructor(e,i){this.emitter=new Eo,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new G1e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return dl(e,null,i=>({title:i.optional.string}),i=>(this.props.set("title",i.title),!0))}exportProps(){return fl(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class wD extends Xz{constructor(e,i){const t=new Y1e(e,{props:i.buttonProps,viewProps:i.viewProps}),r=new X1e(e,{blade:i.blade,props:i.labelProps,valueController:t});super({blade:i.blade,view:r.view,viewProps:i.viewProps}),this.buttonController=t,this.labelController=r}importState(e){return dl(e,i=>super.importState(i)&&this.buttonController.importProps(i)&&this.labelController.importProps(i),()=>({}),()=>!0)}exportState(){return fl(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Wz{constructor(e){const[i,t]=e.split("-"),r=i.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=t??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const j1e=new Wz("2.0.3");function Ms(n){return Object.assign({core:j1e},n)}Ms({id:"button",type:"blade",accept(n){const e=ss(n,i=>({title:i.required.string,view:i.required.constant("button"),label:i.optional.string}));return e?{params:e}:null},controller(n){return new wD(n.document,{blade:n.blade,buttonProps:Gi.fromObject({title:n.params.title}),labelProps:Gi.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof wD?new Q1e(n.controller):null}});function q1e(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Z1e(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function K1e(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function J1e(n){return TP(n)?"refresh"in n&&typeof n.refresh=="function":!1}function ebe(n,e){if(!dO.isBindable(n))throw Oo.notBindable();return new dO(n,e)}class tbe{constructor(e,i){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Eo,this.pool_=i,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,i,t){const r=t??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,ebe(e,i),r),l=this.pool_.createBindingApi(o);return this.add(l,r.index)}addFolder(e){return Z1e(this,e)}addButton(e){return q1e(this,e)}addTab(e){return K1e(this,e)}add(e,i){const t=e.controller;return this.controller_.rack.add(t,i),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const i=this.controller_.element.ownerDocument,t=this.pool_.createBlade(i,e),r=this.pool_.createApi(t);return this.add(r,e.index)}on(e,i){const t=i.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}refresh(){this.children.forEach(e=>{J1e(e)&&e.refresh()})}onRackValueChange_(e){const i=e.bladeController,t=this.pool_.createApi(i),r=N1e(i.value)?i.value.binding:null;this.emitter_.emit("change",new Bz(t,r?r.target.read():i.value.rawValue,e.options.last))}}class $P extends AP{constructor(e,i){super(e),this.rackApi_=new tbe(e.rackController,i)}refresh(){this.rackApi_.refresh()}}class VP extends Xz{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return dl(e,i=>super.importState(i),i=>({children:i.required.array(i.required.raw)}),i=>this.rackController.rack.children.every((t,r)=>t.importState(i.children[r])))}exportState(){return fl(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function ET(n){return"rackController"in n}class ibe{constructor(e){this.emitter=new Eo,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const i of this.allItems())if(e(i))return i;return null}includes(e){return this.cache_.has(e)}add(e,i){if(this.includes(e))throw Oo.shouldNeverHappen();const t=i!==void 0?i:this.items_.length;this.items_.splice(t,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:t,item:e,root:this,target:this})}remove(e){const i=this.items_.indexOf(e);if(i<0)return;this.items_.splice(i,1),this.cache_.delete(e);const t=this.extract_(e);t&&(t.allItems().forEach(r=>{this.cache_.delete(r)}),t.emitter.off("add",this.onSubListAdd_),t.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:i,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function nbe(n,e){for(let i=0;i<n.length;i++){const t=n[i];if(Tx(t)&&t.value===e)return t}return null}function rbe(n){return ET(n)?n.rackController.rack.bcSet_:null}class sbe{constructor(e){var i,t;this.emitter=new Eo,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(i=e.blade)!==null&&i!==void 0?i:null,(t=this.blade_)===null||t===void 0||t.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new ibe(rbe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,i){var t;(t=e.parent)===null||t===void 0||t.remove(e),e.parent=this,this.bcSet_.add(e,i)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const i=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:i,sender:this}),!i)return;const t=e.item;if(t.viewProps.emitter.on("change",this.onChildViewPropsChange_),t.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),t.viewProps.handleDispose(this.onChildDispose_),Tx(t))t.value.emitter.on("change",this.onChildValueChange_);else if(ET(t)){const r=t.rackController.rack;if(r){const s=r.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const i=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:i,sender:this}),!i)return;const t=e.item;if(Tx(t))t.value.emitter.off("change",this.onChildValueChange_);else if(ET(t)){const r=t.rackController.rack;if(r){const s=r.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),i=e[0],t=e[e.length-1];this.bcSet_.items.forEach(r=>{const s=[];r===i&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),r===t&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),r.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(i=>i.viewProps.get("disposed")).forEach(i=>{this.bcSet_.remove(i)})}onChildValueChange_(e){const i=nbe(this.find(Tx),e.sender);if(!i)throw Oo.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:i,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class LP{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const i=new sbe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});i.emitter.on("add",this.onRackAdd_),i.emitter.on("remove",this.onRackRemove_),this.rack=i,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Uz(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&DP(e.bladeController.view.element)}}function Qz(){return new Gi({positions:Er([],{equals:Hye})})}class ry extends Gi{constructor(e){super(e)}static create(e){const i={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},t=Gi.createCore(i);return new ry(t)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Nn(e)?`${e}px`:"auto"}bindExpandedClass(e,i){const t=()=>{this.styleExpanded?e.classList.add(i):e.classList.remove(i)};ol(this,"expanded",t),ol(this,"temporaryExpanded",t)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function obe(n,e){let i=0;return $1e(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),fO(e),i=e.clientHeight,n.set("temporaryExpanded",null),fO(e)}),i}function _D(n,e){e.style.height=n.styleHeight}function BP(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),Nn(n.get("expandedHeight"))){const i=obe(n,e);i>0&&n.set("expandedHeight",i)}n.set("shouldFixHeight",!0),fO(e)}),n.emitter.on("change",()=>{_D(n,e)}),_D(n,e),e.addEventListener("transitionend",i=>{i.propertyName==="height"&&n.cleanUpTransition()})}class abe extends $P{constructor(e,i){super(e,i),this.emitter_=new Eo,this.controller.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",new E1e(this,t.sender.rawValue))}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,i,t){return this.rackApi_.addBinding(e,i,t)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,i){return this.rackApi_.add(e,i)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,i){const t=i.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}}const Hz=Yi("cnt");class lbe{constructor(e,i){var t;this.className_=Yi((t=i.viewName)!==null&&t!==void 0?t:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Hz()),i.viewProps.bindClassModifiers(this.element),this.foldable_=i.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),ol(this.foldable_,"completed",Hp(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),ol(i.props,"title",u=>{Nn(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),i.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),NP(i.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const c=e.createElement("div");c.classList.add(this.className_("c")),this.element.appendChild(c),this.containerElement=c}}class SD extends VP{constructor(e,i){var t;const r=ry.create((t=i.expanded)!==null&&t!==void 0?t:!0),s=new lbe(e,{foldable:r,props:i.props,viewName:i.root?"rot":void 0,viewProps:i.viewProps});super(Object.assign(Object.assign({},i),{rackController:new LP({blade:i.blade,element:s.containerElement,root:i.root,viewProps:i.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=i.props,this.foldable=r,BP(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return dl(e,i=>super.importState(i),i=>({expanded:i.required.boolean,title:i.optional.string}),i=>(this.foldable.set("expanded",i.expanded),this.props.set("title",i.title),!0))}exportState(){return fl(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Ms({id:"folder",type:"blade",accept(n){const e=ss(n,i=>({title:i.required.string,view:i.required.constant("folder"),expanded:i.optional.boolean}));return e?{params:e}:null},controller(n){return new SD(n.document,{blade:n.blade,expanded:n.params.expanded,props:Gi.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof SD?new abe(n.controller,n.pool):null}});const cbe=Yi("");function CD(n,e){return Hp(n,cbe(void 0,e))}class sy extends Gi{constructor(e){var i;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Kye(Er(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(i=this.get("parent"))===null||i===void 0||i.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var i,t,r;const s=e??{};return new sy(Gi.createCore({disabled:(i=s.disabled)!==null&&i!==void 0?i:!1,disposed:!1,hidden:(t=s.hidden)!==null&&t!==void 0?t:!1,parent:(r=s.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){ql(this.globalDisabled_,CD(e,"disabled")),ol(this,"hidden",CD(e,"hidden"))}bindDisabled(e){ql(this.globalDisabled_,i=>{e.disabled=i})}bindTabIndex(e){ql(this.globalDisabled_,i=>{e.tabIndex=i?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",i=>{i&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var i;const t=e.previousRawValue;t==null||t.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(i=this.get("parent"))===null||i===void 0||i.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const kD=Yi("tbp");class hbe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(kD()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(kD("c")),this.element.appendChild(t),this.containerElement=t}}const ng=Yi("tbi");class ube{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(ng()),i.viewProps.bindClassModifiers(this.element),ol(i.props,"selected",s=>{s?this.element.classList.add(ng(void 0,"sel")):this.element.classList.remove(ng(void 0,"sel"))});const t=e.createElement("button");t.classList.add(ng("b")),i.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const r=e.createElement("div");r.classList.add(ng("t")),NP(i.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class dbe{constructor(e,i){this.emitter=new Eo,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new ube(e,{props:i.props,viewProps:i.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class PT extends VP{constructor(e,i){const t=new hbe(e,{viewProps:i.viewProps});super(Object.assign(Object.assign({},i),{rackController:new LP({blade:i.blade,element:t.containerElement,viewProps:i.viewProps}),view:t})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new dbe(e,{props:i.itemProps,viewProps:sy.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=i.props,ol(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(e){return dl(e,i=>super.importState(i),i=>({selected:i.required.boolean,title:i.required.string}),i=>(this.ic_.props.set("selected",i.selected),this.ic_.props.set("title",i.title),!0))}exportState(){return fl(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class fbe extends $P{constructor(e,i){super(e,i),this.emitter_=new Eo,this.onSelect_=this.onSelect_.bind(this),this.pool_=i,this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const i=this.controller.view.element.ownerDocument,t=new PT(i,{blade:Qz(),itemProps:Gi.fromObject({selected:!1,title:e.title}),props:Gi.fromObject({selected:!1}),viewProps:sy.create()}),r=this.pool_.createApi(t);return this.rackApi_.add(r,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,i){const t=i.bind(this);return this.emitter_.on(e,r=>{t(r)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}onSelect_(e){this.emitter_.emit("select",new P1e(this,e.rawValue))}}class pbe extends $P{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,i){this.rackApi_.add(e,i)}remove(e){this.rackApi_.remove(e)}addBinding(e,i,t){return this.rackApi_.addBinding(e,i,t)}addBlade(e){return this.rackApi_.addBlade(e)}}const TD=-1;class mbe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Er(!0),this.selectedIndex=Er(TD),this.items_=[]}add(e,i){const t=i??this.items_.length;this.items_.splice(t,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const i=this.items_.indexOf(e);i<0||(this.items_.splice(i,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=TD,this.empty.rawValue=!0;return}const e=this.items_.findIndex(i=>i.rawValue);e<0?(this.items_.forEach((i,t)=>{i.rawValue=t===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((i,t)=>{i.rawValue=t===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const i=this.items_.findIndex(t=>t===e.sender);this.items_.forEach((t,r)=>{t.rawValue=r===i}),this.selectedIndex.rawValue=i}else this.keepSelection_()}}const rg=Yi("tab");class gbe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(rg(),Hz()),i.viewProps.bindClassModifiers(this.element),ql(i.empty,Hp(this.element,rg(void 0,"nop")));const t=e.createElement("div");t.classList.add(rg("t")),this.element.appendChild(t),this.itemsElement=t;const r=e.createElement("div");r.classList.add(rg("i")),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(rg("c")),this.element.appendChild(s),this.contentsElement=s}}class MD extends VP{constructor(e,i){const t=new mbe,r=new gbe(e,{empty:t.empty,viewProps:i.viewProps});super({blade:i.blade,rackController:new LP({blade:i.blade,element:r.contentsElement,viewProps:i.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=t}add(e,i){this.rackController.rack.add(e,i)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const i=e.bladeController;Uz(this.view.itemsElement,i.itemController.view.element,e.index),i.itemController.viewProps.set("parent",this.viewProps),this.tab.add(i.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const i=e.bladeController;DP(i.itemController.view.element),i.itemController.viewProps.set("parent",null),this.tab.remove(i.props.value("selected"))}}Ms({id:"tab",type:"blade",accept(n){const e=ss(n,i=>({pages:i.required.array(i.required.object({title:i.required.string})),view:i.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new MD(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(i=>{const t=new PT(n.document,{blade:Qz(),itemProps:Gi.fromObject({selected:!1,title:i.title}),props:Gi.fromObject({selected:!1}),viewProps:sy.create()});e.add(t)}),e},api(n){return n.controller instanceof MD?new fbe(n.controller,n.pool):n.controller instanceof PT?new pbe(n.controller,n.pool):null}});class UP extends RP{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class oy{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((i,t)=>t.constrain(i),e)}}function pO(n,e){if(n instanceof e)return n;if(n instanceof oy){const i=n.constraints.reduce((t,r)=>t||(r instanceof e?r:null),null);if(i)return i}return null}class jw{constructor(e){this.values=Gi.fromObject({options:e})}constrain(e){const i=this.values.get("options");return i.length===0||i.filter(r=>r.value===e).length>0?e:i[0].value}}function qw(n){var e;const i=MT;if(Array.isArray(n))return(e=ss({items:n},t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return i.required.raw(n).value}function Gz(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(i=>{e.push({text:i,value:n[i]})}),e}function FP(n){return Nn(n)?null:new jw(Gz(n))}const BC=Yi("lst");class vbe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.props_=i.props,this.element=e.createElement("div"),this.element.classList.add(BC()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("select");t.classList.add(BC("s")),i.viewProps.bindDisabled(t),this.element.appendChild(t),this.selectElement=t;const r=e.createElement("div");r.classList.add(BC("m")),r.appendChild(Yw(e,"dropdown")),this.element.appendChild(r),i.value.emitter.on("change",this.onValueChange_),this.value_=i.value,ol(this.props_,"options",s=>{Fz(this.selectElement),s.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(i=>i.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Cp{constructor(e,i){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new vbe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const i=e.currentTarget;this.value.rawValue=this.props.get("options")[i.selectedIndex].value}importProps(e){return dl(e,null,i=>({options:i.required.custom(qw)}),i=>(this.props.set("options",Gz(i.options)),!0))}exportProps(){return fl(null,{options:this.props.get("options")})}}const ED=Yi("pop");class ybe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(ED()),i.viewProps.bindClassModifiers(this.element),ql(i.shows,Hp(this.element,ED(void 0,"v")))}}class Yz{constructor(e,i){this.shows=Er(!1),this.viewProps=i.viewProps,this.view=new ybe(e,{shows:this.shows,viewProps:this.viewProps})}}const PD=Yi("txt");let bbe=class{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(PD()),i.viewProps.bindClassModifiers(this.element),this.props_=i.props,this.props_.emitter.on("change",this.onChange_);const t=e.createElement("input");t.classList.add(PD("i")),t.type="text",i.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,i.value.emitter.on("change",this.onChange_),this.value_=i.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}};class zP{constructor(e,i){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=i.parser,this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new bbe(e,{props:i.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget.value,r=this.parser_(t);Nn(r)||(this.value.rawValue=r),this.view.refresh()}}function xbe(n){return String(n)}function jz(n){return n==="false"?!1:!!n}function AD(n){return xbe(n)}function Obe(n){return e=>n.reduce((i,t)=>i!==null?i:t(e),null)}const wbe=Ks(0);function mO(n){return wbe(n)+"%"}function qz(n){return String(n)}function AT(n){return n}function Gp({primary:n,secondary:e,forward:i,backward:t}){let r=!1;function s(o){r||(r=!0,o(),r=!1)}n.emitter.on("change",o=>{s(()=>{e.setRawValue(i(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{n.setRawValue(t(n.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(i(n.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(i(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ys(n,e){const i=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+i:e.downKey?-i:0}function dv(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function oc(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function _be(n){return n==="ArrowUp"||n==="ArrowDown"}function Zz(n){return _be(n)||n==="ArrowLeft"||n==="ArrowRight"}function UC(n,e){var i,t;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:n.pageX-(((i=r&&r.scrollX)!==null&&i!==void 0?i:0)+s.left),y:n.pageY-(((t=r&&r.scrollY)!==null&&t!==void 0?t:0)+s.top)}}class Sd{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Eo,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const i=this.elem_.getBoundingClientRect();return{bounds:{width:i.width,height:i.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var i;e.preventDefault(),(i=e.currentTarget)===null||i===void 0||i.focus();const t=this.elem_.ownerDocument;t.addEventListener("mousemove",this.onDocumentMouseMove_),t.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(UC(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(UC(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const i=this.elem_.ownerDocument;i.removeEventListener("mousemove",this.onDocumentMouseMove_),i.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(UC(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const i=e.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-t.left,y:i.clientY-t.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=i}onTouchMove_(e){const i=e.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-t.left,y:i.clientY-t.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=i}onTouchEnd_(e){var i;const t=(i=e.targetTouches.item(0))!==null&&i!==void 0?i:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Vo=Yi("txt");class Sbe{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Vo(),Vo(void 0,"num")),i.arrayPosition&&this.element.classList.add(Vo(void 0,i.arrayPosition)),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("input");t.classList.add(Vo("i")),t.type="text",i.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=i.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Vo()),this.inputElement.classList.add(Vo("i"));const r=e.createElement("div");r.classList.add(Vo("k")),this.element.appendChild(r),this.knobElement=r;const s=e.createElementNS(Ja,"svg");s.classList.add(Vo("g")),this.knobElement.appendChild(s);const o=e.createElementNS(Ja,"path");o.classList.add(Vo("gb")),s.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(Ja,"path");l.classList.add(Vo("gh")),s.appendChild(l),this.guideHeadElem_=l;const c=e.createElement("div");c.classList.add(Yi("tt")()),this.knobElement.appendChild(c),this.tooltipElem_=c,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Vo(void 0,"drg"));return}this.element.classList.add(Vo(void 0,"drg"));const i=e.rawValue/this.props_.get("pointerScale"),t=i+(i>0?-1:i<0?1:0),r=mr(-t,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${t+r},0 L${t},4 L${t+r},8`,`M ${i},-1 L${i},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${i},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${i}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class ay{constructor(e,i){var t;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=i.parser,this.props=i.props,this.sliderProps_=(t=i.sliderProps)!==null&&t!==void 0?t:null,this.value=i.value,this.viewProps=i.viewProps,this.dragging_=Er(null),this.view=new Sbe(e,{arrayPosition:i.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new Sd(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var i,t;const r=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("min"),s=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("max");let o=e;return r!==void 0&&(o=Math.max(o,r)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const t=e.currentTarget.value,r=this.parser_(t);Nn(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(e){const i=Ys(this.props.get("keyScale"),dv(e));i!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+i),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ys(this.props.get("keyScale"),dv(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const i=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+i*this.props.get("pointerScale"))}onPointerMove_(e){const i=this.computeDraggingValue_(e.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const i=this.computeDraggingValue_(e.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const FC=Yi("sld");class Cbe{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(FC()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(FC("t")),i.viewProps.bindTabIndex(t),this.element.appendChild(t),this.trackElement=t;const r=e.createElement("div");r.classList.add(FC("k")),this.trackElement.appendChild(r),this.knobElement=r,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.update_()}update_(){const e=mr(Zi(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class kbe{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.props=i.props,this.view=new Cbe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sd(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){e.point&&this.value.setRawValue(Zi(mr(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),i)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=Ys(this.props.get("keyScale"),oc(e));i!==0&&this.value.setRawValue(this.value.rawValue+i,{forceEmit:!1,last:!1})}onKeyUp_(e){Ys(this.props.get("keyScale"),oc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const zC=Yi("sldtxt");class Tbe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(zC());const t=e.createElement("div");t.classList.add(zC("s")),this.sliderView_=i.sliderView,t.appendChild(this.sliderView_.element),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(zC("t")),this.textView_=i.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class RD{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.sliderC_=new kbe(e,{props:i.sliderProps,value:i.value,viewProps:this.viewProps}),this.textC_=new ay(e,{parser:i.parser,props:i.textProps,sliderProps:i.sliderProps,value:i.value,viewProps:i.viewProps}),this.view=new Tbe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return dl(e,null,i=>({max:i.required.number,min:i.required.number}),i=>{const t=this.sliderC_.props;return t.set("max",i.max),t.set("min",i.min),!0})}exportProps(){const e=this.sliderC_.props;return fl(null,{max:e.get("max"),min:e.get("min")})}}function Mbe(n){return{sliderProps:new Gi({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new Gi({formatter:Er(n.formatter),keyScale:n.keyScale,pointerScale:Er(n.pointerScale)})}}const Ebe={containerUnitSize:"cnt-usz"};function Kz(n){return`--${Ebe[n]}`}function fv(n){return Lz(n)}function oh(n){if(TT(n))return ss(n,fv)}function Wl(n,e){if(!n)return;const i=[],t=Nz(n,e);t&&i.push(t);const r=$z(n);return r&&i.push(r),new oy(i)}function Jz(n){if(n==="inline"||n==="popup")return n}function ly(n,e){n.write(e)}const Ob=Yi("ckb");class Pbe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ob()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("label");t.classList.add(Ob("l")),this.element.appendChild(t),this.labelElement=t;const r=e.createElement("input");r.classList.add(Ob("i")),r.type="checkbox",this.labelElement.appendChild(r),this.inputElement=r,i.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(Ob("w")),this.labelElement.appendChild(s);const o=Yw(e,"check");s.appendChild(o),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Abe{constructor(e,i){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new Pbe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const i=e.currentTarget;this.value.rawValue=i.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function Rbe(n){const e=[],i=FP(n.options);return i&&e.push(i),new oy(e)}Ms({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const i=ss(e,t=>({options:t.optional.custom(qw),readonly:t.optional.constant(!1)}));return i?{initialValue:n,params:i}:null},binding:{reader:n=>jz,constraint:n=>Rbe(n.params),writer:n=>ly},controller:n=>{const e=n.document,i=n.value,t=n.constraint,r=t&&pO(t,jw);return r?new Cp(e,{props:new Gi({options:r.values.value("options")}),value:i,viewProps:n.viewProps}):new Abe(e,{value:i,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof Cp?new UP(n.controller):null}});const vu=Yi("col");class Ibe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(vu()),i.foldable.bindExpandedClass(this.element,vu(void 0,"expanded")),ol(i.foldable,"completed",Hp(this.element,vu(void 0,"cpl")));const t=e.createElement("div");t.classList.add(vu("h")),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(vu("s")),t.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(vu("t")),t.appendChild(s),this.textElement=s,i.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(vu("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function Dbe(n,e,i){const t=mr(n/255,0,1),r=mr(e/255,0,1),s=mr(i/255,0,1),o=Math.max(t,r,s),l=Math.min(t,r,s),c=o-l;let u=0,d=0;const f=(l+o)/2;return c!==0&&(d=c/(1-Math.abs(o+l-1)),t===o?u=(r-s)/c:r===o?u=2+(s-t)/c:u=4+(t-r)/c,u=u/6+(u<0?1:0)),[u*360,d*100,f*100]}function Nbe(n,e,i){const t=(n%360+360)%360,r=mr(e/100,0,1),s=mr(i/100,0,1),o=(1-Math.abs(2*s-1))*r,l=o*(1-Math.abs(t/60%2-1)),c=s-o/2;let u,d,f;return t>=0&&t<60?[u,d,f]=[o,l,0]:t>=60&&t<120?[u,d,f]=[l,o,0]:t>=120&&t<180?[u,d,f]=[0,o,l]:t>=180&&t<240?[u,d,f]=[0,l,o]:t>=240&&t<300?[u,d,f]=[l,0,o]:[u,d,f]=[o,0,l],[(u+c)*255,(d+c)*255,(f+c)*255]}function $be(n,e,i){const t=mr(n/255,0,1),r=mr(e/255,0,1),s=mr(i/255,0,1),o=Math.max(t,r,s),l=Math.min(t,r,s),c=o-l;let u;c===0?u=0:o===t?u=60*(((r-s)/c%6+6)%6):o===r?u=60*((s-t)/c+2):u=60*((t-r)/c+4);const d=o===0?0:c/o,f=o;return[u,d*100,f*100]}function e9(n,e,i){const t=Iz(n,360),r=mr(e/100,0,1),s=mr(i/100,0,1),o=s*r,l=o*(1-Math.abs(t/60%2-1)),c=s-o;let u,d,f;return t>=0&&t<60?[u,d,f]=[o,l,0]:t>=60&&t<120?[u,d,f]=[l,o,0]:t>=120&&t<180?[u,d,f]=[0,o,l]:t>=180&&t<240?[u,d,f]=[0,l,o]:t>=240&&t<300?[u,d,f]=[l,0,o]:[u,d,f]=[o,0,l],[(u+c)*255,(d+c)*255,(f+c)*255]}function Vbe(n,e,i){const t=i+e*(100-Math.abs(2*i-100))/200;return[n,t!==0?e*(100-Math.abs(2*i-100))/t:0,i+e*(100-Math.abs(2*i-100))/(2*100)]}function Lbe(n,e,i){const t=100-Math.abs(i*(200-e)/100-100);return[n,t!==0?e*i/t:0,i*(200-e)/(2*100)]}function al(n){return[n[0],n[1],n[2]]}function Zw(n,e){return[n[0],n[1],n[2],e]}const Bbe={hsl:{hsl:(n,e,i)=>[n,e,i],hsv:Vbe,rgb:Nbe},hsv:{hsl:Lbe,hsv:(n,e,i)=>[n,e,i],rgb:e9},rgb:{hsl:Dbe,hsv:$be,rgb:(n,e,i)=>[n,e,i]}};function kp(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function Ube(n,e){return n===e?e:Iz(n,e)}function t9(n,e,i){var t;const r=kp(e,i);return[e==="rgb"?mr(n[0],0,r[0]):Ube(n[0],r[0]),mr(n[1],0,r[1]),mr(n[2],0,r[2]),mr((t=n[3])!==null&&t!==void 0?t:1,0,1)]}function ID(n,e,i,t){const r=kp(e,i),s=kp(e,t);return n.map((o,l)=>o/r[l]*s[l])}function i9(n,e,i){const t=ID(n,e.mode,e.type,"int"),r=Bbe[e.mode][i.mode](...t);return ID(r,i.mode,"int",i.type)}class Wi{static black(){return new Wi([0,0,0],"rgb")}constructor(e,i){this.type="int",this.mode=i,this.comps_=t9(e,i,this.type)}getComponents(e){return Zw(i9(al(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Wc=Yi("colp");class Fbe{constructor(e,i){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Wc()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(Wc("hsv"));const r=e.createElement("div");r.classList.add(Wc("sv")),this.svPaletteView_=i.svPaletteView,r.appendChild(this.svPaletteView_.element),t.appendChild(r);const s=e.createElement("div");s.classList.add(Wc("h")),this.hPaletteView_=i.hPaletteView,s.appendChild(this.hPaletteView_.element),t.appendChild(s),this.element.appendChild(t);const o=e.createElement("div");if(o.classList.add(Wc("rgb")),this.textsView_=i.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),i.alphaViews){this.alphaViews_={palette:i.alphaViews.palette,text:i.alphaViews.text};const l=e.createElement("div");l.classList.add(Wc("a"));const c=e.createElement("div");c.classList.add(Wc("ap")),c.appendChild(this.alphaViews_.palette.element),l.appendChild(c);const u=e.createElement("div");u.classList.add(Wc("at")),u.appendChild(this.alphaViews_.text.element),l.appendChild(u),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(i=>i.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function zbe(n){return n==="int"?"int":n==="float"?"float":void 0}function XP(n){return ss(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(zbe)}),expanded:e.optional.boolean,picker:e.optional.custom(Jz),readonly:e.optional.constant(!1)}))}function cd(n){return n?.1:1}function n9(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}class WP{constructor(e,i){this.type="float",this.mode=i,this.comps_=t9(e,i,this.type)}getComponents(e){return Zw(i9(al(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Xbe={int:(n,e)=>new Wi(n,e),float:(n,e)=>new WP(n,e)};function QP(n,e,i){return Xbe[i](n,e)}function Wbe(n){return n.type==="float"}function Qbe(n){return n.type==="int"}function Hbe(n){const e=n.getComponents(),i=kp(n.mode,"int");return new Wi([Math.round(Zi(e[0],0,1,0,i[0])),Math.round(Zi(e[1],0,1,0,i[1])),Math.round(Zi(e[2],0,1,0,i[2])),e[3]],n.mode)}function Gbe(n){const e=n.getComponents(),i=kp(n.mode,"int");return new WP([Zi(e[0],0,i[0],0,1),Zi(e[1],0,i[1],0,1),Zi(e[2],0,i[2],0,1),e[3]],n.mode)}function ws(n,e){if(n.type===e)return n;if(Qbe(n)&&e==="float")return Gbe(n);if(Wbe(n)&&e==="int")return Hbe(n);throw Oo.shouldNeverHappen()}function Ybe(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function Qo(n,e){const i=n.match(/^(.+)%$/);return Math.min(i?parseFloat(i[1])*.01*e:parseFloat(n),e)}const jbe={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function r9(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const i=parseFloat(e[1]),t=e[2];return jbe[t](i)}function s9(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Qo(e[1],255),Qo(e[2],255),Qo(e[3],255)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function qbe(n){const e=s9(n);return e?new Wi(e,"rgb"):null}function o9(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Qo(e[1],255),Qo(e[2],255),Qo(e[3],255),Qo(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function Zbe(n){const e=o9(n);return e?new Wi(e,"rgb"):null}function a9(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[r9(e[1]),Qo(e[2],100),Qo(e[3],100)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Kbe(n){const e=a9(n);return e?new Wi(e,"hsl"):null}function l9(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[r9(e[1]),Qo(e[2],100),Qo(e[3],100),Qo(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function Jbe(n){const e=l9(n);return e?new Wi(e,"hsl"):null}function c9(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const i=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function exe(n){const e=c9(n);return e?new Wi(e,"rgb"):null}function h9(n){const e=n.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Zi(parseInt(e[4]+e[4],16),0,255,0,1)];const i=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),Zi(parseInt(i[4],16),0,255,0,1)]:null}function txe(n){const e=h9(n);return e?new Wi(e,"rgb"):null}function u9(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function ixe(n){return e=>{const i=u9(e);return i?QP(i,"rgb",n):null}}function d9(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function nxe(n){return e=>{const i=d9(e);return i?QP(i,"rgb",n):null}}const rxe=[{parser:c9,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:h9,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:s9,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:o9,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:a9,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:l9,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:u9,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:d9,result:{alpha:!0,mode:"rgb",notation:"object"}}];function sxe(n){return rxe.reduce((e,{parser:i,result:t})=>e||(i(n)?t:null),null)}function oxe(n,e="int"){const i=sxe(n);return i?i.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},i),{type:"int"}):i.notation==="func"?Object.assign(Object.assign({},i),{type:e}):null:null}function cy(n){const e=[exe,txe,qbe,Zbe,Kbe,Jbe];e.push(ixe("int"),nxe("int"));const i=Obe(e);return t=>{const r=i(t);return r?ws(r,n):null}}function axe(n){const e=cy("int");if(typeof n!="string")return Wi.black();const i=e(n);return i??Wi.black()}function f9(n){const e=mr(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function HP(n,e="#"){const i=al(n.getComponents("rgb")).map(f9).join("");return`${e}${i}`}function GP(n,e="#"){const i=n.getComponents("rgb"),t=[i[0],i[1],i[2],i[3]*255].map(f9).join("");return`${e}${t}`}function p9(n){const e=Ks(0),i=ws(n,"int");return`rgb(${al(i.getComponents("rgb")).map(r=>e(r)).join(", ")})`}function Mx(n){const e=Ks(2),i=Ks(0);return`rgba(${ws(n,"int").getComponents("rgb").map((s,o)=>(o===3?e:i)(s)).join(", ")})`}function lxe(n){const e=[Ks(0),mO,mO],i=ws(n,"int");return`hsl(${al(i.getComponents("hsl")).map((r,s)=>e[s](r)).join(", ")})`}function cxe(n){const e=[Ks(0),mO,mO,Ks(2)];return`hsla(${ws(n,"int").getComponents("hsl").map((r,s)=>e[s](r)).join(", ")})`}function m9(n,e){const i=Ks(e==="float"?2:0),t=["r","g","b"],r=ws(n,e);return`{${al(r.getComponents("rgb")).map((o,l)=>`${t[l]}: ${i(o)}`).join(", ")}}`}function hxe(n){return e=>m9(e,n)}function g9(n,e){const i=Ks(2),t=Ks(e==="float"?2:0),r=["r","g","b","a"];return`{${ws(n,e).getComponents("rgb").map((l,c)=>{const u=c===3?i:t;return`${r[c]}: ${u(l)}`}).join(", ")}}`}function uxe(n){return e=>g9(e,n)}const dxe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:HP},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:GP},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:p9},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Mx},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:lxe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:cxe},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:hxe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:uxe(e)}],[])];function v9(n){return dxe.reduce((e,i)=>e||(Ybe(i.format,n)?i.stringifier:null),null)}const sg=Yi("apl");class fxe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(sg()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const t=e.createElement("div");t.classList.add(sg("b")),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(sg("c")),t.appendChild(r),this.colorElem_=r;const s=e.createElement("div");s.classList.add(sg("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(sg("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,i=e.getComponents("rgb"),t=new Wi([i[0],i[1],i[2],0],"rgb"),r=new Wi([i[0],i[1],i[2],255],"rgb"),s=["to right",Mx(t),Mx(r)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=Mx(e);const o=Zi(i[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class pxe{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new fxe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sd(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const t=e.point.x/e.bounds.width,r=this.value.rawValue,[s,o,l]=r.getComponents("hsv");this.value.setRawValue(new Wi([s,o,l,t],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=Ys(cd(!0),oc(e));if(i===0)return;const t=this.value.rawValue,[r,s,o,l]=t.getComponents("hsv");this.value.setRawValue(new Wi([r,s,o,l+i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ys(cd(!0),oc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const mf=Yi("coltxt");function mxe(n){const e=n.createElement("select"),i=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(i.reduce((t,r)=>{const s=n.createElement("option");return s.textContent=r.text,s.value=r.value,t.appendChild(s),t},n.createDocumentFragment())),e}class gxe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(mf()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(mf("m")),this.modeElem_=mxe(e),this.modeElem_.classList.add(mf("ms")),t.appendChild(this.modeSelectElement),i.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(mf("mm")),r.appendChild(Yw(e,"dropdown")),t.appendChild(r),this.element.appendChild(t);const s=e.createElement("div");s.classList.add(mf("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=i.inputViews,this.applyInputViews_(),ql(i.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Fz(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(i=>{const t=e.createElement("div");t.classList.add(mf("c")),t.appendChild(i.element),this.inputsElem_.appendChild(t)})}}function vxe(n){return Ks(n==="float"?2:0)}function yxe(n,e,i){const t=kp(n,e)[i];return new Hw({min:0,max:t})}function bxe(n,e,i){return new ay(n,{arrayPosition:i===0?"fst":i===2?"lst":"mid",parser:e.parser,props:Gi.fromObject({formatter:vxe(e.colorType),keyScale:cd(!1),pointerScale:e.colorType==="float"?.01:1}),value:Er(0,{constraint:yxe(e.colorMode,e.colorType,i)}),viewProps:e.viewProps})}function xxe(n,e){const i={colorMode:e.colorMode,colorType:e.colorType,parser:_h,viewProps:e.viewProps};return[0,1,2].map(t=>{const r=bxe(n,i,t);return Gp({primary:e.value,secondary:r.value,forward(s){return ws(s,e.colorType).getComponents(e.colorMode)[t]},backward(s,o){const l=e.colorMode,u=ws(s,e.colorType).getComponents(l);u[t]=o;const d=QP(Zw(al(u),u[3]),l,e.colorType);return ws(d,"int")}}),r})}function Oxe(n,e){const i=new zP(n,{parser:cy("int"),props:Gi.fromObject({formatter:HP}),value:Er(Wi.black()),viewProps:e.viewProps});return Gp({primary:e.value,secondary:i.value,forward:t=>new Wi(al(t.getComponents()),t.mode),backward:(t,r)=>new Wi(Zw(al(r.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[i]}function wxe(n){return n!=="hex"}class _xe{constructor(e,i){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=i.colorType,this.value=i.value,this.viewProps=i.viewProps,this.colorMode=Er(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new gxe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const i=this.colorMode.rawValue;return wxe(i)?xxe(e,{colorMode:i,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Oxe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const i=e.currentTarget;this.colorMode.rawValue=i.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(t=>t.view)}}const XC=Yi("hpl");class Sxe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(XC()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const t=e.createElement("div");t.classList.add(XC("c")),this.element.appendChild(t);const r=e.createElement("div");r.classList.add(XC("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[i]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=p9(new Wi([i,100,100],"hsv"));const t=Zi(i,0,360,0,100);this.markerElem_.style.left=`${t}%`}onValueChange_(){this.update_()}}class Cxe{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new Sxe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sd(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const t=Zi(mr(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,s,o,l]=r.getComponents("hsv");this.value.setRawValue(new Wi([t,s,o,l],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=Ys(cd(!1),oc(e));if(i===0)return;const t=this.value.rawValue,[r,s,o,l]=t.getComponents("hsv");this.value.setRawValue(new Wi([r+i,s,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ys(cd(!1),oc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const WC=Yi("svp"),DD=64;class kxe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(WC()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const t=e.createElement("canvas");t.height=DD,t.width=DD,t.classList.add(WC("c")),this.element.appendChild(t),this.canvasElement=t;const r=e.createElement("div");r.classList.add(WC("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=V1e(this.canvasElement);if(!e)return;const t=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,r,s),l=o.data;for(let d=0;d<s;d++)for(let f=0;f<r;f++){const m=Zi(f,0,r,0,100),g=Zi(d,0,s,100,0),y=e9(t[0],m,g),x=(d*r+f)*4;l[x]=y[0],l[x+1]=y[1],l[x+2]=y[2],l[x+3]=255}e.putImageData(o,0,0);const c=Zi(t[1],0,100,0,100);this.markerElem_.style.left=`${c}%`;const u=Zi(t[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}}class Txe{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new kxe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sd(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const t=Zi(e.point.x,0,e.bounds.width,0,100),r=Zi(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Wi([s,t,r,o],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Zz(e.key)&&e.preventDefault();const[i,t,r,s]=this.value.rawValue.getComponents("hsv"),o=cd(!1),l=Ys(o,oc(e)),c=Ys(o,dv(e));l===0&&c===0||this.value.setRawValue(new Wi([i,t+l,r+c,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const i=cd(!1),t=Ys(i,oc(e)),r=Ys(i,dv(e));t===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Mxe{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.hPaletteC_=new Cxe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Txe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=i.supportsAlpha?{palette:new pxe(e,{value:this.value,viewProps:this.viewProps}),text:new ay(e,{parser:_h,props:Gi.fromObject({pointerScale:.01,keyScale:.1,formatter:Ks(2)}),value:Er(0,{constraint:new Hw({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Gp({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,r)=>{const s=t.getComponents();return s[3]=r,new Wi(s,t.mode)}}),this.textsC_=new _xe(e,{colorType:i.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Fbe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:i.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const QC=Yi("colsw");class Exe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.element=e.createElement("div"),this.element.classList.add(QC()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(QC("sw")),this.element.appendChild(t),this.swatchElem_=t;const r=e.createElement("button");r.classList.add(QC("b")),i.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=GP(e)}onValueChange_(){this.update_()}}class Pxe{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new Exe(e,{value:this.value,viewProps:this.viewProps})}}class YP{constructor(e,i){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=ry.create(i.expanded),this.swatchC_=new Pxe(e,{value:this.value,viewProps:this.viewProps});const t=this.swatchC_.view.buttonElement;t.addEventListener("blur",this.onButtonBlur_),t.addEventListener("click",this.onButtonClick_),this.textC_=new zP(e,{parser:i.parser,props:Gi.fromObject({formatter:i.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Ibe(e,{foldable:this.foldable_,pickerLayout:i.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=i.pickerLayout==="popup"?new Yz(e,{viewProps:this.viewProps}):null;const r=new Mxe(e,{colorType:i.colorType,supportsAlpha:i.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Gp({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),BP(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const i=this.view.element,t=e.relatedTarget;(!t||!i.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const i=this.popC_.view.element,t=zz(e);t&&i.contains(t)||t&&t===this.swatchC_.view.buttonElement&&!IP(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Axe(n){return al(n.getComponents("rgb")).reduce((e,i)=>e<<8|Math.floor(i)&255,0)}function Rxe(n){return n.getComponents("rgb").reduce((e,i,t)=>{const r=Math.floor(t===3?i*255:i)&255;return e<<8|r},0)>>>0}function Ixe(n){return new Wi([n>>16&255,n>>8&255,n&255],"rgb")}function Dxe(n){return new Wi([n>>24&255,n>>16&255,n>>8&255,Zi(n&255,0,255,0,1)],"rgb")}function Nxe(n){return typeof n!="number"?Wi.black():Ixe(n)}function $xe(n){return typeof n!="number"?Wi.black():Dxe(n)}function Ex(n,e){return typeof n!="object"||Nn(n)?!1:e in n&&typeof n[e]=="number"}function y9(n){return Ex(n,"r")&&Ex(n,"g")&&Ex(n,"b")}function b9(n){return y9(n)&&Ex(n,"a")}function x9(n){return y9(n)}function jP(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const i=n.getComponents(),t=e.getComponents();for(let r=0;r<i.length;r++)if(i[r]!==t[r])return!1;return!0}function ND(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function Vxe(n){const e=v9(n);return e?(i,t)=>{ly(i,e(t))}:null}function Lxe(n){const e=n?Rxe:Axe;return(i,t)=>{ly(i,e(t))}}function Bxe(n,e,i){const r=ws(e,i).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b),n.writeProperty("a",r.a)}function Uxe(n,e,i){const r=ws(e,i).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b)}function Fxe(n,e){return(i,t)=>{n?Bxe(i,t,e):Uxe(i,t,e)}}function zxe(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function Xxe(n){return n?e=>GP(e,"0x"):e=>HP(e,"0x")}function Wxe(n){return"color"in n||n.view==="color"}Ms({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!Wxe(e))return null;const i=XP(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{supportsAlpha:zxe(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?$xe:Nxe,equals:jP,writer:n=>Lxe(n.params.supportsAlpha)},controller:n=>{var e,i;return new YP(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:Xxe(n.params.supportsAlpha),parser:cy("int"),pickerLayout:(i=n.params.picker)!==null&&i!==void 0?i:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function Qxe(n,e){if(!x9(n))return ws(Wi.black(),e);if(e==="int"){const i=ND(n);return new Wi(i,"rgb")}if(e==="float"){const i=ND(n);return new WP(i,"rgb")}return ws(Wi.black(),"int")}function Hxe(n){return b9(n)}function Gxe(n){return e=>{const i=Qxe(e,n);return ws(i,"int")}}function Yxe(n,e){return i=>n?g9(i,e):m9(i,e)}Ms({id:"input-color-object",type:"input",accept:(n,e)=>{var i;if(!x9(n))return null;const t=XP(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{colorType:(i=n9(e))!==null&&i!==void 0?i:"int"})}:null},binding:{reader:n=>Gxe(n.params.colorType),equals:jP,writer:n=>Fxe(Hxe(n.initialValue),n.params.colorType)},controller:n=>{var e,i;const t=b9(n.initialValue);return new YP(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:Yxe(t,n.params.colorType),parser:cy("int"),pickerLayout:(i=n.params.picker)!==null&&i!==void 0?i:"popup",supportsAlpha:t,value:n.value,viewProps:n.viewProps})}});Ms({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const i=oxe(n,n9(e));if(!i)return null;const t=v9(i);if(!t)return null;const r=XP(e);return r?{initialValue:n,params:Object.assign(Object.assign({},r),{format:i,stringifier:t})}:null},binding:{reader:()=>axe,equals:jP,writer:n=>{const e=Vxe(n.params.format);if(!e)throw Oo.notBindable();return e}},controller:n=>{var e,i;return new YP(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:cy("int"),pickerLayout:(i=n.params.picker)!==null&&i!==void 0?i:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class qP{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const i=this.asm_.toComponents(e).map((t,r)=>{var s,o;return(o=(s=this.components[r])===null||s===void 0?void 0:s.constrain(t))!==null&&o!==void 0?o:t});return this.asm_.fromComponents(i)}}const $D=Yi("pndtxt");class jxe{constructor(e,i){this.textViews=i.textViews,this.element=e.createElement("div"),this.element.classList.add($D()),this.textViews.forEach(t=>{const r=e.createElement("div");r.classList.add($D("a")),r.appendChild(t.element),this.element.appendChild(r)})}}function qxe(n,e,i){return new ay(n,{arrayPosition:i===0?"fst":i===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[i].textProps,value:Er(0,{constraint:e.axes[i].constraint}),viewProps:e.viewProps})}class ZP{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.acs_=i.axes.map((t,r)=>qxe(e,i,r)),this.acs_.forEach((t,r)=>{Gp({primary:this.value,secondary:t.value,forward:s=>i.assembly.toComponents(s)[r],backward:(s,o)=>{const l=i.assembly.toComponents(s);return l[r]=o,i.assembly.fromComponents(l)}})}),this.view=new jxe(e,{textViews:this.acs_.map(t=>t.view)})}get textControllers(){return this.acs_}}class Zxe extends RP{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function Kxe(n,e){const i=[],t=Nz(n,e);t&&i.push(t);const r=$z(n);r&&i.push(r);const s=FP(n.options);return s&&i.push(s),new oy(i)}Ms({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const i=ss(e,t=>Object.assign(Object.assign({},Lz(t)),{options:t.optional.custom(qw),readonly:t.optional.constant(!1)}));return i?{initialValue:n,params:i}:null},binding:{reader:n=>Rz,constraint:n=>Kxe(n.params,n.initialValue),writer:n=>ly},controller:n=>{const e=n.value,i=n.constraint,t=i&&pO(i,jw);if(t)return new Cp(n.document,{props:new Gi({options:t.values.value("options")}),value:e,viewProps:n.viewProps});const r=Vz(n.params,e.rawValue),s=i&&pO(i,Hw);return s?new RD(n.document,Object.assign(Object.assign({},Mbe(Object.assign(Object.assign({},r),{keyScale:Er(r.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:_h,value:e,viewProps:n.viewProps})):new ay(n.document,{parser:_h,props:Gi.fromObject(r),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof RD?new Zxe(n.controller):n.controller.valueController instanceof Cp?new UP(n.controller):null}});class ph{constructor(e=0,i=0){this.x=e,this.y=i}getComponents(){return[this.x,this.y]}static isObject(e){if(Nn(e))return!1;const i=e.x,t=e.y;return!(typeof i!="number"||typeof t!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y}toObject(){return{x:this.x,y:this.y}}}const O9={toComponents:n=>n.getComponents(),fromComponents:n=>new ph(...n)},gf=Yi("p2d");class Jxe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(gf()),i.viewProps.bindClassModifiers(this.element),ql(i.expanded,Hp(this.element,gf(void 0,"expanded")));const t=e.createElement("div");t.classList.add(gf("h")),this.element.appendChild(t);const r=e.createElement("button");r.classList.add(gf("b")),r.appendChild(Yw(e,"p2dpad")),i.viewProps.bindDisabled(r),t.appendChild(r),this.buttonElement=r;const s=e.createElement("div");if(s.classList.add(gf("t")),t.appendChild(s),this.textElement=s,i.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(gf("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const Qc=Yi("p2dp");class eOe{constructor(e,i){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Qc()),i.layout==="popup"&&this.element.classList.add(Qc(void 0,"p")),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(Qc("p")),i.viewProps.bindTabIndex(t),this.element.appendChild(t),this.padElement=t;const r=e.createElementNS(Ja,"svg");r.classList.add(Qc("g")),this.padElement.appendChild(r),this.svgElem_=r;const s=e.createElementNS(Ja,"line");s.classList.add(Qc("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(Ja,"line");o.classList.add(Qc("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(Ja,"line");l.classList.add(Qc("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const c=e.createElement("div");c.classList.add(Qc("m")),this.padElement.appendChild(c),this.markerElem_=c,i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,i]=this.value.rawValue.getComponents(),t=this.props_.get("max"),r=Zi(e,-t,+t,0,100),s=Zi(i,-t,+t,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function VD(n,e,i){return[Ys(e[0],oc(n)),Ys(e[1],dv(n))*(i?1:-1)]}class tOe{constructor(e,i){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new eOe(e,{layout:i.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sd(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const t=this.props.get("max"),r=Zi(e.point.x,0,e.bounds.width,-t,+t),s=Zi(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-t,+t);this.value.setRawValue(new ph(r,s),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Zz(e.key)&&e.preventDefault();const[i,t]=VD(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));i===0&&t===0||this.value.setRawValue(new ph(this.value.rawValue.x+i,this.value.rawValue.y+t),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[i,t]=VD(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));i===0&&t===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class iOe{constructor(e,i){var t,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=ry.create(i.expanded),this.popC_=i.pickerLayout==="popup"?new Yz(e,{viewProps:this.viewProps}):null;const s=new tOe(e,{layout:i.pickerLayout,props:new Gi({invertsY:Er(i.invertsY),max:Er(i.max),xKeyScale:i.axes[0].textProps.value("keyScale"),yKeyScale:i.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new ZP(e,{assembly:O9,axes:i.axes,parser:i.parser,value:this.value,viewProps:this.viewProps}),this.view=new Jxe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:i.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(t=this.view.buttonElement)===null||t===void 0||t.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Gp({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),BP(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const i=this.view.element,t=e.relatedTarget;(!t||!i.contains(t))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const i=this.popC_.view.element,t=zz(e);t&&i.contains(t)||t&&t===this.view.buttonElement&&!IP(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function nOe(n){return ph.isObject(n)?new ph(n.x,n.y):new ph}function rOe(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function sOe(n,e){return new qP({assembly:O9,components:[Wl(Object.assign(Object.assign({},n),n.x),e.x),Wl(Object.assign(Object.assign({},n),n.y),e.y)]})}function LD(n,e){var i,t;if(!Nn(n.min)||!Nn(n.max))return Math.max(Math.abs((i=n.min)!==null&&i!==void 0?i:0),Math.abs((t=n.max)!==null&&t!==void 0?t:0));const r=Dz(n);return Math.max(Math.abs(r)*10,Math.abs(e)*10)}function oOe(n,e){var i,t;const r=LD(ld(n,(i=n.x)!==null&&i!==void 0?i:{}),e.x),s=LD(ld(n,(t=n.y)!==null&&t!==void 0?t:{}),e.y);return Math.max(r,s)}function aOe(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}Ms({id:"input-point2d",type:"input",accept:(n,e)=>{if(!ph.isObject(n))return null;const i=ss(e,t=>Object.assign(Object.assign({},fv(t)),{expanded:t.optional.boolean,picker:t.optional.custom(Jz),readonly:t.optional.constant(!1),x:t.optional.custom(oh),y:t.optional.object(Object.assign(Object.assign({},fv(t)),{inverted:t.optional.boolean}))}));return i?{initialValue:n,params:i}:null},binding:{reader:()=>nOe,constraint:n=>sOe(n.params,n.initialValue),equals:ph.equals,writer:()=>rOe},controller:n=>{var e,i;const t=n.document,r=n.value,s=n.constraint,o=[n.params.x,n.params.y];return new iOe(t,{axes:r.rawValue.getComponents().map((l,c)=>{var u;return PP({constraint:s.components[c],initialValue:l,params:ld(n.params,(u=o[c])!==null&&u!==void 0?u:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:aOe(n.params),max:oOe(n.params,r.rawValue),parser:_h,pickerLayout:(i=n.params.picker)!==null&&i!==void 0?i:"popup",value:r,viewProps:n.viewProps})}});class Yf{constructor(e=0,i=0,t=0){this.x=e,this.y=i,this.z=t}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Nn(e))return!1;const i=e.x,t=e.y,r=e.z;return!(typeof i!="number"||typeof t!="number"||typeof r!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y&&e.z===i.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const w9={toComponents:n=>n.getComponents(),fromComponents:n=>new Yf(...n)};function lOe(n){return Yf.isObject(n)?new Yf(n.x,n.y,n.z):new Yf}function cOe(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function hOe(n,e){return new qP({assembly:w9,components:[Wl(Object.assign(Object.assign({},n),n.x),e.x),Wl(Object.assign(Object.assign({},n),n.y),e.y),Wl(Object.assign(Object.assign({},n),n.z),e.z)]})}Ms({id:"input-point3d",type:"input",accept:(n,e)=>{if(!Yf.isObject(n))return null;const i=ss(e,t=>Object.assign(Object.assign({},fv(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(oh),y:t.optional.custom(oh),z:t.optional.custom(oh)}));return i?{initialValue:n,params:i}:null},binding:{reader:n=>lOe,constraint:n=>hOe(n.params,n.initialValue),equals:Yf.equals,writer:n=>cOe},controller:n=>{const e=n.value,i=n.constraint,t=[n.params.x,n.params.y,n.params.z];return new ZP(n.document,{assembly:w9,axes:e.rawValue.getComponents().map((r,s)=>{var o;return PP({constraint:i.components[s],initialValue:r,params:ld(n.params,(o=t[s])!==null&&o!==void 0?o:{})})}),parser:_h,value:e,viewProps:n.viewProps})}});class jf{constructor(e=0,i=0,t=0,r=0){this.x=e,this.y=i,this.z=t,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Nn(e))return!1;const i=e.x,t=e.y,r=e.z,s=e.w;return!(typeof i!="number"||typeof t!="number"||typeof r!="number"||typeof s!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y&&e.z===i.z&&e.w===i.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const _9={toComponents:n=>n.getComponents(),fromComponents:n=>new jf(...n)};function uOe(n){return jf.isObject(n)?new jf(n.x,n.y,n.z,n.w):new jf}function dOe(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function fOe(n,e){return new qP({assembly:_9,components:[Wl(Object.assign(Object.assign({},n),n.x),e.x),Wl(Object.assign(Object.assign({},n),n.y),e.y),Wl(Object.assign(Object.assign({},n),n.z),e.z),Wl(Object.assign(Object.assign({},n),n.w),e.w)]})}Ms({id:"input-point4d",type:"input",accept:(n,e)=>{if(!jf.isObject(n))return null;const i=ss(e,t=>Object.assign(Object.assign({},fv(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(oh),x:t.optional.custom(oh),y:t.optional.custom(oh),z:t.optional.custom(oh)}));return i?{initialValue:n,params:i}:null},binding:{reader:n=>uOe,constraint:n=>fOe(n.params,n.initialValue),equals:jf.equals,writer:n=>dOe},controller:n=>{const e=n.value,i=n.constraint,t=[n.params.x,n.params.y,n.params.z,n.params.w];return new ZP(n.document,{assembly:_9,axes:e.rawValue.getComponents().map((r,s)=>{var o;return PP({constraint:i.components[s],initialValue:r,params:ld(n.params,(o=t[s])!==null&&o!==void 0?o:{})})}),parser:_h,value:e,viewProps:n.viewProps})}});function pOe(n){const e=[],i=FP(n.options);return i&&e.push(i),new oy(e)}Ms({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const i=ss(e,t=>({readonly:t.optional.constant(!1),options:t.optional.custom(qw)}));return i?{initialValue:n,params:i}:null},binding:{reader:n=>qz,constraint:n=>pOe(n.params),writer:n=>ly},controller:n=>{const e=n.document,i=n.value,t=n.constraint,r=t&&pO(t,jw);return r?new Cp(e,{props:new Gi({options:r.values.value("options")}),value:i,viewProps:n.viewProps}):new zP(e,{parser:s=>s,props:Gi.fromObject({formatter:AT}),value:i,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof Cp?new UP(n.controller):null}});const Kw={monitor:{defaultInterval:200,defaultRows:3}},BD=Yi("mll");class mOe{constructor(e,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=e.createElement("div"),this.element.classList.add(BD()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("textarea");t.classList.add(BD("i")),t.style.height=`calc(var(${Kz("containerUnitSize")}) * ${i.rows})`,t.readOnly=!0,i.viewProps.bindDisabled(t),this.element.appendChild(t),this.textareaElem_=t,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const e=this.textareaElem_,i=e.scrollTop===e.scrollHeight-e.clientHeight,t=[];this.value.rawValue.forEach(r=>{r!==void 0&&t.push(this.formatter_(r))}),e.textContent=t.join(`
`),i&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class KP{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new mOe(e,{formatter:i.formatter,rows:i.rows,value:this.value,viewProps:this.viewProps})}}const UD=Yi("sgl");class gOe{constructor(e,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=e.createElement("div"),this.element.classList.add(UD()),i.viewProps.bindClassModifiers(this.element);const t=e.createElement("input");t.classList.add(UD("i")),t.readOnly=!0,t.type="text",i.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const e=this.value.rawValue,i=e[e.length-1];this.inputElement.value=i!==void 0?this.formatter_(i):""}onValueUpdate_(){this.update_()}}class JP{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new gOe(e,{formatter:i.formatter,value:this.value,viewProps:this.viewProps})}}Ms({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const i=ss(e,t=>({readonly:t.required.constant(!0),rows:t.optional.number}));return i?{initialValue:n,params:i}:null},binding:{reader:n=>jz},controller:n=>{var e;return n.value.rawValue.length===1?new JP(n.document,{formatter:AD,value:n.value,viewProps:n.viewProps}):new KP(n.document,{formatter:AD,rows:(e=n.params.rows)!==null&&e!==void 0?e:Kw.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class vOe extends RP{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Hc=Yi("grl");class yOe{constructor(e,i){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Hc()),i.viewProps.bindClassModifiers(this.element),this.formatter_=i.formatter,this.props_=i.props,this.cursor_=i.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const t=e.createElementNS(Ja,"svg");t.classList.add(Hc("g")),t.style.height=`calc(var(${Kz("containerUnitSize")}) * ${i.rows})`,this.element.appendChild(t),this.svgElem_=t;const r=e.createElementNS(Ja,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const s=e.createElement("div");s.classList.add(Hc("t"),Yi("tt")()),this.element.appendChild(s),this.tooltipElem_=s,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:i}=this.element,t=this.value.rawValue.length-1,r=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((f,m)=>{if(f===void 0)return;const g=Zi(m,0,t,0,e),y=Zi(f,r,s,i,0);o.push([g,y].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const l=this.tooltipElem_,c=this.value.rawValue[this.cursor_.rawValue];if(c===void 0){l.classList.remove(Hc("t","a"));return}const u=Zi(this.cursor_.rawValue,0,t,0,e),d=Zi(c,r,s,i,0);l.style.left=`${u}px`,l.style.top=`${d}px`,l.textContent=`${this.formatter_(c)}`,l.classList.contains(Hc("t","a"))||(l.classList.add(Hc("t","a"),Hc("t","in")),fO(l),l.classList.remove(Hc("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class S9{constructor(e,i){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.cursor_=Er(-1),this.view=new yOe(e,{cursor:this.cursor_,formatter:i.formatter,rows:i.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!IP(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const t=new Sd(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return dl(e,null,i=>({max:i.required.number,min:i.required.number}),i=>(this.props.set("max",i.max),this.props.set("min",i.min),!0))}exportProps(){return fl(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:i}=this.view.element;this.cursor_.rawValue=Math.floor(Zi(e.offsetX,0,i,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Zi(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function RT(n){return Nn(n.format)?Ks(2):n.format}function bOe(n){var e;return n.value.rawValue.length===1?new JP(n.document,{formatter:RT(n.params),value:n.value,viewProps:n.viewProps}):new KP(n.document,{formatter:RT(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Kw.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function xOe(n){var e,i,t;return new S9(n.document,{formatter:RT(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Kw.monitor.defaultRows,props:Gi.fromObject({max:(i=n.params.max)!==null&&i!==void 0?i:100,min:(t=n.params.min)!==null&&t!==void 0?t:0}),value:n.value,viewProps:n.viewProps})}function FD(n){return n.view==="graph"}Ms({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const i=ss(e,t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}));return i?{initialValue:n,params:i}:null},binding:{defaultBufferSize:n=>FD(n)?64:1,reader:n=>Rz},controller:n=>FD(n.params)?xOe(n):bOe(n),api:n=>n.controller.valueController instanceof S9?new vOe(n.controller):null});Ms({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const i=ss(e,t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}));return i?{initialValue:n,params:i}:null},binding:{reader:n=>qz},controller:n=>{var e;const i=n.value;return i.rawValue.length>1||n.params.multiline?new KP(n.document,{formatter:AT,rows:(e=n.params.rows)!==null&&e!==void 0?e:Kw.monitor.defaultRows,value:i,viewProps:n.viewProps}):new JP(n.document,{formatter:AT,value:i,viewProps:n.viewProps})}});new Wz("4.0.3");const OOe=parseInt(Up.replace(/\D+/g,""));var wOe=Object.defineProperty,_Oe=(n,e,i)=>e in n?wOe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,SOe=(n,e,i)=>(_Oe(n,e+"",i),i);async function zD(n){const e=await n.arrayBuffer(),i=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${n.type||""};base64,${i}`}let wb,HC,vf,_b;function GC(n,e=1/0,i=null){HC||(HC=new $h(2,2,1,1)),vf||(vf=new ks({uniforms:{blitTexture:new Xw(n)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),vf.uniforms.blitTexture.value=n,vf.defines.IS_SRGB="colorSpace"in n?n.colorSpace==="srgb":n.encoding===3001,vf.needsUpdate=!0,_b||(_b=new tn(HC,vf),_b.frustrumCulled=!1);const t=new en,r=new bp;r.add(_b),i||(i=wb=new S0({antialias:!1})),i.setSize(Math.min(n.image.width,e),Math.min(n.image.height,e)),i.clear(),i.render(r,t);const s=new Xn(i.domElement);return s.minFilter=n.minFilter,s.magFilter=n.magFilter,s.wrapS=n.wrapS,s.wrapT=n.wrapT,s.name=n.name,wb&&(wb.dispose(),wb=null),s}const XD={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class C9{constructor(){this.pluginCallbacks=[],this.register(function(e){return new DOe(e)}),this.register(function(e){return new NOe(e)}),this.register(function(e){return new LOe(e)}),this.register(function(e){return new BOe(e)}),this.register(function(e){return new UOe(e)}),this.register(function(e){return new FOe(e)}),this.register(function(e){return new $Oe(e)}),this.register(function(e){return new VOe(e)}),this.register(function(e){return new zOe(e)}),this.register(function(e){return new XOe(e)}),this.register(function(e){return new WOe(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,i,t,r){const s=new IOe,o=[];for(let l=0,c=this.pluginCallbacks.length;l<c;l++)o.push(this.pluginCallbacks[l](s));s.setPlugins(o),s.write(e,i,r).catch(t)}parseAsync(e,i){const t=this;return new Promise(function(r,s){t.parse(e,r,s,i)})}}SOe(C9,"Utils",{insertKeyframe:function(n,e){const i=n.getValueSize(),t=new n.TimeBufferType(n.times.length+1),r=new n.ValueBufferType(n.values.length+i),s=n.createInterpolant(new n.ValueBufferType(i));let o;if(n.times.length===0){t[0]=e;for(let l=0;l<i;l++)r[l]=0;o=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;t[0]=e,t.set(n.times,1),r.set(s.evaluate(e),0),r.set(n.values,i),o=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;t[t.length-1]=e,t.set(n.times,0),r.set(n.values,0),r.set(s.evaluate(e),n.values.length),o=t.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){t.set(n.times.slice(0,l+1),0),t[l+1]=e,t.set(n.times.slice(l+1),l+2),r.set(n.values.slice(0,(l+1)*i),0),r.set(s.evaluate(e),(l+1)*i),r.set(n.values.slice((l+1)*i),(l+2)*i),o=l+1;break}}return n.times=t,n.values=r,o},mergeMorphTargetTracks:function(n,e){const i=[],t={},r=n.tracks;for(let s=0;s<r.length;++s){let o=r[s];const l=gi.parseTrackName(o.name),c=gi.findNode(e,l.nodeName);if(l.propertyName!=="morphTargetInfluences"||l.propertyIndex===void 0){i.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(gp)}const u=c.morphTargetInfluences.length,d=c.morphTargetDictionary[l.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);let f;if(t[c.uuid]===void 0){f=o.clone();const g=new f.ValueBufferType(u*f.times.length);for(let y=0;y<f.times.length;y++)g[y*u+d]=f.values[y];f.name=(l.nodeName||"")+".morphTargetInfluences",f.values=g,t[c.uuid]=f,i.push(f);continue}const m=o.createInterpolant(new o.ValueBufferType(1));f=t[c.uuid];for(let g=0;g<f.times.length;g++)f.values[g*u+d]=m.evaluate(f.times[g]);for(let g=0;g<o.times.length;g++){const y=this.insertKeyframe(f,o.times[g]);f.values[y*u+d]=o.values[g]}}return n.tracks=i,n}});const Ai={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},YC="KHR_mesh_quantization",_o={};_o[fr]=Ai.NEAREST;_o[gw]=Ai.NEAREST_MIPMAP_NEAREST;_o[Du]=Ai.NEAREST_MIPMAP_LINEAR;_o[Yn]=Ai.LINEAR;_o[Hf]=Ai.LINEAR_MIPMAP_NEAREST;_o[Oa]=Ai.LINEAR_MIPMAP_LINEAR;_o[bs]=Ai.CLAMP_TO_EDGE;_o[wh]=Ai.REPEAT;_o[fp]=Ai.MIRRORED_REPEAT;const WD={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},COe=new it,QD=12,kOe=1179937895,TOe=2,HD=8,MOe=1313821514,EOe=5130562;function l0(n,e){return n.length===e.length&&n.every(function(i,t){return i===e[t]})}function POe(n){return new TextEncoder().encode(n).buffer}function AOe(n){return l0(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function ROe(n,e,i){const t={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+i;r++)for(let s=0;s<n.itemSize;s++){let o;n.itemSize>4?o=n.array[r*n.itemSize+s]:(s===0?o=n.getX(r):s===1?o=n.getY(r):s===2?o=n.getZ(r):s===3&&(o=n.getW(r)),n.normalized===!0&&(o=Jr.normalize(o,n.array))),t.min[s]=Math.min(t.min[s],o),t.max[s]=Math.max(t.max[s],o)}return t}function k9(n){return Math.ceil(n/4)*4}function jC(n,e=0){const i=k9(n.byteLength);if(i!==n.byteLength){const t=new Uint8Array(i);if(t.set(new Uint8Array(n)),e!==0)for(let r=n.byteLength;r<i;r++)t[r]=e;return t.buffer}return n}function GD(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function YD(n,e){if(n.toBlob!==void 0)return new Promise(t=>n.toBlob(t,e));let i;return e==="image/jpeg"?i=.92:e==="image/webp"&&(i=.8),n.convertToBlob({type:e,quality:i})}class IOe{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,i,t={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},t),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const r=this,s=r.buffers,o=r.json;t=r.options;const l=r.extensionsUsed,c=r.extensionsRequired,u=new Blob(s,{type:"application/octet-stream"}),d=Object.keys(l),f=Object.keys(c);d.length>0&&(o.extensionsUsed=d),f.length>0&&(o.extensionsRequired=f),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=u.size),t.binary===!0?u.arrayBuffer().then(m=>{const g=jC(m),y=new DataView(new ArrayBuffer(HD));y.setUint32(0,g.byteLength,!0),y.setUint32(4,EOe,!0);const x=jC(POe(JSON.stringify(o)),32),b=new DataView(new ArrayBuffer(HD));b.setUint32(0,x.byteLength,!0),b.setUint32(4,MOe,!0);const S=new ArrayBuffer(QD),_=new DataView(S);_.setUint32(0,kOe,!0),_.setUint32(4,TOe,!0);const O=QD+b.byteLength+x.byteLength+y.byteLength+g.byteLength;_.setUint32(8,O,!0),new Blob([S,b,x,y,g],{type:"application/octet-stream"}).arrayBuffer().then(i)}):o.buffers&&o.buffers.length>0?zD(u).then(m=>{o.buffers[0].uri=m,i(o)}):i(o)}serializeUserData(e,i){if(Object.keys(e.userData).length===0)return;const t=this.options,r=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(t.includeCustomExtensions&&s.gltfExtensions){i.extensions===void 0&&(i.extensions={});for(const o in s.gltfExtensions)i.extensions[o]=s.gltfExtensions[o],r[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(i.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,i=!1){if(this.uids.has(e)===!1){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(i)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const i=new ne;for(let t=0,r=e.count;t<r;t++)if(Math.abs(i.fromBufferAttribute(e,t).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const i=this.cache;if(i.attributesNormalized.has(e))return i.attributesNormalized.get(e);const t=e.clone(),r=new ne;for(let s=0,o=t.count;s<o;s++)r.fromBufferAttribute(t,s),r.x===0&&r.y===0&&r.z===0?r.setX(1):r.normalize(),t.setXYZ(s,r.x,r.y,r.z);return i.attributesNormalized.set(e,t),t}applyTextureTransform(e,i){let t=!1;const r={};(i.offset.x!==0||i.offset.y!==0)&&(r.offset=i.offset.toArray(),t=!0),i.rotation!==0&&(r.rotation=i.rotation,t=!0),(i.repeat.x!==1||i.repeat.y!==1)&&(r.scale=i.repeat.toArray(),t=!0),t&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,i){if(e===i)return e;function t(m){return("colorSpace"in m?m.colorSpace==="srgb":m.encoding===3001)?function(g){return g<.04045?g*.0773993808:Math.pow(g*.9478672986+.0521327014,2.4)}:function(g){return g}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof qu&&(e=GC(e)),i instanceof qu&&(i=GC(i));const r=e?e.image:null,s=i?i.image:null,o=Math.max(r?r.width:0,s?s.width:0),l=Math.max(r?r.height:0,s?s.height:0),c=GD();c.width=o,c.height=l;const u=c.getContext("2d");u.fillStyle="#00ffff",u.fillRect(0,0,o,l);const d=u.getImageData(0,0,o,l);if(r){u.drawImage(r,0,0,o,l);const m=t(e),g=u.getImageData(0,0,o,l).data;for(let y=2;y<g.length;y+=4)d.data[y]=m(g[y]/256)*256}if(s){u.drawImage(s,0,0,o,l);const m=t(i),g=u.getImageData(0,0,o,l).data;for(let y=1;y<g.length;y+=4)d.data[y]=m(g[y]/256)*256}u.putImageData(d,0,0);const f=(e||i).clone();return f.source=new Xn(c).source,"colorSpace"in f?f.colorSpace="":f.encoding=3e3,f.channel=(e||i).channel,e&&i&&e.channel!==i.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),f}processBuffer(e){const i=this.json,t=this.buffers;return i.buffers||(i.buffers=[{byteLength:0}]),t.push(e),0}processBufferView(e,i,t,r,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let l;switch(i){case Ai.BYTE:case Ai.UNSIGNED_BYTE:l=1;break;case Ai.SHORT:case Ai.UNSIGNED_SHORT:l=2;break;default:l=4}const c=k9(r*e.itemSize*l),u=new DataView(new ArrayBuffer(c));let d=0;for(let m=t;m<t+r;m++)for(let g=0;g<e.itemSize;g++){let y;e.itemSize>4?y=e.array[m*e.itemSize+g]:(g===0?y=e.getX(m):g===1?y=e.getY(m):g===2?y=e.getZ(m):g===3&&(y=e.getW(m)),e.normalized===!0&&(y=Jr.normalize(y,e.array))),i===Ai.FLOAT?u.setFloat32(d,y,!0):i===Ai.INT?u.setInt32(d,y,!0):i===Ai.UNSIGNED_INT?u.setUint32(d,y,!0):i===Ai.SHORT?u.setInt16(d,y,!0):i===Ai.UNSIGNED_SHORT?u.setUint16(d,y,!0):i===Ai.BYTE?u.setInt8(d,y):i===Ai.UNSIGNED_BYTE&&u.setUint8(d,y),d+=l}const f={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:c};return s!==void 0&&(f.target=s),s===Ai.ARRAY_BUFFER&&(f.byteStride=e.itemSize*l),this.byteOffset+=c,o.bufferViews.push(f),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const i=this,t=i.json;return t.bufferViews||(t.bufferViews=[]),e.arrayBuffer().then(r=>{const s=jC(r),o={buffer:i.processBuffer(s),byteOffset:i.byteOffset,byteLength:s.byteLength};return i.byteOffset+=s.byteLength,t.bufferViews.push(o)-1})}processAccessor(e,i,t,r){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let l;if(e.array.constructor===Float32Array)l=Ai.FLOAT;else if(e.array.constructor===Int32Array)l=Ai.INT;else if(e.array.constructor===Uint32Array)l=Ai.UNSIGNED_INT;else if(e.array.constructor===Int16Array)l=Ai.SHORT;else if(e.array.constructor===Uint16Array)l=Ai.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)l=Ai.BYTE;else if(e.array.constructor===Uint8Array)l=Ai.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(t===void 0&&(t=0),r===void 0&&(r=e.count),r===0)return null;const c=ROe(e,t,r);let u;i!==void 0&&(u=e===i.index?Ai.ELEMENT_ARRAY_BUFFER:Ai.ARRAY_BUFFER);const d=this.processBufferView(e,l,t,r,u),f={bufferView:d.id,byteOffset:d.byteOffset,componentType:l,count:r,max:c.max,min:c.min,type:o[e.itemSize]};return e.normalized===!0&&(f.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(f)-1}processImage(e,i,t,r="image/png"){if(e!==null){const s=this,o=s.cache,l=s.json,c=s.options,u=s.pending;o.images.has(e)||o.images.set(e,{});const d=o.images.get(e),f=r+":flipY/"+t.toString();if(d[f]!==void 0)return d[f];l.images||(l.images=[]);const m={mimeType:r},g=GD();g.width=Math.min(e.width,c.maxTextureSize),g.height=Math.min(e.height,c.maxTextureSize);const y=g.getContext("2d");if(t===!0&&(y.translate(0,g.height),y.scale(1,-1)),e.data!==void 0){i!==Gs&&console.error("GLTFExporter: Only RGBAFormat is supported.",i),(e.width>c.maxTextureSize||e.height>c.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const b=new Uint8ClampedArray(e.height*e.width*4);for(let S=0;S<b.length;S+=4)b[S+0]=e.data[S+0],b[S+1]=e.data[S+1],b[S+2]=e.data[S+2],b[S+3]=e.data[S+3];y.putImageData(new ImageData(b,e.width,e.height),0,0)}else y.drawImage(e,0,0,g.width,g.height);c.binary===!0?u.push(YD(g,r).then(b=>s.processBufferViewImage(b)).then(b=>{m.bufferView=b})):g.toDataURL!==void 0?m.uri=g.toDataURL(r):u.push(YD(g,r).then(zD).then(b=>{m.uri=b}));const x=l.images.push(m)-1;return d[f]=x,x}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const i=this.json;i.samplers||(i.samplers=[]);const t={magFilter:_o[e.magFilter],minFilter:_o[e.minFilter],wrapS:_o[e.wrapS],wrapT:_o[e.wrapT]};return i.samplers.push(t)-1}processTexture(e){const i=this.options,t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]),e instanceof qu&&(e=GC(e,i.maxTextureSize));let s=e.userData.mimeType;s==="image/webp"&&(s="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(o.name=e.name),this._invokeAll(function(c){c.writeTexture&&c.writeTexture(e,o)});const l=r.textures.push(o)-1;return t.textures.set(e,l),l}processMaterial(e){const i=this.cache,t=this.json;if(i.materials.has(e))return i.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;t.materials||(t.materials=[]);const r={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(l0(s,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const l=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),c={index:this.processTexture(l),channel:l.channel};this.applyTextureTransform(c,l),r.pbrMetallicRoughness.metallicRoughnessTexture=c}if(e.map){const l={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(l,e.map),r.pbrMetallicRoughness.baseColorTexture=l}if(e.emissive){const l=e.emissive;if(Math.max(l.r,l.g,l.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),r.emissiveTexture=c}}if(e.normalMap){const l={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(l.scale=e.normalScale.x),this.applyTextureTransform(l,e.normalMap),r.normalTexture=l}if(e.aoMap){const l={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(l.strength=e.aoMapIntensity),this.applyTextureTransform(l,e.aoMap),r.occlusionTexture=l}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===Xs&&(r.doubleSided=!0),e.name!==""&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll(function(l){l.writeMaterial&&l.writeMaterial(e,r)});const o=t.materials.push(r)-1;return i.materials.set(e,o),o}processMesh(e){const i=this.cache,t=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let O=0,k=e.material.length;O<k;O++)r.push(e.material[O].uuid);else r.push(e.material.uuid);const s=r.join(":");if(i.meshes.has(s))return i.meshes.get(s);const o=e.geometry;let l;e.isLineSegments?l=Ai.LINES:e.isLineLoop?l=Ai.LINE_LOOP:e.isLine?l=Ai.LINE_STRIP:e.isPoints?l=Ai.POINTS:l=e.material.wireframe?Ai.LINES:Ai.TRIANGLES;const c={},u={},d=[],f=[],m={...OOe>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},g=o.getAttribute("normal");g!==void 0&&!this.isNormalizedNormalAttribute(g)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(g)));let y=null;for(let O in o.attributes){if(O.slice(0,5)==="morph")continue;const k=o.attributes[O];if(O=m[O]||O.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(O)||(O="_"+O),i.attributes.has(this.getUID(k))){u[O]=i.attributes.get(this.getUID(k));continue}y=null;const M=k.array;O==="JOINTS_0"&&!(M instanceof Uint16Array)&&!(M instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),y=new Ri(new Uint16Array(M),k.itemSize,k.normalized));const E=this.processAccessor(y||k,o);E!==null&&(O.startsWith("_")||this.detectMeshQuantization(O,k),u[O]=E,i.attributes.set(this.getUID(k),E))}if(g!==void 0&&o.setAttribute("normal",g),Object.keys(u).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const O=[],k=[],M={};if(e.morphTargetDictionary!==void 0)for(const E in e.morphTargetDictionary)M[e.morphTargetDictionary[E]]=E;for(let E=0;E<e.morphTargetInfluences.length;++E){const R={};let P=!1;for(const I in o.morphAttributes){if(I!=="position"&&I!=="normal"){P||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),P=!0);continue}const T=o.morphAttributes[I][E],N=I.toUpperCase(),L=o.attributes[I];if(i.attributes.has(this.getUID(T,!0))){R[N]=i.attributes.get(this.getUID(T,!0));continue}const D=T.clone();if(!o.morphTargetsRelative)for(let $=0,B=T.count;$<B;$++)for(let U=0;U<T.itemSize;U++)U===0&&D.setX($,T.getX($)-L.getX($)),U===1&&D.setY($,T.getY($)-L.getY($)),U===2&&D.setZ($,T.getZ($)-L.getZ($)),U===3&&D.setW($,T.getW($)-L.getW($));R[N]=this.processAccessor(D,o),i.attributes.set(this.getUID(L,!0),R[N])}f.push(R),O.push(e.morphTargetInfluences[E]),e.morphTargetDictionary!==void 0&&k.push(M[E])}c.weights=O,k.length>0&&(c.extras={},c.extras.targetNames=k)}const x=Array.isArray(e.material);if(x&&o.groups.length===0)return null;const b=x?e.material:[e.material],S=x?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let O=0,k=S.length;O<k;O++){const M={mode:l,attributes:u};if(this.serializeUserData(o,M),f.length>0&&(M.targets=f),o.index!==null){let R=this.getUID(o.index);(S[O].start!==void 0||S[O].count!==void 0)&&(R+=":"+S[O].start+":"+S[O].count),i.attributes.has(R)?M.indices=i.attributes.get(R):(M.indices=this.processAccessor(o.index,o,S[O].start,S[O].count),i.attributes.set(R,M.indices)),M.indices===null&&delete M.indices}const E=this.processMaterial(b[S[O].materialIndex]);E!==null&&(M.material=E),d.push(M)}c.primitives=d,t.meshes||(t.meshes=[]),this._invokeAll(function(O){O.writeMesh&&O.writeMesh(e,c)});const _=t.meshes.push(c)-1;return i.meshes.set(s,_),_}detectMeshQuantization(e,i){if(this.extensionsUsed[YC])return;let t;switch(i.array.constructor){case Int8Array:t="byte";break;case Uint8Array:t="unsigned byte";break;case Int16Array:t="short";break;case Uint16Array:t="unsigned short";break;default:return}i.normalized&&(t+=" normalized");const r=e.split("_",1)[0];XD[r]&&XD[r].includes(t)&&(this.extensionsUsed[YC]=!0,this.extensionsRequired[YC]=!0)}processCamera(e){const i=this.json;i.cameras||(i.cameras=[]);const t=e.isOrthographicCamera,r={type:t?"orthographic":"perspective"};return t?r.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:Jr.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(r.name=e.type),i.cameras.push(r)-1}processAnimation(e,i){const t=this.json,r=this.nodeMap;t.animations||(t.animations=[]),e=C9.Utils.mergeMorphTargetTracks(e.clone(),i);const s=e.tracks,o=[],l=[];for(let c=0;c<s.length;++c){const u=s[c],d=gi.parseTrackName(u.name);let f=gi.findNode(i,d.nodeName);const m=WD[d.propertyName];if(d.objectName==="bones"&&(f.isSkinnedMesh===!0?f=f.skeleton.getBoneByName(d.objectIndex):f=void 0),!f||!m)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;const g=1;let y=u.values.length/u.times.length;m===WD.morphTargetInfluences&&(y/=f.morphTargetInfluences.length);let x;u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(x="CUBICSPLINE",y/=3):u.getInterpolation()===mp?x="STEP":x="LINEAR",l.push({input:this.processAccessor(new Ri(u.times,g)),output:this.processAccessor(new Ri(u.values,y)),interpolation:x}),o.push({sampler:l.length-1,target:{node:r.get(f),path:m}})}return t.animations.push({name:e.name||"clip_"+t.animations.length,samplers:l,channels:o}),t.animations.length-1}processSkin(e){const i=this.json,t=this.nodeMap,r=i.nodes[t.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const l=[],c=new Float32Array(s.bones.length*16),u=new pt;for(let d=0;d<s.bones.length;++d)l.push(t.get(s.bones[d])),u.copy(s.boneInverses[d]),u.multiply(e.bindMatrix).toArray(c,d*16);return i.skins===void 0&&(i.skins=[]),i.skins.push({inverseBindMatrices:this.processAccessor(new Ri(c,16)),joints:l,skeleton:t.get(o)}),r.skin=i.skins.length-1}processNode(e){const i=this.json,t=this.options,r=this.nodeMap;i.nodes||(i.nodes=[]);const s={};if(t.trs){const l=e.quaternion.toArray(),c=e.position.toArray(),u=e.scale.toArray();l0(l,[0,0,0,1])||(s.rotation=l),l0(c,[0,0,0])||(s.translation=c),l0(u,[1,1,1])||(s.scale=u)}else e.matrixAutoUpdate&&e.updateMatrix(),AOe(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const l=this.processMesh(e);l!==null&&(s.mesh=l)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const l=[];for(let c=0,u=e.children.length;c<u;c++){const d=e.children[c];if(d.visible||t.onlyVisible===!1){const f=this.processNode(d);f!==null&&l.push(f)}}l.length>0&&(s.children=l)}this._invokeAll(function(l){l.writeNode&&l.writeNode(e,s)});const o=i.nodes.push(s)-1;return r.set(e,o),o}processScene(e){const i=this.json,t=this.options;i.scenes||(i.scenes=[],i.scene=0);const r={};e.name!==""&&(r.name=e.name),i.scenes.push(r);const s=[];for(let o=0,l=e.children.length;o<l;o++){const c=e.children[o];if(c.visible||t.onlyVisible===!1){const u=this.processNode(c);u!==null&&s.push(u)}}s.length>0&&(r.nodes=s),this.serializeUserData(e,r)}processObjects(e){const i=new bp;i.name="AuxScene";for(let t=0;t<e.length;t++)i.children.push(e[t]);this.processScene(i)}processInput(e){const i=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(r){r.beforeParse&&r.beforeParse(e)});const t=[];for(let r=0;r<e.length;r++)e[r]instanceof bp?this.processScene(e[r]):t.push(e[r]);t.length>0&&this.processObjects(t);for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<i.animations.length;++r)this.processAnimation(i.animations[r],e[0]);this._invokeAll(function(r){r.afterParse&&r.afterParse(e)})}_invokeAll(e){for(let i=0,t=this.plugins.length;i<t;i++)e(this.plugins[i])}}class DOe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,i){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const t=this.writer,r=t.json,s=t.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},s[this.name]=!0);const l=r.extensions[this.name].lights;l.push(o),i.extensions=i.extensions||{},i.extensions[this.name]={light:l.length-1}}}let NOe=class{constructor(n){this.writer=n,this.name="KHR_materials_unlit"}writeMaterial(n,e){if(!n.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},i[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}},$Oe=class{constructor(n){this.writer=n,this.name="KHR_materials_clearcoat"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.clearcoat===0)return;const i=this.writer,t=i.extensionsUsed,r={};if(r.clearcoatFactor=n.clearcoat,n.clearcoatMap){const s={index:i.processTexture(n.clearcoatMap),texCoord:n.clearcoatMap.channel};i.applyTextureTransform(s,n.clearcoatMap),r.clearcoatTexture=s}if(r.clearcoatRoughnessFactor=n.clearcoatRoughness,n.clearcoatRoughnessMap){const s={index:i.processTexture(n.clearcoatRoughnessMap),texCoord:n.clearcoatRoughnessMap.channel};i.applyTextureTransform(s,n.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=s}if(n.clearcoatNormalMap){const s={index:i.processTexture(n.clearcoatNormalMap),texCoord:n.clearcoatNormalMap.channel};i.applyTextureTransform(s,n.clearcoatNormalMap),r.clearcoatNormalTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},VOe=class{constructor(n){this.writer=n,this.name="KHR_materials_iridescence"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.iridescence===0)return;const i=this.writer,t=i.extensionsUsed,r={};if(r.iridescenceFactor=n.iridescence,n.iridescenceMap){const s={index:i.processTexture(n.iridescenceMap),texCoord:n.iridescenceMap.channel};i.applyTextureTransform(s,n.iridescenceMap),r.iridescenceTexture=s}if(r.iridescenceIor=n.iridescenceIOR,r.iridescenceThicknessMinimum=n.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=n.iridescenceThicknessRange[1],n.iridescenceThicknessMap){const s={index:i.processTexture(n.iridescenceThicknessMap),texCoord:n.iridescenceThicknessMap.channel};i.applyTextureTransform(s,n.iridescenceThicknessMap),r.iridescenceThicknessTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},LOe=class{constructor(n){this.writer=n,this.name="KHR_materials_transmission"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.transmission===0)return;const i=this.writer,t=i.extensionsUsed,r={};if(r.transmissionFactor=n.transmission,n.transmissionMap){const s={index:i.processTexture(n.transmissionMap),texCoord:n.transmissionMap.channel};i.applyTextureTransform(s,n.transmissionMap),r.transmissionTexture=s}e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},BOe=class{constructor(n){this.writer=n,this.name="KHR_materials_volume"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.transmission===0)return;const i=this.writer,t=i.extensionsUsed,r={};if(r.thicknessFactor=n.thickness,n.thicknessMap){const s={index:i.processTexture(n.thicknessMap),texCoord:n.thicknessMap.channel};i.applyTextureTransform(s,n.thicknessMap),r.thicknessTexture=s}r.attenuationDistance=n.attenuationDistance,r.attenuationColor=n.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},UOe=class{constructor(n){this.writer=n,this.name="KHR_materials_ior"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.ior===1.5)return;const i=this.writer.extensionsUsed,t={};t.ior=n.ior,e.extensions=e.extensions||{},e.extensions[this.name]=t,i[this.name]=!0}},FOe=class{constructor(n){this.writer=n,this.name="KHR_materials_specular"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.specularIntensity===1&&n.specularColor.equals(COe)&&!n.specularIntensityMap&&!n.specularColorTexture)return;const i=this.writer,t=i.extensionsUsed,r={};if(n.specularIntensityMap){const s={index:i.processTexture(n.specularIntensityMap),texCoord:n.specularIntensityMap.channel};i.applyTextureTransform(s,n.specularIntensityMap),r.specularTexture=s}if(n.specularColorMap){const s={index:i.processTexture(n.specularColorMap),texCoord:n.specularColorMap.channel};i.applyTextureTransform(s,n.specularColorMap),r.specularColorTexture=s}r.specularFactor=n.specularIntensity,r.specularColorFactor=n.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},zOe=class{constructor(n){this.writer=n,this.name="KHR_materials_sheen"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.sheen==0)return;const i=this.writer,t=i.extensionsUsed,r={};if(n.sheenRoughnessMap){const s={index:i.processTexture(n.sheenRoughnessMap),texCoord:n.sheenRoughnessMap.channel};i.applyTextureTransform(s,n.sheenRoughnessMap),r.sheenRoughnessTexture=s}if(n.sheenColorMap){const s={index:i.processTexture(n.sheenColorMap),texCoord:n.sheenColorMap.channel};i.applyTextureTransform(s,n.sheenColorMap),r.sheenColorTexture=s}r.sheenRoughnessFactor=n.sheenRoughness,r.sheenColorFactor=n.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},XOe=class{constructor(n){this.writer=n,this.name="KHR_materials_anisotropy"}writeMaterial(n,e){if(!n.isMeshPhysicalMaterial||n.anisotropy==0)return;const i=this.writer,t=i.extensionsUsed,r={};if(n.anisotropyMap){const s={index:i.processTexture(n.anisotropyMap)};i.applyTextureTransform(s,n.anisotropyMap),r.anisotropyTexture=s}r.anisotropyStrength=n.anisotropy,r.anisotropyRotation=n.anisotropyRotation,e.extensions=e.extensions||{},e.extensions[this.name]=r,t[this.name]=!0}},WOe=class{constructor(n){this.writer=n,this.name="KHR_materials_emissive_strength"}writeMaterial(n,e){if(!n.isMeshStandardMaterial||n.emissiveIntensity===1)return;const i=this.writer.extensionsUsed,t={};t.emissiveStrength=n.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=t,i[this.name]=!0}};var Fo=Uint8Array,Ku=Uint16Array,IT=Uint32Array,T9=new Fo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),M9=new Fo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),QOe=new Fo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E9=function(n,e){for(var i=new Ku(31),t=0;t<31;++t)i[t]=e+=1<<n[t-1];for(var r=new IT(i[30]),t=1;t<30;++t)for(var s=i[t];s<i[t+1];++s)r[s]=s-i[t]<<5|t;return[i,r]},P9=E9(T9,2),A9=P9[0],HOe=P9[1];A9[28]=258,HOe[258]=28;var GOe=E9(M9,0),YOe=GOe[0],R9=new Ku(32768);for(var On=0;On<32768;++On){var Gc=(On&43690)>>>1|(On&21845)<<1;Gc=(Gc&52428)>>>2|(Gc&13107)<<2,Gc=(Gc&61680)>>>4|(Gc&3855)<<4,R9[On]=((Gc&65280)>>>8|(Gc&255)<<8)>>>1}var P0=function(n,e,i){for(var t=n.length,r=0,s=new Ku(e);r<t;++r)++s[n[r]-1];var o=new Ku(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var l;{l=new Ku(1<<e);var c=15-e;for(r=0;r<t;++r)if(n[r])for(var u=r<<4|n[r],d=e-n[r],f=o[n[r]-1]++<<d,m=f|(1<<d)-1;f<=m;++f)l[R9[f]>>>c]=u}return l},hy=new Fo(288);for(var On=0;On<144;++On)hy[On]=8;for(var On=144;On<256;++On)hy[On]=9;for(var On=256;On<280;++On)hy[On]=7;for(var On=280;On<288;++On)hy[On]=8;var I9=new Fo(32);for(var On=0;On<32;++On)I9[On]=5;var jOe=P0(hy,9),qOe=P0(I9,5),qC=function(n){for(var e=n[0],i=1;i<n.length;++i)n[i]>e&&(e=n[i]);return e},ga=function(n,e,i){var t=e/8|0;return(n[t]|n[t+1]<<8)>>(e&7)&i},ZC=function(n,e){var i=e/8|0;return(n[i]|n[i+1]<<8|n[i+2]<<16)>>(e&7)},ZOe=function(n){return(n/8|0)+(n&7&&1)},KOe=function(n,e,i){(i==null||i>n.length)&&(i=n.length);var t=new(n instanceof Ku?Ku:n instanceof IT?IT:Fo)(i-e);return t.set(n.subarray(e,i)),t},JOe=function(n,e,i){var t=n.length;if(!t||i&&!i.l&&t<5)return e||new Fo(0);var r=!e||i,s=!i||i.i;i||(i={}),e||(e=new Fo(t*3));var o=function(Ce){var K=e.length;if(Ce>K){var j=new Fo(Math.max(K*2,Ce));j.set(e),e=j}},l=i.f||0,c=i.p||0,u=i.b||0,d=i.l,f=i.d,m=i.m,g=i.n,y=t*8;do{if(!d){i.f=l=ga(n,c,1);var x=ga(n,c+1,3);if(c+=3,x)if(x==1)d=jOe,f=qOe,m=9,g=5;else if(x==2){var b=ga(n,c,31)+257,S=ga(n,c+10,15)+4,_=b+ga(n,c+5,31)+1;c+=14;for(var O=new Fo(_),k=new Fo(19),M=0;M<S;++M)k[QOe[M]]=ga(n,c+M*3,7);c+=S*3;for(var E=qC(k),R=(1<<E)-1,P=P0(k,E),M=0;M<_;){var I=P[ga(n,c,R)];c+=I&15;var T=I>>>4;if(T<16)O[M++]=T;else{var N=0,L=0;for(T==16?(L=3+ga(n,c,3),c+=2,N=O[M-1]):T==17?(L=3+ga(n,c,7),c+=3):T==18&&(L=11+ga(n,c,127),c+=7);L--;)O[M++]=N}}var D=O.subarray(0,b),$=O.subarray(b);m=qC(D),g=qC($),d=P0(D,m),f=P0($,g)}else throw"invalid block type";else{var T=ZOe(c)+4,B=n[T-4]|n[T-3]<<8,U=T+B;if(U>t){if(s)throw"unexpected EOF";break}r&&o(u+B),e.set(n.subarray(T,U),u),i.b=u+=B,i.p=c=U*8;continue}if(c>y){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var Q=(1<<m)-1,Z=(1<<g)-1,te=c;;te=c){var N=d[ZC(n,c)&Q],ce=N>>>4;if(c+=N&15,c>y){if(s)throw"unexpected EOF";break}if(!N)throw"invalid length/literal";if(ce<256)e[u++]=ce;else if(ce==256){te=c,d=null;break}else{var pe=ce-254;if(ce>264){var M=ce-257,Ee=T9[M];pe=ga(n,c,(1<<Ee)-1)+A9[M],c+=Ee}var we=f[ZC(n,c)&Z],he=we>>>4;if(!we)throw"invalid distance";c+=we&15;var $=YOe[he];if(he>3){var Ee=M9[he];$+=ZC(n,c)&(1<<Ee)-1,c+=Ee}if(c>y){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var _e=u+pe;u<_e;u+=4)e[u]=e[u-$],e[u+1]=e[u+1-$],e[u+2]=e[u+2-$],e[u+3]=e[u+3-$];u=_e}}i.l=d,i.p=te,i.b=u,d&&(l=1,i.m=m,i.d=f,i.n=g)}while(!l);return u==e.length?e:KOe(e,0,u)},ewe=new Fo(0),twe=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function iwe(n,e){return JOe((twe(n),n.subarray(2,-4)),e)}var nwe=typeof TextDecoder<"u"&&new TextDecoder,rwe=0;try{nwe.decode(ewe,{stream:!0}),rwe=1}catch{}new Ws;new ne;new pr(0,0,0,"YXZ");new ne;var swe=Object.defineProperty,owe=(n,e,i)=>e in n?swe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,ti=(n,e,i)=>(owe(n,typeof e!="symbol"?e+"":e,i),i);const Sb=new bd,jD=new ya,awe=Math.cos(70*(Math.PI/180)),qD=(n,e)=>(n%e+e)%e;class lwe extends hl{constructor(e,i){super(),ti(this,"object"),ti(this,"domElement"),ti(this,"enabled",!0),ti(this,"target",new ne),ti(this,"minDistance",0),ti(this,"maxDistance",1/0),ti(this,"minZoom",0),ti(this,"maxZoom",1/0),ti(this,"minPolarAngle",0),ti(this,"maxPolarAngle",Math.PI),ti(this,"minAzimuthAngle",-1/0),ti(this,"maxAzimuthAngle",1/0),ti(this,"enableDamping",!1),ti(this,"dampingFactor",.05),ti(this,"enableZoom",!0),ti(this,"zoomSpeed",1),ti(this,"enableRotate",!0),ti(this,"rotateSpeed",1),ti(this,"enablePan",!0),ti(this,"panSpeed",1),ti(this,"screenSpacePanning",!0),ti(this,"keyPanSpeed",7),ti(this,"zoomToCursor",!1),ti(this,"autoRotate",!1),ti(this,"autoRotateSpeed",2),ti(this,"reverseOrbit",!1),ti(this,"reverseHorizontalOrbit",!1),ti(this,"reverseVerticalOrbit",!1),ti(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ti(this,"mouseButtons",{LEFT:wu.ROTATE,MIDDLE:wu.DOLLY,RIGHT:wu.PAN}),ti(this,"touches",{ONE:Vl.ROTATE,TWO:Vl.DOLLY_PAN}),ti(this,"target0"),ti(this,"position0"),ti(this,"zoom0"),ti(this,"_domElementKeyEvents",null),ti(this,"getPolarAngle"),ti(this,"getAzimuthalAngle"),ti(this,"setPolarAngle"),ti(this,"setAzimuthalAngle"),ti(this,"getDistance"),ti(this,"listenToKeyEvents"),ti(this,"stopListenToKeyEvents"),ti(this,"saveState"),ti(this,"reset"),ti(this,"update"),ti(this,"connect"),ti(this,"dispose"),this.object=e,this.domElement=i,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=Se=>{let Le=qD(Se,2*Math.PI),me=d.phi;me<0&&(me+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let Be=Math.abs(Le-me);2*Math.PI-Be<Be&&(Le<me?Le+=2*Math.PI:me+=2*Math.PI),f.phi=Le-me,t.update()},this.setAzimuthalAngle=Se=>{let Le=qD(Se,2*Math.PI),me=d.theta;me<0&&(me+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let Be=Math.abs(Le-me);2*Math.PI-Be<Be&&(Le<me?Le+=2*Math.PI:me+=2*Math.PI),f.theta=Le-me,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=Se=>{Se.addEventListener("keydown",rt),this._domElementKeyEvents=Se},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",rt),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(r),t.update(),c=l.NONE},this.update=(()=>{const Se=new ne,Le=new ne(0,1,0),me=new ir().setFromUnitVectors(e.up,Le),Be=me.clone().invert(),Xe=new ne,tt=new ir,dt=2*Math.PI;return function(){const _i=t.object.position;me.setFromUnitVectors(e.up,Le),Be.copy(me).invert(),Se.copy(_i).sub(t.target),Se.applyQuaternion(me),d.setFromVector3(Se),t.autoRotate&&c===l.NONE&&$(L()),t.enableDamping?(d.theta+=f.theta*t.dampingFactor,d.phi+=f.phi*t.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let Si=t.minAzimuthAngle,Di=t.maxAzimuthAngle;isFinite(Si)&&isFinite(Di)&&(Si<-Math.PI?Si+=dt:Si>Math.PI&&(Si-=dt),Di<-Math.PI?Di+=dt:Di>Math.PI&&(Di-=dt),Si<=Di?d.theta=Math.max(Si,Math.min(Di,d.theta)):d.theta=d.theta>(Si+Di)/2?Math.max(Si,d.theta):Math.min(Di,d.theta)),d.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,d.phi)),d.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(g,t.dampingFactor):t.target.add(g),t.zoomToCursor&&I||t.object.isOrthographicCamera?d.radius=Ee(d.radius):d.radius=Ee(d.radius*m),Se.setFromSpherical(d),Se.applyQuaternion(Be),_i.copy(t.target).add(Se),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(f.theta*=1-t.dampingFactor,f.phi*=1-t.dampingFactor,g.multiplyScalar(1-t.dampingFactor)):(f.set(0,0,0),g.set(0,0,0));let Sn=!1;if(t.zoomToCursor&&I){let yi=null;if(t.object instanceof en&&t.object.isPerspectiveCamera){const Or=Se.length();yi=Ee(Or*m);const En=Or-yi;t.object.position.addScaledVector(R,En),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const Or=new ne(P.x,P.y,0);Or.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/m)),t.object.updateProjectionMatrix(),Sn=!0;const En=new ne(P.x,P.y,0);En.unproject(t.object),t.object.position.sub(En).add(Or),t.object.updateMatrixWorld(),yi=Se.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;yi!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(yi).add(t.object.position):(Sb.origin.copy(t.object.position),Sb.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(Sb.direction))<awe?e.lookAt(t.target):(jD.setFromNormalAndCoplanarPoint(t.object.up,t.target),Sb.intersectPlane(jD,t.target))))}else t.object instanceof Wo&&t.object.isOrthographicCamera&&(Sn=m!==1,Sn&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/m)),t.object.updateProjectionMatrix()));return m=1,I=!1,Sn||Xe.distanceToSquared(t.object.position)>u||8*(1-tt.dot(t.object.quaternion))>u?(t.dispatchEvent(r),Xe.copy(t.object.position),tt.copy(t.object.quaternion),Sn=!1,!0):!1}})(),this.connect=Se=>{Se===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=Se,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",kt),t.domElement.addEventListener("pointerdown",ue),t.domElement.addEventListener("pointercancel",Te),t.domElement.addEventListener("wheel",Fe,{passive:!0})},this.dispose=()=>{var Se,Le,me,Be,Xe,tt;t.domElement&&(t.domElement.style.touchAction="auto"),(Se=t.domElement)==null||Se.removeEventListener("contextmenu",kt),(Le=t.domElement)==null||Le.removeEventListener("pointerdown",ue),(me=t.domElement)==null||me.removeEventListener("pointercancel",Te),(Be=t.domElement)==null||Be.removeEventListener("wheel",Fe),(Xe=t.domElement)==null||Xe.ownerDocument.removeEventListener("pointermove",de),(tt=t.domElement)==null||tt.ownerDocument.removeEventListener("pointerup",Oe),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",rt)};const t=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const u=1e-6,d=new wT,f=new wT;let m=1;const g=new ne,y=new ze,x=new ze,b=new ze,S=new ze,_=new ze,O=new ze,k=new ze,M=new ze,E=new ze,R=new ne,P=new ze;let I=!1;const T=[],N={};function L(){return 2*Math.PI/60/60*t.autoRotateSpeed}function D(){return Math.pow(.95,t.zoomSpeed)}function $(Se){t.reverseOrbit||t.reverseHorizontalOrbit?f.theta+=Se:f.theta-=Se}function B(Se){t.reverseOrbit||t.reverseVerticalOrbit?f.phi+=Se:f.phi-=Se}const U=(()=>{const Se=new ne;return function(Le,me){Se.setFromMatrixColumn(me,0),Se.multiplyScalar(-Le),g.add(Se)}})(),Q=(()=>{const Se=new ne;return function(Le,me){t.screenSpacePanning===!0?Se.setFromMatrixColumn(me,1):(Se.setFromMatrixColumn(me,0),Se.crossVectors(t.object.up,Se)),Se.multiplyScalar(Le),g.add(Se)}})(),Z=(()=>{const Se=new ne;return function(Le,me){const Be=t.domElement;if(Be&&t.object instanceof en&&t.object.isPerspectiveCamera){const Xe=t.object.position;Se.copy(Xe).sub(t.target);let tt=Se.length();tt*=Math.tan(t.object.fov/2*Math.PI/180),U(2*Le*tt/Be.clientHeight,t.object.matrix),Q(2*me*tt/Be.clientHeight,t.object.matrix)}else Be&&t.object instanceof Wo&&t.object.isOrthographicCamera?(U(Le*(t.object.right-t.object.left)/t.object.zoom/Be.clientWidth,t.object.matrix),Q(me*(t.object.top-t.object.bottom)/t.object.zoom/Be.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function te(Se){t.object instanceof en&&t.object.isPerspectiveCamera||t.object instanceof Wo&&t.object.isOrthographicCamera?m/=Se:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function ce(Se){t.object instanceof en&&t.object.isPerspectiveCamera||t.object instanceof Wo&&t.object.isOrthographicCamera?m*=Se:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function pe(Se){if(!t.zoomToCursor||!t.domElement)return;I=!0;const Le=t.domElement.getBoundingClientRect(),me=Se.clientX-Le.left,Be=Se.clientY-Le.top,Xe=Le.width,tt=Le.height;P.x=me/Xe*2-1,P.y=-(Be/tt)*2+1,R.set(P.x,P.y,1).unproject(t.object).sub(t.object.position).normalize()}function Ee(Se){return Math.max(t.minDistance,Math.min(t.maxDistance,Se))}function we(Se){y.set(Se.clientX,Se.clientY)}function he(Se){pe(Se),k.set(Se.clientX,Se.clientY)}function _e(Se){S.set(Se.clientX,Se.clientY)}function Ce(Se){x.set(Se.clientX,Se.clientY),b.subVectors(x,y).multiplyScalar(t.rotateSpeed);const Le=t.domElement;Le&&($(2*Math.PI*b.x/Le.clientHeight),B(2*Math.PI*b.y/Le.clientHeight)),y.copy(x),t.update()}function K(Se){M.set(Se.clientX,Se.clientY),E.subVectors(M,k),E.y>0?te(D()):E.y<0&&ce(D()),k.copy(M),t.update()}function j(Se){_.set(Se.clientX,Se.clientY),O.subVectors(_,S).multiplyScalar(t.panSpeed),Z(O.x,O.y),S.copy(_),t.update()}function F(Se){pe(Se),Se.deltaY<0?ce(D()):Se.deltaY>0&&te(D()),t.update()}function z(Se){let Le=!1;switch(Se.code){case t.keys.UP:Z(0,t.keyPanSpeed),Le=!0;break;case t.keys.BOTTOM:Z(0,-t.keyPanSpeed),Le=!0;break;case t.keys.LEFT:Z(t.keyPanSpeed,0),Le=!0;break;case t.keys.RIGHT:Z(-t.keyPanSpeed,0),Le=!0;break}Le&&(Se.preventDefault(),t.update())}function ee(){if(T.length==1)y.set(T[0].pageX,T[0].pageY);else{const Se=.5*(T[0].pageX+T[1].pageX),Le=.5*(T[0].pageY+T[1].pageY);y.set(Se,Le)}}function re(){if(T.length==1)S.set(T[0].pageX,T[0].pageY);else{const Se=.5*(T[0].pageX+T[1].pageX),Le=.5*(T[0].pageY+T[1].pageY);S.set(Se,Le)}}function W(){const Se=T[0].pageX-T[1].pageX,Le=T[0].pageY-T[1].pageY,me=Math.sqrt(Se*Se+Le*Le);k.set(0,me)}function q(){t.enableZoom&&W(),t.enablePan&&re()}function ae(){t.enableZoom&&W(),t.enableRotate&&ee()}function fe(Se){if(T.length==1)x.set(Se.pageX,Se.pageY);else{const me=li(Se),Be=.5*(Se.pageX+me.x),Xe=.5*(Se.pageY+me.y);x.set(Be,Xe)}b.subVectors(x,y).multiplyScalar(t.rotateSpeed);const Le=t.domElement;Le&&($(2*Math.PI*b.x/Le.clientHeight),B(2*Math.PI*b.y/Le.clientHeight)),y.copy(x)}function ye(Se){if(T.length==1)_.set(Se.pageX,Se.pageY);else{const Le=li(Se),me=.5*(Se.pageX+Le.x),Be=.5*(Se.pageY+Le.y);_.set(me,Be)}O.subVectors(_,S).multiplyScalar(t.panSpeed),Z(O.x,O.y),S.copy(_)}function Me(Se){const Le=li(Se),me=Se.pageX-Le.x,Be=Se.pageY-Le.y,Xe=Math.sqrt(me*me+Be*Be);M.set(0,Xe),E.set(0,Math.pow(M.y/k.y,t.zoomSpeed)),te(E.y),k.copy(M)}function J(Se){t.enableZoom&&Me(Se),t.enablePan&&ye(Se)}function G(Se){t.enableZoom&&Me(Se),t.enableRotate&&fe(Se)}function ue(Se){var Le,me;t.enabled!==!1&&(T.length===0&&((Le=t.domElement)==null||Le.ownerDocument.addEventListener("pointermove",de),(me=t.domElement)==null||me.ownerDocument.addEventListener("pointerup",Oe)),Tt(Se),Se.pointerType==="touch"?Ge(Se):We(Se))}function de(Se){t.enabled!==!1&&(Se.pointerType==="touch"?nt(Se):Ve(Se))}function Oe(Se){var Le,me,Be;ut(Se),T.length===0&&((Le=t.domElement)==null||Le.releasePointerCapture(Se.pointerId),(me=t.domElement)==null||me.ownerDocument.removeEventListener("pointermove",de),(Be=t.domElement)==null||Be.ownerDocument.removeEventListener("pointerup",Oe)),t.dispatchEvent(o),c=l.NONE}function Te(Se){ut(Se)}function We(Se){let Le;switch(Se.button){case 0:Le=t.mouseButtons.LEFT;break;case 1:Le=t.mouseButtons.MIDDLE;break;case 2:Le=t.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case wu.DOLLY:if(t.enableZoom===!1)return;he(Se),c=l.DOLLY;break;case wu.ROTATE:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(t.enablePan===!1)return;_e(Se),c=l.PAN}else{if(t.enableRotate===!1)return;we(Se),c=l.ROTATE}break;case wu.PAN:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(t.enableRotate===!1)return;we(Se),c=l.ROTATE}else{if(t.enablePan===!1)return;_e(Se),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&t.dispatchEvent(s)}function Ve(Se){if(t.enabled!==!1)switch(c){case l.ROTATE:if(t.enableRotate===!1)return;Ce(Se);break;case l.DOLLY:if(t.enableZoom===!1)return;K(Se);break;case l.PAN:if(t.enablePan===!1)return;j(Se);break}}function Fe(Se){t.enabled===!1||t.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(t.dispatchEvent(s),F(Se),t.dispatchEvent(o))}function rt(Se){t.enabled===!1||t.enablePan===!1||z(Se)}function Ge(Se){switch(zt(Se),T.length){case 1:switch(t.touches.ONE){case Vl.ROTATE:if(t.enableRotate===!1)return;ee(),c=l.TOUCH_ROTATE;break;case Vl.PAN:if(t.enablePan===!1)return;re(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(t.touches.TWO){case Vl.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;q(),c=l.TOUCH_DOLLY_PAN;break;case Vl.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;ae(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&t.dispatchEvent(s)}function nt(Se){switch(zt(Se),c){case l.TOUCH_ROTATE:if(t.enableRotate===!1)return;fe(Se),t.update();break;case l.TOUCH_PAN:if(t.enablePan===!1)return;ye(Se),t.update();break;case l.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;J(Se),t.update();break;case l.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;G(Se),t.update();break;default:c=l.NONE}}function kt(Se){t.enabled!==!1&&Se.preventDefault()}function Tt(Se){T.push(Se)}function ut(Se){delete N[Se.pointerId];for(let Le=0;Le<T.length;Le++)if(T[Le].pointerId==Se.pointerId){T.splice(Le,1);return}}function zt(Se){let Le=N[Se.pointerId];Le===void 0&&(Le=new ze,N[Se.pointerId]=Le),Le.set(Se.pageX,Se.pageY)}function li(Se){const Le=Se.pointerId===T[0].pointerId?T[1]:T[0];return N[Le.pointerId]}i!==void 0&&this.connect(i),this.update()}}new pt;new ne;function D9(n,e,i){const t=i.length-n-1;if(e>=i[t])return t-1;if(e<=i[n])return n;let r=n,s=t,o=Math.floor((r+s)/2);for(;e<i[o]||e>=i[o+1];)e<i[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function cwe(n,e,i,t){const r=[],s=[],o=[];r[0]=1;for(let l=1;l<=i;++l){s[l]=e-t[n+1-l],o[l]=t[n+l]-e;let c=0;for(let u=0;u<l;++u){const d=o[u+1],f=s[l-u],m=r[u]/(d+f);r[u]=c+d*m,c=f*m}r[l]=c}return r}function hwe(n,e,i,t){const r=D9(n,t,e),s=cwe(r,t,n,e),o=new bi(0,0,0,0);for(let l=0;l<=n;++l){const c=i[r-n+l],u=s[l],d=c.w*u;o.x+=c.x*d,o.y+=c.y*d,o.z+=c.z*d,o.w+=c.w*u}return o}function uwe(n,e,i,t,r){const s=[];for(let f=0;f<=i;++f)s[f]=0;const o=[];for(let f=0;f<=t;++f)o[f]=s.slice(0);const l=[];for(let f=0;f<=i;++f)l[f]=s.slice(0);l[0][0]=1;const c=s.slice(0),u=s.slice(0);for(let f=1;f<=i;++f){c[f]=e-r[n+1-f],u[f]=r[n+f]-e;let m=0;for(let g=0;g<f;++g){const y=u[g+1],x=c[f-g];l[f][g]=y+x;const b=l[g][f-1]/l[f][g];l[g][f]=m+y*b,m=x*b}l[f][f]=m}for(let f=0;f<=i;++f)o[0][f]=l[f][i];for(let f=0;f<=i;++f){let m=0,g=1;const y=[];for(let x=0;x<=i;++x)y[x]=s.slice(0);y[0][0]=1;for(let x=1;x<=t;++x){let b=0;const S=f-x,_=i-x;f>=x&&(y[g][0]=y[m][0]/l[_+1][S],b=y[g][0]*l[S][_]);const O=S>=-1?1:-S,k=f-1<=_?x-1:i-f;for(let E=O;E<=k;++E)y[g][E]=(y[m][E]-y[m][E-1])/l[_+1][S+E],b+=y[g][E]*l[S+E][_];f<=_&&(y[g][x]=-y[m][x-1]/l[_+1][f],b+=y[g][x]*l[f][_]),o[x][f]=b;const M=m;m=g,g=M}}let d=i;for(let f=1;f<=t;++f){for(let m=0;m<=i;++m)o[f][m]*=d;d*=i-f}return o}function dwe(n,e,i,t,r){const s=r<n?r:n,o=[],l=D9(n,t,e),c=uwe(l,t,n,s,e),u=[];for(let d=0;d<i.length;++d){const f=i[d].clone(),m=f.w;f.x*=m,f.y*=m,f.z*=m,u[d]=f}for(let d=0;d<=s;++d){const f=u[l-n].clone().multiplyScalar(c[d][0]);for(let m=1;m<=n;++m)f.add(u[l-n+m].clone().multiplyScalar(c[d][m]));o[d]=f}for(let d=s+1;d<=r+1;++d)o[d]=new bi(0,0,0);return o}function fwe(n,e){let i=1;for(let r=2;r<=n;++r)i*=r;let t=1;for(let r=2;r<=e;++r)t*=r;for(let r=2;r<=n-e;++r)t*=r;return i/t}function pwe(n){const e=n.length,i=[],t=[];for(let s=0;s<e;++s){const o=n[s];i[s]=new ne(o.x,o.y,o.z),t[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=i[s].clone();for(let l=1;l<=s;++l)o.sub(r[s-l].clone().multiplyScalar(fwe(s,l)*t[l]));r[s]=o.divideScalar(t[0])}return r}function mwe(n,e,i,t,r){const s=dwe(n,e,i,t,r);return pwe(s)}class ZD extends ea{constructor(e,i,t,r,s){super(),this.degree=e,this.knots=i,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<t.length;++o){const l=t[o];this.controlPoints[o]=new bi(l.x,l.y,l.z,l.w)}}getPoint(e,i){const t=i||new ne,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=hwe(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),t.set(s.x,s.y,s.z)}getTangent(e,i){const t=i||new ne,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=mwe(this.degree,this.knots,this.controlPoints,r,1);return t.copy(s[1]).normalize(),t}}let Ci,Hn,Vs;class gwe extends Ts{constructor(e){super(e)}load(e,i,t,r){const s=this,o=s.path===""?Sp.extractUrlBase(e):s.path,l=new sl(this.manager);l.setPath(s.path),l.setResponseType("arraybuffer"),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){try{i(s.parse(c,o))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},t,r)}parse(e,i){if(wwe(e))Ci=new Owe().parse(e);else{const r=L9(e);if(!_we(r))throw new Error("THREE.FBXLoader: Unknown format.");if(JD(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+JD(r));Ci=new xwe().parse(r)}const t=new Uw(this.manager).setPath(this.resourcePath||i).setCrossOrigin(this.crossOrigin);return new vwe(t,this.manager).parse(Ci)}}class vwe{constructor(e,i){this.textureLoader=e,this.manager=i}parse(){Hn=this.parseConnections();const e=this.parseImages(),i=this.parseTextures(e),t=this.parseMaterials(i),r=this.parseDeformers(),s=new ywe().parse(r);return this.parseScene(r,s,t),Vs}parseConnections(){const e=new Map;return"Connections"in Ci&&Ci.Connections.connections.forEach(function(i){const t=i[0],r=i[1],s=i[2];e.has(t)||e.set(t,{parents:[],children:[]});const o={ID:r,relationship:s};e.get(t).parents.push(o),e.has(r)||e.set(r,{parents:[],children:[]});const l={ID:t,relationship:s};e.get(r).children.push(l)}),e}parseImages(){const e={},i={};if("Video"in Ci.Objects){const t=Ci.Objects.Video;for(const r in t){const s=t[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const l=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,c=typeof s.Content=="string"&&s.Content!=="";if(l||c){const u=this.parseImage(t[r]);i[s.RelativeFilename||s.Filename]=u}}}}for(const t in e){const r=e[t];i[r]!==void 0?e[t]=i[r]:e[t]=e[t].split("\\").pop()}return e}parseImage(e){const i=e.Content,t=e.RelativeFilename||e.Filename,r=t.slice(t.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",t),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof i=="string")return"data:"+s+";base64,"+i;{const o=new Uint8Array(i);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const i=new Map;if("Texture"in Ci.Objects){const t=Ci.Objects.Texture;for(const r in t){const s=this.parseTexture(t[r],e);i.set(parseInt(r),s)}}return i}parseTexture(e,i){const t=this.loadTexture(e,i);t.ID=e.id,t.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,l=s!==void 0?s.value:0;if(t.wrapS=o===0?wh:bs,t.wrapT=l===0?wh:bs,"Scaling"in e){const c=e.Scaling.value;t.repeat.x=c[0],t.repeat.y=c[1]}return t}loadTexture(e,i){let t;const r=this.textureLoader.path,s=Hn.get(e.id).children;s!==void 0&&s.length>0&&i[s[0].ID]!==void 0&&(t=i[s[0].ID],(t.indexOf("blob:")===0||t.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const l=e.FileName.slice(-3).toLowerCase();if(l==="tga"){const c=this.manager.getHandler(".tga");c===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Xn):(c.setPath(this.textureLoader.path),o=c.load(t))}else l==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Xn):o=this.textureLoader.load(t);return this.textureLoader.setPath(r),o}parseMaterials(e){const i=new Map;if("Material"in Ci.Objects){const t=Ci.Objects.Material;for(const r in t){const s=this.parseMaterial(t[r],e);s!==null&&i.set(parseInt(r),s)}}return i}parseMaterial(e,i){const t=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Hn.has(t))return null;const o=this.parseParameters(e,i,t);let l;switch(s.toLowerCase()){case"phong":l=new M0;break;case"lambert":l=new lP;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),l=new M0;break}return l.setValues(o),l.name=r,l}parseParameters(e,i,t){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new it().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new it().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new it().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new it().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new it().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new it().fromArray(e.SpecularColor.value));const s=this;return Hn.get(t).children.forEach(function(o){const l=o.relationship;switch(l){case"Bump":r.bumpMap=s.getTexture(i,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(i,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(i,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(i,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(i,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(i,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(i,o.ID),r.envMap!==void 0&&(r.envMap.mapping=dp,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(i,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(i,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",l);break}}),r}getTexture(e,i){return"LayeredTexture"in Ci.Objects&&i in Ci.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),i=Hn.get(i).children[0].ID),e.get(i)}parseDeformers(){const e={},i={};if("Deformer"in Ci.Objects){const t=Ci.Objects.Deformer;for(const r in t){const s=t[r],o=Hn.get(parseInt(r));if(s.attrType==="Skin"){const l=this.parseSkeleton(o,t);l.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=o.parents[0].ID,e[r]=l}else if(s.attrType==="BlendShape"){const l={id:r};l.rawTargets=this.parseMorphTargets(o,t),l.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),i[r]=l}}}return{skeletons:e,morphTargets:i}}parseSkeleton(e,i){const t=[];return e.children.forEach(function(r){const s=i[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new pt().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),t.push(o)}),{rawBones:t,bones:[]}}parseMorphTargets(e,i){const t=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=i[s.ID],l={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;l.geoID=Hn.get(parseInt(s.ID)).children.filter(function(c){return c.relationship===void 0})[0].ID,t.push(l)}return t}parseScene(e,i,t){Vs=new zl;const r=this.parseModels(e.skeletons,i,t),s=Ci.Objects.Model,o=this;r.forEach(function(c){const u=s[c.ID];o.setLookAtProperties(c,u),Hn.get(c.ID).parents.forEach(function(d){const f=r.get(d.ID);f!==void 0&&f.add(c)}),c.parent===null&&Vs.add(c)}),this.bindSkeleton(e.skeletons,i,r),this.createAmbientLight(),Vs.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);const u=$9(c.userData.transformData);c.applyMatrix4(u),c.updateWorldMatrix()}});const l=new bwe().parse();Vs.children.length===1&&Vs.children[0].isGroup&&(Vs.children[0].animations=l,Vs=Vs.children[0]),Vs.animations=l}parseModels(e,i,t){const r=new Map,s=Ci.Objects.Model;for(const o in s){const l=parseInt(o),c=s[o],u=Hn.get(l);let d=this.buildSkeleton(u,e,l,c.attrName);if(!d){switch(c.attrType){case"Camera":d=this.createCamera(u);break;case"Light":d=this.createLight(u);break;case"Mesh":d=this.createMesh(u,i,t);break;case"NurbsCurve":d=this.createCurve(u,i);break;case"LimbNode":case"Root":d=new iv;break;case"Null":default:d=new zl;break}d.name=c.attrName?gi.sanitizeNodeName(c.attrName):"",d.ID=l}this.getTransformData(d,c),r.set(l,d)}return r}buildSkeleton(e,i,t,r){let s=null;return e.parents.forEach(function(o){for(const l in i){const c=i[l];c.rawBones.forEach(function(u,d){if(u.ID===o.ID){const f=s;s=new iv,s.matrixWorld.copy(u.transformLink),s.name=r?gi.sanitizeNodeName(r):"",s.ID=t,c.bones[d]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let i,t;if(e.children.forEach(function(r){const s=Ci.Objects.NodeAttribute[r.ID];s!==void 0&&(t=s)}),t===void 0)i=new Ii;else{let r=0;t.CameraProjectionType!==void 0&&t.CameraProjectionType.value===1&&(r=1);let s=1;t.NearPlane!==void 0&&(s=t.NearPlane.value/1e3);let o=1e3;t.FarPlane!==void 0&&(o=t.FarPlane.value/1e3);let l=window.innerWidth,c=window.innerHeight;t.AspectWidth!==void 0&&t.AspectHeight!==void 0&&(l=t.AspectWidth.value,c=t.AspectHeight.value);const u=l/c;let d=45;t.FieldOfView!==void 0&&(d=t.FieldOfView.value);const f=t.FocalLength?t.FocalLength.value:null;switch(r){case 0:i=new en(d,u,s,o),f!==null&&i.setFocalLength(f);break;case 1:i=new Wo(-l/2,l/2,c/2,-c/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),i=new Ii;break}}return i}createLight(e){let i,t;if(e.children.forEach(function(r){const s=Ci.Objects.NodeAttribute[r.ID];s!==void 0&&(t=s)}),t===void 0)i=new Ii;else{let r;t.LightType===void 0?r=0:r=t.LightType.value;let s=16777215;t.Color!==void 0&&(s=new it().fromArray(t.Color.value));let o=t.Intensity===void 0?1:t.Intensity.value/100;t.CastLightOnObject!==void 0&&t.CastLightOnObject.value===0&&(o=0);let l=0;t.FarAttenuationEnd!==void 0&&(t.EnableFarAttenuation!==void 0&&t.EnableFarAttenuation.value===0?l=0:l=t.FarAttenuationEnd.value);const c=1;switch(r){case 0:i=new uO(s,o,l,c);break;case 1:i=new pP(s,o);break;case 2:let u=Math.PI/3;t.InnerAngle!==void 0&&(u=Jr.degToRad(t.InnerAngle.value));let d=0;t.OuterAngle!==void 0&&(d=Jr.degToRad(t.OuterAngle.value),d=Math.max(d,1)),i=new Fw(s,o,l,u,d,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+t.LightType.value+", defaulting to a PointLight."),i=new uO(s,o);break}t.CastShadows!==void 0&&t.CastShadows.value===1&&(i.castShadow=!0)}return i}createMesh(e,i,t){let r,s=null,o=null;const l=[];return e.children.forEach(function(c){i.has(c.ID)&&(s=i.get(c.ID)),t.has(c.ID)&&l.push(t.get(c.ID))}),l.length>1?o=l:l.length>0?o=l[0]:(o=new M0({color:13421772}),l.push(o)),"color"in s.attributes&&l.forEach(function(c){c.vertexColors=!0}),s.FBX_Deformer?(r=new eP(s,o),r.normalizeSkinWeights()):r=new tn(s,o),r}createCurve(e,i){const t=e.children.reduce(function(s,o){return i.has(o.ID)&&(s=i.get(o.ID)),s},null),r=new rs({color:3342591,linewidth:1});return new rc(t,r)}getTransformData(e,i){const t={};"InheritType"in i&&(t.inheritType=parseInt(i.InheritType.value)),"RotationOrder"in i?t.eulerOrder=V9(i.RotationOrder.value):t.eulerOrder="ZYX","Lcl_Translation"in i&&(t.translation=i.Lcl_Translation.value),"PreRotation"in i&&(t.preRotation=i.PreRotation.value),"Lcl_Rotation"in i&&(t.rotation=i.Lcl_Rotation.value),"PostRotation"in i&&(t.postRotation=i.PostRotation.value),"Lcl_Scaling"in i&&(t.scale=i.Lcl_Scaling.value),"ScalingOffset"in i&&(t.scalingOffset=i.ScalingOffset.value),"ScalingPivot"in i&&(t.scalingPivot=i.ScalingPivot.value),"RotationOffset"in i&&(t.rotationOffset=i.RotationOffset.value),"RotationPivot"in i&&(t.rotationPivot=i.RotationPivot.value),e.userData.transformData=t}setLookAtProperties(e,i){"LookAtProperty"in i&&Hn.get(e.ID).children.forEach(function(t){if(t.relationship==="LookAtProperty"){const r=Ci.Objects.Model[t.ID];if("Lcl_Translation"in r){const s=r.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Vs.add(e.target)):e.lookAt(new ne().fromArray(s))}}})}bindSkeleton(e,i,t){const r=this.parsePoseNodes();for(const s in e){const o=e[s];Hn.get(parseInt(o.ID)).parents.forEach(function(l){if(i.has(l.ID)){const c=l.ID;Hn.get(c).parents.forEach(function(u){t.has(u.ID)&&t.get(u.ID).bind(new Jv(o.bones),r[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Ci.Objects){const i=Ci.Objects.Pose;for(const t in i)if(i[t].attrType==="BindPose"&&i[t].NbPoseNodes>0){const r=i[t].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new pt().fromArray(s.Matrix.a)}):e[r.Node]=new pt().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Ci&&"AmbientColor"in Ci.GlobalSettings){const e=Ci.GlobalSettings.AmbientColor.value,i=e[0],t=e[1],r=e[2];if(i!==0||t!==0||r!==0){const s=new it(i,t,r);Vs.add(new mP(s,1))}}}}class ywe{parse(e){const i=new Map;if("Geometry"in Ci.Objects){const t=Ci.Objects.Geometry;for(const r in t){const s=Hn.get(parseInt(r)),o=this.parseGeometry(s,t[r],e);i.set(parseInt(r),o)}}return i}parseGeometry(e,i,t){switch(i.attrType){case"Mesh":return this.parseMeshGeometry(e,i,t);case"NurbsCurve":return this.parseNurbsGeometry(i)}}parseMeshGeometry(e,i,t){const r=t.skeletons,s=[],o=e.parents.map(function(f){return Ci.Objects.Model[f.ID]});if(o.length===0)return;const l=e.children.reduce(function(f,m){return r[m.ID]!==void 0&&(f=r[m.ID]),f},null);e.children.forEach(function(f){t.morphTargets[f.ID]!==void 0&&s.push(t.morphTargets[f.ID])});const c=o[0],u={};"RotationOrder"in c&&(u.eulerOrder=V9(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);const d=$9(u);return this.genGeometry(i,l,s,d)}genGeometry(e,i,t,r){const s=new ni;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,i),l=this.genBuffers(o),c=new Ct(l.vertex,3);if(c.applyMatrix4(r),s.setAttribute("position",c),l.colors.length>0&&s.setAttribute("color",new Ct(l.colors,3)),i&&(s.setAttribute("skinIndex",new Ow(l.weightsIndices,4)),s.setAttribute("skinWeight",new Ct(l.vertexWeights,4)),s.FBX_Deformer=i),l.normal.length>0){const u=new ui().getNormalMatrix(r),d=new Ct(l.normal,3);d.applyNormalMatrix(u),s.setAttribute("normal",d)}if(l.uvs.forEach(function(u,d){let f="uv"+(d+1).toString();d===0&&(f="uv"),s.setAttribute(f,new Ct(l.uvs[d],2))}),o.material&&o.material.mappingType!=="AllSame"){let u=l.materialIndex[0],d=0;if(l.materialIndex.forEach(function(f,m){f!==u&&(s.addGroup(d,m-d,u),u=f,d=m)}),s.groups.length>0){const f=s.groups[s.groups.length-1],m=f.start+f.count;m!==l.materialIndex.length&&s.addGroup(m,l.materialIndex.length-m,u)}s.groups.length===0&&s.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(s,e,t,r),s}parseGeoNode(e,i){const t={};if(t.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],t.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(t.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(t.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(t.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){t.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&t.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return t.weightTable={},i!==null&&(t.skeleton=i,i.rawBones.forEach(function(r,s){r.indices.forEach(function(o,l){t.weightTable[o]===void 0&&(t.weightTable[o]=[]),t.weightTable[o].push({id:s,weight:r.weights[l]})})})),t}genBuffers(e){const i={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let t=0,r=0,s=!1,o=[],l=[],c=[],u=[],d=[],f=[];const m=this;return e.vertexIndices.forEach(function(g,y){let x,b=!1;g<0&&(g=g^-1,b=!0);let S=[],_=[];if(o.push(g*3,g*3+1,g*3+2),e.color){const O=Cb(y,t,g,e.color);c.push(O[0],O[1],O[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(O){_.push(O.weight),S.push(O.id)}),_.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const O=[0,0,0,0],k=[0,0,0,0];_.forEach(function(M,E){let R=M,P=S[E];k.forEach(function(I,T,N){if(R>I){N[T]=R,R=I;const L=O[T];O[T]=P,P=L}})}),S=O,_=k}for(;_.length<4;)_.push(0),S.push(0);for(let O=0;O<4;++O)d.push(_[O]),f.push(S[O])}if(e.normal){const O=Cb(y,t,g,e.normal);l.push(O[0],O[1],O[2])}e.material&&e.material.mappingType!=="AllSame"&&(x=Cb(y,t,g,e.material)[0]),e.uv&&e.uv.forEach(function(O,k){const M=Cb(y,t,g,O);u[k]===void 0&&(u[k]=[]),u[k].push(M[0]),u[k].push(M[1])}),r++,b&&(m.genFace(i,e,o,x,l,c,u,d,f,r),t++,r=0,o=[],l=[],c=[],u=[],d=[],f=[])}),i}genFace(e,i,t,r,s,o,l,c,u,d){for(let f=2;f<d;f++)e.vertex.push(i.vertexPositions[t[0]]),e.vertex.push(i.vertexPositions[t[1]]),e.vertex.push(i.vertexPositions[t[2]]),e.vertex.push(i.vertexPositions[t[(f-1)*3]]),e.vertex.push(i.vertexPositions[t[(f-1)*3+1]]),e.vertex.push(i.vertexPositions[t[(f-1)*3+2]]),e.vertex.push(i.vertexPositions[t[f*3]]),e.vertex.push(i.vertexPositions[t[f*3+1]]),e.vertex.push(i.vertexPositions[t[f*3+2]]),i.skeleton&&(e.vertexWeights.push(c[0]),e.vertexWeights.push(c[1]),e.vertexWeights.push(c[2]),e.vertexWeights.push(c[3]),e.vertexWeights.push(c[(f-1)*4]),e.vertexWeights.push(c[(f-1)*4+1]),e.vertexWeights.push(c[(f-1)*4+2]),e.vertexWeights.push(c[(f-1)*4+3]),e.vertexWeights.push(c[f*4]),e.vertexWeights.push(c[f*4+1]),e.vertexWeights.push(c[f*4+2]),e.vertexWeights.push(c[f*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(f-1)*4]),e.weightsIndices.push(u[(f-1)*4+1]),e.weightsIndices.push(u[(f-1)*4+2]),e.weightsIndices.push(u[(f-1)*4+3]),e.weightsIndices.push(u[f*4]),e.weightsIndices.push(u[f*4+1]),e.weightsIndices.push(u[f*4+2]),e.weightsIndices.push(u[f*4+3])),i.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(f-1)*3]),e.colors.push(o[(f-1)*3+1]),e.colors.push(o[(f-1)*3+2]),e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2])),i.material&&i.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),i.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(f-1)*3]),e.normal.push(s[(f-1)*3+1]),e.normal.push(s[(f-1)*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),i.uv&&i.uv.forEach(function(m,g){e.uvs[g]===void 0&&(e.uvs[g]=[]),e.uvs[g].push(l[g][0]),e.uvs[g].push(l[g][1]),e.uvs[g].push(l[g][(f-1)*2]),e.uvs[g].push(l[g][(f-1)*2+1]),e.uvs[g].push(l[g][f*2]),e.uvs[g].push(l[g][f*2+1])})}addMorphTargets(e,i,t,r){if(t.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;t.forEach(function(o){o.rawTargets.forEach(function(l){const c=Ci.Objects.Geometry[l.geoID];c!==void 0&&s.genMorphGeometry(e,i,c,r,l.name)})})}genMorphGeometry(e,i,t,r,s){const o=i.PolygonVertexIndex!==void 0?i.PolygonVertexIndex.a:[],l=t.Vertices!==void 0?t.Vertices.a:[],c=t.Indexes!==void 0?t.Indexes.a:[],u=e.attributes.position.count*3,d=new Float32Array(u);for(let y=0;y<c.length;y++){const x=c[y]*3;d[x]=l[y*3],d[x+1]=l[y*3+1],d[x+2]=l[y*3+2]}const f={vertexIndices:o,vertexPositions:d},m=this.genBuffers(f),g=new Ct(m.vertex,3);g.name=s||t.attrName,g.applyMatrix4(r),e.morphAttributes.position.push(g)}parseNormals(e){const i=e.MappingInformationType,t=e.ReferenceInformationType,r=e.Normals.a;let s=[];return t==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:i,referenceType:t}}parseUVs(e){const i=e.MappingInformationType,t=e.ReferenceInformationType,r=e.UV.a;let s=[];return t==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:i,referenceType:t}}parseVertexColors(e){const i=e.MappingInformationType,t=e.ReferenceInformationType,r=e.Colors.a;let s=[];return t==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:i,referenceType:t}}parseMaterialIndices(e){const i=e.MappingInformationType,t=e.ReferenceInformationType;if(i==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:t};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:i,referenceType:t}}parseNurbsGeometry(e){if(ZD===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new ni;const i=parseInt(e.Order);if(isNaN(i))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ni;const t=i-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let d=0,f=o.length;d<f;d+=4)s.push(new bi().fromArray(o,d));let l,c;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){l=t,c=r.length-1-l;for(let d=0;d<t;++d)s.push(s[d])}const u=new ZD(t,r,s,l,c).getPoints(s.length*12);return new ni().setFromPoints(u)}}class bwe{parse(){const e=[],i=this.parseClips();if(i!==void 0)for(const t in i){const r=i[t],s=this.addClip(r);e.push(s)}return e}parseClips(){if(Ci.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const i=this.parseAnimationLayers(e);return this.parseAnimStacks(i)}parseAnimationCurveNodes(){const e=Ci.Objects.AnimationCurveNode,i=new Map;for(const t in e){const r=e[t];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};i.set(s.id,s)}}return i}parseAnimationCurves(e){const i=Ci.Objects.AnimationCurve;for(const t in i){const r={id:i[t].id,times:i[t].KeyTime.a.map(Swe),values:i[t].KeyValueFloat.a},s=Hn.get(r.id);if(s!==void 0){const o=s.parents[0].ID,l=s.parents[0].relationship;l.match(/X/)?e.get(o).curves.x=r:l.match(/Y/)?e.get(o).curves.y=r:l.match(/Z/)?e.get(o).curves.z=r:l.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const i=Ci.Objects.AnimationLayer,t=new Map;for(const r in i){const s=[],o=Hn.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const d=Hn.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(d!==void 0){const f=Ci.Objects.Model[d.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const m={modelName:f.attrName?gi.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Vs.traverse(function(g){g.ID===f.id&&(m.transform=g.matrix,g.userData.transformData&&(m.eulerOrder=g.userData.transformData.eulerOrder))}),m.transform||(m.transform=new pt),"PreRotation"in f&&(m.preRotation=f.PreRotation.value),"PostRotation"in f&&(m.postRotation=f.PostRotation.value),s[c]=m}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const d=Hn.get(l.ID).parents.filter(function(b){return b.relationship!==void 0})[0].ID,f=Hn.get(d).parents[0].ID,m=Hn.get(f).parents[0].ID,g=Hn.get(m).parents[0].ID,y=Ci.Objects.Model[g],x={modelName:y.attrName?gi.sanitizeNodeName(y.attrName):"",morphName:Ci.Objects.Deformer[d].attrName};s[c]=x}s[c][u.attr]=u}}}),t.set(parseInt(r),s))}return t}parseAnimStacks(e){const i=Ci.Objects.AnimationStack,t={};for(const r in i){const s=Hn.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);t[r]={name:i[r].attrName,layer:o}}return t}addClip(e){let i=[];const t=this;return e.layer.forEach(function(r){i=i.concat(t.generateTracks(r))}),new _p(e.name,-1,i)}generateTracks(e){const i=[];let t=new ne,r=new ir,s=new ne;if(e.transform&&e.transform.decompose(t,r,s),t=t.toArray(),r=new pr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,t,"position");o!==void 0&&i.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&i.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&i.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&i.push(o)}return i}generateVectorTrack(e,i,t,r){const s=this.getTimesForAllAxes(i),o=this.getKeyframeTrackValues(s,i,t);return new wp(e+"."+r,s,o)}generateRotationTrack(e,i,t,r,s,o){i.x!==void 0&&(this.interpolateRotations(i.x),i.x.values=i.x.values.map(Jr.degToRad)),i.y!==void 0&&(this.interpolateRotations(i.y),i.y.values=i.y.values.map(Jr.degToRad)),i.z!==void 0&&(this.interpolateRotations(i.z),i.z.values=i.z.values.map(Jr.degToRad));const l=this.getTimesForAllAxes(i),c=this.getKeyframeTrackValues(l,i,t);r!==void 0&&(r=r.map(Jr.degToRad),r.push(o),r=new pr().fromArray(r),r=new ir().setFromEuler(r)),s!==void 0&&(s=s.map(Jr.degToRad),s.push(o),s=new pr().fromArray(s),s=new ir().setFromEuler(s).invert());const u=new ir,d=new pr,f=[];for(let m=0;m<c.length;m+=3)d.set(c[m],c[m+1],c[m+2],o),u.setFromEuler(d),r!==void 0&&u.premultiply(r),s!==void 0&&u.multiply(s),u.toArray(f,m/3*4);return new Od(e+".quaternion",l,f)}generateMorphTrack(e){const i=e.DeformPercent.curves.morph,t=i.values.map(function(s){return s/100}),r=Vs.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Op(e.modelName+".morphTargetInfluences["+r+"]",i.times,t)}getTimesForAllAxes(e){let i=[];if(e.x!==void 0&&(i=i.concat(e.x.times)),e.y!==void 0&&(i=i.concat(e.y.times)),e.z!==void 0&&(i=i.concat(e.z.times)),i=i.sort(function(t,r){return t-r}),i.length>1){let t=1,r=i[0];for(let s=1;s<i.length;s++){const o=i[s];o!==r&&(i[t]=o,r=o,t++)}i=i.slice(0,t)}return i}getKeyframeTrackValues(e,i,t){const r=t,s=[];let o=-1,l=-1,c=-1;return e.forEach(function(u){if(i.x&&(o=i.x.times.indexOf(u)),i.y&&(l=i.y.times.indexOf(u)),i.z&&(c=i.z.times.indexOf(u)),o!==-1){const d=i.x.values[o];s.push(d),r[0]=d}else s.push(r[0]);if(l!==-1){const d=i.y.values[l];s.push(d),r[1]=d}else s.push(r[1]);if(c!==-1){const d=i.z.values[c];s.push(d),r[2]=d}else s.push(r[2])}),s}interpolateRotations(e){for(let i=1;i<e.values.length;i++){const t=e.values[i-1],r=e.values[i]-t,s=Math.abs(r);if(s>=180){const o=s/180,l=r/o;let c=t+l;const u=e.times[i-1],d=(e.times[i]-u)/o;let f=u+d;const m=[],g=[];for(;f<e.times[i];)m.push(f),f+=d,g.push(c),c+=l;e.times=eN(e.times,i,m),e.values=eN(e.values,i,g)}}}}class xwe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,i){this.currentProp=e,this.currentPropName=i}parse(e){this.currentIndent=0,this.allNodes=new N9,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const i=this,t=e.split(/[\r\n]+/);return t.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),l=r.match(/^[\s\t]*$/);if(o||l)return;const c=r.match("^\\t{"+i.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+i.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),d=r.match("^\\t{"+(i.currentIndent-1)+"}}");c?i.parseNodeBegin(r,c):u?i.parseNodeProperty(r,u,t[++s]):d?i.popStack():r.match(/^[^\s\t}]/)&&i.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,i){const t=i[1].trim().replace(/^"/,"").replace(/"$/,""),r=i[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:t},o=this.parseNodeAttr(r),l=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(t,s):t in l?(t==="PoseNode"?l.PoseNode.push(s):l[t].id!==void 0&&(l[t]={},l[t][l[t].id]=l[t]),o.id!==""&&(l[t][o.id]=s)):typeof o.id=="number"?(l[t]={},l[t][o.id]=s):t!=="Properties70"&&(t==="PoseNode"?l[t]=[s]:l[t]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let i=e[0];e[0]!==""&&(i=parseInt(e[0]),isNaN(i)&&(i=e[0]));let t="",r="";return e.length>1&&(t=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:i,name:t,type:r}}parseNodeProperty(e,i,t){let r=i[1].replace(/^"/,"").replace(/"$/,"").trim(),s=i[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=t.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(f){return f.trim().replace(/^"/,"")}),r="connections",s=[c,u],kwe(s,d),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=JC(s))}parseNodePropertyContinued(e){const i=this.getCurrentNode();i.a+=e,e.slice(-1)!==","&&(i.a=JC(i.a))}parseNodeSpecialProperty(e,i,t){const r=t.split('",').map(function(d){return d.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],l=r[2],c=r[3];let u=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=JC(u);break}this.getPrevNode()[s]={type:o,type2:l,flag:c,value:u},this.setCurrentProp(this.getPrevNode(),s)}}class Owe{parse(e){const i=new KD(e);i.skip(23);const t=i.getUint32();if(t<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+t);const r=new N9;for(;!this.endOfContent(i);){const s=this.parseNode(i,t);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,i){const t={},r=i>=7500?e.getUint64():e.getUint32(),s=i>=7500?e.getUint64():e.getUint32();i>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),l=e.getString(o);if(r===0)return null;const c=[];for(let m=0;m<s;m++)c.push(this.parseProperty(e));const u=c.length>0?c[0]:"",d=c.length>1?c[1]:"",f=c.length>2?c[2]:"";for(t.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const m=this.parseNode(e,i);m!==null&&this.parseSubNode(l,t,m)}return t.propertyList=c,typeof u=="number"&&(t.id=u),d!==""&&(t.attrName=d),f!==""&&(t.attrType=f),l!==""&&(t.name=l),t}parseSubNode(e,i,t){if(t.singleProperty===!0){const r=t.propertyList[0];Array.isArray(r)?(i[t.name]=t,t.a=r):i[t.name]=r}else if(e==="Connections"&&t.name==="C"){const r=[];t.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),i.connections===void 0&&(i.connections=[]),i.connections.push(r)}else if(t.name==="Properties70")Object.keys(t).forEach(function(r){i[r]=t[r]});else if(e==="Properties70"&&t.name==="P"){let r=t.propertyList[0],s=t.propertyList[1];const o=t.propertyList[2],l=t.propertyList[3];let c;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?c=[t.propertyList[4],t.propertyList[5],t.propertyList[6]]:c=t.propertyList[4],i[r]={type:s,type2:o,flag:l,value:c}}else i[t.name]===void 0?typeof t.id=="number"?(i[t.name]={},i[t.name][t.id]=t):i[t.name]=t:t.name==="PoseNode"?(Array.isArray(i[t.name])||(i[t.name]=[i[t.name]]),i[t.name].push(t)):i[t.name][t.id]===void 0&&(i[t.name][t.id]=t)}parseProperty(e){const i=e.getString(1);let t;switch(i){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(i){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const l=iwe(new Uint8Array(e.getArrayBuffer(o))),c=new KD(l.buffer);switch(i){case"b":case"c":return c.getBooleanArray(r);case"d":return c.getFloat64Array(r);case"f":return c.getFloat32Array(r);case"i":return c.getInt32Array(r);case"l":return c.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+i)}}}class KD{constructor(e,i){this.dv=new DataView(e),this.offset=0,this.littleEndian=i!==void 0?i:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const i=[];for(let t=0;t<e;t++)i.push(this.getBoolean());return i}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const i=[];for(let t=0;t<e;t++)i.push(this.getInt32());return i}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,i;return this.littleEndian?(e=this.getUint32(),i=this.getUint32()):(i=this.getUint32(),e=this.getUint32()),i&2147483648?(i=~i&4294967295,e=~e&4294967295,e===4294967295&&(i=i+1&4294967295),e=e+1&4294967295,-(i*4294967296+e)):i*4294967296+e}getInt64Array(e){const i=[];for(let t=0;t<e;t++)i.push(this.getInt64());return i}getUint64(){let e,i;return this.littleEndian?(e=this.getUint32(),i=this.getUint32()):(i=this.getUint32(),e=this.getUint32()),i*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const i=[];for(let t=0;t<e;t++)i.push(this.getFloat32());return i}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const i=[];for(let t=0;t<e;t++)i.push(this.getFloat64());return i}getArrayBuffer(e){const i=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,i}getString(e){let i=[];for(let r=0;r<e;r++)i[r]=this.getUint8();const t=i.indexOf(0);return t>=0&&(i=i.slice(0,t)),Sp.decodeText(new Uint8Array(i))}}class N9{add(e,i){this[e]=i}}function wwe(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===L9(n,0,e.length)}function _we(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let i=0;function t(r){const s=n[r-1];return n=n.slice(i+r),i++,s}for(let r=0;r<e.length;++r)if(t(1)===e[r])return!1;return!0}function JD(n){const e=/FBXVersion: (\d+)/,i=n.match(e);if(i)return parseInt(i[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Swe(n){return n/46186158e3}const Cwe=[];function Cb(n,e,i,t){let r;switch(t.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=i;break;case"AllSame":r=t.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+t.mappingType)}t.referenceType==="IndexToDirect"&&(r=t.indices[r]);const s=r*t.dataSize,o=s+t.dataSize;return Twe(Cwe,t.buffer,s,o)}const KC=new pr,yf=new ne;function $9(n){const e=new pt,i=new pt,t=new pt,r=new pt,s=new pt,o=new pt,l=new pt,c=new pt,u=new pt,d=new pt,f=new pt,m=new pt,g=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(yf.fromArray(n.translation)),n.preRotation){const T=n.preRotation.map(Jr.degToRad);T.push(n.eulerOrder),i.makeRotationFromEuler(KC.fromArray(T))}if(n.rotation){const T=n.rotation.map(Jr.degToRad);T.push(n.eulerOrder),t.makeRotationFromEuler(KC.fromArray(T))}if(n.postRotation){const T=n.postRotation.map(Jr.degToRad);T.push(n.eulerOrder),r.makeRotationFromEuler(KC.fromArray(T)),r.invert()}n.scale&&s.scale(yf.fromArray(n.scale)),n.scalingOffset&&l.setPosition(yf.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(yf.fromArray(n.scalingPivot)),n.rotationOffset&&c.setPosition(yf.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(yf.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(f.copy(n.parentMatrix),d.copy(n.parentMatrixWorld));const y=i.clone().multiply(t).multiply(r),x=new pt;x.extractRotation(d);const b=new pt;b.copyPosition(d);const S=b.clone().invert().multiply(d),_=x.clone().invert().multiply(S),O=s,k=new pt;if(g===0)k.copy(x).multiply(y).multiply(_).multiply(O);else if(g===1)k.copy(x).multiply(_).multiply(y).multiply(O);else{const T=new pt().scale(new ne().setFromMatrixScale(f)).clone().invert(),N=_.clone().multiply(T);k.copy(x).multiply(y).multiply(N).multiply(O)}const M=u.clone().invert(),E=o.clone().invert();let R=e.clone().multiply(c).multiply(u).multiply(i).multiply(t).multiply(r).multiply(M).multiply(l).multiply(o).multiply(s).multiply(E);const P=new pt().copyPosition(R),I=d.clone().multiply(P);return m.copyPosition(I),R=m.clone().multiply(k),R.premultiply(d.invert()),R}function V9(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function JC(n){return n.split(",").map(function(e){return parseFloat(e)})}function L9(n,e,i){return e===void 0&&(e=0),i===void 0&&(i=n.byteLength),Sp.decodeText(new Uint8Array(n,e,i))}function kwe(n,e){for(let i=0,t=n.length,r=e.length;i<r;i++,t++)n[t]=e[i]}function Twe(n,e,i,t){for(let r=i,s=0;r<t;r++,s++)n[s]=e[r];return n}function eN(n,e,i){return n.slice(0,e).concat(i).concat(n.slice(e))}var Mwe=Object.defineProperty,Ewe=(n,e,i)=>e in n?Mwe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,e3=(n,e,i)=>(Ewe(n,typeof e!="symbol"?e+"":e,i),i);class B9{constructor(e){e3(this,"data"),this.data=e}generateShapes(e,i=100,t){const r=[],s={letterSpacing:0,lineHeight:1,...t},o=Pwe(e,i,this.data,s);for(let l=0,c=o.length;l<c;l++)Array.prototype.push.apply(r,o[l].toShapes(!1));return r}}e3(B9,"isFont");e3(B9,"type");function Pwe(n,e,i,t){const r=Array.from(n),s=e/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*s,l=[];let c=0,u=0;for(let d=0;d<r.length;d++){const f=r[d];if(f===`
`)c=0,u-=o*t.lineHeight;else{const m=Awe(f,s,c,u,i);m&&(c+=m.offsetX+t.letterSpacing,l.push(m.path))}}return l}function Awe(n,e,i,t,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const o=new yz;let l,c,u,d,f,m,g,y;if(s.o){const x=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let b=0,S=x.length;b<S;)switch(x[b++]){case"m":l=parseInt(x[b++])*e+i,c=parseInt(x[b++])*e+t,o.moveTo(l,c);break;case"l":l=parseInt(x[b++])*e+i,c=parseInt(x[b++])*e+t,o.lineTo(l,c);break;case"q":u=parseInt(x[b++])*e+i,d=parseInt(x[b++])*e+t,f=parseInt(x[b++])*e+i,m=parseInt(x[b++])*e+t,o.quadraticCurveTo(f,m,u,d);break;case"b":u=parseInt(x[b++])*e+i,d=parseInt(x[b++])*e+t,f=parseInt(x[b++])*e+i,m=parseInt(x[b++])*e+t,g=parseInt(x[b++])*e+i,y=parseInt(x[b++])*e+t,o.bezierCurveTo(f,m,g,y,u,d);break}}return{offsetX:s.ha*e,path:o}}class pv extends tn{constructor(e,i={}){super(e),this.isReflector=!0,this.type="Reflector",this.camera=new en;const t=this,r=i.color!==void 0?new it(i.color):new it(8355711),s=i.textureWidth||512,o=i.textureHeight||512,l=i.clipBias||0,c=i.shader||pv.ReflectorShader,u=i.multisample!==void 0?i.multisample:4,d=new ya,f=new ne,m=new ne,g=new ne,y=new pt,x=new ne(0,0,-1),b=new bi,S=new ne,_=new ne,O=new bi,k=new pt,M=this.camera,E=new Zo(s,o,{samples:u,type:zp}),R=new ks({name:c.name!==void 0?c.name:"unspecified",uniforms:Yv.clone(c.uniforms),fragmentShader:c.fragmentShader,vertexShader:c.vertexShader});R.uniforms.tDiffuse.value=E.texture,R.uniforms.color.value=r,R.uniforms.textureMatrix.value=k,this.material=R,this.onBeforeRender=function(P,I,T){if(m.setFromMatrixPosition(t.matrixWorld),g.setFromMatrixPosition(T.matrixWorld),y.extractRotation(t.matrixWorld),f.set(0,0,1),f.applyMatrix4(y),S.subVectors(m,g),S.dot(f)>0)return;S.reflect(f).negate(),S.add(m),y.extractRotation(T.matrixWorld),x.set(0,0,-1),x.applyMatrix4(y),x.add(g),_.subVectors(m,x),_.reflect(f).negate(),_.add(m),M.position.copy(S),M.up.set(0,1,0),M.up.applyMatrix4(y),M.up.reflect(f),M.lookAt(_),M.far=T.far,M.updateMatrixWorld(),M.projectionMatrix.copy(T.projectionMatrix),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(M.projectionMatrix),k.multiply(M.matrixWorldInverse),k.multiply(t.matrixWorld),d.setFromNormalAndCoplanarPoint(f,m),d.applyMatrix4(M.matrixWorldInverse),b.set(d.normal.x,d.normal.y,d.normal.z,d.constant);const N=M.projectionMatrix;O.x=(Math.sign(b.x)+N.elements[8])/N.elements[0],O.y=(Math.sign(b.y)+N.elements[9])/N.elements[5],O.z=-1,O.w=(1+N.elements[10])/N.elements[14],b.multiplyScalar(2/b.dot(O)),N.elements[2]=b.x,N.elements[6]=b.y,N.elements[10]=b.z+1-l,N.elements[14]=b.w,t.visible=!1;const L=P.getRenderTarget(),D=P.xr.enabled,$=P.shadowMap.autoUpdate;P.xr.enabled=!1,P.shadowMap.autoUpdate=!1,P.setRenderTarget(E),P.state.buffers.depth.setMask(!0),P.autoClear===!1&&P.clear(),P.render(I,M),P.xr.enabled=D,P.shadowMap.autoUpdate=$,P.setRenderTarget(L);const B=T.viewport;B!==void 0&&P.state.viewport(B),t.visible=!0},this.getRenderTarget=function(){return E},this.dispose=function(){E.dispose(),t.material.dispose()}}}pv.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const Rwe=["args","material-uniforms-color-value"],Iwe=Ft("TresPlaneGeometry",{args:[5,5]},null,-1);pv.ReflectorShader;function Dwe(n){return iw()?(aE(n),!0):!1}function U9(n){return typeof n=="function"?n():oi(n)}const Nwe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $we=Object.prototype.toString,Vwe=n=>$we.call(n)==="[object Object]",Lwe=()=>{};function Bwe(n){var e;const i=U9(n);return(e=i==null?void 0:i.$el)!=null?e:i}const Uwe=Nwe?window:void 0;function e2(...n){let e,i,t,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([i,t,r]=n,e=Uwe):[e,i,t,r]=n,!e)return Lwe;Array.isArray(i)||(i=[i]),Array.isArray(t)||(t=[t]);const s=[],o=()=>{s.forEach(d=>d()),s.length=0},l=(d,f,m,g)=>(d.addEventListener(f,m,g),()=>d.removeEventListener(f,m,g)),c=Fi(()=>[Bwe(e),U9(r)],([d,f])=>{if(o(),!d)return;const m=Vwe(f)?{...f}:f;s.push(...i.flatMap(g=>t.map(y=>l(d,g,y,m))))},{immediate:!0,flush:"post"}),u=()=>{c(),o()};return Dwe(u),u}class gO extends tn{constructor(){super(gO.Geometry,new Ma({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new ne,i=new ne,t=new vT(16,16),r=new vT(16,16);let s=Ca;const o=gO.Geometry,l=new T0({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),c=new T0({uniforms:{map:{value:t},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),u=new tn(o,l),d=[],f=F9.Shader,m=new T0({name:f.name,uniforms:{map:{value:null},occlusionMap:{value:r},color:{value:new it(16777215)},scale:{value:new ze},screenPosition:{value:new ne}},vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,blending:sO,transparent:!0,depthWrite:!1}),g=new tn(o,m);this.addElement=function(_){d.push(_)};const y=new ze,x=new ze,b=new mz,S=new bi;this.onBeforeRender=function(_,O,k){_.getCurrentViewport(S);const M=_.getRenderTarget(),E=M!==null?M.texture.type:Ca;s!==E&&(t.dispose(),r.dispose(),t.type=r.type=E,s=E);const R=S.w/S.z,P=S.z/2,I=S.w/2;let T=16/S.w;if(y.set(T*R,T),b.min.set(S.x,S.y),b.max.set(S.x+(S.z-16),S.y+(S.w-16)),i.setFromMatrixPosition(this.matrixWorld),i.applyMatrix4(k.matrixWorldInverse),!(i.z>0)&&(e.copy(i).applyMatrix4(k.projectionMatrix),x.x=S.x+e.x*P+P-8,x.y=S.y+e.y*I+I-8,b.containsPoint(x))){_.copyFramebufferToTexture(x,t);let N=l.uniforms;N.scale.value=y,N.screenPosition.value=e,_.renderBufferDirect(k,null,o,l,u,null),_.copyFramebufferToTexture(x,r),N=c.uniforms,N.scale.value=y,N.screenPosition.value=e,_.renderBufferDirect(k,null,o,c,u,null);const L=-e.x*2,D=-e.y*2;for(let $=0,B=d.length;$<B;$++){const U=d[$],Q=m.uniforms;Q.color.value.copy(U.color),Q.map.value=U.texture,Q.screenPosition.value.x=e.x+L*U.distance,Q.screenPosition.value.y=e.y+D*U.distance,T=U.size/S.w;const Z=S.w/S.z;Q.scale.value.set(T*Z,T),m.uniformsNeedUpdate=!0,_.renderBufferDirect(k,null,o,m,g,null)}}},this.dispose=function(){l.dispose(),c.dispose(),m.dispose(),t.dispose(),r.dispose();for(let _=0,O=d.length;_<O;_++)d[_].texture.dispose()}}}class F9{constructor(e,i=1,t=0,r=new it(16777215)){this.texture=e,this.size=i,this.distance=t,this.color=r}}F9.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};gO.Geometry=function(){const n=new ni,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),i=new Kv(e,5);return n.setIndex([0,1,2,0,2,3]),n.setAttribute("position",new nc(i,3,0,!1)),n.setAttribute("uv",new nc(i,2,3,!1)),n}();Jr.clamp;Jr.lerp;async function Fwe(n){return await _ye(gwe,n)}const zwe=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","args"],t3=ec({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number.NEGATIVE_INFINITY},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number.POSITIVE_INFINITY},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{default:()=>({ONE:Vl.ROTATE,TWO:Vl.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start","end"],setup(n,{expose:e,emit:i}){const t=n,r=i,{makeDefault:s,autoRotate:o,autoRotateSpeed:l,enableDamping:c,dampingFactor:u,enablePan:d,keyPanSpeed:f,maxAzimuthAngle:m,minAzimuthAngle:g,maxPolarAngle:y,minPolarAngle:x,minDistance:b,maxDistance:S,minZoom:_,maxZoom:O,enableZoom:k,zoomSpeed:M,enableRotate:E,touches:R,rotateSpeed:P,target:I}=zv(t),{camera:T,renderer:N,extend:L,controls:D}=CP(),$=ot(null);L({OrbitControls:lwe}),Fi($,Q=>{B(),Q&&s.value?D.value=Q:D.value=null});function B(){e2($.value,"change",()=>r("change",$.value)),e2($.value,"start",()=>r("start",$.value)),e2($.value,"end",()=>r("end",$.value))}const{onLoop:U}=_d();return U(()=>{$.value&&(c.value||o.value)&&$.value.update()}),Jo(()=>{$.value&&$.value.dispose()}),e({value:$}),(Q,Z)=>(Q.camera||oi(T))&&(Q.domElement||oi(N))?(ai(),on("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:$,target:oi(I),"auto-rotate":oi(o),"auto-rotate-speed":oi(l),"enable-damping":oi(c),"damping-factor":oi(u),"enable-pan":oi(d),"key-pan-speed":oi(f),keys:Q.keys,"max-azimuth-angle":oi(m),"min-azimuth-angle":oi(g),"max-polar-angle":oi(y),"min-polar-angle":oi(x),"min-distance":oi(b),"max-distance":oi(S),"min-zoom":oi(_),"max-zoom":oi(O),touches:oi(R),"enable-zoom":oi(k),"zoom-speed":oi(M),"enable-rotate":oi(E),"rotate-speed":oi(P),args:[Q.camera||oi(T),Q.domElement||oi(N).domElement]},null,8,zwe)):ME("",!0)}});var t2;/Mac/.test((t2=globalThis==null?void 0:globalThis.navigator)===null||t2===void 0?void 0:t2.platform);var Xwe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kb(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wwe={exports:{}};(function(n,e){(function(i){n.exports=i()})(function(){return function i(t,r,s){function o(u,d){if(!r[u]){if(!t[u]){var f=typeof kb=="function"&&kb;if(!d&&f)return f(u,!0);if(l)return l(u,!0);throw new Error("Cannot find module '"+u+"'")}d=r[u]={exports:{}},t[u][0].call(d.exports,function(m){var g=t[u][1][m];return o(g||m)},d,d.exports,i,t,r,s)}return r[u].exports}for(var l=typeof kb=="function"&&kb,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){var y=i("crypto");function x(E,R){R=_(E,R);var P;return(P=R.algorithm!=="passthrough"?y.createHash(R.algorithm):new M).write===void 0&&(P.write=P.update,P.end=P.update),k(R,P).dispatch(E),P.update||P.end(""),P.digest?P.digest(R.encoding==="buffer"?void 0:R.encoding):(E=P.read(),R.encoding!=="buffer"?E.toString(R.encoding):E)}(r=t.exports=x).sha1=function(E){return x(E)},r.keys=function(E){return x(E,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(E){return x(E,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(E){return x(E,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var b=y.getHashes?y.getHashes().slice():["sha1","md5"],S=(b.push("passthrough"),["buffer","hex","binary","base64"]);function _(E,R){var P={};if(P.algorithm=(R=R||{}).algorithm||"sha1",P.encoding=R.encoding||"hex",P.excludeValues=!!R.excludeValues,P.algorithm=P.algorithm.toLowerCase(),P.encoding=P.encoding.toLowerCase(),P.ignoreUnknown=R.ignoreUnknown===!0,P.respectType=R.respectType!==!1,P.respectFunctionNames=R.respectFunctionNames!==!1,P.respectFunctionProperties=R.respectFunctionProperties!==!1,P.unorderedArrays=R.unorderedArrays===!0,P.unorderedSets=R.unorderedSets!==!1,P.unorderedObjects=R.unorderedObjects!==!1,P.replacer=R.replacer||void 0,P.excludeKeys=R.excludeKeys||void 0,E===void 0)throw new Error("Object argument required.");for(var I=0;I<b.length;++I)b[I].toLowerCase()===P.algorithm.toLowerCase()&&(P.algorithm=b[I]);if(b.indexOf(P.algorithm)===-1)throw new Error('Algorithm "'+P.algorithm+'"  not supported. supported values: '+b.join(", "));if(S.indexOf(P.encoding)===-1&&P.algorithm!=="passthrough")throw new Error('Encoding "'+P.encoding+'"  not supported. supported values: '+S.join(", "));return P}function O(E){if(typeof E=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(E))!=null}function k(E,R,P){P=P||[];function I(T){return R.update?R.update(T,"utf8"):R.write(T,"utf8")}return{dispatch:function(T){return this["_"+((T=E.replacer?E.replacer(T):T)===null?"null":typeof T)](T)},_object:function(T){var N,L=Object.prototype.toString.call(T),D=/\[object (.*)\]/i.exec(L);if(D=(D=D?D[1]:"unknown:["+L+"]").toLowerCase(),0<=(L=P.indexOf(T)))return this.dispatch("[CIRCULAR:"+L+"]");if(P.push(T),l!==void 0&&l.isBuffer&&l.isBuffer(T))return I("buffer:"),I(T);if(D==="object"||D==="function"||D==="asyncfunction")return L=Object.keys(T),E.unorderedObjects&&(L=L.sort()),E.respectType===!1||O(T)||L.splice(0,0,"prototype","__proto__","constructor"),E.excludeKeys&&(L=L.filter(function($){return!E.excludeKeys($)})),I("object:"+L.length+":"),N=this,L.forEach(function($){N.dispatch($),I(":"),E.excludeValues||N.dispatch(T[$]),I(",")});if(!this["_"+D]){if(E.ignoreUnknown)return I("["+D+"]");throw new Error('Unknown object type "'+D+'"')}this["_"+D](T)},_array:function(T,$){$=$!==void 0?$:E.unorderedArrays!==!1;var L=this;if(I("array:"+T.length+":"),!$||T.length<=1)return T.forEach(function(B){return L.dispatch(B)});var D=[],$=T.map(function(B){var U=new M,Q=P.slice();return k(E,U,Q).dispatch(B),D=D.concat(Q.slice(P.length)),U.read().toString()});return P=P.concat(D),$.sort(),this._array($,!1)},_date:function(T){return I("date:"+T.toJSON())},_symbol:function(T){return I("symbol:"+T.toString())},_error:function(T){return I("error:"+T.toString())},_boolean:function(T){return I("bool:"+T.toString())},_string:function(T){I("string:"+T.length+":"),I(T.toString())},_function:function(T){I("fn:"),O(T)?this.dispatch("[native]"):this.dispatch(T.toString()),E.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(T.name)),E.respectFunctionProperties&&this._object(T)},_number:function(T){return I("number:"+T.toString())},_xml:function(T){return I("xml:"+T.toString())},_null:function(){return I("Null")},_undefined:function(){return I("Undefined")},_regexp:function(T){return I("regex:"+T.toString())},_uint8array:function(T){return I("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return I("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return I("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return I("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return I("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return I("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return I("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return I("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return I("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return I("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return I("url:"+T.toString())},_map:function(T){return I("map:"),T=Array.from(T),this._array(T,E.unorderedSets!==!1)},_set:function(T){return I("set:"),T=Array.from(T),this._array(T,E.unorderedSets!==!1)},_file:function(T){return I("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(E.ignoreUnknown)return I("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return I("domwindow")},_bigint:function(T){return I("bigint:"+T.toString())},_process:function(){return I("process")},_timer:function(){return I("timer")},_pipe:function(){return I("pipe")},_tcp:function(){return I("tcp")},_udp:function(){return I("udp")},_tty:function(){return I("tty")},_statwatcher:function(){return I("statwatcher")},_securecontext:function(){return I("securecontext")},_connection:function(){return I("connection")},_zlib:function(){return I("zlib")},_context:function(){return I("context")},_nodescript:function(){return I("nodescript")},_httpparser:function(){return I("httpparser")},_dataview:function(){return I("dataview")},_signal:function(){return I("signal")},_fsevent:function(){return I("fsevent")},_tlswrap:function(){return I("tlswrap")}}}function M(){return{buf:"",write:function(E){this.buf+=E},end:function(E){this.buf+=E},read:function(){return this.buf}}}r.writeToStream=function(E,R,P){return P===void 0&&(P=R,R={}),k(R=_(E,R),P).dispatch(E)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){(function(y){var x=typeof Uint8Array<"u"?Uint8Array:Array,b=43,S=47,_=48,O=97,k=65,M=45,E=95;function R(P){return P=P.charCodeAt(0),P===b||P===M?62:P===S||P===E?63:P<_?-1:P<_+10?P-_+26+26:P<k+26?P-k:P<O+26?P-O+26:void 0}y.toByteArray=function(P){var I,T;if(0<P.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var N=P.length,N=P.charAt(N-2)==="="?2:P.charAt(N-1)==="="?1:0,L=new x(3*P.length/4-N),D=0<N?P.length-4:P.length,$=0;function B(U){L[$++]=U}for(I=0;I<D;I+=4,0)B((16711680&(T=R(P.charAt(I))<<18|R(P.charAt(I+1))<<12|R(P.charAt(I+2))<<6|R(P.charAt(I+3))))>>16),B((65280&T)>>8),B(255&T);return N==2?B(255&(T=R(P.charAt(I))<<2|R(P.charAt(I+1))>>4)):N==1&&(B((T=R(P.charAt(I))<<10|R(P.charAt(I+1))<<4|R(P.charAt(I+2))>>2)>>8&255),B(255&T)),L},y.fromByteArray=function(P){var I,T,N,L,D=P.length%3,$="";function B(U){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(U)}for(I=0,N=P.length-D;I<N;I+=3)T=(P[I]<<16)+(P[I+1]<<8)+P[I+2],$+=B((L=T)>>18&63)+B(L>>12&63)+B(L>>6&63)+B(63&L);switch(D){case 1:$=($+=B((T=P[P.length-1])>>2))+B(T<<4&63)+"==";break;case 2:$=($=($+=B((T=(P[P.length-2]<<8)+P[P.length-1])>>10))+B(T>>4&63))+B(T<<2&63)+"="}return $}})(r===void 0?this.base64js={}:r)}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(i,t,r){(function(s,o,b,c,u,d,f,m,g){var y=i("base64-js"),x=i("ieee754");function b(F,z,ee){if(!(this instanceof b))return new b(F,z,ee);var re,W,q,ae,fe=typeof F;if(z==="base64"&&fe=="string")for(F=(ae=F).trim?ae.trim():ae.replace(/^\s+|\s+$/g,"");F.length%4!=0;)F+="=";if(fe=="number")re=Z(F);else if(fe=="string")re=b.byteLength(F,z);else{if(fe!="object")throw new Error("First argument needs to be a number, array or string.");re=Z(F.length)}if(b._useTypedArrays?W=b._augment(new Uint8Array(re)):((W=this).length=re,W._isBuffer=!0),b._useTypedArrays&&typeof F.byteLength=="number")W._set(F);else if(te(ae=F)||b.isBuffer(ae)||ae&&typeof ae=="object"&&typeof ae.length=="number")for(q=0;q<re;q++)b.isBuffer(F)?W[q]=F.readUInt8(q):W[q]=F[q];else if(fe=="string")W.write(F,0,z);else if(fe=="number"&&!b._useTypedArrays&&!ee)for(q=0;q<re;q++)W[q]=0;return W}function S(F,z,ee,re){return b._charsWritten=we(function(W){for(var q=[],ae=0;ae<W.length;ae++)q.push(255&W.charCodeAt(ae));return q}(z),F,ee,re)}function _(F,z,ee,re){return b._charsWritten=we(function(W){for(var q,ae,fe=[],ye=0;ye<W.length;ye++)ae=W.charCodeAt(ye),q=ae>>8,ae=ae%256,fe.push(ae),fe.push(q);return fe}(z),F,ee,re)}function O(F,z,ee){var re="";ee=Math.min(F.length,ee);for(var W=z;W<ee;W++)re+=String.fromCharCode(F[W]);return re}function k(F,z,ee,q){q||(j(typeof ee=="boolean","missing or invalid endian"),j(z!=null,"missing offset"),j(z+1<F.length,"Trying to read beyond buffer length"));var W,q=F.length;if(!(q<=z))return ee?(W=F[z],z+1<q&&(W|=F[z+1]<<8)):(W=F[z]<<8,z+1<q&&(W|=F[z+1])),W}function M(F,z,ee,q){q||(j(typeof ee=="boolean","missing or invalid endian"),j(z!=null,"missing offset"),j(z+3<F.length,"Trying to read beyond buffer length"));var W,q=F.length;if(!(q<=z))return ee?(z+2<q&&(W=F[z+2]<<16),z+1<q&&(W|=F[z+1]<<8),W|=F[z],z+3<q&&(W+=F[z+3]<<24>>>0)):(z+1<q&&(W=F[z+1]<<16),z+2<q&&(W|=F[z+2]<<8),z+3<q&&(W|=F[z+3]),W+=F[z]<<24>>>0),W}function E(F,z,ee,re){if(re||(j(typeof ee=="boolean","missing or invalid endian"),j(z!=null,"missing offset"),j(z+1<F.length,"Trying to read beyond buffer length")),!(F.length<=z))return re=k(F,z,ee,!0),32768&re?-1*(65535-re+1):re}function R(F,z,ee,re){if(re||(j(typeof ee=="boolean","missing or invalid endian"),j(z!=null,"missing offset"),j(z+3<F.length,"Trying to read beyond buffer length")),!(F.length<=z))return re=M(F,z,ee,!0),2147483648&re?-1*(4294967295-re+1):re}function P(F,z,ee,re){return re||(j(typeof ee=="boolean","missing or invalid endian"),j(z+3<F.length,"Trying to read beyond buffer length")),x.read(F,z,ee,23,4)}function I(F,z,ee,re){return re||(j(typeof ee=="boolean","missing or invalid endian"),j(z+7<F.length,"Trying to read beyond buffer length")),x.read(F,z,ee,52,8)}function T(F,z,ee,re,W){if(W||(j(z!=null,"missing value"),j(typeof re=="boolean","missing or invalid endian"),j(ee!=null,"missing offset"),j(ee+1<F.length,"trying to write beyond buffer length"),_e(z,65535)),W=F.length,!(W<=ee))for(var q=0,ae=Math.min(W-ee,2);q<ae;q++)F[ee+q]=(z&255<<8*(re?q:1-q))>>>8*(re?q:1-q)}function N(F,z,ee,re,W){if(W||(j(z!=null,"missing value"),j(typeof re=="boolean","missing or invalid endian"),j(ee!=null,"missing offset"),j(ee+3<F.length,"trying to write beyond buffer length"),_e(z,4294967295)),W=F.length,!(W<=ee))for(var q=0,ae=Math.min(W-ee,4);q<ae;q++)F[ee+q]=z>>>8*(re?q:3-q)&255}function L(F,z,ee,re,W){W||(j(z!=null,"missing value"),j(typeof re=="boolean","missing or invalid endian"),j(ee!=null,"missing offset"),j(ee+1<F.length,"Trying to write beyond buffer length"),Ce(z,32767,-32768)),F.length<=ee||T(F,0<=z?z:65535+z+1,ee,re,W)}function D(F,z,ee,re,W){W||(j(z!=null,"missing value"),j(typeof re=="boolean","missing or invalid endian"),j(ee!=null,"missing offset"),j(ee+3<F.length,"Trying to write beyond buffer length"),Ce(z,2147483647,-2147483648)),F.length<=ee||N(F,0<=z?z:4294967295+z+1,ee,re,W)}function $(F,z,ee,re,W){W||(j(z!=null,"missing value"),j(typeof re=="boolean","missing or invalid endian"),j(ee!=null,"missing offset"),j(ee+3<F.length,"Trying to write beyond buffer length"),K(z,34028234663852886e22,-34028234663852886e22)),F.length<=ee||x.write(F,z,ee,re,23,4)}function B(F,z,ee,re,W){W||(j(z!=null,"missing value"),j(typeof re=="boolean","missing or invalid endian"),j(ee!=null,"missing offset"),j(ee+7<F.length,"Trying to write beyond buffer length"),K(z,17976931348623157e292,-17976931348623157e292)),F.length<=ee||x.write(F,z,ee,re,52,8)}r.Buffer=b,r.SlowBuffer=b,r.INSPECT_MAX_BYTES=50,b.poolSize=8192,b._useTypedArrays=function(){try{var F=new ArrayBuffer(0),z=new Uint8Array(F);return z.foo=function(){return 42},z.foo()===42&&typeof z.subarray=="function"}catch{return!1}}(),b.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.isBuffer=function(F){return!(F==null||!F._isBuffer)},b.byteLength=function(F,z){var ee;switch(F+="",z||"utf8"){case"hex":ee=F.length/2;break;case"utf8":case"utf-8":ee=pe(F).length;break;case"ascii":case"binary":case"raw":ee=F.length;break;case"base64":ee=Ee(F).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ee=2*F.length;break;default:throw new Error("Unknown encoding")}return ee},b.concat=function(F,z){if(j(te(F),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),F.length===0)return new b(0);if(F.length===1)return F[0];if(typeof z!="number")for(W=z=0;W<F.length;W++)z+=F[W].length;for(var ee=new b(z),re=0,W=0;W<F.length;W++){var q=F[W];q.copy(ee,re),re+=q.length}return ee},b.prototype.write=function(F,z,ee,re){isFinite(z)?isFinite(ee)||(re=ee,ee=void 0):(ye=re,re=z,z=ee,ee=ye),z=Number(z)||0;var W,q,ae,fe,ye=this.length-z;switch((!ee||ye<(ee=Number(ee)))&&(ee=ye),re=String(re||"utf8").toLowerCase()){case"hex":W=function(Me,J,G,ue){G=Number(G)||0;var de=Me.length-G;(!ue||de<(ue=Number(ue)))&&(ue=de),j((de=J.length)%2==0,"Invalid hex string"),de/2<ue&&(ue=de/2);for(var Oe=0;Oe<ue;Oe++){var Te=parseInt(J.substr(2*Oe,2),16);j(!isNaN(Te),"Invalid hex string"),Me[G+Oe]=Te}return b._charsWritten=2*Oe,Oe}(this,F,z,ee);break;case"utf8":case"utf-8":q=this,ae=z,fe=ee,W=b._charsWritten=we(pe(F),q,ae,fe);break;case"ascii":case"binary":W=S(this,F,z,ee);break;case"base64":q=this,ae=z,fe=ee,W=b._charsWritten=we(Ee(F),q,ae,fe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":W=_(this,F,z,ee);break;default:throw new Error("Unknown encoding")}return W},b.prototype.toString=function(F,z,ee){var re,W,q,ae,fe=this;if(F=String(F||"utf8").toLowerCase(),z=Number(z)||0,(ee=ee!==void 0?Number(ee):fe.length)===z)return"";switch(F){case"hex":re=function(ye,Me,J){var G=ye.length;(!Me||Me<0)&&(Me=0),(!J||J<0||G<J)&&(J=G);for(var ue="",de=Me;de<J;de++)ue+=ce(ye[de]);return ue}(fe,z,ee);break;case"utf8":case"utf-8":re=function(ye,Me,J){var G="",ue="";J=Math.min(ye.length,J);for(var de=Me;de<J;de++)ye[de]<=127?(G+=he(ue)+String.fromCharCode(ye[de]),ue=""):ue+="%"+ye[de].toString(16);return G+he(ue)}(fe,z,ee);break;case"ascii":case"binary":re=O(fe,z,ee);break;case"base64":W=fe,ae=ee,re=(q=z)===0&&ae===W.length?y.fromByteArray(W):y.fromByteArray(W.slice(q,ae));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":re=function(ye,Me,J){for(var G=ye.slice(Me,J),ue="",de=0;de<G.length;de+=2)ue+=String.fromCharCode(G[de]+256*G[de+1]);return ue}(fe,z,ee);break;default:throw new Error("Unknown encoding")}return re},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},b.prototype.copy=function(F,z,ee,re){if(z=z||0,(re=re||re===0?re:this.length)!==(ee=ee||0)&&F.length!==0&&this.length!==0){j(ee<=re,"sourceEnd < sourceStart"),j(0<=z&&z<F.length,"targetStart out of bounds"),j(0<=ee&&ee<this.length,"sourceStart out of bounds"),j(0<=re&&re<=this.length,"sourceEnd out of bounds"),re>this.length&&(re=this.length);var W=(re=F.length-z<re-ee?F.length-z+ee:re)-ee;if(W<100||!b._useTypedArrays)for(var q=0;q<W;q++)F[q+z]=this[q+ee];else F._set(this.subarray(ee,ee+W),z)}},b.prototype.slice=function(F,z){var ee=this.length;if(F=Q(F,ee,0),z=Q(z,ee,ee),b._useTypedArrays)return b._augment(this.subarray(F,z));for(var re=z-F,W=new b(re,void 0,!0),q=0;q<re;q++)W[q]=this[q+F];return W},b.prototype.get=function(F){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(F)},b.prototype.set=function(F,z){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(F,z)},b.prototype.readUInt8=function(F,z){if(z||(j(F!=null,"missing offset"),j(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return this[F]},b.prototype.readUInt16LE=function(F,z){return k(this,F,!0,z)},b.prototype.readUInt16BE=function(F,z){return k(this,F,!1,z)},b.prototype.readUInt32LE=function(F,z){return M(this,F,!0,z)},b.prototype.readUInt32BE=function(F,z){return M(this,F,!1,z)},b.prototype.readInt8=function(F,z){if(z||(j(F!=null,"missing offset"),j(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return 128&this[F]?-1*(255-this[F]+1):this[F]},b.prototype.readInt16LE=function(F,z){return E(this,F,!0,z)},b.prototype.readInt16BE=function(F,z){return E(this,F,!1,z)},b.prototype.readInt32LE=function(F,z){return R(this,F,!0,z)},b.prototype.readInt32BE=function(F,z){return R(this,F,!1,z)},b.prototype.readFloatLE=function(F,z){return P(this,F,!0,z)},b.prototype.readFloatBE=function(F,z){return P(this,F,!1,z)},b.prototype.readDoubleLE=function(F,z){return I(this,F,!0,z)},b.prototype.readDoubleBE=function(F,z){return I(this,F,!1,z)},b.prototype.writeUInt8=function(F,z,ee){ee||(j(F!=null,"missing value"),j(z!=null,"missing offset"),j(z<this.length,"trying to write beyond buffer length"),_e(F,255)),z>=this.length||(this[z]=F)},b.prototype.writeUInt16LE=function(F,z,ee){T(this,F,z,!0,ee)},b.prototype.writeUInt16BE=function(F,z,ee){T(this,F,z,!1,ee)},b.prototype.writeUInt32LE=function(F,z,ee){N(this,F,z,!0,ee)},b.prototype.writeUInt32BE=function(F,z,ee){N(this,F,z,!1,ee)},b.prototype.writeInt8=function(F,z,ee){ee||(j(F!=null,"missing value"),j(z!=null,"missing offset"),j(z<this.length,"Trying to write beyond buffer length"),Ce(F,127,-128)),z>=this.length||(0<=F?this.writeUInt8(F,z,ee):this.writeUInt8(255+F+1,z,ee))},b.prototype.writeInt16LE=function(F,z,ee){L(this,F,z,!0,ee)},b.prototype.writeInt16BE=function(F,z,ee){L(this,F,z,!1,ee)},b.prototype.writeInt32LE=function(F,z,ee){D(this,F,z,!0,ee)},b.prototype.writeInt32BE=function(F,z,ee){D(this,F,z,!1,ee)},b.prototype.writeFloatLE=function(F,z,ee){$(this,F,z,!0,ee)},b.prototype.writeFloatBE=function(F,z,ee){$(this,F,z,!1,ee)},b.prototype.writeDoubleLE=function(F,z,ee){B(this,F,z,!0,ee)},b.prototype.writeDoubleBE=function(F,z,ee){B(this,F,z,!1,ee)},b.prototype.fill=function(F,z,ee){if(z=z||0,ee=ee||this.length,j(typeof(F=typeof(F=F||0)=="string"?F.charCodeAt(0):F)=="number"&&!isNaN(F),"value is not a number"),j(z<=ee,"end < start"),ee!==z&&this.length!==0){j(0<=z&&z<this.length,"start out of bounds"),j(0<=ee&&ee<=this.length,"end out of bounds");for(var re=z;re<ee;re++)this[re]=F}},b.prototype.inspect=function(){for(var F=[],z=this.length,ee=0;ee<z;ee++)if(F[ee]=ce(this[ee]),ee===r.INSPECT_MAX_BYTES){F[ee+1]="...";break}return"<Buffer "+F.join(" ")+">"},b.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(b._useTypedArrays)return new b(this).buffer;for(var F=new Uint8Array(this.length),z=0,ee=F.length;z<ee;z+=1)F[z]=this[z];return F.buffer};var U=b.prototype;function Q(F,z,ee){return typeof F!="number"?ee:z<=(F=~~F)?z:0<=F||0<=(F+=z)?F:0}function Z(F){return(F=~~Math.ceil(+F))<0?0:F}function te(F){return(Array.isArray||function(z){return Object.prototype.toString.call(z)==="[object Array]"})(F)}function ce(F){return F<16?"0"+F.toString(16):F.toString(16)}function pe(F){for(var z=[],ee=0;ee<F.length;ee++){var re=F.charCodeAt(ee);if(re<=127)z.push(F.charCodeAt(ee));else for(var W=ee,q=(55296<=re&&re<=57343&&ee++,encodeURIComponent(F.slice(W,ee+1)).substr(1).split("%")),ae=0;ae<q.length;ae++)z.push(parseInt(q[ae],16))}return z}function Ee(F){return y.toByteArray(F)}function we(F,z,ee,re){for(var W=0;W<re&&!(W+ee>=z.length||W>=F.length);W++)z[W+ee]=F[W];return W}function he(F){try{return decodeURIComponent(F)}catch{return""}}function _e(F,z){j(typeof F=="number","cannot write a non-number as a number"),j(0<=F,"specified a negative value for writing an unsigned value"),j(F<=z,"value is larger than maximum value for type"),j(Math.floor(F)===F,"value has a fractional component")}function Ce(F,z,ee){j(typeof F=="number","cannot write a non-number as a number"),j(F<=z,"value larger than maximum allowed value"),j(ee<=F,"value smaller than minimum allowed value"),j(Math.floor(F)===F,"value has a fractional component")}function K(F,z,ee){j(typeof F=="number","cannot write a non-number as a number"),j(F<=z,"value larger than maximum allowed value"),j(ee<=F,"value smaller than minimum allowed value")}function j(F,z){if(!F)throw new Error(z||"Failed assertion")}b._augment=function(F){return F._isBuffer=!0,F._get=F.get,F._set=F.set,F.get=U.get,F.set=U.set,F.write=U.write,F.toString=U.toString,F.toLocaleString=U.toString,F.toJSON=U.toJSON,F.copy=U.copy,F.slice=U.slice,F.readUInt8=U.readUInt8,F.readUInt16LE=U.readUInt16LE,F.readUInt16BE=U.readUInt16BE,F.readUInt32LE=U.readUInt32LE,F.readUInt32BE=U.readUInt32BE,F.readInt8=U.readInt8,F.readInt16LE=U.readInt16LE,F.readInt16BE=U.readInt16BE,F.readInt32LE=U.readInt32LE,F.readInt32BE=U.readInt32BE,F.readFloatLE=U.readFloatLE,F.readFloatBE=U.readFloatBE,F.readDoubleLE=U.readDoubleLE,F.readDoubleBE=U.readDoubleBE,F.writeUInt8=U.writeUInt8,F.writeUInt16LE=U.writeUInt16LE,F.writeUInt16BE=U.writeUInt16BE,F.writeUInt32LE=U.writeUInt32LE,F.writeUInt32BE=U.writeUInt32BE,F.writeInt8=U.writeInt8,F.writeInt16LE=U.writeInt16LE,F.writeInt16BE=U.writeInt16BE,F.writeInt32LE=U.writeInt32LE,F.writeInt32BE=U.writeInt32BE,F.writeFloatLE=U.writeFloatLE,F.writeFloatBE=U.writeFloatBE,F.writeDoubleLE=U.writeDoubleLE,F.writeDoubleBE=U.writeDoubleBE,F.fill=U.fill,F.inspect=U.inspect,F.toArrayBuffer=U.toArrayBuffer,F}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(i,t,r){(function(s,o,y,c,u,d,f,m,g){var y=i("buffer").Buffer,x=4,b=new y(x);b.fill(0),t.exports={hash:function(S,_,O,k){for(var M=_(function(T,N){T.length%x!=0&&(L=T.length+(x-T.length%x),T=y.concat([T,b],L));for(var L,D=[],$=N?T.readInt32BE:T.readInt32LE,B=0;B<T.length;B+=x)D.push($.call(T,B));return D}(S=y.isBuffer(S)?S:new y(S),k),8*S.length),_=k,E=new y(O),R=_?E.writeInt32BE:E.writeInt32LE,P=0;P<M.length;P++)R.call(E,M[P],4*P,!0);return E}}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(i,t,r){(function(s,o,y,c,u,d,f,m,g){var y=i("buffer").Buffer,x=i("./sha"),b=i("./sha256"),S=i("./rng"),_={sha1:x,sha256:b,md5:i("./md5")},O=64,k=new y(O);function M(T,N){var L=_[T=T||"sha1"],D=[];return L||E("algorithm:",T,"is not yet supported"),{update:function($){return y.isBuffer($)||($=new y($)),D.push($),$.length,this},digest:function($){var B=y.concat(D),B=N?function(U,Q,Z){y.isBuffer(Q)||(Q=new y(Q)),y.isBuffer(Z)||(Z=new y(Z)),Q.length>O?Q=U(Q):Q.length<O&&(Q=y.concat([Q,k],O));for(var te=new y(O),ce=new y(O),pe=0;pe<O;pe++)te[pe]=54^Q[pe],ce[pe]=92^Q[pe];return Z=U(y.concat([te,Z])),U(y.concat([ce,Z]))}(L,N,B):L(B);return D=null,$?B.toString($):B}}}function E(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}k.fill(0),r.createHash=function(T){return M(T)},r.createHmac=M,r.randomBytes=function(T,N){if(!N||!N.call)return new y(S(T));try{N.call(this,void 0,new y(S(T)))}catch(L){N(L)}};var R,P=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],I=function(T){r[T]=function(){E("sorry,",T,"is not implemented yet")}};for(R in P)I(P[R])}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){var y=i("./helpers");function x(E,R){E[R>>5]|=128<<R%32,E[14+(R+64>>>9<<4)]=R;for(var P=1732584193,I=-271733879,T=-1732584194,N=271733878,L=0;L<E.length;L+=16){var D=P,$=I,B=T,U=N,P=S(P,I,T,N,E[L+0],7,-680876936),N=S(N,P,I,T,E[L+1],12,-389564586),T=S(T,N,P,I,E[L+2],17,606105819),I=S(I,T,N,P,E[L+3],22,-1044525330);P=S(P,I,T,N,E[L+4],7,-176418897),N=S(N,P,I,T,E[L+5],12,1200080426),T=S(T,N,P,I,E[L+6],17,-1473231341),I=S(I,T,N,P,E[L+7],22,-45705983),P=S(P,I,T,N,E[L+8],7,1770035416),N=S(N,P,I,T,E[L+9],12,-1958414417),T=S(T,N,P,I,E[L+10],17,-42063),I=S(I,T,N,P,E[L+11],22,-1990404162),P=S(P,I,T,N,E[L+12],7,1804603682),N=S(N,P,I,T,E[L+13],12,-40341101),T=S(T,N,P,I,E[L+14],17,-1502002290),P=_(P,I=S(I,T,N,P,E[L+15],22,1236535329),T,N,E[L+1],5,-165796510),N=_(N,P,I,T,E[L+6],9,-1069501632),T=_(T,N,P,I,E[L+11],14,643717713),I=_(I,T,N,P,E[L+0],20,-373897302),P=_(P,I,T,N,E[L+5],5,-701558691),N=_(N,P,I,T,E[L+10],9,38016083),T=_(T,N,P,I,E[L+15],14,-660478335),I=_(I,T,N,P,E[L+4],20,-405537848),P=_(P,I,T,N,E[L+9],5,568446438),N=_(N,P,I,T,E[L+14],9,-1019803690),T=_(T,N,P,I,E[L+3],14,-187363961),I=_(I,T,N,P,E[L+8],20,1163531501),P=_(P,I,T,N,E[L+13],5,-1444681467),N=_(N,P,I,T,E[L+2],9,-51403784),T=_(T,N,P,I,E[L+7],14,1735328473),P=O(P,I=_(I,T,N,P,E[L+12],20,-1926607734),T,N,E[L+5],4,-378558),N=O(N,P,I,T,E[L+8],11,-2022574463),T=O(T,N,P,I,E[L+11],16,1839030562),I=O(I,T,N,P,E[L+14],23,-35309556),P=O(P,I,T,N,E[L+1],4,-1530992060),N=O(N,P,I,T,E[L+4],11,1272893353),T=O(T,N,P,I,E[L+7],16,-155497632),I=O(I,T,N,P,E[L+10],23,-1094730640),P=O(P,I,T,N,E[L+13],4,681279174),N=O(N,P,I,T,E[L+0],11,-358537222),T=O(T,N,P,I,E[L+3],16,-722521979),I=O(I,T,N,P,E[L+6],23,76029189),P=O(P,I,T,N,E[L+9],4,-640364487),N=O(N,P,I,T,E[L+12],11,-421815835),T=O(T,N,P,I,E[L+15],16,530742520),P=k(P,I=O(I,T,N,P,E[L+2],23,-995338651),T,N,E[L+0],6,-198630844),N=k(N,P,I,T,E[L+7],10,1126891415),T=k(T,N,P,I,E[L+14],15,-1416354905),I=k(I,T,N,P,E[L+5],21,-57434055),P=k(P,I,T,N,E[L+12],6,1700485571),N=k(N,P,I,T,E[L+3],10,-1894986606),T=k(T,N,P,I,E[L+10],15,-1051523),I=k(I,T,N,P,E[L+1],21,-2054922799),P=k(P,I,T,N,E[L+8],6,1873313359),N=k(N,P,I,T,E[L+15],10,-30611744),T=k(T,N,P,I,E[L+6],15,-1560198380),I=k(I,T,N,P,E[L+13],21,1309151649),P=k(P,I,T,N,E[L+4],6,-145523070),N=k(N,P,I,T,E[L+11],10,-1120210379),T=k(T,N,P,I,E[L+2],15,718787259),I=k(I,T,N,P,E[L+9],21,-343485551),P=M(P,D),I=M(I,$),T=M(T,B),N=M(N,U)}return Array(P,I,T,N)}function b(E,R,P,I,T,N){return M((R=M(M(R,E),M(I,N)))<<T|R>>>32-T,P)}function S(E,R,P,I,T,N,L){return b(R&P|~R&I,E,R,T,N,L)}function _(E,R,P,I,T,N,L){return b(R&I|P&~I,E,R,T,N,L)}function O(E,R,P,I,T,N,L){return b(R^P^I,E,R,T,N,L)}function k(E,R,P,I,T,N,L){return b(P^(R|~I),E,R,T,N,L)}function M(E,R){var P=(65535&E)+(65535&R);return(E>>16)+(R>>16)+(P>>16)<<16|65535&P}t.exports=function(E){return y.hash(E,x,16)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){t.exports=function(y){for(var x,b=new Array(y),S=0;S<y;S++)!(3&S)&&(x=4294967296*Math.random()),b[S]=x>>>((3&S)<<3)&255;return b}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){var y=i("./helpers");function x(_,O){_[O>>5]|=128<<24-O%32,_[15+(O+64>>9<<4)]=O;for(var k,M,E,R=Array(80),P=1732584193,I=-271733879,T=-1732584194,N=271733878,L=-1009589776,D=0;D<_.length;D+=16){for(var $=P,B=I,U=T,Q=N,Z=L,te=0;te<80;te++){R[te]=te<16?_[D+te]:S(R[te-3]^R[te-8]^R[te-14]^R[te-16],1);var ce=b(b(S(P,5),(ce=I,M=T,E=N,(k=te)<20?ce&M|~ce&E:!(k<40)&&k<60?ce&M|ce&E|M&E:ce^M^E)),b(b(L,R[te]),(k=te)<20?1518500249:k<40?1859775393:k<60?-1894007588:-899497514)),L=N,N=T,T=S(I,30),I=P,P=ce}P=b(P,$),I=b(I,B),T=b(T,U),N=b(N,Q),L=b(L,Z)}return Array(P,I,T,N,L)}function b(_,O){var k=(65535&_)+(65535&O);return(_>>16)+(O>>16)+(k>>16)<<16|65535&k}function S(_,O){return _<<O|_>>>32-O}t.exports=function(_){return y.hash(_,x,20,!0)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){function y(O,k){var M=(65535&O)+(65535&k);return(O>>16)+(k>>16)+(M>>16)<<16|65535&M}function x(O,k){var M,E=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),R=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),P=new Array(64);O[k>>5]|=128<<24-k%32,O[15+(k+64>>9<<4)]=k;for(var I,T,N=0;N<O.length;N+=16){for(var L=R[0],D=R[1],$=R[2],B=R[3],U=R[4],Q=R[5],Z=R[6],te=R[7],ce=0;ce<64;ce++)P[ce]=ce<16?O[ce+N]:y(y(y((T=P[ce-2],S(T,17)^S(T,19)^_(T,10)),P[ce-7]),(T=P[ce-15],S(T,7)^S(T,18)^_(T,3))),P[ce-16]),M=y(y(y(y(te,S(T=U,6)^S(T,11)^S(T,25)),U&Q^~U&Z),E[ce]),P[ce]),I=y(S(I=L,2)^S(I,13)^S(I,22),L&D^L&$^D&$),te=Z,Z=Q,Q=U,U=y(B,M),B=$,$=D,D=L,L=y(M,I);R[0]=y(L,R[0]),R[1]=y(D,R[1]),R[2]=y($,R[2]),R[3]=y(B,R[3]),R[4]=y(U,R[4]),R[5]=y(Q,R[5]),R[6]=y(Z,R[6]),R[7]=y(te,R[7])}return R}var b=i("./helpers"),S=function(O,k){return O>>>k|O<<32-k},_=function(O,k){return O>>>k};t.exports=function(O){return b.hash(O,x,32,!0)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){r.read=function(y,x,b,S,N){var O,k,M=8*N-S-1,E=(1<<M)-1,R=E>>1,P=-7,I=b?N-1:0,T=b?-1:1,N=y[x+I];for(I+=T,O=N&(1<<-P)-1,N>>=-P,P+=M;0<P;O=256*O+y[x+I],I+=T,P-=8);for(k=O&(1<<-P)-1,O>>=-P,P+=S;0<P;k=256*k+y[x+I],I+=T,P-=8);if(O===0)O=1-R;else{if(O===E)return k?NaN:1/0*(N?-1:1);k+=Math.pow(2,S),O-=R}return(N?-1:1)*k*Math.pow(2,O-S)},r.write=function(y,x,b,S,_,L){var k,M,E=8*L-_-1,R=(1<<E)-1,P=R>>1,I=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=S?0:L-1,N=S?1:-1,L=x<0||x===0&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(M=isNaN(x)?1:0,k=R):(k=Math.floor(Math.log(x)/Math.LN2),x*(S=Math.pow(2,-k))<1&&(k--,S*=2),2<=(x+=1<=k+P?I/S:I*Math.pow(2,1-P))*S&&(k++,S/=2),R<=k+P?(M=0,k=R):1<=k+P?(M=(x*S-1)*Math.pow(2,_),k+=P):(M=x*Math.pow(2,P-1)*Math.pow(2,_),k=0));8<=_;y[b+T]=255&M,T+=N,M/=256,_-=8);for(k=k<<_|M,E+=_;0<E;y[b+T]=255&k,T+=N,k/=256,E-=8);y[b+T-N]|=128*L}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(i,t,r){(function(s,o,l,c,u,d,f,m,g){var y,x,b;function S(){}(s=t.exports={}).nextTick=(x=typeof window<"u"&&window.setImmediate,b=typeof window<"u"&&window.postMessage&&window.addEventListener,x?function(_){return window.setImmediate(_)}:b?(y=[],window.addEventListener("message",function(_){var O=_.source;O!==window&&O!==null||_.data!=="process-tick"||(_.stopPropagation(),0<y.length&&y.shift()())},!0),function(_){y.push(_),window.postMessage("process-tick","*")}):function(_){setTimeout(_,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=S,s.addListener=S,s.once=S,s.off=S,s.removeListener=S,s.removeAllListeners=S,s.emit=S,s.binding=function(_){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(_){throw new Error("process.chdir is not supported")}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Wwe);var Qwe=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],DT=Qwe;DT=DT.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});DT.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function Hwe(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gwe(n){var e=Hwe(n,"string");return typeof e=="symbol"?e:String(e)}function rn(n,e,i){return e=Gwe(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}var ii={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},Is,bf;Is={},rn(Is,"".concat(ii.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(ii.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),rn(Is,"".concat(ii.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(ii.position,`;
  `)}),rn(Is,"".concat(ii.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(ii.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),rn(Is,"".concat(ii.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(ii.pointSize,`;
    `)}),rn(Is,"".concat(ii.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(ii.diffuseColor,`;
  `)}),rn(Is,"".concat(ii.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(ii.fragColor,`;
  `)}),rn(Is,"".concat(ii.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(ii.emissive,`;
    `)}),rn(Is,"".concat(ii.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(ii.roughness,`;
    `)}),rn(Is,"".concat(ii.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(ii.metalness,`;
    `)}),rn(Is,"".concat(ii.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(ii.ao,`;
    `)}),rn(Is,"".concat(ii.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(ii.bump," - (dot(").concat(ii.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),rn(Is,"".concat(ii.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(ii.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(ii.depthAlpha,`;
    `)});bf={},rn(bf,"".concat(ii.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(ii.position,`, 1.0 );
  `)}),rn(bf,"".concat(ii.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(ii.position,`;
  `)}),rn(bf,"".concat(ii.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(ii.diffuseColor,`;
  `)}),rn(bf,"".concat(ii.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(ii.fragColor,`;
  `)});var Ds;Ds={},rn(Ds,"".concat(ii.position),"*"),rn(Ds,"".concat(ii.positionRaw),"*"),rn(Ds,"".concat(ii.normal),"*"),rn(Ds,"".concat(ii.pointSize),["PointsMaterial"]),rn(Ds,"".concat(ii.diffuseColor),"*"),rn(Ds,"".concat(ii.fragColor),"*"),rn(Ds,"".concat(ii.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),rn(Ds,"".concat(ii.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),rn(Ds,"".concat(ii.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),rn(Ds,"".concat(ii.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),rn(Ds,"".concat(ii.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),rn(Ds,"".concat(ii.depthAlpha),"*");new Fr;new ne;at.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ze(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Lo.line={uniforms:Yv.merge([at.common,at.fog,at.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new ne;new ne;new bi;new bi;new bi;new ne;new pt;new gz;new ne;new Fr;new zr;new bi;const Ywe={key:0,args:[0,1,64]},jwe={key:1,args:[.5,1,64]},qwe={key:2},Zwe=["tone-mapped","map","side","color"];new it(16777215);class i3 extends tn{constructor(){const e=i3.SkyShader,i=new ks({name:e.name,uniforms:Yv.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:ts,depthWrite:!1});super(new Nh(1,1,1),i),this.isSky=!0}}i3.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new ne},up:{value:new ne(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var Kwe={exports:{}};(function(n,e){(function(i,t){n.exports=t()})(Xwe,function(){var i=function(){function t(g){return o.appendChild(g.dom),g}function r(g){for(var y=0;y<o.children.length;y++)o.children[y].style.display=y===g?"block":"none";s=g}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(g){g.preventDefault(),r(++s%o.children.length)},!1);var l=(performance||Date).now(),c=l,u=0,d=t(new i.Panel("FPS","#0ff","#002")),f=t(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var m=t(new i.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:t,showPanel:r,begin:function(){l=(performance||Date).now()},end:function(){u++;var g=(performance||Date).now();if(f.update(g-l,200),g>c+1e3&&(d.update(1e3*u/(g-c),100),c=g,u=0,m)){var y=performance.memory;m.update(y.usedJSHeapSize/1048576,y.jsHeapSizeLimit/1048576)}return g},update:function(){l=this.end()},domElement:o,setMode:r}};return i.Panel=function(t,r,s){var o=1/0,l=0,c=Math.round,u=c(window.devicePixelRatio||1),d=80*u,f=48*u,m=3*u,g=2*u,y=3*u,x=15*u,b=74*u,S=30*u,_=document.createElement("canvas");_.width=d,_.height=f,_.style.cssText="width:80px;height:48px";var O=_.getContext("2d");return O.font="bold "+9*u+"px Helvetica,Arial,sans-serif",O.textBaseline="top",O.fillStyle=s,O.fillRect(0,0,d,f),O.fillStyle=r,O.fillText(t,m,g),O.fillRect(y,x,b,S),O.fillStyle=s,O.globalAlpha=.9,O.fillRect(y,x,b,S),{dom:_,update:function(k,M){o=Math.min(o,k),l=Math.max(l,k),O.fillStyle=s,O.globalAlpha=1,O.fillRect(0,0,d,x),O.fillStyle=r,O.fillText(c(k)+" "+t+" ("+c(o)+"-"+c(l)+")",m,g),O.drawImage(_,y+u,x,b-u,S,y,x,b-u,S),O.fillRect(y+b-u,x,u,S),O.fillStyle=s,O.globalAlpha=.9,O.fillRect(y+b-u,x,u,c((1-k/M)*S))}}},i})})(Kwe);var Jwe=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,e_e=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const uy=new ne(0,0,0),n3=new ne(0,0,0),t_e=new ne(0,0,0);function tN(n,e,i){const t=uy.setFromMatrixPosition(n.matrixWorld);t.project(e);const r=i.width/2,s=i.height/2;return[(Number.isNaN(t.x)?0:t.x)*r+r,-(t.y*s)+s]}function i_e(n,e){const i=uy.setFromMatrixPosition(n.matrixWorld),t=n3.setFromMatrixPosition(e.matrixWorld),r=i.sub(t),s=e.getWorldDirection(t_e);return r.angleTo(s)>Math.PI/2}function n_e(n,e,i,t){const r=uy.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),i.setFromCamera(new ze(s.x,s.y),e);const o=i.intersectObjects(t,!0);if(o.length>0){const l=o[0].distance;return r.distanceTo(i.ray.origin)<l}return!0}function r_e(n,e){if(e instanceof Wo)return e.zoom;if(e instanceof en){const i=uy.setFromMatrixPosition(n.matrixWorld),t=n3.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=i.distanceTo(t);return 1/(2*Math.tan(r/2)*s)}else return 1}function s_e(n,e,i){if(e instanceof en||e instanceof Wo){const t=uy.setFromMatrixPosition(n.matrixWorld),r=n3.setFromMatrixPosition(e.matrixWorld),s=t.distanceTo(r),o=(i[1]-i[0])/(e.far-e.near),l=i[1]-o*e.far;return Math.round(o*s+l)}}const NT=n=>Math.abs(n)<1e-10?0:n;function z9(n,e,i=""){let t="matrix3d(";for(let r=0;r!==16;r++)t+=NT(e[r]*n.elements[r])+(r!==15?",":")");return i+t}const o_e=(n=>e=>z9(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),a_e=(n=>(e,i)=>z9(e,n(i),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),l_e=["geometry","material"];new $h;var Ju=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Ju.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Ju.Bounce.In(n*2)*.5:Ju.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),c0=function(){return performance.now()},c_e=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(i){return e._tweens[i]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},n.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},n.prototype.update=function(e,i){e===void 0&&(e=c0()),i===void 0&&(i=!1);var t=Object.keys(this._tweens);if(t.length===0)return!1;for(;t.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<t.length;r++){var s=this._tweens[t[r]],o=!i;s&&s.update(e,o)===!1&&!i&&delete this._tweens[t[r]]}t=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),Af={Linear:function(n,e){var i=n.length-1,t=i*e,r=Math.floor(t),s=Af.Utils.Linear;return e<0?s(n[0],n[1],t):e>1?s(n[i],n[i-1],i-t):s(n[r],n[r+1>i?i:r+1],t-r)},Bezier:function(n,e){for(var i=0,t=n.length-1,r=Math.pow,s=Af.Utils.Bernstein,o=0;o<=t;o++)i+=r(1-e,t-o)*r(e,o)*n[o]*s(t,o);return i},CatmullRom:function(n,e){var i=n.length-1,t=i*e,r=Math.floor(t),s=Af.Utils.CatmullRom;return n[0]===n[i]?(e<0&&(r=Math.floor(t=i*(1+e))),s(n[(r-1+i)%i],n[r],n[(r+1)%i],n[(r+2)%i],t-r)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-t)-n[0]):e>1?n[i]-(s(n[i],n[i],n[i-1],n[i-1],t-i)-n[i]):s(n[r?r-1:0],n[r],n[i<r+1?i:r+1],n[i<r+2?i:r+2],t-r)},Utils:{Linear:function(n,e,i){return(e-n)*i+n},Bernstein:function(n,e){var i=Af.Utils.Factorial;return i(n)/i(e)/i(n-e)},Factorial:function(){var n=[1];return function(e){var i=1;if(n[e])return n[e];for(var t=e;t>1;t--)i*=t;return n[e]=i,i}}(),CatmullRom:function(n,e,i,t,r){var s=(i-n)*.5,o=(t-e)*.5,l=r*r,c=r*l;return(2*e-2*i+s+o)*c+(-3*e+3*i-2*s-o)*l+s*r+e}}},h_e=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),$T=new c_e,u_e=function(){function n(e,i){i===void 0&&(i=$T),this._object=e,this._group=i,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ju.Linear.None,this._interpolationFunction=Af.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=h_e.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,i){if(i===void 0&&(i=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=i<0?0:i,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,i){if(e===void 0&&(e=c0()),i===void 0&&(i=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var t in this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||i){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,i)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,i,t,r,s){for(var o in t){var l=e[o],c=Array.isArray(l),u=c?"array":typeof l,d=!c&&Array.isArray(t[o]);if(!(u==="undefined"||u==="function")){if(d){var f=t[o];if(f.length===0)continue;for(var m=[l],g=0,y=f.length;g<y;g+=1){var x=this._handleRelativeValue(l,f[g]);if(isNaN(x)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(x)}d&&(t[o]=m)}if((u==="object"||c)&&l&&!d){i[o]=c?[]:{};var b=l;for(var S in b)i[o][S]=b[S];r[o]=c?[]:{};var f=t[o];if(!this._isDynamic){var _={};for(var S in f)_[S]=f[S];t[o]=f=_}this._setupProperties(b,i[o],f,r[o],s)}else(typeof i[o]>"u"||s)&&(i[o]=l),c||(i[o]*=1),d?r[o]=t[o].slice().reverse():r[o]=i[o]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(e){return e===void 0&&(e=c0()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},n.prototype.resume=function(e){return e===void 0&&(e=c0()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},n.prototype.stopChainedTweens=function(){for(var e=0,i=this._chainedTweens.length;e<i;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e===void 0&&(e=$T),this._group=e,this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Ju.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=Af.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,i){var t;if(e===void 0&&(e=c0()),i===void 0&&(i=!0),this._isPaused)return!0;var r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>r)return!1;i&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,o=this._duration+((t=this._repeatDelayTime)!==null&&t!==void 0?t:this._delayTime),l=this._duration+this._repeat*o,c=this._calculateElapsedPortion(s,o,l),u=this._easingFunction(c),d=this._calculateCompletionStatus(s,o);if(d==="repeat"&&this._processRepetition(s,o),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),d==="about-to-repeat"&&this._processRepetition(s,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,c),d==="repeat"||d==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(d==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var f=0,m=this._chainedTweens.length;f<m;f++)this._chainedTweens[f].start(this._startTime+this._duration,!1)}return d!=="completed"},n.prototype._calculateElapsedPortion=function(e,i,t){if(this._duration===0||e>t)return 1;var r=e%i,s=Math.min(r/this._duration,1);return s===0&&e!==0&&e%this._duration===0?1:s},n.prototype._calculateCompletionStatus=function(e,i){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},n.prototype._processRepetition=function(e,i){var t=Math.min(Math.trunc((e-this._duration)/i)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=t);for(var r in this._valuesStartRepeat){var s=this._valuesEnd[r];!this._yoyo&&typeof s=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(s)),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=i*t},n.prototype._updateProperties=function(e,i,t,r){for(var s in t)if(i[s]!==void 0){var o=i[s]||0,l=t[s],c=Array.isArray(e[s]),u=Array.isArray(l),d=!c&&u;d?e[s]=this._interpolationFunction(l,r):typeof l=="object"&&l?this._updateProperties(e[s],o,l,r):(l=this._handleRelativeValue(o,l),typeof l=="number"&&(e[s]=o+(l-o)*r))}},n.prototype._handleRelativeValue=function(e,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?e+parseFloat(i):parseFloat(i)},n.prototype._swapEndStartRepeatValues=function(e){var i=this._valuesStartRepeat[e],t=this._valuesEnd[e];typeof t=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(t):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i},n}(),ll=$T;ll.getAll.bind(ll);ll.removeAll.bind(ll);ll.add.bind(ll);ll.remove.bind(ll);var d_e=ll.update.bind(ll);class f_e{constructor(){this.TileType={Brick:1,Iron:2,Grass:3,Water:4,Home:9},this.Direction={None:0,Up:1,Right:2,Down:3,Left:4},this.CampType={Player:"Player",Enermy:"Enermy"},this.ObjectType={Tank:"Tank",Bullet:"Bullet"},this.GameState={Prepare:"Prepare",Gaming:"Gaming",Finish:"Finish"},this.maps=this.getMapDatas()}makeTween(e){var i=new u_e(e);return i}makeTweenTankAppear(e,i){e.position.y=-1,this.makeTween(e.position).to({y:0},1e3).easing(Ju.Back.Out).onComplete(i).start()}randInt(e,i){if(i<e)return e;var t=i+1-e;return Math.floor(Math.random()*t)+e}randSplice(e){var i=this.randInt(0,e.length-1);return e.splice(i,1)[0]}formatNum(e,i){if(typeof e=="number")return this.formatNumImpl(e,i);if(e instanceof ne)return e.x=this.formatNumImpl(e.x,i),e.y=this.formatNumImpl(e.y,i),e.z=this.formatNumImpl(e.z,i),e}formatNumImpl(e,i){if(i==0)return Math.abs(e)<1e-4?0:e;var t=Math.round(e/i);return i*t}getDirectionRotation(e){return[0,0,-Math.PI/2,Math.PI,Math.PI/2][e]}isEqual(e,i){return Math.abs(e-i)<=1e-4}removeArrayValue(e,i){for(var t=e.indexOf(i);t>=0;)e.splice(t,1),t=e.indexOf(i)}removeArrayValueIf(e,i){for(var t=e.findIndex(i);t>=0;)e.splice(t,1),t=e.indexOf(i)}getMapDatas(){const e=this.getSrcMaps(),i=[];for(let t=0;t<e.length;++t){const r=e[t],s=this.getMapData(r);i.push(s)}return i}getMapData(e){var i=e.split(`
`);i.shift(),i.pop();var t=[];for(let s=0;s<i.length;s++){var r=i[s].trim().split("	").map(l=>parseInt(l)||0);t[s]=r}return t}getDirectionVector(e){var t=[null,new ne(0,0,-1),new ne(1,0,0),new ne(0,0,1),new ne(-1,0,0)][e];return t?t.clone():null}getSrcMaps(){return[`1
            0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
            0																									0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0										1	1			1	1										0
            0										1	1			1	1										0
            1	1			1	1	1	1											1	1	1	1			1	1
            2	2			1	1	1	1											1	1	1	1			2	2
            0										1	1			1	1										0
            0										1	1	1	1	1	1										0
            0		1	1			1	1			1	1	1	1	1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1				1	1	1	1			1	1			1	1			0
            0											1	9		1											0
            0	0	0	0	0	0	0	0	0	0	0	1			1	0	0	0	0	0	0	0	0	0	0	0
`]}}const lt=new f_e;class p_e{constructor(){this.Rows=24,this.Cols=26,this.Width=this.Cols*.5,this.Height=this.Rows*.5,this.HalfWidth=this.Width/2,this.HalfHeight=this.Height/2}getRCByIndex(e){let i={};return i.r=Math.floor(e/this.Cols),i.c=e%this.Cols,i}getIndexByRC(e,i){if(typeof e=="object")var{r:e,c:i}=e;return e*this.Cols+i}getIndexByPosition(e){return this.getIndexByRC(getRCByPosition(e))}getPositionByRC(e,i){if(typeof e=="object")var{r:e,c:i}=e;return new ne(i*.5-6.25,0,e*.5-5.75)}getRCByPosition(e){let i={};return i.r=Math.floor((e.z+6)/.5),i.c=Math.floor((e.x+6.5)/.5),i}isIndexInBound(e){return e>=0&&e<this.Rows*this.Cols}isRCInBound(e,i){if(typeof e=="object")var{r:e,c:i}=e;return e>=0&&e<this.Rows&&i>=0&&i<this.Cols}isGridInBound(e){return!(e.minR<0||e.minC<0||e.maxR>=this.Rows||e.maxC>=this.Cols)}getStandGrid(e,i){let t={};const r=new ne(e.x-i/2,0,e.z-i/2),s=new ne(e.x+i/2,0,e.z+i/2),o=this.getRCByPosition(r),l=this.getRCByPosition(s);return t.minR=Math.min(o.r,l.r),t.minC=Math.min(o.c,l.c),t.maxR=Math.max(o.r,l.r),t.maxC=Math.max(o.c,l.c),Number.isInteger(s.x/.5)&&(t.maxC-=1),Number.isInteger(s.z/.5)&&(t.maxR-=1),t}}var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function m_e(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var i=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(t){var r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(i,t,r.get?r:{enumerable:!0,get:function(){return n[t]}})}),i}var dy=function(e,i,t,r,s){var o=r-e,l=s-i;return o*o+l*l<=t*t},g_e=function(e,i,t,r,s,o){var l=e-r,c=s-i,u=t+o;return l*l+c*c<=u*u},Jw=function(e,i,t,r,s,o,l){var c=[s-e,o-i],u=[t-e,r-i],d=i2(u,u),f=i2(c,u),m=f/d;m=m<0?0:m,m=m>1?1:m;var g=[u[0]*m+e-s,u[1]*m+i-o],y=i2(g,g);return y<=l*l};function i2(n,e){return n[0]*e[0]+n[1]*e[1]}var v_e=Jw,y_e=function(e,i,t,r,s,o,l){return v_e(r,s,o,l,e,i,t)},r3=function(e,i,t,r,s,o,l){var c=t/2,u=r/2,d=Math.abs(s-(e+t/2)),f=Math.abs(o-(i+r/2));if(d>c+l||f>u+l)return!1;if(d<=c||f<=u)return!0;var m=d-c,g=f-u;return m*m+g*g<=l*l},b_e=r3,x_e=function(e,i,t,r,s,o,l){return b_e(r,s,o,l,e,i,t)};function n2(n,e,i,t){return Math.sqrt(Math.pow(n-i,2)+Math.pow(e-t,2))}var s3=function(e,i,t,r,s,o,l){return l=l||1,Math.abs(n2(e,i,t,r)-(n2(e,i,s,o)+n2(t,r,s,o)))<=l};const O_e=s3;var fy=function(e,i,t,r){var s=e.length,o=!1,l,c;for(l=0,c=s-2;l<s;l+=2)e[l+1]>t!=e[c+1]>t&&i<(e[c]-e[l])*(t-e[l+1])/(e[c+1]-e[l+1])+e[l]&&(o=!o),c=l;if(o)return!0;for(l=0;l<s;l+=2){var u=e[l],d=e[l+1],f,m;if(l===s-2?(f=e[0],m=e[1]):(f=e[l+2],m=e[l+3]),O_e(u,d,f,m,i,t,r))return!0}return!1},w_e=fy,iN=Jw,X9=function(e,i,t,r,s){if(w_e(e,i,t,s))return!0;for(var o=e.length,l=0;l<o-2;l+=2)if(iN(e[l],e[l+1],e[l+2],e[l+3],i,t,r))return!0;return iN(e[0],e[1],e[o-2],e[o-1],i,t,r)},__e=X9,S_e=function(e,i,t,r,s){return __e(r,e,i,t,s)},W9=10,vO,yO,o3;function Q9(){vO=[],yO=[];for(var n=0;n<=W9;n++){var e=4<<n;vO[n]=.5/Math.cos(4*Math.acos(0)/e),yO[n]=.5/(Math.cos(2*Math.acos(0)/e)*Math.cos(2*Math.acos(0)/e))}o3=!0}function H9(n,e,i,t,r,s,o){for(var l=1;l<=W9;l++){var c=(i+r)*vO[l],u=(t+s)*vO[l],d=n-c,f=e-u;if(d*d+f*f<=o)return!0;var m=r-c,g=s-u;if(d*m+f*g>=0&&d*m+f*g<=m*m+g*g&&(f*m-d*g>=0||o*(m*m+g*g)>=(f*m-d*g)*(f*m-d*g)))return!0;var y=i-c,x=t-u;if(d*y+f*x>=0&&d*y+f*x<=y*y+x*x&&(f*y-d*x<=0||o*(y*y+x*x)>=(f*y-d*x)*(f*y-d*x)))return!0;var b=(i+c)*yO[l],S=(t+u)*yO[l];if((b-n)*(b-n)+(S-e)*(S-e)<o){r=c,s=u;continue}var _=c-b+c,O=u-S+u;if((_-n)*(_-n)+(O-e)*(O-e)<o){i=c,t=u;continue}var k=b-c,M=S-u;if(f*k-d*M<=0||o*(k*k+M*M)>(f*k-d*M)*(f*k-d*M)){if(d*k+f*M>0){if(Math.abs(d*k+f*M)<=k*k+M*M||(n-b)*(i-b)+(e-S)*(t-S)>=0){r=c,s=u;continue}}else if(-(d*k+f*M)<=k*k+M*M||(n-_)*(r-_)+(e-O)*(s-O)>=0){i=c,t=u;continue}}return!1}return!1}function C_e(n,e,i,t,r,s,o,l){o3||Q9();var c=Math.abs(r-n)*l,u=Math.abs(s-e)*o;i*=l,t*=o;var d=o*l;return c*c+(t-u)*(t-u)<=d*d||(i-c)*(i-c)+u*u<=d*d||c*t+u*i<=i*t||(c*t+u*i-i*t)*(c*t+u*i-i*t)<=d*d*(i*i+t*t)&&c*i-u*t>=-t*t&&c*i-u*t<=i*i?!0:(c-i)*(c-i)+(u-t)*(u-t)<=d*d||c<=i&&u-d<=t||u<=t&&c-d<=i?H9(c,u,i,0,0,t,d*d):!1}function k_e(n,e,i,t,r,s,o){o3||Q9();var l=Math.abs(r-n),c=Math.abs(s-e);return l*l+(t-c)*(t-c)<=o*o||(i-l)*(i-l)+c*c<=o*o||l*t+c*i<=i*t||(l*t+c*i-i*t)*(l*t+c*i-i*t)<=o*o*(i*i+t*t)&&l*i-c*t>=-t*t&&l*i-c*t<=i*i?!0:(l-i)*(l-i)+(c-t)*(c-t)<=o*o||l<=i&&c-o<=t||c<=t&&l-o<=i?H9(l,c,i,0,0,t,o*o):!1}var G9={ellipseCircle:k_e,ellipseEllipse:C_e},T_e=G9,Y9=function(e,i,t,r,s,o,l){return T_e.ellipseCircle(e,i,t,r,s,o,l)},M_e=Y9,E_e=function(e,i,t,r,s,o,l){return M_e(r,s,o,l,e,i,t)},Yc=dy,P_e=r3,j9=function(e,i,t,r,s,o,l,c){c=c||1;var u=0;if(u+=Yc(e,i,t,r,s)?1:0,u+=Yc(e,i,t,r+o,s)?1:0,u+=Yc(e,i,t,r,s+l)?1:0,u+=Yc(e,i,t,r+o,s+l)?1:0,u===0)return P_e(r,s,o,l,e,i,t);if(u>=1&&u<=3)return!0;if(u===4)return!Yc(e,i,t-c,r,s)||!Yc(e,i,t-c,r+o,s)||!Yc(e,i,t-c,r,s+l)||!Yc(e,i,t-c,r+o,s+l)},A_e=Jw,nN=dy,q9=function(e,i,t,r,s,o,l,c){return c=c||1,A_e(r,s,o,l,e,i,t)&&!(nN(e,i,t-c,r,s)&&nN(e,i,t-c,o,l))},rN=dy,Z9=function(e,i,t,r,s,o){return o=o||1,rN(e,i,t,r,s)&&!rN(e,i,t-o,r,s)},K9=function(e,i,t,r,s,o,l,c){var u=t-e,d=r-i,f=l-s,m=c-o,g=(-d*(e-s)+u*(i-o))/(-f*d+u*m),y=(f*(i-o)-m*(e-s))/(-f*d+u*m);return g>=0&&g<=1&&y>=0&&y<=1},R_e=fy,I_e=K9,a3=function(e,i,t,r,s,o){var l=s.length;if(R_e(s,e,i,o))return!0;for(var c=0;c<l;c+=2){var u=(c+2)%l;if(I_e(e,i,t,r,s[c],s[c+1],s[u],s[u+1]))return!0}return!1},D_e=a3,N_e=function(e,i,t,r,s,o){return D_e(i,t,r,s,e,o)},l3=function(e,i){for(var t=e,r=i,s=[t,r],o,l,c,u,d,f,m=0;m<s.length;m++)for(var g=s[m],y=0;y<g.length;y+=2){var x=(y+2)%g.length,b={x:g[x+1]-g[y+1],y:g[y]-g[x]};for(o=l=null,f=0;f<t.length;f+=2)c=b.x*t[f]+b.y*t[f+1],(o===null||c<o)&&(o=c),(l===null||c>l)&&(l=c);for(u=d=null,f=0;f<r.length;f+=2)c=b.x*r[f]+b.y*r[f+1],(u===null||c<u)&&(u=c),(d===null||c>d)&&(d=c);if(l<u||d<o)return!1}return!0},$_e=l3,J9=function(e,i,t,r,s){var o=[i,t,i+r,t,i+r,t+s,i,t+s];return $_e(e,o)},c3=function(e,i,t,r,s,o,l,c){s-=e,l-=e,o-=i,c-=i;var u=Math.pow(l-s,2)/t/t+Math.pow(c-o,2)/r/r,d=2*s*(l-s)/t/t+2*o*(c-o)/r/r,f=s*s/t/t+o*o/r/r-1,m=d*d-4*u*f;if(m===0){var g=-d/2/u;return g>=0&&g<=1}else if(m>0){var y=Math.sqrt(m),x=(-d+y)/2/u,b=(-d-y)/2/u;return x>=0&&x<=1||b>=0&&b<=1}else return!1},V_e=c3,e7=function(e,i,t,r,s,o,l,c){return V_e(s,o,l,c,e,i,t,r)},L_e=fy,sN=e7,t7=function(e,i,t,r,s){if(L_e(e,i,t))return!0;for(var o=e.length,l=0;l<o-2;l+=2)if(sN(e[l],e[l+1],e[l+2],e[l+3],i,t,r,s))return!0;return sN(e[0],e[1],e[o-2],e[o-1],i,t,r,s)},e_=function(e,i,t,r,s,o){return s>=e&&s<=e+t&&o>=i&&o<=i+r},B_e=function(e,i,t,r,s,o,l,c){return e<s+l&&e+t>s&&i<o+c&&i+r>o},U_e=function(e,i,t,r,s){const o=Math.atan2(r-i,t-e)-Math.PI/2,l=s/2,c=Math.cos(o)*l,u=Math.sin(o)*l;return[e-c,i-u,t-c,r-u,t+c,r+u,e+c,i+u]};const Tb=U_e,F_e=l3,oN=a3,z_e=K9;var i7=function(e,i,t,r,s,o,l,c,u,d){return u||d?X_e(e,i,t,r,s,o,l,c,u,d):z_e(e,i,t,r,s,o,l,c)};function X_e(n,e,i,t,r,s,o,l,c,u){if(c&&u)return F_e(Tb(n,e,i,t,c),Tb(r,s,o,l,u));if(c)return oN(r,s,o,l,Tb(n,e,i,t,c));if(u)return oN(n,e,i,t,Tb(r,s,o,l,c))}var aN=e_,Mb=i7,n7=function(e,i,t,r,s,o,l,c){return aN(s,o,l,c,e,i)||aN(s,o,l,c,t,r)?!0:Mb(e,i,t,r,s,o,s+l,o)||Mb(e,i,t,r,s+l,o,s+l,o+c)||Mb(e,i,t,r,s,o+c,s+l,o+c)||Mb(e,i,t,r,s,o,s,o+c)},W_e=n7,Q_e=function(e,i,t,r,s,o,l,c){return W_e(s,o,l,c,e,i,t,r)},H_e=J9,G_e=function(e,i,t,r,s){return H_e(s,e,i,t,r)},Eb=c3,Y_e=e_,r7=function(e,i,t,r,s,o,l,c){return Y_e(s,o,l,c,e,i)||Eb(e,i,t,r,s,o,s+l,o)||Eb(e,i,t,r,s,o+c,s+l,o+c)||Eb(e,i,t,r,s,o,s,o+c)||Eb(e,i,t,r,s+l,o,s+l,o+c)},j_e=r7,q_e=function(e,i,t,r,s,o,l,c){return j_e(s,o,l,c,e,i,t,r)},Z_e=j9,K_e=function(e,i,t,r,s,o,l,c){return Z_e(s,o,l,e,i,t,r,c)},J_e=e_,eSe=function(e,i,t,r,s,o){return J_e(t,r,s,o,e,i)},tSe=fy,iSe=function(e,i,t,r){return tSe(t,e,i,r)},nSe=dy,rSe=function(e,i,t,r,s){return nSe(t,r,s,e,i)},sSe=s3,oSe=function(e,i,t,r,s,o){return sSe(t,r,s,o,e,i)},s7=function(e,i,t,r,s,o){var l=Math.pow(s-e,2)/(t*t),c=Math.pow(o-i,2)/(r*r);return l+c<=1},aSe=s7,lSe=function(e,i,t,r,s,o){return aSe(t,r,s,o,e,i)},cSe=Z9,hSe=function(e,i,t,r,s,o){return cSe(e,i,t,r,s,o)},uSe=q9,dSe=function(e,i,t,r,s,o,l,c){return uSe(s,o,l,e,i,t,r,c)},fSe=G9,pSe=function(e,i,t,r,s,o,l,c){return fSe.ellipseEllipse(e,i,t,r,s,o,l,c)},mSe=t7,gSe=function(e,i,t,r,s){return mSe(s,e,i,t,r)},Pb={circlePoint:dy,circleCircle:g_e,circleLine:y_e,circleBox:x_e,circlePolygon:S_e,circleEllipse:E_e,circleOutlineBox:j9,circleOutlineLine:q9,circleOutlinePoint:Z9,polygonPoint:fy,polygonLine:N_e,polygonPolygon:l3,polygonBox:J9,polygonCircle:X9,polygonEllipse:t7,boxPoint:e_,boxBox:B_e,boxLine:Q_e,boxPolygon:G_e,boxCircle:r3,boxEllipse:q_e,boxCircleOutline:K_e,pointBox:eSe,pointPolygon:iSe,pointCircle:rSe,pointLine:oSe,pointEllipse:lSe,pointCircleOutline:hSe,lineLine:i7,lineBox:n7,linePolygon:a3,lineCircle:Jw,linePoint:s3,lineEllipse:e7,lineCircleOutline:dSe,ellipsePoint:s7,ellipseLine:c3,ellipseBox:r7,ellipseCircle:Y9,ellipseEllipse:pSe,ellipsePolygon:gSe};const Ls=class Ls{constructor(e,i){this.shapeType=e,e==Ls.Box?this.size=i:e==Ls.Circle&&(this.radius=i)}get center(){return this._center}set center(e){this._center=e}intersect(e){if(this.shapeType==Ls.Box&&e.shapeType==Ls.Box){var i=this.center.x-this.size/2,t=this.center.z-this.size/2,r=this.size,s=this.size,o=e.center.x-e.size/2,l=e.center.z-e.size/2,c=e.size,u=e.size,d=Pb.boxBox(i,t,r,s,o,l,c,u);return d}else if(this.shapeType==Ls.Box&&e.shapeType==Ls.Circle){var i=this.center.x-this.size/2,t=this.center.z-this.size/2,r=this.size,s=this.size,f=e.center.x,m=e.center.z,g=e.radius,d=Pb.boxCircle(i,t,r,s,f,m,g);return d}else if(this.shapeType==Ls.Circle&&e.shapeType==Ls.Box){var f=this.center.x,m=this.center.z,g=this.radius,o=e.center.x-e.size/2,l=e.center.z-e.size/2,c=e.size,u=e.size,d=Pb.circleBox(f,m,g,i,t,r,s);return d}else if(this.shapeType==Ls.Circle&&e.shapeType==Ls.Circle){var i=this.center.x,t=this.center.z,y=this.radius,o=this.center.x,l=this.center.z,x=this.radius,d=Pb.circleCircle(i,t,y,o,l,x);return d}}};f1(Ls,"Box","Box"),f1(Ls,"Circle","Circle");let Sh=Ls;class vSe{constructor(){this.obj=this.createObject(),this.speed=4,this.power=1,game.timer.tick(this.update.bind(this)),this.shape=new Sh(Sh.Circle,.15)}createObject(){var e=game.ResStore.bullet_player.clone();return e}get CampType(){return lt.CampType.Player}get ObjectType(){return lt.ObjectType.Bullet}get Shape(){return this.shape.center=this.obj.position,this.shape}init(e){this.tank=e;var i=e.position.clone().add(new ne(0,.5,0));this.obj.position.copy(i),this.direction=e.getDirection(),this.speed=this.initBulletSpeed(),this.canHitTileTypes=this.initCanHitTileTypes(),this.power=this.initPower()}initBulletSpeed(){return this.tank.starCount<=0?4:8}initPower(){return this.tank.starCount<=2?1:2}initCanHitTileTypes(){var e=[];return e.push(lt.TileType.Home),e.push(lt.TileType.Brick),this.tank.getStarCount()>=3&&e.push(lt.TileType.Iron),e}onRemove(){}update({delta:e,elapsed:i}){var t=this.speed*e,r=lt.getDirectionVector(this.direction).multiplyScalar(t);this.obj.position.add(r)}}class ySe{constructor(){this.obj=this.createObject(),this.moveSpeed=2,this.shootDiff=.1,this.shootAcc=0,this.starCount=1,this.bullets=[],this.shape=new Sh(Sh.Box,1)}getMaxBulletCount(){return this.starCount<=1?1:2}getStarCount(){return this.starCount}createObject(){var e=game.ResStore.tank_player_1.clone();this.lightTarget=new Ii,e.add(this.lightTarget),this.lightTarget.position.set(0,.5,-10);var i=new Fw(16777215);return i.position.set(0,.5,-.3),i.castShadow=!0,i.target=this.lightTarget,i.angle=Math.PI/4,i.intensity=10,i.penumbra=.2,e.add(i),this.spotLight=i,e}init(){game.onAddController.push(this.onAddController.bind(this)),game.onRemoveController.push(this.onRemoveController.bind(this))}onRemove(){lt.removeArrayValue(game.onAddController,this.onAddController.bind(this)),lt.removeArrayValue(game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e.CampType==lt.CampType.Player&&e.ObjectType==lt.ObjectType.Bullet&&this.bullets.push(e)}onRemoveController(e){e.CampType==lt.CampType.Player&&e.ObjectType==lt.ObjectType.Bullet&&lt.removeArrayValue(this.bullets,e)}get CampType(){return lt.CampType.Player}get ObjectType(){return lt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}ITank_update({delta:e,elapsed:i}){window.game.gameState==lt.GameState.Gaming&&(this.checkMove({delta:e,elapsed:i}),this.checkShoot({delta:e,elapsed:i}))}checkMove({delta:e,elapsed:i}){var t=game.getMoveDirection();if(t){var r=lt.getDirectionRotation(t);r!=this.rotation.y&&(this.rotation.y=r,lt.formatNum(this.position,.25));var s=game.getCanMoveLength(this,t);if(s>0){var o=this.moveSpeed*e;o>s&&(o=s);var l=lt.getDirectionVector(t).multiplyScalar(o);this.position.add(l)}}}getDirection(){return this.rotation.y==0?lt.Direction.Up:this.rotation.y==Math.PI?lt.Direction.Down:this.rotation.y==-Math.PI/2?lt.Direction.Right:this.rotation.y==Math.PI/2?lt.Direction.Left:lt.Direction.Up}shootPressed(){return game.inputs.c||game.inputs.j||game.inputs.f}checkShoot({delta:e,elapsed:i}){this.bullets.length>=this.getMaxBulletCount()||(this.shootAcc+=e,this.shootPressed()&&this.shootAcc>=this.shootDiff&&(this.shootAcc=0,this.doShoot()))}doShoot(){var e=new vSe;game.addController(e),e.init(this)}get position(){return this.obj.position}get rotation(){return this.obj.rotation}}class bSe{constructor(){this.delta=0,this.elapsed=0,this.records=[],this.shouldRemoves=[],this.shouldAdds=[]}update({delta:e,elapsed:i}){this.delta=e,this.elapsed=i;for(let r=0;r<this.records.length;++r){var t=this.records[r];t.acc+=e,t.acc>=t.second&&(t.callback({delta:t.acc,elapsed:i}),t.acc=0,t.times&&(t.times-=1,t.times<=0&&this.shouldRemoves.push(t.callback)))}this.checkRemove(),this.checkAdd()}checkAdd(){for(let e=0;e<this.shouldAdds.length;++e)this.records.push(this.shouldAdds[e]);this.shouldAdds.length=0}checkRemove(){for(let i=0;i<this.shouldRemoves.length;++i){var e=t=>t.callback==this.shouldRemoves[i];lt.removeArrayValueIf(this.records,e),lt.removeArrayValueIf(this.shouldAdds,e)}this.shouldRemoves.length=0}tick(e,i){i=i||0;var t={second:i,callback:e,acc:0};this.shouldAdds.push(t)}tickOnce(e,i){i=i||0;var t={second:i,callback:e,acc:0,times:1};this.shouldAdds.push(t)}untick(e){this.shouldRemoves.push(e)}}class r2{constructor(e,i,t){this.enermyMan=e,this.bornIndex=i,this.tankType=t,this.obj=this.createObject(),this.obj.position.copy(this.getBornPos(this.bornIndex)),this.obj.rotation.y=lt.getDirectionRotation(lt.Direction.Down),this.state=0,this.shape=new Sh(Sh.Box,1),this.moveSpeed=this.getSpeedTemplate(),this.blood=this.getBloodTemplate(),this.direction=this.getRandDirection(),this.moveDirectAcc=0,this.moveDirectMax=3}get position(){return this.obj.position}get rotation(){return this.obj.rotation}createObject(){var e=window.game.ResStore[`enermy${this.tankType+1}`],i=e.clone();return i}getSpeedTemplate(){var e=[2,3,4,2];return e[this.tankType]}getBloodTemplate(){var e=[1,2,1,4];return e[this.tankType]}getRandDirection(){for(var e=[lt.Direction.Up,lt.Direction.Right,lt.Direction.Down,lt.Direction.Left],i=[window.game.getCanMoveLength(this,lt.Direction.Up),window.game.getCanMoveLength(this,lt.Direction.Right),window.game.getCanMoveLength(this,lt.Direction.Down),window.game.getCanMoveLength(this,lt.Direction.Left)],t=i.findIndex(r=>r<=0);t>=0;)e.splice(t,1),i.splice(t,1),t=i.findIndex(r=>r<=0);return e.length>0?lt.randSplice(e):lt.Direction.Down}onAppearFinish(){this.state=1}get CampType(){return lt.CampType.Enermy}get ObjectType(){return lt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new ne(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new ne(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new ne(.25,0,.25))}ITank_update({delta:e}){this.state!=0&&(this.wantChangeDirection&&(this.direction=this.getRandDirection(),this.wantChangeDirection=!1,this.moveDirectAcc=0,this.moveDirectMax=1e3,lt.randInt(1,5)),this.checkMove({delta:e}),this.moveDirectAcc>=this.moveDirectMax&&(this.wantChangeDirection=!0))}checkMove({delta:e}){var i=lt.getDirectionRotation(this.direction);i!=this.rotation.y&&(this.rotation.y=i,lt.formatNum(this.position,.25));var t=game.getCanMoveLength(this,this.direction);if(t>0){var r=this.moveSpeed*e;r>t&&(r=t);var s=lt.getDirectionVector(this.direction).multiplyScalar(r);this.position.add(s),this.moveDirectAcc+=e}else this.wantChangeDirection=!0}}class xSe{constructor(){this.tanks=[],this.bornIndex=0,this.bornTime={},this.totalCount=20,this.destroyCount=0,console.log("EnermyMan")}start(){window.game.timer.tick(this.update.bind(this),1),window.game.onAddController.push(this.onAddController.bind(this)),window.game.onRemoveController.push(this.onRemoveController.bind(this))}dispose(){window.game.timer.untick(this.update.bind(this)),lt.removeArrayValue(window.game.onAddController,this.onAddController.bind(this)),lt.removeArrayValue(window.game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e instanceof r2&&this.tanks.push(e)}onRemoveController(e){e instanceof r2&&(lt.removeArrayValue(this.tanks,e),this.destroyCount+=1)}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new ne(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new ne(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new ne(.25,0,.25))}isEmptyBorn(){var e=this.bornTime[this.bornIndex]||0;return Date.now()-e>2e3}update({delta:e,elapsed:i}){for(;this.tanks.length<1&&this.isEmptyBorn();)this.makeEnermy()}makeEnermy(){var e=lt.randInt(0,3),i=new r2(this,this.bornIndex,e);window.game.addController(i),lt.makeTweenTankAppear(i.obj,i.onAppearFinish.bind(i)),this.bornTime[this.bornIndex]=Date.now(),this.bornIndex+=1,this.bornIndex=this.bornIndex%3}}const{onLoop:OSe}=_d();class wSe{constructor(e){f1(this,"tick",0);this.scene=e.value.context.scene.value,this.camera=e.value.context.camera.value}startGame(){this.rc=new p_e,this.inputs={},this.tiles=[],this.player_1=null,this.controllers=[],this.playerBullets=[],this.controllerShouldAdd=[],this.controllerShouldRemove=[],this.ITank_updates=[],this.onAddController=[],this.onRemoveController=[],this.timer=new bSe,OSe(this.update.bind(this));var e=this.ResStore.platform.clone();this.scene.add(e),this.tileRoot=new zl,this.scene.add(this.tileRoot),this.startLevel(0),this.initInput(),e.visible=this.visible,this.tileRoot.visible=this.visible}startLevel(e){for(this.gameState=lt.GameState.Prepare;this.tileRoot.children.length>0;)this.tileRoot.remove(this.tileRoot.children[0]);this.initMap(e),this.initPlayer(),this.enermyMan&&this.enermyMan.dispose(),this.enermyMan=new xSe,this.timer.tickOnce(()=>{this.showPlayerAppear()},1)}initPlayer(){this.player_1&&this.removeController(this.player_1),this.player_1=new ySe,this.addController(this.player_1),this.player_1.position.copy(this.rc.getPositionByRC(22,9).add(new ne(-.25,-1,.25))),this.player_1.init()}showPlayerAppear(){lt.makeTween(this.player_1.obj.position).to({y:0},1e3).easing(Ju.Back.Out).onComplete(()=>{this.gameState=lt.GameState.Gaming,this.enermyMan.start()}).start()}run(){this.loadResource()}loadResource(){this.ResStore={};const e=["tank/platform.fbx","tank/tile1.fbx","tank/tile2.fbx","tank/tile9.fbx","tank/enermy1.fbx","tank/enermy2.fbx","tank/enermy3.fbx","tank/enermy4.fbx","tank/bullet_player.fbx","tank/tank_player_1.fbx"];Fwe(e).then(i=>{for(let r=0;r<i.length;++r){const s=i[r],o=e[r];this.ResStore[o]=s;var t=o.split("/");t=t[t.length-1],t=t.split("."),t=t[0],this.ResStore[t]=s}this.brickHitMaterial=this.ResStore.tile1.children[0].material.clone(),this.brickHitMaterial.color.setHex(8912896),this.startGame()})}initInput(){document.addEventListener("keydown",e=>{this.inputs[e.key]=1}),document.addEventListener("keyup",e=>{this.inputs[e.key]=0})}initMap(e){var i=lt.maps[e];for(let o=0;o<i.length;o++){const l=i[o];for(let c=0;c<l.length;c++){const u=l[c],d=this.rc.getIndexByRC(o,c);var t=null,r=0;if(u==lt.TileType.Brick){var t=this.ResStore.tile1.clone();this.tileRoot.add(t),t.position.copy(this.rc.getPositionByRC(o,c)),r=1}else if(u==lt.TileType.Iron){var t=this.ResStore.tile2.clone();this.tileRoot.add(t),t.position.copy(this.rc.getPositionByRC(o,c)),r=1}else if(u==lt.TileType.Home){var t=this.ResStore.tile9.clone();this.tileRoot.add(t),t.position.x=c*.5-6,t.position.z=o*.5-5.5,r=2}if(r==1){var s={tileType:u,obj:t,blood:2};this.tiles[d]=s}else if(r==2){var s={tileType:u,obj:t,blood:1};this.tiles[d]=s,this.tiles[this.rc.getIndexByRC(o,c+1)]=s,this.tiles[this.rc.getIndexByRC(o+1,c)]=s,this.tiles[this.rc.getIndexByRC(o+1,c+1)]=s}if(!this.tiles[d]){var s={tileType:u,obj:t};this.tiles[d]=s}}}}getTile(e,i){var t=this.rc.getIndexByRC(e,i);return this.tiles[t]}getTilesByGrid(e){var i=[];for(let r=e.minR;r<=e.maxR;++r)for(let s=e.minC;s<=e.maxC;++s){var t=this.getTile(r,s);t.tileType&&i.push(t)}return i}getMoveDirection(){return this.inputs.w?lt.Direction.Up:this.inputs.s?lt.Direction.Down:this.inputs.a?lt.Direction.Left:this.inputs.d?lt.Direction.Right:lt.Direction.None}getBlockTileRCs(e,i){let t=[];if(i==lt.Direction.Up)for(let s=e.minR;s>=0;--s)for(let o=e.minC;o<=e.maxC;++o){var r=this.getTile(s,o);r.tileType&&t.push({r:s,c:o})}else if(i==lt.Direction.Down)for(let s=e.maxR;s<=this.rc.Rows-1;++s)for(let o=e.minC;o<=e.maxC;++o){var r=this.getTile(s,o);r.tileType&&t.push({r:s,c:o})}else if(i==lt.Direction.Left)for(let s=e.minC;s>=0;--s)for(let o=e.minR;o<=e.maxR;++o){var r=this.getTile(o,s);r.tileType&&t.push({r:o,c:s})}else if(i==lt.Direction.Right)for(let s=e.maxC;s<=this.rc.Cols-1;++s)for(let o=e.minR;o<=e.maxR;++o){var r=this.getTile(o,s);r.tileType&&t.push({r:o,c:s})}return t}getCanMoveLength(e,i){var t=e.position.clone(),r=this.rc.getStandGrid(e.position,1),s=this.getBlockTileRCs(r,i),o=s[0],l=0;if(!o)i==lt.Direction.Up?l=t.z- -5.5:i==lt.Direction.Down?l=5.5-t.z:i==lt.Direction.Left?l=t.x- -6:i==lt.Direction.Right&&(l=6-t.x);else{var c=this.rc.getPositionByRC(o);i==lt.Direction.Up?l=t.z-.5-(c.z+.25):i==lt.Direction.Down?l=c.z-.25-(t.z+.5):i==lt.Direction.Left?l=t.x-.5-(c.x+.25):i==lt.Direction.Right&&(l=c.x-.25-(t.x+.5))}return l}update({delta:e,elapsed:i}){d_e(),this.checkRemoveController(),this.checkAddController();for(let t=0;t<this.ITank_updates.length;t++)this.ITank_updates[t].ITank_update({delta:e,elapsed:i});this.timer.update({delta:e,elapsed:i}),this.checkCollision({delta:e,elapsed:i}),this.checkRemoveController(),this.checkAddController(),this.makeCameraFollow({delta:e,elapsed:i})}makeCameraFollow({delta:e,elapsed:i}){}addController(e){e.obj&&this.tileRoot.add(e.obj),this.controllerShouldAdd.push(e),e.ITank_update&&this.ITank_updates.push(e);for(let t=0;t<this.onAddController.length;++t){var i=this.onAddController[t];i(e)}}checkAddController(){for(let e=0;e<this.controllerShouldAdd.length;e++){const i=this.controllerShouldAdd[e];this.controllers.push(i),i.CampType==lt.CampType.Player&&i.ObjectType==lt.ObjectType.Bullet&&this.playerBullets.push(i)}this.controllerShouldAdd.length=0}removeController(e){this.controllerShouldRemove.push(e),e.ITank_update&&lt.removeArrayValue(this.ITank_updates,e),e.onRemove&&e.onRemove();for(let t=0;t<this.onRemoveController.length;++t){var i=this.onRemoveController[t];i(e)}}checkRemoveController(){for(let e=0;e<this.controllerShouldRemove.length;e++){const i=this.controllerShouldRemove[e];lt.removeArrayValue(this.controllers,i),lt.removeArrayValue(this.playerBullets,i),this.tileRoot.remove(i.obj)}this.controllerShouldRemove.length=0}checkCollision({delta:e,elapsed:i}){for(let t=0;t<this.playerBullets.length;t++){const r=this.playerBullets[t];let s=this.rc.getStandGrid(r.obj.position,.5);if(this.rc.isGridInBound(s)){let o=this.getTilesByGrid(s);o.length>0&&this.onCollisionTiles(o,r)}else this.removeController(r)}for(let t=0;t<this.playerBullets.length;t++){const r=this.playerBullets[t];for(let s=0;s<this.enermyMan.tanks.length;s++){const o=this.enermyMan.tanks[s];if(o.Shape.intersect(r.Shape)){this.onCollisionBulletVsTank(r,o);break}}}}removeTile(e,i){}onCollisionTiles(e,i){this.removeController(i);for(let r=0;r<e.length;++r){var t=e[r];i.canHitTileTypes.indexOf(t.tileType)<0||(t.blood-=i.power,t.tileType==lt.TileType.Brick&&t.blood==1&&(t.obj.children[0].material=this.brickHitMaterial),t.blood<=0&&(t.tileType=0,this.tileRoot.remove(t.obj),t.obj=null))}}onCollisionBulletVsTank(e,i){this.removeController(e),this.removeController(i)}}const _Se=(n,e)=>{const i=n.__vccOpts||n;for(const[t,r]of e)i[t]=r;return i},SSe=Ft("TresPerspectiveCamera",{position:[0,20,0],rotation:[0,0,0]},null,-1),CSe=Ft("TresAmbientLight",{intensity:1},null,-1),kSe=Ft("TresAxesHelper",null,null,-1),TSe={__name:"TankMain",setup(n){const e=Fn(null);return Fi(e,()=>{window.game=new wSe(e),window.game.run()}),(i,t)=>{const r=Pt("TresCanvas");return ai(),on("div",null,[Re(r,{ref_key:"canvasRef",ref:e,"clear-color":"#FDF5E6","window-size":""},{default:Je(()=>[SSe,CSe,kSe,Re(oi(t3))]),_:1},512)])}}};var Px={exports:{}},og={},s2={},o2={},lN;function Oi(){return lN||(lN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}n.glob=typeof qf<"u"?qf:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"9.3.12",isBrowser:i(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return n.Konva.angleDeg?r*e:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return n.Konva.DD.isDragging},isTransforming(){var r;return(r=n.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!n.Konva.DD.node},releaseCanvasOnDestroy:!0,document:n.glob.document,_injectGlobal(r){n.glob.Konva=r}};const t=r=>{n.Konva[r.prototype.getClassName()]=r};n._registerNode=t,n.Konva._injectGlobal(n.Konva)}(o2)),o2}var a2={},cN;function Wn(){return cN||(cN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const e=Oi();class i{constructor(k=[1,0,0,1,0,0]){this.dirty=!1,this.m=k&&k.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(k){k.m[0]=this.m[0],k.m[1]=this.m[1],k.m[2]=this.m[2],k.m[3]=this.m[3],k.m[4]=this.m[4],k.m[5]=this.m[5]}point(k){var M=this.m;return{x:M[0]*k.x+M[2]*k.y+M[4],y:M[1]*k.x+M[3]*k.y+M[5]}}translate(k,M){return this.m[4]+=this.m[0]*k+this.m[2]*M,this.m[5]+=this.m[1]*k+this.m[3]*M,this}scale(k,M){return this.m[0]*=k,this.m[1]*=k,this.m[2]*=M,this.m[3]*=M,this}rotate(k){var M=Math.cos(k),E=Math.sin(k),R=this.m[0]*M+this.m[2]*E,P=this.m[1]*M+this.m[3]*E,I=this.m[0]*-E+this.m[2]*M,T=this.m[1]*-E+this.m[3]*M;return this.m[0]=R,this.m[1]=P,this.m[2]=I,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(k,M){var E=this.m[0]+this.m[2]*M,R=this.m[1]+this.m[3]*M,P=this.m[2]+this.m[0]*k,I=this.m[3]+this.m[1]*k;return this.m[0]=E,this.m[1]=R,this.m[2]=P,this.m[3]=I,this}multiply(k){var M=this.m[0]*k.m[0]+this.m[2]*k.m[1],E=this.m[1]*k.m[0]+this.m[3]*k.m[1],R=this.m[0]*k.m[2]+this.m[2]*k.m[3],P=this.m[1]*k.m[2]+this.m[3]*k.m[3],I=this.m[0]*k.m[4]+this.m[2]*k.m[5]+this.m[4],T=this.m[1]*k.m[4]+this.m[3]*k.m[5]+this.m[5];return this.m[0]=M,this.m[1]=E,this.m[2]=R,this.m[3]=P,this.m[4]=I,this.m[5]=T,this}invert(){var k=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),M=this.m[3]*k,E=-this.m[1]*k,R=-this.m[2]*k,P=this.m[0]*k,I=k*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=k*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=M,this.m[1]=E,this.m[2]=R,this.m[3]=P,this.m[4]=I,this.m[5]=T,this}getMatrix(){return this.m}decompose(){var k=this.m[0],M=this.m[1],E=this.m[2],R=this.m[3],P=this.m[4],I=this.m[5],T=k*R-M*E;let N={x:P,y:I,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(k!=0||M!=0){var L=Math.sqrt(k*k+M*M);N.rotation=M>0?Math.acos(k/L):-Math.acos(k/L),N.scaleX=L,N.scaleY=T/L,N.skewX=(k*E+M*R)/T,N.skewY=0}else if(E!=0||R!=0){var D=Math.sqrt(E*E+R*R);N.rotation=Math.PI/2-(R>0?Math.acos(-E/D):-Math.acos(E/D)),N.scaleX=T/D,N.scaleY=D,N.skewX=0,N.skewY=(k*E+M*R)/T}return N.rotation=n.Util._getRotation(N.rotation),N}}n.Transform=i;var t="[object Array]",r="[object Number]",s="[object String]",o="[object Boolean]",l=Math.PI/180,c=180/Math.PI,u="#",d="",f="0",m="Konva warning: ",g="Konva error: ",y="rgb(",x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},b=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,S=[];const _=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(O){setTimeout(O,60)};n.Util={_isElement(O){return!!(O&&O.nodeType==1)},_isFunction(O){return!!(O&&O.constructor&&O.call&&O.apply)},_isPlainObject(O){return!!O&&O.constructor===Object},_isArray(O){return Object.prototype.toString.call(O)===t},_isNumber(O){return Object.prototype.toString.call(O)===r&&!isNaN(O)&&isFinite(O)},_isString(O){return Object.prototype.toString.call(O)===s},_isBoolean(O){return Object.prototype.toString.call(O)===o},isObject(O){return O instanceof Object},isValidSelector(O){if(typeof O!="string")return!1;var k=O[0];return k==="#"||k==="."||k===k.toUpperCase()},_sign(O){return O===0||O>0?1:-1},requestAnimFrame(O){S.push(O),S.length===1&&_(function(){const k=S;S=[],k.forEach(function(M){M()})})},createCanvasElement(){var O=document.createElement("canvas");try{O.style=O.style||{}}catch{}return O},createImageElement(){return document.createElement("img")},_isInDocument(O){for(;O=O.parentNode;)if(O==document)return!0;return!1},_urlToImage(O,k){var M=n.Util.createImageElement();M.onload=function(){k(M)},M.src=O},_rgbToHex(O,k,M){return((1<<24)+(O<<16)+(k<<8)+M).toString(16).slice(1)},_hexToRgb(O){O=O.replace(u,d);var k=parseInt(O,16);return{r:k>>16&255,g:k>>8&255,b:k&255}},getRandomColor(){for(var O=(Math.random()*16777215<<0).toString(16);O.length<6;)O=f+O;return u+O},getRGB(O){var k;return O in x?(k=x[O],{r:k[0],g:k[1],b:k[2]}):O[0]===u?this._hexToRgb(O.substring(1)):O.substr(0,4)===y?(k=b.exec(O.replace(/ /g,"")),{r:parseInt(k[1],10),g:parseInt(k[2],10),b:parseInt(k[3],10)}):{r:0,g:0,b:0}},colorToRGBA(O){return O=O||"black",n.Util._namedColorToRBA(O)||n.Util._hex3ColorToRGBA(O)||n.Util._hex4ColorToRGBA(O)||n.Util._hex6ColorToRGBA(O)||n.Util._hex8ColorToRGBA(O)||n.Util._rgbColorToRGBA(O)||n.Util._rgbaColorToRGBA(O)||n.Util._hslColorToRGBA(O)},_namedColorToRBA(O){var k=x[O.toLowerCase()];return k?{r:k[0],g:k[1],b:k[2],a:1}:null},_rgbColorToRGBA(O){if(O.indexOf("rgb(")===0){O=O.match(/rgb\(([^)]+)\)/)[1];var k=O.split(/ *, */).map(Number);return{r:k[0],g:k[1],b:k[2],a:1}}},_rgbaColorToRGBA(O){if(O.indexOf("rgba(")===0){O=O.match(/rgba\(([^)]+)\)/)[1];var k=O.split(/ *, */).map((M,E)=>M.slice(-1)==="%"?E===3?parseInt(M)/100:parseInt(M)/100*255:Number(M));return{r:k[0],g:k[1],b:k[2],a:k[3]}}},_hex8ColorToRGBA(O){if(O[0]==="#"&&O.length===9)return{r:parseInt(O.slice(1,3),16),g:parseInt(O.slice(3,5),16),b:parseInt(O.slice(5,7),16),a:parseInt(O.slice(7,9),16)/255}},_hex6ColorToRGBA(O){if(O[0]==="#"&&O.length===7)return{r:parseInt(O.slice(1,3),16),g:parseInt(O.slice(3,5),16),b:parseInt(O.slice(5,7),16),a:1}},_hex4ColorToRGBA(O){if(O[0]==="#"&&O.length===5)return{r:parseInt(O[1]+O[1],16),g:parseInt(O[2]+O[2],16),b:parseInt(O[3]+O[3],16),a:parseInt(O[4]+O[4],16)/255}},_hex3ColorToRGBA(O){if(O[0]==="#"&&O.length===4)return{r:parseInt(O[1]+O[1],16),g:parseInt(O[2]+O[2],16),b:parseInt(O[3]+O[3],16),a:1}},_hslColorToRGBA(O){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(O)){const[k,...M]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(O),E=Number(M[0])/360,R=Number(M[1])/100,P=Number(M[2])/100;let I,T,N;if(R===0)return N=P*255,{r:Math.round(N),g:Math.round(N),b:Math.round(N),a:1};P<.5?I=P*(1+R):I=P+R-P*R;const L=2*P-I,D=[0,0,0];for(let $=0;$<3;$++)T=E+1/3*-($-1),T<0&&T++,T>1&&T--,6*T<1?N=L+(I-L)*6*T:2*T<1?N=I:3*T<2?N=L+(I-L)*(2/3-T)*6:N=L,D[$]=N*255;return{r:Math.round(D[0]),g:Math.round(D[1]),b:Math.round(D[2]),a:1}}},haveIntersection(O,k){return!(k.x>O.x+O.width||k.x+k.width<O.x||k.y>O.y+O.height||k.y+k.height<O.y)},cloneObject(O){var k={};for(var M in O)this._isPlainObject(O[M])?k[M]=this.cloneObject(O[M]):this._isArray(O[M])?k[M]=this.cloneArray(O[M]):k[M]=O[M];return k},cloneArray(O){return O.slice(0)},degToRad(O){return O*l},radToDeg(O){return O*c},_degToRad(O){return n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(O)},_radToDeg(O){return n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(O)},_getRotation(O){return e.Konva.angleDeg?n.Util.radToDeg(O):O},_capitalize(O){return O.charAt(0).toUpperCase()+O.slice(1)},throw(O){throw new Error(g+O)},error(O){console.error(g+O)},warn(O){e.Konva.showWarnings&&console.warn(m+O)},each(O,k){for(var M in O)k(M,O[M])},_inRange(O,k,M){return k<=O&&O<M},_getProjectionToSegment(O,k,M,E,R,P){var I,T,N,L=(O-M)*(O-M)+(k-E)*(k-E);if(L==0)I=O,T=k,N=(R-M)*(R-M)+(P-E)*(P-E);else{var D=((R-O)*(M-O)+(P-k)*(E-k))/L;D<0?(I=O,T=k,N=(O-R)*(O-R)+(k-P)*(k-P)):D>1?(I=M,T=E,N=(M-R)*(M-R)+(E-P)*(E-P)):(I=O+D*(M-O),T=k+D*(E-k),N=(I-R)*(I-R)+(T-P)*(T-P))}return[I,T,N]},_getProjectionToLine(O,k,M){var E=n.Util.cloneObject(O),R=Number.MAX_VALUE;return k.forEach(function(P,I){if(!(!M&&I===k.length-1)){var T=k[(I+1)%k.length],N=n.Util._getProjectionToSegment(P.x,P.y,T.x,T.y,O.x,O.y),L=N[0],D=N[1],$=N[2];$<R&&(E.x=L,E.y=D,R=$)}}),E},_prepareArrayForTween(O,k,M){var E,R=[],P=[];if(O.length>k.length){var I=k;k=O,O=I}for(E=0;E<O.length;E+=2)R.push({x:O[E],y:O[E+1]});for(E=0;E<k.length;E+=2)P.push({x:k[E],y:k[E+1]});var T=[];return P.forEach(function(N){var L=n.Util._getProjectionToLine(N,R,M);T.push(L.x),T.push(L.y)}),T},_prepareToStringify(O){var k;O.visitedByCircularReferenceRemoval=!0;for(var M in O)if(O.hasOwnProperty(M)&&O[M]&&typeof O[M]=="object"){if(k=Object.getOwnPropertyDescriptor(O,M),O[M].visitedByCircularReferenceRemoval||n.Util._isElement(O[M]))if(k.configurable)delete O[M];else return null;else if(n.Util._prepareToStringify(O[M])===null)if(k.configurable)delete O[M];else return null}return delete O.visitedByCircularReferenceRemoval,O},_assign(O,k){for(var M in k)O[M]=k[M];return O},_getFirstPointerId(O){return O.touches?O.changedTouches[0].identifier:O.pointerId||999},releaseCanvas(...O){e.Konva.releaseCanvasOnDestroy&&O.forEach(k=>{k.width=0,k.height=0})},drawRoundedRectPath(O,k,M,E){let R=0,P=0,I=0,T=0;typeof E=="number"?R=P=I=T=Math.min(E,k/2,M/2):(R=Math.min(E[0]||0,k/2,M/2),P=Math.min(E[1]||0,k/2,M/2),T=Math.min(E[2]||0,k/2,M/2),I=Math.min(E[3]||0,k/2,M/2)),O.moveTo(R,0),O.lineTo(k-P,0),O.arc(k-P,P,P,Math.PI*3/2,0,!1),O.lineTo(k,M-T),O.arc(k-T,M-T,T,0,Math.PI/2,!1),O.lineTo(I,M),O.arc(I,M-I,I,Math.PI/2,Math.PI,!1),O.lineTo(0,R),O.arc(R,R,R,Math.PI,Math.PI*3/2,!1)}}}(a2)),a2}var ag={},l2={},yn={},hN;function ki(){if(hN)return yn;hN=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.getComponentValidator=yn.getBooleanValidator=yn.getNumberArrayValidator=yn.getFunctionValidator=yn.getStringOrGradientValidator=yn.getStringValidator=yn.getNumberOrAutoValidator=yn.getNumberOrArrayOfNumbersValidator=yn.getNumberValidator=yn.alphaComponent=yn.RGBComponent=void 0;const n=Oi(),e=Wn();function i(y){return e.Util._isString(y)?'"'+y+'"':Object.prototype.toString.call(y)==="[object Number]"||e.Util._isBoolean(y)?y:Object.prototype.toString.call(y)}function t(y){return y>255?255:y<0?0:Math.round(y)}yn.RGBComponent=t;function r(y){return y>1?1:y<1e-4?1e-4:y}yn.alphaComponent=r;function s(){if(n.Konva.isUnminified)return function(y,x){return e.Util._isNumber(y)||e.Util.warn(i(y)+' is a not valid value for "'+x+'" attribute. The value should be a number.'),y}}yn.getNumberValidator=s;function o(y){if(n.Konva.isUnminified)return function(x,b){let S=e.Util._isNumber(x),_=e.Util._isArray(x)&&x.length==y;return!S&&!_&&e.Util.warn(i(x)+' is a not valid value for "'+b+'" attribute. The value should be a number or Array<number>('+y+")"),x}}yn.getNumberOrArrayOfNumbersValidator=o;function l(){if(n.Konva.isUnminified)return function(y,x){var b=e.Util._isNumber(y),S=y==="auto";return b||S||e.Util.warn(i(y)+' is a not valid value for "'+x+'" attribute. The value should be a number or "auto".'),y}}yn.getNumberOrAutoValidator=l;function c(){if(n.Konva.isUnminified)return function(y,x){return e.Util._isString(y)||e.Util.warn(i(y)+' is a not valid value for "'+x+'" attribute. The value should be a string.'),y}}yn.getStringValidator=c;function u(){if(n.Konva.isUnminified)return function(y,x){const b=e.Util._isString(y),S=Object.prototype.toString.call(y)==="[object CanvasGradient]"||y&&y.addColorStop;return b||S||e.Util.warn(i(y)+' is a not valid value for "'+x+'" attribute. The value should be a string or a native gradient.'),y}}yn.getStringOrGradientValidator=u;function d(){if(n.Konva.isUnminified)return function(y,x){return e.Util._isFunction(y)||e.Util.warn(i(y)+' is a not valid value for "'+x+'" attribute. The value should be a function.'),y}}yn.getFunctionValidator=d;function f(){if(n.Konva.isUnminified)return function(y,x){const b=Int8Array?Object.getPrototypeOf(Int8Array):null;return b&&y instanceof b||(e.Util._isArray(y)?y.forEach(function(S){e.Util._isNumber(S)||e.Util.warn('"'+x+'" attribute has non numeric element '+S+". Make sure that all elements are numbers.")}):e.Util.warn(i(y)+' is a not valid value for "'+x+'" attribute. The value should be a array of numbers.')),y}}yn.getNumberArrayValidator=f;function m(){if(n.Konva.isUnminified)return function(y,x){var b=y===!0||y===!1;return b||e.Util.warn(i(y)+' is a not valid value for "'+x+'" attribute. The value should be a boolean.'),y}}yn.getBooleanValidator=m;function g(y){if(n.Konva.isUnminified)return function(x,b){return x==null||e.Util.isObject(x)||e.Util.warn(i(x)+' is a not valid value for "'+b+'" attribute. The value should be an object with properties '+y),x}}return yn.getComponentValidator=g,yn}var uN;function wi(){return uN||(uN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const e=Wn(),i=ki();var t="get",r="set";n.Factory={addGetterSetter(s,o,l,c,u){n.Factory.addGetter(s,o,l),n.Factory.addSetter(s,o,c,u),n.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,l){var c=t+e.Util._capitalize(o);s.prototype[c]=s.prototype[c]||function(){var u=this.attrs[o];return u===void 0?l:u}},addSetter(s,o,l,c){var u=r+e.Util._capitalize(o);s.prototype[u]||n.Factory.overWriteSetter(s,o,l,c)},overWriteSetter(s,o,l,c){var u=r+e.Util._capitalize(o);s.prototype[u]=function(d){return l&&d!==void 0&&d!==null&&(d=l.call(this,d,o)),this._setAttr(o,d),c&&c.call(this),this}},addComponentsGetterSetter(s,o,l,c,u){var d=l.length,f=e.Util._capitalize,m=t+f(o),g=r+f(o),y,x;s.prototype[m]=function(){var S={};for(y=0;y<d;y++)x=l[y],S[x]=this.getAttr(o+f(x));return S};var b=(0,i.getComponentValidator)(l);s.prototype[g]=function(S){var _=this.attrs[o],O;c&&(S=c.call(this,S)),b&&b.call(this,S,o);for(O in S)S.hasOwnProperty(O)&&this._setAttr(o+f(O),S[O]);return S||l.forEach(k=>{this._setAttr(o+f(k),void 0)}),this._fireChangeEvent(o,_,S),u&&u.call(this),this},n.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var l=e.Util._capitalize(o),c=r+l,u=t+l;s.prototype[o]=function(){return arguments.length?(this[c](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,o,l,c){e.Util.error("Adding deprecated "+o);var u=t+e.Util._capitalize(o),d=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(d);var f=this.attrs[o];return f===void 0?l:f},n.Factory.addSetter(s,o,c,function(){e.Util.error(d)}),n.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){e.Util.each(o,function(l,c){var u=s.prototype[c],d=t+e.Util._capitalize(l),f=r+e.Util._capitalize(l);function m(){u.apply(this,arguments),e.Util.error('"'+l+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}s.prototype[l]=m,s.prototype[d]=m,s.prototype[f]=m})},afterSetFilter(){this._filterUpToDate=!1}}}(l2)),l2}var Il={},Dl={},dN;function o7(){if(dN)return Dl;dN=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.HitContext=Dl.SceneContext=Dl.Context=void 0;const n=Wn(),e=Oi();function i(S){var _=[],O=S.length,k=n.Util,M,E;for(M=0;M<O;M++)E=S[M],k._isNumber(E)?E=Math.round(E*1e3)/1e3:k._isString(E)||(E=E+""),_.push(E);return _}var t=",",r="(",s=")",o="([",l="])",c=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const g=100;let y=class{constructor(_){this.canvas=_,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(_){_.fillEnabled()&&this._fill(_)}_fill(_){}strokeShape(_){_.hasStroke()&&this._stroke(_)}_stroke(_){}fillStrokeShape(_){_.attrs.fillAfterStrokeEnabled?(this.strokeShape(_),this.fillShape(_)):(this.fillShape(_),this.strokeShape(_))}getTrace(_,O){var k=this.traceArr,M=k.length,E="",R,P,I,T;for(R=0;R<M;R++)P=k[R],I=P.method,I?(T=P.args,E+=I,_?E+=u:n.Util._isArray(T[0])?E+=o+T.join(t)+l:(O&&(T=T.map(N=>typeof N=="number"?Math.floor(N):N)),E+=r+T.join(t)+s)):(E+=P.property,_||(E+=d+P.val)),E+=c;return E}clearTrace(){this.traceArr=[]}_trace(_){var O=this.traceArr,k;O.push(_),k=O.length,k>=g&&O.shift()}reset(){var _=this.getCanvas().getPixelRatio();this.setTransform(1*_,0,0,1*_,0,0)}getCanvas(){return this.canvas}clear(_){var O=this.getCanvas();_?this.clearRect(_.x||0,_.y||0,_.width||0,_.height||0):this.clearRect(0,0,O.getWidth()/O.pixelRatio,O.getHeight()/O.pixelRatio)}_applyLineCap(_){const O=_.attrs.lineCap;O&&this.setAttr("lineCap",O)}_applyOpacity(_){var O=_.getAbsoluteOpacity();O!==1&&this.setAttr("globalAlpha",O)}_applyLineJoin(_){const O=_.attrs.lineJoin;O&&this.setAttr("lineJoin",O)}setAttr(_,O){this._context[_]=O}arc(_,O,k,M,E,R){this._context.arc(_,O,k,M,E,R)}arcTo(_,O,k,M,E){this._context.arcTo(_,O,k,M,E)}beginPath(){this._context.beginPath()}bezierCurveTo(_,O,k,M,E,R){this._context.bezierCurveTo(_,O,k,M,E,R)}clearRect(_,O,k,M){this._context.clearRect(_,O,k,M)}clip(..._){this._context.clip.apply(this._context,_)}closePath(){this._context.closePath()}createImageData(_,O){var k=arguments;if(k.length===2)return this._context.createImageData(_,O);if(k.length===1)return this._context.createImageData(_)}createLinearGradient(_,O,k,M){return this._context.createLinearGradient(_,O,k,M)}createPattern(_,O){return this._context.createPattern(_,O)}createRadialGradient(_,O,k,M,E,R){return this._context.createRadialGradient(_,O,k,M,E,R)}drawImage(_,O,k,M,E,R,P,I,T){var N=arguments,L=this._context;N.length===3?L.drawImage(_,O,k):N.length===5?L.drawImage(_,O,k,M,E):N.length===9&&L.drawImage(_,O,k,M,E,R,P,I,T)}ellipse(_,O,k,M,E,R,P,I){this._context.ellipse(_,O,k,M,E,R,P,I)}isPointInPath(_,O,k,M){return k?this._context.isPointInPath(k,_,O,M):this._context.isPointInPath(_,O,M)}fill(..._){this._context.fill.apply(this._context,_)}fillRect(_,O,k,M){this._context.fillRect(_,O,k,M)}strokeRect(_,O,k,M){this._context.strokeRect(_,O,k,M)}fillText(_,O,k,M){M?this._context.fillText(_,O,k,M):this._context.fillText(_,O,k)}measureText(_){return this._context.measureText(_)}getImageData(_,O,k,M){return this._context.getImageData(_,O,k,M)}lineTo(_,O){this._context.lineTo(_,O)}moveTo(_,O){this._context.moveTo(_,O)}rect(_,O,k,M){this._context.rect(_,O,k,M)}roundRect(_,O,k,M,E){this._context.roundRect(_,O,k,M,E)}putImageData(_,O,k){this._context.putImageData(_,O,k)}quadraticCurveTo(_,O,k,M){this._context.quadraticCurveTo(_,O,k,M)}restore(){this._context.restore()}rotate(_){this._context.rotate(_)}save(){this._context.save()}scale(_,O){this._context.scale(_,O)}setLineDash(_){this._context.setLineDash?this._context.setLineDash(_):"mozDash"in this._context?this._context.mozDash=_:"webkitLineDash"in this._context&&(this._context.webkitLineDash=_)}getLineDash(){return this._context.getLineDash()}setTransform(_,O,k,M,E,R){this._context.setTransform(_,O,k,M,E,R)}stroke(_){_?this._context.stroke(_):this._context.stroke()}strokeText(_,O,k,M){this._context.strokeText(_,O,k,M)}transform(_,O,k,M,E,R){this._context.transform(_,O,k,M,E,R)}translate(_,O){this._context.translate(_,O)}_enableTrace(){var _=this,O=f.length,k=this.setAttr,M,E,R=function(P){var I=_[P],T;_[P]=function(){return E=i(Array.prototype.slice.call(arguments,0)),T=I.apply(_,arguments),_._trace({method:P,args:E}),T}};for(M=0;M<O;M++)R(f[M]);_.setAttr=function(){k.apply(_,arguments);var P=arguments[0],I=arguments[1];(P==="shadowOffsetX"||P==="shadowOffsetY"||P==="shadowBlur")&&(I=I/this.canvas.getPixelRatio()),_._trace({property:P,val:I})}}_applyGlobalCompositeOperation(_){const O=_.attrs.globalCompositeOperation;var k=!O||O==="source-over";k||this.setAttr("globalCompositeOperation",O)}};Dl.Context=y,m.forEach(function(S){Object.defineProperty(y.prototype,S,{get(){return this._context[S]},set(_){this._context[S]=_}})});class x extends y{constructor(_,{willReadFrequently:O=!1}={}){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:O})}_fillColor(_){var O=_.fill();this.setAttr("fillStyle",O),_._fillFunc(this)}_fillPattern(_){this.setAttr("fillStyle",_._getFillPattern()),_._fillFunc(this)}_fillLinearGradient(_){var O=_._getLinearGradient();O&&(this.setAttr("fillStyle",O),_._fillFunc(this))}_fillRadialGradient(_){const O=_._getRadialGradient();O&&(this.setAttr("fillStyle",O),_._fillFunc(this))}_fill(_){const O=_.fill(),k=_.getFillPriority();if(O&&k==="color"){this._fillColor(_);return}const M=_.getFillPatternImage();if(M&&k==="pattern"){this._fillPattern(_);return}const E=_.getFillLinearGradientColorStops();if(E&&k==="linear-gradient"){this._fillLinearGradient(_);return}const R=_.getFillRadialGradientColorStops();if(R&&k==="radial-gradient"){this._fillRadialGradient(_);return}O?this._fillColor(_):M?this._fillPattern(_):E?this._fillLinearGradient(_):R&&this._fillRadialGradient(_)}_strokeLinearGradient(_){const O=_.getStrokeLinearGradientStartPoint(),k=_.getStrokeLinearGradientEndPoint(),M=_.getStrokeLinearGradientColorStops(),E=this.createLinearGradient(O.x,O.y,k.x,k.y);if(M){for(var R=0;R<M.length;R+=2)E.addColorStop(M[R],M[R+1]);this.setAttr("strokeStyle",E)}}_stroke(_){var O=_.dash(),k=_.getStrokeScaleEnabled();if(_.hasStroke()){if(!k){this.save();var M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(_),O&&_.dashEnabled()&&(this.setLineDash(O),this.setAttr("lineDashOffset",_.dashOffset())),this.setAttr("lineWidth",_.strokeWidth()),_.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var E=_.getStrokeLinearGradientColorStops();E?this._strokeLinearGradient(_):this.setAttr("strokeStyle",_.stroke()),_._strokeFunc(this),k||this.restore()}}_applyShadow(_){var O,k,M,E=(O=_.getShadowRGBA())!==null&&O!==void 0?O:"black",R=(k=_.getShadowBlur())!==null&&k!==void 0?k:5,P=(M=_.getShadowOffset())!==null&&M!==void 0?M:{x:0,y:0},I=_.getAbsoluteScale(),T=this.canvas.getPixelRatio(),N=I.x*T,L=I.y*T;this.setAttr("shadowColor",E),this.setAttr("shadowBlur",R*Math.min(Math.abs(N),Math.abs(L))),this.setAttr("shadowOffsetX",P.x*N),this.setAttr("shadowOffsetY",P.y*L)}}Dl.SceneContext=x;class b extends y{constructor(_){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:!0})}_fill(_){this.save(),this.setAttr("fillStyle",_.colorKey),_._fillFuncHit(this),this.restore()}strokeShape(_){_.hasHitStroke()&&this._stroke(_)}_stroke(_){if(_.hasHitStroke()){const E=_.getStrokeScaleEnabled();if(!E){this.save();var O=this.getCanvas().getPixelRatio();this.setTransform(O,0,0,O,0,0)}this._applyLineCap(_);var k=_.hitStrokeWidth(),M=k==="auto"?_.strokeWidth():k;this.setAttr("lineWidth",M),this.setAttr("strokeStyle",_.colorKey),_._strokeFuncHit(this),E||this.restore()}}}return Dl.HitContext=b,Dl}var fN;function t_(){if(fN)return Il;fN=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.HitCanvas=Il.SceneCanvas=Il.Canvas=void 0;const n=Wn(),e=o7(),i=Oi(),t=wi(),r=ki();var s;function o(){if(s)return s;var d=n.Util.createCanvasElement(),f=d.getContext("2d");return s=function(){var m=i.Konva._global.devicePixelRatio||1,g=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;return m/g}(),n.Util.releaseCanvas(d),s}let l=class{constructor(f){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var m=f||{},g=m.pixelRatio||i.Konva.pixelRatio||o();this.pixelRatio=g,this._canvas=n.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(f){var m=this.pixelRatio;this.pixelRatio=f,this.setSize(this.getWidth()/m,this.getHeight()/m)}setWidth(f){this.width=this._canvas.width=f*this.pixelRatio,this._canvas.style.width=f+"px";var m=this.pixelRatio,g=this.getContext()._context;g.scale(m,m)}setHeight(f){this.height=this._canvas.height=f*this.pixelRatio,this._canvas.style.height=f+"px";var m=this.pixelRatio,g=this.getContext()._context;g.scale(m,m)}getWidth(){return this.width}getHeight(){return this.height}setSize(f,m){this.setWidth(f||0),this.setHeight(m||0)}toDataURL(f,m){try{return this._canvas.toDataURL(f,m)}catch{try{return this._canvas.toDataURL()}catch(y){return n.Util.error("Unable to get data URL. "+y.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Il.Canvas=l,t.Factory.addGetterSetter(l,"pixelRatio",void 0,(0,r.getNumberValidator)());class c extends l{constructor(f={width:0,height:0,willReadFrequently:!1}){super(f),this.context=new e.SceneContext(this,{willReadFrequently:f.willReadFrequently}),this.setSize(f.width,f.height)}}Il.SceneCanvas=c;class u extends l{constructor(f={width:0,height:0}){super(f),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(f.width,f.height)}}return Il.HitCanvas=u,Il}var c2={},pN;function h3(){return pN||(pN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const e=Oi(),i=Wn();n.DD={get isDragging(){var t=!1;return n.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return n.DD._dragElements.forEach(r=>{t=r.node}),t},_dragElements:new Map,_drag(t){const r=[];n.DD._dragElements.forEach((s,o)=>{const{node:l}=s,c=l.getStage();c.setPointersPositions(t),s.pointerId===void 0&&(s.pointerId=i.Util._getFirstPointerId(t));const u=c._changedPointerPositions.find(m=>m.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){var d=l.dragDistance(),f=Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y));if(f<d||(l.startDrag({evt:t}),!l.isDragging()))return}l._setDragPosition(t,s),r.push(l)}}),r.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:t},!0)})},_endDragBefore(t){const r=[];n.DD._dragElements.forEach(s=>{const{node:o}=s,l=o.getStage();if(t&&l.setPointersPositions(t),!l._changedPointerPositions.find(d=>d.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(n.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&r.indexOf(u)===-1&&r.push(u)}),r.forEach(s=>{s.draw()})},_endDragAfter(t){n.DD._dragElements.forEach((r,s)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:t},!0),r.dragStatus!=="dragging"&&n.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1))}(c2)),c2}var mN;function qn(){if(mN)return ag;mN=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.Node=void 0;const n=Wn(),e=wi(),i=t_(),t=Oi(),r=h3(),s=ki();var o="absoluteOpacity",l="allEventListeners",c="absoluteTransform",u="absoluteScale",d="canvas",f="Change",m="children",g="konva",y="listening",x="mouseenter",b="mouseleave",S="set",_="Shape",O=" ",k="stage",M="transform",E="Stage",R="visible",P=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(O);let I=1;class T{constructor(D){this._id=I++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(D),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(D){(D===M||D===c)&&this._cache.get(D)?this._cache.get(D).dirty=!0:D?this._cache.delete(D):this._cache.clear()}_getCache(D,$){var B=this._cache.get(D),U=D===M||D===c,Q=B===void 0||U&&B.dirty===!0;return Q&&(B=$.call(this),this._cache.set(D,B)),B}_calculate(D,$,B){if(!this._attachedDepsListeners.get(D)){const U=$.map(Q=>Q+"Change.konva").join(O);this.on(U,()=>{this._clearCache(D)}),this._attachedDepsListeners.set(D,!0)}return this._getCache(D,B)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(D){this._clearCache(D),D===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:D,filter:$,hit:B}=this._cache.get(d);n.Util.releaseCanvas(D,$,B),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(D){var $=D||{},B={};($.x===void 0||$.y===void 0||$.width===void 0||$.height===void 0)&&(B=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var U=Math.ceil($.width||B.width),Q=Math.ceil($.height||B.height),Z=$.pixelRatio,te=$.x===void 0?Math.floor(B.x):$.x,ce=$.y===void 0?Math.floor(B.y):$.y,pe=$.offset||0,Ee=$.drawBorder||!1,we=$.hitCanvasPixelRatio||1;if(!U||!Q){n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const he=Math.abs(Math.round(B.x)-te)>.5?1:0,_e=Math.abs(Math.round(B.y)-ce)>.5?1:0;U+=pe*2+he,Q+=pe*2+_e,te-=pe,ce-=pe;var Ce=new i.SceneCanvas({pixelRatio:Z,width:U,height:Q}),K=new i.SceneCanvas({pixelRatio:Z,width:0,height:0,willReadFrequently:!0}),j=new i.HitCanvas({pixelRatio:we,width:U,height:Q}),F=Ce.getContext(),z=j.getContext();return j.isCache=!0,Ce.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,$.imageSmoothingEnabled===!1&&(Ce.getContext()._context.imageSmoothingEnabled=!1,K.getContext()._context.imageSmoothingEnabled=!1),F.save(),z.save(),F.translate(-te,-ce),z.translate(-te,-ce),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(u),this.drawScene(Ce,this),this.drawHit(j,this),this._isUnderCache=!1,F.restore(),z.restore(),Ee&&(F.save(),F.beginPath(),F.rect(0,0,U,Q),F.closePath(),F.setAttr("strokeStyle","red"),F.setAttr("lineWidth",5),F.stroke(),F.restore()),this._cache.set(d,{scene:Ce,filter:K,hit:j,x:te,y:ce}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(D){throw new Error('abstract "getClientRect" method call')}_transformedRect(D,$){var B=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],U=1/0,Q=1/0,Z=-1/0,te=-1/0,ce=this.getAbsoluteTransform($);return B.forEach(function(pe){var Ee=ce.point(pe);U===void 0&&(U=Z=Ee.x,Q=te=Ee.y),U=Math.min(U,Ee.x),Q=Math.min(Q,Ee.y),Z=Math.max(Z,Ee.x),te=Math.max(te,Ee.y)}),{x:U,y:Q,width:Z-U,height:te-Q}}_drawCachedSceneCanvas(D){D.save(),D._applyOpacity(this),D._applyGlobalCompositeOperation(this);const $=this._getCanvasCache();D.translate($.x,$.y);var B=this._getCachedSceneCanvas(),U=B.pixelRatio;D.drawImage(B._canvas,0,0,B.width/U,B.height/U),D.restore()}_drawCachedHitCanvas(D){var $=this._getCanvasCache(),B=$.hit;D.save(),D.translate($.x,$.y),D.drawImage(B._canvas,0,0,B.width/B.pixelRatio,B.height/B.pixelRatio),D.restore()}_getCachedSceneCanvas(){var D=this.filters(),$=this._getCanvasCache(),B=$.scene,U=$.filter,Q=U.getContext(),Z,te,ce,pe;if(D){if(!this._filterUpToDate){var Ee=B.pixelRatio;U.setSize(B.width/B.pixelRatio,B.height/B.pixelRatio);try{for(Z=D.length,Q.clear(),Q.drawImage(B._canvas,0,0,B.getWidth()/Ee,B.getHeight()/Ee),te=Q.getImageData(0,0,U.getWidth(),U.getHeight()),ce=0;ce<Z;ce++){if(pe=D[ce],typeof pe!="function"){n.Util.error("Filter should be type of function, but got "+typeof pe+" instead. Please check correct filters");continue}pe.call(this,te),Q.putImageData(te,0,0)}}catch(we){n.Util.error("Unable to apply filter. "+we.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return U}return B}on(D,$){if(this._cache&&this._cache.delete(l),arguments.length===3)return this._delegate.apply(this,arguments);var B=D.split(O),U=B.length,Q,Z,te,ce,pe;for(Q=0;Q<U;Q++)Z=B[Q],te=Z.split("."),ce=te[0],pe=te[1]||"",this.eventListeners[ce]||(this.eventListeners[ce]=[]),this.eventListeners[ce].push({name:pe,handler:$});return this}off(D,$){var B=(D||"").split(O),U=B.length,Q,Z,te,ce,pe,Ee;if(this._cache&&this._cache.delete(l),!D)for(Z in this.eventListeners)this._off(Z);for(Q=0;Q<U;Q++)if(te=B[Q],ce=te.split("."),pe=ce[0],Ee=ce[1],pe)this.eventListeners[pe]&&this._off(pe,Ee,$);else for(Z in this.eventListeners)this._off(Z,Ee,$);return this}dispatchEvent(D){var $={target:this,type:D.type,evt:D};return this.fire(D.type,$),this}addEventListener(D,$){return this.on(D,function(B){$.call(this,B.evt)}),this}removeEventListener(D){return this.off(D),this}_delegate(D,$,B){var U=this;this.on(D,function(Q){for(var Z=Q.target.findAncestors($,!0,U),te=0;te<Z.length;te++)Q=n.Util.cloneObject(Q),Q.currentTarget=Z[te],B.call(Z[te],Q)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(y)}_remove(){this._clearCaches();var D=this.getParent();D&&D.children&&(D.children.splice(this.index,1),D._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(D){var $="get"+n.Util._capitalize(D);return n.Util._isFunction(this[$])?this[$]():this.attrs[D]}getAncestors(){for(var D=this.getParent(),$=[];D;)$.push(D),D=D.getParent();return $}getAttrs(){return this.attrs||{}}setAttrs(D){return this._batchTransformChanges(()=>{var $,B;if(!D)return this;for($ in D)$!==m&&(B=S+n.Util._capitalize($),n.Util._isFunction(this[B])?this[B](D[$]):this._setAttr($,D[$]))}),this}isListening(){return this._getCache(y,this._isListening)}_isListening(D){if(!this.listening())return!1;const B=this.getParent();return B&&B!==D&&this!==D?B._isListening(D):!0}isVisible(){return this._getCache(R,this._isVisible)}_isVisible(D){if(!this.visible())return!1;const B=this.getParent();return B&&B!==D&&this!==D?B._isVisible(D):!0}shouldDrawHit(D,$=!1){if(D)return this._isVisible(D)&&this._isListening(D);var B=this.getLayer(),U=!1;r.DD._dragElements.forEach(Z=>{Z.dragStatus==="dragging"&&(Z.node.nodeType==="Stage"||Z.node.getLayer()===B)&&(U=!0)});var Q=!$&&!t.Konva.hitOnDragEnabled&&(U||t.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!Q}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var D=this.getDepth(),$=this,B=0,U,Q,Z,te;function ce(Ee){for(U=[],Q=Ee.length,Z=0;Z<Q;Z++)te=Ee[Z],B++,te.nodeType!==_&&(U=U.concat(te.getChildren().slice())),te._id===$._id&&(Z=Q);U.length>0&&U[0].getDepth()<=D&&ce(U)}const pe=this.getStage();return $.nodeType!==E&&pe&&ce(pe.getChildren()),B}getDepth(){for(var D=0,$=this.parent;$;)D++,$=$.parent;return D}_batchTransformChanges(D){this._batchingTransformChange=!0,D(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(M),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(D){return this._batchTransformChanges(()=>{this.x(D.x),this.y(D.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const D=this.getStage();if(!D)return null;var $=D.getPointerPosition();if(!$)return null;var B=this.getAbsoluteTransform().copy();return B.invert(),B.point($)}getAbsolutePosition(D){let $=!1,B=this.parent;for(;B;){if(B.isCached()){$=!0;break}B=B.parent}$&&!D&&(D=!0);var U=this.getAbsoluteTransform(D).getMatrix(),Q=new n.Transform,Z=this.offset();return Q.m=U.slice(),Q.translate(Z.x,Z.y),Q.getTranslation()}setAbsolutePosition(D){const{x:$,y:B,...U}=this._clearTransform();this.attrs.x=$,this.attrs.y=B,this._clearCache(M);var Q=this._getAbsoluteTransform().copy();return Q.invert(),Q.translate(D.x,D.y),D={x:this.attrs.x+Q.getTranslation().x,y:this.attrs.y+Q.getTranslation().y},this._setTransform(U),this.setPosition({x:D.x,y:D.y}),this._clearCache(M),this._clearSelfAndDescendantCache(c),this}_setTransform(D){var $;for($ in D)this.attrs[$]=D[$]}_clearTransform(){var D={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,D}move(D){var $=D.x,B=D.y,U=this.x(),Q=this.y();return $!==void 0&&(U+=$),B!==void 0&&(Q+=B),this.setPosition({x:U,y:Q}),this}_eachAncestorReverse(D,$){var B=[],U=this.getParent(),Q,Z;if(!($&&$._id===this._id)){for(B.unshift(this);U&&(!$||U._id!==$._id);)B.unshift(U),U=U.parent;for(Q=B.length,Z=0;Z<Q;Z++)D(B[Z])}}rotate(D){return this.rotation(this.rotation()+D),this}moveToTop(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var D=this.index,$=this.parent.getChildren().length;return D<$-1?(this.parent.children.splice(D,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;var D=this.index,$=this.parent.getChildren().length;return D<$-1?(this.parent.children.splice(D,1),this.parent.children.splice(D+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;var D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.splice(D-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(D){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(D<0||D>=this.parent.children.length)&&n.Util.warn("Unexpected value "+D+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var $=this.index;return this.parent.children.splice($,1),this.parent.children.splice(D,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var D=this.opacity(),$=this.getParent();return $&&!$._isUnderCache&&(D*=$.getAbsoluteOpacity()),D}moveTo(D){return this.getParent()!==D&&(this._remove(),D.add(this)),this}toObject(){var D=this.getAttrs(),$,B,U,Q,Z;const te={attrs:{},className:this.getClassName()};for($ in D)B=D[$],Z=n.Util.isObject(B)&&!n.Util._isPlainObject(B)&&!n.Util._isArray(B),!Z&&(U=typeof this[$]=="function"&&this[$],delete D[$],Q=U?U.call(this):null,D[$]=B,Q!==B&&(te.attrs[$]=B));return n.Util._prepareToStringify(te)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(D,$,B){var U=[];$&&this._isMatch(D)&&U.push(this);for(var Q=this.parent;Q;){if(Q===B)return U;Q._isMatch(D)&&U.push(Q),Q=Q.parent}return U}isAncestorOf(D){return!1}findAncestor(D,$,B){return this.findAncestors(D,$,B)[0]}_isMatch(D){if(!D)return!1;if(typeof D=="function")return D(this);var $=D.replace(/ /g,"").split(","),B=$.length,U,Q;for(U=0;U<B;U++)if(Q=$[U],n.Util.isValidSelector(Q)||(n.Util.warn('Selector "'+Q+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),Q.charAt(0)==="#"){if(this.id()===Q.slice(1))return!0}else if(Q.charAt(0)==="."){if(this.hasName(Q.slice(1)))return!0}else if(this.className===Q||this.nodeType===Q)return!0;return!1}getLayer(){var D=this.getParent();return D?D.getLayer():null}getStage(){return this._getCache(k,this._getStage)}_getStage(){var D=this.getParent();return D?D.getStage():null}fire(D,$={},B){return $.target=$.target||this,B?this._fireAndBubble(D,$):this._fire(D,$),this}getAbsoluteTransform(D){return D?this._getAbsoluteTransform(D):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(D){var $;if(D)return $=new n.Transform,this._eachAncestorReverse(function(U){var Q=U.transformsEnabled();Q==="all"?$.multiply(U.getTransform()):Q==="position"&&$.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},D),$;$=this._cache.get(c)||new n.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto($):$.reset();var B=this.transformsEnabled();if(B==="all")$.multiply(this.getTransform());else if(B==="position"){const U=this.attrs.x||0,Q=this.attrs.y||0,Z=this.attrs.offsetX||0,te=this.attrs.offsetY||0;$.translate(U-Z,Q-te)}return $.dirty=!1,$}getAbsoluteScale(D){for(var $=this;$;)$._isUnderCache&&(D=$),$=$.getParent();const U=this.getAbsoluteTransform(D).decompose();return{x:U.scaleX,y:U.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(M,this._getTransform)}_getTransform(){var D,$,B=this._cache.get(M)||new n.Transform;B.reset();var U=this.x(),Q=this.y(),Z=t.Konva.getAngle(this.rotation()),te=(D=this.attrs.scaleX)!==null&&D!==void 0?D:1,ce=($=this.attrs.scaleY)!==null&&$!==void 0?$:1,pe=this.attrs.skewX||0,Ee=this.attrs.skewY||0,we=this.attrs.offsetX||0,he=this.attrs.offsetY||0;return(U!==0||Q!==0)&&B.translate(U,Q),Z!==0&&B.rotate(Z),(pe!==0||Ee!==0)&&B.skew(pe,Ee),(te!==1||ce!==1)&&B.scale(te,ce),(we!==0||he!==0)&&B.translate(-1*we,-1*he),B.dirty=!1,B}clone(D){var $=n.Util.cloneObject(this.attrs),B,U,Q,Z,te;for(B in D)$[B]=D[B];var ce=new this.constructor($);for(B in this.eventListeners)for(U=this.eventListeners[B],Q=U.length,Z=0;Z<Q;Z++)te=U[Z],te.name.indexOf(g)<0&&(ce.eventListeners[B]||(ce.eventListeners[B]=[]),ce.eventListeners[B].push(te));return ce}_toKonvaCanvas(D){D=D||{};var $=this.getClientRect(),B=this.getStage(),U=D.x!==void 0?D.x:Math.floor($.x),Q=D.y!==void 0?D.y:Math.floor($.y),Z=D.pixelRatio||1,te=new i.SceneCanvas({width:D.width||Math.ceil($.width)||(B?B.width():0),height:D.height||Math.ceil($.height)||(B?B.height():0),pixelRatio:Z}),ce=te.getContext();const pe=new i.SceneCanvas({width:te.width/te.pixelRatio+Math.abs(U),height:te.height/te.pixelRatio+Math.abs(Q),pixelRatio:te.pixelRatio});return D.imageSmoothingEnabled===!1&&(ce._context.imageSmoothingEnabled=!1),ce.save(),(U||Q)&&ce.translate(-1*U,-1*Q),this.drawScene(te,void 0,pe),ce.restore(),te}toCanvas(D){return this._toKonvaCanvas(D)._canvas}toDataURL(D){D=D||{};var $=D.mimeType||null,B=D.quality||null,U=this._toKonvaCanvas(D).toDataURL($,B);return D.callback&&D.callback(U),U}toImage(D){return new Promise(($,B)=>{try{const U=D==null?void 0:D.callback;U&&delete D.callback,n.Util._urlToImage(this.toDataURL(D),function(Q){$(Q),U==null||U(Q)})}catch(U){B(U)}})}toBlob(D){return new Promise(($,B)=>{try{const U=D==null?void 0:D.callback;U&&delete D.callback,this.toCanvas(D).toBlob(Q=>{$(Q),U==null||U(Q)},D==null?void 0:D.mimeType,D==null?void 0:D.quality)}catch(U){B(U)}})}setSize(D){return this.width(D.width),this.height(D.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():t.Konva.dragDistance}_off(D,$,B){var U=this.eventListeners[D],Q,Z,te;for(Q=0;Q<U.length;Q++)if(Z=U[Q].name,te=U[Q].handler,(Z!=="konva"||$==="konva")&&(!$||Z===$)&&(!B||B===te)){if(U.splice(Q,1),U.length===0){delete this.eventListeners[D];break}Q--}}_fireChangeEvent(D,$,B){this._fire(D+f,{oldVal:$,newVal:B})}addName(D){if(!this.hasName(D)){var $=this.name(),B=$?$+" "+D:D;this.name(B)}return this}hasName(D){if(!D)return!1;const $=this.name();if(!$)return!1;var B=($||"").split(/\s/g);return B.indexOf(D)!==-1}removeName(D){var $=(this.name()||"").split(/\s/g),B=$.indexOf(D);return B!==-1&&($.splice(B,1),this.name($.join(" "))),this}setAttr(D,$){var B=this[S+n.Util._capitalize(D)];return n.Util._isFunction(B)?B.call(this,$):this._setAttr(D,$),this}_requestDraw(){if(t.Konva.autoDrawEnabled){const D=this.getLayer()||this.getStage();D==null||D.batchDraw()}}_setAttr(D,$){var B=this.attrs[D];B===$&&!n.Util.isObject($)||($==null?delete this.attrs[D]:this.attrs[D]=$,this._shouldFireChangeEvents&&this._fireChangeEvent(D,B,$),this._requestDraw())}_setComponentAttr(D,$,B){var U;B!==void 0&&(U=this.attrs[D],U||(this.attrs[D]=this.getAttr(D)),this.attrs[D][$]=B,this._fireChangeEvent(D,U,B))}_fireAndBubble(D,$,B){$&&this.nodeType===_&&($.target=this);var U=(D===x||D===b)&&(B&&(this===B||this.isAncestorOf&&this.isAncestorOf(B))||this.nodeType==="Stage"&&!B);if(!U){this._fire(D,$);var Q=(D===x||D===b)&&B&&B.isAncestorOf&&B.isAncestorOf(this)&&!B.isAncestorOf(this.parent);($&&!$.cancelBubble||!$)&&this.parent&&this.parent.isListening()&&!Q&&(B&&B.parent?this._fireAndBubble.call(this.parent,D,$,B):this._fireAndBubble.call(this.parent,D,$))}}_getProtoListeners(D){var $,B,U;const Q=($=this._cache.get(l))!==null&&$!==void 0?$:{};let Z=Q==null?void 0:Q[D];if(Z===void 0){Z=[];let te=Object.getPrototypeOf(this);for(;te;){const ce=(U=(B=te.eventListeners)===null||B===void 0?void 0:B[D])!==null&&U!==void 0?U:[];Z.push(...ce),te=Object.getPrototypeOf(te)}Q[D]=Z,this._cache.set(l,Q)}return Z}_fire(D,$){$=$||{},$.currentTarget=this,$.type=D;const B=this._getProtoListeners(D);if(B)for(var U=0;U<B.length;U++)B[U].handler.call(this,$);const Q=this.eventListeners[D];if(Q)for(var U=0;U<Q.length;U++)Q[U].handler.call(this,$)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(D){var $=D?D.pointerId:void 0,B=this.getStage(),U=this.getAbsolutePosition();if(B){var Q=B._getPointerById($)||B._changedPointerPositions[0]||U;r.DD._dragElements.set(this._id,{node:this,startPointerPos:Q,offset:{x:Q.x-U.x,y:Q.y-U.y},dragStatus:"ready",pointerId:$})}}startDrag(D,$=!0){r.DD._dragElements.has(this._id)||this._createDragElement(D);const B=r.DD._dragElements.get(this._id);B.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:D&&D.evt},$)}_setDragPosition(D,$){const B=this.getStage()._getPointerById($.pointerId);if(B){var U={x:B.x-$.offset.x,y:B.y-$.offset.y},Q=this.dragBoundFunc();if(Q!==void 0){const Z=Q.call(this,U,D);Z?U=Z:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==U.x||this._lastPos.y!==U.y)&&(this.setAbsolutePosition(U),this._requestDraw()),this._lastPos=U}}stopDrag(D){const $=r.DD._dragElements.get(this._id);$&&($.dragStatus="stopped"),r.DD._endDragBefore(D),r.DD._endDragAfter(D)}setDraggable(D){this._setAttr("draggable",D),this._dragChange()}isDragging(){const D=r.DD._dragElements.get(this._id);return D?D.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(D){var $=D.evt.button!==void 0,B=!$||t.Konva.dragButtons.indexOf(D.evt.button)>=0;if(B&&!this.isDragging()){var U=!1;r.DD._dragElements.forEach(Q=>{this.isAncestorOf(Q.node)&&(U=!0)}),U||this._createDragElement(D)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var D=this.getStage();if(!D)return;const $=r.DD._dragElements.get(this._id),B=$&&$.dragStatus==="dragging",U=$&&$.dragStatus==="ready";B?this.stopDrag():U&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(D={x:0,y:0}){const $=this.getStage();if(!$)return!1;const B={x:-D.x,y:-D.y,width:$.width()+2*D.x,height:$.height()+2*D.y};return n.Util.haveIntersection(B,this.getClientRect())}static create(D,$){return n.Util._isString(D)&&(D=JSON.parse(D)),this._createNode(D,$)}static _createNode(D,$){var B=T.prototype.getClassName.call(D),U=D.children,Q,Z,te;$&&(D.attrs.container=$),t.Konva[B]||(n.Util.warn('Can not find a node with class name "'+B+'". Fallback to "Shape".'),B="Shape");const ce=t.Konva[B];if(Q=new ce(D.attrs),U)for(Z=U.length,te=0;te<Z;te++)Q.add(T._createNode(U[te]));return Q}}ag.Node=T,T.prototype.nodeType="Node",T.prototype._attrsAffectingSize=[],T.prototype.eventListeners={},T.prototype.on.call(T.prototype,P,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(M),this._clearSelfAndDescendantCache(c)}),T.prototype.on.call(T.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(R)}),T.prototype.on.call(T.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(y)}),T.prototype.on.call(T.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const N=e.Factory.addGetterSetter;return N(T,"zIndex"),N(T,"absolutePosition"),N(T,"position"),N(T,"x",0,(0,s.getNumberValidator)()),N(T,"y",0,(0,s.getNumberValidator)()),N(T,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),N(T,"opacity",1,(0,s.getNumberValidator)()),N(T,"name","",(0,s.getStringValidator)()),N(T,"id","",(0,s.getStringValidator)()),N(T,"rotation",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"scale",["x","y"]),N(T,"scaleX",1,(0,s.getNumberValidator)()),N(T,"scaleY",1,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"skew",["x","y"]),N(T,"skewX",0,(0,s.getNumberValidator)()),N(T,"skewY",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"offset",["x","y"]),N(T,"offsetX",0,(0,s.getNumberValidator)()),N(T,"offsetY",0,(0,s.getNumberValidator)()),N(T,"dragDistance",null,(0,s.getNumberValidator)()),N(T,"width",0,(0,s.getNumberValidator)()),N(T,"height",0,(0,s.getNumberValidator)()),N(T,"listening",!0,(0,s.getBooleanValidator)()),N(T,"preventDefault",!0,(0,s.getBooleanValidator)()),N(T,"filters",null,function(L){return this._filterUpToDate=!1,L}),N(T,"visible",!0,(0,s.getBooleanValidator)()),N(T,"transformsEnabled","all",(0,s.getStringValidator)()),N(T,"size"),N(T,"dragBoundFunc"),N(T,"draggable",!1,(0,s.getBooleanValidator)()),e.Factory.backCompat(T,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),ag}var lg={},gN;function i_(){if(gN)return lg;gN=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.Container=void 0;const n=wi(),e=qn(),i=ki();class t extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const o=this.children||[];var l=[];return o.forEach(function(c){s(c)&&l.push(c)}),l}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(var o=0;o<s.length;o++)this.add(s[o]);return this}const l=s[0];return l.getParent()?(l.moveTo(this),this):(this._validateAdd(l),l.index=this.getChildren().length,l.parent=this,l._clearCaches(),this.getChildren().push(l),this._fire("add",{child:l}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){var o=this._generalFind(s,!0);return o.length>0?o[0]:void 0}_generalFind(s,o){var l=[];return this._descendants(c=>{const u=c._isMatch(s);return u&&l.push(c),!!(u&&o)}),l}_descendants(s){let o=!1;const l=this.getChildren();for(const c of l){if(o=s(c),o)return!0;if(c.hasChildren()&&(o=c._descendants(s),o))return!0}return!1}toObject(){var s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(o=>{s.children.push(o.toObject())}),s}isAncestorOf(s){for(var o=s.getParent();o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(s){var o=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(l){o.add(l.clone())}),o}getAllIntersections(s){var o=[];return this.find("Shape").forEach(l=>{l.isVisible()&&l.intersects(s)&&o.push(l)}),o}_clearSelfAndDescendantCache(s){var o;super._clearSelfAndDescendantCache(s),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(l){l._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(o,l){o.index=l}),this._requestDraw()}drawScene(s,o,l){var c=this.getLayer(),u=s||c&&c.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),m=f&&f.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(m){d.save();var y=this.getAbsoluteTransform(o).getMatrix();d.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,o,l);return this}drawHit(s,o){if(!this.shouldDrawHit(o))return this;var l=this.getLayer(),c=s||l&&l.hitCanvas,u=c&&c.getContext(),d=this._getCanvasCache(),f=d&&d.hit;if(f){u.save();var m=this.getAbsoluteTransform(o).getMatrix();u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",c,o);return this}_drawChildren(s,o,l,c){var u,d=o&&o.getContext(),f=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),y=typeof f=="number"&&typeof m=="number"||g;const x=l===this;if(y){d.save();var b=this.getAbsoluteTransform(l),S=b.getMatrix();d.transform(S[0],S[1],S[2],S[3],S[4],S[5]),d.beginPath();let M;if(g)M=g.call(this,d,this);else{var _=this.clipX(),O=this.clipY();d.rect(_||0,O||0,f,m)}d.clip.apply(d,M),S=b.copy().invert().getMatrix(),d.transform(S[0],S[1],S[2],S[3],S[4],S[5])}var k=!x&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";k&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(M){M[s](o,l,c)}),k&&d.restore(),y&&d.restore()}getClientRect(s={}){var o,l=s.skipTransform,c=s.relativeTo,u,d,f,m,g={x:1/0,y:1/0,width:0,height:0},y=this;(o=this.children)===null||o===void 0||o.forEach(function(O){if(O.visible()){var k=O.getClientRect({relativeTo:y,skipShadow:s.skipShadow,skipStroke:s.skipStroke});k.width===0&&k.height===0||(u===void 0?(u=k.x,d=k.y,f=k.x+k.width,m=k.y+k.height):(u=Math.min(u,k.x),d=Math.min(d,k.y),f=Math.max(f,k.x+k.width),m=Math.max(m,k.y+k.height)))}});for(var x=this.find("Shape"),b=!1,S=0;S<x.length;S++){var _=x[S];if(_._isVisible(this)){b=!0;break}}return b&&u!==void 0?g={x:u,y:d,width:f-u,height:m-d}:g={x:0,y:0,width:0,height:0},l?g:this._transformedRect(g,c)}}return lg.Container=t,n.Factory.addComponentsGetterSetter(t,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(t,"clipX",void 0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(t,"clipY",void 0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(t,"clipWidth",void 0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(t,"clipHeight",void 0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(t,"clipFunc"),lg}var h2={},ho={},vN;function a7(){if(vN)return ho;vN=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.releaseCapture=ho.setPointerCapture=ho.hasPointerCapture=ho.createEvent=ho.getCapturedShape=void 0;const n=Oi(),e=new Map,i=n.Konva._global.PointerEvent!==void 0;function t(c){return e.get(c)}ho.getCapturedShape=t;function r(c){return{evt:c,pointerId:c.pointerId}}ho.createEvent=r;function s(c,u){return e.get(c)===u}ho.hasPointerCapture=s;function o(c,u){l(c),u.getStage()&&(e.set(c,u),i&&u._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}ho.setPointerCapture=o;function l(c,u){const d=e.get(c);if(!d)return;const f=d.getStage();f&&f.content,e.delete(c),i&&d._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return ho.releaseCapture=l,ho}var yN;function MSe(){return yN||(yN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const e=Wn(),i=wi(),t=i_(),r=Oi(),s=t_(),o=h3(),l=Oi(),c=a7();var u="Stage",d="string",f="px",m="mouseout",g="mouseleave",y="mouseover",x="mouseenter",b="mousemove",S="mousedown",_="mouseup",O="pointermove",k="pointerdown",M="pointerup",E="pointercancel",R="lostpointercapture",P="pointerout",I="pointerleave",T="pointerover",N="pointerenter",L="contextmenu",D="touchstart",$="touchend",B="touchmove",U="touchcancel",Q="wheel",Z=5,te=[[x,"_pointerenter"],[S,"_pointerdown"],[b,"_pointermove"],[_,"_pointerup"],[g,"_pointerleave"],[D,"_pointerdown"],[B,"_pointermove"],[$,"_pointerup"],[U,"_pointercancel"],[y,"_pointerover"],[Q,"_wheel"],[L,"_contextmenu"],[k,"_pointerdown"],[O,"_pointermove"],[M,"_pointerup"],[E,"_pointercancel"],[R,"_lostpointercapture"]];const ce={mouse:{[P]:m,[I]:g,[T]:y,[N]:x,[O]:b,[k]:S,[M]:_,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[P]:"touchout",[I]:"touchleave",[T]:"touchover",[N]:"touchenter",[O]:B,[k]:D,[M]:$,[E]:U,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[P]:P,[I]:I,[T]:T,[N]:N,[O]:O,[k]:k,[M]:M,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},pe=Ce=>Ce.indexOf("pointer")>=0?"pointer":Ce.indexOf("touch")>=0?"touch":"mouse",Ee=Ce=>{const K=pe(Ce);if(K==="pointer")return r.Konva.pointerEventsEnabled&&ce.pointer;if(K==="touch")return ce.touch;if(K==="mouse")return ce.mouse};function we(Ce={}){return(Ce.clipFunc||Ce.clipWidth||Ce.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ce}const he="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";n.stages=[];class _e extends t.Container{constructor(K){super(we(K)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{we(this.attrs)}),this._checkVisibility()}_validateAdd(K){const j=K.getType()==="Layer",F=K.getType()==="FastLayer";j||F||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const K=this.visible()?"":"none";this.content.style.display=K}setContainer(K){if(typeof K===d){if(K.charAt(0)==="."){var j=K.slice(1);K=document.getElementsByClassName(j)[0]}else{var F;K.charAt(0)!=="#"?F=K:F=K.slice(1),K=document.getElementById(F)}if(!K)throw"Can not find container in document with id "+F}return this._setAttr("container",K),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),K.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var K=this.children,j=K.length,F;for(F=0;F<j;F++)K[F].clear();return this}clone(K){return K||(K={}),K.container=typeof document<"u"&&document.createElement("div"),t.Container.prototype.clone.call(this,K)}destroy(){super.destroy();var K=this.content;K&&e.Util._isInDocument(K)&&this.container().removeChild(K);var j=n.stages.indexOf(this);return j>-1&&n.stages.splice(j,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const K=this._pointerPositions[0]||this._changedPointerPositions[0];return K?{x:K.x,y:K.y}:(e.Util.warn(he),null)}_getPointerById(K){return this._pointerPositions.find(j=>j.id===K)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(K){K=K||{},K.x=K.x||0,K.y=K.y||0,K.width=K.width||this.width(),K.height=K.height||this.height();var j=new s.SceneCanvas({width:K.width,height:K.height,pixelRatio:K.pixelRatio||1}),F=j.getContext()._context,z=this.children;return(K.x||K.y)&&F.translate(-1*K.x,-1*K.y),z.forEach(function(ee){if(ee.isVisible()){var re=ee._toKonvaCanvas(K);F.drawImage(re._canvas,K.x,K.y,re.getWidth()/re.getPixelRatio(),re.getHeight()/re.getPixelRatio())}}),j}getIntersection(K){if(!K)return null;var j=this.children,F=j.length,z=F-1,ee;for(ee=z;ee>=0;ee--){const re=j[ee].getIntersection(K);if(re)return re}return null}_resizeDOM(){var K=this.width(),j=this.height();this.content&&(this.content.style.width=K+f,this.content.style.height=j+f),this.bufferCanvas.setSize(K,j),this.bufferHitCanvas.setSize(K,j),this.children.forEach(F=>{F.setSize({width:K,height:j}),F.draw()})}add(K,...j){if(arguments.length>1){for(var F=0;F<arguments.length;F++)this.add(arguments[F]);return this}super.add(K);var z=this.children.length;return z>Z&&e.Util.warn("The stage has "+z+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),K.setSize({width:this.width(),height:this.height()}),K.draw(),r.Konva.isBrowser&&this.content.appendChild(K.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(K){return c.hasPointerCapture(K,this)}setPointerCapture(K){c.setPointerCapture(K,this)}releaseCapture(K){c.releaseCapture(K,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&te.forEach(([K,j])=>{this.content.addEventListener(K,F=>{this[j](F)},{passive:!1})})}_pointerenter(K){this.setPointersPositions(K);const j=Ee(K.type);j&&this._fire(j.pointerenter,{evt:K,target:this,currentTarget:this})}_pointerover(K){this.setPointersPositions(K);const j=Ee(K.type);j&&this._fire(j.pointerover,{evt:K,target:this,currentTarget:this})}_getTargetShape(K){let j=this[K+"targetShape"];return j&&!j.getStage()&&(j=null),j}_pointerleave(K){const j=Ee(K.type),F=pe(K.type);if(j){this.setPointersPositions(K);var z=this._getTargetShape(F),ee=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;z&&ee?(z._fireAndBubble(j.pointerout,{evt:K}),z._fireAndBubble(j.pointerleave,{evt:K}),this._fire(j.pointerleave,{evt:K,target:this,currentTarget:this}),this[F+"targetShape"]=null):ee&&(this._fire(j.pointerleave,{evt:K,target:this,currentTarget:this}),this._fire(j.pointerout,{evt:K,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(K){const j=Ee(K.type),F=pe(K.type);if(j){this.setPointersPositions(K);var z=!1;this._changedPointerPositions.forEach(ee=>{var re=this.getIntersection(ee);if(o.DD.justDragged=!1,r.Konva["_"+F+"ListenClick"]=!0,!re||!re.isListening()){this[F+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&re.setPointerCapture(ee.id),this[F+"ClickStartShape"]=re,re._fireAndBubble(j.pointerdown,{evt:K,pointerId:ee.id}),z=!0;const W=K.type.indexOf("touch")>=0;re.preventDefault()&&K.cancelable&&W&&K.preventDefault()}),z||this._fire(j.pointerdown,{evt:K,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(K){const j=Ee(K.type),F=pe(K.type);if(!j)return;r.Konva.isDragging()&&o.DD.node.preventDefault()&&K.cancelable&&K.preventDefault(),this.setPointersPositions(K);var z=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;if(!z)return;var ee={};let re=!1;var W=this._getTargetShape(F);this._changedPointerPositions.forEach(q=>{const ae=c.getCapturedShape(q.id)||this.getIntersection(q),fe=q.id,ye={evt:K,pointerId:fe};var Me=W!==ae;if(Me&&W&&(W._fireAndBubble(j.pointerout,{...ye},ae),W._fireAndBubble(j.pointerleave,{...ye},ae)),ae){if(ee[ae._id])return;ee[ae._id]=!0}ae&&ae.isListening()?(re=!0,Me&&(ae._fireAndBubble(j.pointerover,{...ye},W),ae._fireAndBubble(j.pointerenter,{...ye},W),this[F+"targetShape"]=ae),ae._fireAndBubble(j.pointermove,{...ye})):W&&(this._fire(j.pointerover,{evt:K,target:this,currentTarget:this,pointerId:fe}),this[F+"targetShape"]=null)}),re||this._fire(j.pointermove,{evt:K,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(K){const j=Ee(K.type),F=pe(K.type);if(!j)return;this.setPointersPositions(K);const z=this[F+"ClickStartShape"],ee=this[F+"ClickEndShape"];var re={};let W=!1;this._changedPointerPositions.forEach(q=>{const ae=c.getCapturedShape(q.id)||this.getIntersection(q);if(ae){if(ae.releaseCapture(q.id),re[ae._id])return;re[ae._id]=!0}const fe=q.id,ye={evt:K,pointerId:fe};let Me=!1;r.Konva["_"+F+"InDblClickWindow"]?(Me=!0,clearTimeout(this[F+"DblTimeout"])):o.DD.justDragged||(r.Konva["_"+F+"InDblClickWindow"]=!0,clearTimeout(this[F+"DblTimeout"])),this[F+"DblTimeout"]=setTimeout(function(){r.Konva["_"+F+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),ae&&ae.isListening()?(W=!0,this[F+"ClickEndShape"]=ae,ae._fireAndBubble(j.pointerup,{...ye}),r.Konva["_"+F+"ListenClick"]&&z&&z===ae&&(ae._fireAndBubble(j.pointerclick,{...ye}),Me&&ee&&ee===ae&&ae._fireAndBubble(j.pointerdblclick,{...ye}))):(this[F+"ClickEndShape"]=null,r.Konva["_"+F+"ListenClick"]&&this._fire(j.pointerclick,{evt:K,target:this,currentTarget:this,pointerId:fe}),Me&&this._fire(j.pointerdblclick,{evt:K,target:this,currentTarget:this,pointerId:fe}))}),W||this._fire(j.pointerup,{evt:K,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+F+"ListenClick"]=!1,K.cancelable&&F!=="touch"&&K.preventDefault()}_contextmenu(K){this.setPointersPositions(K);var j=this.getIntersection(this.getPointerPosition());j&&j.isListening()?j._fireAndBubble(L,{evt:K}):this._fire(L,{evt:K,target:this,currentTarget:this})}_wheel(K){this.setPointersPositions(K);var j=this.getIntersection(this.getPointerPosition());j&&j.isListening()?j._fireAndBubble(Q,{evt:K}):this._fire(Q,{evt:K,target:this,currentTarget:this})}_pointercancel(K){this.setPointersPositions(K);const j=c.getCapturedShape(K.pointerId)||this.getIntersection(this.getPointerPosition());j&&j._fireAndBubble(M,c.createEvent(K)),c.releaseCapture(K.pointerId)}_lostpointercapture(K){c.releaseCapture(K.pointerId)}setPointersPositions(K){var j=this._getContentPosition(),F=null,z=null;K=K||window.event,K.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(K.touches,ee=>{this._pointerPositions.push({id:ee.identifier,x:(ee.clientX-j.left)/j.scaleX,y:(ee.clientY-j.top)/j.scaleY})}),Array.prototype.forEach.call(K.changedTouches||K.touches,ee=>{this._changedPointerPositions.push({id:ee.identifier,x:(ee.clientX-j.left)/j.scaleX,y:(ee.clientY-j.top)/j.scaleY})})):(F=(K.clientX-j.left)/j.scaleX,z=(K.clientY-j.top)/j.scaleY,this.pointerPos={x:F,y:z},this._pointerPositions=[{x:F,y:z,id:e.Util._getFirstPointerId(K)}],this._changedPointerPositions=[{x:F,y:z,id:e.Util._getFirstPointerId(K)}])}_setPointerPosition(K){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(K)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var K=this.content.getBoundingClientRect();return{top:K.top,left:K.left,scaleX:K.width/this.content.clientWidth||1,scaleY:K.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!r.Konva.isBrowser){var K=this.container();if(!K)throw"Stage has no container. A container is required.";K.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),K.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(K){K.batchDraw()}),this}}n.Stage=_e,_e.prototype.nodeType=u,(0,l._registerNode)(_e),i.Factory.addGetterSetter(_e,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{n.stages.forEach(Ce=>{Ce.batchDraw()})})}(h2)),h2}var cg={},u2={},bN;function Pr(){return bN||(bN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const e=Oi(),i=Wn(),t=wi(),r=qn(),s=ki(),o=Oi(),l=a7();var c="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",m="radialGradient";let g;function y(){return g||(g=i.Util.createCanvasElement().getContext("2d"),g)}n.shapes={};function x(I){const T=this.attrs.fillRule;T?I.fill(T):I.fill()}function b(I){I.stroke()}function S(I){I.fill()}function _(I){I.stroke()}function O(){this._clearCache(c)}function k(){this._clearCache(u)}function M(){this._clearCache(d)}function E(){this._clearCache(f)}function R(){this._clearCache(m)}class P extends r.Node{constructor(T){super(T);let N;for(;N=i.Util.getRandomColor(),!(N&&!(N in n.shapes)););this.colorKey=N,n.shapes[N]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var T=y();const N=T.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(N&&N.setTransform){const L=new i.Transform;L.translate(this.fillPatternX(),this.fillPatternY()),L.rotate(e.Konva.getAngle(this.fillPatternRotation())),L.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),L.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const D=L.getMatrix(),$=typeof DOMMatrix>"u"?{a:D[0],b:D[1],c:D[2],d:D[3],e:D[4],f:D[5]}:new DOMMatrix(D);N.setTransform($)}return N}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){var T=this.fillLinearGradientColorStops();if(T){for(var N=y(),L=this.fillLinearGradientStartPoint(),D=this.fillLinearGradientEndPoint(),$=N.createLinearGradient(L.x,L.y,D.x,D.y),B=0;B<T.length;B+=2)$.addColorStop(T[B],T[B+1]);return $}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){var T=this.fillRadialGradientColorStops();if(T){for(var N=y(),L=this.fillRadialGradientStartPoint(),D=this.fillRadialGradientEndPoint(),$=N.createRadialGradient(L.x,L.y,this.fillRadialGradientStartRadius(),D.x,D.y,this.fillRadialGradientEndRadius()),B=0;B<T.length;B+=2)$.addColorStop(T[B],T[B+1]);return $}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var T=i.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){var N=this.getStage();if(!N)return!1;const L=N.bufferHitCanvas;return L.getContext().clear(),this.drawHit(L,void 0,!0),L.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var N;if(!((N=this.attrs.perfectDrawEnabled)!==null&&N!==void 0?N:!0))return!1;const D=T||this.hasFill(),$=this.hasStroke(),B=this.getAbsoluteOpacity()!==1;if(D&&$&&B)return!0;const U=this.hasShadow(),Q=this.shadowForStrokeEnabled();return!!(D&&$&&U&&Q)}setStrokeHitEnabled(T){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let N=!1,L=this.getParent();for(;L;){if(L.isCached()){N=!0;break}L=L.getParent()}const D=T.skipTransform,$=T.relativeTo||N&&this.getStage()||void 0,B=this.getSelfRect(),Q=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Z=B.width+Q,te=B.height+Q,ce=!T.skipShadow&&this.hasShadow(),pe=ce?this.shadowOffsetX():0,Ee=ce?this.shadowOffsetY():0,we=Z+Math.abs(pe),he=te+Math.abs(Ee),_e=ce&&this.shadowBlur()||0,Ce=we+_e*2,K=he+_e*2,j={width:Ce,height:K,x:-(Q/2+_e)+Math.min(pe,0)+B.x,y:-(Q/2+_e)+Math.min(Ee,0)+B.y};return D?j:this._transformedRect(j,$)}drawScene(T,N,L){var D=this.getLayer(),$=T||D.getCanvas(),B=$.getContext(),U=this._getCanvasCache(),Q=this.getSceneFunc(),Z=this.hasShadow(),te,ce,pe=$.isCache,Ee=N===this;if(!this.isVisible()&&!Ee)return this;if(U){B.save();var we=this.getAbsoluteTransform(N).getMatrix();return B.transform(we[0],we[1],we[2],we[3],we[4],we[5]),this._drawCachedSceneCanvas(B),B.restore(),this}if(!Q)return this;if(B.save(),this._useBufferCanvas()&&!pe){te=this.getStage();const Ce=L||te.bufferCanvas;ce=Ce.getContext(),ce.clear(),ce.save(),ce._applyLineJoin(this);var he=this.getAbsoluteTransform(N).getMatrix();ce.transform(he[0],he[1],he[2],he[3],he[4],he[5]),Q.call(this,ce,this),ce.restore();var _e=Ce.pixelRatio;Z&&B._applyShadow(this),B._applyOpacity(this),B._applyGlobalCompositeOperation(this),B.drawImage(Ce._canvas,0,0,Ce.width/_e,Ce.height/_e)}else{if(B._applyLineJoin(this),!Ee){var he=this.getAbsoluteTransform(N).getMatrix();B.transform(he[0],he[1],he[2],he[3],he[4],he[5]),B._applyOpacity(this),B._applyGlobalCompositeOperation(this)}Z&&B._applyShadow(this),Q.call(this,B,this)}return B.restore(),this}drawHit(T,N,L=!1){if(!this.shouldDrawHit(N,L))return this;var D=this.getLayer(),$=T||D.hitCanvas,B=$&&$.getContext(),U=this.hitFunc()||this.sceneFunc(),Q=this._getCanvasCache(),Z=Q&&Q.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Z){B.save();var te=this.getAbsoluteTransform(N).getMatrix();return B.transform(te[0],te[1],te[2],te[3],te[4],te[5]),this._drawCachedHitCanvas(B),B.restore(),this}if(!U)return this;if(B.save(),B._applyLineJoin(this),!(this===N)){var pe=this.getAbsoluteTransform(N).getMatrix();B.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5])}return U.call(this,B,this),B.restore(),this}drawHitFromCache(T=0){var N=this._getCanvasCache(),L=this._getCachedSceneCanvas(),D=N.hit,$=D.getContext(),B=D.getWidth(),U=D.getHeight(),Q,Z,te,ce,pe,Ee;$.clear(),$.drawImage(L._canvas,0,0,B,U);try{for(Q=$.getImageData(0,0,B,U),Z=Q.data,te=Z.length,ce=i.Util._hexToRgb(this.colorKey),pe=0;pe<te;pe+=4)Ee=Z[pe+3],Ee>T?(Z[pe]=ce.r,Z[pe+1]=ce.g,Z[pe+2]=ce.b,Z[pe+3]=255):Z[pe+3]=0;$.putImageData(Q,0,0)}catch(we){i.Util.error("Unable to draw hit graph from cached scene canvas. "+we.message)}return this}hasPointerCapture(T){return l.hasPointerCapture(T,this)}setPointerCapture(T){l.setPointerCapture(T,this)}releaseCapture(T){l.releaseCapture(T,this)}}n.Shape=P,P.prototype._fillFunc=x,P.prototype._strokeFunc=b,P.prototype._fillFuncHit=S,P.prototype._strokeFuncHit=_,P.prototype._centroid=!1,P.prototype.nodeType="Shape",(0,o._registerNode)(P),P.prototype.eventListeners={},P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",O),P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",k),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",M),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",R),t.Factory.addGetterSetter(P,"stroke",void 0,(0,s.getStringOrGradientValidator)()),t.Factory.addGetterSetter(P,"strokeWidth",2,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"fillAfterStrokeEnabled",!1),t.Factory.addGetterSetter(P,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(P,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(P,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(P,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(P,"lineJoin"),t.Factory.addGetterSetter(P,"lineCap"),t.Factory.addGetterSetter(P,"sceneFunc"),t.Factory.addGetterSetter(P,"hitFunc"),t.Factory.addGetterSetter(P,"dash"),t.Factory.addGetterSetter(P,"dashOffset",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"shadowColor",void 0,(0,s.getStringValidator)()),t.Factory.addGetterSetter(P,"shadowBlur",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"shadowOpacity",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(P,"shadowOffset",["x","y"]),t.Factory.addGetterSetter(P,"shadowOffsetX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"shadowOffsetY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"fillPatternImage"),t.Factory.addGetterSetter(P,"fill",void 0,(0,s.getStringOrGradientValidator)()),t.Factory.addGetterSetter(P,"fillPatternX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"fillPatternY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"fillLinearGradientColorStops"),t.Factory.addGetterSetter(P,"strokeLinearGradientColorStops"),t.Factory.addGetterSetter(P,"fillRadialGradientStartRadius",0),t.Factory.addGetterSetter(P,"fillRadialGradientEndRadius",0),t.Factory.addGetterSetter(P,"fillRadialGradientColorStops"),t.Factory.addGetterSetter(P,"fillPatternRepeat","repeat"),t.Factory.addGetterSetter(P,"fillEnabled",!0),t.Factory.addGetterSetter(P,"strokeEnabled",!0),t.Factory.addGetterSetter(P,"shadowEnabled",!0),t.Factory.addGetterSetter(P,"dashEnabled",!0),t.Factory.addGetterSetter(P,"strokeScaleEnabled",!0),t.Factory.addGetterSetter(P,"fillPriority","color"),t.Factory.addComponentsGetterSetter(P,"fillPatternOffset",["x","y"]),t.Factory.addGetterSetter(P,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(P,"fillPatternScale",["x","y"]),t.Factory.addGetterSetter(P,"fillPatternScaleX",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(P,"fillPatternScaleY",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(P,"fillLinearGradientStartPoint",["x","y"]),t.Factory.addComponentsGetterSetter(P,"strokeLinearGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(P,"fillLinearGradientStartPointX",0),t.Factory.addGetterSetter(P,"strokeLinearGradientStartPointX",0),t.Factory.addGetterSetter(P,"fillLinearGradientStartPointY",0),t.Factory.addGetterSetter(P,"strokeLinearGradientStartPointY",0),t.Factory.addComponentsGetterSetter(P,"fillLinearGradientEndPoint",["x","y"]),t.Factory.addComponentsGetterSetter(P,"strokeLinearGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(P,"fillLinearGradientEndPointX",0),t.Factory.addGetterSetter(P,"strokeLinearGradientEndPointX",0),t.Factory.addGetterSetter(P,"fillLinearGradientEndPointY",0),t.Factory.addGetterSetter(P,"strokeLinearGradientEndPointY",0),t.Factory.addComponentsGetterSetter(P,"fillRadialGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(P,"fillRadialGradientStartPointX",0),t.Factory.addGetterSetter(P,"fillRadialGradientStartPointY",0),t.Factory.addComponentsGetterSetter(P,"fillRadialGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(P,"fillRadialGradientEndPointX",0),t.Factory.addGetterSetter(P,"fillRadialGradientEndPointY",0),t.Factory.addGetterSetter(P,"fillPatternRotation",0),t.Factory.addGetterSetter(P,"fillRule",void 0,(0,s.getStringValidator)()),t.Factory.backCompat(P,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(u2)),u2}var xN;function l7(){if(xN)return cg;xN=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.Layer=void 0;const n=Wn(),e=i_(),i=qn(),t=wi(),r=t_(),s=ki(),o=Pr(),l=Oi();var c="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=f.length;let g=class extends e.Container{constructor(x){super(x),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(x){return this.getContext().clear(x),this.getHitCanvas().getContext().clear(x),this}setZIndex(x){super.setZIndex(x);var b=this.getStage();return b&&b.content&&(b.content.removeChild(this.getNativeCanvasElement()),x<b.children.length-1?b.content.insertBefore(this.getNativeCanvasElement(),b.children[x+1].getCanvas()._canvas):b.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);var x=this.getStage();return x&&x.content&&(x.content.removeChild(this.getNativeCanvasElement()),x.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var x=i.Node.prototype.moveUp.call(this);if(!x)return!1;var b=this.getStage();return!b||!b.content?!1:(b.content.removeChild(this.getNativeCanvasElement()),this.index<b.children.length-1?b.content.insertBefore(this.getNativeCanvasElement(),b.children[this.index+1].getCanvas()._canvas):b.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){var x=this.getStage();if(x){var b=x.children;x.content&&(x.content.removeChild(this.getNativeCanvasElement()),x.content.insertBefore(this.getNativeCanvasElement(),b[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){var x=this.getStage();if(x){var b=x.children;x.content&&(x.content.removeChild(this.getNativeCanvasElement()),x.content.insertBefore(this.getNativeCanvasElement(),b[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var x=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),x&&x.parentNode&&n.Util._isInDocument(x)&&x.parentNode.removeChild(x),this}getStage(){return this.parent}setSize({width:x,height:b}){return this.canvas.setSize(x,b),this.hitCanvas.setSize(x,b),this._setSmoothEnabled(),this}_validateAdd(x){var b=x.getType();b!=="Group"&&b!=="Shape"&&n.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(x){return x=x||{},x.width=x.width||this.getWidth(),x.height=x.height||this.getHeight(),x.x=x.x!==void 0?x.x:this.x(),x.y=x.y!==void 0?x.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,x)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(x){if(!this.isListening()||!this.isVisible())return null;for(var b=1,S=!1;;){for(let _=0;_<m;_++){const O=f[_],k=this._getIntersection({x:x.x+O.x*b,y:x.y+O.y*b}),M=k.shape;if(M)return M;if(S=!!k.antialiased,!k.antialiased)break}if(S)b+=1;else return null}}_getIntersection(x){const b=this.hitCanvas.pixelRatio,S=this.hitCanvas.context.getImageData(Math.round(x.x*b),Math.round(x.y*b),1,1).data,_=S[3];if(_===255){const O=n.Util._rgbToHex(S[0],S[1],S[2]),k=o.shapes[c+O];return k?{shape:k}:{antialiased:!0}}else if(_>0)return{antialiased:!0};return{}}drawScene(x,b){var S=this.getLayer(),_=x||S&&S.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&_.getContext().clear(),e.Container.prototype.drawScene.call(this,_,b),this._fire(d,{node:this}),this}drawHit(x,b){var S=this.getLayer(),_=x||S&&S.hitCanvas;return S&&S.clearBeforeDraw()&&S.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,_,b),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(x){n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(x)}getHitGraphEnabled(x){return n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var x=this.parent,b=!!this.hitCanvas._canvas.parentNode;b?x.content.removeChild(this.hitCanvas._canvas):x.content.appendChild(this.hitCanvas._canvas)}}destroy(){return n.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return cg.Layer=g,g.prototype.nodeType="Layer",(0,l._registerNode)(g),t.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),t.Factory.addGetterSetter(g,"clearBeforeDraw",!0),t.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),cg}var hg={},ON;function ESe(){if(ON)return hg;ON=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.FastLayer=void 0;const n=Wn(),e=l7(),i=Oi();let t=class extends e.Layer{constructor(s){super(s),this.listening(!1),n.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return hg.FastLayer=t,t.prototype.nodeType="FastLayer",(0,i._registerNode)(t),hg}var ug={},wN;function u3(){if(wN)return ug;wN=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.Group=void 0;const n=Wn(),e=i_(),i=Oi();let t=class extends e.Container{_validateAdd(s){var o=s.getType();o!=="Group"&&o!=="Shape"&&n.Util.throw("You may only add groups and shapes to groups.")}};return ug.Group=t,t.prototype.nodeType="Group",(0,i._registerNode)(t),ug}var dg={},_N;function d3(){if(_N)return dg;_N=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.Animation=void 0;const n=Oi(),e=Wn(),i=function(){return n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return new Date().getTime()}}();let t=class Sf{constructor(s,o){this.id=Sf.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=s,this.setLayers(o)}setLayers(s){let o=[];return s&&(o=Array.isArray(s)?s:[s]),this.layers=o,this}getLayers(){return this.layers}addLayer(s){const o=this.layers,l=o.length;for(let c=0;c<l;c++)if(o[c]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const o=Sf.animations,l=o.length;for(let c=0;c<l;c++)if(o[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),Sf._addAnimation(this),this}stop(){return Sf._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const o=s.id,l=this.animations,c=l.length;for(let u=0;u<c;u++)if(l[u].id===o){this.animations.splice(u,1);break}}static _runFrames(){const s={},o=this.animations;for(let l=0;l<o.length;l++){const c=o[l],u=c.layers,d=c.func;c._updateFrameObject(i());const f=u.length;let m;if(d?m=d.call(c,c.frame)!==!1:m=!0,!!m)for(let g=0;g<f;g++){const y=u[g];y._id!==void 0&&(s[y._id]=y)}}for(let l in s)s.hasOwnProperty(l)&&s[l].batchDraw()}static _animationLoop(){const s=Sf;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return dg.Animation=t,t.animations=[],t.animIdCounter=0,t.animRunning=!1,dg}var d2={},SN;function PSe(){return SN||(SN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const e=Wn(),i=d3(),t=qn(),r=Oi();var s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,l=2,c=3,u=0,d=["fill","stroke","shadowColor"];class f{constructor(y,x,b,S,_,O,k){this.prop=y,this.propFunc=x,this.begin=S,this._pos=S,this.duration=O,this._change=0,this.prevPos=0,this.yoyo=k,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=b,this._change=_-this.begin,this.pause()}fire(y){var x=this[y];x&&x()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=l,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===l?this.setTime(y):this.state===c&&this.setTime(this.duration-y)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(y){var x=this,b=y.node,S=b._id,_,O=y.easing||n.Easings.Linear,k=!!y.yoyo,M;typeof y.duration>"u"?_=.3:y.duration===0?_=.001:_=y.duration,this.node=b,this._id=u++;var E=b.getLayer()||(b instanceof r.Konva.Stage?b.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){x.tween.onEnterFrame()},E),this.tween=new f(M,function(R){x._tweenFunc(R)},O,0,1,_*1e3,k),this._addListeners(),m.attrs[S]||(m.attrs[S]={}),m.attrs[S][this._id]||(m.attrs[S][this._id]={}),m.tweens[S]||(m.tweens[S]={});for(M in y)s[M]===void 0&&this._addAttr(M,y[M]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,x){var b=this.node,S=b._id,_,O,k,M,E,R,P,I;if(k=m.tweens[S][y],k&&delete m.attrs[S][k][y],_=b.getAttr(y),e.Util._isArray(x))if(O=[],E=Math.max(x.length,_.length),y==="points"&&x.length!==_.length&&(x.length>_.length?(P=_,_=e.Util._prepareArrayForTween(_,x,b.closed())):(R=x,x=e.Util._prepareArrayForTween(x,_,b.closed()))),y.indexOf("fill")===0)for(M=0;M<E;M++)if(M%2===0)O.push(x[M]-_[M]);else{var T=e.Util.colorToRGBA(_[M]);I=e.Util.colorToRGBA(x[M]),_[M]=T,O.push({r:I.r-T.r,g:I.g-T.g,b:I.b-T.b,a:I.a-T.a})}else for(M=0;M<E;M++)O.push(x[M]-_[M]);else d.indexOf(y)!==-1?(_=e.Util.colorToRGBA(_),I=e.Util.colorToRGBA(x),O={r:I.r-_.r,g:I.g-_.g,b:I.b-_.b,a:I.a-_.a}):O=x-_;m.attrs[S][this._id][y]={start:_,diff:O,end:x,trueEnd:R,trueStart:P},m.tweens[S][y]=this._id}_tweenFunc(y){var x=this.node,b=m.attrs[x._id][this._id],S,_,O,k,M,E,R,P;for(S in b){if(_=b[S],O=_.start,k=_.diff,P=_.end,e.Util._isArray(O))if(M=[],R=Math.max(O.length,P.length),S.indexOf("fill")===0)for(E=0;E<R;E++)E%2===0?M.push((O[E]||0)+k[E]*y):M.push("rgba("+Math.round(O[E].r+k[E].r*y)+","+Math.round(O[E].g+k[E].g*y)+","+Math.round(O[E].b+k[E].b*y)+","+(O[E].a+k[E].a*y)+")");else for(E=0;E<R;E++)M.push((O[E]||0)+k[E]*y);else d.indexOf(S)!==-1?M="rgba("+Math.round(O.r+k.r*y)+","+Math.round(O.g+k.g*y)+","+Math.round(O.b+k.b*y)+","+(O.a+k.a*y)+")":M=O+k*y;x.setAttr(S,M)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,x=m.attrs[y._id][this._id];x.points&&x.points.trueEnd&&y.setAttr("points",x.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,x=m.attrs[y._id][this._id];x.points&&x.points.trueStart&&y.points(x.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,x=this._id,b=m.tweens[y],S;this.pause();for(S in b)delete m.tweens[y][S];delete m.attrs[y][x]}}n.Tween=m,m.attrs={},m.tweens={},t.Node.prototype.to=function(g){var y=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),y&&y()};var x=new m(g);x.play()},n.Easings={BackEaseIn(g,y,x,b){var S=1.70158;return x*(g/=b)*g*((S+1)*g-S)+y},BackEaseOut(g,y,x,b){var S=1.70158;return x*((g=g/b-1)*g*((S+1)*g+S)+1)+y},BackEaseInOut(g,y,x,b){var S=1.70158;return(g/=b/2)<1?x/2*(g*g*(((S*=1.525)+1)*g-S))+y:x/2*((g-=2)*g*(((S*=1.525)+1)*g+S)+2)+y},ElasticEaseIn(g,y,x,b,S,_){var O=0;return g===0?y:(g/=b)===1?y+x:(_||(_=b*.3),!S||S<Math.abs(x)?(S=x,O=_/4):O=_/(2*Math.PI)*Math.asin(x/S),-(S*Math.pow(2,10*(g-=1))*Math.sin((g*b-O)*(2*Math.PI)/_))+y)},ElasticEaseOut(g,y,x,b,S,_){var O=0;return g===0?y:(g/=b)===1?y+x:(_||(_=b*.3),!S||S<Math.abs(x)?(S=x,O=_/4):O=_/(2*Math.PI)*Math.asin(x/S),S*Math.pow(2,-10*g)*Math.sin((g*b-O)*(2*Math.PI)/_)+x+y)},ElasticEaseInOut(g,y,x,b,S,_){var O=0;return g===0?y:(g/=b/2)===2?y+x:(_||(_=b*(.3*1.5)),!S||S<Math.abs(x)?(S=x,O=_/4):O=_/(2*Math.PI)*Math.asin(x/S),g<1?-.5*(S*Math.pow(2,10*(g-=1))*Math.sin((g*b-O)*(2*Math.PI)/_))+y:S*Math.pow(2,-10*(g-=1))*Math.sin((g*b-O)*(2*Math.PI)/_)*.5+x+y)},BounceEaseOut(g,y,x,b){return(g/=b)<1/2.75?x*(7.5625*g*g)+y:g<2/2.75?x*(7.5625*(g-=1.5/2.75)*g+.75)+y:g<2.5/2.75?x*(7.5625*(g-=2.25/2.75)*g+.9375)+y:x*(7.5625*(g-=2.625/2.75)*g+.984375)+y},BounceEaseIn(g,y,x,b){return x-n.Easings.BounceEaseOut(b-g,0,x,b)+y},BounceEaseInOut(g,y,x,b){return g<b/2?n.Easings.BounceEaseIn(g*2,0,x,b)*.5+y:n.Easings.BounceEaseOut(g*2-b,0,x,b)*.5+x*.5+y},EaseIn(g,y,x,b){return x*(g/=b)*g+y},EaseOut(g,y,x,b){return-x*(g/=b)*(g-2)+y},EaseInOut(g,y,x,b){return(g/=b/2)<1?x/2*g*g+y:-x/2*(--g*(g-2)-1)+y},StrongEaseIn(g,y,x,b){return x*(g/=b)*g*g*g*g+y},StrongEaseOut(g,y,x,b){return x*((g=g/b-1)*g*g*g*g+1)+y},StrongEaseInOut(g,y,x,b){return(g/=b/2)<1?x/2*g*g*g*g*g+y:x/2*((g-=2)*g*g*g*g+2)+y},Linear(g,y,x,b){return x*g/b+y}}}(d2)),d2}var CN;function ASe(){return CN||(CN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const e=Oi(),i=Wn(),t=qn(),r=i_(),s=MSe(),o=l7(),l=ESe(),c=u3(),u=h3(),d=Pr(),f=d3(),m=PSe(),g=o7(),y=t_();n.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:t.Node,Container:r.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:l.FastLayer,Group:c.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:m.Tween,Easings:m.Easings,Context:g.Context,Canvas:y.Canvas}),n.default=n.Konva}(s2)),s2}var fg={},kN;function RSe(){if(kN)return fg;kN=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.Arc=void 0;const n=wi(),e=Pr(),i=Oi(),t=ki(),r=Oi();let s=class extends e.Shape{_sceneFunc(l){var c=i.Konva.getAngle(this.angle()),u=this.clockwise();l.beginPath(),l.arc(0,0,this.outerRadius(),0,c,u),l.arc(0,0,this.innerRadius(),c,0,!u),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}getSelfRect(){const l=this.innerRadius(),c=this.outerRadius(),u=this.clockwise(),d=i.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),m=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),y=Math.sin(Math.min(d,Math.PI/2)),x=f*(f>0?l:c),b=m*c,S=g*(g>0?l:c),_=y*(y>0?c:l);return{x,y:u?-1*_:S,width:b-x,height:_-S}}};return fg.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1,(0,t.getBooleanValidator)()),fg}var pg={},mg={},TN;function c7(){if(TN)return mg;TN=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.Line=void 0;const n=wi(),e=Pr(),i=ki(),t=Oi();function r(l,c,u,d,f,m,g){var y=Math.sqrt(Math.pow(u-l,2)+Math.pow(d-c,2)),x=Math.sqrt(Math.pow(f-u,2)+Math.pow(m-d,2)),b=g*y/(y+x),S=g*x/(y+x),_=u-b*(f-l),O=d-b*(m-c),k=u+S*(f-l),M=d+S*(m-c);return[_,O,k,M]}function s(l,c){var u=l.length,d=[],f,m;for(f=2;f<u-2;f+=2)m=r(l[f-2],l[f-1],l[f],l[f+1],l[f+2],l[f+3],c),!isNaN(m[0])&&(d.push(m[0]),d.push(m[1]),d.push(l[f]),d.push(l[f+1]),d.push(m[2]),d.push(m[3]));return d}class o extends e.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){var u=this.points(),d=u.length,f=this.tension(),m=this.closed(),g=this.bezier(),y,x,b;if(d){if(c.beginPath(),c.moveTo(u[0],u[1]),f!==0&&d>4){for(y=this.getTensionPoints(),x=y.length,b=m?0:4,m||c.quadraticCurveTo(y[0],y[1],y[2],y[3]);b<x-2;)c.bezierCurveTo(y[b++],y[b++],y[b++],y[b++],y[b++],y[b++]);m||c.quadraticCurveTo(y[x-2],y[x-1],u[d-2],u[d-1])}else if(g)for(b=2;b<d;)c.bezierCurveTo(u[b++],u[b++],u[b++],u[b++],u[b++],u[b++]);else for(b=2;b<d;b+=2)c.lineTo(u[b],u[b+1]);m?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){var c=this.points(),u=c.length,d=this.tension(),f=r(c[u-2],c[u-1],c[0],c[1],c[2],c[3],d),m=r(c[u-4],c[u-3],c[u-2],c[u-1],c[0],c[1],d),g=s(c,d),y=[f[2],f[3]].concat(g).concat([m[0],m[1],c[u-2],c[u-1],m[2],m[3],f[0],f[1],c[0],c[1]]);return y}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();for(var u=c[0],d=c[0],f=c[1],m=c[1],g,y,x=0;x<c.length/2;x++)g=c[x*2],y=c[x*2+1],u=Math.min(u,g),d=Math.max(d,g),f=Math.min(f,y),m=Math.max(m,y);return{x:u,y:f,width:d-u,height:m-f}}}return mg.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(o),n.Factory.addGetterSetter(o,"closed",!1),n.Factory.addGetterSetter(o,"bezier",!1),n.Factory.addGetterSetter(o,"tension",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(o,"points",[],(0,i.getNumberArrayValidator)()),mg}var gg={},f2={},MN;function ISe(){return MN||(MN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.t2length=n.getQuadraticArcLength=n.getCubicArcLength=n.binomialCoefficients=n.cValues=n.tValues=void 0,n.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],n.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],n.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,l,c)=>{let u,d,f;u=c/2,d=0;for(let g=0;g<20;g++)f=u*n.tValues[20][g]+u,d+=n.cValues[20][g]*t(o,l,f);return u*d};n.getCubicArcLength=e;const i=(o,l,c)=>{c===void 0&&(c=1);const u=o[0]-2*o[1]+o[2],d=l[0]-2*l[1]+l[2],f=2*o[1]-2*o[0],m=2*l[1]-2*l[0],g=4*(u*u+d*d),y=4*(u*f+d*m),x=f*f+m*m;if(g===0)return c*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(l[2]-l[0],2));const b=y/(2*g),S=x/g,_=c+b,O=S-b*b,k=_*_+O>0?Math.sqrt(_*_+O):0,M=b*b+O>0?Math.sqrt(b*b+O):0,E=b+Math.sqrt(b*b+O)!==0?O*Math.log(Math.abs((_+k)/(b+M))):0;return Math.sqrt(g)/2*(_*k-b*M+E)};n.getQuadraticArcLength=i;function t(o,l,c){const u=r(1,c,o),d=r(1,c,l),f=u*u+d*d;return Math.sqrt(f)}const r=(o,l,c)=>{const u=c.length-1;let d,f;if(u===0)return 0;if(o===0){f=0;for(let m=0;m<=u;m++)f+=n.binomialCoefficients[u][m]*Math.pow(1-l,u-m)*Math.pow(l,m)*c[m];return f}else{d=new Array(u);for(let m=0;m<u;m++)d[m]=u*(c[m+1]-c[m]);return r(o-1,l,d)}},s=(o,l,c)=>{let u=1,d=o/l,f=(o-c(d))/l,m=0;for(;u>.001;){const g=c(d+f),y=Math.abs(o-g)/l;if(y<u)u=y,d+=f;else{const x=c(d-f),b=Math.abs(o-x)/l;b<u?(u=b,d-=f):f/=2}if(m++,m>500)break}return d};n.t2length=s}(f2)),f2}var EN;function f3(){if(EN)return gg;EN=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.Path=void 0;const n=wi(),e=Pr(),i=Oi(),t=ISe();let r=class $s extends e.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=$s.parsePathData(this.data()),this.pathLength=$s.getPathLength(this.dataArray)}_sceneFunc(o){var l=this.dataArray;o.beginPath();for(var c=!1,u=0;u<l.length;u++){var d=l[u].command,f=l[u].points;switch(d){case"L":o.lineTo(f[0],f[1]);break;case"M":o.moveTo(f[0],f[1]);break;case"C":o.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":o.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":var m=f[0],g=f[1],y=f[2],x=f[3],b=f[4],S=f[5],_=f[6],O=f[7],k=y>x?y:x,M=y>x?1:y/x,E=y>x?x/y:1;o.translate(m,g),o.rotate(_),o.scale(M,E),o.arc(0,0,k,b,b+S,1-O),o.scale(1/M,1/E),o.rotate(-_),o.translate(-m,-g);break;case"z":c=!0,o.closePath();break}}!c&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){var o=[];this.dataArray.forEach(function(y){if(y.command==="A"){var x=y.points[4],b=y.points[5],S=y.points[4]+b,_=Math.PI/180;if(Math.abs(x-S)<_&&(_=Math.abs(x-S)),b<0)for(let O=x-_;O>S;O-=_){const k=$s.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],O,0);o.push(k.x,k.y)}else for(let O=x+_;O<S;O+=_){const k=$s.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],O,0);o.push(k.x,k.y)}}else if(y.command==="C")for(let O=0;O<=1;O+=.01){const k=$s.getPointOnCubicBezier(O,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3],y.points[4],y.points[5]);o.push(k.x,k.y)}else o=o.concat(y.points)});for(var l=o[0],c=o[0],u=o[1],d=o[1],f,m,g=0;g<o.length/2;g++)f=o[g*2],m=o[g*2+1],isNaN(f)||(l=Math.min(l,f),c=Math.max(c,f)),isNaN(m)||(u=Math.min(u,m),d=Math.max(d,m));return{x:l,y:u,width:c-l,height:d-u}}getLength(){return this.pathLength}getPointAtLength(o){return $s.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,l,c,u){return Math.sqrt((c-o)*(c-o)+(u-l)*(u-l))}static getPathLength(o){let l=0;for(var c=0;c<o.length;++c)l+=o[c].pathLength;return l}static getPointAtLengthOfDataArray(o,l){var c,u=0,d=l.length;if(!d)return null;for(;u<d&&o>l[u].pathLength;)o-=l[u].pathLength,++u;if(u===d)return c=l[u-1].points.slice(-2),{x:c[0],y:c[1]};if(o<.01)return c=l[u].points.slice(0,2),{x:c[0],y:c[1]};var f=l[u],m=f.points;switch(f.command){case"L":return $s.getPointOnLine(o,f.start.x,f.start.y,m[0],m[1]);case"C":return $s.getPointOnCubicBezier((0,t.t2length)(o,$s.getPathLength(l),k=>(0,t.getCubicArcLength)([f.start.x,m[0],m[2],m[4]],[f.start.y,m[1],m[3],m[5]],k)),f.start.x,f.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return $s.getPointOnQuadraticBezier((0,t.t2length)(o,$s.getPathLength(l),k=>(0,t.getQuadraticArcLength)([f.start.x,m[0],m[2]],[f.start.y,m[1],m[3]],k)),f.start.x,f.start.y,m[0],m[1],m[2],m[3]);case"A":var g=m[0],y=m[1],x=m[2],b=m[3],S=m[4],_=m[5],O=m[6];return S+=_*o/f.pathLength,$s.getPointOnEllipticalArc(g,y,x,b,S,O)}return null}static getPointOnLine(o,l,c,u,d,f,m){f=f??l,m=m??c;const g=this.getLineLength(l,c,u,d);if(g<1e-10)return{x:l,y:c};if(u===l)return{x:f,y:m+(d>c?o:-o)};const y=(d-c)/(u-l),x=Math.sqrt(o*o/(1+y*y))*(u<l?-1:1),b=y*x;if(Math.abs(m-c-y*(f-l))<1e-10)return{x:f+x,y:m+b};const S=((f-l)*(u-l)+(m-c)*(d-c))/(g*g),_=l+S*(u-l),O=c+S*(d-c),k=this.getLineLength(f,m,_,O),M=Math.sqrt(o*o-k*k),E=Math.sqrt(M*M/(1+y*y))*(u<l?-1:1),R=y*E;return{x:_+E,y:O+R}}static getPointOnCubicBezier(o,l,c,u,d,f,m,g,y){function x(M){return M*M*M}function b(M){return 3*M*M*(1-M)}function S(M){return 3*M*(1-M)*(1-M)}function _(M){return(1-M)*(1-M)*(1-M)}var O=g*x(o)+f*b(o)+u*S(o)+l*_(o),k=y*x(o)+m*b(o)+d*S(o)+c*_(o);return{x:O,y:k}}static getPointOnQuadraticBezier(o,l,c,u,d,f,m){function g(_){return _*_}function y(_){return 2*_*(1-_)}function x(_){return(1-_)*(1-_)}var b=f*g(o)+u*y(o)+l*x(o),S=m*g(o)+d*y(o)+c*x(o);return{x:b,y:S}}static getPointOnEllipticalArc(o,l,c,u,d,f){var m=Math.cos(f),g=Math.sin(f),y={x:c*Math.cos(d),y:u*Math.sin(d)};return{x:o+(y.x*m-y.y*g),y:l+(y.x*g+y.y*m)}}static parsePathData(o){if(!o)return[];var l=o,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];l=l.replace(new RegExp(" ","g"),",");for(var u=0;u<c.length;u++)l=l.replace(new RegExp(c[u],"g"),"|"+c[u]);var d=l.split("|"),f=[],m=[],g=0,y=0,x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,b;for(u=1;u<d.length;u++){var S=d[u],_=S.charAt(0);for(S=S.slice(1),m.length=0;b=x.exec(S);)m.push(b[0]);for(var O=[],k=0,M=m.length;k<M;k++){if(m[k]==="00"){O.push(0,0);continue}var E=parseFloat(m[k]);isNaN(E)?O.push(0):O.push(E)}for(;O.length>0&&!isNaN(O[0]);){var R="",P=[],I=g,T=y,N,L,D,$,B,U,Q,Z,te,ce;switch(_){case"l":g+=O.shift(),y+=O.shift(),R="L",P.push(g,y);break;case"L":g=O.shift(),y=O.shift(),P.push(g,y);break;case"m":var pe=O.shift(),Ee=O.shift();if(g+=pe,y+=Ee,R="M",f.length>2&&f[f.length-1].command==="z"){for(var we=f.length-2;we>=0;we--)if(f[we].command==="M"){g=f[we].points[0]+pe,y=f[we].points[1]+Ee;break}}P.push(g,y),_="l";break;case"M":g=O.shift(),y=O.shift(),R="M",P.push(g,y),_="L";break;case"h":g+=O.shift(),R="L",P.push(g,y);break;case"H":g=O.shift(),R="L",P.push(g,y);break;case"v":y+=O.shift(),R="L",P.push(g,y);break;case"V":y=O.shift(),R="L",P.push(g,y);break;case"C":P.push(O.shift(),O.shift(),O.shift(),O.shift()),g=O.shift(),y=O.shift(),P.push(g,y);break;case"c":P.push(g+O.shift(),y+O.shift(),g+O.shift(),y+O.shift()),g+=O.shift(),y+=O.shift(),R="C",P.push(g,y);break;case"S":L=g,D=y,N=f[f.length-1],N.command==="C"&&(L=g+(g-N.points[2]),D=y+(y-N.points[3])),P.push(L,D,O.shift(),O.shift()),g=O.shift(),y=O.shift(),R="C",P.push(g,y);break;case"s":L=g,D=y,N=f[f.length-1],N.command==="C"&&(L=g+(g-N.points[2]),D=y+(y-N.points[3])),P.push(L,D,g+O.shift(),y+O.shift()),g+=O.shift(),y+=O.shift(),R="C",P.push(g,y);break;case"Q":P.push(O.shift(),O.shift()),g=O.shift(),y=O.shift(),P.push(g,y);break;case"q":P.push(g+O.shift(),y+O.shift()),g+=O.shift(),y+=O.shift(),R="Q",P.push(g,y);break;case"T":L=g,D=y,N=f[f.length-1],N.command==="Q"&&(L=g+(g-N.points[0]),D=y+(y-N.points[1])),g=O.shift(),y=O.shift(),R="Q",P.push(L,D,g,y);break;case"t":L=g,D=y,N=f[f.length-1],N.command==="Q"&&(L=g+(g-N.points[0]),D=y+(y-N.points[1])),g+=O.shift(),y+=O.shift(),R="Q",P.push(L,D,g,y);break;case"A":$=O.shift(),B=O.shift(),U=O.shift(),Q=O.shift(),Z=O.shift(),te=g,ce=y,g=O.shift(),y=O.shift(),R="A",P=this.convertEndpointToCenterParameterization(te,ce,g,y,Q,Z,$,B,U);break;case"a":$=O.shift(),B=O.shift(),U=O.shift(),Q=O.shift(),Z=O.shift(),te=g,ce=y,g+=O.shift(),y+=O.shift(),R="A",P=this.convertEndpointToCenterParameterization(te,ce,g,y,Q,Z,$,B,U);break}f.push({command:R||_,points:P,start:{x:I,y:T},pathLength:this.calcLength(I,T,R||_,P)})}(_==="z"||_==="Z")&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f}static calcLength(o,l,c,u){var d,f,m,g,y=$s;switch(c){case"L":return y.getLineLength(o,l,u[0],u[1]);case"C":return(0,t.getCubicArcLength)([o,u[0],u[2],u[4]],[l,u[1],u[3],u[5]],1);case"Q":return(0,t.getQuadraticArcLength)([o,u[0],u[2]],[l,u[1],u[3]],1);case"A":d=0;var x=u[4],b=u[5],S=u[4]+b,_=Math.PI/180;if(Math.abs(x-S)<_&&(_=Math.abs(x-S)),f=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],x,0),b<0)for(g=x-_;g>S;g-=_)m=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=y.getLineLength(f.x,f.y,m.x,m.y),f=m;else for(g=x+_;g<S;g+=_)m=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=y.getLineLength(f.x,f.y,m.x,m.y),f=m;return m=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],S,0),d+=y.getLineLength(f.x,f.y,m.x,m.y),d}return 0}static convertEndpointToCenterParameterization(o,l,c,u,d,f,m,g,y){var x=y*(Math.PI/180),b=Math.cos(x)*(o-c)/2+Math.sin(x)*(l-u)/2,S=-1*Math.sin(x)*(o-c)/2+Math.cos(x)*(l-u)/2,_=b*b/(m*m)+S*S/(g*g);_>1&&(m*=Math.sqrt(_),g*=Math.sqrt(_));var O=Math.sqrt((m*m*(g*g)-m*m*(S*S)-g*g*(b*b))/(m*m*(S*S)+g*g*(b*b)));d===f&&(O*=-1),isNaN(O)&&(O=0);var k=O*m*S/g,M=O*-g*b/m,E=(o+c)/2+Math.cos(x)*k-Math.sin(x)*M,R=(l+u)/2+Math.sin(x)*k+Math.cos(x)*M,P=function(B){return Math.sqrt(B[0]*B[0]+B[1]*B[1])},I=function(B,U){return(B[0]*U[0]+B[1]*U[1])/(P(B)*P(U))},T=function(B,U){return(B[0]*U[1]<B[1]*U[0]?-1:1)*Math.acos(I(B,U))},N=T([1,0],[(b-k)/m,(S-M)/g]),L=[(b-k)/m,(S-M)/g],D=[(-1*b-k)/m,(-1*S-M)/g],$=T(L,D);return I(L,D)<=-1&&($=Math.PI),I(L,D)>=1&&($=0),f===0&&$>0&&($=$-2*Math.PI),f===1&&$<0&&($=$+2*Math.PI),[E,R,m,g,N,$,x,f]}};return gg.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(r),n.Factory.addGetterSetter(r,"data"),gg}var PN;function DSe(){if(PN)return pg;PN=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.Arrow=void 0;const n=wi(),e=c7(),i=ki(),t=Oi(),r=f3();let s=class extends e.Line{_sceneFunc(l){super._sceneFunc(l);var c=Math.PI*2,u=this.points(),d=u,f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());var m=this.pointerLength(),g=u.length,y,x;if(f){const _=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],O=r.Path.calcLength(d[d.length-4],d[d.length-3],"C",_),k=r.Path.getPointOnQuadraticBezier(Math.min(1,1-m/O),_[0],_[1],_[2],_[3],_[4],_[5]);y=u[g-2]-k.x,x=u[g-1]-k.y}else y=u[g-2]-u[g-4],x=u[g-1]-u[g-3];var b=(Math.atan2(x,y)+c)%c,S=this.pointerWidth();this.pointerAtEnding()&&(l.save(),l.beginPath(),l.translate(u[g-2],u[g-1]),l.rotate(b),l.moveTo(0,0),l.lineTo(-m,S/2),l.lineTo(-m,-S/2),l.closePath(),l.restore(),this.__fillStroke(l)),this.pointerAtBeginning()&&(l.save(),l.beginPath(),l.translate(u[0],u[1]),f?(y=(d[0]+d[2])/2-u[0],x=(d[1]+d[3])/2-u[1]):(y=u[2]-u[0],x=u[3]-u[1]),l.rotate((Math.atan2(-x,-y)+c)%c),l.moveTo(0,0),l.lineTo(-m,S/2),l.lineTo(-m,-S/2),l.closePath(),l.restore(),this.__fillStroke(l))}__fillStroke(l){var c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,l.setLineDash([])),l.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const l=super.getSelfRect(),c=this.pointerWidth()/2;return{x:l.x-c,y:l.y-c,width:l.width+c*2,height:l.height+c*2}}};return pg.Arrow=s,s.prototype.className="Arrow",(0,t._registerNode)(s),n.Factory.addGetterSetter(s,"pointerLength",10,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerWidth",10,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerAtBeginning",!1),n.Factory.addGetterSetter(s,"pointerAtEnding",!0),pg}var vg={},AN;function NSe(){if(AN)return vg;AN=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.Circle=void 0;const n=wi(),e=Pr(),i=ki(),t=Oi();class r extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}return vg.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,t._registerNode)(r),n.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),vg}var yg={},RN;function $Se(){if(RN)return yg;RN=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.Ellipse=void 0;const n=wi(),e=Pr(),i=ki(),t=Oi();class r extends e.Shape{_sceneFunc(o){var l=this.radiusX(),c=this.radiusY();o.beginPath(),o.save(),l!==c&&o.scale(1,c/l),o.arc(0,0,l,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}}return yg.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,t._registerNode)(r),n.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),n.Factory.addGetterSetter(r,"radiusX",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(r,"radiusY",0,(0,i.getNumberValidator)()),yg}var bg={},IN;function VSe(){if(IN)return bg;IN=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.Image=void 0;const n=Wn(),e=wi(),i=Pr(),t=Oi(),r=ki();class s extends i.Shape{constructor(l){super(l),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const l=this.image();l&&l.complete||l&&l.readyState===4||l&&l.addEventListener&&l.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(l){const c=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let m;if(f){const g=this.attrs.cropWidth,y=this.attrs.cropHeight;g&&y?m=[f,this.cropX(),this.cropY(),g,y,0,0,c,u]:m=[f,0,0,c,u]}(this.hasFill()||this.hasStroke()||d)&&(l.beginPath(),d?n.Util.drawRoundedRectPath(l,c,u,d):l.rect(0,0,c,u),l.closePath(),l.fillStrokeShape(this)),f&&(d&&l.clip(),l.drawImage.apply(l,m))}_hitFunc(l){var c=this.width(),u=this.height(),d=this.cornerRadius();l.beginPath(),d?n.Util.drawRoundedRectPath(l,c,u,d):l.rect(0,0,c,u),l.closePath(),l.fillStrokeShape(this)}getWidth(){var l,c;return(l=this.attrs.width)!==null&&l!==void 0?l:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var l,c;return(l=this.attrs.height)!==null&&l!==void 0?l:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(l,c,u=null){var d=n.Util.createImageElement();d.onload=function(){var f=new s({image:d});c(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=l}}return bg.Image=s,s.prototype.className="Image",(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,r.getNumberValidator)()),bg}var yu={},DN;function LSe(){if(DN)return yu;DN=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.Tag=yu.Label=void 0;const n=wi(),e=Pr(),i=u3(),t=ki(),r=Oi();var s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",l="none",c="up",u="right",d="down",f="left",m=s.length;let g=class extends i.Group{constructor(b){super(b),this.on("add.konva",function(S){this._addListeners(S.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(b){var S=this,_,O=function(){S._sync()};for(_=0;_<m;_++)b.on(s[_]+o,O)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var b=this.getText(),S=this.getTag(),_,O,k,M,E,R,P;if(b&&S){switch(_=b.width(),O=b.height(),k=S.pointerDirection(),M=S.pointerWidth(),P=S.pointerHeight(),E=0,R=0,k){case c:E=_/2,R=-1*P;break;case u:E=_+M,R=O/2;break;case d:E=_/2,R=O+P;break;case f:E=-1*M,R=O/2;break}S.setAttrs({x:-1*E,y:-1*R,width:_,height:O}),b.setAttrs({x:-1*E,y:-1*R})}}};yu.Label=g,g.prototype.className="Label",(0,r._registerNode)(g);class y extends e.Shape{_sceneFunc(b){var S=this.width(),_=this.height(),O=this.pointerDirection(),k=this.pointerWidth(),M=this.pointerHeight(),E=this.cornerRadius();let R=0,P=0,I=0,T=0;typeof E=="number"?R=P=I=T=Math.min(E,S/2,_/2):(R=Math.min(E[0]||0,S/2,_/2),P=Math.min(E[1]||0,S/2,_/2),T=Math.min(E[2]||0,S/2,_/2),I=Math.min(E[3]||0,S/2,_/2)),b.beginPath(),b.moveTo(R,0),O===c&&(b.lineTo((S-k)/2,0),b.lineTo(S/2,-1*M),b.lineTo((S+k)/2,0)),b.lineTo(S-P,0),b.arc(S-P,P,P,Math.PI*3/2,0,!1),O===u&&(b.lineTo(S,(_-M)/2),b.lineTo(S+k,_/2),b.lineTo(S,(_+M)/2)),b.lineTo(S,_-T),b.arc(S-T,_-T,T,0,Math.PI/2,!1),O===d&&(b.lineTo((S+k)/2,_),b.lineTo(S/2,_+M),b.lineTo((S-k)/2,_)),b.lineTo(I,_),b.arc(I,_-I,I,Math.PI/2,Math.PI,!1),O===f&&(b.lineTo(0,(_+M)/2),b.lineTo(-1*k,_/2),b.lineTo(0,(_-M)/2)),b.lineTo(0,R),b.arc(R,R,R,Math.PI,Math.PI*3/2,!1),b.closePath(),b.fillStrokeShape(this)}getSelfRect(){var b=0,S=0,_=this.pointerWidth(),O=this.pointerHeight(),k=this.pointerDirection(),M=this.width(),E=this.height();return k===c?(S-=O,E+=O):k===d?E+=O:k===f?(b-=_*1.5,M+=_):k===u&&(M+=_*1.5),{x:b,y:S,width:M,height:E}}}return yu.Tag=y,y.prototype.className="Tag",(0,r._registerNode)(y),n.Factory.addGetterSetter(y,"pointerDirection",l),n.Factory.addGetterSetter(y,"pointerWidth",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(y,"pointerHeight",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(y,"cornerRadius",0,(0,t.getNumberOrArrayOfNumbersValidator)(4)),yu}var xg={},NN;function h7(){if(NN)return xg;NN=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.Rect=void 0;const n=wi(),e=Pr(),i=Oi(),t=Wn(),r=ki();let s=class extends e.Shape{_sceneFunc(l){var c=this.cornerRadius(),u=this.width(),d=this.height();l.beginPath(),c?t.Util.drawRoundedRectPath(l,u,d,c):l.rect(0,0,u,d),l.closePath(),l.fillStrokeShape(this)}};return xg.Rect=s,s.prototype.className="Rect",(0,i._registerNode)(s),n.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),xg}var Og={},$N;function BSe(){if($N)return Og;$N=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.RegularPolygon=void 0;const n=wi(),e=Pr(),i=ki(),t=Oi();let r=class extends e.Shape{_sceneFunc(o){const l=this._getPoints();o.beginPath(),o.moveTo(l[0].x,l[0].y);for(var c=1;c<l.length;c++)o.lineTo(l[c].x,l[c].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,l=this.attrs.radius||0,c=[];for(var u=0;u<o;u++)c.push({x:l*Math.sin(u*2*Math.PI/o),y:-1*l*Math.cos(u*2*Math.PI/o)});return c}getSelfRect(){const o=this._getPoints();var l=o[0].x,c=o[0].y,u=o[0].x,d=o[0].y;return o.forEach(f=>{l=Math.min(l,f.x),c=Math.max(c,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:l,y:u,width:c-l,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return Og.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,t._registerNode)(r),n.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(r,"sides",0,(0,i.getNumberValidator)()),Og}var wg={},VN;function USe(){if(VN)return wg;VN=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.Ring=void 0;const n=wi(),e=Pr(),i=ki(),t=Oi();var r=Math.PI*2;let s=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.innerRadius(),0,r,!1),l.moveTo(this.outerRadius(),0),l.arc(0,0,this.outerRadius(),r,0,!0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}};return wg.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,t._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),wg}var _g={},LN;function FSe(){if(LN)return _g;LN=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.Sprite=void 0;const n=wi(),e=Pr(),i=d3(),t=ki(),r=Oi();class s extends e.Shape{constructor(l){super(l),this._updated=!0,this.anim=new i.Animation(()=>{var c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(l){var c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],m=this.frameOffsets(),g=f[d+0],y=f[d+1],x=f[d+2],b=f[d+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(l.beginPath(),l.rect(0,0,x,b),l.closePath(),l.fillStrokeShape(this)),S)if(m){var _=m[c],O=u*2;l.drawImage(S,g,y,x,b,_[O+0],_[O+1],x,b)}else l.drawImage(S,g,y,x,b,0,0,x,b)}_hitFunc(l){var c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],m=this.frameOffsets(),g=f[d+2],y=f[d+3];if(l.beginPath(),m){var x=m[c],b=u*2;l.rect(x[b+0],x[b+1],g,y)}else l.rect(0,0,g,y);l.closePath(),l.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var l=this;this.interval=setInterval(function(){l._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var l=this.getLayer();this.anim.setLayers(l),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var l=this.frameIndex(),c=this.animation(),u=this.animations(),d=u[c],f=d.length/4;l<f-1?this.frameIndex(l+1):this.frameIndex(0)}}return _g.Sprite=s,s.prototype.className="Sprite",(0,r._registerNode)(s),n.Factory.addGetterSetter(s,"animation"),n.Factory.addGetterSetter(s,"animations"),n.Factory.addGetterSetter(s,"frameOffsets"),n.Factory.addGetterSetter(s,"image"),n.Factory.addGetterSetter(s,"frameIndex",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"frameRate",17,(0,t.getNumberValidator)()),n.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),_g}var Sg={},BN;function zSe(){if(BN)return Sg;BN=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.Star=void 0;const n=wi(),e=Pr(),i=ki(),t=Oi();let r=class extends e.Shape{_sceneFunc(o){var l=this.innerRadius(),c=this.outerRadius(),u=this.numPoints();o.beginPath(),o.moveTo(0,0-c);for(var d=1;d<u*2;d++){var f=d%2===0?c:l,m=f*Math.sin(d*Math.PI/u),g=-1*f*Math.cos(d*Math.PI/u);o.lineTo(m,g)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return Sg.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,t._registerNode)(r),n.Factory.addGetterSetter(r,"numPoints",5,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),Sg}var bu={},UN;function u7(){if(UN)return bu;UN=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.Text=bu.stringToArray=void 0;const n=Wn(),e=wi(),i=Pr(),t=Oi(),r=ki(),s=Oi();function o(Ee){return Array.from(Ee)}bu.stringToArray=o;var l="auto",c="center",u="inherit",d="justify",f="Change.konva",m="2d",g="-",y="left",x="text",b="Text",S="top",_="bottom",O="middle",k="normal",M="px ",E=" ",R="right",P="rtl",I="word",T="char",N="none",L="",D=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],$=D.length;function B(Ee){return Ee.split(",").map(we=>{we=we.trim();const he=we.indexOf(" ")>=0,_e=we.indexOf('"')>=0||we.indexOf("'")>=0;return he&&!_e&&(we=`"${we}"`),we}).join(", ")}var U;function Q(){return U||(U=n.Util.createCanvasElement().getContext(m),U)}function Z(Ee){Ee.fillText(this._partialText,this._partialTextX,this._partialTextY)}function te(Ee){Ee.setAttr("miterLimit",2),Ee.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function ce(Ee){return Ee=Ee||{},!Ee.fillLinearGradientColorStops&&!Ee.fillRadialGradientColorStops&&!Ee.fillPatternImage&&(Ee.fill=Ee.fill||"black"),Ee}class pe extends i.Shape{constructor(we){super(ce(we)),this._partialTextX=0,this._partialTextY=0;for(var he=0;he<$;he++)this.on(D[he]+f,this._setTextData);this._setTextData()}_sceneFunc(we){var he=this.textArr,_e=he.length;if(this.text()){var Ce=this.padding(),K=this.fontSize(),j=this.lineHeight()*K,F=this.verticalAlign(),z=this.direction(),ee=0,re=this.align(),W=this.getWidth(),q=this.letterSpacing(),ae=this.fill(),fe=this.textDecoration(),ye=fe.indexOf("underline")!==-1,Me=fe.indexOf("line-through")!==-1,J;z=z===u?we.direction:z;var G=j/2,ue=O;if(t.Konva._fixTextRendering){var de=this.measureSize("M");ue="alphabetic",G=(de.fontBoundingBoxAscent-de.fontBoundingBoxDescent)/2+j/2}var Oe=0,Te=0;for(z===P&&we.setAttr("direction",z),we.setAttr("font",this._getContextFont()),we.setAttr("textBaseline",ue),we.setAttr("textAlign",y),F===O?ee=(this.getHeight()-_e*j-Ce*2)/2:F===_&&(ee=this.getHeight()-_e*j-Ce*2),we.translate(Ce,ee+Ce),J=0;J<_e;J++){var Oe=0,Te=0,We=he[J],Ve=We.text,Fe=We.width,rt=We.lastInParagraph,Ge,nt,kt;if(we.save(),re===R?Oe+=W-Fe-Ce*2:re===c&&(Oe+=(W-Fe-Ce*2)/2),ye){we.save(),we.beginPath();let Le=t.Konva._fixTextRendering?Math.round(K/4):Math.round(K/2);const me=Oe,Be=G+Te+Le;we.moveTo(me,Be),Ge=Ve.split(" ").length-1,nt=Ge===0,kt=re===d&&!rt?W-Ce*2:Fe,we.lineTo(me+Math.round(kt),Be),we.lineWidth=K/15;const Xe=this._getLinearGradient();we.strokeStyle=Xe||ae,we.stroke(),we.restore()}if(Me){we.save(),we.beginPath();let Le=t.Konva._fixTextRendering?-Math.round(K/4):0;we.moveTo(Oe,G+Te+Le),Ge=Ve.split(" ").length-1,nt=Ge===0,kt=re===d&&rt&&!nt?W-Ce*2:Fe,we.lineTo(Oe+Math.round(kt),G+Te+Le),we.lineWidth=K/15;const me=this._getLinearGradient();we.strokeStyle=me||ae,we.stroke(),we.restore()}if(z!==P&&(q!==0||re===d)){Ge=Ve.split(" ").length-1;for(var Tt=o(Ve),ut=0;ut<Tt.length;ut++){var zt=Tt[ut];zt===" "&&!rt&&re===d&&(Oe+=(W-Ce*2-Fe)/Ge),this._partialTextX=Oe,this._partialTextY=G+Te,this._partialText=zt,we.fillStrokeShape(this),Oe+=this.measureSize(zt).width+q}}else q!==0&&we.setAttr("letterSpacing",`${q}px`),this._partialTextX=Oe,this._partialTextY=G+Te,this._partialText=Ve,we.fillStrokeShape(this);we.restore(),_e>1&&(G+=j)}}}_hitFunc(we){var he=this.getWidth(),_e=this.getHeight();we.beginPath(),we.rect(0,0,he,_e),we.closePath(),we.fillStrokeShape(this)}setText(we){var he=n.Util._isString(we)?we:we==null?"":we+"";return this._setAttr(x,he),this}getWidth(){var we=this.attrs.width===l||this.attrs.width===void 0;return we?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var we=this.attrs.height===l||this.attrs.height===void 0;return we?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(we){var he=Q(),_e=this.fontSize(),Ce;return he.save(),he.font=this._getContextFont(),Ce=he.measureText(we),he.restore(),{actualBoundingBoxAscent:Ce.actualBoundingBoxAscent,actualBoundingBoxDescent:Ce.actualBoundingBoxDescent,actualBoundingBoxLeft:Ce.actualBoundingBoxLeft,actualBoundingBoxRight:Ce.actualBoundingBoxRight,alphabeticBaseline:Ce.alphabeticBaseline,emHeightAscent:Ce.emHeightAscent,emHeightDescent:Ce.emHeightDescent,fontBoundingBoxAscent:Ce.fontBoundingBoxAscent,fontBoundingBoxDescent:Ce.fontBoundingBoxDescent,hangingBaseline:Ce.hangingBaseline,ideographicBaseline:Ce.ideographicBaseline,width:Ce.width,height:_e}}_getContextFont(){return this.fontStyle()+E+this.fontVariant()+E+(this.fontSize()+M)+B(this.fontFamily())}_addTextLine(we){this.align()===d&&(we=we.trim());var _e=this._getTextWidth(we);return this.textArr.push({text:we,width:_e,lastInParagraph:!1})}_getTextWidth(we){var he=this.letterSpacing(),_e=we.length;return Q().measureText(we).width+(_e?he*(_e-1):0)}_setTextData(){var we=this.text().split(`
`),he=+this.fontSize(),_e=0,Ce=this.lineHeight()*he,K=this.attrs.width,j=this.attrs.height,F=K!==l&&K!==void 0,z=j!==l&&j!==void 0,ee=this.padding(),re=K-ee*2,W=j-ee*2,q=0,ae=this.wrap(),fe=ae!==N,ye=ae!==T&&fe,Me=this.ellipsis();this.textArr=[],Q().font=this._getContextFont();for(var J=Me?this._getTextWidth(L):0,G=0,ue=we.length;G<ue;++G){var de=we[G],Oe=this._getTextWidth(de);if(F&&Oe>re)for(;de.length>0;){for(var Te=0,We=de.length,Ve="",Fe=0;Te<We;){var rt=Te+We>>>1,Ge=de.slice(0,rt+1),nt=this._getTextWidth(Ge)+J;nt<=re?(Te=rt+1,Ve=Ge,Fe=nt):We=rt}if(Ve){if(ye){var kt,Tt=de[Ve.length],ut=Tt===E||Tt===g;ut&&Fe<=re?kt=Ve.length:kt=Math.max(Ve.lastIndexOf(E),Ve.lastIndexOf(g))+1,kt>0&&(Te=kt,Ve=Ve.slice(0,Te),Fe=this._getTextWidth(Ve))}Ve=Ve.trimRight(),this._addTextLine(Ve),_e=Math.max(_e,Fe),q+=Ce;var zt=this._shouldHandleEllipsis(q);if(zt){this._tryToAddEllipsisToLastLine();break}if(de=de.slice(Te),de=de.trimLeft(),de.length>0&&(Oe=this._getTextWidth(de),Oe<=re)){this._addTextLine(de),q+=Ce,_e=Math.max(_e,Oe);break}}else break}else this._addTextLine(de),q+=Ce,_e=Math.max(_e,Oe),this._shouldHandleEllipsis(q)&&G<ue-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),z&&q+Ce>W)break}this.textHeight=he,this.textWidth=_e}_shouldHandleEllipsis(we){var he=+this.fontSize(),_e=this.lineHeight()*he,Ce=this.attrs.height,K=Ce!==l&&Ce!==void 0,j=this.padding(),F=Ce-j*2,z=this.wrap(),ee=z!==N;return!ee||K&&we+_e>F}_tryToAddEllipsisToLastLine(){var we=this.attrs.width,he=we!==l&&we!==void 0,_e=this.padding(),Ce=we-_e*2,K=this.ellipsis(),j=this.textArr[this.textArr.length-1];if(!(!j||!K)){if(he){var F=this._getTextWidth(j.text+L)<Ce;F||(j.text=j.text.slice(0,j.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(j.text+L)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const we=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,he=this.hasShadow();return we&&he?!0:super._useBufferCanvas()}}return bu.Text=pe,pe.prototype._fillFunc=Z,pe.prototype._strokeFunc=te,pe.prototype.className=b,pe.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(pe),e.Factory.overWriteSetter(pe,"width",(0,r.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(pe,"height",(0,r.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(pe,"direction",u),e.Factory.addGetterSetter(pe,"fontFamily","Arial"),e.Factory.addGetterSetter(pe,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(pe,"fontStyle",k),e.Factory.addGetterSetter(pe,"fontVariant",k),e.Factory.addGetterSetter(pe,"padding",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(pe,"align",y),e.Factory.addGetterSetter(pe,"verticalAlign",S),e.Factory.addGetterSetter(pe,"lineHeight",1,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(pe,"wrap",I),e.Factory.addGetterSetter(pe,"ellipsis",!1,(0,r.getBooleanValidator)()),e.Factory.addGetterSetter(pe,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(pe,"text","",(0,r.getStringValidator)()),e.Factory.addGetterSetter(pe,"textDecoration",""),bu}var Cg={},FN;function XSe(){if(FN)return Cg;FN=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.TextPath=void 0;const n=Wn(),e=wi(),i=Pr(),t=f3(),r=u7(),s=ki(),o=Oi();var l="",c="normal";function u(m){m.fillText(this.partialText,0,0)}function d(m){m.strokeText(this.partialText,0,0)}let f=class extends i.Shape{constructor(g){super(g),this.dummyCanvas=n.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return t.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const y=this.pathLength;return g-1>y?null:t.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=t.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();var y=this.textDecoration(),x=this.fill(),b=this.fontSize(),S=this.glyphInfo;y==="underline"&&g.beginPath();for(var _=0;_<S.length;_++){g.save();var O=S[_].p0;g.translate(O.x,O.y),g.rotate(S[_].rotation),this.partialText=S[_].text,g.fillStrokeShape(this),y==="underline"&&(_===0&&g.moveTo(0,b/2+1),g.lineTo(b,b/2+1)),g.restore()}y==="underline"&&(g.strokeStyle=x,g.lineWidth=b/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();var y=this.glyphInfo;if(y.length>=1){var x=y[0].p0;g.moveTo(x.x,x.y)}for(var b=0;b<y.length;b++){var S=y[b].p1;g.lineTo(S.x,S.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return r.Text.prototype.setText.call(this,g)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(g){var y=this.dummyCanvas,x=y.getContext("2d");x.save(),x.font=this._getContextFont();var b=x.measureText(g);return x.restore(),{width:b.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:y}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=y,this.glyphInfo=[],!this.attrs.data)return null;const x=this.letterSpacing(),b=this.align(),S=this.kerningFunc(),_=Math.max(this.textWidth+((this.attrs.text||"").length-1)*x,0);let O=0;b==="center"&&(O=Math.max(0,this.pathLength/2-_/2)),b==="right"&&(O=Math.max(0,this.pathLength-_));const k=(0,r.stringToArray)(this.text());let M=O;for(var E=0;E<k.length;E++){const R=this._getPointAtLength(M);if(!R)return;let P=this._getTextSize(k[E]).width+x;if(k[E]===" "&&b==="justify"){const $=this.text().split(" ").length-1;P+=(this.pathLength-_)/$}const I=this._getPointAtLength(M+P);if(!I)return;const T=t.Path.getLineLength(R.x,R.y,I.x,I.y);let N=0;if(S)try{N=S(k[E-1],k[E])*this.fontSize()}catch{N=0}R.x+=N,I.x+=N,this.textWidth+=N;const L=t.Path.getPointOnLine(N+T/2,R.x,R.y,I.x,I.y),D=Math.atan2(I.y-R.y,I.x-R.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:k[E],rotation:D,p0:R,p1:I}),M+=P}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var g=[];this.glyphInfo.forEach(function(E){g.push(E.p0.x),g.push(E.p0.y),g.push(E.p1.x),g.push(E.p1.y)});for(var y=g[0]||0,x=g[0]||0,b=g[1]||0,S=g[1]||0,_,O,k=0;k<g.length/2;k++)_=g[k*2],O=g[k*2+1],y=Math.min(y,_),x=Math.max(x,_),b=Math.min(b,O),S=Math.max(S,O);var M=this.fontSize();return{x:y-M/2,y:b-M/2,width:x-y+M,height:S-b+M}}destroy(){return n.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Cg.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(f),e.Factory.addGetterSetter(f,"data"),e.Factory.addGetterSetter(f,"fontFamily","Arial"),e.Factory.addGetterSetter(f,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(f,"fontStyle",c),e.Factory.addGetterSetter(f,"align","left"),e.Factory.addGetterSetter(f,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(f,"textBaseline","middle"),e.Factory.addGetterSetter(f,"fontVariant",c),e.Factory.addGetterSetter(f,"text",l),e.Factory.addGetterSetter(f,"textDecoration",null),e.Factory.addGetterSetter(f,"kerningFunc",null),Cg}var kg={},zN;function WSe(){if(zN)return kg;zN=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.Transformer=void 0;const n=Wn(),e=wi(),i=qn(),t=Pr(),r=h7(),s=u3(),o=Oi(),l=ki(),c=Oi();var u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(I=>I+`.${u}`).join(" "),f="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const y="ontouchstart"in o.Konva._global;function x(I,T,N){if(I==="rotater")return N;T+=n.Util.degToRad(g[I]||0);var L=(n.Util.radToDeg(T)%360+360)%360;return n.Util._inRange(L,315+22.5,360)||n.Util._inRange(L,0,22.5)?"ns-resize":n.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":n.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":n.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":n.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":n.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":n.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":n.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}var b=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],S=1e8;function _(I){return{x:I.x+I.width/2*Math.cos(I.rotation)+I.height/2*Math.sin(-I.rotation),y:I.y+I.height/2*Math.cos(I.rotation)+I.width/2*Math.sin(I.rotation)}}function O(I,T,N){const L=N.x+(I.x-N.x)*Math.cos(T)-(I.y-N.y)*Math.sin(T),D=N.y+(I.x-N.x)*Math.sin(T)+(I.y-N.y)*Math.cos(T);return{...I,rotation:I.rotation+T,x:L,y:D}}function k(I,T){const N=_(I);return O(I,T,N)}function M(I,T,N){let L=T;for(let D=0;D<I.length;D++){const $=o.Konva.getAngle(I[D]),B=Math.abs($-T)%(Math.PI*2);Math.min(B,Math.PI*2-B)<N&&(L=$)}return L}let E=0,R=class extends s.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const N=T.filter(D=>D.isAncestorOf(this)?(n.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=T=N,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(D=>{const $=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},B=D._attrsAffectingSize.map(U=>U+"Change."+this._getEventNamespace()).join(" ");D.on(B,$),D.on(m.map(U=>U+`.${this._getEventNamespace()}`).join(" "),$),D.on(`absoluteTransformChange.${this._getEventNamespace()}`,$),this._proxyDrag(D)}),this._resetTransformCache();var L=!!this.findOne(".top-left");return L&&this.update(),this}_proxyDrag(T){let N;T.on(`dragstart.${this._getEventNamespace()}`,L=>{N=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(L,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!N)return;const D=T.getAbsolutePosition(),$=D.x-N.x,B=D.y-N.y;this.nodes().forEach(U=>{if(U===T||U.isDragging())return;const Q=U.getAbsolutePosition();U.setAbsolutePosition({x:Q.x+$,y:Q.y+B}),U.startDrag(L)}),N=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(T,N=this.rotation(),L){var D=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),$=T.getAbsoluteScale(L),B=T.getAbsolutePosition(L),U=D.x*$.x-T.offsetX()*$.x,Q=D.y*$.y-T.offsetY()*$.y;const Z=(o.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),te={x:B.x+U*Math.cos(Z)+Q*Math.sin(-Z),y:B.y+Q*Math.cos(Z)+U*Math.sin(Z),width:D.width*$.x,height:D.height*$.y,rotation:Z};return O(te,-o.Konva.getAngle(N),{x:0,y:0})}__getNodeRect(){var T=this.getNode();if(!T)return{x:-S,y:-S,width:0,height:0,rotation:0};const N=[];this.nodes().map(Z=>{const te=Z.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var ce=[{x:te.x,y:te.y},{x:te.x+te.width,y:te.y},{x:te.x+te.width,y:te.y+te.height},{x:te.x,y:te.y+te.height}],pe=Z.getAbsoluteTransform();ce.forEach(function(Ee){var we=pe.point(Ee);N.push(we)})});const L=new n.Transform;L.rotate(-o.Konva.getAngle(this.rotation()));var D=1/0,$=1/0,B=-1/0,U=-1/0;N.forEach(function(Z){var te=L.point(Z);D===void 0&&(D=B=te.x,$=U=te.y),D=Math.min(D,te.x),$=Math.min($,te.y),B=Math.max(B,te.x),U=Math.max(U,te.y)}),L.invert();const Q=L.point({x:D,y:$});return{x:Q.x,y:Q.y,width:B-D,height:U-$,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),b.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){var N=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:y?10:"auto"}),L=this;N.on("mousedown touchstart",function(D){L._handleMouseDown(D)}),N.on("dragstart",D=>{N.stopDrag(),D.cancelBubble=!0}),N.on("dragend",D=>{D.cancelBubble=!0}),N.on("mouseenter",()=>{var D=o.Konva.getAngle(this.rotation()),$=this.rotateAnchorCursor(),B=x(T,D,$);N.getStage().content&&(N.getStage().content.style.cursor=B),this._cursorChange=!0}),N.on("mouseout",()=>{N.getStage().content&&(N.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(N)}_createBack(){var T=new t.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(N,L){var D=L.getParent(),$=D.padding();N.beginPath(),N.rect(-$,-$,L.width()+$*2,L.height()+$*2),N.moveTo(L.width()/2,-$),D.rotateEnabled()&&D.rotateLineVisible()&&N.lineTo(L.width()/2,-D.rotateAnchorOffset()*n.Util._sign(L.height())-$),N.fillStrokeShape(L)},hitFunc:(N,L)=>{if(this.shouldOverdrawWholeArea()){var D=this.padding();N.beginPath(),N.rect(-D,-D,L.width()+D*2,L.height()+D*2),N.fillStrokeShape(L)}}});this.add(T),this._proxyDrag(T),T.on("dragstart",N=>{N.cancelBubble=!0}),T.on("dragmove",N=>{N.cancelBubble=!0}),T.on("dragend",N=>{N.cancelBubble=!0}),this.on("dragmove",N=>{this.update()})}_handleMouseDown(T){if(!this._transforming){this._movingAnchorName=T.target.name().split(" ")[0];var N=this._getNodeRect(),L=N.width,D=N.height,$=Math.sqrt(Math.pow(L,2)+Math.pow(D,2));this.sin=Math.abs(D/$),this.cos=Math.abs(L/$),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var B=T.target.getAbsolutePosition(),U=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:U.x-B.x,y:U.y-B.y},E++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(Q=>{Q._fire("transformstart",{evt:T.evt,target:Q})})}}_handleMouseMove(T){var N,L,D,$=this.findOne("."+this._movingAnchorName),B=$.getStage();B.setPointersPositions(T);const U=B.getPointerPosition();let Q={x:U.x-this._anchorDragOffset.x,y:U.y-this._anchorDragOffset.y};const Z=$.getAbsolutePosition();this.anchorDragBoundFunc()&&(Q=this.anchorDragBoundFunc()(Z,Q,T)),$.setAbsolutePosition(Q);const te=$.getAbsolutePosition();if(!(Z.x===te.x&&Z.y===te.y)){if(this._movingAnchorName==="rotater"){var ce=this._getNodeRect();N=$.x()-ce.width/2,L=-$.y()+ce.height/2;let Me=Math.atan2(-L,N)+Math.PI/2;ce.height<0&&(Me-=Math.PI);var pe=o.Konva.getAngle(this.rotation());const J=pe+Me,G=o.Konva.getAngle(this.rotationSnapTolerance()),de=M(this.rotationSnaps(),J,G)-ce.rotation,Oe=k(ce,de);this._fitNodesInto(Oe,T);return}var Ee=this.shiftBehavior(),we;Ee==="inverted"?we=this.keepRatio()&&!T.shiftKey:Ee==="none"?we=this.keepRatio():we=this.keepRatio()||T.shiftKey;var j=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(we){var he=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};D=Math.sqrt(Math.pow(he.x-$.x(),2)+Math.pow(he.y-$.y(),2));var _e=this.findOne(".top-left").x()>he.x?-1:1,Ce=this.findOne(".top-left").y()>he.y?-1:1;N=D*this.cos*_e,L=D*this.sin*Ce,this.findOne(".top-left").x(he.x-N),this.findOne(".top-left").y(he.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y($.y());else if(this._movingAnchorName==="top-right"){if(we){var he=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};D=Math.sqrt(Math.pow($.x()-he.x,2)+Math.pow(he.y-$.y(),2));var _e=this.findOne(".top-right").x()<he.x?-1:1,Ce=this.findOne(".top-right").y()>he.y?-1:1;N=D*this.cos*_e,L=D*this.sin*Ce,this.findOne(".top-right").x(he.x+N),this.findOne(".top-right").y(he.y-L)}var K=$.position();this.findOne(".top-left").y(K.y),this.findOne(".bottom-right").x(K.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x($.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x($.x());else if(this._movingAnchorName==="bottom-left"){if(we){var he=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};D=Math.sqrt(Math.pow(he.x-$.x(),2)+Math.pow($.y()-he.y,2));var _e=he.x<$.x()?-1:1,Ce=$.y()<he.y?-1:1;N=D*this.cos*_e,L=D*this.sin*Ce,$.x(he.x-N),$.y(he.y+L)}K=$.position(),this.findOne(".top-left").x(K.x),this.findOne(".bottom-right").y(K.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y($.y());else if(this._movingAnchorName==="bottom-right"){if(we){var he=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};D=Math.sqrt(Math.pow($.x()-he.x,2)+Math.pow($.y()-he.y,2));var _e=this.findOne(".bottom-right").x()<he.x?-1:1,Ce=this.findOne(".bottom-right").y()<he.y?-1:1;N=D*this.cos*_e,L=D*this.sin*Ce,this.findOne(".bottom-right").x(he.x+N),this.findOne(".bottom-right").y(he.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var j=this.centeredScaling()||T.altKey;if(j){var F=this.findOne(".top-left"),z=this.findOne(".bottom-right"),ee=F.x(),re=F.y(),W=this.getWidth()-z.x(),q=this.getHeight()-z.y();z.move({x:-ee,y:-re}),F.move({x:W,y:q})}var ae=this.findOne(".top-left").getAbsolutePosition();N=ae.x,L=ae.y;var fe=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ye=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:N,y:L,width:fe,height:ye,rotation:o.Konva.getAngle(this.rotation())},T)}}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var N;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var L=this.getNode();E--,this._fire("transformend",{evt:T,target:L}),(N=this.getLayer())===null||N===void 0||N.batchDraw(),L&&this._nodes.forEach(D=>{var $;D._fire("transformend",{evt:T,target:D}),($=D.getLayer())===null||$===void 0||$.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,N){var L=this._getNodeRect();const D=1;if(n.Util._inRange(T.width,-this.padding()*2-D,D)){this.update();return}if(n.Util._inRange(T.height,-this.padding()*2-D,D)){this.update();return}var $=new n.Transform;if($.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const pe=$.point({x:-this.padding()*2,y:0});T.x+=pe.x,T.y+=pe.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const pe=$.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const pe=$.point({x:0,y:-this.padding()*2});T.x+=pe.x,T.y+=pe.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const pe=$.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const pe=this.boundBoxFunc()(L,T);pe?T=pe:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const B=1e7,U=new n.Transform;U.translate(L.x,L.y),U.rotate(L.rotation),U.scale(L.width/B,L.height/B);const Q=new n.Transform,Z=T.width/B,te=T.height/B;this.flipEnabled()===!1?(Q.translate(T.x,T.y),Q.rotate(T.rotation),Q.translate(T.width<0?T.width:0,T.height<0?T.height:0),Q.scale(Math.abs(Z),Math.abs(te))):(Q.translate(T.x,T.y),Q.rotate(T.rotation),Q.scale(Z,te));const ce=Q.multiply(U.invert());this._nodes.forEach(pe=>{var Ee;const we=pe.getParent().getAbsoluteTransform(),he=pe.getTransform().copy();he.translate(pe.offsetX(),pe.offsetY());const _e=new n.Transform;_e.multiply(we.copy().invert()).multiply(ce).multiply(we).multiply(he);const Ce=_e.decompose();pe.setAttrs(Ce),(Ee=pe.getLayer())===null||Ee===void 0||Ee.batchDraw()}),this.rotation(n.Util._getRotation(T.rotation)),this._nodes.forEach(pe=>{this._fire("transform",{evt:N,target:pe}),pe._fire("transform",{evt:N,target:pe})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,N){this.findOne(T).setAttrs(N)}update(){var T,N=this._getNodeRect();this.rotation(n.Util._getRotation(N.rotation));var L=N.width,D=N.height,$=this.enabledAnchors(),B=this.resizeEnabled(),U=this.padding(),Q=this.anchorSize();const Z=this.find("._anchor");Z.forEach(ce=>{ce.setAttrs({width:Q,height:Q,offsetX:Q/2,offsetY:Q/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:Q/2+U,offsetY:Q/2+U,visible:B&&$.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:Q/2+U,visible:B&&$.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:Q/2-U,offsetY:Q/2+U,visible:B&&$.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:D/2,offsetX:Q/2+U,visible:B&&$.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:D/2,offsetX:Q/2-U,visible:B&&$.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:D,offsetX:Q/2+U,offsetY:Q/2-U,visible:B&&$.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:D,offsetY:Q/2-U,visible:B&&$.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:D,offsetX:Q/2-U,offsetY:Q/2-U,visible:B&&$.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*n.Util._sign(D)-U,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:D,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const te=this.anchorStyleFunc();te&&Z.forEach(ce=>{te(ce)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(T){var N=i.Node.prototype.clone.call(this,T);return N}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};kg.Transformer=R,R.isTransforming=()=>E>0;function P(I){return I instanceof Array||n.Util.warn("enabledAnchors value should be an array"),I instanceof Array&&I.forEach(function(T){b.indexOf(T)===-1&&n.Util.warn("Unknown anchor name: "+T+". Available names are: "+b.join(", "))}),I||[]}return R.prototype.className="Transformer",(0,c._registerNode)(R),e.Factory.addGetterSetter(R,"enabledAnchors",b,P),e.Factory.addGetterSetter(R,"flipEnabled",!0,(0,l.getBooleanValidator)()),e.Factory.addGetterSetter(R,"resizeEnabled",!0),e.Factory.addGetterSetter(R,"anchorSize",10,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateEnabled",!0),e.Factory.addGetterSetter(R,"rotateLineVisible",!0),e.Factory.addGetterSetter(R,"rotationSnaps",[]),e.Factory.addGetterSetter(R,"rotateAnchorOffset",50,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(R,"rotationSnapTolerance",5,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderEnabled",!0),e.Factory.addGetterSetter(R,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"anchorStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"anchorFill","white"),e.Factory.addGetterSetter(R,"anchorCornerRadius",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"borderStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderDash"),e.Factory.addGetterSetter(R,"keepRatio",!0),e.Factory.addGetterSetter(R,"shiftBehavior","default"),e.Factory.addGetterSetter(R,"centeredScaling",!1),e.Factory.addGetterSetter(R,"ignoreStroke",!1),e.Factory.addGetterSetter(R,"padding",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"node"),e.Factory.addGetterSetter(R,"nodes"),e.Factory.addGetterSetter(R,"boundBoxFunc"),e.Factory.addGetterSetter(R,"anchorDragBoundFunc"),e.Factory.addGetterSetter(R,"anchorStyleFunc"),e.Factory.addGetterSetter(R,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(R,"useSingleNodeRotation",!0),e.Factory.backCompat(R,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),kg}var Tg={},XN;function QSe(){if(XN)return Tg;XN=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.Wedge=void 0;const n=wi(),e=Pr(),i=Oi(),t=ki(),r=Oi();let s=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),l.lineTo(0,0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(l){this.radius(l/2)}setHeight(l){this.radius(l/2)}};return Tg.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),n.Factory.addGetterSetter(s,"radius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1),n.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Tg}var Mg={},WN;function HSe(){if(WN)return Mg;WN=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.Blur=void 0;const n=wi(),e=qn(),i=ki();function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(c,u){var d=c.data,f=c.width,m=c.height,g,y,x,b,S,_,O,k,M,E,R,P,I,T,N,L,D,$,B,U,Q,Z,te,ce,pe=u+u+1,Ee=f-1,we=m-1,he=u+1,_e=he*(he+1)/2,Ce=new t,K=null,j=Ce,F=null,z=null,ee=r[u],re=s[u];for(x=1;x<pe;x++)j=j.next=new t,x===he&&(K=j);for(j.next=Ce,O=_=0,y=0;y<m;y++){for(L=D=$=B=k=M=E=R=0,P=he*(U=d[_]),I=he*(Q=d[_+1]),T=he*(Z=d[_+2]),N=he*(te=d[_+3]),k+=_e*U,M+=_e*Q,E+=_e*Z,R+=_e*te,j=Ce,x=0;x<he;x++)j.r=U,j.g=Q,j.b=Z,j.a=te,j=j.next;for(x=1;x<he;x++)b=_+((Ee<x?Ee:x)<<2),k+=(j.r=U=d[b])*(ce=he-x),M+=(j.g=Q=d[b+1])*ce,E+=(j.b=Z=d[b+2])*ce,R+=(j.a=te=d[b+3])*ce,L+=U,D+=Q,$+=Z,B+=te,j=j.next;for(F=Ce,z=K,g=0;g<f;g++)d[_+3]=te=R*ee>>re,te!==0?(te=255/te,d[_]=(k*ee>>re)*te,d[_+1]=(M*ee>>re)*te,d[_+2]=(E*ee>>re)*te):d[_]=d[_+1]=d[_+2]=0,k-=P,M-=I,E-=T,R-=N,P-=F.r,I-=F.g,T-=F.b,N-=F.a,b=O+((b=g+u+1)<Ee?b:Ee)<<2,L+=F.r=d[b],D+=F.g=d[b+1],$+=F.b=d[b+2],B+=F.a=d[b+3],k+=L,M+=D,E+=$,R+=B,F=F.next,P+=U=z.r,I+=Q=z.g,T+=Z=z.b,N+=te=z.a,L-=U,D-=Q,$-=Z,B-=te,z=z.next,_+=4;O+=f}for(g=0;g<f;g++){for(D=$=B=L=M=E=R=k=0,_=g<<2,P=he*(U=d[_]),I=he*(Q=d[_+1]),T=he*(Z=d[_+2]),N=he*(te=d[_+3]),k+=_e*U,M+=_e*Q,E+=_e*Z,R+=_e*te,j=Ce,x=0;x<he;x++)j.r=U,j.g=Q,j.b=Z,j.a=te,j=j.next;for(S=f,x=1;x<=u;x++)_=S+g<<2,k+=(j.r=U=d[_])*(ce=he-x),M+=(j.g=Q=d[_+1])*ce,E+=(j.b=Z=d[_+2])*ce,R+=(j.a=te=d[_+3])*ce,L+=U,D+=Q,$+=Z,B+=te,j=j.next,x<we&&(S+=f);for(_=g,F=Ce,z=K,y=0;y<m;y++)b=_<<2,d[b+3]=te=R*ee>>re,te>0?(te=255/te,d[b]=(k*ee>>re)*te,d[b+1]=(M*ee>>re)*te,d[b+2]=(E*ee>>re)*te):d[b]=d[b+1]=d[b+2]=0,k-=P,M-=I,E-=T,R-=N,P-=F.r,I-=F.g,T-=F.b,N-=F.a,b=g+((b=y+he)<we?b:we)*f<<2,k+=L+=F.r=d[b],M+=D+=F.g=d[b+1],E+=$+=F.b=d[b+2],R+=B+=F.a=d[b+3],F=F.next,P+=U=z.r,I+=Q=z.g,T+=Z=z.b,N+=te=z.a,L-=U,D-=Q,$-=Z,B-=te,z=z.next,_+=f}}const l=function(u){var d=Math.round(this.blurRadius());d>0&&o(u,d)};return Mg.Blur=l,n.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Mg}var Eg={},QN;function GSe(){if(QN)return Eg;QN=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.Brighten=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=this.brightness()*255,o=r.data,l=o.length,c;for(c=0;c<l;c+=4)o[c]+=s,o[c+1]+=s,o[c+2]+=s};return Eg.Brighten=t,n.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Eg}var Pg={},HN;function YSe(){if(HN)return Pg;HN=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.Contrast=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=Math.pow((this.contrast()+100)/100,2),o=r.data,l=o.length,c=150,u=150,d=150,f;for(f=0;f<l;f+=4)c=o[f],u=o[f+1],d=o[f+2],c/=255,c-=.5,c*=s,c+=.5,c*=255,u/=255,u-=.5,u*=s,u+=.5,u*=255,d/=255,d-=.5,d*=s,d+=.5,d*=255,c=c<0?0:c>255?255:c,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,o[f]=c,o[f+1]=u,o[f+2]=d};return Pg.Contrast=t,n.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Pg}var Ag={},GN;function jSe(){if(GN)return Ag;GN=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.Emboss=void 0;const n=wi(),e=qn(),i=Wn(),t=ki(),r=function(s){var o=this.embossStrength()*10,l=this.embossWhiteLevel()*255,c=this.embossDirection(),u=this.embossBlend(),d=0,f=0,m=s.data,g=s.width,y=s.height,x=g*4,b=y;switch(c){case"top-left":d=-1,f=-1;break;case"top":d=-1,f=0;break;case"top-right":d=-1,f=1;break;case"right":d=0,f=1;break;case"bottom-right":d=1,f=1;break;case"bottom":d=1,f=0;break;case"bottom-left":d=1,f=-1;break;case"left":d=0,f=-1;break;default:i.Util.error("Unknown emboss direction: "+c)}do{var S=(b-1)*x,_=d;b+_<1&&(_=0),b+_>y&&(_=0);var O=(b-1+_)*g*4,k=g;do{var M=S+(k-1)*4,E=f;k+E<1&&(E=0),k+E>g&&(E=0);var R=O+(k-1+E)*4,P=m[M]-m[R],I=m[M+1]-m[R+1],T=m[M+2]-m[R+2],N=P,L=N>0?N:-N,D=I>0?I:-I,$=T>0?T:-T;if(D>L&&(N=I),$>L&&(N=T),N*=o,u){var B=m[M]+N,U=m[M+1]+N,Q=m[M+2]+N;m[M]=B>255?255:B<0?0:B,m[M+1]=U>255?255:U<0?0:U,m[M+2]=Q>255?255:Q<0?0:Q}else{var Z=l-N;Z<0?Z=0:Z>255&&(Z=255),m[M]=m[M+1]=m[M+2]=Z}}while(--k)}while(--b)};return Ag.Emboss=r,n.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossDirection","top-left",null,n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossBlend",!1,null,n.Factory.afterSetFilter),Ag}var Rg={},YN;function qSe(){if(YN)return Rg;YN=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.Enhance=void 0;const n=wi(),e=qn(),i=ki();function t(s,o,l,c,u){var d=l-o,f=u-c,m;return d===0?c+f/2:f===0?c:(m=(s-o)/d,m=f*m+c,m)}const r=function(s){var o=s.data,l=o.length,c=o[0],u=c,d,f=o[1],m=f,g,y=o[2],x=y,b,S,_=this.enhance();if(_!==0){for(S=0;S<l;S+=4)d=o[S+0],d<c?c=d:d>u&&(u=d),g=o[S+1],g<f?f=g:g>m&&(m=g),b=o[S+2],b<y?y=b:b>x&&(x=b);u===c&&(u=255,c=0),m===f&&(m=255,f=0),x===y&&(x=255,y=0);var O,k,M,E,R,P,I,T,N;for(_>0?(k=u+_*(255-u),M=c-_*(c-0),R=m+_*(255-m),P=f-_*(f-0),T=x+_*(255-x),N=y-_*(y-0)):(O=(u+c)*.5,k=u+_*(u-O),M=c+_*(c-O),E=(m+f)*.5,R=m+_*(m-E),P=f+_*(f-E),I=(x+y)*.5,T=x+_*(x-I),N=y+_*(y-I)),S=0;S<l;S+=4)o[S+0]=t(o[S+0],c,u,M,k),o[S+1]=t(o[S+1],f,m,P,R),o[S+2]=t(o[S+2],y,x,N,T)}};return Rg.Enhance=r,n.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Rg}var Ig={},jN;function ZSe(){if(jN)return Ig;jN=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.Grayscale=void 0;const n=function(e){var i=e.data,t=i.length,r,s;for(r=0;r<t;r+=4)s=.34*i[r]+.5*i[r+1]+.16*i[r+2],i[r]=s,i[r+1]=s,i[r+2]=s};return Ig.Grayscale=n,Ig}var Dg={},qN;function KSe(){if(qN)return Dg;qN=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.HSL=void 0;const n=wi(),e=qn(),i=ki();n.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter);const t=function(r){var s=r.data,o=s.length,l=1,c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f,m=l*c*Math.cos(u*Math.PI/180),g=l*c*Math.sin(u*Math.PI/180),y=.299*l+.701*m+.167*g,x=.587*l-.587*m+.33*g,b=.114*l-.114*m-.497*g,S=.299*l-.299*m-.328*g,_=.587*l+.413*m+.035*g,O=.114*l-.114*m+.293*g,k=.299*l-.3*m+1.25*g,M=.587*l-.586*m-1.05*g,E=.114*l+.886*m-.2*g,R,P,I,T;for(f=0;f<o;f+=4)R=s[f+0],P=s[f+1],I=s[f+2],T=s[f+3],s[f+0]=y*R+x*P+b*I+d,s[f+1]=S*R+_*P+O*I+d,s[f+2]=k*R+M*P+E*I+d,s[f+3]=T};return Dg.HSL=t,Dg}var Ng={},ZN;function JSe(){if(ZN)return Ng;ZN=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.HSV=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=r.data,o=s.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d,f=l*c*Math.cos(u*Math.PI/180),m=l*c*Math.sin(u*Math.PI/180),g=.299*l+.701*f+.167*m,y=.587*l-.587*f+.33*m,x=.114*l-.114*f-.497*m,b=.299*l-.299*f-.328*m,S=.587*l+.413*f+.035*m,_=.114*l-.114*f+.293*m,O=.299*l-.3*f+1.25*m,k=.587*l-.586*f-1.05*m,M=.114*l+.886*f-.2*m,E,R,P,I;for(d=0;d<o;d+=4)E=s[d+0],R=s[d+1],P=s[d+2],I=s[d+3],s[d+0]=g*E+y*R+x*P,s[d+1]=b*E+S*R+_*P,s[d+2]=O*E+k*R+M*P,s[d+3]=I};return Ng.HSV=t,n.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Ng}var $g={},KN;function eCe(){if(KN)return $g;KN=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.Invert=void 0;const n=function(e){var i=e.data,t=i.length,r;for(r=0;r<t;r+=4)i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2]};return $g.Invert=n,$g}var Vg={},JN;function tCe(){if(JN)return Vg;JN=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.Kaleidoscope=void 0;const n=wi(),e=qn(),i=Wn(),t=ki();var r=function(l,c,u){var d=l.data,f=c.data,m=l.width,g=l.height,y=u.polarCenterX||m/2,x=u.polarCenterY||g/2,b,S,_,O=0,k=0,M=0,E=0,R,P=Math.sqrt(y*y+x*x);S=m-y,_=g-x,R=Math.sqrt(S*S+_*_),P=R>P?R:P;var I=g,T=m,N,L,D=360/T*Math.PI/180,$,B;for(L=0;L<T;L+=1)for($=Math.sin(L*D),B=Math.cos(L*D),N=0;N<I;N+=1)S=Math.floor(y+P*N/I*B),_=Math.floor(x+P*N/I*$),b=(_*m+S)*4,O=d[b+0],k=d[b+1],M=d[b+2],E=d[b+3],b=(L+N*m)*4,f[b+0]=O,f[b+1]=k,f[b+2]=M,f[b+3]=E},s=function(l,c,u){var d=l.data,f=c.data,m=l.width,g=l.height,y=u.polarCenterX||m/2,x=u.polarCenterY||g/2,b,S,_,O,k,M=0,E=0,R=0,P=0,I,T=Math.sqrt(y*y+x*x);S=m-y,_=g-x,I=Math.sqrt(S*S+_*_),T=I>T?I:T;var N=g,L=m,D,$,B=0,U,Q;for(S=0;S<m;S+=1)for(_=0;_<g;_+=1)O=S-y,k=_-x,D=Math.sqrt(O*O+k*k)*N/T,$=(Math.atan2(k,O)*180/Math.PI+360+B)%360,$=$*L/360,U=Math.floor($),Q=Math.floor(D),b=(Q*m+U)*4,M=d[b+0],E=d[b+1],R=d[b+2],P=d[b+3],b=(_*m+S)*4,f[b+0]=M,f[b+1]=E,f[b+2]=R,f[b+3]=P};const o=function(l){var c=l.width,u=l.height,d,f,m,g,y,x,b,S,_,O,k=Math.round(this.kaleidoscopePower()),M=Math.round(this.kaleidoscopeAngle()),E=Math.floor(c*(M%360)/360);if(!(k<1)){var R=i.Util.createCanvasElement();R.width=c,R.height=u;var P=R.getContext("2d").getImageData(0,0,c,u);i.Util.releaseCanvas(R),r(l,P,{polarCenterX:c/2,polarCenterY:u/2});for(var I=c/Math.pow(2,k);I<=8;)I=I*2,k-=1;I=Math.ceil(I);var T=I,N=0,L=T,D=1;for(E+I>c&&(N=T,L=0,D=-1),f=0;f<u;f+=1)for(d=N;d!==L;d+=D)m=Math.round(d+E)%c,_=(c*f+m)*4,y=P.data[_+0],x=P.data[_+1],b=P.data[_+2],S=P.data[_+3],O=(c*f+d)*4,P.data[O+0]=y,P.data[O+1]=x,P.data[O+2]=b,P.data[O+3]=S;for(f=0;f<u;f+=1)for(T=Math.floor(I),g=0;g<k;g+=1){for(d=0;d<T+1;d+=1)_=(c*f+d)*4,y=P.data[_+0],x=P.data[_+1],b=P.data[_+2],S=P.data[_+3],O=(c*f+T*2-d-1)*4,P.data[O+0]=y,P.data[O+1]=x,P.data[O+2]=b,P.data[O+3]=S;T*=2}s(P,l,{polarRotation:0})}};return Vg.Kaleidoscope=o,n.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),Vg}var Lg={},e$;function iCe(){if(e$)return Lg;e$=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.Mask=void 0;const n=wi(),e=qn(),i=ki();function t(m,g,y){var x=(y*m.width+g)*4,b=[];return b.push(m.data[x++],m.data[x++],m.data[x++],m.data[x++]),b}function r(m,g){return Math.sqrt(Math.pow(m[0]-g[0],2)+Math.pow(m[1]-g[1],2)+Math.pow(m[2]-g[2],2))}function s(m){for(var g=[0,0,0],y=0;y<m.length;y++)g[0]+=m[y][0],g[1]+=m[y][1],g[2]+=m[y][2];return g[0]/=m.length,g[1]/=m.length,g[2]/=m.length,g}function o(m,g){var y=t(m,0,0),x=t(m,m.width-1,0),b=t(m,0,m.height-1),S=t(m,m.width-1,m.height-1),_=g||10;if(r(y,x)<_&&r(x,S)<_&&r(S,b)<_&&r(b,y)<_){for(var O=s([x,y,S,b]),k=[],M=0;M<m.width*m.height;M++){var E=r(O,[m.data[M*4],m.data[M*4+1],m.data[M*4+2]]);k[M]=E<_?0:255}return k}}function l(m,g){for(var y=0;y<m.width*m.height;y++)m.data[4*y+3]=g[y]}function c(m,g,y){for(var x=[1,1,1,1,0,1,1,1,1],b=Math.round(Math.sqrt(x.length)),S=Math.floor(b/2),_=[],O=0;O<y;O++)for(var k=0;k<g;k++){for(var M=O*g+k,E=0,R=0;R<b;R++)for(var P=0;P<b;P++){var I=O+R-S,T=k+P-S;if(I>=0&&I<y&&T>=0&&T<g){var N=I*g+T,L=x[R*b+P];E+=m[N]*L}}_[M]=E===255*8?255:0}return _}function u(m,g,y){for(var x=[1,1,1,1,1,1,1,1,1],b=Math.round(Math.sqrt(x.length)),S=Math.floor(b/2),_=[],O=0;O<y;O++)for(var k=0;k<g;k++){for(var M=O*g+k,E=0,R=0;R<b;R++)for(var P=0;P<b;P++){var I=O+R-S,T=k+P-S;if(I>=0&&I<y&&T>=0&&T<g){var N=I*g+T,L=x[R*b+P];E+=m[N]*L}}_[M]=E>=255*4?255:0}return _}function d(m,g,y){for(var x=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],b=Math.round(Math.sqrt(x.length)),S=Math.floor(b/2),_=[],O=0;O<y;O++)for(var k=0;k<g;k++){for(var M=O*g+k,E=0,R=0;R<b;R++)for(var P=0;P<b;P++){var I=O+R-S,T=k+P-S;if(I>=0&&I<y&&T>=0&&T<g){var N=I*g+T,L=x[R*b+P];E+=m[N]*L}}_[M]=E}return _}const f=function(m){var g=this.threshold(),y=o(m,g);return y&&(y=c(y,m.width,m.height),y=u(y,m.width,m.height),y=d(y,m.width,m.height),l(m,y)),m};return Lg.Mask=f,n.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Lg}var Bg={},t$;function nCe(){if(t$)return Bg;t$=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.Noise=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=this.noise()*255,o=r.data,l=o.length,c=s/2,u;for(u=0;u<l;u+=4)o[u+0]+=c-2*c*Math.random(),o[u+1]+=c-2*c*Math.random(),o[u+2]+=c-2*c*Math.random()};return Bg.Noise=t,n.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Bg}var Ug={},i$;function rCe(){if(i$)return Ug;i$=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.Pixelate=void 0;const n=wi(),e=Wn(),i=qn(),t=ki(),r=function(s){var o=Math.ceil(this.pixelSize()),l=s.width,c=s.height,u,d,f,m,g,y,x,b=Math.ceil(l/o),S=Math.ceil(c/o),_,O,k,M,E,R,P,I=s.data;if(o<=0){e.Util.error("pixelSize value can not be <= 0");return}for(E=0;E<b;E+=1)for(R=0;R<S;R+=1){for(m=0,g=0,y=0,x=0,_=E*o,O=_+o,k=R*o,M=k+o,P=0,u=_;u<O;u+=1)if(!(u>=l))for(d=k;d<M;d+=1)d>=c||(f=(l*d+u)*4,m+=I[f+0],g+=I[f+1],y+=I[f+2],x+=I[f+3],P+=1);for(m=m/P,g=g/P,y=y/P,x=x/P,u=_;u<O;u+=1)if(!(u>=l))for(d=k;d<M;d+=1)d>=c||(f=(l*d+u)*4,I[f+0]=m,I[f+1]=g,I[f+2]=y,I[f+3]=x)}};return Ug.Pixelate=r,n.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),Ug}var Fg={},n$;function sCe(){if(n$)return Fg;n$=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.Posterize=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=Math.round(this.levels()*254)+1,o=r.data,l=o.length,c=255/s,u;for(u=0;u<l;u+=1)o[u]=Math.floor(o[u]/c)*c};return Fg.Posterize=t,n.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Fg}var zg={},r$;function oCe(){if(r$)return zg;r$=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.RGB=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=r.data,o=s.length,l=this.red(),c=this.green(),u=this.blue(),d,f;for(d=0;d<o;d+=4)f=(.34*s[d]+.5*s[d+1]+.16*s[d+2])/255,s[d]=f*l,s[d+1]=f*c,s[d+2]=f*u,s[d+3]=s[d+3]};return zg.RGB=t,n.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,n.Factory.afterSetFilter),zg}var Xg={},s$;function aCe(){if(s$)return Xg;s$=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.RGBA=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=r.data,o=s.length,l=this.red(),c=this.green(),u=this.blue(),d=this.alpha(),f,m;for(f=0;f<o;f+=4)m=1-d,s[f]=l*d+s[f]*m,s[f+1]=c*d+s[f+1]*m,s[f+2]=u*d+s[f+2]*m};return Xg.RGBA=t,n.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),Xg}var Wg={},o$;function lCe(){if(o$)return Wg;o$=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.Sepia=void 0;const n=function(e){var i=e.data,t=i.length,r,s,o,l;for(r=0;r<t;r+=4)s=i[r+0],o=i[r+1],l=i[r+2],i[r+0]=Math.min(255,s*.393+o*.769+l*.189),i[r+1]=Math.min(255,s*.349+o*.686+l*.168),i[r+2]=Math.min(255,s*.272+o*.534+l*.131)};return Wg.Sepia=n,Wg}var Qg={},a$;function cCe(){if(a$)return Qg;a$=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.Solarize=void 0;const n=function(e){var i=e.data,t=e.width,r=e.height,s=t*4,o=r;do{var l=(o-1)*s,c=t;do{var u=l+(c-1)*4,d=i[u],f=i[u+1],m=i[u+2];d>127&&(d=255-d),f>127&&(f=255-f),m>127&&(m=255-m),i[u]=d,i[u+1]=f,i[u+2]=m}while(--c)}while(--o)};return Qg.Solarize=n,Qg}var Hg={},l$;function hCe(){if(l$)return Hg;l$=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.Threshold=void 0;const n=wi(),e=qn(),i=ki(),t=function(r){var s=this.threshold()*255,o=r.data,l=o.length,c;for(c=0;c<l;c+=1)o[c]=o[c]<s?0:255};return Hg.Threshold=t,n.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Hg}var c$;function uCe(){if(c$)return og;c$=1,Object.defineProperty(og,"__esModule",{value:!0}),og.Konva=void 0;const n=ASe(),e=RSe(),i=DSe(),t=NSe(),r=$Se(),s=VSe(),o=LSe(),l=c7(),c=f3(),u=h7(),d=BSe(),f=USe(),m=FSe(),g=zSe(),y=u7(),x=XSe(),b=WSe(),S=QSe(),_=HSe(),O=GSe(),k=YSe(),M=jSe(),E=qSe(),R=ZSe(),P=KSe(),I=JSe(),T=eCe(),N=tCe(),L=iCe(),D=nCe(),$=rCe(),B=sCe(),U=oCe(),Q=aCe(),Z=lCe(),te=cCe(),ce=hCe();return og.Konva=n.Konva.Util._assign(n.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:t.Circle,Ellipse:r.Ellipse,Image:s.Image,Label:o.Label,Tag:o.Tag,Line:l.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:m.Sprite,Star:g.Star,Text:y.Text,TextPath:x.TextPath,Transformer:b.Transformer,Wedge:S.Wedge,Filters:{Blur:_.Blur,Brighten:O.Brighten,Contrast:k.Contrast,Emboss:M.Emboss,Enhance:E.Enhance,Grayscale:R.Grayscale,HSL:P.HSL,HSV:I.HSV,Invert:T.Invert,Kaleidoscope:N.Kaleidoscope,Mask:L.Mask,Noise:D.Noise,Pixelate:$.Pixelate,Posterize:B.Posterize,RGB:U.RGB,RGBA:Q.RGBA,Sepia:Z.Sepia,Solarize:te.Solarize,Threshold:ce.Threshold}}),og}var dCe=Px.exports,h$;function d7(){if(h$)return Px.exports;h$=1,Object.defineProperty(dCe,"__esModule",{value:!0});const n=uCe();return Px.exports=n.Konva,Px.exports}var nh=d7();const fCe=Yp(nh),pCe=cae({__proto__:null,default:fCe},[nh]);var f7={exports:{}};const p7=m_e(She);/*!
 * vue-konva v3.0.1 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(n,e){(function(t,r){n.exports=r(p7,d7())})(qf,function(i,t){return function(r){var s={};function o(l){if(s[l])return s[l].exports;var c=s[l]={i:l,l:!1,exports:{}};return r[l].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=r,o.c=s,o.d=function(l,c,u){o.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:u})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,c){if(c&1&&(l=o(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var d in l)o.d(u,d,(function(f){return l[f]}).bind(null,d));return u},o.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(c,"a",c),c},o.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},o.p="",o(o.s=2)}([function(r,s){r.exports=i},function(r,s){r.exports=t},function(r,s,o){r.exports=o(3)},function(r,s,o){o.r(s);var l=o(0),c=o(1),u=o.n(c);function d(D){if(!u.a.autoDrawEnabled){var $=D.getLayer()||D.getStage();$&&$.batchDraw()}}var f={key:!0,style:!0,elm:!0,isRootInsert:!0},m=".vue-konva-event";function g(D,$,B,U){$===void 0&&($={}),B===void 0&&(B={});var Q=D.__konvaNode,Z={},te=!1;for(var ce in B)if(!f[ce]){var pe=ce.slice(0,2)==="on",Ee=B[ce]!==$[ce];if(pe&&Ee){var we=ce.substr(2).toLowerCase();we.substr(0,7)==="content"&&(we="content"+we.substr(7,1).toUpperCase()+we.substr(8)),Q.off(we+m,B[ce])}var he=!$.hasOwnProperty(ce);he&&Q.setAttr(ce,void 0)}for(var _e in $)if(!f[_e]){var Ce=_e.slice(0,2)==="on",K=B[_e]!==$[_e];if(Ce&&K){var j=_e.substr(2).toLowerCase();j.substr(0,7)==="content"&&(j="content"+j.substr(7,1).toUpperCase()+j.substr(8)),$[_e]&&(Q.off(j+m),Q.on(j+m,$[_e]))}!Ce&&($[_e]!==B[_e]||U&&$[_e]!==Q.getAttr(_e))&&(te=!0,Z[_e]=$[_e])}te&&(Q.setAttrs(Z),d(Q))}var y="v";function x(D){function $(B){return B.__konvaNode?B:B.parent?$(B.parent):(console.error("vue-konva error: Can not find parent node"),{})}return $(D.parent)}function b(D){if(D!=null&&D.component)return D.component.__konvaNode||b(D.component.subTree)}function S(D){var $=D.el,B=D.component,U=b(D);if($!=null&&$.tagName&&B&&!U){var Q=$&&$.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+Q+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return U}function _(D){var $=[];return D.children&&D.children.forEach(function(B){!B.component&&Array.isArray(B.children)&&B.children.forEach(function(U){!U.component&&Array.isArray(U.children)?$.push.apply($,U.children):$.push(U)}),B.component&&$.push(B)}),$}function O(D,$){var B=_(D),U=[];B.forEach(function(Z){var te=S(Z);te&&U.push(te)});var Q=!1;U.forEach(function(Z,te){Z.getZIndex()!==te&&(Z.setZIndex(te),Q=!0)}),Q&&d($)}function k(){return k=Object.assign||function(D){for(var $=1;$<arguments.length;$++){var B=arguments[$];for(var U in B)Object.prototype.hasOwnProperty.call(B,U)&&(D[U]=B[U])}return D},k.apply(this,arguments)}var M={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup:function($,B){var U=B.attrs,Q=B.slots,Z=B.expose;B.emits;var te=Object(l.getCurrentInstance)(),ce=Object(l.reactive)({}),pe=Object(l.ref)(null),Ee=new window.Konva.Stage({width:$.config.width,height:$.config.height,container:document.createElement("div")});te.__konvaNode=Ee,_e();function we(){return te.__konvaNode}function he(){return te.__konvaNode}function _e(){var Ce=ce||{},K=k({},U,$.config);g(te,K,Ce,$.__useStrictMode),Object.assign(ce,K)}return Object(l.onMounted)(function(){pe.value.innerHTML="",Ee.container(pe.value),_e()}),Object(l.onUpdated)(function(){_e(),O(te.subTree,Ee)}),Object(l.onBeforeUnmount)(function(){Ee.destroy()}),Object(l.watch)(function(){return $.config},_e,{deep:!0}),Z({getStage:he,getNode:we}),function(){var Ce;return Object(l.h)("div",{ref:pe},(Ce=Q.default)===null||Ce===void 0?void 0:Ce.call(Q))}}};function E(){return E=Object.assign||function(D){for(var $=1;$<arguments.length;$++){var B=arguments[$];for(var U in B)Object.prototype.hasOwnProperty.call(B,U)&&(D[U]=B[U])}return D},E.apply(this,arguments)}var R=".vue-konva-event",P={Group:!0,Layer:!0,FastLayer:!0,Label:!0},I=function(D){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(B,U){var Q=U.attrs,Z=U.slots,te=U.expose,ce=Object(l.getCurrentInstance)(),pe=Object(l.reactive)({}),Ee=window.Konva[D];if(!Ee){console.error("vue-konva error: Can not find node "+D);return}var we=new Ee;ce.__konvaNode=we,ce.vnode.__konvaNode=we,Ce();function he(){return ce.__konvaNode}function _e(){return ce.__konvaNode}function Ce(){var j={};for(var F in ce.vnode.props)F.slice(0,2)==="on"&&(j[F]=ce.vnode.props[F]);var z=pe||{},ee=E({},Q,B.config,j);g(ce,ee,z,B.__useStrictMode),Object.assign(pe,ee)}Object(l.onMounted)(function(){var j=x(ce).__konvaNode;j.add(we),d(we)}),Object(l.onUnmounted)(function(){d(we),we.destroy(),we.off(R)}),Object(l.onUpdated)(function(){Ce(),O(ce.subTree,we)}),Object(l.watch)(function(){return B.config},Ce,{deep:!0}),te({getStage:_e,getNode:he});var K=P[D];return K?function(){var j;return Object(l.h)("template",{},(j=Z.default)===null||j===void 0?void 0:j.call(Z))}:function(){return null}}}};typeof window<"u"&&!window.Konva&&o(1);var T=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],N=[{name:"Stage",component:M}].concat(T.map(function(D){return{name:D,component:I(D)}})),L={install:function($,B){var U=y;B&&B.prefix&&(U=B.prefix),N.forEach(function(Q){$.component(""+U+Q.name,Q.component)})}};s.default=L}]).default})})(f7);var mCe=f7.exports;const m7=Yp(mCe),n_={__name:"KonvaStage",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n,{expose:e}){let i=0;function t(){return i+=1,i}let r={};function s(x){return r[x.uuid]}function o(x,b){if(x.uuid==b)return x;if(x.children)for(let _=0;_<x.children.length;_++){const O=x.children[_];var S=o(O,b);if(S)return S}return null}e({getObject:s});const l=B8(n,"modelValue");function c(x,b,S){var _=pCe[x],O=new _(S);return O.uuid=S.uuid,r[S.uuid]=O,b&&b.add(O),u(O,S),O}function u(x,b){let S=["x","y","width","height","offsetX","offsetY","fill","opacity","stroke","name","rotation","scaleX","scaleY","shadowColor","shadowOffset","shadowBlur","lineJoin","draggable"];for(let _=0;_<S.length;_++){const O=S[_],k=`${O}Change`;x.on(k,M=>{b[O]=M.newVal})}}function d(x,b,S){var _=r[S.uuid];if(_?_.setAttrs(S):_=c(x,b,S),S.children)for(let O=0;O<S.children.length;O++){const k=S.children[O];d(k.type,_,k)}return _}function f(x){if(x.uuid||(x.uuid=t()),x.children)for(let b=0;b<x.children.length;b++){const S=x.children[b];f(S)}}function m(x){var b=o(l.value,x.uuid);if(!b){x.remove();return}var S=[];if(x.getChildren){var _=x.getChildren();for(let k=0;k<_.length;k++){const M=_[k];var O=o(l.value,M.uuid);O||S.push(M)}}for(let k=0;k<S.length;k++)S[k].remove();if(x.getChildren){var _=x.getChildren();for(let M=0;M<_.length;M++){const E=_[M];m(E)}}}function g(x){let b=document.getElementById(l.value.container);var S=l.value.width||b.clientWidth,_=l.value.height||b.clientHeight;x.width(S),x.height(_)}function y(){f(l.value);var x=d("Stage",null,l.value);g(x),m(x)}return Fi(l.value,()=>{y()}),jn(()=>{y()}),Jo(()=>{}),(x,b)=>null}},gCe=Ft("h1",null,"",-1),vCe=Ft("div",{class:"mylabel"},"(x,y)",-1),yCe=Ft("div",{class:"mylabel"},"(x,y)",-1),bCe=Ft("div",{class:"mylabel"},"(offset)",-1),xCe=Ft("div",{class:"mylabel"},"(w,h)",-1),OCe=Ft("div",{class:"mylabel"},"",-1),wCe=Ft("div",{class:"mylabel"},"(scale)",-1),_Ce=Ft("div",{class:"mylabel"},"(0-1)",-1),SCe=Ft("div",{class:"mylabel"},"",-1),CCe=Ft("div",{class:"mylabel"},"shadowOffset",-1),kCe=Ft("div",{class:"mylabel"},"shadowBlur",-1),TCe=Ft("div",{class:"mylabel"},"lineJoin",-1),p2=800,m2=600,MCe={__name:"KonvaMain",setup(n){const e=ot({stageConfig:{width:p2,height:m2,fill:"black"},backgroundConfig:{x:0,y:0,width:p2,height:m2,fill:"#fefae0",stroke:"black",strokeWidth:1},rectConfig:{x:100,y:100,gx:100,gy:100,width:200,height:100,offsetX:0,offsetY:0,fill:"#dda15e",opacity:.8,stroke:"black",name:"rect",rotation:0,scaleX:1,scaleY:1,shadowColor:"#A78EEB",shadowOffset:{x:3,y:3},shadowBlur:3,lineJoin:"miter",draggable:!0}}),i=ot(null),t=ot(null),r=ot(null);function s(){if(i.value){var o=i.value.getNode();e.value.rectConfig.x=o.x(),e.value.rectConfig.y=o.y(),e.value.rectConfig.gx=o.absolutePosition().x,e.value.rectConfig.gy=o.absolutePosition().y,e.value.rectConfig.offsetX=o.offsetX(),e.value.rectConfig.offsetY=o.offsetY(),e.value.rectConfig.width=o.width(),e.value.rectConfig.height=o.height(),e.value.rectConfig.rotation=o.rotation(),e.value.rectConfig.rotation=o.rotation(),e.value.rectConfig.scaleX=o.scaleX(),e.value.rectConfig.scaleY=o.scaleY(),requestAnimationFrame(s)}}return jn(()=>{requestAnimationFrame(s);var o=t.value.getNode(),l=r.value.getNode();o.on("click tap",function(c){var d,f;if(!c.target.hasName("rect")){(d=o.findOne("Transformer"))==null||d.destroy(),l.draw();return}(f=o.findOne("Transformer"))==null||f.destroy();var u=new nh.Transformer;l.add(u),u.nodes([c.target]),l.draw()}),window.stage=o,window.coordConfig=e,window.VueKonva=m7}),(o,l)=>{const c=Pt("v-rect"),u=Pt("v-arrow"),d=Pt("v-layer"),f=Pt("v-stage"),m=Pt("Col"),g=Pt("Divider"),y=Pt("InputNumber"),x=Pt("Row"),b=Pt("Slider"),S=Pt("ColorPicker"),_=Pt("Option"),O=Pt("Select"),k=Pt("Card");return ai(),on(hn,null,[Re(k,null,{title:Je(()=>[gCe]),default:Je(()=>[Re(x,null,{default:Je(()=>[Re(m,null,{default:Je(()=>[Ft("div",null,[Re(f,{ref_key:"myStageRef",ref:t,config:e.value.stageConfig},{default:Je(()=>[Re(d,{ref_key:"myLayerRef",ref:r},{default:Je(()=>[Re(c,{config:e.value.backgroundConfig},null,8,["config"]),Re(u,{config:{points:[0,0,p2,0],fill:"black",stroke:"black"}},null,8,["config"]),Re(u,{config:{points:[0,0,0,m2],fill:"black",stroke:"black"}},null,8,["config"]),Re(c,{ref_key:"myRectRef",ref:i,config:e.value.rectConfig,__useStrictMode:!0},null,8,["config"])]),_:1},512)]),_:1},8,["config"])])]),_:1}),Re(m,null,{default:Je(()=>[Ft("div",null,[Re(x,null,{default:Je(()=>[Re(m,null,{default:Je(()=>[Re(g,null,{default:Je(()=>[mn("")]),_:1}),Re(x,null,{default:Je(()=>[vCe,Re(y,{modelValue:e.value.rectConfig.x,"onUpdate:modelValue":l[0]||(l[0]=M=>e.value.rectConfig.x=M),step:10},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.y,"onUpdate:modelValue":l[1]||(l[1]=M=>e.value.rectConfig.y=M),step:10},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[yCe,Re(y,{modelValue:e.value.rectConfig.gx,"onUpdate:modelValue":l[2]||(l[2]=M=>e.value.rectConfig.gx=M),readonly:!0},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.gy,"onUpdate:modelValue":l[3]||(l[3]=M=>e.value.rectConfig.gy=M),readonly:!0},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[bCe,Re(y,{modelValue:e.value.rectConfig.offsetX,"onUpdate:modelValue":l[4]||(l[4]=M=>e.value.rectConfig.offsetX=M),step:10},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.offsetY,"onUpdate:modelValue":l[5]||(l[5]=M=>e.value.rectConfig.offsetY=M),step:10},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[xCe,Re(y,{modelValue:e.value.rectConfig.width,"onUpdate:modelValue":l[6]||(l[6]=M=>e.value.rectConfig.width=M),step:10},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.height,"onUpdate:modelValue":l[7]||(l[7]=M=>e.value.rectConfig.height=M),step:10},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[OCe,Re(y,{modelValue:e.value.rectConfig.rotation,"onUpdate:modelValue":l[8]||(l[8]=M=>e.value.rectConfig.rotation=M),step:10},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[wCe,Re(y,{modelValue:e.value.rectConfig.scaleX,"onUpdate:modelValue":l[9]||(l[9]=M=>e.value.rectConfig.scaleX=M),step:.1},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.scaleY,"onUpdate:modelValue":l[10]||(l[10]=M=>e.value.rectConfig.scaleY=M),step:.1},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[_Ce,Re(b,{modelValue:e.value.rectConfig.opacity,"onUpdate:modelValue":l[11]||(l[11]=M=>e.value.rectConfig.opacity=M),min:0,max:1,step:.05,style:{width:"160px"}},null,8,["modelValue"])]),_:1}),Re(g,null,{default:Je(()=>[mn("")]),_:1}),Re(x,null,{default:Je(()=>[SCe,Re(S,{modelValue:e.value.rectConfig.shadowColor,"onUpdate:modelValue":l[12]||(l[12]=M=>e.value.rectConfig.shadowColor=M)},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[CCe,Re(y,{modelValue:e.value.rectConfig.shadowOffsetX,"onUpdate:modelValue":l[13]||(l[13]=M=>e.value.rectConfig.shadowOffsetX=M)},null,8,["modelValue"]),Re(y,{modelValue:e.value.rectConfig.shadowOffsetY,"onUpdate:modelValue":l[14]||(l[14]=M=>e.value.rectConfig.shadowOffsetY=M)},null,8,["modelValue"])]),_:1}),Re(x,null,{default:Je(()=>[kCe,Re(y,{modelValue:e.value.rectConfig.shadowBlur,"onUpdate:modelValue":l[15]||(l[15]=M=>e.value.rectConfig.shadowBlur=M)},null,8,["modelValue"])]),_:1}),Re(g,null,{default:Je(()=>[mn("")]),_:1}),Re(x,null,{default:Je(()=>[TCe,Re(O,{modelValue:e.value.rectConfig.lineJoin,"onUpdate:modelValue":l[16]||(l[16]=M=>e.value.rectConfig.lineJoin=M),style:{width:"160px"}},{default:Je(()=>[Re(_,{value:"miter"},{default:Je(()=>[mn("miter")]),_:1}),Re(_,{value:"bevel"},{default:Je(()=>[mn("bevel")]),_:1}),Re(_,{value:"round"},{default:Je(()=>[mn("round")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),Re(n_),Re(k)],64)}}},ECe=["src"],Gg={__name:"EasyLink",props:{link:String,width:Number,height:Number},setup(n){const e=n,i=ot(null);return jn(()=>{var t=e.width?`${t}px`:"100%",r=e.height?`${r}px`:"100vh";i.value={width:t,height:r}}),(t,r)=>(ai(),on("iframe",{src:e.link,style:Ah(i.value)},null,12,ECe))}},PCe={__name:"GridSquare",setup(n){const e=Fn(null),i=Fn(null),t=Fn(null),r=Fn(null),s=ot({rows:5,cols:8,boxWidth:100,boxHeight:50,offsetX:-400,offsetY:-125});Fi(s.value,()=>{c()});const o=Fn(null);function l(){var d=t.value.getNode(),f=r.value.getNode(),m=d.getChildren();for(let S=0;S<s.value.rows;S++)for(let _=0;_<s.value.cols;_++){var g=S*s.value.cols+_,y=m[g];y.x(_*s.value.boxWidth+s.value.offsetX),y.y(S*s.value.boxHeight+s.value.offsetY)}var x=f.findOne("#arrowx");x.points([0,0,s.value.boxWidth*s.value.cols+s.value.offsetX,0]);var b=f.findOne("#arrowy");b.points([0,0,0,s.value.boxHeight*s.value.rows+s.value.offsetY])}function c(){var d=i.value.getNode(),f=t.value.getNode(),m=r.value.getNode();f.removeChildren(),m.removeChildren();for(let _=0;_<s.value.rows;_++)for(let O=0;O<s.value.cols;O++){var g=new nh.Group({id:`${_}_${O}`});f.add(g);var y=new nh.Rect({x:0,y:0,width:s.value.boxWidth,height:s.value.boxHeight,stroke:"black",strokeWidth:1,draggable:!0,id:"box"});g.add(y);var x=new nh.Text({text:`(${_},${O})`,x:0,y:0,width:s.value.boxWidth,height:s.value.boxHeight,align:"center",verticalAlign:"middle",id:"text"});g.add(x)}var b=new nh.Arrow({x:0,y:0,points:[0,0,d.width(),0],pointerLength:20,pointerWidth:20,fill:"red",stroke:"red",strokeWidth:4,id:"arrowx"});m.add(b);var S=new nh.Arrow({x:0,y:0,points:[0,0,0,d.height()],pointerLength:20,pointerWidth:20,fill:"green",stroke:"green",strokeWidth:4,id:"arrowy"});m.add(S),l()}jn(()=>{var d=i.value.getNode(),f=t.value.getNode();d.width(e.value.clientWidth),d.height(e.value.clientHeight),d.x(e.value.clientWidth/2),d.y(e.value.clientHeight/2),window.boxConfig=s,window.stage=d,window.layer=f,c(),d.on("wheel",m=>{m.evt.preventDefault();var g=d.scaleX(),y=d.getPointerPosition(),x={x:(y.x-d.x())/g,y:(y.y-d.y())/g};let b=m.evt.deltaY>0?1:-1;m.evt.ctrlKey&&(b=-b);const S=1.1;var _=b<0?g*S:g/S;d.scale({x:_,y:_});var O={x:y.x-x.x*_,y:y.y-x.y*_};d.position(O)}),d.on("mousemove",m=>{var g=d.getPointerPosition(),y=Math.floor((g.y-d.y()-s.value.offsetY)/s.value.boxHeight),x=Math.floor((g.x-d.x()-s.value.offsetX)/s.value.boxWidth),b=`#${y}_${x}`;if(o.value){var S=f.findOne(o.value);u(S,!1)}var S=f.findOne(b);u(S,!0),o.value=b})});function u(d,f){if(d){var m=d.findOne("#box");f?(console.log(m.fill()),m.fill("red")):m.fill(null)}}return(d,f)=>{const m=Pt("v-layer"),g=Pt("v-stage"),y=Pt("Col"),x=Pt("InputNumber"),b=Pt("FormItem"),S=Pt("Form"),_=Pt("Row");return ai(),Ur(_,null,{default:Je(()=>[Re(y,{span:18},{default:Je(()=>[Ft("div",{class:"boxborder",ref_key:"boxParentRef",ref:e},[Re(g,{ref_key:"boxStageRef",ref:i,config:{width:100,height:100,draggable:!0}},{default:Je(()=>[Re(m,{ref_key:"arrowLayerRef",ref:r},null,512),Re(m,{ref_key:"boxLayerRef",ref:t},null,512)]),_:1},512)],512)]),_:1}),Re(y,{span:6},{default:Je(()=>[Re(S,{"label-width":100},{default:Je(()=>[Re(b,{label:" / ",style:{width:"100%"}},{default:Je(()=>[Re(x,{modelValue:s.value.rows,"onUpdate:modelValue":f[0]||(f[0]=O=>s.value.rows=O)},null,8,["modelValue"]),Re(x,{modelValue:s.value.cols,"onUpdate:modelValue":f[1]||(f[1]=O=>s.value.cols=O)},null,8,["modelValue"])]),_:1}),Re(b,{label:""},{default:Je(()=>[Re(x,{modelValue:s.value.boxWidth,"onUpdate:modelValue":f[2]||(f[2]=O=>s.value.boxWidth=O)},null,8,["modelValue"]),Re(x,{modelValue:s.value.boxHeight,"onUpdate:modelValue":f[3]||(f[3]=O=>s.value.boxHeight=O)},null,8,["modelValue"])]),_:1}),Re(b,{label:""},{default:Je(()=>[Re(x,{modelValue:s.value.offsetX,"onUpdate:modelValue":f[4]||(f[4]=O=>s.value.offsetX=O)},null,8,["modelValue"]),Re(x,{modelValue:s.value.offsetY,"onUpdate:modelValue":f[5]||(f[5]=O=>s.value.offsetY=O)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},ACe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},RCe={__name:"GridParallelogramH",setup(n){const e=ot(100),i=ot(100),t=ot(60),r=ot(4),s=ot(5),o=gn(()=>{var d=[];const f=e.value,m=i.value,g=t.value*Math.PI/180;for(let y=0;y<r.value;y++)for(let x=0;x<s.value;x++){const b=f*x,S=m*Math.sin(g)*y,_=b+f,O=S,k=_+m*Math.cos(g),M=(y+1)*m*Math.sin(g),E=b+m*Math.cos(g),P={type:"Line",points:[b,S,_,O,k,M,E,M],fill:"#00D2FF",stroke:"black",strokeWidth:1,closed:!0,name:`${y}_${x} line`};d.push(P)}return d}),l=gn(()=>[{type:"Arrow",points:[0,0,e.value*s.value,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,i.value*r.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),c=ot(null),u=ot({container:"container",draggable:!0,x:100,y:600,scaleY:-1,children:[{type:"Layer",children:o},{type:"Layer",children:l}]});return jn(()=>{window.shapes=o;var d=c.value.getObject(u.value),f=null;d.on("mousemove",m=>{f&&f.fill("#00D2FF"),m.target.hasName("line")&&(m.target.fill("red"),f=m.target)})}),(d,f)=>{const m=Pt("Col"),g=Pt("InputNumber"),y=Pt("FormItem"),x=Pt("Slider"),b=Pt("Form"),S=Pt("Row");return ai(),Ur(S,null,{default:Je(()=>[Re(m,{span:12},{default:Je(()=>[Ft("div",ACe,[Re(n_,{ref_key:"stageRef",ref:c,modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=_=>u.value=_)},null,8,["modelValue"])])]),_:1}),Re(m,{span:4},{default:Je(()=>[Re(b,{"label-width":100},{default:Je(()=>[Re(y,{label:"(px)"},{default:Je(()=>[Re(g,{modelValue:e.value,"onUpdate:modelValue":f[1]||(f[1]=_=>e.value=_)},null,8,["modelValue"])]),_:1}),Re(y,{label:"(px)"},{default:Je(()=>[Re(g,{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=_=>i.value=_)},null,8,["modelValue"])]),_:1}),Re(y,{label:""},{default:Je(()=>[Re(x,{modelValue:t.value,"onUpdate:modelValue":f[3]||(f[3]=_=>t.value=_),min:0,max:90},null,8,["modelValue"])]),_:1}),Re(y,{label:" / "},{default:Je(()=>[Re(g,{modelValue:r.value,"onUpdate:modelValue":f[4]||(f[4]=_=>r.value=_)},null,8,["modelValue"]),Re(g,{modelValue:s.value,"onUpdate:modelValue":f[5]||(f[5]=_=>s.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},ICe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},DCe={__name:"GridParallelogramV",setup(n){const e=ot(130),i=ot(100),t=ot(60),r=ot(4),s=ot(10),o=gn(()=>{var d=[];const f=e.value,m=i.value;t.value*Math.PI/180;for(let y=0;y<r.value;y++)for(let x=0;x<s.value;x++){let b=null,S,_,O,k,M,E,R,P;S=f*x+f/2,_=m*y,O=S+f/2,k=_+m/2,M=S,E=_+m,R=f*x,P=k,S-=f*Math.floor(x/2),O-=f*Math.floor(x/2),M-=f*Math.floor(x/2),R-=f*Math.floor(x/2),x%2==1&&(S-=f/2,O-=f/2,M-=f/2,R-=f/2,_+=m/2,k+=m/2,E+=m/2,P+=m/2),_*=-1,k*=-1,E*=-1,P*=-1,b={type:"Line",points:[S,_,O,k,M,E,R,P],fill:"#c9ada7",stroke:"black",strokeWidth:1,closed:!0,name:`${y}_${x} line`,id:`${y}_${x}`},d.push(b);var g={type:"Text",text:`(${y},${x})`,x:R,y:k,align:"center",width:f,height:m};d.push(g)}return d}),l=gn(()=>[{type:"Arrow",points:[0,0,e.value*s.value/2,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,-i.value*r.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),c=ot(null),u=ot({container:"container",draggable:!0,x:100,y:600,children:[{type:"Layer",children:o},{type:"Layer",children:l}]});return jn(()=>{window.shapes=o;var d=c.value.getObject(u.value),f=null;d.on("mousemove",m=>{f&&f.fill("#c9ada7"),m.target.hasName("line")&&(m.target.fill("red"),f=m.target)})}),(d,f)=>{const m=Pt("Col"),g=Pt("Slider"),y=Pt("FormItem"),x=Pt("InputNumber"),b=Pt("Form"),S=Pt("Row");return ai(),Ur(S,null,{default:Je(()=>[Re(m,{span:12},{default:Je(()=>[Ft("div",ICe,[Re(n_,{ref_key:"stageRef",ref:c,modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=_=>u.value=_)},null,8,["modelValue"])])]),_:1}),Re(m,{span:4},{default:Je(()=>[Re(b,{"label-width":100},{default:Je(()=>[Re(y,{label:"(px)"},{default:Je(()=>[Re(g,{modelValue:e.value,"onUpdate:modelValue":f[1]||(f[1]=_=>e.value=_),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Re(y,{label:"(px)"},{default:Je(()=>[Re(g,{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=_=>i.value=_),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Re(y,{label:" / "},{default:Je(()=>[Re(x,{modelValue:r.value,"onUpdate:modelValue":f[3]||(f[3]=_=>r.value=_)},null,8,["modelValue"]),Re(x,{modelValue:s.value,"onUpdate:modelValue":f[4]||(f[4]=_=>s.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},NCe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},$Ce={__name:"KonvaStageTest",setup(n){const e=ot([{type:"Rect",x:100,y:100,width:200,height:100,fill:"red",draggable:!0}]),i=ot({type:"Stage",container:"container",wheel:!0,children:[{type:"Layer",children:e}]}),t=Fn(null);function r(s){s=="Rect"?e.value.push({type:"Rect",width:200,height:100,fill:"green",draggable:!0}):s=="Circle"?e.value.push({type:"Circle",radius:80,fill:"green",draggable:!0}):s=="Star"&&e.value.push({type:"Star",innerRadius:40,outerRadius:70,fill:"yellow",stroke:"black",strokeWidth:4,draggable:!0}),console.log(s)}return jn(()=>{var s=t.value.getObject(i.value);s.on("wheel",o=>{o.evt.preventDefault();var l=s.scaleX(),c=s.getPointerPosition(),u={x:(c.x-s.x())/l,y:(c.y-s.y())/l};let d=o.evt.deltaY>0?1:-1;o.evt.ctrlKey&&(d=-d);var f=1.1,m=d<0?l*f:l/f;s.scale({x:m,y:m});var g={x:c.x-u.x*m,y:c.y-u.y*m};s.position(g)})}),(s,o)=>{const l=Pt("Col"),c=Pt("Icon"),u=Pt("Button"),d=Pt("DropdownItem"),f=Pt("DropdownMenu"),m=Pt("Dropdown"),g=Pt("Space"),y=Pt("FormItem"),x=Pt("Divider"),b=Pt("InputNumber"),S=Pt("Form"),_=Pt("Row");return ai(),Ur(_,null,{default:Je(()=>[Re(l,{span:12},{default:Je(()=>[Ft("div",NCe,[Re(n_,{ref_key:"stageRef",ref:t,modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=O=>i.value=O)},null,8,["modelValue"])])]),_:1}),Re(l,{span:12},{default:Je(()=>[Re(S,{"label-width":100},{default:Je(()=>[Re(y,{label:""},{default:Je(()=>[Re(g,null,{default:Je(()=>[Re(m,{onOnClick:r},{list:Je(()=>[Re(f,null,{default:Je(()=>[Re(d,{name:"Rect"},{default:Je(()=>[mn("")]),_:1}),Re(d,{name:"Circle"},{default:Je(()=>[mn("")]),_:1}),Re(d,{name:"Star"},{default:Je(()=>[mn("")]),_:1})]),_:1})]),default:Je(()=>[Re(u,{type:"primary"},{default:Je(()=>[mn("  "),Re(c,{type:"ios-arrow-down"})]),_:1})]),_:1})]),_:1})]),_:1}),Re(x),(ai(!0),on(hn,null,yh(e.value,O=>(ai(),Ur(y,{label:"x/y"},{default:Je(()=>[Re(b,{modelValue:O.x,"onUpdate:modelValue":k=>O.x=k},null,8,["modelValue","onUpdate:modelValue"]),Re(b,{modelValue:O.y,"onUpdate:modelValue":k=>O.y=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}},VCe=Ft("h1",null,"",-1),LCe={__name:"TrigoCalc",setup(n){const e=ot(0),i=ot(0),t=ot(0),r=ot(0),s=ot(0),o=ot(0),l=ot(0);let c=!1;Fi(i,()=>{u(i,m=>m)}),Fi(t,()=>{u(t,m=>m*180/Math.PI)}),Fi(r,()=>{u(r,m=>Math.asin(m))}),Fi(s,()=>{u(s,m=>Math.acos(m))}),Fi(o,()=>{u(o,m=>Math.atan(m))}),Fi(l,()=>{u(l,m=>Math.atan(1/m))});function u(m,g){if(c)return;const y=d(m.value);e.value=g(y)}function d(m){let g=parseFloat(m);return g||(g=0),Math.abs(g)<.001&&(g=0),g}Fi(e,f);async function f(){c=!0;const m=e.value*Math.PI/180;i.value=e.value,t.value=m,r.value=Math.sin(m),s.value=Math.cos(m),o.value=Math.tan(m),o.value?l.value=1/o.value:l.value=0,i.value=parseFloat(i.value.toFixed(3)),t.value=parseFloat(t.value.toFixed(3)),r.value=parseFloat(r.value.toFixed(3)),s.value=parseFloat(s.value.toFixed(3)),o.value=parseFloat(o.value.toFixed(3)),l.value=parseFloat(l.value.toFixed(3)),await Bp(),c=!1}return jn(()=>{e.value=30}),(m,g)=>{const y=Pt("Input"),x=Pt("Col"),b=Pt("Row");return ai(),Ur(b,null,{default:Je(()=>[Re(x,{span:4,offset:10},{default:Je(()=>[VCe,Re(y,{type:"number",modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=S=>i.value=S)},{prepend:Je(()=>[mn("")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:t.value,"onUpdate:modelValue":g[1]||(g[1]=S=>t.value=S)},{prepend:Je(()=>[mn("")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:r.value,"onUpdate:modelValue":g[2]||(g[2]=S=>r.value=S)},{prepend:Je(()=>[mn("")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:s.value,"onUpdate:modelValue":g[3]||(g[3]=S=>s.value=S)},{prepend:Je(()=>[mn("")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:o.value,"onUpdate:modelValue":g[4]||(g[4]=S=>o.value=S)},{prepend:Je(()=>[mn("")]),_:1},8,["modelValue"]),Re(y,{type:"number",modelValue:l.value,"onUpdate:modelValue":g[5]||(g[5]=S=>l.value=S)},{prepend:Je(()=>[mn("")]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};class zi{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,t){[e,i]=Tp(this,e,i);let r=[];return this.decompose(0,e,r,2),t.length&&t.decompose(0,t.length,r,3),this.decompose(i,this.length,r,1),qa.from(r,this.length-(i-e)+t.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){[e,i]=Tp(this,e,i);let t=[];return this.decompose(e,i,t,0),qa.from(t,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),t=this.length-this.scanIdentical(e,-1),r=new A0(this),s=new A0(e);for(let o=i,l=i;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=t)return!0}}iter(e=1){return new A0(this,e)}iterRange(e,i=this.length){return new g7(this,e,i)}iterLines(e,i){let t;if(e==null)t=this.iter();else{i==null&&(i=this.lines+1);let r=this.line(e).from;t=this.iterRange(r,Math.max(r,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new v7(t)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?zi.empty:e.length<=32?new Gn(e):qa.from(Gn.split(e,[]))}}class Gn extends zi{constructor(e,i=BCe(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,t,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((i?t:l)>=e)return new UCe(r,l,t,o);r=l+1,t++}}decompose(e,i,t,r){let s=e<=0&&i>=this.length?this:new Gn(u$(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(r&1){let o=t.pop(),l=Ax(s.text,o.text.slice(),0,s.length);if(l.length<=32)t.push(new Gn(l,o.length+s.length));else{let c=l.length>>1;t.push(new Gn(l.slice(0,c)),new Gn(l.slice(c)))}}else t.push(s)}replace(e,i,t){if(!(t instanceof Gn))return super.replace(e,i,t);[e,i]=Tp(this,e,i);let r=Ax(this.text,Ax(t.text,u$(this.text,0,e)),i),s=this.length+t.length-(i-e);return r.length<=32?new Gn(r,s):qa.from(Gn.split(r,[]),s)}sliceString(e,i=this.length,t=`
`){[e,i]=Tp(this,e,i);let r="";for(let s=0,o=0;s<=i&&o<this.text.length;o++){let l=this.text[o],c=s+l.length;s>e&&o&&(r+=t),e<c&&i>s&&(r+=l.slice(Math.max(0,e-s),i-s)),s=c+1}return r}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let t=[],r=-1;for(let s of e)t.push(s),r+=s.length+1,t.length==32&&(i.push(new Gn(t,r)),t=[],r=-1);return r>-1&&i.push(new Gn(t,r)),i}}class qa extends zi{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,i,t,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,c=t+o.lines-1;if((i?c:l)>=e)return o.lineInner(e,i,t,r);r=l+1,t=c+1}}decompose(e,i,t,r){for(let s=0,o=0;o<=i&&s<this.children.length;s++){let l=this.children[s],c=o+l.length;if(e<=c&&i>=o){let u=r&((o<=e?1:0)|(c>=i?2:0));o>=e&&c<=i&&!u?t.push(l):l.decompose(e-o,i-o,t,u)}o=c+1}}replace(e,i,t){if([e,i]=Tp(this,e,i),t.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&i<=l){let c=o.replace(e-s,i-s,t),u=this.lines-o.lines+c.lines;if(c.lines<u>>4&&c.lines>u>>6){let d=this.children.slice();return d[r]=c,new qa(d,this.length-(i-e)+t.length)}return super.replace(s,l,c)}s=l+1}return super.replace(e,i,t)}sliceString(e,i=this.length,t=`
`){[e,i]=Tp(this,e,i);let r="";for(let s=0,o=0;s<this.children.length&&o<=i;s++){let l=this.children[s],c=o+l.length;o>e&&s&&(r+=t),e<c&&i>o&&(r+=l.sliceString(e-o,i-o,t)),o=c+1}return r}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof qa))return 0;let t=0,[r,s,o,l]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=i,s+=i){if(r==o||s==l)return t;let c=this.children[r],u=e.children[s];if(c!=u)return t+c.scanIdentical(u,i);t+=c.length+1}}static from(e,i=e.reduce((t,r)=>t+r.length+1,-1)){let t=0;for(let g of e)t+=g.lines;if(t<32){let g=[];for(let y of e)y.flatten(g);return new Gn(g,i)}let r=Math.max(32,t>>5),s=r<<1,o=r>>1,l=[],c=0,u=-1,d=[];function f(g){let y;if(g.lines>s&&g instanceof qa)for(let x of g.children)f(x);else g.lines>o&&(c>o||!c)?(m(),l.push(g)):g instanceof Gn&&c&&(y=d[d.length-1])instanceof Gn&&g.lines+y.lines<=32?(c+=g.lines,u+=g.length+1,d[d.length-1]=new Gn(y.text.concat(g.text),y.length+1+g.length)):(c+g.lines>r&&m(),c+=g.lines,u+=g.length+1,d.push(g))}function m(){c!=0&&(l.push(d.length==1?d[0]:qa.from(d,u)),u=-1,c=d.length=0)}for(let g of e)f(g);return m(),l.length==1?l[0]:new qa(l,i)}}zi.empty=new Gn([""],0);function BCe(n){let e=-1;for(let i of n)e+=i.length+1;return e}function Ax(n,e,i=0,t=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=t;s++){let l=n[s],c=r+l.length;c>=i&&(c>t&&(l=l.slice(0,t-r)),r<i&&(l=l.slice(i-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=c+1}return e}function u$(n,e,i){return Ax(n,[""],e,i)}class A0{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof Gn?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let t=this.nodes.length-1,r=this.nodes[t],s=this.offsets[t],o=s>>1,l=r instanceof Gn?r.text.length:r.children.length;if(o==(i>0?l:0)){if(t==0)return this.done=!0,this.value="",this;i>0&&this.offsets[t-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(i>0?0:1)){if(this.offsets[t]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Gn){let c=r.text[o+(i<0?-1:0)];if(this.offsets[t]+=i,c.length>Math.max(0,e))return this.value=e==0?c:i>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[o+(i<0?-1:0)];e>c.length?(e-=c.length,this.offsets[t]+=i):(i<0&&this.offsets[t]--,this.nodes.push(c),this.offsets.push(i>0?1:(c instanceof Gn?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class g7{constructor(e,i,t){this.value="",this.done=!1,this.cursor=new A0(e,i>t?-1:1),this.pos=i>t?e.length:0,this.from=Math.min(i,t),this.to=Math.max(i,t)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let t=i<0?this.pos-this.from:this.to-this.pos;e>t&&(e=t),t-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*i,this.value=r.length<=t?r:i<0?r.slice(r.length-t):r.slice(0,t),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class v7{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:t,value:r}=this.inner.next(e);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):t?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(zi.prototype[Symbol.iterator]=function(){return this.iter()},A0.prototype[Symbol.iterator]=g7.prototype[Symbol.iterator]=v7.prototype[Symbol.iterator]=function(){return this});class UCe{constructor(e,i,t,r){this.from=e,this.to=i,this.number=t,this.text=r}get length(){return this.to-this.from}}function Tp(n,e,i){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,i))]}let Zf="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Zf.length;n++)Zf[n]+=Zf[n-1];function FCe(n){for(let e=1;e<Zf.length;e+=2)if(Zf[e]>n)return Zf[e-1]<=n;return!1}function d$(n){return n>=127462&&n<=127487}const f$=8205;function Lr(n,e,i=!0,t=!0){return(i?y7:zCe)(n,e,t)}function y7(n,e,i){if(e==n.length)return e;e&&b7(n.charCodeAt(e))&&x7(n.charCodeAt(e-1))&&e--;let t=Dr(n,e);for(e+=zo(t);e<n.length;){let r=Dr(n,e);if(t==f$||r==f$||i&&FCe(r))e+=zo(r),t=r;else if(d$(r)){let s=0,o=e-2;for(;o>=0&&d$(Dr(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function zCe(n,e,i){for(;e>0;){let t=y7(n,e-2,i);if(t<e)return t;e--}return 0}function b7(n){return n>=56320&&n<57344}function x7(n){return n>=55296&&n<56320}function Dr(n,e){let i=n.charCodeAt(e);if(!x7(i)||e+1==n.length)return i;let t=n.charCodeAt(e+1);return b7(t)?(i-55296<<10)+(t-56320)+65536:i}function p3(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function zo(n){return n<65536?1:2}const VT=/\r\n?|\n/;var ys=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ys||(ys={}));class nl{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let t=this.sections[i+1];e+=t<0?this.sections[i]:t}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,t=0,r=0;i<this.sections.length;){let s=this.sections[i++],o=this.sections[i++];o<0?(e(t,r,s),r+=s):r+=o,t+=s}}iterChangedRanges(e,i=!1){LT(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let t=this.sections[i++],r=this.sections[i++];r<0?e.push(t,r):e.push(r,t)}return new nl(e)}composeDesc(e){return this.empty?e:e.empty?this:O7(this,e)}mapDesc(e,i=!1){return e.empty?this:BT(this,e,i)}mapPos(e,i=-1,t=ys.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],c=this.sections[o++],u=r+l;if(c<0){if(u>e)return s+(e-r);s+=l}else{if(t!=ys.Simple&&u>=e&&(t==ys.TrackDel&&r<e&&u>e||t==ys.TrackBefore&&r<e||t==ys.TrackAfter&&u>e))return null;if(u>e||u==e&&i<0&&!l)return e==r||i<0?s:s+c;s+=c}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,i=e){for(let t=0,r=0;t<this.sections.length&&r<=i;){let s=this.sections[t++],o=this.sections[t++],l=r+s;if(o>=0&&r<=i&&l>=e)return r<e&&l>i?"cover":!0;r=l}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let t=this.sections[i++],r=this.sections[i++];e+=(e?" ":"")+t+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new nl(e)}static create(e){return new nl(e)}}class ur extends nl{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return LT(this,(i,t,r,s,o)=>e=e.replace(r,r+(t-i),o),!1),e}mapDesc(e,i=!1){return BT(this,e,i,!0)}invert(e){let i=this.sections.slice(),t=[];for(let r=0,s=0;r<i.length;r+=2){let o=i[r],l=i[r+1];if(l>=0){i[r]=l,i[r+1]=o;let c=r>>1;for(;t.length<c;)t.push(zi.empty);t.push(o?e.slice(s,s+o):zi.empty)}s+=o}return new ur(i,t)}compose(e){return this.empty?e:e.empty?this:O7(this,e,!0)}map(e,i=!1){return e.empty?this:BT(this,e,i,!0)}iterChanges(e,i=!1){LT(this,e,i)}get desc(){return nl.create(this.sections)}filter(e){let i=[],t=[],r=[],s=new mv(this);e:for(let o=0,l=0;;){let c=o==e.length?1e9:e[o++];for(;l<c||l==c&&s.len==0;){if(s.done)break e;let d=Math.min(s.len,c-l);Zr(r,d,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;Zr(i,d,f),f>0&&ah(t,i,s.text),s.forward(d),l+=d}let u=e[o++];for(;l<u;){if(s.done)break e;let d=Math.min(s.len,u-l);Zr(i,d,-1),Zr(r,d,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(d),l+=d}}return{changes:new ur(i,t),filtered:nl.create(r)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let t=this.sections[i],r=this.sections[i+1];r<0?e.push(t):r==0?e.push([t]):e.push([t].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,t){let r=[],s=[],o=0,l=null;function c(d=!1){if(!d&&!r.length)return;o<i&&Zr(r,i-o,-1);let f=new ur(r,s);l=l?l.compose(f.map(l)):f,r=[],s=[],o=0}function u(d){if(Array.isArray(d))for(let f of d)u(f);else if(d instanceof ur){if(d.length!=i)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${i})`);c(),l=l?l.compose(d.map(l)):d}else{let{from:f,to:m=f,insert:g}=d;if(f>m||f<0||m>i)throw new RangeError(`Invalid change range ${f} to ${m} (in doc of length ${i})`);let y=g?typeof g=="string"?zi.of(g.split(t||VT)):g:zi.empty,x=y.length;if(f==m&&x==0)return;f<o&&c(),f>o&&Zr(r,f-o,-1),Zr(r,m-f,x),ah(s,r,y),o=m}}return u(e),c(!l),l}static empty(e){return new ur(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],t=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")i.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)i.push(s[0],0);else{for(;t.length<r;)t.push(zi.empty);t[r]=zi.of(s.slice(1)),i.push(s[0],t[r].length)}}}return new ur(i,t)}static createSet(e,i){return new ur(e,i)}}function Zr(n,e,i,t=!1){if(e==0&&i<=0)return;let r=n.length-2;r>=0&&i<=0&&i==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=i:t?(n[r]+=e,n[r+1]+=i):n.push(e,i)}function ah(n,e,i){if(i.length==0)return;let t=e.length-2>>1;if(t<n.length)n[n.length-1]=n[n.length-1].append(i);else{for(;n.length<t;)n.push(zi.empty);n.push(i)}}function LT(n,e,i){let t=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let l=n.sections[o++],c=n.sections[o++];if(c<0)r+=l,s+=l;else{let u=r,d=s,f=zi.empty;for(;u+=l,d+=c,c&&t&&(f=f.append(t[o-2>>1])),!(i||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],c=n.sections[o++];e(r,u,s,d,f),r=u,s=d}}}function BT(n,e,i,t=!1){let r=[],s=t?[]:null,o=new mv(n),l=new mv(e);for(let c=-1;;)if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);Zr(r,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||c==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!i))){let u=l.len;for(Zr(r,l.ins,-1);u;){let d=Math.min(o.len,u);o.ins>=0&&c<o.i&&o.len<=d&&(Zr(r,0,o.ins),s&&ah(s,r,o.text),c=o.i),o.forward(d),u-=d}l.next()}else if(o.ins>=0){let u=0,d=o.len;for(;d;)if(l.ins==-1){let f=Math.min(d,l.len);u+=f,d-=f,l.forward(f)}else if(l.ins==0&&l.len<d)d-=l.len,l.next();else break;Zr(r,u,c<o.i?o.ins:0),s&&c<o.i&&ah(s,r,o.text),c=o.i,o.forward(o.len-d)}else{if(o.done&&l.done)return s?ur.createSet(r,s):nl.create(r);throw new Error("Mismatched change set lengths")}}function O7(n,e,i=!1){let t=[],r=i?[]:null,s=new mv(n),o=new mv(e);for(let l=!1;;){if(s.done&&o.done)return r?ur.createSet(t,r):nl.create(t);if(s.ins==0)Zr(t,s.len,0,l),s.next();else if(o.len==0&&!o.done)Zr(t,0,o.ins,l),r&&ah(r,t,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let c=Math.min(s.len2,o.len),u=t.length;if(s.ins==-1){let d=o.ins==-1?-1:o.off?0:o.ins;Zr(t,c,d,l),r&&d&&ah(r,t,o.text)}else o.ins==-1?(Zr(t,s.off?0:s.len,c,l),r&&ah(r,t,s.textBit(c))):(Zr(t,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&ah(r,t,o.text));l=(s.ins>c||o.ins>=0&&o.len>c)&&(l||t.length>u),s.forward2(c),o.forward(c)}}}}class mv{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?zi.empty:e[i]}textBit(e){let{inserted:i}=this.set,t=this.i-2>>1;return t>=i.length&&!e?zi.empty:i[t].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Bu{constructor(e,i,t){this.from=e,this.to=i,this.flags=t}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,i=-1){let t,r;return this.empty?t=r=e.mapPos(this.from,i):(t=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),t==this.from&&r==this.to?this:new Bu(t,r,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return Ze.range(e,i);let t=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return Ze.range(this.anchor,t)}eq(e,i=!1){return this.anchor==e.anchor&&this.head==e.head&&(!i||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ze.range(e.anchor,e.head)}static create(e,i,t){return new Bu(e,i,t)}}class Ze{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:Ze.create(this.ranges.map(t=>t.map(e,i)),this.mainIndex)}eq(e,i=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ze([this.main],0)}addRange(e,i=!0){return Ze.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let t=this.ranges.slice();return t[i]=e,Ze.create(t,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ze(e.ranges.map(i=>Bu.fromJSON(i)),e.main)}static single(e,i=e){return new Ze([Ze.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let t=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=t:s.from<t)return Ze.normalized(e.slice(),i);t=s.to}return new Ze(e,i)}static cursor(e,i=0,t,r){return Bu.create(e,e,(i==0?0:i<0?8:16)|(t==null?7:Math.min(6,t))|(r??16777215)<<6)}static range(e,i,t,r){let s=(t??16777215)<<6|(r==null?7:Math.min(6,r));return i<e?Bu.create(i,e,48|s):Bu.create(e,i,(i>e?8:0)|s)}static normalized(e,i=0){let t=e[i];e.sort((r,s)=>r.from-s.from),i=e.indexOf(t);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,c=Math.max(s.to,o.to);r<=i&&i--,e.splice(--r,2,s.anchor>s.head?Ze.range(c,l):Ze.range(l,c))}}return new Ze(e,i)}}function w7(n,e){for(let i of n.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let m3=0;class wt{constructor(e,i,t,r,s){this.combine=e,this.compareInput=i,this.compare=t,this.isStatic=r,this.id=m3++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new wt(e.combine||(i=>i),e.compareInput||((i,t)=>i===t),e.compare||(e.combine?(i,t)=>i===t:g3),!!e.static,e.enables)}of(e){return new Rx([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rx(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rx(e,this,2,i)}from(e,i){return i||(i=t=>t),this.compute([e],t=>i(t.field(e)))}}function g3(n,e){return n==e||n.length==e.length&&n.every((i,t)=>i===e[t])}class Rx{constructor(e,i,t,r){this.dependencies=e,this.facet=i,this.type=t,this.value=r,this.id=m3++}dynamicSlot(e){var i;let t=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,c=!1,u=!1,d=[];for(let f of this.dependencies)f=="doc"?c=!0:f=="selection"?u=!0:((i=e[f.id])!==null&&i!==void 0?i:1)&1||d.push(e[f.id]);return{create(f){return f.values[o]=t(f),1},update(f,m){if(c&&m.docChanged||u&&(m.docChanged||m.selection)||UT(f,d)){let g=t(f);if(l?!p$(g,f.values[o],r):!r(g,f.values[o]))return f.values[o]=g,1}return 0},reconfigure:(f,m)=>{let g,y=m.config.address[s];if(y!=null){let x=xO(m,y);if(this.dependencies.every(b=>b instanceof wt?m.facet(b)===f.facet(b):b instanceof Xr?m.field(b,!1)==f.field(b,!1):!0)||(l?p$(g=t(f),x,r):r(g=t(f),x)))return f.values[o]=x,0}else g=t(f);return f.values[o]=g,1}}}}function p$(n,e,i){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!i(n[t],e[t]))return!1;return!0}function UT(n,e){let i=!1;for(let t of e)R0(n,t)&1&&(i=!0);return i}function XCe(n,e,i){let t=i.map(c=>n[c.id]),r=i.map(c=>c.type),s=t.filter(c=>!(c&1)),o=n[e.id]>>1;function l(c){let u=[];for(let d=0;d<t.length;d++){let f=xO(c,t[d]);if(r[d]==2)for(let m of f)u.push(m);else u.push(f)}return e.combine(u)}return{create(c){for(let u of t)R0(c,u);return c.values[o]=l(c),1},update(c,u){if(!UT(c,s))return 0;let d=l(c);return e.compare(d,c.values[o])?0:(c.values[o]=d,1)},reconfigure(c,u){let d=UT(c,t),f=u.config.facets[e.id],m=u.facet(e);if(f&&!d&&g3(i,f))return c.values[o]=m,0;let g=l(c);return e.compare(g,m)?(c.values[o]=m,0):(c.values[o]=g,1)}}}const m$=wt.define({static:!0});class Xr{constructor(e,i,t,r,s){this.id=e,this.createF=i,this.updateF=t,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let i=new Xr(m3++,e.create,e.update,e.compare||((t,r)=>t===r),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(m$).find(t=>t.field==this);return((i==null?void 0:i.create)||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:t=>(t.values[i]=this.create(t),1),update:(t,r)=>{let s=t.values[i],o=this.updateF(s,r);return this.compareF(s,o)?0:(t.values[i]=o,1)},reconfigure:(t,r)=>r.config.address[this.id]!=null?(t.values[i]=r.field(this),0):(t.values[i]=this.create(t),1)}}init(e){return[this,m$.of({field:this,create:e})]}get extension(){return this}}const Au={lowest:4,low:3,default:2,high:1,highest:0};function Yg(n){return e=>new _7(e,n)}const Cd={highest:Yg(Au.highest),high:Yg(Au.high),default:Yg(Au.default),low:Yg(Au.low),lowest:Yg(Au.lowest)};class _7{constructor(e,i){this.inner=e,this.prec=i}}class r_{of(e){return new FT(this,e)}reconfigure(e){return r_.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class FT{constructor(e,i){this.compartment=e,this.inner=i}}class bO{constructor(e,i,t,r,s,o){for(this.base=e,this.compartments=i,this.dynamicSlots=t,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<t.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,t){let r=[],s=Object.create(null),o=new Map;for(let m of WCe(e,i,o))m instanceof Xr?r.push(m):(s[m.facet.id]||(s[m.facet.id]=[])).push(m);let l=Object.create(null),c=[],u=[];for(let m of r)l[m.id]=u.length<<1,u.push(g=>m.slot(g));let d=t==null?void 0:t.config.facets;for(let m in s){let g=s[m],y=g[0].facet,x=d&&d[m]||[];if(g.every(b=>b.type==0))if(l[y.id]=c.length<<1|1,g3(x,g))c.push(t.facet(y));else{let b=y.combine(g.map(S=>S.value));c.push(t&&y.compare(b,t.facet(y))?t.facet(y):b)}else{for(let b of g)b.type==0?(l[b.id]=c.length<<1|1,c.push(b.value)):(l[b.id]=u.length<<1,u.push(S=>b.dynamicSlot(S)));l[y.id]=u.length<<1,u.push(b=>XCe(b,y,g))}}let f=u.map(m=>m(l));return new bO(e,o,f,l,c,s)}}function WCe(n,e,i){let t=[[],[],[],[],[]],r=new Map;function s(o,l){let c=r.get(o);if(c!=null){if(c<=l)return;let u=t[c].indexOf(o);u>-1&&t[c].splice(u,1),o instanceof FT&&i.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let u of o)s(u,l);else if(o instanceof FT){if(i.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;i.set(o.compartment,u),s(u,l)}else if(o instanceof _7)s(o.inner,o.prec);else if(o instanceof Xr)t[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Rx)t[l].push(o),o.facet.extensions&&s(o.facet.extensions,Au.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(n,Au.default),t.reduce((o,l)=>o.concat(l))}function R0(n,e){if(e&1)return 2;let i=e>>1,t=n.status[i];if(t==4)throw new Error("Cyclic dependency between fields and/or facets");if(t&2)return t;n.status[i]=4;let r=n.computeSlot(n,n.config.dynamicSlots[i]);return n.status[i]=2|r}function xO(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const S7=wt.define(),zT=wt.define({combine:n=>n.some(e=>e),static:!0}),C7=wt.define({combine:n=>n.length?n[0]:void 0,static:!0}),k7=wt.define(),T7=wt.define(),M7=wt.define(),E7=wt.define({combine:n=>n.length?n[0]:!1});class fc{constructor(e,i){this.type=e,this.value=i}static define(){return new QCe}}class QCe{of(e){return new fc(this,e)}}class HCe{constructor(e){this.map=e}of(e){return new vi(this,e)}}class vi{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new vi(this.type,i)}is(e){return this.type==e}static define(e={}){return new HCe(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let t=[];for(let r of e){let s=r.map(i);s&&t.push(s)}return t}}vi.reconfigure=vi.define();vi.appendConfig=vi.define();class gr{constructor(e,i,t,r,s,o){this.startState=e,this.changes=i,this.selection=t,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,t&&w7(t,i.newLength),s.some(l=>l.type==gr.time)||(this.annotations=s.concat(gr.time.of(Date.now())))}static create(e,i,t,r,s,o){return new gr(e,i,t,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(gr.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}gr.time=fc.define();gr.userEvent=fc.define();gr.addToHistory=fc.define();gr.remote=fc.define();function GCe(n,e){let i=[];for(let t=0,r=0;;){let s,o;if(t<n.length&&(r==e.length||e[r]>=n[t]))s=n[t++],o=n[t++];else if(r<e.length)s=e[r++],o=e[r++];else return i;!i.length||i[i.length-1]<s?i.push(s,o):i[i.length-1]<o&&(i[i.length-1]=o)}}function P7(n,e,i){var t;let r,s,o;return i?(r=e.changes,s=ur.empty(e.changes.length),o=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(t=n.selection)===null||t===void 0?void 0:t.map(r),effects:vi.mapEffects(n.effects,r).concat(vi.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function XT(n,e,i){let t=e.selection,r=Kf(e.annotations);return e.userEvent&&(r=r.concat(gr.userEvent.of(e.userEvent))),{changes:e.changes instanceof ur?e.changes:ur.of(e.changes||[],i,n.facet(C7)),selection:t&&(t instanceof Ze?t:Ze.single(t.anchor,t.head)),effects:Kf(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function A7(n,e,i){let t=XT(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(i=!1);let o=!!e[s].sequential;t=P7(t,XT(n,e[s],o?t.changes.newLength:n.doc.length),o)}let r=gr.create(n,t.changes,t.selection,t.effects,t.annotations,t.scrollIntoView);return jCe(i?YCe(r):r)}function YCe(n){let e=n.startState,i=!0;for(let r of e.facet(k7)){let s=r(n);if(s===!1){i=!1;break}Array.isArray(s)&&(i=i===!0?s:GCe(i,s))}if(i!==!0){let r,s;if(i===!1)s=n.changes.invertedDesc,r=ur.empty(e.doc.length);else{let o=n.changes.filter(i);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=gr.create(e,r,n.selection&&n.selection.map(s),vi.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let t=e.facet(T7);for(let r=t.length-1;r>=0;r--){let s=t[r](n);s instanceof gr?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof gr?n=s[0]:n=A7(e,Kf(s),!1)}return n}function jCe(n){let e=n.startState,i=e.facet(M7),t=n;for(let r=i.length-1;r>=0;r--){let s=i[r](n);s&&Object.keys(s).length&&(t=P7(t,XT(e,s,n.changes.newLength),!0))}return t==n?n:gr.create(e,n.changes,n.selection,t.effects,t.annotations,t.scrollIntoView)}const qCe=[];function Kf(n){return n==null?qCe:Array.isArray(n)?n:[n]}var Tn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Tn||(Tn={}));const ZCe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let WT;try{WT=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function KCe(n){if(WT)return WT.test(n);for(let e=0;e<n.length;e++){let i=n[e];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||ZCe.test(i)))return!0}return!1}function JCe(n){return e=>{if(!/\S/.test(e))return Tn.Space;if(KCe(e))return Tn.Word;for(let i=0;i<n.length;i++)if(e.indexOf(n[i])>-1)return Tn.Word;return Tn.Other}}class Ui{constructor(e,i,t,r,s,o){this.config=e,this.doc=i,this.selection=t,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)R0(this,l<<1);this.computeSlot=null}field(e,i=!0){let t=this.config.address[e.id];if(t==null){if(i)throw new RangeError("Field is not present in this state");return}return R0(this,t),xO(this,t)}update(...e){return A7(this,e,!0)}applyTransaction(e){let i=this.config,{base:t,compartments:r}=i;for(let l of e.effects)l.is(r_.reconfigure)?(i&&(r=new Map,i.compartments.forEach((c,u)=>r.set(u,c)),i=null),r.set(l.value.compartment,l.value.extension)):l.is(vi.reconfigure)?(i=null,t=l.value):l.is(vi.appendConfig)&&(i=null,t=Kf(t).concat(l.value));let s;i?s=e.startState.values.slice():(i=bO.resolve(t,r,this),s=new Ui(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(c,u)=>u.reconfigure(c,this),null).values);let o=e.startState.facet(zT)?e.newSelection:e.newSelection.asSingle();new Ui(i,e.newDoc,o,s,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:Ze.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,t=e(i.ranges[0]),r=this.changes(t.changes),s=[t.range],o=Kf(t.effects);for(let l=1;l<i.ranges.length;l++){let c=e(i.ranges[l]),u=this.changes(c.changes),d=u.map(r);for(let m=0;m<l;m++)s[m]=s[m].map(d);let f=r.mapDesc(u,!0);s.push(c.range.map(f)),r=r.compose(d),o=vi.mapEffects(o,d).concat(vi.mapEffects(Kf(c.effects),f))}return{changes:r,selection:Ze.create(s,i.mainIndex),effects:o}}changes(e=[]){return e instanceof ur?e:ur.of(e,this.doc.length,this.facet(Ui.lineSeparator))}toText(e){return zi.of(e.split(this.facet(Ui.lineSeparator)||VT))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(R0(this,i),xO(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let t in e){let r=e[t];r instanceof Xr&&this.config.address[r.id]!=null&&(i[t]=r.spec.toJSON(this.field(e[t]),this))}return i}static fromJSON(e,i={},t){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(t){for(let s in t)if(Object.prototype.hasOwnProperty.call(e,s)){let o=t[s],l=e[s];r.push(o.init(c=>o.spec.fromJSON(l,c)))}}return Ui.create({doc:e.doc,selection:Ze.fromJSON(e.selection),extensions:i.extensions?r.concat([i.extensions]):r})}static create(e={}){let i=bO.resolve(e.extensions||[],new Map),t=e.doc instanceof zi?e.doc:zi.of((e.doc||"").split(i.staticFacet(Ui.lineSeparator)||VT)),r=e.selection?e.selection instanceof Ze?e.selection:Ze.single(e.selection.anchor,e.selection.head):Ze.single(0);return w7(r,t.length),i.staticFacet(zT)||(r=r.asSingle()),new Ui(i,t,r,i.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ui.tabSize)}get lineBreak(){return this.facet(Ui.lineSeparator)||`
`}get readOnly(){return this.facet(E7)}phrase(e,...i){for(let t of this.facet(Ui.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(t,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>i.length?t:i[s-1]})),e}languageDataAt(e,i,t=-1){let r=[];for(let s of this.facet(S7))for(let o of s(this,i,t))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return JCe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:t,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-t,l=e-t;for(;o>0;){let c=Lr(i,o,!1);if(s(i.slice(c,o))!=Tn.Word)break;o=c}for(;l<r;){let c=Lr(i,l);if(s(i.slice(l,c))!=Tn.Word)break;l=c}return o==l?null:Ze.range(o+t,l+t)}}Ui.allowMultipleSelections=zT;Ui.tabSize=wt.define({combine:n=>n.length?n[0]:4});Ui.lineSeparator=C7;Ui.readOnly=E7;Ui.phrases=wt.define({compare(n,e){let i=Object.keys(n),t=Object.keys(e);return i.length==t.length&&i.every(r=>n[r]==e[r])}});Ui.languageData=S7;Ui.changeFilter=k7;Ui.transactionFilter=T7;Ui.transactionExtender=M7;r_.reconfigure=vi.define();function pl(n,e,i={}){let t={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],l=t[s];if(l===void 0)t[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(i,s))t[s]=i[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}class hd{eq(e){return this==e}range(e,i=e){return QT.create(e,i,this)}}hd.prototype.startSide=hd.prototype.endSide=0;hd.prototype.point=!1;hd.prototype.mapMode=ys.TrackDel;let QT=class R7{constructor(e,i,t){this.from=e,this.to=i,this.value=t}static create(e,i,t){return new R7(e,i,t)}};function HT(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class v3{constructor(e,i,t,r){this.from=e,this.to=i,this.value=t,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,i,t,r=0){let s=t?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let c=o+l>>1,u=s[c]-e||(t?this.value[c].endSide:this.value[c].startSide)-i;if(c==o)return u>=0?o:l;u>=0?l=c:o=c+1}}between(e,i,t,r){for(let s=this.findIndex(i,-1e9,!0),o=this.findIndex(t,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,i){let t=[],r=[],s=[],o=-1,l=-1;for(let c=0;c<this.value.length;c++){let u=this.value[c],d=this.from[c]+e,f=this.to[c]+e,m,g;if(d==f){let y=i.mapPos(d,u.startSide,u.mapMode);if(y==null||(m=g=y,u.startSide!=u.endSide&&(g=i.mapPos(d,u.endSide),g<m)))continue}else if(m=i.mapPos(d,u.startSide),g=i.mapPos(f,u.endSide),m>g||m==g&&u.startSide>0&&u.endSide<=0)continue;(g-m||u.endSide-u.startSide)<0||(o<0&&(o=m),u.point&&(l=Math.max(l,g-m)),t.push(u),r.push(m-o),s.push(g-o))}return{mapped:t.length?new v3(r,s,t,l):null,pos:o}}}class Vi{constructor(e,i,t,r){this.chunkPos=e,this.chunk=i,this.nextLayer=t,this.maxPoint=r}static create(e,i,t,r){return new Vi(e,i,t,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:t=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(i.length==0&&!o)return this;if(t&&(i=i.slice().sort(HT)),this.isEmpty)return i.length?Vi.of(i):this;let l=new I7(this,null,-1).goto(0),c=0,u=[],d=new Ch;for(;l.value||c<i.length;)if(c<i.length&&(l.from-i[c].from||l.startSide-i[c].value.startSide)>=0){let f=i[c++];d.addInner(f.from,f.to,f.value)||u.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==i.length||this.chunkEnd(l.chunkIndex)<i[c].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&d.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(d.addInner(l.from,l.to,l.value)||u.push(QT.create(l.from,l.to,l.value))),l.next());return d.finishInner(this.nextLayer.isEmpty&&!u.length?Vi.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],t=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],c=this.chunk[o],u=e.touchesRange(l,l+c.length);if(u===!1)r=Math.max(r,c.maxPoint),i.push(c),t.push(e.mapPos(l));else if(u===!0){let{mapped:d,pos:f}=c.map(l,e);d&&(r=Math.max(r,d.maxPoint),i.push(d),t.push(f))}}let s=this.nextLayer.map(e);return i.length==0?s:new Vi(t,i,s||Vi.empty,r)}between(e,i,t){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(i>=s&&e<=s+o.length&&o.between(s,e-s,i-s,t)===!1)return}this.nextLayer.between(e,i,t)}}iter(e=0){return gv.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return gv.from(e).goto(i)}static compare(e,i,t,r,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=i.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),c=g$(o,l,t),u=new jg(o,c,s),d=new jg(l,c,s);t.iterGaps((f,m,g)=>v$(u,f,d,m,g,r)),t.empty&&t.length==0&&v$(u,0,d,0,0,r)}static eq(e,i,t=0,r){r==null&&(r=999999999);let s=e.filter(d=>!d.isEmpty&&i.indexOf(d)<0),o=i.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=g$(s,o),c=new jg(s,l,0).goto(t),u=new jg(o,l,0).goto(t);for(;;){if(c.to!=u.to||!GT(c.active,u.active)||c.point&&(!u.point||!c.point.eq(u.point)))return!1;if(c.to>r)return!0;c.next(),u.next()}}static spans(e,i,t,r,s=-1){let o=new jg(e,null,s).goto(i),l=i,c=o.openStart;for(;;){let u=Math.min(o.to,t);if(o.point){let d=o.activeForPoint(o.to),f=o.pointFrom<i?d.length+1:o.point.startSide<0?d.length:Math.min(d.length,c);r.point(l,u,o.point,d,f,o.pointRank),c=Math.min(o.openEnd(u),d.length)}else u>l&&(r.span(l,u,o.active,c),c=o.openEnd(u));if(o.to>t)return c+(o.point&&o.to>t?1:0);l=o.to,o.next()}}static of(e,i=!1){let t=new Ch;for(let r of e instanceof QT?[e]:i?e2e(e):e)t.add(r.from,r.to,r.value);return t.finish()}static join(e){if(!e.length)return Vi.empty;let i=e[e.length-1];for(let t=e.length-2;t>=0;t--)for(let r=e[t];r!=Vi.empty;r=r.nextLayer)i=new Vi(r.chunkPos,r.chunk,i,Math.max(r.maxPoint,i.maxPoint));return i}}Vi.empty=new Vi([],[],null,-1);function e2e(n){if(n.length>1)for(let e=n[0],i=1;i<n.length;i++){let t=n[i];if(HT(e,t)>0)return n.slice().sort(HT);e=t}return n}Vi.empty.nextLayer=Vi.empty;class Ch{finishChunk(e){this.chunks.push(new v3(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,t){this.addInner(e,i,t)||(this.nextLayer||(this.nextLayer=new Ch)).add(e,i,t)}addInner(e,i,t){let r=e-this.lastTo||t.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||t.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=t,this.lastFrom=e,this.lastTo=i,this.value.push(t),t.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let t=i.value.length-1;return this.last=i.value[t],this.lastFrom=i.from[t]+e,this.lastTo=i.to[t]+e,!0}finish(){return this.finishInner(Vi.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=Vi.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function g$(n,e,i){let t=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&t.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=t.get(s.chunk[o]);l!=null&&(i?i.mapPos(l):l)==s.chunkPos[o]&&!(i!=null&&i.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class I7{constructor(e,i,t,r=0){this.layer=e,this.skip=i,this.minPoint=t,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,t){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,t=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!t||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],t=e+i.from[this.rangeIndex];if(this.from=t,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class gv{constructor(e){this.heap=e}static from(e,i=null,t=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=t&&r.push(new I7(o,i,t,s));return r.length==1?r[0]:new gv(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let t of this.heap)t.goto(e,i);for(let t=this.heap.length>>1;t>=0;t--)g2(this.heap,t);return this.next(),this}forward(e,i){for(let t of this.heap)t.forward(e,i);for(let t=this.heap.length>>1;t>=0;t--)g2(this.heap,t);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),g2(this.heap,0)}}}function g2(n,e){for(let i=n[e];;){let t=(e<<1)+1;if(t>=n.length)break;let r=n[t];if(t+1<n.length&&r.compare(n[t+1])>=0&&(r=n[t+1],t++),i.compare(r)<0)break;n[t]=i,n[e]=r,e=t}}class jg{constructor(e,i,t){this.minPoint=t,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=gv.from(e,i,t)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){Ab(this.active,e),Ab(this.activeTo,e),Ab(this.activeRank,e),this.minActive=y$(this.active,this.activeTo)}addActive(e){let i=0,{value:t,to:r,rank:s}=this.cursor;for(;i<this.activeRank.length&&(s-this.activeRank[i]||r-this.activeTo[i])>0;)i++;Rb(this.active,i,t),Rb(this.activeTo,i,r),Rb(this.activeRank,i,s),e&&Rb(e,i,this.cursor.from),this.minActive=y$(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let t=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),t&&Ab(t,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(t),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(t){this.openStart=0;for(let r=t.length-1;r>=0&&t[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let t=this.active.length-1;t>=0&&!(this.activeRank[t]<this.pointRank);t--)(this.activeTo[t]>e||this.activeTo[t]==e&&this.active[t].endSide>=this.point.endSide)&&i.push(this.active[t]);return i.reverse()}openEnd(e){let i=0;for(let t=this.activeTo.length-1;t>=0&&this.activeTo[t]>e;t--)i++;return i}}function v$(n,e,i,t,r,s){n.goto(e),i.goto(t);let o=t+r,l=t,c=t-e;for(;;){let u=n.to+c-i.to||n.endSide-i.endSide,d=u<0?n.to+c:i.to,f=Math.min(d,o);if(n.point||i.point?n.point&&i.point&&(n.point==i.point||n.point.eq(i.point))&&GT(n.activeForPoint(n.to),i.activeForPoint(i.to))||s.comparePoint(l,f,n.point,i.point):f>l&&!GT(n.active,i.active)&&s.compareRange(l,f,n.active,i.active),d>o)break;l=d,u<=0&&n.next(),u>=0&&i.next()}}function GT(n,e){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!=e[i]&&!n[i].eq(e[i]))return!1;return!0}function Ab(n,e){for(let i=e,t=n.length-1;i<t;i++)n[i]=n[i+1];n.pop()}function Rb(n,e,i){for(let t=n.length-1;t>=e;t--)n[t+1]=n[t];n[e]=i}function y$(n,e){let i=-1,t=1e9;for(let r=0;r<e.length;r++)(e[r]-t||n[r].endSide-n[i].endSide)<0&&(i=r,t=e[r]);return i}function jp(n,e,i=n.length){let t=0;for(let r=0;r<i;)n.charCodeAt(r)==9?(t+=e-t%e,r++):(t++,r=Lr(n,r));return t}function YT(n,e,i,t){for(let r=0,s=0;;){if(s>=e)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?i-s%i:1,r=Lr(n,r)}return t===!0?-1:n.length}const jT="",b$=typeof Symbol>"u"?"__"+jT:Symbol.for(jT),qT=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),x$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class kh{constructor(e,i){this.rules=[];let{finish:t}=i||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,c,u){let d=[],f=/^@(\w+)\b/.exec(o[0]),m=f&&f[1]=="keyframes";if(f&&l==null)return c.push(o[0]+";");for(let g in l){let y=l[g];if(/&/.test(g))s(g.split(/,\s*/).map(x=>o.map(b=>x.replace(/&/,b))).reduce((x,b)=>x.concat(b)),y,c);else if(y&&typeof y=="object"){if(!f)throw new RangeError("The value of a property ("+g+") should be a primitive value.");s(r(g),y,d,m)}else y!=null&&d.push(g.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+y+";")}(d.length||m)&&c.push((t&&!f&&!u?o.map(t):o).join(", ")+" {"+d.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=x$[b$]||1;return x$[b$]=e+1,jT+e.toString(36)}static mount(e,i,t){let r=e[qT],s=t&&t.nonce;r?s&&r.setNonce(s):r=new t2e(e,s),r.mount(Array.isArray(i)?i:[i],e)}}let O$=new Map;class t2e{constructor(e,i){let t=e.ownerDocument||e,r=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=O$.get(t);if(s)return e[qT]=s;this.sheet=new r.CSSStyleSheet,O$.set(t,this)}else this.styleTag=t.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);this.modules=[],e[qT]=this}mount(e,i){let t=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],c=this.modules.indexOf(l);if(c<s&&c>-1&&(this.modules.splice(c,1),s--,c=-1),c==-1){if(this.modules.splice(s++,0,l),t)for(let u=0;u<l.rules.length;u++)t.insertRule(l.rules[u],r++)}else{for(;s<c;)r+=this.modules[s++].rules.length;r+=l.rules.length,s++}}if(t)i.adoptedStyleSheets.indexOf(this.sheet)<0&&(i.adoptedStyleSheets=[this.sheet,...i.adoptedStyleSheets]);else{let o="";for(let c=0;c<this.modules.length;c++)o+=this.modules[c].getRules()+`
`;this.styleTag.textContent=o;let l=i.head||i;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Th={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},i2e=typeof navigator<"u"&&/Mac/.test(navigator.platform),n2e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Nr=0;Nr<10;Nr++)Th[48+Nr]=Th[96+Nr]=String(Nr);for(var Nr=1;Nr<=24;Nr++)Th[Nr+111]="F"+Nr;for(var Nr=65;Nr<=90;Nr++)Th[Nr]=String.fromCharCode(Nr+32),vv[Nr]=String.fromCharCode(Nr);for(var v2 in Th)vv.hasOwnProperty(v2)||(vv[v2]=Th[v2]);function r2e(n){var e=i2e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||n2e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",i=!e&&n.key||(n.shiftKey?vv:Th)[n.keyCode]||n.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function yv(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function ZT(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function s2e(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ix(n,e){if(!e.anchorNode)return!1;try{return ZT(n,e.anchorNode)}catch{return!1}}function bv(n){return n.nodeType==3?dd(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function I0(n,e,i,t){return i?w$(n,e,i,t,-1)||w$(n,e,i,t,1):!1}function ud(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function OO(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function w$(n,e,i,t,r){for(;;){if(n==i&&e==t)return!0;if(e==(r<0?0:ac(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=ud(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?ac(n):0}else return!1}}function ac(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function s_(n,e){let i=e?n.left:n.right;return{left:i,right:i,top:n.top,bottom:n.bottom}}function o2e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function D7(n,e){let i=e.width/n.offsetWidth,t=e.height/n.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.width-n.offsetWidth)<1)&&(i=1),(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.height-n.offsetHeight)<1)&&(t=1),{scaleX:i,scaleY:t}}function a2e(n,e,i,t,r,s,o,l){let c=n.ownerDocument,u=c.defaultView||window;for(let d=n,f=!1;d&&!f;)if(d.nodeType==1){let m,g=d==c.body,y=1,x=1;if(g)m=o2e(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(f=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let _=d.getBoundingClientRect();({scaleX:y,scaleY:x}=D7(d,_)),m={left:_.left,right:_.left+d.clientWidth*y,top:_.top,bottom:_.top+d.clientHeight*x}}let b=0,S=0;if(r=="nearest")e.top<m.top?(S=-(m.top-e.top+o),i>0&&e.bottom>m.bottom+S&&(S=e.bottom-m.bottom+S+o)):e.bottom>m.bottom&&(S=e.bottom-m.bottom+o,i<0&&e.top-S<m.top&&(S=-(m.top+S-e.top+o)));else{let _=e.bottom-e.top,O=m.bottom-m.top;S=(r=="center"&&_<=O?e.top+_/2-O/2:r=="start"||r=="center"&&i<0?e.top-o:e.bottom-O+o)-m.top}if(t=="nearest"?e.left<m.left?(b=-(m.left-e.left+s),i>0&&e.right>m.right+b&&(b=e.right-m.right+b+s)):e.right>m.right&&(b=e.right-m.right+s,i<0&&e.left<m.left+b&&(b=-(m.left+b-e.left+s))):b=(t=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:t=="start"==l?e.left-s:e.right-(m.right-m.left)+s)-m.left,b||S)if(g)u.scrollBy(b,S);else{let _=0,O=0;if(S){let k=d.scrollTop;d.scrollTop+=S/x,O=(d.scrollTop-k)*x}if(b){let k=d.scrollLeft;d.scrollLeft+=b/y,_=(d.scrollLeft-k)*y}e={left:e.left-_,top:e.top-O,right:e.right-_,bottom:e.bottom-O},_&&Math.abs(_-b)<1&&(t="nearest"),O&&Math.abs(O-S)<1&&(r="nearest")}if(g)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function l2e(n){let e=n.ownerDocument,i,t;for(let r=n.parentNode;r&&!(r==e.body||i&&t);)if(r.nodeType==1)!t&&r.scrollHeight>r.clientHeight&&(t=r),!i&&r.scrollWidth>r.clientWidth&&(i=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:i,y:t}}class c2e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:t}=e;this.set(i,Math.min(e.anchorOffset,i?ac(i):0),t,Math.min(e.focusOffset,t?ac(t):0))}set(e,i,t,r){this.anchorNode=e,this.anchorOffset=i,this.focusNode=t,this.focusOffset=r}}let xf=null;function N7(n){if(n.setActive)return n.setActive();if(xf)return n.focus(xf);let e=[];for(let i=n;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(n.focus(xf==null?{get preventScroll(){return xf={preventScroll:!0},!0}}:void 0),!xf){xf=!1;for(let i=0;i<e.length;){let t=e[i++],r=e[i++],s=e[i++];t.scrollTop!=r&&(t.scrollTop=r),t.scrollLeft!=s&&(t.scrollLeft=s)}}}let _$;function dd(n,e,i=e){let t=_$||(_$=document.createRange());return t.setEnd(n,i),t.setStart(n,e),t}function Jf(n,e,i,t){let r={key:e,code:e,keyCode:i,which:i,cancelable:!0};t&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=t);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function h2e(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function $7(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function u2e(n,e){let i=e.focusNode,t=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=t)return!1;for(t=Math.min(t,ac(i));;)if(t){if(i.nodeType!=1)return!1;let r=i.childNodes[t-1];r.contentEditable=="false"?t--:(i=r,t=ac(i))}else{if(i==n)return!0;t=ud(i),i=i.parentNode}}function V7(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function L7(n,e){for(let i=n,t=e;;){if(i.nodeType==3&&t>0)return{node:i,offset:t};if(i.nodeType==1&&t>0){if(i.contentEditable=="false")return null;i=i.childNodes[t-1],t=ac(i)}else if(i.parentNode&&!OO(i))t=ud(i),i=i.parentNode;else return null}}function B7(n,e){for(let i=n,t=e;;){if(i.nodeType==3&&t<i.nodeValue.length)return{node:i,offset:t};if(i.nodeType==1&&t<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[t],t=0}else if(i.parentNode&&!OO(i))t=ud(i)+1,i=i.parentNode;else return null}}class es{constructor(e,i,t=!0){this.node=e,this.offset=i,this.precise=t}static before(e,i){return new es(e.parentNode,ud(e),i)}static after(e,i){return new es(e.parentNode,ud(e)+1,i)}}const y3=[];class un{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let t of this.children){if(t==e)return i;i+=t.length+t.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let t=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:t.firstChild)){let l=un.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,i),o.flags&=-8}if(s=r?r.nextSibling:t.firstChild,i&&!i.written&&i.node==t&&s!=o.dom&&(i.written=!0),o.dom.parentNode==t)for(;s&&s!=o.dom;)s=S$(s);else t.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:t.firstChild,s&&i&&i.node==t&&(i.written=!0);s;)s=S$(s)}else if(this.flags&1)for(let t of this.children)t.flags&7&&(t.sync(e,i),t.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let t;if(e==this.dom)t=this.dom.childNodes[i];else{let r=ac(e)==0?0:i==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?t=e:t=e.nextSibling}if(t==this.dom.firstChild)return 0;for(;t&&!un.get(t);)t=t.nextSibling;if(!t)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==t)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,i,t=0){let r=-1,s=-1,o=-1,l=-1;for(let c=0,u=t,d=t;c<this.children.length;c++){let f=this.children[c],m=u+f.length;if(u<e&&m>i)return f.domBoundsAround(e,i,u);if(m>=e&&r==-1&&(r=c,s=u),u>i&&f.dom.parentNode==this.dom){o=c,l=d;break}d=m,u=m+f.breakAfter}return{from:s,to:l<0?t+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,t=y3){this.markDirty();for(let r=e;r<i;r++){let s=this.children[r];s.parent==this&&t.indexOf(s)<0&&s.destroy()}this.children.splice(e,i-e,...t);for(let r=0;r<t.length;r++)t[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new U7(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,t,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}un.prototype.breakAfter=0;function S$(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class U7{constructor(e,i,t){this.children=e,this.pos=i,this.i=t,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let t=this.children[--this.i];this.pos-=t.length+t.breakAfter}}}function F7(n,e,i,t,r,s,o,l,c){let{children:u}=n,d=u.length?u[e]:null,f=s.length?s[s.length-1]:null,m=f?f.breakAfter:o;if(!(e==t&&d&&!o&&!m&&s.length<2&&d.merge(i,r,s.length?f:null,i==0,l,c))){if(t<u.length){let g=u[t];g&&(r<g.length||g.breakAfter&&(f!=null&&f.breakAfter))?(e==t&&(g=g.split(r),r=0),!m&&f&&g.merge(0,r,f,!0,0,c)?s[s.length-1]=g:((r||g.children.length&&!g.children[0].length)&&g.merge(0,r,null,!1,0,c),s.push(g))):g!=null&&g.breakAfter&&(f?f.breakAfter=1:o=1),t++}for(d&&(d.breakAfter=o,i>0&&(!o&&s.length&&d.merge(i,d.length,s[0],!1,l,0)?d.breakAfter=s.shift().breakAfter:(i<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(i,d.length,null,!1,l,0),e++));e<t&&s.length;)if(u[t-1].become(s[s.length-1]))t--,s.pop(),c=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:c;else break;!s.length&&e&&t<u.length&&!u[e-1].breakAfter&&u[t].merge(0,0,u[e-1],!1,l,c)&&e--,(e<t||s.length)&&n.replaceChildren(e,t,s)}}function z7(n,e,i,t,r,s){let o=n.childCursor(),{i:l,off:c}=o.findPos(i,1),{i:u,off:d}=o.findPos(e,-1),f=e-i;for(let m of t)f+=m.length;n.length+=f,F7(n,u,d,l,c,t,0,r,s)}let Us=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},KT=typeof document<"u"?document:{documentElement:{style:{}}};const JT=/Edge\/(\d+)/.exec(Us.userAgent),X7=/MSIE \d/.test(Us.userAgent),eM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Us.userAgent),o_=!!(X7||eM||JT),C$=!o_&&/gecko\/(\d+)/i.test(Us.userAgent),y2=!o_&&/Chrome\/(\d+)/.exec(Us.userAgent),k$="webkitFontSmoothing"in KT.documentElement.style,W7=!o_&&/Apple Computer/.test(Us.vendor),T$=W7&&(/Mobile\/\w+/.test(Us.userAgent)||Us.maxTouchPoints>2);var St={mac:T$||/Mac/.test(Us.platform),windows:/Win/.test(Us.platform),linux:/Linux|X11/.test(Us.platform),ie:o_,ie_version:X7?KT.documentMode||6:eM?+eM[1]:JT?+JT[1]:0,gecko:C$,gecko_version:C$?+(/Firefox\/(\d+)/.exec(Us.userAgent)||[0,0])[1]:0,chrome:!!y2,chrome_version:y2?+y2[1]:0,ios:T$,android:/Android\b/.test(Us.userAgent),webkit:k$,safari:W7,webkit_version:k$?+(/\bAppleWebKit\/(\d+)/.exec(Us.userAgent)||[0,0])[1]:0,tabSize:KT.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const d2e=256;class ka extends un{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,t){return this.flags&8||t&&(!(t instanceof ka)||this.length-(i-e)+t.length>d2e||t.flags&8)?!1:(this.text=this.text.slice(0,e)+(t?t.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new ka(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new es(this.dom,e)}domBoundsAround(e,i,t){return{from:t,to:t+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return f2e(this.dom,e,i)}}class lc extends un{constructor(e,i=[],t=0){super(),this.mark=e,this.children=i,this.length=t;for(let r of i)r.setParent(this)}setAttrs(e){if($7(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,t,r,s,o){return t&&(!(t instanceof lc&&t.mark.eq(this.mark))||e&&s<=0||i<this.length&&o<=0)?!1:(z7(this,e,i,t?t.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let i=[],t=0,r=-1,s=0;for(let l of this.children){let c=t+l.length;c>e&&i.push(t<e?l.split(e-t):l),r<0&&t>=e&&(r=s),t=c,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new lc(this.mark,i,o)}domAtPos(e){return Q7(this,e)}coordsAt(e,i){return G7(this,e,i)}}function f2e(n,e,i){let t=n.nodeValue.length;e>t&&(e=t);let r=e,s=e,o=0;e==0&&i<0||e==t&&i>=0?St.chrome||St.gecko||(e?(r--,o=1):s<t&&(s++,o=-1)):i<0?r--:s<t&&s++;let l=dd(n,r,s).getClientRects();if(!l.length)return null;let c=l[(o?o<0:i>=0)?0:l.length-1];return St.safari&&!o&&c.width==0&&(c=Array.prototype.find.call(l,u=>u.width)||c),o?s_(c,o<0):c||null}class lh extends un{static create(e,i,t){return new lh(e,i,t)}constructor(e,i,t){super(),this.widget=e,this.length=i,this.side=t,this.prevWidget=null}split(e){let i=lh.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,i,t,r,s,o){return t&&(!(t instanceof lh)||!this.widget.compare(t.widget)||e>0&&s<=0||i<this.length&&o<=0)?!1:(this.length=e+(t?t.length:0)+(this.length-i),!0)}become(e){return e instanceof lh&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return zi.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,t=i&&i.state.doc,r=this.posAtStart;return t?t.slice(r,r+this.length):zi.empty}domAtPos(e){return(this.length?e==0:this.side>0)?es.before(this.dom):es.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let t=this.widget.coordsAt(this.dom,e,i);if(t)return t;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return s_(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Mp extends un{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Mp&&e.side==this.side}split(){return new Mp(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?es.before(this.dom):es.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return zi.empty}get isHidden(){return!0}}ka.prototype.children=lh.prototype.children=Mp.prototype.children=y3;function Q7(n,e){let i=n.dom,{children:t}=n,r=0;for(let s=0;r<t.length;r++){let o=t[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==i)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=t[s-1];if(o.dom.parentNode==i)return o.domAtPos(o.length)}for(let s=r;s<t.length;s++){let o=t[s];if(o.dom.parentNode==i)return o.domAtPos(0)}return new es(i,0)}function H7(n,e,i){let t,{children:r}=n;i>0&&e instanceof lc&&r.length&&(t=r[r.length-1])instanceof lc&&t.mark.eq(e.mark)?H7(t,e.children[0],i-1):(r.push(e),e.setParent(n)),n.length+=e.length}function G7(n,e,i){let t=null,r=-1,s=null,o=-1;function l(u,d){for(let f=0,m=0;f<u.children.length&&m<=d;f++){let g=u.children[f],y=m+g.length;y>=d&&(g.children.length?l(g,d-m):(!s||s.isHidden&&i>0)&&(y>d||m==y&&g.getSide()>0)?(s=g,o=d-m):(m<d||m==y&&g.getSide()<0&&!g.isHidden)&&(t=g,r=d-m)),m=y}}l(n,e);let c=(i<0?t:s)||t||s;return c?c.coordsAt(Math.max(0,c==t?r:o),i):p2e(n)}function p2e(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let i=bv(e);return i[i.length-1]||null}function tM(n,e){for(let i in n)i=="class"&&e.class?e.class+=" "+n.class:i=="style"&&e.style?e.style+=";"+n.style:e[i]=n[i];return e}const M$=Object.create(null);function wO(n,e,i){if(n==e)return!0;n||(n=M$),e||(e=M$);let t=Object.keys(n),r=Object.keys(e);if(t.length-(i&&t.indexOf(i)>-1?1:0)!=r.length-(i&&r.indexOf(i)>-1?1:0))return!1;for(let s of t)if(s!=i&&(r.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function iM(n,e,i){let t=!1;if(e)for(let r in e)i&&r in i||(t=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(i)for(let r in i)e&&e[r]==i[r]||(t=!0,r=="style"?n.style.cssText=i[r]:n.setAttribute(r,i[r]));return t}function m2e(n){let e=Object.create(null);for(let i=0;i<n.attributes.length;i++){let t=n.attributes[i];e[t.name]=t.value}return e}class Bh{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,t){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var _s=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(_s||(_s={}));class Zt extends hd{constructor(e,i,t,r){super(),this.startSide=e,this.endSide=i,this.widget=t,this.spec=r}get heightRelevant(){return!1}static mark(e){return new py(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),t=!!e.block;return i+=t&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new Mh(e,i,i,t,e.widget||null,!1)}static replace(e){let i=!!e.block,t,r;if(e.isBlockGap)t=-5e8,r=4e8;else{let{start:s,end:o}=Y7(e,i);t=(s?i?-3e8:-1:5e8)-1,r=(o?i?2e8:1:-6e8)+1}return new Mh(e,t,r,i,e.widget||null,!0)}static line(e){return new my(e)}static set(e,i=!1){return Vi.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Zt.none=Vi.empty;class py extends Zt{constructor(e){let{start:i,end:t}=Y7(e);super(i?-1:5e8,t?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,t;return this==e||e instanceof py&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((t=e.attrs)===null||t===void 0?void 0:t.class))&&wO(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}py.prototype.point=!1;class my extends Zt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof my&&this.spec.class==e.spec.class&&wO(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}my.prototype.mapMode=ys.TrackBefore;my.prototype.point=!0;class Mh extends Zt{constructor(e,i,t,r,s,o){super(i,t,s,e),this.block=r,this.isReplace=o,this.mapMode=r?i<=0?ys.TrackBefore:ys.TrackAfter:ys.TrackDel}get type(){return this.startSide!=this.endSide?_s.WidgetRange:this.startSide<=0?_s.WidgetBefore:_s.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Mh&&g2e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}Mh.prototype.point=!0;function Y7(n,e=!1){let{inclusiveStart:i,inclusiveEnd:t}=n;return i==null&&(i=n.inclusive),t==null&&(t=n.inclusive),{start:i??e,end:t??e}}function g2e(n,e){return n==e||!!(n&&e&&n.compare(e))}function nM(n,e,i,t=0){let r=i.length-1;r>=0&&i[r]+t>=n?i[r]=Math.max(i[r],e):i.push(n,e)}class er extends un{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,t,r,s,o){if(t){if(!(t instanceof er))return!1;this.dom||t.transferDOM(this)}return r&&this.setDeco(t?t.attrs:null),z7(this,e,i,t?t.children.slice():[],s,o),!0}split(e){let i=new er;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:t,off:r}=this.childPos(e);r&&(i.append(this.children[t].split(r),0),this.children[t].merge(r,this.children[t].length,null,!1,0,0),t++);for(let s=t;s<this.children.length;s++)i.append(this.children[s],0);for(;t>0&&this.children[t-1].length==0;)this.children[--t].destroy();return this.children.length=t,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){wO(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){H7(this,e,i)}addLineDeco(e){let i=e.spec.attributes,t=e.spec.class;i&&(this.attrs=tM(i,this.attrs||{})),t&&(this.attrs=tM({class:t},this.attrs||{}))}domAtPos(e){return Q7(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var t;this.dom?this.flags&4&&($7(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(iM(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let r=this.dom.lastChild;for(;r&&un.get(r)instanceof lc;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((t=un.get(r))===null||t===void 0?void 0:t.isEditable)==!1&&(!St.ios||!this.children.some(s=>s instanceof ka))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let t of this.children){if(!(t instanceof ka)||/[^ -~]/.test(t.text))return null;let r=bv(t.dom);if(r.length!=1)return null;e+=r[0].width,i=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let t=G7(this,e,i);if(!this.children.length&&t&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=t.bottom-t.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:t.top+o,bottom:t.bottom-o,left:t.left,right:t.left}}}return t}become(e){return e instanceof er&&this.children.length==0&&e.children.length==0&&wO(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,i){for(let t=0,r=0;t<e.children.length;t++){let s=e.children[t],o=r+s.length;if(o>=i){if(s instanceof er)return s;if(o>i)break}r=o+s.breakAfter}return null}}class Zl extends un{constructor(e,i,t){super(),this.widget=e,this.length=i,this.deco=t,this.breakAfter=0,this.prevWidget=null}merge(e,i,t,r,s,o){return t&&(!(t instanceof Zl)||!this.widget.compare(t.widget)||e>0&&s<=0||i<this.length&&o<=0)?!1:(this.length=e+(t?t.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?es.before(this.dom):es.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let t=new Zl(this.widget,i,this.deco);return t.breakAfter=this.breakAfter,t}get children(){return y3}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):zi.empty}domBoundsAround(){return null}become(e){return e instanceof Zl&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){let t=this.widget.coordsAt(this.dom,e,i);return t||(this.widget instanceof rM?null:s_(this.dom.getBoundingClientRect(),this.length?e==0:i<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:i,endSide:t}=this.deco;return i==t?!1:e<0?i<0:t>0}}class rM extends Bh{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class D0{constructor(e,i,t,r){this.doc=e,this.pos=i,this.end=t,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Zl&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new er),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ib(new Mp(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Zl)&&this.getLine()}buildText(e,i,t){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-t)),this.getLine().append(Ib(new ka(this.text.slice(this.textOff,this.textOff+r)),i),t),this.atCursorPos=!0,this.textOff+=r,e-=r,t=0}}span(e,i,t,r){this.buildText(i-e,t,r),this.pos=i,this.openStart<0&&(this.openStart=r)}point(e,i,t,r,s,o){if(this.disallowBlockEffectsFor[o]&&t instanceof Mh){if(t.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=i-e;if(t instanceof Mh)if(t.block)t.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Zl(t.widget||Ep.block,l,t));else{let c=lh.create(t.widget||Ep.inline,l,l?0:t.startSide),u=this.atCursorPos&&!c.isEditable&&s<=r.length&&(e<i||t.startSide>0),d=!c.isEditable&&(e<i||s>r.length||t.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(f.append(Ib(new Mp(1),r),s),s=r.length+Math.max(0,s-r.length)),f.append(Ib(c,r),s),this.atCursorPos=d,this.pendingBuffer=d?e<i||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(t);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=s)}static build(e,i,t,r,s){let o=new D0(e,i,t,s);return o.openEnd=Vi.spans(r,i,t,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Ib(n,e){for(let i of e)n=new lc(i,[n],n.length);return n}class Ep extends Bh{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ep.inline=new Ep("span");Ep.block=new Ep("div");var wn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(wn||(wn={}));const fd=wn.LTR,b3=wn.RTL;function j7(n){let e=[];for(let i=0;i<n.length;i++)e.push(1<<+n[i]);return e}const v2e=j7("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),y2e=j7("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),sM=Object.create(null),Fa=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),i=n.charCodeAt(1);sM[e]=i,sM[i]=-e}function q7(n){return n<=247?v2e[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?y2e[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const b2e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ch{get dir(){return this.level%2?b3:fd}constructor(e,i,t){this.from=e,this.to=i,this.level=t}side(e,i){return this.dir==i==e?this.to:this.from}forward(e,i){return e==(this.dir==i)}static find(e,i,t,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=i&&l.to>=i){if(l.level==t)return o;(s<0||(r!=0?r<0?l.from<i:l.to>i:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Z7(n,e){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++){let t=n[i],r=e[i];if(t.from!=r.from||t.to!=r.to||t.direction!=r.direction||!Z7(t.inner,r.inner))return!1}return!0}const cn=[];function x2e(n,e,i,t,r){for(let s=0;s<=t.length;s++){let o=s?t[s-1].to:e,l=s<t.length?t[s].from:i,c=s?256:r;for(let u=o,d=c,f=c;u<l;u++){let m=q7(n.charCodeAt(u));m==512?m=d:m==8&&f==4&&(m=16),cn[u]=m==4?2:m,m&7&&(f=m),d=m}for(let u=o,d=c,f=c;u<l;u++){let m=cn[u];if(m==128)u<l-1&&d==cn[u+1]&&d&24?m=cn[u]=d:cn[u]=256;else if(m==64){let g=u+1;for(;g<l&&cn[g]==64;)g++;let y=u&&d==8||g<i&&cn[g]==8?f==1?1:8:256;for(let x=u;x<g;x++)cn[x]=y;u=g-1}else m==8&&f==1&&(cn[u]=1);d=m,m&7&&(f=m)}}}function O2e(n,e,i,t,r){let s=r==1?2:1;for(let o=0,l=0,c=0;o<=t.length;o++){let u=o?t[o-1].to:e,d=o<t.length?t[o].from:i;for(let f=u,m,g,y;f<d;f++)if(g=sM[m=n.charCodeAt(f)])if(g<0){for(let x=l-3;x>=0;x-=3)if(Fa[x+1]==-g){let b=Fa[x+2],S=b&2?r:b&4?b&1?s:r:0;S&&(cn[f]=cn[Fa[x]]=S),l=x;break}}else{if(Fa.length==189)break;Fa[l++]=f,Fa[l++]=m,Fa[l++]=c}else if((y=cn[f])==2||y==1){let x=y==r;c=x?0:1;for(let b=l-3;b>=0;b-=3){let S=Fa[b+2];if(S&2)break;if(x)Fa[b+2]|=2;else{if(S&4)break;Fa[b+2]|=4}}}}}function w2e(n,e,i,t){for(let r=0,s=t;r<=i.length;r++){let o=r?i[r-1].to:n,l=r<i.length?i[r].from:e;for(let c=o;c<l;){let u=cn[c];if(u==256){let d=c+1;for(;;)if(d==l){if(r==i.length)break;d=i[r++].to,l=r<i.length?i[r].from:e}else if(cn[d]==256)d++;else break;let f=s==1,m=(d<e?cn[d]:t)==1,g=f==m?f?1:2:t;for(let y=d,x=r,b=x?i[x-1].to:n;y>c;)y==b&&(y=i[--x].from,b=x?i[x-1].to:n),cn[--y]=g;c=d}else s=u,c++}}}function oM(n,e,i,t,r,s,o){let l=t%2?2:1;if(t%2==r%2)for(let c=e,u=0;c<i;){let d=!0,f=!1;if(u==s.length||c<s[u].from){let x=cn[c];x!=l&&(d=!1,f=x==16)}let m=!d&&l==1?[]:null,g=d?t:t+1,y=c;e:for(;;)if(u<s.length&&y==s[u].from){if(f)break e;let x=s[u];if(!d)for(let b=x.to,S=u+1;;){if(b==i)break e;if(S<s.length&&s[S].from==b)b=s[S++].to;else{if(cn[b]==l)break e;break}}if(u++,m)m.push(x);else{x.from>c&&o.push(new ch(c,x.from,g));let b=x.direction==fd!=!(g%2);aM(n,b?t+1:t,r,x.inner,x.from,x.to,o),c=x.to}y=x.to}else{if(y==i||(d?cn[y]!=l:cn[y]==l))break;y++}m?oM(n,c,y,t+1,r,m,o):c<y&&o.push(new ch(c,y,g)),c=y}else for(let c=i,u=s.length;c>e;){let d=!0,f=!1;if(!u||c>s[u-1].to){let x=cn[c-1];x!=l&&(d=!1,f=x==16)}let m=!d&&l==1?[]:null,g=d?t:t+1,y=c;e:for(;;)if(u&&y==s[u-1].to){if(f)break e;let x=s[--u];if(!d)for(let b=x.from,S=u;;){if(b==e)break e;if(S&&s[S-1].to==b)b=s[--S].from;else{if(cn[b-1]==l)break e;break}}if(m)m.push(x);else{x.to<c&&o.push(new ch(x.to,c,g));let b=x.direction==fd!=!(g%2);aM(n,b?t+1:t,r,x.inner,x.from,x.to,o),c=x.from}y=x.from}else{if(y==e||(d?cn[y-1]!=l:cn[y-1]==l))break;y--}m?oM(n,y,c,t+1,r,m,o):y<c&&o.push(new ch(y,c,g)),c=y}}function aM(n,e,i,t,r,s,o){let l=e%2?2:1;x2e(n,r,s,t,l),O2e(n,r,s,t,l),w2e(r,s,t,l),oM(n,r,s,e,i,t,o)}function _2e(n,e,i){if(!n)return[new ch(0,0,e==b3?1:0)];if(e==fd&&!i.length&&!b2e.test(n))return K7(n.length);if(i.length)for(;n.length>cn.length;)cn[cn.length]=256;let t=[],r=e==fd?0:1;return aM(n,r,r,i,0,n.length,t),t}function K7(n){return[new ch(0,n,0)]}let J7="";function S2e(n,e,i,t,r){var s;let o=t.head-n.from,l=ch.find(e,o,(s=t.bidiLevel)!==null&&s!==void 0?s:-1,t.assoc),c=e[l],u=c.side(r,i);if(o==u){let m=l+=r?1:-1;if(m<0||m>=e.length)return null;c=e[l=m],o=c.side(!r,i),u=c.side(r,i)}let d=Lr(n.text,o,c.forward(r,i));(d<c.from||d>c.to)&&(d=u),J7=n.text.slice(Math.min(o,d),Math.max(o,d));let f=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return f&&d==u&&f.level+(r?0:1)<c.level?Ze.cursor(f.side(!r,i)+n.from,f.forward(r,i)?1:-1,f.level):Ze.cursor(d+n.from,c.forward(r,i)?-1:1,c.level)}function C2e(n,e,i){for(let t=e;t<i;t++){let r=q7(n.charCodeAt(t));if(r==1)return fd;if(r==2||r==4)return b3}return fd}const eX=wt.define(),tX=wt.define(),iX=wt.define(),nX=wt.define(),lM=wt.define(),rX=wt.define(),sX=wt.define(),x3=wt.define(),O3=wt.define(),oX=wt.define({combine:n=>n.some(e=>e)}),aX=wt.define({combine:n=>n.some(e=>e)}),lX=wt.define();class ep{constructor(e,i="nearest",t="nearest",r=5,s=5,o=!1){this.range=e,this.y=i,this.x=t,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new ep(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ep(Ze.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Db=vi.define({map:(n,e)=>n.map(e)}),cX=vi.define();function js(n,e,i){let t=n.facet(nX);t.length?t[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const rh=wt.define({combine:n=>n.length?n[0]:!0});let k2e=0;const h0=wt.define();class ar{constructor(e,i,t,r,s){this.id=e,this.create=i,this.domEventHandlers=t,this.domEventObservers=r,this.extension=s(this)}static define(e,i){const{eventHandlers:t,eventObservers:r,provide:s,decorations:o}=i||{};return new ar(k2e++,e,t,r,l=>{let c=[h0.of(l)];return o&&c.push(xv.of(u=>{let d=u.plugin(l);return d?o(d):Zt.none})),s&&c.push(s(l)),c})}static fromClass(e,i){return ar.define(t=>new e(t),i)}}class b2{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(t){if(js(i.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){js(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(t){js(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const hX=wt.define(),w3=wt.define(),xv=wt.define(),uX=wt.define(),_3=wt.define(),dX=wt.define();function E$(n,e){let i=n.state.facet(dX);if(!i.length)return i;let t=i.map(s=>s instanceof Function?s(n):s),r=[];return Vi.spans(t,e.from,e.to,{point(){},span(s,o,l,c){let u=s-e.from,d=o-e.from,f=r;for(let m=l.length-1;m>=0;m--,c--){let g=l[m].spec.bidiIsolate,y;if(g==null&&(g=C2e(e.text,u,d)),c>0&&f.length&&(y=f[f.length-1]).to==u&&y.direction==g)y.to=d,f=y.inner;else{let x={from:u,to:d,direction:g,inner:[]};f.push(x),f=x.inner}}}}),r}const fX=wt.define();function pX(n){let e=0,i=0,t=0,r=0;for(let s of n.state.facet(fX)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(i=Math.max(i,o.right)),o.top!=null&&(t=Math.max(t,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:i,top:t,bottom:r}}const u0=wt.define();class jo{constructor(e,i,t,r){this.fromA=e,this.toA=i,this.fromB=t,this.toB=r}join(e){return new jo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,t=this;for(;i>0;i--){let r=e[i-1];if(!(r.fromA>t.toA)){if(r.toA<t.fromA)break;t=t.join(r),e.splice(i-1,1)}}return e.splice(i,0,t),e}static extendWithRanges(e,i){if(i.length==0)return e;let t=[];for(let r=0,s=0,o=0,l=0;;r++){let c=r==e.length?null:e[r],u=o-l,d=c?c.fromB:1e9;for(;s<i.length&&i[s]<d;){let f=i[s],m=i[s+1],g=Math.max(l,f),y=Math.min(d,m);if(g<=y&&new jo(g+u,y+u,g,y).addToSet(t),m>d)break;s+=2}if(!c)return t;new jo(c.fromA,c.toA,c.fromB,c.toB).addToSet(t),o=c.toA,l=c.toB}}}class _O{constructor(e,i,t){this.view=e,this.state=i,this.transactions=t,this.flags=0,this.startState=e.state,this.changes=ur.empty(this.startState.doc.length);for(let s of t)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,c)=>r.push(new jo(s,o,l,c))),this.changedRanges=r}static create(e,i,t){return new _O(e,i,t)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class P$ extends un{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Zt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new er],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new jo(0,0,0,e.state.doc.length)],0,null)}update(e){var i;let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:u,toA:d})=>d<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?r=this.domChanged.newSel.head:!I2e(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?M2e(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:d}=this.hasComposition;t=new jo(u,d,e.changes.mapPos(u,-1),e.changes.mapPos(d,1)).addToSet(t.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(St.ie||St.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),c=A2e(o,l,e.changes);return t=jo.extendWithRanges(t,c),!(this.flags&7)&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=St.chrome||St.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Zl&&o.widget instanceof rM&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,i,t){let r=t?t.range.addToSet(e.slice()):e,s=this.childCursor(i);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:c,toA:u,fromB:d,toB:f}=l,m,g,y,x;if(t&&t.range.fromB<f&&t.range.toB>d){let k=D0.build(this.view.state.doc,d,t.range.fromB,this.decorations,this.dynamicDecorationMap),M=D0.build(this.view.state.doc,t.range.toB,f,this.decorations,this.dynamicDecorationMap);g=k.breakAtStart,y=k.openStart,x=M.openEnd;let E=this.compositionView(t);M.breakAtStart?E.breakAfter=1:M.content.length&&E.merge(E.length,E.length,M.content[0],!1,M.openStart,0)&&(E.breakAfter=M.content[0].breakAfter,M.content.shift()),k.content.length&&E.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),m=k.content.concat(E).concat(M.content)}else({content:m,breakAtStart:g,openStart:y,openEnd:x}=D0.build(this.view.state.doc,d,f,this.decorations,this.dynamicDecorationMap));let{i:b,off:S}=s.findPos(u,1),{i:_,off:O}=s.findPos(c,-1);F7(this,_,O,b,S,m,g,y,x)}t&&this.fixCompositionDOM(t)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let i of e.transactions)for(let t of i.effects)t.is(cX)&&(this.editContextFormatting=t.value)}compositionView(e){let i=new ka(e.text.nodeValue);i.flags|=8;for(let{deco:r}of e.marks)i=new lc(r,[i],i.length);let t=new er;return t.append(i,0),t}fixCompositionDOM(e){let i=(s,o)=>{o.flags|=8|(o.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(o);let l=un.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},t=this.childPos(e.range.fromB,1),r=this.children[t.i];i(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)t=r.childPos(t.off,1),r=r.children[t.i],i(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let t=this.view.root.activeElement,r=t==this.dom,s=!r&&Ix(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t));if(!(r||i||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?c:this.moveToLine(this.domAtPos(l.head));if(St.gecko&&l.empty&&!this.hasComposition&&T2e(c)){let f=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(f,c.node.childNodes[c.offset]||null)),c=u=new es(f,0),o=!0}let d=this.view.observer.selectionRange;(o||!d.focusNode||(!I0(c.node,c.offset,d.anchorNode,d.anchorOffset)||!I0(u.node,u.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,l))&&(this.view.observer.ignore(()=>{St.android&&St.chrome&&this.dom.contains(d.focusNode)&&R2e(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=yv(this.view.root);if(f)if(l.empty){if(St.gecko){let m=E2e(c.node,c.offset);if(m&&m!=3){let g=(m==1?L7:B7)(c.node,c.offset);g&&(c=new es(g.node,g.offset))}}f.collapse(c.node,c.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(c.node,c.offset);try{f.extend(u.node,u.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([c,u]=[u,c]),m.setEnd(u.node,u.offset),m.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(m)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),t&&t.focus())}),this.view.observer.setSelectionRange(c,u)),this.impreciseAnchor=c.precise?null:new es(d.anchorNode,d.anchorOffset),this.impreciseHead=u.precise?null:new es(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,i){return this.hasComposition&&i.empty&&I0(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,t=yv(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!t||!i.empty||!i.assoc||!t.modify)return;let o=er.find(this,i.head);if(!o)return;let l=o.posAtStart;if(i.head==l||i.head==l+o.length)return;let c=this.coordsAt(i.head,-1),u=this.coordsAt(i.head,1);if(!c||!u||c.bottom>u.top)return;let d=this.domAtPos(i.head+i.assoc);t.collapse(d.node,d.offset),t.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=i.from&&t.collapse(r,s)}moveToLine(e){let i=this.dom,t;if(e.node!=i)return e;for(let r=e.offset;!t&&r<i.childNodes.length;r++){let s=un.get(i.childNodes[r]);s instanceof er&&(t=s.domAtPos(0))}for(let r=e.offset-1;!t&&r>=0;r--){let s=un.get(i.childNodes[r]);s instanceof er&&(t=s.domAtPos(s.length))}return t?new es(t.node,t.offset,!0):e}nearest(e){for(let i=e;i;){let t=un.get(i);if(t&&t.rootView==this)return t;i=i.parentNode}return null}posFromDOM(e,i){let t=this.nearest(e);if(!t)throw new RangeError("Trying to find position for a DOM position outside of the document");return t.localPosFromDOM(e,i)+t.posAtStart}domAtPos(e){let{i,off:t}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let r=this.children[i];if(t<r.length||r instanceof er)break;i++,t=0}return this.children[i].domAtPos(t)}coordsAt(e,i){let t=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],c=s-l.breakAfter,u=c-l.length;if(c<e)break;if(u<=e&&(u<e||l.covers(-1))&&(c>e||l.covers(1))&&(!t||l instanceof er&&!(t instanceof er&&i>=0)))t=l,r=u;else if(t&&u==e&&c==e&&l instanceof Zl&&Math.abs(i)<2){if(l.deco.startSide<0)break;o&&(t=null)}s=u}return t?t.coordsAt(e-r,i):null}coordsForChar(e){let{i,off:t}=this.childPos(e,1),r=this.children[i];if(!(r instanceof er))return null;for(;r.children.length;){let{i:l,off:c}=r.childPos(t,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}t=c}if(!(r instanceof ka))return null;let s=Lr(r.text,t);if(s==t)return null;let o=dd(r.dom,t,s).getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(l==o.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let i=[],{from:t,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,c=this.view.textDirection==wn.LTR;for(let u=0,d=0;d<this.children.length;d++){let f=this.children[d],m=u+f.length;if(m>r)break;if(u>=t){let g=f.dom.getBoundingClientRect();if(i.push(g.height),o){let y=f.dom.lastChild,x=y?bv(y):[];if(x.length){let b=x[x.length-1],S=c?b.right-g.left:g.right-b.left;S>l&&(l=S,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=m)}}}u=m+f.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?wn.RTL:wn.LTR}measureTextSize(){for(let s of this.children)if(s instanceof er){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),i,t,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=bv(e.firstChild)[0];i=e.getBoundingClientRect().height,t=s?s.width/27:7,r=s?s.height:i,e.remove()}),{lineHeight:i,charWidth:t,textHeight:r}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new U7(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let t=0,r=0;;r++){let s=r==i.viewports.length?null:i.viewports[r],o=s?s.from-1:this.length;if(o>t){let l=(i.lineBlockAt(o).bottom-i.lineBlockAt(t).top)/this.view.scaleY;e.push(Zt.replace({widget:new rM(l),block:!0,inclusive:!0,isBlockGap:!0}).range(t,o))}if(!s)break;t=s.to+1}return Zt.set(e)}updateDeco(){let e=1,i=this.view.state.facet(xv).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),t=!1,r=this.view.state.facet(uX).map((s,o)=>{let l=typeof s=="function";return l&&(t=!0),l?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=t,i.push(Vi.join(r))),this.decorations=[this.editContextFormatting,...i,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(lX))try{if(u(this.view,e.range,e))return!0}catch(d){js(this.view.state,d,"scroll handler")}let{range:i}=e,t=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),r;if(!t)return;!i.empty&&(r=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(t={left:Math.min(t.left,r.left),top:Math.min(t.top,r.top),right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)});let s=pX(this.view),o={left:t.left-s.left,top:t.top-s.top,right:t.right+s.right,bottom:t.bottom+s.bottom},{offsetWidth:l,offsetHeight:c}=this.view.scrollDOM;a2e(this.view.scrollDOM,o,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==wn.LTR)}}function T2e(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function mX(n,e){let i=n.observer.selectionRange;if(!i.focusNode)return null;let t=L7(i.focusNode,i.focusOffset),r=B7(i.focusNode,i.focusOffset),s=t||r;if(r&&t&&r.node!=t.node){let l=un.get(r.node);if(!l||l instanceof ka&&l.text!=r.node.nodeValue)s=r;else if(n.docView.lastCompositionAfterCursor){let c=un.get(t.node);!c||c instanceof ka&&c.text!=t.node.nodeValue||(s=r)}}if(n.docView.lastCompositionAfterCursor=s!=t,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function M2e(n,e,i){let t=mX(n,i);if(!t)return null;let{node:r,from:s,to:o}=t,l=r.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(t.from,t.to)!=l)return null;let c=e.invertedDesc,u=new jo(c.mapPos(s),c.mapPos(o),s,o),d=[];for(let f=r.parentNode;;f=f.parentNode){let m=un.get(f);if(m instanceof lc)d.push({node:f,deco:m.mark});else{if(m instanceof er||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:u,text:r,marks:d,line:f};if(f!=n.contentDOM)d.push({node:f,deco:new py({inclusive:!0,attributes:m2e(f),tagName:f.tagName.toLowerCase()})});else return null}}}function E2e(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let P2e=class{constructor(){this.changes=[]}compareRange(e,i){nM(e,i,this.changes)}comparePoint(e,i){nM(e,i,this.changes)}};function A2e(n,e,i){let t=new P2e;return Vi.compare(n,e,i,t),t.changes}function R2e(n,e){for(let i=n;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function I2e(n,e){let i=!1;return e&&n.iterChangedRanges((t,r)=>{t<e.to&&r>e.from&&(i=!0)}),i}function D2e(n,e,i=1){let t=n.charCategorizer(e),r=n.doc.lineAt(e),s=e-r.from;if(r.length==0)return Ze.cursor(e);s==0?i=1:s==r.length&&(i=-1);let o=s,l=s;i<0?o=Lr(r.text,s,!1):l=Lr(r.text,s);let c=t(r.text.slice(o,l));for(;o>0;){let u=Lr(r.text,o,!1);if(t(r.text.slice(u,o))!=c)break;o=u}for(;l<r.length;){let u=Lr(r.text,l);if(t(r.text.slice(l,u))!=c)break;l=u}return Ze.range(o+r.from,l+r.from)}function N2e(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function $2e(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function x2(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function A$(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function R$(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function cM(n,e,i){let t,r,s,o,l=!1,c,u,d,f;for(let y=n.firstChild;y;y=y.nextSibling){let x=bv(y);for(let b=0;b<x.length;b++){let S=x[b];r&&x2(r,S)&&(S=A$(R$(S,r.bottom),r.top));let _=N2e(e,S),O=$2e(i,S);if(_==0&&O==0)return y.nodeType==3?I$(y,e,i):cM(y,e,i);if(!t||o>O||o==O&&s>_){t=y,r=S,s=_,o=O;let k=O?i<S.top?-1:1:_?e<S.left?-1:1:0;l=!k||(k>0?b<x.length-1:b>0)}_==0?i>S.bottom&&(!d||d.bottom<S.bottom)?(c=y,d=S):i<S.top&&(!f||f.top>S.top)&&(u=y,f=S):d&&x2(d,S)?d=R$(d,S.bottom):f&&x2(f,S)&&(f=A$(f,S.top))}}if(d&&d.bottom>=i?(t=c,r=d):f&&f.top<=i&&(t=u,r=f),!t)return{node:n,offset:0};let m=Math.max(r.left,Math.min(r.right,e));if(t.nodeType==3)return I$(t,m,i);if(l&&t.contentEditable!="false")return cM(t,m,i);let g=Array.prototype.indexOf.call(n.childNodes,t)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:g}}function I$(n,e,i){let t=n.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<t;l++){let c=dd(n,l,l+1).getClientRects();for(let u=0;u<c.length;u++){let d=c[u];if(d.top==d.bottom)continue;o||(o=e-d.left);let f=(d.top>i?d.top-i:i-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&f<s){let m=e>=(d.left+d.right)/2,g=m;if((St.chrome||St.gecko)&&dd(n,l).getBoundingClientRect().left==d.right&&(g=!m),f<=0)return{node:n,offset:l+(g?1:0)};r=l+(g?1:0),s=f}}}return{node:n,offset:r>-1?r:o>0?n.nodeValue.length:0}}function gX(n,e,i,t=-1){var r,s;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,c,{docHeight:u}=n.viewState,{x:d,y:f}=e,m=f-l;if(m<0)return 0;if(m>u)return n.state.doc.length;for(let k=n.viewState.heightOracle.textHeight/2,M=!1;c=n.elementAtHeight(m),c.type!=_s.Text;)for(;m=t>0?c.bottom+k:c.top-k,!(m>=0&&m<=u);){if(M)return i?null:0;M=!0,t=-t}f=l+m;let g=c.from;if(g<n.viewport.from)return n.viewport.from==0?0:i?null:D$(n,o,c,d,f);if(g>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:i?null:D$(n,o,c,d,f);let y=n.dom.ownerDocument,x=n.root.elementFromPoint?n.root:y,b=x.elementFromPoint(d,f);b&&!n.contentDOM.contains(b)&&(b=null),b||(d=Math.max(o.left+1,Math.min(o.right-1,d)),b=x.elementFromPoint(d,f),b&&!n.contentDOM.contains(b)&&(b=null));let S,_=-1;if(b&&((r=n.docView.nearest(b))===null||r===void 0?void 0:r.isEditable)!=!1){if(y.caretPositionFromPoint){let k=y.caretPositionFromPoint(d,f);k&&({offsetNode:S,offset:_}=k)}else if(y.caretRangeFromPoint){let k=y.caretRangeFromPoint(d,f);k&&({startContainer:S,startOffset:_}=k,(!n.contentDOM.contains(S)||St.safari&&V2e(S,_,d)||St.chrome&&L2e(S,_,d))&&(S=void 0))}}if(!S||!n.docView.dom.contains(S)){let k=er.find(n.docView,g);if(!k)return m>c.top+c.height/2?c.to:c.from;({node:S,offset:_}=cM(k.dom,d,f))}let O=n.docView.nearest(S);if(!O)return null;if(O.isWidget&&((s=O.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=O.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?O.posAtStart:O.posAtEnd}else return O.localPosFromDOM(S,_)+O.posAtStart}function D$(n,e,i,t,r){let s=Math.round((t-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&i.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,c=Math.floor((r-i.top-(n.defaultLineHeight-l)*.5)/l);s+=c*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(i.from,i.to);return i.from+YT(o,s,n.state.tabSize)}function V2e(n,e,i){let t;if(n.nodeType!=3||e!=(t=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return dd(n,t-1,t).getBoundingClientRect().left>i}function L2e(n,e,i){if(e!=0)return!1;for(let r=n;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let t=n.nodeType==1?n.getBoundingClientRect():dd(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return i-t.left>5}function hM(n,e){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){for(let t of i.type)if(t.to>e||t.to==e&&(t.to==i.to||t.type==_s.Text))return t}return i}function B2e(n,e,i,t){let r=hM(n,e.head),s=!t||r.type!=_s.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(r.from),c=n.posAtCoords({x:i==(l==wn.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(c!=null)return Ze.cursor(c,i?-1:1)}return Ze.cursor(i?r.to:r.from,i?-1:1)}function N$(n,e,i,t){let r=n.state.doc.lineAt(e.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let l=e,c=null;;){let u=S2e(r,s,o,l,i),d=J7;if(!u){if(r.number==(i?n.state.doc.lines:1))return l;d=`
`,r=n.state.doc.line(r.number+(i?1:-1)),s=n.bidiSpans(r),u=n.visualLineSide(r,!i)}if(c){if(!c(d))return l}else{if(!t)return u;c=t(d)}l=u}}function U2e(n,e,i){let t=n.state.charCategorizer(e),r=t(i);return s=>{let o=t(s);return r==Tn.Space&&(r=o),r==o}}function F2e(n,e,i,t){let r=e.head,s=i?1:-1;if(r==(i?n.state.doc.length:0))return Ze.cursor(r,e.assoc);let o=e.goalColumn,l,c=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(r,e.assoc||-1),d=n.documentTop;if(u)o==null&&(o=u.left-c.left),l=s<0?u.top:u.bottom;else{let g=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-g.from))),l=(s<0?g.top:g.bottom)+d}let f=c.left+o,m=t??n.viewState.heightOracle.textHeight>>1;for(let g=0;;g+=10){let y=l+(m+g)*s,x=gX(n,{x:f,y},!1,s);if(y<c.top||y>c.bottom||(s<0?x<r:x>r)){let b=n.docView.coordsForChar(x),S=!b||y<b.top?-1:1;return Ze.cursor(x,S,void 0,o)}}}function Dx(n,e,i){for(;;){let t=0;for(let r of n)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let c=t||i||(e-s<o-e?-1:1);e=c<0?s:o,t=c}});if(!t)return e}}function O2(n,e,i){let t=Dx(n.state.facet(_3).map(r=>r(n)),i.from,e.head>i.from?-1:1);return t==i.from?i:Ze.cursor(t,t<i.from?1:-1)}const d0="";class z2e{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(Ui.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=d0}readRange(e,i){if(!e)return this;let t=e.parentNode;for(let r=e;;){this.findPointBefore(t,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==i)break;let l=un.get(r),c=un.get(o);(l&&c?l.breakAfter:(l?l.breakAfter:OO(r))||OO(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(t,i),this}readTextNode(e){let i=e.nodeValue;for(let t of this.points)t.node==e&&(t.pos=this.text.length+Math.min(t.offset,i.length));for(let t=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=i.indexOf(this.lineSeparator,t),o=this.lineSeparator.length):(l=r.exec(i))&&(s=l.index,o=l[0].length),this.append(i.slice(t,s<0?i.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=o-1);t=s+o}}readNode(e){if(e.cmIgnore)return;let i=un.get(e),t=i&&i.overrideDOMText;if(t!=null){this.findPointInside(e,t.length);for(let r=t.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let t of this.points)t.node==e&&e.childNodes[t.offset]==i&&(t.pos=this.text.length)}findPointInside(e,i){for(let t of this.points)(e.nodeType==3?t.node==e:e.contains(t.node))&&(t.pos=this.text.length+(X2e(e,t.node,t.offset)?i:0))}}function X2e(n,e,i){for(;;){if(!e||i<ac(e))return!1;if(e==n)return!0;i=ud(e)+1,e=e.parentNode}}class $${constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}class W2e{constructor(e,i,t,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=i>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,t,0))){let l=s||o?[]:G2e(e),c=new z2e(l,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=Y2e(l,this.bounds.from)}else{let l=e.observer.selectionRange,c=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!ZT(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!ZT(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),d=e.viewport;if((St.ios||St.chrome)&&e.state.selection.main.empty&&c!=u&&(d.from>0||d.to<e.state.doc.length)){let f=Math.min(c,u),m=Math.max(c,u),g=d.from-f,y=d.to-m;(g==0||g==1||f==0)&&(y==0||y==-1||m==e.state.doc.length)&&(c=0,u=e.state.doc.length)}this.newSel=Ze.single(u,c)}}}function vX(n,e){let i,{newSel:t}=e,r=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,c=r.from,u=null;(s===8||St.android&&e.text.length<l-o)&&(c=r.to,u="end");let d=H2e(n.state.doc.sliceString(o,l,d0),e.text,c-o,u);d&&(St.chrome&&s==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==d0+d0&&d.toB--,i={from:o+d.from,to:o+d.toA,insert:zi.of(e.text.slice(d.from,d.toB).split(d0))})}else t&&(!n.hasFocus&&n.state.facet(rh)||t.main.eq(r))&&(t=null);if(!i&&!t)return!1;if(!i&&e.typeOver&&!r.empty&&t&&t.main.empty?i={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:i&&i.from>=r.from&&i.to<=r.to&&(i.from!=r.from||i.to!=r.to)&&r.to-r.from-(i.to-i.from)<=4?i={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,i.from).append(i.insert).append(n.state.doc.slice(i.to,r.to))}:(St.mac||St.android)&&i&&i.from==i.to&&i.from==r.head-1&&/^\. ?$/.test(i.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(t&&i.insert.length==2&&(t=Ze.single(t.main.anchor-1,t.main.head-1)),i={from:r.from,to:r.to,insert:zi.of([" "])}):St.chrome&&i&&i.from==i.to&&i.from==r.head&&i.insert.toString()==`
 `&&n.lineWrapping&&(t&&(t=Ze.single(t.main.anchor-1,t.main.head-1)),i={from:r.from,to:r.to,insert:zi.of([" "])}),i)return S3(n,i,t,s);if(t&&!t.main.eq(r)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:t,scrollIntoView:o,userEvent:l}),!0}else return!1}function S3(n,e,i,t=-1){if(St.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(St.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Jf(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||t==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Jf(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Jf(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,l=()=>o||(o=Q2e(n,e,i));return n.state.facet(rX).some(c=>c(n,e.from,e.to,s,l))||n.dispatch(l()),!0}function Q2e(n,e,i){let t,r=n.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",c=s.to>e.to?r.sliceDoc(e.to,s.to):"";t=r.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+c))}else{let l=r.changes(e),c=i&&i.main.to<=l.newLength?i.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=n.state.sliceDoc(e.from,e.to),d,f=i&&mX(n,i.main.head);if(f){let y=e.insert.length-(e.to-e.from);d={from:f.from,to:f.to-y}}else d=n.state.doc.lineAt(s.head);let m=s.to-e.to,g=s.to-s.from;t=r.changeByRange(y=>{if(y.from==s.from&&y.to==s.to)return{changes:l,range:c||y.map(l)};let x=y.to-m,b=x-u.length;if(y.to-y.from!=g||n.state.sliceDoc(b,x)!=u||y.to>=d.from&&y.from<=d.to)return{range:y};let S=r.changes({from:b,to:x,insert:e.insert}),_=y.to-s.to;return{changes:S,range:c?Ze.range(Math.max(0,c.anchor+_),Math.max(0,c.head+_)):y.map(S)}})}else t={changes:l,selection:c&&r.selection.replaceRange(c)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),r.update(t,{userEvent:o,scrollIntoView:!0})}function H2e(n,e,i,t){let r=Math.min(n.length,e.length),s=0;for(;s<r&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(t=="end"){let c=Math.max(0,s-Math.min(o,l));i-=o+c-s}if(o<s&&n.length<e.length){let c=i<=s&&i>=o?s-i:0;s-=c,l=s+(l-o),o=s}else if(l<s){let c=i<=s&&i>=l?s-i:0;s-=c,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function G2e(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:i,anchorOffset:t,focusNode:r,focusOffset:s}=n.observer.selectionRange;return i&&(e.push(new $$(i,t)),(r!=i||s!=t)&&e.push(new $$(r,s))),e}function Y2e(n,e){if(n.length==0)return null;let i=n[0].pos,t=n.length==2?n[1].pos:i;return i>-1&&t>-1?Ze.single(i+e,t+e):null}class j2e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,St.safari&&e.contentDOM.addEventListener("input",()=>null),St.gecko&&uke(e.contentDOM.ownerDocument)}handleEvent(e){!nke(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,i){let t=this.handlers[e];if(t){for(let r of t.observers)r(this.view,i);for(let r of t.handlers){if(i.defaultPrevented)break;if(r(this.view,i)){i.preventDefault();break}}}}ensureHandlers(e){let i=q2e(e),t=this.handlers,r=this.view.contentDOM;for(let s in i)if(s!="scroll"){let o=!i[s].handlers.length,l=t[s];l&&o!=!l.handlers.length&&(r.removeEventListener(s,this.handleEvent),l=null),l||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in t)s!="scroll"&&!i[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=i}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&bX.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),St.android&&St.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return St.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((i=yX.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||Z2e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=i||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let i=this.pendingIOSKey;return!i||i.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Jf(this.view.contentDOM,i.key,i.keyCode,i instanceof KeyboardEvent?i:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:St.safari&&!St.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function V$(n,e){return(i,t)=>{try{return e.call(n,t,i)}catch(r){js(i.state,r)}}}function q2e(n){let e=Object.create(null);function i(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let t of n){let r=t.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&i(s).handlers.push(V$(t.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&i(s).observers.push(V$(t.value,o))}}for(let t in Ta)i(t).handlers.push(Ta[t]);for(let t in Ko)i(t).observers.push(Ko[t]);return e}const yX=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Z2e="dthko",bX=[16,17,18,20,91,92,224,225],Nb=6;function $b(n){return Math.max(0,n)*.7+8}function K2e(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class J2e{constructor(e,i,t,r){this.view=e,this.startEvent=i,this.style=t,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParents=l2e(e.contentDOM),this.atoms=e.state.facet(_3).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(Ui.allowMultipleSelections)&&eke(e,i),this.dragging=ike(e,i)&&wX(i)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&K2e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,t=0,r=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=pX(this.view);e.clientX-c.left<=r+Nb?i=-$b(r-e.clientX):e.clientX+c.right>=o-Nb&&(i=$b(e.clientX-o)),e.clientY-c.top<=s+Nb?t=-$b(s-e.clientY):e.clientY+c.bottom>=l-Nb&&(t=$b(e.clientY-l)),this.setScrollSpeed(i,t)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:i}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),i&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=i,i=0),(e||i)&&this.view.win.scrollBy(e,i),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let t=0;t<e.ranges.length;t++){let r=e.ranges[t],s=null;if(r.empty){let o=Dx(this.atoms,r.from,0);o!=r.from&&(s=Ze.cursor(o,-1))}else{let o=Dx(this.atoms,r.from,-1),l=Dx(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=Ze.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(i||(i=e.ranges.slice()),i[t]=s)}return i?Ze.create(i,e.mainIndex):e}select(e){let{view:i}=this,t=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!t.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(i=>i.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function eke(n,e){let i=n.state.facet(eX);return i.length?i[0](e):St.mac?e.metaKey:e.ctrlKey}function tke(n,e){let i=n.state.facet(tX);return i.length?i[0](e):St.mac?!e.altKey:!e.ctrlKey}function ike(n,e){let{main:i}=n.state.selection;if(i.empty)return!1;let t=yv(n.root);if(!t||t.rangeCount==0)return!0;let r=t.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function nke(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,t;i!=n.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(t=un.get(i))&&t.ignoreEvent(e))return!1;return!0}const Ta=Object.create(null),Ko=Object.create(null),xX=St.ie&&St.ie_version<15||St.ios&&St.webkit_version<604;function rke(n){let e=n.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{n.focus(),i.remove(),OX(n,i.value)},50)}function a_(n,e,i){for(let t of n.facet(e))i=t(i,n);return i}function OX(n,e){e=a_(n.state,x3,e);let{state:i}=n,t,r=1,s=i.toText(e),o=s.lines==i.selection.ranges.length;if(uM!=null&&i.selection.ranges.every(c=>c.empty)&&uM==s.toString()){let c=-1;t=i.changeByRange(u=>{let d=i.doc.lineAt(u.from);if(d.from==c)return{range:u};c=d.from;let f=i.toText((o?s.line(r++).text:e)+i.lineBreak);return{changes:{from:d.from,insert:f},range:Ze.cursor(u.from+f.length)}})}else o?t=i.changeByRange(c=>{let u=s.line(r++);return{changes:{from:c.from,to:c.to,insert:u.text},range:Ze.cursor(c.from+u.length)}}):t=i.replaceSelection(s);n.dispatch(t,{userEvent:"input.paste",scrollIntoView:!0})}Ko.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ta.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Ko.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Ko.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ta.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let t of n.state.facet(iX))if(i=t(n,e),i)break;if(!i&&e.button==0&&(i=ake(n,e)),i){let t=!n.hasFocus;n.inputState.startMouseSelection(new J2e(n,e,i,t)),t&&n.observer.ignore(()=>{N7(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function L$(n,e,i,t){if(t==1)return Ze.cursor(e,i);if(t==2)return D2e(n.state,e,i);{let r=er.find(n.docView,e),s=n.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,Ze.range(o,l)}}let B$=(n,e,i)=>e>=i.top&&e<=i.bottom&&n>=i.left&&n<=i.right;function ske(n,e,i,t){let r=er.find(n.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&B$(i,t,o))return-1;let l=r.coordsAt(s,1);return l&&B$(i,t,l)?1:o&&o.bottom>=t?-1:1}function U$(n,e){let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:ske(n,i,e.clientX,e.clientY)}}const oke=St.ie&&St.ie_version<=11;let F$=null,z$=0,X$=0;function wX(n){if(!oke)return n.detail;let e=F$,i=X$;return F$=n,X$=Date.now(),z$=!e||i>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(z$+1)%3:1}function ake(n,e){let i=U$(n,e),t=wX(e),r=n.state.selection;return{update(s){s.docChanged&&(i.pos=s.changes.mapPos(i.pos),r=r.map(s.changes))},get(s,o,l){let c=U$(n,s),u,d=L$(n,c.pos,c.bias,t);if(i.pos!=c.pos&&!o){let f=L$(n,i.pos,i.bias,t),m=Math.min(f.from,d.from),g=Math.max(f.to,d.to);d=m<d.from?Ze.range(m,g):Ze.range(g,m)}return o?r.replaceRange(r.main.extend(d.from,d.to)):l&&t==1&&r.ranges.length>1&&(u=lke(r,c.pos))?u:l?r.addRange(d):Ze.create([d])}}}function lke(n,e){for(let i=0;i<n.ranges.length;i++){let{from:t,to:r}=n.ranges[i];if(t<=e&&r>=e)return Ze.create(n.ranges.slice(0,i).concat(n.ranges.slice(i+1)),n.mainIndex==i?0:n.mainIndex-(n.mainIndex>i?1:0))}return null}Ta.dragstart=(n,e)=>{let{selection:{main:i}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=i.to||o<=i.from)&&(i=Ze.range(s,o))}}let{inputState:t}=n;return t.mouseSelection&&(t.mouseSelection.dragging=!0),t.draggedContent=i,e.dataTransfer&&(e.dataTransfer.setData("Text",a_(n.state,O3,n.state.sliceDoc(i.from,i.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ta.dragend=n=>(n.inputState.draggedContent=null,!1);function W$(n,e,i,t){if(i=a_(n.state,x3,i),!i)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=t&&s&&tke(n,e)?{from:s.from,to:s.to}:null,l={from:r,insert:i},c=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ta.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let i=e.dataTransfer.files;if(i&&i.length){let t=Array(i.length),r=0,s=()=>{++r==i.length&&W$(n,e,t.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<i.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(t[o]=l.result),s()},l.readAsText(i[o])}return!0}else{let t=e.dataTransfer.getData("Text");if(t)return W$(n,e,t,!0),!0}return!1};Ta.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let i=xX?null:e.clipboardData;return i?(OX(n,i.getData("text/plain")||i.getData("text/uri-list")),!0):(rke(n),!1)};function cke(n,e){let i=n.dom.parentNode;if(!i)return;let t=i.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.value=e,t.focus(),t.selectionEnd=e.length,t.selectionStart=0,setTimeout(()=>{t.remove(),n.focus()},50)}function hke(n){let e=[],i=[],t=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),i.push(r));if(!e.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(e.push(o.text),i.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}t=!0}return{text:a_(n,O3,e.join(n.lineBreak)),ranges:i,linewise:t}}let uM=null;Ta.copy=Ta.cut=(n,e)=>{let{text:i,ranges:t,linewise:r}=hke(n.state);if(!i&&!r)return!1;uM=r?i:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:t,scrollIntoView:!0,userEvent:"delete.cut"});let s=xX?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",i),!0):(cke(n,i),!1)};const _X=fc.define();function SX(n,e){let i=[];for(let t of n.facet(sX)){let r=t(n,e);r&&i.push(r)}return i?n.update({effects:i,annotations:_X.of(!0)}):null}function CX(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let i=SX(n.state,e);i?n.dispatch(i):n.update([])}},10)}Ko.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),CX(n)};Ko.blur=n=>{n.observer.clearSelectionRange(),CX(n)};Ko.compositionstart=Ko.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Ko.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,St.chrome&&St.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Ko.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ta.beforeinput=(n,e)=>{var i,t;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(i=e.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],c=n.posAtDOM(l.startContainer,l.startOffset),u=n.posAtDOM(l.endContainer,l.endOffset);return S3(n,{from:c,to:u,insert:n.state.toText(s)},null),!0}}let r;if(St.chrome&&St.android&&(r=yX.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return St.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),St.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Ko.compositionend(n,e),20),!1};const Q$=new Set;function uke(n){Q$.has(n)||(Q$.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const H$=["pre-wrap","normal","pre-line","break-spaces"];let Pp=!1;function G$(){Pp=!1}class dke{constructor(e){this.lineWrapping=e,this.doc=zi.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,i){let t=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(t+=Math.max(0,Math.ceil((i-e-t*this.lineLength*.5)/this.lineLength))),this.lineHeight*t}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return H$.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let t=0;t<e.length;t++){let r=e[t];r<0?t++:this.heightSamples[Math.floor(r*10)]||(i=!0,this.heightSamples[Math.floor(r*10)]=!0)}return i}refresh(e,i,t,r,s,o){let l=H$.indexOf(e)>-1,c=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=i,this.charWidth=t,this.textHeight=r,this.lineLength=s,c){this.heightSamples={};for(let u=0;u<o.length;u++){let d=o[u];d<0?u++:this.heightSamples[Math.floor(d*10)]=!0}}return c}}class fke{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class Za{constructor(e,i,t,r,s){this.from=e,this.length=i,this.top=t,this.height=r,this._content=s}get type(){return typeof this._content=="number"?_s.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Mh?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Za(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var xn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(xn||(xn={}));const Nx=.001;class Ss{constructor(e,i,t=2){this.length=e,this.height=i,this.flags=t}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Nx&&(Pp=!0),this.height=e)}replace(e,i,t){return Ss.of(t)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,t,r){let s=this,o=t.doc;for(let l=r.length-1;l>=0;l--){let{fromA:c,toA:u,fromB:d,toB:f}=r[l],m=s.lineAt(c,xn.ByPosNoHeight,t.setDoc(i),0,0),g=m.to>=u?m:s.lineAt(u,xn.ByPosNoHeight,t,0,0);for(f+=g.to-u,u=g.to;l>0&&m.from<=r[l-1].toA;)c=r[l-1].fromA,d=r[l-1].fromB,l--,c<m.from&&(m=s.lineAt(c,xn.ByPosNoHeight,t,0,0));d+=m.from-c,c=m.from;let y=C3.build(t.setDoc(o),e,d,f);s=SO(s,s.replace(c,u,y))}return s.updateHeight(t,0)}static empty(){return new go(0,0)}static of(e){if(e.length==1)return e[0];let i=0,t=e.length,r=0,s=0;for(;;)if(i==t)if(r>s*2){let l=e[i-1];l.break?e.splice(--i,1,l.left,null,l.right):e.splice(--i,1,l.left,l.right),t+=1+l.break,r-=l.size}else if(s>r*2){let l=e[t];l.break?e.splice(t,1,l.left,null,l.right):e.splice(t,1,l.left,l.right),t+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[i++];l&&(r+=l.size)}else{let l=e[--t];l&&(s+=l.size)}let o=0;return e[i-1]==null?(o=1,i--):e[i]==null&&(o=1,t++),new pke(Ss.of(e.slice(0,i)),o,Ss.of(e.slice(t)))}}function SO(n,e){return n==e?n:(n.constructor!=e.constructor&&(Pp=!0),e)}Ss.prototype.size=1;class kX extends Ss{constructor(e,i,t){super(e,i),this.deco=t}blockAt(e,i,t,r){return new Za(r,this.length,t,this.height,this.deco||0)}lineAt(e,i,t,r,s){return this.blockAt(0,t,r,s)}forEachLine(e,i,t,r,s,o){e<=s+this.length&&i>=s&&o(this.blockAt(0,t,r,s))}updateHeight(e,i=0,t=!1,r){return r&&r.from<=i&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class go extends kX{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,t,r){return new Za(r,this.length,t,this.height,this.breaks)}replace(e,i,t){let r=t[0];return t.length==1&&(r instanceof go||r instanceof Ir&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ir?r=new go(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ss.of(t)}updateHeight(e,i=0,t=!1,r){return r&&r.from<=i&&r.more?this.setHeight(r.heights[r.index++]):(t||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ir extends Ss{constructor(e){super(e,0)}heightMetrics(e,i){let t=e.doc.lineAt(i).number,r=e.doc.lineAt(i+this.length).number,s=r-t+1,o,l=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*s);o=c/s,this.length>s+1&&(l=(this.height-c)/(this.length-s-1))}else o=this.height/s;return{firstLine:t,lastLine:r,perLine:o,perChar:l}}blockAt(e,i,t,r){let{firstLine:s,lastLine:o,perLine:l,perChar:c}=this.heightMetrics(i,r);if(i.lineWrapping){let u=r+(e<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-t)/this.height))*this.length)),d=i.doc.lineAt(u),f=l+d.length*c,m=Math.max(t,e-f/2);return new Za(d.from,d.length,m,f,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-t)/l))),{from:d,length:f}=i.doc.line(s+u);return new Za(d,f,t+l*u,l,0)}}lineAt(e,i,t,r,s){if(i==xn.ByHeight)return this.blockAt(e,t,r,s);if(i==xn.ByPosNoHeight){let{from:g,to:y}=t.doc.lineAt(e);return new Za(g,y-g,0,0,0)}let{firstLine:o,perLine:l,perChar:c}=this.heightMetrics(t,s),u=t.doc.lineAt(e),d=l+u.length*c,f=u.number-o,m=r+l*f+c*(u.from-s-f);return new Za(u.from,u.length,Math.max(r,Math.min(m,r+this.height-d)),d,0)}forEachLine(e,i,t,r,s,o){e=Math.max(e,s),i=Math.min(i,s+this.length);let{firstLine:l,perLine:c,perChar:u}=this.heightMetrics(t,s);for(let d=e,f=r;d<=i;){let m=t.doc.lineAt(d);if(d==e){let y=m.number-l;f+=c*y+u*(e-s-y)}let g=c+u*m.length;o(new Za(m.from,m.length,f,g,0)),f+=g,d=m.to+1}}replace(e,i,t){let r=this.length-i;if(r>0){let s=t[t.length-1];s instanceof Ir?t[t.length-1]=new Ir(s.length+r):t.push(null,new Ir(r-1))}if(e>0){let s=t[0];s instanceof Ir?t[0]=new Ir(e+s.length):t.unshift(new Ir(e-1),null)}return Ss.of(t)}decomposeLeft(e,i){i.push(new Ir(e-1),null)}decomposeRight(e,i){i.push(null,new Ir(this.length-e-1))}updateHeight(e,i=0,t=!1,r){let s=i+this.length;if(r&&r.from<=i+this.length&&r.more){let o=[],l=Math.max(i,r.from),c=-1;for(r.from>i&&o.push(new Ir(r.from-i-1).updateHeight(e,i));l<=s&&r.more;){let d=e.doc.lineAt(l).length;o.length&&o.push(null);let f=r.heights[r.index++];c==-1?c=f:Math.abs(f-c)>=Nx&&(c=-2);let m=new go(d,f);m.outdated=!1,o.push(m),l+=d+1}l<=s&&o.push(null,new Ir(s-l).updateHeight(e,l));let u=Ss.of(o);return(c<0||Math.abs(u.height-this.height)>=Nx||Math.abs(c-this.heightMetrics(e,i).perLine)>=Nx)&&(Pp=!0),SO(this,u)}else(t||this.outdated)&&(this.setHeight(e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class pke extends Ss{constructor(e,i,t){super(e.length+i+t.length,e.height+t.height,i|(e.outdated||t.outdated?2:0)),this.left=e,this.right=t,this.size=e.size+t.size}get break(){return this.flags&1}blockAt(e,i,t,r){let s=t+this.left.height;return e<s?this.left.blockAt(e,i,t,r):this.right.blockAt(e,i,s,r+this.left.length+this.break)}lineAt(e,i,t,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,c=i==xn.ByHeight?e<o:e<l,u=c?this.left.lineAt(e,i,t,r,s):this.right.lineAt(e,i,t,o,l);if(this.break||(c?u.to<l:u.from>l))return u;let d=i==xn.ByPosNoHeight?xn.ByPosNoHeight:xn.ByPos;return c?u.join(this.right.lineAt(l,d,t,o,l)):this.left.lineAt(l,d,t,r,s).join(u)}forEachLine(e,i,t,r,s,o){let l=r+this.left.height,c=s+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,i,t,r,s,o),i>=c&&this.right.forEachLine(e,i,t,l,c,o);else{let u=this.lineAt(c,xn.ByPos,t,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,t,r,s,o),u.to>=e&&u.from<=i&&o(u),i>u.to&&this.right.forEachLine(u.to+1,i,t,l,c,o)}}replace(e,i,t){let r=this.left.length+this.break;if(i<r)return this.balanced(this.left.replace(e,i,t),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,i-r,t));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of t)s.push(l);if(e>0&&Y$(s,o-1),i<this.length){let l=s.length;this.decomposeRight(i,s),Y$(s,l)}return Ss.of(s)}decomposeLeft(e,i){let t=this.left.length;if(e<=t)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(t++,e>=t&&i.push(null)),e>t&&this.right.decomposeLeft(e-t,i)}decomposeRight(e,i){let t=this.left.length,r=t+this.break;if(e>=r)return this.right.decomposeRight(e-r,i);e<t&&this.left.decomposeRight(e,i),this.break&&e<r&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?Ss.of(this.break?[e,null,i]:[e,i]):(this.left=SO(this.left,e),this.right=SO(this.right,i),this.setHeight(e.height+i.height),this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,t=!1,r){let{left:s,right:o}=this,l=i+s.length+this.break,c=null;return r&&r.from<=i+s.length&&r.more?c=s=s.updateHeight(e,i,t,r):s.updateHeight(e,i,t),r&&r.from<=l+o.length&&r.more?c=o=o.updateHeight(e,l,t,r):o.updateHeight(e,l,t),c?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Y$(n,e){let i,t;n[e]==null&&(i=n[e-1])instanceof Ir&&(t=n[e+1])instanceof Ir&&n.splice(e-1,3,new Ir(i.length+1+t.length))}const mke=5;class C3{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let t=Math.min(i,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof go?r.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new go(t-this.pos,-1)),this.writtenTo=t,i>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,t){if(e<i||t.heightRelevant){let r=t.widget?t.widget.estimatedHeight:0,s=t.widget?t.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=i-e;t.block?this.addBlock(new kX(o,r,t)):(o||s||r>=mke)&&this.addLineDeco(r,s,o)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new go(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let t=new Ir(i-e);return this.oracle.doc.lineAt(e).to==i&&(t.flags|=4),t}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof go)return e;let i=new go(0,-1);return this.nodes.push(i),i}addBlock(e){this.enterLine();let i=e.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i&&i.endSide>0&&(this.covering=e)}addLineDeco(e,i,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=i,this.writtenTo=this.pos=this.pos+t}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof go)&&!this.isCovered?this.nodes.push(new go(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let t=e;for(let r of this.nodes)r instanceof go&&r.updateHeight(this.oracle,t),t+=r?r.length:1;return this.nodes}static build(e,i,t,r){let s=new C3(t,e);return Vi.spans(i,t,r,s,0),s.finish(t)}}function gke(n,e,i){let t=new vke;return Vi.compare(n,e,i,t,0),t.changes}class vke{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,t,r){(e<i||t&&t.heightRelevant||r&&r.heightRelevant)&&nM(e,i,this.changes,5)}}function yke(n,e){let i=n.getBoundingClientRect(),t=n.ownerDocument,r=t.defaultView||window,s=Math.max(0,i.left),o=Math.min(r.innerWidth,i.right),l=Math.max(0,i.top),c=Math.min(r.innerHeight,i.bottom);for(let u=n.parentNode;u&&u!=t.body;)if(u.nodeType==1){let d=u,f=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&f.overflow!="visible"){let m=d.getBoundingClientRect();s=Math.max(s,m.left),o=Math.min(o,m.right),l=Math.max(l,m.top),c=Math.min(u==n.parentNode?r.innerHeight:c,m.bottom)}u=f.position=="absolute"||f.position=="fixed"?d.offsetParent:d.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-i.left,right:Math.max(s,o)-i.left,top:l-(i.top+e),bottom:Math.max(l,c)-(i.top+e)}}function bke(n,e){let i=n.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class w2{constructor(e,i,t){this.from=e,this.to=i,this.size=t}static same(e,i){if(e.length!=i.length)return!1;for(let t=0;t<e.length;t++){let r=e[t],s=i[t];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,i){return Zt.replace({widget:new xke(this.size*(i?e.scaleY:e.scaleX),i)}).range(this.from,this.to)}}class xke extends Bh{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class j${constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=q$,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(w3).some(t=>typeof t!="function"&&t.class=="cm-lineWrapping");this.heightOracle=new dke(i),this.stateDeco=e.facet(xv).filter(t=>typeof t!="function"),this.heightMap=Ss.empty().applyChanges(this.stateDeco,zi.empty,this.heightOracle.setDoc(e.doc),[new jo(0,0,0,e.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Zt.set(this.lineGaps.map(t=>t.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let t=0;t<=1;t++){let r=t?i.head:i.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Vb(s,o))}}return this.viewports=e.sort((t,r)=>t.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?q$:new k3(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(f0(e,this.scaler))})}update(e,i=null){this.state=e.state;let t=this.stateDeco;this.stateDeco=this.state.facet(xv).filter(d=>typeof d!="function");let r=e.changedRanges,s=jo.extendWithRanges(r,gke(t,this.stateDeco,e?e.changes:ur.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);G$(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Pp)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let c=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<c.from||i.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,i));let u=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(aX)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,t=window.getComputedStyle(i),r=this.heightOracle,s=t.whiteSpace;this.defaultTextDirection=t.direction=="rtl"?wn.RTL:wn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=i.getBoundingClientRect(),c=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,d=0;if(l.width&&l.height){let{scaleX:k,scaleY:M}=D7(i,l);(k>.005&&Math.abs(this.scaleX-k)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=k,this.scaleY=M,u|=8,o=c=!0)}let f=(parseInt(t.paddingTop)||0)*this.scaleY,m=(parseInt(t.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=m)&&(this.paddingTop=f,this.paddingBottom=m,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=V7(e.scrollDOM);let y=(this.printing?bke:yke)(i,this.paddingTop),x=y.top-this.pixelViewport.top,b=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(c=!0)),!this.inView&&!this.scrollTarget)return 0;let _=l.width;if((this.contentDOMWidth!=_||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),c){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(_-this.contentDOMWidth)>r.charWidth){let{lineHeight:M,charWidth:E,textHeight:R}=e.docView.measureTextSize();o=M>0&&r.refresh(s,M,E,R,_/E,k),o&&(e.docView.minWidth=0,u|=8)}x>0&&b>0?d=Math.max(x,b):x<0&&b<0&&(d=Math.min(x,b)),G$();for(let M of this.viewports){let E=M.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(M);this.heightMap=(o?Ss.empty().applyChanges(this.stateDeco,zi.empty,this.heightOracle,[new jo(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new fke(M.from,E))}Pp&&(u|=2)}let O=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),u|=this.updateForViewport()),(u&2||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let t=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,c=new Vb(r.lineAt(o-t*1e3,xn.ByHeight,s,0,0).from,r.lineAt(l+(1-t)*1e3,xn.ByHeight,s,0,0).to);if(i){let{head:u}=i.range;if(u<c.from||u>c.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(u,xn.ByPos,s,0,0),m;i.y=="center"?m=(f.top+f.bottom)/2-d/2:i.y=="start"||i.y=="nearest"&&u<c.from?m=f.top:m=f.bottom-d,c=new Vb(r.lineAt(m-1e3/2,xn.ByHeight,s,0,0).from,r.lineAt(m+d+1e3/2,xn.ByHeight,s,0,0).to)}}return c}mapViewport(e,i){let t=i.mapPos(e.from,-1),r=i.mapPos(e.to,1);return new Vb(this.heightMap.lineAt(t,xn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,xn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},t=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,xn.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(i,xn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-t,250)))&&(i==this.state.doc.length||s>=l+Math.max(10,Math.min(t,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let t=[];for(let r of e)i.touchesRange(r.from,r.to)||t.push(new w2(i.mapPos(r.from),i.mapPos(r.to),r.size));return t}ensureLineGaps(e,i){let t=this.heightOracle.lineWrapping,r=t?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=wn.LTR&&!t)return[];let l=[],c=(d,f,m,g)=>{if(f-d<s)return;let y=this.state.selection.main,x=[y.from];y.empty||x.push(y.to);for(let S of x)if(S>d&&S<f){c(d,S-10,m,g),c(S+10,f,m,g);return}let b=wke(e,S=>S.from>=m.from&&S.to<=m.to&&Math.abs(S.from-d)<s&&Math.abs(S.to-f)<s&&!x.some(_=>S.from<_&&S.to>_));if(!b){if(f<m.to&&i&&t&&i.visibleRanges.some(S=>S.from<=f&&S.to>=f)){let S=i.moveToLineBoundary(Ze.cursor(f),!1,!0).head;S>d&&(f=S)}b=new w2(d,f,this.gapSize(m,d,f,g))}l.push(b)},u=d=>{if(d.length<o||d.type!=_s.Text)return;let f=Oke(d.from,d.to,this.stateDeco);if(f.total<o)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,g,y;if(t){let x=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,S;if(m!=null){let _=Bb(f,m),O=((this.visibleBottom-this.visibleTop)/2+x)/d.height;b=_-O,S=_+O}else b=(this.visibleTop-d.top-x)/d.height,S=(this.visibleBottom-d.top+x)/d.height;g=Lb(f,b),y=Lb(f,S)}else{let x=f.total*this.heightOracle.charWidth,b=r*this.heightOracle.charWidth,S,_;if(m!=null){let O=Bb(f,m),k=((this.pixelViewport.right-this.pixelViewport.left)/2+b)/x;S=O-k,_=O+k}else S=(this.pixelViewport.left-b)/x,_=(this.pixelViewport.right+b)/x;g=Lb(f,S),y=Lb(f,_)}g>d.from&&c(d.from,g,d,f),y<d.to&&c(y,d.to,d,f)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(u):u(d);return l}gapSize(e,i,t,r){let s=Bb(r,t)-Bb(r,i);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){w2.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Zt.set(e.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];Vi.spans(e,this.viewport.from,this.viewport.to,{span(r,s){i.push({from:r,to:s})},point(){}},20);let t=i.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=i[s].from||r.to!=i[s].to);return this.visibleRanges=i,t?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||f0(this.heightMap.lineAt(e,xn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(i=>i.top<=e&&i.bottom>=e)||f0(this.heightMap.lineAt(this.scaler.fromDOM(e),xn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return f0(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Vb{constructor(e,i){this.from=e,this.to=i}}function Oke(n,e,i){let t=[],r=n,s=0;return Vi.spans(i,n,e,{span(){},point(o,l){o>r&&(t.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(t.push({from:r,to:e}),s+=e-r),{total:s,ranges:t}}function Lb({total:n,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let t=Math.floor(n*i);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(t<=l)return s+t;t-=l}}function Bb(n,e){let i=0;for(let{from:t,to:r}of n.ranges){if(e<=r){i+=e-t;break}i+=r-t}return i/n.total}function wke(n,e){for(let i of n)if(e(i))return i}const q$={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class k3{constructor(e,i,t){let r=0,s=0,o=0;this.viewports=t.map(({from:l,to:c})=>{let u=i.lineAt(l,xn.ByPos,e,0,0).top,d=i.lineAt(c,xn.ByPos,e,0,0).bottom;return r+=d-u,{from:l,to:c,top:u,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(i.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let i=0,t=0,r=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||e<s.top)return r+(e-t)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);t=s.bottom,r=s.domBottom}}fromDOM(e){for(let i=0,t=0,r=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||e<s.domTop)return t+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);t=s.bottom,r=s.domBottom}}eq(e){return e instanceof k3?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((i,t)=>i.from==e.viewports[t].from&&i.to==e.viewports[t].to):!1}}function f0(n,e){if(e.scale==1)return n;let i=e.toDOM(n.top),t=e.toDOM(n.bottom);return new Za(n.from,n.length,i,t-i,Array.isArray(n._content)?n._content.map(r=>f0(r,e)):n._content)}const Ub=wt.define({combine:n=>n.join(" ")}),dM=wt.define({combine:n=>n.indexOf(!0)>-1}),fM=kh.newName(),TX=kh.newName(),MX=kh.newName(),EX={"&light":"."+TX,"&dark":"."+MX};function pM(n,e,i){return new kh(e,{finish(t){return/&/.test(t)?t.replace(/&\w*/,r=>{if(r=="&")return n;if(!i||!i[r])throw new RangeError(`Unsupported selector: ${r}`);return i[r]}):n+" "+t}})}const _ke=pM("."+fM,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},EX),Ske={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_2=St.ie&&St.ie_version<=11;class Cke{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new c2e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let t of i)this.queue.push(t);(St.ie&&St.ie_version<=11||St.ios&&e.composing)&&i.some(t=>t.type=="childList"&&t.removedNodes.length||t.type=="characterData"&&t.oldValue.length>t.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(St.chrome&&St.chrome_version<126)&&(this.editContext=new Tke(e),e.state.facet(rh)&&(e.contentDOM.editContext=this.editContext.editContext)),_2&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,t)=>i!=e[t]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,r=this.selectionRange;if(t.state.facet(rh)?t.root.activeElement!=this.dom:!Ix(t.dom,r))return;let s=r.anchorNode&&t.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(St.ie&&St.ie_version<=11||St.android&&St.chrome)&&!t.state.selection.main.empty&&r.focusNode&&I0(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=yv(e.root);if(!i)return!1;let t=St.safari&&e.root.nodeType==11&&s2e(this.dom.ownerDocument)==this.dom&&kke(this.view,i)||i;if(!t||this.selectionRange.eq(t))return!1;let r=Ix(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&u2e(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let t=this.dom;t;)if(t.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==t?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(t),t=t.assignedSlot||t.parentNode;else if(t.nodeType==11)t=t.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=i)t.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Ske),_2&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_2&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var t;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Jf(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((t=this.delayedAndroidKey)===null||t===void 0)&&t.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,t=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),i==-1?{from:i,to:t}=o:(i=Math.min(o.from,i),t=Math.max(o.to,t)))}return{from:i,to:t,typeOver:r}}readChange(){let{from:e,to:i,typeOver:t}=this.processRecords(),r=this.selectionChanged&&Ix(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new W2e(this.view,e,i,t);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let t=this.view.state,r=vX(this.view,i);return this.view.state==t&&(i.domChanged||i.newSel&&!i.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let t=Z$(i,e.previousSibling||e.target.previousSibling,-1),r=Z$(i,e.nextSibling||e.target.nextSibling,1);return{from:t?i.posAfter(t):i.posAtStart,to:r?i.posBefore(r):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(rh)!=e.state.facet(rh)&&(e.view.contentDOM.editContext=e.state.facet(rh)?this.editContext.editContext:null))}destroy(){var e,i,t;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(t=this.resizeScroll)===null||t===void 0||t.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Z$(n,e,i){for(;e;){let t=un.get(e);if(t&&t.parent==n)return t;let r=e.parentNode;e=r!=n.dom?r:i>0?e.nextSibling:e.previousSibling}return null}function K$(n,e){let i=e.startContainer,t=e.startOffset,r=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return I0(o.node,o.offset,r,s)&&([i,t,r,s]=[r,s,i,t]),{anchorNode:i,anchorOffset:t,focusNode:r,focusOffset:s}}function kke(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return K$(n,r)}let i=null;function t(r){r.preventDefault(),r.stopImmediatePropagation(),i=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),i?K$(n,i):null}class Tke{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let i=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=t=>{let{anchor:r}=e.state.selection.main,s={from:this.toEditorPos(t.updateRangeStart),to:this.toEditorPos(t.updateRangeEnd),insert:zi.of(t.text.split(`
`))};s.from==this.from&&r<this.from?s.from=r:s.to==this.to&&r>this.to&&(s.to=r),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,e.state.readOnly||S3(e,s,Ze.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=t=>{let r=[],s=null;for(let o=this.toEditorPos(t.rangeStart),l=this.toEditorPos(t.rangeEnd);o<l;o++){let c=e.coordsForChar(o);s=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||s||new DOMRect,r.push(s)}i.updateCharacterBounds(t.rangeStart,r)},this.handlers.textformatupdate=t=>{let r=[];for(let s of t.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let c=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;r.push(Zt.mark({attributes:{style:c}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:cX.of(Zt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let t in this.handlers)i.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let r=yv(t.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let i=0,t=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,l,c,u)=>{if(t)return;let d=u.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,i+=d,this.to+=d;return}else r=null,this.revertPending(e.state);if(s+=i,o+=i,o<=this.from)this.from+=d,this.to+=d;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){t=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=d}i+=d}),r&&!t&&this.revertPending(e.state),!t}update(e){let i=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||i)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:i}=e.selection.main;this.from=Math.max(0,i-1e4),this.to=Math.min(e.doc.length,i+1e4)}revertPending(e){let i=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(i.from),this.toContextPos(i.from+i.insert.length),e.doc.sliceString(i.from,i.to))}setSelection(e){let{main:i}=e.selection,t=this.toContextPos(Math.max(this.from,Math.min(this.to,i.anchor))),r=this.toContextPos(i.head);(this.editContext.selectionStart!=t||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(t,r)}rangeIsValid(e){let{head:i}=e.selection.main;return!(this.from>0&&i-this.from<500||this.to<e.doc.length&&this.to-i<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class vt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var i;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(r=>r.forEach(s=>t(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||h2e(e.parent)||document,this.viewState=new j$(e.state||Ui.create(e)),e.scrollTo&&e.scrollTo.is(Db)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(h0).map(r=>new b2(r));for(let r of this.plugins)r.update(this);this.observer=new Cke(this),this.inputState=new j2e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new P$(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((i=document.fonts)===null||i===void 0)&&i.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let i=e.length==1&&e[0]instanceof gr?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,t=!1,r,s=this.state;for(let m of e){if(m.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=m.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,c=null;e.some(m=>m.annotation(_X))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,c=SX(s,o),c||(l=1));let u=this.observer.delayedAndroidKey,d=null;if(u?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(d=null)):this.observer.clear(),s.facet(Ui.phrases)!=this.state.facet(Ui.phrases))return this.setState(s);r=_O.create(this,s,e),r.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(f&&(f=f.map(m.changes)),m.scrollIntoView){let{main:g}=m.state.selection;f=new ep(g.empty?g:Ze.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of m.effects)g.is(Db)&&(f=g.value.clip(this.state))}this.viewState.update(r,f),this.bidiCache=CO.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),i=this.docView.update(r),this.state.facet(u0)!=this.styleModules&&this.mountStyles(),t=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Ub)!=r.state.facet(Ub)&&(this.viewState.mustMeasureContent=!0),(i||t||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!r.empty)for(let m of this.state.facet(lM))try{m(r)}catch(g){js(this.state,g,"update listener")}(c||d)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),d&&!vX(this,d)&&u.force&&Jf(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new j$(e),this.plugins=e.facet(h0).map(t=>new b2(t)),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new P$(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(h0),t=e.state.facet(h0);if(i!=t){let r=[];for(let s of t){let o=i.indexOf(s);if(o<0)r.push(new b2(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);i!=t&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let i=e.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(t){js(this.state,t,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,t=this.scrollDOM,r=t.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(V7(t))s=-1,o=this.viewState.heightMap.height;else{let g=this.viewState.scrollAnchorAt(r);s=g.from,o=g.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];c&4||([this.measureRequests,u]=[u,this.measureRequests]);let d=u.map(g=>{try{return g.read(this)}catch(y){return js(this.state,y),J$}}),f=_O.create(this,this.state,[]),m=!1;f.flags|=c,i?i.flags|=c:i=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),m=this.docView.update(f),m&&this.docViewUpdate());for(let g=0;g<u.length;g++)if(d[g]!=J$)try{let y=u[g];y.write&&y.write(d[g],this)}catch(y){js(this.state,y)}if(m&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let y=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(y>1||y<-1){r=r+y,t.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let l of this.state.facet(lM))l(i)}get themeClasses(){return fM+" "+(this.state.facet(dM)?MX:TX)+" "+this.state.facet(Ub)}updateAttrs(){let e=eV(this,hX,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(rh)?"true":"false",class:"cm-content",style:`${St.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),eV(this,w3,i);let t=this.observer.ignore(()=>{let r=iM(this.contentDOM,this.contentAttrs,i),s=iM(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=i,t}showAnnouncements(e){let i=!0;for(let t of e)for(let r of t.effects)if(r.is(vt.announce)){i&&(this.announceDOM.textContent=""),i=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(u0);let e=this.state.facet(vt.cspNonce);kh.mount(this.root,this.styleModules.concat(_ke).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(t=>t.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,t){return O2(this,e,N$(this,e,i,t))}moveByGroup(e,i){return O2(this,e,N$(this,e,i,t=>U2e(this,e.head,t)))}visualLineSide(e,i){let t=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=t[i?t.length-1:0];return Ze.cursor(s.side(i,r)+e.from,s.forward(!i,r)?1:-1)}moveToLineBoundary(e,i,t=!0){return B2e(this,e,i,t)}moveVertically(e,i,t){return O2(this,e,F2e(this,e,i,t))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),gX(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let t=this.docView.coordsAt(e,i);if(!t||t.left==t.right)return t;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[ch.find(s,e-r.from,-1,i)];return s_(t,o.dir==wn.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(oX)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Mke)return K7(e.length);let i=this.textDirectionAt(e.from),t;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==i&&(s.fresh||Z7(s.isolates,t=E$(this,e))))return s.order;t||(t=E$(this,e));let r=_2e(e.text,i,t);return this.bidiCache.push(new CO(e.from,e.to,i,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||St.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{N7(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return Db.of(new ep(typeof e=="number"?Ze.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:i}=this.scrollDOM,t=this.viewState.scrollAnchorAt(e);return Db.of(new ep(Ze.cursor(t.from),"start","start",t.top-e,i,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ar.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ar.define(()=>({}),{eventObservers:e})}static theme(e,i){let t=kh.newName(),r=[Ub.of(t),u0.of(pM(`.${t}`,e))];return i&&i.dark&&r.push(dM.of(!0)),r}static baseTheme(e){return Cd.lowest(u0.of(pM("."+fM,e,EX)))}static findFromDOM(e){var i;let t=e.querySelector(".cm-content"),r=t&&un.get(t)||un.get(e);return((i=r==null?void 0:r.rootView)===null||i===void 0?void 0:i.view)||null}}vt.styleModule=u0;vt.inputHandler=rX;vt.clipboardInputFilter=x3;vt.clipboardOutputFilter=O3;vt.scrollHandler=lX;vt.focusChangeEffect=sX;vt.perLineTextDirection=oX;vt.exceptionSink=nX;vt.updateListener=lM;vt.editable=rh;vt.mouseSelectionStyle=iX;vt.dragMovesSelection=tX;vt.clickAddsSelectionRange=eX;vt.decorations=xv;vt.outerDecorations=uX;vt.atomicRanges=_3;vt.bidiIsolatedRanges=dX;vt.scrollMargins=fX;vt.darkTheme=dM;vt.cspNonce=wt.define({combine:n=>n.length?n[0]:""});vt.contentAttributes=w3;vt.editorAttributes=hX;vt.lineWrapping=vt.contentAttributes.of({class:"cm-lineWrapping"});vt.announce=vi.define();const Mke=4096,J$={};class CO{constructor(e,i,t,r,s,o){this.from=e,this.to=i,this.dir=t,this.isolates=r,this.fresh=s,this.order=o}static update(e,i){if(i.empty&&!e.some(s=>s.fresh))return e;let t=[],r=e.length?e[e.length-1].dir:wn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!i.touchesRange(o.from,o.to)&&t.push(new CO(i.mapPos(o.from,1),i.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return t}}function eV(n,e,i){for(let t=n.state.facet(e),r=t.length-1;r>=0;r--){let s=t[r],o=typeof s=="function"?s(n):s;o&&tM(o,i)}return i}const Eke=St.mac?"mac":St.windows?"win":St.linux?"linux":"key";function Pke(n,e){const i=n.split(/-(?!$)/);let t=i[i.length-1];t=="Space"&&(t=" ");let r,s,o,l;for(let c=0;c<i.length-1;++c){const u=i[c];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Fb(n,e,i){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),i!==!1&&e.shiftKey&&(n="Shift-"+n),n}const Ake=Cd.default(vt.domEventHandlers({keydown(n,e){return AX(PX(e.state),n,e,"editor")}})),T3=wt.define({enables:Ake}),tV=new WeakMap;function PX(n){let e=n.facet(T3),i=tV.get(e);return i||tV.set(e,i=Dke(e.reduce((t,r)=>t.concat(r),[]))),i}function Rke(n,e,i){return AX(PX(n.state),e,n,i)}let sh=null;const Ike=4e3;function Dke(n,e=Eke){let i=Object.create(null),t=Object.create(null),r=(o,l)=>{let c=t[o];if(c==null)t[o]=l;else if(c!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,c,u,d)=>{var f,m;let g=i[o]||(i[o]=Object.create(null)),y=l.split(/ (?!$)/).map(S=>Pke(S,e));for(let S=1;S<y.length;S++){let _=y.slice(0,S).join(" ");r(_,!0),g[_]||(g[_]={preventDefault:!0,stopPropagation:!1,run:[O=>{let k=sh={view:O,prefix:_,scope:o};return setTimeout(()=>{sh==k&&(sh=null)},Ike),!0}]})}let x=y.join(" ");r(x,!1);let b=g[x]||(g[x]={preventDefault:!1,stopPropagation:!1,run:((m=(f=g._any)===null||f===void 0?void 0:f.run)===null||m===void 0?void 0:m.slice())||[]});c&&b.run.push(c),u&&(b.preventDefault=!0),d&&(b.stopPropagation=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let d=i[u]||(i[u]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let m in d)d[m].run.push(g=>f(g,mM))}let c=o[e]||o.key;if(c)for(let u of l)s(u,c,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+c,o.shift,o.preventDefault,o.stopPropagation)}return i}let mM=null;function AX(n,e,i,t){mM=e;let r=r2e(e),s=Dr(r,0),o=zo(s)==r.length&&r!=" ",l="",c=!1,u=!1,d=!1;sh&&sh.view==i&&sh.scope==t&&(l=sh.prefix+" ",bX.indexOf(e.keyCode)<0&&(u=!0,sh=null));let f=new Set,m=b=>{if(b){for(let S of b.run)if(!f.has(S)&&(f.add(S),S(i)))return b.stopPropagation&&(d=!0),!0;b.preventDefault&&(b.stopPropagation&&(d=!0),u=!0)}return!1},g=n[t],y,x;return g&&(m(g[l+Fb(r,e,!o)])?c=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(St.windows&&e.ctrlKey&&e.altKey)&&(y=Th[e.keyCode])&&y!=r?(m(g[l+Fb(y,e,!0)])||e.shiftKey&&(x=vv[e.keyCode])!=r&&x!=y&&m(g[l+Fb(x,e,!1)]))&&(c=!0):o&&e.shiftKey&&m(g[l+Fb(r,e,!0)])&&(c=!0),!c&&m(g._any)&&(c=!0)),u&&(c=!0),c&&d&&e.stopPropagation(),mM=null,c}class gy{constructor(e,i,t,r,s){this.className=e,this.left=i,this.top=t,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,t){if(t.empty){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return[];let s=RX(e);return[new gy(i,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Nke(e,i,t)}}function RX(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==wn.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function iV(n,e,i,t){let r=n.coordsAtPos(e,i*2);if(!r)return t;let s=n.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,l=n.posAtCoords({x:s.left+1,y:o}),c=n.posAtCoords({x:s.right-1,y:o});return l==null||c==null?t:{from:Math.max(t.from,Math.min(l,c)),to:Math.min(t.to,Math.max(l,c))}}function Nke(n,e,i){if(i.to<=n.viewport.from||i.from>=n.viewport.to)return[];let t=Math.max(i.from,n.viewport.from),r=Math.min(i.to,n.viewport.to),s=n.textDirection==wn.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),c=RX(n),u=o.querySelector(".cm-line"),d=u&&window.getComputedStyle(u),f=l.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),m=l.right-(d?parseInt(d.paddingRight):0),g=hM(n,t),y=hM(n,r),x=g.type==_s.Text?g:null,b=y.type==_s.Text?y:null;if(x&&(n.lineWrapping||g.widgetLineBreaks)&&(x=iV(n,t,1,x)),b&&(n.lineWrapping||y.widgetLineBreaks)&&(b=iV(n,r,-1,b)),x&&b&&x.from==b.from&&x.to==b.to)return _(O(i.from,i.to,x));{let M=x?O(i.from,null,x):k(g,!1),E=b?O(null,i.to,b):k(y,!0),R=[];return(x||g).to<(b||y).from-(x&&b?1:0)||g.widgetLineBreaks>1&&M.bottom+n.defaultLineHeight/2<E.top?R.push(S(f,M.bottom,m,E.top)):M.bottom<E.top&&n.elementAtHeight((M.bottom+E.top)/2).type==_s.Text&&(M.bottom=E.top=(M.bottom+E.top)/2),_(M).concat(R).concat(_(E))}function S(M,E,R,P){return new gy(e,M-c.left,E-c.top-.01,R-M,P-E+.01)}function _({top:M,bottom:E,horizontal:R}){let P=[];for(let I=0;I<R.length;I+=2)P.push(S(R[I],M,R[I+1],E));return P}function O(M,E,R){let P=1e9,I=-1e9,T=[];function N($,B,U,Q,Z){let te=n.coordsAtPos($,$==R.to?-2:2),ce=n.coordsAtPos(U,U==R.from?2:-2);!te||!ce||(P=Math.min(te.top,ce.top,P),I=Math.max(te.bottom,ce.bottom,I),Z==wn.LTR?T.push(s&&B?f:te.left,s&&Q?m:ce.right):T.push(!s&&Q?f:ce.left,!s&&B?m:te.right))}let L=M??R.from,D=E??R.to;for(let $ of n.visibleRanges)if($.to>L&&$.from<D)for(let B=Math.max($.from,L),U=Math.min($.to,D);;){let Q=n.state.doc.lineAt(B);for(let Z of n.bidiSpans(Q)){let te=Z.from+Q.from,ce=Z.to+Q.from;if(te>=U)break;ce>B&&N(Math.max(te,B),M==null&&te<=L,Math.min(ce,U),E==null&&ce>=D,Z.dir)}if(B=Q.to+1,B>=U)break}return T.length==0&&N(L,M==null,D,E==null,n.textDirection),{top:P,bottom:I,horizontal:T}}function k(M,E){let R=l.top+(E?M.top:M.bottom);return{top:R,bottom:R,horizontal:[]}}}function $ke(n,e){return n.constructor==e.constructor&&n.eq(e)}class Vke{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet($x)!=e.state.facet($x)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let i=0,t=e.facet($x);for(;i<t.length&&t[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:i}=this.view;(e!=this.scaleX||i!=this.scaleY)&&(this.scaleX=e,this.scaleY=i,this.dom.style.transform=`scale(${1/e}, ${1/i})`)}draw(e){if(e.length!=this.drawn.length||e.some((i,t)=>!$ke(i,this.drawn[t]))){let i=this.dom.firstChild,t=0;for(let r of e)r.update&&i&&r.constructor&&this.drawn[t].constructor&&r.update(i,this.drawn[t])?(i=i.nextSibling,t++):this.dom.insertBefore(r.draw(),i);for(;i;){let r=i.nextSibling;i.remove(),i=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const $x=wt.define();function IX(n){return[ar.define(e=>new Vke(e,n)),$x.of(n)]}const DX=!St.ios,Ov=wt.define({combine(n){return pl(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function Lke(n={}){return[Ov.of(n),Bke,Uke,Fke,aX.of(!0)]}function NX(n){return n.startState.facet(Ov)!=n.state.facet(Ov)}const Bke=IX({above:!0,markers(n){let{state:e}=n,i=e.facet(Ov),t=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||DX:i.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:Ze.cursor(r.head,r.head>r.anchor?-1:1);for(let c of gy.forRange(n,o,l))t.push(c)}}return t},update(n,e){n.transactions.some(t=>t.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=NX(n);return i&&nV(n.state,e),n.docChanged||n.selectionSet||i},mount(n,e){nV(e.state,n)},class:"cm-cursorLayer"});function nV(n,e){e.style.animationDuration=n.facet(Ov).cursorBlinkRate+"ms"}const Uke=IX({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:gy.forRange(n,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||NX(n)},class:"cm-selectionLayer"}),gM={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};DX&&(gM[".cm-line"].caretColor=gM[".cm-content"].caretColor="transparent !important");const Fke=Cd.highest(vt.theme(gM)),$X=vi.define({map(n,e){return n==null?null:e.mapPos(n)}}),p0=Xr.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((i,t)=>t.is($X)?t.value:i,n)}}),zke=ar.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let i=n.state.field(p0);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(p0)!=i||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(p0),i=e!=null&&n.coordsAtPos(e);if(!i)return null;let t=n.scrollDOM.getBoundingClientRect();return{left:i.left-t.left+n.scrollDOM.scrollLeft*n.scaleX,top:i.top-t.top+n.scrollDOM.scrollTop*n.scaleY,height:i.bottom-i.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:i}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/i+"px",this.cursor.style.height=n.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(p0)!=n&&this.view.dispatch({effects:$X.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Xke(){return[p0,zke]}function rV(n,e,i,t,r){e.lastIndex=0;for(let s=n.iterRange(i,t),o=i,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function Wke(n,e){let i=n.visibleRanges;if(i.length==1&&i[0].from==n.viewport.from&&i[0].to==n.viewport.to)return i;let t=[];for(let{from:r,to:s}of i)r=Math.max(n.state.doc.lineAt(r).from,r-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),t.length&&t[t.length-1].to>=r?t[t.length-1].to=s:t.push({from:r,to:s});return t}class Qke{constructor(e){const{regexp:i,decoration:t,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,r)this.addMatch=(l,c,u,d)=>r(d,u,u+l[0].length,l,c);else if(typeof t=="function")this.addMatch=(l,c,u,d)=>{let f=t(l,c,u);f&&d(u,u+l[0].length,f)};else if(t)this.addMatch=(l,c,u,d)=>d(u,u+l[0].length,t);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let i=new Ch,t=i.add.bind(i);for(let{from:r,to:s}of Wke(e,this.maxLength))rV(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,t));return i.finish()}updateDeco(e,i){let t=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,c)=>{c>e.view.viewport.from&&l<e.view.viewport.to&&(t=Math.min(l,t),r=Math.max(c,r))}),e.viewportChanged||r-t>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,i.map(e.changes),t,r):i}updateRange(e,i,t,r){for(let s of e.visibleRanges){let o=Math.max(s.from,t),l=Math.min(s.to,r);if(l>o){let c=e.state.doc.lineAt(o),u=c.to<l?e.state.doc.lineAt(l):c,d=Math.max(s.from,c.from),f=Math.min(s.to,u.to);if(this.boundary){for(;o>c.from;o--)if(this.boundary.test(c.text[o-1-c.from])){d=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){f=l;break}}let m=[],g,y=(x,b,S)=>m.push(S.range(x,b));if(c==u)for(this.regexp.lastIndex=d-c.from;(g=this.regexp.exec(c.text))&&g.index<f-c.from;)this.addMatch(g,e,g.index+c.from,y);else rV(e.state.doc,this.regexp,d,f,(x,b)=>this.addMatch(b,e,x,y));i=i.update({filterFrom:d,filterTo:f,filter:(x,b)=>x<d||b>f,add:m})}}return i}}const vM=/x/.unicode!=null?"gu":"g",Hke=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,vM),Gke={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let S2=null;function Yke(){var n;if(S2==null&&typeof document<"u"&&document.body){let e=document.body.style;S2=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return S2||!1}const Vx=wt.define({combine(n){let e=pl(n,{render:null,specialChars:Hke,addSpecialChars:null});return(e.replaceTabs=!Yke())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,vM)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,vM)),e}});function jke(n={}){return[Vx.of(n),qke()]}let sV=null;function qke(){return sV||(sV=ar.fromClass(class{constructor(n){this.view=n,this.decorations=Zt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Vx)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new Qke({regexp:n.specialChars,decoration:(e,i,t)=>{let{doc:r}=i.state,s=Dr(e[0],0);if(s==9){let o=r.lineAt(t),l=i.state.tabSize,c=jp(o.text,l,t-o.from);return Zt.replace({widget:new eTe((l-c%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Zt.replace({widget:new Jke(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Vx);n.startState.facet(Vx)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Zke="";function Kke(n){return n>=32?Zke:n==10?"":String.fromCharCode(9216+n)}class Jke extends Bh{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=Kke(this.code),t=e.state.phrase("Control character")+" "+(Gke[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,t,i);if(r)return r;let s=document.createElement("span");return s.textContent=i,s.title=t,s.setAttribute("aria-label",t),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class eTe extends Bh{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function tTe(){return nTe}const iTe=Zt.line({class:"cm-activeLine"}),nTe=ar.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,i=[];for(let t of n.state.selection.ranges){let r=n.lineBlockAt(t.head);r.from>e&&(i.push(iTe.range(r.from)),e=r.from)}return Zt.set(i)}},{decorations:n=>n.decorations}),yM=2e3;function rTe(n,e,i){let t=Math.min(e.line,i.line),r=Math.max(e.line,i.line),s=[];if(e.off>yM||i.off>yM||e.col<0||i.col<0){let o=Math.min(e.off,i.off),l=Math.max(e.off,i.off);for(let c=t;c<=r;c++){let u=n.doc.line(c);u.length<=l&&s.push(Ze.range(u.from+o,u.to+l))}}else{let o=Math.min(e.col,i.col),l=Math.max(e.col,i.col);for(let c=t;c<=r;c++){let u=n.doc.line(c),d=YT(u.text,o,n.tabSize,!0);if(d<0)s.push(Ze.cursor(u.to));else{let f=YT(u.text,l,n.tabSize);s.push(Ze.range(u.from+d,u.from+f))}}}return s}function sTe(n,e){let i=n.coordsAtPos(n.viewport.from);return i?Math.round(Math.abs((i.left-e)/n.defaultCharacterWidth)):-1}function oV(n,e){let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),t=n.state.doc.lineAt(i),r=i-t.from,s=r>yM?-1:r==t.length?sTe(n,e.clientX):jp(t.text,n.state.tabSize,i-t.from);return{line:t.number,col:s,off:r}}function oTe(n,e){let i=oV(n,e),t=n.state.selection;return i?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(i.line).from),o=r.state.doc.lineAt(s);i={line:o.number,col:i.col,off:Math.min(i.off,o.length)},t=t.map(r.changes)}},get(r,s,o){let l=oV(n,r);if(!l)return t;let c=rTe(n.state,i,l);return c.length?o?Ze.create(c.concat(t.ranges)):Ze.create(c):t}}:null}function aTe(n){let e=i=>i.altKey&&i.button==0;return vt.mouseSelectionStyle.of((i,t)=>e(t)?oTe(i,t):null)}const lTe={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},cTe={style:"cursor: crosshair"};function hTe(n={}){let[e,i]=lTe[n.key||"Alt"],t=ar.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||i(r))},keyup(r){(r.keyCode==e||!i(r))&&this.set(!1)},mousemove(r){this.set(i(r))}}});return[t,vt.contentAttributes.of(r=>{var s;return!((s=r.plugin(t))===null||s===void 0)&&s.isDown?cTe:null})]}const qg="-10000px";class VX{constructor(e,i,t,r){this.facet=i,this.createTooltipView=t,this.removeTooltipView=r,this.input=e.state.facet(i),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=t(o,s))}update(e,i){var t;let r=e.state.facet(this.facet),s=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let o=[],l=i?[]:null;for(let c=0;c<s.length;c++){let u=s[c],d=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let m=this.tooltips[f];m&&m.create==u.create&&(d=f)}if(d<0)o[c]=this.createTooltipView(u,c?o[c-1]:null),l&&(l[c]=!!u.above);else{let f=o[c]=this.tooltipViews[d];l&&(l[c]=i[d]),f.update&&f.update(e)}}}for(let c of this.tooltipViews)o.indexOf(c)<0&&(this.removeTooltipView(c),(t=c.destroy)===null||t===void 0||t.call(c));return i&&(l.forEach((c,u)=>i[u]=c),i.length=l.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function uTe(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const C2=wt.define({combine:n=>{var e,i,t;return{position:St.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=n.find(r=>r.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((t=n.find(r=>r.tooltipSpace))===null||t===void 0?void 0:t.tooltipSpace)||uTe}}}),aV=new WeakMap,M3=ar.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(C2);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new VX(n,E3,(i,t)=>this.createTooltip(i,t),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let i=e||n.geometryChanged,t=n.state.facet(C2);if(t.position!=this.position&&!this.madeAbsolute){this.position=t.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;i=!0}if(t.parent!=this.parent){this.parent&&this.container.remove(),this.parent=t.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(n,e){let i=n.create(this.view),t=e?e.dom:null;if(i.dom.classList.add("cm-tooltip"),n.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",i.dom.appendChild(r)}return i.dom.style.position=this.position,i.dom.style.top=qg,i.dom.style.left="0px",this.container.insertBefore(i.dom,t),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var n,e,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,i=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(St.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==qg&&r.style.left=="0px"){let s=r.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,i=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:i}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((r,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(C2).tooltipSpace(this.view),scaleX:e,scaleY:i,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:i,space:t,scaleX:r,scaleY:s}=n,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let c=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:d}=u,f=n.pos[l],m=n.size[l];if(!f||f.bottom<=Math.max(i.top,t.top)||f.top>=Math.min(i.bottom,t.bottom)||f.right<Math.max(i.left,t.left)-.1||f.left>Math.min(i.right,t.right)+.1){d.style.top=qg;continue}let g=c.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,y=g?7:0,x=m.right-m.left,b=(e=aV.get(u))!==null&&e!==void 0?e:m.bottom-m.top,S=u.offset||fTe,_=this.view.textDirection==wn.LTR,O=m.width>t.right-t.left?_?t.left:t.right-m.width:_?Math.max(t.left,Math.min(f.left-(g?14:0)+S.x,t.right-x)):Math.min(Math.max(t.left,f.left-x+(g?14:0)-S.x),t.right-x),k=this.above[l];!c.strictSide&&(k?f.top-(m.bottom-m.top)-S.y<t.top:f.bottom+(m.bottom-m.top)+S.y>t.bottom)&&k==t.bottom-f.bottom>f.top-t.top&&(k=this.above[l]=!k);let M=(k?f.top-t.top:t.bottom-f.bottom)-y;if(M<b&&u.resize!==!1){if(M<this.view.defaultLineHeight){d.style.top=qg;continue}aV.set(u,b),d.style.height=(b=M)/s+"px"}else d.style.height&&(d.style.height="");let E=k?f.top-b-y-S.y:f.bottom+y+S.y,R=O+x;if(u.overlap!==!0)for(let P of o)P.left<R&&P.right>O&&P.top<E+b&&P.bottom>E&&(E=k?P.top-b-2-y:P.bottom+y+2);if(this.position=="absolute"?(d.style.top=(E-n.parent.top)/s+"px",d.style.left=(O-n.parent.left)/r+"px"):(d.style.top=E/s+"px",d.style.left=O/r+"px"),g){let P=f.left+(_?S.x:-S.x)-(O+14-7);g.style.left=P/r+"px"}u.overlap!==!0&&o.push({left:O,top:E,right:R,bottom:E+b}),d.classList.toggle("cm-tooltip-above",k),d.classList.toggle("cm-tooltip-below",!k),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=qg}},{eventObservers:{scroll(){this.maybeMeasure()}}}),dTe=vt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),fTe={x:0,y:0},E3=wt.define({enables:[M3,dTe]}),kO=wt.define({combine:n=>n.reduce((e,i)=>e.concat(i),[])});class l_{static create(e){return new l_(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new VX(e,kO,(i,t)=>this.createHostedView(i,t),i=>i.dom.remove())}createHostedView(e,i){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(t.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}passProp(e){let i;for(let t of this.manager.tooltipViews){let r=t[e];if(r!==void 0){if(i===void 0)i=r;else if(i!==r)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const pTe=E3.compute([kO],n=>{let e=n.facet(kO);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.map(i=>{var t;return(t=i.end)!==null&&t!==void 0?t:i.pos})),create:l_.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class mTe{constructor(e,i,t,r,s){this.view=e,this.source=i,this.field=t,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,t=e.docView.nearest(i.target);if(!t)return;let r,s=1;if(t instanceof lh)r=t.posAtStart;else{if(r=e.posAtCoords(i),r==null)return;let l=e.coordsAtPos(r);if(!l||i.y<l.top||i.y>l.bottom||i.x<l.left-e.defaultCharacterWidth||i.x>l.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(d=>d.from<=r&&d.to>=r),u=c&&c.dir==wn.RTL?-1:1;s=i.x<l.left?-u:u}let o=this.source(e,r,s);if(o!=null&&o.then){let l=this.pending={pos:r};o.then(c=>{this.pending==l&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>js(e.state,c,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(M3),i=e?e.manager.tooltips.findIndex(t=>t.create==l_.create):-1;return i>-1?e.manager.tooltipViews[i]:null}mousemove(e){var i,t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!gTe(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,l=(t=(i=r[0])===null||i===void 0?void 0:i.end)!==null&&t!==void 0?t:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!vTe(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let i=t=>{e.removeEventListener("mouseleave",i),this.active.length&&!this.view.dom.contains(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const zb=4;function gTe(n,e){let{left:i,right:t,top:r,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();r=Math.min(l.top,r),s=Math.max(l.bottom,s)}return e.clientX>=i-zb&&e.clientX<=t+zb&&e.clientY>=r-zb&&e.clientY<=s+zb}function vTe(n,e,i,t,r,s){let o=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>t||o.right<t||o.top>r||Math.min(o.bottom,l)<r)return!1;let c=n.posAtCoords({x:t,y:r},!1);return c>=e&&c<=i}function yTe(n,e={}){let i=vi.define(),t=Xr.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of r){let c=s.changes.mapPos(l.pos,-1,ys.TrackDel);if(c!=null){let u=Object.assign(Object.create(null),l);u.pos=c,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}r=o}for(let o of s.effects)o.is(i)&&(r=o.value),o.is(bTe)&&(r=[]);return r},provide:r=>kO.from(r)});return{active:t,extension:[t,ar.define(r=>new mTe(r,n,t,i,e.hoverTime||300)),pTe]}}function LX(n,e){let i=n.plugin(M3);if(!i)return null;let t=i.manager.tooltips.indexOf(e);return t<0?null:i.manager.tooltipViews[t]}const bTe=vi.define(),lV=wt.define({combine(n){let e,i;for(let t of n)e=e||t.topContainer,i=i||t.bottomContainer;return{topContainer:e,bottomContainer:i}}});function wv(n,e){let i=n.plugin(BX),t=i?i.specs.indexOf(e):-1;return t>-1?i.panels[t]:null}const BX=ar.fromClass(class{constructor(n){this.input=n.state.facet(_v),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(n));let e=n.state.facet(lV);this.top=new Xb(n,!0,e.topContainer),this.bottom=new Xb(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(n){let e=n.state.facet(lV);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Xb(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Xb(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=n.state.facet(_v);if(i!=this.input){let t=i.filter(c=>c),r=[],s=[],o=[],l=[];for(let c of t){let u=this.specs.indexOf(c),d;u<0?(d=c(n.view),l.push(d)):(d=this.panels[u],d.update&&d.update(n)),r.push(d),(d.top?s:o).push(d)}this.specs=t,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let c of l)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let t of this.panels)t.update&&t.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>vt.scrollMargins.of(e=>{let i=e.plugin(n);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class Xb{constructor(e,i,t){this.view=e,this.top=i,this.container=t,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=cV(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=cV(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function cV(n){let e=n.nextSibling;return n.remove(),e}const _v=wt.define({enables:BX});class cc extends hd{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}cc.prototype.elementClass="";cc.prototype.toDOM=void 0;cc.prototype.mapMode=ys.TrackBefore;cc.prototype.startSide=cc.prototype.endSide=-1;cc.prototype.point=!0;const Lx=wt.define(),xTe=wt.define(),OTe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Vi.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},N0=wt.define();function wTe(n){return[UX(),N0.of(Object.assign(Object.assign({},OTe),n))]}const hV=wt.define({combine:n=>n.some(e=>e)});function UX(n){return[_Te]}const _Te=ar.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(N0).map(e=>new dV(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(hV),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,i=n.view.viewport,t=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(t<(i.to-i.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(hV)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let i=Vi.iter(this.view.state.facet(Lx),this.view.viewport.from),t=[],r=this.gutters.map(s=>new STe(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(t.length&&(t=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==_s.Text&&o){bM(i,t,l.from);for(let c of r)c.line(this.view,l,t);o=!1}else if(l.widget)for(let c of r)c.widget(this.view,l)}else if(s.type==_s.Text){bM(i,t,s.from);for(let o of r)o.line(this.view,s,t)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(N0),i=n.state.facet(N0),t=n.docChanged||n.heightChanged||n.viewportChanged||!Vi.eq(n.startState.facet(Lx),n.state.facet(Lx),n.view.viewport.from,n.view.viewport.to);if(e==i)for(let r of this.gutters)r.update(n)&&(t=!0);else{t=!0;let r=[];for(let s of i){let o=e.indexOf(s);o<0?r.push(new dV(this.view,s)):(this.gutters[o].update(n),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return t}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>vt.scrollMargins.of(e=>{let i=e.plugin(n);return!i||i.gutters.length==0||!i.fixed?null:e.textDirection==wn.LTR?{left:i.dom.offsetWidth*e.scaleX}:{right:i.dom.offsetWidth*e.scaleX}})});function uV(n){return Array.isArray(n)?n:[n]}function bM(n,e,i){for(;n.value&&n.from<=i;)n.from==i&&e.push(n.value),n.next()}class STe{constructor(e,i,t){this.gutter=e,this.height=t,this.i=0,this.cursor=Vi.iter(e.markers,i.from)}addElement(e,i,t){let{gutter:r}=this,s=(i.top-this.height)/e.scaleY,o=i.height/e.scaleY;if(this.i==r.elements.length){let l=new FX(e,o,s,t);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,o,s,t);this.height=i.bottom,this.i++}line(e,i,t){let r=[];bM(this.cursor,r,i.from),t.length&&(r=r.concat(t));let s=this.gutter.config.lineMarker(e,i,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,i,r)}widget(e,i){let t=this.gutter.config.widgetMarker(e,i.widget,i),r=t?[t]:null;for(let s of e.state.facet(xTe)){let o=s(e,i.widget,i);o&&(r||(r=[])).push(o)}r&&this.addElement(e,i,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let i=e.elements.pop();e.dom.removeChild(i.dom),i.destroy()}}}class dV{constructor(e,i){this.view=e,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let t in i.domEventHandlers)this.dom.addEventListener(t,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let c=s.getBoundingClientRect();o=(c.top+c.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);i.domEventHandlers[t](e,l,r)&&r.preventDefault()});this.markers=uV(i.markers(e)),i.initialSpacer&&(this.spacer=new FX(e,0,0,[i.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let i=this.markers;if(this.markers=uV(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let t=e.view.viewport;return!Vi.eq(this.markers,i,t.from,t.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class FX{constructor(e,i,t,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,i,t,r)}update(e,i,t,r){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),CTe(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,i){let t="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,c=s<i.length?i[s++]:null,u=!1;if(c){let d=c.elementClass;d&&(t+=" "+d);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(c)){l=f,u=!0;break}}else l=this.markers.length;for(;o<l;){let d=this.markers[o++];if(d.toDOM){d.destroy(r);let f=r.nextSibling;r.remove(),r=f}}if(!c)break;c.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),u&&o++}this.dom.className=t,this.markers=i}destroy(){this.setMarkers(null,[])}}function CTe(n,e){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!n[i].compare(e[i]))return!1;return!0}const kTe=wt.define(),TTe=wt.define(),Rf=wt.define({combine(n){return pl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,i){let t=Object.assign({},e);for(let r in i){let s=t[r],o=i[r];t[r]=s?(l,c,u)=>s(l,c,u)||o(l,c,u):o}return t}})}});class k2 extends cc{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function T2(n,e){return n.state.facet(Rf).formatNumber(e,n.state)}const MTe=N0.compute([Rf],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(kTe)},lineMarker(e,i,t){return t.some(r=>r.toDOM)?null:new k2(T2(e,e.state.doc.lineAt(i.from).number))},widgetMarker:(e,i,t)=>{for(let r of e.state.facet(TTe)){let s=r(e,i,t);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Rf)!=e.state.facet(Rf),initialSpacer(e){return new k2(T2(e,fV(e.state.doc.lines)))},updateSpacer(e,i){let t=T2(i.view,fV(i.view.state.doc.lines));return t==e.number?e:new k2(t)},domEventHandlers:n.facet(Rf).domEventHandlers}));function ETe(n={}){return[Rf.of(n),UX(),MTe]}function fV(n){let e=9;for(;e<n;)e=e*10+9;return e}const PTe=new class extends cc{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ATe=Lx.compute(["selection"],n=>{let e=[],i=-1;for(let t of n.selection.ranges){let r=n.doc.lineAt(t.head).from;r>i&&(i=r,e.push(PTe.range(r)))}return Vi.of(e)});function RTe(){return ATe}const zX=1024;let ITe=0;class M2{constructor(e,i){this.from=e,this.to=i}}class xi{constructor(e={}){this.id=ITe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Js.match(e)),i=>{let t=e(i);return t===void 0?null:[this,t]}}}xi.closedBy=new xi({deserialize:n=>n.split(" ")});xi.openedBy=new xi({deserialize:n=>n.split(" ")});xi.group=new xi({deserialize:n=>n.split(" ")});xi.isolate=new xi({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});xi.contextHash=new xi({perNode:!0});xi.lookAhead=new xi({perNode:!0});xi.mounted=new xi({perNode:!0});class TO{constructor(e,i,t){this.tree=e,this.overlay=i,this.parser=t}static get(e){return e&&e.props&&e.props[xi.mounted.id]}}const DTe=Object.create(null);class Js{constructor(e,i,t,r=0){this.name=e,this.props=i,this.id=t,this.flags=r}static define(e){let i=e.props&&e.props.length?Object.create(null):DTe,t=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Js(e.name||"",i,e.id,t);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(xi.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let t in e)for(let r of t.split(" "))i[r]=e[t];return t=>{for(let r=t.prop(xi.group),s=-1;s<(r?r.length:0);s++){let o=i[s<0?t.name:r[s]];if(o)return o}}}}Js.none=new Js("",Object.create(null),0,8);class P3{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let t of this.types){let r=null;for(let s of e){let o=s(t);o&&(r||(r=Object.assign({},t.props)),r[o[0].id]=o[1])}i.push(r?new Js(t.name,r,t.id,t.flags):t)}return new P3(i)}}const Wb=new WeakMap,pV=new WeakMap;var Mr;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Mr||(Mr={}));class nr{constructor(e,i,t,r,s){if(this.type=e,this.children=i,this.positions=t,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=TO.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let t of this.children){let r=t.toString();r&&(i&&(i+=","),i+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new OM(this.topNode,e)}cursorAt(e,i=0,t=0){let r=Wb.get(this)||this.topNode,s=new OM(r);return s.moveTo(e,i),Wb.set(this,s._tree),s}get topNode(){return new qo(this,0,0,null)}resolve(e,i=0){let t=Sv(Wb.get(this)||this.topNode,e,i,!1);return Wb.set(this,t),t}resolveInner(e,i=0){let t=Sv(pV.get(this)||this.topNode,e,i,!0);return pV.set(this,t),t}resolveStack(e,i=0){return VTe(this,e,i)}iterate(e){let{enter:i,leave:t,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&Mr.IncludeAnonymous)>0;for(let c=this.cursor(o|Mr.IncludeAnonymous);;){let u=!1;if(c.from<=s&&c.to>=r&&(!l&&c.type.isAnonymous||i(c)!==!1)){if(c.firstChild())continue;u=!0}for(;u&&t&&(l||!c.type.isAnonymous)&&t(c),!c.nextSibling();){if(!c.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:I3(Js.none,this.children,this.positions,0,this.children.length,0,this.length,(i,t,r)=>new nr(this.type,i,t,r,this.propValues),e.makeTree||((i,t,r)=>new nr(Js.none,i,t,r)))}static build(e){return LTe(e)}}nr.empty=new nr(Js.none,[],[],0);class A3{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new A3(this.buffer,this.index)}}class Eh{constructor(e,i,t){this.buffer=e,this.length=i,this.set=t}get type(){return Js.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],t=this.buffer[e+3],r=this.set.types[i],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,t==e)return s;let o=[];for(;e<t;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,i,t,r,s){let{buffer:o}=this,l=-1;for(let c=e;c!=i&&!(XX(s,r,o[c+1],o[c+2])&&(l=c,t>0));c=o[c+3]);return l}slice(e,i,t){let r=this.buffer,s=new Uint16Array(i-e),o=0;for(let l=e,c=0;l<i;){s[c++]=r[l++],s[c++]=r[l++]-t;let u=s[c++]=r[l++]-t;s[c++]=r[l++]-e,o=Math.max(o,u)}return new Eh(s,o,this.set)}}function XX(n,e,i,t){switch(n){case-2:return i<e;case-1:return t>=e&&i<e;case 0:return i<e&&t>e;case 1:return i<=e&&t>e;case 2:return t>e;case 4:return!0}}function Sv(n,e,i,t){for(var r;n.from==n.to||(i<1?n.from>=e:n.from>e)||(i>-1?n.to<=e:n.to<e);){let o=!t&&n instanceof qo&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=t?0:Mr.IgnoreOverlays;if(t)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof qo&&o.index<0&&((r=l.enter(e,i,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,i,s);if(!o)return n;n=o}}class WX{cursor(e=0){return new OM(this,e)}getChild(e,i=null,t=null){let r=mV(this,e,i,t);return r.length?r[0]:null}getChildren(e,i=null,t=null){return mV(this,e,i,t)}resolve(e,i=0){return Sv(this,e,i,!1)}resolveInner(e,i=0){return Sv(this,e,i,!0)}matchContext(e){return xM(this,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),t=this;for(;i;){let r=i.lastChild;if(!r||r.to!=i.to)break;r.type.isError&&r.from==r.to?(t=i,i=r.prevSibling):i=r}return t}get node(){return this}get next(){return this.parent}}class qo extends WX{constructor(e,i,t,r){super(),this._tree=e,this.from=i,this.index=t,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,t,r,s=0){for(let o=this;;){for(let{children:l,positions:c}=o._tree,u=i>0?l.length:-1;e!=u;e+=i){let d=l[e],f=c[e]+o.from;if(XX(r,t,f,f+d.length)){if(d instanceof Eh){if(s&Mr.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,i,t-f,r);if(m>-1)return new hh(new NTe(o,d,e,f),null,m)}else if(s&Mr.IncludeAnonymous||!d.type.isAnonymous||R3(d)){let m;if(!(s&Mr.IgnoreMounts)&&(m=TO.get(d))&&!m.overlay)return new qo(m.tree,f,e,o);let g=new qo(d,f,e,o);return s&Mr.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(i<0?d.children.length-1:0,i,t,r)}}}if(s&Mr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+i:e=i<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,t=0){let r;if(!(t&Mr.IgnoreOverlays)&&(r=TO.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((i>0?o<=s:o<s)&&(i<0?l>=s:l>s))return new qo(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,t)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function mV(n,e,i,t){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(i!=null){for(let o=!1;!o;)if(o=r.type.is(i),!r.nextSibling())return s}for(;;){if(t!=null&&r.type.is(t))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return t==null?s:[]}}function xM(n,e,i=e.length-1){for(let t=n.parent;i>=0;t=t.parent){if(!t)return!1;if(!t.type.isAnonymous){if(e[i]&&e[i]!=t.name)return!1;i--}}return!0}class NTe{constructor(e,i,t,r){this.parent=e,this.buffer=i,this.index=t,this.start=r}}class hh extends WX{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,t){super(),this.context=e,this._parent=i,this.index=t,this.type=e.buffer.set.types[e.buffer.buffer[t]]}child(e,i,t){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,i-this.context.start,t);return s<0?null:new hh(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,t=0){if(t&Mr.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return s<0?null:new hh(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new hh(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new hh(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:t}=this.context,r=this.index+4,s=t.buffer[this.index+3];if(s>r){let o=t.buffer[this.index+1];e.push(t.slice(r,s,o)),i.push(0)}return new nr(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function QX(n){if(!n.length)return null;let e=0,i=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>i.from||o.to<i.to)&&(i=o,e=s)}let t=i instanceof qo&&i.index<0?null:i.parent,r=n.slice();return t?r[e]=t:r.splice(e,1),new $Te(r,i)}class $Te{constructor(e,i){this.heads=e,this.node=i}get next(){return QX(this.heads)}}function VTe(n,e,i){let t=n.resolveInner(e,i),r=null;for(let s=t instanceof qo?t:t.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[t])).push(o.resolve(e,i)),s=o}else{let o=TO.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new qo(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[t])).push(Sv(l,e,i,!1))}}return r?QX(r):t}class OM{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof qo)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:t,buffer:r}=this.buffer;return this.type=i||r.set.types[r.buffer[e]],this.from=t+r.buffer[e+1],this.to=t+r.buffer[e+2],!0}yield(e){return e?e instanceof qo?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,t){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,t,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,i-this.buffer.start,t);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,t=this.mode){return this.buffer?t&Mr.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,t))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Mr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Mr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,t=this.stack.length-1;if(e<0){let r=t<0?0:this.stack[t]+4;if(this.index!=r)return this.yieldBuf(i.findChild(r,this.index,-1,0,4))}else{let r=i.buffer[this.index+3];if(r<(t<0?i.buffer.length:i.buffer[this.stack[t]+3]))return this.yieldBuf(r)}return t<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,t,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:i,parent:t}=r)}else({index:i,_parent:t}=this._tree);for(;t;{index:i,_parent:t}=t)if(i>-1)for(let s=i+e,o=e<0?-1:t._tree.children.length;s!=o;s+=e){let l=t._tree.children[s];if(this.mode&Mr.IncludeAnonymous||l instanceof Eh||!l.type.isAnonymous||R3(l))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,t=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;i=o,t=s+1;break e}r=this.stack[--s]}for(let r=t;r<this.stack.length;r++)i=new hh(this.buffer,i,this.stack[r]);return this.bufferNode=new hh(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let t=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){t++;continue}this.type.isAnonymous||(r=!0)}for(;r&&i&&i(this),r=this.type.isAnonymous,!this.nextSibling();){if(!t)return;this.parent(),t--,r=!0}}}matchContext(e){if(!this.buffer)return xM(this.node,e);let{buffer:i}=this.buffer,{types:t}=i.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return xM(this.node,e,r);let o=t[i.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function R3(n){return n.children.some(e=>e instanceof Eh||!e.type.isAnonymous||R3(e))}function LTe(n){var e;let{buffer:i,nodeSet:t,maxBufferLength:r=zX,reused:s=[],minRepeatType:o=t.types.length}=n,l=Array.isArray(i)?new A3(i,i.length):i,c=t.types,u=0,d=0;function f(M,E,R,P,I,T){let{id:N,start:L,end:D,size:$}=l,B=d;for(;$<0;)if(l.next(),$==-1){let ce=s[N];R.push(ce),P.push(L-M);return}else if($==-3){u=N;return}else if($==-4){d=N;return}else throw new RangeError(`Unrecognized record size: ${$}`);let U=c[N],Q,Z,te=L-M;if(D-L<=r&&(Z=b(l.pos-E,I))){let ce=new Uint16Array(Z.size-Z.skip),pe=l.pos-Z.size,Ee=ce.length;for(;l.pos>pe;)Ee=S(Z.start,ce,Ee);Q=new Eh(ce,D-Z.start,t),te=Z.start-M}else{let ce=l.pos-$;l.next();let pe=[],Ee=[],we=N>=o?N:-1,he=0,_e=D;for(;l.pos>ce;)we>=0&&l.id==we&&l.size>=0?(l.end<=_e-r&&(y(pe,Ee,L,he,l.end,_e,we,B),he=pe.length,_e=l.end),l.next()):T>2500?m(L,ce,pe,Ee):f(L,ce,pe,Ee,we,T+1);if(we>=0&&he>0&&he<pe.length&&y(pe,Ee,L,he,L,_e,we,B),pe.reverse(),Ee.reverse(),we>-1&&he>0){let Ce=g(U);Q=I3(U,pe,Ee,0,pe.length,0,D-L,Ce,Ce)}else Q=x(U,pe,Ee,D-L,B-D)}R.push(Q),P.push(te)}function m(M,E,R,P){let I=[],T=0,N=-1;for(;l.pos>E;){let{id:L,start:D,end:$,size:B}=l;if(B>4)l.next();else{if(N>-1&&D<N)break;N<0&&(N=$-r),I.push(L,D,$),T++,l.next()}}if(T){let L=new Uint16Array(T*4),D=I[I.length-2];for(let $=I.length-3,B=0;$>=0;$-=3)L[B++]=I[$],L[B++]=I[$+1]-D,L[B++]=I[$+2]-D,L[B++]=B;R.push(new Eh(L,I[2]-D,t)),P.push(D-M)}}function g(M){return(E,R,P)=>{let I=0,T=E.length-1,N,L;if(T>=0&&(N=E[T])instanceof nr){if(!T&&N.type==M&&N.length==P)return N;(L=N.prop(xi.lookAhead))&&(I=R[T]+N.length+L)}return x(M,E,R,P,I)}}function y(M,E,R,P,I,T,N,L){let D=[],$=[];for(;M.length>P;)D.push(M.pop()),$.push(E.pop()+R-I);M.push(x(t.types[N],D,$,T-I,L-T)),E.push(I-R)}function x(M,E,R,P,I=0,T){if(u){let N=[xi.contextHash,u];T=T?[N].concat(T):[N]}if(I>25){let N=[xi.lookAhead,I];T=T?[N].concat(T):[N]}return new nr(M,E,R,P,T)}function b(M,E){let R=l.fork(),P=0,I=0,T=0,N=R.end-r,L={size:0,start:0,skip:0};e:for(let D=R.pos-M;R.pos>D;){let $=R.size;if(R.id==E&&$>=0){L.size=P,L.start=I,L.skip=T,T+=4,P+=4,R.next();continue}let B=R.pos-$;if($<0||B<D||R.start<N)break;let U=R.id>=o?4:0,Q=R.start;for(R.next();R.pos>B;){if(R.size<0)if(R.size==-3)U+=4;else break e;else R.id>=o&&(U+=4);R.next()}I=Q,P+=$,T+=U}return(E<0||P==M)&&(L.size=P,L.start=I,L.skip=T),L.size>4?L:void 0}function S(M,E,R){let{id:P,start:I,end:T,size:N}=l;if(l.next(),N>=0&&P<o){let L=R;if(N>4){let D=l.pos-(N-4);for(;l.pos>D;)R=S(M,E,R)}E[--R]=L,E[--R]=T-M,E[--R]=I-M,E[--R]=P}else N==-3?u=P:N==-4&&(d=P);return R}let _=[],O=[];for(;l.pos>0;)f(n.start||0,n.bufferStart||0,_,O,-1,0);let k=(e=n.length)!==null&&e!==void 0?e:_.length?O[0]+_[0].length:0;return new nr(c[n.topID],_.reverse(),O.reverse(),k)}const gV=new WeakMap;function Bx(n,e){if(!n.isAnonymous||e instanceof Eh||e.type!=n)return 1;let i=gV.get(e);if(i==null){i=1;for(let t of e.children){if(t.type!=n||!(t instanceof nr)){i=1;break}i+=Bx(n,t)}gV.set(e,i)}return i}function I3(n,e,i,t,r,s,o,l,c){let u=0;for(let y=t;y<r;y++)u+=Bx(n,e[y]);let d=Math.ceil(u*1.5/8),f=[],m=[];function g(y,x,b,S,_){for(let O=b;O<S;){let k=O,M=x[O],E=Bx(n,y[O]);for(O++;O<S;O++){let R=Bx(n,y[O]);if(E+R>=d)break;E+=R}if(O==k+1){if(E>d){let R=y[k];g(R.children,R.positions,0,R.children.length,x[k]+_);continue}f.push(y[k])}else{let R=x[O-1]+y[O-1].length-M;f.push(I3(n,y,x,k,O,M,R,null,c))}m.push(M+_-s)}}return g(e,i,t,r,0),(l||c)(f,m,o)}class ed{constructor(e,i,t,r,s=!1,o=!1){this.from=e,this.to=i,this.tree=t,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],t=!1){let r=[new ed(0,e.length,e,0,!1,t)];for(let s of i)s.to>e.length&&r.push(s);return r}static applyChanges(e,i,t=128){if(!i.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,c=0,u=0;;l++){let d=l<i.length?i[l]:null,f=d?d.fromA:1e9;if(f-c>=t)for(;o&&o.from<f;){let m=o;if(c>=m.from||f<=m.to||u){let g=Math.max(m.from,c)-u,y=Math.min(m.to,f)-u;m=g>=y?null:new ed(g,y,m.tree,m.offset+u,l>0,!!d)}if(m&&r.push(m),o.to>f)break;o=s<e.length?e[s++]:null}if(!d)break;c=d.toA,u=d.toA-d.toB}return r}}class HX{startParse(e,i,t){return typeof e=="string"&&(e=new BTe(e)),t=t?t.length?t.map(r=>new M2(r.from,r.to)):[new M2(0,0)]:[new M2(0,e.length)],this.createParse(e,i||[],t)}parse(e,i,t){let r=this.startParse(e,i,t);for(;;){let s=r.advance();if(s)return s}}}class BTe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}new xi({perNode:!0});let UTe=0;class Bo{constructor(e,i,t,r){this.name=e,this.set=i,this.base=t,this.modified=r,this.id=UTe++}toString(){let{name:e}=this;for(let i of this.modified)i.name&&(e=`${i.name}(${e})`);return e}static define(e,i){let t=typeof e=="string"?e:"?";if(e instanceof Bo&&(i=e),i!=null&&i.base)throw new Error("Can not derive from a modified tag");let r=new Bo(t,[],null,[]);if(r.set.push(r),i)for(let s of i.set)r.set.push(s);return r}static defineModifier(e){let i=new MO(e);return t=>t.modified.indexOf(i)>-1?t:MO.get(t.base||t,t.modified.concat(i).sort((r,s)=>r.id-s.id))}}let FTe=0;class MO{constructor(e){this.name=e,this.instances=[],this.id=FTe++}static get(e,i){if(!i.length)return e;let t=i[0].instances.find(l=>l.base==e&&zTe(i,l.modified));if(t)return t;let r=[],s=new Bo(e.name,r,e,i);for(let l of i)l.instances.push(s);let o=XTe(i);for(let l of e.set)if(!l.modified.length)for(let c of o)r.push(MO.get(l,c));return s}}function zTe(n,e){return n.length==e.length&&n.every((i,t)=>i==e[t])}function XTe(n){let e=[[]];for(let i=0;i<n.length;i++)for(let t=0,r=e.length;t<r;t++)e.push(e[t].concat(n[i]));return e.sort((i,t)=>t.length-i.length)}function GX(n){let e=Object.create(null);for(let i in n){let t=n[i];Array.isArray(t)||(t=[t]);for(let r of i.split(" "))if(r){let s=[],o=2,l=r;for(let f=0;;){if(l=="..."&&f>0&&f+3==r.length){o=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+r);if(s.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),f+=m[0].length,f==r.length)break;let g=r[f++];if(f==r.length&&g=="!"){o=0;break}if(g!="/")throw new RangeError("Invalid path: "+r);l=r.slice(f)}let c=s.length-1,u=s[c];if(!u)throw new RangeError("Invalid path: "+r);let d=new EO(t,o,c>0?s.slice(0,c):null);e[u]=d.sort(e[u])}}return YX.add(e)}const YX=new xi;class EO{constructor(e,i,t,r){this.tags=e,this.mode=i,this.context=t,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}EO.empty=new EO([],2,null);function jX(n,e){let i=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))i[s.tag.id]=s.class;else for(let o of s.tag)i[o.id]=s.class;let{scope:t,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let c of l.set){let u=i[c.id];if(u){o=o?o+" "+u:u;break}}return o},scope:t}}function WTe(n,e){let i=null;for(let t of n){let r=t.style(e);r&&(i=i?i+" "+r:r)}return i}function QTe(n,e,i,t=0,r=n.length){let s=new HTe(t,Array.isArray(e)?e:[e],i);s.highlightRange(n.cursor(),t,r,"",s.highlighters),s.flush(r)}class HTe{constructor(e,i,t){this.at=e,this.highlighters=i,this.span=t,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,t,r,s){let{type:o,from:l,to:c}=e;if(l>=t||c<=i)return;o.isTop&&(s=this.highlighters.filter(g=>!g.scope||g.scope(o)));let u=r,d=GTe(e)||EO.empty,f=WTe(s,d.tags);if(f&&(u&&(u+=" "),u+=f,d.mode==1&&(r+=(r?" ":"")+f)),this.startSpan(Math.max(i,l),u),d.opaque)return;let m=e.tree&&e.tree.prop(xi.mounted);if(m&&m.overlay){let g=e.node.enter(m.overlay[0].from+l,1),y=this.highlighters.filter(b=>!b.scope||b.scope(m.tree.type)),x=e.firstChild();for(let b=0,S=l;;b++){let _=b<m.overlay.length?m.overlay[b]:null,O=_?_.from+l:c,k=Math.max(i,S),M=Math.min(t,O);if(k<M&&x)for(;e.from<M&&(this.highlightRange(e,k,M,r,s),this.startSpan(Math.min(M,e.to),u),!(e.to>=O||!e.nextSibling())););if(!_||O>t)break;S=_.to+l,S>i&&(this.highlightRange(g.cursor(),Math.max(i,_.from+l),Math.min(t,S),"",y),this.startSpan(Math.min(t,S),u))}x&&e.parent()}else if(e.firstChild()){m&&(r="");do if(!(e.to<=i)){if(e.from>=t)break;this.highlightRange(e,i,t,r,s),this.startSpan(Math.min(t,e.to),u)}while(e.nextSibling());e.parent()}}}function GTe(n){let e=n.type.prop(YX);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ht=Bo.define,Qb=ht(),eh=ht(),vV=ht(eh),yV=ht(eh),th=ht(),Hb=ht(th),E2=ht(th),Wa=ht(),xu=ht(Wa),za=ht(),Xa=ht(),wM=ht(),Zg=ht(wM),Gb=ht(),Qe={comment:Qb,lineComment:ht(Qb),blockComment:ht(Qb),docComment:ht(Qb),name:eh,variableName:ht(eh),typeName:vV,tagName:ht(vV),propertyName:yV,attributeName:ht(yV),className:ht(eh),labelName:ht(eh),namespace:ht(eh),macroName:ht(eh),literal:th,string:Hb,docString:ht(Hb),character:ht(Hb),attributeValue:ht(Hb),number:E2,integer:ht(E2),float:ht(E2),bool:ht(th),regexp:ht(th),escape:ht(th),color:ht(th),url:ht(th),keyword:za,self:ht(za),null:ht(za),atom:ht(za),unit:ht(za),modifier:ht(za),operatorKeyword:ht(za),controlKeyword:ht(za),definitionKeyword:ht(za),moduleKeyword:ht(za),operator:Xa,derefOperator:ht(Xa),arithmeticOperator:ht(Xa),logicOperator:ht(Xa),bitwiseOperator:ht(Xa),compareOperator:ht(Xa),updateOperator:ht(Xa),definitionOperator:ht(Xa),typeOperator:ht(Xa),controlOperator:ht(Xa),punctuation:wM,separator:ht(wM),bracket:Zg,angleBracket:ht(Zg),squareBracket:ht(Zg),paren:ht(Zg),brace:ht(Zg),content:Wa,heading:xu,heading1:ht(xu),heading2:ht(xu),heading3:ht(xu),heading4:ht(xu),heading5:ht(xu),heading6:ht(xu),contentSeparator:ht(Wa),list:ht(Wa),quote:ht(Wa),emphasis:ht(Wa),strong:ht(Wa),link:ht(Wa),monospace:ht(Wa),strikethrough:ht(Wa),inserted:ht(),deleted:ht(),changed:ht(),invalid:ht(),meta:Gb,documentMeta:ht(Gb),annotation:ht(Gb),processingInstruction:ht(Gb),definition:Bo.defineModifier("definition"),constant:Bo.defineModifier("constant"),function:Bo.defineModifier("function"),standard:Bo.defineModifier("standard"),local:Bo.defineModifier("local"),special:Bo.defineModifier("special")};for(let n in Qe){let e=Qe[n];e instanceof Bo&&(e.name=n)}jX([{tag:Qe.link,class:"tok-link"},{tag:Qe.heading,class:"tok-heading"},{tag:Qe.emphasis,class:"tok-emphasis"},{tag:Qe.strong,class:"tok-strong"},{tag:Qe.keyword,class:"tok-keyword"},{tag:Qe.atom,class:"tok-atom"},{tag:Qe.bool,class:"tok-bool"},{tag:Qe.url,class:"tok-url"},{tag:Qe.labelName,class:"tok-labelName"},{tag:Qe.inserted,class:"tok-inserted"},{tag:Qe.deleted,class:"tok-deleted"},{tag:Qe.literal,class:"tok-literal"},{tag:Qe.string,class:"tok-string"},{tag:Qe.number,class:"tok-number"},{tag:[Qe.regexp,Qe.escape,Qe.special(Qe.string)],class:"tok-string2"},{tag:Qe.variableName,class:"tok-variableName"},{tag:Qe.local(Qe.variableName),class:"tok-variableName tok-local"},{tag:Qe.definition(Qe.variableName),class:"tok-variableName tok-definition"},{tag:Qe.special(Qe.variableName),class:"tok-variableName2"},{tag:Qe.definition(Qe.propertyName),class:"tok-propertyName tok-definition"},{tag:Qe.typeName,class:"tok-typeName"},{tag:Qe.namespace,class:"tok-namespace"},{tag:Qe.className,class:"tok-className"},{tag:Qe.macroName,class:"tok-macroName"},{tag:Qe.propertyName,class:"tok-propertyName"},{tag:Qe.operator,class:"tok-operator"},{tag:Qe.comment,class:"tok-comment"},{tag:Qe.meta,class:"tok-meta"},{tag:Qe.invalid,class:"tok-invalid"},{tag:Qe.punctuation,class:"tok-punctuation"}]);var P2;const If=new xi;function YTe(n){return wt.define({combine:n?e=>e.concat(n):void 0})}const jTe=new xi;class _a{constructor(e,i,t=[],r=""){this.data=e,this.name=r,Ui.prototype.hasOwnProperty("tree")||Object.defineProperty(Ui.prototype,"tree",{get(){return is(this)}}),this.parser=i,this.extension=[Ph.of(this),Ui.languageData.of((s,o,l)=>{let c=bV(s,o,l),u=c.type.prop(If);if(!u)return[];let d=s.facet(u),f=c.type.prop(jTe);if(f){let m=c.resolve(o-c.from,l);for(let g of f)if(g.test(m,s)){let y=s.facet(g.facet);return g.type=="replace"?y:y.concat(d)}}return d})].concat(t)}isActiveAt(e,i,t=-1){return bV(e,i,t).type.prop(If)==this.data}findRegions(e){let i=e.facet(Ph);if((i==null?void 0:i.data)==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let t=[],r=(s,o)=>{if(s.prop(If)==this.data){t.push({from:o,to:o+s.length});return}let l=s.prop(xi.mounted);if(l){if(l.tree.prop(If)==this.data){if(l.overlay)for(let c of l.overlay)t.push({from:c.from+o,to:c.to+o});else t.push({from:o,to:o+s.length});return}else if(l.overlay){let c=t.length;if(r(l.tree,l.overlay[0].from+o),t.length>c)return}}for(let c=0;c<s.children.length;c++){let u=s.children[c];u instanceof nr&&r(u,s.positions[c]+o)}};return r(is(e),0),t}get allowsNesting(){return!0}}_a.setState=vi.define();function bV(n,e,i){let t=n.facet(Ph),r=is(n).topNode;if(!t||t.allowsNesting)for(let s=r;s;s=s.enter(e,i,Mr.ExcludeBuffers))s.type.isTop&&(r=s);return r}class PO extends _a{constructor(e,i,t){super(e,i,[],t),this.parser=i}static define(e){let i=YTe(e.languageData);return new PO(i,e.parser.configure({props:[If.add(t=>t.isTop?i:void 0)]}),e.name)}configure(e,i){return new PO(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function is(n){let e=n.field(_a.state,!1);return e?e.tree:nr.empty}class qTe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let t=this.cursorPos-this.string.length;return e<t||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-t,i-t)}}let Kg=null;class AO{constructor(e,i,t=[],r,s,o,l,c){this.parser=e,this.state=i,this.fragments=t,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,i,t){return new AO(e,i,[],nr.empty,0,t,[],null)}startParse(){return this.parser.startParse(new qTe(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=nr.empty&&this.isDone(i??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var t;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ed.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(t=this.parse.stoppedAt)!==null&&t!==void 0?t:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(i??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(ed.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=Kg;Kg=this;try{return e()}finally{Kg=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=xV(e,i.from,i.to);return e}changes(e,i){let{fragments:t,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((u,d,f,m)=>c.push({fromA:u,toA:d,fromB:f,toB:m})),t=ed.applyChanges(t,c),r=nr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let d=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);d<f&&l.push({from:d,to:f})}}}return new AO(this.parser,i,t,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:r,to:s}=this.skipped[t];r<e.to&&s>e.from&&(this.fragments=xV(this.fragments,r,s),this.skipped.splice(t--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends HX{createParse(i,t,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let c=Kg;if(c){for(let u of r)c.tempSkipped.push(u);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=o,new nr(Js.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return Kg}}function xV(n,e,i){return ed.applyChanges(n,[{fromA:e,toA:i,fromB:e,toB:i}])}class Ap{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),t=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,t)||i.takeTree(),new Ap(i)}static init(e){let i=Math.min(3e3,e.doc.length),t=AO.create(e.facet(Ph).parser,e,{from:0,to:i});return t.work(20,i)||t.takeTree(),new Ap(t)}}_a.state=Xr.define({create:Ap.init,update(n,e){for(let i of e.effects)if(i.is(_a.setState))return i.value;return e.startState.facet(Ph)!=e.state.facet(Ph)?Ap.init(e.state):n.apply(e)}});let qX=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(qX=n=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const A2=typeof navigator<"u"&&(!((P2=navigator.scheduling)===null||P2===void 0)&&P2.isInputPending)?()=>navigator.scheduling.isInputPending():null,ZTe=ar.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(_a.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(_a.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=qX(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:t,viewport:{to:r}}=this.view,s=t.field(_a.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!A2?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&t.doc.length>r+1e3,c=s.context.work(()=>A2&&A2()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-i,(c||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:_a.setState.of(new Ap(s.context))})),this.chunkBudget>0&&!(c&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>js(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ph=wt.define({combine(n){return n.length?n[0]:null},enables:n=>[_a.state,ZTe,vt.contentAttributes.compute([n],e=>{let i=e.facet(n);return i&&i.name?{"data-language":i.name}:{}})]});class KTe{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}const JTe=wt.define(),D3=wt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function RO(n){let e=n.facet(D3);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Cv(n,e){let i="",t=n.tabSize,r=n.facet(D3)[0];if(r=="	"){for(;e>=t;)i+="	",e-=t;r=" "}for(let s=0;s<e;s++)i+=r;return i}function N3(n,e){n instanceof Ui&&(n=new c_(n));for(let t of n.state.facet(JTe)){let r=t(n,e);if(r!==void 0)return r}let i=is(n.state);return i.length>=e?eMe(n,i,e):null}class c_{constructor(e,i={}){this.state=e,this.options=i,this.unit=RO(e)}lineAt(e,i=1){let t=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=t.from&&r<=t.to?s&&r==e?{text:"",from:e}:(i<0?r<e:r<=e)?{text:t.text.slice(r-t.from),from:r}:{text:t.text.slice(0,r-t.from),from:t.from}:t}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:t,from:r}=this.lineAt(e,i);return t.slice(e-r,Math.min(t.length,e+100-r))}column(e,i=1){let{text:t,from:r}=this.lineAt(e,i),s=this.countColumn(t,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(t,t.search(/\S|$/))),s}countColumn(e,i=e.length){return jp(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:t,from:r}=this.lineAt(e,i),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(t,t.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ZX=new xi;function eMe(n,e,i){let t=e.resolveStack(i),r=t.node.enterUnfinishedNodesBefore(i);if(r!=t.node){let s=[];for(let o=r;o!=t.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)t={node:s[o],next:t}}return KX(t,n,i)}function KX(n,e,i){for(let t=n;t;t=t.next){let r=iMe(t.node);if(r)return r($3.create(e,i,t))}return 0}function tMe(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function iMe(n){let e=n.type.prop(ZX);if(e)return e;let i=n.firstChild,t;if(i&&(t=i.type.prop(xi.closedBy))){let r=n.lastChild,s=r&&t.indexOf(r.name)>-1;return o=>JX(o,!0,1,void 0,s&&!tMe(o)?r.from:void 0)}return n.parent==null?nMe:null}function nMe(){return 0}class $3 extends c_{constructor(e,i,t){super(e.state,e.options),this.base=e,this.pos=i,this.context=t}get node(){return this.context.node}static create(e,i,t){return new $3(e,i,t)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let t=e.resolve(i.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(rMe(t,e))break;i=this.state.doc.lineAt(t.from)}return this.lineIndent(i.from)}continue(){return KX(this.context.next,this.base,this.pos)}}function rMe(n,e){for(let i=e;i;i=i.parent)if(n==i)return!0;return!1}function sMe(n){let e=n.node,i=e.childAfter(e.from),t=e.lastChild;if(!i)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(i.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=i.to;;){let c=e.childAfter(l);if(!c||c==t)return null;if(!c.type.isSkipped)return c.from<o?i:null;l=c.to}}function oMe({closing:n,align:e=!0,units:i=1}){return t=>JX(t,e,i,n)}function JX(n,e,i,t,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=t&&s.slice(o,o+t.length)==t||r==n.pos+o,c=e?sMe(n):null;return c?l?n.column(c.from):n.column(c.to):n.baseIndent+(l?0:n.unit*i)}const aMe=n=>n.baseIndent;function R2({except:n,units:e=1}={}){return i=>{let t=n&&n.test(i.textAfter);return i.baseIndent+(t?0:e*i.unit)}}const lMe=200;function cMe(){return Ui.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let i=n.newDoc,{head:t}=n.newSelection.main,r=i.lineAt(t);if(t>r.from+lMe)return n;let s=i.sliceString(r.from,t);if(!e.some(u=>u.test(s)))return n;let{state:o}=n,l=-1,c=[];for(let{head:u}of o.selection.ranges){let d=o.doc.lineAt(u);if(d.from==l)continue;l=d.from;let f=N3(o,d.from);if(f==null)continue;let m=/^\s*/.exec(d.text)[0],g=Cv(o,f);m!=g&&c.push({from:d.from,to:d.from+m.length,insert:g})}return c.length?[n,{changes:c,sequential:!0}]:n})}const hMe=wt.define(),eW=new xi;function uMe(n){let e=n.firstChild,i=n.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?n.to:i.from}:null}function dMe(n,e,i){let t=is(n);if(t.length<i)return null;let r=t.resolveStack(i,1),s=null;for(let o=r;o;o=o.next){let l=o.node;if(l.to<=i||l.from>i)continue;if(s&&l.from<e)break;let c=l.type.prop(eW);if(c&&(l.to<t.length-50||t.length==n.doc.length||!fMe(l))){let u=c(l,n);u&&u.from<=i&&u.from>=e&&u.to>i&&(s=u)}}return s}function fMe(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function IO(n,e,i){for(let t of n.facet(hMe)){let r=t(n,e,i);if(r)return r}return dMe(n,e,i)}function tW(n,e){let i=e.mapPos(n.from,1),t=e.mapPos(n.to,-1);return i>=t?void 0:{from:i,to:t}}const h_=vi.define({map:tW}),vy=vi.define({map:tW});function iW(n){let e=[];for(let{head:i}of n.state.selection.ranges)e.some(t=>t.from<=i&&t.to>=i)||e.push(n.lineBlockAt(i));return e}const pd=Xr.define({create(){return Zt.none},update(n,e){n=n.map(e.changes);for(let i of e.effects)if(i.is(h_)&&!pMe(n,i.value.from,i.value.to)){let{preparePlaceholder:t}=e.state.facet(sW),r=t?Zt.replace({widget:new OMe(t(e.state,i.value))}):OV;n=n.update({add:[r.range(i.value.from,i.value.to)]})}else i.is(vy)&&(n=n.update({filter:(t,r)=>i.value.from!=t||i.value.to!=r,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:t}=e.selection.main;n.between(t,t,(r,s)=>{r<t&&s>t&&(i=!0)}),i&&(n=n.update({filterFrom:t,filterTo:t,filter:(r,s)=>s<=t||r>=t}))}return n},provide:n=>vt.decorations.from(n),toJSON(n,e){let i=[];return n.between(0,e.doc.length,(t,r)=>{i.push(t,r)}),i},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<n.length;){let t=n[i++],r=n[i++];if(typeof t!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(OV.range(t,r))}return Zt.set(e,!0)}});function DO(n,e,i){var t;let r=null;return(t=n.field(pd,!1))===null||t===void 0||t.between(e,i,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function pMe(n,e,i){let t=!1;return n.between(e,e,(r,s)=>{r==e&&s==i&&(t=!0)}),t}function nW(n,e){return n.field(pd,!1)?e:e.concat(vi.appendConfig.of(oW()))}const mMe=n=>{for(let e of iW(n)){let i=IO(n.state,e.from,e.to);if(i)return n.dispatch({effects:nW(n.state,[h_.of(i),rW(n,i)])}),!0}return!1},gMe=n=>{if(!n.state.field(pd,!1))return!1;let e=[];for(let i of iW(n)){let t=DO(n.state,i.from,i.to);t&&e.push(vy.of(t),rW(n,t,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function rW(n,e,i=!0){let t=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return vt.announce.of(`${n.state.phrase(i?"Folded lines":"Unfolded lines")} ${t} ${n.state.phrase("to")} ${r}.`)}const vMe=n=>{let{state:e}=n,i=[];for(let t=0;t<e.doc.length;){let r=n.lineBlockAt(t),s=IO(e,r.from,r.to);s&&i.push(h_.of(s)),t=(s?n.lineBlockAt(s.to):r).to+1}return i.length&&n.dispatch({effects:nW(n.state,i)}),!!i.length},yMe=n=>{let e=n.state.field(pd,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,n.state.doc.length,(t,r)=>{i.push(vy.of({from:t,to:r}))}),n.dispatch({effects:i}),!0},bMe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:mMe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:gMe},{key:"Ctrl-Alt-[",run:vMe},{key:"Ctrl-Alt-]",run:yMe}],xMe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},sW=wt.define({combine(n){return pl(n,xMe)}});function oW(n){return[pd,SMe]}function aW(n,e){let{state:i}=n,t=i.facet(sW),r=o=>{let l=n.lineBlockAt(n.posAtDOM(o.target)),c=DO(n.state,l.from,l.to);c&&n.dispatch({effects:vy.of(c)}),o.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r,e);let s=document.createElement("span");return s.textContent=t.placeholderText,s.setAttribute("aria-label",i.phrase("folded code")),s.title=i.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const OV=Zt.replace({widget:new class extends Bh{toDOM(n){return aW(n,null)}}});class OMe extends Bh{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return aW(e,this.value)}}const wMe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class I2 extends cc{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function _Me(n={}){let e=Object.assign(Object.assign({},wMe),n),i=new I2(e,!0),t=new I2(e,!1),r=ar.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Ph)!=o.state.facet(Ph)||o.startState.field(pd,!1)!=o.state.field(pd,!1)||is(o.startState)!=is(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Ch;for(let c of o.viewportLineBlocks){let u=DO(o.state,c.from,c.to)?t:IO(o.state,c.from,c.to)?i:null;u&&l.add(c.from,c.from,u)}return l.finish()}}),{domEventHandlers:s}=e;return[r,wTe({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||Vi.empty},initialSpacer(){return new I2(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,c)=>{if(s.click&&s.click(o,l,c))return!0;let u=DO(o.state,l.from,l.to);if(u)return o.dispatch({effects:vy.of(u)}),!0;let d=IO(o.state,l.from,l.to);return d?(o.dispatch({effects:h_.of(d)}),!0):!1}})}),oW()]}const SMe=vt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class u_{constructor(e,i){this.specs=e;let t;function r(l){let c=kh.newName();return(t||(t=Object.create(null)))["."+c]=l,c}const s=typeof i.all=="string"?i.all:i.all?r(i.all):void 0,o=i.scope;this.scope=o instanceof _a?l=>l.prop(If)==o.data:o?l=>l==o:void 0,this.style=jX(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=t?new kh(t):null,this.themeType=i.themeType}static define(e,i){return new u_(e,i||{})}}const _M=wt.define(),lW=wt.define({combine(n){return n.length?[n[0]]:null}});function D2(n){let e=n.facet(_M);return e.length?e:n.facet(lW)}function CMe(n,e){let i=[TMe],t;return n instanceof u_&&(n.module&&i.push(vt.styleModule.of(n.module)),t=n.themeType),e!=null&&e.fallback?i.push(lW.of(n)):t?i.push(_M.computeN([vt.darkTheme],r=>r.facet(vt.darkTheme)==(t=="dark")?[n]:[])):i.push(_M.of(n)),i}class kMe{constructor(e){this.markCache=Object.create(null),this.tree=is(e.state),this.decorations=this.buildDeco(e,D2(e.state)),this.decoratedTo=e.viewport.to}update(e){let i=is(e.state),t=D2(e.state),r=t!=D2(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);i.length<s.to&&!r&&i.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(i!=this.tree||e.viewportChanged||r)&&(this.tree=i,this.decorations=this.buildDeco(e.view,t),this.decoratedTo=s.to)}buildDeco(e,i){if(!i||!this.tree.length)return Zt.none;let t=new Ch;for(let{from:r,to:s}of e.visibleRanges)QTe(this.tree,i,(o,l,c)=>{t.add(o,l,this.markCache[c]||(this.markCache[c]=Zt.mark({class:c})))},r,s);return t.finish()}}const TMe=Cd.high(ar.fromClass(kMe,{decorations:n=>n.decorations})),MMe=u_.define([{tag:Qe.meta,color:"#404740"},{tag:Qe.link,textDecoration:"underline"},{tag:Qe.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Qe.emphasis,fontStyle:"italic"},{tag:Qe.strong,fontWeight:"bold"},{tag:Qe.strikethrough,textDecoration:"line-through"},{tag:Qe.keyword,color:"#708"},{tag:[Qe.atom,Qe.bool,Qe.url,Qe.contentSeparator,Qe.labelName],color:"#219"},{tag:[Qe.literal,Qe.inserted],color:"#164"},{tag:[Qe.string,Qe.deleted],color:"#a11"},{tag:[Qe.regexp,Qe.escape,Qe.special(Qe.string)],color:"#e40"},{tag:Qe.definition(Qe.variableName),color:"#00f"},{tag:Qe.local(Qe.variableName),color:"#30a"},{tag:[Qe.typeName,Qe.namespace],color:"#085"},{tag:Qe.className,color:"#167"},{tag:[Qe.special(Qe.variableName),Qe.macroName],color:"#256"},{tag:Qe.definition(Qe.propertyName),color:"#00c"},{tag:Qe.comment,color:"#940"},{tag:Qe.invalid,color:"#f00"}]),EMe=vt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),cW=1e4,hW="()[]{}",uW=wt.define({combine(n){return pl(n,{afterCursor:!0,brackets:hW,maxScanDistance:cW,renderMatch:RMe})}}),PMe=Zt.mark({class:"cm-matchingBracket"}),AMe=Zt.mark({class:"cm-nonmatchingBracket"});function RMe(n){let e=[],i=n.matched?PMe:AMe;return e.push(i.range(n.start.from,n.start.to)),n.end&&e.push(i.range(n.end.from,n.end.to)),e}const IMe=Xr.define({create(){return Zt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let i=[],t=e.state.facet(uW);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=el(e.state,r.head,-1,t)||r.head>0&&el(e.state,r.head-1,1,t)||t.afterCursor&&(el(e.state,r.head,1,t)||r.head<e.state.doc.length&&el(e.state,r.head+1,-1,t));s&&(i=i.concat(t.renderMatch(s,e.state)))}return Zt.set(i,!0)},provide:n=>vt.decorations.from(n)}),DMe=[IMe,EMe];function NMe(n={}){return[uW.of(n),DMe]}const $Me=new xi;function SM(n,e,i){let t=n.prop(e<0?xi.openedBy:xi.closedBy);if(t)return t;if(n.name.length==1){let r=i.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[i[r+e]]}return null}function CM(n){let e=n.type.prop($Me);return e?e(n.node):n}function el(n,e,i,t={}){let r=t.maxScanDistance||cW,s=t.brackets||hW,o=is(n),l=o.resolveInner(e,i);for(let c=l;c;c=c.parent){let u=SM(c.type,i,s);if(u&&c.from<c.to){let d=CM(c);if(d&&(i>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return VMe(n,e,i,c,d,u,s)}}return LMe(n,e,i,o,l.type,r,s)}function VMe(n,e,i,t,r,s,o){let l=t.parent,c={from:r.from,to:r.to},u=0,d=l==null?void 0:l.cursor();if(d&&(i<0?d.childBefore(t.from):d.childAfter(t.to)))do if(i<0?d.to<=t.from:d.from>=t.to){if(u==0&&s.indexOf(d.type.name)>-1&&d.from<d.to){let f=CM(d);return{start:c,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(SM(d.type,i,o))u++;else if(SM(d.type,-i,o)){if(u==0){let f=CM(d);return{start:c,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(i<0?d.prevSibling():d.nextSibling());return{start:c,matched:!1}}function LMe(n,e,i,t,r,s,o){let l=i<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=o.indexOf(l);if(c<0||c%2==0!=i>0)return null;let u={from:i<0?e-1:e,to:i>0?e+1:e},d=n.doc.iterRange(e,i>0?n.doc.length:0),f=0;for(let m=0;!d.next().done&&m<=s;){let g=d.value;i<0&&(m+=g.length);let y=e+m*i;for(let x=i>0?0:g.length-1,b=i>0?g.length:-1;x!=b;x+=i){let S=o.indexOf(g[x]);if(!(S<0||t.resolveInner(y+x,1).type!=r))if(S%2==0==i>0)f++;else{if(f==1)return{start:u,end:{from:y+x,to:y+x+1},matched:S>>1==c>>1};f--}}i>0&&(m+=g.length)}return d.done?{start:u,matched:!1}:null}const BMe=Object.create(null),wV=[Js.none],_V=[],SV=Object.create(null),UMe=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])UMe[n]=FMe(BMe,e);function N2(n,e){_V.indexOf(n)>-1||(_V.push(n),console.warn(e))}function FMe(n,e){let i=[];for(let l of e.split(" ")){let c=[];for(let u of l.split(".")){let d=n[u]||Qe[u];d?typeof d=="function"?c.length?c=c.map(d):N2(u,`Modifier ${u} used at start of tag`):c.length?N2(u,`Tag ${u} used as modifier`):c=Array.isArray(d)?d:[d]:N2(u,`Unknown highlighting tag ${u}`)}for(let u of c)i.push(u)}if(!i.length)return 0;let t=e.replace(/ /g,"_"),r=t+" "+i.map(l=>l.id),s=SV[r];if(s)return s.id;let o=SV[r]=Js.define({id:wV.length,name:t,props:[GX({[t]:i})]});return wV.push(o),o.id}wn.RTL,wn.LTR;const zMe=n=>{let{state:e}=n,i=e.doc.lineAt(e.selection.main.from),t=L3(n.state,i.from);return t.line?XMe(n):t.block?QMe(n):!1};function V3(n,e){return({state:i,dispatch:t})=>{if(i.readOnly)return!1;let r=n(e,i);return r?(t(i.update(r)),!0):!1}}const XMe=V3(YMe,0),WMe=V3(dW,0),QMe=V3((n,e)=>dW(n,e,GMe(e)),0);function L3(n,e){let i=n.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const Jg=50;function HMe(n,{open:e,close:i},t,r){let s=n.sliceDoc(t-Jg,t),o=n.sliceDoc(r,r+Jg),l=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(o)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&o.slice(c,c+i.length)==i)return{open:{pos:t-l,margin:l&&1},close:{pos:r+c,margin:c&&1}};let d,f;r-t<=2*Jg?d=f=n.sliceDoc(t,r):(d=n.sliceDoc(t,t+Jg),f=n.sliceDoc(r-Jg,r));let m=/^\s*/.exec(d)[0].length,g=/\s*$/.exec(f)[0].length,y=f.length-g-i.length;return d.slice(m,m+e.length)==e&&f.slice(y,y+i.length)==i?{open:{pos:t+m+e.length,margin:/\s/.test(d.charAt(m+e.length))?1:0},close:{pos:r-g-i.length,margin:/\s/.test(f.charAt(y-1))?1:0}}:null}function GMe(n){let e=[];for(let i of n.selection.ranges){let t=n.doc.lineAt(i.from),r=i.to<=t.to?t:n.doc.lineAt(i.to),s=e.length-1;s>=0&&e[s].to>t.from?e[s].to=r.to:e.push({from:t.from+/^\s*/.exec(t.text)[0].length,to:r.to})}return e}function dW(n,e,i=e.selection.ranges){let t=i.map(s=>L3(e,s.from).block);if(!t.every(s=>s))return null;let r=i.map((s,o)=>HMe(e,t[o],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:e.changes(i.map((s,o)=>r[o]?[]:[{from:s.from,insert:t[o].open+" "},{from:s.to,insert:" "+t[o].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let c=t[o],{open:u,close:d}=l;s.push({from:u.pos-c.open.length,to:u.pos+u.margin},{from:d.pos-d.margin,to:d.pos+c.close.length})}return{changes:s}}return null}function YMe(n,e,i=e.selection.ranges){let t=[],r=-1;for(let{from:s,to:o}of i){let l=t.length,c=1e9,u=L3(e,s).line;if(u){for(let d=s;d<=o;){let f=e.doc.lineAt(d);if(f.from>r&&(s==o||o>f.from)){r=f.from;let m=/^\s*/.exec(f.text)[0].length,g=m==f.length,y=f.text.slice(m,m+u.length)==u?m:-1;m<f.text.length&&m<c&&(c=m),t.push({line:f,comment:y,token:u,indent:m,empty:g,single:!1})}d=f.to+1}if(c<1e9)for(let d=l;d<t.length;d++)t[d].indent<t[d].line.text.length&&(t[d].indent=c);t.length==l+1&&(t[l].single=!0)}}if(n!=2&&t.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:c,indent:u,empty:d,single:f}of t)(f||!d)&&s.push({from:l.from+u,insert:c+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&t.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:c}of t)if(l>=0){let u=o.from+l,d=u+c.length;o.text[d-o.from]==" "&&d++,s.push({from:u,to:d})}return{changes:s}}return null}const kM=fc.define(),jMe=fc.define(),qMe=wt.define(),fW=wt.define({combine(n){return pl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(t,r)=>e(t,r)||i(t,r)})}}),pW=Xr.define({create(){return tl.empty},update(n,e){let i=e.state.facet(fW),t=e.annotation(kM);if(t){let c=qs.fromTransaction(e,t.selection),u=t.side,d=u==0?n.undone:n.done;return c?d=NO(d,d.length,i.minDepth,c):d=vW(d,e.startState.selection),new tl(u==0?t.rest:d,u==0?d:t.rest)}let r=e.annotation(jMe);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(gr.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=qs.fromTransaction(e),o=e.annotation(gr.time),l=e.annotation(gr.userEvent);return s?n=n.addChanges(s,o,l,i,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,i.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new tl(n.done.map(qs.fromJSON),n.undone.map(qs.fromJSON))}});function ZMe(n={}){return[pW,fW.of(n),vt.domEventHandlers({beforeinput(e,i){let t=e.inputType=="historyUndo"?mW:e.inputType=="historyRedo"?TM:null;return t?(e.preventDefault(),t(i)):!1}})]}function d_(n,e){return function({state:i,dispatch:t}){if(!e&&i.readOnly)return!1;let r=i.field(pW,!1);if(!r)return!1;let s=r.pop(n,i,e);return s?(t(s),!0):!1}}const mW=d_(0,!1),TM=d_(1,!1),KMe=d_(0,!0),JMe=d_(1,!0);class qs{constructor(e,i,t,r,s){this.changes=e,this.effects=i,this.mapped=t,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new qs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,t;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(t=this.startSelection)===null||t===void 0?void 0:t.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new qs(e.changes&&ur.fromJSON(e.changes),[],e.mapped&&nl.fromJSON(e.mapped),e.startSelection&&Ze.fromJSON(e.startSelection),e.selectionsAfter.map(Ze.fromJSON))}static fromTransaction(e,i){let t=Ho;for(let r of e.startState.facet(qMe)){let s=r(e);s.length&&(t=t.concat(s))}return!t.length&&e.changes.empty?null:new qs(e.changes.invert(e.startState.doc),t,void 0,i||e.startState.selection,Ho)}static selection(e){return new qs(void 0,Ho,void 0,void 0,e)}}function NO(n,e,i,t){let r=e+1>i+20?e-i-1:0,s=n.slice(r,e);return s.push(t),s}function eEe(n,e){let i=[],t=!1;return n.iterChangedRanges((r,s)=>i.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let c=0;c<i.length;){let u=i[c++],d=i[c++];l>=u&&o<=d&&(t=!0)}}),t}function tEe(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((i,t)=>i.empty!=e.ranges[t].empty).length===0}function gW(n,e){return n.length?e.length?n.concat(e):n:e}const Ho=[],iEe=200;function vW(n,e){if(n.length){let i=n[n.length-1],t=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-iEe));return t.length&&t[t.length-1].eq(e)?n:(t.push(e),NO(n,n.length-1,1e9,i.setSelAfter(t)))}else return[qs.selection([e])]}function nEe(n){let e=n[n.length-1],i=n.slice();return i[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function $2(n,e){if(!n.length)return n;let i=n.length,t=Ho;for(;i;){let r=rEe(n[i-1],e,t);if(r.changes&&!r.changes.empty||r.effects.length){let s=n.slice(0,i);return s[i-1]=r,s}else e=r.mapped,i--,t=r.selectionsAfter}return t.length?[qs.selection(t)]:Ho}function rEe(n,e,i){let t=gW(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):Ho,i);if(!n.changes)return qs.selection(t);let r=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new qs(r,vi.mapEffects(n.effects,e),o,n.startSelection.map(s),t)}const sEe=/^(input\.type|delete)($|\.)/;class tl{constructor(e,i,t=0,r=void 0){this.done=e,this.undone=i,this.prevTime=t,this.prevUserEvent=r}isolate(){return this.prevTime?new tl(this.done,this.undone):this}addChanges(e,i,t,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!t||sEe.test(t))&&(!l.selectionsAfter.length&&i-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,eEe(l.changes,e.changes))||t=="input.type.compose")?o=NO(o,o.length-1,r.minDepth,new qs(e.changes.compose(l.changes),gW(vi.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Ho)):o=NO(o,o.length,r.minDepth,e),new tl(o,Ho,i,t)}addSelection(e,i,t,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ho;return s.length>0&&i-this.prevTime<r&&t==this.prevUserEvent&&t&&/^select($|\.)/.test(t)&&tEe(s[s.length-1],e)?this:new tl(vW(this.done,e),this.undone,i,t)}addMapping(e){return new tl($2(this.done,e),$2(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,t){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||i.selection;if(t&&s.selectionsAfter.length)return i.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:kM.of({side:e,rest:nEe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=r.length==1?Ho:r.slice(0,r.length-1);return s.mapped&&(l=$2(l,s.mapped)),i.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:kM.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}tl.empty=new tl(Ho,Ho);const oEe=[{key:"Mod-z",run:mW,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:TM,preventDefault:!0},{linux:"Ctrl-Shift-z",run:TM,preventDefault:!0},{key:"Mod-u",run:KMe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:JMe,preventDefault:!0}];function qp(n,e){return Ze.create(n.ranges.map(e),n.mainIndex)}function ml(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Pa({state:n,dispatch:e},i){let t=qp(n.selection,i);return t.eq(n.selection,!0)?!1:(e(ml(n,t)),!0)}function f_(n,e){return Ze.cursor(e?n.to:n.from)}function yW(n,e){return Pa(n,i=>i.empty?n.moveByChar(i,e):f_(i,e))}function os(n){return n.textDirectionAt(n.state.selection.main.head)==wn.LTR}const bW=n=>yW(n,!os(n)),xW=n=>yW(n,os(n));function OW(n,e){return Pa(n,i=>i.empty?n.moveByGroup(i,e):f_(i,e))}const aEe=n=>OW(n,!os(n)),lEe=n=>OW(n,os(n));function cEe(n,e,i){if(e.type.prop(i))return!0;let t=e.to-e.from;return t&&(t>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function p_(n,e,i){let t=is(n).resolveInner(e.head),r=i?xi.closedBy:xi.openedBy;for(let c=e.head;;){let u=i?t.childAfter(c):t.childBefore(c);if(!u)break;cEe(n,u,r)?t=u:c=i?u.to:u.from}let s=t.type.prop(r),o,l;return s&&(o=i?el(n,t.from,1):el(n,t.to,-1))&&o.matched?l=i?o.end.to:o.end.from:l=i?t.to:t.from,Ze.cursor(l,i?-1:1)}const hEe=n=>Pa(n,e=>p_(n.state,e,!os(n))),uEe=n=>Pa(n,e=>p_(n.state,e,os(n)));function wW(n,e){return Pa(n,i=>{if(!i.empty)return f_(i,e);let t=n.moveVertically(i,e);return t.head!=i.head?t:n.moveToLineBoundary(i,e)})}const _W=n=>wW(n,!1),SW=n=>wW(n,!0);function CW(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,i=0,t=0,r;if(e){for(let s of n.state.facet(vt.scrollMargins)){let o=s(n);o!=null&&o.top&&(i=Math.max(o==null?void 0:o.top,i)),o!=null&&o.bottom&&(t=Math.max(o==null?void 0:o.bottom,t))}r=n.scrollDOM.clientHeight-i-t}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:t,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function kW(n,e){let i=CW(n),{state:t}=n,r=qp(t.selection,o=>o.empty?n.moveVertically(o,e,i.height):f_(o,e));if(r.eq(t.selection))return!1;let s;if(i.selfScroll){let o=n.coordsAtPos(t.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),c=l.top+i.marginTop,u=l.bottom-i.marginBottom;o&&o.top>c&&o.bottom<u&&(s=vt.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-c}))}return n.dispatch(ml(t,r),{effects:s}),!0}const CV=n=>kW(n,!1),MM=n=>kW(n,!0);function Uh(n,e,i){let t=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,i);if(r.head==e.head&&r.head!=(i?t.to:t.from)&&(r=n.moveToLineBoundary(e,i,!1)),!i&&r.head==t.from&&t.length){let s=/^\s*/.exec(n.state.sliceDoc(t.from,Math.min(t.from+100,t.to)))[0].length;s&&e.head!=t.from+s&&(r=Ze.cursor(t.from+s))}return r}const dEe=n=>Pa(n,e=>Uh(n,e,!0)),fEe=n=>Pa(n,e=>Uh(n,e,!1)),pEe=n=>Pa(n,e=>Uh(n,e,!os(n))),mEe=n=>Pa(n,e=>Uh(n,e,os(n))),gEe=n=>Pa(n,e=>Ze.cursor(n.lineBlockAt(e.head).from,1)),vEe=n=>Pa(n,e=>Ze.cursor(n.lineBlockAt(e.head).to,-1));function yEe(n,e,i){let t=!1,r=qp(n.selection,s=>{let o=el(n,s.head,-1)||el(n,s.head,1)||s.head>0&&el(n,s.head-1,1)||s.head<n.doc.length&&el(n,s.head+1,-1);if(!o||!o.end)return s;t=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return Ze.cursor(l)});return t?(e(ml(n,r)),!0):!1}const bEe=({state:n,dispatch:e})=>yEe(n,e);function ta(n,e){let i=qp(n.state.selection,t=>{let r=e(t);return Ze.range(t.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return i.eq(n.state.selection)?!1:(n.dispatch(ml(n.state,i)),!0)}function TW(n,e){return ta(n,i=>n.moveByChar(i,e))}const MW=n=>TW(n,!os(n)),EW=n=>TW(n,os(n));function PW(n,e){return ta(n,i=>n.moveByGroup(i,e))}const xEe=n=>PW(n,!os(n)),OEe=n=>PW(n,os(n)),wEe=n=>ta(n,e=>p_(n.state,e,!os(n))),_Ee=n=>ta(n,e=>p_(n.state,e,os(n)));function AW(n,e){return ta(n,i=>n.moveVertically(i,e))}const RW=n=>AW(n,!1),IW=n=>AW(n,!0);function DW(n,e){return ta(n,i=>n.moveVertically(i,e,CW(n).height))}const kV=n=>DW(n,!1),TV=n=>DW(n,!0),SEe=n=>ta(n,e=>Uh(n,e,!0)),CEe=n=>ta(n,e=>Uh(n,e,!1)),kEe=n=>ta(n,e=>Uh(n,e,!os(n))),TEe=n=>ta(n,e=>Uh(n,e,os(n))),MEe=n=>ta(n,e=>Ze.cursor(n.lineBlockAt(e.head).from)),EEe=n=>ta(n,e=>Ze.cursor(n.lineBlockAt(e.head).to)),MV=({state:n,dispatch:e})=>(e(ml(n,{anchor:0})),!0),EV=({state:n,dispatch:e})=>(e(ml(n,{anchor:n.doc.length})),!0),PV=({state:n,dispatch:e})=>(e(ml(n,{anchor:n.selection.main.anchor,head:0})),!0),AV=({state:n,dispatch:e})=>(e(ml(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),PEe=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),AEe=({state:n,dispatch:e})=>{let i=m_(n).map(({from:t,to:r})=>Ze.range(t,Math.min(r+1,n.doc.length)));return e(n.update({selection:Ze.create(i),userEvent:"select"})),!0},REe=({state:n,dispatch:e})=>{let i=qp(n.selection,t=>{var r;let s=is(n).resolveStack(t.from,1);for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<t.from&&l.to>=t.to||l.to>t.to&&l.from<=t.from)&&(!((r=l.parent)===null||r===void 0)&&r.parent))return Ze.range(l.to,l.from)}return t});return e(ml(n,i)),!0},IEe=({state:n,dispatch:e})=>{let i=n.selection,t=null;return i.ranges.length>1?t=Ze.create([i.main]):i.main.empty||(t=Ze.create([Ze.cursor(i.main.head)])),t?(e(ml(n,t)),!0):!1};function yy(n,e){if(n.state.readOnly)return!1;let i="delete.selection",{state:t}=n,r=t.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let c=e(s);c<o?(i="delete.backward",c=Yb(n,c,!1)):c>o&&(i="delete.forward",c=Yb(n,c,!0)),o=Math.min(o,c),l=Math.max(l,c)}else o=Yb(n,o,!1),l=Yb(n,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:Ze.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(t.update(r,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?vt.announce.of(t.phrase("Selection deleted")):void 0})),!0)}function Yb(n,e,i){if(n instanceof vt)for(let t of n.state.facet(vt.atomicRanges).map(r=>r(n)))t.between(e,e,(r,s)=>{r<e&&s>e&&(e=i?s:r)});return e}const NW=(n,e,i)=>yy(n,t=>{let r=t.from,{state:s}=n,o=s.doc.lineAt(r),l,c;if(i&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,r-o.from))){if(l[l.length-1]=="	")return r-1;let u=jp(l,s.tabSize),d=u%RO(s)||RO(s);for(let f=0;f<d&&l[l.length-1-f]==" ";f++)r--;c=r}else c=Lr(o.text,r-o.from,e,e)+o.from,c==r&&o.number!=(e?s.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(c-o.from,r-o.from))&&(c=Lr(o.text,c-o.from,!1,!1)+o.from);return c}),EM=n=>NW(n,!1,!0),$W=n=>NW(n,!0,!1),VW=(n,e)=>yy(n,i=>{let t=i.head,{state:r}=n,s=r.doc.lineAt(t),o=r.charCategorizer(t);for(let l=null;;){if(t==(e?s.to:s.from)){t==i.head&&s.number!=(e?r.doc.lines:1)&&(t+=e?1:-1);break}let c=Lr(s.text,t-s.from,e)+s.from,u=s.text.slice(Math.min(t,c)-s.from,Math.max(t,c)-s.from),d=o(u);if(l!=null&&d!=l)break;(u!=" "||t!=i.head)&&(l=d),t=c}return t}),LW=n=>VW(n,!1),DEe=n=>VW(n,!0),NEe=n=>yy(n,e=>{let i=n.lineBlockAt(e.head).to;return e.head<i?i:Math.min(n.state.doc.length,e.head+1)}),$Ee=n=>yy(n,e=>{let i=n.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),VEe=n=>yy(n,e=>{let i=n.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(n.state.doc.length,e.head+1)}),LEe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=n.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:zi.of(["",""])},range:Ze.cursor(t.from)}));return e(n.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},BEe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=n.changeByRange(t=>{if(!t.empty||t.from==0||t.from==n.doc.length)return{range:t};let r=t.from,s=n.doc.lineAt(r),o=r==s.from?r-1:Lr(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:Lr(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:n.doc.slice(r,l).append(n.doc.slice(o,r))},range:Ze.cursor(l)}});return i.changes.empty?!1:(e(n.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function m_(n){let e=[],i=-1;for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=n.doc.lineAt(t.to);if(!t.empty&&t.to==s.from&&(s=n.doc.lineAt(t.to-1)),i>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(t)}else e.push({from:r.from,to:s.to,ranges:[t]});i=s.number+1}return e}function BW(n,e,i){if(n.readOnly)return!1;let t=[],r=[];for(let s of m_(n)){if(i?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(i?s.to+1:s.from-1),l=o.length+1;if(i){t.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let c of s.ranges)r.push(Ze.range(Math.min(n.doc.length,c.anchor+l),Math.min(n.doc.length,c.head+l)))}else{t.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let c of s.ranges)r.push(Ze.range(c.anchor-l,c.head-l))}}return t.length?(e(n.update({changes:t,scrollIntoView:!0,selection:Ze.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const UEe=({state:n,dispatch:e})=>BW(n,e,!1),FEe=({state:n,dispatch:e})=>BW(n,e,!0);function UW(n,e,i){if(n.readOnly)return!1;let t=[];for(let r of m_(n))i?t.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):t.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:t,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const zEe=({state:n,dispatch:e})=>UW(n,e,!1),XEe=({state:n,dispatch:e})=>UW(n,e,!0),WEe=n=>{if(n.state.readOnly)return!1;let{state:e}=n,i=e.changes(m_(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),t=qp(e.selection,r=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(r.head),l=n.coordsAtPos(r.head,r.assoc||1);l&&(s=o.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,s)}).map(i);return n.dispatch({changes:i,selection:t,scrollIntoView:!0,userEvent:"delete.line"}),!0};function QEe(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=is(n).resolveInner(e),t=i.childBefore(e),r=i.childAfter(e),s;return t&&r&&t.to<=e&&r.from>=e&&(s=t.type.prop(xi.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(t.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(t.to,r.from))?{from:t.to,to:r.from}:null}const HEe=FW(!1),GEe=FW(!0);function FW(n){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let t=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),c=!n&&s==o&&QEe(e,s);n&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new c_(e,{simulateBreak:s,simulateDoubleBreak:!!c}),d=N3(u,s);for(d==null&&(d=jp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;c?{from:s,to:o}=c:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let f=["",Cv(e,d)];return c&&f.push(Cv(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:zi.of(f)},range:Ze.cursor(s+1+f[1].length)}});return i(e.update(t,{scrollIntoView:!0,userEvent:"input"})),!0}}function B3(n,e){let i=-1;return n.changeByRange(t=>{let r=[];for(let o=t.from;o<=t.to;){let l=n.doc.lineAt(o);l.number>i&&(t.empty||t.to>l.from)&&(e(l,r,t),i=l.number),o=l.to+1}let s=n.changes(r);return{changes:r,range:Ze.range(s.mapPos(t.anchor,1),s.mapPos(t.head,1))}})}const YEe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Object.create(null),t=new c_(n,{overrideIndentation:s=>{let o=i[s];return o??-1}}),r=B3(n,(s,o,l)=>{let c=N3(t,s.from);if(c==null)return;/\S/.test(s.text)||(c=0);let u=/^\s*/.exec(s.text)[0],d=Cv(n,c);(u!=d||l.from<s.from+u.length)&&(i[s.from]=c,o.push({from:s.from,to:s.from+u.length,insert:d}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},jEe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(B3(n,(i,t)=>{t.push({from:i.from,insert:n.facet(D3)})}),{userEvent:"input.indent"})),!0),qEe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(B3(n,(i,t)=>{let r=/^\s*/.exec(i.text)[0];if(!r)return;let s=jp(r,n.tabSize),o=0,l=Cv(n,Math.max(0,s-RO(n)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;t.push({from:i.from+o,to:i.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),ZEe=n=>(n.setTabFocusMode(),!0),KEe=[{key:"Ctrl-b",run:bW,shift:MW,preventDefault:!0},{key:"Ctrl-f",run:xW,shift:EW},{key:"Ctrl-p",run:_W,shift:RW},{key:"Ctrl-n",run:SW,shift:IW},{key:"Ctrl-a",run:gEe,shift:MEe},{key:"Ctrl-e",run:vEe,shift:EEe},{key:"Ctrl-d",run:$W},{key:"Ctrl-h",run:EM},{key:"Ctrl-k",run:NEe},{key:"Ctrl-Alt-h",run:LW},{key:"Ctrl-o",run:LEe},{key:"Ctrl-t",run:BEe},{key:"Ctrl-v",run:MM}],JEe=[{key:"ArrowLeft",run:bW,shift:MW,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:aEe,shift:xEe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:pEe,shift:kEe,preventDefault:!0},{key:"ArrowRight",run:xW,shift:EW,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:lEe,shift:OEe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:mEe,shift:TEe,preventDefault:!0},{key:"ArrowUp",run:_W,shift:RW,preventDefault:!0},{mac:"Cmd-ArrowUp",run:MV,shift:PV},{mac:"Ctrl-ArrowUp",run:CV,shift:kV},{key:"ArrowDown",run:SW,shift:IW,preventDefault:!0},{mac:"Cmd-ArrowDown",run:EV,shift:AV},{mac:"Ctrl-ArrowDown",run:MM,shift:TV},{key:"PageUp",run:CV,shift:kV},{key:"PageDown",run:MM,shift:TV},{key:"Home",run:fEe,shift:CEe,preventDefault:!0},{key:"Mod-Home",run:MV,shift:PV},{key:"End",run:dEe,shift:SEe,preventDefault:!0},{key:"Mod-End",run:EV,shift:AV},{key:"Enter",run:HEe},{key:"Mod-a",run:PEe},{key:"Backspace",run:EM,shift:EM},{key:"Delete",run:$W},{key:"Mod-Backspace",mac:"Alt-Backspace",run:LW},{key:"Mod-Delete",mac:"Alt-Delete",run:DEe},{mac:"Mod-Backspace",run:$Ee},{mac:"Mod-Delete",run:VEe}].concat(KEe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),ePe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:hEe,shift:wEe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:uEe,shift:_Ee},{key:"Alt-ArrowUp",run:UEe},{key:"Shift-Alt-ArrowUp",run:zEe},{key:"Alt-ArrowDown",run:FEe},{key:"Shift-Alt-ArrowDown",run:XEe},{key:"Escape",run:IEe},{key:"Mod-Enter",run:GEe},{key:"Alt-l",mac:"Ctrl-l",run:AEe},{key:"Mod-i",run:REe,preventDefault:!0},{key:"Mod-[",run:qEe},{key:"Mod-]",run:jEe},{key:"Mod-Alt-\\",run:YEe},{key:"Shift-Mod-k",run:WEe},{key:"Shift-Mod-\\",run:bEe},{key:"Mod-/",run:zMe},{key:"Alt-A",run:WMe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ZEe}].concat(JEe);function pn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var r=i[t];typeof r=="string"?n.setAttribute(t,r):r!=null&&(n[t]=r)}e++}for(;e<arguments.length;e++)zW(n,arguments[e]);return n}function zW(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)zW(n,e[i]);else throw new RangeError("Unsupported child node: "+e)}const RV=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Rp{constructor(e,i,t=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(t,r),this.bufferStart=t,this.normalize=s?l=>s(RV(l)):RV,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Dr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=p3(e),t=this.bufferStart+this.bufferPos;this.bufferPos+=zo(e);let r=this.normalize(i);for(let s=0,o=t;;s++){let l=r.charCodeAt(s),c=this.match(l,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(c)return this.value=c,this;break}o==t&&s<i.length&&i.charCodeAt(s)==l&&o++}}}match(e,i,t){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:t}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:i,to:t}:this.matches.push(1,i)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Rp.prototype[Symbol.iterator]=function(){return this});const XW={from:-1,to:-1,match:/.*/.exec("")},U3="gm"+(/x/.unicode==null?"":"u");class WW{constructor(e,i,t,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=XW,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new QW(e,i,t,r,s);this.re=new RegExp(i,U3+(t!=null&&t.ignoreCase?"i":"")),this.test=t==null?void 0:t.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=$O(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let t=this.curLineStart+i.index,r=t+i[0].length;if(this.matchPos=$O(this.text,r+(t==r?1:0)),t==this.curLineStart+this.curLine.length&&this.nextLine(),(t<r||t>this.value.to)&&(!this.test||this.test(t,r,i)))return this.value={from:t,to:r,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const V2=new WeakMap;class tp{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,t){let r=V2.get(e);if(!r||r.from>=t||r.to<=i){let l=new tp(i,e.sliceString(i,t));return V2.set(e,l),l}if(r.from==i&&r.to==t)return r;let{text:s,from:o}=r;return o>i&&(s=e.sliceString(i,o)+s,o=i),r.to<t&&(s+=e.sliceString(r.to,t)),V2.set(e,new tp(o,s)),new tp(i,s.slice(i-o,t-o))}}class QW{constructor(e,i,t,r,s){this.text=e,this.to=s,this.done=!1,this.value=XW,this.matchPos=$O(e,r),this.re=new RegExp(i,U3+(t!=null&&t.ignoreCase?"i":"")),this.test=t==null?void 0:t.test,this.flat=tp.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let t=this.flat.from+i.index,r=t+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,r,i)))return this.value={from:t,to:r,match:i},this.matchPos=$O(this.text,r+(t==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=tp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(WW.prototype[Symbol.iterator]=QW.prototype[Symbol.iterator]=function(){return this});function tPe(n){try{return new RegExp(n,U3),!0}catch{return!1}}function $O(n,e){if(e>=n.length)return e;let i=n.lineAt(e),t;for(;e<i.to&&(t=i.text.charCodeAt(e-i.from))>=56320&&t<57344;)e++;return e}function PM(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),i=pn("input",{class:"cm-textfield",name:"line",value:e}),t=pn("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:VO.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},pn("label",n.state.phrase("Go to line"),": ",i)," ",pn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!s)return;let{state:o}=n,l=o.doc.lineAt(o.selection.main.head),[,c,u,d,f]=s,m=d?+d.slice(1):0,g=u?+u:l.number;if(u&&f){let b=g/100;c&&(b=b*(c=="-"?-1:1)+l.number/o.doc.lines),g=Math.round(o.doc.lines*b)}else u&&c&&(g=g*(c=="-"?-1:1)+l.number);let y=o.doc.line(Math.max(1,Math.min(o.doc.lines,g))),x=Ze.cursor(y.from+Math.max(0,Math.min(m,y.length)));n.dispatch({effects:[VO.of(!1),vt.scrollIntoView(x.from,{y:"center"})],selection:x}),n.focus()}return{dom:t}}const VO=vi.define(),IV=Xr.define({create(){return!0},update(n,e){for(let i of e.effects)i.is(VO)&&(n=i.value);return n},provide:n=>_v.from(n,e=>e?PM:null)}),iPe=n=>{let e=wv(n,PM);if(!e){let i=[VO.of(!0)];n.state.field(IV,!1)==null&&i.push(vi.appendConfig.of([IV,nPe])),n.dispatch({effects:i}),e=wv(n,PM)}return e&&e.dom.querySelector("input").select(),!0},nPe=vt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),rPe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},sPe=wt.define({combine(n){return pl(n,rPe,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function oPe(n){return[uPe,hPe]}const aPe=Zt.mark({class:"cm-selectionMatch"}),lPe=Zt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function DV(n,e,i,t){return(i==0||n(e.sliceDoc(i-1,i))!=Tn.Word)&&(t==e.doc.length||n(e.sliceDoc(t,t+1))!=Tn.Word)}function cPe(n,e,i,t){return n(e.sliceDoc(i,i+1))==Tn.Word&&n(e.sliceDoc(t-1,t))==Tn.Word}const hPe=ar.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(sPe),{state:i}=n,t=i.selection;if(t.ranges.length>1)return Zt.none;let r=t.main,s,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return Zt.none;let c=i.wordAt(r.head);if(!c)return Zt.none;o=i.charCategorizer(r.head),s=i.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return Zt.none;if(e.wholeWords){if(s=i.sliceDoc(r.from,r.to),o=i.charCategorizer(r.head),!(DV(o,i,r.from,r.to)&&cPe(o,i,r.from,r.to)))return Zt.none}else if(s=i.sliceDoc(r.from,r.to),!s)return Zt.none}let l=[];for(let c of n.visibleRanges){let u=new Rp(i.doc,s,c.from,c.to);for(;!u.next().done;){let{from:d,to:f}=u.value;if((!o||DV(o,i,d,f))&&(r.empty&&d<=r.from&&f>=r.to?l.push(lPe.range(d,f)):(d>=r.to||f<=r.from)&&l.push(aPe.range(d,f)),l.length>e.maxMatches))return Zt.none}}return Zt.set(l)}},{decorations:n=>n.decorations}),uPe=vt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),dPe=({state:n,dispatch:e})=>{let{selection:i}=n,t=Ze.create(i.ranges.map(r=>n.wordAt(r.head)||Ze.cursor(r.head)),i.mainIndex);return t.eq(i)?!1:(e(n.update({selection:t})),!0)};function fPe(n,e){let{main:i,ranges:t}=n.selection,r=n.wordAt(i.head),s=r&&r.from==i.from&&r.to==i.to;for(let o=!1,l=new Rp(n.doc,e,t[t.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Rp(n.doc,e,0,Math.max(0,t[t.length-1].from-1)),o=!0}else{if(o&&t.some(c=>c.from==l.value.from))continue;if(s){let c=n.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const pPe=({state:n,dispatch:e})=>{let{ranges:i}=n.selection;if(i.some(s=>s.from===s.to))return dPe({state:n,dispatch:e});let t=n.sliceDoc(i[0].from,i[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=t))return!1;let r=fPe(n,t);return r?(e(n.update({selection:n.selection.addRange(Ze.range(r.from,r.to),!1),effects:vt.scrollIntoView(r.to)})),!0):!1},Zp=wt.define({combine(n){return pl(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new kPe(e),scrollToMatch:e=>vt.scrollIntoView(e)})}});class HW{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||tPe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,t)=>t=="n"?`
`:t=="r"?"\r":t=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new yPe(this):new gPe(this)}getCursor(e,i=0,t){let r=e.doc?e:Ui.create({doc:e});return t==null&&(t=r.doc.length),this.regexp?kf(this,r,i,t):Cf(this,r,i,t)}}class GW{constructor(e){this.spec=e}}function Cf(n,e,i,t){return new Rp(e.doc,n.unquoted,i,t,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?mPe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function mPe(n,e){return(i,t,r,s)=>((s>i||s+r.length<t)&&(s=Math.max(0,i-2),r=n.sliceString(s,Math.min(n.length,t+2))),(e(LO(r,i-s))!=Tn.Word||e(BO(r,i-s))!=Tn.Word)&&(e(BO(r,t-s))!=Tn.Word||e(LO(r,t-s))!=Tn.Word))}class gPe extends GW{constructor(e){super(e)}nextMatch(e,i,t){let r=Cf(this.spec,e,t,e.doc.length).nextOverlapping();return r.done&&(r=Cf(this.spec,e,0,i).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,i,t){for(let r=t;;){let s=Math.max(i,r-1e4-this.spec.unquoted.length),o=Cf(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==i)return null;r-=1e4}}prevMatch(e,i,t){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,t,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let t=Cf(this.spec,e,0,e.doc.length),r=[];for(;!t.next().done;){if(r.length>=i)return null;r.push(t.value)}return r}highlight(e,i,t,r){let s=Cf(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(t+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function kf(n,e,i,t){return new WW(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?vPe(e.charCategorizer(e.selection.main.head)):void 0},i,t)}function LO(n,e){return n.slice(Lr(n,e,!1),e)}function BO(n,e){return n.slice(e,Lr(n,e))}function vPe(n){return(e,i,t)=>!t[0].length||(n(LO(t.input,t.index))!=Tn.Word||n(BO(t.input,t.index))!=Tn.Word)&&(n(BO(t.input,t.index+t[0].length))!=Tn.Word||n(LO(t.input,t.index+t[0].length))!=Tn.Word)}class yPe extends GW{nextMatch(e,i,t){let r=kf(this.spec,e,t,e.doc.length).next();return r.done&&(r=kf(this.spec,e,0,i).next()),r.done?null:r.value}prevMatchInRange(e,i,t){for(let r=1;;r++){let s=Math.max(i,t-r*1e4),o=kf(this.spec,e,s,t),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==i||l.from>s+10))return l;if(s==i)return null}}prevMatch(e,i,t){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,t,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(i,t)=>t=="$"?"$":t=="&"?e.match[0]:t!="0"&&+t<e.match.length?e.match[t]:i)}matchAll(e,i){let t=kf(this.spec,e,0,e.doc.length),r=[];for(;!t.next().done;){if(r.length>=i)return null;r.push(t.value)}return r}highlight(e,i,t,r){let s=kf(this.spec,e,Math.max(0,i-250),Math.min(t+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const kv=vi.define(),F3=vi.define(),mh=Xr.define({create(n){return new L2(AM(n).create(),null)},update(n,e){for(let i of e.effects)i.is(kv)?n=new L2(i.value.create(),n.panel):i.is(F3)&&(n=new L2(n.query,i.value?z3:null));return n},provide:n=>_v.from(n,e=>e.panel)});class L2{constructor(e,i){this.query=e,this.panel=i}}const bPe=Zt.mark({class:"cm-searchMatch"}),xPe=Zt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),OPe=ar.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(mh))}update(n){let e=n.state.field(mh);(e!=n.startState.field(mh)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Zt.none;let{view:i}=this,t=new Ch;for(let r=0,s=i.visibleRanges,o=s.length;r<o;r++){let{from:l,to:c}=s[r];for(;r<o-1&&c>s[r+1].from-2*250;)c=s[++r].to;n.highlight(i.state,l,c,(u,d)=>{let f=i.state.selection.ranges.some(m=>m.from==u&&m.to==d);t.add(u,d,f?xPe:bPe)})}return t.finish()}},{decorations:n=>n.decorations});function by(n){return e=>{let i=e.state.field(mh,!1);return i&&i.query.spec.valid?n(e,i):qW(e)}}const UO=by((n,{query:e})=>{let{to:i}=n.state.selection.main,t=e.nextMatch(n.state,i,i);if(!t)return!1;let r=Ze.single(t.from,t.to),s=n.state.facet(Zp);return n.dispatch({selection:r,effects:[X3(n,t),s.scrollToMatch(r.main,n)],userEvent:"select.search"}),jW(n),!0}),FO=by((n,{query:e})=>{let{state:i}=n,{from:t}=i.selection.main,r=e.prevMatch(i,t,t);if(!r)return!1;let s=Ze.single(r.from,r.to),o=n.state.facet(Zp);return n.dispatch({selection:s,effects:[X3(n,r),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),jW(n),!0}),wPe=by((n,{query:e})=>{let i=e.matchAll(n.state,1e3);return!i||!i.length?!1:(n.dispatch({selection:Ze.create(i.map(t=>Ze.range(t.from,t.to))),userEvent:"select.search.matches"}),!0)}),_Pe=({state:n,dispatch:e})=>{let i=n.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:t,to:r}=i.main,s=[],o=0;for(let l=new Rp(n.doc,n.sliceDoc(t,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==t&&(o=s.length),s.push(Ze.range(l.value.from,l.value.to))}return e(n.update({selection:Ze.create(s,o),userEvent:"select.search.matches"})),!0},NV=by((n,{query:e})=>{let{state:i}=n,{from:t,to:r}=i.selection.main;if(i.readOnly)return!1;let s=e.nextMatch(i,t,t);if(!s)return!1;let o=[],l,c,u=[];if(s.from==t&&s.to==r&&(c=i.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:c}),s=e.nextMatch(i,s.from,s.to),u.push(vt.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(t).number)+"."))),s){let d=o.length==0||o[0].from>=s.to?0:s.to-s.from-c.length;l=Ze.single(s.from-d,s.to-d),u.push(X3(n,s)),u.push(i.facet(Zp).scrollToMatch(l.main,n))}return n.dispatch({changes:o,selection:l,effects:u,userEvent:"input.replace"}),!0}),SPe=by((n,{query:e})=>{if(n.state.readOnly)return!1;let i=e.matchAll(n.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!i.length)return!1;let t=n.state.phrase("replaced $ matches",i.length)+".";return n.dispatch({changes:i,effects:vt.announce.of(t),userEvent:"input.replace.all"}),!0});function z3(n){return n.state.facet(Zp).createPanel(n)}function AM(n,e){var i,t,r,s,o;let l=n.selection.main,c=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!c)return e;let u=n.facet(Zp);return new HW({search:((i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(t=e==null?void 0:e.caseSensitive)!==null&&t!==void 0?t:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function YW(n){let e=wv(n,z3);return e&&e.dom.querySelector("[main-field]")}function jW(n){let e=YW(n);e&&e==n.root.activeElement&&e.select()}const qW=n=>{let e=n.state.field(mh,!1);if(e&&e.panel){let i=YW(n);if(i&&i!=n.root.activeElement){let t=AM(n.state,e.query.spec);t.valid&&n.dispatch({effects:kv.of(t)}),i.focus(),i.select()}}else n.dispatch({effects:[F3.of(!0),e?kv.of(AM(n.state,e.query.spec)):vi.appendConfig.of(MPe)]});return!0},ZW=n=>{let e=n.state.field(mh,!1);if(!e||!e.panel)return!1;let i=wv(n,z3);return i&&i.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:F3.of(!1)}),!0},CPe=[{key:"Mod-f",run:qW,scope:"editor search-panel"},{key:"F3",run:UO,shift:FO,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:UO,shift:FO,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:ZW,scope:"editor search-panel"},{key:"Mod-Shift-l",run:_Pe},{key:"Mod-Alt-g",run:iPe},{key:"Mod-d",run:pPe,preventDefault:!0}];class kPe{constructor(e){this.view=e;let i=this.query=e.state.field(mh).query.spec;this.commit=this.commit.bind(this),this.searchField=pn("input",{value:i.search,placeholder:uo(e,"Find"),"aria-label":uo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=pn("input",{value:i.replace,placeholder:uo(e,"Replace"),"aria-label":uo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=pn("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=pn("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=pn("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function t(r,s,o){return pn("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=pn("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,t("next",()=>UO(e),[uo(e,"next")]),t("prev",()=>FO(e),[uo(e,"previous")]),t("select",()=>wPe(e),[uo(e,"all")]),pn("label",null,[this.caseField,uo(e,"match case")]),pn("label",null,[this.reField,uo(e,"regexp")]),pn("label",null,[this.wordField,uo(e,"by word")]),...e.state.readOnly?[]:[pn("br"),this.replaceField,t("replace",()=>NV(e),[uo(e,"replace")]),t("replaceAll",()=>SPe(e),[uo(e,"replace all")])],pn("button",{name:"close",onclick:()=>ZW(e),"aria-label":uo(e,"close"),type:"button"},[""])])}commit(){let e=new HW({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:kv.of(e)}))}keydown(e){Rke(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?FO:UO)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),NV(this.view))}update(e){for(let i of e.transactions)for(let t of i.effects)t.is(kv)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Zp).top}}function uo(n,e){return n.state.phrase(e)}const jb=30,qb=/[\s\.,:;?!]/;function X3(n,{from:e,to:i}){let t=n.state.doc.lineAt(e),r=n.state.doc.lineAt(i).to,s=Math.max(t.from,e-jb),o=Math.min(r,i+jb),l=n.state.sliceDoc(s,o);if(s!=t.from){for(let c=0;c<jb;c++)if(!qb.test(l[c+1])&&qb.test(l[c])){l=l.slice(c);break}}if(o!=r){for(let c=l.length-1;c>l.length-jb;c--)if(!qb.test(l[c-1])&&qb.test(l[c])){l=l.slice(0,c);break}}return vt.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${t.number}.`)}const TPe=vt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),MPe=[mh,Cd.low(OPe),TPe];class KW{constructor(e,i,t,r){this.state=e,this.pos=i,this.explicit=t,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let i=is(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),t=Math.max(i.from,this.pos-250),r=i.text.slice(t-i.from,this.pos-i.from),s=r.search(JW(e,!1));return s<0?null:{from:t+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,i,t){e=="abort"&&this.abortListeners&&(this.abortListeners.push(i),t&&t.onDocChange&&(this.abortOnDocChange=!0))}}function $V(n){let e=Object.keys(n).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function EPe(n){let e=Object.create(null),i=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let s=1;s<r.length;s++)i[r[s]]=!0}let t=$V(e)+$V(i)+"*$";return[new RegExp("^"+t),new RegExp(t)]}function PPe(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[i,t]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:EPe(e);return r=>{let s=r.matchBefore(t);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:i}:null}}class VV{constructor(e,i,t,r){this.completion=e,this.source=i,this.match=t,this.score=r}}function gh(n){return n.selection.main.from}function JW(n,e){var i;let{source:t}=n,r=e&&t[0]!="^",s=t[t.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${t})${s?"$":""}`,(i=n.flags)!==null&&i!==void 0?i:n.ignoreCase?"i":"")}const eQ=fc.define();function APe(n,e,i,t){let{main:r}=n.selection,s=i-r.from,o=t-r.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=r&&i!=t&&n.sliceDoc(l.from+s,l.from+o)!=n.sliceDoc(i,t)?{range:l}:{changes:{from:l.from+s,to:t==r.from?l.to:l.from+o,insert:e},range:Ze.cursor(l.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const LV=new WeakMap;function RPe(n){if(!Array.isArray(n))return n;let e=LV.get(n);return e||LV.set(n,e=PPe(n)),e}const zO=vi.define(),Tv=vi.define();class IPe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let t=Dr(e,i),r=zo(t);this.chars.push(t);let s=e.slice(i,i+r),o=s.toUpperCase();this.folded.push(Dr(o==s?s.toLowerCase():o,0)),i+=r}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:i,folded:t,any:r,precise:s,byWord:o}=this;if(i.length==1){let _=Dr(e,0),O=zo(_),k=O==e.length?0:-100;if(_!=i[0])if(_==t[0])k+=-200;else return null;return this.ret(k,[0,O])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=i.length,u=0;if(l<0){for(let _=0,O=Math.min(e.length,200);_<O&&u<c;){let k=Dr(e,_);(k==i[u]||k==t[u])&&(r[u++]=_),_+=zo(k)}if(u<c)return null}let d=0,f=0,m=!1,g=0,y=-1,x=-1,b=/[a-z]/.test(e),S=!0;for(let _=0,O=Math.min(e.length,200),k=0;_<O&&f<c;){let M=Dr(e,_);l<0&&(d<c&&M==i[d]&&(s[d++]=_),g<c&&(M==i[g]||M==t[g]?(g==0&&(y=_),x=_+1,g++):g=0));let E,R=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(E=p3(M))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!_||R==1&&b||k==0&&R!=0)&&(i[f]==M||t[f]==M&&(m=!0)?o[f++]=_:o.length&&(S=!1)),k=R,_+=zo(M)}return f==c&&o[0]==0&&S?this.result(-100+(m?-200:0),o,e):g==c&&y==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):g==c?this.ret(-900-e.length,[y,x]):f==c?this.result(-100+(m?-200:0)+-700+(S?0:-1100),o,e):i.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,i,t){let r=[],s=0;for(let o of i){let l=o+(this.astral?zo(Dr(t,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-t.length,r)}}class DPe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let i=e.slice(0,this.pattern.length),t=i==this.pattern?0:i.toLowerCase()==this.folded?-200:null;return t==null?null:(this.matched=[0,i.length],this.score=t+(e.length==this.pattern.length?0:-100),this)}}const $r=wt.define({combine(n){return pl(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:NPe,filterStrict:!1,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>t=>BV(e(t),i(t)),optionClass:(e,i)=>t=>BV(e(t),i(t)),addToOptions:(e,i)=>e.concat(i),filterStrict:(e,i)=>e||i})}});function BV(n,e){return n?e?n+" "+e:n:e}function NPe(n,e,i,t,r,s){let o=n.textDirection==wn.RTL,l=o,c=!1,u="top",d,f,m=e.left-r.left,g=r.right-e.right,y=t.right-t.left,x=t.bottom-t.top;if(l&&m<Math.min(y,g)?l=!1:!l&&g<Math.min(y,m)&&(l=!0),y<=(l?m:g))d=Math.max(r.top,Math.min(i.top,r.bottom-x))-e.top,f=Math.min(400,l?m:g);else{c=!0,f=Math.min(400,(o?e.right:r.right-e.left)-30);let _=r.bottom-e.bottom;_>=x||_>e.top?d=i.bottom-e.top:(u="bottom",d=e.bottom-i.top)}let b=(e.bottom-e.top)/s.offsetHeight,S=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${d/b}px; max-width: ${f/S}px`,class:"cm-completionInfo-"+(c?o?"left-narrow":"right-narrow":l?"left":"right")}}function $Pe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(i){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),i.type&&t.classList.add(...i.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),t.setAttribute("aria-hidden","true"),t},position:20}),e.push({render(i,t,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=i.displayLabel||i.label,c=0;for(let u=0;u<s.length;){let d=s[u++],f=s[u++];d>c&&o.appendChild(document.createTextNode(l.slice(c,d)));let m=o.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(l.slice(d,f))),m.className="cm-completionMatchedText",c=f}return c<l.length&&o.appendChild(document.createTextNode(l.slice(c))),o},position:50},{render(i){if(!i.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=i.detail,t},position:80}),e.sort((i,t)=>i.position-t.position).map(i=>i.render)}function B2(n,e,i){if(n<=i)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/i);return{from:r*i,to:(r+1)*i}}let t=Math.floor((n-e)/i);return{from:n-(t+1)*i,to:n-t*i}}class VPe{constructor(e,i,t){this.view=e,this.stateField=i,this.applyCompletion=t,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(i),{options:s,selected:o}=r.open,l=e.state.facet($r);this.optionContent=$Pe(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=B2(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:u}=e.state.field(i).open;for(let d=c.target,f;d&&d!=this.dom;d=d.parentNode)if(d.nodeName=="LI"&&(f=/-(\d+)$/.exec(d.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet($r).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:Tv.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let t=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),t!=r){let{options:s,selected:o,disabled:l}=t.open;(!r.open||r.open.options!=s)&&(this.range=B2(s.length,o,e.state.facet($r).maxRenderedOptions),this.showOptions(s,t.id)),this.updateSel(),l!=((i=r.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of i.split(" "))t&&this.dom.classList.add(t);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=B2(i.options.length,i.selected,this.view.state.facet($r).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:t}=i.options[i.selected],{info:r}=t;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(t);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,t)}).catch(o=>js(this.view.state,o,"completion info")):this.addInfoPane(s,t)}}addInfoPane(e,i){this.destroyInfo();let t=this.info=document.createElement("div");if(t.className="cm-tooltip cm-completionInfo",e.nodeType!=null)t.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;t.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(t),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let t=this.list.firstChild,r=this.range.from;t;t=t.nextSibling,r++)t.nodeName!="LI"||!t.id?r--:r==e?t.hasAttribute("aria-selected")||(t.setAttribute("aria-selected","true"),i=t):t.hasAttribute("aria-selected")&&t.removeAttribute("aria-selected");return i&&BPe(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),t=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,i.bottom)-10||r.bottom<Math.max(s.top,i.top)+10?null:this.view.state.facet($r).positionInfo(this.view,i,r,t,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,t){const r=document.createElement("ul");r.id=i,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=t.from;o<t.to;o++){let{completion:l,match:c}=e[o],{section:u}=l;if(u){let m=typeof u=="string"?u:u.name;if(m!=s&&(o>t.from||t.from==0))if(s=m,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let g=r.appendChild(document.createElement("completion-section"));g.textContent=m}}const d=r.appendChild(document.createElement("li"));d.id=i+"-"+o,d.setAttribute("role","option");let f=this.optionClass(l);f&&(d.className=f);for(let m of this.optionContent){let g=m(l,this.view.state,this.view,c);g&&d.appendChild(g)}}return t.from&&r.classList.add("cm-completionListIncompleteTop"),t.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function LPe(n,e){return i=>new VPe(i,n,e)}function BPe(n,e){let i=n.getBoundingClientRect(),t=e.getBoundingClientRect(),r=i.height/n.offsetHeight;t.top<i.top?n.scrollTop-=(i.top-t.top)/r:t.bottom>i.bottom&&(n.scrollTop+=(t.bottom-i.bottom)/r)}function UV(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function UPe(n,e){let i=[],t=null,r=u=>{i.push(u);let{section:d}=u.completion;if(d){t||(t=[]);let f=typeof d=="string"?d:d.name;t.some(m=>m.name==f)||t.push(typeof d=="string"?{name:f}:d)}},s=e.facet($r);for(let u of n)if(u.hasResult()){let d=u.result.getMatch;if(u.result.filter===!1)for(let f of u.result.options)r(new VV(f,u.source,d?d(f):[],1e9-i.length));else{let f=e.sliceDoc(u.from,u.to),m,g=s.filterStrict?new DPe(f):new IPe(f);for(let y of u.result.options)if(m=g.match(y.label)){let x=y.displayLabel?d?d(y,m.matched):[]:m.matched;r(new VV(y,u.source,x,m.score+(y.boost||0)))}}}if(t){let u=Object.create(null),d=0,f=(m,g)=>{var y,x;return((y=m.rank)!==null&&y!==void 0?y:1e9)-((x=g.rank)!==null&&x!==void 0?x:1e9)||(m.name<g.name?-1:1)};for(let m of t.sort(f))d-=1e5,u[m.name]=d;for(let m of i){let{section:g}=m.completion;g&&(m.score+=u[typeof g=="string"?g:g.name])}}let o=[],l=null,c=s.compareCompletions;for(let u of i.sort((d,f)=>f.score-d.score||c(d.completion,f.completion))){let d=u.completion;!l||l.label!=d.label||l.detail!=d.detail||l.type!=null&&d.type!=null&&l.type!=d.type||l.apply!=d.apply||l.boost!=d.boost?o.push(u):UV(u.completion)>UV(l)&&(o[o.length-1]=u),l=u.completion}return o}class Df{constructor(e,i,t,r,s,o){this.options=e,this.attrs=i,this.tooltip=t,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new Df(this.options,FV(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,t,r,s){let o=UPe(e,i);if(!o.length)return r&&e.some(c=>c.state==1)?new Df(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=i.facet($r).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==c){l=u;break}}return new Df(o,FV(t,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:HPe,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Df(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class XO{constructor(e,i,t){this.active=e,this.id=i,this.open=t}static start(){return new XO(WPe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,t=i.facet($r),s=(t.override||i.languageDataAt("autocomplete",gh(i)).map(RPe)).map(l=>(this.active.find(u=>u.source==l)||new wo(l,this.active.some(u=>u.state!=0)?1:0)).update(e,t));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!FPe(s,this.active)?o=Df.build(s,i,this.id,o,t):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new wo(l.source,0):l));for(let l of e.effects)l.is(nQ)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new XO(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?zPe:XPe}}function FPe(n,e){if(n==e)return!0;for(let i=0,t=0;;){for(;i<n.length&&!n[i].hasResult;)i++;for(;t<e.length&&!e[t].hasResult;)t++;let r=i==n.length,s=t==e.length;if(r||s)return r==s;if(n[i++].result!=e[t++].result)return!1}}const zPe={"aria-autocomplete":"list"},XPe={};function FV(n,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(i["aria-activedescendant"]=n+"-"+e),i}const WPe=[];function tQ(n,e){if(n.isUserEvent("input.complete")){let t=n.annotation(eQ);if(t&&e.activateOnCompletion(t))return 12}let i=n.isUserEvent("input.type");return i&&e.activateOnTyping?5:i?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class wo{constructor(e,i,t=-1){this.source=e,this.state=i,this.explicitPos=t}hasResult(){return!1}update(e,i){let t=tQ(e,i),r=this;(t&8||t&16&&this.touches(e))&&(r=new wo(r.source,0)),t&4&&r.state==0&&(r=new wo(this.source,1)),r=r.updateFor(e,t);for(let s of e.effects)if(s.is(zO))r=new wo(r.source,1,s.value?gh(e.state):-1);else if(s.is(Tv))r=new wo(r.source,0);else if(s.is(iQ))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,i){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new wo(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(gh(e.state))}}class ip extends wo{constructor(e,i,t,r,s){super(e,2,i),this.result=t,this.from=r,this.to=s}hasResult(){return!0}updateFor(e,i){var t;if(!(i&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=gh(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||!r||i&2&&gh(e.startState)==this.from)return new wo(this.source,i&4?1:0);let c=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return QPe(r.validFor,e.state,s,o)?new ip(this.source,c,r,s,o):r.update&&(r=r.update(r,s,o,new KW(e.state,l,c>=0)))?new ip(this.source,c,r,r.from,(t=r.to)!==null&&t!==void 0?t:gh(e.state)):new wo(this.source,1,c)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ip(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new wo(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function QPe(n,e,i,t){if(!n)return!1;let r=e.sliceDoc(i,t);return typeof n=="function"?n(r,i,t,e):JW(n,!0).test(r)}const iQ=vi.define({map(n,e){return n.map(i=>i.map(e))}}),nQ=vi.define(),Fs=Xr.define({create(){return XO.start()},update(n,e){return n.update(e)},provide:n=>[E3.from(n,e=>e.tooltip),vt.contentAttributes.from(n,e=>e.attrs)]});function W3(n,e){const i=e.completion.apply||e.completion.label;let t=n.state.field(Fs).active.find(r=>r.source==e.source);return t instanceof ip?(typeof i=="string"?n.dispatch(Object.assign(Object.assign({},APe(n.state,i,t.from,t.to)),{annotations:eQ.of(e.completion)})):i(n,e.completion,t.from,t.to),!0):!1}const HPe=LPe(Fs,W3);function Zb(n,e="option"){return i=>{let t=i.state.field(Fs,!1);if(!t||!t.open||t.open.disabled||Date.now()-t.open.timestamp<i.state.facet($r).interactionDelay)return!1;let r=1,s;e=="page"&&(s=LX(i,t.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=t.open.options,l=t.open.selected>-1?t.open.selected+r*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),i.dispatch({effects:nQ.of(l)}),!0}}const GPe=n=>{let e=n.state.field(Fs,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet($r).interactionDelay?!1:W3(n,e.open.options[e.open.selected])},YPe=n=>n.state.field(Fs,!1)?(n.dispatch({effects:zO.of(!0)}),!0):!1,jPe=n=>{let e=n.state.field(Fs,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(n.dispatch({effects:Tv.of(null)}),!0)};class qPe{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const ZPe=50,KPe=1e3,JPe=ar.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Fs).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Fs),i=n.state.facet($r);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Fs)==e)return;let t=n.transactions.some(s=>{let o=tQ(s,i);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(t||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>ZPe&&Date.now()-o.time>KPe){for(let l of o.context.abortListeners)try{l()}catch(c){js(this.view.state,c)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(zO)))&&(this.pendingStart=!0);let r=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Fs);for(let i of e.active)i.state==1&&!this.running.some(t=>t.active.source==i.source)&&this.startQuery(i)}startQuery(n){let{state:e}=this.view,i=gh(e),t=new KW(e,i,n.explicitPos==i,this.view),r=new qPe(n,t);this.running.push(r),Promise.resolve(n.source(t)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Tv.of(null)}),js(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet($r).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet($r);for(let t=0;t<this.running.length;t++){let r=this.running[t];if(r.done===void 0)continue;if(this.running.splice(t--,1),r.done){let o=new ip(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:gh(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)o=o.update(l,i);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(Fs).active.find(o=>o.source==r.active.source);if(s&&s.state==1)if(r.done==null){let o=new wo(r.active.source,0);for(let l of r.updates)o=o.update(l,i);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:iQ.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Fs,!1);if(e&&e.tooltip&&this.view.state.facet($r).closeOnBlur){let i=e.open&&LX(this.view,e.open.tooltip);(!i||!i.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Tv.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:zO.of(!1)}),20),this.composing=0}}}),e3e=typeof navigator=="object"&&/Win/.test(navigator.platform),t3e=Cd.highest(vt.domEventHandlers({keydown(n,e){let i=e.state.field(Fs,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||n.key.length>1||n.ctrlKey&&!(e3e&&n.altKey)||n.metaKey)return!1;let t=i.open.options[i.open.selected],r=i.active.find(o=>o.source==t.source),s=t.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&W3(e,t),!1}})),i3e=vt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Mv={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Uu=vi.define({map(n,e){let i=e.mapPos(n,-1,ys.TrackAfter);return i??void 0}}),Q3=new class extends hd{};Q3.startSide=1;Q3.endSide=-1;const rQ=Xr.define({create(){return Vi.empty},update(n,e){if(n=n.map(e.changes),e.selection){let i=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:t=>t>=i.from&&t<=i.to})}for(let i of e.effects)i.is(Uu)&&(n=n.update({add:[Q3.range(i.value,i.value+1)]}));return n}});function n3e(){return[s3e,rQ]}const U2="()[]{}<>";function sQ(n){for(let e=0;e<U2.length;e+=2)if(U2.charCodeAt(e)==n)return U2.charAt(e+1);return p3(n<128?n:n+1)}function oQ(n,e){return n.languageDataAt("closeBrackets",e)[0]||Mv}const r3e=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),s3e=vt.inputHandler.of((n,e,i,t)=>{if((r3e?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(t.length>2||t.length==2&&zo(Dr(t,0))==1||e!=r.from||i!=r.to)return!1;let s=l3e(n.state,t);return s?(n.dispatch(s),!0):!1}),o3e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=oQ(n,n.selection.main.head).brackets||Mv.brackets,r=null,s=n.changeByRange(o=>{if(o.empty){let l=c3e(n.doc,o.head);for(let c of t)if(c==l&&g_(n.doc,o.head)==sQ(Dr(c,0)))return{changes:{from:o.head-c.length,to:o.head+c.length},range:Ze.cursor(o.head-c.length)}}return{range:r=o}});return r||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},a3e=[{key:"Backspace",run:o3e}];function l3e(n,e){let i=oQ(n,n.selection.main.head),t=i.brackets||Mv.brackets;for(let r of t){let s=sQ(Dr(r,0));if(e==r)return s==r?d3e(n,r,t.indexOf(r+r+r)>-1,i):h3e(n,r,s,i.before||Mv.before);if(e==s&&aQ(n,n.selection.main.from))return u3e(n,r,s)}return null}function aQ(n,e){let i=!1;return n.field(rQ).between(0,n.doc.length,t=>{t==e&&(i=!0)}),i}function g_(n,e){let i=n.sliceString(e,e+2);return i.slice(0,zo(Dr(i,0)))}function c3e(n,e){let i=n.sliceString(e-2,e);return zo(Dr(i,0))==i.length?i:i.slice(1)}function h3e(n,e,i,t){let r=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:i,from:o.to}],effects:Uu.of(o.to+e.length),range:Ze.range(o.anchor+e.length,o.head+e.length)};let l=g_(n.doc,o.head);return!l||/\s/.test(l)||t.indexOf(l)>-1?{changes:{insert:e+i,from:o.head},effects:Uu.of(o.head+e.length),range:Ze.cursor(o.head+e.length)}:{range:r=o}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function u3e(n,e,i){let t=null,r=n.changeByRange(s=>s.empty&&g_(n.doc,s.head)==i?{changes:{from:s.head,to:s.head+i.length,insert:i},range:Ze.cursor(s.head+i.length)}:t={range:s});return t?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function d3e(n,e,i,t){let r=t.stringPrefixes||Mv.stringPrefixes,s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Uu.of(l.to+e.length),range:Ze.range(l.anchor+e.length,l.head+e.length)};let c=l.head,u=g_(n.doc,c),d;if(u==e){if(zV(n,c))return{changes:{insert:e+e,from:c},effects:Uu.of(c+e.length),range:Ze.cursor(c+e.length)};if(aQ(n,c)){let m=i&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:Ze.cursor(c+m.length)}}}else{if(i&&n.sliceDoc(c-2*e.length,c)==e+e&&(d=XV(n,c-2*e.length,r))>-1&&zV(n,d))return{changes:{insert:e+e+e+e,from:c},effects:Uu.of(c+e.length),range:Ze.cursor(c+e.length)};if(n.charCategorizer(c)(u)!=Tn.Word&&XV(n,c,r)>-1&&!f3e(n,c,e,r))return{changes:{insert:e+e,from:c},effects:Uu.of(c+e.length),range:Ze.cursor(c+e.length)}}return{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function zV(n,e){let i=is(n).resolveInner(e+1);return i.parent&&i.from==e}function f3e(n,e,i,t){let r=is(n).resolveInner(e,-1),s=t.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(r.from,Math.min(r.to,r.from+i.length+s)),c=l.indexOf(i);if(!c||c>-1&&t.indexOf(l.slice(0,c))>-1){let d=r.firstChild;for(;d&&d.from==r.from&&d.to-d.from>i.length+c;){if(n.sliceDoc(d.to-i.length,d.to)==i)return!1;d=d.firstChild}return!0}let u=r.to==e&&r.parent;if(!u)break;r=u}return!1}function XV(n,e,i){let t=n.charCategorizer(e);if(t(n.sliceDoc(e-1,e))!=Tn.Word)return e;for(let r of i){let s=e-r.length;if(n.sliceDoc(s,e)==r&&t(n.sliceDoc(s-1,s))!=Tn.Word)return s}return-1}function p3e(n={}){return[t3e,Fs,$r.of(n),JPe,m3e,i3e]}const lQ=[{key:"Ctrl-Space",run:YPe},{key:"Escape",run:jPe},{key:"ArrowDown",run:Zb(!0)},{key:"ArrowUp",run:Zb(!1)},{key:"PageDown",run:Zb(!0,"page")},{key:"PageUp",run:Zb(!1,"page")},{key:"Enter",run:GPe}],m3e=Cd.highest(T3.computeN([$r],n=>n.facet($r).defaultKeymap?[lQ]:[]));class g3e{constructor(e,i,t){this.from=e,this.to=i,this.diagnostic=t}}class Ru{constructor(e,i,t){this.diagnostics=e,this.panel=i,this.selected=t}static init(e,i,t){let r=e,s=t.facet(Ev).markerFilter;s&&(r=s(r,t));let o=Zt.set(r.map(l=>l.from==l.to||l.from==l.to-1&&t.doc.lineAt(l.from).to==l.from?Zt.widget({widget:new C3e(l),diagnostic:l}).range(l.from):Zt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new Ru(o,i,Ip(o))}}function Ip(n,e=null,i=0){let t=null;return n.between(i,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return t=new g3e(r,s,o.diagnostic),!1}),t}function v3e(n,e){let i=e.pos,t=e.end||i,r=n.state.facet(Ev).hideOn(n,i,t);if(r!=null)return r;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(cQ))||n.changes.touchesRange(s.from,Math.max(s.to,t)))}function y3e(n,e){return n.field(So,!1)?e:e.concat(vi.appendConfig.of(M3e))}const cQ=vi.define(),H3=vi.define(),hQ=vi.define(),So=Xr.define({create(){return new Ru(Zt.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let i=n.diagnostics.map(e.changes),t=null,r=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);t=Ip(i,n.selected.diagnostic,s)||Ip(i,null,s)}!i.size&&r&&e.state.facet(Ev).autoPanel&&(r=null),n=new Ru(i,r,t)}for(let i of e.effects)if(i.is(cQ)){let t=e.state.facet(Ev).autoPanel?i.value.length?Pv.open:null:n.panel;n=Ru.init(i.value,t,e.state)}else i.is(H3)?n=new Ru(n.diagnostics,i.value?Pv.open:null,n.selected):i.is(hQ)&&(n=new Ru(n.diagnostics,n.panel,i.value));return n},provide:n=>[_v.from(n,e=>e.panel),vt.decorations.from(n,e=>e.diagnostics)]}),b3e=Zt.mark({class:"cm-lintRange cm-lintRange-active"});function x3e(n,e,i){let{diagnostics:t}=n.state.field(So),r=[],s=2e8,o=0;t.between(e-(i<0?1:0),e+(i>0?1:0),(c,u,{spec:d})=>{e>=c&&e<=u&&(c==u||(e>c||i>0)&&(e<u||i<0))&&(r.push(d.diagnostic),s=Math.min(c,s),o=Math.max(u,o))});let l=n.state.facet(Ev).tooltipFilter;return l&&(r=l(r,n.state)),r.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:O3e(n,r)}}}:null}function O3e(n,e){return pn("ul",{class:"cm-tooltip-lint"},e.map(i=>dQ(n,i,!1)))}const w3e=n=>{let e=n.state.field(So,!1);(!e||!e.panel)&&n.dispatch({effects:y3e(n.state,[H3.of(!0)])});let i=wv(n,Pv.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},WV=n=>{let e=n.state.field(So,!1);return!e||!e.panel?!1:(n.dispatch({effects:H3.of(!1)}),!0)},_3e=n=>{let e=n.state.field(So,!1);if(!e)return!1;let i=n.state.selection.main,t=e.diagnostics.iter(i.to+1);return!t.value&&(t=e.diagnostics.iter(0),!t.value||t.from==i.from&&t.to==i.to)?!1:(n.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0}),!0)},S3e=[{key:"Mod-Shift-m",run:w3e,preventDefault:!0},{key:"F8",run:_3e}],Ev=wt.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},pl(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,i)=>e?i?t=>e(t)||i(t):e:i}))}});function uQ(n){let e=[];if(n)e:for(let{name:i}of n){for(let t=0;t<i.length;t++){let r=i[t];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function dQ(n,e,i){var t;let r=i?uQ(e.actions):[];return pn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},pn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(t=e.actions)===null||t===void 0?void 0:t.map((s,o)=>{let l=!1,c=m=>{if(m.preventDefault(),l)return;l=!0;let g=Ip(n.state.field(So).diagnostics,e);g&&s.apply(n,g.from,g.to)},{name:u}=s,d=r[o]?u.indexOf(r[o]):-1,f=d<0?u:[u.slice(0,d),pn("u",u.slice(d,d+1)),u.slice(d+1)];return pn("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${u}${d<0?"":` (access key "${r[o]})"`}.`},f)}),e.source&&pn("div",{class:"cm-diagnosticSource"},e.source))}class C3e extends Bh{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return pn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class QV{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=dQ(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Pv{constructor(e){this.view=e,this.items=[];let i=r=>{if(r.keyCode==27)WV(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=uQ(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let c=Ip(this.view.state.field(So).diagnostics,s);c&&s.actions[l].apply(e,c.from,c.to)}}else return;r.preventDefault()},t=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=pn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:t}),this.dom=pn("div",{class:"cm-panel-lint"},this.list,pn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>WV(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(So).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(So),t=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:c})=>{let u=-1,d;for(let f=t;f<this.items.length;f++)if(this.items[f].diagnostic==c.diagnostic){u=f;break}u<0?(d=new QV(this.view,c.diagnostic),this.items.splice(t,0,d),r=!0):(d=this.items[u],u>t&&(this.items.splice(t,u-t),r=!0)),i&&d.diagnostic==i.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),s=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),t++});t<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new QV(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let c=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/c:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function i(){let t=e;e=t.nextSibling,t.remove()}for(let t of this.items)if(t.dom.parentNode==this.list){for(;e!=t.dom;)i();e=t.dom.nextSibling}else this.list.insertBefore(t.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(So),t=Ip(i.diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:hQ.of(t)})}static open(e){return new Pv(e)}}function k3e(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Kb(n){return k3e(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const T3e=vt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Kb("#d11")},".cm-lintRange-warning":{backgroundImage:Kb("orange")},".cm-lintRange-info":{backgroundImage:Kb("#999")},".cm-lintRange-hint":{backgroundImage:Kb("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),M3e=[So,vt.decorations.compute([So],n=>{let{selected:e,panel:i}=n.field(So);return!e||!i||e.from==e.to?Zt.none:Zt.set([b3e.range(e.from,e.to)])}),yTe(x3e,{hideOn:v3e}),T3e],WO=[ETe(),RTe(),jke(),ZMe(),_Me(),Lke(),Xke(),Ui.allowMultipleSelections.of(!0),cMe(),CMe(MMe,{fallback:!0}),NMe(),n3e(),p3e(),aTe(),hTe(),tTe(),oPe(),T3.of([...a3e,...ePe,...CPe,...oEe,...bMe,...lQ,...S3e])];var HV={};class QO{constructor(e,i,t,r,s,o,l,c,u,d=0,f){this.p=e,this.stack=i,this.state=t,this.reducePos=r,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=c,this.curContext=u,this.lookAhead=d,this.parent=f}toString(){return`[${this.stack.filter((e,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,i,t=0){let r=e.parser.context;return new QO(e,[],i,t,t,0,[],0,r?new GV(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,i){this.stack.push(this.state,i,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var i;let t=e>>19,r=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(r);if(l&&(this.score+=l),t==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(t-1)*3-(e&262144?6:0),u=c?this.stack[c-2]:this.p.ranges[0].from,d=this.reducePos-u;d>=2e3&&!(!((i=this.p.parser.nodeSet.types[r])===null||i===void 0)&&i.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=d));let f=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-f;if(r<s.minRepeatTerm||e&131072){let g=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,u,g,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let g=this.stack[c-3];this.state=s.getGoto(g,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,u)}storeNode(e,i,t,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(i==t)return;if(o.buffer[l-2]>=i){o.buffer[l-2]=t;return}}}if(!s||this.pos==t)this.buffer.push(e,i,t,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let c=o;c>0&&this.buffer[c-2]>t;c-=4)if(this.buffer[c-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>t;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=i,this.buffer[o+2]=t,this.buffer[o+3]=r}}shift(e,i,t,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(i,t),i<=this.p.parser.maxNode&&this.buffer.push(i,t,r,4);else{let s=e,{parser:o}=this.p;(r>this.pos||i<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,t),this.shiftContext(i,t),i<=o.maxNode&&this.buffer.push(i,t,r,4)}}apply(e,i,t,r){e&65536?this.reduce(e):this.shift(e,i,t,r)}useNode(e,i){let t=this.p.reused.length-1;(t<0||this.p.reused[t]!=e)&&(this.p.reused.push(e),t++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(i,r),this.buffer.push(t,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,i=e.buffer.length;for(;i>0&&e.buffer[i-2]>e.reducePos;)i-=4;let t=e.buffer.slice(i),r=e.bufferBase+i;for(;e&&r==e.bufferBase;)e=e.parent;return new QO(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,t,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,i){let t=e<=this.p.parser.maxNode;t&&this.storeNode(e,this.pos,i,4),this.storeNode(0,this.pos,i,t?8:4),this.pos=this.reducePos=i,this.score-=190}canShift(e){for(let i=new E3e(this);;){let t=this.p.parser.stateSlot(i.state,4)||this.p.parser.hasAction(i.state,e);if(t==0)return!1;if(!(t&65536))return!0;i.reduce(t)}}recoverByInsert(e){if(this.stack.length>=300)return[];let i=this.p.parser.nextStates(this.state);if(i.length>8||this.stack.length>=120){let r=[];for(let s=0,o;s<i.length;s+=2)(o=i[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(i[s],o);if(this.stack.length<120)for(let s=0;r.length<8&&s<i.length;s+=2){let o=i[s+1];r.some((l,c)=>c&1&&l==o)||r.push(i[s],o)}i=r}let t=[];for(let r=0;r<i.length&&t.length<4;r+=2){let s=i[r+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(i[r],this.pos),o.reducePos=this.pos,o.score-=200,t.push(o)}return t}forceReduce(){let{parser:e}=this.p,i=e.stateSlot(this.state,5);if(!(i&65536))return!1;if(!e.validAction(this.state,i)){let t=i>>19,r=i&65535,s=this.stack.length-t*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;i=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(i),!0}findForcedReduction(){let{parser:e}=this.p,i=[],t=(r,s)=>{if(!i.includes(r))return i.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let c=o&65535,u=this.stack.length-l*3;if(u>=0&&e.getGoto(this.stack[u],c,!1)>=0)return l<<19|65536|c}}else{let l=t(o,s+1);if(l!=null)return l}})};return t(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=e.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,i){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(i)))}reduceContext(e,i){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(i)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let i=new GV(this.curContext.tracker,e);i.hash!=this.curContext.hash&&this.emitContext(),this.curContext=i}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class GV{constructor(e,i){this.tracker=e,this.context=i,this.hash=e.strict?e.hash(i):0}}class E3e{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let i=e&65535,t=e>>19;t==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(t-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],i,!0);this.state=r}}class HO{constructor(e,i,t){this.stack=e,this.pos=i,this.index=t,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,i=e.bufferBase+e.buffer.length){return new HO(e,i,i-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new HO(this.stack,this.pos,this.index)}}function Jb(n,e=Uint16Array){if(typeof n!="string")return n;let i=null;for(let t=0,r=0;t<n.length;){let s=0;for(;;){let o=n.charCodeAt(t++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let c=o-32;if(c>=46&&(c-=46,l=!0),s+=c,l)break;s*=46}i?i[r++]=s:i=new e(s)}return i}class Ux{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const YV=new Ux;class P3e{constructor(e,i){this.input=e,this.ranges=i,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=YV,this.rangeIndex=0,this.pos=this.chunkPos=i[0].from,this.range=i[0],this.end=i[i.length-1].to,this.readNext()}resolveOffset(e,i){let t=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<t.from;){if(!r)return null;let o=this.ranges[--r];s-=t.from-o.to,t=o}for(;i<0?s>t.to:s>=t.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];s+=o.from-t.to,t=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let i of this.ranges)if(i.to>e)return Math.max(e,i.from);return this.end}peek(e){let i=this.chunkOff+e,t,r;if(i>=0&&i<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(i);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(t=s,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=t;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,i=0){let t=i?this.resolveOffset(i,-1):this.pos;if(t==null||t<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=t}acceptTokenTo(e,i){this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:i}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=i,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),i=this.pos+e.length;this.chunk=i>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,i){if(i?(this.token=i,i.start=e,i.lookAhead=e+1,i.value=i.extended=-1):this.token=YV,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,i){if(e>=this.chunkPos&&i<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,i-this.chunkPos);if(e>=this.chunk2Pos&&i<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,i-this.chunk2Pos);if(e>=this.range.from&&i<=this.range.to)return this.input.read(e,i);let t="";for(let r of this.ranges){if(r.from>=i)break;r.to>e&&(t+=this.input.read(Math.max(r.from,e),Math.min(r.to,i)))}return t}}class np{constructor(e,i){this.data=e,this.id=i}token(e,i){let{parser:t}=i.p;A3e(this.data,e,i,this.id,t.data,t.tokenPrecTable)}}np.prototype.contextual=np.prototype.fallback=np.prototype.extend=!1;np.prototype.fallback=np.prototype.extend=!1;class fQ{constructor(e,i={}){this.token=e,this.contextual=!!i.contextual,this.fallback=!!i.fallback,this.extend=!!i.extend}}function A3e(n,e,i,t,r,s){let o=0,l=1<<t,{dialect:c}=i.p.parser;e:for(;l&n[o];){let u=n[o+1];for(let g=o+3;g<u;g+=2)if((n[g+1]&l)>0){let y=n[g];if(c.allows(y)&&(e.token.value==-1||e.token.value==y||R3e(y,e.token.value,r,s))){e.acceptToken(y);break}}let d=e.next,f=0,m=n[o+2];if(e.next<0&&m>f&&n[u+m*3-3]==65535){o=n[u+m*3-1];continue e}for(;f<m;){let g=f+m>>1,y=u+g+(g<<1),x=n[y],b=n[y+1]||65536;if(d<x)m=g;else if(d>=b)f=g+1;else{o=n[y+2],e.advance();continue e}}break}}function jV(n,e,i){for(let t=e,r;(r=n[t])!=65535;t++)if(r==i)return t-e;return-1}function R3e(n,e,i,t){let r=jV(i,t,e);return r<0||jV(i,t,n)<r}const fo=typeof process<"u"&&HV&&/\bparse\b/.test(HV.LOG);let F2=null;function qV(n,e,i){let t=n.cursor(Mr.IncludeAnonymous);for(t.moveTo(e);;)if(!(i<0?t.childBefore(e):t.childAfter(e)))for(;;){if((i<0?t.to<e:t.from>e)&&!t.type.isError)return i<0?Math.max(0,Math.min(t.to-1,e-25)):Math.min(n.length,Math.max(t.from+1,e+25));if(i<0?t.prevSibling():t.nextSibling())break;if(!t.parent())return i<0?0:n.length}}class I3e{constructor(e,i){this.fragments=e,this.nodeSet=i,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?qV(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?qV(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let i=this.trees.length-1;if(i<0)return this.nextFragment(),null;let t=this.trees[i],r=this.index[i];if(r==t.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=t.children[r],o=this.start[i]+t.positions[r];if(o>e)return this.nextStart=o,null;if(s instanceof nr){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let c=s.prop(xi.lookAhead);if(!c||l+c<this.fragment.to)return s}}this.index[i]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[i]++,this.nextStart=o+s.length}}}class D3e{constructor(e,i){this.stream=i,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(t=>new Ux)}getActions(e){let i=0,t=null,{parser:r}=e.p,{tokenizers:s}=r,o=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,c=0;for(let u=0;u<s.length;u++){if(!(1<<u&o))continue;let d=s[u],f=this.tokens[u];if(!(t&&!d.fallback)&&((d.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,d,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(c=Math.max(f.lookAhead,c)),f.value!=0)){let m=i;if(f.extended>-1&&(i=this.addActions(e,f.extended,f.end,i)),i=this.addActions(e,f.value,f.end,i),!d.extend&&(t=f,i>m))break}}for(;this.actions.length>i;)this.actions.pop();return c&&e.setLookAhead(c),!t&&e.pos==this.stream.end&&(t=new Ux,t.value=e.p.parser.eofTerm,t.start=t.end=e.pos,i=this.addActions(e,t.value,t.end,i)),this.mainToken=t,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let i=new Ux,{pos:t,p:r}=e;return i.start=t,i.end=Math.min(t+1,r.stream.end),i.value=t==r.stream.end?r.parser.eofTerm:0,i}updateCachedToken(e,i,t){let r=this.stream.clipPos(t.pos);if(i.token(this.stream.reset(r,e),t),e.value>-1){let{parser:s}=t.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),t);if(l>=0&&t.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,i,t,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=i,this.actions[r++]=t,r}addActions(e,i,t,r){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let c=0;c<2;c++)for(let u=o.stateSlot(s,c?2:1);;u+=3){if(l[u]==65535)if(l[u+1]==1)u=Ll(l,u+2);else{r==0&&l[u+1]==2&&(r=this.putAction(Ll(l,u+2),i,t,r));break}l[u]==i&&(r=this.putAction(Ll(l,u+1),i,t,r))}return r}}class N3e{constructor(e,i,t,r){this.parser=e,this.input=i,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new P3e(i,r),this.tokens=new D3e(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[QO.start(this,e.top[0],s)],this.fragments=t.length&&this.stream.end-s>e.bufferLength*4?new I3e(t,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,i=this.minStackPos,t=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>i)t.push(l);else{if(this.advanceStack(l,t,e))continue;{r||(r=[],s=[]),r.push(l);let c=this.tokens.getMainToken(l);s.push(c.value,c.end)}}break}}if(!t.length){let o=r&&V3e(r);if(o)return fo&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw fo&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,t);if(o)return fo&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(t.length>o)for(t.sort((l,c)=>c.score-l.score);t.length>o;)t.pop();t.some(l=>l.reducePos>i)&&this.recovering--}else if(t.length>1){e:for(let o=0;o<t.length-1;o++){let l=t[o];for(let c=o+1;c<t.length;c++){let u=t[c];if(l.sameState(u)||l.buffer.length>500&&u.buffer.length>500)if((l.score-u.score||l.buffer.length-u.buffer.length)>0)t.splice(c--,1);else{t.splice(o--,1);continue e}}}t.length>12&&t.splice(12,t.length-12)}this.minStackPos=t[0].pos;for(let o=1;o<t.length;o++)t[o].pos<this.minStackPos&&(this.minStackPos=t[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,i,t){let r=e.pos,{parser:s}=this,o=fo?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,d=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(r);f;){let m=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(m>-1&&f.length&&(!u||(f.prop(xi.contextHash)||0)==d))return e.useNode(f,m),fo&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof nr)||f.children.length==0||f.positions[0]>0)break;let g=f.children[0];if(g instanceof nr&&f.positions[0]==0)f=g;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),fo&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let u=0;u<c.length;){let d=c[u++],f=c[u++],m=c[u++],g=u==c.length||!t,y=g?e:e.split(),x=this.tokens.mainToken;if(y.apply(d,f,x?x.start:y.pos,m),fo&&console.log(o+this.stackID(y)+` (via ${d&65536?`reduce of ${s.getName(d&65535)}`:"shift"} for ${s.getName(f)} @ ${r}${y==e?"":", split"})`),g)return!0;y.pos>r?i.push(y):t.push(y)}return!1}advanceFully(e,i){let t=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>t)return ZV(e,i),!0}}runRecovery(e,i,t){let r=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],c=i[o<<1],u=i[(o<<1)+1],d=fo?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),fo&&console.log(d+this.stackID(l)+" (restarted)"),this.advanceFully(l,t))))continue;let f=l.split(),m=d;for(let g=0;f.forceReduce()&&g<10&&(fo&&console.log(m+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,t));g++)fo&&(m=this.stackID(f)+" -> ");for(let g of l.recoverByInsert(c))fo&&console.log(d+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,t);this.stream.end>l.pos?(u==l.pos&&(u++,c=0),l.recoverByDelete(c,u),fo&&console.log(d+this.stackID(l)+` (via recover-delete ${this.parser.getName(c)})`),ZV(l,t)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),nr.build({buffer:HO.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let i=(F2||(F2=new WeakMap)).get(e);return i||F2.set(e,i=String.fromCodePoint(this.nextStackID++)),i+e}}function ZV(n,e){for(let i=0;i<e.length;i++){let t=e[i];if(t.pos==n.pos&&t.sameState(n)){e[i].score<n.score&&(e[i]=n);return}}e.push(n)}class $3e{constructor(e,i,t){this.source=e,this.flags=i,this.disabled=t}allows(e){return!this.disabled||this.disabled[e]==0}}class GO extends HX{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let i=e.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let l=0;l<e.repeatNodeCount;l++)i.push("");let t=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<i.length;l++)r.push([]);function s(l,c,u){r[l].push([c,c.deserialize(String(u))])}if(e.nodeProps)for(let l of e.nodeProps){let c=l[0];typeof c=="string"&&(c=xi[c]);for(let u=1;u<l.length;){let d=l[u++];if(d>=0)s(d,c,l[u++]);else{let f=l[u+-d];for(let m=-d;m>0;m--)s(l[u++],c,f);u++}}}this.nodeSet=new P3(i.map((l,c)=>Js.define({name:c>=this.minRepeatTerm?void 0:l,id:c,props:r[c],top:t.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=zX;let o=Jb(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(KV),this.states=Jb(e.states,Uint32Array),this.data=Jb(e.stateData),this.goto=Jb(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new np(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,i,t){let r=new N3e(this,e,i,t);for(let s of this.wrappers)r=s(r,e,i,t);return r}getGoto(e,i,t=!1){let r=this.goto;if(i>=r[0])return-1;for(let s=r[i+1];;){let o=r[s++],l=o&1,c=r[s++];if(l&&t)return c;for(let u=s+(o>>1);s<u;s++)if(r[s]==e)return c;if(l)return-1}}hasAction(e,i){let t=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),o;;s+=3){if((o=t[s])==65535)if(t[s+1]==1)o=t[s=Ll(t,s+2)];else{if(t[s+1]==2)return Ll(t,s+2);break}if(o==i||o==0)return Ll(t,s+1)}return 0}stateSlot(e,i){return this.states[e*6+i]}stateFlag(e,i){return(this.stateSlot(e,0)&i)>0}validAction(e,i){return!!this.allActions(e,t=>t==i?!0:null)}allActions(e,i){let t=this.stateSlot(e,4),r=t?i(t):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Ll(this.data,s+2);else break;r=i(Ll(this.data,s+1))}return r}nextStates(e){let i=[];for(let t=this.stateSlot(e,1);;t+=3){if(this.data[t]==65535)if(this.data[t+1]==1)t=Ll(this.data,t+2);else break;if(!(this.data[t+2]&1)){let r=this.data[t+1];i.some((s,o)=>o&1&&s==r)||i.push(this.data[t],r)}}return i}configure(e){let i=Object.assign(Object.create(GO.prototype),this);if(e.props&&(i.nodeSet=this.nodeSet.extend(...e.props)),e.top){let t=this.topRules[e.top];if(!t)throw new RangeError(`Invalid top rule name ${e.top}`);i.top=t}return e.tokenizers&&(i.tokenizers=this.tokenizers.map(t=>{let r=e.tokenizers.find(s=>s.from==t);return r?r.to:t})),e.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((t,r)=>{let s=e.specializers.find(l=>l.from==t.external);if(!s)return t;let o=Object.assign(Object.assign({},t),{external:s.to});return i.specializers[r]=KV(o),o})),e.contextTracker&&(i.context=e.contextTracker),e.dialect&&(i.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(i.strict=e.strict),e.wrap&&(i.wrappers=i.wrappers.concat(e.wrap)),e.bufferLength!=null&&(i.bufferLength=e.bufferLength),i}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let i=this.dynamicPrecedences;return i==null?0:i[e]||0}parseDialect(e){let i=Object.keys(this.dialects),t=i.map(()=>!1);if(e)for(let s of e.split(" ")){let o=i.indexOf(s);o>=0&&(t[o]=!0)}let r=null;for(let s=0;s<i.length;s++)if(!t[s])for(let o=this.dialects[i[s]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new $3e(e,t,r)}static deserialize(e){return new GO(e)}}function Ll(n,e){return n[e]|n[e+1]<<16}function V3e(n){let e=null;for(let i of n){let t=i.p.stoppedAt;(i.pos==i.p.stream.end||t!=null&&i.pos>t)&&i.p.parser.stateFlag(i.state,2)&&(!e||e.score<i.score)&&(e=i)}return e}function KV(n){if(n.external){let e=n.extend?1:0;return(i,t)=>n.external(i,t)<<1|e}return n.get}const JV=1,L3e=2,B3e=3,U3e=82,F3e=76,z3e=117,X3e=85,W3e=97,Q3e=122,H3e=65,G3e=90,Y3e=95,RM=48,eL=34,j3e=40,tL=41,q3e=32,iL=62,Z3e=new fQ(n=>{if(n.next==F3e||n.next==X3e?n.advance():n.next==z3e&&(n.advance(),n.next==RM+8&&n.advance()),n.next!=U3e||(n.advance(),n.next!=eL))return;n.advance();let e="";for(;n.next!=j3e;){if(n.next==q3e||n.next<=13||n.next==tL)return;e+=String.fromCharCode(n.next),n.advance()}for(n.advance();;){if(n.next<0)return n.acceptToken(JV);if(n.next==tL){let i=!0;for(let t=0;i&&t<e.length;t++)n.peek(t+1)!=e.charCodeAt(t)&&(i=!1);if(i&&n.peek(e.length+1)==eL)return n.acceptToken(JV,2+e.length)}n.advance()}}),K3e=new fQ(n=>{if(n.next==iL)n.peek(1)==iL&&n.acceptToken(L3e,1);else{let e=!1,i=0;for(;;i++){if(n.next>=H3e&&n.next<=G3e)e=!0;else{if(n.next>=W3e&&n.next<=Q3e)return;if(n.next!=Y3e&&!(n.next>=RM&&n.next<=RM+9))break}n.advance()}e&&i>1&&n.acceptToken(B3e)}},{extend:!0}),J3e=GX({"typedef struct union enum class typename decltype auto template operator friend noexcept namespace using requires concept import export module __attribute__ __declspec __based":Qe.definitionKeyword,"extern MsCallModifier MsPointerModifier extern static register thread_local inline const volatile restrict _Atomic mutable constexpr constinit consteval virtual explicit VirtualSpecifier Access":Qe.modifier,"if else switch for while do case default return break continue goto throw try catch":Qe.controlKeyword,"co_return co_yield co_await":Qe.controlKeyword,"new sizeof delete static_assert":Qe.operatorKeyword,"NULL nullptr":Qe.null,this:Qe.self,"True False":Qe.bool,"TypeSize PrimitiveType":Qe.standard(Qe.typeName),TypeIdentifier:Qe.typeName,FieldIdentifier:Qe.propertyName,"CallExpression/FieldExpression/FieldIdentifier":Qe.function(Qe.propertyName),"ModuleName/Identifier":Qe.namespace,PartitionName:Qe.labelName,StatementIdentifier:Qe.labelName,"Identifier DestructorName":Qe.variableName,"CallExpression/Identifier":Qe.function(Qe.variableName),"CallExpression/ScopedIdentifier/Identifier":Qe.function(Qe.variableName),"FunctionDeclarator/Identifier FunctionDeclarator/DestructorName":Qe.function(Qe.definition(Qe.variableName)),NamespaceIdentifier:Qe.namespace,OperatorName:Qe.operator,ArithOp:Qe.arithmeticOperator,LogicOp:Qe.logicOperator,BitOp:Qe.bitwiseOperator,CompareOp:Qe.compareOperator,AssignOp:Qe.definitionOperator,UpdateOp:Qe.updateOperator,LineComment:Qe.lineComment,BlockComment:Qe.blockComment,Number:Qe.number,String:Qe.string,"RawString SystemLibString":Qe.special(Qe.string),CharLiteral:Qe.character,EscapeSequence:Qe.escape,"UserDefinedLiteral/Identifier":Qe.literal,PreProcArg:Qe.meta,"PreprocDirectiveName #include #ifdef #ifndef #if #define #else #endif #elif":Qe.processingInstruction,MacroName:Qe.special(Qe.name),"( )":Qe.paren,"[ ]":Qe.squareBracket,"{ }":Qe.brace,"< >":Qe.angleBracket,". ->":Qe.derefOperator,", ;":Qe.separator}),eAe={__proto__:null,bool:34,char:34,int:34,float:34,double:34,void:34,size_t:34,ssize_t:34,intptr_t:34,uintptr_t:34,charptr_t:34,int8_t:34,int16_t:34,int32_t:34,int64_t:34,uint8_t:34,uint16_t:34,uint32_t:34,uint64_t:34,char8_t:34,char16_t:34,char32_t:34,char64_t:34,const:68,volatile:70,restrict:72,_Atomic:74,mutable:76,constexpr:78,constinit:80,consteval:82,struct:86,__declspec:90,final:148,override:148,public:152,private:152,protected:152,virtual:154,extern:160,static:162,register:164,inline:166,thread_local:168,__attribute__:172,__based:178,__restrict:180,__uptr:180,__sptr:180,_unaligned:180,__unaligned:180,noexcept:194,requires:198,TRUE:784,true:784,FALSE:786,false:786,typename:218,class:220,template:234,throw:248,__cdecl:256,__clrcall:256,__stdcall:256,__fastcall:256,__thiscall:256,__vectorcall:256,try:260,catch:264,export:282,import:286,case:296,default:298,if:308,else:314,switch:318,do:322,while:324,for:330,return:334,break:338,continue:342,goto:346,co_return:350,co_yield:354,using:362,typedef:366,namespace:380,new:398,delete:400,co_await:402,concept:406,enum:410,static_assert:414,friend:422,union:424,explicit:430,operator:444,module:456,signed:518,unsigned:518,long:518,short:518,decltype:528,auto:530,sizeof:566,NULL:572,nullptr:586,this:588},tAe={__proto__:null,"<":131},iAe={__proto__:null,">":135},nAe={__proto__:null,operator:388,new:576,delete:582},rAe=GO.deserialize({version:14,states:"$:|Q!QQVOOP'gOUOOO(XOWO'#CdO,RQUO'#CgO,]QUO'#FjO-sQbO'#CwO.UQUO'#CwO0TQUO'#KZO0[QUO'#CvO0gOpO'#DvO0oQ!dO'#D]OOQR'#JO'#JOO5XQVO'#GUO5fQUO'#JVOOQQ'#JV'#JVO8zQUO'#KmO<eQUO'#KmO>{QVO'#E^O?]QUO'#E^OOQQ'#Ed'#EdOOQQ'#Ee'#EeO?bQVO'#EfO@XQVO'#EiOBUQUO'#FPOBvQUO'#FhOOQR'#Fj'#FjOB{QUO'#FjOOQR'#LQ'#LQOOQR'#LP'#LPOETQVO'#KQOFxQUO'#LVOGVQUO'#KqOGkQUO'#LVOH]QUO'#LXOOQR'#HU'#HUOOQR'#HV'#HVOOQR'#HW'#HWOOQR'#K|'#K|OOQR'#J_'#J_Q!QQVOOOHkQVO'#FOOIWQUO'#EhOI_QUOOOKZQVO'#HgOKkQUO'#HgONVQUO'#KqONaQUO'#KqOOQQ'#Kq'#KqO!!_QUO'#KqOOQQ'#Jq'#JqO!!lQUO'#HxOOQQ'#KZ'#KZO!&^QUO'#KZO!&zQUO'#KQO!(zQVO'#I]O!(zQVO'#I`OCQQUO'#KQOOQQ'#Ip'#IpOOQQ'#KQ'#KQO!,}QUO'#KZOOQR'#KY'#KYO!-UQUO'#DYO!/mQUO'#KnOOQQ'#Kn'#KnO!/tQUO'#KnO!/{QUO'#ETO!0QQUO'#EWO!0VQUO'#FRO8zQUO'#FPO!QQVO'#F^O!0[Q#vO'#F`O!0gQUO'#FkO!0oQUO'#FpO!0tQVO'#FrO!0oQUO'#FuO!3sQUO'#FvO!3xQVO'#FxO!4SQUO'#FzO!4XQUO'#F|O!4^QUO'#GOO!4cQVO'#GQO!(zQVO'#GSO!4jQUO'#GpO!4xQUO'#GYO!(zQVO'#FeO!6VQUO'#FeO!6[QVO'#G`O!6cQUO'#GaO!6nQUO'#GnO!6sQUO'#GrO!6xQUO'#GzO!7jQ&lO'#HiO!:mQUO'#GuO!:}QUO'#HXO!;YQUO'#HZO!;bQUO'#DWO!;bQUO'#HuO!;bQUO'#HvO!;yQUO'#HwO!<[QUO'#H|O!=PQUO'#H}O!>uQVO'#IbO!(zQVO'#IdO!?PQUO'#IgO!?WQVO'#IjP!@}{,UO'#CbP!6n{,UO'#CbP!AY{7[O'#CbP!6n{,UO'#CbP!A_{,UO'#CbP!AjOSO'#IzPOOO)CEn)CEnOOOO'#I|'#I|O!AtOWO,59OOOQR,59O,59OO!(zQVO,59UOOQQ,59W,59WO!(zQVO,5;ROOQR,5<U,5<UO!BPQUO,59YO!(zQVO,5>qOOQR'#IX'#IXOOQR'#IY'#IYOOQR'#IZ'#IZOOQR'#I['#I[O!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!DOQVO,5>zOOQQ,5?W,5?WO!EqQVO'#ChO!IjQUO'#CyOOQQ,59c,59cOOQQ,59b,59bOOQQ,5<},5<}O!IwQ&lO,5=mO!?PQUO,5?RO!LkQVO,5?UO!LrQbO,59cO!L}QVO'#FYOOQQ,5?P,5?PO!M_QVO,59VO!MfO`O,5:bO!MkQbO'#D^O!M|QbO'#K^O!N[QbO,59wO!NdQbO'#CwO!NuQUO'#CwO!NzQUO'#KZO# UQUO'#CvOOQR-E<|-E<|O# aQUO,5AoO# hQVO'#EfO@XQVO'#EiOBUQUO,5;kOOQR,5<p,5<pO#$aQUO'#KQO#$hQUO'#KQO!(zQVO'#IUO8zQUO,5;kO#${Q&lO'#HiO#(SQUO'#CsO#*wQbO'#CwO#*|QUO'#CvO#.jQUO'#KZOOQQ-E=T-E=TO#0}QUO,5AXO#1XQUO'#KZO#1cQUO,5AXOOQR,5Ao,5AoOOQQ,5>l,5>lO#3gQUO'#CgO#4]QUO,5>pO#6OQUO'#IeOOQR'#I}'#I}O#6WQUO,5:xO#6tQUO,5:xO#7eQUO,5:xO#8YQUO'#CtO!0QQUO'#ClOOQQ'#JW'#JWO#6tQUO,5:xO#8bQUO,5;QO!4xQUO'#C}O#9kQUO,5;QO#9pQUO,5>QO#:|QUO'#C}O#;dQUO,5>{O#;iQUO'#KwO#<rQUO,5;TO#<zQVO,5;TO#=UQUO,5;TOOQQ,5;T,5;TO#>}QUO'#L[O#?UQUO,5>UO#?ZQbO'#CwO#?fQUO'#GcO#?kQUO'#E^O#@[QUO,5;kO#@sQUO'#K}O#@{QUO,5;rOKkQUO'#HfOBUQUO'#HgO#AQQUO'#KqO!6nQUO'#HjO#AxQUO'#CtO!0tQVO,5<SOOQQ'#Cg'#CgOOQR'#Jh'#JhO#A}QVO,5=`OOQQ,5?Z,5?ZO#DWQbO'#CwO#DcQUO'#GcOOQQ'#Ji'#JiOOQQ-E=g-E=gOGVQUO,5AqOGkQUO,5AqO#DhQUO,5AsO#DsQUO'#G|OOQR,5Aq,5AqO#DhQUO,5AqO#EOQUO'#HOO#EWQUO,5AsOOQR,5As,5AsOOQR,5At,5AtO#EfQVO,5AtOOQR-E=]-E=]O#G`QVO,5;jOOQR,5;j,5;jO#IaQUO'#EjO#JfQUO'#EwO#K]QVO'#ExO#MoQUO'#EvO#MwQUO'#EyO#NvQUO'#EzOOQQ'#Kz'#KzO$ mQUO,5;SO$!sQUO'#EvOOQQ,5;S,5;SO$#pQUO,5;SO$%cQUO,5:yO$'|QVO,5>PO$(WQUO'#E[O$(eQUO,5>ROOQQ,5>S,5>SO$,RQVO'#C{OOQQ-E=o-E=oOOQQ,5>d,5>dOOQQ,59`,59`O$,]QUO,5>wO$.]QUO,5>zO!6nQUO,59tO$.pQUO,5;qO$.}QUO,5<{O!0QQUO,5:oOOQQ,5:r,5:rO$/YQUO,5;mO$/_QUO'#KmOBUQUO,5;kOOQR,5;x,5;xO$0OQUO'#FbO$0^QUO'#FbO$0cQUO,5;zO$3|QVO'#FmO!0tQVO,5<VO!0oQUO,5<VO!0VQUO,5<[O$4TQVO'#GUO$7PQUO,5<^O!0tQVO,5<aO$:gQVO,5<bO$:tQUO,5<dOOQR,5<d,5<dO$;}QUO,5<dOOQR,5<f,5<fOOQR,5<h,5<hOOQQ'#Fi'#FiO$<SQUO,5<jO$<XQUO,5<lOOQR,5<l,5<lO$=_QUO,5<nO$>eQUO,5<rO$>pQUO,5=[O$>uQUO,5=[O!4xQUO,5<tO$>}QUO,5<tO$?cQUO,5<PO$@iQVO,5<PO$BzQUO,5<zOOQR,5<z,5<zOOQR,5<{,5<{O$>uQUO,5<{O$DQQUO,5<{O$D]QUO,5=YO!(zQVO,5=^O!(zQVO,5=fO#NeQUO,5=mOOQQ,5>T,5>TO$FbQUO,5>TO$FlQUO,5>TO$FqQUO,5>TO$FvQUO,5>TO!6nQUO,5>TO$HtQUO'#KZO$H{QUO,5=oO$IWQUO,5=aOKkQUO,5=oO$JQQUO,5=sOOQR,5=s,5=sO$JYQUO,5=sO$LeQVO'#H[OOQQ,5=u,5=uO!;]QUO,5=uO%#`QUO'#KjO%#gQUO'#K[O%#{QUO'#KjO%$VQUO'#DyO%$hQUO'#D|O%'eQUO'#K[OOQQ'#K['#K[O%)WQUO'#K[O%#gQUO'#K[O%)]QUO'#K[OOQQ,59r,59rOOQQ,5>a,5>aOOQQ,5>b,5>bO%)eQUO'#HzO%)mQUO,5>cOOQQ,5>c,5>cO%-XQUO,5>cO%-dQUO,5>hO%1OQVO,5>iO%1VQUO,5>|O# hQVO'#EfO%4]QUO,5>|OOQQ,5>|,5>|O%4|QUO,5?OO%7QQUO,5?RO!<[QUO,5?RO%8|QUO,5?UO%<iQVO,5?UP!A_{,UO,58|P%<p{,UO,58|P%=O{7[O,58|P%=U{,UO,58|PO{O'#Ju'#JuP%=Z{,UO'#LcPOOO'#Lc'#LcP%=a{,UO'#LcPOOO,58|,58|POOO,5?f,5?fP%=fOSO,5?fOOOO-E<z-E<zOOQR1G.j1G.jO%=mQUO1G.pO%>sQUO1G0mOOQQ1G0m1G0mO%@PQUO'#CoO%B`QbO'#CwO%BkQUO'#CrO%BpQUO'#CrO%BuQUO1G.tO#AxQUO'#CqOOQQ1G.t1G.tO%DxQUO1G4]O%FOQUO1G4^O%GqQUO1G4^O%IdQUO1G4^O%KVQUO1G4^O%LxQUO1G4^O%NkQUO1G4^O&!^QUO1G4^O&$PQUO1G4^O&%rQUO1G4^O&'eQUO1G4^O&)WQUO1G4^O&*yQUO'#KPO&,SQUO'#KPO&,[QUO,59SOOQQ,5=P,5=PO&.dQUO,5=PO&.nQUO,5=PO&.sQUO,5=PO&.xQUO,5=PO!6nQUO,5=PO#NeQUO1G3XO&/SQUO1G4mO!<[QUO1G4mO&1OQUO1G4pO&2qQVO1G4pOOQQ1G.}1G.}OOQQ1G.|1G.|OOQQ1G2i1G2iO!IwQ&lO1G3XO&2xQUO'#LOO@XQVO'#EiO&4RQUO'#F]OOQQ'#Ja'#JaO&4WQUO'#FZO&4cQUO'#LOO&4kQUO,5;tO&4pQUO1G.qOOQQ1G.q1G.qOOQR1G/|1G/|O&6cQ!dO'#JPO&6hQbO,59xO&8yQ!eO'#D`O&9QQ!dO'#JRO&9VQbO,5@xO&9VQbO,5@xOOQR1G/c1G/cO&9bQbO1G/cO&9gQ&lO'#GeO&:eQbO,59cOOQR1G7Z1G7ZO#@[QUO1G1VO&:pQUO1G1^OBUQUO1G1VO&=RQUO'#CyO#*wQbO,59cO&@tQUO1G6sOOQR-E<{-E<{O&BWQUO1G0dO#6WQUO1G0dOOQQ-E=U-E=UO#6tQUO1G0dOOQQ1G0l1G0lO&B{QUO,59iOOQQ1G3l1G3lO&CcQUO,59iO&CyQUO,59iO!M_QVO1G4gO!(zQVO'#JYO&DeQUO,5AcOOQQ1G0o1G0oO!(zQVO1G0oO!6nQUO'#JnO&DmQUO,5AvOOQQ1G3p1G3pOOQR1G1V1G1VO&HjQVO'#FOO!M_QVO,5;sOOQQ,5;s,5;sOBUQUO'#JcO&JfQUO,5AiO&JnQVO'#E[OOQR1G1^1G1^O&M]QUO'#L[OOQR1G1n1G1nOOQR-E=f-E=fOOQR1G7]1G7]O#DhQUO1G7]OGVQUO1G7]O#DhQUO1G7_OOQR1G7_1G7_O&MeQUO'#G}O&MmQUO'#LWOOQQ,5=h,5=hO&M{QUO,5=jO&NQQUO,5=kOOQR1G7`1G7`O#EfQVO1G7`O&NVQUO1G7`O' ]QVO,5=kOOQR1G1U1G1UO$.vQUO'#E]O'!RQUO'#E]OOQQ'#Ky'#KyO'!lQUO'#KxO'!wQUO,5;UO'#PQUO'#ElO'#dQUO'#ElO'#wQUO'#EtOOQQ'#J['#J[O'#|QUO,5;cO'$sQUO,5;cO'%nQUO,5;dO'&tQVO,5;dOOQQ,5;d,5;dO''OQVO,5;dO'&tQVO,5;dO''VQUO,5;bO'(SQUO,5;eO'(_QUO'#KpO'(gQUO,5:vO'(lQUO,5;fOOQQ1G0n1G0nOOQQ'#J]'#J]O''VQUO,5;bO!4xQUO'#E}OOQQ,5;b,5;bO')gQUO'#E`O'+aQUO'#E{OHrQUO1G0nO'+fQUO'#EbOOQQ'#JX'#JXO'-OQUO'#KrOOQQ'#Kr'#KrO'-xQUO1G0eO'.pQUO1G3kO'/vQVO1G3kOOQQ1G3k1G3kO'0QQVO1G3kO'0XQUO'#L_O'1eQUO'#KXO'1sQUO'#KWO'2OQUO,59gO'2WQUO1G/`O'2]QUO'#FPOOQR1G1]1G1]OOQR1G2g1G2gO$>uQUO1G2gO'2gQUO1G2gO'2rQUO1G0ZOOQR'#J`'#J`O'2wQVO1G1XO'8pQUO'#FTO'8uQUO1G1VO!6nQUO'#JdO'9TQUO,5;|O$0^QUO,5;|OOQQ'#Fc'#FcOOQQ,5;|,5;|O'9cQUO1G1fOOQR1G1f1G1fO'9kQUO,5<XO$.vQUO'#FWOBUQUO'#FWO'9rQUO,5<XO!(zQVO,5<XO'9zQUO,5<XO':PQVO1G1qO!0tQVO1G1qOOQR1G1v1G1vO'?oQUO1G1xOOQR1G1{1G1{O'?tQUO1G1|OBUQUO1G2]O'@}QVO1G1|O'CcQUO1G1|O'ChQUO'#GWO8zQUO1G2]OOQR1G2O1G2OOOQR1G2U1G2UOOQR1G2W1G2WOOQR1G2Y1G2YO'CmQUO1G2^O!4xQUO1G2^OOQR1G2v1G2vO'CuQUO1G2vO$>}QUO1G2`OOQQ'#Cu'#CuO'CzQUO'#G[O'DuQUO'#G[O'DzQUO'#LRO'EYQUO'#G_OOQQ'#LS'#LSO'EhQUO1G2`O'EmQVO1G1kO'HOQVO'#GUOBUQUO'#FWOOQR'#Je'#JeO'EmQVO1G1kO'HYQUO'#FvOOQR1G2f1G2fO'H_QUO1G2gO'HdQUO'#JgO'2gQUO1G2gO!(zQVO1G2tO'HlQUO1G2xO'IuQUO1G3QO'J{QUO1G3XOOQQ1G3o1G3oO'KaQUO1G3oOOQR1G3Z1G3ZO'KfQUO'#KZO'2]QUO'#LTOGkQUO'#LVOOQR'#Gy'#GyO#DhQUO'#LXOOQR'#HQ'#HQO'KpQUO'#GvO'#wQUO'#GuOOQR1G2{1G2{O'LmQUO1G2{O'MdQUO1G3ZO'MoQUO1G3_O'MtQUO1G3_OOQR1G3_1G3_O'M|QUO'#H]OOQR'#H]'#H]O( VQUO'#H]O!(zQVO'#H`O!(zQVO'#H_OOQR'#LZ'#LZO( [QUO'#LZOOQR'#Jk'#JkO( aQVO,5=vOOQQ,5=v,5=vO( hQUO'#H^O( pQUO'#HZOOQQ1G3a1G3aO( zQUO,5@vOOQQ,5@v,5@vO%)WQUO,5@vO%)]QUO,5@vO%$VQUO,5:eO(%iQUO'#KkO(%wQUO'#KkOOQQ,5:e,5:eOOQQ'#JS'#JSO(&SQUO'#D}O(&^QUO'#KqOGkQUO'#LVO('YQUO'#D}OOQQ'#Hp'#HpOOQQ'#Hr'#HrOOQQ'#Hs'#HsOOQQ'#Kl'#KlOOQQ'#JU'#JUO('dQUO,5:hOOQQ,5:h,5:hO((aQUO'#LVO((nQUO'#HtO()UQUO,5@vO()]QUO'#H{O()hQUO'#L^O()pQUO,5>fO()uQUO'#L]OOQQ1G3}1G3}O(-lQUO1G3}O(-sQUO1G3}O(-zQUO1G4TO(/QQUO1G4TO(/VQUO,5A|O!6nQUO1G4hO!(zQVO'#IiOOQQ1G4m1G4mO(/[QUO1G4mO(1_QVO1G4pPOOO1G.h1G.hP!A_{,UO1G.hP(3_QUO'#LeP(3j{,UO1G.hP(3o{7[O1G.hPO{O-E=s-E=sPOOO,5A},5A}P(3w{,UO,5A}POOO1G5Q1G5QO!(zQVO7+$[O(3|QUO'#CyOOQQ,59^,59^O(4XQbO,59cO(4dQbO,59^OOQQ,59],59]OOQQ7+)w7+)wO!M_QVO'#JtO(4oQUO,5@kOOQQ1G.n1G.nOOQQ1G2k1G2kO(4wQUO1G2kO(4|QUO7+(sOOQQ7+*X7+*XO(7bQUO7+*XO(7iQUO7+*XO(1_QVO7+*[O#NeQUO7+(sO(7vQVO'#JbO(8ZQUO,5AjO(8cQUO,5;vOOQQ'#Co'#CoOOQQ,5;w,5;wO!(zQVO'#F[OOQQ-E=_-E=_O!M_QVO,5;uOOQQ1G1`1G1`OOQQ,5?k,5?kOOQQ-E<}-E<}OOQR'#Dg'#DgOOQR'#Di'#DiOOQR'#Dl'#DlO(9lQ!eO'#K_O(9sQMkO'#K_O(9zQ!eO'#K_OOQR'#K_'#K_OOQR'#JQ'#JQO(:RQ!eO,59zOOQQ,59z,59zO(:YQbO,5?mOOQQ-E=P-E=PO(:hQbO1G6dOOQR7+$}7+$}OOQR7+&q7+&qOOQR7+&x7+&xO'8uQUO7+&qO(:sQUO7+&OO#6WQUO7+&OO(;hQUO1G/TO(<OQUO1G/TO(<jQUO7+*ROOQQ7+*V7+*VO(>]QUO,5?tOOQQ-E=W-E=WO(?fQUO7+&ZOOQQ,5@Y,5@YOOQQ-E=l-E=lO(?kQUO'#LOO@XQVO'#EiO(@wQUO1G1_OOQQ1G1_1G1_O(BQQUO,5?}OOQQ,5?},5?}OOQQ-E=a-E=aO(BfQUO'#KpOOQR7+,w7+,wO#DhQUO7+,wOOQR7+,y7+,yO(BsQUO,5=iO#DsQUO'#JjO(CUQUO,5ArOOQR1G3U1G3UOOQR1G3V1G3VO(CdQUO7+,zOOQR7+,z7+,zO(E[QUO,5:wO(FyQUO'#EwO!(zQVO,5;VO(GlQUO,5:wO(GvQUO'#EpO(HXQUO'#EzOOQQ,5;Z,5;ZO#K]QVO'#ExO(HoQUO,5:wO(HvQUO'#EyO#GgQUO'#JZO(J`QUO,5AdOOQQ1G0p1G0pO(JkQUO,5;WO!<[QUO,5;^O(KUQUO,5;_O(KdQUO,5;WO(MvQUO,5;`OOQQ-E=Y-E=YO(NOQUO1G0}OOQQ1G1O1G1OO(NyQUO1G1OO)!PQVO1G1OO)!WQVO1G1OO)!bQUO1G0|OOQQ1G0|1G0|OOQQ1G1P1G1PO)#_QUO'#JoO)#iQUO,5A[OOQQ1G0b1G0bOOQQ-E=Z-E=ZO)#qQUO,5;iO!<[QUO,5;iO)$nQVO,5:zO)$uQUO,5;gO$ mQUO7+&YOOQQ7+&Y7+&YO!(zQVO'#EfO)$|QUO,5:|OOQQ'#Ks'#KsOOQQ-E=V-E=VOOQQ,5A^,5A^OOQQ'#Jl'#JlO)(qQUO7+&PPOQQ7+&P7+&POOQQ7+)V7+)VO))iQUO7+)VO)*oQVO7+)VOOQQ,5>m,5>mO$)YQVO'#JsO)*vQUO,5@rOOQQ1G/R1G/ROOQQ7+$z7+$zO)+RQUO7+(RO)+WQUO7+(ROOQR7+(R7+(RO$>uQUO7+(ROOQQ7+%u7+%uOOQR-E=^-E=^O!0VQUO,5;oOOQQ,5@O,5@OOOQQ-E=b-E=bO$0^QUO1G1hOOQQ1G1h1G1hOOQR7+'Q7+'QOOQR1G1s1G1sOBUQUO,5;rO)+tQUO,5<YO)+{QUO1G1sO)-UQUO1G1sO!0tQVO7+']O)-ZQVO7+']O)2yQUO7+'dO)3OQVO7+'hO)5dQUO7+'wO)5nQUO7+'hO)6tQVO7+'hOKkQUO7+'wO$>hQUO,5<rO!4xQUO7+'xO)6{QUO7+'xOOQR7+(b7+(bO)7QQUO7+'zO)7VQUO,5<vO'CzQUO,5<vO)7}QUO,5<vO'CzQUO,5<vOOQQ,5<w,5<wO)8`QVO,5<xO'EYQUO'#JfO)8jQUO,5AmO)8rQUO,5<yOOQR7+'z7+'zO)8}QVO7+'VO)5gQUO'#K}OOQR-E=c-E=cO);`QVO,5<bOOQQ,5@R,5@RO!6nQUO,5@ROOQQ-E=e-E=eO)=wQUO7+(`O)>}QUO7+(dO)?SQVO7+(dOOQQ7+(l7+(lOOQQ7+)Z7+)ZO)?[QUO'#KjO)?fQUO'#KjOOQR,5=b,5=bO)?sQUO,5=bO!;bQUO,5=bO!;bQUO,5=bO!;bQUO,5=bOOQR7+(g7+(gOOQR7+(u7+(uOOQR7+(y7+(yOOQR,5=w,5=wO)?xQUO,5=zO)AOQUO,5=yOOQR,5Au,5AuOOQR-E=i-E=iOOQQ1G3b1G3bO)BUQUO,5=xO)BZQVO'#EfOOQQ1G6b1G6bO%)WQUO1G6bO%)]QUO1G6bOOQQ1G0P1G0POOQQ-E=Q-E=QO)DrQUO,5AVO(%iQUO'#JTO)D}QUO,5AVO)D}QUO,5AVO)EVQUO,5:iO8zQUO,5:iOOQQ,5>],5>]O)EaQUO,5AqO)EhQUO'#EVO)FrQUO'#EVO)G]QUO,5:iO)GgQUO'#HlO)GgQUO'#HmOOQQ'#Ko'#KoO)HUQUO'#KoO!(zQVO'#HnOOQQ,5:i,5:iO)HvQUO,5:iO!M_QVO,5:iOOQQ-E=S-E=SOOQQ1G0S1G0SOOQQ,5>`,5>`O)H{QUO1G6bO!(zQVO,5>gO)LjQUO'#JrO)LuQUO,5AxOOQQ1G4Q1G4QO)L}QUO,5AwOOQQ,5Aw,5AwOOQQ7+)i7+)iO*!lQUO7+)iOOQQ7+)o7+)oO*'kQVO1G7hO*)mQUO7+*SO*)rQUO,5?TO**xQUO7+*[POOO7+$S7+$SP*,kQUO'#LfP*,sQUO,5BPP*,x{,UO7+$SPOOO1G7i1G7iO*,}QUO<<GvOOQQ1G.x1G.xOOQQ'#IT'#ITO*.pQUO,5@`OOQQ,5@`,5@`OOQQ-E=r-E=rOOQQ7+(V7+(VOOQQ<<Ms<<MsO*/yQUO<<MsO*1|QUO<<MvO*3oQUO<<L_O*4TQUO,5?|OOQQ,5?|,5?|OOQQ-E=`-E=`OOQQ1G1b1G1bO*5^QUO,5;vO*6dQUO1G1aOOQQ1G1a1G1aOOQR,5@y,5@yO*7mQ!eO,5@yO*7tQMkO,5@yO*7{Q!eO,5@yOOQR-E=O-E=OOOQQ1G/f1G/fO*8SQ!eO'#DwOOQQ1G5X1G5XOOQR<<J]<<J]O*8ZQUO<<IjO*9OQUO7+$oOOQQ<<Iu<<IuO(7vQVO,5;ROOQR<=!c<=!cOOQQ1G3T1G3TOOQQ,5@U,5@UOOQQ-E=h-E=hOOQR<=!f<=!fO*9{QUO1G0cO*:SQUO'#EzO*:dQUO1G0cO*:kQUO'#I}O*<RQUO1G0qO!(zQVO1G0qOOQQ,5;[,5;[OOQQ,5;],5;]OOQQ,5?u,5?uOOQQ-E=X-E=XO!<[QUO1G0xO*=bQUO1G0xOOQQ1G0y1G0yO*=sQUO'#ElOOQQ1G0z1G0zOOQQ7+&j7+&jO*>XQUO7+&jO*?_QVO7+&jOOQQ7+&h7+&hOOQQ,5@Z,5@ZOOQQ-E=m-E=mO*@ZQUO1G1TO*@eQUO1G1TO*AOQUO1G0fOOQQ1G0f1G0fO*BUQUO'#K{O*B^QUO1G1ROOQQ<<It<<ItOOQQ'#Hb'#HbO'+fQUO,5={OOQQ'#Hd'#HdO'+fQUO,5=}OOQQ-E=j-E=jPOQQ<<Ik<<IkPOQQ-E=k-E=kOOQQ<<Lq<<LqO*BcQUO'#LaO*CoQUO'#L`OOQQ,5@_,5@_OOQQ-E=q-E=qOOQR<<Km<<KmO$>uQUO<<KmO*C}QUO<<KmOOQR1G1Z1G1ZOOQQ7+'S7+'SO!M_QVO1G1tO*DSQUO1G1tOOQR7+'_7+'_OOQR<<Jw<<JwO!0tQVO<<JwOOQR<<KO<<KOO*D_QUO<<KSO*EeQVO<<KSOKkQUO<<KcO!M_QVO<<KcO*ElQUO<<KSO!0tQVO<<KSO*FuQUO<<KSO*FzQUO<<KcO*GVQUO<<KdOOQR<<Kd<<KdOOQR<<Kf<<KfO*G[QUO1G2bO)7VQUO1G2bO'CzQUO1G2bO*GmQUO1G2dO*HsQVO1G2dOOQQ1G2d1G2dO*H}QVO1G2dO*IUQUO,5@QOOQQ-E=d-E=dOOQQ1G2e1G2eO*IdQUO1G1|O*JmQVO1G1|O*JtQUO1G1|OOQQ1G5m1G5mOOQR<<Kz<<KzOOQR<<LO<<LOO*JyQVO<<LOO*KUQUO<<LOOOQR1G2|1G2|O*KZQUO1G2|O*KbQUO1G3eOOQR1G3d1G3dOOQQ7++|7++|O%)WQUO7++|O*KmQUO1G6qO*KmQUO1G6qO(%iQUO,5?oO*KuQUO,5?oOOQQ-E=R-E=RO*LQQUO1G0TOOQQ1G0T1G0TO*L[QUO1G0TO!M_QVO1G0TO*LaQUO1G0TOOQQ1G3w1G3wO*LkQUO,5:qO)EhQUO,5:qO*MXQUO,5:qO)EhQUO,5:qO$#uQUO,5:uO*MvQVO,5>VO)GgQUO'#JpO*NQQUO1G0TO*NcQVO1G0TOOQQ1G3u1G3uO*NjQUO,5>WO*NuQUO,5>XO+ dQUO,5>YO+!jQUO1G0TO%)]QUO7++|O+#pQUO1G4ROOQQ,5@^,5@^OOQQ-E=p-E=pOOQQ<<MT<<MTOOQQ<<Mn<<MnO+$yQUO1G4oP+&|QUO'#JvP+'UQUO,5BQPO{O1G7k1G7kPOOO<<Gn<<GnOOQQANC_ANC_OOQR1G6e1G6eO+'^Q!eO,5:cOOQQ,5:c,5:cO+'eQUO1G0mO+(qQUO7+&]O+*QQUO7+&dO+*cQUO,5;WOOQQ<<JU<<JUO+*qQUO7+&oOOQQ7+&Q7+&QO!4xQUO'#J^O++lQUO,5AgOOQQ7+&m7+&mOOQQ1G3g1G3gO++tQUO1G3iOOQQ,5>n,5>nO+/iQUOANAXOOQRANAXANAXO+/nQUO7+'`OOQRAN@cAN@cO+0zQVOAN@nO+1RQUOAN@nO!0tQVOAN@nO+2[QUOAN@nO+2aQUOAN@}O+2lQUOAN@}O+3rQUOAN@}OOQRAN@nAN@nO!M_QVOAN@}OOQRANAOANAOO+3wQUO7+'|O)7VQUO7+'|OOQQ7+(O7+(OO+4YQUO7+(OO+5`QVO7+(OO+5gQVO7+'hO+5nQUOANAjOOQR7+(h7+(hOOQR7+)P7+)PO+5sQUO7+)PO+5xQUO7+)POOQQ<= h<= hO+6QQUO7+,]O+6YQUO1G5ZOOQQ1G5Z1G5ZO+6eQUO7+%oOOQQ7+%o7+%oO+6vQUO7+%oO*NcQVO7+%oOOQQ7+)a7+)aO+6{QUO7+%oO+8RQUO7+%oO!M_QVO7+%oO+8]QUO1G0]O*LkQUO1G0]O)EhQUO1G0]OOQQ1G0a1G0aO+8zQUO1G3qO+:QQVO1G3qOOQQ1G3q1G3qO+:[QVO1G3qO+:cQUO,5@[OOQQ-E=n-E=nOOQQ1G3r1G3rO%)WQUO<= hOOQQ7+*Z7+*ZPOQQ,5@b,5@bPOQQ-E=t-E=tOOQQ1G/}1G/}OOQQ,5?x,5?xOOQQ-E=[-E=[OOQRG26sG26sO+:zQUOG26YO!0tQVOG26YO+<TQUOG26YOOQRG26YG26YO!M_QVOG26iO!0tQVOG26iO+<YQUOG26iO+=`QUOG26iO+=eQUO<<KhOOQQ<<Kj<<KjOOQRG27UG27UOOQR<<Lk<<LkO+=vQUO<<LkOOQQ7+*u7+*uOOQQ<<IZ<<IZO+={QUO<<IZO!M_QVO<<IZO+>QQUO<<IZO+?WQUO<<IZO*NcQVO<<IZOOQQ<<L{<<L{O+?iQUO7+%wO*LkQUO7+%wOOQQ7+)]7+)]O+@WQUO7+)]O+A^QVO7+)]OOQQANESANESO!0tQVOLD+tOOQRLD+tLD+tO+AeQUOLD,TO+BkQUOLD,TOOQRLD,TLD,TO!0tQVOLD,TOOQRANBVANBVOOQQAN>uAN>uO+BpQUOAN>uO+CvQUOAN>uO!M_QVOAN>uO+C{QUO<<IcOOQQ<<Lw<<LwOOQR!$( `!$( `O!0tQVO!$( oOOQR!$( o!$( oOOQQG24aG24aO+DjQUOG24aO+EpQUOG24aOOQR!)9EZ!)9EZOOQQLD){LD){O+EuQUO'#CgO(dQUO'#CgO+IrQUO'#CyO+LcQUO'#CyO!E{QUO'#CyO+M[QUO'#CyO+MoQUO'#CyO,#bQUO'#CyO,#rQUO'#CyO,$PQUO'#CyO,$[QbO,59cO,$gQbO,59cO,$rQbO,59cO,$}QbO'#CwO,%`QbO'#CwO,%qQbO'#CwO,&SQUO'#CgO,(gQUO'#CgO,(tQUO'#CgO,+iQUO'#CgO,.lQUO'#CgO,.|QUO'#CgO,2uQUO'#CgO,2|QUO'#CgO,3|QUO'#CgO,6VQUO,5:xO#?kQUO,5:xO#?kQUO,5:xO#=ZQUO'#L[O,6sQbO'#CwO,7OQbO'#CwO,7ZQbO'#CwO,7fQbO'#CwO#6tQUO'#E^O,7qQUO'#E^O,9OQUO'#HgO,9pQbO'#CwO,9{QbO'#CwO,:WQUO'#CvO,:]QUO'#CvO,:bQUO'#CoO,:pQbO,59cO,:{QbO,59cO,;WQbO,59cO,;cQbO,59cO,;nQbO,59cO,;yQbO,59cO,<UQbO,59cO,6VQUO1G0dO,<aQUO1G0dO#?kQUO1G0dO,7qQUO1G0dO,>nQUO'#KZO,?OQUO'#CyO,?^QbO,59cO,6VQUO7+&OO,<aQUO7+&OO,?iQUO'#EwO,@[QUO'#EzO,@{QUO'#E^O,AQQUO'#GcO,AVQUO'#CvO,A[QUO'#CwO,AaQUO'#CwO,AfQUO'#CvO,AkQUO'#GcO,ApQUO'#KZO,B^QUO'#KZO,BhQUO'#CvO,BsQUO'#CvO,COQUO'#CvO,<aQUO,5:xO,7qQUO,5:xO,7qQUO,5:xO,CZQUO'#KZO,CnQbO'#CwO,CyQUO'#CrO,DOQUO'#E^",stateData:",Dt~O(nOSSOSTOSRPQVPQ'ePQ'gPQ'hPQ'iPQ'jPQ'kPQ'lPQ'mPQ~O*ZOS~OPmO]eOa!]Od!POlTOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!VfO!X!XO!Y!WO!i!YO!opO!r!`O!s!aO!t!aO!u!bO!v!aO!x!cO!{!dO#V#QO#a#VO#b#TO#i#OO#p!xO#t!fO#v!eO$R!gO$T!hO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO${!tO$}!uO%U!yO%_#ZO%`#[O%a#YO%c!zO%e#UO%g!{O%l#SO%o!|O%v!}O%|#PO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(rRO)PYO)SaO)U|O)V{O)WiO)X!ZO)YXO)hcO)idO~OR#bOV#]O'e#^O'g#_O'h#`O'i#`O'j#aO'k#aO'l#_O'm#_O~OX#dO(p#dO(q#fO~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(uZX(v$]X(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)WZX)XZX)jZX~O)WiX!UZX~P(dO]#}O!V#lO!X#{O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO(w#kO(x#kO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O~Od$RO%Y$SO'[$TO'_$UO(y$OO~Ol$VO~O!T$WO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X~Ol$VO~P.ZOl$VO!g$YO)j$YO~OX$ZO)Z$ZO~O!R$[O)X)QP)])QP~OPmO]$eOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~Ol$_O#t$lO(rRO~P0zO](]Xa'yXd(]Xl'yXl(]Xr'yXr(]Xs'yXs(]Xt'yXt(]Xu'yXu(]Xv'yXv(]Xw'yXw(]Xx'yXx(]Xy'yXy(]X{'yX}'yX!V(]X!o(]X!r'yX!r(]X!s'yX!s(]X!t'yX!t(]X!u'yX!u(]X!v'yX!v(]X!x'yX!x(]X!{(]X#a'yX#b'yX%e'yX%l'yX%o(]X%v(]X&m'yX&r'yX&s'yX(r'yX(r(]X)S(]X)U(]X)V(]X~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO&r#WO&s$wO])aXd)aXl)aX!V)aX!{)aX%v)aX(r)aX)S)aX)U)aX)V)aX~O)W$vO~P:nOPmO]eOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO!|%RO(r$xO~P<lO)S%SO~Oa!]Ol$_O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r:}O~P<lOPmO]$eOa%QOl:zO!V$fO!W%_O!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r;OO)S%dO)U%iO)V%iO~O(v%mO~O)W#jO~O(r%nO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OP%oO(oQO~PCQO]%hOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO%o!|O%v!}O)S;`O)U|O)V|O~Ol%rO!o%wO(r$xO~PE_O!TxO#v!eO(v%yO)j%|O])eX!V)eX~O]%hOd!POl%rO!V%kO!{!dO%v!}O(r$xO)S;`O)U|O)V|O~O!TxO#v!eO)W&PO)j&QO~O!U&TO~P!QO]&YO!TxO!V&WO)S&VO)U&ZO)V&ZO~Op&UO~PHrO]&cO!V&bO~OPmO]eOd!PO!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO%v$mO(r$xO~PIgO]%hOd!POl;[O!V%kO!{!dO%v$mO(r$xO)S;`O)U|O)V|O~Op&fO](tX])eX!V(tX!V)eX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!O)eX!U(tX~O!g$YO)j$YO~PL]O!g(tX)j(tX~PL]O](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!U(tX~O])eX!V)eX!O)eX~PNkOa&hO&m!RO]&lXd&lXl&lXr&lXs&lXt&lXu&lXv&lXw&lXx&lXy&lX}&lX!V&lX!r&lX!s&lX!t&lX!u&lX!v&lX!x&lX!{&lX%v&lX&r&lX&s&lX(r&lX)S&lX)U&lX)V&lX)W&lX!O&lX!T&lX!X&lX!Y&lX![&lX!^&lX!_&lX!a&lX!b&lX!c&lX!e&lX!f&lX!h&lX(u&lX(w&lX(x&lX)T&lX)X&lX!g&lX)j&lX!W&lXQ&lX!d&lX(v&lX!U&lX#v&lX~Op&fOl(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~P.ZO!g$YO)j$YO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O](}Xd(}Xl(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~O]#}O~P!*qO]&lO~O])bXa)bXd)bXl)bXr)bXs)bXt)bXu)bXv)bXw)bXx)bXy)bX{)bX})bX!V)bX!o)bX!r)bX!s)bX!t)bX!u)bX!v)bX!x)bX!{)bX#a)bX#b)bX%e)bX%l)bX%o)bX%v)bX&m)bX&r)bX&s)bX(r)bX)S)bX)U)bX)V)bX~O(oQO~P!-ZO%U&nO~P!-ZO]&oO~O]#}O~O!TxO~O$W&wO(r%nO(v&vO~O]&xOw&zO~O]&xO~OPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#p!xO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O]'PO~O!T$WO)W'RO~P!(zO)W'TO~O)W'UO~O(r'VO~O)W'YO~P!(zOl;^O%U'^O%e'^O(r;PO~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O(v'bO~O)W'dO~P!(zO!TxO(r%nO)j'fO~O(r%nO~O]'iO~O]'jOd%nXl%nX!V%nX!{%nX%v%nX(r%nX)S%nX)U%nX)V%nX~O]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~P8zO]%hOa!TOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO)S;`O)U|O)V|O~Ol;_Op&UO%v$mO(r;QO~P!8jO(r%nO(v'vO)W'wO~O]&cO!T'yO~Ol$oO}!_O!T(QO!l(VO(r$nO(v(PO)PYO~Ol$oO{(^O!T(ZO#b(^O(r$nO~Oa!TOl$oO{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O](`O~OPmOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)YXO)hcO)idO~O](bO)X(cO~P!=UO]#}O~P!<[OPmO]$eOa%QOl:zO!V(iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OY(jO(oQO(r%nO~O'f(mO~OS(qOT(nO*W(pO~O]#}O(n(tO~Q'nXX#dO(p#dO(q(vO~Od)QOl({O&r#WO(r(zO~O!Y'Sa!['Sa!^'Sa!_'Sa!a'Sa!b'Sa!c'Sa!e'Sa!f'Sa!h'Sa(u'Sa)S'Sa)T'Sa)U'Sa)V'Sa)W'Sa)X'Sa!g'Sa)j'Sa!O'Sa!W'Sa(v'Sa!U'SaQ'Sa!d'Sa~OPmOa%QOl:zO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO]'Sa!V'Sa!X'Sa(w'Sa(x'Sa~P!B_O!T$WO!O(sP~P!(zO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!TnX!VnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX(u%WX(w%WX(x%WX)SnX)S%WX)T%WX)UnX)U%WX)VnX)V%WX)W%WX)X%WX)jmX!O%WX~O)WnX!OnX!U%WX~P!E{O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~P8zOPmO]$eOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!V)lO~P!JwOd)oO%Y)pO(y$OO~O!T$WO!V)rO(w)sO!U)rP~P!JwO!T$WO~P!(zO)[)zO~Ol){O]!QX!h!QX)X!QX)]!QX~O])}O!h*OO)X)QX)])QX~O)X*SO)]*RO~Od$RO%Y*TO'[$TO'_$UO(y$OO~Ol*UO~Ol*UO!O(}X~P.ZOl*UO!g$YO)j$YO~O)W*VO~P:nOPmO]$eOa!]Ol$_Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)X!ZO)YXO)hcO)idO~Op&fO~P!&zOp&fO!W(tX(v(tXQ(tX!d(tX~PNkO]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~O]iXdiXlgXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!TiX!hiX)XiX)jiX!OiX~O!liX(viX)WiX!XiX!YiX![iX!^iX!_iX!aiX!biX!ciX!eiX!fiX(uiX(wiX(xiX)TiX!giX!WiXQiX!diX!UiX#viX#TiX#ViX#piXaiX{iX!oiX#aiX#biX#iiX#tiX${iX%ciX%eiX%kiX%liX%oiX&miX)PiX~P#%yO(y*ZO~Ol*[O~O](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!T(}X!X(}X!Y(}X![(}X!^(}X!_(}X!a(}X!b(}X!c(}X!e(}X!f(}X!h(}X(u(}X(w(}X(x(}X)T(}X)X(}X!g(}X)j(}X!O(}X!W(}XQ(}X!d(}X(v(}X!U(}X#v(}X~Ol*[O~P#+ROr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO])aad)aal)aa!V)aa!{)aa%v)aa(r)aa)S)aa)U)aa)V)aaQ)aa!d)aa!h)aa)X)aa)j)aa!O)aa!T)aa(v)aa)W)aa~O&r#WO&s$wO~P#.qOp&fOl(}X~P#+RO&r)aa~P#.qO]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX!OZX~O!WZX(vZX!UZXQZX!dZX~P#1jO]#}O!V#lO!X#{O(w#kO(x#kO~O!Y&xa![&xa!^&xa!_&xa!a&xa!b&xa!c&xa!e&xa!f&xa!g&xa!h&xa(u&xa)S&xa)T&xa)U&xa)V&xa)W&xa)X&xa)j&xa!O&xa!W&xa(v&xa!U&xaQ&xa!d&xa~P#3zOl;hO!T$WO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PKkOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PKkO]&cO!V&bO!O#Qa!T#Qa!h#Qa#v#Qa)W#Qa)j#QaQ#Qa!d#Qa(v#Qa~Op&fO!T$WO~O!O*cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O*cO~O]&cO!O*eO!V&bO~O]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~O!OqXQqX!dqX!hqX)XqX)WqX~P#9{O!O*hO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W)kX~P#3zO!W*kO!h*lO~O!W*kO!h*lO~P!(zO!W*kO~Op&fO!g$YO!h*mO)j$YO](tX!V(tX!W(tX!W*OX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)X(tX~O!h(tX~P#=ZO!W*oO~Od$RO%Y*TO(y:rO~Ol;kO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PBUO]*vO!T*qO!V&bO!h*tO#v!eO)j*rO)W)qX~O!h*tO)W)qX~O)W*wO~Op&fO])eX!T)eX!V)eX!h)eX#v)eX)W)eX)j)eX!O)eXQ)eX!d)eX(v)eX~Op&fO~OP%oO(oQO]%ha!V%ha!X%ha!Y%ha![%ha!^%ha!_%ha!a%ha!b%ha!c%ha!e%ha!f%ha!h%ha(r%ha(u%ha(w%ha(x%ha)S%ha)T%ha)U%ha)V%ha)W%ha)X%ha!g%ha)j%ha!O%ha!W%ha(v%ha!U%haQ%ha!d%ha~Od$RO%Y$SO(y:oO~Ol:wO~O!TxO#v!eO)j%|O~Ol<[O&r#WO(r;gO~O$Z+TO%`+UO~O!TxO#v!eO)W+VO)j+WO~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO$Z+TO%_#ZO%`+YO%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!U+ZO~P!QOa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a+aO#b+bO#i+cO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO)PYO~OQ)lP!d)lP~P#GgO]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO)S&VO)U&ZO)V&ZO~O!O#kX!T#kX#v#kX)W#kX)j#kXQ#kX!d#kX!h#kX)X#kX!x#kX(v#kX~P#IkOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!W+iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S+jO)V$kO)X!ZO)YXO)hcO)idO~O]&cO!V+kO~O]&YO!V&WO)PYO)S&VO)U&ZO)V&ZO)X+nO!O)dP~P8zO]&YO!V&WO)S&VO)U&ZO)V&ZO~O!O#nX!T#nX#v#nX)W#nX)j#nXQ#nX!d#nX!h#nX)X#nX!x#nX(v#nX~P#NeO!TxO])nX!V)nX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O#T+vO#p+wO(x+tO)U+rO)V+rO~O]#jX!T#jX!V#jX!O#jX#v#jX)W#jX)j#jXQ#jX!d#jX!h#jX)X#jX!x#jX(v#jX~P$ xO#V+yO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO])fP!T)fP!V)fP#v)fP(v)fP)j)fP!O)fP!h)fP)W)fP~O!x)fPQ)fP!d)fP~P$#uOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)V$kO)X!ZO)YXO)hcO)idO~O!W,QO)S,RO~P$%pO)PYO)X+nO!O)dP~P8zO]&cO!V&bO!O&Za!T&Za!h&Za#v&Za)W&Za)j&ZaQ&Za!d&Za(v&Za~OPmO]$eOa!]Ol:|Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;RO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OQ(zP!d(zP~P$)YO]#}O!V#lO(w#kO(x#kO!X'Pa!Y'Pa!['Pa!^'Pa!_'Pa!a'Pa!b'Pa!c'Pa!e'Pa!f'Pa!h'Pa(u'Pa)S'Pa)T'Pa)U'Pa)V'Pa)W'Pa)X'Pa!g'Pa)j'Pa!O'Pa!W'Pa(v'Pa!U'PaQ'Pa!d'Pa~O]#}O!V#lO!X#{O(w#kO(x#kO~P!B_O!TxO#t!fO)PYO~P8zO!TxO(r%nO)j,[O~O#x,aO~OQ)aX!d)aX!h)aX)X)aX)j)aX!O)aX!T)aX(v)aX)W)aX~P:nO(v,eO(w,cO)P$UX)W$UX~O(r,fO~O)PYO)W,iO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O(r;SO~P$0kOPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O$h,sO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO$}!uO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O${,yO(r:}O)W,wO~P$7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W,{O)X#|O~P#3zO)W,{O~O)W,|O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W,}O)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-OO)X#|O~P#3zOp&fO)PYO)j-QO~O)W-RO~Ol;^O(r;PO~O]-YO!{!dO&r#WO&s$wO(r-UO)S-VO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v-]O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xa!o$Xa!{$Xa#i$Xa#p$Xa#t$Xa#v$Xa$R$Xa$T$Xa$Y$Xa$Z$Xa${$Xa%U$Xa%c$Xa%g$Xa%o$Xa%|$Xa(k$Xa)U$Xa!U$Xa$c$Xa~P$0kO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-cO)X#|O~P#3zOl-eO!TxO)j,[O~O)j-gO~O]&]a!X&]a!Y&]a![&]a!^&]a!_&]a!a&]a!b&]a!c&]a!e&]a!f&]a!h&]a(u&]a(w&]a(x&]a)T&]a)U&]a)V&]a)W&]a)X&]a!g&]a)j&]a!O&]a!W&]a!T&]a#v&]a(v&]a!U&]aQ&]a!d&]a~O)S-kO!V&]a~P$DbO!O-kO~O!W-kO~O!V-lO)S&]a~P$DbO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X~Ol;mO~P$GQO]&cO!V&bO)W-mO~Ol;cO!o-pO#V+yO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO!n-yO(r,fO~O)PYO)W-{O~OPmO]$eOa%QOl:zO!T.QO!V$fO!X!XO!Y!WO!i!YO#V.XO#a.WO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO(x.PO)S$kO)V$kO)W-}O)X!ZO)YXO)hcO)idO~O!U.VO~P$JbO])^Xd)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)W)^X!O)^X!h)^X)X)^X!X)^X!Y)^X![)^X!^)^X!_)^X!a)^X!b)^X!c)^X!e)^X!f)^X(u)^X(w)^X(x)^X)T)^X!g)^X)j)^X!W)^XQ)^X!d)^X#T)^X#V)^X#p)^X#v)^Xa)^X{)^X!o)^X#a)^X#b)^X#i)^X#t)^X${)^X%c)^X%e)^X%k)^X%l)^X%o)^X&m)^X)P)^X!U)^X~Ol*[O~P$LlOl$oO!T(QO!l.^O(r$nO(v(PO)PYO~Op&fOl)^X~P$LlOl$oO!n.cO!o.cO(r$nO)PYO~Ol;dO!U.nO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jO!T(QO!l.^O(v(PO])OXd)OXl)OXr)OXs)OXt)OXu)OXv)OXw)OXx)OXy)OX})OX!V)OX!r)OX!s)OX!t)OX!u)OX!v)OX!x)OX!{)OX%v)OX&r)OX&s)OX(r)OX)S)OX)U)OX)V)OX~O)W)OX!O)OX!X)OX!Y)OX![)OX!^)OX!_)OX!a)OX!b)OX!c)OX!e)OX!f)OX!h)OX(u)OX(w)OX(x)OX)T)OX)X)OX!g)OX)j)OX!W)OXQ)OX!d)OX!U)OX#v)OX~P%%eO!T(QO~O!T(QO(v(PO~O(r%nO!U*QP~O!T(ZO(v.uO]&kad&kal&kar&kas&kat&kau&kav&kaw&kax&kay&ka}&ka!V&ka!r&ka!s&ka!t&ka!u&ka!v&ka!x&ka!{&ka%v&ka&r&ka&s&ka(r&ka)S&ka)U&ka)V&ka)W&ka!O&ka!X&ka!Y&ka![&ka!^&ka!_&ka!a&ka!b&ka!c&ka!e&ka!f&ka!h&ka(u&ka(w&ka(x&ka)T&ka)X&ka!g&ka)j&ka!W&kaQ&ka!d&ka!U&ka#v&ka~Ol$oO!T(ZO(r$nO~O&r#WO&s$wO]&pad&pal&par&pas&pat&pau&pav&paw&pax&pay&pa}&pa!V&pa!r&pa!s&pa!t&pa!u&pa!v&pa!x&pa!{&pa%v&pa(r&pa)S&pa)U&pa)V&pa)W&pa!O&pa!T&pa!X&pa!Y&pa![&pa!^&pa!_&pa!a&pa!b&pa!c&pa!e&pa!f&pa!h&pa(u&pa(w&pa(x&pa)T&pa)X&pa!g&pa)j&pa!W&paQ&pa!d&pa(v&pa!U&pa#v&pa~O&s.zO~P!(zO!Y#qO![#rO!f#zO)S#mO!^'Ua!_'Ua!a'Ua!b'Ua!c'Ua!e'Ua!h'Ua(u'Ua)T'Ua)U'Ua)V'Ua)W'Ua)X'Ua!g'Ua)j'Ua!O'Ua!W'Ua(v'Ua!U'UaQ'Ua!d'Ua~P#3zO!V'dX!X'dX!Y'dX!['dX!^'dX!_'dX!a'dX!b'dX!c'dX!e'dX!f'dX!h'dX(u'dX(w'dX(x'dX)S'dX)T'dX)U'dX)V'dX)X'dX!O'dX~O].|O)W'dX!g'dX)j'dX!W'dX(v'dX!U'dXQ'dX!d'dX~P%2xO!Y#qO![#rO!f#zO)S#mO!^'Wa!_'Wa!a'Wa!b'Wa!c'Wa!e'Wa!h'Wa(u'Wa)T'Wa)U'Wa)V'Wa)W'Wa)X'Wa!g'Wa)j'Wa!O'Wa!W'Wa(v'Wa!U'WaQ'Wa!d'Wa~P#3zO]#}O!T$WO!V.}O&r#WO&s$wO~O!X'Za!Y'Za!['Za!^'Za!_'Za!a'Za!b'Za!c'Za!e'Za!f'Za!h'Za(u'Za(w'Za(x'Za)S'Za)T'Za)U'Za)V'Za)W'Za)X'Za!g'Za)j'Za!O'Za!W'Za(v'Za!U'ZaQ'Za!d'Za~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^a)W'^a!g'^a)j'^a!O'^a!W'^a(v'^a!U'^aQ'^a!d'^a~P#3zOPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O!W/QO~P%:oOS(qOT(nO]#}O*W(pO~O]/TO'f/UO*W/RO~OS/YOT(nO*W/XO~O]#}O~Q'na!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v/[O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W#Zi!O#Zi~P#3zO]cXlgXpcXpiX!VcX!XcX!YcX![cX!^cX!_cX!acX!bcX!ccX!ecX!fcX!gcX!hcX(ucX(wcX(xcX)ScX)TcX)UcX)VcX)WcX)XcX)jcX!OcX!WcX(vcX!TcX#vcX!UcXQcX!dcX~Od/^O%Y*TO(y/]O~Ol/_O~Ol/`O~Op&fO]bi!Vbi!Xbi!Ybi![bi!^bi!_bi!abi!bbi!cbi!ebi!fbi!gbi!hbi(ubi(wbi(xbi)Sbi)Tbi)Ubi)Vbi)Wbi)Xbi)jbi!Obi!Wbi(vbi!UbiQbi!dbi~O!W/bO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO![#rO)S#mO!Y&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y&zi![&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)S&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)U#nO)V#pO!h&zi(u&zi)T&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!a&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!f#zO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO!h&zi(u&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/cO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(sX~P#3zO!h/cO!O(sX~O!O/eO~O]%Xap%Xa!X%Xa!Y%Xa![%Xa!^%Xa!_%Xa!a%Xa!b%Xa!c%Xa!e%Xa!f%Xa!h%Xa(u%Xa(w%Xa(x%Xa)T%Xa)U%Xa)V%Xa)W%Xa)X%Xa!g%Xa)j%Xa!O%Xa!W%Xa!T%Xa#v%Xa(v%Xa!U%XaQ%Xa!d%Xa~O)S/fO!V%Xa~P&,aO!O/fO~O!W/fO~O!V/gO)S%Xa~P&,aO!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^i)W'^i!g'^i)j'^i!O'^i!W'^i(v'^i!U'^iQ'^i!d'^i~P#3zO!W/lO~P%:oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/nO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U)rX~P#3zO(r/qO~O!V/sO(w)sO)j/uO~O!h/nO!U)rX~O!U/vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO)X#|O!h_i(u_i)W_i!g_i)j_i!O_i!W_i(v_i!U_iQ_i!d_i~P#3zO!R/wO~Ol){O]!Qa!h!Qa)X!Qa)]!Qa~OP0PO]0OOl0PO!R0PO!T/|O!V/}O!X0PO!Y0PO![0PO!^0PO!_0PO!a0PO!b0PO!c0PO!e0PO!f0PO!g0PO!h0PO!i0PO(oQO(v0PO(w0PO(x0PO)S/yO)T/zO)U/zO)V/{O)W0PO)X0PO)YXO~O!O0SO~P&6yO!R$[O~O!h*OO)X)Qa)])Qa~O)]0WO~O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~Od)oO%Y*TO(y$OO~O)W0YO~O]nXdnXlmXpnXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!TnX!hnX)XnX!OnXQnX!dnX~O!lnX(vnX)WnX!XnX!YnX![nX!^nX!_nX!anX!bnX!cnX!enX!fnX(unX(wnX(xnX)TnX!gnX)jnX!WnX!UnX#vnX#TnX#VnX#pnXanX{nX!onX#anX#bnX#inX#tnX${nX%cnX%enX%knX%lnX%onX&mnX)PnX~P&:uOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO~O])aid)ail)ai!V)ai!{)ai%v)ai(r)ai)S)ai)U)ai)V)aiQ)ai!d)ai!h)ai)X)ai)j)ai!O)ai!T)ai&r)ai(v)ai)W)ai~P&?sO]&cO!V&bO!O#Qi!T#Qi!h#Qi#v#Qi)W#Qi)j#QiQ#Qi!d#Qi(v#Qi~O!OqaQqa!dqa!hqa)Xqa)Wqa~P#9{O!OqaQqa!dqa!hqa)Xqa)Wqa~P#IkO]&cO!V+kO!OqaQqa!dqa!hqa)Xqa)Wqa~O!h*iO!W)ka~O!h*mO!W*Oa~OPmOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!X!XO!Y!WO!i!YO!s!aO!t!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)WiO)X!ZO)YXO)hcO)idO~O]eOd!POlTO!T*qO!U&TO!V0hO!opO!r!`O!u!bO!{!dO#i#OO#p!xO#t!fO$R!gO$T!hO${!tO$}!uO%U!yO%c!zO%g!{O%o!|O%v!}O%|#PO(rRO(w)sO)SaO)U|O)V{O~P&DuO!h*tO)W)qa~OPmO]$eOa!]Ol:|O{#RO!T$WO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O(sP!O)dP~P&?sO!h*mO!W*OX~O]#}O!T$WO~O!h0sO!T)zX#v)zX)j)zX~O)W0uO~O)W0vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W0xO)X#|O~P#3zO)W0vO~P!?WO]1SOd!POl%bO!V1QO!{!dO%v$mO(r$xO)S0zO)X0}O~O)U1OO)V1OO)j0{OQ#PX!d#PX!h#PX!O#PX~P' dO!h1TOQ)lX!d)lX~OQ1VO!d1VO~O)X1YO)j1XOQ#`X!d#`X!h#`X~P!<[O)X1YO)j1XOQ#`X!d#`X!h#`X~P!;bOp&UO~O!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~P#IkO]&cO!V+kO!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~O!W1_O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1_O)S1aO~P$%pO!W1_O~P!(zO]#ja!T#ja!V#ja!O#ja#v#ja)W#ja)j#jaQ#ja!d#ja!h#ja)X#ja!x#ja(v#ja~P$ xO]&cO!O1eO!V+kO~O!h1fO!O)dX~O!O1hO~O]&cO!V+kO!O#na!T#na#v#na)W#na)j#naQ#na!d#na!h#na)X#na!x#na(v#na~O]1lOr#SXs#SXt#SXu#SXv#SXw#SXx#SXy#SX!T#SX!V#SX#T#SX#p#SX(x#SX)U#SX)V#SX!l#SX!x#SX#V#SX#v#SX(v#SX)j#SX!O#SX!h#SX)W#SXQ#SX!d#SX)X#SX~O]1mO~O]1pOl$oO!V$fO#V#QO(r$nO)hcO)idO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO~O])fX!T)fX!V)fX!x)fX#v)fX(v)fX)j)fX!O)fX!h)fX)W)fXQ)fX!d)fX~P'+}O!x!cO]#Ri!T#Ri!V#Ri#v#Ri(v#Ri)j#Ri!O#Ri!h#Ri)W#RiQ#Ri!d#Ri~O!W1xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1xO)S1zO~P$%pO!W1xO~P!(zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*RX!d*RX!h*RX~P#3zO)X1{OQ({X!d({X!h({X~O!h1|OQ(zX!d(zX~OQ2OO!d2OO~O!O2PO~O#t$lO)PYO~P8zOl-eO!TxO)j2TO~O!O2UO~O#x,aOP#ui]#uia#uid#uil#uir#uis#uit#uiu#uiv#uiw#uix#uiy#ui{#ui}#ui!T#ui!V#ui!X#ui!Y#ui!i#ui!o#ui!r#ui!s#ui!t#ui!u#ui!v#ui!x#ui!{#ui#V#ui#a#ui#b#ui#i#ui#p#ui#t#ui#v#ui$R#ui$T#ui$Y#ui$Z#ui$`#ui$e#ui$g#ui$h#ui$k#ui$m#ui$o#ui$q#ui$s#ui$u#ui$w#ui${#ui$}#ui%U#ui%_#ui%`#ui%a#ui%c#ui%e#ui%g#ui%l#ui%o#ui%v#ui%|#ui&m#ui&r#ui&s#ui'Q#ui'R#ui'V#ui'Y#ui'a#ui'b#ui(k#ui(o#ui(r#ui)P#ui)S#ui)U#ui)V#ui)W#ui)X#ui)Y#ui)h#ui)i#ui!U#ui$c#ui!n#ui%k#ui~O]&cO~O]&cO!TxO!V&bO#v!eO~O(v2ZO(w,cO)P$Ua)W$Ua~O)PYO)W2]O~O!O2^O~P,]O!O2^O)W#jO~O!O2^O~O$c2cOP$_i]$_ia$_id$_il$_ir$_is$_it$_iu$_iv$_iw$_ix$_iy$_i{$_i}$_i!T$_i!V$_i!X$_i!Y$_i!i$_i!o$_i!r$_i!s$_i!t$_i!u$_i!v$_i!x$_i!{$_i#V$_i#a$_i#b$_i#i$_i#p$_i#t$_i#v$_i$R$_i$T$_i$Y$_i$Z$_i$`$_i$e$_i$g$_i$h$_i$k$_i$m$_i$o$_i$q$_i$s$_i$u$_i$w$_i${$_i$}$_i%U$_i%_$_i%`$_i%a$_i%c$_i%e$_i%g$_i%l$_i%o$_i%v$_i%|$_i&m$_i&r$_i&s$_i'Q$_i'R$_i'V$_i'Y$_i'a$_i'b$_i(k$_i(o$_i(r$_i)P$_i)S$_i)U$_i)V$_i)W$_i)X$_i)Y$_i)h$_i)i$_i!U$_i~O]1pO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W2fO)X#|O~P#3zOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W2iO)X!ZO)YXO)hcO)idO~P&?sO)W2fO~O(r-UO~O)PYO)j2lO~O)W2nO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO(r-UO)S-VO~O)S2sO~O]&cO!V2uO!h2vO)W)uX~O]-YO!{!dO(r-UO)S-VO~O)W2yO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xi!o$Xi!{$Xi#i$Xi#p$Xi#t$Xi#v$Xi$R$Xi$T$Xi$Y$Xi$Z$Xi${$Xi%U$Xi%c$Xi%g$Xi%o$Xi%|$Xi(k$Xi)U$Xi!U$Xi$c$Xi~P$0kOl:{O(r:nO~P0zO]2}O~O)W2SO~O!u3PO(r%nO~O!O3SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h3TO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O3UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO]&cO!V+kO!T%ui#v%ui)W%ui)j%ui~O!W3VO~Ol:yO)W(}X~P$GQOa!TOl$oO{3]O#a#VO#b3[O#t!fO%e#UO%l3^O&m!RO&r#WO&s!TO(r$nO)PYO~P&?sOl;cO!o-pO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO]&cO!V&bO)W3`O~O)W3aO~O)PYO)W3aO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W3bO)X#|O~P#3zO)W3bO~O)W3eO~O!U3gO~P$JbOl$oO(r$nO~O]3iO!T'yO~P'+iO!T(QO!l3lO(v(PO])Oad)Oal)Oar)Oas)Oat)Oau)Oav)Oaw)Oax)Oay)Oa})Oa!V)Oa!r)Oa!s)Oa!t)Oa!u)Oa!v)Oa!x)Oa!{)Oa%v)Oa&r)Oa&s)Oa(r)Oa)S)Oa)U)Oa)V)Oa)W)Oa!O)Oa!X)Oa!Y)Oa![)Oa!^)Oa!_)Oa!a)Oa!b)Oa!c)Oa!e)Oa!f)Oa!h)Oa(u)Oa(w)Oa(x)Oa)T)Oa)X)Oa!g)Oa)j)Oa!W)OaQ)Oa!d)Oa!U)Oa#v)Oa~Ol$oO!n.cO!o.cO(r$nO~O!h3pO)X3rO!T)_X~O!o3tO)PYO~P8zO)W3uO~PGVO]3zOl({O!T$WO!{!dO%v$mO&r#WO(r(zO(v4OO)S3wO)U3{O)V3{O~O)W4PO)j4RO~P(&eOl;dO!U4TO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jOl;dO%v!}O(r;VO~P!8jO(v4UO~Ol$oO!T(QO(r$nO(v(PO)PYO~O!l3lO~P((sO)j4WO!U&oX!h&oX~O!h4XO!U*QX~O!U4ZO~Oa4]Ol$oO&m!RO(r$nO~O!T(ZO]&kid&kil&kir&kis&kit&kiu&kiv&kiw&kix&kiy&ki}&ki!V&ki!r&ki!s&ki!t&ki!u&ki!v&ki!x&ki!{&ki%v&ki&r&ki&s&ki(r&ki)S&ki)U&ki)V&ki)W&ki!O&ki!X&ki!Y&ki![&ki!^&ki!_&ki!a&ki!b&ki!c&ki!e&ki!f&ki!h&ki(u&ki(w&ki(x&ki)T&ki)X&ki!g&ki)j&ki!W&kiQ&ki!d&ki!U&ki#v&ki~O(v&ki~P(*TO(v.uO~P(*TO!O4`O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O4`O~O!O4aO~O]#}O!T$WO!V'Zi!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~OPmOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)X!ZO)YXO)hcO)idO]#]ap#]a!T#]a!V#]a)S#]a)U#]a)V#]a~O(r%nO)X4fO!O*YP~O*W4eO~O'f4hO*W4eO~O*W4iO~OlmXpnXp&wX~Od4kO%Y*TO(y/]O~Od4kO%Y*TO(y4lO~O!h/cO!O(sa~O!W4pO~O]&cO!V+kO!T%uq#v%uq)W%uq)j%uq~O]#}O!T$WO!X'Zq!Y'Zq!['Zq!^'Zq!_'Zq!a'Zq!b'Zq!c'Zq!e'Zq!f'Zq!h'Zq(u'Zq(w'Zq(x'Zq)S'Zq)T'Zq)U'Zq)V'Zq)W'Zq)X'Zq!g'Zq)j'Zq!O'Zq!W'Zq(v'Zq!U'ZqQ'Zq!d'Zq~O!V'Zq~P(5bO!V.}O&r#WO&s$wO~P(5bO!T$WO!V)rO(w)sO!U(UX!h(UX~P!JwO!h/nO!U)ra~O!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!U4|O~P&6yO!W4|O~P&6yO!O4|O~P&6yO!O5RO~P&6yO]5SO!h'ua)X'ua)]'ua~O!h*OO)X)Qi)])Qi~O]&cO!V&bO!O#Qq!T#Qq!h#Qq#v#Qq)W#Qq)j#QqQ#Qq!d#Qq(v#Qq~O!OqiQqi!dqi!hqi)Xqi)Wqi~P#IkO]&cO!V+kO!OqiQqi!dqi!hqi)Xqi)Wqi~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'Tq)W'Tq!g'Tq)j'Tq!O'Tq!W'Tq(v'Tq!U'TqQ'Tq!d'Tq~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W'|a!h'|a~P#3zO!W5XO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h5YO(u#gO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O!U)rX~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h#{i)W#{i~P#3zO]*vO!T$WO!V&bO)j*rO!h(Va)W(Va~O!h1fO]'dX!O)dX~P%2xO)X5[O!T%qa!h%qa#v%qa)j%qa~O!h0sO!T)za#v)za)j)za~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W5_O)X#|O~P#3zO]1SOd!POl;[O!V1QO!{!dO%v$mO(r$xO)S;xO)U5aO)V5aO~OQ#Pa!d#Pa!h#Pa!O#Pa~P(DjO]1SOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V1QO!{!dO!|%RO%v$mO(r$xOQ#kX!d#kX!h#kX!O#kX~Ol%bO)S0zO)U;yO)V;yO~P(ElO]&cOQ#Pa!d#Pa!h#Pa!O#Pa~O!V&bO)j5eO~P(GZO(r%nOQ#dX!d#dX!h#dX!O#dX~O)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P' dO!V+kO~P(GZO]1SOa!TOd!POl;]O{#RO!V1QO!{!dO#a#VO#b#TO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO(r;QO)PYO)S;xO)U5aO)V5aO)X+nO!O)dP~P&?sO!h1TOQ)la!d)la~Op&fO)j5jOQ#`al(}X!d#`a!h#`a)X(}X~P$GQO(r-UOQ#ga!d#ga!h#ga~Op&fO)j5jOQ#`a])^Xd)^Xl)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!d#`a!h#`a!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)X)^X~O#a5mO#b5mO~O]&cO!V+kO!O#ki!T#ki#v#ki)W#ki)j#kiQ#ki!d#ki!h#ki)X#ki!x#ki(v#ki~O!W5oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W5oO~P!(zO!W5oO)S5qO~P$%pO]#ji!T#ji!V#ji!O#ji#v#ji)W#ji)j#jiQ#ji!d#ji!h#ji)X#ji!x#ji(v#ji~P$ xO)PYO)X5sO~P8zO!h1fO!O)da~O&r#WO&s$wO!T#qa!x#qa#v#qa(v#qa)j#qa!O#qa!h#qa)W#qaQ#qa!d#qa)X#qa~P#NeO!O5xO~P!(zO!O)oP~P!4xO)T6OO)U5|O]#Ua!T#Ua!V#Ua)S#Ua)V#Uar#Uas#Uat#Uau#Uav#Uaw#Uax#Uay#Ua!l#Ua!x#Ua#T#Ua#V#Ua#p#Ua#v#Ua(v#Ua(x#Ua)j#Uaa#Uad#Ual#Ua{#Ua}#Ua!o#Ua!r#Ua!s#Ua!t#Ua!u#Ua!v#Ua!{#Ua#a#Ua#b#Ua#i#Ua#t#Ua${#Ua%c#Ua%e#Ua%k#Ua%l#Ua%o#Ua%v#Ua&m#Ua&r#Ua&s#Ua(r#Ua)P#Ua)W#Ua!O#Ua!h#UaQ#Ua!d#Ua~O!x!cO]#Rq!T#Rq!V#Rq#v#Rq(v#Rq)j#Rq!O#Rq!h#Rq)W#RqQ#Rq!d#Rq~O!W6TO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W6TO~P!(zO!h1|OQ(za!d(za~O)W6YO~Ol-eO!TxO)j6ZO~O]*vO!T$WO!V&bO!h*tO)W)qX~O)j6_O~P)+cO!O6aO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O6aO~O$c6cOP$_q]$_qa$_qd$_ql$_qr$_qs$_qt$_qu$_qv$_qw$_qx$_qy$_q{$_q}$_q!T$_q!V$_q!X$_q!Y$_q!i$_q!o$_q!r$_q!s$_q!t$_q!u$_q!v$_q!x$_q!{$_q#V$_q#a$_q#b$_q#i$_q#p$_q#t$_q#v$_q$R$_q$T$_q$Y$_q$Z$_q$`$_q$e$_q$g$_q$h$_q$k$_q$m$_q$o$_q$q$_q$s$_q$u$_q$w$_q${$_q$}$_q%U$_q%_$_q%`$_q%a$_q%c$_q%e$_q%g$_q%l$_q%o$_q%v$_q%|$_q&m$_q&r$_q&s$_q'Q$_q'R$_q'V$_q'Y$_q'a$_q'b$_q(k$_q(o$_q(r$_q)P$_q)S$_q)U$_q)V$_q)W$_q)X$_q)Y$_q)h$_q)i$_q!U$_q~O)W6dO~OPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W6fO)X!ZO)YXO)hcO)idO~P&?sO(v6hO)j*rO~P)+cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W6fO)X#|O~P#3zO!O6jO~P!(zO)W6nO~O)W6oO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO(r-UO)S-VO~O]&cO!V2uO!h%Oa)W%Oa!O%Oa~O!W6uO)S6vO~P$%pO!h2vO)W)ua~O]&cO!O6yO!V2uO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xq!o$Xq!{$Xq#i$Xq#p$Xq#t$Xq#v$Xq$R$Xq$T$Xq$Y$Xq$Z$Xq${$Xq%U$Xq%c$Xq%g$Xq%o$Xq%|$Xq(k$Xq)U$Xq!U$Xq$c$Xq~P$0kOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)PYO)S$kO)V$kO)W6{O)X!ZO)YXO)hcO)idO~P&?sO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W7OO)X#|O~P#3zO)W7PO~OP7QO(oQO~Ol*[O)W)^X~P$GQOp&fOl(}X)W)^X~P$GQO)W7SO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&Sa~P#3zO!U7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO)W7VO~OPmO]$eOa!]Ol:|O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O)dP~P&?sO!h3pO)X7ZO!T)_a~O!h3pO!T)_a~O)W7`O)j7bO~P(&eO)W7dO~PGVO]3zOl({Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~O)S7hO~O]&cO!T*qO!V7jO!h7kO#v!eO(v4OO~O)W7`O)j7mO~P)FwO]3zOl({O!{!dO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~Op&fO])cX!T)cX!V)cX!h)cX#v)cX(v)cX)W)cX)j)cX!O)cX~O)W7`O~O!T(QO!l7sO(v(PO])Oid)Oil)Oir)Ois)Oit)Oiu)Oiv)Oiw)Oix)Oiy)Oi})Oi!V)Oi!r)Oi!s)Oi!t)Oi!u)Oi!v)Oi!x)Oi!{)Oi%v)Oi&r)Oi&s)Oi(r)Oi)S)Oi)U)Oi)V)Oi)W)Oi!O)Oi!X)Oi!Y)Oi![)Oi!^)Oi!_)Oi!a)Oi!b)Oi!c)Oi!e)Oi!f)Oi!h)Oi(u)Oi(w)Oi(x)Oi)T)Oi)X)Oi!g)Oi)j)Oi!W)OiQ)Oi!d)Oi!U)Oi#v)Oi~O(r%nO!U(fX!h(fX~O!h4XO!U*Qa~Op&fO]*Pad*Pal*Par*Pas*Pat*Pau*Pav*Paw*Pax*Pay*Pa}*Pa!T*Pa!V*Pa!r*Pa!s*Pa!t*Pa!u*Pa!v*Pa!x*Pa!{*Pa%v*Pa&r*Pa&s*Pa(r*Pa)S*Pa)U*Pa)V*Pa)W*Pa!O*Pa!X*Pa!Y*Pa![*Pa!^*Pa!_*Pa!a*Pa!b*Pa!c*Pa!e*Pa!f*Pa!h*Pa(u*Pa(w*Pa(x*Pa)T*Pa)X*Pa!g*Pa)j*Pa!W*PaQ*Pa!d*Pa(v*Pa!U*Pa#v*Pa~O!T(ZO]&kqd&kql&kqr&kqs&kqt&kqu&kqv&kqw&kqx&kqy&kq}&kq!V&kq!r&kq!s&kq!t&kq!u&kq!v&kq!x&kq!{&kq%v&kq&r&kq&s&kq(r&kq)S&kq)U&kq)V&kq)W&kq!O&kq!X&kq!Y&kq![&kq!^&kq!_&kq!a&kq!b&kq!c&kq!e&kq!f&kq!h&kq(u&kq(w&kq(x&kq)T&kq)X&kq!g&kq)j&kq!W&kqQ&kq!d&kq(v&kq!U&kq#v&kq~OPmOa%QOl:zO!T$WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO~O]*Ui!V*Ui!X*Ui!Y*Ui![*Ui!^*Ui!_*Ui!a*Ui!b*Ui!c*Ui!e*Ui!f*Ui!h*Ui(u*Ui(w*Ui(x*Ui)S*Ui)T*Ui)U*Ui)V*Ui)W*Ui)X*Ui!g*Ui)j*Ui!O*Ui!W*Ui(v*Ui!U*UiQ*Ui!d*Ui~P*&WO!O7xO~O!W7yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^q)W'^q!g'^q)j'^q!O'^q!W'^q(v'^q!U'^qQ'^q!d'^q~P#3zO!h7zO!O*YX~O!O7|O~O*W7}O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h^y)W^y!g^y)j^y!O^y!W^y(v^y!U^yQ^y!d^y~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(ha!h(ha~P#3zO]#}O!T$WO!V'Zy!X'Zy!Y'Zy!['Zy!^'Zy!_'Zy!a'Zy!b'Zy!c'Zy!e'Zy!f'Zy!h'Zy(u'Zy(w'Zy(x'Zy)S'Zy)T'Zy)U'Zy)V'Zy)W'Zy)X'Zy!g'Zy)j'Zy!O'Zy!W'Zy(v'Zy!U'ZyQ'Zy!d'Zy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^y)W'^y!g'^y)j'^y!O'^y!W'^y(v'^y!U'^yQ'^y!d'^y~P#3zO]&cO!V+kO!T%uy#v%uy)W%uy)j%uy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua!h(Ua~P#3zO!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U#}i!h#}i~P#3zO!U8PO~P&6yO!W8PO~P&6yO!O8PO~P&6yO!O8RO~P&6yO]&cO!V&bO!O#Qy!T#Qy!h#Qy#v#Qy)W#Qy)j#QyQ#Qy!d#Qy(v#Qy~O]&cO!V+kO!OqqQqq!dqq!hqq)Xqq)Wqq~O]&cOQ#Pi!d#Pi!h#Pi!O#Pi~O!V+kO~P*9jOQ#nX!d#nX!h#nX!O#nX~P(DjO!V&bO~P*9jOQ(OX](OXd'qXl'qXr(OXs(OXt(OXu(OXv(OXw(OXx(OXy(OX!V(OX!d(OX!h(OX!{'qX%v'qX(r'qX)S(OX)U(OX)V(OX!O(OX~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_i!d#_i!h#_i!O#_i~P#3zO&r#WO&s$wOQ#fi!d#fi!h#fi~O(r-UO)X1YO)j1XOQ#`X!d#`X!h#`X~O!W8WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8WO~P!(zO!T#qi!x#qi#v#qi(v#qi)j#qi!O#qi!h#qi)W#qiQ#qi!d#qi)X#qi~O]&cO!V+kO~P*?fO]&YO!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~P*?fO!O8YO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!h8ZO!O)oX~O!O8]O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*TX!d*TX!h*TX~P#3zO)X8`OQ*SX!d*SX!h*SX~O)W8bO~O!O$bi!h#{a)W#{a~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W8eO)X#|O~P#3zO!O8gO~P!(zO!O8gO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O8gO~O]&cO!V&bO(v8mO~O)W8nO~O]&cO!V2uO!h%Oi)W%Oi!O%Oi~O!W8qO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8qO)S8sO~P$%pO!W8qO~P!(zO]&cO!V2uO!h(Ya)W(Ya~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W8tO)X#|O~P#3zO)W2iO~P!(zO)W8tO~OP%oO!O8uO(oQO~O!O8uO~O)W8vO~P%%eO#T8yO(x.PO)W8wO~O!h3pO!T)_i~O)X8}O!T'wa!h'wa~O)W9PO)j9RO~P)FwO)W9PO~O)W9PO)j9VO~P(&eOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P)GgO]&cO!V7jO!T!ya!h!ya#v!ya(v!ya)W!ya)j!ya!O!ya~O!W9^O)S9_O~P$%pO!T$WO!h7kO(v4OO)W9PO)j9VO~O!T$WO~P#EfO]&cO!O9bO!V7jO~O]&cO!V7jO!T&aa!h&aa#v&aa(v&aa)W&aa)j&aa!O&aa~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&ba~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9PO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U&oi!h&oi~P#3zO!V.}O]']i!T']i!X']i!Y']i![']i!^']i!_']i!a']i!b']i!c']i!e']i!f']i!h']i(u']i(w']i(x']i)S']i)T']i)U']i)V']i)W']i)X']i!g']i)j']i!O']i!W']i(v']i!U']iQ']i!d']i~O(r%nO)X9eO~O!h7zO!O*Ya~O!O9gO~P&6yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua)W#Zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_q!d#_q!h#_q!O#_q~P#3zO&r#WO&s$wOQ#fq!d#fq!h#fq~O)j5jOQ#`a!d#`a!h#`a~O]&cO!V+kO!T#qq!x#qq#v#qq(v#qq)j#qq!O#qq!h#qq)W#qqQ#qq!d#qq)X#qq~O!h8ZO!O)oa~O)U5|O]&Vi!T&Vi!V&Vi)S&Vi)T&Vi)V&Vir&Vis&Vit&Viu&Viv&Viw&Vix&Viy&Vi!l&Vi!x&Vi#T&Vi#V&Vi#p&Vi#v&Vi(v&Vi(x&Vi)j&Via&Vid&Vil&Vi{&Vi}&Vi!o&Vi!r&Vi!s&Vi!t&Vi!u&Vi!v&Vi!{&Vi#a&Vi#b&Vi#i&Vi#t&Vi${&Vi%c&Vi%e&Vi%k&Vi%l&Vi%o&Vi%v&Vi&m&Vi&r&Vi&s&Vi(r&Vi)P&Vi)W&Vi!O&Vi!h&ViQ&Vi!d&Vi~O)W9jO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O$bq!h#{i)W#{i~P#3zO!O9lO~P!(zO!O9lO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9lO~O]&cO!V&bO(v9oO~O!O9pO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9pO~O]&cO!V2uO!h%Oq)W%Oq!O%Oq~O!W9tO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W9tO~P!(zO)W6fO~P!(zO)W9uO~O)W9vO~O(x.PO)W9vO~O!h3pO!T)_q~O)X9xO!T'wi!h'wi~O!T$WO!h7kO(v4OO)W9yO)j9{O~O)W9yO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9yO)X#|O~P#3zO)W9yO)j:OO~P)FwO]&cO!V7jO!T!yi!h!yi#v!yi(v!yi)W!yi)j!yi!O!yi~O!W:SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:SO)S:UO~P$%pO!W:SO~P!(zO]&cO!V7jO!T(da!h(da(v(da)W(da)j(da~O!O:WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:WO~O!O:]O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:]O~O]&cO!V2uO!h%Oy)W%Oy!O%Oy~O)W:^O~O)W:_O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:_O)X#|O~P#3zO!T$WO!h7kO(v4OO)W:_O)j:bO~O]&cO!V7jO!T!yq!h!yq#v!yq(v!yq)W!yq)j!yq!O!yq~O!W:dO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:dO~P!(zO!O:fO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:fO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:hO)X#|O~P#3zO)W:hO~O]&cO!V7jO!T!yy!h!yy#v!yy(v!yy)W!yy)j!yy!O!yy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:lO)X#|O~P#3zO)W:lO~O]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(v$]X(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX~O]%WXlmXpnXp%WX!TnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX!O%WXQ%WX!d%WX~O)W%WX!W%WX(v%WX!U%WX~P+GrO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!OnX!O%WX!hnX)XnX~O)WnX)jnX~P+JSO]%WXlmXpnXp%WX!V%WX!h%WXQ%WX!d%WX!O%WX~O!T%WX#v%WX)W%WX)j%WX(v%WX~P+LmOQnXQ%WX!TnX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!dnX!d%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX~P+JSO]nX]%WXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX~O!TnX(vnX)WnX)jnX~P, eOdnX!VnX)W%WX~P, eOlmXpnX)W%WX~Od)oO%Y)pO(y:oO~Od)oO%Y)pO(y:tO~Od)oO%Y)pO(y:pO~Od$RO%Y*TO'[$TO'_$UO(y:oO~Od$RO%Y*TO'[$TO'_$UO(y:qO~Od$RO%Y*TO'[$TO'_$UO(y:sO~O]iXriXsiXtiXuiXviXwiXxiXyiX!OiX!ViX&riX&siX)SiX)UiX)ViXdiX}iX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX~P#1jO]ZXlgXpZXpiX!VZX!hZX)WZX)jZX~O!TZX#vZX(vZX~P,'{OlgXpiX)PiX)WZX)jiX~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!OZX!OiX!hiX)XiX)jiX~O)WZX~P,)VO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!hiX&riX&siX(uZX(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)XZX)XiX)jZX~OQZXQiX!dZX!diX~P,+pO]iXdiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~P#1jO]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~O)WiX~P,0rOdiX}iX!OZX!OiX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX)jiX~P,+pO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(viX)SiX)UiX)ViX)WiX)jiX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PBUOd$RO%Y*TO(y:oO~Od$RO%Y*TO(y:pO~Od$RO%Y*TO(y:vO~Od$RO%Y*TO(y:uO~O]%hOd!POl%bOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!{!dO!|%RO%v$mO(r$xO)S;aO)U;bO)V;bO~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r$xO)S;aO)U;bO)V;bO~Od$RO%Y$SO(y:pO~Od$RO%Y$SO(y:tO~Ol:yO~Ol:xO~O]cXlgXpiX!TcX~Od)oO%Y*TO(y:oO~Od)oO%Y*TO(y:pO~Od)oO%Y*TO(y:qO~Od)oO%Y*TO(y:rO~Od)oO%Y*TO(y:sO~Od)oO%Y*TO(y:uO~Od)oO%Y*TO(y:vO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P,9OO](}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)j(}X~Ol:xO!T(}X(v(}X)W(}X~P,<}O]&wXlmXpnX!T&wX~Od4kO%Y*TO(y;tO~Ol;[O)S;xO)U5aO)V5aO~P(ElOd!POl%bO!{!dO%v$mO(r$xO~O]1SO!V1QO)S0zO)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P,?yO)S;YO~Ol;hO~Ol;iO~Ol;jO~Ol;lO~Ol;mO~Ol;nO~Ol;lO!T$WOQ(}X!d(}X!h(}X)X(}X!O(}X)j(}X~P$GQOl;jO!T$WO~P$GQOl;hO!g$YO)j$YO~Ol;jO!g$YO)j$YO~Ol;lO!g$YO)j$YO~Ol;iO!O(}X!h(}X)X(}X)j(}X~P$GQOd/^O%Y*TO(y;tO~Ol;uO~O)S<YO~OV'e'h'i'g(o)Y!R(rST%Z!Y!['jd%[!i'R!f]'f*Z'k(w!^!_'l'm'l~",goto:"%5]*ZPPPPPP*[P*_PP.T4iP7j7j:tP:t>OP>i>{?aFXMX!&]!,sP!3m!4b!5VP!5qPPPPPPPP!6[P!7tPP!9V!:oP!:uPPPPPP!:xP!:xPP!:xPPPPPPPPP!;U!>lP!>oPP!?]!@QPPPPP!@UP>l!AgPP>l!Cn!Eo!E}!Gd!ITP!I`P!Io!Io!MP#!`##v#'S#*^!Eo#*hPP!Eo#*o#*u#*h#*h#*xP#*|#+k#+k#+k#+k!ITP#,U#,g#.|P#/bP#0}P#1R#1Z#2O#2Z#4i#4q#4q#1RP#1RP#4x#5OP#5YPP#5u#6d#7U#5uP#7v#8SP#5uP#5uPP#5u#5uP#5uP#5uP#5uP#5uP#5uP#5uP#8V#5Y#8sP#9YP#9o#9o#9o#9o#9|#1RP#:d#?`#?}PPPPPPPP#@uP#ATP#ATP#Aa#Dn#9OPP#@}#EQP#Ee#Ep#Ev#Ev#@}#FlP#1R#1R#1R#1R#1RP!Io#GW#G_#G_#G_#Gc!Ly#Gm!Ly#Gq!E}!E}!E}#Gt#L^!E}>l>l>l$#V!@Q!@Q!@Q!@Q!@Q!@Q!6[!6[!6[$#jP$%V$%e!6[$%kPP!6[$'y$'|#@l$(P:t7j$+V$-Q$.q$0a7jPP7j$2T7jP7j7jP7jP$5Z7jP7jPP7j$5gPPPPPPPPP*[P$8o$8u$;^$=d$=j$>Q$>[$>g$>v$>|$@[$AZ$Ab$Ai$Ao$Aw$BR$BX$Bd$Bj$Bs$B{$CW$C^$Ch$Cn$Cx$DP$D`$Df$DlP$Dr$Dz$ER$Ea$F}$GT$GZ$Gb$GkPPPPPPPP$Gq$GuPPPPP$Nw$'y$Nz%$S%&[P%&i%&lPPPPPPPPPP%&x%'{%(R%(V%)|%+Z%+|%,T%.d%.jPPP%.t%/P%/S%/Y%0a%0d%0n%0x%0|%2Q%2s%2y#@uP%3d%3t%3w%4X%4e%4i%4o%4u$'y$'|$'|%4x%4{P%5V%5YR#cP'`mO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fU%om%p7QQ&m!`Q(j#]d0P)}/|/}0O0R4}5O5P5S8QR7Q3Tb}Oaewx{!g&S*q&v$i[!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0{1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fS%`f0h#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YS%qm!YS&u!h#PQ']!tQ'g!yQ'h!zQ(j#`Q(k#]Q(l#^Q*x%kQ,W&lQ,]&nQ-S'^Q-d'fQ-k'qS.r(Z4XQ/f)gQ0e*mQ2Q,[Q2X,cQ3O-eQ4b.|Q4f/TQ5f0}Q6[2TQ6}3PQ8a6ZQ9e7zR;Z1Q$|#hS!]$y%Q%T%Z&j&k'Q'X'Z'a'c(a(e(h(w(x)R)S)T)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:iQ&p!dQ(g#ZQ(s#bQ)j$T[*s%e*W0k2`2g2{Q,^&oQ/O(fQ/S(kQ/Z(tS/i)i/PQ0r+QS4q/j/kR8O4r'a![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f'a!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ)O#kS+Q%y0sQ/r)sk3}.g3s3w3z3{7c7e7f7h7k9X9Y:RQ)Q#kk3|.g3s3w3z3{7c7e7f7h7k9X9Y:Rl)P#k.g3s3w3z3{7c7e7f7h7k9X9Y:RT+Q%y0s[UOwx!g&S*qW$`[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.o&|;{af{|!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k$|$}%S%]%h%m&Q&W&b&y&|'O'i'j'u'y(`(i)l)r*`*b*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0]0h0y0{1Q1a1b1l1p1z2c2i2j2u4O4R4W4a5Y5a5e5q6_6c6f6g6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f;`;xQ;|1Sd;}&x'P'b,w-]-^-a2f2z2}W<O&f*v1|3iQ<P#O[<Q!t'^'f,[2T6ZT<]%y0s[VOwx!g&S*qW$a[e$e(bQ$p.u!j$q_!f!u!}#V#Z$S$T$l%U&U&Y&c&m'_(g)j)p+[+a+t,X,k,z-Q-o.d1T1X1f1k1m2l3t5j8Z&^$zaf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fQ'r#O|'|#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[l(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS-n't-wQ3W-tU;s(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;x[<Q!t'^'f,[2T6ZW<R&f*v1|3id<S&x'P'b,w-]-^-a2f2z2}Q<Z1ST<]%y0s!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!v$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$Q%lgnp|#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ'[!tz(O#R#S#T#U'}(P(U(^+y.W.X._.`.q3[3]3^3p5}6P7[f-Z'`-T-V-Y2p2q2s2v6q6r8pQ1W+aQ1Z+bQ2k,yQ3X-tQ4[.uQ5l1YR8V5m!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!x$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+a+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$S%lgnp|!t#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y|(O#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[Q3X-tR4[.u[WOwx!g&S*qW$b[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;xQ;|1SQ<P#O[<Q!t'^'f,[2T6Z&^<Taf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fd<U&x'P'b,w-]-^-a2f2z2}W<V&f*v1|3iT<]%y0sp$PT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)m$V*U*[/_:w:x:y;h;i;j;k;l;m;n;up$QT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)n$V*U*[/_:w:x:y;h;i;j;k;l;m;n;u^&e}!O$i$j%`%j;Zd&i!U$t%P%l'[(O1W1Z3X4[V/a)O)P3}S%Ye$eQ,T&fQ.{(bQ2m-QQ5y1mQ6V1|Q6m2lR9h8Z#}!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Z#[^O[_`wx!f!g!}#O$S$d$l$s$u&S&U&Y&c&m&r&x'P'b't(Q)p*]*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3t_(U#R#S#T+b3[3]3^#}ZO[wx!g!k#R#S#T%m&S&U&Y&c&m&w&x&y&|'O'P'['b't'x'}(P(Q(U*q*v+[+b,X,h,k,q-P-]-^-a-o-t-w-z._.d.m.q1S1T1f2c2k2z2}3[3]3^3i6c6j8g9l9p:W:]:fQ$]YR0T*OR*Q$]e0P)}/|/}0O0R4}5O5P5S8Q'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fe0P)}/|/}0O0R4}5O5P5S8QR5T0T^(T#R#S#T+b3[3]3^Y.]'}(R(U(V7TU3k.Z.^.qS7X3l4VR9c7s^(S#R#S#T+b3[3]3^[.['}(R(T(U(V7TW3j.Z.].^.qU7W3k3l4VS8z7X7sR:V9cT.k(Q.md]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tQ%tnT1u+}1v!jbOaenpwx{|!g#O$|$}%S%h%w&S't'u(Q*`*b*q-p-w.f.m.o0]0y1S2j5a6g;`;xf-W'`-T-V-Y2p2q2s2v6q6r8pj3x.g3s3w3z3{7c7e7f7h7k9X9Y:Rr;zg$g%d%i&s*Y*t,l,v-_2_;W;X;Y;o;q;vi<^+]0z1O;a;b;p;r;w;y<W<X<Y!O&^y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yz&az%O%W%e&d's*W*_,b-x0Z0[0k0|2`2g2{5V5b6l8iS'{#Q.Xn+l&X*g+f+m+p-j/h0_1R1^4t5W5`5u8XQ2W,a^2t-X2r2x6p6w8o9se7i3y7_7g7o7p9U9W9`:Q:cS+^&U1TY+n&Y&c*v1S3iR5s1f#w!POaegnpwx{|!g#O$g$|$}%S%d%h%i%w&S&s't'u(Q*Y*`*b*q*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y`oOwx!g&S't*q-w#U!Paeg{|#O$g$|$}%S%d%h%i&s'u*Y*`*b*t+],l,v-_0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YU%vnp-pQ*}%wS.e(Q.mT3v.f.oW+r&^+l+s1cV+z&a+{7iQ+x&`U+z&a+{7iQ-w'tT.S'y.U'`![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'W!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fW1r+y.X5}6PR2e,s!WjO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fY%Ve$e(b1p3iQ'S!nS(y#i5YQ,m&xQ,x'PS.O'y.UQ2b,nQ6k2iQ6|2}Q8h6fR9m8e'W![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'ayO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k+y,P,R,n,q,w-]-^-a-g.P.Q.U.X.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q5}6P6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ&`yS't#O-uR1[+cS+^&U1TR5n1[Q1P+]R5g1OR1P+]T+^&U1Tz&[%X&V&Y&Z'k)h*d*f+]+e/m0^0y0z1O1S1j5a5v;x;yQ&]yR1n+x!P&[y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yQ+u&^S+|&a7iS1d+l+sQ1t+{R5r1c!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fS%zo.eS&Oq-rQ&_yQ&q!eQ'e!yQ*p%eU*{%v%{3vS+P%x%}Q+q&]Q,Y&mS,Z&n'gQ,r&{S0X*W,bS0o*|*}Q0q+OQ1o+xS2S,]-fQ5U0ZQ5Z0pQ5{1nQ6Y2RQ6]2WQ7n3yQ9S7_R:P9U[uOwx!g&S*qQ,Y&mQ-v'tQ3Y-tR3_-wxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^S%zo.eS&Oq-rQ*p%eU*{%v%{3vS+P%x%}S0X*W,bS0o*|*}Q0q+OQ5U0ZQ5Z0pQ7n3yQ9S7_R:P9UT,_&q,`]uOwx!g&S*q[uOwx!g&S*qQ,Y&mQ,n&xQ,w'PW-`'b-]-a2zQ-v'tQ3Y-tQ3_-wR6{2}[%fg$g,l,v-_2_R0l*t^$XV!U$a$z%P<R<SQ'S!nS)`#}*vS)v$W*qQ)y$YY*s%e*W0k2g2{Q/O(fS/i)i/PS0a*h4aS0j*r6_Q0r+QQ4Q.gQ4n/cS4q/j/kS4v/n5YQ4{/uQ6`2`U7a3s3y4RQ8O4rQ8k6hY9Q7_7b7c7l7mQ9r8mW9z9O9R9U9VQ:Z9oU:a9{9}:OR:j:bS)v$W*qT4v/n5YZ)t$W)u*q/n5YQ&w!hR'x#PS,g&v'vQ2[,eR6^2ZxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fV$h[&|-^!XkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:f!WhO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR'W!q!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR,n&xQ&y!iQ&{!jQ'O!lR,q&zR,o&xxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fX-`'b-]-a2z[uOwx!g&S*qQ,z'PQ-v'tS.k(Q.mR3_-w[uOwx!g&S*qQ,z'PW-`'b-]-a2zT.k(Q.mg-Z'`-T-V-Y2p2q2s2v6q6r8pylOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fb!OOaewx{!g&S*q&|$j[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ']!tQ-S'^Q-d'fQ2Q,[Q6[2TR8a6Zj$RT$_%b%r:z:{:|;[;];^;_;c;di)o$V*U:w:x:y;h;i;j;k;l;m;nj$RT$_%b%r:z:{:|;[;];^;_;c;dh)o$V*U:w:x:y;h;i;j;k;l;m;nS/^({<[V4k/_/`;u[uOwx!g&S*qQ-v'tR3_-w[uOwx!g&S*qT.k(Q.m'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fR7R3T[uOwx!g&S*qQ-v'tS.k(Q.mR3_-w[pOwx!g&S*qQ%wnS-p't-wT.f(Q.mS%{o.eS*|%v3vR0p*}Q+R%yR5]0sS%zo.eS&Oq-rU*{%v%{3vS+P%x%}S0o*|*}Q0q+OQ5Z0pQ7n3yQ9S7_R:P9U`qOwx!g&S(Q*q.mS%xn-pU%}p.f.oQ+O%wT-r't-wS'z#Q.XR.Y'{T.R'y.US.S'y.UQ8x7UR9w8yT5}1q8_R6P1q#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&}![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&|![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fk3|.g3s3w3z3{7c7e7f7h7k9X9Y:RQ4Q.gS7a3s3yU9Q7_7c7lS9z9O9UR:a9}#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR4].uQ(]#US.v([(^S4^.w.xR7w4_Q.s(ZR7u4X#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Zp$w`$d$s%X&r'`(_(f)i*d-T/k1j5k5v8Uq(}#k%y.g0s3s3w3z3{7c7e7f7h7k9X9Y:RR,U&fR6W1|'X!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$q#rS%T%Z'Q'X'Z'a'c(a(e(h(w(x)R)S)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$]#sS%T%Z'Q'X'Z'a'c(h(w(x)R)V)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$Z#tS%T%Z'Q'X'Z'a'c(h(w(x)R)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$c#wS%T%Z'Q'X'Z'a'c(h(w(x)R)U)V)W)X)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i'X![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ/P(fQ/j)iQ4r/kR9d7y']![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ#eQR(u#eU$|a;`;xb%Ue$e&f(b-Q1m1|2l8ZQ'_!u!Q*^$|%U'_*`*f+h,P0]0^1b2p6q6t7e8p9X9]:R;W;o;p;v;w<WS*`$}%SQ*f%XS+h&W1QQ,P&bQ0]*bQ0^*dQ1b+kQ2p-VS6q2q2sQ6t2uQ7e3wQ8p6rS9X7f7hQ9]7jQ:R9YQ;W%dS;o;X;YS;p<X<YQ;v;qQ;w;rT<W0z;a[[Owx!g&S*ql$c[&|'}+[,X,h,k-P-^-o-z._.d.ql&|!k%m&y'O,q2c6c6j8g9l9p:W:]:f^'}#R#S#T+b3[3]3^`+[&U&Y&c*v1S1T1f3iS,X&m-tQ,h&wU,k&x'P2}S-P'[2kW-^'b-]-a2zS-o't-wQ-z'xQ._(PS.d(Q.mR.q(UQ)|$[R/x)|Q0R)}Q4}/|Q5O/}Q5P0OY5Q0R4}5O5P8QR8Q5SQ*P$]S0U*P0VR0V*QS.`(P._S3n.`7[R7[3pQ3q.aS7Y3o3rU7^3q7Y8{R8{7ZQ.m(QR4S.m!|_O[wx!f!g!}#O$S$l&S&U&Y&c&m&x'P'b't(Q)p*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3tU$r_$u*]U$u`$d&rR*]$sU$}a;`;xd*a$}*b2q6r7f9Y;X;q;r<XQ*b%SQ2q-VQ6r2sQ7f3wQ9Y7hQ;X%dQ;q;YQ;r<YT<X0z;aS+{&a7iR1s+{S*j%Z/pR0c*jQ1U+_R5i1UU+e&V0z;xR1]+eQ+s&^Q1c+lT1i+s1cQ8[5yR9i8[QwOS&Rw&ST&Sx*qQ,`&qR2V,`W)u$W*q/n5YR/t)uU/o)q)v0gR4w/o[*u%e%f*W2`2g2{R0m*uQ,d&uR2Y,dQ-a'bQ2z-]T2|-a2zQ2w-XR6x2wQ-f'gQ2R,]T3Q-f2RS%pm7QR*z%pdnOwx!g&S't(Q*q-w.mR%unQ0t+RR5^0tQ.U'yR3f.UQ1v+}R6Q1vU*n%`*x;ZR0f*nS1g+n0nR5t1gQ7l3yQ9O7_U9a7l9O9}R9}9U$O!SO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o.u1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR&g!SQ4Y.sR7v4YQ1},UR6X1}S/d)_)`R4o/dW(o#a(j(k/SR/W(oQ7{4fR9f7{T)a#}*v!USO[wx!g!k%m&S&y&|'O'b,q-]-^-a2c2z6c6j8g9l9p:W:]:fj$ya{$k%]+j,R1a1z5q6v8s9_:UY%Te$e(b1p3iY%Zf$f(i)l*lQ&j!WQ&k!XQ'Q!nQ'X!rQ'Z!sQ'a!vQ'c!xQ(a#XQ(e#YS(h#[+YQ(w#gQ(x#iQ)R#lQ)S#qQ)T#rQ)U#sQ)V#tQ)W#uQ)X#vQ)Y#wQ)Z#xQ)[#yQ)]#zQ)^#{S)_#}*vQ)k$UQ)q$WQ)x$YQ+X&QS+g&W1QQ,O&bQ,S&fQ,j&xQ,u'PQ-h'iQ-i'jS-|'y.UQ.y(`S/p)r0hS0`*h4aQ0b*iQ0g*qQ0i*rQ0w+WS1`+h+kQ1y,PQ2a,nS2h,w6{Q3R-gQ3c.PQ3d.QQ4c.}Q4d/QQ4j/[Q4m/cQ4s/lQ4u/nQ4y/sQ4z/uQ5d0{Q5p1bQ5w1lQ6U1|S6e2f8tQ6i2iQ6s2uQ6z2}Q7q4OQ7r4RQ7t4WQ8S5YQ8T5eQ8c6_Q8f6fQ8j6hQ8r6tS9T7b7mQ9[7jQ9k8eQ9q8mS9|9R9VQ:T9]Q:Y9oS:`9{:OR:i:bR,V&fd]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3t#r${ae!u$e$|$}%S%U%X%d&W&b&f'_(b*`*b*d*f+h+k,P-Q-V0]0^1Q1b1m1|2l2p2q2s2u3w6q6r6t7e7f7h7j8Z8p9X9Y9]:R;W;X;Y;`;a;o;p;q;r;v;w<W<X<YQ%tnS+d&V+eW+r&^+l+s1cU+z&a+{7iQ1k+tT5c0z;x``Owx!g&S't*q-wS$d[-oQ$s_b%Xe$e&f(b-Q1m1|2l8Z!h&r!f!}#O$S$l&U&Y&c&m&x'P'b(Q)p*v+[,X,k,w,z-]-^-a-t.d.m.o1S1T1f2f2z2}3i3tQ'`!uS(_#V+aQ(f#ZS)i$T(gQ*d%UQ-T'_Q/k)jQ1j+tQ5k1XQ5v1kR8U5jS(W#R3]S(X#S3^V(Y#T+b3[R$^Ye0Q)}/|/}0O0R4}5O5P5S8QW(R#R#S#T+bQ([#US.Z'}(US.a(P._Q.x(^W1r+y.X5}6PQ3Z-tQ3h.WQ3o.`Q4V.qU7T3[3]3^Q7]3pR8|7[Q.b(PR3m._T.l(Q.mdgOwx!g&S&m't*q-t-wU$g[,X-oQ&s!fQ'k!}Q'u#OQ)h$SQ*Y$l`+]&U&Y&c*v1S1T1f3iQ,l&xQ,v'PY-_'b-]-a2z2}S.g(Q.mQ/m)pQ0y+[S2_,k-^S2j,w,zS3s.d.oQ6g2fR7c3td]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tR%tnQ3y.gQ7_3sQ7g3wQ7o3zQ7p3{Q9U7cU9W7e7f7hQ9`7kS:Q9X9YR:c:RZ+o&Y&c*v1S3ipzOnpwx!g%w&S't(Q*q-p-w.f.m.o[%Oa%d0z;`;a;xU%We%h1SQ%eg^&d{|%i1O5a;b;yQ's#OQ*W$gb*_$|$}%S;W;X;Y<W<X<YQ,b&sQ-x'uQ0Z*Y[0[*`*b;o;p;q;rQ0k*tQ0|+]Q2`,lQ2g,vS2{-_2_U5V0];v;wQ5b0yQ6l2jR8i6gQ+}&aR9Z7iS1q+y.XQ8^5}R8_6P[%^f$f(i)l)r0hR0d*lR+`&UQ+_&UR5h1TS&Xy+xQ*g%XU+f&V0z;xS+m&Y1SW+p&Z1O5a;yQ-j'kQ/h)hS0_*d*fQ1R+]Q1^+eQ4t/mQ5W0^Q5`0yQ5u1jR8X5vR5z1mYvOwx&S*qR&t!gW%gg,l,v-_T*X$g2_T)w$W*q[uOwx!g&S*qQ&}!kQ*y%mQ,p&yQ,t'OQ2d,qQ6b2cQ8d6cQ8l6jQ9n8gQ:X9lQ:[9pQ:e:WQ:g:]R:k:fxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^X-`'b-]-a2zQ-['`R2o-TS-X'`-TQ2r-VQ2x-YU6p2p2q2sQ6w2vS8o6q6rR9s8p[rOwx!g&S*qS-q't-wT.h(Q.mR+S%y[sOwx!g&S*qS-s't-wT.i(Q.m[tOwx!g&S*qT.j(Q.mT.T'y.UX%af%k0h1QQ.w([R4_.xR.t(ZR(d#XQ(r#aS/R(j(kR4e/SR/V(lR4g/T",nodeNames:" RawString > MacroName LineComment BlockComment PreprocDirective #include String EscapeSequence SystemLibString Identifier ArgumentList ( ConditionalExpression AssignmentExpression CallExpression PrimitiveType FieldExpression FieldIdentifier DestructorName TemplateMethod ScopedFieldIdentifier NamespaceIdentifier TemplateType TypeIdentifier ScopedTypeIdentifier ScopedNamespaceIdentifier :: NamespaceIdentifier TypeIdentifier TemplateArgumentList < TypeDescriptor const volatile restrict _Atomic mutable constexpr constinit consteval StructSpecifier struct MsDeclspecModifier __declspec ) Attribute AttributeName Identifier AttributeArgs { } [ ] UpdateOp ArithOp ArithOp ArithOp LogicOp BitOp BitOp BitOp CompareOp CompareOp CompareOp > CompareOp BitOp UpdateOp , Number CharLiteral AttributeArgs VirtualSpecifier BaseClassClause Access virtual FieldDeclarationList FieldDeclaration extern static register inline thread_local AttributeSpecifier __attribute__ PointerDeclarator MsBasedModifier __based MsPointerModifier FunctionDeclarator ParameterList ParameterDeclaration PointerDeclarator FunctionDeclarator Noexcept noexcept RequiresClause requires True False ParenthesizedExpression CommaExpression LambdaExpression LambdaCaptureSpecifier TemplateParameterList OptionalParameterDeclaration TypeParameterDeclaration typename class VariadicParameterDeclaration VariadicDeclarator ReferenceDeclarator OptionalTypeParameterDeclaration VariadicTypeParameterDeclaration TemplateTemplateParameterDeclaration template AbstractFunctionDeclarator AbstractPointerDeclarator AbstractArrayDeclarator AbstractParenthesizedDeclarator AbstractReferenceDeclarator ThrowSpecifier throw TrailingReturnType CompoundStatement FunctionDefinition MsCallModifier TryStatement try CatchClause catch LinkageSpecification Declaration InitDeclarator InitializerList InitializerPair SubscriptDesignator FieldDesignator ExportDeclaration export ImportDeclaration import ModuleName PartitionName HeaderName CaseStatement case default LabeledStatement StatementIdentifier ExpressionStatement IfStatement if ConditionClause Declaration else SwitchStatement switch DoStatement do while WhileStatement ForStatement for ReturnStatement return BreakStatement break ContinueStatement continue GotoStatement goto CoReturnStatement co_return CoYieldStatement co_yield AttributeStatement ForRangeLoop AliasDeclaration using TypeDefinition typedef PointerDeclarator FunctionDeclarator ArrayDeclarator ParenthesizedDeclarator ThrowStatement NamespaceDefinition namespace ScopedIdentifier Identifier OperatorName operator ArithOp BitOp CompareOp LogicOp new delete co_await ConceptDefinition concept UsingDeclaration enum StaticAssertDeclaration static_assert ConcatenatedString TemplateDeclaration FriendDeclaration friend union FunctionDefinition ExplicitFunctionSpecifier explicit FieldInitializerList FieldInitializer DefaultMethodClause DeleteMethodClause FunctionDefinition OperatorCast operator TemplateInstantiation FunctionDefinition FunctionDefinition Declaration ModuleDeclaration module RequiresExpression RequirementList SimpleRequirement TypeRequirement CompoundRequirement ReturnTypeRequirement ConstraintConjuction LogicOp ConstraintDisjunction LogicOp ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator TemplateFunction OperatorName StructuredBindingDeclarator ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator BitfieldClause FunctionDefinition FunctionDefinition Declaration FunctionDefinition Declaration AccessSpecifier UnionSpecifier ClassSpecifier EnumSpecifier SizedTypeSpecifier TypeSize EnumeratorList Enumerator DependentType Decltype decltype auto PlaceholderTypeSpecifier ParameterPackExpansion ParameterPackExpansion FieldIdentifier PointerExpression SubscriptExpression BinaryExpression ArithOp LogicOp LogicOp BitOp UnaryExpression LogicOp BitOp UpdateExpression CastExpression SizeofExpression sizeof CoAwaitExpression CompoundLiteralExpression NULL NewExpression new NewDeclarator DeleteExpression delete ParameterPackExpansion nullptr this UserDefinedLiteral ParamPack #define PreprocArg #if #ifdef #ifndef #else #endif #elif PreprocDirectiveName Macro Program",maxTerm:425,nodeProps:[["group",-35,1,8,11,14,15,16,18,71,72,100,101,102,104,191,208,229,242,243,270,271,272,277,280,281,282,284,285,286,287,290,292,293,294,295,296,"Expression",-13,17,24,25,26,42,255,256,257,258,262,263,265,266,"Type",-19,126,129,147,150,152,153,158,160,163,164,166,168,170,172,174,176,178,179,188,"Statement"],["isolate",-4,4,5,8,10,""]],propSources:[J3e],skippedNodes:[0,3,4,5,6,7,10,297,298,299,300,301,302,303,304,305,306,347,348],repeatNodeCount:41,tokenData:"&*r7ZR!UOX$eXY({YZ.gZ]$e]^+P^p$epq({qr.}rs0}st2ktu$euv!7dvw!9bwx!;exy!<Yyz!=Tz{!>O{|!?R|}!AV}!O!BQ!O!P!DX!P!Q#+y!Q!R#Az!R![$(x![!]$Ag!]!^$Cc!^!_$D^!_!`%1W!`!a%2X!a!b%5_!b!c$e!c!n%6Y!n!o%7q!o!w%6Y!w!x%7q!x!}%6Y!}#O%:n#O#P%<g#P#Q%Kz#Q#R%Ms#R#S%6Y#S#T$e#T#i%6Y#i#j%Nv#j#o%6Y#o#p&!e#p#q&#`#q#r&%f#r#s&&a#s;'S$e;'S;=`(u<%lO$e&t$nY)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&r%eW)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^&j&SU'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j&kX'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j']V'f&jOY%}YZ%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j'uP;=`<%l%}&r'{P;=`<%l%^&l(VW(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O&l(rP;=`<%l(O&t(xP;=`<%l$e7Z)Y`)ZW(pQ(n.o'f&j*Z)`OX$eXY({YZ*[Z]$e]^+P^p$epq({qr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e.o*aT(n.oXY*[YZ*[]^*[pq*[#O#P*p.o*sQYZ*[]^*y.o*|PYZ*[4e+[`)ZW(pQ(n.o'f&jOX$eXY+PYZ*[Z]$e]^+P^p$epq+Pqr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e4Z,cX'f&jOY%}YZ-OZ]%}]^-{^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4Z-V[(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4Z.QV'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P.nT*W)`(n.oXY*[YZ*[]^*[pq*[#O#P*p3o/[[%^!b'QP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o0_Y%]!b!a,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e6e1YY)ZW(qQ(o/]'f&jOY%^Zr%^rs1xsw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^(U2RW)x!b)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^4e2tf)ZW(pQ'f&jOX$eXY2kZp$epq2kqr$ers%^sw$ewx(Ox!c$e!c!}4Y!}#O$e#O#P&f#P#T$e#T#W4Y#W#X5m#X#Y>u#Y#]4Y#]#^NZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e4eb)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e5xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y7W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e7cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z8q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e8|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^:[#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e:gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#b4Y#b#c;u#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e<Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y=`#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e=mb)ZW(pQ'e.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e?Qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a@f#a#b4Y#b#cHV#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e@qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^BV#^#g4Y#g#hEV#h#o4Y#o;'S$e;'S;=`(u<%lO$e4eBbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZCp#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eC}b)ZW(pQ'f&j'l.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eEbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#YFp#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4eF}b)ZW(pQ'j.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eHbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#XIp#X#o4Y#o;'S$e;'S;=`(u<%lO$e4eI{d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^KZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4eKfd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZLt#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eMRb)ZW(pQ'f&j'k.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eNff)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z! z#Z#b4Y#b#c!.[#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!!Xf)ZW(pQ'g.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!#m#X#b4Y#b#c!(W#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!#xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!%W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!%cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!&q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!'Ob)ZW(pQ'h.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!(cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!)q#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!)|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!+[#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!+gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!,u#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!-Sb)ZW(pQ'i.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!.gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#V4Y#V#W!/u#W#o4Y#o;'S$e;'S;=`(u<%lO$e4e!0Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a!1`#a#o4Y#o;'S$e;'S;=`(u<%lO$e4e!1kd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#i4Y#i#j!2y#j#o4Y#o;'S$e;'S;=`(u<%lO$e4e!3Ud)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!4d#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!4od)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!5}#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!6[b)ZW(pQV.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e3o!7q[)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!8rY!g-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!9o])V,g)ZW(pQ%[!b'f&jOY$eZr$ers%^sv$evw!:hwx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!:uY)U,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2X!;pW)[S(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O6i!<eY)ZW(pQ]6_'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V!=`Y!Oa)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!>][)S,g)ZW(pQ%Z!b'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!?`^)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|!@[|!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!@gY)ZW!X-y(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!AbY!h,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!B__)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox}$e}!O!@[!O!_$e!_!`!8g!`!a!C^!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!CiY(x-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Dd^)ZW(pQ'f&j(w,gOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!E`!P!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Ei[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!F_!P#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!FjY)X,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]!Gen)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Icx!Q$e!Q![!GY![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T!IjY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![!JY![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T!Jcn(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Icx!Q(O!Q![!JY![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ljl(pQ!i,g'f&jOY(OZr(Ors%}s{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ni^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![# e![!c(O!c!i# e!i#O(O#O#P&f#P#T(O#T#Z# e#Z;'S(O;'S;=`(o<%lO(O2T# nj(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Nbx!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T##id(pQ!i,g'f&jOY(OZr(Ors%}s!h(O!h!i##`!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#Y(O#Y#Z##`#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]#%Sn)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#'Z`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![#(]![!c$e!c!i#(]!i#O$e#O#P&f#P#T$e#T#Z#(]#Z;'S$e;'S;=`(u<%lO$e2]#(hj)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Nbx!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#*ef)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!h$e!h!i#*Y!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#Y$e#Y#Z#*Y#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e7Z#,W`)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Oxz$ez{#-Y{!P$e!P!Q#:s!Q!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#-c])ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y1e#._TOz#.[z{#.n{;'S#.[;'S;=`#/]<%lO#.[1e#.qVOz#.[z{#.n{!P#.[!P!Q#/W!Q;'S#.[;'S;=`#/]<%lO#.[1e#/]OT1e1e#/`P;=`<%l#.[7X#/jZ)ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7P#0bX'f&jOY#0]YZ#.[Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1SZ'f&jOY#0]YZ#.[Zz#0]z{#0}{!P#0]!P!Q#1u!Q#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1|UT1e'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P#2eZ'f&jOY#0]YZ#0]Z]#0]]^#3W^z#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3]X'f&jOY#0]YZ#0]Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3{P;=`<%l#0]7X#4V])ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{!P#/c!P!Q#5O!Q#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7X#5XW)ZWT1e'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^7X#5tP;=`<%l#/c7R#6OZ(pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#6x](pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{!P#5w!P!Q#7q!Q#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#7zW(pQT1e'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O7R#8gP;=`<%l#5w7Z#8s_)ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{!P#-Y!P!Q#9r!Q#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y7Z#9}Y)ZW(pQT1e'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#:pP;=`<%l#-Y7Z#;OY)ZW(pQS1e'f&jOY#:sZr#:srs#;nsw#:swx#@{x#O#:s#O#P#<z#P;'S#:s;'S;=`#At<%lO#:s7X#;wW)ZWS1e'f&jOY#;nZw#;nwx#<ax#O#;n#O#P#<z#P;'S#;n;'S;=`#@u<%lO#;n7P#<hUS1e'f&jOY#<aZ#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#=RXS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P;'S#<a;'S;=`#>[<%lO#<a7P#=uVS1e'f&jOY#<aYZ%}Z#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#>_P;=`<%l#<a7P#>i]S1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c#f#<a#f#g#?b#g;'S#<a;'S;=`#>[<%lO#<a7P#?iUS1e'f&jOY#<aZ#O#<a#O#P#?{#P;'S#<a;'S;=`#>[<%lO#<a7P#@SZS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c;'S#<a;'S;=`#>[<%lO#<a7X#@xP;=`<%l#;n7R#AUW(pQS1e'f&jOY#@{Zr#@{rs#<as#O#@{#O#P#<z#P;'S#@{;'S;=`#An<%lO#@{7R#AqP;=`<%l#@{7Z#AwP;=`<%l#:s2]#BVt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$+X#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$=`#m;'S$e;'S;=`(u<%lO$e2T#DnY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#E^![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T#Egp(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#Dgx!O(O!O!P#Gk!P!Q(O!Q![#E^![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#Gtn(pQ!i,g'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#I{p(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#LW^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!i#Ir!i#O(O#O#P&f#P#T(O#T#Z#Ir#Z;'S(O;'S;=`(o<%lO(O2T#M]t(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$ xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$$Xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$&ht)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$)Tp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$+b_)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$-`!R![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$,j[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$-kt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$/{#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e2]$0U[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$1T`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$2br)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T$4s^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![$5o![!c(O!c!i$5o!i#O(O#O#P&f#P#T(O#T#Z$5o#Z;'S(O;'S;=`(o<%lO(O2T$5xr(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx!O(O!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T$8]u(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx{(O{|!Nb|}(O}!O!Nb!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$:{u)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx{$e{|#'Q|}$e}!O#'Q!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$=ic)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$>t!R![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$?Pv)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#U$2V#U#V$2V#V#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e4e$Ar[(v-X)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox![$e![!]$Bh!]#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3s$BsYl-})ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$CnY)W,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7V$Dk_p,g%]!b)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!^$Ej!^!_%+w!_!`%.U!`!a%0]!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej*[$Es])ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ejp$FoTO!`$Fl!`!a$GO!a;'S$Fl;'S;=`$GT<%lO$Flp$GTO$Wpp$GWP;=`<%l$Fl*Y$GbZ)ZW'f&jOY$GZYZ$FlZw$GZwx$HTx!`$GZ!`!a%(U!a#O$GZ#O#P$Ib#P;'S$GZ;'S;=`%(y<%lO$GZ*Q$HYX'f&jOY$HTYZ$FlZ!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q$IOU$WpY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}*Q$Ig['f&jOY$HTYZ$HTZ]$HT]^$J]^!`$HT!`!a$NO!a#O$HT#O#P%&n#P;'S$HT;'S;=`%'f;=`<%l%$z<%lO$HT*Q$JbX'f&jOY$HTYZ$J}Z!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT'[$KSX'f&jOY$J}YZ$FlZ!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$KvU$Wp'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}'[$L_Z'f&jOY$J}YZ$J}Z]$J}]^$MQ^!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MVX'f&jOY$J}YZ$J}Z!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MuP;=`<%l$J}*Q$M{P;=`<%l$HT*Q$NVW$Wp'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`$NtW'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`% eUY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%})`% |Y'f&jOY$NoYZ$NoZ]$No]^%!l^#O$No#O#P%#d#P;'S$No;'S;=`%$[;=`<%l%$z<%lO$No)`%!qX'f&jOY$NoYZ%}Z!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%#aP;=`<%l$No)`%#iZ'f&jOY$NoYZ%}Z]$No]^%!l^!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%$_XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$No<%lO%$z#t%$}WOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h<%lO%$z#t%%lOY#t#t%%oRO;'S%$z;'S;=`%%x;=`O%$z#t%%{XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l%$z<%lO%$z#t%&kP;=`<%l%$z*Q%&sZ'f&jOY$HTYZ$J}Z]$HT]^$J]^!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q%'iXOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$HT<%lO%$z*Y%(aW$WpY#t)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^*Y%(|P;=`<%l$GZ*S%)WZ(pQ'f&jOY%)PYZ$FlZr%)Prs$HTs!`%)P!`!a%)y!a#O%)P#O#P$Ib#P;'S%)P;'S;=`%*n<%lO%)P*S%*UW$WpY#t(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O*S%*qP;=`<%l%)P*[%+RY$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e*[%+tP;=`<%l$Ej7V%,U^)ZW(pQ%[!b!f,g'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!_$Ej!_!`%-Q!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%-]]!g-y)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%.c]%]!b!b,g)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%/[!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%/mY%]!b!b,g$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e)j%0hYY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%1c[)j!c)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%2f]%]!b)ZW(pQ!d,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`%3_!`!a%4[!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%3lY%]!b!b,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%4i[)ZW(pQ%[!b!f,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%5jY(uP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z%6ib)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e7Z%8Qb)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e5P%9cW)ZW(o/]'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^2T%:UW(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O3o%:yZ!V-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!}$e!}#O%;l#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%;wY)PP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e4e%<la'f&jOY%=qYZ%>[Z]%=q]^%?Z^!Q%=q!Q![%?w![!w%=q!w!x%AX!x#O%=q#O#P%H_#P#i%=q#i#j%Ds#j#l%=q#l#m%IR#m;'S%=q;'S;=`%Kt<%lO%=q&t%=xUXY'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4e%>e[XY(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4e%?bVXY'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@OWXY'f&jOY%}Z!Q%}!Q![%@h![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@oWXY'f&jOY%}Z!Q%}!Q![%=q![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%A^['f&jOY%}Z!Q%}!Q![%BS![!c%}!c!i%BS!i#O%}#O#P&f#P#T%}#T#Z%BS#Z;'S%};'S;=`'r<%lO%}&t%BX['f&jOY%}Z!Q%}!Q![%B}![!c%}!c!i%B}!i#O%}#O#P&f#P#T%}#T#Z%B}#Z;'S%};'S;=`'r<%lO%}&t%CS['f&jOY%}Z!Q%}!Q![%Cx![!c%}!c!i%Cx!i#O%}#O#P&f#P#T%}#T#Z%Cx#Z;'S%};'S;=`'r<%lO%}&t%C}['f&jOY%}Z!Q%}!Q![%Ds![!c%}!c!i%Ds!i#O%}#O#P&f#P#T%}#T#Z%Ds#Z;'S%};'S;=`'r<%lO%}&t%Dx['f&jOY%}Z!Q%}!Q![%En![!c%}!c!i%En!i#O%}#O#P&f#P#T%}#T#Z%En#Z;'S%};'S;=`'r<%lO%}&t%Es['f&jOY%}Z!Q%}!Q![%Fi![!c%}!c!i%Fi!i#O%}#O#P&f#P#T%}#T#Z%Fi#Z;'S%};'S;=`'r<%lO%}&t%Fn['f&jOY%}Z!Q%}!Q![%Gd![!c%}!c!i%Gd!i#O%}#O#P&f#P#T%}#T#Z%Gd#Z;'S%};'S;=`'r<%lO%}&t%Gi['f&jOY%}Z!Q%}!Q![%=q![!c%}!c!i%=q!i#O%}#O#P&f#P#T%}#T#Z%=q#Z;'S%};'S;=`'r<%lO%}&t%HfXXY'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%IW['f&jOY%}Z!Q%}!Q![%I|![!c%}!c!i%I|!i#O%}#O#P&f#P#T%}#T#Z%I|#Z;'S%};'S;=`'r<%lO%}&t%JR['f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KO[XY'f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KwP;=`<%l%=q2a%LVZ!W,V)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P#Q%Lx#Q;'S$e;'S;=`(u<%lO$e'Y%MTY)]d)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%NQ[)ZW(pQ%[!b'f&j!_,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z& Vd)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q!Y%6Y!Y!Z%7q!Z![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e2]&!pY!T,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o&#m^)ZW(pQ%[!b'f&j!^,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P#p$e#p#q&$i#q;'S$e;'S;=`(u<%lO$e3o&$vY)T,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V&%qY!Ua)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e(]&&nc)ZW(pQ%[!b'RP'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&(Sc)ZW(pQ'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&)jb)ZW(pQdT'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![&)_![!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e",tokenizers:[Z3e,K3e,0,1,2,3,4,5,6,7,8,9],topRules:{Program:[0,307]},dynamicPrecedences:{87:1,94:1,119:1,184:1,187:-10,240:-10,241:1,244:-1,246:-10,247:1,262:-1,267:2,268:2,306:-10,365:3,417:1,418:3,419:1,420:1},specialized:[{term:356,get:n=>eAe[n]||-1},{term:32,get:n=>tAe[n]||-1},{term:66,get:n=>iAe[n]||-1},{term:363,get:n=>nAe[n]||-1}],tokenPrec:24891}),sAe=PO.define({name:"cpp",parser:rAe.configure({props:[ZX.add({IfStatement:R2({except:/^\s*({|else\b)/}),TryStatement:R2({except:/^\s*({|catch)\b/}),LabeledStatement:aMe,CaseStatement:n=>n.baseIndent+n.unit,BlockComment:()=>null,CompoundStatement:oMe({closing:"}"}),Statement:R2({except:/^{/})}),eW.add({"DeclarationList CompoundStatement EnumeratorList FieldDeclarationList InitializerList":uMe,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/,closeBrackets:{stringPrefixes:["L","u","U","u8","LR","UR","uR","u8R","R"]}}});function YO(){return new KTe(sAe)}const oAe=Ft("TresPerspectiveCamera",{position:[0,0,5]},null,-1),aAe=Ft("TresAxesHelper",{args:[2]},null,-1),lAe=Ft("TresBoxGeometry",{args:[2,2,2]},null,-1),nL=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,rL=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,cAe={__name:"ShaderFragBase",setup(n){const{onLoop:e}=_d(),i=[{name:"",children:[{name:"1",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x;
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"2",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-st.x-st.y; //
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"3",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x*st.x*st.x-st.y; //
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"4",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = (st.x-0.5)*2.0;
    c = abs(c);
    gl_FragColor = vec4(0.0, c, 0.0, 1.0);
}
`},{name:"5",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-distance(st, vec2(0.5))*1.0;
    gl_FragColor = vec4(0.0, c, c, 1.0);
}
`}]},{name:"",children:[{name:"1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = distance(st, vec2(0.5))*2.0;
    c = smoothstep(0.8, 0.9, c);
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"2",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.x*st.x-st.y;
    c = abs(c);
    c = smoothstep(0.005, 0.015, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}

`},{name:"()",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.y;
    vec3 color = mix(vec3(1.0, 0.0, 0.0), vec3(0.0, 1.0, 0.0), c);
    
    gl_FragColor = vec4(color, 1.0);
}
`}]},{name:"",children:[{name:"1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = floor(st)*0.5;
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"2",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = fract(st);
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"3",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 center = 0.5+floor(st);
    float c = distance(st, center)*2.0;
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]},{name:"",children:[{name:"",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st.x -= fract(u_time*0.2)*2.0-1.0;

    float c = distance(st, vec2(0.5))*2.0;
    c = step(0.5, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    st /= sin(u_time);

    float c = distance(st, vec2(0.0))*2.0;
    c = step(1.0, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    float theta = mod(u_time, 6.28);
    st = mat2(cos(theta), sin(theta), -sin(theta), cos(theta)) * st; //Z

    float c = st.x;
    c = abs(c);
    c = step(0.05, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]}],t={u_time:{value:0},u_resolution:{value:{x:800,y:600}}};e(({elapsed:m})=>{t.u_time.value=m}),ot(!0);const r=Fn(null),s=Fn(null),o=ot(null);let l=null;const c=ot(null);let u=null;jn(()=>{const m=vt.updateListener.of(y=>{if(y.docChanged){let x=r.value;if(!x)return;x.vertexShader=y.state.doc.toString(),x.needsUpdate=!0}});l=new vt({doc:"",extensions:[WO,YO(),m],parent:o.value});const g=vt.updateListener.of(y=>{if(y.docChanged){let x=r.value;if(!x)return;x.fragmentShader=y.state.doc.toString(),x.needsUpdate=!0}});u=new vt({doc:"",extensions:[WO,YO(),g],parent:c.value}),t.u_resolution.value.x=s.value.clientWidth,t.u_resolution.value.y=s.value.clientHeight}),Fi(r,()=>{f(0,0)});function d(m){return m.trim()}function f(m,g){let x=i[m].children[g],b=x.vert?x.vert:nL,S=x.frag?x.frag:rL;b=d(b),S=d(S);let _=l,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:b}});_.dispatch(O),_=u,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:S}}),_.dispatch(O)}return(m,g)=>{const y=Pt("Button"),x=Pt("Card"),b=Pt("Col"),S=Pt("Divider"),_=Pt("Row");return ai(),Ur(_,null,{default:Je(()=>[Re(b,{span:4},{default:Je(()=>[(ai(),on(hn,null,yh(i,(O,k)=>Re(x,null,{title:Je(()=>[Ft("h3",null,op(O.name),1)]),default:Je(()=>[(ai(!0),on(hn,null,yh(O.children,(M,E)=>(ai(),Ur(y,{onClick:R=>f(k,E)},{default:Je(()=>[mn(op(M.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),Re(b,{span:10},{default:Je(()=>[Ft("div",{ref_key:"tresCanvasParentRef",ref:s,class:"tresCanvasBorder"},[Re(oi(kP),{"clear-color":"#FDF5E6"},{default:Je(()=>[oAe,aAe,Ft("TresMesh",null,[lAe,Ft("TresShaderMaterial",{ref_key:"materialRef",ref:r,uniforms:t,vertexShader:nL,fragmentShader:rL},null,512)]),Re(oi(t3))]),_:1})],512)]),_:1}),Re(b,{span:10},{default:Je(()=>[Re(S,{orientation:"left"},{default:Je(()=>[mn("")]),_:1}),Ft("div",{ref_key:"codeContainerV",ref:o},null,512),Re(S,{orientation:"left"},{default:Je(()=>[mn("")]),_:1}),Ft("div",{ref_key:"codeContainerF",ref:c},null,512)]),_:1})]),_:1})}}},hAe=Ft("TresPerspectiveCamera",{position:[0,0,5]},null,-1),uAe=Ft("TresAxesHelper",{args:[2]},null,-1),dAe=Ft("TresBoxGeometry",{args:[2,3.6,2]},null,-1),sL=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,oL=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,fAe={__name:"ShaderImageBase",setup(n){const{onLoop:e}=_d(),i=[{name:"",children:[{name:"",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    gl_FragColor = color;
}
`},{name:"",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float scale = abs(sin(u_time));
    scale *= 1.5;
    color.rgb *= scale;
    gl_FragColor = color;
}
`},{name:"",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float gray = color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
    gl_FragColor = vec4(gray, gray, gray, color.a);
}
`},{name:"",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;

void main() {
    vec4 self = texture2D(u_tex0, UV);

    if(self.a>0.5){
        gl_FragColor = self;
        return;
    }

    float outlineW = abs(sin(u_time))*0.01;
    // outlineW = 0.01;

    int strokeCount = 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x-outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x+outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y-outlineW)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y+outlineW)).a>0.0 ? 1 : 0;

    if (strokeCount>0){
        self.rgb = vec3(1.0, 0.0, 1.0);
        self.a = 1.0;
    }

    gl_FragColor = self;
}
`}]}],t={u_time:{value:0},u_resolution:{value:{x:800,y:600}},u_tex0:{value:null}};e(({elapsed:m})=>{t.u_time.value=m}),ot(!0);const r=Fn(null),s=Fn(null),o=ot(null);let l=null;const c=ot(null);let u=null;jn(()=>{const m=vt.updateListener.of(y=>{if(y.docChanged){let x=r.value;if(!x)return;x.vertexShader=y.state.doc.toString(),x.needsUpdate=!0}});l=new vt({doc:"",extensions:[WO,YO(),m],parent:o.value});const g=vt.updateListener.of(y=>{if(y.docChanged){let x=r.value;if(!x)return;x.fragmentShader=y.state.doc.toString(),x.needsUpdate=!0}});u=new vt({doc:"",extensions:[WO,YO(),g],parent:c.value}),t.u_resolution.value.x=s.value.clientWidth,t.u_resolution.value.y=s.value.clientHeight,Sye({map:"img/img1.png"}).then(y=>{t.u_tex0.value=y.map})}),Fi(r,()=>{f(0,0)});function d(m){return m.trim()}function f(m,g){let x=i[m].children[g],b=x.vert?x.vert:sL,S=x.frag?x.frag:oL;b=d(b),S=d(S);let _=l,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:b}});_.dispatch(O),_=u,O=_.state.update({changes:{from:0,to:_.state.doc.length,insert:S}}),_.dispatch(O)}return(m,g)=>{const y=Pt("Button"),x=Pt("Card"),b=Pt("Col"),S=Pt("Divider"),_=Pt("Row");return ai(),Ur(_,null,{default:Je(()=>[Re(b,{span:4},{default:Je(()=>[(ai(),on(hn,null,yh(i,(O,k)=>Re(x,null,{title:Je(()=>[Ft("h3",null,op(O.name),1)]),default:Je(()=>[(ai(!0),on(hn,null,yh(O.children,(M,E)=>(ai(),Ur(y,{onClick:R=>f(k,E)},{default:Je(()=>[mn(op(M.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),Re(b,{span:10},{default:Je(()=>[Ft("div",{ref_key:"tresCanvasParentRef",ref:s,class:"tresCanvasBorder"},[Re(oi(kP),{"clear-color":"#FDF5E6"},{default:Je(()=>[hAe,uAe,Ft("TresMesh",null,[dAe,Ft("TresShaderMaterial",{ref_key:"materialRef",ref:r,uniforms:t,vertexShader:sL,fragmentShader:oL},null,512)]),Re(oi(t3))]),_:1})],512)]),_:1}),Re(b,{span:10},{default:Je(()=>[Re(S,{orientation:"left"},{default:Je(()=>[mn("")]),_:1}),Ft("div",{ref_key:"codeContainerV",ref:o},null,512),Re(S,{orientation:"left"},{default:Je(()=>[mn("")]),_:1}),Ft("div",{ref_key:"codeContainerF",ref:c},null,512)]),_:1})]),_:1})}}},pAe=["src"],z2={__name:"ShowVideo",props:{link:String,width:Number,height:Number},setup(n){const e=n,i=ot(null);return jn(()=>{var t=e.width?`${t}px`:"100%",r=e.height?`${r}px`:"100vh";i.value={width:t,height:r}}),(t,r)=>(ai(),on("video",{src:e.link,style:Ah(i.value),controls:"",autoplay:"",loop:""},null,12,pAe))}},v_=n=>(zB("data-v-36b71117"),n=n(),XB(),n),mAe=v_(()=>Ft("audio",{src:"ballgame/ball_bgm.mp3",id:"ball_bgm",loop:"true"},null,-1)),gAe=v_(()=>Ft("audio",{src:"ballgame/ball_bomb.mp3",id:"ball_bomb"},null,-1)),vAe=v_(()=>Ft("audio",{src:"ballgame/ball_collect.mp3",id:"ball_collect"},null,-1)),yAe=v_(()=>Ft("audio",{src:"ballgame/ball_click.mp3",id:"ball_click"},null,-1)),bAe={__name:"BallGame",setup(n){const e={Wait:"Wait",Play:"Play"},i=ot(null);let t=null,r=null,s=[],o=null,l=[],c={},u=0,d=0,f=0,m=0,g=1,y=e.Wait,x=null,b=null,S=null,_=null,O=null;function k(K,j){const F=K.x,z=K.y,ee=K.radius,re=j.x,W=j.y,q=j.width,ae=j.height;let fe=Math.max(re,Math.min(F,re+q)),ye=Math.max(W,Math.min(z,W+ae)),Me=F-fe,J=z-ye;return Me*Me+J*J<=ee*ee}function M(K,j){for(let F of j)if(k(K,F))return F;return null}const E={Black:"Black",Red:"Red"};class R{constructor(j,F,z=100,ee=50,re=10){this.color="black",this.x=j,this.y=F,this.width=z,this.height=ee,this.radius=re,this.rotation=0,this.rotationCenter={x:this.x+this.width/2,y:this.y+this.height/2},this.angle=0,this.speed=0,this.velocity={x:0,y:0}}setRotation(j){return this.rotation=j*Math.PI/180,this}setRotationCenter(j,F){return this.rotationCenter={x:j,y:F},this}setRotationCenterToMiddle(){return this.rotationCenter={x:this.x+this.width/2,y:this.y+this.height/2},this}setAngle(j){return this.angle=j*Math.PI/180,this._updateVelocity(),this}setSpeed(j){return this.speed=j,this._updateVelocity(),this}setVelocity(j,F){return this.velocity.x=j,this.velocity.y=F,this.speed=Math.sqrt(j*j+F*F),this.angle=Math.atan2(F,j),this}update(){return this.x+=this.velocity.x,this.y+=this.velocity.y,this.rotationCenter&&(this.rotationCenter.x+=this.velocity.x,this.rotationCenter.y+=this.velocity.y),this}_updateVelocity(){this.velocity.x=this.speed*Math.cos(this.angle),this.velocity.y=this.speed*Math.sin(this.angle)}getAngleDegrees(){return this.angle*180/Math.PI}getRotationDegrees(){return this.rotation*180/Math.PI}alignRotationWithMovement(){return this.rotation=this.angle,this}draw(j){j.save(),j.translate(this.rotationCenter.x,this.rotationCenter.y),j.rotate(this.rotation),j.translate(-this.rotationCenter.x,-this.rotationCenter.y);const{width:F,height:z,radius:ee}=this;j.beginPath(),j.moveTo(this.x+ee,this.y),j.lineTo(this.x+F-ee,this.y),j.arcTo(this.x+F,this.y,this.x+F,this.y+ee,ee),j.lineTo(this.x+F,this.y+z-ee),j.arcTo(this.x+F,this.y+z,this.x+F-ee,this.y+z,ee),j.lineTo(this.x+ee,this.y+z),j.arcTo(this.x,this.y+z,this.x,this.y+z-ee,ee),j.lineTo(this.x,this.y+ee),j.arcTo(this.x,this.y,this.x+ee,this.y,ee),j.closePath(),j.fillStyle=this.color,j.fill(),j.restore()}}class P{constructor(j,F){this.x=j,this.y=F,this.radius=20,this.angle=Math.random()*Math.PI*2,this.speed=20,this.life=1e3,this.alpha=100,this.color=`rgb(255,69,1,${this.alpha})`}draw(){t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.fillStyle=this.color,t.fill()}update(j){this.x=this.x+Math.cos(this.angle)*this.speed,this.y=this.y+Math.sin(this.angle)*this.speed,this.angle+=Math.PI/180,this.speed*=.9,this.radius-=1,this.radius<0&&(this.radius=0),this.alpha-=Math.floor(j/1e3*255),this.life-=j}}class I{constructor(j,F,z=50){this.color="black",this.x=j,this.y=F,this.radius=z,this.rotation=0,this.rotationCenter={x:this.x,y:this.y},this.startAngle=0,this.endAngle=Math.PI*2,this.counterclockwise=!1,this.shadowColor="rgba(0, 0, 0, 0.3)",this.shadowBlur=10,this.shadowOffsetX=3,this.shadowOffsetY=3,this.useGradient=!0,this.highlightColor="rgba(255, 255, 255, 0.8)",this.shadowCenter="rgba(0, 0, 0, 0.2)",this.balls=[]}draw(j){j.save(),this.balls.length>0?this.drawBalls(j):this.drawSelf(j),j.restore()}update(j){this.balls.length>0?this.updateBalls(j):this.updateSelf&&this.updateSelf(j)}drawSelf(j){if(j.shadowColor=this.shadowColor,j.shadowBlur=this.shadowBlur,j.shadowOffsetX=this.shadowOffsetX,j.shadowOffsetY=this.shadowOffsetY,j.translate(this.rotationCenter.x,this.rotationCenter.y),j.rotate(this.rotation),j.translate(-this.rotationCenter.x,-this.rotationCenter.y),this.useGradient){const F=j.createRadialGradient(this.x-this.radius*.3,this.y-this.radius*.3,this.radius*.1,this.x,this.y,this.radius);F.addColorStop(0,this.highlightColor),F.addColorStop(.1,this.color),F.addColorStop(.9,this.color),F.addColorStop(1,this.shadowCenter),j.fillStyle=F}else j.fillStyle=this.color;j.beginPath(),j.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.counterclockwise),j.fill()}blast(){let j=10;this.balls=[];for(let F=0;F<j;F++)this.balls.push(new P(this.x,this.y))}updateBalls(j){let F=[];for(let z=0;z<this.balls.length;z++){const ee=this.balls[z];ee.update(j),ee.life<0&&F.push(ee)}for(let z=0;z<F.length;z++){const ee=F[z];let re=this.balls.indexOf(ee);re>=0&&this.balls.splice(re)}}drawBalls(j){for(let F=0;F<this.balls.length;F++)this.balls[F].draw(j)}setShadow(j,F,z,ee){return this.shadowColor=j,this.shadowBlur=F,this.shadowOffsetX=z,this.shadowOffsetY=ee,this}setGradientColors(j,F,z){return this.color=j,this.highlightColor=F,this.shadowCenter=z,this}setUseGradient(j){return this.useGradient=j,this}}const T=()=>{i.value&&(i.value.width=window.innerWidth,i.value.height=window.innerHeight)};function N(K,j){return Math.random()*(j-K)+K}function L(K){if(u+=K,u<=2e3)return;u=0;let j=60,F=60,z=c.centerX-j/2,ee=c.yMin,re=new R(z,ee,j,F,0);s.push(re),l.push(re),d==2?(re.boxType=E.Red,re.color="#f6416c"):(re.boxType=E.Black,re.color="#252a34"),d=(d+1)%3;let W=N(-.8,.8)*g,q=2*g;re.setVelocity(W,q)}function D(){let K=[];for(let j=0;j<l.length;j++){const F=l[j];let z=F.getRotationDegrees()+2;F.setRotation(z),F.y>c.yMax&&K.push(F)}for(let j=0;j<K.length;j++){const F=K[j];$(F)}}function $(K){let j=l.indexOf(K);j>=0&&l.splice(j,1),j=s.indexOf(K),j>=0&&s.splice(j,1)}function B(){let K=M(o,l);K&&(K.boxType===E.Red?(f+=1,g+=.3,$(K),x.play()):(Ce(),$(K),o.blast(),S.play()),f>m&&(m=f))}function U(K,j,F,z,ee={}){K.save(),K.font=ee.font||"40px Courier New",K.textAlign=ee.align||"center",K.textBaseline=ee.baseline||"center",K.strokeStyle=ee.strokeColor||"black",K.lineWidth=ee.strokeWidth||5,K.strokeText(j,F,z),K.fillStyle=ee.fillColor||"white",K.fillText(j,F,z),K.restore()}let Q=0;const Z=()=>{if(!t||!i.value)return;if(y==e.Play){Q||(Q=Date.now());let j=Date.now(),F=j-Q;for(let z=0;z<s.length;z++){const ee=s[z];ee.update&&ee.update(F)}L(F),D(),B(),Q=j}t.fillStyle=r,t.fillRect(0,0,i.value.width,i.value.height);for(let j=0;j<s.length;j++)s[j].draw(t);y==e.Wait&&U(t,"",c.centerX,c.yMax*.5);let K=130;U(t,`:${f}`,c.centerX,c.yMax*.6+K),U(t,`:${m}`,c.centerX,c.yMax*.6+K+50),requestAnimationFrame(Z)};function te(K){y==e.Wait?(y=e.Play,x.load(),b.load(),S.load(),_.load(),b.play(),Ce(),Z()):o.speed=-o.speed}function ce(K){O||(O="mouse"),O=="mouse"&&(te(),K.preventDefault())}function pe(K){}function Ee(K){}function we(K){O||(O="touch"),O=="touch"&&(te(),K.preventDefault())}function he(K){K.preventDefault()}function _e(K){console.log("Touch end")}function Ce(){u=0,f=0,d=0,g=1}return jn(()=>{t=i.value.getContext("2d"),T(),c.width=600,c.height=i.value.height,c.centerX=i.value.width/2,c.centerY=i.value.height/2,c.xMin=c.centerX-c.width/2,c.xMax=c.centerX+c.width/2,c.yMin=c.centerY-c.height/2,c.yMax=c.centerY+c.height/2;const K=i.value.width/2,j=i.value.height/2;r=t.createLinearGradient(0,0,i.value.width,0),r.addColorStop(0,"#71c9ce"),r.addColorStop(.5,"#8edbdf"),r.addColorStop(1,"#71c9ce"),window.addEventListener("resize",T),window.addEventListener("mousedown",ce),window.addEventListener("mousemove",pe),window.addEventListener("mouseup",Ee),window.addEventListener("touchstart",we),window.addEventListener("touchmove",he),window.addEventListener("touchend",_e),b=document.getElementById("ball_bgm"),x=document.getElementById("ball_collect"),S=document.getElementById("ball_bomb"),_=document.getElementById("ball_click"),y=e.Wait,Ce();{let z=c.width,ee=c.height,re=K-z/2,W=j-ee/2,q=new R(re,W,z,ee,5);q.color="#A9A9A988"}let F=0;{let z=c.width*.6,ee=60,re=K-z/2,W=c.yMax*.6,q=new R(re,W,z,ee,ee/2);q.color="#A9A9A9",s.push(q),F=z}{let z=30,ee=K,re=c.yMax*.6+z,W=new I(ee,re,z);W.color="#FF4500",W.speed=300,W.updateSelf=(q=>{W.x+=W.speed*q/1e3,W.x>ee+F/2-z?W.speed=-Math.abs(W.speed):W.x<ee-F/2+z&&(W.speed=Math.abs(W.speed)),W.x>c.xMax&&(W.x=c.xMin,W.speed=Math.abs(W.speed)),W.x<c.xMin&&(W.x=c.xMax,W.speed=-Math.abs(W.speed))}).bind(W),s.push(W),o=W}Z()}),Jo(()=>{window.removeEventListener("resize",T),window.removeEventListener("mousedown",ce),window.removeEventListener("mousemove",pe),window.removeEventListener("mouseup",Ee),window.removeEventListener("touchstart",we),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",_e),b.pause()}),(K,j)=>(ai(),on(hn,null,[mAe,gAe,vAe,yAe,Ft("canvas",{ref_key:"canvasRef",ref:i,type:"2d"},null,512)],64))}},xAe=_Se(bAe,[["__scopeId","data-v-36b71117"]]),OAe=Ft("TresAmbientLight",{intensity:1},null,-1),wAe=Ft("TresAxesHelper",null,null,-1),_Ae=["position"],SAe=Ft("TresSphereGeometry",{args:[.4,8,8]},null,-1),CAe=Ft("TresMeshBasicMaterial",{color:"red",transparent:!0,opacity:.1},null,-1),kAe=[SAe,CAe],TAe={__name:"CurveRope",setup(n){const e=Fn(null),i=Fn(null),t=Fn(null);let s=new Uw().load("img/rope3.png");var o=new Ma({map:s});const l=Fn(null);let c=-1,u=new xP,d=vd([new ne(0,-8,0),new ne(0,2,0),new ne(0,8,0)]);function f(){const x=new kw(...d),b=x.getLength();console.log("curveLength",b);const S=30;var _=[],O=[];for(let P=0;P<S;P++){let I=P/S,T=x.getPointAt(I),N=x.getTangentAt(I),L=new ze(-N.y,N.x).normalize(),D=(P+1)/S,$=x.getPointAt(D),B=x.getTangentAt(D),U=new ze(-B.y,B.x).normalize(),Q=[T.clone().add(L.clone().multiplyScalar(.4)),T.clone().sub(L.clone().multiplyScalar(.4)),$.clone().add(U.clone().multiplyScalar(.4)),$.clone().sub(U.clone().multiplyScalar(.4))];_.push(Q[0]),_.push(Q[1]),_.push(Q[2]),_.push(Q[1]),_.push(Q[3]),_.push(Q[2]);let Z=0,te=1;console.log(`ratio1=${I.toFixed(2)}`,`uv1=${Z.toFixed(2)}`,`uv2=${te.toFixed(2)}`),O.push(new ze(0,Z)),O.push(new ze(1,Z)),O.push(new ze(0,te)),O.push(new ze(1,Z)),O.push(new ze(1,te)),O.push(new ze(0,te))}const k=new Float32Array(_.length*3);for(let P=0;P<_.length;P++)k[P*3]=_[P].x,k[P*3+1]=_[P].y,k[P*3+2]=0;const M=new Float32Array(O.length*2);for(let P=0;P<O.length;P++)M[P*2]=O[P].x,M[P*2+1]=O[P].y;var E=new ni;for(E.setAttribute("position",new Ri(k,3)),E.setAttribute("uv",new Ri(M,2));i.value.children.length>0;)i.value.remove(i.value.children[0]);var R;{var R=new tn(E,o);i.value.add(R)}}Fi(i,()=>{f()});function m(x){if(c>=0){let b={x:0,y:0};b.x=x.clientX/window.innerWidth*2-1,b.y=-(x.clientY/window.innerHeight)*2+1,u.setFromCamera(b,t.value);let S=new ya(new ne(0,0,1),0),_=new ne;u.ray.intersectPlane(S,_)&&(d[c]=_),f()}}function g(x){let b={x:x.clientX/window.innerWidth*2-1,y:-(x.clientY/window.innerHeight)*2+1};u.setFromCamera(b,t.value);const S=u.intersectObjects(l.value.children);if(S.length>0){const _=S[0].object;c=l.value.children.indexOf(_)}else c=-1}function y(x){c=-1}return(x,b)=>{const S=Pt("TresCanvas");return ai(),on("div",{onMousemove:m,onMousedown:g,onMouseup:y},[Re(S,{ref_key:"canvasRef",ref:e,"clear-color":"#f9f7f7","window-size":""},{default:Je(()=>[Ft("TresPerspectiveCamera",{ref_key:"cameraRef",ref:t,position:[0,0,20],rotation:[0,0,0]},null,512),OAe,wAe,Ft("TresGroup",{ref_key:"curveRef",ref:i},null,512),Ft("TresGroup",{ref_key:"controlPointsRef",ref:l},[(ai(!0),on(hn,null,yh(oi(d),(_,O)=>(ai(),on("TresMesh",{key:O,position:_},kAe,8,_Ae))),128))],512)]),_:1},512)],32)}}},MAe="modulepreload",EAe=function(n){return"/"+n},aL={},jO=function(e,i,t){let r=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(i.map(l=>{if(l=EAe(l),l in aL)return;aL[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":MAe,c||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Ht=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(Ht||{});const IM=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},ex=(n,e)=>IM(n).priority??e,Cs={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(IM).forEach(e=>{e.type.forEach(i=>{var t,r;return(r=(t=this._removeHandlers)[i])==null?void 0:r.call(t,e)})}),this},add(...n){return n.map(IM).forEach(e=>{e.type.forEach(i=>{var s,o;const t=this._addHandlers,r=this._queue;t[i]?(o=t[i])==null||o.call(t,e):(r[i]=r[i]||[],(s=r[i])==null||s.push(e))})}),this},handle(n,e,i){var o;const t=this._addHandlers,r=this._removeHandlers;if(t[n]||r[n])throw new Error(`Extension type ${n} already has a handler`);t[n]=e,r[n]=i;const s=this._queue;return s[n]&&((o=s[n])==null||o.forEach(l=>e(l)),delete s[n]),this},handleByMap(n,e){return this.handle(n,i=>{i.name&&(e[i.name]=i.ref)},i=>{i.name&&delete e[i.name]})},handleByNamedList(n,e,i=-1){return this.handle(n,t=>{e.findIndex(s=>s.name===t.name)>=0||(e.push({name:t.name,value:t.ref}),e.sort((s,o)=>ex(o.value,i)-ex(s.value,i)))},t=>{const r=e.findIndex(s=>s.name===t.name);r!==-1&&e.splice(r,1)})},handleByList(n,e,i=-1){return this.handle(n,t=>{e.includes(t.ref)||(e.push(t.ref),e.sort((r,s)=>ex(s,i)-ex(r,i)))},t=>{const r=e.indexOf(t.ref);r!==-1&&e.splice(r,1)})}},PAe={extension:{type:Ht.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await jO(()=>import("./browserAll-unXbVNlA.js"),__vite__mapDeps([0,1,2]))}},AAe={extension:{type:Ht.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await jO(()=>import("./webworkerAll-J02iDL49.js"),__vite__mapDeps([1,2]))}};class yo{constructor(e,i,t){this._x=i||0,this._y=t||0,this._observer=e}clone(e){return new yo(e??this._observer,this._x,this._y)}set(e=0,i=e){return(this._x!==e||this._y!==i)&&(this._x=e,this._y=i,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var pQ={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,i="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(i=!1));function r(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new r(d,f||c,m),y=i?i+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],g]:c._events[y].push(g):(c._events[y]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new t:delete c._events[u]}function l(){this._events=new t,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=i?i+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,y=new Array(g);m<g;m++)y[m]=f[m].fn;return y},l.prototype.listenerCount=function(u){var d=i?i+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,g,y){var x=i?i+u:u;if(!this._events[x])return!1;var b=this._events[x],S=arguments.length,_,O;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,m),!0;case 5:return b.fn.call(b.context,d,f,m,g),!0;case 6:return b.fn.call(b.context,d,f,m,g,y),!0}for(O=1,_=new Array(S-1);O<S;O++)_[O-1]=arguments[O];b.fn.apply(b.context,_)}else{var k=b.length,M;for(O=0;O<k;O++)switch(b[O].once&&this.removeListener(u,b[O].fn,void 0,!0),S){case 1:b[O].fn.call(b[O].context);break;case 2:b[O].fn.call(b[O].context,d);break;case 3:b[O].fn.call(b[O].context,d,f);break;case 4:b[O].fn.call(b[O].context,d,f,m);break;default:if(!_)for(M=1,_=new Array(S-1);M<S;M++)_[M-1]=arguments[M];b[O].fn.apply(b[O].context,_)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var g=i?i+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var y=this._events[g];if(y.fn)y.fn===d&&(!m||y.once)&&(!f||y.context===f)&&o(this,g);else{for(var x=0,b=[],S=y.length;x<S;x++)(y[x].fn!==d||m&&!y[x].once||f&&y[x].context!==f)&&b.push(y[x]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=i?i+u:u,this._events[d]&&o(this,d)):(this._events=new t,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,n.exports=l})(pQ);var RAe=pQ.exports;const Aa=Yp(RAe),IAe=Math.PI*2,DAe=180/Math.PI,NAe=Math.PI/180;class Br{constructor(e=0,i=0){this.x=0,this.y=0,this.x=e,this.y=i}clone(){return new Br(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,i=e){return this.x=e,this.y=i,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return X2.x=0,X2.y=0,X2}}const X2=new Br;class Xi{constructor(e=1,i=0,t=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=i,this.c=t,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,i,t,r,s,o){return this.a=e,this.b=i,this.c=t,this.d=r,this.tx=s,this.ty=o,this}toArray(e,i){this.array||(this.array=new Float32Array(9));const t=i||this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t}apply(e,i){i=i||new Br;const t=e.x,r=e.y;return i.x=this.a*t+this.c*r+this.tx,i.y=this.b*t+this.d*r+this.ty,i}applyInverse(e,i){i=i||new Br;const t=this.a,r=this.b,s=this.c,o=this.d,l=this.tx,c=this.ty,u=1/(t*o+s*-r),d=e.x,f=e.y;return i.x=o*u*d+-s*u*f+(c*s-l*o)*u,i.y=t*u*f+-r*u*d+(-c*t+l*r)*u,i}translate(e,i){return this.tx+=e,this.ty+=i,this}scale(e,i){return this.a*=e,this.d*=i,this.c*=e,this.b*=i,this.tx*=e,this.ty*=i,this}rotate(e){const i=Math.cos(e),t=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*i-this.b*t,this.b=r*t+this.b*i,this.c=s*i-this.d*t,this.d=s*t+this.d*i,this.tx=o*i-this.ty*t,this.ty=o*t+this.ty*i,this}append(e){const i=this.a,t=this.b,r=this.c,s=this.d;return this.a=e.a*i+e.b*r,this.b=e.a*t+e.b*s,this.c=e.c*i+e.d*r,this.d=e.c*t+e.d*s,this.tx=e.tx*i+e.ty*r+this.tx,this.ty=e.tx*t+e.ty*s+this.ty,this}appendFrom(e,i){const t=e.a,r=e.b,s=e.c,o=e.d,l=e.tx,c=e.ty,u=i.a,d=i.b,f=i.c,m=i.d;return this.a=t*u+r*f,this.b=t*d+r*m,this.c=s*u+o*f,this.d=s*d+o*m,this.tx=l*u+c*f+i.tx,this.ty=l*d+c*m+i.ty,this}setTransform(e,i,t,r,s,o,l,c,u){return this.a=Math.cos(l+u)*s,this.b=Math.sin(l+u)*s,this.c=-Math.sin(l-c)*o,this.d=Math.cos(l-c)*o,this.tx=e-(t*this.a+r*this.c),this.ty=i-(t*this.b+r*this.d),this}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const t=this.a,r=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this}decompose(e){const i=this.a,t=this.b,r=this.c,s=this.d,o=e.pivot,l=-Math.atan2(-r,s),c=Math.atan2(t,i),u=Math.abs(l+c);return u<1e-5||Math.abs(IAe-u)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=c),e.scale.x=Math.sqrt(i*i+t*t),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*i+o.y*r),e.position.y=this.ty+(o.x*t+o.y*s),e}invert(){const e=this.a,i=this.b,t=this.c,r=this.d,s=this.tx,o=e*r-i*t;return this.a=r/o,this.b=-i/o,this.c=-t/o,this.d=e/o,this.tx=(t*this.ty-r*s)/o,this.ty=-(e*this.ty-i*s)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Xi;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return VAe.identity()}static get shared(){return $Ae.identity()}}const $Ae=new Xi,VAe=new Xi,Cu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ku=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Tu=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Mu=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],DM=[],mQ=[],tx=Math.sign;function LAe(){for(let n=0;n<16;n++){const e=[];DM.push(e);for(let i=0;i<16;i++){const t=tx(Cu[n]*Cu[i]+Tu[n]*ku[i]),r=tx(ku[n]*Cu[i]+Mu[n]*ku[i]),s=tx(Cu[n]*Tu[i]+Tu[n]*Mu[i]),o=tx(ku[n]*Tu[i]+Mu[n]*Mu[i]);for(let l=0;l<16;l++)if(Cu[l]===t&&ku[l]===r&&Tu[l]===s&&Mu[l]===o){e.push(l);break}}}for(let n=0;n<16;n++){const e=new Xi;e.set(Cu[n],ku[n],Tu[n],Mu[n],0,0),mQ.push(e)}}LAe();const Rn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Cu[n],uY:n=>ku[n],vX:n=>Tu[n],vY:n=>Mu[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>DM[n][e],sub:(n,e)=>DM[n][Rn.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Rn.S:Rn.N:Math.abs(e)*2<=Math.abs(n)?n>0?Rn.E:Rn.W:e>0?n>0?Rn.SE:Rn.SW:n>0?Rn.NE:Rn.NW,matrixAppendRotationInv:(n,e,i=0,t=0)=>{const r=mQ[Rn.inv(e)];r.tx=i,r.ty=t,n.append(r)}},ix=[new Br,new Br,new Br,new Br];class vr{constructor(e=0,i=0,t=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(i),this.width=Number(t),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new vr(0,0,0,0)}clone(){return new vr(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height}strokeContains(e,i,t,r=.5){const{width:s,height:o}=this;if(s<=0||o<=0)return!1;const l=this.x,c=this.y,u=t*(1-r),d=t-u,f=l-u,m=l+s+u,g=c-u,y=c+o+u,x=l+d,b=l+s-d,S=c+d,_=c+o-d;return e>=f&&e<=m&&i>=g&&i<=y&&!(e>x&&e<b&&i>S&&i<_)}intersects(e,i){if(!i){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const T=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>T}const t=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=t||o<=s)return!1;const l=ix[0].set(e.left,e.top),c=ix[1].set(e.left,e.bottom),u=ix[2].set(e.right,e.top),d=ix[3].set(e.right,e.bottom);if(u.x<=l.x||c.y<=l.y)return!1;const f=Math.sign(i.a*i.d-i.b*i.c);if(f===0||(i.apply(l,l),i.apply(c,c),i.apply(u,u),i.apply(d,d),Math.max(l.x,c.x,u.x,d.x)<=t||Math.min(l.x,c.x,u.x,d.x)>=r||Math.max(l.y,c.y,u.y,d.y)<=s||Math.min(l.y,c.y,u.y,d.y)>=o))return!1;const m=f*(c.y-l.y),g=f*(l.x-c.x),y=m*t+g*s,x=m*r+g*s,b=m*t+g*o,S=m*r+g*o;if(Math.max(y,x,b,S)<=m*l.x+g*l.y||Math.min(y,x,b,S)>=m*d.x+g*d.y)return!1;const _=f*(l.y-u.y),O=f*(u.x-l.x),k=_*t+O*s,M=_*r+O*s,E=_*t+O*o,R=_*r+O*o;return!(Math.max(k,M,E,R)<=_*l.x+O*l.y||Math.min(k,M,E,R)>=_*d.x+O*d.y)}pad(e=0,i=e){return this.x-=e,this.y-=i,this.width+=e*2,this.height+=i*2,this}fit(e){const i=Math.max(this.x,e.x),t=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.width=Math.max(t-i,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,i=.001){const t=Math.ceil((this.x+this.width-i)*e)/e,r=Math.ceil((this.y+this.height-i)*e)/e;return this.x=Math.floor((this.x+i)*e)/e,this.y=Math.floor((this.y+i)*e)/e,this.width=t-this.x,this.height=r-this.y,this}enlarge(e){const i=Math.min(this.x,e.x),t=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=i,this.width=t-i,this.y=r,this.height=s-r,this}getBounds(e){return e||(e=new vr),e.copyFrom(this),e}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const W2={default:-1};function yr(n="default"){return W2[n]===void 0&&(W2[n]=-1),++W2[n]}const lL={},sn="8.0.0",BAe="8.3.4";function Hi(n,e,i=3){if(lL[e])return;let t=new Error().stack;typeof t>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(t=t.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(t),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(t))),lL[e]=!0}const gQ=()=>{};function qO(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function cL(n){return!(n&n-1)&&!!n}function UAe(n){const e={};for(const i in n)n[i]!==void 0&&(e[i]=n[i]);return e}const hL=Object.create(null);function FAe(n){const e=hL[n];return e===void 0&&(hL[n]=yr("resource")),e}const vQ=class yQ extends Aa{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...yQ.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Hi(sn,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=FAe(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};vQ.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let zAe=vQ;const bQ=class xQ extends Aa{constructor(e={}){super(),this.options=e,this.uid=yr("textureSource"),this._resourceType="textureSource",this._resourceId=yr("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...xQ.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new zAe(UAe(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var i,t;this.style!==e&&((i=this._style)==null||i.off("change",this._onStyleChange,this),this._style=e,(t=this._style)==null||t.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=yr("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,i,t){t||(t=this._resolution),e||(e=this.width),i||(i=this.height);const r=Math.round(e*t),s=Math.round(i*t);return this.width=r/t,this.height=s/t,this._resolution=t,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=yr("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=cL(this.pixelWidth)&&cL(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};bQ.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let gl=bQ;class G3 extends gl{constructor(e){const i=e.resource||new Float32Array(e.width*e.height*4);let t=e.format;t||(i instanceof Float32Array?t="rgba32float":i instanceof Int32Array||i instanceof Uint32Array?t="rgba32uint":i instanceof Int16Array||i instanceof Uint16Array?t="rgba16uint":(i instanceof Int8Array,t="bgra8unorm")),super({...e,resource:i,format:t}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}G3.extension=Ht.TextureSource;const uL=new Xi;class XAe{constructor(e,i){this.mapCoord=new Xi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof i>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=i,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var i;this.texture!==e&&((i=this._texture)==null||i.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,i){i===void 0&&(i=e);const t=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];i[r]=s*t.a+o*t.c+t.tx,i[r+1]=s*t.b+o*t.d+t.ty}return i}update(){const e=this._texture;this._updateID++;const i=e.uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const t=e.orig,r=e.trim;r&&(uL.set(t.width/r.width,0,0,t.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(uL));const s=e.source,o=this.uClampFrame,l=this.clampMargin/s._resolution,c=this.clampOffset/s._resolution;return o[0]=(e.frame.x+l+c)/s.width,o[1]=(e.frame.y+l+c)/s.height,o[2]=(e.frame.x+e.frame.width-l+c)/s.width,o[3]=(e.frame.y+e.frame.height-l+c)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}class Li extends Aa{constructor({source:e,label:i,frame:t,orig:r,trim:s,defaultAnchor:o,defaultBorders:l,rotate:c,dynamic:u}={}){if(super(),this.uid=yr("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new vr,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=i,this.source=(e==null?void 0:e.source)??new gl,this.noFrame=!t,t)this.frame.copyFrom(t);else{const{width:d,height:f}=this._source;this.frame.width=d,this.frame.height=f}this.orig=r||this.frame,this.trim=s,this.rotate=c??0,this.defaultAnchor=o,this.defaultBorders=l,this.destroyed=!1,this.dynamic=u||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new XAe(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:i}=this,{width:t,height:r}=this._source,s=i.x/t,o=i.y/r,l=i.width/t,c=i.height/r;let u=this.rotate;if(u){const d=l/2,f=c/2,m=s+d,g=o+f;u=Rn.add(u,Rn.NW),e.x0=m+d*Rn.uX(u),e.y0=g+f*Rn.uY(u),u=Rn.add(u,2),e.x1=m+d*Rn.uX(u),e.y1=g+f*Rn.uY(u),u=Rn.add(u,2),e.x2=m+d*Rn.uX(u),e.y2=g+f*Rn.uY(u),u=Rn.add(u,2),e.x3=m+d*Rn.uX(u),e.y3=g+f*Rn.uY(u)}else e.x0=s,e.y0=o,e.x1=s+l,e.y1=o,e.x2=s+l,e.y2=o+c,e.x3=s,e.y3=o+c}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Hi(sn,"Texture.baseTexture is now Texture.source"),this._source}}Li.EMPTY=new Li({label:"EMPTY",source:new gl({label:"EMPTY"})});Li.EMPTY.destroy=gQ;Li.WHITE=new Li({source:new G3({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Li.WHITE.destroy=gQ;function WAe(n,e,i,t){const{width:r,height:s}=i.orig,o=i.trim;if(o){const l=o.width,c=o.height;n.minX=o.x-e._x*r-t,n.maxX=n.minX+l,n.minY=o.y-e._y*s-t,n.maxY=n.minY+c}else n.minX=-e._x*r-t,n.maxX=n.minX+r,n.minY=-e._y*s-t,n.maxY=n.minY+s}const dL=new Xi;class cl{constructor(e=1/0,i=1/0,t=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=dL,this.minX=e,this.minY=i,this.maxX=t,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new vr);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=dL,this}set(e,i,t,r){this.minX=e,this.minY=i,this.maxX=t,this.maxY=r}addFrame(e,i,t,r,s){s||(s=this.matrix);const o=s.a,l=s.b,c=s.c,u=s.d,d=s.tx,f=s.ty;let m=this.minX,g=this.minY,y=this.maxX,x=this.maxY,b=o*e+c*i+d,S=l*e+u*i+f;b<m&&(m=b),S<g&&(g=S),b>y&&(y=b),S>x&&(x=S),b=o*t+c*i+d,S=l*t+u*i+f,b<m&&(m=b),S<g&&(g=S),b>y&&(y=b),S>x&&(x=S),b=o*e+c*r+d,S=l*e+u*r+f,b<m&&(m=b),S<g&&(g=S),b>y&&(y=b),S>x&&(x=S),b=o*t+c*r+d,S=l*t+u*r+f,b<m&&(m=b),S<g&&(g=S),b>y&&(y=b),S>x&&(x=S),this.minX=m,this.minY=g,this.maxX=y,this.maxY=x}addRect(e,i){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,i)}addBounds(e,i){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,i)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const i=this.minX,t=this.minY,r=this.maxX,s=this.maxY,{a:o,b:l,c,d:u,tx:d,ty:f}=e;let m=o*i+c*t+d,g=l*i+u*t+f;this.minX=m,this.minY=g,this.maxX=m,this.maxY=g,m=o*r+c*t+d,g=l*r+u*t+f,this.minX=m<this.minX?m:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=m>this.maxX?m:this.maxX,this.maxY=g>this.maxY?g:this.maxY,m=o*i+c*s+d,g=l*i+u*s+f,this.minX=m<this.minX?m:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=m>this.maxX?m:this.maxX,this.maxY=g>this.maxY?g:this.maxY,m=o*r+c*s+d,g=l*r+u*s+f,this.minX=m<this.minX?m:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=m>this.maxX?m:this.maxX,this.maxY=g>this.maxY?g:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,i,t,r){return this.minX<e&&(this.minX=e),this.maxX>i&&(this.maxX=i),this.minY<t&&(this.minY=t),this.maxY>r&&(this.maxY=r),this}pad(e,i=e){return this.minX-=e,this.maxX+=e,this.minY-=i,this.maxY+=i,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new cl(this.minX,this.minY,this.maxX,this.maxY)}scale(e,i=e){return this.minX*=e,this.minY*=i,this.maxX*=e,this.maxY*=i,this}get x(){return this.minX}set x(e){const i=this.maxX-this.minX;this.minX=e,this.maxX=e+i}get y(){return this.minY}set y(e){const i=this.maxY-this.minY;this.minY=e,this.maxY=e+i}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,i,t,r){let s=this.minX,o=this.minY,l=this.maxX,c=this.maxY;r||(r=this.matrix);const u=r.a,d=r.b,f=r.c,m=r.d,g=r.tx,y=r.ty;for(let x=i;x<t;x+=2){const b=e[x],S=e[x+1],_=u*b+f*S+g,O=d*b+m*S+y;s=_<s?_:s,o=O<o?O:o,l=_>l?_:l,c=O>c?O:c}this.minX=s,this.minY=o,this.maxX=l,this.maxY=c}containsPoint(e,i){return this.minX<=e&&this.minY<=i&&this.maxX>=e&&this.maxY>=i}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var QAe={grad:.9,turn:360,rad:360/(2*Math.PI)},Nl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Tr=function(n,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*n)/i+0},Go=function(n,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),n>i?i:n>e?n:e},OQ=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},fL=function(n){return{r:Go(n.r,0,255),g:Go(n.g,0,255),b:Go(n.b,0,255),a:Go(n.a)}},Q2=function(n){return{r:Tr(n.r),g:Tr(n.g),b:Tr(n.b),a:Tr(n.a,3)}},HAe=/^#([0-9a-f]{3,8})$/i,nx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},wQ=function(n){var e=n.r,i=n.g,t=n.b,r=n.a,s=Math.max(e,i,t),o=s-Math.min(e,i,t),l=o?s===e?(i-t)/o:s===i?2+(t-e)/o:4+(e-i)/o:0;return{h:60*(l<0?l+6:l),s:s?o/s*100:0,v:s/255*100,a:r}},_Q=function(n){var e=n.h,i=n.s,t=n.v,r=n.a;e=e/360*6,i/=100,t/=100;var s=Math.floor(e),o=t*(1-i),l=t*(1-(e-s)*i),c=t*(1-(1-e+s)*i),u=s%6;return{r:255*[t,l,o,o,c,t][u],g:255*[c,t,t,l,o,o][u],b:255*[o,o,c,t,t,l][u],a:r}},pL=function(n){return{h:OQ(n.h),s:Go(n.s,0,100),l:Go(n.l,0,100),a:Go(n.a)}},mL=function(n){return{h:Tr(n.h),s:Tr(n.s),l:Tr(n.l),a:Tr(n.a,3)}},gL=function(n){return _Q((i=(e=n).s,{h:e.h,s:(i*=((t=e.l)<50?t:100-t)/100)>0?2*i/(t+i)*100:0,v:t+i,a:e.a}));var e,i,t},$0=function(n){return{h:(e=wQ(n)).h,s:(r=(200-(i=e.s))*(t=e.v)/100)>0&&r<200?i*t/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,i,t,r},GAe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YAe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jAe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qAe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,NM={string:[[function(n){var e=HAe.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Tr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Tr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=jAe.exec(n)||qAe.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:fL({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=GAe.exec(n)||YAe.exec(n);if(!e)return null;var i,t,r=pL({h:(i=e[1],t=e[2],t===void 0&&(t="deg"),Number(i)*(QAe[t]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return gL(r)},"hsl"]],object:[[function(n){var e=n.r,i=n.g,t=n.b,r=n.a,s=r===void 0?1:r;return Nl(e)&&Nl(i)&&Nl(t)?fL({r:Number(e),g:Number(i),b:Number(t),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,i=n.s,t=n.l,r=n.a,s=r===void 0?1:r;if(!Nl(e)||!Nl(i)||!Nl(t))return null;var o=pL({h:Number(e),s:Number(i),l:Number(t),a:Number(s)});return gL(o)},"hsl"],[function(n){var e=n.h,i=n.s,t=n.v,r=n.a,s=r===void 0?1:r;if(!Nl(e)||!Nl(i)||!Nl(t))return null;var o=function(l){return{h:OQ(l.h),s:Go(l.s,0,100),v:Go(l.v,0,100),a:Go(l.a)}}({h:Number(e),s:Number(i),v:Number(t),a:Number(s)});return _Q(o)},"hsv"]]},vL=function(n,e){for(var i=0;i<e.length;i++){var t=e[i][0](n);if(t)return[t,e[i][1]]}return[null,void 0]},ZAe=function(n){return typeof n=="string"?vL(n.trim(),NM.string):typeof n=="object"&&n!==null?vL(n,NM.object):[null,void 0]},H2=function(n,e){var i=$0(n);return{h:i.h,s:Go(i.s+100*e,0,100),l:i.l,a:i.a}},G2=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},yL=function(n,e){var i=$0(n);return{h:i.h,s:i.s,l:Go(i.l+100*e,0,100),a:i.a}},$M=function(){function n(e){this.parsed=ZAe(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Tr(G2(this.rgba),2)},n.prototype.isDark=function(){return G2(this.rgba)<.5},n.prototype.isLight=function(){return G2(this.rgba)>=.5},n.prototype.toHex=function(){return e=Q2(this.rgba),i=e.r,t=e.g,r=e.b,o=(s=e.a)<1?nx(Tr(255*s)):"","#"+nx(i)+nx(t)+nx(r)+o;var e,i,t,r,s,o},n.prototype.toRgb=function(){return Q2(this.rgba)},n.prototype.toRgbString=function(){return e=Q2(this.rgba),i=e.r,t=e.g,r=e.b,(s=e.a)<1?"rgba("+i+", "+t+", "+r+", "+s+")":"rgb("+i+", "+t+", "+r+")";var e,i,t,r,s},n.prototype.toHsl=function(){return mL($0(this.rgba))},n.prototype.toHslString=function(){return e=mL($0(this.rgba)),i=e.h,t=e.s,r=e.l,(s=e.a)<1?"hsla("+i+", "+t+"%, "+r+"%, "+s+")":"hsl("+i+", "+t+"%, "+r+"%)";var e,i,t,r,s},n.prototype.toHsv=function(){return e=wQ(this.rgba),{h:Tr(e.h),s:Tr(e.s),v:Tr(e.v),a:Tr(e.a,3)};var e},n.prototype.invert=function(){return Qa({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Qa(H2(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Qa(H2(this.rgba,-e))},n.prototype.grayscale=function(){return Qa(H2(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Qa(yL(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Qa(yL(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Qa({r:(i=this.rgba).r,g:i.g,b:i.b,a:e}):Tr(this.rgba.a,3);var i},n.prototype.hue=function(e){var i=$0(this.rgba);return typeof e=="number"?Qa({h:e,s:i.s,l:i.l,a:i.a}):Tr(i.h)},n.prototype.isEqual=function(e){return this.toHex()===Qa(e).toHex()},n}(),Qa=function(n){return n instanceof $M?n:new $M(n)},bL=[],KAe=function(n){n.forEach(function(e){bL.indexOf(e)<0&&(e($M,NM),bL.push(e))})};function JAe(n,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},t={};for(var r in i)t[i[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,c,u=t[this.toHex()];if(u)return u;if(o!=null&&o.closest){var d=this.toRgb(),f=1/0,m="black";if(!s.length)for(var g in i)s[g]=new n(i[g]).toRgb();for(var y in i){var x=(l=d,c=s[y],Math.pow(l.r-c.r,2)+Math.pow(l.g-c.g,2)+Math.pow(l.b-c.b,2));x<f&&(f=x,m=y)}return m}},e.string.push([function(o){var l=o.toLowerCase(),c=l==="transparent"?"#0000":i[l];return c?new n(c).toRgb():null},"name"])}KAe([JAe]);const Dp=class m0{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof m0)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,i){const t=typeof e;if(t!==typeof i)return!1;if(t==="number"||t==="string"||e instanceof Number)return e===i;if(Array.isArray(e)&&Array.isArray(i)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(i))return e.length!==i.length?!1:e.every((s,o)=>s===i[o]);if(e!==null&&i!==null){const s=Object.keys(e),o=Object.keys(i);return s.length!==o.length?!1:s.every(l=>e[l]===i[l])}return e===i}toRgba(){const[e,i,t,r]=this._components;return{r:e,g:i,b:t,a:r}}toRgb(){const[e,i,t]=this._components;return{r:e,g:i,b:t}}toRgbaString(){const[e,i,t]=this.toUint8RgbArray();return`rgba(${e},${i},${t},${this.alpha})`}toUint8RgbArray(e){const[i,t,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(i*255),e[1]=Math.round(t*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[i,t,r,s]=this._components;return e[0]=i,e[1]=t,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[i,t,r]=this._components;return e[0]=i,e[1]=t,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,i,t]=this.toUint8RgbArray();return(t<<16)+(i<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[i,t,r,s]=m0._temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=t,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,i=!0){return i&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,i=!0){if(e===1)return(255<<24)+this._int;if(e===0)return i?0:this._int;let t=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return i&&(t=t*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(t<<16)+(r<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const i=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-i.length)+i}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let i,t,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;i=(o>>16&255)/255,t=(o>>8&255)/255,r=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,t,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,t,r,s=255]=e,i/=255,t/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const l=m0.HEX_PATTERN.exec(e);l&&(e=`#${l[2]}`)}const o=Qa(e);o.isValid()&&({r:i,g:t,b:r,a:s}=o.rgba,i/=255,t/=255,r/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=t,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,i,t]=this._components;this._int=(e*255<<16)+(i*255<<8)+(t*255|0)}_clamp(e,i=0,t=1){return typeof e=="number"?Math.min(Math.max(e,i),t):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,i),t)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof m0||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Dp.shared=new Dp;Dp._temp=new Dp;Dp.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let rr=Dp;const e4e={cullArea:null,cullable:!1,cullableChildren:!0};class Y3{constructor(e,i){this._pool=[],this._count=0,this._index=0,this._classType=e,i&&this.prepopulate(i)}prepopulate(e){for(let i=0;i<e;i++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var t;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(t=i.init)==null||t.call(i,e),i}return(e){var i;(i=e.reset)==null||i.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class t4e{constructor(){this._poolsByClass=new Map}prepopulate(e,i){this.getPool(e).prepopulate(i)}get(e,i){return this.getPool(e).get(i)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Y3(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(i=>{const t=e[i._classType.name]?i._classType.name+i._classType.ID:i._classType.name;e[t]={free:i.totalFree,used:i.totalUsed,size:i.totalSize}}),e}}const Kl=new t4e,i4e={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){Hi("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function n4e(n,e,i){const t=n.length;let r;if(e>=t||i===0)return;i=e+i>t?t-e:i;const s=t-i;for(r=e;r<s;++r)n[r]=n[r+i];n.length=s}const r4e={allowChildren:!0,removeChildren(n=0,e){const i=e??this.children.length,t=i-n,r=[];if(t>0&&t<=i){for(let o=i-1;o>=n;o--){const l=this.children[o];l&&(r.push(l),l.parent=null)}n4e(this.children,n,i);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let o=0;o<r.length;++o)this.emit("childRemoved",r[o],this,o),r[o].emit("removed",this);return r}else if(t===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||Hi(sn,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(e<0||e>i.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${i.length}`);if(n.parent){const r=n.parent.children.indexOf(n);if(n.parent===this&&r===e)return n;r!==-1&&n.parent.children.splice(r,1)}e===i.length?i.push(n):i.splice(e,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const t=this.renderGroup||this.parentRenderGroup;return t&&t.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const i=this.getChildIndex(n),t=this.getChildIndex(e);this.children[i]=e,this.children[t]=n;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(e=>this.reparentChildAt(e,this.children.length)),n[0])},reparentChildAt(n,e){if(n.parent===this)return this.setChildIndex(n,e),n;const i=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,e);const t=this.worldTransform.clone();return t.invert(),i.prepend(t),n.setFromMatrix(i),n}};class xL{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class s4e{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let i=0;i<this._tests.length;i++){const t=this._tests[i];if(t.test(e))return Kl.get(t.maskClass,e)}return e}returnMaskEffect(e){Kl.return(e)}}const VM=new s4e;Cs.handleByList(Ht.MaskEffect,VM._effectClasses);const o4e={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((i,t)=>i.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const e=this._maskEffect;(e==null?void 0:e.mask)!==n&&(e&&(this.removeEffect(e),VM.returnMaskEffect(e),this._maskEffect=null),n!=null&&(this._maskEffect=VM.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},set filters(n){var s;!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new xL);n=n;const i=(n==null?void 0:n.length)>0,t=((s=e.filters)==null?void 0:s.length)>0,r=i!==t;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),r&&(i?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new xL),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},a4e={label:null,get name(){return Hi(sn,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){Hi(sn,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const i=this.children;for(let t=0;t<i.length;t++){const r=i[t];if(r.label===n||n instanceof RegExp&&n.test(r.label))return r}if(e)for(let t=0;t<i.length;t++){const s=i[t].getChildByLabel(n,!0);if(s)return s}return null},getChildrenByLabel(n,e=!1,i=[]){const t=this.children;for(let r=0;r<t.length;r++){const s=t[r];(s.label===n||n instanceof RegExp&&n.test(s.label))&&i.push(s)}if(e)for(let r=0;r<t.length;r++)t[r].getChildrenByLabel(n,!0,i);return i}},xs=new Y3(Xi),Np=new Y3(cl);function SQ(n,e,i){i.clear();let t,r;return n.parent?e?t=n.parent.worldTransform:(r=xs.get().identity(),t=j3(n,r)):t=Xi.IDENTITY,CQ(n,i,t,e),r&&xs.return(r),i.isValid||i.set(0,0,0,0),i}function CQ(n,e,i,t){var l,c;if(!n.visible||!n.measurable)return;let r;t?r=n.worldTransform:(n.updateLocalTransform(),r=xs.get(),r.appendFrom(n.localTransform,i));const s=e,o=!!n.effects.length;if(o&&(e=Np.get().clear()),n.boundsArea)e.addRect(n.boundsArea,r);else{n.bounds&&(e.matrix=r,e.addBounds(n.bounds));for(let u=0;u<n.children.length;u++)CQ(n.children[u],e,r,t)}if(o){for(let u=0;u<n.effects.length;u++)(c=(l=n.effects[u]).addBounds)==null||c.call(l,e);s.addBounds(e,Xi.IDENTITY),Np.return(e)}t||xs.return(r)}function j3(n,e){const i=n.parent;return i&&(j3(i,e),i.updateLocalTransform(),e.append(i.localTransform)),e}function kQ(n,e){if(n===16777215||!e)return e;if(e===16777215||!n)return n;const i=n>>16&255,t=n>>8&255,r=n&255,s=e>>16&255,o=e>>8&255,l=e&255,c=i*s/255|0,u=t*o/255|0,d=r*l/255|0;return(c<<16)+(u<<8)+d}const OL=16777215;function wL(n,e){return n===OL?e:e===OL?n:kQ(n,e)}function Fx(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const l4e={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,i=this.parent;for(;i;)e*=i.alpha,i=i.parent;return e},getGlobalTransform(n,e){if(e)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const i=j3(this,xs.get().identity());return n.appendFrom(this.localTransform,i),xs.return(i),n},getGlobalTint(n){if(n)return this.renderGroup?Fx(this.renderGroup.worldColor):this.parentRenderGroup?Fx(wL(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,i=this.parent;for(;i;)e=wL(e,i.localColor),i=i.parent;return Fx(e)}};let Y2=0;const _L=500;function sr(...n){Y2!==_L&&(Y2++,Y2===_L?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function TQ(n,e,i){return e.clear(),i||(i=Xi.IDENTITY),MQ(n,e,i,n,!0),e.isValid||e.set(0,0,0,0),e}function MQ(n,e,i,t,r){var c,u;let s;if(r)s=xs.get(),s=i.copyTo(s);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const d=n.localTransform;s=xs.get(),s.appendFrom(d,i)}const o=e,l=!!n.effects.length;if(l&&(e=Np.get().clear()),n.boundsArea)e.addRect(n.boundsArea,s);else{n.renderPipeId&&(e.matrix=s,e.addBounds(n.bounds));const d=n.children;for(let f=0;f<d.length;f++)MQ(d[f],e,s,t,!1)}if(l){for(let d=0;d<n.effects.length;d++)(u=(c=n.effects[d]).addLocalBounds)==null||u.call(c,e,t);o.addBounds(e,Xi.IDENTITY),Np.return(e)}xs.return(s)}function EQ(n,e){const i=n.children;for(let t=0;t<i.length;t++){const r=i[t],s=r.uid,o=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,l=e.index;(e.data[l]!==s||e.data[l+1]!==o)&&(e.data[e.index]=s,e.data[e.index+1]=o,e.didChange=!0),e.index=l+2,r.children.length&&EQ(r,e)}return e.didChange}const c4e=new Xi,h4e={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const i=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*i:this.scale.x=i},_setHeight(n,e){const i=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*i:this.scale.y=i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new cl});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),EQ(this,n),n.didChange&&TQ(this,n.localBounds,c4e),n.localBounds},getBounds(n,e){return SQ(this,n,e||new cl)}},u4e={_onRender:null,set onRender(n){const e=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},d4e={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(f4e))}};function f4e(n,e){return n._zIndex-e._zIndex}const p4e={getGlobalPosition(n=new Br,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,i=!1){const t=this.getGlobalTransform(xs.get(),i);return e=t.apply(n,e),xs.return(t),e},toLocal(n,e,i,t){e&&(n=e.toGlobal(n,i,t));const r=this.getGlobalTransform(xs.get(),t);return i=r.applyInverse(n,i),xs.return(r),i}};class PQ{constructor(){this.uid=yr("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let m4e=0;class g4e{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,i,t){const r=new gl({...this.textureOptions,width:e,height:i,resolution:1,antialias:t,autoGarbageCollect:!0});return new Li({source:r,label:`texturePool_${m4e++}`})}getOptimalTexture(e,i,t=1,r){let s=Math.ceil(e*t-1e-6),o=Math.ceil(i*t-1e-6);s=qO(s),o=qO(o);const l=(s<<17)+(o<<1)+(r?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let c=this._texturePool[l].pop();return c||(c=this.createTexture(s,o,r)),c.source._resolution=t,c.source.width=s/t,c.source.height=o/t,c.source.pixelWidth=s,c.source.pixelHeight=o,c.frame.x=0,c.frame.y=0,c.frame.width=e,c.frame.height=i,c.updateUvs(),this._poolKeyHash[c.uid]=l,c}getSameSizeTexture(e,i=!1){const t=e.source;return this.getOptimalTexture(e.width,e.height,t._resolution,i)}returnTexture(e){const i=this._poolKeyHash[e.uid];this._texturePool[i].push(e)}clear(e){if(e=e!==!1,e)for(const i in this._texturePool){const t=this._texturePool[i];if(t)for(let r=0;r<t.length;r++)t[r].destroy(!0)}this._texturePool={}}}const v4e=new g4e;class y4e{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Xi,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new PQ,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const i=e.children;for(let t=0;t<i.length;t++){const r=i[t];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(v4e.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const i=this.childrenToUpdate[e];i.list.fill(null),i.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const i=this.renderGroupChildren.indexOf(e);i>-1&&this.renderGroupChildren.splice(i,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const i=e.children;for(let t=0;t<i.length;t++)this.addChild(i[t])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const i=e.children;for(let t=0;t<i.length;t++)this.removeChild(i[t])}removeChildren(e){for(let i=0;i<e.length;i++)this.removeChild(e[i])}onChildUpdate(e){let i=this.childrenToUpdate[e.relativeRenderGroupDepth];i||(i=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),i.list[i.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender()}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const i=this.root.children;for(let t=0;t<i.length;t++)this._getChildren(i[t],e);return e}_getChildren(e,i=[]){if(i.push(e),e.renderGroup)return i;const t=e.children;for(let r=0;r<t.length;r++)this._getChildren(t[r],i);return i}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Xi),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Xi),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Xi),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function b4e(n,e,i={}){for(const t in e)!i[t]&&e[t]!==void 0&&(n[t]=e[t])}const j2=new yo(null),q2=new yo(null),Z2=new yo(null,1,1),SL=1,x4e=2,K2=4;class Wr extends Aa{constructor(e={}){var i,t;super(),this.uid=yr("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Xi,this.relativeGroupTransform=new Xi,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new yo(this,0,0),this._scale=Z2,this._pivot=q2,this._skew=j2,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],b4e(this,e,{children:!0,parent:!0,effects:!0}),(i=e.children)==null||i.forEach(r=>this.addChild(r)),(t=e.parent)==null||t.addChild(this)}static mixin(e){Object.defineProperties(Wr.prototype,Object.getOwnPropertyDescriptors(e))}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Hi(sn,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}const i=e[0],t=this.renderGroup||this.parentRenderGroup;return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),t&&(t.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i._updateFlags=15,t&&t.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),this._didViewChangeTick++,i._zIndex!==0&&i.depthOfChildModified(),i)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}const i=e[0],t=this.children.indexOf(i);return t>-1&&(this._didViewChangeTick++,this.children.splice(t,1),this.renderGroup?this.renderGroup.removeChild(i):this.parentRenderGroup&&this.parentRenderGroup.removeChild(i),i.parent=null,this.emit("childRemoved",i,this,t),i.emit("removed",this)),i}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=Kl.get(y4e,this),this.groupTransform=Xi.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),Kl.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Xi),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*DAe}set angle(e){this.rotation=e*NAe}get pivot(){return this._pivot===q2&&(this._pivot=new yo(this,0,0)),this._pivot}set pivot(e){this._pivot===q2&&(this._pivot=new yo(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===j2&&(this._skew=new yo(this,0,0)),this._skew}set skew(e){this._skew===j2&&(this._skew=new yo(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Z2&&(this._scale=new yo(this,1,1)),this._scale}set scale(e){this._scale===Z2&&(this._scale=new yo(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const i=this.getLocalBounds().width;this._setWidth(e,i)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const i=this.getLocalBounds().height;this._setHeight(e,i)}getSize(e){e||(e={});const i=this.getLocalBounds();return e.width=Math.abs(this.scale.x*i.width),e.height=Math.abs(this.scale.y*i.height),e}setSize(e,i){const t=this.getLocalBounds();typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,t.width),i!==void 0&&this._setHeight(i,t.height)}_updateSkew(){const e=this._rotation,i=this._skew;this._cx=Math.cos(e+i._y),this._sx=Math.sin(e+i._y),this._cy=-Math.sin(e-i._x),this._sy=Math.cos(e-i._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const i=this.localTransform,t=this._scale,r=this._pivot,s=this._position,o=t._x,l=t._y,c=r._x,u=r._y;i.a=this._cx*o,i.b=this._sx*o,i.c=this._cy*l,i.d=this._sy*l,i.tx=s._x-(c*i.a+u*i.c),i.ty=s._y-(c*i.b+u*i.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=SL,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const t=rr.shared.setValue(e??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=SL,this._onUpdate())}get tint(){return Fx(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=x4e,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const i=e?2:0;(this.localDisplayStatus&2)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=K2,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const i=e?0:4;(this.localDisplayStatus&4)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=K2,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const i=e?1:0;(this.localDisplayStatus&1)!==i&&(this._updateFlags|=K2,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var r;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&i)for(let s=0;s<i.length;++s)i[s].destroy(e);(r=this.renderGroup)==null||r.destroy(),this.renderGroup=null}}Wr.mixin(r4e);Wr.mixin(p4e);Wr.mixin(u4e);Wr.mixin(h4e);Wr.mixin(o4e);Wr.mixin(a4e);Wr.mixin(d4e);Wr.mixin(e4e);Wr.mixin(i4e);Wr.mixin(l4e);class AQ extends Wr{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new cl(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const i=this.bounds,{x:t,y:r}=e;return t>=i.minX&&t<=i.maxX&&r>=i.minY&&r<=i.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}}class Av extends AQ{constructor(e=Li.EMPTY){e instanceof Li&&(e={texture:e});const{texture:i=Li.EMPTY,anchor:t,roundPixels:r,width:s,height:o,...l}=e;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new yo({_onUpdate:()=>{this.onViewUpdate()}}),t?this.anchor=t:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=r??!1,s!==void 0&&(this.width=s),o!==void 0&&(this.height=o)}static from(e,i=!1){return e instanceof Li?new Av(e):new Av(Li.from(e,i))}set texture(e){e||(e=Li.EMPTY);const i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return WAe(this._visualBounds,this._anchor,this._texture,0),this._visualBounds}get sourceBounds(){return Hi("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,i=this._texture,t=this._bounds,{width:r,height:s}=i.orig;t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*s,t.maxY=t.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,i){typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),i!==void 0&&this._setHeight(i,this._texture.orig.height)}}const O4e=new cl;function RQ(n,e,i){const t=O4e;n.measurable=!0,SQ(n,i,t),e.addBoundsMask(t),n.measurable=!1}function IQ(n,e,i){const t=Np.get();n.measurable=!0;const r=xs.get().identity(),s=DQ(n,i,r);TQ(n,t,s),n.measurable=!1,e.addBoundsMask(t),xs.return(r),Np.return(t)}function DQ(n,e,i){return n?(n!==e&&(DQ(n.parent,e,i),n.updateLocalTransform(),i.append(n.localTransform)),i):(sr("Mask bounds, renderable is not inside the root container"),i)}class NQ{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Av),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,i){this.inverse||RQ(this.mask,e,i)}addLocalBounds(e,i){IQ(this.mask,e,i)}containsPoint(e,i){const t=this.mask;return i(t,e)}destroy(){this.reset()}static test(e){return e instanceof Av}}NQ.extension=Ht.MaskEffect;class $Q{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}$Q.extension=Ht.MaskEffect;class VQ{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,i){RQ(this.mask,e,i)}addLocalBounds(e,i){IQ(this.mask,e,i)}containsPoint(e,i){const t=this.mask;return i(t,e)}destroy(){this.reset()}static test(e){return e instanceof Wr}}VQ.extension=Ht.MaskEffect;const w4e={createCanvas:(n,e)=>{const i=document.createElement("canvas");return i.width=n,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let CL=w4e;const zn={get(){return CL},set(n){CL=n}};class LQ extends gl{constructor(e){e.resource||(e.resource=zn.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,i=this.height,t=this._resolution){const r=super.resize(e,i,t);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}LQ.extension=Ht.TextureSource;class Kp extends gl{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const i=zn.get().createCanvas(e.resource.width,e.resource.height);i.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=i,sr("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Kp.extension=Ht.TextureSource;var LM=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(LM||{});class J2{constructor(e,i=null,t=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=i,this.priority=t,this._once=r}match(e,i=null){return this._fn===e&&this._context===i}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const i=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=e?null:i,this.previous=null,i}}const BQ=class po{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new J2(null,null,1/0),this.deltaMS=1/po.targetFPMS,this.elapsedMS=1/po.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,i,t=LM.NORMAL){return this._addListener(new J2(e,i,t))}addOnce(e,i,t=LM.NORMAL){return this._addListener(new J2(e,i,t,!0))}_addListener(e){let i=this._head.next,t=this._head;if(!i)e.connect(t);else{for(;i;){if(e.priority>i.priority){e.connect(t);break}t=i,i=i.next}e.previous||e.connect(t)}return this._startIfPossible(),this}remove(e,i){let t=this._head.next;for(;t;)t.match(e,i)?t=t.destroy():t=t.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,i=this._head;for(;i=i.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if(i=this.elapsedMS=e-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*po.targetFPMS;const t=this._head;let r=t.next;for(;r;)r=r.emit(this);t.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const i=Math.min(this.maxFPS,e),t=Math.min(Math.max(0,i)/1e3,po.targetFPMS);this._maxElapsedMS=1/t}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const i=Math.max(this.minFPS,e);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!po._shared){const e=po._shared=new po;e.autoStart=!0,e._protected=!0}return po._shared}static get system(){if(!po._system){const e=po._system=new po;e.autoStart=!0,e._protected=!0}return po._system}};BQ.targetFPMS=.06;let rx=BQ,ek;async function UQ(){return ek??(ek=(async()=>{var o;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const i=await new Promise(l=>{const c=document.createElement("video");c.onloadeddata=()=>l(c),c.onerror=()=>l(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!i)return"premultiply-alpha-on-upload";const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(r),e.deleteTexture(t),(o=e.getExtension("WEBGL_lose_context"))==null||o.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),ek}const y_=class FQ extends gl{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...FQ.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=rx.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,i=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(i.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await UQ(),this._load=new Promise((t,r)=>{this.isValid?t(this):(this._resolve=t,this._reject=r,i.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${i.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(rx.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(rx.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(rx.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};y_.extension=Ht.TextureSource;y_.defaultOptions={...gl.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};y_.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let zx=y_;const xa=(n,e,i=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(t=>typeof t=="string"||i?e(t):t):n);class _4e{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const i=this._cache.get(e);return i||sr(`[Assets] Asset id ${e} was not found in the Cache`),i}set(e,i){const t=xa(e);let r;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.test(i)){r=u.getCacheableAssets(t,i);break}}const s=new Map(Object.entries(r||{}));r||t.forEach(c=>{s.set(c,i)});const o=[...s.keys()],l={cacheKeys:o,keys:t};t.forEach(c=>{this._cacheMap.set(c,l)}),o.forEach(c=>{const u=r?r[c]:i;this._cache.has(c)&&this._cache.get(c)!==u&&sr("[Cache] already has key:",c),this._cache.set(c,s.get(c))})}remove(e){if(!this._cacheMap.has(e)){sr(`[Assets] Asset id ${e} was not found in the Cache`);return}const i=this._cacheMap.get(e);i.cacheKeys.forEach(r=>{this._cache.delete(r)}),i.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Bn=new _4e,BM=[];Cs.handleByList(Ht.TextureSource,BM);function zQ(n={}){const e=n&&n.resource,i=e?n.resource:n,t=e?n:{resource:n};for(let r=0;r<BM.length;r++){const s=BM[r];if(s.test(i))return new s(t)}throw new Error(`Could not find a source type for resource: ${t.resource}`)}function S4e(n={},e=!1){const i=n&&n.resource,t=i?n.resource:n,r=i?n:{resource:n};if(!e&&Bn.has(t))return Bn.get(t);const s=new Li({source:zQ(r)});return s.on("destroy",()=>{Bn.has(t)&&Bn.remove(t)}),e||Bn.set(t,s),s}function C4e(n,e=!1){return typeof n=="string"?Bn.get(n):n instanceof gl?new Li({source:n}):S4e(n,e)}Li.from=C4e;gl.from=zQ;Cs.add(NQ,$Q,VQ,zx,Kp,LQ,G3);var Fh=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Fh||{});function va(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function e0(n){return n.split("?")[0].split("#")[0]}function k4e(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T4e(n,e,i){return n.replace(new RegExp(k4e(e),"g"),i)}function M4e(n,e){let i="",t=0,r=-1,s=0,o=-1;for(let l=0;l<=n.length;++l){if(l<n.length)o=n.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(r===l-1||s===1))if(r!==l-1&&s===2){if(i.length<2||t!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const c=i.lastIndexOf("/");if(c!==i.length-1){c===-1?(i="",t=0):(i=i.slice(0,c),t=i.length-1-i.lastIndexOf("/")),r=l,s=0;continue}}else if(i.length===2||i.length===1){i="",t=0,r=l,s=0;continue}}}else i.length>0?i+=`/${n.slice(r+1,l)}`:i=n.slice(r+1,l),t=l-r-1;r=l,s=0}else o===46&&s!==-1?++s:s=-1}return i}const To={toPosix(n){return T4e(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){va(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const i=/^[^/:]+:\/{0,2}/.exec(n);return i?i[0]:""},toAbsolute(n,e,i){if(va(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const t=e0(this.toPosix(e??zn.get().getBaseUrl())),r=e0(this.toPosix(i??this.rootname(t)));return n=this.toPosix(n),n.startsWith("/")?To.join(r,n.slice(1)):this.isAbsolute(n)?n:this.join(t,n)},normalize(n){if(va(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const i=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const t=n.endsWith("/");return n=M4e(n),n.length>0&&t&&(n+="/"),i?`/${n}`:e+n},isAbsolute(n){return va(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let i=0;i<n.length;++i){const t=n[i];if(va(t),t.length>0)if(e===void 0)e=t;else{const r=n[i-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${t}`:e+=`/${t}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(va(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const i=e===47;let t=-1,r=!0;const s=this.getProtocol(n),o=n;n=n.slice(s.length);for(let l=n.length-1;l>=1;--l)if(e=n.charCodeAt(l),e===47){if(!r){t=l;break}}else r=!1;return t===-1?i?"/":this.isUrl(o)?s+n:s:i&&t===1?"//":s+n.slice(0,t)},rootname(n){va(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const i=n.indexOf("/",e.length);i!==-1?e=n.slice(0,i):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){va(n),e&&va(e),n=e0(this.toPosix(n));let i=0,t=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let o=e.length-1,l=-1;for(s=n.length-1;s>=0;--s){const c=n.charCodeAt(s);if(c===47){if(!r){i=s+1;break}}else l===-1&&(r=!1,l=s+1),o>=0&&(c===e.charCodeAt(o)?--o===-1&&(t=s):(o=-1,t=l))}return i===t?t=l:t===-1&&(t=n.length),n.slice(i,t)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!r){i=s+1;break}}else t===-1&&(r=!1,t=s+1);return t===-1?"":n.slice(i,t)},extname(n){va(n),n=e0(this.toPosix(n));let e=-1,i=0,t=-1,r=!0,s=0;for(let o=n.length-1;o>=0;--o){const l=n.charCodeAt(o);if(l===47){if(!r){i=o+1;break}continue}t===-1&&(r=!1,t=o+1),l===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||t===-1||s===0||s===1&&e===t-1&&e===i+1?"":n.slice(e,t)},parse(n){va(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=e0(this.toPosix(n));let i=n.charCodeAt(0);const t=this.isAbsolute(n);let r;e.root=this.rootname(n),t||this.hasProtocol(n)?r=1:r=0;let s=-1,o=0,l=-1,c=!0,u=n.length-1,d=0;for(;u>=r;--u){if(i=n.charCodeAt(u),i===47){if(!c){o=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===46?s===-1?s=u:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?l!==-1&&(o===0&&t?e.base=e.name=n.slice(1,l):e.base=e.name=n.slice(o,l)):(o===0&&t?(e.name=n.slice(1,s),e.base=n.slice(1,l)):(e.name=n.slice(o,s),e.base=n.slice(o,l)),e.ext=n.slice(s,l)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function XQ(n,e,i,t,r){const s=e[i];for(let o=0;o<s.length;o++){const l=s[o];i<e.length-1?XQ(n.replace(t[i],l),e,i+1,t,r):r.push(n.replace(t[i],l))}}function E4e(n){const e=/\{(.*?)\}/g,i=n.match(e),t=[];if(i){const r=[];i.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),XQ(n,r,0,i,t)}else t.push(n);return t}const ZO=n=>!Array.isArray(n);class Jp{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,i)=>`${e}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(e,i)=>i.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const i=e;this._defaultSearchParams=Object.keys(i).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(i[t])}`).join("&")}}getAlias(e){const{alias:i,src:t}=e;return xa(i||t,s=>typeof s=="string"?s:Array.isArray(s)?s.map(o=>(o==null?void 0:o.src)??o):s!=null&&s.src?s.src:s,!0)}addManifest(e){this._manifest&&sr("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(e,i){const t=[];let r=i;Array.isArray(i)||(r=Object.entries(i).map(([s,o])=>typeof o=="string"||Array.isArray(o)?{alias:s,src:o}:{alias:s,...o})),r.forEach(s=>{const o=s.src,l=s.alias;let c;if(typeof l=="string"){const u=this._createBundleAssetId(e,l);t.push(u),c=[l,u]}else{const u=l.map(d=>this._createBundleAssetId(e,d));t.push(...u),c=[...l,...u]}this.add({...s,alias:c,src:o})}),this._bundles[e]=t}add(e){const i=[];Array.isArray(e)?i.push(...e):i.push(e);let t;t=s=>{this.hasKey(s)&&sr(`[Resolver] already has key: ${s} overwriting`)},xa(i).forEach(s=>{const{src:o}=s;let{data:l,format:c,loadParser:u}=s;const d=xa(o).map(g=>typeof g=="string"?E4e(g):Array.isArray(g)?g:[g]),f=this.getAlias(s);Array.isArray(f)?f.forEach(t):t(f);const m=[];d.forEach(g=>{g.forEach(y=>{let x={};if(typeof y!="object"){x.src=y;for(let b=0;b<this._parsers.length;b++){const S=this._parsers[b];if(S.test(y)){x=S.parse(y);break}}}else l=y.data??l,c=y.format??c,u=y.loadParser??u,x={...x,...y};if(!f)throw new Error(`[Resolver] alias is undefined for this asset: ${x.src}`);x=this._buildResolvedAsset(x,{aliases:f,data:l,format:c,loadParser:u}),m.push(x)})}),f.forEach(g=>{this._assetMap[g]=m})})}resolveBundle(e){const i=ZO(e);e=xa(e);const t={};return e.forEach(r=>{const s=this._bundles[r];if(s){const o=this.resolve(s),l={};for(const c in o){const u=o[c];l[this._extractAssetIdFromBundle(r,c)]=u}t[r]=l}}),i?t[e[0]]:t}resolveUrl(e){const i=this.resolve(e);if(typeof e!="string"){const t={};for(const r in i)t[r]=i[r].src;return t}return i.src}resolve(e){const i=ZO(e);e=xa(e);const t={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s);o==null||o.priority.forEach(l=>{o.params[l].forEach(c=>{const u=s.filter(d=>d[l]?d[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});t[r]=this._resolverHash[r]}),i?t[e[0]]:t}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let i=0;i<e.length;i++){const t=e[0],r=this._preferredOrder.find(s=>s.params.format.includes(t.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const i=/\?/.test(e)?"&":"?";return`${e}${i}${this._defaultSearchParams}`}_buildResolvedAsset(e,i){const{aliases:t,data:r,loadParser:s,format:o}=i;return(this._basePath||this._rootPath)&&(e.src=To.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=t??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??P4e(e.src),e}}Jp.RETINA_PREFIX=/@([0-9\.]+)x/;function P4e(n){return n.split(".").pop().split("?").shift().split("#").shift()}const UM=(n,e)=>{const i=e.split("?")[1];return i&&(n+=`?${i}`),n},WQ=class g0{constructor(e,i){this.linkedSheets=[],this._texture=e instanceof Li?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=i;const t=parseFloat(i.meta.scale);t?(this.resolution=t,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=g0.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e;const t=g0.BATCH_SIZE;for(;i-e<t&&i<this._frameKeys.length;){const r=this._frameKeys[i],s=this._frames[r],o=s.frame;if(o){let l=null,c=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new vr(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?l=new vr(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):l=new vr(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(c=new vr(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new Li({source:this.textureSource,frame:l,orig:d,trim:c,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}i++}}_processAnimations(){const e=this.data.animations||{};for(const i in e){this.animations[i]=[];for(let t=0;t<e[i].length;t++){const r=e[i][t];this.animations[i].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*g0.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*g0.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var i;for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((i=this._texture)==null||i.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};WQ.BATCH_SIZE=1e3;let kL=WQ;const A4e=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function QQ(n,e,i){const t={};if(n.forEach(r=>{t[r]=e}),Object.keys(e.textures).forEach(r=>{t[r]=e.textures[r]}),!i){const r=To.dirname(n[0]);e.linkedSheets.forEach((s,o)=>{const l=QQ([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(t,l)})}return t}const R4e={extension:Ht.Asset,cache:{test:n=>n instanceof kL,getCacheableAssets:(n,e)=>QQ(n,e,!1)},resolver:{extension:{type:Ht.ResolveParser,name:"resolveSpritesheet"},test:n=>{const i=n.split("?")[0].split("."),t=i.pop(),r=i.pop();return t==="json"&&A4e.includes(r)},parse:n=>{var i;const e=n.split(".");return{resolution:parseFloat(((i=Jp.RETINA_PREFIX.exec(n))==null?void 0:i[1])??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:Ht.LoadParser,priority:Fh.Normal,name:"spritesheetLoader"},async testParse(n,e){return To.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,i){var u,d;const{texture:t,imageFilename:r}=(e==null?void 0:e.data)??{};let s=To.dirname(e.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let o;if(t instanceof Li)o=t;else{const f=UM(s+(r??n.meta.image),e.src);o=(await i.load([f]))[f]}const l=new kL(o.source,n);await l.parse();const c=(u=n==null?void 0:n.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(c)){const f=[];for(const g of c){if(typeof g!="string")continue;let y=s+g;(d=e.data)!=null&&d.ignoreMultiPack||(y=UM(y,e.src),f.push(i.load({src:y,data:{ignoreMultiPack:!0}})))}const m=await Promise.all(f);l.linkedSheets=m,m.forEach(g=>{g.linkedSheets=[l].concat(l.linkedSheets.filter(y=>y!==g))})}return l},async unload(n,e,i){await i.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Cs.add(R4e);const tk=Object.create(null),TL=Object.create(null);function q3(n,e){let i=TL[n];return i===void 0&&(tk[e]===void 0&&(tk[e]=1),TL[n]=i=tk[e]++),i}let Of;function HQ(){return(!Of||Of!=null&&Of.isContextLost())&&(Of=zn.get().createCanvas().getContext("webgl",{})),Of}let sx;function I4e(){if(!sx){sx="mediump";const n=HQ();n&&n.getShaderPrecisionFormat&&(sx=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return sx}function D4e(n,e,i){return e?n:i?(n=n.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function N4e(n,e,i){const t=i?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let r=i?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&t!=="highp"&&(r="mediump"),`precision ${r} float;
${n}`}else if(t!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function $4e(n,e){return e?`#version 300 es
${n}`:n}const V4e={},L4e={};function B4e(n,{name:e="pixi-program"},i=!0){e=e.replace(/\s+/g,"-"),e+=i?"-fragment":"-vertex";const t=i?V4e:L4e;return t[e]?(t[e]++,e+=`-${t[e]}`):t[e]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${e}`}
${n}`}function U4e(n,e){return e?n.replace("#version 300 es",""):n}const ik={stripVersion:U4e,ensurePrecision:N4e,addProgramDefines:D4e,setProgramName:B4e,insertVersion:$4e},nk=Object.create(null),GQ=class FM{constructor(e){e={...FM.defaultOptions,...e};const i=e.fragment.indexOf("#version 300 es")!==-1,t={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:I4e()},setProgramName:{name:e.name},addProgramDefines:i,insertVersion:i};let r=e.fragment,s=e.vertex;Object.keys(ik).forEach(o=>{const l=t[o];r=ik[o](r,l,!0),s=ik[o](s,l,!1)}),this.fragment=r,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=q3(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const i=`${e.vertex}:${e.fragment}`;return nk[i]||(nk[i]=new FM(e)),nk[i]}};GQ.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let YQ=GQ;const ML={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function F4e(n){return ML[n]??ML.float32}const z4e={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function X4e({source:n,entryPoint:e}){const i={},t=n.indexOf(`fn ${e}`);if(t!==-1){const r=n.indexOf("->",t);if(r!==-1){const s=n.substring(t,r),o=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let l;for(;(l=o.exec(s))!==null;){const c=z4e[l[3]]??"float32";i[l[2]]={location:parseInt(l[1],10),format:c,stride:F4e(c).stride,offset:0,instance:!1,start:0}}}}return i}function rk(n){var f,m;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,i=/@group\((\d+)\)/,t=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,o=/struct\s+(\w+)\s*{([^}]+)}/g,l=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,u=(f=n.match(e))==null?void 0:f.map(g=>({group:parseInt(g.match(i)[1],10),binding:parseInt(g.match(t)[1],10),name:g.match(r)[2],isUniform:g.match(r)[1]==="<uniform>",type:g.match(s)[1]}));if(!u)return{groups:[],structs:[]};const d=((m=n.match(o))==null?void 0:m.map(g=>{const y=g.match(c)[1],x=g.match(l).reduce((b,S)=>{const[_,O]=S.split(":");return b[_.trim()]=O.trim(),b},{});return x?{name:y,members:x}:null}).filter(({name:g})=>u.some(y=>y.type===g)))??[];return{groups:u,structs:d}}var v0=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(v0||{});function W4e({groups:n}){const e=[];for(let i=0;i<n.length;i++){const t=n[i];e[t.group]||(e[t.group]=[]),t.isUniform?e[t.group].push({binding:t.binding,visibility:v0.VERTEX|v0.FRAGMENT,buffer:{type:"uniform"}}):t.type==="sampler"?e[t.group].push({binding:t.binding,visibility:v0.FRAGMENT,sampler:{type:"filtering"}}):t.type==="texture_2d"&&e[t.group].push({binding:t.binding,visibility:v0.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function Q4e({groups:n}){const e=[];for(let i=0;i<n.length;i++){const t=n[i];e[t.group]||(e[t.group]={}),e[t.group][t.name]=t.binding}return e}function H4e(n,e){const i=new Set,t=new Set,r=[...n.structs,...e.structs].filter(o=>i.has(o.name)?!1:(i.add(o.name),!0)),s=[...n.groups,...e.groups].filter(o=>{const l=`${o.name}-${o.binding}`;return t.has(l)?!1:(t.add(l),!0)});return{structs:r,groups:s}}const sk=Object.create(null);class b_{constructor(e){var l,c;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:i,vertex:t,layout:r,gpuLayout:s,name:o}=e;if(this.name=o,this.fragment=i,this.vertex=t,i.source===t.source){const u=rk(i.source);this.structsAndGroups=u}else{const u=rk(t.source),d=rk(i.source);this.structsAndGroups=H4e(u,d)}this.layout=r??Q4e(this.structsAndGroups),this.gpuLayout=s??W4e(this.structsAndGroups),this.autoAssignGlobalUniforms=((l=this.layout[0])==null?void 0:l.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((c=this.layout[1])==null?void 0:c.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:i}=this,t=e.source+i.source+e.entryPoint+i.entryPoint;this._layoutKey=q3(t,"program")}get attributeData(){return this._attributeData??(this._attributeData=X4e(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){const i=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return sk[i]||(sk[i]=new b_(e)),sk[i]}}const jQ=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],G4e=jQ.reduce((n,e)=>(n[e]=!0,n),{});function Y4e(n,e){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const qQ=class ZQ{constructor(e,i){this._touched=0,this.uid=yr("uniform"),this._resourceType="uniformGroup",this._resourceId=yr("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...ZQ.defaultOptions,...i},this.uniformStructures=e;const t={};for(const r in e){const s=e[r];if(s.name=r,s.size=s.size??1,!G4e[s.type])throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${jQ.join(", ")}`);s.value??(s.value=Y4e(s.type,s.size)),t[r]=s.value}this.uniforms=t,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=q3(Object.keys(t).map(r=>`${r}-${e[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};qQ.defaultOptions={ubo:!1,isStatic:!1};let KQ=qQ;class Xx{constructor(e){this.resources=Object.create(null),this._dirty=!0;let i=0;for(const t in e){const r=e[t];this.setResource(r,i++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let i=0;for(const t in this.resources)e[i++]=this.resources[t]._resourceId;this._key=e.join("|")}setResource(e,i){var r,s;const t=this.resources[i];e!==t&&(t&&((r=e.off)==null||r.call(e,"change",this.onResourceChange,this)),(s=e.on)==null||s.call(e,"change",this.onResourceChange,this),this.resources[i]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const i=this.resources;for(const t in i)i[t]._touched=e}destroy(){var i;const e=this.resources;for(const t in e){const r=e[t];(i=r.off)==null||i.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const i=this.resources;for(const t in i)i[t]===e&&(i[t]=null)}else this._updateKey()}}var zM=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(zM||{});class Z3 extends Aa{constructor(e){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:i,glProgram:t,groups:r,resources:s,compatibleRenderers:o,groupMap:l}=e;this.gpuProgram=i,this.glProgram=t,o===void 0&&(o=0,i&&(o|=zM.WEBGPU),t&&(o|=zM.WEBGL)),this.compatibleRenderers=o;const c={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!i&&r&&!l)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!i&&r&&l)for(const u in l)for(const d in l[u]){const f=l[u][d];c[f]={group:u,binding:d,name:f}}else if(i&&r&&!l){const u=i.structsAndGroups.groups;l={},u.forEach(d=>{l[d.group]=l[d.group]||{},l[d.group][d.binding]=d.name,c[d.name]=d})}else if(s){r={},l={},i&&i.structsAndGroups.groups.forEach(f=>{l[f.group]=l[f.group]||{},l[f.group][f.binding]=f.name,c[f.name]=f});let u=0;for(const d in s)c[d]||(r[99]||(r[99]=new Xx,this._ownedBindGroups.push(r[99])),c[d]={group:99,binding:u,name:d},l[99]=l[99]||{},l[99][u]=d,u++);for(const d in s){const f=d;let m=s[d];!m.source&&!m._resourceType&&(m=new KQ(m));const g=c[f];g&&(r[g.group]||(r[g.group]=new Xx,this._ownedBindGroups.push(r[g.group])),r[g.group].setResource(m,g.binding))}}this.groups=r,this._uniformBindMap=l,this.resources=this._buildResourceAccessor(r,c)}addResource(e,i,t){var r,s;(r=this._uniformBindMap)[i]||(r[i]={}),(s=this._uniformBindMap[i])[t]||(s[t]=e),this.groups[i]||(this.groups[i]=new Xx,this._ownedBindGroups.push(this.groups[i]))}_buildResourceAccessor(e,i){const t={};for(const r in i){const s=i[r];Object.defineProperty(t,s.name,{get(){return e[s.group].getResource(s.binding)},set(o){e[s.group].setResource(o,s.binding)}})}return t}destroy(e=!1){var i,t;this.emit("destroy",this),e&&((i=this.gpuProgram)==null||i.destroy(),(t=this.glProgram)==null||t.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:i,gl:t,...r}=e;let s,o;return i&&(s=b_.from(i)),t&&(o=YQ.from(t)),new Z3({gpuProgram:s,glProgram:o,...r})}}const XM=[];Cs.handleByNamedList(Ht.Environment,XM);async function j4e(n){if(!n)for(let e=0;e<XM.length;e++){const i=XM[e];if(i.value.test()){await i.value.load();return}}}let t0;function q4e(){if(typeof t0=="boolean")return t0;try{t0=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{t0=!1}return t0}var K3={exports:{}};K3.exports=x_;K3.exports.default=x_;function x_(n,e,i){i=i||2;var t=e&&e.length,r=t?e[0]*i:n.length,s=JQ(n,0,r,i,!0),o=[];if(!s||s.next===s.prev)return o;var l,c,u,d,f,m,g;if(t&&(s=t5e(n,e,s,i)),n.length>80*i){l=u=n[0],c=d=n[1];for(var y=i;y<r;y+=i)f=n[y],m=n[y+1],f<l&&(l=f),m<c&&(c=m),f>u&&(u=f),m>d&&(d=m);g=Math.max(u-l,d-c),g=g!==0?32767/g:0}return Rv(s,o,i,l,c,g,0),o}function JQ(n,e,i,t,r){var s,o;if(r===HM(n,e,i,t)>0)for(s=e;s<i;s+=t)o=EL(s,n[s],n[s+1],o);else for(s=i-t;s>=e;s-=t)o=EL(s,n[s],n[s+1],o);return o&&O_(o,o.next)&&(Dv(o),o=o.next),o}function md(n,e){if(!n)return n;e||(e=n);var i=n,t;do if(t=!1,!i.steiner&&(O_(i,i.next)||Dn(i.prev,i,i.next)===0)){if(Dv(i),i=e=i.prev,i===i.next)break;t=!0}else i=i.next;while(t||i!==e);return e}function Rv(n,e,i,t,r,s,o){if(n){!o&&s&&o5e(n,t,r,s);for(var l=n,c,u;n.prev!==n.next;){if(c=n.prev,u=n.next,s?K4e(n,t,r,s):Z4e(n)){e.push(c.i/i|0),e.push(n.i/i|0),e.push(u.i/i|0),Dv(n),n=u.next,l=u.next;continue}if(n=u,n===l){o?o===1?(n=J4e(md(n),e,i),Rv(n,e,i,t,r,s,2)):o===2&&e5e(n,e,i,t,r,s):Rv(md(n),e,i,t,r,s,1);break}}}}function Z4e(n){var e=n.prev,i=n,t=n.next;if(Dn(e,i,t)>=0)return!1;for(var r=e.x,s=i.x,o=t.x,l=e.y,c=i.y,u=t.y,d=r<s?r<o?r:o:s<o?s:o,f=l<c?l<u?l:u:c<u?c:u,m=r>s?r>o?r:o:s>o?s:o,g=l>c?l>u?l:u:c>u?c:u,y=t.next;y!==e;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=g&&Nf(r,l,s,c,o,u,y.x,y.y)&&Dn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function K4e(n,e,i,t){var r=n.prev,s=n,o=n.next;if(Dn(r,s,o)>=0)return!1;for(var l=r.x,c=s.x,u=o.x,d=r.y,f=s.y,m=o.y,g=l<c?l<u?l:u:c<u?c:u,y=d<f?d<m?d:m:f<m?f:m,x=l>c?l>u?l:u:c>u?c:u,b=d>f?d>m?d:m:f>m?f:m,S=WM(g,y,e,i,t),_=WM(x,b,e,i,t),O=n.prevZ,k=n.nextZ;O&&O.z>=S&&k&&k.z<=_;){if(O.x>=g&&O.x<=x&&O.y>=y&&O.y<=b&&O!==r&&O!==o&&Nf(l,d,c,f,u,m,O.x,O.y)&&Dn(O.prev,O,O.next)>=0||(O=O.prevZ,k.x>=g&&k.x<=x&&k.y>=y&&k.y<=b&&k!==r&&k!==o&&Nf(l,d,c,f,u,m,k.x,k.y)&&Dn(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;O&&O.z>=S;){if(O.x>=g&&O.x<=x&&O.y>=y&&O.y<=b&&O!==r&&O!==o&&Nf(l,d,c,f,u,m,O.x,O.y)&&Dn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;k&&k.z<=_;){if(k.x>=g&&k.x<=x&&k.y>=y&&k.y<=b&&k!==r&&k!==o&&Nf(l,d,c,f,u,m,k.x,k.y)&&Dn(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function J4e(n,e,i){var t=n;do{var r=t.prev,s=t.next.next;!O_(r,s)&&eH(r,t,t.next,s)&&Iv(r,s)&&Iv(s,r)&&(e.push(r.i/i|0),e.push(t.i/i|0),e.push(s.i/i|0),Dv(t),Dv(t.next),t=n=s),t=t.next}while(t!==n);return md(t)}function e5e(n,e,i,t,r,s){var o=n;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&c5e(o,l)){var c=tH(o,l);o=md(o,o.next),c=md(c,c.next),Rv(o,e,i,t,r,s,0),Rv(c,e,i,t,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function t5e(n,e,i,t){var r=[],s,o,l,c,u;for(s=0,o=e.length;s<o;s++)l=e[s]*t,c=s<o-1?e[s+1]*t:n.length,u=JQ(n,l,c,t,!1),u===u.next&&(u.steiner=!0),r.push(l5e(u));for(r.sort(i5e),s=0;s<r.length;s++)i=n5e(r[s],i);return i}function i5e(n,e){return n.x-e.x}function n5e(n,e){var i=r5e(n,e);if(!i)return e;var t=tH(i,n);return md(t,t.next),md(i,i.next)}function r5e(n,e){var i=e,t=n.x,r=n.y,s=-1/0,o;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var l=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=t&&l>s&&(s=l,o=i.x<i.next.x?i:i.next,l===t))return o}i=i.next}while(i!==e);if(!o)return null;var c=o,u=o.x,d=o.y,f=1/0,m;i=o;do t>=i.x&&i.x>=u&&t!==i.x&&Nf(r<d?t:s,r,u,d,r<d?s:t,r,i.x,i.y)&&(m=Math.abs(r-i.y)/(t-i.x),Iv(i,n)&&(m<f||m===f&&(i.x>o.x||i.x===o.x&&s5e(o,i)))&&(o=i,f=m)),i=i.next;while(i!==c);return o}function s5e(n,e){return Dn(n.prev,n,e.prev)<0&&Dn(e.next,n,n.next)<0}function o5e(n,e,i,t){var r=n;do r.z===0&&(r.z=WM(r.x,r.y,e,i,t)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,a5e(r)}function a5e(n){var e,i,t,r,s,o,l,c,u=1;do{for(i=n,n=null,s=null,o=0;i;){for(o++,t=i,l=0,e=0;e<u&&(l++,t=t.nextZ,!!t);e++);for(c=u;l>0||c>0&&t;)l!==0&&(c===0||!t||i.z<=t.z)?(r=i,i=i.nextZ,l--):(r=t,t=t.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=t}s.nextZ=null,u*=2}while(o>1);return n}function WM(n,e,i,t,r){return n=(n-i)*r|0,e=(e-t)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function l5e(n){var e=n,i=n;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==n);return i}function Nf(n,e,i,t,r,s,o,l){return(r-o)*(e-l)>=(n-o)*(s-l)&&(n-o)*(t-l)>=(i-o)*(e-l)&&(i-o)*(s-l)>=(r-o)*(t-l)}function c5e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!h5e(n,e)&&(Iv(n,e)&&Iv(e,n)&&u5e(n,e)&&(Dn(n.prev,n,e.prev)||Dn(n,e.prev,e))||O_(n,e)&&Dn(n.prev,n,n.next)>0&&Dn(e.prev,e,e.next)>0)}function Dn(n,e,i){return(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y)}function O_(n,e){return n.x===e.x&&n.y===e.y}function eH(n,e,i,t){var r=ax(Dn(n,e,i)),s=ax(Dn(n,e,t)),o=ax(Dn(i,t,n)),l=ax(Dn(i,t,e));return!!(r!==s&&o!==l||r===0&&ox(n,i,e)||s===0&&ox(n,t,e)||o===0&&ox(i,n,t)||l===0&&ox(i,e,t))}function ox(n,e,i){return e.x<=Math.max(n.x,i.x)&&e.x>=Math.min(n.x,i.x)&&e.y<=Math.max(n.y,i.y)&&e.y>=Math.min(n.y,i.y)}function ax(n){return n>0?1:n<0?-1:0}function h5e(n,e){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==e.i&&i.next.i!==e.i&&eH(i,i.next,n,e))return!0;i=i.next}while(i!==n);return!1}function Iv(n,e){return Dn(n.prev,n,n.next)<0?Dn(n,e,n.next)>=0&&Dn(n,n.prev,e)>=0:Dn(n,e,n.prev)<0||Dn(n,n.next,e)<0}function u5e(n,e){var i=n,t=!1,r=(n.x+e.x)/2,s=(n.y+e.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(t=!t),i=i.next;while(i!==n);return t}function tH(n,e){var i=new QM(n.i,n.x,n.y),t=new QM(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,i.next=r,r.prev=i,t.next=i,i.prev=t,s.next=t,t.prev=s,t}function EL(n,e,i,t){var r=new QM(n,e,i);return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function Dv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function QM(n,e,i){this.i=n,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}x_.deviation=function(n,e,i,t){var r=e&&e.length,s=r?e[0]*i:n.length,o=Math.abs(HM(n,0,s,i));if(r)for(var l=0,c=e.length;l<c;l++){var u=e[l]*i,d=l<c-1?e[l+1]*i:n.length;o-=Math.abs(HM(n,u,d,i))}var f=0;for(l=0;l<t.length;l+=3){var m=t[l]*i,g=t[l+1]*i,y=t[l+2]*i;f+=Math.abs((n[m]-n[y])*(n[g+1]-n[m+1])-(n[m]-n[g])*(n[y+1]-n[m+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function HM(n,e,i,t){for(var r=0,s=e,o=i-t;s<i;s+=t)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}x_.flatten=function(n){for(var e=n[0][0].length,i={vertices:[],holes:[],dimensions:e},t=0,r=0;r<n.length;r++){for(var s=0;s<n[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(n[r][s][o]);r>0&&(t+=n[r-1].length,i.holes.push(t))}return i};var d5e=K3.exports;const f5e=Yp(d5e);var iH=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(iH||{});class p5e{constructor(e){this.items=[],this._name=e}emit(e,i,t,r,s,o,l,c){const{name:u,items:d}=this;for(let f=0,m=d.length;f<m;f++)d[f][u](e,i,t,r,s,o,l,c);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const i=this.items.indexOf(e);return i!==-1&&this.items.splice(i,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const m5e=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],nH=class rH extends Aa{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const i=[...m5e,...this.config.runners??[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){const i=e.skipExtensionImports===!0?!0:e.manageImports===!1;await j4e(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...rH.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(e,i){let t=e;if(t instanceof Wr&&(t={container:t},i&&(Hi(sn,"passing a second argument is deprecated, please use render options instead"),t.target=i.renderTexture)),t.target||(t.target=this.view.renderTarget),t.target===this.view.renderTarget&&(this._lastObjectRendered=t.container,t.clearColor=this.background.colorRgba),t.clearColor){const r=Array.isArray(t.clearColor)&&t.clearColor.length===4;t.clearColor=r?t.clearColor:rr.shared.setValue(t.clearColor).toArray()}t.transform||(t.container.updateLocalTransform(),t.transform=t.container.localTransform),t.container.enableRenderGroup(),this.runners.prerender.emit(t),this.runners.renderStart.emit(t),this.runners.render.emit(t),this.runners.renderEnd.emit(t),this.runners.postrender.emit(t)}resize(e,i,t){const r=this.view.resolution;this.view.resize(e,i,t),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),t!==void 0&&t!==r&&this.runners.resolutionChange.emit(t)}clear(e={}){const i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=iH.ALL);const{clear:t,clearColor:r,target:s}=e;rr.shared.setValue(r??this.background.colorRgba),i.renderTarget.clear(s,t,rr.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(i=>{this.runners[i]=new p5e(i)})}_addSystems(e){let i;for(i in e){const t=e[i];this._addSystem(t.value,t.name)}}_addSystem(e,i){const t=new e(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=t,this._systemsHash[i]=t;for(const r in this.runners)this.runners[r].add(t);return this}_addPipes(e,i){const t=i.reduce((r,s)=>(r[s.name]=s.value,r),{});e.forEach(r=>{const s=r.value,o=r.name,l=t[o];this.renderPipes[o]=new s(this,l?new l:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(i=>{i.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!q4e())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};nH.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let sH=nH,lx;function g5e(n){return lx!==void 0||(lx=(()=>{var i;const e={stencil:!0,failIfMajorPerformanceCaveat:n??sH.defaultOptions.failIfMajorPerformanceCaveat};try{if(!zn.get().getWebGLRenderingContext())return!1;let r=zn.get().createCanvas().getContext("webgl",e);const s=!!((i=r==null?void 0:r.getContextAttributes())!=null&&i.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,s}catch{return!1}})()),lx}let cx;async function v5e(n={}){return cx!==void 0||(cx=await(async()=>{const e=zn.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),cx}const PL=["webgl","webgpu","canvas"];async function y5e(n){let e=[];n.preference?(e.push(n.preference),PL.forEach(s=>{s!==n.preference&&e.push(s)})):e=PL.slice();let i,t={};for(let s=0;s<e.length;s++){const o=e[s];if(o==="webgpu"&&await v5e()){const{WebGPURenderer:l}=await jO(()=>import("./WebGPURenderer-CZikG9L4.js"),__vite__mapDeps([3,2,4]));i=l,t={...n,...n.webgpu};break}else if(o==="webgl"&&g5e(n.failIfMajorPerformanceCaveat??sH.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:l}=await jO(()=>import("./WebGLRenderer-BI7ZnjWQ.js"),__vite__mapDeps([5,2,4]));i=l,t={...n,...n.webgl};break}else if(o==="canvas")throw t={...n},new Error("CanvasRenderer is not yet implemented")}if(delete t.webgpu,delete t.webgl,!i)throw new Error("No available renderer for the current environment");const r=new i;return await r.init(t),r}const oH="8.6.6";class aH{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,oH)}static destroy(){}}aH.extension=Ht.Application;class b5e{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,oH)}destroy(){this._renderer=null}}b5e.extension={type:[Ht.WebGLSystem,Ht.WebGPUSystem],name:"initHook",priority:-10};const lH=class GM{constructor(...e){this.stage=new Wr,e[0]!==void 0&&Hi(sn,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await y5e(e),GM._plugins.forEach(i=>{i.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Hi(sn,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,i=!1){const t=GM._plugins.slice(0);t.reverse(),t.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null}};lH._plugins=[];let cH=lH;Cs.handleByList(Ht.Application,cH._plugins);Cs.add(aH);class hH extends Aa{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Hi(sn,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Hi(sn,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Hi(sn,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Hi(sn,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Hi(sn,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var i;this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)(i=this.chars[t].texture)==null||i.destroy();this.chars=null,e&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}const uH=class YM{constructor(e,i,t,r){this.uid=yr("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=e,this.y0=i,this.x1=t,this.y1=r}addColorStop(e,i){return this.gradientStops.push({offset:e,color:rr.shared.setValue(i).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;const e=YM.defaultTextureSize,{gradientStops:i}=this,t=zn.get().createCanvas();t.width=e,t.height=e;const r=t.getContext("2d"),s=r.createLinearGradient(0,0,YM.defaultTextureSize,1);for(let x=0;x<i.length;x++){const b=i[x];s.addColorStop(b.offset,b.color)}r.fillStyle=s,r.fillRect(0,0,e,e),this.texture=new Li({source:new Kp({resource:t,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:o,y0:l,x1:c,y1:u}=this,d=new Xi,f=c-o,m=u-l,g=Math.sqrt(f*f+m*m),y=Math.atan2(m,f);d.translate(-o,-l),d.scale(1/e,1/e),d.rotate(-y),d.scale(256/g,1),this.transform=d,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const e=this.gradientStops.map(r=>`${r.offset}-${r.color}`).join("-"),i=this.texture.uid,t=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${e}-${i}-${t}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};uH.defaultTextureSize=256;let Nv=uH;const AL={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class w_{constructor(e,i){this.uid=yr("fillPattern"),this.transform=new Xi,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),i&&(e.source.style.addressModeU=AL[i].addressModeU,e.source.style.addressModeV=AL[i].addressModeV)}setTransform(e){const i=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/i.frame.width,1/i.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var x5e=w5e,ok={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},O5e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function w5e(n){var e=[];return n.replace(O5e,function(i,t,r){var s=t.toLowerCase();for(r=S5e(r),s=="m"&&r.length>2&&(e.push([t].concat(r.splice(0,2))),s="l",t=t=="m"?"l":"L");;){if(r.length==ok[s])return r.unshift(t),e.push(r);if(r.length<ok[s])throw new Error("malformed path data");e.push([t].concat(r.splice(0,ok[s])))}}),e}var _5e=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function S5e(n){var e=n.match(_5e);return e?e.map(Number):[]}const C5e=Yp(x5e);function k5e(n,e){const i=C5e(n),t=[];let r=null,s=0,o=0;for(let l=0;l<i.length;l++){const c=i[l],u=c[0],d=c;switch(u){case"M":s=d[1],o=d[2],e.moveTo(s,o);break;case"m":s+=d[1],o+=d[2],e.moveTo(s,o);break;case"H":s=d[1],e.lineTo(s,o);break;case"h":s+=d[1],e.lineTo(s,o);break;case"V":o=d[1],e.lineTo(s,o);break;case"v":o+=d[1],e.lineTo(s,o);break;case"L":s=d[1],o=d[2],e.lineTo(s,o);break;case"l":s+=d[1],o+=d[2],e.lineTo(s,o);break;case"C":s=d[5],o=d[6],e.bezierCurveTo(d[1],d[2],d[3],d[4],s,o);break;case"c":e.bezierCurveTo(s+d[1],o+d[2],s+d[3],o+d[4],s+d[5],o+d[6]),s+=d[5],o+=d[6];break;case"S":s=d[3],o=d[4],e.bezierCurveToShort(d[1],d[2],s,o);break;case"s":e.bezierCurveToShort(s+d[1],o+d[2],s+d[3],o+d[4]),s+=d[3],o+=d[4];break;case"Q":s=d[3],o=d[4],e.quadraticCurveTo(d[1],d[2],s,o);break;case"q":e.quadraticCurveTo(s+d[1],o+d[2],s+d[3],o+d[4]),s+=d[3],o+=d[4];break;case"T":s=d[1],o=d[2],e.quadraticCurveToShort(s,o);break;case"t":s+=d[1],o+=d[2],e.quadraticCurveToShort(s,o);break;case"A":s=d[6],o=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,o);break;case"a":s+=d[6],o+=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,o);break;case"Z":case"z":e.closePath(),t.length>0&&(r=t.pop(),r?(s=r.startX,o=r.startY):(s=0,o=0)),r=null;break;default:sr(`Unknown SVG path command: ${u}`)}u!=="Z"&&u!=="z"&&r===null&&(r={startX:s,startY:o},t.push(r))}return e}class __{constructor(e=0,i=0,t=0){this.type="circle",this.x=e,this.y=i,this.radius=t}clone(){return new __(this.x,this.y,this.radius)}contains(e,i){if(this.radius<=0)return!1;const t=this.radius*this.radius;let r=this.x-e,s=this.y-i;return r*=r,s*=s,r+s<=t}strokeContains(e,i,t,r=.5){if(this.radius===0)return!1;const s=this.x-e,o=this.y-i,l=this.radius,c=(1-r)*t,u=Math.sqrt(s*s+o*o);return u<=l+c&&u>l-(t-c)}getBounds(e){return e||(e=new vr),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class J3{constructor(e=0,i=0,t=0,r=0){this.type="ellipse",this.x=e,this.y=i,this.halfWidth=t,this.halfHeight=r}clone(){return new J3(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,i){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let t=(e-this.x)/this.halfWidth,r=(i-this.y)/this.halfHeight;return t*=t,r*=r,t+r<=1}strokeContains(e,i,t,r=.5){const{halfWidth:s,halfHeight:o}=this;if(s<=0||o<=0)return!1;const l=t*(1-r),c=t-l,u=s-c,d=o-c,f=s+l,m=o+l,g=e-this.x,y=i-this.y,x=g*g/(u*u)+y*y/(d*d),b=g*g/(f*f)+y*y/(m*m);return x>1&&b<=1}getBounds(e){return e||(e=new vr),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function T5e(n,e,i,t,r,s){const o=n-i,l=e-t,c=r-i,u=s-t,d=o*c+l*u,f=c*c+u*u;let m=-1;f!==0&&(m=d/f);let g,y;m<0?(g=i,y=t):m>1?(g=r,y=s):(g=i+m*c,y=t+m*u);const x=n-g,b=e-y;return x*x+b*b}class V0{constructor(...e){this.type="polygon";let i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){const t=[];for(let r=0,s=i.length;r<s;r++)t.push(i[r].x,i[r].y);i=t}this.points=i,this.closePath=!0}clone(){const e=this.points.slice(),i=new V0(e);return i.closePath=this.closePath,i}contains(e,i){let t=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const l=this.points[s*2],c=this.points[s*2+1],u=this.points[o*2],d=this.points[o*2+1];c>i!=d>i&&e<(u-l)*((i-c)/(d-c))+l&&(t=!t)}return t}strokeContains(e,i,t,r=.5){const s=t*t,o=s*(1-r),l=s-o,{points:c}=this,u=c.length-(this.closePath?0:2);for(let d=0;d<u;d+=2){const f=c[d],m=c[d+1],g=c[(d+2)%c.length],y=c[(d+3)%c.length],x=T5e(e,i,f,m,g,y),b=Math.sign((g-f)*(i-m)-(y-m)*(e-f));if(x<=(b<0?l:o))return!0}return!1}getBounds(e){e||(e=new vr);const i=this.points;let t=1/0,r=-1/0,s=1/0,o=-1/0;for(let l=0,c=i.length;l<c;l+=2){const u=i[l],d=i[l+1];t=u<t?u:t,r=u>r?u:r,s=d<s?d:s,o=d>o?d:o}return e.x=t,e.width=r-t,e.y=s,e.height=o-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,i)=>`${e}, ${i}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const hx=(n,e,i,t,r,s,o)=>{const l=n-i,c=e-t,u=Math.sqrt(l*l+c*c);return u>=r-s&&u<=r+o};class eA{constructor(e=0,i=0,t=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=i,this.width=t,this.height=r,this.radius=s}getBounds(e){return e||(e=new vr),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new eA(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const t=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+t&&i<=this.y+this.height-t||e>=this.x+t&&e<=this.x+this.width-t)return!0;let r=e-(this.x+t),s=i-(this.y+t);const o=t*t;if(r*r+s*s<=o||(r=e-(this.x+this.width-t),r*r+s*s<=o)||(s=i-(this.y+this.height-t),r*r+s*s<=o)||(r=e-(this.x+t),r*r+s*s<=o))return!0}return!1}strokeContains(e,i,t,r=.5){const{x:s,y:o,width:l,height:c,radius:u}=this,d=t*(1-r),f=t-d,m=s+u,g=o+u,y=l-u*2,x=c-u*2,b=s+l,S=o+c;return(e>=s-d&&e<=s+f||e>=b-f&&e<=b+d)&&i>=g&&i<=g+x||(i>=o-d&&i<=o+f||i>=S-f&&i<=S+d)&&e>=m&&e<=m+y?!0:e<m&&i<g&&hx(e,i,m,g,u,f,d)||e>b-u&&i<g&&hx(e,i,b-u,g,u,f,d)||e>b-u&&i>S-u&&hx(e,i,b-u,S-u,u,f,d)||e<m&&i>S-u&&hx(e,i,m,S-u,u,f,d)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const M5e=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function E5e(n){let e="";for(let i=0;i<n;++i)i>0&&(e+=`
else `),i<n-1&&(e+=`if(test == ${i}.0){}`);return e}function P5e(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const t=M5e.replace(/%forloop%/gi,E5e(n));if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))n=n/2|0;else break}}finally{e.deleteShader(i)}return n}let wf=null;function dH(){var e;if(wf)return wf;const n=HQ();return wf=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),wf=P5e(wf,n),(e=n.getExtension("WEBGL_lose_context"))==null||e.loseContext(),wf}const fH={};function A5e(n,e){let i=2166136261;for(let t=0;t<e;t++)i^=n[t].uid,i=Math.imul(i,16777619),i>>>=0;return fH[i]||R5e(n,e,i)}let ak=0;function R5e(n,e,i){const t={};let r=0;ak||(ak=dH());for(let o=0;o<ak;o++){const l=o<e?n[o]:Li.EMPTY.source;t[r++]=l.source,t[r++]=l.style}const s=new Xx(t);return fH[i]=s,s}class RL{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function IL(n,e){const i=n.byteLength/8|0,t=new Float64Array(n,0,i);new Float64Array(e,0,i).set(t);const s=n.byteLength-i*8;if(s>0){const o=new Uint8Array(n,i*8,s);new Uint8Array(e,i*8,s).set(o)}}const I5e={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var D5e=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(D5e||{});function DL(n,e){return e.alphaMode==="no-premultiply-alpha"&&I5e[n]||n}class N5e{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const i=this.textures[e];this.textures[e]=null,this.ids[i.uid]=null}this.count=0}}class $5e{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new N5e,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const pH=[];let jM=0;function NL(){return jM>0?pH[--jM]:new $5e}function $L(n){pH[jM++]=n}let i0=0;const mH=class Wx{constructor(e={}){this.uid=yr("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],Wx.defaultOptions.maxTextures=Wx.defaultOptions.maxTextures??dH(),e={...Wx.defaultOptions,...e};const{maxTextures:i,attributesInitialSize:t,indicesInitialSize:r}=e;this.attributeBuffer=new RL(t*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)$L(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,i){const t=e._batch.textures.ids[i._source.uid];return!t&&t!==0?!1:(e._textureId=t,e.texture=i,!0)}updateElement(e){this.dirty=!0;const i=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId)}break(e){const i=this._elements;if(!i[this.elementStart])return;let t=NL(),r=t.textures;r.clear();const s=i[this.elementStart];let o=DL(s.blendMode,s.texture._source),l=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const c=this.attributeBuffer.float32View,u=this.attributeBuffer.uint32View,d=this.indexBuffer;let f=this._batchIndexSize,m=this._batchIndexStart,g="startBatch";const y=this.maxTextures;for(let x=this.elementStart;x<this.elementSize;++x){const b=i[x];i[x]=null;const _=b.texture._source,O=DL(b.blendMode,_),k=o!==O||l!==b.topology;if(_._batchTick===i0&&!k){b._textureId=_._textureBindLocation,f+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,c,u,b._attributeStart,b._textureId),this.packQuadIndex(d,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,c,u,b._attributeStart,b._textureId),this.packIndex(b,d,b._indexStart,b._attributeStart/this.vertexSize)),b._batch=t;continue}_._batchTick=i0,(r.count>=y||k)&&(this._finishBatch(t,m,f-m,r,o,l,e,g),g="renderBatch",m=f,o=O,l=b.topology,t=NL(),r=t.textures,r.clear(),++i0),b._textureId=_._textureBindLocation=r.count,r.ids[_.uid]=r.count,r.textures[r.count++]=_,b._batch=t,f+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,c,u,b._attributeStart,b._textureId),this.packQuadIndex(d,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,c,u,b._attributeStart,b._textureId),this.packIndex(b,d,b._indexStart,b._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(t,m,f-m,r,o,l,e,g),m=f,++i0),this.elementStart=this.elementSize,this._batchIndexStart=m,this._batchIndexSize=f}_finishBatch(e,i,t,r,s,o,l,c){e.gpuBindGroup=null,e.bindGroup=null,e.action=c,e.batcher=this,e.textures=r,e.blendMode=s,e.topology=o,e.start=i,e.size=t,++i0,this.batches[this.batchIndex++]=e,l.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const i=Math.max(e,this.attributeBuffer.size*2),t=new RL(i);IL(this.attributeBuffer.rawBinaryData,t.rawBinaryData),this.attributeBuffer=t}_resizeIndexBuffer(e){const i=this.indexBuffer;let t=Math.max(e,i.length*1.5);t+=t%2;const r=t>65535?new Uint32Array(t):new Uint16Array(t);if(r.BYTES_PER_ELEMENT!==i.BYTES_PER_ELEMENT)for(let s=0;s<i.length;s++)r[s]=i[s];else IL(i.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,i,t){e[i]=t+0,e[i+1]=t+1,e[i+2]=t+2,e[i+3]=t+0,e[i+4]=t+2,e[i+5]=t+3}packIndex(e,i,t,r){const s=e.indices,o=e.indexSize,l=e.indexOffset,c=e.attributeOffset;for(let u=0;u<o;u++)i[t++]=r+s[u+l]-c}destroy(){for(let e=0;e<this.batches.length;e++)$L(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};mH.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let V5e=mH;var zs=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(zs||{});class $v extends Aa{constructor(e){let{data:i,size:t}=e;const{usage:r,label:s,shrinkToFit:o}=e;super(),this.uid=yr("buffer"),this._resourceType="buffer",this._resourceId=yr("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,i instanceof Array&&(i=new Float32Array(i)),this._data=i,t??(t=i==null?void 0:i.byteLength);const l=!!i;this.descriptor={size:t,usage:r,mappedAtCreation:l,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&zs.STATIC)}set static(e){e?this.descriptor.usage|=zs.STATIC:this.descriptor.usage&=~zs.STATIC}setDataWithSize(e,i,t){if(this._updateID++,this._updateSize=i*e.BYTES_PER_ELEMENT,this._data===e){t&&this.emit("update",this);return}const r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?t&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=yr("resource"),this.emit("change",this));return}t&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function gH(n,e){if(!(n instanceof $v)){let i=e?zs.INDEX:zs.VERTEX;n instanceof Array&&(e?(n=new Uint32Array(n),i=zs.INDEX|zs.COPY_DST):(n=new Float32Array(n),i=zs.VERTEX|zs.COPY_DST)),n=new $v({data:n,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return n}function L5e(n,e,i){const t=n.getAttribute(e);if(!t)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const r=t.buffer.data;let s=1/0,o=1/0,l=-1/0,c=-1/0;const u=r.BYTES_PER_ELEMENT,d=(t.offset||0)/u,f=(t.stride||2*4)/u;for(let m=d;m<r.length;m+=f){const g=r[m],y=r[m+1];g>l&&(l=g),y>c&&(c=y),g<s&&(s=g),y<o&&(o=y)}return i.minX=s,i.minY=o,i.maxX=l,i.maxY=c,i}function B5e(n){return(n instanceof $v||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=gH(n.buffer,!1),n}class U5e extends Aa{constructor(e={}){super(),this.uid=yr("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new cl,this._boundsDirty=!0;const{attributes:i,indexBuffer:t,topology:r}=e;if(this.buffers=[],this.attributes={},i)for(const s in i)this.addAttribute(s,i[s]);this.instanceCount=e.instanceCount??1,t&&this.addIndex(t),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const i=this.attributes[e];return i.buffer.data.length/(i.stride/4||i.size)}return 0}addAttribute(e,i){const t=B5e(i);this.buffers.indexOf(t.buffer)===-1&&(this.buffers.push(t.buffer),t.buffer.on("update",this.onBufferUpdate,this),t.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=t}addIndex(e){this.indexBuffer=gH(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,L5e(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(i=>i.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const F5e=new Float32Array(1),z5e=new Uint32Array(1);class X5e extends U5e{constructor(){const i=new $v({data:F5e,label:"attribute-batch-buffer",usage:zs.VERTEX|zs.COPY_DST,shrinkToFit:!1}),t=new $v({data:z5e,label:"index-batch-buffer",usage:zs.INDEX|zs.COPY_DST,shrinkToFit:!1}),r=6*4;super({attributes:{aPosition:{buffer:i,format:"float32x2",stride:r,offset:0},aUV:{buffer:i,format:"float32x2",stride:r,offset:2*4},aColor:{buffer:i,format:"unorm8x4",stride:r,offset:4*4},aTextureIdAndRound:{buffer:i,format:"uint16x2",stride:r,offset:5*4}},indexBuffer:t})}}function VL(n,e,i){if(n)for(const t in n){const r=t.toLocaleLowerCase(),s=e[r];if(s){let o=n[t];t==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&s.push(`//----${i}----//`),s.push(o)}else sr(`${t} placement hook does not exist in shader`)}}const W5e=/\{\{(.*?)\}\}/g;function LL(n){var t;const e={};return(((t=n.match(W5e))==null?void 0:t.map(r=>r.replace(/[{()}]/g,"")))??[]).forEach(r=>{e[r]=[]}),e}function BL(n,e){let i;const t=/@in\s+([^;]+);/g;for(;(i=t.exec(n))!==null;)e.push(i[1])}function UL(n,e,i=!1){const t=[];BL(e,t),n.forEach(l=>{l.header&&BL(l.header,t)});const r=t;i&&r.sort();const s=r.map((l,c)=>`       @location(${c}) ${l},`).join(`
`);let o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${s}
`),o}function FL(n,e){let i;const t=/@out\s+([^;]+);/g;for(;(i=t.exec(n))!==null;)e.push(i[1])}function Q5e(n){const i=/\b(\w+)\s*:/g.exec(n);return i?i[1]:""}function H5e(n){const e=/@.*?\s+/g;return n.replace(e,"")}function G5e(n,e){const i=[];FL(e,i),n.forEach(c=>{c.header&&FL(c.header,i)});let t=0;const r=i.sort().map(c=>c.indexOf("builtin")>-1?c:`@location(${t++}) ${c}`).join(`,
`),s=i.sort().map(c=>`       var ${H5e(c)};`).join(`
`),o=`return VSOutput(
            ${i.sort().map(c=>` ${Q5e(c)}`).join(`,
`)});`;let l=e.replace(/@out\s+[^;]+;\s*/g,"");return l=l.replace("{{struct}}",`
${r}
`),l=l.replace("{{start}}",`
${s}
`),l=l.replace("{{return}}",`
${o}
`),l}function zL(n,e){let i=n;for(const t in e){const r=e[t];r.join(`
`).length?i=i.replace(`{{${t}}}`,`//-----${t} START-----//
${r.join(`
`)}
//----${t} FINISH----//`):i=i.replace(`{{${t}}}`,"")}return i}const uh=Object.create(null),lk=new Map;let Y5e=0;function j5e({template:n,bits:e}){const i=vH(n,e);if(uh[i])return uh[i];const{vertex:t,fragment:r}=Z5e(n,e);return uh[i]=yH(t,r,e),uh[i]}function q5e({template:n,bits:e}){const i=vH(n,e);return uh[i]||(uh[i]=yH(n.vertex,n.fragment,e)),uh[i]}function Z5e(n,e){const i=e.map(o=>o.vertex).filter(o=>!!o),t=e.map(o=>o.fragment).filter(o=>!!o);let r=UL(i,n.vertex,!0);r=G5e(i,r);const s=UL(t,n.fragment,!0);return{vertex:r,fragment:s}}function vH(n,e){return e.map(i=>(lk.has(i)||lk.set(i,Y5e++),lk.get(i))).sort((i,t)=>i-t).join("-")+n.vertex+n.fragment}function yH(n,e,i){const t=LL(n),r=LL(e);return i.forEach(s=>{VL(s.vertex,t,s.name),VL(s.fragment,r,s.name)}),{vertex:zL(n,t),fragment:zL(e,r)}}const K5e=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,J5e=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,eRe=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,tRe=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,iRe={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},nRe={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function rRe({bits:n,name:e}){const i=j5e({template:{fragment:J5e,vertex:K5e},bits:[iRe,...n]});return b_.from({name:e,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function sRe({bits:n,name:e}){return new YQ({name:e,...q5e({template:{vertex:eRe,fragment:tRe},bits:[nRe,...n]})})}const oRe={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},aRe={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},ck={};function lRe(n){const e=[];if(n===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let t=0;t<n;t++)e.push(`@group(1) @binding(${i++}) var textureSource${t+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${i++}) var textureSampler${t+1}: sampler;`)}return e.join(`
`)}function cRe(n){const e=[];if(n===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let i=0;i<n;i++)i===n-1?e.push("  default:{"):e.push(`  case ${i}:{`),e.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function hRe(n){return ck[n]||(ck[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${lRe(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${cRe(n)}
            `}}),ck[n]}const hk={};function uRe(n){const e=[];for(let i=0;i<n;i++)i>0&&e.push("else"),i<n-1&&e.push(`if(vTextureId < ${i}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${i}], vUV);`),e.push("}");return e.join(`
`)}function dRe(n){return hk[n]||(hk[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${uRe(n)}
            `}}),hk[n]}const fRe={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},pRe={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},XL={};function mRe(n){let e=XL[n];if(e)return e;const i=new Int32Array(n);for(let t=0;t<n;t++)i[t]=t;return e=XL[n]=new KQ({uTextures:{value:i,type:"i32",size:n}},{isStatic:!0}),e}class gRe extends Z3{constructor(e){const i=sRe({name:"batch",bits:[aRe,dRe(e),pRe]}),t=rRe({name:"batch",bits:[oRe,hRe(e),fRe]});super({glProgram:i,gpuProgram:t,resources:{batchSamplers:mRe(e)}})}}let WL=null;const bH=class xH extends V5e{constructor(){super(...arguments),this.geometry=new X5e,this.shader=WL||(WL=new gRe(this.maxTextures)),this.name=xH.extension.name,this.vertexSize=6}packAttributes(e,i,t,r,s){const o=s<<16|e.roundPixels&65535,l=e.transform,c=l.a,u=l.b,d=l.c,f=l.d,m=l.tx,g=l.ty,{positions:y,uvs:x}=e,b=e.color,S=e.attributeOffset,_=S+e.attributeSize;for(let O=S;O<_;O++){const k=O*2,M=y[k],E=y[k+1];i[r++]=c*M+d*E+m,i[r++]=f*E+u*M+g,i[r++]=x[k],i[r++]=x[k+1],t[r++]=b,t[r++]=o}}packQuadAttributes(e,i,t,r,s){const o=e.texture,l=e.transform,c=l.a,u=l.b,d=l.c,f=l.d,m=l.tx,g=l.ty,y=e.bounds,x=y.maxX,b=y.minX,S=y.maxY,_=y.minY,O=o.uvs,k=e.color,M=s<<16|e.roundPixels&65535;i[r+0]=c*b+d*_+m,i[r+1]=f*_+u*b+g,i[r+2]=O.x0,i[r+3]=O.y0,t[r+4]=k,t[r+5]=M,i[r+6]=c*x+d*_+m,i[r+7]=f*_+u*x+g,i[r+8]=O.x1,i[r+9]=O.y1,t[r+10]=k,t[r+11]=M,i[r+12]=c*x+d*S+m,i[r+13]=f*S+u*x+g,i[r+14]=O.x2,i[r+15]=O.y2,t[r+16]=k,t[r+17]=M,i[r+18]=c*b+d*S+m,i[r+19]=f*S+u*b+g,i[r+20]=O.x3,i[r+21]=O.y3,t[r+22]=k,t[r+23]=M}};bH.extension={type:[Ht.Batcher],name:"default"};let vRe=bH;function yRe(n,e,i,t,r,s,o,l=null){let c=0;i*=e,r*=s;const u=l.a,d=l.b,f=l.c,m=l.d,g=l.tx,y=l.ty;for(;c<o;){const x=n[i],b=n[i+1];t[r]=u*x+f*b+g,t[r+1]=d*x+m*b+y,r+=s,i+=e,c++}}function bRe(n,e,i,t){let r=0;for(e*=i;r<t;)n[e]=0,n[e+1]=0,e+=i,r++}function OH(n,e,i,t,r){const s=e.a,o=e.b,l=e.c,c=e.d,u=e.tx,d=e.ty;i||(i=0),t||(t=2),r||(r=n.length/t-i);let f=i*t;for(let m=0;m<r;m++){const g=n[f],y=n[f+1];n[f]=s*g+l*y+u,n[f+1]=o*g+c*y+d,f+=t}}const xRe=new Xi;class wH{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,i=e>>16|e&65280|(e&255)<<16,t=this.renderable;return t?kQ(i,t.groupColor)+(this.alpha*t.groupAlpha*255<<24):i+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||xRe}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Vv={extension:{type:Ht.ShapeBuilder,name:"circle"},build(n,e){let i,t,r,s,o,l;if(n.type==="circle"){const k=n;i=k.x,t=k.y,o=l=k.radius,r=s=0}else if(n.type==="ellipse"){const k=n;i=k.x,t=k.y,o=k.halfWidth,l=k.halfHeight,r=s=0}else{const k=n,M=k.width/2,E=k.height/2;i=k.x+M,t=k.y+E,o=l=Math.max(0,Math.min(k.radius,Math.min(M,E))),r=M-o,s=E-l}if(!(o>=0&&l>=0&&r>=0&&s>=0))return e;const c=Math.ceil(2.3*Math.sqrt(o+l)),u=c*8+(r?4:0)+(s?4:0);if(u===0)return e;if(c===0)return e[0]=e[6]=i+r,e[1]=e[3]=t+s,e[2]=e[4]=i-r,e[5]=e[7]=t-s,e;let d=0,f=c*4+(r?2:0)+2,m=f,g=u,y=r+o,x=s,b=i+y,S=i-y,_=t+x;if(e[d++]=b,e[d++]=_,e[--f]=_,e[--f]=S,s){const k=t-x;e[m++]=S,e[m++]=k,e[--g]=k,e[--g]=b}for(let k=1;k<c;k++){const M=Math.PI/2*(k/c),E=r+Math.cos(M)*o,R=s+Math.sin(M)*l,P=i+E,I=i-E,T=t+R,N=t-R;e[d++]=P,e[d++]=T,e[--f]=T,e[--f]=I,e[m++]=I,e[m++]=N,e[--g]=N,e[--g]=P}y=r,x=s+l,b=i+y,S=i-y,_=t+x;const O=t-x;return e[d++]=b,e[d++]=_,e[--g]=O,e[--g]=b,r&&(e[d++]=S,e[d++]=_,e[--g]=O,e[--g]=S),e},triangulate(n,e,i,t,r,s){if(n.length===0)return;let o=0,l=0;for(let d=0;d<n.length;d+=2)o+=n[d],l+=n[d+1];o/=n.length/2,l/=n.length/2;let c=t;e[c*i]=o,e[c*i+1]=l;const u=c++;for(let d=0;d<n.length;d+=2)e[c*i]=n[d],e[c*i+1]=n[d+1],d>0&&(r[s++]=c,r[s++]=u,r[s++]=c-1),c++;r[s++]=u+1,r[s++]=u,r[s++]=c-1}},ORe={...Vv,extension:{...Vv.extension,name:"ellipse"}},wRe={...Vv,extension:{...Vv.extension,name:"roundedRectangle"}},_H=1e-4,QL=1e-4;function _Re(n){const e=n.length;if(e<6)return 1;let i=0;for(let t=0,r=n[e-2],s=n[e-1];t<e;t+=2){const o=n[t],l=n[t+1];i+=(o-r)*(l+s),r=o,s=l}return i<0?-1:1}function HL(n,e,i,t,r,s,o,l){const c=n-i*r,u=e-t*r,d=n+i*s,f=e+t*s;let m,g;o?(m=t,g=-i):(m=-t,g=i);const y=c+m,x=u+g,b=d+m,S=f+g;return l.push(y,x),l.push(b,S),2}function Ou(n,e,i,t,r,s,o,l){const c=i-n,u=t-e;let d=Math.atan2(c,u),f=Math.atan2(r-n,s-e);l&&d<f?d+=Math.PI*2:!l&&d>f&&(f+=Math.PI*2);let m=d;const g=f-d,y=Math.abs(g),x=Math.sqrt(c*c+u*u),b=(15*y*Math.sqrt(x)/Math.PI>>0)+1,S=g/b;if(m+=S,l){o.push(n,e),o.push(i,t);for(let _=1,O=m;_<b;_++,O+=S)o.push(n,e),o.push(n+Math.sin(O)*x,e+Math.cos(O)*x);o.push(n,e),o.push(r,s)}else{o.push(i,t),o.push(n,e);for(let _=1,O=m;_<b;_++,O+=S)o.push(n+Math.sin(O)*x,e+Math.cos(O)*x),o.push(n,e);o.push(r,s),o.push(n,e)}return b*2}function SRe(n,e,i,t,r,s){const o=_H;if(n.length===0)return;const l=e;let c=l.alignment;if(e.alignment!==.5){let te=_Re(n);c=(c-.5)*te+.5}const u=new Br(n[0],n[1]),d=new Br(n[n.length-2],n[n.length-1]),f=t,m=Math.abs(u.x-d.x)<o&&Math.abs(u.y-d.y)<o;if(f){n=n.slice(),m&&(n.pop(),n.pop(),d.set(n[n.length-2],n[n.length-1]));const te=(u.x+d.x)*.5,ce=(d.y+u.y)*.5;n.unshift(te,ce),n.push(te,ce)}const g=r,y=n.length/2;let x=n.length;const b=g.length/2,S=l.width/2,_=S*S,O=l.miterLimit*l.miterLimit;let k=n[0],M=n[1],E=n[2],R=n[3],P=0,I=0,T=-(M-R),N=k-E,L=0,D=0,$=Math.sqrt(T*T+N*N);T/=$,N/=$,T*=S,N*=S;const B=c,U=(1-B)*2,Q=B*2;f||(l.cap==="round"?x+=Ou(k-T*(U-Q)*.5,M-N*(U-Q)*.5,k-T*U,M-N*U,k+T*Q,M+N*Q,g,!0)+2:l.cap==="square"&&(x+=HL(k,M,T,N,U,Q,!0,g))),g.push(k-T*U,M-N*U),g.push(k+T*Q,M+N*Q);for(let te=1;te<y-1;++te){k=n[(te-1)*2],M=n[(te-1)*2+1],E=n[te*2],R=n[te*2+1],P=n[(te+1)*2],I=n[(te+1)*2+1],T=-(M-R),N=k-E,$=Math.sqrt(T*T+N*N),T/=$,N/=$,T*=S,N*=S,L=-(R-I),D=E-P,$=Math.sqrt(L*L+D*D),L/=$,D/=$,L*=S,D*=S;const ce=E-k,pe=M-R,Ee=E-P,we=I-R,he=ce*Ee+pe*we,_e=pe*Ee-we*ce,Ce=_e<0;if(Math.abs(_e)<.001*Math.abs(he)){g.push(E-T*U,R-N*U),g.push(E+T*Q,R+N*Q),he>=0&&(l.join==="round"?x+=Ou(E,R,E-T*U,R-N*U,E-L*U,R-D*U,g,!1)+4:x+=2,g.push(E-L*Q,R-D*Q),g.push(E+L*U,R+D*U));continue}const K=(-T+k)*(-N+R)-(-T+E)*(-N+M),j=(-L+P)*(-D+R)-(-L+E)*(-D+I),F=(ce*j-Ee*K)/_e,z=(we*K-pe*j)/_e,ee=(F-E)*(F-E)+(z-R)*(z-R),re=E+(F-E)*U,W=R+(z-R)*U,q=E-(F-E)*Q,ae=R-(z-R)*Q,fe=Math.min(ce*ce+pe*pe,Ee*Ee+we*we),ye=Ce?U:Q,Me=fe+ye*ye*_;ee<=Me?l.join==="bevel"||ee/_>O?(Ce?(g.push(re,W),g.push(E+T*Q,R+N*Q),g.push(re,W),g.push(E+L*Q,R+D*Q)):(g.push(E-T*U,R-N*U),g.push(q,ae),g.push(E-L*U,R-D*U),g.push(q,ae)),x+=2):l.join==="round"?Ce?(g.push(re,W),g.push(E+T*Q,R+N*Q),x+=Ou(E,R,E+T*Q,R+N*Q,E+L*Q,R+D*Q,g,!0)+4,g.push(re,W),g.push(E+L*Q,R+D*Q)):(g.push(E-T*U,R-N*U),g.push(q,ae),x+=Ou(E,R,E-T*U,R-N*U,E-L*U,R-D*U,g,!1)+4,g.push(E-L*U,R-D*U),g.push(q,ae)):(g.push(re,W),g.push(q,ae)):(g.push(E-T*U,R-N*U),g.push(E+T*Q,R+N*Q),l.join==="round"?Ce?x+=Ou(E,R,E+T*Q,R+N*Q,E+L*Q,R+D*Q,g,!0)+2:x+=Ou(E,R,E-T*U,R-N*U,E-L*U,R-D*U,g,!1)+2:l.join==="miter"&&ee/_<=O&&(Ce?(g.push(q,ae),g.push(q,ae)):(g.push(re,W),g.push(re,W)),x+=2),g.push(E-L*U,R-D*U),g.push(E+L*Q,R+D*Q),x+=2)}k=n[(y-2)*2],M=n[(y-2)*2+1],E=n[(y-1)*2],R=n[(y-1)*2+1],T=-(M-R),N=k-E,$=Math.sqrt(T*T+N*N),T/=$,N/=$,T*=S,N*=S,g.push(E-T*U,R-N*U),g.push(E+T*Q,R+N*Q),f||(l.cap==="round"?x+=Ou(E-T*(U-Q)*.5,R-N*(U-Q)*.5,E-T*U,R-N*U,E+T*Q,R+N*Q,g,!1)+2:l.cap==="square"&&(x+=HL(E,R,T,N,U,Q,!1,g)));const Z=QL*QL;for(let te=b;te<x+b-2;++te)k=g[te*2],M=g[te*2+1],E=g[(te+1)*2],R=g[(te+1)*2+1],P=g[(te+2)*2],I=g[(te+2)*2+1],!(Math.abs(k*(R-I)+E*(I-M)+P*(M-R))<Z)&&s.push(te,te+1,te+2)}function CRe(n,e,i,t){const r=_H;if(n.length===0)return;const s=n[0],o=n[1],l=n[n.length-2],c=n[n.length-1],u=e||Math.abs(s-l)<r&&Math.abs(o-c)<r,d=i,f=n.length/2,m=d.length/2;for(let g=0;g<f;g++)d.push(n[g*2]),d.push(n[g*2+1]);for(let g=0;g<f-1;g++)t.push(m+g,m+g+1);u&&t.push(m+f-1,m)}function SH(n,e,i,t,r,s,o){const l=f5e(n,e,2);if(!l)return;for(let u=0;u<l.length;u+=3)s[o++]=l[u]+r,s[o++]=l[u+1]+r,s[o++]=l[u+2]+r;let c=r*t;for(let u=0;u<n.length;u+=2)i[c]=n[u],i[c+1]=n[u+1],c+=t}const kRe=[],TRe={extension:{type:Ht.ShapeBuilder,name:"polygon"},build(n,e){for(let i=0;i<n.points.length;i++)e[i]=n.points[i];return e},triangulate(n,e,i,t,r,s){SH(n,kRe,e,i,t,r,s)}},MRe={extension:{type:Ht.ShapeBuilder,name:"rectangle"},build(n,e){const i=n,t=i.x,r=i.y,s=i.width,o=i.height;return s>=0&&o>=0&&(e[0]=t,e[1]=r,e[2]=t+s,e[3]=r,e[4]=t+s,e[5]=r+o,e[6]=t,e[7]=r+o),e},triangulate(n,e,i,t,r,s){let o=0;t*=i,e[t+o]=n[0],e[t+o+1]=n[1],o+=i,e[t+o]=n[2],e[t+o+1]=n[3],o+=i,e[t+o]=n[6],e[t+o+1]=n[7],o+=i,e[t+o]=n[4],e[t+o+1]=n[5],o+=i;const l=t/i;r[s++]=l,r[s++]=l+1,r[s++]=l+2,r[s++]=l+1,r[s++]=l+3,r[s++]=l+2}},ERe={extension:{type:Ht.ShapeBuilder,name:"triangle"},build(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,e},triangulate(n,e,i,t,r,s){let o=0;t*=i,e[t+o]=n[0],e[t+o+1]=n[1],o+=i,e[t+o]=n[2],e[t+o+1]=n[3],o+=i,e[t+o]=n[4],e[t+o+1]=n[5];const l=t/i;r[s++]=l,r[s++]=l+1,r[s++]=l+2}},S_={};Cs.handleByMap(Ht.ShapeBuilder,S_);Cs.add(MRe,TRe,ERe,Vv,ORe,wRe);const PRe=new vr;function ARe(n,e){const{geometryData:i,batches:t}=e;t.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let r=0;r<n.instructions.length;r++){const s=n.instructions[r];if(s.action==="texture")RRe(s.data,t,i);else if(s.action==="fill"||s.action==="stroke"){const o=s.action==="stroke",l=s.data.path.shapePath,c=s.data.style,u=s.data.hole;o&&u&&GL(u.shapePath,c,null,!0,t,i),GL(l,c,u,o,t,i)}}}function RRe(n,e,i){const{vertices:t,uvs:r,indices:s}=i,o=s.length,l=t.length/2,c=[],u=S_.rectangle,d=PRe,f=n.image;d.x=n.dx,d.y=n.dy,d.width=n.dw,d.height=n.dh;const m=n.transform;u.build(d,c),m&&OH(c,m),u.triangulate(c,t,2,l,s,o);const g=f.uvs;r.push(g.x0,g.y0,g.x1,g.y1,g.x3,g.y3,g.x2,g.y2);const y=Kl.get(wH);y.indexOffset=o,y.indexSize=s.length-o,y.attributeOffset=l,y.attributeSize=t.length/2-l,y.baseColor=n.style,y.alpha=n.alpha,y.texture=f,y.geometryData=i,e.push(y)}function GL(n,e,i,t,r,s){const{vertices:o,uvs:l,indices:c}=s,u=n.shapePrimitives.length-1;n.shapePrimitives.forEach(({shape:d,transform:f},m)=>{const g=c.length,y=o.length/2,x=[],b=S_[d.type];let S="triangle-list";if(b.build(d,x),f&&OH(x,f),t){const M=d.closePath??!0,E=e;E.pixelLine?(CRe(x,M,o,c),S="line-list"):SRe(x,E,!1,M,o,c)}else if(i&&u===m){u!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const M=[],E=x.slice();IRe(i.shapePath).forEach(P=>{M.push(E.length/2),E.push(...P)}),SH(E,M,o,2,y,c,g)}else b.triangulate(x,o,2,y,c,g);const _=l.length/2,O=e.texture;if(O!==Li.WHITE){const M=e.matrix;M&&(f&&M.append(f.clone().invert()),yRe(o,2,y,l,_,2,o.length/2-y,M))}else bRe(l,_,2,o.length/2-y);const k=Kl.get(wH);k.indexOffset=g,k.indexSize=c.length-g,k.attributeOffset=y,k.attributeSize=o.length/2-y,k.baseColor=e.color,k.alpha=e.alpha,k.texture=O,k.geometryData=s,k.topology=S,r.push(k)})}function IRe(n){if(!n)return[];const e=n.shapePrimitives,i=[];for(let t=0;t<e.length;t++){const r=e[t].shape,s=[];S_[r.type].build(r,s),i.push(s)}return i}class DRe{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class NRe{constructor(){this.batcher=new vRe,this.instructions=new PQ}init(){this.instructions.reset()}get geometry(){return Hi(BAe,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const tA=class qM{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){qM.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??qM.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let i=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){i?this._cleanGraphicsContextData(e):i=this._initContext(e),ARe(e,i);const t=e.batchMode;e.customShader||t==="no-batch"?i.isBatchable=!1:t==="auto"&&(i.isBatchable=i.geometryData.vertices.length<400),e.dirty=!1}return i}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const i=Kl.get(NRe),{batches:t,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,o=r.indices.length;for(let d=0;d<t.length;d++)t[d].applyTransform=!1;const l=i.batcher;l.ensureAttributeBuffer(s),l.ensureIndexBuffer(o),l.begin();for(let d=0;d<t.length;d++){const f=t[d];l.add(f)}l.finish(i.instructions);const c=l.geometry;c.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),c.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);const u=l.batches;for(let d=0;d<u.length;d++){const f=u[d];f.bindGroup=A5e(f.textures.textures,f.textures.count)}return this._graphicsDataContextHash[e.uid]=i,i}_initContext(e){const i=new DRe;return i.context=e,this._gpuContextHash[e.uid]=i,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const i=this._gpuContextHash[e.uid];i.isBatchable||this._graphicsDataContextHash[e.uid]&&(Kl.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),i.batches&&i.batches.forEach(t=>{Kl.return(t)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};tA.extension={type:[Ht.WebGLSystem,Ht.WebGPUSystem,Ht.CanvasSystem],name:"graphicsContext"};tA.defaultOptions={bezierSmoothness:.5};let CH=tA;const $Re=8,ux=11920929e-14,VRe=1;function kH(n,e,i,t,r,s,o,l,c,u){const f=Math.min(.99,Math.max(0,u??CH.defaultOptions.bezierSmoothness));let m=(VRe-f)/1;return m*=m,LRe(e,i,t,r,s,o,l,c,n,m),n}function LRe(n,e,i,t,r,s,o,l,c,u){ZM(n,e,i,t,r,s,o,l,c,u,0),c.push(o,l)}function ZM(n,e,i,t,r,s,o,l,c,u,d){if(d>$Re)return;const f=(n+i)/2,m=(e+t)/2,g=(i+r)/2,y=(t+s)/2,x=(r+o)/2,b=(s+l)/2,S=(f+g)/2,_=(m+y)/2,O=(g+x)/2,k=(y+b)/2,M=(S+O)/2,E=(_+k)/2;if(d>0){let R=o-n,P=l-e;const I=Math.abs((i-o)*P-(t-l)*R),T=Math.abs((r-o)*P-(s-l)*R);if(I>ux&&T>ux){if((I+T)*(I+T)<=u*(R*R+P*P)){c.push(M,E);return}}else if(I>ux){if(I*I<=u*(R*R+P*P)){c.push(M,E);return}}else if(T>ux){if(T*T<=u*(R*R+P*P)){c.push(M,E);return}}else if(R=M-(n+o)/2,P=E-(e+l)/2,R*R+P*P<=u){c.push(M,E);return}}ZM(n,e,f,m,S,_,M,E,c,u,d+1),ZM(M,E,O,k,x,b,o,l,c,u,d+1)}const BRe=8,URe=11920929e-14,FRe=1;function zRe(n,e,i,t,r,s,o,l){const u=Math.min(.99,Math.max(0,l??CH.defaultOptions.bezierSmoothness));let d=(FRe-u)/1;return d*=d,XRe(e,i,t,r,s,o,n,d),n}function XRe(n,e,i,t,r,s,o,l){KM(o,n,e,i,t,r,s,l,0),o.push(r,s)}function KM(n,e,i,t,r,s,o,l,c){if(c>BRe)return;const u=(e+t)/2,d=(i+r)/2,f=(t+s)/2,m=(r+o)/2,g=(u+f)/2,y=(d+m)/2;let x=s-e,b=o-i;const S=Math.abs((t-s)*b-(r-o)*x);if(S>URe){if(S*S<=l*(x*x+b*b)){n.push(g,y);return}}else if(x=g-(e+s)/2,b=y-(i+o)/2,x*x+b*b<=l){n.push(g,y);return}KM(n,e,i,u,d,g,y,l,c+1),KM(n,g,y,f,m,s,o,l,c+1)}function TH(n,e,i,t,r,s,o,l){let c=Math.abs(r-s);(!o&&r>s||o&&s>r)&&(c=2*Math.PI-c),l||(l=Math.max(6,Math.floor(6*Math.pow(t,1/3)*(c/Math.PI)))),l=Math.max(l,3);let u=c/l,d=r;u*=o?-1:1;for(let f=0;f<l+1;f++){const m=Math.cos(d),g=Math.sin(d),y=e+m*t,x=i+g*t;n.push(y,x),d+=u}}function WRe(n,e,i,t,r,s){const o=n[n.length-2],c=n[n.length-1]-i,u=o-e,d=r-i,f=t-e,m=Math.abs(c*f-u*d);if(m<1e-8||s===0){(n[n.length-2]!==e||n[n.length-1]!==i)&&n.push(e,i);return}const g=c*c+u*u,y=d*d+f*f,x=c*d+u*f,b=s*Math.sqrt(g)/m,S=s*Math.sqrt(y)/m,_=b*x/g,O=S*x/y,k=b*f+S*u,M=b*d+S*c,E=u*(S+_),R=c*(S+_),P=f*(b+O),I=d*(b+O),T=Math.atan2(R-M,E-k),N=Math.atan2(I-M,P-k);TH(n,k+e,M+i,s,T,N,u*d>f*c)}const L0=Math.PI*2,uk={centerX:0,centerY:0,ang1:0,ang2:0},dk=({x:n,y:e},i,t,r,s,o,l,c)=>{n*=i,e*=t;const u=r*n-s*e,d=s*n+r*e;return c.x=u+o,c.y=d+l,c};function QRe(n,e){const i=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),t=e===1.5707963267948966?.551915024494:i,r=Math.cos(n),s=Math.sin(n),o=Math.cos(n+e),l=Math.sin(n+e);return[{x:r-s*t,y:s+r*t},{x:o+l*t,y:l-o*t},{x:o,y:l}]}const YL=(n,e,i,t)=>{const r=n*t-e*i<0?-1:1;let s=n*i+e*t;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},HRe=(n,e,i,t,r,s,o,l,c,u,d,f,m)=>{const g=Math.pow(r,2),y=Math.pow(s,2),x=Math.pow(d,2),b=Math.pow(f,2);let S=g*y-g*b-y*x;S<0&&(S=0),S/=g*b+y*x,S=Math.sqrt(S)*(o===l?-1:1);const _=S*r/s*f,O=S*-s/r*d,k=u*_-c*O+(n+i)/2,M=c*_+u*O+(e+t)/2,E=(d-_)/r,R=(f-O)/s,P=(-d-_)/r,I=(-f-O)/s,T=YL(1,0,E,R);let N=YL(E,R,P,I);l===0&&N>0&&(N-=L0),l===1&&N<0&&(N+=L0),m.centerX=k,m.centerY=M,m.ang1=T,m.ang2=N};function GRe(n,e,i,t,r,s,o,l=0,c=0,u=0){if(s===0||o===0)return;const d=Math.sin(l*L0/360),f=Math.cos(l*L0/360),m=f*(e-t)/2+d*(i-r)/2,g=-d*(e-t)/2+f*(i-r)/2;if(m===0&&g===0)return;s=Math.abs(s),o=Math.abs(o);const y=Math.pow(m,2)/Math.pow(s,2)+Math.pow(g,2)/Math.pow(o,2);y>1&&(s*=Math.sqrt(y),o*=Math.sqrt(y)),HRe(e,i,t,r,s,o,c,u,d,f,m,g,uk);let{ang1:x,ang2:b}=uk;const{centerX:S,centerY:_}=uk;let O=Math.abs(b)/(L0/4);Math.abs(1-O)<1e-7&&(O=1);const k=Math.max(Math.ceil(O),1);b/=k;let M=n[n.length-2],E=n[n.length-1];const R={x:0,y:0};for(let P=0;P<k;P++){const I=QRe(x,b),{x:T,y:N}=dk(I[0],s,o,f,d,S,_,R),{x:L,y:D}=dk(I[1],s,o,f,d,S,_,R),{x:$,y:B}=dk(I[2],s,o,f,d,S,_,R);kH(n,M,E,T,N,L,D,$,B),M=$,E=B,x+=b}}function YRe(n,e,i){const t=(o,l)=>{const c=l.x-o.x,u=l.y-o.y,d=Math.sqrt(c*c+u*u),f=c/d,m=u/d;return{len:d,nx:f,ny:m}},r=(o,l)=>{o===0?n.moveTo(l.x,l.y):n.lineTo(l.x,l.y)};let s=e[e.length-1];for(let o=0;o<e.length;o++){const l=e[o%e.length],c=l.radius??i;if(c<=0){r(o,l),s=l;continue}const u=e[(o+1)%e.length],d=t(l,s),f=t(l,u);if(d.len<1e-4||f.len<1e-4){r(o,l),s=l;continue}let m=Math.asin(d.nx*f.ny-d.ny*f.nx),g=1,y=!1;d.nx*f.nx-d.ny*-f.ny<0?m<0?m=Math.PI+m:(m=Math.PI-m,g=-1,y=!0):m>0&&(g=-1,y=!0);const x=m/2;let b,S=Math.abs(Math.cos(x)*c/Math.sin(x));S>Math.min(d.len/2,f.len/2)?(S=Math.min(d.len/2,f.len/2),b=Math.abs(S*Math.sin(x)/Math.cos(x))):b=c;const _=l.x+f.nx*S+-f.ny*b*g,O=l.y+f.ny*S+f.nx*b*g,k=Math.atan2(d.ny,d.nx)+Math.PI/2*g,M=Math.atan2(f.ny,f.nx)-Math.PI/2*g;o===0&&n.moveTo(_+Math.cos(k)*b,O+Math.sin(k)*b),n.arc(_,O,b,k,M,y),s=l}}function jRe(n,e,i,t){const r=(l,c)=>Math.sqrt((l.x-c.x)**2+(l.y-c.y)**2),s=(l,c,u)=>({x:l.x+(c.x-l.x)*u,y:l.y+(c.y-l.y)*u}),o=e.length;for(let l=0;l<o;l++){const c=e[(l+1)%o],u=c.radius??i;if(u<=0){l===0?n.moveTo(c.x,c.y):n.lineTo(c.x,c.y);continue}const d=e[l],f=e[(l+2)%o],m=r(d,c);let g;if(m<1e-4)g=c;else{const b=Math.min(m/2,u);g=s(c,d,b/m)}const y=r(f,c);let x;if(y<1e-4)x=c;else{const b=Math.min(y/2,u);x=s(c,f,b/y)}l===0?n.moveTo(g.x,g.y):n.lineTo(g.x,g.y),n.quadraticCurveTo(c.x,c.y,x.x,x.y,t)}}const qRe=new vr;class ZRe{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new cl,this._graphicsPath2D=e}moveTo(e,i){return this.startPoly(e,i),this}lineTo(e,i){this._ensurePoly();const t=this._currentPoly.points,r=t[t.length-2],s=t[t.length-1];return(r!==e||s!==i)&&t.push(e,i),this}arc(e,i,t,r,s,o){this._ensurePoly(!1);const l=this._currentPoly.points;return TH(l,e,i,t,r,s,o),this}arcTo(e,i,t,r,s){this._ensurePoly();const o=this._currentPoly.points;return WRe(o,e,i,t,r,s),this}arcToSvg(e,i,t,r,s,o,l){const c=this._currentPoly.points;return GRe(c,this._currentPoly.lastX,this._currentPoly.lastY,o,l,e,i,t,r,s),this}bezierCurveTo(e,i,t,r,s,o,l){this._ensurePoly();const c=this._currentPoly;return kH(this._currentPoly.points,c.lastX,c.lastY,e,i,t,r,s,o,l),this}quadraticCurveTo(e,i,t,r,s){this._ensurePoly();const o=this._currentPoly;return zRe(this._currentPoly.points,o.lastX,o.lastY,e,i,t,r,s),this}closePath(){return this.endPoly(!0),this}addPath(e,i){this.endPoly(),i&&!i.isIdentity()&&(e=e.clone(!0),e.transform(i));for(let t=0;t<e.instructions.length;t++){const r=e.instructions[t];this[r.action](...r.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,i,t,r,s){return this.drawShape(new vr(e,i,t,r),s),this}circle(e,i,t,r){return this.drawShape(new __(e,i,t),r),this}poly(e,i,t){const r=new V0(e);return r.closePath=i,this.drawShape(r,t),this}regularPoly(e,i,t,r,s=0,o){r=Math.max(r|0,3);const l=-1*Math.PI/2+s,c=Math.PI*2/r,u=[];for(let d=0;d<r;d++){const f=l-d*c;u.push(e+t*Math.cos(f),i+t*Math.sin(f))}return this.poly(u,!0,o),this}roundPoly(e,i,t,r,s,o=0,l){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(e,i,t,r,o);const c=t*Math.sin(Math.PI/r)-.001;s=Math.min(s,c);const u=-1*Math.PI/2+o,d=Math.PI*2/r,f=(r-2)*Math.PI/r/2;for(let m=0;m<r;m++){const g=m*d+u,y=e+t*Math.cos(g),x=i+t*Math.sin(g),b=g+Math.PI+f,S=g-Math.PI-f,_=y+s*Math.cos(b),O=x+s*Math.sin(b),k=y+s*Math.cos(S),M=x+s*Math.sin(S);m===0?this.moveTo(_,O):this.lineTo(_,O),this.quadraticCurveTo(y,x,k,M,l)}return this.closePath()}roundShape(e,i,t=!1,r){return e.length<3?this:(t?jRe(this,e,i,r):YRe(this,e,i),this.closePath())}filletRect(e,i,t,r,s){if(s===0)return this.rect(e,i,t,r);const o=Math.min(t,r)/2,l=Math.min(o,Math.max(-o,s)),c=e+t,u=i+r,d=l<0?-l:0,f=Math.abs(l);return this.moveTo(e,i+f).arcTo(e+d,i+d,e+f,i,f).lineTo(c-f,i).arcTo(c-d,i+d,c,i+f,f).lineTo(c,u-f).arcTo(c-d,u-d,e+t-f,u,f).lineTo(e+f,u).arcTo(e+d,u-d,e,u-f,f).closePath()}chamferRect(e,i,t,r,s,o){if(s<=0)return this.rect(e,i,t,r);const l=Math.min(s,Math.min(t,r)/2),c=e+t,u=i+r,d=[e+l,i,c-l,i,c,i+l,c,u-l,c-l,u,e+l,u,e,u-l,e,i+l];for(let f=d.length-1;f>=2;f-=2)d[f]===d[f-2]&&d[f-1]===d[f-3]&&d.splice(f-1,2);return this.poly(d,!0,o)}ellipse(e,i,t,r,s){return this.drawShape(new J3(e,i,t,r),s),this}roundRect(e,i,t,r,s,o){return this.drawShape(new eA(e,i,t,r,s),o),this}drawShape(e,i){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:i}),this}startPoly(e,i){let t=this._currentPoly;return t&&this.endPoly(),t=new V0,t.points.push(e,i),this._currentPoly=t,this}endPoly(e=!1){const i=this._currentPoly;return i&&i.points.length>2&&(i.closePath=e,this.shapePrimitives.push({shape:i})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new V0,e)){const i=this.shapePrimitives[this.shapePrimitives.length-1];if(i){let t=i.shape.x,r=i.shape.y;if(i.transform&&!i.transform.isIdentity()){const s=i.transform,o=t;t=s.a*t+s.c*r+s.tx,r=s.b*o+s.d*r+s.ty}this._currentPoly.points.push(t,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let i=0;i<e.instructions.length;i++){const t=e.instructions[i];this[t.action](...t.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const i=this.shapePrimitives;for(let t=0;t<i.length;t++){const r=i[t],s=r.shape.getBounds(qRe);r.transform?e.addRect(s,r.transform):e.addRect(s)}return e}}class $p{constructor(e){this.instructions=[],this.uid=yr("graphicsPath"),this._dirty=!0,typeof e=="string"?k5e(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new ZRe(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,i){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,i]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,i,t,r,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Br.shared);let c=0,u=0;if(!o||o.action!=="bezierCurveTo")c=l.x,u=l.y;else{c=o.data[2],u=o.data[3];const d=l.x,f=l.y;c=d+(d-c),u=f+(f-u)}return this.instructions.push({action:"bezierCurveTo",data:[c,u,e,i,t,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,i,t){const r=this.instructions[this.instructions.length-1],s=this.getLastPoint(Br.shared);let o=0,l=0;if(!r||r.action!=="quadraticCurveTo")o=s.x,l=s.y;else{o=r.data[0],l=r.data[1];const c=s.x,u=s.y;o=c+(c-o),l=u+(u-l)}return this.instructions.push({action:"quadraticCurveTo",data:[o,l,e,i,t]}),this._dirty=!0,this}rect(e,i,t,r,s){return this.instructions.push({action:"rect",data:[e,i,t,r,s]}),this._dirty=!0,this}circle(e,i,t,r){return this.instructions.push({action:"circle",data:[e,i,t,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,i,t,r,s,o,l){s||(s=r/2);const c=-1*Math.PI/2+o,u=t*2,d=Math.PI*2/u,f=[];for(let m=0;m<u;m++){const g=m%2?s:r,y=m*d+c;f.push(e+g*Math.cos(y),i+g*Math.sin(y))}return this.poly(f,!0,l),this}clone(e=!1){const i=new $p;if(!e)i.instructions=this.instructions.slice();else for(let t=0;t<this.instructions.length;t++){const r=this.instructions[t];i.instructions.push({action:r.action,data:r.data.slice()})}return i}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const i=e.a,t=e.b,r=e.c,s=e.d,o=e.tx,l=e.ty;let c=0,u=0,d=0,f=0,m=0,g=0,y=0,x=0;for(let b=0;b<this.instructions.length;b++){const S=this.instructions[b],_=S.data;switch(S.action){case"moveTo":case"lineTo":c=_[0],u=_[1],_[0]=i*c+r*u+o,_[1]=t*c+s*u+l;break;case"bezierCurveTo":d=_[0],f=_[1],m=_[2],g=_[3],c=_[4],u=_[5],_[0]=i*d+r*f+o,_[1]=t*d+s*f+l,_[2]=i*m+r*g+o,_[3]=t*m+s*g+l,_[4]=i*c+r*u+o,_[5]=t*c+s*u+l;break;case"quadraticCurveTo":d=_[0],f=_[1],c=_[2],u=_[3],_[0]=i*d+r*f+o,_[1]=t*d+s*f+l,_[2]=i*c+r*u+o,_[3]=t*c+s*u+l;break;case"arcToSvg":c=_[5],u=_[6],y=_[0],x=_[1],_[0]=i*y+r*x,_[1]=t*y+s*x,_[5]=i*c+r*u+o,_[6]=t*c+s*u+l;break;case"circle":_[4]=n0(_[3],e);break;case"rect":_[4]=n0(_[4],e);break;case"ellipse":_[8]=n0(_[8],e);break;case"roundRect":_[5]=n0(_[5],e);break;case"addPath":_[0].transform(e);break;case"poly":_[2]=n0(_[2],e);break;default:sr("unknown transform action",S.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let i=this.instructions.length-1,t=this.instructions[i];if(!t)return e.x=0,e.y=0,e;for(;t.action==="closePath";){if(i--,i<0)return e.x=0,e.y=0,e;t=this.instructions[i]}switch(t.action){case"moveTo":case"lineTo":e.x=t.data[0],e.y=t.data[1];break;case"quadraticCurveTo":e.x=t.data[2],e.y=t.data[3];break;case"bezierCurveTo":e.x=t.data[4],e.y=t.data[5];break;case"arc":case"arcToSvg":e.x=t.data[5],e.y=t.data[6];break;case"addPath":t.data[0].getLastPoint(e);break}return e}}function n0(n,e){return n?n.prepend(e):e.clone()}function KRe(n,e){if(typeof n=="string"){const t=document.createElement("div");t.innerHTML=n.trim(),n=t.querySelector("svg")}const i={context:e,path:new $p};return MH(n,i,null,null),e}function MH(n,e,i,t){const r=n.children,{fillStyle:s,strokeStyle:o}=JRe(n);s&&i?i={...i,...s}:s&&(i=s),o&&t?t={...t,...o}:o&&(t=o),e.context.fillStyle=i,e.context.strokeStyle=t;let l,c,u,d,f,m,g,y,x,b,S,_,O,k,M,E,R;switch(n.nodeName.toLowerCase()){case"path":k=n.getAttribute("d"),M=new $p(k),e.context.path(M),i&&e.context.fill(),t&&e.context.stroke();break;case"circle":g=kr(n,"cx",0),y=kr(n,"cy",0),x=kr(n,"r",0),e.context.ellipse(g,y,x,x),i&&e.context.fill(),t&&e.context.stroke();break;case"rect":l=kr(n,"x",0),c=kr(n,"y",0),E=kr(n,"width",0),R=kr(n,"height",0),b=kr(n,"rx",0),S=kr(n,"ry",0),b||S?e.context.roundRect(l,c,E,R,b||S):e.context.rect(l,c,E,R),i&&e.context.fill(),t&&e.context.stroke();break;case"ellipse":g=kr(n,"cx",0),y=kr(n,"cy",0),b=kr(n,"rx",0),S=kr(n,"ry",0),e.context.beginPath(),e.context.ellipse(g,y,b,S),i&&e.context.fill(),t&&e.context.stroke();break;case"line":u=kr(n,"x1",0),d=kr(n,"y1",0),f=kr(n,"x2",0),m=kr(n,"y2",0),e.context.beginPath(),e.context.moveTo(u,d),e.context.lineTo(f,m),t&&e.context.stroke();break;case"polygon":O=n.getAttribute("points"),_=O.match(/\d+/g).map(P=>parseInt(P,10)),e.context.poly(_,!0),i&&e.context.fill(),t&&e.context.stroke();break;case"polyline":O=n.getAttribute("points"),_=O.match(/\d+/g).map(P=>parseInt(P,10)),e.context.poly(_,!1),t&&e.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}for(let P=0;P<r.length;P++)MH(r[P],e,i,t)}function kr(n,e,i){const t=n.getAttribute(e);return t?Number(t):i}function JRe(n){const e=n.getAttribute("style"),i={},t={};let r=!1,s=!1;if(e){const o=e.split(";");for(let l=0;l<o.length;l++){const c=o[l],[u,d]=c.split(":");switch(u){case"stroke":d!=="none"&&(i.color=rr.shared.setValue(d).toNumber(),s=!0);break;case"stroke-width":i.width=Number(d);break;case"fill":d!=="none"&&(r=!0,t.color=rr.shared.setValue(d).toNumber());break;case"fill-opacity":t.alpha=Number(d);break;case"stroke-opacity":i.alpha=Number(d);break;case"opacity":t.alpha=Number(d),i.alpha=Number(d);break}}}else{const o=n.getAttribute("stroke");o&&o!=="none"&&(s=!0,i.color=rr.shared.setValue(o).toNumber(),i.width=kr(n,"stroke-width",1));const l=n.getAttribute("fill");l&&l!=="none"&&(r=!0,t.color=rr.shared.setValue(l).toNumber())}return{strokeStyle:s?i:null,fillStyle:r?t:null}}function eIe(n){return rr.isColorLike(n)}function jL(n){return n instanceof w_}function qL(n){return n instanceof Nv}function tIe(n,e,i){const t=rr.shared.setValue(e??0);return n.color=t.toNumber(),n.alpha=t.alpha===1?i.alpha:t.alpha,n.texture=Li.WHITE,{...i,...n}}function ZL(n,e,i){return n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,{...i,...n}}function KL(n,e,i){return e.buildLinearGradient(),n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,{...i,...n}}function iIe(n,e){var r;const i={...e,...n};if(i.texture){if(i.texture!==Li.WHITE){const o=((r=i.matrix)==null?void 0:r.clone().invert())||new Xi;o.translate(i.texture.frame.x,i.texture.frame.y),o.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=o}const s=i.texture.source.style;s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update())}const t=rr.shared.setValue(i.color);return i.alpha*=t.alpha,i.color=t.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}function Fu(n,e){if(n==null)return null;const i={},t=n;return eIe(n)?tIe(i,n,e):jL(n)?ZL(i,n,e):qL(n)?KL(i,n,e):t.fill&&jL(t.fill)?ZL(t,t.fill,e):t.fill&&qL(t.fill)?KL(t,t.fill,e):iIe(t,e)}function KO(n,e){const{width:i,alignment:t,miterLimit:r,cap:s,join:o,pixelLine:l,...c}=e,u=Fu(n,c);return u?{width:i,alignment:t,miterLimit:r,cap:s,join:o,pixelLine:l,...u}:null}const nIe=new Br,JL=new Xi,iA=class Ha extends Aa{constructor(){super(...arguments),this.uid=yr("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new $p,this._transform=new Xi,this._fillStyle={...Ha.defaultFillStyle},this._strokeStyle={...Ha.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new cl,this._boundsDirty=!0}clone(){const e=new Ha;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Fu(e,Ha.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=KO(e,Ha.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Fu(e,Ha.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Fu(e,Ha.defaultStrokeStyle),this}texture(e,i,t,r,s,o){return this.instructions.push({action:"texture",data:{image:e,dx:t||0,dy:r||0,dw:s||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:i?rr.shared.setValue(i).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new $p,this}fill(e,i){let t;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?t=r.data.path:t=this._activePath.clone(),t?(e!=null&&(i!==void 0&&typeof e=="number"&&(Hi(sn,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=Fu(e,Ha.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:i}=this._activePath.getLastPoint(Br.shared);this._activePath.clear(),this._activePath.moveTo(e,i)}stroke(e){let i;const t=this.instructions[this.instructions.length-1];return this._tick===0&&t&&t.action==="fill"?i=t.data.path:i=this._activePath.clone(),i?(e!=null&&(this._strokeStyle=KO(e,Ha.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const i=this.instructions[this.instructions.length-1-e],t=this._activePath.clone();if(i&&(i.action==="stroke"||i.action==="fill"))if(i.data.hole)i.data.hole.addPath(t);else{i.data.hole=t;break}}return this._initNextPathLocation(),this}arc(e,i,t,r,s,o){this._tick++;const l=this._transform;return this._activePath.arc(l.a*e+l.c*i+l.tx,l.b*e+l.d*i+l.ty,t,r,s,o),this}arcTo(e,i,t,r,s){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*e+o.c*i+o.tx,o.b*e+o.d*i+o.ty,o.a*t+o.c*r+o.tx,o.b*t+o.d*r+o.ty,s),this}arcToSvg(e,i,t,r,s,o,l){this._tick++;const c=this._transform;return this._activePath.arcToSvg(e,i,t,r,s,c.a*o+c.c*l+c.tx,c.b*o+c.d*l+c.ty),this}bezierCurveTo(e,i,t,r,s,o,l){this._tick++;const c=this._transform;return this._activePath.bezierCurveTo(c.a*e+c.c*i+c.tx,c.b*e+c.d*i+c.ty,c.a*t+c.c*r+c.tx,c.b*t+c.d*r+c.ty,c.a*s+c.c*o+c.tx,c.b*s+c.d*o+c.ty,l),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,i,t,r){return this._tick++,this._activePath.ellipse(e,i,t,r,this._transform.clone()),this}circle(e,i,t){return this._tick++,this._activePath.circle(e,i,t,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,i){this._tick++;const t=this._transform;return this._activePath.lineTo(t.a*e+t.c*i+t.tx,t.b*e+t.d*i+t.ty),this}moveTo(e,i){this._tick++;const t=this._transform,r=this._activePath.instructions,s=t.a*e+t.c*i+t.tx,o=t.b*e+t.d*i+t.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=o,this):(this._activePath.moveTo(s,o),this)}quadraticCurveTo(e,i,t,r,s){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*i+o.tx,o.b*e+o.d*i+o.ty,o.a*t+o.c*r+o.tx,o.b*t+o.d*r+o.ty,s),this}rect(e,i,t,r){return this._tick++,this._activePath.rect(e,i,t,r,this._transform.clone()),this}roundRect(e,i,t,r,s){return this._tick++,this._activePath.roundRect(e,i,t,r,s,this._transform.clone()),this}poly(e,i){return this._tick++,this._activePath.poly(e,i,this._transform.clone()),this}regularPoly(e,i,t,r,s=0,o){return this._tick++,this._activePath.regularPoly(e,i,t,r,s,o),this}roundPoly(e,i,t,r,s,o){return this._tick++,this._activePath.roundPoly(e,i,t,r,s,o),this}roundShape(e,i,t,r){return this._tick++,this._activePath.roundShape(e,i,t,r),this}filletRect(e,i,t,r,s){return this._tick++,this._activePath.filletRect(e,i,t,r,s),this}chamferRect(e,i,t,r,s,o){return this._tick++,this._activePath.chamferRect(e,i,t,r,s,o),this}star(e,i,t,r,s=0,o=0){return this._tick++,this._activePath.star(e,i,t,r,s,o,this._transform.clone()),this}svg(e){return this._tick++,KRe(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,i=e){return this._transform.scale(e,i),this}setTransform(e,i,t,r,s,o){return e instanceof Xi?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,i,t,r,s,o),this)}transform(e,i,t,r,s,o){return e instanceof Xi?(this._transform.append(e),this):(JL.set(e,i,t,r,s,o),this._transform.append(JL),this)}translate(e,i=e){return this._transform.translate(e,i),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let i=0;i<this.instructions.length;i++){const t=this.instructions[i],r=t.action;if(r==="fill"){const s=t.data;e.addBounds(s.path.bounds)}else if(r==="texture"){const s=t.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){const s=t.data,o=s.style.alignment,l=s.style.width*(1-o),c=s.path.bounds;e.addFrame(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l)}}return e}containsPoint(e){var r;if(!this.bounds.containsPoint(e.x,e.y))return!1;const i=this.instructions;let t=!1;for(let s=0;s<i.length;s++){const o=i[s],l=o.data,c=l.path;if(!o.action||!c)continue;const u=l.style,d=c.shapePath.shapePrimitives;for(let f=0;f<d.length;f++){const m=d[f].shape;if(!u||!m)continue;const g=d[f].transform,y=g?g.applyInverse(e,nIe):e;if(o.action==="fill")t=m.contains(y.x,y.y);else{const b=u;t=m.strokeContains(y.x,y.y,b.width,b.alignment)}const x=l.hole;if(x){const b=(r=x.shapePath)==null?void 0:r.shapePrimitives;if(b)for(let S=0;S<b.length;S++)b[S].shape.contains(y.x,y.y)&&(t=!1)}if(t)return!0}}return t}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(t),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(t)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};iA.defaultFillStyle={color:16777215,alpha:1,texture:Li.WHITE,matrix:null,fill:null};iA.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Li.WHITE,matrix:null,fill:null,pixelLine:!1};let Uo=iA;const eB=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function rIe(n){const e=[];let i=0;for(let t=0;t<eB.length;t++){const r=`_${eB[t]}`;e[i++]=n[r]}return i=EH(n._fill,e,i),i=sIe(n._stroke,e,i),i=oIe(n.dropShadow,e,i),e.join("-")}function EH(n,e,i){var t;return n&&(e[i++]=n.color,e[i++]=n.alpha,e[i++]=(t=n.fill)==null?void 0:t.styleKey),i}function sIe(n,e,i){return n&&(i=EH(n,e,i),e[i++]=n.width,e[i++]=n.alignment,e[i++]=n.cap,e[i++]=n.join,e[i++]=n.miterLimit),i}function oIe(n,e,i){return n&&(e[i++]=n.alpha,e[i++]=n.angle,e[i++]=n.blur,e[i++]=n.distance,e[i++]=rr.shared.setValue(n.color).toNumber()),i}const nA=class Tf extends Aa{constructor(e={}){super(),aIe(e);const i={...Tf.defaultTextStyle,...e};for(const t in i){const r=t;this[r]=i[t]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Tf.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Tf.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Uo.defaultFillStyle,...e},()=>{this._fill=Fu({...this._originalFill},Uo.defaultFillStyle)})),this._fill=Fu(e===0?"black":e,Uo.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Uo.defaultStrokeStyle,...e},()=>{this._stroke=KO({...this._originalStroke},Uo.defaultStrokeStyle)})),this._stroke=KO(e,Uo.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=rIe(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=Tf.defaultTextStyle;for(const i in e)this[i]=e[i]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Tf({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var t,r,s,o;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const l=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(t=this._fill)!=null&&t.texture&&this._fill.texture.destroy(l),(r=this._originalFill)!=null&&r.texture&&this._originalFill.texture.destroy(l),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(l),(o=this._originalStroke)!=null&&o.texture&&this._originalStroke.texture.destroy(l)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,i){return new Proxy(e,{set:(t,r,s)=>(t[r]=s,i==null||i(r,s),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(rr.isColorLike(e)||e instanceof Nv||e instanceof w_)}};nA.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};nA.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Lv=nA;function aIe(n){const e=n;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const i=Lv.defaultDropShadow;n.dropShadow={alpha:e.dropShadowAlpha??i.alpha,angle:e.dropShadowAngle??i.angle,blur:e.dropShadowBlur??i.blur,color:e.dropShadowColor??i.color,distance:e.dropShadowDistance??i.distance}}if(e.strokeThickness!==void 0){Hi(sn,"strokeThickness is now a part of stroke");const i=e.stroke;let t={};if(rr.isColorLike(i))t.color=i;else if(i instanceof Nv||i instanceof w_)t.fill=i;else if(Object.hasOwnProperty.call(i,"color")||Object.hasOwnProperty.call(i,"fill"))t=i;else throw new Error("Invalid stroke value.");n.stroke={...t,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){Hi(sn,"gradient fill is now a fill pattern: `new FillGradient(...)`");let i;n.fontSize==null?n.fontSize=Lv.defaultTextStyle.fontSize:typeof n.fontSize=="string"?i=parseInt(n.fontSize,10):i=n.fontSize;const t=new Nv(0,0,0,i*1.7),r=e.fillGradientStops.map(s=>rr.shared.setValue(s).toNumber());r.forEach((s,o)=>{const l=o/(r.length-1);t.addColorStop(l,s)}),n.fill={fill:t}}}class lIe{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,i){const t=zn.get().createCanvas();t.width=e,t.height=i;const r=t.getContext("2d");return{canvas:t,context:r}}getOptimalCanvasAndContext(e,i,t=1){e=Math.ceil(e*t-1e-6),i=Math.ceil(i*t-1e-6),e=qO(e),i=qO(i);const r=(e<<17)+(i<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(e,i)),s}returnCanvasAndContext(e){const i=e.canvas,{width:t,height:r}=i,s=(t<<17)+(r<<1);e.context.clearRect(0,0,t,r),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const tB=new lIe,cIe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function JM(n){const e=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let i=n.fontFamily;Array.isArray(n.fontFamily)||(i=n.fontFamily.split(","));for(let t=i.length-1;t>=0;t--){let r=i[t].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!cIe.includes(r)&&(r=`"${r}"`),i[t]=r}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${e} ${i.join(",")}`}const fk={willReadFrequently:!0},Ra=class Bt{static get experimentalLetterSpacingSupported(){let e=Bt._experimentalLetterSpacingSupported;if(e!==void 0){const i=zn.get().getCanvasRenderingContext2D().prototype;e=Bt._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(e,i,t,r,s,o,l,c,u){this.text=e,this.style=i,this.width=t,this.height=r,this.lines=s,this.lineWidths=o,this.lineHeight=l,this.maxLineWidth=c,this.fontProperties=u}static measureText(e=" ",i,t=Bt._canvas,r=i.wordWrap){var _;const s=`${e}:${i.styleKey}`;if(Bt._measurementCache[s])return Bt._measurementCache[s];const o=JM(i),l=Bt.measureFont(o);l.fontSize===0&&(l.fontSize=i.fontSize,l.ascent=i.fontSize);const c=Bt.__context;c.font=o;const d=(r?Bt._wordWrap(e,i,t):e).split(/(?:\r\n|\r|\n)/),f=new Array(d.length);let m=0;for(let O=0;O<d.length;O++){const k=Bt._measureText(d[O],i.letterSpacing,c);f[O]=k,m=Math.max(m,k)}const g=((_=i._stroke)==null?void 0:_.width)||0;let y=m+g;i.dropShadow&&(y+=i.dropShadow.distance);const x=i.lineHeight||l.fontSize;let b=Math.max(x,l.fontSize+g)+(d.length-1)*(x+i.leading);return i.dropShadow&&(b+=i.dropShadow.distance),new Bt(e,i,y,b,d,f,x+i.leading,m,l)}static _measureText(e,i,t){let r=!1;Bt.experimentalLetterSpacingSupported&&(Bt.experimentalLetterSpacing?(t.letterSpacing=`${i}px`,t.textLetterSpacing=`${i}px`,r=!0):(t.letterSpacing="0px",t.textLetterSpacing="0px"));const s=t.measureText(e);let o=s.width;const l=-s.actualBoundingBoxLeft;let u=s.actualBoundingBoxRight-l;if(o>0)if(r)o-=i,u-=i;else{const d=(Bt.graphemeSegmenter(e).length-1)*i;o+=d,u+=d}return Math.max(o,u)}static _wordWrap(e,i,t=Bt._canvas){const r=t.getContext("2d",fk);let s=0,o="",l="";const c=Object.create(null),{letterSpacing:u,whiteSpace:d}=i,f=Bt._collapseSpaces(d),m=Bt._collapseNewlines(d);let g=!f;const y=i.wordWrapWidth+u,x=Bt._tokenize(e);for(let b=0;b<x.length;b++){let S=x[b];if(Bt._isNewline(S)){if(!m){l+=Bt._addLine(o),g=!f,o="",s=0;continue}S=" "}if(f){const O=Bt.isBreakingSpace(S),k=Bt.isBreakingSpace(o[o.length-1]);if(O&&k)continue}const _=Bt._getFromCache(S,u,c,r);if(_>y)if(o!==""&&(l+=Bt._addLine(o),o="",s=0),Bt.canBreakWords(S,i.breakWords)){const O=Bt.wordWrapSplit(S);for(let k=0;k<O.length;k++){let M=O[k],E=M,R=1;for(;O[k+R];){const I=O[k+R];if(!Bt.canBreakChars(E,I,S,k,i.breakWords))M+=I;else break;E=I,R++}k+=R-1;const P=Bt._getFromCache(M,u,c,r);P+s>y&&(l+=Bt._addLine(o),g=!1,o="",s=0),o+=M,s+=P}}else{o.length>0&&(l+=Bt._addLine(o),o="",s=0);const O=b===x.length-1;l+=Bt._addLine(S,!O),g=!1,o="",s=0}else _+s>y&&(g=!1,l+=Bt._addLine(o),o="",s=0),(o.length>0||!Bt.isBreakingSpace(S)||g)&&(o+=S,s+=_)}return l+=Bt._addLine(o,!1),l}static _addLine(e,i=!0){return e=Bt._trimRight(e),e=i?`${e}
`:e,e}static _getFromCache(e,i,t,r){let s=t[e];return typeof s!="number"&&(s=Bt._measureText(e,i,r)+i,t[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let i=e.length-1;i>=0;i--){const t=e[i];if(!Bt.isBreakingSpace(t))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:Bt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return typeof e!="string"?!1:Bt._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const i=[];let t="";if(typeof e!="string")return i;for(let r=0;r<e.length;r++){const s=e[r],o=e[r+1];if(Bt.isBreakingSpace(s,o)||Bt._isNewline(s)){t!==""&&(i.push(t),t=""),i.push(s);continue}t+=s}return t!==""&&i.push(t),i}static canBreakWords(e,i){return i}static canBreakChars(e,i,t,r,s){return!0}static wordWrapSplit(e){return Bt.graphemeSegmenter(e)}static measureFont(e){if(Bt._fonts[e])return Bt._fonts[e];const i=Bt._context;i.font=e;const t=i.measureText(Bt.METRICS_STRING+Bt.BASELINE_SYMBOL),r={ascent:t.actualBoundingBoxAscent,descent:t.actualBoundingBoxDescent,fontSize:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent};return Bt._fonts[e]=r,r}static clearMetrics(e=""){e?delete Bt._fonts[e]:Bt._fonts={}}static get _canvas(){if(!Bt.__canvas){let e;try{const i=new OffscreenCanvas(0,0),t=i.getContext("2d",fk);if(t!=null&&t.measureText)return Bt.__canvas=i,i;e=zn.get().createCanvas()}catch{e=zn.get().createCanvas()}e.width=e.height=10,Bt.__canvas=e}return Bt.__canvas}static get _context(){return Bt.__context||(Bt.__context=Bt._canvas.getContext("2d",fk)),Bt.__context}};Ra.METRICS_STRING="|q";Ra.BASELINE_SYMBOL="M";Ra.BASELINE_MULTIPLIER=1.4;Ra.HEIGHT_MULTIPLIER=2;Ra.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(i=>i.segment)}return n=>[...n]})();Ra.experimentalLetterSpacing=!1;Ra._fonts={};Ra._newlines=[10,13];Ra._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Ra._measurementCache={};let iB=Ra;function nB(n,e){if(n.texture===Li.WHITE&&!n.fill)return rr.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof w_){const i=n.fill,t=e.createPattern(i.texture.source.resource,"repeat"),r=i.transform.copyTo(Xi.shared);return r.scale(i.texture.frame.width,i.texture.frame.height),t.setTransform(r),t}else if(n.fill instanceof Nv){const i=n.fill;if(i.type==="linear"){const t=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(r=>{t.addColorStop(r.offset,rr.shared.setValue(r.color).toHex())}),t}}}else{const i=e.createPattern(n.texture.source.resource,"repeat"),t=n.matrix.copyTo(Xi.shared);return t.scale(n.texture.frame.width,n.texture.frame.height),i.setTransform(t),i}return sr("FillStyle not recognised",n),"red"}function PH(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const e=[];for(let i=0,t=n.length;i<t;i++){const r=n[i];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let l=s,c=o;l<=c;l++)e.push(String.fromCharCode(l))}else e.push(...Array.from(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const AH=class RH extends hH{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const i={...RH.defaultOptions,...e};this._textureSize=i.textureSize,this._mipmap=i.mipmap;const t=i.style.clone();i.overrideFill&&(t._fill.color=16777215,t._fill.alpha=1,t._fill.texture=Li.WHITE,t._fill.fill=null),this.applyFillAsTint=i.overrideFill;const r=t.fontSize;t.fontSize=this.baseMeasurementFontSize;const s=JM(t);i.overrideSize?t._stroke&&(t._stroke.width*=this.baseRenderedFontSize/r):t.fontSize=this.baseRenderedFontSize=r,this._style=t,this._skipKerning=i.skipKerning??!1,this.resolution=i.resolution??1,this._padding=i.padding??4,this.fontMetrics=iB.measureFont(s),this.lineHeight=t.lineHeight||this.fontMetrics.fontSize||t.fontSize}ensureCharacters(e){var b,S;const i=PH(e).filter(_=>!this._currentChars.includes(_)).filter((_,O,k)=>k.indexOf(_)===O);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let t;this._currentPageIndex===-1?t=this._nextPage():t=this.pages[this._currentPageIndex];let{canvas:r,context:s}=t.canvasAndContext,o=t.texture.source;const l=this._style;let c=this._currentX,u=this._currentY;const d=this.baseRenderedFontSize/this.baseMeasurementFontSize,f=this._padding*d;let m=0,g=!1;const y=r.width/this.resolution,x=r.height/this.resolution;for(let _=0;_<i.length;_++){const O=i[_],k=iB.measureText(O,l,r,!1);k.lineHeight=k.height;const M=k.width*d,E=Math.ceil((l.fontStyle==="italic"?2:1)*M),R=k.height*d,P=E+f*2,I=R+f*2;if(g=!1,O!==`
`&&O!=="\r"&&O!=="	"&&O!==" "&&(g=!0,m=Math.ceil(Math.max(I,m))),c+P>y&&(u+=m,m=I,c=0,u+m>x)){o.update();const N=this._nextPage();r=N.canvasAndContext.canvas,s=N.canvasAndContext.context,o=N.texture.source,u=0}const T=M/d-(((b=l.dropShadow)==null?void 0:b.distance)??0)-(((S=l._stroke)==null?void 0:S.width)??0);if(this.chars[O]={id:O.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:T,kerning:{}},g){this._drawGlyph(s,k,c+f,u+f,d,l);const N=o.width*d,L=o.height*d,D=new vr(c/N*o.width,u/L*o.height,P/N*o.width,I/L*o.height);this.chars[O].texture=new Li({source:o,frame:D}),c+=Math.ceil(P)}}o.update(),this._currentX=c,this._currentY=u,this._skipKerning&&this._applyKerning(i,s)}get pageTextures(){return Hi(sn,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,i){const t=this._measureCache;for(let r=0;r<e.length;r++){const s=e[r];for(let o=0;o<this._currentChars.length;o++){const l=this._currentChars[o];let c=t[s];c||(c=t[s]=i.measureText(s).width);let u=t[l];u||(u=t[l]=i.measureText(l).width);let d=i.measureText(s+l).width,f=d-(c+u);f&&(this.chars[s].kerning[l]=f),d=i.measureText(s+l).width,f=d-(c+u),f&&(this.chars[l].kerning[s]=f)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,i=tB.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(i.context,this._style,e);const t=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new Li({source:new Kp({resource:i.canvas,resolution:t,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),s={canvasAndContext:i,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,i,t){i.fontSize=this.baseRenderedFontSize,e.scale(t,t),e.font=JM(i),i.fontSize=this.baseMeasurementFontSize,e.textBaseline=i.textBaseline;const r=i._stroke,s=(r==null?void 0:r.width)??0;if(r&&(e.lineWidth=s,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=nB(r,e)),i._fill&&(e.fillStyle=nB(i._fill,e)),i.dropShadow){const o=i.dropShadow,l=rr.shared.setValue(o.color).toArray(),c=o.blur*t,u=o.distance*t;e.shadowColor=`rgba(${l[0]*255},${l[1]*255},${l[2]*255},${o.alpha})`,e.shadowBlur=c,e.shadowOffsetX=Math.cos(o.angle)*u,e.shadowOffsetY=Math.sin(o.angle)*u}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,i,t,r,s,o){const l=i.text,c=i.fontProperties,u=o._stroke,d=((u==null?void 0:u.width)??0)*s,f=t+d/2,m=r-d/2,g=c.descent*s,y=i.lineHeight*s;o.stroke&&d&&e.strokeText(l,f,m+y-g),o._fill&&e.fillText(l,f,m+y-g)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:i,texture:t}=this.pages[e];tB.returnCanvasAndContext(i),t.destroy(!0)}this.pages=null}};AH.defaultOptions={textureSize:512,style:new Lv,mipmap:!0};let rB=AH;function hIe(n,e,i,t){const r={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=i.baseLineOffset;let s=r.lines[0],o=null,l=!0;const c={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},u=y=>{const x=s.width;for(let b=0;b<c.index;b++){const S=y.positions[b];s.chars.push(y.chars[b]),s.charPositions.push(S+x)}s.width+=y.width,l=!1,c.width=0,c.index=0,c.chars.length=0},d=()=>{let y=s.chars.length-1;if(t){let x=s.chars[y];for(;x===" ";)s.width-=i.chars[x].xAdvance,x=s.chars[--y]}r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},l=!0,r.lines.push(s),r.height+=i.lineHeight},f=i.baseMeasurementFontSize/e.fontSize,m=e.letterSpacing*f,g=e.wordWrapWidth*f;for(let y=0;y<n.length+1;y++){let x;const b=y===n.length;b||(x=n[y]);const S=i.chars[x]||i.chars[" "];if(/(?:\s)/.test(x)||x==="\r"||x===`
`||b){if(!l&&e.wordWrap&&s.width+c.width-m>g?(d(),u(c),b||s.charPositions.push(0)):(c.start=s.width,u(c),b||s.charPositions.push(0)),x==="\r"||x===`
`)s.width!==0&&d();else if(!b){const M=S.xAdvance+(S.kerning[o]||0)+m;s.width+=M,s.spaceWidth=M,s.spacesIndex.push(s.charPositions.length),s.chars.push(x)}}else{const k=S.kerning[o]||0,M=S.xAdvance+k+m;c.positions[c.index++]=c.width+k,c.chars.push(x),c.width+=M}o=x}return d(),e.align==="center"?uIe(r):e.align==="right"?dIe(r):e.align==="justify"&&fIe(r),r}function uIe(n){for(let e=0;e<n.lines.length;e++){const i=n.lines[e],t=n.width/2-i.width/2;for(let r=0;r<i.charPositions.length;r++)i.charPositions[r]+=t}}function dIe(n){for(let e=0;e<n.lines.length;e++){const i=n.lines[e],t=n.width-i.width;for(let r=0;r<i.charPositions.length;r++)i.charPositions[r]+=t}}function fIe(n){const e=n.width;for(let i=0;i<n.lines.length;i++){const t=n.lines[i];let r=0,s=t.spacesIndex[r++],o=0;const l=t.spacesIndex.length,u=(e-t.width)/l;for(let d=0;d<t.charPositions.length;d++)d===s&&(s=t.spacesIndex[r++],o+=u),t.charPositions[d]+=o}}let dx=0;class pIe{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(e,i){var o;let t=`${i.fontFamily}-bitmap`,r=!0;if(i._fill.fill&&!i._stroke)t+=i._fill.fill.styleKey,r=!1;else if(i._stroke||i.dropShadow){let l=i.styleKey;l=l.substring(0,l.lastIndexOf("-")),t=`${l}-bitmap`,r=!1}if(!Bn.has(t)){const l=new rB({style:i,overrideFill:r,overrideSize:!0,...this.defaultOptions});dx++,dx>50&&sr("BitmapText",`You have dynamically created ${dx} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),l.once("destroy",()=>{dx--,Bn.remove(t)}),Bn.set(t,l)}const s=Bn.get(t);return(o=s.ensureCharacters)==null||o.call(s,e),s}getLayout(e,i,t=!0){const r=this.getFont(e,i);return hIe([...e],i,r,t)}measureText(e,i,t=!0){return this.getLayout(e,i,t)}install(...e){var u,d,f,m;let i=e[0];typeof i=="string"&&(i={name:i,style:e[1],chars:(u=e[2])==null?void 0:u.chars,resolution:(d=e[2])==null?void 0:d.resolution,padding:(f=e[2])==null?void 0:f.padding,skipKerning:(m=e[2])==null?void 0:m.skipKerning},Hi(sn,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const t=i==null?void 0:i.name;if(!t)throw new Error("[BitmapFontManager] Property `name` is required.");i={...this.defaultOptions,...i};const r=i.style,s=r instanceof Lv?r:new Lv(r),o=s._fill.fill!==null&&s._fill.fill!==void 0,l=new rB({style:s,overrideFill:o,skipKerning:i.skipKerning,padding:i.padding,resolution:i.resolution,overrideSize:!1}),c=PH(i.chars);return l.ensureCharacters(c.join("")),Bn.set(`${t}-bitmap`,l),l.once("destroy",()=>Bn.remove(`${t}-bitmap`)),l}uninstall(e){const i=`${e}-bitmap`,t=Bn.get(i);t&&t.destroy()}}const sB=new pIe;class IH extends hH{constructor(e,i){super();const{textures:t,data:r}=e;Object.keys(r.pages).forEach(s=>{const o=r.pages[parseInt(s,10)],l=t[o.id];this.pages.push({texture:l})}),Object.keys(r.chars).forEach(s=>{const o=r.chars[s],{frame:l,source:c}=t[o.page],u=new vr(o.x+l.x,o.y+l.y,o.width,o.height),d=new Li({source:c,frame:u});this.chars[s]={id:s.codePointAt(0),xOffset:o.xOffset,yOffset:o.yOffset,xAdvance:o.xAdvance,kerning:o.kerning??{},texture:d}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=i}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:i}=this.pages[e];i.destroy(!0)}this.pages=null}static install(e){sB.install(e)}static uninstall(e){sB.uninstall(e)}}const pk={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const e=n.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const f in e){const m=e[f].match(/^[a-z]+/gm)[0],g=e[f].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),y={};for(const x in g){const b=g[x].split("="),S=b[0],_=b[1].replace(/"/gm,""),O=parseFloat(_),k=isNaN(O)?_:O;y[S]=k}i[m].push(y)}const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=i.info,[s]=i.common,[o]=i.distanceField??[];o&&(t.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),t.fontSize=parseInt(r.size,10),t.fontFamily=r.face,t.lineHeight=parseInt(s.lineHeight,10);const l=i.page;for(let f=0;f<l.length;f++)t.pages.push({id:parseInt(l[f].id,10)||0,file:l[f].file});const c={};t.baseLineOffset=t.lineHeight-parseInt(s.base,10);const u=i.char;for(let f=0;f<u.length;f++){const m=u[f],g=parseInt(m.id,10);let y=m.letter??m.char??String.fromCharCode(g);y==="space"&&(y=" "),c[g]=y,t.chars[y]={id:g,page:parseInt(m.page,10)||0,x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xOffset:parseInt(m.xoffset,10),yOffset:parseInt(m.yoffset,10),xAdvance:parseInt(m.xadvance,10),kerning:{}}}const d=i.kerning||[];for(let f=0;f<d.length;f++){const m=parseInt(d[f].first,10),g=parseInt(d[f].second,10),y=parseInt(d[f].amount,10);t.chars[c[g]].kerning[c[m]]=y}return t}},oB={test(n){const e=n;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=n.getElementsByTagName("info")[0],t=n.getElementsByTagName("common")[0],r=n.getElementsByTagName("distanceField")[0];r&&(e.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const s=n.getElementsByTagName("page"),o=n.getElementsByTagName("char"),l=n.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(t.getAttribute("lineHeight"),10);for(let u=0;u<s.length;u++)e.pages.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});const c={};e.baseLineOffset=e.lineHeight-parseInt(t.getAttribute("base"),10);for(let u=0;u<o.length;u++){const d=o[u],f=parseInt(d.getAttribute("id"),10);let m=d.getAttribute("letter")??d.getAttribute("char")??String.fromCharCode(f);m==="space"&&(m=" "),c[f]=m,e.chars[m]={id:f,page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{}}}for(let u=0;u<l.length;u++){const d=parseInt(l[u].getAttribute("first"),10),f=parseInt(l[u].getAttribute("second"),10),m=parseInt(l[u].getAttribute("amount"),10);e.chars[c[f]].kerning[c[d]]=m}return e}},aB={test(n){return typeof n=="string"&&n.includes("<font>")?oB.test(zn.get().parseXML(n)):!1},parse(n){return oB.parse(zn.get().parseXML(n))}},mIe=[".xml",".fnt"],gIe={extension:{type:Ht.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof IH,getCacheableAssets(n,e){const i={};return n.forEach(t=>{i[t]=e,i[`${t}-bitmap`]=e}),i[`${e.fontFamily}-bitmap`]=e,i}},vIe={extension:{type:Ht.LoadParser,priority:Fh.Normal},name:"loadBitmapFont",test(n){return mIe.includes(To.extname(n).toLowerCase())},async testParse(n){return pk.test(n)||aB.test(n)},async parse(n,e,i){const t=pk.test(n)?pk.parse(n):aB.parse(n),{src:r}=e,{pages:s}=t,o=[],l=t.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let f=0;f<s.length;++f){const m=s[f].file;let g=To.join(To.dirname(r),m);g=UM(g,r),o.push({src:g,data:l})}const c=await i.load(o),u=o.map(f=>c[f.src]);return new IH({data:t,textures:u},r)},async load(n,e){return await(await zn.get().fetch(n)).text()},async unload(n,e,i){await Promise.all(n.pages.map(t=>i.unload(t.texture.source._sourceOrigin))),n.destroy()}};class yIe{constructor(e,i=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(e){e.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let t=0;t<i;t++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const bIe={extension:{type:Ht.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(e=>e instanceof Li),getCacheableAssets:(n,e)=>{const i={};return n.forEach(t=>{e.forEach((r,s)=>{i[t+(s===0?"":s+1)]=r})}),i}};async function DH(n){if("Image"in globalThis)return new Promise(e=>{const i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const xIe={extension:{type:Ht.DetectionParser,priority:1},test:async()=>DH("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")},lB=["png","jpg","jpeg"],OIe={extension:{type:Ht.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...lB],remove:async n=>n.filter(e=>!lB.includes(e))},wIe="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function rA(n){return wIe?!1:document.createElement("video").canPlayType(n)!==""}const _Ie={extension:{type:Ht.DetectionParser,priority:0},test:async()=>rA("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")},SIe={extension:{type:Ht.DetectionParser,priority:0},test:async()=>rA("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")},CIe={extension:{type:Ht.DetectionParser,priority:0},test:async()=>rA("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")},kIe={extension:{type:Ht.DetectionParser,priority:0},test:async()=>DH("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")};class TIe{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,i,t)=>(this._parsersValidated=!1,e[i]=t,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,i){const t={promise:null,parser:null};return t.promise=(async()=>{var o,l;let r=null,s=null;if(i.loadParser&&(s=this._parserHash[i.loadParser],s||sr(`[Assets] specified load parser "${i.loadParser}" not found while loading ${e}`)),!s){for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.load&&((o=u.test)!=null&&o.call(u,e,i,this))){s=u;break}}if(!s)return sr(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(e,i,this),t.parser=s;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];u.parse&&u.parse&&await((l=u.testParse)==null?void 0:l.call(u,r,i,this))&&(r=await u.parse(r,i,this)||r,t.parser=u)}return r})(),t}async load(e,i){this._parsersValidated||this._validateParsers();let t=0;const r={},s=ZO(e),o=xa(e,u=>({alias:[u],src:u,data:{}})),l=o.length,c=o.map(async u=>{const d=To.toAbsolute(u.src);if(!r[u.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,u)),r[u.src]=await this.promiseCache[d].promise,i&&i(++t/l)}catch(f){throw delete this.promiseCache[d],delete r[u.src],new Error(`[Loader.load] Failed to load ${d}.
${f}`)}});return await Promise.all(c),s?r[o[0].src]:r}async unload(e){const t=xa(e,r=>({alias:[r],src:r})).map(async r=>{var l,c;const s=To.toAbsolute(r.src),o=this.promiseCache[s];if(o){const u=await o.promise;delete this.promiseCache[s],await((c=(l=o.parser)==null?void 0:l.unload)==null?void 0:c.call(l,u,r,this))}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,i)=>(i.name?e[i.name]&&sr(`[Assets] loadParser name conflict "${i.name}"`):sr("[Assets] loadParser should have a name"),{...e,[i.name]:i}),{})}}function em(n,e){if(Array.isArray(e)){for(const i of e)if(n.startsWith(`data:${i}`))return!0;return!1}return n.startsWith(`data:${e}`)}function tm(n,e){const i=n.split("?")[0],t=To.extname(i).toLowerCase();return Array.isArray(e)?e.includes(t):t===e}const MIe=".json",EIe="application/json",PIe={extension:{type:Ht.LoadParser,priority:Fh.Low},name:"loadJson",test(n){return em(n,EIe)||tm(n,MIe)},async load(n){return await(await zn.get().fetch(n)).json()}},AIe=".txt",RIe="text/plain",IIe={name:"loadTxt",extension:{type:Ht.LoadParser,priority:Fh.Low,name:"loadTxt"},test(n){return em(n,RIe)||tm(n,AIe)},async load(n){return await(await zn.get().fetch(n)).text()}},DIe=["normal","bold","100","200","300","400","500","600","700","800","900"],NIe=[".ttf",".otf",".woff",".woff2"],$Ie=["font/ttf","font/otf","font/woff","font/woff2"],VIe=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function LIe(n){const e=To.extname(n),r=To.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1));let s=r.length>0;for(const l of r)if(!l.match(VIe)){s=!1;break}let o=r.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const BIe=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function UIe(n){return BIe.test(n)?n:encodeURI(n)}const FIe={extension:{type:Ht.LoadParser,priority:Fh.Low},name:"loadWebFont",test(n){return em(n,$Ie)||tm(n,NIe)},async load(n,e){var t,r,s;const i=zn.get().getFontFaceSet();if(i){const o=[],l=((t=e.data)==null?void 0:t.family)??LIe(n),c=((s=(r=e.data)==null?void 0:r.weights)==null?void 0:s.filter(d=>DIe.includes(d)))??["normal"],u=e.data??{};for(let d=0;d<c.length;d++){const f=c[d],m=new FontFace(l,`url(${UIe(n)})`,{...u,weight:f});await m.load(),i.add(m),o.push(m)}return Bn.set(`${l}-and-url`,{url:n,fontFaces:o}),o.length===1?o[0]:o}return sr("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>{Bn.remove(`${e.family}-and-url`),zn.get().getFontFaceSet().delete(e)})}};function sA(n,e=1){var t;const i=(t=Jp.RETINA_PREFIX)==null?void 0:t.exec(n);return i?parseFloat(i[1]):e}function oA(n,e,i){n.label=i,n._sourceOrigin=i;const t=new Li({source:n,label:i}),r=()=>{delete e.promiseCache[i],Bn.has(i)&&Bn.remove(i)};return t.source.once("destroy",()=>{e.promiseCache[i]&&(sr("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),t.once("destroy",()=>{n.destroyed||(sr("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),t}const zIe=".svg",XIe="image/svg+xml",WIe={extension:{type:Ht.LoadParser,priority:Fh.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return em(n,XIe)||tm(n,zIe)},async load(n,e,i){return e.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?HIe(n):QIe(n,e,i,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function QIe(n,e,i,t){var b,S,_;const s=await(await zn.get().fetch(n)).blob(),o=URL.createObjectURL(s),l=new Image;l.src=o,l.crossOrigin=t,await l.decode(),URL.revokeObjectURL(o);const c=document.createElement("canvas"),u=c.getContext("2d"),d=((b=e.data)==null?void 0:b.resolution)||sA(n),f=((S=e.data)==null?void 0:S.width)??l.width,m=((_=e.data)==null?void 0:_.height)??l.height;c.width=f*d,c.height=m*d,u.drawImage(l,0,0,f*d,m*d);const{parseAsGraphicsContext:g,...y}=e.data,x=new Kp({resource:c,alphaMode:"premultiply-alpha-on-upload",resolution:d,...y});return oA(x,i,n)}async function HIe(n){const i=await(await zn.get().fetch(n)).text(),t=new Uo;return t.svg(i),t}const GIe=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let rp=null,eE=class{constructor(){rp||(rp=URL.createObjectURL(new Blob([GIe],{type:"application/javascript"}))),this.worker=new Worker(rp)}};eE.revokeObjectURL=function(){rp&&(URL.revokeObjectURL(rp),rp=null)};const YIe=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let sp=null;class NH{constructor(){sp||(sp=URL.createObjectURL(new Blob([YIe],{type:"application/javascript"}))),this.worker=new Worker(sp)}}NH.revokeObjectURL=function(){sp&&(URL.revokeObjectURL(sp),sp=null)};let cB=0,mk;class jIe{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:i}=new eE;i.addEventListener("message",t=>{i.terminate(),eE.revokeObjectURL(),e(t.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,i){var t;return this._run("loadImageBitmap",[e,(t=i==null?void 0:i.data)==null?void 0:t.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){mk===void 0&&(mk=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<mk&&(this._createdWorkers++,e=new NH().worker,e.addEventListener("message",i=>{this._complete(i.data),this._returnWorker(i.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,i){await this._initWorkers();const t=new Promise((r,s)=>{this._queue.push({id:e,arguments:i,resolve:r,reject:s})});return this._next(),t}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const i=this._queue.pop(),t=i.id;this._resolveHash[cB]={resolve:i.resolve,reject:i.reject},e.postMessage({data:i.arguments,uuid:cB++,id:t})}}const hB=new jIe,qIe=[".jpeg",".jpg",".png",".webp",".avif"],ZIe=["image/jpeg","image/png","image/webp","image/avif"];async function KIe(n,e){var r;const i=await zn.get().fetch(n);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${i.status} ${i.statusText}`);const t=await i.blob();return((r=e==null?void 0:e.data)==null?void 0:r.alphaMode)==="premultiplied-alpha"?createImageBitmap(t,{premultiplyAlpha:"none"}):createImageBitmap(t)}const $H={name:"loadTextures",extension:{type:Ht.LoadParser,priority:Fh.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return em(n,ZIe)||tm(n,qIe)},async load(n,e,i){var s;let t=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await hB.isImageBitmapSupported()?t=await hB.loadImageBitmap(n,e):t=await KIe(n,e):t=await new Promise(o=>{t=new Image,t.crossOrigin=this.config.crossOrigin,t.src=n,t.complete?o(t):t.onload=()=>{o(t)}});const r=new Kp({resource:t,alphaMode:"premultiply-alpha-on-upload",resolution:((s=e.data)==null?void 0:s.resolution)||sA(n),...e.data});return oA(r,i,n)},unload(n){n.destroy(!0)}},VH=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],JIe=VH.map(n=>`video/${n.substring(1)}`);function e6e(n,e,i){i===void 0&&!e.startsWith("data:")?n.crossOrigin=i6e(e):i!==!1&&(n.crossOrigin=typeof i=="string"?i:"anonymous")}function t6e(n){return new Promise((e,i)=>{n.addEventListener("canplaythrough",t),n.addEventListener("error",r),n.load();function t(){s(),e()}function r(o){s(),i(o)}function s(){n.removeEventListener("canplaythrough",t),n.removeEventListener("error",r)}})}function i6e(n,e=globalThis.location){if(n.startsWith("data:"))return"";e||(e=globalThis.location);const i=new URL(n,document.baseURI);return i.hostname!==e.hostname||i.port!==e.port||i.protocol!==e.protocol?"anonymous":""}const n6e={name:"loadVideo",extension:{type:Ht.LoadParser,name:"loadVideo"},test(n){const e=em(n,JIe),i=tm(n,VH);return e||i},async load(n,e,i){var c,u;const t={...zx.defaultOptions,resolution:((c=e.data)==null?void 0:c.resolution)||sA(n),alphaMode:((u=e.data)==null?void 0:u.alphaMode)||await UQ(),...e.data},r=document.createElement("video"),s={preload:t.autoLoad!==!1?"auto":void 0,"webkit-playsinline":t.playsinline!==!1?"":void 0,playsinline:t.playsinline!==!1?"":void 0,muted:t.muted===!0?"":void 0,loop:t.loop===!0?"":void 0,autoplay:t.autoPlay!==!1?"":void 0};Object.keys(s).forEach(d=>{const f=s[d];f!==void 0&&r.setAttribute(d,f)}),t.muted===!0&&(r.muted=!0),e6e(r,n,t.crossorigin);const o=document.createElement("source");let l;if(n.startsWith("data:"))l=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const d=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();l=zx.MIME_TYPES[d]||`video/${d}`}return o.src=n,l&&(o.type=l),new Promise(d=>{const f=async()=>{const m=new zx({...t,resource:r});r.removeEventListener("canplay",f),e.data.preload&&await t6e(r),d(oA(m,i,n))};r.addEventListener("canplay",f),r.appendChild(o)})},unload(n){n.destroy(!0)}},LH={extension:{type:Ht.ResolveParser,name:"resolveTexture"},test:$H.test,parse:n=>{var e;return{resolution:parseFloat(((e=Jp.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:n.split(".").pop(),src:n}}},r6e={extension:{type:Ht.ResolveParser,priority:-2,name:"resolveJson"},test:n=>Jp.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:LH.parse};class s6e{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Jp,this.loader=new TIe,this.cache=Bn,this._backgroundLoader=new yIe(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){sr("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let l=e.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const i=((s=e.texturePreference)==null?void 0:s.resolution)??1,t=typeof i=="number"?[i]:i,r=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:t}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,i){this._initialized||await this.init();const t=ZO(e),r=xa(e).map(l=>{if(typeof l!="string"){const c=this.resolver.getAlias(l);return c.some(u=>!this.resolver.hasKey(u))&&this.add(l),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,i);return t?o[r[0]]:o}addBundle(e,i){this.resolver.addBundle(e,i)}async loadBundle(e,i){this._initialized||await this.init();let t=!1;typeof e=="string"&&(t=!0,e=[e]);const r=this.resolver.resolveBundle(e),s={},o=Object.keys(r);let l=0,c=0;const u=()=>{i==null||i(++l/c)},d=o.map(f=>{const m=r[f];return c+=Object.keys(m).length,this._mapLoadToResolve(m,u).then(g=>{s[f]=g})});return await Promise.all(d),t?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const i=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const i=this.resolver.resolveBundle(e);Object.values(i).forEach(t=>{this._backgroundLoader.add(Object.values(t))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Bn.get(e);const i={};for(let t=0;t<e.length;t++)i[t]=Bn.get(e[t]);return i}async _mapLoadToResolve(e,i){const t=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const r=await this.loader.load(t,i);this._backgroundLoader.active=!0;const s={};return t.forEach(o=>{const l=r[o.src],c=[o.src];o.alias&&c.push(...o.alias),c.forEach(u=>{s[u]=l}),Bn.set(c,l)}),s}async unload(e){this._initialized||await this.init();const i=xa(e).map(r=>typeof r!="string"?r.src:r),t=this.resolver.resolve(i);await this._unloadFromResolved(t)}async unloadBundle(e){this._initialized||await this.init(),e=xa(e);const i=this.resolver.resolveBundle(e),t=Object.keys(i).map(r=>this._unloadFromResolved(i[r]));await Promise.all(t)}async _unloadFromResolved(e){const i=Object.values(e);i.forEach(t=>{Bn.remove(t.src)}),await this.loader.unload(i)}async _detectFormats(e){let i=[];e.preferredFormats&&(i=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const t of e.detections)e.skipDetections||await t.test()?i=await t.add(i):e.skipDetections||(i=await t.remove(i));return i=i.filter((t,r)=>i.indexOf(t)===r),i}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(t=>t in e).forEach(t=>{i.config[t]=e[t]})})}}const zu=new s6e;Cs.handleByList(Ht.LoadParser,zu.loader.parsers).handleByList(Ht.ResolveParser,zu.resolver.parsers).handleByList(Ht.CacheParser,zu.cache.parsers).handleByList(Ht.DetectionParser,zu.detections);Cs.add(bIe,OIe,xIe,kIe,_Ie,SIe,CIe,PIe,IIe,FIe,WIe,$H,n6e,vIe,gIe,LH,r6e);const uB={loader:Ht.LoadParser,resolver:Ht.ResolveParser,cache:Ht.CacheParser,detection:Ht.DetectionParser};Cs.handle(Ht.Asset,n=>{const e=n.ref;Object.entries(uB).filter(([i])=>!!e[i]).forEach(([i,t])=>Cs.add(Object.assign(e[i],{extension:e[i].extension??t})))},n=>{const e=n.ref;Object.keys(uB).filter(i=>!!e[i]).forEach(i=>Cs.remove(e[i]))});class Bv extends AQ{constructor(e){e instanceof Uo&&(e={context:e});const{context:i,roundPixels:t,...r}=e||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new Uo,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=t??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,i){return this.context[e](...i),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Bv(this._context.clone()):(this._ownedContext=null,new Bv(this._context))}lineStyle(e,i,t){Hi(sn,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return e&&(r.width=e),i&&(r.color=i),t&&(r.alpha=t),this.context.strokeStyle=r,this}beginFill(e,i){Hi(sn,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const t={};return e!==void 0&&(t.color=e),i!==void 0&&(t.alpha=i),this.context.fillStyle=t,this}endFill(){Hi(sn,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Uo.defaultStrokeStyle.width||e.color!==Uo.defaultStrokeStyle.color||e.alpha!==Uo.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Hi(sn,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Hi(sn,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Hi(sn,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Hi(sn,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Hi(sn,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Hi(sn,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}Cs.add(PAe,AAe);const o6e={__name:"CurveRopePixi",async setup(n){let e,i;const t=ot(null);let r=null,s=-1,o=null,l=null;const c=[([e,i]=px(()=>zu.load("./img/rope1.png")),e=await e,i(),e),([e,i]=px(()=>zu.load("./img/rope2.png")),e=await e,i(),e),([e,i]=px(()=>zu.load("./img/rope3.png")),e=await e,i(),e)];function u(){return o.children.map(y=>new Br(y.x,y.y))}function d(){let y=u();l||(l=new Bv),l.clear(),l.moveTo(y[0].x,y[0].y),l.bezierCurveTo(y[1].x,y[1].y,y[2].x,y[2].y,y[3].x,y[3].y),l.stroke({width:5,color:11141120,alpha:.5}),r.stage.addChild(l);for(let x=0;x<y.length;x++){let b=o.children[x];b.clear(),b.circle(0,0,b.hitArea.radius),b.fill(44469),x===s&&b.stroke({width:3,color:3751494})}}function f(y){const x=y.data.global;for(let b=0;b<o.children.length;b++){const S=o.children[b];let _=S.toLocal(x);if(_.x*_.x+_.y*_.y<S.hitArea.radius*S.hitArea.radius){s=b;break}}d()}function m(y){s=-1,d()}function g(y){if(s>=0){const{x,y:b}=y.data.global;let S=o.toLocal({x,y:b});o.children[s].position.set(S.x,S.y),d()}}return jn(async()=>{r=new cH,await r.init({background:"#eeeeee",resizeTo:window}),t.value.appendChild(r.canvas);const y={x:r.screen.width/2,y:r.screen.height/2};r.stage.eventMode="static",r.stage.hitArea=r.screen,r.stage.on("pointerupoutside",m),r.stage.on("pointerdown",f),r.stage.on("pointerup",m),r.stage.on("pointermove",g);{o=new Wr,r.stage.addChild(o);for(let b=0;b<4;b++){let S=new Bv;o.addChild(S),S.hitArea=new __(0,0,30)}let x=o.children.slice(o.children.length-4);x[0].position.set(y.x,y.y+300),x[1].position.set(y.x-300,y.y-100),x[2].position.set(y.x+300,y.y+100),x[3].position.set(y.x,y.y-300),d()}document.addEventListener("keydown",x=>{x.key>=1&&x.key<=9&&c[x.key-1]&&(x.key-1,d())}),r.ticker.add(()=>{for(let x=0;x<o.children.length;x++)o.children[x];d()})}),(y,x)=>(ai(),on("div",{ref_key:"rootRef",ref:t,style:{width:"100%",height:"100%"}},null,512))}},a6e={key:0},l6e={key:1},c6e={__name:"App",setup(n){const e=[{id:"TankMain",title:"",comp:TSe},{id:"KonvaMain",title:"Konva",comp:MCe},{id:"CoinKnight",title:"",comp:Gg,link:"CoinKnight/index.html"},{id:"FarmMine",title:"",comp:Gg,link:"FarmMine/index.html"},{id:"jigsaw",title:"",comp:Gg,link:"jigsaw/index.html"},{id:"tetris",title:"",comp:Gg,link:"tetris/index.html"},{id:"heart",title:"",comp:Gg,link:"webui/heart.html"},{id:"KonvaStageTest",title:"KonvaStageTest",comp:$Ce},{id:"GridSquare",title:"",comp:PCe},{id:"GridParallelogramH",title:"",comp:RCe},{id:"GridParallelogramV",title:"",comp:DCe},{id:"TrigoCalc",title:"",comp:LCe},{id:"ShaderFragBase",title:"Shader-",comp:cAe},{id:"ShaderImageBase",title:"Shader-",comp:fAe},{id:"d-puzzle",title:"d-",comp:z2,link:"video/puzzle.mp4"},{id:"d-ice",title:"d-",comp:z2,link:"video/ice.mp4"},{id:"d-door",title:"d-",comp:z2,link:"video/door.mp4"},{id:"BallGame",title:"",comp:xAe},{id:"CurveRope",title:"",comp:TAe},{id:"CurveRopePixi",title:"(Pixi)",comp:o6e}],i=ot(window.location.hash.slice(1));window.addEventListener("hashchange",()=>{i.value=window.location.hash.slice(1),document.title="Project:"+i.value});const t=gn(()=>e.find(s=>s.id===i.value)),r=gn(()=>{var s;return(s=t.value)==null?void 0:s.comp});return(s,o)=>{const l=Pt("GridItem"),c=Pt("Grid");return r.value?(ai(),on("div",a6e,[(ai(),Ur(HB,null,{default:Je(()=>[t.value.link?(ai(),Ur(xk(r.value),{key:0,link:t.value.link},null,8,["link"])):(ai(),Ur(xk(r.value),{key:1}))]),_:1}))])):(ai(),on("div",l6e,[Re(c,{col:5},{default:Je(()=>[(ai(),on(hn,null,yh(e,u=>Re(l,null,{default:Je(()=>[Re(khe,{routeData:u},null,8,["routeData"])]),_:2},1024)),64))]),_:1})]))}}};var tE={exports:{}};(function(n,e){(function(i,t){t(e,p7)})(qf,function(i,t){const r=typeof window<"u",s=function(){return r&&document.addEventListener?function(a,h,p,C=!1){a&&h&&p&&a.addEventListener(h,p,C)}:function(a,h,p){a&&h&&p&&a.attachEvent("on"+h,p)}}(),o=function(){return r&&document.removeEventListener?function(a,h,p,C=!1){a&&h&&a.removeEventListener(h,p,C)}:function(a,h,p){a&&h&&a.detachEvent("on"+h,p)}}();var l=(a,h)=>{const p=a.__vccOpts||a;for(const[C,w]of h)p[C]=w;return p};const c="ivu-affix";function u(a,h){const p=h?"pageYOffset":"pageXOffset",C=h?"scrollTop":"scrollLeft";let w=a[p];return r&&typeof w!="number"&&(w=window.document.documentElement[C]),w}function d(a){if(!r)return;const h=a.getBoundingClientRect(),p=u(window,!0),C=u(window),w=window.document.body,v=w.clientTop||0,A=w.clientLeft||0;return{top:h.top+p-v,left:h.left+C-A}}const f={name:"Affix",emits:["on-change"],props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},useCapture:{type:Boolean,default:!1}},data(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType(){let a="top";return this.offsetBottom>=0&&(a="bottom"),a},classes(){return[{[`${c}`]:this.affix}]}},mounted(){s(window,"scroll",this.handleScroll,this.useCapture),s(window,"resize",this.handleScroll,this.useCapture),t.nextTick(()=>{this.handleScroll()})},beforeUnmount(){o(window,"scroll",this.handleScroll,this.useCapture),o(window,"resize",this.handleScroll,this.useCapture)},methods:{handleScroll(){if(!r)return;const a=this.affix,h=u(window,!0),p=d(this.$el),C=window.innerHeight,w=this.$el.getElementsByTagName("div")[0].offsetHeight;p.top-this.offsetTop<h&&this.offsetType=="top"&&!a?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${p.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):p.top-this.offsetTop>h&&this.offsetType=="top"&&a&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),p.top+this.offsetBottom+w>h+C&&this.offsetType=="bottom"&&!a?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${p.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):p.top+this.offsetBottom+w<h+C&&this.offsetType=="bottom"&&a&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};function m(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",null,[t.createElementVNode("div",{ref:"point",class:t.normalizeClass(v.classes),style:t.normalizeStyle(w.styles)},[t.renderSlot(a.$slots,"default")],6),t.withDirectives(t.createElementVNode("div",{style:t.normalizeStyle(w.slotStyle)},null,4),[[t.vShow,w.slot]])])}var g=l(f,[["render",m]]);const y="ivu-icon",x={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return[`${y}`,{[`${y}-${this.type}`]:this.type!=="",[`${this.custom}`]:this.custom!==""}]},styles(){let a={};return this.size&&(a["font-size"]=`${this.size}px`),this.color&&(a.color=this.color),a}}};function b(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("i",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.styles)},null,6)}var S=l(x,[["render",b]]);function _(a,h){for(let p=0;p<h.length;p++)if(a===h[p])return!0;return!1}let O;function k(a){if(r&&O===void 0){const h=document.createElement("div");h.style.width="100%",h.style.height="200px";const p=document.createElement("div"),C=p.style;C.position="absolute",C.top=0,C.left=0,C.pointerEvents="none",C.visibility="hidden",C.width="200px",C.height="150px",C.overflow="hidden",p.appendChild(h),document.body.appendChild(p);const w=h.offsetWidth;p.style.overflow="scroll";let v=h.offsetWidth;w===v&&(v=p.clientWidth),document.body.removeChild(p),O=w-v}return O}const M=r&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||!1,E=/([\:\-\_]+(.))/g,R=/^moz([A-Z])/;function P(a){return a.replace(E,function(h,p,C,w){return w?C.toUpperCase():C}).replace(R,"Moz$1")}function I(a,h){if(r){if(!a||!h)return null;h=P(h),h==="float"&&(h="cssFloat");try{const p=document.defaultView.getComputedStyle(a,"");return a.style[h]||p?p[h]:null}catch{return a.style[h]}}}function T(a){return a.toString()[0].toUpperCase()+a.toString().slice(1)}function N(a){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(a)]}function L(a){const h=N(a);let p;if(h==="array")p=[];else if(h==="object")p={};else return a;if(h==="array")for(let C=0;C<a.length;C++)p.push(L(a[C]));else if(h==="object")for(let C in a)p[C]=L(a[C]);return p}function D(a,h=0,p,C=500,w){if(!r)return;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(H){return window.setTimeout(H,1e3/60)});const v=Math.abs(h-p),A=Math.ceil(v/C*50);function V(H,X,Y){if(H===X){w&&w();return}let le=H+Y>X?X:H+Y;H>X&&(le=H-Y<X?X:H-Y),a===window?window.scrollTo(le,le):a.scrollTop=le,window.requestAnimationFrame(()=>V(le,X,Y))}V(h,p,A)}function $(a,h,p){typeof h=="string"?p=[h]:p=h;let C=a.$parent,w=C.$options.name;for(;C&&(!w||p.indexOf(w)<0);)C=C.$parent,C&&(w=C.$options.name);return C}function B(a,h){let p=[];const C=a.$parent;return C?(C.$options.name===h&&p.push(C),p.concat(B(C,h))):[]}const U=function(a){return(a||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function Q(a,h){if(!a||!h)return!1;if(h.indexOf(" ")!==-1)throw new Error("className should not contain space.");return a.classList?a.classList.contains(h):(" "+a.className+" ").indexOf(" "+h+" ")>-1}function Z(a,h){if(!a)return;let p=a.className;const C=(h||"").split(" ");for(let w=0,v=C.length;w<v;w++){const A=C[w];!A||(a.classList?a.classList.add(A):Q(a,A)||(p+=" "+A))}a.classList||(a.className=p)}function te(a,h){if(!a||!h)return;const p=h.split(" ");let C=" "+a.className+" ";for(let w=0,v=p.length;w<v;w++){const A=p[w];!A||(a.classList?a.classList.remove(A):Q(a,A)&&(C=C.replace(" "+A+" "," ")))}a.classList||(a.className=U(C))}const ce={xs:"480px",sm:"576px",md:"768px",lg:"992px",xl:"1200px",xxl:"1600px"};function pe(){if(!r)return;const a=h=>({media:h,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||a}const Ee=/#([^#]+)$/;async function we(a,h="unnamed"){if(!r)return Promise.reject();try{const p=await(await fetch(a)).blob();if(!p)return Promise.reject();const C=URL.createObjectURL(p),w=document.createElement("a");return w.setAttribute("href",C),w.setAttribute("download",h),w.click(),URL.revokeObjectURL(C),Promise.resolve()}catch(p){return Promise.reject(p)}}const he="ivu-alert",_e={name:"Alert",components:{Icon:S},props:{type:{validator(a){return _(a,["success","info","warning","error"])},default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},banner:{type:Boolean,default:!1},fade:{type:Boolean,default:!0}},data(){return{closed:!1,desc:!1}},computed:{wrapClasses(){return[`${he}`,`${he}-${this.type}`,{[`${he}-with-icon`]:this.showIcon,[`${he}-with-desc`]:this.desc,[`${he}-with-banner`]:this.banner}]},messageClasses(){return`${he}-message`},descClasses(){return`${he}-desc`},closeClasses(){return`${he}-close`},iconClasses(){return`${he}-icon`},iconType(){let a="";switch(this.type){case"success":a="ios-checkmark-circle";break;case"info":a="ios-information-circle";break;case"warning":a="ios-alert";break;case"error":a="ios-close-circle";break}return this.desc&&(a+="-outline"),a}},methods:{close(a){this.closed=!0,this.$emit("on-close",a)}},mounted(){this.desc=this.$slots.desc!==void 0}};function Ce(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Transition,{name:p.fade?"fade":""},{default:t.withCtx(()=>[w.closed?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.wrapClasses)},[p.showIcon?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(v.iconClasses)},[t.renderSlot(a.$slots,"icon",{},()=>[t.createVNode(A,{type:v.iconType},null,8,["type"])])],2)):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(v.messageClasses)},[t.renderSlot(a.$slots,"default")],2),t.createElementVNode("span",{class:t.normalizeClass(v.descClasses)},[t.renderSlot(a.$slots,"desc")],2),p.closable?(t.openBlock(),t.createElementBlock("a",{key:1,class:t.normalizeClass(v.closeClasses),onClick:h[0]||(h[0]=(...V)=>v.close&&v.close(...V))},[t.renderSlot(a.$slots,"close",{},()=>[t.createVNode(A,{type:"ios-close"})])],2)):t.createCommentVNode("",!0)],2))]),_:3},8,["name"])}var K=l(_e,[["render",Ce]]);const j={name:"Anchor",provide(){return{AnchorInstance:this}},emits:["on-change","on-select"],props:{affix:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},offsetBottom:Number,bounds:{type:Number,default:5},container:null,showInk:{type:Boolean,default:!1},scrollOffset:{type:Number,default:0}},data(){return{prefix:"ivu-anchor",isAffixed:!1,inkTop:0,animating:!1,currentLink:"",currentId:"",scrollContainer:null,scrollElement:null,wrapperTop:0,upperFirstTitle:!0,links:[]}},computed:{wrapperComponent(){return this.affix?"Affix":"div"},wrapperStyle(){return{maxHeight:this.offsetTop?`calc(100vh - ${this.offsetTop}px)`:"100vh"}},containerIsWindow(){return this.scrollContainer===window},titlesOffsetArr(){const a=this.links.map(p=>p.link.href).map(p=>p.split("#")[1]);let h=[];return r&&a.forEach(p=>{const C=document.getElementById(p);C&&h.push({link:`#${p}`,offset:C.offsetTop-this.scrollElement.offsetTop})}),h}},methods:{handleAffixStateChange(a){this.isAffixed=this.affix&&a},handleScroll(a){if(this.upperFirstTitle=!!this.titlesOffsetArr[0]&&a.target.scrollTop<this.titlesOffsetArr[0].offset,this.animating)return;const h=r?document.documentElement.scrollTop||document.body.scrollTop||a.target.scrollTop:0;this.getCurrentScrollAtTitleId(h)},handleHashChange(){if(!r)return;const a=window.location.href,h=Ee.exec(a);!h||(this.currentLink=h[0],this.currentId=h[1])},handleScrollTo(){if(!r)return;const a=document.getElementById(this.currentId),h=document.querySelector(`a[data-href="${this.currentLink}"]`);let p=this.scrollOffset;if(h&&(p=parseFloat(h.getAttribute("data-scroll-offset"))),!a)return;const C=a.offsetTop-this.wrapperTop-p;this.animating=!0,D(this.scrollContainer,this.scrollElement.scrollTop,C,600,()=>{this.animating=!1}),this.handleSetInkTop()},handleSetInkTop(){if(!r)return;const a=document.querySelector(`a[data-href="${this.currentLink}"]`);if(!a)return;const h=a.offsetTop,p=h<0?this.offsetTop:h;this.inkTop=p},getCurrentScrollAtTitleId(a){let h=-1,p=this.titlesOffsetArr.length,C={link:"#",offset:0};for(a+=this.bounds;++h<p;){let w=this.titlesOffsetArr[h],v=this.titlesOffsetArr[h+1];if(a>=w.offset&&a<(v&&v.offset||1/0)){C=this.titlesOffsetArr[h];break}}this.currentLink=C.link,this.handleSetInkTop()},getContainer(){!r||(this.scrollContainer=this.container?typeof this.container=="string"?document.querySelector(this.container):this.container:window,this.scrollElement=this.container?this.scrollContainer:document.documentElement||document.body)},removeListener(){o(this.scrollContainer,"scroll",this.handleScroll),o(window,"hashchange",this.handleHashChange)},init(){this.handleHashChange(),t.nextTick(()=>{this.removeListener(),this.getContainer(),this.wrapperTop=this.containerIsWindow?0:this.scrollElement.offsetTop,this.handleScrollTo(),this.handleSetInkTop(),this.titlesOffsetArr[0]&&(this.upperFirstTitle=this.scrollElement.scrollTop<this.titlesOffsetArr[0].offset),s(this.scrollContainer,"scroll",this.handleScroll),s(window,"hashchange",this.handleHashChange)})},addLink(a,h){this.links.push({id:a,link:h})},removeLink(a){const h=this.links.findIndex(p=>p.id===a);this.links.splice(h,1)}},watch:{$route(){this.currentLink="",this.currentId="",this.handleHashChange(),t.nextTick(()=>{this.handleScrollTo()})},container(){this.init()},currentLink(a,h){this.$emit("on-change",a,h)}},mounted(){this.init()},beforeUnmount(){this.removeListener()}};function F(a,h,p,C,w,v){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(v.wrapperComponent),{"offset-top":p.offsetTop,"offset-bottom":p.offsetBottom,onOnChange:v.handleAffixStateChange},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(`${w.prefix}-wrapper`),style:t.normalizeStyle(v.wrapperStyle)},[t.createElementVNode("div",{class:t.normalizeClass(`${w.prefix}`)},[t.createElementVNode("div",{class:t.normalizeClass(`${w.prefix}-ink`)},[t.withDirectives(t.createElementVNode("span",{class:t.normalizeClass(`${w.prefix}-ink-ball`),style:t.normalizeStyle({top:`${w.inkTop}px`})},null,6),[[t.vShow,p.showInk]])],2),t.renderSlot(a.$slots,"default")],2)],6)]),_:3},40,["offset-top","offset-bottom","onOnChange"])}var z=l(j,[["render",F]]);function ee(a=32){const h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",p=h.length;let C="";for(let w=0;w<a;w++)C+=h.charAt(Math.floor(Math.random()*p));return C}const re={name:"AnchorLink",inject:["AnchorInstance"],props:{href:String,title:String,scrollOffset:{type:Number,default(){return t.inject("AnchorInstance").scrollOffset}}},data(){return{prefix:"ivu-anchor-link",id:ee(6)}},computed:{anchorLinkClasses(){return[this.prefix,this.AnchorInstance.currentLink===this.href?`${this.prefix}-active`:""]},linkTitleClasses(){return[`${this.prefix}-title`]}},methods:{goAnchor(){this.currentLink=this.href,this.AnchorInstance.handleHashChange(),this.AnchorInstance.handleScrollTo(),this.AnchorInstance.$emit("on-select",this.href),this.$router?this.$router.push(this.href,()=>{}):r&&(window.location.href=this.href)}},mounted(){this.AnchorInstance.addLink(this.id,this),t.nextTick(()=>{this.AnchorInstance.init()})},beforeUnmount(){this.AnchorInstance.removeLink(this.id)}},W=["href","data-scroll-offset","data-href","title"];function q(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.anchorLinkClasses)},[t.createElementVNode("a",{class:t.normalizeClass(v.linkTitleClasses),href:p.href,"data-scroll-offset":p.scrollOffset,"data-href":p.href,onClick:h[0]||(h[0]=t.withModifiers((...A)=>v.goAnchor&&v.goAnchor(...A),["prevent"])),title:p.title},t.toDisplayString(p.title),11,W),t.renderSlot(a.$slots,"default")],2)}var ae=l(re,[["render",q]]),fe={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(a){return _(a,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){if(typeof this.to!="string")return null;if(this.to.includes("//"))return this.to;const a=this.$router;if(a){const h=this.$route,p=a.resolve(this.to,h,this.append);return p?p.href:this.to}return this.to}},methods:{handleOpenTo(){if(!r)return;const a=this.$router;let h=this.to;if(a){const p=this.$route,C=a.resolve(this.to,p,this.append);h=C?C.href:this.to}typeof this.to!="string"&&window.open(h)},handleClick(a=!1){const h=this.$router;!r||(a?this.handleOpenTo():h?typeof this.to=="string"&&this.to.includes("//")?window.location.href=this.to:this.replace?this.$router.replace(this.to,()=>{}):this.$router.push(this.to,()=>{}):window.location.href=this.to)},handleCheckClick(a,h=!1){if(this.to){if(this.target==="_blank")return this.handleOpenTo(),!1;a.preventDefault(),this.handleClick(h)}}}};function ye(a,h){let p=!1;return h.forEach(C=>{a.includes(C)&&(p=!0)}),p}const Me={name:"Auth",mixins:[fe],emits:["click"],props:{authority:{type:[String,Array,Function,Boolean],default:!0},access:{type:[String,Array]},prevent:{type:Boolean,default:!1},message:{type:String,default:""},customTip:{type:Boolean,default:!1},display:{type:String}},computed:{isPermission(){let a;if(typeof this.authority=="boolean")a=this.authority;else if(this.authority instanceof Function)a=this.authority();else{const h=typeof this.authority=="string"?[this.authority]:this.authority,p=typeof this.access=="string"?[this.access]:this.access;a=ye(h,p)}return a},options(){let a={};return this.display&&(a.display=this.display),{class:{"ivu-auth":!0,"ivu-auth-permission":this.isPermission,"ivu-auth-no-math":!this.isPermission,"ivu-auth-redirect":!this.isPermission&&this.to,"ivu-auth-prevent":this.prevent},style:a}}},render(){return this.isPermission?t.h("div",this.options,this.$slots.default()):this.to?t.h("div",this.options):this.prevent?t.h("div",Object.assign({},this.options,{onClick:this.handlePreventClick}),[t.h("div",{class:"ivu-auth-prevent-no-match"},this.$slots.default())]):t.h("div",this.options,this.$slots.noMatch())},methods:{handlePreventClick(a){this.isPermission||(this.customTip||this.$Message.info({content:this.message,duration:3}),this.$emit("click",a))}},created(){!this.isPermission&&this.to&&this.handleClick(!1)}};var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof qf<"u"?qf:typeof self<"u"?self:{};function G(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ue={exports:{}};/**!
* @fileOverview Kickass library to create and place poppers near their reference elements.
* @version 1.16.1
* @license
* Copyright (c) 2016 Federico Zivolo and contributors
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/(function(a,h){(function(p,C){a.exports=C()})(J,function(){var p=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",C=function(){for(var ie=["Edge","Trident","Firefox"],ve=0;ve<ie.length;ve+=1)if(p&&navigator.userAgent.indexOf(ie[ve])>=0)return 1;return 0}();function w(ie){var ve=!1;return function(){ve||(ve=!0,window.Promise.resolve().then(function(){ve=!1,ie()}))}}function v(ie){var ve=!1;return function(){ve||(ve=!0,setTimeout(function(){ve=!1,ie()},C))}}var A=p&&window.Promise,V=A?w:v;function H(ie){var ve={};return ie&&ve.toString.call(ie)==="[object Function]"}function X(ie,ve){if(ie.nodeType!==1)return[];var ke=ie.ownerDocument.defaultView,Ie=ke.getComputedStyle(ie,null);return ve?Ie[ve]:Ie}function Y(ie){return ie.nodeName==="HTML"?ie:ie.parentNode||ie.host}function le(ie){if(!ie)return document.body;switch(ie.nodeName){case"HTML":case"BODY":return ie.ownerDocument.body;case"#document":return ie.body}var ve=X(ie),ke=ve.overflow,Ie=ve.overflowX,qe=ve.overflowY;return/(auto|scroll|overlay)/.test(ke+qe+Ie)?ie:le(Y(ie))}function xe(ie){return ie&&ie.referenceNode?ie.referenceNode:ie}var be=p&&!!(window.MSInputMethodContext&&document.documentMode),ge=p&&/MSIE 10/.test(navigator.userAgent);function se(ie){return ie===11?be:ie===10?ge:be||ge}function Ae(ie){if(!ie)return document.documentElement;for(var ve=se(10)?document.body:null,ke=ie.offsetParent||null;ke===ve&&ie.nextElementSibling;)ke=(ie=ie.nextElementSibling).offsetParent;var Ie=ke&&ke.nodeName;return!Ie||Ie==="BODY"||Ie==="HTML"?ie?ie.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(ke.nodeName)!==-1&&X(ke,"position")==="static"?Ae(ke):ke}function $t(ie){var ve=ie.nodeName;return ve==="BODY"?!1:ve==="HTML"||Ae(ie.firstElementChild)===ie}function mt(ie){return ie.parentNode!==null?mt(ie.parentNode):ie}function xt(ie,ve){if(!ie||!ie.nodeType||!ve||!ve.nodeType)return document.documentElement;var ke=ie.compareDocumentPosition(ve)&Node.DOCUMENT_POSITION_FOLLOWING,Ie=ke?ie:ve,qe=ke?ve:ie,je=document.createRange();je.setStart(Ie,0),je.setEnd(qe,0);var et=je.commonAncestorContainer;if(ie!==et&&ve!==et||Ie.contains(qe))return $t(et)?et:Ae(et);var st=mt(ie);return st.host?xt(st.host,ve):xt(ie,mt(ve).host)}function He(ie){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",ke=ve==="top"?"scrollTop":"scrollLeft",Ie=ie.nodeName;if(Ie==="BODY"||Ie==="HTML"){var qe=ie.ownerDocument.documentElement,je=ie.ownerDocument.scrollingElement||qe;return je[ke]}return ie[ke]}function De(ie,ve){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ie=He(ve,"top"),qe=He(ve,"left"),je=ke?-1:1;return ie.top+=Ie*je,ie.bottom+=Ie*je,ie.left+=qe*je,ie.right+=qe*je,ie}function Ke(ie,ve){var ke=ve==="x"?"Left":"Top",Ie=ke==="Left"?"Right":"Bottom";return parseFloat(ie["border"+ke+"Width"])+parseFloat(ie["border"+Ie+"Width"])}function Ye(ie,ve,ke,Ie){return Math.max(ve["offset"+ie],ve["scroll"+ie],ke["client"+ie],ke["offset"+ie],ke["scroll"+ie],se(10)?parseInt(ke["offset"+ie])+parseInt(Ie["margin"+(ie==="Height"?"Top":"Left")])+parseInt(Ie["margin"+(ie==="Height"?"Bottom":"Right")]):0)}function Xt(ie){var ve=ie.body,ke=ie.documentElement,Ie=se(10)&&getComputedStyle(ke);return{height:Ye("Height",ve,ke,Ie),width:Ye("Width",ve,ke,Ie)}}var Wt=function(ie,ve){if(!(ie instanceof ve))throw new TypeError("Cannot call a class as a function")},Mt=function(){function ie(ve,ke){for(var Ie=0;Ie<ke.length;Ie++){var qe=ke[Ie];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(ve,qe.key,qe)}}return function(ve,ke,Ie){return ke&&ie(ve.prototype,ke),Ie&&ie(ve,Ie),ve}}(),Ot=function(ie,ve,ke){return ve in ie?Object.defineProperty(ie,ve,{value:ke,enumerable:!0,configurable:!0,writable:!0}):ie[ve]=ke,ie},Rt=Object.assign||function(ie){for(var ve=1;ve<arguments.length;ve++){var ke=arguments[ve];for(var Ie in ke)Object.prototype.hasOwnProperty.call(ke,Ie)&&(ie[Ie]=ke[Ie])}return ie};function Gt(ie){return Rt({},ie,{right:ie.left+ie.width,bottom:ie.top+ie.height})}function Et(ie){var ve={};try{if(se(10)){ve=ie.getBoundingClientRect();var ke=He(ie,"top"),Ie=He(ie,"left");ve.top+=ke,ve.left+=Ie,ve.bottom+=ke,ve.right+=Ie}else ve=ie.getBoundingClientRect()}catch{}var qe={left:ve.left,top:ve.top,width:ve.right-ve.left,height:ve.bottom-ve.top},je=ie.nodeName==="HTML"?Xt(ie.ownerDocument):{},et=je.width||ie.clientWidth||qe.width,st=je.height||ie.clientHeight||qe.height,yt=ie.offsetWidth-et,Qt=ie.offsetHeight-st;if(yt||Qt){var jt=X(ie);yt-=Ke(jt,"x"),Qt-=Ke(jt,"y"),qe.width-=yt,qe.height-=Qt}return Gt(qe)}function gt(ie,ve){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ie=se(10),qe=ve.nodeName==="HTML",je=Et(ie),et=Et(ve),st=le(ie),yt=X(ve),Qt=parseFloat(yt.borderTopWidth),jt=parseFloat(yt.borderLeftWidth);ke&&qe&&(et.top=Math.max(et.top,0),et.left=Math.max(et.left,0));var Lt=Gt({top:je.top-et.top-Qt,left:je.left-et.left-jt,width:je.width,height:je.height});if(Lt.marginTop=0,Lt.marginLeft=0,!Ie&&qe){var qt=parseFloat(yt.marginTop),Ei=parseFloat(yt.marginLeft);Lt.top-=Qt-qt,Lt.bottom-=Qt-qt,Lt.left-=jt-Ei,Lt.right-=jt-Ei,Lt.marginTop=qt,Lt.marginLeft=Ei}return(Ie&&!ke?ve.contains(st):ve===st&&st.nodeName!=="BODY")&&(Lt=De(Lt,ve)),Lt}function ct(ie){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke=ie.ownerDocument.documentElement,Ie=gt(ie,ke),qe=Math.max(ke.clientWidth,window.innerWidth||0),je=Math.max(ke.clientHeight,window.innerHeight||0),et=ve?0:He(ke),st=ve?0:He(ke,"left"),yt={top:et-Ie.top+Ie.marginTop,left:st-Ie.left+Ie.marginLeft,width:qe,height:je};return Gt(yt)}function It(ie){var ve=ie.nodeName;if(ve==="BODY"||ve==="HTML")return!1;if(X(ie,"position")==="fixed")return!0;var ke=Y(ie);return ke?It(ke):!1}function bt(ie){if(!ie||!ie.parentElement||se())return document.documentElement;for(var ve=ie.parentElement;ve&&X(ve,"transform")==="none";)ve=ve.parentElement;return ve||document.documentElement}function ei(ie,ve,ke,Ie){var qe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,je={top:0,left:0},et=qe?bt(ie):xt(ie,xe(ve));if(Ie==="viewport")je=ct(et,qe);else{var st=void 0;Ie==="scrollParent"?(st=le(Y(ve)),st.nodeName==="BODY"&&(st=ie.ownerDocument.documentElement)):Ie==="window"?st=ie.ownerDocument.documentElement:st=Ie;var yt=gt(st,et,qe);if(st.nodeName==="HTML"&&!It(et)){var Qt=Xt(ie.ownerDocument),jt=Qt.height,Lt=Qt.width;je.top+=yt.top-yt.marginTop,je.bottom=jt+yt.top,je.left+=yt.left-yt.marginLeft,je.right=Lt+yt.left}else je=yt}ke=ke||0;var qt=typeof ke=="number";return je.left+=qt?ke:ke.left||0,je.top+=qt?ke:ke.top||0,je.right-=qt?ke:ke.right||0,je.bottom-=qt?ke:ke.bottom||0,je}function si(ie){var ve=ie.width,ke=ie.height;return ve*ke}function Qi(ie,ve,ke,Ie,qe){var je=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(ie.indexOf("auto")===-1)return ie;var et=ei(ke,Ie,je,qe),st={top:{width:et.width,height:ve.top-et.top},right:{width:et.right-ve.right,height:et.height},bottom:{width:et.width,height:et.bottom-ve.bottom},left:{width:ve.left-et.left,height:et.height}},yt=Object.keys(st).map(function(qt){return Rt({key:qt},st[qt],{area:si(st[qt])})}).sort(function(qt,Ei){return Ei.area-qt.area}),Qt=yt.filter(function(qt){var Ei=qt.width,Pi=qt.height;return Ei>=ke.clientWidth&&Pi>=ke.clientHeight}),jt=Qt.length>0?Qt[0].key:yt[0].key,Lt=ie.split("-")[1];return jt+(Lt?"-"+Lt:"")}function ln(ie,ve,ke){var Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,qe=Ie?bt(ve):xt(ve,xe(ke));return gt(ke,qe,Ie)}function kn(ie){var ve=ie.ownerDocument.defaultView,ke=ve.getComputedStyle(ie),Ie=parseFloat(ke.marginTop||0)+parseFloat(ke.marginBottom||0),qe=parseFloat(ke.marginLeft||0)+parseFloat(ke.marginRight||0),je={width:ie.offsetWidth+qe,height:ie.offsetHeight+Ie};return je}function An(ie){var ve={left:"right",right:"left",bottom:"top",top:"bottom"};return ie.replace(/left|right|bottom|top/g,function(ke){return ve[ke]})}function Ar(ie,ve,ke){ke=ke.split("-")[0];var Ie=kn(ie),qe={width:Ie.width,height:Ie.height},je=["right","left"].indexOf(ke)!==-1,et=je?"top":"left",st=je?"left":"top",yt=je?"height":"width",Qt=je?"width":"height";return qe[et]=ve[et]+ve[yt]/2-Ie[yt]/2,ke===st?qe[st]=ve[st]-Ie[Qt]:qe[st]=ve[An(st)],qe}function As(ie,ve){return Array.prototype.find?ie.find(ve):ie.filter(ve)[0]}function aa(ie,ve,ke){if(Array.prototype.findIndex)return ie.findIndex(function(qe){return qe[ve]===ke});var Ie=As(ie,function(qe){return qe[ve]===ke});return ie.indexOf(Ie)}function la(ie,ve,ke){var Ie=ke===void 0?ie:ie.slice(0,aa(ie,"name",ke));return Ie.forEach(function(qe){qe.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var je=qe.function||qe.fn;qe.enabled&&H(je)&&(ve.offsets.popper=Gt(ve.offsets.popper),ve.offsets.reference=Gt(ve.offsets.reference),ve=je(ve,qe))}),ve}function _t(){if(!this.state.isDestroyed){var ie={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};ie.offsets.reference=ln(this.state,this.popper,this.reference,this.options.positionFixed),ie.placement=Qi(this.options.placement,ie.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),ie.originalPlacement=ie.placement,ie.positionFixed=this.options.positionFixed,ie.offsets.popper=Ar(this.popper,ie.offsets.reference,ie.placement),ie.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",ie=la(this.modifiers,ie),this.state.isCreated?this.options.onUpdate(ie):(this.state.isCreated=!0,this.options.onCreate(ie))}}function Kt(ie,ve){return ie.some(function(ke){var Ie=ke.name,qe=ke.enabled;return qe&&Ie===ve})}function Mi(ie){for(var ve=[!1,"ms","Webkit","Moz","O"],ke=ie.charAt(0).toUpperCase()+ie.slice(1),Ie=0;Ie<ve.length;Ie++){var qe=ve[Ie],je=qe?""+qe+ke:ie;if(typeof document.body.style[je]<"u")return je}return null}function Sr(){return this.state.isDestroyed=!0,Kt(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Mi("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function ds(ie){var ve=ie.ownerDocument;return ve?ve.defaultView:window}function Sl(ie,ve,ke,Ie){var qe=ie.nodeName==="BODY",je=qe?ie.ownerDocument.defaultView:ie;je.addEventListener(ve,ke,{passive:!0}),qe||Sl(le(je.parentNode),ve,ke,Ie),Ie.push(je)}function Ac(ie,ve,ke,Ie){ke.updateBound=Ie,ds(ie).addEventListener("resize",ke.updateBound,{passive:!0});var qe=le(ie);return Sl(qe,"scroll",ke.updateBound,ke.scrollParents),ke.scrollElement=qe,ke.eventsEnabled=!0,ke}function fs(){this.state.eventsEnabled||(this.state=Ac(this.reference,this.options,this.state,this.scheduleUpdate))}function qi(ie,ve){return ds(ie).removeEventListener("resize",ve.updateBound),ve.scrollParents.forEach(function(ke){ke.removeEventListener("scroll",ve.updateBound)}),ve.updateBound=null,ve.scrollParents=[],ve.scrollElement=null,ve.eventsEnabled=!1,ve}function Rs(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=qi(this.reference,this.state))}function ca(ie){return ie!==""&&!isNaN(parseFloat(ie))&&isFinite(ie)}function ao(ie,ve){Object.keys(ve).forEach(function(ke){var Ie="";["width","height","top","right","bottom","left"].indexOf(ke)!==-1&&ca(ve[ke])&&(Ie="px"),ie.style[ke]=ve[ke]+Ie})}function ha(ie,ve){Object.keys(ve).forEach(function(ke){var Ie=ve[ke];Ie!==!1?ie.setAttribute(ke,ve[ke]):ie.removeAttribute(ke)})}function Xd(ie){return ao(ie.instance.popper,ie.styles),ha(ie.instance.popper,ie.attributes),ie.arrowElement&&Object.keys(ie.arrowStyles).length&&ao(ie.arrowElement,ie.arrowStyles),ie}function l1(ie,ve,ke,Ie,qe){var je=ln(qe,ve,ie,ke.positionFixed),et=Qi(ke.placement,je,ve,ie,ke.modifiers.flip.boundariesElement,ke.modifiers.flip.padding);return ve.setAttribute("x-placement",et),ao(ve,{position:ke.positionFixed?"fixed":"absolute"}),ke}function Wd(ie,ve){var ke=ie.offsets,Ie=ke.popper,qe=ke.reference,je=Math.round,et=Math.floor,st=function(Ua){return Ua},yt=je(qe.width),Qt=je(Ie.width),jt=["left","right"].indexOf(ie.placement)!==-1,Lt=ie.placement.indexOf("-")!==-1,qt=yt%2===Qt%2,Ei=yt%2===1&&Qt%2===1,Pi=ve?jt||Lt||qt?je:et:st,hr=ve?je:st;return{left:Pi(Ei&&!Lt&&ve?Ie.left-1:Ie.left),top:hr(Ie.top),bottom:hr(Ie.bottom),right:Pi(Ie.right)}}var c1=p&&/Firefox/i.test(navigator.userAgent);function h1(ie,ve){var ke=ve.x,Ie=ve.y,qe=ie.offsets.popper,je=As(ie.instance.modifiers,function(iu){return iu.name==="applyStyle"}).gpuAcceleration;je!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var et=je!==void 0?je:ve.gpuAcceleration,st=Ae(ie.instance.popper),yt=Et(st),Qt={position:qe.position},jt=Wd(ie,window.devicePixelRatio<2||!c1),Lt=ke==="bottom"?"top":"bottom",qt=Ie==="right"?"left":"right",Ei=Mi("transform"),Pi=void 0,hr=void 0;if(Lt==="bottom"?st.nodeName==="HTML"?hr=-st.clientHeight+jt.bottom:hr=-yt.height+jt.bottom:hr=jt.top,qt==="right"?st.nodeName==="HTML"?Pi=-st.clientWidth+jt.right:Pi=-yt.width+jt.right:Pi=jt.left,et&&Ei)Qt[Ei]="translate3d("+Pi+"px, "+hr+"px, 0)",Qt[Lt]=0,Qt[qt]=0,Qt.willChange="transform";else{var Ua=Lt==="bottom"?-1:1,Qd=qt==="right"?-1:1;Qt[Lt]=hr*Ua,Qt[qt]=Pi*Qd,Qt.willChange=Lt+", "+qt}var Do={"x-placement":ie.placement};return ie.attributes=Rt({},Do,ie.attributes),ie.styles=Rt({},Qt,ie.styles),ie.arrowStyles=Rt({},ie.offsets.arrow,ie.arrowStyles),ie}function Lm(ie,ve,ke){var Ie=As(ie,function(st){var yt=st.name;return yt===ve}),qe=!!Ie&&ie.some(function(st){return st.name===ke&&st.enabled&&st.order<Ie.order});if(!qe){var je="`"+ve+"`",et="`"+ke+"`";console.warn(et+" modifier is required by "+je+" modifier in order to work, be sure to include it before "+je+"!")}return qe}function Kn(ie,ve){var ke;if(!Lm(ie.instance.modifiers,"arrow","keepTogether"))return ie;var Ie=ve.element;if(typeof Ie=="string"){if(Ie=ie.instance.popper.querySelector(Ie),!Ie)return ie}else if(!ie.instance.popper.contains(Ie))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),ie;var qe=ie.placement.split("-")[0],je=ie.offsets,et=je.popper,st=je.reference,yt=["left","right"].indexOf(qe)!==-1,Qt=yt?"height":"width",jt=yt?"Top":"Left",Lt=jt.toLowerCase(),qt=yt?"left":"top",Ei=yt?"bottom":"right",Pi=kn(Ie)[Qt];st[Ei]-Pi<et[Lt]&&(ie.offsets.popper[Lt]-=et[Lt]-(st[Ei]-Pi)),st[Lt]+Pi>et[Ei]&&(ie.offsets.popper[Lt]+=st[Lt]+Pi-et[Ei]),ie.offsets.popper=Gt(ie.offsets.popper);var hr=st[Lt]+st[Qt]/2-Pi/2,Ua=X(ie.instance.popper),Qd=parseFloat(Ua["margin"+jt]),Do=parseFloat(Ua["border"+jt+"Width"]),iu=hr-ie.offsets.popper[Lt]-Qd-Do;return iu=Math.max(Math.min(et[Qt]-Pi,iu),0),ie.arrowElement=Ie,ie.offsets.arrow=(ke={},Ot(ke,Lt,Math.round(iu)),Ot(ke,qt,""),ke),ie}function ua(ie){return ie==="end"?"start":ie==="start"?"end":ie}var Cl=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],da=Cl.slice(3);function u1(ie){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke=da.indexOf(ie),Ie=da.slice(ke+1).concat(da.slice(0,ke));return ve?Ie.reverse():Ie}var Rc={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function US(ie,ve){if(Kt(ie.instance.modifiers,"inner")||ie.flipped&&ie.placement===ie.originalPlacement)return ie;var ke=ei(ie.instance.popper,ie.instance.reference,ve.padding,ve.boundariesElement,ie.positionFixed),Ie=ie.placement.split("-")[0],qe=An(Ie),je=ie.placement.split("-")[1]||"",et=[];switch(ve.behavior){case Rc.FLIP:et=[Ie,qe];break;case Rc.CLOCKWISE:et=u1(Ie);break;case Rc.COUNTERCLOCKWISE:et=u1(Ie,!0);break;default:et=ve.behavior}return et.forEach(function(st,yt){if(Ie!==st||et.length===yt+1)return ie;Ie=ie.placement.split("-")[0],qe=An(Ie);var Qt=ie.offsets.popper,jt=ie.offsets.reference,Lt=Math.floor,qt=Ie==="left"&&Lt(Qt.right)>Lt(jt.left)||Ie==="right"&&Lt(Qt.left)<Lt(jt.right)||Ie==="top"&&Lt(Qt.bottom)>Lt(jt.top)||Ie==="bottom"&&Lt(Qt.top)<Lt(jt.bottom),Ei=Lt(Qt.left)<Lt(ke.left),Pi=Lt(Qt.right)>Lt(ke.right),hr=Lt(Qt.top)<Lt(ke.top),Ua=Lt(Qt.bottom)>Lt(ke.bottom),Qd=Ie==="left"&&Ei||Ie==="right"&&Pi||Ie==="top"&&hr||Ie==="bottom"&&Ua,Do=["top","bottom"].indexOf(Ie)!==-1,iu=!!ve.flipVariations&&(Do&&je==="start"&&Ei||Do&&je==="end"&&Pi||!Do&&je==="start"&&hr||!Do&&je==="end"&&Ua),oae=!!ve.flipVariationsByContent&&(Do&&je==="start"&&Pi||Do&&je==="end"&&Ei||!Do&&je==="start"&&Ua||!Do&&je==="end"&&hr),HR=iu||oae;(qt||Qd||HR)&&(ie.flipped=!0,(qt||Qd)&&(Ie=et[yt+1]),HR&&(je=ua(je)),ie.placement=Ie+(je?"-"+je:""),ie.offsets.popper=Rt({},ie.offsets.popper,Ar(ie.instance.popper,ie.offsets.reference,ie.placement)),ie=la(ie.instance.modifiers,ie,"flip"))}),ie}function Bm(ie){var ve=ie.offsets,ke=ve.popper,Ie=ve.reference,qe=ie.placement.split("-")[0],je=Math.floor,et=["top","bottom"].indexOf(qe)!==-1,st=et?"right":"bottom",yt=et?"left":"top",Qt=et?"width":"height";return ke[st]<je(Ie[yt])&&(ie.offsets.popper[yt]=je(Ie[yt])-ke[Qt]),ke[yt]>je(Ie[st])&&(ie.offsets.popper[yt]=je(Ie[st])),ie}function FS(ie,ve,ke,Ie){var qe=ie.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),je=+qe[1],et=qe[2];if(!je)return ie;if(et.indexOf("%")===0){var st=void 0;switch(et){case"%p":st=ke;break;case"%":case"%r":default:st=Ie}var yt=Gt(st);return yt[ve]/100*je}else if(et==="vh"||et==="vw"){var Qt=void 0;return et==="vh"?Qt=Math.max(document.documentElement.clientHeight,window.innerHeight||0):Qt=Math.max(document.documentElement.clientWidth,window.innerWidth||0),Qt/100*je}else return je}function Koe(ie,ve,ke,Ie){var qe=[0,0],je=["right","left"].indexOf(Ie)!==-1,et=ie.split(/(\+|\-)/).map(function(jt){return jt.trim()}),st=et.indexOf(As(et,function(jt){return jt.search(/,|\s/)!==-1}));et[st]&&et[st].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var yt=/\s*,\s*|\s+/,Qt=st!==-1?[et.slice(0,st).concat([et[st].split(yt)[0]]),[et[st].split(yt)[1]].concat(et.slice(st+1))]:[et];return Qt=Qt.map(function(jt,Lt){var qt=(Lt===1?!je:je)?"height":"width",Ei=!1;return jt.reduce(function(Pi,hr){return Pi[Pi.length-1]===""&&["+","-"].indexOf(hr)!==-1?(Pi[Pi.length-1]=hr,Ei=!0,Pi):Ei?(Pi[Pi.length-1]+=hr,Ei=!1,Pi):Pi.concat(hr)},[]).map(function(Pi){return FS(Pi,qt,ve,ke)})}),Qt.forEach(function(jt,Lt){jt.forEach(function(qt,Ei){ca(qt)&&(qe[Lt]+=qt*(jt[Ei-1]==="-"?-1:1))})}),qe}function Joe(ie,ve){var ke=ve.offset,Ie=ie.placement,qe=ie.offsets,je=qe.popper,et=qe.reference,st=Ie.split("-")[0],yt=void 0;return ca(+ke)?yt=[+ke,0]:yt=Koe(ke,je,et,st),st==="left"?(je.top+=yt[0],je.left-=yt[1]):st==="right"?(je.top+=yt[0],je.left+=yt[1]):st==="top"?(je.left+=yt[0],je.top-=yt[1]):st==="bottom"&&(je.left+=yt[0],je.top+=yt[1]),ie.popper=je,ie}function eae(ie,ve){var ke=ve.boundariesElement||Ae(ie.instance.popper);ie.instance.reference===ke&&(ke=Ae(ke));var Ie=Mi("transform"),qe=ie.instance.popper.style,je=qe.top,et=qe.left,st=qe[Ie];qe.top="",qe.left="",qe[Ie]="";var yt=ei(ie.instance.popper,ie.instance.reference,ve.padding,ke,ie.positionFixed);qe.top=je,qe.left=et,qe[Ie]=st,ve.boundaries=yt;var Qt=ve.priority,jt=ie.offsets.popper,Lt={primary:function(qt){var Ei=jt[qt];return jt[qt]<yt[qt]&&!ve.escapeWithReference&&(Ei=Math.max(jt[qt],yt[qt])),Ot({},qt,Ei)},secondary:function(qt){var Ei=qt==="right"?"left":"top",Pi=jt[Ei];return jt[qt]>yt[qt]&&!ve.escapeWithReference&&(Pi=Math.min(jt[Ei],yt[qt]-(qt==="right"?jt.width:jt.height))),Ot({},Ei,Pi)}};return Qt.forEach(function(qt){var Ei=["left","top"].indexOf(qt)!==-1?"primary":"secondary";jt=Rt({},jt,Lt[Ei](qt))}),ie.offsets.popper=jt,ie}function tae(ie){var ve=ie.placement,ke=ve.split("-")[0],Ie=ve.split("-")[1];if(Ie){var qe=ie.offsets,je=qe.reference,et=qe.popper,st=["bottom","top"].indexOf(ke)!==-1,yt=st?"left":"top",Qt=st?"width":"height",jt={start:Ot({},yt,je[yt]),end:Ot({},yt,je[yt]+je[Qt]-et[Qt])};ie.offsets.popper=Rt({},et,jt[Ie])}return ie}function iae(ie){if(!Lm(ie.instance.modifiers,"hide","preventOverflow"))return ie;var ve=ie.offsets.reference,ke=As(ie.instance.modifiers,function(Ie){return Ie.name==="preventOverflow"}).boundaries;if(ve.bottom<ke.top||ve.left>ke.right||ve.top>ke.bottom||ve.right<ke.left){if(ie.hide===!0)return ie;ie.hide=!0,ie.attributes["x-out-of-boundaries"]=""}else{if(ie.hide===!1)return ie;ie.hide=!1,ie.attributes["x-out-of-boundaries"]=!1}return ie}function nae(ie){var ve=ie.placement,ke=ve.split("-")[0],Ie=ie.offsets,qe=Ie.popper,je=Ie.reference,et=["left","right"].indexOf(ke)!==-1,st=["top","left"].indexOf(ke)===-1;return qe[et?"left":"top"]=je[ke]-(st?qe[et?"width":"height"]:0),ie.placement=An(ve),ie.offsets.popper=Gt(qe),ie}var rae={shift:{order:100,enabled:!0,fn:tae},offset:{order:200,enabled:!0,fn:Joe,offset:0},preventOverflow:{order:300,enabled:!0,fn:eae,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Bm},arrow:{order:500,enabled:!0,fn:Kn,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:US,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:nae},hide:{order:800,enabled:!0,fn:iae},computeStyle:{order:850,enabled:!0,fn:h1,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Xd,onLoad:l1,gpuAcceleration:void 0}},sae={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:rae},d1=function(){function ie(ve,ke){var Ie=this,qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Wt(this,ie),this.scheduleUpdate=function(){return requestAnimationFrame(Ie.update)},this.update=V(this.update.bind(this)),this.options=Rt({},ie.Defaults,qe),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=ve&&ve.jquery?ve[0]:ve,this.popper=ke&&ke.jquery?ke[0]:ke,this.options.modifiers={},Object.keys(Rt({},ie.Defaults.modifiers,qe.modifiers)).forEach(function(et){Ie.options.modifiers[et]=Rt({},ie.Defaults.modifiers[et]||{},qe.modifiers?qe.modifiers[et]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(et){return Rt({name:et},Ie.options.modifiers[et])}).sort(function(et,st){return et.order-st.order}),this.modifiers.forEach(function(et){et.enabled&&H(et.onLoad)&&et.onLoad(Ie.reference,Ie.popper,Ie.options,et,Ie.state)}),this.update();var je=this.options.eventsEnabled;je&&this.enableEventListeners(),this.state.eventsEnabled=je}return Mt(ie,[{key:"update",value:function(){return _t.call(this)}},{key:"destroy",value:function(){return Sr.call(this)}},{key:"enableEventListeners",value:function(){return fs.call(this)}},{key:"disableEventListeners",value:function(){return Rs.call(this)}}]),ie}();return d1.Utils=(typeof window<"u"?window:J).PopperUtils,d1.placements=Cl,d1.Defaults=sae,d1})})(ue);var de=ue.exports;let Oe=0,Te=0;function We(){Oe++}function Ve(){Te++}const Fe={name:"Drop",emits:["mouseenter","mouseleave","click"],props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1},visible:{type:Boolean},classes:{type:Object,default:()=>{}},styles:{type:Object,default:()=>{}},transitionName:{type:String,default:"transition-drop"},boundariesElement:{default:"window"}},data(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{mergedStyle(){let a={};return this.width&&(a.minWidth=`${this.width}px`),this.transfer&&(a["z-index"]=1060+this.tIndex),Object.assign({},this.styles,a)},mergedClass(){return Object.assign({},this.classes,{[this.className]:this.className})}},methods:{update(){t.nextTick(()=>{this.popper?(this.popper.update(),this.popperStatus=!0):this.popper=new de(this.$parent.$refs.reference,this.$refs.drop,{eventsEnabled:this.eventsEnabled,placement:this.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:this.boundariesElement}},onCreate:()=>{this.resetTransformOrigin(),t.nextTick(this.popper.update())},onUpdate:()=>{this.resetTransformOrigin()}}),this.$parent.$options.name==="iSelect"&&(this.width=parseInt(I(this.$parent.$el,"width"))),this.tIndex=this.handleGetIndex()})},destroy(){this.popper&&setTimeout(()=>{this.popper&&!this.popperStatus&&(this.popper.popper.style.display="none",this.popper.destroy(),this.popper=null),this.popperStatus=!1},300)},resetTransformOrigin(){if(!this.popper)return;let a=this.popper.popper.getAttribute("x-placement"),h=a.split("-")[0],p=a.split("-")[1];a==="left"||a==="right"||(this.popper.popper.style.transformOrigin=h==="bottom"||h!=="top"&&p==="start"?"center top":"center bottom")},handleGetIndex(){return We(),Oe},handleMouseenter(a){this.$emit("mouseenter",a)},handleMouseleave(a){this.$emit("mouseleave",a)},handleOnUpdatePopper(){this.update()},handleOnDestroyPopper(){this.destroy()},handleClick(a){this.$emit("click",a)}},beforeUnmount(){this.popper&&(this.popper.destroy(),this.popper=null)}};function rt(a,h,p,C,w,v){return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!p.transfer},[t.createVNode(t.Transition,{name:p.transitionName},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",t.mergeProps({class:["ivu-select-dropdown",v.mergedClass],ref:"drop",style:v.mergedStyle},a.$attrs,{onMouseenter:h[0]||(h[0]=(...A)=>v.handleMouseenter&&v.handleMouseenter(...A)),onMouseleave:h[1]||(h[1]=(...A)=>v.handleMouseleave&&v.handleMouseleave(...A)),onClick:h[2]||(h[2]=t.withModifiers((...A)=>v.handleClick&&v.handleClick(...A),["stop"]))}),[t.renderSlot(a.$slots,"default")],16),[[t.vShow,p.visible]])]),_:3},8,["name"])],8,["disabled"])}var Ge=l(Fe,[["render",rt]]);function nt(a){r&&typeof window.viewuiplus<"u"&&("langs"in viewuiplus||(viewuiplus.langs={}),viewuiplus.langs[a.i.locale]=a)}const kt={i:{locale:"zh-CN",select:{placeholder:"",noMatch:"",loading:""},table:{noDataText:"",noFilteredDataText:"",confirmFilter:"",resetFilter:"",clearFilter:"",sumText:""},datepicker:{selectDate:"",selectTime:"",startTime:"",endTime:"",clear:"",ok:"",datePanelLabel:"[yyyy] [m]",month:"",month1:"1 ",month2:"2 ",month3:"3 ",month4:"4 ",month5:"5 ",month6:"6 ",month7:"7 ",month8:"8 ",month9:"9 ",month10:"10 ",month11:"11 ",month12:"12 ",year:"",weekStartDay:"0",weeks:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},months:{m1:"1",m2:"2",m3:"3",m4:"4",m5:"5",m6:"6",m7:"7",m8:"8",m9:"9",m10:"10",m11:"11",m12:"12"}},transfer:{titles:{source:"",target:""},filterPlaceholder:"",notFoundText:""},modal:{okText:"",cancelText:""},poptip:{okText:"",cancelText:""},page:{prev:"",next:"",total:"",item:"",items:"",prev5:" 5 ",next5:" 5 ",page:"/",goto:"",p:""},rate:{star:"",stars:""},time:{before:"",after:"",just:"",seconds:"",minutes:"",hours:"",days:""},tree:{emptyText:""},image:{zoomIn:"",zoomOut:"",rotateLeft:"",rotateRight:"",fail:"",preview:""}}};nt(kt);var Tt=function(a){return ut(a)&&!zt(a)};function ut(a){return!!a&&typeof a=="object"}function zt(a){var h=Object.prototype.toString.call(a);return h==="[object RegExp]"||h==="[object Date]"||Le(a)}var li=typeof Symbol=="function"&&Symbol.for,Se=li?Symbol.for("react.element"):60103;function Le(a){return a.$$typeof===Se}function me(a){return Array.isArray(a)?[]:{}}function Be(a,h){return h.clone!==!1&&h.isMergeableObject(a)?dt(me(a),a,h):a}function Xe(a,h,p){return a.concat(h).map(function(C){return Be(C,p)})}function tt(a,h,p){var C={};return p.isMergeableObject(a)&&Object.keys(a).forEach(function(w){C[w]=Be(a[w],p)}),Object.keys(h).forEach(function(w){!p.isMergeableObject(h[w])||!a[w]?C[w]=Be(h[w],p):C[w]=dt(a[w],h[w],p)}),C}function dt(a,h,p){p=p||{},p.arrayMerge=p.arrayMerge||Xe,p.isMergeableObject=p.isMergeableObject||Tt;var C=Array.isArray(h),w=Array.isArray(a),v=C===w;return v?C?p.arrayMerge(a,h,p):tt(a,h,p):Be(h,p)}dt.all=function(a,h){if(!Array.isArray(a))throw new Error("first argument should be an array");return a.reduce(function(p,C){return dt(p,C,h)},{})};var _i=dt;const Si=/(%|)\{([0-9a-zA-Z_]+)\}/g;function Di(){function a(p,C){return Object.prototype.hasOwnProperty.call(p,C)}function h(p,...C){return C.length===1&&typeof C[0]=="object"&&(C=C[0]),(!C||!C.hasOwnProperty)&&(C={}),p===void 0?"":p.replace(Si,(w,v,A,V)=>{let H;return p[V-1]==="{"&&p[V+w.length]==="}"?A:(H=a(C,A)?C[A]:null,H??"")})}return h}const Sn=Di();let yi=kt;const Or={zh:kt};let En=null,im={},lr=null,xy=function(){if(Reflect.has(this,"$t"))return this.$t(...arguments);if(lr&&lr.global)return lr.global.t(...arguments);if(lr&&lr.locale){if(!im[lr.locale]||En!=lr.locale){im[lr.locale]=!0;let a=lr.getLocaleMessage(lr.locale)||{},h={};_i(h,Or[lr.locale],a),yi=h,lr.setLocaleMessage(lr.locale,h),En=lr.locale}return lr.hlang(...arguments)}};const zh=function(a,h){let p=xy.apply(this,arguments);if(p!=null)return p;const C=a.split(".");let w=yi;for(let v=0,A=C.length;v<A;v++){const V=C[v];if(p=w[V],v===A-1)return Sn(p,h);if(!p)return"";w=p}return""};var pc={use:function(a){yi=a||yi},t:zh,i18n:function(a){lr=a}},ji={methods:{t(...a){return zh.apply(this,a)}}},ia={data(){return{globalConfig:{}}},created(){const a=t.getCurrentInstance();this.globalConfig=a.appContext.config.globalProperties.$VIEWUI}};const mc="ivu-select",k_={name:"iSelectHead",mixins:[ji,ia],components:{Icon:S},emits:["on-input-focus","on-input-blur","on-keydown","on-enter","on-clear","on-query-change"],inject:["SelectInstance"],props:{disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},initialLabel:{type:[String,Number,Array]},values:{type:Array,default:()=>[]},clearable:{type:[Function,Boolean],default:!1},inputElementId:{type:String},placeholder:{type:String},queryProp:{type:String,default:""},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean},showCreateItem:{type:Boolean}},data(){return{prefixCls:mc,query:"",inputLength:20,remoteInitialLabel:this.initialLabel,preventRemoteCall:!1}},computed:{singleDisplayClasses(){const{filterable:a,multiple:h,showPlaceholder:p}=this;return[{[mc+"-head-with-prefix"]:this.showPrefix,[mc+"-placeholder"]:p&&!a,[mc+"-selected-value"]:!p&&!h&&!a}]},singleDisplayValue(){return this.multiple&&this.values.length>0||this.filterable?"":`${this.selectedSingle}`||this.localePlaceholder},showPlaceholder(){let a=!1;if(this.multiple)!this.values.length>0&&(a=!0);else{const h=this.values[0];(typeof h>"u"||String(h).trim()==="")&&(a=!this.remoteInitialLabel)}return a},resetSelect(){return!this.showPlaceholder&&this.clearable},inputStyle(){let a={};return this.multiple&&(this.showPlaceholder?a.width="100%":a.width=`${this.inputLength}px`),a},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},selectedSingle(){const a=this.values[0];return a?a.label:this.remoteInitialLabel||""},selectedMultiple(){return(this.multiple?this.values:[]).filter((a,h)=>this.maxTagCount===void 0||h<this.maxTagCount)},headCls(){return{[`${mc}-head-flex`]:this.filterable&&this.showPrefix}},arrowType(){const a=this.globalConfig;let h="ios-arrow-down";return a&&(a.select.customArrow?h="":a.select.arrow&&(h=a.select.arrow)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.select.customArrow&&(h=a.select.customArrow),h},showPrefix(){const a=this.$slots.prefix&&this.$slots.prefix();let h=!1;return a&&(h=a[0].children.length>0),h||this.prefix},arrowSize(){const a=this.globalConfig;let h="";return a&&a.select.arrowSize&&(h=a.select.arrowSize),h}},methods:{onInputFocus(){this.$emit("on-input-focus")},onInputBlur(){this.showCreateItem||(this.values.length||(this.query=""),this.$emit("on-input-blur"))},removeTag(a){if(this.disabled)return!1;this.SelectInstance.handleOnSelectSelected(a)},resetInputState(){this.inputLength=this.$refs.input.value.length*12+20,this.$emit("on-keydown")},handleInputDelete(a){const h=a.target.value;this.multiple&&this.selectedMultiple.length&&this.query===""&&h===""&&this.removeTag(this.selectedMultiple[this.selectedMultiple.length-1])},handleInputEnter(a){this.$emit("on-enter"),this.showCreateItem&&a.stopPropagation()},onHeaderClick(a){this.filterable&&a.target===this.$el&&this.$refs.input.focus()},onClear(){this.$emit("on-clear")}},watch:{values([a]){if(this.filterable){if(this.preventRemoteCall=!0,this.multiple){this.query="",this.preventRemoteCall=!1;return}typeof a>"u"||a===""||a===null?this.query="":this.query=a.label,t.nextTick(()=>this.preventRemoteCall=!1)}},query(a){if(this.preventRemoteCall){this.preventRemoteCall=!1;return}this.$emit("on-query-change",a)},queryProp(a){a!==this.query&&(this.query=a)}}},T_={key:1,class:"ivu-tag ivu-tag-checked"},M_={class:"ivu-tag-text ivu-select-max-tag"},oe=["id","disabled","placeholder"];function Pe(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{onClick:h[6]||(h[6]=(...V)=>v.onHeaderClick&&v.onHeaderClick(...V)),class:t.normalizeClass(v.headCls)},[v.showPrefix?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([w.prefixCls+"-prefix"])},[t.renderSlot(a.$slots,"prefix",{},()=>[p.prefix?(t.openBlock(),t.createBlock(A,{key:0,type:p.prefix},null,8,["type"])):t.createCommentVNode("",!0)])],2)):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.selectedMultiple,(V,H)=>(t.openBlock(),t.createElementBlock("div",{class:"ivu-tag ivu-tag-checked",key:H},[t.createElementVNode("span",{class:t.normalizeClass(["ivu-tag-text",{"ivu-select-multiple-tag-hidden":V.disabled}])},t.toDisplayString(V.tag!==void 0?V.tag:V.label),3),V.disabled?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(A,{key:0,type:"ios-close",onClick:t.withModifiers(X=>v.removeTag(V),["stop"])},null,8,["onClick"]))]))),128)),p.maxTagCount!==void 0&&p.values.length>p.maxTagCount?(t.openBlock(),t.createElementBlock("div",T_,[t.createElementVNode("span",M_,[p.maxTagPlaceholder?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(p.maxTagPlaceholder(p.values.length-p.maxTagCount)),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode("+ "+t.toDisplayString(p.values.length-p.maxTagCount)+"...",1)],64))])])):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("span",{class:t.normalizeClass(v.singleDisplayClasses)},t.toDisplayString(v.singleDisplayValue),3),[[t.vShow,v.singleDisplayValue]]),p.filterable?t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:2,id:p.inputElementId,type:"text","onUpdate:modelValue":h[0]||(h[0]=V=>w.query=V),disabled:p.disabled,class:t.normalizeClass([w.prefixCls+"-input"]),placeholder:v.showPlaceholder?v.localePlaceholder:"",style:t.normalizeStyle(v.inputStyle),autocomplete:"off",spellcheck:"false",onKeydown:[h[1]||(h[1]=(...V)=>v.resetInputState&&v.resetInputState(...V)),h[2]||(h[2]=t.withKeys((...V)=>v.handleInputDelete&&v.handleInputDelete(...V),["delete"])),h[3]||(h[3]=t.withKeys((...V)=>v.handleInputEnter&&v.handleInputEnter(...V),["enter"]))],onFocus:h[4]||(h[4]=(...V)=>v.onInputFocus&&v.onInputFocus(...V)),onBlur:h[5]||(h[5]=(...V)=>v.onInputBlur&&v.onInputBlur(...V)),ref:"input"},null,46,oe)),[[t.vModelText,w.query]]):t.createCommentVNode("",!0),v.resetSelect?(t.openBlock(),t.createBlock(A,{key:3,type:"ios-close-circle",class:t.normalizeClass([w.prefixCls+"-arrow"]),onClick:t.withModifiers(v.onClear,["stop"])},null,8,["class","onClick"])):t.createCommentVNode("",!0),!v.resetSelect&&!p.remote?(t.openBlock(),t.createBlock(A,{key:4,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:t.normalizeClass([w.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])):t.createCommentVNode("",!0)],2)}var Ue=l(k_,[["render",Pe]]);const $e="click",Ne=Object.create(null),ft=Object.create(null),Dt=[Ne,ft],Vt=function(a,h,p){const{target:C}=p,w=function(A){const{el:V}=A;if(V!==C&&!V.contains(C)){const{binding:H}=A;H.modifiers.stop&&p.stopPropagation(),H.modifiers.prevent&&p.preventDefault(),H.value.call(a,p)}},v=function(A){return h[A].forEach(w)};Object.keys(h).forEach(v)},Yt=function(a){Vt(this,Ne,a)},ri=function(a){Vt(this,ft,a)},hi=function(a){return a?Yt:ri},di=Object.defineProperties({},{$_captureInstances:{value:Ne},$_nonCaptureInstances:{value:ft},$_onCaptureEvent:{value:Yt},$_onNonCaptureEvent:{value:ri},beforeMount:{value:function(a,h){if(typeof h.value!="function")throw new TypeError("Binding value must be a function.");let p;const C=h.modifiers;C.click?p="click":C.mousedown?p="mousedown":C.touchstart?p="touchstart":p=$e;const w=h.arg,v={...h,modifiers:{capture:!1,prevent:!1,stop:!1,...h.modifiers}},A=w?Ne:ft;Array.isArray(A[p])||(A[p]=[]),A[p].push({el:a,binding:v})===1&&typeof document=="object"&&document&&document.addEventListener(p,hi(w),w)}},unmounted:{value:function(a){const h=function(C){return C.el!==a},p=function(C){const w=Object.keys(C);if(w.length){const v=C===Ne,A=function(V){const H=C[V].filter(h);H.length?C[V]=H:(typeof document=="object"&&document&&document.removeEventListener(V,hi(v),v),delete C[V])};w.forEach(A)}};Dt.forEach(p)}},version:{enumerable:!0,value:"3.7.1"}});var fi={inject:{FormInstance:{default:""},FormItemInstance:{default:null}},computed:{itemDisabled(){let a=this.disabled;return!a&&this.FormInstance&&(a=this.FormInstance.disabled),a?!0:null}},methods:{handleFormItemChange(a,h){this.FormItemInstance&&(a==="blur"?this.FormItemInstance.formBlur(h):a==="change"&&this.FormItemInstance.formChange(h))}}};const nn="ivu-select",as=(a,h,p)=>{const C=JSON.stringify(a),w=JSON.stringify(h),v=JSON.stringify(p.map(A=>A.value));return C!==w||C!==v||v!==w},Po=300,Bi={name:"iSelect",mixins:[ji,fi],components:{Drop:Ge,SelectHead:Ue,Icon:S},directives:{clickOutside:di},emits:["on-set-default-options","on-clear","on-clickoutside","on-select","on-create","on-change","on-query-change","on-open-change","update:modelValue"],provide(){return{SelectInstance:this}},props:{modelValue:{type:[String,Number,Array],default:""},label:{type:[String,Number,Array],default:""},defaultLabel:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},filterable:{type:Boolean,default:!1},filterMethod:{type:Function},remoteMethod:{type:Function},loading:{type:Boolean,default:!1},loadingText:{type:String},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},labelInValue:{type:Boolean,default:!1},notFoundText:{type:String},placement:{validator(a){return _(a,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},autoComplete:{type:Boolean,default:!1},name:{type:String},elementId:{type:String},transferClassName:{type:String},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean,default:!1},capture:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return a.$VIEWUI?a.$VIEWUI.capture:!0}},filterByLabel:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1},hideNotFound:{type:Boolean,default:!1}},mounted(){if(!this.remote&&this.slotOptions.length>0&&(this.values=this.getInitialValue().map(a=>typeof a!="number"&&!a?null:this.getOptionData(a)).filter(Boolean)),this.checkUpdateStatus(),this.remote&&this.modelValue&&this.defaultLabel){if(!this.multiple)this.query=this.defaultLabel,this.modelValue&&this.defaultLabel&&this.values.push({label:this.defaultLabel,value:this.modelValue});else if(this.multiple&&this.defaultLabel instanceof Array&&this.modelValue.length===this.defaultLabel.length){const a=this.modelValue.map((h,p)=>({value:h,label:this.defaultLabel[p]}));setTimeout(()=>{this.values=a})}}},data(){return{prefixCls:nn,values:[],dropDownWidth:0,visible:!1,focusIndex:-1,isFocused:!1,query:"",initialLabel:this.label,hasMouseHoverHead:!1,slotOptions:[],caretPosition:-1,lastRemoteQuery:"",unchangedQuery:!0,hasExpectedValue:!1,isTyping:!1,preventRemoteCall:!1,filterQueryChange:!1,slotOptionsMap:new Map,isLocking:!1}},computed:{classes(){return[`${nn}`,{[`${nn}-visible`]:this.visible,[`${nn}-disabled`]:this.itemDisabled,[`${nn}-multiple`]:this.multiple,[`${nn}-single`]:!this.multiple,[`${nn}-${this.size}`]:!!this.size}]},dropdownCls(){return{[nn+"-dropdown-transfer"]:this.transfer,[nn+"-multiple"]:this.multiple&&this.transfer,"ivu-auto-complete":this.autoComplete,[this.transferClassName]:this.transferClassName}},selectionCls(){return{[`${nn}-selection`]:!this.autoComplete,[`${nn}-selection-focused`]:this.isFocused}},localeNotFoundText(){return typeof this.notFoundText>"u"?this.t("i.select.noMatch"):this.notFoundText},localeLoadingText(){return typeof this.loadingText>"u"?this.t("i.select.loading"):this.loadingText},showCreateItem(){let a=!1;const{allowCreate:h,query:p,slotOptions:C}=this;return h&&p!==""&&(a=!0,(C||[]).find(w=>w.proxy&&w.proxy.showLabel===p)&&(a=!1)),a},transitionName(){return this.placement==="bottom"?"slide-up":"slide-down"},dropVisible(){let a=!0;const h=this.slotOptions.length===0;return!this.loading&&this.remote&&this.query===""&&h&&(a=!1),this.autoComplete&&h&&(a=!1),this.visible&&a},showNotFoundLabel(){const{loading:a,remote:h,slotOptions:p,hideNotFound:C}=this,w=p||[],v=w.find(A=>A.proxy.isShow);return(w.length===0||!v)&&(!h||h&&!a)&&!C},publicValue(){return this.multiple?this.values.map(a=>a.value):(this.values[0]||{}).value},canBeCleared(){const a=this.hasMouseHoverHead,h=!this.multiple&&!this.itemDisabled&&this.clearable;return a&&h&&this.reset},selectTabindex(){return this.itemDisabled||this.filterable?-1:0},remote(){return typeof this.remoteMethod=="function"}},methods:{setQuery(a){if(a){this.onQueryChange(a);return}a===null&&(this.onQueryChange(""),this.values=[],this.lastRemoteQuery="")},clearSingleSelect(){this.multiple||this.$emit("update:modelValue",""),this.$emit("on-clear"),this.hideMenu(),this.clearable&&this.reset()},getOptionData(a){const h=this.slotOptions.find(({props:w})=>w.value===a);if(!h)return null;const{optionLabel:p,disabled:C}=h.proxy||{};return{value:a,label:p,disabled:C}},getInitialValue(){const{multiple:a,remote:h,modelValue:p}=this;let C=Array.isArray(p)?p:[p];if(!a&&(typeof C[0]>"u"||String(C[0]).trim()===""&&!Number.isFinite(C[0]))&&(C=[]),h&&!a&&p){const w=this.getOptionData(p);this.query=w?w.label:String(p)}return C.filter(w=>!!w||w===0)},validateOption({children:a,elm:h,propsData:p}){const C=p.value,w=p.label||"",v=h&&h.textContent||(a||[]).reduce((H,X)=>{const Y=X.elm?X.elm.textContent:X.text;return`${H} ${Y}`},"")||"",A=this.filterByLabel?[w].toString():[C,w,v].toString(),V=this.query.toLowerCase().trim();return A.toLowerCase().includes(V)},toggleMenu(a,h){if(this.itemDisabled)return!1;this.visible=typeof h<"u"?h:!this.visible,this.visible&&(this.dropDownWidth=this.$el.getBoundingClientRect().width,this.$refs.dropdown.handleOnUpdatePopper())},hideMenu(){this.toggleMenu(null,!1),this.isTyping=!1,setTimeout(()=>this.unchangedQuery=!0,Po)},onClickOutside(a){if(this.visible){if(a.type==="mousedown"){a.preventDefault();return}if(this.transfer){const h=this.$refs.dropdown.$refs.drop;if(h===a.target||h.contains(a.target))return}if(this.filterable){const h=this.$el.querySelector('input[type="text"]');this.caretPosition=h.selectionStart,t.nextTick(()=>{const p=this.caretPosition===-1?h.value.length:this.caretPosition;h.setSelectionRange(p,p)})}this.autoComplete||a.stopPropagation(),a.preventDefault(),this.hideMenu(),this.isFocused=!0,this.$emit("on-clickoutside",a)}else this.caretPosition=-1,this.isFocused=!1},reset(){this.query="",this.focusIndex=-1,this.unchangedQuery=!0,this.values=[],this.filterQueryChange=!1},handleKeydown(a){const h=a.key||a.code,p=a.keyCode||a.which;if(!(h==="Backspace"||p===8))if(this.visible){if(a.preventDefault(),h==="Tab"&&a.stopPropagation(),h==="Escape"&&(a.stopPropagation(),this.hideMenu()),h==="ArrowUp"&&this.navigateOptions(-1),h==="ArrowDown"&&this.navigateOptions(1),h==="Enter"){if(this.focusIndex===-1)return this.hideMenu();const C=this.slotOptions[this.focusIndex];if(C){const w=this.getOptionData(C.props.value);this.onOptionClick(w)}else this.hideMenu()}}else["ArrowUp","ArrowDown"].includes(a.key)&&this.toggleMenu(null,!0)},navigateOptions(a){const h=this.slotOptions,p=h.length-1;if(p<0)return;let C=this.focusIndex+a;C<0&&(C=p),C>p&&(C=0);let w,v=null;if(a>0){w=-1;for(let A=0;A<h.length;A++){const{proxy:V}=h[A];if(!V.disabled&&(w=A),V.isShow&&v===null)v=A;else if(!V.isShow){w=A;continue}if(w>=C)break}}else{w=h.length;for(let A=p;A>=0;A--){const{proxy:V}=h[A];if(!V.disabled&&(w=A),V.isShow&&v===null)v=A;else if(!V.isShow){w=A;continue}if(w<=C)break}}C=h[w].proxy.isShow?w:v,this.focusIndex=C},onOptionClick(a){if(this.multiple?(this.remote?this.lastRemoteQuery=this.lastRemoteQuery||this.query:this.lastRemoteQuery="",this.values.find(({value:h})=>h===a.value)?this.values=this.values.filter(({value:h})=>h!==a.value):this.values=this.values.concat(a),this.isFocused=!0):(this.query=String(a.label).trim(),this.values=[a],this.lastRemoteQuery="",this.hideMenu()),this.focusIndex=this.slotOptions.findIndex(h=>h?h.props.value===a.value:!1),this.filterable){const h=this.$el.querySelector('input[type="text"]');this.autoComplete||t.nextTick(()=>h.focus())}this.$emit("on-select",a),this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.filterQueryChange=!1},Po)},onQueryChange(a){if(this.isTyping=!0,a.length>0&&a!==this.query)if(r&&this.autoComplete){let h=document.hasFocus&&document.hasFocus()&&document.activeElement===this.$el.querySelector("input");this.visible=h}else this.visible=!0;this.query=a,this.unchangedQuery=this.visible,this.filterQueryChange=!0},toggleHeaderFocus({type:a}){this.itemDisabled||(this.isFocused=a==="focus")},checkUpdateStatus(){this.getInitialValue().length>0&&this.slotOptions.length===0&&(this.hasExpectedValue=!0)},handleCreateItem(){if(this.allowCreate&&this.query!==""&&this.showCreateItem){const a=this.query;this.$emit("on-create",a),this.query="";const h={value:a,label:a,tag:void 0};this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.onOptionClick(h)})}},handleOnSelectSelected(a){this.onOptionClick(a)},focus(){this.filterable&&(this.$refs.selectHead.$refs.input.focus(),this.toggleMenu())},lazyUpdateValue(a){const{getInitialValue:h,isLocking:p,defaultLabel:C,remote:w,modelValue:v,values:A}=this,V=!!(C&&C.length);(v&&v.length||A.length||V)&&w&&a||p||(this.isLocking=!0,t.nextTick(()=>{this.values=h().map(this.getOptionData).filter(Boolean),this.isLocking=!1}))}},watch:{modelValue(a){const{publicValue:h,values:p}=this;this.checkUpdateStatus(),a===""?(this.values=[],this.query=""):as(a,h,p)&&(this.lazyUpdateValue(),this.multiple||this.handleFormItemChange("change",this.publicValue))},values(a,h){const p=JSON.stringify(a),C=JSON.stringify(h);let w=this.publicValue;if(p!==C&&w!==this.modelValue){let v=this.publicValue;this.labelInValue&&(this.multiple?v=this.values:v=this.values[0]),(Array.isArray(w)&&!w.length&&this.modelValue===null||w===void 0&&this.modelValue===null)&&(w=null),this.$emit("update:modelValue",w),this.$emit("on-change",v),this.handleFormItemChange("change",v)}},query(a){this.focusIndex=-1,this.$emit("on-query-change",a);const{remoteMethod:h,lastRemoteQuery:p}=this,C=h&&a!==""&&(a!==p||!p)&&!this.preventRemoteCall;if(this.preventRemoteCall=!1,C){const w=this.remoteMethod(a);this.initialLabel="",w&&w.then&&w.then(v=>{v&&(this.options=v)})}this.visible&&this.$refs.dropdown.handleOnUpdatePopper(),a!==""&&this.remote&&(this.lastRemoteQuery=a)},isFocused(a){(this.filterable?this.$el.querySelector('input[type="text"]'):this.$el)[this.isFocused?"focus":"blur"]();const[h]=this.values;if(h&&this.filterable&&!this.multiple&&!a){const p=String(h.label||h.value).trim();p&&this.query!==p&&(this.preventRemoteCall=!0,this.query=p)}},focusIndex(a){if(!(a<0||this.autoComplete)&&this.slotOptions[a]){const h=this.slotOptions[a].proxy.$el,p=this.$refs.dropdown.$refs.drop;let C=h.getBoundingClientRect().bottom-p.getBoundingClientRect().bottom,w=h.getBoundingClientRect().top-p.getBoundingClientRect().top;C>0&&(p.scrollTop+=C),w<0&&(p.scrollTop+=w)}},dropVisible(a){a?this.$refs.dropdown.handleOnUpdatePopper():this.$refs.dropdown.handleOnDestroyPopper()},visible(a){this.$emit("on-open-change",a)}}},ci=["tabindex"],Xh=["name","value"];function dn(a,h,p,C,w,v){const A=t.resolveComponent("select-head"),V=t.resolveComponent("Icon"),H=t.resolveComponent("Drop"),X=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass(v.selectionCls),tabindex:v.selectTabindex,onBlur:h[2]||(h[2]=(...Y)=>v.toggleHeaderFocus&&v.toggleHeaderFocus(...Y)),onFocus:h[3]||(h[3]=(...Y)=>v.toggleHeaderFocus&&v.toggleHeaderFocus(...Y)),onClick:h[4]||(h[4]=(...Y)=>v.toggleMenu&&v.toggleMenu(...Y)),onKeydown:[h[5]||(h[5]=t.withKeys((...Y)=>v.handleKeydown&&v.handleKeydown(...Y),["esc"])),h[6]||(h[6]=t.withKeys((...Y)=>v.handleKeydown&&v.handleKeydown(...Y),["enter"])),h[7]||(h[7]=t.withKeys(t.withModifiers((...Y)=>v.handleKeydown&&v.handleKeydown(...Y),["prevent"]),["up"])),h[8]||(h[8]=t.withKeys(t.withModifiers((...Y)=>v.handleKeydown&&v.handleKeydown(...Y),["prevent"]),["down"])),h[9]||(h[9]=t.withKeys((...Y)=>v.handleKeydown&&v.handleKeydown(...Y),["tab"])),h[10]||(h[10]=t.withKeys((...Y)=>v.handleKeydown&&v.handleKeydown(...Y),["delete"]))],onMouseenter:h[11]||(h[11]=Y=>w.hasMouseHoverHead=!0),onMouseleave:h[12]||(h[12]=Y=>w.hasMouseHoverHead=!1)},[t.renderSlot(a.$slots,"input",{},()=>[t.createElementVNode("input",{type:"hidden",name:p.name,value:v.publicValue},null,8,Xh),t.createVNode(A,{ref:"selectHead",filterable:p.filterable,multiple:p.multiple,values:w.values,clearable:v.canBeCleared,prefix:p.prefix,disabled:a.itemDisabled,remote:v.remote,"input-element-id":p.elementId,"initial-label":w.initialLabel,placeholder:p.placeholder,"query-prop":w.query,"max-tag-count":p.maxTagCount,"max-tag-placeholder":p.maxTagPlaceholder,"allow-create":p.allowCreate,"show-create-item":v.showCreateItem,onOnQueryChange:v.onQueryChange,onOnInputFocus:h[0]||(h[0]=Y=>w.isFocused=!0),onOnInputBlur:h[1]||(h[1]=Y=>w.isFocused=!1),onOnClear:v.clearSingleSelect,onOnEnter:v.handleCreateItem},{prefix:t.withCtx(()=>[t.renderSlot(a.$slots,"prefix")]),_:3},8,["filterable","multiple","values","clearable","prefix","disabled","remote","input-element-id","initial-label","placeholder","query-prop","max-tag-count","max-tag-placeholder","allow-create","show-create-item","onOnQueryChange","onOnClear","onOnEnter"])])],42,ci),t.createVNode(H,{ref:"dropdown",classes:v.dropdownCls,visible:v.dropVisible,placement:p.placement,eventsEnabled:p.eventsEnabled,transfer:p.transfer,"transition-name":"transition-drop"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls+"-not-found"])},[t.createElementVNode("li",null,t.toDisplayString(v.localeNotFoundText),1)],2),[[t.vShow,v.showNotFoundLabel&&!p.allowCreate]]),!v.remote||v.remote&&!p.loading?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass(w.prefixCls+"-dropdown-list")},[v.showCreateItem?(t.openBlock(),t.createElementBlock("li",{key:0,class:t.normalizeClass(w.prefixCls+"-item"),onClick:h[13]||(h[13]=(...Y)=>v.handleCreateItem&&v.handleCreateItem(...Y))},[t.createTextVNode(t.toDisplayString(w.query)+" ",1),t.createVNode(V,{type:"md-return-left",class:t.normalizeClass(w.prefixCls+"-item-enter")},null,8,["class"])],2)):t.createCommentVNode("",!0),t.renderSlot(a.$slots,"default")],2)):(t.openBlock(),t.createElementBlock("ul",{key:1,class:t.normalizeClass(w.prefixCls+"-dropdown-list")},[v.showCreateItem?(t.openBlock(),t.createElementBlock("li",{key:0,class:t.normalizeClass(w.prefixCls+"-item"),onClick:h[14]||(h[14]=(...Y)=>v.handleCreateItem&&v.handleCreateItem(...Y))},[t.createTextVNode(t.toDisplayString(w.query)+" ",1),t.createVNode(V,{type:"md-return-left",class:t.normalizeClass(w.prefixCls+"-item-enter")},null,8,["class"])],2)):t.createCommentVNode("",!0)],2)),t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls+"-loading"])},t.toDisplayString(v.localeLoadingText),3),[[t.vShow,p.loading]])]),_:3},8,["classes","visible","placement","eventsEnabled","transfer"])],2)),[[X,v.onClickOutside,p.capture],[X,v.onClickOutside,p.capture,{mousedown:!0}],[X,v.onClickOutside,p.capture,{touchstart:!0}]])}var ls=l(Bi,[["render",dn]]);const Wh="ivu-select-item",Qh={name:"iOption",componentName:"select-item",mixins:[fi],emits:["on-select-selected"],inject:{SelectInstance:{default:null},OptionGroupInstance:{default:null}},props:{value:{type:[String,Number],required:!0},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},tag:{type:[String,Number]}},data(){return{searchLabel:"",autoComplete:!1,id:ee(6),instance:null}},computed:{classes(){return[`${Wh}`,{[`${Wh}-disabled`]:this.itemDisabled,[`${Wh}-selected`]:this.selected&&!this.autoComplete,[`${Wh}-focus`]:this.isFocused}]},showLabel(){return this.label?this.label:this.value},optionLabel(){return this.label||this.$el&&this.$el.textContent},isFocused(){const a=this.SelectInstance;let h=a.slotOptions||[];const p=a.focusIndex,C=a.$slots.default;if(this.autoComplete&&C){h=[];let v=C();for(;v.length>0;){const A=v.shift();A.type&&typeof A.type=="object"&&A.type.name==="iOption"?h.push(A):Array.isArray(A.children)&&(v=v.concat(A.children))}}const w=h[p];return w&&w.props&&w.props.value===this.value},isShow(){const a=this.SelectInstance,h=a.filterable,p=a.query.toLowerCase().trim(),C=a.filterByLabel,w=a.slotOptionsMap,{props:v}=w.get(this.value)||{props:{}},A=this.label||this.$el&&this.$el.textContent;let V=(A||v.value||"").toLowerCase();C&&(V=(A||"").toLowerCase());const H=V.includes(p);return!h||h&&(H||!a.filterQueryChange)||N(a.remoteMethod)==="function"},selected(){return(this.SelectInstance.values||[]).find(a=>a.value===this.value)}},methods:{select(){if(this.itemDisabled)return!1;this.SelectInstance.handleOnSelectSelected({value:this.value,label:this.optionLabel,tag:this.tag})},addOption(){const a=this.SelectInstance,h=this.OptionGroupInstance,{id:p,value:C,instance:w}=this;if(h&&h.optionList.push({...w,id:p,tag:"option"}),a){a.slotOptions.push({...w,id:p,tag:"option"}),a.slotOptionsMap.set(C,w);const{modelValue:v}=a;(v&&v.length||N(v)==="number")&&a.lazyUpdateValue(!0)}},removeOption(){const a=this.OptionGroupInstance,h=this.SelectInstance,{id:p,value:C}=this;if(a){const w=a.optionList.findIndex(v=>v.id===p);w!==-1&&a.optionList.splice(w,1)}if(h){const w=this.SelectInstance,v=w.slotOptions.findIndex(A=>A.id===p);v!==-1&&w.slotOptions.splice(v,1),w.slotOptionsMap.has(C)&&w.slotOptionsMap.delete(C)}}},created(){this.instance=t.getCurrentInstance()},mounted(){this.addOption();const a=$(this,"iSelect");a&&(this.autoComplete=a.autoComplete)},beforeUnmount(){t.nextTick(()=>{this.removeOption(),this.instance=null})}};function nm(a,h,p,C,w,v){return t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.classes),onClick:h[0]||(h[0]=t.withModifiers((...A)=>v.select&&v.select(...A),["stop"])),onMousedown:h[1]||(h[1]=t.withModifiers(()=>{},["prevent"]))},[t.renderSlot(a.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(v.showLabel),1)])],34)),[[t.vShow,v.isShow]])}var Pn=l(Qh,[["render",nm]]);const Ia=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,rm=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let Qr={},Es;function E_(a,h=!1){if(!r)return;const p=a.getAttribute("id")||a.getAttribute("data-reactid")||a.getAttribute("name");if(h&&Qr[p])return Qr[p];const C=window.getComputedStyle(a),w=C.getPropertyValue("box-sizing")||C.getPropertyValue("-moz-box-sizing")||C.getPropertyValue("-webkit-box-sizing"),v=parseFloat(C.getPropertyValue("padding-bottom"))+parseFloat(C.getPropertyValue("padding-top")),A=parseFloat(C.getPropertyValue("border-bottom-width"))+parseFloat(C.getPropertyValue("border-top-width")),V={sizingStyle:rm.map(H=>`${H}:${C.getPropertyValue(H)}`).join(";"),paddingSize:v,borderSize:A,boxSizing:w};return h&&p&&(Qr[p]=V),V}function Oy(a,h=null,p=null,C=!1){r&&!Es&&(Es=document.createElement("textarea"),document.body.appendChild(Es)),a.getAttribute("wrap")?Es.setAttribute("wrap",a.getAttribute("wrap")):Es.removeAttribute("wrap");let{paddingSize:w,borderSize:v,boxSizing:A,sizingStyle:V}=E_(a,C);Es.setAttribute("style",`${V};${Ia}`),Es.value=a.value||a.placeholder||"";let H=Number.MIN_SAFE_INTEGER,X=Number.MAX_SAFE_INTEGER,Y=Es.scrollHeight,le;if(A==="border-box"?Y=Y+v:A==="content-box"&&(Y=Y-w),h!==null||p!==null){Es.value=" ";let xe=Es.scrollHeight-w;h!==null&&(H=xe*h,A==="border-box"&&(H=H+w+v),Y=Math.max(H,Y)),p!==null&&(X=xe*p,A==="border-box"&&(X=X+w+v),le=Y>X?"":"hidden",Y=Math.min(X,Y))}return p||(le="hidden"),{height:`${Y}px`,minHeight:`${H}px`,maxHeight:`${X}px`,overflowY:le}}const Zn="ivu-input",BH={name:"Input",mixins:[fi],emits:["on-enter","on-search","on-keydown","on-keypress","on-keyup","on-click","on-focus","on-blur","on-change","on-input-change","on-clear","update:modelValue"],props:{type:{validator(a){return _(a,["text","textarea","password","url","email","date","number","tel"])},default:"text"},modelValue:{type:[String,Number],default:""},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator(a){return _(a,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{currentValue:this.modelValue,prefixCls:Zn,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType(){let a=this.type;return a==="password"&&this.password&&this.showPassword&&(a="text"),a},prepend(){let a=!1;return this.type!=="textarea"&&(a=this.$slots.prepend!==void 0),a},append(){let a=!1;return this.type!=="textarea"&&(a=this.$slots.append!==void 0),a},showPrefix(){let a=!1;return this.type!=="textarea"&&(a=this.prefix!==""||this.$slots.prefix!==void 0),a},showSuffix(){let a=!1;return this.type!=="textarea"&&(a=this.suffix!==""||this.$slots.suffix!==void 0),a},wrapClasses(){return[`${Zn}-wrapper`,{[`${Zn}-wrapper-${this.size}`]:!!this.size,[`${Zn}-type-${this.type}`]:this.type,[`${Zn}-group`]:this.prepend||this.append||this.search&&this.enterButton,[`${Zn}-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,[`${Zn}-group-with-prepend`]:this.prepend,[`${Zn}-group-with-append`]:this.append||this.search&&this.enterButton,[`${Zn}-hide-icon`]:this.append,[`${Zn}-with-search`]:this.search&&this.enterButton,[`${Zn}-wrapper-disabled`]:this.itemDisabled}]},inputClasses(){return[`${Zn}`,{[`${Zn}-${this.size}`]:!!this.size,[`${Zn}-disabled`]:this.itemDisabled,[`${Zn}-no-border`]:!this.border,[`${Zn}-with-prefix`]:this.showPrefix,[`${Zn}-with-suffix`]:this.showSuffix||this.search&&this.enterButton===!1}]},textareaClasses(){return[`${Zn}`,{[`${Zn}-disabled`]:this.itemDisabled,[`${Zn}-no-border`]:!this.border}]},upperLimit(){return this.maxlength},textLength(){return typeof this.modelValue=="number"?String(this.modelValue).length:(this.modelValue||"").length},clearableStyles(){const a={};let h=this.clearableIconOffset;return h&&(a.transform=`translateX(-${h}px)`),a}},methods:{handleEnter(a){this.$emit("on-enter",a),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(a){this.$emit("on-keydown",a)},handleKeypress(a){this.$emit("on-keypress",a)},handleKeyup(a){this.$emit("on-keyup",a)},handleIconClick(a){this.$emit("on-click",a)},handleFocus(a){this.$emit("on-focus",a)},handleBlur(a){this.$emit("on-blur",a),$(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},handleComposition(a){a.type==="compositionstart"&&(this.isOnComposition=!0),a.type==="compositionend"&&(this.isOnComposition=!1,this.handleInput(a))},handleInput(a){if(this.isOnComposition)return;let h=a.target.value;this.number&&h!==""&&(h=Number.isNaN(Number(h))?h:Number(h)),this.$emit("update:modelValue",h),this.setCurrentValue(h),this.$emit("on-change",a)},handleChange(a){this.$emit("on-input-change",a)},setCurrentValue(a){a!==this.currentValue&&(t.nextTick(()=>{this.resizeTextarea()}),this.currentValue=a,$(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("change",a))},resizeTextarea(){const a=this.autosize;if(!a||this.type!=="textarea")return!1;const h=a.minRows,p=a.maxRows;this.textareaStyles=Oy(this.$refs.textarea,h,p)},focus(a){const h=this.type==="textarea"?this.$refs.textarea:this.$refs.input;h.focus(a);const{cursor:p}=a||{};if(p){const C=h.value.length;switch(p){case"start":h.setSelectionRange(0,0);break;case"end":h.setSelectionRange(C,C);break;default:h.setSelectionRange(0,C)}}},blur(){this.type==="textarea"?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){const a={target:{value:""}};this.$emit("update:modelValue",""),this.setCurrentValue(""),this.$emit("on-change",a),this.$emit("on-clear")},handleSearch(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword(){if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();const a=this.currentValue.length;setTimeout(()=>{this.$refs.input.setSelectionRange(a,a)},0)},handleCalcIconOffset(){const a=this.$el.querySelectorAll(".ivu-input-group-append")[0];a?this.clearableIconOffset=a.offsetWidth:this.clearableIconOffset=0}},watch:{modelValue(a){this.setCurrentValue(a)},type(){t.nextTick(this.handleCalcIconOffset)}},mounted(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated(){t.nextTick(this.handleCalcIconOffset)}},UH={key:4,class:"ivu-input-suffix"},FH={key:5,class:"ivu-input-word-count"},zH={key:0,class:"ivu-icon ivu-icon-ios-eye-outline"},XH={key:1,class:"ivu-icon ivu-icon-ios-eye-off-outline"},WH=["id","autocomplete","spellcheck","type","placeholder","disabled","maxlength","readonly","name","value","number","autofocus"],QH={key:0,class:"ivu-icon ivu-icon-ios-search"},HH={key:9,class:"ivu-input-prefix"},GH=["id","wrap","autocomplete","spellcheck","placeholder","disabled","rows","maxlength","readonly","name","value","autofocus"],YH={key:0,class:"ivu-input-word-count"};function jH(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[p.type!=="textarea"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[v.prepend?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-group-prepend"])},[t.renderSlot(a.$slots,"prepend")],2)),[[t.vShow,w.slotReady]]):t.createCommentVNode("",!0),p.clearable&&w.currentValue&&!a.itemDisabled?(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(["ivu-icon",["ivu-icon-ios-close-circle",w.prefixCls+"-icon",w.prefixCls+"-icon-clear",w.prefixCls+"-icon-normal"]]),onClick:h[0]||(h[0]=(...A)=>v.handleClear&&v.handleClear(...A)),style:t.normalizeStyle(v.clearableStyles)},null,6)):p.icon?(t.openBlock(),t.createElementBlock("i",{key:2,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+p.icon,w.prefixCls+"-icon",w.prefixCls+"-icon-normal"]]),onClick:h[1]||(h[1]=(...A)=>v.handleIconClick&&v.handleIconClick(...A))},null,2)):p.search&&p.enterButton===!1?(t.openBlock(),t.createElementBlock("i",{key:3,class:t.normalizeClass(["ivu-icon ivu-icon-ios-search",[w.prefixCls+"-icon",w.prefixCls+"-icon-normal",w.prefixCls+"-search-icon"]]),onClick:h[2]||(h[2]=(...A)=>v.handleSearch&&v.handleSearch(...A))},null,2)):v.showSuffix?(t.openBlock(),t.createElementBlock("span",UH,[t.renderSlot(a.$slots,"suffix",{},()=>[p.suffix?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+p.suffix]])},null,2)):t.createCommentVNode("",!0)])])):p.showWordLimit?(t.openBlock(),t.createElementBlock("span",FH,t.toDisplayString(v.textLength)+"/"+t.toDisplayString(v.upperLimit),1)):p.password?(t.openBlock(),t.createElementBlock("span",{key:6,class:"ivu-input-suffix",onClick:h[3]||(h[3]=(...A)=>v.handleToggleShowPassword&&v.handleToggleShowPassword(...A))},[w.showPassword?(t.openBlock(),t.createElementBlock("i",zH)):(t.openBlock(),t.createElementBlock("i",XH))])):t.createCommentVNode("",!0),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[p.icon?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon ivu-icon-ios-loading ivu-load-loop",[w.prefixCls+"-icon",w.prefixCls+"-icon-validate"]])},null,2))]),_:1}),t.createElementVNode("input",{id:p.elementId,autocomplete:p.autocomplete,spellcheck:p.spellcheck,ref:"input",type:v.currentType,class:t.normalizeClass(v.inputClasses),placeholder:p.placeholder,disabled:a.itemDisabled,maxlength:p.maxlength,readonly:p.readonly,name:p.name,value:w.currentValue,number:p.number,autofocus:p.autofocus,onKeyup:[h[4]||(h[4]=t.withKeys((...A)=>v.handleEnter&&v.handleEnter(...A),["enter"])),h[5]||(h[5]=(...A)=>v.handleKeyup&&v.handleKeyup(...A))],onKeypress:h[6]||(h[6]=(...A)=>v.handleKeypress&&v.handleKeypress(...A)),onKeydown:h[7]||(h[7]=(...A)=>v.handleKeydown&&v.handleKeydown(...A)),onFocus:h[8]||(h[8]=(...A)=>v.handleFocus&&v.handleFocus(...A)),onBlur:h[9]||(h[9]=(...A)=>v.handleBlur&&v.handleBlur(...A)),onCompositionstart:h[10]||(h[10]=(...A)=>v.handleComposition&&v.handleComposition(...A)),onCompositionupdate:h[11]||(h[11]=(...A)=>v.handleComposition&&v.handleComposition(...A)),onCompositionend:h[12]||(h[12]=(...A)=>v.handleComposition&&v.handleComposition(...A)),onInput:h[13]||(h[13]=(...A)=>v.handleInput&&v.handleInput(...A)),onChange:h[14]||(h[14]=(...A)=>v.handleChange&&v.handleChange(...A))},null,42,WH),v.append?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:7,class:t.normalizeClass([w.prefixCls+"-group-append"])},[t.renderSlot(a.$slots,"append")],2)),[[t.vShow,w.slotReady]]):p.search&&p.enterButton?(t.openBlock(),t.createElementBlock("div",{key:8,class:t.normalizeClass([w.prefixCls+"-group-append",w.prefixCls+"-search"]),onClick:h[15]||(h[15]=(...A)=>v.handleSearch&&v.handleSearch(...A))},[p.enterButton===!0?(t.openBlock(),t.createElementBlock("i",QH)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(p.enterButton),1)],64))],2)):v.showPrefix?(t.openBlock(),t.createElementBlock("span",HH,[t.renderSlot(a.$slots,"prefix",{},()=>[p.prefix?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+p.prefix]])},null,2)):t.createCommentVNode("",!0)])])):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("textarea",{id:p.elementId,wrap:p.wrap,autocomplete:p.autocomplete,spellcheck:p.spellcheck,ref:"textarea",class:t.normalizeClass(v.textareaClasses),style:t.normalizeStyle(w.textareaStyles),placeholder:p.placeholder,disabled:a.itemDisabled,rows:p.rows,maxlength:p.maxlength,readonly:p.readonly,name:p.name,value:w.currentValue,autofocus:p.autofocus,onKeyup:[h[16]||(h[16]=t.withKeys((...A)=>v.handleEnter&&v.handleEnter(...A),["enter"])),h[17]||(h[17]=(...A)=>v.handleKeyup&&v.handleKeyup(...A))],onKeypress:h[18]||(h[18]=(...A)=>v.handleKeypress&&v.handleKeypress(...A)),onKeydown:h[19]||(h[19]=(...A)=>v.handleKeydown&&v.handleKeydown(...A)),onFocus:h[20]||(h[20]=(...A)=>v.handleFocus&&v.handleFocus(...A)),onBlur:h[21]||(h[21]=(...A)=>v.handleBlur&&v.handleBlur(...A)),onCompositionstart:h[22]||(h[22]=(...A)=>v.handleComposition&&v.handleComposition(...A)),onCompositionupdate:h[23]||(h[23]=(...A)=>v.handleComposition&&v.handleComposition(...A)),onCompositionend:h[24]||(h[24]=(...A)=>v.handleComposition&&v.handleComposition(...A)),onInput:h[25]||(h[25]=(...A)=>v.handleInput&&v.handleInput(...A))},`
            `,46,GH),p.showWordLimit?(t.openBlock(),t.createElementBlock("span",YH,t.toDisplayString(v.textLength)+"/"+t.toDisplayString(v.upperLimit),1)):t.createCommentVNode("",!0)],64))],2)}var Ao=l(BH,[["render",jH]]);const qH={name:"AutoComplete",mixins:[fi],components:{iSelect:ls,iOption:Pn,iInput:Ao},emits:["update:modelValue","on-change","on-search","on-select","on-focus","on-blur","on-clear"],props:{modelValue:{type:[String,Number],default:""},label:{type:[String,Number],default:""},data:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},icon:{type:String},filterMethod:{type:[Function,Boolean],default:!1},placement:{validator(a){return _(a,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},transferClassName:{type:String},capture:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return a.$VIEWUI?a.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,disableEmitChange:!1}},computed:{inputIcon(){let a="";return this.clearable&&this.currentValue&&!this.disabled?a="ios-close-circle":this.icon&&(a=this.icon),a},filteredData(){return this.filterMethod?this.data.filter(a=>this.filterMethod(this.currentValue,a)):this.data}},watch:{modelValue(a){this.currentValue!==a&&(this.disableEmitChange=!0),this.currentValue=a},currentValue(a){if(this.$refs.select.setQuery(a),this.$emit("update:modelValue",a),this.disableEmitChange){this.disableEmitChange=!1;return}this.$emit("on-change",a),this.handleFormItemChange("change",a)}},methods:{remoteMethod(a){this.$emit("on-search",a)},handleSelect(a){const h=a.value;h!=null&&(this.currentValue=h,this.$refs.input.blur(),this.$emit("on-select",h))},handleFocus(a){this.$emit("on-focus",a)},handleBlur(a){this.$emit("on-blur",a)},handleClear(){!this.clearable||(this.currentValue="",this.$refs.select.reset(),this.$emit("on-clear"))},handleClickOutside(){t.nextTick(()=>{this.$refs.input.blur()})}}};function ZH(a,h,p,C,w,v){const A=t.resolveComponent("i-input"),V=t.resolveComponent("i-option"),H=t.resolveComponent("i-select");return t.openBlock(),t.createBlock(H,{ref:"select",class:"ivu-auto-complete",label:p.label,disabled:a.itemDisabled,clearable:p.clearable,placeholder:p.placeholder,size:p.size,placement:p.placement,"model-value":w.currentValue,"transfer-class-name":p.transferClassName,filterable:"",remote:"","auto-complete":"","remote-method":v.remoteMethod,onOnSelect:v.handleSelect,onOnClickoutside:v.handleClickOutside,transfer:p.transfer,capture:p.capture,eventsEnabled:p.eventsEnabled},{input:t.withCtx(()=>[t.renderSlot(a.$slots,"input",{},()=>[t.createVNode(A,{"element-id":p.elementId,ref:"input",modelValue:w.currentValue,"onUpdate:modelValue":h[0]||(h[0]=X=>w.currentValue=X),name:p.name,placeholder:p.placeholder,disabled:a.itemDisabled,size:p.size,icon:v.inputIcon,onOnClick:v.handleClear,onOnFocus:v.handleFocus,onOnBlur:v.handleBlur},null,8,["element-id","modelValue","name","placeholder","disabled","size","icon","onOnClick","onOnFocus","onOnBlur"])])]),default:t.withCtx(()=>[t.renderSlot(a.$slots,"default",{},()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.filteredData,X=>(t.openBlock(),t.createBlock(V,{value:X,key:X},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(X),1)]),_:2},1032,["value"]))),128))])]),_:3},8,["label","disabled","clearable","placeholder","size","placement","model-value","transfer-class-name","remote-method","onOnSelect","onOnClickoutside","transfer","capture","eventsEnabled"])}var aA=l(qH,[["render",ZH]]);const kd="ivu-avatar",lA=["small","large","default"],KH={name:"Avatar",components:{Icon:S},emits:["on-error"],props:{shape:{validator(a){return _(a,["circle","square"])},default:"circle"},size:{type:[String,Number],default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},src:{type:String},icon:{type:String},customIcon:{type:String,default:""}},data(){return{prefixCls:kd,scale:1,childrenWidth:0,isSlotShow:!1,slotTemp:null}},computed:{classes(){return[`${kd}`,`${kd}-${this.shape}`,{[`${kd}-image`]:!!this.src,[`${kd}-icon`]:!!this.icon||!!this.customIcon,[`${kd}-${this.size}`]:_(this.size,lA)}]},styles(){let a={};return this.size&&!_(this.size,lA)&&(a.width=`${this.size}px`,a.height=`${this.size}px`,a.lineHeight=`${this.size}px`,a.fontSize=`${this.size/2}px`),a},childrenStyle(){let a={};return this.isSlotShow&&(a={msTransform:`scale(${this.scale})`,WebkitTransform:`scale(${this.scale})`,transform:`scale(${this.scale})`,position:"absolute",display:"inline-block",left:`calc(50% - ${Math.round(this.childrenWidth/2)}px)`}),a}},watch:{size(a,h){a!==h&&this.setScale()}},methods:{setScale(){if(this.isSlotShow=!this.src&&!this.icon,this.$refs.children){this.childrenWidth=this.$refs.children.offsetWidth;const a=this.$el.getBoundingClientRect().width;a-8<this.childrenWidth?this.scale=(a-8)/this.childrenWidth:this.scale=1}},handleError(a){this.$emit("on-error",a)}},beforeCreate(){this.slotTemp=this.$slots.default?this.$slots.default():null},mounted(){this.setScale()},updated(){const a=this.$slots.default?this.$slots.default():null;a&&a!==this.slotTemp&&this.setScale()}},JH=["src"];function eG(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.styles)},[p.src?(t.openBlock(),t.createElementBlock("img",{key:0,src:p.src,onError:h[0]||(h[0]=(...V)=>v.handleError&&v.handleError(...V))},null,40,JH)):p.icon||p.customIcon?(t.openBlock(),t.createBlock(A,{key:1,type:p.icon,custom:p.customIcon},null,8,["type","custom"])):(t.openBlock(),t.createElementBlock("span",{key:2,ref:"children",class:t.normalizeClass([w.prefixCls+"-string"]),style:t.normalizeStyle(v.childrenStyle)},[t.renderSlot(a.$slots,"default")],6))],6)}var sm=l(KH,[["render",eG]]),cA={emits:["on-popper-show","on-popper-hide","created","update:modelValue"],props:{eventsEnabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:Object,popper:Object,offset:{default:0},modelValue:{type:Boolean,default:!1},transition:String,options:{type:Object,default(){return{modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:"window"}}}}}},data(){return{visible:this.modelValue}},watch:{modelValue:{immediate:!0,handler(a){this.visible=a,this.$emit("update:modelValue",a)}},visible(a){a?(this.handleIndexIncrease&&this.handleIndexIncrease(),this.updatePopper(),this.$emit("on-popper-show")):this.$emit("on-popper-hide"),this.$emit("update:modelValue",a)}},methods:{createPopper(){if(!/^(top|bottom|left|right)(-start|-end)?$/g.test(this.placement))return;const a=this.options,h=this.popper||this.$refs.popper,p=this.reference||this.$refs.reference;!h||!p||(this.popperJS&&this.popperJS.hasOwnProperty("destroy")&&this.popperJS.destroy(),a.eventsEnabled=this.eventsEnabled,a.placement=this.placement,a.modifiers.offset||(a.modifiers.offset={}),a.modifiers.offset.offset=this.offset,a.onCreate=()=>{t.nextTick(this.updatePopper),this.$emit("created",this)},this.popperJS=new de(p,h,a))},updatePopper(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy(){this.visible||(this.popperJS.destroy(),this.popperJS=null)}},updated(){t.nextTick(()=>this.updatePopper())},beforeUnmount(){this.popperJS&&this.popperJS.destroy()}};const Td="ivu-tooltip",tG={name:"Tooltip",mixins:[cA],props:{placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},content:{type:[String,Number],default:""},delay:{type:Number,default:100},disabled:{type:Boolean,default:!1},controlled:{type:Boolean,default:!1},always:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},theme:{validator(a){return _(a,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number]},transferClassName:{type:String}},data(){return{prefixCls:Td,tIndex:this.handleGetIndex()}},computed:{innerStyles(){const a={};return this.maxWidth&&(a["max-width"]=`${this.maxWidth}px`),a},innerClasses(){return[`${Td}-inner`,{[`${Td}-inner-with-width`]:!!this.maxWidth}]},dropStyles(){let a={};return this.transfer&&(a["z-index"]=1060+this.tIndex),a},dropdownCls(){return[`${Td}-popper`,`${Td}-${this.theme}`,{[Td+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]}},watch:{content(){this.updatePopper()}},methods:{handleShowPopper(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!0},this.delay),this.tIndex=this.handleGetIndex()},handleClosePopper(){this.timeout&&(clearTimeout(this.timeout),this.controlled||(this.timeout=setTimeout(()=>{this.visible=!1},100)))},handleGetIndex(){return We(),Oe}},mounted(){this.always&&this.updatePopper()}};function iG(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls]),onMouseenter:h[2]||(h[2]=(...A)=>v.handleShowPopper&&v.handleShowPopper(...A)),onMouseleave:h[3]||(h[3]=(...A)=>v.handleClosePopper&&v.handleClosePopper(...A))},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-rel"]),ref:"reference"},[t.renderSlot(a.$slots,"default")],2),(t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!p.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{ref:"popper",class:t.normalizeClass(v.dropdownCls),style:t.normalizeStyle(v.dropStyles),onMouseenter:h[0]||(h[0]=(...A)=>v.handleShowPopper&&v.handleShowPopper(...A)),onMouseleave:h[1]||(h[1]=(...A)=>v.handleClosePopper&&v.handleClosePopper(...A))},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-arrow"])},null,2),t.createElementVNode("div",{class:t.normalizeClass(v.innerClasses),style:t.normalizeStyle(v.innerStyles)},[t.renderSlot(a.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(p.content),1)])],6)],2)],38),[[t.vShow,!p.disabled&&(a.visible||p.always)]])]),_:3})],8,["disabled"]))],34)}var vl=l(tG,[["render",iG]]);const nG={name:"AvatarList",components:{Avatar:sm,Tooltip:vl},props:{list:{type:Array,default(){return[]}},shape:{validator(a){return _(a,["circle","square"])},default:"circle"},size:{validator(a){return _(a,["small","large","default"])},default:"default"},excessStyle:{type:Object,default(){return{}}},max:{type:Number},tooltip:{type:Boolean,default:!0},placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}}},computed:{currentList(){const a=this.list.length,h=this.max;return a<=h?[...this.list]:[...this.list].slice(0,h)}}},rG={key:0,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"},sG={key:1,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"};function oG(a,h,p,C,w,v){const A=t.resolveComponent("Avatar"),V=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-avatar-list","ivu-avatar-list-"+p.size])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.currentList,(H,X)=>(t.openBlock(),t.createElementBlock("div",{class:"ivu-avatar-list-item",key:X},[p.tooltip&&H.tip?(t.openBlock(),t.createBlock(V,{key:0,content:H.tip,placement:p.placement,transfer:p.transfer},{default:t.withCtx(()=>[t.createVNode(A,{src:H.src,size:p.size,shape:p.shape},null,8,["src","size","shape"])]),_:2},1032,["content","placement","transfer"])):(t.openBlock(),t.createBlock(A,{key:1,src:H.src,size:p.size,shape:p.shape},null,8,["src","size","shape"]))]))),128)),a.$slots.extra?(t.openBlock(),t.createElementBlock("div",rG,[t.createVNode(A,{size:p.size,shape:p.shape,style:t.normalizeStyle(p.excessStyle)},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"extra")]),_:3},8,["size","shape","style"])])):p.list.length>p.max?(t.openBlock(),t.createElementBlock("div",sG,[t.createVNode(A,{size:p.size,shape:p.shape,style:t.normalizeStyle(p.excessStyle)},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"excess",{},()=>[t.createTextVNode("+"+t.toDisplayString(p.list.length-p.max),1)])]),_:3},8,["size","shape","style"])])):t.createCommentVNode("",!0)],2)}var hA=l(nG,[["render",oG]]);const P_="ivu-back-top",aG={name:"BackTop",emits:["on-click"],props:{height:{type:Number,default:400},bottom:{type:Number,default:30},right:{type:Number,default:30},duration:{type:Number,default:1e3}},data(){return{backTop:!1}},mounted(){s(window,"scroll",this.handleScroll),s(window,"resize",this.handleScroll)},beforeUnmount(){o(window,"scroll",this.handleScroll),o(window,"resize",this.handleScroll)},computed:{classes(){return[`${P_}`,{[`${P_}-show`]:this.backTop}]},styles(){return{bottom:`${this.bottom}px`,right:`${this.right}px`}},innerClasses(){return`${P_}-inner`}},methods:{handleScroll(){!r||(this.backTop=window.pageYOffset>=this.height)},back(){if(!r)return;const a=document.documentElement.scrollTop||document.body.scrollTop;D(window,a,0,this.duration),this.$emit("on-click")}}},lG=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-up"},null,-1)];function cG(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.styles),onClick:h[0]||(h[0]=(...A)=>v.back&&v.back(...A))},[t.renderSlot(a.$slots,"default",{},()=>[t.createElementVNode("div",{class:t.normalizeClass(v.innerClasses)},lG,2)])],6)}var uA=l(aG,[["render",cG]]);const dA=["blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],Da="ivu-badge",hG={name:"Badge",props:{count:Number,dot:{type:Boolean,default:!1},overflowCount:{type:[Number,String],default:99},className:String,showZero:{type:Boolean,default:!1},text:{type:String,default:""},status:{validator(a){return _(a,["success","processing","default","error","warning"])}},type:{validator(a){return _(a,["success","primary","normal","error","warning","info"])}},offset:{type:Array},color:{type:String}},computed:{classes(){return`${Da}`},dotClasses(){return`${Da}-dot`},countClasses(){return[`${Da}-count`,{[`${this.className}`]:!!this.className,[`${Da}-count-alone`]:this.alone,[`${Da}-count-${this.type}`]:!!this.type}]},customCountClasses(){return[`${Da}-count`,`${Da}-count-custom`,{[`${this.className}`]:!!this.className}]},statusClasses(){return[`${Da}-status-dot`,{[`${Da}-status-${this.status}`]:!!this.status,[`${Da}-status-${this.color}`]:!!this.color&&_(this.color,dA)}]},statusStyles(){return _(this.color,dA)?{}:{backgroundColor:this.color}},styles(){const a={};return this.offset&&this.offset.length===2&&(a["margin-top"]=`${this.offset[0]}px`,a["margin-right"]=`${this.offset[1]}px`),a},finalCount(){return this.text!==""?this.text:parseInt(this.count)>=parseInt(this.overflowCount)?`${this.overflowCount}+`:this.count},badge(){let a=!1;return this.count&&(a=parseInt(this.count)!==0),this.dot&&(a=!0,this.count!==null&&parseInt(this.count)===0&&(a=!1)),this.text!==""&&(a=!0),a||this.showZero},hasCount(){return!!(this.count||this.text!==""||this.showZero&&parseInt(this.count)===0)},alone(){return this.$slots.default===void 0}}},uG={class:"ivu-badge-status-text"};function dG(a,h,p,C,w,v){return p.dot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(v.classes),ref:"badge"},[t.renderSlot(a.$slots,"default"),t.withDirectives(t.createElementVNode("sup",{class:t.normalizeClass(v.dotClasses),style:t.normalizeStyle(v.styles)},null,6),[[t.vShow,v.badge]])],2)):p.status||p.color?(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass([v.classes,"ivu-badge-status"]),ref:"badge"},[t.createElementVNode("span",{class:t.normalizeClass(v.statusClasses),style:t.normalizeStyle(v.statusStyles)},null,6),t.createElementVNode("span",uG,[t.renderSlot(a.$slots,"text",{},()=>[t.createTextVNode(t.toDisplayString(p.text),1)])])],2)):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(v.classes),ref:"badge"},[t.renderSlot(a.$slots,"default"),a.$slots.count?(t.openBlock(),t.createElementBlock("sup",{key:0,style:t.normalizeStyle(v.styles),class:t.normalizeClass(v.customCountClasses)},[t.renderSlot(a.$slots,"count")],6)):v.hasCount?t.withDirectives((t.openBlock(),t.createElementBlock("sup",{key:1,style:t.normalizeStyle(v.styles),class:t.normalizeClass(v.countClasses)},[t.renderSlot(a.$slots,"text",{},()=>[t.createTextVNode(t.toDisplayString(v.finalCount),1)])],6)),[[t.vShow,v.badge]]):t.createCommentVNode("",!0)],2))}var wy=l(hG,[["render",dG]]);const fG={name:"Breadcrumb",provide(){return{BreadcrumbInstance:this}},props:{separator:{type:String,default:"/"}}},pG={class:"ivu-breadcrumb"};function mG(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",pG,[t.renderSlot(a.$slots,"default")])}var A_=l(fG,[["render",mG]]);const fA="ivu-breadcrumb-item",gG={name:"BreadcrumbItem",mixins:[fe],inject:["BreadcrumbInstance"],props:{},data(){return{showSeparator:!1}},computed:{linkClasses(){return`${fA}-link`},separatorClasses(){return`${fA}-separator`},separator(){return this.BreadcrumbInstance.separator}},mounted(){this.showSeparator=this.$slots.separator!==void 0}},vG=["href","target"],yG=["innerHTML"];function bG(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("span",null,[a.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:a.linkUrl,target:a.target,class:t.normalizeClass(v.linkClasses),onClick:[h[0]||(h[0]=t.withModifiers(A=>a.handleCheckClick(A,!1),["exact"])),h[1]||(h[1]=t.withModifiers(A=>a.handleCheckClick(A,!0),["ctrl"])),h[2]||(h[2]=t.withModifiers(A=>a.handleCheckClick(A,!0),["meta"]))]},[t.renderSlot(a.$slots,"default")],10,vG)):(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(v.linkClasses)},[t.renderSlot(a.$slots,"default")],2)),w.showSeparator?(t.openBlock(),t.createElementBlock("span",{key:3,class:t.normalizeClass(v.separatorClasses)},[t.renderSlot(a.$slots,"separator")],2)):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(v.separatorClasses),innerHTML:v.separator},null,10,yG))])}var R_=l(gG,[["render",bG]]);const gc="ivu-btn",cs={name:"Button",mixins:[fe,fi],components:{Icon:S},emits:["click"],props:{type:{validator(a){return _(a,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator(a){return _(a,["circle","circle-outline"])}},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator(a){return _(a,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{showSlot(){return!!this.$slots.default},classes(){return[`${gc}`,`${gc}-${this.type}`,{[`${gc}-long`]:this.long,[`${gc}-${this.shape}`]:!!this.shape,[`${gc}-${this.size}`]:this.size!=="default",[`${gc}-loading`]:this.loading!=null&&this.loading,[`${gc}-icon-only`]:!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),[`${gc}-ghost`]:this.ghost}]},isHrefPattern(){const{to:a}=this;return!!a},tagName(){const{isHrefPattern:a}=this;return a?"a":"button"},tagProps(){const{isHrefPattern:a}=this;if(a){const{linkUrl:h,target:p}=this;return{href:h,target:p}}else{const{htmlType:h}=this;return{type:h}}}},methods:{handleClickLink(a){this.$emit("click",a);const h=a.ctrlKey||a.metaKey;this.handleCheckClick(a,h)}},render(){let a;this.tagName==="button"?a="button":this.tagName==="a"&&(a="a");let h=[];return this.loading&&h.push(t.h(S,{class:"ivu-load-loop",type:"ios-loading"})),(this.icon||this.customIcon)&&!this.loading&&h.push(t.h(S,{type:this.icon,custom:this.customIcon})),this.$slots.default&&h.push(t.h("span",{ref:"slot"},this.$slots.default())),t.h(a,{class:this.classes,disabled:this.itemDisabled,onClick:this.handleClickLink,...this.tagProps},h)}},_y="ivu-btn-group",xG={name:"ButtonGroup",props:{size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},shape:{validator(a){return _(a,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes(){return[`${_y}`,{[`${_y}-${this.size}`]:!!this.size,[`${_y}-${this.shape}`]:!!this.shape,[`${_y}-vertical`]:this.vertical}]}}};function OG(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.renderSlot(a.$slots,"default")],2)}var I_=l(xG,[["render",OG]]);const om="ivu-radio-group";let wG=0;const _G=Date.now(),SG={name:"RadioGroup",mixins:[fi],emits:["update:modelValue","on-change"],provide(){return{RadioGroupInstance:this}},props:{modelValue:{type:[String,Number],default:""},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},type:{validator(a){return _(a,["button"])}},vertical:{type:Boolean,default:!1},name:{type:String,default:()=>`ivuRadioGroup_${_G}_${wG++}`},buttonStyle:{validator(a){return _(a,["default","solid"])},default:"default"}},data(){return{currentValue:this.modelValue,children:[]}},computed:{classes(){return[`${om}`,{[`${om}-${this.size}`]:!!this.size,[`ivu-radio-${this.size}`]:!!this.size,[`${om}-${this.type}`]:!!this.type,[`${om}-button-${this.buttonStyle}`]:this.type==="button"&&this.buttonStyle!=="default",[`${om}-vertical`]:this.vertical}]}},methods:{change(a){this.currentValue=a.value,this.$emit("update:modelValue",a.value),this.$emit("on-change",a.value),this.handleFormItemChange("change",a.value)}},watch:{modelValue(){this.currentValue!==this.modelValue&&(this.currentValue=this.modelValue)}}},CG=["name"];function kG(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),name:p.name},[t.renderSlot(a.$slots,"default")],10,CG)}var Sy=l(SG,[["render",kG]]);const eo="ivu-radio",TG={name:"Radio",mixins:[fi],emits:["update:modelValue","on-change"],inject:{RadioGroupInstance:{default:null}},props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{groupName:this.name,parent:this.RadioGroupInstance,focusWrapper:!1,focusInner:!1}},computed:{wrapClasses(){return[`${eo}-wrapper`,{[`${eo}-group-item`]:this.group,[`${eo}-wrapper-checked`]:this.currentValue,[`${eo}-wrapper-disabled`]:this.itemDisabled,[`${eo}-${this.size}`]:!!this.size,[`${eo}-focus`]:this.focusWrapper,[`${eo}-border`]:this.border}]},radioClasses(){return[`${eo}`,{[`${eo}-checked`]:this.currentValue,[`${eo}-disabled`]:this.itemDisabled}]},innerClasses(){return[`${eo}-inner`,{[`${eo}-focus`]:this.focusInner}]},inputClasses(){return`${eo}-input`},currentValue(){return this.RadioGroupInstance?this.RadioGroupInstance.currentValue===this.label:this.modelValue===this.trueValue},group(){return!!this.RadioGroupInstance}},mounted(){this.parent&&(this.name&&this.name!==this.parent.name?console.warn&&console.warn("[View UI] Name does not match Radio Group name."):this.groupName=this.parent.name)},methods:{change(a){if(this.itemDisabled)return!1;const h=a.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",h),this.group?this.label!==void 0&&this.parent.change({value:this.label,checked:this.modelValue}):(this.$emit("on-change",h),this.handleFormItemChange("change",h))},onBlur(){this.focusWrapper=!1,this.focusInner=!1},onFocus(){this.group&&this.parent.type==="button"?this.focusWrapper=!0:this.focusInner=!0}},watch:{modelValue(a){if(!(a===this.trueValue||a===this.falseValue))throw"Value should be trueValue or falseValue."}}},MG=["disabled","checked","name"];function EG(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("label",{class:t.normalizeClass(v.wrapClasses)},[t.createElementVNode("span",{class:t.normalizeClass(v.radioClasses)},[t.createElementVNode("span",{class:t.normalizeClass(v.innerClasses)},null,2),t.createElementVNode("input",{type:"radio",class:t.normalizeClass(v.inputClasses),disabled:a.itemDisabled,checked:v.currentValue,name:w.groupName,onChange:h[0]||(h[0]=(...A)=>v.change&&v.change(...A)),onFocus:h[1]||(h[1]=(...A)=>v.onFocus&&v.onFocus(...A)),onBlur:h[2]||(h[2]=(...A)=>v.onBlur&&v.onBlur(...A))},null,42,MG)],2),t.renderSlot(a.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(p.label),1)])],2)}var Cy=l(TG,[["render",EG]]),pA={exports:{}};(function(a,h){(function(p,C){a.exports=C()})(J,function(){var p=1e3,C=6e4,w=36e5,v="millisecond",A="second",V="minute",H="hour",X="day",Y="week",le="month",xe="quarter",be="year",ge="date",se="Invalid Date",Ae=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$t=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,mt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Et){var gt=["th","st","nd","rd"],ct=Et%100;return"["+Et+(gt[(ct-20)%10]||gt[ct]||gt[0])+"]"}},xt=function(Et,gt,ct){var It=String(Et);return!It||It.length>=gt?Et:""+Array(gt+1-It.length).join(ct)+Et},He={s:xt,z:function(Et){var gt=-Et.utcOffset(),ct=Math.abs(gt),It=Math.floor(ct/60),bt=ct%60;return(gt<=0?"+":"-")+xt(It,2,"0")+":"+xt(bt,2,"0")},m:function Et(gt,ct){if(gt.date()<ct.date())return-Et(ct,gt);var It=12*(ct.year()-gt.year())+(ct.month()-gt.month()),bt=gt.clone().add(It,le),ei=ct-bt<0,si=gt.clone().add(It+(ei?-1:1),le);return+(-(It+(ct-bt)/(ei?bt-si:si-bt))||0)},a:function(Et){return Et<0?Math.ceil(Et)||0:Math.floor(Et)},p:function(Et){return{M:le,y:be,w:Y,d:X,D:ge,h:H,m:V,s:A,ms:v,Q:xe}[Et]||String(Et||"").toLowerCase().replace(/s$/,"")},u:function(Et){return Et===void 0}},De="en",Ke={};Ke[De]=mt;var Ye="$isDayjsObject",Xt=function(Et){return Et instanceof Rt||!(!Et||!Et[Ye])},Wt=function Et(gt,ct,It){var bt;if(!gt)return De;if(typeof gt=="string"){var ei=gt.toLowerCase();Ke[ei]&&(bt=ei),ct&&(Ke[ei]=ct,bt=ei);var si=gt.split("-");if(!bt&&si.length>1)return Et(si[0])}else{var Qi=gt.name;Ke[Qi]=gt,bt=Qi}return!It&&bt&&(De=bt),bt||!It&&De},Mt=function(Et,gt){if(Xt(Et))return Et.clone();var ct=typeof gt=="object"?gt:{};return ct.date=Et,ct.args=arguments,new Rt(ct)},Ot=He;Ot.l=Wt,Ot.i=Xt,Ot.w=function(Et,gt){return Mt(Et,{locale:gt.$L,utc:gt.$u,x:gt.$x,$offset:gt.$offset})};var Rt=function(){function Et(ct){this.$L=Wt(ct.locale,null,!0),this.parse(ct),this.$x=this.$x||ct.x||{},this[Ye]=!0}var gt=Et.prototype;return gt.parse=function(ct){this.$d=function(It){var bt=It.date,ei=It.utc;if(bt===null)return new Date(NaN);if(Ot.u(bt))return new Date;if(bt instanceof Date)return new Date(bt);if(typeof bt=="string"&&!/Z$/i.test(bt)){var si=bt.match(Ae);if(si){var Qi=si[2]-1||0,ln=(si[7]||"0").substring(0,3);return ei?new Date(Date.UTC(si[1],Qi,si[3]||1,si[4]||0,si[5]||0,si[6]||0,ln)):new Date(si[1],Qi,si[3]||1,si[4]||0,si[5]||0,si[6]||0,ln)}}return new Date(bt)}(ct),this.init()},gt.init=function(){var ct=this.$d;this.$y=ct.getFullYear(),this.$M=ct.getMonth(),this.$D=ct.getDate(),this.$W=ct.getDay(),this.$H=ct.getHours(),this.$m=ct.getMinutes(),this.$s=ct.getSeconds(),this.$ms=ct.getMilliseconds()},gt.$utils=function(){return Ot},gt.isValid=function(){return this.$d.toString()!==se},gt.isSame=function(ct,It){var bt=Mt(ct);return this.startOf(It)<=bt&&bt<=this.endOf(It)},gt.isAfter=function(ct,It){return Mt(ct)<this.startOf(It)},gt.isBefore=function(ct,It){return this.endOf(It)<Mt(ct)},gt.$g=function(ct,It,bt){return Ot.u(ct)?this[It]:this.set(bt,ct)},gt.unix=function(){return Math.floor(this.valueOf()/1e3)},gt.valueOf=function(){return this.$d.getTime()},gt.startOf=function(ct,It){var bt=this,ei=!!Ot.u(It)||It,si=Ot.p(ct),Qi=function(_t,Kt){var Mi=Ot.w(bt.$u?Date.UTC(bt.$y,Kt,_t):new Date(bt.$y,Kt,_t),bt);return ei?Mi:Mi.endOf(X)},ln=function(_t,Kt){return Ot.w(bt.toDate()[_t].apply(bt.toDate("s"),(ei?[0,0,0,0]:[23,59,59,999]).slice(Kt)),bt)},kn=this.$W,An=this.$M,Ar=this.$D,As="set"+(this.$u?"UTC":"");switch(si){case be:return ei?Qi(1,0):Qi(31,11);case le:return ei?Qi(1,An):Qi(0,An+1);case Y:var aa=this.$locale().weekStart||0,la=(kn<aa?kn+7:kn)-aa;return Qi(ei?Ar-la:Ar+(6-la),An);case X:case ge:return ln(As+"Hours",0);case H:return ln(As+"Minutes",1);case V:return ln(As+"Seconds",2);case A:return ln(As+"Milliseconds",3);default:return this.clone()}},gt.endOf=function(ct){return this.startOf(ct,!1)},gt.$set=function(ct,It){var bt,ei=Ot.p(ct),si="set"+(this.$u?"UTC":""),Qi=(bt={},bt[X]=si+"Date",bt[ge]=si+"Date",bt[le]=si+"Month",bt[be]=si+"FullYear",bt[H]=si+"Hours",bt[V]=si+"Minutes",bt[A]=si+"Seconds",bt[v]=si+"Milliseconds",bt)[ei],ln=ei===X?this.$D+(It-this.$W):It;if(ei===le||ei===be){var kn=this.clone().set(ge,1);kn.$d[Qi](ln),kn.init(),this.$d=kn.set(ge,Math.min(this.$D,kn.daysInMonth())).$d}else Qi&&this.$d[Qi](ln);return this.init(),this},gt.set=function(ct,It){return this.clone().$set(ct,It)},gt.get=function(ct){return this[Ot.p(ct)]()},gt.add=function(ct,It){var bt,ei=this;ct=Number(ct);var si=Ot.p(It),Qi=function(An){var Ar=Mt(ei);return Ot.w(Ar.date(Ar.date()+Math.round(An*ct)),ei)};if(si===le)return this.set(le,this.$M+ct);if(si===be)return this.set(be,this.$y+ct);if(si===X)return Qi(1);if(si===Y)return Qi(7);var ln=(bt={},bt[V]=C,bt[H]=w,bt[A]=p,bt)[si]||1,kn=this.$d.getTime()+ct*ln;return Ot.w(kn,this)},gt.subtract=function(ct,It){return this.add(-1*ct,It)},gt.format=function(ct){var It=this,bt=this.$locale();if(!this.isValid())return bt.invalidDate||se;var ei=ct||"YYYY-MM-DDTHH:mm:ssZ",si=Ot.z(this),Qi=this.$H,ln=this.$m,kn=this.$M,An=bt.weekdays,Ar=bt.months,As=bt.meridiem,aa=function(Kt,Mi,Sr,ds){return Kt&&(Kt[Mi]||Kt(It,ei))||Sr[Mi].slice(0,ds)},la=function(Kt){return Ot.s(Qi%12||12,Kt,"0")},_t=As||function(Kt,Mi,Sr){var ds=Kt<12?"AM":"PM";return Sr?ds.toLowerCase():ds};return ei.replace($t,function(Kt,Mi){return Mi||function(Sr){switch(Sr){case"YY":return String(It.$y).slice(-2);case"YYYY":return Ot.s(It.$y,4,"0");case"M":return kn+1;case"MM":return Ot.s(kn+1,2,"0");case"MMM":return aa(bt.monthsShort,kn,Ar,3);case"MMMM":return aa(Ar,kn);case"D":return It.$D;case"DD":return Ot.s(It.$D,2,"0");case"d":return String(It.$W);case"dd":return aa(bt.weekdaysMin,It.$W,An,2);case"ddd":return aa(bt.weekdaysShort,It.$W,An,3);case"dddd":return An[It.$W];case"H":return String(Qi);case"HH":return Ot.s(Qi,2,"0");case"h":return la(1);case"hh":return la(2);case"a":return _t(Qi,ln,!0);case"A":return _t(Qi,ln,!1);case"m":return String(ln);case"mm":return Ot.s(ln,2,"0");case"s":return String(It.$s);case"ss":return Ot.s(It.$s,2,"0");case"SSS":return Ot.s(It.$ms,3,"0");case"Z":return si}return null}(Kt)||si.replace(":","")})},gt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},gt.diff=function(ct,It,bt){var ei,si=this,Qi=Ot.p(It),ln=Mt(ct),kn=(ln.utcOffset()-this.utcOffset())*C,An=this-ln,Ar=function(){return Ot.m(si,ln)};switch(Qi){case be:ei=Ar()/12;break;case le:ei=Ar();break;case xe:ei=Ar()/3;break;case Y:ei=(An-kn)/6048e5;break;case X:ei=(An-kn)/864e5;break;case H:ei=An/w;break;case V:ei=An/C;break;case A:ei=An/p;break;default:ei=An}return bt?ei:Ot.a(ei)},gt.daysInMonth=function(){return this.endOf(le).$D},gt.$locale=function(){return Ke[this.$L]},gt.locale=function(ct,It){if(!ct)return this.$L;var bt=this.clone(),ei=Wt(ct,It,!0);return ei&&(bt.$L=ei),bt},gt.clone=function(){return Ot.w(this.$d,this)},gt.toDate=function(){return new Date(this.valueOf())},gt.toJSON=function(){return this.isValid()?this.toISOString():null},gt.toISOString=function(){return this.$d.toISOString()},gt.toString=function(){return this.$d.toUTCString()},Et}(),Gt=Rt.prototype;return Mt.prototype=Gt,[["$ms",v],["$s",A],["$m",V],["$H",H],["$W",X],["$M",le],["$y",be],["$D",ge]].forEach(function(Et){Gt[Et[1]]=function(gt){return this.$g(gt,Et[0],Et[1])}}),Mt.extend=function(Et,gt){return Et.$i||(Et(gt,Rt,Mt),Et.$i=!0),Mt},Mt.locale=Wt,Mt.isDayjs=Xt,Mt.unix=function(Et){return Mt(1e3*Et)},Mt.en=Ke[De],Mt.Ls=Ke,Mt.p={},Mt})})(pA);var to=pA.exports,mA=1/0,gA=9007199254740991,PG=17976931348623157e292,vA=NaN,AG="[object Function]",RG="[object GeneratorFunction]",IG="[object Symbol]",DG=/^\s+|\s+$/g,NG=/^[-+]0x[0-9a-f]+$/i,$G=/^0b[01]+$/i,VG=/^0o[0-7]+$/i,LG=/^(?:0|[1-9]\d*)$/,BG=parseInt,UG=Object.prototype,yA=UG.toString,FG=Math.ceil,zG=Math.max;function XG(a,h,p){var C=-1,w=a.length;h<0&&(h=-h>w?0:w+h),p=p>w?w:p,p<0&&(p+=w),w=h>p?0:p-h>>>0,h>>>=0;for(var v=Array(w);++C<w;)v[C]=a[C+h];return v}function WG(a,h){return h=h??gA,!!h&&(typeof a=="number"||LG.test(a))&&a>-1&&a%1==0&&a<h}function QG(a,h,p){if(!ky(p))return!1;var C=typeof h;return(C=="number"?YG(p)&&WG(h,p.length):C=="string"&&h in p)?GG(p[h],a):!1}function HG(a,h,p){(p?QG(a,h,p):h===void 0)?h=1:h=zG(eY(h),0);var C=a?a.length:0;if(!C||h<1)return[];for(var w=0,v=0,A=Array(FG(C/h));w<C;)A[v++]=XG(a,w,w+=h);return A}function GG(a,h){return a===h||a!==a&&h!==h}function YG(a){return a!=null&&qG(a.length)&&!jG(a)}function jG(a){var h=ky(a)?yA.call(a):"";return h==AG||h==RG}function qG(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=gA}function ky(a){var h=typeof a;return!!a&&(h=="object"||h=="function")}function ZG(a){return!!a&&typeof a=="object"}function KG(a){return typeof a=="symbol"||ZG(a)&&yA.call(a)==IG}function JG(a){if(!a)return a===0?a:0;if(a=tY(a),a===mA||a===-mA){var h=a<0?-1:1;return h*PG}return a===a?a:0}function eY(a){var h=JG(a),p=h%1;return h===h?p?h-p:h:0}function tY(a){if(typeof a=="number")return a;if(KG(a))return vA;if(ky(a)){var h=typeof a.valueOf=="function"?a.valueOf():a;a=ky(h)?h+"":h}if(typeof a!="string")return a===0?a:+a;a=a.replace(DG,"");var p=$G.test(a);return p||VG.test(a)?BG(a.slice(2),p?2:8):NG.test(a)?vA:+a}var bA=HG,xA={emits:["on-cell-click","on-cell-contextmenu"],methods:{handleCellClick(a){this.CalendarInstance.$emit("on-cell-click",a)},handleCellContextmenu(a){this.CalendarInstance.$emit("on-cell-contextmenu",a)}}};const iY={name:"CalendarMonth",mixins:[xA],inject:["CalendarInstance"],props:{date:Object},data(){return{firstDayOfWeek:this.CalendarInstance.firstDayOfWeek,weekDays:this.CalendarInstance.locale.weekDays}},computed:{finalWeekDays(){return this.weekDays.slice(this.firstDayOfWeek).concat(this.weekDays.slice(0,this.firstDayOfWeek))},days(){let a=[];const h=to(this.date.format("YYYY-MM-01")),p=h.day(),C=this.firstDayOfWeek,w=C<=p?p-C:7-(C-p);for(let H=0;H<w;H++){const X=h.subtract(w-H,"day"),Y={text:X.format("YYYY-MM-DD"),date:X.format("D"),type:"prev"};a.push(Y)}const v=h.daysInMonth();for(let H=0;H<v;H++){const X=h.add(H,"day"),Y={text:X.format("YYYY-MM-DD"),date:X.format("D"),type:"current"};a.push(Y)}const A=42-a.length,V=h.add(1,"month");for(let H=0;H<A;H++){const X=V.add(H,"day"),Y={text:X.format("YYYY-MM-DD"),date:X.format("D"),type:"next"};a.push(Y)}return a},chunkDays(){return bA(this.days,7)},dayStyles(){let a={};return this.CalendarInstance.cellHeight!==100&&(a.height=`${this.CalendarInstance.cellHeight}px`),a},currentDate(){return this.date.format("YYYY-MM-DD")}},methods:{handleClickDate(a){this.CalendarInstance.handleChangeDate(to(a))}}},nY={class:"ivu-calendar-table",cellspacing:"0",cellpadding:"0"},rY=["onClick","onContextmenu"],sY=["onClick"],oY={class:"ivu-calendar-table-day-title"},aY={class:"ivu-calendar-table-day-slot"};function lY(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("table",nY,[t.createElementVNode("thead",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.finalWeekDays,A=>(t.openBlock(),t.createElementBlock("th",{key:A},t.toDisplayString(A),1))),128))]),t.createElementVNode("tbody",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.chunkDays,(A,V)=>(t.openBlock(),t.createElementBlock("tr",{key:V},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(A,H=>(t.openBlock(),t.createElementBlock("td",{key:H.text,onClick:X=>a.handleCellClick(H),onContextmenu:t.withModifiers(X=>a.handleCellContextmenu(H),["prevent"])},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-other":H.type!=="current","ivu-calendar-table-day-current":H.text===v.currentDate}]),style:t.normalizeStyle(v.dayStyles),onClick:X=>v.handleClickDate(H.text)},[t.createElementVNode("div",oY,t.toDisplayString(H.date),1),t.createElementVNode("div",aY,[t.renderSlot(a.$slots,"month",{date:new Date(H.date),data:{type:H.type+"-month",day:H.text,selected:H.text===v.currentDate}})])],14,sY)],40,rY))),128))]))),128))])])}var cY=l(iY,[["render",lY]]);const hY={name:"CalendarYear",mixins:[xA],inject:["CalendarInstance"],props:{date:Object},data(){return{}},computed:{months(){let a=[];const h=to(this.date.format("YYYY-01-01"));for(let p=0;p<12;p++){const C=h.add(p,"month");a.push({text:C.format("YYYY-MM"),month:this.CalendarInstance.locale.months[p],type:"current"})}return a},chunkMonths(){return bA(this.months,3)},dayStyles(){let a={};return this.CalendarInstance.cellHeight!==100&&(a.height=`${this.CalendarInstance.cellHeight}px`),a},currentMonth(){return this.date.format("YYYY-MM")}},methods:{handleClickDate(a){this.CalendarInstance.handleChangeDate(to(a))}}},uY={class:"ivu-calendar-table ivu-calendar-table-year",cellspacing:"0",cellpadding:"0"},dY=["onClick","onContextmenu"],fY=["onClick"],pY={class:"ivu-calendar-table-day-title"},mY={class:"ivu-calendar-table-day-slot"};function gY(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("table",uY,[t.createElementVNode("tbody",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.chunkMonths,(A,V)=>(t.openBlock(),t.createElementBlock("tr",{key:V},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(A,H=>(t.openBlock(),t.createElementBlock("td",{key:H.text,onClick:X=>a.handleCellClick(H),onContextmenu:t.withModifiers(X=>a.handleCellContextmenu(H),["prevent"])},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-current":H.text===v.currentMonth}]),style:t.normalizeStyle(v.dayStyles),onClick:X=>v.handleClickDate(H.text)},[t.createElementVNode("div",pY,t.toDisplayString(H.month),1),t.createElementVNode("div",mY,[t.renderSlot(a.$slots,"year",{month:new Date(H.month),data:{type:H.type+"-year",month:H.text,selected:H.text===v.currentMonth}})])],14,fY)],40,dY))),128))]))),128))])])}var vY=l(hY,[["render",gY]]);const yY={name:"Calendar",components:{CalendarMonth:cY,CalendarYear:vY,ButtonGroup:I_,Button:cs,RadioGroup:Sy,Radio:Cy,Icon:S},emits:["on-type-change","on-prev","on-next","on-today","on-change","update:modelValue","on-cell-click","on-cell-contextmenu"],provide(){return{CalendarInstance:this}},props:{modelValue:{type:[Date,String,Number]},type:{validator(a){return _(a,["month","year"])},default:"month"},cellHeight:{type:Number,default:100},showHeader:{type:Boolean,default:!0},headerType:{validator(a){return _(a,["simple","full"])},default:"simple"},firstDayOfWeek:{validator(a){return _(a,[1,2,3,4,5,6,7])},default:1},hideType:{type:Boolean,default:!1},locale:{type:Object,default(){return{today:"",type:{month:"",year:""},weekDays:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"]}}}},data(){const a=this.modelValue?this.modelValue:new Date;return{currentValue:to(a),mode:this.type}},watch:{modelValue(a){const h=a||new Date;this.currentValue=to(h)},type(a){this.mode=a}},computed:{headerTitle(){if(this.mode==="month")return this.currentValue.format("YYYY  M ");if(this.mode==="year")return this.currentValue.format("YYYY ")}},methods:{handleChangeType(a){this.$emit("on-type-change",a)},handlePrev(){const a=this.currentValue.format("YYYY-MM-01");let h;this.mode==="month"?h=to(a).subtract(1,"month"):this.mode==="year"&&(h=to(a).subtract(1,"year")),this.handleChangeDate(h),this.$emit("on-prev")},handleNext(){const a=this.currentValue.format("YYYY-MM-01");let h;this.mode==="month"?h=to(a).add(1,"month"):this.mode==="year"&&(h=to(a).add(1,"year")),this.handleChangeDate(h),this.$emit("on-next")},handleToday(){const a=to(new Date),h=a.format("YYYY-MM-DD"),p=this.currentValue.format("YYYY-MM-DD");h!==p&&this.handleChangeDate(a),this.$emit("on-today")},handleChangeDate(a){this.currentValue=a;const h=new Date(a.format("YYYY-MM-DD"));this.$emit("update:modelValue",h),this.$emit("on-change",h)}}},bY={class:"ivu-calendar"},xY={key:0,class:"ivu-calendar-header"},OY={class:"ivu-calendar-header-title"},wY={class:"ivu-calendar-header-action"},_Y={class:"ivu-calendar-body"};function SY(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Button"),H=t.resolveComponent("ButtonGroup"),X=t.resolveComponent("Radio"),Y=t.resolveComponent("RadioGroup"),le=t.resolveComponent("CalendarMonth"),xe=t.resolveComponent("CalendarYear");return t.openBlock(),t.createElementBlock("div",bY,[p.showHeader?(t.openBlock(),t.createElementBlock("div",xY,[t.renderSlot(a.$slots,"header",{},()=>[t.createElementVNode("div",OY,[t.renderSlot(a.$slots,"headerTitle",{},()=>[t.createTextVNode(t.toDisplayString(v.headerTitle),1)])]),t.createElementVNode("div",wY,[p.headerType==="simple"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(H,null,{default:t.withCtx(()=>[t.createVNode(V,{onClick:v.handlePrev},{default:t.withCtx(()=>[t.createVNode(A,{type:"ios-arrow-back"})]),_:1},8,["onClick"]),t.createVNode(V,{onClick:v.handleToday},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.locale.today),1)]),_:1},8,["onClick"]),t.createVNode(V,{onClick:v.handleNext},{default:t.withCtx(()=>[t.createVNode(A,{type:"ios-arrow-forward"})]),_:1},8,["onClick"])]),_:1}),p.hideType?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(Y,{key:0,modelValue:w.mode,"onUpdate:modelValue":h[0]||(h[0]=be=>w.mode=be),type:"button",class:"ivu-ml",onOnChange:v.handleChangeType},{default:t.withCtx(()=>[t.createVNode(X,{label:"month"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.locale.type.month),1)]),_:1}),t.createVNode(X,{label:"year"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.locale.type.year),1)]),_:1})]),_:1},8,["modelValue","onOnChange"]))],64)):p.headerType==="full"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[],64)):t.createCommentVNode("",!0)])])])):t.createCommentVNode("",!0),t.createElementVNode("div",_Y,[w.mode==="month"?(t.openBlock(),t.createBlock(le,{key:0,date:w.currentValue},{month:t.withCtx(({date:be,data:ge})=>[t.renderSlot(a.$slots,"month",{date:be,data:ge})]),_:3},8,["date"])):w.mode==="year"?(t.openBlock(),t.createBlock(xe,{key:1,date:w.currentValue},{year:t.withCtx(({month:be,data:ge})=>[t.renderSlot(a.$slots,"year",{month:be,data:ge})]),_:3},8,["date"])):t.createCommentVNode("",!0)])])}var OA=l(yY,[["render",SY]]);const yl="ivu-col";function CY(a){return typeof a=="number"?`${a} ${a} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(a)?`0 0 ${a}`:a}const kY={name:"iCol",inject:["RowInstance"],props:{span:[Number,String],order:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],className:String,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object],xxl:[Number,Object],flex:{type:[Number,String],default:""}},computed:{gutter(){return this.RowInstance.gutter},classes(){let a=[`${yl}`,{[`${yl}-span-${this.span}`]:this.span,[`${yl}-order-${this.order}`]:this.order,[`${yl}-offset-${this.offset}`]:this.offset,[`${yl}-push-${this.push}`]:this.push,[`${yl}-pull-${this.pull}`]:this.pull,[`${this.className}`]:!!this.className}];return["xs","sm","md","lg","xl","xxl"].forEach(h=>{if(typeof this[h]=="number")a.push(`${yl}-span-${h}-${this[h]}`);else if(typeof this[h]=="object"){let p=this[h];Object.keys(p).forEach(C=>{a.push(C!=="span"?`${yl}-${h}-${C}-${p[C]}`:`${yl}-span-${h}-${p[C]}`)})}}),a},styles(){let a={};return this.gutter!==0&&(a={paddingLeft:this.gutter/2+"px",paddingRight:this.gutter/2+"px"}),this.flex&&(a.flex=CY(this.flex)),a}}};function TY(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.styles)},[t.renderSlot(a.$slots,"default")],6)}var Na=l(kY,[["render",TY]]);const Hh="ivu-row",MY={name:"Row",provide(){return{RowInstance:this}},props:{type:{validator(a){return _(a,["flex"])}},align:{validator(a){return _(a,["top","middle","bottom"])}},justify:{validator(a){return _(a,["start","end","center","space-around","space-between"])}},gutter:{type:Number,default:0},className:String,wrap:{type:Boolean,default:!0}},computed:{classes(){return[`${Hh}`,{[`${Hh}-${this.type}`]:!!this.type,[`${Hh}-${this.type}-${this.align}`]:!!this.align&&this.type,[`${Hh}-${this.type}-${this.justify}`]:!!this.justify&&this.type,[`${Hh}-${this.align}`]:!!this.align,[`${Hh}-${this.justify}`]:!!this.justify,[`${this.className}`]:!!this.className,[`${Hh}-no-wrap`]:!this.wrap}]},styles(){let a={};return this.gutter!==0&&(a={marginLeft:this.gutter/-2+"px",marginRight:this.gutter/-2+"px"}),a}}};function EY(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.styles)},[t.renderSlot(a.$slots,"default")],6)}var vc=l(MY,[["render",EY]]);function Gh(){return Gh=Object.assign||function(a){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(a[C]=p[C])}return a},Gh.apply(this,arguments)}function PY(a,h){a.prototype=Object.create(h.prototype),a.prototype.constructor=a,am(a,h)}function D_(a){return D_=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)},D_(a)}function am(a,h){return am=Object.setPrototypeOf||function(p,C){return p.__proto__=C,p},am(a,h)}function AY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ty(a,h,p){return AY()?Ty=Reflect.construct:Ty=function(C,w,v){var A=[null];A.push.apply(A,w);var V=Function.bind.apply(C,A),H=new V;return v&&am(H,v.prototype),H},Ty.apply(null,arguments)}function RY(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function N_(a){var h=typeof Map=="function"?new Map:void 0;return N_=function(p){if(p===null||!RY(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(typeof h<"u"){if(h.has(p))return h.get(p);h.set(p,C)}function C(){return Ty(p,arguments,D_(this).constructor)}return C.prototype=Object.create(p.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),am(C,p)},N_(a)}var IY=/%[sdj%]/g,DY=function(){};function $_(a){if(!a||!a.length)return null;var h={};return a.forEach(function(p){var C=p.field;h[C]=h[C]||[],h[C].push(p)}),h}function io(){for(var a=arguments.length,h=new Array(a),p=0;p<a;p++)h[p]=arguments[p];var C=1,w=h[0],v=h.length;if(typeof w=="function")return w.apply(null,h.slice(1));if(typeof w=="string"){var A=String(w).replace(IY,function(V){if(V==="%%")return"%";if(C>=v)return V;switch(V){case"%s":return String(h[C++]);case"%d":return Number(h[C++]);case"%j":try{return JSON.stringify(h[C++])}catch{return"[Circular]"}break;default:return V}});return A}return w}function NY(a){return a==="string"||a==="url"||a==="hex"||a==="email"||a==="date"||a==="pattern"}function cr(a,h){return!!(a==null||h==="array"&&Array.isArray(a)&&!a.length||NY(h)&&typeof a=="string"&&!a)}function $Y(a,h,p){var C=[],w=0,v=a.length;function A(V){C.push.apply(C,V),w++,w===v&&p(C)}a.forEach(function(V){h(V,A)})}function wA(a,h,p){var C=0,w=a.length;function v(A){if(A&&A.length){p(A);return}var V=C;C=C+1,V<w?h(a[V],v):p([])}v([])}function VY(a){var h=[];return Object.keys(a).forEach(function(p){h.push.apply(h,a[p])}),h}var _A=function(a){PY(h,a);function h(p,C){var w;return w=a.call(this,"Async Validation Error")||this,w.errors=p,w.fields=C,w}return h}(N_(Error));function LY(a,h,p,C){if(h.first){var w=new Promise(function(le,xe){var be=function(se){return C(se),se.length?xe(new _A(se,$_(se))):le()},ge=VY(a);wA(ge,p,be)});return w.catch(function(le){return le}),w}var v=h.firstFields||[];v===!0&&(v=Object.keys(a));var A=Object.keys(a),V=A.length,H=0,X=[],Y=new Promise(function(le,xe){var be=function(ge){if(X.push.apply(X,ge),H++,H===V)return C(X),X.length?xe(new _A(X,$_(X))):le()};A.length||(C(X),le()),A.forEach(function(ge){var se=a[ge];v.indexOf(ge)!==-1?wA(se,p,be):$Y(se,p,be)})});return Y.catch(function(le){return le}),Y}function SA(a){return function(h){return h&&h.message?(h.field=h.field||a.fullField,h):{message:typeof h=="function"?h():h,field:h.field||a.fullField}}}function CA(a,h){if(h){for(var p in h)if(h.hasOwnProperty(p)){var C=h[p];typeof C=="object"&&typeof a[p]=="object"?a[p]=Gh({},a[p],C):a[p]=C}}return a}function kA(a,h,p,C,w,v){a.required&&(!p.hasOwnProperty(a.field)||cr(h,v||a.type))&&C.push(io(w.messages.required,a.fullField))}function BY(a,h,p,C,w){(/^\s+$/.test(h)||h==="")&&C.push(io(w.messages.whitespace,a.fullField))}var V_={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},lm={integer:function(a){return lm.number(a)&&parseInt(a,10)===a},float:function(a){return lm.number(a)&&!lm.integer(a)},array:function(a){return Array.isArray(a)},regexp:function(a){if(a instanceof RegExp)return!0;try{return!!new RegExp(a)}catch{return!1}},date:function(a){return typeof a.getTime=="function"&&typeof a.getMonth=="function"&&typeof a.getYear=="function"&&!isNaN(a.getTime())},number:function(a){return isNaN(a)?!1:typeof a=="number"},object:function(a){return typeof a=="object"&&!lm.array(a)},method:function(a){return typeof a=="function"},email:function(a){return typeof a=="string"&&!!a.match(V_.email)&&a.length<255},url:function(a){return typeof a=="string"&&!!a.match(V_.url)},hex:function(a){return typeof a=="string"&&!!a.match(V_.hex)}};function UY(a,h,p,C,w){if(a.required&&h===void 0){kA(a,h,p,C,w);return}var v=["integer","float","array","regexp","object","method","email","number","date","url","hex"],A=a.type;v.indexOf(A)>-1?lm[A](h)||C.push(io(w.messages.types[A],a.fullField,a.type)):A&&typeof h!==a.type&&C.push(io(w.messages.types[A],a.fullField,a.type))}function FY(a,h,p,C,w){var v=typeof a.len=="number",A=typeof a.min=="number",V=typeof a.max=="number",H=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,X=h,Y=null,le=typeof h=="number",xe=typeof h=="string",be=Array.isArray(h);if(le?Y="number":xe?Y="string":be&&(Y="array"),!Y)return!1;be&&(X=h.length),xe&&(X=h.replace(H,"_").length),v?X!==a.len&&C.push(io(w.messages[Y].len,a.fullField,a.len)):A&&!V&&X<a.min?C.push(io(w.messages[Y].min,a.fullField,a.min)):V&&!A&&X>a.max?C.push(io(w.messages[Y].max,a.fullField,a.max)):A&&V&&(X<a.min||X>a.max)&&C.push(io(w.messages[Y].range,a.fullField,a.min,a.max))}var Md="enum";function zY(a,h,p,C,w){a[Md]=Array.isArray(a[Md])?a[Md]:[],a[Md].indexOf(h)===-1&&C.push(io(w.messages[Md],a.fullField,a[Md].join(", ")))}function XY(a,h,p,C,w){if(a.pattern){if(a.pattern instanceof RegExp)a.pattern.lastIndex=0,a.pattern.test(h)||C.push(io(w.messages.pattern.mismatch,a.fullField,h,a.pattern));else if(typeof a.pattern=="string"){var v=new RegExp(a.pattern);v.test(h)||C.push(io(w.messages.pattern.mismatch,a.fullField,h,a.pattern))}}}var Ti={required:kA,whitespace:BY,type:UY,range:FY,enum:zY,pattern:XY};function WY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h,"string")&&!a.required)return p();Ti.required(a,h,C,v,w,"string"),cr(h,"string")||(Ti.type(a,h,C,v,w),Ti.range(a,h,C,v,w),Ti.pattern(a,h,C,v,w),a.whitespace===!0&&Ti.whitespace(a,h,C,v,w))}p(v)}function QY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),h!==void 0&&Ti.type(a,h,C,v,w)}p(v)}function HY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(h===""&&(h=void 0),cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),h!==void 0&&(Ti.type(a,h,C,v,w),Ti.range(a,h,C,v,w))}p(v)}function GY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),h!==void 0&&Ti.type(a,h,C,v,w)}p(v)}function YY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),cr(h)||Ti.type(a,h,C,v,w)}p(v)}function jY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),h!==void 0&&(Ti.type(a,h,C,v,w),Ti.range(a,h,C,v,w))}p(v)}function qY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),h!==void 0&&(Ti.type(a,h,C,v,w),Ti.range(a,h,C,v,w))}p(v)}function ZY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(h==null&&!a.required)return p();Ti.required(a,h,C,v,w,"array"),h!=null&&(Ti.type(a,h,C,v,w),Ti.range(a,h,C,v,w))}p(v)}function KY(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),h!==void 0&&Ti.type(a,h,C,v,w)}p(v)}var JY="enum";function ej(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w),h!==void 0&&Ti[JY](a,h,C,v,w)}p(v)}function tj(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h,"string")&&!a.required)return p();Ti.required(a,h,C,v,w),cr(h,"string")||Ti.pattern(a,h,C,v,w)}p(v)}function ij(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h,"date")&&!a.required)return p();if(Ti.required(a,h,C,v,w),!cr(h,"date")){var V;h instanceof Date?V=h:V=new Date(h),Ti.type(a,V,C,v,w),V&&Ti.range(a,V.getTime(),C,v,w)}}p(v)}function nj(a,h,p,C,w){var v=[],A=Array.isArray(h)?"array":typeof h;Ti.required(a,h,C,v,w,A),p(v)}function L_(a,h,p,C,w){var v=a.type,A=[],V=a.required||!a.required&&C.hasOwnProperty(a.field);if(V){if(cr(h,v)&&!a.required)return p();Ti.required(a,h,C,A,w,v),cr(h,v)||Ti.type(a,h,C,A,w)}p(A)}function rj(a,h,p,C,w){var v=[],A=a.required||!a.required&&C.hasOwnProperty(a.field);if(A){if(cr(h)&&!a.required)return p();Ti.required(a,h,C,v,w)}p(v)}var cm={string:WY,method:QY,number:HY,boolean:GY,regexp:YY,integer:jY,float:qY,array:ZY,object:KY,enum:ej,pattern:tj,date:ij,url:L_,hex:L_,email:L_,required:nj,any:rj};function B_(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var a=JSON.parse(JSON.stringify(this));return a.clone=this.clone,a}}}var U_=B_();function yc(a){this.rules=null,this._messages=U_,this.define(a)}yc.prototype={messages:function(a){return a&&(this._messages=CA(B_(),a)),this._messages},define:function(a){if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={};var h,p;for(h in a)a.hasOwnProperty(h)&&(p=a[h],this.rules[h]=Array.isArray(p)?p:[p])},validate:function(a,h,p){var C=this;h===void 0&&(h={}),p===void 0&&(p=function(){});var w=a,v=h,A=p;if(typeof v=="function"&&(A=v,v={}),!this.rules||Object.keys(this.rules).length===0)return A&&A(),Promise.resolve();function V(ge){var se,Ae=[],$t={};function mt(xt){if(Array.isArray(xt)){var He;Ae=(He=Ae).concat.apply(He,xt)}else Ae.push(xt)}for(se=0;se<ge.length;se++)mt(ge[se]);Ae.length?$t=$_(Ae):(Ae=null,$t=null),A(Ae,$t)}if(v.messages){var H=this.messages();H===U_&&(H=B_()),CA(H,v.messages),v.messages=H}else v.messages=this.messages();var X,Y,le={},xe=v.keys||Object.keys(this.rules);xe.forEach(function(ge){X=C.rules[ge],Y=w[ge],X.forEach(function(se){var Ae=se;typeof Ae.transform=="function"&&(w===a&&(w=Gh({},w)),Y=w[ge]=Ae.transform(Y)),typeof Ae=="function"?Ae={validator:Ae}:Ae=Gh({},Ae),Ae.validator=C.getValidationMethod(Ae),Ae.field=ge,Ae.fullField=Ae.fullField||ge,Ae.type=C.getType(Ae),Ae.validator&&(le[ge]=le[ge]||[],le[ge].push({rule:Ae,value:Y,source:w,field:ge}))})});var be={};return LY(le,v,function(ge,se){var Ae=ge.rule,$t=(Ae.type==="object"||Ae.type==="array")&&(typeof Ae.fields=="object"||typeof Ae.defaultField=="object");$t=$t&&(Ae.required||!Ae.required&&ge.value),Ae.field=ge.field;function mt(De,Ke){return Gh({},Ke,{fullField:Ae.fullField+"."+De})}function xt(De){De===void 0&&(De=[]);var Ke=De;if(Array.isArray(Ke)||(Ke=[Ke]),!v.suppressWarning&&Ke.length&&yc.warning("async-validator:",Ke),Ke.length&&Ae.message!==void 0&&(Ke=[].concat(Ae.message)),Ke=Ke.map(SA(Ae)),v.first&&Ke.length)return be[Ae.field]=1,se(Ke);if(!$t)se(Ke);else{if(Ae.required&&!ge.value)return Ae.message!==void 0?Ke=[].concat(Ae.message).map(SA(Ae)):v.error&&(Ke=[v.error(Ae,io(v.messages.required,Ae.field))]),se(Ke);var Ye={};if(Ae.defaultField)for(var Xt in ge.value)ge.value.hasOwnProperty(Xt)&&(Ye[Xt]=Ae.defaultField);Ye=Gh({},Ye,ge.rule.fields);for(var Wt in Ye)if(Ye.hasOwnProperty(Wt)){var Mt=Array.isArray(Ye[Wt])?Ye[Wt]:[Ye[Wt]];Ye[Wt]=Mt.map(mt.bind(null,Wt))}var Ot=new yc(Ye);Ot.messages(v.messages),ge.rule.options&&(ge.rule.options.messages=v.messages,ge.rule.options.error=v.error),Ot.validate(ge.value,ge.rule.options||v,function(Rt){var Gt=[];Ke&&Ke.length&&Gt.push.apply(Gt,Ke),Rt&&Rt.length&&Gt.push.apply(Gt,Rt),se(Gt.length?Gt:null)})}}var He;Ae.asyncValidator?He=Ae.asyncValidator(Ae,ge.value,xt,ge.source,v):Ae.validator&&(He=Ae.validator(Ae,ge.value,xt,ge.source,v),He===!0?xt():He===!1?xt(Ae.message||Ae.field+" fails"):He instanceof Array?xt(He):He instanceof Error&&xt(He.message)),He&&He.then&&He.then(function(){return xt()},function(De){return xt(De)})},function(ge){V(ge)})},getType:function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!cm.hasOwnProperty(a.type))throw new Error(io("Unknown rule type %s",a.type));return a.type||"string"},getValidationMethod:function(a){if(typeof a.validator=="function")return a.validator;var h=Object.keys(a),p=h.indexOf("message");return p!==-1&&h.splice(p,1),h.length===1&&h[0]==="required"?cm.required:cm[this.getType(a)]||!1}},yc.register=function(a,h){if(typeof h!="function")throw new Error("Cannot register a validator by type, validator is not a function");cm[a]=h},yc.warning=DY,yc.messages=U_,yc.validators=cm;const hm="ivu-form-item";function TA(a,h){let p=a;h=h.replace(/\[(\w+)\]/g,".$1"),h=h.replace(/^\./,"");let C=h.split("."),w=0;for(let v=C.length;w<v-1;++w){let A=C[w];if(A in p)p=p[A];else throw new Error("[View UI warn]: please transfer a valid prop path to form item!")}return{o:p,k:C[w],v:p[C[w]]}}const sj={name:"FormItem",inject:["FormInstance"],provide(){return{FormItemInstance:this}},props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0},labelFor:{type:String}},data(){return{prefixCls:hm,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:{handler(a){this.validateMessage=a,this.validateState=a?"error":""},immediate:!0},validateStatus(a){this.validateState=a},rules(){this.setRules()},required(a,h){this.isRequired=a,h&&!a&&this.resetField()}},computed:{classes(){return[`${hm}`,{[`${hm}-required`]:this.required||this.isRequired,[`${hm}-error`]:this.validateState==="error",[`${hm}-validating`]:this.validateState==="validating"}]},fieldValue(){const a=this.FormInstance.model;if(!a||!this.prop)return;let h=this.prop;return h.indexOf(":")!==-1&&(h=h.replace(/:/,".")),TA(a,h).v},labelStyles(){let a={};const h=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(h||h===0)&&(a.width=`${h}px`),a},contentStyles(){let a={};const h=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(h||h===0)&&(a.marginLeft=`${h}px`),a}},methods:{setRules(){let a=this.getRules();a.length&&this.required||(a.length?a.every(h=>{this.isRequired=h.required}):this.required&&(this.isRequired=this.required))},getRules(){let a=this.FormInstance.rules;const h=this.rules;return a=a?a[this.prop]:[],[].concat(h||a||[])},getFilteredRule(a){return this.getRules().filter(h=>!h.trigger||h.trigger.indexOf(a)!==-1)},validate(a,h=function(){}){let p=this.getFilteredRule(a);if(!p||p.length===0)if(this.required)p=[{required:!0}];else return h(),!0;this.validateState="validating";let C={};C[this.prop]=p;const w=new yc(C);let v={};v[this.prop]=this.fieldValue,w.validate(v,{firstFields:!0},A=>{this.validateState=A?"error":"success",this.validateMessage=A?A[0].message:"",h(this.validateMessage),this.FormInstance&&this.FormInstance.$emit("on-validate",this.prop,!A,this.validateMessage||null)}),this.validateDisabled=!1},resetField(){this.validateState="",this.validateMessage="";let a=this.FormInstance.model,h=this.fieldValue,p=this.prop;p.indexOf(":")!==-1&&(p=p.replace(/:/,"."));let C=TA(a,p);Array.isArray(h)&&this.initialValue!==null?(this.validateDisabled=!0,C.o[C.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,C.o[C.k]=this.initialValue)},onFieldBlur(){this.validate("blur")},onFieldChange(){if(this.validateDisabled){this.validateDisabled=!1;return}this.validate("change")},formBlur(){this.onFieldBlur()},formChange(){this.onFieldChange()}},mounted(){this.prop&&(this.FormInstance.addField(this),Object.defineProperty(this,"initialValue",{value:this.fieldValue}),this.setRules())},beforeUnmount(){this.FormInstance.removeField(this)}},oj=["for"];function aj(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[p.label||a.$slots.label?(t.openBlock(),t.createElementBlock("label",{key:0,class:t.normalizeClass([w.prefixCls+"-label"]),for:p.labelFor,style:t.normalizeStyle(v.labelStyles)},[t.renderSlot(a.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(p.label)+t.toDisplayString(v.FormInstance.colon),1)])],14,oj)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content"]),style:t.normalizeStyle(v.contentStyles)},[t.renderSlot(a.$slots,"default"),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[w.validateState==="error"&&p.showMessage&&v.FormInstance.showMessage?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-error-tip"])},t.toDisplayString(w.validateMessage),3)):t.createCommentVNode("",!0)]),_:1})],6)],2)}var My=l(sj,[["render",aj]]),F_={UserName:"",Password:"",Email:"",Mobile:"",Captcha:""},um={inject:["LoginInstance"],emits:["on-change"],props:{rules:{type:[Object,Array],default(){const a=t.getCurrentInstance().type.name;return[{required:!0,message:F_[a],trigger:"change"}]}},value:{type:String},name:{type:String,required:!0},enterToSubmit:{type:Boolean,default:!1}},data(){return{prop:""}},methods:{handleChange(a){this.LoginInstance.formValidate[this.prop]=a,this.$emit("on-change",a)},handleEnter(){this.enterToSubmit&&this.LoginInstance.handleSubmit()},handleSetValue(){const a=this.$props;a.value&&(this.LoginInstance.formValidate[this.prop]=a.value)},handleGetProps(){let a=this.$props.name;const h={prefix:this.prefix,placeholder:this.placeholder,type:this.type,size:"large",modelValue:this.LoginInstance.formValidate[this.prop]};return a&&(h.name=a),Object.assign(h,this.$attrs)}},render(){const a=this.handleGetProps(),h=t.h(Ao,{...a,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),p=t.h(My,{prop:this.prop,rules:this.rules},()=>[h]);return t.h("div",{class:this.className},[p])},created(){const a=this.name,h=Object.assign({},this.LoginInstance.formValidate);h[a]="",this.LoginInstance.formValidate=h,this.prop=a,this.handleSetValue()}};const MA={name:"Captcha",mixins:[um],emits:["on-get-captcha"],props:{field:{type:[String,Array]},countDown:{type:Number,default:60},text:{type:String},unitText:{type:String,default:""},beforeClick:Function},data(){return{className:"ivu-login-captcha",prefix:"ios-keypad-outline",placeholder:"",type:"text",buttonDisabled:!1,limitCountDown:0}},methods:{handleClickCaptcha(){if(this.field){const a=typeof this.field=="string"?[this.field]:this.field;this.LoginInstance.handleValidate(a,h=>{h&&this.handleBeforeGetCaptcha()})}else this.handleBeforeGetCaptcha()},handleBeforeGetCaptcha(){if(!this.beforeClick)return this.handleGetCaptcha();const a=this.beforeClick();a&&a.then?a.then(()=>{this.handleGetCaptcha()}):this.handleGetCaptcha()},handleGetCaptcha(){this.countDown>0&&(this.buttonDisabled=!0,this.limitCountDown=this.countDown,this.handleCountDown()),this.$emit("on-get-captcha",this.LoginInstance.formValidate[this.prop],JSON.parse(JSON.stringify(this.LoginInstance.formValidate)))},handleCountDown(){this.timer=setTimeout(()=>{this.limitCountDown--,this.limitCountDown===0?(this.buttonDisabled=!1,clearTimeout(this.timer)):this.handleCountDown()},1e3)}},render(){const a=this.$attrs,h=this.handleGetProps(),p={size:"large",type:"default",long:!0,disabled:this.buttonDisabled};"size"in a&&(p.size=a.size),"button-type"in a&&(p.type=a["button-type"]);let C;this.$slots.text?C=this.$slots.text:this.limitCountDown!==0?C=()=>`${this.limitCountDown} ${this.unitText}`:this.text?C=()=>this.text:C=()=>"";const w=t.h(cs,{...p,onClick:this.handleClickCaptcha},C),v=t.h(Ao,{...h,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),A=t.h(Na,{span:16},()=>[v]),V=t.h(Na,{span:8},()=>[w]),H=t.h(vc,{gutter:8},()=>[A,V]),X=t.h(My,{prop:this.prop,rules:this.rules},()=>[H]);return t.h("div",{class:this.className},[X])},beforeUnmount(){this.timer&&clearTimeout(this.timer)}},Yh="ivu-card",EA=16,lj={name:"Card",mixins:[fe],components:{Icon:S},props:{bordered:{type:Boolean,default:!0},disHover:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},padding:{type:Number,default:EA},title:{type:String},icon:{type:String}},data(){return{showHead:!0,showExtra:!0}},computed:{classes(){return[`${Yh}`,{[`${Yh}-bordered`]:this.bordered&&!this.shadow,[`${Yh}-dis-hover`]:this.disHover||this.shadow,[`${Yh}-shadow`]:this.shadow}]},headClasses(){return`${Yh}-head`},extraClasses(){return`${Yh}-extra`},bodyClasses(){return`${Yh}-body`},bodyStyles(){return this.padding!==EA?{padding:`${this.padding}px`}:""},isHrefPattern(){const{to:a}=this;return!!a},tagName(){const{isHrefPattern:a}=this;return a?"a":"div"},tagProps(){const{isHrefPattern:a}=this;if(a){const{linkUrl:h,target:p}=this;return{href:h,target:p}}else return{}}},methods:{handleClickLink(a){if(!this.isHrefPattern)return;const h=a.ctrlKey||a.metaKey;this.handleCheckClick(a,h)}},mounted(){this.showHead=this.title||this.$slots.title!==void 0,this.showExtra=this.$slots.extra!==void 0}},cj={key:0};function hj(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.resolveDynamicComponent(v.tagName),t.mergeProps({class:v.classes},v.tagProps,{onClick:v.handleClickLink}),{default:t.withCtx(()=>[w.showHead?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.headClasses)},[t.renderSlot(a.$slots,"title",{},()=>[p.title?(t.openBlock(),t.createElementBlock("p",cj,[p.icon?(t.openBlock(),t.createBlock(A,{key:0,type:p.icon},null,8,["type"])):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(p.title),1)])):t.createCommentVNode("",!0)])],2)):t.createCommentVNode("",!0),w.showExtra?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(v.extraClasses)},[t.renderSlot(a.$slots,"extra")],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(v.bodyClasses),style:t.normalizeStyle(v.bodyStyles)},[t.renderSlot(a.$slots,"default")],6)]),_:3},16,["class","onClick"])}var PA=l(lj,[["render",hj]]);const Ed="ivu-carousel",uj={name:"Carousel",provide(){return{CarouselInstance:this}},components:{Icon:S},emits:["on-change","on-click","update:modelValue"],props:{arrow:{type:String,default:"hover",validator(a){return _(a,["hover","always","never"])}},autoplay:{type:Boolean,default:!1},autoplaySpeed:{type:Number,default:2e3},loop:{type:Boolean,default:!1},easing:{type:String,default:"ease"},dots:{type:String,default:"inside",validator(a){return _(a,["inside","outside","none"])}},radiusDot:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator(a){return _(a,["click","hover"])}},modelValue:{type:Number,default:0},height:{type:[String,Number],default:"auto",validator(a){return a==="auto"||Object.prototype.toString.call(a)==="[object Number]"}}},data(){return{prefixCls:Ed,listWidth:0,trackWidth:0,trackOffset:0,trackCopyOffset:0,showCopyTrack:!1,slides:[],slideInstances:[],timer:null,ready:!1,currentIndex:this.modelValue,trackIndex:this.modelValue,copyTrackIndex:this.modelValue,hideTrackPos:-1,carouselItemList:[]}},computed:{classes(){return[`${Ed}`]},trackStyles(){const a=this.trackIndex===-1?"hidden":"visible";return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,visibility:a}},copyTrackStyles(){return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackCopyOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,position:"absolute"}},arrowClasses(){return[`${Ed}-arrow`,`${Ed}-arrow-${this.arrow}`]},dotsClasses(){return[`${Ed}-dots`,`${Ed}-dots-${this.dots}`]}},methods:{findChild(a){this.carouselItemList.length&&this.carouselItemList.forEach(h=>{a(h.carouselItem)})},initCopyTrackDom(){t.nextTick(()=>{this.$refs.copyTrack.innerHTML=this.$refs.originTrack.innerHTML})},updateSlides(a){let h=[],p=1;this.findChild(C=>{h.push({$el:C.$el}),C.index=p++,a&&this.slideInstances.push(C)}),this.slides=h,this.updatePos()},updatePos(){this.findChild(a=>{a.width=this.listWidth,a.height=typeof this.height=="number"?`${this.height}px`:this.height}),this.trackWidth=(this.slides.length||0)*this.listWidth},slotChange(){t.nextTick(()=>{this.slides=[],this.slideInstances=[],this.updateSlides(!0,!0),this.updatePos(),this.updateOffset()})},handleResize(){this.listWidth=parseInt(I(this.$el,"width")),this.updatePos(),this.updateOffset()},updateTrackPos(a){this.showCopyTrack?this.trackIndex=a:this.copyTrackIndex=a},updateTrackIndex(a){this.showCopyTrack?this.copyTrackIndex=a:this.trackIndex=a,this.currentIndex=a},add(a){let h=this.slides.length;this.loop&&(a>0?this.hideTrackPos=-1:this.hideTrackPos=h,this.updateTrackPos(this.hideTrackPos));const p=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;let C=p+a;for(;C<0;)C+=h;(a>0&&C===h||a<0&&C===h-1)&&this.loop?(this.showCopyTrack=!this.showCopyTrack,this.trackIndex+=a,this.copyTrackIndex+=a):(this.loop||(C=C%this.slides.length),this.updateTrackIndex(C)),this.currentIndex=C===this.slides.length?0:C,this.$emit("on-change",p,this.currentIndex),this.$emit("update:modelValue",this.currentIndex)},arrowEvent(a){this.setAutoplay(),this.add(a)},dotsEvent(a,h){let p=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;const C=this.currentIndex;a===this.trigger&&p!==h&&(this.updateTrackIndex(h),this.$emit("on-change",C,this.currentIndex),this.$emit("update:modelValue",h),this.setAutoplay())},setAutoplay(){!r||(window.clearInterval(this.timer),this.autoplay&&(this.timer=window.setInterval(()=>{this.add(1)},this.autoplaySpeed)))},updateOffset(){t.nextTick(()=>{let a=this.copyTrackIndex>0?-1:1;this.trackOffset=this.trackIndex*this.listWidth,this.trackCopyOffset=this.copyTrackIndex*this.listWidth+a})},handleClick(a){this.$emit("on-click",this[a])}},watch:{autoplay(){this.setAutoplay()},autoplaySpeed(){this.setAutoplay()},trackIndex(){this.updateOffset()},copyTrackIndex(){this.updateOffset()},height(){this.updatePos()},modelValue(a){this.updateTrackIndex(a),this.setAutoplay()}},mounted(){this.updateSlides(!0),this.handleResize(),this.setAutoplay(),s(window,"resize",this.handleResize)},beforeUnmount(){o(window,"resize",this.handleResize)}},dj=["onClick","onMouseover"];function fj(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.createElementVNode("button",{type:"button",class:t.normalizeClass([v.arrowClasses,"left"]),onClick:h[0]||(h[0]=V=>v.arrowEvent(-1))},[t.createVNode(A,{type:"ios-arrow-back"})],2),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-list"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-track",w.showCopyTrack?"":"higher"]),style:t.normalizeStyle(v.trackStyles),ref:"originTrack",onClick:h[1]||(h[1]=V=>v.handleClick("currentIndex"))},[t.renderSlot(a.$slots,"default")],6),p.loop?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-track",w.showCopyTrack?"higher":""]),style:t.normalizeStyle(v.copyTrackStyles),ref:"copyTrack",onClick:h[2]||(h[2]=V=>v.handleClick("copyTrackIndex"))},null,6)):t.createCommentVNode("",!0)],2),t.createElementVNode("button",{type:"button",class:t.normalizeClass([v.arrowClasses,"right"]),onClick:h[3]||(h[3]=V=>v.arrowEvent(1))},[t.createVNode(A,{type:"ios-arrow-forward"})],2),t.createElementVNode("ul",{class:t.normalizeClass(v.dotsClasses)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.slides.length,V=>(t.openBlock(),t.createElementBlock("li",{key:V,class:t.normalizeClass([V-1===w.currentIndex?w.prefixCls+"-active":""]),onClick:H=>v.dotsEvent("click",V-1),onMouseover:H=>v.dotsEvent("hover",V-1)},[t.createElementVNode("button",{type:"button",class:t.normalizeClass([p.radiusDot?"radius":""])},null,2)],42,dj))),128))],2)],2)}var AA=l(uj,[["render",fj]]);const pj="ivu-carousel-item",mj={componentName:"carousel-item",name:"CarouselItem",inject:["CarouselInstance"],data(){return{prefixCls:pj,width:0,height:"auto",left:0,id:ee(6)}},computed:{styles(){return{width:`${this.width}px`,height:`${this.height}`,left:`${this.left}px`}}},watch:{width(a){a&&this.CarouselInstance.loop&&t.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})},height(a){a&&this.CarouselInstance.loop&&t.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})}},methods:{addInstance(){const a=this.CarouselInstance;a.carouselItemList||(a.carouselItemList=[]),a.carouselItemList.push({id:this.id,carouselItem:this})},removeInstance(){const a=this.CarouselInstance;if(!a.carouselItemList)return;const h=a.carouselItemList.findIndex(p=>p.id===this.id);a.carouselItemList.splice(h,1)}},mounted(){this.addInstance(),this.CarouselInstance.slotChange()},beforeUnmount(){this.removeInstance(),this.CarouselInstance.slotChange()}};function gj(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(w.prefixCls),style:t.normalizeStyle(v.styles)},[t.renderSlot(a.$slots,"default")],6)}var RA=l(mj,[["render",gj]]);const vj={name:"Casitem",components:{Icon:S},mixins:[ia],props:{data:Object,prefixCls:String,tmpItem:Object},computed:{classes(){return[`${this.prefixCls}-menu-item`,{[`${this.prefixCls}-menu-item-active`]:this.tmpItem.value===this.data.value,[`${this.prefixCls}-menu-item-disabled`]:this.data.disabled}]},showArrow(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},arrowType(){const a=this.globalConfig;let h="ios-arrow-forward";return a&&(a.cascader.customItemArrow?h="":a.cascader.itemArrow&&(h=a.cascader.itemArrow)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.cascader.customItemArrow&&(h=a.cascader.customItemArrow),h},arrowSize(){const a=this.globalConfig;let h="";return a&&a.cascader.itemArrowSize&&(h=a.cascader.itemArrowSize),h}}},yj={key:1,class:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"};function bj(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.classes)},[t.createTextVNode(t.toDisplayString(p.data.label)+" ",1),v.showArrow?(t.openBlock(),t.createBlock(A,{key:0,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["type","custom","size"])):t.createCommentVNode("",!0),v.showLoading?(t.openBlock(),t.createElementBlock("i",yj)):t.createCommentVNode("",!0)],2)}var xj=l(vj,[["render",bj]]);let Oj=1;const wj={name:"Caspanel",components:{Casitem:xj},inject:["CascaderInstance"],provide(){return{CaspanelInstance:this}},props:{data:{type:Array,default(){return[]}},disabled:Boolean,changeOnSelect:Boolean,trigger:String,prefixCls:String},data(){return{tmpItem:{},result:[],sublist:[],id:ee(6),childCaspanelList:[]}},watch:{data(){this.sublist=[]}},methods:{handleClickItem(a){this.trigger!=="click"&&a.children&&a.children.length||this.handleTriggerItem(a,!1,!0)},handleHoverItem(a){this.trigger!=="hover"||!a.children||!a.children.length||this.handleTriggerItem(a,!1,!0)},handleTriggerItem(a,h=!1,p=!1){if(a.disabled)return;const C=$(this,"Cascader");if(a.loading!==void 0&&!a.children.length&&C&&C.loadData){C.loadData(a,()=>{p&&(C.isLoadedChildren=!0),a.children.length&&this.handleTriggerItem(a)});return}const w=this.getBaseItem(a);(this.changeOnSelect||w.label!==this.tmpItem.label||w.value!==this.tmpItem.value||w.label===this.tmpItem.label&&w.value===this.tmpItem.value)&&(this.tmpItem=w,this.emitUpdate([w])),a.children&&a.children.length?(this.sublist=a.children,this.CascaderInstance.handleOnResultChange({lastValue:!1,changeOnSelect:this.changeOnSelect,fromInit:h}),this.changeOnSelect&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)):(this.sublist=[],this.CascaderInstance.handleOnResultChange({lastValue:!0,changeOnSelect:this.changeOnSelect,fromInit:h})),C&&C.$refs.drop.update()},updateResult(a){this.result=[this.tmpItem].concat(a),this.emitUpdate(this.result)},getBaseItem(a){let h=Object.assign({},a);return h.children&&delete h.children,h},emitUpdate(a){this.$parent.$options.name==="Caspanel"?this.$parent.updateResult(a):this.CascaderInstance.updateResult(a)},getKey(){return Oj++},handleOnFindSelected(a){let h=[...a.value];for(let p=0;p<h.length;p++)for(let C=0;C<this.data.length;C++)if(h[p]===this.data[C].value)return this.handleTriggerItem(this.data[C],!0),h.splice(0,1),t.nextTick(()=>{this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnFindSelected({value:h})}),!1},handleOnClear(a=!1){this.sublist=[],this.tmpItem={},a&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)},addCaspanel(){const a=this.CascaderInstance;a.caspanelList||(a.caspanelList=[]),a.caspanelList.push({id:this.id,caspanel:this});const h=$(this,"Caspanel");h&&(h.childCaspanelList||(h.childCaspanelList=[]),h.childCaspanelList.push({id:this.id,caspanel:this}))},removeCaspanel(){const a=this.CascaderInstance;if(a.caspanelList&&a.caspanelList.length){const p=a.caspanelList.findIndex(C=>C.id===this.id);a.caspanelList.splice(p,1)}const h=$(this,"Caspanel");if(h&&h.childCaspanelList&&h.childCaspanelList.length){const p=h.childCaspanelList.findIndex(C=>C.id===this.id);h.childCaspanelList.splice(p,1)}}},mounted(){this.addCaspanel()},beforeUnmount(){this.removeCaspanel()}};function _j(a,h,p,C,w,v){const A=t.resolveComponent("Casitem"),V=t.resolveComponent("Caspanel",!0);return t.openBlock(),t.createElementBlock("span",null,[p.data&&p.data.length?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass([p.prefixCls+"-menu"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.data,(H,X)=>(t.openBlock(),t.createBlock(A,{key:X,"prefix-cls":p.prefixCls,data:H,"tmp-item":w.tmpItem,onClick:t.withModifiers(Y=>v.handleClickItem(H),["stop"]),onMouseenter:t.withModifiers(Y=>v.handleHoverItem(H),["stop"])},null,8,["prefix-cls","data","tmp-item","onClick","onMouseenter"]))),128))],2)):t.createCommentVNode("",!0),w.sublist&&w.sublist.length?(t.openBlock(),t.createBlock(V,{key:1,"prefix-cls":p.prefixCls,data:w.sublist,disabled:p.disabled,trigger:p.trigger,"change-on-select":p.changeOnSelect},null,8,["prefix-cls","data","disabled","trigger","change-on-select"])):t.createCommentVNode("",!0)])}var Sj=l(wj,[["render",_j]]),z_={beforeMount(a,h,p){function C(w){if(a.contains(w.target))return!1;h.value(w)}a.__vueClickOutside__=C,r&&document.addEventListener("click",C)},unmounted(a,h){r&&document.removeEventListener("click",a.__vueClickOutside__),delete a.__vueClickOutside__}};const bc="ivu-cascader",Cj="ivu-select",kj={name:"Cascader",mixins:[ji,fi,ia],components:{iInput:Ao,Drop:Ge,Icon:S,Caspanel:Sj},directives:{clickOutside:z_},emits:["on-change","on-visible-change","update:modelValue"],provide(){return{CascaderInstance:this}},props:{data:{type:Array,default(){return[]}},modelValue:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},trigger:{validator(a){return _(a,["click","hover"])},default:"click"},changeOnSelect:{type:Boolean,default:!1},renderFormat:{type:Function,default(a){return a.join(" / ")}},loadData:{type:Function},filterable:{type:Boolean,default:!1},notFoundText:{type:String},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},capture:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return a.$VIEWUI?a.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:bc,selectPrefixCls:Cj,visible:!1,selected:[],tmpSelected:[],updatingValue:!1,currentValue:this.modelValue||[],query:"",validDataStr:"",isLoadedChildren:!1,isValueNull:!1,caspanelList:[]}},computed:{classes(){return[`${bc}`,{[`${bc}-show-clear`]:this.showCloseIcon,[`${bc}-size-${this.size}`]:!!this.size,[`${bc}-visible`]:this.visible,[`${bc}-disabled`]:this.itemDisabled,[`${bc}-not-found`]:this.filterable&&this.query!==""&&!this.querySelections.length}]},showCloseIcon(){return this.currentValue&&this.currentValue.length&&this.clearable&&!this.itemDisabled},displayRender(){let a=[];for(let h=0;h<this.selected.length;h++)a.push(this.selected[h].label);return this.renderFormat(a,this.selected)},displayInputRender(){return this.filterable?"":this.displayRender},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},inputPlaceholder(){return this.filterable&&this.currentValue.length?null:this.localePlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.select.noMatch"):this.notFoundText},querySelections(){let a=[];function h(p,C,w){const v=L(p);for(let A=0;A<v.length;A++){let V=v[A];V.__label=C?C+" / "+V.label:V.label,V.__value=w?w+","+V.value:V.value,V.children&&V.children.length?(h(V.children,V.__label,V.__value),delete V.__label,delete V.__value):a.push({label:V.__label,value:V.__value,display:V.__label,item:V,disabled:!!V.disabled})}}return h(this.data),a=a.filter(p=>p.label?p.label.indexOf(this.query)>-1:!1).map(p=>(p.display=p.display.replace(new RegExp(this.query,"g"),`<span>${this.query}</span>`),p)),a},arrowType(){const a=this.globalConfig;let h="ios-arrow-down";return a&&(a.cascader.customArrow?h="":a.cascader.arrow&&(h=a.cascader.arrow)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.cascader.customArrow&&(h=a.cascader.customArrow),h},arrowSize(){const a=this.globalConfig;let h="";return a&&a.cascader.arrowSize&&(h=a.cascader.arrowSize),h},dropdownCls(){return{[bc+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{clearSelect(){if(this.itemDisabled)return!1;const a=JSON.stringify(this.currentValue);this.currentValue=this.selected=this.tmpSelected=[],this.handleClose(),this.emitValue(this.currentValue,a),this.caspanelList.forEach(h=>{h.caspanel.handleOnClear()})},handleClose(){this.visible=!1},toggleOpen(){if(this.itemDisabled)return!1;this.visible?this.filterable||this.handleClose():this.onFocus()},onFocus(){this.visible=!0,this.currentValue.length||this.caspanelList.forEach(a=>{a.caspanel.handleOnClear()})},updateResult(a){this.tmpSelected=a},updateSelected(a=!1,h=!1){(!this.changeOnSelect||a||h)&&this.caspanelList.forEach(p=>{p.caspanel.handleOnFindSelected({value:this.currentValue})})},emitValue(a,h){JSON.stringify(a)!==h&&(this.$emit("on-change",this.currentValue,JSON.parse(JSON.stringify(this.selected))),t.nextTick(()=>{this.handleFormItemChange("change",{value:this.currentValue,selected:JSON.parse(JSON.stringify(this.selected))})}))},handleInput(a){this.query=a.target.value},handleSelectItem(a){const h=this.querySelections[a];if(h.item.disabled)return!1;this.query="",this.$refs.input.currentValue="";const p=JSON.stringify(this.currentValue);this.currentValue=h.value.split(","),setTimeout(()=>{this.emitValue(this.currentValue,p),this.handleClose()},0)},handleFocus(){this.$refs.input.focus()},getValidData(a){const h=L(a);function p(C){const w=Object.assign({},C);return"loading"in w&&delete w.loading,"__value"in w&&delete w.__value,"__label"in w&&delete w.__label,"children"in w&&w.children.length&&(w.children=w.children.map(v=>p(v))),w}return h.map(C=>p(C))},handleOnResultChange(a){const h=a.lastValue,p=a.changeOnSelect,C=a.fromInit;if(h||p){const w=JSON.stringify(this.currentValue);this.selected=this.tmpSelected;let v=[];this.selected.forEach(A=>{v.push(A.value)}),C||(this.updatingValue=!0,this.currentValue=v,this.emitValue(this.currentValue,w))}h&&!C&&this.handleClose()}},created(){this.validDataStr=JSON.stringify(this.getValidData(this.data))},mounted(){this.updateSelected(!0)},watch:{visible(a){a?(this.currentValue.length&&this.updateSelected(),this.transfer&&this.$refs.drop.update(),this.$refs.drop.handleOnUpdatePopper()):(this.filterable&&(this.query="",this.$refs.input.currentValue=""),this.transfer&&this.$refs.drop.destroy(),this.$refs.drop.handleOnDestroyPopper()),this.$emit("on-visible-change",a)},modelValue(a){a===null&&(this.isValueNull=!0),this.currentValue=a||[],(a===null||!a.length)&&(this.selected=[])},currentValue(){if(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",this.currentValue),this.updatingValue){this.updatingValue=!1;return}this.updateSelected(!0)},data:{deep:!0,handler(){const a=JSON.stringify(this.getValidData(this.data));a!==this.validDataStr&&(this.validDataStr=a,this.isLoadedChildren||t.nextTick(()=>this.updateSelected(!1,this.changeOnSelect)),this.isLoadedChildren=!1)}}}},Tj=["name","value"],Mj=["onClick","innerHTML"];function Ej(a,h,p,C,w,v){const A=t.resolveComponent("i-input"),V=t.resolveComponent("Icon"),H=t.resolveComponent("Caspanel"),X=t.resolveComponent("Drop"),Y=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-rel"]),onClick:h[1]||(h[1]=(...le)=>v.toggleOpen&&v.toggleOpen(...le)),ref:"reference"},[t.createElementVNode("input",{type:"hidden",name:p.name,value:w.currentValue},null,8,Tj),t.renderSlot(a.$slots,"default",{},()=>[t.createVNode(A,{"element-id":p.elementId,ref:"input",readonly:!p.filterable,disabled:a.itemDisabled,modelValue:v.displayInputRender,onOnChange:v.handleInput,size:p.size,placeholder:v.inputPlaceholder},null,8,["element-id","readonly","disabled","modelValue","onOnChange","size","placeholder"]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-label"]),onClick:h[0]||(h[0]=(...le)=>v.handleFocus&&v.handleFocus(...le))},t.toDisplayString(v.displayRender),3),[[t.vShow,p.filterable&&w.query===""]]),t.withDirectives(t.createVNode(V,{type:"ios-close-circle",class:t.normalizeClass([w.prefixCls+"-arrow"]),onClick:t.withModifiers(v.clearSelect,["stop"])},null,8,["class","onClick"]),[[t.vShow,v.showCloseIcon]]),t.createVNode(V,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:t.normalizeClass([w.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])])],2),t.createVNode(X,{ref:"drop",visible:w.visible,classes:v.dropdownCls,eventsEnabled:p.eventsEnabled,"transition-name":"transition-drop",transfer:p.transfer},{default:t.withCtx(()=>[t.createElementVNode("div",null,[t.withDirectives(t.createVNode(H,{ref:"caspanel","prefix-cls":w.prefixCls,data:p.data,disabled:a.itemDisabled,"change-on-select":p.changeOnSelect,trigger:p.trigger},null,8,["prefix-cls","data","disabled","change-on-select","trigger"]),[[t.vShow,!p.filterable||p.filterable&&w.query===""]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-dropdown"])},[t.createElementVNode("ul",{class:t.normalizeClass([w.selectPrefixCls+"-dropdown-list"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.querySelections,(le,xe)=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([w.selectPrefixCls+"-item",{[w.selectPrefixCls+"-item-disabled"]:le.disabled}]),key:xe,onClick:be=>v.handleSelectItem(xe),innerHTML:le.display},null,10,Mj))),128))],2)],2),[[t.vShow,p.filterable&&w.query!==""&&v.querySelections.length]]),t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls+"-not-found-tip"])},[t.createElementVNode("li",null,t.toDisplayString(v.localeNotFoundText),1)],2),[[t.vShow,p.filterable&&w.query!==""&&!v.querySelections.length||!p.data.length]])])]),_:1},8,["visible","classes","eventsEnabled","transfer"])],2)),[[Y,v.handleClose]])}var IA=l(kj,[["render",Ej]]);const Pj={name:"CellItem",props:{title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""}}},Aj={class:"ivu-cell-item"},Rj={class:"ivu-cell-icon"},Ij={class:"ivu-cell-main"},Dj={class:"ivu-cell-title"},Nj={class:"ivu-cell-label"},$j={class:"ivu-cell-footer"},Vj={class:"ivu-cell-extra"};function Lj(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",Aj,[t.createElementVNode("div",Rj,[t.renderSlot(a.$slots,"icon")]),t.createElementVNode("div",Ij,[t.createElementVNode("div",Dj,[t.renderSlot(a.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])]),t.createElementVNode("div",Nj,[t.renderSlot(a.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(p.label),1)])])]),t.createElementVNode("div",$j,[t.createElementVNode("span",Vj,[t.renderSlot(a.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(p.extra),1)])])])])}var Bj=l(Pj,[["render",Lj]]);const dm="ivu-cell",Uj={name:"Cell",inject:["CellGroupInstance"],mixins:[fe,ia],components:{CellItem:Bj,Icon:S},props:{name:{type:[String,Number]},title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},data(){return{prefixCls:dm}},computed:{classes(){return[`${dm}`,{[`${dm}-disabled`]:this.disabled,[`${dm}-selected`]:this.selected,[`${dm}-with-link`]:this.to}]},arrowType(){const a=this.globalConfig;let h="ios-arrow-forward";return a&&(a.cell.customArrow?h="":a.cell.arrow&&(h=a.cell.arrow)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.cell.customArrow&&(h=a.cell.customArrow),h},arrowSize(){const a=this.globalConfig;let h="";return a&&a.cell.arrowSize&&(h=a.cell.arrowSize),h}},methods:{handleClickItem(a,h){this.CellGroupInstance.handleClick(this.name),this.handleCheckClick(a,h)}}},Fj=["href","target"],zj={key:2,class:"ivu-cell-arrow"};function Xj(a,h,p,C,w,v){const A=t.resolveComponent("CellItem"),V=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[a.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:a.linkUrl,target:a.target,class:"ivu-cell-link",onClick:[h[0]||(h[0]=t.withModifiers(H=>v.handleClickItem(H,!1),["exact"])),h[1]||(h[1]=t.withModifiers(H=>v.handleClickItem(H,!0),["ctrl"])),h[2]||(h[2]=t.withModifiers(H=>v.handleClickItem(H,!0),["meta"]))]},[t.createVNode(A,{title:p.title,label:p.label,extra:p.extra},{icon:t.withCtx(()=>[t.renderSlot(a.$slots,"icon")]),default:t.withCtx(()=>[t.renderSlot(a.$slots,"default")]),extra:t.withCtx(()=>[t.renderSlot(a.$slots,"extra")]),label:t.withCtx(()=>[t.renderSlot(a.$slots,"label")]),_:3},8,["title","label","extra"])],8,Fj)):(t.openBlock(),t.createElementBlock("div",{key:1,class:"ivu-cell-link",onClick:h[3]||(h[3]=(...H)=>v.handleClickItem&&v.handleClickItem(...H))},[t.createVNode(A,{title:p.title,label:p.label,extra:p.extra},{icon:t.withCtx(()=>[t.renderSlot(a.$slots,"icon")]),default:t.withCtx(()=>[t.renderSlot(a.$slots,"default")]),extra:t.withCtx(()=>[t.renderSlot(a.$slots,"extra")]),label:t.withCtx(()=>[t.renderSlot(a.$slots,"label")]),_:3},8,["title","label","extra"])])),a.to?(t.openBlock(),t.createElementBlock("div",zj,[t.renderSlot(a.$slots,"arrow",{},()=>[t.createVNode(V,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["type","custom","size"])])])):t.createCommentVNode("",!0)],2)}var DA=l(Uj,[["render",Xj]]);const Wj={name:"CellGroup",emits:["on-click"],provide(){return{CellGroupInstance:this}},methods:{handleClick(a){this.$emit("on-click",a)}}},Qj={class:"ivu-cell-group"};function Hj(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",Qj,[t.renderSlot(a.$slots,"default")])}var NA=l(Wj,[["render",Hj]]);const no="ivu-checkbox",Gj={name:"Checkbox",mixins:[fi],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[`${no}-wrapper`,{[`${no}-group-item`]:this.group,[`${no}-wrapper-checked`]:this.currentValue,[`${no}-wrapper-disabled`]:this.itemDisabled,[`${no}-${this.size}`]:!!this.size,[`${no}-border`]:this.border}]},checkboxClasses(){return[`${no}`,{[`${no}-checked`]:this.currentValue,[`${no}-disabled`]:this.itemDisabled,[`${no}-indeterminate`]:this.indeterminate}]},innerClasses(){return[`${no}-inner`,{[`${no}-focus`]:this.focusInner}]},inputClasses(){return`${no}-input`},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=this.$slots.default!==void 0)},methods:{change(a){if(this.itemDisabled)return!1;const h=a.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",h),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",h),this.handleFormItemChange("change",h))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(a){if(!(a===this.trueValue||a===this.falseValue))throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(a){this.model=a||[]},immediate:!0}}},Yj=["disabled","value","name"],jj=["disabled","checked","name"],qj={key:0,class:"ivu-checkbox-label-text"};function Zj(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("label",{class:t.normalizeClass(v.wrapClasses)},[t.createElementVNode("span",{class:t.normalizeClass(v.checkboxClasses)},[t.createElementVNode("span",{class:t.normalizeClass(v.innerClasses)},null,2),v.group?t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:0,type:"checkbox",class:t.normalizeClass(v.inputClasses),disabled:a.itemDisabled,value:p.label,"onUpdate:modelValue":h[0]||(h[0]=A=>w.model=A),name:p.name,onChange:h[1]||(h[1]=(...A)=>v.change&&v.change(...A)),onFocus:h[2]||(h[2]=(...A)=>v.onFocus&&v.onFocus(...A)),onBlur:h[3]||(h[3]=(...A)=>v.onBlur&&v.onBlur(...A))},null,42,Yj)),[[t.vModelCheckbox,w.model]]):(t.openBlock(),t.createElementBlock("input",{key:1,type:"checkbox",class:t.normalizeClass(v.inputClasses),disabled:a.itemDisabled,checked:v.currentValue,name:p.name,onChange:h[4]||(h[4]=(...A)=>v.change&&v.change(...A)),onFocus:h[5]||(h[5]=(...A)=>v.onFocus&&v.onFocus(...A)),onBlur:h[6]||(h[6]=(...A)=>v.onBlur&&v.onBlur(...A))},null,42,jj))],2),w.showSlot?(t.openBlock(),t.createElementBlock("span",qj,[t.renderSlot(a.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(p.label),1)])])):t.createCommentVNode("",!0)],2)}var Pd=l(Gj,[["render",Zj]]);const Kj="ivu-checkbox-group",Jj={name:"CheckboxGroup",mixins:[fi],emits:["update:modelValue","on-change"],provide(){return{CheckboxGroupInstance:this}},props:{modelValue:{type:Array,default(){return[]}},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}}},data(){return{currentValue:this.modelValue||[],children:[]}},computed:{classes(){return[`${Kj}`,{[`ivu-checkbox-${this.size}`]:!!this.size}]}},methods:{change(a){this.currentValue=a,this.$emit("update:modelValue",a),this.$emit("on-change",a),this.handleFormItemChange("change",a)}}};function eq(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.renderSlot(a.$slots,"default")],2)}var X_=l(Jj,[["render",eq]]);const $A="ivu-chart-circle",tq={name:"iCircle",props:{percent:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:6},strokeColor:{type:[String,Array],default:"#2d8cf0"},strokeLinecap:{validator(a){return _(a,["square","round"])},default:"round"},trailWidth:{type:Number,default:5},trailColor:{type:String,default:"#eaeef2"},dashboard:{type:Boolean,default:!1}},data(){return{id:`ivu-chart-circle-${ee(3)}`}},computed:{circleSize(){return{width:`${this.size}px`,height:`${this.size}px`}},computedStrokeWidth(){return this.percent===0&&this.dashboard?0:this.strokeWidth},radius(){return 50-this.strokeWidth/2},pathString(){return this.dashboard?`M 50,50 m 0,${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}`:`M 50,50 m 0,-${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}`},len(){return Math.PI*2*this.radius},trailStyle(){let a={};return this.dashboard&&(a={"stroke-dasharray":`${this.len-75}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}),a},pathStyle(){let a={};return this.dashboard?a={"stroke-dasharray":`${this.percent/100*(this.len-75)}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .6s ease 0s, stroke .6s, stroke-width .06s ease .6s"}:a={"stroke-dasharray":`${this.len}px ${this.len}px`,"stroke-dashoffset":`${(100-this.percent)/100*this.len}px`,transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"},a},wrapClasses(){return`${$A}`},innerClasses(){return`${$A}-inner`},strokeValue(){let a=this.strokeColor;return typeof this.strokeColor!="string"&&(a=`url(#${this.id})`),a},showDefs(){return typeof this.strokeColor!="string"}}},iq={viewBox:"0 0 100 100"},nq={key:0},rq=["id"],sq=["stop-color"],oq=["stop-color"],aq=["d","stroke","stroke-width","stroke-linecap"],lq=["d","stroke-linecap","stroke","stroke-width"];function cq(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{style:t.normalizeStyle(v.circleSize),class:t.normalizeClass(v.wrapClasses)},[(t.openBlock(),t.createElementBlock("svg",iq,[v.showDefs?(t.openBlock(),t.createElementBlock("defs",nq,[t.createElementVNode("linearGradient",{id:w.id,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[t.createElementVNode("stop",{offset:"0%","stop-color":p.strokeColor[0]},null,8,sq),t.createElementVNode("stop",{offset:"100%","stop-color":p.strokeColor[1]},null,8,oq)],8,rq)])):t.createCommentVNode("",!0),t.createElementVNode("path",{d:v.pathString,stroke:p.trailColor,"stroke-width":p.trailWidth,"fill-opacity":0,style:t.normalizeStyle(v.trailStyle),"stroke-linecap":p.strokeLinecap},null,12,aq),t.createElementVNode("path",{d:v.pathString,"stroke-linecap":p.strokeLinecap,stroke:v.strokeValue,"stroke-width":v.computedStrokeWidth,"fill-opacity":"0",style:t.normalizeStyle(v.pathStyle)},null,12,lq)])),t.createElementVNode("div",{class:t.normalizeClass(v.innerClasses)},[t.renderSlot(a.$slots,"default")],2)],6)}var Ey=l(tq,[["render",cq]]);const Py="ivu-dropdown",hq={name:"Dropdown",directives:{clickOutside:z_},components:{Drop:Ge},emits:["on-visible-change","on-clickoutside","on-click","on-hover-click","on-haschild-click"],props:{trigger:{validator(a){return _(a,["click","hover","custom","contextMenu"])},default:"hover"},placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},visible:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},transferClassName:{type:String},stopPropagation:{type:Boolean,default:!1},capture:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return a.$VIEWUI?a.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1},boundariesElement:{default:"window"}},computed:{transition(){return["bottom-start","bottom","bottom-end"].indexOf(this.placement)>-1?"slide-up":"fade"},dropdownCls(){return{[Py+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}},relClasses(){return[`${Py}-rel`,{[`${Py}-rel-user-select-none`]:this.trigger==="contextMenu"}]}},data(){return{prefixCls:Py,currentVisible:this.visible,timeout:null}},watch:{visible(a){this.currentVisible=a},currentVisible(a){a?this.$refs.drop.update():this.$refs.drop.destroy(),this.$emit("on-visible-change",a)}},methods:{handleClick(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.hasParent()||(this.currentVisible=!this.currentVisible)},handleRightClick(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!this.currentVisible},handleMouseenter(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!0},250)},handleMouseleave(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!1},150))},onClickoutside(a){this.handleClose(),this.handleRightClose(),this.currentVisible&&this.$emit("on-clickoutside",a)},handleClose(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.currentVisible=!1},handleRightClose(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!1},hasParent(){return $(this,"Dropdown")||!1},handleHaschildClick(){t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!0});const a=this.hasParent();a&&a.handleHaschildClick()},handleItemClick(a){if(this.stopPropagation)return;const h=this.hasParent();h?h.handleItemClick(a):this.$emit("on-click",a)},handleHoverClick(){const a=this.hasParent();a?(t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1}),a.handleHoverClick()):t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1})}}};function uq(a,h,p,C,w,v){const A=t.resolveComponent("Drop"),V=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls]),onMouseenter:h[2]||(h[2]=(...H)=>v.handleMouseenter&&v.handleMouseenter(...H)),onMouseleave:h[3]||(h[3]=(...H)=>v.handleMouseleave&&v.handleMouseleave(...H))},[t.createElementVNode("div",{class:t.normalizeClass(v.relClasses),ref:"reference",onClick:h[0]||(h[0]=(...H)=>v.handleClick&&v.handleClick(...H)),onContextmenu:h[1]||(h[1]=t.withModifiers((...H)=>v.handleRightClick&&v.handleRightClick(...H),["prevent"]))},[t.renderSlot(a.$slots,"default")],34),t.createVNode(A,{ref:"drop",visible:w.currentVisible,classes:v.dropdownCls,placement:p.placement,eventsEnabled:p.eventsEnabled,boundariesElement:p.boundariesElement,transfer:p.transfer,"transition-name":"transition-drop",onMouseenter:v.handleMouseenter,onMouseleave:v.handleMouseleave},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"list")]),_:3},8,["visible","classes","placement","eventsEnabled","boundariesElement","transfer","onMouseenter","onMouseleave"])],34)),[[V,v.onClickoutside]])}var jh=l(hq,[["render",uq]]);const dq={name:"DropdownMenu"},fq={class:"ivu-dropdown-menu"};function pq(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("ul",fq,[t.renderSlot(a.$slots,"default")])}var qh=l(dq,[["render",pq]]);const Ro="ivu-tag",bl=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],mq=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],gq={name:"Tag",components:{Icon:S},emits:["on-change","on-close"],props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(a){return _(a,["border","dot"])}},name:{type:[String,Number]},size:{validator(a){return _(a,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[`${Ro}`,`${Ro}-size-${this.size}`,{[`${Ro}-${this.color}`]:!!this.color&&_(this.color,bl),[`${Ro}-${this.type}`]:!!this.type,[`${Ro}-closable`]:this.closable,[`${Ro}-checked`]:this.isChecked,[`${Ro}-checkable`]:this.checkable}]},wraperStyles(){return _(this.color,bl)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:this.type!=="dot"&&this.type!=="border"&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[`${Ro}-text`,this.type==="border"&&_(this.color,bl)?`${Ro}-color-${this.color}`:"",this.type!=="dot"&&this.type!=="border"&&this.color!=="default"&&this.isChecked&&mq.indexOf(this.color)<0?`${Ro}-color-white`:""]},dotClasses(){return`${Ro}-dot-inner`},iconClass(){return this.type==="dot"?"":this.type==="border"?_(this.color,bl)?`${Ro}-color-${this.color}`:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&this.type==="dot"},lineColor(){return this.type==="dot"?"":this.type==="border"?this.color!==void 0?_(this.color,bl)?"":this.color:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},borderColor(){return this.color!==void 0?this.color==="default"?"":this.color:""},dotColor(){return this.color!==void 0?_(this.color,bl)?"":this.color:""},textColorStyle(){return _(this.color,bl)?{}:this.type!=="dot"&&this.type!=="border"?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return _(this.color,bl)?{}:{background:this.dotColor}},defaultTypeColor(){return this.type!=="dot"&&this.type!=="border"&&this.color!==void 0?_(this.color,bl)?"":this.color:""}},methods:{close(a){this.name===void 0?this.$emit("on-close",a):this.$emit("on-close",a,this.name)},check(){if(!this.checkable)return;const a=!this.isChecked;this.isChecked=a,this.name===void 0?this.$emit("on-change",a):this.$emit("on-change",a,this.name)}},watch:{checked(a){this.isChecked=a}}};function vq(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),onClick:h[0]||(h[0]=t.withModifiers((...V)=>v.check&&v.check(...V),["stop"])),style:t.normalizeStyle(v.wraperStyles)},[v.showDot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(v.dotClasses),style:t.normalizeStyle(v.bgColorStyle)},null,6)):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(v.textClasses),style:t.normalizeStyle(v.textColorStyle)},[t.renderSlot(a.$slots,"default")],6),p.closable?(t.openBlock(),t.createBlock(A,{key:1,class:t.normalizeClass(v.iconClass),color:v.lineColor,type:"ios-close",onClick:t.withModifiers(v.close,["stop"])},null,8,["class","color","onClick"])):t.createCommentVNode("",!0)],6)}var Ad=l(gq,[["render",vq]]),VA={11e4:{l:"Z1",n:"",c:"110000",p:"86"},12e4:{l:"Z1",n:"",c:"120000",p:"86"},13e4:{l:"H",n:"",c:"130000",p:"86"},14e4:{l:"S",n:"",c:"140000",p:"86"},15e4:{l:"N",n:"",c:"150000",p:"86"},21e4:{l:"L",n:"",c:"210000",p:"86"},22e4:{l:"J",n:"",c:"220000",p:"86"},23e4:{l:"H",n:"",c:"230000",p:"86"},31e4:{l:"Z1",n:"",c:"310000",p:"86"},32e4:{l:"J",n:"",c:"320000",p:"86"},33e4:{l:"Z",n:"",c:"330000",p:"86"},34e4:{l:"A",n:"",c:"340000",p:"86"},35e4:{l:"F",n:"",c:"350000",p:"86"},36e4:{l:"J",n:"",c:"360000",p:"86"},37e4:{l:"S",n:"",c:"370000",p:"86"},41e4:{l:"H",n:"",c:"410000",p:"86"},42e4:{l:"H",n:"",c:"420000",p:"86"},43e4:{l:"H",n:"",c:"430000",p:"86"},44e4:{l:"G",n:"",c:"440000",p:"86"},45e4:{l:"G",n:"",c:"450000",p:"86"},46e4:{l:"H",n:"",c:"460000",p:"86"},5e5:{l:"Z1",n:"",c:"500000",p:"86"},51e4:{l:"S",n:"",c:"510000",p:"86"},52e4:{l:"G",n:"",c:"520000",p:"86"},53e4:{l:"Y",n:"",c:"530000",p:"86"},54e4:{l:"X",n:"",c:"540000",p:"86"},61e4:{l:"S",n:"",c:"610000",p:"86"},62e4:{l:"G",n:"",c:"620000",p:"86"},63e4:{l:"Q",n:"",c:"630000",p:"86"},64e4:{l:"N",n:"",c:"640000",p:"86"},65e4:{l:"X",n:"",c:"650000",p:"86"},71e4:{l:"T",n:"",c:"710000",p:"86"},81e4:{l:"Z2",n:"",c:"810000",p:"86"},82e4:{l:"Z2",n:"",c:"820000",p:"86"}},Rd={11e4:{l:"B",n:"",c:"110000",p:"86"},12e4:{l:"T",n:"",c:"120000",p:"86"},130100:{l:"S",n:"",c:"130100",p:"130000"},130200:{l:"T",n:"",c:"130200",p:"130000"},130300:{l:"Q",n:"",c:"130300",p:"130000"},130400:{l:"H",n:"",c:"130400",p:"130000"},130500:{l:"X",n:"",c:"130500",p:"130000"},130600:{l:"B",n:"",c:"130600",p:"130000"},130700:{l:"Z",n:"",c:"130700",p:"130000"},130800:{l:"C",n:"",c:"130800",p:"130000"},130900:{l:"C",n:"",c:"130900",p:"130000"},131e3:{l:"L",n:"",c:"131000",p:"130000"},131100:{l:"H",n:"",c:"131100",p:"130000"},139001:{l:"D",n:"",c:"139001",p:"130000"},139002:{l:"X",n:"",c:"139002",p:"130000"},140100:{l:"T",n:"",c:"140100",p:"140000"},140200:{l:"D",n:"",c:"140200",p:"140000"},140300:{l:"Y",n:"",c:"140300",p:"140000"},140400:{l:"C",n:"",c:"140400",p:"140000"},140500:{l:"J",n:"",c:"140500",p:"140000"},140600:{l:"S",n:"",c:"140600",p:"140000"},140700:{l:"J",n:"",c:"140700",p:"140000"},140800:{l:"Y",n:"",c:"140800",p:"140000"},140900:{l:"X",n:"",c:"140900",p:"140000"},141e3:{l:"L",n:"",c:"141000",p:"140000"},141100:{l:"L",n:"",c:"141100",p:"140000"},150100:{l:"H",n:"",c:"150100",p:"150000"},150200:{l:"B",n:"",c:"150200",p:"150000"},150300:{l:"W",n:"",c:"150300",p:"150000"},150400:{l:"C",n:"",c:"150400",p:"150000"},150500:{l:"T",n:"",c:"150500",p:"150000"},150600:{l:"E",n:"",c:"150600",p:"150000"},150700:{l:"H",n:"",c:"150700",p:"150000"},150800:{l:"B",n:"",c:"150800",p:"150000"},150900:{l:"W",n:"",c:"150900",p:"150000"},152200:{l:"X",n:"",c:"152200",p:"150000"},152500:{l:"X",n:"",c:"152500",p:"150000"},152900:{l:"A",n:"",c:"152900",p:"150000"},210100:{l:"S",n:"",c:"210100",p:"210000"},210200:{l:"D",n:"",c:"210200",p:"210000"},210300:{l:"A",n:"",c:"210300",p:"210000"},210400:{l:"F",n:"",c:"210400",p:"210000"},210500:{l:"B",n:"",c:"210500",p:"210000"},210600:{l:"D",n:"",c:"210600",p:"210000"},210700:{l:"J",n:"",c:"210700",p:"210000"},210800:{l:"Y",n:"",c:"210800",p:"210000"},210900:{l:"F",n:"",c:"210900",p:"210000"},211e3:{l:"L",n:"",c:"211000",p:"210000"},211100:{l:"P",n:"",c:"211100",p:"210000"},211200:{l:"T",n:"",c:"211200",p:"210000"},211300:{l:"C",n:"",c:"211300",p:"210000"},211400:{l:"H",n:"",c:"211400",p:"210000"},220100:{l:"C",n:"",c:"220100",p:"220000"},220200:{l:"J",n:"",c:"220200",p:"220000"},220300:{l:"S",n:"",c:"220300",p:"220000"},220400:{l:"L",n:"",c:"220400",p:"220000"},220500:{l:"T",n:"",c:"220500",p:"220000"},220600:{l:"B",n:"",c:"220600",p:"220000"},220700:{l:"S",n:"",c:"220700",p:"220000"},220800:{l:"B",n:"",c:"220800",p:"220000"},222400:{l:"Y",n:"",c:"222400",p:"220000"},230100:{l:"H",n:"",c:"230100",p:"230000"},230200:{l:"Q",n:"",c:"230200",p:"230000"},230300:{l:"J",n:"",c:"230300",p:"230000"},230400:{l:"H",n:"",c:"230400",p:"230000"},230500:{l:"S",n:"",c:"230500",p:"230000"},230600:{l:"D",n:"",c:"230600",p:"230000"},230700:{l:"Y",n:"",c:"230700",p:"230000"},230800:{l:"J",n:"",c:"230800",p:"230000"},230900:{l:"Q",n:"",c:"230900",p:"230000"},231e3:{l:"M",n:"",c:"231000",p:"230000"},231100:{l:"H",n:"",c:"231100",p:"230000"},231200:{l:"S",n:"",c:"231200",p:"230000"},232700:{l:"D",n:"",c:"232700",p:"230000"},31e4:{l:"S",n:"",c:"310000",p:"86"},320100:{l:"N",n:"",c:"320100",p:"320000"},320200:{l:"W",n:"",c:"320200",p:"320000"},320300:{l:"X",n:"",c:"320300",p:"320000"},320400:{l:"C",n:"",c:"320400",p:"320000"},320500:{l:"S",n:"",c:"320500",p:"320000"},320600:{l:"N",n:"",c:"320600",p:"320000"},320700:{l:"L",n:"",c:"320700",p:"320000"},320800:{l:"H",n:"",c:"320800",p:"320000"},320900:{l:"Y",n:"",c:"320900",p:"320000"},321e3:{l:"Y",n:"",c:"321000",p:"320000"},321100:{l:"Z",n:"",c:"321100",p:"320000"},321200:{l:"T",n:"",c:"321200",p:"320000"},321300:{l:"X",n:"",c:"321300",p:"320000"},330100:{l:"H",n:"",c:"330100",p:"330000"},330200:{l:"N",n:"",c:"330200",p:"330000"},330300:{l:"W",n:"",c:"330300",p:"330000"},330400:{l:"J",n:"",c:"330400",p:"330000"},330500:{l:"H",n:"",c:"330500",p:"330000"},330600:{l:"S",n:"",c:"330600",p:"330000"},330700:{l:"J",n:"",c:"330700",p:"330000"},330800:{l:"Q",n:"",c:"330800",p:"330000"},330900:{l:"Z",n:"",c:"330900",p:"330000"},331e3:{l:"T",n:"",c:"331000",p:"330000"},331100:{l:"L",n:"",c:"331100",p:"330000"},340100:{l:"H",n:"",c:"340100",p:"340000"},340200:{l:"W",n:"",c:"340200",p:"340000"},340300:{l:"B",n:"",c:"340300",p:"340000"},340400:{l:"H",n:"",c:"340400",p:"340000"},340500:{l:"M",n:"",c:"340500",p:"340000"},340600:{l:"H",n:"",c:"340600",p:"340000"},340700:{l:"T",n:"",c:"340700",p:"340000"},340800:{l:"A",n:"",c:"340800",p:"340000"},341e3:{l:"H",n:"",c:"341000",p:"340000"},341100:{l:"C",n:"",c:"341100",p:"340000"},341200:{l:"F",n:"",c:"341200",p:"340000"},341300:{l:"X",n:"",c:"341300",p:"340000"},341500:{l:"L",n:"",c:"341500",p:"340000"},341600:{l:"B",n:"",c:"341600",p:"340000"},341700:{l:"C",n:"",c:"341700",p:"340000"},341800:{l:"X",n:"",c:"341800",p:"340000"},350100:{l:"F",n:"",c:"350100",p:"350000"},350200:{l:"S",n:"",c:"350200",p:"350000"},350300:{l:"P",n:"",c:"350300",p:"350000"},350400:{l:"S",n:"",c:"350400",p:"350000"},350500:{l:"Q",n:"",c:"350500",p:"350000"},350600:{l:"Z",n:"",c:"350600",p:"350000"},350700:{l:"N",n:"",c:"350700",p:"350000"},350800:{l:"L",n:"",c:"350800",p:"350000"},350900:{l:"N",n:"",c:"350900",p:"350000"},360100:{l:"N",n:"",c:"360100",p:"360000"},360200:{l:"J",n:"",c:"360200",p:"360000"},360300:{l:"P",n:"",c:"360300",p:"360000"},360400:{l:"J",n:"",c:"360400",p:"360000"},360500:{l:"X",n:"",c:"360500",p:"360000"},360600:{l:"Y",n:"",c:"360600",p:"360000"},360700:{l:"G",n:"",c:"360700",p:"360000"},360800:{l:"J",n:"",c:"360800",p:"360000"},360900:{l:"Y",n:"",c:"360900",p:"360000"},361e3:{l:"F",n:"",c:"361000",p:"360000"},361100:{l:"S",n:"",c:"361100",p:"360000"},370100:{l:"J",n:"",c:"370100",p:"370000"},370200:{l:"Q",n:"",c:"370200",p:"370000"},370300:{l:"Z",n:"",c:"370300",p:"370000"},370400:{l:"Z",n:"",c:"370400",p:"370000"},370500:{l:"D",n:"",c:"370500",p:"370000"},370600:{l:"Y",n:"",c:"370600",p:"370000"},370700:{l:"W",n:"",c:"370700",p:"370000"},370800:{l:"J",n:"",c:"370800",p:"370000"},370900:{l:"T",n:"",c:"370900",p:"370000"},371e3:{l:"W",n:"",c:"371000",p:"370000"},371100:{l:"R",n:"",c:"371100",p:"370000"},371200:{l:"L",n:"",c:"371200",p:"370000"},371300:{l:"L",n:"",c:"371300",p:"370000"},371400:{l:"D",n:"",c:"371400",p:"370000"},371500:{l:"L",n:"",c:"371500",p:"370000"},371600:{l:"B",n:"",c:"371600",p:"370000"},371700:{l:"H",n:"",c:"371700",p:"370000"},410100:{l:"Z",n:"",c:"410100",p:"410000"},410200:{l:"K",n:"",c:"410200",p:"410000"},410300:{l:"L",n:"",c:"410300",p:"410000"},410400:{l:"P",n:"",c:"410400",p:"410000"},410500:{l:"A",n:"",c:"410500",p:"410000"},410600:{l:"H",n:"",c:"410600",p:"410000"},410700:{l:"X",n:"",c:"410700",p:"410000"},410800:{l:"J",n:"",c:"410800",p:"410000"},410900:{l:"P",n:"",c:"410900",p:"410000"},411e3:{l:"X",n:"",c:"411000",p:"410000"},411100:{l:"L",n:"",c:"411100",p:"410000"},411200:{l:"S",n:"",c:"411200",p:"410000"},411300:{l:"N",n:"",c:"411300",p:"410000"},411400:{l:"S",n:"",c:"411400",p:"410000"},411500:{l:"X",n:"",c:"411500",p:"410000"},411600:{l:"Z",n:"",c:"411600",p:"410000"},411700:{l:"Z",n:"",c:"411700",p:"410000"},419001:{l:"J",n:"",c:"419001",p:"410000"},420100:{l:"W",n:"",c:"420100",p:"420000"},420200:{l:"H",n:"",c:"420200",p:"420000"},420300:{l:"S",n:"",c:"420300",p:"420000"},420500:{l:"Y",n:"",c:"420500",p:"420000"},420600:{l:"X",n:"",c:"420600",p:"420000"},420700:{l:"E",n:"",c:"420700",p:"420000"},420800:{l:"J",n:"",c:"420800",p:"420000"},420900:{l:"X",n:"",c:"420900",p:"420000"},421e3:{l:"J",n:"",c:"421000",p:"420000"},421100:{l:"H",n:"",c:"421100",p:"420000"},421200:{l:"X",n:"",c:"421200",p:"420000"},421300:{l:"S",n:"",c:"421300",p:"420000"},422800:{l:"E",n:"",c:"422800",p:"420000"},429004:{l:"X",n:"",c:"429004",p:"420000"},429005:{l:"Q",n:"",c:"429005",p:"420000"},429006:{l:"T",n:"",c:"429006",p:"420000"},429021:{l:"S",n:"",c:"429021",p:"420000"},430100:{l:"C",n:"",c:"430100",p:"430000"},430200:{l:"Z",n:"",c:"430200",p:"430000"},430300:{l:"X",n:"",c:"430300",p:"430000"},430400:{l:"H",n:"",c:"430400",p:"430000"},430500:{l:"S",n:"",c:"430500",p:"430000"},430600:{l:"Y",n:"",c:"430600",p:"430000"},430700:{l:"C",n:"",c:"430700",p:"430000"},430800:{l:"Z",n:"",c:"430800",p:"430000"},430900:{l:"Y",n:"",c:"430900",p:"430000"},431e3:{l:"C",n:"",c:"431000",p:"430000"},431100:{l:"Y",n:"",c:"431100",p:"430000"},431200:{l:"H",n:"",c:"431200",p:"430000"},431300:{l:"L",n:"",c:"431300",p:"430000"},433100:{l:"X",n:"",c:"433100",p:"430000"},440100:{l:"G",n:"",c:"440100",p:"440000"},440200:{l:"S",n:"",c:"440200",p:"440000"},440300:{l:"S",n:"",c:"440300",p:"440000"},440400:{l:"Z",n:"",c:"440400",p:"440000"},440500:{l:"S",n:"",c:"440500",p:"440000"},440600:{l:"F",n:"",c:"440600",p:"440000"},440700:{l:"J",n:"",c:"440700",p:"440000"},440800:{l:"Z",n:"",c:"440800",p:"440000"},440900:{l:"M",n:"",c:"440900",p:"440000"},441200:{l:"Z",n:"",c:"441200",p:"440000"},441300:{l:"H",n:"",c:"441300",p:"440000"},441400:{l:"M",n:"",c:"441400",p:"440000"},441500:{l:"S",n:"",c:"441500",p:"440000"},441600:{l:"H",n:"",c:"441600",p:"440000"},441700:{l:"Y",n:"",c:"441700",p:"440000"},441800:{l:"Q",n:"",c:"441800",p:"440000"},441900:{l:"D",n:"",c:"441900",p:"440000"},442e3:{l:"Z",n:"",c:"442000",p:"440000"},445100:{l:"C",n:"",c:"445100",p:"440000"},445200:{l:"J",n:"",c:"445200",p:"440000"},445300:{l:"Y",n:"",c:"445300",p:"440000"},450100:{l:"N",n:"",c:"450100",p:"450000"},450200:{l:"L",n:"",c:"450200",p:"450000"},450300:{l:"G",n:"",c:"450300",p:"450000"},450400:{l:"W",n:"",c:"450400",p:"450000"},450500:{l:"B",n:"",c:"450500",p:"450000"},450600:{l:"F",n:"",c:"450600",p:"450000"},450700:{l:"Q",n:"",c:"450700",p:"450000"},450800:{l:"G",n:"",c:"450800",p:"450000"},450900:{l:"Y",n:"",c:"450900",p:"450000"},451e3:{l:"B",n:"",c:"451000",p:"450000"},451100:{l:"H",n:"",c:"451100",p:"450000"},451200:{l:"H",n:"",c:"451200",p:"450000"},451300:{l:"L",n:"",c:"451300",p:"450000"},451400:{l:"C",n:"",c:"451400",p:"450000"},460100:{l:"H",n:"",c:"460100",p:"460000"},460200:{l:"S",n:"",c:"460200",p:"460000"},460300:{l:"S",n:"",c:"460300",p:"460000"},460400:{l:"D",n:"",c:"460400",p:"460000"},469001:{l:"W",n:"",c:"469001",p:"460000"},469002:{l:"Q",n:"",c:"469002",p:"460000"},469005:{l:"W",n:"",c:"469005",p:"460000"},469006:{l:"W",n:"",c:"469006",p:"460000"},469007:{l:"D",n:"",c:"469007",p:"460000"},469021:{l:"D",n:"",c:"469021",p:"460000"},469022:{l:"T",n:"",c:"469022",p:"460000"},469023:{l:"C",n:"",c:"469023",p:"460000"},469024:{l:"L",n:"",c:"469024",p:"460000"},469025:{l:"B",n:"",c:"469025",p:"460000"},469026:{l:"C",n:"",c:"469026",p:"460000"},469027:{l:"L",n:"",c:"469027",p:"460000"},469028:{l:"L",n:"",c:"469028",p:"460000"},469029:{l:"B",n:"",c:"469029",p:"460000"},469030:{l:"Q",n:"",c:"469030",p:"460000"},5e5:{l:"C",n:"",c:"500000",p:"86"},510100:{l:"C",n:"",c:"510100",p:"510000"},510300:{l:"Z",n:"",c:"510300",p:"510000"},510400:{l:"P",n:"",c:"510400",p:"510000"},510500:{l:"L",n:"",c:"510500",p:"510000"},510600:{l:"D",n:"",c:"510600",p:"510000"},510700:{l:"M",n:"",c:"510700",p:"510000"},510800:{l:"G",n:"",c:"510800",p:"510000"},510900:{l:"S",n:"",c:"510900",p:"510000"},511e3:{l:"N",n:"",c:"511000",p:"510000"},511100:{l:"L",n:"",c:"511100",p:"510000"},511300:{l:"N",n:"",c:"511300",p:"510000"},511400:{l:"M",n:"",c:"511400",p:"510000"},511500:{l:"Y",n:"",c:"511500",p:"510000"},511600:{l:"G",n:"",c:"511600",p:"510000"},511700:{l:"D",n:"",c:"511700",p:"510000"},511800:{l:"Y",n:"",c:"511800",p:"510000"},511900:{l:"B",n:"",c:"511900",p:"510000"},512e3:{l:"Z",n:"",c:"512000",p:"510000"},513200:{l:"A",n:"",c:"513200",p:"510000"},513300:{l:"G",n:"",c:"513300",p:"510000"},513400:{l:"L",n:"",c:"513400",p:"510000"},520100:{l:"G",n:"",c:"520100",p:"520000"},520200:{l:"L",n:"",c:"520200",p:"520000"},520300:{l:"Z",n:"",c:"520300",p:"520000"},520400:{l:"A",n:"",c:"520400",p:"520000"},520500:{l:"B",n:"",c:"520500",p:"520000"},520600:{l:"T",n:"",c:"520600",p:"520000"},522300:{l:"Q",n:"",c:"522300",p:"520000"},522600:{l:"Q",n:"",c:"522600",p:"520000"},522700:{l:"Q",n:"",c:"522700",p:"520000"},530100:{l:"K",n:"",c:"530100",p:"530000"},530300:{l:"Q",n:"",c:"530300",p:"530000"},530400:{l:"Y",n:"",c:"530400",p:"530000"},530500:{l:"B",n:"",c:"530500",p:"530000"},530600:{l:"Z",n:"",c:"530600",p:"530000"},530700:{l:"L",n:"",c:"530700",p:"530000"},530800:{l:"P",n:"",c:"530800",p:"530000"},530900:{l:"L",n:"",c:"530900",p:"530000"},532300:{l:"C",n:"",c:"532300",p:"530000"},532500:{l:"H",n:"",c:"532500",p:"530000"},532600:{l:"W",n:"",c:"532600",p:"530000"},532800:{l:"X",n:"",c:"532800",p:"530000"},532900:{l:"D",n:"",c:"532900",p:"530000"},533100:{l:"D",n:"",c:"533100",p:"530000"},533300:{l:"N",n:"",c:"533300",p:"530000"},533400:{l:"D",n:"",c:"533400",p:"530000"},540100:{l:"L",n:"",c:"540100",p:"540000"},540200:{l:"R",n:"",c:"540200",p:"540000"},540300:{l:"C",n:"",c:"540300",p:"540000"},540400:{l:"L",n:"",c:"540400",p:"540000"},540500:{l:"S",n:"",c:"540500",p:"540000"},542400:{l:"N",n:"",c:"542400",p:"540000"},542500:{l:"A",n:"",c:"542500",p:"540000"},610100:{l:"X",n:"",c:"610100",p:"610000"},610200:{l:"T",n:"",c:"610200",p:"610000"},610300:{l:"B",n:"",c:"610300",p:"610000"},610400:{l:"X",n:"",c:"610400",p:"610000"},610500:{l:"W",n:"",c:"610500",p:"610000"},610600:{l:"Y",n:"",c:"610600",p:"610000"},610700:{l:"H",n:"",c:"610700",p:"610000"},610800:{l:"Y",n:"",c:"610800",p:"610000"},610900:{l:"A",n:"",c:"610900",p:"610000"},611e3:{l:"S",n:"",c:"611000",p:"610000"},620100:{l:"L",n:"",c:"620100",p:"620000"},620200:{l:"J",n:"",c:"620200",p:"620000"},620300:{l:"J",n:"",c:"620300",p:"620000"},620400:{l:"B",n:"",c:"620400",p:"620000"},620500:{l:"T",n:"",c:"620500",p:"620000"},620600:{l:"W",n:"",c:"620600",p:"620000"},620700:{l:"Z",n:"",c:"620700",p:"620000"},620800:{l:"P",n:"",c:"620800",p:"620000"},620900:{l:"J",n:"",c:"620900",p:"620000"},621e3:{l:"Q",n:"",c:"621000",p:"620000"},621100:{l:"D",n:"",c:"621100",p:"620000"},621200:{l:"L",n:"",c:"621200",p:"620000"},622900:{l:"L",n:"",c:"622900",p:"620000"},623e3:{l:"G",n:"",c:"623000",p:"620000"},630100:{l:"X",n:"",c:"630100",p:"630000"},630200:{l:"H",n:"",c:"630200",p:"630000"},632200:{l:"H",n:"",c:"632200",p:"630000"},632300:{l:"H",n:"",c:"632300",p:"630000"},632500:{l:"H",n:"",c:"632500",p:"630000"},632600:{l:"G",n:"",c:"632600",p:"630000"},632700:{l:"Y",n:"",c:"632700",p:"630000"},632800:{l:"H",n:"",c:"632800",p:"630000"},640100:{l:"Y",n:"",c:"640100",p:"640000"},640200:{l:"S",n:"",c:"640200",p:"640000"},640300:{l:"W",n:"",c:"640300",p:"640000"},640400:{l:"G",n:"",c:"640400",p:"640000"},640500:{l:"Z",n:"",c:"640500",p:"640000"},650100:{l:"W",n:"",c:"650100",p:"650000"},650200:{l:"K",n:"",c:"650200",p:"650000"},650400:{l:"T",n:"",c:"650400",p:"650000"},650500:{l:"H",n:"",c:"650500",p:"650000"},652300:{l:"C",n:"",c:"652300",p:"650000"},652700:{l:"B",n:"",c:"652700",p:"650000"},652800:{l:"B",n:"",c:"652800",p:"650000"},652900:{l:"A",n:"",c:"652900",p:"650000"},653e3:{l:"K",n:"",c:"653000",p:"650000"},653100:{l:"K",n:"",c:"653100",p:"650000"},653200:{l:"H",n:"",c:"653200",p:"650000"},654e3:{l:"Y",n:"",c:"654000",p:"650000"},654200:{l:"T",n:"",c:"654200",p:"650000"},654300:{l:"A",n:"",c:"654300",p:"650000"},659001:{l:"S",n:"",c:"659001",p:"650000"},659002:{l:"A",n:"",c:"659002",p:"650000"},659003:{l:"T",n:"",c:"659003",p:"650000"},659004:{l:"W",n:"",c:"659004",p:"650000"},659006:{l:"T",n:"",c:"659006",p:"650000"},710101:{l:"J",n:"",c:"710101",p:"710000"},710102:{l:"L",n:"",c:"710102",p:"710000"},710103:{l:"M",n:"",c:"710103",p:"710000"},710104:{l:"N",n:"",c:"710104",p:"710000"},710105:{l:"P",n:"",c:"710105",p:"710000"},710106:{l:"P",n:"",c:"710106",p:"710000"},710107:{l:"T",n:"",c:"710107",p:"710000"},710108:{l:"T",n:"",c:"710108",p:"710000"},710109:{l:"T",n:"",c:"710109",p:"710000"},710110:{l:"T",n:"",c:"710110",p:"710000"},710111:{l:"T",n:"",c:"710111",p:"710000"},710112:{l:"Y",n:"",c:"710112",p:"710000"},710113:{l:"X",n:"",c:"710113",p:"710000"},710114:{l:"Z",n:"",c:"710114",p:"710000"},710115:{l:"J",n:"",c:"710115",p:"710000"},710116:{l:"X",n:"",c:"710116",p:"710000"},710117:{l:"H",n:"",c:"710117",p:"710000"},710118:{l:"Y",n:"",c:"710118",p:"710000"},710119:{l:"G",n:"",c:"710119",p:"710000"},710120:{l:"J",n:"",c:"710120",p:"710000"},81e4:{l:"X",n:"",c:"810000",p:"86"},82e4:{l:"A",n:"",c:"820000",p:"86"}};function fm(a){return a.replace("","").replace("","").replace("","")}function yq(){const a=L(Rd),h=[];for(let p in a){const C=a[p];C.n=fm(C.n),h.push(C)}return h}function LA(a,h){if(!h)return"";const p=a.find(C=>C.n===h);return p?p.c:(console.error("[View UI warn]: City name error."),"")}function bq(a,h){return a.find(p=>p.c===h).n}const xq={name:"City",mixins:[fi],components:{Dropdown:jh,DropdownMenu:qh,Select:ls,Option:Pn,Tag:Ad,Icon:S,RadioGroup:Sy,Radio:Cy},emits:["on-change","update:modelValue"],props:{modelValue:{type:String},useName:{type:Boolean,default:!1},cities:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},placeholder:{type:String,default:""},searchPlaceholder:{type:String,default:""},transferClassName:{type:String}},data(){const a=yq();return{currentValue:this.useName?LA(a,this.modelValue):this.modelValue,visible:!1,provinceList:[],cityListByProvince:[],cityListByLetter:{},allCities:a,listType:"province",queryCity:""}},watch:{modelValue(a){const h=this.useName?LA(this.allCities,a):a;this.currentValue=h}},computed:{showCloseIcon(){return this.currentValue&&this.clearable&&!this.itemDisabled},classes(){return[{"ivu-city-show-clear":this.showCloseIcon,[`ivu-city-size-${this.size}`]:!!this.size,"ivu-city-visible":this.visible,"ivu-city-disabled":this.itemDisabled}]},transferClasses(){let a="ivu-city-transfer";return this.transferClassName&&(a+=` ${this.transferClassName}`),a},relCities(){const a=[];return this.cities.length&&this.cities.forEach(h=>{const p=Rd[h];p.n=fm(p.n),a.push(p)}),a},codeToName(){if(!this.currentValue)return this.placeholder;const a=Rd[this.currentValue].n;return this.showSuffix?a:fm(a)}},methods:{handleSelect(a){a&&(this.handleChangeValue(a),t.nextTick(()=>{this.queryCity=""}))},handleChangeValue(a){this.currentValue=a,this.visible=!1;const h=this.useName?bq(this.allCities,a):a;this.$emit("update:modelValue",h),this.$emit("on-change",Rd[a]),this.handleFormItemChange("change",a)},handleClickLetter(a){let h=a;h===""?h="Z1":h===""&&(h="Z2");const p=`.ivu-city-${h}`,C=this.$refs.list,w=C.querySelectorAll(p)[0].offsetTop,v=C.offsetTop;C.scrollTop=w-v},clearSelect(){if(this.itemDisabled)return!1},handleToggleOpen(){if(this.itemDisabled)return!1;this.visible=!this.visible},handleVisibleChange(a){this.visible=a},handleClickOutside(a){this.$refs.city.contains(a.target)||(this.visible=!1)},handleGetProvinceByLetter(){const a={A:{n:"A",p:[],c:[]},F:{n:"F",p:[],c:[]},G:{n:"G",p:[],c:[]},H:{n:"H",p:[],c:[]},J:{n:"J",p:[],c:[]},L:{n:"L",p:[],c:[]},N:{n:"N",p:[],c:[]},Q:{n:"Q",p:[],c:[]},S:{n:"S",p:[],c:[]},T:{n:"T",p:[],c:[]},X:{n:"X",p:[],c:[]},Y:{n:"Y",p:[],c:[]},Z:{n:"Z",p:[],c:[]},Z1:{n:"",p:[],c:[]},Z2:{n:"",p:[],c:[]}};for(let h in VA){const p=VA[h];a[p.l].p.push(p)}this.provinceList=a},handleGetCityByProvince(){const a=L(this.provinceList),h=[],p=L(Rd),C=[{p:{n:"",p:"86",l:"Z1"},c:[]},{p:{n:"",p:"86",l:"Z2"},c:[]}];for(let w in a){const v=a[w];for(let A=0;A<v.p.length;A++){const V=v.p[A],H=V.c,X={p:V,c:[]};for(let Y in p){const le=p[Y];le.n=fm(le.n),H===le.p&&X.c.push(le)}w==="Z1"?C[0].c.push(p[H]):w==="Z2"?C[1].c.push(p[H]):h.push(X)}}this.cityListByProvince=h.concat(C)},handleGetCityByLetter(){const a=L(Rd),h={A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],J:[],K:[],L:[],M:[],N:[],P:[],Q:[],R:[],S:[],T:[],W:[],X:[],Y:[],Z:[]};for(let p in a){const C=a[p];C.n=fm(C.n),h[C.l].push(C)}this.cityListByLetter=h}},created(){this.handleGetProvinceByLetter(),this.handleGetCityByProvince(),this.handleGetCityByLetter()}},Oq=["name","value"],wq={class:"ivu-city-drop"},_q={key:0,class:"ivu-city-drop-cities"},Sq=["onClick"],Cq={class:"ivu-city-drop-menu"},kq={class:"ivu-city-drop-type"},Tq={class:"ivu-city-drop-search"},Mq={key:1,class:"ivu-city-drop-list"},Eq={class:"ivu-city-drop-list-letter"},Pq={class:"ivu-city-drop-list-main",ref:"list"},Aq=["onClick"],Rq={key:2,class:"ivu-city-drop-list"},Iq={class:"ivu-city-drop-list-letter"},Dq={class:"ivu-city-drop-list-main ivu-city-drop-list-main-city",ref:"list"},Nq=["onClick"];function $q(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Radio"),H=t.resolveComponent("RadioGroup"),X=t.resolveComponent("Option"),Y=t.resolveComponent("Select"),le=t.resolveComponent("Tag"),xe=t.resolveComponent("DropdownMenu"),be=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-city",v.classes]),ref:"city"},[t.createVNode(be,{trigger:"custom",visible:w.visible,transfer:p.transfer,placement:"bottom-start","transfer-class-name":v.transferClasses,onOnVisibleChange:v.handleVisibleChange,onOnClickoutside:v.handleClickOutside},{list:t.withCtx(()=>[t.createVNode(xe,{onClick:h[3]||(h[3]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[t.createElementVNode("div",wq,[p.cities.length?(t.openBlock(),t.createElementBlock("div",_q,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.relCities,ge=>(t.openBlock(),t.createElementBlock("span",{key:ge.n,onClick:se=>v.handleChangeValue(ge.c)},t.toDisplayString(ge.n),9,Sq))),128))])):t.createCommentVNode("",!0),t.createElementVNode("div",Cq,[t.createElementVNode("div",kq,[t.createVNode(H,{modelValue:w.listType,"onUpdate:modelValue":h[1]||(h[1]=ge=>w.listType=ge),type:"button",size:"small"},{default:t.withCtx(()=>[t.createVNode(V,{label:"province"},{default:t.withCtx(()=>[t.createTextVNode("")]),_:1}),t.createVNode(V,{label:"city"},{default:t.withCtx(()=>[t.createTextVNode("")]),_:1})]),_:1},8,["modelValue"])]),t.createElementVNode("div",Tq,[t.createVNode(Y,{modelValue:w.queryCity,"onUpdate:modelValue":h[2]||(h[2]=ge=>w.queryCity=ge),filterable:"",size:"small",transfer:"",placeholder:p.searchPlaceholder,onOnChange:v.handleSelect},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.allCities,ge=>(t.openBlock(),t.createBlock(X,{value:ge.c,key:ge.c},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(ge.n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder","onOnChange"])])]),w.listType==="province"?(t.openBlock(),t.createElementBlock("div",Mq,[t.createElementVNode("div",Eq,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.provinceList,ge=>(t.openBlock(),t.createBlock(le,{onClick:se=>v.handleClickLetter(ge.n),type:"border",fade:!1,key:ge.n},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(ge.n),1)]),_:2},1032,["onClick"]))),128))]),t.createElementVNode("div",Pq,[t.createElementVNode("dl",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.cityListByProvince,ge=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:ge.p.n},[t.createElementVNode("dt",{class:t.normalizeClass("ivu-city-"+ge.p.l)},t.toDisplayString(ge.p.n)+"",3),t.createElementVNode("dd",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ge.c,se=>(t.openBlock(),t.createElementBlock("li",{key:se.n,onClick:Ae=>v.handleChangeValue(se.c)},t.toDisplayString(se.n),9,Aq))),128))])],64))),128))])],512)])):t.createCommentVNode("",!0),w.listType==="city"?(t.openBlock(),t.createElementBlock("div",Rq,[t.createElementVNode("div",Iq,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.cityListByLetter,(ge,se)=>(t.openBlock(),t.createBlock(le,{onClick:Ae=>v.handleClickLetter(se),type:"border",fade:!1,key:se},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(se),1)]),_:2},1032,["onClick"]))),128))]),t.createElementVNode("div",Dq,[t.createElementVNode("dl",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.cityListByLetter,(ge,se)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:se},[t.createElementVNode("dt",{class:t.normalizeClass("ivu-city-"+se)},t.toDisplayString(se)+"",3),t.createElementVNode("dd",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ge,Ae=>(t.openBlock(),t.createElementBlock("li",{key:Ae.n,onClick:$t=>v.handleChangeValue(Ae.c)},t.toDisplayString(Ae.n),9,Nq))),128))])],64))),128))])],512)])):t.createCommentVNode("",!0)])]),_:1})]),default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-city-rel",onClick:h[0]||(h[0]=t.withModifiers((...ge)=>v.handleToggleOpen&&v.handleToggleOpen(...ge),["prevent","stop"]))},[t.createElementVNode("input",{type:"hidden",name:p.name,value:w.currentValue},null,8,Oq),t.renderSlot(a.$slots,"default",{},()=>[t.createElementVNode("span",null,t.toDisplayString(v.codeToName),1),t.withDirectives(t.createVNode(A,{type:"ios-close-circle",class:"ivu-city-arrow",onClick:t.withModifiers(v.clearSelect,["stop"])},null,8,["onClick"]),[[t.vShow,v.showCloseIcon]]),t.createVNode(A,{type:"ios-arrow-down",class:"ivu-city-arrow"})])])]),_:3},8,["visible","transfer","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],2)}var BA=l(xq,[["render",$q]]);const UA="ivu-collapse",Vq={name:"Collapse",emits:["on-change","update:modelValue"],provide(){return{CollapseInstance:this}},props:{accordion:{type:Boolean,default:!1},modelValue:{type:[Array,String]},simple:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,panelCount:0}},computed:{classes(){return[`${UA}`,{[`${UA}-simple`]:this.simple}]}},methods:{getActiveKey(){let a=this.currentValue||[];const h=this.accordion;Array.isArray(a)||(a=[a]),h&&a.length>1&&(a=[a[0]]);for(let p=0;p<a.length;p++)a[p]=a[p].toString();return a},toggle(a){const h=a.name.toString();let p=[];if(this.accordion)a.isActive||p.push(h);else{let C=this.getActiveKey();const w=C.indexOf(h);a.isActive?w>-1&&C.splice(w,1):w<0&&C.push(h),p=C}this.currentValue=p,this.$emit("update:modelValue",p),this.$emit("on-change",p)}},watch:{modelValue(a){this.currentValue=a}}};function Lq(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.renderSlot(a.$slots,"default")],2)}var FA=l(Vq,[["render",Lq]]);function Ay(a){return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},Ay(a)}var Bq=/^\s+/,Uq=/\s+$/;function Nt(a,h){if(a=a||"",h=h||{},a instanceof Nt)return a;if(!(this instanceof Nt))return new Nt(a,h);var p=Fq(a);this._originalInput=a,this._r=p.r,this._g=p.g,this._b=p.b,this._a=p.a,this._roundA=Math.round(100*this._a)/100,this._format=h.format||p.format,this._gradientType=h.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=p.ok}Nt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(a.r*299+a.g*587+a.b*114)/1e3},getLuminance:function(){var a=this.toRgb(),h,p,C,w,v,A;return h=a.r/255,p=a.g/255,C=a.b/255,h<=.03928?w=h/12.92:w=Math.pow((h+.055)/1.055,2.4),p<=.03928?v=p/12.92:v=Math.pow((p+.055)/1.055,2.4),C<=.03928?A=C/12.92:A=Math.pow((C+.055)/1.055,2.4),.2126*w+.7152*v+.0722*A},setAlpha:function(a){return this._a=GA(a),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var a=XA(this._r,this._g,this._b);return{h:a.h*360,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=XA(this._r,this._g,this._b),h=Math.round(a.h*360),p=Math.round(a.s*100),C=Math.round(a.v*100);return this._a==1?"hsv("+h+", "+p+"%, "+C+"%)":"hsva("+h+", "+p+"%, "+C+"%, "+this._roundA+")"},toHsl:function(){var a=zA(this._r,this._g,this._b);return{h:a.h*360,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=zA(this._r,this._g,this._b),h=Math.round(a.h*360),p=Math.round(a.s*100),C=Math.round(a.l*100);return this._a==1?"hsl("+h+", "+p+"%, "+C+"%)":"hsla("+h+", "+p+"%, "+C+"%, "+this._roundA+")"},toHex:function(a){return WA(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(a){return Qq(this._r,this._g,this._b,this._a,a)},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Cn(this._r,255)*100)+"%",g:Math.round(Cn(this._g,255)*100)+"%",b:Math.round(Cn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Cn(this._r,255)*100)+"%, "+Math.round(Cn(this._g,255)*100)+"%, "+Math.round(Cn(this._b,255)*100)+"%)":"rgba("+Math.round(Cn(this._r,255)*100)+"%, "+Math.round(Cn(this._g,255)*100)+"%, "+Math.round(Cn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:nZ[WA(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var h="#"+QA(this._r,this._g,this._b,this._a),p=h,C=this._gradientType?"GradientType = 1, ":"";if(a){var w=Nt(a);p="#"+QA(w._r,w._g,w._b,w._a)}return"progid:DXImageTransform.Microsoft.gradient("+C+"startColorstr="+h+",endColorstr="+p+")"},toString:function(a){var h=!!a;a=a||this._format;var p=!1,C=this._a<1&&this._a>=0,w=!h&&C&&(a==="hex"||a==="hex6"||a==="hex3"||a==="hex4"||a==="hex8"||a==="name");return w?a==="name"&&this._a===0?this.toName():this.toRgbString():(a==="rgb"&&(p=this.toRgbString()),a==="prgb"&&(p=this.toPercentageRgbString()),(a==="hex"||a==="hex6")&&(p=this.toHexString()),a==="hex3"&&(p=this.toHexString(!0)),a==="hex4"&&(p=this.toHex8String(!0)),a==="hex8"&&(p=this.toHex8String()),a==="name"&&(p=this.toName()),a==="hsl"&&(p=this.toHslString()),a==="hsv"&&(p=this.toHsvString()),p||this.toHexString())},clone:function(){return Nt(this.toString())},_applyModification:function(a,h){var p=a.apply(null,[this].concat([].slice.call(h)));return this._r=p._r,this._g=p._g,this._b=p._b,this.setAlpha(p._a),this},lighten:function(){return this._applyModification(jq,arguments)},brighten:function(){return this._applyModification(qq,arguments)},darken:function(){return this._applyModification(Zq,arguments)},desaturate:function(){return this._applyModification(Hq,arguments)},saturate:function(){return this._applyModification(Gq,arguments)},greyscale:function(){return this._applyModification(Yq,arguments)},spin:function(){return this._applyModification(Kq,arguments)},_applyCombination:function(a,h){return a.apply(null,[this].concat([].slice.call(h)))},analogous:function(){return this._applyCombination(tZ,arguments)},complement:function(){return this._applyCombination(Jq,arguments)},monochromatic:function(){return this._applyCombination(iZ,arguments)},splitcomplement:function(){return this._applyCombination(eZ,arguments)},triad:function(){return this._applyCombination(HA,[3])},tetrad:function(){return this._applyCombination(HA,[4])}},Nt.fromRatio=function(a,h){if(Ay(a)=="object"){var p={};for(var C in a)a.hasOwnProperty(C)&&(C==="a"?p[C]=a[C]:p[C]=pm(a[C]));a=p}return Nt(a,h)};function Fq(a){var h={r:0,g:0,b:0},p=1,C=null,w=null,v=null,A=!1,V=!1;return typeof a=="string"&&(a=aZ(a)),Ay(a)=="object"&&(xl(a.r)&&xl(a.g)&&xl(a.b)?(h=zq(a.r,a.g,a.b),A=!0,V=String(a.r).substr(-1)==="%"?"prgb":"rgb"):xl(a.h)&&xl(a.s)&&xl(a.v)?(C=pm(a.s),w=pm(a.v),h=Wq(a.h,C,w),A=!0,V="hsv"):xl(a.h)&&xl(a.s)&&xl(a.l)&&(C=pm(a.s),v=pm(a.l),h=Xq(a.h,C,v),A=!0,V="hsl"),a.hasOwnProperty("a")&&(p=a.a)),p=GA(p),{ok:A,format:a.format||V,r:Math.min(255,Math.max(h.r,0)),g:Math.min(255,Math.max(h.g,0)),b:Math.min(255,Math.max(h.b,0)),a:p}}function zq(a,h,p){return{r:Cn(a,255)*255,g:Cn(h,255)*255,b:Cn(p,255)*255}}function zA(a,h,p){a=Cn(a,255),h=Cn(h,255),p=Cn(p,255);var C=Math.max(a,h,p),w=Math.min(a,h,p),v,A,V=(C+w)/2;if(C==w)v=A=0;else{var H=C-w;switch(A=V>.5?H/(2-C-w):H/(C+w),C){case a:v=(h-p)/H+(h<p?6:0);break;case h:v=(p-a)/H+2;break;case p:v=(a-h)/H+4;break}v/=6}return{h:v,s:A,l:V}}function Xq(a,h,p){var C,w,v;a=Cn(a,360),h=Cn(h,100),p=Cn(p,100);function A(X,Y,le){return le<0&&(le+=1),le>1&&(le-=1),le<1/6?X+(Y-X)*6*le:le<1/2?Y:le<2/3?X+(Y-X)*(2/3-le)*6:X}if(h===0)C=w=v=p;else{var V=p<.5?p*(1+h):p+h-p*h,H=2*p-V;C=A(H,V,a+1/3),w=A(H,V,a),v=A(H,V,a-1/3)}return{r:C*255,g:w*255,b:v*255}}function XA(a,h,p){a=Cn(a,255),h=Cn(h,255),p=Cn(p,255);var C=Math.max(a,h,p),w=Math.min(a,h,p),v,A,V=C,H=C-w;if(A=C===0?0:H/C,C==w)v=0;else{switch(C){case a:v=(h-p)/H+(h<p?6:0);break;case h:v=(p-a)/H+2;break;case p:v=(a-h)/H+4;break}v/=6}return{h:v,s:A,v:V}}function Wq(a,h,p){a=Cn(a,360)*6,h=Cn(h,100),p=Cn(p,100);var C=Math.floor(a),w=a-C,v=p*(1-h),A=p*(1-w*h),V=p*(1-(1-w)*h),H=C%6,X=[p,A,v,v,V,p][H],Y=[V,p,p,A,v,v][H],le=[v,v,V,p,p,A][H];return{r:X*255,g:Y*255,b:le*255}}function WA(a,h,p,C){var w=[na(Math.round(a).toString(16)),na(Math.round(h).toString(16)),na(Math.round(p).toString(16))];return C&&w[0].charAt(0)==w[0].charAt(1)&&w[1].charAt(0)==w[1].charAt(1)&&w[2].charAt(0)==w[2].charAt(1)?w[0].charAt(0)+w[1].charAt(0)+w[2].charAt(0):w.join("")}function Qq(a,h,p,C,w){var v=[na(Math.round(a).toString(16)),na(Math.round(h).toString(16)),na(Math.round(p).toString(16)),na(YA(C))];return w&&v[0].charAt(0)==v[0].charAt(1)&&v[1].charAt(0)==v[1].charAt(1)&&v[2].charAt(0)==v[2].charAt(1)&&v[3].charAt(0)==v[3].charAt(1)?v[0].charAt(0)+v[1].charAt(0)+v[2].charAt(0)+v[3].charAt(0):v.join("")}function QA(a,h,p,C){var w=[na(YA(C)),na(Math.round(a).toString(16)),na(Math.round(h).toString(16)),na(Math.round(p).toString(16))];return w.join("")}Nt.equals=function(a,h){return!a||!h?!1:Nt(a).toRgbString()==Nt(h).toRgbString()},Nt.random=function(){return Nt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Hq(a,h){h=h===0?0:h||10;var p=Nt(a).toHsl();return p.s-=h/100,p.s=Ry(p.s),Nt(p)}function Gq(a,h){h=h===0?0:h||10;var p=Nt(a).toHsl();return p.s+=h/100,p.s=Ry(p.s),Nt(p)}function Yq(a){return Nt(a).desaturate(100)}function jq(a,h){h=h===0?0:h||10;var p=Nt(a).toHsl();return p.l+=h/100,p.l=Ry(p.l),Nt(p)}function qq(a,h){h=h===0?0:h||10;var p=Nt(a).toRgb();return p.r=Math.max(0,Math.min(255,p.r-Math.round(255*-(h/100)))),p.g=Math.max(0,Math.min(255,p.g-Math.round(255*-(h/100)))),p.b=Math.max(0,Math.min(255,p.b-Math.round(255*-(h/100)))),Nt(p)}function Zq(a,h){h=h===0?0:h||10;var p=Nt(a).toHsl();return p.l-=h/100,p.l=Ry(p.l),Nt(p)}function Kq(a,h){var p=Nt(a).toHsl(),C=(p.h+h)%360;return p.h=C<0?360+C:C,Nt(p)}function Jq(a){var h=Nt(a).toHsl();return h.h=(h.h+180)%360,Nt(h)}function HA(a,h){if(isNaN(h)||h<=0)throw new Error("Argument to polyad must be a positive number");for(var p=Nt(a).toHsl(),C=[Nt(a)],w=360/h,v=1;v<h;v++)C.push(Nt({h:(p.h+v*w)%360,s:p.s,l:p.l}));return C}function eZ(a){var h=Nt(a).toHsl(),p=h.h;return[Nt(a),Nt({h:(p+72)%360,s:h.s,l:h.l}),Nt({h:(p+216)%360,s:h.s,l:h.l})]}function tZ(a,h,p){h=h||6,p=p||30;var C=Nt(a).toHsl(),w=360/p,v=[Nt(a)];for(C.h=(C.h-(w*h>>1)+720)%360;--h;)C.h=(C.h+w)%360,v.push(Nt(C));return v}function iZ(a,h){h=h||6;for(var p=Nt(a).toHsv(),C=p.h,w=p.s,v=p.v,A=[],V=1/h;h--;)A.push(Nt({h:C,s:w,v})),v=(v+V)%1;return A}Nt.mix=function(a,h,p){p=p===0?0:p||50;var C=Nt(a).toRgb(),w=Nt(h).toRgb(),v=p/100,A={r:(w.r-C.r)*v+C.r,g:(w.g-C.g)*v+C.g,b:(w.b-C.b)*v+C.b,a:(w.a-C.a)*v+C.a};return Nt(A)},Nt.readability=function(a,h){var p=Nt(a),C=Nt(h);return(Math.max(p.getLuminance(),C.getLuminance())+.05)/(Math.min(p.getLuminance(),C.getLuminance())+.05)},Nt.isReadable=function(a,h,p){var C=Nt.readability(a,h),w,v;switch(v=!1,w=lZ(p),w.level+w.size){case"AAsmall":case"AAAlarge":v=C>=4.5;break;case"AAlarge":v=C>=3;break;case"AAAsmall":v=C>=7;break}return v},Nt.mostReadable=function(a,h,p){var C=null,w=0,v,A,V,H;p=p||{},A=p.includeFallbackColors,V=p.level,H=p.size;for(var X=0;X<h.length;X++)v=Nt.readability(a,h[X]),v>w&&(w=v,C=Nt(h[X]));return Nt.isReadable(a,C,{level:V,size:H})||!A?C:(p.includeFallbackColors=!1,Nt.mostReadable(a,["#fff","#000"],p))};var W_=Nt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},nZ=Nt.hexNames=rZ(W_);function rZ(a){var h={};for(var p in a)a.hasOwnProperty(p)&&(h[a[p]]=p);return h}function GA(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function Cn(a,h){sZ(a)&&(a="100%");var p=oZ(a);return a=Math.min(h,Math.max(0,parseFloat(a))),p&&(a=parseInt(a*h,10)/100),Math.abs(a-h)<1e-6?1:a%h/parseFloat(h)}function Ry(a){return Math.min(1,Math.max(0,a))}function ro(a){return parseInt(a,16)}function sZ(a){return typeof a=="string"&&a.indexOf(".")!=-1&&parseFloat(a)===1}function oZ(a){return typeof a=="string"&&a.indexOf("%")!=-1}function na(a){return a.length==1?"0"+a:""+a}function pm(a){return a<=1&&(a=a*100+"%"),a}function YA(a){return Math.round(parseFloat(a)*255).toString(16)}function jA(a){return ro(a)/255}var ra=function(){var a="[-\\+]?\\d+%?",h="[-\\+]?\\d*\\.\\d+%?",p="(?:"+h+")|(?:"+a+")",C="[\\s|\\(]+("+p+")[,|\\s]+("+p+")[,|\\s]+("+p+")\\s*\\)?",w="[\\s|\\(]+("+p+")[,|\\s]+("+p+")[,|\\s]+("+p+")[,|\\s]+("+p+")\\s*\\)?";return{CSS_UNIT:new RegExp(p),rgb:new RegExp("rgb"+C),rgba:new RegExp("rgba"+w),hsl:new RegExp("hsl"+C),hsla:new RegExp("hsla"+w),hsv:new RegExp("hsv"+C),hsva:new RegExp("hsva"+w),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function xl(a){return!!ra.CSS_UNIT.exec(a)}function aZ(a){a=a.replace(Bq,"").replace(Uq,"").toLowerCase();var h=!1;if(W_[a])a=W_[a],h=!0;else if(a=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var p;return(p=ra.rgb.exec(a))?{r:p[1],g:p[2],b:p[3]}:(p=ra.rgba.exec(a))?{r:p[1],g:p[2],b:p[3],a:p[4]}:(p=ra.hsl.exec(a))?{h:p[1],s:p[2],l:p[3]}:(p=ra.hsla.exec(a))?{h:p[1],s:p[2],l:p[3],a:p[4]}:(p=ra.hsv.exec(a))?{h:p[1],s:p[2],v:p[3]}:(p=ra.hsva.exec(a))?{h:p[1],s:p[2],v:p[3],a:p[4]}:(p=ra.hex8.exec(a))?{r:ro(p[1]),g:ro(p[2]),b:ro(p[3]),a:jA(p[4]),format:h?"name":"hex8"}:(p=ra.hex6.exec(a))?{r:ro(p[1]),g:ro(p[2]),b:ro(p[3]),format:h?"name":"hex"}:(p=ra.hex4.exec(a))?{r:ro(p[1]+""+p[1]),g:ro(p[2]+""+p[2]),b:ro(p[3]+""+p[3]),a:jA(p[4]+""+p[4]),format:h?"name":"hex8"}:(p=ra.hex3.exec(a))?{r:ro(p[1]+""+p[1]),g:ro(p[2]+""+p[2]),b:ro(p[3]+""+p[3]),format:h?"name":"hex"}:!1}function lZ(a){var h,p;return a=a||{level:"AA",size:"small"},h=(a.level||"AA").toUpperCase(),p=(a.size||"small").toLowerCase(),h!=="AA"&&h!=="AAA"&&(h="AA"),p!=="small"&&p!=="large"&&(p="small"),{level:h,size:p}}var qA={inject:["ColorPickerInstance"],methods:{handleEscape(a){this.ColorPickerInstance.handleOnEscapeKeydown(a)}}},mm={data(){return{prefixCls:"ivu-color-picker",inputPrefixCls:"ivu-input",iconPrefixCls:"ivu-icon",transferPrefixCls:"ivu-transfer"}}};function Q_(a,h){const p=Nt(a),{_a:C}=p;return C==null&&p.setAlpha(h||1),p}function cZ(a,h){const p=h&&h.a;if(h){if(h.hsl)return Q_(h.hsl,p);if(h.hex&&h.hex.length>0)return Q_(h.hex,p)}return Q_(h,p)}function gm(a,h){const p=a===""?"#2d8cf0":a,C=cZ(a,p),w=C.toHsl(),v=C.toHsv();return w.s===0&&(w.h=p.h||p.hsl&&p.hsl.h||h||0,v.h=w.h),v.v<.0164&&(v.h=p.h||p.hsv&&p.hsv.h||0,v.s=p.s||p.hsv&&p.hsv.s||0),w.l<.01&&(w.h=p.h||p.hsl&&p.hsl.h||0,w.s=p.s||p.hsl&&p.hsl.s||0),{hsl:w,hex:C.toHexString().toUpperCase(),rgba:C.toRgb(),hsv:v,oldHue:p.h||h||w.h,source:p.source,a:p.a||C.getAlpha()}}function sa(a,h,p){return a<h?h:a>p?p:a}function ZA(a,h,p){return _(a,h)?p:0}function KA(a,h){return a.touches?a.touches[0][h]:0}function vm(a){const{r:h,g:p,b:C,a:w}=a;return`rgba(${[h,p,C,w].join(",")})`}const hZ={name:"RecommendedColors",mixins:[qA,mm],emits:["picker-color","change"],props:{list:{type:Array,default:void 0}},data(){const a=Math.ceil(this.list.length/12),h=1;return{left:-h,right:h,up:-h,down:h,powerKey:"shiftKey",grid:{x:1,y:1},rows:a,columns:12}},computed:{hideClass(){return`${this.prefixCls}-hide`},linearIndex(){return this.getLinearIndex(this.grid)},currentCircle(){return this.$refs[`color-circle-${this.linearIndex}`][0]}},methods:{getLinearIndex(a){return this.columns*(a.y-1)+a.x-1},getMaxLimit(a){return a==="x"?this.columns:this.rows},handleArrow(a,h,p){a.preventDefault(),a.stopPropagation(),this.blurColor();const C={...this.grid};a[this.powerKey]?p<0?C[h]=1:C[h]=this.getMaxLimit(h):C[h]+=p;const w=this.getLinearIndex(C);w>=0&&w<this.list.length&&(this.grid[h]=sa(C[h],1,this.getMaxLimit(h))),this.focusColor()},blurColor(){this.currentCircle.classList.add(this.hideClass)},focusColor(){this.currentCircle.classList.remove(this.hideClass)},handleEnter(a){this.handleClick(a,this.currentCircle)},handleClick(a,h){a.preventDefault(),a.stopPropagation(),this.$refs.reference.focus();const p=h||a.target,C=p.dataset.colorId||p.parentElement.dataset.colorId;if(C){this.blurColor();const w=Number(C)+1;this.grid.x=w%this.columns||this.columns,this.grid.y=Math.ceil(w/this.columns),this.focusColor(),this.$emit("picker-color",this.list[C]),this.$emit("change",{hex:this.list[C],source:"hex"})}},lineBreak(a,h){if(!h)return!1;const p=h+1;return p<a.length&&p%this.columns===0}}},uZ=["data-color-id"],dZ={key:0};function fZ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{ref:"reference",tabindex:"0",onClick:h[0]||(h[0]=(...A)=>v.handleClick&&v.handleClick(...A)),onKeydown:[h[1]||(h[1]=t.withKeys((...A)=>a.handleEscape&&a.handleEscape(...A),["esc"])),h[2]||(h[2]=t.withKeys((...A)=>v.handleEnter&&v.handleEnter(...A),["enter"])),h[3]||(h[3]=t.withKeys(A=>v.handleArrow(A,"x",w.left),["left"])),h[4]||(h[4]=t.withKeys(A=>v.handleArrow(A,"x",w.right),["right"])),h[5]||(h[5]=t.withKeys(A=>v.handleArrow(A,"y",w.up),["up"])),h[6]||(h[6]=t.withKeys(A=>v.handleArrow(A,"y",w.down),["down"]))],onBlur:h[7]||(h[7]=(...A)=>v.blurColor&&v.blurColor(...A)),onFocus:h[8]||(h[8]=(...A)=>v.focusColor&&v.focusColor(...A))},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.list,(A,V)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:A+":"+V},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-picker-colors-wrapper"])},[t.createElementVNode("div",{"data-color-id":V},[t.createElementVNode("div",{style:t.normalizeStyle({background:A}),class:t.normalizeClass([a.prefixCls+"-picker-colors-wrapper-color"])},null,6),t.createElementVNode("div",{ref_for:!0,ref:"color-circle-"+V,class:t.normalizeClass([a.prefixCls+"-picker-colors-wrapper-circle",v.hideClass])},null,2)],8,uZ)],2),v.lineBreak(p.list,V)?(t.openBlock(),t.createElementBlock("br",dZ)):t.createCommentVNode("",!0)],64))),128))],544)}var pZ=l(hZ,[["render",fZ]]),ym={mixins:[qA],props:{focused:{type:Boolean,default:!1},value:{type:Object,default:void 0}},created(){this.focused&&setTimeout(()=>this.$el.focus(),1)},beforeUnmount(){this.unbindEventListeners()},methods:{handleLeft(a){this.handleSlide(a,this.left,"left")},handleRight(a){this.handleSlide(a,this.right,"right")},handleUp(a){this.handleSlide(a,this.up,"up")},handleDown(a){this.handleSlide(a,this.down,"down")},handleMouseDown(a){this.ColorPickerInstance.handleOnDragging(!0),this.handleChange(a,!0),s(window,"mousemove",this.handleChange),s(window,"mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){o(window,"mousemove",this.handleChange),o(window,"mouseup",this.handleMouseUp),setTimeout(()=>this.ColorPickerInstance.handleOnDragging(!1),1)},getLeft(a){if(!r)return;const{container:h}=this.$refs,p=h.getBoundingClientRect().left+window.pageXOffset;return(a.pageX||KA(a,"PageX"))-p},getTop(a){if(!r)return;const{container:h}=this.$refs,p=h.getBoundingClientRect().top+window.pageYOffset;return(a.pageY||KA(a,"PageY"))-p}}};const mZ={name:"Saturation",mixins:[ym,mm],emits:["change"],data(){return{left:-.01,right:.01,up:.01,down:-.01,multiplier:10,powerKey:"shiftKey"}},computed:{bgColorStyle(){return{background:`hsl(${this.value.hsv.h}, 100%, 50%)`}},pointerStyle(){return{top:`${-(this.value.hsv.v*100)+1+100}%`,left:`${this.value.hsv.s*100}%`}}},methods:{change(a,h,p,C){this.$emit("change",{h:a,s:h,v:p,a:C,source:"hsva"})},handleSlide(a,h,p){a.preventDefault(),a.stopPropagation();const C=a[this.powerKey]?h*this.multiplier:h,{h:w,s:v,v:A,a:V}=this.value.hsv,H=sa(v+ZA(p,["left","right"],C),0,1),X=sa(A+ZA(p,["up","down"],C),0,1);this.change(w,H,X,V)},handleChange(a){a.preventDefault(),a.stopPropagation();const{clientWidth:h,clientHeight:p}=this.$refs.container,C=sa(this.getLeft(a),0,h),w=sa(this.getTop(a),0,p),v=C/h,A=sa(1-w/p,0,1);this.change(this.value.hsv.h,v,A,this.value.hsv.a)},handleMouseDown(a){ym.methods.handleMouseDown.call(this,a),s(window,"mouseup",this.handleChange)},unbindEventListeners(a){ym.methods.unbindEventListeners.call(this,a),o(window,"mouseup",this.handleChange)}}};function gZ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([a.prefixCls+"-saturation-wrapper"]),tabindex:"0",onKeydown:[h[1]||(h[1]=t.withKeys((...A)=>a.handleEscape&&a.handleEscape(...A),["esc"])),h[3]||(h[3]=t.withKeys((...A)=>a.handleLeft&&a.handleLeft(...A),["left"])),h[4]||(h[4]=t.withKeys((...A)=>a.handleRight&&a.handleRight(...A),["right"])),h[5]||(h[5]=t.withKeys((...A)=>a.handleUp&&a.handleUp(...A),["up"])),h[6]||(h[6]=t.withKeys((...A)=>a.handleDown&&a.handleDown(...A),["down"]))],onClick:h[2]||(h[2]=A=>a.$el.focus())},[t.createElementVNode("div",{ref:"container",style:t.normalizeStyle(v.bgColorStyle),class:t.normalizeClass([a.prefixCls+"-saturation"]),onMousedown:h[0]||(h[0]=(...A)=>v.handleMouseDown&&v.handleMouseDown(...A))},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-saturation--white"])},null,2),t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-saturation--black"])},null,2),t.createElementVNode("div",{style:t.normalizeStyle(v.pointerStyle),class:t.normalizeClass([a.prefixCls+"-saturation-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-saturation-circle"])},null,2)],6)],38)],34)}var vZ=l(mZ,[["render",gZ]]);const yZ={name:"Hue",mixins:[ym,mm],emits:["change"],data(){const a=.06944444444444445,h=20*a;return{left:-a,right:a,up:h,down:-h,powerKey:"shiftKey",percent:sa(this.value.hsl.h*100/360,0,100)}},watch:{value(){this.percent=sa(this.value.hsl.h*100/360,0,100)}},methods:{change(a){this.percent=sa(a,0,100);const{h,s:p,l:C,a:w}=this.value.hsl,v=sa(a/100*360,0,360);h!==v&&this.$emit("change",{h:v,s:p,l:C,a:w,source:"hsl"})},handleSlide(a,h){if(a.preventDefault(),a.stopPropagation(),a[this.powerKey]){this.change(h<0?0:100);return}this.change(this.percent+h)},handleChange(a){a.preventDefault(),a.stopPropagation();const h=this.getLeft(a);if(h<0){this.change(0);return}const{clientWidth:p}=this.$refs.container;if(h>p){this.change(100);return}this.change(h*100/p)}}};function bZ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([a.prefixCls+"-hue"]),tabindex:"0",onClick:h[3]||(h[3]=A=>a.$el.focus()),onKeydown:[h[4]||(h[4]=t.withKeys((...A)=>a.handleEscape&&a.handleEscape(...A),["esc"])),h[5]||(h[5]=t.withKeys((...A)=>a.handleLeft&&a.handleLeft(...A),["left"])),h[6]||(h[6]=t.withKeys((...A)=>a.handleRight&&a.handleRight(...A),["right"])),h[7]||(h[7]=t.withKeys((...A)=>a.handleUp&&a.handleUp(...A),["up"])),h[8]||(h[8]=t.withKeys((...A)=>a.handleDown&&a.handleDown(...A),["down"]))]},[t.createElementVNode("div",{ref:"container",class:t.normalizeClass([a.prefixCls+"-hue-container"]),onMousedown:h[0]||(h[0]=(...A)=>a.handleMouseDown&&a.handleMouseDown(...A)),onTouchmove:h[1]||(h[1]=(...A)=>v.handleChange&&v.handleChange(...A)),onTouchstart:h[2]||(h[2]=(...A)=>v.handleChange&&v.handleChange(...A))},[t.createElementVNode("div",{style:t.normalizeStyle({top:0,left:`${w.percent}%`}),class:t.normalizeClass([a.prefixCls+"-hue-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-hue-picker"])},null,2)],6)],34)],34)}var xZ=l(yZ,[["render",bZ]]);const OZ={name:"Alpha",mixins:[ym,mm],emits:["change"],data(){return{left:-1,right:1,up:10,down:-10,powerKey:"shiftKey"}},computed:{gradientStyle(){const{r:a,g:h,b:p}=this.value.rgba,C=vm({r:a,g:h,b:p,a:0}),w=vm({r:a,g:h,b:p,a:1});return{background:`linear-gradient(to right, ${C} 0%, ${w} 100%)`}}},methods:{change(a){const{h,s:p,l:C}=this.value.hsl,{a:w}=this.value;w!==a&&this.$emit("change",{h,s:p,l:C,a,source:"rgba"})},handleSlide(a,h){a.preventDefault(),a.stopPropagation(),this.change(sa(a[this.powerKey]?h:Math.round(this.value.hsl.a*100+h)/100,0,1))},handleChange(a){a.preventDefault(),a.stopPropagation();const h=this.getLeft(a);if(h<0){this.change(0);return}const{clientWidth:p}=this.$refs.container;if(h>p){this.change(1);return}this.change(Math.round(h*100/p)/100)}}};function wZ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([a.prefixCls+"-alpha"]),tabindex:"0",onClick:h[3]||(h[3]=A=>a.$el.focus()),onKeydown:[h[4]||(h[4]=t.withKeys((...A)=>a.handleEscape&&a.handleEscape(...A),["esc"])),h[5]||(h[5]=t.withKeys((...A)=>a.handleLeft&&a.handleLeft(...A),["left"])),h[6]||(h[6]=t.withKeys((...A)=>a.handleRight&&a.handleRight(...A),["right"])),h[7]||(h[7]=t.withKeys((...A)=>a.handleUp&&a.handleUp(...A),["up"])),h[8]||(h[8]=t.withKeys((...A)=>a.handleDown&&a.handleDown(...A),["down"]))]},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-alpha-checkboard-wrap"])},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-alpha-checkerboard"])},null,2)],2),t.createElementVNode("div",{style:t.normalizeStyle(v.gradientStyle),class:t.normalizeClass([a.prefixCls+"-alpha-gradient"])},null,6),t.createElementVNode("div",{ref:"container",class:t.normalizeClass([a.prefixCls+"-alpha-container"]),onMousedown:h[0]||(h[0]=(...A)=>a.handleMouseDown&&a.handleMouseDown(...A)),onTouchmove:h[1]||(h[1]=(...A)=>v.handleChange&&v.handleChange(...A)),onTouchstart:h[2]||(h[2]=(...A)=>v.handleChange&&v.handleChange(...A))},[t.createElementVNode("div",{style:t.normalizeStyle({top:0,left:`${a.value.a*100}%`}),class:t.normalizeClass([a.prefixCls+"-alpha-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-alpha-picker"])},null,2)],6)],34)],34)}var _Z=l(OZ,[["render",wZ]]);const SZ={name:"ColorPicker",components:{Drop:Ge,RecommendColors:pZ,Saturation:vZ,Hue:xZ,Alpha:_Z,iInput:Ao,iButton:cs,Icon:S},directives:{clickOutside:di},mixins:[ji,mm,fi,ia],emits:["on-active-change","on-open-change","on-change","on-pick-success","on-pick-clear","update:modelValue"],provide(){return{ColorPickerInstance:this}},props:{modelValue:{type:String,default:void 0},hue:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},recommend:{type:Boolean,default:!1},format:{type:String,validator(a){return _(a,["hsl","hsv","hex","rgb"])},default:void 0},colors:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},hideDropDown:{type:Boolean,default:!1},placement:{type:String,validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},name:{type:String,default:void 0},editable:{type:Boolean,default:!0},capture:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return a.$VIEWUI?a.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{val:gm(this.modelValue||""),currentValue:this.modelValue||"",dragging:!1,visible:!1,recommendedColor:["#2d8cf0","#19be6b","#ff9900","#ed4014","#00b5ff","#19c919","#f9e31c","#ea1a1a","#9b1dea","#00c2b1","#ac7a33","#1d35ea","#8bc34a","#f16b62","#ea4ca3","#0d94aa","#febd79","#5d4037","#00bcd4","#f06292","#cddc39","#607d8b","#000000","#ffffff"]}},computed:{arrowClasses(){return[`${this.inputPrefixCls}-icon`,`${this.inputPrefixCls}-icon-normal`]},transition(){return _(this.placement,["bottom-start","bottom","bottom-end"])?"slide-up":"fade"},saturationColors:{get(){return this.val},set(a){this.val=a,this.$emit("on-active-change",this.formatColor)}},classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-transfer`]:this.transfer}]},wrapClasses(){return[`${this.prefixCls}-rel`,`${this.prefixCls}-${this.size}`,`${this.inputPrefixCls}-wrapper`,`${this.inputPrefixCls}-wrapper-${this.size}`,{[`${this.prefixCls}-disabled`]:this.itemDisabled}]},inputClasses(){return[`${this.prefixCls}-input`,`${this.inputPrefixCls}`,`${this.inputPrefixCls}-${this.size}`,{[`${this.prefixCls}-focused`]:this.visible,[`${this.prefixCls}-disabled`]:this.itemDisabled}]},dropClasses(){return{[`${this.transferPrefixCls}-no-max-height`]:!0,[`${this.prefixCls}-transfer`]:this.transfer,[`${this.prefixCls}-hide-drop`]:this.hideDropDown,[this.transferClassName]:this.transferClassName}},displayedColorStyle(){return{backgroundColor:vm(this.visible?this.saturationColors.rgba:Nt(this.modelValue).toRgb())}},formatColor(){const{format:a,saturationColors:h}=this;if(a){if(a==="hsl")return Nt(h.hsl).toHslString();if(a==="hsv")return Nt(h.hsv).toHsvString();if(a==="hex")return h.hex;if(a==="rgb")return vm(h.rgba)}else if(this.alpha)return vm(h.rgba);return h.hex},confirmColorClasses(){return[`${this.prefixCls}-confirm-color`,{[`${this.prefixCls}-confirm-color-editable`]:this.editable}]},arrowType(){const a=this.globalConfig;let h="ios-arrow-down";return a&&(a.colorPicker.customArrow?h="":a.colorPicker.arrow&&(h=a.colorPicker.arrow)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.colorPicker.customArrow&&(h=a.colorPicker.customArrow),h},arrowSize(){const a=this.globalConfig;let h="";return a&&a.colorPicker.arrowSize&&(h=a.colorPicker.arrowSize),h}},watch:{modelValue(a){this.val=gm(a||"")},visible(a){this.val=gm(this.modelValue||""),this.$refs.drop[a?"update":"destroy"](),this.$emit("on-open-change",!!a)}},methods:{setDragging(a){this.dragging=a},handleClose(a){if(this.visible){if(this.dragging||a.type==="mousedown"){this.$refs.editColorInput&&a.target!==this.$refs.editColorInput.$el.querySelector("input")&&a.preventDefault();return}if(this.transfer){const h=this.$refs.drop.$refs.drop;if(h===a.target||h.contains(a.target))return}this.closer(a);return}this.visible=!1},toggleVisible(){this.itemDisabled||(this.visible=!this.visible,this.$refs.input.focus())},childChange(a){this.colorChange(a)},colorChange(a,h){this.oldHue=this.saturationColors.hsl.h,this.saturationColors=gm(a,h||this.oldHue)},closer(a){a&&(a.preventDefault(),a.stopPropagation()),this.visible=!1,this.$refs.input.focus()},handleButtons(a,h){this.currentValue=h,this.$emit("update:modelValue",h),this.$emit("on-change",h),this.handleFormItemChange("change",h),this.closer(a)},handleSuccess(a){this.handleButtons(a,this.formatColor),this.$emit("on-pick-success")},handleClear(a){this.handleButtons(a,""),this.$emit("on-pick-clear")},handleSelectColor(a){this.val=gm(a),this.$emit("on-active-change",this.formatColor)},handleEditColor(a){const h=a.target.value;this.handleSelectColor(h)},handleFirstTab(a){a.shiftKey&&(a.preventDefault(),a.stopPropagation(),this.$refs.ok.$el.focus())},handleLastTab(a){a.shiftKey||(a.preventDefault(),a.stopPropagation(),this.$refs.saturation.$el.focus())},onTab(a){this.visible&&a.preventDefault()},onEscape(a){this.visible&&this.closer(a)},onArrow(a){this.visible||(a.preventDefault(),a.stopPropagation(),this.visible=!0)},handleOnEscapeKeydown(a){this.closer(a)},handleOnDragging(a){this.setDragging(a)}}},CZ=["name","value"],kZ=["tabindex"];function TZ(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Saturation"),H=t.resolveComponent("Hue"),X=t.resolveComponent("Alpha"),Y=t.resolveComponent("recommend-colors"),le=t.resolveComponent("i-input"),xe=t.resolveComponent("i-button"),be=t.resolveComponent("Drop"),ge=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass(v.wrapClasses),onClick:h[4]||(h[4]=(...se)=>v.toggleVisible&&v.toggleVisible(...se))},[t.createElementVNode("input",{name:p.name,value:w.currentValue,type:"hidden"},null,8,CZ),t.createVNode(A,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:t.normalizeClass(v.arrowClasses)},null,8,["type","custom","size","class"]),t.createElementVNode("div",{ref:"input",tabindex:a.itemDisabled?void 0:0,class:t.normalizeClass(v.inputClasses),onKeydown:[h[0]||(h[0]=t.withKeys((...se)=>v.onTab&&v.onTab(...se),["tab"])),h[1]||(h[1]=t.withKeys((...se)=>v.onEscape&&v.onEscape(...se),["esc"])),h[2]||(h[2]=t.withKeys((...se)=>v.onArrow&&v.onArrow(...se),["up"])),h[3]||(h[3]=t.withKeys((...se)=>v.onArrow&&v.onArrow(...se),["down"]))]},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-color"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-color-empty"])},[t.createElementVNode("i",{class:t.normalizeClass([a.iconPrefixCls,a.iconPrefixCls+"-ios-close"])},null,2)],2),[[t.vShow,p.modelValue===""&&!w.visible]]),t.withDirectives(t.createElementVNode("div",{style:t.normalizeStyle(v.displayedColorStyle)},null,4),[[t.vShow,p.modelValue||w.visible]])],2)],42,kZ)],2),t.createVNode(be,{ref:"drop",visible:w.visible,placement:p.placement,transfer:p.transfer,classes:v.dropClasses,eventsEnabled:p.eventsEnabled,"transition-name":"transition-drop"},{default:t.withCtx(()=>[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[w.visible?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([a.prefixCls+"-picker"])},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-picker-wrapper"])},[t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-picker-panel"])},[t.createVNode(V,{ref:"saturation",value:v.saturationColors,focused:w.visible,onChange:v.childChange,onKeydown:t.withKeys(v.handleFirstTab,["tab"])},null,8,["value","focused","onChange","onKeydown"])],2),p.hue?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([a.prefixCls+"-picker-hue-slider"])},[t.createVNode(H,{value:v.saturationColors,onChange:v.childChange},null,8,["value","onChange"])],2)):t.createCommentVNode("",!0),p.alpha?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([a.prefixCls+"-picker-alpha-slider"])},[t.createVNode(X,{value:v.saturationColors,onChange:v.childChange},null,8,["value","onChange"])],2)):t.createCommentVNode("",!0),p.colors.length?(t.openBlock(),t.createBlock(Y,{key:2,list:p.colors,class:t.normalizeClass([a.prefixCls+"-picker-colors"]),onPickerColor:v.handleSelectColor},null,8,["list","class","onPickerColor"])):t.createCommentVNode("",!0),!p.colors.length&&p.recommend?(t.openBlock(),t.createBlock(Y,{key:3,list:w.recommendedColor,class:t.normalizeClass([a.prefixCls+"-picker-colors"]),onPickerColor:v.handleSelectColor},null,8,["list","class","onPickerColor"])):t.createCommentVNode("",!0)],2),t.createElementVNode("div",{class:t.normalizeClass([a.prefixCls+"-confirm"])},[t.createElementVNode("span",{class:t.normalizeClass(v.confirmColorClasses)},[p.editable?(t.openBlock(),t.createBlock(le,{key:0,ref:"editColorInput",modelValue:v.formatColor,size:"small",onOnEnter:v.handleEditColor,onOnBlur:v.handleEditColor},null,8,["modelValue","onOnEnter","onOnBlur"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(v.formatColor),1)],64))],2),t.createVNode(xe,{class:t.normalizeClass([a.prefixCls+"-confirm-btn-cancel"]),ref:"clear",tabindex:0,size:"small",onClick:v.handleClear,onKeydown:[t.withKeys(v.handleClear,["enter"]),t.withKeys(v.closer,["esc"])]},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.t("i.datepicker.clear")),1)]),_:1},8,["class","onClick","onKeydown"]),t.createVNode(xe,{ref:"ok",tabindex:0,size:"small",type:"primary",onClick:v.handleSuccess,onKeydown:[t.withKeys(v.handleLastTab,["tab"]),t.withKeys(v.handleSuccess,["enter"]),t.withKeys(v.closer,["esc"])]},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.t("i.datepicker.ok")),1)]),_:1},8,["onClick","onKeydown"])],2)],2)):t.createCommentVNode("",!0)]),_:1})]),_:1},8,["visible","placement","transfer","classes","eventsEnabled"])],2)),[[ge,v.handleClose,p.capture]])}var JA=l(SZ,[["render",TZ]]);const MZ="ivu-layout",EZ={name:"Content",computed:{wrapClasses(){return`${MZ}-content`}}};function PZ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[t.renderSlot(a.$slots,"default")],2)}var H_=l(EZ,[["render",PZ]]);function AZ(a){var h;if(a.nodeName==="SELECT")a.focus(),h=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var p=a.hasAttribute("readonly");p||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),p||a.removeAttribute("readonly"),h=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var C=window.getSelection(),w=document.createRange();w.selectNodeContents(a),C.removeAllRanges(),C.addRange(w),h=C.toString()}return h}var RZ=AZ,e4={name:"RenderCell",props:{render:Function},render(){return this.render(t.h)}};const IZ={components:{RenderCell:e4},props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},withIcon:Boolean,render:{type:Function},hasTitle:Boolean,styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String},background:{type:Boolean,default:!1},msgType:{type:String}},data(){return{withDesc:!1}},computed:{baseClass(){return`${this.prefixCls}-notice`},renderFunc(){return this.render||function(){}},classes(){return[this.baseClass,{[`${this.className}`]:!!this.className,[`${this.baseClass}-closable`]:this.closable,[`${this.baseClass}-with-desc`]:this.withDesc,[`${this.baseClass}-with-background`]:this.background}]},contentClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]},messageContentClasses(){return[`${this.baseClass}-content`,{[`${this.baseClass}-content-${this.msgType}`]:this.msgType,[`${this.baseClass}-content-background`]:this.background}]},contentWithIcon(){return[this.withIcon?`${this.prefixCls}-content-with-icon`:"",!this.hasTitle&&this.withIcon?`${this.prefixCls}-content-with-render-notitle`:""]},messageClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]}},methods:{clearCloseTimer(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close(){this.clearCloseTimer(),this.onClose(),this.$parent.$parent.close(this.name)},handleEnter(a){this.type==="message"&&(a.style.height=a.scrollHeight+"px")},handleLeave(a){this.type==="message"&&r&&document.getElementsByClassName("ivu-message-notice").length!==1&&(a.style.height=0,a.style.paddingTop=0,a.style.paddingBottom=0)}},mounted(){if(this.handleEnter(this.$el),this.clearCloseTimer(),this.duration!==0&&(this.closeTimer=setTimeout(()=>{this.close()},this.duration*1e3)),this.prefixCls==="ivu-notice"){let a=this.$refs.content.querySelectorAll(`.${this.prefixCls}-desc`)[0];this.withDesc=this.render?!0:a?a.innerHTML!=="":!1}},beforeUnmount(){this.handleLeave(this.$el),this.clearCloseTimer()}},DZ=["innerHTML"],NZ=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)],$Z=["innerHTML"],VZ=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)];function LZ(a,h,p,C,w,v){const A=t.resolveComponent("render-cell");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(p.styles)},[p.type==="notice"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("div",{class:t.normalizeClass(v.contentClasses),ref:"content",innerHTML:p.content},null,10,DZ),t.createElementVNode("div",{class:t.normalizeClass(v.contentWithIcon)},[t.createVNode(A,{render:v.renderFunc},null,8,["render"])],2),p.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([v.baseClass+"-close"]),onClick:h[0]||(h[0]=(...V)=>v.close&&v.close(...V))},NZ,2)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0),p.type==="message"?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(v.messageContentClasses),ref:"content"},[t.createElementVNode("div",{class:t.normalizeClass([v.baseClass+"-content-text"]),innerHTML:p.content},null,10,$Z),t.createElementVNode("div",{class:t.normalizeClass([v.baseClass+"-content-text"])},[t.createVNode(A,{render:v.renderFunc},null,8,["render"])],2),p.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([v.baseClass+"-close"]),onClick:h[1]||(h[1]=(...V)=>v.close&&v.close(...V))},VZ,2)):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0)],6)}var BZ=l(IZ,[["render",LZ]]);const UZ="ivu-notification";let FZ=0;const zZ=Date.now();function XZ(){return"ivuNotification_"+zZ+"_"+FZ++}const WZ={components:{Notice:BZ},props:{prefixCls:{type:String,default:UZ},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String},transitionName:{type:String}},data(){return{notices:[],tIndex:this.handleGetIndex()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.className}`]:!!this.className}]},wrapStyles(){let a=Object.assign({},this.styles);return a["z-index"]=1010+this.tIndex,a}},methods:{add(a){const h=a.name||XZ();let p=Object.assign({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:h},a);this.notices.push(p),this.tIndex=this.handleGetIndex()},close(a){const h=this.notices;for(let p=0;p<h.length;p++)if(h[p].name===a){this.notices.splice(p,1);break}},closeAll(){this.notices=[]},handleGetIndex(){return We(),Oe}}};function QZ(a,h,p,C,w,v){const A=t.resolveComponent("Notice");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.wrapStyles)},[t.createVNode(t.TransitionGroup,{name:p.transitionName,appear:""},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.notices,V=>(t.openBlock(),t.createBlock(A,{key:V.name,"prefix-cls":p.prefixCls,styles:V.styles,type:V.type,content:V.content,duration:V.duration,render:V.render,"has-title":V.hasTitle,withIcon:V.withIcon,closable:V.closable,name:V.name,"transition-name":V.transitionName,background:V.background,"msg-type":V.msgType,"on-close":V.onClose},null,8,["prefix-cls","styles","type","content","duration","render","has-title","withIcon","closable","name","transition-name","background","msg-type","on-close"]))),128))]),_:1},8,["name"])],6)}var Iy=l(WZ,[["render",QZ]]);Iy.newInstance=a=>{if(!r)return;const h=a||{};let p=null;const C=t.createApp({render(){return t.h(Iy,Object.assign({ref:"notification"},h))},created(){p=t.getCurrentInstance()}}),w=document.createElement("div");document.body.appendChild(w),C.mount(w);const v=p.refs.notification;return{notice(A){v.add(A)},remove(A){v.close(A)},component:v,destroy(A){v.closeAll(),r&&setTimeout(function(){document.body.removeChild(document.getElementsByClassName(A)[0])},500)}}};const G_="ivu-message",t4="ivu-icon",i4="ivu_message_key_",Id={top:24,duration:1.5,background:!1};let Dy,n4=1;const HZ={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle",loading:"ios-loading"},r4="move-up";function s4(){return Dy=Dy||Iy.newInstance({prefixCls:G_,styles:{top:`${Id.top}px`},transitionName:r4}),Dy}function GZ(a="",h=Id.duration,p,C=function(){},w=!1,v=function(){},A=Id.background){const V=HZ[p],H=p==="loading"?" ivu-load-loop":"";let X=s4();return X.notice({name:`${i4}${n4}`,duration:h,styles:{},transitionName:r4,content:`
            <div class="${G_}-custom-content ${G_}-${p}">
                <i class="${t4} ${t4}-${V} ${H}"></i>
                <span>${a}</span>
            </div>
        `,render:v,onClose:C,closable:w,type:"message",msgType:p,background:A}),function(){let Y=n4++;return function(){X.remove(`${i4}${Y}`)}}()}var bm={name:"Message",info(a){return this.message("info",a)},success(a){return this.message("success",a)},warning(a){return this.message("warning",a)},error(a){return this.message("error",a)},loading(a){return this.message("loading",a)},message(a,h){return typeof h=="string"&&(h={content:h}),GZ(h.content,h.duration,a,h.onClose,h.closable,h.render,h.background)},config(a){(a.top||a.top===0)&&(Id.top=a.top),(a.duration||a.duration===0)&&(Id.duration=a.duration),a.background&&(Id.background=a.background)},destroy(){let a=s4();Dy=null,a.destroy("ivu-message")}};const YZ="",jZ="";function Ny({text:a="",successTip:h=YZ,errorTip:p=jZ,success:C,error:w,showTip:v=!0}){if(!r)return;const A=document.documentElement.getAttribute("dir")==="rtl",V=document.createElement("textarea");V.style.fontSize="12pt",V.style.border="0",V.style.padding="0",V.style.margin="0",V.style.position="absolute",V.style[A?"right":"left"]="-9999px";let H=window.pageYOffset||document.documentElement.scrollTop;V.style.top=`${H}px`,V.setAttribute("readonly",""),V.value=a,document.body.appendChild(V),RZ(V);let X;try{X=document.execCommand("copy"),v&&bm.success({content:h}),document.body.removeChild(V),C&&C.call()}catch{X=!1,v&&bm.error({content:p}),document.body.removeChild(V),w&&w.call()}}function Y_(a){return a*1<10?`0${a}`:a}const qZ={name:"CountDown",emits:["on-end"],props:{format:{type:Function},target:{type:[Date,Number]},interval:{type:Number,default:1e3}},data(){return{lastTime:""}},methods:{initTime(){let a=0,h=0;try{Object.prototype.toString.call(this.target)==="[object Date]"?h=this.target.getTime():h=new Date(this.target).getTime()}catch(p){throw new Error("invalid target prop",p)}return a=h-new Date().getTime(),a<0?0:a},tick(){let{lastTime:a}=this;this.timer=setTimeout(()=>{a<this.interval?(clearTimeout(this.timer),this.lastTime=0,this.$emit("on-end")):(a-=this.interval,this.lastTime=a,this.tick())},this.interval)},defaultFormat(a){const h=Math.floor(a/36e5),p=Math.floor((a-h*36e5)/6e4),C=Math.floor((a-h*36e5-p*6e4)/1e3);return`${Y_(h)}:${Y_(p)}:${Y_(C)}`}},computed:{result(){const{format:a=this.defaultFormat}=this;return a(this.lastTime)}},watch:{target(){this.timer&&clearTimeout(this.timer),this.lastTime=this.initTime(),this.tick()}},created(){this.lastTime=this.initTime()},mounted(){this.tick()},beforeUnmount(){this.timer&&clearTimeout(this.timer)}};function ZZ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("span",null,t.toDisplayString(v.result),1)}var o4=l(qZ,[["render",ZZ]]),j_={exports:{}};(function(a,h){(function(p,C){a.exports=C(G,h,a)})(J,function(p,C,w){var v=function(A,V,H,X,Y,le){function xe(He){var De,Ke,Ye,Xt,Wt,Mt,Ot=He<0;if(He=Math.abs(He).toFixed(se.decimals),He+="",De=He.split("."),Ke=De[0],Ye=De.length>1?se.options.decimal+De[1]:"",se.options.useGrouping){for(Xt="",Wt=0,Mt=Ke.length;Wt<Mt;++Wt)Wt!==0&&Wt%3===0&&(Xt=se.options.separator+Xt),Xt=Ke[Mt-Wt-1]+Xt;Ke=Xt}return se.options.numerals.length&&(Ke=Ke.replace(/[0-9]/g,function(Rt){return se.options.numerals[+Rt]}),Ye=Ye.replace(/[0-9]/g,function(Rt){return se.options.numerals[+Rt]})),(Ot?"-":"")+se.options.prefix+Ke+Ye+se.options.suffix}function be(He,De,Ke,Ye){return Ke*(-Math.pow(2,-10*He/Ye)+1)*1024/1023+De}function ge(He){return typeof He=="number"&&!isNaN(He)}var se=this;if(se.version=function(){return"1.9.3"},se.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:be,formattingFn:xe,prefix:"",suffix:"",numerals:[]},le&&typeof le=="object")for(var Ae in se.options)le.hasOwnProperty(Ae)&&le[Ae]!==null&&(se.options[Ae]=le[Ae]);se.options.separator===""?se.options.useGrouping=!1:se.options.separator=""+se.options.separator;for(var $t=0,mt=["webkit","moz","ms","o"],xt=0;xt<mt.length&&!window.requestAnimationFrame;++xt)window.requestAnimationFrame=window[mt[xt]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[mt[xt]+"CancelAnimationFrame"]||window[mt[xt]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(He,De){var Ke=new Date().getTime(),Ye=Math.max(0,16-(Ke-$t)),Xt=window.setTimeout(function(){He(Ke+Ye)},Ye);return $t=Ke+Ye,Xt}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(He){clearTimeout(He)}),se.initialize=function(){return!!se.initialized||(se.error="",se.d=typeof A=="string"?document.getElementById(A):A,se.d?(se.startVal=Number(V),se.endVal=Number(H),ge(se.startVal)&&ge(se.endVal)?(se.decimals=Math.max(0,X||0),se.dec=Math.pow(10,se.decimals),se.duration=1e3*Number(Y)||2e3,se.countDown=se.startVal>se.endVal,se.frameVal=se.startVal,se.initialized=!0,!0):(se.error="[CountUp] startVal ("+V+") or endVal ("+H+") is not a number",!1)):(se.error="[CountUp] target is null or undefined",!1))},se.printValue=function(He){var De=se.options.formattingFn(He);se.d.tagName==="INPUT"?this.d.value=De:se.d.tagName==="text"||se.d.tagName==="tspan"?this.d.textContent=De:this.d.innerHTML=De},se.count=function(He){se.startTime||(se.startTime=He),se.timestamp=He;var De=He-se.startTime;se.remaining=se.duration-De,se.options.useEasing?se.countDown?se.frameVal=se.startVal-se.options.easingFn(De,0,se.startVal-se.endVal,se.duration):se.frameVal=se.options.easingFn(De,se.startVal,se.endVal-se.startVal,se.duration):se.countDown?se.frameVal=se.startVal-(se.startVal-se.endVal)*(De/se.duration):se.frameVal=se.startVal+(se.endVal-se.startVal)*(De/se.duration),se.countDown?se.frameVal=se.frameVal<se.endVal?se.endVal:se.frameVal:se.frameVal=se.frameVal>se.endVal?se.endVal:se.frameVal,se.frameVal=Math.round(se.frameVal*se.dec)/se.dec,se.printValue(se.frameVal),De<se.duration?se.rAF=requestAnimationFrame(se.count):se.callback&&se.callback()},se.start=function(He){se.initialize()&&(se.callback=He,se.rAF=requestAnimationFrame(se.count))},se.pauseResume=function(){se.paused?(se.paused=!1,delete se.startTime,se.duration=se.remaining,se.startVal=se.frameVal,requestAnimationFrame(se.count)):(se.paused=!0,cancelAnimationFrame(se.rAF))},se.reset=function(){se.paused=!1,delete se.startTime,se.initialized=!1,se.initialize()&&(cancelAnimationFrame(se.rAF),se.printValue(se.startVal))},se.update=function(He){if(se.initialize()){if(He=Number(He),!ge(He))return void(se.error="[CountUp] update() - new endVal is not a number: "+He);se.error="",He!==se.frameVal&&(cancelAnimationFrame(se.rAF),se.paused=!1,delete se.startTime,se.startVal=se.frameVal,se.endVal=He,se.countDown=se.startVal>se.endVal,se.rAF=requestAnimationFrame(se.count))}},se.initialize()&&se.printValue(se.startVal)};return v})})(j_,j_.exports);var KZ=j_.exports;const JZ={name:"CountUp",props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1,default(){return{}}},callback:{type:Function,required:!1,default:()=>{}}},data(){return{CountUp:null}},watch:{end(a){this.CountUp&&this.CountUp.update&&this.CountUp.update(a)}},mounted(){this.init()},methods:{init(){this.CountUp||(this.CountUp=new KZ(this.$el,this.start,this.end,this.decimals,this.duration,this.options),this.CountUp.start(()=>{this.callback(this.CountUp)}))},destroy(){this.CountUp=null}},beforeUnmounted(){this.destroy()},start(a){this.CountUp&&this.CountUp.start&&this.CountUp.start(()=>{a&&a(this.CountUp)})},pauseResume(){this.CountUp&&this.CountUp.pauseResume&&this.CountUp.pauseResume()},reset(){this.CountUp&&this.CountUp.reset&&this.CountUp.reset()},update(a){this.CountUp&&this.CountUp.update&&this.CountUp.update(a)}},eK={class:"ivu-count-up"};function tK(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("span",eK)}var a4=l(JZ,[["render",tK]]),oa={},l4=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Zh=/\d\d?/,iK=/\d{3}/,nK=/\d{4}/,$y=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,c4=function(){};function h4(a,h){for(var p=[],C=0,w=a.length;C<w;C++)p.push(a[C].substr(0,h));return p}function u4(a){return function(h,p,C){var w=C[a].indexOf(p.charAt(0).toUpperCase()+p.substr(1).toLowerCase());~w&&(h.month=w)}}function $a(a,h){for(a=String(a),h=h||2;a.length<h;)a="0"+a;return a}var d4=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f4=["January","February","March","April","May","June","July","August","September","October","November","December"],rK=h4(f4,3),sK=h4(d4,3);oa.i18n={dayNamesShort:sK,dayNames:d4,monthNamesShort:rK,monthNames:f4,amPm:["am","pm"],DoFn:function(a){return a+["th","st","nd","rd"][a%10>3?0:(a-a%10!==10)*a%10]}};var p4={D:function(a){return a.getDay()},DD:function(a){return $a(a.getDay())},Do:function(a,h){return h.DoFn(a.getDate())},d:function(a){return a.getDate()},dd:function(a){return $a(a.getDate())},ddd:function(a,h){return h.dayNamesShort[a.getDay()]},dddd:function(a,h){return h.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return $a(a.getMonth()+1)},MMM:function(a,h){return h.monthNamesShort[a.getMonth()]},MMMM:function(a,h){return h.monthNames[a.getMonth()]},yy:function(a){return String(a.getFullYear()).substr(2)},yyyy:function(a){return a.getFullYear()},h:function(a){return a.getHours()%12||12},hh:function(a){return $a(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return $a(a.getHours())},m:function(a){return a.getMinutes()},mm:function(a){return $a(a.getMinutes())},s:function(a){return a.getSeconds()},ss:function(a){return $a(a.getSeconds())},S:function(a){return Math.round(a.getMilliseconds()/100)},SS:function(a){return $a(Math.round(a.getMilliseconds()/10),2)},SSS:function(a){return $a(a.getMilliseconds(),3)},a:function(a,h){return a.getHours()<12?h.amPm[0]:h.amPm[1]},A:function(a,h){return a.getHours()<12?h.amPm[0].toUpperCase():h.amPm[1].toUpperCase()},ZZ:function(a){var h=a.getTimezoneOffset();return(h>0?"-":"+")+$a(Math.floor(Math.abs(h)/60)*100+Math.abs(h)%60,4)}},$n={d:[Zh,function(a,h){a.day=h}],M:[Zh,function(a,h){a.month=h-1}],yy:[Zh,function(a,h){var p=new Date,C=+(""+p.getFullYear()).substr(0,2);a.year=""+(h>68?C-1:C)+h}],h:[Zh,function(a,h){a.hour=h}],m:[Zh,function(a,h){a.minute=h}],s:[Zh,function(a,h){a.second=h}],yyyy:[nK,function(a,h){a.year=h}],S:[/\d/,function(a,h){a.millisecond=h*100}],SS:[/\d{2}/,function(a,h){a.millisecond=h*10}],SSS:[iK,function(a,h){a.millisecond=h}],D:[Zh,c4],ddd:[$y,c4],MMM:[$y,u4("monthNamesShort")],MMMM:[$y,u4("monthNames")],a:[$y,function(a,h,p){var C=h.toLowerCase();C===p.amPm[0]?a.isPm=!1:C===p.amPm[1]&&(a.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(a,h){var p=(h+"").match(/([\+\-]|\d\d)/gi),C;p&&(C=+(p[1]*60)+parseInt(p[2],10),a.timezoneOffset=p[0]==="+"?C:-C)}]};$n.DD=$n.DD,$n.dddd=$n.ddd,$n.Do=$n.dd=$n.d,$n.mm=$n.m,$n.hh=$n.H=$n.HH=$n.h,$n.MM=$n.M,$n.ss=$n.s,$n.A=$n.a,oa.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},oa.format=function(a,h,p){var C=p||oa.i18n;if(typeof a=="number"&&(a=new Date(a)),Object.prototype.toString.call(a)!=="[object Date]"||isNaN(a.getTime()))throw new Error("Invalid Date in fecha.format");return h=oa.masks[h]||h||oa.masks.default,h.replace(l4,function(w){return w in p4?p4[w](a,C):w.slice(1,w.length-1)})},oa.parse=function(a,h,p){var C=p||oa.i18n;if(typeof h!="string")throw new Error("Invalid format in fecha.parse");if(h=oa.masks[h]||h,a.length>1e3)return!1;var w=!0,v={};if(h.replace(l4,function(H){if($n[H]){var X=$n[H],Y=a.search(X[0]);~Y?a.replace(X[0],function(le){return X[1](v,le,C),a=a.substr(Y+le.length),le}):w=!1}return $n[H]?"":H.slice(1,H.length-1)}),!w)return!1;var A=new Date;v.isPm===!0&&v.hour!=null&&+v.hour!=12?v.hour=+v.hour+12:v.isPm===!1&&+v.hour==12&&(v.hour=0);var V;return v.timezoneOffset!=null?(v.minute=+(v.minute||0)-+v.timezoneOffset,V=new Date(Date.UTC(v.year||A.getFullYear(),v.month||0,v.day||1,v.hour||0,v.minute||0,v.second||0,v.millisecond||0))):V=new Date(v.year||A.getFullYear(),v.month||0,v.day||1,v.hour||0,v.minute||0,v.second||0,v.millisecond||0),V};const q_=function(a){let h=new Date(a);return isNaN(h.getTime())&&typeof a=="string"&&(h=a.split("-").map(Number),h[1]+=1,h=new Date(...h)),isNaN(h.getTime())?null:h},hs=function(a){const h=new Date(a);return h.setHours(0,0,0,0),h.getTime()},oK=(a,h,p)=>{if(!h||!p)return!1;const[C,w]=[h,p].sort();return a>=C&&a<=w},xm=function(a,h){return a=q_(a),a?oa.format(a,h||"yyyy-MM-dd"):""},Vy=function(a,h){return oa.parse(a,h||"yyyy-MM-dd")},m4=function(a,h){return new Date(a,h+1,0).getDate()},g4=function(a,h){const p=new Date(a),C=p.getMonth()+h,w=m4(p.getFullYear(),C);return w<p.getDate()&&p.setDate(w),p.setMonth(C),p},Va=function(){const a=new Date;return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a},Z_=function(){const a={yyyy:p=>p.getFullYear(),m:p=>p.getMonth()+1,mm:p=>("0"+(p.getMonth()+1)).slice(-2),mmm:(p,C)=>p.toLocaleDateString(C,{month:"long"}).slice(0,3),Mmm:(p,C)=>{const w=p.toLocaleDateString(C,{month:"long"});return(w[0].toUpperCase()+w.slice(1).toLowerCase()).slice(0,3)},mmmm:(p,C)=>p.toLocaleDateString(C,{month:"long"}),Mmmm:(p,C)=>{const w=p.toLocaleDateString(C,{month:"long"});return w[0].toUpperCase()+w.slice(1).toLowerCase()}},h=new RegExp(["yyyy","Mmmm","mmmm","Mmm","mmm","mm","m"].join("|"),"g");return function(p,C,w){const v=/(\[[^\]]+\])([^\[\]]+)(\[[^\]]+\])/,A=C.match(v).slice(1),V=A[1],H=[A[0],A[2]].map(X=>({label:X.replace(/\[[^\]]+\]/,Y=>Y.slice(1,-1).replace(h,le=>a[le](w,p))),type:X.indexOf("yy")!=-1?"year":"month"}));return{separator:V,labels:H}}}(),v4={date:"yyyy-MM-dd",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss"},Om=function(a,h){return xm(a,h)},wm=function(a,h){return Vy(a,h)},K_=function(a,h,p){if(Array.isArray(a)&&a.length===2){const C=a[0],w=a[1];if(C&&w)return xm(C,h)+p+xm(w,h)}else if(!Array.isArray(a)&&a instanceof Date)return xm(a,h);return""},J_=function(a,h,p){const C=Array.isArray(a)?a:a.split(p);if(C.length===2){const w=C[0],v=C[1];return[w instanceof Date?w:Vy(w,h),v instanceof Date?v:Vy(v,h)]}return[]},Dd={default:{formatter(a){return a?""+a:""},parser(a){return a===void 0||a===""?null:a}},date:{formatter:Om,parser:wm},datetime:{formatter:Om,parser:wm},daterange:{formatter:K_,parser:J_},datetimerange:{formatter:K_,parser:J_},timerange:{formatter:K_,parser:J_},time:{formatter:Om,parser:wm},month:{formatter:Om,parser:wm},year:{formatter:Om,parser:wm},multiple:{formatter:(a,h)=>a.filter(Boolean).map(p=>xm(p,h)).join(","),parser:(a,h)=>(typeof a=="string"?a.split(","):a).map(p=>p instanceof Date?p:(typeof p=="string"?p=p.trim():typeof p!="number"&&!p&&(p=""),Vy(p,h)))},number:{formatter(a){return a?""+a:""},parser(a){let h=Number(a);return isNaN(a)?null:h}}},Ly="ivu-date-picker",aK="ivu-picker",lK=a=>a.reduce((h,p)=>h&&!p||typeof p=="string"&&p.trim()==="",!0),cK={40:"up",39:"right",38:"down",37:"left"},Nd=(a,h,p)=>{if(a==="left")return h*-1;if(a==="right")return h*1;if(a==="up")return p*1;if(a==="down")return p*-1},hK=a=>{const h="ivu-date-picker-btn-pulse";a.classList.add(h),setTimeout(()=>a.classList.remove(h),200)},eS=a=>a?[a.getHours(),a.getMinutes(),a.getSeconds()]:[0,0,0],uK={mixins:[fi,ia],components:{iInput:Ao,Drop:Ge,Icon:S},directives:{clickOutside:di},emits:["on-clickoutside","on-clear","on-change","on-ok","on-open-change","update:modelValue"],provide(){return{PickerInstance:this}},props:{format:{type:String},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1},open:{type:Boolean,default:null},multiple:{type:Boolean,default:!1},timePickerOptions:{type:Object,default:()=>({})},splitPanels:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},placeholder:{type:String,default:""},placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},steps:{type:Array,default:()=>[]},modelValue:{type:[Date,String,Array]},options:{type:Object,default:()=>({})},separator:{type:String,default:" - "},capture:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return a.$VIEWUI?a.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){const a=this.type.includes("range"),h=a?[null,null]:[null],p=lK((a?this.modelValue:[this.modelValue])||[])?h:this.parseDate(this.modelValue),C=p.map(eS);return{prefixCls:Ly,showClose:!1,visible:!1,internalValue:p,disableClickOutSide:!1,disableCloseUnderTransfer:!1,selectionMode:this.onSelectionModeChange(this.type),forceInputRerender:1,isFocused:!1,focusedDate:p[0]||this.startDate||new Date,focusedTime:{column:0,picker:0,time:C,active:!1},internalFocus:!1,isValueNull:!1,timeSpinnerList:[],panelTableList:[]}},computed:{wrapperClasses(){return[Ly,{[Ly+"-focused"]:this.isFocused}]},publicVModelValue(){if(this.multiple)return this.internalValue.slice();{const a=this.type.includes("range");let h=this.internalValue.map(p=>p instanceof Date?new Date(p):p||"");return this.type.match(/^time/)&&(h=h.map(this.formatDate)),a||this.multiple?h:h[0]}},publicStringValue(){const{formatDate:a,publicVModelValue:h,type:p}=this;return p.match(/^time/)?h:this.multiple?a(h):Array.isArray(h)?h.map(a):a(h)},opened(){return this.open===null?this.visible:this.open},transition(){return this.placement.match(/^bottom/)?"slide-up":"slide-down"},visualValue(){return this.formatDate(this.internalValue)},isConfirm(){return this.confirm||this.type==="datetime"||this.type==="datetimerange"||this.multiple},arrowType(){const a=this.globalConfig;let h="";if(this.type==="time"||this.type==="timerange")h="ios-time-outline",a&&(a.timePicker.customIcon?h="":a.timePicker.icon&&(h=a.timePicker.icon));else{const p=this.globalConfig;h="ios-calendar-outline",p&&(p.datePicker.customIcon?h="":p.datePicker.icon&&(h=p.datePicker.icon))}return this.showClose&&(h="ios-close-circle"),h},customArrowType(){const a=this.globalConfig;let h="";return this.showClose||(this.type==="time"||this.type==="timerange"?a&&a.timePicker.customIcon&&(h=a.timePicker.customIcon):a&&a.datePicker.customIcon&&(h=a.datePicker.customIcon)),h},arrowSize(){const a=this.globalConfig;let h="";return this.showClose||(this.type==="time"||this.type==="timerange"?a&&a.timePicker.iconSize&&(h=a.timePicker.iconSize):a&&a.datePicker.iconSize&&(h=a.datePicker.iconSize)),h},dropdownCls(){return{[Ly+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{onSelectionModeChange(a){return a.match(/^date/)&&(a="date"),this.selectionMode=_(a,["year","month","date","time"])&&a,this.selectionMode},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(a){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(a&&a.type==="mousedown"&&this.visible){a.preventDefault(),a.stopPropagation();return}if(this.visible){const h=this.$refs.pickerPanel&&this.$refs.pickerPanel.$el;if(a&&h&&h.contains(a.target))return;this.visible=!1,a&&a.preventDefault(),a&&a.stopPropagation(),this.$emit("on-clickoutside",a);return}this.isFocused=!1,this.disableClickOutSide=!1},handleFocus(a){this.readonly||(this.isFocused=!0,!(a&&a.type==="focus")&&(this.itemDisabled||(this.visible=!0)))},handleBlur(a){if(this.internalFocus){this.internalFocus=!1;return}if(this.visible){a.preventDefault();return}this.isFocused=!1,this.onSelectionModeChange(this.type),this.internalValue=this.internalValue.slice(),this.reset(),this.$refs.pickerPanel.onToggleVisibility(!1)},handleKeydown(a){const h=a.keyCode;if(h===9)if(this.visible)if(a.stopPropagation(),a.preventDefault(),this.isConfirm){const C=`.${aK}-confirm > *`,w=this.$refs.drop.$el.querySelectorAll(C);this.internalFocus=!0,[...w][a.shiftKey?"pop":"shift"]().focus()}else this.handleClose();else this.focused=!1;const p=[37,38,39,40];if(!this.visible&&p.includes(h)){this.visible=!0;return}if(h===27&&this.visible&&(a.stopPropagation(),this.handleClose()),h===13){const C=this.timeSpinnerList.map(w=>w.timeSpinner);if(C.length>0){const w=C[0].showSeconds?3:2,v=Math.floor(this.focusedTime.column/w),A=this.focusedTime.time[v];C[v].chooseValue(A);return}if(this.type.match(/range/))this.$refs.pickerPanel.handleRangePick(this.focusedDate,"date");else{const w=this.panelTableList.map(A=>A.panelTable),v=A=>{const V=["year","month","date"].indexOf(this.type)+1;return[A.getFullYear(),A.getMonth(),A.getDate()].slice(0,V).join("-")};w.find(({cells:A})=>A.find(({date:V,disabled:H})=>v(V)===v(this.focusedDate)&&!H))&&this.onPick(this.focusedDate,!1,"date")}}!p.includes(h)||(this.focusedTime.active&&a.preventDefault(),this.navigateDatePanel(cK[h],a.shiftKey))},reset(){this.$refs.pickerPanel.reset&&this.$refs.pickerPanel.reset()},navigateTimePanel(a){this.focusedTime.active=!0;const h=a.match(/left|right/),p=a.match(/up|down/),C=this.timeSpinnerList.map(X=>X.timeSpinner),w=(C[0].showSeconds?3:2)*C.length,v=(X=>(X+(h?a==="left"?-1:1:0)+w)%w)(this.focusedTime.column),A=w/C.length,V=Math.floor(v/A),H=v%A;if(h){const X=this.internalValue.map(eS);this.focusedTime={...this.focusedTime,column:v,time:X},C.forEach((Y,le)=>{le===V?Y.updateFocusedTime(H,X[V]):Y.updateFocusedTime(-1,Y.focusedTime)})}if(p){const X=a==="up"?1:-1,Y=["hours","minutes","seconds"],le=C[V][`${Y[H]}List`],xe=(le.findIndex(({text:se})=>this.focusedTime.time[V][H]===se)+X+le.length)%le.length,be=le[xe].text,ge=this.focusedTime.time.map((se,Ae)=>(Ae!==V||(se[H]=be),se));this.focusedTime={...this.focusedTime,time:ge},C.forEach((se,Ae)=>{Ae===V?se.updateFocusedTime(H,ge[Ae]):se.updateFocusedTime(-1,se.focusedTime)})}},navigateDatePanel(a,h){const p=this.timeSpinnerList.map(v=>v.timeSpinner);if(p.length>0){this.navigateTimePanel(a,h,p);return}if(h){this.type==="year"?this.focusedDate=new Date(this.focusedDate.getFullYear()+Nd(a,0,10),this.focusedDate.getMonth(),this.focusedDate.getDate()):this.focusedDate=new Date(this.focusedDate.getFullYear()+Nd(a,0,1),this.focusedDate.getMonth()+Nd(a,1,0),this.focusedDate.getDate());const v=a.match(/left|down/)?"prev":"next",A=a.match(/up|down/)?"-double":"",V=this.$refs.drop.$el.querySelector(`.ivu-date-picker-${v}-btn-arrow${A}`);V&&hK(V);return}const C=this.focusedDate||this.internalValue&&this.internalValue[0]||new Date,w=new Date(C);if(this.type.match(/^date/)){const v=m4(C.getFullYear(),C.getMonth()),A=C.getDate(),V=w.getDate()+Nd(a,1,7);V<1?a.match(/left|right/)?(w.setMonth(w.getMonth()+1),w.setDate(V)):w.setDate(A+Math.floor((v-A)/7)*7):V>v?a.match(/left|right/)?(w.setMonth(w.getMonth()-1),w.setDate(V)):w.setDate(A%7):w.setDate(V)}this.type.match(/^month/)&&w.setMonth(w.getMonth()+Nd(a,1,3)),this.type.match(/^year/)&&w.setFullYear(w.getFullYear()+Nd(a,1,3)),this.focusedDate=w},handleInputChange(a){const h=this.type.includes("range")||this.multiple,p=this.visualValue,C=a.target.value,w=this.parseDate(C),v=this.options&&typeof this.options.disabledDate=="function"&&this.options.disabledDate,A=h?w:w[0],V=v&&v(A),H=w.reduce((X,Y)=>X&&Y instanceof Date,!0);C!==p&&!V&&H?(this.emitChange(this.type),this.internalValue=w):this.forceInputRerender++},handleInputMouseenter(){this.readonly||this.itemDisabled||this.visualValue&&this.clearable&&(this.showClose=!0)},handleInputMouseleave(){this.showClose=!1},handleIconClick(a){this.showClose?(a&&a.stopPropagation(),this.handleClear()):this.itemDisabled||this.handleFocus()},handleClear(){this.visible=!1,this.internalValue=this.internalValue.map(()=>null),this.$emit("on-clear"),this.handleFormItemChange("change",""),this.emitChange(this.type),this.reset(),setTimeout(()=>this.onSelectionModeChange(this.type),500)},emitChange(a){t.nextTick(()=>{this.$emit("on-change",this.publicStringValue,a),this.handleFormItemChange("change",this.publicStringValue)})},parseDate(a){const h=this.type.includes("range"),p=this.type,C=(Dd[p]||Dd.default).parser,w=this.format||v4[p],v=Dd.multiple.parser;if(a&&p==="time"&&!(a instanceof Date))a=C(a,w,this.separator);else if(this.multiple&&a)a=v(a,w,this.separator);else if(h)if(!a)a=[null,null];else if(typeof a=="string")a=C(a,w,this.separator);else if(p==="timerange")a=C(a,w,this.separator).map(A=>A||"");else{const[A,V]=a;A instanceof Date&&V instanceof Date?a=a.map(H=>new Date(H)):typeof A=="string"&&typeof V=="string"?a=C(a.join(this.separator),w,this.separator):(!A||!V)&&(a=[null,null])}else typeof a=="string"&&p.indexOf("time")!==0&&(a=C(a,w)||null);return h||this.multiple?a||[]:[a]},formatDate(a){const h=v4[this.type];if(this.multiple){const p=Dd.multiple.formatter;return p(a,this.format||h,this.separator)}else{const{formatter:p}=Dd[this.type]||Dd.default;return p(a,this.format||h,this.separator)}},onPick(a,h=!1,p){if(this.multiple){const C=a.getTime(),w=this.internalValue.findIndex(A=>A&&A.getTime()===C),v=[...this.internalValue,a].filter(Boolean).map(A=>A.getTime()).filter((A,V,H)=>H.indexOf(A)===V&&V!==w);this.internalValue=v.map(A=>new Date(A))}else a=this.parseDate(a),this.internalValue=Array.isArray(a)?a:[a];this.internalValue[0]&&(this.focusedDate=this.internalValue[0]),this.focusedTime={...this.focusedTime,time:this.internalValue.map(eS)},this.isConfirm||this.onSelectionModeChange(this.type),this.isConfirm||(this.visible=!!h),this.emitChange(p)},onPickSuccess(){this.visible=!1,this.$emit("on-ok"),this.focus(),this.reset()},focus(){this.$refs.input&&this.$refs.input.focus()},updatePopper(){this.$refs.drop.update()},handleOnFocusInput(){this.focus()},handleOnUpdatePopper(){this.updatePopper()}},watch:{visible(a){a===!1&&this.$refs.drop.destroy(),a&&this.$refs.drop.update(),this.$emit("on-open-change",a)},modelValue(a){a===null&&(this.isValueNull=!0),this.internalValue=this.parseDate(a)},open(a){this.visible=a===!0},type(a){this.onSelectionModeChange(a)},publicVModelValue(a,h){const p=JSON.stringify(a),C=JSON.stringify(h);(p!==C||typeof a!=typeof h)&&(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",a))}},mounted(){this.open!==null&&(this.visible=this.open)}};function dK(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("i-input"),H=t.resolveComponent("Drop"),X=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapperClasses)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass([w.prefixCls+"-rel"])},[t.renderSlot(a.$slots,"default",{},()=>[(t.openBlock(),t.createBlock(V,{key:w.forceInputRerender,"element-id":p.elementId,class:t.normalizeClass([w.prefixCls+"-editor"]),readonly:!p.editable||p.readonly,disabled:a.itemDisabled,size:p.size,placeholder:p.placeholder,"model-value":v.visualValue,name:p.name,ref:"input",onOnInputChange:v.handleInputChange,onOnFocus:v.handleFocus,onOnBlur:v.handleBlur,onClick:v.handleFocus,onKeydown:v.handleKeydown,onMouseenter:v.handleInputMouseenter,onMouseleave:v.handleInputMouseleave},{suffix:t.withCtx(()=>[t.createVNode(A,{onClick:v.handleIconClick,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["onClick","type","custom","size"])]),_:1},8,["element-id","class","readonly","disabled","size","placeholder","model-value","name","onOnInputChange","onOnFocus","onOnBlur","onClick","onKeydown","onMouseenter","onMouseleave"]))])],2),t.createVNode(H,{ref:"drop",visible:v.opened,classes:v.dropdownCls,placement:p.placement,eventsEnabled:p.eventsEnabled,transfer:p.transfer,"transition-name":"transition-drop",onClick:v.handleTransferClick},{default:t.withCtx(()=>[t.createElementVNode("div",null,[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(a.panel),t.mergeProps({ref:"pickerPanel",visible:w.visible,showTime:a.type==="datetime"||a.type==="datetimerange",confirm:v.isConfirm,selectionMode:w.selectionMode,steps:p.steps,format:p.format,"model-value":w.internalValue,"start-date":p.startDate,"split-panels":p.splitPanels,"show-week-numbers":p.showWeekNumbers,"picker-type":a.type,multiple:p.multiple,"focused-date":w.focusedDate,"time-picker-options":p.timePickerOptions},a.ownPickerProps,{onOnPick:v.onPick,onOnPickClear:v.handleClear,onOnPickSuccess:v.onPickSuccess,onOnPickClick:h[0]||(h[0]=Y=>w.disableClickOutSide=!0),onOnSelectionModeChange:v.onSelectionModeChange}),null,16,["visible","showTime","confirm","selectionMode","steps","format","model-value","start-date","split-panels","show-week-numbers","picker-type","multiple","focused-date","time-picker-options","onOnPick","onOnPickClear","onOnPickSuccess","onOnSelectionModeChange"]))])]),_:1},8,["visible","classes","placement","eventsEnabled","transfer","onClick"])],2)),[[X,v.handleClose,p.capture,{mousedown:!0}],[X,v.handleClose,p.capture,{touchstart:!0}],[X,v.handleClose,p.capture]])}var y4=l(uK,[["render",dK]]),b4=1e3*60*60*24;function x4(a,h){return new Date(a,h+1,0).getDate()}function O4(a,h,p){return h===0&&p>50?a-1:h===11&&p<10?a+1:a}function w4(a,h,p,C){h>11&&(h=0,a++);var w=new Date(a,h,p);C&&w.setDate(w.getDate()+4-(w.getDay()||7));var v=C?w.getFullYear():a,A=new Date(v,0,1),V=1+Math.round((w-A)/b4);C||(V+=A.getDay());var H=Math.ceil(V/7);if(!C){var X=new Date(a,h,p),Y=new Date(a+1,0,1),le=Y.getDay();X.getTime()>=Y.getTime()-b4*le&&(H=1)}return H}function fK(a,h,p){for(var C=this.lang||"en",w=this.onlyDays,v=typeof this.weekStart>"u"?1:this.weekStart,A=v===1,V=[],H=new Date(a,h,1),X=H.getDay()||(A?7:0),Y=v-X,le=w4(a,h,1,A),xe=x4(a,h),be=x4(a,h-1),ge,se,Ae,$t=O4(a,h,le),mt={month:h,year:a,daysInMonth:xe},xt=0;xt<7;xt++){Ae=Y;for(var He=0;He<8;He++){xt>0&&He>0&&Y++,Y>xe||Y<1?(se=Y>xe?Y-xe:be+Y,ge=Y>xe?h+1:h-1):(se=Y,ge=h);var De=function(){return He===0?"weekLabel":xt===0?"dayLabel":Y<1?"prevMonth":Y>xe?"nextMonth":"monthDay"}(),Ke=Ae!==Y&&xt>0,Ye={desc:Ke?se:le,week:le,type:De,format:A?"ISO 8601":"US",date:Ke?new Date(Date.UTC(a,ge,se)):!1,year:$t,index:V.length};p&&(typeof p=="function"?Ye=p.call(mt,Ye,C):p.forEach(function(Xt){Ye=Xt.call(mt,Ye,C)})),w&&Ke?V.push(Ye):w||V.push(Ye)}xt>0&&(le=w4(a,ge,se+1,A)),$t=O4(a,h,le)}return mt.cells=V,mt}var pK=function(a){return fK.bind(a)},mK={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"mndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lrdag",7:"sndag"},pt:{0:"s",1:"segunda",2:"tera",3:"quarta",4:"quinta",5:"sexta",6:"sbado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}},La=mK;function gK(a){return a==null?!1:a.constructor===Array||a.constructor===Object}function _4(a,h){for(var p in a)h[p]?gK(a[p])&&_4(a[p],h[p]):h[p]=a[p]}function S4(a,h){var p=[La.classes[a.type]];return a.class?a.class=(typeof a.class=="string"?[a.class]:a.class).concat(p):a.class=p,a.type.indexOf("Label")>0&&(a.index==0&&La.weekPlaceholder?a.desc=La.weekPlaceholder:a.index<8?a.desc=La.columnNames[h][a.index]:a.index%8==0&&(a.desc=a.week)),a.date&&(a.monthName=La.monthNames[h][a.date.getMonth()]),this.monthName||(this.monthName=La.monthNames[h][this.month]),this.labels||(this.labels={monthNames:La.monthNames[h],columnNames:La.columnNames[h],classes:La.classes}),a}S4.setLabels=function(a){_4(a,La)};var vK=S4,yK={Generator:pK,addLabels:vK},tS={name:"PanelTable",emits:["on-pick","on-pick-click","on-change-range"],inject:["PickerInstance"],props:{tableDate:{type:Date,required:!0},disabledDate:{type:Function},selectionMode:{type:String,required:!0},modelValue:{type:Array,required:!0},rangeState:{type:Object,default:()=>({from:null,to:null,selecting:!1})},focusedDate:{type:Date,required:!0}},data(){return{id:ee(6)}},computed:{dates(){const{selectionMode:a,modelValue:h,rangeState:p}=this;return a==="range"&&p.selecting?[p.from]:h}},methods:{handleClick(a,h){if(h.stopPropagation(),a.disabled||a.type==="weekLabel")return;const p=new Date(hs(a.date));this.$emit("on-pick",p),this.$emit("on-pick-click")},handleMouseMove(a){if(!this.rangeState.selecting||a.disabled)return;const h=a.date;this.$emit("on-change-range",h)},addPanelTable(){const a=this.PickerInstance;a.panelTableList||(a.panelTableList=[]),a.panelTableList.push({id:this.id,panelTable:this})},removePanelTable(){const a=this.PickerInstance;if(a.panelTableList&&a.panelTableList.length){const h=a.panelTableList.findIndex(p=>p.id===this.id);a.panelTableList.splice(h,1)}}},mounted(){this.addPanelTable()},beforeUnmount(){this.removePanelTable()}},vn="ivu-date-picker-cells";const bK={mixins:[ji,tS],props:{showWeekNumbers:{type:Boolean,default:!1}},computed:{classes(){return[`${vn}`,{[`${vn}-show-week-numbers`]:this.showWeekNumbers}]},calendar(){const a=Number(this.t("i.datepicker.weekStartDay"));return new yK.Generator({onlyDays:!this.showWeekNumbers,weekStart:a})},headerDays(){const a=Number(this.t("i.datepicker.weekStartDay")),h=["sun","mon","tue","wed","thu","fri","sat"].map(C=>this.t("i.datepicker.weeks."+C)),p=h.splice(a,7-a).concat(h.splice(0,a));return this.showWeekNumbers?[""].concat(p):p},cells(){const a=this.tableDate.getFullYear(),h=this.tableDate.getMonth(),p=hs(new Date),C=this.dates.filter(Boolean).map(hs),[w,v]=this.dates.map(hs),A=this.rangeState.from&&hs(this.rangeState.from),V=this.rangeState.to&&hs(this.rangeState.to),H=this.selectionMode==="range",X=typeof this.disabledDate=="function"&&this.disabledDate;return this.calendar(a,h,Y=>{Y.date instanceof Date&&Y.date.setTime(Y.date.getTime()+Y.date.getTimezoneOffset()*6e4+480*60*1e3);const le=Y.date&&hs(Y.date),xe=Y.date&&h===Y.date.getMonth();return{...Y,type:le===p?"today":Y.type,selected:xe&&C.includes(le),disabled:Y.date&&X&&X(new Date(le)),range:xe&&H&&oK(le,A,V),start:xe&&H&&le===w,end:xe&&H&&le===v}}).cells.slice(this.showWeekNumbers?8:0)}},methods:{getCellCls(a){return[`${vn}-cell`,{[`${vn}-cell-selected`]:a.selected||a.start||a.end,[`${vn}-cell-disabled`]:a.disabled,[`${vn}-cell-today`]:a.type==="today",[`${vn}-cell-prev-month`]:a.type==="prevMonth",[`${vn}-cell-next-month`]:a.type==="nextMonth",[`${vn}-cell-week-label`]:a.type==="weekLabel",[`${vn}-cell-range`]:a.range&&!a.start&&!a.end,[`${vn}-focused`]:hs(a.date)===hs(this.focusedDate)}]}}},xK={class:"ivu-date-picker-cells-header"},OK=["onClick","onMouseenter"];function wK(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.createElementVNode("div",xK,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.headerDays,A=>(t.openBlock(),t.createElementBlock("span",{key:A},t.toDisplayString(A),1))),128))]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.cells,(A,V)=>(t.openBlock(),t.createElementBlock("span",{key:String(A.date)+V,class:t.normalizeClass(v.getCellCls(A)),onClick:H=>a.handleClick(A,H),onMouseenter:H=>a.handleMouseMove(A)},[t.createElementVNode("em",null,t.toDisplayString(A.desc),1)],42,OK))),128))],2)}var C4=l(bK,[["render",wK]]);const _K={mixins:[tS],props:{},computed:{classes(){return[`${vn}`,`${vn}-year`]},startYear(){return Math.floor(this.tableDate.getFullYear()/10)*10},cells(){let a=[];const h={text:"",selected:!1,disabled:!1},p=this.dates.filter(Boolean).map(w=>hs(new Date(w.getFullYear(),0,1))),C=hs(new Date(this.focusedDate.getFullYear(),0,1));for(let w=0;w<10;w++){const v=L(h);v.date=new Date(this.startYear+w,0,1),v.disabled=typeof this.disabledDate=="function"&&this.disabledDate(v.date)&&this.selectionMode==="year";const A=hs(v.date);v.selected=p.includes(A),v.focused=A===C,a.push(v)}return a}},methods:{getCellCls(a){return[`${vn}-cell`,{[`${vn}-cell-selected`]:a.selected,[`${vn}-cell-disabled`]:a.disabled,[`${vn}-cell-focused`]:a.focused,[`${vn}-cell-range`]:a.range&&!a.start&&!a.end}]}}},SK=["onClick","onMouseenter"];function CK(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.cells,A=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(v.getCellCls(A)),key:A.date,onClick:V=>a.handleClick(A,V),onMouseenter:V=>a.handleMouseMove(A)},[t.createElementVNode("em",null,t.toDisplayString(A.date.getFullYear()),1)],42,SK))),128))],2)}var k4=l(_K,[["render",CK]]);const kK={mixins:[ji,tS],props:{},computed:{classes(){return[`${vn}`,`${vn}-month`]},cells(){let a=[];const h={text:"",selected:!1,disabled:!1},p=this.tableDate.getFullYear(),C=this.dates.filter(Boolean).map(v=>hs(new Date(v.getFullYear(),v.getMonth(),1))),w=hs(new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),1));for(let v=0;v<12;v++){const A=L(h);A.date=new Date(p,v,1),A.text=this.tCell(v+1);const V=hs(A.date);A.disabled=typeof this.disabledDate=="function"&&this.disabledDate(A.date)&&this.selectionMode==="month",A.selected=C.includes(V),A.focused=V===w,a.push(A)}return a}},methods:{getCellCls(a){return[`${vn}-cell`,{[`${vn}-cell-selected`]:a.selected,[`${vn}-cell-disabled`]:a.disabled,[`${vn}-cell-focused`]:a.focused,[`${vn}-cell-range`]:a.range&&!a.start&&!a.end}]},tCell(a){return this.t(`i.datepicker.months.m${a}`)}}},TK=["onClick","onMouseenter"];function MK(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.cells,A=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(v.getCellCls(A)),key:A.text,onClick:V=>a.handleClick(A,V),onMouseenter:V=>a.handleMouseMove(A)},[t.createElementVNode("em",null,t.toDisplayString(A.text),1)],42,TK))),128))],2)}var T4=l(kK,[["render",MK]]),By={props:{disabledHours:{type:Array,default(){return[]}},disabledMinutes:{type:Array,default(){return[]}},disabledSeconds:{type:Array,default(){return[]}},hideDisabledOptions:{type:Boolean,default:!1}}};const Kh="ivu-time-picker-cells",iS=["hours","minutes","seconds"],EK={name:"TimeSpinner",mixins:[By],emits:["on-change","on-pick-click"],inject:["PickerInstance"],props:{hours:{type:[Number,String],default:NaN},minutes:{type:[Number,String],default:NaN},seconds:{type:[Number,String],default:NaN},showSeconds:{type:Boolean,default:!0},steps:{type:Array,default:()=>[]}},data(){return{spinerSteps:[1,1,1].map((a,h)=>Math.abs(this.steps[h])||a),prefixCls:Kh,compiled:!1,focusedColumn:-1,focusedTime:[0,0,0],id:ee(6)}},computed:{classes(){return[`${Kh}`,{[`${Kh}-with-seconds`]:this.showSeconds}]},hoursList(){let a=[];const h=this.spinerSteps[0],p=this.focusedColumn===0&&this.focusedTime[0],C={text:0,selected:!1,disabled:!1,hide:!1};for(let w=0;w<24;w+=h){const v=L(C);v.text=w,v.focused=w===p,this.disabledHours.length&&this.disabledHours.indexOf(w)>-1&&(v.disabled=!0,this.hideDisabledOptions&&(v.hide=!0)),this.hours===w&&(v.selected=!0),a.push(v)}return a},minutesList(){let a=[];const h=this.spinerSteps[1],p=this.focusedColumn===1&&this.focusedTime[1],C={text:0,selected:!1,disabled:!1,hide:!1};for(let w=0;w<60;w+=h){const v=L(C);v.text=w,v.focused=w===p,this.disabledMinutes.length&&this.disabledMinutes.indexOf(w)>-1&&(v.disabled=!0,this.hideDisabledOptions&&(v.hide=!0)),this.minutes===w&&(v.selected=!0),a.push(v)}return a},secondsList(){let a=[];const h=this.spinerSteps[2],p=this.focusedColumn===2&&this.focusedTime[2],C={text:0,selected:!1,disabled:!1,hide:!1};for(let w=0;w<60;w+=h){const v=L(C);v.text=w,v.focused=w===p,this.disabledSeconds.length&&this.disabledSeconds.indexOf(w)>-1&&(v.disabled=!0,this.hideDisabledOptions&&(v.hide=!0)),this.seconds===w&&(v.selected=!0),a.push(v)}return a}},methods:{getCellCls(a){return[`${Kh}-cell`,{[`${Kh}-cell-selected`]:a.selected,[`${Kh}-cell-focused`]:a.focused,[`${Kh}-cell-disabled`]:a.disabled}]},chooseValue(a){const h=iS.reduce((p,C,w)=>{const v=a[w];return this[C]===v?p:{...p,[C]:v}},{});Object.keys(h).length>0&&this.emitChange(h)},handleClick(a,h){if(h.disabled)return;const p={[a]:h.text};this.emitChange(p)},emitChange(a){this.$emit("on-change",a),this.$emit("on-pick-click")},scroll(a,h){const p=this.$refs[a].scrollTop,C=24*this.getScrollIndex(a,h);D(this.$refs[a],p,C,500)},getScrollIndex(a,h){const p=T(a),C=this[`disabled${p}`];if(C.length&&this.hideDisabledOptions){let w=0;C.forEach(v=>v<=h?w++:""),h-=w}return h},updateScroll(){t.nextTick(()=>{iS.forEach(a=>{this.$refs[a].scrollTop=24*this[`${a}List`].findIndex(h=>h.text==this[a])})})},formatTime(a){return a<10?"0"+a:a},updateFocusedTime(a,h){this.focusedColumn=a,this.focusedTime=h.slice()},addTimeSpinner(){const a=this.PickerInstance;a.timeSpinnerList||(a.timeSpinnerList=[]),a.timeSpinnerList.push({id:this.id,timeSpinner:this})},removeTimeSpinner(){const a=this.PickerInstance;if(a.timeSpinnerList&&a.timeSpinnerList.length){const h=a.timeSpinnerList.findIndex(p=>p.id===this.id);a.timeSpinnerList.splice(h,1)}}},watch:{hours(a){!this.compiled||this.scroll("hours",this.hoursList.findIndex(h=>h.text==a))},minutes(a){!this.compiled||this.scroll("minutes",this.minutesList.findIndex(h=>h.text==a))},seconds(a){!this.compiled||this.scroll("seconds",this.secondsList.findIndex(h=>h.text==a))},focusedTime(a,h){iS.forEach((p,C)=>{if(a[C]===h[C]||typeof a[C]>"u")return;const w=this[`${p}List`].findIndex(v=>v.text===a[C]);this.scroll(p,w)})}},mounted(){this.addTimeSpinner(),t.nextTick(()=>this.compiled=!0)},beforeUnmount(){this.removeTimeSpinner()}},PK=["onClick"],AK=["onClick"],RK=["onClick"];function IK(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-list"]),ref:"hours"},[t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.hoursList,A=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.getCellCls(A)),key:A.text,onClick:V=>v.handleClick("hours",A)},t.toDisplayString(v.formatTime(A.text)),11,PK)),[[t.vShow,!A.hide]])),128))],2)],2),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-list"]),ref:"minutes"},[t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.minutesList,A=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.getCellCls(A)),key:A.text,onClick:V=>v.handleClick("minutes",A)},t.toDisplayString(v.formatTime(A.text)),11,AK)),[[t.vShow,!A.hide]])),128))],2)],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-list"]),ref:"seconds"},[t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.secondsList,A=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.getCellCls(A)),key:A.text,onClick:V=>v.handleClick("seconds",A)},t.toDisplayString(v.formatTime(A.text)),11,RK)),[[t.vShow,!A.hide]])),128))],2)],2),[[t.vShow,p.showSeconds]])],2)}var M4=l(EK,[["render",IK]]);const E4="ivu-picker",DK={mixins:[ji],components:{iButton:cs},emits:["on-pick-clear","on-pick-success","on-pick-toggle-time"],inject:["PickerInstance"],props:{showTime:{type:Boolean,default:!1},isTime:{type:Boolean,default:!1},timeDisabled:{type:Boolean,default:!1}},data(){return{prefixCls:E4}},computed:{timeClasses(){return`${E4}-confirm-time`},labels(){const a=["time","clear","ok"],h=[this.isTime?"selectDate":"selectTime","clear","ok"];return a.reduce((p,C,w)=>(p[C]=this.t("i.datepicker."+h[w]),p),{})}},methods:{handleClear(){this.$emit("on-pick-clear")},handleSuccess(){this.$emit("on-pick-success")},handleToggleTime(){this.timeDisabled||(this.$emit("on-pick-toggle-time"),this.PickerInstance.handleOnFocusInput(),this.PickerInstance.handleOnUpdatePopper())},handleTab(a){const h=[...this.$el.children][a.shiftKey?"shift":"pop"]();r&&document.activeElement===h&&(a.preventDefault(),a.stopPropagation(),this.PickerInstance.handleOnFocusInput())}}};function NK(a,h,p,C,w,v){const A=t.resolveComponent("i-button");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls+"-confirm"]),onKeydownCapture:h[0]||(h[0]=t.withKeys((...V)=>v.handleTab&&v.handleTab(...V),["tab"]))},[p.showTime?(t.openBlock(),t.createBlock(A,{key:0,class:t.normalizeClass(v.timeClasses),size:"small",type:"text",disabled:p.timeDisabled,onClick:v.handleToggleTime},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.labels.time),1)]),_:1},8,["class","disabled","onClick"])):t.createCommentVNode("",!0),t.createVNode(A,{size:"small",class:"ivu-picker-confirm-btn-cancel",onClick:v.handleClear,onKeydown:t.withKeys(v.handleClear,["enter"])},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.labels.clear),1)]),_:1},8,["onClick","onKeydown"]),t.createVNode(A,{size:"small",type:"primary",onClick:v.handleSuccess,onKeydown:t.withKeys(v.handleSuccess,["enter"])},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.labels.ok),1)]),_:1},8,["onClick","onKeydown"])],34)}var Uy=l(DK,[["render",NK]]);const $K="ivu-picker-panel",P4="ivu-date-picker";var Fy={emits:["on-pick-clear","on-pick-success","on-pick-click","on-pick"],props:{confirm:{type:Boolean,default:!1}},methods:{iconBtnCls(a,h=""){return[`${$K}-icon-btn`,`${P4}-${a}-btn`,`${P4}-${a}-btn-arrow${h}`]},handleShortcutClick(a){a.value&&this.$emit("on-pick",a.value()),a.onClick&&a.onClick(this)},handlePickClear(){this.resetView(),this.$emit("on-pick-clear")},handlePickSuccess(){this.resetView(),this.$emit("on-pick-success")},handlePickClick(){this.$emit("on-pick-click")},resetView(){setTimeout(()=>this.currentView=this.selectionMode,500)},handleClear(){this.dates=this.dates.map(()=>null),this.rangeState={},this.$emit("on-pick",this.dates),this.handleConfirm()},handleConfirm(a,h){this.$emit("on-pick",this.dates,a,h||this.type)},onToggleVisibility(a){const{timeSpinner:h,timeSpinnerEnd:p}=this.$refs;a&&h&&h.updateScroll(),a&&p&&p.updateScroll()}}};const VK="ivu-picker-panel",LK="ivu-time-picker",BK=a=>a[0].toUpperCase()+a.slice(1),UK=(a,h,p,C)=>{const w=new Date(a.getTime());return w.setHours(h),w.setMinutes(p),w.setSeconds(C),w},FK=(a,h,p)=>p.indexOf(a)===h,A4=()=>!1,zK={name:"TimePickerPanel",mixins:[Fy,ji,By],components:{TimeSpinner:M4,Confirm:Uy},emits:["on-pick"],props:{disabledDate:{type:Function,default:A4},steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){return{prefixCls:VK,timePrefixCls:LK,date:this.modelValue[0]||Va(),showDate:!1}},computed:{showSeconds(){return!!(this.format||"").match(/ss/)},visibleDate(){const a=this.date,h=a.getMonth()+1,p=this.t("i.datepicker.year"),C=this.t(`i.datepicker.month${h}`);return`${a.getFullYear()}${p} ${C}`},timeSlots(){return this.modelValue[0]?["getHours","getMinutes","getSeconds"].map(a=>this.date[a]()):[]},disabledHMS(){const a=["disabledHours","disabledMinutes","disabledSeconds"];if(this.disabledDate===A4||!this.modelValue[0])return a.reduce((h,p)=>(h[p]=this[p],h),{});{const h=[24,60,60],p=["Hours","Minutes","Seconds"].map(C=>this[`disabled${C}`]).map((C,w)=>{const v=h[w],A=C;for(let V=0;V<v;V+=this.steps[w]||1){const H=this.timeSlots.map((Y,le)=>le===w?V:Y),X=UK(this.date,...H);this.disabledDate(X,!0)&&A.push(V)}return A.filter(FK)});return a.reduce((C,w,v)=>(C[w]=p[v],C),{})}}},watch:{modelValue(a){let h=a[0]||Va();h=new Date(h),this.date=h}},methods:{handleChange(a,h=!0){const p=new Date(this.date);Object.keys(a).forEach(C=>p[`set${BK(C)}`](a[C])),h&&this.$emit("on-pick",p,"time")}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function XK(a,h,p,C,w,v){const A=t.resolveComponent("time-spinner"),V=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls+"-body-wrapper"]),onMousedown:h[0]||(h[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"])},[w.showDate?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.timePrefixCls+"-header"])},t.toDisplayString(v.visibleDate),3)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content"])},[t.createVNode(A,{ref:"timeSpinner","show-seconds":v.showSeconds,steps:p.steps,hours:v.timeSlots[0],minutes:v.timeSlots[1],seconds:v.timeSlots[2],"disabled-hours":v.disabledHMS.disabledHours,"disabled-minutes":v.disabledHMS.disabledMinutes,"disabled-seconds":v.disabledHMS.disabledSeconds,"hide-disabled-options":a.hideDisabledOptions,onOnChange:v.handleChange,onOnPickClick:a.handlePickClick},null,8,["show-seconds","steps","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),a.confirm?(t.openBlock(),t.createBlock(V,{key:1,onOnPickClear:a.handlePickClear,onOnPickSuccess:a.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var R4=l(zK,[["render",XK]]);const WK={props:{datePanelLabel:Object,currentView:String,datePrefixCls:String}};function QK(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("span",null,[p.datePanelLabel?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([p.datePrefixCls+"-header-label"]),onClick:h[0]||(h[0]=(...A)=>p.datePanelLabel.labels[0].handler&&p.datePanelLabel.labels[0].handler(...A))},t.toDisplayString(p.datePanelLabel.labels[0].label),3)),[[t.vShow,p.datePanelLabel.labels[0].type==="year"||p.currentView==="date"]]):t.createCommentVNode("",!0),p.datePanelLabel&&p.currentView==="date"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(p.datePanelLabel.separator),1)],64)):t.createCommentVNode("",!0),p.datePanelLabel?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass([p.datePrefixCls+"-header-label"]),onClick:h[1]||(h[1]=(...A)=>p.datePanelLabel.labels[1].handler&&p.datePanelLabel.labels[1].handler(...A))},t.toDisplayString(p.datePanelLabel.labels[1].label),3)),[[t.vShow,p.datePanelLabel.labels[1].type==="year"||p.currentView==="date"]]):t.createCommentVNode("",!0)])}var I4=l(WK,[["render",QK]]),D4={props:{showTime:{type:Boolean,default:!1},format:{type:String,default:"yyyy-MM-dd"},selectionMode:{type:String,validator(a){return _(a,["year","month","date","time"])},default:"date"},shortcuts:{type:Array,default:()=>[]},disabledDate:{type:Function,default:()=>!1},modelValue:{type:Array,default:()=>[Va(),Va()]},timePickerOptions:{default:()=>({}),type:Object},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},pickerType:{type:String,require:!0},focusedDate:{type:Date,required:!0}},computed:{isTime(){return this.currentView==="time"}},methods:{handleToggleTime(){this.currentView=this.currentView==="time"?"date":"time"}}};const nS="ivu-picker-panel",HK="ivu-date-picker",GK={name:"DatePickerPanel",mixins:[Fy,ji,D4],components:{Icon:S,DateTable:C4,YearTable:k4,MonthTable:T4,TimePicker:R4,Confirm:Uy,datePanelLabel:I4},emits:["on-selection-mode-change","on-pick"],props:{multiple:{type:Boolean,default:!1}},data(){const{selectionMode:a,modelValue:h}=this,p=h.slice().sort();return{prefixCls:nS,datePrefixCls:HK,currentView:a||"date",pickerTable:this.getTableType(a),dates:p,panelDate:this.startDate||p[0]||new Date}},computed:{classes(){return[`${nS}-body-wrapper`,{[`${nS}-with-sidebar`]:this.shortcuts.length}]},panelPickerHandlers(){return this.pickerTable===`${this.currentView}-table`?this.handlePick:this.handlePreSelection},datePanelLabel(){const a=this.t("i.locale"),h=this.t("i.datepicker.datePanelLabel"),p=this.panelDate,{labels:C,separator:w}=Z_(a,h,p),v=A=>()=>this.pickerTable=this.getTableType(A);return{separator:w,labels:C.map(A=>(A.handler=v(A.type),A))}},timeDisabled(){return!this.dates[0]}},watch:{modelValue(a){this.dates=a;const h=this.multiple?this.dates[this.dates.length-1]:this.startDate||this.dates[0];this.panelDate=h||new Date},currentView(a){this.$emit("on-selection-mode-change",a),this.currentView==="time"&&t.nextTick(()=>{this.$refs.timePicker.$refs.timeSpinner.updateScroll()})},selectionMode(a){this.currentView=a,this.pickerTable=this.getTableType(a)},focusedDate(a){const h=a.getFullYear()!==this.panelDate.getFullYear(),p=h||a.getMonth()!==this.panelDate.getMonth();(h||p)&&(this.multiple||(this.panelDate=a))}},methods:{reset(){this.currentView=this.selectionMode,this.pickerTable=this.getTableType(this.currentView)},changeYear(a){this.selectionMode==="year"||this.pickerTable==="year-table"?this.panelDate=new Date(this.panelDate.getFullYear()+a*10,0,1):this.panelDate=g4(this.panelDate,a*12)},getTableType(a){return a.match(/^time/)?"time-picker":`${a}-table`},changeMonth(a){this.panelDate=g4(this.panelDate,a)},handlePreSelection(a){this.panelDate=a,this.pickerTable==="year-table"?this.pickerTable="month-table":this.pickerTable=this.getTableType(this.currentView)},handlePick(a,h){const{selectionMode:p,panelDate:C}=this;p==="year"?a=new Date(a.getFullYear(),0,1):p==="month"?a=new Date(C.getFullYear(),a.getMonth(),1):a=new Date(a),this.dates=[a],this.$emit("on-pick",a,!1,h||p)}}},YK=["onClick"];function jK(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("date-panel-label"),H=t.resolveComponent("time-picker"),X=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),onMousedown:h[4]||(h[4]=t.withModifiers(()=>{},["prevent"]))},[a.shortcuts.length?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-sidebar"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.shortcuts,Y=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls+"-shortcut"]),key:Y.text,onClick:le=>a.handleShortcutClick(Y)},t.toDisplayString(Y.text),11,YK))),128))],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.datePrefixCls+"-header"])},[t.createElementVNode("span",{class:t.normalizeClass(a.iconBtnCls("prev","-double")),onClick:h[0]||(h[0]=Y=>v.changeYear(-1))},[t.createVNode(A,{type:"ios-arrow-back"})],2),w.pickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(a.iconBtnCls("prev")),onClick:h[1]||(h[1]=Y=>v.changeMonth(-1))},[t.createVNode(A,{type:"ios-arrow-back"})],2)),[[t.vShow,w.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(V,{"date-panel-label":v.datePanelLabel,"current-view":w.pickerTable.split("-").shift(),"date-prefix-cls":w.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),t.createElementVNode("span",{class:t.normalizeClass(a.iconBtnCls("next","-double")),onClick:h[2]||(h[2]=Y=>v.changeYear(1))},[t.createVNode(A,{type:"ios-arrow-forward"})],2),w.pickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(a.iconBtnCls("next")),onClick:h[3]||(h[3]=Y=>v.changeMonth(1))},[t.createVNode(A,{type:"ios-arrow-forward"})],2)),[[t.vShow,w.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,w.currentView!=="time"]]),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content"])},[w.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(w.pickerTable),{key:0,ref:"pickerTable","table-date":w.panelDate,"show-week-numbers":a.showWeekNumbers,"model-value":w.dates,"selection-mode":a.selectionMode,"disabled-date":a.disabledDate,"focused-date":a.focusedDate,onOnPick:v.panelPickerHandlers,onOnPickClick:a.handlePickClick},null,40,["table-date","show-week-numbers","model-value","selection-mode","disabled-date","focused-date","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content"])},[w.currentView==="time"?(t.openBlock(),t.createBlock(H,t.mergeProps({key:0,ref:"timePicker","model-value":w.dates,format:a.format,"time-disabled":v.timeDisabled,"disabled-date":a.disabledDate,"focused-date":a.focusedDate},a.timePickerOptions,{onOnPick:v.handlePick,onOnPickClick:a.handlePickClick,onOnPickClear:a.handlePickClear,onOnPickSuccess:a.handlePickSuccess,onOnPickToggleTime:a.handleToggleTime}),null,16,["model-value","format","time-disabled","disabled-date","focused-date","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):t.createCommentVNode("",!0)],2),[[t.vShow,a.isTime]]),a.confirm?(t.openBlock(),t.createBlock(X,{key:0,"show-time":a.showTime,"is-time":a.isTime,onOnPickToggleTime:a.handleToggleTime,onOnPickClear:a.handlePickClear,onOnPickSuccess:a.handlePickSuccess},null,8,["show-time","is-time","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var qK=l(GK,[["render",jK]]);const N4="ivu-picker-panel",rS="ivu-time-picker",$4=a=>a[0].toUpperCase()+a.slice(1),ZK={name:"RangeTimePickerPanel",mixins:[Fy,ji,By],components:{TimeSpinner:M4,Confirm:Uy},emits:["on-pick"],props:{steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){const[a,h]=this.modelValue.slice();return{prefixCls:N4,timePrefixCls:rS,showDate:!1,dateStart:a||Va(),dateEnd:h||Va()}},computed:{classes(){return[`${N4}-body-wrapper`,`${rS}-with-range`,{[`${rS}-with-seconds`]:this.showSeconds}]},showSeconds(){return!!(this.format||"").match(/ss/)},leftDatePanelLabel(){return this.panelLabelConfig(this.date)},rightDatePanelLabel(){return this.panelLabelConfig(this.dateEnd)}},watch:{modelValue(a){const[h,p]=a.slice();this.dateStart=h||Va(),this.dateEnd=p||Va()}},methods:{panelLabelConfig(a){const h=this.t("i.locale"),p=this.t("i.datepicker.datePanelLabel"),{labels:C,separator:w}=Z_(h,p,a||Va());return[C[0].label,w,C[1].label].join("")},handleChange(a,h,p=!0){const C=new Date(this.dateStart);let w=new Date(this.dateEnd);Object.keys(a).forEach(v=>{C[`set${$4(v)}`](a[v])}),Object.keys(h).forEach(v=>{w[`set${$4(v)}`](h[v])}),w<C&&(w=C),p&&this.$emit("on-pick",[C,w],"time")},handleStartChange(a){this.handleChange(a,{})},handleEndChange(a){this.handleChange({},a)},updateScroll(){this.$refs.timeSpinner.updateScroll(),this.$refs.timeSpinnerEnd.updateScroll()}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function KK(a,h,p,C,w,v){const A=t.resolveComponent("time-spinner"),V=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),onMousedown:h[0]||(h[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content",w.prefixCls+"-content-left"])},[t.createElementVNode("div",{class:t.normalizeClass([w.timePrefixCls+"-header"])},[w.showDate?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(v.leftDatePanelLabel),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(a.t("i.datepicker.startTime")),1)],64))],2),t.createVNode(A,{ref:"timeSpinner",steps:p.steps,"show-seconds":v.showSeconds,hours:p.modelValue[0]&&w.dateStart.getHours(),minutes:p.modelValue[0]&&w.dateStart.getMinutes(),seconds:p.modelValue[0]&&w.dateStart.getSeconds(),"disabled-hours":a.disabledHours,"disabled-minutes":a.disabledMinutes,"disabled-seconds":a.disabledSeconds,"hide-disabled-options":a.hideDisabledOptions,onOnChange:v.handleStartChange,onOnPickClick:a.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content",w.prefixCls+"-content-right"])},[t.createElementVNode("div",{class:t.normalizeClass([w.timePrefixCls+"-header"])},[w.showDate?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(v.rightDatePanelLabel),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(a.t("i.datepicker.endTime")),1)],64))],2),t.createVNode(A,{ref:"timeSpinnerEnd",steps:p.steps,"show-seconds":v.showSeconds,hours:p.modelValue[1]&&w.dateEnd.getHours(),minutes:p.modelValue[1]&&w.dateEnd.getMinutes(),seconds:p.modelValue[1]&&w.dateEnd.getSeconds(),"disabled-hours":a.disabledHours,"disabled-minutes":a.disabledMinutes,"disabled-seconds":a.disabledSeconds,"hide-disabled-options":a.hideDisabledOptions,onOnChange:v.handleEndChange,onOnPickClick:a.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),a.confirm?(t.openBlock(),t.createBlock(V,{key:0,onOnPickClear:a.handlePickClear,onOnPickSuccess:a.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var V4=l(ZK,[["render",KK]]);const $d="ivu-picker-panel",sS="ivu-date-picker",L4=(a,h)=>!a||!h?0:a.getTime()-h.getTime(),JK={name:"RangeDatePickerPanel",mixins:[Fy,ji,D4],components:{Icon:S,DateTable:C4,YearTable:k4,MonthTable:T4,TimePicker:V4,Confirm:Uy,datePanelLabel:I4},props:{splitPanels:{type:Boolean,default:!1}},data(){const[a,h]=this.modelValue.map(C=>C||Va()),p=this.startDate?this.startDate:a;return{prefixCls:$d,datePrefixCls:sS,dates:this.modelValue,rangeState:{from:this.modelValue[0],to:this.modelValue[1],selecting:a&&!h},currentView:this.selectionMode||"range",leftPickerTable:`${this.selectionMode}-table`,rightPickerTable:`${this.selectionMode}-table`,leftPanelDate:p,rightPanelDate:new Date(p.getFullYear(),p.getMonth()+1,1)}},computed:{classes(){return[`${$d}-body-wrapper`,`${sS}-with-range`,{[`${$d}-with-sidebar`]:this.shortcuts.length,[`${sS}-with-week-numbers`]:this.showWeekNumbers}]},panelBodyClasses(){return[$d+"-body",{[$d+"-body-time"]:this.showTime,[$d+"-body-date"]:!this.showTime}]},leftDatePanelLabel(){return this.panelLabelConfig("left")},rightDatePanelLabel(){return this.panelLabelConfig("right")},leftDatePanelView(){return this.leftPickerTable.split("-").shift()},rightDatePanelView(){return this.rightPickerTable.split("-").shift()},timeDisabled(){return!(this.dates[0]&&this.dates[1])},preSelecting(){const a=`${this.currentView}-table`;return{left:this.leftPickerTable!==a,right:this.rightPickerTable!==a}},panelPickerHandlers(){return{left:this.preSelecting.left?this.handlePreSelection.bind(this,"left"):this.handleRangePick,right:this.preSelecting.right?this.handlePreSelection.bind(this,"right"):this.handleRangePick}}},watch:{modelValue(a){const h=a[0]?q_(a[0]):null,p=a[1]?q_(a[1]):null;this.dates=[h,p].sort(L4),this.rangeState={from:this.dates[0],to:this.dates[1],selecting:!1},this.setPanelDates(this.startDate||this.dates[0]||new Date)},currentView(a){const h=this.leftPanelDate.getMonth(),p=this.rightPanelDate.getMonth(),C=this.leftPanelDate.getFullYear()===this.rightPanelDate.getFullYear();a==="date"&&C&&h===p&&this.changePanelDate("right","Month",1),a==="month"&&C&&this.changePanelDate("right","FullYear",1),a==="year"&&C&&this.changePanelDate("right","FullYear",10)},selectionMode(a){this.currentView=a||"range"},focusedDate(a){this.setPanelDates(a||new Date)}},methods:{reset(){this.currentView=this.selectionMode,this.leftPickerTable=`${this.currentView}-table`,this.rightPickerTable=`${this.currentView}-table`},setPanelDates(a){this.leftPanelDate=a;const h=new Date(a.getFullYear(),a.getMonth()+1,1),p=this.dates[1]?this.dates[1].getTime():this.dates[1];this.rightPanelDate=this.splitPanels?new Date(Math.max(p,h.getTime())):h},panelLabelConfig(a){const h=this.t("i.locale"),p=this.t("i.datepicker.datePanelLabel"),C=V=>{const H=V=="month"?this.showMonthPicker:this.showYearPicker;return()=>H(a)},w=this[`${a}PanelDate`],{labels:v,separator:A}=Z_(h,p,w);return{separator:A,labels:v.map(V=>(V.handler=C(V.type),V))}},prevYear(a){const h=this.currentView==="year"?-10:-1;this.changePanelDate(a,"FullYear",h)},nextYear(a){const h=this.currentView==="year"?10:1;this.changePanelDate(a,"FullYear",h)},prevMonth(a){this.changePanelDate(a,"Month",-1)},nextMonth(a){this.changePanelDate(a,"Month",1)},changePanelDate(a,h,p,C=!0){const w=new Date(this[`${a}PanelDate`]);if(h==="FullYear"?w[`set${h}`](w[`get${h}`]()+p):w[`set${h}`](w[`get${h}`]()+p,1),this[`${a}PanelDate`]=w,!!C)if(this.splitPanels){const v=a==="left"?"right":"left";a==="left"&&this.leftPanelDate>=this.rightPanelDate&&this.changePanelDate(v,h,1),a==="right"&&this.rightPanelDate<=this.leftPanelDate&&this.changePanelDate(v,h,-1)}else{const v=a==="left"?"right":"left",A=this[`${v}PanelDate`],V=new Date(A);if(h==="Month"){const H=new Date(V.getFullYear(),V.getMonth()+p+1,0).getDate();V.setDate(Math.min(H,V.getDate()))}V[`set${h}`](V[`get${h}`]()+p),this[`${v}PanelDate`]=V}},showYearPicker(a){this[`${a}PickerTable`]="year-table"},showMonthPicker(a){this[`${a}PickerTable`]="month-table"},handlePreSelection(a,h){if(this[`${a}PanelDate`]=h,this[`${a}PickerTable`]==="year-table"?this[`${a}PickerTable`]="month-table":this[`${a}PickerTable`]=`${this.currentView}-table`,!this.splitPanels){const p=a==="left"?"right":"left";this[`${p}PanelDate`]=h;const C=p==="left"?-1:1;this.changePanelDate(p,"Month",C,!1)}},handleRangePick(a,h){if(this.rangeState.selecting||this.currentView==="time"){if(this.currentView==="time")this.dates=a;else{const[p,C]=[this.rangeState.from,a].sort(L4);this.dates=[p,C],this.rangeState={from:p,to:C,selecting:!1}}this.handleConfirm(!1,h||"date")}else this.rangeState={from:a,to:null,selecting:!0}},handleChangeRange(a){this.rangeState.to=a}}},eJ=["onClick"];function tJ(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("date-panel-label"),H=t.resolveComponent("time-picker"),X=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),onMousedown:h[8]||(h[8]=t.withModifiers(()=>{},["prevent"]))},[a.shortcuts.length?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-sidebar"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.shortcuts,Y=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls+"-shortcut"]),key:Y.text,onClick:le=>a.handleShortcutClick(Y)},t.toDisplayString(Y.text),11,eJ))),128))],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(v.panelBodyClasses)},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content",w.prefixCls+"-content-left"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.datePrefixCls+"-header"])},[t.createElementVNode("span",{class:t.normalizeClass(a.iconBtnCls("prev","-double")),onClick:h[0]||(h[0]=Y=>v.prevYear("left"))},[t.createVNode(A,{type:"ios-arrow-back"})],2),w.leftPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(a.iconBtnCls("prev")),onClick:h[1]||(h[1]=Y=>v.prevMonth("left"))},[t.createVNode(A,{type:"ios-arrow-back"})],2)),[[t.vShow,w.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(V,{"date-panel-label":v.leftDatePanelLabel,"current-view":v.leftDatePanelView,"date-prefix-cls":w.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),p.splitPanels||w.leftPickerTable!=="date-table"?(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(a.iconBtnCls("next","-double")),onClick:h[2]||(h[2]=Y=>v.nextYear("left"))},[t.createVNode(A,{type:"ios-arrow-forward"})],2)):t.createCommentVNode("",!0),p.splitPanels&&w.leftPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(a.iconBtnCls("next")),onClick:h[3]||(h[3]=Y=>v.nextMonth("left"))},[t.createVNode(A,{type:"ios-arrow-forward"})],2)),[[t.vShow,w.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,w.currentView!=="time"]]),w.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(w.leftPickerTable),{key:0,ref:"leftYearTable","table-date":w.leftPanelDate,"selection-mode":"range","disabled-date":a.disabledDate,"range-state":w.rangeState,"show-week-numbers":a.showWeekNumbers,"model-value":v.preSelecting.left?[w.dates[0]]:w.dates,"focused-date":a.focusedDate,onOnChangeRange:v.handleChangeRange,onOnPick:v.panelPickerHandlers.left,onOnPickClick:a.handlePickClick},null,40,["table-date","disabled-date","range-state","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),[[t.vShow,!a.isTime]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content",w.prefixCls+"-content-right"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.datePrefixCls+"-header"])},[p.splitPanels||w.rightPickerTable!=="date-table"?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(a.iconBtnCls("prev","-double")),onClick:h[4]||(h[4]=Y=>v.prevYear("right"))},[t.createVNode(A,{type:"ios-arrow-back"})],2)):t.createCommentVNode("",!0),p.splitPanels&&w.rightPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(a.iconBtnCls("prev")),onClick:h[5]||(h[5]=Y=>v.prevMonth("right"))},[t.createVNode(A,{type:"ios-arrow-back"})],2)),[[t.vShow,w.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(V,{"date-panel-label":v.rightDatePanelLabel,"current-view":v.rightDatePanelView,"date-prefix-cls":w.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),t.createElementVNode("span",{class:t.normalizeClass(a.iconBtnCls("next","-double")),onClick:h[6]||(h[6]=Y=>v.nextYear("right"))},[t.createVNode(A,{type:"ios-arrow-forward"})],2),w.rightPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(a.iconBtnCls("next")),onClick:h[7]||(h[7]=Y=>v.nextMonth("right"))},[t.createVNode(A,{type:"ios-arrow-forward"})],2)),[[t.vShow,w.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,w.currentView!=="time"]]),w.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(w.rightPickerTable),{key:0,ref:"rightYearTable","table-date":w.rightPanelDate,"selection-mode":"range","range-state":w.rangeState,"disabled-date":a.disabledDate,"show-week-numbers":a.showWeekNumbers,"model-value":v.preSelecting.right?[w.dates[w.dates.length-1]]:w.dates,"focused-date":a.focusedDate,onOnChangeRange:v.handleChangeRange,onOnPick:v.panelPickerHandlers.right,onOnPickClick:a.handlePickClick},null,40,["table-date","range-state","disabled-date","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),[[t.vShow,!a.isTime]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content"])},[w.currentView==="time"?(t.openBlock(),t.createBlock(H,t.mergeProps({key:0,ref:"timePicker","model-value":w.dates,format:a.format,"time-disabled":v.timeDisabled},a.timePickerOptions,{onOnPick:v.handleRangePick,onOnPickClick:a.handlePickClick,onOnPickClear:a.handlePickClear,onOnPickSuccess:a.handlePickSuccess,onOnPickToggleTime:a.handleToggleTime}),null,16,["model-value","format","time-disabled","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):t.createCommentVNode("",!0)],2),[[t.vShow,a.isTime]]),a.confirm?(t.openBlock(),t.createBlock(X,{key:0,"show-time":a.showTime,"is-time":a.isTime,"time-disabled":v.timeDisabled,onOnPickToggleTime:a.handleToggleTime,onOnPickClear:a.handlePickClear,onOnPickSuccess:a.handlePickSuccess},null,8,["show-time","is-time","time-disabled","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var iJ=l(JK,[["render",tJ]]),B4={name:"CalendarPicker",mixins:[y4],props:{type:{validator(a){return _(a,["year","month","date","daterange","datetime","datetimerange"])},default:"date"}},components:{DatePickerPanel:qK,RangeDatePickerPanel:iJ},computed:{panel(){return this.type==="daterange"||this.type==="datetimerange"?"RangeDatePickerPanel":"DatePickerPanel"},ownPickerProps(){return this.options}}},nJ={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};const U4={name:"Description",inject:["DescriptionListInstance"],props:{term:{type:String}},computed:{styles(){let a={};return this.DescriptionListInstance.gutter!==0&&(a={paddingLeft:this.DescriptionListInstance.gutter/2+"px",paddingRight:this.DescriptionListInstance.gutter/2+"px"}),a}},render(){let a;(this.term||this.$slots.term)&&(this.$slots.term?a=t.h("div",{class:"ivu-description-term"},this.$slots.term()):a=t.h("div",{class:"ivu-description-term"},this.term));const h=t.h("div",{class:"ivu-description-detail"},this.$slots.default()),p=a?[a,h]:[h];return t.h(Na,{...nJ[this.DescriptionListInstance.col],style:this.styles},()=>p)}},rJ={name:"DescriptionList",components:{Row:vc},provide(){return{DescriptionListInstance:this}},props:{layout:{validator(a){return _(a,["horizontal","vertical"])},default:"horizontal"},title:{type:String},gutter:{type:Number,default:32},col:{validator(a){return _(a,[1,2,3,4])},default:3}}},sJ={key:0,class:"ivu-description-list-title"};function oJ(a,h,p,C,w,v){const A=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-description-list",{"ivu-description-list-vertical":p.layout==="vertical"}])},[p.title||a.$slots.title?(t.openBlock(),t.createElementBlock("div",sJ,[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])])):t.createCommentVNode("",!0),t.createVNode(A,{gutter:p.gutter},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"default")]),_:3},8,["gutter"])],2)}var F4=l(rJ,[["render",oJ]]);const xc="ivu-divider",aJ={name:"Divider",props:{type:{type:String,default:"horizontal",validator(a){return _(a,["horizontal","vertical"])}},orientation:{type:String,default:"center",validator(a){return _(a,["left","right","center"])}},dashed:{type:Boolean,default:!1},size:{validator(a){return _(a,["small","default"])},default:"default"},plain:{type:Boolean,default:!1}},computed:{hasSlot(){return!!this.$slots.default},classes(){return[`${xc}`,`${xc}-${this.type}`,`${xc}-${this.size}`,{[`${xc}-with-text`]:this.hasSlot&&this.orientation==="center",[`${xc}-with-text-${this.orientation}`]:this.hasSlot,[`${xc}-dashed`]:!!this.dashed,[`${xc}-plain`]:this.plain}]},slotClasses(){return[`${xc}-inner-text`]}}};function lJ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[v.hasSlot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(v.slotClasses)},[t.renderSlot(a.$slots,"default")],2)):t.createCommentVNode("",!0)],2)}var zy=l(aJ,[["render",lJ]]),oS={props:{lockScroll:{type:Boolean,default:!0}},methods:{checkScrollBar(){if(!r)return;let a=window.innerWidth;if(!a){const h=document.documentElement.getBoundingClientRect();a=h.right-Math.abs(h.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.bodyIsOverflowing&&(this.scrollBarWidth=k())},checkMaskInVisible(){let a=r?document.getElementsByClassName("ivu-modal-mask")||[]:[];return Array.from(a).every(h=>h.style.display==="none"||h.classList.contains("fade-leave-to"))},setScrollBar(){r&&this.bodyIsOverflowing&&this.scrollBarWidth!==void 0&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){r&&(document.body.style.paddingRight="")},addScrollEffect(){!this.lockScroll||(this.checkScrollBar(),this.setScrollBar(),r&&(document.body.style.overflow="hidden"))},removeScrollEffect(){!this.lockScroll||r&&this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}};const us="ivu-drawer",cJ={name:"Drawer",mixins:[oS],components:{Icon:S},emits:["on-close","on-resize-width","on-visible-change","update:modelValue","on-drag"],provide(){return{DrawerInstance:this}},props:{modelValue:{type:Boolean,default:!1},title:{type:String},width:{type:[Number,String],default:256},height:{type:[Number,String],default:256},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskStyle:{type:Object},styles:{type:Object},scrollable:{type:Boolean,default:!1},placement:{validator(a){return _(a,["left","right","top","bottom"])},default:"right"},zIndex:{type:Number,default:1e3},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!0:a.$VIEWUI.transfer}},className:{type:String},inner:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},beforeClose:Function},data(){return{prefixCls:us,visible:this.modelValue,wrapShow:!1,showHead:!0,canMove:!1,dragWidth:this.width,dragHeight:this.height,wrapperWidth:this.width,wrapperHeight:this.height,wrapperLeft:0,minWidth:256,minHeight:256,id:ee(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${us}-wrap`,{[`${us}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${us}-no-mask`]:!this.mask,[`${us}-wrap-inner`]:this.inner,[`${us}-wrap-dragging`]:this.canMove}]},wrapStyles(){return{zIndex:this.zIndex}},mainStyles(){let a={};if(this.placement==="left"||this.placement==="right"){const h=parseInt(this.dragWidth),p={width:h<=100?`${h}%`:`${h}px`};Object.assign(a,p)}else{const h=parseInt(this.dragHeight),p={height:h<=100?`${h}%`:`${h}px`};Object.assign(a,p)}return a},contentClasses(){return[`${us}-content`,{[`${us}-content-no-mask`]:!this.mask}]},classes(){return[`${us}`,`${us}-${this.placement}`,{[`${us}-no-header`]:!this.showHead,[`${us}-inner`]:this.inner}]},maskClasses(){return[`${us}-mask`,{[`${us}-mask-inner`]:this.inner}]},transitionName(){return this.placement==="left"||this.placement==="right"?`move-${this.placement}`:this.placement==="top"?"move-up":"move-down"}},methods:{close(){if(!this.beforeClose)return this.handleClose();const a=this.beforeClose();a&&a.then?a.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-close")},handleMask(){this.maskClosable&&this.mask&&this.close()},handleWrapClick(a){const h=a.target.getAttribute("class");h&&h.indexOf(`${us}-wrap`)>-1&&this.handleMask()},handleMousemove(a){if(!this.canMove||!this.draggable)return;this.handleSetWrapperWidth();const h=a.pageX-this.wrapperLeft;let p=this.placement==="right"?this.wrapperWidth-h:h;p=Math.max(p,parseFloat(this.minWidth)),a.atMin=p===parseFloat(this.minWidth),p<=100&&(p=p/this.wrapperWidth*100),this.dragWidth=p,this.$emit("on-resize-width",parseInt(this.dragWidth)),this.$emit("on-drag","dragging",parseInt(this.dragWidth))},handleSetWrapperWidth(){const{width:a,left:h}=this.$refs.drawer.getBoundingClientRect();this.wrapperWidth=a,this.wrapperLeft=h},handleMouseup(){!this.draggable||(this.canMove=!1,this.$emit("on-drag","end"))},handleTriggerMousedown(){this.canMove=!0,window.getSelection().removeAllRanges(),this.$emit("on-drag","start")},addDrawer(){const a=this.$root;a.drawerList||(a.drawerList=[]),a.drawerList.push({id:this.id,drawer:this})},removeDrawer(){const a=this.$root;if(!a.drawerList)return;const h=a.drawerList.findIndex(p=>p.id===this.id);a.drawerList.splice(h,1)}},mounted(){this.visible&&(this.wrapShow=!0);let a=!0;this.$slots.header===void 0&&!this.title&&(a=!1),this.showHead=a,this.addDrawer(),s(document,"mousemove",this.handleMousemove),s(document,"mouseup",this.handleMouseup),this.handleSetWrapperWidth()},beforeUnmount(){this.removeDrawer(),o(document,"mousemove",this.handleMousemove),o(document,"mouseup",this.handleMouseup),this.removeScrollEffect()},watch:{modelValue(a){this.visible=a},visible(a){a===!1?this.timer=setTimeout(()=>{this.wrapShow=!1,this.$root.drawerList.map(h=>h.drawer).filter(h=>h.id!==this.id).some(h=>h.visible&&!h.scrollable)||this.removeScrollEffect()},300):(this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(h=>{h.table.handleOnVisibleChange(a)}),this.sliderList.forEach(h=>{h.slider.handleOnVisibleChange(a)}),this.$emit("on-visible-change",a)},scrollable(a){a?this.removeScrollEffect():this.addScrollEffect()},title(a){this.$slots.header===void 0&&(this.showHead=!!a)},width(a){this.dragWidth=a},height(a){this.dragHeight=a}}},hJ={ref:"drawer"},uJ=t.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger"},[t.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger-point"},[t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i")])],-1);function dJ(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!p.transfer},[t.createElementVNode("div",hJ,[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[p.mask?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.maskClasses),style:t.normalizeStyle(p.maskStyle),onClick:h[0]||(h[0]=(...V)=>v.handleMask&&v.handleMask(...V))},null,6)),[[t.vShow,w.visible]]):t.createCommentVNode("",!0)]),_:1}),t.createElementVNode("div",{class:t.normalizeClass(v.wrapClasses),style:t.normalizeStyle(v.wrapStyles),onClick:h[3]||(h[3]=(...V)=>v.handleWrapClick&&v.handleWrapClick(...V))},[t.createVNode(t.Transition,{name:v.transitionName},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.mainStyles)},[t.createElementVNode("div",{class:t.normalizeClass(v.contentClasses),ref:"content"},[p.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:"ivu-drawer-close",onClick:h[1]||(h[1]=(...V)=>v.close&&v.close(...V))},[t.renderSlot(a.$slots,"close",{},()=>[t.createVNode(A,{type:"ios-close"})])])):t.createCommentVNode("",!0),w.showHead?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([w.prefixCls+"-header"])},[t.renderSlot(a.$slots,"header",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-header-inner"])},t.toDisplayString(p.title),3)])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"]),style:t.normalizeStyle(p.styles)},[t.renderSlot(a.$slots,"default")],6)],2),p.draggable&&(p.placement==="left"||p.placement==="right")?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["ivu-drawer-drag","ivu-drawer-drag-"+p.placement]),onMousedown:h[2]||(h[2]=(...V)=>v.handleTriggerMousedown&&v.handleTriggerMousedown(...V))},[t.renderSlot(a.$slots,"trigger",{},()=>[uJ])],34)):t.createCommentVNode("",!0)],6),[[t.vShow,w.visible]])]),_:3},8,["name"])],6)],512)],8,["disabled"])}var z4=l(cJ,[["render",dJ]]);const Xy="ivu-dropdown-item",fJ={name:"DropdownItem",props:{name:{type:[String,Number]},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},divided:{type:Boolean,default:!1}},computed:{classes(){return[`${Xy}`,{[`${Xy}-disabled`]:this.disabled,[`${Xy}-selected`]:this.selected,[`${Xy}-divided`]:this.divided}]}},methods:{handleClick(){if(this.disabled)return;const a=$(this,"Dropdown");this.$parent&&this.$parent.$options.name==="Dropdown"?this.$parent.handleHaschildClick():a&&a.$options.name==="Dropdown"&&a.handleHoverClick(),a.handleItemClick(this.name)}}};function pJ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.classes),onClick:h[0]||(h[0]=(...A)=>v.handleClick&&v.handleClick(...A))},[t.renderSlot(a.$slots,"default")],2)}var X4=l(fJ,[["render",pJ]]);const mJ=(a="")=>a.split("").reduce((h,p)=>{const C=p.charCodeAt(0);return C>=0&&C<=128?h+1:h+2},0),gJ=(a="",h)=>{let p=0;return a.split("").reduce((C,w)=>{const v=w.charCodeAt(0);return v>=0&&v<=128?p+=1:p+=2,p<=h?C+w:C},"")},vJ={name:"Ellipsis",components:{Tooltip:vl},emits:["on-show","on-hide"],props:{text:{type:String},height:{type:Number},lines:{type:Number},length:{type:Number},fullWidthRecognition:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},theme:{validator(a){return _(a,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"}},data(){return{oversize:!1,computedReady:!1,computedText:""}},watch:{disabled(){this.init()},text(){this.init()},height(){this.init()}},mounted(){this.init()},methods:{init(){this.disabled||(this.computeText(),this.limitShow())},computeText(){this.oversize=!1,this.computedReady=!1,t.nextTick(()=>{let a=this.$refs.text,h=this.$el,p=this.$refs.more,C=1e3,w=this.text,v=this.height;if(!v&&this.lines&&(v=parseInt(I(h,"lineHeight"),10)*this.lines),a){if(this.length)(this.fullWidthRecognition?mJ(w):w.length)>this.length&&(this.oversize=!0,p.style.display="inline-block",w=this.fullWidthRecognition?gJ(w,this.length):w.slice(0,this.length));else if(h.offsetHeight>v)for(this.oversize=!0,p.style.display="inline-block";h.offsetHeight>v&&C>0;)h.offsetHeight>v*3?a.innerText=w=w.substring(0,Math.floor(w.length/2)):a.innerText=w=w.substring(0,w.length-1),C--}this.computedText=w})},limitShow(){this.computedReady=!0,t.nextTick(()=>{let a=this.$refs.text,h=this.$el;a&&(a.innerText=this.computedText,h.offsetHeight>this.height?this.$emit("on-hide"):this.$emit("on-show"))})}}},yJ={class:"ivu-ellipsis"},bJ={class:"ivu-ellipsis-more",ref:"more"},xJ={class:"ivu-ellipsis-more",ref:"more"},OJ={key:1,class:"ivu-ellipsis-hidden"},wJ={class:"ivu-ellipsis-more",ref:"more"};function _J(a,h,p,C,w,v){const A=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",yJ,[t.renderSlot(a.$slots,"prefix",{class:"ivu-ellipsis-prefix"}),w.computedReady?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[p.tooltip?(t.openBlock(),t.createBlock(A,{key:0,content:p.text,theme:p.theme,"max-width":p.maxWidth,placement:p.placement,transfer:p.transfer},{default:t.withCtx(()=>[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(p.text),513),t.withDirectives(t.createElementVNode("span",bJ,[t.renderSlot(a.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,w.oversize]]),t.renderSlot(a.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]),_:3},8,["content","theme","max-width","placement","transfer"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(p.text),513),t.withDirectives(t.createElementVNode("span",xJ,[t.renderSlot(a.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,w.oversize]]),t.renderSlot(a.$slots,"suffix",{class:"ivu-ellipsis-suffix"})],64))],64)):(t.openBlock(),t.createElementBlock("div",OJ,[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(p.text),513),t.withDirectives(t.createElementVNode("span",wJ,[t.renderSlot(a.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,w.oversize]]),t.renderSlot(a.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]))])}var W4=l(vJ,[["render",_J]]);const Q4={name:"Email",mixins:[um],data(){return{className:"ivu-login-mail",prefix:"ios-mail-outline",placeholder:"",type:"email"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:F_.Email,trigger:"change"},{type:"email",message:"",trigger:"change"}]}}}};var Wy={403:{img:"https://file.iviewui.com/iview-pro/icon-403.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-403-color.svg",title:"403",desc:""},404:{img:"https://file.iviewui.com/iview-pro/icon-404.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-404-color.svg",title:"404",desc:""},500:{img:"https://file.iviewui.com/iview-pro/icon-500.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-500-color.svg",title:"500",desc:""}};const SJ={name:"Exception",components:{Button:cs},props:{type:{validator(a){return _(a,["403","404","500",403,404,500])},default:"404"},title:{type:String},desc:{type:String},img:{type:String},imgColor:{type:Boolean,default:!1},backText:{type:String,default:""},redirect:{type:String,default:"/"}},computed:{imgPath(){return this.img?this.img:this.imgColor?Wy[this.type].imgColor:Wy[this.type].img},titleText(){return this.title?this.title:Wy[this.type].title},descText(){return this.desc?this.desc:Wy[this.type].desc}}},CJ={class:"ivu-exception"},kJ={class:"ivu-exception-img"},TJ={class:"ivu-exception-content"},MJ={class:"ivu-exception-content-desc"},EJ={class:"ivu-exception-content-actions"};function PJ(a,h,p,C,w,v){const A=t.resolveComponent("Button");return t.openBlock(),t.createElementBlock("div",CJ,[t.createElementVNode("div",kJ,[t.createElementVNode("div",{class:"ivu-exception-img-element",style:t.normalizeStyle({"background-image":"url("+v.imgPath+")"})},null,4)]),t.createElementVNode("div",TJ,[t.createElementVNode("h1",null,[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(v.titleText),1)])]),t.createElementVNode("div",MJ,[t.renderSlot(a.$slots,"desc",{},()=>[t.createTextVNode(t.toDisplayString(v.descText),1)])]),t.createElementVNode("div",EJ,[t.renderSlot(a.$slots,"actions",{},()=>[t.createVNode(A,{to:p.redirect,type:"primary",size:"large"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.backText),1)]),_:1},8,["to"])])])])])}var H4=l(SJ,[["render",PJ]]);const AJ="ivu-layout",RJ={name:"Footer",computed:{wrapClasses(){return`${AJ}-footer`}}};function IJ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[t.renderSlot(a.$slots,"default")],2)}var aS=l(RJ,[["render",IJ]]);const DJ={name:"FooterToolbar",props:{extra:{type:String}}},NJ={class:"ivu-footer-toolbar"},$J={key:0,class:"ivu-footer-toolbar-left"},VJ={class:"ivu-footer-toolbar-right"};function LJ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",NJ,[p.extra||a.$slots.extra?(t.openBlock(),t.createElementBlock("div",$J,[t.renderSlot(a.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(p.extra),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",VJ,[t.renderSlot(a.$slots,"default")])])}var G4=l(DJ,[["render",LJ]]);const Qy="ivu-form",BJ={name:"iForm",emits:["on-validate"],provide(){return{FormInstance:this}},props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{validator(a){return _(a,["left","right","top"])},default:"right"},inline:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},autocomplete:{validator(a){return _(a,["on","off"])},default:"off"},hideRequiredMark:{type:Boolean,default:!1},labelColon:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1}},data(){return{fields:[]}},computed:{classes(){return[`${Qy}`,`${Qy}-label-${this.labelPosition}`,{[`${Qy}-inline`]:this.inline,[`${Qy}-hide-required-mark`]:this.hideRequiredMark}]},colon(){let a="";return this.labelColon&&(a=typeof this.labelColon=="boolean"?":":this.labelColon),a}},methods:{resetFields(){this.fields.forEach(a=>{a.resetField()})},validate(a){return new Promise(h=>{let p=!0,C=0;this.fields.length===0&&(h(p),typeof a=="function"&&a(p)),this.fields.forEach(w=>{w.validate("",v=>{v&&(p=!1),++C===this.fields.length&&(h(p),typeof a=="function"&&a(p))})})})},validateField(a,h){const p=this.fields.filter(C=>C.prop===a)[0];if(!p)throw new Error("[View UI warn]: must call validateField with valid prop string!");p.validate("",h)},addField(a){a&&this.fields.push(a)},removeField(a){a.prop&&this.fields.splice(this.fields.indexOf(a),1)}},watch:{rules(){this.validate()}}},UJ=["autocomplete"];function FJ(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("form",{class:t.normalizeClass(v.classes),autocomplete:p.autocomplete},[t.renderSlot(a.$slots,"default")],10,UJ)}var Hy=l(BJ,[["render",FJ]]);const zJ={name:"GlobalFooter",components:{Icon:S},props:{links:{type:Array,default(){return[]}},copyright:{type:String}}},XJ={class:"ivu-global-footer"},WJ={key:0,class:"ivu-global-footer-links"},QJ=["href","target","title"],HJ={key:1,class:"ivu-global-footer-copyright"};function GJ(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("footer",XJ,[p.links.length||a.$slots.links?(t.openBlock(),t.createElementBlock("div",WJ,[t.renderSlot(a.$slots,"links",{},()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.links,V=>(t.openBlock(),t.createElementBlock("a",{href:V.href,target:V.blankTarget?"_blank":"_self",key:V.key,title:V.title},[V.icon?(t.openBlock(),t.createBlock(A,{key:0,type:V.icon},null,8,["type"])):V.customIcon?(t.openBlock(),t.createBlock(A,{key:1,custom:V.customIcon},null,8,["custom"])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(V.title),1)],8,QJ))),128))])])):t.createCommentVNode("",!0),p.copyright||a.$slots.copyright?(t.openBlock(),t.createElementBlock("div",HJ,[t.renderSlot(a.$slots,"copyright",{},()=>[t.createTextVNode(t.toDisplayString(p.copyright),1)])])):t.createCommentVNode("",!0)])}var Y4=l(zJ,[["render",GJ]]),lS={exports:{}},YJ=lS.exports={};YJ.forEach=function(a,h){for(var p=0;p<a.length;p++){var C=h(a[p]);if(C)return C}};var jJ=function(a){var h=a.stateHandler.getState;function p(A){var V=h(A);return V&&!!V.isDetectable}function C(A){h(A).isDetectable=!0}function w(A){return!!h(A).busy}function v(A,V){h(A).busy=!!V}return{isDetectable:p,markAsDetectable:C,isBusy:w,markBusy:v}},qJ=function(a){var h={};function p(A){var V=a.get(A);return V===void 0?[]:h[V]||[]}function C(A,V){var H=a.get(A);h[H]||(h[H]=[]),h[H].push(V)}function w(A,V){for(var H=p(A),X=0,Y=H.length;X<Y;++X)if(H[X]===V){H.splice(X,1);break}}function v(A){var V=p(A);!V||(V.length=0)}return{get:p,add:C,removeListener:w,removeAllListeners:v}},ZJ=function(){var a=1;function h(){return a++}return{generate:h}},KJ=function(a){var h=a.idGenerator,p=a.stateHandler.getState;function C(v){var A=p(v);return A&&A.id!==void 0?A.id:null}function w(v){var A=p(v);if(!A)throw new Error("setId required the element to have a resize detection state.");var V=h.generate();return A.id=V,V}return{get:C,set:w}},JJ=function(a){function h(){}var p={log:h,warn:h,error:h};if(!a&&window.console){var C=function(w,v){w[v]=function(){var A=console[v];if(A.apply)A.apply(console,arguments);else for(var V=0;V<arguments.length;V++)A(arguments[V])}};C(p,"log"),C(p,"warn"),C(p,"error")}return p},cS={exports:{}},j4=cS.exports={};j4.isIE=function(a){function h(){var C=navigator.userAgent.toLowerCase();return C.indexOf("msie")!==-1||C.indexOf("trident")!==-1||C.indexOf(" edge/")!==-1}if(!h())return!1;if(!a)return!0;var p=function(){var C,w=3,v=document.createElement("div"),A=v.getElementsByTagName("i");do v.innerHTML="<!--[if gt IE "+ ++w+"]><i></i><![endif]-->";while(A[0]);return w>4?w:C}();return a===p},j4.isLegacyOpera=function(){return!!window.opera};var q4={exports:{}},eee=q4.exports={};eee.getOption=tee;function tee(a,h,p){var C=a[h];return C==null&&p!==void 0?p:C}var Z4=q4.exports,iee=function(a){a=a||{};var h=a.reporter,p=Z4.getOption(a,"async",!0),C=Z4.getOption(a,"auto",!0);C&&!p&&(h&&h.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),p=!0);var w=K4(),v,A=!1;function V(be,ge){!A&&C&&p&&w.size()===0&&Y(),w.add(be,ge)}function H(){for(A=!0;w.size();){var be=w;w=K4(),be.process()}A=!1}function X(be){A||(be===void 0&&(be=p),v&&(le(v),v=null),be?Y():H())}function Y(){v=xe(H)}function le(be){var ge=clearTimeout;return ge(be)}function xe(be){var ge=function(se){return setTimeout(se,0)};return ge(be)}return{add:V,force:X}};function K4(){var a={},h=0,p=0,C=0;function w(V,H){H||(H=V,V=0),V>p?p=V:V<C&&(C=V),a[V]||(a[V]=[]),a[V].push(H),h++}function v(){for(var V=C;V<=p;V++)for(var H=a[V],X=0;X<H.length;X++){var Y=H[X];Y()}}function A(){return h}return{add:w,process:v,size:A}}var hS="_erd";function nee(a){return a[hS]={},J4(a)}function J4(a){return a[hS]}function ree(a){delete a[hS]}var see={initState:nee,getState:J4,cleanState:ree},_m=cS.exports,oee=function(a){a=a||{};var h=a.reporter,p=a.batchProcessor,C=a.stateHandler.getState;if(!h)throw new Error("Missing required dependency: reporter.");function w(X,Y){function le(){Y(X)}if(_m.isIE(8))C(X).object={proxy:le},X.attachEvent("onresize",le);else{var xe=V(X);if(!xe)throw new Error("Element is not detectable by this strategy.");xe.contentDocument.defaultView.addEventListener("resize",le)}}function v(X){var Y=a.important?" !important; ":"; ";return(X.join(Y)+Y).trim()}function A(X,Y,le){le||(le=Y,Y=X,X=null),X=X||{},X.debug;function xe(be,ge){var se=v(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Ae=!1,$t=window.getComputedStyle(be),mt=be.offsetWidth,xt=be.offsetHeight;C(be).startSize={width:mt,height:xt};function He(){function De(){if($t.position==="static"){be.style.setProperty("position","relative",X.important?"important":"");var Xt=function(Wt,Mt,Ot,Rt){function Gt(gt){return gt.replace(/[^-\d\.]/g,"")}var Et=Ot[Rt];Et!=="auto"&&Gt(Et)!=="0"&&(Wt.warn("An element that is positioned static has style."+Rt+"="+Et+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Rt+" will be set to 0. Element: ",Mt),Mt.style.setProperty(Rt,"0",X.important?"important":""))};Xt(h,be,$t,"top"),Xt(h,be,$t,"right"),Xt(h,be,$t,"bottom"),Xt(h,be,$t,"left")}}function Ke(){Ae||De();function Xt(Mt,Ot){if(!Mt.contentDocument){var Rt=C(Mt);Rt.checkForObjectDocumentTimeoutId&&window.clearTimeout(Rt.checkForObjectDocumentTimeoutId),Rt.checkForObjectDocumentTimeoutId=setTimeout(function(){Rt.checkForObjectDocumentTimeoutId=0,Xt(Mt,Ot)},100);return}Ot(Mt.contentDocument)}var Wt=this;Xt(Wt,function(Mt){ge(be)})}$t.position!==""&&(De(),Ae=!0);var Ye=document.createElement("object");Ye.style.cssText=se,Ye.tabIndex=-1,Ye.type="text/html",Ye.setAttribute("aria-hidden","true"),Ye.onload=Ke,_m.isIE()||(Ye.data="about:blank"),C(be)&&(be.appendChild(Ye),C(be).object=Ye,_m.isIE()&&(Ye.data="about:blank"))}p?p.add(He):He()}_m.isIE(8)?le(Y):xe(Y,le)}function V(X){return C(X).object}function H(X){if(C(X)){var Y=V(X);!Y||(_m.isIE(8)?X.detachEvent("onresize",Y.proxy):X.removeChild(Y),C(X).checkForObjectDocumentTimeoutId&&window.clearTimeout(C(X).checkForObjectDocumentTimeoutId),delete C(X).object)}}return{makeDetectable:A,addListener:w,uninstall:H}},aee=lS.exports.forEach,lee=function(a){a=a||{};var h=a.reporter,p=a.batchProcessor,C=a.stateHandler.getState;a.stateHandler.hasState;var w=a.idHandler;if(!p)throw new Error("Missing required dependency: batchProcessor");if(!h)throw new Error("Missing required dependency: reporter.");var v=Y(),A="erd_scroll_detection_scrollbar_style",V="erd_scroll_detection_container";function H(He){le(He,A,V)}H(window.document);function X(He){var De=a.important?" !important; ":"; ";return(He.join(De)+De).trim()}function Y(){var He=500,De=500,Ke=document.createElement("div");Ke.style.cssText=X(["position: absolute","width: "+He*2+"px","height: "+De*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Ye=document.createElement("div");Ye.style.cssText=X(["position: absolute","width: "+He+"px","height: "+De+"px","overflow: scroll","visibility: none","top: "+-He*3+"px","left: "+-De*3+"px","visibility: hidden","margin: 0","padding: 0"]),Ye.appendChild(Ke),document.body.insertBefore(Ye,document.body.firstChild);var Xt=He-Ye.clientWidth,Wt=De-Ye.clientHeight;return document.body.removeChild(Ye),{width:Xt,height:Wt}}function le(He,De,Ke){function Ye(Ot,Rt){Rt=Rt||function(Et){He.head.appendChild(Et)};var Gt=He.createElement("style");return Gt.innerHTML=Ot,Gt.id=De,Rt(Gt),Gt}if(!He.getElementById(De)){var Xt=Ke+"_animation",Wt=Ke+"_animation_active",Mt=`/* Created by the element-resize-detector library. */
`;Mt+="."+Ke+" > div::-webkit-scrollbar { "+X(["display: none"])+` }

`,Mt+="."+Wt+" { "+X(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+Xt,"animation-name: "+Xt])+` }
`,Mt+="@-webkit-keyframes "+Xt+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,Mt+="@keyframes "+Xt+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Ye(Mt)}}function xe(He){He.className+=" "+V+"_animation_active"}function be(He,De,Ke){if(He.addEventListener)He.addEventListener(De,Ke);else if(He.attachEvent)He.attachEvent("on"+De,Ke);else return h.error("[scroll] Don't know how to add event listeners.")}function ge(He,De,Ke){if(He.removeEventListener)He.removeEventListener(De,Ke);else if(He.detachEvent)He.detachEvent("on"+De,Ke);else return h.error("[scroll] Don't know how to remove event listeners.")}function se(He){return C(He).container.childNodes[0].childNodes[0].childNodes[0]}function Ae(He){return C(He).container.childNodes[0].childNodes[0].childNodes[1]}function $t(He,De){var Ke=C(He).listeners;if(!Ke.push)throw new Error("Cannot add listener to an element that is not detectable.");C(He).listeners.push(De)}function mt(He,De,Ke){Ke||(Ke=De,De=He,He=null),He=He||{};function Ye(){if(He.debug){var _t=Array.prototype.slice.call(arguments);if(_t.unshift(w.get(De),"Scroll: "),h.log.apply)h.log.apply(null,_t);else for(var Kt=0;Kt<_t.length;Kt++)h.log(_t[Kt])}}function Xt(_t){function Kt(Mi){var Sr=Mi.getRootNode&&Mi.getRootNode().contains(Mi);return Mi===Mi.ownerDocument.body||Mi.ownerDocument.body.contains(Mi)||Sr}return!Kt(_t)||window.getComputedStyle(_t)===null}function Wt(_t){var Kt=C(_t).container.childNodes[0],Mi=window.getComputedStyle(Kt);return!Mi.width||Mi.width.indexOf("px")===-1}function Mt(){var _t=window.getComputedStyle(De),Kt={};return Kt.position=_t.position,Kt.width=De.offsetWidth,Kt.height=De.offsetHeight,Kt.top=_t.top,Kt.right=_t.right,Kt.bottom=_t.bottom,Kt.left=_t.left,Kt.widthCSS=_t.width,Kt.heightCSS=_t.height,Kt}function Ot(){var _t=Mt();C(De).startSize={width:_t.width,height:_t.height},Ye("Element start size",C(De).startSize)}function Rt(){C(De).listeners=[]}function Gt(){if(Ye("storeStyle invoked."),!C(De)){Ye("Aborting because element has been uninstalled");return}var _t=Mt();C(De).style=_t}function Et(_t,Kt,Mi){C(_t).lastWidth=Kt,C(_t).lastHeight=Mi}function gt(_t){return se(_t).childNodes[0]}function ct(){return 2*v.width+1}function It(){return 2*v.height+1}function bt(_t){return _t+10+ct()}function ei(_t){return _t+10+It()}function si(_t){return _t*2+ct()}function Qi(_t){return _t*2+It()}function ln(_t,Kt,Mi){var Sr=se(_t),ds=Ae(_t),Sl=bt(Kt),Ac=ei(Mi),fs=si(Kt),qi=Qi(Mi);Sr.scrollLeft=Sl,Sr.scrollTop=Ac,ds.scrollLeft=fs,ds.scrollTop=qi}function kn(){var _t=C(De).container;if(!_t){_t=document.createElement("div"),_t.className=V,_t.style.cssText=X(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),C(De).container=_t,xe(_t),De.appendChild(_t);var Kt=function(){C(De).onRendered&&C(De).onRendered()};be(_t,"animationstart",Kt),C(De).onAnimationStart=Kt}return _t}function An(){function _t(){var Kn=C(De).style;if(Kn.position==="static"){De.style.setProperty("position","relative",He.important?"important":"");var ua=function(Cl,da,u1,Rc){function US(FS){return FS.replace(/[^-\d\.]/g,"")}var Bm=u1[Rc];Bm!=="auto"&&US(Bm)!=="0"&&(Cl.warn("An element that is positioned static has style."+Rc+"="+Bm+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Rc+" will be set to 0. Element: ",da),da.style[Rc]=0)};ua(h,De,Kn,"top"),ua(h,De,Kn,"right"),ua(h,De,Kn,"bottom"),ua(h,De,Kn,"left")}}function Kt(Kn,ua,Cl,da){return Kn=Kn?Kn+"px":"0",ua=ua?ua+"px":"0",Cl=Cl?Cl+"px":"0",da=da?da+"px":"0",["left: "+Kn,"top: "+ua,"right: "+da,"bottom: "+Cl]}if(Ye("Injecting elements"),!C(De)){Ye("Aborting because element has been uninstalled");return}_t();var Mi=C(De).container;Mi||(Mi=kn());var Sr=v.width,ds=v.height,Sl=X(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),Ac=X(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Kt(-(1+Sr),-(1+ds),-ds,-Sr))),fs=X(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),qi=X(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Rs=X(["position: absolute","left: 0","top: 0"]),ca=X(["position: absolute","width: 200%","height: 200%"]),ao=document.createElement("div"),ha=document.createElement("div"),Xd=document.createElement("div"),l1=document.createElement("div"),Wd=document.createElement("div"),c1=document.createElement("div");ao.dir="ltr",ao.style.cssText=Sl,ao.className=V,ha.className=V,ha.style.cssText=Ac,Xd.style.cssText=fs,l1.style.cssText=Rs,Wd.style.cssText=qi,c1.style.cssText=ca,Xd.appendChild(l1),Wd.appendChild(c1),ha.appendChild(Xd),ha.appendChild(Wd),ao.appendChild(ha),Mi.appendChild(ao);function h1(){var Kn=C(De);Kn&&Kn.onExpand?Kn.onExpand():Ye("Aborting expand scroll handler: element has been uninstalled")}function Lm(){var Kn=C(De);Kn&&Kn.onShrink?Kn.onShrink():Ye("Aborting shrink scroll handler: element has been uninstalled")}be(Xd,"scroll",h1),be(Wd,"scroll",Lm),C(De).onExpandScroll=h1,C(De).onShrinkScroll=Lm}function Ar(){function _t(fs,qi,Rs){var ca=gt(fs),ao=bt(qi),ha=ei(Rs);ca.style.setProperty("width",ao+"px",He.important?"important":""),ca.style.setProperty("height",ha+"px",He.important?"important":"")}function Kt(fs){var qi=De.offsetWidth,Rs=De.offsetHeight,ca=qi!==C(De).lastWidth||Rs!==C(De).lastHeight;Ye("Storing current size",qi,Rs),Et(De,qi,Rs),p.add(0,function(){if(ca){if(!C(De)){Ye("Aborting because element has been uninstalled");return}if(!Mi()){Ye("Aborting because element container has not been initialized");return}if(He.debug){var ao=De.offsetWidth,ha=De.offsetHeight;(ao!==qi||ha!==Rs)&&h.warn(w.get(De),"Scroll: Size changed before updating detector elements.")}_t(De,qi,Rs)}}),p.add(1,function(){if(!C(De)){Ye("Aborting because element has been uninstalled");return}if(!Mi()){Ye("Aborting because element container has not been initialized");return}ln(De,qi,Rs)}),ca&&fs&&p.add(2,function(){if(!C(De)){Ye("Aborting because element has been uninstalled");return}if(!Mi()){Ye("Aborting because element container has not been initialized");return}fs()})}function Mi(){return!!C(De).container}function Sr(){function fs(){return C(De).lastNotifiedWidth===void 0}Ye("notifyListenersIfNeeded invoked");var qi=C(De);if(fs()&&qi.lastWidth===qi.startSize.width&&qi.lastHeight===qi.startSize.height)return Ye("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(qi.lastWidth===qi.lastNotifiedWidth&&qi.lastHeight===qi.lastNotifiedHeight)return Ye("Not notifying: Size already notified");Ye("Current size not notified, notifying..."),qi.lastNotifiedWidth=qi.lastWidth,qi.lastNotifiedHeight=qi.lastHeight,aee(C(De).listeners,function(Rs){Rs(De)})}function ds(){if(Ye("startanimation triggered."),Wt(De)){Ye("Ignoring since element is still unrendered...");return}Ye("Element rendered.");var fs=se(De),qi=Ae(De);(fs.scrollLeft===0||fs.scrollTop===0||qi.scrollLeft===0||qi.scrollTop===0)&&(Ye("Scrollbars out of sync. Updating detector elements..."),Kt(Sr))}function Sl(){if(Ye("Scroll detected."),Wt(De)){Ye("Scroll event fired while unrendered. Ignoring...");return}Kt(Sr)}if(Ye("registerListenersAndPositionElements invoked."),!C(De)){Ye("Aborting because element has been uninstalled");return}C(De).onRendered=ds,C(De).onExpand=Sl,C(De).onShrink=Sl;var Ac=C(De).style;_t(De,Ac.width,Ac.height)}function As(){if(Ye("finalizeDomMutation invoked."),!C(De)){Ye("Aborting because element has been uninstalled");return}var _t=C(De).style;Et(De,_t.width,_t.height),ln(De,_t.width,_t.height)}function aa(){Ke(De)}function la(){Ye("Installing..."),Rt(),Ot(),p.add(0,Gt),p.add(1,An),p.add(2,Ar),p.add(3,As),p.add(4,aa)}Ye("Making detectable..."),Xt(De)?(Ye("Element is detached"),kn(),Ye("Waiting until element is attached..."),C(De).onRendered=function(){Ye("Element is now attached"),la()}):la()}function xt(He){var De=C(He);!De||(De.onExpandScroll&&ge(se(He),"scroll",De.onExpandScroll),De.onShrinkScroll&&ge(Ae(He),"scroll",De.onShrinkScroll),De.onAnimationStart&&ge(De.container,"animationstart",De.onAnimationStart),De.container&&He.removeChild(De.container))}return{makeDetectable:mt,addListener:$t,uninstall:xt,initDocument:H}},Sm=lS.exports.forEach,cee=jJ,hee=qJ,uee=ZJ,dee=KJ,fee=JJ,e5=cS.exports,pee=iee,Oc=see,mee=oee,gee=lee;function t5(a){return Array.isArray(a)||a.length!==void 0}function i5(a){if(Array.isArray(a))return a;var h=[];return Sm(a,function(p){h.push(p)}),h}function n5(a){return a&&a.nodeType===1}var Vd=function(a){a=a||{};var h;if(a.idHandler)h={get:function(mt){return a.idHandler.get(mt,!0)},set:a.idHandler.set};else{var p=uee(),C=dee({idGenerator:p,stateHandler:Oc});h=C}var w=a.reporter;if(!w){var v=w===!1;w=fee(v)}var A=wc(a,"batchProcessor",pee({reporter:w})),V={};V.callOnAdd=!!wc(a,"callOnAdd",!0),V.debug=!!wc(a,"debug",!1);var H=hee(h),X=cee({stateHandler:Oc}),Y,le=wc(a,"strategy","object"),xe=wc(a,"important",!1),be={reporter:w,batchProcessor:A,stateHandler:Oc,idHandler:h,important:xe};if(le==="scroll"&&(e5.isLegacyOpera()?(w.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),le="object"):e5.isIE(9)&&(w.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),le="object")),le==="scroll")Y=gee(be);else if(le==="object")Y=mee(be);else throw new Error("Invalid strategy name: "+le);var ge={};function se(mt,xt,He){function De(Ot){var Rt=H.get(Ot);Sm(Rt,function(Gt){Gt(Ot)})}function Ke(Ot,Rt,Gt){H.add(Rt,Gt),Ot&&Gt(Rt)}if(He||(He=xt,xt=mt,mt={}),!xt)throw new Error("At least one element required.");if(!He)throw new Error("Listener required.");if(n5(xt))xt=[xt];else if(t5(xt))xt=i5(xt);else return w.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Ye=0,Xt=wc(mt,"callOnAdd",V.callOnAdd),Wt=wc(mt,"onReady",function(){}),Mt=wc(mt,"debug",V.debug);Sm(xt,function(Ot){Oc.getState(Ot)||(Oc.initState(Ot),h.set(Ot));var Rt=h.get(Ot);if(Mt&&w.log("Attaching listener to element",Rt,Ot),!X.isDetectable(Ot)){if(Mt&&w.log(Rt,"Not detectable."),X.isBusy(Ot)){Mt&&w.log(Rt,"System busy making it detectable"),Ke(Xt,Ot,He),ge[Rt]=ge[Rt]||[],ge[Rt].push(function(){Ye++,Ye===xt.length&&Wt()});return}return Mt&&w.log(Rt,"Making detectable..."),X.markBusy(Ot,!0),Y.makeDetectable({debug:Mt,important:xe},Ot,function(Gt){if(Mt&&w.log(Rt,"onElementDetectable"),Oc.getState(Gt)){X.markAsDetectable(Gt),X.markBusy(Gt,!1),Y.addListener(Gt,De),Ke(Xt,Gt,He);var Et=Oc.getState(Gt);if(Et&&Et.startSize){var gt=Gt.offsetWidth,ct=Gt.offsetHeight;(Et.startSize.width!==gt||Et.startSize.height!==ct)&&De(Gt)}ge[Rt]&&Sm(ge[Rt],function(It){It()})}else Mt&&w.log(Rt,"Element uninstalled before being detectable.");delete ge[Rt],Ye++,Ye===xt.length&&Wt()})}Mt&&w.log(Rt,"Already detecable, adding listener."),Ke(Xt,Ot,He),Ye++}),Ye===xt.length&&Wt()}function Ae(mt){if(!mt)return w.error("At least one element is required.");if(n5(mt))mt=[mt];else if(t5(mt))mt=i5(mt);else return w.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");Sm(mt,function(xt){H.removeAllListeners(xt),Y.uninstall(xt),Oc.cleanState(xt)})}function $t(mt){Y.initDocument&&Y.initDocument(mt)}return{listenTo:se,removeListener:H.removeListener,removeAllListeners:H.removeAllListeners,uninstall:Ae,initDocument:$t}};function wc(a,h,p){var C=a[h];return C==null&&p!==void 0?p:C}var r5="Expected a function",s5=NaN,vee="[object Symbol]",yee=/^\s+|\s+$/g,bee=/^[-+]0x[0-9a-f]+$/i,xee=/^0b[01]+$/i,Oee=/^0o[0-7]+$/i,wee=parseInt,_ee=typeof J=="object"&&J&&J.Object===Object&&J,See=typeof self=="object"&&self&&self.Object===Object&&self,Cee=_ee||See||Function("return this")(),kee=Object.prototype,Tee=kee.toString,Mee=Math.max,Eee=Math.min,uS=function(){return Cee.Date.now()};function Pee(a,h,p){var C,w,v,A,V,H,X=0,Y=!1,le=!1,xe=!0;if(typeof a!="function")throw new TypeError(r5);h=o5(h)||0,Gy(p)&&(Y=!!p.leading,le="maxWait"in p,v=le?Mee(o5(p.maxWait)||0,h):v,xe="trailing"in p?!!p.trailing:xe);function be(Ke){var Ye=C,Xt=w;return C=w=void 0,X=Ke,A=a.apply(Xt,Ye),A}function ge(Ke){return X=Ke,V=setTimeout($t,h),Y?be(Ke):A}function se(Ke){var Ye=Ke-H,Xt=Ke-X,Wt=h-Ye;return le?Eee(Wt,v-Xt):Wt}function Ae(Ke){var Ye=Ke-H,Xt=Ke-X;return H===void 0||Ye>=h||Ye<0||le&&Xt>=v}function $t(){var Ke=uS();if(Ae(Ke))return mt(Ke);V=setTimeout($t,se(Ke))}function mt(Ke){return V=void 0,xe&&C?be(Ke):(C=w=void 0,A)}function xt(){V!==void 0&&clearTimeout(V),X=0,C=H=w=V=void 0}function He(){return V===void 0?A:mt(uS())}function De(){var Ke=uS(),Ye=Ae(Ke);if(C=arguments,w=this,H=Ke,Ye){if(V===void 0)return ge(H);if(le)return V=setTimeout($t,h),be(H)}return V===void 0&&(V=setTimeout($t,h)),A}return De.cancel=xt,De.flush=He,De}function Aee(a,h,p){var C=!0,w=!0;if(typeof a!="function")throw new TypeError(r5);return Gy(p)&&(C="leading"in p?!!p.leading:C,w="trailing"in p?!!p.trailing:w),Pee(a,h,{leading:C,maxWait:h,trailing:w})}function Gy(a){var h=typeof a;return!!a&&(h=="object"||h=="function")}function Ree(a){return!!a&&typeof a=="object"}function Iee(a){return typeof a=="symbol"||Ree(a)&&Tee.call(a)==vee}function o5(a){if(typeof a=="number")return a;if(Iee(a))return s5;if(Gy(a)){var h=typeof a.valueOf=="function"?a.valueOf():a;a=Gy(h)?h+"":h}if(typeof a!="string")return a===0?a:+a;a=a.replace(yee,"");var p=xee.test(a);return p||Oee.test(a)?wee(a.slice(2),p?2:8):bee.test(a)?s5:+a}var Yy=Aee;const Dee={name:"Grid",provide(){return{GridInstance:this}},props:{col:{type:Number,default:3},square:{type:Boolean,default:!1},padding:{type:String,default:"24px"},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},hover:{type:Boolean,default:!1}},data(){return{resizeCount:0,handleResize:()=>{}}},computed:{classes(){return{"ivu-grid-center":this.center,"ivu-grid-border":this.border,"ivu-grid-hover":this.hover}}},methods:{onResize(){this.resizeCount++}},mounted(){this.handleResize=Yy(this.onResize,150,{leading:!1}),this.observer=Vd(),this.observer.listenTo(this.$refs.grid,this.handleResize)},beforeUnmount(){this.observer.removeListener(this.$refs.grid,this.handleResize)}};function Nee(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-grid",v.classes]),ref:"grid"},[t.renderSlot(a.$slots,"default")],2)}var a5=l(Dee,[["render",Nee]]);const $ee={name:"GridItem",inject:["GridInstance"],data(){return{height:0}},computed:{col(){return this.GridInstance.col},square(){return this.GridInstance.square},styles(){const a={width:`${100/this.col}%`};return this.height&&this.square&&(a.height=`${this.height}px`),a},mainStyles(){return{padding:this.GridInstance.padding}}},watch:{col(){t.nextTick(()=>{this.handleChangeHeight()})},square(){this.handleChangeHeight()},"GridInstance.resizeCount"(){this.handleChangeHeight()}},methods:{handleChangeHeight(){if(this.square){const a=this.$refs.col;this.height=parseFloat(I(a,"width"))}}},mounted(){this.handleChangeHeight()}};function Vee(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:"ivu-grid-item",style:t.normalizeStyle(v.styles),ref:"col"},[t.createElementVNode("div",{class:"ivu-grid-item-main",style:t.normalizeStyle(v.mainStyles)},[t.renderSlot(a.$slots,"default")],4)],4)}var l5=l($ee,[["render",Vee]]);const Lee="ivu-layout",Bee={name:"Header",computed:{wrapClasses(){return`${Lee}-header`}}};function Uee(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[t.renderSlot(a.$slots,"default")],2)}var dS=l(Bee,[["render",Uee]]);const Ut={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent(a){const{keyCode:h}=a;if(a.altKey&&!a.ctrlKey||a.metaKey||h>=Ut.F1&&h<=Ut.F12)return!1;switch(h){case Ut.ALT:case Ut.CAPS_LOCK:case Ut.CONTEXT_MENU:case Ut.CTRL:case Ut.DOWN:case Ut.END:case Ut.ESC:case Ut.HOME:case Ut.INSERT:case Ut.LEFT:case Ut.MAC_FF_META:case Ut.META:case Ut.NUMLOCK:case Ut.NUM_CENTER:case Ut.PAGE_DOWN:case Ut.PAGE_UP:case Ut.PAUSE:case Ut.PRINT_SCREEN:case Ut.RIGHT:case Ut.SHIFT:case Ut.UP:case Ut.WIN_KEY:case Ut.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey(a){if(a>=Ut.ZERO&&a<=Ut.NINE||a>=Ut.NUM_ZERO&&a<=Ut.NUM_MULTIPLY||a>=Ut.A&&a<=Ut.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&a===0)return!0;switch(a){case Ut.SPACE:case Ut.QUESTION_MARK:case Ut.NUM_PLUS:case Ut.NUM_MINUS:case Ut.NUM_PERIOD:case Ut.NUM_DIVISION:case Ut.SEMICOLON:case Ut.DASH:case Ut.EQUALS:case Ut.COMMA:case Ut.PERIOD:case Ut.SLASH:case Ut.APOSTROPHE:case Ut.SINGLE_QUOTE:case Ut.OPEN_SQUARE_BRACKET:case Ut.BACKSLASH:case Ut.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},_c="ivu-spin",Fee={name:"Spin",mixins:[oS],props:{size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},fix:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data(){return{showText:!1,visible:!1}},computed:{classes(){return[`${_c}`,{[`${_c}-${this.size}`]:!!this.size,[`${_c}-fix`]:this.fix,[`${_c}-show-text`]:this.showText,[`${_c}-fullscreen`]:this.fullscreen}]},mainClasses(){return`${_c}-main`},dotClasses(){return`${_c}-dot`},textClasses(){return`${_c}-text`},fullscreenVisible(){return this.fullscreen?this.visible:!0}},watch:{visible(a){a?this.addScrollEffect():this.removeScrollEffect()}},mounted(){this.showText=!!this.$slots.default&&this.$slots.default().some(a=>a.children&&a.children.length)}};function zee(a,h,p,C,w,v){return t.openBlock(),t.createBlock(t.Transition,{name:"fade"},{default:t.withCtx(()=>[v.fullscreenVisible&&p.show?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.classes)},[t.createElementVNode("div",{class:t.normalizeClass(v.mainClasses)},[t.createElementVNode("span",{class:t.normalizeClass(v.dotClasses)},null,2),t.createElementVNode("div",{class:t.normalizeClass(v.textClasses)},[t.renderSlot(a.$slots,"default")],2)],2)],2)):t.createCommentVNode("",!0)]),_:3})}var so=l(Fee,[["render",zee]]);const Xee={name:"ImagePreview",mixins:[ji],components:{Icon:S,Spin:so,Row:vc,Col:Na},inheritAttrs:!1,emits:["update:modelValue","on-close","on-switch"],props:{modelValue:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},toolbar:{type:Array,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||!a.$VIEWUI.image||a.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:a.$VIEWUI.image.toolbar}}},data(){return{currentIndex:0,scale:1,degree:0,translate:{x:0,y:0},startX:0,startY:0,transition:!0,original:!1,prevOverflow:"",status:"loading",zIndex:1e3,maskIndex:this.getMaskIndex(),downloading:!1}},computed:{imgClasses(){return["ivu-image-preview-image",{"ivu-image-preview-grabbing":!this.transition,"ivu-image-preview-hidden":this.status==="failed","ivu-image-preview-transition":this.transition,"ivu-image-preview-limit":!this.original}]},imageStyle(){let a=this.translate.x/this.scale,h=this.translate.y/this.scale;const p=this.degree%360;return[90,-270].includes(p)&&([a,h]=[h,-a]),[180,-180].includes(p)&&([a,h]=[-a,-h]),[270,-90].includes(p)&&([a,h]=[-h,a]),{transform:`
                        scale(${this.scale})
                        rotate(${this.degree}deg)
                        translate(${a}px, ${h}px)
                    `}},maskStyle(){return{zIndex:this.maskIndex+this.zIndex}},leftClasses(){return["ivu-image-preview-arrow-left",{"ivu-image-preview-arrow-disabled":this.hasLeftSwitchEnd}]},rightClasses(){return["ivu-image-preview-arrow-right",{"ivu-image-preview-arrow-disabled":this.hasRightSwitchEnd}]},hasRightSwitchEnd(){const{currentIndex:a,infinite:h,previewList:p}=this,C=p.length;return h?!1:a>=C-1},hasLeftSwitchEnd(){const{currentIndex:a,infinite:h}=this;return h?!1:a===0},currentSrc(){return this.previewList[this.currentIndex]},failLang(){return this.t("i.image.fail")}},methods:{resetStyle(){this.scale=1,this.degree=0,this.translate.x=0,this.translate.y=0},handleClose(){this.$emit("update:modelValue",!1),this.$emit("on-close")},handleClickMask(){!this.maskClosable||this.handleClose()},handleSwitch(a){a?this.currentIndex+1===this.previewList.length?this.infinite&&(this.resetStyle(),this.currentIndex=0):(this.resetStyle(),this.currentIndex+=1):this.currentIndex===0?this.infinite&&(this.resetStyle(),this.currentIndex=this.previewList.length-1):(this.resetStyle(),this.currentIndex-=1),this.$emit("on-switch",{currentIndex:this.currentIndex})},handleOperation(a){a==="zoomIn"&&this.scale<6&&(this.scale+=.25),a==="zoomOut"&&this.scale>.25&&(this.scale-=.25),a==="rotateLeft"&&(this.degree-=90),a==="rotateRight"&&(this.degree+=90),a==="original"&&(this.original=!this.original,this.transition=!1,this.resetStyle(),setTimeout(()=>{this.transition=!0},0)),a==="download"&&(this.downloading=!0,we(this.previewList[this.currentIndex]).then(()=>{this.downloading=!1}).catch(()=>{this.downloading=!1}))},handleKeydown(a){if(!this.modelValue)return;const{keyCode:h}=a;h===Ut.LEFT&&this.handleSwitch(!1),h===Ut.RIGHT&&this.handleSwitch(!0),h===Ut.UP&&this.handleOperation("zoomIn"),h===Ut.DOWN&&this.handleOperation("zoomOut"),h===Ut.SPACE&&(a.preventDefault(),this.original=!this.original)},handleKeyup(a){if(!this.modelValue)return;const{keyCode:h}=a;h===Ut.ESC&&this.handleClose()},handleWheel(a){if(!this.modelValue)return;const{deltaY:h}=a;this.handleOperation(h<0?"zoomIn":"zoomOut")},handleMousedown(a){const{pageX:h,pageY:p,which:C}=a;C===1&&(this.startX=h,this.startY=p,this.transition=!1,s(document,"mousemove",this.handleMousemove),s(document,"mouseup",this.handleMouseup))},handleMousemove:Yy(function(a){a.stopPropagation();const{pageX:h,pageY:p}=a;this.translate.x+=h-this.startX,this.translate.y+=p-this.startY,this.startX=h,this.startY=p}),handleMouseup(){this.transition=!0,o(document,"mousemove",this.handleMousemove),o(document,"mouseup",this.handleMouseup)},getBodyOverflow(){return r?document.body.style.overflow:""},setBodyOverflow(a){!r||(document.body.style.overflow=a)},handleImageLoad(){this.status="loaded"},handleImageError(){this.status="failed"},getMaskIndex(){return We(),Oe}},watch:{modelValue(a){a?(this.currentIndex=this.initialIndex,this.resetStyle(),this.original=!1,this.prevOverflow=this.getBodyOverflow(),this.setBodyOverflow("hidden"),this.maskIndex=this.getMaskIndex()):this.setBodyOverflow(this.prevOverflow)},currentIndex(){this.status="loading"}},mounted(){s(document,"keydown",this.handleKeydown),s(document,"keyup",this.handleKeyup),s(document,"wheel",this.handleWheel)},beforeUnmount(){o(document,"keydown",this.handleKeydown),o(document,"keyup",this.handleKeyup),o(document,"wheel",this.handleWheel)}},Wee={key:1,class:"ivu-image-preview-fail"},Qee=["src"],Hee=[t.createElementVNode("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7198",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7199",fill:"#ffffff"},null,-1)],Gee=[t.createElementVNode("path",{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7413",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7414",fill:"#ffffff"},null,-1)],Yee=[t.createElementVNode("path",{d:"M358.058667 128H156.970667A28.970667 28.970667 0 0 0 128 157.013333v202.837334c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434666a14.506667 14.506667 0 0 0 14.506667-14.506666V200.448h157.610667a14.506667 14.506667 0 0 0 14.506666-14.506667V142.506667a14.506667 14.506667 0 0 0-14.506666-14.506667zM881.493333 649.642667h-43.434666a14.506667 14.506667 0 0 0-14.506667 14.506666v159.402667h-157.610667a14.506667 14.506667 0 0 0-14.506666 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506666 14.506667h201.088c16 0 28.970667-12.928 28.970667-29.013333v-202.837334a14.506667 14.506667 0 0 0-14.506667-14.506666zM358.058667 823.552H200.448v-159.402667a14.506667 14.506667 0 0 0-14.506667-14.506666H142.506667a14.506667 14.506667 0 0 0-14.506667 14.506666v202.88c0 16 12.970667 28.970667 29.013333 28.970667h201.045334a14.506667 14.506667 0 0 0 14.506666-14.506667v-43.434666a14.506667 14.506667 0 0 0-14.506666-14.506667zM866.986667 128h-201.088a14.506667 14.506667 0 0 0-14.506667 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506667 14.506667h157.610666v159.402667c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434667a14.506667 14.506667 0 0 0 14.506666-14.506666V156.970667A28.928 28.928 0 0 0 866.986667 128z","p-id":"26673",fill:"#ffffff"},null,-1)],jee=[t.createElementVNode("path",{d:"M864 128H160c-19.2 0-32 12.8-32 32v704c0 19.2 12.8 32 32 32h704c19.2 0 32-12.8 32-32V160c0-19.2-12.8-32-32-32z m-32 704H192V192h640v640z","p-id":"1977",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M320 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32zM640 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32z","p-id":"1978",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M512 384m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1979",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M512 640m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1980",fill:"#ffffff"},null,-1)],qee=[t.createElementVNode("path",{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z m191.3-491.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z","p-id":"13309",fill:"#ffffff"},null,-1)],Zee=[t.createElementVNode("path",{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8zM880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z","p-id":"13522",fill:"#ffffff"},null,-1)],Kee=[t.createElementVNode("path",{d:"M505.7 621c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-72.1V120c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v346.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z","p-id":"8826",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M903 516h-64c-4.4 0-8 3.6-8 8v300c0 4.4-3.6 8-8 8H199c-4.4 0-8-3.6-8-8V524c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v372c0 8.8 7.2 16 16 16h768c8.8 0 16-7.2 16-16V524c0-4.4-3.6-8-8-8z","p-id":"8827",fill:"#ffffff"},null,-1)],Jee={class:"ivu-image-preview-operations-item ivu-image-preview-operations-wait ivu-anim-loop",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7816",width:"200",height:"200"},ete=[t.createElementVNode("path",{d:"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z","p-id":"7817",fill:"#ffffff"},null,-1)];function tte(a,h,p,C,w,v){const A=t.resolveComponent("Spin"),V=t.resolveComponent("Col"),H=t.resolveComponent("Row"),X=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!p.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[p.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-image-preview-mask",style:t.normalizeStyle(v.maskStyle)},null,4)):t.createCommentVNode("",!0)]),_:1}),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[p.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-image-preview-wrap",style:t.normalizeStyle(v.maskStyle)},[t.createElementVNode("div",t.mergeProps({class:"ivu-image-preview"},a.$attrs,{onClick:h[14]||(h[14]=t.withModifiers((...Y)=>v.handleClickMask&&v.handleClickMask(...Y),["stop"]))}),[w.status==="loading"?(t.openBlock(),t.createBlock(A,{key:0,size:"large",class:"ivu-image-preview-loading"})):w.status==="failed"?(t.openBlock(),t.createElementBlock("div",Wee,[t.createElementVNode("span",null,t.toDisplayString(v.failLang),1)])):t.createCommentVNode("",!0),(t.openBlock(),t.createElementBlock("img",{class:t.normalizeClass(v.imgClasses),style:t.normalizeStyle(v.imageStyle),src:v.currentSrc,key:w.currentIndex.toString(),onClick:h[0]||(h[0]=t.withModifiers(()=>{},["stop"])),onMousedown:h[1]||(h[1]=t.withModifiers((...Y)=>v.handleMousedown&&v.handleMousedown(...Y),["stop","prevent"])),onLoad:h[2]||(h[2]=(...Y)=>v.handleImageLoad&&v.handleImageLoad(...Y)),onError:h[3]||(h[3]=(...Y)=>v.handleImageError&&v.handleImageError(...Y))},null,46,Qee)),p.toolbar&&p.toolbar.length>0?(t.openBlock(),t.createBlock(H,{key:2,"class-name":"ivu-image-preview-operations",wrap:!1,onClick:h[11]||(h[11]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[p.toolbar.indexOf("zoomIn")>-1?(t.openBlock(),t.createBlock(V,{key:0,flex:"1",order:p.toolbar.indexOf("zoomIn")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:h[4]||(h[4]=t.withModifiers(Y=>v.handleOperation("zoomIn"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7197",width:"200",height:"200"},Hee))]),_:1},8,["order"])):t.createCommentVNode("",!0),p.toolbar.indexOf("zoomOut")>-1?(t.openBlock(),t.createBlock(V,{key:1,flex:"1",order:p.toolbar.indexOf("zoomOut")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:h[5]||(h[5]=t.withModifiers(Y=>v.handleOperation("zoomOut"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7412",width:"200",height:"200"},Gee))]),_:1},8,["order"])):t.createCommentVNode("",!0),p.toolbar.indexOf("original")>-1?(t.openBlock(),t.createBlock(V,{key:2,flex:"1",order:p.toolbar.indexOf("original")+1},{default:t.withCtx(()=>[t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:h[6]||(h[6]=t.withModifiers(Y=>v.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26672",width:"200",height:"200"},Yee,512)),[[t.vShow,!this.original]]),t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:h[7]||(h[7]=t.withModifiers(Y=>v.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1976",width:"200",height:"200"},jee,512)),[[t.vShow,this.original]])]),_:1},8,["order"])):t.createCommentVNode("",!0),p.toolbar.indexOf("rotateLeft")>-1?(t.openBlock(),t.createBlock(V,{key:3,flex:"1",order:p.toolbar.indexOf("rotateLeft")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:h[8]||(h[8]=t.withModifiers(Y=>v.handleOperation("rotateLeft"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13308",width:"200",height:"200"},qee))]),_:1},8,["order"])):t.createCommentVNode("",!0),p.toolbar.indexOf("rotateRight")>-1?(t.openBlock(),t.createBlock(V,{key:4,flex:"1",order:p.toolbar.indexOf("rotateRight")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:h[9]||(h[9]=t.withModifiers(Y=>v.handleOperation("rotateRight"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13521",width:"200",height:"200"},Zee))]),_:1},8,["order"])):t.createCommentVNode("",!0),p.toolbar.indexOf("download")>-1?(t.openBlock(),t.createBlock(V,{key:5,flex:"1",order:p.toolbar.indexOf("download")+1},{default:t.withCtx(()=>[t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:h[10]||(h[10]=t.withModifiers(Y=>v.handleOperation("download"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8825",width:"200",height:"200"},Kee,512)),[[t.vShow,!w.downloading]]),t.withDirectives((t.openBlock(),t.createElementBlock("svg",Jee,ete,512)),[[t.vShow,w.downloading]])]),_:1},8,["order"])):t.createCommentVNode("",!0)]),_:1})):t.createCommentVNode("",!0),p.previewList.length>1?(t.openBlock(),t.createBlock(X,{key:3,class:t.normalizeClass(v.leftClasses),type:"ios-arrow-back",onClick:h[12]||(h[12]=t.withModifiers(Y=>v.handleSwitch(!1),["stop"]))},null,8,["class"])):t.createCommentVNode("",!0),p.previewList.length>1?(t.openBlock(),t.createBlock(X,{key:4,class:t.normalizeClass(v.rightClasses),type:"ios-arrow-forward",onClick:h[13]||(h[13]=t.withModifiers(Y=>v.handleSwitch(!0),["stop"]))},null,8,["class"])):t.createCommentVNode("",!0),t.createVNode(X,{class:"ivu-image-preview-arrow-close",type:"md-close",onClick:t.withModifiers(v.handleClose,["stop"])},null,8,["onClick"])],16)],4)):t.createCommentVNode("",!0)]),_:1})],8,["disabled"])}var Sc=l(Xee,[["render",tte]]);const ite=a=>typeof HTMLElement=="object"&&a instanceof HTMLElement,nte={name:"Image",mixins:[ji],components:{ImagePreview:Sc},emits:["on-load","on-error","on-switch","on-close","on-click"],props:{src:{type:String,default:""},alt:{type:String,default:""},preview:{type:Boolean,default:!1},referrerPolicy:{type:String,default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:[String],default:""},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array},infinite:{type:Boolean,default:!0},initialIndex:{type:Number,default:0},previewTip:{type:Boolean,default:!0},toolbar:{type:Array,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||!a.$VIEWUI.image||a.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:a.$VIEWUI.image.toolbar}}},data(){return{loadingImage:!1,loading:!1,imageError:!1,scrollElement:null,observer:null,imagePreviewModal:!1}},watch:{src(){this.loadImage()}},computed:{innerClasses(){return["ivu-image-inner",{"ivu-image-cursor":this.preview}]},imgClasses(){return["ivu-image-img",{"ivu-image-img-hidden":this.loading||this.imageError}]},fitStyle(){const a=["fill","contain","cover","none","scale-down"],{fit:h}=this;return a.includes(h)?`object-fit:${h};`:""},imageStyles(){return{width:typeof this.width=="number"?`${this.width}px`:this.width,height:typeof this.height=="number"?`${this.height}px`:this.height}},loadingLang(){return this.t("i.select.loading")},failLang(){return this.t("i.image.fail")},previewLang(){return this.t("i.image.preview")},loadingType(){return this.lazy?"lazy":"eager"}},mounted(){r&&this.handleImageEvent()},methods:{handleLazy(){const a=this.$refs.image;(this.observer=new IntersectionObserver(this.handlerObserveImage,{root:this.scrollElement,rootMargin:"0px",threshold:0})).observe(a)},handlerObserveImage(a){for(let h of a)h.isIntersecting&&(this.offObserver(),this.loadImage())},addLazyImageListener(){const{scrollContainer:a}=this;this.scrollElement=null,ite(a)?this.scrollElement=a:a&&typeof a=="string"&&(this.scrollElement=document.querySelector(a)),this.handleLazy()},handleImageLoad(){this.loading=!1,this.imageError=!1,this.$emit("on-load")},handleImageError(){this.loading=!1,this.imageError=!0,this.loadingImage=!1,this.$emit("on-error")},loadImage(){this.loading=!0,this.imageError=!1,this.loadingImage=!0},handleImageEvent(){const{lazy:a}=this;a?this.addLazyImageListener():this.loadImage()},offObserver(){const{observer:a}=this;a&&a.disconnect()},handlePreview(){const{preview:a,initialIndex:h}=this;a&&(this.imagePreviewModal=!0,this.$emit("on-click",{initialIndex:h}))},handleClose(){this.$emit("on-close")},handleSwitch(a){this.$emit("on-switch",a)}},beforeUnmount(){this.offObserver()}},rte={key:0,class:"ivu-image-placeholder"},ste={key:1,class:"ivu-image-error"},ote=["alt","src","loading","referrerPolicy"],ate={class:"ivu-image-mark"};function lte(a,h,p,C,w,v){const A=t.resolveComponent("ImagePreview");return t.openBlock(),t.createElementBlock("div",{class:"ivu-image",ref:"image",style:t.normalizeStyle(v.imageStyles)},[w.loading?(t.openBlock(),t.createElementBlock("div",rte,[t.renderSlot(a.$slots,"placeholder",{},()=>[t.createElementVNode("span",null,t.toDisplayString(v.loadingLang),1)])])):w.imageError?(t.openBlock(),t.createElementBlock("div",ste,[t.renderSlot(a.$slots,"error",{},()=>[t.createElementVNode("span",null,t.toDisplayString(v.failLang),1)])])):t.createCommentVNode("",!0),w.loadingImage?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(v.innerClasses),onClick:h[2]||(h[2]=(...V)=>v.handlePreview&&v.handlePreview(...V))},[t.createElementVNode("img",{class:t.normalizeClass(v.imgClasses),style:t.normalizeStyle([v.fitStyle]),alt:p.alt,src:p.src,loading:v.loadingType,referrerPolicy:p.referrerPolicy,onLoad:h[0]||(h[0]=(...V)=>v.handleImageLoad&&v.handleImageLoad(...V)),onError:h[1]||(h[1]=(...V)=>v.handleImageError&&v.handleImageError(...V))},null,46,ote),p.preview&&p.previewTip?t.renderSlot(a.$slots,"preview",{key:0},()=>[t.createElementVNode("div",ate,[t.createElementVNode("span",null,t.toDisplayString(v.previewLang),1)])]):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0),p.preview?(t.openBlock(),t.createBlock(A,{key:3,modelValue:w.imagePreviewModal,"onUpdate:modelValue":h[3]||(h[3]=V=>w.imagePreviewModal=V),"preview-list":p.previewList,"initial-index":p.initialIndex,infinite:p.infinite,"mask-closable":p.maskClosable,transfer:p.transfer,toolbar:p.toolbar,onOnClose:v.handleClose,onOnSwitch:v.handleSwitch},null,8,["modelValue","preview-list","initial-index","infinite","mask-closable","transfer","toolbar","onOnClose","onOnSwitch"])):t.createCommentVNode("",!0)],4)}var c5=l(nte,[["render",lte]]);Sc.newInstance=a=>{if(!r)return;const h=a||{};let p=null;const C=t.createApp({data(){return Object.assign({},h,{visible:!1,previewList:[],initialIndex:0,toolbar:["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"],infinite:!0,maskClosable:!0,transfer:!0})},render(){return t.h(Sc,Object.assign({},h,{ref:"imagePreview",modelValue:this.visible,previewList:this.previewList,initialIndex:this.initialIndex,toolbar:this.toolbar,infinite:this.infinite,maskClosable:this.maskClosable,transfer:this.transfer,"onOn-close":this.close}))},methods:{close(){this.visible=!1,setTimeout(()=>{this.destroy(),this.onRemove()},300)},destroy(){C.unmount(),document.body.removeChild(w)},onRemove(){}},created(){p=t.getCurrentInstance()}}),w=document.createElement("div");document.body.appendChild(w),C.mount(w);const v=p.refs.imagePreview;return{show(A){Object.keys(A).forEach(V=>{v.$parent[V]=A[V]}),v.$parent.visible=!0},component:v}};let jy;function cte(){return jy=jy||Sc.newInstance(),jy}Sc.show=function(a={}){const h=cte();a.onRemove=function(){jy=null},h.show(a)};const Hr="ivu-input-number",qy="ivu-icon";function Zy(a,h){let p,C,w;try{p=a.toString().split(".")[1].length}catch{p=0}try{C=h.toString().split(".")[1].length}catch{C=0}return w=Math.pow(10,Math.max(p,C)),(Math.round(a*w)+Math.round(h*w))/w}const hte={name:"InputNumber",mixins:[fi],emits:["on-change","on-focus","on-blur","update:modelValue"],props:{max:{type:Number,default:1/0},min:{type:Number,default:-1/0},step:{type:Number,default:1},activeChange:{type:Boolean,default:!0},modelValue:{type:Number,default:1},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},name:{type:String},precision:{type:Number},elementId:{type:String},formatter:{type:Function},parser:{type:Function},placeholder:{type:String,default:""},controlsOutside:{type:Boolean,default:!1}},data(){return{focused:!1,upDisabled:!1,downDisabled:!1,currentValue:this.modelValue}},computed:{wrapClasses(){return[`${Hr}`,{[`${Hr}-${this.size}`]:!!this.size,[`${Hr}-disabled`]:this.itemDisabled,[`${Hr}-focused`]:this.focused,[`${Hr}-controls-outside`]:this.controlsOutside}]},handlerClasses(){return`${Hr}-handler-wrap`},upClasses(){return[`${Hr}-handler`,`${Hr}-handler-up`,{[`${Hr}-handler-up-disabled`]:this.upDisabled}]},innerUpClasses(){return`${Hr}-handler-up-inner ${qy} ${qy}-ios-arrow-up`},downClasses(){return[`${Hr}-handler`,`${Hr}-handler-down`,{[`${Hr}-handler-down-disabled`]:this.downDisabled}]},innerDownClasses(){return`${Hr}-handler-down-inner ${qy} ${qy}-ios-arrow-down`},inputWrapClasses(){return`${Hr}-input-wrap`},inputClasses(){return`${Hr}-input`},precisionValue(){return this.currentValue?this.precision?this.currentValue.toFixed(this.precision):this.currentValue:this.currentValue},formatterValue(){return this.formatter&&this.precisionValue!==null?this.formatter(this.precisionValue):this.precisionValue}},methods:{preventDefault(a){a.preventDefault()},up(a){const h=Number(a.target.value);if(this.upDisabled&&isNaN(h))return!1;this.changeStep("up",a)},down(a){const h=Number(a.target.value);if(this.downDisabled&&isNaN(h))return!1;this.changeStep("down",a)},changeStep(a,h){if(this.itemDisabled||this.readonly)return!1;const p=Number(h.target.value);let C=Number(this.currentValue);const w=Number(this.step);if(isNaN(C))return!1;if(!isNaN(p)){if(a==="up")if(Zy(p,w)<=this.max)C=p;else return!1;else if(a==="down")if(Zy(p,-w)>=this.min)C=p;else return!1}a==="up"?C=Zy(C,w):a==="down"&&(C=Zy(C,-w)),this.setValue(C)},setValue(a){a&&!isNaN(this.precision)&&(a=Number(Number(a).toFixed(this.precision)));const{min:h,max:p}=this;a!==null&&(a>p?a=p:a<h&&(a=h)),t.nextTick(()=>{this.currentValue=a,this.$emit("update:modelValue",a),this.$emit("on-change",a),this.handleFormItemChange("change",a)})},focus(a){this.focused=!0,this.$emit("on-focus",a)},blur(){this.focused=!1,this.$emit("on-blur"),$(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},keyDown(a){a.keyCode===38?(a.preventDefault(),this.up(a)):a.keyCode===40&&(a.preventDefault(),this.down(a))},change(a){if(a.type==="change"&&this.activeChange||a.type==="input"&&!this.activeChange)return;let h=a.target.value.trim();if(this.parser&&(h=this.parser(h)),h.length===0){this.setValue(null);return}a.type==="input"&&h.match(/^\-?\.?$|\.$/)||(h=Number(h),isNaN(h)?a.target.value=this.currentValue:(this.currentValue=h,this.setValue(h)))},changeVal(a){if(a=Number(a),isNaN(a))this.upDisabled=!0,this.downDisabled=!0;else{const h=this.step;this.upDisabled=a+h>this.max,this.downDisabled=a-h<this.min}}},mounted(){this.changeVal(this.currentValue)},watch:{modelValue(a){this.currentValue=a},currentValue(a){this.changeVal(a)},min(){this.changeVal(this.currentValue)},max(){this.changeVal(this.currentValue)}}},ute=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-remove"},null,-1)],dte=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-add"},null,-1)],fte=["id","disabled","autofocus","readonly","name","value","placeholder"];function pte(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[p.controlsOutside?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.handlerClasses)},[t.createElementVNode("a",{onClick:h[1]||(h[1]=(...A)=>v.up&&v.up(...A)),class:t.normalizeClass(v.upClasses)},[t.createElementVNode("span",{class:t.normalizeClass(v.innerUpClasses),onClick:h[0]||(h[0]=(...A)=>v.preventDefault&&v.preventDefault(...A))},null,2)],2),t.createElementVNode("a",{onClick:h[3]||(h[3]=(...A)=>v.down&&v.down(...A)),class:t.normalizeClass(v.downClasses)},[t.createElementVNode("span",{class:t.normalizeClass(v.innerDownClasses),onClick:h[2]||(h[2]=(...A)=>v.preventDefault&&v.preventDefault(...A))},null,2)],2)],2)),p.controlsOutside?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-down",{"ivu-input-number-controls-outside-btn-disabled":w.downDisabled}]),onClick:h[4]||(h[4]=(...A)=>v.down&&v.down(...A))},ute,2)):t.createCommentVNode("",!0),p.controlsOutside?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-up",{"ivu-input-number-controls-outside-btn-disabled":w.upDisabled}]),onClick:h[5]||(h[5]=(...A)=>v.up&&v.up(...A))},dte,2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(v.inputWrapClasses)},[t.createElementVNode("input",{id:p.elementId,class:t.normalizeClass(v.inputClasses),disabled:a.itemDisabled,autocomplete:"off",spellcheck:"false",autofocus:p.autofocus,onFocus:h[6]||(h[6]=(...A)=>v.focus&&v.focus(...A)),onBlur:h[7]||(h[7]=(...A)=>v.blur&&v.blur(...A)),onKeydown:h[8]||(h[8]=t.withModifiers((...A)=>v.keyDown&&v.keyDown(...A),["stop"])),onInput:h[9]||(h[9]=(...A)=>v.change&&v.change(...A)),onMouseup:h[10]||(h[10]=(...A)=>v.preventDefault&&v.preventDefault(...A)),onChange:h[11]||(h[11]=(...A)=>v.change&&v.change(...A)),readonly:p.readonly||!p.editable,name:p.name,value:v.formatterValue,placeholder:p.placeholder},null,42,fte)],2)],2)}var fS=l(hte,[["render",pte]]);const h5="ivu-layout",mte={name:"Layout",data(){return{hasSider:!1}},computed:{wrapClasses(){return[`${h5}`,{[`${h5}-has-sider`]:this.hasSider}]}},methods:{findSider(){return this.$slots.default().some(a=>a.type.name==="Sider")}},mounted(){this.hasSider=this.findSider()}};function gte(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[t.renderSlot(a.$slots,"default")],2)}var u5=l(mte,[["render",gte]]);const d5={tooltips:["",""],showTip:!1,successTip:"",errorTip:""},f5={tooltip:"",editing:!1,maxlength:"",autosize:!0,triggerType:"icon"},p5={rows:1,tooltip:!1,suffix:!1,expandable:!1,symbol:""};var Cm={emits:["update:modelValue"],mixins:[fe],props:{type:{validator(a){return _(a,["secondary","success","warning","danger",""])},default:""},copyable:{type:Boolean,default:!1},copyText:{type:String,default:""},copyConfig:{type:Object,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.typography.copyConfig===""?d5:a.$VIEWUI.typography.copyConfig}},editable:{type:Boolean,default:!1},editConfig:{type:Object,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.typography.editConfig===""?f5:a.$VIEWUI.typography.editConfig}},ellipsis:{type:Boolean,default:!1},ellipsisConfig:{type:Object,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.typography.ellipsisConfig===""?p5:a.$VIEWUI.typography.ellipsisConfig}},disabled:{type:Boolean,default:!1},code:{type:Boolean,default:!1},delete:{type:Boolean,default:!1},keyboard:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},strong:{type:Boolean,default:!1},underline:{type:Boolean,default:!1},italic:{type:Boolean,default:!1},modelValue:{type:String,default:""},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},theme:{validator(a){return _(a,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"}},computed:{isHrefPattern(){const{to:a}=this;return!!a},linkProps(){if(this.isHrefPattern){const{linkUrl:a,target:h}=this;return{href:a,target:h}}else return{}},mergedCopyConfig(){return Object.assign({},d5,this.copyConfig)},mergedEditConfig(){return Object.assign({},f5,this.editConfig)},mergedEllipsisConfig(){return Object.assign({},p5,this.ellipsisConfig)}},methods:{commonSlots(){const a={};return this.$slots.default&&(a.default=()=>this.$slots.default()),this.$slots.copyIcon&&(a.copyIcon=h=>this.$slots.copyIcon(h)),this.$slots.editIcon&&(a.editIcon=h=>this.$slots.editIcon(h)),this.$slots.enterIcon&&(a.enterIcon=h=>this.$slots.enterIcon(h)),a},commonEvents(){return{"onUpdate:modelValue":this.handleOnUpdateModelValue}},handleOnUpdateModelValue(a){this.$emit("update:modelValue",a)}}};const Ky={name:"TypographyBase",mixins:[Cm],emits:["on-copy-success","on-copy-error","on-edit-start","on-edit-end","on-edit-change","on-edit-cancel"],props:{component:{type:String,default:"div"},level:{type:Number,default:0}},data(){return{currentContent:this.modelValue,copied:!1,copyTimeout:null,editing:!1,editContent:"",lastKeyCode:"",isEditESC:!1,ellipsisText:"",ellipsisContent:"",isEllipsis:!1,ellipsisExpanded:!1,observer:null}},created(){this.editing=this.mergedEditConfig.editing||!1,this.editing&&(this.editContent=this.currentContent?this.currentContent:this.handleGetContent())},watch:{modelValue(a){this.currentContent=a},editing(a){a||t.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},isEllipsis(){t.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},ellipsis:{handler(a){a?t.nextTick(()=>{this.handleUpdateEllipsisStatus(),this.handleCreateObserver()}):this.handleRemoveObserver()},immediate:!0}},computed:{classes(){return["ivu-typography",{[`ivu-typography-${this.type}`]:this.type,"ivu-typography-disabled":this.disabled,"ivu-typography-ellipsis-line-clamp":this.ellipsis&&!this.ellipsisExpanded,"ivu-typography-ellipsis-single-line":this.ellipsis&&!this.ellipsisExpanded&&this.mergedEllipsisConfig.rows===1}]}},methods:{wrapperDecorations(){let a=this.currentContent?this.currentContent:this.$slots.default?this.$slots.default():"";function h(p,C){!p||(a=t.h(C,a))}return h(this.strong,"strong"),h(this.underline,"u"),h(this.delete,"del"),h(this.code,"code"),h(this.mark,"mark"),h(this.keyboard,"kbd"),h(this.italic,"i"),a},handleClickContent(a){if(!this.isHrefPattern&&this.component!=="a"){const h=this.mergedEditConfig.triggerType;this.editable&&(h==="text"||h==="both")&&this.handleEdit()}else{const h=a.ctrlKey||a.metaKey;this.handleCheckClick(a,h)}},handleGetContent(){const a=document.createElement("div");document.body.appendChild(a);let h=null,p=null,C="";const w=this.wrapperDecorations();return h=t.createApp({render(){return t.h("div",{ref:"text",style:{display:"none"}},w)},created(){p=t.getCurrentInstance()}}),h.mount(a),C=p.refs.text.innerText,h.unmount(),document.body.removeChild(a),C},handleCopy(){let a="";this.copyText?a=this.copyText:this.currentContent?a=this.currentContent:this.$slots.default&&(a=this.handleGetContent()),Ny({text:this.copyText?this.copyText:a,showTip:this.mergedCopyConfig.showTip,successTip:this.mergedCopyConfig.successTip,errorTip:this.mergedCopyConfig.errorTip,success:()=>{this.$emit("on-copy-success"),this.copied=!0,this.copyTimeout&&clearTimeout(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.copied=!1},3e3)},error:()=>{this.$emit("on-copy-error")}})},handleEdit(){this.editContent=this.currentContent?this.currentContent:this.handleGetContent(),t.nextTick(()=>{this.editing=!0,this.$emit("on-edit-start"),t.nextTick(()=>{this.$refs.edit.focus({cursor:"end"})})})},handleEditBlur(){if(this.isEditESC){this.isEditESC=!1;return}this.handleEditSave(),this.$emit("on-edit-end",this.editContent)},handleEditChange(a){const h=a.target.value;this.editContent=h,this.$emit("on-edit-change",h)},handleEditSave(){this.$emit("update:modelValue",this.editContent),this.editing=!1},handleEditKeydown(a){const{keyCode:h}=a;h===Ut.ENTER&&a.preventDefault(),this.lastKeyCode=h},handleEditKeyup(a){const{keyCode:h,ctrlKey:p,altKey:C,metaKey:w,shiftKey:v}=a;this.lastKeyCode===h&&!p&&!C&&!w&&!v&&(h===Ut.ENTER?(this.handleEditSave(),this.$emit("on-edit-end",this.editContent)):h===Ut.ESC&&(this.isEditESC=!0,this.$emit("on-edit-cancel"),this.editing=!1))},handleUpdateEllipsisStatus(){if(this.ellipsis&&!this.ellipsisExpanded){const a=this.$refs.typography;this.isEllipsis=a.scrollHeight>a.clientHeight}else this.isEllipsis=!1},handleCreateObserver(){this.ellipsis&&!this.ellipsisExpanded&&(this.observer=Vd(),this.observer.listenTo(this.$refs.typography,this.handleUpdateEllipsisStatus))},handleRemoveObserver(){this.observer&&(this.observer.removeListener(this.$refs.typography,this.handleUpdateEllipsisStatus),this.observer=null)}},render(){let a=[];const h=this.wrapperDecorations();if(a.push(h),this.editable){const p=this.mergedEditConfig.triggerType;if(p==="icon"||p==="both"){const C=this.$slots.editIcon?this.$slots.editIcon():t.h(S,{type:"md-create"}),w=t.h("div",{class:"ivu-typography-edit",onClick:this.handleEdit},C);if(this.mergedEditConfig.tooltip){const v=t.h(vl,{content:this.mergedEditConfig.tooltip,placement:"top"},()=>w);a.push(v)}else a.push(w)}}if(this.copyable){const p=this.$slots.copyIcon?this.$slots.copyIcon({copied:this.copied}):t.h(S,{type:this.copied?"md-checkmark":"md-copy"}),C=t.h("div",{class:["ivu-typography-copy",{"ivu-typography-copy-success":this.copied}],onClick:this.handleCopy},p);if(this.mergedCopyConfig.tooltips instanceof Array&&this.mergedCopyConfig.tooltips.length===2){const w=t.h(vl,{content:this.copied?this.mergedCopyConfig.tooltips[1]:this.mergedCopyConfig.tooltips[0],placement:"top"},()=>C);a.push(w)}else a.push(C)}if(this.editing){const p=t.h(Ao,{ref:"edit",modelValue:this.editContent,type:"textarea",autosize:this.mergedEditConfig.autosize,maxlength:this.mergedEditConfig.maxlength,"onOn-blur":this.handleEditBlur,"onOn-keydown":this.handleEditKeydown,"onOn-keyup":this.handleEditKeyup,"onOn-change":this.handleEditChange}),C=this.$slots.enterIcon?this.$slots.enterIcon():t.h(S,{type:"md-return-left"}),w=t.h("span",{class:"ivu-typography-edit-content-confirm"},C);return t.h("div",{class:["ivu-typography","ivu-typography-edit-content",{[`ivu-typography-h${this.level}`]:this.level,"ivu-typography-div":!this.level}]},[p,w])}else{const p={};this.ellipsis&&!this.ellipsisExpanded&&(p["-webkit-line-clamp"]=this.mergedEllipsisConfig.rows);const w=t.h(this.component,{ref:"typography",class:this.classes,...this.linkProps,style:p,onClick:this.handleClickContent},[a,null]);return this.ellipsis&&!this.ellipsisExpanded&&this.isEllipsis&&this.mergedEllipsisConfig.tooltip?t.h(vl,{content:this.mergedEllipsisConfig.tooltip===!0?this.handleGetContent():this.mergedEllipsisConfig.tooltip,placement:this.placement,transfer:this.transfer,theme:this.theme,maxWidth:this.maxWidth},()=>w):w}},beforeUnmount(){this.handleRemoveObserver()}},m5={name:"Link",mixins:[Cm],render(){return t.h(Ky,{...this.$props,component:"a",...this.commonEvents()},this.commonSlots())}};function g5(){return We(),Oe}let v5=g5();so.newInstance=a=>{if(!r)return;const h=a||{};let p=null;const C=t.createApp({data(){return Object.assign({},h,{})},render(){let A="";return this.render?A=t.h(so,{fix:!0,fullscreen:!0,ref:"spin"},[this.render(t.h)]):A=t.h(so,{size:"large",fix:!0,fullscreen:!0,ref:"spin"}),t.h("div",{class:"ivu-spin-fullscreen ivu-spin-fullscreen-wrapper",style:{"z-index":2010+v5}},[A])},created(){p=t.getCurrentInstance()}}),w=document.createElement("div");document.body.appendChild(w),C.mount(w);const v=p.refs.spin;return{show(){t.nextTick(()=>{p.refs.spin.visible=!0,v5=g5()})},remove(A){v.visible=!1,setTimeout(function(){C.unmount(),document.body.removeChild(w),A()},500)},component:v}};let km;function y5(a=void 0){return km=km||so.newInstance({render:a}),km}function vte(a){const h="render"in a?a.render:void 0;y5(h).show(a)}so.show=function(a={}){return vte(a)},so.hide=function(){if(!km)return!1;y5().remove(()=>{km=null})};const Tm="ivu-list",yte={name:"List",provide(){return{ListInstance:this}},components:{Spin:so},props:{border:{type:Boolean,default:!1},itemLayout:{validator(a){return _(a,["horizontal","vertical"])},default:"horizontal"},header:{type:String,default:""},footer:{type:String,default:""},loading:{type:Boolean,default:!1},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},split:{type:Boolean,default:!0}},data(){return{}},computed:{classes(){return[`${Tm}`,`${Tm}-${this.size}`,`${Tm}-${this.itemLayout}`,{[`${Tm}-bordered`]:this.border,[`${Tm}-split`]:this.split}]}},methods:{}},bte={key:0,class:"ivu-list-header"},xte={class:"ivu-list-container"},Ote={class:"ivu-list-items"},wte={key:2,class:"ivu-list-footer"};function _te(a,h,p,C,w,v){const A=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[p.header||a.$slots.header?(t.openBlock(),t.createElementBlock("div",bte,[t.renderSlot(a.$slots,"header",{},()=>[t.createTextVNode(t.toDisplayString(p.header),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",xte,[t.createElementVNode("ul",Ote,[t.renderSlot(a.$slots,"default")])]),p.loading?(t.openBlock(),t.createBlock(A,{key:1,fix:"",size:"large"},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"spin")]),_:3})):t.createCommentVNode("",!0),p.footer||a.$slots.footer?(t.openBlock(),t.createElementBlock("div",wte,[t.renderSlot(a.$slots,"footer",{},()=>[t.createTextVNode(t.toDisplayString(p.footer),1)])])):t.createCommentVNode("",!0)],2)}var b5=l(yte,[["render",_te]]);const Ste={name:"ListItem",inject:["ListInstance"],props:{},computed:{itemLayout(){return this.ListInstance.itemLayout},isItemContainsTextNode(){let a;return this.$slots.default().forEach(h=>{typeof h=="string"&&(a=!0)}),a},isFlexMode(){const a=this.$slots.extra;return this.itemLayout==="vertical"?!!a:!this.isItemContainsTextNode},classes(){return[{"ivu-list-item-no-flex":!this.isFlexMode}]}}},Cte={class:"ivu-list-item-main"},kte={key:0,class:"ivu-list-item-action"},Tte={class:"ivu-list-item-extra"},Mte={key:0,class:"ivu-list-item-action"},Ete={class:"ivu-list-item-extra"};function Pte(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(["ivu-list-item",v.classes])},[v.itemLayout==="vertical"&&a.$slots.extra?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("div",Cte,[t.renderSlot(a.$slots,"default"),a.$slots.action?(t.openBlock(),t.createElementBlock("ul",kte,[t.renderSlot(a.$slots,"action")])):t.createCommentVNode("",!0)]),t.createElementVNode("div",Tte,[t.renderSlot(a.$slots,"extra")])],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.renderSlot(a.$slots,"default"),a.$slots.action?(t.openBlock(),t.createElementBlock("ul",Mte,[t.renderSlot(a.$slots,"action")])):t.createCommentVNode("",!0),t.createElementVNode("div",Ete,[t.renderSlot(a.$slots,"extra")])],64))],2)}var x5=l(Ste,[["render",Pte]]);const Ate={name:"ListItemMeta",components:{Avatar:sm},props:{avatar:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""}}},Rte={class:"ivu-list-item-meta"},Ite={key:0,class:"ivu-list-item-meta-avatar"},Dte={class:"ivu-list-item-meta-content"},Nte={key:0,class:"ivu-list-item-meta-title"},$te={key:1,class:"ivu-list-item-meta-description"};function Vte(a,h,p,C,w,v){const A=t.resolveComponent("Avatar");return t.openBlock(),t.createElementBlock("div",Rte,[p.avatar||a.$slots.avatar?(t.openBlock(),t.createElementBlock("div",Ite,[t.renderSlot(a.$slots,"avatar",{},()=>[t.createVNode(A,{src:p.avatar},null,8,["src"])])])):t.createCommentVNode("",!0),t.createElementVNode("div",Dte,[p.title||a.$slots.title?(t.openBlock(),t.createElementBlock("div",Nte,[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])])):t.createCommentVNode("",!0),p.description||a.$slots.description?(t.openBlock(),t.createElementBlock("div",$te,[t.renderSlot(a.$slots,"description",{},()=>[t.createTextVNode(t.toDisplayString(p.description),1)])])):t.createCommentVNode("",!0)])])}var O5=l(Ate,[["render",Vte]]);const Jy="ivu-loading-bar",Lte={name:"LoadingBar",props:{color:{type:String,default:"primary"},failedColor:{type:String,default:"error"},height:{type:Number,default:2}},data(){return{percent:0,status:"success",show:!1}},computed:{classes(){return`${Jy}`},innerClasses(){return[`${Jy}-inner`,{[`${Jy}-inner-color-primary`]:this.color==="primary"&&this.status==="success",[`${Jy}-inner-failed-color-error`]:this.failedColor==="error"&&this.status==="error"}]},outerStyles(){return{height:`${this.height}px`}},styles(){let a={width:`${this.percent}%`,height:`${this.height}px`};return this.color!=="primary"&&this.status==="success"&&(a.backgroundColor=this.color),this.failedColor!=="error"&&this.status==="error"&&(a.backgroundColor=this.failedColor),a}}};function Bte(a,h,p,C,w,v){return t.openBlock(),t.createBlock(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.outerStyles)},[t.createElementVNode("div",{class:t.normalizeClass(v.innerClasses),style:t.normalizeStyle(v.styles)},null,6)],6),[[t.vShow,w.show]])]),_:1})}var pS=l(Lte,[["render",Bte]]);pS.newInstance=a=>{if(!r)return;const h=a||{};let p=null;const C=t.createApp({data(){return h},render(){return t.h(pS,Object.assign({ref:"loadingBar"},h))},created(){p=t.getCurrentInstance()}}),w=document.createElement("div");document.body.appendChild(w),C.mount(w);const v=p.refs.loadingBar;return{update(A){"percent"in A&&(v.percent=A.percent),A.status&&(v.status=A.status),"show"in A&&(v.show=A.show)},component:v,destroy(){C.unmount(),document.body.removeChild(w)}}};let e1,w5="primary",_5=800,S5="error",C5=2,Mm;function k5(){return e1=e1||pS.newInstance({color:w5,failedColor:S5,height:C5}),e1}function Jh(a){k5().update(a)}function T5(){setTimeout(()=>{Jh({show:!1}),setTimeout(()=>{Jh({percent:0})},200)},_5)}function Em(){Mm&&(clearInterval(Mm),Mm=null)}var mS={start(){if(Mm)return;let a=0;Jh({percent:a,status:"success",show:!0}),Mm=setInterval(()=>{a+=Math.floor(Math.random()*3+1),a>95&&Em(),Jh({percent:a,status:"success",show:!0})},200)},update(a){Em(),Jh({percent:a,status:"success",show:!0})},finish(){Em(),Jh({percent:100,status:"success",show:!0}),T5()},error(){Em(),Jh({percent:100,status:"error",show:!0}),T5()},config(a){a.color&&(w5=a.color),a.duration&&(_5=a.duration),a.failedColor&&(S5=a.failedColor),a.height&&(C5=a.height)},destroy(){Em();let a=k5();e1=null,a.destroy()}};const Ute={name:"Login",components:{Form:Hy},emits:["on-submit"],provide(){return{LoginInstance:this}},props:{},data(){return{formValidate:{}}},methods:{handleSubmit(){this.$refs.form.validate(a=>{this.$emit("on-submit",a,JSON.parse(JSON.stringify(this.formValidate)))})},handleValidate(a,h){let p=!0;a.forEach(C=>{this.$refs.form.validateField(C,w=>{w&&(p=!1)})}),h(p)}}},Fte={class:"ivu-login"};function zte(a,h,p,C,w,v){const A=t.resolveComponent("Form");return t.openBlock(),t.createElementBlock("div",Fte,[t.createVNode(A,{ref:"form",model:w.formValidate,onSubmit:h[0]||(h[0]=t.withModifiers(()=>{},["prevent"]))},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"default")]),_:3},8,["model"])])}var M5=l(Ute,[["render",zte]]);const gS="ivu-menu",Xte={name:"Menu",emits:["on-select","on-open-change"],provide(){return{MenuInstance:this}},props:{mode:{validator(a){return _(a,["horizontal","vertical"])},default:"vertical"},theme:{validator(a){return _(a,["light","dark","primary"])},default:"light"},activeName:{type:[String,Number]},openNames:{type:Array,default(){return[]}},accordion:{type:Boolean,default:!1},width:{type:String,default:"240px"}},data(){return{currentActiveName:this.activeName,openedNames:[],submenuList:[],menuItemList:[],ready:!1}},computed:{classes(){let a=this.theme;return this.mode==="vertical"&&this.theme==="primary"&&(a="light"),[`${gS}`,`${gS}-${a}`,{[`${gS}-${this.mode}`]:this.mode}]},styles(){let a={};return this.mode==="vertical"&&(a.width=this.width),a}},methods:{updateActiveName(){this.currentActiveName===void 0&&(this.currentActiveName=-1),this.submenuList.map(a=>a.submenu).forEach(a=>{a.handleUpdateActiveName(!1)}),this.menuItemList.map(a=>a.menuitem).forEach(a=>{a.handleUpdateActiveName(this.currentActiveName)})},updateOpenKeys(a){const h=[...this.openedNames].indexOf(a),p=this.submenuList.map(w=>w.submenu);if(this.accordion&&p.forEach(w=>{w.opened=!1}),h>=0){let w=null;p.forEach(v=>{v.name===a&&(w=v,v.opened=!1)}),B(w,"Submenu").forEach(v=>{v.opened=!0}),w.childSubmenuList.map(v=>v.submenu).forEach(v=>{v.opened=!1})}else if(this.accordion){let w=null;p.forEach(v=>{v.name===a&&(w=v,v.opened=!0)}),B(w,"Submenu").forEach(v=>{v.opened=!0})}else this.submenuList.map(w=>w.submenu).forEach(w=>{w.name===a&&(w.opened=!0)});let C=p.filter(w=>w.opened).map(w=>w.name);this.openedNames=[...C],this.$emit("on-open-change",C)},updateOpened(){const a=(this.submenuList||[]).map(h=>h.submenu);a.length&&a.forEach(h=>{this.openedNames.indexOf(h.name)>-1?h.opened=!0:h.opened=!1})},handleEmitSelectEvent(a){this.$emit("on-select",a)},handleMenuItemSelect(a){this.currentActiveName=a,this.$emit("on-select",a)}},mounted(){this.openedNames=[...this.openNames],this.updateOpened(),t.nextTick(()=>{this.updateActiveName(),this.ready=!0})},watch:{openNames(a){this.openedNames=a},activeName(a){this.currentActiveName=a},currentActiveName(){this.updateActiveName()}}};function Wte(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.styles)},[t.renderSlot(a.$slots,"default")],6)}var vS=l(Xte,[["render",Wte]]),yS={inject:{MenuInstance:{default:null},SubmenuInstance:{default:null}},data(){return{menu:this.MenuInstance}},computed:{hasParentSubmenu(){return!!this.SubmenuInstance},parentSubmenuNum(){return B(this,"Submenu").length},mode(){return this.MenuInstance.mode}}};const Qte="ivu-menu",Hte={name:"MenuGroup",mixins:[yS],props:{title:{type:String,default:""}},data(){return{prefixCls:Qte}},computed:{groupStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*28+"px"}:{}}}};function Gte(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([w.prefixCls+"-item-group"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-item-group-title"]),style:t.normalizeStyle(v.groupStyle)},t.toDisplayString(p.title),7),t.createElementVNode("ul",null,[t.renderSlot(a.$slots,"default")])],2)}var E5=l(Hte,[["render",Gte]]);const t1="ivu-menu",Yte={name:"MenuItem",mixins:[yS,fe],props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{active:!1,id:ee(6)}},computed:{classes(){return[`${t1}-item`,{[`${t1}-item-active`]:this.active,[`${t1}-item-selected`]:this.active,[`${t1}-item-disabled`]:this.disabled}]},itemStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}}},methods:{handleClickItem(a,h=!1){if(!this.disabled)if(h||this.target==="_blank"){this.handleCheckClick(a,h);let p=$(this,"Menu");p&&p.handleEmitSelectEvent(this.name)}else $(this,"Submenu")?this.SubmenuInstance.handleMenuItemSelect(this.name):this.MenuInstance.handleMenuItemSelect(this.name),this.handleCheckClick(a,h)},handleUpdateActiveName(a){this.name===a?(this.active=!0,this.SubmenuInstance&&this.SubmenuInstance.handleUpdateActiveName(a)):this.active=!1},addMenuItem(){const a=this.MenuInstance;a.menuItemList||(a.menuItemList=[]),a.menuItemList.push({id:this.id,menuitem:this})},removeMenuItem(){const a=this.MenuInstance;if(a.menuItemList&&a.menuItemList.length){const h=a.menuItemList.findIndex(p=>p.id===this.id);a.menuItemList.splice(h,1)}}},mounted(){this.addMenuItem()},beforeUnmount(){this.removeMenuItem()}},jte=["href","target"];function qte(a,h,p,C,w,v){return a.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:a.linkUrl,target:a.target,class:t.normalizeClass(v.classes),onClick:[h[0]||(h[0]=t.withModifiers(A=>v.handleClickItem(A,!1),["exact"])),h[1]||(h[1]=t.withModifiers(A=>v.handleClickItem(A,!0),["ctrl"])),h[2]||(h[2]=t.withModifiers(A=>v.handleClickItem(A,!0),["meta"]))],style:t.normalizeStyle(v.itemStyle)},[t.renderSlot(a.$slots,"default")],14,jte)):(t.openBlock(),t.createElementBlock("li",{key:1,class:t.normalizeClass(v.classes),onClick:h[3]||(h[3]=t.withModifiers((...A)=>v.handleClickItem&&v.handleClickItem(...A),["stop"])),style:t.normalizeStyle(v.itemStyle)},[t.renderSlot(a.$slots,"default")],6))}var P5=l(Yte,[["render",qte]]);const A5={name:"Mobile",mixins:[um],data(){return{className:"ivu-login-mobile",prefix:"ios-phone-portrait",placeholder:"",type:"text"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:F_.Mobile,trigger:"change"},{pattern:/^1\d{10}$/,message:"",trigger:"change"}]}}}},Ps="ivu-modal",R5={x:null,y:null,dragX:null,dragY:null,dragging:!1,rect:null},Zte={inheritAttrs:!1,name:"Modal",mixins:[ji,oS],components:{Icon:S,iButton:cs},emits:["on-cancel","on-ok","on-hidden","on-visible-change","update:modelValue"],provide(){return{ModalInstance:this}},props:{modelValue:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.modal.maskClosable===""?!0:a.$VIEWUI.modal.maskClosable}},title:{type:String},width:{type:[Number,String],default:520},okText:{type:String},cancelText:{type:String},loading:{type:Boolean,default:!1},styles:{type:Object,default(){return{}}},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},transitionNames:{type:Array,default(){return["ease","fade"]}},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!0:a.$VIEWUI.transfer}},fullscreen:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyDistance:{type:Number,default:10},resetDragPosition:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},beforeClose:Function,render:Function},data(){return{prefixCls:Ps,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.modelValue,dragData:L(R5),modalIndex:this.handleGetModalIndex(),isMouseTriggerIn:!1,id:ee(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${Ps}-wrap`,{[`${Ps}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${Ps}-no-mask`]:!this.showMask}]},wrapStyles(){return{zIndex:this.modalIndex+this.zIndex}},maskClasses(){return`${Ps}-mask`},classes(){return[`${Ps}`,{[`${Ps}-fullscreen`]:this.fullscreen,[`${Ps}-fullscreen-no-header`]:this.fullscreen&&!this.showHead,[`${Ps}-fullscreen-no-footer`]:this.fullscreen&&this.footerHide}]},contentClasses(){return[`${Ps}-content`,{[`${Ps}-content-no-mask`]:!this.showMask,[`${Ps}-content-drag`]:this.draggable&&!this.fullscreen,[`${Ps}-content-dragging`]:this.draggable&&this.dragData.dragging}]},mainStyles(){let a={};const h=parseInt(this.width),p=this.dragData.x!==null?{top:0}:{width:h<=100?`${h}%`:`${h}px`},C=this.styles?this.styles:{};return Object.assign(a,p,C),a},contentStyles(){let a={};if(this.draggable&&!this.fullscreen){const h=this.styles.top?parseFloat(this.styles.top):0,p=this.styles.left?parseFloat(this.styles.left):0;this.dragData.x!==null&&(a.left=`${this.dragData.x-p}px`),this.dragData.y!==null&&(a.top=`${this.dragData.y}px`),this.dragData.y!==null&&(a.top=`${this.dragData.y-h}px`);const C=parseInt(this.width),w={width:C<=100?`${C}%`:`${C}px`};Object.assign(a,w)}return a},localeOkText(){return this.okText===void 0?this.t("i.modal.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.modal.cancelText"):this.cancelText},showMask(){return this.mask}},methods:{close(){if(!this.beforeClose)return this.handleClose();const a=this.beforeClose();a&&a.then?a.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-cancel")},handleMask(){this.maskClosable&&this.showMask&&this.close()},handleWrapClick(a){if(this.isMouseTriggerIn){this.isMouseTriggerIn=!1;return}const h=a.target.getAttribute("class");h&&h.indexOf(`${Ps}-wrap`)>-1&&this.handleMask()},handleMousedown(){this.isMouseTriggerIn=!0},cancel(){this.close()},ok(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("update:modelValue",!1)),this.$emit("on-ok")},EscClose(a){if(this.visible&&this.closable&&a.keyCode===27){const h=this.$root.modalList.map(p=>p.modal).filter(p=>p.$data.visible&&p.$props.closable).sort((p,C)=>p.$data.modalIndex<C.$data.modalIndex?1:-1)[0];setTimeout(()=>{h.close()},0)}},animationFinish(){this.$emit("on-hidden")},handleMoveStart(a){if(!this.draggable||this.fullscreen)return!1;const h=this.$refs.content.getBoundingClientRect();this.dragData.rect=h,this.dragData.x=h.x||h.left,this.dragData.y=h.y||h.top;const p={x:a.clientX,y:a.clientY};this.dragData.dragX=p.x,this.dragData.dragY=p.y,this.dragData.dragging=!0,s(window,"mousemove",this.handleMoveMove),s(window,"mouseup",this.handleMoveEnd)},handleMoveMove(a){if(!this.dragData.dragging||this.fullscreen)return!1;const h={x:a.clientX,y:a.clientY},p={x:h.x-this.dragData.dragX,y:h.y-this.dragData.dragY};if(r&&this.sticky){const C=document.documentElement.clientWidth,w=document.documentElement.clientHeight;this.dragData.x+p.x<=this.stickyDistance&&p.x<0?this.dragData.x=0:this.dragData.x+this.dragData.rect.width-C>-this.stickyDistance&&p.x>0?this.dragData.x=C-this.dragData.rect.width:this.dragData.x+=p.x,this.dragData.y+p.y<=this.stickyDistance&&p.y<0?this.dragData.y=0:this.dragData.y+this.dragData.rect.height-w>-this.stickyDistance&&p.y>0?this.dragData.y=w-this.dragData.rect.height:this.dragData.y+=p.y}else this.dragData.x+=p.x,this.dragData.y+=p.y;this.dragData.dragX=h.x,this.dragData.dragY=h.y},handleMoveEnd(){this.dragData.dragging=!1,o(window,"mousemove",this.handleMoveMove),o(window,"mouseup",this.handleMoveEnd)},handleGetModalIndex(){return We(),Oe},handleClickModal(){if(this.draggable){if(Te!==this.lastVisibleIndex){this.lastVisibleIndex=Te;return}this.modalIndex=this.handleGetModalIndex()}},addModal(){const a=this.$root;a.modalList||(a.modalList=[]),a.modalList.push({id:this.id,modal:this})},removeModal(){const a=this.$root;if(!a.modalList)return;const h=a.modalList.findIndex(p=>p.id===this.id);a.modalList.splice(h,1)}},watch:{modelValue(a){this.visible=a},visible(a){a===!1?(this.buttonLoading=!1,this.timer=setTimeout(()=>{this.wrapShow=!1,this.removeScrollEffect()},300)):(this.lastVisible!==a&&(this.modalIndex=this.handleGetModalIndex(),Ve()),this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(h=>{h.table.handleOnVisibleChange(a)}),this.sliderList.forEach(h=>{h.slider.handleOnVisibleChange(a)}),this.$emit("on-visible-change",a),this.lastVisible=a,this.lastVisibleIndex=Te,a&&this.resetDragPosition&&(this.dragData=L(R5))},loading(a){a||(this.buttonLoading=!1)},scrollable(a){a?this.removeScrollEffect():this.addScrollEffect()},title(a){this.$slots.header===void 0&&(this.showHead=!!a)}},mounted(){this.visible&&(this.wrapShow=!0);let a=!0;this.$slots.header===void 0&&!this.title&&(a=!1),this.showHead=a,this.addModal(),r&&document.addEventListener("keydown",this.EscClose)},beforeUnmount(){this.removeModal(),r&&document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()}};function Kte(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("i-button");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!p.transfer},[t.createVNode(t.Transition,{name:p.transitionNames[1]},{default:t.withCtx(()=>[v.showMask?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.maskClasses),style:t.normalizeStyle(v.wrapStyles),onClick:h[0]||(h[0]=(...H)=>v.handleMask&&v.handleMask(...H))},null,6)),[[t.vShow,w.visible]]):t.createCommentVNode("",!0)]),_:1},8,["name"]),t.createElementVNode("div",{class:t.normalizeClass(v.wrapClasses),style:t.normalizeStyle(v.wrapStyles),onClick:h[5]||(h[5]=(...H)=>v.handleWrapClick&&v.handleWrapClick(...H))},[t.createVNode(t.Transition,{name:p.transitionNames[0],onAfterLeave:v.animationFinish},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",t.mergeProps(a.$attrs,{class:v.classes,style:v.mainStyles,onMousedown:h[4]||(h[4]=(...H)=>v.handleMousedown&&v.handleMousedown(...H))}),[t.createElementVNode("div",{class:t.normalizeClass(v.contentClasses),ref:"content",style:t.normalizeStyle(v.contentStyles),onClick:h[3]||(h[3]=(...H)=>v.handleClickModal&&v.handleClickModal(...H))},[p.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([w.prefixCls+"-close"]),onClick:h[1]||(h[1]=(...H)=>v.close&&v.close(...H))},[t.renderSlot(a.$slots,"close",{},()=>[t.createVNode(A,{type:"ios-close"})])],2)):t.createCommentVNode("",!0),w.showHead?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([w.prefixCls+"-header"]),onMousedown:h[2]||(h[2]=(...H)=>v.handleMoveStart&&v.handleMoveStart(...H))},[t.renderSlot(a.$slots,"header",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-header-inner"])},t.toDisplayString(p.title),3)])],34)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"])},[t.renderSlot(a.$slots,"default")],2),p.footerHide?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass([w.prefixCls+"-footer"])},[t.renderSlot(a.$slots,"footer",{},()=>[t.createVNode(V,{type:"text",onClick:v.cancel},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.localeCancelText),1)]),_:1},8,["onClick"]),t.createVNode(V,{type:"primary",loading:w.buttonLoading,onClick:v.ok},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.localeOkText),1)]),_:1},8,["loading","onClick"])])],2))],6)],16),[[t.vShow,w.visible]])]),_:3},8,["name","onAfterLeave"])],6)],8,["disabled"])}var Io=l(Zte,[["render",Kte]]);const Ol="ivu-modal-confirm";Io.newInstance=a=>{if(!r)return;const h=a||{},p=document.createElement("div");document.body.appendChild(p);let C=null;const w=t.createApp({mixins:[ji],data(){return Object.assign({},h,{visible:!1,width:416,title:"",body:"",iconType:"",iconName:"",okText:void 0,cancelText:void 0,showCancel:!1,loading:!1,buttonLoading:!1,scrollable:!1,closable:!1,closing:!1})},render(){let A=[];this.showCancel&&A.push(t.h(cs,{type:"text",onClick:this.cancel},()=>this.localeCancelText)),A.push(t.h(cs,{type:"primary",loading:this.buttonLoading,onClick:this.ok},()=>this.localeOkText));let V;this.render?V=t.h("div",{class:`${Ol}-body ${Ol}-body-render`},[this.render(t.h)]):V=t.h("div",{class:`${Ol}-body`},[t.h("div",{innerHTML:this.body})]);let H;return this.title&&(H=t.h("div",{class:`${Ol}-head`},[t.h("div",{class:this.iconTypeCls},[t.h("i",{class:this.iconNameCls})]),t.h("div",{class:`${Ol}-head-title`,innerHTML:this.title})])),t.h(Io,Object.assign({},h,{width:this.width,scrollable:this.scrollable,closable:this.closable,ref:"modal"},{modelValue:this.visible,"onUpdate:modelValue":X=>this.visible=X,"onOn-cancel":this.cancel}),()=>t.h("div",{class:Ol},[H,V,t.h("div",{class:`${Ol}-footer`},A)]))},computed:{iconTypeCls(){return[`${Ol}-head-icon`,`${Ol}-head-icon-${this.iconType}`]},iconNameCls(){return["ivu-icon",`ivu-icon-${this.iconName}`]},localeOkText(){return this.okText?this.okText:this.t("i.modal.okText")},localeCancelText(){return this.cancelText?this.cancelText:this.t("i.modal.cancelText")}},methods:{cancel(){this.closing||(this.$refs.modal.visible=!1,this.buttonLoading=!1,this.onCancel(),this.remove())},ok(){this.closing||(this.loading?this.buttonLoading=!0:(this.$refs.modal.visible=!1,this.remove()),this.onOk())},remove(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.destroy()},300)},destroy(){w.unmount(),document.body.removeChild(p),this.onRemove()},onOk(){},onCancel(){},onRemove(){}},created(){C=t.getCurrentInstance()}});w.mount(p);const v=C.refs.modal;return{show(A){switch(v.$parent.showCancel=A.showCancel,v.$parent.iconType=A.icon,A.icon){case"info":v.$parent.iconName="ios-information-circle";break;case"success":v.$parent.iconName="ios-checkmark-circle";break;case"warning":v.$parent.iconName="ios-alert";break;case"error":v.$parent.iconName="ios-close-circle";break;case"confirm":v.$parent.iconName="ios-help-circle";break}"width"in A&&(v.$parent.width=A.width),"closable"in A&&(v.$parent.closable=A.closable),"title"in A&&(v.$parent.title=A.title),"content"in A&&(v.$parent.body=A.content),"okText"in A&&(v.$parent.okText=A.okText),"cancelText"in A&&(v.$parent.cancelText=A.cancelText),"onCancel"in A&&(v.$parent.onCancel=A.onCancel),"onOk"in A&&(v.$parent.onOk=A.onOk),"loading"in A&&(v.$parent.loading=A.loading),"scrollable"in A&&(v.$parent.scrollable=A.scrollable),v.$parent.onRemove=A.onRemove,v.visible=!0},remove(){v.visible=!1,v.$parent.buttonLoading=!1,v.$parent.remove()},component:v}};let Pm;function I5(a=void 0,h=!0){return Pm=Pm||Io.newInstance({closable:!1,maskClosable:!1,footerHide:!0,render:a,lockScroll:h}),Pm}function Am(a){const h="render"in a?a.render:void 0,p="lockScroll"in a?a.lockScroll:!0;let C=I5(h,p);a.onRemove=function(){Pm=null},C.show(a)}Io.info=function(a={}){return a.icon="info",a.showCancel=!1,Am(a)},Io.success=function(a={}){return a.icon="success",a.showCancel=!1,Am(a)},Io.warning=function(a={}){return a.icon="warning",a.showCancel=!1,Am(a)},Io.error=function(a={}){return a.icon="error",a.showCancel=!1,Am(a)},Io.confirm=function(a={}){return a.icon="confirm",a.showCancel=!0,Am(a)},Io.remove=function(){if(!Pm)return!1;I5().remove()};const oo="ivu-notice",D5="ivu-icon",Jte="ivu_notice_key_";let N5=24,$5=4.5,Ld,V5=1;const eie={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle"},L5="move-notice";function B5(){return Ld=Ld||Iy.newInstance({prefixCls:oo,styles:{top:`${N5}px`,right:0},transitionName:L5}),Ld}function Rm(a,h){const p=h.title||"",C=h.desc||"",w=h.name||`${Jte}${V5}`,v=h.onClose||function(){},A=h.render,V=h.duration===0?0:h.duration||$5;V5++;let H=B5(),X,Y;const le=h.render&&!p?"":C||h.render?` ${oo}-with-desc`:"";if(a==="normal")Y=!1,X=`
            <div class="${oo}-custom-content ${oo}-with-normal ${le}">
                <div class="${oo}-title">${p}</div>
                <div class="${oo}-desc">${C}</div>
            </div>
        `;else{const xe=eie[a],be=le===""?"":"-outline";Y=!0,X=`
            <div class="${oo}-custom-content ${oo}-with-icon ${oo}-with-${a} ${le}">
                <span class="${oo}-icon ${oo}-icon-${a}">
                    <i class="${D5} ${D5}-${xe}${be}"></i>
                </span>
                <div class="${oo}-title">${p}</div>
                <div class="${oo}-desc">${C}</div>
            </div>
        `}H.notice({name:w.toString(),duration:V,styles:{},transitionName:L5,content:X,withIcon:Y,render:A,hasTitle:!!p,onClose:v,closable:!0,type:"notice"})}var bS={open(a){return Rm("normal",a)},info(a){return Rm("info",a)},success(a){return Rm("success",a)},warning(a){return Rm("warning",a)},error(a){return Rm("error",a)},config(a){a.top&&(N5=a.top),(a.duration||a.duration===0)&&($5=a.duration)},close(a){if(a)a=a.toString(),Ld&&Ld.remove(a);else return!1},destroy(){let a=B5();Ld=null,a.destroy("ivu-notice")}};const wr="ivu-tabs",xS=300,U5=(a,h,p,C)=>{const w=(a.findIndex(A=>A.name===h)+p+a.length)%a.length,v=a[w];return v.disabled?U5(a,v.name,p):v},F5=(a,h)=>{try{a.focus()}catch{}if(r&&document.activeElement==a&&a!==h)return!0;const p=a.children;for(let C of p)if(F5(C,h))return!0;return!1},tie={name:"Tabs",mixins:[ia],emits:["on-click","on-dblclick","on-contextmenu","on-tab-remove","on-drag-drop","update:modelValue"],components:{Icon:S,Render:e4,Dropdown:jh,DropdownMenu:qh},provide(){return{TabsInstance:this}},props:{modelValue:{type:[String,Number]},type:{validator(a){return _(a,["line","card"])},default:"line"},size:{validator(a){return _(a,["small","default"])},default:"default"},animated:{type:Boolean,default:!0},captureFocus:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},beforeRemove:Function,name:{type:String},draggable:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:wr,navList:[],barWidth:0,barOffset:0,activeKey:this.modelValue,focusedKey:this.modelValue,showSlot:!1,navStyle:{transform:""},scrollable:!1,transitioning:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},paneList:[],tableList:[]}},computed:{classes(){return[`${wr}`,{[`${wr}-card`]:this.type==="card",[`${wr}-mini`]:this.size==="small"&&this.type==="line",[`${wr}-no-animation`]:!this.animated}]},contentClasses(){return[`${wr}-content`,{[`${wr}-content-animated`]:this.animated}]},barClasses(){return[`${wr}-ink-bar`,{[`${wr}-ink-bar-animated`]:this.animated}]},contentStyle(){const a=this.getTabIndex(this.activeKey),h=a===0?"0%":`-${a}00%`;let p={};return a>-1&&(p={transform:`translateX(${h}) translateZ(0px)`}),p},barStyle(){let a={visibility:"hidden",width:`${this.barWidth}px`};return this.type==="line"&&(a.visibility="visible"),this.animated?a.transform=`translate3d(${this.barOffset}px, 0px, 0px)`:a.left=`${this.barOffset}px`,a},arrowType(){const a=this.globalConfig;let h="ios-close";return a&&(a.tabs.customCloseIcon?h="":a.tabs.closeIcon&&(h=a.tabs.closeIcon)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.tabs.customCloseIcon&&(h=a.tabs.customCloseIcon),h},arrowSize(){const a=this.globalConfig;let h="";return a&&a.tabs.closeIconSize&&(h=a.tabs.closeIconSize),h}},methods:{getTabs(){const a=this.paneList.map(p=>p.pane),h=[];return a.forEach(p=>{p.tab&&this.name?p.tab===this.name&&h.push(p):h.push(p)}),h.sort((p,C)=>{if(p.index&&C.index)return p.index>C.index?1:-1}),h},updateNav(){this.navList=[],this.getTabs().forEach((a,h)=>{this.navList.push({labelType:typeof a.label,label:a.label,icon:a.icon||"",name:a.currentName||h,disabled:a.disabled,closable:a.closable,contextMenu:a.contextMenu}),a.currentName||(a.currentName=h),h===0&&(this.activeKey||(this.activeKey=a.currentName||h))}),this.updateStatus(),this.updateBar()},updateBar(){t.nextTick(()=>{const a=this.getTabIndex(this.activeKey);if(!this.$refs.nav)return;const h=this.$refs.nav.querySelectorAll(`.${wr}-tab`),p=h[a];if(this.barWidth=p?parseFloat(p.offsetWidth):0,a>0){let C=0;const w=this.size==="small"?0:16;for(let v=0;v<a;v++)C+=parseFloat(h[v].offsetWidth)+w;this.barOffset=C}else this.barOffset=0;this.updateNavScroll()})},updateStatus(){this.getTabs().forEach(a=>a.show=a.currentName===this.activeKey||this.animated)},tabCls(a){return[`${wr}-tab`,{[`${wr}-tab-disabled`]:a.disabled,[`${wr}-tab-active`]:a.name===this.activeKey,[`${wr}-tab-focused`]:a.name===this.focusedKey}]},handleChange(a){if(this.transitioning)return;this.transitioning=!0,setTimeout(()=>this.transitioning=!1,xS);const h=this.navList[a];!h||h.disabled||(this.activeKey=h.name,this.$emit("update:modelValue",h.name),this.$emit("on-click",h.name))},handleDblclick(a){const h=this.navList[a];!h||h.disabled||this.$emit("on-dblclick",h.name)},handleContextmenu(a,h){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const p=this.navList[a];if(!p||p.disabled||!p.contextMenu)return;h.preventDefault();const C=this.$refs.tabsWrap.getBoundingClientRect(),w={left:`${h.clientX-C.left}px`,top:`${h.clientY-C.top}px`};this.contextMenuStyles=w,this.contextMenuVisible=!0,this.$emit("on-contextmenu",p,h,w)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handlePreventSelect(a,h){const p=this.navList[a];!p||p.disabled||!p.contextMenu||h.preventDefault()},handleTabKeyNavigation(a){if(a.keyCode!==37&&a.keyCode!==39)return;const h=a.keyCode===39?1:-1,p=U5(this.navList,this.focusedKey,h);this.focusedKey=p.name},handleTabKeyboardSelect(a=!1){if(a)return;const h=this.focusedKey||0,p=this.getTabIndex(h);this.handleChange(p)},handleRemove(a){if(!this.beforeRemove)return this.handleRemoveTab(a);const h=this.beforeRemove(a);h&&h.then?h.then(()=>{this.handleRemoveTab(a)}):this.handleRemoveTab(a)},handleRemoveTab(a){const h=this.getTabs(),p=h[a];if(p.currentName===this.activeKey){const C=this.getTabs();let w=-1;if(C.length){const v=h.filter((V,H)=>!V.disabled&&H<a),A=h.filter((V,H)=>!V.disabled&&H>a);A.length?w=A[0].currentName:v.length?w=v[v.length-1].currentName:w=C[0].currentName}this.activeKey=w,this.$emit("update:modelValue",w)}this.$emit("on-tab-remove",p.currentName),this.updateNav()},showClose(a){return this.type==="card"?a.closable!==null?a.closable:this.closable:!1},scrollPrev(){const a=this.$refs.navScroll.offsetWidth,h=this.getCurrentScrollOffset();if(!h)return;let p=h>a?h-a:0;this.setOffset(p)},scrollNext(){const a=this.$refs.nav.offsetWidth,h=this.$refs.navScroll.offsetWidth,p=this.getCurrentScrollOffset();if(a-p<=h)return;let C=a-p>h*2?p+h:a-h;this.setOffset(C)},getCurrentScrollOffset(){const{navStyle:a}=this;return a.transform?Number(a.transform.match(/translateX\(-(\d+(\.\d+)*)px\)/)[1]):0},getTabIndex(a){return this.navList.findIndex(h=>h.name===a)},setOffset(a){this.navStyle.transform=`translateX(-${a}px)`},scrollToActiveTab(){if(!this.scrollable)return;const a=this.$refs.nav,h=this.$el.querySelector(`.${wr}-tab-active`);if(!h)return;const p=this.$refs.navScroll,C=h.getBoundingClientRect(),w=p.getBoundingClientRect(),v=a.getBoundingClientRect(),A=this.getCurrentScrollOffset();let V=A;v.right<w.right&&(V=a.offsetWidth-w.width),C.left<w.left?V=A-(w.left-C.left):C.right>w.right&&(V=A+C.right-w.right),A!==V&&this.setOffset(Math.max(V,0))},updateNavScroll(){const a=this.$refs.nav.offsetWidth,h=this.$refs.navScroll.offsetWidth,p=this.getCurrentScrollOffset();h<a?(this.scrollable=!0,a-p<h&&this.setOffset(a-h)):(this.scrollable=!1,p>0&&this.setOffset(0))},handleScroll(a){a.preventDefault(),a.stopPropagation();const h=a.type;let p=0;(h==="DOMMouseScroll"||h==="mousewheel")&&(p=a.wheelDelta?a.wheelDelta:-(a.detail||0)*40),p>0?this.scrollPrev():this.scrollNext()},handleResize(){this.updateNavScroll()},isInsideHiddenElement(){if(!r)return;let a=this.$el.parentNode;for(;a&&a!==document.body;){if(a.style&&a.style.display==="none")return a;a=a.parentNode}return!1},updateVisibility(a){[...this.$refs.panes.querySelectorAll(`.${wr}-tabpane`)].forEach((h,p)=>{a===p?([...h.children].filter(C=>C.classList.contains(`${wr}-tabpane`)).forEach(C=>C.style.visibility="visible"),this.captureFocus&&setTimeout(()=>F5(h,h),xS)):setTimeout(()=>{[...h.children].filter(C=>C.classList.contains(`${wr}-tabpane`)).forEach(C=>C.style.visibility="hidden")},xS)})},handleDrag(a,h){const p=this.navList[a];p&&h.dataTransfer.setData("tab-name",p.name)},handleDrop(a,h){const p=this.navList[a];if(p){const C=h.dataTransfer.getData("tab-name");h.preventDefault();let w=this.navList.map(V=>V.name);const v=parseInt(w.findIndex(V=>V===C)),A=parseInt(w.findIndex(V=>V===p.name));w.splice(A,1,...w.splice(v,1,w[A])),this.$emit("on-drag-drop",C,p.name,v,A,w)}},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},watch:{modelValue(a){this.activeKey=a,this.focusedKey=a},activeKey(a){this.focusedKey=a,this.updateBar(),this.updateStatus(),this.tableList.forEach(p=>{p.table.handleOnVisibleChange(!0)}),t.nextTick(()=>{this.scrollToActiveTab()});const h=Math.max(this.getTabIndex(this.focusedKey),0);this.updateVisibility(h)}},mounted(){this.showSlot=this.$slots.extra!==void 0,this.observer=Vd(),this.observer.listenTo(this.$refs.navWrap,this.handleResize);const a=this.isInsideHiddenElement();a&&(this.mutationObserver=new M(()=>{a.style.display!=="none"&&(this.updateBar(),this.mutationObserver.disconnect())}),this.mutationObserver.observe(a,{attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]})),this.handleTabKeyboardSelect(!0),this.updateVisibility(this.getTabIndex(this.activeKey))},beforeUnmount(){this.observer.removeListener(this.$refs.navWrap,this.handleResize),this.mutationObserver&&this.mutationObserver.disconnect()}},iie=["onClick","onDblclick","onContextmenu","onSelectstart","draggable","onDragstart","onDrop"];function nie(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Render"),H=t.resolveComponent("DropdownMenu"),X=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),ref:"tabsWrap"},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-bar"])},[w.showSlot?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-nav-right"])},[t.renderSlot(a.$slots,"extra")],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-nav-container"]),tabindex:"0",ref:"navContainer",onKeydown:[h[5]||(h[5]=(...Y)=>v.handleTabKeyNavigation&&v.handleTabKeyNavigation(...Y)),h[6]||(h[6]=t.withKeys(t.withModifiers(Y=>v.handleTabKeyboardSelect(!1),["prevent"]),["space"]))]},[t.createElementVNode("div",{ref:"navWrap",class:t.normalizeClass([w.prefixCls+"-nav-wrap",w.scrollable?w.prefixCls+"-nav-scrollable":""])},[t.createElementVNode("span",{class:t.normalizeClass([w.prefixCls+"-nav-prev",w.scrollable?"":w.prefixCls+"-nav-scroll-disabled"]),onClick:h[0]||(h[0]=(...Y)=>v.scrollPrev&&v.scrollPrev(...Y))},[t.createVNode(A,{type:"ios-arrow-back"})],2),t.createElementVNode("span",{class:t.normalizeClass([w.prefixCls+"-nav-next",w.scrollable?"":w.prefixCls+"-nav-scroll-disabled"]),onClick:h[1]||(h[1]=(...Y)=>v.scrollNext&&v.scrollNext(...Y))},[t.createVNode(A,{type:"ios-arrow-forward"})],2),t.createElementVNode("div",{ref:"navScroll",class:t.normalizeClass([w.prefixCls+"-nav-scroll"]),"on:DOMMouseScroll":h[3]||(h[3]=(...Y)=>v.handleScroll&&v.handleScroll(...Y)),onMousewheel:h[4]||(h[4]=(...Y)=>v.handleScroll&&v.handleScroll(...Y))},[t.createElementVNode("div",{ref:"nav",class:t.normalizeClass([w.prefixCls+"-nav"]),style:t.normalizeStyle(w.navStyle)},[t.createElementVNode("div",{class:t.normalizeClass(v.barClasses),style:t.normalizeStyle(v.barStyle)},null,6),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.navList,(Y,le)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.tabCls(Y)),key:le,onClick:xe=>v.handleChange(le),onDblclick:xe=>v.handleDblclick(le),onContextmenu:t.withModifiers(xe=>v.handleContextmenu(le,xe),["stop"]),onSelectstart:t.withModifiers(xe=>v.handlePreventSelect(le,xe),["stop"]),draggable:p.draggable,onDragstart:xe=>v.handleDrag(le,xe),onDrop:xe=>v.handleDrop(le,xe),onDragover:h[2]||(h[2]=t.withModifiers(()=>{},["prevent"]))},[Y.icon!==""?(t.openBlock(),t.createBlock(A,{key:0,type:Y.icon},null,8,["type"])):t.createCommentVNode("",!0),Y.labelType==="function"?(t.openBlock(),t.createBlock(V,{key:1,render:Y.label},null,8,["render"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[t.createTextVNode(t.toDisplayString(Y.label),1)],64)),v.showClose(Y)?(t.openBlock(),t.createBlock(A,{key:3,class:t.normalizeClass([w.prefixCls+"-close"]),type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,onClick:t.withModifiers(xe=>v.handleRemove(le),["stop"])},null,8,["class","type","custom","size","onClick"])):t.createCommentVNode("",!0)],42,iie))),128))],6)],34)],2)],34)],2),t.createElementVNode("div",{class:t.normalizeClass(v.contentClasses),style:t.normalizeStyle(v.contentStyle),ref:"panes"},[t.renderSlot(a.$slots,"default")],6),t.createElementVNode("div",{class:"ivu-tabs-context-menu",style:t.normalizeStyle(w.contextMenuStyles)},[t.createVNode(X,{trigger:"custom",visible:w.contextMenuVisible,transfer:"",onOnClick:v.handleClickDropdownItem,onOnClickoutside:v.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(H,null,{default:t.withCtx(()=>[t.renderSlot(a.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var i1=l(tie,[["render",nie]]);const rie={name:"Notification",components:{Dropdown:jh,DropdownMenu:qh,Badge:wy,Tabs:i1},emits:["on-visible-change","on-item-click","on-clear","on-load-more","on-tab-change"],provide(){return{NotificationInstance:this}},props:{count:{type:Number},autoCount:{type:Boolean,default:!1},countType:{validator(a){return _(a,["text","badge"])},default:"text"},icon:{type:String,default:"md-notifications-outline"},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},badgeProps:{type:Object,default(){return{}}},clearClose:{type:Boolean,default:!1},locale:{type:Object,default(){return{loadedAll:"",loading:"...",loadMore:"",clear:""}}},tab:{type:String},wide:{type:Boolean,default:!1},transferClassName:{type:String}},data(){return{visible:!1,countAll:0,tabList:[]}},computed:{finalCount(){return this.autoCount?this.countAll:this.count},transferClasses(){let a="ivu-notifications-transfer";return this.transferClassName&&(a+=` ${this.transferClassName}`),a}},watch:{visible(a){this.$emit("on-visible-change",a)}},methods:{handleVisibleChange(a){this.visible=a},handleClickOutside(a){this.$refs.notice.contains(a.target)||(this.visible=!1)},handleToggleOpen(){this.visible=!this.visible},handleGetCountAll(){if(this.autoCount){const a=this.tabList.map(p=>p.tab);let h=0;a.forEach(p=>{p.count&&(h+=p.count)}),this.countAll=h}},handleItemClick(a,h){this.$emit("on-item-click",a,h)},handleClear(a){this.$emit("on-clear",a),this.clearClose&&this.handleClose()},handleLoadMore(a){this.$emit("on-load-more",a)},handleClose(){this.visible=!1},handleTabChange(a){const h=this.tabList.map(C=>C.tab);let p={};h.forEach(C=>{C.$refs.tab.currentName===a&&(p=C.handleGetTabBaseInfo())}),this.$emit("on-tab-change",p)}}},sie={class:"ivu-notifications",ref:"notice"},oie={class:"ivu-notifications-tabs"},aie={key:0,class:"ivu-notifications-extra"};function lie(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Badge"),H=t.resolveComponent("Tabs"),X=t.resolveComponent("DropdownMenu"),Y=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",sie,[t.createVNode(Y,{trigger:"custom",visible:w.visible,transfer:p.transfer,placement:p.placement,"transfer-class-name":v.transferClasses,onOnVisibleChange:v.handleVisibleChange,onOnClickoutside:v.handleClickOutside},{list:t.withCtx(()=>[a.$slots.default?(t.openBlock(),t.createBlock(X,{key:0,onClick:h[1]||(h[1]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(["ivu-notifications-list",{"ivu-notifications-list-wide":p.wide}])},[t.createElementVNode("div",oie,[t.createVNode(H,{animated:!1,"model-value":p.tab,onOnClick:v.handleTabChange},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"default")]),_:3},8,["model-value","onOnClick"])])],2),a.$slots.extra?(t.openBlock(),t.createElementBlock("div",aie,[t.renderSlot(a.$slots,"extra")])):t.createCommentVNode("",!0)]),_:3})):t.createCommentVNode("",!0)]),default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-notifications-rel",onClick:h[0]||(h[0]=t.withModifiers((...le)=>v.handleToggleOpen&&v.handleToggleOpen(...le),["prevent","stop"]))},[t.createVNode(V,t.mergeProps({count:v.finalCount},p.badgeProps),{default:t.withCtx(()=>[t.renderSlot(a.$slots,"icon",{},()=>[t.createVNode(A,{type:p.icon,size:"24"},null,8,["type"])])]),_:3},16,["count"])])]),_:3},8,["visible","transfer","placement","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],512)}var z5=l(rie,[["render",lie]]);const cie=(a,h)=>a<=h,Im=a=>a<10?"0"+a:a,X5=(a,h)=>{const p=new Date(a),C=p.getFullYear(),w=Im(p.getMonth()+1),v=Im(p.getDate()),A=Im(p.getHours()),V=Im(p.getMinutes()),H=Im(p.getSeconds());let X="";return h==="year"?X=C+"-"+w+"-"+v+" "+A+":"+V+":"+H:X=w+"-"+v+" "+A+":"+V,X},hie=(a,h)=>{const p=new Date().getTime(),C=cie(a,p);let w=p-a;C||(w=-w);let v="",A=C?h("i.time.before")||"":h("i.time.after")||"";return w<1e3?v=h("i.time.just")||"":w<6e4?v=parseInt(w/1e3)+(h("i.time.seconds")||"")+A:w>=6e4&&w<36e5?v=Math.floor(w/6e4)+(h("i.time.minutes")||"")+A:w>=36e5&&w<864e5?v=Math.floor(w/36e5)+(h("i.time.hours")||"")+A:w>=864e5&&w<262386e4?v=Math.floor(w/864e5)+(h("i.time.days")||"")+A:w>=262386e4&&w<=3156786e4&&C?v=X5(a):v=X5(a,"year"),v};function uie(a,h){return hie(a,h)}const W5="ivu-time",die={name:"Time",mixins:[ji],props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(a){return _(a,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},computed:{classes(){return[`${W5}`,{[`${W5}-with-hash`]:this.hash}]}},watch:{time(){this.setTime()}},methods:{handleClick(){r&&this.hash!==""&&(window.location.hash=this.hash)},setTime(){const a=typeof this.time;let h;if(a==="number"){const p=this.time.toString().length>10?this.time:this.time*1e3;h=new Date(p).getTime()}else a==="object"?h=this.time.getTime():a==="string"&&(h=to(this.time).valueOf());if(this.type==="relative")this.date=uie(h,this.t);else{const p=new Date(this.time),C=p.getFullYear(),w=p.getMonth()+1<10?"0"+(p.getMonth()+1):p.getMonth()+1,v=p.getDate()<10?"0"+p.getDate():p.getDate(),A=p.getHours()<10?"0"+p.getHours():p.getHours(),V=p.getMinutes()<10?"0"+p.getMinutes():p.getMinutes(),H=p.getSeconds()<10?"0"+p.getSeconds():p.getSeconds();this.type==="datetime"?this.date=`${C}-${w}-${v} ${A}:${V}:${H}`:this.type==="date"&&(this.date=`${C}-${w}-${v}`)}}},mounted(){this.setTime(),this.interval!==0&&(this.timer=setInterval(()=>{this.setTime()},1e3*this.interval))},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function fie(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(v.classes),onClick:h[0]||(h[0]=(...A)=>v.handleClick&&v.handleClick(...A))},t.toDisplayString(w.date),3)}var n1=l(die,[["render",fie]]);const pie={name:"NotificationItem",inject:["NotificationTabInstance","NotificationInstance"],components:{Row:vc,Col:Na,Avatar:sm,Tag:Ad,Time:n1},emits:["on-item-click"],props:{rowProps:{type:Object,default(){return{type:"flex",justify:"center",align:"middle"}}},read:{type:[Boolean,Number],default:!1},icon:{type:String},customIcon:{type:String},iconColor:{type:String},iconSize:{validator(a){return _(a,["small","default","large"])},default:"default"},avatar:{type:String},avatarShape:{validator(a){return _(a,["circle","square"])},default:"circle"},title:{type:String},content:{type:String},time:{type:[Number,Date,String]},timeProps:{type:Object,default(){return{}}},tag:{type:String},tagProps:{type:Object,default(){return{}}},clickClose:{type:Boolean,default:!1}},data(){return{id:ee(6)}},computed:{classes(){return{"ivu-notifications-item-unread":this.read===!1||this.read===0}},contentSpan(){return this.icon||this.customIcon||this.avatar||this.$slots.avatar?20:24},iconStyle(){let a={};return this.iconColor&&(a={"background-color":this.iconColor}),a}},methods:{handleClick(){this.$emit("on-item-click",this.$attrs),this.NotificationTabInstance.handleItemClick(this.$attrs),this.clickClose&&this.NotificationInstance.handleClose()},addItem(){this.NotificationTabInstance.itemList.push({id:this.id,item:this})},removeItem(){const a=this.NotificationTabInstance,h=a.itemList.findIndex(p=>p.id===this.id);a.itemList.splice(h,1)}},mounted(){this.addItem(),this.NotificationTabInstance.handleGetItems()},unmounted(){this.NotificationTabInstance.handleGetItems()},beforeUnmount(){this.removeItem()}},mie={class:"ivu-notifications-item-title"},gie={key:0},vie={key:0,class:"ivu-notifications-item-tag"},yie={key:0,class:"ivu-notifications-item-desc"},bie={key:1,class:"ivu-notifications-item-time"};function xie(a,h,p,C,w,v){const A=t.resolveComponent("Avatar"),V=t.resolveComponent("Col"),H=t.resolveComponent("Tag"),X=t.resolveComponent("Time"),Y=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-notifications-item",v.classes]),onClick:h[0]||(h[0]=(...le)=>v.handleClick&&v.handleClick(...le))},[t.renderSlot(a.$slots,"default",{},()=>[t.createVNode(Y,t.normalizeProps(t.guardReactiveProps(p.rowProps)),{default:t.withCtx(()=>[p.icon||p.customIcon||p.avatar||a.$slots.avatar?(t.openBlock(),t.createBlock(V,{key:0,span:"4",class:"ivu-notifications-item-icon"},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"avatar",{},()=>[p.icon?(t.openBlock(),t.createBlock(A,{key:0,icon:p.icon,shape:p.avatarShape,size:p.iconSize,style:t.normalizeStyle(v.iconStyle)},null,8,["icon","shape","size","style"])):p.customIcon?(t.openBlock(),t.createBlock(A,{key:1,"custom-icon":p.customIcon,shape:p.avatarShape,size:p.iconSize,style:t.normalizeStyle(v.iconStyle)},null,8,["custom-icon","shape","size","style"])):p.avatar?(t.openBlock(),t.createBlock(A,{key:2,src:p.avatar,shape:p.avatarShape,size:p.iconSize,style:t.normalizeStyle(v.iconStyle)},null,8,["src","shape","size","style"])):t.createCommentVNode("",!0)])]),_:3})):t.createCommentVNode("",!0),t.createVNode(V,{span:v.contentSpan,class:"ivu-notifications-item-content"},{default:t.withCtx(()=>[t.createElementVNode("div",mie,[p.title||a.$slots.title?(t.openBlock(),t.createElementBlock("h4",gie,[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)]),p.tag?(t.openBlock(),t.createElementBlock("div",vie,[t.createVNode(H,t.normalizeProps(t.guardReactiveProps(p.tagProps)),{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.tag),1)]),_:1},16)])):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0)]),p.content||a.$slots.content?(t.openBlock(),t.createElementBlock("div",yie,[t.renderSlot(a.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(p.content),1)])])):t.createCommentVNode("",!0),p.time||a.$slots.time?(t.openBlock(),t.createElementBlock("div",bie,[t.renderSlot(a.$slots,"time",{},()=>[t.createVNode(X,t.mergeProps({time:p.time},p.timeProps),null,16,["time"])])])):t.createCommentVNode("",!0)]),_:3},8,["span"])]),_:3},16)])],2)}var Q5=l(pie,[["render",xie]]);const Oie="ivu-tabs-tabpane",wie={name:"TabPane",inject:["TabsInstance"],props:{name:{type:String},label:{type:[String,Function],default:""},icon:{type:String},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:null},tab:{type:String},index:{type:Number},contextMenu:{type:Boolean,default:!1}},data(){return{prefixCls:Oie,show:!0,currentName:this.name,id:ee(6)}},computed:{contentStyle(){return{visibility:this.TabsInstance.activeKey!==this.currentName?"hidden":"visible"}}},methods:{updateNav(){this.TabsInstance.updateNav()},addPane(){const a=this.TabsInstance;a.paneList||(a.paneList=[]),a.paneList.push({id:this.id,pane:this})},removePane(){const a=this.TabsInstance;if(a.paneList&&a.paneList.length){const h=a.paneList.findIndex(p=>p.id===this.id);a.paneList.splice(h,1)}}},watch:{name(a){this.currentName=a,this.updateNav()},label(a){typeof a!="function"&&this.updateNav()},icon(){this.updateNav()},disabled(){this.updateNav()}},mounted(){this.addPane(),this.updateNav()},beforeUnmount(){this.removePane(),this.updateNav()}};function _ie(a,h,p,C,w,v){return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(w.prefixCls),style:t.normalizeStyle(v.contentStyle)},[t.renderSlot(a.$slots,"default")],6)),[[t.vShow,w.show]])}var r1=l(wie,[["render",_ie]]);const Sie={name:"NotificationTab",inject:["NotificationInstance"],components:{TabPane:r1,Icon:S},provide(){return{NotificationTabInstance:this}},props:{count:{type:Number},title:{type:String,required:!0},name:{type:String},emptyText:{type:String,default:""},emptyImage:{type:String,default:"https://file.iviewui.com/iview-pro/icon-no-message.svg"},loadedAll:{type:Boolean,default:!0},showLoadedAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},scrollToLoad:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearIcon:{type:Boolean,default:!0}},data(){return{customLabel:a=>a("div",[a("span",this.title),a(wy,{count:this.count})]),itemCount:0,itemList:[],id:ee(6)}},computed:{currentTitle(){const a=this.NotificationInstance.countType;if(a==="text"){const h=this.count?`(${this.count})`:"";return`${this.title} ${h}`}else if(a==="badge")return this.customLabel}},watch:{count:{handler(){this.NotificationInstance.handleGetCountAll()},immediate:!0}},methods:{handleGetTabBaseInfo(){return{name:this.name,title:this.title}},handleGetItems(){const a=this.itemList.map(h=>h.item);this.itemCount=a.length},handleItemClick(a){this.NotificationInstance.handleItemClick(this.handleGetTabBaseInfo(),a)},handleClear(){this.NotificationInstance.handleClear(this.handleGetTabBaseInfo())},handleLoadMore(){this.NotificationInstance.handleLoadMore(this.handleGetTabBaseInfo())},handleScroll(){if(!this.scrollToLoad)return;const a=this.$refs.scroll,h=a.scrollHeight-a.clientHeight-a.scrollTop;!this.loading&&h===0&&this.handleLoadMore()},addTab(){this.NotificationInstance.tabList.push({id:this.id,tab:this})},removeTab(){const a=this.NotificationInstance,h=a.tabList.findIndex(p=>p.id===this.id);a.tabList.splice(h,1)}},mounted(){this.addTab()},beforeUnmount(){this.removeTab()}},Cie={class:"ivu-notifications-container-list"},kie={key:0,class:"ivu-notifications-tab-empty"},Tie=["src"],Mie={class:"ivu-notifications-tab-empty-text"},Eie={class:"ivu-notifications-tab-loading"},Pie={key:0,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-show"},Aie={key:2,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-all"};function Rie(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("TabPane");return t.openBlock(),t.createBlock(V,{label:v.currentTitle,name:p.name,ref:"tab",class:"ivu-notifications-tab"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-notifications-container",onScroll:h[1]||(h[1]=(...H)=>v.handleScroll&&v.handleScroll(...H)),ref:"scroll"},[t.renderSlot(a.$slots,"top"),t.createElementVNode("div",Cie,[t.renderSlot(a.$slots,"default")]),!p.loading&&w.itemCount===0?(t.openBlock(),t.createElementBlock("div",kie,[t.renderSlot(a.$slots,"empty",{},()=>[p.emptyImage?(t.openBlock(),t.createElementBlock("img",{key:0,class:"ivu-notifications-tab-empty-img",src:p.emptyImage},null,8,Tie)):t.createCommentVNode("",!0),t.createElementVNode("div",Mie,t.toDisplayString(p.emptyText),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",Eie,[p.loading?(t.openBlock(),t.createElementBlock("div",Pie,[t.renderSlot(a.$slots,"loading",{},()=>[t.createVNode(A,{type:"ios-loading",class:"ivu-load-loop"}),t.createTextVNode(" "+t.toDisplayString(v.NotificationInstance.locale.loading),1)])])):p.loadedAll?p.showLoadedAll&&p.loadedAll?(t.openBlock(),t.createElementBlock("div",Aie,[t.renderSlot(a.$slots,"loaded-all",{},()=>[t.createTextVNode(t.toDisplayString(v.NotificationInstance.locale.loadedAll),1)])])):t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-more",onClick:h[0]||(h[0]=(...H)=>v.handleLoadMore&&v.handleLoadMore(...H))},[t.renderSlot(a.$slots,"load-more",{},()=>[t.createTextVNode(t.toDisplayString(v.NotificationInstance.locale.loadMore),1)])]))])],544),p.showClear&&w.itemCount!==0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-notifications-tab-clear",onClick:h[2]||(h[2]=(...H)=>v.handleClear&&v.handleClear(...H))},[t.renderSlot(a.$slots,"clear",{},()=>[p.showClearIcon?(t.openBlock(),t.createBlock(A,{key:0,type:"md-done-all"})):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(v.NotificationInstance.locale.clear)+t.toDisplayString(p.title),1)])])):t.createCommentVNode("",!0)]),_:3},8,["label","name"])}var H5=l(Sie,[["render",Rie]]);const Iie={name:"Trend",components:{Icon:S},props:{flag:{validator(a){return _(a,["up","down"])}},colorful:{type:Boolean,default:!0},reverseColor:{type:Boolean,default:!1},textColor:{type:Boolean,default:!1},showTitle:{type:[Boolean,String],default:!1}},computed:{classes(){return[{"ivu-trend-up":this.flag==="up","ivu-trend-down":this.flag==="down","ivu-trend-reverse-color":this.reverseColor,"ivu-trend-colorful":this.colorful,"ivu-trend-text-color":this.textColor}]},flagType(){return this.flag==="up"?"md-arrow-dropup":this.flag==="down"?"md-arrow-dropdown":""}}},Die={class:"ivu-trend-text"};function Nie(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-trend",v.classes])},[t.createElementVNode("span",Die,[t.renderSlot(a.$slots,"default")]),t.createVNode(A,{type:v.flagType,class:"ivu-trend-flag"},null,8,["type"])],2)}var OS=l(Iie,[["render",Nie]]);const $ie={name:"NumberInfo",components:{Trend:OS},props:{title:{type:String},subTitle:{type:String},total:{type:[String,Number]},subTotal:{type:[String,Number]},status:{validator(a){return _(a,["up","down"])}},gap:{type:[String,Number],default:8}},computed:{valueStyle(){return{"margin-top":this.gap+"px"}}}},Vie={class:"ivu-number-info"},Lie={key:0,class:"ivu-number-info-title"},Bie={key:1,class:"ivu-number-info-subTitle"},Uie={class:"ivu-number-info-total"},Fie={key:0,class:"ivu-number-info-subTotal"};function zie(a,h,p,C,w,v){const A=t.resolveComponent("Trend");return t.openBlock(),t.createElementBlock("div",Vie,[p.title||a.$slots.title?(t.openBlock(),t.createElementBlock("div",Lie,[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])])):t.createCommentVNode("",!0),p.subTitle||a.$slots.subTitle?(t.openBlock(),t.createElementBlock("div",Bie,[t.renderSlot(a.$slots,"subTitle",{},()=>[t.createTextVNode(t.toDisplayString(p.subTitle),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"ivu-number-info-value",style:t.normalizeStyle(v.valueStyle)},[t.createElementVNode("span",Uie,[t.renderSlot(a.$slots,"total",{},()=>[t.createTextVNode(t.toDisplayString(p.total),1)])]),p.subTotal||a.$slots.subTotal?(t.openBlock(),t.createElementBlock("span",Fie,[t.renderSlot(a.$slots,"subTotal",{},()=>[t.createVNode(A,{flag:p.status},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.subTotal),1)]),_:1},8,["flag"])])])):t.createCommentVNode("",!0)],4)])}var G5=l($ie,[["render",zie]]),Y5={exports:{}};/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(a){(function(h,p){a.exports?a.exports=p():h.numeral=p()})(J,function(){var h,p,C="2.0.6",w={},v={},A={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},V={currentLocale:A.currentLocale,zeroFormat:A.zeroFormat,nullFormat:A.nullFormat,defaultFormat:A.defaultFormat,scalePercentBy100:A.scalePercentBy100};function H(X,Y){this._input=X,this._value=Y}return h=function(X){var Y,le,xe,be;if(h.isNumeral(X))Y=X.value();else if(X===0||typeof X>"u")Y=0;else if(X===null||p.isNaN(X))Y=null;else if(typeof X=="string")if(V.zeroFormat&&X===V.zeroFormat)Y=0;else if(V.nullFormat&&X===V.nullFormat||!X.replace(/[^0-9]+/g,"").length)Y=null;else{for(le in w)if(be=typeof w[le].regexps.unformat=="function"?w[le].regexps.unformat():w[le].regexps.unformat,be&&X.match(be)){xe=w[le].unformat;break}xe=xe||h._.stringToNumber,Y=xe(X)}else Y=Number(X)||null;return new H(X,Y)},h.version=C,h.isNumeral=function(X){return X instanceof H},h._=p={numberToFormat:function(X,Y,le){var xe=v[h.options.currentLocale],be=!1,ge=!1,se=0,Ae="",$t=1e12,mt=1e9,xt=1e6,He=1e3,De="",Ke=!1,Ye,Xt,Wt,Mt,Ot,Rt,Gt;if(X=X||0,Xt=Math.abs(X),h._.includes(Y,"(")?(be=!0,Y=Y.replace(/[\(|\)]/g,"")):(h._.includes(Y,"+")||h._.includes(Y,"-"))&&(Ot=h._.includes(Y,"+")?Y.indexOf("+"):X<0?Y.indexOf("-"):-1,Y=Y.replace(/[\+|\-]/g,"")),h._.includes(Y,"a")&&(Ye=Y.match(/a(k|m|b|t)?/),Ye=Ye?Ye[1]:!1,h._.includes(Y," a")&&(Ae=" "),Y=Y.replace(new RegExp(Ae+"a[kmbt]?"),""),Xt>=$t&&!Ye||Ye==="t"?(Ae+=xe.abbreviations.trillion,X=X/$t):Xt<$t&&Xt>=mt&&!Ye||Ye==="b"?(Ae+=xe.abbreviations.billion,X=X/mt):Xt<mt&&Xt>=xt&&!Ye||Ye==="m"?(Ae+=xe.abbreviations.million,X=X/xt):(Xt<xt&&Xt>=He&&!Ye||Ye==="k")&&(Ae+=xe.abbreviations.thousand,X=X/He)),h._.includes(Y,"[.]")&&(ge=!0,Y=Y.replace("[.]",".")),Wt=X.toString().split(".")[0],Mt=Y.split(".")[1],Rt=Y.indexOf(","),se=(Y.split(".")[0].split(",")[0].match(/0/g)||[]).length,Mt?(h._.includes(Mt,"[")?(Mt=Mt.replace("]",""),Mt=Mt.split("["),De=h._.toFixed(X,Mt[0].length+Mt[1].length,le,Mt[1].length)):De=h._.toFixed(X,Mt.length,le),Wt=De.split(".")[0],h._.includes(De,".")?De=xe.delimiters.decimal+De.split(".")[1]:De="",ge&&Number(De.slice(1))===0&&(De="")):Wt=h._.toFixed(X,0,le),Ae&&!Ye&&Number(Wt)>=1e3&&Ae!==xe.abbreviations.trillion)switch(Wt=String(Number(Wt)/1e3),Ae){case xe.abbreviations.thousand:Ae=xe.abbreviations.million;break;case xe.abbreviations.million:Ae=xe.abbreviations.billion;break;case xe.abbreviations.billion:Ae=xe.abbreviations.trillion;break}if(h._.includes(Wt,"-")&&(Wt=Wt.slice(1),Ke=!0),Wt.length<se)for(var Et=se-Wt.length;Et>0;Et--)Wt="0"+Wt;return Rt>-1&&(Wt=Wt.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+xe.delimiters.thousands)),Y.indexOf(".")===0&&(Wt=""),Gt=Wt+De+(Ae||""),be?Gt=(be&&Ke?"(":"")+Gt+(be&&Ke?")":""):Ot>=0?Gt=Ot===0?(Ke?"-":"+")+Gt:Gt+(Ke?"-":"+"):Ke&&(Gt="-"+Gt),Gt},stringToNumber:function(X){var Y=v[V.currentLocale],le=X,xe={thousand:3,million:6,billion:9,trillion:12},be,ge,se;if(V.zeroFormat&&X===V.zeroFormat)ge=0;else if(V.nullFormat&&X===V.nullFormat||!X.replace(/[^0-9]+/g,"").length)ge=null;else{ge=1,Y.delimiters.decimal!=="."&&(X=X.replace(/\./g,"").replace(Y.delimiters.decimal,"."));for(be in xe)if(se=new RegExp("[^a-zA-Z]"+Y.abbreviations[be]+"(?:\\)|(\\"+Y.currency.symbol+")?(?:\\))?)?$"),le.match(se)){ge*=Math.pow(10,xe[be]);break}ge*=(X.split("-").length+Math.min(X.split("(").length-1,X.split(")").length-1))%2?1:-1,X=X.replace(/[^0-9\.]+/g,""),ge*=Number(X)}return ge},isNaN:function(X){return typeof X=="number"&&isNaN(X)},includes:function(X,Y){return X.indexOf(Y)!==-1},insert:function(X,Y,le){return X.slice(0,le)+Y+X.slice(le)},reduce:function(X,Y){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof Y!="function")throw new TypeError(Y+" is not a function");var le=Object(X),xe=le.length>>>0,be=0,ge;if(arguments.length===3)ge=arguments[2];else{for(;be<xe&&!(be in le);)be++;if(be>=xe)throw new TypeError("Reduce of empty array with no initial value");ge=le[be++]}for(;be<xe;be++)be in le&&(ge=Y(ge,le[be],be,le));return ge},multiplier:function(X){var Y=X.toString().split(".");return Y.length<2?1:Math.pow(10,Y[1].length)},correctionFactor:function(){var X=Array.prototype.slice.call(arguments);return X.reduce(function(Y,le){var xe=p.multiplier(le);return Y>xe?Y:xe},1)},toFixed:function(X,Y,le,xe){var be=X.toString().split("."),ge=Y-(xe||0),se,Ae,$t,mt;return be.length===2?se=Math.min(Math.max(be[1].length,ge),Y):se=ge,$t=Math.pow(10,se),mt=(le(X+"e+"+se)/$t).toFixed(se),xe>Y-se&&(Ae=new RegExp("\\.?0{1,"+(xe-(Y-se))+"}$"),mt=mt.replace(Ae,"")),mt}},h.options=V,h.formats=w,h.locales=v,h.locale=function(X){return X&&(V.currentLocale=X.toLowerCase()),V.currentLocale},h.localeData=function(X){if(!X)return v[V.currentLocale];if(X=X.toLowerCase(),!v[X])throw new Error("Unknown locale : "+X);return v[X]},h.reset=function(){for(var X in A)V[X]=A[X]},h.zeroFormat=function(X){V.zeroFormat=typeof X=="string"?X:null},h.nullFormat=function(X){V.nullFormat=typeof X=="string"?X:null},h.defaultFormat=function(X){V.defaultFormat=typeof X=="string"?X:"0.0"},h.register=function(X,Y,le){if(Y=Y.toLowerCase(),this[X+"s"][Y])throw new TypeError(Y+" "+X+" already registered.");return this[X+"s"][Y]=le,le},h.validate=function(X,Y){var le,xe,be,ge,se,Ae,$t,mt;if(typeof X!="string"&&(X+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",X)),X=X.trim(),X.match(/^\d+$/))return!0;if(X==="")return!1;try{$t=h.localeData(Y)}catch{$t=h.localeData(h.locale())}return be=$t.currency.symbol,se=$t.abbreviations,le=$t.delimiters.decimal,$t.delimiters.thousands==="."?xe="\\.":xe=$t.delimiters.thousands,mt=X.match(/^[^\d]+/),mt!==null&&(X=X.substr(1),mt[0]!==be)||(mt=X.match(/[^\d]+$/),mt!==null&&(X=X.slice(0,-1),mt[0]!==se.thousand&&mt[0]!==se.million&&mt[0]!==se.billion&&mt[0]!==se.trillion))?!1:(Ae=new RegExp(xe+"{2}"),X.match(/[^\d.,]/g)?!1:(ge=X.split(le),ge.length>2?!1:ge.length<2?!!ge[0].match(/^\d+.*\d$/)&&!ge[0].match(Ae):ge[0].length===1?!!ge[0].match(/^\d+$/)&&!ge[0].match(Ae)&&!!ge[1].match(/^\d+$/):!!ge[0].match(/^\d+.*\d$/)&&!ge[0].match(Ae)&&!!ge[1].match(/^\d+$/)))},h.fn=H.prototype={clone:function(){return h(this)},format:function(X,Y){var le=this._value,xe=X||V.defaultFormat,be,ge,se;if(Y=Y||Math.round,le===0&&V.zeroFormat!==null)ge=V.zeroFormat;else if(le===null&&V.nullFormat!==null)ge=V.nullFormat;else{for(be in w)if(xe.match(w[be].regexps.format)){se=w[be].format;break}se=se||h._.numberToFormat,ge=se(le,xe,Y)}return ge},value:function(){return this._value},input:function(){return this._input},set:function(X){return this._value=Number(X),this},add:function(X){var Y=p.correctionFactor.call(null,this._value,X);function le(xe,be,ge,se){return xe+Math.round(Y*be)}return this._value=p.reduce([this._value,X],le,0)/Y,this},subtract:function(X){var Y=p.correctionFactor.call(null,this._value,X);function le(xe,be,ge,se){return xe-Math.round(Y*be)}return this._value=p.reduce([X],le,Math.round(this._value*Y))/Y,this},multiply:function(X){function Y(le,xe,be,ge){var se=p.correctionFactor(le,xe);return Math.round(le*se)*Math.round(xe*se)/Math.round(se*se)}return this._value=p.reduce([this._value,X],Y,1),this},divide:function(X){function Y(le,xe,be,ge){var se=p.correctionFactor(le,xe);return Math.round(le*se)/Math.round(xe*se)}return this._value=p.reduce([this._value,X],Y),this},difference:function(X){return Math.abs(h(this._value).subtract(X).value())}},h.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(X){var Y=X%10;return~~(X%100/10)===1?"th":Y===1?"st":Y===2?"nd":Y===3?"rd":"th"},currency:{symbol:"$"}}),function(){h.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(X,Y,le){var xe=h._.includes(Y," BPS")?" ":"",be;return X=X*1e4,Y=Y.replace(/\s?BPS/,""),be=h._.numberToFormat(X,Y,le),h._.includes(be,")")?(be=be.split(""),be.splice(-1,0,xe+"BPS"),be=be.join("")):be=be+xe+"BPS",be},unformat:function(X){return+(h._.stringToNumber(X)*1e-4).toFixed(15)}})}(),function(){var X={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},Y={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},le=X.suffixes.concat(Y.suffixes.filter(function(be){return X.suffixes.indexOf(be)<0})),xe=le.join("|");xe="("+xe.replace("B","B(?!PS)")+")",h.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(xe)},format:function(be,ge,se){var Ae,$t=h._.includes(ge,"ib")?Y:X,mt=h._.includes(ge," b")||h._.includes(ge," ib")?" ":"",xt,He,De;for(ge=ge.replace(/\s?i?b/,""),xt=0;xt<=$t.suffixes.length;xt++)if(He=Math.pow($t.base,xt),De=Math.pow($t.base,xt+1),be===null||be===0||be>=He&&be<De){mt+=$t.suffixes[xt],He>0&&(be=be/He);break}return Ae=h._.numberToFormat(be,ge,se),Ae+mt},unformat:function(be){var ge=h._.stringToNumber(be),se,Ae;if(ge){for(se=X.suffixes.length-1;se>=0;se--){if(h._.includes(be,X.suffixes[se])){Ae=Math.pow(X.base,se);break}if(h._.includes(be,Y.suffixes[se])){Ae=Math.pow(Y.base,se);break}}ge*=Ae||1}return ge}})}(),function(){h.register("format","currency",{regexps:{format:/(\$)/},format:function(X,Y,le){var xe=h.locales[h.options.currentLocale],be={before:Y.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:Y.match(/([\+|\-|\)|\s|\$]*)$/)[0]},ge,se,Ae;for(Y=Y.replace(/\s?\$\s?/,""),ge=h._.numberToFormat(X,Y,le),X>=0?(be.before=be.before.replace(/[\-\(]/,""),be.after=be.after.replace(/[\-\)]/,"")):X<0&&!h._.includes(be.before,"-")&&!h._.includes(be.before,"(")&&(be.before="-"+be.before),Ae=0;Ae<be.before.length;Ae++)switch(se=be.before[Ae],se){case"$":ge=h._.insert(ge,xe.currency.symbol,Ae);break;case" ":ge=h._.insert(ge," ",Ae+xe.currency.symbol.length-1);break}for(Ae=be.after.length-1;Ae>=0;Ae--)switch(se=be.after[Ae],se){case"$":ge=Ae===be.after.length-1?ge+xe.currency.symbol:h._.insert(ge,xe.currency.symbol,-(be.after.length-(1+Ae)));break;case" ":ge=Ae===be.after.length-1?ge+" ":h._.insert(ge," ",-(be.after.length-(1+Ae)+xe.currency.symbol.length-1));break}return ge}})}(),function(){h.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(X,Y,le){var xe,be=typeof X=="number"&&!h._.isNaN(X)?X.toExponential():"0e+0",ge=be.split("e");return Y=Y.replace(/e[\+|\-]{1}0/,""),xe=h._.numberToFormat(Number(ge[0]),Y,le),xe+"e"+ge[1]},unformat:function(X){var Y=h._.includes(X,"e+")?X.split("e+"):X.split("e-"),le=Number(Y[0]),xe=Number(Y[1]);xe=h._.includes(X,"e-")?xe*=-1:xe;function be(ge,se,Ae,$t){var mt=h._.correctionFactor(ge,se),xt=ge*mt*(se*mt)/(mt*mt);return xt}return h._.reduce([le,Math.pow(10,xe)],be,1)}})}(),function(){h.register("format","ordinal",{regexps:{format:/(o)/},format:function(X,Y,le){var xe=h.locales[h.options.currentLocale],be,ge=h._.includes(Y," o")?" ":"";return Y=Y.replace(/\s?o/,""),ge+=xe.ordinal(X),be=h._.numberToFormat(X,Y,le),be+ge}})}(),function(){h.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(X,Y,le){var xe=h._.includes(Y," %")?" ":"",be;return h.options.scalePercentBy100&&(X=X*100),Y=Y.replace(/\s?\%/,""),be=h._.numberToFormat(X,Y,le),h._.includes(be,")")?(be=be.split(""),be.splice(-1,0,xe+"%"),be=be.join("")):be=be+xe+"%",be},unformat:function(X){var Y=h._.stringToNumber(X);return h.options.scalePercentBy100?Y*.01:Y}})}(),function(){h.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(X,Y,le){var xe=Math.floor(X/60/60),be=Math.floor((X-xe*60*60)/60),ge=Math.round(X-xe*60*60-be*60);return xe+":"+(be<10?"0"+be:be)+":"+(ge<10?"0"+ge:ge)},unformat:function(X){var Y=X.split(":"),le=0;return Y.length===3?(le=le+Number(Y[0])*60*60,le=le+Number(Y[1])*60,le=le+Number(Y[2])):Y.length===2&&(le=le+Number(Y[0])*60,le=le+Number(Y[1])),Number(le)}})}(),h})})(Y5);var Xie=Y5.exports;const Wie={name:"Numeral",emits:["on-change"],props:{value:{type:[String,Number]},format:{type:String},prefix:{type:[String,Number]},suffix:{type:[String,Number]}},data(){return{currentValue:""}},watch:{value(){this.init()},format(){this.init()}},methods:{init(){if(this.value!==void 0){const a=Xie(this.value);this.format?this.currentValue=a.format(this.format):this.currentValue=a.value(),this.$emit("on-change",this.currentValue)}},getValue(){return this.currentValue}},mounted(){this.init()}},Qie={class:"ivu-numeral"};function Hie(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("span",Qie,[t.renderSlot(a.$slots,"prefix",{},()=>[t.createTextVNode(t.toDisplayString(p.prefix),1)]),t.createTextVNode(t.toDisplayString(w.currentValue),1),t.renderSlot(a.$slots,"suffix",{},()=>[t.createTextVNode(t.toDisplayString(p.suffix),1)])])}var j5=l(Wie,[["render",Hie]]);const Gie="ivu-select-group",Yie={name:"OptionGroup",props:{label:{type:String,default:""}},provide(){return{OptionGroupInstance:this}},inject:["SelectInstance"],data(){return{prefixCls:Gie,hidden:!1,id:ee(6),optionList:[]}},computed:{show(){return this.optionList.find(a=>a.proxy&&a.proxy.isShow)}}};function jie(a,h,p,C,w,v){return t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([w.prefixCls+"-wrap"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-title"])},t.toDisplayString(p.label),3),t.createElementVNode("ul",null,[t.createElementVNode("li",{class:t.normalizeClass([w.prefixCls]),ref:"options"},[t.renderSlot(a.$slots,"default")],2)])],2)),[[t.vShow,v.show]])}var q5=l(Yie,[["render",jie]]);const wS="ivu-page";function qie(a){return/^[1-9][0-9]*$/.test(a+"")}const Zie={name:"PageOption",mixins:[ji],components:{iSelect:ls,iOption:Pn},emits:["on-size","on-page"],props:{pageSizeOpts:Array,showSizer:Boolean,showElevator:Boolean,current:Number,_current:Number,pageSize:Number,allPages:Number,isSmall:Boolean,placement:String,transfer:Boolean,disabled:Boolean,eventsEnabled:Boolean},data(){return{currentPageSize:this.pageSize}},watch:{pageSize(a){this.currentPageSize=a}},computed:{size(){return this.isSmall?"small":"default"},optsClasses(){return[`${wS}-options`]},sizerClasses(){return[`${wS}-options-sizer`]},ElevatorClasses(){return[`${wS}-options-elevator`]}},methods:{changeSize(){this.$emit("on-size",this.currentPageSize)},changePage(a){let h=a.target.value.trim(),p=0;if(qie(h)){if(h=Number(h),h!=this.current){const C=this.allPages;h>C?p=C:p=h}}else p=1;p&&(this.$emit("on-page",p),a.target.value=p)}}},Kie=["value","disabled"];function Jie(a,h,p,C,w,v){const A=t.resolveComponent("i-option"),V=t.resolveComponent("i-select");return p.showSizer||p.showElevator?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.optsClasses)},[p.showSizer?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.sizerClasses)},[t.createVNode(V,{modelValue:w.currentPageSize,"onUpdate:modelValue":h[0]||(h[0]=H=>w.currentPageSize=H),size:v.size,placement:p.placement,transfer:p.transfer,disabled:p.disabled,eventsEnabled:p.eventsEnabled,onOnChange:v.changeSize},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.pageSizeOpts,H=>(t.openBlock(),t.createBlock(A,{key:H,value:H,style:{"text-align":"center"}},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(H)+" "+t.toDisplayString(a.t("i.page.page")),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","size","placement","transfer","disabled","eventsEnabled","onOnChange"])],2)):t.createCommentVNode("",!0),p.showElevator?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(v.ElevatorClasses)},[t.createTextVNode(t.toDisplayString(a.t("i.page.goto"))+" ",1),t.createElementVNode("input",{type:"text",value:p._current,autocomplete:"off",spellcheck:"false",disabled:p.disabled,onKeyup:h[1]||(h[1]=t.withKeys((...H)=>v.changePage&&v.changePage(...H),["enter"]))},null,40,Kie),t.createTextVNode(" "+t.toDisplayString(a.t("i.page.p")),1)],2)):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0)}var ene=l(Zie,[["render",Jie]]);const Gr="ivu-page",tne={name:"Page",mixins:[ji],components:{Options:ene},emits:["update:modelValue","on-change","on-prev","on-next","on-page-size-change"],props:{modelValue:{type:Number,default:1},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageSizeOpts:{type:Array,default(){return[10,20,30,40]}},placement:{validator(a){return _(a,["top","bottom"])},default:"bottom"},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},size:{validator(a){return _(a,["small","default"])}},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showSizer:{type:Boolean,default:!1},className:{type:String},styles:{type:Object},prevText:{type:String,default:""},nextText:{type:String,default:""},disabled:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:Gr,currentPage:this.modelValue,currentPageSize:this.pageSize}},watch:{total(a){let h=Math.ceil(a/this.currentPageSize);h<this.currentPage&&(this.currentPage=h===0?1:h)},modelValue(a){this.currentPage=a},pageSize(a){this.currentPageSize=a}},computed:{isSmall(){return this.size==="small"},allPages(){const a=Math.ceil(this.total/this.currentPageSize);return a===0?1:a},simpleWrapClasses(){return[`${Gr}`,`${Gr}-simple`,{[`${this.className}`]:!!this.className}]},simplePagerClasses(){return`${Gr}-simple-pager`},wrapClasses(){return[`${Gr}`,{[`${this.className}`]:!!this.className,[`${Gr}-with-disabled`]:this.disabled,mini:this.size==="small"}]},prevClasses(){return[`${Gr}-prev`,{[`${Gr}-disabled`]:this.currentPage===1||this.disabled,[`${Gr}-custom-text`]:this.prevText!==""}]},nextClasses(){return[`${Gr}-next`,{[`${Gr}-disabled`]:this.currentPage===this.allPages||this.disabled,[`${Gr}-custom-text`]:this.nextText!==""}]},firstPageClasses(){return[`${Gr}-item`,{[`${Gr}-item-active`]:this.currentPage===1}]},lastPageClasses(){return[`${Gr}-item`,{[`${Gr}-item-active`]:this.currentPage===this.allPages}]}},methods:{changePage(a){this.disabled||this.currentPage!=a&&(this.currentPage=a,this.$emit("update:modelValue",a),this.$emit("on-change",a))},prev(){if(this.disabled)return;const a=this.currentPage;if(a<=1)return!1;this.changePage(a-1),this.$emit("on-prev",a-1)},next(){if(this.disabled)return;const a=this.currentPage;if(a>=this.allPages)return!1;this.changePage(a+1),this.$emit("on-next",a+1)},fastPrev(){if(this.disabled)return;const a=this.currentPage-5;a>0?this.changePage(a):this.changePage(1)},fastNext(){if(this.disabled)return;const a=this.currentPage+5;a>this.allPages?this.changePage(this.allPages):this.changePage(a)},onSize(a){this.disabled||(this.currentPageSize=a,this.$emit("on-page-size-change",a),this.changePage(1))},onPage(a){this.disabled||this.changePage(a)},keyDown(a){const h=a.keyCode;h>=48&&h<=57||h>=96&&h<=105||h===8||h===37||h===39||a.preventDefault()},keyUp(a){const h=a.keyCode,p=parseInt(a.target.value);if(h===38)this.prev();else if(h===40)this.next();else if(h===13){let C=1;p>this.allPages?C=this.allPages:p<=0||!p?C=1:C=p,a.target.value=C,this.changePage(C)}}}},ine=["title"],nne=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"})],-1)],rne=["title"],sne=["value","disabled"],one=t.createElementVNode("span",null,"/",-1),ane=["title"],lne=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"})],-1)],cne=["title"],hne={key:1,class:"ivu-icon ivu-icon-ios-arrow-back"},une=[t.createElementVNode("a",null,"1",-1)],dne=["title"],fne=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"}),t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],pne=["title"],mne=["title"],gne=["title"],vne=["title"],yne=["title"],bne=["title"],xne=["title"],One=["title"],wne=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"}),t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],_ne=["title"],Sne=["title"],Cne={key:1,class:"ivu-icon ivu-icon-ios-arrow-forward"};function kne(a,h,p,C,w,v){const A=t.resolveComponent("Options");return p.simple?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass(v.simpleWrapClasses),style:t.normalizeStyle(p.styles)},[t.createElementVNode("li",{title:a.t("i.page.prev"),class:t.normalizeClass(v.prevClasses),onClick:h[0]||(h[0]=(...V)=>v.prev&&v.prev(...V))},nne,10,ine),t.createElementVNode("div",{class:t.normalizeClass(v.simplePagerClasses),title:w.currentPage+"/"+v.allPages},[t.createElementVNode("input",{type:"text",value:w.currentPage,autocomplete:"off",spellcheck:"false",disabled:p.disabled,onKeydown:h[1]||(h[1]=(...V)=>v.keyDown&&v.keyDown(...V)),onKeyup:h[2]||(h[2]=(...V)=>v.keyUp&&v.keyUp(...V)),onChange:h[3]||(h[3]=(...V)=>v.keyUp&&v.keyUp(...V))},null,40,sne),one,t.createTextVNode(" "+t.toDisplayString(v.allPages),1)],10,rne),t.createElementVNode("li",{title:a.t("i.page.next"),class:t.normalizeClass(v.nextClasses),onClick:h[4]||(h[4]=(...V)=>v.next&&v.next(...V))},lne,10,ane)],6)):(t.openBlock(),t.createElementBlock("ul",{key:1,class:t.normalizeClass(v.wrapClasses),style:t.normalizeStyle(p.styles)},[p.showTotal?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([w.prefixCls+"-total"])},[t.renderSlot(a.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(a.t("i.page.total"))+" "+t.toDisplayString(p.total)+" ",1),p.total<=1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(a.t("i.page.item")),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(a.t("i.page.items")),1)],64))])],2)):t.createCommentVNode("",!0),t.createElementVNode("li",{title:a.t("i.page.prev"),class:t.normalizeClass(v.prevClasses),onClick:h[5]||(h[5]=(...V)=>v.prev&&v.prev(...V))},[t.createElementVNode("a",null,[p.prevText!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(p.prevText),1)],64)):(t.openBlock(),t.createElementBlock("i",hne))])],10,cne),t.createElementVNode("li",{title:"1",class:t.normalizeClass(v.firstPageClasses),onClick:h[6]||(h[6]=V=>v.changePage(1))},une,2),w.currentPage>5?(t.openBlock(),t.createElementBlock("li",{key:1,title:a.t("i.page.prev5"),class:t.normalizeClass([w.prefixCls+"-item-jump-prev"]),onClick:h[7]||(h[7]=(...V)=>v.fastPrev&&v.fastPrev(...V))},fne,10,dne)):t.createCommentVNode("",!0),w.currentPage===5?(t.openBlock(),t.createElementBlock("li",{key:2,title:w.currentPage-3,class:t.normalizeClass([w.prefixCls+"-item"]),onClick:h[8]||(h[8]=V=>v.changePage(w.currentPage-3))},[t.createElementVNode("a",null,t.toDisplayString(w.currentPage-3),1)],10,pne)):t.createCommentVNode("",!0),w.currentPage-2>1?(t.openBlock(),t.createElementBlock("li",{key:3,title:w.currentPage-2,class:t.normalizeClass([w.prefixCls+"-item"]),onClick:h[9]||(h[9]=V=>v.changePage(w.currentPage-2))},[t.createElementVNode("a",null,t.toDisplayString(w.currentPage-2),1)],10,mne)):t.createCommentVNode("",!0),w.currentPage-1>1?(t.openBlock(),t.createElementBlock("li",{key:4,title:w.currentPage-1,class:t.normalizeClass([w.prefixCls+"-item"]),onClick:h[10]||(h[10]=V=>v.changePage(w.currentPage-1))},[t.createElementVNode("a",null,t.toDisplayString(w.currentPage-1),1)],10,gne)):t.createCommentVNode("",!0),w.currentPage!=1&&w.currentPage!=v.allPages?(t.openBlock(),t.createElementBlock("li",{key:5,title:w.currentPage,class:t.normalizeClass([w.prefixCls+"-item",w.prefixCls+"-item-active"])},[t.createElementVNode("a",null,t.toDisplayString(w.currentPage),1)],10,vne)):t.createCommentVNode("",!0),w.currentPage+1<v.allPages?(t.openBlock(),t.createElementBlock("li",{key:6,title:w.currentPage+1,class:t.normalizeClass([w.prefixCls+"-item"]),onClick:h[11]||(h[11]=V=>v.changePage(w.currentPage+1))},[t.createElementVNode("a",null,t.toDisplayString(w.currentPage+1),1)],10,yne)):t.createCommentVNode("",!0),w.currentPage+2<v.allPages?(t.openBlock(),t.createElementBlock("li",{key:7,title:w.currentPage+2,class:t.normalizeClass([w.prefixCls+"-item"]),onClick:h[12]||(h[12]=V=>v.changePage(w.currentPage+2))},[t.createElementVNode("a",null,t.toDisplayString(w.currentPage+2),1)],10,bne)):t.createCommentVNode("",!0),v.allPages-w.currentPage===4?(t.openBlock(),t.createElementBlock("li",{key:8,title:w.currentPage+3,class:t.normalizeClass([w.prefixCls+"-item"]),onClick:h[13]||(h[13]=V=>v.changePage(w.currentPage+3))},[t.createElementVNode("a",null,t.toDisplayString(w.currentPage+3),1)],10,xne)):t.createCommentVNode("",!0),v.allPages-w.currentPage>=5?(t.openBlock(),t.createElementBlock("li",{key:9,title:a.t("i.page.next5"),class:t.normalizeClass([w.prefixCls+"-item-jump-next"]),onClick:h[14]||(h[14]=(...V)=>v.fastNext&&v.fastNext(...V))},wne,10,One)):t.createCommentVNode("",!0),v.allPages>1?(t.openBlock(),t.createElementBlock("li",{key:10,title:v.allPages,class:t.normalizeClass(v.lastPageClasses),onClick:h[15]||(h[15]=V=>v.changePage(v.allPages))},[t.createElementVNode("a",null,t.toDisplayString(v.allPages),1)],10,_ne)):t.createCommentVNode("",!0),t.createElementVNode("li",{title:a.t("i.page.next"),class:t.normalizeClass(v.nextClasses),onClick:h[16]||(h[16]=(...V)=>v.next&&v.next(...V))},[t.createElementVNode("a",null,[p.nextText!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(p.nextText),1)],64)):(t.openBlock(),t.createElementBlock("i",Cne))])],10,Sne),t.createVNode(A,{"show-sizer":p.showSizer,"page-size":w.currentPageSize,"page-size-opts":p.pageSizeOpts,placement:p.placement,transfer:p.transfer,"show-elevator":p.showElevator,_current:w.currentPage,current:w.currentPage,disabled:p.disabled,"all-pages":v.allPages,"is-small":v.isSmall,eventsEnabled:p.eventsEnabled,onOnSize:v.onSize,onOnPage:v.onPage},null,8,["show-sizer","page-size","page-size-opts","placement","transfer","show-elevator","_current","current","disabled","all-pages","is-small","eventsEnabled","onOnSize","onOnPage"])],6))}var Z5=l(tne,[["render",kne]]);const Tne={name:"PageHeader",components:{Breadcrumb:A_,BreadcrumbItem:R_,Divider:zy,Icon:S,Tabs:i1,TabPane:r1},emits:["on-tab-change","on-back"],props:{title:{type:String},back:{type:Boolean,default:!1},logo:{type:String},action:{type:String},content:{type:String},extra:{type:String},breadcrumbList:{type:Array},hiddenBreadcrumb:{type:Boolean,default:!1},tabList:{type:Array},tabActiveKey:{type:String},wide:{type:Boolean,default:!1}},computed:{classes(){return{"ivu-page-header-wide":this.wide}}},methods:{handleTabChange(a){const h=this.tabList.find(p=>p.name===a);this.$emit("on-tab-change",JSON.parse(JSON.stringify(h)))},handleBack(){this.$emit("on-back")}}},Mne={key:0,class:"ivu-page-header-breadcrumb"},Ene={class:"ivu-page-header-detail"},Pne={key:1,class:"ivu-page-header-logo"},Ane=["src"],Rne={class:"ivu-page-header-main"},Ine={class:"ivu-page-header-row"},Dne={key:1,class:"ivu-page-header-title"},Nne={key:2,class:"ivu-page-header-action"},$ne={class:"ivu-page-header-row"},Vne={key:0,class:"ivu-page-header-content"},Lne={key:1,class:"ivu-page-header-extra"},Bne={key:1,class:"ivu-page-header-tabs"};function Une(a,h,p,C,w,v){const A=t.resolveComponent("BreadcrumbItem"),V=t.resolveComponent("Breadcrumb"),H=t.resolveComponent("Icon"),X=t.resolveComponent("Divider"),Y=t.resolveComponent("TabPane"),le=t.resolveComponent("Tabs");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-page-header",v.classes])},[a.$slots.breadcrumb||!p.hiddenBreadcrumb?(t.openBlock(),t.createElementBlock("div",Mne,[t.renderSlot(a.$slots,"breadcrumb",{},()=>[t.createVNode(V,null,{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.breadcrumbList,(xe,be)=>(t.openBlock(),t.createBlock(A,{key:be,to:xe.to,replace:xe.replace,target:xe.target},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(xe.title),1)]),_:2},1032,["to","replace","target"]))),128))]),_:1})])])):t.createCommentVNode("",!0),t.createElementVNode("div",Ene,[p.back||a.$slots.back?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:h[0]||(h[0]=(...xe)=>v.handleBack&&v.handleBack(...xe))},[t.renderSlot(a.$slots,"back",{},()=>[t.createVNode(H,{type:"md-arrow-back"})]),t.createVNode(X,{type:"vertical"})])):t.createCommentVNode("",!0),p.logo||a.$slots.logo?(t.openBlock(),t.createElementBlock("div",Pne,[t.renderSlot(a.$slots,"logo",{},()=>[t.createElementVNode("img",{src:p.logo},null,8,Ane)])])):t.createCommentVNode("",!0),t.createElementVNode("div",Rne,[t.createElementVNode("div",Ine,[p.back||a.$slots.back?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:h[1]||(h[1]=(...xe)=>v.handleBack&&v.handleBack(...xe))},[t.renderSlot(a.$slots,"back",{},()=>[t.createVNode(H,{type:"md-arrow-back"})]),t.createVNode(X,{type:"vertical"})])):t.createCommentVNode("",!0),p.title||a.$slots.title?(t.openBlock(),t.createElementBlock("div",Dne,[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])])):t.createCommentVNode("",!0),p.action||a.$slots.action?(t.openBlock(),t.createElementBlock("div",Nne,[t.renderSlot(a.$slots,"action",{},()=>[t.createTextVNode(t.toDisplayString(p.action),1)])])):t.createCommentVNode("",!0)]),t.createElementVNode("div",$ne,[p.content||a.$slots.content?(t.openBlock(),t.createElementBlock("div",Vne,[t.renderSlot(a.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(p.content),1)])])):t.createCommentVNode("",!0),p.extra||a.$slots.extra?(t.openBlock(),t.createElementBlock("div",Lne,[t.renderSlot(a.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(p.extra),1)])])):t.createCommentVNode("",!0)])])]),p.tabList&&p.tabList.length?(t.openBlock(),t.createElementBlock("div",Bne,[t.createVNode(le,{animated:!1,"model-value":p.tabActiveKey,onOnClick:v.handleTabChange},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.tabList,(xe,be)=>(t.openBlock(),t.createBlock(Y,{key:be,label:xe.label,name:xe.name},null,8,["label","name"]))),128))]),_:1},8,["model-value","onOnClick"])])):t.createCommentVNode("",!0)],2)}var K5=l(Tne,[["render",Une]]);const Fne=t.defineComponent({name:"CollapseTransition",props:{ready:{type:Boolean,default:!0}},setup(a){return{on:{beforeEnter(h){!a.ready||(Z(h,"collapse-transition"),h.dataset||(h.dataset={}),h.dataset.oldPaddingTop=h.style.paddingTop,h.dataset.oldPaddingBottom=h.style.paddingBottom,h.style.height="0",h.style.paddingTop=0,h.style.paddingBottom=0)},enter(h){!a.ready||(h.dataset.oldOverflow=h.style.overflow,h.scrollHeight!==0?(h.style.height=h.scrollHeight+"px",h.style.paddingTop=h.dataset.oldPaddingTop,h.style.paddingBottom=h.dataset.oldPaddingBottom):(h.style.height="",h.style.paddingTop=h.dataset.oldPaddingTop,h.style.paddingBottom=h.dataset.oldPaddingBottom),h.style.overflow="hidden")},afterEnter(h){!a.ready||(te(h,"collapse-transition"),h.style.height="",h.style.overflow=h.dataset.oldOverflow)},beforeLeave(h){!a.ready||(h.dataset||(h.dataset={}),h.dataset.oldPaddingTop=h.style.paddingTop,h.dataset.oldPaddingBottom=h.style.paddingBottom,h.dataset.oldOverflow=h.style.overflow,h.style.height=h.scrollHeight+"px",h.style.overflow="hidden")},leave(h){!a.ready||h.scrollHeight!==0&&(Z(h,"collapse-transition"),h.style.height=0,h.style.paddingTop=0,h.style.paddingBottom=0)},afterLeave(h){!a.ready||(te(h,"collapse-transition"),h.style.height="",h.style.overflow=h.dataset.oldOverflow,h.style.paddingTop=h.dataset.oldPaddingTop,h.style.paddingBottom=h.dataset.oldPaddingBottom)}}}}});function zne(a,h,p,C,w,v){return t.openBlock(),t.createBlock(t.Transition,t.toHandlers(a.on),{default:t.withCtx(()=>[t.renderSlot(a.$slots,"default")]),_:3},16)}var _S=l(Fne,[["render",zne]]);const Dm="ivu-collapse",Xne={name:"Panel",components:{Icon:S,CollapseTransition:_S},inject:["CollapseInstance"],props:{name:{type:String},hideArrow:{type:Boolean,default:!1}},data(){return{index:0,mounted:!1}},computed:{itemClasses(){return[`${Dm}-item`,{[`${Dm}-item-active`]:this.isActive}]},headerClasses(){return`${Dm}-header`},contentClasses(){return`${Dm}-content`},boxClasses(){return`${Dm}-content-box`},isActive(){const a=this.CollapseInstance.getActiveKey(),h=this.name||this.index.toString();return a.indexOf(h)>-1}},methods:{setIndex(){this.index=this.CollapseInstance.panelCount+1,this.CollapseInstance.panelCount=this.index},toggle(){this.CollapseInstance.toggle({name:this.name||this.index,isActive:this.isActive})}},mounted(){this.setIndex(),this.mounted=!0}};function Wne(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("collapse-transition");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.itemClasses)},[t.createElementVNode("div",{class:t.normalizeClass(v.headerClasses),onClick:h[0]||(h[0]=(...H)=>v.toggle&&v.toggle(...H))},[p.hideArrow?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(A,{key:0,type:"ios-arrow-forward"})),t.renderSlot(a.$slots,"default")],2),w.mounted?(t.openBlock(),t.createBlock(V,{key:0},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(v.contentClasses)},[t.createElementVNode("div",{class:t.normalizeClass(v.boxClasses)},[t.renderSlot(a.$slots,"content")],2)],2),[[t.vShow,v.isActive]])]),_:3})):t.createCommentVNode("",!0)],2)}var J5=l(Xne,[["render",Wne]]);const eR={name:"Paragraph",mixins:[Cm],render(){return t.h(Ky,{...this.$props,component:"div",...this.commonEvents()},this.commonSlots())}},tR={name:"Password",mixins:[um],data(){return{className:"ivu-login-password",prefix:"ios-lock-outline",placeholder:"",type:"password"}}},Cc="ivu-poptip",Qne={name:"Poptip",mixins:[cA,ji],emits:["on-ok","on-cancel"],directives:{clickOutside:z_},components:{iButton:cs},props:{trigger:{validator(a){return _(a,["click","focus","hover"])},default:"click"},placement:{validator(a){return _(a,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},title:{type:[String,Number]},content:{type:[String,Number],default:""},width:{type:[String,Number]},confirm:{type:Boolean,default:!1},okText:{type:String},cancelText:{type:String},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}},popperClass:{type:String},wordWrap:{type:Boolean,default:!1},padding:{type:String},disabled:{type:Boolean,default:!1},capture:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return a.$VIEWUI?a.$VIEWUI.capture:!1}},transferClassName:{type:String}},data(){return{prefixCls:Cc,showTitle:!0,isInput:!1,disableCloseUnderTransfer:!1,tIndex:this.handleGetIndex()}},computed:{classes(){return[`${Cc}`,{[`${Cc}-confirm`]:this.confirm}]},popperClasses(){return[`${Cc}-popper`,{[`${Cc}-confirm`]:this.transfer&&this.confirm,[`${this.popperClass}`]:!!this.popperClass,[Cc+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]},styles(){let a={};return this.width&&(a.width=`${this.width}px`),this.transfer&&(a["z-index"]=1060+this.tIndex),a},localeOkText(){return this.okText===void 0?this.t("i.poptip.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.poptip.cancelText"):this.cancelText},contentClasses(){return[`${Cc}-body-content`,{[`${Cc}-body-content-word-wrap`]:this.wordWrap}]},contentPaddingStyle(){const a={};return this.padding!==""&&(a.padding=this.padding),a}},methods:{handleClick(){if(!this.disabled){if(this.confirm)return this.visible=!this.visible,!0;if(this.trigger!=="click")return!1;this.visible=!this.visible}},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(this.confirm)return this.visible=!1,!0;if(this.trigger!=="click")return!1;this.visible=!1},handleFocus(a=!0){if(!this.disabled){if(this.trigger!=="focus"||this.confirm||this.isInput&&!a)return!1;this.visible=!0}},handleBlur(a=!0){if(this.trigger!=="focus"||this.confirm||this.isInput&&!a)return!1;this.visible=!1},handleMouseenter(){if(!this.disabled){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!0},100)}},handleMouseleave(){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!1},100))},cancel(){this.visible=!1,this.$emit("on-cancel")},ok(){this.visible=!1,this.$emit("on-ok")},getInputChildren(){const a=this.$refs.reference.querySelectorAll("input"),h=this.$refs.reference.querySelectorAll("textarea");let p=null;return a.length?p=a[0]:h.length&&(p=h[0]),p},handleGetIndex(){return We(),Oe},handleIndexIncrease(){this.tIndex=this.handleGetIndex()}},mounted(){this.confirm||(this.showTitle=this.$slots.title!==void 0||this.title),this.trigger==="focus"&&t.nextTick(()=>{const a=this.getInputChildren();a&&(this.isInput=!0,a.addEventListener("focus",this.handleFocus,!1),a.addEventListener("blur",this.handleBlur,!1))})},beforeUnmount(){const a=this.getInputChildren();a&&(a.removeEventListener("focus",this.handleFocus,!1),a.removeEventListener("blur",this.handleBlur,!1))}},Hne=t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-help-circle"},null,-1);function Gne(a,h,p,C,w,v){const A=t.resolveComponent("i-button"),V=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),onMouseenter:h[6]||(h[6]=(...H)=>v.handleMouseenter&&v.handleMouseenter(...H)),onMouseleave:h[7]||(h[7]=(...H)=>v.handleMouseleave&&v.handleMouseleave(...H))},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-rel"]),ref:"reference",onClick:h[0]||(h[0]=(...H)=>v.handleClick&&v.handleClick(...H)),onMousedown:h[1]||(h[1]=H=>v.handleFocus(!1)),onMouseup:h[2]||(h[2]=H=>v.handleBlur(!1))},[t.renderSlot(a.$slots,"default")],34),(t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!p.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(v.popperClasses),style:t.normalizeStyle(v.styles),ref:"popper",onClick:h[3]||(h[3]=(...H)=>v.handleTransferClick&&v.handleTransferClick(...H)),onMouseenter:h[4]||(h[4]=(...H)=>v.handleMouseenter&&v.handleMouseenter(...H)),onMouseleave:h[5]||(h[5]=(...H)=>v.handleMouseleave&&v.handleMouseleave(...H))},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-content"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-arrow"])},null,2),p.confirm?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-inner"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"])},[Hne,t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body-message"])},[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])],2)],2),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-footer"])},[t.createVNode(A,{type:"text",size:"small",onClick:v.cancel},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.localeCancelText),1)]),_:1},8,["onClick"]),t.createVNode(A,{type:"primary",size:"small",onClick:v.ok},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.localeOkText),1)]),_:1},8,["onClick"])],2)],2)):t.createCommentVNode("",!0),p.confirm?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([w.prefixCls+"-inner"])},[w.showTitle?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-title"]),style:t.normalizeStyle(v.contentPaddingStyle),ref:"title"},[t.renderSlot(a.$slots,"title",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-title-inner"])},t.toDisplayString(p.title),3)])],6)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"]),style:t.normalizeStyle(v.contentPaddingStyle)},[t.createElementVNode("div",{class:t.normalizeClass(v.contentClasses)},[t.renderSlot(a.$slots,"content",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body-content-inner"])},t.toDisplayString(p.content),3)])],2)],6)],2))],2)],38),[[t.vShow,a.visible]])]),_:3})],8,["disabled"]))],34)),[[V,v.handleClose]])}var SS=l(Qne,[["render",Gne]]);const Ba="ivu-progress",Yne={name:"Progress",components:{Icon:S},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator(a){return _(a,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data(){return{currentStatus:this.status}},computed:{isStatus(){return this.currentStatus==="wrong"||this.currentStatus==="success"},statusIcon(){let a="";switch(this.currentStatus){case"wrong":a="ios-close-circle";break;case"success":a="ios-checkmark-circle";break}return a},bgStyle(){const a=this.vertical?{height:`${this.percent}%`,width:`${this.strokeWidth}px`}:{width:`${this.percent}%`,height:`${this.strokeWidth}px`};return this.strokeColor&&(typeof this.strokeColor=="string"?a["background-color"]=this.strokeColor:a["background-image"]=`linear-gradient(to right, ${this.strokeColor[0]} 0%, ${this.strokeColor[1]} 100%)`),a},successBgStyle(){return this.vertical?{height:`${this.successPercent}%`,width:`${this.strokeWidth}px`}:{width:`${this.successPercent}%`,height:`${this.strokeWidth}px`}},wrapClasses(){return[`${Ba}`,`${Ba}-${this.currentStatus}`,{[`${Ba}-show-info`]:!this.hideInfo&&!this.textInside,[`${Ba}-vertical`]:this.vertical}]},textClasses(){return`${Ba}-text`},textInnerClasses(){return`${Ba}-text-inner`},outerClasses(){return`${Ba}-outer`},innerClasses(){return`${Ba}-inner`},bgClasses(){return`${Ba}-bg`},successBgClasses(){return`${Ba}-success-bg`}},created(){this.handleStatus()},methods:{handleStatus(a){a?(this.currentStatus="normal",this.$emit("on-status-change","normal")):parseInt(this.percent,10)===100&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent(a,h){a<h?this.handleStatus(!0):this.handleStatus()},status(a){this.currentStatus=a}}},jne={key:0,class:"ivu-progress-inner-text"};function qne(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[t.createElementVNode("div",{class:t.normalizeClass(v.outerClasses)},[t.createElementVNode("div",{class:t.normalizeClass(v.innerClasses)},[t.createElementVNode("div",{class:t.normalizeClass(v.bgClasses),style:t.normalizeStyle(v.bgStyle)},[p.textInside?(t.openBlock(),t.createElementBlock("div",jne,t.toDisplayString(p.percent)+"%",1)):t.createCommentVNode("",!0)],6),t.createElementVNode("div",{class:t.normalizeClass(v.successBgClasses),style:t.normalizeStyle(v.successBgStyle)},null,6)],2)],2),!p.hideInfo&&!p.textInside?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(v.textClasses)},[t.renderSlot(a.$slots,"default",{},()=>[v.isStatus?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(v.textInnerClasses)},[t.createVNode(A,{type:v.statusIcon},null,8,["type"])],2)):(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(v.textInnerClasses)},t.toDisplayString(p.percent)+"% ",3))])],2)):t.createCommentVNode("",!0)],2)}var s1=l(Yne,[["render",qne]]);const kc="ivu-rate",Zne={name:"Rate",mixins:[ji,fi],emits:["update:modelValue","on-change"],props:{count:{type:Number,default:5},modelValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},name:{type:String},clearable:{type:Boolean,default:!1},character:{type:String,default:""},icon:{type:String,default:""},customIcon:{type:String,default:""}},data(){const a=this.modelValue||0;return{prefixCls:kc,hoverIndex:-1,isHover:!1,isHalf:this.allowHalf&&a.toString().indexOf(".")>=0,currentValue:a}},computed:{classes(){return[`${kc}`,{[`${kc}-disabled`]:this.itemDisabled}]},iconClasses(){return["ivu-icon",{[`ivu-icon-${this.icon}`]:this.icon!=="",[`${this.customIcon}`]:this.customIcon!==""}]},showCharacter(){return this.character!==""||this.icon!==""||this.customIcon!==""}},watch:{modelValue(a){this.currentValue=a||0},currentValue(a){this.setHalf(a)}},methods:{starCls(a){const h=this.hoverIndex,p=this.isHover?h:this.currentValue;let C=!1,w=!1;return p>=a&&(C=!0),this.isHover?w=p===a:w=Math.ceil(this.currentValue)===a,[{[`${kc}-star`]:!this.showCharacter,[`${kc}-star-chart`]:this.showCharacter,[`${kc}-star-full`]:!w&&C||w&&!this.isHalf,[`${kc}-star-half`]:w&&this.isHalf,[`${kc}-star-zero`]:!C}]},handleMousemove(a,h){if(!this.itemDisabled){if(this.isHover=!0,this.allowHalf){const p=h.target.getAttribute("type")||!1;this.isHalf=p==="half"}else this.isHalf=!1;this.hoverIndex=a}},handleMouseleave(){this.itemDisabled||(this.isHover=!1,this.setHalf(this.currentValue),this.hoverIndex=-1)},setHalf(a){this.isHalf=this.allowHalf&&a.toString().indexOf(".")>=0},handleClick(a){this.itemDisabled||(this.isHalf&&(a-=.5),this.clearable&&Math.abs(a-this.currentValue)<.01&&(a=0),this.currentValue=a,this.$emit("update:modelValue",a),this.$emit("on-change",a),this.handleFormItemChange("change",a))}}},Kne=["name","value"],Jne=["onMousemove","onClick"],ere={key:0},tre={key:1};function ire(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),onMouseleave:h[0]||(h[0]=(...A)=>v.handleMouseleave&&v.handleMouseleave(...A))},[t.createElementVNode("input",{type:"hidden",name:p.name,value:w.currentValue},null,8,Kne),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.count,A=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.starCls(A)),onMousemove:V=>v.handleMousemove(A,V),key:A,onClick:V=>v.handleClick(A)},[v.showCharacter?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("span",{class:t.normalizeClass([w.prefixCls+"-star-first"]),type:"half"},[p.character!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(p.character),1)],64)):(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(v.iconClasses),type:"half"},null,2))],2),t.createElementVNode("span",{class:t.normalizeClass([w.prefixCls+"-star-second"])},[p.character!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(p.character),1)],64)):(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(v.iconClasses)},null,2))],2)],64)):(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([w.prefixCls+"-star-content"]),type:"half"},null,2))],42,Jne))),128)),p.showText?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-text"])},[t.renderSlot(a.$slots,"default",{},()=>[t.createElementVNode("span",null,t.toDisplayString(w.currentValue),1),t.createTextVNode(),w.currentValue<=1?(t.openBlock(),t.createElementBlock("span",ere,t.toDisplayString(a.t("i.rate.star")),1)):(t.openBlock(),t.createElementBlock("span",tre,t.toDisplayString(a.t("i.rate.stars")),1))])],2)),[[t.vShow,w.currentValue>0]]):t.createCommentVNode("",!0)],34)}var iR=l(Zne,[["render",ire]]);const nre={name:"Result",components:{Icon:S},props:{type:{validator(a){return _(a,["success","error","warning"])}},title:{type:String},desc:{type:String},extra:{type:String}},computed:{iconClasses(){return{"ivu-result-icon-success":this.type==="success","ivu-result-icon-error":this.type==="error","ivu-result-icon-warning":this.type==="warning"}}}},rre={class:"ivu-result"},sre={key:0,class:"ivu-result-title"},ore={key:1,class:"ivu-result-desc"},are={key:2,class:"ivu-result-extra"},lre={key:3,class:"ivu-result-actions"};function cre(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",rre,[t.createElementVNode("div",{class:t.normalizeClass(["ivu-result-icon",v.iconClasses])},[p.type==="success"?(t.openBlock(),t.createBlock(A,{key:0,type:"ios-checkmark"})):t.createCommentVNode("",!0),p.type==="error"?(t.openBlock(),t.createBlock(A,{key:1,type:"ios-close"})):t.createCommentVNode("",!0),p.type==="warning"?(t.openBlock(),t.createBlock(A,{key:2,type:"ios-information"})):t.createCommentVNode("",!0)],2),p.title||a.$slots.title?(t.openBlock(),t.createElementBlock("div",sre,[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])])):t.createCommentVNode("",!0),p.desc||a.$slots.desc?(t.openBlock(),t.createElementBlock("div",ore,[t.renderSlot(a.$slots,"desc",{},()=>[t.createTextVNode(t.toDisplayString(p.desc),1)])])):t.createCommentVNode("",!0),p.extra||a.$slots.extra?(t.openBlock(),t.createElementBlock("div",are,[t.renderSlot(a.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(p.extra),1)])])):t.createCommentVNode("",!0),a.$slots.actions?(t.openBlock(),t.createElementBlock("div",lre,[t.renderSlot(a.$slots,"actions")])):t.createCommentVNode("",!0)])}var nR=l(nre,[["render",cre]]);const Nm="ivu-scroll",hre={props:["text","active","spinnerHeight"],components:{Spin:so,Icon:S},computed:{wrapperClasses(){return[`${Nm}-loader-wrapper`,{[`${Nm}-loader-wrapper-active`]:this.active}]},spinnerClasses(){return`${Nm}-spinner`},iconClasses(){return`${Nm}-spinner-icon`},textClasses(){return`${Nm}-loader-text`}}};function ure(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapperClasses)},[t.createElementVNode("div",{class:t.normalizeClass(v.spinnerClasses)},[t.createVNode(V,{fix:""},{default:t.withCtx(()=>[t.createVNode(A,{type:"ios-loading",size:"18",class:t.normalizeClass(v.iconClasses)},null,8,["class"]),p.text?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.textClasses)},t.toDisplayString(p.text),3)):t.createCommentVNode("",!0)]),_:1})],2)],2)}var dre=l(hre,[["render",ure]]);const Bd="ivu-scroll",rR={sensitivity:10,minimumStartDragOffset:5},CS=()=>Promise.resolve(),fre={name:"Scroll",mixins:[ji],components:{loader:dre},props:{height:{type:[Number,String],default:300},onReachTop:{type:Function},onReachBottom:{type:Function},onReachEdge:{type:Function},loadingText:{type:String},distanceToEdge:[Number,Array],stopSlide:{type:Boolean,default:!1}},data(){const a=this.calculateProximityThreshold();return{showTopLoader:!1,showBottomLoader:!1,showBodyLoader:!1,lastScroll:0,reachedTopScrollLimit:!0,reachedBottomScrollLimit:!1,topRubberPadding:0,bottomRubberPadding:0,rubberRollBackTimeout:!1,isLoading:!1,pointerTouchDown:null,touchScroll:!1,handleScroll:()=>{},pointerUpHandler:()=>{},pointerMoveHandler:()=>{},topProximityThreshold:a[0],bottomProximityThreshold:a[1]}},computed:{wrapClasses(){return`${Bd}-wrapper`},scrollContainerClasses(){return[`${Bd}-container`,{[`${Bd}-container-loading`]:this.showBodyLoader&&this.stopSlide}]},slotContainerClasses(){return[`${Bd}-content`,{[`${Bd}-content-loading`]:this.showBodyLoader}]},loaderClasses(){return`${Bd}-loader`},wrapperPadding(){return{paddingTop:this.topRubberPadding+"px",paddingBottom:this.bottomRubberPadding+"px"}},localeLoadingText(){return this.loadingText===void 0?this.t("i.select.loading"):this.loadingText}},methods:{waitOneSecond(){return new Promise(a=>{setTimeout(a,1e3)})},calculateProximityThreshold(){const a=this.distanceToEdge;return typeof a>"u"?[20,20]:Array.isArray(a)?a:[a,a]},onCallback(a){if(this.isLoading=!0,this.showBodyLoader=!0,a>0)this.showTopLoader=!0,this.topRubberPadding=20;else{this.showBottomLoader=!0,this.bottomRubberPadding=20;let C=0;const w=this.$refs.scrollContainer,v=w.scrollTop;for(let A=0;A<20;A++)setTimeout(()=>{C=Math.max(C,this.$refs.bottomLoader.getBoundingClientRect().height),w.scrollTop=v+C},A*50)}const h=[this.waitOneSecond(),this.onReachEdge?this.onReachEdge(a):CS()];h.push(a>0?this.onReachTop?this.onReachTop():CS():this.onReachBottom?this.onReachBottom():CS());let p=setTimeout(()=>{this.reset()},5e3);Promise.all(h).then(()=>{clearTimeout(p),this.reset()})},reset(){["showTopLoader","showBottomLoader","showBodyLoader","isLoading","reachedTopScrollLimit","reachedBottomScrollLimit"].forEach(a=>this[a]=!1),this.lastScroll=0,this.topRubberPadding=0,this.bottomRubberPadding=0,clearInterval(this.rubberRollBackTimeout),this.touchScroll&&setTimeout(()=>{o(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.removeEventListener("touchmove",this.pointerMoveHandler),this.touchScroll=!1},500)},onWheel(a){if(this.isLoading)return;const h=a.wheelDelta?a.wheelDelta:-(a.detail||a.deltaY);this.stretchEdge(h)},stretchEdge(a){if(clearTimeout(this.rubberRollBackTimeout),!this.onReachEdge){if(a>0){if(!this.onReachTop)return}else if(!this.onReachBottom)return}this.rubberRollBackTimeout=setTimeout(()=>{this.isLoading||this.reset()},250),a>0&&this.reachedTopScrollLimit?(this.topRubberPadding+=5-this.topRubberPadding/5,this.topRubberPadding>this.topProximityThreshold&&this.onCallback(1)):a<0&&this.reachedBottomScrollLimit?(this.bottomRubberPadding+=6-this.bottomRubberPadding/4,this.bottomRubberPadding>this.bottomProximityThreshold&&this.onCallback(-1)):this.onScroll()},onScroll(){const a=this.$refs.scrollContainer;if(this.isLoading||!a)return;const h=Math.sign(this.lastScroll-a.scrollTop),p=a.scrollHeight-a.clientHeight-a.scrollTop,C=this.topProximityThreshold<0?this.topProximityThreshold:0,w=this.bottomProximityThreshold<0?this.bottomProximityThreshold:0;h==-1&&p+w<=rR.sensitivity?this.reachedBottomScrollLimit=!0:h>=0&&a.scrollTop+C<=0?this.reachedTopScrollLimit=!0:(this.reachedTopScrollLimit=!1,this.reachedBottomScrollLimit=!1,this.lastScroll=a.scrollTop)},getTouchCoordinates(a){return{x:a.touches[0].pageX,y:a.touches[0].pageY}},onPointerDown(a){if(!this.isLoading){if(a.type=="touchstart"){const h=this.$refs.scrollContainer;this.reachedTopScrollLimit?h.scrollTop=5:this.reachedBottomScrollLimit&&(h.scrollTop-=5)}a.type=="touchstart"&&this.$refs.scrollContainer.scrollTop==0&&(this.$refs.scrollContainer.scrollTop=5),this.pointerTouchDown=this.getTouchCoordinates(a),s(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.parentElement.addEventListener("touchmove",h=>{h.stopPropagation(),this.pointerMoveHandler(h)},{passive:!1,useCapture:!0})}},onPointerMove(a){if(!this.pointerTouchDown||this.isLoading)return;const h=this.getTouchCoordinates(a).y-this.pointerTouchDown.y;this.stretchEdge(h),this.touchScroll||Math.abs(h)>rR.minimumStartDragOffset&&(this.touchScroll=!0)},onPointerUp(){this.pointerTouchDown=null}},created(){this.handleScroll=Yy(this.onScroll,150,{leading:!1}),this.pointerUpHandler=this.onPointerUp.bind(this),this.pointerMoveHandler=Yy(this.onPointerMove,50,{leading:!1})}};function pre(a,h,p,C,w,v){const A=t.resolveComponent("loader");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses),style:{"touch-action":"none"}},[t.createElementVNode("div",{class:t.normalizeClass(v.scrollContainerClasses),style:t.normalizeStyle({height:p.height+"px"}),onScroll:h[0]||(h[0]=(...V)=>w.handleScroll&&w.handleScroll(...V)),onWheel:h[1]||(h[1]=(...V)=>v.onWheel&&v.onWheel(...V)),onTouchstart:h[2]||(h[2]=(...V)=>v.onPointerDown&&v.onPointerDown(...V)),ref:"scrollContainer"},[t.createElementVNode("div",{class:t.normalizeClass(v.loaderClasses),style:t.normalizeStyle({paddingTop:v.wrapperPadding.paddingTop}),ref:"toploader"},[t.createVNode(A,{text:v.localeLoadingText,active:w.showTopLoader},null,8,["text","active"])],6),t.createElementVNode("div",{class:t.normalizeClass(v.slotContainerClasses),ref:"scrollContent"},[t.renderSlot(a.$slots,"default")],2),t.createElementVNode("div",{class:t.normalizeClass(v.loaderClasses),style:t.normalizeStyle({paddingBottom:v.wrapperPadding.paddingBottom}),ref:"bottomLoader"},[t.createVNode(A,{text:v.localeLoadingText,active:w.showBottomLoader},null,8,["text","active"])],6)],38)],2)}var sR=l(fre,[["render",pre]]);const mre="COMPLETE",oR="CANCELED";function gre(a){if(r&&"requestAnimationFrame"in window)return window.requestAnimationFrame(a);setTimeout(a,16)}function aR(a,h,p){a===window?a.scrollTo(h,p):(a.scrollLeft=h,a.scrollTop=p)}function vre(a,h,p){if(!r)return;let C=a.getBoundingClientRect(),w=null,v=null,A=null,V=null,H=null,X=null,Y=null,le=p&&p.left!=null?p.left:.5,xe=p&&p.top!=null?p.top:.5,be=p&&p.leftOffset!=null?p.leftOffset:0,ge=p&&p.topOffset!=null?p.topOffset:0,se=le,Ae=xe;if(h===window)X=Math.min(C.width,window.innerWidth),Y=Math.min(C.height,window.innerHeight),v=C.left+window.pageXOffset-window.innerWidth*se+X*se,A=C.top+window.pageYOffset-window.innerHeight*Ae+Y*Ae,v-=be,A-=ge,V=v-window.pageXOffset,H=A-window.pageYOffset;else{X=C.width,Y=C.height,w=h.getBoundingClientRect();let $t=C.left-(w.left-h.scrollLeft),mt=C.top-(w.top-h.scrollTop);v=$t+X*se-h.clientWidth*se,A=mt+Y*Ae-h.clientHeight*Ae,v=Math.max(Math.min(v,h.scrollWidth-h.clientWidth),0),A=Math.max(Math.min(A,h.scrollHeight-h.clientHeight),0),v-=be,A-=ge,V=v-h.scrollLeft,H=A-h.scrollTop}return{x:v,y:A,differenceX:V,differenceY:H}}function lR(a){gre(function(){let h=a.scrollOption;if(!h)return;let p=vre(h.target,a,h.align),C=Date.now()-h.startTime,w=Math.min(1/h.time*C,1);if(C>h.time+20)return aR(a,p.x,p.y),a.scrollOption=null,h.end(mre);let v=1-h.ease(w);aR(a,p.x-p.differenceX*v,p.y-p.differenceY*v),lR(a)})}function yre(a,h,p,C){let w=!h.scrollOption,v=h.scrollOption,A=Date.now(),V;v&&v.end(oR);function H(X){h.scrollOption=null,h.parentElement&&h.parentElement.scrollOption&&h.parentElement.scrollOption.end(X),C(X),h.removeEventListener("touchstart",V)}h.scrollOption={startTime:v?v.startTime:Date.now(),target:a,time:p.time+(v?A-v.startTime:0),ease:p.ease,align:p.align,end:H},V=H.bind(null,oR),h.addEventListener("touchstart",V),w&&lR(h)}function cR(a){if(r)return a===window||(a.scrollHeight!==a.clientHeight||a.scrollWidth!==a.clientWidth)&&getComputedStyle(a).overflow!=="hidden"}function bre(){return!0}function kS(a,h,p){if(!a)return;typeof h=="function"&&(p=h,h=null),h||(h={}),h.time=isNaN(h.time)?1e3:h.time,h.ease=h.ease||function(H){return 1-Math.pow(1-H,H/2)};let C=a.parentElement,w=0;function v(H){w-=1,!w&&p&&p(H)}let A=h.validTarget||bre,V=h.isScrollable;for(;C;){if(A(C,w)&&(V?V(C,cR):cR(C))&&(w+=1,yre(a,C,h,v)),C=C.parentElement,!C)return;C.tagName==="BODY"&&(C=window)}}function xre(a){if(r&&"requestAnimationFrame"in window)return window.requestAnimationFrame(a);setTimeout(a,16)}function TS(a,h,p){if(!a)return;typeof h=="function"&&(p=h,h=null),h||(h={}),h.time=isNaN(h.time)?500:h.time;const C=a.scrollTop,w=h.to||0,v=Math.abs(C-w),A=Math.ceil(v/h.time*50);function V(H,X,Y){if(H===X){p&&p();return}let le=H+Y>X?X:H+Y;H>X&&(le=H-Y<X?X:H-Y),a.scrollTop=le,xre(()=>V(le,X,Y))}V(C,w,A)}const wl="ivu-layout-sider";pe();const Ore={name:"Sider",emits:["on-collapse","update:modelValue"],props:{modelValue:{type:Boolean,default:!1},width:{type:[Number,String],default:200},collapsedWidth:{type:[Number,String],default:64},hideTrigger:{type:Boolean,default:!1},breakpoint:{type:String,validator(a){return _(a,["xs","sm","md","lg","xl","xxl"])}},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},reverseArrow:{type:Boolean,default:!1}},data(){return{prefixCls:wl,mediaMatched:!1}},computed:{wrapClasses(){return[`${wl}`,this.siderWidth?"":`${wl}-zero-width`,this.modelValue?`${wl}-collapsed`:""]},wrapStyles(){return{width:`${this.siderWidth}px`,minWidth:`${this.siderWidth}px`,maxWidth:`${this.siderWidth}px`,flex:`0 0 ${this.siderWidth}px`}},triggerClasses(){return[`${wl}-trigger`,this.modelValue?`${wl}-trigger-collapsed`:""]},childClasses(){return`${this.prefixCls}-children`},zeroWidthTriggerClasses(){return[`${wl}-zero-width-trigger`,this.reverseArrow?`${wl}-zero-width-trigger-left`:""]},triggerIconClasses(){return["ivu-icon",`ivu-icon-ios-arrow-${this.reverseArrow?"forward":"back"}`,`${wl}-trigger-icon`]},siderWidth(){return this.collapsible?this.modelValue?this.mediaMatched?0:parseInt(this.collapsedWidth):parseInt(this.width):this.width},showZeroTrigger(){return this.collapsible?this.mediaMatched&&!this.hideTrigger||parseInt(this.collapsedWidth)===0&&this.modelValue&&!this.hideTrigger:!1},showBottomTrigger(){return this.collapsible?!this.mediaMatched&&!this.hideTrigger:!1}},methods:{toggleCollapse(){let a=this.collapsible?!this.modelValue:!1;this.$emit("update:modelValue",a)},matchMedia(){if(!r)return;let a;window.matchMedia&&(a=window.matchMedia);let h=this.mediaMatched;this.mediaMatched=a(`(max-width: ${ce[this.breakpoint]})`).matches,this.mediaMatched!==h&&this.$emit("update:modelValue",this.mediaMatched)},onWindowResize(){this.matchMedia()}},watch:{modelValue(a){this.$emit("on-collapse",a)}},mounted(){this.defaultCollapsed&&this.$emit("update:modelValue",this.defaultCollapsed),this.breakpoint!==void 0&&(s(window,"resize",this.onWindowResize),this.matchMedia())},beforeUnmount(){this.breakpoint!==void 0&&o(window,"resize",this.onWindowResize)}},wre=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-menu"},null,-1)];function _re(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses),style:t.normalizeStyle(v.wrapStyles)},[t.withDirectives(t.createElementVNode("span",{onClick:h[0]||(h[0]=(...A)=>v.toggleCollapse&&v.toggleCollapse(...A)),class:t.normalizeClass(v.zeroWidthTriggerClasses)},wre,2),[[t.vShow,v.showZeroTrigger]]),t.createElementVNode("div",{class:t.normalizeClass(v.childClasses)},[t.renderSlot(a.$slots,"default")],2),t.renderSlot(a.$slots,"trigger",{},()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(v.triggerClasses),onClick:h[1]||(h[1]=(...A)=>v.toggleCollapse&&v.toggleCollapse(...A)),style:t.normalizeStyle({width:v.siderWidth+"px"})},[t.createElementVNode("i",{class:t.normalizeClass(v.triggerIconClasses)},null,2)],6),[[t.vShow,v.showBottomTrigger]])])],6)}var hR=l(Ore,[["render",_re]]);const Tc="ivu-skeleton-item",Sre={name:"SkeletonItem",components:{Icon:S},inject:{SkeletonInstance:{default:null}},props:{animated:{type:Boolean,default:!1},type:{validator(a){return _(a,["circle","square","rect","image"])},default:"rect"},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},width:{type:[String,Number]},height:{type:[String,Number]},block:{type:Boolean,default:!1},imgSrc:{type:String}},data(){return{prefixCls:Tc}},computed:{classes(){return[Tc,Tc+"-"+this.type,Tc+"-"+this.type+"-"+this.size,{[Tc+"-animated"]:this.animated||!!this.SkeletonInstance&&this.SkeletonInstance.animated,[Tc+"-inline"]:!this.block,[Tc+"-with-image"]:this.showImage,[Tc+"-round"]:!!this.SkeletonInstance&&this.SkeletonInstance.round}]},styles(){const a={};return["rect","image"].includes(this.type)&&(this.width&&(a.width=typeof this.width=="number"?`${this.width}px`:this.width),this.height&&(a.height=typeof this.height=="number"?`${this.height}px`:this.height),this.showImage&&(a.background=`no-repeat url(${this.imgSrc}) center center`,a.backgroundSize="contain")),a},showIcon(){return this.type==="image"&&!this.imgSrc},showImage(){return this.type==="image"&&!!this.imgSrc},iconSize(){let a=16;return this.size==="large"&&(a=32),this.size==="small"&&(a=10),a}}};function Cre(a,h,p,C,w,v){const A=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(v.styles)},[v.showIcon?(t.openBlock(),t.createBlock(A,{key:0,class:t.normalizeClass(w.prefixCls+"-image-icon"),type:"ios-image",size:v.iconSize},null,8,["class","size"])):t.createCommentVNode("",!0)],6)}var MS=l(Sre,[["render",Cre]]);const eu="ivu-skeleton",kre={name:"Skeleton",components:{SkeletonItem:MS,Row:vc,Col:Na},provide(){return{SkeletonInstance:this}},props:{animated:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},paragraph:{validator(a){return typeof a=="number"?a>=1:typeof a.rows=="number"&&a.rows>=1},type:[Number,Object],default:3},title:{validator(a){return typeof a=="object"&&a.width?["number","string"].includes(typeof a.width):!0},type:[Boolean,Object],default:!0},avatar:{validator(a){if(typeof a=="object"){if(a.type)return _(a.type,["circle","square"]);if(a.size)return _(a.size,["small","large","default"])}return!0},type:[Boolean,Object],default:!1}},data(){return{prefixCls:eu}},computed:{classes(){return[eu,{[eu+"-with-title"]:this.showTitle,[eu+"-with-avatar"]:this.showAvatar}]},rows(){return typeof this.paragraph=="number"?this.paragraph:this.paragraph.rows},rowsCount(){return this.rows+Number(this.showTitle)},showTitle(){return!!this.title},titleWidth(){return typeof this.title=="object"&&this.title.width?typeof this.title.width=="string"?this.title.width:`${this.title.width}px`:""},showAvatar(){return!!this.avatar},avatarType(){return typeof this.avatar=="object"&&this.avatar.type?this.avatar.type:"circle"},avatarSize(){return typeof this.avatar=="object"&&this.avatar.size?this.avatar.size:!this.$VIEWUI||this.$VIEWUI.size===""?"default":this.$VIEWUI.size}},methods:{rowClasses(a){return[eu+"-item-inner",{[eu+"-item-round"]:this.round,[eu+"-item-title"]:this.showTitle&&a===1}]},rowWidth(a){if(this.showTitle&&a===1)return this.titleWidth||"38%";if(typeof this.paragraph=="object"){if(typeof this.paragraph.width=="string")return this.paragraph.width;if(typeof this.paragraph.width=="number")return`${this.paragraph.width}px`;const h=a-1-Number(this.showTitle);if(Array.isArray(this.paragraph.width)&&this.paragraph.width[h])return typeof this.paragraph.width[h]=="number"?`${this.paragraph.width[h]}px`:this.paragraph.width[h]}return a===this.rowsCount?"62%":"100%"}}};function Tre(a,h,p,C,w,v){const A=t.resolveComponent("SkeletonItem"),V=t.resolveComponent("Col"),H=t.resolveComponent("Row");return p.loading?(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:0},a.$attrs,{class:v.classes}),[p.loading?t.renderSlot(a.$slots,"template",{key:0},()=>[t.createVNode(H,null,{default:t.withCtx(()=>[v.showAvatar?(t.openBlock(),t.createBlock(V,{key:0,flex:"0"},{default:t.withCtx(()=>[t.createVNode(A,{type:v.avatarType,size:v.avatarSize,animated:p.animated,class:t.normalizeClass(w.prefixCls+"-item-avatar")},null,8,["type","size","animated","class"])]),_:1})):t.createCommentVNode("",!0),t.createVNode(V,{flex:"1"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.rowsCount,X=>(t.openBlock(),t.createBlock(A,{key:X,class:t.normalizeClass(v.rowClasses(X)),animated:p.animated,width:v.rowWidth(X),block:""},null,8,["class","animated","width"]))),128))]),_:1})]),_:1})]):t.createCommentVNode("",!0)],16)):t.renderSlot(a.$slots,"default",t.normalizeProps(t.mergeProps({key:1},a.$attrs)))}var uR=l(kre,[["render",Tre]]),Mre={name:"SliderMarker",props:{mark:{type:[String,Object]}},render(){let a=typeof this.mark=="string"?this.mark:[this.mark.label];return t.h("div",{class:"ivu-slider-marks-item",style:this.mark.style||{}},a)}};const _l="ivu-slider",Ere={name:"Slider",mixins:[fi],emits:["update:modelValue","on-input","on-change"],components:{InputNumber:fS,Tooltip:vl,SliderMarker:Mre},inject:{ModalInstance:{default:null},DrawerInstance:{default:null}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},disabled:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},inputSize:{type:String,default:"default",validator(a){return _(a,["small","large","default"])}},showStops:{type:Boolean,default:!1},tipFormat:{type:Function,default(a){return a}},showTip:{type:String,default:"hover",validator(a){return _(a,["hover","always","never"])}},name:{type:String},activeChange:{type:Boolean,default:!0},marks:{type:Object}},data(){let a=this.checkLimits(Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]);return this.range&&this.modelValue===null&&(a=[0,0]),{prefixCls:_l,currentValue:a,dragging:!1,pointerDown:"",startX:0,currentX:0,startPos:0,oldValue:[...a],valueIndex:{min:0,max:1},sliderWidth:0,isValueNull:!1,id:ee(6)}},watch:{modelValue(a){a===null&&(this.isValueNull=!0),a=this.checkLimits(Array.isArray(a)?a:[a]),!this.dragging&&(a[0]!==this.currentValue[0]||a[1]!==this.currentValue[1])&&(this.isValueNull&&this.range?this.currentValue=[0,0]:this.currentValue=a)},exportValue(a){t.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()});const h=this.range?a:a[0];this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",h),this.$emit("on-input",h)}},computed:{classes(){return[`${_l}`,{[`${_l}-input`]:this.showInput&&!this.range,[`${_l}-range`]:this.range,[`${_l}-disabled`]:this.itemDisabled}]},minButtonClasses(){return[`${_l}-button`,{[`${_l}-button-dragging`]:this.pointerDown==="min"}]},maxButtonClasses(){return[`${_l}-button`,{[`${_l}-button-dragging`]:this.pointerDown==="max"}]},exportValue(){const a=(String(this.step).split(".")[1]||"").length;return this.currentValue.map(h=>Number(h.toFixed(a)))},minPosition(){return(this.currentValue[0]-this.min)/this.valueRange*100},maxPosition:function(){return(this.currentValue[1]-this.min)/this.valueRange*100},barStyle(){const a={width:(this.currentValue[0]-this.min)/this.valueRange*100+"%"};return this.range&&(a.left=(this.currentValue[0]-this.min)/this.valueRange*100+"%",a.width=(this.currentValue[1]-this.currentValue[0])/this.valueRange*100+"%"),a},stops(){let a=this.valueRange/this.step,h=[],p=100*this.step/this.valueRange;for(let C=1;C<a;C++)h.push(C*p);return h},markList(){return this.marks?Object.keys(this.marks).map(parseFloat).sort((a,h)=>a-h).filter(a=>a<=this.max&&a>=this.min).map(a=>({point:a,position:(a-this.min)*100/(this.max-this.min),mark:this.marks[a]})):[]},tipDisabled(){return this.tipFormat(this.currentValue[0])===null||this.showTip==="never"},valueRange(){return this.max-this.min},firstPosition(){return this.currentValue[0]},secondPosition(){return this.currentValue[1]}},methods:{getPointerX(a){return a.type.indexOf("touch")!==-1?a.touches[0].clientX:a.clientX},checkLimits([a,h]){return a=Math.max(this.min,a),a=Math.min(this.max,a),h=Math.max(this.min,a,h),h=Math.min(this.max,h),[a,h]},getCurrentValue(a,h){if(this.itemDisabled)return;const p=this.valueIndex[h];if(typeof p<"u")return this.currentValue[p]},onKeyLeft(a,h){const p=this.getCurrentValue(a,h);Number.isFinite(p)&&this.changeButtonPosition(p-this.step,h)},onKeyRight(a,h){const p=this.getCurrentValue(a,h);Number.isFinite(p)&&this.changeButtonPosition(p+this.step,h)},onPointerDown(a,h){this.itemDisabled||(a.preventDefault(),this.pointerDown=h,this.onPointerDragStart(a),s(window,"mousemove",this.onPointerDrag),s(window,"touchmove",this.onPointerDrag),s(window,"mouseup",this.onPointerDragEnd),s(window,"touchend",this.onPointerDragEnd))},onPointerDragStart(a){this.dragging=!1,this.startX=this.getPointerX(a),this.startPos=this[`${this.pointerDown}Position`]*this.valueRange/100+this.min},onPointerDrag(a){this.dragging=!0,this.$refs[`${this.pointerDown}Tooltip`].visible=!0,this.currentX=this.getPointerX(a);const h=(this.currentX-this.startX)/this.sliderWidth*this.valueRange;this.changeButtonPosition(this.startPos+h)},onPointerDragEnd(){this.dragging&&(this.dragging=!1,this.$refs[`${this.pointerDown}Tooltip`].visible=!1,this.emitChange()),this.pointerDown="",o(window,"mousemove",this.onPointerDrag),o(window,"touchmove",this.onPointerDrag),o(window,"mouseup",this.onPointerDragEnd),o(window,"touchend",this.onPointerDragEnd)},changeButtonPosition(a,h){const p=h||this.pointerDown,C=p==="min"?0:1;p==="min"?a=this.checkLimits([a,this.max])[0]:a=this.checkLimits([this.min,a])[1];const w=this.handleDecimal(a,this.step),v=this.currentValue;v[C]=a-w,this.range&&(p==="min"&&v[0]>v[1]&&(v[1]=v[0]),p==="max"&&v[0]>v[1]&&(v[0]=v[1])),this.currentValue=[...v],this.dragging||this.currentValue[C]!==this.oldValue[C]&&(this.emitChange(),this.oldValue[C]=this.currentValue[C])},handleDecimal(a,h){if(h<1){let p=h.toString(),C=1,w;try{w=p.split(".")[1].length}catch{w=0}return C=Math.pow(10,w),a*C%(h*C)/C}else return a%h},emitChange(){const a=this.range?this.exportValue:this.exportValue[0];this.$emit("on-change",a),this.handleFormItemChange("change",a)},sliderClick(a){if(this.itemDisabled)return;const h=this.getPointerX(a),p=this.$refs.slider.getBoundingClientRect().left;let C=(h-p)/this.sliderWidth*this.valueRange+this.min,w=C/this.valueRange*100;!this.range||w<=this.minPosition?this.changeButtonPosition(C,"min"):w>=this.maxPosition?this.changeButtonPosition(C,"max"):this.changeButtonPosition(C,C-this.firstPosition<=this.secondPosition-C?"min":"max")},handleInputChange(a){this.currentValue=[a===0?0:a||this.min,this.currentValue[1]],this.emitChange()},handleFocus(a){this.$refs[`${a}Tooltip`].handleShowPopper()},handleBlur(a){this.$refs[`${a}Tooltip`].handleClosePopper()},handleSetSliderWidth(){this.sliderWidth=parseInt(I(this.$refs.slider,"width"),10)},handleOnVisibleChange(a){a&&this.showTip==="always"&&(this.$refs.minTooltip.doDestroy(),this.range&&this.$refs.maxTooltip.doDestroy(),t.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()}))},addSlider(a){const h=this[a];!h||(h.sliderList||(h.sliderList=[]),h.sliderList.push({id:this.id,slider:this}))},removeSlider(a){const h=this[a];if(!h||!h.sliderList)return;const p=h.sliderList.findIndex(C=>C.id===this.id);h.sliderList.splice(p,1)}},mounted(){this.addSlider("ModalInstance"),this.addSlider("DrawerInstance"),this.observer=Vd(),this.observer.listenTo(this.$refs.slider,this.handleSetSliderWidth)},beforeUnmount(){this.removeSlider("ModalInstance"),this.removeSlider("DrawerInstance"),this.observer.removeListener(this.$refs.slider,this.handleSetSliderWidth)}},Pre=["name","value"],Are={class:"ivu-slider-marks"};function Rre(a,h,p,C,w,v){const A=t.resolveComponent("Input-number"),V=t.resolveComponent("SliderMarker"),H=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[!p.range&&p.showInput?(t.openBlock(),t.createBlock(A,{key:0,min:p.min,size:p.inputSize,max:p.max,step:p.step,modelValue:v.exportValue[0],disabled:a.itemDisabled,"active-change":p.activeChange,onOnChange:v.handleInputChange},null,8,["min","size","max","step","modelValue","disabled","active-change","onOnChange"])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-wrap"]),ref:"slider",onClick:h[19]||(h[19]=t.withModifiers((...X)=>v.sliderClick&&v.sliderClick(...X),["self"]))},[t.createElementVNode("input",{type:"hidden",name:p.name,value:v.exportValue},null,8,Pre),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-bar"]),style:t.normalizeStyle(v.barStyle),onClick:h[0]||(h[0]=t.withModifiers((...X)=>v.sliderClick&&v.sliderClick(...X),["self"]))},null,6),p.showStops?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(v.stops,X=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls+"-stop"]),key:X,style:t.normalizeStyle({left:X+"%"}),onClick:h[1]||(h[1]=t.withModifiers((...Y)=>v.sliderClick&&v.sliderClick(...Y),["self"]))},null,6))),128)):t.createCommentVNode("",!0),v.markList.length>0?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.markList,(X,Y)=>(t.openBlock(),t.createElementBlock("div",{key:Y,class:t.normalizeClass([w.prefixCls+"-stop"]),style:t.normalizeStyle({left:X.position+"%"}),onClick:h[2]||(h[2]=t.withModifiers((...le)=>v.sliderClick&&v.sliderClick(...le),["self"]))},null,6))),128)),t.createElementVNode("div",Are,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.markList,(X,Y)=>(t.openBlock(),t.createBlock(V,{key:Y,mark:X.mark,style:t.normalizeStyle({left:X.position+"%"}),onClick:v.sliderClick},null,8,["mark","style","onClick"]))),128))])],64)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-button-wrap"]),style:t.normalizeStyle({left:v.minPosition+"%"}),onTouchstart:h[9]||(h[9]=X=>v.onPointerDown(X,"min")),onMousedown:h[10]||(h[10]=X=>v.onPointerDown(X,"min"))},[t.createVNode(H,{controlled:w.pointerDown==="min",placement:"top",content:p.tipFormat(v.exportValue[0]),disabled:v.tipDisabled,always:p.showTip==="always",ref:"minTooltip"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(v.minButtonClasses),tabindex:"0",onFocus:h[3]||(h[3]=X=>v.handleFocus("min")),onBlur:h[4]||(h[4]=X=>v.handleBlur("min")),onKeydown:[h[5]||(h[5]=t.withKeys(X=>v.onKeyLeft(X,"min"),["left"])),h[6]||(h[6]=t.withKeys(X=>v.onKeyLeft(X,"min"),["down"])),h[7]||(h[7]=t.withKeys(X=>v.onKeyRight(X,"min"),["right"])),h[8]||(h[8]=t.withKeys(X=>v.onKeyRight(X,"min"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38),p.range?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass([w.prefixCls+"-button-wrap"]),style:t.normalizeStyle({left:v.maxPosition+"%"}),onTouchstart:h[17]||(h[17]=X=>v.onPointerDown(X,"max")),onMousedown:h[18]||(h[18]=X=>v.onPointerDown(X,"max"))},[t.createVNode(H,{controlled:w.pointerDown==="max",placement:"top",content:p.tipFormat(v.exportValue[1]),disabled:v.tipDisabled,always:p.showTip==="always",ref:"maxTooltip"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(v.maxButtonClasses),tabindex:"0",onFocus:h[11]||(h[11]=X=>v.handleFocus("max")),onBlur:h[12]||(h[12]=X=>v.handleBlur("max")),onKeydown:[h[13]||(h[13]=t.withKeys(X=>v.onKeyLeft(X,"max"),["left"])),h[14]||(h[14]=t.withKeys(X=>v.onKeyLeft(X,"max"),["down"])),h[15]||(h[15]=t.withKeys(X=>v.onKeyRight(X,"max"),["right"])),h[16]||(h[16]=t.withKeys(X=>v.onKeyRight(X,"max"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38)):t.createCommentVNode("",!0)],2)],2)}var dR=l(Ere,[["render",Rre]]);const Ire={small:8,default:16,large:24},fR={name:"Space",props:{size:{type:[String,Number,Array],validator(a){const h=["small","large","default"];return typeof a=="string"?_(a,h):Array.isArray(a)?a.length>0&&a.every(p=>typeof p=="number"||_(p,h)):!0},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||!a.$VIEWUI.space||a.$VIEWUI.space.size===""?"small":a.$VIEWUI.space.size}},direction:{type:String,validator(a){return _(a,["horizontal","vertical"])},default:"horizontal"},align:{type:String,validator(a){return _(a,["start","end","center","baseline","stretch"])}},wrap:{type:Boolean,default:!1},split:{type:Boolean,default:!1},type:{type:String,validator(a){return _(a,["inline-flex","flex"])},default:"inline-flex"}},computed:{mergedAlign(){if(!this.align){if(this.direction==="horizontal")return"center";if(this.type==="flex")return"stretch"}return this.align},classes(){return["ivu-space",`ivu-space-${this.direction}`,{"ivu-space-flex":this.type==="flex","ivu-space-wrap":this.wrap,[`ivu-space-${this.mergedAlign}`]:this.mergedAlign}]},styles(){const a={};return["number","string"].includes(typeof this.size)&&(a.gap=this.getSize(this.size)),Array.isArray(this.size)&&(this.size.length===1?a.columnGap=this.getSize(this.size[0]):this.size.length>1&&(a.columnGap=this.getSize(this.size[0]),a.rowGap=this.getSize(this.size[1]))),a}},methods:{getSize(a){return`${typeof a=="string"?Ire[a]:a||0}px`},filterEmpty(a=[]){const h=[];return a.forEach(p=>{Array.isArray(p)?h.push(...p):p.type===t.Fragment?h.push(...p.children):h.push(p)}),h.filter(p=>!this.isEmptyElement(p))},isEmptyElement(a){return a&&(a.type===t.Comment||a.type===t.Fragment&&a.children.length===0||a.type===t.Text&&a.children.trim()==="")}},render(){const a=this.filterEmpty(this.$slots.default?this.$slots.default():[]),h=a.length;if(h===0)return null;let p=null;return this.split&&!this.$slots.split?p=t.h(zy,{type:"vertical"}):this.$slots.split&&(p=this.$slots.split()),t.h("div",{class:this.classes,style:this.styles},a.map((C,w)=>{const v=t.h("div",{class:"ivu-space-item"},[C]);return p&&w+1<h?[v,t.h("div",{class:"ivu-space-split"},[p])]:v}))}},Dre={name:"Trigger",props:{mode:String},data(){return{prefix:"ivu-split-trigger",initOffset:0}},computed:{isVertical(){return this.mode==="vertical"},classes(){return[this.prefix,this.isVertical?`${this.prefix}-vertical`:`${this.prefix}-horizontal`]},barConClasses(){return[`${this.prefix}-bar-con`,this.isVertical?"vertical":"horizontal"]}}};function Nre(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.createElementVNode("div",{class:t.normalizeClass(v.barConClasses)},[h[0]||(t.setBlockTracking(-1),h[0]=(t.openBlock(),t.createElementBlock(t.Fragment,null,t.renderList(8,A=>t.createElementVNode("i",{class:t.normalizeClass(`${w.prefix}-bar`),key:`trigger-${A}`},null,2)),64)),t.setBlockTracking(1),h[0])],2)],2)}var $re=l(Dre,[["render",Nre]]);const Vre={name:"Split",components:{Trigger:$re},emits:["update:modelValue","on-move-start","on-moving","on-move-end"],props:{modelValue:{type:[Number,String],default:.5},mode:{validator(a){return _(a,["horizontal","vertical"])},default:"horizontal"},min:{type:[Number,String],default:"40px"},max:{type:[Number,String],default:"40px"}},data(){return{prefix:"ivu-split",offset:0,oldOffset:0,isMoving:!1,computedMin:0,computedMax:0,currentValue:.5}},computed:{wrapperClasses(){return[`${this.prefix}-wrapper`,this.isMoving?"no-select":""]},paneClasses(){return[`${this.prefix}-pane`,{[`${this.prefix}-pane-moving`]:this.isMoving}]},isHorizontal(){return this.mode==="horizontal"},anotherOffset(){return 100-this.offset},valueIsPx(){return typeof this.modelValue=="string"},offsetSize(){return this.isHorizontal?"offsetWidth":"offsetHeight"}},methods:{px2percent(a,h){return parseFloat(a)/parseFloat(h)},getComputedThresholdValue(a){let h=this.$refs.outerWrapper[this.offsetSize];return this.valueIsPx?typeof this[a]=="string"?this[a]:h*this[a]:typeof this[a]=="string"?this.px2percent(this[a],h):this[a]},getMin(a,h){return this.valueIsPx?`${Math.min(parseFloat(a),parseFloat(h))}px`:Math.min(a,h)},getMax(a,h){return this.valueIsPx?`${Math.max(parseFloat(a),parseFloat(h))}px`:Math.max(a,h)},getAnotherOffset(a){let h=0;return this.valueIsPx?h=`${this.$refs.outerWrapper[this.offsetSize]-parseFloat(a)}px`:h=1-a,h},handleMove(a){let h=(this.isHorizontal?a.pageX:a.pageY)-this.initOffset,p=this.$refs.outerWrapper[this.offsetSize],C=this.valueIsPx?`${parseFloat(this.oldOffset)+h}px`:this.px2percent(p*this.oldOffset+h,p),w=this.getAnotherOffset(C);parseFloat(C)<=parseFloat(this.computedMin)&&(C=this.getMax(C,this.computedMin)),parseFloat(w)<=parseFloat(this.computedMax)&&(C=this.getAnotherOffset(this.getMax(w,this.computedMax))),a.atMin=this.modelValue===this.computedMin,a.atMax=this.valueIsPx?this.getAnotherOffset(this.modelValue)===this.computedMax:this.getAnotherOffset(this.modelValue).toFixed(5)===this.computedMax.toFixed(5),this.$emit("update:modelValue",C),this.$emit("on-moving",a)},handleUp(){this.isMoving=!1,o(document,"mousemove",this.handleMove),o(document,"mouseup",this.handleUp),this.$emit("on-move-end")},handleMousedown(a){this.initOffset=this.isHorizontal?a.pageX:a.pageY,this.oldOffset=this.modelValue,this.isMoving=!0,s(document,"mousemove",this.handleMove),s(document,"mouseup",this.handleUp),this.$emit("on-move-start")},computeOffset(){t.nextTick(()=>{this.computedMin=this.getComputedThresholdValue("min"),this.computedMax=this.getComputedThresholdValue("max"),this.offset=(this.valueIsPx?this.px2percent(this.modelValue,this.$refs.outerWrapper[this.offsetSize]):this.modelValue)*1e4/100})}},watch:{modelValue(a){a!==this.currentValue&&(this.currentValue=a,this.computeOffset())}},mounted(){t.nextTick(()=>{this.computeOffset()}),s(window,"resize",this.computeOffset)},beforeUnmount(){o(window,"resize",this.computeOffset)}};function Lre(a,h,p,C,w,v){const A=t.resolveComponent("trigger");return t.openBlock(),t.createElementBlock("div",{ref:"outerWrapper",class:t.normalizeClass(v.wrapperClasses)},[v.isHorizontal?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(`${w.prefix}-horizontal`)},[t.createElementVNode("div",{style:t.normalizeStyle({right:`${v.anotherOffset}%`}),class:t.normalizeClass(["left-pane",v.paneClasses])},[t.renderSlot(a.$slots,"left")],6),t.createElementVNode("div",{class:t.normalizeClass(`${w.prefix}-trigger-con`),style:t.normalizeStyle({left:`${w.offset}%`}),onMousedown:h[0]||(h[0]=(...V)=>v.handleMousedown&&v.handleMousedown(...V))},[t.renderSlot(a.$slots,"trigger",{},()=>[t.createVNode(A,{mode:"vertical"})])],38),t.createElementVNode("div",{style:t.normalizeStyle({left:`${w.offset}%`}),class:t.normalizeClass(["right-pane",v.paneClasses])},[t.renderSlot(a.$slots,"right")],6)],2)):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(`${w.prefix}-vertical`)},[t.createElementVNode("div",{style:t.normalizeStyle({bottom:`${v.anotherOffset}%`}),class:t.normalizeClass(["top-pane",v.paneClasses])},[t.renderSlot(a.$slots,"top")],6),t.createElementVNode("div",{class:t.normalizeClass(`${w.prefix}-trigger-con`),style:t.normalizeStyle({top:`${w.offset}%`}),onMousedown:h[1]||(h[1]=(...V)=>v.handleMousedown&&v.handleMousedown(...V))},[t.renderSlot(a.$slots,"trigger",{},()=>[t.createVNode(A,{mode:"horizontal"})])],38),t.createElementVNode("div",{style:t.normalizeStyle({top:`${w.offset}%`}),class:t.normalizeClass(["bottom-pane",v.paneClasses])},[t.renderSlot(a.$slots,"bottom")],6)],2))],2)}var pR=l(Vre,[["render",Lre]]);const Ud="ivu-steps",mR="ivu-icon",Bre={name:"Step",inject:["StepsInstance"],props:{status:{validator(a){return _(a,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:Ud,id:ee(6)}},computed:{wrapClasses(){return[`${Ud}-item`,`${Ud}-status-${this.currentStatus}`,{[`${Ud}-custom`]:!!this.icon||!!this.$slots.icon,[`${Ud}-next-error`]:this.nextError}]},iconClasses(){let a="";return this.icon?a=this.icon:this.currentStatus==="finish"?a="ios-checkmark":this.currentStatus==="error"&&(a="ios-close"),[`${Ud}-icon`,`${mR}`,{[`${mR}-${a}`]:a!==""}]},stepNumber(){return this.StepsInstance.steps.findIndex(a=>a.id===this.id)+1},total(){return this.StepsInstance.direction==="horizontal"?this.StepsInstance.steps.length:1},currentStatus(){let a="";if(this.status)a=this.status;else{const h=this.StepsInstance,p=h.current,C=h.steps.findIndex(w=>w.id===this.id);C===p?h.status!=="error"?a="process":a="error":C<p?a="finish":a="wait"}return a},nextError(){let a=!1;const h=this.StepsInstance,p=h.steps.findIndex(C=>C.id===this.id);return p+1<h.steps.length&&h.steps[p+1].currentStatus==="error"&&(a=!0),a}},beforeMount(){this.StepsInstance.addStep(this.id,this)},beforeUnmount(){this.StepsInstance.removeStep(this.id)}},Ure=[t.createElementVNode("i",null,null,-1)],Fre={key:0},zre={key:1,class:"ivu-steps-icon"};function Xre(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses)},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-tail"])},Ure,2),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-head"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-head-inner"])},[!p.icon&&!a.$slots.icon&&v.currentStatus!=="finish"&&v.currentStatus!=="error"?(t.openBlock(),t.createElementBlock("span",Fre,t.toDisplayString(v.stepNumber),1)):a.$slots.icon?(t.openBlock(),t.createElementBlock("span",zre,[t.renderSlot(a.$slots,"icon")])):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(v.iconClasses)},null,2))],2)],2),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-main"])},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-title"])},[t.renderSlot(a.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(p.title),1)])],2),p.content||a.$slots.content?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-content"])},[t.renderSlot(a.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(p.content),1)])],2)):t.createCommentVNode("",!0)],2)],2)}var gR=l(Bre,[["render",Xre]]);const ES="ivu-steps",Wre={name:"Steps",provide(){return{StepsInstance:this}},props:{current:{type:Number,default:0},status:{validator(a){return _(a,["wait","process","finish","error"])},default:"process"},size:{validator(a){return _(a,["small"])}},direction:{validator(a){return _(a,["horizontal","vertical"])},default:"horizontal"}},data(){return{steps:[]}},computed:{classes(){return[`${ES}`,`${ES}-${this.direction}`,{[`${ES}-${this.size}`]:!!this.size}]},children(){return this.steps.map(a=>a.step)}},methods:{addStep(a,h){this.steps.push({id:a,step:h})},removeStep(a){const h=this.steps.findIndex(p=>p.id===a);this.steps.splice(h,1)}}};function Qre(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes)},[t.renderSlot(a.$slots,"default")],2)}var vR=l(Wre,[["render",Qre]]);const tu="ivu-menu",Hre={name:"Submenu",mixins:[yS,ia],components:{Icon:S,Drop:Ge,CollapseTransition:_S},provide(){return{SubmenuInstance:this}},props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{prefixCls:tu,active:!1,opened:!1,dropWidth:parseFloat(I(this.$el,"width")),id:ee(6),childSubmenuList:[]}},computed:{classes(){return[`${tu}-submenu`,{[`${tu}-item-active`]:this.active&&!this.hasParentSubmenu,[`${tu}-opened`]:this.opened,[`${tu}-submenu-disabled`]:this.disabled,[`${tu}-submenu-has-parent-submenu`]:this.hasParentSubmenu,[`${tu}-child-item-active`]:this.active}]},accordion(){return this.menu.accordion},dropStyle(){let a={};return this.dropWidth&&(a.minWidth=`${this.dropWidth}px`),a},titleStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}},arrowType(){const a=this.globalConfig;let h="ios-arrow-down";return a&&(a.menu.customArrow?h="":a.menu.arrow&&(h=a.menu.arrow)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.menu.customArrow&&(h=a.menu.customArrow),h},arrowSize(){const a=this.globalConfig;let h="";return a&&a.menu.arrowSize&&(h=a.menu.arrowSize),h}},methods:{handleMouseenter(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!0},250))},handleMouseleave(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!1},150))},handleClick(){if(this.disabled||this.mode==="horizontal")return;const a=this.opened;this.opened=!a,this.menu.updateOpenKeys(this.name)},addSubmenu(){const a=this.MenuInstance;a.submenuList||(a.submenuList=[]),a.submenuList.push({id:this.id,submenu:this});const h=$(this,"Submenu");h&&(h.childSubmenuList||(h.childSubmenuList=[]),h.childSubmenuList.push({id:this.id,submenu:this}))},removeSubmenu(){const a=this.MenuInstance;if(a.submenuList&&a.submenuList.length){const p=a.submenuList.findIndex(C=>C.id===this.id);a.submenuList.splice(p,1)}const h=$(this,"Submenu");if(h&&h.childSubmenuList&&h.childSubmenuList.length){const p=h.childSubmenuList.findIndex(C=>C.id===this.id);h.childSubmenuList.splice(p,1)}},handleMenuItemSelect(a){this.mode==="horizontal"&&(this.opened=!1),this.MenuInstance.handleMenuItemSelect(a)},handleUpdateActiveName(a){$(this,"Submenu")&&this.SubmenuInstance.handleUpdateActiveName(a),this.childSubmenuList&&this.childSubmenuList.length&&this.childSubmenuList.map(h=>h.submenu).forEach(h=>{h.active=!1}),this.active=a}},watch:{mode(a){a==="horizontal"&&this.$refs.drop.update()},opened(a){this.mode!=="vertical"&&(a?(this.dropWidth=parseFloat(I(this.$el,"width")),this.$refs.drop.update()):this.$refs.drop.destroy())}},mounted(){this.addSubmenu()},beforeUnmount(){this.removeSubmenu()}};function Gre(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("collapse-transition"),H=t.resolveComponent("Drop");return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.classes),onMouseenter:h[1]||(h[1]=(...X)=>v.handleMouseenter&&v.handleMouseenter(...X)),onMouseleave:h[2]||(h[2]=(...X)=>v.handleMouseleave&&v.handleMouseleave(...X))},[t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-submenu-title"]),ref:"reference",onClick:h[0]||(h[0]=t.withModifiers((...X)=>v.handleClick&&v.handleClick(...X),["stop"])),style:t.normalizeStyle(v.titleStyle)},[t.renderSlot(a.$slots,"title"),t.createVNode(A,{type:v.arrowType,custom:v.customArrowType,size:v.arrowSize,class:t.normalizeClass([w.prefixCls+"-submenu-title-icon"])},null,8,["type","custom","size","class"])],6),a.mode==="vertical"?(t.openBlock(),t.createBlock(V,{key:0,ready:a.menu.ready},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls])},[t.renderSlot(a.$slots,"default")],2),[[t.vShow,w.opened]])]),_:3},8,["ready"])):t.createCommentVNode("",!0),a.mode==="horizontal"?(t.openBlock(),t.createBlock(H,{key:1,ref:"drop",visible:w.opened,placement:"bottom","transition-name":"slide-up",styles:v.dropStyle},{default:t.withCtx(()=>[t.createElementVNode("ul",{class:t.normalizeClass([w.prefixCls+"-drop-list"])},[t.renderSlot(a.$slots,"default")],2)]),_:3},8,["visible","styles"])):t.createCommentVNode("",!0)],34)}var yR=l(Hre,[["render",Gre]]);const bR={name:"Submit",inject:["LoginInstance"],props:{},methods:{handleSubmit(){this.LoginInstance.handleSubmit()}},render(){const a=Object.assign({size:"large",type:"primary",long:!0},this.$attrs),h=t.h(cs,{...a,onClick:this.handleSubmit},this.$slots.default||(()=>""));return t.h("div",{class:"ivu-login-submit"},[h])}},Fd="ivu-switch",Yre={name:"iSwitch",mixins:[fi],emits:["update:modelValue","on-change"],props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},size:{validator(a){return _(a,["large","small","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},name:{type:String},loading:{type:Boolean,default:!1},trueColor:{type:String},falseColor:{type:String},beforeChange:Function},data(){return{currentValue:this.modelValue}},computed:{wrapClasses(){return[`${Fd}`,{[`${Fd}-checked`]:this.currentValue===this.trueValue,[`${Fd}-disabled`]:this.itemDisabled,[`${Fd}-${this.size}`]:!!this.size,[`${Fd}-loading`]:this.loading}]},wrapStyles(){let a={};return this.trueColor&&this.currentValue===this.trueValue?(a["border-color"]=this.trueColor,a["background-color"]=this.trueColor):this.falseColor&&this.currentValue===this.falseValue&&(a["border-color"]=this.falseColor,a["background-color"]=this.falseColor),a},innerClasses(){return`${Fd}-inner`}},methods:{handleToggle(){const a=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=a,this.$emit("update:modelValue",a),this.$emit("on-change",a),this.handleFormItemChange("change",a)},toggle(a){if(a.preventDefault(),this.itemDisabled||this.loading)return!1;if(!this.beforeChange)return this.handleToggle();const h=this.beforeChange();h&&h.then?h.then(()=>{this.handleToggle()}):this.handleToggle()}},watch:{modelValue(a){if(a!==this.trueValue&&a!==this.falseValue&&a!==null)throw"Value should be trueValue or falseValue.";this.currentValue=a}}},jre=["name","value"];function qre(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("span",{tabindex:"0",class:t.normalizeClass(v.wrapClasses),style:t.normalizeStyle(v.wrapStyles),onClick:h[0]||(h[0]=(...A)=>v.toggle&&v.toggle(...A)),onKeydown:h[1]||(h[1]=t.withKeys((...A)=>v.toggle&&v.toggle(...A),["space"]))},[t.createElementVNode("input",{type:"hidden",name:p.name,value:w.currentValue},null,8,jre),t.createElementVNode("span",{class:t.normalizeClass(v.innerClasses)},[w.currentValue===p.trueValue?t.renderSlot(a.$slots,"open",{key:0}):t.createCommentVNode("",!0),w.currentValue===p.falseValue?t.renderSlot(a.$slots,"close",{key:1}):t.createCommentVNode("",!0)],2)],38)}var PS=l(Yre,[["render",qre]]),Zre={name:"TableRenderHeader",props:{render:Function,column:Object,index:Number},render(){const a={column:this.column,index:this.index};return this.render(t.h,a)}},AS={methods:{alignCls(a,h={}){let p="";return h.cellClassName&&a.key&&h.cellClassName[a.key]&&(p=h.cellClassName[a.key]),[`${this.prefixCls}-column-${a.__id}`,{[`${p}`]:p,[`${a.className}`]:a.className,[`${this.prefixCls}-column-${a.align}`]:a.align,[`${this.prefixCls}-hidden`]:this.fixed==="left"&&a.fixed!=="left"||this.fixed==="right"&&a.fixed!=="right"||!this.fixed&&a.fixed&&(a.fixed==="left"||a.fixed==="right")}]},isPopperShow(a){return a.filters&&(!this.fixed&&!a.fixed||this.fixed==="left"&&a.fixed==="left"||this.fixed==="right"&&a.fixed==="right")},setCellWidth(a){let h="";return a.width?h=a.width:this.columnsWidth[a._index]&&(h=this.columnsWidth[a._index].width),h==="0"&&(h=""),h}}};const Kre={name:"TableHead",mixins:[AS,ji],components:{CheckboxGroup:X_,Checkbox:Pd,Poptip:SS,iButton:cs,renderHeader:Zre},props:{prefixCls:String,styleObject:Object,columns:Array,objData:Object,data:Array,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},columnRows:Array,fixedColumnRows:Array},data(){return{draggingColumn:null,dragging:!1,dragState:{}}},computed:{styles(){const a=Object.assign({},this.styleObject),h=parseInt(this.styleObject.width);return a.width=`${h}px`,a},isSelectAll(){let a=!0;this.data.length||(a=!1);let h=!0;for(let p in this.objData){const C=this.objData[p];if(!C._isChecked&&!C._isDisabled){a=!1;break}else C.children&&C.children.length&&(a=this.isChildrenSelected(C,a));C._isDisabled&&!C._isChecked?C.children&&C.children.length&&(h=this.isChildrenAllDisabledAndUnSelected(C,h)):h=!1}return h&&(a=!1),a},headRows(){return this.columnRows.length>1?this.fixed?this.fixedColumnRows:this.columnRows:[this.columns]},isSelectDisabled(){let a=!0;if(this.data.length)for(let h in this.objData){const p=this.objData[h];p._isDisabled?p.children&&p.children.length&&(a=this.isChildrenDisabled(p,a)):a=!1}return a}},methods:{cellClasses(a){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&a.fixed&&(a.fixed==="left"||a.fixed==="right"),[`${this.prefixCls}-cell-with-selection`]:a.type==="selection"}]},scrollBarCellClass(){let a=!1;for(let h in this.headRows)for(let p in this.headRows[h]){if(this.headRows[h][p].fixed==="right"){a=!0;break}if(a)break}return[{[`${this.prefixCls}-hidden`]:a}]},itemClasses(a,h){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:a._filterChecked[0]===h.value}]},itemAllClasses(a){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:!a._filterChecked.length}]},selectAll(){const a=!this.isSelectAll;this.$parent.selectAll(a)},handleSort(a,h){const p=this.columns.find(w=>w._index===a),C=p._index;p._sortType===h&&(h="normal"),this.$parent.handleSort(C,h)},handleSortByHead(a){const h=this.columns.find(p=>p._index===a);if(h.sortable){const p=h._sortType;p==="normal"?this.handleSort(a,"asc"):p==="asc"?this.handleSort(a,"desc"):this.handleSort(a,"normal")}},handleFilter(a){this.$parent.handleFilter(a)},handleSelect(a,h){this.$parent.handleFilterSelect(a,h)},handleReset(a){this.$parent.handleFilterReset(a)},handleFilterHide(a){this.$parent.handleFilterHide(a)},getColumn(a,h){if(this.columnRows.length>1){const p=this.headRows[a][h].__id;return this.columns.filter(C=>C.__id===p)[0]}else return this.headRows[a][h]},handleMouseDown(a,h){if(!this.$isServer&&r&&this.draggingColumn){this.dragging=!0;const p=this.$parent,C=p.$el.getBoundingClientRect().left,w=this.$el.querySelector(`th.ivu-table-column-${a.__id}`).getBoundingClientRect(),v=w.left-C+30;p.showResizeLine=!0,this.dragState={startMouseLeft:h.clientX,startLeft:w.right-C,startColumnLeft:w.left-C,tableLeft:C};const A=p.$refs.resizeLine;A.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const V=X=>{const Y=X.clientX-this.dragState.startMouseLeft,le=this.dragState.startLeft+Y;A.style.left=Math.max(v,le)+"px"},H=()=>{if(this.dragging){const{startColumnLeft:X,startLeft:Y}=this.dragState,le=parseInt(A.style.left,10)-X,xe=p.allColumns.find(be=>be.__id===a.__id);xe&&(xe.width=le,a.width=le,p.handleResize()),p.$emit("on-column-width-resize",xe.width,Y-X,a,h),r&&(document.body.style.cursor=""),this.dragging=!1,this.draggingColumn=null,this.dragState={},p.showResizeLine=!1}!r||(document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",H),document.onselectstart=null,document.ondragstart=null)};if(!r)return;document.addEventListener("mousemove",V),document.addEventListener("mouseup",H)}},handleMouseMove(a,h){let p=h.target;for(;p&&p.tagName!=="TH";)p=p.parentNode;if(!(!a||!a.resizable)&&r&&!this.dragging){let C=p.getBoundingClientRect();const w=document.body.style;C.width>12&&C.right-h.pageX<8?(w.cursor="col-resize",this.draggingColumn=a):this.dragging||(w.cursor="",this.draggingColumn=null)}},handleMouseOut(){this.$isServer||r&&(document.body.style.cursor="")},isChildrenSelected(a,h){let p=h;return a.children&&a.children.length&&a.children.forEach(C=>{!C._isChecked&&!C._isDisabled?p=!1:C.children&&C.children.length&&(p=this.isChildrenSelected(C,p))}),p},isChildrenAllDisabledAndUnSelected(a,h){let p=h;return a.children&&a.children.length&&a.children.forEach(C=>{C._isDisabled&&!C._isChecked?C.children&&C.children.length&&(p=this.isChildrenAllDisabledAndUnSelected(C,p)):p=!1}),p},isChildrenDisabled(a,h){let p=h;return a.children&&a.children.length&&a.children.forEach(C=>{C._isDisabled?C.children&&C.children.length&&(p=this.isChildrenDisabled(C,p)):p=!1}),p}}},Jre=["width"],ese=["width"],tse=["colspan","rowspan"],ise={key:0},nse=["onClick"],rse=["onClick"],sse=["onClick"],ose=["onMousedown","onMousemove"],ase=["rowspan"];function lse(a,h,p,C,w,v){const A=t.resolveComponent("render-header"),V=t.resolveComponent("Checkbox"),H=t.resolveComponent("checkbox"),X=t.resolveComponent("checkbox-group"),Y=t.resolveComponent("i-button"),le=t.resolveComponent("Poptip");return t.openBlock(),t.createElementBlock("table",{cellspacing:"0",cellpadding:"0",border:"0",style:t.normalizeStyle(v.styles)},[t.createElementVNode("colgroup",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.columns,(xe,be)=>(t.openBlock(),t.createElementBlock("col",{key:be,width:a.setCellWidth(xe)},null,8,Jre))),128)),a.$parent.showVerticalScrollBar?(t.openBlock(),t.createElementBlock("col",{key:0,width:a.$parent.scrollBarWidth},null,8,ese)):t.createCommentVNode("",!0)]),t.createElementVNode("thead",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.headRows,(xe,be)=>(t.openBlock(),t.createElementBlock("tr",{key:be},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(xe,(ge,se)=>(t.openBlock(),t.createElementBlock("th",{key:se,colspan:ge.colSpan,rowspan:ge.rowSpan,class:t.normalizeClass(a.alignCls(ge))},[t.createElementVNode("div",{class:t.normalizeClass(v.cellClasses(ge))},[ge.type==="expand"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[ge.renderHeader?(t.openBlock(),t.createBlock(A,{key:1,render:ge.renderHeader,column:ge,index:se},null,8,["render","column","index"])):(t.openBlock(),t.createElementBlock("span",ise,t.toDisplayString(ge.title||""),1))],64)):ge.type==="selection"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[ge.hideSelectAll?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(V,{key:0,"model-value":v.isSelectAll,disabled:v.isSelectDisabled,onOnChange:v.selectAll},null,8,["model-value","disabled","onOnChange"]))],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[ge.renderHeader?(t.openBlock(),t.createBlock(A,{key:1,render:ge.renderHeader,column:ge,index:se},null,8,["render","column","index"])):(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass({[p.prefixCls+"-cell-sort"]:ge.sortable}),onClick:Ae=>ge.sortable&&v.handleSortByHead(v.getColumn(be,se)._index)},t.toDisplayString(ge.title||"#"),11,nse)),ge.sortable?(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass([p.prefixCls+"-sort"])},[t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropup",{on:v.getColumn(be,se)._sortType==="asc"}]),onClick:Ae=>v.handleSort(v.getColumn(be,se)._index,"asc")},null,10,rse),t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropdown",{on:v.getColumn(be,se)._sortType==="desc"}]),onClick:Ae=>v.handleSort(v.getColumn(be,se)._index,"desc")},null,10,sse)],2)):t.createCommentVNode("",!0),a.isPopperShow(ge)?(t.openBlock(),t.createBlock(le,{key:3,modelValue:v.getColumn(be,se)._filterVisible,"onUpdate:modelValue":Ae=>v.getColumn(be,se)._filterVisible=Ae,placement:"bottom","popper-class":"ivu-table-popper",transfer:"",capture:!1,onOnPopperHide:Ae=>v.handleFilterHide(v.getColumn(be,se)._index)},t.createSlots({default:t.withCtx(()=>[t.createElementVNode("span",{class:t.normalizeClass([p.prefixCls+"-filter"])},[t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-ios-funnel",{on:v.getColumn(be,se)._isFiltered}])},null,2)],2)]),_:2},[v.getColumn(be,se)._filterMultiple?{name:"content",fn:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass([p.prefixCls+"-filter-list"])},[t.createElementVNode("div",{class:t.normalizeClass([p.prefixCls+"-filter-list-item"])},[t.createVNode(X,{modelValue:v.getColumn(be,se)._filterChecked,"onUpdate:modelValue":Ae=>v.getColumn(be,se)._filterChecked=Ae},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ge.filters,(Ae,$t)=>(t.openBlock(),t.createBlock(H,{key:$t,label:Ae.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(Ae.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],2),t.createElementVNode("div",{class:t.normalizeClass([p.prefixCls+"-filter-footer"])},[t.createVNode(Y,{type:"text",size:"small",disabled:!v.getColumn(be,se)._filterChecked.length,onClick:Ae=>v.handleFilter(v.getColumn(be,se)._index)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.t("i.table.confirmFilter")),1)]),_:2},1032,["disabled","onClick"]),t.createVNode(Y,{type:"text",size:"small",onClick:Ae=>v.handleReset(v.getColumn(be,se)._index)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.t("i.table.resetFilter")),1)]),_:2},1032,["onClick"])],2)],2)]),key:"0"}:{name:"content",fn:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass([p.prefixCls+"-filter-list"])},[t.createElementVNode("ul",{class:t.normalizeClass([p.prefixCls+"-filter-list-single"])},[t.createElementVNode("li",{class:t.normalizeClass(v.itemAllClasses(v.getColumn(be,se))),onClick:Ae=>v.handleReset(v.getColumn(be,se)._index)},t.toDisplayString(a.t("i.table.clearFilter")),11,["onClick"]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(ge.filters,Ae=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.itemClasses(v.getColumn(be,se),Ae)),key:Ae.value,onClick:$t=>v.handleSelect(v.getColumn(be,se)._index,Ae.value)},t.toDisplayString(Ae.label),11,["onClick"]))),128))],2)],2)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","onOnPopperHide"])):t.createCommentVNode("",!0)],64))],2),ge.resizable?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-table-header-resizable",onMousedown:Ae=>v.handleMouseDown(ge,Ae),onMousemove:Ae=>v.handleMouseMove(ge,Ae),onMouseout:h[0]||(h[0]=(...Ae)=>v.handleMouseOut&&v.handleMouseOut(...Ae))},null,40,ose)):t.createCommentVNode("",!0)],10,tse))),128)),a.$parent.showVerticalScrollBar&&be===0?(t.openBlock(),t.createElementBlock("th",{key:0,class:t.normalizeClass(v.scrollBarCellClass()),rowspan:v.headRows.length},null,10,ase)):t.createCommentVNode("",!0)]))),128))])],4)}var cse=l(Kre,[["render",lse]]);const hse={props:{row:Object,prefixCls:String,draggable:Boolean,isChildren:Boolean},computed:{objData(){return this.$parent.objData}},methods:{onDrag(a,h){a.dataTransfer.setData("index",h)},onDrop(a,h){const p=a.dataTransfer.getData("index");this.$parent.$parent.dragAndDrop(p,h),a.preventDefault()},allowDrop(a){a.preventDefault()},rowClasses(a){const h=this.isChildren?this.$parent.$parent.getDataByRowKey(this.row._rowKey):this.objData[a];return[`${this.prefixCls}-row`,this.rowClsName(a),{[`${this.prefixCls}-row-highlight`]:h&&h._isHighlight,[`${this.prefixCls}-row-hover`]:h&&h._isHover}]},rowClsName(a){return this.$parent.$parent.rowClassName(this.objData[a],a)}}},use=["draggable"];function dse(a,h,p,C,w,v){return p.draggable?(t.openBlock(),t.createElementBlock("tr",{key:0,class:t.normalizeClass(v.rowClasses(p.row._index)),draggable:p.draggable,onDragstart:h[0]||(h[0]=A=>v.onDrag(A,p.row._index)),onDrop:h[1]||(h[1]=A=>v.onDrop(A,p.row._index)),onDragover:h[2]||(h[2]=A=>v.allowDrop(A))},[t.renderSlot(a.$slots,"default")],42,use)):(t.openBlock(),t.createElementBlock("tr",{key:1,class:t.normalizeClass(v.rowClasses(p.row._index)),draggable:!1},[t.renderSlot(a.$slots,"default")],2))}var RS=l(hse,[["render",dse]]),IS={name:"TableExpand",props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render(){const a={row:this.row,index:this.index};return this.column&&(a.column=this.column),this.render(t.h,a)}},fse={name:"TableSlot",inject:["TableInstance"],props:{row:Object,index:Number,column:{type:Object,default:null},display:{type:String,default:"block"}},render(){return t.h("div",{class:{"ivu-table-cell-slot":!0,"ivu-table-cell-slot-inline":this.display==="inline","ivu-table-cell-slot-inline-block":this.display==="inline-block"}},this.TableInstance.$slots[this.column.slot]({row:this.row,column:this.column,index:this.index}))}};const pse={name:"TableCell",components:{Icon:S,Checkbox:Pd,TableExpand:IS,TableSlot:fse,Tooltip:vl},inject:["TableInstance"],props:{prefixCls:String,row:Object,column:Object,naturalIndex:Number,index:Number,checked:Boolean,disabled:Boolean,expanded:Boolean,fixed:{type:[Boolean,String],default:!1},treeNode:Boolean,treeLevel:{type:Number,default:0}},data(){return{renderType:"",uid:-1,context:this.$parent.$parent.$parent.currentContext,showTooltip:!1}},computed:{classes(){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&this.column.fixed&&(this.column.fixed==="left"||this.column.fixed==="right"),[`${this.prefixCls}-cell-ellipsis`]:this.column.ellipsis||!1,[`${this.prefixCls}-cell-with-expand`]:this.renderType==="expand",[`${this.prefixCls}-cell-with-selection`]:this.renderType==="selection"}]},expandCls(){return[`${this.prefixCls}-cell-expand`,{[`${this.prefixCls}-cell-expand-expanded`]:this.expanded}]},showChildren(){let a=!1;if(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot"){const h=this.row;(h.children&&h.children.length||"_loading"in h)&&this.column.tree&&(a=!0)}return a},showTreeNode(){let a=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(a=!0),a},showLevel(){let a=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(a=!0),a},treeLevelStyle(){return{"padding-left":this.treeLevel*this.TableInstance.indentSize+"px"}},childrenExpand(){return this.TableInstance.getDataByRowKey(this.row._rowKey)._isShowChildren},childrenLoading(){const a=this.TableInstance.getDataByRowKey(this.row._rowKey);return"_loading"in a&&a._loading}},methods:{toggleSelect(){this.treeNode?this.$parent.$parent.$parent.toggleSelect(this.index,this.row._rowKey):this.$parent.$parent.$parent.toggleSelect(this.index)},toggleExpand(){this.$parent.$parent.$parent.toggleExpand(this.index)},handleClick(){},handleTooltipIn(){if(!r)return;const a=this.$refs.content;let h=document.createRange();h.setStart(a,0),h.setEnd(a,a.childNodes.length);const p=h.getBoundingClientRect().width;this.showTooltip=p>a.offsetWidth,h=null},handleToggleTree(){this.$parent.$parent.$parent.toggleTree(this.row._rowKey)}},created(){this.column.type==="index"?this.renderType="index":this.column.type==="selection"?this.renderType="selection":this.column.type==="html"?this.renderType="html":this.column.type==="expand"?this.renderType="expand":this.column.render?this.renderType="render":this.column.slot?this.renderType="slot":this.renderType="normal"}},mse={key:0},gse={key:4,class:"ivu-table-cell-tree ivu-table-cell-tree-empty"},vse=["innerHTML"],yse={key:1};function bse(a,h,p,C,w,v){const A=t.resolveComponent("Checkbox"),V=t.resolveComponent("Icon"),H=t.resolveComponent("Tooltip"),X=t.resolveComponent("table-expand"),Y=t.resolveComponent("table-slot");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),ref:"cell"},[w.renderType==="index"?(t.openBlock(),t.createElementBlock("span",mse,t.toDisplayString(p.column.indexMethod?p.column.indexMethod(p.row,p.naturalIndex):p.naturalIndex+1),1)):t.createCommentVNode("",!0),w.renderType==="selection"?(t.openBlock(),t.createBlock(A,{key:1,"model-value":p.checked,onClick:t.withModifiers(v.handleClick,["stop"]),onOnChange:v.toggleSelect,disabled:p.disabled},null,8,["model-value","onClick","onOnChange","disabled"])):t.createCommentVNode("",!0),v.showLevel?(t.openBlock(),t.createElementBlock("div",{key:2,class:"ivu-table-cell-tree-level",style:t.normalizeStyle(v.treeLevelStyle)},null,4)):t.createCommentVNode("",!0),v.showChildren?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(["ivu-table-cell-tree",{"ivu-table-cell-tree-loading":v.childrenLoading}]),onClick:h[0]||(h[0]=t.withModifiers((...le)=>v.handleToggleTree&&v.handleToggleTree(...le),["prevent","stop"]))},[v.childrenLoading?(t.openBlock(),t.createBlock(V,{key:0,type:"ios-loading",class:"ivu-load-loop"})):v.childrenExpand?(t.openBlock(),t.createBlock(V,{key:2,type:"ios-remove"})):(t.openBlock(),t.createBlock(V,{key:1,type:"ios-add"}))],2)):v.showTreeNode?(t.openBlock(),t.createElementBlock("div",gse)):t.createCommentVNode("",!0),w.renderType==="html"?(t.openBlock(),t.createElementBlock("span",{key:5,innerHTML:p.row[p.column.key]},null,8,vse)):t.createCommentVNode("",!0),w.renderType==="normal"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:6},[p.column.tooltip?(t.openBlock(),t.createBlock(H,{key:0,transfer:"",content:p.row[p.column.key],theme:p.column.tooltipTheme?p.column.tooltipTheme:v.TableInstance.tooltipTheme,disabled:!w.showTooltip,"max-width":p.column.tooltipMaxWidth?p.column.tooltipMaxWidth:v.TableInstance.tooltipMaxWidth,class:"ivu-table-cell-tooltip"},{default:t.withCtx(()=>[t.createElementVNode("span",{ref:"content",onMouseenter:h[1]||(h[1]=(...le)=>v.handleTooltipIn&&v.handleTooltipIn(...le)),class:"ivu-table-cell-tooltip-content"},t.toDisplayString(p.row[p.column.key]),545)]),_:1},8,["content","theme","disabled","max-width"])):(t.openBlock(),t.createElementBlock("span",yse,t.toDisplayString(p.row[p.column.key]),1))],64)):t.createCommentVNode("",!0),w.renderType==="expand"&&!p.row._disableExpand?(t.openBlock(),t.createElementBlock("div",{key:7,class:t.normalizeClass(v.expandCls),onClick:h[2]||(h[2]=(...le)=>v.toggleExpand&&v.toggleExpand(...le))},[t.createVNode(V,{type:"ios-arrow-forward"})],2)):t.createCommentVNode("",!0),w.renderType==="render"?(t.openBlock(),t.createBlock(X,{key:8,row:p.row,column:p.column,index:p.index,render:p.column.render},null,8,["row","column","index","render"])):t.createCommentVNode("",!0),w.renderType==="slot"?(t.openBlock(),t.createBlock(Y,{key:9,row:p.row,column:p.column,display:p.column.display||"block",index:p.index},null,8,["row","column","display","index"])):t.createCommentVNode("",!0)],2)}var DS=l(pse,[["render",bse]]);const xse={name:"TableBody",mixins:[AS],components:{TableCell:DS,Expand:IS,TableTr:RS},props:{prefixCls:String,styleObject:Object,columns:Array,data:Array,objData:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1},rowKey:{type:[Boolean,String],default:!1}},computed:{expandRender(){let a=function(){return""};for(let h=0;h<this.columns.length;h++){const p=this.columns[h];p.type&&p.type==="expand"&&p.render&&(a=p.render)}return a}},methods:{rowChecked(a){return this.objData[a]&&this.objData[a]._isChecked},rowDisabled(a){return this.objData[a]&&this.objData[a]._isDisabled},rowExpanded(a){return this.objData[a]&&this.objData[a]._isExpanded},rowStatusByRowKey(a,h){return this.$parent.getDataByRowKey(h)[a]},handleMouseIn(a,h,p){h.stopPropagation(),this.$parent.handleMouseIn(a,p)},handleMouseOut(a,h,p){h.stopPropagation(),this.$parent.handleMouseOut(a,p)},clickCurrentRow(a,h,p){this.$parent.clickCurrentRow(a,p)},dblclickCurrentRow(a,h,p){h.stopPropagation(),this.$parent.dblclickCurrentRow(a,p)},clickCell(a,h,p,C){this.$parent.$emit("on-cell-click",a,h,a[p],C)},contextmenuCurrentRow(a,h,p){h.stopPropagation(),this.$parent.contextMenu&&h.preventDefault(),this.$parent.contextmenuCurrentRow(a,p,h)},selectStartCurrentRow(){this.$parent.contextMenu},getSpan(a,h,p,C){const w=this.$parent.spanMethod;if(typeof w=="function"){const v=w({row:a,column:h,rowIndex:p,columnIndex:C});let A=1,V=1;return Array.isArray(v)?(A=v[0],V=v[1]):typeof v=="object"&&(A=v.rowspan,V=v.colspan),{rowspan:A,colspan:V}}else return{}},showWithSpan(a,h,p,C){const w=this.getSpan(a,h,p,C);return!("rowspan"in w&&w.rowspan===0||"colspan"in w&&w.colspan===0)},isTrShow(a){let h=!0,p;for(let C in this.objData){const w=this.objData[C],v=w._isShowChildren;if(w._rowKey===a){h=h&&v;break}else if(w.children&&w.children.length&&(p=this.getTrStatus(a,w,h&&v),p[0]&&p[0]._rowKey===a))return p[1]}return h},getTrStatus(a,h,p){let C=p,w;if(h.children&&h.children.length)for(let v=0;v<h.children.length;v++){const A=h.children[v],V=A._isShowChildren;if(A._rowKey===a){w=A,C=C&&V;break}else if(A.children&&A.children.length){const H=this.getTrStatus(a,A,C&&V);if(H[0]&&H[0]._rowKey===a)return H}}return[w,C]},getLevel(a){let h,p;for(let C=0;C<this.data.length;C++){const w=this.data[C];if(w[this.rowKey]===a){h=0;break}else if(w.children&&w.children.length&&(p=this.getChildLevel(w,a,1),p[0]&&p[0][this.rowKey]===a))return p[1]}return h},getChildLevel(a,h,p){let C,w;if(a.children&&a.children.length)for(let v=0;v<a.children.length;v++){const A=a.children[v];if(A[this.rowKey]===h){w=A,C=p;break}else if(A.children&&A.children.length){const V=this.getChildLevel(A,h,p+1);if(V[0]&&V[0][this.rowKey]===h)return V}}return[w,C]},getChildNode(a,h,p){return h.children&&h.children.length&&h.children.forEach((C,w)=>{let v=[];this.columns.forEach((H,X)=>{if(this.showWithSpan(C,H,w,X)){const Y=a(DS,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:C,column:H,"natural-index":w,index:C._index,checked:this.rowStatusByRowKey("_isChecked",C._rowKey),disabled:this.rowStatusByRowKey("_isDisabled",C._rowKey),expanded:this.rowStatusByRowKey("_isExpanded",C._rowKey),treeNode:!0,treeLevel:this.getLevel(C._rowKey),key:H._columnKey}),le=a("td",{class:this.alignCls(H,C),...this.getSpan(C,H,w,X),onClick:xe=>this.clickCell(C,H,H.key,xe)},[Y]);v.push(le)}});const A={};this.isTrShow(h._rowKey)||(A.display="none");const V=a(RS,{draggable:!1,row:C,"prefix-cls":this.prefixCls,isChildren:!0,style:A,key:this.rowKey?C._rowKey:w,onMouseenter:H=>this.handleMouseIn(C._index,H,C._rowKey),onMouseleave:H=>this.handleMouseOut(C._index,H,C._rowKey),onClick:H=>this.clickCurrentRow(C._index,H,C._rowKey),onDblclick:H=>this.dblclickCurrentRow(C._index,H,C._rowKey),onContextmenu:H=>this.contextmenuCurrentRow(C._index,H,C._rowKey),onSelectstart:H=>this.selectStartCurrentRow(C._index,H,C._rowKey)},()=>v);p.push(V),C.children&&C.children.length&&this.getChildNode(a,C,p)}),p}},render(){let a=[];this.columns.forEach(w=>{const v=t.h("col",{width:this.setCellWidth(w)});a.push(v)});const h=t.h("colgroup",{},a);let p=[];this.data.forEach((w,v)=>{let A=[];this.columns.forEach((H,X)=>{if(this.showWithSpan(w,H,v,X)){const Y=t.h(DS,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:w,column:H,"natural-index":v,index:w._index,checked:this.rowChecked(w._index),disabled:this.rowDisabled(w._index),expanded:this.rowExpanded(w._index),key:H._columnKey}),le=t.h("td",{class:this.alignCls(H,w),...this.getSpan(w,H,v,X),onClick:xe=>this.clickCell(w,H,H.key,xe)},[Y]);A.push(le)}});const V=t.h(RS,{draggable:this.draggable,row:w,"prefix-cls":this.prefixCls,key:this.rowKey?w._rowKey:v,onMouseenter:H=>this.handleMouseIn(w._index,H),onMouseleave:H=>this.handleMouseOut(w._index,H),onClick:H=>this.clickCurrentRow(w._index,H),onDblclick:H=>this.dblclickCurrentRow(w._index,H),onContextmenu:H=>this.contextmenuCurrentRow(w._index,H),onSelectstart:H=>this.selectStartCurrentRow(w._index,H)},()=>A);if(p.push(V),this.rowExpanded(w._index)){const H=t.h(IS,{row:w,render:this.expandRender,index:w._index,key:this.rowKey?w._rowKey:v}),X=t.h("td",{colspan:this.columns.length,class:this.prefixCls+"-expanded-cell"},[H]),Y=t.h("tr",{class:{[this.prefixCls+"-expanded-hidden"]:this.fixed}},[X]);p.push(Y)}w.children&&w.children.length&&this.getChildNode(t.h,w,[]).forEach(H=>{p.push(H)})});const C=t.h("tbody",{class:this.prefixCls+"-tbody"},[p]);return t.h("table",{cellspacing:"0",cellpadding:"0",border:"0",style:this.styleObject},[h,C])}},Ose={name:"TableSummary",mixins:[AS],props:{prefixCls:String,styleObject:Object,columns:Array,data:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1}},methods:{cellCls(a){return[{"ivu-table-hidden":this.fixed==="left"&&a.fixed!=="left"||this.fixed==="right"&&a.fixed!=="right"||!this.fixed&&a.fixed&&(a.fixed==="left"||a.fixed==="right")}]}}},wse={style:{overflow:"hidden"}},_se=["width"],Sse={class:"ivu-table-row"};function Cse(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("div",wse,[t.createElementVNode("table",{class:"ivu-table-summary",cellspacing:"0",cellpadding:"0",border:"0",style:t.normalizeStyle(p.styleObject)},[t.createElementVNode("colgroup",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.columns,(A,V)=>(t.openBlock(),t.createElementBlock("col",{key:V,width:a.setCellWidth(A)},null,8,_se))),128))]),t.createElementVNode("tbody",{class:t.normalizeClass([p.prefixCls+"-tbody"])},[t.createElementVNode("tr",Sse,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.columns,(A,V)=>(t.openBlock(),t.createElementBlock("td",{key:V,class:t.normalizeClass(a.alignCls(A))},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-table-cell",v.cellCls(A)])},[t.createElementVNode("span",null,t.toDisplayString(p.data[A.key].value),1)],2)],2))),128))])],2)],4)])}var kse=l(Ose,[["render",Cse]]);const Tse=`\r
`,NS=(a,h,{separator:p,quoted:C})=>{const w=h.map(v=>C?(v=typeof v=="string"?v.replace(/"/g,'"'):v,`"${v}"`):v);a.push(w.join(p))},Mse={separator:",",quoted:!1};function Ese(a,h,p,C=!1){p=Object.assign({},Mse,p);let w;const v=[],A=[];return a?(w=a.map(V=>typeof V=="string"?V:(C||A.push(typeof V.title<"u"?V.title:V.key),V.key)),A.length>0&&NS(v,A,p)):(w=[],h.forEach(V=>{Array.isArray(V)||(w=w.concat(Object.keys(V)))}),w.length>0&&(w=w.filter((V,H,X)=>X.indexOf(V)===H),C||NS(v,w,p))),Array.isArray(h)&&h.forEach(V=>{Array.isArray(V)||(V=w.map(H=>typeof V[H]<"u"?V[H]:"")),NS(v,V,p)}),v.join(Tse)}function $S(a){const h=navigator.userAgent;return h.indexOf("compatible")>-1&&h.indexOf("MSIE")>-1?(new RegExp("MSIE (\\d+\\.\\d+);").test(h),parseFloat(RegExp.$1)):!1}const Pse={_isIE11(){let a=0;const h=/MSIE (\d+\.\d+);/.test(navigator.userAgent),p=!!navigator.userAgent.match(/Trident\/7.0/),C=navigator.userAgent.indexOf("rv:11.0");return h&&(a=Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!==-1&&(a=10),p&&C!==-1&&(a=11),a===11},_isEdge(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl(a){const h="\uFEFF";if(r&&window.Blob&&window.URL&&window.URL.createObjectURL){const p=new Blob([h+a],{type:"text/csv"});return URL.createObjectURL(p)}else return"data:attachment/csv;charset=utf-8,"+h+encodeURIComponent(a)},download(a,h){if(r)if($S()&&$S()<10){const p=window.top.open("about:blank","_blank");p.document.charset="utf-8",p.document.write(h),p.document.close(),p.document.execCommand("SaveAs",a),p.close()}else if($S()===10||this._isIE11()||this._isEdge()){const p="\uFEFF",C=new Blob([p+h],{type:"text/csv"});navigator.msSaveBlob(C,a)}else{const p=document.createElement("a");p.download=a,p.href=this._getDownloadUrl(h),document.body.appendChild(p),p.click(),document.body.removeChild(p)}}},o1=(a,h)=>{let p=[],C=[];return a.forEach(w=>{w.fixed&&w.fixed===h?p.push(w):C.push(w)}),p.concat(C)},$m=(a,h=!1)=>{const p=L(a),C=[];return p.forEach(w=>{w.children?(h&&C.push(w),C.push.apply(C,$m(w.children,h))):C.push(w)}),C},Ase=(a,h=!1)=>{const p=L(h?h==="left"?o1(a,"left"):o1(a,"right"):a);let C=1;const w=(A,V)=>{if(V&&(A.level=V.level+1,C<A.level&&(C=A.level)),A.children){let H=0;A.children.forEach(X=>{w(X,A),H+=X.colSpan}),A.colSpan=H}else A.colSpan=1};p.forEach(A=>{A.level=1,w(A)});const v=[];for(let A=0;A<C;A++)v.push([]);return $m(p,!0).forEach(A=>{A.children?A.rowSpan=1:A.rowSpan=C-A.level+1,v[A.level-1].push(A)}),v},Rse=function(a=32){const h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",p=h.length;let C="";for(let w=0;w<a;w++)C+=h.charAt(Math.floor(Math.random()*p));return C},_r="ivu-table";let xR=1,Ise=1;const Dse={name:"Table",mixins:[ji],components:{tableHead:cse,tableBody:xse,tableSummary:kse,Spin:so,Dropdown:jh,DropdownMenu:qh},emits:["on-current-change","on-row-click","on-row-dblclick","on-contextmenu","on-select","on-select-cancel","on-selection-change","on-expand","on-expand-tree","on-select-all","on-select-all-cancel","on-sort-change","on-filter-change","on-drag-drop","on-cell-click","on-column-width-resize"],provide(){return{TableInstance:this}},inject:{TabsInstance:{default:null},ModalInstance:{default:null},DrawerInstance:{default:null}},props:{data:{type:Array,default(){return[]}},columns:{type:Array,default(){return[]}},size:{validator(a){return _(a,["small","large","default"])},default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.size===""?"default":a.$VIEWUI.size}},width:{type:[Number,String]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tooltipTheme:{validator(a){return _(a,["dark","light"])},default:"dark"},tooltipMaxWidth:{type:Number,default:300},rowKey:{type:[Boolean,String],default:!1},spanMethod:{type:Function},showSummary:{type:Boolean,default:!1},summaryMethod:{type:Function},sumText:{type:String},indentSize:{type:Number,default:16},loadData:{type:Function},updateShowChildren:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},showContextMenu:{type:Boolean,default:!1},fixedShadow:{validator(a){return _(a,["auto","show","hide"])},default:"show"},autoCloseContextmenu:{type:Boolean,default:!0}},data(){const a=this.makeColumnsId(this.columns);return{ready:!1,tableWidth:0,columnsWidth:{},prefixCls:_r,compiledUids:[],objData:this.makeObjData(),rebuildData:[],cloneColumns:this.makeColumns(a),columnRows:this.makeColumnRows(!1,a),leftFixedColumnRows:this.makeColumnRows("left",a),rightFixedColumnRows:this.makeColumnRows("right",a),allColumns:$m(a),showSlotHeader:!0,showSlotFooter:!0,bodyHeight:0,scrollBarWidth:k(),currentContext:this.context,cloneData:L(this.data),showVerticalScrollBar:!1,showHorizontalScrollBar:!1,headerWidth:0,headerHeight:0,showResizeLine:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},scrollOnTheLeft:!1,scrollOnTheRight:!1,id:ee(6)}},computed:{localeNoDataText(){return this.noDataText===void 0?this.t("i.table.noDataText"):this.noDataText},localeNoFilteredDataText(){return this.noFilteredDataText===void 0?this.t("i.table.noFilteredDataText"):this.noFilteredDataText},localeSumText(){return this.sumText===void 0?this.t("i.table.sumText"):this.sumText},wrapClasses(){return[`${_r}-wrapper`,{[`${_r}-hide`]:!this.ready,[`${_r}-with-header`]:this.showSlotHeader,[`${_r}-with-footer`]:this.showSlotFooter,[`${_r}-with-summary`]:this.showSummary,[`${_r}-wrapper-with-border`]:this.border}]},classes(){return[`${_r}`,{[`${_r}-${this.size}`]:!!this.size,[`${_r}-border`]:this.border,[`${_r}-stripe`]:this.stripe,[`${_r}-with-fixed-top`]:!!this.height}]},fixedTableClasses(){return[`${_r}-fixed`,{[`${_r}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheLeft}]},fixedRightTableClasses(){return[`${_r}-fixed-right`,{[`${_r}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheRight}]},fixedHeaderClasses(){return[`${_r}-fixed-header`,{[`${_r}-fixed-header-with-empty`]:!this.rebuildData.length}]},styles(){let a={},h=0;if(this.showSummary&&(this.size==="small"?h=40:this.size==="large"?h=60:h=48),this.height){let p=parseInt(this.height)+h;a.height=`${p}px`}if(this.maxHeight){const p=parseInt(this.maxHeight)+h;a.maxHeight=`${p}px`}return this.width&&(a.width=`${this.width}px`),a},tableStyle(){let a={};if(this.tableWidth!==0){let h="";this.bodyHeight===0?h=this.tableWidth:h=this.tableWidth-(this.showVerticalScrollBar?this.scrollBarWidth:0),a.width=`${h}px`}return a},tableHeaderStyle(){let a={};if(this.tableWidth!==0){let h="";h=this.tableWidth,a.width=`${h}px`}return a},fixedTableStyle(){let a={},h=0;return this.leftFixedColumns.forEach(p=>{p.fixed&&p.fixed==="left"&&(h+=p._width)}),a.width=`${h}px`,a},fixedRightTableStyle(){let a={},h=0;return this.rightFixedColumns.forEach(p=>{p.fixed&&p.fixed==="right"&&(h+=p._width)}),a.width=`${h}px`,a.right=`${this.showVerticalScrollBar?this.scrollBarWidth:0}px`,a},fixedRightHeaderStyle(){let a={},h=0,p=this.headerHeight+1;return this.showVerticalScrollBar&&(h=this.scrollBarWidth),a.width=`${h}px`,a.height=`${p}px`,a},bodyStyle(){let a={};if(this.bodyHeight!==0){const h=this.bodyHeight;this.height?a.height=`${h}px`:this.maxHeight&&(a.maxHeight=`${h}px`)}return a},fixedBodyStyle(){let a={};if(this.bodyHeight!==0){let h=this.bodyHeight-(this.showHorizontalScrollBar?this.scrollBarWidth:0);const p=this.showHorizontalScrollBar?`${h}px`:`${h-1}px`;this.height?a.height=p:this.maxHeight&&(a.maxHeight=p)}return a},leftFixedColumns(){return o1(this.cloneColumns,"left")},rightFixedColumns(){return o1(this.cloneColumns,"right")},isLeftFixed(){return this.columns.some(a=>a.fixed&&a.fixed==="left")},isRightFixed(){return this.columns.some(a=>a.fixed&&a.fixed==="right")},summaryData(){if(!this.showSummary)return{};let a={};return this.summaryMethod?a=this.summaryMethod({columns:this.cloneColumns,data:this.rebuildData}):this.cloneColumns.forEach((h,p)=>{const C=h.key;if(p===0){a[C]={key:h.key,value:this.localeSumText};return}const w=this.rebuildData.map(H=>Number(H[h.key])),v=[];let A=!0;w.forEach(H=>{if(!isNaN(H)){A=!1;let X=(""+H).split(".")[1];v.push(X?X.length:0)}});const V=Math.max.apply(null,v);if(A)a[C]={key:h.key,value:""};else{const H=w.reduce((X,Y)=>{const le=Number(Y);return isNaN(le)?X:parseFloat((X+Y).toFixed(Math.min(V,20)))},0);a[C]={key:h.key,value:H}}}),a}},methods:{rowClsName(a){return this.rowClassName(this.data[a],a)},handleResize(){let a=this.$el.offsetWidth-1,h={},p=0,C=[],w=[],v=[];this.cloneColumns.forEach(Y=>{Y.width?C.push(Y):(w.push(Y),Y.minWidth&&(p+=Y.minWidth),Y.maxWidth||v.push(Y)),Y._width=null});let A=C.map(Y=>Y.width).reduce((Y,le)=>Y+le,0),V=a-A-p-(this.showVerticalScrollBar?this.scrollBarWidth:0)-1,H=w.length,X=0;V>0&&H>0&&(X=parseInt(V/H));for(let Y=0;Y<this.cloneColumns.length;Y++){const le=this.cloneColumns[Y];let xe=X+(le.minWidth?le.minWidth:0);le.width?xe=le.width:le._width?xe=le._width:(le.minWidth>xe?xe=le.minWidth:le.maxWidth<xe&&(xe=le.maxWidth),V>0?(V-=xe-(le.minWidth?le.minWidth:0),H--,H>0?X=parseInt(V/H):X=0):X=0),le._width=xe,h[le._index]={width:xe}}if(V>0){H=v.length,X=parseInt(V/H);for(let Y=0;Y<v.length;Y++){const le=v[Y];let xe=le._width+X;H>1?(H--,V-=X,X=parseInt(V/H)):X=0,le._width=xe,h[le._index]={width:xe}}}this.tableWidth=this.cloneColumns.map(Y=>Y._width).reduce((Y,le)=>Y+le,0)+(this.showVerticalScrollBar?this.scrollBarWidth:0)+1,this.columnsWidth=h,this.fixedHeader(),this.fixedShadow==="auto"&&t.nextTick(()=>{const Y=this.$refs.body;this.scrollOnTheLeft=Y.scrollLeft===0,this.scrollOnTheRight=Y.scrollWidth===Y.scrollLeft+Y.clientWidth})},handleMouseIn(a,h){if(this.disabledHover)return;const p=h?this.getDataByRowKey(h):this.objData[a];p._isHover||(p._isHover=!0)},handleMouseOut(a,h){if(this.disabledHover)return;const p=h?this.getDataByRowKey(h):this.objData[a];p._isHover=!1},handleCurrentRow(a,h,p){const C=p?this.getDataByRowKey(p):this.objData[h];let w=null,v=-1;for(let V in this.objData)if(this.objData[V]._isHighlight){v=parseInt(V),this.objData[V]._isHighlight=!1;break}else if(this.objData[V].children&&this.objData[V].children.length){const H=this.handleResetChildrenRow(this.objData[V]);H&&(w=JSON.parse(JSON.stringify(H)))}a==="highlight"&&(C._isHighlight=!0),v>=0&&(w=JSON.parse(JSON.stringify(this.cloneData[v])));const A=a==="highlight"?JSON.parse(JSON.stringify(p?this.getBaseDataByRowKey(p):this.cloneData[h])):null;this.$emit("on-current-change",A,w)},handleResetChildrenRow(a){let h=null;if(a.children&&a.children.length)for(let p=0;p<a.children.length;p++){const C=a.children[p];if(C._isHighlight){C._isHighlight=!1,h=C;break}else C.children&&C.children.length&&(h=this.handleResetChildrenRow(C))}return h},highlightCurrentRow(a,h){const p=h?this.getDataByRowKey(h):this.objData[a];!this.highlightRow||p._isHighlight||this.handleCurrentRow("highlight",a,h)},clearCurrentRow(){!this.highlightRow||this.handleCurrentRow("clear")},clickCurrentRow(a,h){this.highlightCurrentRow(a,h),h?this.$emit("on-row-click",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(h)))):this.$emit("on-row-click",JSON.parse(JSON.stringify(this.cloneData[a])),a)},dblclickCurrentRow(a,h){this.highlightCurrentRow(a,h),h?this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(h)))):this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.cloneData[a])),a)},contextmenuCurrentRow(a,h,p){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const C=this.$refs.tableWrap.getBoundingClientRect(),w={left:`${p.clientX-C.left}px`,top:`${p.clientY-C.top}px`};this.contextMenuStyles=w,this.contextMenuVisible=!0,h?this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(h))),p,w):this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.cloneData[a])),p,w)})},getSelection(){let a=[],h=[];for(let C in this.objData){const w=this.objData[C];w._isChecked&&a.push(parseInt(C)),w.children&&w.children.length&&(h=h.concat(this.getSelectionChildrenRowKeys(w,h)))}h=[...new Set(h)];let p=[];return this.data.forEach((C,w)=>{a.indexOf(w)>-1&&(p=p.concat(C)),C.children&&C.children.length&&h.length&&(p=p.concat(this.getSelectionChildren(C,p,h)))}),p=[...new Set(p)],JSON.parse(JSON.stringify(p))},getSelectionChildrenRowKeys(a,h){return a.children&&a.children.length&&a.children.forEach(p=>{p._isChecked&&h.push(p._rowKey),p.children&&p.children.length&&(h=h.concat(this.getSelectionChildrenRowKeys(p,h)))}),h},getSelectionChildren(a,h,p){return a.children&&a.children.length&&a.children.forEach(C=>{p.indexOf(C[this.rowKey])>-1&&(h=h.concat(C)),C.children&&C.children.length&&(h=h.concat(this.getSelectionChildren(C,h,p)))}),h},toggleSelect(a,h){let p={};if(h)p=this.getDataByRowKey(h);else for(let A in this.objData)if(parseInt(A)===a){p=this.objData[A];break}const C=!p._isChecked;p._isChecked=C;const w=this.getSelection(),v=h?this.getBaseDataByRowKey(h,this.data):this.data[a];this.$emit(C?"on-select":"on-select-cancel",w,JSON.parse(JSON.stringify(v))),this.$emit("on-selection-change",w)},toggleExpand(a){let h={};for(let C in this.objData)if(parseInt(C)===a){h=this.objData[C];break}const p=!h._isExpanded;this.objData[a]._isExpanded=p,this.$emit("on-expand",JSON.parse(JSON.stringify(this.cloneData[a])),p),(this.height||this.maxHeight)&&t.nextTick(()=>this.fixedBody())},toggleTree(a){const h=this.getDataByRowKey(a);if(!("_loading"in h&&h._loading)){if("_loading"in h&&!h._loading&&h.children.length===0){const p=this.getBaseDataByRowKey(a,this.data);p._loading=!0,this.loadData(p,C=>{p._loading=!1,C.length&&(p.children=C,t.nextTick(()=>{const w=this.getDataByRowKey(a);w._isShowChildren=!w._isShowChildren,this.updateDataStatus(a,"_showChildren",w._isShowChildren)}))});return}h._isShowChildren=!h._isShowChildren,this.updateShowChildren&&this.updateDataStatus(a,"_showChildren",h._isShowChildren),this.$emit("on-expand-tree",a,h._isShowChildren)}},updateDataStatus(a,h,p){const C=this.getBaseDataByRowKey(a,this.data);C[h]=p},getDataByRowKey(a,h=this.objData){let p=null;for(let C in h){const w=h[C];if(w._rowKey===a){p=w;break}else if(w.children&&w.children.length&&(p=this.getChildrenByRowKey(a,w),p))break}return p},getChildrenByRowKey(a,h){let p=null;if(h.children&&h.children.length)for(let C=0;C<h.children.length;C++){const w=h.children[C];if(w._rowKey===a){p=w;break}else if(w.children&&w.children.length&&(p=this.getChildrenByRowKey(a,w),p))break}return p},getBaseDataByRowKey(a,h=this.cloneData){let p=null;for(let C=0;C<h.length;C++){const w=h[C];if(w[this.rowKey]===a){p=w;break}else if(w.children&&w.children.length&&(p=this.getChildrenDataByRowKey(a,w),p&&p[this.rowKey]===a))return p}return p},getChildrenDataByRowKey(a,h){let p=null;if(h.children&&h.children.length)for(let C=0;C<h.children.length;C++){const w=h.children[C];if(w[this.rowKey]===a){p=w;break}else if(w.children&&w.children.length&&(p=this.getChildrenDataByRowKey(a,w),p))break}return p},selectAll(a){for(const p of this.rebuildData){const C=this.objData[p._index];C._isDisabled||(C._isChecked=a),p.children&&p.children.length&&this.selectAllChildren(C,a)}const h=this.getSelection();a?this.$emit("on-select-all",h):this.$emit("on-select-all-cancel",h),this.$emit("on-selection-change",h)},selectAllChildren(a,h){a.children&&a.children.length&&a.children.map(p=>{p._isDisabled||(p._isChecked=h),p.children&&p.children.length&&this.selectAllChildren(p,h)})},fixedHeader(){this.height||this.maxHeight?t.nextTick(()=>{const a=parseInt(I(this.$refs.title,"height"))||0,h=parseInt(I(this.$refs.header,"height"))||0,p=parseInt(I(this.$refs.footer,"height"))||0;this.height?this.bodyHeight=this.height-a-h-p:this.maxHeight&&(this.bodyHeight=this.maxHeight-a-h-p),t.nextTick(()=>this.fixedBody())}):(this.bodyHeight=0,t.nextTick(()=>this.fixedBody()))},fixedBody(){if(this.$refs.header&&(this.headerWidth=this.$refs.header.children[0].offsetWidth,this.headerHeight=this.$refs.header.children[0].offsetHeight),!this.$refs.tbody||!this.data||this.data.length===0)this.showVerticalScrollBar=!1;else{let a=this.$refs.tbody.$el,h=a.parentElement,p=a.offsetHeight,C=h.offsetHeight;this.showHorizontalScrollBar=h.offsetWidth<a.offsetWidth+(this.showVerticalScrollBar?this.scrollBarWidth:0),this.showVerticalScrollBar=this.bodyHeight?C-(this.showHorizontalScrollBar?this.scrollBarWidth:0)<p:!1,this.showVerticalScrollBar?h.classList.add(this.prefixCls+"-overflowY"):h.classList.remove(this.prefixCls+"-overflowY"),this.showHorizontalScrollBar?h.classList.add(this.prefixCls+"-overflowX"):h.classList.remove(this.prefixCls+"-overflowX")}},hideColumnFilter(){this.cloneColumns.forEach(a=>a._filterVisible=!1)},handleBodyScroll(a){this.scrollOnTheLeft=a.target.scrollLeft===0,this.scrollOnTheRight=a.target.scrollWidth===a.target.scrollLeft+a.target.clientWidth,this.showHeader&&(this.$refs.header.scrollLeft=a.target.scrollLeft),this.isLeftFixed&&(this.$refs.fixedBody.scrollTop=a.target.scrollTop),this.isRightFixed&&(this.$refs.fixedRightBody.scrollTop=a.target.scrollTop),this.showSummary&&this.$refs.summary&&(this.$refs.summary.$el.scrollLeft=a.target.scrollLeft),this.hideColumnFilter()},handleFixedMousewheel(a){let h=a.deltaY;if(!h&&a.detail&&(h=a.detail*40),!h&&a.wheelDeltaY&&(h=-a.wheelDeltaY),!h&&a.wheelDelta&&(h=-a.wheelDelta),!h)return;const p=this.$refs.body,C=p.scrollTop;h<0&&C!==0&&a.preventDefault(),h>0&&p.scrollHeight-p.clientHeight>C&&a.preventDefault();let w=0,v=setInterval(()=>{w+=5,h>0?p.scrollTop+=2:p.scrollTop-=2,w>=Math.abs(h)&&clearInterval(v)},5)},handleMouseWheel(a){const h=a.deltaX,p=this.$refs.body;h>0?p.scrollLeft=p.scrollLeft+10:p.scrollLeft=p.scrollLeft-10},sortData(a,h,p){const C=this.cloneColumns[p].key;a.sort((w,v)=>{if(this.cloneColumns[p].sortMethod)return this.cloneColumns[p].sortMethod(w[C],v[C],h);if(h==="asc")return w[C]>v[C]?1:-1;if(h==="desc")return w[C]<v[C]?1:-1});for(let w=0;w<a.length;w++)a[w].children&&a[w].children.length&&(a[w].children=this.sortData(a[w].children,h,p));return a},handleSort(a,h){const p=this.GetOriginalIndex(a);this.cloneColumns.forEach(w=>w._sortType="normal");const C=this.cloneColumns[p].key;this.cloneColumns[p].sortable!=="custom"&&(h==="normal"?this.rebuildData=this.makeDataWithFilter():this.rebuildData=this.sortData(this.rebuildData,h,p)),this.cloneColumns[p]._sortType=h,this.$emit("on-sort-change",{column:JSON.parse(JSON.stringify(this.allColumns[this.cloneColumns[p]._index])),key:C,order:h})},handleFilterHide(a){this.cloneColumns[a]._isFiltered||(this.cloneColumns[a]._filterChecked=[])},filterData(a,h){return a.filter(p=>{if(typeof h.filterRemote=="function")return!0;let C=!h._filterChecked.length;for(let w=0;w<h._filterChecked.length&&(C=h.filterMethod(h._filterChecked[w],p),!C);w++);return C})},filterOtherData(a,h){let p=this.cloneColumns[h];return typeof p.filterRemote=="function"&&p.filterRemote.call(this.$parent,p._filterChecked,p.key,p),this.cloneColumns.forEach((C,w)=>{w!==h&&(a=this.filterData(a,C))}),a},handleFilter(a){const h=this.cloneColumns[a];let p=this.makeDataWithSort();p=this.filterOtherData(p,a),this.rebuildData=this.filterData(p,h),this.cloneColumns[a]._isFiltered=!0,this.cloneColumns[a]._filterVisible=!1,this.$emit("on-filter-change",h)},GetOriginalIndex(a){return this.cloneColumns.findIndex(h=>h._index===a)},handleFilterSelect(a,h){const p=this.GetOriginalIndex(a);this.cloneColumns[p]._filterChecked=[h],this.handleFilter(p)},handleFilterReset(a){const h=this.GetOriginalIndex(a);this.cloneColumns[h]._isFiltered=!1,this.cloneColumns[h]._filterVisible=!1,this.cloneColumns[h]._filterChecked=[];let p=this.makeDataWithSort();p=this.filterOtherData(p,h),this.rebuildData=p,this.$emit("on-filter-change",this.cloneColumns[h])},makeData(){let a=L(this.data);return a.forEach((h,p)=>{h._index=p,h._rowKey=typeof this.rowKey=="string"?h[this.rowKey]:xR++,h.children&&h.children.length&&(h.children=this.makeChildrenData(h))}),a},makeChildrenData(a){return a.children&&a.children.length?a.children.map((h,p)=>{const C=L(h);return C._index=p,C._rowKey=typeof this.rowKey=="string"?C[this.rowKey]:xR++,C.children&&C.children.length&&(C.children=this.makeChildrenData(C)),C}):a},makeDataWithSort(){let a=this.makeData(),h="normal",p=-1,C=!1;for(let w=0;w<this.cloneColumns.length;w++)if(this.cloneColumns[w]._sortType!=="normal"){h=this.cloneColumns[w]._sortType,p=w,C=this.cloneColumns[w].sortable==="custom";break}return h!=="normal"&&!C&&(a=this.sortData(a,h,p)),a},makeDataWithFilter(){let a=this.makeData();return this.cloneColumns.forEach(h=>a=this.filterData(a,h)),a},makeDataWithSortAndFilter(){let a=this.makeDataWithSort();return this.cloneColumns.forEach(h=>a=this.filterData(a,h)),a},makeObjBaseData(a){const h=L(a);return typeof this.rowKey=="string"&&(h._rowKey=h[this.rowKey]),h._isHover=!1,h._disabled?h._isDisabled=h._disabled:h._isDisabled=!1,h._checked?h._isChecked=h._checked:h._isChecked=!1,h._expanded?h._isExpanded=h._expanded:h._isExpanded=!1,h._highlight?h._isHighlight=h._highlight:h._isHighlight=!1,h},makeObjData(){let a={};return this.data.forEach((h,p)=>{const C=this.makeObjBaseData(h);C.children&&C.children.length&&(C._showChildren?C._isShowChildren=C._showChildren:C._isShowChildren=!1,C.children=this.makeChildrenObjData(C)),a[p]=C}),a},makeChildrenObjData(a){return a.children&&a.children.length?a.children.map(h=>{const p=this.makeObjBaseData(h);return p._showChildren?p._isShowChildren=p._showChildren:p._isShowChildren=!1,p.children&&p.children.length&&(p.children=this.makeChildrenObjData(p)),p}):a},makeColumnsId(a){return L(a).map(h=>("children"in h&&this.makeColumnsId(h.children),h.__id=Rse(6),h))},makeColumns(a){let h=L($m(a)),p=[],C=[],w=[];return h.forEach((v,A)=>{v._index=A,v._columnKey=Ise++,v.width=parseInt(v.width),v._width=v.width?v.width:"",v._sortType="normal",v._filterVisible=!1,v._isFiltered=!1,v._filterChecked=[],"filterMultiple"in v?v._filterMultiple=v.filterMultiple:v._filterMultiple=!0,"filteredValue"in v&&(v._filterChecked=v.filteredValue,v._isFiltered=!0),"sortType"in v&&(v._sortType=v.sortType),v.fixed&&v.fixed==="left"?p.push(v):v.fixed&&v.fixed==="right"?C.push(v):w.push(v)}),p.concat(w).concat(C)},makeColumnRows(a,h){return Ase(h,a)},exportCsv(a){a.filename?a.filename.indexOf(".csv")===-1&&(a.filename+=".csv"):a.filename="table.csv";let h=[],p=[];a.columns&&a.data?(h=a.columns,p=a.data):(h=this.allColumns,"original"in a||(a.original=!0),p=a.original?this.data:this.rebuildData);let C=!1;"noHeader"in a&&(C=a.noHeader);const w=Ese(h,p,a,C);a.callback?a.callback(w):Pse.download(a.filename,w)},dragAndDrop(a,h){this.$emit("on-drag-drop",a,h)},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnVisibleChange(a){a&&t.nextTick(()=>{this.handleResize()})},addTable(a){const h=this[a];!h||(h.tableList||(h.tableList=[]),h.tableList.push({id:this.id,table:this}))},removeTable(a){const h=this[a];if(!h||!h.tableList)return;const p=h.tableList.findIndex(C=>C.id===this.id);h.tableList.splice(p,1)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.context||(this.currentContext=this.$parent),this.showSlotHeader=this.$slots.header!==void 0,this.showSlotFooter=this.$slots.footer!==void 0,this.rebuildData=this.makeDataWithSortAndFilter()},mounted(){this.addTable("TabsInstance"),this.addTable("ModalInstance"),this.addTable("DrawerInstance"),this.handleResize(),t.nextTick(()=>this.ready=!0),s(window,"resize",this.handleResize),this.observer=Vd(),this.observer.listenTo(this.$el,this.handleResize)},beforeUnmount(){this.removeTable("TabsInstance"),this.removeTable("ModalInstance"),this.removeTable("DrawerInstance"),o(window,"resize",this.handleResize),this.observer.removeAllListeners(this.$el),this.observer.uninstall(this.$el),this.observer=null},watch:{data:{handler(){const a=this.rebuildData.length;this.objData=this.makeObjData(),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize(),a||this.fixedHeader(),setTimeout(()=>{this.cloneData=L(this.data)},0)},deep:!0},columns:{handler(){const a=this.makeColumnsId(this.columns);this.allColumns=$m(a),this.cloneColumns=this.makeColumns(a),this.columnRows=this.makeColumnRows(!1,a),this.leftFixedColumnRows=this.makeColumnRows("left",a),this.rightFixedColumnRows=this.makeColumnRows("right",a),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize()},deep:!0},height(){this.handleResize()},maxHeight(){this.handleResize()},showHorizontalScrollBar(){this.handleResize()},showVerticalScrollBar(){this.handleResize()}}},Nse={cellspacing:"0",cellpadding:"0",border:"0"},$se=["innerHTML"],Vse=["innerHTML"],Lse={class:"ivu-table-resize-line",ref:"resizeLine"};function Bse(a,h,p,C,w,v){const A=t.resolveComponent("table-head"),V=t.resolveComponent("table-body"),H=t.resolveComponent("table-summary"),X=t.resolveComponent("DropdownMenu"),Y=t.resolveComponent("Dropdown"),le=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.wrapClasses),style:t.normalizeStyle(v.styles),ref:"tableWrap"},[t.createElementVNode("div",{class:t.normalizeClass(v.classes)},[w.showSlotHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-title"]),ref:"title"},[t.renderSlot(a.$slots,"header")],2)):t.createCommentVNode("",!0),p.showHeader?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([w.prefixCls+"-header"]),ref:"header",onMousewheel:h[0]||(h[0]=(...xe)=>v.handleMouseWheel&&v.handleMouseWheel(...xe))},[t.createVNode(A,{"prefix-cls":w.prefixCls,styleObject:v.tableHeaderStyle,columns:w.cloneColumns,"column-rows":w.columnRows,"obj-data":w.objData,"columns-width":w.columnsWidth,data:w.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","obj-data","columns-width","data"])],34)):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-body"]),style:t.normalizeStyle(v.bodyStyle),ref:"body",onScroll:h[1]||(h[1]=(...xe)=>v.handleBodyScroll&&v.handleBodyScroll(...xe))},[t.createVNode(V,{ref:"tbody",draggable:p.draggable,"prefix-cls":w.prefixCls,styleObject:v.tableStyle,columns:w.cloneColumns,data:w.rebuildData,"row-key":p.rowKey,"columns-width":w.columnsWidth,"obj-data":w.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),[[t.vShow,!(v.localeNoDataText&&(!p.data||p.data.length===0)||v.localeNoFilteredDataText&&(!w.rebuildData||w.rebuildData.length===0))]]),p.showSummary&&p.data&&p.data.length?(t.openBlock(),t.createBlock(H,{key:2,ref:"summary","prefix-cls":w.prefixCls,styleObject:v.tableStyle,columns:w.cloneColumns,data:v.summaryData,"columns-width":w.columnsWidth},null,8,["prefix-cls","styleObject","columns","data","columns-width"])):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-tip"]),style:t.normalizeStyle(v.bodyStyle),onScroll:h[2]||(h[2]=(...xe)=>v.handleBodyScroll&&v.handleBodyScroll(...xe))},[t.createElementVNode("table",Nse,[t.createElementVNode("tbody",null,[t.createElementVNode("tr",null,[t.createElementVNode("td",{style:t.normalizeStyle({height:v.bodyStyle.height,width:`${w.headerWidth}px`})},[!p.data||p.data.length===0?(t.openBlock(),t.createElementBlock("span",{key:0,innerHTML:v.localeNoDataText},null,8,$se)):(t.openBlock(),t.createElementBlock("span",{key:1,innerHTML:v.localeNoFilteredDataText},null,8,Vse))],4)])])])],38),[[t.vShow,!!v.localeNoDataText&&(!p.data||p.data.length===0)||!!v.localeNoFilteredDataText&&(!w.rebuildData||w.rebuildData.length===0)]]),v.isLeftFixed?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(v.fixedTableClasses),style:t.normalizeStyle(v.fixedTableStyle)},[p.showHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.fixedHeaderClasses)},[t.createVNode(A,{fixed:"left","prefix-cls":w.prefixCls,styleObject:v.fixedTableStyle,columns:v.leftFixedColumns,"column-rows":w.columnRows,"fixed-column-rows":w.leftFixedColumnRows,"obj-data":w.objData,"columns-width":w.columnsWidth,data:w.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-fixed-body"]),style:t.normalizeStyle(v.fixedBodyStyle),ref:"fixedBody",onMousewheel:h[3]||(h[3]=(...xe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...xe)),"on:DOMMouseScroll":h[4]||(h[4]=(...xe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...xe))},[t.createVNode(V,{fixed:"left",draggable:p.draggable,"prefix-cls":w.prefixCls,styleObject:v.fixedTableStyle,columns:v.leftFixedColumns,data:w.rebuildData,"row-key":p.rowKey,"columns-width":w.columnsWidth,"obj-data":w.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),p.showSummary&&p.data&&p.data.length?(t.openBlock(),t.createBlock(H,{key:1,fixed:"left","prefix-cls":w.prefixCls,styleObject:v.fixedTableStyle,columns:v.leftFixedColumns,data:v.summaryData,"columns-width":w.columnsWidth,style:t.normalizeStyle({"margin-top":w.showHorizontalScrollBar?w.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):t.createCommentVNode("",!0)],6)):t.createCommentVNode("",!0),v.isRightFixed?(t.openBlock(),t.createElementBlock("div",{key:4,class:t.normalizeClass(v.fixedRightTableClasses),style:t.normalizeStyle(v.fixedRightTableStyle)},[p.showHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(v.fixedHeaderClasses)},[t.createVNode(A,{fixed:"right","prefix-cls":w.prefixCls,styleObject:v.fixedRightTableStyle,columns:v.rightFixedColumns,"column-rows":w.columnRows,"fixed-column-rows":w.rightFixedColumnRows,"obj-data":w.objData,"columns-width":w.columnsWidth,data:w.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([w.prefixCls+"-fixed-body"]),style:t.normalizeStyle(v.fixedBodyStyle),ref:"fixedRightBody",onMousewheel:h[5]||(h[5]=(...xe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...xe)),"on:DOMMouseScroll":h[6]||(h[6]=(...xe)=>v.handleFixedMousewheel&&v.handleFixedMousewheel(...xe))},[t.createVNode(V,{fixed:"right",draggable:p.draggable,"prefix-cls":w.prefixCls,styleObject:v.fixedRightTableStyle,columns:v.rightFixedColumns,data:w.rebuildData,"row-key":p.rowKey,"columns-width":w.columnsWidth,"obj-data":w.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),p.showSummary&&p.data&&p.data.length?(t.openBlock(),t.createBlock(H,{key:1,fixed:"right","prefix-cls":w.prefixCls,styleObject:v.fixedRightTableStyle,columns:v.rightFixedColumns,data:v.summaryData,"columns-width":w.columnsWidth,style:t.normalizeStyle({"margin-top":w.showHorizontalScrollBar?w.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):t.createCommentVNode("",!0)],6)):t.createCommentVNode("",!0),v.isRightFixed?(t.openBlock(),t.createElementBlock("div",{key:5,class:t.normalizeClass([w.prefixCls+"-fixed-right-header"]),style:t.normalizeStyle(v.fixedRightHeaderStyle)},null,6)):t.createCommentVNode("",!0),w.showSlotFooter?(t.openBlock(),t.createElementBlock("div",{key:6,class:t.normalizeClass([w.prefixCls+"-footer"]),ref:"footer"},[t.renderSlot(a.$slots,"footer")],2)):t.createCommentVNode("",!0)],2),t.withDirectives(t.createElementVNode("div",Lse,null,512),[[t.vShow,w.showResizeLine]]),p.showContextMenu?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-table-context-menu",style:t.normalizeStyle(w.contextMenuStyles)},[t.createVNode(Y,{trigger:"custom",visible:w.contextMenuVisible,transfer:"",onOnClick:v.handleClickDropdownItem,onOnClickoutside:v.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(X,null,{default:t.withCtx(()=>[t.renderSlot(a.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)):t.createCommentVNode("",!0),t.createVNode(le,{fix:"",size:"large",show:p.loading},{default:t.withCtx(()=>[t.renderSlot(a.$slots,"loading")]),_:3},8,["show"])],6)}var a1=l(Dse,[["render",Bse]]);const Use={name:"TablePaste",components:{Row:vc,Col:Na,Input:Ao,Table:a1},emits:["on-change","on-error","on-success"],props:{value:{type:String},inputProps:{type:Object,default(){return{}}},tableProps:{type:Object,default(){return{}}},hideTable:{type:Boolean,default:!1}},data(){return{content:"",tableColumns:[],tableData:[]}},watch:{value:{handler(a){this.handleResolveContent(a)},immediate:!0}},methods:{handleContentChange(a){const h=a.target.value.trim();this.$emit("on-change",h),this.handleResolveContent(h)},handleResolveContent(a){let h=[];a!==""&&a!==void 0&&(h=a.split(/[\n\u0085\u2028\u2029]|\r\n?/g).map(w=>w.split("	")));const p=this.handleGetErrorIndex(h),C=this.contentToTable(h);this.tableColumns=C.columns,this.tableData=C.data,p.length?this.$emit("on-error",C,p):this.$emit("on-success",C)},handleGetErrorIndex(a){const h=L(a),p=[];if(h.length){const C=h[0].length;h.forEach((w,v)=>{w.length!==C&&p.push(v)})}return p},contentToTable(a){const h=L(a);let p=[],C=[];return h.length>1&&(p=h.shift().map((w,v)=>({title:w,key:`key${v}`})),C=h.map(w=>{const v={};return w.forEach((A,V)=>{v[`key${V}`]=A}),v})),{columns:p,data:C}}}},Fse={class:"ivu-table-paste"},zse={key:0,class:"ivu-table-paste-input"},Xse={key:0,class:"ivu-table-paste-input"};function Wse(a,h,p,C,w,v){const A=t.resolveComponent("Input"),V=t.resolveComponent("Col"),H=t.resolveComponent("Table"),X=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",Fse,[p.hideTable?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[p.value!==void 0||!a.$slots.default?(t.openBlock(),t.createElementBlock("div",Xse,[t.renderSlot(a.$slots,"default",{},()=>[t.createVNode(A,t.mergeProps({modelValue:w.content,"onUpdate:modelValue":h[1]||(h[1]=Y=>w.content=Y),type:"textarea"},p.inputProps,{onOnChange:v.handleContentChange}),null,16,["modelValue","onOnChange"])])])):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createBlock(X,{key:0,gutter:32},{default:t.withCtx(()=>[t.createVNode(V,{span:"12"},{default:t.withCtx(()=>[p.value!==void 0||!a.$slots.default?(t.openBlock(),t.createElementBlock("div",zse,[t.renderSlot(a.$slots,"default",{},()=>[t.createVNode(A,t.mergeProps({modelValue:w.content,"onUpdate:modelValue":h[0]||(h[0]=Y=>w.content=Y),type:"textarea"},p.inputProps,{onOnChange:v.handleContentChange}),null,16,["modelValue","onOnChange"])])])):t.createCommentVNode("",!0)]),_:3}),t.createVNode(V,{span:"12"},{default:t.withCtx(()=>[t.createVNode(H,t.mergeProps({columns:w.tableColumns,data:w.tableData},p.tableProps),null,16,["columns","data"])]),_:1})]),_:3}))])}var OR=l(Use,[["render",Wse]]);const Qse={name:"TagSelect",mixins:[fi],components:{Tag:Ad,Icon:S},emits:["on-change","on-checked-all","update:modelValue"],provide(){return{TagSelectInstance:this}},props:{modelValue:{type:Array,default(){return[]}},expandable:{type:Boolean,default:!1},hideCheckAll:{type:Boolean,default:!1},locale:{type:Object,default(){return{collapseText:"",expandText:""}}}},data(){return{currentValue:this.modelValue,checkedAll:!1,expand:!1,tagSelectOptionList:[]}},computed:{classes(){return{"ivu-tag-select-with-expanded":this.expandable,"ivu-tag-select-expanded":this.expand}}},watch:{modelValue(a){this.currentValue=a,this.handleUpdateTags()}},methods:{handleUpdateTags(){let a=!0;this.tagSelectOptionList.map(h=>h.option).forEach(h=>{this.currentValue.indexOf(h.name)>=0?h.checked=!0:(h.checked=!1,a=!1)}),this.checkedAll=a},handleChangeTag(a){const h=[];let p=!0;this.tagSelectOptionList.map(C=>C.option).forEach(C=>{C.checked?h.push(C.name):p=!1}),this.currentValue=h,this.$emit("update:modelValue",h),this.$emit("on-change",[...h],a),this.handleFormItemChange("change",a),a&&(this.checkedAll=p)},handleCheckAll(a){this.checkedAll=a,this.tagSelectOptionList.map(h=>h.option).forEach(h=>{h.checked=a}),this.handleChangeTag(),this.$emit("on-checked-all",a)},handleToggleExpand(){this.expand=!this.expand}},mounted(){this.handleUpdateTags()}},Hse={key:0,class:"ivu-tag-select-option"},Gse={key:0},Yse={key:1};function jse(a,h,p,C,w,v){const A=t.resolveComponent("Tag"),V=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-tag-select",v.classes])},[p.hideCheckAll?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",Hse,[t.createVNode(A,{checkable:"",checked:w.checkedAll,onOnChange:v.handleCheckAll,color:"primary"},{default:t.withCtx(()=>[t.createTextVNode("")]),_:1},8,["checked","onOnChange"])])),t.renderSlot(a.$slots,"default"),p.expandable?(t.openBlock(),t.createElementBlock("a",{key:1,class:"ivu-tag-select-expand-btn",onClick:h[0]||(h[0]=(...H)=>v.handleToggleExpand&&v.handleToggleExpand(...H))},[w.expand?(t.openBlock(),t.createElementBlock("span",Gse,t.toDisplayString(p.locale.collapseText),1)):(t.openBlock(),t.createElementBlock("span",Yse,t.toDisplayString(p.locale.expandText),1)),w.expand?(t.openBlock(),t.createBlock(V,{key:2,type:"ios-arrow-up"})):(t.openBlock(),t.createBlock(V,{key:3,type:"ios-arrow-down"}))])):t.createCommentVNode("",!0)],2)}var wR=l(Qse,[["render",jse]]);const qse={name:"TagSelectOption",components:{Tag:Ad},inject:["TagSelectInstance"],props:{name:{type:[String,Number],required:!0},tagProps:{type:Object,default(){return{}}},color:{type:String,default:"primary"}},data(){return{checked:!1,id:ee(6)}},methods:{handleChange(a){this.checked=a,this.TagSelectInstance.handleChangeTag(this.name)},addOption(){this.TagSelectInstance.tagSelectOptionList.push({id:this.id,option:this})},removeOption(){const a=this.TagSelectInstance,h=a.tagSelectOptionList.findIndex(p=>p.id===this.id);a.tagSelectOptionList.splice(h,1)}},mounted(){this.addOption()},beforeUnmount(){this.removeOption()}},Zse={class:"ivu-tag-select-option"};function Kse(a,h,p,C,w,v){const A=t.resolveComponent("Tag");return t.openBlock(),t.createElementBlock("div",Zse,[t.createVNode(A,t.mergeProps({checkable:"",checked:w.checked,onOnChange:v.handleChange,color:p.color},p.tagProps),{default:t.withCtx(()=>[t.renderSlot(a.$slots,"default")]),_:3},16,["checked","onOnChange","color"])])}var _R=l(qse,[["render",Kse]]);const SR={name:"Text",mixins:[Cm],render(){return t.h(Ky,{...this.$props,component:"span",...this.commonEvents()},this.commonSlots())}},CR="ivu-timeline",Jse={name:"Timeline",props:{pending:{type:Boolean,default:!1}},computed:{classes(){return[`${CR}`,{[`${CR}-pending`]:this.pending}]}}};function eoe(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(v.classes)},[t.renderSlot(a.$slots,"default")],2)}var kR=l(Jse,[["render",eoe]]);const zd="ivu-timeline",toe={name:"TimelineItem",props:{color:{type:String,default:"blue"}},data(){return{dot:!1}},mounted(){this.dot=!!this.$refs.dot.innerHTML.length},computed:{itemClasses(){return`${zd}-item`},tailClasses(){return`${zd}-item-tail`},headClasses(){return[`${zd}-item-head`,{[`${zd}-item-head-custom`]:this.dot,[`${zd}-item-head-${this.color}`]:this.headColorShow}]},headColorShow(){return this.color==="blue"||this.color==="red"||this.color==="green"},customColor(){let a={};return this.color&&(this.headColorShow||(a={color:this.color,"border-color":this.color})),a},contentClasses(){return`${zd}-item-content`}}};function ioe(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(v.itemClasses)},[t.createElementVNode("div",{class:t.normalizeClass(v.tailClasses)},null,2),t.createElementVNode("div",{class:t.normalizeClass(v.headClasses),style:t.normalizeStyle(v.customColor),ref:"dot"},[t.renderSlot(a.$slots,"dot")],6),t.createElementVNode("div",{class:t.normalizeClass(v.contentClasses)},[t.renderSlot(a.$slots,"default")],2)],2)}var TR=l(toe,[["render",ioe]]),MR={mixins:[y4,By],components:{TimePickerPanel:R4,RangeTimePickerPanel:V4},props:{type:{validator(a){return _(a,["time","timerange"])},default:"time"}},computed:{panel(){return this.type==="timerange"?"RangeTimePickerPanel":"TimePickerPanel"},ownPickerProps(){return{disabledHours:this.disabledHours,disabledMinutes:this.disabledMinutes,disabledSeconds:this.disabledSeconds,hideDisabledOptions:this.hideDisabledOptions}}},watch:{visible(a){a&&t.nextTick(()=>{this.timeSpinnerList.map(h=>h.timeSpinner).forEach(h=>h.updateScroll())})}}};const ER={name:"Title",mixins:[Cm],props:{level:{type:Number,validator(a){return _(a,[1,2,3,4,5,6])},default:1}},render(){return t.h(Ky,{...this.$props,component:`h${this.level}`,...this.commonEvents()},this.commonSlots())}},noe={name:"Search",components:{Input:Ao},emits:["on-query-change","on-query-clear"],props:{prefixCls:String,placeholder:String,query:String},data(){return{currentQuery:this.query}},watch:{query(a){this.currentQuery=a},currentQuery(a){this.$emit("on-query-change",a)}},computed:{icon(){return this.query===""?"ios-search":"ios-close-circle"}},methods:{handleClick(){this.currentQuery!==""&&(this.currentQuery="",this.$emit("on-query-clear"))}}};function roe(a,h,p,C,w,v){const A=t.resolveComponent("Input");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(p.prefixCls)},[t.createVNode(A,{modelValue:w.currentQuery,"onUpdate:modelValue":h[0]||(h[0]=V=>w.currentQuery=V),size:"small",icon:v.icon,placeholder:p.placeholder,onOnClick:v.handleClick},null,8,["modelValue","icon","placeholder","onOnClick"])],2)}var soe=l(noe,[["render",roe]]);const ooe={name:"TransferList",components:{Search:soe,Checkbox:Pd},inject:["TransferInstance"],emits:["on-checked-keys-change"],props:{prefixCls:String,data:Array,renderFormat:Function,checkedKeys:Array,listStyle:Object,title:[String,Number],filterable:Boolean,filterPlaceholder:String,filterMethod:Function,notFoundText:String,validKeysCount:Number},data(){return{showItems:[],query:"",showFooter:!0}},watch:{data(){this.updateFilteredData()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-with-footer`]:this.showFooter}]},bodyClasses(){return[`${this.prefixCls}-body`,{[`${this.prefixCls}-body-with-search`]:this.filterable,[`${this.prefixCls}-body-with-footer`]:this.showFooter}]},count(){const a=this.validKeysCount;return(a>0?`${a}/`:"")+`${this.data.length}`},checkedAll(){return this.filterData.filter(a=>!a.disabled).length===this.validKeysCount&&this.validKeysCount!==0},checkedAllDisabled(){return this.filterData.filter(a=>!a.disabled).length<=0},filterData(){return this.showItems.filter(a=>this.filterMethod(a,this.query))}},methods:{itemClasses(a){return[`${this.prefixCls}-content-item`,{[`${this.prefixCls}-content-item-disabled`]:a.disabled}]},showLabel(a){return this.renderFormat(a)},isCheck(a){return this.checkedKeys.some(h=>h===a.key)},select(a){if(a.disabled)return;const h=this.checkedKeys.indexOf(a.key);h>-1?this.checkedKeys.splice(h,1):this.checkedKeys.push(a.key),this.TransferInstance.handleCheckedKeys()},updateFilteredData(){this.showItems=this.data},toggleSelectAll(a){const h=a?this.filterData.filter(p=>!p.disabled||this.checkedKeys.indexOf(p.key)>-1).map(p=>p.key):this.filterData.filter(p=>p.disabled&&this.checkedKeys.indexOf(p.key)>-1).map(p=>p.key);this.$emit("on-checked-keys-change",h)},handleQueryClear(){this.query=""},handleQueryChange(a){this.query=a}},created(){this.updateFilteredData()},mounted(){this.showFooter=this.$slots.default!==void 0}},aoe=["onClick"],loe=["innerHTML"];function coe(a,h,p,C,w,v){const A=t.resolveComponent("Checkbox"),V=t.resolveComponent("Search");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(v.classes),style:t.normalizeStyle(p.listStyle)},[t.createElementVNode("div",{class:t.normalizeClass(p.prefixCls+"-header")},[t.createVNode(A,{modelValue:v.checkedAll,disabled:v.checkedAllDisabled,"onUpdate:modelValue":v.toggleSelectAll},null,8,["modelValue","disabled","onUpdate:modelValue"]),t.createElementVNode("span",{class:t.normalizeClass(p.prefixCls+"-header-title"),onClick:h[0]||(h[0]=H=>v.toggleSelectAll(!v.checkedAll))},t.toDisplayString(p.title),3),t.createElementVNode("span",{class:t.normalizeClass(p.prefixCls+"-header-count")},t.toDisplayString(v.count),3)],2),t.createElementVNode("div",{class:t.normalizeClass(v.bodyClasses)},[p.filterable?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(p.prefixCls+"-body-search-wrapper")},[t.createVNode(V,{"prefix-cls":p.prefixCls+"-search",query:w.query,onOnQueryClear:v.handleQueryClear,onOnQueryChange:v.handleQueryChange,placeholder:p.filterPlaceholder},null,8,["prefix-cls","query","onOnQueryClear","onOnQueryChange","placeholder"])],2)):t.createCommentVNode("",!0),t.createElementVNode("ul",{class:t.normalizeClass(p.prefixCls+"-content")},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.filterData,(H,X)=>(t.openBlock(),t.createElementBlock("li",{key:X,class:t.normalizeClass(v.itemClasses(H)),onClick:t.withModifiers(Y=>v.select(H),["prevent"])},[t.createVNode(A,{modelValue:v.isCheck(H),disabled:H.disabled},null,8,["modelValue","disabled"]),t.createElementVNode("span",{innerHTML:v.showLabel(H)},null,8,loe)],10,aoe))),128)),t.createElementVNode("li",{class:t.normalizeClass(p.prefixCls+"-content-not-found")},t.toDisplayString(p.notFoundText),3)],2)],2),w.showFooter?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(p.prefixCls+"-footer")},[t.renderSlot(a.$slots,"default")],2)):t.createCommentVNode("",!0)],6)}var PR=l(ooe,[["render",coe]]);const hoe={name:"Operation",components:{Button:cs,Icon:S},inject:["TransferInstance"],props:{prefixCls:String,operations:Array,leftActive:Boolean,rightActive:Boolean,reverseOperation:Boolean},methods:{moveToLeft(){this.TransferInstance.moveTo("left")},moveToRight(){this.TransferInstance.moveTo("right")}}},uoe={key:0},doe={key:0},foe={key:0},poe={key:0};function moe(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Button");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(p.prefixCls+"-operation")},[p.reverseOperation?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(V,{type:"primary",size:"small",disabled:!p.leftActive,onClick:v.moveToRight},{default:t.withCtx(()=>[p.operations[1]?(t.openBlock(),t.createElementBlock("span",uoe,t.toDisplayString(p.operations[1]),1)):t.createCommentVNode("",!0),t.createVNode(A,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"]),t.createVNode(V,{type:"primary",size:"small",disabled:!p.rightActive,onClick:v.moveToLeft},{default:t.withCtx(()=>[t.createVNode(A,{type:"ios-arrow-back"}),p.operations[0]?(t.openBlock(),t.createElementBlock("span",doe,t.toDisplayString(p.operations[0]),1)):t.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"])],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createVNode(V,{type:"primary",size:"small",disabled:!p.rightActive,onClick:v.moveToLeft},{default:t.withCtx(()=>[t.createVNode(A,{type:"ios-arrow-back"}),p.operations[0]?(t.openBlock(),t.createElementBlock("span",foe,t.toDisplayString(p.operations[0]),1)):t.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"]),t.createVNode(V,{type:"primary",size:"small",disabled:!p.leftActive,onClick:v.moveToRight},{default:t.withCtx(()=>[p.operations[1]?(t.openBlock(),t.createElementBlock("span",poe,t.toDisplayString(p.operations[1]),1)):t.createCommentVNode("",!0),t.createVNode(A,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"])],64))],2)}var goe=l(hoe,[["render",moe]]);const AR="ivu-transfer",RR={name:"Transfer",mixins:[ji,fi],emits:["on-change","on-selected-change"],provide(){return{TransferInstance:this}},render(){const a=this.$slots.default?this.$slots.default():"";return t.h("div",{class:this.classes},[t.h(PR,{ref:"left",prefixCls:this.prefixCls+"-list",data:this.leftData,renderFormat:this.renderFormat,checkedKeys:this.leftCheckedKeys,validKeysCount:this.leftValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[0],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleLeftCheckedKeysChange},()=>a),t.h(goe,{prefixCls:this.prefixCls,operations:this.operations,leftActive:this.leftValidKeysCount>0,rightActive:this.rightValidKeysCount>0,reverseOperation:this.reverseOperation}),t.h(PR,{ref:"right",prefixCls:this.prefixCls+"-list",data:this.rightData,renderFormat:this.renderFormat,checkedKeys:this.rightCheckedKeys,validKeysCount:this.rightValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[1],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleRightCheckedKeysChange},()=>a)])},props:{data:{type:Array,default(){return[]}},renderFormat:{type:Function,default(a){return a.label||a.key}},targetKeys:{type:Array,default(){return[]}},selectedKeys:{type:Array,default(){return[]}},listStyle:{type:Object,default(){return{}}},titles:{type:Array},operations:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!1},filterPlaceholder:{type:String},filterMethod:{type:Function,default(a,h){const p="label"in a?"label":"key";return a[p].indexOf(h)>-1}},notFoundText:{type:String},reverseOperation:{type:Boolean,default:!1}},data(){return{prefixCls:AR,leftData:[],rightData:[],leftCheckedKeys:[],rightCheckedKeys:[]}},computed:{classes(){return[`${AR}`]},leftValidKeysCount(){return this.getValidKeys("left").length},rightValidKeysCount(){return this.getValidKeys("right").length},localeFilterPlaceholder(){return this.filterPlaceholder===void 0?this.t("i.transfer.filterPlaceholder"):this.filterPlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.transfer.notFoundText"):this.notFoundText},localeTitles(){return this.titles===void 0?[this.t("i.transfer.titles.source"),this.t("i.transfer.titles.target")]:this.titles}},methods:{getValidKeys(a){return this[`${a}Data`].filter(h=>!h.disabled&&this[`${a}CheckedKeys`].indexOf(h.key)>-1).map(h=>h.key)},splitData(a=!1){this.leftData=[...this.data],this.rightData=[],this.targetKeys.length>0&&this.targetKeys.forEach(h=>{const p=this.leftData.filter((C,w)=>C.key===h?(this.leftData.splice(w,1),!0):!1);p&&p.length>0&&this.rightData.push(p[0])}),a&&this.splitSelectedKey()},splitSelectedKey(){const a=this.selectedKeys;a.length>0&&(this.leftCheckedKeys=this.leftData.filter(h=>a.indexOf(h.key)>-1).map(h=>h.key),this.rightCheckedKeys=this.rightData.filter(h=>a.indexOf(h.key)>-1).map(h=>h.key))},moveTo(a){const h=this.targetKeys,p=a==="left"?"right":"left",C=this.getValidKeys(p),w=a==="right"?C.concat(h):h.filter(v=>!C.some(A=>v===A));this.$refs[p].toggleSelectAll(!1),this.$emit("on-change",w,a,C),this.handleFormItemChange("change",{tarketKeys:w,direction:a,moveKeys:C})},handleLeftCheckedKeysChange(a){this.leftCheckedKeys=a},handleRightCheckedKeysChange(a){this.rightCheckedKeys=a},handleCheckedKeys(){const a=this.getValidKeys("left"),h=this.getValidKeys("right");this.$emit("on-selected-change",a,h)}},watch:{targetKeys(){this.splitData(!1)},data(){this.splitData(!1)}},mounted(){this.splitData(!0)}};var voe={name:"RenderCell",props:{render:Function,data:Object,node:Array},render(){const a={root:this.node[0],node:this.node[1],data:this.data};return this.render(t.h,a)}};const Mc="ivu-tree",yoe={name:"TreeNode",inject:["TreeInstance"],components:{Checkbox:Pd,Icon:S,CollapseTransition:_S,Render:voe},props:{data:{type:Object,default:()=>{}},multiple:{type:Boolean,default:!1},childrenKey:{type:String,default:"children"},showCheckbox:{type:Boolean,default:!1},appear:{type:Boolean,default:!1}},data(){return{prefixCls:Mc,appearByClickArrow:!1,globalConfig:{}}},computed:{classes(){return[`${Mc}-children`]},selectedCls(){return[{[`${Mc}-node-selected`]:this.data.selected}]},arrowClasses(){return[`${Mc}-arrow`,{[`${Mc}-arrow-disabled`]:this.data.disabled,[`${Mc}-arrow-open`]:this.data.expand}]},titleClasses(){return[`${Mc}-title`,{[`${Mc}-title-selected`]:this.data.selected}]},showArrow(){return this.data[this.childrenKey]&&this.data[this.childrenKey].length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},isParentRender(){const a=$(this,"Tree");return a&&a.render},parentRender(){const a=$(this,"Tree");return a&&a.render?a.render:null},node(){const a=$(this,"Tree");return a?[a.flatState,a.flatState.find(h=>h.nodeKey===this.data.nodeKey)]:[]},children(){return this.data[this.childrenKey]},arrowType(){const a=this.globalConfig;let h="ios-arrow-forward";return a&&(a.tree.customArrow?h="":a.tree.arrow&&(h=a.tree.arrow)),h},customArrowType(){const a=this.globalConfig;let h="";return a&&a.tree.customArrow&&(h=a.tree.customArrow),h},arrowSize(){const a=this.globalConfig;let h="";return a&&a.tree.arrowSize&&(h=a.tree.arrowSize),h}},methods:{handleExpand(){const a=this.data;if(this.appearByClickArrow=!0,a[this.childrenKey].length===0){const h=$(this,"Tree");if(h&&h.loadData){this.data.loading=!0,h.loadData(a,p=>{this.data.loading=!1,p.length&&(this.data[this.childrenKey]=p,t.nextTick(()=>this.handleExpand()))});return}}a[this.childrenKey]&&a[this.childrenKey].length&&(this.data.expand=!this.data.expand,this.TreeInstance.handleToggleExpand(this.data))},handleClickNode(){this.TreeInstance.expandNode?this.showArrow&&this.handleExpand():this.TreeInstance.selectNode&&this.handleSelect()},handleSelect(){this.data.disabled||(this.TreeInstance.showCheckbox&&this.TreeInstance.checkDirectly?this.handleCheck():this.TreeInstance.handleOnSelected(this.data.nodeKey))},handleCheck(){if(this.data.disabled)return;const a={checked:!this.data.checked&&!this.data.indeterminate,nodeKey:this.data.nodeKey};this.TreeInstance.handleOnCheck(a)},handleContextmenu(a,h){a.contextmenu&&(h.preventDefault(),this.TreeInstance.handleOnContextmenu({data:a,event:h}))},handlePreventSelect(a,h){a.contextmenu&&h.preventDefault()}},created(){const a=t.getCurrentInstance();this.globalConfig=a.appContext.config.globalProperties.$VIEWUI}},boe={key:0,class:"ivu-tree-expand"};function xoe(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("Checkbox"),H=t.resolveComponent("Render"),X=t.resolveComponent("TreeNode"),Y=t.resolveComponent("collapse-transition");return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(v.classes)},[t.createElementVNode("li",{onContextmenu:h[2]||(h[2]=t.withModifiers(le=>v.handleContextmenu(p.data,le),["stop"])),onSelectstart:h[3]||(h[3]=t.withModifiers(le=>v.handlePreventSelect(p.data,le),["stop"]))},[t.createElementVNode("span",{class:t.normalizeClass(v.arrowClasses),onClick:h[0]||(h[0]=(...le)=>v.handleExpand&&v.handleExpand(...le))},[v.showArrow?(t.openBlock(),t.createBlock(A,{key:0,type:v.arrowType,custom:v.customArrowType,size:v.arrowSize},null,8,["type","custom","size"])):t.createCommentVNode("",!0),v.showLoading?(t.openBlock(),t.createBlock(A,{key:1,type:"ios-loading",class:"ivu-load-loop"})):t.createCommentVNode("",!0)],2),p.showCheckbox?(t.openBlock(),t.createBlock(V,{key:0,"model-value":p.data.checked,indeterminate:p.data.indeterminate,disabled:p.data.disabled||p.data.disableCheckbox,onClick:t.withModifiers(v.handleCheck,["prevent"])},null,8,["model-value","indeterminate","disabled","onClick"])):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(v.titleClasses),onClick:h[1]||(h[1]=(...le)=>v.handleClickNode&&v.handleClickNode(...le))},[p.data.render?(t.openBlock(),t.createBlock(H,{key:0,render:p.data.render,data:p.data,node:v.node},null,8,["render","data","node"])):v.isParentRender?(t.openBlock(),t.createBlock(H,{key:1,render:v.parentRender,data:p.data,node:v.node},null,8,["render","data","node"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[t.createTextVNode(t.toDisplayString(p.data.title),1)],64))],2),t.createVNode(Y,{appear:p.appear},{default:t.withCtx(()=>[p.data.expand?(t.openBlock(),t.createElementBlock("div",boe,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.children,(le,xe)=>(t.openBlock(),t.createBlock(X,{appear:w.appearByClickArrow,key:xe,data:le,multiple:p.multiple,"show-checkbox":p.showCheckbox,"children-key":p.childrenKey},null,8,["appear","data","multiple","show-checkbox","children-key"]))),128))])):t.createCommentVNode("",!0)]),_:1},8,["appear"])],32)],2)}var Ooe=l(yoe,[["render",xoe]]);const woe="ivu-tree",_oe={name:"Tree",mixins:[ji],components:{TreeNode:Ooe,Dropdown:jh,DropdownMenu:qh},emits:["on-select-change","on-check-change","on-contextmenu","on-toggle-expand"],provide(){return{TreeInstance:this}},props:{data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!1},emptyText:{type:String},childrenKey:{type:String,default:"children"},loadData:{type:Function},render:{type:Function},selectNode:{type:Boolean,default:!0},expandNode:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:woe,stateTree:this.data,flatState:[],contextMenuVisible:!1,contextMenuStyles:{top:0,left:0}}},watch:{data:{deep:!0,handler(){this.stateTree=this.data,this.flatState=this.compileFlatState(),this.rebuildTree()}}},computed:{localeEmptyText(){return typeof this.emptyText>"u"?this.t("i.tree.emptyText"):this.emptyText}},methods:{compileFlatState(){let a=0,h=this.childrenKey;const p=[];function C(w,v){w.nodeKey=a++,p[w.nodeKey]={node:w,nodeKey:w.nodeKey},typeof v<"u"&&(p[w.nodeKey].parent=v.nodeKey,p[v.nodeKey][h].push(w.nodeKey)),w[h]&&(p[w.nodeKey][h]=[],w[h].forEach(A=>C(A,w)))}return this.stateTree.forEach(w=>{C(w)}),p},updateTreeUp(a){const h=this.flatState[a].parent;if(typeof h>"u"||this.checkStrictly)return;const p=this.flatState[a].node,C=this.flatState[h].node;p.checked==C.checked&&p.indeterminate==C.indeterminate||(p.checked==!0?(C.checked=C[this.childrenKey].every(w=>w.checked),C.indeterminate=!C.checked):(C.checked=!1,C.indeterminate=C[this.childrenKey].some(w=>w.checked||w.indeterminate)),this.updateTreeUp(h))},rebuildTree(){this.getCheckedNodes().forEach(a=>{this.updateTreeDown(a,{checked:!0});const h=this.flatState[a.nodeKey].parent;if(!h&&h!==0)return;const p=this.flatState[h].node;typeof a.checked<"u"&&a.checked&&p.checked!=a.checked&&this.updateTreeUp(a.nodeKey)})},getSelectedNodes(){return this.flatState.filter(a=>a.node.selected).map(a=>a.node)},getCheckedNodes(){return this.flatState.filter(a=>a.node.checked).map(a=>a.node)},getCheckedAndIndeterminateNodes(){return this.flatState.filter(a=>a.node.checked||a.node.indeterminate).map(a=>a.node)},updateTreeDown(a,h={}){if(!this.checkStrictly){for(let p in h)a[p]=h[p];a[this.childrenKey]&&a[this.childrenKey].forEach(p=>{this.updateTreeDown(p,h)})}},handleSelect(a){if(!this.flatState[a])return;const h=this.flatState[a].node;if(!this.multiple){const p=this.flatState.findIndex(C=>C.node.selected);p>=0&&p!==a&&(this.flatState[p].node.selected=!1)}h.selected=!h.selected,this.$emit("on-select-change",this.getSelectedNodes(),h)},handleCheck({checked:a,nodeKey:h}){if(!this.flatState[h])return;const p=this.flatState[h].node;p.checked=a,p.indeterminate=!1,this.updateTreeUp(h),this.updateTreeDown(p,{checked:a,indeterminate:!1}),this.$emit("on-check-change",this.getCheckedNodes(),p)},handleContextmenu({data:a,event:h}){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const p=this.$refs.treeWrap.getBoundingClientRect(),C={left:`${h.clientX-p.left}px`,top:`${h.clientY-p.top}px`};this.contextMenuStyles=C,this.contextMenuVisible=!0,this.$emit("on-contextmenu",a,h,C)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnCheck(a){this.handleCheck(a)},handleOnSelected(a){this.handleSelect(a)},handleToggleExpand(a){this.$emit("on-toggle-expand",a)},handleOnContextmenu(a){this.handleContextmenu(a)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.flatState=this.compileFlatState(),this.rebuildTree()}};function Soe(a,h,p,C,w,v){const A=t.resolveComponent("TreeNode"),V=t.resolveComponent("DropdownMenu"),H=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(w.prefixCls),ref:"treeWrap"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.stateTree,(X,Y)=>(t.openBlock(),t.createBlock(A,{key:Y,data:X,visible:"",multiple:p.multiple,"show-checkbox":p.showCheckbox,"children-key":p.childrenKey},null,8,["data","multiple","show-checkbox","children-key"]))),128)),w.stateTree.length?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([w.prefixCls+"-empty"])},t.toDisplayString(v.localeEmptyText),3)),t.createElementVNode("div",{class:"ivu-tree-context-menu",style:t.normalizeStyle(w.contextMenuStyles)},[t.createVNode(H,{trigger:"custom",visible:w.contextMenuVisible,transfer:"",onOnClick:v.handleClickDropdownItem,onOnClickoutside:v.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(V,null,{default:t.withCtx(()=>[t.renderSlot(a.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var VS=l(_oe,[["render",Soe]]);const Coe={name:"TreeSelect",components:{Select:ls,Tree:VS},emits:["on-change","update:modelValue","on-open-change"],mixins:[fi],props:{modelValue:{type:[String,Number,Array]},data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default(){const a=t.getCurrentInstance().appContext.config.globalProperties;return!a.$VIEWUI||a.$VIEWUI.transfer===""?!1:a.$VIEWUI.transfer}}},data(){let a=this.modelValue;return a===null&&(this.multiple?a=[]:a=""),{currentValue:a,isChangeValueInTree:!1,isValueChangeByTree:!1,isValueNull:!1}},watch:{modelValue(a){if(this.isChangeValueInTree)this.isChangeValueInTree=!1;else{let h=a;h===null&&(this.isValueNull=!0,this.multiple?h=[]:h=""),this.currentValue=h,this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0)}},data(){this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0))}},computed:{valueToArray(){return typeof this.currentValue=="object"?this.currentValue:[this.currentValue]},isCheckboxUsable(){return this.multiple&&this.showCheckbox},transferClassName(){return this.transfer?"ivu-tree-select-transfer":""},classes(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode(a,h){if(this.multiple)a.length?(this.currentValue=a.map(p=>p.value),this.handleUpdateSelectValue(h.value,h.title)):(this.currentValue=[],this.handleUpdateSelectValue("",""));else if(a.length){const p=a[0];this.currentValue=p.value,this.handleUpdateSelectValue(p.value,p.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("update:modelValue",this.currentValue),this.$emit("on-change",this.currentValue),this.handleFormItemChange("change",this.currentValue)},handleUpdateTreeNodes(a,h=!1){a.forEach(p=>{this.valueToArray.indexOf(p.value)>=0?(this.isCheckboxUsable?p.checked=!0:p.selected=!0,this.handleUpdateSelectValue(p.value,p.title)):this.isCheckboxUsable?p.checked=!1:p.selected=!1,p.children&&p.children.length&&this.handleUpdateTreeNodes(p.children)}),h&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue(a,h){a===""?this.$refs.select.reset():(this.isValueChangeByTree=!0,this.$refs.select.onOptionClick({value:a,label:h}))},handleChange(a){this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=a,this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",a),this.$emit("on-change",a),this.handleFormItemChange("change",a),this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0),t.nextTick(()=>{this.isValueChangeByTree=!1}))},handleOpenChange(a){this.$emit("on-open-change",a)}},mounted(){this.handleUpdateTreeNodes(this.data,!0)}};function koe(a,h,p,C,w,v){const A=t.resolveComponent("Tree"),V=t.resolveComponent("Select");return t.openBlock(),t.createBlock(V,t.mergeProps({ref:"select"},a.$attrs,{multiple:p.multiple,class:["ivu-tree-select",v.classes],"transfer-class-name":v.transferClassName,onOnChange:v.handleChange,onOnOpenChange:v.handleOpenChange,hideNotFound:"",transfer:p.transfer}),{default:t.withCtx(()=>[t.createVNode(A,{data:p.data,multiple:p.multiple,onOnSelectChange:v.handleSelectNode,onOnCheckChange:v.handleSelectNode,"check-strictly":"","show-checkbox":p.multiple&&p.showCheckbox,"check-directly":"","load-data":p.loadData},null,8,["data","multiple","onOnSelectChange","onOnCheckChange","show-checkbox","load-data"])]),_:1},16,["multiple","class","transfer-class-name","onOnChange","onOnOpenChange","transfer"])}var IR=l(Coe,[["render",koe]]);const Toe={name:"Typography"},Moe={class:"ivu-typography"};function Eoe(a,h,p,C,w,v){return t.openBlock(),t.createElementBlock("article",Moe,[t.renderSlot(a.$slots,"default")])}var DR=l(Toe,[["render",Eoe]]);const LS="ivu-upload",Poe={name:"UploadList",components:{Icon:S,iProgress:s1},emits:["on-file-click","on-file-preview","on-file-remove"],props:{files:{type:Array,default(){return[]}}},data(){return{prefixCls:LS}},methods:{fileCls(a){return[`${LS}-list-file`,{[`${LS}-list-file-finish`]:a.status==="finished"}]},handleClick(a){this.$emit("on-file-click",a)},handlePreview(a){this.$emit("on-file-preview",a)},handleRemove(a){this.$emit("on-file-remove",a)},format(a){const h=a.name.split(".").pop().toLocaleLowerCase()||"";let p="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(h)>-1&&(p="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(h)>-1&&(p="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(h)>-1&&(p="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(h)>-1&&(p="md-document"),["numbers","csv","xls","xlsx"].indexOf(h)>-1&&(p="ios-stats"),["keynote","ppt","pptx"].indexOf(h)>-1&&(p="ios-videocam"),p},parsePercentage(a){return parseInt(a,10)}}},Aoe=["onClick"],Roe=["onClick"];function Ioe(a,h,p,C,w,v){const A=t.resolveComponent("Icon"),V=t.resolveComponent("i-progress");return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass([w.prefixCls+"-list"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.files,(H,X)=>(t.openBlock(),t.createElementBlock("li",{key:X,class:t.normalizeClass(v.fileCls(H)),onClick:Y=>v.handleClick(H)},[t.createElementVNode("span",{onClick:Y=>v.handlePreview(H)},[t.createVNode(A,{type:v.format(H)},null,8,["type"]),t.createTextVNode(" "+t.toDisplayString(H.name),1)],8,Roe),t.withDirectives(t.createVNode(A,{type:"ios-close",class:t.normalizeClass([w.prefixCls+"-list-remove"]),onClick:Y=>v.handleRemove(H)},null,8,["class","onClick"]),[[t.vShow,H.status==="finished"]]),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[H.showProgress?(t.openBlock(),t.createBlock(V,{key:0,"stroke-width":2,percent:v.parsePercentage(H.percentage),status:H.status==="finished"&&H.showProgress?"success":"normal"},null,8,["percent","status"])):t.createCommentVNode("",!0)]),_:2},1024)],10,Aoe))),128))],2)}var Doe=l(Poe,[["render",Ioe]]);function Noe(a,h,p){const C=`fail to post ${a} ${p.status}'`,w=new Error(C);return w.status=p.status,w.method="post",w.url=a,w}function NR(a){const h=a.responseText||a.response;if(!h)return h;try{return JSON.parse(h)}catch{return h}}function $oe(a){if(typeof XMLHttpRequest>"u")return;const h=new XMLHttpRequest,p=a.action;h.upload&&(h.upload.onprogress=function(v){v.total>0&&(v.percent=v.loaded/v.total*100),a.onProgress(v)});const C=new FormData;a.data&&Object.keys(a.data).map(v=>{C.append(v,a.data[v])}),C.append(a.filename,a.file),h.onerror=function(v){a.onError(v)},h.onload=function(){if(h.status<200||h.status>=300)return a.onError(Noe(p,a,h),NR(h));a.onSuccess(NR(h))},h.open("post",p,!0),a.withCredentials&&"withCredentials"in h&&(h.withCredentials=!0);const w=a.headers||{};for(let v in w)w.hasOwnProperty(v)&&w[v]!==null&&h.setRequestHeader(v,w[v]);h.send(C)}const Vm="ivu-upload",Voe={name:"Upload",mixins:[fi],components:{UploadList:Doe},props:{action:{type:String,required:!0},headers:{type:Object,default(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator(a){return _(a,["select","drag"])},default:"select"},format:{type:Array,default(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default(){return{}}},onSuccess:{type:Function,default(){return{}}},onError:{type:Function,default(){return{}}},onRemove:{type:Function,default(){return{}}},onPreview:{type:Function,default(){return{}}},onExceededSize:{type:Function,default(){return{}}},onFormatError:{type:Function,default(){return{}}},defaultFileList:{type:Array,default(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},webkitdirectory:{type:Boolean,default:!1}},data(){return{prefixCls:Vm,dragOver:!1,fileList:[],tempIndex:1}},computed:{classes(){return[`${Vm}`,{[`${Vm}-select`]:this.type==="select",[`${Vm}-drag`]:this.type==="drag",[`${Vm}-dragOver`]:this.type==="drag"&&this.dragOver}]}},methods:{handleClick(){this.itemDisabled||this.$refs.input.click()},handleChange(a){const h=a.target.files;!h||(this.uploadFiles(h),this.$refs.input.value=null)},onDrop(a){this.dragOver=!1,!this.itemDisabled&&this.uploadFiles(a.dataTransfer.files)},handlePaste(a){this.itemDisabled||this.paste&&this.uploadFiles(a.clipboardData.files)},uploadFiles(a){let h=Array.prototype.slice.call(a);this.multiple||(h=h.slice(0,1)),h.length!==0&&h.forEach(p=>{this.upload(p)})},upload(a){if(!this.beforeUpload)return this.post(a);const h=this.beforeUpload(a);h&&h.then?h.then(p=>{Object.prototype.toString.call(p)==="[object File]"?this.post(p):this.post(a)},()=>{}):h!==!1&&this.post(a)},post(a){if(this.format.length){const h=a.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(p=>p.toLocaleLowerCase()===h))return this.onFormatError(a,this.fileList),!1}if(this.maxSize&&a.size>this.maxSize*1024)return this.onExceededSize(a,this.fileList),!1;this.handleStart(a),new FormData().append(this.name,a),$oe({headers:this.headers,withCredentials:this.withCredentials,file:a,data:this.data,filename:this.name,action:this.action,onProgress:h=>{this.handleProgress(h,a)},onSuccess:h=>{this.handleSuccess(h,a)},onError:(h,p)=>{this.handleError(h,p,a)}})},handleStart(a){a.uid=Date.now()+this.tempIndex++;const h={status:"uploading",name:a.name,size:a.size,percentage:0,uid:a.uid,showProgress:!0};this.fileList.push(h)},getFile(a){const h=this.fileList;let p;return h.every(C=>(p=a.uid===C.uid?C:null,!p)),p},handleProgress(a,h){const p=this.getFile(h);this.onProgress(a,p,this.fileList),p.percentage=a.percent||0},handleSuccess(a,h){const p=this.getFile(h);p&&(p.status="finished",p.response=a,this.onSuccess(a,p,this.fileList),this.handleFormItemChange("change",p),setTimeout(()=>{p.showProgress=!1},1e3))},handleError(a,h,p){const C=this.getFile(p),w=this.fileList;C.status="fail",w.splice(w.indexOf(C),1),this.onError(a,h,p)},handleRemove(a){const h=this.fileList;h.splice(h.indexOf(a),1),this.onRemove(a,h)},handlePreview(a){a.status==="finished"&&this.onPreview(a)},clearFiles(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler(a){this.fileList=a.map(h=>(h.status="finished",h.percentage=100,h.uid=Date.now()+this.tempIndex++,h))}}}},Loe=["multiple","webkitdirectory","accept"];function Boe(a,h,p,C,w,v){const A=t.resolveComponent("upload-list");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([w.prefixCls])},[t.createElementVNode("div",{class:t.normalizeClass(v.classes),onClick:h[1]||(h[1]=(...V)=>v.handleClick&&v.handleClick(...V)),onDrop:h[2]||(h[2]=t.withModifiers((...V)=>v.onDrop&&v.onDrop(...V),["prevent"])),onPaste:h[3]||(h[3]=(...V)=>v.handlePaste&&v.handlePaste(...V)),onDragover:h[4]||(h[4]=t.withModifiers(V=>w.dragOver=!0,["prevent"])),onDragleave:h[5]||(h[5]=t.withModifiers(V=>w.dragOver=!1,["prevent"]))},[t.createElementVNode("input",{ref:"input",type:"file",class:t.normalizeClass([w.prefixCls+"-input"]),onChange:h[0]||(h[0]=(...V)=>v.handleChange&&v.handleChange(...V)),multiple:p.multiple,webkitdirectory:p.webkitdirectory,accept:p.accept},null,42,Loe),t.renderSlot(a.$slots,"default")],34),t.renderSlot(a.$slots,"tip"),p.showUploadList?(t.openBlock(),t.createBlock(A,{key:0,files:w.fileList,onOnFileRemove:v.handleRemove,onOnFilePreview:v.handlePreview},null,8,["files","onOnFileRemove","onOnFilePreview"])):t.createCommentVNode("",!0)],2)}var $R=l(Voe,[["render",Boe]]);const VR={name:"UserName",mixins:[um],data(){return{className:"ivu-login-username",prefix:"ios-contact-outline",placeholder:"",type:"text",validateMessage:""}}},Uoe={name:"WordCount",components:{Circle:Ey},props:{value:{type:[String,Number],default:""},total:{type:Number,default:0},hideTotal:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},size:{type:[String,Number],default:14}},computed:{isOverflow(){return this.value.length>this.total},percent(){let a=this.value.length/this.total*100;return a>100&&(a=100),a},strokeColor(){return this.isOverflow?"#ed4014":"#2d8cf0"}}},Foe={class:"ivu-word-count"},zoe={key:0,class:"ivu-word-count-prefix"},Xoe={key:1,class:"ivu-word-count-prefix ivu-word-count-overflow"},Woe={key:3,class:"ivu-word-count-overflow"},Qoe={key:5,class:"ivu-word-count-suffix"},Hoe={key:6,class:"ivu-word-count-suffix ivu-word-count-overflow"};function Goe(a,h,p,C,w,v){const A=t.resolveComponent("Circle");return t.openBlock(),t.createElementBlock("div",Foe,[p.circle?(t.openBlock(),t.createBlock(A,{key:0,percent:v.percent,size:p.size,"stroke-color":v.strokeColor},null,8,["percent","size","stroke-color"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[v.isOverflow?(t.openBlock(),t.createElementBlock("span",Xoe,[t.renderSlot(a.$slots,"prefix-overflow")])):(t.openBlock(),t.createElementBlock("span",zoe,[t.renderSlot(a.$slots,"prefix")])),!v.isOverflow||!p.overflow?(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass({"ivu-word-count-overflow":v.isOverflow})},[t.renderSlot(a.$slots,"length",{length:p.value.length},()=>[t.createTextVNode(t.toDisplayString(p.value.length),1)])],2)):(t.openBlock(),t.createElementBlock("span",Woe,t.toDisplayString(p.value.length-p.total),1)),p.hideTotal?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock(t.Fragment,{key:4},[t.renderSlot(a.$slots,"separator",{},()=>[t.createTextVNode(" / ")]),t.renderSlot(a.$slots,"total",{total:p.total},()=>[t.createTextVNode(t.toDisplayString(p.total),1)])],64)),v.isOverflow?(t.openBlock(),t.createElementBlock("span",Hoe,[t.renderSlot(a.$slots,"suffix-overflow")])):(t.openBlock(),t.createElementBlock("span",Qoe,[t.renderSlot(a.$slots,"suffix")]))],64))])}var LR=l(Uoe,[["render",Goe]]),BR=Object.freeze(Object.defineProperty({__proto__:null,Affix:g,Alert:K,Anchor:z,AnchorLink:ae,Auth:Me,AutoComplete:aA,Avatar:sm,AvatarList:hA,BackTop:uA,Badge:wy,Breadcrumb:A_,BreadcrumbItem:R_,Button:cs,ButtonGroup:I_,Calendar:OA,Captcha:MA,Card:PA,Carousel:AA,CarouselItem:RA,Cascader:IA,Cell:DA,CellGroup:NA,Checkbox:Pd,CheckboxGroup:X_,Circle:Ey,City:BA,Col:Na,Collapse:FA,ColorPicker:JA,Content:H_,Copy:Ny,CountDown:o4,CountUp:a4,DatePicker:B4,Description:U4,DescriptionList:F4,Divider:zy,Drawer:z4,Dropdown:jh,DropdownItem:X4,DropdownMenu:qh,Ellipsis:W4,Email:Q4,Exception:H4,Footer:aS,FooterToolbar:G4,Form:Hy,FormItem:My,GlobalFooter:Y4,Grid:a5,GridItem:l5,Header:dS,Icon:S,Image:c5,ImagePreview:Sc,Input:Ao,InputNumber:fS,Layout:u5,Link:m5,List:b5,ListItem:x5,ListItemMeta:O5,LoadingBar:mS,Login:M5,Menu:vS,MenuGroup:E5,MenuItem:P5,Message:bm,Mobile:A5,Modal:Io,Notice:bS,Notification:z5,NotificationItem:Q5,NotificationTab:H5,NumberInfo:G5,Numeral:j5,Option:Pn,OptionGroup:q5,Page:Z5,PageHeader:K5,Panel:J5,Paragraph:eR,Password:tR,Poptip:SS,Progress:s1,Radio:Cy,RadioGroup:Sy,Rate:iR,Result:nR,Row:vc,Scroll:sR,ScrollIntoView:kS,ScrollTop:TS,Select:ls,Sider:hR,Skeleton:uR,SkeletonItem:MS,Slider:dR,Space:fR,Spin:so,Split:pR,Step:gR,Steps:vR,Submenu:yR,Submit:bR,Switch:PS,Table:a1,TablePaste:OR,TabPane:r1,Tabs:i1,Tag:Ad,TagSelect:wR,TagSelectOption:_R,Text:SR,Time:n1,Timeline:kR,TimelineItem:TR,TimePicker:MR,Title:ER,Tooltip:vl,Transfer:RR,Tree:VS,TreeSelect:IR,Trend:OS,Typography:DR,Upload:$R,UserName:VR,WordCount:LR},Symbol.toStringTag,{value:"Module"})),Yoe={mounted(a,h){h.value&&(Z(a,"ivu-line-clamp"),a.style["-webkit-line-clamp"]=h.value)},updated(a,h){h.value&&(a.style["-webkit-line-clamp"]=h.value)},unmounted(a){te(a,"ivu-line-clamp"),a.style["-webkit-line-clamp"]=null}},joe={mounted(a,h){function p(C){h.value(C)}a.__resizeHandler__=p,a.__observer__=Vd(),a.__observer__.listenTo(a,p)},updated(){},unmounted(a,h){a.__observer__.removeListener(a,a.__resizeHandler__),delete a.__resizeHandler__,delete a.__observer__}};function Ec(a){return String(a).endsWith("%")?"":"px"}var Pc={display:{mounted(a,h){h.value&&(a.style.display=h.value)},updated(a,h){h.value&&(a.style.display=h.value)},unmounted(a){a.style.display=null}},width:{mounted(a,h){h.value&&(a.style.width=h.value+Ec(h.value))},updated(a,h){h.value&&(a.style.width=h.value+Ec(h.value))},unmounted(a){a.style.width=null}},height:{mounted(a,h){h.value&&(a.style.height=h.value+Ec(h.value))},updated(a,h){h.value&&(a.style.height=h.value+Ec(h.value))},unmounted(a){a.style.height=null}},margin:{mounted(a,h){h.value&&(a.style.margin=h.value+Ec(h.value))},updated(a,h){h.value&&(a.style.margin=h.value+Ec(h.value))},unmounted(a){a.style.margin=null}},padding:{mounted(a,h){h.value&&(a.style.padding=h.value+Ec(h.value))},updated(a,h){h.value&&(a.style.padding=h.value+Ec(h.value))},unmounted(a){a.style.padding=null}},font:{mounted(a,h){h&&h.value&&(a.style.fontSize=`${h.value}px`)},updated(a,h){h&&h.value&&(a.style.fontSize=`${h.value}px`)},unmounted(a){a.style.fontSize=null}},color:{mounted(a,h){h.value&&(a.style.color=h.value)},updated(a,h){h.value&&(a.style.color=h.value)},unmounted(a){a.style.color=null}},bgColor:{mounted(a,h){h.value&&(a.style.backgroundColor=h.value)},updated(a,h){h.value&&(a.style.backgroundColor=h.value)},unmounted(a){a.style.backgroundColor=null}}},qoe={name:"view-ui-plus",version:"1.3.17",title:"ViewUIPlus",description:"A high quality UI components Library with Vue.js 3",homepage:"http://www.iviewui.com",keywords:["iview","vue","viewui","viewuiplus","vue.js","component","components","ui","framework"],main:"dist/viewuiplus.min.js",typings:"types/index.d.ts",files:["dist","src","types"],scripts:{dev:"vue-cli-service serve",build:"npm run build:prod && npm run build:style && npm run build:lang","build:style":"gulp --gulpfile build/build-style.js","build:prod":"vite build","build:lang":"vite build --config build/vite.lang.config.js",lint:"vue-cli-service lint --fix"},repository:{type:"git",url:"https://github.com/view-design/ViewUIPlus"},author:"Aresn",license:"MIT",bugs:{url:"https://github.com/view-design/ViewUIPlus/issues"},dependencies:{"async-validator":"^3.3.0","countup.js":"^1.9.3",dayjs:"^1.11.0",deepmerge:"^2.2.1","element-resize-detector":"^1.2.0","js-calendar":"^1.2.3","lodash.chunk":"^4.2.0","lodash.throttle":"^4.1.1",numeral:"^2.0.6","popper.js":"^1.14.6",select:"^1.1.2",tinycolor2:"^1.4.1","v-click-outside-x":"^3.7.1"},devDependencies:{"@vitejs/plugin-vue":"^1.9.3","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-eslint":"~4.5.0","@vue/cli-service":"~4.5.0","@vue/compiler-sfc":"^3.0.0","babel-eslint":"^10.1.0","babel-plugin-import":"^1.13.3",chai:"^4.2.0","copy-webpack-plugin":"^6.4.1","cross-env":"^5.2.0",eslint:"^6.7.2","eslint-plugin-vue":"^7.0.0-0",gulp:"^4.0.2","gulp-autoprefixer":"^8.0.0","gulp-clean-css":"^4.3.0","gulp-less":"^4.0.1","gulp-rename":"^2.0.0",karma:"^2.0.5","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-sinon-chai":"^1.3.3","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"^0.0.32","karma-webpack":"^2.0.13",less:"^2.7.3","less-loader":"^4.1.0","lint-staged":"^10.5.4",lolex:"^2.7.5",mocha:"^5.0.4",sinon:"^4.4.2","sinon-chai":"^3.3.0","style-loader":"^0.20.2",tslint:"^5.14.0",typescript:"^3.3.4000","uglifyjs-webpack-plugin":"^1.3.0","url-loader":"^1.1.2",vite:"^2.6.4",vue:"^3.2.47","vue-hot-reload-api":"^2.3.4","vue-html-loader":"^1.2.4","vue-loader":"^17.0.0","vue-router":"^4.0.14","vue-style-loader":"^4.1.3","vue-template-compiler":"^2.6.14"}};const UR={display:Pc.display,width:Pc.width,height:Pc.height,margin:Pc.margin,padding:Pc.padding,font:Pc.font,color:Pc.color,"bg-color":Pc.bgColor,resize:joe,"line-clamp":Yoe},FR={...BR,iButton:cs,iCircle:Ey,iCol:Na,iContent:H_,iForm:Hy,iFooter:aS,iHeader:dS,iInput:Ao,iMenu:vS,iOption:Pn,iProgress:s1,iSelect:ls,iSwitch:PS,iTable:a1,iTime:n1},BS=function(a,h={}){BS.installed||(h.locale&&pc.use(h.locale),h.i18n&&pc.i18n(h.i18n),Object.keys(FR).forEach(p=>{a.component(p,FR[p])}),Object.keys(UR).forEach(p=>{a.directive(p,UR[p])}),a.config.globalProperties.$VIEWUI={size:h.size||"",capture:"capture"in h?h.capture:!0,transfer:"transfer"in h?h.transfer:"",cell:{arrow:h.cell&&h.cell.arrow?h.cell.arrow:"",customArrow:h.cell&&h.cell.customArrow?h.cell.customArrow:"",arrowSize:h.cell&&h.cell.arrowSize?h.cell.arrowSize:""},menu:{arrow:h.menu&&h.menu.arrow?h.menu.arrow:"",customArrow:h.menu&&h.menu.customArrow?h.menu.customArrow:"",arrowSize:h.menu&&h.menu.arrowSize?h.menu.arrowSize:""},modal:{maskClosable:h.modal&&"maskClosable"in h.modal?h.modal.maskClosable:""},tabs:{closeIcon:h.tabs&&h.tabs.closeIcon?h.tabs.closeIcon:"",customCloseIcon:h.tabs&&h.tabs.customCloseIcon?h.tabs.customCloseIcon:"",closeIconSize:h.tabs&&h.tabs.closeIconSize?h.tabs.closeIconSize:""},select:{arrow:h.select&&h.select.arrow?h.select.arrow:"",customArrow:h.select&&h.select.customArrow?h.select.customArrow:"",arrowSize:h.select&&h.select.arrowSize?h.select.arrowSize:""},colorPicker:{arrow:h.colorPicker&&h.colorPicker.arrow?h.colorPicker.arrow:"",customArrow:h.colorPicker&&h.colorPicker.customArrow?h.colorPicker.customArrow:"",arrowSize:h.colorPicker&&h.colorPicker.arrowSize?h.colorPicker.arrowSize:""},cascader:{arrow:h.cascader&&h.cascader.arrow?h.cascader.arrow:"",customArrow:h.cascader&&h.cascader.customArrow?h.cascader.customArrow:"",arrowSize:h.cascader&&h.cascader.arrowSize?h.cascader.arrowSize:"",itemArrow:h.cascader&&h.cascader.itemArrow?h.cascader.itemArrow:"",customItemArrow:h.cascader&&h.cascader.customItemArrow?h.cascader.customItemArrow:"",itemArrowSize:h.cascader&&h.cascader.itemArrowSize?h.cascader.itemArrowSize:""},tree:{arrow:h.tree&&h.tree.arrow?h.tree.arrow:"",customArrow:h.tree&&h.tree.customArrow?h.tree.customArrow:"",arrowSize:h.tree&&h.tree.arrowSize?h.tree.arrowSize:""},datePicker:{icon:h.datePicker&&h.datePicker.icon?h.datePicker.icon:"",customIcon:h.datePicker&&h.datePicker.customIcon?h.datePicker.customIcon:"",iconSize:h.datePicker&&h.datePicker.iconSize?h.datePicker.iconSize:""},timePicker:{icon:h.timePicker&&h.timePicker.icon?h.timePicker.icon:"",customIcon:h.timePicker&&h.timePicker.customIcon?h.timePicker.customIcon:"",iconSize:h.timePicker&&h.timePicker.iconSize?h.timePicker.iconSize:""},typography:{copyConfig:h.typography&&h.typography.copyConfig?h.typography.copyConfig:"",editConfig:h.typography&&h.typography.editConfig?h.typography.editConfig:"",ellipsisConfig:h.typography&&h.typography.ellipsisConfig?h.typography.ellipsisConfig:""},space:{size:h.space&&h.space.size?h.space.size:""},image:{toolbar:h.image&&h.image.toolbar?h.image.toolbar:""}},a.config.globalProperties.$Spin=so,a.config.globalProperties.$Loading=mS,a.config.globalProperties.$Message=bm,a.config.globalProperties.$Notice=bS,a.config.globalProperties.$Modal=Io,a.config.globalProperties.$ImagePreview=Sc,a.config.globalProperties.$Copy=Ny,a.config.globalProperties.$ScrollIntoView=kS,a.config.globalProperties.$ScrollTop=TS,a.config.globalProperties.$Date=to)},zR=qoe.version,XR=pc.use,WR=pc.i18n,QR=a=>{const h=window["viewuiplus/locale"].default;a===h.i.locale?pc.use(h):console.log(`The ${a} language pack is not loaded.`)},Zoe={version:zR,locale:XR,i18n:WR,install:BS,lang:QR,...BR};i.Affix=g,i.Alert=K,i.Anchor=z,i.AnchorLink=ae,i.Auth=Me,i.AutoComplete=aA,i.Avatar=sm,i.AvatarList=hA,i.BackTop=uA,i.Badge=wy,i.Breadcrumb=A_,i.BreadcrumbItem=R_,i.Button=cs,i.ButtonGroup=I_,i.Calendar=OA,i.Captcha=MA,i.Card=PA,i.Carousel=AA,i.CarouselItem=RA,i.Cascader=IA,i.Cell=DA,i.CellGroup=NA,i.Checkbox=Pd,i.CheckboxGroup=X_,i.Circle=Ey,i.City=BA,i.Col=Na,i.Collapse=FA,i.ColorPicker=JA,i.Content=H_,i.Copy=Ny,i.CountDown=o4,i.CountUp=a4,i.DatePicker=B4,i.Description=U4,i.DescriptionList=F4,i.Divider=zy,i.Drawer=z4,i.Dropdown=jh,i.DropdownItem=X4,i.DropdownMenu=qh,i.Ellipsis=W4,i.Email=Q4,i.Exception=H4,i.Footer=aS,i.FooterToolbar=G4,i.Form=Hy,i.FormItem=My,i.GlobalFooter=Y4,i.Grid=a5,i.GridItem=l5,i.Header=dS,i.Icon=S,i.Image=c5,i.ImagePreview=Sc,i.Input=Ao,i.InputNumber=fS,i.Layout=u5,i.Link=m5,i.List=b5,i.ListItem=x5,i.ListItemMeta=O5,i.LoadingBar=mS,i.Login=M5,i.Menu=vS,i.MenuGroup=E5,i.MenuItem=P5,i.Message=bm,i.Mobile=A5,i.Modal=Io,i.Notice=bS,i.Notification=z5,i.NotificationItem=Q5,i.NotificationTab=H5,i.NumberInfo=G5,i.Numeral=j5,i.Option=Pn,i.OptionGroup=q5,i.Page=Z5,i.PageHeader=K5,i.Panel=J5,i.Paragraph=eR,i.Password=tR,i.Poptip=SS,i.Progress=s1,i.Radio=Cy,i.RadioGroup=Sy,i.Rate=iR,i.Result=nR,i.Row=vc,i.Scroll=sR,i.ScrollIntoView=kS,i.ScrollTop=TS,i.Select=ls,i.Sider=hR,i.Skeleton=uR,i.SkeletonItem=MS,i.Slider=dR,i.Space=fR,i.Spin=so,i.Split=pR,i.Step=gR,i.Steps=vR,i.Submenu=yR,i.Submit=bR,i.Switch=PS,i.TabPane=r1,i.Table=a1,i.TablePaste=OR,i.Tabs=i1,i.Tag=Ad,i.TagSelect=wR,i.TagSelectOption=_R,i.Text=SR,i.Time=n1,i.TimePicker=MR,i.Timeline=kR,i.TimelineItem=TR,i.Title=ER,i.Tooltip=vl,i.Transfer=RR,i.Tree=VS,i.TreeSelect=IR,i.Trend=OS,i.Typography=DR,i.Upload=$R,i.UserName=VR,i.WordCount=LR,i.default=Zoe,i.i18n=WR,i.install=BS,i.lang=QR,i.locale=XR,i.version=zR,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(tE,tE.exports);var h6e=tE.exports;const u6e=Yp(h6e);var C_=aU(c6e);C_.use(u6e);C_.use(Qye);C_.use(m7);C_.mount("#app");export{oH as $,sH as A,zs as B,Wr as C,zn as D,Ht as E,v4e as F,b_ as G,cl as H,xL as I,Av as J,F4e as K,q4e as L,Xi as M,yr as N,vr as O,Br as P,p5e as Q,zM as R,D5e as S,rx as T,LM as U,wL as V,SL as W,x4e as X,K2 as Y,rr as Z,TQ as _,Aa as a,Hi as a0,sn as a1,b5e as a2,U5e as a3,sRe as a4,aRe as a5,dRe as a6,pRe as a7,mRe as a8,Np as a9,Lv as aa,rIe as ab,wH as ac,DL as ad,RL as ae,zAe as af,sB as ag,hIe as ah,Bv as ai,Bn as aj,WAe as ak,iB as al,JM as am,nB as an,qO as ao,CH as ap,$v as b,Xx as c,q3 as d,Cs as e,IL as f,A5e as g,iH as h,LQ as i,gl as j,KQ as k,tB as l,rRe as m,oRe as n,hRe as o,dH as p,fRe as q,n4e as r,Z3 as s,Li as t,YQ as u,XAe as v,sr as w,vRe as x,Kl as y,SQ as z};
